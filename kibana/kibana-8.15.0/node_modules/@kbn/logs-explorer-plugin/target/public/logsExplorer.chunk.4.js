/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.logsExplorer_bundle_jsonpfunction=window.logsExplorer_bundle_jsonpfunction||[]).push([[4],{128:function(e,t,r){"use strict";r.r(t);var n=r(4),o=r(42),u=r(43),i=r(44),a=r(10);const s=e=>{const{from:t,to:r}=e.getTime(),{min:n,max:o}=e.calculateBounds({from:t,to:r});return{fromDate:(null==n?void 0:n.toISOString())||t,toDate:(null==o?void 0:o.toISOString())||r}};function c(e){if(e)return Object(a.isOfAggregateQueryType)(e)?"text-based":"documents"}var l=r(60);var f=r(6);const p=u.euiStyled.div`
[class*='options_list_popover_footer--OptionsListPopoverFooter'] {
  display: none;
}

[data-test-subj='controls-group-wrapper'] {
  min-height: 32px;
}

[data-test-subj='optionsListControl__sortingOptionsButton'] {
  display: none;
}

[id^='control-popover'] .euiPopoverTitle {
  display: none;
}

  .euiFlexGroup.controlGroup {
    min-height: 32px;
  }

  .euiFormControlLayout.euiFormControlLayout--group.controlFrame__formControlLayout {
    height: 32px;

    & .euiFormLabel.controlFrame__formControlLayoutLabel {
      padding: 8px !important;
    }

    .euiButtonEmpty.euiFilterButton {
      height: 32px;
    }
  }

  .euiText.errorEmbeddableCompact__button {
    padding: 8px;

    .euiLink {
      display: flex;
      gap: 8px;
    }
  }
`;t.default=({logsExplorerControllerStateService:e,data:t})=>{const{getInitialInput:r,setControlGroupAPI:u,query:a,filters:d,timeRange:v}=((e,t)=>{const{query:r,filters:o,fromDate:u,toDate:a}=(({data:e,timeRangeUpdatesType:t="search-session"})=>{const r=e.query.timefilter.timefilter,[o,u]=Object(n.useState)((()=>{const t=e.query.getState(),n=s(r);return{query:null==t?void 0:t.query,filters:null==t?void 0:t.filters,fromDate:n.fromDate,toDate:n.toDate,searchMode:c(null==t?void 0:t.query)}}));return Object(n.useEffect)((()=>{if("search-session"!==t)return;const n=e.search.session.state$.subscribe((e=>{const t=s(r);u((e=>({...e,fromDate:t.fromDate,toDate:t.toDate})))}));return()=>n.unsubscribe()}),[u,r,e.search.session.state$,t]),Object(n.useEffect)((()=>{if("timefilter"!==t)return;const e=r.getTimeUpdate$().subscribe((()=>{const e=s(r);u((t=>({...t,fromDate:e.fromDate,toDate:e.toDate})))}));return()=>e.unsubscribe()}),[u,r,t]),Object(n.useEffect)((()=>{const t=e.query.state$.subscribe((({state:e,changes:t})=>{(t.query||t.filters)&&u((t=>({...t,query:e.query,filters:e.filters,searchMode:c(e.query)})))}));return()=>t.unsubscribe()}),[u,e.query.state$]),o})({data:t}),f={from:u,to:a},p=Object(l.useSelector)(e,(e=>{if("controlPanels"in e.context)return e.context.controlPanels}));return{getInitialInput:Object(n.useCallback)((async e=>({initialInput:{...e,viewMode:i.ViewMode.VIEW,panels:null!=p?p:e.panels,filters:null!=o?o:[],query:r,timeRange:{from:u,to:a}}})),[p,o,u,r,a]),setControlGroupAPI:Object(n.useCallback)((t=>{e.send({type:"INITIALIZE_CONTROL_GROUP_API",controlGroupAPI:t})}),[e]),query:r,filters:o,timeRange:f}})(e,t);return Object(f.jsx)(p,{"data-test-subj":"dataSourceFiltersCustomization"},Object(f.jsx)(o.ControlGroupRenderer,{ref:u,getCreationOptions:r,query:a,filters:null!=d?d:[],timeRange:v}))}},53:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,u=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=u.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return i},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.isInterpreterStateEqual=t.isService=t.shallowEqual=t.getServiceSnapshot=t.partition=void 0;var u=r(52);function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.partition=function(e,t){var r,u,i=n([[],[]],2),a=i[0],s=i[1];try{for(var c=o(e),l=c.next();!l.done;l=c.next()){var f=l.value;t(f)?a.push(f):s.push(f)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(u=c.return)&&u.call(c)}finally{if(r)throw r.error}}return[a,s]},t.getServiceSnapshot=function(e){return 0!==e.status?e.getSnapshot():e.machine.initialState},t.shallowEqual=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0;o<r.length;o++)if(!Object.prototype.hasOwnProperty.call(t,r[o])||!i(e[r[o]],t[r[o]]))return!1;return!0},t.isService=function(e){return"state"in e&&"machine"in e},t.isInterpreterStateEqual=function(e,t,r){if(e.status===u.InterpreterStatus.NotStarted)return!0;var n=void 0===r.changed&&(Object.keys(r.children).length>0||"boolean"==typeof t.changed);return!(r.changed||n)}},54:function(e,t,r){e.exports=r(23)(1268)},55:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,u=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=u.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.useInterpret=t.useIdleInterpreter=void 0;var i=r(4),a=r(62),s=r(52),c=r(56);function l(e,t){var r=(0,c.default)((function(){return"function"==typeof e?e():e})),u=t.context,i=t.guards,l=t.actions,f=t.activities,p=t.services,d=t.delays,v=(t.state,o(t,["context","guards","actions","activities","services","delays","state"])),b=(0,c.default)((function(){var e={context:u,guards:i,actions:l,activities:f,services:p,delays:d},t=r.withConfig(e,(function(){return n(n({},r.context),u)}));return(0,s.interpret)(t,v)}));return(0,a.default)((function(){Object.assign(b.machine.options.actions,l),Object.assign(b.machine.options.guards,i),Object.assign(b.machine.options.activities,f),Object.assign(b.machine.options.services,p),Object.assign(b.machine.options.delays,d)}),[l,i,f,p,d]),b}t.useIdleInterpreter=l,t.useInterpret=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=u(t,2),o=n[0],a=void 0===o?{}:o,c=n[1],f=l(e,a);return(0,i.useEffect)((function(){if(c){var e=f.subscribe((0,s.toObserver)(c));return function(){e.unsubscribe()}}}),[c]),(0,i.useEffect)((function(){var e=a.state;return f.start(e?s.State.create(e):void 0),function(){f.stop(),f.status=s.InterpreterStatus.NotStarted}}),[]),f}},56:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4);t.default=function(e){var t=n.useRef();return t.current||(t.current={v:e()}),t.current.v}},57:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActor=t.isActorWithState=void 0;var n=r(4),o=r(62),u=r(56),i=r(54),a=r(53);function s(e){return e}function c(e){return"state"in e}function l(e){return"getSnapshot"in e?(0,a.isService)(e)?(0,a.getServiceSnapshot)(e):e.getSnapshot():c(e)?e.state:void 0}t.isActorWithState=c,t.useActor=function(e,t){void 0===t&&(t=l);var r=(0,n.useRef)(e),c=(0,n.useRef)([]),f=(0,n.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),p=(0,n.useCallback)((function(){return t(e)}),[e,t]),d=(0,n.useCallback)((function(t,r){return(0,a.isService)(e)?(0,a.isInterpreterStateEqual)(e,t,r):t===r}),[e]),v=(0,i.useSyncExternalStoreWithSelector)(f,p,p,s,d),b=(0,u.default)((function(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],o=r.current;(function(e){return"deferred"in e})(o)&&o.deferred?c.current.push(n):o.send(n)}}));return(0,o.default)((function(){for(r.current=e;c.current.length>0;){var t=c.current.shift();e.send(t)}}),[e]),[v,b]}},60:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActorContext=t.shallowEqual=t.useSpawn=t.useSelector=t.useInterpret=t.useActor=t.useMachine=void 0;var n=r(65);Object.defineProperty(t,"useMachine",{enumerable:!0,get:function(){return n.useMachine}});var o=r(57);Object.defineProperty(t,"useActor",{enumerable:!0,get:function(){return o.useActor}});var u=r(55);Object.defineProperty(t,"useInterpret",{enumerable:!0,get:function(){return u.useInterpret}});var i=r(63);Object.defineProperty(t,"useSelector",{enumerable:!0,get:function(){return i.useSelector}});var a=r(68);Object.defineProperty(t,"useSpawn",{enumerable:!0,get:function(){return a.useSpawn}});var s=r(53);Object.defineProperty(t,"shallowEqual",{enumerable:!0,get:function(){return s.shallowEqual}});var c=r(69);Object.defineProperty(t,"createActorContext",{enumerable:!0,get:function(){return c.createActorContext}})},62:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4).useLayoutEffect;t.default=n},63:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelector=void 0;var n=r(4),o=r(54),u=r(57),i=r(53),a=function(e,t){return e===t};t.useSelector=function(e,t,r,s){void 0===r&&(r=a);var c=(0,n.useRef)(null),l=(0,n.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),f=(0,n.useCallback)((function(){return s?s(e):function(e,t){if((0,i.isService)(e)){if(0===e.status&&t.current)return t.current;var r=(0,i.getServiceSnapshot)(e);return t.current=0===e.status?r:null,r}return(0,u.isActorWithState)(e)?e.state:void 0}(e,c)}),[e,s]);return(0,o.useSyncExternalStoreWithSelector)(l,f,f,t,r)}},65:function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,u=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=u.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.useMachine=void 0;var o=r(4),u=r(54),i=r(52),a=r(55),s=r(53);function c(e){return e}t.useMachine=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var l=n(t,1)[0],f=void 0===l?{}:l,p=(0,a.useIdleInterpreter)(e,f),d=(0,o.useCallback)((function(){return p.status===i.InterpreterStatus.NotStarted?f.state?i.State.create(f.state):p.machine.initialState:p.getSnapshot()}),[p]),v=(0,o.useCallback)((function(e,t){return(0,s.isInterpreterStateEqual)(p,e,t)}),[p]),b=(0,o.useCallback)((function(e){return p.subscribe(e).unsubscribe}),[p]),y=(0,u.useSyncExternalStoreWithSelector)(b,d,d,c,v);return(0,o.useEffect)((function(){var e=f.state;return p.start(e?i.State.create(e):void 0),function(){p.stop(),p.status=i.InterpreterStatus.NotStarted}}),[]),[y,p.send,p]}},68:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSpawn=void 0;var n=r(52),o=r(56);t.useSpawn=function(e){return(0,o.default)((function(){return(0,n.spawnBehavior)(e)}))}},69:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createActorContext=void 0;var o=r(4),u=r(55),i=r(57),a=r(63);t.createActorContext=function(e,t,r){var s=o.createContext(null),c=s.Provider;function l(i){var a=i.children,s=i.machine,l=void 0===s?e:s,f=i.options,p=(0,u.useInterpret)(l,n(n({},t),f),r);return o.createElement(c,{value:p},a)}function f(){var e=o.useContext(s);if(!e)throw new Error('You used a hook from "'.concat(l.displayName,"\" but it's not inside a <").concat(l.displayName,"> component."));return e}return l.displayName="ActorProvider(".concat(e.id,")"),{Provider:l,useActorRef:f,useActor:function(){var e=f();return(0,i.useActor)(e)},useSelector:function(e,t){var r=f();return(0,a.useSelector)(r,e,t)}}}}}]);