/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.logsExplorer_bundle_jsonpfunction=window.logsExplorer_bundle_jsonpfunction||[]).push([[5],{119:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tailRec=void 0,e.tailRec=function(t,e){for(var n=e(t);"Left"===n._tag;)n=e(n.left);return n.right}},120:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pipeable=e.pipe=void 0;var r=n(76);e.pipe=r.pipe,e.pipeable=function(t){var e={};return function(t){return"function"==typeof t.map}(t)&&(e.map=function(e){return function(n){return t.map(n,e)}}),function(t){return"function"==typeof t.contramap}(t)&&(e.contramap=function(e){return function(n){return t.contramap(n,e)}}),function(t){return"function"==typeof t.mapWithIndex}(t)&&(e.mapWithIndex=function(e){return function(n){return t.mapWithIndex(n,e)}}),function(t){return"function"==typeof t.ap}(t)&&(e.ap=function(e){return function(n){return t.ap(n,e)}},e.apFirst=function(e){return function(n){return t.ap(t.map(n,(function(t){return function(){return t}})),e)}},e.apSecond=function(e){return function(n){return t.ap(t.map(n,(function(){return function(t){return t}})),e)}}),function(t){return"function"==typeof t.chain}(t)&&(e.chain=function(e){return function(n){return t.chain(n,e)}},e.chainFirst=function(e){return function(n){return t.chain(n,(function(n){return t.map(e(n),(function(){return n}))}))}},e.flatten=function(e){return t.chain(e,r.identity)}),function(t){return"function"==typeof t.bimap}(t)&&(e.bimap=function(e,n){return function(r){return t.bimap(r,e,n)}},e.mapLeft=function(e){return function(n){return t.mapLeft(n,e)}}),function(t){return"function"==typeof t.extend}(t)&&(e.extend=function(e){return function(n){return t.extend(n,e)}},e.duplicate=function(e){return t.extend(e,r.identity)}),function(t){return"function"==typeof t.reduce}(t)&&(e.reduce=function(e,n){return function(r){return t.reduce(r,e,n)}},e.foldMap=function(e){var n=t.foldMap(e);return function(t){return function(e){return n(e,t)}}},e.reduceRight=function(e,n){return function(r){return t.reduceRight(r,e,n)}}),function(t){return"function"==typeof t.reduceWithIndex}(t)&&(e.reduceWithIndex=function(e,n){return function(r){return t.reduceWithIndex(r,e,n)}},e.foldMapWithIndex=function(e){var n=t.foldMapWithIndex(e);return function(t){return function(e){return n(e,t)}}},e.reduceRightWithIndex=function(e,n){return function(r){return t.reduceRightWithIndex(r,e,n)}}),function(t){return"function"==typeof t.alt}(t)&&(e.alt=function(e){return function(n){return t.alt(n,e)}}),function(t){return"function"==typeof t.compact}(t)&&(e.compact=t.compact,e.separate=t.separate),function(t){return"function"==typeof t.filter}(t)&&(e.filter=function(e){return function(n){return t.filter(n,e)}},e.filterMap=function(e){return function(n){return t.filterMap(n,e)}},e.partition=function(e){return function(n){return t.partition(n,e)}},e.partitionMap=function(e){return function(n){return t.partitionMap(n,e)}}),function(t){return"function"==typeof t.filterWithIndex}(t)&&(e.filterWithIndex=function(e){return function(n){return t.filterWithIndex(n,e)}},e.filterMapWithIndex=function(e){return function(n){return t.filterMapWithIndex(n,e)}},e.partitionWithIndex=function(e){return function(n){return t.partitionWithIndex(n,e)}},e.partitionMapWithIndex=function(e){return function(n){return t.partitionMapWithIndex(n,e)}}),function(t){return"function"==typeof t.promap}(t)&&(e.promap=function(e,n){return function(r){return t.promap(r,e,n)}}),function(t){return"function"==typeof t.compose}(t)&&(e.compose=function(e){return function(n){return t.compose(n,e)}}),function(t){return"function"==typeof t.throwError}(t)&&(e.fromOption=function(e){return function(n){return"None"===n._tag?t.throwError(e()):t.of(n.value)}},e.fromEither=function(e){return"Left"===e._tag?t.throwError(e.left):t.of(e.right)},e.fromPredicate=function(e,n){return function(r){return e(r)?t.of(r):t.throwError(n(r))}},e.filterOrElse=function(e,n){return function(r){return t.chain(r,(function(r){return e(r)?t.of(r):t.throwError(n(r))}))}}),e}},126:function(t,e,n){"use strict";n.r(e),n.d(e,"createLogsExplorerControllerFactory",(function(){return dt}));var r=n(52),i=n(11),a=n(37),o=n(84),c=n.n(o),u=n(40),s=n(85),l=n(76),f=n(120),d=n(0);const p=([t,...e])=>{if(void 0===t)return[];if(t.type instanceof d.IntersectionType){const[,...t]=e;return p(t)}if(t.type instanceof d.UnionType){const[,...n]=e;return[t.key,...p(n)]}return[t.key,...p(e)]},g=t=>new Error(t),h=(t,e=g)=>n=>Object(f.pipe)(t.decode(n),Object(s.fold)((t=>e=>{throw t((t=>`Failed to validate: \n${t.map((t=>`  ${(t=>{var e;return null!==(e=t.message)&&void 0!==e?e:`in ${p(t.context).join("/")}: ${JSON.stringify(t.value)} does not match expected type ${(({context:t})=>{var e,n,r;return null!==(e=null===(n=t[t.length-1])||void 0===n||null===(r=n.type)||void 0===r?void 0:r.name)&&void 0!==e?e:"unknown"})(t)}`})(t)}`)).join("\n")}`)(e))})(e),l.identity));var S=n(5);const E=u.EPM_API_ROUTES.DATA_STREAMS_PATTERN,v=u.EPM_API_ROUTES.INSTALLED_LIST_PATTERN,m=d.keyof({asc:null,desc:null});var I=n(15);const y=d.type({items:d.array(I.a)}),w=d.exact(d.partial({datasetQuery:d.string,type:d.literal("logs"),sortOrder:m,uncategorisedOnly:d.boolean})),A=new d.Type("JSON",d.any.is,((t,e)=>s.either.chain(d.string.validate(t,e),(n=>{try{return d.success(JSON.parse(n))}catch(n){return d.failure(t,e)}}))),(t=>JSON.stringify(t))),T=d.array(d.union([d.number,d.string])),R=d.exact(d.intersection([d.type({items:d.array(I.b),total:d.number}),d.partial({searchAfter:T})])),_=d.exact(d.partial({nameQuery:d.string,perPage:d.number,dataStreamType:d.literal("logs"),searchAfter:A.pipe(T),sortOrder:m}));class FindIntegrationsError extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype),this.name="FindIntegrationsError"}}class FindDatasetsError extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype),this.name="FindDatasetsError"}}const D={dataStreamType:"logs"},b={type:"logs",uncategorisedOnly:!0};class datasets_client_DatasetsClient{constructor(t){this.http=t}async findIntegrations(t={}){const e={...D,...t},n=_.encode(e),r=await this.http.get(v,{query:n,version:u.API_VERSIONS.public.v1}).catch((t=>{throw new FindIntegrationsError(`Failed to fetch integrations": ${t}`)})),i=h(R,(t=>new FindIntegrationsError(`Failed to decode integrations response: ${t}"`)))(r);return{...i,items:i.items.map(S.b.create)}}async findDatasets(t={}){const e={...b,...t},n=w.encode(e),r=await this.http.get(E,{query:n,version:u.API_VERSIONS.public.v1}).catch((t=>{throw new FindDatasetsError(`Failed to fetch data streams": ${t}`)}));return{items:h(y,(t=>new FindDatasetsError(`Failed to decode data streams response: ${t}"`)))(r).items.map((t=>S.a.create(t)))}}}class datasets_service_DatasetsService{constructor(){}setup(){}start({http:t}){return{client:new datasets_client_DatasetsClient(t)}}}var C=n(75),O=n(2),x=n(3);const V={dataSourceSelection:x.a.create(),grid:{columns:O.d,rows:{rowHeight:C.a.single,rowsPerPage:O.e}},chart:{breakdownField:O.j},filters:[],query:{language:"kuery",query:""},refreshInterval:{pause:!0,value:6e4},time:{mode:"relative",from:"now-15m/m",to:"now"},rows:[]};var L=n(72),P=n(8),F=n(14);const U=t=>()=>t.addWarning({title:F.i18n.translate("xpack.logsExplorer.dataSourceSelection.restoreDatasetSelectionFailedToastTitle",{defaultMessage:"We couldn't restore your datasets selection."}),text:F.i18n.translate("xpack.logsExplorer.dataSourceSelection.restoreDatasetSelectionFailedToastMessage",{defaultMessage:'We switched to "All log datasets" as the default selection.'})}),M=t=>()=>t.addWarning({title:F.i18n.translate("xpack.logsExplorer.dataSourceSelection.restoreDataViewSelectionFailedToastTitle",{defaultMessage:"We couldn't restore your data view selection."}),text:F.i18n.translate("xpack.logsExplorer.dataSourceSelection.restoreDataViewSelectionFailedToastMessage",{defaultMessage:'We switched to "All log datasets" as the default selection.'})}),N=t=>()=>t.addWarning({title:F.i18n.translate("xpack.logsExplorer.dataSourceSelection.createAdHocDataViewFailedToastTitle",{defaultMessage:"We couldn't create a data view for your selection."}),text:F.i18n.translate("xpack.logsExplorer.dataSourceSelection.createAdHocDataViewFailedToastMessage",{defaultMessage:'We switched to "All log datasets" as the default selection.'})});var W=n(25);const j=(t,e)=>{const n=t.internalState.getState().dataView,r=k(e)?e:q(n);return z(n,r)},k=t=>Object.keys(null!=t?t:{}).length>0&&W.ControlPanelRT.is(t),q=t=>(t=>W.availableControlPanelFields.filter((e=>void 0!==(null==t?void 0:t.fields.getByName(e)))))(t).reduce(((t,e)=>{const n=W.controlPanelConfigs[e];return{...t,[e]:n}}),{}),z=(t,e)=>{const n=q(t),r=Object.keys(n),a=Object(i.pick)(e,r);return((t,e="")=>Object(i.mapValues)(t,(t=>({...t,explicitInput:{...t.explicitInput,dataViewId:e}}))))({...n,...a},t.id)},$=({dataViews:t})=>async e=>{if(!("discoverStateContainer"in e))return;const{discoverStateContainer:n}=e,r=await t.get(e.dataSourceSelection.toDataviewSpec().id,!1);r.id&&await n.actions.onChangeDataView(r),n.actions.setDataView(r)};var G=n(7);const H=r.actions.assign(((t,e)=>{var n;return"appState"in e&&"RECEIVE_DISCOVER_APP_STATE"===e.type?{chart:{...t.chart,...Object(G.a)(e.appState)},grid:{columns:null!==(n=Object(G.g)(e.appState))&&void 0!==n?n:t.grid.columns,rows:{...t.grid.rows,...Object(G.h)(e.appState)}},...Object(G.i)(e.appState)}:{}})),J=r.actions.assign(((t,e)=>"dataState"in e&&"RECEIVE_DISCOVER_DATA_STATE"===e.type?{rows:e.dataState}:{})),Q=(t,e)=>{"discoverStateContainer"in t&&t.discoverStateContainer.appState.update(Object(G.b)(t))},Z=t=>(e,n)=>{if("UPDATE_DATA_SOURCE_SELECTION"===n.type&&Object(x.i)(n.data)&&null!=t&&t.onUknownDataViewSelection)return t.onUknownDataViewSelection({...e,dataSourceSelection:n.data})},B=({datasetsClient:t,dataViews:e,events:n,uiSettings:r})=>i=>async a=>{if(Object(x.i)(i.dataSourceSelection)){let t=i.dataSourceSelection;if(t.selection.dataView.isUnresolvedDataType())try{if(t=await X(t,{dataViews:e}),null===t)return a("DATAVIEW_SELECTION_RESTORE_FAILURE")}catch{return a("DATAVIEW_SELECTION_RESTORE_FAILURE")}return!t.selection.dataView.testAgainstAllowedList(r.get(L.a))&&null!=n&&n.onUknownDataViewSelection?n.onUknownDataViewSelection(i):a({type:"INITIALIZE_DATA_VIEW",data:t})}if(Object(x.k)(i.dataSourceSelection))try{const e=await K(i.dataSourceSelection,{datasetsClient:t});if(null!==e)return a({type:"INITIALIZE_DATASET",data:e})}catch{return a("DATASET_SELECTION_RESTORE_FAILURE")}return a("INITIALIZE_DATASET")},K=async(t,{datasetsClient:e})=>{var n;const r=null===(n=t.selection.dataset.parentIntegration)||void 0===n?void 0:n.name;if(r)return null;const{items:i}=await e.findIntegrations({nameQuery:r}),a=i[0];if(!a)return null;const o=a.datasets.find((t=>t.name===r));if(!o)return null;const c=S.a.create(o,a);return x.c.create(c)},X=async(t,{dataViews:e})=>{var n;const r=await e.get(t.toDataviewSpec().id);return r?x.b.fromSelection({dataView:{id:null!==(n=r.id)&&void 0!==n?n:"",kibanaSpaces:r.namespaces,name:r.name,title:r.getIndexPattern(),type:r.type}}):null},Y=t=>()=>{const{timefilter:{timefilter:e}}=t,n=e.getTimeUpdate$().pipe(Object(a.map)((()=>({type:"RECEIVE_TIMEFILTER_TIME",time:e.getTime()})))),r=e.getRefreshIntervalUpdate$().pipe(Object(a.map)((()=>({type:"RECEIVE_TIMEFILTER_REFRESH_INTERVAL",refreshInterval:e.getRefreshInterval()}))));return Object(a.merge)(n,r)},tt=r.actions.assign(((t,e)=>"RECEIVE_TIMEFILTER_TIME"===e.type&&"time"in e?{time:e.time}:"RECEIVE_TIMEFILTER_REFRESH_INTERVAL"===e.type&&"refreshInterval"in e?{refreshInterval:e.refreshInterval}:{})),et=t=>(e,n)=>{null!=e.time&&t.timefilter.timefilter.setTime(e.time),null!=e.refreshInterval&&t.timefilter.timefilter.setRefreshInterval(e.refreshInterval)},nt=t=>(e,n)=>{var r;"RECEIVE_DISCOVER_DATA_STATE"===n.type&&"dataState"in n&&void 0!==(null===(r=n.dataState)||void 0===r?void 0:r.length)&&n.dataState.length>0&&t.next({type:"LOGS_EXPLORER_DATA_RECEIVED",payload:{rowCount:n.dataState.length}})};var rt=n(48),it=n(41);const at=(t,e)=>new Proxy(t,{get(t,n,...r){const i=Reflect.get(t,n,...r);return ot(e,n)?e[n](i):i}}),ot=(t,e)=>t.hasOwnProperty(e);var ct=n(26),ut=n(49);const st=t=>{var e;return{mode:t.explicitInput.exclude?"exclude":"include",selection:t.explicitInput.existsSelected?{type:"exists"}:{type:"options",selectedOptions:null!==(e=t.explicitInput.selectedOptions)&&void 0!==e?e:[]}}},lt=t=>{if(null==t)return{};const e=t[W.availableControlsPanels.NAMESPACE];return{...e?{[W.availableControlsPanels.NAMESPACE]:ft(W.availableControlsPanels.NAMESPACE,e)}:{}}},ft=(t,e)=>{const n=W.controlPanelConfigs[t];return{...n,explicitInput:{...n.explicitInput,exclude:"exclude"===e.mode,..."exists"===e.selection.type?{existsSelected:!0}:{selectedOptions:e.selection.selectedOptions}}}},dt=({core:t,plugins:e})=>async({customizations:n={},initialState:o})=>{const{data:u,dataViews:s}=e,l=(new datasets_service_DatasetsService).start({http:t.http}).client,f=Object(ut.createMemoryHistory)({initialEntries:[{search:"?_a=()"}]}),d=(p=f,Object(it.createKbnUrlStateStorage)({history:p,useHash:!1,useHashQuery:!1}));var p;const g=(t=>{const e={[ct.a]:!0,[ct.b]:!1};return at(t,{get:()=>(n,...r)=>n in e?e[n]:t.get(n,...r)})})(t.uiSettings),h=(({data:t,http:e,uiSettings:n})=>{const r=()=>{},i=at(t.search.session,{enableStorage:()=>r}),a=at(t.search,{session:()=>i}),o=new it.Storage(localStorage),c=new rt.QueryService;c.setup({nowProvider:new rt.NowProvider,storage:o,uiSettings:n});const u=c.start({http:e,storage:o,uiSettings:n});return at(t,{query:()=>u,search:()=>a})})({data:u,http:t.http,uiSettings:g}),S={data:h,history:f,uiSettings:g,filterManager:h.query.filterManager,timefilter:h.query.timefilter.timefilter,urlStateStorage:d},E=(v=null!=o?o:{},{...V,chart:{...V.chart,...v.chart},controlPanels:lt(v.controls),dataSourceSelection:null!=v.dataSourceSelection?Object(W.hydrateDataSourceSelection)(v.dataSourceSelection):V.dataSourceSelection,grid:{...V.grid,...v.grid,rows:{...V.grid.rows,...null===(m=v.grid)||void 0===m?void 0:m.rows}},filters:null!==(I=v.filters)&&void 0!==I?I:V.filters,query:null!==(y=v.query)&&void 0!==y?y:V.query,refreshInterval:null!==(w=v.refreshInterval)&&void 0!==w?w:V.refreshInterval,time:null!==(A=v.time)&&void 0!==A?A:V.time});var v,m,I,y,w,A;const T=new a.Subject,R=(({datasetsClient:t,dataViews:e,events:n,initialContext:a=V,query:o,toasts:u,uiSettings:s,publicEvents$:l})=>(t=>Object(r.createMachine)({context:t,predictableActionArguments:!0,id:"LogsExplorerController",initial:"uninitialized",states:{uninitialized:{on:{RECEIVED_STATE_CONTAINER:{target:"initializingSelection",actions:["storeDiscoverStateContainer"]}}},initializingSelection:{invoke:{src:"initializeSelection"},on:{INITIALIZE_DATA_VIEW:{target:"initializingDataView",actions:["storeDataSourceSelection"]},INITIALIZE_DATASET:{target:"initializingDataset",actions:["storeDataSourceSelection"]},DATASET_SELECTION_RESTORE_FAILURE:{target:"initializingDataset",actions:["storeDefaultSelection","notifyDatasetSelectionRestoreFailed"]},DATAVIEW_SELECTION_RESTORE_FAILURE:{target:"initializingDataset",actions:["storeDefaultSelection","notifyDataViewSelectionRestoreFailed"]}}},initializingDataView:{invoke:{src:"changeDataView",onDone:{target:"initializingControlPanels",actions:["updateDiscoverAppStateFromContext","updateTimefilterFromContext"]},onError:{target:"initializingDataset",actions:["storeDefaultSelection","notifyCreateDataViewFailed","updateDiscoverAppStateFromContext","updateTimefilterFromContext"]}}},initializingDataset:{invoke:{src:"createAdHocDataView",onDone:{target:"initializingControlPanels",actions:["updateDiscoverAppStateFromContext","updateTimefilterFromContext"]},onError:{target:"initialized",actions:["notifyCreateDataViewFailed","updateDiscoverAppStateFromContext","updateTimefilterFromContext"]}}},initializingControlPanels:{invoke:{src:"initializeControlPanels",onDone:{target:"initialized",actions:["storeControlPanels"]},onError:{target:"initialized"}}},initialized:{type:"parallel",invoke:[{src:"discoverStateService",id:"discoverStateService"},{src:"timefilterService",id:"timefilterService"}],entry:["resetRows"],states:{dataSourceSelection:{initial:"idle",states:{idle:{on:{UPDATE_DATA_SOURCE_SELECTION:[{cond:"isDataViewNotAllowed",actions:["redirectToDiscover"]},{cond:"isDataViewAllowed",target:"changingDataView",actions:["storeDataSourceSelection"]},{target:"creatingAdHocDataView",actions:["storeDataSourceSelection"]}]}},changingDataView:{invoke:{src:"changeDataView",onDone:{target:"idle",actions:["notifyDataViewUpdate"]},onError:{target:"idle",actions:["notifyCreateDataViewFailed"]}}},creatingAdHocDataView:{invoke:{src:"createAdHocDataView",onDone:{target:"idle",actions:["notifyDataViewUpdate"]},onError:{target:"idle",actions:["notifyCreateDataViewFailed"]}}}}},controlGroups:{initial:"uninitialized",states:{uninitialized:{on:{INITIALIZE_CONTROL_GROUP_API:{target:"idle",cond:"controlGroupAPIExists",actions:["storeControlGroupAPI"]}}},idle:{invoke:{src:"subscribeControlGroup"},on:{DATA_VIEW_UPDATED:{target:"updatingControlPanels"},UPDATE_CONTROL_PANELS:{target:"updatingControlPanels"}}},updatingControlPanels:{invoke:{src:"updateControlPanels",onDone:{target:"idle",actions:["storeControlPanels"]},onError:{target:"idle"}}}}}},on:{RECEIVE_DISCOVER_APP_STATE:{actions:["updateContextFromDiscoverAppState"]},RECEIVE_DISCOVER_DATA_STATE:{actions:["updateContextFromDiscoverDataState","emitDataReceived"]},RECEIVE_QUERY_STATE:{actions:["updateQueryStateFromQueryServiceState"]},RECEIVE_TIMEFILTER_TIME:{actions:["updateContextFromTimefilter"]},RECEIVE_TIMEFILTER_REFRESH_INTERVAL:{actions:["updateContextFromTimefilter"]}}}}},{actions:{storeDefaultSelection:r.actions.assign((t=>({dataSourceSelection:x.a.create()}))),storeDataSourceSelection:r.actions.assign(((t,e)=>"data"in e&&Object(x.h)(e.data)?{dataSourceSelection:e.data}:{})),storeDiscoverStateContainer:r.actions.assign(((t,e)=>"discoverStateContainer"in e?{discoverStateContainer:e.discoverStateContainer}:{})),storeControlGroupAPI:r.actions.assign(((t,e)=>"controlGroupAPI"in e?{controlGroupAPI:e.controlGroupAPI}:{})),storeControlPanels:r.actions.assign(((t,e)=>"data"in e&&P.a.is(e.data)?{controlPanels:e.data}:{})),resetRows:r.actions.assign(((t,e)=>({rows:[]}))),notifyDataViewUpdate:Object(r.raise)("DATA_VIEW_UPDATED"),updateContextFromDiscoverAppState:H,updateContextFromDiscoverDataState:J,updateDiscoverAppStateFromContext:Q,updateContextFromTimefilter:tt},guards:{controlGroupAPIExists:(t,e)=>"controlGroupAPI"in e&&null!=e.controlGroupAPI,isDataViewAllowed:(t,e)=>!("UPDATE_DATA_SOURCE_SELECTION"!==e.type||!Object(x.i)(e.data))&&e.data.selection.dataView.isLogsDataType(),isDataViewNotAllowed:(t,e)=>!("UPDATE_DATA_SOURCE_SELECTION"!==e.type||!Object(x.i)(e.data))&&e.data.selection.dataView.isUnknownDataType()}}))(a).withConfig({actions:{notifyCreateDataViewFailed:N(u),notifyDatasetSelectionRestoreFailed:U(u),notifyDataViewSelectionRestoreFailed:M(u),redirectToDiscover:Z(n),updateTimefilterFromContext:et(o),emitDataReceived:nt(l)},services:{changeDataView:$({dataViews:e}),createAdHocDataView:async t=>{if(!("discoverStateContainer"in t))return;const{discoverStateContainer:e}=t,n=await e.actions.createAndAppendAdHocDataView(t.dataSourceSelection.toDataviewSpec());e.actions.setDataView(n)},initializeControlPanels:async t=>{if("discoverStateContainer"in t)return t.controlPanels?j(t.discoverStateContainer,t.controlPanels):void 0},initializeSelection:B({datasetsClient:t,dataViews:e,events:n,uiSettings:s}),subscribeControlGroup:t=>e=>{if(!("controlGroupAPI"in t))return;if(!("discoverStateContainer"in t))return;const{discoverStateContainer:n}=t,r=t.controlGroupAPI.onFiltersPublished$.subscribe((t=>{n.internalState.transitions.setCustomFilters(t),n.actions.fetchData()})),i=t.controlGroupAPI.getInput$().subscribe((({panels:n})=>{c()(n,t.controlPanels)||e({type:"UPDATE_CONTROL_PANELS",controlPanels:n})}));return()=>{r.unsubscribe(),i.unsubscribe()}},updateControlPanels:async(t,e)=>{if(!("controlGroupAPI"in t))return;if(!("discoverStateContainer"in t))return;const{discoverStateContainer:n}=t,r="controlPanels"in e&&e.controlPanels||t.controlPanels;if(!r)return;const i=j(n,r);return t.controlGroupAPI.updateInput({panels:i}),i},discoverStateService:t=>(e,n)=>{if(!("discoverStateContainer"in t))throw new Error("Failed to subscribe to the Discover state: no state container in context.");const{appState:r,dataState:a}=t.discoverStateContainer,o=r.state$.subscribe({next:t=>{Object(i.isEmpty)(t)||e({type:"RECEIVE_DISCOVER_APP_STATE",appState:t})}}),c=a.data$.documents$.subscribe({next:t=>{Object(i.isEmpty)(null==t?void 0:t.result)||e({type:"RECEIVE_DISCOVER_DATA_STATE",dataState:t.result})}});return()=>{o.unsubscribe(),c.unsubscribe()}},timefilterService:Y(o)},guards:{isDataViewAllowed:(t,e)=>!("UPDATE_DATA_SOURCE_SELECTION"!==e.type||!Object(x.i)(e.data))&&e.data.selection.dataView.testAgainstAllowedList(s.get(L.a)),isDataViewNotAllowed:(t,e)=>!("UPDATE_DATA_SOURCE_SELECTION"!==e.type||!Object(x.i)(e.data)||e.data.selection.dataView.testAgainstAllowedList(s.get(L.a)))}}))({datasetsClient:l,dataViews:s,events:n.events,initialContext:E,query:S.data.query,toasts:t.notifications.toasts,uiSettings:g,publicEvents$:T}),_=Object(r.interpret)(R,{devTools:!1});return{actions:{},customizations:n,datasetsClient:l,discoverServices:S,event$:T,service:_,state$:Object(a.from)(_).pipe(Object(a.map)((({context:t})=>(t=>{return{chart:t.chart,dataSourceSelection:t.dataSourceSelection.toPlainSelection(),grid:t.grid,filters:t.filters,query:t.query,refreshInterval:t.refreshInterval,time:t.time,controls:(e=t.controlPanels,null!=e?{...W.availableControlsPanels.NAMESPACE in e?{[W.availableControlsPanels.NAMESPACE]:st(e[W.availableControlsPanels.NAMESPACE])}:{}}:{})};var e})(t))),Object(a.distinctUntilChanged)(c.a),Object(a.shareReplay)(1)),stateMachine:R}}},26:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));const r="hideAnnouncements",i="discover:modifyColumnsOnSwitch"},72:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r="observability:logsExplorer:allowedDataViews"},75:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a}));const r={auto:-1,single:0,default:3},i=212,a="kibana-json"},76:function(t,e,n){"use strict";function r(t){return t}function i(t){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(e,"__esModule",{value:!0}),e.bindTo_=e.bind_=e.hole=e.pipe=e.untupled=e.tupled=e.absurd=e.decrement=e.increment=e.tuple=e.flow=e.flip=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.constant=e.not=e.unsafeCoerce=e.identity=void 0,e.identity=r,e.unsafeCoerce=r,e.not=function(t){return function(e){return!t(e)}},e.constant=function(t){return function(){return t}},e.constTrue=function(){return!0},e.constFalse=function(){return!1},e.constNull=function(){return null},e.constUndefined=function(){},e.constVoid=function(){},e.flip=function(t){return function(e,n){return t(n,e)}},e.flow=function(t,e,n,r,i,a,o,c,u){switch(arguments.length){case 1:return t;case 2:return function(){return e(t.apply(this,arguments))};case 3:return function(){return n(e(t.apply(this,arguments)))};case 4:return function(){return r(n(e(t.apply(this,arguments))))};case 5:return function(){return i(r(n(e(t.apply(this,arguments)))))};case 6:return function(){return a(i(r(n(e(t.apply(this,arguments))))))};case 7:return function(){return o(a(i(r(n(e(t.apply(this,arguments)))))))};case 8:return function(){return c(o(a(i(r(n(e(t.apply(this,arguments))))))))};case 9:return function(){return u(c(o(a(i(r(n(e(t.apply(this,arguments)))))))))}}},e.tuple=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t},e.increment=function(t){return t+1},e.decrement=function(t){return t-1},e.absurd=i,e.tupled=function(t){return function(e){return t.apply(void 0,e)}},e.untupled=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(e)}},e.pipe=function(t,e,n,r,i,a,o,c,u,s,l,f,d,p,g,h,S,E,v,m){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return n(e(t));case 4:return r(n(e(t)));case 5:return i(r(n(e(t))));case 6:return a(i(r(n(e(t)))));case 7:return o(a(i(r(n(e(t))))));case 8:return c(o(a(i(r(n(e(t)))))));case 9:return u(c(o(a(i(r(n(e(t))))))));case 10:return s(u(c(o(a(i(r(n(e(t)))))))));case 11:return l(s(u(c(o(a(i(r(n(e(t))))))))));case 12:return f(l(s(u(c(o(a(i(r(n(e(t)))))))))));case 13:return d(f(l(s(u(c(o(a(i(r(n(e(t))))))))))));case 14:return p(d(f(l(s(u(c(o(a(i(r(n(e(t)))))))))))));case 15:return g(p(d(f(l(s(u(c(o(a(i(r(n(e(t))))))))))))));case 16:return h(g(p(d(f(l(s(u(c(o(a(i(r(n(e(t)))))))))))))));case 17:return S(h(g(p(d(f(l(s(u(c(o(a(i(r(n(e(t))))))))))))))));case 18:return E(S(h(g(p(d(f(l(s(u(c(o(a(i(r(n(e(t)))))))))))))))));case 19:return v(E(S(h(g(p(d(f(l(s(u(c(o(a(i(r(n(e(t))))))))))))))))));case 20:return m(v(E(S(h(g(p(d(f(l(s(u(c(o(a(i(r(n(e(t)))))))))))))))))))}},e.hole=i,e.bind_=function(t,e,n){var r;return Object.assign({},t,((r={})[e]=n,r))},e.bindTo_=function(t){return function(e){var n;return(n={})[t]=e,n}}},84:function(t,e,n){"use strict";t.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var r,i,a;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(i=r;0!=i--;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(a=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,a[i]))return!1;for(i=r;0!=i--;){var o=a[i];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n}},85:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.apS=e.apSW=e.bind=e.bindW=e.bindTo=e.exists=e.elem=e.toError=e.either=e.getValidationMonoid=e.MonadThrow=e.ChainRec=e.Extend=e.Alt=e.Bifunctor=e.Traversable=e.Foldable=e.Monad=e.Applicative=e.Functor=e.getValidationSemigroup=e.getValidation=e.getAltValidation=e.getApplicativeValidation=e.getWitherable=e.getFilterable=e.getApplyMonoid=e.getApplySemigroup=e.getSemigroup=e.getEq=e.getShow=e.URI=e.throwError=e.sequence=e.traverse=e.reduceRight=e.foldMap=e.reduce=e.duplicate=e.extend=e.alt=e.flatten=e.chainFirst=e.chainFirstW=e.chain=e.chainW=e.of=e.apSecond=e.apFirst=e.ap=e.apW=e.mapLeft=e.bimap=e.map=e.filterOrElse=e.orElse=e.swap=e.getOrElse=e.getOrElseW=e.fold=e.fromPredicate=e.fromOption=e.stringifyJSON=e.parseJSON=e.tryCatch=e.fromNullable=e.right=e.left=e.isRight=e.isLeft=void 0;var r=n(119),i=n(76);function a(t,n){try{return e.right(t())}catch(t){return e.left(n(t))}}e.isLeft=function(t){return"Left"===t._tag},e.isRight=function(t){return"Right"===t._tag},e.left=function(t){return{_tag:"Left",left:t}},e.right=function(t){return{_tag:"Right",right:t}},e.fromNullable=function(t){return function(n){return null==n?e.left(t):e.right(n)}},e.tryCatch=a,e.parseJSON=function(t,e){return a((function(){return JSON.parse(t)}),e)},e.stringifyJSON=function(t,e){return a((function(){return JSON.stringify(t)}),e)},e.fromOption=function(t){return function(n){return"None"===n._tag?e.left(t()):e.right(n.value)}},e.fromPredicate=function(t,n){return function(r){return t(r)?e.right(r):e.left(n(r))}},e.fold=function(t,n){return function(r){return e.isLeft(r)?t(r.left):n(r.right)}},e.getOrElseW=function(t){return function(n){return e.isLeft(n)?t(n.left):n.right}},e.getOrElse=e.getOrElseW,e.swap=function(t){return e.isLeft(t)?e.right(t.left):e.left(t.right)},e.orElse=function(t){return function(n){return e.isLeft(n)?t(n.left):n}},e.filterOrElse=function(t,n){return e.chain((function(r){return t(r)?e.right(r):e.left(n(r))}))};var o=function(t,n){return i.pipe(t,e.map(n))},c=function(t,n){return i.pipe(t,e.ap(n))},u=function(t,n){return i.pipe(t,e.chain(n))},s=function(t,n,r){return i.pipe(t,e.reduce(n,r))},l=function(t){return function(n,r){var a=e.foldMap(t);return i.pipe(n,a(r))}},f=function(t,n,r){return i.pipe(t,e.reduceRight(n,r))},d=function(t){var n=e.traverse(t);return function(t,e){return i.pipe(t,n(e))}},p=function(t,n,r){return i.pipe(t,e.bimap(n,r))},g=function(t,n){return i.pipe(t,e.mapLeft(n))},h=function(t,n){return i.pipe(t,e.alt(n))},S=function(t,n){return i.pipe(t,e.extend(n))},E=function(t,n){return r.tailRec(n(t),(function(t){return e.isLeft(t)?e.right(e.left(t.left)):e.isLeft(t.right)?e.left(n(t.right.left)):e.right(e.right(t.right.right))}))};function v(t){return{concat:function(n,r){return e.isLeft(n)?n:e.isLeft(r)?r:e.right(t.concat(n.right,r.right))}}}function m(t){var n=e.left(t.empty);return{URI:e.URI,_E:void 0,map:o,compact:function(t){return e.isLeft(t)?t:"None"===t.right._tag?n:e.right(t.right.value)},separate:function(t){return e.isLeft(t)?{left:t,right:t}:e.isLeft(t.right)?{left:e.right(t.right.left),right:n}:{left:n,right:e.right(t.right.right)}},filter:function(t,r){return e.isLeft(t)||r(t.right)?t:n},filterMap:function(t,r){if(e.isLeft(t))return t;var i=r(t.right);return"None"===i._tag?n:e.right(i.value)},partition:function(t,r){return e.isLeft(t)?{left:t,right:t}:r(t.right)?{left:n,right:e.right(t.right)}:{left:e.right(t.right),right:n}},partitionMap:function(t,r){if(e.isLeft(t))return{left:t,right:t};var i=r(t.right);return e.isLeft(i)?{left:e.right(i.left),right:n}:{left:n,right:e.right(i.right)}}}}function I(t){return{URI:e.URI,_E:void 0,map:o,ap:function(n,r){return e.isLeft(n)?e.isLeft(r)?e.left(t.concat(n.left,r.left)):n:e.isLeft(r)?r:e.right(n.right(r.right))},of:e.of}}function y(t){return{URI:e.URI,_E:void 0,map:o,alt:function(n,r){if(e.isRight(n))return n;var i=r();return e.isLeft(i)?e.left(t.concat(n.left,i.left)):i}}}function w(t,n){return{concat:function(r,i){return e.isLeft(r)?e.isLeft(i)?e.left(t.concat(r.left,i.left)):r:e.isLeft(i)?i:e.right(n.concat(r.right,i.right))}}}e.map=function(t){return function(n){return e.isLeft(n)?n:e.right(t(n.right))}},e.bimap=function(t,n){return function(r){return e.isLeft(r)?e.left(t(r.left)):e.right(n(r.right))}},e.mapLeft=function(t){return function(n){return e.isLeft(n)?e.left(t(n.left)):n}},e.apW=function(t){return function(n){return e.isLeft(n)?n:e.isLeft(t)?t:e.right(n.right(t.right))}},e.ap=e.apW,e.apFirst=function(t){return i.flow(e.map((function(t){return function(){return t}})),e.ap(t))},e.apSecond=function(t){return i.flow(e.map((function(){return function(t){return t}})),e.ap(t))},e.of=e.right,e.chainW=function(t){return function(n){return e.isLeft(n)?n:t(n.right)}},e.chain=e.chainW,e.chainFirstW=function(t){return function(n){return i.pipe(n,e.chainW((function(n){return i.pipe(t(n),e.map((function(){return n})))})))}},e.chainFirst=e.chainFirstW,e.flatten=e.chain(i.identity),e.alt=function(t){return function(n){return e.isLeft(n)?t():n}},e.extend=function(t){return function(n){return e.isLeft(n)?n:e.right(t(n))}},e.duplicate=e.extend(i.identity),e.reduce=function(t,n){return function(r){return e.isLeft(r)?t:n(t,r.right)}},e.foldMap=function(t){return function(n){return function(r){return e.isLeft(r)?t.empty:n(r.right)}}},e.reduceRight=function(t,n){return function(r){return e.isLeft(r)?t:n(r.right,t)}},e.traverse=function(t){return function(n){return function(r){return e.isLeft(r)?t.of(e.left(r.left)):t.map(n(r.right),e.right)}}},e.sequence=function(t){return function(n){return e.isLeft(n)?t.of(e.left(n.left)):t.map(n.right,e.right)}},e.throwError=e.left,e.URI="Either",e.getShow=function(t,n){return{show:function(r){return e.isLeft(r)?"left("+t.show(r.left)+")":"right("+n.show(r.right)+")"}}},e.getEq=function(t,n){return{equals:function(r,i){return r===i||(e.isLeft(r)?e.isLeft(i)&&t.equals(r.left,i.left):e.isRight(i)&&n.equals(r.right,i.right))}}},e.getSemigroup=function(t){return{concat:function(n,r){return e.isLeft(r)?n:e.isLeft(n)?r:e.right(t.concat(n.right,r.right))}}},e.getApplySemigroup=v,e.getApplyMonoid=function(t){return{concat:v(t).concat,empty:e.right(t.empty)}},e.getFilterable=m,e.getWitherable=function(t){var n=m(t);return{URI:e.URI,_E:void 0,map:o,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:d,sequence:e.sequence,reduce:s,foldMap:l,reduceRight:f,wither:function(t){var e=d(t);return function(r,i){return t.map(e(r,i),n.compact)}},wilt:function(t){var e=d(t);return function(r,i){return t.map(e(r,i),n.separate)}}}},e.getApplicativeValidation=I,e.getAltValidation=y,e.getValidation=function(t){var n=I(t),r=y(t);return{URI:e.URI,_E:void 0,map:o,of:e.of,chain:u,bimap:p,mapLeft:g,reduce:s,foldMap:l,reduceRight:f,extend:S,traverse:d,sequence:e.sequence,chainRec:E,throwError:e.throwError,ap:n.ap,alt:r.alt}},e.getValidationSemigroup=w,e.Functor={URI:e.URI,map:o},e.Applicative={URI:e.URI,map:o,ap:c,of:e.of},e.Monad={URI:e.URI,map:o,ap:c,of:e.of,chain:u},e.Foldable={URI:e.URI,reduce:s,foldMap:l,reduceRight:f},e.Traversable={URI:e.URI,map:o,reduce:s,foldMap:l,reduceRight:f,traverse:d,sequence:e.sequence},e.Bifunctor={URI:e.URI,bimap:p,mapLeft:g},e.Alt={URI:e.URI,map:o,alt:h},e.Extend={URI:e.URI,map:o,extend:S},e.ChainRec={URI:e.URI,map:o,ap:c,chain:u,chainRec:E},e.MonadThrow={URI:e.URI,map:o,ap:c,of:e.of,chain:u,throwError:e.throwError},e.getValidationMonoid=function(t,n){return{concat:w(t,n).concat,empty:e.right(n.empty)}},e.either={URI:e.URI,map:o,of:e.of,ap:c,chain:u,reduce:s,foldMap:l,reduceRight:f,traverse:d,sequence:e.sequence,bimap:p,mapLeft:g,alt:h,extend:S,chainRec:E,throwError:e.throwError},e.toError=function(t){return t instanceof Error?t:new Error(String(t))},e.elem=function(t){return function(n,r){return!e.isLeft(r)&&t.equals(n,r.right)}},e.exists=function(t){return function(n){return!e.isLeft(n)&&t(n.right)}},e.bindTo=function(t){return e.map(i.bindTo_(t))},e.bindW=function(t,n){return e.chainW((function(r){return i.pipe(n(r),e.map((function(e){return i.bind_(r,t,e)})))}))},e.bind=e.bindW,e.apSW=function(t,n){return i.flow(e.map((function(e){return function(n){return i.bind_(e,t,n)}})),e.apW(n))},e.apS=e.apSW}}]);