/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.enterpriseSearch_bundle_jsonpfunction=window.enterpriseSearch_bundle_jsonpfunction||[]).push([[15],{1025:function(e,t,a){"use strict";a.r(t),a.d(t,"Analytics",(function(){return wt}));var s=a(17),n=a.n(s),i=a(1021),l=a(1016),c=a(67),r=a(70),o=a(21),u=a(44),d=a(19),p=a(2);const m="/collections/:name",b=`${m}/overview`,g=`${m}/integrate`,j=`${m}/explorer`;var h=a(55),y=a(56),x=a(50),O=a(48),f=a(51),S=a(45);const v=Object(f.a)(["analytics","add_analytics_collections_api_logic"],(async({name:e})=>{const{http:t}=S.a.values;return await t.post("/internal/enterprise_search/analytics/collections",{body:JSON.stringify({name:e})})}),{showErrorFlash:!1}),k=new RegExp(/^[a-z0-9\-]+$/),T=Object(u.kea)({actions:{createAnalyticsCollection:()=>{},setInputError:e=>({inputError:e}),setNameValue:e=>({name:e})},connect:{actions:[v,["apiError","apiSuccess","makeRequest"]],values:[v,["status","error"]]},listeners:({values:e,actions:t})=>({apiError:async a=>{var s,n;e.isSystemError?null!=a&&null!==(s=a.body)&&void 0!==s&&s.message?x.b.actions.setFlashMessages([{description:a.body.message,message:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.action.systemErrorMessage",{defaultMessage:"Sorry, there was an error creating your collection."}),type:"error"}]):Object(x.d)(a):t.setInputError((null==a||null===(n=a.body)||void 0===n?void 0:n.message)||null)},apiSuccess:async({name:e})=>{Object(x.f)(p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.action.successMessage",{defaultMessage:"Successfully added collection ''{name}''",values:{name:e}})),O.a.values.navigateToUrl(Object(y.a)(b,{name:e}))},createAnalyticsCollection:()=>{const{name:a}=e;t.makeRequest({name:a})},setNameValue:({name:e})=>{k.test(e)||t.setInputError(p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.invalidName",{defaultMessage:"Collection name can only contain lowercase letters, numbers, and hyphens"}))}}),path:["enterprise_search","analytics","add_analytics_collection"],reducers:{inputError:[null,{setInputError:(e,{inputError:t})=>t,setNameValue:()=>null}],name:["",{setNameValue:(e,{name:t})=>t}]},selectors:({selectors:e})=>({canSubmit:[()=>[e.isLoading,e.name,e.inputError],(e,t,a)=>!e&&t.length>0&&!a],isLoading:[()=>[e.status],e=>e===h.a.LOADING],isSuccess:[()=>[e.status],e=>e===h.a.SUCCESS],isSystemError:[()=>[e.status,e.error],(e,t)=>{var a;return Boolean(e===h.a.ERROR&&((null==t||null===(a=t.body)||void 0===a?void 0:a.statusCode)||0)>=500)}]})});var C=a(18);const E=({formId:e,collectionNameField:t})=>{const{createAnalyticsCollection:a,setNameValue:s}=Object(u.useActions)(T),{name:n,isLoading:i,canSubmit:l,inputError:c}=Object(u.useValues)(T);return Object(C.jsx)(d.EuiForm,{id:e,component:"form",onSubmit:e=>{e.preventDefault(),l&&a()}},Object(C.jsx)(d.EuiFormRow,{label:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.form.label",{defaultMessage:"Collection name"}),isInvalid:!!c,error:c},Object(C.jsx)(d.EuiFieldText,{name:t,fullWidth:!0,autoFocus:!0,value:n,isLoading:i,isInvalid:!!c,onChange:e=>{s(e.target.value)}})))},w="collection-name",M=({onClose:e})=>{const{isLoading:t,isSuccess:a,isSystemError:n,canSubmit:i}=Object(u.useValues)(T),l=Object(d.useGeneratedHtmlId)({prefix:"createAnalyticsCollection"});return Object(s.useEffect)((()=>{(a||n)&&e()}),[a,n]),Object(C.jsx)(d.EuiModal,{onClose:e,maxWidth:400,initialFocus:`[name=${w}]`},Object(C.jsx)(d.EuiModalHeader,null,Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiModalHeaderTitle,null,p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.form.title",{defaultMessage:"Name your Collection"})),Object(C.jsx)(d.EuiSpacer,{size:"s"}),Object(C.jsx)(d.EuiText,{size:"s",color:"subdued"},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.form.subtitle",{defaultMessage:"Consider carefully what you want to name your Collection. You can't rename it later."}))))),Object(C.jsx)(d.EuiModalBody,null,Object(C.jsx)(E,{formId:l,collectionNameField:w})),Object(C.jsx)(d.EuiModalFooter,null,Object(C.jsx)(d.EuiButtonEmpty,{onClick:e},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.form.cancelButton",{defaultMessage:"Cancel"})),Object(C.jsx)(d.EuiButton,{fill:!0,type:"submit",form:l,iconType:"plusInCircle",isLoading:t,isDisabled:!i},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsCreate.form.createButton",{defaultMessage:"Create"}))))},V=({render:e,disabled:t})=>{const[a,i]=Object(s.useState)(!1),l=()=>i(!0);return Object(C.jsx)(n.a.Fragment,null,e?e(l):Object(C.jsx)(d.EuiButton,{fill:!0,iconType:"plusInCircle",onClick:l,disabled:t,"data-test-subj":"create-analytics-collection-btn"},p.i18n.translate("xpack.enterpriseSearch.analytics.collections.create.buttonTitle",{defaultMessage:"Create collection"})),a&&Object(C.jsx)(M,{onClose:()=>i(!1)}))};var I=a(54),A=a.n(I),R=a(95),F=a.n(R),_=a(1),L=a(64),N=a(61),z=a(156),B=a(58);const P=({children:e,analyticsName:t,pageChrome:a,pageViewTelemetry:n,...i})=>{const{updateSideNavDefinition:l,getChromeStyle$:c}=Object(u.useValues)(O.a),r=F()(c(),"classic"),o=Object(z.a)(t,t?{explorer:Object(y.a)(j,{name:t}),integration:Object(y.a)(g,{name:t}),overview:Object(y.a)(b,{name:t})}:void 0,!0),d=Object(s.useCallback)((e=>{if(!e)return;const t=e.find((e=>"build"===e.id));if(!t||!t.items)return;const a=t.items.find((e=>"analyticsCollections"===e.id));return null==a?void 0:a.items}),[]);return Object(s.useEffect)((()=>{l({collections:d(o)})}),[o,l]),Object(s.useEffect)((()=>()=>{l({collections:void 0})}),[l]),Object(C.jsx)(N.a,A()({},i,{solutionNav:{items:"classic"===r?o:void 0,name:_.D},setPageChrome:a&&Object(C.jsx)(L.b,{trail:a})}),n&&Object(C.jsx)(B.b,{action:"viewed",metric:n}),e)};var q=a(82);const D=async e=>{if(!q.a.values.data)return null;return(await q.a.values.data.dataViews.find(e.events_datastream,1)).find((t=>t.title===e.events_datastream))||await q.a.values.data.dataViews.createAndSave({allowNoIndex:!0,name:`behavioral_analytics.events-${e.name}`,timeFieldName:"@timestamp",title:e.events_datastream},!0)},K=Object(f.a)(["analytics","analytics_collection_api_logic"],(async({name:e})=>{const{http:t}=S.a.values,a=`/internal/enterprise_search/analytics/collections/${e}`;return await t.get(a)})),$=Object(u.kea)({actions:{fetchAnalyticsCollection:e=>({name:e})},connect:{actions:[K,["makeRequest","apiSuccess"]],values:[K,["data","status"]]},listeners:({actions:e})=>({fetchAnalyticsCollection:({name:t})=>{e.makeRequest({name:t})}}),path:["enterprise_search","analytics","collection"],selectors:({selectors:e})=>({analyticsCollection:[()=>[e.data],e=>e||null],isLoading:[()=>[e.status],e=>[h.a.LOADING,h.a.IDLE].includes(e)]})}),G=Object(u.kea)({actions:{setDataView:e=>({dataView:e})},connect:{actions:[$,["apiSuccess as fetchedAnalyticsCollection"]]},listeners:({actions:e})=>({fetchedAnalyticsCollection:async t=>{const a=await D(t);a&&e.setDataView(a)}}),path:["enterprise_search","analytics","collection","dataView"],reducers:()=>({dataView:[null,{setDataView:(e,{dataView:t})=>t}]})});var W=a(41);const U=(e,t)=>{return{regexp:{[e]:{value:(a=t,`.*${a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}.*`)}}};var a},H=e=>({totalCount:{cardinality:{field:e}}}),Y=(e,t)=>({size:(e+1)*t}),J=(e,t)=>({aggs:{sort:{bucket_sort:{from:e*t,size:t}}}}),X=(e,t,{search:a,timeRange:s,eventType:n},i)=>({params:{index:e.title,aggs:i,query:{bool:{must:[{range:{"@timestamp":{gte:s.from,lt:s.to}}},...n?[{term:{"event.action":n}}]:[],...a?[U(t,a)]:[]]}},size:0,track_total_hits:!1}});let Q=function(e){return e[e.SearchTerms=0]="SearchTerms",e[e.WorsePerformers=1]="WorsePerformers",e[e.Clicked=2]="Clicked",e[e.Referrers=3]="Referrers",e[e.Locations=4]="Locations",e}({}),Z=function(e){return e.count="count",e.searchTerms="searchTerms",e.query="query",e.location="location",e.page="page",e.sessions="sessions",e}({});const ee={from:"now-7d",to:"now"},te={pause:!0,value:1e4},ae=Object(u.kea)({actions:{onTimeRefresh:!0,setRefreshInterval:({pause:e,value:t})=>({pause:e,value:t}),setSearchSessionId:e=>({searchSessionId:e}),setTimeRange:({from:e,to:t})=>({from:e,to:t})},listeners:({actions:e})=>({onTimeRefresh(){var t;e.setSearchSessionId((null===(t=q.a.values.data)||void 0===t?void 0:t.search.session.start())||"")},setRefreshInterval(t){t.pause&&e.setSearchSessionId(null)},setTimeRange(){e.setSearchSessionId(null)}}),path:["enterprise_search","analytics","collection","toolbar"],reducers:()=>({_searchSessionId:[null,{setSearchSessionId:(e,{searchSessionId:t})=>t}],refreshInterval:[te,{setRefreshInterval:(e,{pause:t,value:a})=>({pause:t,value:a})}],timeRange:[ee,{setTimeRange:(e,{from:t,to:a})=>({...e,from:t,to:a})}]}),selectors:()=>({searchSessionId:[e=>[e._searchSessionId],e=>e||void 0]})}),se={[Q.SearchTerms]:{parseResponse:e=>{var t,a;return{items:(null===(t=e.rawResponse.aggregations)||void 0===t?void 0:t.searches.buckets.map((e=>({[Z.count]:e.doc_count,[Z.searchTerms]:e.key}))))||[],totalCount:(null===(a=e.rawResponse.aggregations)||void 0===a?void 0:a.totalCount.value)||0}},requestParams:(e,{timeRange:t,sorting:a,pageIndex:s,pageSize:n,search:i},l="search.query")=>X(e,l,{eventType:"search",search:i,timeRange:t},{searches:{terms:{...Y(s,n),field:l,order:a?{[a.field===Z.count?"_count":"_key"]:a.direction}:void 0},...J(s,n)},...H(l)})},[Q.WorsePerformers]:{parseResponse:e=>{var t,a;return{items:(null===(t=e.rawResponse.aggregations)||void 0===t?void 0:t.formula.searches.buckets.map((e=>({[Z.count]:e.doc_count,[Z.query]:e.key}))))||[],totalCount:(null===(a=e.rawResponse.aggregations)||void 0===a?void 0:a.formula.totalCount.value)||0}},requestParams:(e,{timeRange:t,sorting:a,pageIndex:s,pageSize:n,search:i},l="search.query")=>X(e,l,{eventType:"search",search:i,timeRange:t},{formula:{aggs:{...H(l),searches:{terms:{...Y(s,n),field:l,order:a?{[(null==a?void 0:a.field)===Z.count?"_count":"_key"]:null==a?void 0:a.direction}:void 0},...J(s,n)}},filter:{term:{"search.results.total_results":"0"}}}})},[Q.Clicked]:{parseResponse:e=>{var t,a;return{items:(null===(t=e.rawResponse.aggregations)||void 0===t?void 0:t.formula.searches.buckets.map((e=>({[Z.count]:e.doc_count,[Z.page]:e.key}))))||[],totalCount:(null===(a=e.rawResponse.aggregations)||void 0===a?void 0:a.formula.totalCount.value)||0}},requestParams:(e,{timeRange:t,sorting:a,pageIndex:s,pageSize:n,search:i},l="page.url.original")=>X(e,l,{eventType:"search_click",search:i,timeRange:t},{formula:{aggs:{...H(l),searches:{terms:{...Y(s,n),field:l,order:a?{[a.field===Z.count?"_count":"_key"]:a.direction}:void 0},...J(s,n)}},filter:{term:{"event.action":"search_click"}}}})},[Q.Referrers]:{parseResponse:e=>{var t,a;return{items:(null===(t=e.rawResponse.aggregations)||void 0===t?void 0:t.formula.searches.buckets.map((e=>({[Z.sessions]:e.doc_count,[Z.page]:e.key}))))||[],totalCount:(null===(a=e.rawResponse.aggregations)||void 0===a?void 0:a.formula.totalCount.value)||0}},requestParams:(e,{timeRange:t,sorting:a,pageIndex:s,pageSize:n,search:i},l="page.referrer.original")=>X(e,l,{eventType:"page_view",search:i,timeRange:t},{formula:{aggs:{...H(l),searches:{terms:{...Y(s,n),field:l,order:a?{[(null==a?void 0:a.field)===Z.sessions?"_count":"_key"]:null==a?void 0:a.direction}:void 0},...J(s,n)}},filter:{term:{"event.action":"page_view"}}}})},[Q.Locations]:{parseResponse:e=>{var t,a;return{items:(null===(t=e.rawResponse.aggregations)||void 0===t?void 0:t.formula.searches.buckets.map((e=>({[Z.sessions]:e.doc_count,[Z.location]:e.key[0],countryISOCode:e.key[1]}))))||[],totalCount:(null===(a=e.rawResponse.aggregations)||void 0===a?void 0:a.formula.totalCount.value)||0}},requestParams:(e,{timeRange:t,sorting:a,pageIndex:s,pageSize:n,search:i},l="session.location.country_name")=>X(e,l,{search:i,timeRange:t},{formula:{aggs:{...H(l),searches:{multi_terms:{...Y(s,n),order:a?{[(null==a?void 0:a.field)===Z.sessions?"_count":"_key"]:null==a?void 0:a.direction}:void 0,terms:[{field:l},{field:"session.location.country_iso_code"}]},...J(s,n)}},filter:{term:{"event.action":"page_view"}}}})}},ne=Object(u.kea)({actions:{onTableChange:({page:e,sort:t})=>({page:e,sort:t}),reset:!0,setItems:e=>({items:e}),setSearch:e=>({search:e}),setSelectedTable:(e,t)=>({id:e,sorting:t}),setTotalItemsCount:e=>({count:e})},connect:{actions:[ae,["setTimeRange","setSearchSessionId"],G,["setDataView"]],values:[G,["dataView"],ae,["timeRange","searchSessionId"]]},listeners:({actions:e,values:t})=>{const a=()=>{if(null===t.selectedTable||!(t.selectedTable in se)||!t.dataView)return e.setItems([]),void e.setTotalItemsCount(0);const{requestParams:a,parseResponse:s}=se[t.selectedTable],n=t.timeRange;if(q.a.values.data){const i=q.a.values.data.search.search(a(t.dataView,{pageIndex:t.pageIndex,pageSize:t.pageSize,search:t.search,sorting:t.sorting,timeRange:n}),{indexPattern:t.dataView,sessionId:t.searchSessionId}).subscribe({error:e=>{var t;null===(t=q.a.values.data)||void 0===t||t.search.showError(e)},next:t=>{if(!Object(W.isRunningResponse)(t)){const{items:a,totalCount:n}=s(t);e.setItems(a),e.setTotalItemsCount(n),i.unsubscribe()}}})}};return{onTableChange:a,setDataView:a,setSearch:async(e,t)=>{await t(200),a()},setSearchSessionId:a,setSelectedTable:a,setTimeRange:a}},path:["enterprise_search","analytics","collection","explore","table"],reducers:()=>({isLoading:[!1,{onTableChange:()=>!0,setItems:()=>!1,setSearch:()=>!0,setSearchSessionId:()=>!0,setSelectedTable:()=>!0,setTableState:()=>!0,setTimeRange:()=>!0}],items:[[],{setItems:(e,{items:t})=>t}],pageIndex:[0,{onTableChange:(e,{page:t})=>(null==t?void 0:t.index)||0,reset:()=>0,setSearch:()=>0,setSelectedTable:()=>0}],pageSize:[10,{onTableChange:(e,{page:t})=>(null==t?void 0:t.size)||10,reset:()=>10}],search:["",{reset:()=>"",setSearch:(e,{search:t})=>t,setSelectedTable:()=>""}],selectedTable:[null,{setSelectedTable:(e,{id:t})=>t}],sorting:[null,{onTableChange:(e,{sort:t=null})=>t,setSelectedTable:(e,{sorting:t=null})=>t}],totalItemsCount:[0,{setTotalItemsCount:(e,{count:t})=>t}]})});var ie=a(20),le=a(1015),ce=a(278);const re=({children:e,...t})=>{if((e=>void 0!==e.coreStart)(t)){const{coreStart:a,...s}=t,n=Object(C.jsx)(le.a,s,e);return Object(C.jsx)(ce.a,{coreStart:a},n)}const{navigateToUrl:a,currentAppId:s,...n}=t,i=Object(C.jsx)(le.a,n,e);return Object(C.jsx)(ce.b,{currentAppId:s,navigateToUrl:a},i)},oe=Object(f.a)(["analytics","delete_analytics_collection_api_logic"],(async({name:e})=>{const{http:t}=S.a.values,a=`/internal/enterprise_search/analytics/collections/${e}`;await t.delete(a)}),{showSuccessFlashFn:()=>p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsDelete.action.successMessage",{defaultMessage:"The collection has been successfully deleted"})}),ue=Object(u.kea)({actions:{deleteAnalyticsCollection:e=>({name:e})},connect:{actions:[oe,["makeRequest","apiSuccess"]],values:[oe,["status"]]},listeners:({actions:e})=>({apiSuccess:async(e,t)=>{await t(1e3),O.a.values.navigateToUrl("/")},deleteAnalyticsCollection:({name:t})=>{e.makeRequest({name:t})}}),path:["enterprise_search","analytics","collection","delete"],selectors:({selectors:e})=>({isLoading:[()=>[e.status],e=>[h.a.LOADING,h.a.IDLE].includes(e)]})}),de=()=>{const{application:e}=Object(u.useValues)(O.a),{dataView:t}=Object(u.useValues)(G),{refreshInterval:a,timeRange:s}=Object(u.useValues)(ae);return t?e.getUrlForApp("discover",{path:`#/?_a=(index:'${t.id}')&_g=(filters:!(),refreshInterval:(pause:!${a.pause.toString().charAt(0)},value:${a.value}),time:(from:${s.from},to:${s.to}))`}):null},pe=[{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last7Days",{defaultMessage:"Last 7 days"}),start:"now-7d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last2Weeks",{defaultMessage:"Last 2 weeks"}),start:"now-14d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last30Days",{defaultMessage:"Last 30 days"}),start:"now-30d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last90Days",{defaultMessage:"Last 90 days"}),start:"now-90d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last1Year",{defaultMessage:"Last 1 year"}),start:"now-1y"}],me=()=>{const e=de(),[t,a]=Object(s.useState)(!1),{application:n,navigateToUrl:i}=Object(u.useValues)(O.a),{analyticsCollection:l}=Object(u.useValues)($),{setTimeRange:c,setRefreshInterval:r,onTimeRefresh:o}=Object(u.useActions)(ae),{refreshInterval:p,timeRange:m}=Object(u.useValues)(ae),{deleteAnalyticsCollection:b}=Object(u.useActions)(ue),{isLoading:j}=Object(u.useValues)(ue),h=n.getUrlForApp("management",{path:"/data/index_management/data_streams/"+l.events_datastream});return Object(C.jsx)(d.EuiFlexGroup,{gutterSize:"m"},Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiSuperDatePicker,{start:m.from,end:m.to,refreshInterval:p.value,isPaused:p.pause,onTimeChange:({start:e,end:t})=>{c({from:e,to:t})},onRefresh:o,onRefreshChange:({isPaused:e,refreshInterval:t})=>{r({pause:e,value:t})},showUpdateButton:"iconOnly",updateButtonProps:{fill:!1},width:"full",commonlyUsedRanges:pe})),Object(C.jsx)(re,{coreStart:{application:n}},Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiPopover,{button:Object(C.jsx)(d.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>{a(!t)}},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.manageButton",defaultMessage:"Manage"})),isOpen:t,closePopover:()=>{a(!1)},anchorPosition:"downRight",panelPaddingSize:"none"},Object(C.jsx)(d.EuiContextMenuPanel,null,Object(C.jsx)(d.EuiContextMenuItem,{icon:"link",size:"s","data-telemetry-id":"entSearch-analytics-overview-toolbar-integrate-tracker-link",onClick:()=>i(Object(y.a)(g,{name:l.name}))},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.integrateTracker",defaultMessage:"Integrate JS tracker"})),Object(C.jsx)(d.EuiContextMenuItem,{icon:"database",size:"s",href:h,"data-telemetry-id":"entSearch-analytics-overview-toolbar-manage-datastream-link"},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.manageEventsDatastream",defaultMessage:"Manage events datastream"})),e&&Object(C.jsx)(d.EuiContextMenuItem,{icon:"visArea",href:e,size:"s","data-telemetry-id":"entSearch-analytics-overview-toolbar-manage-discover-link"},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.openInDiscover",defaultMessage:"Create dashboards in Discover"})),Object(C.jsx)(d.EuiPopoverFooter,{paddingSize:"m"},Object(C.jsx)(d.EuiButton,{type:"submit",color:"danger",fullWidth:!0,isLoading:!j,disabled:!j,"data-telemetry-id":"entSearch-analytics-overview-toolbar-delete-collection-button",size:"s",onClick:()=>{b(l.name)}},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collections.collectionsView.delete.buttonTitle",defaultMessage:"Delete collection"}))))))))},be=e=>e&&2===e.length?e.toUpperCase().replace(/./g,(e=>String.fromCharCode(55356,56741+e.charCodeAt(0)))):null,ge=()=>{const{application:e}=Object(u.useValues)(O.a),t=de();return t?Object(C.jsx)(d.EuiCallOut,{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.explorer.callout.title",{defaultMessage:"Need a deeper analysis?"}),iconType:"inspect"},Object(C.jsx)("p",null,Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.explorer.callout.description",defaultMessage:"Review your event logs in Discover to get more insights about your application metrics."})),Object(C.jsx)(re,{coreStart:{application:e}},Object(C.jsx)(d.EuiButton,{fill:!0,href:t,"data-telemetry-id":"entSearch-analytics-explorer-callout-exploreLink"},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.explorer.callout.button",defaultMessage:"Explore"})))):null},je=[{id:Q.SearchTerms,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.explorer.searchTermsTab",{defaultMessage:"Search terms"})},{id:Q.Clicked,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.explorer.topClickedTab",{defaultMessage:"Top clicked results"})},{id:Q.WorsePerformers,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.explorer.noResultsTab",{defaultMessage:"No results"})},{id:Q.Locations,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.explorer.locationsTab",{defaultMessage:"Locations"})},{id:Q.Referrers,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.explorer.referrersTab",{defaultMessage:"Referrers"})}],he={[Q.SearchTerms]:{columns:[{field:Z.searchTerms,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.searchTerms",{defaultMessage:"Search Terms"}),sortable:!0,truncateText:!0},{align:"right",field:Z.count,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.count",{defaultMessage:"Count"}),sortable:!0,truncateText:!0}],sorting:{sort:{direction:"desc",field:Z.count}}},[Q.WorsePerformers]:{columns:[{field:Z.query,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.query",{defaultMessage:"Query"}),sortable:!0,truncateText:!0},{align:"right",field:Z.count,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.count",{defaultMessage:"Count"}),sortable:!0,truncateText:!0}],sorting:{sort:{direction:"desc",field:Z.count}}},[Q.Clicked]:{columns:[{field:Z.page,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.page",{defaultMessage:"Page"}),render:e=>t=>Object(C.jsx)(d.EuiText,{size:"s",color:e.colors.primaryText},Object(C.jsx)("p",null,t)),sortable:!0,truncateText:!0},{align:"right",field:Z.count,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.count",{defaultMessage:"Count"}),sortable:!0,truncateText:!0}],sorting:{sort:{direction:"desc",field:Z.count}}},[Q.Referrers]:{columns:[{field:Z.page,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.page",{defaultMessage:"Page"}),render:e=>t=>Object(C.jsx)(d.EuiText,{size:"s",color:e.colors.primaryText},Object(C.jsx)("p",null,t)),sortable:!0,truncateText:!0},{align:"right",field:Z.sessions,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.session",{defaultMessage:"Session"}),sortable:!0,truncateText:!0}],sorting:{sort:{direction:"desc",field:Z.sessions}}},[Q.Locations]:{columns:[{field:Z.location,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.location",{defaultMessage:"Location"}),render:e=>(t,a)=>Object(C.jsx)(d.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(C.jsx)(d.EuiText,null,Object(C.jsx)("h3",null,be(a.countryISOCode))),Object(C.jsx)(d.EuiText,{size:"s",color:e.colors.primaryText},Object(C.jsx)("p",null,t))),sortable:!0,truncateText:!0},{align:"right",field:Z.sessions,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.session",{defaultMessage:"Session"}),sortable:!0,truncateText:!0}],sorting:{sort:{direction:"desc",field:Z.sessions}}}},ye=1e4,xe=()=>{const{euiTheme:e}=Object(d.useEuiTheme)(),{onTableChange:t,setSelectedTable:a,setSearch:n}=Object(u.useActions)(ne),{items:i,isLoading:l,pageIndex:c,pageSize:r,search:o,selectedTable:m,sorting:b,totalItemsCount:g}=Object(u.useValues)(ne);let j=null!==m&&he[m];j&&(j={...j,columns:j.columns.map((t=>{var a;return{...t,render:null===(a=t.render)||void 0===a?void 0:a.call(t,e)}})),sorting:{...j.sorting,sort:b||void 0}});const h=r*c+(i.length?1:0),y=r*c+i.length;return Object(s.useEffect)((()=>{if(!m){var e,t;const s=je[0].id;a(s,null===(e=he[s])||void 0===e||null===(t=e.sorting)||void 0===t?void 0:t.sort)}}),[]),Object(C.jsx)(d.EuiFlexGroup,{direction:"column",gutterSize:"l"},Object(C.jsx)(d.EuiTabs,null,null==je?void 0:je.map((({id:e,name:t})=>Object(C.jsx)(d.EuiTab,{key:e,onClick:()=>{var t,s;return a(e,null===(t=he[e])||void 0===t||null===(s=t.sorting)||void 0===s?void 0:s.sort)},isSelected:e===m},t)))),j&&Object(C.jsx)(d.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(C.jsx)(d.EuiFieldSearch,{placeholder:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.explorer.searchPlaceholder",{defaultMessage:"Search"}),value:o,onChange:e=>n(e.target.value),isClearable:!0,isLoading:l,incremental:!0,fullWidth:!0}),Object(C.jsx)(d.EuiSpacer,{size:"xl"}),Object(C.jsx)(d.EuiText,{size:"xs"},g>ye?Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.explorer.tableSummaryIndeterminate",defaultMessage:"Showing {items} of first {maxItemsCount} results",values:{items:Object(C.jsx)("strong",null,h,"-",y),maxItemsCount:Object(C.jsx)(d.EuiI18nNumber,{value:ye})}}):Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collectionsView.explorer.tableSummary",defaultMessage:"Showing {items} of {totalItemsCount}",values:{items:Object(C.jsx)("strong",null,h,"-",y),totalItemsCount:g}})),Object(C.jsx)(d.EuiSpacer,{size:"m"}),Object(C.jsx)(d.EuiHorizontalRule,{margin:"none"}),Object(C.jsx)(d.EuiBasicTable,{columns:j.columns,itemId:m||void 0,items:i,loading:l,sorting:j.sorting,pagination:{pageIndex:c,pageSize:r,pageSizeOptions:[10,20,50],showPerPageOptions:!0,totalItemCount:Math.min(g,ye)},onChange:({sort:e,page:a})=>{t({page:a,sort:e})}})),Object(C.jsx)(ge,null))},Oe=({})=>{const{analyticsCollection:e}=Object(u.useValues)($),{reset:t}=Object(u.useActions)(ne);return Object(s.useEffect)((()=>()=>{t()}),[]),Object(C.jsx)(P,{restrictWidth:!0,pageChrome:[null==e?void 0:e.name],analyticsName:null==e?void 0:e.name,pageViewTelemetry:"View Analytics Collection - explorer",pageHeader:{bottomBorder:!1,pageTitle:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.explorerView.title",{defaultMessage:"Explorer"}),rightSideItems:[Object(C.jsx)(me,null)]}},Object(C.jsx)(xe,null))};var fe=a(97),Se=a(3);const ve=e=>[{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepOne.title",{defaultMessage:"Install client"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepOne.description",{defaultMessage:"Download the behavioral analytics javascript tracker client from NPM."})),Object(C.jsx)(d.EuiCodeBlock,{language:"bash",isCopyable:!0},"npm install @elastic/behavioral-analytics-javascript-tracker")))},{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepTwo.title",{defaultMessage:"Import the client"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepTwo.description",{defaultMessage:"Import the client in your application."})),Object(C.jsx)(d.EuiCodeBlock,{language:"bash",isCopyable:!0},'import {\n  createTracker,\n  trackPageView,\n  trackSearch,\n  trackSearchClick\n} from "@elastic/behavioral-analytics-javascript-tracker";')))},{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepThree.title",{defaultMessage:"Initialize the client"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepThree.description",{defaultMessage:"Use createTracker method to initialize the tracker with your Configuration. You will then be able to use the tracker to send events to Behavioral Analytics."})),Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepThree.descriptionTwo",{defaultMessage:"Once you have called createTracker, you can use the tracker methods such as trackPageView to send events to Behavioral Analytics."})),Object(C.jsx)(d.EuiCodeBlock,{language:"javascript",isCopyable:!0},`createTracker({\n  endpoint: "${e.endpoint}",\n  collectionName: "${e.collectionName}",\n  apiKey: "${e.apiKey}"\n});`)))},{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepFour.title",{defaultMessage:"Dispatch Pageview and search behavior events"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepFour.descriptionTwo",{defaultMessage:"Once initialized, you will be able to track page views in your application."})),Object(C.jsx)(d.EuiCodeBlock,{language:"javascript",isCopyable:!0},"import { useEffect } from 'react';\n\n// track a page view in React\n\nconst SearchPage = (props) => {\n  useEffect(() => {\n    trackPageView();\n  }, []);\n\n  return (\n    <div>\n      <h1>Search Page</h1>\n    </div>\n  );\n};"),Object(C.jsx)(d.EuiSpacer,{size:"m"}),Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.stepFour.descriptionThree",{defaultMessage:"You can also use trackSearch and trackSearchClick to track what your customers are searching and clicking on in your application."})),Object(C.jsx)(d.EuiCodeBlock,{language:"javascript",isCopyable:!0},'\nimport { trackSearch } from \'@elastic/behavioral-analytics-javascript-tracker\';\n\nconst SearchResult = ({ hit }) => {\n\n  const clickHandler = () => {\n    trackSearchClick({\n      document: { id: hit.id, index: "products" },\n      page: {\n        url: "http://my-website.com/products/123"\n      },\n      search: {\n        query: "search term",\n        filters: {},\n        page: { current: 1, size: 10 },\n        results: {\n          items: [\n            {\n              document: {\n                id: "123",\n                index: "products",\n              },\n              page: {\n                url: "http://my-website.com/products/123",\n              },\n            },\n          ],\n          total_results: 10\n        },\n        sort: {\n          name: "relevance",\n        },\n        search_application: "website",\n      }\n    })\n  }\n\n  return (\n    <a onClick={clickHandler}>\n      <h2>{hit.title}</h2>\n    </a>\n  )\n}')))}],ke=(e,t)=>[{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.stepOne.title",{defaultMessage:"Embed onto site"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.stepOne.description",{defaultMessage:"Embed the behavioral analytics JavaScript snippet on every page of the website or application you’d like to track."})),Object(C.jsx)(d.EuiCodeBlock,{language:"html",isCopyable:!0},`<script src="${e}"><\/script>`)))},{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.stepTwo.title",{defaultMessage:"Initialize the client"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.stepTwo.description",{defaultMessage:"You must initialize the client before you can track events. We recommend initializing just below the script tag."})),Object(C.jsx)(d.EuiCodeBlock,{language:"html",isCopyable:!0},`<script type="text/javascript">\nwindow.elasticAnalytics.createTracker({\n  endpoint: "${t.endpoint}",\n  collectionName: "${t.collectionName}",\n  apiKey: "${t.apiKey}",\n  // Optional: sampling rate percentage: 0-1, 0 = no events, 1 = all events\n  // sampling: 1,\n});\n<\/script>`)))},{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.stepThree.title",{defaultMessage:"Track search events"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.stepThree.description",defaultMessage:"Track individual search events, like result clicks and searches, by using the trackSearch or trackSearchClick methods."})),Object(C.jsx)(d.EuiCodeBlock,{language:"javascript",isCopyable:!0},'window.elasticAnalytics.trackSearch({\n  search: {\n    query: "laptop",\n    filters: {\n      brand: ["apple"],\n      price: ["1000-2000"],\n    },\n    page: {\n      current: 1,\n      size: 10,\n    },\n    results: {\n      items: [\n        {\n          document: {\n            id: "123",\n            index: "products",\n          },\n          page: {\n            url: "http://my-website.com/products/123",\n          },\n        },\n      ],\n      total_results: 100,\n    },\n    sort: {\n      name: "relevance",\n    },\n    search_application: "website",\n  }\n});')))}],Te=e=>[{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchuiEmbed.stepOne.title",{defaultMessage:"Embed Behavioral Analytics"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepOne.description",defaultMessage:"Follow the instructions to embed Behavioral Analytics into your site via {embedLink} or {clientLink}.",values:{embedLink:Object(C.jsx)(d.EuiLink,{"data-telemetry-id":"entSearch-analytics-integrate-javascriptEmbed-tab",onClick:()=>{e("javascriptEmbed")}},p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepOne.embedLink",{defaultMessage:"Javascript Embed"})),clientLink:Object(C.jsx)(d.EuiLink,{"data-telemetry-id":"entSearch-analytics-integrate-javascriptClientEmbed-tab",onClick:()=>{e("javascriptClientEmbed")}},p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepOne.clientLink",{defaultMessage:"Javascript Client"}))}}))))},{title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchuiEmbed.stepTwo.title",{defaultMessage:"Install Search UI Behavioral Analytics Plugin"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,{grow:!1},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepTwo.description",{defaultMessage:"Download the Behavioral Analytics plugin from NPM."})),Object(C.jsx)(d.EuiCodeBlock,{language:"bash",isCopyable:!0},"npm install @elastic/search-ui-analytics-plugin"),Object(C.jsx)(d.EuiSpacer,{size:"m"}),Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepTwo.importDescription",{defaultMessage:"Then import the Behavioral Analytics plugin into your app."})),Object(C.jsx)(d.EuiCodeBlock,{language:"javascript",isCopyable:!0},'import AnalyticsPlugin from "@elastic/search-ui-analytics-plugin";'),Object(C.jsx)(d.EuiSpacer,{size:"m"}),Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepTwo.setupDescription",{defaultMessage:"Finally, add the plugin to your Search UI configuration. Depending on how you have embedded Behavioral Analytics, you may need to pass in the client. The example below shows how to pass in the client when using the Javascript client."})),Object(C.jsx)(d.EuiCodeBlock,{language:"javascript",isCopyable:!0},'\nimport { getTracker } from "@elastic/behavioral-analytics-javascript-tracker";\n\nconst searchUIConfig = {\n...\nplugins: [\n  AnalyticsPlugin({\n    client: getTracker()\n  })\n],\n...\n}'),Object(C.jsx)(d.EuiSpacer,{size:"m"}),Object(C.jsx)("p",null,Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepTwo.moreInfoDescription",defaultMessage:"See the {link} for more information on initializing the tracker and firing events.",values:{link:Object(C.jsx)(d.EuiLink,{href:"https://docs.elastic.co/search-ui/api/core/plugins/analytics-plugin",target:"_blank","data-telemetry-id":"entSearch-analytics-integrate-javascriptEmbed-analyticsPluginDocumentationLink"},p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchui.stepTwo.analyticsPluginDoc",{defaultMessage:"Analytics Plugin Documentation"}))}}))))}],Ce=Object(f.a)(["generate_analytics_api_key_logic"],(async({collectionName:e,keyName:t})=>{const a=`/internal/enterprise_search/analytics/collections/${e}/api_key`;return await S.a.values.http.post(a,{body:JSON.stringify({keyName:t})})})),Ee=Object(u.kea)({actions:{setKeyName:e=>({keyName:e})},connect:{values:[Ce,["data","status"]]},path:["enterprise_search","analytics","integration","generate_api_key_modal"],reducers:()=>({keyName:["",{setKeyName:(e,{keyName:t})=>t}]}),selectors:({selectors:e})=>({apiKey:[()=>[e.data],e=>{var t;return(null==e||null===(t=e.apiKey)||void 0===t?void 0:t.encoded)||""}],isLoading:[()=>[e.status],e=>e===h.a.LOADING],isSuccess:[()=>[e.status],e=>e===h.a.SUCCESS]})}),we=({collectionName:e,onClose:t})=>{const{keyName:a,apiKey:i,isLoading:l,isSuccess:c}=Object(u.useValues)(Ee),{setKeyName:r}=Object(u.useActions)(Ee),{makeRequest:o}=Object(u.useActions)(Ce);return Object(s.useEffect)((()=>{r(`${e} API key`)}),[e]),Object(C.jsx)(d.EuiModal,{onClose:t},Object(C.jsx)(d.EuiModalHeader,null,Object(C.jsx)(d.EuiModalHeaderTitle,null,p.i18n.translate("xpack.enterpriseSearch.content.analytics.api.generateAnalyticsApiKeyModal.title",{defaultMessage:"Create analytics API Key"}))),Object(C.jsx)(d.EuiModalBody,null,Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiPanel,{hasShadow:!1,color:"primary"},Object(C.jsx)(d.EuiFlexGroup,{direction:"column"},Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiFlexGroup,{direction:"row",alignItems:"flexEnd"},c?Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiFormLabel,null,a),Object(C.jsx)(d.EuiSpacer,{size:"xs"}),Object(C.jsx)(d.EuiFlexGroup,{alignItems:"center"},Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiCodeBlock,{"aria-label":a,fontSize:"m",paddingSize:"m",color:"dark",isCopyable:!0},i)),Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiButtonIcon,{"data-telemetry-id":"entSearchContent-analyticss-api-generateAnalyticsApiKeyModal-csvDownloadButton","aria-label":p.i18n.translate("xpack.enterpriseSearch.content.analytics.api.generateAnalyticsApiKeyModal.csvDownloadButton",{defaultMessage:"Download API key"}),iconType:"download",href:encodeURI(`data:text/csv;charset=utf-8,${i}`),download:`${a}.csv`})))):Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiFormRow,{label:"Name your API key",fullWidth:!0},Object(C.jsx)(d.EuiFieldText,{"data-telemetry-id":"entSearchContent-analyticss-api-generateAnalyticsApiKeyModal-editName",fullWidth:!0,placeholder:"Type a name for your API key",onChange:e=>r(e.currentTarget.value),value:a,isLoading:l}))),Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiButton,{"data-telemetry-id":"entSearchContent-analyticss-api-generateAnalyticsApiKeyModal-generateApiKeyButton","data-test-subj":"generateApiKeyButton",iconSide:"left",iconType:"plusInCircle",fill:!0,onClick:()=>{o({collectionName:e,keyName:a.trim()})},disabled:a.trim().length<=0},p.i18n.translate("xpack.enterpriseSearch.content.analytics.api.generateAnalyticsApiKeyModal.generateButton",{defaultMessage:"Generate key"})))))),Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiFlexGroup,{direction:"row"},Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiText,{size:"s",color:"#006bb8"},Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.content.analytics.api.generateAnalyticsApiKeyModal.apiKeyWarning",{defaultMessage:"Elastic does not store API keys. Once generated, you'll only be able to view the key one time. Make sure you save it somewhere secure. If you lose access to it you'll need to generate a new API key from this screen."})))))))))),Object(C.jsx)(d.EuiModalFooter,null,i?Object(C.jsx)(d.EuiButton,{"data-telemetry-id":"entSearchContent-analyticss-api-generateAnalyticsApiKeyModal-done",fill:!0,onClick:t},p.i18n.translate("xpack.enterpriseSearch.content.analytics.api.generateAnalyticsApiKeyModal.done",{defaultMessage:"Done"})):Object(C.jsx)(d.EuiButtonEmpty,{"data-telemetry-id":"entSearchContent-analyticss-api-generateAnalyticsApiKeyModal-cancel",onClick:t},p.i18n.translate("xpack.enterpriseSearch.content.analytics.api.generateAnalyticsApiKeyModal.cancel",{defaultMessage:"Cancel"}))))},Me=()=>({title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.corsStep.title",{defaultMessage:"Configure CORS"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,null,Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.corsStep.description",{defaultMessage:"You must configure CORS to allow requests from your website's domain to the Analytics API endpoint. You can do this by adding the following to your Elasticsearch configuration file:"})),Object(C.jsx)(d.EuiCodeBlock,{language:"yaml",isCopyable:!0},'# http.cors.allow-origin: "https://my-website-domain.example"\nhttp.cors.allow-origin: "*"\nhttp.cors.enabled: true\nhttp.cors.allow-credentials: true\nhttp.cors.allow-methods: OPTIONS, POST\nhttp.cors.allow-headers: X-Requested-With, X-Auth-Token, Content-Type, Content-Length, Authorization, Access-Control-Allow-Headers, Accept'),Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.corsStep.descriptionTwo",{defaultMessage:"Alternatively you can use a proxy server to route analytic requests from your website's domain to the Analytics API endpoint which will allow you to avoid configuring CORS."})),Object(C.jsx)(d.EuiLink,{href:Se.a.behavioralAnalyticsCORS,"data-telemetry-id":"entSearchContent-analytics-cors-learnMoreLink",external:!0,target:"_blank"},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.corsStep.learnMoreLink",{defaultMessage:"Learn more about CORS for Behavioral Analytics."})))))}),Ve=({analyticsCollection:e})=>{const[t,a]=Object(s.useState)("javascriptEmbed"),[i,l]=Object(s.useState)(!1),{navigateToUrl:c}=Object(u.useValues)(O.a),{apiKey:r}=Object(u.useValues)(Ee),o=Object(fe.a)().elasticsearchUrl||"https://localhost:9200",m={apiKey:r||"########",collectionName:null==e?void 0:e.name,endpoint:o},b=[{key:"javascriptEmbed",title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptEmbed.title",{defaultMessage:"Javascript Embed"})},{key:"javascriptClientEmbed",title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.javascriptClientEmbed.title",{defaultMessage:"Javascript Client"})},{key:"searchuiEmbed",title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.integrateTab.searchuiEmbed.title",{defaultMessage:"Search UI"})}],g=((e,t)=>({title:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.apiKey.title",{defaultMessage:"Create an API Key"}),children:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiText,null,Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.apiKeyStep.apiKeyWarning",{defaultMessage:"Elastic does not store API keys. Once generated, you'll only be able to view the key one time. Make sure you save it somewhere secure. If you lose access to it you'll need to generate a new API key from this screen."})," ",Object(C.jsx)(d.EuiLink,{href:Se.a.apiKeys,"data-telemetry-id":"entSearchContent-analytics-apiKey-learnMoreLink",external:!0,target:"_blank"},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.apiKeyStep.learnMoreLink",{defaultMessage:"Learn more about API keys."})))),Object(C.jsx)(d.EuiSpacer,{size:"l"}),Object(C.jsx)(d.EuiFlexGroup,{gutterSize:"s"},Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiButton,{iconSide:"left",iconType:"plusInCircleFilled",onClick:()=>l(!0),"data-telemetry-id":"entSearchContent-analytics-apiKey-createApiKeyButton"},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.apiKeyStep.createAPIKeyButton",{defaultMessage:"Create API Key"}))),Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiButton,{iconSide:"left",iconType:"popout","data-telemetry-id":"entSearchContent-analytics-apiKey-viewKeysButton",onClick:()=>t("/app/management/security/api_keys",{shouldNotCreateHref:!0})},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.apiKeyStep.viewKeysButton",{defaultMessage:"View Keys"})))))}))(0,c),j={javascriptClientEmbed:[g,Me(),...ve(m)],javascriptEmbed:[g,Me(),...ke("https://cdn.jsdelivr.net/npm/@elastic/behavioral-analytics-browser-tracker@2",m)],searchuiEmbed:Te(a)};return Object(C.jsx)(P,{restrictWidth:!0,pageChrome:[null==e?void 0:e.name],analyticsName:null==e?void 0:e.name,pageViewTelemetry:"View Analytics Collection - integrate",pageHeader:{bottomBorder:!1,pageTitle:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.title",{defaultMessage:"Tracker Integration"}),description:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.integration.description",{defaultMessage:"Easily install our tracker on your application or website to receive in-depth analytics data."}),rightSideItems:[]}},Object(C.jsx)(n.a.Fragment,null,i?Object(C.jsx)(we,{collectionName:e.name,onClose:()=>{l(!1)}}):null,Object(C.jsx)(d.EuiTabs,null,b.map((e=>Object(C.jsx)(d.EuiTab,{key:e.key,onClick:()=>{a(e.key)},isSelected:t===e.key,"data-test-subj":e.key,"data-telemetry-id":`entSearch-analytics-integrate-${e.key}-tab`},e.title)))),Object(C.jsx)(d.EuiSpacer,{size:"xxl"}),Object(C.jsx)(d.EuiSteps,{steps:j[t]})))};let Ie=function(e){return e.Searches="Searches",e.NoResults="NoResults",e.Clicks="Clicks",e.Sessions="Sessions",e}({});const Ae=(e,t)=>({[Ie.Searches]:"count(search.query, kql='event.action: search'",[Ie.NoResults]:"count(kql='search.results.total_results : 0 and event.action: search'",[Ie.Clicks]:"count(kql='event.action: search_click'",[Ie.Sessions]:"unique_count(session.id"}[e]+(t?`, shift='${t}'`:"")+")"),Re=Object(f.a)(["analytics","analytics_events_exist_api_logic"],(async({indexName:e})=>{const{http:t}=S.a.values,a=`/internal/enterprise_search/analytics/collection/${e}/events/exist`;return await t.get(a)})),Fe=Object(u.kea)({actions:{analyticsEventsExist:e=>({indexName:e})},connect:{actions:[Re,["makeRequest","apiSuccess","apiError"]],values:[Re,["status","data"]]},listeners:({actions:e})=>({analyticsEventsExist:({indexName:t})=>{e.makeRequest({indexName:t})}}),path:["enterprise_search","analytics","collection","events_exist"],selectors:({selectors:e})=>({hasEvents:[()=>[e.data],e=>!0===(null==e?void 0:e.exists)],isLoading:[()=>[e.status],e=>e===h.a.LOADING]})}),_e=({analyticsCollection:e})=>{const{navigateToUrl:t}=Object(u.useValues)(O.a),{analyticsEventsExist:a}=Object(u.useActions)(Fe),{hasEvents:n,isLoading:i}=Object(u.useValues)(Fe);return Object(s.useEffect)((()=>{a(e.events_datastream)}),[]),n||i?null:Object(C.jsx)(d.EuiCallOut,{color:"primary",iconType:"download",title:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.noEventsCallout.title",{defaultMessage:"Install our tracker"})},Object(C.jsx)(d.EuiText,null,p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.noEventsCallout.description",{defaultMessage:"Start receiving metric data in this Collection by installing our tracker in your search application."})),Object(C.jsx)(d.EuiSpacer,null),Object(C.jsx)(d.EuiButton,{fill:!0,type:"submit",onClick:()=>t(Object(y.a)(g,{name:e.name}))},p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.noEventsCallout.button",{defaultMessage:"Learn how"})))};var Le=a(24),Ne=a.n(Le),ze=a(32),Be=a(767),Pe=a(42),qe=a.n(Pe),De=a(26),Ke={name:"eivff4",styles:"display:none"};const $e=(e,{dataLoadTransform:t,getAttributes:a,initialValues:i})=>{const l=l=>{const{lens:c}=Object(u.useValues)(O.a),[r,o]=Object(s.useState)(null),[p,m]=Object(s.useState)(i),[b,g]=Object(s.useState)(null),j=Object(s.useMemo)((()=>r&&b&&a(r,b,l)),[r,b,l]);if(Object(s.useEffect)((()=>{(async()=>{o(await D(l.collection))})()}),[l]),Object(s.useEffect)((()=>{(async()=>{if(null!=c&&c.stateHelperApi){const e=await c.stateHelperApi();g(e.formula)}})()}),[]),!c)return null;const{EmbeddableComponent:h}=c;return Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(e,A()({},l,p)),j&&Object(C.jsx)(d.EuiFlexItem,{css:Ke},Object(C.jsx)(h,{id:l.id,timeRange:l.timeRange,attributes:j,searchSessionId:null==l?void 0:l.searchSessionId,onBrushEnd:({range:e})=>{var t;const[a,s]=e;null===(t=l.setTimeRange)||void 0===t||t.call(l,{from:new Date(a).toISOString(),mode:"absolute",to:new Date(s).toISOString()})},onLoad:(e,a)=>{t&&m(t(e,a))}})))};return l.displayName=`withLensDataHOC(${e.displayName||e.name})`,l},Ge={data:{},isLoading:!0},We=Object.values(Ie).map((e=>({formula:Ae(e),id:e,x:"timeline",y:"values"}))),Ue=$e((({data:e,timeRange:t,isLoading:a,selectedChart:n,setSelectedChart:i})=>{const[l,c]=Object(s.useState)(e),[r,o]=Object(s.useState)(null),{uiSettings:m,charts:b}=Object(u.useValues)(O.a),g=qe.a.parse(t.from),j=qe.a.parse(t.to),h=null==b?void 0:b.theme.useChartsBaseTheme(),y=Object(s.useMemo)((()=>[{chartColor:De.euiThemeVars.euiColorVis0,data:l[Ie.Searches]||[],id:Ie.Searches,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.searches",{defaultMessage:"Searches"})},{chartColor:De.euiThemeVars.euiColorVis2,data:l[Ie.NoResults]||[],id:Ie.NoResults,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.noResults",{defaultMessage:"No results"})},{chartColor:De.euiThemeVars.euiColorVis3,data:l[Ie.Clicks]||[],id:Ie.Clicks,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.clicks",{defaultMessage:"Click"})},{chartColor:De.euiThemeVars.euiColorVis5,data:l[Ie.Sessions]||[],id:Ie.Sessions,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.sessions",{defaultMessage:"Sessions"})}]),[l]);return Object(s.useEffect)((()=>{0!==Object.keys(e).length&&c(e)}),[e]),a&&0===Object.keys(l).length?Object(C.jsx)(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center",css:Object(C.css)({height:490},"","")},Object(C.jsx)(d.EuiLoadingChart,{size:"l"})):Object(C.jsx)(ze.Chart,{size:["100%",490]},Object(C.jsx)(ze.Settings,{baseTheme:h,showLegend:!1,onElementClick:e=>{var t;const a=null===(t=e[0][1])||void 0===t?void 0:t.specId;a&&i(a)},onElementOver:e=>{var t;const a=null===(t=e[0][1])||void 0===t?void 0:t.specId;a&&o(a)},onElementOut:()=>o(null),locale:p.i18n.getLocale()}),y.map((({data:e,id:t,name:a,chartColor:s})=>Object(C.jsx)(ze.AreaSeries,{id:t,key:t,name:a,data:e,color:s,xAccessor:0,yAccessors:[1],areaSeriesStyle:{area:{opacity:.2,visible:n===t},line:{opacity:n===t?1:.5,strokeWidth:[r,n].includes(t)?3:1}},yNice:!0,xScaleType:ze.ScaleType.Time,yScaleType:ze.ScaleType.Sqrt,curve:ze.CurveType.CURVE_MONOTONE_X}))),Object(C.jsx)(ze.Axis,{id:"bottom-axis",position:ze.Position.Bottom,tickFormat:g&&j?Object(Be.niceTimeFormatter)([g.valueOf(),j.valueOf()]):void 0,gridLine:{visible:!0}}),Object(C.jsx)(ze.Axis,{gridLine:{dash:[],visible:!0},hide:!0,id:"left-axis",position:ze.Position.Left}),Object(C.jsx)(ze.Tooltip,{headerFormatter:e=>Ne()(e.value).format(null==m?void 0:m.get("dateFormat")),maxTooltipItems:1,type:ze.TooltipType.VerticalCursor}))}),{dataLoadTransform:(e,t)=>e||!t?Ge:{data:We.reduce(((e,{id:a,x:s,y:n})=>{var i,l,c;return{...e,[a]:(null===(i=t.tables)||void 0===i||null===(l=i.tables[a])||void 0===l||null===(c=l.rows)||void 0===c?void 0:c.map((e=>[e[s],e[n]])))||[]}}),{}),isLoading:!1},getAttributes:(e,t)=>({references:[{id:e.id,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"},...We.map((({id:t})=>({id:e.id,name:`indexpattern-datasource-layer-${t}`,type:"index-pattern"})))],state:{datasourceStates:{formBased:{layers:We.reduce(((a,{id:s,x:n,y:i,formula:l})=>({...a,[s]:t.insertOrReplaceFormulaColumn(i,{formula:l},{columnOrder:[],columns:{[n]:{dataType:"date",isBucketed:!1,label:"Timestamp",operationType:"date_histogram",params:{includeEmptyRows:!0,interval:"auto"},scale:"ordinal",sourceField:null==e?void 0:e.timeFieldName}}},e)})),{})}},filters:[],query:{language:"kuery",query:""},visualization:{axisTitlesVisibilitySettings:{x:!1,yLeft:!1,yRight:!1},curveType:"CURVE_MONOTONE_X",fittingFunction:"None",gridlinesVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},layers:We.map((({id:e,x:t,y:a})=>({accessors:[a],layerId:[e],layerType:"data",seriesType:"area",xAccessor:t,yConfig:[{forAccessor:a}]}))),legend:{isVisible:!1},preferredSeriesType:"area",valueLabels:"hide"}},title:"",visualizationType:"lnsXY"}),initialValues:Ge});var He=function(e){return e.INCREASE="increase",e.DECREASE="decrease",e.CONSTANT="constant",e}(He||{}),Ye={name:"vabva8",styles:"position:relative;overflow:hidden"};const Je="hitsTotal",Xe="metrics",Qe="percentage",Ze={isLoading:!0,metric:null,secondaryMetric:null},et=$e((({isLoading:e,isSelected:t,metric:a,name:i,onClick:l,secondaryMetric:c})=>{const{euiTheme:r}=Object(d.useEuiTheme)(),[o,u]=Object(s.useState)(a),[m,b]=Object(s.useState)(c);Object(s.useEffect)((()=>{null!==a&&u(a)}),[a]),Object(s.useEffect)((()=>{null!==c&&b(a)}),[c]);const{icon:g,color:j}=((e,t)=>({[He.DECREASE]:{color:De.euiThemeVars.euiColorVis7,icon:"sortDown"},[He.CONSTANT]:{color:e.colors.darkShade,icon:"minus"},[He.INCREASE]:{color:De.euiThemeVars.euiColorVis0,icon:"sortUp"}}[t]))(r,(e=>e>0?He.INCREASE:e<0?He.DECREASE:He.CONSTANT)(m||0));return Object(C.jsx)(d.EuiPanel,{grow:!0,hasBorder:!0,hasShadow:!1,onClick:l,color:t?"primary":"plain",css:t?Object(C.css)("border:1px solid ",r.colors.primary,";position:relative;overflow:hidden;",""):Ye},e&&Object(C.jsx)(d.EuiProgress,{size:"xs",color:"success",position:"absolute"}),Object(C.jsx)(d.EuiFlexGroup,{direction:"column"},Object(C.jsx)(d.EuiFlexGroup,{gutterSize:"s",justifyContent:"spaceBetween"},Object(C.jsx)(d.EuiText,{size:"s"},Object(C.jsx)("p",null,i)),Object(C.jsx)(d.EuiText,{size:"s",color:j},Object(C.jsx)("span",null,null===m?p.i18n.translate("xpack.enterpriseSearch.analytics.collection.notAvailableLabel",{defaultMessage:"N/A"}):Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiIcon,{type:g}),m+"%")))),e&&null===o?Object(C.jsx)(d.EuiSkeletonRectangle,{height:r.size.xl,width:"100%"}):Object(C.jsx)(d.EuiText,{color:t?r.colors.primaryText:j},Object(C.jsx)("h2",null,null===o?p.i18n.translate("xpack.enterpriseSearch.analytics.collection.notAvailableLabel",{defaultMessage:"N/A"}):Object(C.jsx)(d.EuiI18nNumber,{value:o})))))}),{dataLoadTransform:(e,t)=>{var a,s,n,i,l,c,r,o,u,d;return e||!t?Ze:{isLoading:e,metric:null!==(a=null===(s=t.tables)||void 0===s||null===(n=s.tables[Xe])||void 0===n||null===(i=n.rows)||void 0===i||null===(l=i[0])||void 0===l?void 0:l[Je])&&void 0!==a?a:null,secondaryMetric:null!==(c=null===(r=t.tables)||void 0===r||null===(o=r.tables[Xe])||void 0===o||null===(u=o.rows)||void 0===u||null===(d=u[0])||void 0===d?void 0:d[Qe])&&void 0!==c?c:null}},getAttributes:(e,t,a)=>{let s=t.insertOrReplaceFormulaColumn(Qe,{formula:`round((${a.getFormula()}/${a.getFormula("previous")}-1) * 100)`},{columnOrder:[],columns:{}},e);return s=t.insertOrReplaceFormulaColumn(Je,{formula:a.getFormula()},s,e),{references:[{id:e.id,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"},{id:e.id,name:`indexpattern-datasource-layer-${Xe}`,type:"index-pattern"}],state:{datasourceStates:{formBased:{layers:{[Xe]:s}}},filters:[],query:{language:"kuery",query:""},visualization:{layerId:[Xe],layerType:"data",layers:[],metricAccessor:Je,secondaryMetricAccessor:Qe}},title:"",visualizationType:"lnsMetric"}},initialValues:Ze}),tt={[Ie.Searches]:[{id:Q.SearchTerms,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTab.searchTerms",{defaultMessage:"Popular search terms"})}],[Ie.NoResults]:[{id:Q.WorsePerformers,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTab.worsePerformers",{defaultMessage:"Worse performers"})}],[Ie.Clicks]:[{id:Q.Clicked,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTab.topClicked",{defaultMessage:"Top clicked results"})}],[Ie.Sessions]:[{id:Q.Locations,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTab.topLocations",{defaultMessage:"Top locations"})},{id:Q.Referrers,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTab.topReferrers",{defaultMessage:"Top referrers"})}]},at={[Q.SearchTerms]:{columns:[{field:Z.searchTerms,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.searchTerms",{defaultMessage:"Search Terms"}),truncateText:!0},{align:"right",field:Z.count,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.count",{defaultMessage:"Count"}),sortable:!0,truncateText:!0}],sorting:{readOnly:!0,sort:{direction:"desc",field:Z.count}}},[Q.WorsePerformers]:{columns:[{field:Z.query,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.query",{defaultMessage:"Query"}),truncateText:!0},{align:"right",field:Z.count,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.count",{defaultMessage:"Count"}),sortable:!0,truncateText:!0}],sorting:{readOnly:!0,sort:{direction:"desc",field:Z.count}}},[Q.Clicked]:{columns:[{field:Z.page,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.page",{defaultMessage:"Page"}),render:e=>t=>Object(C.jsx)(d.EuiText,{size:"s",color:e.colors.primaryText},Object(C.jsx)("p",null,t)),truncateText:!0},{align:"right",field:Z.count,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.count",{defaultMessage:"Count"}),sortable:!0,truncateText:!0}],sorting:{readOnly:!0,sort:{direction:"desc",field:Z.count}}},[Q.Referrers]:{columns:[{field:Z.page,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.page",{defaultMessage:"Page"}),render:e=>t=>Object(C.jsx)(d.EuiText,{size:"s",color:e.colors.primaryText},Object(C.jsx)("p",null,t)),truncateText:!0},{align:"right",field:Z.sessions,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.session",{defaultMessage:"Session"}),sortable:!0,truncateText:!0}],sorting:{readOnly:!0,sort:{direction:"desc",field:Z.sessions}}},[Q.Locations]:{columns:[{field:Z.location,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.location",{defaultMessage:"Location"}),render:e=>(t,a)=>Object(C.jsx)(d.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(C.jsx)(d.EuiText,null,Object(C.jsx)("h3",null,be(a.countryISOCode))),Object(C.jsx)(d.EuiText,{size:"s",color:e.colors.primaryText},Object(C.jsx)("p",null,t))),truncateText:!0},{align:"right",field:Z.sessions,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.exploreTable.session",{defaultMessage:"Session"}),sortable:!0,truncateText:!0}],sorting:{readOnly:!0,sort:{direction:"desc",field:Z.sessions}}}},st=({filterBy:e})=>{const{euiTheme:t}=Object(d.useEuiTheme)(),{navigateToUrl:a}=Object(u.useValues)(O.a),{analyticsCollection:n}=Object(u.useValues)($),{onTableChange:i,setSelectedTable:l}=Object(u.useActions)(ne),{items:c,isLoading:r,selectedTable:o,sorting:p}=Object(u.useValues)(ne),m=tt[e];return Object(s.useEffect)((()=>{var e,t;const a=m[0].id;l(a,null===(e=at[a])||void 0===e||null===(t=e.sorting)||void 0===t?void 0:t.sort)}),[m]),Object(C.jsx)(d.EuiFlexGroup,{direction:"column",gutterSize:"l"},Object(C.jsx)(d.EuiTabs,null,null==m?void 0:m.map((({id:e,name:t})=>Object(C.jsx)(d.EuiTab,{key:e,onClick:()=>{var t,a;return l(e,null===(t=at[e])||void 0===t||null===(a=t.sorting)||void 0===a?void 0:a.sort)},isSelected:e===o},t)))),Object(s.useMemo)((()=>{const e=null!==o&&at[o];return e&&Object(C.jsx)(d.EuiBasicTable,{columns:e.columns.map((e=>{var a;return{...e,render:null===(a=e.render)||void 0===a?void 0:a.call(e,t)}})),itemId:o,items:c,loading:r,sorting:e.sorting,onChange:({sort:e})=>{i({sort:e})}})}),[o,p,c,r]),Object(C.jsx)(d.EuiFlexGroup,null,Object(C.jsx)(d.EuiButton,{fill:!0,onClick:()=>a(Object(y.a)(j,{name:n.name}))},Object(C.jsx)(ie.FormattedMessage,{id:"xpack.enterpriseSearch.analytics.collections.collectionsView.list.exploreButton",defaultMessage:"Explore all"}))))},nt=[{id:Ie.Searches,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.searches",{defaultMessage:"Searches"})},{id:Ie.NoResults,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.noResults",{defaultMessage:"No results"})},{id:Ie.Clicks,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.clicks",{defaultMessage:"Click"})},{id:Ie.Sessions,name:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.charts.sessions",{defaultMessage:"Sessions"})}],it=({analyticsCollection:e})=>{const{setTimeRange:t}=Object(u.useActions)(ae),{timeRange:a,searchSessionId:n}=Object(u.useValues)(ae),[i,l]=Object(s.useState)(Ie.Searches);return Object(C.jsx)(P,{restrictWidth:!0,pageChrome:[null==e?void 0:e.name],analyticsName:null==e?void 0:e.name,pageViewTelemetry:"View Analytics Collection - Overview",pageHeader:{bottomBorder:!1,pageTitle:p.i18n.translate("xpack.enterpriseSearch.analytics.collectionsView.title",{defaultMessage:"Overview"}),rightSideItems:[Object(C.jsx)(me,null)]}},Object(C.jsx)(_e,{analyticsCollection:e}),Object(C.jsx)(d.EuiSpacer,null),Object(C.jsx)(d.EuiFlexGroup,{direction:"column"},Object(C.jsx)(d.EuiFlexGroup,{gutterSize:"m"},nt.map((({name:t,id:s})=>Object(C.jsx)(et,{key:s,id:`analytics-collection-metric-${e.name}-${s}`,isSelected:i===s,name:t,onClick:e=>{var t;null===(t=e.currentTarget)||void 0===t||t.blur(),l(s)},collection:e,timeRange:a,searchSessionId:n,getFormula:Ae.bind(null,s)})))),Object(C.jsx)(Ue,{id:"analytics-collection-chart-"+e.name,collection:e,timeRange:a,setTimeRange:t,searchSessionId:n,selectedChart:i,setSelectedChart:l}),Object(C.jsx)(st,{filterBy:i})))},lt=()=>{Object(u.useMountedLogic)(ae),Object(u.useMountedLogic)(G);const{fetchAnalyticsCollection:e}=Object(u.useActions)($),{analyticsCollection:t,isLoading:a}=Object(u.useValues)($),{name:n}=Object(o.useParams)();return Object(s.useEffect)((()=>{e(n)}),[]),t?Object(C.jsx)(i.a,null,Object(C.jsx)(l.b,{exact:!0,path:b},Object(C.jsx)(it,{analyticsCollection:t})),Object(C.jsx)(l.b,{exact:!0,path:g},Object(C.jsx)(Ve,{analyticsCollection:t})),Object(C.jsx)(l.b,{exact:!0,path:j},Object(C.jsx)(Oe,null))):Object(C.jsx)(P,{pageChrome:[],restrictWidth:!0,isLoading:a},Object(C.jsx)(d.EuiEmptyPrompt,{iconType:"search",title:Object(C.jsx)("h2",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.collectionNotFoundState.headingTitle",{defaultMessage:"You may have deleted this analytics collection"})),body:Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.collectionsView.collectionNotFoundState.subHeading",{defaultMessage:"An analytics collection provides a place to store the analytics events for any given search application you are building. Create a new collection to get started."})),actions:[Object(C.jsx)(V,null)]}))};var ct=a(60),rt=a(133),ot=a(35),ut=function(e){return e.INCREASE="increase",e.DECREASE="decrease",e.CONSTANT="constant",e}(ut||{});const dt="hitsTotal",pt="metrics",mt="percentage",bt="trend",gt="timeline",jt="values",ht={data:[],isLoading:!0,metric:null,secondaryMetric:null},yt=$e((({collection:e,isLoading:t,isCreatedByEngine:a,subtitle:s,data:i,metric:l,secondaryMetric:c})=>{const{euiTheme:r}=Object(d.useEuiTheme)(),{history:o,navigateToUrl:m}=Object(u.useValues)(O.a),g=(e=>({badge:{".euiBadge__text":{color:e.colors.mediumShade},color:e.colors.subduedText,cursor:"inherit"},card:{"& .euiCard__titleAnchor":{alignItems:"start",display:"flex",gap:e.size.s,justifyContent:"space-between"},"&:hover":{"&__text":{color:e.colors.subduedText},".euiBadge":{color:e.colors.text},".euiCard__titleAnchor":{textDecoration:"none !important"}},height:200,overflow:"hidden",position:"relative",width:"100%"},chart:{".euiPanel:hover &":{transform:"scale(1.03)"},bottom:0,left:0,position:"absolute !important",right:0,transition:`transform ${e.animation.normal}`},footer:{position:"relative",zIndex:1},subtitle:{fontWeight:e.font.weight.light,position:"relative",zIndex:1},title:Object(C.css)(Object(d.euiTextTruncate)(),";","")}))(r),j=(e=>e&&e>0?ut.INCREASE:e&&e<0?ut.DECREASE:ut.CONSTANT)(c),h=(e=>({[ut.DECREASE]:{area:De.euiThemeVars.euiColorVis7_behindText,areaOpacity:.2,icon:"sortDown",line:De.euiThemeVars.euiColorVis7,lineOpacity:.5,text:"#996130"},[ut.CONSTANT]:{area:e.colors.mediumShade,areaOpacity:.2,icon:"minus",line:e.colors.mediumShade,lineOpacity:.5,text:e.colors.darkShade},[ut.INCREASE]:{area:De.euiThemeVars.euiColorVis0_behindText,areaOpacity:.2,icon:"sortUp",line:De.euiThemeVars.euiColorVis0,lineOpacity:.5,text:"#387765"}}))(r)[j],x=Object(y.a)(b,{name:e.name});return Object(C.jsx)(d.EuiCard,{titleSize:"s",titleElement:"h4",title:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)("span",{css:g.title},e.name),a&&Object(C.jsx)(d.EuiBadge,{color:"hollow",iconType:"link",css:g.badge},p.i18n.translate("xpack.enterpriseSearch.analytics.collection.badge",{defaultMessage:"Engine"}))),textAlign:"left",css:g.card,description:Object(C.jsx)("span",{css:g.subtitle},s),href:o.createHref(Object(ot.parsePath)(x)),onClick:e=>{null==e||e.preventDefault(),m(x)},footer:t?Object(C.jsx)(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center"},Object(C.jsx)(d.EuiLoadingChart,{size:"m"})):Object(C.jsx)(d.EuiFlexGroup,{direction:"column",gutterSize:"s",alignItems:"flexEnd",justifyContent:"flexEnd",css:g.footer},Object(C.jsx)(d.EuiText,{size:"s",color:h.text},null===c?p.i18n.translate("xpack.enterpriseSearch.analytics.collection.notAvailableLabel",{defaultMessage:"N/A"}):Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiIcon,{type:h.icon}),c,"%")),Object(C.jsx)(d.EuiText,{color:h.text},Object(C.jsx)("h2",null,null===l?p.i18n.translate("xpack.enterpriseSearch.analytics.collection.notAvailableLabel",{defaultMessage:"N/A"}):Object(C.jsx)(d.EuiI18nNumber,{value:l}))))},!t&&(null==i?void 0:i.some((([,e])=>e&&0!==e)))&&Object(C.jsx)(ze.Chart,{size:["100%",130],css:g.chart},Object(C.jsx)(ze.Settings,{baseTheme:ze.LEGACY_LIGHT_THEME,theme:{areaSeriesStyle:{area:{fill:h.area,opacity:h.areaOpacity},line:{opacity:h.lineOpacity,stroke:h.line,strokeWidth:2}},chartMargins:{bottom:0,left:0,right:0,top:0}},showLegend:!1,locale:p.i18n.getLocale()}),Object(C.jsx)(ze.Tooltip,{type:"none"}),Object(C.jsx)(ze.AreaSeries,{id:e.name,data:i,xAccessor:0,yAccessors:[1],xScaleType:ze.ScaleType.Time,yScaleType:ze.ScaleType.Linear,curve:ze.CurveType.CURVE_BASIS,yNice:!0})))}),{dataLoadTransform:(e,t)=>{var a,s,n,i,l,c,r,o,u,d,p,m,b;return e||!t?ht:{data:(null===(a=t.tables)||void 0===a||null===(s=a.tables[bt])||void 0===s||null===(n=s.rows)||void 0===n?void 0:n.map((e=>[e[gt],e[jt]])))||[],isLoading:!1,metric:null!==(i=null===(l=t.tables)||void 0===l||null===(c=l.tables[pt])||void 0===c||null===(r=c.rows)||void 0===r||null===(o=r[0])||void 0===o?void 0:o[dt])&&void 0!==i?i:null,secondaryMetric:null!==(u=null===(d=t.tables)||void 0===d||null===(p=d.tables[pt])||void 0===p||null===(m=p.rows)||void 0===m||null===(b=m[0])||void 0===b?void 0:b[mt])&&void 0!==u?u:null}},getAttributes:(e,t,{filterBy:a})=>{let s=t.insertOrReplaceFormulaColumn(mt,{formula:`round(((${Ae(a)}/${Ae(a,"previous")})-1) * 100)`,label:" "},{columnOrder:[],columns:{}},e);return s=t.insertOrReplaceFormulaColumn(dt,{formula:Ae(a),label:" "},s,e),{references:[{id:e.id,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"},{id:e.id,name:`indexpattern-datasource-layer-${bt}`,type:"index-pattern"},{id:e.id,name:`indexpattern-datasource-layer-${pt}`,type:"index-pattern"}],state:{datasourceStates:{formBased:{layers:{[bt]:t.insertOrReplaceFormulaColumn(jt,{formula:Ae(a)},{columnOrder:[],columns:{[gt]:{dataType:"date",isBucketed:!1,label:"Timestamp",operationType:"date_histogram",params:{includeEmptyRows:!0,interval:"auto"},scale:"ordinal",sourceField:null==e?void 0:e.timeFieldName}}},e),[pt]:s}}},filters:[],query:{language:"kuery",query:""},visualization:{layerId:[pt],layerType:"data",metricAccessor:dt,secondaryMetricAccessor:mt,trendlineLayerId:bt,trendlineMetricAccessor:jt,trendlineTimeAccessor:gt}},title:"",visualizationType:"lnsMetric"}},initialValues:ht});var xt=a(357),Ot=a.n(xt);const ft=({query:e})=>Object(C.jsx)(d.EuiEmptyPrompt,{icon:Object(C.jsx)(d.EuiImage,{size:294,src:Ot.a,alt:"icon"}),title:Object(C.jsx)("h2",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.notFound.headingTitle",{defaultMessage:"No results found for “{query}”",values:{query:e}})),body:Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.notFound.subHeading",{defaultMessage:"Try searching for another term."}))}),St=[{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last7Days",{defaultMessage:"Last 7 days"}),start:"now-7d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last2Weeks",{defaultMessage:"Last 2 weeks"}),start:"now-14d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last30Days",{defaultMessage:"Last 30 days"}),start:"now-30d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last90Days",{defaultMessage:"Last 90 days"}),start:"now-90d"},{end:"now",label:p.i18n.translate("xpack.enterpriseSearch.analytics..units.quickRange.last1Year",{defaultMessage:"Last 1 year"}),start:"now-1y"}],vt=({collections:e,isSearching:t,onSearch:a})=>{var n;const{euiTheme:i}=Object(d.useEuiTheme)(),l=(e=>({button:{"&.euiButtonGroupButton":{"&:focus-within":{outline:"none !important",textDecoration:"none !important"},height:38}},buttonGroup:{".euiButtonGroup__buttons":{backgroundColor:e.colors.emptyShade,height:40}},newCollection:{background:"none",border:e.border.thin}}))(i),c=Object(s.useMemo)((()=>[{css:[l.button],id:Ie.Searches,label:p.i18n.translate("xpack.enterpriseSearch.analytics.filtering.searches",{defaultMessage:"Searches"})},{css:[l.button],id:Ie.NoResults,label:p.i18n.translate("xpack.enterpriseSearch.analytics.filtering.noResults",{defaultMessage:"No results"})},{css:[l.button],id:Ie.Clicks,label:p.i18n.translate("xpack.enterpriseSearch.analytics.filtering.clicks",{defaultMessage:"Clicks"})},{css:[l.button],id:Ie.Sessions,label:p.i18n.translate("xpack.enterpriseSearch.analytics.filtering.sessions",{defaultMessage:"Sessions"})}]),[l.button]),[r,o]=Object(s.useState)(c[0].id),[u,m]=Object(s.useState)(""),[b,g]=Object(s.useState)({from:St[0].start,to:St[0].end}),j=null===(n=c.find((({id:e})=>e===r)))||void 0===n?void 0:n.label;return Object(C.jsx)(d.EuiFlexGroup,{direction:"column"},Object(C.jsx)(d.EuiPanel,{color:"subdued",borderRadius:"none",hasShadow:!1},Object(C.jsx)(d.EuiFlexGroup,null,Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(d.EuiFieldSearch,{placeholder:p.i18n.translate("xpack.enterpriseSearch.analytics.searchPlaceholder",{defaultMessage:"Search collection names"}),value:u,onChange:e=>{m(e.target.value)},isLoading:t,onSearch:a,incremental:!0,fullWidth:!0}))),Object(C.jsx)(d.EuiSpacer,null),Object(C.jsx)(d.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiButtonGroup,{css:l.buttonGroup,onChange:e=>o(e),color:"primary",buttonSize:"compressed",idSelected:r,isFullWidth:!0,options:c,legend:"Filter Collection"})),Object(C.jsx)(d.EuiFlexItem,{grow:!1},Object(C.jsx)(d.EuiSuperDatePicker,{start:b.from,end:b.to,onTimeChange:({start:e,end:t})=>{g({from:e,to:t})},showUpdateButton:!1,width:"full",commonlyUsedRanges:St})))),e.length?Object(C.jsx)(d.EuiFlexGrid,{columns:3},e.map((e=>Object(C.jsx)(yt,{key:e.name,id:`collection-card-${e.name}`,collection:e,subtitle:j,filterBy:r,timeRange:b})))):Object(C.jsx)(ft,{query:u}),Object(C.jsx)(V,{render:e=>Object(C.jsx)(d.EuiButton,{iconType:"plusInCircleFilled",css:l.newCollection,onClick:e},p.i18n.translate("xpack.enterpriseSearch.analytics.createNewCollection",{defaultMessage:"Create new collection"}))}))},kt=Object(f.a)(["analytics","analytics_collections_api_logic"],(async({query:e=""})=>{const{http:t}=S.a.values;return await t.get("/internal/enterprise_search/analytics/collections",{query:{query:e}})})),Tt=Object(u.kea)({actions:{fetchAnalyticsCollections:!0,searchAnalyticsCollections:e=>({query:e})},connect:{actions:[kt,["makeRequest"]],values:[kt,["data","status"]]},listeners:({actions:e})=>({fetchAnalyticsCollections:()=>{e.makeRequest({})},searchAnalyticsCollections:async({query:t},a)=>{t&&await a(200),e.makeRequest({query:t})}}),path:["enterprise_search","analytics","collections"],reducers:{isSearchRequest:[!1,{searchAnalyticsCollections:()=>!0}],searchQuery:["",{searchAnalyticsCollections:(e,{query:t})=>t}]},selectors:({selectors:e})=>({analyticsCollections:[()=>[e.data],e=>e||[]],hasNoAnalyticsCollections:[()=>[e.analyticsCollections,e.searchQuery],(e,t)=>0===e.length&&!t],isFetching:[()=>[e.status,e.isSearchRequest],(e,t)=>[h.a.LOADING,h.a.IDLE].includes(e)&&!t],isSearching:[()=>[e.status,e.isSearchRequest],(e,t)=>h.a.LOADING===e&&t]})}),Ct=()=>Object(C.jsx)(d.EuiEmptyPrompt,{icon:Object(C.jsx)(d.EuiImage,{size:294,src:Ot.a,alt:"icon"}),layout:"horizontal",color:"plain",title:Object(C.jsx)("h2",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.emptyState.headingTitle",{defaultMessage:"Create your first Collection"})),body:Object(C.jsx)("p",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.emptyState.subHeading",{defaultMessage:"Collections are required to store analytics events for your search application."})),actions:[Object(C.jsx)(V,null)],footer:Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiTitle,{size:"xxs"},Object(C.jsx)("span",null,p.i18n.translate("xpack.enterpriseSearch.analytics.collections.emptyState.footerText",{defaultMessage:"Want to learn more?"})))," ",Object(C.jsx)(d.EuiLink,{href:Se.a.behavioralAnalytics,target:"_blank",external:!0},p.i18n.translate("xpack.enterpriseSearch.analytics.collections.emptyState.footerLink",{defaultMessage:"Read documentation"})))}),Et=()=>{const{fetchAnalyticsCollections:e,searchAnalyticsCollections:t}=Object(u.useActions)(Tt),{analyticsCollections:a,hasNoAnalyticsCollections:i,isFetching:l,isSearching:c}=Object(u.useValues)(Tt),{isCloud:r}=Object(u.useValues)(O.a),{hasPlatinumLicense:o}=Object(u.useValues)(ct.a),m=!r&&!o;return Object(s.useEffect)((()=>{m||e()}),[]),Object(C.jsx)(P,{pageChrome:[],restrictWidth:!0,isLoading:l&&!m,pageViewTelemetry:"Analytics Collections Overview",pageHeader:{description:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.pageDescription",{defaultMessage:"Dashboards and tools for visualizing end-user behavior and measuring the performance of your search applications. Track trends over time, identify and investigate anomalies, and make optimizations."}),pageTitle:p.i18n.translate("xpack.enterpriseSearch.analytics.collections.pageTitle",{defaultMessage:"Behavioral Analytics"}),rightSideItems:[Object(C.jsx)(V,{disabled:m})]}},m?Object(C.jsx)(d.EuiFlexItem,null,Object(C.jsx)(rt.b,{feature:rt.a.ANALYTICS})):i&&!c?Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(d.EuiSpacer,{size:"l"}),Object(C.jsx)(Ct,null)):Object(C.jsx)(vt,{collections:a,isSearching:c,onSearch:t}))},wt=e=>{const{enterpriseSearchVersion:t,kibanaVersion:a}=e,s=Object(c.a)(t,a);return Object(C.jsx)(i.a,null,Object(C.jsx)(l.b,{exact:!0,path:"/"},s?Object(C.jsx)(r.a,{enterpriseSearchVersion:t,kibanaVersion:a}):Object(C.jsx)(Et,null)),Object(C.jsx)(l.b,{path:m},Object(C.jsx)(lt,null)))}},357:function(e,t,a){e.exports=a.p+"ccfbdf9dd2556f3e236cc2c77a775852.svg"},67:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=(e,t)=>{if(!e||!t)return!1;const[a,s]=e.split("."),[n,i]=t.split(".");return a!==n||s!==i}},70:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(17),n=a.n(s),i=a(1028),l=a(19),c=a(2),r=a(18);const o=({enterpriseSearchVersion:e,kibanaVersion:t})=>Object(r.jsx)(l.EuiEmptyPrompt,{iconType:"warning",iconColor:"danger",title:Object(r.jsx)("h2",null,c.i18n.translate("xpack.enterpriseSearch.versionMismatch.title",{defaultMessage:"Incompatible version error"})),titleSize:"l",body:Object(r.jsx)(n.a.Fragment,null,c.i18n.translate("xpack.enterpriseSearch.versionMismatch.body",{defaultMessage:"Your Kibana and Enterprise Search versions do not match. To access Enterprise Search, use the same major and minor version for each service."}),Object(r.jsx)(l.EuiSpacer,null),Object(r.jsx)("div",null,c.i18n.translate("xpack.enterpriseSearch.versionMismatch.enterpriseSearchVersionText",{defaultMessage:"Enterprise Search version: {enterpriseSearchVersion}",values:{enterpriseSearchVersion:e}})),Object(r.jsx)("div",null,c.i18n.translate("xpack.enterpriseSearch.versionMismatch.kibanaVersionText",{defaultMessage:"Kibana version: {kibanaVersion}",values:{kibanaVersion:t}})))}),u=e=>Object(r.jsx)(i.a,{isEmptyState:!0},Object(r.jsx)(o,e))},767:function(e,t,a){e.exports=a(13)(3419)}}]);