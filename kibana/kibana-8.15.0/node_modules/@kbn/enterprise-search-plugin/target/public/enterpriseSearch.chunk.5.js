/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.enterpriseSearch_bundle_jsonpfunction=window.enterpriseSearch_bundle_jsonpfunction||[]).push([[5],{311:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(51),i=a(45);const r=Object(s.a)(["overview","api_keys_api_logic"],(async()=>{const{http:e}=i.a.values;return await e.get("/internal/enterprise_search/api_keys")}))},385:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var s=a(17),i=a.n(s),r=a(18),n=a(44),l=a(19),c=a(2),o=a(55),u=a(51),p=a(45);const d=Object(u.a)(["overview","create_api_key_api_logic"],(async e=>{const{http:t}=p.a.values;return await t.post("/internal/enterprise_search/api_keys",{body:JSON.stringify(e)})}));var j=a(48),x=a(20);const b=({isLoading:e,name:t,user:a,expires:s,onChangeName:i,onChangeExpires:n})=>{let o;return s&&(o=new Date,o.setDate(o.getDate()+parseInt(s,10))),Object(r.jsx)(l.EuiForm,null,Object(r.jsx)(l.EuiFormRow,{fullWidth:!0,isInvalid:!t,helpText:c.i18n.translate("xpack.enterpriseSearch.apiKey.nameFieldHelpText",{defaultMessage:"A good name makes it clear what your API key does."}),label:c.i18n.translate("xpack.enterpriseSearch.apiKey.nameFieldLabel",{defaultMessage:"Name"})},Object(r.jsx)(l.EuiFieldText,{fullWidth:!0,isLoading:e,value:t,onChange:e=>i(e.currentTarget.value),"data-test-subj":"create-api-key-name"})),Object(r.jsx)(l.EuiFormRow,{fullWidth:!0,helpText:c.i18n.translate("xpack.enterpriseSearch.apiKey.userFieldHelpText",{defaultMessage:"ID of the user creating the API key."}),label:c.i18n.translate("xpack.enterpriseSearch.apiKey.userFieldLabel",{defaultMessage:"User"})},Object(r.jsx)(l.EuiFieldText,{"data-test-subj":"enterpriseSearchBasicSetupFormFieldText",fullWidth:!0,disabled:!0,value:a})),Object(r.jsx)(l.EuiFormRow,{fullWidth:!0,labelAppend:Object(r.jsx)(l.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd",alignItems:"center"},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiIcon,{type:"warning",size:"s",color:"subdued"})),Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiText,{color:"subdued",size:"xs"},c.i18n.translate("xpack.enterpriseSearch.apiKey.expiresFieldHelpText",{defaultMessage:"API keys should be rotated regularly."})))),label:c.i18n.translate("xpack.enterpriseSearch.apiKey.expiresFieldLabel",{defaultMessage:"Expires"})},Object(r.jsx)(l.EuiRadioGroup,{options:[{id:"never",label:c.i18n.translate("xpack.enterpriseSearch.apiKey.expiresField.neverLabel",{defaultMessage:"Never"}),"data-test-subj":"create-api-key-expires-never-radio"},{id:"days",label:c.i18n.translate("xpack.enterpriseSearch.apiKey.expiresField.daysLabel",{defaultMessage:"in days"}),"data-test-subj":"create-api-key-expires-days-radio"}],idSelected:null===s?"never":"days",onChange:e=>n("never"===e?null:"60"),"data-test-subj":"create-api-key-expires-radio"})),null!==s&&Object(r.jsx)(l.EuiFormRow,{fullWidth:!0,helpText:Object(r.jsx)(x.FormattedMessage,{id:"xpack.enterpriseSearch.apiKey.expiresHelpText",defaultMessage:"This API Key will expire on {expirationDate}",values:{expirationDate:Object(r.jsx)("strong",null,Object(r.jsx)(x.FormattedDate,{year:"numeric",month:"long",day:"numeric",value:o}))}})},Object(r.jsx)(l.EuiFieldNumber,{fullWidth:!0,disabled:e,append:c.i18n.translate("xpack.enterpriseSearch.apiKey.expiresFieldUnit",{defaultMessage:"days"}),placeholder:"1",defaultValue:s,min:1,onChange:e=>n(e.currentTarget.value),"data-test-subj":"create-api-key-expires-days-number-field"})))};var h=a(30),O=a(10);const g=({metadata:e,onChangeMetadata:t,error:a})=>Object(r.jsx)("div",{"data-test-subj":"create-api-metadata-code-editor-container"},Object(r.jsx)(l.EuiLink,{"data-test-subj":"enterpriseSearchMetadataFormLearnHowToStructureRoleMetadataLink",href:O.a.apiKeyMetadata,target:"_blank"},c.i18n.translate("xpack.enterpriseSearch.apiKey.metadataLinkLabel",{defaultMessage:"Learn how to structure role metadata"})),Object(r.jsx)(l.EuiSpacer,null),a&&Object(r.jsx)(l.EuiText,{size:"s",color:"danger"},Object(r.jsx)("p",null,a)),Object(r.jsx)(h.CodeEditorField,{allowFullScreen:!0,fullWidth:!0,height:"600px",languageId:"json",isCopyable:!0,onChange:e=>t(e),value:e}));var y=a(3);const S=({roleDescriptors:e,onChangeRoleDescriptors:t,error:a})=>Object(r.jsx)("div",{"data-test-subj":"create-api-role-descriptors-code-editor-container"},Object(r.jsx)(l.EuiLink,{"data-test-subj":"serverlessSearchSecurityPrivilegesFormLearnHowToStructureRoleDescriptorsLink",href:y.a.roleDescriptors,target:"_blank"},c.i18n.translate("xpack.enterpriseSearch.apiKey.roleDescriptorsLinkLabel",{defaultMessage:"Learn how to structure role descriptors"})),Object(r.jsx)(l.EuiSpacer,null),a&&Object(r.jsx)(l.EuiText,{size:"s",color:"danger"},Object(r.jsx)("p",null,a)),Object(r.jsx)(h.CodeEditorField,{allowFullScreen:!0,fullWidth:!0,height:"600px",languageId:"json",isCopyable:!0,onChange:e=>t(e),value:e})),E='{\n  "enterprise_search": {\n    "indices": [{\n      "names": ["*"],\n      "privileges": [\n        "all"\n      ]\n    }]\n  }\n}',f='{\n  "application": "myapp"\n}',m=c.i18n.translate("xpack.enterpriseSearch.cancel",{defaultMessage:"Cancel"}),k=(c.i18n.translate("xpack.enterpriseSearch.edit",{defaultMessage:"Edit"}),c.i18n.translate("xpack.enterpriseSearch.save",{defaultMessage:"Save"}),c.i18n.translate("xpack.enterpriseSearch.required",{defaultMessage:"Required"})),v=c.i18n.translate("xpack.enterpriseSearch.enabled",{defaultMessage:"Enabled"}),F=c.i18n.translate("xpack.enterpriseSearch.disabled",{defaultMessage:"Disabled"}),M=c.i18n.translate("xpack.enterpriseSearch.invalidJsonError",{defaultMessage:"Invalid JSON"});var I={name:"1e25on7",styles:".euiStep__content{padding-bottom:0;}"};const C=({onClose:e})=>{var t;const{euiTheme:a}=Object(l.useEuiTheme)(),[u,p]=Object(s.useState)(""),[x,h]=Object(s.useState)("60"),[O,y]=Object(s.useState)(E),[C,w]=Object(s.useState)(void 0),[T,z]=Object(s.useState)(f),[K,A]=Object(s.useState)(void 0),[L,_]=Object(s.useState)(!1),[P,D]=Object(s.useState)("closed"),[R,V]=Object(s.useState)(!1),[B,N]=Object(s.useState)("closed"),{user:W}=Object(n.useValues)(j.a),{makeRequest:G,apiReset:H}=Object(n.useActions)(d),{data:J,error:q,status:U}=Object(n.useValues)(d),Y=U===o.a.LOADING,$=(null==W?void 0:W.full_name)||(null==W?void 0:W.username)||(null==W?void 0:W.email)||"",Q=Object(s.useRef)(null);Object(s.useEffect)((()=>{var e;J&&Q&&(null===(e=Q.current)||void 0===e||e.scrollIntoView())}),[J,Q]);const X=()=>{H(),e()};return Object(r.jsx)(l.EuiFlyout,{onClose:X,css:Object(r.css)("max-width:calc(",a.size.xxxxl," * 10);","")},Object(r.jsx)(l.EuiFlyoutHeader,{hasBorder:!0},Object(r.jsx)(l.EuiTitle,{size:"m"},Object(r.jsx)("h2",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.flyoutTitle",{defaultMessage:"Create an API key"})))),Object(r.jsx)(l.EuiFlyoutBody,null,Object(r.jsx)("div",{ref:Q}),J&&Object(r.jsx)(i.a.Fragment,null,Object(r.jsx)(l.EuiSpacer,null),Object(r.jsx)(l.EuiPanel,{color:"success","data-test-subj":"api-key-create-success-panel"},Object(r.jsx)(l.EuiStep,{css:I,status:"complete",headingElement:"h3",title:c.i18n.translate("xpack.enterpriseSearch.apiKey.apiKeyStepTitle",{defaultMessage:"Store this API key"}),titleSize:"xs"},Object(r.jsx)(l.EuiText,null,c.i18n.translate("xpack.enterpriseSearch.apiKey.apiKeyStepDescription",{defaultMessage:"You'll only see this key once, so save it somewhere safe. We don't store your API keys, so if you lose a key you'll need to generate a replacement."})),Object(r.jsx)(l.EuiSpacer,{size:"s"}),Object(r.jsx)(l.EuiCodeBlock,{isCopyable:!0,"data-test-subj":"api-key-created-key-codeblock"},JSON.stringify(J,void 0,2)))),Object(r.jsx)(l.EuiSpacer,null)),q&&Object(r.jsx)(l.EuiCallOut,{color:"danger",iconType:"warning",title:c.i18n.translate("xpack.enterpriseSearch.apiKey.flyout.errorTitle",{defaultMessage:"Error creating API key"}),"data-test-subj":"create-api-key-error-callout"},null===(t=q.body)||void 0===t?void 0:t.message),Object(r.jsx)(l.EuiPanel,{hasBorder:!0},Object(r.jsx)(l.EuiAccordion,{id:"apiKey.setup",paddingSize:"l",initialIsOpen:!0,buttonContent:Object(r.jsx)("div",null,Object(r.jsx)(l.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiIcon,{type:"gear"})),Object(r.jsx)(l.EuiFlexItem,null,Object(r.jsx)(l.EuiTitle,{size:"xs"},Object(r.jsx)("h4",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.setup.title",{defaultMessage:"Setup"}))))),Object(r.jsx)(l.EuiSpacer,{size:"xs"}),Object(r.jsx)(l.EuiText,{color:"subdued",size:"xs"},Object(r.jsx)("p",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.setup.description",{defaultMessage:"Basic configuration details to create your API key."})))),extraAction:Object(r.jsx)(l.EuiBadge,{color:"hollow"},k)},Object(r.jsx)(l.EuiSpacer,{size:"s"}),Object(r.jsx)(b,{isLoading:Y,name:u,user:$,expires:x,onChangeName:e=>p(e),onChangeExpires:e=>h(e)}))),Object(r.jsx)(l.EuiSpacer,{size:"l"}),Object(r.jsx)(l.EuiPanel,{hasBorder:!0},Object(r.jsx)(l.EuiAccordion,{id:"apiKey.privileges",paddingSize:"l",buttonContent:Object(r.jsx)("div",{style:{paddingRight:a.size.s}},Object(r.jsx)(l.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiIcon,{type:"lock"})),Object(r.jsx)(l.EuiFlexItem,null,Object(r.jsx)(l.EuiTitle,{size:"xs"},Object(r.jsx)("h4",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.privileges.title",{defaultMessage:"Security Privileges"}))))),Object(r.jsx)(l.EuiSpacer,{size:"xs"}),Object(r.jsx)(l.EuiText,{color:"subdued",size:"xs"},Object(r.jsx)("p",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.privileges.description",{defaultMessage:"Control access to specific Elasticsearch APIs and resources using predefined roles or custom privileges per API key."})))),extraAction:Object(r.jsx)(l.EuiSwitch,{label:L?v:F,checked:L,onChange:e=>{const t=e.target.checked;_(t),D(t?"open":"closed"),t&&y(E)},"data-test-subj":"create-api-role-descriptors-switch"}),forceState:P,onToggle:e=>{L&&D(e?"open":"closed")}},Object(r.jsx)(l.EuiSpacer,{size:"s"}),Object(r.jsx)(S,{roleDescriptors:O,onChangeRoleDescriptors:y,error:C}))),Object(r.jsx)(l.EuiSpacer,{size:"l"}),Object(r.jsx)(l.EuiPanel,{hasBorder:!0},Object(r.jsx)(l.EuiAccordion,{id:"apiKey.metadata",paddingSize:"l",buttonContent:Object(r.jsx)("div",{style:{paddingRight:a.size.s}},Object(r.jsx)(l.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiIcon,{type:"visVega"})),Object(r.jsx)(l.EuiFlexItem,null,Object(r.jsx)(l.EuiTitle,{size:"xs"},Object(r.jsx)("h4",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.metadata.title",{defaultMessage:"Metadata"}))))),Object(r.jsx)(l.EuiSpacer,{size:"xs"}),Object(r.jsx)(l.EuiText,{color:"subdued",size:"xs"},Object(r.jsx)("p",null,c.i18n.translate("xpack.enterpriseSearch.apiKey.metadata.description",{defaultMessage:"Use configurable key-value pairs to add information about the API key or customize Elasticsearch resource access."})))),extraAction:Object(r.jsx)(l.EuiSwitch,{label:R?v:F,checked:R,onChange:e=>{const t=e.target.checked;V(t),N(t?"open":"closed"),t&&z(f)},"data-test-subj":"create-api-metadata-switch"}),forceState:B,onToggle:e=>{R&&N(e?"open":"closed")}},Object(r.jsx)(l.EuiSpacer,{size:"s"}),Object(r.jsx)(g,{metadata:T,onChangeMetadata:z,error:K})))),Object(r.jsx)(l.EuiFlyoutFooter,null,Object(r.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiButtonEmpty,{isDisabled:Y,onClick:X,"data-test-subj":"create-api-key-cancel"},m)),Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiFlexGroup,{justifyContent:"flexEnd"},Object(r.jsx)(l.EuiFlexItem,null,Object(r.jsx)(l.EuiButton,{fill:!0,disabled:!u,isLoading:Y,onClick:()=>{let e,t;if(L)try{e=O.length>0?JSON.parse(O):void 0}catch(e){return void w(M)}if(C&&w(void 0),R)try{t=T.length>0?JSON.parse(T):void 0}catch(e){return void A(M)}K&&A(void 0),G({expiration:null!==x?`${x}d`:void 0,metadata:t,name:u,role_descriptors:e})},"data-test-subj":"create-api-key-submit"},c.i18n.translate("xpack.enterpriseSearch.apiKey.flyOutCreateLabel",{defaultMessage:"Create API Key"}))))))))}},67:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s=(e,t)=>{if(!e||!t)return!1;const[a,s]=e.split("."),[i,r]=t.split(".");return a!==i||s!==r}},70:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(17),i=a.n(s),r=a(1028),n=a(19),l=a(2),c=a(18);const o=({enterpriseSearchVersion:e,kibanaVersion:t})=>Object(c.jsx)(n.EuiEmptyPrompt,{iconType:"warning",iconColor:"danger",title:Object(c.jsx)("h2",null,l.i18n.translate("xpack.enterpriseSearch.versionMismatch.title",{defaultMessage:"Incompatible version error"})),titleSize:"l",body:Object(c.jsx)(i.a.Fragment,null,l.i18n.translate("xpack.enterpriseSearch.versionMismatch.body",{defaultMessage:"Your Kibana and Enterprise Search versions do not match. To access Enterprise Search, use the same major and minor version for each service."}),Object(c.jsx)(n.EuiSpacer,null),Object(c.jsx)("div",null,l.i18n.translate("xpack.enterpriseSearch.versionMismatch.enterpriseSearchVersionText",{defaultMessage:"Enterprise Search version: {enterpriseSearchVersion}",values:{enterpriseSearchVersion:e}})),Object(c.jsx)("div",null,l.i18n.translate("xpack.enterpriseSearch.versionMismatch.kibanaVersionText",{defaultMessage:"Kibana version: {kibanaVersion}",values:{kibanaVersion:t}})))}),u=e=>Object(c.jsx)(r.a,{isEmptyState:!0},Object(c.jsx)(o,e))}}]);