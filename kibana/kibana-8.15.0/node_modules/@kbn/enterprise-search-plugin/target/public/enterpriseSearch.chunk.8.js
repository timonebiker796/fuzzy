/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.enterpriseSearch_bundle_jsonpfunction=window.enterpriseSearch_bundle_jsonpfunction||[]).push([[8],{1024:function(e,t,i){"use strict";i.r(t),i.d(t,"Applications",(function(){return zt}));var a=i(17),s=i.n(a),n=i(21),c=i(1021),r=i(1016),l=i(1),o=i(93),p=i(58),u=i(54),d=i.n(u),h=i(44),f=i(95),j=i.n(f),g=i(48),b=i(64),m=i(61),x=i(126),O=i(18);const y=()=>{const{searchPlayground:e}=Object(h.useValues)(g.a);return e?Object(O.jsx)(x.a,null,Object(O.jsx)(e.PlaygroundHeaderDocs,null)):null};var A=i(19),S=i(2),E=i(3);const _=()=>Object(O.jsx)(x.a,null,Object(O.jsx)(A.EuiButtonEmpty,{"data-telemetry-id":"entSearchApplications-searchApplicationHeader-documentationLink","data-test-subj":"search-applications-documentation-link",href:E.a.searchApplications,target:"_blank",iconType:"documents"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.header.searchApplicationsDoc",{defaultMessage:"Search Applications Doc"}))),v=({children:e,pageChrome:t,pageViewTelemetry:i,searchApplicationName:s,hasSchemaConflicts:n,restrictWidth:c=!0,docLink:r="search_application",...o})=>{const u=Object(m.c)(s,o.isEmptyState,n,!0),{renderHeaderActions:f,updateSideNavDefinition:x,getChromeStyle$:A}=Object(h.useValues)(g.a),S=j()(A(),"classic"),E=Object(a.useCallback)((e=>{if(!e)return;const t=e.find((e=>"build"===e.id));if(!t||!t.items)return;const i=t.items.find((e=>"searchApplications"===e.id));return null==i?void 0:i.items}),[]);return Object(a.useLayoutEffect)((()=>(f({playground:y,search_application:_}[r]),()=>{f()})),[]),Object(a.useEffect)((()=>{x({searchApps:E(u)})}),[u,E,x]),Object(a.useEffect)((()=>()=>{x({searchApps:void 0})}),[x]),Object(O.jsx)(m.a,d()({},o,{solutionNav:{items:"classic"===S?u:void 0,name:l.D},restrictWidth:c,setPageChrome:t&&Object(O.jsx)(b.e,{trail:t}),useEndpointHeaderActions:!1}),i&&Object(O.jsx)(p.b,{action:"viewed",metric:i}),e)},F=({pageChrome:e=[]})=>Object(O.jsx)(v,{pageChrome:[...e,"404"],customPageSections:!0},Object(O.jsx)(p.b,{action:"error",metric:"not_found"}),Object(O.jsx)(o.a,{productSupportUrl:l.c.SUPPORT_URL})),k=()=>{const{searchPlayground:e}=Object(h.useValues)(g.a);return e?Object(O.jsx)(e.PlaygroundProvider,null,Object(O.jsx)(v,{pageChrome:[S.i18n.translate("xpack.enterpriseSearch.content.playground.breadcrumb",{defaultMessage:"Playground"})],pageViewTelemetry:"Playground",restrictWidth:!1,panelled:!1,customPageSections:!0,bottomBorder:"extended",docLink:"playground"},Object(O.jsx)(e.Playground,null))):null};var M=i(6),T=i(56);const I=Object(h.kea)({actions:{setSearchApplicationName:e=>({name:e})},path:["enterprise_search","search_applications","search_application_name"],reducers:({props:e})=>{var t;return{searchApplicationName:[null!==(t=e.searchApplicationName)&&void 0!==t?t:"",{setSearchApplicationName:(e,{name:t})=>t}]}}});var C=i(55),w=i(49),N=i(115),R=i(51),P=i(45);const D=Object(R.a)(["search_applications","delete_search_application_api_logic"],(async({searchApplicationName:e})=>{const t=`/internal/enterprise_search/search_applications/${e}`;return await P.a.values.http.delete(t),{searchApplicationName:e}}),{showSuccessFlashFn:({searchApplicationName:e})=>S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.deleteSearchApplication.successToast.title",{defaultMessage:"{searchApplicationName} has been deleted",values:{searchApplicationName:e}})}),B=Object(R.a)(["searchApplications","search_applications_api_logic"],(async({meta:e,searchQuery:t})=>{const i={from:e.from,size:e.size,...t&&""!==t.trim()?{q:t+"*"}:{}};return{...await P.a.values.http.get("/internal/enterprise_search/search_applications",{query:i}),params:i}})),L={from:0,size:10,total:0},z=Object(h.kea)({actions:{closeDeleteSearchApplicationModal:!0,fetchSearchApplications:!0,onPaginate:e=>({pageNumber:e.page.index}),openDeleteSearchApplicationModal:e=>({searchApplication:e}),setIsFirstRequest:!0,setSearchQuery:e=>({searchQuery:e})},connect:{actions:[B,["makeRequest","apiSuccess","apiError"],D,["apiSuccess as deleteSuccess","makeRequest as deleteSearchApplication","apiError as deleteError"]],values:[B,["data","status"],D,["status as deleteStatus"]]},listeners:({actions:e,values:t})=>({deleteSuccess:()=>{e.closeDeleteSearchApplicationModal(),e.fetchSearchApplications()},fetchSearchApplications:async()=>{e.makeRequest(t.parameters)}}),path:["enterprise_search","search_applications","search_applications_list_logic"],reducers:({})=>({deleteModalSearchApplication:[null,{closeDeleteSearchApplicationModal:()=>null,openDeleteSearchApplicationModal:(e,{searchApplication:t})=>t}],isDeleteModalVisible:[!1,{closeDeleteSearchApplicationModal:()=>!1,openDeleteSearchApplicationModal:()=>!0}],isFirstRequest:[!0,{apiError:()=>!1,apiSuccess:()=>!1,setIsFirstRequest:()=>!0}],parameters:[{count:0,meta:L},{apiSuccess:(e,{count:t})=>{return{...e,count:t,meta:(i=e.meta,a=t,{...i,total:a})};var i,a},onPaginate:(e,{pageNumber:t})=>{return{...e,meta:(i=e.meta,a=t,{...i,from:a*i.size})};var i,a},setSearchQuery:(e,{searchQuery:t})=>({...e,searchQuery:t||void 0})}],searchQuery:["",{setSearchQuery:(e,{searchQuery:t})=>t}]}),selectors:({selectors:e})=>({deleteModalSearchApplicationName:[()=>[e.deleteModalSearchApplication],e=>{var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""}],hasNoSearchApplications:[()=>[e.data,e.results],(e,t)=>{var i,a,s;return null!==(i=0===(null==e||null===(a=e.params)||void 0===a?void 0:a.from)&&0===t.length&&!(null!=e&&null!==(s=e.params)&&void 0!==s&&s.q))&&void 0!==i&&i}],isDeleteLoading:[()=>[e.deleteStatus],e=>[C.a.LOADING].includes(e)],isLoading:[()=>[e.status,e.isFirstRequest],(e,t)=>[C.a.LOADING,C.a.IDLE].includes(e)&&t],meta:[()=>[e.parameters],e=>e.meta],results:[()=>[e.data],e=>{var t;return null!==(t=null==e?void 0:e.results)&&void 0!==t?t:[]}]})}),G=({searchApplicationName:e,onClose:t})=>{const{deleteSearchApplication:i}=Object(h.useActions)(z),{sendEnterpriseSearchTelemetry:a}=Object(h.useActions)(N.a),{isDeleteLoading:s}=Object(h.useValues)(z);return Object(O.jsx)(A.EuiConfirmModal,{title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.deleteSearchApplicationModal.title",{defaultMessage:"Permanently delete this search application?"}),onCancel:t,onConfirm:()=>{i({searchApplicationName:e}),a({action:"clicked",metric:"entSearchApplications-deleteSearchApplicationConfirm"})},cancelButtonText:w.e,confirmButtonText:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.deleteSearchApplicationModal.confirmButton.title",{defaultMessage:"Yes, delete this search application"}),buttonColor:"danger",isLoading:s},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.deleteSearchApplicationModal.delete.description",{defaultMessage:"Deleting your search application is not a reversible action. Your indices will not be affected. "})))};var q=i(112);const H=({error:e,notFound:t})=>{var i;return t||404===(null==e||null===(i=e.body)||void 0===i?void 0:i.statusCode)?Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(p.b,{action:"error",metric:"not_found"}),Object(O.jsx)(o.a,{backToContent:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.notFound.action1",{defaultMessage:"Back to Search Applications"}),backToLink:M.c,productSupportUrl:l.c.SUPPORT_URL})):Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(p.b,{action:"error",metric:"cannot_connect"}),Object(O.jsx)(q.b,null))},$=Object(R.a)(["search_applications","fetch_search_application_api_logic"],(async({name:e})=>{const t=`/internal/enterprise_search/search_applications/${e}`;return await P.a.values.http.get(t)})),V=Object(R.a)(["search_applications","fetch_search_application_field_capabilities_api_logic"],(async({name:e})=>{const t=`/internal/enterprise_search/search_applications/${e}/field_capabilities`;return await P.a.values.http.get(t)})),U=Object(h.kea)({actions:{closeDeleteSearchApplicationModal:!0,openDeleteSearchApplicationModal:!0},connect:{actions:[$,["makeRequest as fetchSearchApplication"],V,["makeRequest as fetchSearchApplicationSchema"],z,["deleteSuccess"]],values:[I,["searchApplicationName"],$,["data as searchApplicationData","status as fetchSearchApplicationApiStatus","error as fetchSearchApplicationApiError"],V,["data as searchApplicationSchemaData","status as fetchSearchApplicationSchemaApiStatus","error as fetchSearchApplicationSchemaApiError"]]},listeners:({actions:e})=>({deleteSuccess:()=>{e.closeDeleteSearchApplicationModal(),g.a.values.navigateToUrl(M.c)},fetchSearchApplication:({name:t})=>{e.fetchSearchApplicationSchema({name:t})}}),path:["enterprise_search","content","search_application_view_logic"],reducers:()=>({isDeleteModalVisible:[!1,{closeDeleteSearchApplicationModal:()=>!1,openDeleteSearchApplicationModal:()=>!0}]}),selectors:({selectors:e})=>({hasSchemaConflicts:[()=>[e.schemaFields],e=>e.some((e=>"conflict"===e.type))],isLoadingSearchApplication:[()=>[e.fetchSearchApplicationApiStatus,e.searchApplicationData],(e,t)=>e===C.a.IDLE||!t&&e===C.a.LOADING],isLoadingSearchApplicationSchema:[()=>[e.fetchSearchApplicationSchemaApiStatus],e=>[C.a.LOADING,C.a.IDLE].includes(e)],schemaFields:[()=>[e.searchApplicationSchemaData],e=>(null==e?void 0:e.fields)||[]]})});var K=i(20),Q=i(97);const W=Object(R.a)(["generate_search_application_api_key_logic"],(async({keyName:e,searchApplicationName:t})=>{const i=`/internal/enterprise_search/search_applications/${t}/api_key`;return await P.a.values.http.post(i,{body:JSON.stringify({keyName:e})})})),J=Object(h.kea)({actions:{setKeyName:e=>({keyName:e})},connect:{values:[W,["data","status"]]},path:["enterprise_search","search_applications","api","generate_api_key_modal"],reducers:()=>({keyName:["",{setKeyName:(e,{keyName:t})=>t}]}),selectors:({selectors:e})=>({apiKey:[()=>[e.data],e=>{var t;return(null==e||null===(t=e.apiKey)||void 0===t?void 0:t.encoded)||""}],isLoading:[()=>[e.status],e=>e===C.a.LOADING],isSuccess:[()=>[e.status],e=>e===C.a.SUCCESS]})}),Y=({onClose:e,searchApplicationName:t})=>{const{keyName:i,apiKey:n,isLoading:c,isSuccess:r}=Object(h.useValues)(J),{setKeyName:l}=Object(h.useActions)(J),{makeRequest:o}=Object(h.useActions)(W);return Object(a.useEffect)((()=>{l(`${t} read-only API key`)}),[t]),Object(O.jsx)(A.EuiModal,{onClose:e},Object(O.jsx)(A.EuiModalHeader,null,Object(O.jsx)(A.EuiModalHeaderTitle,null,S.i18n.translate("xpack.enterpriseSearch.searchApplication.searchApplication.api.generateApiKeyModal.title",{defaultMessage:"Create Search application read-only API Key"}))),Object(O.jsx)(A.EuiModalBody,null,Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiPanel,{hasShadow:!1,color:"primary"},Object(O.jsx)(A.EuiFlexGroup,{direction:"column"},Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiFlexGroup,{direction:"row",alignItems:"flexEnd"},r?Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiFormLabel,null,i),Object(O.jsx)(A.EuiSpacer,{size:"xs"}),Object(O.jsx)(A.EuiFlexGroup,{alignItems:"center"},Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiCodeBlock,{"aria-label":i,fontSize:"m",paddingSize:"m",color:"dark",isCopyable:!0},n)),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButtonIcon,{"data-telemetry-id":"entSearchApplications-api-generateSearchApplicationApiKeyModal-csvDownloadButton","aria-label":S.i18n.translate("xpack.enterpriseSearch.searchApplication.searchApplication.api.generateApiKeyModal.csvDownloadButton",{defaultMessage:"Download API key"}),iconType:"download",href:encodeURI(`data:text/csv;charset=utf-8,${n}`),download:`${i}.csv`})))):Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiFormRow,{label:"Name your API key",fullWidth:!0},Object(O.jsx)(A.EuiFieldText,{"data-telemetry-id":"entSearchApplications-api-generateSearchApplicationApiKeyModal-editName",fullWidth:!0,placeholder:"Type a name for your API key",onChange:e=>l(e.currentTarget.value),value:i,isLoading:c}))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButton,{"data-telemetry-id":"entSearchApplications-api-generateSearchApplicationApiKeyModal-generateApiKeyButton","data-test-subj":"generateApiKeyButton",iconSide:"left",iconType:"plusInCircle",fill:!0,onClick:()=>{o({keyName:i.trim(),searchApplicationName:t})},disabled:i.trim().length<=0},S.i18n.translate("xpack.enterpriseSearch.searchApplication.searchApplication.api.generateApiKeyModal.generateButton",{defaultMessage:"Generate read-only key"})))))),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiFlexGroup,{direction:"row"},Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiText,{size:"s",color:"#006bb8"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplication.searchApplication.api.generateApiKeyModal.apiKeyWarning",{defaultMessage:"Elastic does not store API keys. Once generated, you'll only be able to view the key one time. Make sure you save it somewhere secure. If you lose access to it you'll need to generate a new API key from this screen."})))))))))),Object(O.jsx)(A.EuiModalFooter,null,n?Object(O.jsx)(A.EuiButton,{"data-telemetry-id":"entSearchApplications-api-generateSearchApplicationApiKeyModal-done",fill:!0,onClick:e},S.i18n.translate("xpack.enterpriseSearch.searchApplication.searchApplication.api.generateApiKeyModal.done",{defaultMessage:"Done"})):Object(O.jsx)(A.EuiButtonEmpty,{"data-telemetry-id":"entSearchApplications-api-generateSearchApplicationApiKeyModal-cancel",onClick:e},S.i18n.translate("xpack.enterpriseSearch.searchApplication.searchApplication.api.generateApiKeyModal.cancel",{defaultMessage:"Cancel"}))))};var X=i(296);const Z=Object(h.kea)({actions:{closeGenerateModal:!0,openGenerateModal:!0},connect:{actions:[W,["apiReset"]],values:[W,["data as apiKeyData","status as apiKeyStatus"]]},listeners:({actions:e})=>({openGenerateModal:()=>{e.apiReset()}}),path:["enterprise_search","content","search_application_api_logic"],reducers:()=>({isGenerateModalOpen:[!1,{closeGenerateModal:()=>!1,openGenerateModal:()=>!0}]}),selectors:({selectors:e})=>({apiKey:[()=>[e.apiKeyStatus,e.apiKeyData],(e,t)=>e===C.a.SUCCESS?t.apiKey.encoded:null]})}),ee=(e,t,i)=>`\nimport Client from '@elastic/search-application-client'\n// or through CDN\n// const Client = window['SearchApplicationClient']\n\nconst request = Client(\n  ${t},\n  ${e},\n  ${i||"<YOUR_API_KEY>"},\n)\n\nconst results = await request()\n  .query('pizza')\n  .addParameter('myCustomParameter', 'example value')\n  .search()\n`,te=(e,t,i,a)=>`\ncurl --location --request POST '${e}/_application/search_application/${t}/_search' \\\n--header 'Authorization: apiKey ${i||"<YOUR_API_KEY>"}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '${JSON.stringify({params:a},null,2)}'`,ie=(e,t)=>`\nPOST /_application/search_application/${e}/_search\n${JSON.stringify({params:t},null,2)}\n`,ae=(e,t)=>`POST /_application/search_application/${e}/_search\n${JSON.stringify({params:t},null,2)}`,se=()=>{var e,t,i;const{application:a,share:n}=Object(h.useValues)(g.a),[c,r]=s.a.useState("apirequest"),{searchApplicationName:l}=Object(h.useValues)(U),{apiKey:o}=Object(h.useValues)(Z),p=Object(Q.a)(),u={query:"pizza",myCustomParameter:"example value"},d={apirequest:{code:ie(l,u),copy:!1,language:"http",title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.tab.consoleTitle",{defaultMessage:"Console"})},client:{code:ee(ne(p),l,o),copy:!0,language:"javascript",title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.tab.clientTitle",{defaultMessage:"Javascript Client"})},curl:{code:te(ne(p),l,o,u),copy:!0,language:"bash",title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.tab.curlTitle",{defaultMessage:"cURL"})}},f=null!=a&&null!==(e=a.capabilities)&&void 0!==e&&null!==(t=e.dev_tools)&&void 0!==t&&t.show?null==n||null===(i=n.url.locators.get("CONSOLE_APP_LOCATOR"))||void 0===i?void 0:i.useUrl({loadFrom:`data:text/plain,${Object(X.compressToEncodedURIComponent)(ae(l,u))}`},void 0,[]):null;return Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.description",defaultMessage:"Simplify your API calls. We recommend using the JavaScript client."}))),Object(O.jsx)(A.EuiSpacer,{size:"l"}),Object(O.jsx)(A.EuiTabs,null,Object.entries(d).map((([e,t])=>Object(O.jsx)(A.EuiTab,{key:e,isSelected:c===e,onClick:()=>r(e),"data-telemetry-id":`entSearchApplications-searchApi-integration-tab-${e}`},t.title)))),Object(O.jsx)(A.EuiSpacer,{size:"l"}),"client"===c&&Object(O.jsx)(A.EuiFlexGroup,{direction:"column"},Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiText,null,Object(O.jsx)("h5",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.installationTitle",{defaultMessage:"Installation"})))),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiText,{color:"inherit"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.npmInstallDescription",{defaultMessage:"Search application client is accessible from NPM package registry"})))),Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiCodeBlock,{isCopyable:!0,lang:"bash"},"npm install @elastic/search-application-client")),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiText,{color:"inherit"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.cdnInstallDescription",{defaultMessage:"or via CDN"})))),Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiCodeBlock,{isCopyable:!0,lang:"html"},'<script src="https://cdn.jsdelivr.net/npm/@elastic/search-application-client@latest"><\/script>')),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiText,{color:"inherit"},Object(O.jsx)("h5",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.clientUsageTitle",{defaultMessage:"Usage"})))),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiText,null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.clientUsageDescription",defaultMessage:"To get the most out of the JavaScript client, use the client's example template and follow our {searchapplicationSearchDocLink} on building a search experience.",values:{searchapplicationSearchDocLink:Object(O.jsx)(A.EuiLink,{href:E.a.searchApplicationsSearch},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step3.clientDocumenation",{defaultMessage:"how to guide"}))}})),Object(O.jsx)(A.EuiSpacer,{size:"m"}))),Object(O.jsx)(A.EuiCodeBlock,{isCopyable:d[c].copy,language:d[c].language},d[c].code),"apirequest"===c&&f&&Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiSpacer,{size:"s"}),Object(O.jsx)(A.EuiFlexGroup,{direction:"column",alignItems:"flexEnd"},Object(O.jsx)(A.EuiLink,{href:f,target:"_blank"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.consoleButton",defaultMessage:"Try in console"})))))},ne=e=>e.elasticsearchUrl||"http://localhost:9200",ce=()=>{const{searchApplicationName:e}=Object(h.useValues)(U),{isGenerateModalOpen:t}=Object(h.useValues)(Z),{openGenerateModal:i,closeGenerateModal:a}=Object(h.useActions)(Z),n=Object(Q.a)(),c=[{children:Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step1.setUpSearchtemplate.description",defaultMessage:"Your search application uses a {searchTemplateDocLink} to control the types of queries it accepts. Run the following command to view your current search template:",values:{searchTemplateDocLink:Object(O.jsx)(A.EuiLink,{href:E.a.searchTemplates},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step1.setUpSearchtemplate.searchTemplateDocLink",defaultMessage:"search template"}))}}))),Object(O.jsx)(A.EuiSpacer,{size:"l"}),Object(O.jsx)(A.EuiFlexGroup,null,Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiCodeBlock,{language:"markup",fontSize:"m",paddingSize:"m",isCopyable:!0},`GET _application/search_application/${e}/`))),Object(O.jsx)(A.EuiSpacer,{size:"l"}),Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step1.setUpSearchtemplate.warning",defaultMessage:"We provide a basic, default search template to get started, but you'll probably want to update it for your use case. Use the examples in our {searchTemplateExampleDoc} for inspiration.",values:{searchTemplateExampleDoc:Object(O.jsx)(A.EuiLink,{href:E.a.searchApplicationsTemplates},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step1.setUpSearchtemplate.warning.searchTemplateExampleDocLink",defaultMessage:"documentation"}))}})))),title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step1.setUpSearchtemplate.title",{defaultMessage:"Set up your search template"})},{children:Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step2.apiKeyWarning",defaultMessage:"This {apiKeyDocumentation} will only be able to access your Search endpoint.",values:{apiKeyDocumentation:Object(O.jsx)(A.EuiLink,{href:E.a.apiKeys},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step2.apiKeyWarning.documentationLink",defaultMessage:"API key"}))}}))),Object(O.jsx)(A.EuiSpacer,{size:"l"}),Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButton,{iconSide:"left",iconType:"plusInCircleFilled",onClick:i,"data-telemetry-id":"entSearchApplications-searchApi-step2-createApiKeyButton"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step2.createAPIKeyButton",{defaultMessage:"Create API Key"}))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButton,{iconSide:"left",iconType:"popout","data-telemetry-id":"entSearchApplications-searchApi-step2-viewKeysButton",onClick:()=>g.a.values.navigateToUrl("/app/management/security/api_keys",{shouldNotCreateHref:!0})},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step2.viewKeysButton",{defaultMessage:"View Keys"}))))),title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step2.title",{defaultMessage:"Generate and save API key"})},{children:Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step3.copyEndpointDescription",{defaultMessage:"Here's the URL for your endpoint:"}))),Object(O.jsx)(A.EuiSpacer,{size:"l"}),Object(O.jsx)(A.EuiFlexGroup,null,Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiCodeBlock,{language:"markup",fontSize:"m",paddingSize:"m",isCopyable:!0},`${ne(n)}/_application/search_application/${e}/_search`)))),title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step3.title",{defaultMessage:"Copy your Search endpoint"})},{children:Object(O.jsx)(se,null),title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.step4.title",{defaultMessage:"Learn how to call your endpoint"})}];return Object(O.jsx)(s.a.Fragment,null,t?Object(O.jsx)(Y,{onClose:a,searchApplicationName:e}):null,Object(O.jsx)(A.EuiCallOut,{iconType:"iInCircle",title:Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.searchApiCallout.title",defaultMessage:"What is Search API?"})},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.searchApiCallout.body",defaultMessage:"The {searchApiDocumentation} allows you to create a secure, public-facing search endpoint for your search application. This endpoint only accepts queries that match the parameters defined in your {searchTemplateDocumenation}.",values:{searchApiDocumentation:Object(O.jsx)(A.EuiLink,{"data-test-subj":"search-documentation-link",href:E.a.searchApplicationsSearchApi,"data-telemetry-id":"entSearchApplications-searchApi-documentation-viewDocumentaion"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.searchApiCallout.body.searchApiDocLink",{defaultMessage:"Search API"})),searchTemplateDocumenation:Object(O.jsx)(A.EuiLink,{"data-test-subj":"search-template-documentation-link",href:E.a.searchTemplates,"data-telemetry-id":"entSearchApplications-searchTemplate-documentation-viewDocumentaion"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.searchApiCallout.body.searchTemplateDocLink",{defaultMessage:"search template"}))}}),Object(O.jsx)(A.EuiSpacer,{size:"l"}),Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.searchApiCallout.searchApiLearnMore",defaultMessage:"{searchApiDocumentation}",values:{searchApiDocumentation:Object(O.jsx)(A.EuiLink,{"data-test-subj":"search-documentation-link",href:E.a.searchApplicationsSearchApi,target:"_blank","data-telemetry-id":"entSearchApplications-searchApi-learnMoreDocumentation-viewDocumentaion"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.searchApi.searchApiCallout.body.searchApiDocumentationLink",{defaultMessage:"Learn more about the Search API"}))}})),Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiSteps,{headingElement:"h2",steps:c}))};i(224);var re=i(298),le=i.n(re);const oe=()=>Object(O.jsx)(A.EuiPanel,{color:"transparent"},Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"spaceBetween",direction:"row"},Object(O.jsx)(A.EuiFlexGroup,{direction:"column"},Object(O.jsx)(A.EuiImage,{size:"l",float:"left",src:le.a,alt:""}),Object(O.jsx)(A.EuiText,null,Object(O.jsx)("h2",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.searchApplication.title",{defaultMessage:"Learn more about Search Applications"}))),Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.searchApplication.description",{defaultMessage:"Search Applications help make your Elasticsearch data easily searchable for end users."}))),Object(O.jsx)(A.EuiLink,{href:E.a.searchApplications,external:!0},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.searchApplication.readDocumentation",{defaultMessage:"Read our documentation"}))),Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"spaceBetween",direction:"column"},Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiPanel,{grow:!0,paddingSize:"l"},Object(O.jsx)(A.EuiFlexGroup,{direction:"row"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiIcon,{type:"lock",size:"l"})),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiTitle,{size:"s"},Object(O.jsx)(A.EuiText,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.manageAPIKeys.title",{defaultMessage:"Manage API Keys"}))))),Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",gutterSize:"m"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.manageAPIKeys.description",{defaultMessage:"API keys provide a secure way to control access to Elasticsearch data and functionalities, and to limit access to specific indices or actions."})))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiText,null,Object(O.jsx)(A.EuiLink,{href:E.a.apiKeys,external:!0},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.manageAPIKeys.learnMore",{defaultMessage:"Learn more"}))))))),Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiPanel,{grow:!0,paddingSize:"l"},Object(O.jsx)(A.EuiFlexGroup,{direction:"row"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiIcon,{type:"keyboard",size:"l"})),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiTitle,{size:"s"},Object(O.jsx)(A.EuiText,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.languageClients.title",{defaultMessage:"Build with language clients"}))))),Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",gutterSize:"m"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.languageClients.description",{defaultMessage:"Develop for Elasticsearch in your preferred programming languages through our first and third-party supported clients."})))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiText,null,Object(O.jsx)(A.EuiLink,{href:E.a.clientsGuide,external:!0},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.languageClients.learnMore",{defaultMessage:"Learn more"}))))))),Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiPanel,{grow:!0,paddingSize:"l"},Object(O.jsx)(A.EuiFlexGroup,{direction:"row"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiIcon,{type:"securitySignal",size:"l"})),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiTitle,{size:"s"},Object(O.jsx)(A.EuiText,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.searchInsights.title",{defaultMessage:"Search insights"}))))),Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",gutterSize:"m"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.searchInsights.description",{defaultMessage:"Gain insights into the performance of your search application with Behavioral Analytics."})))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiText,null,Object(O.jsx)(A.EuiLink,{href:E.a.behavioralAnalytics,external:!0},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.documentation.searchInsights.learnMore",{defaultMessage:"Learn more"})))))))))),pe=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.connect.pageTitle",{defaultMessage:"Connect"}),ue=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.connect.searchAPITabTitle",{defaultMessage:"Search API"}),de=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.connect.documentationTabTitle",{defaultMessage:"Documentation"}),he=Object.values(M.i),fe=e=>{switch(e){case M.i.SEARCHAPI:return ue;case M.i.DOCUMENTATION:return de;default:return e}},je=()=>{const{searchApplicationName:e,isLoadingSearchApplication:t,hasSchemaConflicts:i}=Object(h.useValues)(U),{connectTabId:a=M.i.SEARCHAPI}=Object(n.useParams)(),s=t=>()=>{g.a.values.navigateToUrl(Object(T.a)(M.d,{connectTabId:t,searchApplicationName:e}))};return he.includes(a)?Object(O.jsx)(v,{pageChrome:[e,pe,fe(a)],pageViewTelemetry:M.k.CONNECT,isLoading:t,pageHeader:{bottomBorder:!1,className:"searchApplicationHeaderBackgroundColor",pageTitle:pe,rightSideItems:[],tabs:[{isSelected:a===M.i.SEARCHAPI,label:ue,onClick:s(M.i.SEARCHAPI)},{isSelected:a===M.i.DOCUMENTATION,label:de,onClick:s(M.i.DOCUMENTATION)}]},searchApplicationName:e,hasSchemaConflicts:i},a===M.i.SEARCHAPI&&Object(O.jsx)(ce,null),a===M.i.DOCUMENTATION&&Object(O.jsx)(oe,null)):Object(O.jsx)(v,{pageChrome:[e,pe],pageViewTelemetry:M.k.CONNECT,isLoading:t,pageHeader:{bottomBorder:!1,className:"searchApplicationHeaderBackgroundColor",pageTitle:pe,rightSideItems:[]},searchApplicationName:e,hasSchemaConflicts:i},Object(O.jsx)(H,{notFound:!0}))};var ge=i(209),be=i.n(ge),me=i(77),xe=i(704),Oe=i.n(xe);const ye=Object(R.a)(["searchApplications","update_search_application_api_logic"],(async({name:e,indices:t,template:i})=>{const a=`/internal/enterprise_search/search_applications/${e}`;return await P.a.values.http.put(a,{body:JSON.stringify({indices:t,name:e,template:i})})})),Ae=Object(h.kea)({actions:{addIndicesToSearchApplication:e=>({indices:e}),closeAddIndicesFlyout:()=>!0,openAddIndicesFlyout:()=>!0,removeIndexFromSearchApplication:e=>({indexName:e})},connect:{actions:[U,["fetchSearchApplication"],ye,["makeRequest as updateSearchApplicationRequest","apiSuccess as searchApplicationUpdated"]],values:[U,["searchApplicationData","searchApplicationName","isLoadingSearchApplication"]]},listeners:({actions:e,values:t})=>({addIndicesToSearchApplication:({indices:i})=>{if(!t.searchApplicationData)return;const a=t.searchApplicationData.indices.map((e=>e.name)),s=Array.from(new Set([...a,...i]));e.updateSearchApplicationRequest({name:t.searchApplicationName,indices:s,template:t.searchApplicationData.template})},searchApplicationUpdated:()=>{e.fetchSearchApplication({name:t.searchApplicationName})},removeIndexFromSearchApplication:({indexName:i})=>{if(!t.searchApplicationData)return;const a=t.searchApplicationData.indices.filter((e=>e.name!==i)).map((e=>e.name));e.updateSearchApplicationRequest({name:t.searchApplicationName,indices:a,template:t.searchApplicationData.template})}}),path:["enterprise_search","content","search_application_indices_logic"],reducers:{addIndicesFlyoutOpen:[!1,{closeAddIndicesFlyout:()=>!1,openAddIndicesFlyout:()=>!0}]}});var Se=i(53);const Ee=({onClose:e,lastAPICall:t,searchApplicationName:i})=>{const[s,n]=Object(a.useState)("request"),c=JSON.stringify(t[s],null,2);return Object(O.jsx)(A.EuiFlyout,{onClose:e,size:"m"},Object(O.jsx)(A.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(A.EuiTitle,null,Object(O.jsx)("h2",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.apiCallFlyout.title",defaultMessage:"API Call"}))),Object(O.jsx)(A.EuiSpacer,{size:"s"}),Object(O.jsx)(A.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",style:{marginBottom:"-24px"}},Object(O.jsx)(A.EuiTabs,{bottomBorder:!1},Object(O.jsx)(A.EuiTab,{isSelected:"request"===s,onClick:()=>n("request")},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.apiCallFlyout.requestTab",defaultMessage:"Request"})),Object(O.jsx)(A.EuiTab,{isSelected:"response"===s,onClick:()=>n("response")},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.apiCallFlyout.responseTab",defaultMessage:"Response"}))),Object(O.jsx)(Se.d,{to:Object(T.a)(M.h,{searchApplicationName:i,tabId:M.k.CONNECT}),color:"primary",target:"_blank"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.apiCallFlyout.searchEndpointLink",defaultMessage:"Search endpoint"})))),Object(O.jsx)("div",{style:{blockSize:"100%"}},Object(O.jsx)(A.EuiCodeBlock,{overflowHeight:"100%",isCopyable:!0,isVirtualized:!0},c)))},_e=Object(h.kea)({connect:{actions:[V,["makeRequest as fetchSearchApplicationFieldCapabilities"]],values:[I,["searchApplicationName"],V,["data as searchApplicationFieldCapabilitiesData"]]},events:({actions:e,values:t})=>({afterMount:()=>{t.searchApplicationFieldCapabilitiesData||e.fetchSearchApplicationFieldCapabilities({name:t.searchApplicationName})}}),path:["enterprise_search","content","search_application_docs_explorer_logic"],selectors:({selectors:e})=>({fieldTypesByIndex:[()=>[e.searchApplicationFieldCapabilitiesData],e=>e?e.fields.reduce(((e,t)=>t.indices.reduce(((e,i)=>({...e,[i.name]:{...e[i.name]||{},[t.name]:i.type}})),e)),{}):{}],resultFields:[()=>[e.searchApplicationFieldCapabilitiesData],e=>e?Object.fromEntries(e.fields.filter((({metadata_field:e})=>!e)).map((({name:e})=>[e,{raw:{},snippet:{fallback:!0}}]))):{}],sortableFields:[()=>[e.searchApplicationFieldCapabilitiesData],e=>e?e.fields.filter((({metadata_field:e,aggregatable:t})=>t&&!e)).map((({name:e})=>e)).sort():[]]})}),ve=Object(a.createContext)({selectedDocument:null,setSelectedDocument:()=>{}}),Fe=({children:e})=>{const[t,i]=Object(a.useState)(null),s=Object(a.useMemo)((()=>({selectedDocument:t,setSelectedDocument:i})),[t,i]);return Object(O.jsx)(ve.Provider,{value:s},e)},ke=()=>Object(a.useContext)(ve);var Me=i(23),Te=i.n(Me);const Ie={iconType:"questionInCircle",color:"gray"},Ce={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function we({type:e,label:t,size:i="s",scripted:a,className:s,...n}){const c=Ce[e]||Ie;return Object(O.jsx)(A.EuiToken,d()({},c,{className:Te()("kbnFieldIcon",s),"aria-label":t||e,title:t||e,size:i,fill:a?"dark":void 0},n))}const Ne={integer:"number"},Re={object:{color:"euiColorVis3",iconType:"tokenObject"}},Pe=e=>{const t=Ne[e.type]||e.type,i=Re[t]||{};return Object(O.jsx)(we,d()({type:t},i))},De=e=>null!==e&&"object"==typeof e&&(e.hasOwnProperty("raw")||e.hasOwnProperty("snippet")),Be=(e,t="")=>De(e)&&"object"!=typeof e.raw?{[t]:e}:Object.keys(e).reduce(((i,a)=>{const s=t.length?t+".":"",n=e[a];return"object"==typeof n&&null!==n?Object.assign(i,Be(n,"raw"===a?t:s+a)):i[s+a]={raw:n},i}),{}),Le=e=>{const t=(e=>{const{_meta:{rawHit:{_index:t}}}=e;return t})(e),{_meta:i,...a}=(e=>{const{_meta:{rawHit:{__id:t}}}=e;return{...e,id:{raw:t}}})(e),s=(e=>{const t=Be(e);return Object.entries(t).map((([e,t])=>({field:e,value:t}))).sort(((e,t)=>e.field.localeCompare(t.field)))})(a);return{fields:s,index:t}},ze=({value:e})=>{const{euiTheme:t,colorMode:i}=Object(A.useEuiTheme)();if(De(e)){if(e.snippet){const[a]=e.snippet,s={DARK:.3,LIGHT:.1};return Object(O.jsx)("span",{dangerouslySetInnerHTML:{__html:a},css:Object(O.css)("& em{font-style:normal;font-weight:",t.font.weight.bold,";background-color:",Object(A.transparentize)(t.colors.primary,s[i]),";color:",t.colors.text,";}","")})}return Object(O.jsx)(ze,{value:e.raw})}return"string"==typeof e?Object(O.jsx)("span",null,e):Object(O.jsx)("span",null,JSON.stringify(e))},Ge=()=>{const{fieldTypesByIndex:e}=Object(h.useValues)(_e),{selectedDocument:t,setSelectedDocument:i}=ke();if(!t)return null;const a=t._meta.rawHit.__id,{fields:s,index:n}=Le(t),c=e[n];if(!c)return null;const r=((e,t)=>e.map((e=>{const i=t[e.field];return{...e,type:i}})))(s,c),l=[{name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.documentFlyout.fieldLabel",{defaultMessage:"Field"}),render:({field:e,type:t})=>Object(O.jsx)(A.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(O.jsx)(Pe,{type:t}),Object(O.jsx)(A.EuiText,null,Object(O.jsx)(A.EuiTextColor,{color:"subdued"},Object(O.jsx)("code",null,e)))),truncateText:!1},{field:"value",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.documentFlyout.valueLabel",{defaultMessage:"Value"}),render:e=>Object(O.jsx)(A.EuiText,null,Object(O.jsx)("code",null,Object(O.jsx)(ze,{value:e}))),truncateText:!1}];return Object(O.jsx)(A.EuiFlyout,{onClose:()=>i(null)},Object(O.jsx)(A.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"m"},Object(O.jsx)("h2",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.documentFlyout.title",defaultMessage:"Document: {id}",values:{id:a}}))),Object(O.jsx)(A.EuiTextColor,{color:"subdued"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.documentFlyout.fieldCount",defaultMessage:"{fieldCount} {fieldCount, plural, one {Field} other {Fields}}",values:{fieldCount:r.length}})))),Object(O.jsx)(A.EuiFlyoutBody,null,Object(O.jsx)(A.EuiInMemoryTable,{columns:l,items:r})))};var qe=i(117);const He=({children:e})=>Object(O.jsx)(A.EuiFlexGroup,{direction:"column"},e),$e=({result:e})=>{var t;const{searchApplicationData:i}=Object(h.useValues)(U),{setSelectedDocument:a}=ke(),{fields:s,index:n}=Le(e),c=e._meta.rawHit.__id,r=s.slice(0,4),l=s.length-r.length,o=null==i||null===(t=i.indices.find((e=>e.name===n)))||void 0===t?void 0:t.health,p=o&&"unknown"!==o?Object(qe.c)(o):"hollow",u=[{field:"field",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.result.nameColumn",{defaultMessage:"Field"}),render:e=>Object(O.jsx)(A.EuiText,null,Object(O.jsx)(A.EuiTextColor,{color:"subdued"},Object(O.jsx)("code",null,'"',e,'"'))),truncateText:!0,width:"20%"},{field:"value",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.result.valueColumn",{defaultMessage:"Value"}),render:e=>Object(O.jsx)(A.EuiText,null,Object(O.jsx)("code",null,Object(O.jsx)(ze,{value:e})))}];return Object(O.jsx)("button",{type:"button",onClick:()=>a(e)},Object(O.jsx)(A.EuiPanel,{paddingSize:"m"},Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"m"},Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(O.jsx)("code",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.result.id",defaultMessage:"ID: {id}",values:{id:c}})),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(O.jsx)("code",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.result.fromIndex",defaultMessage:"from"})),Object(O.jsx)(A.EuiBadge,{color:p},n)))),Object(O.jsx)(A.EuiBasicTable,{items:r,columns:u}),l>0&&Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(O.jsx)(A.EuiIcon,{type:"arrowRight",color:"subdued"}),Object(O.jsx)(A.EuiTextColor,{color:"subdued"},Object(O.jsx)("code",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.result.moreFieldsButton",defaultMessage:"{count} {count, plural, one {More Field} other {More Fields}}",values:{count:l}})))))))},Ve=({additionalInputProps:e})=>Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s"},Object(O.jsx)(A.EuiFieldSearch,d()({fullWidth:!0},e)),Object(O.jsx)(A.EuiButton,{type:"submit",color:"primary",fill:!0},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.inputView.searchLabel",{defaultMessage:"Search"}))),Ue=({start:e,end:t,totalResults:i})=>Object(O.jsx)(A.EuiText,{size:"s"},Object(O.jsx)(K.FormattedMessage,{tagName:"p",id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.pagingInfo.text",defaultMessage:"Showing <strong>{start}-{end}</strong> of {totalResults}",values:{end:t,start:e,totalResults:i,strong:e=>`<strong>${e}</strong>`}})),Ke=[10,20,50],Qe=({onChange:e,options:t,value:i})=>{var a;return Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"xxxs"},Object(O.jsx)("label",{htmlFor:"results-per-page"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.resultsPerPage.label",defaultMessage:"Show"}))),Object(O.jsx)(A.EuiSelect,{id:"results-per-page",options:null!==(a=null==t?void 0:t.map((e=>({text:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.resultsPerPage.option.label",{defaultMessage:"{value} {value, plural, one {Result} other {Results}}",values:{value:e}}),value:e}))))&&void 0!==a?a:[],value:i,onChange:t=>e(parseInt(t.target.value,10))})))},We=Object(me.withSearch)((({setSort:e,sortList:t})=>({setSort:e,sortList:t})))((({sortableFields:e,sortList:t,setSort:i})=>{const[{direction:a,field:n}]=null!=t&&t.length?t:[{direction:"",field:""}],c=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.sortingView.relevanceLabel",{defaultMessage:"Relevance"});return Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"xxxs"},Object(O.jsx)("label",{htmlFor:"sorting-field"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.sortingView.fieldLabel",defaultMessage:"Sort By"}))),Object(O.jsx)(A.EuiComboBox,{id:"sorting-field",isClearable:!1,singleSelection:{asPlainText:!0},options:[{label:c,value:""},...e.map((e=>({label:e,value:e})))],selectedOptions:[{label:n||c,value:n}],onChange:([{value:e}])=>i(""===e?[]:[{direction:"asc",field:e}],"asc")})),""!==n&&Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiSpacer,{size:"m"}),Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"xxxs"},Object(O.jsx)("label",{htmlFor:"sorting-direction"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.sortingView.directionLabel",defaultMessage:"Order By"}))),Object(O.jsx)(A.EuiSelect,{id:"sorting-direction",onChange:e=>{switch(e.target.value){case"asc":return i([{direction:"asc",field:n}],"asc");case"desc":return i([{direction:"desc",field:n}],"desc")}},value:a,options:[{text:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.sortingView.ascLabel",{defaultMessage:"Ascending"}),value:"asc"},{text:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.sortingView.descLabel",{defaultMessage:"Descending"}),value:"desc"}]}))))}));class InternalSearchApplicationTransporter{constructor(e,t,i){this.http=e,this.searchApplicationName=t,this.setLastAPICall=i}async performRequest(e){const t=`/internal/enterprise_search/search_applications/${this.searchApplicationName}/search`,i=await this.http.post(t,{body:JSON.stringify(e)});return this.setLastAPICall({request:e,response:i}),{...i,hits:{...i.hits,hits:i.hits.hits.map((e=>({...e,__id:e._id,_id:`${e._index}__${e._id}`})))}}}}const Je=({searchApplicationName:e,hasSchemaConflicts:t,setCloseConfiguration:i,showConfiguration:a})=>{const{navigateToUrl:n}=Object(h.useValues)(g.a),{searchApplicationData:c}=Object(h.useValues)(U),{openDeleteSearchApplicationModal:r}=Object(h.useActions)(U),{sendEnterpriseSearchTelemetry:l}=Object(h.useActions)(p.d),[o,u]=be()("search-application-tour-closed",!1);return Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiPopover,{anchorPosition:"downCenter",isOpen:a,panelPaddingSize:"none",closePopover:i,button:Object(O.jsx)(A.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},t&&Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiIcon,{type:"alert",color:"danger"})),!o&&Object(O.jsx)(A.EuiSpacer,{size:"xs"})),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiTourStep,{display:"block",decoration:"beacon",content:Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.tourContent",{defaultMessage:"Create your API key, learn about using language clients and find more resources in Connect."}))),isStepOpen:!o,maxWidth:360,hasArrow:!0,step:1,onFinish:()=>{u(!0)},stepsTotal:1,anchorPosition:"downCenter",title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.tourTitle",{defaultMessage:"Review our API page to start using your search application"})},Object(O.jsx)(s.a.Fragment,null))),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiButtonEmpty,{color:"primary",iconType:"arrowDown",iconSide:"right",onClick:i},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.buttonTitle",{defaultMessage:"Configuration"}))))},Object(O.jsx)(A.EuiContextMenuPanel,{style:{width:300}},Object(O.jsx)(A.EuiPanel,{color:"transparent",paddingSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"xxxs"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.contentTitle",{defaultMessage:"Content"})))),Object(O.jsx)(A.EuiHorizontalRule,{margin:"none"}),Object(O.jsx)(A.EuiContextMenuItem,{key:"Indices",icon:"tableDensityExpanded",onClick:()=>n(Object(T.a)(M.e,{contentTabId:M.j.INDICES,searchApplicationName:e}))},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.content.Indices",{defaultMessage:"Indices"})),Object(O.jsx)(A.EuiContextMenuItem,{key:"Schema",icon:t?Object(O.jsx)(A.EuiIcon,{type:"warning",color:"danger"}):"kqlField",onClick:()=>n(Object(T.a)(M.e,{contentTabId:M.j.SCHEMA,searchApplicationName:e}))},Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.content.schema",defaultMessage:"Schema"}),t&&Object(O.jsx)(A.EuiText,{size:"s",color:"danger"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.content.schemaConflict",defaultMessage:"Conflict"})))),Object(O.jsx)(A.EuiPanel,{color:"transparent",paddingSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"xxxs"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.connectTitle",{defaultMessage:"Connect"})))),Object(O.jsx)(A.EuiHorizontalRule,{margin:"none"}),Object(O.jsx)(A.EuiContextMenuItem,{key:"Api",icon:"lock",onClick:()=>n(Object(T.a)(M.d,{connectTabId:M.i.SEARCHAPI,searchApplicationName:e}))},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.connect.Api",{defaultMessage:"API"})),Object(O.jsx)(A.EuiPanel,{color:"transparent",paddingSize:"s"},Object(O.jsx)(A.EuiTitle,{size:"xxxs"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.settingsTitle",{defaultMessage:"Settings"})))),Object(O.jsx)(A.EuiHorizontalRule,{margin:"none"}),Object(O.jsx)(A.EuiContextMenuItem,{key:"delete",icon:Object(O.jsx)(A.EuiIcon,{type:"trash",color:"danger"}),onClick:()=>{c&&(r(),l({action:"clicked",metric:"entSearchApplications-searchApplicationView-deleteSearchApplication"}))}},Object(O.jsx)(A.EuiTextColor,{color:"danger"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.configuration.settings.delete",{defaultMessage:"Delete this app"})))))))};var Ye={name:"m1gib7",styles:"min-width:240px"};const Xe=()=>{const{http:e}=Object(h.useValues)(P.a),[t,i]=Object(a.useState)(!1),[n,c]=Object(a.useState)(!1),[r,l]=Object(a.useState)(null),{searchApplicationName:o,isLoadingSearchApplication:p,hasSchemaConflicts:u}=Object(h.useValues)(U),{resultFields:d,sortableFields:f}=Object(h.useValues)(_e),{searchApplicationData:j}=Object(h.useValues)(Ae),g=Object(a.useMemo)((()=>{const t=new InternalSearchApplicationTransporter(e,o,l);return{alwaysSearchOnInitialLoad:!0,apiConnector:new Oe.a(t),hasA11yNotifications:!0,searchQuery:{result_fields:d}}}),[e,o,l,d]);return j?Object(O.jsx)(v,{pageChrome:[o,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.pageChrome",{defaultMessage:"Docs Explorer"})],pageViewTelemetry:M.k.DOCS_EXPLORER,isLoading:p,pageHeader:{bottomBorder:!1,className:"searchApplicationHeaderBackgroundColor",pageTitle:o,rightSideItems:[Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(Je,{searchApplicationName:o,hasSchemaConflicts:u,showConfiguration:n,setCloseConfiguration:()=>c(!n)}))]},searchApplicationName:o,hasSchemaConflicts:u},Object(O.jsx)(Fe,null,Object(O.jsx)(me.SearchProvider,{config:g},Object(O.jsx)(A.EuiFlexGroup,null,Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(me.SearchBox,{inputView:({getInputProps:e})=>Object(O.jsx)(Ve,{additionalInputProps:e({append:Object(O.jsx)(A.EuiButtonEmpty,{color:"primary",iconType:"eye",onClick:()=>i(!0),isLoading:null==r},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.inputView.appendButtonLabel",{defaultMessage:"View API call"})),placeholder:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.docsExplorer.inputView.placeholder",{defaultMessage:"Search"})})})}))),Object(O.jsx)(A.EuiSpacer,{size:"m"}),Object(O.jsx)(A.EuiFlexGroup,null,Object(O.jsx)(A.EuiFlexItem,{grow:!1,css:Ye},Object(O.jsx)(me.ResultsPerPage,{view:Qe,options:Ke}),Object(O.jsx)(A.EuiSpacer,{size:"m"}),Object(O.jsx)(We,{sortableFields:f}),Object(O.jsx)(A.EuiSpacer,{size:"m"})),Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(me.PagingInfo,{view:Ue}),Object(O.jsx)(A.EuiSpacer,{size:"m"}),Object(O.jsx)(me.Results,{view:He,resultView:$e})))),Object(O.jsx)(Ge,null),t&&r&&Object(O.jsx)(Ee,{onClose:()=>i(!1),lastAPICall:r,searchApplicationName:o}))):null};function Ze(e){return null!=e}var et=i(80),tt=i(201);const it=Object(R.a)(["search_applications","fetch_indices_api_logic"],(async({searchQuery:e})=>{const{http:t}=P.a.values,i={from:0,return_hidden_indices:!1,search_query:e||null,size:40};return{...await t.get("/internal/enterprise_search/indices",{query:i}),searchQuery:e}}),{requestBreakpointMS:tt.a}),at=({ignoredOptions:e,...t})=>{var i,s,n,c;const[r,l]=Object(a.useState)(void 0),{makeRequest:o}=Object(h.useActions)(it),{status:p,data:u}=Object(h.useValues)(it);Object(a.useEffect)((()=>{o({searchQuery:r})}),[r]);const f=null!==(i=e&&e.length>0?null==u||null===(s=u.indices)||void 0===s||null===(n=s.filter((t=>!e.includes(t.name))))||void 0===n?void 0:n.map((e=>st(e.name,e))):null==u||null===(c=u.indices)||void 0===c?void 0:c.map((e=>st(e.name,e))))&&void 0!==i?i:[],j={isLoading:p===C.a.LOADING,onSearchChange:e=>{l(e)},options:f,renderOption:e=>{var t,i,a,s,n;return Object(O.jsx)(A.EuiFlexGroup,null,Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(A.EuiHealth,{color:Object(qe.c)(null===(t=e.value)||void 0===t?void 0:t.health)},Object(O.jsx)(A.EuiHighlight,{search:null!=r?r:""},null!==(i=null===(a=e.value)||void 0===a?void 0:a.name)&&void 0!==i?i:""))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)("span",null,Object(O.jsx)("strong",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.indicesSelect.docsLabel",{defaultMessage:"Docs:"})))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(K.FormattedNumber,{value:null!==(s=null===(n=e.value)||void 0===n?void 0:n.count)&&void 0!==s?s:0})))},...t};return Object(O.jsx)(A.EuiComboBox,d()({async:!0},j))},st=(e,t)=>({label:e,value:t}),nt=Object(h.kea)({actions:{setSelectedIndices:e=>({indices:e}),submitSelectedIndices:()=>!0},connect:{actions:[Ae,["addIndicesToSearchApplication","searchApplicationUpdated","closeAddIndicesFlyout"]],values:[ye,["status as updateSearchApplicationStatus","error as updateSearchApplicationError"]]},listeners:({actions:e,values:t})=>({searchApplicationUpdated:()=>{e.closeAddIndicesFlyout()},submitSelectedIndices:()=>{const{selectedIndices:i}=t;0!==i.length&&e.addIndicesToSearchApplication(i)}}),path:["enterprise_search","content","add_indices_logic"],reducers:{selectedIndices:[[],{closeAddIndicesFlyout:()=>[],setSelectedIndices:(e,{indices:t})=>t}]}}),ct=({onClose:e})=>{var t;const{searchApplicationData:i}=Object(h.useValues)(U),{selectedIndices:n,updateSearchApplicationStatus:c,updateSearchApplicationError:r}=Object(h.useValues)(nt),{setSelectedIndices:l,submitSelectedIndices:o}=Object(h.useActions)(nt),p=null==i||null===(t=i.indices)||void 0===t?void 0:t.map((e=>e.name)),u=Object(a.useMemo)((()=>n.map((e=>st(e)))),[n]),d=Object(a.useCallback)((e=>{l(e.map((({label:e})=>e)).filter(Ze))}),[l]);return Object(O.jsx)(A.EuiFlyout,{onClose:e},Object(O.jsx)(A.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(A.EuiTitle,null,Object(O.jsx)("h2",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.addIndicesFlyout.title",{defaultMessage:"Add new indices"}))),c===C.a.ERROR&&r&&Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiCallOut,{color:"danger",title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.addIndicesFlyout.updateError.title",{defaultMessage:"Error updating search application"})},Object(et.c)(r).map(((e,t)=>Object(O.jsx)("p",{id:`createErrorMsg.${t}`},e)))))),Object(O.jsx)(A.EuiFlyoutBody,null,Object(O.jsx)(A.EuiFormRow,{fullWidth:!0,label:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.addIndicesFlyout.selectableLabel",{defaultMessage:"Select searchable indices"})},Object(O.jsx)(at,{fullWidth:!0,onChange:d,selectedOptions:u,ignoredOptions:p}))),Object(O.jsx)(A.EuiFlyoutFooter,null,Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"spaceBetween",direction:"rowReverse"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButton,{fill:!0,"data-telemetry-id":"entSearchApplications-indices-addNewIndices-submit",iconType:"plusInCircle",onClick:o},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.addIndicesFlyout.submitButton",{defaultMessage:"Add selected"}))),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButtonEmpty,{"data-telemetry-id":"entSearchApplications-indices-addNewIndices-cancel",flush:"left",onClick:e},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.addIndicesFlyout.cancelButton",{defaultMessage:"Cancel"}))))))};var rt=i(5);const lt=()=>{const e=Object(A.useEuiBackgroundColor)("subdued"),{sendEnterpriseSearchTelemetry:t}=Object(h.useActions)(N.a),{searchApplicationData:i}=Object(h.useValues)(Ae),{removeIndexFromSearchApplication:n}=Object(h.useActions)(Ae),{navigateToUrl:c}=Object(h.useValues)(g.a),[r,o]=Object(a.useState)(null);if(!i)return null;const{indices:p}=i,u=p.every((({health:e})=>"unknown"===e)),d=p.some((({health:e})=>"unknown"===e)),f={color:"danger","data-test-subj":"search-application-remove-index-btn",description:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.actions.removeIndex.title",{defaultMessage:"Remove this index from search application"}),icon:"minusInCircle",isPrimary:!1,name:e=>S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.actions.removeIndex.caption",{defaultMessage:"Remove index {indexName}",values:{indexName:e.name}}),onClick:e=>{o(e.name),t({action:"clicked",metric:"entSearchApplications-indices-removeIndex"})},type:"icon"},j=[{name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.name.columnTitle",{defaultMessage:"Index name"}),render:({health:e,name:t})=>"unknown"===e?t:Object(O.jsx)(Se.d,{"data-test-subj":"search-application-index-link",to:`${l.o.URL}${Object(T.a)(rt.s,{indexName:t})}`,shouldNotCreateHref:!0},t),sortable:({name:e})=>e,truncateText:!0,width:"40%"},{field:"health",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.health.columnTitle",{defaultMessage:"Index health"}),render:e=>Object(O.jsx)("span",null,Object(O.jsx)(A.EuiIcon,{type:"dot",color:Object(qe.c)(e)})," ",null!=e?e:"-"),sortable:!0,truncateText:!0,width:"15%"},{field:"count",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.docsCount.columnTitle",{defaultMessage:"Docs count"}),render:e=>null===e?S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.docsCount.notAvailableLabel",{defaultMessage:"N/A"}):e,sortable:!0,truncateText:!0,width:"15%"},{actions:[{available:e=>"unknown"!==e.health,"data-test-subj":"search-application-view-index-btn",description:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.actions.viewIndex.title",{defaultMessage:"View this index"}),icon:"eye",isPrimary:!1,name:e=>S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.actions.viewIndex.caption",{defaultMessage:"View index {indexName}",values:{indexName:e.name}}),onClick:e=>c(`${l.o.URL}/${Object(T.a)(rt.s,{indexName:e.name})}`,{shouldNotCreateHref:!0}),type:"icon"},...p.length>1?[f]:[]],name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.actions.columnTitle",{defaultMessage:"Actions"}),width:"10%"}];return Object(O.jsx)(s.a.Fragment,null,(u||d)&&Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiCallOut,{color:"warning",iconType:"warning",title:u?Object(O.jsx)(s.a.Fragment,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.allUnknownIndicesCallout.title",{defaultMessage:"All of your indices are unavailable."})):Object(O.jsx)(s.a.Fragment,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.someUnknownIndicesCallout.title",{defaultMessage:"Some of your indices are unavailable."}))},Object(O.jsx)("p",null,u?Object(O.jsx)(s.a.Fragment,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.allUnknownIndicesCallout.description",{defaultMessage:"Your search application has no reachable indices. Add some indices and check for any pending operations or errors on affected indices, or remove indices that should no longer be used by this search application."})):Object(O.jsx)(s.a.Fragment,null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.someUnknownIndicesCallout.description",{defaultMessage:"Some data might be unreachable from this search application. Check for any pending operations or errors on affected indices, or remove indices that should no longer be used by this search application."})))),Object(O.jsx)(A.EuiSpacer,null)),Object(O.jsx)(A.EuiInMemoryTable,{items:p,columns:j,rowProps:t=>"unknown"===t.health?{style:{backgroundColor:e}}:{},search:{box:{incremental:!0,placeholder:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.searchPlaceholder",{defaultMessage:"Filter indices"}),schema:!0}},pagination:!0,sorting:!0}),null!==r&&Object(O.jsx)(A.EuiConfirmModal,{onCancel:()=>o(null),onConfirm:()=>{n(r),o(null),t({action:"clicked",metric:"entSearchApplications-indices-removeIndexConfirm"})},title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.removeIndexConfirm.title",{defaultMessage:"Remove this index from the search application"}),buttonColor:"danger",cancelButtonText:w.e,confirmButtonText:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.removeIndexConfirm.text",{defaultMessage:"Yes, Remove This Index"}),defaultFocusedButton:"confirm",maxWidth:!0},Object(O.jsx)(A.EuiText,null,Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.removeIndexConfirm.description",{defaultMessage:"This won't delete the index. You may add it back to this search application at a later time."})))))};var ot=i(0),pt=i.n(ot);let ut=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),dt=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class kbn_field_type_KbnFieldType{constructor(e={}){pt()(this,"name",void 0),pt()(this,"sortable",void 0),pt()(this,"filterable",void 0),pt()(this,"esTypes",void 0),this.name=e.name||dt.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}new kbn_field_type_KbnFieldType({name:dt.UNKNOWN});new kbn_field_type_KbnFieldType({name:dt.STRING,sortable:!0,filterable:!0,esTypes:[ut.STRING,ut.TEXT,ut.MATCH_ONLY_TEXT,ut.KEYWORD,ut.VERSION,ut._TYPE,ut._ID]}),new kbn_field_type_KbnFieldType({name:dt.NUMBER,sortable:!0,filterable:!0,esTypes:[ut.FLOAT,ut.HALF_FLOAT,ut.SCALED_FLOAT,ut.DOUBLE,ut.INTEGER,ut.LONG,ut.UNSIGNED_LONG,ut.SHORT,ut.BYTE,ut.TOKEN_COUNT,ut.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:dt.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[ut.FLOAT_RANGE,ut.DOUBLE_RANGE,ut.INTEGER_RANGE,ut.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:dt.DATE,sortable:!0,filterable:!0,esTypes:[ut.DATE,ut.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:dt.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[ut.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:dt.IP,sortable:!0,filterable:!0,esTypes:[ut.IP]}),new kbn_field_type_KbnFieldType({name:dt.IP_RANGE,sortable:!0,filterable:!0,esTypes:[ut.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:dt.BOOLEAN,sortable:!0,filterable:!0,esTypes:[ut.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:dt.OBJECT,esTypes:[ut.OBJECT]}),new kbn_field_type_KbnFieldType({name:dt.NESTED,esTypes:[ut.NESTED]}),new kbn_field_type_KbnFieldType({name:dt.GEO_POINT,esTypes:[ut.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:dt.GEO_SHAPE,esTypes:[ut.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:dt.ATTACHMENT,esTypes:[ut.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:dt.MURMUR3,esTypes:[ut.MURMUR3]}),new kbn_field_type_KbnFieldType({name:dt._SOURCE,esTypes:[ut._SOURCE]}),new kbn_field_type_KbnFieldType({name:dt.HISTOGRAM,filterable:!0,esTypes:[ut.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:dt.CONFLICT});var ht={name:"lthlwr",styles:"& .euiTable{background-color:transparent;}"};const ft=({schemaField:e})=>{const{navigateToUrl:t}=Object(h.useValues)(g.a),i=e.indices.some((e=>"unmapped"===e.type)),a=[{field:"name",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.fieldIndices.index.columnTitle",{defaultMessage:"Parent index"}),render:e=>Object(O.jsx)(Se.d,{to:`${l.o.URL}${Object(T.a)(rt.u,{indexName:e,tabId:"index_mappings"})}`},e)},{field:"type",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.fieldIndices.type.columnTitle",{defaultMessage:"Field mapped as"}),render:e=>"unmapped"===e?Object(O.jsx)(A.EuiBadge,{color:"warning"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.fieldIndices.type.unmapped",defaultMessage:"Unmapped"})):e},{actions:[{description:"View index mappings",icon:"eye",name:"View index",onClick:e=>{t(Object(T.a)(rt.u,{indexName:e.name,tabId:"index_mappings"}))},type:"icon"}]}];return Object(O.jsx)(A.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l",color:"transparent"},Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"l"},i&&Object(O.jsx)(A.EuiCallOut,{iconType:"iInCircle",title:Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.fieldIndices.notInAllIndices.title",defaultMessage:"This field is not mapped in every index."})},Object(O.jsx)(A.EuiText,{size:"s"},Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.fieldIndices.notInAllIndices.description",defaultMessage:"Learn more about field mapping in"})," ",Object(O.jsx)(A.EuiLink,{href:E.a.elasticsearchMapping,target:"_blank"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.fieldIndices.notInAllIndices.link",defaultMessage:"our documentation."}))))),Object(O.jsx)(A.EuiBasicTable,{css:ht,columns:a,items:e.indices,responsiveBreakpoint:!1})))},jt=()=>{const[e,t]=Object(a.useState)(!1),{isLoadingSearchApplicationSchema:i,schemaFields:n,hasSchemaConflicts:c}=Object(h.useValues)(U),[r,l]=Object(a.useState)(!1),[o,p]=Object(a.useState)({}),u=Object.values(ut).map((e=>({checked:void 0,label:e.toString()}))),[d,f]=Object(a.useState)(u),j=Object(a.useCallback)((()=>{t(!e),p({})}),[e]),g=Object(a.useMemo)((()=>d.filter((e=>"on"===e.checked)).map((e=>e.label))),[d]),b=Object(a.useMemo)((()=>e?n.filter((e=>"conflict"===e.type)):n),[e,n]),m=Object(a.useMemo)((()=>g.length>0?b.filter((e=>e.indices.some((e=>g.includes(e.type))))):b),[e,n,g]),x=e?b.length-m.length:0,y=[{render:({type:e})=>"conflict"!==e?null:Object(O.jsx)(A.EuiIcon,{type:"error",color:"danger"}),width:"24px"},{name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_name.columnTitle",{defaultMessage:"Field name"}),render:({name:e,type:t})=>Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},e.includes(".")&&Object(O.jsx)(A.EuiIcon,{type:"sortRight",color:"subdued"}),Object(O.jsx)(A.EuiText,{size:"s",color:"conflict"===t?"danger":"primary"},Object(O.jsx)("p",null,e)))},{name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_type.columnTitle",{defaultMessage:"Field type"}),render:({type:e})=>"conflict"===e?Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(O.jsx)(A.EuiBadge,{color:"danger"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_type.conflict",defaultMessage:"Conflict"}))):Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(O.jsx)(we,{type:e}),Object(O.jsx)(A.EuiText,{size:"s"},Object(O.jsx)("p",null,e))),width:"180px"},{name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_indices.columnTitle",{defaultMessage:"In all indices?"}),render:({indices:e})=>e.every((e=>"unmapped"!==e.type))?Object(O.jsx)(A.EuiText,{size:"s",color:"subdued"},Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_indices.yes",defaultMessage:"Yes"}))):Object(O.jsx)(A.EuiBadge,{color:"hollow"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_indices.no",defaultMessage:"No"})),width:"110px"},{isExpander:!0,render:e=>{const{name:t,type:i,indices:a}=e;if("conflict"===i||a.some((e=>"unmapped"===e.type))){const i=o[t]?"arrowUp":"arrowDown";return Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"flexEnd"},Object(O.jsx)(A.EuiButtonEmpty,{size:"s",color:"primary",iconType:i,iconSide:"right",onClick:()=>{(e=>{const t={...o};o[e.name]?delete t[e.name]:t[e.name]=Object(O.jsx)(ft,{schemaField:e}),p(t)})(e)}},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.field_indices.moreInfo",defaultMessage:"More info"})))}return null},width:"115px"}],E=Object(O.jsx)(A.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>l(!r),numFilters:d.length,hasActiveFilters:g.length>0,numActiveFilters:g.length,isSelected:r},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters",{defaultMessage:"Field types"}));return Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"l"},c&&Object(O.jsx)(A.EuiCallOut,{title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.conflictsCallOut.title",{defaultMessage:"Potential field mapping issues found"}),iconType:"error",color:"danger"},Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.conflictsCallOut.description",defaultMessage:"Schema field type conflicts can be resolved by navigating to the source index directly and updating the field type of the conflicting field(s) to match that of the other source indices."})),!e&&Object(O.jsx)(A.EuiButton,{color:"danger",fill:!0,onClick:j},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.conflictsCallOut.button",defaultMessage:"View conflicts"}))),Object(O.jsx)(A.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(O.jsx)(A.EuiSwitch,{label:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.onlyShowConflicts",{defaultMessage:"Only show conflicts"}),checked:e,onChange:j}),Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters.label",{defaultMessage:"Filter By"})),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiPopover,{button:E,isOpen:r,closePopover:()=>l(!1),panelPaddingSize:"none",anchorPosition:"downCenter"},Object(O.jsx)(A.EuiSelectable,{searchable:!0,searchProps:{placeholder:S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters.searchPlaceholder",{defaultMessage:"Filter list "})},options:d,onChange:e=>f(e)},((e,t)=>Object(O.jsx)("div",{style:{width:300}},Object(O.jsx)(A.EuiPopoverTitle,{paddingSize:"s"},t),e))),Object(O.jsx)(A.EuiPopoverFooter,null,Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"spaceAround"},Object(O.jsx)(A.EuiButtonEmpty,{color:"danger",iconType:"eraser",size:"s",onClick:()=>f(u)},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters.clearAll",{defaultMessage:"Clear all "})))))))),Object(O.jsx)(A.EuiBasicTable,{items:m,columns:y,loading:i,itemId:"name",itemIdToExpandedRowMap:o,responsiveBreakpoint:!1}),x>0&&Object(O.jsx)(A.EuiCallOut,{title:Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters.conflict.callout.title",defaultMessage:"There are {totalConflictsHiddenByTypeFilters, number} more {totalConflictsHiddenByTypeFilters, plural, one {conflict} other {conflicts}}   not displayed here",values:{totalConflictsHiddenByTypeFilters:x}}),color:"danger",iconType:"iInCircle"},Object(O.jsx)("p",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters.conflict.callout.subTitle",{defaultMessage:"In order to see all field conflicts you must clear your field filters"})),Object(O.jsx)(A.EuiButton,{fill:!0,color:"danger",onClick:()=>f(u)},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.schema.filters.conflict.callout.clearFilters",{defaultMessage:"Clear filters "})))))},gt=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.content.pageTitle",{defaultMessage:"Content"}),bt=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.content.indicesTabTitle",{defaultMessage:"Indices"}),mt=S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.content.schemaTabTitle",{defaultMessage:"Schema"}),xt=e=>{switch(e){case M.j.INDICES:return bt;case M.j.SCHEMA:return mt;default:return e}},Ot=Object.values(M.j),yt=()=>{const{searchApplicationName:e,isLoadingSearchApplication:t,hasSchemaConflicts:i}=Object(h.useValues)(U),{addIndicesFlyoutOpen:a}=Object(h.useValues)(Ae),{closeAddIndicesFlyout:c,openAddIndicesFlyout:r}=Object(h.useActions)(Ae),{contentTabId:l=M.j.INDICES}=Object(n.useParams)();if(!Ot.includes(l))return Object(O.jsx)(v,{pageChrome:[e,gt],pageViewTelemetry:M.k.CONTENT,isLoading:t,pageHeader:{bottomBorder:!1,className:"searchApplicationHeaderBackgroundColor",pageTitle:gt,rightSideItems:[]},searchApplicationName:e,hasSchemaConflicts:i},Object(O.jsx)(H,{notFound:!0}));const o=t=>()=>{g.a.values.navigateToUrl(Object(T.a)(M.e,{contentTabId:t,searchApplicationName:e}))};return Object(O.jsx)(v,{pageChrome:[e,gt,xt(l)],pageViewTelemetry:M.k.CONTENT,isLoading:t,pageHeader:{bottomBorder:!1,breadcrumbs:[{color:"primary",onClick:()=>g.a.values.navigateToUrl(Object(T.a)(M.g,{searchApplicationName:e})),text:Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiIcon,{size:"s",type:"arrowLeft"})," ",e)}],className:"searchApplicationHeaderBackgroundColor",pageTitle:gt,rightSideItems:[Object(O.jsx)(A.EuiButton,{"data-telemetry-id":"entSearchApplications-indices-addNewIndices","data-test-subj":"search-application-add-new-indices-btn",iconType:"plusInCircle",fill:!0,onClick:r},S.i18n.translate("xpack.enterpriseSearch.searchApplications.searchApplication.indices.addNewIndicesButton",{defaultMessage:"Add new indices"}))],tabs:[{isSelected:l===M.j.INDICES,label:bt,onClick:o(M.j.INDICES)},{isSelected:l===M.j.SCHEMA,label:Object(O.jsx)(A.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i&&Object(O.jsx)(A.EuiIcon,{type:"warning",color:"danger"}),mt),onClick:o(M.j.SCHEMA)}]},searchApplicationName:e,hasSchemaConflicts:i},l===M.j.INDICES&&Object(O.jsx)(lt,null),l===M.j.SCHEMA&&Object(O.jsx)(jt,null),a&&Object(O.jsx)(ct,{onClose:c}))},At=()=>{const{fetchSearchApplication:e,closeDeleteSearchApplicationModal:t}=Object(h.useActions)(U),{searchApplicationName:i,fetchSearchApplicationApiError:l,fetchSearchApplicationApiStatus:o,hasSchemaConflicts:p,isDeleteModalVisible:u}=Object(h.useValues)(U),{tabId:d=M.k.DOCS_EXPLORER}=Object(n.useParams)();return Object(a.useEffect)((()=>{e({name:i})}),[i]),o===C.a.ERROR?Object(O.jsx)(v,{isEmptyState:!0,pageChrome:[i],pageViewTelemetry:d,pageHeader:{bottomBorder:!1,pageTitle:i,rightSideItems:[]},searchApplicationName:i,emptyState:Object(O.jsx)(H,{error:l}),hasSchemaConflicts:p}):Object(O.jsx)(s.a.Fragment,null,u?Object(O.jsx)(G,{searchApplicationName:i,onClose:t}):null,Object(O.jsx)(c.a,null,Object(O.jsx)(r.b,{exact:!0,path:`${M.g}/${M.k.DOCS_EXPLORER}`,component:Xe}),Object(O.jsx)(r.b,{path:M.e,component:yt}),Object(O.jsx)(n.Redirect,{from:`${M.g}/${M.k.CONTENT}`,to:`${M.g}/${M.k.CONTENT}/${M.j.INDICES}`}),Object(O.jsx)(r.b,{path:M.d,component:je}),Object(O.jsx)(n.Redirect,{from:`${M.g}/${M.k.CONNECT}`,to:`${M.g}/${M.k.CONNECT}/${M.i.SEARCHAPI}`}),Object(O.jsx)(r.b,null,Object(O.jsx)(v,{isEmptyState:!0,pageChrome:[i],pageViewTelemetry:d,pageHeader:{bottomBorder:!1,pageTitle:i,rightSideItems:[]},searchApplicationName:i,hasSchemaConflicts:p},Object(O.jsx)(H,{notFound:!0})))))},St=()=>{const e=decodeURIComponent(Object(n.useParams)().searchApplicationName),t=I({searchApplicationName:e}),{setSearchApplicationName:i}=Object(h.useActions)(t);return Object(a.useEffect)((()=>{const e=t.mount();return()=>{e()}}),[]),Object(a.useEffect)((()=>{i(e)}),[e]),Object(O.jsx)(c.a,null,Object(O.jsx)(n.Redirect,{from:M.g,to:Object(T.a)(M.h,{searchApplicationName:e,tabId:M.k.DOCS_EXPLORER}),exact:!0}),Object(O.jsx)(r.b,{path:M.h},Object(O.jsx)(At,null)))};var Et=i(764),_t=i.n(Et),vt=i(60),Ft=i(133);const kt=({children:e})=>Object(O.jsx)(A.EuiEmptyPrompt,{iconType:"aggregate",title:Object(O.jsx)("h2",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.empty.title",defaultMessage:"Create your first Search Application"})),body:Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.empty.description",defaultMessage:"Let's walk you through creating your first Search Application."})),actions:e});var Mt=i(171);const Tt=({searchApplications:e,isLoading:t,meta:i,onChange:a,onDelete:s,viewSearchApplicationIndices:n})=>{const{navigateToUrl:c}=Object(h.useValues)(g.a),{sendEnterpriseSearchTelemetry:r}=Object(h.useActions)(N.a),l=[{field:"name",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.name",{defaultMessage:"Search Application Name"}),mobileOptions:{header:!0,enlarge:!0,width:"100%"},render:e=>Object(O.jsx)(Se.d,{"data-test-subj":"search-application-link","data-telemetry-id":"entSearchApplications-table-viewSearchApplication",to:Object(T.a)(M.g,{searchApplicationName:e})},e),truncateText:!0,width:"30%"},{field:"updated_at_millis",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.lastUpdated",{defaultMessage:"Last updated"}),dataType:"number",render:e=>Object(O.jsx)(Mt.a,{date:new Date(e),hideTime:!0})},{field:"indices",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.indices",{defaultMessage:"Indices"}),align:"right",render:(e,t)=>Object(O.jsx)(A.EuiButtonEmpty,{size:"s","data-test-subj":"searchApplicationsListTableIndicesFlyoutButton","data-telemetry-id":"entSearchApplications-table-viewSearchApplicationIndices",onClick:()=>n(t.name)},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.table.column.view.indices",defaultMessage:"{indicesCount, number} {indicesCount, plural, one {index} other {indices}}",values:{indicesCount:e.length}}))},{name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.actions",{defaultMessage:"Actions"}),actions:[{name:w.s,description:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.actions.view.buttonDescription",{defaultMessage:"View this search application"}),type:"icon",icon:"eye",onClick:e=>c(Object(T.a)(M.g,{searchApplicationName:e.name}))},{color:"danger",description:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.action.delete.buttonDescription",{defaultMessage:"Delete this search application"}),type:"icon",icon:"trash",isPrimary:!1,name:()=>S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.table.column.actions.deleteSearchApplicationLabel",{defaultMessage:"Delete this search application"}),onClick:e=>{s(e),r({action:"clicked",metric:"entSearchApplications-table-deleteSearchApplication"})}}]}];return Object(O.jsx)(A.EuiBasicTable,{items:e,columns:l,pagination:{...(o=i,{pageIndex:o.size?Math.trunc(o.from/o.size):0,pageSize:o.size,totalItemCount:o.total}),showPerPageOptions:!1},onChange:a,loading:t});var o};var It=i(92);const Ct=Object(R.a)(["search_applications","create_search_application_api_logic"],(async({name:e,indices:t})=>{const i=`/internal/enterprise_search/search_applications/${e}`;return await P.a.values.http.put(i,{body:JSON.stringify({indices:t,name:e}),query:{create:!0}})}),{showErrorFlash:!1}),wt=Object(h.kea)({actions:{createSearchApplication:!0,setName:e=>({name:e}),setSelectedIndices:e=>({indices:e})},connect:{actions:[z,["fetchSearchApplications"],Ct,["makeRequest as createSearchApplicationRequest","apiSuccess as searchApplicationCreated","apiError as searchApplicationCreateError"]],values:[Ct,["status as createSearchApplicationStatus","error as createSearchApplicationError"]]},listeners:({actions:e,values:t})=>({createSearchApplication:()=>{e.createSearchApplicationRequest({indices:t.selectedIndices,name:t.searchApplicationName})},searchApplicationCreated:()=>{e.fetchSearchApplications(),g.a.values.navigateToUrl(M.c)}}),path:["enterprise_search","content","create_search_application_logic"],reducers:{searchApplicationName:["",{setName:(e,{name:t})=>t}],selectedIndices:[[],{setSelectedIndices:(e,{indices:t})=>t}]},selectors:({selectors:e})=>({createDisabled:[()=>[e.indicesStatus,e.searchApplicationNameStatus],(e,t)=>"complete"!==e||"complete"!==t],searchApplicationNameStatus:[()=>[e.searchApplicationName],e=>0===e.length?"incomplete":"complete"],formDisabled:[()=>[e.createSearchApplicationStatus],e=>e===C.a.LOADING],indicesStatus:[()=>[e.selectedIndices],e=>e.length>0?"complete":"incomplete"]})}),Nt=({onClose:e})=>{const{createSearchApplication:t,setName:i,setSelectedIndices:c}=Object(h.useActions)(wt),{createDisabled:r,createSearchApplicationError:l,createSearchApplicationStatus:o,searchApplicationName:p,searchApplicationNameStatus:u,formDisabled:d,indicesStatus:f,selectedIndices:j}=Object(h.useValues)(wt),{search:g}=Object(n.useLocation)(),{...b}=Object(It.a)(g),m=b[w.p];return Object(a.useEffect)((()=>{m&&"string"==typeof m&&c([m])}),[]),Object(O.jsx)(A.EuiFlyout,{onClose:e,size:"m"},Object(O.jsx)(A.EuiFlyoutHeader,null,Object(O.jsx)(A.EuiTitle,{size:"m"},Object(O.jsx)("h3",null,S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.headerTitle",{defaultMessage:"Create a Search Application"}))),Object(O.jsx)(A.EuiSpacer,{size:"s"}),Object(O.jsx)(A.EuiText,{color:"subdued"},Object(O.jsx)("p",null,Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.createSearchApplication.headerSubTitle",defaultMessage:"Explore our {docsLink} to learn more!",values:{docsLink:Object(O.jsx)(A.EuiLink,{href:E.a.searchApplications,target:"_blank","data-telemetry-id":"entSearchApplications-createSearchApplication-docsLink",external:!0},S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.header.docsLink",{defaultMessage:"Search Applications documentation"}))}}))),o===C.a.ERROR&&l&&Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiCallOut,{color:"danger",title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.header.createError.title",{defaultMessage:"Error creating search application"})},Object(et.c)(l).map(((e,t)=>Object(O.jsx)("p",{id:`createErrorMsg.${t}`},e)))))),Object(O.jsx)(A.EuiFlyoutBody,null,Object(O.jsx)(A.EuiFlexGroup,{direction:"column"},Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiCallOut,{title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.featureCallOut.title",{defaultMessage:"Beta feature"}),color:"warning",iconType:"beaker"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.createSearchApplication.featureCallOut.description",defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features."}))),Object(O.jsx)(A.EuiFlexItem,{grow:!0},Object(O.jsx)(A.EuiSteps,{steps:[{children:Object(O.jsx)(at,{fullWidth:!0,isDisabled:d,onChange:e=>{c(e.map((e=>e.label)))},selectedOptions:j.map((e=>st(e)))}),status:f,title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.selectIndices.title",{defaultMessage:"Select indices"})},{children:Object(O.jsx)(A.EuiFieldText,{fullWidth:!0,disabled:d,placeholder:S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.searchApplicationName.placeholder",{defaultMessage:"Search application name"}),value:p,onChange:e=>i(e.target.value)}),status:u,title:S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.searchApplicationName.title",{defaultMessage:"Name your search application"})}]})))),Object(O.jsx)(A.EuiFlyoutFooter,null,Object(O.jsx)(A.EuiFlexGroup,null,Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButtonEmpty,{disabled:d,"data-telemetry-id":"entSearchApplications-createSearchApplication-cancel",onClick:e},w.e)),Object(O.jsx)(A.EuiFlexItem,null),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiButton,{isDisabled:r||d,"data-telemetry-id":"entSearchApplications-createSearchApplication-submit",fill:!0,iconType:"plusInCircle",onClick:()=>t()},S.i18n.translate("xpack.enterpriseSearch.searchApplications.createSearchApplication.submit",{defaultMessage:"Create"}))))))},Rt=Object(h.kea)({actions:{closeFlyout:!0,openFlyout:e=>({name:e})},connect:{actions:[U,["fetchSearchApplication"]],values:[U,["searchApplicationData","fetchSearchApplicationApiError","fetchSearchApplicationApiStatus"]]},listeners:({})=>({openFlyout:async({name:e})=>{$.actions.makeRequest({name:e})}}),path:["enterprise_search","search_applications","search_application_indices_flyout_logic"],reducers:({})=>({isFlyoutVisible:[!1,{closeFlyout:()=>!1,openFlyout:()=>!0}],searchApplicationName:[null,{closeFlyout:()=>null,openFlyout:(e,{name:t})=>t}]}),selectors:({selectors:e})=>({isSearchApplicationLoading:[()=>[e.fetchSearchApplicationApiStatus],e=>[C.a.LOADING].includes(e)]})}),Pt=()=>{const{searchApplicationData:e,searchApplicationName:t,isSearchApplicationLoading:i,isFlyoutVisible:a,fetchSearchApplicationApiStatus:n,fetchSearchApplicationApiError:c}=Object(h.useValues)(Rt),{closeFlyout:r}=Object(h.useActions)(Rt);if(!e)return null;const{indices:o}=e,p=n===C.a.ERROR,u=[{field:"name",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.indicesFlyout.table.name.columnTitle",{defaultMessage:"Index name"}),render:e=>Object(O.jsx)(Se.d,{"data-test-subj":"search-application-index-link","data-telemetry-id":"entSearchApplications-list-viewIndex",to:`${l.o.URL}${Object(T.a)(rt.s,{indexName:e})}`,shouldNotCreateHref:!0},e),sortable:!0,truncateText:!0,width:"40%"},{field:"health",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.indicesFlyout.table.health.columnTitle",{defaultMessage:"Index health"}),render:e=>{var t;return Object(O.jsx)("span",null,Object(O.jsx)(A.EuiIcon,{type:"dot",color:null!==(t=qe.a[e])&&void 0!==t?t:""})," ",null!=e?e:"-")},sortable:!0,truncateText:!0,width:"15%"},{field:"count",name:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.indicesFlyout.table.docsCount.columnTitle",{defaultMessage:"Docs count"}),sortable:!0,truncateText:!0,width:"15%"}];return a?Object(O.jsx)(A.EuiFlyout,{ownFocus:!0,"aria-labelledby":"searchApplicationIndicesFlyout",onClose:r},Object(O.jsx)(A.EuiFlyoutHeader,{hasBorder:!0},Object(O.jsx)(A.EuiTitle,{size:"m"},Object(O.jsx)("h2",{id:"searchApplicationIndicesFlyout"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.indicesFlyout.title",{defaultMessage:"View Indices"}))),Object(O.jsx)(A.EuiSpacer,{size:"s"}),Object(O.jsx)(A.EuiText,{color:"subdued"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.indicesFlyout.subTitle",defaultMessage:"View the indices associated with {searchApplicationName}",values:{searchApplicationName:t}}))),Object(O.jsx)(A.EuiFlyoutBody,null,p?Object(O.jsx)(H,{error:c}):Object(O.jsx)(A.EuiBasicTable,{items:o,columns:u,loading:i}))):Object(O.jsx)(s.a.Fragment,null)},Dt=({disabled:e})=>{const[t,i]=Object(a.useState)(!1);return Object(O.jsx)(A.EuiPopover,{isOpen:t,closePopover:()=>i(!1),button:Object(O.jsx)("div",{"data-test-subj":"create-search-application-button-hover-target",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),tabIndex:0},Object(O.jsx)(A.EuiButton,{fill:!0,iconType:"plusInCircle","data-test-subj":"enterprise-search-search-applications-creation-button","data-telemetry-id":"entSearchApplications-list-createSearchApplication",isDisabled:e,onClick:()=>g.a.values.navigateToUrl(M.f)},S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.createSearchApplicationButton.label",{defaultMessage:"Create"})))},Object(O.jsx)(A.EuiPopoverTitle,null,Object(O.jsx)(A.EuiFlexGroup,{justifyContent:"center",gutterSize:"s"},Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(A.EuiIcon,{type:"beaker"})),Object(O.jsx)(A.EuiFlexItem,{grow:!1},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.createSearchApplicationTechnicalPreviewPopover.title",defaultMessage:"Beta"})))),Object(O.jsx)("div",{style:{width:"300px"},"data-test-subj":"create-search-application-button-popover-content"},Object(O.jsx)(A.EuiFlexGroup,{direction:"column",gutterSize:"m"},Object(O.jsx)(A.EuiText,{size:"s"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.createSearchApplicationTechnicalPreviewPopover.body",defaultMessage:"This functionality may be changed or removed completely in a future release."})))))},Bt=({createSearchApplicationFlyoutOpen:e})=>{var t;const{closeDeleteSearchApplicationModal:i,fetchSearchApplications:n,onPaginate:c,openDeleteSearchApplicationModal:r,setSearchQuery:l,setIsFirstRequest:o}=Object(h.useActions)(z),{openFlyout:p}=Object(h.useActions)(Rt),{isCloud:u,navigateToUrl:d}=Object(h.useValues)(g.a),{hasPlatinumLicense:f}=Object(h.useValues)(vt.a),j=!u&&!f,{deleteModalSearchApplicationName:b,hasNoSearchApplications:m,isDeleteModalVisible:x,isLoading:y,meta:_,results:F,searchQuery:k}=Object(h.useValues)(z),T=_t()(k,tt.a);return Object(a.useEffect)((()=>{j||n()}),[_.from,_.size,T]),Object(a.useEffect)((()=>{j||o()}),[]),Object(O.jsx)(s.a.Fragment,null,x?Object(O.jsx)(G,{searchApplicationName:b,onClose:i}):null,Object(O.jsx)(Pt,null),e&&Object(O.jsx)(Nt,{onClose:()=>d(M.c)}),Object(O.jsx)(v,{pageChrome:[],pageHeader:{description:Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.description",defaultMessage:"Search Applications help make your Elasticsearch data easily searchable for end users. Create, build, and manage all your search applications here. To learn more, {documentationUrl}.",values:{documentationUrl:Object(O.jsx)(A.EuiLink,{"data-test-subj":"search-applications-documentation-link",href:E.a.searchApplications,target:"_blank","data-telemetry-id":"entSearchApplications-documentation-viewDocumentaion"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.documentation",{defaultMessage:"explore our Search Applications documentation"}))}}),pageTitle:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.title",{defaultMessage:"Search Applications"}),rightSideItems:y||m?[]:[Object(O.jsx)(Dt,{disabled:j})]},pageViewTelemetry:"Search Applications",isLoading:y&&!j},j&&Object(O.jsx)(A.EuiFlexItem,null,Object(O.jsx)(Ft.b,{feature:Ft.a.SEARCH_APPLICATIONS})),m||j?Object(O.jsx)(kt,null,Object(O.jsx)(Dt,{disabled:j})):Object(O.jsx)(s.a.Fragment,null,Object(O.jsx)("div",null,Object(O.jsx)(A.EuiFieldSearch,{value:k,placeholder:S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.searchBar.placeholder",{defaultMessage:"Search Applications"}),"aria-label":S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.searchBar.ariaLabel",{defaultMessage:"Search Applications"}),fullWidth:!0,onChange:e=>{l(e.currentTarget.value)}})),Object(O.jsx)(A.EuiSpacer,{size:"s"}),Object(O.jsx)(A.EuiText,{color:"subdued",size:"s"},S.i18n.translate("xpack.enterpriseSearch.searchApplications.list.searchBar.description",{defaultMessage:"Locate a search application via name."})),Object(O.jsx)(A.EuiSpacer,null),Object(O.jsx)(A.EuiText,{size:"s"},Object(O.jsx)(K.FormattedMessage,{id:"xpack.enterpriseSearch.searchApplications.list.itemRange",defaultMessage:"Showing {from}-{to} of {total}",values:{from:Object(O.jsx)("strong",null,Object(O.jsx)(K.FormattedNumber,{value:_.from+1})),to:Object(O.jsx)("strong",null,Object(O.jsx)(K.FormattedNumber,{value:_.from+(null!==(t=null==F?void 0:F.length)&&void 0!==t?t:0)})),total:Object(O.jsx)(K.FormattedNumber,{value:_.total})}})),Object(O.jsx)(Tt,{searchApplications:F,meta:_,onChange:c,onDelete:r,viewSearchApplicationIndices:p,loading:!1})),Object(O.jsx)(A.EuiSpacer,{size:"xxl"}),Object(O.jsx)("div",null)))},Lt=()=>Object(O.jsx)(c.a,null,Object(O.jsx)(r.b,{exact:!0,path:M.c},Object(O.jsx)(Bt,null)),Object(O.jsx)(r.b,{path:M.f},Object(O.jsx)(Bt,{createSearchApplicationFlyoutOpen:!0})),Object(O.jsx)(r.b,{path:M.g},Object(O.jsx)(St,null)),Object(O.jsx)(r.b,null,Object(O.jsx)(F,null))),zt=()=>Object(O.jsx)(c.a,null,Object(O.jsx)(n.Redirect,{exact:!0,from:M.b,to:M.a}),Object(O.jsx)(r.b,{path:M.c},Object(O.jsx)(Lt,null)),Object(O.jsx)(r.b,{path:M.a},Object(O.jsx)(k,null)),Object(O.jsx)(r.b,null,Object(O.jsx)(F,null)))},178:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)},n=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SearchkitRequest=void 0;const r=c(i(348)),l=c(i(706)),o=i(353),p=i(355),u=i(253),d=i(747);function h(e,t){const i=t.find((t=>t.id===e));if(!i)throw new Error(`Sort Option: sorting option ${e} not found`);return i}s(i(748),t),s(i(353),t),s(i(752),t),s(i(355),t),s(i(754),t);class SearchkitRequest{constructor(e,t){this.config=e,this.queryManager=new r.default,this.transporter=t||new p.FetchClientTransporter(e),this.transformer=new d.ElasticSearchResponseTransformer,this.handleDefaults()}handleDefaults(){const e=this.config.sortOptions&&this.config.sortOptions.find((e=>e.defaultOption)),t=e&&h(e.id,this.config.sortOptions);this.queryManager.setSortBy(t)}query(e){return this.queryManager.setQuery(e),this}setFilters(e){return this.queryManager.setFilters(e),this}setQueryOptions(e){return this.queryManager.setQueryOptions(e),this}setSortBy(e){if(this.config.sortOptions&&e){const t=h(e,this.config.sortOptions);this.queryManager.setSortBy(t)}return this}executeSuggestions(e){return n(this,void 0,void 0,(function*(){return yield Promise.all(this.config.suggestions.map((t=>t.getSuggestions(e,this.transporter))))}))}execute(e,t=[]){return n(this,void 0,void 0,(function*(){const i=[],a=((e=[],t,i)=>e.reduce(((e,a)=>a instanceof o.VisibleWhenRuleSet?[...e,...a.getActiveFacets(t,i)]:[...e,a]),[]))(this.config.facets,this.queryManager,{});let s=null,n={};if(e.hits||(e.hits={}),e.hits.size||(e.hits.size=0),e.hits.from||(e.hits.from=0),e.facets){if(Array.isArray(e.facets)){const t=e.facets.map((e=>e.identifier));s=a&&a.filter((e=>t.includes(e.getIdentifier()))),n=e.facets.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.identifier]:{query:t.query,size:t.size}})),{})}const t=u.getAggregationsFromFacets(this.queryManager,n,s||a);i.push(t)}const c=this.queryManager.getSortBy();i.push({size:e.hits.size,from:e.hits.from,sort:c?c.field:[{_score:"desc"}]});let r=l.default(this.queryManager,this.config,t,a,i);this.config.postProcessRequest&&(r=this.config.postProcessRequest(r));const p=yield this.transporter.performRequest(r);return this.transformer.transformResponse(p,s||a,this.queryManager,this.config,e)}))}}t.SearchkitRequest=SearchkitRequest,t.default=(e,t)=>new SearchkitRequest(e,t)},179:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(22);t.default=class Filter{constructor(e){this.config=e}getIdentifier(){return this.config.identifier}getLabel(){return this.config.label}getFilters(e){return{bool:{filter:e.map((e=>{if("min"in e||"max"in e){const t={};return a.isUndefined(e.min)||(t.gte=e.min),a.isUndefined(e.max)||(t.lte=e.max),{range:{[this.config.field]:t}}}if("dateMin"in e||"dateMax"in e){const t={};return a.isUndefined(e.dateMin)||(t.gte=e.dateMin),a.isUndefined(e.dateMax)||(t.lte=e.dateMax),{range:{[this.config.field]:t}}}return"geoBoundingBox"in e?{geo_bounding_box:{[this.config.field]:a.omitBy({top_left:e.geoBoundingBox.topLeft,bottom_right:e.geoBoundingBox.bottomRight,bottom_left:e.geoBoundingBox.bottomLeft,top_right:e.geoBoundingBox.topRight},a.isNil)}}:{term:{[this.config.field]:e.value}}}))}}}getSelectedFilter(e){return"min"in e||"max"in e?{identifier:this.getIdentifier(),id:`${this.getIdentifier()}_${e.min}_${e.max}`,label:this.getLabel(),display:this.config.display||"RangeFilter",type:"NumericRangeSelectedFilter",min:e.min,max:e.max}:"dateMin"in e||"dateMax"in e?{identifier:this.getIdentifier(),id:`${this.getIdentifier()}_${e.dateMin}_${e.dateMax}`,label:this.getLabel(),display:this.config.display||"RangeFilter",type:"NumericRangeSelectedFilter",min:e.dateMin,max:e.dateMax}:"geoBoundingBox"in e?{type:"GeoBoundingBoxSelectedFilter",id:`${this.getIdentifier()}_${JSON.stringify(e.geoBoundingBox)}`,identifier:this.getIdentifier(),label:this.getLabel(),topLeft:e.geoBoundingBox.topLeft,bottomRight:e.geoBoundingBox.bottomRight,display:this.config.display||"GeoBoundingBoxFilter"}:"value"in e?{type:"ValueSelectedFilter",id:`${this.getIdentifier()}_${e.value}`,identifier:this.getIdentifier(),label:this.config.label,value:e.value,display:this.config.display||"TermFilter"}:void 0}}},224:function(e,t,i){switch(window.__kbnThemeTag__){case"v8dark":return i(558);case"v8light":return i(560)}},253:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFacetsFromResponse=t.getAggregationsFromFacets=t.filterTransform=void 0,t.filterTransform=(e,t=[])=>{const i=t.reduce(((t,i)=>{const a=e.getFiltersById(i.getIdentifier());return a?[...t,i.getFilters(a)]:t}),[]);return i.length?{bool:{must:i}}:null},t.getAggregationsFromFacets=(e,i,a)=>({aggs:a.reduce(((t,i)=>(i.excludeOwnFilters&&e.hasFilters()?t.push({name:`facet_bucket_${i.getIdentifier()}`,aggs:[i],filters:a.filter((e=>e!==i))}):t.find((({name:e})=>"facet_bucket_all"===e)).aggs.push(i),t)),[{name:"facet_bucket_all",aggs:[],filters:[...a]}]).reduce(((a,s)=>{const n=s.aggs.reduce(((t,a)=>Object.assign(Object.assign({},t),a.getAggregation(i[a.getIdentifier()],e))),{}),c=t.filterTransform(e,s.filters);return Object.assign(Object.assign({},a),{[s.name]:{aggs:n,filter:c||{bool:{must:[]}}}})}),{})}),t.getFacetsFromResponse=(e,t,i)=>{const a=Object.keys(t.aggregations).filter((e=>-1!==e.indexOf("facet_bucket_"))).reduce(((e,i)=>{const a=t.aggregations[i],s=Object.keys(a).filter((e=>"meta"!==e&&"doc_count"!==e));return Object.assign(Object.assign({},e),s.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:a[t]})),{}))}),{});return e.map((e=>{const t=a[e.getIdentifier()];return"transformResponse"in e?e.transformResponse(t,i):null})).filter((e=>null!==e))}},254:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.buildBaseFilters=t.isRangeFilter=t.isValidDateString=t.getResultFields=void 0;const a=i(178),s=i(757),n=i(758);function c(e){return{hitFields:Object.keys(e),highlightFields:Object.keys(e).reduce(((t,i)=>(e[i].snippet&&t.push(i),t)),[])}}function r(e){return"string"==typeof e&&!isNaN(Date.parse(e))}function l(e){return"object"==typeof e&&("from"in e||"to"in e)}t.getResultFields=c,t.isValidDateString=r,t.isRangeFilter=l,t.buildBaseFilters=function(e){return(e||[]).reduce(((e,t)=>{const i={all:"filter",any:"should",none:"must_not"}[t.type];return[...e,{bool:{[i]:t.values.map((e=>l(e)?{range:{[t.field]:Object.assign(Object.assign({},"from"in e?{from:r(e.from)?e.from:Number(e.from)}:{}),"to"in e?{to:r(e.to)?e.to:Number(e.to)}:{})}}:{term:{[t.field]:e}}))}}]}),[])},t.default=function({state:t,queryConfig:i}){var l;const{hitFields:o,highlightFields:p}=c(i.result_fields),u=Object.values((t.filters||[]).filter((e=>!i.facets[e.field])).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.field]:new a.Filter({field:t.field,identifier:t.field,label:t.field})})),{})),d=Object.keys(i.facets||{}).reduce(((e,t)=>{var s;const n=i.facets[t],c=null===(s=i.disjunctiveFacets)||void 0===s?void 0:s.includes(t);return"value"===n.type?e.push(new a.RefinementSelectFacet({identifier:t,field:t,label:t,size:n.size||20,multipleSelect:c,order:n.sort||"count"})):"range"!==n.type||n.center?"range"===n.type&&n.center&&e.push(new a.GeoDistanceOptionsFacet({identifier:t,field:t,label:t,multipleSelect:c,origin:n.center,unit:n.unit,ranges:n.ranges.map((e=>Object.assign(Object.assign({label:e.name},e.from?{from:Number(e.from)}:{}),e.to?{to:Number(e.to)}:{})))})):e.push(new a.MultiQueryOptionsFacet({identifier:t,field:t,label:t,multipleSelect:c,options:n.ranges.map((e=>Object.assign(Object.assign(Object.assign(Object.assign({label:e.name},"number"==typeof e.from?{min:e.from}:{}),"number"==typeof e.to?{max:e.to}:{}),r(e.from)?{dateMin:e.from.toString()}:{}),r(e.to)?{dateMax:e.to.toString()}:{})))})),e}),[]),h=(null===(l=t.sortList)||void 0===l?void 0:l.length)>0?{id:"selectedOption",label:"selectedOption",field:t.sortList.reduce(((e,t)=>(e.push({[t.field]:t.direction}),e)),[])}:{id:"selectedOption",label:"selectedOption",field:"_score"},f="undefined"!=typeof window?"browser":e.version;return{host:"host",index:"engineName",connectionOptions:{headers:{"x-elastic-client-meta":`ent=${s.LIB_VERSION}-engines-connector,js=${f},t=${s.LIB_VERSION}-engines-connector,ft=universal`}},hits:{fields:o,highlightedFields:p},query:(0,n.EngineQuery)(),sortOptions:[h],facets:d,filters:u}}}).call(this,i(212))},348:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class QueryManager{constructor(){this.filters=[],this.query=null}setQuery(e){this.query=e}setQueryOptions(e){this.queryOptions=e}setFilters(e){this.filters=e}hasFilters(){return this.filters&&this.filters.length>0}hasQuery(){return!!(this.query&&this.query.length>0)}getQuery(){return this.query}getQueryOptions(){return this.queryOptions}getFilters(){return this.hasFilters()?this.filters:[]}getFiltersById(e){if(!this.hasFilters())return null;const t=this.filters.filter((t=>t.identifier===e));return t.length>0?t:null}setSortBy(e){this.sortBy=e}getSortBy(){return this.sortBy}}},349:function(e,t,i){var a=i(710),s=i(711);e.exports=function(e,t,i){(void 0!==i&&!s(e[t],i)||void 0===i&&!(t in e))&&a(e,t,i)}},350:function(e,t,i){e.exports=i(13)(361)},351:function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},352:function(e,t,i){e.exports=i(13)(1198)},353:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GeoDistanceOptionsFacet=t.MultiQueryOptionsFacet=t.HierarchicalMenuFacet=t.DateRangeFacet=t.RangeFacet=t.RefinementSelectFacet=void 0;var c=i(736);Object.defineProperty(t,"RefinementSelectFacet",{enumerable:!0,get:function(){return n(c).default}});var r=i(738);Object.defineProperty(t,"RangeFacet",{enumerable:!0,get:function(){return n(r).default}});var l=i(739);Object.defineProperty(t,"DateRangeFacet",{enumerable:!0,get:function(){return n(l).default}});var o=i(740);Object.defineProperty(t,"HierarchicalMenuFacet",{enumerable:!0,get:function(){return n(o).default}});var p=i(741);Object.defineProperty(t,"MultiQueryOptionsFacet",{enumerable:!0,get:function(){return n(p).default}});var u=i(742);Object.defineProperty(t,"GeoDistanceOptionsFacet",{enumerable:!0,get:function(){return n(u).default}}),s(i(743),t),s(i(744),t)},354:function(e,t){e.exports=function(e){return void 0===e}},355:function(e,t,i){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchClientTransporter=void 0;var s=i(745);Object.defineProperty(t,"FetchClientTransporter",{enumerable:!0,get:function(){return a(s).default}})},356:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldResponseMapper=void 0,t.fieldResponseMapper=function(e){const t=e.fields,i=e.highlight||{};return[...new Set(Object.keys(t).concat(Object.keys(i)))].reduce(((e,a)=>Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},t[a]?{raw:t[a]}:{}),i[a]?{snippet:i[a]}:{})})),{id:{raw:e.id},_meta:{id:e.rawHit._id,rawHit:e.rawHit}})}},558:function(e,t,i){var a=i(46),s=i(559);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},559:function(e,t,i){(t=i(47)(!1)).push([e.i,".searchApplicationHeaderBackgroundColor{background-color:#25262e}",""]),e.exports=t},560:function(e,t,i){var a=i(46),s=i(561);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);a(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},561:function(e,t,i){(t=i(47)(!1)).push([e.i,".searchApplicationHeaderBackgroundColor{background-color:#f5f7fa}",""]),e.exports=t},704:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)},n=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=c(i(705)),l=c(i(761)),o=i(762);s(i(763),t),t.default=class EngineConnector{constructor(e){if(this.config=e,function(e){return void 0!==e.performRequest}(e))this.transporter=e;else{if(!e.host)throw new Error("Engine Host must be provided.");if(!e.engineName)throw new Error("Engine Name must be provided.");if(!e.apiKey)throw new Error("API Key must be provided.");const{host:t,engineName:i,apiKey:a}=e;this.transporter=new o.EngineTransporter(t,i,a)}}onResultClick(){}onAutocompleteResultClick(){}onSearch(e,t){return n(this,void 0,void 0,(function*(){return(0,r.default)({state:e,queryConfig:t,transporter:this.transporter})}))}onAutocomplete(e,t){return n(this,void 0,void 0,(function*(){return(0,l.default)({state:e,queryConfig:t,transporter:this.transporter})}))}}},705:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},c=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=r(i(178)),o=n(i(254)),p=r(i(759)),u=r(i(760));t.default=function(e){return c(this,void 0,void 0,(function*(){const{state:t,queryConfig:i}=e,a=(0,o.default)({state:t,queryConfig:i}),s=(0,l.default)(a,e.transporter),n=(0,p.default)(t,i),c=(0,o.buildBaseFilters)(i.filters),r=yield s.query(n.query).setFilters(n.filters).setSortBy(n.sort).execute({facets:i.facets&&Object.keys(i.facets).length>0,hits:{from:n.from,size:n.size,includeRawHit:!0}},c);return(0,u.default)(r)}))}},706:function(e,t,i){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeESQueries=void 0;const s=a(i(707)),n=i(253);t.mergeESQueries=e=>s.default({aggs:{}},...e),t.default=function(e,i,a,s,c){var r,l,o;const p=e.hasQuery()&&i.query?i.query.getFilter(e):null,u=n.filterTransform(e,i.filters),d=[].concat(a,(null===(r=null==u?void 0:u.bool)||void 0===r?void 0:r.must)||[]),h=p||(d.length>0?{}:null);d.length&&(h.bool?Object.assign(h.bool,{filter:(null===(l=h.bool.filter)||void 0===l?void 0:l.length)?[].concat(h.bool.filter,d):d}):Object.assign(h,{bool:{filter:d}}));const f=n.filterTransform(e,s);let j,g;null===(o=i.hits.highlightedFields)||void 0===o||o.forEach((e=>{j||(j={fields:{}}),"string"==typeof e?j.fields[e]={}:j.fields[e.field]=e.config})),i.collapse&&(g={field:i.collapse.field,inner_hits:i.collapse.inner_hits});const b={_source:{includes:i.hits.fields}};return t.mergeESQueries([{size:0},b,h&&{query:h},g&&{collapse:g},f&&{post_filter:f},j&&{highlight:j},...c].filter(Boolean))}},707:function(e,t,i){var a=i(708),s=i(730)((function(e,t,i){a(e,t,i)}));e.exports=s},708:function(e,t,i){var a=i(709),s=i(349),n=i(712),c=i(714),r=i(350),l=i(352),o=i(351);e.exports=function e(t,i,p,u,d){t!==i&&n(i,(function(n,l){if(d||(d=new a),r(n))c(t,i,l,p,e,u,d);else{var h=u?u(o(t,l),n,l+"",t,i,d):void 0;void 0===h&&(h=n),s(t,l,h)}}),l)}},709:function(e,t,i){e.exports=i(13)(1600)},710:function(e,t,i){e.exports=i(13)(1618)},711:function(e,t,i){e.exports=i(13)(833)},712:function(e,t,i){var a=i(713)();e.exports=a},713:function(e,t){e.exports=function(e){return function(t,i,a){for(var s=-1,n=Object(t),c=a(t),r=c.length;r--;){var l=c[e?r:++s];if(!1===i(n[l],l,n))break}return t}}},714:function(e,t,i){var a=i(349),s=i(715),n=i(716),c=i(717),r=i(718),l=i(719),o=i(720),p=i(721),u=i(724),d=i(725),h=i(350),f=i(726),j=i(727),g=i(351),b=i(728);e.exports=function(e,t,i,m,x,O,y){var A=g(e,i),S=g(t,i),E=y.get(S);if(E)a(e,i,E);else{var _=O?O(A,S,i+"",e,t,y):void 0,v=void 0===_;if(v){var F=o(S),k=!F&&u(S),M=!F&&!k&&j(S);_=S,F||k||M?o(A)?_=A:p(A)?_=c(A):k?(v=!1,_=s(S,!0)):M?(v=!1,_=n(S,!0)):_=[]:f(S)||l(S)?(_=A,l(A)?_=b(A):h(A)&&!d(A)||(_=r(S))):v=!1}v&&(y.set(S,_),x(_,S,m,O,y),y.delete(S)),a(e,i,_)}}},715:function(e,t,i){e.exports=i(13)(3509)},716:function(e,t,i){e.exports=i(13)(3518)},717:function(e,t,i){e.exports=i(13)(3510)},718:function(e,t,i){e.exports=i(13)(3519)},719:function(e,t,i){e.exports=i(13)(1608)},720:function(e,t,i){e.exports=i(13)(296)},721:function(e,t,i){var a=i(722),s=i(723);e.exports=function(e){return s(e)&&a(e)}},722:function(e,t,i){e.exports=i(13)(1196)},723:function(e,t,i){e.exports=i(13)(294)},724:function(e,t,i){e.exports=i(13)(1192)},725:function(e,t,i){e.exports=i(13)(887)},726:function(e,t,i){e.exports=i(13)(3530)},727:function(e,t,i){e.exports=i(13)(1610)},728:function(e,t,i){var a=i(729),s=i(352);e.exports=function(e){return a(e,s(e))}},729:function(e,t,i){e.exports=i(13)(692)},730:function(e,t,i){var a=i(731),s=i(735);e.exports=function(e){return a((function(t,i){var a=-1,n=i.length,c=n>1?i[n-1]:void 0,r=n>2?i[2]:void 0;for(c=e.length>3&&"function"==typeof c?(n--,c):void 0,r&&s(i[0],i[1],r)&&(c=n<3?void 0:c,n=1),t=Object(t);++a<n;){var l=i[a];l&&e(t,l,a,c)}return t}))}},731:function(e,t,i){var a=i(732),s=i(733),n=i(734);e.exports=function(e,t){return n(s(e,t,a),e+"")}},732:function(e,t,i){e.exports=i(13)(3540)},733:function(e,t,i){e.exports=i(13)(3535)},734:function(e,t,i){e.exports=i(13)(3537)},735:function(e,t,i){e.exports=i(13)(3821)},736:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(737);t.default=class RefinementSelectFacet{constructor(e){this.config=e,this.excludeOwnFilters=!1,this.excludeOwnFilters=this.config.multipleSelect}getLabel(){return this.config.label}getIdentifier(){return this.config.identifier}getFilters(e){const t=this.excludeOwnFilters?"should":"must";return{bool:{[t]:e.map((e=>({term:{[this.config.field]:e.value}})))}}}getAggregation(e){return{[this.getIdentifier()]:{terms:Object.assign(Object.assign({field:this.config.field,size:(null==e?void 0:e.size)||this.config.size||5},this.config.order?{order:{count:{_count:"desc"},value:{_key:"asc"}}[this.config.order]}:{}),(null==e?void 0:e.query)?{include:a.createRegexQuery(e.query)}:{})}}}getSelectedFilter(e){return{identifier:this.getIdentifier(),id:`${this.getIdentifier()}_${e.value}`,label:this.getLabel(),display:this.config.display||"ListFacet",type:"ValueSelectedFilter",value:e.value}}transformResponse(e){return{identifier:this.getIdentifier(),label:this.getLabel(),display:this.config.display||"ListFacet",type:"RefinementSelectFacet",entries:e.buckets.map((e=>({label:e.key,count:e.doc_count})))}}}},737:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRegexQuery=void 0,t.createRegexQuery=e=>{let t=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return t=t.split("").map((e=>/[a-z]/.test(e)?`[${e}${e.toUpperCase()}]`:e)).join(""),t=`${t}.*`,e.length>2&&(t=`([a-zA-Z]+ )+?${t}`),t}},738:function(e,t,i){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(i(354));t.default=class RangeFacet{constructor(e){this.config=e,this.excludeOwnFilters=!0}getLabel(){return this.config.label}getIdentifier(){return this.config.identifier}getFilters(e){const t={};return s.default(e[0].min)||(t.gte=e[0].min),s.default(e[0].max)||(t.lte=e[0].max),{range:{[this.config.field]:t}}}getAggregation(){return{[this.getIdentifier()]:{histogram:{field:this.config.field,interval:this.config.range.interval,min_doc_count:this.config.range.min_doc_count||0,extended_bounds:{min:this.config.range.min,max:this.config.range.max}}}}}getSelectedFilter(e){return{identifier:this.getIdentifier(),id:`${this.getIdentifier()}_${e.min}_${e.max}`,label:this.getLabel(),display:this.config.display||"RangeSliderFacet",type:"NumericRangeSelectedFilter",min:e.min,max:e.max}}transformResponse(e){return{identifier:this.getIdentifier(),label:this.getLabel(),display:this.config.display||"RangeSliderFacet",type:"RangeFacet",entries:e.buckets.map((e=>({label:e.key,count:e.doc_count})))}}}},739:function(e,t,i){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(i(354));t.default=class DateRangeFacet{constructor(e){this.config=e,this.excludeOwnFilters=!0}getLabel(){return this.config.label}getIdentifier(){return this.config.identifier}getFilters(e){const t={};return s.default(e[0].dateMin)||(t.gte=e[0].dateMin),s.default(e[0].dateMax)||(t.lte=e[0].dateMax),{range:{[this.config.field]:t}}}getAggregation(){return{}}getSelectedFilter(e){return{type:"DateRangeSelectedFilter",id:`${this.getIdentifier()}_${e.dateMin}_${e.dateMax}`,identifier:this.getIdentifier(),label:this.getLabel(),dateMin:e.dateMin,dateMax:e.dateMax,display:this.config.display||"DateRangeFacet"}}transformResponse(){return{identifier:this.getIdentifier(),label:this.getLabel(),type:"DateRangeFacet",display:this.config.display||"DateRangeFacet",entries:null}}}},740:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class HierarchicalMenuFacet{constructor(e){this.config=e,this.excludeOwnFilters=!0}getLabel(){return this.config.label}getIdentifier(){return this.config.identifier}getFilters(e){return{bool:{must:e.map((e=>({term:{[this.config.fields[e.level-1]]:e.value}})))}}}getAggregation(e,t){const i=t.getFiltersById(this.config.identifier)||[],a=this.config.fields.reduce(((e,t,a)=>{const s=a+1,n=i.filter((e=>e.level<s));return n.length===s-1?Object.assign(Object.assign({},e),{[`lvl_${s}`]:{filter:0===n.length?{match_all:{}}:{bool:{must:n.map((e=>({term:{[this.config.fields[e.level-1]]:{value:e.value}}})))}},aggs:{aggs:{terms:{field:this.config.fields[s-1]}}}}}):e}),{});return{[this.getIdentifier()]:{filter:{match_all:{}},aggs:a}}}getSelectedFilter(e){return{type:"HierarchicalValueSelectedFilter",id:`${this.getIdentifier()}_${e.value}`,identifier:this.getIdentifier(),label:this.getLabel(),value:e.value,level:e.level,display:this.config.display||"HierarchicalMenuFacet"}}transformResponse(e,t){const i=t.getFiltersById(this.config.identifier)||[],a=(t,s="")=>{if(e[`lvl_${t}`]){const n=i.find((e=>e.level===t));return e[`lvl_${t}`].aggs.buckets.map((e=>{const i=(null==n?void 0:n.value)===e.key,c=`${s}_${this.getIdentifier()}_${e.key}_${t}${i&&"_selected"}`;return{label:e.key,count:e.doc_count,level:t,entries:i?a(t+1,c):null}}))}return null};return{identifier:this.getIdentifier(),label:this.getLabel(),type:"HierarchicalMenuFacet",display:this.config.display||"HierarchicalMenuFacet",entries:a(1)}}}},741:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=e=>t=>t.min||t.max?{range:{[e]:Object.assign(Object.assign({},t.min&&{gte:t.min}),t.max&&{lte:t.max})}}:t.value?{term:{[e]:t.value}}:t.dateMin||t.dateMax?{range:{[e]:Object.assign(Object.assign({},t.dateMin&&{gte:t.dateMin}),t.dateMax&&{lte:t.dateMax})}}:void 0;t.default=class MultiQueryOptionsFacet{constructor(e){this.config=e,this.excludeOwnFilters=!1,this.excludeOwnFilters=e.multipleSelect}getLabel(){return this.config.label}getIdentifier(){return this.config.identifier}getFilters(e){const t=this.excludeOwnFilters?"should":"must",i=e.map((e=>this.config.options.find((t=>t.label===e.value)))).filter((e=>!!e));return{bool:{[t]:i.map(a(this.config.field))}}}getAggregation(){const e=this.config.options.map(a(this.config.field)),t=this.config.options.reduce(((t,i,a)=>(t[i.label]=e[a],t)),{});return{[this.getIdentifier()]:{filters:{filters:t}}}}getSelectedFilter(e){return{identifier:this.getIdentifier(),id:`${this.getIdentifier()}_${e.value}`,label:this.getLabel(),display:this.config.display||"ListFacet",type:"MultiQueryOptionsFacet",value:e.value}}transformResponse(e){return{identifier:this.getIdentifier(),label:this.getLabel(),display:this.config.display||"ListFacet",type:"MultiQueryOptionsFacet",entries:this.config.options.map((t=>{var i;const a=(null===(i=e.buckets[t.label])||void 0===i?void 0:i.doc_count)||0;return{label:t.label,count:a}}))}}}},742:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class GeoDistanceOptionsFacet{constructor(e){this.config=e,this.excludeOwnFilters=!1,this.excludeOwnFilters=e.multipleSelect,this.unit=e.unit||"mi"}getLabel(){return this.config.label}getIdentifier(){return this.config.identifier}getFilters(e){const t=this.excludeOwnFilters?"should":"must",i=e.map((({value:e})=>this.config.ranges.find((t=>t.label===e))));return{bool:{[t]:i.map((e=>({bool:Object.assign(Object.assign({},e.from?{must_not:[{geo_distance:{distance:e.from+this.config.unit,[this.config.field]:this.config.origin}}]}:{}),e.to?{must:[{geo_distance:{distance:e.to+this.config.unit,[this.config.field]:this.config.origin}}]}:{})})))}}}getAggregation(){return{[this.getIdentifier()]:{geo_distance:{field:this.config.field,origin:this.config.origin,unit:this.unit,keyed:!0,ranges:this.config.ranges.map((e=>({from:e.from,to:e.to,key:e.label})))}}}}getSelectedFilter(e){return{identifier:this.getIdentifier(),id:`${this.getIdentifier()}_${e.value}`,label:this.getLabel(),display:this.config.display||"ListFacet",type:"GeoDistanceOptionsFacet",value:e.value}}transformResponse(e){return{identifier:this.getIdentifier(),label:this.getLabel(),display:this.config.display||"ListFacet",type:"GeoDistanceOptionsFacet",entries:this.config.ranges.map((t=>{var i;const a=(null===(i=e.buckets[t.label])||void 0===i?void 0:i.doc_count)||0;return{label:t.label,count:a}}))}}}},743:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},744:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FacetSelectedRule=t.VisibleWhen=t.VisibleWhenRuleSet=void 0;class VisibleWhenRuleSet{constructor(e,t){this.facets=e,this.rules=t}getActiveFacets(e,t){return this.rules.filter((i=>i(e,t))).length===this.rules.length?this.facets:[]}}t.VisibleWhenRuleSet=VisibleWhenRuleSet,t.VisibleWhen=function(e,t){return new VisibleWhenRuleSet(e,t)},t.FacetSelectedRule=function(e,t){return i=>{const a=i.getFiltersById(e);return!!a&&(!t||(t?!!a.find((e=>e.value===t)):void 0))}}},745:function(e,t,i){"use strict";var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=i(746);t.default=class FetchClientTransporter{constructor(e){this.config=e}performRequest(e,t={}){var i,n;return a(this,void 0,void 0,(function*(){if(!fetch)throw new Error("Fetch is not supported in this browser / environment");if(!this.config.host&&!this.config.cloud)throw new Error("Host or cloud is required");let a=this.config.host;this.config.cloud&&(a=s.getHostFromCloud(this.config.cloud));const{index:c=this.config.index}=t,r=yield fetch(a+"/"+c+"/_search",{method:"POST",body:JSON.stringify(e),headers:Object.assign(Object.assign({"Content-Type":"application/json"},(null===(i=this.config.connectionOptions)||void 0===i?void 0:i.headers)||{}),(null===(n=this.config.connectionOptions)||void 0===n?void 0:n.apiKey)?{Authorization:`ApiKey ${this.config.connectionOptions.apiKey}`}:{})});return yield r.json()}))}}},746:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHostFromCloud=void 0,t.getHostFromCloud=function(e){const{id:t}=e,i=atob(t.split(":")[1]).split("$");return`https://${i[1]}.${i[0]}`}},747:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ElasticSearchResponseTransformer=void 0;const a=i(253),s=(e,t)=>Object.keys(e.inner_hits).reduce(((i,a)=>{const s=e.inner_hits[a],c={items:s.hits.hits.map((e=>Object.assign({id:e._id,fields:e._source,highlight:e.highlight||{}},t?{rawHit:e}:{}))),total:n(s.hits)};return Object.assign(Object.assign({},i),{[a]:c})}),{}),n=e=>"number"==typeof e.total.value?e.total.value:e.total;t.ElasticSearchResponseTransformer=class ElasticSearchResponseTransformer{transformResponse(e,t,i,c,r){const{hits:l}=e,o=r.facets?a.getFacetsFromResponse(t,e,i):null,p=function(e,t,i,a){const s=[...t||[],...a.filters||[]],n=i.getFilters().map((e=>{const t=s.find((t=>t.getIdentifier()===e.identifier));return t?t.getSelectedFilter(e):{identifier:e.identifier,disabled:!0}})),{appliedFilters:c,disabledFilters:r}=n.reduce(((e,t)=>(function(e){return e.disabled}(t)?e.disabledFilters.push(t):e.appliedFilters.push(t),e)),{appliedFilters:[],disabledFilters:[]});return{total:"number"==typeof e.hits.total.value?e.hits.total.value:e.hits.total,query:i.getQuery()||"",sortOptions:(a.sortOptions||[]).map((e=>({id:e.id,label:e.label}))),appliedFilters:c,disabledFilters:r}}(e,t,i,c),u=n(l),d=r.hits.size,h=r.hits.from,f=i.getSortBy();return{summary:p,facets:o,hits:{items:l.hits.map((e=>Object.assign(Object.assign({id:e._id,fields:e._source,highlight:e.highlight||{}},c.collapse&&{innerHits:s(e,r.hits.includeRawHit)}||{}),r.hits.includeRawHit?{rawHit:e}:{}))),page:{total:u,totalPages:Math.ceil(u/d),pageNumber:h/d,from:h,size:d}},sortedBy:null==f?void 0:f.id}}}},748:function(e,t,i){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PrefixQuery=t.CustomQuery=t.MultiMatchQuery=void 0;var s=i(749);Object.defineProperty(t,"MultiMatchQuery",{enumerable:!0,get:function(){return a(s).default}});var n=i(750);Object.defineProperty(t,"CustomQuery",{enumerable:!0,get:function(){return a(n).default}});var c=i(751);Object.defineProperty(t,"PrefixQuery",{enumerable:!0,get:function(){return a(c).default}})},749:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class MultiMatchQuery{constructor(e){this.config=e}getFilter(e){return e.hasQuery()?{bool:{should:[{multi_match:{query:e.getQuery(),fields:this.config.fields,type:"best_fields",operator:"and"}},{multi_match:{query:e.getQuery(),fields:this.config.fields,type:"cross_fields"}},{multi_match:{query:e.getQuery(),fields:this.config.fields,type:"phrase"}},{multi_match:{query:e.getQuery(),fields:this.config.fields,type:"phrase_prefix"}}]}}:null}}},750:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class CustomQuery{constructor(e){this.config=e}getFilter(e){return this.config.queryFn(e.getQuery(),e)}}},751:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class PrefixQuery{constructor(e){this.fields=e.fields}getFilter(e){return{bool:{must:[{multi_match:{query:e.getQuery(),type:"bool_prefix",fields:this.fields}}]}}}}},752:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=t.NumericRangeFilter=t.TermFilter=t.GeoBoundingBoxFilter=void 0;var c=i(179);Object.defineProperty(t,"GeoBoundingBoxFilter",{enumerable:!0,get:function(){return n(c).default}});var r=i(179);Object.defineProperty(t,"TermFilter",{enumerable:!0,get:function(){return n(r).default}});var l=i(179);Object.defineProperty(t,"NumericRangeFilter",{enumerable:!0,get:function(){return n(l).default}});var o=i(179);Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return n(o).default}}),s(i(753),t)},753:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},754:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||a(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(755),t),s(i(756),t)},755:function(e,t,i){"use strict";var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HitsSuggestor=void 0;const n=s(i(348));t.HitsSuggestor=class HitsSuggestor{constructor(e){this.options=e}getSuggestions(e,t){var i;return a(this,void 0,void 0,(function*(){const{index:a,identifier:s,hits:c,query:r,size:l=5}=this.options,o=new n.default;o.setQuery(e);const p={_source:{includes:c.fields}};let u;null===(i=c.highlightedFields)||void 0===i||i.forEach((e=>{u||(u={fields:{}}),"string"==typeof e?u.fields[e]={}:u.fields[e.field]=e.config}));const d=Object.assign(Object.assign({size:l,query:r.getFilter(o)},p),{highlight:u});return{identifier:s,hits:(yield t.performRequest(d,{index:a})).hits.hits.map((e=>({id:e._id,fields:e._source,highlight:e.highlight||{},rawHit:e})))}}))}}},756:function(e,t,i){"use strict";var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CompletionSuggester=void 0,t.CompletionSuggester=class CompletionSuggester{constructor(e){this.options=e}getSuggestions(e,t){return a(this,void 0,void 0,(function*(){const{index:i,identifier:a,field:s,size:n=5,skip_duplicates:c}=this.options,r={size:0,_source:[],suggest:{suggest:{prefix:e,completion:{size:n,skip_duplicates:!c,field:s,fuzzy:{fuzziness:1}}}}};return{identifier:a,suggestions:(yield t.performRequest(r,{index:i})).suggest.suggest[0].options.map((e=>e.text))}}))}}},757:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIB_VERSION=void 0,t.LIB_VERSION="1.20.2"},758:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EngineQuery=void 0;const a=i(178);t.EngineQuery=()=>new a.CustomQuery({queryFn:e=>({bool:{must:[{query_string:{query:e}}]}})})},759:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFilters=void 0;const a=i(140),s=i(254);function n(e=[],t=[]){return e.reduce(((e,i)=>{if(t.includes(i))return e;const n=i.values.map((e=>a.helpers.isFilterValueRange(e)?Object.assign(Object.assign({identifier:i.field},(0,s.isValidDateString)(e.from)?{dateMin:e.from}:{min:e.from}),(0,s.isValidDateString)(e.to)?{dateMax:e.to}:{max:e.to}):{identifier:i.field,value:e}));return[...e,...n]}),[])}t.getFilters=n,t.default=function(e,t){var i;return{query:e.searchTerm,filters:e.filters?n(e.filters,t.filters):[],from:(e.current-1)*e.resultsPerPage,size:e.resultsPerPage,sort:(null===(i=e.sortList)||void 0===i?void 0:i.length)>0?"selectedOption":null}}},760:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=i(356);t.default=function(e){const t=(e.facets||[]).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t.identifier]:[{data:t.entries.map((e=>({value:e.label,count:e.count}))),type:"value"}]})),{}),i=(e.hits.page.pageNumber+1)*e.hits.page.size;return{resultSearchTerm:e.summary.query,totalPages:e.hits.page.totalPages,pagingStart:e.hits.page.pageNumber*e.hits.page.size+1,pagingEnd:i>e.summary.total?e.summary.total:i,wasSearched:!1,totalResults:e.summary.total,facets:t,results:e.hits.items.map(a.fieldResponseMapper),requestId:null,rawResponse:null}}},761:function(e,t,i){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},c=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(i(178)),l=i(356),o=i(254);t.default=function(e){return c(this,void 0,void 0,(function*(){const{state:t,queryConfig:i}=e,a=[];if(i.results){const{hitFields:e,highlightFields:t}=(0,o.getResultFields)(i.results.result_fields);a.push(new r.HitsSuggestor({identifier:"hits-suggestions",hits:{fields:e,highlightedFields:t},query:new r.PrefixQuery({fields:["*"]}),size:i.results.resultsPerPage||5}))}if(i.suggestions&&i.suggestions.types){const e=Object.keys(i.suggestions.types).map((e=>{const t=i.suggestions.types[e],a=i.suggestions.size||5;if("results"===t.queryType){const{hitFields:i,highlightFields:s}=(0,o.getResultFields)(t.result_fields);return new r.HitsSuggestor({identifier:`suggestions-hits-${e}`,index:t.index,hits:{fields:i,highlightedFields:s},query:new r.PrefixQuery({fields:["*"]}),size:a})}if(!t.queryType||"suggestions"===t.queryType){const{fields:i}=t;return new r.CompletionSuggester({identifier:`suggestions-completion-${e}`,field:i[0],size:a})}}));a.push(...e)}const s={host:"host",index:"engineName",suggestions:a};return(yield(0,r.default)(s,e.transporter).executeSuggestions(t.searchTerm)).reduce(((e,t)=>{const{identifier:a}=t;if("hits-suggestions"===a)return Object.assign(Object.assign({},e),{autocompletedResults:t.hits.map(l.fieldResponseMapper)});if(a.startsWith("suggestions-completion-")){const i=a.replace("suggestions-completion-","");return Object.assign(Object.assign({},e),{autocompletedSuggestions:Object.assign(Object.assign({},e.autocompletedSuggestions),{[i]:t.suggestions.map((e=>({suggestion:e})))})})}if(a.startsWith("suggestions-hits-")){const s=a.replace("suggestions-hits-",""),n=i.suggestions.types[s];return Object.assign(Object.assign({},e),{autocompletedSuggestions:Object.assign(Object.assign({},e.autocompletedSuggestions),{[s]:t.hits.map((e=>({queryType:n.queryType,result:(0,l.fieldResponseMapper)(e)})))})})}}),{autocompletedSuggestions:{}})}))}},762:function(e,t,i){"use strict";var a=this&&this.__awaiter||function(e,t,i,a){return new(i||(i=Promise))((function(s,n){function c(e){try{l(a.next(e))}catch(e){n(e)}}function r(e){try{l(a.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(c,r)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EngineTransporter=void 0,t.EngineTransporter=class EngineTransporter{constructor(e,t,i){this.host=e,this.engineName=t,this.apiKey=i}performRequest(e){return a(this,void 0,void 0,(function*(){if(!fetch)throw new Error("Fetch is not supported in this browser / environment");const t=yield fetch(`${this.host}/api/engines/${this.engineName}/_search`,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:`ApiKey ${this.apiKey}`}});return yield t.json()}))}}},763:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},764:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(27),s=i(17),n=a.__importDefault(i(765));t.default=function(e,t){void 0===t&&(t=200);var i=s.useState(e),a=i[0],c=i[1],r=s.useRef(),l=s.useRef(null),o=s.useRef(0);return s.useEffect((function(){if(r.current)l.current=e,o.current=!0;else{c(e);var i=function(){o.current?(o.current=!1,c(l.current),r.current=setTimeout(i,t)):r.current=void 0};r.current=setTimeout(i,t)}}),[e]),n.default((function(){r.current&&clearTimeout(r.current)})),a}},765:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(27),s=i(17),n=a.__importDefault(i(766));t.default=function(e){var t=s.useRef(e);t.current=e,n.default((function(){return function(){return t.current()}}))}},766:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(17);t.default=function(e){a.useEffect(e,[])}}}]);