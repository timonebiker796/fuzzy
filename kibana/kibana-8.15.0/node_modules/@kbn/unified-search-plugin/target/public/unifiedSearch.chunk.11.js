(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[11],{150:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return IndexPatternSelect}));var i=n(3),s=n.n(i),o=n(2),a=n.n(o),d=n(7),r=n.n(d),h=n(0),c=n(6),u=n(92),l=n(69),p=n(1);class IndexPatternSelect extends h.Component{constructor(t){super(t),a()(this,"isMounted",!1),a()(this,"state",void 0),a()(this,"fetchSelectedIndexPattern",(async t=>{if(!t)return void this.setState({selectedIndexPattern:void 0});let e;try{e=(await this.props.indexPatternService.get(t)).getName()}catch(t){return}this.isMounted&&this.setState({selectedIndexPattern:{value:t,label:e}})})),a()(this,"debouncedFetch",r.a.debounce((async t=>{const e=await this.props.indexPatternService.getIdsWithTitle();if(!this.isMounted||t!==this.state.searchValue)return;const n=[];for(let i=0;i<e.length;i++){const s=e[i].name?e[i].name:e[i].title;s&&s.toLowerCase().includes(t.toLowerCase())&&n.push({label:s,value:e[i].id})}this.setState({isLoading:!1,options:n}),this.props.onNoIndexPatterns&&""===t&&0===n.length&&this.props.onNoIndexPatterns()}),300)),a()(this,"fetchOptions",((t="")=>{this.setState({isLoading:!0,searchValue:t},this.debouncedFetch.bind(null,t))})),a()(this,"onChange",(t=>{this.props.onChange(r.a.get(t,"0.value"))})),this.state={isLoading:!1,options:[],selectedIndexPattern:void 0,searchValue:void 0}}componentWillUnmount(){this.isMounted=!1,this.debouncedFetch.cancel()}componentDidMount(){this.isMounted=!0,this.fetchOptions(""),this.fetchSelectedIndexPattern(this.props.indexPatternId)}UNSAFE_componentWillReceiveProps(t){t.indexPatternId!==this.props.indexPatternId&&this.fetchSelectedIndexPattern(t.indexPatternId)}render(){const{onChange:t,indexPatternId:e,placeholder:n,onNoIndexPatterns:i,indexPatternService:o,...a}=this.props,d=Object(u.a)(this.state.options,["label"]);return Object(p.jsx)(c.EuiComboBox,s()({},a,{placeholder:n,singleSelection:!0,isLoading:this.state.isLoading||this.props.isLoading,onSearchChange:this.fetchOptions,options:this.state.options,selectedOptions:this.state.selectedIndexPattern?[this.state.selectedIndexPattern]:[],onChange:this.onChange,truncationProps:l.a,inputPopoverProps:{panelMinWidth:d}}))}}},92:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));const i={maxWidth:550,avCharWidth:7,paddingsWidth:116},s=(t,e)=>t.reduce(((t,n)=>{const i=e.find((t=>n[t]));if(!i)return t;const s=n[i].length;return t>s?t:s}),0),o=t=>t.reduce(((t,e)=>t>e.length?t:e.length),0);function a(t,e,n){return function(t,e){const{maxWidth:n,avCharWidth:s,paddingsWidth:o,minWidth:a}={...i,...e},d=o+t*s;return a&&d<a?a:Math.min(d,n)}(e?s(t,e):o(t),n)}}}]);