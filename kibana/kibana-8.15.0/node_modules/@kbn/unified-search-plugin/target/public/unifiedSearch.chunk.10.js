(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[10],{139:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgMjcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+YWRkPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgeD0iLTI4LjQlIiB5PSItMTcuMSUiIHdpZHRoPSIxNTYuOCUiIGhlaWdodD0iMTM0LjMlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMSI+CiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjEiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuOSIgaW49InNoYWRvd09mZnNldE91dGVyMSIgcmVzdWx0PSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC42NSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgICAgICA8ZmVNZXJnZT4KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPgogICAgICAgICAgICA8L2ZlTWVyZ2U+CiAgICAgICAgPC9maWx0ZXI+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiIGlkPSJsaW5lYXJHcmFkaWVudC0yIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzVDRDMzMSIgb2Zmc2V0PSIwJSI+PC9zdG9wPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMDc4QzA0IiBvZmZzZXQ9IjEwMCUiPjwvc3RvcD4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9ImFkZCIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNC4wMDAwMDAsIDQuNTAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJjaXJjbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxMy41MDAwMDApIiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTIpIj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLDkgQzAsMTMuOTcgNC4wMywxOCA5LDE4IEw5LDE4IEMxMy45NywxOCAxOCwxMy45NyAxOCw5IEwxOCw5IEMxOCw0LjAyOSAxMy45NywwIDksMCBMOSwwIEM0LjAzLDAgMCw0LjAyOSAwLDkiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8ZyBpZD0iYXJyb3ciPgogICAgICAgICAgICAgICAgPHBvbHlnb24gaWQ9ImFycm93LWJvcmRlciIgZmlsbD0iI0ZGRkZGRiIgcG9pbnRzPSIwIDE2IDAgMCAxMS42MDAwMDA0IDExLjYwODExNzQgNC41NTM1MzMwNiAxMS42MDgxMTc0IDQuNDAyNDE1ODEgMTEuNzMyMDAxMiI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxIDIuMjk5OTk5OTUgMSAxMy40OTk5OTk4IDMuOTY5IDEwLjYzMDkyNTggNC4xMjkgMTAuNDkxNzc2NyA5LjE2NSAxMC41Ij48L3BvbHlnb24+CiAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNS4wMDAwMDAsIDE3LjUwMDAwMCkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgaWQ9IlBhdGgiPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUuMjUsMCBDNS41MjYxNDIzNywwIDUuNzUsMC4yMjM4NTc2MjUgNS43NSwwLjUgTDUuNzUsNC4yNSBMOS41LDQuMjUgQzkuNzc2MTQyMzcsNC4yNSAxMCw0LjQ3Mzg1NzYzIDEwLDQuNzUgTDEwLDUuMjUgQzEwLDUuNTI2MTQyMzcgOS43NzYxNDIzNyw1Ljc1IDkuNSw1Ljc1IEw1Ljc1LDUuNzUgTDUuNzUsOS41IEM1Ljc1LDkuNzc2MTQyMzcgNS41MjYxNDIzNywxMCA1LjI1LDEwIEw0Ljc1LDEwIEM0LjQ3Mzg1NzYzLDEwIDQuMjUsOS43NzYxNDIzNyA0LjI1LDkuNSBMNC4yNSw1Ljc1IEwwLjUsNS43NSBDMC4yMjM4NTc2MjUsNS43NSAwLDUuNTI2MTQyMzcgMCw1LjI1IEwwLDQuNzUgQzAsNC40NzM4NTc2MyAwLjIyMzg1NzYyNSw0LjI1IDAuNSw0LjI1IEw0LjI1LDQuMjUgTDQuMjUsMC41IEM0LjI1LDAuMjIzODU3NjI1IDQuNDczODU3NjMsMCA0Ljc1LDAgTDUuMjUsMCBaIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},140:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjdweCIgaGVpZ2h0PSI0MHB4IiB2aWV3Qm94PSIwIDAgMjcgNDAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+b3I8L3RpdGxlPgogICAgPGRlZnM+CiAgICAgICAgPGZpbHRlciB4PSItMjguNCUiIHk9Ii0xNi45JSIgd2lkdGg9IjE1Ni44JSIgaGVpZ2h0PSIxMzMuOCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMSIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4KICAgICAgICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC45IiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjY1IDAiIHR5cGU9Im1hdHJpeCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHJlc3VsdD0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgICAgIDxmZU1lcmdlPgogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+CiAgICAgICAgICAgICAgICA8ZmVNZXJnZU5vZGUgaW49IlNvdXJjZUdyYXBoaWMiPjwvZmVNZXJnZU5vZGU+CiAgICAgICAgICAgIDwvZmVNZXJnZT4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8bGluZWFyR3JhZGllbnQgeDE9IjUwJSIgeTE9IjAlIiB4Mj0iNTAlIiB5Mj0iMTAwJSIgaWQ9ImxpbmVhckdyYWRpZW50LTIiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNUNEMzMxIiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwNzhDMDQiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0ib3IiIGZpbHRlcj0idXJsKCNmaWx0ZXItMSkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCA0LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0iY2lyY2xlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMTQuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCw5IEMwLDEzLjk3IDQuMDMsMTggOSwxOCBMOSwxOCBDMTMuOTcsMTggMTgsMTMuOTcgMTgsOSBMMTgsOSBDMTgsNC4wMjkgMTMuOTcsMCA5LDAgTDksMCBDNC4wMywwIDAsNC4wMjkgMCw5IiBmaWxsPSJ1cmwoI2xpbmVhckdyYWRpZW50LTIpIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8ZyBpZD0ib3IiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQuMDAwMDAwLCA1LjAwMDAwMCkiIGZpbGw9IiNGRkZGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjAuNSI+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguMzI4NDQ4OTYsMCBDOS4yMTA4ODc4OSwwIDkuOTMxNjcxMzMsMC42ODE2MTk0OTIgOS45OTUwMDAyOCwxLjU0NjU1OTYzIEwxMCwxLjY3MTU1MDk4IEwxMCwzLjMyODEwMjk5IEMxMC4wMDAyMzczLDQuMjAyODIzMjggOS4zMjU3NDE5Miw0LjkyOTY1MDIgOC40NTM0NDAzMSw0Ljk5NDY1NDMyIEw4LjMzMzQ0ODYxLDQuOTk5NjUzOTcgTDEuMjM3MjczMDgsNC45OTk2NTM5NyBMMi44Mjg4Mjk1OSw2LjUxNjIxNTY4IEMyLjkxOTI5MDM3LDYuNTk4MzQzNTkgMi45NzA4NzM1OSw2LjcxNDg0NjAyIDIuOTcwODczNTksNi44MzcwMjY4MSBDMi45NzA4NzM1OSw2Ljk1OTIwNzYgMi45MTkyOTAzNyw3LjA3NTcxMDAzIDIuODI4ODI5NTksNy4xNTc4Mzc5NCBDMi42MzMwMTM4LDcuMzM1OTU3MTMgMi4zMzM4NTk4NSw3LjMzNTk1NzEzIDIuMTM4MDQ0MDcsNy4xNTc4Mzc5NCBMMC40Mjk4Mjg5NTksNS41MzI5NTA0IEMwLjE1NjI5NjEyNSw1LjI4Nzc5NjQgMCw0LjkzNzgzMjUzIDAsNC41NzA1MTcwMSBDMCw0LjIwMzIwMTQ5IDAuMTU2Mjk2MTI1LDMuODUzMjM3NjEgMC40Mjk4Mjg5NTksMy42MDgwODM2MiBMMi4xMzgwNDQwNywxLjk4MzE5NjA4IEMyLjMzNDEzNDg3LDEuODA0OTYyMzkgMi42MzM1NzIwNiwxLjgwNDk2MjM5IDIuODI5NjYyODcsMS45ODMxOTYwOCBDMi45MjAxMjM2NCwyLjA2NTMyMzk4IDIuOTcxNzA2ODYsMi4xODE4MjY0MSAyLjk3MTcwNjg2LDIuMzA0MDA3MjEgQzIuOTcxNzA2ODYsMi40MjYxODggMi45MjAxMjM2NCwyLjU0MjY5MDQzIDIuODI5NjYyODcsMi42MjQ4MTgzNCBMMS4yMDg5NDE3LDQuMTY2Mzc4MzEgTDguMzMzNDQ4NjEsNC4xNjYzNzgzMSBDOC43NjE3NTIzLDQuMTYzODc4NDggOS4xMTI1NjEzNiwzLjg0MTQwMDggOS4xNjA4OTEzNSwzLjQyNjQyOTUyIEw5LjE2NjcyNDI4LDMuMzI4MTAyOTkgTDkuMTY2NzI0MjgsMS42NzE1NTA5OCBDOS4xNjY3MjQyOCwxLjI0MTU4MDc0IDguODQzNDEzMzIsMC44ODc0Mzg1OCA4LjQyNjc3NTQ5LDAuODM4Mjc1MzE2IEw4LjMyODQ0ODk2LDAuODMzMjc1NjYyIEw2LjI1MDI1OTQ2LDAuODMzMjc1NjYyIEM2LjAzNDQ1MDE2LDAuODMzNjcyOTQ2IDUuODU0MDU4MjUsMC42NjkyMTA2NSA1LjgzNDU1ODgzLDAuNDU0MjgzNzI2IEM1LjgxNTA1OTQyLDAuMjM5MzU2ODAxIDUuOTYyOTA3NTgsMC4wNDUxMTQ2NjA2IDYuMTc1MjY0NjUsMC4wMDY2NjYyMDUzIEw2LjI1MDI1OTQ2LDAgTDguMzI4NDQ4OTYsMCBaIiBpZD0iUGF0aCI+PC9wYXRoPgogICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDxnIGlkPSJhcnJvdyI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iYXJyb3ctYm9yZGVyIiBmaWxsPSIjRkZGRkZGIiBwb2ludHM9IjAgMTYuNSAwIDAuNSAxMS42MDAwMDA0IDEyLjEwODExNzQgNC41NTM1MzMwNiAxMi4xMDgxMTc0IDQuNDAyNDE1ODEgMTIuMjMyMDAxMiI+PC9wb2x5Z29uPgogICAgICAgICAgICAgICAgPHBvbHlnb24gZmlsbD0iIzAwMDAwMCIgcG9pbnRzPSIxIDIuNzk5OTk5OTUgMSAxMy45OTk5OTk4IDMuOTY5IDExLjEzMDkyNTggNC4xMjkgMTAuOTkxNzc2NyA5LjE2NSAxMSI+PC9wb2x5Z29uPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},62:function(e,t,i){"use strict";i.r(t);var a=i(0),l=i.n(a),n=i(6),s=i(22);const r=l.a.createContext({});var o=i(4),c=i(67),g=i(71),d=i(3),I=i.n(d),u=i(1),b=i(7);const A=Object(b.memoize)((function(e){const t=e.trim();let i=t.split(/[* ]+/).map(b.escapeRegExp).join(".*");return t.includes(" ")&&(i=".*"+i+".*"),new RegExp(i.includes("*")?`^${i}$`:i,"i")})),j=({option:{name:e,label:t},searchValue:i})=>((e,t)=>{if(null==t||!t.trim())return!1;const i=A(t);return!!e.displayName&&i.test(e.displayName)||i.test(e.name)})({name:e||t,displayName:t},i);var M=i(49),C=i.n(M);const p={iconType:"questionInCircle",color:"gray"},D={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function O({type:e,label:t,size:i="s",scripted:a,className:l,...s}){const r=D[e]||p;return Object(u.jsx)(n.EuiToken,I()({},r,{className:C()("kbnFieldIcon",l),"aria-label":t||e,title:t||e,size:i,fill:a?"dark":void 0},s))}var m=i(92),x=i(70),N=i(69);const y={getFieldSelectPlaceholderLabel:()=>o.i18n.translate("unifiedSearch.filter.filtersBuilder.fieldSelectPlaceholder",{defaultMessage:"Select a field"})};function w({field:e,dataView:t,onHandleField:i}){const{disabled:l,suggestionsAbstraction:s}=Object(a.useContext)(r),o=t?Object(x.h)(t):[],c=Object(n.useGeneratedHtmlId)({prefix:"fieldInput"}),g=Object(a.useRef)(null),d=Object(a.useCallback)((([e])=>{i(e)}),[i]),I=Object(a.useCallback)((e=>{let t=e.customLabel||e.name;var i,a;return null!=s&&s.fields[e.name]&&(t=null!==(i=null==s||null===(a=s.fields[e.name])||void 0===a?void 0:a.displayField)&&void 0!==i?i:t),{label:t,name:e.name,value:e.type,prepend:Object(u.jsx)(O,{type:e.type,fill:"none",className:"eui-alignMiddle"})}}),[s]),b=o.map(I),A=b,M=(e?[e]:[]).filter((e=>-1!==o.indexOf(e))).map((e=>A[o.indexOf(e)])),C=Object(m.a)(A,["label"]);return Object(u.jsx)(n.EuiComboBox,{id:c,inputRef:e=>{g.current=e},optionMatcher:j,options:A,selectedOptions:M,onChange:e=>{const t=e.map((({label:e})=>o[b.findIndex((t=>t.label===e))]));d(t)},isDisabled:l,placeholder:y.getFieldSelectPlaceholderLabel(),sortMatchesBy:"startsWith","aria-label":y.getFieldSelectPlaceholderLabel(),isClearable:!1,compressed:!0,fullWidth:!0,"data-test-subj":"filterFieldSuggestionList",singleSelection:N.b,truncationProps:N.a,inputPopoverProps:{panelMinWidth:C}})}const T={getOperatorSelectPlaceholderSelectLabel:()=>o.i18n.translate("unifiedSearch.filter.filtersBuilder.operatorSelectPlaceholderSelect",{defaultMessage:"Select operator"})};function f({field:e,operator:t,params:i,onHandleOperator:l}){const{disabled:n}=Object(a.useContext)(r),s=e?Object(x.j)(e):[],o=Object(a.useCallback)((([e])=>{l(e,e===t?i:void 0)}),[l,t,i]);return Object(u.jsx)(x.b,{fullWidth:!0,compressed:!0,isDisabled:!e||n,placeholder:T.getOperatorSelectPlaceholderSelectLabel(),"aria-label":T.getOperatorSelectPlaceholderSelectLabel(),options:s,selectedOptions:t?[t]:[],getLabel:({message:e})=>e,onChange:o,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterOperatorList",inputPopoverProps:{panelMinWidth:180}})}var z=i(65),S=i(23),h=i(66),Z=i(73);const k=(e,t)=>e?t?"":o.i18n.translate("unifiedSearch.filter.filtersBuilder.selectOperatorPlaceholder",{defaultMessage:"Please select operator first..."}):o.i18n.translate("unifiedSearch.filter.filtersBuilder.selectFieldPlaceholder",{defaultMessage:"Please select a field first..."});function v({dataView:e,field:t,operator:i,params:a,invalid:l,disabled:s,onParamsChange:r,onParamsUpdate:o,timeRangeForSuggestionsOverride:c,filtersForSuggestions:g,suggestionsAbstraction:d}){const I=Object(S.useKibana)();switch(null==i?void 0:i.type){case"exists":return null;case"phrase":return Object(u.jsx)(x.c,{compressed:!0,indexPattern:e,field:t,value:void 0!==a?`${a}`:void 0,onChange:r,timeRangeForSuggestionsOverride:c,filtersForSuggestions:g,fullWidth:!0,invalid:l,disabled:s,suggestionsAbstraction:d});case"phrases":return Object(u.jsx)(x.d,{compressed:!0,indexPattern:e,field:t,values:Array.isArray(a)?a:void 0,onChange:r,onParamsUpdate:o,timeRangeForSuggestionsOverride:c,filtersForSuggestions:g,fullWidth:!0,disabled:s,suggestionsAbstraction:d});case"range":switch(i.id){case h.b.GREATER_OR_EQUAL:return Object(u.jsx)(x.c,{compressed:!0,indexPattern:e,onBlur:e=>{r({from:Object(Z.b)(e,I)})},field:t,value:Object(x.l)(a)&&a.from?`${a.from}`:void 0,onChange:e=>r({from:e}),fullWidth:!0,invalid:l,disabled:s});case h.b.LESS:return Object(u.jsx)(x.c,{onBlur:e=>{r({to:Object(Z.b)(e,I)})},compressed:!0,indexPattern:e,field:t,value:Object(x.l)(a)&&a.to?`${a.to}`:void 0,onChange:e=>r({to:e}),fullWidth:!0,invalid:l,disabled:s});default:return Object(u.jsx)(x.e,{compressed:!0,field:t,value:Object(x.l)(a)?a:void 0,onChange:r,fullWidth:!0,disabled:s})}default:const b=k(Boolean(t),Boolean(null==i?void 0:i.type));return Object(u.jsx)(n.EuiFieldText,{compressed:!0,disabled:!0,placeholder:b,"aria-label":b})}}function L({dataView:e,field:t,operator:i,params:l,onHandleParamsChange:s,onHandleParamsUpdate:o,timeRangeForSuggestionsOverride:c,filtersForSuggestions:g}){const{disabled:d,suggestionsAbstraction:I}=Object(a.useContext)(r),b=Object(a.useCallback)((e=>{s(e)}),[s]),A=Object(a.useCallback)((e=>{o(e)}),[o]),{isInvalid:j,errorMessage:M}=Object(z.c)(t,"string"==typeof l?l:void 0);return Object(u.jsx)(n.EuiFormRow,{fullWidth:!0,isInvalid:j},Object(u.jsx)(n.EuiToolTip,{position:"bottom",content:null!=M?M:null,display:"block"},Object(u.jsx)(v,{field:t,params:l,operator:i,invalid:j,disabled:d,dataView:e,onParamsChange:b,onParamsUpdate:A,timeRangeForSuggestionsOverride:c,filtersForSuggestions:g,suggestionsAbstraction:I})))}const P=e=>e.split(".").map(Number),E=e=>{var t,i;return Object(s.isCombinedFilter)(e)&&null!==(t=null==e||null===(i=e.meta)||void 0===i?void 0:i.params)&&void 0!==t?t:[]},R=(e,t)=>{var i;if(t.length<=1)return{parentFilter:void 0,targetArray:e,parentConditionType:s.BooleanRelation.AND};const a=F(e,B(t)),l=E(a);return{parentFilter:a,targetArray:Array.isArray(l)?l:l?[l]:[],parentConditionType:null!==(i=Object(g.a)(a))&&void 0!==i?i:s.BooleanRelation.AND}},B=e=>e.slice(0,-1).join("."),G=e=>{const t=(e,t)=>Array.isArray(e)?i(e,t):Object(s.isCombinedFilter)(e)?a(e):e,i=(e,i)=>{const a=e.map((i=>{const a=t(i,e);if(Array.isArray(a)){if(1===a.length)return a[0];if(0===a.length)return}return a}),[]).filter(Boolean);return Array.isArray(i)?a.flat():a},a=e=>{const i=E(e).filter(Boolean);return i.length<2?i[0]:e?{...e,meta:{...e.meta,params:t(i,e)}}:void 0};return i(e,e)},F=(e,t)=>((e,t,i)=>{const[a,...l]=P(t);return l.reduce(((e,t)=>E(e)[Number(t)]),e[a])})(e,t),U=(e,t,i,a,l)=>{var n;const r=Object(b.cloneDeep)(e),o=P(i.path),{targetArray:c,parentConditionType:g}=R(r,o),d=null!==(n=o.at(-1))&&void 0!==n?n:0;return a&&g!==a?c.splice(d,1,Object(s.buildCombinedFilter)(a,[c[d],t],l)):c.splice(i.index,0,t),r},W=(e,t)=>{const i=Object(b.cloneDeep)(e),a=P(t.path);return R(i,a).targetArray[t.index]=void 0,i},Y=(e,t)=>{const i=W(e,t);return G(i)},V=(e,t,i,a,l)=>{const n=Object(b.cloneDeep)(e),s=F(n,t.path),r=W(n,t),o=U(r,s,i,a,l);return G(o)},H=(e,t,i,a,l)=>{const n=[...e],r=Object(s.updateFilter)(F(n,t.path),null==i?void 0:i.name,a,l,null==i?void 0:i.type),o=P(t.path),{targetArray:c}=R(n,o),g=o[o.length-1];return c.splice(g,1,r),n};var Q=i(139),J=i.n(Q),X=i(140),_=i.n(X);const K=Object(c.css)("cursor:url(",J.a,"),auto;",""),$=Object(c.css)("cursor:url(",_.a,"),auto;",""),q=e=>Object(c.css)("min-width:calc(",e.size.xl," * 5);flex-grow:1;.euiFormRow{max-width:800px;}",""),ee=e=>Object(c.css)("max-width:calc(",e.size.xl," * 4.5);.euiComboBox__inputWrap{padding-right:calc(",e.size.base,")!important;}",""),te=e=>Object(c.css)("margin:0 ",e.size.xxs,";",""),ie=Object(c.css)({name:"1ajqep0",styles:"&.euiDraggable .euiDraggable__item.euiDraggable__item--isDisabled{cursor:unset;}"}),ae=({children:e,show:t,content:i,...a})=>Object(u.jsx)(l.a.Fragment,null,t?Object(u.jsx)(n.EuiToolTip,I()({content:i,delay:"long"},a),Object(u.jsx)(l.a.Fragment,null,e)):e),le=({disabled:e=!1,disableRemove:t=!1,hideOr:i=!1,disableOr:a=!1,hideAnd:l=!1,disableAnd:s=!1,minimizePaddings:r=!1,onRemoveFilter:g,onOrButtonClick:d,onAddButtonClick:I})=>{const{euiTheme:b}=Object(n.useEuiTheme)(),A=(e=>Object(c.css)("padding-inline:",e.size.xs,";",""))(b);return Object(u.jsx)(n.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"flexEnd",gutterSize:"xs",responsive:!1},Object(u.jsx)(n.EuiFlexItem,{grow:!1},Object(u.jsx)(ae,{content:o.i18n.translate("unifiedSearch.filter.filtersBuilder.deleteButtonDisabled",{defaultMessage:"A minimum of one item is required."}),show:t||e},Object(u.jsx)(n.EuiButtonIcon,{onClick:g,iconType:"trash",isDisabled:t||e,size:"xs",color:"danger","aria-label":o.i18n.translate("unifiedSearch.filter.filtersBuilder.deleteFilterGroupButtonIcon",{defaultMessage:"Delete filter group"})}))),!i&&Object(u.jsx)(n.EuiFlexItem,{grow:!1},Object(u.jsx)(n.EuiButtonEmpty,{onClick:d,isDisabled:a||e,iconType:"plusInCircle",size:"xs",iconSize:"s",flush:"right","aria-label":o.i18n.translate("unifiedSearch.filter.filtersBuilder.addOrFilterGroupButtonIcon",{defaultMessage:"Add filter group with OR"}),"data-test-subj":"add-or-filter",className:r?A:""},o.i18n.translate("unifiedSearch.filter.filtersBuilder.addOrFilterGroupButtonLabel",{defaultMessage:"OR"}))),!l&&Object(u.jsx)(n.EuiFlexItem,{grow:!1},Object(u.jsx)(n.EuiButtonEmpty,{onClick:I,isDisabled:s||e,iconType:"plusInCircle",size:"xs",iconSize:"s",flush:"right","aria-label":o.i18n.translate("unifiedSearch.filter.filtersBuilder.addAndFilterGroupButtonIcon",{defaultMessage:"Add filter group with AND"}),"data-test-subj":"add-and-filter",className:r?A:""},o.i18n.translate("unifiedSearch.filter.filtersBuilder.addAndFilterGroupButtonLabel",{defaultMessage:"AND"}))))},ne=e=>{const[t,i]=Object(a.useState)(!1),l=Object(u.jsx)(n.EuiButtonIcon,{iconType:"boxesHorizontal",color:"text","aria-label":o.i18n.translate("unifiedSearch.filter.filtersBuilder.moreActionsLabel",{defaultMessage:"More actions"}),onClick:()=>{i((e=>!e))}});return Object(u.jsx)(n.EuiPopover,{ownFocus:!1,button:l,isOpen:t,closePopover:()=>i(!1)},Object(u.jsx)(le,I()({},e,{minimizePaddings:!0})))};var se={name:"1sfig4b",styles:"cursor:not-allowed"},re={name:"1a5erbp",styles:"cursor:auto"};function oe({filter:e,path:t,reverseBackground:i,disableOr:l,disableAnd:d,disableRemove:b,color:A,index:j,renderedLevel:M,draggable:C=!0,filtersCount:p=1}){const{dispatch:D,dataView:O,dropTarget:m,globalParams:{hideOr:N},timeRangeForSuggestionsOverride:y,filtersForSuggestions:T,disabled:z}=Object(a.useContext)(r),S=Object(g.a)(e),{euiTheme:h}=Object(n.useEuiTheme)();let Z,k;const v=(e=>e.split(".").length-1==5)(t);S||(Z=Object(x.g)(e,O),Z&&(k=Object(s.getFilterParams)(e)));const[P,R]=Object(a.useState)((()=>{if(!S&&Z)return Object(x.i)(e)})),[B,G]=Object(a.useState)(Array.isArray(k)?k:[]),F=Object(a.useCallback)((e=>{R(void 0),D({type:"updateFilter",payload:{dest:{path:t,index:j},field:e}})}),[D,t,j]),U=Object(a.useCallback)((e=>{var i,a;const l=k&&(null===(i=e.getParamsFromPrevOperator)||void 0===i?void 0:i.call(e,P,k));G(Array.isArray(l)?l:[]),R(e),D({type:"updateFilter",payload:{dest:{path:t,index:j},field:Z,operator:e,params:k&&(null===(a=e.getParamsFromPrevOperator)||void 0===a?void 0:a.call(e,P,k))}})}),[D,t,j,Z,P,k]),W=Object(a.useCallback)((e=>{Array.isArray(e)&&G(e),D({type:"updateFilter",payload:{dest:{path:t,index:j},field:Z,operator:P,params:e}})}),[D,t,j,Z,P]),Y=Object(a.useCallback)((e=>{const i=Array.isArray(B)?B:[];e&&(i.push(e),G(i)),D({type:"updateFilter",payload:{dest:{path:t,index:j},field:Z,operator:P,params:i}})}),[D,t,j,Z,P,B]),V=Object(a.useCallback)((()=>{D({type:"removeFilter",payload:{dest:{path:t,index:j}}})}),[D,t,j]),H=Object(a.useCallback)((e=>{D({type:"addFilter",payload:{dest:{path:t,index:j+1},filter:Object(s.buildEmptyFilter)(!1,null==O?void 0:O.id),booleanRelation:e,dataView:O}})}),[D,O,t,j]),Q=Object(a.useCallback)((()=>H(s.BooleanRelation.AND)),[H]),J=Object(a.useCallback)((()=>H(s.BooleanRelation.OR)),[H]),X=Object(n.useIsWithinBreakpoints)(["xs","s"])?ne:le;return Object(u.jsx)("div",{className:Object(c.cx)({"filter-builder__item":!0,"filter-builder__item-nested":M>0})},S?Object(u.jsx)(de,{path:t,booleanRelation:S,filters:E(e),reverseBackground:!i,renderedLevel:M+1}):Object(u.jsx)(n.EuiDroppable,{droppableId:t,spacing:"none",isCombineEnabled:!l||!N,className:Object(c.cx)({[K]:m===t}),isDropDisabled:d},Object(u.jsx)(n.EuiDraggable,{spacing:"s",index:j,isDragDisabled:!C,draggableId:`${t}`,customDragHandle:!0,hasInteractiveChildren:!0,disableInteractiveElementBlocking:!0,className:Object(c.cx)(ie)},(e=>Object(u.jsx)(n.EuiFlexGroup,{gutterSize:"xs",responsive:!1,alignItems:"center",justifyContent:"center","data-test-subj":`filter-${t}`},Object(u.jsx)(n.EuiFlexItem,null,Object(u.jsx)(n.EuiPanel,{color:A,paddingSize:"none",hasShadow:!1},Object(u.jsx)(n.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"s",justifyContent:"center",className:Object(c.cx)({[$]:m===t&&!N}),css:1===p?re:void 0},Object(u.jsx)(n.EuiFlexItem,I()({role:"button",grow:!1,"aria-label":o.i18n.translate("unifiedSearch.filter.filtersBuilder.dragFilterAriaLabel",{defaultMessage:"Drag filter"})},e.dragHandleProps),Object(u.jsx)(ae,{content:o.i18n.translate("unifiedSearch.filter.filtersBuilder.dragHandleDisabled",{defaultMessage:"Reordering requires more than one item."}),show:!C},Object(u.jsx)(n.EuiIcon,I()({type:"grab",size:"s",className:te(h)},C?{}:{color:h.colors.disabled})))),Object(u.jsx)(n.EuiFlexItem,{grow:!0},Object(u.jsx)(n.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"center",justifyContent:"center",wrap:!0},Object(u.jsx)(n.EuiFlexItem,{className:q(h)},Object(u.jsx)(n.EuiFormRow,null,Object(u.jsx)(w,{field:Z,dataView:O,onHandleField:F}))),Object(u.jsx)(n.EuiFlexItem,{className:ee(h)},Object(u.jsx)(n.EuiFormRow,null,Object(u.jsx)(f,{field:Z,operator:P,params:k,onHandleOperator:U}))),Object(u.jsx)(n.EuiFlexItem,{className:q(h)},Object(u.jsx)(n.EuiFormRow,null,Object(u.jsx)("div",{"data-test-subj":"filterParams",css:P?void 0:se},Object(u.jsx)(L,{dataView:O,field:Z,operator:P,params:k,onHandleParamsChange:W,onHandleParamsUpdate:Y,timeRangeForSuggestionsOverride:y,filtersForSuggestions:T})))))),Object(u.jsx)(n.EuiFlexItem,{grow:!1},Object(u.jsx)(X,{disabled:z,disableRemove:b,hideOr:N||v,hideAnd:v,disableOr:l,disableAnd:d,onRemoveFilter:V,onOrButtonClick:J,onAddButtonClick:Q}))))))))))}const ce=({padding:e,left:t,background:i})=>Object(c.css)("position:relative;.filter-builder__delimiter_text{position:absolute;display:block;padding:0 ",e,";top:0;left:",t,";background:",i,";}",""),ge=({color:e,booleanRelation:t})=>{const i=Object(n.useEuiPaddingSize)("xs"),a=Object(n.useEuiPaddingSize)("m"),l=Object(n.useEuiBackgroundColor)(e);return Object(u.jsx)("div",{className:ce({padding:i,left:a,background:l})},Object(u.jsx)(n.EuiHorizontalRule,{margin:"xs"}),Object(u.jsx)(n.EuiText,{size:"xs",className:"filter-builder__delimiter_text"},(e=>o.i18n.translate("unifiedSearch.filter.filtersBuilder.delimiterLabel",{defaultMessage:"{booleanRelation}",values:{booleanRelation:e}}))(t)))},de=({filters:e,booleanRelation:t,path:i,reverseBackground:o=!1,renderedLevel:d=0,filtersCount:I})=>{const{globalParams:{maxDepth:b,hideOr:A}}=Object(a.useContext)(r),j=P(i),M=b<=j.length&&d>0,C=A||M&&t===s.BooleanRelation.AND,p=M&&t===s.BooleanRelation.OR,D=j.length<=1&&void 0!==e&&Array.isArray(e)&&1===e.length,O=!i&&e&&Array.isArray(e)&&1===e.length&&Object(g.a)(e[0]);O&&(o=!0,d-=1);const m=o?"plain":"subdued",x=e&&Array.isArray(e)&&e.map(((e,a,l)=>{const s=t&&a+1<l.length;return Object(u.jsx)(n.EuiFlexGroup,{key:a,direction:"column",gutterSize:O?"none":"xs",responsive:!1},Object(u.jsx)(n.EuiFlexItem,null,Object(u.jsx)(oe,{filter:e,draggable:1!==l.length,path:`${i}${i?".":""}${a}`,reverseBackground:o,disableOr:C,disableAnd:p,disableRemove:D,color:m,index:a,renderedLevel:d,filtersCount:I})),s&&Object(u.jsx)(n.EuiFlexItem,null,Object(u.jsx)(ge,{color:m,booleanRelation:t})))}));return O?Object(u.jsx)(l.a.Fragment,null,x):Object(u.jsx)(n.EuiPanel,{color:m,hasShadow:!1,paddingSize:d>0?"none":"xs",hasBorder:!0,className:Object(c.cx)({"filter-builder__panel":!0,"filter-builder__panel-nested":d>0})},x)},Ie=(e,t)=>{switch(t.type){case"updateFilters":return{...e,filters:t.payload.filters};case"addFilter":return{...e,filters:U(e.filters,t.payload.filter,t.payload.dest,t.payload.booleanRelation,t.payload.dataView)};case"removeFilter":return{...e,filters:Y(e.filters,t.payload.dest)};case"moveFilter":return{...e,filters:V(e.filters,t.payload.from,t.payload.to,t.payload.booleanRelation,t.payload.dataView)};case"updateFilter":return{...e,filters:H(e.filters,t.payload.dest,t.payload.field,t.payload.operator,t.payload.params)};default:throw new Error("wrong action")}},ue=s.BooleanRelation.AND;t.default=function({onChange:e,dataView:t,filters:i,timeRangeForSuggestionsOverride:l,filtersForSuggestions:o,maxDepth:g=10,hideOr:d=!1,disabled:I=!1,suggestionsAbstraction:b,filtersCount:A}){const j=Object(a.useRef)(i),[M,C]=Object(a.useReducer)(Ie,{filters:i}),[p,D]=Object(a.useState)(""),O=Object(n.useEuiPaddingSize)("s");Object(a.useEffect)((()=>{Object(s.compareFilters)(i,j.current,{index:!0,state:!0,negate:!0,disabled:!0,alias:!0})||(j.current=i,C({type:"updateFilters",payload:{filters:i}}))}),[i]),Object(a.useEffect)((()=>{M.filters!==j.current&&(j.current=M.filters,e(M.filters))}),[e,M.filters]);const m=Object(a.useCallback)(((e,i,a)=>{if(e.path===i.path)return null;C({type:"moveFilter",payload:{from:e,to:i,booleanRelation:a,dataView:t}})}),[t]);return Object(u.jsx)("div",{className:(x=O,Object(c.css)(".filter-builder__panel{&.filter-builder__panel-nested{padding:",x," 0;}}.filter-builder__item{&.filter-builder__item-nested{padding:0 ",x,";}}",""))},Object(u.jsx)(r.Provider,{value:{globalParams:{hideOr:d,maxDepth:g},dataView:t,dispatch:C,dropTarget:p,timeRangeForSuggestionsOverride:l,filtersForSuggestions:o,disabled:I,suggestionsAbstraction:b}},Object(u.jsx)(n.EuiDragDropContext,{onDragEnd:e=>{const{combine:t,source:i,destination:a}=e;if(i&&a&&m({path:i.droppableId,index:i.index},{path:a.droppableId,index:a.index},s.BooleanRelation.AND),i&&t){var l;const e=P(t.droppableId);m({path:i.droppableId,index:i.index},{path:t.droppableId,index:null!==(l=e.at(-1))&&void 0!==l?l:0},s.BooleanRelation.OR)}D("")},onDragUpdate:({destination:e,combine:t})=>{e&&D(e.droppableId),t&&D(t.droppableId)}},Object(u.jsx)(de,{filters:M.filters,booleanRelation:ue,path:"",filtersCount:A}))));var x}}}]);