(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[8,12,19],{138:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDJIMlYxM1YxNEgxVjEzVjJWMUgxM1YySDEyWk01IDVIMTAuOTk5VjRINVY1Wk0zIDVWNEg0VjVIM1pNNSA4VjdIOVY4SDVaTTMgOFY3SDRWOEgzWk01IDExVjEwSDhWMTFINVpNMyAxMVYxMEg0VjExSDNaIiBmaWxsPSIjMDdDIi8+CjxyZWN0IHg9IjEuNSIgeT0iMS41IiB3aWR0aD0iMTEiIGhlaWdodD0iMTIiIHN0cm9rZT0iIzA3QyIgc3Ryb2tlLWRhc2hhcnJheT0iMiAyIi8+Cjwvc3ZnPgo="},51:function(e,t,a){"use strict";a.r(t),a.d(t,"DataViewsList",(function(){return w}));var i=a(3),n=a.n(i),s=a(0),r=a.n(s),o=a(6),c=a(4),d=a(1);const l="esql";var u=a(2),g=a.n(u),b=a(9);const j="unified_search_sorting",p="alphabetically";class sorting_service_SortingService{constructor(e,t=new b.Storage(window.localStorage)){g()(this,"sortingStrategyType",void 0),g()(this,"direction",void 0),this.sortingStrategies=e,this.storage=t;const{sortingStrategyType:a,direction:i}=this.getSorting();this.sortingStrategyType=a,this.direction=i}getSorting(){var e,t;let a;try{a=this.storage.get(j)}catch(e){a=void 0}return{sortingStrategyType:(null===(e=a)||void 0===e?void 0:e.sortingStrategyType)||p,direction:(null===(t=a)||void 0===t?void 0:t.direction)||o.SortDirection.ASC}}setDirection(e){this.direction=e,this.storage.set(j,{direction:e,sortingStrategyType:this.sortingStrategyType})}setSortingStrategyType(e){this.sortingStrategyType=e,this.storage.set(j,{sortingStrategyType:e,direction:this.direction})}getOrderDirections(){return[o.SortDirection.ASC,o.SortDirection.DESC]}getSortingStrategyTypes(){return[p]}sortData(e){return[...e].sort(((e,t)=>{const a=this.sortingStrategies[this.sortingStrategyType],i=a(e),n=a(t);return this.compare(i,n)}))}compare(e,t){return this.direction===o.SortDirection.ASC?e.localeCompare(t):t.localeCompare(e)}}var h=a(69);const x={sortOrder:{asc:{getSortOrderLabel:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortOrder.asc",{defaultMessage:"Ascending"})},desc:{getSortOrderLabel:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortOrder.desc",{defaultMessage:"Descending"})}},editorAndPopover:{getSortDirectionLegend:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortDirections",{defaultMessage:"Sort directions"}),adhoc:{getTemporaryDataviewLabel:()=>c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.temporaryDataviewLabel",{defaultMessage:"Temporary"})},search:{getSearchPlaceholder:()=>c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.findDataView",{defaultMessage:"Find a data view"})}}};var S={name:"18g08sj",styles:"padding-bottom:0"};function w({dataViewsList:e,onChangeDataView:t,isTextBasedLangSelected:a,currentDataViewId:i,selectableProps:c,searchListInputId:u}){const g=Object(s.useMemo)((()=>new sorting_service_SortingService({alphabetically:e=>{var t;return null!==(t=e.name)&&void 0!==t?t:e.title}})),[]),[b,j]=Object(s.useState)((()=>{const t=e.filter((e=>!e.isAdhoc||e.type!==l));return g.sortData(t)})),p=Object(s.useMemo)((()=>g.getOrderDirections().map((e=>({id:e,iconType:`sort${Object(o.toSentenceCase)(e)}ending`,label:x.sortOrder[e].getSortOrderLabel()})))),[g]),w=Object(s.useCallback)((e=>{g.setDirection(e),j((e=>g.sortData(e)))}),[g]);return Object(d.jsx)(o.EuiSelectable,n()({},c,{listProps:{truncationProps:h.a,...null!=c&&c.listProps?c.listProps:void 0},"data-test-subj":"indexPattern-switcher",searchable:!0,singleSelection:"always",options:null==b?void 0:b.map((({title:e,id:t,name:n,isAdhoc:s})=>({key:t,label:n||e,value:t,checked:t!==i||Boolean(a)?void 0:"on",append:s?Object(d.jsx)(o.EuiBadge,{color:"hollow","data-test-subj":`dataViewItemTempBadge-${n}`},x.editorAndPopover.adhoc.getTemporaryDataviewLabel()):null}))),onChange:e=>{const a=e.find((({checked:e})=>e));t(a.value)},searchProps:{id:u,compressed:!0,placeholder:x.editorAndPopover.search.getSearchPlaceholder(),"data-test-subj":"indexPattern-switcher--input",...c?c.searchProps:void 0}}),((e,t)=>Object(d.jsx)(r.a.Fragment,null,Object(d.jsx)(o.EuiPanel,{css:S,color:"transparent",paddingSize:"s"},Object(d.jsx)(o.EuiFlexGroup,{gutterSize:"xs",direction:"row",justifyContent:"spaceBetween",alignItems:"center",responsive:!1},Object(d.jsx)(o.EuiFlexItem,null,t),Object(d.jsx)(o.EuiFlexItem,{grow:!1},Object(d.jsx)(o.EuiButtonGroup,{isIconOnly:!0,buttonSize:"compressed",options:p,legend:x.editorAndPopover.getSortDirectionLegend(),idSelected:g.direction,onChange:w})))),e)))}t.default=w},55:function(e,t,a){"use strict";a.r(t),a.d(t,"DataViewSelector",(function(){return l}));var i=a(0),n=a(23),s=a(51),r=a(6),o=a(1),c=a(4);const d=({noDataViewMatches:e,indexMatches:t,dataViewSearchString:a,setPopoverIsOpen:i,onCreateDefaultAdHocDataView:n})=>{const{euiTheme:s}=Object(r.useEuiTheme)();return n&&e&&t>0?Object(o.jsx)(r.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",css:Object(o.css)("margin:",s.size.s,";margin-bottom:0;","")},Object(o.jsx)(r.EuiFlexItem,{grow:!0},Object(o.jsx)(r.EuiButton,{fullWidth:!0,size:"s","data-test-subj":"explore-matching-indices-button",onClick:()=>{i(!1),n({title:a})}},c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.createForMatchingIndices",{defaultMessage:"Explore {indicesLength, plural,\n              one {# matching index}\n              other {# matching indices}}",values:{indicesLength:t}})),Object(o.jsx)(r.EuiSpacer,{size:"s"}))):null},l=({currentDataViewId:e,searchListInputId:t,dataViewsList:a,selectableProps:r,isTextBasedLangSelected:c,setPopoverIsOpen:l,onChangeDataView:u,onCreateDefaultAdHocDataView:g})=>{const b=Object(n.useKibana)(),{dataViews:j}=b.services,[p,h]=Object(i.useState)(!1),[x,S]=Object(i.useState)(""),[w,y]=Object(i.useState)(0),O=Object(i.useRef)();return Object(i.useEffect)((()=>(O.current=setTimeout((async function(){if(""!==x&&p){const e=await j.getIndices({pattern:x,isRollupIndex:()=>!1,showAllIndices:!1});y(e.length)}}),250),()=>{O.current&&clearTimeout(O.current)})),[x,j,p]),Object(o.jsx)(i.Fragment,null,Object(o.jsx)(s.DataViewsList,{dataViewsList:a,onChangeDataView:u,currentDataViewId:e,selectableProps:{...r||{},searchProps:{...(null==r?void 0:r.searchProps)||{},onChange:(e,t)=>{var i,n;null==r||null===(i=r.searchProps)||void 0===i||null===(n=i.onChange)||void 0===n||n.call(i,e,t),h(0===t.length&&a.length>0),S(e)}}},searchListInputId:t,isTextBasedLangSelected:c}),Object(o.jsx)(d,{noDataViewMatches:p,indexMatches:w,dataViewSearchString:x,setPopoverIsOpen:l,onCreateDefaultAdHocDataView:g}))};t.default=l},63:function(e,t,a){"use strict";a.r(t),a.d(t,"DataViewPicker",(function(){return v}));var i=a(0),n=a.n(i),s=a(3),r=a.n(s),o=a(4),c=a(1),d=a(6),l=a(12),u=a(23),g=a(22),b=a(138),j=a.n(b),p=a(92),h=a(55);const x="data.textLangTransitionModal",S=()=>Object(c.jsx)("div",null),w=n.a.lazy((()=>a.e(20).then(a.bind(null,151)))),y=e=>Object(c.jsx)(n.a.Suspense,{fallback:Object(c.jsx)(S,null)},Object(c.jsx)(w,e)),O=e=>({title:e.title,name:e.name,id:e.id,type:e.type,isAdhoc:!0});var m={name:"18s6nrc",styles:"border-top-right-radius:unset;border-top-left-radius:unset"};function D({isMissingCurrent:e,currentDataViewId:t,adHocDataViews:a,savedDataViews:s,onChangeDataView:b,onAddField:S,onDataViewCreated:w,trigger:D,selectableProps:v,textBasedLanguages:f,onSaveTextLanguageQuery:I,onTextLangQuerySubmit:V,textBasedLanguage:T,shouldShowTextBasedLanguageTransitionModal:C=!0,isDisabled:L,onEditDataView:E,onCreateDefaultAdHocDataView:M}){const{euiTheme:P}=Object(d.useEuiTheme)(),[B,k]=Object(i.useState)(!1),[A,W]=Object(i.useState)([]),[F,q]=Object(i.useState)(""),[z,N]=Object(i.useState)(Boolean(T)),[H,_]=Object(i.useState)(!1),[R,G]=Object(i.useState)(t),Y=Object(u.useKibana)(),{application:Z,data:Q,storage:$,dataViews:J,dataViewEditor:K,appName:U,usageCollection:X}=Y.services,ee=null==X?void 0:X.reportUiCounter.bind(X,U),te=(({fullWidth:e,dataViewsList:t})=>({trigger:{maxWidth:e?void 0:300},popoverContent:{width:Object(p.a)(t,["name","id"],{minWidth:300})}}))({fullWidth:D.fullWidth,dataViewsList:A}),[ae,ie]=Object(i.useState)((()=>Boolean($.get(x)))),ne=Object(d.useGeneratedHtmlId)({prefix:"dataviewPickerListSearchInput"});Object(i.useEffect)((()=>{(async()=>{var e;const t=s||await Q.dataViews.getIdsWithTitle(),i=null!==(e=null==a?void 0:a.map(O))&&void 0!==e?e:[];W(t.concat(i))})()}),[Q,t,a,s,z]),Object(i.useEffect)((()=>{q(T?Object(g.getLanguageDisplayName)(T):D.label)}),[T,D.label]),Object(i.useEffect)((()=>{Boolean(T)!==z&&N(Boolean(T))}),[z,T]);const se=Object(i.useMemo)((()=>null==a?void 0:a.some((e=>e.id===t))),[a,t]);let re;const oe=Object(i.useCallback)((()=>{$.set(x,!0),ie(!0)}),[$]),ce=Object(i.useCallback)((e=>{null==V||V(e),k(!1),null==ee||ee(l.METRIC_TYPE.CLICK,"esql:unified_search_clicked")}),[V,ee]),de=Object(i.useCallback)((e=>{_(!1),N(!1),null==V||V({language:"kuery",query:""}),R&&b(R),q(D.label),e&&oe()}),[b,V,oe,R,D.label]),le=Object(i.useCallback)(((e,t)=>{Boolean(t)?(_(!1),null==I||I({onSave:()=>{de(e)},onCancel:()=>{_(!1)}})):de(e)}),[de,I]);return H&&!ae&&(re=Object(c.jsx)(y,{closeModal:le,setIsTextLangTransitionModalVisible:_,textBasedLanguage:T})),Object(c.jsx)(n.a.Fragment,null,Object(c.jsx)(d.EuiPopover,{panelClassName:"changeDataViewPopover",button:function(){const{label:t,title:a,"data-test-subj":i,fullWidth:s,...o}=D;return Object(c.jsx)(d.EuiButton,r()({css:te.trigger,"data-test-subj":i,onClick:()=>{k(!B)},color:e?"danger":"primary",iconSide:"right",iconType:"arrowDown",title:F,fullWidth:s,disabled:L,textProps:{className:"eui-textTruncate"}},o),Object(c.jsx)(n.a.Fragment,null,se&&!z&&Object(c.jsx)(d.EuiIcon,{type:j.a,color:"primary",css:Object(c.css)("margin-right:",P.size.s,";","")}),F))}(),panelProps:{"data-test-subj":"changeDataViewPopover"},isOpen:B,closePopover:()=>k(!1),panelPaddingSize:"none",initialFocus:z?void 0:`#${ne}`,display:"block",buffer:8},Object(c.jsx)("div",{css:te.popoverContent},Object(c.jsx)(d.EuiContextMenuPanel,{size:"s",items:(()=>{const e=[];return S&&!z&&e.push(Object(c.jsx)(d.EuiContextMenuItem,{key:"add",icon:"indexOpen","data-test-subj":"indexPattern-add-field",onClick:()=>{k(!1),S()}},o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.addFieldButton",{defaultMessage:"Add a field to this data view"})),E||K.userPermissions.editDataView()?Object(c.jsx)(d.EuiContextMenuItem,{key:"manage",icon:"indexSettings","data-test-subj":"indexPattern-manage-field",onClick:async()=>{if(E){const e=await J.get(t);K.openEditor({editData:e,onSave:e=>{E(e)}})}else Z.navigateToApp("management",{path:`/kibana/indexPatterns/patterns/${t}`});k(!1)}},o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.manageFieldButton",{defaultMessage:"Manage this data view"})):Object(c.jsx)(n.a.Fragment,{key:"empty"}),Object(c.jsx)(d.EuiHorizontalRule,{margin:"none",key:"dataviewActions-divider"})),e.push(Object(c.jsx)(n.a.Fragment,{key:"add-dataview"},w&&Object(c.jsx)(d.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1,css:Object(c.css)("margin:",P.size.s,";margin-bottom:0;","")},Object(c.jsx)(d.EuiFlexItem,{grow:!1},Object(c.jsx)(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(c.jsx)(d.EuiFlexItem,{grow:!1},z&&C?Object(c.jsx)(d.EuiToolTip,{position:"top",content:o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.textBasedLangSwitchWarning",{defaultMessage:"Switching data views removes the current {textBasedLanguage} query. Save this search to ensure you don't lose work.",values:{textBasedLanguage:Object(g.getLanguageDisplayName)(T)}})},Object(c.jsx)(d.EuiIcon,{type:"warning",color:"warning","data-test-subj":"textBasedLang-warning"})):null),Object(c.jsx)(d.EuiFlexItem,{grow:!1},Object(c.jsx)(d.EuiText,{size:"s"},Object(c.jsx)("h5",null,o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.dataViewsLabel",{defaultMessage:"Data views"})))))),Object(c.jsx)(d.EuiFlexItem,{grow:!1},Object(c.jsx)(d.EuiButtonEmpty,{onClick:()=>{k(!1),w(),z&&(N(!1),null==V||V({language:"kuery",query:""}),q(D.label))},size:"xs",iconType:"plusInCircleFilled",iconSide:"left","data-test-subj":"dataview-create-new"},o.i18n.translate("unifiedSearch.query.queryBar.indexPattern.addNewDataView",{defaultMessage:"Create a data view"})))),Object(c.jsx)(h.DataViewSelector,{currentDataViewId:t,searchListInputId:ne,dataViewsList:A,selectableProps:v,isTextBasedLangSelected:z,setPopoverIsOpen:k,onChangeDataView:async e=>{G(e),k(!1),z?!ae&&C?_(!0):(N(!1),null==V||V({language:"kuery",query:""}),b(e),q(D.label)):b(e)},onCreateDefaultAdHocDataView:M}))),null!=f&&f.length&&e.push(Object(c.jsx)(d.EuiHorizontalRule,{margin:"none",key:"textbasedLanguages-divider"}),Object(c.jsx)(d.EuiPanel,{color:"transparent",paddingSize:"none",key:"try-esql"},Object(c.jsx)(d.EuiButton,{css:m,color:"success",size:"s",fullWidth:!0,onClick:()=>{return ce({esql:(e=D.title,`FROM ${e} | LIMIT 10`)});var e},"data-test-subj":"select-text-based-language-panel",contentProps:{css:{justifyContent:"flex-start",paddingLeft:"26px"}}},o.i18n.translate("unifiedSearch.query.queryBar.textBasedLanguagesTryLabel",{defaultMessage:"Language: ES|QL"})))),e})()}))),re)}const v=({isMissingCurrent:e,currentDataViewId:t,adHocDataViews:a,savedDataViews:i,onChangeDataView:n,onEditDataView:s,onAddField:r,onDataViewCreated:o,trigger:d,selectableProps:l,textBasedLanguages:u,onSaveTextLanguageQuery:g,onTextLangQuerySubmit:b,textBasedLanguage:j,shouldShowTextBasedLanguageTransitionModal:p,onCreateDefaultAdHocDataView:h,isDisabled:x})=>Object(c.jsx)(D,{isMissingCurrent:e,currentDataViewId:t,onChangeDataView:n,onEditDataView:s,onAddField:r,onDataViewCreated:o,onCreateDefaultAdHocDataView:h,trigger:d,adHocDataViews:a,savedDataViews:i,selectableProps:l,textBasedLanguages:u,onSaveTextLanguageQuery:g,onTextLangQuerySubmit:b,textBasedLanguage:j,shouldShowTextBasedLanguageTransitionModal:p,isDisabled:x});t.default=v},92:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));const i={maxWidth:550,avCharWidth:7,paddingsWidth:116},n=(e,t)=>e.reduce(((e,a)=>{const i=t.find((e=>a[e]));if(!i)return e;const n=a[i].length;return e>n?e:n}),0),s=e=>e.reduce(((e,t)=>e>t.length?e:t.length),0);function r(e,t,a){return function(e,t){const{maxWidth:a,avCharWidth:n,paddingsWidth:s,minWidth:r}={...i,...t},o=s+e*n;return r&&o<r?r:Math.min(o,a)}(t?n(e,t):s(e),a)}}}]);