(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[18],{153:function(e,t,r){"use strict";r.r(t),r.d(t,"setupGetFieldSuggestions",(function(){return i})),r.d(t,"setupGetValueSuggestions",(function(){return l})),r.d(t,"setupGetOperatorSuggestions",(function(){return y})),r.d(t,"setupGetConjunctionSuggestions",(function(){return q}));var a=r(26),s=r(7),n=r(27);const o=(e,t)=>{const r=["raw","keyword"];return r.map((t=>`${e.name}.${t}`)).includes(t.name)?1:r.map((e=>`${t.name}.${e}`)).includes(e.name)?-1:e.name.localeCompare(t.name)},i=e=>async({indexPatterns:e,suggestionsAbstraction:t},{start:i,end:u,prefix:l,suffix:c,nestedPath:d=""})=>{const p=Object(s.flatten)(e.map((e=>e.fields.filter(a.indexPatterns.isFilterable)))),m=`${l}${c}`.trim().toLowerCase(),g=function(e,t,r){if(!t)return e;const a=(""+t).toLowerCase(),n=Object(s.partition)(e,(e=>(""+(r?e[r]:e)).toLowerCase().startsWith(a)));return[...n[0],...n[1]]}(p.filter((e=>{var r;const s=a.indexPatterns.getFieldSubtypeNested(e);var n,o;return null!=t&&null!==(r=t.fields)&&void 0!==r&&r[e.name]?(!d||d&&(null==s?void 0:s.nested.path.includes(d)))&&(null!==(n=null==t||null===(o=t.fields[e.name])||void 0===o?void 0:o.displayField)&&void 0!==n?n:"").toLowerCase().includes(m):(!d||d&&(null==s?void 0:s.nested.path.includes(d)))&&e.name.toLowerCase().includes(m)})).sort(o),m,"name"),{escapeKuery:f}=await Promise.resolve().then(r.t.bind(null,22,7)),h=g.map((e=>{var r,a;const s=e.subType&&e.subType.nested,o=!(null==t||null===(r=t.fields)||void 0===r||!r[e.name]),l=e.subType&&e.subType.nested?o?(null!==(a=null==t?void 0:t.fields[e.name].displayField)&&void 0!==a?a:"").slice(d?d.length+1:0):e.subType.nested.path.slice(d?d.length+1:0):"";let c=s&&l.length>0?`${f(l)}:{ ${f(e.name.slice(e.subType.nested.path.length+1))}  }`:`${f(e.name.slice(d?d.length+1:0))} `;var p,m;if(o)if(s&&l.length>0)c=`${f(l)}:{ ${f(null!==(p=null==t||null===(m=t.fields[e.name])||void 0===m?void 0:m.nestedDisplayField)&&void 0!==p?p:"")}  }`;else if(s&&0===l.length){var g,h;c=null!==(g=null==t||null===(h=t.fields[e.name])||void 0===h?void 0:h.nestedDisplayField)&&void 0!==g?g:""}else{var O;c=null!==(O=null==t?void 0:t.fields[e.name].displayField)&&void 0!==O?O:""}const x=s&&l.length>0?c.length-2:c.length;return{type:n.a.Field,text:c,start:i,end:u,cursorIndex:x,field:e}}));return Promise.resolve(h)};var u=r(22);const l=e=>{const t=e.getStartServices().then((([e,t,r])=>r.autocomplete));return async({indexPatterns:e,boolFilter:r,useTimeRange:a,signal:o,method:i,suggestionsAbstraction:l},{start:c,end:d,prefix:p,suffix:m,fieldName:g,nestedPath:f})=>{const h=f?`${f}.${g}`:g,O=[];e.forEach((e=>{e.fields.filter((e=>e.name===h)).forEach((t=>O.push([e,t])))}));const x=`${p}${m}`.trim(),{getValueSuggestions:b}=await t,T=await Promise.all(O.map((([e,t])=>b({indexPattern:e,field:t,query:x,boolFilter:r,useTimeRange:a,signal:o,method:i,querySuggestionKey:null==l?void 0:l.type}).then((e=>{const t=e.map((e=>"string"==typeof e?`"${Object(u.escapeQuotes)(e)}"`:`${e}`));return((e,t,r,a)=>a.filter((e=>e.toLowerCase().includes(r.toLowerCase()))).map((r=>({type:n.a.Value,text:`${r} `,start:e,end:t}))))(c,d,x,t)})))));return Object(s.flatten)(T)}};r(0);var c=r(48),d=r(1);const p=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.equalOperatorDescription.equalsText",defaultMessage:"equals",description:"Part of unifiedSearch.kueryAutocomplete.equalOperatorDescription. Full text: 'equals some value'"}),m=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText",defaultMessage:"less than or equal to",description:"Part of unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription. Full text: 'is less than or equal to some value'"}),g=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText",defaultMessage:"greater than or equal to",description:"Part of unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription. Full text: 'is greater than or equal to some value'"}),f=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOperatorDescription.lessThanText",defaultMessage:"less than",description:"Part of unifiedSearch.kueryAutocomplete.lessThanOperatorDescription. Full text: 'is less than some value'"}),h=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText",defaultMessage:"greater than",description:"Part of unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription. Full text: 'is greater than some value'"}),O=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.existOperatorDescription.existsText",defaultMessage:"exists",description:"Part of unifiedSearch.kueryAutocomplete.existOperatorDescription. Full text: 'exists in any form'"}),x={":":{description:Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.equalOperatorDescription",defaultMessage:"{equals} some value",values:{equals:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},p)},description:"Full text: 'equals some value'. See 'unifiedSearch.kueryAutocomplete.equalOperatorDescription.equalsText' for 'equals' part."}),fieldTypes:["string","number","number_range","date","date_range","ip","ip_range","geo_point","geo_shape","boolean"]},"<=":{description:Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription",defaultMessage:"is {lessThanOrEqualTo} some value",values:{lessThanOrEqualTo:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},m)},description:"Full text: 'is less than or equal to some value'. See 'unifiedSearch.kueryAutocomplete.lessThanOrEqualOperatorDescription.lessThanOrEqualToText' for 'less than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">=":{description:Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription",defaultMessage:"is {greaterThanOrEqualTo} some value",values:{greaterThanOrEqualTo:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},g)},description:"Full text: 'is greater than or equal to some value'. See 'unifiedSearch.kueryAutocomplete.greaterThanOrEqualOperatorDescription.greaterThanOrEqualToText' for 'greater than or equal to' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},"<":{description:Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.lessThanOperatorDescription",defaultMessage:"is {lessThan} some value",values:{lessThan:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},f)},description:"Full text: 'is less than some value'. See 'unifiedSearch.kueryAutocomplete.lessThanOperatorDescription.lessThanText' for 'less than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},">":{description:Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription",defaultMessage:"is {greaterThan} some value",values:{greaterThan:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},h)},description:"Full text: 'is greater than some value'. See 'unifiedSearch.kueryAutocomplete.greaterThanOperatorDescription.greaterThanText' for 'greater than' part."}),fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},": *":{description:Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.existOperatorDescription",defaultMessage:"{exists} in any form",values:{exists:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},O)},description:"Full text: 'exists in any form'. See 'unifiedSearch.kueryAutocomplete.existOperatorDescription.existsText' for 'exists' part."}),fieldTypes:void 0}},b=e=>x[e],T=e=>Object(d.jsx)("p",null,b(e).description),y=()=>({indexPatterns:e},{end:t,fieldName:r,nestedPath:a})=>{const o=Object(s.flatten)(e.map((e=>e.fields.slice()))),i=a?`${a}.${r}`:r,u=o.filter((e=>e.name===i)).map((e=>Object.keys(x).filter((t=>{const{fieldTypes:r}=b(t);return!r||r.includes(e.type)})).map((e=>({type:n.a.Operator,text:e+" ",description:T(e),start:t,end:t})))));return Promise.resolve(Object(s.flatten)(u))},j=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.andOperatorDescription.bothArgumentsText",defaultMessage:"both arguments",description:"Part of unifiedSearch.kueryAutocomplete.andOperatorDescription. Full text: 'Requires both arguments to be true'"}),S=Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText",defaultMessage:"one or more arguments",description:"Part of unifiedSearch.kueryAutocomplete.orOperatorDescription. Full text: 'Requires one or more arguments to be true'"}),v={and:Object(d.jsx)("p",null,Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.andOperatorDescription",defaultMessage:"Requires {bothArguments} to be true",values:{bothArguments:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},j)},description:"Full text: ' Requires both arguments to be true'. See 'unifiedSearch.kueryAutocomplete.andOperatorDescription.bothArgumentsText' for 'both arguments' part."})),or:Object(d.jsx)("p",null,Object(d.jsx)(c.FormattedMessage,{id:"unifiedSearch.kueryAutocomplete.orOperatorDescription",defaultMessage:"Requires {oneOrMoreArguments} to be true",values:{oneOrMoreArguments:Object(d.jsx)("span",{className:"kbnSuggestionItem__callout"},S)},description:"Full text: 'Requires one or more arguments to be true'. See 'unifiedSearch.kueryAutocomplete.orOperatorDescription.oneOrMoreArgumentsText' for 'one or more arguments' part."}))},q=e=>(e,{text:t,end:r})=>{let a=[];return t.endsWith(" ")&&(a=Object.keys(v).map((e=>({type:n.a.Conjunction,text:`${e} `,description:v[e],start:r,end:r})))),Promise.resolve(a)}}}]);