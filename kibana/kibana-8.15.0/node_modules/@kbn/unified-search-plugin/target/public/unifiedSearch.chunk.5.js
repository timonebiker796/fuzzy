(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[5],{126:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(127);case"v8light":return n(129)}},127:function(e,t,n){var r=n(24),a=n(128);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},128:function(e,t,n){(t=n(25)(!1)).push([e.i,".kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(0deg,#f86b63,#f86b63 2px,#0000 0,#0000)}.euiQuickSelectPopover__section{max-height:142px}",""]),e.exports=t},129:function(e,t,n){var r=n(24),a=n(130);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);r(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},130:function(e,t,n){(t=n(25)(!1)).push([e.i,".kbnQueryBar__datePickerWrapper .euiDatePopoverButton-isInvalid{background-image:linear-gradient(0deg,#bd271e,#bd271e 2px,#0000 0,#0000)}.euiQuickSelectPopover__section{max-height:142px}",""]),e.exports=t},144:function(e,t,n){"use strict";n.r(t),n.d(t,"strings",(function(){return _})),n.d(t,"SharingMetaFields",(function(){return A})),n.d(t,"QueryBarTopRow",(function(){return M}));var r=n(3),a=n.n(r),i=n(20),o=n.n(i),s=n(49),u=n.n(s),l=n(0),c=n.n(l),d=n(93),g=n.n(d),b=n(31),f=n.n(b),p=n(22),j=n(56),m=n(8),y=n(7),O=n(6),h=n(4),x=n(26),v=n(23),S=n(14),B=n(143),F=n(1);const T="data.noDataPopover";function P({showNoDataPopover:e,storage:t,children:n}){const[r,a]=Object(l.useState)((()=>Boolean(t.get(T)))),[i,o]=Object(l.useState)(!1);return Object(l.useEffect)((()=>{e&&!r&&o(!0)}),[r,e]),Object(F.jsx)(O.EuiTourStep,{onFinish:()=>{},closePopover:()=>{o(!1)},content:Object(F.jsx)(O.EuiText,{size:"s"},Object(F.jsx)("p",{style:{maxWidth:300}},h.i18n.translate("unifiedSearch.noDataPopover.content",{defaultMessage:"This time range doesn't contain any data. Increase or adjust the time range to see more fields and create charts."}))),minWidth:300,anchorPosition:"downCenter",step:1,stepsTotal:1,isStepOpen:i,subtitle:h.i18n.translate("unifiedSearch.noDataPopover.subtitle",{defaultMessage:"Tip"}),title:h.i18n.translate("unifiedSearch.noDataPopover.title",{defaultMessage:"Empty dataset"}),footerAction:Object(F.jsx)(O.EuiButtonEmpty,{size:"xs",flush:"right",color:"text","data-test-subj":"noDataPopoverDismissButton",onClick:()=>{t.set(T,!0),a(!0),o(!1)}},h.i18n.translate("unifiedSearch.noDataPopover.dismissAction",{defaultMessage:"Don't show again"}))},Object(F.jsx)("div",{onFocus:()=>{o(!1)}},n))}var w=n(72),R=n(86),L=n(70);const E=()=>h.i18n.translate("unifiedSearch.filter.filterBar.addFilterButtonLabel",{defaultMessage:"Add filter"}),C=c.a.memo((function({indexPatterns:e,filters:t,timeRangeForSuggestionsOverride:n,filtersForSuggestions:r,onFiltersUpdated:i,buttonProps:o,isDisabled:s,onCloseFilterPopover:u,onLocalFilterUpdate:c,onLocalFilterCreate:d,suggestionsAbstraction:g}){const[b,f]=Object(l.useState)(!1),p=Object(F.jsx)(O.EuiToolTip,{delay:"long",content:E()},Object(F.jsx)(O.EuiButtonIcon,a()({display:"base",iconType:"plusInCircleFilled","aria-label":E(),"data-test-subj":"addFilter",onClick:()=>f((e=>!e)),size:"m",disabled:s},o,{style:{borderTopLeftRadius:0,borderBottomLeftRadius:0}}))),j=Object(l.useCallback)((()=>{u([()=>f(!1)])}),[u]);return Object(F.jsx)(O.EuiFlexItem,{grow:!1},Object(F.jsx)(O.EuiPopover,{id:"addFilterPopover",button:p,isOpen:b,closePopover:j,anchorPosition:"downLeft",panelPaddingSize:"none",panelProps:{"data-test-subj":"addFilterPopover"},initialFocus:".filterEditor__hiddenItem",ownFocus:!0,repositionOnScroll:!0,hasDragDrop:!0},Object(F.jsx)(R.a,{indexPatterns:e,filters:t,timeRangeForSuggestionsOverride:n,filtersForSuggestions:r,onFiltersUpdated:i,onLocalFilterUpdate:c,onLocalFilterCreate:d,closePopoverOnAdd:()=>{f(!1)},closePopoverOnCancel:()=>{f(!1)},suggestionsAbstraction:g})))})),k=Object(L.m)(C);var D=n(15),q=n(85);n(126);const I=navigator.platform.toLowerCase().indexOf("mac")>=0?"âŒ˜":"CTRL",_={getNeedsUpdatingLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.update",{defaultMessage:"Needs updating"}),getUpdateButtonLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.updateButton",{defaultMessage:"Update"}),getRefreshQueryLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.refresh",{defaultMessage:"Refresh query"}),getRefreshButtonLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.refreshButton",{defaultMessage:"Refresh"}),getCancelQueryLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.cancel",{defaultMessage:"Cancel"}),getRunQueryLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.run",{defaultMessage:"Run query"}),getRunButtonLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.submitButton.runButton",{defaultMessage:"Run"}),getDisabledDatePickerLabel:()=>h.i18n.translate("unifiedSearch.queryBarTopRow.datePicker.disabledLabel",{defaultMessage:"All time"})},Q=c.a.memo(O.EuiSuperDatePicker),A=c.a.memo((function({from:e,to:t,dateFormat:n}){function r(e,t=!1){const n=o.a.parse(e,{roundUp:t});return n?n.toISOString():e}try{const a=Object(O.usePrettyDuration)({timeFrom:r(e),timeTo:r(t),quickRanges:[],dateFormat:n});return Object(F.jsx)("div",{"data-shared-timefilter-duration":a,"data-test-subj":"dataSharedTimefilterDuration"})}catch(e){return Object(F.jsx)("div",{"data-test-subj":"dataSharedTimefilterDuration"})}})),M=c.a.memo((function(e){var t,n,r;const i=Object(O.useIsWithinBreakpoints)(["xs","s"]),[o,s]=Object(l.useState)(!1),[d,g]=Object(l.useState)(!1),b=null!==(t=e.submitButtonStyle)&&void 0!==t?t:"auto",T="auto"===b?!o:"iconOnly"===b;Object(l.useEffect)((()=>{if("auto"!==b)return;const e=Object(y.throttle)((()=>{s(window.innerWidth>=1440)}),50);return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[b]);const{showQueryInput:w=!0,showDatePicker:R=!0,showAutoRefreshOnly:L=!1,showSubmitButton:E=!0}=e,[C,M]=Object(l.useState)(!1),[U,N]=Object(l.useState)(!1),z=Object(v.useKibana)(),{uiSettings:W,storage:V,appName:K,data:G,usageCollection:Y,unifiedSearch:H,notifications:$,docLinks:J,http:X,dataViews:Z}=z.services,ee=e.query&&!Object(p.isOfQueryType)(e.query),te=e.query&&Object(p.isOfQueryType)(e.query)&&e.query.language,ne=Object(l.useRef)(e.query);ne.current=e.query;const re=c.a.useMemo((()=>te&&W&&V&&K?Object(x.getQueryLog)(W,V,K,te):void 0),[K,te,W,V]),ae=function(){const t=W.get(S.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS);return{from:e.dateRangeFrom||t.from,to:e.dateRangeTo||t.to}}(),ie=Object(l.useRef)(ae);ie.current=ae;const oe=e.onSubmit,se=e.onCancel,ue=e=>e.map((({from:e,to:t})=>({start:e,end:t}))),le=e.timeHistory,ce=Object(l.useMemo)((()=>{var e;return null!==(e=null==le?void 0:le.get$().pipe(Object(m.map)(ue)))&&void 0!==e?e:m.EMPTY}),[le]),de=f()(ce,ue(null!==(n=null==le?void 0:le.get())&&void 0!==n?n:[])),[ge]=Object(l.useState)((()=>{var e,t;return null!==(e=null==W||null===(t=W.get(S.UI_SETTINGS.TIMEPICKER_QUICK_RANGES))||void 0===t?void 0:t.map((({from:e,to:t,display:n})=>({start:e,end:t,label:n}))))&&void 0!==e?e:[]})),be=Object(l.useCallback)((({query:e,dateRange:t})=>{le&&le.add(t),oe({query:e,dateRange:t})}),[le,oe]),fe=Object(l.useCallback)((e=>{re&&ne.current&&Object(p.isOfQueryType)(ne.current)&&re.add(ne.current.query),e.preventDefault(),be({query:ne.current,dateRange:ie.current})}),[re,be]),pe=Object(l.useCallback)((e=>{re&&ne.current&&Object(p.isOfQueryType)(ne.current)&&re.add(ne.current.query),e.preventDefault(),se&&se()}),[re,se]),je=e.onChange,me=Object(l.useCallback)((e=>je({query:e,dateRange:ie.current})),[je]),ye=Object(l.useCallback)((e=>{N(e)}),[]),Oe=Object(l.useCallback)((({start:e,end:t,isInvalid:n,isQuickSelection:r})=>{M(n);const a={query:ne.current,dateRange:{from:e,to:t}};r?be(a):je(a)}),[je,be]),he=e.onRefresh,xe=Object(l.useCallback)((({start:e,end:t})=>{he&&he({dateRange:{from:e,to:t}})}),[he]),ve=Object(l.useCallback)((e=>{be({query:e,dateRange:ie.current})}),[be]);function Se(){return Boolean(w&&e.query&&V)}function Be(){return Boolean(R||L)}function Fe(){return!Boolean(e.showAddFilter)&&Boolean(e.prepend)}function Te(){return Boolean(E)&&Boolean(w||R||L)}function Pe(){return Boolean(e.showDatePickerAsBadge)&&!Se()}function we(){return(Boolean(e.showAddFilter)||Boolean(e.prepend))&&Object(F.jsx)(O.EuiFlexItem,{grow:!1},Object(F.jsx)(q.a,{items:[e.prepend,Boolean(e.showAddFilter)&&Object(F.jsx)(O.EuiFlexItem,{grow:!1},Object(F.jsx)(k,{indexPatterns:e.indexPatterns,filters:e.filters,timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride,filtersForSuggestions:e.filtersForSuggestions,onFiltersUpdated:e.onFiltersUpdated,buttonProps:{size:Pe()?"s":"m",display:"empty"},isDisabled:e.isDisabled,suggestionsAbstraction:e.suggestionsAbstraction}))],attached:Fe(),size:Pe()?"s":"m"}))}function Re(){var t;const n=null===(t=e.indexPatterns)||void 0===t?void 0:t[0];let r=!1;return n&&"string"!=typeof n&&(r=Boolean(null==n?void 0:n.timeFieldName)),ee&&e.query&&Object(p.isOfAggregateQueryType)(e.query)&&Object(F.jsx)(j.TextBasedLangEditor,{query:e.query,onTextLangQueryChange:e.onTextLangQueryChange,expandCodeEditor:e=>g(e),isCodeEditorExpanded:d,errors:e.textBasedLanguageModeErrors,warning:e.textBasedLanguageModeWarning,detectTimestamp:r,onTextLangQuerySubmit:async()=>be({query:ne.current,dateRange:ie.current}),isDisabled:e.isDisabled,hideRunQueryText:!0,"data-test-subj":"unifiedTextLangEditor",isLoading:e.isLoading})}const Le=!0===e.isScreenshotMode;return Object(F.jsx)(c.a.Fragment,null,Object(F.jsx)(A,{from:ae.from,to:ae.to,dateFormat:W.get("dateFormat")}),!Le&&Object(F.jsx)(c.a.Fragment,null,Object(F.jsx)(O.EuiFlexGroup,{className:"kbnQueryBar",direction:i&&!Pe()?"column":"row",responsive:!1,gutterSize:"s",justifyContent:Pe()?"flexStart":"flexEnd",wrap:!0},e.dataViewPickerOverride||function(){if(!e.dataViewPickerComponentProps)return;let t;if(Boolean(ee)){const n=e.query;t=Object(p.getAggregateQueryMode)(n)}return Object(F.jsx)(O.EuiFlexItem,{style:{maxWidth:"100%"},grow:i},Object(F.jsx)(D.a,a()({},e.dataViewPickerComponentProps,{trigger:{fullWidth:i,...e.dataViewPickerComponentProps.trigger},onTextLangQuerySubmit:e.onTextLangQuerySubmit,textBasedLanguage:t,onSaveTextLanguageQuery:e.onTextBasedSavedAndExit,isDisabled:e.isDisabled})))}(),Object(F.jsx)(O.EuiFlexItem,{grow:!Pe(),style:{minWidth:Pe()?"auto":320,maxWidth:"100%"}},ee?d?null:Re():Object(F.jsx)(O.EuiFlexGroup,{gutterSize:"s",responsive:!1},!Fe()&&we(),Se()&&Object(F.jsx)(O.EuiFlexItem,{"data-test-subj":"unifiedQueryInput"},Object(F.jsx)(B.default,{disableAutoFocus:e.disableAutoFocus,indexPatterns:e.indexPatterns,query:e.query,screenTitle:e.screenTitle,onChange:me,onChangeQueryInputFocus:ye,onSubmit:ve,persistedLog:re,dataTestSubj:e.dataTestSubj,placeholder:e.placeholder,isClearable:e.isClearable,iconType:e.iconType,nonKqlMode:e.nonKqlMode,timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride,filtersForSuggestions:e.filtersForSuggestions,disableLanguageSwitcher:!0,prepend:Fe()&&we(),size:e.suggestionsSize,suggestionsAbstraction:e.suggestionsAbstraction,isDisabled:e.isDisabled,appName:K,submitOnBlur:e.submitOnBlur,deps:{unifiedSearch:H,data:G,storage:V,usageCollection:Y,notifications:$,docLinks:J,http:X,uiSettings:W,dataViews:Z}})))),null===(r=e.renderQueryInputAppend)||void 0===r?void 0:r.call(e),Pe()&&e.filterBar,function(){if(!Te()&&!Be())return null;const t=`${I} + Enter`,n=_.getNeedsUpdatingLabel(),r=Boolean(ee)?t:_.getRefreshQueryLabel(),a=t,o=Boolean(ee)?"playFilled":"kqlFunction",s=Boolean(ee)?a:n,l=Boolean(ee)?_.getRunButtonLabel():_.getUpdateButtonLabel(),d=e.customSubmitButton?c.a.cloneElement(e.customSubmitButton,{onClick:fe}):Object(F.jsx)(O.EuiFlexItem,{grow:!1},e.isLoading&&se&&function(){const e=_.getCancelQueryLabel();return T?Object(F.jsx)(O.EuiButtonIcon,{iconType:"cross","aria-label":e,onClick:pe,size:Pe()?"s":"m","data-test-subj":"queryCancelButton",color:"text",display:"base"},e):Object(F.jsx)(O.EuiButton,{iconType:"cross","aria-label":e,onClick:pe,size:Pe()?"s":"m","data-test-subj":"queryCancelButton",color:"text"},e)}(),(!e.isLoading||!se)&&Object(F.jsx)(O.EuiSuperUpdateButton,{iconType:e.isDirty?o:"refresh",iconOnly:T,"aria-label":e.isLoading?n:r,isDisabled:C||e.isDisabled,isLoading:e.isLoading,onClick:fe,size:Pe()?"s":"m",color:e.isDirty?"success":"primary",fill:!1,needsUpdate:e.isDirty,"data-test-subj":"querySubmitButton",toolTipProps:{content:e.isDirty?s:r,delay:"long",position:"bottom"}},e.isDirty?l:_.getRefreshButtonLabel()));return!Be()&&Te()?d:Object(F.jsx)(O.EuiFlexItem,{grow:!1},Object(F.jsx)(P,{storage:V,showNoDataPopover:e.indicateNoData},Object(F.jsx)(O.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},Be()?function(){if(!Be())return null;let t=Boolean(e.isDisabled),n=!1;if(Boolean(ee)&&!e.isDirty){var r;const a=null===(r=e.indexPatterns)||void 0===r?void 0:r[0];a&&"string"!=typeof a&&(a.timeFieldName||(t={display:Object(F.jsx)("span",{"data-test-subj":"kbnQueryBar-datePicker-disabled"},_.getDisabledDatePickerLabel())}),n=!Boolean(a.timeFieldName))}const a=u()("kbnQueryBar__datePickerWrapper"),o=((e,t,n)=>{if(t&&n&&Object(p.isOfAggregateQueryType)(n)){const t=Object(p.getAggregateQueryMode)(n),r=Object(p.getLanguageDisplayName)(t);return Object(F.jsx)(O.EuiToolTip,{position:"top",content:h.i18n.translate("unifiedSearch.query.queryBar.textBasedNonTimestampWarning",{defaultMessage:"Date range selection for {language} queries requires an @timestamp field in the dataset.",values:{language:r}})},e)}return e})(Object(F.jsx)(Q,{isDisabled:t,start:e.dateRangeFrom,end:e.dateRangeTo,isPaused:e.isRefreshPaused,refreshInterval:e.refreshInterval,onTimeChange:Oe,onRefresh:xe,onRefreshChange:e.onRefreshChange,showUpdateButton:!1,recentlyUsedRanges:de,locale:h.i18n.getLocale(),commonlyUsedRanges:ge,dateFormat:W.get("dateFormat"),isAutoRefreshOnly:L,className:"kbnQueryBar__datePicker",isQuickSelectOnly:!i&&U,width:i?"full":"auto",compressed:Pe()}),n,e.query);return Object(F.jsx)(O.EuiFlexItem,{className:a},o)}():null,Te()?d:null)))}()),!Pe()&&e.filterBar,d&&Re()))}),(({query:e,...t},{query:n,...r})=>{let a=!0;return e!==n&&(g()(e,n)||(a=!1)),a&&Object(w.a)(t,r)}));t.default=M},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(0),a=n.n(r),i=n(22),o=n(12),s=n(23),u=n(14),l=n(52),c=n(70),d=n(83),g=n(1);const b=a.a.memo((function({indexPatterns:e,filters:t,timeRangeForSuggestionsOverride:n,filtersForSuggestions:a,closePopoverOnAdd:b,closePopoverOnCancel:f,onFiltersUpdated:p,onLocalFilterUpdate:j,onLocalFilterCreate:m,suggestionsAbstraction:y}){const O=Object(r.useRef)(),h=Object(s.useKibana)(),{uiSettings:x,data:v,usageCollection:S,appName:B,docLinks:F}=h.services,T=null==S?void 0:S.reportUiCounter.bind(S,B),[P,w]=Object(r.useState)([]),[R,L]=Object(r.useState)(void 0),E=x.get(u.UI_SETTINGS.FILTERS_PINNED_BY_DEFAULT);return Object(r.useEffect)((()=>(O.current=new AbortController,()=>{var e;null===(e=O.current)||void 0===e||e.abort()})),[]),Object(r.useEffect)((()=>{e&&(async()=>{var t;const n=null==e?void 0:e.filter((e=>"string"==typeof e)),r=null==e?void 0:e.filter((e=>"string"!=typeof e));null===(t=O.current)||void 0===t||t.abort(),O.current=new AbortController;const a=O.current,o=await Object(d.a)(v.dataViews,n.map((e=>({type:"title",value:e}))));if(!a.signal.aborted){w([...r,...o]);const[e]=[...r,...o],t=e&&e.id,n=Object(i.buildEmptyFilter)(E,t);L(n)}})()}),[v.dataViews,e,m,j,E]),Object(g.jsx)("div",{style:{width:l.FILTER_EDITOR_WIDTH,maxWidth:"100%"}},R&&Object(g.jsx)(c.a,{mode:"add",filter:R,indexPatterns:P,key:JSON.stringify(R),onSubmit:function(e){null==T||T(o.METRIC_TYPE.CLICK,"filter:added"),null==b||b();const n=[...t,e];null==p||p(n)},onCancel:()=>null==f?void 0:f(),onLocalFilterUpdate:j,onLocalFilterCreate:m,timeRangeForSuggestionsOverride:n,filtersForSuggestions:a,suggestionsAbstraction:y,docLinks:F,dataViews:v.dataViews}))}))},93:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!=a--;){var o=i[a];if(!e(t[o],n[o]))return!1}return!0}return t!=t&&n!=n}}}]);