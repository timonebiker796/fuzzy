(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[12,19],{51:function(e,t,i){"use strict";i.r(t),i.d(t,"DataViewsList",(function(){return y}));var r=i(3),n=i.n(r),a=i(0),s=i.n(a),o=i(6),c=i(4),d=i(1);const l="esql";var u=i(2),g=i.n(u),p=i(9);const h="unified_search_sorting",S="alphabetically";class sorting_service_SortingService{constructor(e,t=new p.Storage(window.localStorage)){g()(this,"sortingStrategyType",void 0),g()(this,"direction",void 0),this.sortingStrategies=e,this.storage=t;const{sortingStrategyType:i,direction:r}=this.getSorting();this.sortingStrategyType=i,this.direction=r}getSorting(){var e,t;let i;try{i=this.storage.get(h)}catch(e){i=void 0}return{sortingStrategyType:(null===(e=i)||void 0===e?void 0:e.sortingStrategyType)||S,direction:(null===(t=i)||void 0===t?void 0:t.direction)||o.SortDirection.ASC}}setDirection(e){this.direction=e,this.storage.set(h,{direction:e,sortingStrategyType:this.sortingStrategyType})}setSortingStrategyType(e){this.sortingStrategyType=e,this.storage.set(h,{sortingStrategyType:e,direction:this.direction})}getOrderDirections(){return[o.SortDirection.ASC,o.SortDirection.DESC]}getSortingStrategyTypes(){return[S]}sortData(e){return[...e].sort(((e,t)=>{const i=this.sortingStrategies[this.sortingStrategyType],r=i(e),n=i(t);return this.compare(r,n)}))}compare(e,t){return this.direction===o.SortDirection.ASC?e.localeCompare(t):t.localeCompare(e)}}var b=i(69);const j={sortOrder:{asc:{getSortOrderLabel:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortOrder.asc",{defaultMessage:"Ascending"})},desc:{getSortOrderLabel:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortOrder.desc",{defaultMessage:"Descending"})}},editorAndPopover:{getSortDirectionLegend:()=>c.i18n.translate("unifiedSearch.optionsList.popover.sortDirections",{defaultMessage:"Sort directions"}),adhoc:{getTemporaryDataviewLabel:()=>c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.temporaryDataviewLabel",{defaultMessage:"Temporary"})},search:{getSearchPlaceholder:()=>c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.findDataView",{defaultMessage:"Find a data view"})}}};var v={name:"18g08sj",styles:"padding-bottom:0"};function y({dataViewsList:e,onChangeDataView:t,isTextBasedLangSelected:i,currentDataViewId:r,selectableProps:c,searchListInputId:u}){const g=Object(a.useMemo)((()=>new sorting_service_SortingService({alphabetically:e=>{var t;return null!==(t=e.name)&&void 0!==t?t:e.title}})),[]),[p,h]=Object(a.useState)((()=>{const t=e.filter((e=>!e.isAdhoc||e.type!==l));return g.sortData(t)})),S=Object(a.useMemo)((()=>g.getOrderDirections().map((e=>({id:e,iconType:`sort${Object(o.toSentenceCase)(e)}ending`,label:j.sortOrder[e].getSortOrderLabel()})))),[g]),y=Object(a.useCallback)((e=>{g.setDirection(e),h((e=>g.sortData(e)))}),[g]);return Object(d.jsx)(o.EuiSelectable,n()({},c,{listProps:{truncationProps:b.a,...null!=c&&c.listProps?c.listProps:void 0},"data-test-subj":"indexPattern-switcher",searchable:!0,singleSelection:"always",options:null==p?void 0:p.map((({title:e,id:t,name:n,isAdhoc:a})=>({key:t,label:n||e,value:t,checked:t!==r||Boolean(i)?void 0:"on",append:a?Object(d.jsx)(o.EuiBadge,{color:"hollow","data-test-subj":`dataViewItemTempBadge-${n}`},j.editorAndPopover.adhoc.getTemporaryDataviewLabel()):null}))),onChange:e=>{const i=e.find((({checked:e})=>e));t(i.value)},searchProps:{id:u,compressed:!0,placeholder:j.editorAndPopover.search.getSearchPlaceholder(),"data-test-subj":"indexPattern-switcher--input",...c?c.searchProps:void 0}}),((e,t)=>Object(d.jsx)(s.a.Fragment,null,Object(d.jsx)(o.EuiPanel,{css:v,color:"transparent",paddingSize:"s"},Object(d.jsx)(o.EuiFlexGroup,{gutterSize:"xs",direction:"row",justifyContent:"spaceBetween",alignItems:"center",responsive:!1},Object(d.jsx)(o.EuiFlexItem,null,t),Object(d.jsx)(o.EuiFlexItem,{grow:!1},Object(d.jsx)(o.EuiButtonGroup,{isIconOnly:!0,buttonSize:"compressed",options:S,legend:j.editorAndPopover.getSortDirectionLegend(),idSelected:g.direction,onChange:y})))),e)))}t.default=y},55:function(e,t,i){"use strict";i.r(t),i.d(t,"DataViewSelector",(function(){return l}));var r=i(0),n=i(23),a=i(51),s=i(6),o=i(1),c=i(4);const d=({noDataViewMatches:e,indexMatches:t,dataViewSearchString:i,setPopoverIsOpen:r,onCreateDefaultAdHocDataView:n})=>{const{euiTheme:a}=Object(s.useEuiTheme)();return n&&e&&t>0?Object(o.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",css:Object(o.css)("margin:",a.size.s,";margin-bottom:0;","")},Object(o.jsx)(s.EuiFlexItem,{grow:!0},Object(o.jsx)(s.EuiButton,{fullWidth:!0,size:"s","data-test-subj":"explore-matching-indices-button",onClick:()=>{r(!1),n({title:i})}},c.i18n.translate("unifiedSearch.query.queryBar.indexPattern.createForMatchingIndices",{defaultMessage:"Explore {indicesLength, plural,\n              one {# matching index}\n              other {# matching indices}}",values:{indicesLength:t}})),Object(o.jsx)(s.EuiSpacer,{size:"s"}))):null},l=({currentDataViewId:e,searchListInputId:t,dataViewsList:i,selectableProps:s,isTextBasedLangSelected:c,setPopoverIsOpen:l,onChangeDataView:u,onCreateDefaultAdHocDataView:g})=>{const p=Object(n.useKibana)(),{dataViews:h}=p.services,[S,b]=Object(r.useState)(!1),[j,v]=Object(r.useState)(""),[y,w]=Object(r.useState)(0),O=Object(r.useRef)();return Object(r.useEffect)((()=>(O.current=setTimeout((async function(){if(""!==j&&S){const e=await h.getIndices({pattern:j,isRollupIndex:()=>!1,showAllIndices:!1});w(e.length)}}),250),()=>{O.current&&clearTimeout(O.current)})),[j,h,S]),Object(o.jsx)(r.Fragment,null,Object(o.jsx)(a.DataViewsList,{dataViewsList:i,onChangeDataView:u,currentDataViewId:e,selectableProps:{...s||{},searchProps:{...(null==s?void 0:s.searchProps)||{},onChange:(e,t)=>{var r,n;null==s||null===(r=s.searchProps)||void 0===r||null===(n=r.onChange)||void 0===n||n.call(r,e,t),b(0===t.length&&i.length>0),v(e)}}},searchListInputId:t,isTextBasedLangSelected:c}),Object(o.jsx)(d,{noDataViewMatches:S,indexMatches:y,dataViewSearchString:j,setPopoverIsOpen:l,onCreateDefaultAdHocDataView:g}))};t.default=l}}]);