(window.unifiedSearch_bundle_jsonpfunction=window.unifiedSearch_bundle_jsonpfunction||[]).push([[4],{100:function(e,t,s){var i=s(24),n=s(101);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},101:function(e,t,s){(t=s(25)(!1)).push([e.i,".kbnQueryBar__wrap{display:flex;height:40px;width:100%;z-index:2000}.kbnQueryBar__wrap>[aria-expanded=true]{filter:drop-shadow(0 5.7px 12px rgba(0,0,0,.125))}.kbnQueryBar__textareaWrap{display:flex;flex:1 1 100%;overflow:visible!important;position:relative}.kbnQueryBar__textarea{height:40px;margin:0;padding:10px 8px 8px;resize:none!important;z-index:2000}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){overflow-x:hidden;overflow-y:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal}.kbnQueryBar__textarea.kbnQueryBar__textarea--isSuggestionsVisible{border-bottom-left-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea--isClearable{padding-right:40px}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea~.euiFormControlLayoutIcons{bottom:unset;top:12px;z-index:2001}.kbnQueryBar__textarea--withPrepend{border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px;width:calc(100% + 1px)}",""]),e.exports=t},102:function(e,t,s){var i=s(24),n=s(103);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},103:function(e,t,s){(t=s(25)(!1)).push([e.i,".kbnQueryBar__wrap{display:flex;height:40px;width:100%;z-index:2000}.kbnQueryBar__wrap>[aria-expanded=true]{filter:drop-shadow(0 5.7px 12px rgba(0,0,0,.05))}.kbnQueryBar__textareaWrap{display:flex;flex:1 1 100%;overflow:visible!important;position:relative}.kbnQueryBar__textarea{height:40px;margin:0;padding:10px 8px 8px;resize:none!important;z-index:2000}.kbnQueryBar__textarea:not(.kbnQueryBar__textarea--autoHeight){overflow-x:hidden;overflow-y:hidden}.kbnQueryBar__textarea.kbnQueryBar__textarea--autoHeight{overflow-x:auto;overflow-y:auto;white-space:normal}.kbnQueryBar__textarea.kbnQueryBar__textarea--isSuggestionsVisible{border-bottom-left-radius:0;border-bottom-right-radius:0}.kbnQueryBar__textarea--isClearable{padding-right:40px}.kbnQueryBar__textarea--withIcon{padding-left:40px}.kbnQueryBar__textarea~.euiFormControlLayoutIcons{bottom:unset;top:12px;z-index:2001}.kbnQueryBar__textarea--withPrepend{border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px;width:calc(100% + 1px)}",""]),e.exports=t},143:function(e,t,s){"use strict";s.r(t),s.d(t,"strings",(function(){return R})),s.d(t,"default",(function(){return query_string_input_QueryStringInputUI}));var i=s(3),n=s.n(i),r=s(2),a=s.n(r),o=s(0),u=s.n(o),l=s(49),h=s.n(l),p=s(12),c=s(6),d=s(4),g=s(48),b=s(7),y=s(50),f=s(26),x=s(14),m=s(34),S=s(22);const _=["()","[]","{}","''",'""'],v=_.map((e=>e[0])),k=_.map((e=>e[1]));function j(e=""){return e.match(/[a-zA-Z0-9_]/)}function I(e){return null==e?"":"object"==typeof e?e.query_string?I(e.query_string.query):JSON.stringify(e):""+e}var C=s(82),O=s(83),Q=s(84),B=s(1);const q=()=>Object(B.jsx)("div",null),L=u.a.lazy((()=>s.e(9).then(s.bind(null,154)))),w=e=>Object(B.jsx)(u.a.Suspense,{fallback:Object(B.jsx)(q,null)},Object(B.jsx)(L,e));var E=s(71),T=s(85),F=s(27),P=(s(30),s(5));s(99);const R={getSearchInputPlaceholderForText:()=>d.i18n.translate("unifiedSearch.query.queryBar.searchInputPlaceholderForText",{defaultMessage:"Filter your data"}),getSearchInputPlaceholder:e=>d.i18n.translate("unifiedSearch.query.queryBar.searchInputPlaceholder",{defaultMessage:"Filter your data using {language} syntax",values:{language:e}}),getQueryBarComboboxAriaLabel:e=>d.i18n.translate("unifiedSearch.query.queryBar.comboboxAriaLabel",{defaultMessage:"Search and filter the {pageType} page",values:{pageType:e}}),getQueryBarSearchInputAriaLabel:e=>d.i18n.translate("unifiedSearch.query.queryBar.searchInputAriaLabel",{defaultMessage:"Start typing to search and filter the {pageType} page",values:{pageType:e}}),getQueryBarClearInputLabel:()=>d.i18n.translate("unifiedSearch.query.queryBar.clearInputLabel",{defaultMessage:"Clear input"}),getKQLNestedQuerySyntaxInfoTitle:()=>d.i18n.translate("unifiedSearch.query.queryBar.KQLNestedQuerySyntaxInfoTitle",{defaultMessage:"KQL nested query syntax"})},A={LEFT:37,UP:38,RIGHT:39,DOWN:40,ENTER:13,ESC:27,TAB:9,HOME:36,END:35};class query_string_input_QueryStringInputUI extends o.PureComponent{constructor(...e){var t;super(...e),a()(this,"state",{isSuggestionsVisible:!1,index:null,suggestions:[],suggestionLimit:50,selectionStart:null,selectionEnd:null,indexPatterns:[],queryBarInputDiv:null}),a()(this,"inputRef",null),a()(this,"persistedLog",void 0),a()(this,"abortController",void 0),a()(this,"fetchIndexPatternsAbortController",void 0),a()(this,"reportUiCounter",null===(t=this.props.deps.usageCollection)||void 0===t?void 0:t.reportUiCounter.bind(this.props.deps.usageCollection,this.props.appName)),a()(this,"componentIsUnmounting",!1),a()(this,"isFocusWithin",!1),a()(this,"getQueryString",(()=>I(this.props.query.query))),a()(this,"fetchIndexPatterns",Object(b.debounce)((async()=>{const[e=[],t=[]]=Object(b.partition)(this.props.indexPatterns||[],(e=>e.hasOwnProperty("fields")&&e.hasOwnProperty("title"))),s=t.map((e=>"string"==typeof e?{type:"title",value:e}:e));this.fetchIndexPatternsAbortController&&this.fetchIndexPatternsAbortController.abort(),this.fetchIndexPatternsAbortController=new AbortController;const i=this.fetchIndexPatternsAbortController,n=await Object(O.a)(this.props.deps.data.dataViews,s);i.signal.aborted||(this.setState({indexPatterns:[...e,...n]}),this.updateSuggestions())}),200)),a()(this,"getSuggestions",(async()=>{if(!this.inputRef)return;const e=this.props.query.language,t=this.getQueryString(),s=this.getRecentSearchSuggestions(t);if(!this.props.deps.unifiedSearch.autocomplete.hasQuerySuggestions(e)||!Array.isArray(this.state.indexPatterns)||0===Object(b.compact)(this.state.indexPatterns).length)return s;const i=this.state.indexPatterns,{selectionStart:n,selectionEnd:r}=this.inputRef;if(null!==n&&null!==r)try{var a;return this.abortController&&this.abortController.abort(),this.abortController=new AbortController,[...await this.props.deps.unifiedSearch.autocomplete.getQuerySuggestions({language:e,indexPatterns:i,query:t,selectionStart:n,selectionEnd:r,signal:this.abortController.signal,useTimeRange:this.props.timeRangeForSuggestionsOverride,boolFilter:Object(S.buildQueryFromFilters)(this.props.filtersForSuggestions,void 0).filter,method:null!==(a=this.props.filtersForSuggestions)&&void 0!==a&&a.length?"terms_agg":void 0,suggestionsAbstraction:this.props.suggestionsAbstraction})||[],...s]}catch(e){var o;if("The user aborted a request."===e.message)return;throw null===(o=this.reportUiCounter)||void 0===o||o.call(this,p.METRIC_TYPE.LOADED,"query_string:suggestions_error"),e}})),a()(this,"getRecentSearchSuggestions",(e=>this.persistedLog?this.persistedLog.get().filter((t=>{const s="object"==typeof t?I(t):t;return""!==s&&s.includes(e)})).map((t=>{const s=I(t),i=e.length;return{type:F.a.RecentSearch,text:s,start:0,end:i}})):[])),a()(this,"updateSuggestions",Object(b.debounce)((async()=>{const e=await this.getSuggestions()||[];this.componentIsUnmounting||this.setState({suggestions:e})}),100)),a()(this,"onSubmit",(e=>{this.props.onSubmit&&(this.persistedLog&&this.persistedLog.add(e.query),this.props.onSubmit({query:Object(C.a)(e.query),language:e.language}))})),a()(this,"onChange",(e=>{this.updateSuggestions(),this.props.onChange&&this.props.onChange({query:Object(C.a)(e.query),language:e.language})})),a()(this,"onQueryStringChange",(e=>{this.setState({isSuggestionsVisible:!0,index:null,suggestionLimit:50}),this.props.query.query!==e&&this.onChange({query:e,language:this.props.query.language})})),a()(this,"onInputChange",(e=>{const t=this.formatTextAreaValue(e.target.value);this.onQueryStringChange(t),""===e.target.value?this.handleRemoveHeight():this.handleAutoHeight()})),a()(this,"onClickInput",(e=>{if(e.target instanceof HTMLTextAreaElement){const t=this.formatTextAreaValue(e.target.value);this.onQueryStringChange(t)}})),a()(this,"onKeyUp",(e=>{if([A.LEFT,A.RIGHT,A.HOME,A.END].includes(e.keyCode)&&(this.setState({isSuggestionsVisible:!0}),e.target instanceof HTMLTextAreaElement)){const t=this.formatTextAreaValue(e.target.value);this.onQueryStringChange(t)}})),a()(this,"onKeyDown",(e=>{if(e.target instanceof HTMLTextAreaElement){const{isSuggestionsVisible:t,index:s}=this.state,i=e.preventDefault.bind(e),{target:n,key:r,metaKey:a}=e,{value:o,selectionStart:u,selectionEnd:l}=n,h=(e,t,s)=>{var i,n;this.onQueryStringChange(e),(null===(i=this.inputRef)||void 0===i?void 0:i.selectionStart)===t&&(null===(n=this.inputRef)||void 0===n?void 0:n.selectionEnd)===s||this.setState({selectionStart:t,selectionEnd:s})};switch(e.keyCode){case A.DOWN:t&&null!==s?(e.preventDefault(),this.incrementIndex(s)):(t&&null==s||""===this.getQueryString())&&(e.preventDefault(),this.setState({isSuggestionsVisible:!0,index:0}));break;case A.UP:t&&null!==s&&(e.preventDefault(),this.decrementIndex(s));break;case A.ENTER:this.props.bubbleSubmitEvent||e.preventDefault(),t&&null!==s&&this.state.suggestions[s]?(e.preventDefault(),this.selectSuggestion(this.state.suggestions[s],s)):(this.onSubmit(this.props.query),this.setState({isSuggestionsVisible:!1}));break;case A.ESC:t&&e.preventDefault(),this.setState({isSuggestionsVisible:!1,index:null});break;case A.TAB:this.setState({isSuggestionsVisible:!1,index:null});break;default:null!==u&&null!==l&&function({value:e,selectionStart:t,selectionEnd:s,key:i,metaKey:n,updateQuery:r,preventDefault:a}){!function(e,t,s,i){return!!k.includes(e)&&s===i&&t.charAt(i)===e}(i,e,t,s)?function(e,t,s,i){if(!v.includes(e))return!1;if(s!==i)return!0;const n=t.charAt(s-1),r=t.charAt(s+1);return"\\"!==n&&!(['"',"'"].includes(e)&&(j(n)||j(r)))}(i,e,t,s)?(a(),r(e.substr(0,t)+i+e.substring(t,s)+k[v.indexOf(i)]+e.substr(s),t+1,s+1)):function(e,t,s,i,n){return"Backspace"===e&&!t&&i===n&&_.includes(s.substr(n-1,2))}(i,n,e,t,s)&&(a(),r(e.substr(0,s-1)+e.substr(s+1),t-1,s-1)):(a(),r(e,t+1,s+1))}({value:o,selectionStart:u,selectionEnd:l,key:r,metaKey:a,updateQuery:h,preventDefault:i})}}})),a()(this,"selectSuggestion",((e,t)=>{var s,i;if(!this.inputRef)return;const{type:n,text:r,start:a,end:o,cursorIndex:u}=e;this.handleNestedFieldSyntaxNotification(e);const l=this.getQueryString(),{selectionStart:h,selectionEnd:c}=this.inputRef;if(null===h||null===c)return;const d=l.substr(0,h)+l.substr(c),g=d.substr(0,a)+r+d.substr(o);null===(s=this.reportUiCounter)||void 0===s||s.call(this,p.METRIC_TYPE.CLICK,`query_string:${n}:suggestions_select_position_${t}`),null===(i=this.reportUiCounter)||void 0===i||i.call(this,p.METRIC_TYPE.CLICK,`query_string:${n}:suggestions_select_q_length_${o-a}`),this.onQueryStringChange(g),this.setState({selectionStart:a+(u||r.length),selectionEnd:a+(u||r.length)});const b=n===F.a.RecentSearch,y=this.props.autoSubmit&&(n===F.a.Value||[":*",": *"].includes(d.trim()));(b||y)&&(this.setState({isSuggestionsVisible:!1,index:null}),this.onSubmit({query:g,language:this.props.query.language}))})),a()(this,"handleNestedFieldSyntaxNotification",(e=>{const t="field"in e&&Object(x.getFieldSubtypeNested)(e.field);if(t&&t.nested&&!this.props.deps.storage.get("kibana.KQLNestedQuerySyntaxInfoOptOut")){const{notifications:e,docLinks:t}=this.props.deps,s=t=>{this.props.deps.storage&&(this.props.deps.storage.set("kibana.KQLNestedQuerySyntaxInfoOptOut",!0),e.toasts.remove(t))};if(e&&t){const i=e.toasts.add({title:R.getKQLNestedQuerySyntaxInfoTitle(),text:Object(m.a)(Object(B.jsx)("div",null,Object(B.jsx)("p",null,Object(B.jsx)(g.FormattedMessage,{id:"unifiedSearch.query.queryBar.KQLNestedQuerySyntaxInfoText",defaultMessage:"It looks like you're querying on a nested field. You can construct KQL syntax for nested queries in different ways, depending on the results you want. Learn more in our {link}.",values:{link:Object(B.jsx)(c.EuiLink,{href:t.links.query.kueryQuerySyntax,target:"_blank"},Object(B.jsx)(g.FormattedMessage,{id:"unifiedSearch.query.queryBar.KQLNestedQuerySyntaxInfoDocLinkText",defaultMessage:"docs"}))}})),Object(B.jsx)(c.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(B.jsx)(c.EuiFlexItem,{grow:!1},Object(B.jsx)(c.EuiButton,{size:"s",onClick:()=>s(i)},Object(B.jsx)(g.FormattedMessage,{id:"unifiedSearch.query.queryBar.KQLNestedQuerySyntaxInfoOptOutText",defaultMessage:"Don't show again"}))))),{analytics:Object(P.a)(),i18n:Object(P.b)(),theme:Object(P.e)()})})}}})),a()(this,"increaseLimit",(()=>{this.setState({suggestionLimit:this.state.suggestionLimit+50})})),a()(this,"incrementIndex",(e=>{let t=e+1;(null===e||t>=this.state.suggestions.length)&&(t=0),this.setState({index:t})})),a()(this,"decrementIndex",(e=>{const t=e-1;t<0?this.setState({index:this.state.suggestions.length-1}):this.setState({index:t})})),a()(this,"onSelectLanguage",(e=>{var t;this.props.deps.http.post("/internal/kql_opt_in_stats",{version:x.KQL_TELEMETRY_ROUTE_LATEST_VERSION,body:JSON.stringify({opt_in:"kuery"===e})});const s=this.props.storageKey;this.props.deps.storage.set(s,e);const i={query:"",language:e};this.onChange(i),this.onSubmit(i),null===(t=this.reportUiCounter)||void 0===t||t.call(this,p.METRIC_TYPE.LOADED,s?`${s}:language:${e}`:`query_string:language:${e}`)})),a()(this,"onOutsideClick",(()=>{this.state.isSuggestionsVisible&&(this.setState({isSuggestionsVisible:!1,index:null}),this.scheduleOnInputBlur())})),a()(this,"blurTimeoutHandle",void 0),a()(this,"scheduleOnInputBlur",(()=>{clearTimeout(this.blurTimeoutHandle),this.blurTimeoutHandle=window.setTimeout((()=>{this.isFocusWithin||this.state.isSuggestionsVisible||this.componentIsUnmounting||(this.handleBlurHeight(),this.props.onChangeQueryInputFocus&&this.props.onChangeQueryInputFocus(!1),this.props.submitOnBlur&&this.onSubmit(this.props.query))}),50)})),a()(this,"onInputBlur",(()=>{Object(b.isFunction)(this.props.onBlur)&&this.props.onBlur()})),a()(this,"onClickSuggestion",((e,t)=>{this.inputRef&&(this.selectSuggestion(e,t),this.inputRef.focus())})),a()(this,"initPersistedLog",(()=>{const{uiSettings:e}=this.props.deps,{appName:t}=this.props;this.persistedLog=this.props.persistedLog?this.props.persistedLog:Object(f.getQueryLog)(e,this.props.deps.storage,t,this.props.query.language)})),a()(this,"onMouseEnterSuggestion",((e,t)=>{this.setState({index:t})})),a()(this,"textareaId",Object(c.htmlIdGenerator)()()),a()(this,"handleAutoHeight",Object(E.b)((()=>{null!==this.inputRef&&document.activeElement===this.inputRef&&(this.inputRef.classList.add("kbnQueryBar__textarea--autoHeight"),this.inputRef.style.setProperty("height",`${this.inputRef.scrollHeight}px`,"important"))}))),a()(this,"handleRemoveHeight",Object(E.b)((()=>{null!==this.inputRef&&(this.inputRef.style.removeProperty("height"),this.inputRef.classList.remove("kbnQueryBar__textarea--autoHeight"))}))),a()(this,"handleBlurHeight",Object(E.b)((()=>{null!==this.inputRef&&(this.handleRemoveHeight(),this.inputRef.scrollTop=0)}))),a()(this,"handleOnFocus",(()=>{this.props.onChangeQueryInputFocus&&this.props.onChangeQueryInputFocus(!0),this.handleAutoHeight()})),a()(this,"getSearchInputPlaceholder",(()=>{if(!this.props.query.language||"text"===this.props.query.language)return R.getSearchInputPlaceholderForText();const e="kuery"===this.props.query.language?"KQL":Object(c.toSentenceCase)(this.props.query.language);return R.getSearchInputPlaceholder(e)})),a()(this,"assignInputRef",(e=>{this.inputRef=e})),a()(this,"assignQueryInputDivRef",(e=>{this.setState({queryBarInputDiv:e})})),a()(this,"onFocusWithin",(()=>{this.isFocusWithin=!0})),a()(this,"onBlurWithin",(()=>{this.isFocusWithin=!1,this.scheduleOnInputBlur()}))}componentDidMount(){const e=Object(C.a)(I(this.props.query.query));Object(b.isEqual)(this.props.query.query,e)||this.onChange({...this.props.query,query:e}),this.initPersistedLog(),this.fetchIndexPatterns(),this.handleAutoHeight(),window.addEventListener("resize",this.handleAutoHeight)}componentDidUpdate(e){const t=Object(C.a)(I(this.props.query.query));Object(b.isEqual)(this.props.query.query,t)||this.onChange({...this.props.query,query:t}),this.initPersistedLog(),Object(b.isEqual)(e.indexPatterns,this.props.indexPatterns)?Object(b.isEqual)(e.query,this.props.query)||this.updateSuggestions():this.fetchIndexPatterns(),null!==this.state.selectionStart&&null!==this.state.selectionEnd&&(null!=this.inputRef&&this.inputRef.setSelectionRange(this.state.selectionStart,this.state.selectionEnd),this.setState({selectionStart:null,selectionEnd:null})),null!==document.activeElement&&document.activeElement.id===this.textareaId?this.handleAutoHeight():this.handleRemoveHeight()}componentWillUnmount(){this.abortController&&this.abortController.abort(),this.updateSuggestions.cancel&&this.updateSuggestions.cancel(),this.componentIsUnmounting=!0,window.removeEventListener("resize",this.handleAutoHeight)}render(){const e=this.state.isSuggestionsVisible&&{"aria-controls":"kbnTypeahead__items","aria-owns":"kbnTypeahead__items"},t={...e,role:"combobox"},s=this.props.disableLanguageSwitcher?null:Object(B.jsx)(Q.a,{language:this.props.query.language,anchorPosition:this.props.languageSwitcherPopoverAnchorPosition,onSelectLanguage:this.onSelectLanguage,nonKqlMode:this.props.nonKqlMode,deps:{docLinks:this.props.deps.docLinks}}),i=this.props.prepend||s?Object(B.jsx)(T.a,{attached:!0,items:[this.props.prepend,s]}):void 0,r=h()("kbnQueryBar__wrap",this.props.className),a=h()("kbnQueryBar__textarea",{"kbnQueryBar__textarea--withIcon":this.props.iconType,"kbnQueryBar__textarea--isClearable":this.props.isClearable,"kbnQueryBar__textarea--withPrepend":i,"kbnQueryBar__textarea--isSuggestionsVisible":e&&!Object(b.isEmpty)(this.state.suggestions)}),o=h()("kbnQueryBar__textareaWrap");return Object(B.jsx)("div",{className:r,onFocus:this.onFocusWithin,onBlur:this.onBlurWithin},i,Object(B.jsx)(c.EuiOutsideClickDetector,{onOutsideClick:this.onOutsideClick},Object(B.jsx)("div",n()({},t,{style:{position:"relative",width:"100%",zIndex:y.euiThemeVars.euiZLevel1},"aria-label":R.getQueryBarComboboxAriaLabel(this.props.appName),"aria-haspopup":"true","aria-expanded":this.state.isSuggestionsVisible,"data-skip-axe":"aria-required-children"}),Object(B.jsx)("div",{role:"search",className:o,ref:this.assignQueryInputDivRef},Object(B.jsx)(c.EuiTextArea,{placeholder:this.props.placeholder||this.getSearchInputPlaceholder(),value:this.forwardNewValueIfNeeded(this.getQueryString()),onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onChange:this.onInputChange,onClick:this.onClickInput,onBlur:this.onInputBlur,onFocus:this.handleOnFocus,disabled:this.props.isDisabled,className:a,fullWidth:!0,rows:1,id:this.textareaId,autoFocus:!this.props.onChangeQueryInputFocus&&!this.props.disableAutoFocus,inputRef:this.assignInputRef,autoComplete:"off",spellCheck:!1,"aria-label":R.getQueryBarSearchInputAriaLabel(this.props.appName),"aria-autocomplete":"list","aria-controls":this.state.isSuggestionsVisible?"kbnTypeahead__items":void 0,"aria-activedescendant":this.state.isSuggestionsVisible&&"number"==typeof this.state.index?`suggestion-${this.state.index}`:void 0,role:"textbox","data-test-subj":this.props.dataTestSubj||"queryInput",isInvalid:this.props.isInvalid},this.forwardNewValueIfNeeded(this.getQueryString())),this.props.iconType?Object(B.jsx)("div",{className:"euiFormControlLayoutIcons euiFormControlLayoutIcons--absolute euiFormControlLayoutIcons--left"},Object(B.jsx)(c.EuiIcon,{className:"euiFormControlLayoutCustomIcon__icon","aria-hidden":"true",type:this.props.iconType})):null,this.props.isClearable&&!this.props.isDisabled&&this.props.query.query?Object(B.jsx)("div",{className:"euiFormControlLayoutIcons euiFormControlLayoutIcons--absolute euiFormControlLayoutIcons--right"},Object(B.jsx)("button",{type:"button",className:"euiFormControlLayoutClearButton",title:R.getQueryBarClearInputLabel(),onClick:()=>{this.onQueryStringChange(""),this.props.autoSubmit&&this.onSubmit({query:"",language:this.props.query.language})}},Object(B.jsx)(c.EuiIcon,{className:"euiFormControlLayoutClearButton__icon",type:"cross"}))):null),Object(B.jsx)(c.EuiPortal,null,Object(B.jsx)(w,{show:this.state.isSuggestionsVisible,suggestions:this.state.suggestions.slice(0,this.state.suggestionLimit),index:this.state.index,onClick:this.onClickSuggestion,onMouseEnter:this.onMouseEnterSuggestion,loadMore:this.increaseLimit,size:this.props.size,inputContainer:this.state.queryBarInputDiv})))))}formatTextAreaValue(e){return e.replace(/\u00A0/g," ")}forwardNewValueIfNeeded(e){var t,s;const i=null!==(t=null===(s=this.inputRef)||void 0===s?void 0:s.value)&&void 0!==t?t:"",n=this.formatTextAreaValue(e);return n===this.formatTextAreaValue(i)?i:n}}a()(query_string_input_QueryStringInputUI,"defaultProps",{storageKey:x.KIBANA_USER_QUERY_LANGUAGE_KEY,iconType:"search",isClearable:!0})},82:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s(7),n=s.n(i);function r(e){if(n.a.isEmpty(e))return"";if(n.a.isObject(e))return e;if("string"==typeof(e=e||"")){const t=e.trim();if(0===t.length)return"";if("{"!==t[0])return e;try{return JSON.parse(t)}catch(t){return e}}}},83:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var i=s(7);async function n(e,t){if(!t||Object(i.isEmpty)(t))return[];const s=[],n=[];for(const{type:e,value:i}of t)"title"===e?s.push(i):n.push(i);const r=s.map((e=>`"${e}"`)).join(" | "),[a,...o]=await Promise.all([e.find(r),...n.map((t=>e.get(t)))]),u=[...a.filter((e=>s.includes(e.title))),...o];return(u.length===t.length?u:[...u,await e.getDefault()]).filter((e=>null!=e))}},84:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s(6),n=s(48),r=s(0),a=s.n(r),o=s(4),u=s(1);const l=a.a.memo((function({language:e,anchorPosition:t,onSelectLanguage:s,nonKqlMode:a="lucene",isOnTopBarMenu:l,isDisabled:h,deps:{docLinks:p}}){const c=p.links.query.kueryQuerySyntax,[d,g]=Object(r.useState)(!1),b=Object(u.jsx)(i.EuiButtonIcon,{size:"m",iconType:"filter",onClick:()=>g(!d),className:"euiFormControlLayout__append kqlQueryBar__languageSwitcherButton","data-test-subj":"switchQueryLanguageButton","aria-label":o.i18n.translate("unifiedSearch.switchLanguage.buttonText",{defaultMessage:"Switch language button."}),disabled:h}),y=Object(u.jsx)("div",null,Object(u.jsx)(i.EuiContextMenuItem,{key:"KQL",icon:"kuery"===e?"check":"empty","data-test-subj":"kqlLanguageMenuItem",onClick:()=>{s("kuery")}},"KQL"),Object(u.jsx)(i.EuiContextMenuItem,{key:a,icon:"kuery"===e?"empty":"check","data-test-subj":"luceneLanguageMenuItem",onClick:()=>{s(a)}},Object(i.toSentenceCase)(a)),Object(u.jsx)(i.EuiHorizontalRule,{margin:"none"}),Object(u.jsx)(i.EuiContextMenuItem,{key:"documentation",icon:"documentation",href:c,target:"_blank"},"Documentation")),f=Object(u.jsx)(i.EuiPopover,{id:"queryLanguageSwitcherPopover",anchorPosition:t||"downLeft",button:b,isOpen:d,closePopover:()=>g(!1),repositionOnScroll:!0,panelPaddingSize:"none"},Object(u.jsx)(i.EuiPopoverTitle,{paddingSize:"s"},Object(u.jsx)(n.FormattedMessage,{id:"unifiedSearch.query.queryBar.syntaxOptionsTitle",defaultMessage:"Syntax options"})),y);return Boolean(l)?y:f}))},85:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s(3),n=s.n(i),r=(s(94),s(0),s(49)),a=s.n(r),o=s(6),u=s(1);const l=({items:e,attached:t,size:s="m",...i})=>Object(u.jsx)(o.EuiFlexGroup,n()({className:a()("kbnFilterButtonGroup",{"kbnFilterButtonGroup--attached":t,[`kbnFilterButtonGroup--${s}`]:s}),gutterSize:"none",responsive:!1},i),e.map(((e,t)=>null==e?void 0:Object(u.jsx)(o.EuiFlexItem,{key:t,grow:!1},e))))},94:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(95);case"v8light":return s(97)}},95:function(e,t,s){var i=s(24),n=s(96);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},96:function(e,t,s){(t=s(25)(!1)).push([e.i,".kbnFilterButtonGroup{background-color:#2c2f37;border-radius:6px;box-shadow:inset 0 0 1px #fff6;height:40px}.kbnFilterButtonGroup :enabled{transform:none!important}.kbnFilterButtonGroup--s{height:32px}.kbnFilterButtonGroup--attached{border-bottom-right-radius:0;border-top-right-radius:0}.kbnFilterButtonGroup>:not(:last-of-type){border-right:1px solid #ffffff1a}",""]),e.exports=t},97:function(e,t,s){var i=s(24),n=s(98);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},98:function(e,t,s){(t=s(25)(!1)).push([e.i,".kbnFilterButtonGroup{background-color:#e9edf3;border-radius:6px;box-shadow:inset 0 0 1px #112a8666;height:40px}.kbnFilterButtonGroup :enabled{transform:none!important}.kbnFilterButtonGroup--s{height:32px}.kbnFilterButtonGroup--attached{border-bottom-right-radius:0;border-top-right-radius:0}.kbnFilterButtonGroup>:not(:last-of-type){border-right:1px solid #112a861a}",""]),e.exports=t},99:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(100);case"v8light":return s(102)}}}]);