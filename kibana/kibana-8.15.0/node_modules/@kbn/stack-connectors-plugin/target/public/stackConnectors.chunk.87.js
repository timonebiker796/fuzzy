/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.stackConnectors_bundle_jsonpfunction=window.stackConnectors_bundle_jsonpfunction||[]).push([[87],{153:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return B}));var a=s(1),n=s.n(a),o=s(36),i=s(34),c=s(38),r=s(35),l=s(37),u=s(19),d=s(0);const x=d.i18n.translate("xpack.stackConnectors.components.xmatters.connectorSettingsLabel",{defaultMessage:"Select the authentication method used when setting up the xMatters trigger."}),p=d.i18n.translate("xpack.stackConnectors.components.xmatters.error.requiredConnectorSettingsText",{defaultMessage:"Authentication method is required."}),j=d.i18n.translate("xpack.stackConnectors.components.xmatters.basicAuthButtonGroupLegend",{defaultMessage:"Basic Authentication"}),b=d.i18n.translate("xpack.stackConnectors.components.xmatters.urlLabel",{defaultMessage:"Initiation URL"}),m=d.i18n.translate("xpack.stackConnectors.components.xmatters.userTextFieldLabel",{defaultMessage:"Username"}),f=d.i18n.translate("xpack.stackConnectors.components.xmatters.passwordTextFieldLabel",{defaultMessage:"Password"}),g=d.i18n.translate("xpack.stackConnectors.components.xmatters.error.requiredPasswordText",{defaultMessage:"Password is required."}),O=d.i18n.translate("xpack.stackConnectors.components.xmatters.basicAuthLabel",{defaultMessage:"Basic Authentication"}),F=d.i18n.translate("xpack.stackConnectors.components.xmatters.urlAuthLabel",{defaultMessage:"URL Authentication"}),h=(d.i18n.translate("xpack.stackConnectors.components.xmatters.error.requiredUrlText",{defaultMessage:"URL is required."}),d.i18n.translate("xpack.stackConnectors.components.xmatters.error.invalidUrlTextField",{defaultMessage:"URL is invalid."})),k=d.i18n.translate("xpack.stackConnectors.components.xmatters.error.invalidUsernameTextField",{defaultMessage:"Username is invalid."});var C=s(2);const{emptyField:U,urlField:M}=c.fieldValidators,L=[{id:u.b.Basic,label:O},{id:u.b.URL,label:F}],v=({path:e,readOnly:t})=>Object(C.jsx)(r.UseField,{path:e,component:l.TextField,config:{label:b,helpText:Object(C.jsx)(o.FormattedMessage,{id:"xpack.stackConnectors.components.xmatters.initiationUrlHelpText",defaultMessage:"Include the full xMatters url."}),validations:[{validator:M(h)}]},componentProps:{euiFieldProps:{"data-test-subj":e,readOnly:t}}}),B=({readOnly:e})=>{var t;const{setFieldValue:s,getFieldDefaultValue:c}=Object(r.useFormContext)(),[{config:d,__internal__:b}]=Object(r.useFormData)({watch:["config.usesBasic","__internal__.auth"]}),O=null===(t=c("config.usesBasic"))||void 0===t||t?u.b.Basic:u.b.URL,F=null==d||d.usesBasic?u.b.Basic:u.b.URL;return Object(a.useEffect)((()=>{var e;s("config.usesBasic",null==(e=b)||e.auth===u.b.Basic)}),[b,s]),Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(i.EuiTitle,{size:"xxs"},Object(C.jsx)("h4",null,Object(C.jsx)(o.FormattedMessage,{id:"xpack.stackConnectors.components.xmatters.authenticationLabel",defaultMessage:"Authentication"}))),Object(C.jsx)(i.EuiSpacer,{size:"xs"}),Object(C.jsx)(r.UseField,{path:"__internal__.auth",component:l.ButtonGroupField,config:{label:x,defaultValue:O,validations:[{validator:U(p)}]},componentProps:{euiFieldProps:{legend:j,options:L,buttonSize:"m",color:"primary"}}}),Object(C.jsx)(r.UseField,{path:"config.usesBasic",component:l.HiddenField,config:{defaultValue:!0}}),Object(C.jsx)(i.EuiSpacer,{size:"m"}),F===u.b.URL?Object(C.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(i.EuiFlexItem,null,Object(C.jsx)(v,{path:"secrets.secretsUrl",readOnly:e}))):null,F===u.b.Basic?Object(C.jsx)(n.a.Fragment,null,Object(C.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(i.EuiFlexItem,null,Object(C.jsx)(v,{path:"config.configUrl",readOnly:e}))),Object(C.jsx)(i.EuiSpacer,{size:"m"}),Object(C.jsx)(i.EuiTitle,{size:"xxs"},Object(C.jsx)("h4",null,Object(C.jsx)(o.FormattedMessage,{"data-test-subj":"userCredsLabel",id:"xpack.stackConnectors.components.xmatters.userCredsLabel",defaultMessage:"User credentials"}))),Object(C.jsx)(i.EuiSpacer,{size:"xs"}),Object(C.jsx)(i.EuiSpacer,{size:"m"}),Object(C.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(C.jsx)(i.EuiFlexItem,null,Object(C.jsx)(r.UseField,{path:"secrets.user",component:l.TextField,config:{label:m,validations:[{validator:U(k)}]},componentProps:{euiFieldProps:{disabled:e,"data-test-subj":"xmattersUserInput",readOnly:e}}}))),Object(C.jsx)(i.EuiFlexGroup,null,Object(C.jsx)(i.EuiFlexItem,null,Object(C.jsx)(r.UseField,{path:"secrets.password",config:{label:f,validations:[{validator:U(g)}]},component:l.PasswordField,componentProps:{euiFieldProps:{"data-test-subj":"xmattersPasswordInput",readOnly:e}}})))):null)}}}]);