/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.stackConnectors_bundle_jsonpfunction=window.stackConnectors_bundle_jsonpfunction||[]).push([[19,56],{56:function(e,n,t){"use strict";t.r(n),t.d(n,"API_URL_LABEL",(function(){return o})),t.d(n,"API_KEY_LABEL",(function(){return s})),t.d(n,"DEFAULT_MODEL_LABEL",(function(){return r})),t.d(n,"DEFAULT_MODEL_TOOLTIP_CONTENT",(function(){return i})),t.d(n,"API_PROVIDER_LABEL",(function(){return c})),t.d(n,"OPENAI",(function(){return u})),t.d(n,"AZURE_AI",(function(){return d})),t.d(n,"DOCUMENTATION",(function(){return l})),t.d(n,"URL_LABEL",(function(){return A})),t.d(n,"BODY_REQUIRED",(function(){return p})),t.d(n,"BODY_INVALID",(function(){return f})),t.d(n,"ACTION_REQUIRED",(function(){return g})),t.d(n,"INVALID_ACTION",(function(){return m})),t.d(n,"API_PROVIDER_REQUIRED",(function(){return b})),t.d(n,"USAGE_DASHBOARD_LINK",(function(){return k}));var a=t(0);const o=a.i18n.translate("xpack.stackConnectors.components.genAi.apiUrlTextFieldLabel",{defaultMessage:"URL"}),s=a.i18n.translate("xpack.stackConnectors.components.genAi.apiKeySecret",{defaultMessage:"API key"}),r=a.i18n.translate("xpack.stackConnectors.components.genAi.defaultModelTextFieldLabel",{defaultMessage:"Default model"}),i=a.i18n.translate("xpack.stackConnectors.components.genAi.defaultModelTooltipContent",{defaultMessage:"If a request does not include a model, it uses the default."}),c=a.i18n.translate("xpack.stackConnectors.components.genAi.apiProviderLabel",{defaultMessage:"Select an OpenAI provider"}),u=a.i18n.translate("xpack.stackConnectors.components.genAi.openAi",{defaultMessage:"OpenAI"}),d=a.i18n.translate("xpack.stackConnectors.components.genAi.azureAi",{defaultMessage:"Azure OpenAI"}),l=a.i18n.translate("xpack.stackConnectors.components.genAi.documentation",{defaultMessage:"documentation"}),A=a.i18n.translate("xpack.stackConnectors.components.genAi.urlTextFieldLabel",{defaultMessage:"URL"}),p=a.i18n.translate("xpack.stackConnectors.components.genAi.error.requiredGenerativeAiBodyText",{defaultMessage:"Body is required."}),f=a.i18n.translate("xpack.stackConnectors.security.genAi.params.error.invalidBodyText",{defaultMessage:"Body does not have a valid JSON format."}),g=a.i18n.translate("xpack.stackConnectors.security.genAi.params.error.requiredActionText",{defaultMessage:"Action is required."}),m=a.i18n.translate("xpack.stackConnectors.security.genAi.params.error.invalidActionText",{defaultMessage:"Invalid action name."}),b=a.i18n.translate("xpack.stackConnectors.components.genAi.error.requiredApiProviderText",{defaultMessage:"API provider is required."}),k=(e,n)=>a.i18n.translate("xpack.stackConnectors.components.genAi.dashboardLink",{values:{apiProvider:e,connectorName:n},defaultMessage:'View {apiProvider} Usage Dashboard for "{ connectorName }" Connector'})},68:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return u})),t.d(n,"e",(function(){return d})),t.d(n,"c",(function(){return l})),t.d(n,"f",(function(){return A})),t.d(n,"d",(function(){return p})),t.d(n,"g",(function(){return f})),t(1);var a=t(36),o=t(34),s=t(4),r=t(56),i=t(2);const c='{\n    "messages": [{\n        "role":"user",\n        "content":"Hello world"\n    }]\n}',u='{\n    "messages": [{\n        "role":"user",\n        "content":"Hello world"\n    }]\n}',d=[{id:"apiUrl",label:r.API_URL_LABEL,isUrlField:!0,defaultValue:"https://api.openai.com/v1/chat/completions",helpText:Object(i.jsx)(a.FormattedMessage,{defaultMessage:"The OpenAI API endpoint URL. For more information on the URL, refer to the {genAiAPIUrlDocs}.",id:"xpack.stackConnectors.components.genAi.openAiDocumentation",values:{genAiAPIUrlDocs:Object(i.jsx)(o.EuiLink,{"data-test-subj":"open-ai-api-doc",href:"https://platform.openai.com/docs/api-reference",target:"_blank"},`${r.OPENAI} ${r.DOCUMENTATION}`)}})},{id:"defaultModel",label:r.DEFAULT_MODEL_LABEL,helpText:Object(i.jsx)(a.FormattedMessage,{defaultMessage:"If a request does not include a model, it uses the default.",id:"xpack.stackConnectors.components.genAi.openAiDocumentationModel"}),defaultValue:s.a}],l=[{id:"apiUrl",label:r.API_URL_LABEL,isUrlField:!0,defaultValue:"https://{your-resource-name}.openai.azure.com/openai/deployments/{deployment-id}/chat/completions?api-version={api-version}",helpText:Object(i.jsx)(a.FormattedMessage,{defaultMessage:"The Azure OpenAI API endpoint URL. For more information on the URL, refer to the {genAiAPIUrlDocs}.",id:"xpack.stackConnectors.components.genAi.azureAiDocumentation",values:{genAiAPIUrlDocs:Object(i.jsx)(o.EuiLink,{"data-test-subj":"azure-ai-api-doc",href:"https://learn.microsoft.com/en-us/azure/cognitive-services/openai/reference",target:"_blank"},`${r.AZURE_AI} ${r.DOCUMENTATION}`)}})}],A=[{id:"apiKey",label:r.API_KEY_LABEL,isPasswordField:!0,helpText:Object(i.jsx)(a.FormattedMessage,{defaultMessage:"The OpenAI API authentication key for HTTP Basic authentication. For more details about generating OpenAI API keys, refer to the {genAiAPIKeyDocs}.",id:"xpack.stackConnectors.components.genAi.openAiApiKeyDocumentation",values:{genAiAPIKeyDocs:Object(i.jsx)(o.EuiLink,{"data-test-subj":"open-ai-api-keys-doc",href:"https://platform.openai.com/account/api-keys",target:"_blank"},`${r.OPENAI} ${r.DOCUMENTATION}`)}})}],p=[{id:"apiKey",label:r.API_KEY_LABEL,isPasswordField:!0,helpText:Object(i.jsx)(a.FormattedMessage,{defaultMessage:"The Azure API key for HTTP Basic authentication. For more details about generating Azure OpenAI API keys, refer to the {genAiAPIKeyDocs}.",id:"xpack.stackConnectors.components.genAi.azureAiApiKeyDocumentation",values:{genAiAPIKeyDocs:Object(i.jsx)(o.EuiLink,{"data-test-subj":"azure-ai-api-keys-doc",href:"https://learn.microsoft.com/en-us/azure/cognitive-services/openai/reference#authentication",target:"_blank"},`${r.AZURE_AI} ${r.DOCUMENTATION}`)}})}],f=[{value:s.d.OpenAi,text:r.OPENAI,label:r.OPENAI},{value:s.d.AzureAi,text:r.AZURE_AI,label:r.AZURE_AI}]},97:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return u}));var a=t(1),o=t(0),s=t(3),r=t(4),i=t(68),c=t(2);const u=({actionConnector:e,actionParams:n,editAction:t,index:u,messageVariables:d,executionMode:l,errors:A})=>{var p;const{subAction:f,subActionParams:g}=n,{body:m}=null!=g?g:{},b=e,k=Object(a.useMemo)((()=>l===s.ActionConnectorMode.Test),[l]);Object(a.useEffect)((()=>{f||t("subAction",k?r.e.TEST:r.e.RUN,u)}),[t,u,k,f]),Object(a.useEffect)((()=>{if(!g){var e;let n=i.a;(null==b||null===(e=b.config)||void 0===e?void 0:e.apiProvider)===r.d.AzureAi&&(n=i.b),t("subActionParams",{body:n},u)}}),[null==b||null===(p=b.config)||void 0===p?void 0:p.apiProvider,t,u,g]);const I=Object(a.useCallback)((e=>{t("subActionParams",{...g,...e},u)}),[t,u,g]);return Object(c.jsx)(s.JsonEditorWithMessageVariables,{messageVariables:d,paramsProperty:"body",inputTargetValue:m,label:o.i18n.translate("xpack.stackConnectors.components.genAi.bodyFieldLabel",{defaultMessage:"Body"}),ariaLabel:o.i18n.translate("xpack.stackConnectors.components.genAi.bodyCodeEditorAriaLabel",{defaultMessage:"Code editor"}),errors:A.body,onDocumentsChange:e=>{I({body:e})},onBlur:()=>{m||I({body:""})},dataTestSubj:"genAi-bodyJsonEditor"})}}}]);