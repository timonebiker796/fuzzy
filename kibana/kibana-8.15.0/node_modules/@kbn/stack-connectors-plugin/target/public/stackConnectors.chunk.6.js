/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.stackConnectors_bundle_jsonpfunction=window.stackConnectors_bundle_jsonpfunction||[]).push([[6,0],{151:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return _}));var s=n(1),a=n.n(s),i=n(7),o=n(34),c=n(36),r=n(3);let l=function(e){return e.TRIGGER="trigger",e.RESOLVE="resolve",e}({});var u=n(63),d=n(8),p=n(48),E=n(75),b=n(2);const f=["urgency","severity","impact","category","subcategory"],m={category:[],subcategory:[],urgency:[],severity:[],impact:[],priority:[]},I=({index:e,messageVariables:t,correlationId:n,editSubActionProperty:s,isRequired:a,errors:i})=>{const{docLinks:l}=Object(r.useKibana)().services;return Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.CORRELATION_ID,error:i["subActionParams.incident.correlation_id"],isInvalid:void 0!==i["subActionParams.incident.correlation_id"]&&i["subActionParams.incident.correlation_id"].length>0&&!n&&a,helpText:Object(b.jsx)(o.EuiLink,{href:l.links.alerting.serviceNowAction,target:"_blank"},Object(b.jsx)(c.FormattedMessage,{id:"xpack.stackConnectors.components.serviceNow.correlationIDHelpLabel",defaultMessage:"Identifier for updating incidents"})),labelAppend:Object(b.jsx)(o.EuiText,{size:"xs",color:"subdued"},a?p.REQUIRED_LABEL:p.OPTIONAL_LABEL)},Object(b.jsx)(r.TextFieldWithMessageVariables,{index:e,editAction:s,messageVariables:t,paramsProperty:"correlation_id",inputTargetValue:null!=n?n:void 0,errors:i["subActionParams.incident.correlation_id"]}))},T=[{value:l.TRIGGER,text:p.EVENT_ACTION_TRIGGER},{value:l.RESOLVE,text:p.EVENT_ACTION_RESOLVE}],_=e=>{var t,n,c,_,v,x,A,O,g,N;const{executionMode:L,actionConnector:C,actionParams:k,editAction:j,index:S,errors:R,messageVariables:w,selectedActionGroupId:M}=e,{http:h,notifications:{toasts:y}}=Object(r.useKibana)().services,F=null==C?void 0:C.isDeprecated,[P,D]=Object(s.useState)(m),[U,V]=Object(s.useState)(l.TRIGGER),B=L===r.ActionConnectorMode.Test&&U===l.TRIGGER,W=L===r.ActionConnectorMode.Test&&U===l.RESOLVE,q=Object(s.useRef)(null!==(t=null==C?void 0:C.id)&&void 0!==t?t:""),G=M&&M===d.a||W;B&&!k.subAction&&j("subAction","pushToService",S);const{incident:K,comments:H}=Object(s.useMemo)((()=>{var e;return null!==(e=k.subActionParams)&&void 0!==e?e:{incident:{},comments:M&&M!==d.a?[]:void 0}}),[k.subActionParams,M]),Y=Object(s.useCallback)(((e,t)=>{const n="comments"!==e?{incident:{...K,[e]:t},comments:H}:{incident:K,[e]:t};j("subActionParams",n,S)}),[H,j,K,S]),z=Object(s.useCallback)(((e,t)=>{Y(e,[{commentId:"1",comment:t}])}),[Y]),Q=Object(s.useCallback)((e=>{D(e.reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),m))}),[]),J=Object(s.useMemo)((()=>Object(d.c)(P.category)),[P.category]),$=Object(s.useMemo)((()=>Object(d.c)(P.urgency)),[P.urgency]),X=Object(s.useMemo)((()=>Object(d.c)(P.severity)),[P.severity]),Z=Object(s.useMemo)((()=>Object(d.c)(P.impact)),[P.impact]),ee=Object(s.useMemo)((()=>Object(d.c)(P.subcategory.filter((e=>e.dependent_value===K.category)))),[P.subcategory,K.category]),{isLoading:te}=Object(u.a)({http:h,toastNotifications:y,actionConnector:C,fields:f,onSuccess:Q}),ne=Object(s.useCallback)((e=>{e&&(V(e),e!==l.RESOLVE?j("subAction","pushToService",S):j("subAction","closeIncident",S))}),[V,j,S]);Object(s.useEffect)((()=>{var e,t,n;if(null!=C&&q.current!==C.id){if(q.current=C.id,M===d.a)return void j("subActionParams",{incident:{correlation_id:d.b}},S);j("subActionParams",{incident:{correlation_id:d.b},comments:[]},S)}!W&&!B||Object(i.isEmpty)(null===(e=k.subActionParams)||void 0===e?void 0:e.incident)&&(null===(t=k.subActionParams)||void 0===t||null===(n=t.comments)||void 0===n||!n.length)||j("subActionParams",{incident:{},comments:void 0},S)}),[C,W,B]);const se=Object(s.useCallback)((e=>Y("additional_fields",e)),[Y]);return Object(b.jsx)(a.a.Fragment,null,L===r.ActionConnectorMode.Test?Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.EVENT_ACTION_LABEL},Object(b.jsx)(o.EuiSelect,{fullWidth:!0,"data-test-subj":"eventActionSelect",options:T,value:U,onChange:e=>ne(e.target.value)})):null,Object(b.jsx)(o.EuiSpacer,{size:"m"}),Object(b.jsx)(o.EuiTitle,{size:"s"},Object(b.jsx)("h3",null,p.INCIDENT)),Object(b.jsx)(o.EuiSpacer,{size:"m"}),G?Object(b.jsx)(I,{index:S,messageVariables:w,correlationId:K.correlation_id,editSubActionProperty:Y,isRequired:G,errors:R}):Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.URGENCY_LABEL},Object(b.jsx)(o.EuiSelect,{fullWidth:!0,"data-test-subj":"urgencySelect",hasNoInitialSelection:!0,isLoading:te,disabled:te,options:$,value:null!==(n=K.urgency)&&void 0!==n?n:"",onChange:e=>Y("urgency",e.target.value)})),Object(b.jsx)(o.EuiSpacer,{size:"m"}),Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.SEVERITY_LABEL},Object(b.jsx)(o.EuiSelect,{fullWidth:!0,"data-test-subj":"severitySelect",hasNoInitialSelection:!0,isLoading:te,disabled:te,options:X,value:null!==(c=K.severity)&&void 0!==c?c:"",onChange:e=>Y("severity",e.target.value)}))),Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.IMPACT_LABEL},Object(b.jsx)(o.EuiSelect,{fullWidth:!0,"data-test-subj":"impactSelect",hasNoInitialSelection:!0,isLoading:te,disabled:te,options:Z,value:null!==(_=K.impact)&&void 0!==_?_:"",onChange:e=>Y("impact",e.target.value)})))),Object(b.jsx)(o.EuiSpacer,{size:"m"}),Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.CATEGORY_LABEL},Object(b.jsx)(o.EuiSelect,{fullWidth:!0,"data-test-subj":"categorySelect",hasNoInitialSelection:!0,isLoading:te,disabled:te,options:J,value:null!==(v=K.category)&&void 0!==v?v:void 0,onChange:e=>{j("subActionParams",{incident:{...K,category:e.target.value,subcategory:null},comments:H},S)}}))),Object(b.jsx)(o.EuiFlexItem,null,(null==ee?void 0:ee.length)>0?Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.SUBCATEGORY_LABEL},Object(b.jsx)(o.EuiSelect,{fullWidth:!0,"data-test-subj":"subcategorySelect",hasNoInitialSelection:!0,isLoading:te,disabled:te,options:ee,value:null!==(x=K.subcategory)&&void 0!==x?x:"",onChange:e=>Y("subcategory",e.target.value)})):null)),Object(b.jsx)(o.EuiSpacer,{size:"m"}),!F&&Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(I,{index:S,messageVariables:w,correlationId:K.correlation_id,editSubActionProperty:Y,isRequired:G,errors:R})),Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,label:p.CORRELATION_DISPLAY,labelAppend:Object(b.jsx)(o.EuiText,{size:"xs",color:"subdued"},p.OPTIONAL_LABEL)},Object(b.jsx)(r.TextFieldWithMessageVariables,{index:S,editAction:Y,messageVariables:w,paramsProperty:"correlation_display",inputTargetValue:null!==(A=null==K?void 0:K.correlation_display)&&void 0!==A?A:void 0})))),Object(b.jsx)(o.EuiSpacer,{size:"m"})),Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(o.EuiFormRow,{fullWidth:!0,error:R["subActionParams.incident.short_description"],isInvalid:void 0!==R["subActionParams.incident.short_description"]&&R["subActionParams.incident.short_description"].length>0&&void 0!==K.short_description,label:p.SHORT_DESCRIPTION_LABEL,labelAppend:Object(b.jsx)(o.EuiText,{size:"xs",color:"subdued"},p.REQUIRED_LABEL)},Object(b.jsx)(r.TextFieldWithMessageVariables,{index:S,editAction:Y,messageVariables:w,paramsProperty:"short_description",inputTargetValue:null!==(O=null==K?void 0:K.short_description)&&void 0!==O?O:void 0,errors:R["subActionParams.incident.short_description"]})))),Object(b.jsx)(o.EuiSpacer,{size:"m"}),Object(b.jsx)(r.TextAreaWithMessageVariables,{index:S,editAction:Y,messageVariables:w,paramsProperty:"description",inputTargetValue:null!==(g=K.description)&&void 0!==g?g:void 0,label:p.DESCRIPTION_LABEL}),Object(b.jsx)(r.TextAreaWithMessageVariables,{index:S,editAction:z,messageVariables:w,paramsProperty:"comments",inputTargetValue:H&&H.length>0?H[0].comment:void 0,label:p.COMMENTS_LABEL}),!F&&Object(b.jsx)(E.a,{value:null===(N=k.subActionParams)||void 0===N?void 0:N.incident.additional_fields,messageVariables:w,errors:R["subActionParams.incident.additional_fields"],onChange:se})))}},48:function(e,t,n){"use strict";n.r(t),n.d(t,"API_URL_LABEL",(function(){return a})),n.d(t,"API_URL_INVALID",(function(){return i})),n.d(t,"AUTHENTICATION_LABEL",(function(){return o})),n.d(t,"USERNAME_LABEL",(function(){return c})),n.d(t,"USERNAME_REQUIRED",(function(){return r})),n.d(t,"PASSWORD_LABEL",(function(){return l})),n.d(t,"TITLE_REQUIRED",(function(){return u})),n.d(t,"CORRELATION_ID_REQUIRED",(function(){return d})),n.d(t,"INCIDENT",(function(){return p})),n.d(t,"SECURITY_INCIDENT",(function(){return E})),n.d(t,"SHORT_DESCRIPTION_LABEL",(function(){return b})),n.d(t,"DESCRIPTION_LABEL",(function(){return f})),n.d(t,"COMMENTS_LABEL",(function(){return m})),n.d(t,"CHOICES_API_ERROR",(function(){return I})),n.d(t,"CATEGORY_LABEL",(function(){return T})),n.d(t,"SUBCATEGORY_LABEL",(function(){return _})),n.d(t,"URGENCY_LABEL",(function(){return v})),n.d(t,"SEVERITY_LABEL",(function(){return x})),n.d(t,"IMPACT_LABEL",(function(){return A})),n.d(t,"PRIORITY_LABEL",(function(){return O})),n.d(t,"API_INFO_ERROR",(function(){return g})),n.d(t,"FETCH_ERROR",(function(){return N})),n.d(t,"INSTALLATION_CALLOUT_TITLE",(function(){return L})),n.d(t,"UPDATE_SUCCESS_TOAST_TITLE",(function(){return C})),n.d(t,"UPDATE_SUCCESS_TOAST_TEXT",(function(){return k})),n.d(t,"VISIT_SN_STORE",(function(){return j})),n.d(t,"SETUP_DEV_INSTANCE",(function(){return S})),n.d(t,"SN_INSTANCE_LABEL",(function(){return R})),n.d(t,"UNKNOWN",(function(){return w})),n.d(t,"CORRELATION_ID",(function(){return M})),n.d(t,"CORRELATION_DISPLAY",(function(){return h})),n.d(t,"EVENT",(function(){return y})),n.d(t,"SOURCE",(function(){return F})),n.d(t,"EVENT_CLASS",(function(){return P})),n.d(t,"RESOURCE",(function(){return D})),n.d(t,"NODE",(function(){return U})),n.d(t,"METRIC_NAME",(function(){return V})),n.d(t,"TYPE",(function(){return B})),n.d(t,"MESSAGE_KEY",(function(){return W})),n.d(t,"SEVERITY_REQUIRED",(function(){return q})),n.d(t,"CLIENTID_LABEL",(function(){return G})),n.d(t,"CLIENTSECRET_LABEL",(function(){return K})),n.d(t,"KEY_ID_LABEL",(function(){return H})),n.d(t,"USER_IDENTIFIER_LABEL",(function(){return Y})),n.d(t,"PRIVATE_KEY_LABEL",(function(){return z})),n.d(t,"PRIVATE_KEY_PASSWORD_LABEL",(function(){return Q})),n.d(t,"PRIVATE_KEY_PASSWORD_HELPER_TEXT",(function(){return J})),n.d(t,"CLIENTID_REQUIRED",(function(){return $})),n.d(t,"PRIVATE_KEY_REQUIRED",(function(){return X})),n.d(t,"KEYID_REQUIRED",(function(){return Z})),n.d(t,"USER_IDENTIFIER_REQUIRED",(function(){return ee})),n.d(t,"PASSWORD_REQUIRED",(function(){return te})),n.d(t,"CLIENTSECRET_REQUIRED",(function(){return ne})),n.d(t,"IS_OAUTH",(function(){return se})),n.d(t,"OPTIONAL_LABEL",(function(){return ae})),n.d(t,"REQUIRED_LABEL",(function(){return ie})),n.d(t,"EVENT_ACTION_TRIGGER",(function(){return oe})),n.d(t,"EVENT_ACTION_RESOLVE",(function(){return ce})),n.d(t,"EVENT_ACTION_LABEL",(function(){return re})),n.d(t,"ADDITIONAL_INFO",(function(){return le})),n.d(t,"ADDITIONAL_INFO_HELP",(function(){return ue})),n.d(t,"ADDITIONAL_INFO_HELP_TEXT",(function(){return de})),n.d(t,"ADDITIONAL_INFO_JSON_ERROR",(function(){return pe})),n.d(t,"ADDITIONAL_FIELDS",(function(){return Ee})),n.d(t,"ADDITIONAL_FIELDS_HELP",(function(){return be})),n.d(t,"ADDITIONAL_FIELDS_HELP_TEXT",(function(){return fe})),n.d(t,"ADDITIONAL_FIELDS_JSON_ERROR",(function(){return me}));var s=n(0);const a=s.i18n.translate("xpack.stackConnectors.components.serviceNow.apiUrlTextFieldLabel",{defaultMessage:"ServiceNow instance URL"}),i=s.i18n.translate("xpack.stackConnectors.components.serviceNow.invalidApiUrlTextField",{defaultMessage:"URL is invalid."}),o=s.i18n.translate("xpack.stackConnectors.components.serviceNow.authenticationLabel",{defaultMessage:"Authentication"}),c=s.i18n.translate("xpack.stackConnectors.components.serviceNow.usernameTextFieldLabel",{defaultMessage:"Username"}),r=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredUsernameTextField",{defaultMessage:"Username is required."}),l=s.i18n.translate("xpack.stackConnectors.components.serviceNow.passwordTextFieldLabel",{defaultMessage:"Password"}),u=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredShortDescTextField",{defaultMessage:"Short description is required."}),d=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredCorrelationIdTextField",{defaultMessage:"Correlation id is required."}),p=s.i18n.translate("xpack.stackConnectors.components.serviceNow.title",{defaultMessage:"Incident"}),E=s.i18n.translate("xpack.stackConnectors.components.serviceNowSIR.title",{defaultMessage:"Security incident"}),b=s.i18n.translate("xpack.stackConnectors.components.serviceNow.titleFieldLabel",{defaultMessage:"Short description"}),f=s.i18n.translate("xpack.stackConnectors.components.serviceNow.descriptionTextAreaFieldLabel",{defaultMessage:"Description"}),m=s.i18n.translate("xpack.stackConnectors.components.serviceNow.commentsTextAreaFieldLabel",{defaultMessage:"Additional comments"}),I=s.i18n.translate("xpack.stackConnectors.components.serviceNow.unableToGetChoicesMessage",{defaultMessage:"Unable to get choices"}),T=s.i18n.translate("xpack.stackConnectors.components.serviceNow.categoryTitle",{defaultMessage:"Category"}),_=s.i18n.translate("xpack.stackConnectors.components.serviceNow.subcategoryTitle",{defaultMessage:"Subcategory"}),v=s.i18n.translate("xpack.stackConnectors.components.serviceNow.urgencySelectFieldLabel",{defaultMessage:"Urgency"}),x=s.i18n.translate("xpack.stackConnectors.components.serviceNow.severitySelectFieldLabel",{defaultMessage:"Severity"}),A=s.i18n.translate("xpack.stackConnectors.components.serviceNow.impactSelectFieldLabel",{defaultMessage:"Impact"}),O=s.i18n.translate("xpack.stackConnectors.components.serviceNow.prioritySelectFieldLabel",{defaultMessage:"Priority"}),g=e=>s.i18n.translate("xpack.stackConnectors.components.serviceNow.apiInfoError",{values:{status:e},defaultMessage:"Received status: {status} when attempting to get application information"}),N=s.i18n.translate("xpack.stackConnectors.components.serviceNow.fetchErrorMsg",{defaultMessage:"Failed to fetch. Check the URL or the CORS configuration of your ServiceNow instance."}),L=s.i18n.translate("xpack.stackConnectors.components.serviceNow.installationCalloutTitle",{defaultMessage:"To use this connector, first install the Elastic app from the ServiceNow app store."}),C=e=>s.i18n.translate("xpack.stackConnectors.components.serviceNow.updateSuccessToastTitle",{defaultMessage:"{connectorName} connector updated",values:{connectorName:e}}),k=s.i18n.translate("xpack.stackConnectors.components.serviceNow.updateCalloutText",{defaultMessage:"Connector has been updated."}),j=s.i18n.translate("xpack.stackConnectors.components.serviceNow.visitSNStore",{defaultMessage:"Visit ServiceNow app store"}),S=s.i18n.translate("xpack.stackConnectors.components.serviceNow.setupDevInstance",{defaultMessage:"setup a developer instance"}),R=s.i18n.translate("xpack.stackConnectors.components.serviceNow.snInstanceLabel",{defaultMessage:"ServiceNow instance"}),w=s.i18n.translate("xpack.stackConnectors.components.serviceNow.unknown",{defaultMessage:"UNKNOWN"}),M=s.i18n.translate("xpack.stackConnectors.components.serviceNow.correlationID",{defaultMessage:"Correlation ID"}),h=s.i18n.translate("xpack.stackConnectors.components.serviceNow.correlationDisplay",{defaultMessage:"Correlation display"}),y=s.i18n.translate("xpack.stackConnectors.components.serviceNowITOM.event",{defaultMessage:"Event"}),F=s.i18n.translate("xpack.stackConnectors.components.serviceNow.sourceTextAreaFieldLabel",{defaultMessage:"Source"}),P=s.i18n.translate("xpack.stackConnectors.components.serviceNow.eventClassTextAreaFieldLabel",{defaultMessage:"Source instance"}),D=s.i18n.translate("xpack.stackConnectors.components.serviceNow.resourceTextAreaFieldLabel",{defaultMessage:"Resource"}),U=s.i18n.translate("xpack.stackConnectors.components.serviceNow.nodeTextAreaFieldLabel",{defaultMessage:"Node"}),V=s.i18n.translate("xpack.stackConnectors.components.serviceNow.metricNameTextAreaFieldLabel",{defaultMessage:"Metric name"}),B=s.i18n.translate("xpack.stackConnectors.components.serviceNow.typeTextAreaFieldLabel",{defaultMessage:"Type"}),W=s.i18n.translate("xpack.stackConnectors.components.serviceNow.messageKeyTextAreaFieldLabel",{defaultMessage:"Message key"}),q=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredSeverityTextField",{defaultMessage:"Severity is required."}),G=s.i18n.translate("xpack.stackConnectors.components.serviceNow.clientIdTextFieldLabel",{defaultMessage:"Client ID"}),K=s.i18n.translate("xpack.stackConnectors.components.serviceNow.clientSecretTextFieldLabel",{defaultMessage:"Client secret"}),H=s.i18n.translate("xpack.stackConnectors.components.serviceNow.keyIdTextFieldLabel",{defaultMessage:"JWT verifier key ID"}),Y=s.i18n.translate("xpack.stackConnectors.components.serviceNow.userEmailTextFieldLabel",{defaultMessage:"User identifier"}),z=s.i18n.translate("xpack.stackConnectors.components.serviceNow.privateKeyTextFieldLabel",{defaultMessage:"Private key"}),Q=s.i18n.translate("xpack.stackConnectors.components.serviceNow.privateKeyPassTextFieldLabel",{defaultMessage:"Private key password"}),J=s.i18n.translate("xpack.stackConnectors.components.serviceNow.privateKeyPassLabelHelpText",{defaultMessage:"This is only required if you have set a password on your private key"}),$=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredClientIdTextField",{defaultMessage:"Client ID is required."}),X=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredPrivateKeyTextField",{defaultMessage:"Private key is required."}),Z=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredKeyIdTextField",{defaultMessage:"JWT verifier key ID is required."}),ee=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredUserIdentifierTextField",{defaultMessage:"User identifier is required."}),te=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredPasswordTextField",{defaultMessage:"Password is required."}),ne=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredClientSecretTextField",{defaultMessage:"Client secret is required."}),se=s.i18n.translate("xpack.stackConnectors.components.serviceNow.useOAuth",{defaultMessage:"Use OAuth authentication"}),ae=s.i18n.translate("xpack.stackConnectors.components.serviceNow.optionalLabel",{defaultMessage:"Optional"}),ie=s.i18n.translate("xpack.stackConnectors.components.serviceNow.requiredLabel",{defaultMessage:"Required"}),oe=s.i18n.translate("xpack.stackConnectors.components.serviceNow.eventActionTriggerOptionLabel",{defaultMessage:"Trigger"}),ce=s.i18n.translate("xpack.stackConnectors.components.serviceNow.eventActionResolveOptionLabel",{defaultMessage:"Resolve"}),re=s.i18n.translate("xpack.stackConnectors.components.serviceNowITSM.eventActionFieldLabel",{defaultMessage:"Event action"}),le=s.i18n.translate("xpack.stackConnectors.components.serviceNowITOM.additionalInfoLabel",{defaultMessage:"Additional info"}),ue=s.i18n.translate("xpack.stackConnectors.components.serviceNowITOM.additionalInfoHelpTooltip",{defaultMessage:"Additional info help"}),de=s.i18n.translate("xpack.stackConnectors.components.serviceNowITOM.additionalInfoHelpTooltipText",{defaultMessage:"The rule automatically generates information about each event. You can change or add more custom fields in JSON format."}),pe=s.i18n.translate("xpack.stackConnectors.components.serviceNowITOM.additionalInfoError",{defaultMessage:"The additional info field does not have a valid JSON format."}),Ee=s.i18n.translate("xpack.stackConnectors.components.servicenow.additionalFieldsTooltip",{defaultMessage:"Additional fields"}),be=s.i18n.translate("xpack.stackConnectors.components.servicenow.additionalFieldsHelpTooltip",{defaultMessage:"Additional fields help"}),fe=s.i18n.translate("xpack.stackConnectors.components.servicenow.additionalFieldsHelpTooltipText",{defaultMessage:"Additional fields in JSON format as defined in the Elastic ServiceNow application"}),me=s.i18n.translate("xpack.stackConnectors.components.servicenow.additionalFieldsError",{defaultMessage:"No valid JSON."})},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=({connector_id:e,service_message:t,...n})=>({...n,actionId:e,...t&&{serviceMessage:t}})},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={".servicenow":{importSetTable:"x_elas2_inc_int_elastic_incident",appScope:"x_elas2_inc_int",table:"incident",useImportAPI:!0,commentFieldKey:"work_notes",appId:"7148dbc91bf1f450ced060a7234bcb88"},".servicenow-sir":{importSetTable:"x_elas2_sir_int_elastic_si_incident",appScope:"x_elas2_sir_int",table:"sn_si_incident",useImportAPI:!0,commentFieldKey:"work_notes",appId:"2f0746801baeb01019ae54e4604bcb0f"},".servicenow-itom":{importSetTable:"x_elas2_inc_int_elastic_incident",appScope:"x_elas2_inc_int",table:"em_event",useImportAPI:!1,commentFieldKey:"work_notes"}}},59:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var s=n(23),a=n(54),i=n(48),o=n(49);async function c({http:e,signal:t,connectorId:n,fields:a}){const i=await e.post(`${s.BASE_ACTION_API_PATH}/connector/${encodeURIComponent(n)}/_execute`,{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:a}}}),signal:t});return Object(o.a)(i)}const r=(e,t)=>`${e}/api/${t}/elastic_api/health`;async function l({http:e,signal:t,connector:n,actionTypeId:o}){var c;const{secrets:{username:l,password:u,clientSecret:d,privateKey:p,privateKeyPassword:E},config:{isOAuth:b,apiUrl:f,clientId:m,userIdentifierValue:I,jwtKeyId:T}}=n,_=f.endsWith("/")?f.slice(0,-1):f;let v="Basic "+btoa(l+":"+u);if(b){const t=await e.post(`${s.INTERNAL_BASE_ACTION_API_PATH}/connector/_oauth_access_token`,{body:JSON.stringify({type:"jwt",options:{tokenUrl:`${_}/oauth_token.do`,config:{clientId:m,userIdentifierValue:I,jwtKeyId:T},secrets:{clientSecret:d,privateKey:p,...E&&{privateKeyPassword:E}}}})}),{accessToken:n}=t;v=n}const x=a.a[o],A=await fetch(r(_,null!==(c=x.appScope)&&void 0!==c?c:""),{method:"GET",signal:t,headers:{Authorization:v}});if(!A.ok)throw new Error(Object(i.API_INFO_ERROR)(A.status));return{...(await A.json()).result}}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(1),a=n(59),i=n(48);const o=({http:e,actionConnector:t,toastNotifications:n,fields:o,onSuccess:c})=>{const[r,l]=Object(s.useState)(!1),[u,d]=Object(s.useState)([]),p=Object(s.useRef)(!1),E=Object(s.useRef)(new AbortController),b=Object(s.useCallback)((async()=>{if(t)try{p.current=!1,E.current.abort(),E.current=new AbortController,l(!0);const r=await Object(a.b)({http:e,signal:E.current.signal,connectorId:t.id,fields:o});if(!p.current){const e=Array.isArray(r.data)?r.data:[];var s;l(!1),d(e),r.status&&"error"===r.status?n.addDanger({title:i.CHOICES_API_ERROR,text:`${null!==(s=r.serviceMessage)&&void 0!==s?s:r.message}`}):c&&c(e)}}catch(e){p.current||(l(!1),n.addDanger({title:i.CHOICES_API_ERROR,text:e.message}))}else l(!1)}),[t,e,o,c,n]);return Object(s.useEffect)((()=>(b(),()=>{p.current=!0,E.current.abort(),l(!1)})),[]),{choices:u,isLoading:r}}},75:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(34),a=n(3),i=n(1),o=n.n(i),c=n(7),r=n(48),l=n(2);const u=({value:e,errors:t,messageVariables:n,onChange:i})=>Object(l.jsx)(a.JsonEditorWithMessageVariables,{messageVariables:n,paramsProperty:"additional_fields",inputTargetValue:e,errors:null!=t?t:[],dataTestSubj:"additionalFields",label:Object(l.jsx)(o.a.Fragment,null,r.ADDITIONAL_FIELDS,Object(l.jsx)(s.EuiIconTip,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop","data-test-subj":"otherFieldsHelpTooltip","aria-label":r.ADDITIONAL_FIELDS_HELP,content:r.ADDITIONAL_FIELDS_HELP_TEXT})),onDocumentsChange:e=>i(Object(c.isEmpty)(e)?null:e)}),d=o.a.memo(u)}}]);