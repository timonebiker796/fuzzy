(window.embeddable_bundle_jsonpfunction=window.embeddable_bundle_jsonpfunction||[]).push([[1],{60:function(e,t,a){"use strict";a.r(t),a.d(t,"AddPanelFlyout",(function(){return g}));var d=a(2),n=a.n(d),s=a(5),i=a(9),o=a(58),l=a(59),b=a(12),c=a(8),u=a(37),r=a(3),j=a(4);let v;const O=(e,t,a,d)=>{var n;if(!Object(b.b)(e))return;const s=null!=d&&d.getSavedObjectSubType?d.getSavedObjectSubType(a):t;null===c.g||void 0===c.g||null===(n=c.g.reportUiCounter)||void 0===n||n.call(c.g,e.type,l.METRIC_TYPE.CLICK,`${s}:add`)},g=({container:e,onAddPanel:t})=>{const a=Object(d.useMemo)((()=>[...c.c.getEmbeddableFactories()].filter((e=>{var t;return Boolean(null===(t=e.savedObjectMetaData)||void 0===t?void 0:t.type)&&!e.isContainerType})).reduce(((e,t)=>(e[t.savedObjectMetaData.type]=t,e)),{})),[]),l=Object(d.useMemo)((()=>[...Object(r.w)()].filter((([e,t])=>{var a;return Boolean(null===(a=t.savedObjectMetaData)||void 0===a?void 0:a.type)})).reduce(((e,[t,a])=>(e[a.savedObjectMetaData.type]={...a,type:t},e)),{})),[]),b=Object(d.useMemo)((()=>[...Object.values(l),...Object.values(a)].filter((e=>Boolean(e.savedObjectMetaData))).map((({savedObjectMetaData:e})=>e)).sort(((e,t)=>e.type.localeCompare(t.type)))),[l,a]),g=Object(d.useCallback)((async(d,n,i,o)=>{if(l[n]){const t=l[n],{onAdd:a,savedObjectMetaData:d}=t;return a(e,o),void O(e,t.type,o,d)}const b=a[n];if(!b)throw new r.e(n);if("function"!=typeof e.addNewEmbeddable)throw new r.n;let j;if(u.b[n]){const t=u.b[n](o),{id:a}=await e.addNewEmbeddable(b.type,t,o.attributes);j=a}else{const{id:t}=await e.addNewEmbeddable(b.type,{savedObjectId:d},o.attributes);j=t}null==t||t(j),(e=>{v&&c.b.notifications.toasts.remove(v),v=c.b.notifications.toasts.addSuccess({title:s.i18n.translate("embeddableApi.addPanel.savedObjectAddedToContainerSuccessMessageTitle",{defaultMessage:"{savedObjectName} was added",values:{savedObjectName:e}}),"data-test-subj":"addObjectToContainerSuccess"})})(i);const{savedObjectMetaData:g,type:p}=b;O(e,p,o,g)}),[e,l,a,t]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(i.EuiTitle,{size:"m"},Object(j.jsx)("h2",null,s.i18n.translate("embeddableApi.addPanel.Title",{defaultMessage:"Add from library"})))),Object(j.jsx)(i.EuiFlyoutBody,null,Object(j.jsx)(o.SavedObjectFinder,{services:{contentClient:c.a.client,savedObjectsTagging:null===c.d||void 0===c.d?void 0:c.d.getTaggingApi(),uiSettings:c.b.uiSettings},onChoose:g,savedObjectMetaData:b,showFilter:!0,noItemsMessage:s.i18n.translate("embeddableApi.addPanel.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),getTooltipText:e=>e.managed?s.i18n.translate("embeddableApi.addPanel.managedPanelTooltip",{defaultMessage:"Elastic manages this panel. Adding it to a dashboard unlinks it from the library."}):void 0})))}}}]);