/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){e.exports=r(3)(2)},function(e,t,r){"use strict";(function(e){function o(t,r){const o=t.split(":").pop();if(!o)return void r.debug(`Unable to decode ${o}`);let n;try{n=e.from(o,"base64").toString("utf8")}catch{return void r.debug(`base64 decoding failed on ${o}`)}const l=n.split("$");if(l.length<3)return void r.debug(`Expected at least 3 parts in ${n}`);const[s,d]=i(l[0]),[a,c]=i(l[1],d),[u,p]=i(l[2],d);return{host:s,defaultPort:d,elasticsearchUrl:`https://${a}.${s}:${c}`,kibanaUrl:`https://${u}.${s}:${p}`}}function i(e,t="443"){const[r,o=t]=e.split(":");return[r,o]}r.d(t,"a",(function(){return o}))}).call(this,r(8).Buffer)},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,r){r(7),__kbnBundles__.define("plugin/cloud/public",r,9)},function(e,t,r){r.p=window.__kbnPublicPath__.cloud},function(e,t,r){e.exports=r(3)(3085)},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return f}));var o=r(0),i=r.n(o),n=r(4),l=r.n(n),s=r(5);function d(e){if(e)return e.split("/").pop()}var a=r(1);function c(e,t){return e&&t?`${e}${t}`:""}function u(e){var t;if(e)return null===(t=[{cloudValue:"elasticsearch",kibanaValue:"es"},{cloudValue:"observability",kibanaValue:"oblt"},{cloudValue:"security",kibanaValue:"security"}].find((({cloudValue:t})=>e.toLowerCase()===t)))||void 0===t?void 0:t.kibanaValue}var p=r(2);class plugin_CloudPlugin{constructor(e){var t;i()(this,"config",void 0),i()(this,"isCloudEnabled",void 0),i()(this,"isServerlessEnabled",void 0),i()(this,"contextProviders",[]),i()(this,"logger",void 0),this.initializerContext=e,this.config=this.initializerContext.config.get(),this.isCloudEnabled="string"==typeof this.config.id,this.isServerlessEnabled=!(null===(t=this.config.serverless)||void 0===t||!t.project_id),this.logger=e.logger.get()}setup(e){var t,r,o,i,n,l,c,p;!function(e,t){if(!t.id)return;const{id:r,trial_end_date:o,is_elastic_staff_owned:i,serverless:{project_id:n,project_type:l}={}}=t;e.registerContextProvider({name:"Cloud Deployment Metadata",context$:Object(s.of)({cloudId:r,deploymentId:d(t.deployment_url),cloudTrialEndDate:o,cloudIsElasticStaffOwned:i,projectId:n,projectType:l}),schema:{cloudId:{type:"keyword",_meta:{description:"The Cloud ID"}},deploymentId:{type:"keyword",_meta:{description:"The Deployment ID",optional:!0}},cloudTrialEndDate:{type:"date",_meta:{description:"When the Elastic Cloud trial ends/ended",optional:!0}},cloudIsElasticStaffOwned:{type:"boolean",_meta:{description:"`true` if the owner of the deployment is an Elastician",optional:!0}},projectId:{type:"keyword",_meta:{description:"The Serverless Project ID",optional:!0}},projectType:{type:"keyword",_meta:{description:"The Serverless Project type",optional:!0}}}})}(e.analytics,this.config);const{id:f,cname:v,base_url:_,trial_end_date:h,is_elastic_staff_owned:g}=this.config;let b;return f&&(b=Object(a.a)(f,this.logger)),{cloudId:f,deploymentId:d(this.config.deployment_url),cname:v,baseUrl:_,...this.getCloudUrls(),elasticsearchUrl:null===(t=b)||void 0===t?void 0:t.elasticsearchUrl,kibanaUrl:null===(r=b)||void 0===r?void 0:r.kibanaUrl,cloudHost:null===(o=b)||void 0===o?void 0:o.host,cloudDefaultPort:null===(i=b)||void 0===i?void 0:i.defaultPort,trialEndDate:h?new Date(h):void 0,isElasticStaffOwned:g,isCloudEnabled:this.isCloudEnabled,onboarding:{defaultSolution:u(null===(n=this.config.onboarding)||void 0===n?void 0:n.default_solution)},isServerlessEnabled:this.isServerlessEnabled,serverless:{projectId:null===(l=this.config.serverless)||void 0===l?void 0:l.project_id,projectName:null===(c=this.config.serverless)||void 0===c?void 0:c.project_name,projectType:null===(p=this.config.serverless)||void 0===p?void 0:p.project_type},registerCloudService:e=>{this.contextProviders.push(e)}}}start(e){var t,r,o,i,n;e.chrome.setHelpSupportUrl(function(e){var t;let r="https://support.elastic.co/";return null!==(t=e.serverless)&&void 0!==t&&t.project_id?r+="?serverless_project_id="+e.serverless.project_id:e.id&&(r+="?cloud_deployment_id="+e.id),r}(this.config));const{deploymentsUrl:s,deploymentUrl:d,profileUrl:c,billingUrl:u,organizationUrl:f,performanceUrl:v,usersAndRolesUrl:_,projectsUrl:h}=this.getCloudUrls();let g;return this.config.id&&(g=Object(a.a)(this.config.id,this.logger)),{CloudContextProvider:({children:e})=>Object(p.jsx)(l.a.Fragment,null,this.contextProviders.reduce(((e,t)=>Object(p.jsx)(t,null," ",e," ")),e)),isCloudEnabled:this.isCloudEnabled,cloudId:this.config.id,billingUrl:u,deploymentsUrl:s,deploymentUrl:d,profileUrl:c,organizationUrl:f,projectsUrl:h,elasticsearchUrl:null===(t=g)||void 0===t?void 0:t.elasticsearchUrl,kibanaUrl:null===(r=g)||void 0===r?void 0:r.kibanaUrl,isServerlessEnabled:this.isServerlessEnabled,serverless:{projectId:null===(o=this.config.serverless)||void 0===o?void 0:o.project_id,projectName:null===(i=this.config.serverless)||void 0===i?void 0:i.project_name,projectType:null===(n=this.config.serverless)||void 0===n?void 0:n.project_type},performanceUrl:v,usersAndRolesUrl:_}}stop(){}getCloudUrls(){const{profile_url:e,billing_url:t,organization_url:r,deployments_url:o,deployment_url:i,base_url:n,performance_url:l,users_and_roles_url:s,projects_url:d}=this.config,a=c(n,o),u=c(n,i);return{deploymentsUrl:a,deploymentUrl:u,profileUrl:c(n,e),billingUrl:c(n,t),organizationUrl:c(n,r),snapshotsUrl:`${u}/elasticsearch/snapshots/`,performanceUrl:c(n,l),usersAndRolesUrl:c(n,s),projectsUrl:c(n,d)}}}function f(e){return new plugin_CloudPlugin(e)}}]);