/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){"use strict";n.d(t,"h",(function(){return i.useForm})),n.d(t,"i",(function(){return i.useFormData})),n.d(t,"b",(function(){return i.Form})),n.d(t,"d",(function(){return i.UseField})),n.d(t,"f",(function(){return r.fieldValidators})),n.d(t,"c",(function(){return a.TextField})),n.d(t,"e",(function(){return l.createKibanaReactContext})),n.d(t,"g",(function(){return L})),n.d(t,"a",(function(){return D.CodeEditor}));var i=n(6),r=n(12),a=n(13),l=n(14),s=n(1),o=n(7),u=n.n(o),d=n(17),c=n.n(d),f=n(18),b=n(20),p=n(19),m=n.n(p),j=n(8),g=n.n(j),_=n(2);const x="eui-global",v="eui-utilities",y={darkMode:!1};var h=n(0);const O=[_.euiStylisPrefixer],F=g()({key:"css",stylisPlugins:O,container:document.querySelector('meta[name="emotion"]')}),E=g()({key:x,stylisPlugins:O,container:document.querySelector(`meta[name="${x}"]`)}),k=g()({key:v,stylisPlugins:O,container:document.querySelector(`meta[name="${v}"]`)});F.compat=!0,E.compat=!0,k.compat=!0;const S={default:F,global:E,utility:k},P=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:i,children:r})=>{const a=m()(e,y),l=Object(s.useMemo)((()=>(e=>e.darkMode?_.COLOR_MODES_STANDARD.dark:_.COLOR_MODES_STANDARD.light)(a)),[a]),o=n||l,u=!1!==t&&void 0;return Object(h.jsx)(_.EuiProvider,{cache:S,modify:i,colorMode:o,globalStyles:u,utilityClasses:u},r)},C=({children:e,i18n:t,...n})=>Object(f.useIsNestedEuiProvider)()?(Object(b.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(h.jsx)(t.Context,null,e)):Object(h.jsx)(P,n,Object(h.jsx)(t.Context,null,e));var w=n(10);const M=({children:e,...t})=>Object(h.jsx)(C,c()({globalStyles:!1},t),Object(h.jsx)(w.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(h.jsx)(w.KibanaErrorBoundary,null,e))),L=(e,t)=>n=>(u.a.render(Object(h.jsx)(M,t,e),n),()=>u.a.unmountComponentAtNode(n));n(21),n(3),s.Component;var D=n(16)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=[{label:"Keyword",value:"keyword"},{label:"Long",value:"long"},{label:"Double",value:"double"},{label:"Date",value:"date"},{label:"IP",value:"ip"},{label:"Boolean",value:"boolean"}]},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/esUiShared/static/forms/hook_form_lib");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,n){"use strict";n.r(t),n.d(t,"RuntimeFieldForm",(function(){return g})),n.d(t,"RuntimeFieldEditor",(function(){return _})),n.d(t,"RuntimeFieldEditorFlyoutContent",(function(){return x}));var i=n(1),r=n.n(i),a=n(3),l=n(22),s=n(11),o=n(2),u=n(4),d=n(5);const{emptyField:c}=u.f,f={name:{label:a.i18n.translate("xpack.runtimeFields.form.nameLabel",{defaultMessage:"Name"}),validations:[{validator:c(a.i18n.translate("xpack.runtimeFields.form.validations.nameIsRequiredErrorMessage",{defaultMessage:"Give a name to the field."}))}]},type:{label:a.i18n.translate("xpack.runtimeFields.form.runtimeTypeLabel",{defaultMessage:"Type"}),defaultValue:"keyword",deserializer:e=>{var t;if(!e)return[];const n=null===(t=d.a.find((({value:t})=>t===e)))||void 0===t?void 0:t.label;return[{label:null!=n?n:e,value:e}]},serializer:e=>e[0].value},script:{source:{label:a.i18n.translate("xpack.runtimeFields.form.defineFieldLabel",{defaultMessage:"Define script (optional)"})}}};var b=n(0);const p=e=>({value:t})=>{if(e.includes(t))return{message:a.i18n.translate("xpack.runtimeFields.runtimeFieldsEditor.existRuntimeFieldNamesValidationErrorMessage",{defaultMessage:"There is already a field with this name."})}},m=e=>{switch(e){case"keyword":default:return"string_script_field_script_field";case"long":return"long_script_field_script_field";case"double":return"double_script_field_script_field";case"date":return"date_script_field";case"ip":return"ip_script_field_script_field";case"boolean":return"boolean_script_field_script_field"}},j=({defaultValue:e,onChange:t,links:n,ctx:{namesNotAllowed:c,existingConcreteFields:j=[]}={}})=>{const g=f.type,[_,x]=Object(i.useState)(m(g.defaultValue)),{form:v}=Object(u.h)({defaultValue:e,schema:f}),{submit:y,isValid:h,isSubmitted:O}=v,[{name:F}]=Object(u.i)({form:v,watch:"name"}),E=((e,t)=>{var n;const i=f.name;return e?{...i,validations:[...null!==(n=i.validations)&&void 0!==n?n:[],{validator:p(e.filter((e=>e!==(null==t?void 0:t.name))))}]}:i})(c,e),k=Object(i.useCallback)((e=>{x(m(e[0].value))}),[]),S=s.PainlessLang.getSuggestionProvider(_,j);return Object(i.useEffect)((()=>{t&&t({isValid:h,isSubmitted:O,submit:y})}),[t,h,O,y]),Object(b.jsx)(u.b,{form:v,className:"runtimeFieldEditor_form"},Object(b.jsx)(o.EuiFlexGroup,null,Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(u.d,{path:"name",config:E,component:u.c,"data-test-subj":"nameField",componentProps:{euiFieldProps:{"aria-label":a.i18n.translate("xpack.runtimeFields.form.nameAriaLabel",{defaultMessage:"Name field"})}}})),Object(b.jsx)(o.EuiFlexItem,null,Object(b.jsx)(u.d,{path:"type",onChange:k},(({label:e,value:t,setValue:n})=>void 0===t?null:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(o.EuiFormRow,{label:e,fullWidth:!0},Object(b.jsx)(o.EuiComboBox,{placeholder:a.i18n.translate("xpack.runtimeFields.form.runtimeType.placeholderLabel",{defaultMessage:"Select a type"}),singleSelection:{asPlainText:!0},options:d.a,selectedOptions:t,onChange:e=>{0!==e.length&&n(e)},isClearable:!1,"data-test-subj":"typeField","aria-label":a.i18n.translate("xpack.runtimeFields.form.typeSelectAriaLabel",{defaultMessage:"Type select"}),fullWidth:!0}))))))),j.find((e=>e.name===F))&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(o.EuiSpacer,null),Object(b.jsx)(o.EuiCallOut,{title:a.i18n.translate("xpack.runtimeFields.form.fieldShadowingCalloutTitle",{defaultMessage:"Field shadowing"}),color:"warning",iconType:"pin",size:"s","data-test-subj":"shadowingFieldCallout"},Object(b.jsx)("div",null,a.i18n.translate("xpack.runtimeFields.form.fieldShadowingCalloutDescription",{defaultMessage:"This field shares the name of a mapped field. Values for this field will be returned in search results."})))),Object(b.jsx)(o.EuiSpacer,{size:"l"}),Object(b.jsx)(u.d,{path:"script.source"},(({value:e,setValue:t,label:i,isValid:r,getErrorsMessages:d})=>Object(b.jsx)(o.EuiFormRow,{label:i,error:d(),isInvalid:!r,helpText:Object(b.jsx)(l.FormattedMessage,{id:"xpack.runtimeFields.form.source.scriptFieldHelpText",defaultMessage:"Runtime fields without a script retrieve values from a field with the same name in {source}. If a field with the same name doesnâ€™t exist, no values return when a search request includes the runtime field. {learnMoreLink}",values:{learnMoreLink:Object(b.jsx)(o.EuiLink,{href:n.runtimePainless,target:"_blank",external:!0,"data-test-subj":"painlessSyntaxLearnMoreLink"},a.i18n.translate("xpack.runtimeFields.form.script.learnMoreLinkText",{defaultMessage:"Learn about script syntax."})),source:Object(b.jsx)(o.EuiCode,null,"_source")}}),fullWidth:!0},Object(b.jsx)(u.a,{languageId:s.PainlessLang.ID,suggestionProvider:S,width:"100%",height:"300px",value:e,onChange:t,options:{fontSize:12,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0,suggest:{snippetsPreventQuickSuggestions:!1}},"data-test-subj":"scriptField","aria-label":a.i18n.translate("xpack.runtimeFields.form.scriptEditorAriaLabel",{defaultMessage:"Script editor"})})))))},g=r.a.memo(j),_=({defaultValue:e,onChange:t,docLinks:n,ctx:i})=>{const r=(({links:e})=>({runtimePainless:`${e.runtimeFields.mapping}`,painlessSyntax:`${e.scriptedFields.painlessLangSpec}`}))(n);return Object(b.jsx)(g,{links:r,defaultValue:e,onChange:t,ctx:i})},x=({onSave:e,onCancel:t,docLinks:n,defaultValue:l,ctx:s})=>{const u=(e=>({flyoutTitle:e?a.i18n.translate("xpack.runtimeFields.editor.flyoutEditFieldTitle",{defaultMessage:"Edit {fieldName} field",values:{fieldName:e.name}}):a.i18n.translate("xpack.runtimeFields.editor.flyoutDefaultTitle",{defaultMessage:"Create new field"}),closeButtonLabel:a.i18n.translate("xpack.runtimeFields.editor.flyoutCloseButtonLabel",{defaultMessage:"Close"}),saveButtonLabel:a.i18n.translate("xpack.runtimeFields.editor.flyoutSaveButtonLabel",{defaultMessage:"Save"}),formErrorsCalloutTitle:a.i18n.translate("xpack.runtimeFields.editor.validationErrorTitle",{defaultMessage:"Fix errors in form before continuing."})}))(l),[d,c]=Object(i.useState)({isSubmitted:!1,isValid:!!l||void 0,submit:l?async()=>({isValid:!0,data:l}):async()=>({isValid:!1,data:{}})}),{submit:f,isValid:p,isSubmitted:m}=d,j=Object(i.useCallback)((async()=>{const{isValid:t,data:n}=await f();t&&e(n)}),[f,e]);return Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(o.EuiFlyoutHeader,null,Object(b.jsx)(o.EuiTitle,{size:"m","data-test-subj":"flyoutTitle"},Object(b.jsx)("h2",{id:"runtimeFieldEditorEditTitle"},u.flyoutTitle))),Object(b.jsx)(o.EuiFlyoutBody,null,Object(b.jsx)(_,{docLinks:n,defaultValue:l,onChange:c,ctx:s})),Object(b.jsx)(o.EuiFlyoutFooter,null,m&&!p&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(o.EuiCallOut,{title:u.formErrorsCalloutTitle,color:"danger",iconType:"cross","data-test-subj":"formError"}),Object(b.jsx)(o.EuiSpacer,{size:"m"})),Object(b.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(b.jsx)(o.EuiFlexItem,{grow:!1},Object(b.jsx)(o.EuiButtonEmpty,{iconType:"cross",flush:"left",onClick:()=>t(),"data-test-subj":"closeFlyoutButton"},u.closeButtonLabel)),Object(b.jsx)(o.EuiFlexItem,{grow:!1},Object(b.jsx)(o.EuiButton,{color:"primary",onClick:()=>j(),"data-test-subj":"saveFieldButton",disabled:m&&!p,fill:!0},u.saveButtonLabel)))))}},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/esUiShared/static/forms/helpers");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/esUiShared/static/forms/components");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t){e.exports=__kbnSharedDeps__.KbnCodeEditor},function(e,t,n){e.exports=n(15)(4)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(25),r=n(1),a=i.__importDefault(n(26));t.default=function(e,t){var n=r.useState(t),i=n[0],l=n[1];return a.default((function(){var t=e.subscribe(l);return function(){return t.unsubscribe()}}),[e]),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,n){e.exports=n(15)(2)},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n(24),__kbnBundles__.define("plugin/runtimeFields/public",n,27)},function(e,t,n){n.p=window.__kbnPublicPath__.runtimeFields},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,"RuntimeFieldEditorFlyoutContent",(function(){return a.RuntimeFieldEditorFlyoutContent})),n.d(t,"RuntimeFieldEditor",(function(){return a.RuntimeFieldEditor})),n.d(t,"RUNTIME_FIELD_OPTIONS",(function(){return l.a})),n.d(t,"plugin",(function(){return s})),n(1);var i=n(4),r=n(0);class plugin_RuntimeFieldsPlugin{setup(e,t){return{loadEditor:(a=e,async()=>{const{RuntimeFieldEditorFlyoutContent:e}=await Promise.resolve().then(n.bind(null,9)),[t]=await a.getStartServices(),{uiSettings:l,theme:s,overlays:o,docLinks:u,settings:d}=t,{Provider:c}=Object(i.e)({uiSettings:l,settings:d,theme:s});let f=null;return{openEditor:({onSave:n,defaultValue:a,ctx:l})=>{const s=()=>{f&&(f.close(),f=null)};return f=o.openFlyout(Object(i.g)(Object(r.jsx)(c,null,Object(r.jsx)(e,{onSave:e=>{s(),n(e)},onCancel:()=>{var e;return null===(e=f)||void 0===e?void 0:e.close()},docLinks:u,defaultValue:a,ctx:l})),t)),s}}})};var a}start(e,t){return{}}}var a=n(9),l=n(5);function s(){return new plugin_RuntimeFieldsPlugin}}]);