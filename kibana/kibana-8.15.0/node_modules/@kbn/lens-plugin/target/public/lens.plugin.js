/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,a,s=t[0],r=t[1],o=0,l=[];o<s.length;o++)a=s[o],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&l.push(i[a][0]),i[a]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(c&&c(t);l.length;)l.shift()()}var n={},i={5:0};function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,a){n=i[e]=[t,a]}));t.push(n[2]=s);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+"lens.chunk."+e+".js"}(e);var c=new Error;r=function(t){o.onerror=o.onload=null,clearTimeout(l);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",c.name="ChunkLoadError",c.type=a,c.request=s,n[1](c)}i[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var s=window.lens_bundle_jsonpfunction=window.lens_bundle_jsonpfunction||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var c=r;a(a.s=41)}([function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(25)(2)},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,n){"use strict";n.r(t),n.d(t,"PLUGIN_ID",(function(){return s})),n.d(t,"APP_ID",(function(){return r})),n.d(t,"LENS_APP_NAME",(function(){return o})),n.d(t,"LENS_EMBEDDABLE_TYPE",(function(){return c})),n.d(t,"DOC_TYPE",(function(){return l})),n.d(t,"NOT_INTERNATIONALIZED_PRODUCT_NAME",(function(){return u})),n.d(t,"BASE_API_URL",(function(){return d})),n.d(t,"LENS_EDIT_BY_VALUE",(function(){return p})),n.d(t,"PieChartTypes",(function(){return b})),n.d(t,"CategoryDisplay",(function(){return g})),n.d(t,"NumberDisplay",(function(){return f})),n.d(t,"LegendDisplay",(function(){return h})),n.d(t,"DOCUMENT_FIELD_NAME",(function(){return _})),n.d(t,"getBasePath",(function(){return m})),n.d(t,"getEditPath",(function(){return y})),n.d(t,"getFullPath",(function(){return O})),n.d(t,"COLOR_MAPPING_OFF_BY_DEFAULT",(function(){return w}));var i=n(18),a=n.n(i);const s="lens",r="lens",o="lens",c="lens",l="lens",u="Lens Visualizations",d="/api/lens",p="edit_by_value",b={PIE:"pie",DONUT:"donut",TREEMAP:"treemap",MOSAIC:"mosaic",WAFFLE:"waffle"},g={DEFAULT:"default",INSIDE:"inside",HIDE:"hide"},f={HIDDEN:"hidden",PERCENT:"percent",VALUE:"value"},h={DEFAULT:"default",SHOW:"show",HIDE:"hide"},_="___records___";function m(){return"#/"}const v="_g";function y(e,t,n,i){const s={};t&&(s.time=t),n&&(s.filters=n),i&&(s.refreshInterval=i);const r=Object.keys(s).length?`?${v}=${a.a.encode(s)}`:"";return e?`#/edit/${encodeURIComponent(e)}${r}`:`#/${p}${r}`}function O(e){return`/app/${s}${e?y(e):"#/"}`}const w=!1},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return o})),n(2),n(3);const i=e=>Boolean(e&&void 0!==(null==e?void 0:e.parentApi)),a=e=>Boolean(e&&(e=>Boolean(e&&void 0!==(null==e?void 0:e.timeRange$)))(e)&&(e=>Boolean(e&&void 0!==(null==e?void 0:e.filters$)))(e)&&void 0!==(null==e?void 0:e.query$));n(29);const s=(e,t)=>Boolean(e&&e.type)&&e.type===t,r=e=>Boolean(e&&void 0!==(null==e?void 0:e.uuid)),o=e=>Boolean(e&&void 0!==(null==e?void 0:e.panelTitle)&&void 0!==(null==e?void 0:e.hidePanelTitle))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){e.exports=n(25)(4)},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t){e.exports=__kbnSharedDeps__.KbnRison},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(5);function a(e){return{get:async t=>e.client.get({contentTypeId:i.DOC_TYPE,id:t}),create:async({data:t,options:n})=>await e.client.create({contentTypeId:i.DOC_TYPE,data:t,options:n}),update:async({id:t,data:n,options:a})=>await e.client.update({contentTypeId:i.DOC_TYPE,id:t,data:n,options:a}),delete:async t=>await e.client.delete({contentTypeId:i.DOC_TYPE,id:t}),search:async(t={},n)=>e.client.search({contentTypeId:i.DOC_TYPE,query:t,options:n})}}},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,n){"use strict";n.d(t,"a",(function(){return saved_object_store_SavedObjectIndexStore})),n.d(t,"b",(function(){return p}));var i=n(1),a=n.n(i),s=n(19);class saved_object_store_SavedObjectIndexStore{constructor(e){a()(this,"client",void 0),a()(this,"save",(async e=>{const{savedObjectId:t,type:n,references:i,...a}=e,s=a;if(t){const n=await this.client.update({id:t,data:s,options:{references:i}});return{...e,savedObjectId:n.item.id}}{const t=await this.client.create({data:s,options:{references:i}});return{...e,savedObjectId:t.item.id}}})),this.client=Object(s.a)(e)}async load(e){const t=await this.client.get(e);if(t.item.error)throw t.item.error;return t}async search(e,t){return await this.client.search(e,t)}}var r=n(5),o=n(0);const c=o.i18n.translate("xpack.lens.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});n(3);var l=n(6),u=n(28),d=n(4);async function p(e,t,n){const{client:i,...a}=n,{id:s,title:p,isTitleDuplicateConfirmed:b,lastSavedTitle:g,copyOnSave:f}=e;if(b)return!0;if(p===g&&!f)return!0;const h=await async function(e,t,n){if(n)return(await e.search({limit:10,text:`"${n}"`},{searchFields:["title"]})).hits.find((e=>e.attributes.title.toLowerCase()===n.toLowerCase()))}(i,r.DOC_TYPE,p);return!h||h.id===s||(t?(t(),Promise.reject(new Error(c))):function({title:e,displayName:t},n){const i=o.i18n.translate("xpack.lens.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title ''{title}'' already exists. Would you like to save anyway?",values:{title:e,name:t}}),a=o.i18n.translate("xpack.lens.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:t}});try{return function(e="",t="",n="",i){return new Promise(((a,s)=>{const r=o.i18n.translate("xpack.lens.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),c=i.overlays.openModal(Object(u.a)(Object(d.jsx)(l.EuiConfirmModal,{onCancel:()=>{c.close(),s()},onConfirm:()=>{c.close(),a(!0)},confirmButtonText:n,cancelButtonText:r,title:t},e),i))}))}(i,"",a,n)}catch{return Promise.reject(new Error(c))}}(e,a))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return s})),n(10),n(2);const i=e=>Boolean((e=>"function"==typeof(null==e?void 0:e.addNewPanel))(e)&&"function"==typeof(null==e?void 0:e.removePanel)&&"function"==typeof(null==e?void 0:e.replacePanel)&&"function"==typeof(null==e?void 0:e.addNewPanel)&&(null==e?void 0:e.children$)),a=e=>Boolean(e&&e.openOverlay&&e.clearOverlays),s=e=>null!==e&&"object"==typeof e&&"trackContentfulRender"in e},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t,n){n.r(t);var i=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(39),a=n(3),s=i.__importDefault(n(43));t.default=function(e,t){var n=a.useState(t),i=n[0],r=n[1];return s.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(15),a=n.n(i),s=n(3),r=n(36),o=n(37),c=n(26),l=n.n(c),u=n(17),d=n.n(u),p=n(6);const b="eui-global",g="eui-utilities",f={darkMode:!1};var h=n(4);const _=[p.euiStylisPrefixer],m=d()({key:"css",stylisPlugins:_,container:document.querySelector('meta[name="emotion"]')}),v=d()({key:b,stylisPlugins:_,container:document.querySelector(`meta[name="${b}"]`)}),y=d()({key:g,stylisPlugins:_,container:document.querySelector(`meta[name="${g}"]`)});m.compat=!0,v.compat=!0,y.compat=!0;const O={default:m,global:v,utility:y},w=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:i,children:a})=>{const r=l()(e,f),o=Object(s.useMemo)((()=>(e=>e.darkMode?p.COLOR_MODES_STANDARD.dark:p.COLOR_MODES_STANDARD.light)(r)),[r]),c=n||o,u=!1!==t&&void 0;return Object(h.jsx)(p.EuiProvider,{cache:O,modify:i,colorMode:c,globalStyles:u,utilityClasses:u},a)},E=({children:e,i18n:t,...n})=>Object(r.useIsNestedEuiProvider)()?(Object(o.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(h.jsx)(t.Context,null,e)):Object(h.jsx)(w,n,Object(h.jsx)(t.Context,null,e));var D=n(23);const T=({children:e,...t})=>Object(h.jsx)(E,a()({globalStyles:!1},t),Object(h.jsx)(D.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(h.jsx)(D.KibanaErrorBoundary,null,e)))},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(3),a=n(14),s=n.n(a),r=n(27),o=n(4);const c=(e,t)=>n=>(s.a.render(Object(o.jsx)(r.a,t,e),n),()=>s.a.unmountComponentAtNode(n));n(1),n(0),i.Component},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,a,s;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(a=i;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,s[a]))return!1;for(a=i;0!=a--;){var r=s[a];if(!e(t[r],n[r]))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(10);const a=e=>Boolean(e&&Object(i.c)(e,"lens")&&"function"==typeof e.getSavedVis&&"function"==typeof e.canViewUnderlyingData&&"function"==typeof e.getViewUnderlyingDataArgs&&Object(i.d)(e)&&Object(i.e)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={DATA:"data",REFERENCELINE:"referenceLine",ANNOTATIONS:"annotations",METRIC_TRENDLINE:"metricTrendline"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return LensAppLocatorDefinition}));var i=n(1),a=n.n(i),s=n(18),r=n.n(s);const o="LENS_APP_LOCATOR",c="LENS_SHARE_STATE_ACTION";class LensAppLocatorDefinition{constructor(){a()(this,"id",o),a()(this,"getLocation",(async e=>{const{filters:t,query:i,savedObjectId:a,resolvedDateRange:s,searchSessionId:o}=e,l=function(e){if(e.savedObjectId)return{};if(!(e.activeDatasourceId&&e.datasourceStates&&e.visualization&&e.references))return{};const t={activeDatasourceId:e.activeDatasourceId,visualization:e.visualization,datasourceStates:Object.fromEntries(Object.entries(e.datasourceStates).map((([e,{state:t}])=>[e,t]))),references:e.references};return e.dataViewSpecs&&(t.dataViewSpecs=e.dataViewSpecs),t}(e),u={},{isFilterPinned:d}=await Promise.resolve().then(n.t.bind(null,38,7));i&&(l.query=i),s&&(l.resolvedDateRange=s,u.time={from:s.fromDate,to:s.toDate}),null!=t&&t.length&&(l.filters=t,u.filters=null==t?void 0:t.filter((e=>!d(e))));const p=a?`/edit/${encodeURIComponent(a)}`:"",b=`${window.location.origin}${window.location.pathname}`,g=new URL(b);return g.hash=p,g.searchParams.append("_g",r.a.encodeUnknown(u)||""),o&&(l.searchSessionId=o),{app:"lens",path:g.href.replace(b,""),state:{type:c,payload:l}}}))}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var i=n(21),a=n(5);const s=e=>({...e.attributes,state:e.attributes.state,references:e.references});function r(e,t){const n=new i.a(t.contentManagement);return t.embeddable.getAttributeService(a.DOC_TYPE,{saveMethod:async(e,t)=>({id:(await n.save({...e,savedObjectId:t,type:a.DOC_TYPE})).savedObjectId}),unwrapMethod:async e=>{const{item:t,meta:{outcome:i,aliasTargetId:a,aliasPurpose:r}}=await n.load(e),{id:o}=t,c={aliasTargetId:a,outcome:i,aliasPurpose:r,sourceId:o};return{attributes:s(t),metaInfo:{sharingSavedObjectProps:c,managed:t.managed}}},checkForDuplicateTitle:t=>Object(i.b)({title:t.newTitle,displayName:a.DOC_TYPE,isTitleDuplicateConfirmed:t.isTitleDuplicateConfirmed,lastSavedTitle:"",copyOnSave:!1},t.onTitleDuplicate,{client:n,...e})})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(5);function a(e){return e.type===i.DOC_TYPE}},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/share/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";n.r(t),n.d(t,"isLensApi",(function(){return de.a})),n.d(t,"layerTypes",(function(){return pe.a})),n.d(t,"LENS_EMBEDDABLE_TYPE",(function(){return u.LENS_EMBEDDABLE_TYPE})),n.d(t,"plugin",(function(){return be}));var i=n(1),a=n.n(i),s=n(16),r=n(9),o=n(8),c=n(7),l=n(0),u=n(5),d=n(19);const p="ACTION_OPEN_IN_DISCOVER",b=async()=>await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));var g=n(34);const f="ACTION_CONFIGURE_IN_LENS",h=async()=>await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));class edit_action_ConfigureInLensPanelAction{constructor(e,t){a()(this,"type",f),a()(this,"id",f),a()(this,"order",50),this.startDependencies=e,this.startServices=t}getDisplayName({embeddable:e}){const t=Object(g.a)(e)?e.getTextBasedLanguage():void 0;return l.i18n.translate("xpack.lens.app.editVisualizationLabel",{defaultMessage:"Edit {lang} visualization",values:{lang:t}})}getIconType(){return"pencil"}async isCompatible({embeddable:e}){const{isEditActionCompatible:t}=await h();return t(e)}async execute({embeddable:e}){const{executeEditAction:t}=await h();return t({embeddable:e,startDependencies:this.startDependencies,...this.startServices})}}var _=n(22);const m="ACTION_CREATE_ESQL_CHART",v=async()=>await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));class create_action_CreateESQLPanelAction{constructor(e,t){a()(this,"type",m),a()(this,"id",m),a()(this,"order",50),a()(this,"grouping",o.COMMON_VISUALIZATION_GROUPING),this.startDependencies=e,this.core=t}getDisplayName(){return l.i18n.translate("xpack.lens.app.createVisualizationLabel",{defaultMessage:"ES|QL"})}getIconType(){return"esqlVis"}async isCompatible({embeddable:e}){if(!Object(_.a)(e))return!1;const{isCreateActionCompatible:t}=await v();return t(this.core)}async execute({embeddable:e}){if(!Object(_.a)(e))throw new c.IncompatibleActionError;const{executeCreateAction:t}=await v();t({deps:this.startDependencies,core:this.core,api:e})}}const y="IN_APP_EMBEDDABLE_EDIT_TRIGGER",O={id:y,title:l.i18n.translate("xpack.lens.inAppEditTrigger.title",{defaultMessage:"In-app embeddable edit"}),description:l.i18n.translate("xpack.lens.inAppEditTrigger.description",{defaultMessage:"Triggers an in app flyout on the current embeddable"})},w="ACTION_EDIT_LENS_EMBEDDABLE",E=async()=>await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));class in_app_embeddable_edit_action_EditLensEmbeddableAction{constructor(e,t){a()(this,"type",w),a()(this,"id",w),a()(this,"order",50),this.startDependencies=e,this.core=t}getDisplayName(){return l.i18n.translate("xpack.lens.app.editLensEmbeddableLabel",{defaultMessage:"Edit visualization"})}getIconType(){return"pencil"}async isCompatible({attributes:e}){const{isEmbeddableEditActionCompatible:t}=await E();return t(this.core,e)}async execute({attributes:e,lensEvent:t,container:n,onUpdate:i,onApply:a,onCancel:s}){const{executeEditEmbeddableAction:r}=await E();e&&r({deps:this.startDependencies,core:this.core,attributes:e,lensEvent:t,container:n,onUpdate:i,onApply:a,onCancel:s})}}const D=(e,t)=>{const n=e;if("attributes"in n&&void 0!==n.attributes){const e=[];Array.isArray(n.attributes.references)&&n.attributes.references.forEach((n=>{const i=n,a=t.find((e=>e.name===i.name));a&&e.push(a)})),n.attributes.references=e}return n},T=e=>{let t=[];const n=e;return"attributes"in n&&void 0!==n.attributes&&(t=n.attributes.references),{state:e,references:t}};class embeddable_factory_EmbeddableFactory{constructor(e){a()(this,"type",u.DOC_TYPE),a()(this,"savedObjectMetaData",{name:l.i18n.translate("xpack.lens.lensSavedObjectLabel",{defaultMessage:"Lens Visualization"}),type:u.DOC_TYPE,getIconForSavedObject:()=>"lensApp"}),a()(this,"isEditable",(async()=>{var e;const{capabilities:t}=await this.getStartServices();return Boolean(t.visualize.save||(null===(e=t.dashboard)||void 0===e?void 0:e.showWriteControls))})),a()(this,"createFromSavedObject",(async(e,t,n)=>(t.savedObjectId||(t.savedObjectId=e),this.create(t,n)))),a()(this,"extract",T),a()(this,"inject",D),this.getStartServices=e}canCreateNew(){return!1}getDisplayName(){return l.i18n.translate("xpack.lens.embeddableDisplayName",{defaultMessage:"Lens"})}async create(e,t){try{var i;const{data:a,timefilter:s,expressionRenderer:r,documentToExpression:o,injectFilterReferences:c,visualizationMap:l,datasourceMap:u,uiActions:d,coreHttp:p,coreStart:b,attributeService:g,dataViews:f,capabilities:h,usageCollection:_,inspector:m,spaces:v,uiSettings:y}=await this.getStartServices(),{Embeddable:O}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));return new O({attributeService:g,data:a,dataViews:f,timefilter:s,inspector:m,expressionRenderer:r,basePath:p.basePath,getTrigger:null==d?void 0:d.getTrigger,getTriggerCompatibleActions:null==d?void 0:d.getTriggerCompatibleActions,documentToExpression:o,injectFilterReferences:c,visualizationMap:l,datasourceMap:u,capabilities:{canSaveDashboards:Boolean(null===(i=h.dashboard)||void 0===i?void 0:i.showWriteControls),canSaveVisualizations:Boolean(h.visualize.save),canOpenVisualizations:Boolean(h.visualize.show),navLinks:h.navLinks,discover:h.discover},coreStart:b,usageCollection:_,spaces:v,uiSettings:y},e,t)}catch(n){return new r.ErrorEmbeddable(n,e,t)}}}var S=n(3),A=n.n(S),x=n(6),j=n(4),P={name:"d16ppa",styles:"z-index:auto;flex:1;display:flex;flex-direction:column;height:100%;min-height:$euiSizeL+2px;position:relative;justify-content:center;align-items:center"};const C=e=>Object(j.jsx)(x.EuiPanel,{css:P,role:"figure",paddingSize:"none",hasShadow:e.showShadow,hasBorder:e.showBorder,"data-test-subj":e.dataTestSubj},Object(j.jsx)(x.EuiLoadingChart,{size:"l",mono:!0}));function I(e,t){const{embeddable:n,uiActions:i}=t,a=n.getEmbeddableFactory("lens");return e=>{var t;const n={...e},s=Boolean(n.withDefaultActions)||n.extraActions&&(null===(t=n.extraActions)||void 0===t?void 0:t.length)>0;return s?Object(j.jsx)(k,{factory:a,uiActions:i,actionPredicate:()=>s,input:n,extraActions:n.extraActions,showInspector:n.showInspector,withDefaultActions:n.withDefaultActions}):Object(j.jsx)(L,{factory:a,input:n})}}function L({factory:e,input:t}){const[n,i,a]=Object(r.useEmbeddableFactory)({factory:e,input:t});return i?Object(j.jsx)(x.EuiLoadingChart,null):Object(j.jsx)(r.EmbeddableRoot,{embeddable:n,loading:i,error:a,input:t})}const k=({factory:e,uiActions:t,actionPredicate:n,input:i,extraActions:a,showInspector:s=!0,withDefaultActions:o,abortController:c})=>{const[l,u]=Object(r.useEmbeddableFactory)({factory:e,input:i});return Object(S.useEffect)((()=>{l&&l.updateInput(i)}),[l,i]),u||!l?Object(j.jsx)(C,null):Object(j.jsx)(r.EmbeddablePanel,{hideHeader:!1,embeddable:l,getActions:async(e,n)=>{const i=o?await t.getTriggerCompatibleActions(e,n):[];return[...null!=a?a:[],...i]},hideInspector:!s,actionPredicate:n,showNotifications:!1,showShadow:!1,showBadges:!1})};var N=n(15),M=n.n(N);const V=A.a.lazy((()=>Promise.all([n.e(0),n.e(1)]).then(n.bind(null,144))));function R(){return Object(j.jsx)(x.EuiOverlayMask,null,Object(j.jsx)(x.EuiLoadingSpinner,null))}const z=e=>Object(j.jsx)(S.Suspense,{fallback:Object(j.jsx)(R,null)},Object(j.jsx)(V,e));function B(e,t){return i=>{const[a,s]=Object(S.useState)();if(Object(S.useEffect)((()=>{!async function(){const{getLensServices:i,getLensAttributeService:a}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682)),r=await i(e,t,a(e,t));s(r)}()}),[]),!a)return Object(j.jsx)(R,null);const{ContextProvider:r}=a.presentationUtil;return Object(j.jsx)(x.EuiOverlayMask,null,Object(j.jsx)(r,null,Object(j.jsx)(z,M()({},i,{lensServices:a}))))}}const F={name:"lens_datatable_column",aliases:[],type:"lens_datatable_column",help:"",inputTypes:["null"],args:{columnId:{types:["string"],help:""},alignment:{types:["string"],help:""},sortingHint:{types:["string"],help:""},hidden:{types:["boolean"],help:""},oneClickFilter:{types:["boolean"],help:""},width:{types:["number"],help:""},isTransposed:{types:["boolean"],help:""},transposable:{types:["boolean"],help:""},colorMode:{types:["string"],help:""},palette:{types:["palette"],help:""},summaryRow:{types:["string"],help:""},summaryLabel:{types:["string"],help:""}},fn:function(e,t){return{type:"lens_datatable_column",...t}}},U={name:"lens_map_to_columns",type:"datatable",help:l.i18n.translate("xpack.lens.functions.mapToColumns.help",{defaultMessage:"A helper to transform a datatable to match Lens column definitions"}),args:{idMap:{types:["string"],help:l.i18n.translate("xpack.lens.functions.mapToColumns.idMap.help",{defaultMessage:"A JSON encoded object in which keys are the datatable column ids and values are the Lens column definitions. Any datatable columns not mentioned within the ID map will be kept unmapped."})},isTextBased:{types:["boolean"],help:l.i18n.translate("xpack.lens.functions.mapToColumns.isESQL.help",{defaultMessage:"An optional flag to indicate if this is about the text based datasource."})}},inputTypes:["datatable"],async fn(...e){var t;const{mapToOriginalColumns:i}=await n.e(23).then(n.bind(null,671)),{mapToOriginalColumnsTextBased:a}=await n.e(24).then(n.bind(null,672));return null!=e&&null!==(t=e[1])&&void 0!==t&&t.isTextBased?a(...e):i(...e)}},G={name:"lens_format_column",type:"datatable",help:"",args:{format:{types:["string"],help:"",required:!0},columnId:{types:["string"],help:"",required:!0},decimals:{types:["number"],help:""},suffix:{types:["string"],help:""},parentFormat:{types:["string"],help:""},compact:{types:["boolean"],help:""},pattern:{types:["string"],help:""},fromUnit:{types:["string"],help:""},toUnit:{types:["string"],help:""}},inputTypes:["datatable"],async fn(...e){const{formatColumnFn:t}=await n.e(18).then(n.bind(null,673));return t(...e)}},q={name:"lens_counter_rate",type:"datatable",inputTypes:["datatable"],help:l.i18n.translate("xpack.lens.functions.counterRate.help",{defaultMessage:"Calculates the counter rate of a column in a data table"}),args:{by:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.byHelpText",{defaultMessage:"Column to split the counter rate calculation by"}),multi:!0,types:["string"],required:!1},inputColumnId:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.inputColumnIdHelpText",{defaultMessage:"Column to calculate the counter rate of"}),types:["string"],required:!0},outputColumnId:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.outputColumnIdHelpText",{defaultMessage:"Column to store the resulting counter rate in"}),types:["string"],required:!0},outputColumnName:{help:l.i18n.translate("xpack.lens.functions.counterRate.args.outputColumnNameHelpText",{defaultMessage:"Name of the column to store the resulting counter rate in"}),types:["string"],required:!1}},async fn(...e){const{counterRateFn:t}=await n.e(22).then(n.bind(null,674));return t(...e)}},H=(...e)=>({name:"lens_time_scale",type:"datatable",help:"",args:{dateColumnId:{types:["string"],help:""},inputColumnId:{types:["string"],help:"",required:!0},outputColumnId:{types:["string"],help:"",required:!0},outputColumnName:{types:["string"],help:""},targetUnit:{types:["string"],options:["s","m","h","d"],help:"",required:!0},reducedTimeRange:{types:["string"],help:""}},inputTypes:["datatable"],async fn(...t){const{timeScaleFn:i}=await n.e(25).then(n.bind(null,675));return i(...e)(...t)}}),$={name:"lens_collapse",type:"datatable",inputTypes:["datatable"],help:l.i18n.translate("xpack.lens.functions.collapse.help",{defaultMessage:"Collapses multiple rows into a single row using the specified aggregate function."}),args:{by:{help:l.i18n.translate("xpack.lens.functions.collapse.args.byHelpText",{defaultMessage:"Columns to group by - these columns are kept as-is"}),multi:!0,types:["string"],required:!1},metric:{help:l.i18n.translate("xpack.lens.functions.collapse.args.metricHelpText",{defaultMessage:"Column to calculate the specified aggregate function of"}),types:["string"],multi:!0,required:!1},fn:{help:l.i18n.translate("xpack.lens.functions.collapse.args.fnHelpText",{defaultMessage:"The aggregate function to apply"}),types:["string"],multi:!0,required:!0}},async fn(...e){const{collapseFn:t}=await n.e(21).then(n.bind(null,676));return t(...e)}};var Y=n(12),K=n(20),W=n.n(K);const Z=(e,t)=>{if(!e)return 0;const n=Object(Y.getAbsoluteTimeRange)(e,null!=t?{forceNow:new Date(t)}:{});return e?W()(n.to).diff(W()(n.from)):0},Q={name:"formula_time_range",help:l.i18n.translate("xpack.lens.formula.timeRange.help",{defaultMessage:"The specified time range, in milliseconds (ms)."}),args:{},fn(e,t,{getSearchContext:n}){const{timeRange:i,now:a}=n();return Z(i,a)}},X={name:"formula_interval",help:l.i18n.translate("xpack.lens.formula.interval.help",{defaultMessage:"The specified minimum interval for the date histogram, in milliseconds (ms)."}),args:{targetBars:{types:["number"],help:l.i18n.translate("xpack.lens.formula.interval.targetBars.help",{defaultMessage:"The target number of bars for the date histogram."})}},fn(e,t,{getSearchContext:n}){const{timeRange:i,now:a}=n();return i&&t.targetBars?Object(Y.calcAutoIntervalNear)(t.targetBars,Z(i,a)).asMilliseconds():0}},J={name:"formula_now",help:l.i18n.translate("xpack.lens.formula.now.help",{defaultMessage:"The current now moment used in Kibana expressed in milliseconds (ms)."}),args:{},fn(e,t,{getSearchContext:n}){var i;return null!==(i=n().now)&&void 0!==i?i:Date.now()}};var ee=n(2),te=n(24),ne=n(13),ie=n(10);const ae=async()=>await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));class open_in_discover_drilldown_OpenInDiscoverDrilldown{constructor(e){a()(this,"id","OPEN_IN_DISCOVER_DRILLDOWN"),a()(this,"order",8),a()(this,"getDisplayName",(()=>l.i18n.translate("xpack.lens.app.exploreDataInDiscoverDrilldown",{defaultMessage:"Open in Discover"}))),a()(this,"euiIcon","discoverApp"),a()(this,"ReactCollectConfig",(({config:e,onConfig:t})=>Object(j.jsx)(x.EuiFormRow,{hasChildLabel:!1},Object(j.jsx)(x.EuiSwitch,{id:"openInNewTab",name:"openInNewTab",label:l.i18n.translate("xpack.lens.app.exploreDataInDiscoverDrilldown.newTabConfig",{defaultMessage:"Open in new tab"}),checked:e.openInNewTab,onChange:()=>t({...e,openInNewTab:!e.openInNewTab}),"data-test-subj":"openInDiscoverDrilldownOpenInNewTab"})))),a()(this,"CollectConfig",this.ReactCollectConfig),a()(this,"createConfig",(()=>({openInNewTab:!0}))),a()(this,"isConfigValid",(e=>!0)),a()(this,"isCompatible",(async(e,t)=>{const{isCompatible:n}=await ae();return n({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable,...e})})),a()(this,"isConfigurable",(e=>this.deps.hasDiscoverAccess()&&Object(ie.c)(e.embeddable,u.DOC_TYPE))),a()(this,"getHref",(async(e,t)=>{const{getHref:n}=await ae();return n({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable})})),a()(this,"execute",(async(e,t)=>{if(e.openInNewTab)window.open(await this.getHref(e,t),"_blank");else{const{getLocation:e}=await ae(),{app:n,path:i,state:a}=await e({locator:this.deps.locator(),dataViews:this.deps.dataViews(),hasDiscoverAccess:this.deps.hasDiscoverAccess(),...t,embeddable:t.embeddable});await this.deps.application().navigateToApp(n,{path:i,state:a})}})),this.deps=e}supportedTriggers(){return[ne.APPLY_FILTER_TRIGGER]}}var se=n(32),re=n(35),oe=n(11);function ce(e){const t=[];return e&&Object.values(e).some((e=>Object(Y.tableHasFormulas)(e.columns,e.rows)))&&t.push(l.i18n.translate("xpack.lens.app.downloadButtonFormulasWarning",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})),t}const le="lens";var ue=n(33);class plugin_LensPlugin{constructor(){a()(this,"datatableVisualization",void 0),a()(this,"editorFrameService",void 0),a()(this,"editorFrameSetup",void 0),a()(this,"queuedVisualizations",[]),a()(this,"FormBasedDatasource",void 0),a()(this,"TextBasedDatasource",void 0),a()(this,"xyVisualization",void 0),a()(this,"legacyMetricVisualization",void 0),a()(this,"metricVisualization",void 0),a()(this,"pieVisualization",void 0),a()(this,"heatmapVisualization",void 0),a()(this,"gaugeVisualization",void 0),a()(this,"tagcloudVisualization",void 0),a()(this,"topNavMenuEntries",[]),a()(this,"hasDiscoverAccess",!1),a()(this,"dataViewsService",void 0),a()(this,"initDependenciesForApi",(()=>{})),a()(this,"locator",void 0)}setup(e,{urlForwarding:t,expressions:i,data:a,fieldFormats:r,embeddable:o,visualizations:c,charts:p,globalSearch:b,usageCollection:g,uiActionsEnhanced:f,share:h,contentManagement:_}){const m=Object(s.createStartServicesGetter)(e.getStartServices);o&&(o.registerEmbeddableFactory("lens",new embeddable_factory_EmbeddableFactory((async()=>{const{getLensAttributeService:t,setUsageCollectionStart:o,initMemoizedErrorNotification:c}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682)),{core:l,plugins:u}=m();await this.initParts(e,a,p,i,r,u.fieldFormats.deserialize);const[d,b]=await Promise.all([this.editorFrameService.loadVisualizations(),this.editorFrameService.loadDatasources()]),{setVisualizationMap:f,setDatasourceMap:h}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));h(b),f(d);const _=await u.eventAnnotation.getService();return u.usageCollection&&o(u.usageCollection),c(l),{attributeService:t(l,u),capabilities:l.application.capabilities,coreHttp:l.http,coreStart:l,data:u.data,timefilter:u.data.query.timefilter.timefilter,expressionRenderer:u.expressions.ReactExpressionRenderer,documentToExpression:t=>this.editorFrameService.documentToExpression(t,{dataViews:u.dataViews,storage:new s.Storage(localStorage),uiSettings:e.uiSettings,timefilter:u.data.query.timefilter.timefilter,nowProvider:u.data.nowProvider,eventAnnotationService:_}),injectFilterReferences:a.query.filterManager.inject.bind(a.query.filterManager),visualizationMap:d,datasourceMap:b,dataViews:u.dataViews,uiActions:u.uiActions,usageCollection:g,inspector:u.inspector,spaces:u.spaces,theme:e.theme,uiSettings:e.uiSettings}}))),o.registerSavedObjectToPanelMethod(le,(e=>e.managed?{attributes:Object(ue.b)(e)}:{savedObjectId:e.id}))),h&&(this.locator=h.url.locators.create(new se.c),h.register((({uiSettings:e,formatFactoryFn:t,atLeastGold:n})=>({id:"csvDownloadLens",getShareMenuItems:({objectType:i,sharingData:a})=>{if("lens"!==i)return[];const{title:s,activeData:r,csvEnabled:o,columnsSorting:c}=a;return[{shareMenuItem:{name:l.i18n.translate("xpack.lens.reporting.shareContextMenu.csvReportsButtonLabel",{defaultMessage:"CSV Download"}),icon:"document",disabled:!o,sortOrder:1},label:"CSV",reportType:"lens_csv",generateExport:()=>async function({activeData:e,title:t,formatFactory:n,uiSettings:i,columnsSorting:a}){if(!e)return void(window.ELASTIC_LENS_CSV_DOWNLOAD_DEBUG&&(window.ELASTIC_LENS_CSV_CONTENT=void 0));const s=Object.values(e),r=s.reduce(((e,r,o)=>{if(r){const c=s.length>1?`-${o+1}`:"";e[`${t}${c}.csv`]={content:ne.exporters.datatableToCSV(r,{csvSeparator:i.get("csv:separator",","),quoteValues:i.get("csv:quoteValues",!0),formatFactory:n,escapeFormulaValues:!1,columnsSorting:a}),type:ne.exporters.CSV_MIME_TYPE}}return e}),{});window.ELASTIC_LENS_CSV_DOWNLOAD_DEBUG&&(window.ELASTIC_LENS_CSV_CONTENT=r),r&&Object(re.downloadMultipleAs)(r)}({title:s,formatFactory:t(),activeData:r,uiSettings:e,columnsSorting:c}),...n()?{helpText:Object(j.jsx)(oe.FormattedMessage,{id:"xpack.lens.share.helpText",defaultMessage:"Export a CSV of this visualization."}),generateExportButton:Object(j.jsx)(oe.FormattedMessage,{id:"xpack.lens.share.export",defaultMessage:"Export file"}),renderLayoutOptionSwitch:!1,getJobParams:void 0,showRadios:!0}:{isDisabled:!o,warnings:ce(r),helpText:Object(j.jsx)(oe.FormattedMessage,{id:"xpack.lens.application.csvPanelContent.generationDescription",defaultMessage:"Download the data displayed in the visualization."}),generateExportButton:Object(j.jsx)(oe.FormattedMessage,{id:"xpack.lens.share.csvButton",defaultMessage:"Download CSV"}),showRadios:!1}}]}}))({uiSettings:e.uiSettings,formatFactoryFn:()=>m().plugins.fieldFormats.deserialize,atLeastGold:()=>{var e;let t=!1;return null===(e=m().plugins.licensing)||void 0===e||e.license$.pipe().subscribe((e=>{t=e.hasAtLeast("gold")})),t}}))),c.registerAlias({alias:{path:Object(u.getBasePath)(),app:"lens"},name:"lens",promotion:!0,title:l.i18n.translate("xpack.lens.visTypeAlias.title",{defaultMessage:"Lens"}),description:l.i18n.translate("xpack.lens.visTypeAlias.description",{defaultMessage:"Create visualizations with our drag and drop editor. Switch between visualization types at any time."}),note:l.i18n.translate("xpack.lens.visTypeAlias.note",{defaultMessage:"Recommended for most users."}),order:60,icon:"lensApp",stage:"production",appExtensions:{visualizations:{docTypes:["lens"],searchFields:["title^3"],clientOptions:{update:{overwrite:!0}},client:d.a,toListItem(e){const{id:t,type:n,updatedAt:i,attributes:a,managed:s}=e,{title:r,description:o}=a;return{id:t,title:r,description:o,updatedAt:i,managed:s,editor:{editUrl:Object(u.getEditPath)(t),editApp:"lens"},icon:"lensApp",stage:"production",savedObjectType:n,type:"lens",typeTitle:l.i18n.translate("xpack.lens.visTypeAlias.type",{defaultMessage:"Lens"})}}}}}),f.registerDrilldown(new open_in_discover_drilldown_OpenInDiscoverDrilldown({dataViews:()=>this.dataViewsService,locator:()=>null==h?void 0:h.url.locators.get("DISCOVER_APP_LOCATOR"),hasDiscoverAccess:()=>this.hasDiscoverAccess,application:()=>m().core.application})),_.registry.register({id:le,version:{latest:1},name:l.i18n.translate("xpack.lens.content.name",{defaultMessage:"Lens Visualization"})}),((t,i,a,s,r)=>{var o;[Q,J,X,$,q,G,U,F,(o=()=>m().plugins.fieldFormats.deserialize,{name:"lens_datatable",type:"render",inputTypes:["datatable"],help:l.i18n.translate("xpack.lens.datatable.expressionHelpLabel",{defaultMessage:"Datatable renderer"}),args:{title:{types:["string"],help:l.i18n.translate("xpack.lens.datatable.titleLabel",{defaultMessage:"Title"})},description:{types:["string"],help:""},columns:{types:["lens_datatable_column"],help:"",multi:!0},sortingColumnId:{types:["string"],help:""},sortingDirection:{types:["string"],help:""},fitRowToContent:{types:["boolean"],help:""},rowHeightLines:{types:["number"],help:""},headerRowHeight:{types:["string"],help:""},headerRowHeightLines:{types:["number"],help:""},pageSize:{types:["number"],help:""}},async fn(...e){const{datatableFn:t}=await n.e(12).then(n.bind(null,670));return t(o)(...e)}}),H((()=>m().plugins.data.datatableUtilities),(async()=>{const{getTimeZone:t}=await n.e(0).then(n.bind(null,83));return t(e.uiSettings)}),(()=>m().plugins.data.nowProvider.get()))].forEach((e=>t.registerFunction(e)))})(i);const v=()=>m().plugins.presentationUtil.ContextProvider;var y;return e.application.register({id:u.APP_ID,title:u.NOT_INTERNATIONALIZED_PRODUCT_NAME,visibleIn:[],mount:async t=>{const{core:s,plugins:o}=m();await this.initParts(e,a,p,i,r,o.fieldFormats.deserialize);const{mountApp:c,getLensAttributeService:l,setUsageCollectionStart:u,initMemoizedErrorNotification:d}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));o.usageCollection&&u(o.usageCollection),d(s);const b=this.editorFrameService.start(s,o);return c(e,t,{createEditorFrame:b.createInstance,attributeService:l(s,o),getPresentationUtilContext:v,topNavMenuEntryGenerators:this.topNavMenuEntries,locator:this.locator})}}),b&&b.registerResultProvider((y=e.getStartServices().then((([{application:{capabilities:e}}])=>e)),{id:"lens",find:({term:e="",types:t,tags:n})=>n||t&&!t.includes("application")?Object(ee.of)([]):Object(ee.from)(y.then((({navLinks:{visualize:t}})=>{if(!t)return[];const n=l.i18n.translate("xpack.lens.searchTitle",{defaultMessage:"Lens: create visualizations",description:"Lens is a product name and should not be translated"}),i=n.toLowerCase();let a=0;return i===(e=e.toLowerCase())?a=100:i.startsWith(e)?a=90:i.includes(e)&&(a=75),0===a?[]:[{id:"lens",title:n,type:"application",icon:"logoKibana",meta:{categoryId:te.DEFAULT_APP_CATEGORIES.kibana.id,categoryLabel:te.DEFAULT_APP_CATEGORIES.kibana.label},score:a,url:Object(u.getFullPath)()}]}))),getSearchableTypes:()=>["application"]})),t.forwardApp("lens","lens"),this.initDependenciesForApi=async()=>{const{plugins:t}=m();await this.initParts(e,a,p,i,r,t.fieldFormats.deserialize)},{registerVisualization:e=>{this.editorFrameSetup?this.editorFrameSetup.registerVisualization(e):this.queuedVisualizations.push(e)},registerTopNavMenuEntryGenerator:e=>{this.topNavMenuEntries.push(e)}}}async initParts(e,t,i,a,s,r){const{DatatableVisualization:o,EditorFrameService:c,FormBasedDatasource:l,XyVisualization:u,LegacyMetricVisualization:d,MetricVisualization:p,PieVisualization:b,HeatmapVisualization:g,GaugeVisualization:f,TagcloudVisualization:h,TextBasedDatasource:_}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));this.datatableVisualization=new o,this.editorFrameService=new c,this.FormBasedDatasource=new l,this.TextBasedDatasource=new _,this.xyVisualization=new u,this.legacyMetricVisualization=new d,this.metricVisualization=new p,this.pieVisualization=new b,this.heatmapVisualization=new g,this.gaugeVisualization=new f,this.tagcloudVisualization=new h;const m=this.editorFrameService.setup(),v={expressions:a,data:t,fieldFormats:s,charts:i,editorFrame:m,formatFactory:r};this.FormBasedDatasource.setup(e,v),this.TextBasedDatasource.setup(e,v),this.xyVisualization.setup(e,v),this.datatableVisualization.setup(e,v),this.legacyMetricVisualization.setup(e,v),this.metricVisualization.setup(e,v),this.pieVisualization.setup(e,v),this.heatmapVisualization.setup(e,v),this.gaugeVisualization.setup(e,v),this.tagcloudVisualization.setup(e,v),this.queuedVisualizations.forEach((e=>{m.registerVisualization(e)})),this.editorFrameSetup=m}start(e,t){var i,a;this.hasDiscoverAccess=e.application.capabilities.discover.show,this.dataViewsService=t.dataViews,t.uiActions.hasAction(c.ACTION_VISUALIZE_FIELD)&&t.uiActions.unregisterAction(c.ACTION_VISUALIZE_FIELD),t.uiActions.registerTrigger(O),t.uiActions.addTriggerAction(c.VISUALIZE_FIELD_TRIGGER,(a=e.application,Object(c.createAction)({type:c.ACTION_VISUALIZE_LENS_FIELD,id:c.ACTION_VISUALIZE_LENS_FIELD,getDisplayName:()=>l.i18n.translate("xpack.lens.discover.visualizeFieldLegend",{defaultMessage:"Visualize field"}),isCompatible:async()=>!!a.capabilities.visualize.show,execute:async e=>{a.navigateToApp("lens",{state:{type:c.ACTION_VISUALIZE_LENS_FIELD,payload:e}})}}))),t.uiActions.addTriggerAction(o.VISUALIZE_EDITOR_TRIGGER,(e=>Object(c.createAction)({type:o.ACTION_CONVERT_TO_LENS,id:o.ACTION_CONVERT_TO_LENS,getDisplayName:()=>l.i18n.translate("xpack.lens.visualizeTSVBLegend",{defaultMessage:"Visualize TSVB chart"}),isCompatible:async()=>!!e.capabilities.visualize.show,execute:async t=>{const n=Object.values(t.layers),i={...t,layers:n,isVisualizeAction:!0};e.navigateToApp("lens",{state:{type:o.ACTION_CONVERT_TO_LENS,payload:i,originatingApp:l.i18n.translate("xpack.lens.TSVBLabel",{defaultMessage:"TSVB"})}})}}))(e.application)),t.uiActions.addTriggerAction(o.DASHBOARD_VISUALIZATION_PANEL_TRIGGER,(e=>Object(c.createAction)({type:o.ACTION_CONVERT_TO_LENS,id:o.ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS,getDisplayName:()=>l.i18n.translate("xpack.lens.visualizeLegacyVisualizationChart",{defaultMessage:"Visualize legacy visualization chart"}),isCompatible:async()=>!!e.capabilities.visualize.show,execute:async t=>{const n=Object.values(t.layers),i={...t,layers:n,isVisualizeAction:!0};e.navigateToApp("lens",{state:{type:o.ACTION_CONVERT_TO_LENS,payload:i,originatingApp:l.i18n.translate("xpack.lens.dashboardLabel",{defaultMessage:"Dashboard"})}})}}))(e.application)),t.uiActions.addTriggerAction(o.AGG_BASED_VISUALIZATION_TRIGGER,(e=>Object(c.createAction)({type:o.ACTION_CONVERT_TO_LENS,id:o.ACTION_CONVERT_AGG_BASED_TO_LENS,getDisplayName:()=>l.i18n.translate("xpack.lens.visualizeAggBasedLegend",{defaultMessage:"Visualize agg based chart"}),isCompatible:async()=>!!e.capabilities.visualize.show,execute:async t=>{const n=Object.values(t.layers),i={...t,layers:n,isVisualizeAction:!0};e.navigateToApp("lens",{state:{type:o.ACTION_CONVERT_TO_LENS,payload:i,originatingApp:l.i18n.translate("xpack.lens.AggBasedLabel",{defaultMessage:"aggregation based visualization"})}})}}))(e.application));const s=new edit_action_ConfigureInLensPanelAction(t,e);t.uiActions.addTriggerAction("CONTEXT_MENU_TRIGGER",s);const d=new in_app_embeddable_edit_action_EditLensEmbeddableAction(t,e);t.uiActions.addTriggerAction(y,d);const g=new create_action_CreateESQLPanelAction(t,e);t.uiActions.addTriggerAction(c.ADD_PANEL_TRIGGER,g);const f=null===(i=t.share)||void 0===i?void 0:i.url.locators.get("DISCOVER_APP_LOCATOR");var h,_,m;return f&&t.uiActions.addTriggerAction(r.CONTEXT_MENU_TRIGGER,(h=f,_=t.dataViews,m=this.hasDiscoverAccess,Object(c.createAction)({type:p,id:p,order:19,getIconType:()=>"popout",getDisplayName:()=>l.i18n.translate("xpack.lens.action.exploreInDiscover",{defaultMessage:"Explore in Discover"}),getHref:async e=>{const{getHref:t}=await b();return t({locator:h,dataViews:_,hasDiscoverAccess:m,...e})},isCompatible:async e=>{const{isCompatible:t}=await b();return t({hasDiscoverAccess:m,locator:h,dataViews:_,embeddable:e.embeddable})},execute:async e=>{const{execute:t}=await b();return t({...e,locator:h,dataViews:_,hasDiscoverAccess:m})}}))),{EmbeddableComponent:I(0,t),SaveModalComponent:B(e,t),navigateToPrefilledEditor:(n,{openInNewTab:i=!1,originatingApp:a="",originatingPath:s,skipAppLeave:o=!1}={})=>{null!=n&&n.timeRange&&!i&&t.data.query.timefilter.timefilter.setTime(n.timeRange),new r.EmbeddableStateTransfer(e.application.navigateToApp,e.application.currentAppId$).navigateToEditor(u.APP_ID,{openInNewTab:i,path:Object(u.getEditPath)(void 0,i&&(null==n?void 0:n.timeRange)||void 0),state:{originatingApp:a,originatingPath:s,valueInput:n},skipAppLeave:o})},canUseEditor:()=>{var t;return Boolean(null===(t=e.application.capabilities.visualize)||void 0===t?void 0:t.show)},getXyVisTypes:async()=>{const{visualizationTypes:e}=await n.e(2).then(n.bind(null,111));return e},stateHelperApi:async()=>{const{createFormulaPublicApi:e,createChartInfoApi:i,suggestionsApi:a}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));this.editorFrameService||await this.initDependenciesForApi();const[s,r]=await Promise.all([this.editorFrameService.loadVisualizations(),this.editorFrameService.loadDatasources()]);return{formula:e(),chartInfo:i(t.dataViews,this.editorFrameService),suggestions:(e,t,n,i)=>a({datasourceMap:r,visualizationMap:s,context:e,dataView:t,excludedVisualizations:n,preferredChartType:i})}},EditLensConfigPanelApi:async()=>{const{getEditLensConfiguration:i}=await Promise.all([n.e(0),n.e(1),n.e(2),n.e(3)]).then(n.bind(null,682));this.editorFrameService||this.initDependenciesForApi();const[a,s]=await Promise.all([this.editorFrameService.loadVisualizations(),this.editorFrameService.loadDatasources()]);return await i(e,t,a,s)}}}stop(){}}var de=n(30),pe=n(31);const be=()=>new plugin_LensPlugin},function(e,t,n){n(42),__kbnBundles__.define("plugin/lens/public",n,40),__kbnBundles__.define("plugin/lens/common/constants",n,5)},function(e,t,n){n.p=window.__kbnPublicPath__.lens},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),a="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=a},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressionXY/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.ReactRedux},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressions/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReduxjsToolkit},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressionGauge/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.KbnEsqlAst},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/utils");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.Uuid},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/visualizations/common/constants");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressionGauge/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressionTagcloud/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressionMetricVis/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/eventAnnotation/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.KbnSearchErrors},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/textBasedLanguages/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.KbnCodeEditor},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}]);