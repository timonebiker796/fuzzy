/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.exploratoryView_bundle_jsonpfunction=window.exploratoryView_bundle_jsonpfunction||[]).push([[0,7,8],{108:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));var a=r(19),i=r.n(a),n=r(2),l=r(53),o=r(112),s=r(85),u=r.n(s),c=r(54),d=r.n(c),p=r(7);const f="eui-global",m="eui-utilities",b={darkMode:!1};var g=r(40);const y=[p.euiStylisPrefixer],h=d()({key:"css",stylisPlugins:y,container:document.querySelector('meta[name="emotion"]')}),v=d()({key:f,stylisPlugins:y,container:document.querySelector(`meta[name="${f}"]`)}),w=d()({key:m,stylisPlugins:y,container:document.querySelector(`meta[name="${m}"]`)});h.compat=!0,v.compat=!0,w.compat=!0;const x={default:h,global:v,utility:w},E=({theme:{theme$:e},globalStyles:t,colorMode:r,modify:a,children:i})=>{const l=u()(e,b),o=Object(n.useMemo)((()=>(e=>e.darkMode?p.COLOR_MODES_STANDARD.dark:p.COLOR_MODES_STANDARD.light)(l)),[l]),s=r||o,c=!1!==t&&void 0;return Object(g.jsx)(p.EuiProvider,{cache:x,modify:a,colorMode:s,globalStyles:c,utilityClasses:c},i)},C=({children:e,i18n:t,...r})=>Object(l.useIsNestedEuiProvider)()?(Object(o.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(g.jsx)(t.Context,null,e)):Object(g.jsx)(E,r,Object(g.jsx)(t.Context,null,e));var k=r(55);const S=({children:e,...t})=>Object(g.jsx)(C,i()({globalStyles:!1},t),Object(g.jsx)(k.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(g.jsx)(k.KibanaErrorBoundary,null,e)))},109:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var a=r(7),i=r(0),n=r(2),l=r.n(n),o=r(18),s=r(44),u=r.n(s),c=r(108),d=r(40);const p=(e,t)=>r=>(u.a.render(Object(d.jsx)(c.a,t,e),r),()=>u.a.unmountComponentAtNode(r));r(9),n.Component;var f=r(49),m=r(8),b=r(50);const g=({lensAttributes:e,getToastText:t,timeRange:r,appId:a,owner:l=m.observabilityFeatureId})=>{const[s,u]=Object(n.useState)(!1),[c,d]=Object(n.useState)(!1),{http:p,application:{navigateToApp:g},notifications:{toasts:y},storage:h}=Object(o.useKibana)().services,v=Object(n.useCallback)((n=>{n&&e?(d(!1),u(!0),async function(e,t,r,a,i){const n=`/api/cases/${null==t?void 0:t.id}/comments`,l={persistableStateAttachmentState:{attributes:r,timeRange:a},persistableStateAttachmentTypeId:b.LENS_ATTACHMENT_TYPE,type:b.AttachmentType.persistableState,owner:null!=i?i:m.observabilityFeatureId};return e.post(n,{body:JSON.stringify(l)})}(p,n,e,r,l).then((()=>{u(!1),y.addSuccess({title:i.i18n.translate("xpack.exploratoryView.expView.heading.addToCase.notification",{defaultMessage:"Successfully added visualization to the case: {caseTitle}",values:{caseTitle:n.title}}),text:t(n)},{toastLifeTimeMs:1e4})}),(e=>{y.addError(e,{title:i.i18n.translate("xpack.exploratoryView.expView.heading.addToCase.notification.error",{defaultMessage:"Failed to add visualization to the selected case."})})}))):(null==h||h.set(f.DRAFT_COMMENT_STORAGE_ID,{commentId:"description",comment:`!{lens${JSON.stringify({timeRange:r,attributes:e})}}`,position:"",caseTitle:"",caseTags:""}),g(null!=a?a:m.observabilityFeatureId,{deepLinkId:f.CasesDeepLinkId.casesCreate,openInNewTab:!0}))}),[a,t,p,e,g,l,h,r,y]);return{onCaseClicked:v,isSaving:s,isCasesOpen:c,setIsCasesOpen:d}};var y=r(68);function h({autoOpen:e,lensAttributes:t,owner:r=m.observabilityFeatureId,setAutoOpen:s,timeRange:u}){var c,d;const b=Object(o.useKibana)().services,h=b.cases.helpers.canUseCases([m.observabilityFeatureId]),{cases:w,application:{getUrlForApp:x}}=b,E=Object(n.useCallback)((e=>p(l.a.createElement(v,{linkUrl:x(m.observabilityFeatureId,{deepLinkId:f.CasesDeepLinkId.cases,path:Object(f.generateCaseViewPath)({detailName:e.id})})}),b)),[x,b]),C=Object(y.b)(u.from),k=Object(y.b)(u.to,{roundUp:!0}),{onCaseClicked:S,isCasesOpen:T,setIsCasesOpen:F,isSaving:O}=g({lensAttributes:t,getToastText:E,timeRange:{from:null!==(c=null==C?void 0:C.toISOString())&&void 0!==c?c:"",to:null!==(d=null==k?void 0:k.toISOString())&&void 0!==d?d:""},appId:m.observabilityFeatureId,owner:r}),j={permissions:h,onRowClick:S,owner:[r],onClose:()=>{F(!1)}};return Object(n.useEffect)((()=>{e&&F(!0)}),[e,F]),Object(n.useEffect)((()=>{T||null==s||s(!1)}),[T,s]),l.a.createElement(l.a.Fragment,null,void 0===e&&l.a.createElement(a.EuiButtonEmpty,{"data-test-subj":"o11yAddToCaseActionAddToCaseButton",size:"s",isLoading:O,isDisabled:null===t,onClick:()=>{t&&F(!0)}},i.i18n.translate("xpack.exploratoryView.expView.heading.addToCase",{defaultMessage:"Add to case"})),T&&t&&w.ui.getAllCasesSelectorModal(j))}function v({linkUrl:e}){return l.a.createElement(a.EuiFlexGroup,{justifyContent:"center"},l.a.createElement(a.EuiFlexItem,null,l.a.createElement(a.EuiLink,{"data-test-subj":"o11yCaseToastTextViewCaseLink",href:e,target:"_blank"},i.i18n.translate("xpack.exploratoryView.expView.heading.addToCase.notification.viewCase",{defaultMessage:"View case"}))))}},110:function(e,t,r){"use strict";r.r(t),r.d(t,"formatOptions",(function(){return p})),r.d(t,"SelectableUrlList",(function(){return f}));var a=r(2),i=r.n(a),n=r(7),l=r(0),o=r(75),s=r.n(o),u=r(48),c=r.n(u);const d={filterByUrl:l.i18n.translate("xpack.exploratoryView.filters.filterByUrl",{defaultMessage:"Filter by URL"}),getSearchResultsLabel:e=>l.i18n.translate("xpack.exploratoryView.filters.searchResults",{defaultMessage:"{total} Search results",values:{total:e}}),topPages:l.i18n.translate("xpack.exploratoryView.filters.topPages",{defaultMessage:"Top pages"}),select:l.i18n.translate("xpack.exploratoryView.filters.select",{defaultMessage:"Select"}),url:l.i18n.translate("xpack.exploratoryView.filters.url",{defaultMessage:"Url"}),loadingResults:l.i18n.translate("xpack.exploratoryView.filters.url.loadingResults",{defaultMessage:"Loading results"}),noResults:l.i18n.translate("xpack.exploratoryView.filters.url.noResults",{defaultMessage:"No results available"})},p=e=>e.map((e=>({title:e.label,...e,className:c()("euiSelectableTemplateSitewide__listItem",e.className)})));function f({data:e,loading:t,onInputChange:r,onSelectionChange:o,onSelectionApply:u,searchValue:c,popoverIsOpen:f,setPopoverIsOpen:m,initialValue:b,renderOption:g,rowHeight:y,hasChanged:h}){var v,w;const[x,E]=Object(a.useState)(null),C=Object(a.useRef)(null),k=p(null!==(v=e.items)&&void 0!==v?v:[]),S=()=>{m(!1)};s()("keydown",(e=>{"enter"===e.key.toLowerCase()&&(u(),m(!1))}),x),s()("escape",(()=>m(!1)),x);const T=i.a.createElement(n.EuiSelectableMessage,{style:{minHeight:300}},i.a.createElement(n.EuiLoadingSpinner,{size:"l"}),i.a.createElement("br",null),i.a.createElement("p",null,d.loadingResults)),F=i.a.createElement(n.EuiSelectableMessage,{style:{minHeight:300}},i.a.createElement("p",null,d.noResults)),O=c?d.getSearchResultsLabel(null!==(w=null==e?void 0:e.total)&&void 0!==w?w:0):d.topPages;function j(){return i.a.createElement(n.EuiPopoverTitle,{paddingSize:"s"},i.a.createElement(n.EuiFlexGroup,{ref:C,gutterSize:"xs"},i.a.createElement(n.EuiFlexItem,{style:{justifyContent:"center"}},t?i.a.createElement(n.EuiLoadingSpinner,null):O),i.a.createElement(n.EuiFlexItem,{grow:!1},i.a.createElement(n.EuiButtonIcon,{"data-test-subj":"exploratoryViewPopOverTitleButton",color:"text",onClick:()=>S(),"aria-label":l.i18n.translate("xpack.exploratoryView.search.url.close",{defaultMessage:"Close"}),iconType:"cross"}))))}return i.a.createElement(n.EuiSelectable,{searchable:!0,onChange:o,options:c!==(null==x?void 0:x.value)?[]:k,renderOption:g,singleSelection:!1,searchProps:{value:c,isClearable:!0,onClick:e=>{m(!0),x&&x.focus()},onInput:e=>{r(e.target.value),m(!0)},inputRef:E,placeholder:d.filterByUrl,"aria-label":d.filterByUrl},listProps:{rowHeight:y,showIcons:!0,onFocusBadge:!1},loadingMessage:T,emptyMessage:F,noMatchesMessage:F,allowExclusions:!0,isPreFiltered:c!==(null==x?void 0:x.value)},((e,t)=>{var r;return i.a.createElement(n.EuiPopover,{panelPaddingSize:"none",isOpen:f,display:"block",button:t,closePopover:S,style:{minWidth:400},anchorPosition:"downLeft",ownFocus:!1},i.a.createElement("div",{style:{width:null!==(r=null==x?void 0:x.getBoundingClientRect().width)&&void 0!==r?r:600,maxWidth:"100%"}},i.a.createElement(j,null),e,i.a.createElement(n.EuiPopoverFooter,{paddingSize:"s"},i.a.createElement(n.EuiFlexGroup,{style:{justifyContent:"flex-end"}},i.a.createElement(n.EuiFlexItem,{grow:!1},i.a.createElement(n.EuiButton,{"data-test-subj":"o11ySelectableUrlListApplyButton",fill:!0,size:"s",onClick:()=>{u(),S()},isDisabled:!h()},l.i18n.translate("xpack.exploratoryView.apply.label",{defaultMessage:"Apply"})))))))}))}t.default=f},111:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),i="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=i},112:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var a=void 0;t.setEuiDevProviderWarning=function(e){return a=e},t.getEuiDevProviderWarning=function(){return a},t.emitEuiProviderWarning=function(e){if("function"==typeof a)return a(e);switch(a){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},116:function(e,t,r){e.exports=r(21)(1453)},117:function(e,t,r){e.exports=r(21)(3099)},118:function(e,t,r){e.exports=r(21)(3101)},119:function(e,t,r){e.exports=r(21)(3100)},164:function(e,t,r){"use strict";r.r(t),r.d(t,"ExploratoryViewPage",(function(){return cr})),r.d(t,"DataTypes",(function(){return sr.a}));var a=r(2),i=r.n(a),n=r(0),l=r(41),o=r(12),s=r(8),u=r(19),c=r.n(u),d=r(14),p=r.n(d),f=r(7),m=r(18);const b=()=>Object(m.useKibana)();var g=r(60),y=r(84),h=r(62),v=r(91),w=r(22),x=r(89),E=r(64);const C="SELECT_REPORT_TYPE",k={reportType:C,label:n.i18n.translate("xpack.exploratoryView.expView.reportType.selectLabel",{defaultMessage:"Select report type"})};function S({prepend:e}){const{setReportType:t,reportType:r,allSeries:a}=Object(g.f)(),{reportTypes:n}=Object(E.b)(),l=[k,...n].filter((({reportType:e})=>!r||e!==C)).map((({reportType:e,label:t})=>({value:e,inputDisplay:e===C?t:i.a.createElement("strong",null,t),dropdownDisplay:t})));return i.a.createElement(f.EuiSuperSelect,{"aria-labelledby":"report-type-label",options:l,valueOfSelected:null!=r?r:C,onChange:e=>{t(e)},style:{minWidth:200},isInvalid:!r&&a.length>0,disabled:a.length>0,prepend:e})}var T=r(20);function F(e){const t=(r=e,Object(T.pickBy)(r,(e=>void 0!==e)));var r;return Object.entries(t).forEach((([e,r])=>{"object"==typeof r&&(t[e]=F(r))})),t}function O({onApply:e}){var t,r;const{allSeries:a,storage:l,applyChanges:o,reportType:s}=Object(g.f)(),u=Object(g.d)(null!==(t=l.get(g.c))&&void 0!==t?t:[]),c=null!==(r=l.get(g.e))&&void 0!==r?r:"";let d=a.length===u.length&&s===c;return d&&(d=!a.some(((e,t)=>!Object(T.isEqual)(F(e),F(u[t]))))),i.a.createElement(f.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiButton,{onClick:()=>o(e),isDisabled:d,fill:!0,"data-test-subj":"seriesChangesApplyButton"},n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.apply",{defaultMessage:"Apply changes"}))))}var j=r(63),I=r(6);const V=({series:e,seriesConfig:t})=>{var r;const i=Object(m.useKibana)().services,{application:{navigateToUrl:n}}=i,{dataViews:l}=Object(h.b)(),o=null===(r=i.discover)||void 0===r?void 0:r.locator,[s,u]=Object(a.useState)("");Object(a.useEffect)((()=>{const r=null==l?void 0:l[e.dataType];if(r){var a,i;const n=null!==(a=e.reportDefinitions)&&void 0!==a?a:{},l=(null!==(i=e.filters)&&void 0!==i?i:[]).concat(Object(y.a)(n)),s=Object(j.e)({dataView:r,urlFilters:l,initFilters:null==t?void 0:t.baseFilters}),c=e.selectedMetricField;c&&c!==I.k&&c!==I.l&&s.push(Object(j.a)(c,r)[0]),(async()=>{if(!o)return;const e=await o.getUrl({filters:s,indexPatternId:null==r?void 0:r.id});u(e)})()}}),[l,e.dataType,e.filters,e.reportDefinitions,e.selectedMetricField,null==t?void 0:t.baseFilters,o]);const c=Object(a.useCallback)((e=>{if(s)return e.preventDefault(),n(s)}),[s,n]);return{href:s,onClick:c}};function M({seriesId:e,series:t,seriesConfig:r,onEditClick:n}){const{setSeries:l,removeSeries:o,allSeries:s}=Object(g.f)(),[u,c]=Object(a.useState)(!1),{href:d}=V({series:t,seriesConfig:r}),{dataViews:p}=Object(h.b)(),m=null==p?void 0:p[t.dataType],b=0===e&&s.length>1,y=Object(a.useCallback)((()=>{c(!1)}),[c]),v=Object(a.useCallback)((()=>{o(e),y()}),[o,e,y]),w=Object(a.useCallback)((()=>{c(!u)}),[c,u]),x=i.a.createElement(f.EuiButtonIcon,{"data-test-subj":"exploratoryViewSeriesActionsButton",iconType:"boxesHorizontal",onClick:w,color:"text","aria-label":B});return i.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"flexEnd",responsive:!1},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiToolTip,{content:A},i.a.createElement(f.EuiButtonIcon,{iconType:"pencil",color:"text","aria-label":A,size:"s",onClick:n,"data-test-subj":`editSeries${e}`}))),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiPopover,{button:x,isOpen:u,closePopover:y,panelPaddingSize:"none",anchorPosition:"downLeft"},i.a.createElement(f.EuiContextMenuPanel,{"aria-label":$,items:[i.a.createElement(f.EuiContextMenuItem,{key:"viewSampleDocuments",icon:"discoverApp",href:d,"aria-label":z,disabled:!t.dataType||!t.selectedMetricField||!m,target:"_blank"},z),i.a.createElement(f.EuiContextMenuItem,{key:"hideSeries",icon:t.hidden?"eye":"eyeClosed",onClick:()=>{t.hidden?l(e,{...t,hidden:void 0}):l(e,{...t,hidden:!0}),y()},"aria-label":t.hidden?L:D},t.hidden?L:D),i.a.createElement(f.EuiContextMenuItem,{key:"copySeries",icon:"copy",onClick:()=>{let e=`${t.name}-copy`;s.find((({name:t})=>t===e))&&(e+=s.length),l(s.length,{...t,name:e,breakdown:void 0}),y()},"aria-label":P},P),i.a.createElement(f.EuiContextMenuItem,{key:"deleteSeries",icon:"trash",onClick:v,"aria-label":R,disabled:b,toolTipContent:b?_:""},R)]}))))}const A=n.i18n.translate("xpack.exploratoryView.seriesEditor.edit",{defaultMessage:"Edit series"}),D=n.i18n.translate("xpack.exploratoryView.seriesEditor.hide",{defaultMessage:"Hide series"}),L=n.i18n.translate("xpack.exploratoryView.seriesEditor.show",{defaultMessage:"Show series"}),P=n.i18n.translate("xpack.exploratoryView.seriesEditor.clone",{defaultMessage:"Duplicate series"}),R=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.removeSeries",{defaultMessage:"Remove series"}),_=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.removeSeriesDisabled",{defaultMessage:"Main series cannot be removed. Please remove all series below before you can remove this."}),z=n.i18n.translate("xpack.exploratoryView.seriesEditor.sampleDocuments",{defaultMessage:"View transaction in Discover"}),B=n.i18n.translate("xpack.exploratoryView.seriesEditor.popoverButtonLabel",{defaultMessage:"View series actions"}),$=n.i18n.translate("xpack.exploratoryView.seriesEditor.actionsAriaContextLabel",{defaultMessage:"Series actions list"});function N({seriesId:e,series:t}){var r;const n=Object(s.useTheme)(),{setSeries:l}=Object(g.f)(),[o,u]=Object(a.useState)(!1),c=null!==(r=t.color)&&void 0!==r?r:n.eui[`euiColorVis${e}`],d=i.a.createElement(f.EuiToolTip,{content:q},i.a.createElement(f.EuiButtonEmpty,{"data-test-subj":"o11ySeriesColorPickerButton",size:"s",onClick:()=>u((e=>!e)),flush:"both"},i.a.createElement(f.EuiIcon,{type:"stopFilled",size:"l",color:c})));return i.a.createElement(f.EuiPopover,{button:d,isOpen:o,closePopover:()=>u(!1)},i.a.createElement(f.EuiFormRow,{label:W},i.a.createElement(f.EuiColorPicker,{onChange:r=>{l(e,{...t,color:r})},color:c})))}const W=n.i18n.translate("xpack.exploratoryView.pickColor",{defaultMessage:"Pick a color"}),q=n.i18n.translate("xpack.exploratoryView.editSeriesColor",{defaultMessage:"Edit color for series"}),U=n.i18n.translate("xpack.exploratoryView.expView.chartTypes.label",{defaultMessage:"Chart type"});function H({seriesId:e,series:t,defaultChartType:r}){var a;const{setSeries:n}=Object(g.f)(),l=null!==(a=null==t?void 0:t.seriesType)&&void 0!==a?a:r;return i.a.createElement(G,{onChange:r=>{n(e,{...t,seriesType:r})},value:l,excludeChartTypes:["bar_percentage_stacked"],includeChartTypes:["bar","bar_horizontal","line","area","bar_stacked","area_stacked","bar_horizontal_percentage_stacked"],label:U})}function G({onChange:e,value:t,includeChartTypes:r,excludeChartTypes:a}){var n;const{services:{lens:l}}=Object(m.useKibana)(),{data:o=[],loading:u}=Object(s.useFetcher)((()=>l.getXyVisTypes()),[l]);let c=o;(null!=a?a:[]).length>0&&(c=c.filter((({id:e})=>!(null!=a&&a.includes(e))))),(null!=r?r:[]).length>0&&(c=c.filter((({id:e})=>null==r?void 0:r.includes(e))));const d=(null!==(n=c)&&void 0!==n?n:[]).map((({id:e,fullLabel:t,label:r,icon:a})=>{const n=i.a.createElement(f.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiIcon,{type:a})),i.a.createElement(f.EuiFlexItem,null,t||r));return{value:e,inputDisplay:n,dropdownDisplay:n}}));return i.a.createElement(f.EuiFormRow,{label:U,style:{minWidth:280}},i.a.createElement(f.EuiSuperSelect,{fullWidth:!0,valueOfSelected:t,isLoading:u,options:d,onChange:e}))}function K({seriesId:e,series:t,seriesConfig:r}){var n,l,o;const u=null!==(n=null==t?void 0:t.seriesType)&&void 0!==n?n:r.defaultSeriesType,{services:{lens:c}}=Object(m.useKibana)(),{data:d=[]}=Object(s.useFetcher)((()=>c.getXyVisTypes()),[c]),p=null===(l=(null!=d?d:[]).find((({id:e})=>e===u)))||void 0===l?void 0:l.icon,[b,g]=Object(a.useState)(!1);return i.a.createElement(f.EuiPopover,{isOpen:b,closePopover:()=>g(!1),button:i.a.createElement(f.EuiToolTip,{content:Y},i.a.createElement(f.EuiButtonEmpty,{"data-test-subj":"o11ySeriesChartTypesButton",size:"s","aria-label":Q,onClick:()=>g((e=>!e)),flush:"both"},p&&i.a.createElement(f.EuiIcon,{type:null===(o=(null!=d?d:[]).find((({id:e})=>e===u)))||void 0===o?void 0:o.icon,size:"l"})))},i.a.createElement(H,{seriesId:e,series:t,defaultChartType:r.defaultSeriesType}))}const Y=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.editChartSeriesLabel",{defaultMessage:"Edit chart type for series"}),Q=n.i18n.translate("xpack.exploratoryView.expView.chartTypes.label",{defaultMessage:"Chart type"});function J({seriesId:e,series:t,seriesConfig:r}){return r?i.a.createElement(f.EuiFlexGroup,{gutterSize:"s",responsive:!1},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(K,{seriesId:e,series:t,seriesConfig:r})),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(N,{seriesId:e,series:t}))):null}const X="SELECT_DATA_TYPE";function Z({seriesId:e,series:t}){const{setSeries:r,reportType:n}=Object(g.f)(),[l,o]=Object(a.useState)(!1),s=Object(a.useCallback)((e=>{null==e||e.focus()}),[]),{dataTypes:u,reportConfigMap:c}=Object(E.b)(),d=u.filter((({id:e})=>{var t;return null===(t=c[e])||void 0===t?void 0:t.find((e=>e({}).reportType===n))})).map((({id:e,label:t})=>({value:e,inputDisplay:t}))),p=u.find((e=>e.id===t.dataType));return i.a.createElement(i.a.Fragment,null,!t.dataType&&i.a.createElement(f.EuiPopover,{button:i.a.createElement(f.EuiButton,{"data-test-subj":"o11yDataTypesSelectButton",iconType:"plusInCircle",onClick:()=>o((e=>!e)),fill:!0,size:"s",buttonRef:s},ee),isOpen:l,closePopover:()=>o((e=>!e))},i.a.createElement(f.EuiListGroup,null,d.map((a=>i.a.createElement(f.EuiListGroupItem,{key:a.value,onClick:()=>{return i=a.value,void(String(i)!==X&&r(e,{dataType:i,time:t.time,name:`${i}-series-${e+1}`}));var i},label:a.inputDisplay}))))),t.dataType&&i.a.createElement(f.EuiToolTip,{position:"top",content:te},i.a.createElement(f.EuiBadge,null,null==p?void 0:p.label)))}const ee=n.i18n.translate("xpack.exploratoryView.selectDataType",{defaultMessage:"Select data type"}),te=n.i18n.translate("xpack.exploratoryView.selectDataTypeTooltip",{defaultMessage:"Data type cannot be edited."});function re({seriesConfig:e,series:t}){var r;const{loading:a}=Object(h.b)();if(!e)return null;const{dataType:l,reportDefinitions:o,selectedMetricField:s}=t,{definitionFields:u,labels:c}=e,d=(!l||Object(T.isEmpty)(o)||!s)&&!a,p=Object(T.isEmpty)(o)?n.i18n.translate("xpack.exploratoryView.missingReportDefinition",{defaultMessage:"Missing {reportDefinition}",values:{reportDefinition:null==c?void 0:c["string"==typeof u[0]?u[0]:null===(r=u[0])||void 0===r?void 0:r.field]}}):"";let m=s?p:ae;return l||(m=ie),d?i.a.createElement(f.EuiBadge,{color:"warning"},m):null}const ae=n.i18n.translate("xpack.exploratoryView.missingReportMetric",{defaultMessage:"Missing report metric"}),ie=n.i18n.translate("xpack.exploratoryView.missingDataType",{defaultMessage:"Missing data type"});var ne=r(5);function le({singleSelection:e,keepHistory:t,series:r,field:n,seriesConfig:l,onChange:o,filters:u}){var c;const{dataView:d}=Object(h.b)(r.dataType),p="string"==typeof n?n:n.field,{reportDefinitions:f={}}=r,{labels:m,baseFilters:b,definitionFields:g}=l,y=Object(a.useMemo)((()=>{const e=[];return(null!=b?b:[]).concat(null!=u?u:[]).forEach((t=>{t.query&&e.push(t.query);const r=t;r.query.exists&&e.push({exists:r.query.exists})})),Object(T.isEmpty)(f)||g.forEach((t=>{const r="string"==typeof t?t:t.field;if(d&&null!=f&&f[r]&&r!==p){const t=null==f?void 0:f[r];if(!t.includes(ne.a)){const a=Object(j.c)(r,t,d)[0];a.query&&e.push(a.query)}}})),e}),[JSON.stringify(f),JSON.stringify(b)]);return d?i.a.createElement(s.FieldValueSuggestions,{label:null!==(c=m[p])&&void 0!==c?c:p,sourceField:p,dataViewTitle:d.title,selectedValue:null==f?void 0:f[p],onChange:e=>o(p,e),filters:y,time:r.time,fullWidth:!0,asCombobox:!0,allowExclusions:!1,allowAllValuesSelection:!0,usePrependLabel:!1,compressed:!1,required:Object(T.isEmpty)(f),singleSelection:e,keepHistory:t}):null}function oe({series:e,field:t,seriesConfig:r,onChange:a}){var l;const{textReportDefinitions:o={}}=e,{labels:s}=r,u=null!==(l=s[t])&&void 0!==l?l:t;return i.a.createElement(f.EuiFormRow,{label:u},i.a.createElement(f.EuiFieldText,{"data-test-subj":"o11yTextReportDefinitionFieldFieldText",placeholder:n.i18n.translate("xpack.exploratoryView.textDefinitionField.placeholder.search",{defaultMessage:"Search {label}",values:{label:u}}),value:null==o?void 0:o[t],onChange:e=>a(t,e.target.value),compressed:!1}))}var se=r(74),ue=r(3);function ce({seriesId:e,series:t,seriesConfig:r}){const{setSeries:a}=Object(g.f)(),{reportDefinitions:n={},textReportDefinitions:l={}}=t,{definitionFields:o,textDefinitionFields:s}=r,u=(r,i)=>{null!=i&&i[0]?a(e,{...t,reportDefinitions:{...n,[r]:i}}):(delete n[r],a(e,{...t,reportDefinitions:{...n}}))},c=(r,i)=>{Object(T.isEmpty)(i)?(delete l[r],a(e,{...t,textReportDefinitions:{...l}})):a(e,{...t,textReportDefinitions:{...l,[r]:i}})};return i.a.createElement(f.EuiFlexGroup,{gutterSize:"s"},o.map((l=>{var o;const s="string"==typeof l?l:l.field,c="string"!=typeof l&&l.singleSelection,d="string"!=typeof l&&l.nested,p="string"!=typeof l?l.filters:void 0,m=!Object(se.b)(t.selectedMetricField),b=d===ue.o&&m;let g;return b&&d&&(null===(o=n[d])||void 0===o?void 0:o.length)>0&&a(e,{...t,reportDefinitions:{...n,[d]:[]}}),d&&(e=>{var r;return!Object(T.isEmpty)(null===(r=t.reportDefinitions)||void 0===r?void 0:r[e])})(s)&&!b&&(g=i.a.createElement(f.EuiFlexItem,{key:d,grow:1},i.a.createElement(le,{seriesId:e,series:t,seriesConfig:r,field:d,onChange:u,keepHistory:!1,singleSelection:c}))),i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexItem,{key:s,grow:1},i.a.createElement(le,{seriesId:e,series:t,seriesConfig:r,field:s,onChange:u,singleSelection:c,filters:p})),g)})),null==s?void 0:s.map((a=>i.a.createElement(f.EuiFlexItem,{key:a,grow:1},i.a.createElement(oe,{seriesId:e,series:t,seriesConfig:r,field:a,onChange:c})))))}var de=r(90),pe=r(71),fe=r(42);function me({field:e,series:t,baseFilters:r,label:a},i){var n;const{dataViews:l}=Object(h.b)(t.dataType),o=[];return null==r||r.forEach((e=>{e.query&&o.push(e.query),Object(fe.isExistsFilter)(e)&&o.push({exists:e.query.exists})})),Object(s.useValuesList)({query:i,label:null!=a?a:e,sourceField:e,time:t.time,keepHistory:!0,filters:o,dataViewTitle:null===(n=l[t.dataType])||void 0===n?void 0:n.title})}const be=({seriesId:e,series:t})=>{var r;const{setSeries:a}=Object(g.f)(),i=null!==(r=t.filters)&&void 0!==r?r:[],n=({field:r,values:n,notValues:l,wildcards:o,notWildcards:s})=>{var u;const c=null!==(u=i.find((({field:e})=>r===e)))&&void 0!==u?u:{field:r};c.notValues=l.length>0?l:void 0,c.values=n.length>0?n:void 0,c.wildcards=o,c.notWildcards=s;const d=i.filter((({field:e})=>e!==r));Object(T.concat)(n,l,o,s).length>0?a(e,{...t,filters:[...d,c]}):a(e,{...t,filters:d})},l=({field:e,value:t,negate:r,wildcards:a})=>{var l,o,s;const u=null!==(l=i.find((({field:t})=>e===t)))&&void 0!==l?l:{field:e},c=null!==(o=u.notValues)&&void 0!==o?o:[],d=null!==(s=u.values)&&void 0!==s?s:[],p=c.filter((e=>t instanceof Array?!t.includes(e):e!==t)),f=d.filter((e=>t instanceof Array?!t.includes(e):e!==t));r?t instanceof Array?p.push(...t):p.push(t):t instanceof Array?f.push(...t):f.push(t),n({field:e,values:f,notValues:p,wildcards:a})};return{invertFilter:({field:e,value:t,negate:r})=>{l({field:e,value:t,negate:!r})},setFilter:({field:r,value:n,negate:o,wildcards:s})=>{i.find((({field:e})=>r===e))?l({field:r,value:n,negate:o,wildcards:s}):(({field:r,value:n,negate:l})=>{const o={field:r};l?o.notValues=n instanceof Array?n:[n]:o.values=n instanceof Array?n:[n],0===i.length?a(e,{...t,filters:[o]}):a(e,{...t,filters:[o,...i.filter((e=>e.field!==r))]})})({field:r,value:n,negate:o,wildcards:s})},removeFilter:({field:r,value:n,negate:l,isWildcard:o})=>{const s=i.map((e=>{if(e.field===r){if(l){var t;if(o){var a;const t=null===(a=e.notWildcards)||void 0===a?void 0:a.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,notWildcards:t}}const r=null===(t=e.notValues)||void 0===t?void 0:t.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,notValues:r}}{var i;if(o){var s;const t=null===(s=e.wildcards)||void 0===s?void 0:s.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,wildcards:t}}const t=null===(i=e.values)||void 0===i?void 0:i.filter((e=>n instanceof Array?!n.includes(e):e!==n));return{...e,values:t}}}return e})).filter((({values:e=[],notValues:t=[],wildcards:r=[],notWildcards:a=[]})=>e.length>0||t.length>0||r.length>0||a.length>0));a(e,{...t,filters:s})},replaceFilter:n,setFiltersWildcard:({field:r,wildcards:l})=>{let o=i.find((({field:e})=>r===e));var s,u;o?n({field:r,values:null!==(s=o.values)&&void 0!==s?s:[],notValues:null!==(u=o.notValues)&&void 0!==u?u:[],wildcards:l}):(o={field:r,wildcards:l},0===i.length?a(e,{...t,filters:[o]}):a(e,{...t,filters:[o,...i.filter((e=>e.field!==r))]}))}}};function ge({isNestedOpen:e,setIsNestedOpen:t,value:r,field:l,negate:o,seriesId:u,series:c,nestedField:d,allSelectedValues:p}){var f;const{dataViews:m}=Object(h.b)(c.dataType),{setFilter:b,removeFilter:g}=be({seriesId:u,series:c}),y=(null!=p?p:[]).includes(r),v=i.a.createElement(ye,{hasActiveFilters:y,color:o?"danger":"primary",onClick:()=>{y?g({field:l,value:r,negate:o}):b({field:l,value:r,negate:o}),t(y?{value:"",negate:o}:{value:r,negate:o})}},o?n.i18n.translate("xpack.exploratoryView.expView.filterValueButton.negate",{defaultMessage:"Not {value}",values:{value:r}}):r),w=(null==e?void 0:e.value)===r&&e.negate===o,x=Object(a.useMemo)((()=>[{term:{[l]:r}}]),[l,r]);return d&&w?i.a.createElement(s.FieldValueSuggestions,{button:v,label:n.i18n.translate("xpack.exploratoryView.filterValueButton.fieldValueSuggestions.versionLabel",{defaultMessage:"Version"}),sourceField:d,onChange:e=>{(null!=e?e:[]).forEach((e=>{b({field:d,value:e})})),t({value:"",negate:o})},filters:x,forceOpen:w,anchorPosition:"rightCenter",time:c.time,asCombobox:!1,dataViewTitle:null===(f=m[c.dataType])||void 0===f?void 0:f.title}):v}const ye=Object(w.euiStyled)(f.EuiFilterButton)`
  background-color: rgba(${e=>{const t=e.hasActiveFilters?"danger"===e.color?Object(f.hexToRgb)(e.theme.eui.euiColorDanger):Object(f.hexToRgb)(e.theme.eui.euiColorPrimary):"initial";return`${t[0]}, ${t[1]}, ${t[2]}, 0.1`}});
`;function he({field:e,values:t,query:r,setQuery:n,label:l,loading:o,isNegated:s,nestedField:u,series:d,seriesId:p}){var m;const[b,g]=Object(a.useState)({value:"",negate:!1}),y=Object(T.map)(t,"label").filter((e=>e.toLowerCase().includes(r.toLowerCase()))),h=(null!==(m=null==d?void 0:d.filters)&&void 0!==m?m:[]).find((({field:t})=>e===t)),v={field:e,nestedField:u,seriesId:p,series:d,isNestedOpen:b,setIsNestedOpen:g};return i.a.createElement(Ee,null,i.a.createElement(f.EuiFieldSearch,{"data-test-subj":"o11yFilterValuesListFieldSearch",fullWidth:!0,isLoading:o,value:r,onChange:e=>{n(e.target.value)},placeholder:we(l)}),i.a.createElement(f.EuiSpacer,{size:"s"}),i.a.createElement(xe,null,o&&i.a.createElement("div",{className:"eui-textCenter"},i.a.createElement(f.EuiProgress,{size:"xs",color:"primary",position:"absolute",style:{top:"initial"}})),0===y.length&&!o&&i.a.createElement(f.EuiText,{className:"eui-textCenter"},ve),y.map((e=>i.a.createElement(a.Fragment,{key:e},i.a.createElement(f.EuiFilterGroup,{fullWidth:!0,color:"primary"},!1!==s&&i.a.createElement(ge,c()({},v,{value:e,negate:!0,allSelectedValues:null==h?void 0:h.notValues})),i.a.createElement(ge,c()({},v,{value:e,negate:!1,allSelectedValues:null==h?void 0:h.values}))),i.a.createElement(f.EuiSpacer,{size:"s"}))))))}const ve=n.i18n.translate("xpack.exploratoryView.filters.expanded.noFilter",{defaultMessage:"No filters found."}),we=e=>n.i18n.translate("xpack.exploratoryView.filters.expanded.search",{defaultMessage:"Search for {label}",values:{label:e}}),xe=w.euiStyled.div`
  height: 370px;
  overflow-y: auto;
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(v.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,Ee=p.a.div.withConfig({displayName:"Wrapper",componentId:"sc-5lxi6c-0"})(["width:400px;"]);function Ce(e){const[t,r]=Object(a.useState)(!1),[n,l]=Object(a.useState)(""),{values:o,loading:s}=me(e,n);return i.a.createElement(f.EuiPopover,{button:i.a.createElement(f.EuiFilterButton,{onClick:()=>r((e=>!e)),iconType:"arrowDown"},e.label),isOpen:t,closePopover:()=>r(!1)},i.a.createElement(he,c()({},e,{setQuery:l,query:n,values:o,loading:s})))}var ke=r(23),Se=r(92);function Te({label:e,seriesId:t,series:r,field:a,value:n,negate:l,dataView:o,removeFilter:s,definitionFilter:u}){const{invertFilter:c}=be({seriesId:t,series:r});return o?i.a.createElement(Se.FilterValueLabel,{dataView:o,removeFilter:s,invertFilter:e=>{u||c(e)},field:a,value:n,negate:l,label:e}):null}function Fe({seriesId:e,series:t,seriesConfig:r}){var l,o;const{setSeries:s}=Object(g.f)(),{labels:u}=r,d=null!==(l=t.filters)&&void 0!==l?l:[],{removeFilter:p,replaceFilter:m}=be({seriesId:e,series:t}),{dataView:b}=Object(h.b)(t.dataType);if(0===d.length||!b)return null;const y={seriesId:e,series:t,dataView:b};return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexGroup,{wrap:!0,gutterSize:"xs",alignItems:"center"},d.map((({field:e,values:t=[],notValues:r=[],wildcards:l=[],notWildcards:o=[]})=>{var s,d,b,g;return i.a.createElement(a.Fragment,{key:e},t.length>0&&i.a.createElement(f.EuiFlexItem,{grow:!1,style:{maxWidth:300}},i.a.createElement(Te,c()({field:e,label:null!==(s=u[e])&&void 0!==s?s:e,value:null!=t?t:[],removeFilter:()=>{m({field:e,values:[],notValues:r,wildcards:l,notWildcards:o})},negate:!1},y))),r.length>0&&i.a.createElement(f.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},i.a.createElement(Te,c()({field:e,label:null!==(d=u[e])&&void 0!==d?d:e,value:null!=r?r:[],negate:!0,removeFilter:()=>{m({field:e,notValues:[],values:t,wildcards:l,notWildcards:o})}},y))),l.length>0&&i.a.createElement(f.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},i.a.createElement(Te,c()({field:e,label:n.i18n.translate("xpack.exploratoryView.filters.label.wildcard",{defaultMessage:"{label} wildcard",values:{label:null!==(b=u[e])&&void 0!==b?b:e}}),value:null!=l?l:[],negate:!1,removeFilter:()=>{null==l||l.forEach((t=>{p({field:e,value:t,negate:!1,isWildcard:!0})}))}},y))),o.length>0&&i.a.createElement(f.EuiFlexItem,{key:e,grow:!1,style:{maxWidth:300}},i.a.createElement(Te,c()({field:e,label:n.i18n.translate("xpack.exploratoryView.filters.label.wildcard",{defaultMessage:"{label} wildcard",values:{label:null!==(g=u[e])&&void 0!==g?g:e}}),value:null!=o?o:[],negate:!1,removeFilter:()=>{null==o||o.forEach((t=>{p({field:e,value:t,negate:!0,isWildcard:!0})}))}},y))))})),(null!==(o=t.filters)&&void 0!==o?o:[]).length>0&&i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiButtonEmpty,{"data-test-subj":"o11ySelectedFiltersClearFiltersButton",flush:"left",iconType:"cross",onClick:()=>{s(e,{...t,filters:void 0})},size:"xs"},n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.clearFilter",{defaultMessage:"Clear filters"})))),i.a.createElement(f.EuiSpacer,{size:"s"}))}function Oe(e){const{series:t}=e,[r,n]=Object(a.useState)(""),{dataView:l}=Object(h.b)(t.dataType),o=null==l?void 0:l.fields.filter((e=>e.name.startsWith("labels."))),[s,u]=Object(a.useState)(!1),d=i.a.createElement(f.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>{u(!s)}},je),[p,m]=Object(a.useState)(""),{values:b,loading:g}=me({...e,field:p},r),y=(null!=o?o:[]).map((e=>({label:e.name,searchableLabel:e.name,append:i.a.createElement(f.EuiIcon,{type:"arrowRight"}),showIcons:!1})));return y.unshift({label:Ie,isGroupLabel:!0}),i.a.createElement(f.EuiPopover,{button:d,closePopover:()=>{u(!1),m("")},isOpen:s},p?i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiPopoverTitle,null,i.a.createElement(f.EuiButtonEmpty,{"data-test-subj":"o11yLabelsFieldFilterButton",iconType:"arrowLeft",iconSide:"left",onClick:()=>m("")},Ve)),i.a.createElement(he,c()({},e,{label:p,values:b,query:r,setQuery:n,loading:g,field:p}))):i.a.createElement(f.EuiSelectable,{searchable:!0,options:y,onChange:e=>{var t;const r=e.find((e=>"on"===e.checked));m(null!==(t=null==r?void 0:r.label)&&void 0!==t?t:"")},listProps:{onFocusBadge:!1},height:450},((e,t)=>i.a.createElement("div",{style:{width:400}},t,e))))}const je=n.i18n.translate("xpack.exploratoryView.filters.expanded.labels.label",{defaultMessage:"Labels"}),Ie=n.i18n.translate("xpack.exploratoryView.filters.expanded.labels.fields",{defaultMessage:"Label fields"}),Ve=n.i18n.translate("xpack.exploratoryView.filters.expanded.labels.backTo",{defaultMessage:"Back to labels"});var Me=r(110),Ae=r(4);const De=({series:e,query:t,seriesId:r,seriesConfig:a})=>{const{values:i,loading:n}=me({series:e,seriesId:r,field:Ae.p,baseFilters:a.baseFilters,label:a.labels[Ae.p]},t);return{values:i,loading:n}},Le=e=>{const t=e.filter((({isWildcard:e})=>!e)),r=e.filter((({isWildcard:e})=>e));return{includedItems:Object(T.map)(t.filter((e=>"on"===e.checked)),"label"),excludedItems:Object(T.map)(t.filter((e=>"off"===e.checked)),"label"),includedWildcards:Object(T.map)(r.filter((e=>"on"===e.checked)),"title"),excludedWildcards:Object(T.map)(r.filter((e=>"off"===e.checked)),"title")}},Pe=e=>n.i18n.translate("xpack.exploratoryView.urlFilter.wildcard",{defaultMessage:"Use wildcard *{wildcard}*",values:{wildcard:e}});function Re({series:e,seriesConfig:t,seriesId:r}){const[n,l]=Object(a.useState)(!1),[o,s]=Object(a.useState)(""),[u,c]=Object(a.useState)([]),{values:d,loading:p}=De({query:o,series:e,seriesConfig:t,seriesId:r});Object(a.useEffect)((()=>{var t;const r=Pe(o),a=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===Ae.p)),{wildcards:i=[],notWildcards:n=[],values:l=[],notValues:s=[]}=null!=a?a:{field:Ae.p};c((e=>{const{includedItems:t,excludedItems:a}=Le(e),u=(null!=d?d:[]).map((e=>t.includes(e.label)||i.includes(e.label)||l.includes(e.label)?{...e,checked:"on",title:e.label}:a.includes(e.label)||n.includes(e.label)||s.includes(e.label)?{...e,checked:"off",title:e.label,...e}:{...e,title:e.label,checked:void 0}));i.forEach((e=>{u.unshift({title:e,label:Pe(e),isWildcard:!0,checked:"on"})})),n.forEach((e=>{u.unshift({title:e,label:Pe(e),isWildcard:!0,checked:"off"})}));let c=e.find((({isNewWildcard:e})=>e));return o?(c||(c={title:o,label:r,isNewWildcard:!0,isWildcard:!0},u.unshift(c)),[{...c,label:r,title:o},...u]):u}))}),[d,p,o]),Object(a.useEffect)((()=>{var t;const r=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===Ae.p)),{wildcards:a=[],notWildcards:i=[],values:n=[],notValues:l=[]}=null!=r?r:{field:Ae.p};c((e=>(null!=e?e:[]).map((e=>n.includes(e.label)||a.includes(e.title)?{...e,checked:"on"}:l.includes(e.label)||i.includes(e.title)?{...e,checked:"off"}:{...e,checked:void 0}))))}),[e]);const{replaceFilter:f}=be({seriesId:r,series:e});return i.a.createElement(Me.SelectableUrlList,{loading:Boolean(p),onInputChange:e=>s(e),data:{items:u,total:u.length},onSelectionChange:e=>{c(e)},searchValue:o,popoverIsOpen:n,setPopoverIsOpen:l,onSelectionApply:()=>{const{includedItems:e,excludedItems:t,includedWildcards:r,excludedWildcards:a}=Le(u);f({field:Ae.p,values:e,notValues:t,wildcards:r,notWildcards:a}),s(""),l(!1)},hasChanged:()=>{var t;const{includedItems:r,excludedItems:a,includedWildcards:i,excludedWildcards:n}=Le(u),l=(null!==(t=e.filters)&&void 0!==t?t:[]).find((({field:e})=>e===Ae.p)),{wildcards:o=[],notWildcards:s=[],values:c=[],notValues:d=[]}=null!=l?l:{field:Ae.p};return!(Object(T.isEqual)(r.sort(),c.sort())&&Object(T.isEqual)(a.sort(),d.sort())&&Object(T.isEqual)(o.sort(),i.sort())&&Object(T.isEqual)(s.sort(),n.sort()))}})}function _e({series:e,seriesConfig:t,seriesId:r}){const n=t.filterFields.filter((e=>e!==Ae.p)).map((e=>{var r,a,i,n,l;return"string"==typeof e?{label:null!==(i=null!==(n=null===(l=t.labels)||void 0===l?void 0:l[e])&&void 0!==n?n:ke.e[e])&&void 0!==i?i:e,field:e}:{field:e.field,nestedField:e.nested,isNegated:e.isNegated,label:(null!==(r=null===(a=t.labels)||void 0===a?void 0:a[e.field])&&void 0!==r?r:ke.e[e.field])||e.field}})),l=Object(a.useMemo)((()=>t.filterFields.some((e=>"string"==typeof e?e===Ae.p:void 0!==e.field&&e.field===Ae.p))),[t]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexGroup,{gutterSize:"s"},l?i.a.createElement(f.EuiFlexItem,null,i.a.createElement(Re,{series:e,seriesId:r,seriesConfig:t})):null,i.a.createElement(f.EuiFlexItem,null,i.a.createElement(f.EuiFilterGroup,null,n.map((a=>a.field===ke.g?i.a.createElement(Oe,c()({series:e,key:a.label,seriesId:r,baseFilters:t.baseFilters},a)):i.a.createElement(Ce,c()({series:e,key:a.label,seriesId:r,baseFilters:t.baseFilters},a))))))),i.a.createElement(f.EuiSpacer,{size:"s"}),i.a.createElement(Fe,{seriesId:r,series:e,seriesConfig:t}))}var ze=r(68);function Be({series:e,seriesId:t}){var r,a;const n=Object(s.useQuickTimeRanges)(),{setSeries:l,reportType:o,allSeries:u}=Object(g.f)();function c({start:r,end:a}){o===I.o.KPI?u.forEach(((e,t)=>{l(t,{...e,time:{from:r,to:a}})})):l(t,{...e,time:{from:r,to:a}})}return i.a.createElement(f.EuiSuperDatePicker,{width:"full",start:null==e||null===(r=e.time)||void 0===r?void 0:r.from,end:null==e||null===(a=e.time)||void 0===a?void 0:a.to,onTimeChange:c,commonlyUsedRanges:n,onRefresh:c,showUpdateButton:!1})}const $e=n.i18n.translate("xpack.exploratoryView..synthetics.addDataButtonLabel",{defaultMessage:"Add synthetics data"}),Ne=n.i18n.translate("xpack.exploratoryView.mobile.addDataButtonLabel",{defaultMessage:"Add Mobile data"}),We=n.i18n.translate("xpack.exploratoryView.ux.addDataButtonLabel",{defaultMessage:"Add UX data"}),qe={mobile:function(){var e,t;const r=Object(m.useKibana)();return i.a.createElement(f.EuiHeaderLink,{"aria-label":n.i18n.translate("xpack.exploratoryView.page_header.addMobileDataLink.label",{defaultMessage:"Navigate to a tutorial about adding mobile APM data"}),href:null===(e=r.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/apm/tutorial"),color:"primary",iconType:"indexOpen"},Ne)},ux:function(){var e,t;const r=Object(m.useKibana)();return i.a.createElement(f.EuiHeaderLink,{"aria-label":n.i18n.translate("xpack.exploratoryView.page_header.addUXDataLink.label",{defaultMessage:"Navigate to a tutorial about adding user experience APM data"}),href:null===(e=r.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/apm/tutorial"),color:"primary",iconType:"indexOpen"},We)},uptime:function(){var e,t;const r=Object(m.useKibana)();return i.a.createElement(f.EuiHeaderLink,{"aria-label":n.i18n.translate("xpack.exploratoryView.page_header.addUptimeDataLink.label",{defaultMessage:"Navigate to a tutorial about adding Uptime data"}),href:null===(e=r.services)||void 0===e||null===(t=e.application)||void 0===t?void 0:t.getUrlForApp("/home#/tutorial/uptimeMonitors"),color:"primary",iconType:"indexOpen"},$e)},synthetics:null,apm:null,infra_logs:null,infra_metrics:null,alerts:null};function Ue({seriesId:e,series:t}){const{reportType:r}=Object(g.f)(),{hasAppData:a}=Object(h.b)();if(!t.dataType)return null;const l=qe[t.dataType];return!1===a[t.dataType]&&null!==l?i.a.createElement(f.EuiFlexGroup,{alignItems:"center"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement("strong",null,n.i18n.translate("xpack.exploratoryView.noDataAvailable",{defaultMessage:"No {dataType} data available.",values:{dataType:t.dataType}}))),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(l,null))):i.a.createElement(He,null,0===e||r!==I.o.KPI?i.a.createElement(Be,{seriesId:e,series:t}):i.a.createElement(ze.a,{seriesId:e,series:t}))}const He=p.a.div.withConfig({displayName:"Wrapper",componentId:"sc-1l2tqpk-0"})(["width:100%;"]);function Ge({seriesConfig:e,seriesId:t,series:r}){const{setSeries:n,allSeries:l}=Object(g.f)(),o=l.findIndex((e=>Boolean(e.breakdown))),s=-1!==o&&!(o===t),u=r.breakdown,c="no_breakdown";if(Object(a.useEffect)((()=>{Object(se.b)(r.selectedMetricField)||u!==ue.o||n(t,{...r,breakdown:void 0})})),!e)return null;const d=e.xAxisColumn.sourceField===I.q,p=r.selectedMetricField===I.k,m=e.breakdownFields.map((t=>{var r;return{id:t,label:null!==(r=e.labels[t])&&void 0!==r?r:t}}));d||m.push({id:c,label:Ke});const b=m.map((({id:e,label:t})=>e!==ue.o||Object(se.b)(r.selectedMetricField)?{inputDisplay:t,value:e,dropdownDisplay:t}:{inputDisplay:t,value:e,dropdownDisplay:i.a.createElement(f.EuiToolTip,{content:Qe},i.a.createElement(i.a.Fragment,null,t)),disabled:!0})).filter((({value:e})=>!(e===I.i&&p)));let y=u||(d?b[0].value:c);function h(){return i.a.createElement(f.EuiSuperSelect,{options:b,valueOfSelected:y,onChange:e=>{var a;n(t,(a=e)===c?{...r,breakdown:void 0}:{...r,breakdown:u===a?void 0:a})},"data-test-subj":"seriesBreakdown",disabled:s})}return null!=u&&u.startsWith("labels.")&&(y=I.f),i.a.createElement(Je,null,s?i.a.createElement(f.EuiToolTip,{content:Ye,position:"top"},i.a.createElement(h,null)):i.a.createElement(h,null))}const Ke=n.i18n.translate("xpack.exploratoryView.breakDownFilter.noBreakdown",{defaultMessage:"No breakdown"}),Ye=n.i18n.translate("xpack.exploratoryView.breakDownFilter.warning",{defaultMessage:"Breakdowns can be applied to only one series at a time."}),Qe=n.i18n.translate("xpack.exploratoryView.breakDownFilter.unavailable",{defaultMessage:"Step name breakdown is not available for monitor duration metric. Use step duration metric to breakdown by step name."}),Je=p.a.span.withConfig({displayName:"Wrapper",componentId:"sc-5xzgqe-0"})([".euiToolTipAnchor{width:100%;}"]);function Xe({series:e,seriesId:t}){const{dataView:r}=Object(h.b)(e.dataType),a=null==r?void 0:r.fields.filter((e=>e.name.startsWith("labels."))),{setSeries:n}=Object(g.f)(),{breakdown:l}=e;if(l!==I.f&&!(null==l?void 0:l.startsWith("labels.")))return null;const o=null==a?void 0:a.map((e=>({label:e.name,value:e.name})));return i.a.createElement(f.EuiFlexItem,{grow:!1,style:{minWidth:200}},i.a.createElement(f.EuiComboBox,{selectedOptions:null==o?void 0:o.filter((e=>e.label===l)),options:o,placeholder:Ze,onChange:r=>{var a,i;n(t,{...e,breakdown:null!==(a=null==r||null===(i=r[0])||void 0===i?void 0:i.label)&&void 0!==a?a:I.f})},singleSelection:{asPlainText:!0},isInvalid:e.breakdown===I.f}))}const Ze=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.labelField",{defaultMessage:"Choose label field"});function et(e){const{seriesConfig:t,series:r,seriesId:a}=e;if(!t)return null;const{selectedMetricField:n}=null!=r?r:{},{hasOperationType:l,yAxisColumns:o}=t,s=function(e,t){const r=Object(pe.c)(e,t);if(!Array.isArray(r))return null==r?void 0:r.columnType}(t,n),u=r.breakdown===I.i;return i.a.createElement("div",{style:{width:"100%"}},i.a.createElement(f.EuiFlexGroup,{gutterSize:"xs",wrap:!0},i.a.createElement(f.EuiFlexItem,{grow:1},i.a.createElement(f.EuiFormRow,{label:it,fullWidth:!0},i.a.createElement(Ue,e))),i.a.createElement(f.EuiFlexItem,{grow:2},i.a.createElement(ce,{seriesConfig:t,seriesId:a,series:r}))),i.a.createElement(f.EuiHorizontalRule,null),i.a.createElement(f.EuiFormRow,{label:rt,fullWidth:!0},i.a.createElement(_e,{seriesConfig:t,seriesId:a,series:r})),i.a.createElement(f.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(f.EuiFlexItem,null,i.a.createElement(f.EuiFormRow,{label:tt},i.a.createElement(f.EuiFlexGroup,{gutterSize:"xs"},i.a.createElement(f.EuiFlexItem,{style:{minWidth:200}},i.a.createElement(Ge,e)),i.a.createElement(Xe,e)))),(l||"operation"===s&&!u)&&i.a.createElement(f.EuiFlexItem,null,i.a.createElement(f.EuiFormRow,{label:at},i.a.createElement(de.b,c()({},e,{defaultOperationType:o[0].operationType}))))))}const tt=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.breakdownBy",{defaultMessage:"Breakdown by"}),rt=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.selectFilters",{defaultMessage:"Filters"}),at=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.operation",{defaultMessage:"Operation"}),it=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.date",{defaultMessage:"Date"}),nt=p()(f.EuiText).withConfig({displayName:"StyledText",componentId:"sc-4o2w32-0"})(["&.euiText.euiText--constrainedWidth{max-width:200px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}"]);function lt({series:e,seriesId:t}){const{setSeries:r}=Object(g.f)(),[l,o]=Object(a.useState)(e.name),[s,u]=Object(a.useState)(!1),c=Object(a.useRef)(null),d=Object(a.useRef)(null),p=()=>{l!==e.name&&r(t,{...e,name:l})};return Object(a.useEffect)((()=>{o(e.name)}),[e.name]),Object(a.useEffect)((()=>{s&&c.current&&c.current.focus()}),[s,c]),i.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},s?i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiOutsideClickDetector,{onOutsideClick:e=>{e.target!==d.current&&(u(!1),p())}},i.a.createElement(f.EuiFieldText,{value:l,onChange:e=>{o(e.target.value)},onBlur:p,onKeyDown:e=>{"Enter"===e.key&&(u(!1),p())},fullWidth:!0,inputRef:c,"aria-label":n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.seriesName",{defaultMessage:"Series name"}),"data-test-subj":"exploratoryViewSeriesNameInput"}))):i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(nt,{grow:!1},l)),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiButtonIcon,{"data-test-subj":"exploratoryViewSeriesNameButton",onClick:()=>u(!s),iconType:"pencil","aria-label":n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.editName",{defaultMessage:"Edit name"}),color:"text",buttonRef:d})))}var ot=r(43);function st({seriesId:e,series:t,seriesConfig:r}){var n,l,o;const{setSeries:s}=Object(g.f)(),[u,c]=Object(a.useState)(!1),d=null==r?void 0:r.metricOptions,{dataViews:p,dataViewErrors:m,loading:b}=Object(h.b)(),y=r=>{s(e,{...t,selectedMetricField:r})},v=Object(a.useCallback)((e=>{null==e||e.focus()}),[]);if(!t.dataType)return null;const w=null==p?void 0:p[t.dataType],x=null==m?void 0:m[t.dataType],E=(null!=d?d:[]).map((({label:e,field:t,id:r})=>{let a=!1;return t!==I.k&&t!==I.l&&t&&(a=!Boolean(null==w?void 0:w.getFieldByName(t))),{disabled:a,value:t||r,dropdownDisplay:a?i.a.createElement(f.EuiToolTip,{content:i.a.createElement(ot.FormattedMessage,{id:"xpack.exploratoryView.expView.seriesEditor.selectReportMetric.noFieldData",defaultMessage:"No data available for field {field}.",values:{field:i.a.createElement("strong",null,t)}})},i.a.createElement("span",null,e)):e,inputDisplay:e}}));var C,k;return!x||w||b?w||b?i.a.createElement(i.a.Fragment,null,!t.selectedMetricField&&i.a.createElement(f.EuiPopover,{button:i.a.createElement(f.EuiButton,{"data-test-subj":"o11yReportMetricOptionsButton",iconType:"plusInCircle",onClick:()=>c((e=>!e)),fill:!0,size:"s",isLoading:!w&&b,buttonRef:v},ut),isOpen:u,closePopover:()=>c((e=>!e))},i.a.createElement(f.EuiListGroup,null,E.map((e=>i.a.createElement(f.EuiListGroupItem,{key:e.value,onClick:()=>y(e.value),label:e.dropdownDisplay,isDisabled:e.disabled}))))),t.selectedMetricField&&(w?i.a.createElement(f.EuiToolTip,{position:"top",content:ft},i.a.createElement(f.EuiBadge,{iconType:"cross",iconSide:"right",iconOnClick:()=>y(void 0),iconOnClickAriaLabel:ct},null!==(n=null==r||null===(l=r.metricOptions)||void 0===l||null===(o=l.find((e=>e.id===t.selectedMetricField||e.field===t.selectedMetricField)))||void 0===o?void 0:o.label)&&void 0!==n?n:t.selectedMetricField)):i.a.createElement(f.EuiLoadingSpinner,null))):i.a.createElement(f.EuiText,null,dt):i.a.createElement(f.EuiText,{color:"danger",className:"eui-textNoWrap"},"Forbidden"===(null===(C=x.body)||void 0===C?void 0:C.error)||"DataViewInsufficientAccessError"===x.name?pt:null===(k=x.body)||void 0===k?void 0:k.message)}const ut=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.selectReportMetric",{defaultMessage:"Select report metric"}),ct=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.removeReportMetric",{defaultMessage:"Remove report metric"}),dt=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.noData",{defaultMessage:"No data available"}),pt=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.noPermissions",{defaultMessage:"Unable to create Data View. You don't have the required permission, please contact your admin."}),ft=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.reportMetricTooltip",{defaultMessage:"Report metric"}),mt=p()(f.EuiAccordion).withConfig({displayName:"StyledAccordion",componentId:"sc-ohhiht-0"})([".euiAccordion__button{width:auto;flex-grow:0;}.euiAccordion__optionalAction{flex-grow:1;flex-shrink:1;}.euiAccordion__childWrapper{overflow:visible;}"]);function bt({item:e,isExpanded:t,toggleExpanded:r}){const{id:n}=e,l={...e,seriesId:n},[o,s]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{t&&s(!0)}),[t]),i.a.createElement(f.EuiPanel,{hasBorder:!0,"data-test-subj":"exploratoryViewSeriesPanel0",paddingSize:"s"},i.a.createElement(mt,{id:`exploratoryViewSeriesAccordion${n}`,forceState:t?"open":"closed","aria-label":gt,onToggle:r,arrowDisplay:l.series.dataType?void 0:"none",extraAction:i.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(J,l)),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(lt,l)))),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(Z,l)),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(st,l)),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(re,l)))),i.a.createElement(f.EuiFlexItem,null,i.a.createElement(M,c()({},l,{onEditClick:t?void 0:r}))))},i.a.createElement(f.EuiSpacer,{size:"s"}),i.a.createElement(f.EuiPanel,{color:"subdued"},o&&i.a.createElement(et,l))))}const gt=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.accordion.label",{defaultMessage:"Toggle series information"}),yt=({dataViews:e,allSeries:t,reportType:r,reportConfigMap:a})=>t.map(((t,i)=>({id:i,series:t,seriesConfig:(t=>{if(null!=e&&e[t])return Object(x.a)({dataType:t,reportType:r,reportConfigMap:a,dataView:e[t]})})(t.dataType)}))),ht=i.a.memo((function(){const[e,t]=Object(a.useState)([]),{getSeries:r,allSeries:n,reportType:l}=Object(g.f)(),{loading:o,dataViews:s}=Object(h.b)(),{reportConfigMap:u,setIsEditMode:c}=Object(E.b)(),[d,p]=Object(a.useState)({}),[{prevCount:m,curCount:b},y]=Object(a.useState)({curCount:n.length});return Object(a.useEffect)((()=>{null==c||c(Object.keys(d).length>0)}),[d,c]),Object(a.useEffect)((()=>{y((e=>({prevCount:e.curCount,curCount:n.length}))),void 0!==m&&!isNaN(m)&&m<b&&p({})}),[n.length,b,m]),Object(a.useEffect)((()=>{const e={};t((t=>{const r=yt({reportType:l,allSeries:n,dataViews:s,reportConfigMap:u});return r.forEach((({series:r,id:a})=>{const i=t.find((({id:e})=>e===a));i&&r.selectedMetricField&&i.series.selectedMetricField!==r.selectedMetricField&&(e[a]=!0)})),[...r]})),p((t=>({...t,...e})))}),[n,r,s,o,u,l]),i.a.createElement(vt,null,i.a.createElement(wt,null),i.a.createElement(xt,{gutterSize:"none"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(Tt,{"aria-label":St,id:"report-type-label",isDisabled:!0},i.a.createElement(S,{prepend:kt}))),i.a.createElement(f.EuiFlexItem,null,i.a.createElement(O,{onApply:()=>p({})}))),i.a.createElement(Et,null,e.map(((t,r)=>i.a.createElement("div",{key:t.id},i.a.createElement(bt,{item:t,toggleExpanded:()=>(e=>{const t={...d};t[e.id]?delete t[e.id]:t[e.id]=!0,p(t)})(t),isExpanded:d[t.id]}),r+1!==e.length&&i.a.createElement(f.EuiSpacer,{size:"s"}))))))})),vt=w.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(v.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }

  &&& {
    .euiTableRow-isExpandedRow .euiTableRowCell {
      border-top: none;
      background-color: #FFFFFF;
      border-bottom: 2px solid #d3dae6;
      border-right: 2px solid rgb(211, 218, 230);
      border-left: 2px solid rgb(211, 218, 230);
    }

    .isExpanded {
      border-right: 2px solid rgb(211, 218, 230);
      border-left: 2px solid rgb(211, 218, 230);
      .euiTableRowCell {
        border-bottom: none;
      }
    }
    .isIncomplete .euiTableRowCell {
      background-color: rgba(254, 197, 20, 0.1);
    }
  }
`,wt=w.euiStyled.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 56px;
  background-color: ${({theme:e})=>e.eui.euiPageBackgroundColor};
  border-bottom: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
  z-index: 90;
`,xt=Object(w.euiStyled)(f.EuiFlexGroup)`
  position: sticky;
  top: 0;
  z-index: 100;
  padding: 0;
`,Et=w.euiStyled.div`
  margin: ${({theme:e})=>e.eui.euiSizeM} 0;
`,Ct=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.loadingView",{defaultMessage:"Loading view ..."}),kt=(n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.selectReportType",{defaultMessage:"No report type selected"}),n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.reportType",{defaultMessage:"Report type"})),St=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.reportType.aria",{defaultMessage:"This select allows you to choose the type of report you wish to create"});var Tt=p()(f.EuiFormRow).withConfig({displayName:"_StyledEuiFormRow",componentId:"sc-ig7tgs-0"})({alignItems:"center"});function Ft(){const[e,t]=Object(a.useState)([]),r=Object(a.useRef)(null),{getSeries:l,allSeries:o,setSeries:s,reportType:u}=Object(g.f)(),{loading:c,dataViews:d}=Object(h.b)(),{reportConfigMap:p}=Object(E.b)();Object(a.useEffect)((()=>{t(yt({allSeries:o,dataViews:d,reportType:u,reportConfigMap:p}))}),[o,l,d,c,p,u]);const m=!u||(u===I.o.CORE_WEB_VITAL||u===I.o.DEVICE_DISTRIBUTION||u===I.o.SINGLE_METRIC)&&o.length>0;return i.a.createElement(f.EuiToolTip,{content:u?m?n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.addSeries.limitation",{defaultMessage:"You can only add one series of this report type."}):"":n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.addSeries.selectReportType",{defaultMessage:"Please select report type before you can add series."})},i.a.createElement(f.EuiButton,{"data-test-subj":"o11yAddSeriesButtonAddSeriesButton",onClick:()=>(()=>{const t=null==o?void 0:o[0],a={name:`${g.a}-${e.length+1}`};null!=r&&r.current&&r.current.blur();const i=o.length;s(i,"data-distribution"===u?{...a,time:(null==t?void 0:t.time)||I.a}:t?a:{...a,time:I.a})})(),isDisabled:m,iconType:"plusInCircle",size:"s",buttonRef:r},n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.addSeries",{defaultMessage:"Add series"})))}function Ot({seriesBuilderRef:e}){return i.a.createElement("div",{ref:e},i.a.createElement(ht,null),i.a.createElement(Ft,null))}const jt=()=>{const{storage:e,reportType:t,lastRefresh:r,firstSeries:i}=Object(g.f)();return Object(a.useMemo)((()=>{var r;const a=Object(g.d)(null!==(r=e.get(g.c))&&void 0!==r?r:[]),i=null==a?void 0:a[0];return i?((e,t,r)=>{let a="",i="";return e===I.o.KPI?null==r?void 0:r.time:(t.forEach((e=>{if(e.dataType&&e.selectedMetricField&&e.time){const t=Object(ze.b)(e.time.from),r=Object(ze.b)(e.time.to,{roundUp:!0});(!a||r>Object(ze.b)(a,{roundUp:!0}))&&(a=e.time.to),(!i||t<Object(ze.b)(i))&&(i=e.time.from)}})),{to:a,from:i})})(t,a,i):void 0}),[t,e,r,i])};var It=r(87);const Vt={type:"observability_exploratory_view"};function Mt(e){const{lensAttributes:t,setChartTimeRangeContext:r}=e,{services:{lens:l,notifications:o}}=b(),u=null==l?void 0:l.EmbeddableComponent,c=null==l?void 0:l.SaveModalComponent,{firstSeries:d,setSeries:p,reportType:f,lastRefresh:m}=Object(g.f)(),[y,h]=Object(a.useState)(!1),v=jt(),w=Object(s.useUiTracker)(),x=Object(a.useCallback)((e=>{var t,a;const i=Date.now();null==r||r({lastUpdated:i,to:null===(t=Object(ze.b)((null==v?void 0:v.to)||""))||void 0===t?void 0:t.valueOf(),from:null===(a=Object(ze.b)((null==v?void 0:v.from)||""))||void 0===a?void 0:a.valueOf()}),e||Object(It.b)(w,m,i)}),[r,v,m,w]),E=Object(a.useCallback)((({range:e})=>{"data-distribution"!==f&&d?p(0,{...d,time:{from:new Date(e[0]).toISOString(),to:new Date(e[1]).toISOString()}}):null==o||o.toasts.add(n.i18n.translate("xpack.exploratoryView.noBrushing",{defaultMessage:"Zoom by brush selection is only available on time series charts."}))}),[f,p,d,null==o?void 0:o.toasts]);return v&&t?i.a.createElement(At,null,i.a.createElement(u,{id:"exploratoryView",timeRange:v,attributes:t,onLoad:x,onBrushEnd:E,executionContext:Vt}),y&&t&&i.a.createElement(c,{initialInput:t,onClose:()=>h(!1),onSave:()=>{}})):null}const At=p.a.div.withConfig({displayName:"LensWrapper",componentId:"sc-42cjhs-0"})(["height:100%;.embPanel__optionsMenuPopover{visibility:collapse;}&&&:hover{.embPanel__optionsMenuPopover{visibility:visible;}}&& .embPanel--editing{border-style:initial !important;:hover{box-shadow:none;}}.embPanel__title{display:none;}&&& > div{height:100%;}"]);function Dt({loading:e,series:t,reportType:r}){const{dataType:a,reportDefinitions:l}=null!=t?t:{};let o=Rt;return a?r?Object(T.isEmpty)(l)&&(o=_t):o=zt:o=Bt,t||(o=n.i18n.translate("xpack.exploratoryView.expView.seriesEditor.notFound",{defaultMessage:"No series found. Please add a series."})),i.a.createElement(Lt,null,e&&i.a.createElement(f.EuiProgress,{size:"xs",color:"accent",position:"absolute",style:{top:"initial"}}),i.a.createElement(f.EuiSpacer,null),i.a.createElement(Pt,{justifyContent:"center",alignItems:"center"},i.a.createElement(f.EuiFlexItem,null,i.a.createElement(f.EuiText,null,e?Ct:o))))}const Lt=p.a.div.withConfig({displayName:"Wrapper",componentId:"sc-11idy0u-0"})(["text-align:center;position:relative;"]),Pt=p()(f.EuiFlexGroup).withConfig({displayName:"FlexGroup",componentId:"sc-11idy0u-1"})(["height:100%;"]),Rt=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.emptyview",{defaultMessage:"Nothing to display."}),_t=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.emptyReportDefinition",{defaultMessage:"Select a report definition to create a visualization."}),zt=n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.selectReportType.empty",{defaultMessage:"Select a report type to create a visualization."}),Bt=n.i18n.translate("xpack.exploratoryView.expView.reportType.selectDataType",{defaultMessage:"Select a data type to create a visualization."});function $t({lensAttributes:e}){const[t,r]=Object(a.useState)(!1),{reportType:n,allSeries:l}=Object(g.f)(),o=i.a.createElement(f.EuiButtonEmpty,{"data-test-subj":"o11yEmbedActionButton",size:"s",isDisabled:null===e,onClick:()=>{r(!t)}},Wt);return i.a.createElement(f.EuiPopover,{button:o,isOpen:t,closePopover:()=>r(!1)},i.a.createElement(f.EuiPopoverTitle,null,Nt),i.a.createElement(f.EuiCodeBlock,{language:"jsx",fontSize:"m",paddingSize:"m",isCopyable:!0,style:{width:500}},`const { observability } = useKibana<>().services;\n\nconst { ExploratoryViewEmbeddable } = observability;\n\n<ExploratoryViewEmbeddable\n        customHeight={'300px'}\n        reportType="${n}"\n        attributes={${JSON.stringify(l,null,2)}}\n />\n        `))}const Nt=n.i18n.translate("xpack.exploratoryView.expView.heading.embedTitle",{defaultMessage:"Embed Exploratory view (Dev only feature)"}),Wt=n.i18n.translate("xpack.exploratoryView.expView.heading.embed",{defaultMessage:"Embed <></>",ignoreTag:!0});var qt=r(109);function Ut({timeRange:e,lensAttributes:t}){const{lens:r,isDev:l}=b().services,[o,s]=Object(a.useState)(!1),u=r.SaveModalComponent;return i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1,style:{paddingRight:20}},l&&i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement($t,{lensAttributes:t})),e&&i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(qt.a,{lensAttributes:t,timeRange:e})),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiButton,{"data-test-subj":"o11yExpViewActionMenuContentOpenInLensButton",iconType:"lensApp",fullWidth:!1,isDisabled:!r.canUseEditor()||null===t,size:"s",onClick:()=>{t&&r.navigateToPrefilledEditor({id:"",timeRange:e,attributes:t},{openInNewTab:!0})}},n.i18n.translate("xpack.exploratoryView.expView.heading.openInLens",{defaultMessage:"Open in Lens"}))),i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiButton,{"data-test-subj":"o11yExpViewActionMenuContentSaveButton",fill:!0,iconType:"save",fullWidth:!1,isDisabled:!r.canUseEditor()||null===t,onClick:()=>{t&&s(!0)},size:"s"},n.i18n.translate("xpack.exploratoryView.expView.heading.saveLensVisualization",{defaultMessage:"Save"})))),o&&t&&i.a.createElement(u,{initialInput:t,onClose:()=>s(!1),onSave:()=>{}}))}function Ht(e){const{setHeaderActionMenu:t,theme$:r}=Object(E.b)();return i.a.createElement(s.HeaderMenuPortal,{setHeaderActionMenu:t,theme$:r},i.a.createElement(f.EuiFlexGroup,{responsive:!1,gutterSize:"s"},i.a.createElement(f.EuiFlexItem,null,i.a.createElement(Ut,e))))}function Gt({saveAttributes:e}){const{services:{lens:t}}=b(),r=Object(a.useRef)(null),n=Object(a.useRef)(null),[l,o]=Object(a.useState)("100vh"),{isEditMode:s}=Object(E.b)(),[u,d]=Object(a.useState)(null),{loadDataView:p,loading:m}=Object(h.b)(),{firstSeries:v,allSeries:w,lastRefresh:x,reportType:C,setChartTimeRangeContext:k}=Object(g.f)(),S=Object(y.c)(),T=jt();Object(a.useEffect)((()=>{w.forEach((e=>{p({dataType:e.dataType})}))}),[w,p]),Object(a.useEffect)((()=>{d(S),e&&e(S)}),[JSON.stringify(null!=S?S:{}),x]),Object(a.useEffect)((()=>{(()=>{if(null!=r&&r.current&&n.current){const e=n.current.getBoundingClientRect().top;o(`calc(100vh - ${e+40}px)`)}})()}));const F=Object(a.useRef)(),[O,j]=Object(a.useState)(""),I=e=>{j((t=>e===t?"":e))},V=e=>{I(e),F.current&&F.current(e,"seriesPanel"===e?"right":"left")};return t?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ht,{timeRange:T,lensAttributes:u}),i.a.createElement(Kt,{ref:n,height:l},i.a.createElement(Yt,{direction:"vertical",onToggleCollapsed:I},((e,t,{togglePanel:a})=>(F.current=(e,t)=>null==a?void 0:a(e,{direction:t}),i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(f.EuiButtonEmpty,c()({"data-test-subj":"o11yExploratoryViewButton",size:"xs"},"chartPanel"===O?{iconType:"arrowRight"}:{iconType:"arrowDown"},{onClick:()=>V("chartPanel")}),"chartPanel"===O?Zt:Xt))),i.a.createElement(e,{initialSize:s?40:60,minSize:"30%",mode:"collapsible",id:"chartPanel",paddingSize:"s"},u?i.a.createElement(Mt,{setChartTimeRangeContext:k,lensAttributes:u}):i.a.createElement(Dt,{series:v,loading:m,reportType:C})),i.a.createElement(e,{initialSize:s?60:40,minSize:"10%",mode:"main",id:"seriesPanel",color:"subdued",className:"paddingTopSmall"},i.a.createElement(Ot,{seriesBuilderRef:r,onSeriesPanelCollapse:V})))))),"seriesPanel"===O&&i.a.createElement(Qt,{onClick:()=>V("seriesPanel"),iconType:"arrowUp"},Jt))):i.a.createElement(f.EuiTitle,null,i.a.createElement("h2",null,er))}const Kt=p.a.div.withConfig({displayName:"LensWrapper",componentId:"sc-18cfyyp-0"})(["min-height:400px;height:",";&&& > div{height:100%;}"],(e=>e.height)),Yt=p()(f.EuiResizableContainer).withConfig({displayName:"ResizableContainer",componentId:"sc-18cfyyp-1"})(["height:100%;&&& .paddingTopSmall{padding-top:8px;}#chartPanel{> .euiPanel{padding-bottom:0;padding-top:0;}.expExpressionRenderer__expression{padding-bottom:0 !important;padding-top:0 !important;}}"]),Qt=p()(f.EuiButtonEmpty).withConfig({displayName:"ShowPreview",componentId:"sc-18cfyyp-2"})(["position:absolute;bottom:34px;"]),Jt=n.i18n.translate("xpack.exploratoryView.preview",{defaultMessage:"Preview"}),Xt=n.i18n.translate("xpack.exploratoryView.hideChart",{defaultMessage:"Hide chart"}),Zt=n.i18n.translate("xpack.exploratoryView.showChart",{defaultMessage:"Show chart"}),er=n.i18n.translate("xpack.exploratoryView.lensDisabled",{defaultMessage:"Lens app is not available, please enable Lens to use exploratory view."});var tr=r(51),rr=r.n(tr);function ar(e){const t="lll",r=rr()(e.from).format(t),a=rr()(e.to).format(t),n=rr()(e.lastUpdated).format(t);return i.a.createElement(i.a.Fragment,null,e.lastUpdated&&i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexGroup,null,i.a.createElement(f.EuiFlexItem,null,i.a.createElement(f.EuiText,{size:"xs"},i.a.createElement(ot.FormattedMessage,{id:"xpack.exploratoryView.expView.seriesBuilder.creationTime",defaultMessage:"Chart created"}))),i.a.createElement(f.EuiFlexItem,{grow:2},i.a.createElement(f.EuiText,{size:"xs"},n))),i.a.createElement(f.EuiSpacer,{size:"xs"})),e.to&&e.from&&i.a.createElement(i.a.Fragment,null,i.a.createElement(f.EuiFlexGroup,{alignItems:"center"},i.a.createElement(f.EuiFlexItem,null,i.a.createElement(f.EuiText,{size:"xs"},i.a.createElement(ot.FormattedMessage,{id:"xpack.exploratoryView.expView.seriesBuilder.creationContext",defaultMessage:"Displaying from"}))),i.a.createElement(f.EuiFlexItem,{grow:2},i.a.createElement(f.EuiText,{size:"xs"},r,"  ",a)))))}function ir({chartTimeRange:e}){const{lastUpdated:t}=e||{},[r,n]=Object(a.useState)((()=>Date.now()));if(Object(a.useEffect)((()=>{const e=setInterval((()=>{n(Date.now())}),5e3);return()=>{clearInterval(e)}}),[]),Object(a.useEffect)((()=>{n(Date.now())}),[t]),!t)return null;const l=rr()().diff(rr()(t),"minute")>5,o=rr()().diff(rr()(t),"minute")>10;return i.a.createElement(f.EuiText,{color:o?"danger":l?"warning":"subdued",size:"s"},i.a.createElement(nr,{as:f.EuiToolTip,position:"top",content:i.a.createElement(ar,e)},i.a.createElement(f.EuiIcon,{type:"iInCircle"}))," ",i.a.createElement(ot.FormattedMessage,{id:"xpack.exploratoryView.expView.lastUpdated.label",defaultMessage:"Last Updated: {updatedDate}",values:{updatedDate:rr()(t).from(r)}}))}const nr=p.a.div.withConfig({displayName:"StyledToolTipWrapper",componentId:"sc-14d668h-0"})(["min-width:30vw;"]);function lr(){const{setLastRefresh:e,chartTimeRangeContext:t}=Object(g.f)();return i.a.createElement(f.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},i.a.createElement(f.EuiFlexItem,{style:{textAlign:"right",minWidth:280}},i.a.createElement(ir,{chartTimeRange:t})),i.a.createElement(f.EuiFlexItem,{style:{textAlign:"right"}},i.a.createElement(f.EuiButton,{"data-test-subj":"o11yRefreshButtonButton",iconType:"refresh",onClick:()=>e(Date.now())},or)))}const or=n.i18n.translate("xpack.exploratoryView.refresh",{defaultMessage:"Refresh"});var sr=r(15);const ur=n.i18n.translate("xpack.exploratoryView.expView.heading.label",{defaultMessage:"Explore data"});function cr({app:e,saveAttributes:t,useSessionStorage:r=!1}){const{services:{uiSettings:a,notifications:u,observabilityShared:c}}=b(),d=Object(l.useHistory)(),p=c.navigation.PageTemplate;Object(s.useTrackPageview)({app:"observability-overview",path:"exploratory-view"}),Object(s.useTrackPageview)({app:"observability-overview",path:"exploratory-view",delay:15e3}),Object(s.useBreadcrumbs)([{text:n.i18n.translate("xpack.exploratoryView.overview",{defaultMessage:"Explore data"})}],e);const f=r?Object(o.createSessionStorageStateStorage)():Object(o.createKbnUrlStateStorage)({history:d,useHash:a.get("state:storeInSessionStorage"),...Object(o.withNotifyOnErrors)(u.toasts)});return i.a.createElement(g.b,{storage:f},i.a.createElement(p,{pageHeader:{pageTitle:ur,rightSideItems:[i.a.createElement(lr,null)]}},i.a.createElement(h.a,null,i.a.createElement(Gt,{saveAttributes:t}))))}t.default=cr},60:function(e,t,r){"use strict";r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"b",(function(){return p})),r.d(t,"f",(function(){return f})),r.d(t,"a",(function(){return m}));var a=r(2),i=r.n(a),n=r(8),l=r(11),o=(r(5),r(87));const s=Object(a.createContext)({});function u(e){return(null!=e?e:[]).map((e=>function(e){const{dt:t,op:r,st:a,bd:i,ft:n,time:l,rdf:o,mt:s,h:u,n:c,c:d,spa:p,...f}=e;return{operationType:r,seriesType:a,breakdown:i,filters:n,time:l,reportDefinitions:o,dataType:t,selectedMetricField:s,hidden:u,name:c,color:d,showPercentileAnnotations:p,...f}}(e)))}const c="sr",d="reportType";function p({children:e,storage:t}){const[r,p]=Object(a.useState)((()=>{var e;return u(null!==(e=t.get(c))&&void 0!==e?e:[])})),[f,m]=Object(a.useState)((()=>Date.now())),[b,g]=Object(a.useState)(),[y,h]=Object(a.useState)((()=>{var e;return null!==(e=t.get(d))&&void 0!==e?e:""})),[v,w]=Object(a.useState)(),x=Object(n.useUiTracker)();Object(a.useEffect)((()=>{const e=null==r?void 0:r[0];w(e)}),[r,t]);const E=Object(a.useCallback)(((e,t)=>{p((r=>{const a=r.findIndex((e=>e.breakdown)),i=r.map(((r,i)=>i===e?{...t,breakdown:a===e||-1===a?t.breakdown:void 0}:r));return r.length===e?[...i,t]:[...i]}))}),[]),C=Object(a.useCallback)((e=>{p((t=>t.filter(((t,r)=>r!==e))))}),[]),k=Object(a.useCallback)((e=>r[e]),[r]),S={applyChanges:Object(a.useCallback)((e=>{const a=r.map((e=>Object(l.a)(e)));t.set(d,y),t.set(c,a),m(Date.now()),Object(o.a)(x,r,y),e&&e()}),[r,t,x,y]),storage:t,getSeries:k,setSeries:E,removeSeries:C,allSeries:r,lastRefresh:f,setLastRefresh:m,setReportType:h,reportType:y,chartTimeRangeContext:b,setChartTimeRangeContext:g,firstSeries:v};return i.a.createElement(s.Provider,{value:S},e)}function f(){return Object(a.useContext)(s)}const m="new-series"},62:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return c}));var a=r(2),i=r.n(a),n=r(18),l=r(16),o=r(25);const s=Object(a.createContext)({});function u({children:e}){const[t,r]=Object(a.useState)({}),[u,c]=Object(a.useState)({}),[d,p]=Object(a.useState)({}),[f,m]=Object(a.useState)({}),{services:{dataViews:b}}=Object(n.useKibana)(),g=Object(a.useCallback)((async({dataType:e})=>{if(void 0===f[e]&&!t[e]){r((t=>({...t,[e]:!0})));try{const{indices:t,hasData:a}=await Object(o.b)(e);if(m((t=>({...t,[e]:a}))),a&&t){const r=new o.a(b,!0),a=await r.getDataView(e,t);c((t=>({...t,[e]:a})))}r((t=>({...t,[e]:!1})))}catch(t){(t instanceof l.DataViewInsufficientAccessError||"Forbidden"===t.body)&&p((r=>({...r,[e]:t}))),r((t=>({...t,[e]:!1})))}}}),[b,f,t]);return i.a.createElement(s.Provider,{value:{hasAppData:f,dataViews:u,loadDataView:g,dataViewErrors:d,loading:!!Object.values(t).find((e=>e))}},e)}const c=e=>{const{loading:t,hasAppData:r,loadDataView:i,dataViews:n,dataViewErrors:l}=Object(a.useContext)(s);return!e||null!=n&&n[e]||t||i({dataType:e}),Object(a.useMemo)((()=>({hasAppData:r,loading:t,dataViews:n,dataViewErrors:l,dataView:e?null==n?void 0:n[e]:void 0,hasData:e?null==r?void 0:r[e]:void 0,loadDataView:i})),[e,r,l,n,i,t])}},63:function(e,t,r){"use strict";r.d(t,"d",(function(){return o})),r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"a",(function(){return d})),r.d(t,"e",(function(){return p}));var a=r(26),i=r.n(a),n=r(42),l=r(11);function o({reportType:e,allSeries:t}){const r=t.map((e=>Object(l.a)(e)));return`#?reportType=${e}&sr=${Object(l.c)(i.a.encode(r))}`}function s(e,t,r){const a=null==r?void 0:r.fields.find((t=>t.name===e));return a&&r?[Object(n.buildPhraseFilter)(a,t,r)]:[]}function u(e,t,r){return(null==r?void 0:r.fields.find((t=>t.name===e)))&&r?t.map((t=>Object(n.buildQueryFilter)({query_string:{fields:[e],query:`*${t}*`}},r.id,""))):[]}function c(e,t,r){const a=null==r?void 0:r.fields.find((t=>t.name===e));return a&&r?1===t.length?[Object(n.buildPhraseFilter)(a,t[0],r)]:[Object(n.buildPhrasesFilter)(a,t,r)]:[]}function d(e,t){const r=null==t?void 0:t.fields.find((t=>t.name===e));return r&&t?[Object(n.buildExistsFilter)(r,t)]:[]}function p({urlFilters:e,initFilters:t,dataView:r}){const a=t?[...t]:[];return e.forEach((({field:e,values:t=[],notValues:i=[],wildcards:n=[],notWildcards:l=([]=[])})=>{if(t.length>0){const i=c(e,t,r);a.push(...i)}if(i.length>0){const t=c(e,i,r)[0];t.meta.negate=!0,a.push(t)}if(n.length>0){const t=u(e,n,r);a.push(...t)}if(l.length>0){const t=u(e,l,r)[0];t.meta.negate=!0,a.push(t)}})),a}},64:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return s}));var a=r(2),i=r.n(a),n=r(0);const l=Object(a.createContext)({});function o({children:e,reportTypes:t,dataTypes:r,reportConfigMap:n,setHeaderActionMenu:o,asPanel:s=!0,theme$:u,...c}){const[d,p]=Object(a.useState)(!1),f={asPanel:s,reportTypes:t,dataTypes:r,reportConfigMap:n,setHeaderActionMenu:o,theme$:u,isEditMode:d,setIsEditMode:p,...c};return i.a.createElement(l.Provider,{value:f},e)}function s(){const e=Object(a.useContext)(l);if(void 0===e)throw new Error("useExploratoryView must be used within a ExploratoryViewContextProvider");return e}n.i18n.translate("xpack.exploratoryView.expView.seriesBuilder.selectReportType",{defaultMessage:"No report type selected"})},68:function(e,t,r){"use strict";r.d(t,"b",(function(){return p})),r.d(t,"a",(function(){return f}));var a=r(2),i=r.n(a),n=r(7),l=r(46),o=r.n(l),s=r(0),u=r(18),c=r(60),d=r(6);const p=(e,t={})=>o.a.parse(e,t);function f({seriesId:e,series:t}){var r,a;const{firstSeries:l,setSeries:o,reportType:f}=Object(c.f)(),m=Object(u.useUiSetting)("dateFormat"),b=null===(r=t.time)||void 0===r?void 0:r.from,g=null===(a=t.time)||void 0===a?void 0:a.to,{from:y,to:h}=l.time,v=p(null!=b?b:y),w=p(null!=g?g:h,{roundUp:!0}),x=()=>{const e=p(y);return p(h,{roundUp:!0}).diff(e,"millisecond")};return i.a.createElement(n.EuiDatePickerRange,{fullWidth:!0,isCustom:!0,startDateControl:i.a.createElement(n.EuiDatePicker,{fullWidth:!0,selected:v,onChange:r=>{if(f===d.o.KPI){const a=x(),i=r.toISOString(),n=r.add(a,"millisecond").toISOString();o(e,{...t,time:{from:i,to:n}})}else{const a=r.toISOString();o(e,{...t,time:{from:a,to:g}})}},startDate:v,endDate:w,isInvalid:v>w,"aria-label":s.i18n.translate("xpack.exploratoryView.expView.dateRanger.startDate",{defaultMessage:"Start date"}),dateFormat:m.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"rightCenter"}),endDateControl:i.a.createElement(n.EuiDatePicker,{fullWidth:!0,showIcon:!1,selected:w,onChange:r=>{if(f===d.o.KPI){const a=x(),i=r.toISOString(),n=r.subtract(a,"millisecond").toISOString();o(e,{...t,time:{from:n,to:i}})}else{const a=r.toISOString();o(e,{...t,time:{from:b,to:a}})}},startDate:v,endDate:w,isInvalid:v>w,"aria-label":s.i18n.translate("xpack.exploratoryView.expView.dateRanger.endDate",{defaultMessage:"End date"}),dateFormat:m.replace("ss.SSS","ss"),showTimeSelect:!0,popoverPlacement:"rightCenter"})})}},71:function(e,t,r){"use strict";r.d(t,"b",(function(){return b})),r.d(t,"c",(function(){return g})),r.d(t,"a",(function(){return lens_attributes_LensAttributes}));var a=r(9),i=r.n(a),n=r(0),l=r(20),o=r(42),s=r(56);const u=e=>1===e.length?`${e.join(" or ")}`:`(${e.join(" or ")})`;function c(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")}var d=r(6),p=r(68);function f({label:e,layerId:t,dataView:r,columnFilter:a,lensFormulaHelper:i,formula:n,format:l}){var o;const s=`y-axis-column-${t}`;let u=null!=n?n:"count() / overall_sum(count())";a&&(u=null!=n?n:`count(kql='${a}') / overall_sum(count(kql='${a}'))`);const{columns:c}=null!==(o=null==i?void 0:i.insertOrReplaceFormulaColumn(s,{formula:u,label:e,format:"percent"!==l&&l?void 0:{id:"percent",params:{decimals:0}}},{columns:{},columnOrder:[]},r))&&void 0!==o?o:{columns:{}},{[s]:d,...p}=c;return{main:c[s],supportingColumns:p}}function m(e){return`indexpattern-datasource-layer-${e}`}function b(e){return{sourceField:e,dataType:"number",isBucketed:!1,scale:"ratio"}}const g=(e,t)=>{var r;const a=null!==(r=e.metricOptions)&&void 0!==r?r:[];if(t&&a){var i;const e=a.find((e=>"items"in e?e.id===t:e.field===t||e.id===t));if(e&&"items"in e){const r=e.items.find((e=>e.id===t||e.field===t));return r?{...null!=r?r:{},fieldName:t,columnLabel:null==r?void 0:r.label,columnField:null==r?void 0:r.field}:e.items}return{...null!=e?e:{},fieldName:null!==(i=null==e?void 0:e.field)&&void 0!==i?i:t,columnLabel:null==e?void 0:e.label,columnField:null==e?void 0:e.field}}return{fieldName:t}};class lens_attributes_LensAttributes{constructor(e,t,r){i()(this,"layers",void 0),i()(this,"visualization",void 0),i()(this,"layerConfigs",[]),i()(this,"isMultiSeries",void 0),i()(this,"seriesReferenceLines",void 0),i()(this,"globalFilter",void 0),i()(this,"reportType",void 0),i()(this,"lensFormulaHelper",void 0),this.layers={},this.seriesReferenceLines={},this.reportType=t,this.lensFormulaHelper=r,this.isMultiSeries=e.length>1,e.forEach((({seriesConfig:e,operationType:r})=>{r&&t!==d.o.SINGLE_METRIC&&e.yAxisColumns.forEach((e=>{void 0!==typeof e.operationType&&(e.operationType=r)}))})),this.layerConfigs=e,this.globalFilter=this.getGlobalFilter(this.isMultiSeries),t!==d.o.SINGLE_METRIC&&(this.layers=this.getLayers(),this.visualization=this.getXyState())}getGlobalFilter(e){if(e)return;const t=this.layerConfigs[0].seriesConfig.query?` and ${this.layerConfigs[0].seriesConfig.query.query}`:"";return{query:`${this.getLayerFilters(this.layerConfigs[0],this.layerConfigs.length)}${t}`,language:"kuery"}}getBreakdownColumn({sourceField:e,layerId:t,layerConfig:r,alphabeticOrder:a,size:i=10}){var n,l;const{dataView:o,seriesConfig:s,selectedMetricField:u}=r,c=o.getFieldByName(e),{metricOptions:p}=s,{sourceField:f}=s.yAxisColumns[0],m=null!==(n=s.labels)&&void 0!==n?n:{},b=Boolean(p&&(null===(l=p.find((e=>e.id===u)))||void 0===l?void 0:l.formula))||f===d.l;let g={type:"column",columnId:`y-axis-column-${t}-0`};return b?g={type:"custom"}:a&&(g={type:"alphabetical",fallback:!0}),{sourceField:e,label:m[e],dataType:null==c?void 0:c.type,operationType:"terms",scale:"ordinal",isBucketed:!0,params:{orderBy:g,size:i,orderDirection:"desc",otherBucket:!0,missingBucket:!1,...b?{orderAgg:{label:"Count of records",dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:"___records___"}}:{}}}}getNumberRangeColumn(e,t,r){var a;return{sourceField:e,label:null!==(a=t.labels[e])&&void 0!==a?a:r,dataType:"number",operationType:"range",isBucketed:!0,scale:"interval",params:{type:"histogram",ranges:[{from:0,to:1e3,label:""}],maxBars:"auto"}}}getFiltersColumn({label:e,paramFilters:t}){return{label:null!=e?e:"Filters",dataType:"string",operationType:"filters",scale:"ordinal",isBucketed:!0,params:{filters:t}}}getNumberColumn({seriesConfig:e,label:t,sourceField:r,columnType:a,columnFilter:i,operationType:n}){if("operation"===a||n){if(n&&["median","average","sum","min","max","unique_count"].includes(n))return this.getNumberOperationColumn({sourceField:r,operationType:n,label:t,seriesConfig:e,columnFilter:i});if("last_value"===n)return this.getLastValueOperationColumn({sourceField:r,operationType:n,label:t,seriesConfig:e,columnFilter:i});if(null!=n&&n.includes("th"))return this.getPercentileNumberColumn(r,n,e,t)}return this.getNumberRangeColumn(r,e,t)}getLastValueOperationColumn({sourceField:e,label:t,seriesConfig:r,operationType:a,columnFilter:i}){return{...b(e),operationType:a,label:t||r.labels[e],filter:i,params:{sortField:"@timestamp",showArrayValues:!1}}}getNumberOperationColumn({sourceField:e,label:t,seriesConfig:r,operationType:a,columnFilter:i}){return{...b(e),label:null!=t?t:n.i18n.translate("xpack.exploratoryView.expView.columns.operation.label",{defaultMessage:"{operationType} of {sourceField}",values:{sourceField:r.labels[e],operationType:Object(l.capitalize)(a)}}),customLabel:!0,filter:i,operationType:a,params:"unique_count"===a?{emptyAsNull:!0}:{}}}getPercentileBreakdowns(e,t,r){const a=e.seriesConfig.yAxisColumns,{sourceField:i,label:n}=a[0],l={};for(let a=1;a<d.j.length;a++)l[`y-axis-column-${a}`]={...this.getColumnBasedOnType({sourceField:i,operationType:d.j[a],label:n,layerConfig:e,layerId:t,colIndex:a}),filter:{query:r||"",language:"kuery"}};return l}getPercentileNumberColumn(e,t,r,a){var i,l;return{...b(e),label:null!=a?a:n.i18n.translate("xpack.exploratoryView.expView.columns.label",{defaultMessage:"{percentileValue} percentile of {sourceField}",values:{sourceField:null===(i=r.labels[e])||void 0===i?void 0:i.toLowerCase(),percentileValue:t}}),operationType:"percentile",params:(l=t,{percentile:Number(l.split("th")[0])}),customLabel:!0}}getDateHistogramColumn(e){return{sourceField:e,dataType:"date",isBucketed:!0,label:"@timestamp",operationType:"date_histogram",params:{interval:"auto",includeEmptyRows:!0},scale:"interval"}}getTermsColumn(e,t){return{operationType:"terms",sourceField:e,label:"Top values of "+t||!1,dataType:"string",isBucketed:!0,scale:"ordinal",params:{size:10,orderBy:{type:"alphabetical",fallback:!1},orderDirection:"desc"}}}getXAxis(e,t){const{xAxisColumn:r}=e.seriesConfig;let a=null==r?void 0:r.sourceField;if(!a)return[r];if(a===d.q)return this.getBreakdownColumn({layerId:t,layerConfig:e,sourceField:e.breakdown||e.seriesConfig.breakdownFields[0]});if(a===d.m){const{paramFilters:t}=this.getFieldMeta(a,e);if(t)return this.getFiltersColumn({paramFilters:t})}if(a===d.n){const t=g(e.seriesConfig,e.selectedMetricField);if(!Array.isArray(t)){const{timestampField:e="@timestamp"}=t;a=e}}return this.getColumnBasedOnType({layerConfig:e,layerId:t,label:r.label,sourceField:a})}getColumnBasedOnType({sourceField:e,label:t,layerConfig:r,operationType:a,colIndex:i,layerId:n,metricOption:l}){const{breakdown:o,seriesConfig:s}=r,u=this.getFieldMeta(e,r,l),{format:c,formula:p,fieldMeta:m,columnType:b,fieldName:g,columnLabel:y,timeScale:h,columnFilters:v,showPercentileAnnotations:w}=u;if(b===d.d)return f({layerId:n,formula:p,format:c,label:null!=y?y:t,dataView:r.dataView,lensFormulaHelper:this.lensFormulaHelper}).main;w&&this.addThresholdLayer(g,n,r);const{type:x}=null!=m?m:{};return b===d.p?this.getTermsColumn(g,t||y):g===d.k||b===d.c?this.getRecordsColumn(t||y,void 0!==i?null==v?void 0:v[i]:void 0,h):"date"===x?this.getDateHistogramColumn(g):"number"===x&&o===d.i?{...this.getPercentileNumberColumn(g,a||d.j[0],s,t||y),filter:void 0!==i?null==v?void 0:v[i]:void 0}:"number"===x?this.getNumberColumn({sourceField:g,columnType:b,columnFilter:null==v?void 0:v[0],operationType:a,label:t||y,seriesConfig:r.seriesConfig}):"unique_count"===a||"string"===x?this.getNumberOperationColumn({sourceField:g,operationType:"unique_count",label:t||y,seriesConfig:r.seriesConfig,columnFilter:null==v?void 0:v[0]}):this.getDateHistogramColumn(g)}getCustomFieldName({sourceField:e,layerConfig:t}){return g(t.seriesConfig,e)}getFieldMeta(e,t,r){if(e===d.m){var a;const i=r?{...r,columnLabel:r.label,columnField:r.field,fieldName:r.field}:g(t.seriesConfig,t.selectedMetricField);if(Array.isArray(i))return{fieldName:e,items:i};const{palette:n,fieldName:l,columnType:o,columnLabel:s,columnFilters:u,timeScale:c,paramFilters:d,showPercentileAnnotations:p,formula:f,format:m}=i;return{format:m,formula:f,palette:n,fieldMeta:t.dataView.getFieldByName(l),fieldName:l,columnType:o,columnLabel:s,columnFilters:u,timeScale:c,paramFilters:d,showPercentileAnnotations:null!==(a=t.showPercentileAnnotations)&&void 0!==a?a:p}}return{fieldMeta:t.dataView.getFieldByName(e),fieldName:e}}getMainYAxis(e,t,r){const{breakdown:a}=e,{sourceField:i,operationType:n,label:l,timeScale:o}=e.seriesConfig.yAxisColumns[0];let s=e.name||l;if(e.seriesConfig.reportType===d.o.CORE_WEB_VITAL&&(s=l),i===d.l)return[f({label:s,layerId:t,columnFilter:r,dataView:e.dataView,lensFormulaHelper:this.lensFormulaHelper}).main];if(i===d.k||!i)return[this.getRecordsColumn(s,void 0,o)];const u=this.getFieldMeta(i,e);var c;if(!u.fieldMeta&&u.fieldName===d.k)return[this.getRecordsColumn(s,null===(c=u.columnFilters)||void 0===c?void 0:c[0],o)];if("items"in u){const{items:r}=u;return null==r?void 0:r.map(((r,a)=>this.getColumnBasedOnType({layerConfig:e,layerId:t,label:r.label,sourceField:d.m,metricOption:r,operationType:n})))}return[this.getColumnBasedOnType({sourceField:i,label:s,layerConfig:e,colIndex:0,operationType:a===d.i?d.j[0]:n,layerId:t})]}getChildYAxises(e,t,r,a){const{breakdown:i}=e,n={},l=e.seriesConfig.yAxisColumns,{sourceField:o,label:s}=l[0];if(o===d.l&&t&&!a)return f({label:s,layerId:t,columnFilter:r,dataView:e.dataView,lensFormulaHelper:this.lensFormulaHelper}).supportingColumns;if(o&&!a){const{columnLabel:r,formula:a,columnType:i}=this.getFieldMeta(o,e);if(i===d.d)return f({label:r,layerId:t,formula:a,dataView:e.dataView,lensFormulaHelper:this.lensFormulaHelper}).supportingColumns}if(1===l.length&&i===d.i)return this.getPercentileBreakdowns(e,t,r);if(1===l.length)return n;for(let r=1;r<l.length;r++){const{sourceField:a,operationType:i,label:o}=l[r];n[`y-axis-column-${r}`]=this.getColumnBasedOnType({sourceField:a,operationType:i,label:o,layerConfig:e,colIndex:r,layerId:t})}return n}getRecordsColumn(e,t,r){return{dataType:"number",isBucketed:!1,label:e||"Count of records",customLabel:!0,operationType:"count",scale:"ratio",sourceField:d.k,filter:t,...r?{timeScale:r}:{}}}getLayerFilters(e,t){const{filters:r,time:a,seriesConfig:{baseFilters:i,reportType:n}}=e;let l="";n!==d.o.KPI&&t>1&&a&&(l+=`@timestamp >= ${a.from} and @timestamp <= ${a.to}`),null==i||i.forEach((e=>{var t,r,a;const i=e;if(null!==(t=i.query)&&void 0!==t&&t.match_phrase){const e=Object.keys(i.query.match_phrase)[0],t=`${e}: ${i.query.match_phrase[e]}`;l.length>0?l+=` and ${t}`:l+=t}if(null!==(r=i.query)&&void 0!==r&&null!==(a=r.bool)&&void 0!==a&&a.should){var n;const e=[];let t="";null===(n=i.query)||void 0===n||n.bool.should.forEach((r=>{r.match_phrase&&(t=Object.keys(r.match_phrase)[0],e.push(r.match_phrase[t]))}));const r=`${t}: (${e.join(" or ")})`;l.length>0?l+=` and ${r}`:l+=r}const s=e;if(Object(o.isExistsFilter)(s)){var u;const e=`${null===(u=s.query.exists)||void 0===u?void 0:u.field} : *`;l.length>0?l+=` and ${e}`:l+=e}}));const s=(e=>{let t="";return e.forEach((({field:e,values:r,notValues:a,wildcards:i,notWildcards:n})=>{const l=null==r?void 0:r.map((e=>`"${c(e)}"`)),o=null==a?void 0:a.map((e=>`"${c(e)}"`)),s=null==i?void 0:i.map((e=>`*${e}*`)),d=null==n?void 0:n.map((e=>`*${e}*`));l&&(null==l?void 0:l.length)>0&&(t.length>0&&(t+=" and "),t+=`${e}: ${u(l)}`),o&&(null==o?void 0:o.length)>0&&(t.length>0&&(t+=" and "),t+=`not (${e}: ${u(o)})`),s&&(null==s?void 0:s.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${u(s)})`),d&&(null==d?void 0:d.length)>0&&(t.length>0&&(t+=" and "),t+=`(${e}: ${u(d)})`)})),t})(null!=r?r:[]);return l?s?`${s} and ${l}`:l:s}getTimeShift(e,t,r){if(0===r||e.seriesConfig.reportType!==d.o.KPI||!t.time)return null;const{time:{from:a}}=e,{time:{from:i}}=t,n=Object(p.b)(a),l=Object(p.b)(i),o=n&&l?Math.abs(n.diff(l,"days")):0;if(o>1)return o+"d";const s=n&&l?Math.abs(null==n?void 0:n.diff(l,"hours")):0;return 0===s?null:s+"h"}getLayers(){const e={},t=this.layerConfigs;return t.forEach(((r,a)=>{const{breakdown:i,seriesConfig:n}=r,l=`layer${a}`,o=this.getLayerFilters(r,t.length),s=this.getTimeShift(this.layerConfigs[0],r,a),u=this.getMainYAxis(r,l,o),{sourceField:c}=n.xAxisColumn,p=Boolean(i&&c!==d.q&&i!==d.i);e[l]=this.getDataLayer({layerId:l,layerConfig:r,mainYAxises:u,columnFilter:o,timeShift:s,hasBreakdownColumn:p})})),Object.entries(this.seriesReferenceLines).forEach((([t,{layerData:r}])=>{e[t]=r})),e}getDataLayer({hasBreakdownColumn:e,layerId:t,layerConfig:r,columnFilter:a,mainYAxises:i,timeShift:n}){const l={};null==i||i.forEach(((e,r)=>{var i,o,s;let u=a||(null===(i=e.filter)||void 0===i?void 0:i.query);a&&null!==(o=e.filter)&&void 0!==o&&o.query&&(u=`${a} and ${e.filter.query}`);const c=n?`${e.label}(${n})`:e.label;l[`y-axis-column-${t}-${r}`]={...e,label:c,filter:{query:null!==(s=u)&&void 0!==s?s:"",language:"kuery"},...n?{timeShift:n}:{}}}));const{breakdown:o}=r,s=e?this.getBreakdownColumn({layerId:t,sourceField:o,layerConfig:r}):null,u={[`x-axis-column-${t}`]:this.getXAxis(r,t)};return{columnOrder:[...e?[`breakdown-column-${t}`]:[],...Object.keys(u),...Object.keys(l),...Object.keys(this.getChildYAxises(r,t,a))],columns:{...u,...l,...e?{[`breakdown-column-${t}`]:s}:{},...this.getChildYAxises(r,t,a)},incompleteColumns:{}}}getXyState(){return{legend:{isVisible:!0,showSingleSeries:!0,position:"right",legendSize:s.LegendSize.AUTO,shouldTruncate:!1},valueLabels:"hide",fittingFunction:"Linear",curveType:"CURVE_MONOTONE_X",axisTitlesVisibilitySettings:{x:!1,yLeft:!this.isMultiSeries,yRight:!this.isMultiSeries},tickLabelsVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},gridlinesVisibilitySettings:{x:!1,yLeft:!0,yRight:!0},preferredSeriesType:"line",layers:this.getDataLayers(),...this.layerConfigs[0].seriesConfig.yTitle?{yTitle:this.layerConfigs[0].seriesConfig.yTitle}:{}}}getDataLayers(){const e=this.layerConfigs.map(((e,t)=>{var r,a,i,n;const{sourceField:l}=e.seriesConfig.yAxisColumns[0];let o=e.seriesConfig.palette;if(l){const t=this.getFieldMeta(l,e);t.palette&&(o=t.palette)}const s=`layer${t}`,u=this.getLayerFilters(e,this.layerConfigs.length);return{accessors:[...(null!==(r=this.getMainYAxis(e,s,u))&&void 0!==r?r:[]).map(((e,t)=>`y-axis-column-${s}-${t}`)),...Object.keys(this.getChildYAxises(e,`layer${t}`,void 0,!0))],layerId:`layer${t}`,layerType:"data",seriesType:e.seriesType||e.seriesConfig.defaultSeriesType,palette:null!==(a=o)&&void 0!==a?a:e.seriesConfig.palette,yConfig:e.seriesConfig.yConfig||[{forAccessor:`y-axis-column-layer${t}-0`,color:e.color,axisMode:(null===(i=e.dataView.fieldFormatMap[e.selectedMetricField])||void 0===i?void 0:i.id)===(null===(n=this.layerConfigs[0].dataView.fieldFormatMap[this.layerConfigs[0].selectedMetricField])||void 0===n?void 0:n.id)?"left":"right"}],xAccessor:`x-axis-column-layer${t}`,...e.breakdown&&e.breakdown!==d.i&&e.seriesConfig.xAxisColumn.sourceField!==d.q?{splitAccessor:`breakdown-column-layer${t}`}:{},...this.layerConfigs[0].seriesConfig.yTitle?{yTitle:this.layerConfigs[0].seriesConfig.yTitle}:{}}})),t=[];return Object.entries(this.seriesReferenceLines).forEach((([e,{layerState:r}])=>{t.push(r[0])})),[...e,...t]}addThresholdLayer(e,t,{seriesConfig:r,dataView:a}){const i=`${t}-reference-lines`,n=this.getThresholdColumns(e,i,r),l={columnOrder:Object.keys(n),columns:n,incompleteColumns:{}},o=this.getThresholdLayer(e,i,r);this.seriesReferenceLines[i]={layerData:l,layerState:o,dataView:a}}getThresholdLayer(e,t,r){const a=this.getThresholdColumns(e,t,r);return[{layerId:t,accessors:Object.keys(a),layerType:"referenceLine",yConfig:Object.keys(a).map((e=>({axisMode:"bottom",color:"#6092C0",forAccessor:e,lineStyle:"solid",lineWidth:2,textVisibility:!0})))}]}getThresholdColumns(e,t,r){const a={};return["50th","75th","90th","95th","99th"].forEach((i=>{a[`${i}-percentile-reference-line-${t}`]={...this.getPercentileNumberColumn(e,i,r),label:i}})),a}getReferences(){const e=Array.from(new Set([...this.layerConfigs.map((({dataView:e})=>e.id))])),t={},r=Object.entries(this.seriesReferenceLines).map((([e,{dataView:r}])=>(t[r.id]=r.toSpec(!1),{id:r.id,name:m(e),type:"index-pattern"}))),a=[...e.map((e=>({id:e,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"}))),...this.layerConfigs.map((({dataView:e},r)=>(t[e.id]=e.toSpec(!1),{id:e.id,name:m(`layer${r}`),type:"index-pattern"}))),...r];return Object.entries(this.seriesReferenceLines).map((([e,{dataView:t}])=>({id:t.id,name:m(e),type:"index-pattern"}))),{internalReferences:a,adHocDataViews:t}}getJSON(e="lnsXY",t){const r=this.globalFilter||this.layerConfigs[0].seriesConfig.query,{internalReferences:a,adHocDataViews:i}=this.getReferences();return{title:"Prefilled from exploratory view app",description:t?`Last refreshed at ${new Date(t).toISOString()}`:"",visualizationType:e,references:[],state:{internalReferences:a,adHocDataViews:i,datasourceStates:{formBased:{layers:this.layers}},visualization:this.visualization,query:r||{query:"",language:"kuery"},filters:[]}}}}},72:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return c}));var a=r(0),i=r(7),n=r(3),l=r(6),o=r(63);const s="summary: * and (summary.final_attempt: true or not summary.final_attempt: *)";function u({dataView:e}){return{defaultSeriesType:"line",xAxisColumn:{},yAxisColumns:[{operationType:"median"}],breakdownFields:[],filterFields:[],seriesTypes:[],hasOperationType:!0,definitionFields:[{field:"monitor.name",nested:n.o,singleSelection:!0},{field:"url.full",filters:Object(o.a)("summary.up",e)}],reportType:"single-metric",baseFilters:[],metricOptions:[{id:"monitor_availability",columnType:l.d,label:"Availability",formula:"1- (count(kql='summary.down > 0') / count())",metricStateOptions:{colorMode:"Labels",palette:{name:"custom",type:"palette",params:{steps:3,name:"custom",reverse:!1,rangeType:"number",rangeMin:0,rangeMax:1,progression:"fixed",stops:[{color:"#cc5642",stop:.9},{color:"#d6bf57",stop:.95},{color:"#209280",stop:1.9903347477604902}],colorStops:[{color:"#cc5642",stop:.8},{color:"#d6bf57",stop:.9},{color:"#209280",stop:.95}],continuity:"above",maxSteps:5}},titlePosition:"bottom"},columnFilter:{language:"kuery",query:s}},{id:"monitor_duration",field:"monitor.duration.us",label:a.i18n.translate("xpack.exploratoryView.expView.avgDuration",{defaultMessage:"Avg. Duration"}),metricStateOptions:{titlePosition:"bottom"},columnFilter:{language:"kuery",query:"summary.up: *"}},{id:"step_duration",field:n.n,label:a.i18n.translate("xpack.exploratoryView.expView.stepDuration",{defaultMessage:"Total step duration"}),metricStateOptions:{titlePosition:"bottom",textAlign:"center"}},{id:"monitor_total_runs",label:a.i18n.translate("xpack.exploratoryView.expView.totalRuns",{defaultMessage:"Total Runs"}),metricStateOptions:{titlePosition:"bottom"},columnType:l.d,format:"number",field:l.k,columnFilter:{language:"kuery",query:"summary: *"}},{id:"monitor_successful",label:a.i18n.translate("xpack.exploratoryView.expView.successful",{defaultMessage:"Successful count"}),metricStateOptions:{titlePosition:"bottom"},format:"number",field:l.k,columnFilter:{language:"kuery",query:"summary.down: 0"}},{id:"monitor_errors",label:a.i18n.translate("xpack.exploratoryView.expView.errors",{defaultMessage:"Errors"}),metricStateOptions:{titlePosition:"bottom",colorMode:"Labels",palette:c("danger")},columnType:l.d,formula:`unique_count(state.id, kql='${s} and monitor.status: "down"')`,format:"number"},{id:"monitor_failed_tests",label:a.i18n.translate("xpack.exploratoryView.expView.failedTests",{defaultMessage:"Failed tests"}),metricStateOptions:{titlePosition:"bottom"},field:l.k,format:"number",columnFilter:{language:"kuery",query:"summary.status: down and summary.final_attempt: true"}}],labels:l.e}}const c=e=>{const t=Object(i.euiPaletteForStatus)(5);let r=null!=e?e:t[3];return"danger"===e&&(r=t[3]),{name:"custom",type:"palette",params:{steps:3,name:"custom",reverse:!1,rangeType:"number",rangeMin:0,progression:"fixed",stops:[{color:r,stop:100}],colorStops:[{color:r,stop:0}],continuity:"above",maxSteps:5}}}},73:function(e,t,r){"use strict";r.d(t,"a",(function(){return SingleMetricLensAttributes}));var a=r(9),i=r.n(a),n=r(72),l=r(6),o=r(71);class SingleMetricLensAttributes extends o.a{constructor(e,t,r){super(e,t,r),i()(this,"columnId",void 0),i()(this,"metricStateOptions",void 0),this.layers={},this.reportType=t,this.layerConfigs=e,this.isMultiSeries=e.length>1,this.columnId="layer-0-column-1",this.globalFilter=this.getGlobalFilter(this.isMultiSeries);const a=this.getSingleMetricLayer();this.layers={layer0:a},this.visualization=this.getMetricState()}getSingleMetricLayer(){const{seriesConfig:e,selectedMetricField:t,operationType:r,dataView:a,name:i}=this.layerConfigs[0],n=Object(o.c)(e,t);if(!Array.isArray(n)){const{columnFilter:s,columnField:u,columnLabel:c,columnType:d,formula:p,metricStateOptions:f,format:m,emptyAsNull:b=!0}=n;if(this.metricStateOptions=f,d===l.d&&p)return this.getFormulaLayer({formula:p,label:null!=i?i:c,dataView:a,format:m,filter:s});const g=t.startsWith("Records")||t.startsWith("records")?"Records":u||t;return(null==r?void 0:r.includes("th"))?this.getPercentileLayer({sourceField:g,operationType:r,seriesConfig:e,columnLabel:c,columnFilter:s}):{columns:{[this.columnId]:{...Object(o.b)(g),customLabel:!0,label:null!=i?i:c,operationType:g===l.k?"count":r||"median",filter:s,params:{emptyAsNull:b}}},columnOrder:[this.columnId],incompleteColumns:{}}}}getFormulaLayer({formula:e,label:t,dataView:r,format:a,filter:i}){var n;return null===(n=this.lensFormulaHelper)||void 0===n?void 0:n.insertOrReplaceFormulaColumn(this.columnId,{formula:e,label:t,filter:i,format:"percent"!==a&&a?void 0:{id:"percent",params:{decimals:1}}},{columns:{},columnOrder:[]},r)}getPercentileLayer({sourceField:e,operationType:t,seriesConfig:r,columnLabel:a,columnFilter:i}){return{columns:{[this.columnId]:{...this.getPercentileNumberColumn(e,t,r),label:null!=a?a:"",filter:i,customLabel:!0}},columnOrder:[this.columnId],incompleteColumns:{}}}getMetricState(){var e;const{color:t}=this.layerConfigs[0],r={...null!==(e=this.metricStateOptions)&&void 0!==e?e:{},...t?{colorMode:"Labels",palette:Object(n.b)(t)}:{}};return{accessor:this.columnId,layerId:"layer0",layerType:"data",...r,size:"s"}}}},74:function(e,t,r){"use strict";r.d(t,"b",(function(){return d})),r.d(t,"a",(function(){return p}));var a=r(0),i=r(72),n=r(6),l=r(1),o=r(3),s=r(63);const u="summary.up",c="summary.down",d=e=>!!e&&[o.j,o.i,o.d,o.f,o.n,o.h].includes(e);function p({dataView:e}){return{reportType:n.o.KPI,defaultSeriesType:"bar_stacked",seriesTypes:[],xAxisColumn:{sourceField:"@timestamp"},yAxisColumns:[{sourceField:n.m,operationType:"median"}],hasOperationType:!0,filterFields:["observer.geo.name","monitor.type","tags","url.full"],breakdownFields:["observer.geo.name","monitor.type","monitor.name",o.o,n.i],baseFilters:[],definitionFields:[{field:"monitor.name",nested:o.o,singleSelection:!0},{field:"url.full",filters:Object(s.a)("summary.up",e)}],metricOptions:[{label:l.I,field:o.a,id:o.a,columnType:n.h},{label:"Monitor availability",id:"monitor_availability",columnType:n.d,formula:`1- (count(kql='${i.a} and summary.down > 0') / count(kql='summary: *'))`,columnFilter:{language:"kuery",query:i.a}},{label:"Monitor Errors",id:"monitor_errors",columnType:n.h,field:"monitor.check_group",columnFilters:[{language:"kuery",query:`${i.a} and summary.down > 0`}]},{label:a.i18n.translate("xpack.exploratoryView.expView.successful",{defaultMessage:"Successful count"}),id:"monitor_successful",field:"monitor.check_group",columnType:n.h,columnFilters:[{language:"kuery",query:'summary: * and summary.down: 0 and monitor.status: "up"'}]},{label:"Total runs",id:"total_test_runs",field:n.k,columnType:n.h,columnFilters:[{language:"kuery",query:"summary: *"}]},{field:u,id:u,label:l.kb,columnType:n.h,palette:{type:"palette",name:"status"}},{field:c,id:c,label:l.q,columnType:n.h,palette:{type:"palette",name:"status"}},{label:l.eb,field:o.n,id:o.n,columnType:n.h,columnFilters:[m]},{label:l.C,field:o.j,id:o.j,columnType:n.h,columnFilters:f(o.j)},{label:l.t,field:o.i,id:o.i,columnType:n.h,columnFilters:f(o.i)},{label:l.l,field:o.f,id:o.f,columnType:n.h,columnFilters:f(o.f)},{label:l.T,field:o.h,id:o.h,columnType:n.h,columnFilters:f(o.h)},{label:l.h,field:o.d,id:o.d,columnType:n.h,columnFilters:f(o.d)},{label:l.N,id:"network_timings",columnType:n.h,items:o.b.map((e=>{var t;return{label:null!==(t=n.e[e])&&void 0!==t?t:e,field:e,id:e,columnType:n.h,columnFilters:f(e,"journey/network_info")}}))}],labels:{...n.e,[u]:l.kb,[c]:l.q}}}const f=(e,t="step/metrics")=>[{language:"kuery",query:`synthetics.type: ${t} and ${e}: * and ${e} > 0`}],m={language:"kuery",query:"synthetics.type: step/end"}},75:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),i=r(30).isClient?window:null,n=function(e){return!!e.addEventListener},l=function(e){return!!e.on};t.default=function(e,t,r,o){void 0===r&&(r=i),a.useEffect((function(){if(t&&r)return n(r)?r.addEventListener(e,t,o):l(r)&&r.on(e,t,o),function(){n(r)?r.removeEventListener(e,t,o):l(r)&&r.off(e,t,o)}}),[e,t,r,JSON.stringify(o)])}},84:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return y})),r.d(t,"c",(function(){return h}));var a=r(2),i=r(20),n=r(8),l=r(88),o=r(18),s=r(5),u=r(71),c=r(60),d=r(89),p=r(62),f=r(6),m=r(64),b=r(73);const g=e=>Object.entries(null!=e?e:{}).map((([e,t])=>({field:e,values:Array.isArray(t)?t:[t]}))).filter((({values:e})=>!e.includes(s.a)));function y(e,t,r,a,n,l){const o=[];return e.forEach(((e,s)=>{const u=null==a?void 0:a[null==e?void 0:e.dataType];if(u&&!Object(i.isEmpty)(e.reportDefinitions)&&!e.hidden&&e.selectedMetricField){var c,p,m;const a=Object(d.a)({reportType:t,dataView:u,dataType:e.dataType,reportConfigMap:n,spaceId:l}),i=(null!==(c=e.filters)&&void 0!==c?c:[]).concat(g(e.reportDefinitions),g(e.textReportDefinitions)),y=null===(p=r.eui)||void 0===p?void 0:p[`euiColorVis${s}`];let h=e.color;var b;"single-metric"!==t&&(h=null!==(b=e.color)&&void 0!==b?b:y),o.push({filters:i,dataView:u,seriesConfig:a,time:e.time,name:e.name,color:h,breakdown:e.breakdown===f.f?void 0:e.breakdown,seriesType:e.seriesType,operationType:e.operationType,reportDefinitions:null!==(m=e.reportDefinitions)&&void 0!==m?m:{},selectedMetricField:e.selectedMetricField,showPercentileAnnotations:e.showPercentileAnnotations})}})),o}const h=()=>{const{storage:e,allSeries:t,lastRefresh:r,reportType:s}=Object(c.f)(),{dataViews:d}=Object(p.b)(),f=Object(n.useKibanaSpace)(),{reportConfigMap:g}=Object(m.b)(),h=Object(n.useTheme)(),v=(()=>{const{services:{lens:e}}=Object(o.useKibana)(),{data:t}=Object(n.useFetcher)((async()=>e.stateHelperApi()),[e]);return Object(a.useMemo)((()=>{if(t)return t.formula}),[t])})();return Object(a.useMemo)((()=>{var t,a;const n=Object(c.d)(null!==(t=e.get(c.c))&&void 0!==t?t:[]),o=e.get(c.e);if(Object(i.isEmpty)(d)||Object(i.isEmpty)(n)||!o||!v)return null;const s=y(n,o,h,d,g,null===(a=f.space)||void 0===a?void 0:a.id);return s.length<1?null:"single-metric"===o?new b.a(s,o,v).getJSON("lnsLegacyMetric",r):"heatmap"===o?new l.a(s,o,v).getJSON("lnsHeatmap",r):new u.a(s,o,v).getJSON("lnsXY",r)}),[d,s,e,h,r,t,v])}},85:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(31),i=r(2),n=a.__importDefault(r(111));t.default=function(e,t){var r=i.useState(t),a=r[0],l=r[1];return n.default((function(){var t=e.subscribe(l);return function(){return t.unsubscribe()}}),[e]),a}},87:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return n}));var a=r(8);const i=(e,t,r)=>{l(e,t,r),s(e,t,r),o(e)},n=(e,t,r)=>{u(e,t,r)},l=(e,t,r)=>{const i=(e=>{const t=new Map;return e.forEach((e=>{const r=t.get(e.dataType),a=(e.filters||[]).map((e=>e.field));r?r.push(...a):t.set(e.dataType,[...a])})),t})(t);[...i.keys()].forEach((t=>{(i.get(t)||[]).forEach((i=>{e({app:"observability-overview",metricType:a.METRIC_TYPE.COUNT,metric:`exploratory_view__filters__filter_${i}`}),e({app:"observability-overview",metricType:a.METRIC_TYPE.COUNT,metric:`exploratory_view__filters__report_type_${r}__data_type_${t}__filter_${i}`})}))}))},o=e=>{e({app:"observability-overview",metricType:a.METRIC_TYPE.COUNT,metric:"exploratory_view_apply_changes"})},s=(e,t,r)=>{t.map((e=>({dataType:e.dataType,metricType:e.selectedMetricField}))).forEach((({dataType:t,metricType:i})=>{r&&t&&i&&e({app:"observability-overview",metricType:a.METRIC_TYPE.COUNT,metric:`exploratory_view__report_type_${r}__data_type_${t}__metric_type_${i}`})}))},u=(e,t,r)=>{const a=(i=(r-t)/1e3)<0||isNaN(i)?null:i>=60?"60+":i>=30?"30-60":i>=20?"20-30":i>=10?"10-20":i>=5?"5-10":"0-5";var i;a&&c(e,a)},c=(e,t)=>{e({app:"observability-overview",metricType:a.METRIC_TYPE.COUNT,metric:`exploratory_view__chart_loading_in_seconds_${t}`})}},88:function(e,t,r){"use strict";r.d(t,"a",(function(){return HeatMapLensAttributes}));var a=r(9),i=r.n(a),n=r(7),l=r(73);class HeatMapLensAttributes extends l.a{constructor(e,t,r){super(e,t,r),i()(this,"xColumnId",void 0),i()(this,"layerId",void 0),i()(this,"breakDownColumnId",void 0),this.xColumnId="layer-0-column-x-1",this.breakDownColumnId="layer-0-breakdown-column",this.layerId="layer0";const a=this.getSingleMetricLayer();a.columns[this.xColumnId]=this.getDateHistogramColumn("@timestamp");let n=[this.xColumnId];const l=e[0];l.breakdown&&(n=[this.breakDownColumnId,...n],a.columns[this.breakDownColumnId]=this.getBreakdownColumn({layerConfig:l,sourceField:l.breakdown,layerId:this.layerId,alphabeticOrder:!0})),a.columnOrder=[...n,...a.columnOrder],this.layers={layer0:a},this.visualization=this.getHeatmapState()}getHeatmapState(){const e=Object(n.euiPaletteRed)(5),t=this.layerConfigs[0];return{shape:"heatmap",layerId:this.layerId,layerType:"data",legend:{isVisible:!0,position:"right",type:"heatmap_legend"},gridConfig:{type:"heatmap_grid",isCellLabelVisible:!1,isYAxisLabelVisible:!0,isXAxisLabelVisible:!0,isYAxisTitleVisible:!1,isXAxisTitleVisible:!1,xTitle:""},valueAccessor:this.columnId,xAccessor:this.xColumnId,yAccessor:t.breakdown?this.breakDownColumnId:void 0,palette:{type:"palette",name:"negative",params:{name:"negative",continuity:"above",reverse:!1,stops:e.map(((e,t)=>({color:e,stop:0===t?1:20*t}))),rangeMin:0},accessor:this.columnId}}}}},89:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));const a=({reportType:e,dataType:t,spaceId:r,dataView:a,reportConfigMap:i})=>{var n;let l;if(null===(n=i[t])||void 0===n||n.some((t=>{const i=t({dataView:a,spaceId:r});return i.reportType===e&&(l=i),i.reportType===e})),!l)throw new Error(`No report config provided for dataType: ${t} and reportType: ${e}`);return l}},90:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return u}));var a=r(2),i=r.n(a),n=r(0),l=r(7),o=r(60);function s({seriesId:e,series:t,defaultOperationType:r}){const{setSeries:a}=Object(o.f)(),n=null==t?void 0:t.operationType;return i.a.createElement(u,{onChange:r=>{a(e,{...t,operationType:r})},operationType:n||r})}function u({operationType:e,onChange:t}){const r=[{value:"min",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.min",{defaultMessage:"Min"})},{value:"max",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.max",{defaultMessage:"Max"})},{value:"average",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.average",{defaultMessage:"Average"})},{value:"median",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.median",{defaultMessage:"Median"})},{value:"sum",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.sum",{defaultMessage:"Sum"})},{value:"last_value",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.lastValue",{defaultMessage:"Last value"})},{value:"unique_count",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.uniqueCount",{defaultMessage:"Unique count"})},{value:"25th",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.25thPercentile",{defaultMessage:"25th Percentile"})},{value:"75th",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.75thPercentile",{defaultMessage:"75th Percentile"})},{value:"90th",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.90thPercentile",{defaultMessage:"90th Percentile"})},{value:"95th",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.95thPercentile",{defaultMessage:"95th Percentile"})},{value:"99th",inputDisplay:n.i18n.translate("xpack.exploratoryView.expView.operationType.99thPercentile",{defaultMessage:"99th Percentile"})}];return i.a.createElement(l.EuiSuperSelect,{fullWidth:!0,"data-test-subj":"operationTypeSelect",valueOfSelected:e,options:r,onChange:t})}},91:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),i=r(116),n=r(117),l=r(118),o=r(119);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=s(a),c=s(i),d=s(n),p=s(l),f=s(o);function m(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var b={symbols:{"!":{postfix:{symbol:"!",f:function e(t){return t%1||!(+t>=0)?NaN:t>170?1/0:0===t?1:t*e(t-1)},notation:"postfix",precedence:6,rightToLeft:0,argCount:1},symbol:"!",regSymbol:"!"},"^":{infix:{symbol:"^",f:function(e,t){return Math.pow(e,t)},notation:"infix",precedence:5,rightToLeft:1,argCount:2},symbol:"^",regSymbol:"\\^"},"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:m,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:m,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"},sqrt:{func:{symbol:"sqrt",f:function(e){return Math.sqrt(e)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"sqrt",regSymbol:"sqrt\\b"}}},g=function(e){function t(t){var r;return r=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,c.default(r)}return d.default(t,e),t}(p.default(Error)),y=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function h(e,t){var r,a=e.pop();return t.push(a.f.apply(a,(r=[]).concat.apply(r,t.splice(-a.argCount)))),a.precedence}function v(e){return e.split("").reverse().join("")}var w=/--[\S]*/g;function x(e){return e.charAt(0).toUpperCase()+e.slice(1)}var E=["Top","Right","Bottom","Left"];function C(e,t){if(!e)return t.toLowerCase();var r=e.split("-");if(r.length>1)return r.splice(1,0,t),r.reduce((function(e,t){return""+e+x(t)}));var a=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===a?""+e+t:a}function k(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=r[0],n=r[1],l=void 0===n?i:n,o=r[2],s=void 0===o?i:o,u=r[3];return function(e,t){for(var r={},a=0;a<t.length;a+=1)(t[a]||0===t[a])&&(r[C(e,E[a])]=t[a]);return r}(e,[i,l,s,void 0===u?l:u])}function S(e,t){return e.substr(-t.length)===t}var T=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function F(e,t){if("string"!=typeof e)return t?[e,void 0]:e;var r=e.match(T);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit."),r?[parseFloat(e),r[2]]:[e,void 0]):r?parseFloat(e):e}var O=function(e){return function(t,r){void 0===r&&(r="16px");var a=t,i=r;if("string"==typeof t){if(!S(t,"px"))throw new g(69,e,t);a=F(t)}if("string"==typeof r){if(!S(r,"px"))throw new g(70,e,r);i=F(r)}if("string"==typeof a)throw new g(71,t,e);if("string"==typeof i)throw new g(72,r,e);return""+a/i+e}},j=O("em"),I=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function V(e){if("string"!=typeof e)return[e,""];var t=e.match(I);return t?[parseFloat(e),t[2]]:[e,void 0]}var M={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4},A=O("rem");function D(e,t,r,a){void 0===r&&(r="320px"),void 0===a&&(a="1200px");var i=V(e),n=i[0],l=i[1],o=V(t),s=o[0],u=o[1],c=V(r),d=c[0],p=c[1],f=V(a),m=f[0],b=f[1];if("number"!=typeof d||"number"!=typeof m||!p||!b||p!==b)throw new g(47);if("number"!=typeof n||"number"!=typeof s||l!==u)throw new g(48);if(l!==p||u!==b)throw new g(75);var y=(n-s)/(d-m);return"calc("+(s-y*m).toFixed(2)+(l||"")+" + "+(100*y).toFixed(2)+"vw)"}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var P,R,_=/^\s*data:([a-z]+\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,z={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function B(e,t){return t?' format("'+z[e]+'")':""}function $(e,t,r,a){var i=[];return t&&i.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&i.push(function(e,t,r){return function(e){return!!e.replace(/\s+/g," ").match(_)}(e)?'url("'+e+'")'+B(t[0],r):t.map((function(t){return'url("'+e+"."+t+'")'+B(t,r)})).join(", ")}(e,r,a)),i.join(", ")}function N(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function W(e){for(var t="",r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];for(var n=0;n<e.length;n+=1)if(t+=e[n],n===a.length-1&&a[n]){var l=a.filter((function(e){return!!e}));l.length>1?(t=t.slice(0,-1),t+=", "+a[n]):1===l.length&&(t+=""+a[n])}else a[n]&&(t+=a[n]+" ");return t.trim()}var q={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"},U=function(e,t,r){var a=""+r[0]+(r[1]||""),i=""+r[0]/2+(r[1]||""),n=""+t[0]+(t[1]||""),l=""+t[0]/2+(t[1]||"");switch(e){case"top":return"0 "+i+" "+n+" "+i;case"topLeft":return a+" "+n+" 0 0";case"left":return l+" "+a+" "+l+" 0";case"bottomLeft":return a+" 0 0 "+n;case"bottom":return n+" "+i+" 0 "+i;case"bottomRight":return"0 0 "+a+" "+n;case"right":return l+" 0 "+l+" "+a;default:return"0 "+a+" "+n+" 0"}};function H(e){return Math.round(255*e)}function G(e,t,r){return H(e)+","+H(t)+","+H(r)}function K(e,t,r,a){if(void 0===a&&(a=G),0===t)return a(r,r,r);var i=(e%360+360)%360/60,n=(1-Math.abs(2*r-1))*t,l=n*(1-Math.abs(i%2-1)),o=0,s=0,u=0;i>=0&&i<1?(o=n,s=l):i>=1&&i<2?(o=l,s=n):i>=2&&i<3?(s=n,u=l):i>=3&&i<4?(s=l,u=n):i>=4&&i<5?(o=l,u=n):i>=5&&i<6&&(o=n,u=l);var c=r-n/2;return a(o+c,s+c,u+c)}var Y={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=/^#[a-fA-F0-9]{6}$/,J=/^#[a-fA-F0-9]{8}$/,X=/^#[a-fA-F0-9]{3}$/,Z=/^#[a-fA-F0-9]{4}$/,ee=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,te=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,re=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ae=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function ie(e){if("string"!=typeof e)throw new g(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Y[t]?"#"+Y[t]:e}(e);if(t.match(Q))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(J)){var r=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:r}}if(t.match(X))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(Z)){var a=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:a}}var i=ee.exec(t);if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10)};var n=te.exec(t.substring(0,50));if(n)return{red:parseInt(""+n[1],10),green:parseInt(""+n[2],10),blue:parseInt(""+n[3],10),alpha:parseFloat(""+n[4])};var l=re.exec(t);if(l){var o="rgb("+K(parseInt(""+l[1],10),parseInt(""+l[2],10)/100,parseInt(""+l[3],10)/100)+")",s=ee.exec(o);if(!s)throw new g(4,t,o);return{red:parseInt(""+s[1],10),green:parseInt(""+s[2],10),blue:parseInt(""+s[3],10)}}var u=ae.exec(t.substring(0,50));if(u){var c="rgb("+K(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",d=ee.exec(c);if(!d)throw new g(4,t,c);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+u[4])}}throw new g(5)}function ne(e){return function(e){var t,r=e.red/255,a=e.green/255,i=e.blue/255,n=Math.max(r,a,i),l=Math.min(r,a,i),o=(n+l)/2;if(n===l)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var s=n-l,u=o>.5?s/(2-n-l):s/(n+l);switch(n){case r:t=(a-i)/s+(a<i?6:0);break;case a:t=(i-r)/s+2;break;default:t=(r-a)/s+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:u,lightness:o,alpha:e.alpha}:{hue:t,saturation:u,lightness:o}}(ie(e))}var le=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function oe(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function se(e){return oe(Math.round(255*e))}function ue(e,t,r){return le("#"+se(e)+se(t)+se(r))}function ce(e,t,r){return K(e,t,r,ue)}function de(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return ce(e,t,r);if("object"==typeof e&&void 0===t&&void 0===r)return ce(e.hue,e.saturation,e.lightness);throw new g(1)}function pe(e,t,r,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof a)return a>=1?ce(e,t,r):"rgba("+K(e,t,r)+","+a+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===a)return e.alpha>=1?ce(e.hue,e.saturation,e.lightness):"rgba("+K(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new g(2)}function fe(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return le("#"+oe(e)+oe(t)+oe(r));if("object"==typeof e&&void 0===t&&void 0===r)return le("#"+oe(e.red)+oe(e.green)+oe(e.blue));throw new g(6)}function me(e,t,r,a){if("string"==typeof e&&"number"==typeof t){var i=ie(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof r&&"number"==typeof a)return a>=1?fe(e,t,r):"rgba("+e+","+t+","+r+","+a+")";if("object"==typeof e&&void 0===t&&void 0===r&&void 0===a)return e.alpha>=1?fe(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new g(7)}var be=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},ge=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},ye=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},he=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha};function ve(e){if("object"!=typeof e)throw new g(8);if(ge(e))return me(e);if(be(e))return fe(e);if(he(e))return pe(e);if(ye(e))return de(e);throw new g(8)}function we(e,t,r){return function(){var a=r.concat(Array.prototype.slice.call(arguments));return a.length>=t?e.apply(this,a):we(e,t,a)}}function xe(e){return we(e,e.length,[])}function Ee(e,t){if("transparent"===t)return t;var r=ne(t);return ve(u.default({},r,{hue:r.hue+parseFloat(e)}))}var Ce=xe(Ee);function ke(e,t,r){return Math.max(e,Math.min(t,r))}function Se(e,t){if("transparent"===t)return t;var r=ne(t);return ve(u.default({},r,{lightness:ke(0,1,r.lightness-parseFloat(e))}))}var Te=xe(Se);function Fe(e,t){if("transparent"===t)return t;var r=ne(t);return ve(u.default({},r,{saturation:ke(0,1,r.saturation-parseFloat(e))}))}var Oe=xe(Fe);function je(e){if("transparent"===e)return 0;var t=ie(e),r=Object.keys(t).map((function(e){var r=t[e]/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)})),a=r[0],i=r[1],n=r[2];return parseFloat((.2126*a+.7152*i+.0722*n).toFixed(3))}function Ie(e,t){var r=je(e),a=je(t);return parseFloat((r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)).toFixed(2))}function Ve(e,t){if("transparent"===t)return t;var r=ne(t);return ve(u.default({},r,{lightness:ke(0,1,r.lightness+parseFloat(e))}))}var Me=xe(Ve);function Ae(e,t,r){if("transparent"===t)return r;if("transparent"===r)return t;if(0===e)return r;var a=ie(t),i=u.default({},a,{alpha:"number"==typeof a.alpha?a.alpha:1}),n=ie(r),l=u.default({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),o=i.alpha-l.alpha,s=2*parseFloat(e)-1,c=((s*o==-1?s:s+o)/(1+s*o)+1)/2,d=1-c;return me({red:Math.floor(i.red*c+l.red*d),green:Math.floor(i.green*c+l.green*d),blue:Math.floor(i.blue*c+l.blue*d),alpha:i.alpha*(parseFloat(e)/1)+l.alpha*(1-parseFloat(e)/1)})}var De=xe(Ae);function Le(e,t){if("transparent"===t)return t;var r=ie(t),a="number"==typeof r.alpha?r.alpha:1;return me(u.default({},r,{alpha:ke(0,1,(100*a+100*parseFloat(e))/100)}))}var Pe=xe(Le),Re="#000",_e="#fff";function ze(e,t){if("transparent"===t)return t;var r=ne(t);return ve(u.default({},r,{saturation:ke(0,1,r.saturation+parseFloat(e))}))}var Be=xe(ze);function $e(e,t){return"transparent"===t?t:ve(u.default({},ne(t),{hue:parseFloat(e)}))}var Ne=xe($e);function We(e,t){return"transparent"===t?t:ve(u.default({},ne(t),{lightness:parseFloat(e)}))}var qe=xe(We);function Ue(e,t){return"transparent"===t?t:ve(u.default({},ne(t),{saturation:parseFloat(e)}))}var He=xe(Ue);function Ge(e,t){return"transparent"===t?t:De(parseFloat(e),"rgb(0, 0, 0)",t)}var Ke=xe(Ge);function Ye(e,t){return"transparent"===t?t:De(parseFloat(e),"rgb(255, 255, 255)",t)}var Qe=xe(Ye);function Je(e,t){if("transparent"===t)return t;var r=ie(t),a="number"==typeof r.alpha?r.alpha:1;return me(u.default({},r,{alpha:ke(0,1,+(100*a-100*parseFloat(e)).toFixed(2)/100)}))}var Xe=xe(Je),Ze=["top","right","bottom","left"];function et(e,t){return e(t?":"+t:"")}function tt(e,t,r){if(!t)throw new g(67);if(0===e.length)return et(t,null);for(var a=[],i=0;i<e.length;i+=1){if(r&&r.indexOf(e[i])<0)throw new g(68);a.push(et(t,e[i]))}return a.join(",")}var rt=[void 0,null,"active","focus","hover"];function at(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}var it=["absolute","fixed","relative","static","sticky"],nt=[void 0,null,"active","focus","hover"];function lt(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}t.adjustHue=Ce,t.animation=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=Array.isArray(t[0]);if(!a&&t.length>8)throw new g(64);return{animation:t.map((function(e){if(a&&!Array.isArray(e)||!a&&Array.isArray(e))throw new g(65);if(Array.isArray(e)&&e.length>8)throw new g(66);return Array.isArray(e)?e.join(" "):e})).join(", ")}},t.backgroundImages=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{backgroundImage:t.join(", ")}},t.backgrounds=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{background:t.join(", ")}},t.between=D,t.border=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i;return"string"==typeof e&&Ze.indexOf(e)>=0?((i={})["border"+x(e)+"Width"]=r[0],i["border"+x(e)+"Style"]=r[1],i["border"+x(e)+"Color"]=r[2],i):(r.unshift(e),{borderWidth:r[0],borderStyle:r[1],borderColor:r[2]})},t.borderColor=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.apply(void 0,["borderColor"].concat(t))},t.borderRadius=function(e,t){var r,a,i=x(e);if(!t&&0!==t)throw new g(62);if("Top"===i||"Bottom"===i)return(r={})["border"+i+"RightRadius"]=t,r["border"+i+"LeftRadius"]=t,r;if("Left"===i||"Right"===i)return(a={})["borderTop"+i+"Radius"]=t,a["borderBottom"+i+"Radius"]=t,a;throw new g(63)},t.borderStyle=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.apply(void 0,["borderStyle"].concat(t))},t.borderWidth=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.apply(void 0,["borderWidth"].concat(t))},t.buttons=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return tt(t,at,rt)},t.clearFix=function(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t},t.complement=function(e){if("transparent"===e)return e;var t=ne(e);return ve(u.default({},t,{hue:(t.hue+180)%360}))},t.cover=function(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}},t.cssVar=function(e,t){if(!e||!e.match(w)){if(t)return e;throw new g(73)}var r;if("undefined"!=typeof document&&null!==document.documentElement&&(r=getComputedStyle(document.documentElement).getPropertyValue(e)),r)return r.trim();throw new g(74)},t.darken=Te,t.desaturate=Oe,t.directionalProperty=k,t.ellipsis=function(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}},t.em=j,t.fluidRange=function(e,t,r){if(void 0===t&&(t="320px"),void 0===r&&(r="1200px"),!Array.isArray(e)&&"object"!=typeof e||null===e)throw new g(49);if(Array.isArray(e)){for(var a,i={},n={},l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(a=l()).done;){var o,s,c=a.value;if(!c.prop||!c.fromSize||!c.toSize)throw new g(50);n[c.prop]=c.fromSize,i["@media (min-width: "+t+")"]=u.default({},i["@media (min-width: "+t+")"],((o={})[c.prop]=D(c.fromSize,c.toSize,t,r),o)),i["@media (min-width: "+r+")"]=u.default({},i["@media (min-width: "+r+")"],((s={})[c.prop]=c.toSize,s))}return u.default({},n,i)}var d,p,f;if(!e.prop||!e.fromSize||!e.toSize)throw new g(51);return(f={})[e.prop]=e.fromSize,f["@media (min-width: "+t+")"]=((d={})[e.prop]=D(e.fromSize,e.toSize,t,r),d),f["@media (min-width: "+r+")"]=((p={})[e.prop]=e.toSize,p),f},t.fontFace=function(e){var t=e.fontFamily,r=e.fontFilePath,a=e.fontStretch,i=e.fontStyle,n=e.fontVariant,l=e.fontWeight,o=e.fileFormats,s=void 0===o?["eot","woff2","woff","ttf","svg"]:o,u=e.formatHint,c=void 0!==u&&u,d=e.localFonts,p=e.unicodeRange,f=e.fontDisplay,m=e.fontVariationSettings,b=e.fontFeatureSettings;if(!t)throw new g(55);if(!r&&!d)throw new g(52);if(d&&!Array.isArray(d))throw new g(53);if(!Array.isArray(s))throw new g(54);var y={"@font-face":{fontFamily:t,src:$(r,d,s,c),unicodeRange:p,fontStretch:a,fontStyle:i,fontVariant:n,fontWeight:l,fontDisplay:f,fontVariationSettings:m,fontFeatureSettings:b}};return JSON.parse(JSON.stringify(y))},t.getContrast=Ie,t.getLuminance=je,t.getValueAndUnit=V,t.grayscale=function(e){return"transparent"===e?e:ve(u.default({},ne(e),{saturation:0}))},t.hiDPI=N,t.hideText=function(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}},t.hideVisually=function(){return{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},t.hsl=de,t.hslToColorString=function(e){if("object"==typeof e&&"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness)return e.alpha&&"number"==typeof e.alpha?pe({hue:e.hue,saturation:e.saturation,lightness:e.lightness,alpha:e.alpha}):de({hue:e.hue,saturation:e.saturation,lightness:e.lightness});throw new g(45)},t.hsla=pe,t.invert=function(e){if("transparent"===e)return e;var t=ie(e);return ve(u.default({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))},t.lighten=Me,t.linearGradient=function(e){var t=e.colorStops,r=e.fallback,a=e.toDirection,i=void 0===a?"":a;if(!t||t.length<2)throw new g(56);return{backgroundColor:r||t[0].replace(/,\s+/g,",").split(" ")[0].replace(/,(?=\S)/g,", "),backgroundImage:W(P||(P=f.default(["linear-gradient(","",")"])),i,t.join(", ").replace(/,(?=\S)/g,", "))}},t.margin=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.apply(void 0,["margin"].concat(t))},t.math=function(e,t){var r=v(e),a=r.match(y);if(a&&!a.every((function(e){return e===a[0]})))throw new g(41);return""+function(e,t){var r,a=function(e){var t={};return t.symbols=e?u.default({},b.symbols,e.symbols):u.default({},b.symbols),t}(t),i=[a.symbols["("].prefix],n=[],l=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(a.symbols).map((function(e){return a.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");l.lastIndex=0;var o=!1;do{var s=(r=l.exec(e))||[")",void 0],c=s[0],d=s[1],p=a.symbols[c],f=p&&!p.prefix&&!p.func,m=!p||!p.postfix&&!p.infix;if(d||(o?m:f))throw new g(37,r?r.index:e.length,e);if(o){var y=p.postfix||p.infix;do{var v=i[i.length-1];if((y.precedence-v.precedence||v.rightToLeft)>0)break}while(h(i,n));o="postfix"===y.notation,")"!==y.symbol&&(i.push(y),o&&h(i,n))}else if(p){if(i.push(p.prefix||p.func),p.func&&(!(r=l.exec(e))||"("!==r[0]))throw new g(38,r?r.index:e.length,e)}else n.push(+c),o=!0}while(r&&i.length);if(i.length)throw new g(39,r?r.index:e.length,e);if(r)throw new g(40,r?r.index:e.length,e);return n.pop()}(v(r.replace(y,"")),t)+(a?v(a[0]):"")},t.meetsContrastGuidelines=function(e,t){var r=Ie(e,t);return{AA:r>=4.5,AALarge:r>=3,AAA:r>=7,AAALarge:r>=4.5}},t.mix=De,t.modularScale=function(e,t,r){if(void 0===t&&(t="1em"),void 0===r&&(r=1.333),"number"!=typeof e)throw new g(42);if("string"==typeof r&&!M[r])throw new g(43);var a="string"==typeof t?V(t):[t,""],i=a[0],n=a[1],l="string"==typeof r?M[r]:r;if("string"==typeof i)throw new g(44,t);return""+i*Math.pow(l,e)+(n||"")},t.normalize=function(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},main:{display:"block"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]},t.opacify=Pe,t.padding=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return k.apply(void 0,["padding"].concat(t))},t.parseToHsl=ne,t.parseToRgb=ie,t.position=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return it.indexOf(e)>=0&&e?u.default({},k.apply(void 0,[""].concat(r)),{position:e}):k.apply(void 0,["",e].concat(r))},t.radialGradient=function(e){var t=e.colorStops,r=e.extent,a=void 0===r?"":r,i=e.fallback,n=e.position,l=void 0===n?"":n,o=e.shape,s=void 0===o?"":o;if(!t||t.length<2)throw new g(57);return{backgroundColor:i||t[0].split(" ")[0],backgroundImage:W(R||(R=f.default(["radial-gradient(","","","",")"])),l,s,a,t.join(", "))}},t.readableColor=function(e,t,r,a){void 0===t&&(t=Re),void 0===r&&(r=_e),void 0===a&&(a=!0);var i=je(e)>.179,n=i?t:r;return!a||Ie(e,n)>=4.5?n:i?Re:_e},t.rem=A,t.retinaImage=function(e,t,r,a,i){var n;if(void 0===r&&(r="png"),void 0===i&&(i="_2x"),!e)throw new g(58);var l=r.replace(/^\./,""),o=a?a+"."+l:""+e+i+"."+l;return(n={backgroundImage:"url("+e+"."+l+")"})[N()]=u.default({backgroundImage:"url("+o+")"},t?{backgroundSize:t}:{}),n},t.rgb=fe,t.rgbToColorString=function(e){if("object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue)return"number"==typeof e.alpha?me({red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}):fe({red:e.red,green:e.green,blue:e.blue});throw new g(46)},t.rgba=me,t.saturate=Be,t.setHue=Ne,t.setLightness=qe,t.setSaturation=He,t.shade=Ke,t.size=function(e,t){return void 0===t&&(t=e),{height:e,width:t}},t.stripUnit=F,t.textInputs=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return tt(t,lt,nt)},t.timingFunctions=function(e){return q[e]},t.tint=Qe,t.toColorString=ve,t.transitions=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(Array.isArray(t[0])&&2===t.length){var a=t[1];if("string"!=typeof a)throw new g(61);return{transition:t[0].map((function(e){return e+" "+a})).join(", ")}}return{transition:t.join(", ")}},t.transparentize=Xe,t.triangle=function(e){var t=e.pointingDirection,r=e.height,a=e.width,i=e.foregroundColor,n=e.backgroundColor,l=void 0===n?"transparent":n,o=V(a),s=V(r);if(isNaN(s[0])||isNaN(o[0]))throw new g(60);return u.default({width:"0",height:"0",borderColor:l},function(e,t){switch(e){case"top":case"bottomRight":return{borderBottomColor:t};case"right":case"bottomLeft":return{borderLeftColor:t};case"bottom":case"topLeft":return{borderTopColor:t};case"left":case"topRight":return{borderRightColor:t};default:throw new g(59)}}(t,i),{borderStyle:"solid",borderWidth:U(t,s,o)})},t.wordWrap=function(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}},92:function(e,t,r){"use strict";r.r(t),r.d(t,"buildFilterLabel",(function(){return u})),r.d(t,"FilterValueLabel",(function(){return c}));var a=r(2),i=r.n(a),n=r(43),l=r(42),o=r(47),s=r(18);function u({field:e,value:t,label:r,dataView:a,negate:i}){const n=a.getFieldByName(e),o=Array.isArray(t)&&t.length>1,s=o?Object(l.buildPhrasesFilter)(n,t,a):Object(l.buildPhraseFilter)(n,Array.isArray(t)?t[0]:t,a);return s.meta.type=o?"phrases":"phrase",s.meta.value=Array.isArray(t)?o?void 0:`${t[0]}`:t,s.meta.key=r,s.meta.alias=null,s.meta.negate=i,s.meta.disabled=!1,s}function c({label:e,field:t,value:r,negate:a,dataView:l,invertFilter:c,removeFilter:d,allowExclusion:p=!0}){const f=Object(n.injectI18n)(o.FilterItem),m=u({field:t,value:r,label:e,dataView:l,negate:a}),{services:{uiSettings:b,docLinks:g,dataViews:y}}=Object(s.useKibana)();return l?i.a.createElement(f,{indexPatterns:[l],id:`${t}-${r}-${a}`,filter:m,onRemove:()=>{d(t,r,!1)},onUpdate:e=>{e.meta.negate!==a&&c({field:t,value:r,negate:a})},uiSettings:b,docLinks:g,hiddenPanelOptions:[...p?[]:["negateFilter"],"pinFilter","editFilter","disableFilter"],dataViews:y}):null}t.default=c}}]);