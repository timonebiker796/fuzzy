(window.expressionHeatmap_bundle_jsonpfunction=window.expressionHeatmap_bundle_jsonpfunction||[]).push([[1],Array(30).concat([function(e,t,n){"use strict";var o,r=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function a(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],r=0;r<e.length;r++){var l=e[r],s=t.base?l[0]+t.base:l[0],c=n[s]||0,u="".concat(s," ").concat(c);n[s]=c+1;var d=a(u),m={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(i[d].references++,i[d].updater(m)):i.push({identifier:u,updater:p(m,t),references:1}),o.push(u)}return o}function s(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var i=n.nc;i&&(o.nonce=i)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var a=r(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,o){var r=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,r);else{var i=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function m(e,t,n){var o=n.css,r=n.media,i=n.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var f=null,v=0;function p(e,t){var n,o,r;if(t.singleton){var i=v++;n=f||(f=s(t)),o=d.bind(null,n,i,!1),r=d.bind(null,n,i,!0)}else n=s(t),o=m.bind(null,n,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var r=a(n[o]);i[r].references--}for(var s=l(e,t),c=0;c<n.length;c++){var u=a(n[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=s}}}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,r,i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var l=(n=a,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(r," */")),s=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[i].concat(s).concat([l]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(o)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(r[a]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);o&&r[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},function(e,t,n){"use strict";e.exports=n(43)},function(e,t,n){"use strict";e.exports=n(50)},,function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(36);case"v8light":return n(38)}},function(e,t,n){var o=n(30),r=n(37);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(31)(!1)).push([e.i,".heatmap-container{height:100%;overflow:auto hidden;padding:8px;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;-webkit-user-select:text;user-select:text;width:100%}.heatmap-container::-webkit-scrollbar{height:16px;width:16px}.heatmap-container::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.heatmap-container::-webkit-scrollbar-corner,.heatmap-container::-webkit-scrollbar-track{background-color:#0000}",""]),e.exports=t},function(e,t,n){var o=n(30),r=n(39);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);o(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},function(e,t,n){(t=n(31)(!1)).push([e.i,".heatmap-container{height:100%;overflow:auto hidden;padding:8px;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;-webkit-user-select:text;user-select:text;width:100%}.heatmap-container::-webkit-scrollbar{height:16px;width:16px}.heatmap-container::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.heatmap-container::-webkit-scrollbar-corner,.heatmap-container::-webkit-scrollbar-track{background-color:#0000}",""]),e.exports=t},function(e,t,n){"use strict";e.exports=n(41)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(42);n(10),n(32),n(33);var r=o.default({key:"css"}),i=r.flush,a=r.hydrate,l=r.cx,s=r.merge,c=r.getRegisteredStyles,u=r.injectGlobal,d=r.keyframes,m=r.css,f=r.sheet,v=r.cache;t.cache=v,t.css=m,t.cx=l,t.flush=i,t.getRegisteredStyles=c,t.hydrate=a,t.injectGlobal=u,t.keyframes=d,t.merge=s,t.sheet=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),r=n(32),i=n(33);function a(e){return e&&e.__esModule?e:{default:e}}var l=a(o);function s(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function c(e,t,n){var o=[],r=i.getRegisteredStyles(e,o,n);return o.length<2?n:r+t(o)}var u=function e(t){for(var n="",o=0;o<t.length;o++){var r=t[o];if(null!=r){var i=void 0;switch(typeof r){case"boolean":break;case"object":if(Array.isArray(r))i=e(r);else for(var a in i="",r)r[a]&&a&&(i&&(i+=" "),i+=a);break;default:i=r}i&&(n&&(n+=" "),n+=i)}}return n};t.default=function(e){var t=l.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=r.serializeStyles(n,t.registered,void 0);return i.insertStyles(t,a,!1),t.key+"-"+a.name};return{css:n,cx:function(){for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return c(t.registered,n,u(o))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=r.serializeStyles(n,t.registered);s(t,i)},keyframes:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=r.serializeStyles(n,t.registered),a="animation-"+i.name;return s(t,{name:i.name,styles:"@keyframes "+a+"{"+i.styles+"}"}),a},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:i.getRegisteredStyles.bind(null,t.registered),merge:c.bind(null,t.registered,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),r=n(46),i=n(48);function a(e){return e&&e.__esModule?e:{default:e}}var l=a(o),s=a(r),c=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},m=function(e){return null!=e&&"boolean"!=typeof e},f=a(i).default((function(e){return d(e)?e:e.replace(c,"-$&").toLowerCase()})),v=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,n){return g={name:t,styles:n,next:g},t}))}return 1===s.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function p(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return g={name:n.name,styles:n.styles,next:g},n.name;if(void 0!==n.styles){var o=n.next;if(void 0!==o)for(;void 0!==o;)g={name:o.name,styles:o.styles,next:g},o=o.next;return n.styles+";"}return function(e,t,n){var o="";if(Array.isArray(n))for(var r=0;r<n.length;r++)o+=p(e,t,n[r])+";";else for(var i in n){var a=n[i];if("object"!=typeof a)null!=t&&void 0!==t[a]?o+=i+"{"+t[a]+"}":m(a)&&(o+=f(i)+":"+v(i,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=p(e,t,a);switch(i){case"animation":case"animationName":o+=f(i)+":"+l+";";break;default:o+=i+"{"+l+"}"}}else for(var s=0;s<a.length;s++)m(a[s])&&(o+=f(i)+":"+v(i,a[s])+";")}return o}(e,t,n);case"function":if(void 0!==e){var r=g,i=n(e);return g=r,p(e,t,i)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var g,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var o=!0,r="";g=void 0;var i=e[0];null==i||void 0===i.raw?(o=!1,r+=p(n,t,i)):r+=i[0];for(var a=1;a<e.length;a++)r+=p(n,t,e[a]),o&&(r+=i[a]);h.lastIndex=0;for(var s,c="";null!==(s=h.exec(r));)c+="-"+s[1];return{name:l.default(r)+c,styles:r,next:g}}},function(e,t,n){"use strict";e.exports=n(45)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n=0,o=0,r=e.length;r>=4;++o,r-=4)t=1540483477*(65535&(t=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}},function(e,t,n){"use strict";e.exports=n(47)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";e.exports=n(49)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="undefined"!=typeof document,r=function(e,t,n){var r=e.key+"-"+t.name;(!1===n||!1===o&&void 0!==e.compat)&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};t.getRegisteredStyles=function(e,t,n){var o="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):o+=n+" "})),o},t.insertStyles=function(e,t,n){r(e,t,n);var i=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a="",l=t;do{var s=e.insert(t===l?"."+i:"",l,e.sheet,!0);o||void 0===s||(a+=s),l=l.next}while(void 0!==l);if(!o&&0!==a.length)return a}},t.registerStyles=r},,function(e,t,n){"use strict";n.r(t),n.d(t,"HeatmapComponent",(function(){return G})),n.d(t,"default",(function(){return G}));var o=n(9),r=n.n(o),i=n(4),a=n.n(i),l=n(15),s=n(7),c=n(27),u=n(26),d=n(5),m=n(6),f=n(0),v=n(40),p=n(28);const g={subdued:Object(v.css)("fill:",p.euiThemeVars.euiTextSubduedColor,";",""),accent:Object(v.css)("fill:",p.euiThemeVars.euiColorVis0,";","")};var h=n(1);const b=({title:e,titleId:t,...n})=>Object(h.jsx)("svg",r()({width:30,height:22,viewBox:"0 0 30 22",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":t},n),e?Object(h.jsx)("title",{id:t},e):null,Object(h.jsx)("path",{className:g.subdued,d:"M16 1a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V1zM0 17a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H1a1 1 0 01-1-1v-4zm17-9a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V9a1 1 0 00-1-1h-4zm-1 9a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4zm9-17a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V1a1 1 0 00-1-1h-4z"}),Object(h.jsx)("path",{className:g.accent,d:"M0 1a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H1a1 1 0 01-1-1V1zm0 8a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H1a1 1 0 01-1-1V9zm9-9a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V1a1 1 0 00-1-1H9zM8 9a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H9a1 1 0 01-1-1V9zm1 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1v-4a1 1 0 00-1-1H9zm15-7a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V9zm1 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1v-4a1 1 0 00-1-1h-4z"}));var x=n(11);const y="positive",w=0,C=100,j=5;function A(e,t,n,o,r){return 0===o?r+t:function(e,t=2){return Number((Math.floor(100*e)/100).toFixed(t))}(t+(e-n)*r/o)}const O="temperature",S="percent",k=w,_=C;function I(e){return e}function M(e){if(null!=e&&!Array.isArray(e))return e}const T=e=>{var t,n;const o=null===(t=e.meta)||void 0===t||null===(n=t.sourceParams)||void 0===n?void 0:n.params,r=null==o?void 0:o.orderBy;return null!=o&&o.otherBucket||!r?"dataIndex":r&&"_key"!==r?"desc"===(null==o?void 0:o.order)?"numDesc":"numAsc":"desc"===(null==o?void 0:o.order)?"alphaDesc":"alphaAsc"},P=(e,t,n)=>t.reduce(((e,{id:t})=>{const o=e.row[t];return null==o||null!=(r=o)&&"object"!=typeof r?e:{row:{...e.row,[t]:n[t].convert(o)},formattedColumns:{...e.formattedColumns,[t]:!0}};var r}),{row:e,formattedColumns:{}});var N=n(8);function L(e){switch(e){case s.Position.Bottom:return"upCenter";case s.Position.Top:return"downCenter";case s.Position.Left:return"rightCenter";default:return"leftCenter"}}const R=Object(i.createContext)(void 0),E=({anchor:e,color:t,onClose:n,onChange:o,seriesIdentifiers:[r]})=>{var a;const l=Object(i.useContext)(R),s=Object(i.useCallback)((()=>{null==n||n()}),[n]);if(!l)return null;const{legendPosition:c,setColor:d,uiState:m}=l,f=r.key,v=null!==(a=null==m?void 0:m.get("vis.colors",{}))&&void 0!==a?a:{},p=f.toString()in v;let g=!1;return Object(h.jsx)(N.EuiOutsideClickDetector,{onOutsideClick:s},Object(h.jsx)(N.EuiWrappingPopover,{isOpen:!0,ownFocus:!0,display:"block",button:e,anchorPosition:L(c),closePopover:n,panelPaddingSize:"s"},Object(h.jsx)(u.ColorPicker,{color:t,onChange:e=>{e&&o(e),d(e,f),e&&g||n()},label:f,useLegacyColors:!1,colorIsOverwritten:p,onKeyDown:e=>{13===e.keyCode&&(null==n||n()),g=!0}})))},z="__heatmap_chart_split__",V=({splitColumnAccessor:e,splitRowAccessor:t})=>e||t?Object(h.jsx)(a.a.Fragment,null,Object(h.jsx)(s.GroupBy,{id:z,by:(n,o)=>{const r=e||t;return r?"function"==typeof r?r(o):o[r]:n.id},sort:s.Predicate.DataIndex}),Object(h.jsx)(s.SmallMultiples,{id:"__heatmap_chart_sm__",splitVertically:t?z:void 0,splitHorizontally:e?z:void 0,style:{verticalPanelPadding:{outer:0,inner:.1},horizontalPanelPadding:{outer:0,inner:.1}}})):null,F=(e,t,n)=>{var o;const r=Object(d.getColumnByAccessor)(t,e),i=r.id,a=n(null===(o=r.meta)||void 0===o?void 0:o.params);return e=>{const t=e[i];if(void 0!==t)return a.convert(t)}};function B(e,t,n,o){var r;const i=Object(d.getColumnByAccessor)(e,o.columns),a=i.id,l=n(null===(r=i.meta)||void 0===r?void 0:r.params),s=o.rows.findIndex((e=>l.convert(e[a])===t));if(-1!==s)return{row:s,column:o.columns.findIndex((e=>e.id===a)),value:o.rows[s][a],table:o}}function D({colors:e,stops:t,range:n},{min:o,max:r}){if(t.length)return t.slice(0,t.length-1);const i="percent"===n?0:o,a=(("percent"===n?100:r)-i)/e.length;return e.slice(0,e.length-1).map(((e,t)=>i+(t+1)*a))}function H(e,t,n,o){const r=(null==t?void 0:t.colors)||function(e,t,n){var o,r,i;let a=function(e,t,{prevPalette:n,dataBounds:o,mapFromMinValue:r,defaultPaletteName:i}){const{min:a,max:l}=function(e,t){var n,o,r,i,a,l;const{min:s,max:c}=function(e,t){return{min:"number"===e?t.min:w,max:"number"===e?t.max:C}}(null==e?void 0:e.rangeType,t),u=null!==(n=null==e||null===(o=e.colorStops)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.stop)&&void 0!==n?n:Number.POSITIVE_INFINITY,d=null!==(i=null==e||null===(a=e.colorStops)||void 0===a||null===(l=a[e.colorStops.length-1])||void 0===l?void 0:l.stop)&&void 0!==i?i:Number.NEGATIVE_INFINITY;return{min:Math.min(s,u),max:Math.max(c,d)}}(t,o),s=l-a,{stops:c,...u}=t||{};if("custom"===t.name&&null!=t&&t.colorStops)return function(e,t){const n=e.map(((e,n,o)=>({...e,stop:n+1<o.length?o[n+1].stop:t})));if(e[e.length-1].stop===t){const o=function(e,t,n){const o=t.length,r=o>1&&t[o-1].stop-t[o-2].stop||1;let i=Number(r.toFixed(2));if(n<e[o-1].stop+i){const t=n-e[o-1].stop;i=t>0?t:1}return i}(e,n,t)||1,r=Math.min(1,o);n[e.length-1].stop=t+r}return n}(t.colorStops,l);const d=(null==t?void 0:t.steps)||j,m=e.get(n||(null==t?void 0:t.name)||i||y).getCategoricalColors(d,u),f=r||0===s?a:s/d;return function(e,{newInterval:t,oldInterval:n,newMin:o,oldMin:r}){return(e||[]).map((({color:e,stop:i})=>({color:e,stop:A(i,o,r,n,t)})))}(m.map(((e,t)=>({color:e,stop:t}))),{newInterval:s,oldInterval:m.length,newMin:f,oldMin:0})}(e,(null==t?void 0:t.params)||{},{dataBounds:n,defaultPaletteName:null!==(o=null==t?void 0:t.name)&&void 0!==o?o:O});return null!=t&&null!==(r=t.params)&&void 0!==r&&r.reverse&&"custom"!==(null==t||null===(i=t.params)||void 0===i?void 0:i.name)&&(a=function(e=[]){const t=e.map((({stop:e})=>e));return e.map((({color:n},o)=>({color:n,stop:t[e.length-o-1]}))).reverse()}(a)),a}(e,{type:"palette",name:O},o).map((({color:e})=>e)),i=[r[0],...r],a=function(e,{min:t,max:n}){const o="percent"===e.range?0:t;return[e.stops.length?e.rangeMin:o,...D(e,{min:t,max:n})].map((o=>{let r=o;return"percent"===e.range&&(r=t+(n-t)*o/100),r}))}({gradient:!1,range:S,rangeMin:k,rangeMax:_,stops:[],...t,colors:i.slice(1)},o);return{colors:i,ranges:a}}n(35);const G=Object(i.memo)((({data:e,args:t,timeZone:n,formatFactory:o,chartsThemeService:v,chartsActiveCursorService:p,datatableUtilities:g,onClickValue:y,onSelectRange:w,onClickMultiValue:C,paletteService:j,uiState:A,interactive:O,syncTooltips:S,syncCursor:k,renderComplete:_,overrides:N})=>{var L,z,D,G,Y,U,W,$,X,Z,J,q;const K=Object(i.useRef)(null),Q=v.useDarkMode(),[ee,te]=Object(i.useState)((()=>{var e;const n=null===(e=t.legend.isVisible)||void 0===e||e;return null==A?void 0:A.get("vis.legendOpen",n)})),ne=v.useChartsBaseTheme(),oe=Object(i.useCallback)((()=>{O&&te((e=>{var t;const n=!e;return null==A||null===(t=A.set)||void 0===t||t.call(A,"vis.legendOpen",n),n}))}),[A,O]),re=Object(i.useCallback)(((e,t)=>{const n=(null==A?void 0:A.get("vis.colors"))||{};n[t]!==e&&e?n[t]=e:delete n[t],null==A||A.setSilent("vis.colors",null),null==A||A.set("vis.colors",n),null==A||A.emit("reload"),null==A||A.emit("colorChanged")}),[A]),ie=Object(i.useCallback)(((e=!0)=>{e&&_()}),[_]),ae=t.valueAccessor?Object(d.getAccessorByDimension)(t.valueAccessor,e.columns):void 0,le=Object(i.useMemo)((()=>((e,t,n=I)=>{const o={};if(null!=t)for(const r of e){const e=n(r);o[e]=o[e]||{max:-1/0,min:1/0},t.rows.forEach((t=>{const n=M(t[r]);null!=n&&(o[e].min>n&&(o[e].min=n),o[e].max<n&&(o[e].max=n))})),o[e].max===-1/0&&(o[e]={max:100,min:0,fallback:!0})}return o})([ae],e)),[ae,e]),se=null===(L=t.palette)||void 0===L?void 0:L.params,ce=t.xAccessor?Object(d.getAccessorByDimension)(t.xAccessor,e.columns):void 0,ue=t.yAccessor?Object(d.getAccessorByDimension)(t.yAccessor,e.columns):void 0,de=t.splitRowAccessor?F(e.columns,t.splitRowAccessor,o):void 0,me=t.splitColumnAccessor?F(e.columns,t.splitColumnAccessor,o):void 0,fe=e.columns.findIndex((e=>e.id===ce)),ve=e.columns.findIndex((e=>e.id===ue)),pe=e.columns[fe],ge=e.columns[ve],he=e.columns.find((e=>e.id===ae)),be=null==pe?void 0:pe.meta,xe="date"===(null==be?void 0:be.type),ye=Object(i.useMemo)((()=>o(null==be?void 0:be.params)),[o,null==be?void 0:be.params]),we=Object(i.useMemo)((()=>o(null==ge?void 0:ge.meta.params)),[o,null==ge?void 0:ge.meta.params]),Ce=Object(i.useMemo)((()=>o(Object(d.getFormatByAccessor)(t.valueAccessor,e.columns))),[t.valueAccessor,o,e.columns]),je=((e,t)=>{const n=e.columns.reduce(((e,{id:n,meta:o})=>({...e,[n]:t(o.params)})),{}),o={rows:[],formattedColumns:{}};for(const t of e.rows){const r=P(t,e.columns,n);o.rows.push(r.row),o.formattedColumns={...o.formattedColumns,...r.formattedColumns}}return{table:{...e,rows:o.rows},formattedColumns:o.formattedColumns}})(e,o);let Ae=je.table.rows.filter((e=>null===e[ae]||"number"==typeof e[ae]));const Oe=Object(u.useActiveCursor)(p,K,{datatables:[je.table]}),Se=(null==e||null===(z=e.meta)||void 0===z?void 0:z.type)===l.ESQL_TABLE_TYPE,ke=O&&!Se,_e=Object(i.useCallback)((n=>{const r=n[0][0],{x:i,y:a,smVerticalAccessorValue:l,smHorizontalAccessorValue:s}=r.datum,c=[{row:e.rows.findIndex((e=>!!pe&&(je.formattedColumns[pe.id]?ye.convert(e[pe.id])===i:e[pe.id]===i))),column:fe,value:i,table:e},...ge?[{row:e.rows.findIndex((e=>je.formattedColumns[ge.id]?we.convert(e[ge.id])===a:e[ge.id]===a)),column:ve,value:a,table:e}]:[]];if(s&&t.splitColumnAccessor){const n=B(t.splitColumnAccessor,s,o,e);n&&c.push(n)}if(l&&t.splitRowAccessor){const n=B(t.splitRowAccessor,l,o,e);n&&c.push(n)}y({data:c})}),[t.splitColumnAccessor,t.splitRowAccessor,o,je.formattedColumns,y,e,pe,fe,ye,ge,ve,we]),Ie=Object(i.useCallback)((t=>{const{x:n,y:o}=t;if(xe)w({range:n,table:e,column:fe});else{const t=[];ge&&o.forEach((n=>{t.push({row:e.rows.findIndex((e=>je.formattedColumns[ge.id]?we.convert(e[ge.id])===n:e[ge.id]===n)),column:ve,value:n})})),pe&&n.forEach((n=>{t.push({row:e.rows.findIndex((e=>je.formattedColumns[pe.id]?ye.convert(e[pe.id])===n:e[pe.id]===n)),column:fe,value:n})}));const r={data:t.map((t=>({row:t.row,column:t.column,value:t.value,table:e})))};y(r)}}),[je.formattedColumns,xe,y,w,e,pe,fe,ye,ge,ve,we]);if(!Ae||!Ae.length)return Object(h.jsx)(u.EmptyPlaceholder,{icon:b,renderComplete:ie});ge||(Ae=Ae.map((e=>({...e,unifiedY:""})))),pe||(Ae=Ae.map((e=>({...e,unifiedX:""}))));const{min:Me,max:Te}=le[ae],Pe=pe?g.getDateHistogramMeta(pe):void 0;if(!he)return null;let Ne={type:s.ScaleType.Ordinal};if(xe&&Ae.length>1){const e=null==Pe?void 0:Pe.interval,t=e?c.search.aggs.parseEsInterval(e):void 0;t&&(Ne={type:s.ScaleType.Time,interval:"fixed"===t.type?{type:"fixed",unit:t.unit,value:t.value}:{type:"calendar",unit:t.unit,value:t.value}})}const Le=e=>{var n;let o=e;if(t.percentageMode){const e=Math.abs(o-Me)/(Te-Me)*100;o=parseInt(e.toString(),10)/100}return`${null!==(n=Ce.convert(o))&&void 0!==n?n:""}`},{colors:Re,ranges:Ee}=H(j,se,0,le[ae]),ze=1e-5;let Ve=Te+ze;(null!=se&&se.rangeMax||0===(null==se?void 0:se.rangeMax))&&(Ve=("number"===(null==se?void 0:se.range)?se.rangeMax:Me+(Te-Me)*se.rangeMax/100)+ze);const Fe=null!==(D=null==A?void 0:A.get("vis.colors"))&&void 0!==D?D:null,Be=Te===Me,De=Ee.map(((e,n,o)=>{const r=n===o.length-1,i=o[n+1];let a=r?Number.POSITIVE_INFINITY:i;const l=r&&Be&&"number"!==(null==se?void 0:se.range)?Me:e;if(!1===t.lastRangeIsRightOpen){const e=Be?Number.POSITIVE_INFINITY:Ve;a=r?e:i}let s;s=a===Number.POSITIVE_INFINITY?`â‰¥ ${Le(l)}`:`${Le(e)} - ${Le(a)}`;const c=null==Fe?void 0:Fe[s];return{start:l,end:a,color:null!=c?c:Re[n+1]}})),{theme:He={},...Ge}=Object(x.c)(N,"settings"),Ye={legend:{labelOptions:{maxLines:t.legend.shouldTruncate?null!==(G=null===(Y=t.legend)||void 0===Y?void 0:Y.maxLines)&&void 0!==G?G:1:0}},heatmap:{grid:{stroke:{width:null!==(U=t.gridConfig.strokeWidth)&&void 0!==U?U:ne.axes.gridLine.horizontal.strokeWidth,color:null!==(W=t.gridConfig.strokeColor)&&void 0!==W?W:ne.axes.gridLine.horizontal.stroke}},cell:{maxWidth:"fill",maxHeight:"fill",label:{visible:null!==($=t.gridConfig.isCellLabelVisible)&&void 0!==$&&$,minFontSize:8,maxFontSize:18,useGlobalMinFontSize:!0},border:{strokeWidth:0}},yAxisLabel:{visible:!!ge&&t.gridConfig.isYAxisLabelVisible,textColor:ne.axes.tickLabel.fill,padding:null!=ge&&ge.name?8:0},xAxisLabel:{visible:Boolean(t.gridConfig.isXAxisLabelVisible&&pe),textColor:ne.axes.tickLabel.fill,padding:null!=pe&&pe.name?8:0},brushMask:{fill:Q?"rgb(30,31,35,80%)":"rgb(247,247,247,50%)"},brushArea:{stroke:Q?"rgb(255, 255, 255)":"rgb(105, 112, 125)"}}},Ue=null!==(X=t.gridConfig.xTitle)&&void 0!==X?X:null==pe?void 0:pe.name,We=null!==(Z=t.gridConfig.yTitle)&&void 0!==Z?Z:null==ge?void 0:ge.name;return Object(h.jsx)(a.a.Fragment,null,void 0!==ee&&Object(h.jsx)(u.LegendToggle,{onClick:oe,showLegend:ee,legendPosition:t.legend.position}),Object(h.jsx)(R.Provider,{value:{uiState:A,setColor:re,legendPosition:t.legend.position}},Object(h.jsx)(s.Chart,r()({ref:K},Object(x.c)(N,"chart")),Object(h.jsx)(V,{splitColumnAccessor:me,splitRowAccessor:de}),Object(h.jsx)(s.Tooltip,{actions:ke?[{disabled:e=>e.length<1,label:e=>0===e.length?f.i18n.translate("expressionHeatmap.tooltipActions.emptyFilterSelection",{defaultMessage:"Select at least one series to filter"}):f.i18n.translate("expressionHeatmap.tooltipActions.filterValues",{defaultMessage:"Filter {seriesNumber} series",values:{seriesNumber:e.length}}),onSelect:t=>{const{datum:n}=t[0];if(!n)return;const{x:o,y:r}=n,i=t.some((({label:e})=>e===(null==pe?void 0:pe.name))),a=t.some((({label:e})=>e===(null==ge?void 0:ge.name))),l=[...pe&&i?[{column:fe,row:e.rows.findIndex((e=>!!pe&&(je.formattedColumns[pe.id]?ye.convert(e[pe.id])===o:e[pe.id]===o)))}]:[],...ge&&a?[{column:ve,row:e.rows.findIndex((e=>je.formattedColumns[ge.id]?we.convert(e[ge.id])===r:e[ge.id]===r))}]:[]];l.length&&C({data:[{table:e,cells:l}]})}}]:void 0,type:t.showTooltip?s.TooltipType.Follow:s.TooltipType.None}),Object(h.jsx)(s.Settings,r()({onRenderChange:ie,noResults:Object(h.jsx)(u.EmptyPlaceholder,{icon:b,renderComplete:ie}),onPointerUpdate:k?Oe:void 0,externalPointerEvents:{tooltip:{visible:S}},onElementClick:O?_e:void 0,showLegend:null!=ee?ee:t.legend.isVisible,legendPosition:t.legend.position,legendSize:m.LegendSizeToPixels[null!==(J=t.legend.legendSize)&&void 0!==J?J:m.DEFAULT_LEGEND_SIZE],legendColorPicker:A?E:void 0,debugState:null!==(q=window._echDebugStateFlag)&&void 0!==q&&q,theme:[Ye,...Array.isArray(He)?He:[He]],baseTheme:ne,xDomain:{min:Pe&&Pe.timeRange?new Date(Pe.timeRange.from).getTime():NaN,max:Pe&&Pe.timeRange?new Date(Pe.timeRange.to).getTime():NaN},onBrushEnd:O?Ie:void 0,ariaLabel:t.ariaLabel,ariaUseDefaultSummary:!t.ariaLabel,locale:f.i18n.getLocale()},Ge)),Object(h.jsx)(s.Heatmap,{id:"heatmap",name:he.name,colorScale:{type:"bands",bands:De},timeZone:n,data:Ae,xAccessor:ce||"unifiedX",yAccessor:ue||"unifiedY",valueAccessor:ae,valueFormatter:Le,xScale:Ne,ySortPredicate:ge?T(ge):"dataIndex",xSortPredicate:pe?T(pe):"dataIndex",xAxisLabelName:(null==pe?void 0:pe.name)||"",yAxisLabelName:(null==ge?void 0:ge.name)||"",xAxisTitle:t.gridConfig.isXAxisTitleVisible?Ue:void 0,yAxisTitle:t.gridConfig.isYAxisTitleVisible?We:void 0,xAxisLabelFormatter:e=>`${ce&&je.formattedColumns[ce]?e:ye.convert(e)}`,yAxisLabelFormatter:ge?e=>{var t;return`${ue&&je.formattedColumns[ue]?e:null!==(t=we.convert(e))&&void 0!==t?t:""}`}:void 0}))))}))}])]);