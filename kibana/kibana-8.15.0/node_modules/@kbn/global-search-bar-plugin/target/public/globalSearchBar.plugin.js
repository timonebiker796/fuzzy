/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=21)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),a=r(2),o=n.__importDefault(r(23));t.default=function(e,t){var r=a.useState(t),n=r[0],s=r[1];return o.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),n}},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,r){e.exports=r(12)(2)},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){"use strict";var n,a=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function s(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function i(e,t){for(var r={},n=[],a=0;a<e.length;a++){var i=e[a],c=t.base?i[0]+t.base:i[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var d=s(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:u,updater:b(p,t),references:1}),n.push(u)}return n}function c(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=a(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,u=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,r){var n=r.css,a=r.media,o=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,f=0;function b(e,t){var r,n,a;if(t.singleton){var o=f++;r=h||(h=c(t)),n=d.bind(null,r,o,!1),a=d.bind(null,r,o,!0)}else r=c(t),n=p.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=s(r[n]);o[a].references--}for(var c=i(e,t),l=0;l<r.length;l++){var u=s(r[l]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}r=c}}}},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r,n,a,o=e[1]||"",s=e[3];if(!s)return o;if(t&&"function"==typeof btoa){var i=(r=s,n=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(a," */")),c=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[o].concat(c).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(a[s]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);n&&a[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){e.exports=r(12)(4)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var n=void 0;t.setEuiDevProviderWarning=function(e){return n=e},t.getEuiDevProviderWarning=function(){return n},t.emitEuiProviderWarning=function(e){if("function"==typeof n)return n(e);switch(n){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=function(){var e=n.useRef(!1),t=n.useCallback((function(){return e.current}),[]);return n.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),a=r(2),o=n.__importDefault(r(29));t.default=function(e,t,r){void 0===t&&(t=0),void 0===r&&(r=[]);var n=o.default(e,t),s=n[0],i=n[1],c=n[2];return a.useEffect(c,r),[s,i]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a=r(30).isClient?window:null,o=function(e){return!!e.addEventListener},s=function(e){return!!e.on};t.default=function(e,t,r,i){void 0===r&&(r=a),n.useEffect((function(){if(t&&r)return o(r)?r.addEventListener(e,t,i):s(r)&&r.on(e,t,i),function(){o(r)?r.removeEventListener(e,t,i):s(r)&&r.off(e,t,i)}}),[e,t,r,JSON.stringify(i)])}},function(e,t,r){r(22),__kbnBundles__.define("plugin/globalSearchBar/public",r,32)},function(e,t,r){r.p=window.__kbnPublicPath__.globalSearchBar},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),a="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=a},function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(25);case"v8light":return r(27)}},function(e,t,r){var n=r(13),a=r(26);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,t,r){(t=r(14)(!1)).push([e.i,".kbnSearchOption__tagsList{display:inline-block;line-height:16px!important}.kbnSearchOption__tagsList .kbnSearchOption__tagsListItem{display:inline-block;margin-right:8px;max-width:80px}.euiSelectableListItem-isFocused .kbnSearchOption__tagsList{border-right:1px solid #343741;margin-right:4px}@media only screen and (max-width:574px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:575px)and (max-width:767px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:768px)and (max-width:991px){.kbnSearchBar{width:400px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSearchBar{width:400px}}@media only screen and (min-width:1200px){.kbnSearchBar{width:600px}}",""]),e.exports=t},function(e,t,r){var n=r(13),a=r(28);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},function(e,t,r){(t=r(14)(!1)).push([e.i,".kbnSearchOption__tagsList{display:inline-block;line-height:16px!important}.kbnSearchOption__tagsList .kbnSearchOption__tagsListItem{display:inline-block;margin-right:8px;max-width:80px}.euiSelectableListItem-isFocused .kbnSearchOption__tagsList{border-right:1px solid #d3dae6;margin-right:4px}@media only screen and (max-width:574px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:575px)and (max-width:767px){.kbnSearchOption__tagsList{display:none}}@media only screen and (min-width:768px)and (max-width:991px){.kbnSearchBar{width:400px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSearchBar{width:400px}}@media only screen and (min-width:1200px){.kbnSearchBar{width:600px}}",""]),e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2);t.default=function(e,t){void 0===t&&(t=0);var r=n.useRef(!1),a=n.useRef(),o=n.useRef(e),s=n.useCallback((function(){return r.current}),[]),i=n.useCallback((function(){r.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){r.current=!0,o.current()}),t)}),[t]),c=n.useCallback((function(){r.current=null,a.current&&clearTimeout(a.current)}),[]);return n.useEffect((function(){o.current=e}),[e]),n.useEffect((function(){return i(),c}),[t]),[s,c,i]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=r(9).__importDefault(r(31));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},function(e,t,r){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;0!=a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;0!=a--;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;0!=a--;){var s=o[a];if(!("_owner"===s&&t.$$typeof||e(t[s],r[s])))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return de}));var n=r(15),a=r.n(n),o=r(2),s=r(16),i=r(17),c=r(6),l=r.n(c),u=r(7),d=r.n(u),p=r(1);const h="eui-global",f="eui-utilities",b={darkMode:!1};var g=r(0);const _=[p.euiStylisPrefixer],m=d()({key:"css",stylisPlugins:_,container:document.querySelector('meta[name="emotion"]')}),v=d()({key:h,stylisPlugins:_,container:document.querySelector(`meta[name="${h}"]`)}),E=d()({key:f,stylisPlugins:_,container:document.querySelector(`meta[name="${f}"]`)});m.compat=!0,v.compat=!0,E.compat=!0;const S={default:m,global:v,utility:E},y=({theme:{theme$:e},globalStyles:t,colorMode:r,modify:n,children:a})=>{const s=l()(e,b),i=Object(o.useMemo)((()=>(e=>e.darkMode?p.COLOR_MODES_STANDARD.dark:p.COLOR_MODES_STANDARD.light)(s)),[s]),c=r||i,u=!1!==t&&void 0;return Object(g.jsx)(p.EuiProvider,{cache:S,modify:n,colorMode:c,globalStyles:u,utilityClasses:u},a)},x=({children:e,i18n:t,...r})=>Object(s.useIsNestedEuiProvider)()?(Object(i.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(g.jsx)(t.Context,null,e)):Object(g.jsx)(y,r,Object(g.jsx)(t.Context,null,e));var j=r(10);const O=({children:e,...t})=>Object(g.jsx)(x,a()({globalStyles:!1},t),Object(g.jsx)(j.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(g.jsx)(j.KibanaErrorBoundary,null,e)));var T=r(11),C=r.n(T),k=r(19),R=r.n(k),w=r(20),L=r.n(w),A=r(18),M=r.n(A);const B=navigator.platform.toLowerCase().indexOf("mac")>=0,D=new FocusEvent("focusout",{bubbles:!0}),I=(e,t)=>e.score<t.score?1:e.score>t.score?-1:0,P=(e,t)=>{const r=e.title.toUpperCase(),n=t.title.toUpperCase();return r<n?-1:r>n?1:0};var N=r(3);const U=({children:e})=>Object(g.jsx)("ul",{className:"kbnSearchOption__tagsList","aria-label":N.i18n.translate("xpack.globalSearchBar.searchBar.optionTagListAriaLabel",{defaultMessage:"Tags"})},e),F=({color:e,name:t,id:r})=>Object(g.jsx)("li",{className:"kbnSearchOption__tagsListItem",key:r},Object(g.jsx)(p.EuiBadge,{color:e},t)),K=({tags:e,searchTagIds:t})=>{if(!(e.length>3))return Object(g.jsx)(U,null,e.map(F));e.sort((e=>t.find((t=>t===e.id))?-1:1));const r=e.splice(3),n=N.i18n.translate("xpack.globalSearchBar.searchbar.overflowTagsAriaLabel",{defaultMessage:"{n} more {n, plural, one {tag} other {tags}}: {tags}",values:{n:r.length,tags:r.map((({name:e})=>e))}});return Object(g.jsx)(U,null,e.map(F),Object(g.jsx)("li",{className:"kbnSearchOption__tagsListItem","aria-label":n},Object(g.jsx)(p.EuiBadge,{title:n},"+",r.length)))},V=e=>{const{key:t,label:r,description:n,icon:a,suggestedSearch:o}=e;return{key:t,label:r,type:"__suggestion__",icon:{type:a},suggestion:o,meta:[{text:n}],"data-test-subj":"nav-search-option"}},$=["tag","type"],H={tag:["tags"],type:["types"]},G=e=>e.map((e=>String(e))),J={placeholderText:N.i18n.translate("xpack.globalSearchBar.searchBar.placeholder",{defaultMessage:"Find apps, content, and more."}),popoverButton:N.i18n.translate("xpack.globalSearchBar.searchBar.mobileSearchButtonAriaLabel",{defaultMessage:"Site-wide search"}),showSearchAriaText:N.i18n.translate("xpack.globalSearchBar.searchBar.showSearchAriaText",{defaultMessage:"Show search bar"}),closeSearchAriaText:N.i18n.translate("xpack.globalSearchBar.searchBar.closeSearchAriaText",{defaultMessage:"Close search bar"}),keyboardShortcutTooltip:{prefix:N.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.description",{defaultMessage:"Keyboard shortcut"}),onMac:N.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.macCommandDescription",{defaultMessage:"Command + /"}),onNotMac:N.i18n.translate("xpack.globalSearchBar.searchBar.shortcutTooltip.windowsCommandDescription",{defaultMessage:"Control + /"})}},z=(e,t)=>e.toLowerCase()===t.toLowerCase(),Y=e=>/\s/g.test(e)?`"${e}"`:e;var q=r(4);const W=({isMac:e})=>Object(g.jsx)(p.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1,wrap:!0},Object(g.jsx)(p.EuiFlexItem,null,Object(g.jsx)(p.EuiText,{color:"subdued",size:"xs"},Object(g.jsx)("p",null,Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.helpText.helpTextPrefix",defaultMessage:"Filter by"})," ",Object(g.jsx)(p.EuiCode,null,"type:")," ",Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.helpText.helpTextConjunction",defaultMessage:"or"})," ",Object(g.jsx)(p.EuiCode,null,"tag:")))),Object(g.jsx)(p.EuiFlexItem,{grow:!1},Object(g.jsx)(p.EuiText,{color:"subdued",size:"xs"},Object(g.jsx)("p",null,Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.shortcutDetail",defaultMessage:"{shortcutDescription} {commandDescription}",values:{shortcutDescription:Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.shortcutInstructionDescription",defaultMessage:"Shortcut"}),commandDescription:Object(g.jsx)(p.EuiCode,null,e?Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.macCommandDescription",defaultMessage:"Command + /"}):Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.shortcutDescription.windowsCommandDescription",defaultMessage:"Control + /"}))}}))))),Q=({basePath:e})=>{const{colorMode:t}=Object(p.useEuiTheme)();return Object(g.jsx)(p.EuiFlexGroup,{style:{minHeight:300},"data-test-subj":"nav-search-no-results",direction:"column",gutterSize:"xs",alignItems:"center",justifyContent:"center"},Object(g.jsx)(p.EuiFlexItem,{grow:!1},Object(g.jsx)(p.EuiImage,{alt:N.i18n.translate("xpack.globalSearchBar.searchBar.noResultsImageAlt",{defaultMessage:"Illustration of black hole"}),size:"fullWidth",url:`${e}illustration_product_no_search_results_${"DARK"===t?"dark":"light"}.svg`}),Object(g.jsx)(p.EuiText,{size:"m"},Object(g.jsx)("p",null,Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.noResultsHeading",defaultMessage:"No results found"}))),Object(g.jsx)("p",null,Object(g.jsx)(q.FormattedMessage,{id:"xpack.globalSearchBar.searchBar.noResults",defaultMessage:"Try searching for applications, dashboards, visualizations, and more."}))))};r(24);const X=e=>Object(g.jsx)(Q,{basePath:e.basePathUrl}),Z=()=>Object(g.jsx)(p.EuiFlexGroup,{direction:"column",justifyContent:"center",style:{minHeight:"300px"}},Object(g.jsx)(p.EuiFlexItem,{grow:!1},Object(g.jsx)(p.EuiLoadingSpinner,{size:"xl"})));var ee={name:"nvzj33",styles:"max-block-size:75vh"};const te=e=>{const{globalSearch:t,taggingApi:r,navigateToUrl:n,reportEvent:a,chromeStyle$:s,...i}=e,c=M()(),{euiTheme:u}=Object(p.useEuiTheme)(),d=l()(s),[h,f]=Object(o.useState)(!1),b=Object(o.useRef)(null),[_,m]=Object(o.useState)(!1),[v,E]=Object(o.useState)(""),[S,y]=Object(o.useState)(""),[x,j]=Object(o.useState)(null),[O,T]=Object(o.useState)(null),C=Object(o.useRef)(null),[k,w]=Object(o.useState)([]),[A,U]=Object(o.useState)([]),[F,q]=Object(o.useState)(!0),Q="__unknown__",[te,re]=Object(o.useState)(!1);Object(o.useEffect)((()=>{_&&(async()=>{const e=await t.getSearchableTypes();U(e)})()}),[t,_]);const ne=Object(o.useCallback)((e=>(({searchTerm:e,searchableTypes:t,tagCache:r})=>{const n=[],a=e.trim(),o=((e,t)=>{for(const r of e)if(z(r,t))return r})(t,a);if(o){const e=Y(o);n.push({key:"__type__suggestion__",label:`type: ${o}`,icon:"filter",description:N.i18n.translate("xpack.globalSearchBar.suggestions.filterByTypeLabel",{defaultMessage:"Filter by type"}),suggestedSearch:`type:${e}`})}if(r&&e){const e=r.getState().find((e=>z(e.name,a)));if(e){const t=Y(e.name);n.push({key:"__tag__suggestion__",label:`tag: ${e.name}`,icon:"tag",description:N.i18n.translate("xpack.globalSearchBar.suggestions.filterByTagLabel",{defaultMessage:"Filter by tag name"}),suggestedSearch:`tag:${t}`})}}return n})({searchTerm:e,searchableTypes:A,tagCache:null==r?void 0:r.cache})),[r,A]),ae=Object(o.useCallback)(((e,t,n=[])=>{c()&&w([...t.map(V),...e.map((e=>{var t;return((e,t,r)=>{var n;const{id:a,title:o,url:s,icon:i,type:c,meta:l={}}=e,{tagIds:u=[],categoryLabel:d=""}=l,p="application"===c||"integration"===c||"enterprise search"===c.toLowerCase()||"search"===c.toLowerCase()||"index"===c.toLowerCase()||"connector"===c.toLowerCase(),h={key:a,label:o,url:s,type:c,icon:{type:p&&i?i:"empty"},"data-test-subj":"nav-search-option"};var f;if(h.meta="application"===c?[{text:d}]:[{text:(f=null!==(n=l.displayName)&&void 0!==n?n:c,(f.charAt(0).toUpperCase()+f.slice(1)).replace(/-/g," "))}],u.length&&r){const n=r(),a=[];for(let t=0;t<u.length;t++){const r=n.find((e=>e.id===u[t]));r?a.push(r):console.warn(`SearchBar: Tag with id "${u[t]}" not found. Tag "${u[t]}" is referenced by the search result "${e.type}:${e.id}". Skipping displaying the missing tag.`)}a.length&&(h.append=Object(g.jsx)(K,{tags:a,searchTagIds:t}))}return h})(e,null!==(t=null==n?void 0:n.filter((e=>e!==Q)))&&void 0!==t?t:[],null==r?void 0:r.ui.getTagList)}))])}),[c,w,r]);R()((()=>{if(_){var e;C.current&&(C.current.unsubscribe(),C.current=null),re(!0);const n=ne(v.toLowerCase());re(!1);let o=[];0!==v.length&&a.searchRequest();const s=(e=>{let t;try{t=p.Query.parse(e)}catch(t){return{term:e,filters:{unknowns:{}}}}const r=(e=>{var t;let r;return e.ast.getTermClauses().length&&(r=e.ast.getTermClauses().map((e=>e.value)).join(" ").replace(/\s{2,}/g," ").trim()),null!==(t=r)&&void 0!==t&&t.length?r:void 0})(t),n=((e,t)=>{const r={};Object.entries(t).forEach((([e,t])=>{t.forEach((t=>{r[t]=e}))}));const n=new Map;return e.forEach(((e,t)=>{var a,o;const s=null!==(a=r[t])&&void 0!==a?a:t;n.set(s,[...null!==(o=n.get(s))&&void 0!==o?o:[],...e])})),n})((e=>{const t=new Map;return e.ast.clauses.forEach((e=>{if("field"===e.type){var r;const{field:n,value:a}=e;t.set(n,[...null!==(r=t.get(n))&&void 0!==r?r:[],...Array.isArray(a)?a:[a]])}})),t})(t),H),a=[...n.entries()].filter((([e])=>!$.includes(e))).reduce(((e,[t,r])=>({...e,[t]:r})),{}),o=n.get("tag"),s=n.get("type");return{term:r,filters:{tags:o?G(o):void 0,types:s?G(s):void 0,unknowns:a}}})(v.toLowerCase());let i;i=r&&s.filters.tags?s.filters.tags.map((e=>{var t;return null!==(t=r.ui.getTagIdFromName(e.toLowerCase()))&&void 0!==t?t:Q})):void 0;const c={term:s.term,types:s.filters.types,tags:i};y(null!==(e=s.term)&&void 0!==e?e:""),re(!0),C.current=t.find(c,{}).subscribe({next:({results:e})=>{if(v.length>0)return o=[...e,...o].sort(I),void ae(o,n,c.tags);e=e.filter((({type:e})=>"application"===e)),o=[...e,...o].sort(P),ae(o,n,c.tags)},error:e=>{re(!1),a.error({message:e,searchValue:v})},complete:()=>{re(!1)}})}}),350,[v,ne,A,_]);const oe=Object(o.useCallback)((e=>{var t;"/"===e.key&&(B?e.metaKey:e.ctrlKey)&&(e.preventDefault(),a.shortcutUsed(),"project"!==d||h?x?x.focus():O&&O.children[0].click():null===(t=b.current)||void 0===t||t.click())}),[d,h,O,x,a]),se=Object(o.useCallback)(((e,t)=>{var r;let o=null;const s=e.find((({checked:e},t)=>{const r="on"===e;return r&&(o=t+1),r}));if(!s)return;const i=null!==(r=s.label)&&void 0!==r?r:null,{url:c,type:l,suggestion:u}=s;if("__suggestion__"!==l){try{if("application"===l){var d;const e=`${(null!==(d=s.key)&&void 0!==d?d:"unknown").toLowerCase().replaceAll(" ","_")}`;a.navigateToApplication({application:e,searchValue:v,selectedLabel:i,selectedRank:o})}else a.navigateToSavedObject({type:l,searchValue:v,selectedLabel:i,selectedRank:o})}catch(e){a.error({message:e,searchValue:v}),console.log("Error trying to track searchbar metrics",e)}t.shiftKey?window.open(c):t.ctrlKey||t.metaKey?window.open(c,"_blank"):n(c),document.activeElement.blur(),x&&(ie(),x.dispatchEvent(D))}else E(u)}),[a,n,x,v]),ie=()=>E(""),ce=`${J.keyboardShortcutTooltip.prefix}: ${B?J.keyboardShortcutTooltip.onMac:J.keyboardShortcutTooltip.onNotMac}`;return L()("keydown",oe),"project"!==d||h?Object(g.jsx)(p.EuiSelectableTemplateSitewide,{isLoading:te,isPreFiltered:!0,onChange:se,options:k,className:"kbnSearchBar",popoverButtonBreakpoints:["xs","s"],singleSelection:!0,renderOption:e=>Object(p.euiSelectableTemplateSitewideRenderOptions)(e,S),listProps:{className:"eui-yScroll",css:ee},searchProps:{autoFocus:"project"===d,value:v,onInput:e=>E(e.currentTarget.value),"data-test-subj":"nav-search-input",inputRef:j,compressed:!0,"aria-label":J.placeholderText,placeholder:J.placeholderText,onFocus:()=>{a.searchFocus(),m(!0),q(!1)},onBlur:()=>{a.searchBlur(),q(!v.length)},fullWidth:!0,append:"project"===d?Object(g.jsx)(p.EuiButtonIcon,{"aria-label":J.closeSearchAriaText,color:"text","data-test-subj":"nav-search-conceal",iconType:"cross",onClick:()=>{a.searchBlur(),f(!1)}}):F?Object(g.jsx)(p.EuiFormLabel,{title:ce,css:Object(g.css)({fontFamily:u.font.familyCode},"","")},B?"⌘/":"^/"):void 0},emptyMessage:Object(g.jsx)(Z,null),noMatchesMessage:Object(g.jsx)(X,i),popoverProps:{"data-test-subj":"nav-search-popover",panelClassName:"navSearch__panel",repositionOnScroll:!0,popoverRef:T,panelStyle:{marginTop:"6px"}},popoverButton:Object(g.jsx)(p.EuiHeaderSectionItemButton,{"aria-label":J.popoverButton},Object(g.jsx)(p.EuiIcon,{type:"search",size:"m"})),popoverFooter:Object(g.jsx)(W,{isMac:B})}):Object(g.jsx)(p.EuiHeaderSectionItemButton,{"aria-label":J.showSearchAriaText,buttonRef:b,color:"text","data-test-subj":"nav-search-reveal",iconType:"search",onClick:()=>{f(!0)}})};var re=r(8),ne=r.n(re),ae=r(5);let oe=function(e){return e.UNHANDLED_ERROR="unhandled_error",e.SHORTCUT_USED="shortcut_used",e.SEARCH_FOCUS="search_focus",e.SEARCH_REQUEST="search_request",e}({}),se=function(e){return e.USER_NAVIGATED_TO_APPLICATION="user_navigated_to_application",e.USER_NAVIGATED_TO_SAVED_OBJECT="user_navigated_to_saved_object",e}({}),ie=function(e){return e.CLICK_APPLICATION="global_search_bar_click_application",e.CLICK_SAVED_OBJECT="global_search_bar_click_saved_object",e.SEARCH_BLUR="global_search_bar_blur",e.ERROR="global_search_bar_error",e}({}),ce=function(e){return e.APPLICATION="application",e.SAVED_OBJECT_TYPE="saved_object_type",e.FOCUS_TIME="focus_time_ms",e.SELECTED_LABEL="selected_label",e.SELECTED_RANK="selected_rank",e.ERROR_MESSAGE="error_message",e.TERMS="terms",e}({});class event_reporter_EventReporter{constructor({analytics:e,usageCollection:t}){ne()(this,"reportEvent",void 0),ne()(this,"trackUiMetric",void 0),ne()(this,"focusStart",1/0),this.reportEvent=e.reportEvent,this.trackUiMetric=t?(e,r,n)=>{let a;switch(r){case se.USER_NAVIGATED_TO_APPLICATION:case se.USER_NAVIGATED_TO_SAVED_OBJECT:a=[e,[r,`${r}_${n}`]];break;default:a=[e,r]}t.reportUiCounter("global_search_bar",...a)}:()=>{}}searchFocus(){this.trackUiMetric(ae.METRIC_TYPE.COUNT,oe.SEARCH_FOCUS),this.focusStart=Date.now()}searchBlur(){const e=Date.now()-this.focusStart;e>0&&this.reportEvent(ie.SEARCH_BLUR,{[ce.FOCUS_TIME]:e}),this.focusStart=1/0}searchRequest(){this.trackUiMetric(ae.METRIC_TYPE.COUNT,oe.SEARCH_REQUEST)}shortcutUsed(){this.trackUiMetric(ae.METRIC_TYPE.COUNT,oe.SHORTCUT_USED)}navigateToApplication(e){var t,r;const n=null!==(t=null==e?void 0:e.application)&&void 0!==t?t:"unknown";this.trackUiMetric(ae.METRIC_TYPE.CLICK,se.USER_NAVIGATED_TO_APPLICATION,n);const a=null!==(r=null==e?void 0:e.searchValue)&&void 0!==r?r:"";this.reportEvent(ie.CLICK_APPLICATION,{[ce.TERMS]:a,[ce.APPLICATION]:n,[ce.SELECTED_RANK]:e.selectedRank,[ce.SELECTED_LABEL]:e.selectedLabel})}navigateToSavedObject(e){var t,r;const n=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:"unknown";this.trackUiMetric(ae.METRIC_TYPE.CLICK,se.USER_NAVIGATED_TO_SAVED_OBJECT,n);const a=null!==(r=null==e?void 0:e.searchValue)&&void 0!==r?r:"";this.reportEvent(ie.CLICK_SAVED_OBJECT,{[ce.TERMS]:a,[ce.SAVED_OBJECT_TYPE]:n,[ce.SELECTED_RANK]:e.selectedRank,[ce.SELECTED_LABEL]:e.selectedLabel})}error(e){var t,r;this.trackUiMetric(ae.METRIC_TYPE.COUNT,oe.UNHANDLED_ERROR);const n=null!==(t=null==e?void 0:e.message.toString())&&void 0!==t?t:"unknown",a=null!==(r=null==e?void 0:e.searchValue)&&void 0!==r?r:"";this.reportEvent(ie.ERROR,{[ce.TERMS]:a,[ce.ERROR_MESSAGE]:n})}}const le={[ce.APPLICATION]:{[ce.APPLICATION]:{type:"keyword",_meta:{description:"The name of the application selected in the global search bar results."}}},[ce.SAVED_OBJECT_TYPE]:{[ce.SAVED_OBJECT_TYPE]:{type:"keyword",_meta:{description:"The type of the saved object selected in the global search bar results."}}},[ce.FOCUS_TIME]:{[ce.FOCUS_TIME]:{type:"long",_meta:{description:"The length in milliseconds the global search bar had the cursor focused."}}},[ce.SELECTED_RANK]:{[ce.SELECTED_RANK]:{type:"short",_meta:{description:"The ranking of placement of the selected option in the results list."}}},[ce.SELECTED_LABEL]:{[ce.SELECTED_LABEL]:{type:"keyword",_meta:{description:"The text of the selected option in the results list."}}},[ce.ERROR_MESSAGE]:{[ce.ERROR_MESSAGE]:{type:"keyword",_meta:{description:"A message from an error that was caught."}}},[ce.TERMS]:{[ce.TERMS]:{type:"keyword",_meta:{description:"The search terms entered by the user."}}}},ue=[{eventType:ie.CLICK_APPLICATION,schema:{...le[ce.APPLICATION],...le[ce.TERMS],...le[ce.SELECTED_RANK],...le[ce.SELECTED_LABEL]}},{eventType:ie.CLICK_SAVED_OBJECT,schema:{...le[ce.SAVED_OBJECT_TYPE],...le[ce.TERMS],...le[ce.SELECTED_RANK],...le[ce.SELECTED_LABEL]}},{eventType:ie.SEARCH_BLUR,schema:{...le[ce.FOCUS_TIME]}},{eventType:ie.ERROR,schema:{...le[ce.ERROR_MESSAGE],...le[ce.TERMS]}}];class plugin_GlobalSearchBarPlugin{setup({analytics:e}){return ue.forEach((t=>{e.registerEventType(t)})),{}}start(e,t){return e.chrome.navControls.registerCenter(this.getNavControl({core:e,...t})),{}}getNavControl(e){const{core:t,globalSearch:r,savedObjectsTagging:n,usageCollection:a}=e,{application:o,http:s,theme:i,i18n:c}=t,l=new event_reporter_EventReporter({analytics:t.analytics,usageCollection:a});return{order:1e3,mount:e=>(C.a.render(Object(g.jsx)(O,{theme:i,i18n:c},Object(g.jsx)(te,{globalSearch:r,navigateToUrl:o.navigateToUrl,taggingApi:n,basePathUrl:s.basePath.prepend("/plugins/globalSearchBar/assets/"),chromeStyle$:t.chrome.getChromeStyle$(),reportEvent:l})),e),()=>C.a.unmountComponentAtNode(e))}}}const de=()=>new plugin_GlobalSearchBarPlugin}]);