/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.searchNotebooks_bundle_jsonpfunction=window.searchNotebooks_bundle_jsonpfunction||[]).push([[1],{19:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(16),r=o(0),a=n.__importDefault(o(21));t.default=function(e,t){var o=r.useState(t),n=o[0],s=o[1];return a.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),n}},20:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var n=void 0;t.setEuiDevProviderWarning=function(e){return n=e},t.getEuiDevProviderWarning=function(){return n},t.emitEuiProviderWarning=function(e){if("function"==typeof n)return n(e);switch(n){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},21:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),r="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=r},22:function(e,t,o){"use strict";const n=o(23),r=o(24),a=o(25);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function c(e,t){return t.decode?r(e):e}function l(e){return Array.isArray(e)?e.sort():"object"==typeof e?l(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function b(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function j(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const o=function(e){let t;switch(e.arrayFormat){case"index":return(e,o,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=o):n[e]=o};case"bracket":return(e,o,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],o):n[e]=[o]:n[e]=o};case"comma":case"separator":return(t,o,n)=>{const r="string"==typeof o&&o.split("").indexOf(e.arrayFormatSeparator)>-1?o.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===o?o:c(o,e);n[t]=r};default:return(e,t,o)=>{void 0!==o[e]?o[e]=[].concat(o[e],t):o[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const r of e.split("&")){let[e,s]=a(t.decode?r.replace(/\+/g," "):r,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:c(s,t),o(c(e,t),s,n)}for(const e of Object.keys(n)){const o=n[e];if("object"==typeof o&&null!==o)for(const e of Object.keys(o))o[e]=d(o[e],t);else n[e]=d(o,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const o=n[t];return Boolean(o)&&"object"==typeof o&&!Array.isArray(o)?e[t]=l(o):e[t]=o,e}),Object.create(null))}t.extract=b,t.parse=j,t.stringify=(e,t)=>{if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const o=o=>t.skipNull&&null==e[o]||t.skipEmptyString&&""===e[o],n=function(e){switch(e.arrayFormat){case"index":return t=>(o,n)=>{const r=o.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[i(t,e),"[",r,"]"].join("")]:[...o,[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")]};case"bracket":return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,[i(t,e),"[]"].join("")]:[...o,[i(t,e),"[]=",i(n,e)].join("")];case"comma":case"separator":return t=>(o,n)=>null==n||0===n.length?o:0===o.length?[[i(t,e),"=",i(n,e)].join("")]:[[o,i(n,e)].join(e.arrayFormatSeparator)];default:return t=>(o,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?o:null===n?[...o,i(t,e)]:[...o,[i(t,e),"=",i(n,e)].join("")]}}(t),r={};for(const t of Object.keys(e))o(t)||(r[t]=e[t]);const a=Object.keys(r);return!1!==t.sort&&a.sort(t.sort),a.map((o=>{const r=e[o];return void 0===r?"":null===r?i(o,t):Array.isArray(r)?r.reduce(n(o),[]).join("&"):i(o,t)+"="+i(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[o,n]=a(e,"#");return Object.assign({url:o.split("?")[0]||"",query:j(b(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,t)}:{})},t.stringifyUrl=(e,o)=>{o=Object.assign({encode:!0,strict:!0},o);const n=u(e.url).split("?")[0]||"",r=t.extract(e.url),a=t.parse(r,{sort:!1}),s=Object.assign(a,e.query);let c=t.stringify(s,o);c&&(c=`?${c}`);let l=function(e){let t="";const o=e.indexOf("#");return-1!==o&&(t=e.slice(o)),t}(e.url);return e.fragmentIdentifier&&(l=`#${i(e.fragmentIdentifier,o)}`),`${n}${c}${l}`}},23:function(e,t,o){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},24:function(e,t,o){"use strict";var n="%[a-f0-9]{2}",r=new RegExp("("+n+")|([^%]+?)","gi"),a=new RegExp("("+n+")+","gi");function s(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var o=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],s(o),s(n))}function i(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(r)||[],o=1;o<t.length;o++)t=(e=s(t,o).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},o=a.exec(e);o;){try{t[o[0]]=decodeURIComponent(o[0])}catch(e){var n=i(o[0]);n!==o[0]&&(t[o[0]]=n)}o=a.exec(e)}t["%C2"]="�";for(var r=Object.keys(t),s=0;s<r.length;s++){var c=r[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},25:function(e,t,o){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const o=e.indexOf(t);return-1===o?[e]:[e.slice(0,o),e.slice(o+t.length)]}},27:function(e,t,o){"use strict";o.r(t),o.d(t,"SearchNotebooksView",(function(){return ne}));var n=o(0),r=o.n(n),a=o(13),s=o(7),i=o.n(s),c=o(19),l=o.n(c),u=o(11),b=o(14),d=o(20),j=o(15),p=o.n(j);const g="eui-global",m="eui-utilities",h=e=>e.darkMode?u.COLOR_MODES_STANDARD.dark:u.COLOR_MODES_STANDARD.light,x={darkMode:!1};var f=o(1);const k=[u.euiStylisPrefixer],y=p()({key:"css",stylisPlugins:k,container:document.querySelector('meta[name="emotion"]')}),O=p()({key:g,stylisPlugins:k,container:document.querySelector(`meta[name="${g}"]`)}),v=p()({key:m,stylisPlugins:k,container:document.querySelector(`meta[name="${m}"]`)});y.compat=!0,O.compat=!0,v.compat=!0;const E={default:y,global:O,utility:v},w=({theme:{theme$:e},globalStyles:t,colorMode:o,modify:r,children:a})=>{const s=l()(e,x),i=Object(n.useMemo)((()=>h(s)),[s]),c=o||i,b=!1!==t&&void 0;return Object(f.jsx)(u.EuiProvider,{cache:E,modify:r,colorMode:c,globalStyles:b,utilityClasses:b},a)},S=({theme:{theme$:e},euiTheme:t,children:o,...r})=>{const a=l()(e,x),s=Object(n.useMemo)((()=>h(a)),[a]);return Object(f.jsx)(u.EuiThemeProvider,i()({colorMode:s,theme:t},r),o)},N=({theme:e,children:t,...o})=>Object(b.useIsNestedEuiProvider)()?Object(f.jsx)(S,i()({theme:e},o),t):(Object(d.emitEuiProviderWarning)("KibanaThemeProvider requires a parent KibanaRenderContextProvider.  Check your React tree and ensure that they are wrapped in a KibanaRenderContextProvider."),Object(f.jsx)(w,{theme:e,globalStyles:!1},t));var C=o(3),F=o(12);const P={id:"introduction",title:F.i18n.translate("xpack.searchNotebooks.introductionNotebook.title",{defaultMessage:"Jupyter notebooks"}),description:F.i18n.translate("xpack.searchNotebooks.introductionNotebook.description",{defaultMessage:"Learn all about Jupyter notebooks, how to preview them in the UI, and how to run them."}),notebook:{cells:[{cell_type:"markdown",source:["# What are Jupyter notebooks?\n","\n","Jupyter Notebooks combine executable code and rich Markdown documentation in a single interactive document. Easy to run, edit and share, they enable collaboration in fields like data science, scientific computing, and machine learning.","\n","\n","Notebooks are composed of cells, which can contain Markdown text like this, or Python code like the cell below.\n"]},{cell_type:"code",source:['print("Hello world!!!")\n']},{cell_type:"markdown",source:["\nNotebooks are a great way to test and prototype code, and share results with others. In our notebooks we use the official [Elasticsearch Python client](https://elasticsearch-py.readthedocs.io/en/latest/) to call the Elasticsearch APIs."]},{cell_type:"markdown",source:["## Elastic Jupyter notebooks\n","\n","You can **preview** a number of our Jupyter notebooks right here in the UI. Check out the next section for how to **run** notebooks.\n","\nFind all of our available notebooks in the `elasticsearch-labs` [GitHub repository](https://github.com/elastic/elasticsearch-labs).","\n","## How to run notebooks\n","\n","You can run notebooks in two ways:","\n","- **Run in Colab**: You can run all our notebooks in Google [Colab](https://colab.research.google.com), a free, zero configuration, in-browser notebook execution environment. Just click the `Open in Colab` button at the top of a notebook to test it in Colab.\n","- **Run locally**: You can also download the notebooks from the repository and run them locally using tools like [JupyterLab](https://jupyter.org/install).\n","\n","ℹ️ Just make sure to copy your **Elasticsearch endpoint and API key** so the notebook can run against your deployment.\n","\n","## Learn more\n","\n","Check out [Elastic Search Labs](https://www.elastic.co/search-labs) for all the latest advanced content for Elasticsearch users, including additional Python examples."]}]}},I=()=>Object(a.useKibana)().services;var M=o(22);const _=()=>Object(f.jsx)(u.EuiPanel,{color:"subdued"},Object(f.jsx)(u.EuiLoadingSpinner,null)),$=({description:e,id:t,isSelected:o,title:n,onClick:a})=>{const{euiTheme:s}=Object(u.useEuiTheme)();return Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(u.EuiPanel,{"data-test-subj":`console-embedded-notebook-select-btn-${t}`,"data-telemdata-telemetry-id":`console-embedded-notebook-select-btn-${t}`,onClick:()=>a(t),color:o?"primary":"subdued",hasBorder:!0},Object(f.jsx)(u.EuiTitle,{size:"xxs"},Object(f.jsx)("h5",null,Object(f.jsx)(u.EuiTextColor,{color:s.colors.primaryText},n))),Object(f.jsx)(u.EuiSpacer,{size:"xs"}),Object(f.jsx)(u.EuiText,{size:"s",color:o?s.colors.primaryText:"subdued"},Object(f.jsx)("p",null,e))),Object(f.jsx)(u.EuiHorizontalRule,{margin:"none"}))},T=({notebooks:e,onNotebookSelect:t,selectedNotebookId:o})=>null===e?Object(f.jsx)(_,null):Object(f.jsx)(r.a.Fragment,null,e.map((e=>Object(f.jsx)($,{key:e.id,id:e.id,title:e.title,description:e.description,onClick:t,isSelected:o===e.id})))),R=({children:e})=>Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(u.EuiPanel,{hasShadow:!1,paddingSize:"s"},Object(f.jsx)(u.EuiText,{size:"s",color:"subdued"},e)),Object(f.jsx)(u.EuiHorizontalRule,{margin:"none"}));function z(e){return null!=e}function L(e){return z(e)&&e.length>0}const A=(e,t="")=>Array.isArray(e)?e.join(t):e,B=({cell:e,language:t})=>{if(!e.cell_type)return null;const o=e.source?A(e.source):e.input?A(e.input):null;if(!o)return null;switch(e.cell_type){case"markdown":return Object(f.jsx)(u.EuiMarkdownFormat,null,o);case"code":return Object(f.jsx)(u.EuiCodeBlock,{language:t,lineNumbers:!0,isCopyable:!0},o);case"heading":return Object(f.jsx)(u.EuiTitle,null,Object(f.jsx)("h2",null,o))}return null},U=({output:e})=>z(e.text)&&e.text.length>0?Object(f.jsx)(u.EuiCodeBlock,null,A(e.text)):L(e.png)?Object(f.jsx)(W,{value:e.png}):L(e.jpeg)?Object(f.jsx)(D,{value:e.jpeg}):L(e.gif)?Object(f.jsx)(J,{value:e.gif}):z(e.data)?z(e.data["text/plain"])?Object(f.jsx)(u.EuiCodeBlock,null,A(e.data["text/plain"])):L(e.data["image/png"])?Object(f.jsx)(W,{value:e.data["image/png"]}):L(e.data["image/jpeg"])?Object(f.jsx)(D,{value:e.data["image/jpeg"]}):L(e.data["image/gif"])?Object(f.jsx)(J,{value:e.data["image/gif"]}):z(e.data["text/html"])?Object(f.jsx)(u.EuiCodeBlock,{lineNumbers:!0},A(e.data["text/html"])):z(e.data["application/javascript"])?Object(f.jsx)(u.EuiCodeBlock,{lineNumbers:!0},A(e.data["application/javascript"])):z(e.data["text/latex"])?Object(f.jsx)(u.EuiCodeBlock,{lineNumbers:!0},A(e.data["text/latex"])):null:null,q=({value:e,type:t})=>Object(f.jsx)("img",{src:`data:image/${t};base64,${e}`,alt:`output ${t} image`,style:{maxHeight:"400px",maxWidth:"400px"}}),W=({value:e})=>Object(f.jsx)(q,{value:e,type:"png"}),D=({value:e})=>Object(f.jsx)(q,{value:e,type:"jpeg"}),J=({value:e})=>Object(f.jsx)(q,{value:e,type:"gif"}),K=({notebook:e})=>{var t,o,n;const{euiTheme:r}=Object(u.useEuiTheme)(),a=null!==(t=null===(o=e.metadata)||void 0===o||null===(n=o.language_info)||void 0===n?void 0:n.name)&&void 0!==t?t:"python";return Object(f.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"xl",style:{maxWidth:50*r.base+"px"},justifyContent:"center"},e.cells.map(((e,t)=>{var o;const n=null!==(o=e.id)&&void 0!==o?o:`nb.cell.${t}`;return e.outputs&&e.outputs.length>0?Object(f.jsx)(u.EuiFlexItem,{key:n},Object(f.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(f.jsx)(u.EuiFlexItem,null,Object(f.jsx)(B,{cell:e,language:a})),e.outputs.map(((e,t)=>Object(f.jsx)(u.EuiFlexItem,{key:`${n}.output.${t}`},Object(f.jsx)(U,{output:e})))))):Object(f.jsx)(u.EuiFlexItem,{key:n},Object(f.jsx)(B,{cell:e,language:a}))})))};var G=o(17),H=o(2),Y={name:"1flj9lk",styles:"text-align:left"};const Q=({error:e,notebookId:t,usageTracker:o})=>(r.a.useEffect((()=>{o.count(["notebookViewError",`error-${t}`])}),[o,t]),Object(f.jsx)(u.EuiEmptyPrompt,{iconType:"warning",iconColor:"danger",title:Object(f.jsx)("h2",null,Object(f.jsx)(G.FormattedMessage,{id:"xpack.searchNotebooks.notebook.fetchError.title",defaultMessage:"Error loading notebook"})),titleSize:"l",body:Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)("p",null,Object(f.jsx)(G.FormattedMessage,{id:"xpack.searchNotebooks.notebook.fetchError.body",defaultMessage:"We can't fetch the notebook from Kibana due to the following error:"})),void 0!==e&&"object"==typeof e?Object(f.jsx)(u.EuiCodeBlock,{css:Y},JSON.stringify(e)):Object(f.jsx)("p",null,Object(H.b)(e,F.i18n.translate("xpack.searchNotebooks.notebook.fetchError.unknownError",{defaultMessage:"Unknown error fetching notebook"}))))})),V=({notebookId:e})=>{const t=(()=>{const{usageTracker:e}=I();return e})(),{data:o,isLoading:r,error:a}=(e=>{const{http:t}=I();return Object(C.useQuery)({queryKey:["fetchSearchNotebook",e],queryFn:()=>t.get(`/internal/search_notebooks/notebooks/${e}`)})})(e);return Object(n.useEffect)((()=>{t.count(["view-notebook",`nb-${e}`])}),[t,e]),r?Object(f.jsx)(_,null):!o||a?Object(f.jsx)(Q,{notebookId:e,usageTracker:t,error:a}):Object(f.jsx)(u.EuiPanel,{paddingSize:"xl",hasShadow:!1,style:{display:"flex",justifyContent:"center"},"data-test-subj":`console-embedded-notebook-view-panel-${e}`},Object(f.jsx)(K,{notebook:o.notebook}))},X=()=>Object(f.jsx)(u.EuiPanel,{hasShadow:!1},Object(f.jsx)(u.EuiFlexGroup,{justifyContent:"center"},Object(f.jsx)(u.EuiButton,{href:"https://github.com/elastic/elasticsearch-labs/tree/main/notebooks",target:"_blank",iconSide:"right",iconType:"popout","data-test-subj":"console-notebooks-search-labs-btn","data-telemetry-id":"console-notebooks-search-labs-btn"},F.i18n.translate("xpack.searchNotebooks.searchLabsLink",{defaultMessage:"Browse all our notebooks"})))),Z="notebooksList",ee="notebooksOutput",te={[Z]:25,[ee]:75},oe=()=>{const[e,t]=Object(n.useState)(te),[o,a]=Object(n.useState)("introduction"),{data:s}=(()=>{const{http:e}=I(),t=(()=>{const{notebooks:{getNotebookList:e}}=I(),t=Object(n.useMemo)((()=>e()),[e]);return Object(n.useMemo)((()=>(()=>{const[,e]=(window.location.search||window.location.hash||"").split("?"),t=Object(M.parse)(e||"",{sort:!1});if(t&&t.nblist&&"string"==typeof t.nblist)return t.nblist})()),[])||t||void 0})();return Object(C.useQuery)({queryKey:[`fetchNotebooksCatalog-${null!=t?t:"default"}`],queryFn:()=>e.get("/internal/search_notebooks/notebooks",{query:{list:t}})})})(),i=Object(n.useCallback)((e=>{t((t=>({...t,...e})))}),[]),c=Object(n.useMemo)((()=>s?s.notebooks:null),[s]),l=Object(n.useCallback)((e=>{a(e)}),[]);return Object(f.jsx)(u.EuiResizableContainer,{style:{height:"100%",width:"100%"},onPanelWidthChange:i,"data-test-subj":"consoleEmbeddedNotebooksContainer"},((t,n)=>Object(f.jsx)(r.a.Fragment,null,Object(f.jsx)(t,{id:Z,size:e[Z],minSize:"10%",tabIndex:0,paddingSize:"none"},Object(f.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(f.jsx)(R,null,F.i18n.translate("xpack.searchNotebooks.notebooksList.introduction.title",{defaultMessage:"Introduction"})),Object(f.jsx)($,{id:P.id,title:P.title,description:P.description,onClick:l,isSelected:o===P.id}),Object(f.jsx)(R,null,F.i18n.translate("xpack.searchNotebooks.notebooksList.availableNotebooks.title",{defaultMessage:"Notebook previews"})),Object(f.jsx)(T,{notebooks:c,selectedNotebookId:o,onNotebookSelect:l}),Object(f.jsx)(X,null))),Object(f.jsx)(n,null),Object(f.jsx)(t,{id:ee,size:e[ee],minSize:"200px",tabIndex:0,paddingSize:"none"},Object(f.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(f.jsx)(u.EuiFlexItem,{grow:!1},Object(f.jsx)(R,null,F.i18n.translate("xpack.searchNotebooks.notebooksList.activeNotebook.title",{defaultMessage:"Active notebook"}))),Object(f.jsx)(u.EuiFlexItem,null,Object(f.jsx)(V,{notebookId:o})))))))},ne=({core:e,queryClient:t,usageTracker:o,getNotebookList:n})=>(r.a.useEffect((()=>{o.count("opened_notebooks_view")}),[o]),Object(f.jsx)(N,{theme:e.theme},Object(f.jsx)(a.KibanaContextProvider,{services:{...e,notebooks:{getNotebookList:n},usageTracker:o}},Object(f.jsx)(C.QueryClientProvider,{client:t},Object(f.jsx)(oe,null)))))}}]);