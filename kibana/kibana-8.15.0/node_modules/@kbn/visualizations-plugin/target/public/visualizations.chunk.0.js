(window.visualizations_bundle_jsonpfunction=window.visualizations_bundle_jsonpfunction||[]).push([[0],{100:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return u}));var i=a(3),n=a.n(i),s=a(45),r=a.n(s),o=a(6);const l=n.a.createContext(null),c=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:i}=t;return Object(o.jsx)(l.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)},d=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:i}=t.application,n=r()(i,void 0);return Object(o.jsx)(l.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)};function u(){const e=Object(i.useContext)(l);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}},162:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(163);case"v8light":return a(165)}},163:function(e,t,a){var i=a(83),n=a(164);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},164:function(e,t,a){(t=a(84)(!1)).push([e.i,'@media only screen and (min-width:768px)and (max-width:991px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width:992px)and (max-width:1199px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width:1200px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width:768px)and (max-width:991px){.visNavItem__goToLens:after{border-right:1px solid #343741;bottom:0;content:"";display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width:992px)and (max-width:1199px){.visNavItem__goToLens:after{border-right:1px solid #343741;bottom:0;content:"";display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width:1200px){.visNavItem__goToLens:after{border-right:1px solid #343741;bottom:0;content:"";display:block;pointer-events:none;position:absolute;right:-8px;top:0}}',""]),e.exports=t},165:function(e,t,a){var i=a(83),n=a(166);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},166:function(e,t,a){(t=a(84)(!1)).push([e.i,'@media only screen and (min-width:768px)and (max-width:991px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width:992px)and (max-width:1199px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width:1200px){.visNavItem__goToLens{margin-right:12px;position:relative}}@media only screen and (min-width:768px)and (max-width:991px){.visNavItem__goToLens:after{border-right:1px solid #d3dae6;bottom:0;content:"";display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width:992px)and (max-width:1199px){.visNavItem__goToLens:after{border-right:1px solid #d3dae6;bottom:0;content:"";display:block;pointer-events:none;position:absolute;right:-8px;top:0}}@media only screen and (min-width:1200px){.visNavItem__goToLens:after{border-right:1px solid #d3dae6;bottom:0;content:"";display:block;pointer-events:none;position:absolute;right:-8px;top:0}}',""]),e.exports=t},200:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(41),n=a.n(i),s=a(3),r=a(100);var o=a(6);const l={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},c=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const r=Object(s.useRef)(null),c=Object(s.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:i})=>{if(!t||!i)return;const n=((e,t)=>{let a=e;do{var i,n;if("a"===(null===(i=a)||void 0===i?void 0:i.tagName.toLowerCase()))return a;const e=null===(n=a)||void 0===n?void 0:n.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!n)return;const s=n.href,r=""===n.target||"_self"===n.target,o=0===e.button;s&&r&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(n.href))})({event:e,currentAppId:a,navigateToUrl:t,container:r.current})),[a,t]);return Object(o.jsx)("div",n()({onClick:c,ref:r,css:l,"data-test-subj":"kbnRedirectAppLink"},i),e)},d=({children:e,...t})=>Object(o.jsx)(c,n()({},Object(r.c)(),t),e)},205:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a(3);var i=a(200),n=a(100),s=a(6);const r=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...r}=t,o=Object(s.jsx)(i.a,r,e);return Object(s.jsx)(n.a,{coreStart:a},o)}const{navigateToUrl:a,currentAppId:r,...o}=t,l=Object(s.jsx)(i.a,o,e);return Object(s.jsx)(n.b,{currentAppId:r,navigateToUrl:a},l)}},83:function(e,t,a){"use strict";var i,n=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function r(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},i=[],n=0;n<e.length;n++){var o=e[n],l=t.base?o[0]+t.base:o[0],c=a[l]||0,d="".concat(l," ").concat(c);a[l]=c+1;var u=r(d),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(s[u].references++,s[u].updater(p)):s.push({identifier:d,updater:f(p,t),references:1}),i.push(d)}return i}function l(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var s=a.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=n(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function u(e,t,a,i){var n=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=d(t,n);else{var s=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(s,r[t]):e.appendChild(s)}}function p(e,t,a){var i=a.css,n=a.media,s=a.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var v=null,g=0;function f(e,t){var a,i,n;if(t.singleton){var s=g++;a=v||(v=l(t)),i=u.bind(null,a,s,!1),n=u.bind(null,a,s,!0)}else a=l(t),i=p.bind(null,a,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var n=r(a[i]);s[n].references--}for(var l=o(e,t),c=0;c<a.length;c++){var d=r(a[c]);0===s[d].references&&(s[d].updater(),s.splice(d,1))}a=l}}}},84:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,i,n,s=e[1]||"",r=e[3];if(!r)return s;if(t&&"function"==typeof btoa){var o=(a=r,i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(n," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[s].concat(l).concat([o]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var s=0;s<this.length;s++){var r=this[s][0];null!=r&&(n[r]=!0)}for(var o=0;o<e.length;o++){var l=[].concat(e[o]);i&&n[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},85:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return L})),a.d(t,"b",(function(){return w})),a.d(t,"a",(function(){return z})),a.d(t,"f",(function(){return M})),a.d(t,"g",(function(){return k})),a.d(t,"i",(function(){return _})),a.d(t,"k",(function(){return U})),a.d(t,"m",(function(){return ee})),a.d(t,"j",(function(){return te})),a.d(t,"l",(function(){return ae})),a.d(t,"h",(function(){return ie}));var i=a(3),n=a(10),s=a(4),r=a(64),o=a(6);const l=()=>({field:"typeTitle",name:s.i18n.translate("visualizations.listing.table.typeColumnName",{defaultMessage:"Type"}),sortable:!0,width:"150px",render:(e,t)=>{return t.error?Object(o.jsx)(n.EuiBadge,{iconType:"warning",color:"warning"},t.error):Object(o.jsx)("span",null,(e=>{let t;return t=e.image?Object(o.jsx)("img",{className:"visListingTable__typeImage","aria-hidden":"true",alt:"",src:e.image}):Object(o.jsx)(n.EuiIcon,{className:"visListingTable__typeIcon","aria-hidden":"true",type:e.icon||"empty",size:"m"}),t})(t),t.typeTitle,"beta"===(a=t).stage?Object(o.jsx)(n.EuiBetaBadge,{className:"visListingTable__betaIcon",label:"B",title:s.i18n.translate("visualizations.listing.betaTitle",{defaultMessage:"Beta"}),tooltipContent:s.i18n.translate("visualizations.listing.betaTooltip",{defaultMessage:"This visualization is in beta and is subject to change. The design and code is less mature than official GA features and is being provided as-is with no warranties. Beta features are not subject to the support SLA of official GA features"})}):"experimental"===a.stage?Object(o.jsx)(n.EuiBetaBadge,{className:"visListingTable__experimentalIcon",label:"E",title:s.i18n.translate("visualizations.listing.experimentalTitle",{defaultMessage:"Technical preview"}),tooltipContent:s.i18n.translate("visualizations.listing.experimentalTooltip",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."})}):void 0);var a}}),c=e=>Object(o.jsx)(n.EuiEmptyPrompt,{iconType:"visualizeApp",title:Object(o.jsx)("h1",{id:"visualizeListingHeading","data-test-subj":"emptyListPrompt"},Object(o.jsx)(r.FormattedMessage,{id:"visualizations.listing.createNew.title",defaultMessage:"Create your first visualization"})),body:Object(o.jsx)("p",null,Object(o.jsx)(r.FormattedMessage,{id:"visualizations.listing.createNew.description",defaultMessage:"You can create different visualizations based on your data."})),actions:Object(o.jsx)(n.EuiButton,{onClick:e,fill:!0,iconType:"plusInCircle","data-test-subj":"newItemButton"},Object(o.jsx)(r.FormattedMessage,{id:"visualizations.listing.createNew.createButtonLabel",defaultMessage:"Create new visualization"}))});var d=a(70),u=a.n(d),p=a(87),v=a(73),g=a(74),f=a(5),b=a(13),h=a(60),m=a(8);const y=s.i18n.translate("visualizations.editor.defaultEditBreadcrumbText",{defaultMessage:"Edit visualization"});function S(){return[{text:s.i18n.translate("visualizations.listing.breadcrumb",{defaultMessage:"Visualize Library"}),href:`#${m.VisualizeConstants.LANDING_PAGE_PATH}`}]}function j({byValue:e,originatingAppName:t,redirectToOrigin:a},i=y){return[...t?[{text:t,onClick:a}]:[],...e?[]:S(),{text:i}]}function O({byValue:e,originatingAppName:t,redirectToOrigin:a},i=y){return[{text:i}]}var T=a(51),I=a(2),x=a(12);const w=(e,t)=>{e.setHelpExtension({appName:s.i18n.translate("visualizations.helpMenu.appName",{defaultMessage:"Visualize Library"}),links:[{linkType:"documentation",href:`${t.links.visualize.guide}`}]})},z=e=>{e.setBadge({text:s.i18n.translate("visualizations.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:s.i18n.translate("visualizations.badge.readOnly.tooltip",{defaultMessage:"Unable to save visualizations to the library"}),iconType:"glasses"})},N=({data:e})=>e.query.queryString.getDefaultQuery(),E=(e,t)=>{var a,i;const n=e.vis,s=Object(b.a)(n.serialize()),r="savedVis"in e?e.savedVis:void 0;return{uiState:r&&r.uiStateJSON?JSON.parse(r.uiStateJSON):n.uiState.toJSON(),query:(null===(a=n.data.searchSource)||void 0===a?void 0:a.getOwnField("query"))||N(t),filters:(null===(i=n.data.searchSource)||void 0===i?void 0:i.getOwnField("filter"))||[],vis:{...s.visState,title:n.title},linked:r&&r.id?!!r.savedSearchId:!!s.savedSearchId}};function A(e){return`#/${e.location.pathname}${e.location.search}`}function M(e){return Boolean(e&&!e.isPersisted())}a(162);const C=Object(g.withSuspense)(g.LazySavedObjectSaveModalDashboard),V=e=>!!e.visualize&&!!e.visualize.show,L=({hasUnsavedChanges:e,setHasUnsavedChanges:t,openInspector:a,originatingApp:i,originatingPath:n,setOriginatingApp:r,hasUnappliedChanges:l,visInstance:c,stateContainer:d,visualizationIdFromUrl:g,stateTransfer:y,embeddableId:S,displayEditInLensItem:w,hideLensBadge:z,setNavigateToLens:N,showBadge:E,eventEmitter:M},{data:L,application:k,chrome:B,history:_,share:F,setActiveUrl:P,toastNotifications:R,visualizeCapabilities:q,dashboardCapabilities:U,savedObjectsTagging:D,presentationUtil:$,getKibanaVersion:H,serverless:G,...Q})=>{const{vis:J,embeddableHandler:W}=c,K=c.savedVis;async function Y(e){var a;const o=!Boolean(K.id)||e.copyOnSave;d.transitions.setVis({title:K.title}),K.savedSearchId=J.data.savedSearchId,K.searchSourceFields=null===(a=J.data.searchSource)||void 0===a?void 0:a.getSerializedFields(),K.visState=d.getState().vis,K.uiStateJSON=J.uiState.toString(),t(!1);try{const t=await Object(b.f)(K,e,{savedObjectsTagging:D,...Q});if(t)if(R.addSuccess({title:s.i18n.translate("visualizations.topNavMenu.saveVisualization.successNotificationText",{defaultMessage:"Saved ''{visTitle}''",values:{visTitle:K.title}}),"data-test-subj":"saveVisualizationSuccess"}),B.recentlyAccessed.add(Object(h.getFullPath)(t),K.title,String(t)),i&&e.returnToOrigin||e.dashboardId){if(!S){const e=`${m.VisualizeConstants.EDIT_PATH}/${encodeURIComponent(t)}`;_.replace(e),P(e)}const a=i||"dashboards";let s;e.dashboardId?s="new"===e.dashboardId?"#/create":`#/view/${e.dashboardId}`:n&&(s=n),y?y.navigateToWithEmbeddablePackage(a,{state:{type:h.VISUALIZE_EMBEDDABLE_TYPE,input:{savedObjectId:t},embeddableId:e.copyOnSave?void 0:S,searchSessionId:L.search.session.getSessionId()},path:s}):k.navigateToApp(a,{path:s})}else r&&i&&o&&(r(void 0),y.clearEditorState(m.VisualizeConstants.APP_ID)),B.docTitle.change(K.lastSavedTitle),null!=G&&G.setBreadcrumbs?G.setBreadcrumbs(O({},K.lastSavedTitle)):B.setBreadcrumbs(j({},K.lastSavedTitle)),t!==g&&_.replace({..._.location,pathname:`${m.VisualizeConstants.EDIT_PATH}/${t}`});return{id:t}}catch(e){return console.error(e),R.addDanger({title:s.i18n.translate("visualizations.topNavMenu.saveVisualization.failureNotificationText",{defaultMessage:"Error on saving ''{visTitle}''",values:{visTitle:K.title}}),text:e.message,"data-test-subj":"saveVisualizationError"}),{error:e}}}const Z=!K.id&&i?s.i18n.translate("visualizations.topNavMenu.saveVisualizationToLibraryButtonLabel",{defaultMessage:"Save to library"}):i&&K.id?s.i18n.translate("visualizations.topNavMenu.saveVisualizationAsButtonLabel",{defaultMessage:"Save as"}):s.i18n.translate("visualizations.topNavMenu.saveVisualizationButtonLabel",{defaultMessage:"Save"}),X=q.save||!i&&U.showWriteControls;return[...w?[{id:"goToLens",label:s.i18n.translate("visualizations.topNavMenu.goToLensButtonLabel",{defaultMessage:"Edit visualization in Lens"}),emphasize:!1,description:s.i18n.translate("visualizations.topNavMenu.goToLensButtonAriaLabel",{defaultMessage:"Go to Lens with your current configuration"}),className:"visNavItem__goToLens",testId:"visualizeEditInLensButton",...E&&{badge:{label:s.i18n.translate("visualizations.tonNavMenu.tryItBadgeText",{defaultMessage:"Try it"}),color:"accent"}},run:async()=>{var e,t;M&&c.vis.data.savedSearchId&&M.emit("unlinkFromSavedSearch",!1);const a=await(null===(e=(t=c.vis.type).navigateToLens)||void 0===e?void 0:e.call(t,J,L.query.timefilter.timefilter)),n=L.query.filterManager.getAppFilters(),s=L.query.queryString.getQuery(),r={...a,embeddableId:S,vizEditorOriginatingAppUrl:A(_),originatingApp:i,title:(null==c?void 0:c.panelTitle)||J.title,visTypeTitle:J.type.title,description:(null==c?void 0:c.panelDescription)||J.description,panelTimeRange:null==c?void 0:c.panelTimeRange,isEmbeddable:Boolean(i),...n&&{searchFilters:n},...s&&{searchQuery:s}};a&&(z(),N(!0),Object(I.s)().getTrigger("aggbased"===c.vis.type.group?x.d:x.f).exec(r))}}]:[],{id:"inspector",label:s.i18n.translate("visualizations.topNavMenu.openInspectorButtonLabel",{defaultMessage:"inspect"}),description:s.i18n.translate("visualizations.topNavMenu.openInspectorButtonAriaLabel",{defaultMessage:"Open Inspector for visualization"}),testId:"openInspectorButton",disableButton:()=>!W.hasInspector||!W.hasInspector(),run:a,tooltip(){if(!W.hasInspector||!W.hasInspector())return s.i18n.translate("visualizations.topNavMenu.openInspectorDisabledButtonTooltip",{defaultMessage:"This visualization doesn't support any inspectors."})}},{id:"share",label:s.i18n.translate("visualizations.topNavMenu.shareVisualizationButtonLabel",{defaultMessage:"share"}),description:s.i18n.translate("visualizations.topNavMenu.shareVisualizationButtonAriaLabel",{defaultMessage:"Share Visualization"}),testId:"shareTopNavButton",run:t=>{if(F){var a,i,n,r,o,v;const g=d.getState(),b=Object(p.parse)(_.location.search),h={visId:null==K?void 0:K.id,filters:g.filters,refreshInterval:void 0,timeRange:L.query.timefilter.timefilter.getTime(),uiState:g.uiState,query:g.query,vis:g.vis,linked:g.linked,indexPattern:null!==(a=null===(i=c.savedSearch)||void 0===i||null===(n=i.searchSource)||void 0===n||null===(r=n.getField("index"))||void 0===r?void 0:r.id)&&void 0!==a?a:b.indexPattern,savedSearchId:null!==(o=null===(v=c.savedSearch)||void 0===v?void 0:v.id)&&void 0!==o?o:b.savedSearchId};F.toggleShareContextMenu({anchorElement:t,allowEmbed:!0,allowShortUrl:Boolean(q.createShortUrl),shareableUrl:Object(f.unhashUrl)(window.location.href),objectId:null==K?void 0:K.id,objectType:"visualization",objectTypeMeta:{title:s.i18n.translate("visualizations.share.shareModal.title",{defaultMessage:"Share this visualization"})},sharingData:{title:(null==K?void 0:K.title)||s.i18n.translate("visualizations.reporting.defaultReportTitle",{defaultMessage:"Visualization [{date}]",values:{date:u()().toISOString(!0)}}),locatorParams:{id:T.a,version:H(),params:h}},isDirty:l||e,showPublicUrlSwitch:V,toasts:R})}},disableButton:!F||Boolean(!K.id&&i)},...i?[{id:"cancel",label:s.i18n.translate("visualizations.topNavMenu.cancelButtonLabel",{defaultMessage:"Cancel"}),emphasize:!1,description:s.i18n.translate("visualizations.topNavMenu.cancelButtonAriaLabel",{defaultMessage:"Return to the last app without saving changes"}),testId:"visualizeCancelAndReturnButton",tooltip(){if(l||e)return s.i18n.translate("visualizations.topNavMenu.cancelAndReturnButtonTooltip",{defaultMessage:"Discard your changes before finishing"})},run:async()=>{i&&k.navigateToApp(i,{path:n})}}]:[],...X?[{id:"save",iconType:i?void 0:"save",label:Z,emphasize:!i,description:s.i18n.translate("visualizations.topNavMenu.saveVisualizationButtonAriaLabel",{defaultMessage:"Save Visualization"}),testId:"visualizeSaveButton",disableButton:l,tooltip(){if(l)return s.i18n.translate("visualizations.topNavMenu.saveVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before saving"})},run:()=>{const e=async({newTitle:e,newCopyOnSave:t,isTitleDuplicateConfirmed:a,onTitleDuplicate:i,newDescription:s,returnToOrigin:r,dashboardId:o,addToLibrary:l})=>{const c=K.title;K.title=e,W.updateInput({title:e}),K.description=s,D&&(K.tags=n);const d={confirmOverwrite:!1,isTitleDuplicateConfirmed:a,onTitleDuplicate:i,returnToOrigin:r,dashboardId:o||void 0,copyOnSave:t};if(o&&!l){const t=`${m.VisualizeConstants.LANDING_PAGE_PATH}`;_.replace(t),P(t);const a={input:{savedVis:{...J.serialize(),title:e,description:s}},embeddableId:S,type:h.VISUALIZE_EMBEDDABLE_TYPE,searchSessionId:L.search.session.getSessionId()},i="new"===o?"#/create":`#/view/${o}`;return y.navigateToWithEmbeddablePackage("dashboards",{state:a,path:i}),{id:!0}}const u=await Y(d);return u.id&&!u.error||(K.title=c),u};let t,a,n=[];D&&(n=K.tags||[],t=Object(o.jsx)(D.ui.components.SavedObjectSaveModalTagSelector,{initialSelection:n,onTagsSelected:e=>{n=e},markOptional:!0})),a=i?Object(o.jsx)(v.SavedObjectSaveModalOrigin,{documentInfo:K||{title:""},onSave:e,options:t,getAppNameFromId:y.getAppNameFromId,objectType:s.i18n.translate("visualizations.topNavMenu.saveVisualizationObjectType",{defaultMessage:"visualization"}),onClose:()=>{},originatingApp:i,returnToOriginSwitchLabel:i&&S?s.i18n.translate("visualizations.topNavMenu.updatePanel",{defaultMessage:"Update panel on {originatingAppName}",values:{originatingAppName:y.getAppNameFromId(i)}}):void 0}):Object(o.jsx)(C,{documentInfo:{id:q.save?null==K?void 0:K.id:void 0,title:(null==K?void 0:K.title)||"",description:(null==K?void 0:K.description)||""},canSaveByReference:Boolean(q.save),onSave:e,tagOptions:t,objectType:s.i18n.translate("visualizations.topNavMenu.saveVisualizationObjectType",{defaultMessage:"visualization"}),onClose:()=>{},mustCopyOnSaveMessage:K.managed?s.i18n.translate("visualizations.topNavMenu.mustCopyOnSave",{defaultMessage:"Elastic manages this visualization. Save any changes to a new visualization."}):void 0}),Object(v.showSaveModal)(a,$.ContextProvider)}}]:[],...i?[{id:"saveAndReturn",label:s.i18n.translate("visualizations.topNavMenu.saveAndReturnVisualizationButtonLabel",{defaultMessage:"Save and return"}),emphasize:!0,iconType:"checkInCircleFilled",description:s.i18n.translate("visualizations.topNavMenu.saveAndReturnVisualizationButtonAriaLabel",{defaultMessage:"Finish editing visualization and return to the last app"}),testId:"visualizesaveAndReturnButton",disableButton:l,tooltip(){if(l)return s.i18n.translate("visualizations.topNavMenu.saveAndReturnVisualizationDisabledButtonTooltip",{defaultMessage:"Apply or Discard your changes before finishing"})},run:async()=>null!=K&&K.id?Y({confirmOverwrite:!1,returnToOrigin:!0}):(()=>{if(!i)return;const e={input:{savedVis:J.serialize()},embeddableId:S,type:h.VISUALIZE_EMBEDDABLE_TYPE,searchSessionId:L.search.session.getSessionId()};y.navigateToWithEmbeddablePackage(i,{state:e,path:n})})()}]:[]]},k=e=>{const[t,a]=Object(i.useState)();return Object(i.useEffect)((()=>{const t=e.getIsVisible$().subscribe((e=>{a(e)}));return()=>t.unsubscribe()}),[e]),t};var B=a(7);const _=(e,t,a,n,s,r)=>{const[o,l]=Object(i.useState)(!1),[c,d]=Object(i.useState)();return Object(i.useEffect)((()=>{if(n&&s){const{timefilter:{timefilter:i},filterManager:o,queryString:c,state$:u}=e.data.query,{embeddableHandler:p,savedSearch:v,vis:g}=s,f="savedVis"in s?s.savedVis:void 0,h=n.getState();d(h);const m=()=>{r?r.render({core:e,data:e.data,uiState:g.uiState,timeRange:i.getTime(),filters:o.getFilters(),query:c.getQuery(),linked:!!g.data.savedSearchId,savedSearch:v,unifiedSearch:e.unifiedSearch}):p.updateInput({timeRange:i.getTime(),filters:o.getFilters(),query:c.getQuery(),searchSessionId:e.data.search.session.getSessionId()})},y=u.subscribe({next:()=>{e.data.search.session.start(),m()},error:e.fatalErrors.add}),S=e=>{e&&f&&!f.savedSearchId&&v?(f.savedSearchId=v.id,g.data.savedSearchId=v.id,g.data.searchSource&&g.data.searchSource.setParent(v.searchSource)):!e&&f&&f.savedSearchId?(delete f.savedSearchId,delete g.data.savedSearchId):e||f||delete g.data.savedSearchId};h.uiState&&g.uiState.setSilent(h.uiState);const j=()=>{n.transitions.set("uiState",g.uiState.getChanges())};g.uiState.on("change",j);const O=e.data.search.session.getSession$().subscribe((e=>{p.getInput().searchSessionId!==e&&p.updateInput({searchSessionId:e})})),T=n.subscribe((i=>{if(d(i),!f||!f.id||e.history.location.pathname.includes(f.id)){if(Object(B.isEqual)(i.uiState,g.uiState.getChanges())||g.uiState.set(i.uiState),f&&!Object(B.isEqual)({...Object(b.a)(g.serialize()).visState,title:g.title},i.vis)){const{aggs:e,...a}=i.vis;g.setState({...a,data:{aggs:e}}),p.reload(),t.emit("updateEditor")}S(i.linked),g.data.searchSource&&(g.data.searchSource.setField("query",i.query),g.data.searchSource.setField("filter",i.filters)),m(),a(!0)}})),I=()=>l(!0);return t.on("embeddableRendered",I),m(),()=>{l(!1),t.off("embeddableRendered",I),y.unsubscribe(),g.uiState.off("change",j),T(),O.unsubscribe()}}}),[n,t,s,e,a,r]),{isEmbeddableRendered:o,currentAppState:c}};var F=a(46),P=a(39);const R=async(e,t)=>{const{data:a,createVisEmbeddableFromObject:i,savedSearch:n}=t;let s;if(e.data.savedSearchId)try{s=e.data.savedSearchId?await n.get(e.data.savedSearchId):await n.getNew()}catch(e){}const r=await i(e,{id:"",timeRange:a.query.timefilter.timefilter.getTime(),filters:a.query.filterManager.getFilters(),searchSessionId:a.search.session.getSessionId(),renderMode:"edit"});return r.getOutput$().subscribe((e=>{e.error&&!function(e){const t=e.original||e;return t instanceof F.SavedFieldNotFound||t instanceof F.SavedFieldTypeInvalidForAgg}(e.error)&&a.search.showError(e.error.original||e.error)})),{savedSearch:s,embeddableHandler:r}},q=async(e,t)=>{const{data:a,spaces:i,savedObjectsTagging:n,...s}=e,r=await Object(b.e)({search:a.search,spaces:i,savedObjectsTagging:n,...s},t);"string"!=typeof t&&(r.searchSourceFields={index:null==t?void 0:t.indexPattern});const o=Object(b.b)(r);let l=await Object(P.a)(o.type,o);if(l.type.setup)try{l=await l.type.setup(l)}catch{}const{embeddableHandler:c,savedSearch:d}=await R(l,e);return{vis:l,embeddableHandler:c,savedSearch:d,savedVis:r}},U=(e,t,a,n,r,o)=>{const[l,c]=Object(i.useState)({}),d=Object(i.useRef)(null),u=Object(i.useRef)("");return Object(i.useEffect)((()=>{var i;const{chrome:v,history:g,toastNotifications:b,stateTransferService:h,visEditorsRegistry:y,application:{navigateToApp:T},serverless:x}=e,w=async()=>{try{let l;if("/create"===g.location.pathname){const t=Object(p.parse)(g.location.search),a=Object(I.q)().all().find((({name:e})=>e===t.type));if(!a)throw new Error(s.i18n.translate("visualizations.createVisualization.noVisTypeErrorMessage",{defaultMessage:"You must provide a valid visualization type"}));const i=a.requiresSearch&&a.options.showIndexSelection,n=t.indexPattern||t.savedSearchId;if(i&&!n)throw new Error(s.i18n.translate("visualizations.createVisualization.noIndexPatternOrSavedSearchIdErrorMessage",{defaultMessage:"You must provide either an indexPattern or a savedSearchId"}));l=await q(e,t)}else l=await q(e,r);if(l.vis.type.disableEdit)throw new Error(s.i18n.translate("visualizations.editVisualization.readOnlyErrorMessage",{defaultMessage:"{visTypeTitle} visualizations are read only and can not be opened in editor",values:{visTypeTitle:l.vis.type.title}}));o&&o.timeRange&&(l.panelTimeRange=o.timeRange);const{embeddableHandler:u,savedVis:f,vis:b}=l,m=n?h.getAppNameFromId(n):void 0,w=n?()=>T(n):void 0;let z;if(f.id?(null!=x&&x.setBreadcrumbs?x.setBreadcrumbs(O({originatingAppName:m,redirectToOrigin:w},f.title)):v.setBreadcrumbs(j({originatingAppName:m,redirectToOrigin:w},f.title)),v.docTitle.change(f.title)):null!=x&&x.setBreadcrumbs?x.setBreadcrumbs(function({byValue:e,originatingAppName:t,redirectToOrigin:a}){return[{text:s.i18n.translate("visualizations.editor.createBreadcrumb",{defaultMessage:"Create"})}]}({byValue:Boolean(n),originatingAppName:m,redirectToOrigin:w})):v.setBreadcrumbs(function({byValue:e,originatingAppName:t,redirectToOrigin:a}){return[...t?[{text:t,onClick:a}]:[],...e?[]:S(),{text:s.i18n.translate("visualizations.editor.createBreadcrumb",{defaultMessage:"Create"})}]}({byValue:Boolean(n),originatingAppName:m,redirectToOrigin:w})),d.current)if(a){var i;const e=y.get(null===(i=b.type.editorConfig)||void 0===i?void 0:i.editor);e&&(z=new e(d.current,b,t,u))}else u.render(d.current);c({savedVisInstance:l,visEditorController:z})}catch(t){try{((e,t,a)=>{const{history:i,setActiveUrl:n,toastNotifications:s,http:{basePath:r},application:{navigateToApp:o}}=e,l={app:"management",path:`kibana/objects/savedVisualizations/${a}`};Object(f.redirectWhenMissing)({history:i,navigateToApp:o,toastNotifications:s,basePath:r,mapping:{visualization:m.VisualizeConstants.LANDING_PAGE_PATH,search:l,"index-pattern":l,"index-pattern-field":l},onBeforeRedirect(){n(m.VisualizeConstants.LANDING_PAGE_PATH)},theme:e.theme})(t)})(e,t,r)}catch(e){b.addWarning({title:s.i18n.translate("visualizations.createVisualization.failedToLoadErrorMessage",{defaultMessage:"Failed to load the visualization"}),text:e.message}),g.replace(m.VisualizeConstants.LANDING_PAGE_PATH)}}};void 0!==a&&(u.current?r&&u.current!==r&&(null===(i=l.savedVisInstance)||void 0===i?void 0:i.savedVis.id)!==r&&(u.current=r,c({}),w()):(u.current=r||"new",w()))}),[e,t,n,a,r,l.savedVisInstance,l.visEditorController,o]),Object(i.useEffect)((()=>()=>{var e;l.visEditorController?l.visEditorController.destroy():null!==(e=l.savedVisInstance)&&void 0!==e&&e.embeddableHandler&&l.savedVisInstance.embeddableHandler.destroy()}),[l]),{...l,visEditorRef:d}};var D=a(0),$=a(68),H=a(24),G=a(41),Q=a.n(G);const J=({ariaLabelContent:e,markdownContent:t,children:a,className:s,onRender:r,openLinksInNewTab:l=!0,defaultValue:c="",placeholder:d="",height:u="full",readOnly:p=!1,enableTooltipSupport:v=!1,validateLinks:g=!1,enableSoftLineBreaks:f=!1,...b})=>{const[h,m]=Object(i.useState)(c);Object(i.useEffect)((()=>{null==r||r()}),[r]);const y=Array();v||y.push("tooltip"),g||y.push("linkValidator"),f&&y.push("lineBreaks");const{parsingPlugins:S,processingPlugins:j,uiPlugins:O}=Object(n.getDefaultEuiMarkdownPlugins)({exclude:y});var T;return j[1][1].components.a=e=>Object(o.jsx)(n.EuiLink,Q()({},e,{target:"_blank"})),p?Object(o.jsx)(n.EuiMarkdownFormat,{textSize:"relative",color:"inherit",className:s,"aria-label":null!=e?e:"markdown component",parsingPluginList:S,processingPluginList:l?j:void 0,"data-test-subj":b["data-test-subj"],style:b.style},null!==(T=null!=a?a:t)&&void 0!==T?T:""):Object(o.jsx)(n.EuiMarkdownEditor,{className:s,"aria-label":null!=e?e:"markdown component",placeholder:d,value:h,onChange:m,height:u,uiPlugins:O,parsingPluginList:S,processingPluginList:l?j:void 0,"data-test-subj":b["data-test-subj"]})};var W=a(9);function K(e){if("table"!==e.vis.type)return e;const t=Object(B.get)(e,"vis.aggs");if(t){let a=0;const i=t.map((e=>("split"!==e.schema||(a++,1===a||(e.schema="bucket",e.params=Object(B.omit)(e.params,["row"]))),e)));if(a<=1)return e;e.vis.aggs=i}return e}const Y="_a";function Z(e){return Object(B.omitBy)(e,((e,t)=>"$"===t.charAt(0)||"_"===t.charAt(0)||Object(B.isFunction)(e)))}const X={set:e=>(t,a)=>({...e,[t]:a}),setVis:e=>t=>({...e,vis:{...e.vis,...t}}),unlinkSavedSearch:e=>({query:t,parentFilters:a=[]})=>({...e,query:t||e.query,filters:Object(B.union)(e.filters,a),linked:!1}),updateDataView:e=>t=>({...e,dataView:t}),updateVisState:e=>t=>({...e,vis:Z(t)}),updateSavedQuery:e=>t=>{const a={...e,savedQuery:t};return t||delete a.savedQuery,a}};const ee=(e,t,a)=>{const[n,r]=Object(i.useState)(!1),[l,c]=Object(i.useState)(null);return Object(i.useEffect)((()=>{if(a){const l=E(a,e),d=!("savedVis"in a),{stateContainer:u,stopStateSync:p}=function({stateDefaults:e,kbnUrlStateStorage:t,byValue:a}){return a?function(e){const t=K({...e});return{stateContainer:Object(f.createStateContainer)(t,X),stopStateSync:()=>{}}}(e):function({stateDefaults:e,kbnUrlStateStorage:t}){const a=K({...e,...t.get(Y)});t.set(Y,a,{replace:!0});const i=Object(f.createStateContainer)(a,X),{start:n,stop:s}=Object(f.syncState)({storageKey:Y,stateContainer:{...i,set:e=>{e&&i.set(e)}},stateStorage:t});return n(),{stateContainer:i,stopStateSync:s}}({stateDefaults:e,kbnUrlStateStorage:t})}({stateDefaults:l,kbnUrlStateStorage:e.kbnUrlStateStorage,byValue:d}),v=u.getState(),g=({isDirty:t})=>{t||u.transitions.updateVisState(E(a,e).vis),r(t)};t.on("dirtyStateChange",g);const{filterManager:b,queryString:h}=e.data.query;b.setAppFilters(Object(B.cloneDeep)(v.filters)),h.setQuery((n=v.query,Object(B.has)(n,"language")?n:{query:n,language:"lucene"}));const y=Object(W.connectToQueryState)(e.data.query,{set:({filters:e,query:t})=>{u.transitions.set("filters",e),u.transitions.set("query",t)},get:()=>({filters:u.getState().filters,query:u.getState().query}),state$:u.state$.pipe(Object(D.map)((e=>({filters:e.filters,query:e.query}))))},{filters:$.FilterStateStore.APP_STATE,query:!0});if(Object(B.isEqual)(v.vis,l.vis)&&Object(B.isEqual)(v.query,l.query)&&Object(B.isEqual)(v.filters,l.filters))c(u);else{var i;const{aggs:t,...n}=v.vis,r=v.query,l=v.filters,d=(null===(i=a.vis.data.searchSource)||void 0===i?void 0:i.getSerializedFields())||{};a.vis.setState({...n,data:{aggs:t,searchSource:{...d,query:r,filter:l},savedSearchId:a.vis.data.savedSearchId}}).then((()=>{c(u)})).catch((t=>{e.toastNotifications.addWarning({title:s.i18n.translate("visualizations.visualizationLoadingFailedErrorMessage",{defaultMessage:"Failed to load the visualization"}),text:Object(H.a)(Object(o.jsx)(J,{readOnly:!0},t.message),e.core)}),e.history.replace(`${m.VisualizeConstants.LANDING_PAGE_PATH}?notFound=visualization`)}))}return()=>{t.off("dirtyStateChange",g),p(),y()}}var n}),[t,a,e]),{appState:l,hasUnappliedChanges:n}},te=(e,t,a,n)=>{Object(i.useEffect)((()=>{if(a&&n&&n.savedSearch&&n.vis.data.searchSource){const{savedSearch:i}=n,{searchSource:r}=n.vis.data,o=(t=!0)=>{const o=i.searchSource,l=null==o?void 0:o.getParent(),c=null==o?void 0:o.getField("index");n.savedSearch=void 0,n.vis.data.savedSearchId=void 0,r.setField("index",c),r.setParent(l),a.transitions.unlinkSavedSearch({query:null==o?void 0:o.getField("query"),parentFilters:(null==o?void 0:o.getOwnField("filter"))||[]}),t&&e.toastNotifications.addSuccess(s.i18n.translate("visualizations.linkedToSearch.unlinkSuccessNotificationText",{defaultMessage:"Unlinked from saved search ''{searchTitle}''",values:{searchTitle:i.title}}))};return t.on("unlinkFromSavedSearch",o),()=>{t.off("unlinkFromSavedSearch",o)}}}),[a,t,n,e.toastNotifications])},ae=(e,t,a,n,s,r)=>{const[o,l]=Object(i.useState)({}),c=Object(i.useRef)(null),d=Object(i.useRef)(!1);return Object(i.useEffect)((()=>{const{chrome:a,application:{navigateToApp:i},stateTransferService:o,visEditorsRegistry:u,serverless:p}=e;(async()=>{var v;if(!n||d.current||!c.current)return;const g=await(async(e,t)=>{var a,i,n;const{data:s,spaces:r,savedObjectsTagging:o,...l}=e,c=t.savedVis,d=await Object(b.e)({search:s.search,spaces:r,savedObjectsTagging:o,...l});c.uiState&&0!==Object.keys(c.uiState).length&&(d.uiStateJSON=JSON.stringify(c.uiState));let u=await Object(P.a)(c.type,Object(B.cloneDeep)(c));if(u.type.setup)try{u=await u.type.setup(u)}catch{}const{embeddableHandler:p,savedSearch:v}=await R(u,e);return{vis:u,savedVis:d,embeddableHandler:p,savedSearch:v,panelTitle:null!==(a=null==t?void 0:t.title)&&void 0!==a?a:"",panelDescription:null!==(i=null==t?void 0:t.description)&&void 0!==i?i:"",panelTimeRange:null!==(n=null==t?void 0:t.timeRange)&&void 0!==n?n:void 0}})(e,n),{embeddableHandler:f,vis:h}=g;let m;const y=u.get(null===(v=h.type.editorConfig)||void 0===v?void 0:v.editor);y&&(m=new y(c.current,h,t,f));const S=s?o.getAppNameFromId(s):void 0,T=s?()=>i(s,{path:r}):void 0;null!=p&&p.setBreadcrumbs?p.setBreadcrumbs(O({byValue:!0,originatingAppName:S,redirectToOrigin:T})):null==a||a.setBreadcrumbs(j({byValue:!0,originatingAppName:S,redirectToOrigin:T})),d.current=!0,l({byValueVisInstance:g,visEditorController:m})})()}),[t,a,e,o.byValueVisInstance,o.visEditorController,n,s,r]),Object(i.useEffect)((()=>()=>{var e;o.visEditorController?o.visEditorController.destroy():null!==(e=o.byValueVisInstance)&&void 0!==e&&e.embeddableHandler&&o.byValueVisInstance.embeddableHandler.destroy()}),[o]),{...o,visEditorRef:c}},ie=(e,t,a,n)=>{Object(i.useEffect)((()=>{let i;if(a&&n){const s=async({dataView:a})=>{if(a&&n.vis.data.indexPattern&&a!==n.vis.data.indexPattern.id){const i=await e.dataViews.get(a);i&&(((e,t,a)=>{var i;const n=t.vis.serialize();t.vis.data.indexPattern=a,null===(i=t.vis.data.searchSource)||void 0===i||i.setField("index",a),t.vis.data.aggs=e.data.search.aggs.createAggConfigs(a,n.data.aggs),t.vis.data.savedSearchId=void 0})(e,n,i),n.embeddableHandler.reload(),t.emit("updateEditor"))}};s(a.getState()),i=a.state$.subscribe(s)}return()=>{var e;null===(e=i)||void 0===e||e.unsubscribe()}}),[a,t,e,n])}},87:function(e,t,a){"use strict";const i=a(92),n=a(93),s=a(94);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function v(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=a):i[e]=a};case"bracket":return(e,a,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],a):i[e]=[a]:i[e]=a};case"comma":case"separator":return(t,a,i)=>{const n="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);i[t]=n};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const n of e.split("&")){let[e,r]=s(t.decode?n.replace(/\+/g," "):n,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),a(l(e,t),r,i)}for(const e of Object.keys(i)){const a=i[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=p(a[e],t);else i[e]=p(a,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const a=i[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=u,t.parse=v,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],i=function(e){switch(e.arrayFormat){case"index":return t=>(a,i)=>{const n=a.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?a:null===i?[...a,[o(t,e),"[",n,"]"].join("")]:[...a,[o(t,e),"[",o(n,e),"]=",o(i,e)].join("")]};case"bracket":return t=>(a,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?a:null===i?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(i,e)].join("")];case"comma":case"separator":return t=>(a,i)=>null==i||0===i.length?a:0===a.length?[[o(t,e),"=",o(i,e)].join("")]:[[a,o(i,e)].join(e.arrayFormatSeparator)];default:return t=>(a,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?a:null===i?[...a,o(t,e)]:[...a,[o(t,e),"=",o(i,e)].join("")]}}(t),n={};for(const t of Object.keys(e))a(t)||(n[t]=e[t]);const s=Object.keys(n);return!1!==t.sort&&s.sort(t.sort),s.map((a=>{const n=e[a];return void 0===n?"":null===n?o(a,t):Array.isArray(n)?n.reduce(i(a),[]).join("&"):o(a,t)+"="+o(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,i]=s(e,"#");return Object.assign({url:a.split("?")[0]||"",query:v(u(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const i=d(e.url).split("?")[0]||"",n=t.extract(e.url),s=t.parse(n,{sort:!1}),r=Object.assign(s,e.query);let l=t.stringify(r,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,a)}`),`${i}${l}${c}`}},92:function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},93:function(e,t,a){"use strict";var i="%[a-f0-9]{2}",n=new RegExp("("+i+")|([^%]+?)","gi"),s=new RegExp("("+i+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],r(a),r(i))}function o(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(n)||[],a=1;a<t.length;a++)t=(e=r(t,a).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},a=s.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var i=o(a[0]);i!==a[0]&&(t[a[0]]=i)}a=s.exec(e)}t["%C2"]="�";for(var n=Object.keys(t),r=0;r<n.length;r++){var l=n[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},94:function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}}}]);