!function(e){function t(t){for(var n,r,a=t[0],s=t[1],o=0,u=[];o<a.length;o++)r=a[o],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);u.length;)u.shift()()}var n={},i={1:0};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=a);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.src=function(e){return r.p+"visualizations.chunk."+e+".js"}(e);var c=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",c.name="ChunkLoadError",c.type=r,c.request=a,n[1](c)}i[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var a=window.visualizations_bundle_jsonpfunction=window.visualizations_bundle_jsonpfunction||[],s=a.push.bind(a);a.push=t,a=a.slice();for(var o=0;o<a.length;o++)t(a[o]);var c=s;r(r.s=61)}([function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){e.exports=n(50)(2)},function(e,t,n){"use strict";n.d(t,"r",(function(){return r})),n.d(t,"R",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"v",(function(){return o})),n.d(t,"l",(function(){return c})),n.d(t,"G",(function(){return u})),n.d(t,"o",(function(){return d})),n.d(t,"O",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"x",(function(){return f})),n.d(t,"k",(function(){return g})),n.d(t,"F",(function(){return v})),n.d(t,"j",(function(){return b})),n.d(t,"E",(function(){return m})),n.d(t,"c",(function(){return h})),n.d(t,"w",(function(){return _})),n.d(t,"g",(function(){return O})),n.d(t,"B",(function(){return S})),n.d(t,"J",(function(){return E})),n.d(t,"q",(function(){return A})),n.d(t,"Q",(function(){return T})),n.d(t,"f",(function(){return j})),n.d(t,"A",(function(){return I})),n.d(t,"p",(function(){return P})),n.d(t,"P",(function(){return w})),n.d(t,"n",(function(){return D})),n.d(t,"M",(function(){return x})),n.d(t,"i",(function(){return C})),n.d(t,"D",(function(){return N})),n.d(t,"s",(function(){return R})),n.d(t,"S",(function(){return L})),n.d(t,"a",(function(){return M})),n.d(t,"u",(function(){return V})),n.d(t,"H",(function(){return G})),n.d(t,"y",(function(){return B})),n.d(t,"h",(function(){return U})),n.d(t,"C",(function(){return F})),n.d(t,"N",(function(){return J})),n.d(t,"I",(function(){return K})),n.d(t,"t",(function(){return q})),n.d(t,"T",(function(){return W})),n.d(t,"K",(function(){return Z})),n.d(t,"e",(function(){return X})),n.d(t,"z",(function(){return Q})),n.d(t,"m",(function(){return ee})),n.d(t,"L",(function(){return te}));var i=n(5);const[r,a]=Object(i.createGetterSetter)("UISettings"),[s,o]=Object(i.createGetterSetter)("Analytics"),[c,u]=Object(i.createGetterSetter)("I18n"),[d,l]=Object(i.createGetterSetter)("Theme"),[p,f]=Object(i.createGetterSetter)("Capabilities"),[g,v]=Object(i.createGetterSetter)("Http"),[b,m]=Object(i.createGetterSetter)("Field Formats"),[h,_]=Object(i.createGetterSetter)("Application"),[O,S]=Object(i.createGetterSetter)("Embeddable"),[y,E]=Object(i.createGetterSetter)("SavedObjects"),[A,T]=Object(i.createGetterSetter)("Types"),[j,I]=Object(i.createGetterSetter)("DocLinks"),[P,w]=Object(i.createGetterSetter)("TimeFilter"),[D,x]=Object(i.createGetterSetter)("Search"),[C,N]=Object(i.createGetterSetter)("Expressions"),[R,L]=Object(i.createGetterSetter)("UiActions"),[M,V]=Object(i.createGetterSetter)("AggConfigs"),[z,G]=Object(i.createGetterSetter)("Overlays"),[k,B]=Object(i.createGetterSetter)("Chrome"),[U,F]=Object(i.createGetterSetter)("ExecutionContext"),[H,J]=Object(i.createGetterSetter)("Spaces",!1),[$,K]=Object(i.createGetterSetter)("SavedObjectTagging",!1),[q,W]=Object(i.createGetterSetter)("UsageCollection"),[Y,Z]=Object(i.createGetterSetter)("SavedObjectsManagement"),[X,Q]=Object(i.createGetterSetter)("SavedObjectsManagement"),[ee,te]=Object(i.createGetterSetter)("SavedSearch")},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){"use strict";n.r(t),n.d(t,"SAVED_OBJECTS_LIMIT_SETTING",(function(){return r})),n.d(t,"SAVED_OBJECTS_PER_PAGE_SETTING",(function(){return a})),n.d(t,"VISUALIZE_EMBEDDABLE_TYPE",(function(){return s})),n.d(t,"STATE_STORAGE_KEY",(function(){return o})),n.d(t,"GLOBAL_STATE_STORAGE_KEY",(function(){return c})),n.d(t,"VISUALIZE_APP_NAME",(function(){return u})),n.d(t,"VisualizeConstants",(function(){return d})),n.d(t,"LegendSize",(function(){return l})),n.d(t,"LegendLayout",(function(){return p})),n.d(t,"LegendSizeToPixels",(function(){return f})),n.d(t,"DEFAULT_LEGEND_SIZE",(function(){return g})),n.d(t,"SUPPORTED_AGGREGATIONS",(function(){return v}));var i=n(18);const r="savedObjects:listingLimit",a="savedObjects:perPage",s="visualization",o="_a",c="_g",u="visualize",d={VISUALIZE_BASE_PATH:"/app/visualize",LANDING_PAGE_PATH:"/",LANDING_PAGE_PATH_WITH_TAB:"/:activeTab",WIZARD_STEP_1_PAGE_PATH:"/new",WIZARD_STEP_2_PAGE_PATH:"/new/configure",CREATE_PATH:"/create",EDIT_PATH:"/edit",EDIT_BY_VALUE_PATH:"/edit_by_value",APP_ID:"visualize"};let l=function(e){return e.AUTO="auto",e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e.EXTRA_LARGE="xlarge",e}({}),p=function(e){return e.Table="table",e.List="list",e}({});const f={[l.AUTO]:void 0,[l.SMALL]:80,[l.MEDIUM]:130,[l.LARGE]:180,[l.EXTRA_LARGE]:230},g=l.MEDIUM,v=[...Object.values(i.METRIC_TYPES),...Object.values(i.BUCKET_TYPES)]},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"i",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"g",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return l}));const i="VISUALIZE_EDITOR_TRIGGER",r={id:i,title:"Convert TSVB to Lens",description:"Triggered when user navigates from a TSVB to Lens."},a="AGG_BASED_VISUALIZATION_TRIGGER",s={id:a,title:"Convert legacy agg based visualizations to Lens",description:"Triggered when user navigates from a agg based visualization to Lens."},o="DASHBOARD_VISUALIZATION_PANEL_TRIGGER",c={id:o,title:"Convert legacy visualization panel on dashboard to Lens",description:'Triggered when user use "Edit in Lens" action on dashboard panel'},u="ACTION_CONVERT_TO_LENS",d="ACTION_CONVERT_AGG_BASED_TO_LENS",l="ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS"},function(e,t,n){"use strict";n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return _})),n.d(t,"c",(function(){return O})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return y}));var i=n(7),r=n.n(i),a=n(5),s=n(9),o=n(4),c=n(16),u=n(33),d=n(15),l=n(26),p=n(32),f=n(17);const g="visualization",v=e=>({title:"",visState:e.type?{type:e.type}:null,uiStateJSON:"{}",description:"",savedSearchId:e.savedSearchId,version:1});function b(e){return`/app/visualize#/edit/${e}`}function m(e){return`#/edit/${encodeURIComponent(e)}`}const h=e=>{const{id:t,title:n,description:i,visState:r,uiStateJSON:a,searchSourceFields:s}=e,o=s&&s.index?r.aggs||[]:r.aggs;return{id:t,title:n,type:r.type,description:i,params:r.params,uiState:JSON.parse(a||"{}"),data:{aggs:o,searchSource:s,savedSearchId:e.savedSearchId}}},_=e=>({id:e.id,title:e.title,description:e.description,visState:{title:e.title,type:e.type,aggs:e.data.aggs,params:e.params},uiStateJSON:JSON.stringify(e.uiState),searchSourceFields:e.data.searchSource,savedSearchId:e.data.savedSearchId});async function O(e,t,n,i,a){const s=e.getAliases().map((e=>{var t;return null===(t=e.appExtensions)||void 0===t?void 0:t.visualizations})).filter(Boolean),o=s.reduce(((e,t)=>t.docTypes.reduce(((n,i)=>(e[i]=t,e)),e)),{}),c=(e,...t)=>r()(s).map(e).concat(t).compact().flatten().uniq().value(),{hits:u,pagination:{total:l}}=await d.a.search({text:t?`${t}*`:void 0,limit:n,tags:{included:null==i?void 0:i.map((e=>e.id)),excluded:null==a?void 0:a.map((e=>e.id))}},{types:c("docTypes","visualization"),searchFields:c("searchFields","title^3","description")});return{total:l,hits:u.map((t=>{const n=o[t.type];return n?{...n.toListItem(t),references:t.references}:function(e,{attributes:t,id:n,references:i,updatedAt:r,managed:a}){var s,o,c,u;const d={id:n,references:i,url:m(n),updatedAt:r,managed:a,...t};let l=t.typeName;if(t.visState)try{l=JSON.parse(String(t.visState)).type}catch(e){}return l&&e.get(l)?(d.type=e.get(l),d.savedObjectType="visualization",d.icon=null===(s=d.type)||void 0===s?void 0:s.icon,d.image=null===(o=d.type)||void 0===o?void 0:o.image,d.typeTitle=null===(c=d.type)||void 0===c?void 0:c.title,d.editor={editUrl:`/edit/${n}`},d.readOnly=Boolean(null===(u=e.get(l))||void 0===u?void 0:u.disableEdit),d):(d.error="Unknown visualization type",d)}(e,t)}))}}async function S(e,t){"object"!=typeof t&&(t={id:t});const n=t.id||"",i={id:n,migrationVersion:t.migrationVersion,displayName:g,getEsType:()=>g,getDisplayName:()=>g,searchSource:t.searchSource?e.search.searchSource.createEmpty():void 0,managed:!1},o=v(t);if(!n)return Object.assign(i,o),i;const{item:c,meta:{outcome:u,aliasTargetId:l,aliasPurpose:b}}=await d.a.get(n);if(!c.id)throw new a.SavedObjectNotFound(g,n||"");const m=r.a.cloneDeep(c.attributes);m.visState&&"string"==typeof m.visState&&(m.visState=JSON.parse(m.visState)),r.a.defaults(m,o),Object.assign(i,m),i.lastSavedTitle=i.title,i.managed=Boolean(c.managed),i.sharingSavedObjectProps={aliasTargetId:l,outcome:u,aliasPurpose:b,errorJSON:"conflict"===u&&e.spaces?JSON.stringify({targetType:g,sourceId:n,targetSpace:(await e.spaces.getActiveSpace()).id}):void 0};const h=m.kibanaSavedObjectMeta;if(h&&h.searchSourceJSON)try{let n=Object(s.parseSearchSourceJSON)(h.searchSourceJSON);t.searchSource?(n=Object(s.injectSearchSourceReferences)(n,c.references),i.searchSource=await e.search.searchSource.create(n)):i.searchSourceFields=n}catch(e){throw e}return c.references&&c.references.length>0&&Object(f.e)(i,c.references),e.savedObjectsTagging&&(i.tags=e.savedObjectsTagging.ui.getTagIdsFromReferences(c.references)),i.visState=Object(p.a)(i.visState),i}async function y(e,{confirmOverwrite:t=!1,isTitleDuplicateConfirmed:n=!1,onTitleDuplicate:r,copyOnSave:a=!1},p){const g=e.id;a&&delete e.id;const v={visState:JSON.stringify(e.visState),title:e.title,uiStateJSON:e.uiStateJSON,description:e.description,savedSearchId:e.savedSearchId,version:e.version,kibanaSavedObjectMeta:{}};let b=[];if(e.searchSource){const{searchSourceJSON:t,references:n}=e.searchSource.serialize();v.kibanaSavedObjectMeta={searchSourceJSON:t},b.push(...n)}if(e.searchSourceFields){const[t,n]=Object(s.extractSearchSourceReferences)(e.searchSourceFields),i=JSON.stringify(t);v.kibanaSavedObjectMeta={searchSourceJSON:i},b.push(...n)}p.savedObjectsTagging&&(b=p.savedObjectsTagging.ui.updateTagsReferences(b,e.tags||[]));const m=Object(f.b)({attributes:v,references:b});if(!m.references)throw new Error("References not returned from extractReferences");try{await Object(l.a)(e,a,n,r,p);const s={migrationVersion:e.migrationVersion,references:m.references},f=t?await async function(e,t,n,r){try{return await d.a.create({data:e,options:n})}catch(a){if(409===Object(i.get)(a,"res.status")){const i=o.i18n.translate("visualizations.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:t.title}}),a=o.i18n.translate("visualizations.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:t.displayName}}),s=o.i18n.translate("visualizations.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return Object(u.a)(i,a,s,r).then((()=>d.a.create({data:e,options:{overwrite:!0,...n}}))).catch((()=>Promise.reject(new Error(c.a))))}return await Promise.reject(a)}}(v,e,s,p):e.id?await d.a.update({id:e.id,data:{...m.attributes},options:{overwrite:!0,references:m.references}}):await d.a.create({data:{...m.attributes},options:{overwrite:!0,references:m.references}});return e.id=f.item.id,e.lastSavedTitle=e.title,e.id}catch(t){return e.id=g,t&&[c.a,c.b].includes(t.message)?"":Promise.reject(t)}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"g",(function(){return f}));var i=n(4);const r=(e,t)=>t.length>e?e:void 0,a=(e,t)=>t.find((t=>t.id===e));function s(e,t){return"number"==typeof e?r(e,t):a(e,t)}function o(e,t){const n=s(e,t);if(void 0===n)throw new Error(i.i18n.translate("visualizations.function.findAccessorOrFail.error.accessor",{defaultMessage:"Provided column name or index is invalid: {accessor}",values:{accessor:e}}));return n}const c=(e,t)=>{if(!f(e))return e;const n=e.accessor;return"number"==typeof n?t[n].id:n.id},u=(e,t)=>{e&&"string"==typeof e&&o(e,t)};function d(e){return"string"==typeof e?e:e.accessor}function l(e,t,n){var i,r;return"string"==typeof e?(null===(i=p(e,t))||void 0===i||null===(r=i.meta)||void 0===r?void 0:r.params)||n:e.format||n}const p=(e,t=[])=>{if("string"==typeof e)return t.find((({id:t})=>e===t));const n=e.accessor;return"number"==typeof n?t[n]:t.find((({id:e})=>n.id===e))};function f(e){return"string"!=typeof e&&void 0!==e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(2);const r={get:async e=>Object(i.e)().client.get({contentTypeId:"visualization",id:e}),create:async({data:e,options:t})=>await Object(i.e)().client.create({contentTypeId:"visualization",data:e,options:t}),update:async({id:e,data:t,options:n})=>await Object(i.e)().client.update({contentTypeId:"visualization",id:e,data:t,options:n}),delete:async e=>await Object(i.e)().client.delete({contentTypeId:"visualization",id:e}),search:async(e={},t)=>{if(t&&t.types&&t.types.length>1){const{types:n}=t;return Object(i.e)().client.mSearch({contentTypes:n.map((e=>({contentTypeId:e}))),query:e})}return Object(i.e)().client.search({contentTypeId:"visualization",query:e,options:t})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n(4);const r=i.i18n.translate("visualizations.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"}),a=i.i18n.translate("visualizations.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return g}));var i=n(34);const r=e=>"input_control_vis"===e,a=(e,t,n=[],a="control")=>{var s;r(e)&&(null!==(s=null==t?void 0:t.controls)&&void 0!==s?s:[]).forEach(((e,t)=>{e.indexPattern&&(e.indexPatternRefName=`${a}_${t}_index_pattern`,n.push({name:e.indexPatternRefName,type:i.DATA_VIEW_SAVED_OBJECT_TYPE,id:e.indexPattern}),delete e.indexPattern)}))},s=(e,t,n)=>{var i;r(e)&&(null!==(i=t.controls)&&void 0!==i?i:[]).forEach((e=>{if(!e.indexPatternRefName)return;const t=n.find((t=>t.name===e.indexPatternRefName));if(!t)throw new Error(`Could not find index pattern reference "${e.indexPatternRefName}"`);e.indexPattern=t.id,delete e.indexPatternRefName}))},o="_ref_name",c=e=>"metrics"===e,u=(e,t)=>{e(t,"index_pattern"),t.series.forEach((t=>{t.override_index_pattern&&e(t,"series_index_pattern")})),t.annotations&&t.annotations.forEach((t=>{e(t,"index_pattern")}))},d=(e,t,n=[],r="metrics")=>{let a=0;c(e)&&u(((e,t)=>{if(e[t]&&e[t].id){const s=`${r}_${a++}_index_pattern`;e[t+o]=s,n.push({name:s,type:i.DATA_VIEW_SAVED_OBJECT_TYPE,id:e[t].id}),delete e[t]}}),t)},l=(e,t,n)=>{c(e)&&u(((e,t)=>{const i=t+o;if(e[i]){const r=n.find((t=>t.name===e[i]));r&&(e[t]={id:r.id}),delete e[i]}}),t)};var p=n(9);function f({attributes:e,references:t=[]}){const n={...e},i=[...t];if(n.searchSourceFields){const[e,t]=Object(p.extractSearchSourceReferences)(n.searchSourceFields);n.searchSourceFields=e,t.forEach((e=>i.push(e)))}if(n.savedSearchId&&(i.push({name:"search_0",type:"search",id:String(n.savedSearchId)}),delete n.savedSearchId,n.savedSearchRefName="search_0"),n.visState){const e=JSON.parse(String(n.visState));e.type&&e.params&&(a(e.type,e.params,i),d(e.type,e.params,i)),n.visState=JSON.stringify(e)}return{references:i,attributes:n}}function g(e,t){var n;if(e.searchSourceFields&&(e.searchSourceFields=Object(p.injectSearchSourceReferences)(e.searchSourceFields,t)),e.savedSearchRefName){const n=t.find((t=>t.name===e.savedSearchRefName));if(!n)throw new Error(`Could not find saved search reference "${e.savedSearchRefName}"`);e.savedSearchId=n.id,delete e.savedSearchRefName}const{type:i,params:r}=null!==(n=e.visState)&&void 0!==n?n:{};i&&r&&(s(i,r,t),l(i,r,t))}},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.d(t,"e",(function(){return i.prepareLogTable})),n.d(t,"a",(function(){return r.XYCurveTypes})),n.d(t,"d",(function(){return r.isFieldValid})),n.d(t,"c",(function(){return r.isCollapseFunction})),n.d(t,"b",(function(){return a.a}));var i=n(36),r=(n(37),n(35)),a=n(43);n(8)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(4),r=n(8);n.d(t,"b",(function(){return r.VISUALIZE_EMBEDDABLE_TYPE}));const a=[{id:"visualizations",getDisplayName:()=>i.i18n.translate("visualizations.common.constants.grouping.legacy",{defaultMessage:"Visualizations"}),getIconType:()=>"visGauge",order:1e3}]},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){"use strict";n.d(t,"n",(function(){return i})),n.d(t,"m",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"o",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"r",(function(){return l})),n.d(t,"s",(function(){return p})),n.d(t,"q",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"p",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return O})),n.d(t,"b",(function(){return S}));const i={FILTERS:"filters",RANGE:"range",TERMS:"terms",DATE_HISTOGRAM:"date_histogram",MIN:"min",MAX:"max",AVERAGE:"average",SUM:"sum",MEDIAN:"median",STANDARD_DEVIATION:"standard_deviation",UNIQUE_COUNT:"unique_count",PERCENTILE:"percentile",PERCENTILE_RANK:"percentile_rank",COUNT:"count",LAST_VALUE:"last_value"},r={CUMULATIVE_SUM:"cumulative_sum",COUNTER_RATE:"counter_rate",DIFFERENCES:"differences",MOVING_AVERAGE:"moving_average",FORMULA:"formula",STATIC_VALUE:"static_value",NORMALIZE_BY_UNIT:"normalize_by_unit"},a={...i,...r},s={PIE:"pie",DONUT:"donut",TREEMAP:"treemap",MOSAIC:"mosaic",WAFFLE:"waffle"},o={DEFAULT:"default",INSIDE:"inside",HIDE:"hide"},c={HIDDEN:"hidden",PERCENT:"percent",VALUE:"value"},u={DEFAULT:"default",SHOW:"show",HIDE:"hide"},d={DATA:"data",REFERENCELINE:"referenceLine",ANNOTATIONS:"annotations"},l={LINEAR:"LINEAR",CURVE_MONOTONE_X:"CURVE_MONOTONE_X",CURVE_STEP_AFTER:"CURVE_STEP_AFTER"},p={AUTO:"auto",LEFT:"left",RIGHT:"right",BOTTOM:"bottom"},f={BAR:"bar",LINE:"line",AREA:"area",BAR_STACKED:"bar_stacked",AREA_STACKED:"area_stacked",BAR_HORIZONTAL:"bar_horizontal",BAR_PERCENTAGE_STACKED:"bar_percentage_stacked",BAR_HORIZONTAL_STACKED:"bar_horizontal_stacked",AREA_PERCENTAGE_STACKED:"area_percentage_stacked",BAR_HORIZONTAL_PERCENTAGE_STACKED:"bar_horizontal_percentage_stacked"},g={NONE:"none",ABOVE:"above",BELOW:"below"},v={Range:"range",Histogram:"histogram"},b={HORIZONTAL_BULLET:"horizontalBullet",VERTICAL_BULLET:"verticalBullet",SEMI_CIRCLE:"semiCircle",ARC:"arc",CIRCLE:"circle"},m={HIDDEN:"hidden",AUTO:"auto",BANDS:"bands"},h={AUTO:"auto",CUSTOM:"custom",NONE:"none"},_={AUTO:"auto",CUSTOM:"custom",NONE:"none"},O={PALETTE:"palette",NONE:"none"},S=["sum","avg","min","max"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(3),r=n(22),a=n.n(r),s=n(49),o=n(6);const c=(e,t)=>n=>(a.a.render(Object(o.jsx)(s.a,t,e),n),()=>a.a.unmountComponentAtNode(n));n(1),n(4),i.Component},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));let i=function(e){return e.PROMOTED="promoted",e.TOOLS="tools",e.AGGBASED="aggbased",e.LEGACY="legacy",e}({})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(16),r=n(15),a=n(4),s=n(33);async function o(e,t,n,o,c){if(n)return!0;if(e.title===e.lastSavedTitle&&!t)return!0;const u=await async function(e){if(e)return(await r.a.search({limit:10,text:`"${e}"`},{searchFields:["title"]})).hits.find((t=>t.attributes.title.toLowerCase()===e.toLowerCase()))}(e.title);return!u||u.id===e.id||(o?(o(),Promise.reject(new Error(i.b))):function(e,t){const n=a.i18n.translate("visualizations.confirmModal.saveDuplicateConfirmationTitle",{defaultMessage:"This visualization already exists"}),r=a.i18n.translate("visualizations.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:'Saving "{name}" creates a duplicate title. Would you like to save anyway?',values:{name:e.title}}),o=a.i18n.translate("visualizations.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save"});try{return Object(s.a)(r,n,o,t)}catch{return Promise.reject(new Error(i.b))}}(e,c))}},function(e,t,n){"use strict";var i=n(28);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(3),r=n.n(i),a=n(10),s=n(24),o=n(2),c=n(6);const u=Object(i.lazy)((()=>n.e(3).then(n.bind(null,81))));function d({editorParams:e=[],onClose:t,originatingApp:n,outsideVisualizeApp:d,showAggsSelection:l,selectedVisType:p}={}){const f=document.createElement("div");let g,v=!1;const b=()=>{var e;v||(null==t||t(),null===(e=g)||void 0===e||e(),v=!0)},m=Object(s.a)(r.a.createElement((function(){return Object(c.jsx)(i.Suspense,{fallback:Object(c.jsx)(a.EuiPortal,null,Object(c.jsx)(a.EuiProgress,{size:"xs",position:"fixed"}))},Object(c.jsx)(u,{isOpen:!0,onClose:b,originatingApp:n,stateTransfer:Object(o.g)().getStateTransfer(),outsideVisualizeApp:d,editorParams:e,visTypesRegistry:Object(o.q)(),contentClient:Object(o.e)().client,uiSettings:Object(o.r)(),addBasePath:Object(o.k)().basePath.prepend,application:Object(o.c)(),docLinks:Object(o.f)(),showAggsSelection:l,selectedVisType:p}))})),{analytics:Object(o.b)(),i18n:Object(o.l)(),theme:Object(o.o)()});return g=m(f),()=>b()}},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(4),r=n(14);const a=()=>({name:"visdimension",help:i.i18n.translate("visualizations.function.visDimension.help",{defaultMessage:"Generates visConfig dimension object"}),type:"vis_dimension",inputTypes:["datatable"],args:{accessor:{types:["string","number"],aliases:["_"],help:i.i18n.translate("visualizations.function.visDimension.accessor.help",{defaultMessage:"Column in your dataset to use (either column index or column name)"})},format:{types:["string"],help:i.i18n.translate("visualizations.function.visDimension.format.help",{defaultMessage:"Format"})},formatParams:{types:["string"],help:i.i18n.translate("visualizations.function.visDimension.formatParams.help",{defaultMessage:"Format params"})}},fn:(e,t)=>{const n=Object(r.b)(t.accessor,e.columns),i=("number"==typeof n?e.columns[n]:n).meta.params;return{type:"vis_dimension",accessor:n,format:t.format||t.formatParams||!i?{id:t.format||"string",params:JSON.parse(t.formatParams||"{}")}:i}}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(4);const r=()=>({name:"range",help:i.i18n.translate("visualizations.function.range.help",{defaultMessage:"Generates range object"}),type:"range",args:{from:{types:["number"],help:i.i18n.translate("visualizations.function.range.from.help",{defaultMessage:"Start of range"}),required:!0},to:{types:["number"],help:i.i18n.translate("visualizations.function.range.to.help",{defaultMessage:"End of range"}),required:!0}},fn:(e,t)=>({type:"range",from:t.from,to:t.to})})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(40),r=n(7),a=n.n(r);const s=e=>{if(!e)return e;const t=a.a.cloneDeep(e);return function(e){e.aggs&&e.aggs.forEach((e=>{"terms"===e.type&&e.params&&"_term"===e.params.orderBy&&(e.params.orderBy="_key")}))}(t),function(e){"boolean"==typeof a.a.get(e,"params.showMeticsAtAllLevels")&&(e.params.showMetricsAtAllLevels=e.params.showMeticsAtAllLevels,delete e.params.showMeticsAtAllLevels)}(t),function(e){e.aggs&&e.aggs.forEach((e=>{"date_histogram"===e.type&&e.params&&"auto"!==e.params.interval&&void 0===e.params.scaleMetricValues&&(e.params.scaleMetricValues=!0)}))}(t),e.params&&["line","area","histogram"].includes(e.params.type)&&function(e){if(e.params.seriesParams)return;const t=e.params.setYExtents,n=e.params.defaultYExtents,i=["stacked","overlap"].includes(e.params.mode)?"normal":e.params.mode||"normal";e.params.valueAxes&&e.params.valueAxes.length||(e.params.valueAxes=[{id:"ValueAxis-1",name:"LeftAxis-1",type:"value",position:"left",show:!0,style:{},scale:{type:"linear",mode:"normal"},labels:{show:!0,rotate:0,filter:!1,truncate:100},title:{text:"Count"}}]),e.params.valueAxes[0].scale={...e.params.valueAxes[0].scale,type:e.params.scale||"linear",setYExtents:e.params.setYExtents||!1,defaultYExtents:e.params.defaultYExtents||!1,boundsMargin:n?e.params.boundsMargin:0,min:t?e.params.yAxis.min:void 0,max:t?e.params.yAxis.max:void 0,mode:i};const r=e.params.smoothLines?"cardinal":e.params.interpolate,a=["stacked","percentage","wiggle","silhouette"].includes(e.params.mode);e.params.seriesParams=[{show:!0,type:e.params.type||"line",mode:a?"stacked":"normal",interpolate:r,drawLinesBetweenPoints:e.params.drawLinesBetweenPoints,showCircles:e.params.showCircles,radiusRatio:e.params.radiusRatio,data:{label:"Count",id:"1"},lineWidth:2,valueAxis:"ValueAxis-1"}]}(t),e.params&&"metrics"===e.type&&function(e){e.params.series&&e.params.series.forEach((e=>{const t=e.id,n=e.metrics;isNaN(t)||(e.id=`x${t}`),null==n||n.forEach((e=>{const t=e.id;isNaN(t)||(e.id=`x${t}`)}))}))}(t),"gauge"===e.type&&e.fontSize&&(delete t.fontSize,Object(i.set)(t,"gauge.style.fontSize",e.fontSize)),["gauge","metric"].includes(e.type)&&"Metric"===a.a.get(e.params,"gauge.gaugeType",null)?(t.type="metric",t.params.addLegend=!1,t.params.type="metric",t.params.metric=t.params.gauge,delete t.params.gauge,delete t.params.metric.gaugeType,delete t.params.metric.gaugeStyle,delete t.params.metric.backStyle,delete t.params.metric.scale,delete t.params.metric.type,delete t.params.metric.orientation,delete t.params.metric.verticalSplit,delete t.params.metric.autoExtend,t.params.metric.metricColorMode=t.params.metric.gaugeColorMode,delete t.params.metric.gaugeColorMode):"metric"===e.type&&"Metric"!==a.a.get(e.params,"gauge.gaugeType","Metric")&&(t.type="gauge",t.params.type="gauge"),function(e){const t=void 0!==a.a.get(e,"params.valueAxes[0].labels.overwriteColor");if("heatmap"===e.type&&e.params&&!t){const t=a.a.get(e,"params.valueAxes[0].labels.show",!1),n=a.a.get(e,"params.valueAxes[0].labels.color","#555");Object(i.set)(e,"params.valueAxes[0].labels.overwriteColor",t&&"#555"!==n)}}(t),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n(3);var i=n(4),r=n(10),a=n(24),s=n(6);function o(e="",t="",n="",o){return new Promise(((c,u)=>{const d=i.i18n.translate("visualizations.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),l=o.overlays.openModal(Object(a.a)(Object(s.jsx)(r.EuiConfirmModal,{onCancel:()=>{l.close(),u()},onConfirm:()=>{l.close(),c(!0)},confirmButtonText:n,cancelButtonText:d,title:t},e),o))}))}},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.r(t),n.d(t,"LENS_GAUGE_ID",(function(){return i})),n.d(t,"GROUP_ID",(function(){return r})),n.d(t,"OperationsWithSourceField",(function(){return a.n})),n.d(t,"OperationsWithReferences",(function(){return a.m})),n.d(t,"Operations",(function(){return a.l})),n.d(t,"PartitionChartTypes",(function(){return a.o})),n.d(t,"CategoryDisplayTypes",(function(){return a.a})),n.d(t,"NumberDisplayTypes",(function(){return a.k})),n.d(t,"LegendDisplayTypes",(function(){return a.j})),n.d(t,"LayerTypes",(function(){return a.i})),n.d(t,"XYCurveTypes",(function(){return a.r})),n.d(t,"YAxisModes",(function(){return a.s})),n.d(t,"SeriesTypes",(function(){return a.q})),n.d(t,"FillTypes",(function(){return a.c})),n.d(t,"RANGE_MODES",(function(){return a.p})),n.d(t,"GaugeShapes",(function(){return a.g})),n.d(t,"GaugeTicksPositions",(function(){return a.h})),n.d(t,"GaugeLabelMajorModes",(function(){return a.f})),n.d(t,"GaugeCentralMajorModes",(function(){return a.d})),n.d(t,"GaugeColorModes",(function(){return a.e})),n.d(t,"CollapseFunctions",(function(){return a.b})),n.d(t,"isAnnotationsLayer",(function(){return s.c})),n.d(t,"getIndexPatternIds",(function(){return s.b})),n.d(t,"isFieldValid",(function(){return s.e})),n.d(t,"isCollapseFunction",(function(){return s.d})),n.d(t,"excludeMetaFromColumn",(function(){return s.a}));const i="lnsGauge",r={METRIC:"metric",MIN:"min",MAX:"max",GOAL:"goal"};var a=n(23),s=n(44)},function(e,t,n){"use strict";n.r(t),n.d(t,"prepareLogTable",(function(){return s})),n.d(t,"findAccessor",(function(){return o.a})),n.d(t,"findAccessorOrFail",(function(){return o.b})),n.d(t,"getAccessorByDimension",(function(){return o.d})),n.d(t,"validateAccessor",(function(){return o.h})),n.d(t,"getColumnByAccessor",(function(){return o.e})),n.d(t,"isVisDimension",(function(){return o.g})),n.d(t,"getAccessor",(function(){return o.c})),n.d(t,"getFormatByAccessor",(function(){return o.f})),n.d(t,"getStopsWithColorsFromRanges",(function(){return u}));const i=(e,t,n)=>"string"==typeof n?n===e.id:"number"==typeof n?n===t:n.id===e.id,r=e=>"string"==typeof e?e:e.accessor,a=(e,t,n)=>{for(const s of n){var a;if(null!==(a=s[0])&&void 0!==a&&a.find((n=>i(e,t,r(n)))))return s[1]}},s=(e,t,n=!1)=>({...e,columns:e.columns.map(((e,n)=>({...e,meta:{...e.meta,dimensionName:a(e,n,t)}}))).filter((e=>!n||e.meta.dimensionName))});var o=n(14),c=n(58);const u=(e,t,n=!1)=>e.reduce(((e,i,r,a)=>((r&&i.from!==a[r-1].to||0===r)&&(e.color.push("rgb(0, 0, 0, 0)"),e.stop.push(i.from)),e.color.push(((e,t,n,i=!1)=>{const r=Math.max(t-1,1),a=i?1-e/r:e/r;return Object(c.getHeatmapColors)(a,n)})(r,a.length,t,n)),e.stop.push(i.to),e)),{color:[],stop:[]})},function(e,t,n){"use strict";n.r(t);var i=n(31);n.d(t,"range",(function(){return i.a}));var r=n(30);n.d(t,"visDimension",(function(){return r.a}))},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=async(e,t={})=>{await n.e(6).then(n.t.bind(null,78,7));const{Vis:i}=await n.e(11).then(n.bind(null,82)),r=new i(e,t);return await r.setState(t),r}},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){e.exports=n(50)(4)},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,n){"use strict";function i(e){const t=e.type.name,n=["derivative","moving_avg","serial_diff","cumulative_sum","sum_bucket","avg_bucket","min_bucket","max_bucket"].includes(t)?e.params.customMetric||e.aggConfigs.getRequestAggById(e.params.metricAgg):e,i=e.makeLabel&&e.makeLabel();return{accessor:0,format:n.toSerializedFieldFormat(),params:{},label:i,aggType:t,aggId:e.id,aggParams:e.params}}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return c}));var i=n(23);const r=e=>"annotations"===e.layerType,a=e=>e.map((({indexPatternId:e})=>e)),s=(e,t,n)=>!(!t&&n.isFieldRequired||!(!t||t.aggregatable&&((e,{supportedDataTypes:t},n)=>{var i;return(null!==(i=t[e])&&void 0!==i?i:t.default).includes(n.type)})(e,n,t))),o=e=>Boolean(e&&i.b.includes(e)),c=e=>{if((e=>!!e.meta)(e)){const{meta:t,...n}=e;return n}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(59),r=n(3),a=i.__importDefault(n(63));t.default=function(e,t){var n=r.useState(t),i=n[0],s=n[1];return a.default((function(){var t=e.subscribe(s);return function(){return t.unsubscribe()}}),[e]),i}},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(19),r=n(9),a=n(11);const s={applyFilter:r.APPLY_FILTER_TRIGGER,brush:a.SELECT_RANGE_TRIGGER,filter:a.VALUE_CLICK_TRIGGER,multiFilter:a.MULTI_VALUE_CLICK_TRIGGER,tableRowContextMenuClick:i.ROW_CLICK_TRIGGER}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(18),r=n(9),a=n(20);const{isDateHistogramBucketAggConfig:s}=r.search.aggs,o=[...Object.values(i.METRIC_TYPES),...Object.values(i.BUCKET_TYPES),i.SHARD_DELAY_AGG_NAME],c=(e,t,n)=>{const i=e.type.name;if(r=i,!o.includes(r))throw new Error(`Unsupported agg type: ${i}`);var r;const c=((e,{timeRange:t,timefilter:n})=>{if(s(e)){e.params.timeRange=t;const i=e.params.timeRange&&e.fieldIsTimeField()?n.calculateBounds(e.params.timeRange):void 0;e.buckets.setBounds(i),e.buckets.setInterval(e.params.interval)}return e})(e,n);return{...Object(a.b)(c),accessor:t}},u=(e,t)=>{let n=0;const i={metric:[]};if(!e.data.aggs)return i;const r=e.data.aggs.getResponseAggs().filter((e=>e.enabled)),a=e.isHierarchical(),s=r.filter((e=>"metrics"===e.type.type));return r.forEach((o=>{let u=!1,d=o.schema;if(!d){if("geo_centroid"!==o.type.name)return void n++;d="geo_centroid"}"split"===d&&(d="split_"+(e.params.row?"row":"column"),u=r.length-s.length>1),i[d]||(i[d]=[]),a&&"metrics"===o.type.type||i[d].push(c(o,n++,t)),!a||"metrics"===o.type.type&&s.length!==r.length||s.forEach((e=>{const r=c(e,n++,t);u||i.metric.push(r)}))})),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n(41),r=n.n(i),a=n(3),s=n(55),o=n(56),c=n(45),u=n.n(c),d=n(29),l=n.n(d),p=n(10);const f="eui-global",g="eui-utilities",v={darkMode:!1};var b=n(6);const m=[p.euiStylisPrefixer],h=l()({key:"css",stylisPlugins:m,container:document.querySelector('meta[name="emotion"]')}),_=l()({key:f,stylisPlugins:m,container:document.querySelector(`meta[name="${f}"]`)}),O=l()({key:g,stylisPlugins:m,container:document.querySelector(`meta[name="${g}"]`)});h.compat=!0,_.compat=!0,O.compat=!0;const S={default:h,global:_,utility:O},y=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:i,children:r})=>{const s=u()(e,v),o=Object(a.useMemo)((()=>(e=>e.darkMode?p.COLOR_MODES_STANDARD.dark:p.COLOR_MODES_STANDARD.light)(s)),[s]),c=n||o,d=!1!==t&&void 0;return Object(b.jsx)(p.EuiProvider,{cache:S,modify:i,colorMode:c,globalStyles:d,utilityClasses:d},r)},E=({children:e,i18n:t,...n})=>Object(s.useIsNestedEuiProvider)()?(Object(o.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(b.jsx)(t.Context,null,e)):Object(b.jsx)(y,n,Object(b.jsx)(t.Context,null,e));var A=n(38);const T=({children:e,...t})=>Object(b.jsx)(E,r()({globalStyles:!1},t),Object(b.jsx)(A.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(b.jsx)(A.KibanaErrorBoundary,null,e)))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return VisualizeLocatorDefinition}));var i=n(1),r=n.n(i);const a="VISUALIZE_APP_LOCATOR";class VisualizeLocatorDefinition{constructor(){r()(this,"id",a)}async getLocation(e){const{getLocation:t}=await n.e(8).then(n.bind(null,76));return t(e)}}},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.History},function(e,t,n){n.r(t);var i=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;0!=r--;){var s=a[r];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return de})),n.d(t,"TypesService",(function(){return types_service_TypesService})),n.d(t,"apiHasVisualizeConfig",(function(){return U})),n.d(t,"VISUALIZE_EMBEDDABLE_TYPE",(function(){return x.b})),n.d(t,"VIS_EVENT_TO_TRIGGER",(function(){return V.a})),n.d(t,"COMMON_VISUALIZATION_GROUPING",(function(){return x.a})),n.d(t,"VisualizationContainer",(function(){return ae})),n.d(t,"getVisSchemas",(function(){return se.a})),n.d(t,"VisGroups",(function(){return T.a})),n.d(t,"updateOldState",(function(){return oe.a})),n.d(t,"SAVED_OBJECTS_LIMIT_SETTING",(function(){return F.SAVED_OBJECTS_LIMIT_SETTING})),n.d(t,"SAVED_OBJECTS_PER_PAGE_SETTING",(function(){return F.SAVED_OBJECTS_PER_PAGE_SETTING})),n.d(t,"LegendSize",(function(){return F.LegendSize})),n.d(t,"LegendSizeToPixels",(function(){return F.LegendSizeToPixels})),n.d(t,"DEFAULT_LEGEND_SIZE",(function(){return F.DEFAULT_LEGEND_SIZE})),n.d(t,"prepareLogTable",(function(){return ce.e})),n.d(t,"XYCurveTypes",(function(){return ce.a})),n.d(t,"urlFor",(function(){return R.g})),n.d(t,"getFullPath",(function(){return R.d})),n.d(t,"VISUALIZE_EDITOR_TRIGGER",(function(){return f.f})),n.d(t,"AGG_BASED_VISUALIZATION_TRIGGER",(function(){return f.d})),n.d(t,"DASHBOARD_VISUALIZATION_PANEL_TRIGGER",(function(){return f.e})),n.d(t,"ACTION_CONVERT_TO_LENS",(function(){return f.c})),n.d(t,"ACTION_CONVERT_AGG_BASED_TO_LENS",(function(){return f.a})),n.d(t,"ACTION_CONVERT_DASHBOARD_PANEL_TO_LENS",(function(){return f.b})),n.d(t,"convertToLensModule",(function(){return le})),n.d(t,"getDataViewByIndexPatternId",(function(){return ue}));var i=n(1),r=n.n(i),a=n(4),s=n(0),o=n(53),c=n(54),u=n(5),d=n(46),l=n(19),p=n(11),f=n(12);const g="default";var v=n(27),b=n(51);const m=()=>({name:"xydimension",help:a.i18n.translate("visualizations.function.xydimension.help",{defaultMessage:"Generates xy dimension object"}),type:"xy_dimension",args:{visDimension:{types:["vis_dimension"],help:a.i18n.translate("visualizations.function.xyDimension.visDimension.help",{defaultMessage:"Dimension object config"}),required:!0},label:{types:["string"],help:a.i18n.translate("visualizations.function.xyDimension.label.help",{defaultMessage:"Label"})},aggType:{types:["string"],help:a.i18n.translate("visualizations.function.xyDimension.aggType.help",{defaultMessage:"Aggregation type"})},params:{types:["string"],default:'"{}"',help:a.i18n.translate("visualizations.function.xyDimension.params.help",{defaultMessage:"Params"})}},fn:(e,t)=>({type:"xy_dimension",label:t.label,aggType:t.aggType,params:JSON.parse(t.params),accessor:t.visDimension.accessor,format:t.visDimension.format})});var h=n(30),_=n(31);let O=[];const S=[],y={get:()=>[...O],add:e=>{if(O.find((t=>t.name===e.name)))throw new Error(`${e.name} already registered`);S.some((t=>t===e.name))||O.push(e)},remove:e=>{O.find((t=>t.name===e))?O=O.filter((t=>t.name!==e)):S.push(e)}};var E=n(7),A=n.n(E),T=n(25),j=n(9);let I,P;I=j.AggGroupNames.Buckets,P=j.AggGroupNames.Metrics;class schemas_Schemas{constructor(e){r()(this,"all",[]),r()(this,I,[]),r()(this,P,[]),A()(e||[]).chain().map((e=>{if(!e.name)throw new Error("all schema must have a unique name");return"split"===e.name&&(e.params=[{name:"row",default:!0}]),Object(E.defaults)(e,{min:0,max:1/0,group:j.AggGroupNames.Buckets,title:e.name,aggFilter:"*",params:[]}),e})).tap((e=>{this.all=e})).groupBy("group").forOwn(((e,t)=>{this[t]=e})).commit()}}const w={showTimePicker:!0,showFilterBar:!0,showIndexSelection:!0,showQueryInput:!0,hierarchicalData:!1};class base_vis_type_BaseVisType{constructor(e){var t,n,i,a,s,o,c,u,d,l,p,f,g,v,b;if(r()(this,"name",void 0),r()(this,"title",void 0),r()(this,"order",void 0),r()(this,"description",void 0),r()(this,"note",void 0),r()(this,"getSupportedTriggers",void 0),r()(this,"navigateToLens",void 0),r()(this,"getExpressionVariables",void 0),r()(this,"icon",void 0),r()(this,"image",void 0),r()(this,"stage",void 0),r()(this,"isDeprecated",void 0),r()(this,"group",void 0),r()(this,"titleInWizard",void 0),r()(this,"options",void 0),r()(this,"visConfig",void 0),r()(this,"editorConfig",void 0),r()(this,"disableCreate",void 0),r()(this,"disableEdit",void 0),r()(this,"requiresSearch",void 0),r()(this,"suppressWarnings",void 0),r()(this,"hasPartialRows",void 0),r()(this,"hierarchicalData",void 0),r()(this,"setup",void 0),r()(this,"getUsedIndexPattern",void 0),r()(this,"inspectorAdapters",void 0),r()(this,"fetchDatatable",void 0),r()(this,"toExpressionAst",void 0),r()(this,"getInfoMessage",void 0),r()(this,"updateVisTypeOnParamsChange",void 0),r()(this,"schemas",void 0),!e.icon&&!e.image)throw new Error("vis_type must define its icon or image");this.name=e.name,this.description=null!==(t=e.description)&&void 0!==t?t:"",this.note=null!==(n=e.note)&&void 0!==n?n:"",this.getSupportedTriggers=e.getSupportedTriggers,this.navigateToLens=e.navigateToLens,this.getExpressionVariables=e.getExpressionVariables,this.title=e.title,this.icon=e.icon,this.image=e.image,this.order=null!==(i=e.order)&&void 0!==i?i:0,this.suppressWarnings=e.suppressWarnings,this.visConfig=Object(E.defaultsDeep)({},e.visConfig,{defaults:{}}),this.editorConfig=Object(E.defaultsDeep)({},e.editorConfig,{collections:{}}),this.options=Object(E.defaultsDeep)({},e.options,w),this.stage=null!==(a=e.stage)&&void 0!==a?a:"production",this.isDeprecated=null!==(s=e.isDeprecated)&&void 0!==s&&s,this.group=null!==(o=e.group)&&void 0!==o?o:T.a.AGGBASED,this.titleInWizard=null!==(c=e.titleInWizard)&&void 0!==c?c:"",this.disableCreate=null!==(u=e.disableCreate)&&void 0!==u&&u,this.disableEdit=null!==(d=e.disableEdit)&&void 0!==d&&d,this.requiresSearch=null!==(l=e.requiresSearch)&&void 0!==l&&l,this.setup=e.setup,this.hasPartialRows=null!==(p=e.hasPartialRows)&&void 0!==p&&p,this.hierarchicalData=null!==(f=e.hierarchicalData)&&void 0!==f&&f,this.getUsedIndexPattern=e.getUsedIndexPattern,this.inspectorAdapters=e.inspectorAdapters,this.fetchDatatable=null!==(g=e.fetchDatatable)&&void 0!==g&&g,this.toExpressionAst=e.toExpressionAst,this.getInfoMessage=e.getInfoMessage,this.updateVisTypeOnParamsChange=e.updateVisTypeOnParamsChange,this.schemas=new schemas_Schemas(null!==(v=null===(b=this.editorConfig)||void 0===b?void 0:b.schemas)&&void 0!==v?v:[])}}class types_service_TypesService{constructor(){r()(this,"types",{})}registerVisualization(e){if(this.types[e.name])throw new Error("type already exists!");this.types[e.name]=e}setup(){return{createBaseVisualization:e=>{const t=new base_vis_type_BaseVisType(e);this.registerVisualization(t)},registerAlias:y.add}}start(){return{get:e=>this.types[e],all:()=>[...Object.values(this.types)],getAliases:y.get,unRegisterAlias:y.remove,getByGroup:e=>Object.values(this.types).filter((t=>t.group===e))}}stop(){}}var D=n(26),x=n(21),C=n(39),N=n(2),R=n(13),L=n(17);const M=e=>async(t,i,r,a)=>{try{var s,o;const c=t.id,u=c?Object(R.g)(c):"#/edit_by_value",d=c?Object(N.k)().basePath.prepend(`/app/visualize${Object(R.g)(c)}`):"";let l=[];if(t.type.getUsedIndexPattern)try{l=await t.type.getUsedIndexPattern(t.params)}catch(e){}else t.data.indexPattern&&(l=[t.data.indexPattern]);const p={visualizeSave:Boolean(Object(N.d)().visualize.save),dashboardSave:Boolean(null===(s=Object(N.d)().dashboard)||void 0===s?void 0:s.showWriteControls),visualizeOpen:Boolean(null===(o=Object(N.d)().visualize)||void 0===o?void 0:o.show)};return(async(...e)=>{const[{VisualizeEmbeddable:t}]=await Promise.all([Promise.all([n.e(0),n.e(10)]).then(n.bind(null,214)),n.e(5).then(n.t.bind(null,208,7))]);return new t(...e)})(Object(N.p)(),{vis:t,indexPatterns:l,editPath:u,editUrl:d,deps:e,capabilities:p},i,r,a)}catch(e){return console.error(e),new p.ErrorEmbeddable(e,i,a)}};class visualize_embeddable_factory_VisualizeEmbeddableFactory{constructor(e){r()(this,"type",x.b),r()(this,"attributeService",void 0),r()(this,"savedObjectMetaData",{name:a.i18n.translate("visualizations.savedObjectName",{defaultMessage:"Visualization"}),includeFields:["visState"],type:"visualization",getIconForSavedObject:e=>{var t;return(null===(t=Object(N.q)().get(JSON.parse(e.attributes.visState).type))||void 0===t?void 0:t.icon)||"visualizeApp"},getTooltipForSavedObject:e=>{var t;return`${e.attributes.title} (${null===(t=Object(N.q)().get(JSON.parse(e.attributes.visState).type))||void 0===t?void 0:t.title})`},showSavedObject:e=>{try{const t=JSON.parse(e.attributes.visState).type,n=Object(N.q)().get(t);return Boolean(n)}catch{return!1}},getSavedObjectSubType:e=>JSON.parse(e.attributes.visState).type}),this.deps=e}async isEditable(){return Object(N.d)().visualize.save}getDisplayName(){return a.i18n.translate("visualizations.displayName",{defaultMessage:"visualization"})}async getCurrentAppId(){return this.deps.start().core.application.currentAppId$.pipe(Object(s.first)()).toPromise()}async getAttributeService(){return this.attributeService||(this.attributeService=this.deps.start().plugins.embeddable.getAttributeService(this.type,{saveMethod:this.saveMethod.bind(this),checkForDuplicateTitle:this.checkTitle.bind(this)})),this.attributeService}async createFromSavedObject(e,t,n){const i=this.deps.start();try{var r,s;const c=await Object(R.e)({search:i.plugins.data.search,dataViews:i.plugins.data.dataViews,spaces:i.plugins.spaces,savedObjectsTagging:null===(r=i.plugins.savedObjectsTaggingOss)||void 0===r?void 0:r.getTaggingApi(),...i.core},e);var o;if("conflict"===(null===(s=c.sharingSavedObjectProps)||void 0===s?void 0:s.outcome))return new p.ErrorEmbeddable(a.i18n.translate("visualizations.embeddable.legacyURLConflict.errorMessage",{defaultMessage:"This visualization has the same URL as a legacy alias. Disable the alias to resolve this error : {json}",values:{json:null===(o=c.sharingSavedObjectProps)||void 0===o?void 0:o.errorJSON}}),t,n);const u=Object(R.b)(c),d=await Object(C.a)(c.visState.type,u);return M(this.deps)(d,t,await this.getAttributeService(),n)}catch(e){return console.error(e),new p.ErrorEmbeddable(e,t,n)}}async create(e,t){if(e.savedVis){const n=e.savedVis,i=await Object(C.a)(n.type,n);return M(this.deps)(i,e,await this.getAttributeService(),t)}Object(v.a)({originatingApp:await this.getCurrentAppId(),outsideVisualizeApp:!0})}async saveMethod(e){try{var t,n;const{title:i,savedVis:r}=e,s=e.vis;if(!r)throw new Error("No Saved Vis");const o={confirmOverwrite:!1,returnToOrigin:!0,isTitleDuplicateConfirmed:!0,copyOnSave:!1};r.title=i,r.description="",r.searchSourceFields=null==s||null===(t=s.data.searchSource)||void 0===t?void 0:t.getSerializedFields(),r.savedSearchId=null==s?void 0:s.data.savedSearchId;const c=s.serialize(),{params:u,data:d}=c;r.visState={title:i,type:c.type,params:u,aggs:d.aggs},s&&(r.uiStateJSON=null==s?void 0:s.uiState.toString());const{core:l,plugins:p}=this.deps.start(),f=await Object(R.f)(r,o,{savedObjectsTagging:null===(n=p.savedObjectsTaggingOss)||void 0===n?void 0:n.getTaggingApi(),...l});if(!f||""===f)throw new Error(a.i18n.translate("visualizations.savingVisualizationFailed.errorMsg",{defaultMessage:"Saving a visualization failed"}));return l.chrome.recentlyAccessed.add(Object(R.d)(f),r.title,String(f)),{id:f}}catch(e){throw e}}async checkTitle(e){const{core:t}=this.deps.start();return Object(D.a)({title:e.newTitle,lastSavedTitle:"",getEsType:()=>this.type},!1,e.isTitleDuplicateConfirmed,e.onTitleDuplicate,t)}inject(e,t){var n,i;let r=e;const{type:a,params:s}=null!==(n=r.savedVis)&&void 0!==n?n:{};if(a&&s&&(Object(L.d)(a,s,t),Object(L.f)(a,s,t)),null!==(i=r.savedVis)&&void 0!==i&&i.data.searchSource){var o,c;let e=null===(o=r.savedVis)||void 0===o?void 0:o.data.searchSource;"indexRefName"in r.savedVis.data.searchSource||(e=Object(j.extractSearchSourceReferences)(e)[0]);const n=Object(j.injectSearchSourceReferences)(e,t);r={...r,savedVis:{...r.savedVis,data:{...r.savedVis.data,searchSource:n,savedSearchId:null===(c=t.find((e=>"search_0"===e.name)))||void 0===c?void 0:c.id}}}}return r}extract(e){var t,n,i;let r=e;const a=[];if(null!==(t=r.savedVis)&&void 0!==t&&t.data.savedSearchId&&a.push({name:"search_0",type:"search",id:String(r.savedVis.data.savedSearchId)}),null!==(n=r.savedVis)&&void 0!==n&&n.data.searchSource){const[e,t]=Object(j.extractSearchSourceReferences)(r.savedVis.data.searchSource);a.push(...t),r={...r,savedVis:{...r.savedVis,data:{...r.savedVis.data,searchSource:e,savedSearchId:void 0}}}}const{type:s,params:o}=null!==(i=r.savedVis)&&void 0!==i?i:{};return s&&o&&(Object(L.a)(s,o,a,`control_${r.id}`),Object(L.c)(s,o,a,`metrics_${r.id}`)),{state:r,references:a}}}var V=n(47),z=n(3);const G=e=>Boolean(e&&void 0!==(null==e?void 0:e.parentApi)),k=e=>Boolean(e&&void 0!==(null==e?void 0:e.viewMode));n(57);const B=(e,t)=>Boolean(e&&e.type)&&e.type===t,U=e=>Boolean(e&&B(e,"visualization")&&"function"==typeof e.getVis);var F=n(8),H=n(10),J=n(52),$=n(6);const K="ACTION_EDIT_IN_LENS",q=a.i18n.translate("visualizations.actions.editInLens.displayName",{defaultMessage:"Convert to Lens"}),W=()=>Object($.jsx)(H.EuiFlexGroup,{alignItems:"center"},Object($.jsx)(H.EuiFlexItem,null,q),Object($.jsx)(H.EuiFlexItem,{grow:!1},Object($.jsx)(H.EuiBadge,{color:"accent"},a.i18n.translate("visualizations.tonNavMenu.tryItBadgeText",{defaultMessage:"Try it"})))),Y=e=>{return t=e,Boolean(t&&void 0!==(null==t?void 0:t.uuid))&&(e=>k(e)||G(e)&&k(e.parentApi))(e)&&U(e);var t};class edit_in_lens_action_EditInLensAction{constructor(e){r()(this,"id",K),r()(this,"type",K),r()(this,"order",49),r()(this,"showNotification",!0),r()(this,"currentAppId",void 0),r()(this,"MenuItem",W),this.timefilter=e}async execute(e){var t,n,i,r,a,o,c,u,d,l;const p=Object(N.c)();null!=p&&p.currentAppId$&&(p.currentAppId$.pipe(Object(s.take)(1)).subscribe((e=>this.currentAppId=e)),p.currentAppId$.subscribe((()=>{Object(N.g)().getStateTransfer().isTransferInProgress=!1})));const{embeddable:g}=e;if(!Y(g))return;const v=g.getVis(),b=await(null===(t=(n=v.type).navigateToLens)||void 0===t?void 0:t.call(n,v,this.timefilter)),m=null===(i=v.data.searchSource)||void 0===i?void 0:i.getField("filter"),h=null===(r=v.data.searchSource)||void 0===r?void 0:r.getField("query"),_=null===(a=v.data.searchSource)||void 0===a?void 0:a.getParent(),O=null!==(o=null==_?void 0:_.getField("filter"))&&void 0!==o?o:m,S=null!==(c=null==_?void 0:_.getField("query"))&&void 0!==c?c:h,y=v.title||(null===(u=g.panelTitle)||void 0===u?void 0:u.getValue()),E=null===(d=g.timeRange$)||void 0===d?void 0:d.getValue(),A={...b,title:y,visTypeTitle:v.type.title,embeddableId:g.uuid,originatingApp:this.currentAppId,searchFilters:O,searchQuery:S,isEmbeddable:!0,description:v.description||(null===(l=g.panelDescription)||void 0===l?void 0:l.getValue()),panelTimeRange:E};b&&(this.currentAppId&&Object(N.t)().reportUiCounter(this.currentAppId,J.METRIC_TYPE.CLICK,K),Object(N.g)().getStateTransfer().isTransferInProgress=!0,Object(N.s)().getTrigger(f.e).exec(A))}getDisplayName(){return q}getIconType(){return"merge"}async isCompatible(e){var t,n,i;const{embeddable:r}=e;if(!Y(r)||(k(a=r)?a.viewMode.getValue():G(a)&&k(a.parentApi)?a.parentApi.viewMode.getValue():void 0)!==p.ViewMode.EDIT)return!1;var a;const s=r.getVis(),{visualize:o}=Object(N.d)();return!(!s||!o.show)&&(!(!(e=>{const t=e;return Boolean(e&&B(e,"visualization")&&t.getExpressionVariables&&"function"==typeof t.getExpressionVariables&&t.getExpressionVariables$&&"function"==typeof t.getExpressionVariables$)})(r)||null===(t=r.getExpressionVariables())||void 0===t||!t.canNavigateToLens)||Boolean(await(null===(n=(i=s.type).navigateToLens)||void 0===n?void 0:n.call(i,s,this.timefilter))))}}const Z="visualization";var X=n(28);const Q="ADD_AGG_VIS",ee=e=>{return(e=>Boolean(e&&e.type))(e)&&(e=>"function"==typeof(null==e?void 0:e.addNewPanel))(e)&&void 0!==(t=e).getAppContext&&"function"==typeof t.getAppContext;var t};class add_agg_vis_action_AddAggVisualizationPanelAction{constructor(){r()(this,"type",Q),r()(this,"id",Q),r()(this,"grouping",[p.COMMON_EMBEDDABLE_GROUPING.legacy]),r()(this,"order",20)}getIconType(){return"visualizeApp"}getDisplayName(){return a.i18n.translate("visualizations.uiAction.addAggVis.displayName",{defaultMessage:"Aggregation based"})}async isCompatible({embeddable:e}){return ee(e)}async execute({embeddable:e}){if(!ee(e))throw new l.IncompatibleActionError;Object(X.a)({originatingApp:e.getAppContext().currentAppId,outsideVisualizeApp:!0,showAggsSelection:!0})}}class plugin_VisualizationsPlugin{constructor(e){r()(this,"types",new types_service_TypesService),r()(this,"appStateUpdater",new s.BehaviorSubject((()=>({})))),r()(this,"stopUrlTracking",void 0),r()(this,"currentHistory",void 0),r()(this,"isLinkedToOriginatingApp",void 0),this.initializerContext=e}setup(e,{expressions:t,embeddable:i,data:r,home:v,urlForwarding:O,share:S,uiActions:y,contentManagement:E}){const{appMounted:A,appUnMounted:T,stop:j,setActiveUrl:I,restorePreviousUrl:P}=Object(u.createKbnUrlTracker)({baseUrl:e.http.basePath.prepend(F.VisualizeConstants.VISUALIZE_BASE_PATH),defaultSubUrl:"#/",storageKey:`lastUrl:${e.http.basePath.get()}:visualize`,navLinkUpdater$:this.appStateUpdater,toastNotifications:e.notifications.toasts,stateParams:[{kbnUrlKey:"_g",stateUpdate$:r.query.state$.pipe(Object(s.filter)((({changes:e})=>!!(e.globalFilters||e.time||e.refreshInterval))),Object(s.map)((({state:e})=>({...e,filters:r.query.filterManager.getGlobalFilters()}))))}],getHistory:()=>this.currentHistory,onBeforeNavLinkSaved:t=>{var n;if(null!==(n=this.isLinkedToOriginatingApp)&&void 0!==n&&n.call(this))return e.http.basePath.prepend(F.VisualizeConstants.VISUALIZE_BASE_PATH);const i=["s","title","sort","sortdir"];return Object(d.replaceUrlHashQuery)(t,(e=>(i.forEach((t=>{delete e[t]})),e)))}});this.stopUrlTracking=()=>{j()};const w=Object(u.createStartServicesGetter)(e.getStartServices),D=new Set,C=(()=>{const e=new Map;return{registerDefault:t=>{e.set(g,t)},register:(t,n)=>{t&&e.set(t,n)},get:t=>e.get(t||g)}})();e.application.register({id:F.VisualizeConstants.APP_ID,title:"Visualize Library",order:8e3,euiIconType:"logoKibana",defaultPath:"#/",category:c.DEFAULT_APP_CATEGORIES.kibana,updater$:this.appStateUpdater.asObservable(),mount:async t=>{var i;const[a,s]=await e.getStartServices();this.currentHistory=t.history,this.isLinkedToOriginatingApp=()=>{var e;return Boolean(null===(e=s.embeddable.getStateTransfer().getIncomingEditorState(F.VisualizeConstants.APP_ID))||void 0===e?void 0:e.originatingApp)},s.dataViews.clearCache(),A();const c=t.history.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))})),d=Object(o.createHashHistory)(),l={...a,history:d,kbnUrlStateStorage:Object(u.createKbnUrlStateStorage)({history:d,useHash:a.uiSettings.get("state:storeInSessionStorage"),...Object(u.withNotifyOnErrors)(a.notifications.toasts)}),urlForwarding:s.urlForwarding,pluginInitializerContext:this.initializerContext,chrome:a.chrome,data:s.data,core:a,dataViewEditor:s.dataViewEditor,dataViews:s.dataViews,localStorage:new u.Storage(localStorage),navigation:s.navigation,share:s.share,toastNotifications:a.notifications.toasts,visualizeCapabilities:a.application.capabilities.visualize,dashboardCapabilities:a.application.capabilities.dashboard,embeddable:s.embeddable,stateTransferService:s.embeddable.getStateTransfer(),setActiveUrl:I,createVisEmbeddableFromObject:M({start:w}),scopedHistory:t.history,restorePreviousUrl:P,setHeaderActionMenu:t.setHeaderActionMenu,savedObjectsTagging:null===(i=s.savedObjectsTaggingOss)||void 0===i?void 0:i.getTaggingApi(),savedSearch:s.savedSearch,presentationUtil:s.presentationUtil,getKibanaVersion:()=>this.initializerContext.env.packageInfo.version,spaces:s.spaces,visEditorsRegistry:C,listingViewRegistry:D,unifiedSearch:s.unifiedSearch,serverless:s.serverless,noDataPage:s.noDataPage,contentManagement:s.contentManagement};t.element.classList.add("visAppWrapper");const{renderApp:p}=await Promise.all([n.e(0),n.e(2)]).then(n.bind(null,211));s.screenshotMode.isScreenshotMode()&&(t.element.classList.add("visEditorScreenshotModeActive"),await n.e(7).then(n.t.bind(null,207,7)));const f=p(t,l);return()=>{r.search.session.clear(),t.element.classList.remove("visAppWrapper"),c(),f(),T()}}}),O.forwardApp("visualize","visualize"),v&&v.featureCatalogue.register({id:"visualize",title:"Visualize Library",description:a.i18n.translate("visualizations.visualizeDescription",{defaultMessage:"Create visualizations and aggregate data stores in your Elasticsearch indices."}),icon:"visualizeApp",path:`/app/visualize#${F.VisualizeConstants.LANDING_PAGE_PATH}`,showOnHomePage:!1,category:"data"}),S&&S.url.locators.create(new b.b),Object(N.R)(e.uiSettings),Object(N.v)(e.analytics),Object(N.O)(e.theme),t.registerFunction(_.a),t.registerFunction(h.a),t.registerFunction(m),y.registerTrigger(f.g),y.registerTrigger(f.i),y.registerTrigger(f.h);const R=new edit_in_lens_action_EditInLensAction(r.query.timefilter.timefilter);y.addTriggerAction(p.CONTEXT_MENU_TRIGGER,R);const L=new add_agg_vis_action_AddAggVisualizationPanelAction;y.addTriggerAction(l.ADD_PANEL_TRIGGER,L);const V=new visualize_embeddable_factory_VisualizeEmbeddableFactory({start:w});return i.registerEmbeddableFactory(x.b,V),E.registry.register({id:Z,version:{latest:1},name:"Visualize Library"}),i.registerSavedObjectToPanelMethod(Z,(e=>{const t=e.attributes.visState;if(!e.managed||!t)return{savedObjectId:e.id};const n=JSON.parse(t);return n.data||(n.data={searchSource:{},aggs:[]}),{savedVis:n}})),{...this.types.setup(),visEditorsRegistry:C,listingViewRegistry:D}}start(e,{data:t,expressions:n,uiActions:i,embeddable:r,savedObjects:a,spaces:s,savedObjectsTaggingOss:o,fieldFormats:c,usageCollection:u,savedObjectsManagement:d,contentManagement:l,savedSearch:p}){const f=this.types.start();return Object(N.Q)(f),Object(N.G)(e.i18n),Object(N.B)(r),Object(N.w)(e.application),Object(N.x)(e.application.capabilities),Object(N.F)(e.http),Object(N.J)(e.savedObjects),Object(N.A)(e.docLinks),Object(N.M)(t.search),Object(N.D)(n),Object(N.S)(i),Object(N.P)(t.query.timefilter.timefilter),Object(N.u)(t.search.aggs),Object(N.H)(e.overlays),Object(N.C)(e.executionContext),Object(N.y)(e.chrome),Object(N.E)(c),Object(N.T)(u),Object(N.K)(d),Object(N.z)(l),Object(N.L)(p),s&&Object(N.N)(s),o&&Object(N.I)(o),{...f,showNewVisModal:v.a}}stop(){this.types.stop(),this.stopUrlTracking&&this.stopUrlTracking()}}var te=n(42),ne=n.n(te);const ie=Object(z.lazy)((()=>n.e(15).then(n.bind(null,209)))),re=Object(z.lazy)((()=>n.e(14).then(n.bind(null,108)))),ae=({"data-test-subj":e="",className:t,children:n,handlers:i,showNoResult:r=!1,error:a,renderComplete:s})=>{const o=ne()("visualization",t),c=Object($.jsx)("div",{className:"visChart__spinner"},Object($.jsx)(H.EuiLoadingChart,{mono:!0,size:"l"}));return Object($.jsx)("div",{"data-test-subj":e,className:o},Object($.jsx)(z.Suspense,{fallback:c},a?Object($.jsx)(re,{onInit:()=>i.done(),error:a}):r?Object($.jsx)(ie,{onInit:()=>s?s():i.done()}):n))};var se=n(48),oe=n(32),ce=n(20);const ue=async(e,t)=>{try{return e?await t.get(e):await t.getDefault()}catch(e){return null}};function de(e){return new plugin_VisualizationsPlugin(e)}const le=n.e(4).then(n.bind(null,212))},function(e,t,n){n(62),__kbnBundles__.define("plugin/visualizations/public",n,60),__kbnBundles__.define("plugin/visualizations/common/constants",n,8),__kbnBundles__.define("plugin/visualizations/common/utils",n,36),__kbnBundles__.define("plugin/visualizations/common/expression_functions",n,37),__kbnBundles__.define("plugin/visualizations/common/convert_to_lens",n,35)},function(e,t,n){n.p=window.__kbnPublicPath__.visualizations},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=r},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t){e.exports=__kbnSharedDeps__.Uuid},function(e,t){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,t){e.exports=__kbnSharedDeps__.ReactQuery},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/dataViews/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/presentationUtil/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/savedObjectsFinder/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},,function(e,t){e.exports=__kbnSharedDeps__.KbnRison},,function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))},function(e,t,n){n.r(t);var i=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(i))}]);