/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[1],Array(116).concat([function(e,t,n){"use strict";n.d(t,"k",(function(){return i.Ib})),n.d(t,"V",(function(){return i.Xc})),n.d(t,"N",(function(){return i.Kc})),n.d(t,"R",(function(){return i.Nc})),n.d(t,"bb",(function(){return i.dd})),n.d(t,"n",(function(){return i.Lb})),n.d(t,"r",(function(){return i.Xb})),n.d(t,"m",(function(){return i.Jb})),n.d(t,"C",(function(){return i.tc})),n.d(t,"B",(function(){return i.sc})),n.d(t,"y",(function(){return i.pc})),n.d(t,"x",(function(){return i.oc})),n.d(t,"ab",(function(){return i.cd})),n.d(t,"Z",(function(){return i.bd})),n.d(t,"s",(function(){return i.Yb})),n.d(t,"t",(function(){return i.Zb})),n.d(t,"G",(function(){return i.zc})),n.d(t,"u",(function(){return i.ac})),n.d(t,"F",(function(){return i.xc})),n.d(t,"z",(function(){return i.rc})),n.d(t,"D",(function(){return i.uc})),n.d(t,"E",(function(){return i.vc})),n.d(t,"v",(function(){return i.gc})),n.d(t,"i",(function(){return i.L})),n.d(t,"Y",(function(){return i.ad})),n.d(t,"I",(function(){return i.Dc})),n.d(t,"h",(function(){return i.H})),n.d(t,"w",(function(){return i.jc})),n.d(t,"H",(function(){return i.Bc})),n.d(t,"T",(function(){return i.Sc})),n.d(t,"S",(function(){return i.Qc})),n.d(t,"p",(function(){return i.Ub})),n.d(t,"f",(function(){return i.h})),n.d(t,"W",(function(){return i.Zc})),n.d(t,"b",(function(){return i.a})),n.d(t,"M",(function(){return i.Gc})),n.d(t,"c",(function(){return i.d})),n.d(t,"q",(function(){return i.Vb})),n.d(t,"L",(function(){return i.Fc})),n.d(t,"Q",(function(){return i.Lc})),n.d(t,"l",(function(){return c})),n.d(t,"O",(function(){return d.a})),n.d(t,"g",(function(){return f})),n.d(t,"P",(function(){return m})),n.d(t,"e",(function(){return S})),n.d(t,"J",(function(){return k})),n.d(t,"U",(function(){return M})),n.d(t,"A",(function(){return _})),n.d(t,"X",(function(){return A})),n.d(t,"a",(function(){return F})),n.d(t,"j",(function(){return D})),n.d(t,"d",(function(){return I})),n.d(t,"K",(function(){return P})),n.d(t,"o",(function(){return B}));var i=n(15),a=n(1),r=n.n(a),s=n(4),o=n(137);const l={href:o.j.integrations()[1],text:s.i18n.translate("xpack.fleet.breadcrumbs.integrationsAppTitle",{defaultMessage:"Integrations"}),deepLinkId:"integrations"},u={integrations:()=>[l],integrations_all:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.allIntegrationsPageTitle",{defaultMessage:"Browse integrations"})}],integrations_installed:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.installedIntegrationsPageTitle",{defaultMessage:"Installed integrations"})}],integration_create:()=>[l,{text:s.i18n.translate("xpack.fleet.breadcrumbs.createIntegrationPageTitle",{defaultMessage:"Create integration"})}],integration_details_overview:({pkgTitle:e})=>[l,{text:e}],integration_policy_edit:({pkgTitle:e,pkgkey:t,policyName:n})=>[l,{href:o.j.integration_details_policies({pkgkey:t})[1],text:e},{text:n}],integration_policy_upgrade:({pkgTitle:e,pkgkey:t,policyName:n})=>[l,{href:o.j.integration_details_policies({pkgkey:t})[1],text:e},{text:n},{text:s.i18n.translate("xpack.fleet.breadcrumbs.upgradePackagePolicyPageTitle",{defaultMessage:"Upgrade integration "})}]};function c(e,t={}){var n;const{chrome:r,http:s,application:l}=Object(i.Xc)(),c=Object(a.useRef)();if(c.current===e)return;c.current=e;const d=(null===(n=u[e])||void 0===n?void 0:n.call(u,t).map((e=>{const t=e.href?s.basePath.prepend(`${o.b}${e.href}`):void 0;return{...e,href:t,onClick:t?e=>{e.preventDefault(),l.navigateToUrl(t)}:void 0}})))||[],h=[...d].reverse().map((e=>e.text));r.docTitle.change(h),r.setBreadcrumbs(d)}var d=n(71),h=n(444);const f="id",p=["name","title","description"];function m(e,t){const n=Object(a.useRef)(new h.Search(f));if(t)return n;const i=new h.Search(f);return i.indexStrategy=new h.PrefixIndexStrategy,p.forEach((e=>i.addIndex(e))),i.addDocuments(e),n.current=i,n}var g=n(457),b=n.n(g),y=n(22),v=n(12),E=n(62),w=n(42),x=n(142);const[S,k,M,_,A]=b()((function({startServices:e}){const t=Object(y.useHistory)(),{getPath:n}=Object(i.Kc)(),[o,l]=Object(a.useState)({}),u=B(),c=Object(a.useCallback)((({name:e,status:t,version:n})=>{const i={status:t,version:n};l((t=>({...t,[e]:i})))}),[]),{notifications:d}=e,h=Object(a.useCallback)((e=>o[e]),[o]),f=Object(a.useCallback)((async t=>{const{name:n,version:a,title:o,isReinstall:l=!1,isUpgrade:p=!1,force:m=!1}=t,g=h(n),b={...g,name:n,status:l?w.b.reinstalling:w.b.installing};c(b);try{const t=await Object(i.X)(n,a,l||m);if(t.error)throw t.error;c({name:n,status:w.b.installed,version:a}),l?d.toasts.addSuccess({title:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageReinstallSuccessTitle",defaultMessage:"Reinstalled {title}",values:{title:o}}),e),text:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageReinstallSuccessDescription",defaultMessage:"Successfully reinstalled {title}",values:{title:o}}),e)}):p?d.toasts.addSuccess({title:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageUpgradeSuccessTitle",defaultMessage:"Upgraded {title}",values:{title:o}}),e),text:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageUpgradeSuccessDescription",defaultMessage:"Successfully upgraded {title}",values:{title:o}}),e)}):d.toasts.addSuccess({title:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessTitle",defaultMessage:"Installed {title}",values:{title:o}}),e),text:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageInstallSuccessDescription",defaultMessage:"Successfully installed {title}",values:{title:o}}),e)})}catch(e){return Object(x.f)(e)?(async(e,t)=>await u(e)?f({...e,force:!0}):(c({...t,name:e.name}),!1))(t,g):(c(p?{...g,name:n}:{name:n,status:w.b.notInstalled,version:a}),d.toasts.addError(e,{title:s.i18n.translate("xpack.fleet.integrations.packageInstallErrorTitle",{defaultMessage:"Failed to install {title} package",values:{title:o}}),toastMessage:s.i18n.translate("xpack.fleet.integrations.packageInstallErrorDescription",{defaultMessage:"Something went wrong while trying to install this package. Please try again later."})}),!1)}return!0}),[h,c,e,n,t]),p=Object(a.useCallback)((async({name:a,version:s,title:o,redirectToVersion:l})=>{if(c({name:a,status:w.b.uninstalling,version:s}),(await Object(i.vb)(a,s)).error)c({name:a,status:w.b.installed,version:s}),d.toasts.addWarning({title:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorTitle",defaultMessage:"Failed to uninstall {title} package",values:{title:o}}),e),text:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallErrorDescription",defaultMessage:"Something went wrong while trying to uninstall this package. Please try again later."}),e),iconType:"error"});else if(c({name:a,status:w.b.notInstalled,version:null}),d.toasts.addSuccess({title:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessTitle",defaultMessage:"Uninstalled {title}",values:{title:o}}),e),text:Object(E.a)(r.a.createElement(v.FormattedMessage,{id:"xpack.fleet.integrations.packageUninstallSuccessDescription",defaultMessage:"Successfully uninstalled {title}",values:{title:o}}),e)}),l!==s){const e=n("integration_details_settings",{pkgkey:`${a}-${l}`});t.push(e)}}),[d.toasts,c,n,t,e]);return{packages:o,installPackage:f,setPackageInstallStatus:c,getPackageInstallStatus:h,uninstallPackage:p}}),(e=>e.installPackage),(e=>e.setPackageInstallStatus),(e=>e.getPackageInstallStatus),(e=>e.uninstallPackage)),C=Object(a.createContext)({getId:()=>{}}),F=({children:e})=>{const t=Object(i.Ec)(),n=Object(a.useRef)(null==t?void 0:t.forAgentPolicyId),s=Object(a.useCallback)((()=>n.current),[]);return r.a.createElement(C.Provider,{value:{getId:s}},e)},D=()=>{const e=Object(a.useContext)(C);if(!e)throw new Error("useAgentPolicyContext can only be used inside of AgentPolicyContextProvider");return e},T=Object(a.createContext)({getFromIntegrations:()=>{}}),I=({children:e})=>{const t=Object(i.Ec)(),n=Object(a.useRef)(null==t?void 0:t.fromIntegrations),s=Object(a.useCallback)((()=>n.current),[]);return r.a.createElement(T.Provider,{value:{getFromIntegrations:s}},e)},P=()=>{const e=Object(a.useContext)(T);if(!e)throw new Error("useIntegrationsStateContext can only be used inside of IntegrationsStateContextProvider");return e};var O=n(17),j=n(134);const B=()=>{const e=Object(O.sc)();return Object(a.useCallback)((t=>(({pkg:e,core:t})=>new Promise((n=>{const i=t.overlays.openModal(Object(E.a)(r.a.createElement(j.d,{pkg:e,onConfirm:()=>{i.close(),n(!0)},onCancel:()=>{i.close(),n(!1)},docLinks:t.docLinks}),t))})))({pkg:t,core:e})),[e])};n(74)},function(e,t,n){"use strict";n.d(t,"p",(function(){return i.q})),n.d(t,"i",(function(){return i.i})),n.d(t,"m",(function(){return i.l})),n.d(t,"r",(function(){return i.t})),n.d(t,"g",(function(){return i.g})),n.d(t,"o",(function(){return i.p})),n.d(t,"k",(function(){return i.k})),n.d(t,"q",(function(){return i.s})),n.d(t,"d",(function(){return i.c})),n.d(t,"e",(function(){return i.d})),n.d(t,"s",(function(){return i.u})),n.d(t,"a",(function(){return i.a})),n.d(t,"j",(function(){return i.j})),n.d(t,"f",(function(){return i.e})),n.d(t,"v",(function(){return i.w})),n.d(t,"c",(function(){return i.b})),n.d(t,"t",(function(){return i.v})),n.d(t,"h",(function(){return i.h})),n.d(t,"n",(function(){return i.o})),n.d(t,"w",(function(){return i.x})),n.d(t,"u",(function(){return a.a})),n.d(t,"l",(function(){return w})),n.d(t,"b",(function(){return x}));var i=n(140),a=n(218),r=n(58),s=n.n(r),o=n(1),l=n.n(o),u=n(6),c=n(12),d=n(16),h=n(17),f=n(141),p=n(377),m=n(375),g=n(289);const b=({onClose:e})=>{const{fleetServerHost:t,setFleetServerHost:n,fleetServerHosts:i,fleetServerPolicyId:a,serviceToken:r,status:s,error:o,submit:c,inputs:d}=Object(p.b)(),{isFleetServerReady:h}=Object(p.c)(),{hasRecentlyEnrolledFleetServers:f}=Object(g.a)(),b=[Object(m.d)({fleetServerHosts:i,fleetServerHost:t,setFleetServerHost:n,fleetServerPolicyId:a,serviceToken:r,status:s,error:o,submit:c,isFleetServerHostSubmitted:!1,inputs:d,onClose:e}),Object(m.e)({isFleetServerReady:h,fleetServerHost:null==t?void 0:t.host_urls[0],fleetServerPolicyId:a,serviceToken:r,deploymentMode:"quickstart",disabled:"success"!==s}),Object(m.b)({hasRecentlyEnrolledFleetServers:f,disabled:"success"!==s})];return l.a.createElement(u.EuiSteps,{steps:b,className:"eui-textLeft"})};var y=n(290);const v=s()(u.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1cg8svw-0"})(["height:100%;margin:0 auto;"]),E=({isFlyout:e=!1,currentTab:t,tabs:n,onTabClick:i})=>{const{docLinks:a}=Object(h.sc)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(u.EuiTitle,{size:"m"},l.a.createElement("h2",{"data-test-subj":"addFleetServerHeader"},l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.title",defaultMessage:"Add a Fleet Server"}))),l.a.createElement(u.EuiSpacer,{size:"m"}),l.a.createElement(u.EuiText,null,l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.instructions",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}",values:{userGuideLink:l.a.createElement(u.EuiLink,{href:a.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})),l.a.createElement(u.EuiSpacer,{size:"xl"}),l.a.createElement(u.EuiButtonGroup,{legend:"Fleet Server instructions",isFullWidth:!0,options:n,idSelected:t,onChange:e=>i(e),style:{maxWidth:"500px"}}))},w=({onClose:e})=>{const{tabs:t,currentTab:n,setCurrentTab:i,currentTabContent:a}=(e=>{const[t,n]=Object(o.useState)("quickStart"),i={id:"quickStart",label:"Quick Start",content:l.a.createElement(b,{onClose:e}),"data-test-subj":"fleetServerFlyoutTab-quickStart"},a={id:"advanced",label:"Advanced",content:l.a.createElement(y.a,{onClose:e}),"data-test-subj":"fleetServerFlyoutTab-advanced"};return{tabs:[i,a],currentTab:t,setCurrentTab:n,currentTabContent:"quickStart"===t?i.content:a.content}})(e),{permissionsError:r,isPermissionsLoading:s}=Object(h.Ab)();let c;return"MISSING_FLEET_SERVER_SETUP_PRIVILEGES"===r&&(c=l.a.createElement(v,{gutterSize:"none",justifyContent:"center",direction:"column"},l.a.createElement(f.h,null))),l.a.createElement(u.EuiFlyout,{"data-test-subj":"fleetServerFlyout",onClose:e,maxWidth:d.q},l.a.createElement(u.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"FleetAddFleetServerFlyoutTitle"},l.a.createElement(E,{tabs:t,currentTab:n,onTabClick:e=>i(e),isFlyout:!0})),l.a.createElement(u.EuiFlyoutBody,null,s?null:c||a))},x=()=>{const{docLinks:e}=Object(h.sc)(),t=Object(h.Lb)(),n=Object(o.useCallback)((()=>{t.openFleetServerFlyout()}),[t]);return l.a.createElement(v,{gutterSize:"none",justifyContent:"center",direction:"column"},l.a.createElement(u.EuiFlexGroup,{alignItems:"center",direction:"column"},l.a.createElement(u.EuiFlexItem,null,l.a.createElement(u.EuiTitle,{size:"m"},l.a.createElement("h2",{"data-test-subj":"addFleetServerHeader"},l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.title",defaultMessage:"Add a Fleet Server"})))),l.a.createElement(u.EuiFlexItem,null,l.a.createElement(S,null,l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.instructions",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}",values:{userGuideLink:l.a.createElement(u.EuiLink,{href:e.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}))),l.a.createElement(u.EuiSpacer,{size:"s"}),l.a.createElement(u.EuiFlexItem,null,l.a.createElement(u.EuiToolTip,{content:l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.addFleetServerButton.tooltip",defaultMessage:"Fleet Server is a component of the Elastic Stack used to centrally manage Elastic Agents"})},l.a.createElement(u.EuiButton,{onClick:n,fill:!0,"data-test-subj":"fleetServerLanding.addFleetServerButton"},l.a.createElement(c.FormattedMessage,{id:"xpack.fleet.fleetServerLanding.addFleetServerButton",defaultMessage:"Add Fleet Server"}))))))};var S=s()(u.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1cg8svw-1"})(["max-width:500px;text-align:center;"]);n(219)},function(e,t,n){e.exports=n(41)(3852)},function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var i=n(86),a=i.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=s),s.prototype=Object.create(a.prototype),r(a,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},,,,,,,function(e,t,n){"use strict";var i=n(170),a=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],r=["scalar","sequence","mapping"];e.exports=function(e,t){var n,s;if(t=t||{},Object.keys(t).forEach((function(t){if(-1===a.indexOf(t))throw new i('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=(n=t.styleAliases||null,s={},null!==n&&Object.keys(n).forEach((function(e){n[e].forEach((function(t){s[String(t)]=e}))})),s),-1===r.indexOf(this.kind))throw new i('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}},function(e,t,n){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e,t,n){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=r:t.BN=r,r.BN=r,r.wordSize=26;try{s=n(523).Buffer}catch(e){}function o(e,t,n){for(var i=0,a=Math.min(e.length,n),r=t;r<a;r++){var s=e.charCodeAt(r)-48;i<<=4,i|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return i}function l(e,t,n,i){for(var a=0,r=Math.min(e.length,n),s=t;s<r;s++){var o=e.charCodeAt(s)-48;a*=i,a+=o>=49?o-49+10:o>=17?o-17+10:o}return a}r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&a++,16===t?this._parseHex(e,a):this._parseBase(e,t,a),"-"===e[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),t,n)},r.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},r.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,s,o=0;if("be"===n)for(a=e.length-1,r=0;a>=0;a-=3)s=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[r]|=s<<o&67108863,this.words[r+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===n)for(a=0,r=0;a<e.length;a+=3)s=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[r]|=s<<o&67108863,this.words[r+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this.strip()},r.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,a,r=0;for(n=e.length-6,i=0;n>=t;n-=6)a=o(e,n,n+6),this.words[i]|=a<<r&67108863,this.words[i+1]|=a>>>26-r&4194303,(r+=24)>=26&&(r-=26,i++);n+6!==t&&(a=o(e,t,n+6),this.words[i]|=a<<r&67108863,this.words[i+1]|=a>>>26-r&4194303),this.strip()},r.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=t)i++;i--,a=a/t|0;for(var r=e.length-n,s=r%i,o=Math.min(r,r-s)+n,u=0,c=n;c<o;c+=i)u=l(e,c,c+i,t),this.imuln(a),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=l(e,c,e.length,t),c=0;c<s;c++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var a=0|e.words[0],r=0|t.words[0],s=a*r,o=67108863&s,l=s/67108864|0;n.words[0]=o;for(var u=1;u<i;u++){for(var c=l>>>26,d=67108863&l,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;c+=(s=(a=0|e.words[p])*(r=0|t.words[f])+d)/67108864|0,d=67108863&s}n.words[u]=0|d,l=0|c}return 0!==l?n.words[u]=0|l:n.length--,n.strip()}r.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var a=0,r=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<a|r)).toString(16);n=0!=(r=o>>>24-a&16777215)||s!==this.length-1?u[6-l.length]+l+n:l+n,(a+=2)>=26&&(a-=26,s--)}for(0!==r&&(n=r.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=c[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(e,t){return i(void 0!==s),this.toArrayLike(s,e,t)},r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},r.prototype.toArrayLike=function(e,t,n){var a=this.byteLength(),r=n||Math.max(1,a);i(a<=r,"byte array longer than desired length"),i(r>0,"Requested array length <= 0"),this.strip();var s,o,l="le"===t,u=new e(r),c=this.clone();if(l){for(o=0;!c.isZero();o++)s=c.andln(255),c.iushrn(8),u[o]=s;for(;o<r;o++)u[o]=0}else{for(o=0;o<r-a;o++)u[o]=0;for(o=0;!c.isZero();o++)s=c.andln(255),c.iushrn(8),u[r-o-1]=s}return u},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},r.prototype.ior=function(e){return i(!(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},r.prototype.iand=function(e){return i(!(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},r.prototype.ixor=function(e){return i(!(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return n>0&&(this.words[a]=~this.words[a]&67108863>>26-n),this.strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,a=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<a:this.words[n]&~(1<<a),this.strip()},r.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var a=0,r=0;r<i.length;r++)t=(0|n.words[r])+(0|i.words[r])+a,this.words[r]=67108863&t,a=t>>>26;for(;0!==a&&r<n.length;r++)t=(0|n.words[r])+a,this.words[r]=67108863&t,a=t>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;r<n.length;r++)this.words[r]=n.words[r];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=e):(n=e,i=this);for(var r=0,s=0;s<i.length;s++)r=(t=(0|n.words[s])-(0|i.words[s])+r)>>26,this.words[s]=67108863&t;for(;0!==r&&s<n.length;s++)r=(t=(0|n.words[s])+r)>>26,this.words[s]=67108863&t;if(0===r&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,n){var i,a,r,s=e.words,o=t.words,l=n.words,u=0,c=0|s[0],d=8191&c,h=c>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,v=0|s[3],E=8191&v,w=v>>>13,x=0|s[4],S=8191&x,k=x>>>13,M=0|s[5],_=8191&M,A=M>>>13,C=0|s[6],F=8191&C,D=C>>>13,T=0|s[7],I=8191&T,P=T>>>13,O=0|s[8],j=8191&O,B=O>>>13,L=0|s[9],N=8191&L,R=L>>>13,z=0|o[0],U=8191&z,Z=z>>>13,K=0|o[1],q=8191&K,H=K>>>13,W=0|o[2],V=8191&W,G=W>>>13,$=0|o[3],X=8191&$,J=$>>>13,Y=0|o[4],Q=8191&Y,ee=Y>>>13,te=0|o[5],ne=8191&te,ie=te>>>13,ae=0|o[6],re=8191&ae,se=ae>>>13,oe=0|o[7],le=8191&oe,ue=oe>>>13,ce=0|o[8],de=8191&ce,he=ce>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(u+(i=Math.imul(d,U))|0)+((8191&(a=(a=Math.imul(d,Z))+Math.imul(h,U)|0))<<13)|0;u=((r=Math.imul(h,Z))+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,U),a=(a=Math.imul(p,Z))+Math.imul(m,U)|0,r=Math.imul(m,Z);var be=(u+(i=i+Math.imul(d,q)|0)|0)+((8191&(a=(a=a+Math.imul(d,H)|0)+Math.imul(h,q)|0))<<13)|0;u=((r=r+Math.imul(h,H)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(b,U),a=(a=Math.imul(b,Z))+Math.imul(y,U)|0,r=Math.imul(y,Z),i=i+Math.imul(p,q)|0,a=(a=a+Math.imul(p,H)|0)+Math.imul(m,q)|0,r=r+Math.imul(m,H)|0;var ye=(u+(i=i+Math.imul(d,V)|0)|0)+((8191&(a=(a=a+Math.imul(d,G)|0)+Math.imul(h,V)|0))<<13)|0;u=((r=r+Math.imul(h,G)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,U),a=(a=Math.imul(E,Z))+Math.imul(w,U)|0,r=Math.imul(w,Z),i=i+Math.imul(b,q)|0,a=(a=a+Math.imul(b,H)|0)+Math.imul(y,q)|0,r=r+Math.imul(y,H)|0,i=i+Math.imul(p,V)|0,a=(a=a+Math.imul(p,G)|0)+Math.imul(m,V)|0,r=r+Math.imul(m,G)|0;var ve=(u+(i=i+Math.imul(d,X)|0)|0)+((8191&(a=(a=a+Math.imul(d,J)|0)+Math.imul(h,X)|0))<<13)|0;u=((r=r+Math.imul(h,J)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(S,U),a=(a=Math.imul(S,Z))+Math.imul(k,U)|0,r=Math.imul(k,Z),i=i+Math.imul(E,q)|0,a=(a=a+Math.imul(E,H)|0)+Math.imul(w,q)|0,r=r+Math.imul(w,H)|0,i=i+Math.imul(b,V)|0,a=(a=a+Math.imul(b,G)|0)+Math.imul(y,V)|0,r=r+Math.imul(y,G)|0,i=i+Math.imul(p,X)|0,a=(a=a+Math.imul(p,J)|0)+Math.imul(m,X)|0,r=r+Math.imul(m,J)|0;var Ee=(u+(i=i+Math.imul(d,Q)|0)|0)+((8191&(a=(a=a+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;u=((r=r+Math.imul(h,ee)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(_,U),a=(a=Math.imul(_,Z))+Math.imul(A,U)|0,r=Math.imul(A,Z),i=i+Math.imul(S,q)|0,a=(a=a+Math.imul(S,H)|0)+Math.imul(k,q)|0,r=r+Math.imul(k,H)|0,i=i+Math.imul(E,V)|0,a=(a=a+Math.imul(E,G)|0)+Math.imul(w,V)|0,r=r+Math.imul(w,G)|0,i=i+Math.imul(b,X)|0,a=(a=a+Math.imul(b,J)|0)+Math.imul(y,X)|0,r=r+Math.imul(y,J)|0,i=i+Math.imul(p,Q)|0,a=(a=a+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,ee)|0;var we=(u+(i=i+Math.imul(d,ne)|0)|0)+((8191&(a=(a=a+Math.imul(d,ie)|0)+Math.imul(h,ne)|0))<<13)|0;u=((r=r+Math.imul(h,ie)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(F,U),a=(a=Math.imul(F,Z))+Math.imul(D,U)|0,r=Math.imul(D,Z),i=i+Math.imul(_,q)|0,a=(a=a+Math.imul(_,H)|0)+Math.imul(A,q)|0,r=r+Math.imul(A,H)|0,i=i+Math.imul(S,V)|0,a=(a=a+Math.imul(S,G)|0)+Math.imul(k,V)|0,r=r+Math.imul(k,G)|0,i=i+Math.imul(E,X)|0,a=(a=a+Math.imul(E,J)|0)+Math.imul(w,X)|0,r=r+Math.imul(w,J)|0,i=i+Math.imul(b,Q)|0,a=(a=a+Math.imul(b,ee)|0)+Math.imul(y,Q)|0,r=r+Math.imul(y,ee)|0,i=i+Math.imul(p,ne)|0,a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0,r=r+Math.imul(m,ie)|0;var xe=(u+(i=i+Math.imul(d,re)|0)|0)+((8191&(a=(a=a+Math.imul(d,se)|0)+Math.imul(h,re)|0))<<13)|0;u=((r=r+Math.imul(h,se)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(I,U),a=(a=Math.imul(I,Z))+Math.imul(P,U)|0,r=Math.imul(P,Z),i=i+Math.imul(F,q)|0,a=(a=a+Math.imul(F,H)|0)+Math.imul(D,q)|0,r=r+Math.imul(D,H)|0,i=i+Math.imul(_,V)|0,a=(a=a+Math.imul(_,G)|0)+Math.imul(A,V)|0,r=r+Math.imul(A,G)|0,i=i+Math.imul(S,X)|0,a=(a=a+Math.imul(S,J)|0)+Math.imul(k,X)|0,r=r+Math.imul(k,J)|0,i=i+Math.imul(E,Q)|0,a=(a=a+Math.imul(E,ee)|0)+Math.imul(w,Q)|0,r=r+Math.imul(w,ee)|0,i=i+Math.imul(b,ne)|0,a=(a=a+Math.imul(b,ie)|0)+Math.imul(y,ne)|0,r=r+Math.imul(y,ie)|0,i=i+Math.imul(p,re)|0,a=(a=a+Math.imul(p,se)|0)+Math.imul(m,re)|0,r=r+Math.imul(m,se)|0;var Se=(u+(i=i+Math.imul(d,le)|0)|0)+((8191&(a=(a=a+Math.imul(d,ue)|0)+Math.imul(h,le)|0))<<13)|0;u=((r=r+Math.imul(h,ue)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(j,U),a=(a=Math.imul(j,Z))+Math.imul(B,U)|0,r=Math.imul(B,Z),i=i+Math.imul(I,q)|0,a=(a=a+Math.imul(I,H)|0)+Math.imul(P,q)|0,r=r+Math.imul(P,H)|0,i=i+Math.imul(F,V)|0,a=(a=a+Math.imul(F,G)|0)+Math.imul(D,V)|0,r=r+Math.imul(D,G)|0,i=i+Math.imul(_,X)|0,a=(a=a+Math.imul(_,J)|0)+Math.imul(A,X)|0,r=r+Math.imul(A,J)|0,i=i+Math.imul(S,Q)|0,a=(a=a+Math.imul(S,ee)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,ee)|0,i=i+Math.imul(E,ne)|0,a=(a=a+Math.imul(E,ie)|0)+Math.imul(w,ne)|0,r=r+Math.imul(w,ie)|0,i=i+Math.imul(b,re)|0,a=(a=a+Math.imul(b,se)|0)+Math.imul(y,re)|0,r=r+Math.imul(y,se)|0,i=i+Math.imul(p,le)|0,a=(a=a+Math.imul(p,ue)|0)+Math.imul(m,le)|0,r=r+Math.imul(m,ue)|0;var ke=(u+(i=i+Math.imul(d,de)|0)|0)+((8191&(a=(a=a+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((r=r+Math.imul(h,he)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(N,U),a=(a=Math.imul(N,Z))+Math.imul(R,U)|0,r=Math.imul(R,Z),i=i+Math.imul(j,q)|0,a=(a=a+Math.imul(j,H)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,H)|0,i=i+Math.imul(I,V)|0,a=(a=a+Math.imul(I,G)|0)+Math.imul(P,V)|0,r=r+Math.imul(P,G)|0,i=i+Math.imul(F,X)|0,a=(a=a+Math.imul(F,J)|0)+Math.imul(D,X)|0,r=r+Math.imul(D,J)|0,i=i+Math.imul(_,Q)|0,a=(a=a+Math.imul(_,ee)|0)+Math.imul(A,Q)|0,r=r+Math.imul(A,ee)|0,i=i+Math.imul(S,ne)|0,a=(a=a+Math.imul(S,ie)|0)+Math.imul(k,ne)|0,r=r+Math.imul(k,ie)|0,i=i+Math.imul(E,re)|0,a=(a=a+Math.imul(E,se)|0)+Math.imul(w,re)|0,r=r+Math.imul(w,se)|0,i=i+Math.imul(b,le)|0,a=(a=a+Math.imul(b,ue)|0)+Math.imul(y,le)|0,r=r+Math.imul(y,ue)|0,i=i+Math.imul(p,de)|0,a=(a=a+Math.imul(p,he)|0)+Math.imul(m,de)|0,r=r+Math.imul(m,he)|0;var Me=(u+(i=i+Math.imul(d,pe)|0)|0)+((8191&(a=(a=a+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((r=r+Math.imul(h,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(N,q),a=(a=Math.imul(N,H))+Math.imul(R,q)|0,r=Math.imul(R,H),i=i+Math.imul(j,V)|0,a=(a=a+Math.imul(j,G)|0)+Math.imul(B,V)|0,r=r+Math.imul(B,G)|0,i=i+Math.imul(I,X)|0,a=(a=a+Math.imul(I,J)|0)+Math.imul(P,X)|0,r=r+Math.imul(P,J)|0,i=i+Math.imul(F,Q)|0,a=(a=a+Math.imul(F,ee)|0)+Math.imul(D,Q)|0,r=r+Math.imul(D,ee)|0,i=i+Math.imul(_,ne)|0,a=(a=a+Math.imul(_,ie)|0)+Math.imul(A,ne)|0,r=r+Math.imul(A,ie)|0,i=i+Math.imul(S,re)|0,a=(a=a+Math.imul(S,se)|0)+Math.imul(k,re)|0,r=r+Math.imul(k,se)|0,i=i+Math.imul(E,le)|0,a=(a=a+Math.imul(E,ue)|0)+Math.imul(w,le)|0,r=r+Math.imul(w,ue)|0,i=i+Math.imul(b,de)|0,a=(a=a+Math.imul(b,he)|0)+Math.imul(y,de)|0,r=r+Math.imul(y,he)|0;var _e=(u+(i=i+Math.imul(p,pe)|0)|0)+((8191&(a=(a=a+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((r=r+Math.imul(m,me)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(N,V),a=(a=Math.imul(N,G))+Math.imul(R,V)|0,r=Math.imul(R,G),i=i+Math.imul(j,X)|0,a=(a=a+Math.imul(j,J)|0)+Math.imul(B,X)|0,r=r+Math.imul(B,J)|0,i=i+Math.imul(I,Q)|0,a=(a=a+Math.imul(I,ee)|0)+Math.imul(P,Q)|0,r=r+Math.imul(P,ee)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(D,ne)|0,r=r+Math.imul(D,ie)|0,i=i+Math.imul(_,re)|0,a=(a=a+Math.imul(_,se)|0)+Math.imul(A,re)|0,r=r+Math.imul(A,se)|0,i=i+Math.imul(S,le)|0,a=(a=a+Math.imul(S,ue)|0)+Math.imul(k,le)|0,r=r+Math.imul(k,ue)|0,i=i+Math.imul(E,de)|0,a=(a=a+Math.imul(E,he)|0)+Math.imul(w,de)|0,r=r+Math.imul(w,he)|0;var Ae=(u+(i=i+Math.imul(b,pe)|0)|0)+((8191&(a=(a=a+Math.imul(b,me)|0)+Math.imul(y,pe)|0))<<13)|0;u=((r=r+Math.imul(y,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(N,X),a=(a=Math.imul(N,J))+Math.imul(R,X)|0,r=Math.imul(R,J),i=i+Math.imul(j,Q)|0,a=(a=a+Math.imul(j,ee)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,ee)|0,i=i+Math.imul(I,ne)|0,a=(a=a+Math.imul(I,ie)|0)+Math.imul(P,ne)|0,r=r+Math.imul(P,ie)|0,i=i+Math.imul(F,re)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(D,re)|0,r=r+Math.imul(D,se)|0,i=i+Math.imul(_,le)|0,a=(a=a+Math.imul(_,ue)|0)+Math.imul(A,le)|0,r=r+Math.imul(A,ue)|0,i=i+Math.imul(S,de)|0,a=(a=a+Math.imul(S,he)|0)+Math.imul(k,de)|0,r=r+Math.imul(k,he)|0;var Ce=(u+(i=i+Math.imul(E,pe)|0)|0)+((8191&(a=(a=a+Math.imul(E,me)|0)+Math.imul(w,pe)|0))<<13)|0;u=((r=r+Math.imul(w,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(N,Q),a=(a=Math.imul(N,ee))+Math.imul(R,Q)|0,r=Math.imul(R,ee),i=i+Math.imul(j,ne)|0,a=(a=a+Math.imul(j,ie)|0)+Math.imul(B,ne)|0,r=r+Math.imul(B,ie)|0,i=i+Math.imul(I,re)|0,a=(a=a+Math.imul(I,se)|0)+Math.imul(P,re)|0,r=r+Math.imul(P,se)|0,i=i+Math.imul(F,le)|0,a=(a=a+Math.imul(F,ue)|0)+Math.imul(D,le)|0,r=r+Math.imul(D,ue)|0,i=i+Math.imul(_,de)|0,a=(a=a+Math.imul(_,he)|0)+Math.imul(A,de)|0,r=r+Math.imul(A,he)|0;var Fe=(u+(i=i+Math.imul(S,pe)|0)|0)+((8191&(a=(a=a+Math.imul(S,me)|0)+Math.imul(k,pe)|0))<<13)|0;u=((r=r+Math.imul(k,me)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(N,ne),a=(a=Math.imul(N,ie))+Math.imul(R,ne)|0,r=Math.imul(R,ie),i=i+Math.imul(j,re)|0,a=(a=a+Math.imul(j,se)|0)+Math.imul(B,re)|0,r=r+Math.imul(B,se)|0,i=i+Math.imul(I,le)|0,a=(a=a+Math.imul(I,ue)|0)+Math.imul(P,le)|0,r=r+Math.imul(P,ue)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,he)|0)+Math.imul(D,de)|0,r=r+Math.imul(D,he)|0;var De=(u+(i=i+Math.imul(_,pe)|0)|0)+((8191&(a=(a=a+Math.imul(_,me)|0)+Math.imul(A,pe)|0))<<13)|0;u=((r=r+Math.imul(A,me)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(N,re),a=(a=Math.imul(N,se))+Math.imul(R,re)|0,r=Math.imul(R,se),i=i+Math.imul(j,le)|0,a=(a=a+Math.imul(j,ue)|0)+Math.imul(B,le)|0,r=r+Math.imul(B,ue)|0,i=i+Math.imul(I,de)|0,a=(a=a+Math.imul(I,he)|0)+Math.imul(P,de)|0,r=r+Math.imul(P,he)|0;var Te=(u+(i=i+Math.imul(F,pe)|0)|0)+((8191&(a=(a=a+Math.imul(F,me)|0)+Math.imul(D,pe)|0))<<13)|0;u=((r=r+Math.imul(D,me)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(N,le),a=(a=Math.imul(N,ue))+Math.imul(R,le)|0,r=Math.imul(R,ue),i=i+Math.imul(j,de)|0,a=(a=a+Math.imul(j,he)|0)+Math.imul(B,de)|0,r=r+Math.imul(B,he)|0;var Ie=(u+(i=i+Math.imul(I,pe)|0)|0)+((8191&(a=(a=a+Math.imul(I,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((r=r+Math.imul(P,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(N,de),a=(a=Math.imul(N,he))+Math.imul(R,de)|0,r=Math.imul(R,he);var Pe=(u+(i=i+Math.imul(j,pe)|0)|0)+((8191&(a=(a=a+Math.imul(j,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((r=r+Math.imul(B,me)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Oe=(u+(i=Math.imul(N,pe))|0)+((8191&(a=(a=Math.imul(N,me))+Math.imul(R,pe)|0))<<13)|0;return u=((r=Math.imul(R,me))+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=be,l[2]=ye,l[3]=ve,l[4]=Ee,l[5]=we,l[6]=xe,l[7]=Se,l[8]=ke,l[9]=Me,l[10]=_e,l[11]=Ae,l[12]=Ce,l[13]=Fe,l[14]=De,l[15]=Te,l[16]=Ie,l[17]=Pe,l[18]=Oe,0!==u&&(l[19]=u,n.length++),n};function p(e,t,n){return(new m).mulp(e,t,n)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),r.prototype.mulTo=function(e,t){var n,i=this.length+e.length;return n=10===this.length&&10===e.length?f(this,e,t):i<63?h(this,e,t):i<1024?function(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,a=0,r=0;r<n.length-1;r++){var s=a;a=0;for(var o=67108863&i,l=Math.min(r,t.length-1),u=Math.max(0,r-e.length+1);u<=l;u++){var c=r-u,d=(0|e.words[c])*(0|t.words[u]),h=67108863&d;o=67108863&(h=h+o|0),a+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[r]=o,i=s,s=a}return 0!==i?n.words[r]=i:n.length--,n.strip()}(this,e,t):p(this,e,t),n},m.prototype.makeRBT=function(e){for(var t=new Array(e),n=r.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},m.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,a=0;a<t;a++)i|=(1&e)<<t-a-1,e>>=1;return i},m.prototype.permute=function(e,t,n,i,a,r){for(var s=0;s<r;s++)i[s]=t[e[s]],a[s]=n[e[s]]},m.prototype.transform=function(e,t,n,i,a,r){this.permute(r,e,t,n,i,a);for(var s=1;s<a;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),c=0;c<a;c+=o)for(var d=l,h=u,f=0;f<s;f++){var p=n[c+f],m=i[c+f],g=n[c+f+s],b=i[c+f+s],y=d*g-h*b;b=d*b+h*g,g=y,n[c+f]=p+g,i[c+f]=m+b,n[c+f+s]=p-g,i[c+f+s]=m-b,f!==o&&(y=l*d-u*h,h=l*h+u*d,d=y)}},m.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},m.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=e[i];e[i]=e[n-i-1],e[n-i-1]=a,a=t[i],t[i]=-t[n-i-1],t[n-i-1]=-a}},m.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var a=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&a,n=a<67108864?0:a/67108864|0}return e},m.prototype.convert13b=function(e,t,n,a){for(var r=0,s=0;s<t;s++)r+=0|e[s],n[2*s]=8191&r,r>>>=13,n[2*s+1]=8191&r,r>>>=13;for(s=2*t;s<a;++s)n[s]=0;i(0===r),i(!(-8192&r))},m.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},m.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(i),r=this.stub(i),s=new Array(i),o=new Array(i),l=new Array(i),u=new Array(i),c=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,u,i),this.transform(s,r,o,l,i,a),this.transform(u,r,c,d,i,a);for(var f=0;f<i;f++){var p=o[f]*c[f]-l[f]*d[f];l[f]=o[f]*d[f]+l[f]*c[f],o[f]=p}return this.conjugate(o,l,i),this.transform(o,l,h,r,i,a),this.conjugate(h,r,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),p(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,n=0;n<this.length;n++){var a=(0|this.words[n])*e,r=(67108863&a)+(67108863&t);t>>=26,t+=a/67108864|0,t+=r>>>26,this.words[n]=67108863&r}return 0!==t&&(this.words[n]=t,this.length++),this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,a=n%26;t[n]=(e.words[i]&1<<a)>>>a}return t}(e);if(0===t.length)return new r(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var a=n.sqr();i<t.length;i++,a=a.sqr())0!==t[i]&&(n=n.mul(a));return n},r.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,a=(e-n)/26,r=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&r,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this.strip()},r.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,n){var a;i("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var r=e%26,s=Math.min((e-r)/26,this.length),o=67108863^67108863>>>r<<r,l=n;if(a-=s,a=Math.max(0,a),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=a);u--){var d=0|this.words[u];this.words[u]=c<<26-r|d>>>r,c=d&o}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,a=1<<t;return!(this.length<=n||!(this.words[n]&a))},r.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this.strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,n){var a,r,s=e.length+n;this._expand(s);var o=0;for(a=0;a<e.length;a++){r=(0|this.words[a+n])+o;var l=(0|e.words[a])*t;o=((r-=67108863&l)>>26)-(l/67108864|0),this.words[a+n]=67108863&r}for(;a<this.length-n;a++)o=(r=(0|this.words[a+n])+o)>>26,this.words[a+n]=67108863&r;if(0===o)return this.strip();for(i(-1===o),o=0,a=0;a<this.length;a++)o=(r=-(0|this.words[a])+o)>>26,this.words[a]=67108863&r;return this.negative=1,this.strip()},r.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),a=e,s=0|a.words[a.length-1];0!=(n=26-this._countBits(s))&&(a=a.ushln(n),i.iushln(n),s=0|a.words[a.length-1]);var o,l=i.length-a.length;if("mod"!==t){(o=new r(null)).length=l+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var c=i.clone()._ishlnsubmul(a,1,l);0===c.negative&&(i=c,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(a,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);o&&(o.words[d]=h)}return o&&o.strip(),i.strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:o||null,mod:i}},r.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):this.negative&e.negative?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),a=e.andln(1),r=n.cmp(i);return r<0||1===a&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modn=function(e){i(e<=67108863);for(var t=(1<<26)%e,n=0,a=this.length-1;a>=0;a--)n=(t*n+(0|this.words[a]))%e;return n},r.prototype.idivn=function(e){i(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var a=(0|this.words[n])+67108864*t;this.words[n]=a/e|0,t=a%e}return this.strip()},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new r(1),s=new r(0),o=new r(0),l=new r(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;!(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(c),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var p=0,m=1;!(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(c),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(u)}},r.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new r(1),o=new r(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;!(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;!(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=t.cmp(n);if(a<0){var r=t;t=n,n=r}else if(0===a||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,a=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=a,this;for(var r=a,s=n;0!==r&&s<this.length;s++){var o=0|this.words[s];r=(o+=r)>>>26,o&=67108863,this.words[s]=o}return 0!==r&&(this.words[s]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|e.words[n];if(i!==a){i<a?t=-1:i>a&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new x(e)},r.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function E(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},a(y,b),y.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),a=0;a<i;a++)t.words[a]=e.words[a];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var r=e.words[9];for(t.words[t.length++]=r&n,a=10;a<e.length;a++){var s=0|e.words[a];e.words[a-10]=(s&n)<<4|r>>>22,r=s}r>>>=22,e.words[a-10]=r,0===r&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(v,b),a(E,b),a(w,b),w.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,a=67108863&i;i>>>=26,e.words[n]=a,t=i}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new v;else if("p192"===e)t=new E;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){i(!(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},x.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new r(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);i(!a.isZero());var o=new r(1).toRed(this),l=o.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new r(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var d=this.pow(c,a),h=this.pow(e,a.addn(1).iushrn(1)),f=this.pow(e,a),p=s;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();i(g<p);var b=this.pow(d,new r(1).iushln(p-g-1));h=h.redMul(b),d=b.redSqr(),f=f.redMul(d),p=g}return h},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new r(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var a=n[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],c=l-1;c>=0;c--){var d=u>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4==++o||0===i&&0===c)&&(a=this.mul(a,n[s]),o=0,s=0)):o=0}l=26}return a},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new S(e)},a(S,x),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),r=a;return a.cmp(this.m)>=0?r=a.isub(this.m):a.cmpn(0)<0&&(r=a.iadd(this.m)),r._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(235)(e))},,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return i.a})),n.d(t,"e",(function(){return i.b})),n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return E}));var i=n(165),a=n(1),r=n.n(a),s=n(12),o=n(6),l=n(217),u=n(17),c=n(59);const d=()=>r.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},r.a.createElement(o.EuiFlexItem,null,r.a.createElement(o.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},r.a.createElement(o.EuiFlexItem,{grow:!1},r.a.createElement(o.EuiTitle,{size:"l"},r.a.createElement("h1",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.overviewPageTitle",defaultMessage:"Fleet"})))))),r.a.createElement(o.EuiFlexItem,null,r.a.createElement(o.EuiText,{color:"subdued"},r.a.createElement("p",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.overviewPageSubtitle",defaultMessage:"Centralized management for Elastic Agents."}))))),h=({section:e,children:t,rightColumn:n})=>{const{getHref:a}=Object(u.jc)(),{agents:h}=Object(u.Cb)(),f=Object(u.yb)(),{agentTamperProtectionEnabled:p,subfeaturePrivileges:m}=c.b.get(),{docLinks:g}=Object(u.sc)(),b=Object(l.a)("GRANULAR_PRIVILEGES"),y=[{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.agentsLinkText",defaultMessage:"Agents"}),isSelected:"agents"===e,href:a("agent_list"),disabled:!(null!=h&&h.enabled),"data-test-subj":"fleet-agents-tab",isHidden:!f.fleet.readAgents},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.policiesLinkText",defaultMessage:"Agent policies"}),isHidden:!f.fleet.readAgentPolicies,isSelected:"agent_policies"===e,href:a("policies_list"),"data-test-subj":"fleet-agent-policies-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.enrollmentTokensText",defaultMessage:"Enrollment tokens"}),isHidden:!f.fleet.allAgents,isSelected:"enrollment_tokens"===e,href:a("enrollment_tokens"),"data-test-subj":"fleet-enrollment-tokens-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.uninstallTokensText",defaultMessage:"Uninstall tokens"}),isSelected:"uninstall_tokens"===e,href:a("uninstall_tokens"),"data-test-subj":"fleet-uninstall-tokens-tab",isHidden:!f.fleet.allAgents||!p},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.dataStreamsLinkText",defaultMessage:"Data streams"}),isSelected:"data_streams"===e,href:a("data_streams"),"data-test-subj":"fleet-datastreams-tab"},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.settingsLinkText",defaultMessage:"Settings"}),isHidden:!f.fleet.readSettings,isSelected:"settings"===e,href:a("settings"),"data-test-subj":"fleet-settings-tab"}].filter((({isHidden:e})=>!e)).map((({isHidden:e,...t})=>t));return r.a.createElement(r.a.Fragment,null,m&&f.fleet.all&&!b.isHidden?r.a.createElement(o.EuiCallOut,{size:"s",iconType:"cheer",onDismiss:b.dismiss,title:r.a.createElement(r.a.Fragment,null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.granularPrivileges.callOutContent",defaultMessage:"We've added new privileges that let you define more granularly who can view or edit Fleet agents, policies, and settings. {learnMoreLink}",values:{learnMoreLink:r.a.createElement(o.EuiLink,{href:g.links.fleet.roleAndPrivileges,external:!0},r.a.createElement("strong",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.granularPrivileges.learnMoreLinkText",defaultMessage:"Learn more."})))}}))}):null,r.a.createElement(i.a,{leftColumn:r.a.createElement(d,null),rightColumn:n,tabs:y},t))};var f=n(4),p=n(58),m=n.n(p),g=n(263),b=n(117);const y=m()(o.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-tfsfl6-0"})(["max-width:500px;margin-right:auto;margin-left:auto;"]),v=({isAddIntegrationsPath:e,children:t})=>r.a.createElement(o.EuiErrorBoundary,null,e?r.a.createElement(i.a,{leftColumn:r.a.createElement(d,null)},t):r.a.createElement(h,null,r.a.createElement(i.b,null,t))),E=r.a.memo((({error:e,requiredFleetRole:t})=>"MISSING_SECURITY"===e?r.a.createElement(g.b,{missingRequirements:["security_required","api_keys"]}):"MISSING_PRIVILEGES"===e?r.a.createElement(y,{"data-test-subj":"missingPrivilegesPrompt"},r.a.createElement(o.EuiEmptyPrompt,{iconType:"securityApp",title:r.a.createElement("h2",{"data-test-subj":"missingPrivilegesPromptTitle"},r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.permissionDeniedErrorTitle",defaultMessage:"Permission denied"})),body:r.a.createElement("p",{"data-test-subj":"missingPrivilegesPromptMessage"},t?r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.pagePermissionDeniedErrorMessage",defaultMessage:"You are not authorized to access that page. It requires the {roleName} Kibana privilege for Fleet.",values:{roleName:r.a.createElement(o.EuiCode,null,t)}}):r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.permissionDeniedErrorMessage",defaultMessage:"You are not authorized to access Fleet. Kibana privileges are required to access Fleet; the {roleName2} or {roleName1} privilege is required to access Integrations.",values:{roleName1:r.a.createElement(o.EuiCode,null,'"All"'),roleName2:r.a.createElement(o.EuiCode,null,'"Read"')}}))})):r.a.createElement(b.i,{title:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.permissionsRequestErrorMessageTitle",defaultMessage:"Unable to check permissions"}),error:f.i18n.translate("xpack.fleet.permissionsRequestErrorMessageDescription",{defaultMessage:"There was a problem checking Fleet permissions"})})))},,function(e,t,n){"use strict";var i=n(140);n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b})),n.d(t,"c",(function(){return i.e})),n.d(t,"d",(function(){return i.f})),n.d(t,"e",(function(){return i.i})),n.d(t,"f",(function(){return i.j})),n.d(t,"g",(function(){return i.k})),n.d(t,"h",(function(){return i.n})),n.d(t,"i",(function(){return i.o})),n.d(t,"j",(function(){return i.p})),n.d(t,"k",(function(){return i.q})),n.d(t,"l",(function(){return i.r})),n.d(t,"m",(function(){return i.u})),n.d(t,"n",(function(){return i.y}))},function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},function(e,t,n){"use strict";var i=t,a=n(127),r=n(135),s=n(325);i.assert=r,i.toArray=s.toArray,i.zero2=s.zero2,i.toHex=s.toHex,i.encode=s.encode,i.getNAF=function(e,t,n){var i=new Array(Math.max(e.bitLength(),n)+1);i.fill(0);for(var a=1<<t+1,r=e.clone(),s=0;s<i.length;s++){var o,l=r.andln(a-1);r.isOdd()?(o=l>(a>>1)-1?(a>>1)-l:l,r.isubn(o)):o=0,i[s]=o,r.iushrn(1)}return i},i.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var i,a=0,r=0;e.cmpn(-a)>0||t.cmpn(-r)>0;){var s,o,l=e.andln(3)+a&3,u=t.andln(3)+r&3;3===l&&(l=-1),3===u&&(u=-1),s=1&l?3!=(i=e.andln(7)+a&7)&&5!==i||2!==u?l:-l:0,n[0].push(s),o=1&u?3!=(i=t.andln(7)+r&7)&&5!==i||2!==l?u:-u:0,n[1].push(o),2*a===s+1&&(a=1-a),2*r===o+1&&(r=1-r),e.iushrn(1),t.iushrn(1)}return n},i.cachedProperty=function(e,t,n){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=n.call(this)}},i.parseBytes=function(e){return"string"==typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new a(e,"hex","le")}},function(e,t,n){"use strict";var i=n(9);n.d(t,"a",(function(){return i.f})),n.d(t,"b",(function(){return i.p})),n.d(t,"c",(function(){return i.q})),n.d(t,"d",(function(){return i.r})),n.d(t,"e",(function(){return i.s})),n.d(t,"f",(function(){return i.t})),n.d(t,"g",(function(){return i.w})),n.d(t,"h",(function(){return i.x})),n.d(t,"i",(function(){return i.z})),n.d(t,"j",(function(){return i.C}))},function(e,t,n){"use strict";var i=n(461);e.exports=i},function(e,t,n){e.exports=n(41)(188)},function(e,t,n){"use strict";n.d(t,"q",(function(){return i.a})),n.d(t,"i",(function(){return o})),n.d(t,"l",(function(){return u})),n.d(t,"t",(function(){return c.b})),n.d(t,"g",(function(){return p})),n.d(t,"p",(function(){return b})),n.d(t,"k",(function(){return y})),n.d(t,"m",(function(){return M})),n.d(t,"s",(function(){return A})),n.d(t,"c",(function(){return C.a})),n.d(t,"d",(function(){return F.a})),n.d(t,"u",(function(){return j})),n.d(t,"a",(function(){return L})),n.d(t,"j",(function(){return N})),n.d(t,"e",(function(){return Z})),n.d(t,"w",(function(){return P.c})),n.d(t,"b",(function(){return P.a})),n.d(t,"v",(function(){return K.a})),n.d(t,"f",(function(){return q})),n.d(t,"h",(function(){return G})),n.d(t,"n",(function(){return Y})),n.d(t,"o",(function(){return Q})),n.d(t,"y",(function(){return ee})),n.d(t,"x",(function(){return ce})),n.d(t,"r",(function(){return Ee}));var i=n(169),a=n(1),r=n.n(a),s=n(6);const o=({title:e,error:t})=>r.a.createElement(s.EuiCallOut,{title:e,color:"danger",iconType:"warning"},r.a.createElement("p",null,"string"==typeof t?t:t.message));var l=n(12);const u=()=>r.a.createElement(s.EuiEmptyPrompt,{title:r.a.createElement("h2",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.setup.titleLabel",defaultMessage:"Loading Fleet..."})),titleSize:"m",body:r.a.createElement(s.EuiLoadingSpinner,{size:"xl"})});var c=n(63),d=n(20),h=n.n(d),f=n(4);const p=r.a.memo((({button:e,onChange:t,isOpen:n,...i})=>{const[o,l]=Object(a.useState)(!1),u=Object(a.useCallback)((()=>{t?t(!1):l(!1)}),[l,t]),c=Object(a.useCallback)((()=>{t?t(!n):l(!o)}),[o,t,n]),d=e?r.a.createElement(s.EuiButton,h()({},e.props,{onClick:c,isDisabled:i.isManaged}),e.children):r.a.createElement(s.EuiButtonIcon,{isDisabled:i.isManaged,iconType:"boxesHorizontal",onClick:c,"aria-label":f.i18n.translate("xpack.fleet.genericActionsMenuText",{defaultMessage:"Open"}),"data-test-subj":"agentActionsBtn"});return r.a.createElement(s.EuiPopover,{anchorPosition:"downRight",panelPaddingSize:"none",button:i.isManaged?r.a.createElement(s.EuiToolTip,{title:f.i18n.translate("xpack.fleet.externallyManagedLabel",{defaultMessage:"This is externally managed integration policy."})},d):d,isOpen:void 0===n?o:n,closePopover:u},"items"in i?r.a.createElement(s.EuiContextMenuPanel,{items:i.items}):r.a.createElement(s.EuiContextMenu,{panels:i.panels,initialPanelId:0}))}));var m=n(15),g=n(9);const b=Object(a.memo)((({count:e,agentPolicyId:t,showAgentText:n,privilegeMode:i,...a})=>{const{getHref:o}=Object(m.Kc)(),u=n?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicy.linkedAgentCountText",defaultMessage:"{count, plural, one {# agent} other {# agents}}",values:{count:e}}):e,c=`${g.b}.policy_id : ${t}${i?` and ${"unprivileged"===i?g.B:g.y}`:""}`;return e>0?r.a.createElement(s.EuiLink,h()({},a,{href:o("agent_list",{kuery:c,showInactive:!0})}),u):r.a.createElement("span",{"data-test-subj":a["data-test-subj"],className:a.className},u)})),y=Object(a.memo)((({children:e})=>r.a.createElement(s.EuiErrorBoundary,null,r.a.createElement(a.Suspense,{fallback:r.a.createElement(i.a,null)},e))));var v=n(58),E=n.n(v);const w=E.a.div.withConfig({displayName:"Container",componentId:"sc-qzdnog-0"})(["border-bottom:",";background-color:",";@media (max-width:767px){.euiFlexItem{margin-bottom:0 !important;}}"],(e=>e.theme.eui.euiBorderThin),(e=>e.theme.eui.euiPageBackgroundColor)),x=E.a.div.withConfig({displayName:"Wrapper",componentId:"sc-qzdnog-1"})(["max-width:",";margin-left:auto;margin-right:auto;padding-top:",";padding-left:",";padding-right:",";"],(e=>"number"==typeof e.maxWidth&&`${e.maxWidth||1200}px`||e.maxWidth),(e=>e.theme.eui.euiSizeXL),(e=>e.theme.eui.euiSizeM),(e=>e.theme.eui.euiSizeM)),S=E()(s.EuiTabs).withConfig({displayName:"Tabs",componentId:"sc-qzdnog-2"})(["top:1px;&:before{height:0px;}"]),k=Object(a.memo)((({leftColumn:e,rightColumn:t,rightColumnGrow:n})=>r.a.createElement(s.EuiFlexGroup,{alignItems:"center"},e?r.a.createElement(s.EuiFlexItem,null,e):null,t?r.a.createElement(s.EuiFlexItem,{grow:n},t):null))),M=({leftColumn:e,rightColumn:t,rightColumnGrow:n,topContent:i,tabs:a,maxWidth:o,tabsClassName:l,"data-test-subj":u})=>r.a.createElement(w,{"data-test-subj":u},r.a.createElement(x,{maxWidth:o},i,r.a.createElement(k,{leftColumn:e,rightColumn:t,rightColumnGrow:n}),r.a.createElement(s.EuiFlexGroup,null,a?r.a.createElement(s.EuiFlexItem,null,r.a.createElement(S,{className:l},a.map(((e,t)=>r.a.createElement(s.EuiTab,h()({},e,{key:`${e.id}-${t}`}),e.name))))):r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiSpacer,{size:"l"})))));function _(e){if(""===e)return[f.i18n.translate("xpack.fleet.newEnrollmentKeyForm.policyIdRequireErrorMessage",{defaultMessage:"Policy is required"})]}const A=({onClose:e,agentPolicies:t=[]})=>{const{notifications:n}=Object(m.Xc)(),i=Object(a.useMemo)((()=>t.filter((e=>!e.is_managed)).map((e=>({value:e.id,text:e.name})))),[t]),o=function(t,i,r){const[s,o]=Object(a.useState)(!1),l=Object(m.Cc)(""),u=Object(m.Cc)(t,_);return{isLoading:s,onSubmit:async t=>{if(t.preventDefault(),u.validate()&&l.validate()){o(!0);try{var i;const t=await Object(m.n)({name:l.value,policy_id:u.value});if(t.error)throw t.error;u.clear(),l.clear(),o(!1),null!==(i=t.data)&&void 0!==i&&i.item&&(a=t.data.item,e(a),n.toasts.addSuccess(f.i18n.translate("xpack.fleet.newEnrollmentKey.keyCreatedToasts",{defaultMessage:"Enrollment token created"})))}catch(e){o(!1),(e=>{n.toasts.addError(e,{title:"Error"})})(e)}}var a},policyIdInput:u,apiKeyNameInput:l}}(i.length>0?i[0].value:void 0),l=r.a.createElement(s.EuiForm,null,r.a.createElement("form",{onSubmit:o.onSubmit},r.a.createElement(s.EuiFormRow,{label:f.i18n.translate("xpack.fleet.newEnrollmentKey.nameLabel",{defaultMessage:"Token name"}),helpText:f.i18n.translate("xpack.fleet.newEnrollmentKey.helpText",{defaultMessage:"Token id will be used when this is left empty."})},r.a.createElement(s.EuiFieldText,h()({"data-test-subj":"createEnrollmentTokenNameField",name:"name",autoComplete:"off",placeholder:f.i18n.translate("xpack.fleet.newEnrollmentKey.placeholder",{defaultMessage:"Enter a token name"})},o.apiKeyNameInput.props))),r.a.createElement(s.EuiFormRow,h()({label:f.i18n.translate("xpack.fleet.newEnrollmentKey.policyLabel",{defaultMessage:"Policy"})},o.policyIdInput.formRowProps),r.a.createElement(s.EuiSelect,h()({"data-test-subj":"createEnrollmentTokenSelectField",required:!0},o.policyIdInput.props,{options:i})))));return r.a.createElement(s.EuiConfirmModal,{isLoading:o.isLoading,title:f.i18n.translate("xpack.fleet.newEnrollmentKey.modalTitle",{defaultMessage:"Create enrollment token"}),onCancel:()=>e(),cancelButtonText:f.i18n.translate("xpack.fleet.newEnrollmentKey.cancelButtonLabel",{defaultMessage:"Cancel"}),onConfirm:o.onSubmit,confirmButtonText:f.i18n.translate("xpack.fleet.newEnrollmentKey.submitButton",{defaultMessage:"Create enrollment token"}),confirmButtonDisabled:!o.policyIdInput.value},l)};var C=n(215),F=n(216),D=n(0);const T=({agentPolicies:e,children:t})=>{const{notifications:n}=Object(m.Xc)(),{agents:{enabled:i}}=Object(m.Mb)(),[o,u]=Object(a.useState)([]),[c,d]=Object(a.useState)(!1),[h,p]=Object(a.useState)(!1),[g,b]=Object(a.useState)(0),[y,v]=Object(a.useState)(!1),E=Object(a.useRef)(null),{canUseMultipleAgentPolicies:w}=Object(m.Lc)(),x=w&&e&&e.length>1,S=Object(a.useMemo)((()=>async()=>{var t;if(h||!i||!e)return;p(!0);const n=`(${e.map((e=>`${D.c}.policy_id:"${e.id}"`)).join(" or ")})`,a=await Object(m.E)({kuery:n,showInactive:!1});b((null===(t=a.data)||void 0===t?void 0:t.total)||0),p(!1)}),[e,i,h]),k=Object(a.useMemo)((()=>(e,t=(()=>{}))=>{if(!Array.isArray(e)||0===e.length)throw new Error("No package policies specified for deletion");d(!0),u(e),S(),E.current=t}),[S]),M=Object(a.useMemo)((()=>()=>{u([]),v(!1),p(!1),d(!1)}),[]),_=Object(a.useMemo)((()=>null==e?void 0:e.map((e=>e.name)).join(", ")),[e]),A=Object(a.useMemo)((()=>async()=>{v(!0);try{const{data:e}=await Object(m.w)({packagePolicyIds:o}),t=(null==e?void 0:e.filter((e=>e.success)))||[],i=(null==e?void 0:e.filter((e=>!e.success)))||[];if(t.length){const e=t.length>1?f.i18n.translate("xpack.fleet.deletePackagePolicy.successMultipleNotificationTitle",{defaultMessage:"Deleted {count} integrations",values:{count:t.length}}):f.i18n.translate("xpack.fleet.deletePackagePolicy.successSingleNotificationTitle",{defaultMessage:"Deleted integration ''{id}''",values:{id:t[0].name||t[0].id}});n.toasts.addSuccess(e)}if(i.length){const e=i.length>1?f.i18n.translate("xpack.fleet.deletePackagePolicy.failureMultipleNotificationTitle",{defaultMessage:"Error deleting {count} integrations",values:{count:i.length}}):f.i18n.translate("xpack.fleet.deletePackagePolicy.failureSingleNotificationTitle",{defaultMessage:"Error deleting integration ''{id}''",values:{id:i[0].id}});n.toasts.addDanger(e)}E.current&&E.current(t.map((e=>e.id)))}catch(e){n.toasts.addDanger(f.i18n.translate("xpack.fleet.deletePackagePolicy.fatalErrorNotificationTitle",{defaultMessage:"Error deleting integration"}))}M()}),[M,o,n.toasts]);return r.a.createElement(a.Fragment,null,t(k),c?r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.deleteMultipleTitle",defaultMessage:"Delete {count, plural, one {integration} other {# integrations}}?",values:{count:o.length}}),onCancel:M,onConfirm:A,cancelButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:y||h?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.loadingButtonLabel",defaultMessage:"Loading"}):r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete {agentPoliciesCount, plural, one {integration} other {integrations}}",values:{agentPoliciesCount:o.length}}),buttonColor:"danger",confirmButtonDisabled:y||h},h?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.loadingAgentsCountMessage",defaultMessage:"Checking affected agents"}):g&&e?r.a.createElement(r.a.Fragment,null,x&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiCallOut,{color:"warning",iconType:"alert",title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.warningMultipleAgentPolicies",defaultMessage:"This integration is shared by multiple agent policies."})}),r.a.createElement(s.EuiSpacer,{size:"m"})),r.a.createElement(s.EuiCallOut,{color:"danger",title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentsTitle",defaultMessage:"This action will affect {agentsCount} {agentsCount, plural, one {agent} other {agents}}.",values:{agentsCount:g}})},x?r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentPoliciesMessage",defaultMessage:"Fleet has detected that the related agent policies {toolTip} are already in use by some of your agents.",values:{toolTip:r.a.createElement(s.EuiIconTip,{type:"iInCircle",iconProps:{className:"eui-alignTop"},content:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.affectedAgentsMessageTooltips",defaultMessage:"{policies}",values:{policies:_}}),position:"top"})}}):r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.affectedAgentsMessage",defaultMessage:"Fleet has detected that {agentPolicyName} is already in use by some of your agents.",values:{agentPolicyName:r.a.createElement("strong",null,null===(C=e[0])||void 0===C?void 0:C.name)}})),r.a.createElement(s.EuiSpacer,{size:"l"})):null,!h&&r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.deletePackagePolicy.confirmModal.generalMessage",defaultMessage:"This action can not be undone. Are you sure you wish to continue?"})):null);var C};var I=n(3),P=n(203);const O=E()(s.EuiContextMenuItem).withConfig({displayName:"DangerEuiContextMenuItem",componentId:"sc-14uwxwe-0"})(["color:",";"],(e=>e.theme.eui.euiColorDangerText)),j=({agentPolicies:e,packagePolicy:t,showAddAgent:n,upgradePackagePolicyHref:i,defaultIsOpen:o=!1,from:u})=>{var c,d,h;const[f,g]=Object(a.useState)(!1),{getHref:b}=Object(m.Kc)(),y=Object(m.Ib)(),v=e.length>0?e[0]:void 0,E=y.integrations.writeIntegrationPolicies,w=v&&Object(I.z)(v)?y.fleet.addFleetServers:y.fleet.addAgents,x=Object(m.Gb)(),[S,k]=Object(a.useState)(o),M=Boolean(t.is_managed),_=Boolean(null==v?void 0:v.is_managed),A=n&&v&&!_,C=Object(a.useMemo)((()=>()=>g(!1)),[]),F=[...A?[r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"PackagePolicyActionsAddAgentItem",icon:"plusInCircle",onClick:()=>{k(!1),g(!0)},key:"addAgent",disabled:!w},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.addAgent",defaultMessage:"Add agent"}))]:[],r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"PackagePolicyActionsEditItem",disabled:!E||!v,icon:"pencil",href:`${b("edit_integration",{policyId:null!==(c=null==v?void 0:v.id)&&void 0!==c?c:"",packagePolicyId:t.id})}${u?`?from=${u}`:""}`,key:"packagePolicyEdit"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.editActionTitle",defaultMessage:"Edit integration"})),r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"PackagePolicyActionsUpgradeItem",disabled:!t.hasUpgrade||!E||!i,icon:"refresh",href:i,key:"packagePolicyUpgrade"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.upgradeActionTitle",defaultMessage:"Upgrade integration policy"}))];if(!v||!_){const n=E?O:s.EuiContextMenuItem;F.push(r.a.createElement(T,{agentPolicies:e,key:"packagePolicyDelete"},(e=>r.a.createElement(n,{"data-test-subj":"PackagePolicyActionsDeleteItem",disabled:!E,icon:"trash",onClick:()=>{e([t.id],(()=>{k(!1),x()}))}},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.deleteActionTitle",defaultMessage:"Delete integration"})))))}return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement(s.EuiPortal,null,r.a.createElement(P.a,{agentPolicy:v,onClose:C,isIntegrationFlow:!0,installedPackagePolicy:{name:(null==t||null===(d=t.package)||void 0===d?void 0:d.name)||"",version:(null==t||null===(h=t.package)||void 0===h?void 0:h.version)||""}})),r.a.createElement(p,{isManaged:M,isOpen:S,items:F,onChange:e=>k(e)}))};var B=n(217);const L=({button:e,isOpen:t,offset:n,closePopover:i})=>{const{docLinks:a}=Object(m.Xc)(),o=Object(v.useTheme)(),u={},c=Object(B.a)("ADD_AGENT_POPOVER");return void 0!==n&&(u.offset=n),c.isHidden?e:r.a.createElement(s.EuiTourStep,h()({},u,{content:r.a.createElement(s.EuiText,{size:"m",style:{width:302}},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.popoverBody",defaultMessage:"For integrations to work successfully, add {elasticAgent} to your host to collect data and send it to Elastic Stack. {learnMoreLink}",values:{elasticAgent:r.a.createElement("strong",null,"Elastic Agent"),learnMoreLink:r.a.createElement(s.EuiLink,{target:"_blank",external:!0,href:a.links.fleet.elasticAgent},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.documentationLink",defaultMessage:"Learn more about Elastic Agent."}))}})),zIndex:o.eui.euiZLevel1-1,isStepOpen:t,minWidth:300,onFinish:c.dismiss,step:1,stepsTotal:1,title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.title",defaultMessage:"Don't forget to add the agent to your host"}),anchorPosition:"downCenter",subtitle:null,"data-test-subj":"addAgentHelpPopover",footerAction:r.a.createElement(s.EuiLink,{onClick:()=>{c.dismiss(),i()}},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.addAgentHelpPopover.footActionButton",defaultMessage:"Got it"}))}),e)},N=({tooltip:e,...t})=>e?r.a.createElement(s.EuiToolTip,e,r.a.createElement(s.EuiButton,t)):r.a.createElement(s.EuiButton,t),R={minWidth:0},z={whiteSpace:"nowrap"},U={whiteSpace:"normal"},Z=Object(a.memo)((({policy:e,agent:t,direction:n="row",withDescription:i=!1})=>{const{getHref:a}=Object(m.Kc)(),{name:o,id:u,is_managed:c,description:d}=e,h=t?t.policy_revision:e.revision;return r.a.createElement(s.EuiFlexGroup,{direction:"column",gutterSize:"xs",wrap:!0},r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiFlexGroup,{direction:n,gutterSize:"column"===n?"none":"s",alignItems:"baseline",style:R,responsive:!1,justifyContent:"flexStart"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiFlexGroup,{style:R,gutterSize:"s",alignItems:"baseline",responsive:!1},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiLink,{style:U,href:a("policy_details",{policyId:u}),title:o||u,"data-test-subj":"agentPolicyNameLink"},o||u)),c&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiIconTip,{title:"Hosted agent policy",content:f.i18n.translate("xpack.fleet.agentPolicySummaryLine.hostedPolicyTooltip",{defaultMessage:"This policy is managed outside of Fleet. Most actions related to this policy are unavailable."}),type:"lock",size:"m",color:"subdued"})))),h&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{color:"subdued",size:"xs",style:z},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicySummaryLine.revisionNumber",defaultMessage:"rev. {revNumber}",values:{revNumber:h}}))))),i&&d&&r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiText,{color:"subdued",title:d,size:"xs"},d)))}));var K=n(267);const q=({onCancel:e,onConfirm:t,pkg:n,docLinks:i})=>{const a=n&&n.name&&n.version?f.i18n.translate("xpack.fleet.ConfirmForceInstallModal.calloutTitleWithPkg",{defaultMessage:"Integration {pkgName}-{pkgVersion} has failed verification",values:{pkgName:n.name,pkgVersion:n.version}}):f.i18n.translate("xpack.fleet.ConfirmForceInstallModal.calloutTitleNoPkg",{defaultMessage:"The integration has failed verification"});return r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement("span",{className:"eui-textBreakWord"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.title",defaultMessage:"Install unverified integration?"})),onCancel:e,onConfirm:t,cancelButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.confirmButtonLabel",defaultMessage:"Install anyway"}),buttonColor:"danger","data-test-subj":"confirmForceInstallModal"},r.a.createElement(s.EuiCallOut,{title:a,color:"warning",iconType:"warning",children:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.calloutBody",defaultMessage:"This integration contains an unsigned package of unknown authenticity and could contain malicious files. Learn more about {learnMoreLink}.",values:{learnMoreLink:r.a.createElement(s.EuiLink,{target:"_blank",external:!0,href:i.links.fleet.packageSignatures},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.learnMoreLink",defaultMessage:"package signatures"}))}})}))};var H=n(51),W=n(61),V=n(62);const G=({isDisabled:e,request:t,title:n,description:i,btnProps:o={}})=>{const u=Object(a.useRef)(),c=Object(m.Xc)(),d=Object(a.useCallback)((()=>{const e=c.overlays.openFlyout(Object(V.a)(r.a.createElement(W.KibanaContextProvider,{services:c},r.a.createElement($,{closeFlyout:()=>e.close(),request:t,title:n,description:i})),c));u.current=e}),[c,t,n,i]);return r.a.useEffect((()=>()=>{var e;null===(e=u.current)||void 0===e||e.close()}),[]),r.a.createElement(s.EuiButtonEmpty,h()({onClick:d,isDisabled:e},o),r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.apiRequestFlyout.openFlyoutButton",defaultMessage:"Preview API request"}))},$=({closeFlyout:e,title:t=f.i18n.translate("xpack.fleet.apiRequestFlyout.title",{defaultMessage:"Kibana API Request"}),request:n,description:i=f.i18n.translate("xpack.fleet.apiRequestFlyout.description",{defaultMessage:"Perform these request against Kibana"})})=>{const{docLinks:a,application:o,share:u}=Object(m.Xc)();return r.a.createElement(H.ViewApiRequestFlyout,{title:r.a.createElement(s.EuiFlexGroup,{alignItems:"baseline"},r.a.createElement(s.EuiFlexItem,{grow:!1},t),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"xs"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.apiRequestFlyout.devtoolsRequestDescription",defaultMessage:"{learnMore}",values:{learnMore:r.a.createElement(s.EuiLink,{href:a.links.fleet.api},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.apiRequestFlyout.learnMoreLink",defaultMessage:"Learn more about Fleet API"}))}})))),description:i,request:n,closeFlyout:e,application:o,urlService:u.url})},X={beta:f.i18n.translate("xpack.fleet.epm.releaseBadge.betaLabel",{defaultMessage:"Beta"}),preview:f.i18n.translate("xpack.fleet.epm.releaseBadge.technicalPreviewLabel",{defaultMessage:"Technical preview"}),rc:f.i18n.translate("xpack.fleet.epm.releaseBadge.releaseCandidateLabel",{defaultMessage:"Release Candidate"})},J={beta:f.i18n.translate("xpack.fleet.epm.releaseBadge.betaDescription",{defaultMessage:"This integration is not recommended for use in production environments."}),preview:f.i18n.translate("xpack.fleet.epm.releaseBadge.technicalPreviewDescription",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."}),rc:f.i18n.translate("xpack.fleet.epm.releaseBadge.releaseCandidateDescription",{defaultMessage:"This integration is not recommended for use in production environments."})},Y=({release:e})=>{if("ga"===e)return null;const t=X[e];return r.a.createElement(s.EuiToolTip,{position:"bottom",content:J[e],title:t},r.a.createElement(s.EuiBadge,null,t))},Q=({release:e})=>{if("ga"===e)return null;const t=X[e];return r.a.createElement(s.EuiToolTip,{display:"inlineBlock",content:J[e],title:t},r.a.createElement(s.EuiBadge,{color:"hollow"},t))},ee=({packageKey:e,isTourVisible:t,tourType:n,children:i,tourPosition:o,tourOffset:l})=>{const[u,c]=Object(a.useState)(t);Object(a.useEffect)((()=>{c(t)}),[t]);const d=((e,t)=>e.startsWith("endpoint")&&"addIntegrationButton"===t?{title:f.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointButton.title",{defaultMessage:"Add Elastic Defend"}),description:f.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointButton.description",{defaultMessage:"In this workflow, we'll be using Elastic Defend only to collect data for SIEM. Installing this will not conflict with existing endpoint security products."})}:e.startsWith("endpoint")&&"integrationCard"===t?{title:f.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointCard.title",{defaultMessage:"Select Elastic Defend"}),description:f.i18n.translate("xpack.fleet.guidedOnboardingTour.endpointCard.description",{defaultMessage:"The best way to get data quickly into your SIEM."})}:e.startsWith("kubernetes")&&"addIntegrationButton"===t?{title:f.i18n.translate("xpack.fleet.guidedOnboardingTour.kubernetesButton.tourTitle",{defaultMessage:"Add Kubernetes"}),description:f.i18n.translate("xpack.fleet.guidedOnboardingTour.kubernetesButton.tourDescription",{defaultMessage:"In just a few steps, add your data with our recommended defaults. You can change this later."})}:e.startsWith("kubernetes")&&"agentModalButton"===t?{title:f.i18n.translate("xpack.fleet.guidedOnboardingTour.agentModalButton.tourTitle",{defaultMessage:"Add Elastic Agent"}),description:f.i18n.translate("xpack.fleet.guidedOnboardingTour.agentModalButton.tourDescription",{defaultMessage:"In order to proceed with your setup, add Elastic Agent to your hosts now."})}:null)(e,n);return d?r.a.createElement(s.EuiTourStep,{content:r.a.createElement(s.EuiText,{size:"s"},d.description),isStepOpen:u,maxWidth:350,onFinish:()=>c(!1),step:1,stepsTotal:1,offset:l,title:d.title,anchorPosition:o||"rightUp",footerAction:r.a.createElement(s.EuiButtonEmpty,{onClick:()=>c(!1),size:"xs",color:"text",flush:"right"},f.i18n.translate("xpack.fleet.guidedOnboardingTour.nextButtonLabel",{defaultMessage:"Continue"})),isOpen:u,closePopover:()=>c(!1)},i):r.a.createElement(r.a.Fragment,null,i)};n(8);var te=n(340);const ne=[{id:"linuxOrMac",label:f.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.platformButtons.linuxOrMac",{defaultMessage:"Linux or Mac"})},{id:"windows",label:f.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.platformButtons.windows",{defaultMessage:"Windows"})}],ie=({token:e})=>{const[t,n]=Object(a.useState)("linuxOrMac"),i=Object(a.useMemo)((()=>(e=>({linuxOrMac:`sudo elastic-agent uninstall --uninstall-token ${e}`,windows:`C:\\"Program Files"\\Elastic\\Agent\\elastic-agent.exe uninstall --uninstall-token ${e}`}))(e)),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiButtonGroup,{options:ne,idSelected:t,onChange:e=>n(e),legend:f.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.platformSelectAriaLabel",{defaultMessage:"Platform"}),buttonSize:"m","data-test-subj":"uninstall-commands-flyout-platforms-btn-group"}),r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(s.EuiCodeBlock,{fontSize:"m",isCopyable:!0,paddingSize:"m","data-test-subj":"uninstall-commands-flyout-code-block"},i[t]))};var ae=n(341);const re=()=>{const{docLinks:e}=Object(m.Xc)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.firstParagraph",defaultMessage:"Uninstall Elastic Agent and unenroll in Fleet to stop communicating with the host."})),r.a.createElement("h3",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.subtitle",defaultMessage:"Uninstall Elastic Agent on your host"})),r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.description",defaultMessage:"Select the appropriate platform and run the command to uninstall Elastic Agent. Reuse the command to uninstall agents on more than one host. {learnMoreLink}",values:{learnMoreLink:r.a.createElement(s.EuiLink,{href:e.links.fleet.uninstallAgent,target:"_blank"},f.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.learnMore",{defaultMessage:"Learn more"}))}})))},se=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.endpointUninstallCommandFlyout.subtitle",defaultMessage:"Uninstall Elastic Defend integration on your host"})),r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.endpointUninstallCommandFlyout.description",defaultMessage:"Use the below uninstall command to uninstall Endpoint integration... [TODO]"}))),oe=({error:e})=>r.a.createElement(o,{title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.errorFetchingToken",defaultMessage:"Unable to fetch uninstall token"}),error:null!=e?e:f.i18n.translate("xpack.fleet.agentUninstallCommandFlyout.unknownError",{defaultMessage:"Unknown error"})}),le=({uninstallTokenId:e})=>{const t=Object(s.useEuiTheme)(),{isLoading:n,error:a,data:o}=Object(te.b)(e),u=null==o?void 0:o.item.token,c=null==o?void 0:o.item.policy_id,d=null==o?void 0:o.item.policy_name;return n?r.a.createElement(i.a,{size:"l"}):a||!u?r.a.createElement(oe,{error:a}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{token:u}),r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(de,{"data-test-subj":"uninstall-command-flyout-policy-id-hint",$_css:t.euiTheme.size.s},r.a.createElement("p",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.validForPolicyId",defaultMessage:"Valid for the following agent policy:"})),r.a.createElement("p",null,null!=d?d:r.a.createElement(ae.a,null)," (",r.a.createElement(s.EuiCode,null,c),")")))},ue=({policyId:e})=>{var t,n;const{isLoading:a,error:s,data:o}=Object(te.c)({policyId:e}),l=null==o||null===(t=o.items)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;return a?r.a.createElement(i.a,{size:"l"}):s||!l?r.a.createElement(oe,{error:s}):r.a.createElement(le,{uninstallTokenId:l})},ce=({policyId:e,uninstallTokenId:t,onClose:n,target:i})=>r.a.createElement(s.EuiFlyout,{onClose:n,"data-test-subj":"uninstall-command-flyout",maxWidth:g.v},r.a.createElement(s.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(s.EuiTitle,{size:"m"},r.a.createElement("h2",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentUninstallCommandFlyout.title",defaultMessage:"Uninstall agent"})))),r.a.createElement(s.EuiFlyoutBody,null,r.a.createElement(s.EuiText,null,"agent"===i?r.a.createElement(re,null):r.a.createElement(se,null)),r.a.createElement(s.EuiSpacer,{size:"l"}),t?r.a.createElement(le,{uninstallTokenId:t}):e?r.a.createElement(ue,{policyId:e}):null));var de=E()(s.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-cq9c1j-0"})(["p{margin-block-end:",";}"],(e=>e.$_css)),he=n(13),fe=n(342),pe=n(343),me=n(265);const ge=E()(s.EuiConfirmModal).withConfig({displayName:"StyledEuiConfirmModal",componentId:"sc-15foj5p-0"})(["min-width:448px;"]),be=({onClose:e,selectedAgentPolicies:t,packagePolicyId:n,onAgentPoliciesChange:i})=>{const o=t.map((e=>e.id)),[u,c]=Object(a.useState)(o),[d,h]=Object(a.useState)(!1),{notifications:p}=Object(m.Xc)(),{packageInfo:g,packagePolicy:b,savePackagePolicy:y}=Object(me.c)(n,{}),v=Object(a.useMemo)((()=>t.filter((e=>!u.find((t=>e.id===t)))).map((e=>e.name))),[t,u]),{agentPolicyMultiOptions:E,isLoading:w}=Object(pe.a)(g);return r.a.createElement(ge,{title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.confirmModalTitle",defaultMessage:"Manage agent policies"}),onCancel:()=>{e()},onConfirm:async()=>{h(!0);const{error:t}=await y({policy_ids:u});h(!1),t?409===t.statusCode?p.toasts.addError(t,{title:f.i18n.translate("xpack.fleet.manageAgentPolicies.failedNotificationTitle",{defaultMessage:"Error updating ''{packagePolicyName}''",values:{packagePolicyName:b.name}}),toastMessage:f.i18n.translate("xpack.fleet.manageAgentPolicies.failedConflictNotificationMessage",{defaultMessage:"Data is out of date. Refresh the page to get the latest policy."})}):p.toasts.addError(t,{title:f.i18n.translate("xpack.fleet.manageAgentPolicies.failedNotificationTitle",{defaultMessage:"Error updating ''{packagePolicyName}''",values:{packagePolicyName:b.name}})}):(i(),p.toasts.addSuccess({title:f.i18n.translate("xpack.fleet.manageAgentPolicies.updatedNotificationTitle",{defaultMessage:"Successfully updated ''{packagePolicyName}''",values:{packagePolicyName:b.name}}),"data-test-subj":"policyUpdateSuccessToast"})),e()},cancelButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.confirmModalCancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.confirmModalConfirmButtonLabel",defaultMessage:"Confirm"}),buttonColor:"primary",confirmButtonDisabled:0===u.length||d||Object(he.isEqual)(o,u),"data-test-subj":"manageAgentPoliciesModal"},r.a.createElement(s.EuiFlexGroup,{direction:"column",gutterSize:"m"},r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiText,null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.confirmModalDescription",defaultMessage:"Agent policies sharing this integration"}))),r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiText,{"data-test-subj":"integrationNameText"},r.a.createElement("b",null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.integrationName",defaultMessage:"Integration: "})),b.name)),r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiFormRow,{label:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.agentPoliciesLabel",defaultMessage:"Agent policies"})},r.a.createElement(fe.a,{isLoading:w,selectedPolicyIds:u,setSelectedPolicyIds:c,agentPolicyMultiOptions:E,selectedAgentPolicies:t}))),v.length>0&&r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiCallOut,{"data-test-subj":"confirmRemovePoliciesCallout",title:r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.calloutTitle",defaultMessage:"This action will update this integration"})},r.a.createElement(s.EuiText,{size:"s"},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.calloutBody",defaultMessage:"{removedPolicies} will no longer use this integration.",values:{removedPolicies:r.a.createElement("b",null,v.join(", "))}})))),r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiText,null,r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.manageAgentPolicies.confirmText",defaultMessage:"Are you sure you wish to continue?"})))))},ye={minWidth:0},ve={whiteSpace:"nowrap"},Ee=Object(a.memo)((({policies:e,direction:t="row",packagePolicyId:n,onAgentPoliciesChange:i})=>{const{getHref:o}=Object(m.Kc)(),[u,c]=Object(a.useState)(!1),[d,h]=Object(a.useState)(!1),p=Object(m.Ib)(),g=p.integrations.writeIntegrationPolicies&&p.fleet.allAgentPolicies,b=e[0],{name:y,id:v,is_managed:E,revision:w}=b,x=Object(a.useMemo)((()=>e.map((e=>({"data-test-subj":`policy-${e.id}`,label:e.name||e.id,href:o("policy_details",{policyId:e.id}),iconType:"dot",extraAction:{color:"text",iconType:e.is_managed?"lock":"",alwaysShow:!!e.is_managed,iconSize:"s","aria-label":"Hosted agent policy"},showToolTip:!!e.is_managed,toolTipText:f.i18n.translate("xpack.fleet.agentPolicySummaryLine.hostedPolicyTooltip",{defaultMessage:"This policy is managed outside of Fleet. Most actions related to this policy are unavailable."})})))),[o,e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiFlexGroup,{direction:"column",gutterSize:"xs"},r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiFlexGroup,{direction:t,gutterSize:"column"===t?"none":"s",alignItems:"baseline",style:ye,responsive:!1,justifyContent:"flexStart"},r.a.createElement(s.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},r.a.createElement(s.EuiFlexGroup,{style:ye,gutterSize:"s",alignItems:"baseline",responsive:!1},r.a.createElement(s.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},r.a.createElement(s.EuiLink,{className:"eui-textTruncate",href:o("policy_details",{policyId:v}),title:y||v,"data-test-subj":"agentPolicyNameLink"},y||v)),E&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiIconTip,{title:"Hosted agent policy",content:f.i18n.translate("xpack.fleet.agentPolicySummaryLine.hostedPolicyTooltip",{defaultMessage:"This policy is managed outside of Fleet. Most actions related to this policy are unavailable."}),type:"lock",size:"m",color:"subdued"})),w&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{color:"subdued",size:"xs",style:ve},r.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicySummaryLine.revisionNumber",defaultMessage:"rev. {revNumber}",values:{revNumber:w}}))),e.length>1&&r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiBadge,{color:"hollow","data-test-subj":"agentPoliciesNumberBadge",onClick:()=>c(!u),onClickAriaLabel:"Open agent policies popover"},"+",e.length-1),r.a.createElement(s.EuiPopover,{"data-test-subj":"agentPoliciesPopover",isOpen:u,closePopover:()=>c(!1),anchorPosition:"downCenter"},r.a.createElement(s.EuiPopoverTitle,null,f.i18n.translate("xpack.fleet.agentPolicySummaryLine.popover.title",{defaultMessage:"This integration is shared by"})),r.a.createElement("div",{style:{width:"280px"}},r.a.createElement(s.EuiListGroup,{listItems:x,color:"primary",size:"s",gutterSize:"none"})),r.a.createElement(s.EuiPopoverFooter,null,r.a.createElement(s.EuiButton,{fullWidth:!0,size:"s","data-test-subj":"agentPoliciesPopoverButton",onClick:()=>h(!0),isDisabled:!g},f.i18n.translate("xpack.fleet.agentPolicySummaryLine.popover.button",{defaultMessage:"Manage agent policies"})))))))))),d&&r.a.createElement(be,{onClose:()=>h(!1),onAgentPoliciesChange:i,selectedAgentPolicies:e,packagePolicyId:n}))}))},function(e,t,n){"use strict";n.d(t,"k",(function(){return s})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return L})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return I})),n.d(t,"g",(function(){return R.a})),n.d(t,"j",(function(){return R.e})),n.d(t,"h",(function(){return R.b})),n.d(t,"i",(function(){return R.c})),n.d(t,"f",(function(){return z})),n.d(t,"b",(function(){return U})),n.d(t,"l",(function(){return Z}));var i=n(1),a=n.n(i),r=n(6);const s=()=>a.a.createElement(r.EuiFlexGroup,{justifyContent:"spaceAround"},a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiLoadingSpinner,{size:"xl","data-test-subj":"loading"})));var o=n(4),l=n(12),u=n(17),c=n(117),d=n(16);const h=({onClose:e,agents:t})=>{const{notifications:n}=Object(u.sc)(),s=Array.isArray(t)&&1===t.length,h=Object(u.Mb)({page:1,perPage:d.t}),f=Object(i.useMemo)((()=>h.data?h.data.items.filter((e=>e&&!e.is_managed)):[]),[h.data]),[p,m]=Object(i.useState)(s?t[0].policy_id:void 0);Object(i.useEffect)((()=>{var e;!p&&f.length&&m(null===(e=f[0])||void 0===e?void 0:e.id)}),[p,f]);const[g,b]=Object(i.useState)(!1);return a.a.createElement(r.EuiConfirmModal,{"data-test-subj":"agentReassignPolicyModal",title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.flyoutTitle",defaultMessage:"Assign new agent policy"}),onCancel:e,onConfirm:async function(){try{if(b(!0),!p)throw new Error("No selected agent policy id");const i=s?await Object(u.R)(t[0].id,{policy_id:p}):await Object(u.U)({policy_id:p,agents:Array.isArray(t)?t.map((e=>e.id)):t,includeInactive:!0});if(i.error)throw i.error;b(!1);const a=o.i18n.translate("xpack.fleet.agentReassignPolicy.successSingleNotificationTitle",{defaultMessage:"Reassigning agent policy"});n.toasts.addSuccess(a),e()}catch(e){b(!1),n.toasts.addError(e,{title:"Unable to reassign agent policy"})}},cancelButtonText:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonDisabled:g||s&&p===t[0].policy_id,confirmButtonText:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.continueButtonLabel",defaultMessage:"Assign policy"}),buttonColor:"primary"},a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.flyoutDescription",defaultMessage:"Choose a new agent policy to assign the selected {count, plural, one {agent} other {agents}} to.",values:{count:s?1:0}})),a.a.createElement(r.EuiFlexGroup,null,a.a.createElement(r.EuiFlexItem,null,a.a.createElement(r.EuiFormRow,{fullWidth:!0,label:o.i18n.translate("xpack.fleet.agentReassignPolicy.selectPolicyLabel",{defaultMessage:"Agent policy"})},a.a.createElement(r.EuiSelect,{fullWidth:!0,isLoading:h.isLoading,options:f.map((e=>({value:e.id,text:e.name}))),value:p,onChange:e=>m(e.target.value)})))),a.a.createElement(r.EuiSpacer,{size:"l"}),a.a.createElement(r.EuiFlexGroup,null,a.a.createElement(r.EuiFlexItem,null,p&&a.a.createElement(c.e,{agentPolicyId:p}))))};var f=n(58),p=n.n(f),m=n(105),g=n(60),b=n(270),y=n(25),v=n.n(y),E=n(23),w=n.n(E),x=n(79),S=n.n(x),k=n(5),M=n(70);const _="8.3.0",A=["8.4.0","8.3.2","8.3.1","8.3.0","8.2.3","8.2.2","8.2.1","8.2.0","8.1.3","8.1.2","8.1.1","8.1.0","8.0.1","8.0.0","7.17.5","7.17.4","7.17.3","7.17.2","7.17.1","7.17.0"],C=[0,1,2,4,8,12,24,48];var F=n(55),D=n.n(F);const T=e=>{var t;return null===(t=e[0])||void 0===t?void 0:t.value},I=({onClose:e,agents:t,agentCount:n,isScheduled:s=!1,isUpdating:c=!1})=>{var d,h;const{notifications:f,docLinks:p}=Object(u.sc)(),m=Object(u.hc)()||"",b=Object(u.Cb)(),[y,E]=Object(i.useState)(!1),[x,F]=Object(i.useState)(),[I,O]=Object(i.useState)([]),j=Array.isArray(t)&&1===t.length,B=n<=10,L=""===t,[N,R]=Object(i.useState)(0),[z,U]=Object(i.useState)(""),[Z,K]=Object(i.useState)([]),q=`status:updating AND upgrade_started_at:* AND NOT upgraded_at:* AND upgrade_started_at < now-${g.AGENT_UPDATING_TIMEOUT_HOURS}h`,H=Object(i.useMemo)((()=>({label:"",value:""})),[]),[W,V]=Object(i.useState)(!1);Object(i.useEffect)((()=>{c&&(async e=>{let t;if(Array.isArray(e)&&e.length>0){if(0===e.length)return;const t=e.filter((e=>Object(g.isStuckInUpdating)(e))),n=t.length;return R(n),void U(t)}t="string"==typeof e&&""!==e?[`(${e})`,q].join(" AND "):q,U(t);try{var n,i,a;const e=await Object(u.x)({kuery:t});R(null!==(n=null==e||null===(i=e.data)||void 0===i||null===(a=i.results)||void 0===a?void 0:a.updating)&&void 0!==n?n:0)}catch(e){return}})(t)}),[c,U,q,t]),Object(i.useEffect)((()=>{(async()=>{try{var e;const t=await Object(u.B)(),n=null!=t&&null!==(e=t.data)&&void 0!==e&&e.items?t.data.items:A;O(n)}catch(e){return}})()}),[m]),Object(i.useEffect)((()=>{(async()=>{try{const{allFleetServerAgents:e}=await Object(u.C)();K(e)}catch(e){return}})()}),[]);const G=Object(i.useMemo)((()=>{if(!Array.isArray(t)){if("string"==typeof t)return;return Object(k.F)(I)}const e=t.map((e=>{var t,n,i;return null===(t=e.local_metadata)||void 0===t||null===(n=t.elastic)||void 0===n||null===(i=n.agent)||void 0===i?void 0:i.version}));return Object(k.F)(e)}),[t,I]),$=Object(i.useMemo)((()=>{const e=(G?I.filter((e=>v()(e,G)||Object(M.b)(e,G,!1))):I).map((e=>({label:e,value:e})));return 0===e.length?[H]:e}),[I,G,H]),X=!I||""===(null===(d=$[0])||void 0===d?void 0:d.value),J=C.map((e=>({label:0===e?o.i18n.translate("xpack.fleet.upgradeAgents.noMaintenanceWindowOption",{defaultMessage:"Immediately"}):o.i18n.translate("xpack.fleet.upgradeAgents.hourLabel",{defaultMessage:"{option} {count, plural, one {hour} other {hours}}",values:{option:e,count:1===e}}),value:0===e?0:3600*e}))),Y=[{label:m,value:m}],[Q,ee]=Object(i.useState)(Y),[te,ne]=Object(i.useState)(""),ie=Object(u.xb)();Object(i.useEffect)((()=>{ie&&ee([{label:ie,value:ie}])}),[ie]);const ae=Object(i.useMemo)((()=>{var e,n;return j&&null!==(e=Q[0])&&void 0!==e&&e.value&&!Object(M.f)(t[0],Q[0].value)?`The selected agent is not upgradeable: ${Object(M.c)(t[0],ie,Q[0].value)}`:null!==(n=Q[0])&&void 0!==n&&n.value&&!Object(k.T)(Q[0].value,Z)?`Please choose another version. ${Object(k.C)(Q[0].value,Z)}`:void 0}),[t,Z,j,ie,Q]),re=Object(i.useMemo)((()=>{if(Q[0].value)return S()(Q[0].value)?void 0:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.invalidSemverError",defaultMessage:"Invalid version, please use a valid semver version, e.g. 8.14.0"})}),[Q]),[se,oe]=Object(i.useState)([B?J[0]:J[1]]),{startDatetime:le,onChangeStartDateTime:ue,initialDatetime:ce,minTime:de,maxTime:he}=function(e){const t=Object(i.useMemo)((()=>D()(e)),[e]),[n,a]=Object(i.useState)(t),r=Object(i.useMemo)((()=>{if(n.isSame(t,"day"))return t.clone()}),[n,t]),s=Object(i.useMemo)((()=>{if(n.isSame(t,"day"))return t.clone().endOf("day")}),[n,t]),o=Object(i.useCallback)((e=>{e&&(e.isBefore(t)?a(t):a(e))}),[t]);return{startDatetime:n,initialDatetime:t,onChangeStartDateTime:o,minTime:r,maxTime:s}}(),fe=j&&Z.map((e=>e.id)).includes(t[0].id),pe=Object(i.useMemo)((()=>!(!y&&c&&j&&Object(g.isStuckInUpdating)(t[0]))&&(y||c&&0===N||!Q[0].value||j&&!Object(M.f)(t[0],Q[0].value)||j&&!fe&&!Object(k.T)(Q[0].value,Z))),[t,Z,j,y,c,Q,N,fe]);return a.a.createElement(r.EuiConfirmModal,{"data-test-subj":"agentUpgradeModal",title:a.a.createElement(a.a.Fragment,null,j?c?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.restartUpgradeSingleTitle",defaultMessage:"Restart upgrade"}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeSingleTitle",defaultMessage:"Upgrade agent"}):s?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.scheduleUpgradeMultipleTitle",defaultMessage:"Schedule upgrade for {isAllAgents, select, true {all selected agents} other {{count, plural, one {agent} other {# agents}}} }",values:{isAllAgents:L,count:n}}):c?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.restartUpgradeMultipleTitle",defaultMessage:"Restart upgrade on {updating} out of {isAllAgents, select, true {all agents} other {{count, plural, one {agent} other {# agents}}} } stuck in updating",values:{isAllAgents:L,count:n,updating:N}}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeMultipleTitle",defaultMessage:"Upgrade {isAllAgents, select, true {all selected agents} other {{count, plural, one {agent} other {# agents}}} }",values:{isAllAgents:L,count:n}})),onCancel:e,onConfirm:async function(){var i;const a=T(Q),r={rollout_duration_seconds:se.length>0&&(null===(i=se[0])||void 0===i?void 0:i.value)>0?se[0].value:void 0,start_time:le.toISOString()};try{E(!0);const n=e=>Array.isArray(e)?e.map((e=>e.id)):e,{error:i}=j&&!s&&Object(M.f)(t[0],Q[0].value)?await Object(u.T)(t[0].id,{version:a,force:c}):await Object(u.X)({version:a,agents:n(c?z:t),force:c,includeInactive:!0,...r});if(i)throw 400===(null==i?void 0:i.statusCode)&&F(null==i?void 0:i.message),i;E(!1),f.toasts.addSuccess(o.i18n.translate("xpack.fleet.upgradeAgents.successNotificationTitle",{defaultMessage:"Upgrading agent(s)"})),e()}catch(e){E(!1),f.toasts.addError(e,{title:o.i18n.translate("xpack.fleet.upgradeAgents.fatalErrorNotificationTitle",{defaultMessage:"Error upgrading {isAllAgents, select,\n            true {all selected agents}\n            other {{count, plural, one {agent} other {# agents}}}\n          }",values:{isAllAgents:L,count:n}})})}},cancelButtonText:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonDisabled:pe,confirmButtonText:j?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.confirmSingleButtonLabel",defaultMessage:"Upgrade agent"}):s?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.confirmScheduleMultipleButtonLabel",defaultMessage:"Schedule"}):c?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.restartConfirmMultipleButtonLabel",defaultMessage:"Restart upgrade {isAllAgents, select, true {all selected agents} other {{count, plural, one {agent} other {# agents}}} }",values:{isAllAgents:"boolean"==typeof N,count:N}}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.confirmMultipleButtonLabel",defaultMessage:"Upgrade {isAllAgents, select, true {all selected agents} other {{count, plural, one {agent} other {# agents}}} }",values:{isAllAgents:L,count:n}})},a.a.createElement("p",null,X?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.noVersionsText",defaultMessage:"No newer versions found to upgrade to. You may type in a custom version."}):j?ae?a.a.createElement(P,{warningMessage:ae}):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeSingleDescription",defaultMessage:"This action will upgrade the agent running on ''{hostName}''{version}. This action can not be undone. Are you sure you wish to continue?",values:{hostName:t[0].local_metadata.host.hostname,version:Q[0].value?" to version "+T(Q):""}})),c&&a.a.createElement("p",null,a.a.createElement("em",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeSingleTimeout",defaultMessage:"Note that you may only restart an upgrade every {minutes} minutes to ensure that the upgrade will not be rolled back. {learnMore}",values:{minutes:k.a,learnMore:a.a.createElement("div",null,a.a.createElement(r.EuiLink,{href:p.links.fleet.upgradeElasticAgent,target:"_blank"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.upgradeAgentsDocLink",defaultMessage:"Learn more"})))}})))):ae?a.a.createElement(P,{warningMessage:ae}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.upgradeMultipleDescription",defaultMessage:"This action will upgrade multiple agents{version}. This action can not be undone. Are you sure you wish to continue?",values:{version:Q[0].value?" to version "+T(Q):""}})),a.a.createElement(r.EuiFormRow,{label:o.i18n.translate("xpack.fleet.upgradeAgents.chooseVersionLabel",{defaultMessage:"Upgrade version"}),fullWidth:!0,isInvalid:W||!!re,error:W?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.versionRequiredText",defaultMessage:"Version is required"}):re||void 0},X?a.a.createElement(r.EuiFieldText,{fullWidth:!0,placeholder:"Enter version",value:te,"data-test-subj":"agentUpgradeModal.VersionInput",onChange:e=>{const t=e.target.value;ne(t),ee([{label:t,value:t}])},isInvalid:!!re}):a.a.createElement(r.EuiComboBox,{"data-test-subj":"agentUpgradeModal.VersionCombobox",fullWidth:!0,singleSelection:{asPlainText:!0},options:$,isClearable:!0,selectedOptions:Q,onChange:e=>{e.length?(ee(e),V(!1)):(ee([H]),V(!0))},onCreateOption:null!=b&&null!==(h=b.internal)&&void 0!==h&&h.onlyAllowAgentUpgradeToKnownVersions?void 0:e=>{const t=e.trim();ee([{label:t,value:t}]),V(!t)},customOptionText:"Use custom agent version {searchValue} (not recommended)",isInvalid:W})),!j&&Array.isArray(t)&&t.some((e=>{var t,n,i,a;return!!(a=null===(t=e.local_metadata)||void 0===t||null===(n=t.elastic)||void 0===n||null===(i=n.agent)||void 0===i?void 0:i.version)&&w()(a,_)}))?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiCallOut,{color:"warning",title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.warningCallout",defaultMessage:"Rolling upgrades are only available for Elastic Agent versions {version} and higher",values:{version:a.a.createElement("strong",null,_)}})})):null,s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiFormRow,{label:o.i18n.translate("xpack.fleet.upgradeAgents.startTimeLabel",{defaultMessage:"Scheduled date and time"}),fullWidth:!0},a.a.createElement(r.EuiDatePicker,{"data-test-subj":"agentUpgradeModal.startTimeDatePicker",fullWidth:!0,required:!0,showTimeSelect:!0,selected:le,minDate:ce,minTime:de,maxTime:he,onChange:ue}))),a.a.createElement(r.EuiSpacer,{size:"m"}),j?null:a.a.createElement(r.EuiFormRow,{label:a.a.createElement(r.EuiFlexGroup,{gutterSize:"s"},a.a.createElement(r.EuiFlexItem,{grow:!1},o.i18n.translate("xpack.fleet.upgradeAgents.rolloutPeriodLabel",{defaultMessage:"Rollout period"})),a.a.createElement(r.EuiSpacer,{size:"xs"}),a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiToolTip,{position:"top",content:o.i18n.translate("xpack.fleet.upgradeAgents.rolloutPeriodTooltip",{defaultMessage:"Define the rollout period for upgrades to your Elastic Agents. Any agents that are offline during this period will be upgraded when they come back online."})},a.a.createElement(r.EuiIcon,{type:"iInCircle"})))),fullWidth:!0},a.a.createElement(r.EuiComboBox,{"data-test-subj":"agentUpgradeModal.MaintenanceCombobox",fullWidth:!0,isClearable:!1,singleSelection:{asPlainText:!0},options:J,selectedOptions:se,onChange:e=>{e.length&&oe(e)}})),x?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"s"}),a.a.createElement(r.EuiCallOut,{color:"danger",title:o.i18n.translate("xpack.fleet.upgradeAgents.warningCalloutErrors",{defaultMessage:"Error upgrading the selected {count, plural, one {agent} other {{count} agents}}",values:{count:j}})},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.warningCalloutErrorMessage",defaultMessage:"{originalMessage}. {learnMore}",values:{originalMessage:x,learnMore:a.a.createElement("div",null,a.a.createElement(r.EuiLink,{href:p.links.fleet.upgradeElasticAgent,target:"_blank"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.upgradeAgentsDocLink",defaultMessage:"Learn more"})))}}))):null)},P=({warningMessage:e})=>{const{docLinks:t}=Object(u.sc)();return a.a.createElement(r.EuiCallOut,{"data-test-subj":"agentUpgradeModal.notUpgradeableCallout",color:"warning",iconType:"warning",title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.notUpgradeable",defaultMessage:"Warning"})},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.upgradeAgents.notUpgradeableMsg",defaultMessage:"{reason} {learnMore}",values:{reason:e,learnMore:a.a.createElement("div",null,a.a.createElement(r.EuiLink,{href:t.links.fleet.upgradeElasticAgent,target:"_blank"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.upgradeAgentsDocLink",defaultMessage:"Learn more"})))}}))},O={Healthy:a.a.createElement(r.EuiBadge,{color:"success"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.healthyStatusText",defaultMessage:"Healthy"})),Offline:a.a.createElement(r.EuiBadge,{color:"default"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.offlineStatusText",defaultMessage:"Offline"})),Inactive:a.a.createElement(r.EuiBadge,{color:m.euiLightVars.euiColorDarkShade},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.inactiveStatusText",defaultMessage:"Inactive"})),Unenrolled:a.a.createElement(r.EuiBadge,{color:m.euiLightVars.euiColorDisabled},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.unenrolledStatusText",defaultMessage:"Unenrolled"})),Unhealthy:a.a.createElement(r.EuiBadge,{color:"warning"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.unhealthyStatusText",defaultMessage:"Unhealthy"})),Updating:a.a.createElement(r.EuiBadge,{color:"primary"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.updatingStatusText",defaultMessage:"Updating"}))};function j(e){switch(e){case"error":case"degraded":return O.Unhealthy;case"inactive":return O.Inactive;case"offline":return O.Offline;case"unenrolling":case"enrolling":case"updating":return O.Updating;case"unenrolled":return O.Unenrolled;default:return O.Healthy}}const B=p()(r.EuiCallOut).withConfig({displayName:"WrappedEuiCallOut",componentId:"sc-kv833j-0"})(["white-space:wrap !important;"]),L=({agent:e,fromDetails:t})=>{const{last_checkin:n,last_checkin_message:s}=e,o=new Date(n||0).getTime(),c=s?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.checkinMessageText",defaultMessage:"Last checkin message: {lastCheckinMessage}",values:{lastCheckinMessage:s}}):null,d=o?a.a.createElement(a.a.Fragment,null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.checkInTooltipText",defaultMessage:"Last checked in {lastCheckIn}",values:{lastCheckIn:a.a.createElement(l.FormattedRelative,{value:o})}})):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.noCheckInTooltipText",defaultMessage:"Never checked in"}),h=Object(i.useMemo)((()=>{if(t&&"offline"===e.status)return Object(g.getPreviousAgentStatusForOfflineAgents)(e)}),[t,e]),[f,p]=Object(i.useState)(!1),m=Object(b.b)(),{docLinks:y}=Object(u.sc)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiToolTip,{position:"top",content:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,d),a.a.createElement("p",null,c),Object(g.isStuckInUpdating)(e)?Object(g.isAgentInFailedUpgradeState)(e)?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.failedUpgradeTooltipText",defaultMessage:"Agent upgrade failed. Consider restarting the upgrade."}):a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.restartUpgradeTooltipText",defaultMessage:"Agent may be stuck updating. Consider restarting the upgrade."})):null)},Object(g.isStuckInUpdating)(e)&&!t?a.a.createElement("div",{className:"eui-textNoWrap"},j(e.status),"",a.a.createElement(r.EuiIcon,{type:"warning",color:"warning"})):a.a.createElement(a.a.Fragment,null,j(e.status),h?j(h):null)),t&&Object(g.isStuckInUpdating)(e)?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(B,{iconType:"warning",size:"m",color:"warning",title:Object(g.isAgentInFailedUpgradeState)(e)?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.failedUpgradeTitle",defaultMessage:"Agent upgrade is stuck in failed state."}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.stuckUpdatingTitle",defaultMessage:"Agent may be stuck updating."})},a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.stuckUpdatingText",defaultMessage:"{stuckMessage} Consider restarting the upgrade. {learnMore}",values:{stuckMessage:Object(g.isAgentInFailedUpgradeState)(e)?"Agent upgrade failed.":"Agent has been updating for a while, and may be stuck.",learnMore:a.a.createElement("div",null,a.a.createElement(r.EuiLink,{href:y.links.fleet.upgradeElasticAgent,target:"_blank"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.upgradeAgentsDocLink",defaultMessage:"Learn more"})))}})),a.a.createElement(r.EuiButton,{color:"warning",onClick:()=>{p(!0)},"data-test-subj":"restartUpgradeBtn"},a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentHealth.restartUpgradeBtn",defaultMessage:"Restart upgrade"})))):null,f&&a.a.createElement(r.EuiPortal,null,a.a.createElement(I,{agents:[e],agentCount:1,onClose:()=>{p(!1),m()},isUpdating:!0})))},N=({onClose:e,agents:t,agentCount:n,useForceUnenroll:s,hasFleetServer:c=!1})=>{const{notifications:d}=Object(u.sc)(),[h,f]=Object(i.useState)(s||!1),[p,m]=Object(i.useState)(!1),g=Array.isArray(t)&&1===t.length;return a.a.createElement(r.EuiConfirmModal,{"data-test-subj":"agentUnenrollModal",title:g?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.deleteSingleTitle",defaultMessage:"Unenroll agent"}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.forceDeleteMultipleTitle",defaultMessage:"Unenroll {count} agents",values:{count:n}}),onCancel:e,onConfirm:async function(){try{m(!0);const{error:n}=g?await Object(u.S)(t[0].id,{revoke:h}):await Object(u.W)({agents:Array.isArray(t)?t.map((e=>e.id)):t,revoke:h,includeInactive:!0});if(n)throw n;if(m(!1),h){const e=g?o.i18n.translate("xpack.fleet.unenrollAgents.successForceSingleNotificationTitle",{defaultMessage:"Agent unenrolled"}):o.i18n.translate("xpack.fleet.unenrollAgents.successForceMultiNotificationTitle",{defaultMessage:"Agents unenrolled"});d.toasts.addSuccess(e)}else{const e=g?o.i18n.translate("xpack.fleet.unenrollAgents.successSingleNotificationTitle",{defaultMessage:"Unenrolling agent"}):o.i18n.translate("xpack.fleet.unenrollAgents.successMultiNotificationTitle",{defaultMessage:"Unenrolling agents"});d.toasts.addSuccess(e)}e()}catch(e){m(!1),d.toasts.addError(e,{title:o.i18n.translate("xpack.fleet.unenrollAgents.fatalErrorNotificationTitle",{defaultMessage:"Error unenrolling {count, plural, one {agent} other {agents}}",values:{count:n}})})}},cancelButtonText:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonDisabled:p,confirmButtonText:g?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.confirmSingleButtonLabel",defaultMessage:"Unenroll agent"}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.confirmMultipleButtonLabel",defaultMessage:"Unenroll {count} agents",values:{count:n}}),buttonColor:"danger"},a.a.createElement("p",null,c&&g?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiCallOut,{title:o.i18n.translate("xpack.fleet.unenrollAgents.unenrollFleetServerTitle",{defaultMessage:"This agent is running Fleet Server"}),color:"warning",iconType:"warning"},a.a.createElement("p",null,a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.unenrollFleetServerDescription",defaultMessage:"Unenrolling this agent will disconnect a Fleet Server and prevent agents from sending data if no other Fleet Servers exist."}))),a.a.createElement(r.EuiSpacer,null)):null,g?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.deleteSingleDescription",defaultMessage:'This action will remove the selected agent running on "{hostName}" from Fleet. Any data that was already sent by the agent will not be deleted. This action cannot be undone.',values:{hostName:t[0].local_metadata.host.hostname}}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.deleteMultipleDescription",defaultMessage:"This action will remove multiple agents from Fleet and prevent new data from being ingested. Any data that was already sent by these agents will not be affected. This action cannot be undone."})),a.a.createElement(r.EuiFormFieldset,{legend:{children:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.forceUnenrollLegendText",defaultMessage:"Force unenroll {count, plural, one {agent} other {agents}}",values:{count:n}})}},a.a.createElement(r.EuiCheckbox,{id:"fleetForceUnenrollAgents",label:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.unenrollAgents.forceUnenrollCheckboxLabel",defaultMessage:"Remove {count, plural, one {agent} other {agents}} immediately. Do not wait for agent to send any last data.",values:{count:n}}),checked:h,onChange:e=>f(e.target.checked),disabled:s})))};var R=n(262);let z=function(e){return e.INITIAL="initial",e.CREATED="created",e.FAILED="failed",e}({});const U=({createState:e})=>{var t;return a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),e.status===z.CREATED?a.a.createElement(r.EuiCallOut,{"data-test-subj":"agentPolicyCreateStatusCallOut",title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicyCreation.created",defaultMessage:"Agent policy created"}),color:"success",iconType:"check"}):a.a.createElement(r.EuiCallOut,{"data-test-subj":"agentPolicyCreateStatusCallOut",title:a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentPolicyCreation.failed",defaultMessage:"Agent policy creation failed"}),color:"danger",iconType:"cross"},null!==(t=e.errorMessage)&&void 0!==t?t:null))},Z=({agentPolicy:e})=>{var t;const n=null==e||null===(t=e.monitoring_enabled)||void 0===t?void 0:t.includes("metrics");return a.a.createElement(r.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiText,{size:"s",color:"subdued"},"N/A")),a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiIconTip,{type:"iInCircle",content:n?a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agentList.metricsNotAvailableOtherReason",defaultMessage:"That metric is not available, you may not have the correct permission to retrieve them."}):a.a.createElement(l.FormattedMessage,{id:"xpack.fleet.agent.metricsNotAvailableMonitoringNotEnabled",defaultMessage:"Agent monitoring is not enabled for this agent policy. Visit agent policy settings to enable monitoring."}),color:"subdued"})))}},function(e,t,n){"use strict";var i=n(3);n.d(t,"a",(function(){return i.b})),n.d(t,"b",(function(){return i.c})),n.d(t,"c",(function(){return i.i})),n.d(t,"d",(function(){return i.r})),n.d(t,"e",(function(){return i.s})),n.d(t,"f",(function(){return i.u})),n.d(t,"g",(function(){return i.y})),n.d(t,"h",(function(){return i.z}))},function(e,t,n){"use strict";var i=n(135),a=n(118);function r(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function o(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=a,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var i=0;i<e.length;i++){var a=e.charCodeAt(i),r=a>>8,s=255&a;r?n.push(r,s):n.push(s)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n].toString(16));return t},t.htonl=r,t.toHex32=function(e,t){for(var n="",i=0;i<e.length;i++){var a=e[i];"little"===t&&(a=r(a)),n+=o(a.toString(16))}return n},t.zero2=s,t.zero8=o,t.join32=function(e,t,n,a){var r=n-t;i(r%4==0);for(var s=new Array(r/4),o=0,l=t;o<s.length;o++,l+=4){var u;u="big"===a?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],s[o]=u>>>0}return s},t.split32=function(e,t){for(var n=new Array(4*e.length),i=0,a=0;i<e.length;i++,a+=4){var r=e[i];"big"===t?(n[a]=r>>>24,n[a+1]=r>>>16&255,n[a+2]=r>>>8&255,n[a+3]=255&r):(n[a+3]=r>>>24,n[a+2]=r>>>16&255,n[a+1]=r>>>8&255,n[a]=255&r)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,i){return e+t+n+i>>>0},t.sum32_5=function(e,t,n,i,a){return e+t+n+i+a>>>0},t.sum64=function(e,t,n,i){var a=e[t],r=i+e[t+1]>>>0,s=(r<i?1:0)+n+a;e[t]=s>>>0,e[t+1]=r},t.sum64_hi=function(e,t,n,i){return(t+i>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,i){return t+i>>>0},t.sum64_4_hi=function(e,t,n,i,a,r,s,o){var l=0,u=t;return l+=(u=u+i>>>0)<t?1:0,l+=(u=u+r>>>0)<r?1:0,e+n+a+s+(l+=(u=u+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,n,i,a,r,s,o){return t+i+r+o>>>0},t.sum64_5_hi=function(e,t,n,i,a,r,s,o,l,u){var c=0,d=t;return c+=(d=d+i>>>0)<t?1:0,c+=(d=d+r>>>0)<r?1:0,c+=(d=d+o>>>0)<o?1:0,e+n+a+s+l+(c+=(d=d+u>>>0)<u?1:0)>>>0},t.sum64_5_lo=function(e,t,n,i,a,r,s,o,l,u){return t+i+r+o+u>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},function(e,t,n){"use strict";n.d(t,"g",(function(){return i.o})),n.d(t,"d",(function(){return K})),n.d(t,"c",(function(){return V})),n.d(t,"f",(function(){return Y})),n.d(t,"a",(function(){return ee})),n.d(t,"e",(function(){return ne})),n.d(t,"h",(function(){return ie})),n.d(t,"b",(function(){return se}));var i=n(117),a=n(1),r=n.n(a),s=n(6),o=n(12),l=n(58),u=n.n(l),c=n(4),d=n(192),h=n(0);const f=d.z.string().refine((e=>e.match(/^(\d+[s|m|h|d])?$/)),{message:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.downloadTimeoutValidationMessage",{defaultMessage:"Must be a string with a time unit, e.g. 30s, 5m, 2h, 1d"})}),p=[{name:"agent.limits.go_max_procs",title:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.goMaxProcsTitle",{defaultMessage:"Limit CPU usage"}),description:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.goMaxProcsDescription",{defaultMessage:"Limits the maximum number of CPUs that can be executing simultaneously."}),learnMoreLink:"https://www.elastic.co/guide/en/fleet/current/agent-policy.html#agent-policy-limit-cpu",api_field:{name:"agent_limits_go_max_procs"},schema:d.z.number().int().min(0).default(0)},{name:"agent.download.timeout",hidden:!0,title:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.downloadTimeoutTitle",{defaultMessage:"Agent binary download timeout"}),description:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.downloadTimeoutDescription",{defaultMessage:"Timeout for downloading the agent binary."}),learnMoreLink:"https://www.elastic.co/guide/en/fleet/current/enable-custom-policy-settings.html#configure-agent-download-timeout",api_field:{name:"agent_download_timeout"},schema:f.default("2h")},{name:"agent.download.target_directory",hidden:!0,api_field:{name:"agent_download_target_directory"},title:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentDownloadTargetDirectoryTitle",{defaultMessage:"Agent binary target directory"}),description:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentDownloadTargetDirectoryDescription",{defaultMessage:"The disk path to which the agent binary will be downloaded."}),learnMoreLink:"https://www.elastic.co/guide/en/fleet/current/elastic-agent-standalone-download.html",schema:d.z.string()},{name:"agent.logging.metrics.period",hidden:!0,api_field:{name:"agent_logging_metrics_period"},title:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentLoggingMetricsPeriodTitle",{defaultMessage:"Agent logging metrics period"}),description:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentLoggingMetricsPeriodDescription",{defaultMessage:"The frequency of logging the internal Elastic Agent metrics."}),learnMoreLink:"https://www.elastic.co/guide/en/fleet/current/elastic-agent-standalone-logging-config.html#elastic-agent-standalone-logging-settings",schema:f.default("30s")},{name:"agent.monitoring.http",api_field:{name:"agent_monitoring_http"},title:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentMonitoringHttpTitle",{defaultMessage:"HTTP monitoring endpoint"}),description:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentMonitoringHttpDescription",{defaultMessage:"Enables a liveness HTTP endpoint that returns the overall health of Elastic Agent. This can be used by Kubernetes to restart the container, for example."}),learnMoreLink:"https://www.elastic.co/guide/en/fleet/current/agent-policy.html#agent-policy-http-monitoring",schema:d.z.object({host:d.z.string().describe("Host").default("localhost"),port:d.z.number().describe("Port").min(0).max(65353).default(6791)}).default({})},{name:"agent.logging.level",title:c.i18n.translate("xpack.fleet.settings.agentPolicyAdvanced.agentLoggingLevelTitle",{defaultMessage:"Agent logging level"}),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.settings.agentPolicyAdvanced.agentLoggingLevelDescription",defaultMessage:"Sets the log level for all the agents on the policy. The default log level is {level}.",values:{level:r.a.createElement(s.EuiCode,null,h.w)}}),api_field:{name:"agent_logging_level"},learnMoreLink:"https://www.elastic.co/guide/en/fleet/current/agent-policy.html#agent-policy-log-level",schema:d.z.enum(h.h).default(h.w)}];var m=n(15),g=n(20),b=n.n(g);const y=(e,t)=>t===d.ZodFirstPartyTypeKind.ZodNumber?""===e?0:parseInt(e,10):e,v=(e,t)=>{const n=e.safeParse(t);if(!n.success)return n.error.issues[0].message},E=({settingsConfig:e,typeName:t,renderItem:n,disabled:i})=>{var l,u;const[c,h]=Object(a.useState)(""),f=Z(),p=`configuredSetting-${e.name}`,m=e.schema instanceof d.z.ZodDefault?e.schema._def.defaultValue():void 0,g=e.schema,b=null!==(l=null==f||null===(u=f.agentPolicy.advanced_settings)||void 0===u?void 0:u[e.api_field.name])&&void 0!==l?l:m;return r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h4",null,e.title),description:r.a.createElement(r.a.Fragment,null,e.description," ",e.learnMoreLink&&r.a.createElement(s.EuiLink,{href:e.learnMoreLink,external:!0},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.configuredSettings.learnMoreLinkText",defaultMessage:"Learn more."})))},r.a.createElement(s.EuiFormRow,{isDisabled:i,fullWidth:!0,key:p,error:c,isInvalid:!!c},n({fieldValue:b,handleChange:n=>{var i;const a=y(n.target.value,t),r=v(g,a);r?(h(r),null==f||f.updateAdvancedSettingsHasErrors(!0)):(h(""),null==f||f.updateAdvancedSettingsHasErrors(!1));const s={...null!==(i=null==f?void 0:f.agentPolicy.advanced_settings)&&void 0!==i?i:{},[e.api_field.name]:a};null==f||f.updateAgentPolicy({advanced_settings:s})},isInvalid:!!c,fieldKey:p,coercedSchema:g})))},w=e=>e instanceof d.z.ZodDefault?"ZodEffects"===e._def.innerType._def.typeName?e._def.innerType._def.schema._def.typeName:e._def.innerType._def.typeName:e._def.typeName,x=({settingsConfig:e,disabled:t})=>{const[n,i]=Object(a.useState)({}),o=Z(),l=e.schema._def.innerType._def.shape();return r.a.createElement(E,{settingsConfig:e,typeName:d.ZodFirstPartyTypeKind.ZodString,renderItem:({})=>r.a.createElement(s.EuiFlexGroup,{direction:"column"},Object.keys(l).map((a=>{var u,c,h,f;const p=l[a],m=`configuredSetting-${e.name}-${a}`,g=p instanceof d.z.ZodDefault?p._def.defaultValue():void 0,b=p,E=null!==(u=null==o||null===(c=o.agentPolicy.advanced_settings)||void 0===c||null===(h=c[e.api_field.name])||void 0===h?void 0:h[a])&&void 0!==u?u:g,x=w(p),S=null!==(f=p._def.description)&&void 0!==f?f:a,k=e=>{const t=y(e.target.value,x);M(t)},M=t=>{var r,s;const l=v(b,t);l?(i({...n,[a]:l}),null==o||o.updateAdvancedSettingsHasErrors(!0)):(i({...n,[a]:""}),null==o||o.updateAdvancedSettingsHasErrors(!1));const u={...null==o||null===(r=o.agentPolicy.advanced_settings)||void 0===r?void 0:r[e.api_field.name],[a]:t},c={...null!==(s=null==o?void 0:o.agentPolicy.advanced_settings)&&void 0!==s?s:{},[e.api_field.name]:u};null==o||o.updateAgentPolicy({advanced_settings:c})};return r.a.createElement(s.EuiFlexItem,{key:`flexItem-${m}`},r.a.createElement(s.EuiFormRow,{fullWidth:!0,isDisabled:t,key:m,label:S,error:n[a],isInvalid:!!n[a]},(()=>{var e,i;switch(x){case d.ZodFirstPartyTypeKind.ZodNumber:return r.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:t,"data-test-subj":m,value:E,onChange:k,isInvalid:!!n[a],min:null!==(e=p.minValue)&&void 0!==e?e:void 0,max:null!==(i=p.maxValue)&&void 0!==i?i:void 0});case d.ZodFirstPartyTypeKind.ZodString:return r.a.createElement(s.EuiFieldText,{fullWidth:!0,disabled:t,"data-test-subj":m,value:E,onChange:k,isInvalid:!!n[a]});case d.ZodFirstPartyTypeKind.ZodBoolean:return r.a.createElement(s.EuiSwitch,{label:"",disabled:t,checked:E,onChange:e=>{M(e.target.checked)}});default:return r.a.createElement(r.a.Fragment,null)}})()))})))})},S=new Map;function k({configuredSettings:e,disabled:t}){return r.a.createElement(r.a.Fragment,null,e.filter((e=>!e.hidden)).map((e=>{const n=S.get(w(e.schema));if(!n)throw new Error(`Unknown setting type: ${e.schema._type}}`);return r.a.createElement(n,b()({key:e.name},e,{disabled:t}))})))}S.set(d.ZodFirstPartyTypeKind.ZodObject,(({disabled:e,...t})=>r.a.createElement(x,{settingsConfig:t,disabled:e}))),S.set(d.ZodFirstPartyTypeKind.ZodNumber,(({disabled:e,...t})=>r.a.createElement(E,{settingsConfig:t,typeName:d.ZodFirstPartyTypeKind.ZodNumber,renderItem:({fieldKey:t,fieldValue:n,handleChange:i,isInvalid:a,coercedSchema:o})=>{var l,u;return r.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:e,"data-test-subj":t,value:n,onChange:i,isInvalid:a,min:null!==(l=o.minValue)&&void 0!==l?l:void 0,max:null!==(u=o.maxValue)&&void 0!==u?u:void 0})}}))),S.set(d.ZodFirstPartyTypeKind.ZodString,(({disabled:e,...t})=>r.a.createElement(E,{settingsConfig:t,typeName:d.ZodFirstPartyTypeKind.ZodString,renderItem:({fieldKey:t,fieldValue:n,handleChange:i,isInvalid:a})=>r.a.createElement(s.EuiFieldText,{fullWidth:!0,disabled:e,"data-test-subj":t,value:n,onChange:i,isInvalid:a})}))),S.set(d.ZodFirstPartyTypeKind.ZodEnum,(({disabled:e,...t})=>r.a.createElement(E,{disabled:e,settingsConfig:t,typeName:d.ZodFirstPartyTypeKind.ZodString,renderItem:({fieldKey:n,fieldValue:i,handleChange:a})=>r.a.createElement(s.EuiSelect,{"data-test-subj":n,value:i,fullWidth:!0,disabled:e,onChange:a,options:t.schema._def.innerType._def.values.map((e=>({text:e,value:e})))})})));var M=n(3),_=n(17),A=n(140),C=n(59),F=n(5);const D="@@##DEFAULT_SELECT##@@";function T(e,t){return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiText,{size:"s"},e),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(s.EuiText,{size:"s"},t)):e}function I(e,t,n){return{inputDisplay:T(c.i18n.translate("xpack.fleet.agentPolicy.outputOptions.defaultOutputText",{defaultMessage:"Default (currently {defaultOutputName})",values:{defaultOutputName:e}}),n),value:D,disabled:t}}function P(e){if("number"==typeof e)return e;if(!e.match(/^[0-9]*$/))return e.trim();const t=Number(e);return isNaN(t)?e.trim():t}const O=({updateAgentPolicy:e,globalDataTags:t,isDisabled:n})=>{const{overlays:i}=Object(m.Xc)(),[l,u]=Object(a.useState)({}),[d,h]=Object(a.useState)(!1),[f,p]=Object(a.useState)({name:"",value:""}),[g,b]=Object(a.useState)({name:"",value:""}),[y,v]=Object(a.useState)({}),E=()=>{h(!0),p({name:"",value:""})},w=Object(a.useCallback)(((e,t)=>{const n=e.target.value,i=e.target.name;u((e=>{let a=e[t];return a||(a={name:"",value:""}),{...e,[t]:{...a,[i]:n}}})),v((e=>({...e,[t]:{...e[t],[i]:null}})))}),[]),x=Object(a.useCallback)((e=>{p({...f,[e.target.name]:e.target.value}),b({...g,[e.target.name]:null})}),[f,g]),S=Object(a.useCallback)(((e,n)=>{const i=e.name.trim(),a=e.value.toString().trim();let r="",s="";return i?/\s/.test(i)?r="Name cannot contain spaces":t.some(((e,t)=>t!==n&&e.name===i))&&(r="Name must be unique"):r="Name cannot be empty",a||(s="Value cannot be empty"),{nameError:r,valueError:s,isValid:!r&&!s}}),[t]),k=Object(a.useCallback)((()=>{const{nameError:n,valueError:i,isValid:a}=S(f);if(!a)return void b({name:n,value:i});const r=[...t,{...f,name:f.name.trim(),value:P(f.value)}];e({global_data_tags:r}),p({name:"",value:""}),h(!1),b({name:"",value:""})}),[t,f,e,S]),M=Object(a.useCallback)((n=>{const i=l[n],{nameError:a,valueError:r,isValid:s}=S(i,n);if(!s)return void v((e=>({...e,[n]:{name:a,value:r}})));const o=t.map(((e,t)=>t===n?{...i,name:i.name.trim(),value:P(i.value)}:e));e({global_data_tags:o}),u((e=>{const t={...e};return delete t[n],t})),v((e=>{const t={...e};return delete t[n],t}))}),[t,e,S,l]),_=Object(a.useCallback)((e=>{u((n=>({...n,[e]:{...t[e]}}))),v((t=>({...t,[e]:{name:null,value:null}})))}),[t]),A=()=>{p({name:"",value:""}),h(!1),b({name:"",value:""})},C=Object(a.useCallback)((async n=>{var a;if(!await i.openConfirm(c.i18n.translate("xpack.fleet.globalDataTagsTable.deleteModalText",{defaultMessage:"Removing the field will affect the next sync. This action cannot be undone."}),{title:c.i18n.translate("xpack.fleet.globalDataTagsTable.deleteModalTitle",{defaultMessage:"Remove the {tag} field?",values:{tag:null!==(a=t[n].name)&&void 0!==a?a:""}}),buttonColor:"danger",cancelButtonText:c.i18n.translate("xpack.fleet.globalDataTagsTable.deleteModalCancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:c.i18n.translate("xpack.fleet.globalDataTagsTable.deleteModalConfirmButtonText",{defaultMessage:"Remove"})}))return;const r=t.filter(((e,t)=>t!==n));u((e=>{const t={...e};return delete t[n],t})),e({global_data_tags:r}),v((e=>{const{[n]:t,...i}=e;return i}))}),[t,i,e]),F=Object(a.useMemo)((()=>[{valign:"top",field:"name",name:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.globalDataTagsTable.nameColumnName",defaultMessage:"Name"}),render:(e,n)=>{const i=t.indexOf(n),a=!!l[i],o=d&&n===f,u=o?g:y[i]||{};return a||o?r.a.createElement(s.EuiFormRow,{isInvalid:!!u.name,error:u.name},r.a.createElement(s.EuiFieldText,{placeholder:c.i18n.translate("xpack.fleet.globalDataTagsTable.namePlaceholder",{defaultMessage:"Name"}),"data-test-subj":"globalDataTagsNameInput",value:a?l[i].name:f.name,name:"name",onChange:e=>a?w(e,i):x(e),isInvalid:!!u.name,compressed:!0})):r.a.createElement(s.EuiCode,null,e)}},{valign:"top",field:"value",name:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.globalDataTagsTable.ValueColumnName",defaultMessage:"Value"}),render:(e,n)=>{const i=t.indexOf(n),a=!!l[i],o=d&&n===f,u=o?g:y[i]||{};return a||o?r.a.createElement(s.EuiFormRow,{isInvalid:!!u.value,error:u.value},r.a.createElement(s.EuiFieldText,{placeholder:c.i18n.translate("xpack.fleet.globalDataTagsTable.valuePlaceHolder",{defaultMessage:"Value"}),"data-test-subj":"globalDataTagsValueInput",value:a?l[i].value:f.value,name:"value",onChange:e=>a?w(e,i):x(e),isInvalid:!!u.value,compressed:!0})):r.a.createElement(s.EuiCode,null,e)}},{actions:[{name:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.globalDataTagsTable.ActionsColumnName",defaultMessage:"Confirm/Edit"}),render:e=>{const i=t.indexOf(e);return l[i]||d&&e===f?r.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButtonIcon,{size:"xs",color:"primary",iconType:"checkInCircleFilled",onClick:d?k:()=>M(i),"aria-label":"Confirm"}))):r.a.createElement(s.EuiButtonIcon,{"aria-label":"Edit",iconType:"pencil",color:"text","data-test-subj":`globalDataTagEditField${i}Btn`,isDisabled:n,onClick:()=>_(i)})}},{name:"Cancel/Delete",render:e=>{const i=t.indexOf(e),a=!!l[i],o=d&&e===f;return a||o?r.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButtonIcon,{size:"xs",color:"danger",iconType:"errorFilled",onClick:o?A:()=>(e=>{u((t=>{const n={...t};return delete n[e],n})),v((t=>{const n={...t};return delete n[e],n}))})(i),"aria-label":"Cancel"}))):r.a.createElement(s.EuiButtonIcon,{"aria-label":"Delete",iconType:"trash",color:"text","data-test-subj":`globalDataTagDeleteField${i}Btn`,isDisabled:n,onClick:()=>C(i)})}}]}]),[M,k,l,y,t,w,x,d,f,g,C,_,n]),D=d?[...t,f]:t;return r.a.createElement(r.a.Fragment,null,0!==t.length||d?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiBasicTable,{items:D,columns:F}),r.a.createElement(s.EuiFlexGroup,{justifyContent:"flexStart"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButton,{iconType:"plusInCircle",onClick:E,style:{marginTop:"16px"},isDisabled:n||d,"data-test-subj":"globalDataTagAddAnotherFieldBtn"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.globalDataTagsTable.addAnotherFieldBtn",defaultMessage:"Add another field"}))))):r.a.createElement(s.EuiPanel,{color:"subdued",paddingSize:"l",className:"eui-textCenter"},r.a.createElement(s.EuiText,null,r.a.createElement("h5",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.globalDataTagsTable.noFieldsMessage",defaultMessage:"This policy has no custom fields"}))),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(s.EuiFlexGroup,{justifyContent:"center"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButton,{iconType:"plusInCircle",onClick:E,style:{marginTop:"16px"},disabled:n,"data-test-subj":"globalDataTagAddFieldBtn"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.globalDataTagsTable.addFieldBtn",defaultMessage:"Add field"}))))))},j=u()(s.EuiDescribedFormGroup).withConfig({displayName:"DescribedFormGroup",componentId:"sc-1dwrbgw-0"})([".euiFlexGroup{align-items:flex-start;}"]),B=({agentPolicy:e,updateAgentPolicy:t,isDisabled:n})=>{const i=((e,t)=>{var n;if(!(e=>void 0!==e.package_policies)(e))return[];const i=new Set([]);return null===(n=e.package_policies)||void 0===n||n.forEach((e=>{e.inputs.forEach((e=>{t.has(e.type)&&i.add(e.type)}))})),Array.from(i)})(e,h.fb);return r.a.createElement(j,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.globalDataTagHeader",defaultMessage:"Custom fields"})),description:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.globalDataTagDescription",defaultMessage:"Add a field and value set to all data collected from the agents enrolled in this policy."}),i.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(s.EuiCallOut,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.globalDataTagUnsupportedInputTitle",defaultMessage:"Unsupported inputs"}),color:"warning",iconType:"alert",size:"s"},r.a.createElement("p",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.globalDataTagUnsupportedInputMessage",defaultMessage:"Tagging data collected from {inputCount, plural, one {input {inputs} is} other {inputs {inputs} are}} not supported.",values:{inputCount:i.length,inputs:r.a.createElement("strong",null,i.join(", "))}})))):null)},r.a.createElement(O,{isDisabled:n,updateAgentPolicy:t,globalDataTags:e.global_data_tags?e.global_data_tags:[]}))},L=({agentPolicy:e,updateAgentPolicy:t,validation:n,disabled:l=!1})=>{var u,d,f,p;const{docLinks:m}=Object(_.sc)(),g=Object(_.uc)("endpoint","endpoint-agent-tamper-protection"),b=null!==(u=null===(d=Object(_.Cb)().developer)||void 0===d?void 0:d.maxAgentPoliciesWithInactivityTimeout)&&void 0!==u?u:h.x,[y,v]=Object(a.useState)({}),{dataOutputOptions:E,monitoringOutputOptions:w,isLoading:x}=function(e){const t=Object(_.Yb)(),n=Object(_.ic)().hasAtLeast(h.lb)||Object(F.ib)(e)||Object(F.jb)(e),i=Object(a.useMemo)((()=>Object(F.x)(e)),[e]),s=Object(a.useMemo)((()=>{if(t.isLoading||!t.data)return[];if(t.isLoading||!t.data)return[];const e=t.data.items.find((e=>e.is_default)),a=null==e?void 0:e.name,s=(null==e?void 0:e.type)&&!i.includes(e.type);return[I(a,s,s?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.outputOptionDisableOutputTypeText",defaultMessage:"{outputType} output for agent integration is not supported for Fleet Server, Synthetics or APM.",values:{outputType:e.type}}):void 0),...t.data.items.map((e=>{const t=!i.includes(e.type),a=!!e.is_internal;return{value:e.id,inputDisplay:T(e.name,t?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.outputOptionDisabledTypeNotSupportedText",defaultMessage:"{outputType} output for agent integration is not supported for Fleet Server, Synthetics or APM.",values:{outputType:e.type}}):void 0),disabled:!n||t||a}}))]}),[t,n,i]),l=Object(a.useMemo)((()=>{var e;return t.isLoading||!t.data?[]:[I(null===(e=t.data.items.find((e=>e.is_default_monitoring)))||void 0===e?void 0:e.name),...t.data.items.map((e=>{const t=!!e.is_internal;return{value:e.id,inputDisplay:e.name,disabled:!n||t}}))]}),[t,n]);return Object(a.useMemo)((()=>({dataOutputOptions:s,monitoringOutputOptions:l,isLoading:t.isLoading})),[s,l,t.isLoading])}(e),{data:S}=Object(_.Mb)({page:1,perPage:0,kuery:`${h.m}.inactivity_timeout:*`}),k=null!==(f=null==S?void 0:S.total)&&void 0!==f?f:0,M=void 0!==b&&k>(null!=b?b:0),{dataDownloadSourceOptions:P,isLoading:O}=function(e){const t=Object(_.Qb)(),n=Object(a.useMemo)((()=>{if(t.isLoading||!t.data)return[];const e=t.data.items.find((e=>e.is_default));return[(n=null==e?void 0:e.name,{inputDisplay:T(c.i18n.translate("xpack.fleet.agentPolicy.downloadSourcesOptions.defaultOutputText",{defaultMessage:"Default (currently {defaultDownloadSourceName})",values:{defaultDownloadSourceName:n}}),a),value:D,disabled:i}),...t.data.items.filter((e=>!e.is_default)).map((e=>({value:e.id,inputDisplay:e.name})))];var n,i,a}),[t]);return Object(a.useMemo)((()=>({dataDownloadSourceOptions:n,isLoading:t.isLoading})),[n,t.isLoading])}(),{fleetServerHostsOptions:j,isLoading:L}=function(e){const t=Object(_.Ub)(),n=Object(a.useMemo)((()=>{if(t.isLoading||!t.data)return[];const e=t.data.items.find((e=>e.is_default));return[(n=null==e?void 0:e.name,{inputDisplay:T(c.i18n.translate("xpack.fleet.agentPolicy.fleetServerHostsOptions.defaultOutputText",{defaultMessage:"Default (currently {defaultFleetServerHostsName})",values:{defaultFleetServerHostsName:n}}),a),value:D,disabled:i}),...t.data.items.filter((e=>!e.is_default)).map((e=>{const t=!!e.is_internal;return{value:e.id,inputDisplay:e.name,disabled:t}}))];var n,i,a}),[t]);return Object(a.useMemo)((()=>({fleetServerHostsOptions:n,isLoading:t.isLoading})),[n,t.isLoading])}(),N=Date.now(),{agentTamperProtectionEnabled:R}=C.b.get(),z=Object(_.ic)(),[U,Z]=Object(a.useState)(!1),K=Object(a.useMemo)((()=>Object(F.hb)(e)),[e]),q=Object(a.useMemo)((()=>{var n;return r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.tamperingLabel",defaultMessage:"Agent tamper protection"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.tamperingDescription",defaultMessage:"Prevent agents from being uninstalled locally. When enabled, agents can only be uninstalled using an authorization token in the uninstall command. Click { linkName } for the full command.",values:{linkName:r.a.createElement("strong",null,"Get uninstall command")}})},r.a.createElement(s.EuiSwitch,{label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.tamperingSwitchLabel",defaultMessage:"Prevent agent tampering"})," ",!K&&r.a.createElement("span",{"data-test-subj":"tamperMissingIntegrationTooltip"},r.a.createElement(s.EuiIconTip,{type:"iInCircle",color:"subdued",content:c.i18n.translate("xpack.fleet.agentPolicyForm.tamperingSwitchLabel.disabledWarning",{defaultMessage:"Elastic Defend integration is required to enable this feature"})}))),checked:null!==(n=e.is_protected)&&void 0!==n&&n,onChange:e=>{t({is_protected:e.target.checked})},disabled:l||!K,"data-test-subj":"tamperProtectionSwitch"}),e.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(s.EuiLink,{onClick:()=>{Z(!0)},disabled:!e.is_protected||!K,"data-test-subj":"uninstallCommandLink"},c.i18n.translate("xpack.fleet.agentPolicyForm.tamperingUninstallLink",{defaultMessage:"Get uninstall command"}))))}),[e.id,e.is_protected,K,t,l]),H=Object(a.useMemo)((()=>{if(R&&z.isPlatinum()&&!e.is_managed)return g?r.a.createElement(a.Suspense,{fallback:null},r.a.createElement(g.Component,null,q)):q}),[R,z,e.is_managed,g,q]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.descriptionFieldLabel",defaultMessage:"Description"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.descriptionDescription",defaultMessage:"Add a description of how this policy will be used."})},U&&e.id&&r.a.createElement(A.x,{target:"agent",policyId:e.id,onClose:()=>Z(!1)}),r.a.createElement(s.EuiFormRow,{fullWidth:!0,key:"description",error:y.description&&n.description?n.description:null,isDisabled:l,isInvalid:Boolean(y.description&&n.description)},r.a.createElement(s.EuiFieldText,{disabled:l||!0===e.is_managed,fullWidth:!0,value:e.description,onChange:e=>t({description:e.target.value}),isInvalid:Boolean(y.description&&n.description),onBlur:()=>v({...y,description:!0}),placeholder:c.i18n.translate("xpack.fleet.agentPolicyForm.descriptionFieldPlaceholder",{defaultMessage:"Optional description"})}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",{"data-test-subj":"defaultNamespaceHeader"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.namespaceFieldLabel",defaultMessage:"Default namespace"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.namespaceFieldDescription",defaultMessage:"Namespaces are a user-configurable arbitrary grouping that makes it easier to search for data and manage user permissions. A policy namespace is used to name its integration's data streams. {fleetUserGuide}.",values:{fleetUserGuide:r.a.createElement(s.EuiLink,{href:m.links.fleet.datastreamsNamingScheme,target:"_blank"},c.i18n.translate("xpack.fleet.agentPolicyForm.nameSpaceFieldDescription.fleetUserGuideLabel",{defaultMessage:"Learn more"}))}})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.namespace&&n.namespace?n.namespace:null,isInvalid:Boolean(y.namespace&&n.namespace),isDisabled:l},r.a.createElement(s.EuiComboBox,{fullWidth:!0,singleSelection:!0,noSuggestions:!0,isDisabled:l,selectedOptions:e.namespace?[{label:e.namespace}]:[],onCreateOption:e=>{t({namespace:e})},onChange:e=>{t({namespace:e.length?e[0]:""})},isInvalid:Boolean(y.namespace&&n.namespace),onBlur:()=>v({...y,namespace:!0})}))),r.a.createElement(B,{updateAgentPolicy:t,agentPolicy:e,isDisabled:l||!0===e.is_managed}),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringLabel",defaultMessage:"Agent monitoring"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringDescription",defaultMessage:"Collecting monitoring logs and metrics will also create an {agent} integration. Monitoring data will be written to the default namespace specified above.",values:{agent:r.a.createElement(i.d,{pkgName:"elastic_agent",pkgTitle:"Elastic Agent"})}})},r.a.createElement(s.EuiCheckboxGroup,{disabled:l||!0===e.is_managed,options:[{id:`${h.Mb.Logs}_${N}`,"data-test-subj":"collectLogsCheckbox",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringLogsFieldLabel",defaultMessage:"Collect agent logs"})," ",r.a.createElement(s.EuiIconTip,{content:c.i18n.translate("xpack.fleet.agentPolicyForm.monitoringLogsTooltipText",{defaultMessage:"Collect logs from Elastic Agents that use this policy."}),position:"right",type:"iInCircle",color:"subdued"}))},{id:`${h.Mb.Metrics}_${N}`,"data-test-subj":"collectMetricsCheckbox",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringMetricsFieldLabel",defaultMessage:"Collect agent metrics"})," ",r.a.createElement(s.EuiIconTip,{content:c.i18n.translate("xpack.fleet.agentPolicyForm.monitoringMetricsTooltipText",{defaultMessage:"Collect metrics from Elastic Agents that use this policy."}),position:"right",type:"iInCircle",color:"subdued"}))}],idToSelectedMap:(e.monitoring_enabled||[]).reduce(((e,t)=>(e[`${t}_${N}`]=!0,e)),{logs:!1,metrics:!1}),onChange:n=>{const i=n.split("_")[0];if(i!==h.Mb.Logs&&i!==h.Mb.Metrics)return;const a=e.monitoring_enabled&&e.monitoring_enabled.indexOf(i)>=0,r=e.monitoring_enabled||[];t({monitoring_enabled:a?r.filter((e=>e!==i)):[...r,i]})}})),H,r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutLabel",defaultMessage:"Inactivity timeout"}),M&&r.a.createElement(r.a.Fragment,null,"",r.a.createElement(s.EuiToolTip,{content:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutTooltip",defaultMessage:"The maximum of 750 agent policies with an inactivity timeout has been exceeded. Remove inactivity timeouts or agent policies to allow agents to become inactive again."})},r.a.createElement(s.EuiBadge,{color:"warning"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutBadge",defaultMessage:"Warning"}))))),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutDescription",defaultMessage:"An optional timeout in seconds. If provided, an agent will automatically change to inactive status and be filtered out of the agents list. A maximum of 750 agent policies can have an inactivity timeout."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.inactivity_timeout&&n.inactivity_timeout?n.inactivity_timeout:null,isInvalid:Boolean(y.inactivity_timeout&&n.inactivity_timeout),isDisabled:l},r.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:l||!0===e.is_managed,value:e.inactivity_timeout||"",min:0,onChange:e=>{t({inactivity_timeout:e.target.value?Number(e.target.value):0})},isInvalid:Boolean(y.inactivity_timeout&&n.inactivity_timeout),onBlur:()=>v({...y,inactivity_timeout:!0})}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.fleetServerHostsLabel",defaultMessage:"Fleet Server"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.fleetServerHostsDescripton",defaultMessage:"Select to which Fleet Server the agents in this policy will communicate."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.fleet_server_host_id&&n.fleet_server_host_id?n.fleet_server_host_id:null,isDisabled:l,isInvalid:Boolean(y.fleet_server_host_id&&n.fleet_server_host_id)},r.a.createElement(s.EuiSuperSelect,{disabled:l||!0===e.is_managed,valueOfSelected:e.fleet_server_host_id||D,fullWidth:!0,isLoading:L,onChange:e=>{t({fleet_server_host_id:e!==D?e:null})},options:j}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.dataOutputLabel",defaultMessage:"Output for integrations"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.dataOutputDescription",defaultMessage:"Select which output to use for data from integrations."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.data_output_id&&n.data_output_id?n.data_output_id:null,isInvalid:Boolean(y.data_output_id&&n.data_output_id),isDisabled:l},r.a.createElement(s.EuiSuperSelect,{disabled:l||!0===e.is_managed,valueOfSelected:e.data_output_id||D,fullWidth:!0,isLoading:x,onChange:e=>{t({data_output_id:e!==D?e:null})},options:E}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringOutputLabel",defaultMessage:"Output for agent monitoring"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.monitoringOutputDescription",defaultMessage:"Select which output to use for the agents own monitoring data."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.monitoring_output_id&&n.monitoring_output_id?n.monitoring_output_id:null,isInvalid:Boolean(y.monitoring_output_id&&n.monitoring_output_id),isDisabled:l},r.a.createElement(s.EuiSuperSelect,{disabled:l||!0===e.is_managed,valueOfSelected:e.monitoring_output_id||D,fullWidth:!0,isLoading:x,onChange:e=>{t({monitoring_output_id:e!==D?e:null})},options:w}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.downloadSourceLabel",defaultMessage:"Agent binary download","data-test-subj":"agentPolicyForm.downloadSource.label"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.downloadSourceDescription",defaultMessage:"When an upgrade action is issued the agents will download the binary from this location."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.download_source_id&&n.download_source_id?n.download_source_id:null,isInvalid:Boolean(y.download_source_id&&n.download_source_id),isDisabled:l},r.a.createElement(s.EuiSuperSelect,{disabled:l,valueOfSelected:e.download_source_id||D,fullWidth:!0,isLoading:O,onChange:e=>{t({download_source_id:e!==D?e:null})},options:P,"data-test-subj":"agentPolicyForm.downloadSource.select"}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatLabel",defaultMessage:"Host name format"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatLabelDescription",defaultMessage:"Select how you would like agent domain names to be displayed."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,isDisabled:l},r.a.createElement(s.EuiRadioGroup,{disabled:l,options:[{id:"hostname",label:r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiFlexGroup,{gutterSize:"xs",direction:"column"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s"},r.a.createElement("b",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionHostname",defaultMessage:"Hostname"})))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s",color:"subdued"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionHostnameExample",defaultMessage:"ex: My-Laptop"})))),r.a.createElement(s.EuiSpacer,{size:"s"}))},{id:"fqdn",label:r.a.createElement(s.EuiFlexGroup,{gutterSize:"xs",direction:"column"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s"},r.a.createElement("b",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionFqdn",defaultMessage:"Fully Qualified Domain Name (FQDN)"})))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiText,{size:"s",color:"subdued"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.hostnameFormatOptionFqdnExample",defaultMessage:"ex: My-Laptop.admin.acme.co"}))))}],idSelected:null!==(p=e.agent_features)&&void 0!==p&&p.length?"fqdn":"hostname",onChange:e=>{t({agent_features:"hostname"===e?[]:[{name:"fqdn",enabled:!0}]})},name:"radio group"}))),r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollmentTimeoutLabel",defaultMessage:"Unenrollment timeout"}),"",r.a.createElement(s.EuiToolTip,{content:c.i18n.translate("xpack.fleet.agentPolicyForm.unenrollmentTimeoutTooltip",{defaultMessage:"This setting is deprecated and will be removed in a future release. Consider using inactivity timeout instead"})},r.a.createElement(s.EuiBetaBadge,{label:c.i18n.translate("xpack.fleet.agentPolicyForm.unenrollmentTimeoutDeprecatedLabel",{defaultMessage:"Deprecated"}),size:"s"}))),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollmentTimeoutDescription",defaultMessage:"An optional timeout in seconds. If provided, and fleet server is below version 8.7.0, an agent will automatically unenroll after being gone for this period of time."})},r.a.createElement(s.EuiFormRow,{fullWidth:!0,error:y.unenroll_timeout&&n.unenroll_timeout?n.unenroll_timeout:null,isInvalid:Boolean(y.unenroll_timeout&&n.unenroll_timeout),isDisabled:l},r.a.createElement(s.EuiFieldNumber,{fullWidth:!0,disabled:l||!0===e.is_managed,value:e.unenroll_timeout||"",min:0,onChange:e=>{t({unenroll_timeout:e.target.value?Number(e.target.value):0})},isInvalid:Boolean(y.unenroll_timeout&&n.unenroll_timeout),onBlur:()=>v({...y,unenroll_timeout:!0})}))),r.a.createElement(s.EuiSpacer,{size:"l"}))},N=({agentPolicy:e,updateAgentPolicy:t,validation:n,nameLabel:i,disabled:l})=>{const[u,d]=Object(a.useState)({}),h=l||!0===e.is_managed;return r.a.createElement(s.EuiFormRow,{fullWidth:!0,key:"name",label:i||r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.nameFieldLabel",defaultMessage:"Name"}),isDisabled:h,error:u.name&&n.name?n.name:null,isInvalid:Boolean(u.name&&n.name)},r.a.createElement(s.EuiFieldText,{"data-test-subj":"createAgentPolicyNameField",disabled:h,fullWidth:!0,value:e.name,onChange:e=>t({name:e.target.value}),isInvalid:Boolean(u.name&&n.name),onBlur:()=>d({...u,name:!0}),placeholder:c.i18n.translate("xpack.fleet.agentPolicyForm.nameFieldPlaceholder",{defaultMessage:"Choose a name"})}))},R=({isDisabled:e=!1,withSysMonitoring:t,updateSysMonitoring:n})=>r.a.createElement(s.EuiFormRow,null,r.a.createElement(s.EuiCheckbox,{id:"agentPolicyFormSystemMonitoringCheckbox",disabled:e,label:r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.systemMonitoringText",defaultMessage:"Collect system logs and metrics"})," ",r.a.createElement(s.EuiIconTip,{content:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.systemMonitoringTooltipText",defaultMessage:"This will also add a {system} integration to collect system logs and metrics.",values:{system:r.a.createElement(i.d,{pkgName:"system",pkgTitle:"System"})}}),position:"right",type:"iInCircle",color:"subdued"})),checked:t,onChange:()=>{n(!t)},"data-test-subj":"agentPolicyFormSystemMonitoringCheckbox"})),z=u()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-1qxoog-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),U=r.a.createContext(void 0),Z=()=>r.a.useContext(U),K=({agentPolicy:e,updateAgentPolicy:t,withSysMonitoring:n,updateSysMonitoring:i,validation:a,isEditing:l=!1,updateAdvancedSettingsHasErrors:u})=>{const c=!Object(m.Ib)().fleet.allAgentPolicies,{advancedPolicySettings:d}=M.b.get();return r.a.createElement(U.Provider,{value:{agentPolicy:e,updateAgentPolicy:t,updateAdvancedSettingsHasErrors:u}},r.a.createElement(s.EuiForm,null,l?(h=[r.a.createElement(N,{agentPolicy:e,updateAgentPolicy:t,validation:a,disabled:c})],r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.generalSettingsGroupTitle",defaultMessage:"General settings"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.generalSettingsGroupDescription",defaultMessage:"Choose a name and description for your agent policy."})},h)):r.a.createElement(N,{agentPolicy:e,updateAgentPolicy:t,validation:a,disabled:c}),l?null:r.a.createElement(R,{withSysMonitoring:n,updateSysMonitoring:i}),l?r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{agentPolicy:e,updateAgentPolicy:t,validation:a,disabled:c}),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"xl"}),r.a.createElement(s.EuiTitle,null,r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedSettingsTitle",defaultMessage:"Advanced settings"}))),r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(k,{configuredSettings:p,disabled:c})):null,r.a.createElement(s.EuiSpacer,{size:"xl"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiHorizontalRule,null),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(z,{id:"advancedOptions",buttonContent:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:"ingest-active-button"},r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(L,{agentPolicy:e,updateAgentPolicy:t,validation:a}),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"xl"}),r.a.createElement(s.EuiTitle,null,r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedSettingsTitle",defaultMessage:"Advanced settings"}))),r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(k,{configuredSettings:p,disabled:c})):null))));var h},q=({children:e})=>{const{notifications:t}=Object(_.sc)(),[n,i]=Object(a.useState)(),[l,u]=Object(a.useState)(),[d,h]=Object(a.useState)(!1),[f,p]=Object(a.useState)(!1),m=Object(a.useRef)(null),g=()=>{i(void 0),u(void 0),p(!1),h(!1)};return r.a.createElement(a.Fragment,null,e(((e,t=(()=>{}))=>{if(!e)throw new Error("No agent policy specified to duplicate");h(!0),i(e),u({name:c.i18n.translate("xpack.fleet.copyAgentPolicy.confirmModal.defaultNewPolicyName",{defaultMessage:"{name} (copy)",values:{name:e.name}}),description:e.description}),m.current=t})),d&&n&&l?r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement("span",{className:"eui-textBreakWord"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.copyPolicyTitle",defaultMessage:"Duplicate ''{name}'' agent policy",values:{name:n.name}})),onCancel:g,onConfirm:async()=>{p(!0);try{const{data:e,error:i}=await Object(_.j)(n.id,l);if(i)throw i;if(!e)throw new Error("Error duplicating agent policy: no data");t.toasts.addSuccess(c.i18n.translate("xpack.fleet.copyAgentPolicy.successNotificationTitle",{defaultMessage:"Agent policy duplicated"})),g(),m.current&&m.current(e.item)}catch(e){p(!1),t.toasts.addError(e,{title:c.i18n.translate("xpack.fleet.copyAgentPolicy.fatalErrorNotificationTitle",{defaultMessage:"Error duplicating agent policy"})})}},cancelButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.confirmButtonLabel",defaultMessage:"Duplicate policy"}),confirmButtonDisabled:f||!l.name.trim()},r.a.createElement("p",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.copyPolicyPrompt",defaultMessage:"Choose a name and description for your new agent policy."})),r.a.createElement(s.EuiFormRow,{label:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.newNameLabel",defaultMessage:"New policy name"}),fullWidth:!0},r.a.createElement(s.EuiFieldText,{fullWidth:!0,value:l.name,onChange:e=>u({...l,name:e.target.value})})),r.a.createElement(s.EuiFormRow,{label:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.copyAgentPolicy.confirmModal.newDescriptionLabel",defaultMessage:"Description"}),fullWidth:!0},r.a.createElement(s.EuiFieldText,{fullWidth:!0,value:l.description,onChange:e=>u({...l,description:e.target.value})}))):null)};var H=n(22),W=n(9);const V=({children:e,hasFleetServer:t,packagePolicies:n})=>{const{notifications:i}=Object(_.sc)(),{agents:{enabled:l}}=Object(_.Cb)(),[u,d]=Object(a.useState)(),[h,f]=Object(a.useState)(!1),[p,m]=Object(a.useState)(!1),[g,b]=Object(a.useState)(0),[y,v]=Object(a.useState)(!1),E=Object(a.useRef)(null),{getPath:w}=Object(_.jc)(),x=Object(H.useHistory)(),S=Object(_.Gb)(),{canUseMultipleAgentPolicies:k}=Object(_.kc)(),M=()=>{d(void 0),v(!1),m(!1),f(!1)},A=Object(a.useCallback)((async e=>{var t,n;if(!l||p)return;m(!0);const i=await Object(_.A)({showInactive:!0,kuery:`policy_id:"${e}" and not status: unenrolled`,perPage:W.z});b(null!==(t=null===(n=i.data)||void 0===n?void 0:n.total)&&void 0!==t?t:0),m(!1)}),[l,p]),C=Object(a.useMemo)((()=>!(!n||!k)&&n.some((e=>(null==e?void 0:e.policy_ids.length)>1))),[k,n]);return r.a.createElement(a.Fragment,null,e(((e,t=(()=>{}))=>{if(!e)throw new Error("No agent policy specified for deletion");f(!0),d(e),A(e),E.current=t})),h?r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.deletePolicyTitle",defaultMessage:"Delete this agent policy?"}),onCancel:M,onConfirm:async()=>{v(!0);try{const{data:e}=await S.mutateAsync({agentPolicyId:u});e?(i.toasts.addSuccess(c.i18n.translate("xpack.fleet.deleteAgentPolicy.successSingleNotificationTitle",{defaultMessage:"Deleted agent policy ''{id}''",values:{id:e.name||e.id}})),E.current&&E.current(u)):i.toasts.addDanger(c.i18n.translate("xpack.fleet.deleteAgentPolicy.failureSingleNotificationTitle",{defaultMessage:"Error deleting agent policy ''{id}''",values:{id:u}}))}catch(e){i.toasts.addDanger(c.i18n.translate("xpack.fleet.deleteAgentPolicy.fatalErrorNotificationTitle",{defaultMessage:"Error deleting agent policy"}))}M(),x.push(w("policies_list"))},cancelButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:y||p?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.loadingButtonLabel",defaultMessage:"Loading"}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.confirmButtonLabel",defaultMessage:"Delete policy"}),buttonColor:"danger",confirmButtonDisabled:y||p||!!g},C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiCallOut,{color:"primary",iconType:"iInCircle",title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.warningSharedIntegrationPolicies",defaultMessage:"Fleet has detected that this policy contains integration policies shared by multiple agent policies. These integration policies won't be deleted."})}),r.a.createElement(s.EuiSpacer,{size:"m"})),p?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.loadingAgentsCountMessage",defaultMessage:"Checking amount of affected agents"}):g?r.a.createElement(s.EuiCallOut,{color:"danger",iconType:"warning",title:c.i18n.translate("xpack.fleet.deleteAgentPolicy.confirmModal.affectedAgentsTitle",{defaultMessage:"Policy in use"})},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.affectedAgentsMessage",defaultMessage:"{agentsCount, plural, one {# agent is} other {# agents are}} assigned to this agent policy. Unassign these agents before deleting this policy. This might include inactive agents.",values:{agentsCount:g}})):t?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.fleetServerMessage",defaultMessage:"NOTE: This policy has Fleet Server integration, it is required for using Fleet."}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.deleteAgentPolicy.confirmModal.irreversibleMessage",defaultMessage:"This action cannot be undone."})):null)};var G=n(138),$=n(16);const X=u()(s.EuiFlyoutBody).withConfig({displayName:"FlyoutBody",componentId:"sc-1iummeq-0"})([".euiFlyoutBody__overflowContent{padding:0;}"]),J=Object(a.memo)((({policyId:e,onClose:t})=>{var n,a;const l=Object(_.sc)(),{isLoading:u,data:c,error:d}=Object(_.Xb)(e),{data:f}=Object(_.Wb)(e),p=null==f||null===(n=f.item)||void 0===n||null===(a=n.package_policies)||void 0===a?void 0:a.some((e=>{var t;return null==e||null===(t=e.secret_references)||void 0===t?void 0:t.length})),m=u?r.a.createElement(i.p,null):d?r.a.createElement(s.EuiCallOut,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.ErrorGettingFullAgentPolicy",defaultMessage:"Error loading agent policy"}),color:"danger",iconType:"warning"},d.message):r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiCodeBlock,{language:"yaml",isCopyable:!0,fontSize:"m",whiteSpace:"pre"},Object(C.h)(c.item,G.safeDump))),g=l.http.basePath.prepend(C.c.getInfoFullDownloadPath(e))+`?apiVersion=${h.o.public.v1}`;return r.a.createElement(s.EuiFlyout,{onClose:t,maxWidth:$.q},r.a.createElement(s.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"IngestManagerAgentPolicyYamlFlyoutTitle"},r.a.createElement(s.EuiTitle,{size:"m"},r.a.createElement("h2",{id:"IngestManagerAgentPolicyYamlFlyoutTitle"},null!=f&&f.item?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlflyoutTitleWithName",defaultMessage:"''{name}'' agent policy",values:{name:f.item.name}}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlflyoutTitleWithoutName",defaultMessage:"Agent policy"}))),p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(s.EuiCallOut,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.secretsTitle",defaultMessage:"This policy contains secret values"}),size:"m",color:"primary",iconType:"iInCircle"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.secretsDescription",defaultMessage:"Kibana does not have access to secret values. You will need to set these values manually after deploying the agent policy. Look out for environment variables in the format {envVarPrefix} in the agent configuration.",values:{envVarPrefix:r.a.createElement("code",null,"${SECRET_0}")}})))),r.a.createElement(X,null,m),r.a.createElement(s.EuiFlyoutFooter,null,r.a.createElement(s.EuiFlexGroup,{justifyContent:"spaceBetween"},r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButtonEmpty,{onClick:t,flush:"left"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlFlyoutCloseButtonLabel",defaultMessage:"Close"}))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButton,{href:g,iconType:"download",isDisabled:Boolean(u&&!c)},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyDetails.yamlDownloadButtonLabel",defaultMessage:"Download policy"}))))))})),Y=({onConfirm:e,onCancel:t,agentCount:n,agentPolicies:i,agentPoliciesToAdd:a=[],agentPoliciesToRemove:l=[]})=>r.a.createElement(s.EuiConfirmModal,{title:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalTitle",defaultMessage:"Save and deploy changes"}),onCancel:t,onConfirm:e,cancelButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalCancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalConfirmButtonLabel",defaultMessage:"Save and deploy changes"}),buttonColor:"primary"},n>0?r.a.createElement(s.EuiCallOut,{iconType:"iInCircle",title:c.i18n.translate("xpack.fleet.agentPolicy.confirmModalCalloutTitle",{defaultMessage:"This action will update {agentCount, plural, one {# agent} other {# agents}}",values:{agentCount:n}})},r.a.createElement("div",{className:"eui-textBreakWord"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalCalloutDescription",defaultMessage:"Fleet has detected that the selected agent policies, {policyNames}, are already in use by some of your agents. As a result of this action, Fleet will deploy updates to all agents that use these policies.",values:{policyNames:r.a.createElement("b",null,i.map((e=>e.name)).join(", "))}}))):r.a.createElement(s.EuiCallOut,{"data-test-subj":"confirmAddRemovePoliciesCallout",iconType:"iInCircle",title:c.i18n.translate("xpack.fleet.agentPolicy.confirmModalPoliciesCalloutTitle",{defaultMessage:"This action will update the selected agent policies",values:{agentCount:n}})},a.length>0&&r.a.createElement("div",{className:"eui-textBreakWord"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalPoliciesAddCalloutDescription",defaultMessage:"Agent policies that will be updated to use this integration policy:"}),r.a.createElement("ul",null,a.map((e=>r.a.createElement("li",{key:e},e))))),l.length>0&&r.a.createElement("div",{className:"eui-textBreakWord"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalPoliciesRemoveCalloutDescription",defaultMessage:"Agent policies that will be updated to remove this integration policy:"}),r.a.createElement("ul",null,l.map((e=>r.a.createElement("li",{key:e},e)))))),r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicy.confirmModalDescription",defaultMessage:"This action can not be undone. Are you sure you wish to continue?"}));var Q=n(141);const ee=Object(a.memo)((({agentPolicy:e,onCopySuccess:t,fullButton:n=!1,enrollmentFlyoutOpenByDefault:l=!1,onCancelEnrollment:u})=>{var c;const d=Object(_.yb)(),[h,f]=Object(a.useState)(!1),[p,m]=Object(a.useState)(l),[g,b]=Object(a.useState)(!1),[y,v]=Object(a.useState)(!1),{agentTamperProtectionEnabled:E}=C.b.get(),w=Object(a.useMemo)((()=>{var t,n;return null!==(t=null===(n=e.package_policies)||void 0===n?void 0:n.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===$.l})))&&void 0!==t&&t}),[e]),x="package_policies"in e&&(null==e||null===(c=e.package_policies)||void 0===c?void 0:c.some((e=>e.is_managed))),[S,k]=Object(a.useState)(!1),M=Object(a.useCallback)((e=>{k(e)}),[k]),A=Object(a.useMemo)((()=>u||(()=>m(!1))),[u,m]);return r.a.createElement(q,null,(a=>{const l=r.a.createElement(s.EuiContextMenuItem,{icon:"inspect",onClick:()=>{k(!1),f(!h)},key:"viewPolicy"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.viewPolicyText",defaultMessage:"View policy"})),u=null!=e&&e.is_managed?[l]:[r.a.createElement(s.EuiContextMenuItem,{icon:"plusInCircle",disabled:w&&!d.fleet.addFleetServers||!w&&!d.fleet.addAgents,"data-test-subj":"agentPolicyActionMenuAddAgentButton",onClick:()=>{k(!1),m(!0)},key:"enrollAgents"},w?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.addFleetServerActionText",defaultMessage:"Add Fleet Server"}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.enrollAgentActionText",defaultMessage:"Add agent"})),l,r.a.createElement(s.EuiContextMenuItem,{disabled:!d.integrations.writeIntegrationPolicies,icon:"copy",onClick:()=>{k(!1),a(e,t)},key:"copyPolicy"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.copyPolicyActionText",defaultMessage:"Duplicate policy"})),r.a.createElement(V,{hasFleetServer:Object(C.q)(e),key:"deletePolicy",packagePolicies:e.package_policies},(t=>r.a.createElement(s.EuiContextMenuItem,{"data-test-subj":"agentPolicyActionMenuDeleteButton",disabled:!d.fleet.allAgentPolicies||x,toolTipContent:x?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.policyForm.deletePolicyActionText.disabled",defaultMessage:"Agent policy with managed package policies cannot be deleted.","data-test-subj":"agentPolicyActionMenuDeleteButtonDisabledTooltip"}):void 0,icon:"trash",onClick:()=>{t(e.id)}},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.deletePolicyActionText",defaultMessage:"Delete policy"}))))];return!d.fleet.allAgents||null!=e&&e.is_managed||u.push(r.a.createElement(s.EuiContextMenuItem,{icon:"refresh",onClick:()=>{v(!0)},key:"upgradeAgents","data-test-subj":"agentPolicyActionMenuUpgradeAgentsButton"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.upgradeAgentsActionText",defaultMessage:"Upgrade agents on this policy"}))),!d.fleet.allAgents||!E||null!=e&&e.is_managed||u.push(r.a.createElement(s.EuiContextMenuItem,{icon:"minusInCircle",onClick:()=>{k(!1),b(!0)},key:"getUninstallCommand","data-test-subj":"uninstall-agents-command-menu-item"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.getUninstallCommand",defaultMessage:"Uninstall agents on this policy"}))),r.a.createElement(r.a.Fragment,null,h&&r.a.createElement(s.EuiPortal,null,r.a.createElement(J,{policyId:e.id,onClose:()=>f(!1)})),p&&r.a.createElement(s.EuiPortal,null,r.a.createElement(i.c,{agentPolicy:e,onClose:A})),y&&r.a.createElement(s.EuiPortal,null,r.a.createElement(Q.e,{agents:`policy_id: ${e.id}`,agentCount:e.agents||0,onClose:()=>{v(!1)}})),g&&r.a.createElement(i.w,{target:"agent",policyId:e.id,onClose:()=>b(!1)}),r.a.createElement(i.g,{isOpen:S,onChange:M,button:n?{props:{iconType:"arrowDown",iconSide:"right"},children:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyActionMenu.buttonText",defaultMessage:"Actions"})}:void 0,items:u}))}))})),te=u()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-ii96zz-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),ne=({agentPolicy:e,updateAgentPolicy:t,withSysMonitoring:n,updateSysMonitoring:i,validation:a})=>r.a.createElement(s.EuiForm,null,r.a.createElement(s.EuiDescribedFormGroup,{fullWidth:!0,title:r.a.createElement("h3",null,r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyLabel",defaultMessage:"Create agent policy"})),description:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyDescription",defaultMessage:"Add this integration to a new set of hosts by creating a new agent policy. You can add agent in the next step."})},r.a.createElement(N,{agentPolicy:e,updateAgentPolicy:t,validation:a,nameLabel:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.newAgentPolicyFieldLabel",defaultMessage:"New agent policy name"})}),r.a.createElement(R,{withSysMonitoring:n,updateSysMonitoring:i})),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiHorizontalRule,null),r.a.createElement(s.EuiSpacer,{size:"xs"}),r.a.createElement(te,{id:"advancedOptions",buttonContent:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:"ingest-active-button"},r.a.createElement(s.EuiSpacer,{size:"l"}),r.a.createElement(L,{agentPolicy:e,updateAgentPolicy:t,validation:a})))),ie=e=>{var t;const n={},i=Object(C.l)(e.namespace||"");return null!==(t=e.name)&&void 0!==t&&t.trim()||(n.name=[r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.nameRequiredErrorMessage",defaultMessage:"Agent policy name is required"})]),!i.valid&&i.error&&(n.namespace=[i.error]),e.unenroll_timeout&&e.unenroll_timeout<0&&(n.unenroll_timeout=[r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.unenrollTimeoutMinValueErrorMessage",defaultMessage:"Unenroll timeout must be greater than zero."})]),e.inactivity_timeout&&e.inactivity_timeout<0&&(n.inactivity_timeout=[r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.inactivityTimeoutMinValueErrorMessage",defaultMessage:"Inactivity timeout must be greater than zero."})]),n};var ae=n(30);const re=u()(s.EuiAccordion).withConfig({displayName:"StyledEuiAccordion",componentId:"sc-4hn2e7-0"})([".ingest-active-button{color:",";}"],(e=>e.theme.eui.euiColorPrimary)),se=({updateAgentPolicy:e,isFleetServerPolicy:t,agentPolicyName:n})=>{const{docLinks:i}=Object(_.sc)(),l=Object(_.yb)(),[u,d]=Object(a.useState)({}),[h,f]=Object(a.useState)(!0),[p,m]=Object(a.useState)(!1),g=!l.fleet.allAgentPolicies||p,[b,y]=Object(a.useState)(Object(ae.b)({name:n,has_fleet_server:t})),v=Object(a.useCallback)((e=>{y({...b,...e})}),[y,b]),E=ie(b),w=Object(a.useCallback)((async()=>{try{m(!0);const t=await Object(_.k)(b,{withSysMonitoring:h});if(t.error)throw t.error;t.data&&e(t.data.item)}catch(t){e(null,function(e){if(409===e.statusCode)return r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyCreation.errorMessage",defaultMessage:"An agent policy already exists with this name."})}(t))}finally{m(!1)}}),[b,h,e]);return r.a.createElement(s.EuiForm,null,r.a.createElement(s.EuiText,null,t?r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyFleetServer",defaultMessage:"Fleet Server runs on Elastic Agent, and agents are enrolled in agent policies which represent hosts. We'll need to create a dedicated agent policy for Fleet Server to run on dedicated hosts."}):r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyTypeOfHosts",defaultMessage:"Settings for the monitored host are configured in the {agentPolicy}. Create a new agent policy to get started.",values:{agentPolicy:r.a.createElement(s.EuiLink,{href:i.links.fleet.agentPolicy,target:"_blank"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyDocLink",defaultMessage:"agent policy"}))}})),r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(s.EuiFlexGroup,null,r.a.createElement(s.EuiFlexItem,null,r.a.createElement(s.EuiFormRow,{fullWidth:!0,key:"name",error:u.name&&E.name?E.name:null},r.a.createElement(s.EuiFieldText,{fullWidth:!0,value:b.name,disabled:g,onChange:e=>v({name:e.target.value}),isInvalid:Boolean(u.name&&E.name),onBlur:()=>d({...u,name:!0}),placeholder:c.i18n.translate("xpack.fleet.agentPolicyForm.nameFieldPlaceholder",{defaultMessage:"Choose a name"})}))),r.a.createElement(s.EuiFlexItem,{grow:!1},r.a.createElement(s.EuiButton,{color:"primary",disabled:!b.name,onClick:()=>w(),isLoading:p,isDisabled:g,"data-test-subj":t?"createFleetServerPolicyBtn":"createPolicyBtn"},r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyText",defaultMessage:"Create policy"})))),r.a.createElement(s.EuiSpacer,{size:"s"}),r.a.createElement(R,{isDisabled:g,withSysMonitoring:h,updateSysMonitoring:e=>f(e)}),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(re,{id:"advancedOptionsJustChanged","data-test-subj":"advancedOptionsButton",isDisabled:g,buttonContent:r.a.createElement(o.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.advancedOptionsToggleLabel",defaultMessage:"Advanced options"}),buttonClassName:g?void 0:"ingest-active-button"},r.a.createElement(s.EuiSpacer,{size:"m"}),r.a.createElement(L,{agentPolicy:b,updateAgentPolicy:v,validation:E}))))}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var i=n(6),a=n(4),r=n(1),s=n.n(r);const o=s.a.createContext(null);function l(){const e=Object(r.useContext)(o);return{confirm:Object(r.useCallback)((async(t,n,i)=>{if(null===e)throw new Error("Context need to be provided to use useConfirmModal");return new Promise((a=>{e.showModal({title:t,description:n,onConfirm:()=>a(!0),onCancel:()=>a(!1),options:i})}))}),[e])}}function u(e){return t=>s.a.createElement(c,null,s.a.createElement(e,t))}const c=({children:e})=>{var t,n,l;const[u,c]=Object(r.useState)(!1),[d,h]=Object(r.useState)({onCancel:()=>{},onConfirm:()=>{}}),f=Object(r.useCallback)((({title:e,description:t,onConfirm:n,onCancel:i,options:a})=>{c(!0),h({title:e,description:t,onConfirm:()=>{c(!1),n()},onCancel:()=>{c(!1),i()},options:a})}),[]);return s.a.createElement(o.Provider,{value:{showModal:f}},u&&s.a.createElement(i.EuiPortal,null,s.a.createElement(i.EuiConfirmModal,{title:d.title,buttonColor:null===(t=d.options)||void 0===t?void 0:t.buttonColor,onCancel:d.onCancel,onConfirm:d.onConfirm,cancelButtonText:a.i18n.translate("xpack.fleet.settings.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:null!==(n=null===(l=d.options)||void 0===l?void 0:l.confirmButtonText)&&void 0!==n?n:a.i18n.translate("xpack.fleet.settings.confirmModal.confirmButtonText",{defaultMessage:"Save and deploy"}),defaultFocusedButton:"confirm"},d.description)),e)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return B})),n.d(t,"b",(function(){return K})),n.d(t,"e",(function(){return H}));var i=n(17);const a=({pkgTitle:e,pkgkey:t,integration:n})=>(Object(i.zb)("add_integration_to_policy",{pkgTitle:e,pkgkey:t,...n?{integration:n}:{}}),null);var r=n(1),s=n.n(r),o=n(6),l=n(12),u=n(5),c=n(117),d=n(59),h=n(58),f=n.n(h),p=n(157),m=n(180),g=n(204);const b=Object(r.memo)((({hasInputStreams:e,packageInputVars:t,packagePolicyInput:n,updatePackagePolicyInput:i,inputVarsValidationResults:a,forceShowErrors:u,isEditPage:c=!1})=>{const[d,h]=Object(r.useState)(!1),f=u&&Object(p.f)(a),m=[],b=[];t&&t.forEach((e=>{Object(p.c)(e)?b.push(e):m.push(e)}));const y=Object(r.useMemo)((()=>b.filter((({name:e})=>{var t,n;return null===(t=a.vars)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.length})).length),[b,a.vars]),v=Object(o.useIsWithinMinBreakpoint)("xxl")?7:5;return s.a.createElement(o.EuiFlexGrid,{columns:2},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart"},s.a.createElement(o.EuiFlexItem,{grow:1}),s.a.createElement(o.EuiFlexItem,{grow:v},s.a.createElement(o.EuiText,null,s.a.createElement("h4",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputSettingsTitle",defaultMessage:"Settings"}))),e?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiText,{color:"subdued",size:"s"},s.a.createElement("p",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputSettingsDescription",defaultMessage:"The following settings are applicable to all inputs below."})))):null))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},m.map((e=>{var t;const{name:r,type:l}=e;if(!n.vars)return;const{value:d,frozen:h}=n.vars[r];return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(g.PackagePolicyInputVarField,{varDef:e,value:d,frozen:h,onChange:e=>{i({vars:{...n.vars,[r]:{type:l,value:e}}})},errors:null===(t=a.vars)||void 0===t?void 0:t[r],forceShowErrors:u,isEditPage:c}))})),b.length?s.a.createElement(r.Fragment,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:d?"arrowDown":"arrowRight",onClick:()=>h(!d),flush:"left"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.toggleAdvancedOptionsButtonText",defaultMessage:"Advanced options"}))),!d&&f&&y?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:y}}))):null)),d?b.map((e=>{var t,r,l;const{name:d,type:h}=e,f=null===(t=n.vars)||void 0===t||null===(r=t[d])||void 0===r?void 0:r.value;return s.a.createElement(o.EuiFlexItem,{key:d},s.a.createElement(g.PackagePolicyInputVarField,{varDef:e,value:f,onChange:e=>{i({vars:{...n.vars,[d]:{type:h,value:e}}})},errors:null===(l=a.vars)||void 0===l?void 0:l[d],forceShowErrors:u,isEditPage:c}))})):null):null)))}));var y=n(187),v=n.n(y),E=n(13),w=n(22),x=n(7),S=n(0),k=n(15),M=n(64),_=n(65),A=n(50);function C(){const e=Object(w.useHistory)();return Object(r.useMemo)((()=>{var t;return null!==(t=new URLSearchParams(e.location.search).get("datastreamId"))&&void 0!==t?t:void 0}),[e.location.search])}const F=f.a.div.withConfig({displayName:"ScrollAnchor",componentId:"sc-1gjptyy-0"})(["display:none;scroll-margin-top:var(--euiFixedHeadersOffset,0);"]),D=Object(r.memo)((({packageInputStream:e,packageInfo:t,packagePolicyInputStream:n,updatePackagePolicyInputStream:i,inputStreamValidationResults:a,forceShowErrors:d,isEditPage:h})=>{var f,m,b,y,D;const T=null!==(f=null===(m=Object(k.Mb)().enableExperimental)||void 0===m?void 0:m.includes("experimentalDataStreamSettings"))&&void 0!==f&&f,{params:{packagePolicyId:I}}=Object(w.useRouteMatch)(),P=C(),O=Object(r.useRef)(null),j=!!P&&!!n.id&&n.id===P,B=!!I,L=null===(b=n.vars)||void 0===b?void 0:b[S.u],N=(null==L||null===(y=L.value)||void 0===y?void 0:y.dataset)||(null==L?void 0:L.value),{exists:R,isLoading:z}=Object(A.a)(Object(u.L)({dataset:N||e.data_stream.dataset,type:e.data_stream.type}),B),U=!z&&R;Object(r.useEffect)((()=>{j&&O.current&&O.current.scrollIntoView()}),[j,O]);const Z=d&&Object(p.f)(a),[K,q]=Object(r.useMemo)((()=>{const t=[],n=[];return e.vars&&e.vars.length&&e.vars.forEach((e=>{Object(p.c)(e)?n.push(e):t.push(e)})),[t,n]}),[e]),H=Object(r.useMemo)((()=>q.filter((({name:e})=>{var t,n;return null==a||null===(t=a.vars)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.length})).length),[q,null==a?void 0:a.vars]),{data:W}=Object(x.useQuery)(["datastreams"],(()=>Object(k.I)()),{enabled:"input"===t.type}),V=function(e,t){const[n,i]=Object(E.partition)(Object(E.sortBy)(e,"dataset"),(e=>e.dataset.startsWith(t)));return n.concat(i)}(null!==(D=Object(E.uniq)(null==W?void 0:W.data_streams))&&void 0!==D?D:[],t.name),[G,$]=Object(r.useState)(j),X=Object(r.useMemo)((()=>q.length>0||B&&U||T),[q.length,T,B,U]),J=Object(o.useIsWithinMinBreakpoint)("xxl")?7:5;return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGrid,{columns:2,"data-test-subj":"streamOptions.inputStreams"},s.a.createElement(F,{ref:O}),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart"},s.a.createElement(o.EuiFlexItem,{grow:1}),s.a.createElement(o.EuiFlexItem,{grow:J},s.a.createElement(o.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",justifyContent:"spaceBetween"},"input"!==t.type&&s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiSwitch,{"data-test-subj":"streamOptions.switch",label:e.title,disabled:n.keep_enabled,checked:n.enabled,onChange:e=>{const t=e.target.checked;i({enabled:t})}})),e.data_stream.release&&"ga"!==e.data_stream.release?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(c.n,{release:Object(u.cb)(e.data_stream.release)})):null),"input"!==t.type&&e.description?s.a.createElement(r.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(o.EuiText,{size:"s",color:"subdued"},s.a.createElement(v.a,null,e.description))):null))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},K.map((e=>{var r,l;if(null==n||!n.vars)return null;const{name:u,type:c}=e,f=null===(r=n.vars)||void 0===r?void 0:r[u],p=null==f?void 0:f.value,m=null!==(l=null==f?void 0:f.frozen)&&void 0!==l&&l;return s.a.createElement(o.EuiFlexItem,{key:u},s.a.createElement(g.PackagePolicyInputVarField,{varDef:e,value:p,frozen:m,onChange:e=>{i({vars:{...n.vars,[u]:{type:c,value:e}}})},errors:null==a?void 0:a.vars[u],forceShowErrors:d,packageType:t.type,packageName:t.name,datastreams:V,isEditPage:h}))})),X&&s.a.createElement(r.Fragment,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:G?"arrowDown":"arrowRight",onClick:()=>$(!G),flush:"left","data-test-subj":`advancedStreamOptionsToggle-${n.id}`},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.toggleAdvancedOptionsButtonText",defaultMessage:"Advanced options"}))),!G&&Z&&H?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:H}}))):null)),G?s.a.createElement(s.a.Fragment,null,q.map((e=>{var r,l;if(!n.vars)return null;const{name:u,type:c}=e,f=null===(r=n.vars)||void 0===r||null===(l=r[u])||void 0===l?void 0:l.value;return s.a.createElement(o.EuiFlexItem,{key:u},s.a.createElement(g.PackagePolicyInputVarField,{varDef:e,value:f,onChange:e=>{i({vars:{...n.vars,[u]:{type:c,value:e}}})},errors:null==a?void 0:a.vars[u],forceShowErrors:d,packageType:t.type,packageName:t.name,datastreams:V,isEditPage:h}))})),B&&U&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexItem,null,s.a.createElement(M.a,{packageInputStream:n,packageInfo:t,customDataset:N})),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(_.a,{packageInputStream:n,packageInfo:t,customDataset:N})))):null)))))})),T=f()(o.EuiHorizontalRule).withConfig({displayName:"ShortenedHorizontalRule",componentId:"sc-1p32kp-0"})(["&&&{width:","%;margin-left:auto;}"],11/12*100),I=Object(r.memo)((({packageInput:e,packageInfo:t,packageInputStreams:n,packagePolicyInput:i,updatePackagePolicyInput:a,inputValidationResults:u,forceShowErrors:c,isEditPage:d=!1})=>{const h=C(),{isAgentlessEnabled:f}=Object(m.a)(),[g,y]=Object(r.useState)((()=>((e,t,n,i)=>!!n.enabled&&(Object(p.b)(e.vars,n.vars)||t.some((e=>{var t;return e.enabled&&Object(p.b)(e.vars,null===(t=n.streams.find((t=>e.data_stream.dataset===t.data_stream.dataset)))||void 0===t?void 0:t.vars)}))||n.streams.some((e=>i&&e.id&&e.id===i))))(e,n,i,h))),v=Object(r.useCallback)((e=>{var t,n;return!!e.hide_in_deployment_modes&&(f&&!(null===(t=e.hide_in_deployment_modes)||void 0===t||!t.find((e=>"agentless"===e)))||!f&&!(null===(n=e.hide_in_deployment_modes)||void 0===n||!n.find((e=>"default"===e))))}),[f]),E=Object(r.useCallback)((e=>!!e.vars&&e.vars.length>0&&!!e.vars.find((e=>!v(e)))),[v]),w=u&&Object(p.a)(u),x=c&&w,S=Object(r.useMemo)((()=>n.length>0),[n.length]),k=Object(r.useMemo)((()=>n.filter((e=>E(e))).map((e=>({packageInputStream:e,packagePolicyInputStream:i.streams.find((t=>t.data_stream.dataset===e.data_stream.dataset))}))).filter((e=>Boolean(e.packagePolicyInputStream)))),[E,n,i.streams]),M=Object(r.useMemo)((()=>Object(o.htmlIdGenerator)()()),[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiSwitch,{"data-test-subj":"PackagePolicy.InputStreamConfig.Switch",label:s.a.createElement(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiTitle,{size:"xs"},s.a.createElement("h3",{"data-test-subj":"PackagePolicy.InputStreamConfig.title",id:M},e.title||e.type)))),checked:i.enabled,disabled:i.keep_enabled,onChange:e=>{const t=e.target.checked;a({enabled:t,streams:i.streams.map((e=>({...e,enabled:t})))}),!t&&g&&y(!1)}})),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},x?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:w}}))):null,s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{color:x?"danger":"primary",onClick:()=>y(!g),iconType:g?"arrowUp":"arrowDown",iconSide:"right","aria-expanded":g,"aria-labelledby":M},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.expandLabel",defaultMessage:"Change defaults"})))))),g?s.a.createElement(o.EuiSpacer,{size:"l"}):null,g&&e.vars&&e.vars.length?s.a.createElement(r.Fragment,null,s.a.createElement(b,{"data-test-subj":"PackagePolicy.InputConfig",hasInputStreams:S,packageInputVars:e.vars,packagePolicyInput:i,updatePackagePolicyInput:a,inputVarsValidationResults:{vars:null==u?void 0:u.vars},forceShowErrors:c,isEditPage:d}),S?s.a.createElement(T,{margin:"m"}):s.a.createElement(o.EuiSpacer,{size:"l"})):null,g?s.a.createElement(o.EuiFlexGroup,{direction:"column","data-test-subj":"PackagePolicy.InputConfig.streams"},k.map((({packageInputStream:e,packagePolicyInputStream:n},r)=>s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(D,{"data-test-subj":"PackagePolicy.InputStreamConfig",packageInfo:t,packageInputStream:e,packagePolicyInputStream:n,updatePackagePolicyInputStream:t=>{const n=i.streams.findIndex((t=>t.data_stream.dataset===e.data_stream.dataset)),r=[...i.streams];r[n]={...r[n],...t};const s={streams:r};!i.enabled&&t.enabled?s.enabled=!0:i.enabled&&!r.find((e=>e.enabled))&&(s.enabled=!1),a(s)},inputStreamValidationResults:null==u?void 0:u.streams[n.data_stream.dataset],forceShowErrors:c,isEditPage:d}),r!==k.length-1?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(T,{margin:"none"})):null)))):null)})),P=({packageInfo:e,showOnlyIntegration:t,packagePolicy:n,updatePackagePolicy:i,validationResults:a,submitAttempted:h,noTopRule:f=!1,isEditPage:p=!1})=>{const m=Object(r.useMemo)((()=>Object(d.f)(e)),[e]),g=Object(r.useMemo)((()=>t?(e.policy_templates||[]).filter((e=>e.name===t)):e.policy_templates||[]),[e.policy_templates,t]);return a?g.length?s.a.createElement(s.a.Fragment,null,!f&&s.a.createElement(o.EuiHorizontalRule,{margin:"m"}),s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},g.map((t=>Object(u.H)(t).map((r=>{var l,c;const d=n.inputs.find((e=>e.type===r.type&&(!m||e.policy_template===t.name))),f=Object(u.M)(r.type,e,m&&Object(u.W)(t)?t.data_streams:[]);return d?s.a.createElement(o.EuiFlexItem,{key:r.type},s.a.createElement(I,{packageInput:r,packageInfo:e,packageInputStreams:f,packagePolicyInput:d,updatePackagePolicyInput:e=>{const a=n.inputs.findIndex((e=>e.type===r.type&&(!m||e.policy_template===t.name))),s=[...n.inputs];s[a]={...s[a],...e},i({inputs:s})},inputValidationResults:null!==(l=null==a||null===(c=a.inputs)||void 0===c?void 0:c[m?`${t.name}-${d.type}`:d.type])&&void 0!==l?l:{},forceShowErrors:h,isEditPage:p}),s.a.createElement(o.EuiHorizontalRule,{margin:"m"})):null})))))):s.a.createElement(o.EuiEmptyPrompt,{iconType:"checkInCircleFilled",iconColor:"success",body:s.a.createElement(o.EuiText,null,s.a.createElement("p",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.noPolicyOptionsMessage",defaultMessage:"Nothing to configure"})))}):s.a.createElement(c.p,null)};var O=n(4);const j=f()(o.EuiDescribedFormGroup).withConfig({displayName:"FormGroupResponsiveFields",componentId:"sc-fu67xi-0"})(["@media (max-width:767px){[class*='euiFlexGroup-responsive']{align-items:flex-start;}}"]),B=Object(r.memo)((({namespacePlaceholder:e,packageInfo:t,packagePolicy:n,updatePackagePolicy:a,validationResults:u,submitAttempted:d,noAdvancedToggle:h=!1,isEditPage:f=!1})=>{const{docLinks:m}=Object(i.sc)(),[b,y]=Object(r.useState)(h),v=[],E=[];t.vars&&t.vars.forEach((e=>{Object(p.c)(e)?E.push(e):v.push(e)}));const w=n.is_managed;return u?s.a.createElement(s.a.Fragment,null,w&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiCallOut,{title:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.managedReadonly",defaultMessage:"This is a managed package policy. You cannot modify it here."}),iconType:"lock"}),s.a.createElement(o.EuiSpacer,{size:"m"})),s.a.createElement(j,{fullWidth:!0,title:s.a.createElement("h3",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.integrationSettingsSectionTitle",defaultMessage:"Integration settings"})),description:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.integrationSettingsSectionDescription",defaultMessage:"Choose a name and description to help identify how this integration will be used."})},s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{fullWidth:!0,isInvalid:!!u.name,error:u.name,label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNameInputLabel",defaultMessage:"Integration name"})},s.a.createElement(o.EuiFieldText,{fullWidth:!0,readOnly:w,value:n.name,onChange:e=>a({name:e.target.value}),"data-test-subj":"packagePolicyNameInput"}))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{fullWidth:!0,label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDescriptionInputLabel",defaultMessage:"Description"}),labelAppend:s.a.createElement(o.EuiText,{size:"xs",color:"subdued"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})),isInvalid:!!u.description,error:u.description},s.a.createElement(o.EuiFieldText,{fullWidth:!0,readOnly:w,value:n.description,onChange:e=>a({description:e.target.value}),"data-test-subj":"packagePolicyDescriptionInput"}))),v.map((e=>{var t,i;const{name:r,type:l}=e;if(!n.vars||!n.vars[r])return null;const c=n.vars[r].value;return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(g.PackagePolicyInputVarField,{varDef:e,value:c,onChange:e=>{a({vars:{...n.vars,[r]:{type:l,value:e}}})},errors:null!==(t=null==u||null===(i=u.vars)||void 0===i?void 0:i[r])&&void 0!==t?t:[],forceShowErrors:d,isEditPage:f}))})),!h&&!w&&s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiButtonEmpty,{size:"xs",iconType:b?"arrowDown":"arrowRight",onClick:()=>y(!b),flush:"left"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.advancedOptionsToggleLinkText",defaultMessage:"Advanced options"}))),!b&&u.namespace?s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(o.EuiText,{color:"danger",size:"s"},s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.errorCountText",defaultMessage:"{count, plural, one {# error} other {# errors}}",values:{count:1}}))):null)),b?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{isInvalid:!!u.namespace,error:u.namespace,label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceInputLabel",defaultMessage:"Namespace"}),helpText:f&&"input"===t.type?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyInputOnlyEditNamespaceHelpLabel",defaultMessage:"The namespace cannot be changed for this integration. Create a new integration policy to use a different namespace."}):s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceHelpLabel",defaultMessage:"Change the default namespace inherited from the selected Agent policy. This setting changes the name of the integration's data stream. {learnMore}.",values:{learnMore:s.a.createElement(o.EuiLink,{href:m.links.fleet.datastreamsNamingScheme,target:"_blank"},O.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyNamespaceHelpLearnMoreLabel",{defaultMessage:"Learn more"}))}})},s.a.createElement(o.EuiComboBox,{"data-test-subj":"packagePolicyNamespaceInput",noSuggestions:!0,placeholder:e,isDisabled:f&&"input"===t.type,singleSelection:!0,selectedOptions:n.namespace?[{label:n.namespace}]:[],onCreateOption:e=>{a({namespace:e})},onChange:e=>{a({namespace:e.length?e[0].label:""})}}))),s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiFormRow,{label:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDataRetentionLabel",defaultMessage:"Data retention settings"}),helpText:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDataRetentionText",defaultMessage:"By default all logs and metrics data are stored on the hot tier. {learnMore} about changing the data retention policy for this integration.",values:{learnMore:s.a.createElement(o.EuiLink,{href:m.links.fleet.datastreamsILM,target:"_blank"},O.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigure.packagePolicyDataRetentionLearnMoreLink",{defaultMessage:"Learn more"}))}})},s.a.createElement("div",null))),E.map((e=>{var t,i;const{name:r,type:l}=e;if(!n.vars||!n.vars[r])return null;const c=n.vars[r].value;return s.a.createElement(o.EuiFlexItem,{key:r},s.a.createElement(g.PackagePolicyInputVarField,{varDef:e,value:c,onChange:e=>{a({vars:{...n.vars,[r]:{type:l,value:e}}})},errors:null!==(t=null==u||null===(i=u.vars)||void 0===i?void 0:i[r])&&void 0!==t?t:[],forceShowErrors:d,isEditPage:f}))})))):null))):s.a.createElement(c.p,null)}));var L=n(342),N=n(343);const R=f()(o.EuiFormRow).withConfig({displayName:"AgentPolicyFormRow",componentId:"sc-1lyeft6-0"})([".euiFormRow__label{width:100%;}"]),z=({packageInfo:e,agentPolicies:t,updateAgentPolicies:n,setHasAgentPolicyError:a,initialSelectedAgentPolicyIds:u})=>{const{isReady:h}=Object(i.Kb)(),[f,p]=Object(r.useState)(),{canUseMultipleAgentPolicies:m}=Object(i.kc)(),{isLoading:g,agentPoliciesError:b,agentPolicyOptions:y,agentPolicyMultiOptions:v,agentPolicies:E}=Object(N.a)(e),[w,x]=Object(r.useState)([]),[S,k]=Object(r.useState)(!0),[M,_]=Object(r.useState)(!1),[A,C]=Object(r.useState)(t),F=Object(r.useCallback)((e=>{C(e),n(e)}),[n]);Object(r.useEffect)((()=>{const e=w.every((e=>t.map((e=>e.id)).includes(e)));0!==t.length&&e?e&&w.length<t.length&&(p(void 0),F(t.filter((e=>w.includes(e.id))))):(async()=>{if(w.length>0){_(!0);const{data:e,error:t}=await Object(i.h)(w,{full:!0});t?(p(t),F([])):e&&e.items&&(p(void 0),F(e.items)),_(!1)}else p(void 0),F([])})()}),[w,t,F]),Object(r.useEffect)((()=>{if(S&&0===w.length&&E.length&&(m?v.length:y.length))if(k(!1),m){const e=v.filter((e=>!e.disabled));1===e.length&&0===u.length?x([e[0].key]):u.length>0&&x(u)}else{const e=y.filter((e=>!e.disabled));1===e.length?x([e[0].value]):u.length>0&&x(u)}}),[y,v,m,u,w,E,S]),Object(r.useEffect)((()=>{w.length>0&&!f?a(!1):a(!0)}),[f,w,a]);const D=Object(r.useCallback)((e=>x(""===e?[]:[e])),[]);if(b)return s.a.createElement(c.i,{title:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.errorLoadingAgentPoliciesTitle",defaultMessage:"Error loading agent policies"}),error:b});const T=!e||A.filter((e=>!u.find((t=>e.id===t)))).some((t=>{return i=e,!!(n=t)&&Object(d.k)(i)&&Object(d.e)(n,i.name);var n,i}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(o.EuiDescribedFormGroup,{title:s.a.createElement(o.EuiTitle,{size:"xs"},s.a.createElement("h3",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyFormGroupTitle",defaultMessage:"Agent policy"}))),description:s.a.createElement(o.EuiText,{color:"subdued",size:"s"},s.a.createElement("p",null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyFormGroupDescription",defaultMessage:"Agent policies are used to manage a group of integrations across a set of agents."})))},s.a.createElement(R,{fullWidth:!0,label:s.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween"},s.a.createElement(o.EuiFlexItem,null,s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyLabel",defaultMessage:"Agent policy"}))),helpText:h&&w.length>0&&!M?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyAgentsDescriptionText",defaultMessage:"{count, plural, one {# agent is} other {# agents are}} enrolled with the selected agent policies.",values:{count:A.reduce(((e,t)=>{var n;return e+(null!==(n=t.agents)&&void 0!==n?n:0)}),0)}}):null,isInvalid:Boolean(0===w.length||T),error:0===w.length?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.noPolicySelectedError",defaultMessage:"An agent policy is required."}):T?s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.cannotAddLimitedIntegrationError",defaultMessage:"This integration can only be added once per agent policy."}):null},m?s.a.createElement(L.a,{isLoading:g||!e||M,selectedPolicyIds:w,setSelectedPolicyIds:x,agentPolicyMultiOptions:v,selectedAgentPolicies:t}):s.a.createElement(o.EuiSuperSelect,{placeholder:O.i18n.translate("xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyPlaceholderText",{defaultMessage:"Select an agent policy to add this integration to"}),fullWidth:!0,isLoading:g||!e||M,options:y,valueOfSelected:w[0],onChange:D,"data-test-subj":"agentPolicySelect","aria-label":"Select Agent Policy"})))),f?s.a.createElement(o.EuiFlexItem,null,s.a.createElement(c.i,{title:s.a.createElement(l.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.errorLoadingSelectedAgentPolicyTitle",defaultMessage:"Error loading selected agent policy"}),error:f})):null))};var U=n(144),Z=n(16);let K=function(e){return e.NEW="new",e.EXISTING="existing",e}({});const q=f()(o.EuiTabbedContent).withConfig({displayName:"StyledEuiTabbedContent",componentId:"sc-b5i55v-0"})(["[role='tabpanel']{padding-top:",";}"],(e=>e.theme.eui.euiSizeM)),H=({agentPolicies:e,updateAgentPolicies:t,newAgentPolicy:n,updateNewAgentPolicy:a,withSysMonitoring:o,updateSysMonitoring:l,validation:u,packageInfo:c,setHasAgentPolicyError:h,updateSelectedTab:f,selectedAgentPolicyIds:p,initialSelectedTabIndex:m})=>{let g=[];const{data:b,error:y}=Object(i.Mb)({page:1,perPage:Z.t,sortField:"name",sortOrder:"asc",full:!1,noAgentCount:!0});y&&console.debug("Could not retrieve agent policies"),g=Object(r.useMemo)((()=>(null==b?void 0:b.items.filter((e=>!e.is_managed)))||[]),[null==b?void 0:b.items]),Object(r.useEffect)((()=>{g.length>0&&a({...n,name:Object(d.i)(g)})}),[g.length]);const v=[{id:K.NEW,"data-test-subj":"newHostsTab",name:"New hosts",content:s.a.createElement(U.e,{agentPolicy:n,updateAgentPolicy:a,withSysMonitoring:o,updateSysMonitoring:l,validation:u})},{id:K.EXISTING,"data-test-subj":"existingHostsTab",name:"Existing hosts",content:s.a.createElement(z,{packageInfo:c,agentPolicies:e,updateAgentPolicies:t,setHasAgentPolicyError:h,initialSelectedAgentPolicyIds:p})}];return g.length>0?s.a.createElement(q,{initialSelectedTab:m?v[m]:p.length>0?v[1]:v[0],tabs:v,onTabClick:e=>f(e.id)}):s.a.createElement(U.e,{agentPolicy:n,updateAgentPolicy:a,withSysMonitoring:o,updateSysMonitoring:l,validation:u})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(20),a=n.n(i),r=n(1),s=n.n(r),o=n(58),l=n.n(o),u=n(6),c=n(4),d=n(12);const h=l.a.div.withConfig({displayName:"DraggableDiv",componentId:"sc-1mhwh70-0"})(["margin:",";"],(e=>e.theme.eui.euiSizeS));function f(e){return null!=e&&e.length?e.map(((e,t)=>s.a.createElement(u.EuiFormErrorText,{key:t},e))):null}const p=s.a.memo((({id:e,index:t,multiline:n,value:i,onChange:l,onDelete:d,placeholder:p,autoFocus:m,errors:g,disabled:b})=>{var y;const v=Object(r.useCallback)((()=>{d(t)}),[d,t]),E=(null!==(y=null==g?void 0:g.length)&&void 0!==y?y:0)>0,w=Object(o.useTheme)();return s.a.createElement(u.EuiDraggable,{spacing:"m",index:t,draggableId:e,isDragDisabled:b,customDragHandle:!0,style:{paddingLeft:0,paddingRight:0}},((e,t)=>s.a.createElement(u.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1,style:t.isDragging?{background:w.eui.euiPanelBackgroundColorModifiers.plain}:{}},s.a.createElement(u.EuiFlexItem,{grow:!1},s.a.createElement(h,a()({},e.dragHandleProps,{"aria-label":c.i18n.translate("xpack.fleet.settings.sortHandle",{defaultMessage:"Sort host handle"})}),s.a.createElement(u.EuiIcon,{color:"text",type:"grab"}))),s.a.createElement(u.EuiFlexItem,null,n?s.a.createElement(u.EuiTextArea,{fullWidth:!0,value:i,onChange:l,autoFocus:m,isInvalid:E,disabled:b,placeholder:p}):s.a.createElement(u.EuiFieldText,{fullWidth:!0,value:i,onChange:l,autoFocus:m,isInvalid:E,disabled:b,placeholder:p}),f(g)),s.a.createElement(u.EuiFlexItem,{grow:!1},s.a.createElement(u.EuiButtonIcon,{color:"text",onClick:v,iconType:"cross",disabled:b,"aria-label":c.i18n.translate("xpack.fleet.multiRowInput.deleteButton",{defaultMessage:"Delete row"})})))))})),m=s.a.memo((({index:e,deletable:t,multiline:n,value:i,onChange:a,onDelete:o,placeholder:l,autoFocus:d,errors:h,disabled:p})=>{var m;const g=Object(r.useCallback)((()=>{o(e)}),[o,e]),b=(null!==(m=null==h?void 0:h.length)&&void 0!==m?m:0)>0;return s.a.createElement(s.a.Fragment,null,e>0&&s.a.createElement(u.EuiSpacer,{size:"s"}),s.a.createElement(u.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},s.a.createElement(u.EuiFlexItem,null,n?s.a.createElement(u.EuiTextArea,{fullWidth:!0,value:i,onChange:a,autoFocus:d,isInvalid:b,disabled:p,placeholder:l}):s.a.createElement(u.EuiFieldText,{fullWidth:!0,value:i,onChange:a,autoFocus:d,isInvalid:b,disabled:p,placeholder:l}),f(h)),t&&s.a.createElement(u.EuiFlexItem,{grow:!1},s.a.createElement(u.EuiButtonIcon,{color:"text",onClick:g,iconType:"cross",disabled:p,"aria-label":c.i18n.translate("xpack.fleet.multiRowInput.deleteButton",{defaultMessage:"Delete row"})}))))})),g=({id:e,value:t,onChange:n,helpText:i,label:a,isInvalid:o,errors:l,disabled:c,placeholder:h,multiline:g=!1,sortable:b=!0,isUrl:y})=>{const[v,E]=Object(r.useState)(!1),w=Object(r.useMemo)((()=>t.length?t:[""]),[t]),x=Object(r.useMemo)((()=>w.map(((e,t)=>({value:e,onChange:e=>{const i=[...w];i[t]=e.target.value,n(i)}})))),[w,n]),S=Object(r.useMemo)((()=>l?l.reduce(((e,t)=>(void 0===t.index||(e[t.index]||(e[t.index]=[]),e[t.index].push(t.message)),e)),[]):[]),[l]),k=Object(r.useCallback)((e=>{S.splice(e,1),n([...w.slice(0,e),...w.slice(e+1)])}),[w,n,S]),M=Object(r.useCallback)((()=>{E(!0),n([...w,""])}),[w,n]),_=Object(r.useCallback)((({source:e,destination:t})=>{if(e&&t){const i=Object(u.euiDragDropReorder)(w,e.index,t.index),a=S[e.index];S.splice(e.index,1),S.splice(t.index,0,a),n(i)}}),[w,n,S]),A=Object(r.useMemo)((()=>l&&l.filter((e=>void 0===e.index)).map((({message:e})=>e))),[l]),C=b&&x.length>1;return s.a.createElement(u.EuiFormRow,{fullWidth:!0,label:a,isInvalid:o},s.a.createElement(s.a.Fragment,null,s.a.createElement(u.EuiFormHelpText,null,i),i&&s.a.createElement(u.EuiSpacer,{size:"m"}),C?s.a.createElement(u.EuiDragDropContext,{onDragEnd:_},s.a.createElement(u.EuiDroppable,{droppableId:`${e}Droppable`,spacing:"none"},x.map(((t,n)=>s.a.createElement(s.a.Fragment,{key:n},s.a.createElement(p,{id:`${e}${n}Draggable`,index:n,onChange:t.onChange,onDelete:k,value:t.value,autoFocus:v,errors:S[n],disabled:c,placeholder:h})))))):x.map(((e,t)=>s.a.createElement(m,{key:t,multiline:g,index:t,onChange:e.onChange,onDelete:k,value:e.value,autoFocus:v,errors:S[t],disabled:c,placeholder:h,deletable:x.length>1}))),f(A),s.a.createElement(u.EuiSpacer,{size:"m"}),s.a.createElement(u.EuiButtonEmpty,{"data-test-subj":"fleetServerHosts.multiRowInput.addRowButton",disabled:c,size:"xs",flush:"left",iconType:"plusInCircle",onClick:M},y?s.a.createElement(d.FormattedMessage,{id:"xpack.fleet.multiRowInput.addAnotherUrl",defaultMessage:"Add another URL"}):s.a.createElement(d.FormattedMessage,{id:"xpack.fleet.multiRowInput.addRow",defaultMessage:"Add row"}))))}},function(e,t,n){var i=n(119).Buffer,a=n(226).Transform,r=n(176).StringDecoder;function s(e){a.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(118)(s,a),s.prototype.update=function(e,t,n){"string"==typeof e&&(e=i.from(e,t));var a=this._update(e);return this.hashMode?this:(n&&(a=this._toString(a,n)),a)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,n){var i;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){i=e}finally{n(i)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||i.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new r(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var i=this._decoder.write(e);return n&&(i+=this._decoder.end()),i},e.exports=s},,,function(e,t,n){"use strict";var i=n(195),a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var r=Object.create(n(175));r.inherits=n(118);var s=n(298),o=n(229);r.inherits(d,s);for(var l=a(o.prototype),u=0;u<l.length;u++){var c=l[u];d.prototype[c]||(d.prototype[c]=o.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return r})),n.d(t,"i",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"j",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return d})),n.d(t,"g",(function(){return h}));const i=e=>{var t,n,i,a,r,s,o,l,u,c;return{templateUrl:null==e||null===(t=e.inputs)||void 0===t||null===(n=t.find((e=>e.enabled)))||void 0===n||null===(i=n.config)||void 0===i||null===(a=i.arm_template_url)||void 0===a?void 0:a.value,azureAccountType:null==e||null===(r=e.inputs)||void 0===r||null===(s=r.find((e=>e.enabled)))||void 0===s||null===(o=s.streams)||void 0===o||null===(l=o[0])||void 0===l||null===(u=l.vars)||void 0===u||null===(c=u["azure.account_type"])||void 0===c?void 0:c.value}},a=e=>{var t,n,i,a,r,s,o;const l=null==e||null===(t=e.inputs)||void 0===t?void 0:t.reduce(((e,t)=>{var n;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.config)&&void 0!==n&&n.cloud_formation_template_url?t.config.cloud_formation_template_url.value:e}),"");return{templateUrl:""!==l?l:void 0,awsAccountType:null==e||null===(n=e.inputs)||void 0===n||null===(i=n.find((e=>e.enabled)))||void 0===i||null===(a=i.streams)||void 0===a||null===(r=a[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["aws.account_type"])||void 0===o?void 0:o.value}},r={CLOUD_FORMATION:"cloud_formation_template_url",ARM_TEMPLATE:"arm_template_url"},s=(e,t)=>{var n;const i=null==t||null===(n=t.package_policies)||void 0===n?void 0:n.reduce(((t,n)=>{var i;return(null===(i=n.inputs)||void 0===i?void 0:i.reduce(((t,n)=>{var i;return""!==t?t:null!=n&&n.enabled&&null!=n&&null!==(i=n.config)&&void 0!==i&&i[e]?n.config[e].value:t}),""))||t}),"");return""!==i?i:void 0},o={CLOUD_FORMATION:"cloud_formation_template",CLOUD_FORMATION_CREDENTIALS:"cloud_formation_credentials_template",ARM_TEMPLATE:"arm_template_url",CLOUD_SHELL_URL:"cloud_shell_url"},l=(e,t,n)=>{if(null==e||!e.policy_templates)return;const i=e.policy_templates.find((e=>e.name===t));if(i&&"inputs"in i){var a;const e=null===(a=i.inputs)||void 0===a?void 0:a.reduce(((e,t)=>{var i;if(!t.vars)return e;const a=null===(i=t.vars.find((e=>e.name===n)))||void 0===i?void 0:i.default;return a?String(a):e}),"");return""!==e?e:void 0}},u=e=>{var t;const n=null==e||null===(t=e.inputs)||void 0===t?void 0:t.reduce(((e,t)=>{var n;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.config)&&void 0!==n&&n.cloud_shell_url?t.config.cloud_shell_url.value:e}),"");return""!==n?n:void 0},c=e=>{var t;const n=null==e||null===(t=e.package_policies)||void 0===t?void 0:t.reduce(((e,t)=>{var n;return(null===(n=t.inputs)||void 0===n?void 0:n.reduce(((e,t)=>{var n;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.config)&&void 0!==n&&n.cloud_shell_url?t.config.cloud_shell_url.value:e}),""))||e}),"");return""!==n?n:void 0},d=e=>{var t,n,i;let a=null==e||null===(t=e.inputs)||void 0===t?void 0:t.reduce(((e,t)=>{var n,i,a,r,s,o;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.streams[0])&&void 0!==n&&null!==(i=n.vars)&&void 0!==i&&null!==(a=i["gcp.project_id"])&&void 0!==a&&a.value?null==t||null===(r=t.streams[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["gcp.project_id"])||void 0===o?void 0:o.value:e}),""),r=null==e||null===(n=e.inputs)||void 0===n?void 0:n.reduce(((e,t)=>{var n,i,a,r,s,o;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.streams[0])&&void 0!==n&&null!==(i=n.vars)&&void 0!==i&&null!==(a=i["gcp.organization_id"])&&void 0!==a&&a.value?null==t||null===(r=t.streams[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["gcp.organization_id"])||void 0===o?void 0:o.value:e}),""),s=null==e||null===(i=e.inputs)||void 0===i?void 0:i.reduce(((e,t)=>{var n,i,a,r,s,o;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.streams[0])&&void 0!==n&&null!==(i=n.vars)&&void 0!==i&&null!==(a=i["gcp.account_type"])&&void 0!==a&&a.value?null==t||null===(r=t.streams[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["gcp.account_type"])||void 0===o?void 0:o.value:e}),"");return a=""!==a?a:void 0,r=""!==r?r:void 0,s=""!==s?s:void 0,{gcpProjectId:a,gcpOrganizationId:r,gcpAccountType:s}},h=e=>{var t,n,i;let a=null==e||null===(t=e.package_policies)||void 0===t?void 0:t.reduce(((e,t)=>{var n;return(null===(n=t.inputs)||void 0===n?void 0:n.reduce(((e,t)=>{var n,i,a,r,s,o;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.streams[0])&&void 0!==n&&null!==(i=n.vars)&&void 0!==i&&null!==(a=i["gcp.project_id"])&&void 0!==a&&a.value?null==t||null===(r=t.streams[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["gcp.project_id"])||void 0===o?void 0:o.value:e}),""))||e}),""),r=null==e||null===(n=e.package_policies)||void 0===n?void 0:n.reduce(((e,t)=>{var n;return(null===(n=t.inputs)||void 0===n?void 0:n.reduce(((e,t)=>{var n,i,a,r,s,o;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.streams[0])&&void 0!==n&&null!==(i=n.vars)&&void 0!==i&&null!==(a=i["gcp.organization_id"])&&void 0!==a&&a.value?null==t||null===(r=t.streams[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["gcp.organization_id"])||void 0===o?void 0:o.value:e}),""))||e}),""),s=null==e||null===(i=e.package_policies)||void 0===i?void 0:i.reduce(((e,t)=>{var n;return(null===(n=t.inputs)||void 0===n?void 0:n.reduce(((e,t)=>{var n,i,a,r,s,o;return""!==e?e:null!=t&&t.enabled&&null!=t&&null!==(n=t.streams[0])&&void 0!==n&&null!==(i=n.vars)&&void 0!==i&&null!==(a=i["gcp.account_type"])&&void 0!==a&&a.value?null==t||null===(r=t.streams[0])||void 0===r||null===(s=r.vars)||void 0===s||null===(o=s["gcp.account_type"])||void 0===o?void 0:o.value:e}),""))||e}),"");return a=""!==a?a:void 0,r=""!==r?r:void 0,s=""!==s?s:void 0,{gcpProjectId:a,gcpOrganizationId:r,gcpAccountType:s}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return s.r})),n.d(t,"e",(function(){return s.s})),n.d(t,"f",(function(){return s.t})),n.d(t,"a",(function(){return s.d}));const i=e=>!(e.show_user||e.required&&void 0===e.default);var a=n(138);const r=(e,t)=>e&&!t||Boolean(e&&e.find((e=>{var n;return e.required&&(!t||!t[e.name]||(null===(n=Object(s.s)(t[e.name],e,e.name,a.safeLoad))||void 0===n?void 0:n.length))})));var s=n(59)},function(e,t,n){"use strict";function i(e){return null==e}e.exports.isNothing=i,e.exports.isObject=function(e){return"object"==typeof e&&null!==e},e.exports.toArray=function(e){return Array.isArray(e)?e:i(e)?[]:[e]},e.exports.repeat=function(e,t){var n,i="";for(n=0;n<t;n+=1)i+=e;return i},e.exports.isNegativeZero=function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},e.exports.extend=function(e,t){var n,i,a,r;if(t)for(n=0,i=(r=Object.keys(t)).length;n<i;n+=1)e[a=r[n]]=t[a];return e}},function(e,t,n){"use strict";var i=n(158),a=n(170),r=n(126);function s(e,t,n){var i=[];return e.include.forEach((function(e){n=s(e,t,n)})),e[t].forEach((function(e){n.forEach((function(t,n){t.tag===e.tag&&t.kind===e.kind&&i.push(n)})),n.push(e)})),n.filter((function(e,t){return-1===i.indexOf(t)}))}function o(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach((function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")})),this.compiledImplicit=s(this,"implicit",[]),this.compiledExplicit=s(this,"explicit",[]),this.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{}};function i(e){n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return n}(this.compiledImplicit,this.compiledExplicit)}o.DEFAULT=null,o.create=function(){var e,t;switch(arguments.length){case 1:e=o.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new a("Wrong number of arguments for Schema.create function")}if(e=i.toArray(e),t=i.toArray(t),!e.every((function(e){return e instanceof o})))throw new a("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every((function(e){return e instanceof r})))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:e,explicit:t})},e.exports=o},function(e,t,n){"use strict";(function(t,i){var a=65536,r=n(119).Buffer,s=t.crypto||t.msCrypto;s&&s.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var n=r.allocUnsafe(e);if(e>0)if(e>a)for(var o=0;o<e;o+=a)s.getRandomValues(n.slice(o,o+a));else s.getRandomValues(n);return"function"==typeof t?i.nextTick((function(){t(null,n)})):n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(139),n(87))},function(e,t,n){var i=n(119).Buffer;function a(e,t){this._block=i.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}a.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=i.from(e,t));for(var n=this._block,a=this._blockSize,r=e.length,s=this._len,o=0;o<r;){for(var l=s%a,u=Math.min(r-o,a-l),c=0;c<u;c++)n[l+c]=e[o+c];o+=u,(s+=u)%a==0&&this._update(n)}return this._len+=r,this},a.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var i=(4294967295&n)>>>0,a=(n-i)/4294967296;this._block.writeUInt32BE(a,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var r=this._hash();return e?r.toString(e):r},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=a},function(e,t,n){"use strict";var i={};function a(e,t,n){n||(n=Error);var a=function(e){var n,i;function a(n,i,a){return e.call(this,function(e,n,i){return"string"==typeof t?t:t(e,n,i)}(n,i,a))||this}return i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i,a}(n);a.prototype.name=n.name,a.prototype.code=e,i[e]=a}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}a("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),a("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,a,s,o,l;if("string"==typeof t&&(a="not ",t.substr(0,4)===a)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-9,n)===t}(e," argument"))s="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var u=("number"!=typeof l&&(l=0),l+1>(o=e).length||-1===o.indexOf(".",l)?"argument":"property");s='The "'.concat(e,'" ').concat(u," ").concat(i," ").concat(r(t,"type"))}return s+". Received type ".concat(typeof n)}),TypeError),a("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),a("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),a("ERR_STREAM_PREMATURE_CLOSE","Premature close"),a("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),a("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),a("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),a("ERR_STREAM_WRITE_AFTER_END","write after end"),a("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),a("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),a("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=i},function(e,t,n){"use strict";(function(t){var i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var a=n(319),r=n(323);n(118)(u,a);for(var s=i(r.prototype),o=0;o<s.length;o++){var l=s[o];u.prototype[l]||(u.prototype[l]=r.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||t.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,n(87))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));var i=n(20),a=n.n(i),r=n(1),s=n.n(r),o=n(6),l=n(140),u=n(58),c=n.n(u);const d=c.a.div.withConfig({displayName:"Wrapper",componentId:"sc-9331ih-0"})(["background-color:",";min-height:calc(100vh - var(--euiFixedHeadersOffset,0));"],(e=>e.theme.eui.euiColorEmptyShade)),h=c()(o.EuiPage).withConfig({displayName:"Page",componentId:"sc-9331ih-1"})(["background:",";width:100%;align-self:center;margin:auto;flex:1;"],(e=>e.theme.eui.euiColorEmptyShade)),f=c.a.div.withConfig({displayName:"ContentWrapper",componentId:"sc-9331ih-2"})(["height:100%;padding-left:",";padding-right:",";"],(e=>e.theme.eui.euiSizeM),(e=>e.theme.eui.euiSizeM)),p=({restrictWidth:e,children:t})=>s.a.createElement(d,null,s.a.createElement(h,{restrictWidth:e||1200},s.a.createElement(o.EuiPageBody,null,s.a.createElement(f,null,s.a.createElement(o.EuiSpacer,{size:"m"}),t)))),m=({restrictWidth:e,restrictHeaderWidth:t,children:n,"data-test-subj":i,isReadOnly:r,...u})=>{const c=Object(o.useIsWithinMinBreakpoint)("xxl")?"80%":"100%";return s.a.createElement(d,null,s.a.createElement(l.m,a()({maxWidth:t||c,"data-test-subj":i?`${i}_header`:void 0},u)),s.a.createElement(h,{restrictWidth:e||c,"data-test-subj":i?`${i}_page`:void 0},s.a.createElement(o.EuiPageBody,null,s.a.createElement(f,null,s.a.createElement(o.EuiSpacer,{size:"m"}),n))))}},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(1),a=n.n(i),r=n(6);const s=({size:e})=>a.a.createElement(r.EuiFlexGroup,{justifyContent:"spaceAround"},a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiLoadingSpinner,{size:e||"xl","data-test-subj":"loadingSpinner"})))},function(e,t,n){"use strict";function i(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t},e.exports=i},function(e,t,n){"use strict";var i=n(159);e.exports=new i({include:[n(295)],implicit:[n(471),n(472)],explicit:[n(473),n(474),n(475),n(476)]})},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return y}));var i=n(483),a=n.n(i),r=n(1),s=n(4),o=n(138),l=n(15),u=n(19),c=n(156),d=n(3);const h=new Set([u.FLEET_KUBERNETES_PACKAGE,u.FLEET_CLOUD_DEFEND_PACKAGE]);function f(e){const[t,n]=Object(r.useState)(null),i=Object(l.Xc)(),{notifications:a}=i;return Object(r.useEffect)((()=>{!async function(e){if(e)try{const t=await Object(l.M)(e);n(t.data?t.data.item:null)}catch(e){a.toasts.addError(e,{title:s.i18n.translate("xpack.fleet.agentEnrollment.loadPolicyErrorMessage",{defaultMessage:"An error happened while loading the policy"})})}}(e)}),[e,a.toasts]),{agentPolicyWithPackagePolicies:t}}function p(e){const[t,n]=Object(r.useState)("IS_LOADING");return Object(r.useEffect)((()=>{!async function(){n(e?e.package_policies.some(g)?"IS_KUBERNETES":"IS_NOT_KUBERNETES":"IS_LOADING")}()}),[e]),{isK8s:t}}function m(e){var t;const n=Object(r.useMemo)((()=>b(e)),[e]),i=null==n||null===(t=n.package)||void 0===t?void 0:t.version,{data:a,isLoading:s}=Object(l.rc)(u.FLEET_CLOUD_SECURITY_POSTURE_PACKAGE,i,{full:!0},{enabled:Boolean(n)});return{cloudSecurityIntegration:Object(r.useMemo)((()=>{var t,i,r,o,l,u,d,h,f,p,m,g,b,y;if(!e||!n)return;const v=null===(t=n.inputs)||void 0===t||null===(i=t.find((e=>e.enabled)))||void 0===i?void 0:i.policy_template;if(!v)return;const E=Object(c.i)(c.a.CLOUD_FORMATION,e),w=Object(c.i)(c.a.ARM_TEMPLATE,e),x=null!=a&&a.item?Object(c.j)(a.item,v,c.b.CLOUD_FORMATION):E,S=null==n||null===(r=n.inputs)||void 0===r||null===(o=r.find((e=>e.enabled)))||void 0===o||null===(l=o.streams)||void 0===l||null===(u=l[0])||void 0===u||null===(d=u.vars)||void 0===d||null===(h=d["aws.account_type"])||void 0===h?void 0:h.value,k=null!=a&&a.item?Object(c.j)(a.item,v,c.b.ARM_TEMPLATE):w,M=null==n||null===(f=n.inputs)||void 0===f||null===(p=f.find((e=>e.enabled)))||void 0===p||null===(m=p.streams)||void 0===m||null===(g=m[0])||void 0===g||null===(b=g.vars)||void 0===b||null===(y=b["azure.account_type"])||void 0===y?void 0:y.value,_=Object(c.e)(e);return{isLoading:s,integrationType:v,isCloudFormation:Boolean(E),cloudFormationProps:{awsAccountType:S,templateUrl:x},isAzureArmTemplate:Boolean(w),azureArmTemplateProps:{azureAccountType:M,templateUrl:k},cloudShellUrl:_}}),[e,null==a?void 0:a.item,s,n])}}const g=e=>{var t;const n=null===(t=e.package)||void 0===t?void 0:t.name;return h.has(n)},b=e=>{var t;return null==e||null===(t=e.package_policies)||void 0===t?void 0:t.find((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===u.FLEET_CLOUD_SECURITY_POSTURE_PACKAGE}))};function y(e,t){const n=Object(l.Xc)(),[i,u]=Object(r.useState)(""),[c,h]=Object(r.useState)(),{apiKey:f,onCreateApiKey:p}=function(){const e=Object(l.Xc)(),[t,n]=Object(r.useState)(void 0);return{apiKey:t,onCreateApiKey:Object(r.useCallback)((async()=>{try{var t,i;const e=await Object(l.p)({name:a.a.randomBytes(16).toString("hex")}),r=`${null===(t=e.data)||void 0===t?void 0:t.item.id}:${null===(i=e.data)||void 0===i?void 0:i.item.api_key}`;n(r)}catch(t){e.notifications.toasts.addError(t,{title:s.i18n.translate("xpack.fleet.standaloneAgentPage.errorCreatingAgentAPIKey",{defaultMessage:"Error creating Agent API Key"})})}}),[e.notifications.toasts])}}();Object(r.useEffect)((()=>{"IS_NOT_KUBERNETES"!==t&&"IS_LOADING"===t||async function(){try{if(null==e||!e.id)return;let n={standalone:!0,kubernetes:!1};"IS_KUBERNETES"===t&&(n={standalone:!0,kubernetes:!0});const i=await Object(l.N)(null==e?void 0:e.id,n);if(i.error)throw i.error;if(!i.data)throw new Error("No data while fetching full agent policy");h(i.data.item)}catch(e){n.notifications.toasts.addError(e,{title:s.i18n.translate("xpack.fleet.standaloneAgentPage.errorFetchingFullAgentPolicy",{defaultMessage:"Error fetching full agent policy"})})}}()}),[n.http.basePath,null==e?void 0:e.id,n.notifications.toasts,f,t,e]),Object(r.useEffect)((()=>{if(c)if("IS_KUBERNETES"===t){if("object"==typeof c)return;u(c)}else{if("string"==typeof c)return;u(Object(d.n)(c,o.safeDump,f))}}),[f,c,t]);const m=Object(r.useMemo)((()=>()=>{const e=document.createElement("a");e.href=`data:text/x-yaml;charset=utf-8,${i}`,e.download="elastic-agent.yml",e.click()}),[i]);return{yaml:i,onCreateApiKey:p,fullAgentPolicy:c,apiKey:f,downloadYaml:m}}},function(e,t,n){"use strict";var i=n(118),a=n(225),r=n(230),s=n(231),o=n(152);function l(e){o.call(this,"digest"),this._hash=e}i(l,o),l.prototype._update=function(e){this._hash.update(e)},l.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new a:"rmd160"===e||"ripemd160"===e?new r:new l(s(e))}},function(e,t,n){"use strict";var i,a="object"==typeof Reflect?Reflect:null,r=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,i){function a(n){e.removeListener(t,r),i(n)}function r(){"function"==typeof e.removeListener&&e.removeListener("error",a),n([].slice.call(arguments))}b(e,t,r,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&b(e,"error",t,{once:!0})}(e,a)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var a,r,s,o;if(u(n),void 0===(r=e._events)?(r=e._events=Object.create(null),e._eventsCount=0):(void 0!==r.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),r=e._events),s=r[t]),void 0===s)s=r[t]=n,++e._eventsCount;else if("function"==typeof s?s=r[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(a=c(e))>0&&s.length>a&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,o=l,console&&console.warn&&console.warn(o)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=h.bind(i);return a.listener=n,i.wrapFn=a,a}function p(e,t,n){var i=e._events;if(void 0===i)return[];var a=i[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):g(a,a.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function b(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function a(r){i.once&&e.removeEventListener(t,a),n(r)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var u=l.length,c=g(l,u);for(n=0;n<u;++n)r(c[n],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,i,a,r,s;if(u(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,r=n.length-1;r>=0;r--)if(n[r]===t||n[r].listener===t){s=n[r].listener,a=r;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,r=Object.keys(n);for(i=0;i<r.length;++i)"removeListener"!==(a=r[i])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(86).Buffer)},function(e,t,n){"use strict";var i=n(491).Buffer,a=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===a||!a(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},r.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var a=s(t[i]);return a>=0?(a>0&&(e.lastNeed=a-1),a):--i<n||-2===a?0:(a=s(t[i]))>=0?(a>0&&(e.lastNeed=a-2),a):--i<n||-2===a?0:(a=s(t[i]))>=0?(a>0&&(2===a?a=0:e.lastNeed=a-3),a):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){(function(t){e.exports=function(e,n){for(var i=Math.min(e.length,n.length),a=new t(i),r=0;r<i;++r)a[r]=e[r]^n[r];return a}}).call(this,n(86).Buffer)},function(e,t,n){"use strict";var i=n(143),a=n(135);function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=r,r.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-n,this.endian);for(var a=0;a<e.length;a+=this._delta32)this._update(e,a,a+this._delta32)}return this},r.prototype.digest=function(e){return this.update(this._pad()),a(null===this.pending),this._digest(e)},r.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,i=new Array(n+this.padLength);i[0]=128;for(var a=1;a<n;a++)i[a]=0;if(e<<=3,"big"===this.endian){for(var r=8;r<this.padLength;r++)i[a++]=0;i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=e>>>24&255,i[a++]=e>>>16&255,i[a++]=e>>>8&255,i[a++]=255&e}else for(i[a++]=255&e,i[a++]=e>>>8&255,i[a++]=e>>>16&255,i[a++]=e>>>24&255,i[a++]=0,i[a++]=0,i[a++]=0,i[a++]=0,r=8;r<this.padLength;r++)i[a++]=0;return i}},function(e,t,n){"use strict";const i=n(118),a=n(244).Reporter,r=n(242).Buffer;function s(e,t){a.call(this,t),r.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return o.isEncoderBuffer(e)||(e=new o(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=r.byteLength(e);else{if(!r.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}i(s,a),t.DecoderBuffer=s,s.isDecoderBuffer=function(e){return e instanceof s||"object"==typeof e&&r.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},s.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},s.prototype.restore=function(e){const t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,a.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=o,o.isEncoderBuffer=function(e){return e instanceof o||"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},o.prototype.join=function(e,t){return e||(e=r.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):r.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var i=n(1),a=n(59),r=n(247),s=n(17),o=n(149),l=n(0);const u=()=>{const{agentless:e}=a.b.get(),{cloud:t}=Object(s.sc)(),n=!(null==t||!t.isServerlessEnabled),i=e&&n;return{isAgentlessEnabled:i,isAgentlessAgentPolicy:e=>!!e&&i&&((null==e?void 0:e.id)===l.a||!(null==e||!e.supports_agentless)),isAgentlessIntegration:e=>!!(i&&null!=e&&e.policy_templates&&(null==e?void 0:e.policy_templates.length)>0&&null!=e&&e.policy_templates.find((e=>{var t;return!0===(null==e||null===(t=e.deployment_modes)||void 0===t?void 0:t.agentless.enabled)}))),isAgentlessPackagePolicy:e=>i&&e.policy_ids.includes(l.a)}};function c({updateNewAgentPolicy:e,newAgentPolicy:t,updateAgentPolicies:n,setSelectedPolicyTab:a,packageInfo:c}){const{isAgentlessEnabled:d,isAgentlessIntegration:h}=u(),[f,p]=Object(i.useState)(r.a.AGENT_BASED),[m,g]=Object(i.useState)();return Object(i.useEffect)((()=>{d&&c&&h(c)&&p(r.a.AGENTLESS)}),[d,h,c]),Object(i.useEffect)((()=>{d&&(async()=>{const{data:e,error:t}=await Object(s.F)(l.a);!t&&e&&e.item&&g(e.item)})()}),[d]),{handleSetupTechnologyChange:Object(i.useCallback)((i=>{d&&i!==f&&(i===r.a.AGENTLESS?m&&(n([m]),a(o.b.EXISTING)):i===r.a.AGENT_BASED&&(e(t),a(o.b.NEW),n([])),p(i))}),[d,f,m,n,a,e,t]),agentlessPolicy:m,selectedSetupTechnology:f}}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return j})),n.d(t,"h",(function(){return L})),n.d(t,"j",(function(){return K})),n.d(t,"i",(function(){return q}));var i=n(1),a=n.n(i),r=n(4),s=n(12),o=n(6),l=n(220);const u=({troubleshootLink:e})=>a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.confirmIncomingDataWithPreview.prePollingInstructions",defaultMessage:"After the agent starts up, the Elastic Stack listens for the agent and confirms the enrollment in Fleet. If you're having trouble connecting, check out the {link}.",values:{link:a.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:e},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}))}})),c=({selectedPolicyId:e,troubleshootLink:t,onClickViewAgents:n,agentCount:i,showLoading:s,poll:o=!0,isLongEnrollment:c=!1})=>{const d=!!i;return{title:d?r.i18n.translate("xpack.fleet.agentEnrollment.stepAgentEnrollmentConfirmationComplete",{defaultMessage:"Agent enrollment confirmed"}):r.i18n.translate("xpack.fleet.agentEnrollment.stepAgentEnrollmentConfirmation",{defaultMessage:"Confirm agent enrollment"}),children:a.a.createElement(a.a.Fragment,null,d||o?a.a.createElement(l.a,{policyId:e,troubleshootLink:t,onClickViewAgents:n,agentCount:i,showLoading:!d||s,isLongEnrollment:c}):a.a.createElement(u,{troubleshootLink:t})),status:d?"complete":"incomplete"}};var d=n(291);const h=({selectedPolicy:e,selectedApiKeyId:t,setSelectedAPIKeyId:n})=>({title:r.i18n.translate("xpack.fleet.agentEnrollment.stepConfigurePolicyAuthenticationTitle",{defaultMessage:"Select enrollment token"}),children:a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentAuthenticationSettings",defaultMessage:"{agentPolicyName} has been selected. Select which enrollment token to use when enrolling agents.",values:{agentPolicyName:a.a.createElement("strong",null,null==e?void 0:e.name)}})),a.a.createElement(o.EuiSpacer,{size:"l"}),a.a.createElement(d.a,{agentPolicyId:null==e?void 0:e.id,selectedApiKeyId:t,initialAuthenticationSettingsOpen:!0,onKeyChange:n}))});var f=n(221);const p=({agentPolicies:e,selectedPolicy:t,setSelectedPolicyId:n,selectedApiKeyId:i,setSelectedAPIKeyId:s,excludeFleetServer:o,refreshAgentPolicies:l})=>({title:r.i18n.translate("xpack.fleet.agentEnrollment.stepChooseAgentPolicyTitle",{defaultMessage:"What type of host do you want to monitor?"}),children:a.a.createElement(a.a.Fragment,null,a.a.createElement(f.a,{agentPolicies:e,selectedPolicyId:null==t?void 0:t.id,setSelectedPolicyId:n,withKeySelection:!!s,selectedApiKeyId:i,onKeyChange:s,refreshAgentPolicies:l,excludeFleetServer:o}))});var m=n(58),g=n.n(m),b=n(15);const y=({isK8s:e,yaml:t,downloadYaml:n,apiKey:i,onCreateApiKey:l,isComplete:u,onCopy:c})=>{const d=Object(b.Xc)(),{docLinks:h}=d,f="IS_KUBERNETES"===e?a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepConfigureAgentDescriptionk8s",defaultMessage:"Copy or download the Kubernetes manifest inside the Kubernetes cluster. Update {ESUsernameVariable} and {ESPasswordVariable} environment variables in the Daemonset to match your Elasticsearch credentials. Note that the following manifest contains resource limits that may not be appropriate for a production environment, review our guide on {scalingGuideLink} before deploying this manifest.",values:{ESUsernameVariable:a.a.createElement(o.EuiCode,null,"ES_USERNAME"),ESPasswordVariable:a.a.createElement(o.EuiCode,null,"ES_PASSWORD"),scalingGuideLink:a.a.createElement(o.EuiLink,{external:!0,href:h.links.fleet.scalingKubernetesResourcesAndLimits,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleet.agentEnrollment.k8ScalingGuideLinkText",defaultMessage:"Scaling Elastic Agent on Kubernetes"}))}}):a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.stepConfigureAgentDescription",defaultMessage:"Copy this policy to the {fileName} on the host where the Elastic Agent is installed. Either use an existing API key and modify {apiKeyVariable} in the {outputSection} section of {fileName} or click the button below to generate a new one. Refer to {guideLink} for details.",values:{fileName:a.a.createElement(o.EuiCode,null,"elastic-agent.yml"),apiKeyVariable:a.a.createElement(o.EuiCode,null,"API_KEY"),outputSection:a.a.createElement(o.EuiCode,null,"outputs"),guideLink:a.a.createElement(o.EuiLink,{external:!0,href:h.links.fleet.grantESAccessToStandaloneAgents,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleet.agentEnrollment.standaloneAgentAccessLinkText",defaultMessage:"Grant standalone Elastic Agents access to Elasticsearch"}))}}),p="IS_KUBERNETES"===e?a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadPolicyButtonk8s",defaultMessage:"Download manifest"}):a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadPolicyButton",defaultMessage:"Download policy"});return{title:r.i18n.translate("xpack.fleet.agentEnrollment.stepConfigureAgentTitle",{defaultMessage:"Configure the agent"}),children:a.a.createElement(a.a.Fragment,null,t?a.a.createElement(o.EuiText,null,a.a.createElement(a.a.Fragment,null,f),a.a.createElement(o.EuiSpacer,{size:"m"}),i&&a.a.createElement(o.EuiCallOut,{title:r.i18n.translate("xpack.fleet.agentEnrollment.apiKeyBanner.created",{defaultMessage:"API key created."}),color:"success",iconType:"check","data-test-subj":"obltOnboardingLogsApiKeyCreated"},a.a.createElement("p",null,r.i18n.translate("xpack.fleet.agentEnrollment.apiKeyBanner.created.description",{defaultMessage:"Remember to store this information in a safe place. It won't be displayed anymore after you continue."})),a.a.createElement(o.EuiFieldText,{"data-test-subj":"apmAgentKeyCallOutFieldText",readOnly:!0,value:i,"aria-label":r.i18n.translate("xpack.fleet.agentEnrollment.apiKeyBanner.field.label",{defaultMessage:"API key"}),append:a.a.createElement(o.EuiCopy,{textToCopy:i},(e=>a.a.createElement(v,{iconType:"copyClipboard",onClick:e,color:"success","aria-label":r.i18n.translate("xpack.fleet.apiKeyBanner.field.copyButton",{defaultMessage:"Copy to clipboard"})})))})),a.a.createElement(o.EuiSpacer,{size:"s"}),a.a.createElement(o.EuiFlexGroup,{gutterSize:"m"},a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiButton,{onClick:l},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.createApiKeyButton",defaultMessage:"Create API key"}))),a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiCopy,{textToCopy:t},(e=>a.a.createElement(o.EuiButton,{onClick:()=>{e(),c&&c()},iconType:"copyClipboard"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.copyPolicyButton",defaultMessage:"Copy to clipboard"}))))),a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiButton,{iconType:"download",onClick:()=>{c&&c(),n()},isDisabled:!n},a.a.createElement(a.a.Fragment,null,p)))),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiCodeBlock,{language:"yaml",style:{maxHeight:300},fontSize:"m","data-test-subj":"agentPolicyCodeBlock"},t)):null),status:t?u?"complete":void 0:"loading"}};var v=g()(o.EuiButtonIcon).withConfig({displayName:"_StyledEuiButtonIcon",componentId:"sc-1c7nf42-0"})({"> svg.euiIcon":{borderRadius:"0 !important"}}),E=n(297);const w=({agentIds:e,installedPolicy:t,agentDataConfirmed:n,setAgentDataConfirmed:i,troubleshootLink:l})=>{const{incomingData:u,isLoading:c}=Object(E.b)(e),d=Object(b.Fc)(null==t?void 0:t.name),{guidedOnboarding:h}=Object(b.Xc)(),{enrolledAgents:f,numAgentsWithData:p,linkButton:m,message:g}=Object(E.a)(u,t);var y;return!c&&f>0&&p>0&&(i(!0),null!=t&&t.name&&d&&(null==h||null===(y=h.guidedOnboardingApi)||void 0===y||y.completeGuidedOnboardingForIntegration(t.name))),n?a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiCallOut,{"data-test-subj":"IncomingDataConfirmedCallOut",title:r.i18n.translate("xpack.fleet.confirmIncomingData.title",{defaultMessage:"Incoming data received from {numAgentsWithData} of {enrolledAgents} recently enrolled { enrolledAgents, plural, one {agent} other {agents}}.",values:{numAgentsWithData:p,enrolledAgents:f}}),color:"success",iconType:"check"}),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiText,{size:"s"},g),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiButton,{href:m.href,isDisabled:c,color:"primary",fill:!0,"data-test-subj":"IncomingDataConfirmedButton"},m.text))):a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.confirmIncomingData.loading",defaultMessage:"It may take a few minutes for data to arrive in Elasticsearch. If the system is not generating data, it may help to generate some to ensure data is being collected correctly. If youre having trouble, see our {link}. You may close this dialog and check later by viewing your integration assets.",values:{link:a.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:l},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}))}}))},x=({agentIds:e,installedPolicy:t,agentDataConfirmed:n,setAgentDataConfirmed:i,troubleshootLink:s})=>({title:n?r.i18n.translate("xpack.fleet.agentEnrollment.stepConfirmIncomingData.completed",{defaultMessage:"Incoming data confirmed"}):r.i18n.translate("xpack.fleet.agentEnrollment.stepConfirmIncomingData",{defaultMessage:"Confirm incoming data"}),children:e.length>0?a.a.createElement(w,{agentIds:e,installedPolicy:t,agentDataConfirmed:n,setAgentDataConfirmed:i,troubleshootLink:s}):null,status:e.length>0?n?"complete":"loading":"disabled"});var S=n(27),k=n.n(S),M=n(40),_=n.n(M),A=n(482),C=n.n(A);const F=({isK8s:e,isManaged:t=!0})=>{const{docLinks:n}=Object(b.Xc)(),r=Object(b.Ic)(),l=Object(i.useMemo)((()=>`${k()(r)}-${_()(r)}-${C()(r)}`),[r]);return a.a.createElement(a.a.Fragment,null,"IS_KUBERNETES_MULTIPAGE"!==e&&a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.installationMessage",defaultMessage:"Select the appropriate platform and run commands to install, enroll, and start Elastic Agent. Reuse commands to set up agents on more than one host. For aarch64, see our {downloadLink}. This guidance is for AMD but you can adapt it to your device architecture. For additional guidance, see our {installationLink}.",values:{downloadLink:a.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:`https://www.elastic.co/downloads/past-releases/elastic-agent-${l}`},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.downloadLink",defaultMessage:"downloads page"})),installationLink:a.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:t?n.links.fleet.installElasticAgent:n.links.fleet.installElasticAgentStandalone},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.installationMessage.link",defaultMessage:"installation docs"}))}})),"IS_KUBERNETES_MULTIPAGE"===e&&a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.k8sInstallationMessage",defaultMessage:"The below manifest has been automatically generated and includes credentials for this instance of Elastic Agent to be centrally managed using Fleet once it gets running in your Kubernetes cluster."})),a.a.createElement(o.EuiSpacer,{size:"l"}))};var D=n(267);const T=({rootIntegrations:e=[]})=>{const{docLinks:t}=Object(b.Xc)();return e.length>0?a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiCallOut,{color:"warning",iconType:"warning",title:r.i18n.translate("xpack.fleet.agentEnrollmentCallout.rootPrivilegesTitle",{defaultMessage:"Root privileges required"}),"data-test-subj":"rootPrivilegesCallout"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollmentCallout.rootPrivilegesMessage",defaultMessage:"This agent policy contains the following integrations that require Elastic Agents to have root privileges. To ensure that all data required by the integrations can be collected, enroll the agents using an account with root privileges. For more information, see the {guideLink}",values:{guideLink:a.a.createElement(o.EuiLink,{href:t.links.fleet.unprivilegedMode,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollmentCallout.rootPrivilegesMessage.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),a.a.createElement("ul",null,e.map((e=>a.a.createElement("li",{key:e.name},e.title))))),a.a.createElement(o.EuiSpacer,{size:"m"})):null},I=()=>{const{docLinks:e}=Object(b.Xc)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiText,null,a.a.createElement("p",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollmentFlyout.unprivilegedMessage",defaultMessage:"To install Elastic Agent without root privileges, add the {flag} flag to the {command} command below. For more information, see the {guideLink}",values:{flag:a.a.createElement(o.EuiCode,null,"--unprivileged"),command:a.a.createElement(o.EuiCode,null,"elastic-agent install"),guideLink:a.a.createElement(o.EuiLink,{href:e.links.fleet.unprivilegedMode,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollmentFlyout.unprivilegedMessage.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}))),a.a.createElement(o.EuiSpacer,{size:"m"}))},P=({installCommand:e,isK8s:t,cloudSecurityIntegration:n,enrollToken:i,fleetServerHost:r,fullCopyButton:s=!1,isManaged:o=!0,onCopy:l,rootIntegrations:u})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(F,{isK8s:t,isManaged:o}),a.a.createElement(T,{rootIntegrations:u}),a.a.createElement(I,null),a.a.createElement(D.a,{fullCopyButton:s,onCopy:l,linuxCommand:e.linux,macCommand:e.mac,windowsCommand:e.windows,linuxDebCommand:e.deb,linuxRpmCommand:e.rpm,k8sCommand:e.kubernetes,hasK8sIntegration:"IS_KUBERNETES"===t||"IS_KUBERNETES_MULTIPAGE"===t,cloudSecurityIntegration:n,hasK8sIntegrationMultiPage:"IS_KUBERNETES_MULTIPAGE"===t,isManaged:o,enrollToken:i,fleetServerHost:r})),O=({installCommand:e,selectedApiKeyId:t,apiKeyData:n,isK8s:i,cloudSecurityIntegration:s,enrollToken:o,fleetServerHost:l,isComplete:u,fullCopyButton:c,onCopy:d,rootIntegrations:h})=>({status:u?"complete":t?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your host"}),children:t&&n?a.a.createElement(P,{installCommand:e,isK8s:i,cloudSecurityIntegration:s,enrollToken:o,onCopy:d,fullCopyButton:c,fleetServerHost:l,rootIntegrations:h}):a.a.createElement(a.a.Fragment,null)}),j=({installCommand:e,isK8s:t,cloudSecurityIntegration:n,isComplete:i,fullCopyButton:s,onCopy:o,rootIntegrations:l})=>({title:r.i18n.translate("xpack.fleet.agentEnrollment.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your host"}),children:a.a.createElement(P,{installCommand:e,isK8s:t,cloudSecurityIntegration:n,onCopy:o,fullCopyButton:s,isManaged:!1,rootIntegrations:l}),status:i?"complete":void 0}),B=({children:e,showTooltip:t})=>t&&e?a.a.createElement(o.EuiToolTip,{content:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentFlyout.standaloneMissingPermissions",defaultMessage:"Read access to Agent Policies is required to see the standalone instructions."})},e):a.a.createElement(a.a.Fragment,null,e),L=({selectedPolicyId:e,mode:t,setMode:n})=>{const i=Object(b.Ib)(),l="installation_mode_agent_selection";return{status:e?void 0:"disabled",title:r.i18n.translate("xpack.fleet.agentEnrollment.stepInstallType",{defaultMessage:"Enroll in Fleet?"}),children:e?a.a.createElement(o.EuiRadioGroup,{options:[{id:`managed_${l}`,label:a.a.createElement(s.FormattedMessage,{"data-test-subj":"agentFlyoutManagedRadioButtons",id:"xpack.fleet.agentFlyout.managedRadioOption",defaultMessage:"{managed}  Enroll in Elastic Agent in Fleet to automatically deploy updates and centrally manage the agent.",values:{managed:a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentFlyout.managedMessage",defaultMessage:"Enroll in Fleet (recommended)"}))}})},{id:`standalone_${l}`,disabled:!i.fleet.readAgentPolicies,label:a.a.createElement(B,{showTooltip:!i.fleet.readAgentPolicies},a.a.createElement(s.FormattedMessage,{"data-test-subj":"agentFlyoutStandaloneRadioButtons",id:"xpack.fleet.agentFlyout.standaloneRadioOption",defaultMessage:"{standaloneMessage}  Run an Elastic Agent standalone to configure and update the agent manually on the host where the agent is installed.",values:{standaloneMessage:a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentFlyout.standaloneMessage",defaultMessage:"Run standalone"}))}}))}],idSelected:`${t}_${l}`,onChange:e=>{const t=e.split("_")[0];"managed"!==t&&"standalone"!==t||n(t)},name:`radio group ${l}`}):a.a.createElement(a.a.Fragment,null)}};var N=n(5),R=n(156),z=n(205),U=n(172),Z=n(202);const K=({agentPolicy:e,agentPolicies:t,selectedPolicy:n,setSelectedPolicyId:r,refreshAgentPolicies:s,mode:l,setMode:u,selectionType:c,selectedApiKeyId:d,setSelectedAPIKeyId:h,isK8s:f,cloudSecurityIntegration:m})=>{const{yaml:g,onCreateApiKey:v,apiKey:E,downloadYaml:w}=Object(U.c)(n,f),x=Object(b.Hb)(),S=Object(i.useMemo)((()=>{var i;const a=Object(z.b)(x||""),o=e?[]:[p({selectedPolicy:n,agentPolicies:t,selectedApiKeyId:d,setSelectedAPIKeyId:h,setSelectedPolicyId:r,refreshAgentPolicies:s})];return"radio"===c&&o.push(L({selectedPolicyId:null==n?void 0:n.id,mode:l,setMode:u})),o.push(y({isK8s:f,selectedPolicyId:null==n?void 0:n.id,yaml:g,downloadYaml:w,apiKey:E,onCreateApiKey:v})),o.push(j({installCommand:a,isK8s:f,cloudSecurityIntegration:m,rootIntegrations:Object(N.N)(null!==(i=null==n?void 0:n.package_policies)&&void 0!==i?i:[])})),o}),[x,e,n,t,d,h,r,s,c,f,g,w,E,v,m,l,u]);return x?a.a.createElement(o.EuiSteps,{steps:S}):a.a.createElement(o.EuiLoadingSpinner,null)},q=({agentPolicy:e,agentPolicies:t,selectedPolicy:n,setSelectedPolicyId:r,selectedApiKeyId:s,setSelectedAPIKeyId:u,fleetServerHost:d,fleetProxy:f,downloadSource:m,refreshAgentPolicies:g,mode:y,setMode:v,selectionType:E,onClickViewAgents:w,isK8s:S,cloudSecurityIntegration:k,installedPackagePolicy:M})=>{const _=Object(b.Xc)(),{docLinks:A}=_,C=A.links.fleet.troubleshooting,[F,D]=Object(i.useState)(!1),T=Object(b.nc)(s),I=null==T?void 0:T.data,P=T.data?T.data.item.api_key:"",{enrolledAgentIds:j}=Object(l.b)((null==n?void 0:n.id)||""),B=Object(b.Hb)(),{gcpProjectId:U,gcpOrganizationId:K,gcpAccountType:q}=Object(R.g)(n),H=Object(z.a)({apiKey:P,fleetServerHost:d,fleetProxy:f,downloadSource:m,agentVersion:B||"",gcpProjectId:U,gcpOrganizationId:K,gcpAccountType:q}),W=Object(i.useMemo)((()=>{const i=e?[h({selectedPolicy:n,selectedApiKeyId:s,setSelectedAPIKeyId:u})]:[p({selectedPolicy:n,agentPolicies:t,selectedApiKeyId:s,setSelectedAPIKeyId:u,setSelectedPolicyId:r,refreshAgentPolicies:g})];if("radio"===E&&i.push(L({selectedPolicyId:null==n?void 0:n.id,mode:y,setMode:v})),null!=k&&k.isCloudFormation)i.push(Object(Z.e)({apiKeyData:I,selectedApiKeyId:s,enrollToken:P,cloudSecurityIntegration:k,fleetServerHost:d}));else if(null!=k&&k.cloudShellUrl)i.push(Object(Z.f)({apiKeyData:I,selectedApiKeyId:s,cloudShellUrl:k.cloudShellUrl,cloudShellCommand:H.googleCloudShell,projectId:U}));else if(null!=k&&k.isAzureArmTemplate)i.push(Object(Z.d)({selectedApiKeyId:s,apiKeyData:I,enrollToken:P,cloudSecurityIntegration:k,agentPolicy:e}));else{var a;i.push(O({installCommand:H,apiKeyData:I,selectedApiKeyId:s,isK8s:S,cloudSecurityIntegration:k,fleetServerHost:d,enrollToken:P,rootIntegrations:Object(N.N)(null!==(a=null==n?void 0:n.package_policies)&&void 0!==a?a:[])}))}return s&&I&&i.push(c({selectedPolicyId:null==n?void 0:n.id,onClickViewAgents:w,troubleshootLink:C,agentCount:j.length,isLongEnrollment:void 0!==k})),n&&i.push(x({agentIds:j,agentDataConfirmed:F,setAgentDataConfirmed:D,installedPolicy:M,troubleshootLink:C})),i}),[e,n,t,s,u,r,g,E,k,I,y,v,P,H,S,d,w,C,j,F,M,U]);return B?a.a.createElement(o.EuiSteps,{steps:W}):a.a.createElement(o.EuiLoadingSpinner,null)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c}));var i=n(4),a=n(15);const r=({enrollmentAPIKey:e,cloudFormationProps:t,fleetServerHost:n})=>{const r=Object(a.Hb)();let o,l=!1;return n||(l=!0,o=i.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.noFleetServerHost",{defaultMessage:"No Fleet Server host found"})),e||(l=!0,o=i.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.noApiKey",{defaultMessage:"No enrollment token found"})),{cloudFormationUrl:e&&n&&null!=t&&t.templateUrl&&r?s(null==t?void 0:t.templateUrl,e,n,r,null==t?void 0:t.awsAccountType):void 0,isError:l,error:o}},s=(e,t,n,i,a)=>{let r;return r=e.replace("FLEET_ENROLLMENT_TOKEN",t).replace("FLEET_URL",n).replace("KIBANA_VERSION",i),r.includes("ACCOUNT_TYPE")&&(r=r.replace("ACCOUNT_TYPE",o(a))),new URL(r).toString()},o=e=>e||"single-account";var l=n(156);const u=({enrollmentAPIKey:e,packagePolicy:t})=>{var n;const{data:r,isLoading:s}=Object(a.Ac)();let o,u=!1;return(null==r||null===(n=r.item.fleet_server_hosts)||void 0===n?void 0:n[0])||s||(u=!0,o=i.i18n.translate("xpack.fleet.agentEnrollment.cloudShell.noFleetServerHost",{defaultMessage:"No Fleet Server host found"})),e||s||(u=!0,o=i.i18n.translate("xpack.fleet.agentEnrollment.cloudShell.noApiKey",{defaultMessage:"No enrollment token found"})),{isLoading:s,cloudShellUrl:Object(l.f)(t)||"",isError:u,error:o}},c=({enrollmentAPIKey:e,azureArmTemplateProps:t})=>{var n,r;const{data:s,isLoading:o}=Object(a.Ac)();let l,u=!1;(null==s||null===(n=s.item.fleet_server_hosts)||void 0===n?void 0:n[0])||o||(u=!0,l=i.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.noFleetServerHost",{defaultMessage:"No Fleet Server host found"})),e||o||(u=!0,l=i.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.noApiKey",{defaultMessage:"No enrollment token found"}));let c=null==t?void 0:t.templateUrl;return null!==(r=c)&&void 0!==r&&r.includes("ACCOUNT_TYPE")&&(c=c.replace("ACCOUNT_TYPE",(null==t?void 0:t.azureAccountType)||"single-account")),{isLoading:o,azureArmTemplateUrl:c,isError:u,error:l}}},,,,,,function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const o=r(n(292));t.z=o,s(n(292),t),t.default=o},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of n)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(i=t.util||(t.util={})),(t.objectUtil||(t.objectUtil={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=i.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(e)?t.ZodParsedType.array:null===e?t.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?t.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?t.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},function(e,t,n){"use strict";var i=n(159);e.exports=i.DEFAULT=new i({include:[n(171)],explicit:[n(477),n(478),n(479)]})},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,i,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var r,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,i)}));case 4:return t.nextTick((function(){e.call(null,n,i,a)}));default:for(r=new Array(o-1),s=0;s<r.length;)r[s++]=arguments[s];return t.nextTick((function(){e.apply(null,r)}))}}}:e.exports=t}).call(this,n(87))},function(e,t,n){var i=n(119).Buffer,a=n(225);e.exports=function(e,t,n,r){if(i.isBuffer(e)||(e=i.from(e,"binary")),t&&(i.isBuffer(t)||(t=i.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,o=i.alloc(s),l=i.alloc(r||0),u=i.alloc(0);s>0||r>0;){var c=new a;c.update(u),c.update(e),t&&c.update(t),u=c.digest();var d=0;if(s>0){var h=o.length-s;d=Math.min(s,u.length),u.copy(o,h,0,d),s-=d}if(d<u.length&&r>0){var f=l.length-r,p=Math.min(r,u.length-d);u.copy(l,f,d,d+p),r-=p}}return u.fill(0),{key:o,iv:l}}},function(e,t,n){var i=n(119).Buffer;function a(e){i.isBuffer(e)||(e=i.from(e));for(var t=e.length/4|0,n=new Array(t),a=0;a<t;a++)n[a]=e.readUInt32BE(4*a);return n}function r(e){for(;0<e.length;e++)e[0]=0}function s(e,t,n,i,a){for(var r,s,o,l,u=n[0],c=n[1],d=n[2],h=n[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],b=4,y=1;y<a;y++)r=u[f>>>24]^c[p>>>16&255]^d[m>>>8&255]^h[255&g]^t[b++],s=u[p>>>24]^c[m>>>16&255]^d[g>>>8&255]^h[255&f]^t[b++],o=u[m>>>24]^c[g>>>16&255]^d[f>>>8&255]^h[255&p]^t[b++],l=u[g>>>24]^c[f>>>16&255]^d[p>>>8&255]^h[255&m]^t[b++],f=r,p=s,m=o,g=l;return r=(i[f>>>24]<<24|i[p>>>16&255]<<16|i[m>>>8&255]<<8|i[255&g])^t[b++],s=(i[p>>>24]<<24|i[m>>>16&255]<<16|i[g>>>8&255]<<8|i[255&f])^t[b++],o=(i[m>>>24]<<24|i[g>>>16&255]<<16|i[f>>>8&255]<<8|i[255&p])^t[b++],l=(i[g>>>24]<<24|i[f>>>16&255]<<16|i[p>>>8&255]<<8|i[255&m])^t[b++],[r>>>=0,s>>>=0,o>>>=0,l>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],l=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],i=[],a=[[],[],[],[]],r=[[],[],[],[]],s=0,o=0,l=0;l<256;++l){var u=o^o<<1^o<<2^o<<3^o<<4;u=u>>>8^255&u^99,n[s]=u,i[u]=s;var c=e[s],d=e[c],h=e[d],f=257*e[u]^16843008*u;a[0][s]=f<<24|f>>>8,a[1][s]=f<<16|f>>>16,a[2][s]=f<<8|f>>>24,a[3][s]=f,f=16843009*h^65537*d^257*c^16843008*s,r[0][u]=f<<24|f>>>8,r[1][u]=f<<16|f>>>16,r[2][u]=f<<8|f>>>24,r[3][u]=f,0===s?s=o=1:(s=c^e[e[e[h^c]]],o^=e[e[o]])}return{SBOX:n,INV_SBOX:i,SUB_MIX:a,INV_SUB_MIX:r}}();function u(e){this._key=a(e),this._reset()}u.blockSize=16,u.keySize=32,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,i=4*(n+1),a=[],r=0;r<t;r++)a[r]=e[r];for(r=t;r<i;r++){var s=a[r-1];r%t==0?(s=s<<8|s>>>24,s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s],s^=o[r/t|0]<<24):t>6&&r%t==4&&(s=l.SBOX[s>>>24]<<24|l.SBOX[s>>>16&255]<<16|l.SBOX[s>>>8&255]<<8|l.SBOX[255&s]),a[r]=a[r-t]^s}for(var u=[],c=0;c<i;c++){var d=i-c,h=a[d-(c%4?0:4)];u[c]=c<4||d<=4?h:l.INV_SUB_MIX[0][l.SBOX[h>>>24]]^l.INV_SUB_MIX[1][l.SBOX[h>>>16&255]]^l.INV_SUB_MIX[2][l.SBOX[h>>>8&255]]^l.INV_SUB_MIX[3][l.SBOX[255&h]]}this._nRounds=n,this._keySchedule=a,this._invKeySchedule=u},u.prototype.encryptBlockRaw=function(e){return s(e=a(e),this._keySchedule,l.SUB_MIX,l.SBOX,this._nRounds)},u.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=i.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},u.prototype.decryptBlock=function(e){var t=(e=a(e))[1];e[1]=e[3],e[3]=t;var n=s(e,this._invKeySchedule,l.INV_SUB_MIX,l.INV_SBOX,this._nRounds),r=i.allocUnsafe(16);return r.writeUInt32BE(n[0],0),r.writeUInt32BE(n[3],4),r.writeUInt32BE(n[2],8),r.writeUInt32BE(n[1],12),r},u.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},e.exports.AES=u},function(e,t,n){"use strict";var i=n(127),a=n(136),r=a.getNAF,s=a.getJSF,o=a.assert;function l(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=l,l.prototype.point=function(){throw new Error("Not implemented")},l.prototype.validate=function(){throw new Error("Not implemented")},l.prototype._fixedNafMul=function(e,t){o(e.precomputed);var n=e._getDoubles(),i=r(t,1,this._bitLength),a=(1<<n.step+1)-(n.step%2==0?2:1);a/=3;var s,l,u=[];for(s=0;s<i.length;s+=n.step){l=0;for(var c=s+n.step-1;c>=s;c--)l=(l<<1)+i[c];u.push(l)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=a;f>0;f--){for(s=0;s<u.length;s++)(l=u[s])===f?h=h.mixedAdd(n.points[s]):l===-f&&(h=h.mixedAdd(n.points[s].neg()));d=d.add(h)}return d.toP()},l.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var a=i.points,s=r(t,n,this._bitLength),l=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(var c=0;u>=0&&0===s[u];u--)c++;if(u>=0&&c++,l=l.dblp(c),u<0)break;var d=s[u];o(0!==d),l="affine"===e.type?d>0?l.mixedAdd(a[d-1>>1]):l.mixedAdd(a[-d-1>>1].neg()):d>0?l.add(a[d-1>>1]):l.add(a[-d-1>>1].neg())}return"affine"===e.type?l.toP():l},l.prototype._wnafMulAdd=function(e,t,n,i,a){var o,l,u,c=this._wnafT1,d=this._wnafT2,h=this._wnafT3,f=0;for(o=0;o<i;o++){var p=(u=t[o])._getNAFPoints(e);c[o]=p.wnd,d[o]=p.points}for(o=i-1;o>=1;o-=2){var m=o-1,g=o;if(1===c[m]&&1===c[g]){var b=[t[m],null,null,t[g]];0===t[m].y.cmp(t[g].y)?(b[1]=t[m].add(t[g]),b[2]=t[m].toJ().mixedAdd(t[g].neg())):0===t[m].y.cmp(t[g].y.redNeg())?(b[1]=t[m].toJ().mixedAdd(t[g]),b[2]=t[m].add(t[g].neg())):(b[1]=t[m].toJ().mixedAdd(t[g]),b[2]=t[m].toJ().mixedAdd(t[g].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],v=s(n[m],n[g]);for(f=Math.max(v[0].length,f),h[m]=new Array(f),h[g]=new Array(f),l=0;l<f;l++){var E=0|v[0][l],w=0|v[1][l];h[m][l]=y[3*(E+1)+(w+1)],h[g][l]=0,d[m]=b}}else h[m]=r(n[m],c[m],this._bitLength),h[g]=r(n[g],c[g],this._bitLength),f=Math.max(h[m].length,f),f=Math.max(h[g].length,f)}var x=this.jpoint(null,null,null),S=this._wnafT4;for(o=f;o>=0;o--){for(var k=0;o>=0;){var M=!0;for(l=0;l<i;l++)S[l]=0|h[l][o],0!==S[l]&&(M=!1);if(!M)break;k++,o--}if(o>=0&&k++,x=x.dblp(k),o<0)break;for(l=0;l<i;l++){var _=S[l];0!==_&&(_>0?u=d[l][_-1>>1]:_<0&&(u=d[l][-_-1>>1].neg()),x="affine"===u.type?x.mixedAdd(u):x.add(u))}}for(o=0;o<i;o++)d[o]=null;return a?x:x.toP()},l.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},l.prototype.decodePoint=function(e,t){e=a.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return a.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,a=0;a<t;a+=e){for(var r=0;r<e;r++)i=i.dbl();n.push(i)}return{step:e,points:n}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,i=1===n?null:this.dbl(),a=1;a<n;a++)t[a]=t[a-1].add(i);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},function(e,t,n){var i=n(558),a=n(565),r=n(566),s=n(232),o=n(308),l=n(119).Buffer;function u(e){var t;"object"!=typeof e||l.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=l.from(e));var n,u,c=r(e,t),d=c.tag,h=c.data;switch(d){case"CERTIFICATE":u=i.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(u||(u=i.PublicKey.decode(h,"der")),n=u.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return u.subjectPrivateKey=u.subjectPublicKey,{type:"ec",data:u};case"1.2.840.10040.4.1":return u.algorithm.params.pub_key=i.DSAparam.decode(u.subjectPublicKey.data,"der"),{type:"dsa",data:u.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),r=a[e.algorithm.decrypt.cipher.algo.join(".")],u=e.algorithm.decrypt.cipher.iv,c=e.subjectPrivateKey,d=parseInt(r.split("-")[1],10)/8,h=o.pbkdf2Sync(t,n,i,d,"sha1"),f=s.createDecipheriv(r,h,u),p=[];return p.push(f.update(c)),p.push(f.final()),l.concat(p)}(h=i.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(n=(u=i.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return i.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:u.algorithm.curve,privateKey:i.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return u.algorithm.params.priv_key=i.DSAparam.decode(u.subjectPrivateKey,"der"),{type:"dsa",params:u.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return i.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return i.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:i.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=i.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+d)}}e.exports=u,u.signature=i.signature},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return E})),n.d(t,"f",(function(){return w}));var i=n(1),a=n.n(i),r=n(6),s=n(12),o=n(15),l=n(172);const u=({azureAccountType:e,agentPolicy:t,enrollmentToken:n=""})=>{const{agentPolicyWithPackagePolicies:i}=Object(l.a)(null==t?void 0:t.id),{fleetServerHost:u}=Object(o.Sb)(i);return a.a.createElement(r.EuiText,null,a.a.createElement("p",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.description",defaultMessage:"An Azure Resource Manager (ARM) Template will create all the necessary resources to evaluate the security posture of your Azure organization. Follow the steps below to launch the ARM template. Learn more about {learnMore}.",values:{learnMore:a.a.createElement(r.EuiLink,{href:"https://azure.microsoft.com/en-us/get-started/azure-portal/resource-manager",target:"_blank",rel:"noopener nofollow noreferrer","data-test-subj":"azure-resource-manager-link"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.learnMoreLinkText",defaultMessage:"Azure Resource Manager"}))}})),a.a.createElement(r.EuiText,{size:"s",color:"subdued"},a.a.createElement("ol",null,"organization-account"===e?a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.organizationLogin",defaultMessage:"Log into your Azure Portal"})):a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.login",defaultMessage:"Log into your Azure Portal"})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.launch",defaultMessage:"Click the Launch ARM Template button below."})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.azureArmTemplate.guide.steps.fillForm",defaultMessage:"Use the provided fields below to fill the instance details section of the ARM Template:"}),a.a.createElement(r.EuiSpacer,null),a.a.createElement(r.EuiDescriptionList,{listItems:[{title:"Fleet URL",description:a.a.createElement(r.EuiCodeBlock,{isCopyable:!0,paddingSize:"m"},u)},{title:"Enrollment Token",description:a.a.createElement(r.EuiCodeBlock,{isCopyable:!0,paddingSize:"m"},n)}]})))))};var c=n(4),d=n(186);const h=({enrollmentAPIKey:e,cloudSecurityIntegration:t,agentPolicy:n})=>{var i;const{isLoading:o,azureArmTemplateUrl:l,error:h,isError:f}=Object(d.a)({enrollmentAPIKey:e,azureArmTemplateProps:null==t?void 0:t.azureArmTemplateProps});return h&&f?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiCallOut,{title:h,color:"danger",iconType:"error"})):a.a.createElement(r.EuiSkeletonText,{lines:3,size:"m",isLoading:o||(null==t?void 0:t.isLoading),contentAriaLabel:c.i18n.translate("xpack.fleet.agentEnrollment.azureArmTemplate.loadingAriaLabel",{defaultMessage:"Loading ARM Template instructions"})},a.a.createElement(u,{azureAccountType:null==t||null===(i=t.azureArmTemplateProps)||void 0===i?void 0:i.azureAccountType,agentPolicy:n,enrollmentToken:e}),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiButton,{color:"primary",fill:!0,target:"_blank",iconSide:"left",iconType:"launch",fullWidth:!0,href:l},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.azureArmTemplate.launchButton",defaultMessage:"Launch ARM Template"})))},f=({children:e,url:t})=>a.a.createElement(r.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer","data-test-subj":"externalLink"},e),p=({awsAccountType:e})=>a.a.createElement(r.EuiText,null,a.a.createElement("p",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.description",defaultMessage:"CloudFormation will create all the necessary resources to evaluate the security posture of your AWS environment. {learnMore}.",values:{learnMore:a.a.createElement(f,{url:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/cfn-whatis-howdoesitwork.html"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.learnMoreLinkText",defaultMessage:"Learn more about CloudFormation"}))}})),a.a.createElement(r.EuiText,{size:"s",color:"subdued"},a.a.createElement("ol",null,"organization-account"===e?a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.organizationLogin",defaultMessage:"Log in as an admin in the management account of the AWS Organization you want to onboard"})):a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.login",defaultMessage:"Log in as an admin in the AWS account you want to onboard"})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.launch",defaultMessage:"Click the Launch CloudFormation button below."})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.region",defaultMessage:"(Optional) Change the Amazon region in the upper right corner to the region you want to deploy your stack to"})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.accept",defaultMessage:"Tick the checkbox under capabilities in the opened CloudFormation stack review form: {acknowledge}",values:{acknowledge:a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.accept.acknowledge",defaultMessage:"I acknowledge that AWS CloudFormation might create IAM resources."}))}})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.cloudFormation.guide.steps.create",defaultMessage:"Click Create stack."}))))),m=({enrollmentAPIKey:e,cloudSecurityIntegration:t,fleetServerHost:n})=>{var i;const{cloudFormationUrl:o,error:l,isError:u}=Object(d.b)({enrollmentAPIKey:e,cloudFormationProps:null==t?void 0:t.cloudFormationProps,fleetServerHost:n});return l&&u?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiCallOut,{title:l,color:"danger",iconType:"error"})):a.a.createElement(r.EuiSkeletonText,{lines:3,size:"m",isLoading:null==t?void 0:t.isLoading,contentAriaLabel:c.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.loadingAriaLabel",{defaultMessage:"Loading CloudFormation instructions"})},a.a.createElement(p,{awsAccountType:null==t||null===(i=t.cloudFormationProps)||void 0===i?void 0:i.awsAccountType}),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiButton,{"data-test-subj":"launchCloudFormationButtonAgentFlyoutTestId",color:"primary",fill:!0,target:"_blank",iconSide:"left",iconType:"launch",fullWidth:!0,href:o},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.cloudFormation.launchButton",defaultMessage:"Launch CloudFormation"})))},g=({children:e,url:t})=>a.a.createElement(r.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer","data-test-subj":"externalLink"},e),b=e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"xs"}),a.a.createElement(r.EuiText,{size:"s",color:"subdued"},a.a.createElement("p",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.description",defaultMessage:"The Google Cloud Shell Command below will create all the necessary resources to evaluate the security posture of your GCP projects. Learn more about {learnMore}.",values:{learnMore:a.a.createElement(g,{url:"https://cloud.google.com/shell/docs"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.learnMoreLinkText",defaultMessage:"Google Cloud Shell"}))}})),a.a.createElement(r.EuiText,{size:"s",color:"subdued"},a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement(a.a.Fragment,null,null!=e&&e.hasProjectId?a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.steps.copyWithProjectId",defaultMessage:"Copy the command below"}):a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.steps.copyWithoutProjectId",defaultMessage:"Replace <PROJECT_ID> in the following command with your project ID and copy the command",ignoreTag:!0}),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiCodeBlock,{language:"bash",isCopyable:!0,contentEditable:"true"},e.commandText))),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.googleCloudShell.guide.steps.launch",defaultMessage:"Click Launch Google Cloud Shell, then run the command"})))))),y=({cloudShellUrl:e,cloudShellCommand:t,projectId:n})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(b,{commandText:t,hasProjectId:!!n}),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiButton,{"data-test-subj":"launchGoogleCloudShellButtonAgentFlyoutTestId",color:"primary",fill:!0,target:"_blank",iconSide:"left",iconType:"launch",fullWidth:!0,href:e},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.googleCloudShell.launchButton",defaultMessage:"Launch Google Cloud Shell"}))),v=({selectedApiKeyId:e,apiKeyData:t,enrollToken:n,isComplete:i,cloudSecurityIntegration:r,agentPolicy:s})=>({status:i?"complete":e?void 0:"disabled",title:c.i18n.translate("xpack.fleet.agentEnrollment.azureArmTemplate.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your cloud"}),children:e&&t&&r?a.a.createElement(h,{cloudSecurityIntegration:r,enrollmentAPIKey:n,agentPolicy:s}):a.a.createElement(a.a.Fragment,null)}),E=({selectedApiKeyId:e,apiKeyData:t,enrollToken:n,isComplete:i,cloudSecurityIntegration:r,fleetServerHost:s})=>({status:i?"complete":e?void 0:"disabled",title:c.i18n.translate("xpack.fleet.agentEnrollment.cloudFormation.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your cloud"}),children:e&&t&&r?a.a.createElement(m,{cloudSecurityIntegration:r,enrollmentAPIKey:n,fleetServerHost:s}):a.a.createElement(a.a.Fragment,null)}),w=({selectedApiKeyId:e,apiKeyData:t,isComplete:n,cloudShellUrl:i,cloudShellCommand:r,projectId:s})=>({status:n?"complete":e?void 0:"disabled",title:c.i18n.translate("xpack.fleet.agentEnrollment.cloudShell.stepEnrollAndRunAgentTitle",{defaultMessage:"Install Elastic Agent on your cloud"}),children:e&&t&&i?a.a.createElement(y,{cloudShellUrl:i||"",cloudShellCommand:r||"",projectId:s||""}):a.a.createElement(a.a.Fragment,null)})},function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return M.a})),n.d(t,"a",(function(){return _}));var i=n(1),a=n.n(i),r=n(6),s=n(12),o=n(15),l=n(9),u=n(140),c=n(263),d=n(290),h=n(185);const f=()=>{const{getHref:e}=Object(o.Kc)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentsNotInitializedText",defaultMessage:"Before enrolling agents, {link}.",values:{link:a.a.createElement(r.EuiLink,{href:e("overview")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.setUpAgentsLink",defaultMessage:"set up central management for Elastic Agents"}))}}))},p=e=>{var t;const{isFleetServerPolicySelected:n,fleetServerHost:p,isLoadingAgentPolicies:g,selectionType:b,setSelectionType:y,mode:v,setMode:E,isIntegrationFlow:w}=e,x=Object(o.Ub)(),{isFleetServerStandalone:S}=Object(o.Tb)(),{isLoading:k,data:M}=Object(o.fc)(),_=x.isReady&&!p,A=n||S||x.isReady&&(null==M?void 0:M.fleet_server.has_active)&&p,C=!S&&!n&&(!(null!=M&&M.fleet_server.has_active)||(null!==(t=x.missingRequirements)&&void 0!==t?t:[]).some((e=>e===l.n)));return Object(i.useEffect)((()=>{var t,n,i;null!==(t=e.cloudSecurityIntegration)&&void 0!==t&&t.isAzureArmTemplate||null!==(n=e.cloudSecurityIntegration)&&void 0!==n&&n.isCloudFormation||null!==(i=e.cloudSecurityIntegration)&&void 0!==i&&i.cloudShellUrl?y(void 0):y(!w&&A?"radio":"tabs")}),[w,A,y,e.cloudSecurityIntegration]),k||g?a.a.createElement(u.q,{size:"l"}):_?null:"managed"===v?C?a.a.createElement(c.a,{showStandaloneTab:()=>E("standalone")}):A?a.a.createElement(a.a.Fragment,null,"tabs"===b&&!(null!==(F=e.cloudSecurityIntegration)&&void 0!==F&&F.cloudShellUrl)&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.managedDescription",defaultMessage:"Enroll an Elastic Agent in Fleet to automatically deploy updates and centrally manage the agent."})),a.a.createElement(r.EuiSpacer,{size:"l"})),n?a.a.createElement(d.a,{selectedPolicyId:null===(D=e.selectedPolicy)||void 0===D?void 0:D.id,onClose:()=>{}}):a.a.createElement(h.i,e)):a.a.createElement(f,null):a.a.createElement(m,e);var F,D},m=e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.standaloneDescription",defaultMessage:"Run an Elastic Agent standalone to configure and update the agent manually on the host where the agent is installed."})),a.a.createElement(r.EuiSpacer,{size:"l"}),a.a.createElement(h.j,e));var g=n(4);const b=()=>{const{docLinks:e}=Object(o.Xc)(),{getHref:t}=Object(o.Kc)();return a.a.createElement(r.EuiCallOut,{title:g.i18n.translate("xpack.fleet.agentEnrollment.missingFleetHostCalloutTitle",{defaultMessage:"Missing URL for Fleet Server host"})},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.missingFleetHostCalloutText",defaultMessage:"A URL for your Fleet Server host is required to enroll agents with Fleet. You can add this information in Fleet Settings. For more information, see the {link}.",values:{link:a.a.createElement(r.EuiLink,{href:e.links.fleet.guide,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.missingFleetHostGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiButton,{fill:!0,iconType:"gear",href:t("settings")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.fleetSettingsLink",defaultMessage:"Fleet Settings"})))};var y=n(172),v=n(58),E=n.n(v),w=n(216),x=n(291);const S=E()(r.EuiFormRow).withConfig({displayName:"AgentPolicyFormRow",componentId:"sc-1rykzod-0"})([".euiFormRow__label{width:100%;}"]),k=e=>{const{docLinks:t}=Object(o.Xc)(),{agentPolicies:n,selectedPolicyId:i,setSelectedPolicyId:l,excludeFleetServer:u,onClickCreatePolicy:c,isFleetServerPolicy:d}=e,h=Object(o.Ib)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiText,null,d?a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.selectAgentPolicyFleetServerText",defaultMessage:"Fleet Server runs on Elastic Agent, and agents are enrolled in agent policies which represent hosts. You can select an existing agent policy configured for Fleet Server, or you may choose to create a new one."}):a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.createAgentPolicyText",defaultMessage:"Settings for the monitored host are configured in the {agentPolicy}. Choose an agent policy or create a new one.",values:{agentPolicy:a.a.createElement(r.EuiLink,{href:t.links.fleet.agentPolicy,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentPolicyForm.createAgentPolicyDocLink",defaultMessage:"agent policy"}))}})),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(S,{fullWidth:!0,label:h.fleet.allAgentPolicies&&a.a.createElement(r.EuiFlexGroup,{justifyContent:"flexEnd"},a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiLink,{onClick:c},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.addPolicyButton",defaultMessage:"Create new agent policy"}))))},a.a.createElement(r.EuiSelect,{fullWidth:!0,isLoading:!n,options:n.map((e=>({value:e.id,text:e.name}))),value:i,onChange:e=>{const{value:t}=e.target;l(t)},"aria-label":g.i18n.translate("xpack.fleet.enrollmentStepAgentPolicy.policySelectAriaLabel",{defaultMessage:"Agent policy"}),hasNoInitialSelection:!i,"data-test-subj":"agentPolicyDropdown",isInvalid:!i})),h.fleet.readAgentPolicies&&i&&!d&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(w.a,{agentPolicyId:i,excludeFleetServer:u})),e.withKeySelection&&e.onKeyChange&&i&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(x.a,{selectedApiKeyId:e.selectedApiKeyId,onKeyChange:e.onKeyChange,initialAuthenticationSettingsOpen:!e.selectedApiKeyId,agentPolicyId:i})))};var M=n(221);const _=({onClose:e,agentPolicy:t,defaultMode:n="managed",isIntegrationFlow:c,installedPackagePolicy:d})=>{const h=Object(o.Ib)(),f=Object(o.Ub)(),{docLinks:m}=Object(o.Xc)(),[g,v]=Object(i.useState)(null==t?void 0:t.id),[E,w]=Object(i.useState)(!1),[x,S]=Object(i.useState)(),[k,M]=Object(i.useState)(n),[_,A]=Object(i.useState)(),{agentPolicies:C,isLoadingInitialAgentPolicies:F,isLoadingAgentPolicies:D,refreshAgentPolicies:T}=Object(o.Fb)(),{agentPolicyWithPackagePolicies:I}=Object(y.a)(g),{fleetServerHost:P,fleetProxy:O,downloadSource:j,isLoadingInitialRequest:B}=Object(o.Sb)(I),L=I||((e,t)=>{if(t)return e.find((e=>e.id===t))})(C,g),N=f.isReady&&!P;Object(i.useEffect)((()=>{L&&(L.package_policies.some((e=>{var t;return(null===(t=e.package)||void 0===t?void 0:t.name)===l.n}))?w(!0):w(!1))}),[L,E]);const{isK8s:R}=Object(y.d)(null!=L?L:void 0),{cloudSecurityIntegration:z}=Object(y.b)(null!=L?L:void 0);return a.a.createElement(r.EuiFlyout,{"data-test-subj":"agentEnrollmentFlyout",onClose:e,maxWidth:l.v},a.a.createElement(r.EuiFlyoutHeader,{hasBorder:!0,"aria-labelledby":"FleetAgentEnrollmentFlyoutTitle"},a.a.createElement(r.EuiTitle,{size:"m"},a.a.createElement("h2",{id:"FleetAgentEnrollmentFlyoutTitle"},E?a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.flyoutFleetServerTitle",defaultMessage:"Add Fleet Server"}):a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.flyoutTitle",defaultMessage:"Add agent"}))),a.a.createElement(r.EuiSpacer,{size:"l"}),E?a.a.createElement(r.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.instructionstFleetServer",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. Follow the instructions below to set up a Fleet Server. For more information, see the {userGuideLink}",values:{userGuideLink:a.a.createElement(r.EuiLink,{href:m.links.fleet.fleetServerAddFleetServer,external:!0,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.setupGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})):a.a.createElement(r.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.agentDescription",defaultMessage:"Add Elastic Agents to your hosts to collect data and send it to the Elastic Stack."})),"tabs"===_?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"l"}),a.a.createElement(r.EuiTabs,{style:{marginBottom:"-25px"}},a.a.createElement(r.EuiTab,{"data-test-subj":"managedTab",isSelected:"managed"===k,onClick:()=>M("managed")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.enrollFleetTabLabel",defaultMessage:"Enroll in Fleet"})),a.a.createElement(r.EuiTab,{"data-test-subj":"standaloneTab",isSelected:"standalone"===k,onClick:()=>M("standalone"),disabled:!h.fleet.readAgentPolicies},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.enrollStandaloneTabLabel",defaultMessage:"Run standalone"})))):null),a.a.createElement(r.EuiFlyoutBody,{banner:N&&!B&&"managed"===k?a.a.createElement(b,null):void 0},F||D?a.a.createElement(u.q,{size:"l"}):a.a.createElement(p,{fleetServerHost:P,fleetProxy:O,downloadSource:j,setSelectedPolicyId:v,agentPolicy:t,selectedPolicy:L,agentPolicies:C,isFleetServerPolicySelected:E,isK8s:R,cloudSecurityIntegration:z,refreshAgentPolicies:T,isLoadingAgentPolicies:D,mode:k,setMode:M,selectionType:_,setSelectionType:A,isIntegrationFlow:c,selectedApiKeyId:x,setSelectedAPIKeyId:S,onClickViewAgents:e,installedPackagePolicy:d})),a.a.createElement(r.EuiFlyoutFooter,null,a.a.createElement(r.EuiFlexGroup,{justifyContent:"flexStart"},a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(r.EuiButtonEmpty,{onClick:e},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.closeFlyoutButtonLabel",defaultMessage:"Close"}))))))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));const i=({apiKey:e,fleetServerHost:t,fleetProxy:n,downloadSource:i,agentVersion:a,gcpProjectId:r="<PROJECT_ID>",gcpOrganizationId:s="<ORGANIZATION_ID>",gcpAccountType:o})=>{var l,u;const c=function(e,t,n){const i=null!=n&&n.proxy_headers?Object.entries(n.proxy_headers).reduce(((e,[t,n])=>e+` --proxy-header ${t}=${n}`),""):"";return`--url=${t||"FLEET_SERVER_HOST"} --enrollment-token=${e}${n?` --proxy-url=${n.url}${i}`:""}`}(e,t,n),d=i?i.host.endsWith("/")?i.host.substring(0,i.host.length-1):i.host:"https://artifacts.elastic.co/downloads",h=null==c||null===(l=c.split("--url="))||void 0===l||null===(u=l.pop())||void 0===u?void 0:u.split("--enrollment")[0],f=null==c?void 0:c.split("--enrollment-token=")[1];return{linux:`curl -L -O ${d}/beats/elastic-agent/elastic-agent-${a}-linux-x86_64.tar.gz\ntar xzvf elastic-agent-${a}-linux-x86_64.tar.gz\ncd elastic-agent-${a}-linux-x86_64\nsudo ./elastic-agent install ${c}`,mac:`curl -L -O ${d}/beats/elastic-agent/elastic-agent-${a}-darwin-aarch64.tar.gz\ntar xzvf elastic-agent-${a}-darwin-aarch64.tar.gz\ncd elastic-agent-${a}-darwin-aarch64\nsudo ./elastic-agent install ${c}`,windows:`$ProgressPreference = 'SilentlyContinue'\nInvoke-WebRequest -Uri ${d}/beats/elastic-agent/elastic-agent-${a}-windows-x86_64.zip -OutFile elastic-agent-${a}-windows-x86_64.zip\nExpand-Archive .\\elastic-agent-${a}-windows-x86_64.zip -DestinationPath .\ncd elastic-agent-${a}-windows-x86_64\n.\\elastic-agent.exe install ${c}`,deb:`curl -L -O ${d}/beats/elastic-agent/elastic-agent-${a}-amd64.deb\nsudo dpkg -i elastic-agent-${a}-amd64.deb\nsudo elastic-agent enroll ${c} \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,rpm:`curl -L -O ${d}/beats/elastic-agent/elastic-agent-${a}-x86_64.rpm\nsudo rpm -vi elastic-agent-${a}-x86_64.rpm\nsudo elastic-agent enroll ${c} \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,kubernetes:"kubectl apply -f elastic-agent-managed-kubernetes.yml",cloudFormation:"",googleCloudShell:`gcloud config set project ${r} && ${"organization-account"===o?`ORG_ID=${s}`:""} FLEET_URL=${null==h?void 0:h.trim()} ENROLLMENT_TOKEN=${f} STACK_VERSION=${a} ./deploy.sh`}},a=e=>({linux:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-linux-x86_64.tar.gz\ntar xzvf elastic-agent-${e}-linux-x86_64.tar.gz\ncd elastic-agent-${e}-linux-x86_64\nsudo ./elastic-agent install`,mac:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-darwin-aarch64.tar.gz\ntar xzvf elastic-agent-${e}-darwin-aarch64.tar.gz\ncd elastic-agent-${e}-darwin-aarch64\nsudo ./elastic-agent install`,windows:`$ProgressPreference = 'SilentlyContinue'\nInvoke-WebRequest -Uri https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-windows-x86_64.zip -OutFile elastic-agent-${e}-windows-x86_64.zip\nExpand-Archive .elastic-agent-${e}-windows-x86_64.zip -DestinationPath .\ncd elastic-agent-${e}-windows-x86_64\n.\\elastic-agent.exe install`,deb:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-amd64.deb\nsudo dpkg -i elastic-agent-${e}-amd64.deb \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,rpm:`curl -L -O https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${e}-x86_64.rpm\nsudo rpm -vi elastic-agent-${e}-x86_64.rpm \nsudo systemctl enable elastic-agent \nsudo systemctl start elastic-agent`,kubernetes:"kubectl apply -f elastic-agent-standalone-kubernetes.yml"})},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(445);Object.defineProperty(t,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return i.AllSubstringsIndexStrategy}});var a=n(446);Object.defineProperty(t,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return a.ExactWordIndexStrategy}});var r=n(447);Object.defineProperty(t,"PrefixIndexStrategy",{enumerable:!0,get:function(){return r.PrefixIndexStrategy}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(448);Object.defineProperty(t,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return i.CaseSensitiveSanitizer}});var a=n(449);Object.defineProperty(t,"LowerCaseSanitizer",{enumerable:!0,get:function(){return a.LowerCaseSanitizer}})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(1),a=n.n(i),r=n(6),s=n(0),o=n(140);const l=({excludeFleetServer:e,pkgName:t,pkgVersion:n,pkgTitle:i})=>a.a.createElement(r.EuiBadge,{color:"hollow",isDisabled:e&&t===s.ab},a.a.createElement(r.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center",responsive:!1},a.a.createElement(r.EuiFlexItem,{grow:!1},a.a.createElement(o.t,{packageName:t,version:n||"",tryApi:void 0!==n})),a.a.createElement(r.EuiFlexItem,{grow:!1},i)))},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(1),a=n.n(i),r=n(4),s=n(12),o=n(6),l=n(0),u=n(15),c=n(215);const d=({agentPolicyId:e,hideTitle:t,excludeFleetServer:n})=>{const d=Object(u.lc)(e),h=d.data?d.data.item:null,f=Object(i.useMemo)((()=>{if(!h)return;const e=new Map;return h.package_policies.forEach((({package:t})=>{t&&(!e.has(t.name)||e.get(t.name).version<t.version)&&e.set(t.name,t)})),[...e.values()]}),[h]),p=Object(i.useMemo)((()=>n&&(null==f?void 0:f.some((e=>e.name===l.ab)))),[f,n]),m=Object(i.useMemo)((()=>f?f.filter((e=>!n||e.name!==l.ab)).length:0),[f,n]);return h&&f?a.a.createElement(a.a.Fragment,null,!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentReassignPolicy.policyDescription",defaultMessage:"The selected agent policy will collect data for {count, plural, one {{countValue} integration} other {{countValue} integrations}}:",values:{count:m,countValue:a.a.createElement("b",null,m)}})),a.a.createElement(o.EuiSpacer,{size:"s"})),a.a.createElement(o.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center",wrap:!0},f.map(((e,t)=>a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(c.a,{key:t,excludeFleetServer:n,pkgName:e.name,pkgVersion:e.version,pkgTitle:e.title}))))),p&&a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiSpacer,{size:"s"}),a.a.createElement(o.EuiCallOut,{size:"s",color:"warning",iconType:"warning",title:r.i18n.translate("xpack.fleet.agentReassignPolicy.packageBadgeFleetServerWarning",{defaultMessage:"Fleet Server will not be enabled in standalone mode."})}))):null}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(1),a=n.n(i),r=n(9),s=n(18);function o(e){var t;const{storage:n,uiSettings:i}=Object(s.a)(),o=i.get("hideAnnouncements",!1)||!1===(null===(t=n.get(r.A[e]))||void 0===t?void 0:t.active),[l,u]=a.a.useState(o);return{isHidden:l,dismiss:a.a.useCallback((()=>{u(!0),n.set(r.A[e],{active:!1})}),[e,n])}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i=n(20),a=n.n(i),r=n(1),s=n.n(r),o=n(58),l=n.n(o),u=n(104),c=n(108),d=n(4),h=n(17),f=n(16);const p=l()(c.QueryStringInput).withConfig({displayName:"NoWrapQueryStringInput",componentId:"sc-esihk1-0"})([".kbnQueryBar__textarea{white-space:nowrap;}"]),m=(e,t,n)=>e!==f.m||n.startsWith(t)?n:`${t}.${n}`,g=e=>{switch(e){case"keyword":case"text":case"version":return"string";case"integer":case"double":return"number";default:return e}},b=(e,t="")=>{let n=[];for(const i in e)"object"==typeof e[i]?n=n.concat(b(e[i],`${t}${i}.`)):n.push(`${t}${i}:${e[i]}`);return n},y=({value:e,fieldPrefix:t,onChange:n,placeholder:i,indexPattern:o,dataTestSubj:l})=>{const{data:c,dataViews:y,unifiedSearch:v,storage:E,notifications:w,http:x,docLinks:S,uiSettings:k,usageCollection:M}=Object(h.sc)(),[_,A]=Object(r.useState)(),C=Object(r.useMemo)((()=>{if(!e||""===e)return!0;try{return Object(u.fromKueryExpression)(e),!0}catch(e){return!1}}),[e]);return Object(r.useEffect)((()=>{(async()=>{try{const e=((e,t)=>{const n=((e,t)=>{switch(e){case f.a:return f.c;case f.m:return t===f.e?f.d:{};case f.g:return f.h;default:return{}}})(e,t);return(b(null==n?void 0:n.properties)||[]).map((e=>e.replaceAll(/.properties/g,""))).map((e=>e.replace(/.type/g,""))).map((e=>e.split(":"))).map((n=>({name:m(e,t,n[0]),type:g(n[1]),searchable:!0,aggregatable:!0,esTypes:[n[1]]})))})(o,t),n=c.dataViews.fieldArrayToMap(e),i=await c.dataViews.create({title:o,fields:n},!0);A(i)}catch(e){A(void 0)}})()}),[c.dataViews,t,o]),s.a.createElement(p,a()({iconType:"search",disableLanguageSwitcher:!0,indexPatterns:_?[_]:[],query:{query:e,language:"kuery"},isInvalid:!C,disableAutoFocus:!0,placeholder:i,onChange:e=>{n(e.query)},onSubmit:e=>{n(e.query,!0)},submitOnBlur:!0,isClearable:!0,autoSubmit:!0,appName:d.i18n.translate("xpack.fleet.appTitle",{defaultMessage:"Fleet"}),deps:{unifiedSearch:v,notifications:w,http:x,docLinks:S,uiSettings:k,data:c,dataViews:y,storage:E,usageCollection:M}},l&&{dataTestSubj:l}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(1),a=n.n(i),r=n(58),s=n.n(r),o=n(6),l=n(4),u=n(12),c=n(15),d=n(17);const h=s()(o.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-zlzelr-0"})(["min-width:0px;max-width:100%;"]),f=s.a.div.attrs((()=>({className:"eui-textBreakAll"}))).withConfig({displayName:"CommandCode",componentId:"sc-zlzelr-1"})(["margin-right:",";"],(e=>e.theme.eui.euiSizeM)),p=({serviceToken:e,generateServiceToken:t,isLoadingServiceToken:n,isRemote:i=!1})=>{const{docLinks:r}=Object(c.Xc)(),{permissionsError:s,isPermissionsLoading:p}=Object(d.Ab)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiText,null,i?a.a.createElement(u.FormattedMessage,{id:"xpack.fleet.settings.remoteServiceToken.generateServiceTokenDescription",defaultMessage:"A service token grants Fleet Server permissions to write to Elasticsearch, and can be used to configure this Elasticsearch cluster for remote output. For more information, see the {fleetUserGuide}.",values:{fleetUserGuide:a.a.createElement(o.EuiLink,{href:r.links.fleet.guide,target:"_blank"},l.i18n.translate("xpack.fleet.settings.editOutputFlyout.fleetUserGuideLabel",{defaultMessage:"Fleet User Guide"}))}}):a.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.generateServiceTokenDescription",defaultMessage:"A service token grants Fleet Server permissions to write to Elasticsearch."})),a.a.createElement(o.EuiSpacer,{size:"m"}),e?a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiCallOut,{iconType:"check",size:"s",color:"success",title:a.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.saveServiceTokenDescription",defaultMessage:"Save your service token information. This will be shown only once."})}),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiFlexGroup,{direction:"column",gutterSize:"s"},a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement("strong",{"data-test-subject":"serviceTokenSaveReminderHeader"},a.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.serviceTokenLabel",defaultMessage:"Service token"}))),a.a.createElement(h,null,a.a.createElement(o.EuiCodeBlock,{paddingSize:"m",isCopyable:!0},a.a.createElement(f,null,e))))):a.a.createElement(o.EuiFlexGroup,null,a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiToolTip,{content:i&&s?a.a.createElement(u.FormattedMessage,{id:"xpack.fleet.settings.remoteServiceToken.noPermissionTooltip",defaultMessage:"To generate service token, you must have the minimum required privileges. Contact your administrator."}):null},a.a.createElement(o.EuiButton,{fill:!0,isLoading:n,isDisabled:n||p||!!s,onClick:()=>{t(i)},"data-test-subj":"fleetServerGenerateServiceTokenBtn"},a.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.generateServiceTokenButton",defaultMessage:"Generate service token"}))))))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n(1),a=n.n(i),r=n(6),s=n(12),o=n(4),l=n(15),u=n(9);const c=(e,t)=>{const[n,a]=Object(i.useState)([]),[r,s]=Object(i.useState)(!1),o=Object(i.useRef)(void 0),c=null!=t&&t.noLowerTimeLimit?"":`and ${u.b}.enrolled_at >= now-10m`,d=`${u.b}.policy_id:"${e}" and not (_exists_:"${u.b}.unenrolled_at") ${c}`,h=Object(i.useCallback)((async()=>{var e,t;const i=null!==(e=null===(t=(await Object(l.E)({kuery:d,showInactive:!1})).data)||void 0===t?void 0:t.items.map((e=>e.id)))&&void 0!==e?e:n;i.some((e=>!n.includes(e)))&&a(i)}),[n,d]);return!r&&null!=t&&t.pollImmediately&&(h(),s(!0)),Object(i.useEffect)((()=>{let e=!1;const t=()=>{o.current=window.setTimeout((async()=>{h(),e||t()}),5e3)};return t(),(e||n.length>0)&&clearTimeout(o.current),()=>{e=!0}}),[n,e,d,h]),{enrolledAgentIds:n}},d=({policyId:e,troubleshootLink:t,onClickViewAgents:n,agentCount:i,showLoading:u=!1,isLongEnrollment:c=!1})=>{const{getHref:d}=Object(l.Kc)(),{application:h}=Object(l.Xc)(),f=!!n,p=()=>a.a.createElement(r.EuiLink,{target:"_blank",external:!0,href:t},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.troubleshootingLink",defaultMessage:"troubleshooting guide"}));return!e||0===i&&!u?a.a.createElement(r.EuiText,null,a.a.createElement(s.FormattedMessage,{"data-test-subj":"ConfirmAgentEnrollmentCallOut.troubleshooting",id:"xpack.fleet.enrollmentInstructions.troubleshootingText",defaultMessage:"If you are having trouble connecting, see our {link}.",values:{link:a.a.createElement(p,null)}})):u&&!i?a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiCallOut,{size:"m",color:"primary",iconType:r.EuiLoadingSpinner,title:c?a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.loading.listeninglongenrollemnt",defaultMessage:"Listening for agent... this can take several minutes"}):a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.loading.listening",defaultMessage:"Listening for agent"})}),a.a.createElement(r.EuiSpacer,{size:"m"}),a.a.createElement(r.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrollment.loading.instructions",defaultMessage:"After the agent starts up, the Elastic Stack listens for the agent and confirms the enrollment in Fleet. If you're having trouble connecting, check out the {link}.",values:{link:a.a.createElement(p,null)}}))):a.a.createElement(r.EuiCallOut,{"data-test-subj":"ConfirmAgentEnrollmentCallOut",title:o.i18n.translate("xpack.fleet.agentEnrollment.confirmation.title",{defaultMessage:"{agentCount} {agentCount, plural, one {agent has} other {agents have}} been enrolled.",values:{agentCount:i}}),color:"success",iconType:"check"},f&&a.a.createElement(r.EuiButton,{onClick:()=>{n&&n();const e=d("agent_list");h.navigateToUrl(e)},color:"success","data-test-subj":"ConfirmAgentEnrollmentButton"},o.i18n.translate("xpack.fleet.agentEnrollment.confirmation.button",{defaultMessage:"View enrolled agents"})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(1),a=n.n(i),r=n(141),s=n(144),o=n(3),l=n(203);const u=({agentPolicies:e,excludeFleetServer:t,setSelectedPolicyId:n,selectedPolicyId:u,withKeySelection:c,selectedApiKeyId:d,onKeyChange:h,isFleetServerPolicy:f,refreshAgentPolicies:p})=>{const m=Object(i.useMemo)((()=>e.filter((e=>e&&!e.is_managed&&(!t||!e.is_default_fleet_server)))),[e,t]);Object(i.useEffect)((()=>{1!==m.length||u||!1===t||Object(o.z)(m[0])||n(m[0].id)}),[m,u,n,t]);const g=Object(i.useCallback)((async(e,t)=>{t&&p()}),[p]),[b,y]=Object(i.useState)(0===m.length),[v,E]=Object(i.useState)({status:r.f.INITIAL}),[w,x]=Object(i.useState)(Object(o.o)(m,f));Object(i.useEffect)((()=>{y(0===m.length&&!u),x(Object(o.o)(m,f))}),[m,f,u]);const S=Object(i.useCallback)((async(e,t)=>{e?(y(!1),E({status:r.f.CREATED}),g&&g(e.id,e),n(e.id)):E({status:r.f.FAILED,errorMessage:t})}),[n,g]);return a.a.createElement(a.a.Fragment,null,b?a.a.createElement(s.b,{updateAgentPolicy:S,isFleetServerPolicy:f,agentPolicyName:w}):a.a.createElement(l.b,{agentPolicies:m,withKeySelection:c,selectedApiKeyId:d,onKeyChange:h,excludeFleetServer:t,onClickCreatePolicy:()=>{E({status:r.f.INITIAL}),y(!0),c&&h&&h(void 0)},selectedPolicyId:u,setSelectedPolicyId:n,isFleetServerPolicy:f}),v.status!==r.f.INITIAL&&a.a.createElement(r.b,{createState:v}))}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMap=t.setErrorMap=t.defaultErrorMap=void 0;const a=i(n(293));t.defaultErrorMap=a.default;let r=a.default;t.setErrorMap=function(e){r=e},t.getErrorMap=function(){return r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;const i=n(193);t.ZodIssueCode=i.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},i=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(i);else if("invalid_return_type"===a.code)i(a.returnTypeError);else if("invalid_arguments"===a.code)i(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,i=0;for(;i<a.path.length;){const n=a.path[i];i===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],i++}}};return i(this),n}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=ZodError,ZodError.create=e=>new ZodError(e)},function(e,t,n){"use strict";var i=n(159);e.exports=new i({explicit:[n(464),n(465),n(466)]})},function(e,t,n){"use strict";(function(t){var i=n(118),a=n(484),r=new Array(16);function s(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function o(e,t){return e<<t|e>>>32-t}function l(e,t,n,i,a,r,s){return o(e+(t&n|~t&i)+a+r|0,s)+t|0}function u(e,t,n,i,a,r,s){return o(e+(t&i|n&~i)+a+r|0,s)+t|0}function c(e,t,n,i,a,r,s){return o(e+(t^n^i)+a+r|0,s)+t|0}function d(e,t,n,i,a,r,s){return o(e+(n^(t|~i))+a+r|0,s)+t|0}i(s,a),s.prototype._update=function(){for(var e=r,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,a=this._c,s=this._d;n=l(n,i,a,s,e[0],3614090360,7),s=l(s,n,i,a,e[1],3905402710,12),a=l(a,s,n,i,e[2],606105819,17),i=l(i,a,s,n,e[3],3250441966,22),n=l(n,i,a,s,e[4],4118548399,7),s=l(s,n,i,a,e[5],1200080426,12),a=l(a,s,n,i,e[6],2821735955,17),i=l(i,a,s,n,e[7],4249261313,22),n=l(n,i,a,s,e[8],1770035416,7),s=l(s,n,i,a,e[9],2336552879,12),a=l(a,s,n,i,e[10],4294925233,17),i=l(i,a,s,n,e[11],2304563134,22),n=l(n,i,a,s,e[12],1804603682,7),s=l(s,n,i,a,e[13],4254626195,12),a=l(a,s,n,i,e[14],2792965006,17),n=u(n,i=l(i,a,s,n,e[15],1236535329,22),a,s,e[1],4129170786,5),s=u(s,n,i,a,e[6],3225465664,9),a=u(a,s,n,i,e[11],643717713,14),i=u(i,a,s,n,e[0],3921069994,20),n=u(n,i,a,s,e[5],3593408605,5),s=u(s,n,i,a,e[10],38016083,9),a=u(a,s,n,i,e[15],3634488961,14),i=u(i,a,s,n,e[4],3889429448,20),n=u(n,i,a,s,e[9],568446438,5),s=u(s,n,i,a,e[14],3275163606,9),a=u(a,s,n,i,e[3],4107603335,14),i=u(i,a,s,n,e[8],1163531501,20),n=u(n,i,a,s,e[13],2850285829,5),s=u(s,n,i,a,e[2],4243563512,9),a=u(a,s,n,i,e[7],1735328473,14),n=c(n,i=u(i,a,s,n,e[12],2368359562,20),a,s,e[5],4294588738,4),s=c(s,n,i,a,e[8],2272392833,11),a=c(a,s,n,i,e[11],1839030562,16),i=c(i,a,s,n,e[14],4259657740,23),n=c(n,i,a,s,e[1],2763975236,4),s=c(s,n,i,a,e[4],1272893353,11),a=c(a,s,n,i,e[7],4139469664,16),i=c(i,a,s,n,e[10],3200236656,23),n=c(n,i,a,s,e[13],681279174,4),s=c(s,n,i,a,e[0],3936430074,11),a=c(a,s,n,i,e[3],3572445317,16),i=c(i,a,s,n,e[6],76029189,23),n=c(n,i,a,s,e[9],3654602809,4),s=c(s,n,i,a,e[12],3873151461,11),a=c(a,s,n,i,e[15],530742520,16),n=d(n,i=c(i,a,s,n,e[2],3299628645,23),a,s,e[0],4096336452,6),s=d(s,n,i,a,e[7],1126891415,10),a=d(a,s,n,i,e[14],2878612391,15),i=d(i,a,s,n,e[5],4237533241,21),n=d(n,i,a,s,e[12],1700485571,6),s=d(s,n,i,a,e[3],2399980690,10),a=d(a,s,n,i,e[10],4293915773,15),i=d(i,a,s,n,e[1],2240044497,21),n=d(n,i,a,s,e[8],1873313359,6),s=d(s,n,i,a,e[15],4264355552,10),a=d(a,s,n,i,e[6],2734768916,15),i=d(i,a,s,n,e[13],1309151649,21),n=d(n,i,a,s,e[4],4149444226,6),s=d(s,n,i,a,e[11],3174756917,10),a=d(a,s,n,i,e[2],718787259,15),i=d(i,a,s,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+i|0,this._c=this._c+a|0,this._d=this._d+s|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new t(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=s}).call(this,n(86).Buffer)},function(e,t,n){e.exports=a;var i=n(174).EventEmitter;function a(){i.call(this)}n(118)(a,i),a.Readable=n(227),a.Writable=n(493),a.Duplex=n(494),a.Transform=n(495),a.PassThrough=n(496),a.Stream=a,a.prototype.pipe=function(e,t){var n=this;function a(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function r(){n.readable&&n.resume&&n.resume()}n.on("data",a),e.on("drain",r),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",l));var s=!1;function o(){s||(s=!0,e.end())}function l(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",a),e.removeListener("drain",r),n.removeListener("end",o),n.removeListener("close",l),n.removeListener("error",u),e.removeListener("error",u),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",u),e.on("error",u),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},function(e,t,n){(t=e.exports=n(298)).Stream=t,t.Readable=t,t.Writable=n(229),t.Duplex=n(155),t.Transform=n(302),t.PassThrough=n(492)},function(e,t,n){var i=n(86),a=i.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=s),r(a,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";(function(t,i,a){var r=n(195);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var a=i.callback;t.pendingcb--,a(undefined),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var o,l=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:r.nextTick;y.WritableState=b;var u=Object.create(n(175));u.inherits=n(118);var c,d={deprecate:n(301)},h=n(299),f=n(228).Buffer,p=a.Uint8Array||function(){},m=n(300);function g(){}function b(e,t){o=o||n(155),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var a=e.highWaterMark,u=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i&&(u||0===u)?u:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,a=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,a){--t.pendingcb,n?(r.nextTick(a,i),r.nextTick(k,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(a(i),e._writableState.errorEmitted=!0,e.emit("error",i),k(e,t))}(e,n,i,t,a);else{var s=x(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||w(e,n),i?l(E,e,n,s,a):E(e,n,s,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(e){if(o=o||n(155),!(c.call(y,this)||this instanceof o))return new y(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),h.call(this)}function v(e,t,n,i,a,r,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,r,t.onwrite),t.sync=!1}function E(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),k(e,t)}function w(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,a=new Array(i),r=t.corkedRequestsFree;r.entry=n;for(var o=0,l=!0;n;)a[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;a.allBuffers=l,v(e,t,!0,t.length,a,"",r.finish),t.pendingcb++,t.lastBufferedRequest=null,r.next?(t.corkedRequestsFree=r.next,r.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback;if(v(e,t,!1,t.objectMode?1:u.length,u,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),k(e,t)}))}function k(e,t){var n=x(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}u.inherits(y,h),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===y&&e&&e._writableState instanceof b}})):c=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var i,a=this._writableState,s=!1,o=!a.objectMode&&(i=e,f.isBuffer(i)||i instanceof p);return o&&!f.isBuffer(e)&&(e=function(e){return f.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=g),a.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}(this,n):(o||function(e,t,n,i){var a=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),r.nextTick(i,s),a=!1),a}(this,a,e,n))&&(a.pendingcb++,s=function(e,t,n,i,a,r){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=f.from(t,n)),t}(t,i,a);i!==s&&(n=!0,a="buffer",i=s)}var o=t.objectMode?1:i.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:a,isBuf:n,callback:r,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,o,i,a,r);return l}(this,a,o,e,t,n)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,n){t.ending=!0,k(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(87),n(489).setImmediate,n(139))},function(e,t,n){"use strict";(function(t){var i=n(118),a=n(497);function r(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function s(e,t){return e<<t|e>>>32-t}function o(e,t,n,i,a,r,o,l){return s(e+(t^n^i)+r+o|0,l)+a|0}function l(e,t,n,i,a,r,o,l){return s(e+(t&n|~t&i)+r+o|0,l)+a|0}function u(e,t,n,i,a,r,o,l){return s(e+((t|~n)^i)+r+o|0,l)+a|0}function c(e,t,n,i,a,r,o,l){return s(e+(t&i|n&~i)+r+o|0,l)+a|0}function d(e,t,n,i,a,r,o,l){return s(e+(t^(n|~i))+r+o|0,l)+a|0}i(r,a),r.prototype._update=function(){for(var e=new Array(16),t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,i=this._b,a=this._c,r=this._d,h=this._e;n=o(n,i,a,r,h,e[0],0,11),h=o(h,n,i,a=s(a,10),r,e[1],0,14),r=o(r,h,n,i=s(i,10),a,e[2],0,15),a=o(a,r,h,n=s(n,10),i,e[3],0,12),i=o(i,a,r,h=s(h,10),n,e[4],0,5),n=o(n,i,a,r=s(r,10),h,e[5],0,8),h=o(h,n,i,a=s(a,10),r,e[6],0,7),r=o(r,h,n,i=s(i,10),a,e[7],0,9),a=o(a,r,h,n=s(n,10),i,e[8],0,11),i=o(i,a,r,h=s(h,10),n,e[9],0,13),n=o(n,i,a,r=s(r,10),h,e[10],0,14),h=o(h,n,i,a=s(a,10),r,e[11],0,15),r=o(r,h,n,i=s(i,10),a,e[12],0,6),a=o(a,r,h,n=s(n,10),i,e[13],0,7),i=o(i,a,r,h=s(h,10),n,e[14],0,9),h=l(h,n=o(n,i,a,r=s(r,10),h,e[15],0,8),i,a=s(a,10),r,e[7],1518500249,7),r=l(r,h,n,i=s(i,10),a,e[4],1518500249,6),a=l(a,r,h,n=s(n,10),i,e[13],1518500249,8),i=l(i,a,r,h=s(h,10),n,e[1],1518500249,13),n=l(n,i,a,r=s(r,10),h,e[10],1518500249,11),h=l(h,n,i,a=s(a,10),r,e[6],1518500249,9),r=l(r,h,n,i=s(i,10),a,e[15],1518500249,7),a=l(a,r,h,n=s(n,10),i,e[3],1518500249,15),i=l(i,a,r,h=s(h,10),n,e[12],1518500249,7),n=l(n,i,a,r=s(r,10),h,e[0],1518500249,12),h=l(h,n,i,a=s(a,10),r,e[9],1518500249,15),r=l(r,h,n,i=s(i,10),a,e[5],1518500249,9),a=l(a,r,h,n=s(n,10),i,e[2],1518500249,11),i=l(i,a,r,h=s(h,10),n,e[14],1518500249,7),n=l(n,i,a,r=s(r,10),h,e[11],1518500249,13),r=u(r,h=l(h,n,i,a=s(a,10),r,e[8],1518500249,12),n,i=s(i,10),a,e[3],1859775393,11),a=u(a,r,h,n=s(n,10),i,e[10],1859775393,13),i=u(i,a,r,h=s(h,10),n,e[14],1859775393,6),n=u(n,i,a,r=s(r,10),h,e[4],1859775393,7),h=u(h,n,i,a=s(a,10),r,e[9],1859775393,14),r=u(r,h,n,i=s(i,10),a,e[15],1859775393,9),a=u(a,r,h,n=s(n,10),i,e[8],1859775393,13),i=u(i,a,r,h=s(h,10),n,e[1],1859775393,15),n=u(n,i,a,r=s(r,10),h,e[2],1859775393,14),h=u(h,n,i,a=s(a,10),r,e[7],1859775393,8),r=u(r,h,n,i=s(i,10),a,e[0],1859775393,13),a=u(a,r,h,n=s(n,10),i,e[6],1859775393,6),i=u(i,a,r,h=s(h,10),n,e[13],1859775393,5),n=u(n,i,a,r=s(r,10),h,e[11],1859775393,12),h=u(h,n,i,a=s(a,10),r,e[5],1859775393,7),a=c(a,r=u(r,h,n,i=s(i,10),a,e[12],1859775393,5),h,n=s(n,10),i,e[1],2400959708,11),i=c(i,a,r,h=s(h,10),n,e[9],2400959708,12),n=c(n,i,a,r=s(r,10),h,e[11],2400959708,14),h=c(h,n,i,a=s(a,10),r,e[10],2400959708,15),r=c(r,h,n,i=s(i,10),a,e[0],2400959708,14),a=c(a,r,h,n=s(n,10),i,e[8],2400959708,15),i=c(i,a,r,h=s(h,10),n,e[12],2400959708,9),n=c(n,i,a,r=s(r,10),h,e[4],2400959708,8),h=c(h,n,i,a=s(a,10),r,e[13],2400959708,9),r=c(r,h,n,i=s(i,10),a,e[3],2400959708,14),a=c(a,r,h,n=s(n,10),i,e[7],2400959708,5),i=c(i,a,r,h=s(h,10),n,e[15],2400959708,6),n=c(n,i,a,r=s(r,10),h,e[14],2400959708,8),h=c(h,n,i,a=s(a,10),r,e[5],2400959708,6),r=c(r,h,n,i=s(i,10),a,e[6],2400959708,5),i=d(i,a=c(a,r,h,n=s(n,10),i,e[2],2400959708,12),r,h=s(h,10),n,e[4],2840853838,9),n=d(n,i,a,r=s(r,10),h,e[0],2840853838,15),h=d(h,n,i,a=s(a,10),r,e[5],2840853838,5),r=d(r,h,n,i=s(i,10),a,e[9],2840853838,11),a=d(a,r,h,n=s(n,10),i,e[7],2840853838,6),i=d(i,a,r,h=s(h,10),n,e[12],2840853838,8),n=d(n,i,a,r=s(r,10),h,e[2],2840853838,13),h=d(h,n,i,a=s(a,10),r,e[10],2840853838,12),r=d(r,h,n,i=s(i,10),a,e[14],2840853838,5),a=d(a,r,h,n=s(n,10),i,e[1],2840853838,12),i=d(i,a,r,h=s(h,10),n,e[3],2840853838,13),n=d(n,i,a,r=s(r,10),h,e[8],2840853838,14),h=d(h,n,i,a=s(a,10),r,e[11],2840853838,11),r=d(r,h,n,i=s(i,10),a,e[6],2840853838,8),a=d(a,r,h,n=s(n,10),i,e[15],2840853838,5),i=d(i,a,r,h=s(h,10),n,e[13],2840853838,6),r=s(r,10);var f=this._a,p=this._b,m=this._c,g=this._d,b=this._e;f=d(f,p,m,g,b,e[5],1352829926,8),b=d(b,f,p,m=s(m,10),g,e[14],1352829926,9),g=d(g,b,f,p=s(p,10),m,e[7],1352829926,9),m=d(m,g,b,f=s(f,10),p,e[0],1352829926,11),p=d(p,m,g,b=s(b,10),f,e[9],1352829926,13),f=d(f,p,m,g=s(g,10),b,e[2],1352829926,15),b=d(b,f,p,m=s(m,10),g,e[11],1352829926,15),g=d(g,b,f,p=s(p,10),m,e[4],1352829926,5),m=d(m,g,b,f=s(f,10),p,e[13],1352829926,7),p=d(p,m,g,b=s(b,10),f,e[6],1352829926,7),f=d(f,p,m,g=s(g,10),b,e[15],1352829926,8),b=d(b,f,p,m=s(m,10),g,e[8],1352829926,11),g=d(g,b,f,p=s(p,10),m,e[1],1352829926,14),m=d(m,g,b,f=s(f,10),p,e[10],1352829926,14),p=d(p,m,g,b=s(b,10),f,e[3],1352829926,12),b=c(b,f=d(f,p,m,g=s(g,10),b,e[12],1352829926,6),p,m=s(m,10),g,e[6],1548603684,9),g=c(g,b,f,p=s(p,10),m,e[11],1548603684,13),m=c(m,g,b,f=s(f,10),p,e[3],1548603684,15),p=c(p,m,g,b=s(b,10),f,e[7],1548603684,7),f=c(f,p,m,g=s(g,10),b,e[0],1548603684,12),b=c(b,f,p,m=s(m,10),g,e[13],1548603684,8),g=c(g,b,f,p=s(p,10),m,e[5],1548603684,9),m=c(m,g,b,f=s(f,10),p,e[10],1548603684,11),p=c(p,m,g,b=s(b,10),f,e[14],1548603684,7),f=c(f,p,m,g=s(g,10),b,e[15],1548603684,7),b=c(b,f,p,m=s(m,10),g,e[8],1548603684,12),g=c(g,b,f,p=s(p,10),m,e[12],1548603684,7),m=c(m,g,b,f=s(f,10),p,e[4],1548603684,6),p=c(p,m,g,b=s(b,10),f,e[9],1548603684,15),f=c(f,p,m,g=s(g,10),b,e[1],1548603684,13),g=u(g,b=c(b,f,p,m=s(m,10),g,e[2],1548603684,11),f,p=s(p,10),m,e[15],1836072691,9),m=u(m,g,b,f=s(f,10),p,e[5],1836072691,7),p=u(p,m,g,b=s(b,10),f,e[1],1836072691,15),f=u(f,p,m,g=s(g,10),b,e[3],1836072691,11),b=u(b,f,p,m=s(m,10),g,e[7],1836072691,8),g=u(g,b,f,p=s(p,10),m,e[14],1836072691,6),m=u(m,g,b,f=s(f,10),p,e[6],1836072691,6),p=u(p,m,g,b=s(b,10),f,e[9],1836072691,14),f=u(f,p,m,g=s(g,10),b,e[11],1836072691,12),b=u(b,f,p,m=s(m,10),g,e[8],1836072691,13),g=u(g,b,f,p=s(p,10),m,e[12],1836072691,5),m=u(m,g,b,f=s(f,10),p,e[2],1836072691,14),p=u(p,m,g,b=s(b,10),f,e[10],1836072691,13),f=u(f,p,m,g=s(g,10),b,e[0],1836072691,13),b=u(b,f,p,m=s(m,10),g,e[4],1836072691,7),m=l(m,g=u(g,b,f,p=s(p,10),m,e[13],1836072691,5),b,f=s(f,10),p,e[8],2053994217,15),p=l(p,m,g,b=s(b,10),f,e[6],2053994217,5),f=l(f,p,m,g=s(g,10),b,e[4],2053994217,8),b=l(b,f,p,m=s(m,10),g,e[1],2053994217,11),g=l(g,b,f,p=s(p,10),m,e[3],2053994217,14),m=l(m,g,b,f=s(f,10),p,e[11],2053994217,14),p=l(p,m,g,b=s(b,10),f,e[15],2053994217,6),f=l(f,p,m,g=s(g,10),b,e[0],2053994217,14),b=l(b,f,p,m=s(m,10),g,e[5],2053994217,6),g=l(g,b,f,p=s(p,10),m,e[12],2053994217,9),m=l(m,g,b,f=s(f,10),p,e[2],2053994217,12),p=l(p,m,g,b=s(b,10),f,e[13],2053994217,9),f=l(f,p,m,g=s(g,10),b,e[9],2053994217,12),b=l(b,f,p,m=s(m,10),g,e[7],2053994217,5),g=l(g,b,f,p=s(p,10),m,e[10],2053994217,15),p=o(p,m=l(m,g,b,f=s(f,10),p,e[14],2053994217,8),g,b=s(b,10),f,e[12],0,8),f=o(f,p,m,g=s(g,10),b,e[15],0,5),b=o(b,f,p,m=s(m,10),g,e[10],0,12),g=o(g,b,f,p=s(p,10),m,e[4],0,9),m=o(m,g,b,f=s(f,10),p,e[1],0,12),p=o(p,m,g,b=s(b,10),f,e[5],0,5),f=o(f,p,m,g=s(g,10),b,e[8],0,14),b=o(b,f,p,m=s(m,10),g,e[7],0,6),g=o(g,b,f,p=s(p,10),m,e[6],0,8),m=o(m,g,b,f=s(f,10),p,e[2],0,13),p=o(p,m,g,b=s(b,10),f,e[13],0,6),f=o(f,p,m,g=s(g,10),b,e[14],0,5),b=o(b,f,p,m=s(m,10),g,e[0],0,15),g=o(g,b,f,p=s(p,10),m,e[3],0,13),m=o(m,g,b,f=s(f,10),p,e[9],0,11),p=o(p,m,g,b=s(b,10),f,e[11],0,11),g=s(g,10);var y=this._b+a+g|0;this._b=this._c+r+b|0,this._c=this._d+h+f|0,this._d=this._e+n+p|0,this._e=this._a+i+m|0,this._a=y},r.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new t(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=r}).call(this,n(86).Buffer)},function(e,t,n){(t=e.exports=function(e){e=e.toLowerCase();var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n}).sha=n(498),t.sha1=n(499),t.sha224=n(500),t.sha256=n(303),t.sha384=n(501),t.sha512=n(304)},function(e,t,n){var i=n(506),a=n(514),r=n(314);t.createCipher=t.Cipher=i.createCipher,t.createCipheriv=t.Cipheriv=i.createCipheriv,t.createDecipher=t.Decipher=a.createDecipher,t.createDecipheriv=t.Decipheriv=a.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(r)}},function(e,t,n){var i={ECB:n(507),CBC:n(508),CFB:n(509),CFB8:n(510),CFB1:n(511),OFB:n(512),CTR:n(312),GCM:n(312)},a=n(314);for(var r in a)a[r].module=i[a[r].mode];e.exports=a},function(e,t,n){"use strict";t.utils=n(516),t.Cipher=n(517),t.DES=n(518),t.CBC=n(519),t.EDE=n(520)},function(e,t,n){e.exports=n(41)(455)},function(e,t,n){var i;function a(e){this.rand=e}if(e.exports=function(e){return i||(i=new a(null)),i.generate(e)},e.exports.Rand=a,a.prototype.generate=function(e){return this._rand(e)},a.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=n(524);if("function"!=typeof r.randomBytes)throw new Error("Not supported");a.prototype._rand=function(e){return r.randomBytes(e)}}catch(e){}},function(e,t,n){"use strict";var i=n(162).codes.ERR_STREAM_PREMATURE_CLOSE;function a(){}e.exports=function e(t,n,r){if("function"==typeof n)return e(t,null,n);n||(n={}),r=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];e.apply(this,i)}}}(r||a);var s=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,l=function(){t.writable||c()},u=t._writableState&&t._writableState.finished,c=function(){o=!1,u=!0,s||r.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,o||r.call(t)},f=function(e){r.call(t,e)},p=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new i),r.call(t,e)):o&&!u?(t._writableState&&t._writableState.ended||(e=new i),r.call(t,e)):void 0},m=function(){t.req.on("finish",c)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",c),t.on("abort",p),t.req?m():t.on("request",m)):o&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",h),t.on("finish",c),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",c),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",c),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",c),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}},function(e,t,n){(function(t){var i=n(537),a=n(160);function r(e){var t,n=e.modulus.byteLength();do{t=new i(a(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function s(e,n){var a=function(e){var t=r(e);return{blinder:t.toRed(i.mont(e.modulus)).redPow(new i(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(n),s=n.modulus.byteLength(),o=new i(e).mul(a.blinder).umod(n.modulus),l=o.toRed(i.mont(n.prime1)),u=o.toRed(i.mont(n.prime2)),c=n.coefficient,d=n.prime1,h=n.prime2,f=l.redPow(n.exponent1).fromRed(),p=u.redPow(n.exponent2).fromRed(),m=f.isub(p).imul(c).umod(d).imul(h);return p.iadd(m).imul(a.unblinder).umod(n.modulus).toArrayLike(t,"be",s)}s.getr=r,e.exports=s}).call(this,n(86).Buffer)},function(e,t,n){"use strict";var i=t;i.version=n(539).version,i.utils=n(136),i.rand=n(236),i.curve=n(326),i.curves=n(240),i.ec=n(550),i.eddsa=n(554)},function(e,t,n){"use strict";var i,a=t,r=n(241),s=n(326),o=n(136).assert;function l(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function u(e,t){Object.defineProperty(a,e,{configurable:!0,enumerable:!0,get:function(){var n=new l(t);return Object.defineProperty(a,e,{configurable:!0,enumerable:!0,value:n}),n}})}a.PresetCurve=l,u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=n(549)}catch(e){i=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},function(e,t,n){var i=t;i.utils=n(143),i.common=n(178),i.sha=n(543),i.ripemd=n(547),i.hmac=n(548),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},function(e,t,n){"use strict";(function(t){var i,a=n(86),r=a.Buffer,s={};for(i in a)a.hasOwnProperty(i)&&"SlowBuffer"!==i&&"Buffer"!==i&&(s[i]=a[i]);var o=s.Buffer={};for(i in r)r.hasOwnProperty(i)&&"allocUnsafe"!==i&&"allocUnsafeSlow"!==i&&(o[i]=r[i]);if(s.Buffer.prototype=r.prototype,o.from&&o.from!==Uint8Array.from||(o.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return r(e,t,n)}),o.alloc||(o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var i=r(e);return t&&0!==t.length?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i}),!s.kStringMaxLength)try{s.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s}).call(this,n(87))},function(e,t,n){"use strict";const i=n(244).Reporter,a=n(179).EncoderBuffer,r=n(179).DecoderBuffer,s=n(135),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],l=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function u(e,t,n){const i={};this._baseState=i,i.name=n,i.enc=e,i.parent=t||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}e.exports=u;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];u.prototype.clone=function(){const e=this._baseState,t={};c.forEach((function(n){t[n]=e[n]}));const n=new this.constructor(t.parent);return n._baseState=t,n},u.prototype._wrap=function(){const e=this._baseState;l.forEach((function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},u.prototype._init=function(e){const t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),s.equal(t.children.length,1,"Root node can have only one child")},u.prototype._useArgs=function(e){const t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);const i=e[n];t[i]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){u.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),o.forEach((function(e){u.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}})),u.prototype.use=function(e){s(e);const t=this._baseState;return s(null===t.use),t.use=e,this},u.prototype.optional=function(){return this._baseState.optional=!0,this},u.prototype.def=function(e){const t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},u.prototype.explicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},u.prototype.implicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},u.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},u.prototype.key=function(e){const t=this._baseState;return s(null===t.key),t.key=e,this},u.prototype.any=function(){return this._baseState.any=!0,this},u.prototype.choice=function(e){const t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},u.prototype.contains=function(e){const t=this._baseState;return s(null===t.use),t.contains=e,this},u.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let i,a=n.default,s=!0,o=null;if(null!==n.key&&(o=e.enterKey(n.key)),n.optional){let i=null;if(null!==n.explicit?i=n.explicit:null!==n.implicit?i=n.implicit:null!==n.tag&&(i=n.tag),null!==i||n.any){if(s=this._peekTag(e,i,n.any),e.isError(s))return s}else{const i=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(i)}}if(n.obj&&s&&(i=e.enterObject()),s){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const i=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const i=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(i))return i;n.any?a=e.raw(t):e=i}if(t&&t.track&&null!==n.tag&&t.track(e.path(),i,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(a=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(a))return a;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const i=new r(a);a=this._getUse(n.contains,e._reporterState.obj)._decode(i,t)}}return n.obj&&s&&(a=e.leaveObject(i)),null===n.key||null===a&&!0!==s?null!==o&&e.exitKey(o):e.leaveKey(o,n.key,a),a},u.prototype._decodeGeneric=function(e,t,n){const i=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,i.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&i.args?this._decodeObjid(t,i.args[0],i.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,i.args&&i.args[0],n):null!==i.use?this._getUse(i.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},u.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},u.prototype._decodeChoice=function(e,t){const n=this._baseState;let i=null,a=!1;return Object.keys(n.choice).some((function(r){const s=e.save(),o=n.choice[r];try{const n=o._decode(e,t);if(e.isError(n))return!1;i={type:r,value:n},a=!0}catch(t){return e.restore(s),!1}return!0}),this),a?i:e.error("Choice not matched")},u.prototype._createEncoderBuffer=function(e){return new a(e,this.reporter)},u.prototype._encode=function(e,t,n){const i=this._baseState;if(null!==i.default&&i.default===e)return;const a=this._encodeValue(e,t,n);return void 0===a||this._skipDefault(a,t,n)?void 0:a},u.prototype._encodeValue=function(e,t,n){const a=this._baseState;if(null===a.parent)return a.children[0]._encode(e,t||new i);let r=null;if(this.reporter=t,a.optional&&void 0===e){if(null===a.default)return;e=a.default}let s=null,o=!1;if(a.any)r=this._createEncoderBuffer(e);else if(a.choice)r=this._encodeChoice(e,t);else if(a.contains)s=this._getUse(a.contains,n)._encode(e,t),o=!0;else if(a.children)s=a.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const i=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const a=n._encode(e[n._baseState.key],t,e);return t.leaveKey(i),a}),this).filter((function(e){return e})),s=this._createEncoderBuffer(s);else if("seqof"===a.tag||"setof"===a.tag){if(!a.args||1!==a.args.length)return t.error("Too many args for : "+a.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(e.map((function(n){const i=this._baseState;return this._getUse(i.args[0],e)._encode(n,t)}),n))}else null!==a.use?r=this._getUse(a.use,n)._encode(e,t):(s=this._encodePrimitive(a.tag,e),o=!0);if(!a.any&&null===a.choice){const e=null!==a.implicit?a.implicit:a.tag,n=null===a.implicit?"universal":"context";null===e?null===a.use&&t.error("Tag could be omitted only for .use()"):null===a.use&&(r=this._encodeComposite(e,o,n,s))}return null!==a.explicit&&(r=this._encodeComposite(a.explicit,!1,"context",r)),r},u.prototype._encodeChoice=function(e,t){const n=this._baseState,i=n.choice[e.type];return i||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),i._encode(e.value,t)},u.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},u.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},u.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},function(e,t,n){"use strict";const i=n(118);function a(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function r(e,t){this.path=e,this.rethrow(t)}t.Reporter=a,a.prototype.isError=function(e){return e instanceof r},a.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},a.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},a.prototype.enterKey=function(e){return this._reporterState.path.push(e)},a.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},a.prototype.leaveKey=function(e,t,n){const i=this._reporterState;this.exitKey(e),null!==i.obj&&(i.obj[t]=n)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},a.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},a.prototype.error=function(e){let t;const n=this._reporterState,i=e instanceof r;if(t=i?e:new r(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return i||n.errors.push(t),t},a.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},i(r,Error),r.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,n){"use strict";function i(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const i=e[n];t[i]=n})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=i(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=i(t.tag)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13),a=n(0);function r(e){let t=!1;const{inputs:n}=Object(i.cloneDeep)(e);if(!n||!n.length)return{policy:e,forceCreateNeeded:!1};const r=n.map((n=>{const{streams:i}=n;if(!i)return n;const r=i.map((n=>{var i,r,s,o;if(!n.vars||!n.vars[a.u]||null===(i=n.vars[a.u].value)||void 0===i||!i.package)return n;const l=n.vars[a.u];return t=(null===(r=l.value)||void 0===r?void 0:r.package)!==(null==e||null===(s=e.package)||void 0===s?void 0:s.name),n.vars[a.u]={...l,value:null===(o=l.value)||void 0===o?void 0:o.dataset},n}));return{...n,streams:r}}));return{policy:{...e,inputs:r},forceCreateNeeded:t}}},function(e,t,n){"use strict";var i=n(42);n.d(t,"a",(function(){return i.d}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return E}));var i=n(1),a=n(4),r=n(138),s=n(13),o=n(17),l=n(59),u=n(19),c=n(5),d=n(116),h=n(157),f=n(149),p=n(384),m=n(246),g=n(156),b=n(180);const y=async({selectedPolicyTab:e,withSysMonitoring:t,newAgentPolicy:n,packagePolicy:i,packageInfo:a})=>{if(e===f.b.NEW){var r,s;if(null!==(r=t||(null===(s=n.monitoring_enabled)||void 0===s?void 0:s.length))&&void 0!==r&&r){var l,c;const e=[];a&&"input"!==a.type&&e.push({name:a.name,version:a.version}),t&&e.push(u.FLEET_SYSTEM_PACKAGE),null!==(l=null===(c=n.monitoring_enabled)||void 0===c?void 0:c.length)&&void 0!==l&&l&&e.push(u.FLEET_ELASTIC_AGENT_PACKAGE),e.length>0&&await Object(o.i)([...new Set(e)])}return await async function({packagePolicy:e,newAgentPolicy:t,withSysMonitoring:n}){var i;const a=(null==e||null===(i=e.package)||void 0===i?void 0:i.name)===u.FLEET_SYSTEM_PACKAGE,r=await Object(o.k)(t,{withSysMonitoring:n&&!a});if(r.error)throw r.error;if(!r.data)throw new Error("Invalid agent policy creation no data");return r.data.item}({newAgentPolicy:n,packagePolicy:i,withSysMonitoring:t})}},v={name:"",description:"",namespace:"",policy_id:"",policy_ids:[""],enabled:!0,inputs:[]};function E({agentCount:e,selectedPolicyTab:t,newAgentPolicy:n,withSysMonitoring:E,queryParamsPolicyId:w,packageInfo:x,integrationToEnable:S,hasFleetAddAgentsPrivileges:k}){const{notifications:M}=Object(o.sc)(),_=Object(d.o)(),[A,C]=Object(i.useState)(),[F,D]=Object(i.useState)("VALID"),[T,I]=Object(i.useState)(!1),P=Object(i.useRef)(!1),[O,j]=Object(i.useState)([]),[B,L]=Object(i.useState)({...v}),[N,R]=Object(i.useState)(),[z,U]=Object(i.useState)(!1),Z=!!N&&Object(h.f)(N),{isAgentlessIntegration:K,isAgentlessAgentPolicy:q,isAgentlessPackagePolicy:H}=Object(b.a)(),W=Object(i.useCallback)((e=>{Object(s.isEqual)(e,O)||(e.length>0?(j(e),x&&U(!1)):(U(!0),j([])),console.debug("Agent policy updated",e))}),[x,O]),V=Object(i.useCallback)((e=>{if(x){const t=Object(h.d)(e||B,x,r.safeLoad);return R(t),console.debug("Package policy validation results",t),t}}),[B,x]),G=Object(i.useCallback)((e=>{const n={...B,...e};L(n),console.debug("Package policy updated",n);const i=V(n),a=n.package,r=!!i&&Object(h.f)(i),s=n.policy_ids.length>0&&""!==n.policy_ids[0];!a||!s&&t!==f.b.NEW||r?D("INVALID"):D("VALID")}),[B,D,V,t]);Object(i.useEffect)((()=>{!async function(){if(P.current||!x)return;const{data:e}=await Object(o.L)({perPage:u.SO_SEARCH_LIMIT,page:1,kuery:`${u.PACKAGE_POLICY_SAVED_OBJECT_TYPE}.package.name:${x.name}`}),t=Object(c.E)(x.name,null==e?void 0:e.items);P.current=!0,G(Object(l.o)(x,O.map((e=>e.id)),"",v.name||t,v.description,S)),I(!0)}()}),[x,O,G,S,T]),Object(i.useEffect)((()=>{O.length>0&&!Object(s.isEqual)(O.map((e=>e.id)),B.policy_ids)&&G({policy_ids:O.map((e=>e.id))})}),[B,O,G]);const $=Object(p.b)({packagePolicy:B,queryParamsPolicyId:w}),X=Object(i.useCallback)((async({force:i,overrideCreatedAgentPolicy:r}={})=>{var s,u;if("VALID"===F&&Z)return void D("INVALID");if(0!==e&&!K(x)&&!H(B)&&"CONFIRM"!==F)return void D("CONFIRM");let c=r;if(!r)try{D("LOADING");const e=await y({newAgentPolicy:n,packagePolicy:B,withSysMonitoring:E,packageInfo:x,selectedPolicyTab:t});e&&(c=e,j([c]),G({policy_ids:[c.id]}))}catch(e){return D("VALID"),void M.toasts.addError(e,{title:a.i18n.translate("xpack.fleet.createAgentPolicy.errorNotificationTitle",{defaultMessage:"Unable to create agent policy"})})}const d=null!==(s=c)&&void 0!==s&&s.id?[null===(u=c)||void 0===u?void 0:u.id]:B.policy_ids,h=q(c)||K(x)||H(B),f=i||h;D("LOADING");const{error:p,data:b}=await async function(e){const{policy:t,forceCreateNeeded:n}=await Object(m.a)(e);return await Object(o.m)({...t,...n&&{force:!0}})}({...B,policy_ids:d,force:f}),v=!(null==b||!b.item)&&Object(g.c)(b.item).templateUrl,w=!(null==b||!b.item)&&Object(g.d)(b.item).templateUrl,S=!(null==b||!b.item)&&Object(g.f)(b.item);if(k?(D(v?e?"SUBMITTED":"SUBMITTED_AZURE_ARM_TEMPLATE":e?"SUBMITTED":"SUBMITTED_NO_AGENTS"),D(w?e?"SUBMITTED":"SUBMITTED_CLOUD_FORMATION":e?"SUBMITTED":"SUBMITTED_NO_AGENTS"),D(S?e?"SUBMITTED":"SUBMITTED_GOOGLE_CLOUD_SHELL":e?"SUBMITTED":"SUBMITTED_NO_AGENTS")):D("SUBMITTED"),p){if(Object(l.m)(p))return D("VALID"),void(await _(B.package)&&X({overrideCreatedAgentPolicy:c,force:!0}));M.toasts.addError(p,{title:"Error"}),D("VALID")}else{C(b.item);const t=!(e&&O.length>0)&&k;if(t&&v)return void D("SUBMITTED_AZURE_ARM_TEMPLATE");if(t&&w)return void D("SUBMITTED_CLOUD_FORMATION");if(t&&S)return void D("SUBMITTED_GOOGLE_CLOUD_SHELL");if(t)return void D("SUBMITTED_NO_AGENTS");$(b.item),M.toasts.addSuccess({title:a.i18n.translate("xpack.fleet.createPackagePolicy.addedNotificationTitle",{defaultMessage:"''{packagePolicyName}'' integration added.",values:{packagePolicyName:B.name}}),text:t?a.i18n.translate("xpack.fleet.createPackagePolicy.addedNotificationMessage",{defaultMessage:"Fleet will deploy updates to all agents that use the ''{agentPolicyNames}'' policies.",values:{agentPolicyNames:O.map((e=>e.name)).join(", ")}}):void 0,"data-test-subj":"packagePolicyCreateSuccessToast"})}}),[F,Z,e,K,x,t,B,q,H,k,E,n,G,M.toasts,O,$,_]);return{agentPolicies:O,updateAgentPolicies:W,packagePolicy:B,updatePackagePolicy:G,savedPackagePolicy:A,onSubmit:X,formState:F,setFormState:D,hasErrors:Z,validationResults:N,setValidationResults:R,hasAgentPolicyError:z,setHasAgentPolicyError:U,isInitialized:T,navigateAddAgent:e=>$(e,["openEnrollmentFlyout"]),navigateAddAgentHelp:e=>$(e,["showAddAgentHelp"])}}},,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return g}));var i=n(1),a=n.n(i),r=n(12),s=n(6),o=n(17);const l=({deploymentUrl:e})=>{const{docLinks:t}=Object(o.sc)();return a.a.createElement(s.EuiCallOut,{iconType:"warning",color:"warning",title:a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudUnhealthyCallout.calloutTitle",defaultMessage:"Fleet Server is not Healthy"})},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.calloutDescription",defaultMessage:"A healthy Fleet server is required to enroll agents with Fleet. Enable Fleet Server in your {cloudDeploymentLink}. For more information see the {guideLink}.",values:{cloudDeploymentLink:a.a.createElement(s.EuiLink,{href:e,target:"_blank",external:!0},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.cloudDeploymentLink",defaultMessage:"cloud deployment"})),guideLink:a.a.createElement(s.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),a.a.createElement(s.EuiSpacer,{size:"m"}),a.a.createElement(s.EuiButton,{href:e,target:"_blank",color:"warning",fill:!0},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerCloudRequiredCallout.editDeploymentButtonLabel",defaultMessage:"Edit deployment"})))},u=({onClickAddFleetServer:e})=>{const{docLinks:t}=Object(o.sc)();return a.a.createElement(s.EuiCallOut,{iconType:"warning",color:"warning",title:a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.calloutTitle",defaultMessage:"Fleet Server is not Healthy"})},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.calloutDescription",defaultMessage:"A healthy Fleet server is required before you can enroll agents with Fleet.  For more information see the {guideLink}.",values:{guideLink:a.a.createElement(s.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),a.a.createElement(s.EuiSpacer,{size:"m"}),a.a.createElement(s.EuiButton,{onClick:e,color:"warning",fill:!0,"data-test-subj":"addFleetServerBtn"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerOnPremUnhealthyCallout.addFleetServerButtonLabel",defaultMessage:"Add Fleet Server"})))};var c=n(58),d=n.n(c);const h=d()(s.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-1blrkg5-0"})(["max-width:500px;margin-right:auto;margin-left:auto;"]),f=()=>a.a.createElement(h,{"data-test-subj":"fleetServerMissingPrivilegesPrompt"},a.a.createElement(s.EuiEmptyPrompt,{iconType:"securityApp",title:a.a.createElement("h2",{"data-test-subj":"fleetServerMissingPrivilegesTitle"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerSetupPermissionDeniedErrorTitle",defaultMessage:"Permission denied"})),body:a.a.createElement("p",{"data-test-subj":"fleetServerMissingPrivilegesMessage"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerSetupPermissionDeniedErrorMessage",defaultMessage:"Fleet Server needs to be set up. This requires the {roleName} cluster privilege. Contact your administrator.",values:{roleName:a.a.createElement(s.EuiCode,null,'"manage_service_account"')}}))})),p=d()(s.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-hrd6gl-0"})(["max-width:500px;margin-right:auto;margin-left:auto;"]),m=()=>a.a.createElement(p,{"data-test-subj":"fleetServerMissingPrivilegesPrompt"},a.a.createElement(s.EuiEmptyPrompt,{iconType:"securityApp",title:a.a.createElement("h2",{"data-test-subj":"fleetServerMissingPrivilegesTitle"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerSetupPermissionDeniedErrorTitle",defaultMessage:"Permission denied"})),body:a.a.createElement("p",{"data-test-subj":"fleetServerMissingPrivilegesMessage"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.fleetServerSetupKbnPermissionDeniedErrorMessage",defaultMessage:"Fleet Server needs to be set up. This requires the Kibana Fleet {agentPrivilegeName} and {settingsPrivilegeName} privileges. Contact your administrator.",values:{agentPrivilegeName:a.a.createElement(s.EuiCode,null,'"agents: all"'),settingsPrivilegeName:a.a.createElement(s.EuiCode,null,'"settings: all"')}}))})),g=({onClickHandler:e})=>{const{docLinks:t}=Object(o.sc)();return a.a.createElement(s.EuiCallOut,{"data-test-subj":"missingEncryptionKeyCallout",iconType:"iInCircle",color:"warning",title:a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.title",defaultMessage:"Set up encryption key"})},a.a.createElement("p",{"data-test-subj":"missingEncryptionKeyBody"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.message",defaultMessage:"An encryption key will make your environment more secure. Click {link} to learn how to set up an encryption key.",values:{link:a.a.createElement(s.EuiLink,{href:t.links.kibana.secureSavedObject,target:"_blank"},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.helpLink",defaultMessage:"here"}))}})),a.a.createElement(s.EuiButtonEmpty,{flush:"left",size:"s",color:"warning",onClick:e},a.a.createElement(r.FormattedMessage,{id:"xpack.fleet.missingEncryptionKeyCallout.dismiss",defaultMessage:"Dismiss"})))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return x}));var i=n(1),a=n.n(i),r=n(4),s=n(12),o=n(6),l=n(58),u=n.n(l),c=n(132),d=n(17);const h=({isMissing:e,children:t})=>a.a.createElement(o.EuiFlexGroup,{gutterSize:"s",alignItems:"flexStart"},a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiText,null,e?a.a.createElement(o.EuiIcon,{type:"error",color:"danger"}):a.a.createElement(o.EuiIcon,{type:"checkInCircleFilled",color:"success"}))),a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiText,null,t))),f=u()(o.EuiPageBody).withConfig({displayName:"StyledPageBody",componentId:"sc-h0h01m-0"})(["border:1px solid ",";border-radius:5px;"],"#d3dae6"),p=({missingRequirements:e})=>{const{docLinks:t}=Object(d.sc)();return a.a.createElement(c.e,null,a.a.createElement(f,{restrictWidth:820},a.a.createElement(o.EuiPageSection,{color:"transparent"},a.a.createElement(o.EuiCallOut,{title:r.i18n.translate("xpack.fleet.setupPage.missingRequirementsCalloutTitle",{defaultMessage:"Missing security requirements"}),color:"warning",iconType:"warning"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.missingRequirementsCalloutDescription",defaultMessage:"To use central management for Elastic Agents, enable the following Elasticsearch security features."})),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.missingRequirementsElasticsearchTitle",defaultMessage:"In your Elasticsearch configuration ({esConfigFile}), enable:",values:{esConfigFile:a.a.createElement(o.EuiCode,null,"elasticsearch.yml")}}),a.a.createElement(o.EuiSpacer,{size:"l"}),a.a.createElement(h,{isMissing:e.includes("security_required")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchSecurityFlagText",defaultMessage:"{esSecurityLink}. Set {securityFlag} to {true} .",values:{esSecurityLink:a.a.createElement(o.EuiLink,{href:t.links.security.elasticsearchEnableSecurity,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchSecurityLink",defaultMessage:"Elasticsearch security"})),securityFlag:a.a.createElement(o.EuiCode,null,"xpack.security.enabled"),true:a.a.createElement(o.EuiCode,null,"true")}})),a.a.createElement(o.EuiSpacer,{size:"s"}),a.a.createElement(h,{isMissing:e.includes("api_keys")},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.elasticsearchApiKeyFlagText",defaultMessage:"{apiKeyLink}. Set {apiKeyFlag} to {true} .",values:{apiKeyFlag:a.a.createElement(o.EuiCode,null,"xpack.security.authc.api_key.enabled"),true:a.a.createElement(o.EuiCode,null,"true"),apiKeyLink:a.a.createElement(o.EuiLink,{href:t.links.security.apiKeyServiceSettings,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.apiKeyServiceLink",defaultMessage:"API key service"}))}})),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiCodeBlock,{isCopyable:!0},"xpack.security.enabled: true\nxpack.security.authc.api_key.enabled: true"),a.a.createElement(o.EuiSpacer,{size:"l"}),a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.gettingStartedText",defaultMessage:"For more information, read our {link} guide.",values:{link:a.a.createElement(o.EuiLink,{href:t.links.fleet.guide,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.setupPage.gettingStartedLink",defaultMessage:"Getting Started"}))}}))))};var m=n(262),g=n(141),b=n(117);const y=({deploymentUrl:e})=>{const{docLinks:t}=Object(d.sc)(),{refetch:n}=Object(d.Kb)();return Object(i.useEffect)((()=>{const e=setInterval((()=>{n()}),1e4);return()=>clearInterval(e)}),[n]),a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiEmptyPrompt,{title:a.a.createElement("h2",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudSetupTitle",defaultMessage:"Enable Fleet Server"})),body:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudSetupText",defaultMessage:"A Fleet Server is required before you can enroll agents with Fleet. The easiest way to get one is by adding an Integration Server, which runs the Fleet Server integration. You can add it to your deployment in the Cloud Console. For more information see the {link}",values:{link:a.a.createElement(o.EuiLink,{href:t.links.fleet.fleetServerAddFleetServer,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.userGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}),actions:a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiButton,{iconSide:"right",iconType:"popout",fill:!0,isLoading:!1,type:"submit",href:`${e}/edit`,target:"_blank"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.cloudDeploymentLink",defaultMessage:"Edit deployment"})))}),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiFlexItem,null,a.a.createElement(o.EuiFlexGroup,{justifyContent:"center",gutterSize:"s"},a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiLoadingSpinner,{size:"m"})),a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiText,{size:"s",color:"subdued"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.waitingText",defaultMessage:"Waiting for a Fleet Server to connect..."}))))))},v=({showStandaloneTab:e})=>{const t=Object(d.Lb)(),{docLinks:n}=Object(d.sc)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiText,null,a.a.createElement("strong",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.fleetRecommendedTitle",defaultMessage:"Enrolling your agents in Fleet is recommended."})),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.centrallyManageListItem",defaultMessage:"Fleet provides an easy way to centrally manage your agents."})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.addIntegrationsListItem",defaultMessage:"Allows you to remotely add integrations, track their health, upgrade agents, and execute actions."})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.requiredForSomeIntegrationsListItem",defaultMessage:"Required for some integrations like Endpoint Security and OSQuery Manager."})),a.a.createElement("li",null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.learnMoreListItem",defaultMessage:"To learn more, see the {userGuideLink}.",values:{userGuideLink:a.a.createElement(o.EuiLink,{href:n.links.fleet.guide,target:"_blank",external:!0},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.fleetUserGuideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}})))),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiFlexGroup,null,a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiButton,{onClick:null==t?void 0:t.openFleetServerFlyout},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.addFleetServerButton",defaultMessage:"Add Fleet Server"}))),a.a.createElement(o.EuiFlexItem,{grow:!1},a.a.createElement(o.EuiButtonEmpty,{onClick:e},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollment.runStandaloneButton",defaultMessage:"Run standalone"})))))},E=u()(o.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-1ivqx24-0"})(["min-width:0px;max-width:100%;"]),w=u()(o.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1ivqx24-1"})(["height:100%;margin:0 auto;"]),x=({showStandaloneTab:e=(()=>{}),showEnrollmentRecommendation:t=!0})=>{var n;const i=null===(n=Object(d.sc)().cloud)||void 0===n?void 0:n.deploymentUrl,r=Object(d.yb)(),{permissionsError:s,isPermissionsLoading:o}=Object(d.Ab)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{gutterSize:"none",justifyContent:"center",direction:"column"},a.a.createElement(E,{grow:!1},i?a.a.createElement(y,{deploymentUrl:i}):r.fleet.addFleetServers?o?a.a.createElement(g.k,null):s?a.a.createElement(m.b,null):t?a.a.createElement(v,{showStandaloneTab:e}):a.a.createElement(b.b,null):a.a.createElement(m.d,null))))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return k}));var i=n(1),a=n.n(i),r=n(22),s=n(4),o=n(17);function l(e){const t=Object(r.useHistory)(),{overlays:n,application:a,http:l}=Object(o.sc)();Object(i.useEffect)((()=>{if(!e)return;const i=t.block((e=>(async function(){if(await n.openConfirm(s.i18n.translate("xpack.fleet.editPackagePolicy.historyBlockDescription",{defaultMessage:"Unsaved changes will be discarded. Are you sure you would like to continue?"}),{title:s.i18n.translate("xpack.fleet.editPackagePolicy.historyBlockTitle",{defaultMessage:"Discard Changes?"})})){const t=l.basePath.prepend(e.pathname)+e.hash+e.search;i(),a.navigateToUrl(t,{state:e.state})}}(),!1)));return i}),[t,e,n,a,l.basePath])}var u=n(138),c=n(573),d=n.n(c),h=n(13),f=n(157),p=n(379),m=n(246);function g(e,t={}){return e?Object.entries(e).reduce(((e,[n,i])=>{var a,r;return e[n]={...i,value:null!==(a=null==t||null===(r=t[n])||void 0===r?void 0:r.value)&&void 0!==a?a:i.value},e}),{}):{}}function b(e,t){var n;const[a,r]=Object(i.useState)(),[s,l]=Object(i.useState)({name:"",description:"",namespace:"",policy_id:"",policy_ids:[""],enabled:!0,inputs:[],version:""}),[c,b]=Object(i.useState)(),[y,v]=Object(i.useState)([]),[E,w]=Object(i.useState)(!0),[x,S]=Object(i.useState)(),[k,M]=Object(i.useState)(),[_,A]=Object(i.useState)(null!==(n=t.forceUpgrade)&&void 0!==n&&n),[C,F]=Object(i.useState)(!1),[D,T]=Object(i.useState)("INVALID"),[I,P]=Object(i.useState)(),O=!!I&&Object(f.f)(I),j=Object(i.useCallback)((e=>{if(a){const t=Object(f.d)(e||s,a,u.safeLoad);return P(t),console.debug("Package policy validation results",t),t}}),[s,a]),B=Object(i.useCallback)((e=>{d()(JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(Object(h.pick)(s,Object.keys(e)))))||F(!0);const t={...s,...e};l(t),console.debug("Package policy updated",t);const n=j(t),i=!!n&&Object(f.f)(n);T(i?"INVALID":"VALID")}),[s,j]);return Object(i.useEffect)((()=>{(async()=>{w(!0),M(void 0);try{var n,i,a;const y=await async function(){const{data:e}=await Object(o.O)();return Boolean(null==e?void 0:e.item.prerelease_integrations_enabled)}(),{data:E,error:w}=await Object(o.H)(e);if(w)throw w;const{data:x,error:k}=await Object(o.h)(E.item.policy_ids);if(k)throw k;v(null!==(n=null==x?void 0:x.items)&&void 0!==n?n:[]);const{data:M,error:_}=await Object(o.vb)([e]);if(_)throw _;const C=!!M&&Object(p.c)(M),F=t.forceUpgrade&&C;C||A(!1),M&&C&&S(M);const D=null==E?void 0:E.item;let I=null==D?void 0:D.inputs,O=null==D?void 0:D.package,j=null==D?void 0:D.vars;const B=null==M||null===(i=M[0])||void 0===i||null===(a=i.diff)||void 0===a?void 0:a[1];if(F){if(!B)throw new Error("There was an error when trying to load upgrade diff for that package policy");I=B.inputs,O=B.package,j=B.vars}if(D){b(D);const{id:e,revision:t,inputs:n,vars:i,created_by:a,created_at:v,updated_by:E,updated_at:w,secret_references:x,...S}=D,k={...S,vars:g(j,i),inputs:I.map((e=>{var t;const{streams:n,compiled_input:i,vars:a,...r}=e,s=F&&(null===(t=D.inputs.find((t=>t.type===e.type&&t.policy_template===e.policy_template)))||void 0===t?void 0:t.vars);let o=a;return s&&a&&(o=g(a,s)),"apm"===O.name&&(o=Object(p.a)(o)),{...r,streams:n.map((e=>{const{compiled_stream:t,...n}=e;return n})),vars:o}})),package:O};if(l(k),D.package){var s,c,d;let e=D.package;var h,m;F&&null!=M&&null!==(s=M[0])&&void 0!==s&&null!==(c=s.diff)&&void 0!==c&&null!==(d=c[1])&&void 0!==d&&d.package&&(e=null===(h=M[0].diff)||void 0===h||null===(m=h[1])||void 0===m?void 0:m.package);const{data:t}=await Object(o.K)(e.name,e.version,{prerelease:y,full:!0});if(null!=t&&t.item){r(t.item);const e=Object(f.d)(k,t.item,u.safeLoad);P(e),Object(f.f)(e)?T("INVALID"):T("VALID")}}}}catch(e){M(e)}w(!1)})()}),[e,t.forceUpgrade]),{formState:D,validationResults:I,hasErrors:O,upgradeDryRunData:x,setFormState:T,updatePackagePolicy:B,isEdited:C,setIsEdited:F,packageInfo:a,isUpgrade:_,savePackagePolicy:async t=>{T("LOADING");const{policy:{elasticsearch:n,...i}}=await Object(m.a)({...s,...null!=t?t:{}}),a=await Object(o.ub)(e,i);return T("SUBMITTED"),a},isLoadingData:E,agentPolicies:y,loadingError:k,packagePolicy:s,originalPackagePolicy:c}}var y=n(5),v=n(149),E=n(247),w=n(383),x=n(144),S=n(248);function k({configureStep:e,packageInfo:t,existingAgentPolicies:n,setHasAgentPolicyError:r,updatePackagePolicy:o,agentPolicies:l,setAgentPolicies:u,isLoadingData:c,packagePolicy:d,packagePolicyId:f,setNewAgentPolicyName:p}){const[m,g]=Object(i.useState)(Object(y.w)({name:"Agent policy 1"})),[b,k]=Object(i.useState)(!0),[M,_]=Object(i.useState)(v.b.EXISTING),A=Object(x.h)(m),C=Object(i.useCallback)(((e,t)=>{e===v.b.NEW&&(t.name&&""!==t.name.trim()&&t.namespace&&""!==t.namespace.trim()?r(!1):r(!0))}),[r]),F=Object(i.useCallback)((e=>{_(e),C(e,m)}),[_,C,m]),D=Object(i.useCallback)((e=>{!c&&Object(h.isEqual)(e,l)||(e.length>0?(u(e),o({policy_ids:e.map((e=>e.id))}),t&&r(!1)):(r(!0),u([]),o({policy_ids:[]})),console.debug("Agent policy updated",e))}),[t,l,c,o,r,u]),T=Object(i.useCallback)((e=>{const t={...m,...e};g(t),C(M,t)}),[g,C,m,M]),{selectedSetupTechnology:I}=Object(w.c)({newAgentPolicy:m,updateNewAgentPolicy:T,updateAgentPolicies:D,setSelectedPolicyTab:_,packageInfo:t}),P=Object(i.useMemo)((()=>a.a.createElement(v.e,{agentPolicies:l,updateAgentPolicies:D,newAgentPolicy:m,updateNewAgentPolicy:T,withSysMonitoring:b,updateSysMonitoring:e=>k(e),validation:A,packageInfo:t,setHasAgentPolicyError:r,updateSelectedTab:F,selectedAgentPolicyIds:n.map((e=>e.id)),initialSelectedTabIndex:1})),[t,l,D,m,T,A,b,F,r,n,k]),O=[{title:s.i18n.translate("xpack.fleet.createPackagePolicy.stepConfigurePackagePolicyTitle",{defaultMessage:"Configure integration"}),"data-test-subj":"dataCollectionSetupStep",children:e,headingElement:"h2"}];I!==E.a.AGENTLESS&&O.push({title:s.i18n.translate("xpack.fleet.createPackagePolicy.stepSelectAgentPolicyTitle",{defaultMessage:"Where to add this integration?"}),children:P,headingElement:"h2"});const j=Object(w.a)({newAgentPolicy:m,packagePolicy:d,selectedPolicyTab:M,withSysMonitoring:b,packageInfo:t,packagePolicyId:f});return Object(i.useEffect)((()=>{p(M===v.b.NEW?m.name:void 0)}),[m,M,p]),{steps:O,devToolsProps:j,createAgentPolicyIfNeeded:async()=>{const e=await Object(S.a)({newAgentPolicy:m,packagePolicy:d,withSysMonitoring:b,packageInfo:t,selectedPolicyTab:M});return null==e?void 0:e.id}}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var i=n(58),a=n.n(i),r=n(1),s=n.n(r),o=n(6),l=n(4),u=n(12),c=n(38),d=n(15),h=n(19),f=n(3),p=n(0),m=n(2);const g=({enrollmentAPIKey:e,onCopy:t,onDownload:n,fleetServerHost:i})=>{const a=Object(d.Xc)(),{notifications:c,docLinks:g}=a,[b,y]=Object(r.useState)(""),[v,E]=Object(r.useState)(!1),[w,x]=Object(r.useState)(!1);Object(r.useEffect)((()=>{!async function(){try{const t={enrolToken:e,...i&&{fleetServer:i}},n=await((e={})=>Object(m.a)({path:f.c.getK8sInfoPath(),method:"get",version:p.o.public.v1,query:e}))(t);if(n.error)throw n.error;if(!n.data)throw new Error("No data while fetching agent manifest");y(n.data.item)}catch(e){c.toasts.addError(e,{title:l.i18n.translate("xpack.fleet.agentEnrollment.loadk8sManifestErrorTitle",{defaultMessage:"Error while fetching agent manifest"})})}}()}),[c.toasts,e,i]);const S=s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadDescriptionForK8s",defaultMessage:"Copy or download the Kubernetes manifest. Note that the following manifest contains resource limits that may not be appropriate for a production environment, review our guide on {scalingGuideLink} before deploying this manifest.",values:{scalingGuideLink:s.a.createElement(o.EuiLink,{external:!0,href:g.links.fleet.scalingKubernetesResourcesAndLimits,target:"_blank"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleet.agentEnrollment.k8ScalingGuideLinkText",defaultMessage:"Scaling Elastic Agent on Kubernetes"}))}}),k=s.a.createElement(o.EuiCopy,{textToCopy:b},(e=>s.a.createElement(o.EuiButton,{onClick:()=>(e=>{e(),E(!0),t&&t()})(e),iconType:"copyClipboard"},v?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyPolicyButtonClicked",defaultMessage:"Copied"}):s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyPolicyButton",defaultMessage:"Copy to clipboard"})))),M=a.http.basePath.prepend(((e,t)=>{const n=new URLSearchParams({apiVersion:h.API_VERSIONS.public.v1,...e&&{fleetServer:e},...t&&{enrolToken:t}});return`${h.agentPolicyRouteService.getK8sFullDownloadPath()}?${n.toString()}`})(i,e)),_=s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiButton,{target:"_blank",iconSide:"right",iconType:"popout",onClick:()=>(e=>{x(!0),n&&n(),window.location.href=e})(M)},w?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.agentEnrollment.downloadManifestButtonk8sClicked",defaultMessage:"Downloaded"}):s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.downloadManifestButtonk8s",defaultMessage:"Download manifest"}))),A=s.a.createElement(o.EuiCodeBlock,{language:"yaml",style:{maxHeight:300},fontSize:"m"},b);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,S),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(s.a.Fragment,null,A),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiFlexGroup,{gutterSize:"m"},s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(s.a.Fragment,null,k)),s.a.createElement(o.EuiFlexItem,{grow:!1},s.a.createElement(s.a.Fragment,null,_))))},b=({linuxCommand:e,macCommand:t,windowsCommand:n,linuxDebCommand:i,linuxRpmCommand:a,k8sCommand:h,hasK8sIntegration:f,cloudSecurityIntegration:p,hasK8sIntegrationMultiPage:m,isManaged:b,enrollToken:v,hasFleetServer:E,fleetServerHost:w,fullCopyButton:x,onCopy:S})=>{const k=Object(r.useCallback)((()=>f||(null==p?void 0:p.integrationType)===c.g&&b?"kubernetes":"linux"),[f,null==p?void 0:p.integrationType,b]),{platform:M,setPlatform:_}=Object(d.Rc)(k()),A=E||!b&&!f,C=Object(r.useCallback)((()=>A?d.g:d.f),[A]),[F,D]=Object(r.useState)(!1),T=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.callout",{defaultMessage:"We recommend using the installers (TAR/ZIP) over system packages (RPM/DEB) because they provide the ability to upgrade your agent with Fleet."}),color:"warning",iconType:"warning"}),I=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.k8sCallout",{defaultMessage:"We recommend adding the Kubernetes integration to your agent policy in order to get useful metrics and logs from your Kubernetes clusters."}),color:"warning",iconType:"warning"}),P=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.placeHolderCallout",{defaultMessage:"We strongly advise against deploying CSPM within a Kubernetes cluster. Doing so may lead to redundant data fetching, which can cause increased consumption costs within your Elastic account and potentially trigger API rate limiting in your cloud account(s)."}),color:"warning",iconType:"warning"}),O=s.a.createElement(o.EuiCallOut,{title:l.i18n.translate("xpack.fleet.enrollmentInstructions.macCallout",{defaultMessage:"We recommend against deploying this integration within Mac as it is currently not being supported."}),color:"warning",iconType:"warning"}),j={linux:e,mac:t,windows:n,deb:i,rpm:a,kubernetes:h};return s.a.createElement(s.a.Fragment,null,s.a.createElement(s.a.Fragment,null,!m&&s.a.createElement(o.EuiButtonGroup,{options:C(),idSelected:M,onChange:e=>_(e),legend:l.i18n.translate("xpack.fleet.enrollmentInstructions.platformSelectAriaLabel",{defaultMessage:"Platform"})}),s.a.createElement(o.EuiSpacer,{size:"s"}),("deb"===M||"rpm"===M)&&s.a.createElement(s.a.Fragment,null,T,s.a.createElement(o.EuiSpacer,{size:"m"})),"mac"===M&&((null==p?void 0:p.integrationType)===c.f||(null==p?void 0:p.integrationType)===c.g)&&s.a.createElement(s.a.Fragment,null,O,s.a.createElement(o.EuiSpacer,{size:"m"})),"kubernetes"===M&&(null==p?void 0:p.integrationType)===c.f&&s.a.createElement(s.a.Fragment,null,P,s.a.createElement(o.EuiSpacer,{size:"m"})),"kubernetes"===M&&!f&&s.a.createElement(s.a.Fragment,null,I,s.a.createElement(o.EuiSpacer,{size:"m"})),"kubernetes"===M&&b&&s.a.createElement(s.a.Fragment,null,s.a.createElement(g,{onCopy:S,onDownload:S,enrollmentAPIKey:v,fleetServerHost:w}),s.a.createElement(o.EuiSpacer,{size:"s"})),!m&&s.a.createElement(s.a.Fragment,null,"kubernetes"===M&&s.a.createElement(o.EuiText,null,s.a.createElement(o.EuiSpacer,{size:"s"}),s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.agentEnrollment.kubernetesCommandInstructions",defaultMessage:"From the directory where the manifest is downloaded, run the apply command."}),s.a.createElement(o.EuiSpacer,{size:"m"})),s.a.createElement(y,{onClick:()=>{S&&S()},fontSize:"m",isCopyable:!x,paddingSize:"m",whiteSpace:"pre"},j[M]),s.a.createElement(o.EuiSpacer,{size:"s"}),x&&s.a.createElement(o.EuiCopy,{textToCopy:j[M]},(e=>s.a.createElement(o.EuiButton,{color:"primary",iconType:"copyClipboard",size:"m",onClick:()=>(e=>{e(),D(!0),S&&S()})(e)},F?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyButtonClicked",defaultMessage:"Copied"}):s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.copyButton",defaultMessage:"Copy to clipboard"})))))))};var y=a()(o.EuiCodeBlock).withConfig({displayName:"_StyledEuiCodeBlock",componentId:"sc-4falen-0"})(["max-width:1100px;"])},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return h}));var i=n(13),a=n(59),r=n(0);function s(e){return e.reduce(((e,t)=>{var n;return e||(e={}),e[function(e){return`${e.policy_template?`${e.policy_template}-`:""}${e.type}`}(t)]={enabled:t.enabled,vars:o(t.vars),streams:(n=t.streams,n.reduce(((e,t)=>(e||(e={}),e[t.data_stream.dataset]={enabled:t.enabled,vars:o(t.vars)},e)),{}))},e}),{})}function o(e){if(e)return Object.entries(e).reduce(((e,[t,n])=>{var i;return t===r.u&&null!=n&&null!==(i=n.value)&&void 0!==i&&i.dataset?e[t]=null==n?void 0:n.value.dataset:e[t]=null==n?void 0:n.value,e}),{})}function l(e,t,n){return`${e} kbn:${t}\n${JSON.stringify(n,null,2)}\n`}function u(e,t){return l("POST",`${a.c.getCreatePath()}${t?"?sys_monitoring=true":""}`,e)}function c(e){return l("POST",a.n.getCreatePath(),{policy_ids:e.policy_ids.length>0?e.policy_ids:["<agent_policy_id>"],package:f(e.package),...Object(i.omit)(e,"policy_ids","package","enabled"),inputs:s(e.inputs),vars:o(e.vars)})}function d(e,t){return l("PUT",a.n.getUpdatePath(e),{package:f(t.package),...Object(i.omit)(t,"version","package","enabled","secret_references"),inputs:s(t.inputs),vars:o(t.vars)})}function h(e,t){return l("PUT",a.c.getUpdatePath(e),Object(i.omit)(t,"version"))}function f(e){return Object(i.omit)(e,"title")}n(80),n(5)},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var i=n(1),a=n.n(i);const r=a.a.createContext({refresh:()=>{}});function s(){return a.a.useContext(r).refresh}},,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(450);Object.defineProperty(t,"TfIdfSearchIndex",{enumerable:!0,get:function(){return i.TfIdfSearchIndex}});var a=n(451);Object.defineProperty(t,"UnorderedSearchIndex",{enumerable:!0,get:function(){return a.UnorderedSearchIndex}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t=t||[];for(var n=e=e||{},i=0;i<t.length;i++)if(null==(n=n[t[i]]))return null;return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(452);Object.defineProperty(t,"SimpleTokenizer",{enumerable:!0,get:function(){return i.SimpleTokenizer}});var a=n(453);Object.defineProperty(t,"StemmingTokenizer",{enumerable:!0,get:function(){return a.StemmingTokenizer}});var r=n(454);Object.defineProperty(t,"StopWordsTokenizer",{enumerable:!0,get:function(){return r.StopWordsTokenizer}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.StopWordsMap={a:!0,able:!0,about:!0,across:!0,after:!0,all:!0,almost:!0,also:!0,am:!0,among:!0,an:!0,and:!0,any:!0,are:!0,as:!0,at:!0,be:!0,because:!0,been:!0,but:!0,by:!0,can:!0,cannot:!0,could:!0,dear:!0,did:!0,do:!0,does:!0,either:!0,else:!0,ever:!0,every:!0,for:!0,from:!0,get:!0,got:!0,had:!0,has:!0,have:!0,he:!0,her:!0,hers:!0,him:!0,his:!0,how:!0,however:!0,i:!0,if:!0,in:!0,into:!0,is:!0,it:!0,its:!0,just:!0,least:!0,let:!0,like:!0,likely:!0,may:!0,me:!0,might:!0,most:!0,must:!0,my:!0,neither:!0,no:!0,nor:!0,not:!0,of:!0,off:!0,often:!0,on:!0,only:!0,or:!0,other:!0,our:!0,own:!0,rather:!0,said:!0,say:!0,says:!0,she:!0,should:!0,since:!0,so:!0,some:!0,than:!0,that:!0,the:!0,their:!0,them:!0,then:!0,there:!0,these:!0,they:!0,this:!0,tis:!0,to:!0,too:!0,twas:!0,us:!0,wants:!0,was:!0,we:!0,were:!0,what:!0,when:!0,where:!0,which:!0,while:!0,who:!0,whom:!0,why:!0,will:!0,with:!0,would:!0,yet:!0,you:!0,your:!0};i.constructor=!1,i.hasOwnProperty=!1,i.isPrototypeOf=!1,i.propertyIsEnumerable=!1,i.toLocaleString=!1,i.toString=!1,i.valueOf=!1},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return m}));var i=n(1),a=n.n(i),r=n(4),s=n(12),o=n(17),l=n(5),u=n(148);const c=/^(https):\/\/[^\s$.?#].[^\s]*$/gm,d=()=>a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.confirmModalTitle",defaultMessage:"Save and deploy changes?"}),h=({})=>a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.confirmModalText",defaultMessage:"This action will update agent policies enrolled in this Fleet Server. This action can not be undone. Are you sure you wish to continue?"});function f(e){if(0===e.length)return[{message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsEmptyError",{defaultMessage:"At least one URL is required"})}];const t=[],n={};return e.forEach(((e,i)=>{e?e.match(c)||t.push({message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsError",{defaultMessage:"Invalid URL (must be an https URL)"}),index:i}):t.push({message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsRequiredError",{defaultMessage:"Host URL is required"}),index:i});const a=n[e]||[];n[e]=[...a,i]})),Object.values(n).filter((({length:e})=>e>1)).forEach((e=>{e.forEach((e=>t.push({message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsDuplicateError",{defaultMessage:"Duplicate URL"}),index:e})))})),t.length?t:e.length&&Object(l.U)(e)?[{message:r.i18n.translate("xpack.fleet.settings.fleetServerHostsDifferentPathOrProtocolError",{defaultMessage:"Protocol and path must be the same for each URL"})}]:void 0}function p(e){if(!e||""===e)return[r.i18n.translate("xpack.fleet.settings.fleetServerHost.nameIsRequiredErrorMessage",{defaultMessage:"Name is required"})]}function m(e,t,n){var s,l,c,m;const[g,b]=Object(i.useState)(!1),{notifications:y,cloud:v}=Object(o.sc)(),E=Object(o.yb)(),{confirm:w}=Object(u.a)(),x=null!==(s=(null==e?void 0:e.is_preconfigured)||!E.fleet.allSettings)&&void 0!==s&&s,S=Object(o.dc)(null!==(l=null==e?void 0:e.name)&&void 0!==l?l:"",p,x),k=Object(o.tc)(null!==(c=null==e?void 0:e.is_default)&&void 0!==c&&c,x||(null==e?void 0:e.is_default)),M=null==v?void 0:v.isServerlessEnabled,_=!M||null!=e&&e.host_urls?(null==e?void 0:e.host_urls)||[]:(null==n?void 0:n.host_urls)||[],A=x||M,C=Object(o.Bb)("hostUrls",_,f,A),F=Object(o.dc)(null!==(m=null==e?void 0:e.proxy_id)&&void 0!==m?m:"",(()=>{}),x),D=Object(i.useMemo)((()=>({nameInput:S,isDefaultInput:k,hostUrlsInput:C,proxyIdInput:F})),[S,k,C,F]),T=Object(i.useCallback)((()=>Object(o.wc)(D)),[D]),I=Object(i.useCallback)((async()=>{try{if(!T())return;if(!await w(a.a.createElement(d,null),a.a.createElement(h,null)))return;b(!0);const n={name:S.value,host_urls:C.value,is_default:k.value,proxy_id:""!==F.value?F.value:null};if(e){const t=await Object(o.lb)(e.id,n);if(t.error)throw t.error}else{const e=await Object(o.cb)(n);if(e.error)throw e.error}y.toasts.addSuccess(r.i18n.translate("xpack.fleet.settings.fleetServerHostsFlyout.successToastTitle",{defaultMessage:"Fleet Server host saved"})),b(!1),await t()}catch(e){b(!1),y.toasts.addError(e,{title:r.i18n.translate("xpack.fleet.settings.fleetServerHostsFlyout.errorToastTitle",{defaultMessage:"An error happened while saving Fleet Server host"})})}}),[e,S.value,C.value,k.value,F.value,T,y,w,t]);return{isLoading:g,isDisabled:x||g||!C.hasChanged&&!k.hasChanged&&!S.hasChanged&&!F.hasChanged||C.props.isInvalid||S.props.isInvalid,submit:I,inputs:D}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(1),a=n(16),r=n(17);const s=e=>{const[t,n]=Object(i.useState)([]),s=Object(i.useRef)(void 0),o=Object(i.useCallback)((async()=>{var e,i,s,o;const l=await Object(r.L)({page:1,perPage:a.t,kuery:`${a.r}.package.name:${a.l}`}),u=[...new Set(null!==(e=null==l||null===(i=l.data)||void 0===i?void 0:i.items.flatMap((e=>e.policy_ids)))&&void 0!==e?e:[])];if(0===u.length)return;const c=`(${u.map((e=>`${a.b}.policy_id:"${e}"`)).join(" or ")}) and not (_exists_:"${a.b}.unenrolled_at") and ${a.b}.enrolled_at >= now-10m`,d=null!==(s=null===(o=(await Object(r.A)({kuery:c,showInactive:!1})).data)||void 0===o?void 0:o.items.map((e=>e.id)))&&void 0!==s?s:t;d.some((e=>!t.includes(e)))&&n(d)}),[t]);return Object(i.useEffect)((()=>{let e=!1;const n=()=>{s.current=window.setTimeout((async()=>{o(),e||n()}),1e4)};return n(),(e||t.length>0)&&clearTimeout(s.current),()=>{e=!0}}),[t,o]),{hasRecentlyEnrolledFleetServers:t.length>0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(1),a=n.n(i),r=n(6),s=n(377),o=n(289),l=n(375);const u=({selectedPolicyId:e,onClose:t})=>{var n;const{isSelectFleetServerPolicyLoading:i,eligibleFleetServerPolicies:u,refreshEligibleFleetServerPolicies:c,fleetServerPolicyId:d,setFleetServerPolicyId:h,isFleetServerReady:f,serviceToken:p,isLoadingServiceToken:m,generateServiceToken:g,fleetServerHostForm:b,deploymentMode:y,setDeploymentMode:v}=Object(s.a)(),{hasRecentlyEnrolledFleetServers:E}=Object(o.a)(),w=[Object(l.f)({policyId:d||e,setPolicyId:h,eligibleFleetServerPolicies:u,refreshEligibleFleetServerPolicies:c}),Object(l.g)({deploymentMode:y,setDeploymentMode:v,disabled:!Boolean(d||e)}),Object(l.a)({fleetServerHostForm:b,disabled:!Boolean(d||e),onClose:t}),Object(l.c)({serviceToken:p,generateServiceToken:g,isLoadingServiceToken:m,disabled:Boolean(!b.fleetServerHost)||!Boolean(d||e)}),Object(l.e)({isFleetServerReady:f,serviceToken:p,fleetServerHost:null===(n=b.fleetServerHost)||void 0===n?void 0:n.host_urls[0],fleetServerPolicyId:d||e,deploymentMode:y,disabled:!Boolean(p)}),Object(l.b)({hasRecentlyEnrolledFleetServers:E,disabled:!Boolean(p)})];return i?a.a.createElement(r.EuiSkeletonText,null):a.a.createElement(r.EuiSteps,{steps:w,className:"eui-textLeft"})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n(1),a=n.n(i),r=n(4),s=n(12),o=n(6),l=n(16),u=n(17),c=n(169);const d=({agentPolicyId:e,onCreateEnrollmentApiKey:t})=>{const{notifications:n}=Object(u.sc)(),[l,c]=Object(i.useState)(!1);return a.a.createElement(o.EuiCallOut,{color:"warning",title:r.i18n.translate("xpack.fleet.enrollmentStepAgentPolicy.noEnrollmentTokensForSelectedPolicyCallout",{defaultMessage:"There are no enrollment tokens for the selected agent policy"})},a.a.createElement("div",{className:"eui-textBreakWord"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.agentEnrenrollmentStepAgentPolicyollment.noEnrollmentTokensForSelectedPolicyCalloutDescription",defaultMessage:"You must create and enrollment token in order to enroll agents with this policy"})),a.a.createElement(o.EuiSpacer,{size:"m"}),a.a.createElement(o.EuiButton,{iconType:"plusInCircle",isLoading:l,fill:!0,onClick:async()=>{if(c(!0),e)try{var i;const a=await Object(u.l)({policy_id:e});if(a.error)throw a.error;if(c(!1),null===(i=a.data)||void 0===i||!i.item)return;t(a.data.item),n.toasts.addSuccess(r.i18n.translate("xpack.fleet.newEnrollmentKey.keyCreatedToasts",{defaultMessage:"Enrollment token created"}))}catch(e){c(!1),n.toasts.addError(e,{title:"Error"})}}},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.setUpAgentsLink",defaultMessage:"Create enrollment token"})))},h=({agentPolicyId:e,selectedApiKeyId:t,initialAuthenticationSettingsOpen:n=!1,onKeyChange:r})=>{const{notifications:h}=Object(u.sc)(),[f,p]=Object(i.useState)([]),[m,g]=Object(i.useState)(n);Object(i.useEffect)((()=>{g(n)}),[n]);const[b,y]=Object(i.useState)(!1),v=Object(i.useCallback)((e=>{p([e]),r(e.id)}),[r]);return Object(i.useEffect)((function(){if(!e)return g(!0),void p([]);!async function(){try{var t;y(!0);const n=await Object(u.D)({page:1,perPage:l.t});if(n.error)throw n.error;if(!n.data)throw new Error("No data while fetching enrollment API keys");const i=n.data.items.filter((t=>t.policy_id===e&&!0===t.active));p(i),r(null===(t=i[0])||void 0===t?void 0:t.id)}catch(e){h.toasts.addError(e,{title:"Error"})}finally{y(!1)}}()}),[r,e,h.toasts]),Object(i.useEffect)((function(){if(!t&&f.length>0&&f[0].policy_id===e){const e=f[0].id;r(e)}}),[f,t,e,r]),a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiButtonEmpty,{iconSide:"left",iconType:m?"arrowDown":"arrowRight",onClick:()=>g(!m)},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.showAuthenticationSettingsButton",defaultMessage:"Authentication settings"})),m&&a.a.createElement(a.a.Fragment,null,a.a.createElement(o.EuiSpacer,{size:"m"}),f.length&&t?a.a.createElement(o.EuiSelect,{fullWidth:!0,options:f.map((e=>({value:e.id,text:e.name}))),value:t||void 0,prepend:a.a.createElement(o.EuiText,null,a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.enrollmentStepAgentPolicy.enrollmentTokenSelectLabel",defaultMessage:"Enrollment token"})),onChange:e=>{r(e.target.value)}}):b?a.a.createElement(c.a,null):e?a.a.createElement(d,{agentPolicyId:e,onCreateEnrollmentApiKey:v}):null))}},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(222),t),a(n(294),t),a(n(458),t),a(n(193),t),a(n(459),t),a(n(223),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(193),a=n(223);t.default=(e,t)=>{let n;switch(e.code){case a.ZodIssueCode.invalid_type:n=e.received===i.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.ZodIssueCode.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,i.util.jsonStringifyReplacer)}`;break;case a.ZodIssueCode.unrecognized_keys:n=`Unrecognized key(s) in object: ${i.util.joinValues(e.keys,", ")}`;break;case a.ZodIssueCode.invalid_union:n="Invalid input";break;case a.ZodIssueCode.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${i.util.joinValues(e.options)}`;break;case a.ZodIssueCode.invalid_enum_value:n=`Invalid enum value. Expected ${i.util.joinValues(e.options)}, received '${e.received}'`;break;case a.ZodIssueCode.invalid_arguments:n="Invalid function arguments";break;case a.ZodIssueCode.invalid_return_type:n="Invalid function return type";break;case a.ZodIssueCode.invalid_date:n="Invalid date";break;case a.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:i.util.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.ZodIssueCode.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.ZodIssueCode.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.ZodIssueCode.custom:n="Invalid input";break;case a.ZodIssueCode.invalid_intersection_types:n="Intersection results could not be merged";break;case a.ZodIssueCode.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case a.ZodIssueCode.not_finite:n="Number must be finite";break;default:n=t.defaultError,i.util.assertNever(e)}return{message:n}}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;const a=n(222),r=i(n(293));t.makeIssue=e=>{const{data:t,path:n,errorMaps:i,issueData:a}=e,r=[...n,...a.path||[]],s={...a,path:r};if(void 0!==a.message)return{...a,path:r,message:a.message};let o="";const l=i.filter((e=>!!e)).slice().reverse();for(const e of l)o=e(s,{data:t,defaultError:o}).message;return{...a,path:r,message:o}},t.EMPTY_PATH=[],t.addIssueToContext=function(e,n){const i=(0,a.getErrorMap)(),s=(0,t.makeIssue)({issueData:n,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,i,i===r.default?void 0:r.default].filter((e=>!!e))});e.common.issues.push(s)};class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const a of n){if("aborted"===a.status)return t.INVALID;"dirty"===a.status&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const n=[];for(const e of t){const t=await e.key,i=await e.value;n.push({key:t,value:i})}return ParseStatus.mergeObjectSync(e,n)}static mergeObjectSync(e,n){const i={};for(const a of n){const{key:n,value:r}=a;if("aborted"===n.status)return t.INVALID;if("aborted"===r.status)return t.INVALID;"dirty"===n.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===n.value||void 0===r.value&&!a.alwaysSet||(i[n.value]=r.value)}return{status:e.value,value:i}}}t.ParseStatus=ParseStatus,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},function(e,t,n){"use strict";var i=n(159);e.exports=new i({include:[n(296)]})},function(e,t,n){"use strict";var i=n(159);e.exports=new i({include:[n(224)],implicit:[n(467),n(468),n(469),n(470)]})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var i=n(1),a=n(4),r=n(15);const s=(e,t)=>{const n=Object(i.useMemo)((()=>e.length),[e.length]),s=Object(i.useMemo)((()=>e.reduce(((e,t)=>Object.values(t)[0].data?e+1:e),0)),[e]),{getAbsolutePath:o,getHref:l}=Object(r.Kc)();let u,c,d;return t||(u="",c="",d=""),"apm"===(null==t?void 0:t.name)?(u=o("/app/apm/tutorial"),c=a.i18n.translate("xpack.fleet.confirmIncomingData.installApmAgentButtonText",{defaultMessage:"Install APM Agent"}),d=a.i18n.translate("xpack.fleet.confirmIncomingData.APMsubtitle",{defaultMessage:"Next, install APM agents on your hosts to collect data from your applications and services."})):(u=l("integration_details_assets",{pkgkey:`${null==t?void 0:t.name}-${null==t?void 0:t.version}`}),c=a.i18n.translate("xpack.fleet.confirmIncomingData.viewDataAssetsButtonText",{defaultMessage:"View assets"}),d=a.i18n.translate("xpack.fleet.confirmIncomingData.subtitle",{defaultMessage:"Next, analyze your data using our integration assets such as curated views, dashboards and more."})),{enrolledAgents:n,numAgentsWithData:s,linkButton:{href:u,text:c},message:d}},o=(e,t,n=0)=>{const a=Object(i.useRef)(void 0),[s,o]=Object(i.useState)({incomingData:[],dataPreview:[]}),[l,u]=Object(i.useState)(!0),[c,d]=Object(i.useState)(!1),h=Object(i.useRef)();return Object(i.useEffect)((()=>{let i=!1;const l=()=>{a.current=window.setTimeout((async()=>{h.current||(h.current=Date.now()),Date.now()-h.current>3e5&&d(!0);const{data:n}=await Object(r.z)({agentsIds:e,previewData:t});if(null!=n&&n.items){const e=null==n?void 0:n.items.filter((e=>!0===e[Object.keys(e)[0]].data));e.length>0&&(o({incomingData:e,dataPreview:n.dataPreview||[]}),u(!1))}i||l()}),5e3)};l();const c=s.dataPreview.length>=n,f=s.incomingData.length>0;return(i||(t?c:f))&&clearTimeout(a.current),()=>{i=!0}}),[e,s,t,n,h]),{...s,isLoading:l,hasReachedTimeout:c}}},function(e,t,n){"use strict";(function(t,i){var a=n(195);e.exports=v;var r,s=n(485);v.ReadableState=y,n(174).EventEmitter;var o=function(e,t){return e.listeners(t).length},l=n(299),u=n(228).Buffer,c=t.Uint8Array||function(){},d=Object.create(n(175));d.inherits=n(118);var h=n(486),f=void 0;f=h&&h.debuglog?h.debuglog("stream"):function(){};var p,m=n(487),g=n(300);d.inherits(v,l);var b=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var i=t instanceof(r=r||n(155));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:i&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(176).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function v(e){if(r=r||n(155),!(this instanceof v))return new v(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),l.call(this)}function E(e,t,n,i,a){var r,s=e._readableState;return null===t?(s.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,k(e)}}(e,s)):(a||(r=function(e,t){var n,i;return i=t,u.isBuffer(i)||i instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,t)),r?e.emit("error",r):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):_(e,s)):w(e,s,t,!1))):i||(s.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&k(e)),_(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},v.prototype.unshift=function(e){return E(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return p||(p=n(176).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var x=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=x?e=x:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?a.nextTick(M,e):M(e))}function M(e){f("emit readable"),e.emit("readable"),D(e)}function _(e,t){t.readingMore||(t.readingMore=!0,a.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function C(e){f("readable nexttick read 0"),e.read(0)}function F(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),D(e),t.flowing&&!t.reading&&e.read(0)}function D(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,i=1,a=n.data;for(e-=a.length;n=n.next;){var r=n.data,s=e>r.length?r.length:e;if(s===r.length?a+=r:a+=r.slice(0,e),0==(e-=s)){s===r.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=r.slice(s));break}++i}return t.length-=i,a}(e,t):function(e,t){var n=u.allocUnsafe(e),i=t.head,a=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var r=i.data,s=e>r.length?r.length:e;if(r.copy(n,n.length-e,0,s),0==(e-=s)){s===r.length?(++a,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=r.slice(s));break}++a}return t.length-=a,n}(e,t),i}(e,t.buffer,t.decoder),n);var n}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,a.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}v.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):k(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&I(this),null;var i,a=t.needReadable;return f("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",a=!0),t.ended||t.reading?f("reading or ended",a=!1):a&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(i=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&I(this)),null!==i&&this.emit("data",i),i},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,f("pipe count=%d opts=%j",r.pipesCount,t);var l=t&&!1===t.end||e===i.stdout||e===i.stderr?y:u;function u(){f("onend"),e.end()}r.endEmitted?a.nextTick(l):n.once("end",l),e.on("unpipe",(function t(i,a){f("onunpipe"),i===n&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,f("cleanup"),e.removeListener("close",g),e.removeListener("finish",b),e.removeListener("drain",c),e.removeListener("error",m),e.removeListener("unpipe",t),n.removeListener("end",u),n.removeListener("end",y),n.removeListener("data",p),d=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,D(e))}}(n);e.on("drain",c);var d=!1,h=!1;function p(t){f("ondata"),h=!1,!1!==e.write(t)||h||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==O(r.pipes,e))&&!d&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,h=!0),n.pause())}function m(t){f("onerror",t),y(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",b),y()}function b(){f("onfinish"),e.removeListener("close",g),y()}function y(){f("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",g),e.once("finish",b),e.emit("pipe",n),r.flowing||(f("pipe resume"),n.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<a;r++)i[r].emit("unpipe",this,n);return this}var s=O(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},v.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&k(this):a.nextTick(C,this))}return n},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,a.nextTick(F,e,t))}(this,e)),this},v.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var a in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){f("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a||(n.objectMode||a&&a.length)&&(t.push(a)||(i=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var r=0;r<b.length;r++)e.on(b[r],this.emit.bind(this,b[r]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=T}).call(this,n(139),n(87))},function(e,t,n){e.exports=n(174).EventEmitter},function(e,t,n){"use strict";var i=n(195);function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return r||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(a,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(a,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,n(139))},function(e,t,n){"use strict";e.exports=s;var i=n(155),a=Object.create(n(175));function r(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){l(e,t,n)})):l(this,null,null)}function l(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}a.inherits=n(118),a.inherits(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){var i=n(118),a=n(161),r=n(119).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function l(){this.init(),this._w=o,a.call(this,64,56)}function u(e,t,n){return n^e&(t^n)}function c(e,t,n){return e&t|n&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function f(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}i(l,a),l.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},l.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,a=0|this._b,r=0|this._c,o=0|this._d,l=0|this._e,p=0|this._f,m=0|this._g,g=0|this._h,b=0;b<16;++b)n[b]=e.readInt32BE(4*b);for(;b<64;++b)n[b]=0|(((t=n[b-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[b-7]+f(n[b-15])+n[b-16];for(var y=0;y<64;++y){var v=g+h(l)+u(l,p,m)+s[y]+n[y]|0,E=d(i)+c(i,a,r)|0;g=m,m=p,p=l,l=o+v|0,o=r,r=a,a=i,i=v+E|0}this._a=i+this._a|0,this._b=a+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},l.prototype._hash=function(){var e=r.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=l},function(e,t,n){var i=n(118),a=n(161),r=n(119).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function l(){this.init(),this._w=o,a.call(this,128,112)}function u(e,t,n){return n^e&(t^n)}function c(e,t,n){return e&t|n&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function b(e,t){return e>>>0<t>>>0?1:0}i(l,a),l.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},l.prototype._update=function(e){for(var t=this._w,n=0|this._ah,i=0|this._bh,a=0|this._ch,r=0|this._dh,o=0|this._eh,l=0|this._fh,y=0|this._gh,v=0|this._hh,E=0|this._al,w=0|this._bl,x=0|this._cl,S=0|this._dl,k=0|this._el,M=0|this._fl,_=0|this._gl,A=0|this._hl,C=0;C<32;C+=2)t[C]=e.readInt32BE(4*C),t[C+1]=e.readInt32BE(4*C+4);for(;C<160;C+=2){var F=t[C-30],D=t[C-30+1],T=f(F,D),I=p(D,F),P=m(F=t[C-4],D=t[C-4+1]),O=g(D,F),j=t[C-14],B=t[C-14+1],L=t[C-32],N=t[C-32+1],R=I+B|0,z=T+j+b(R,I)|0;z=(z=z+P+b(R=R+O|0,O)|0)+L+b(R=R+N|0,N)|0,t[C]=z,t[C+1]=R}for(var U=0;U<160;U+=2){z=t[U],R=t[U+1];var Z=c(n,i,a),K=c(E,w,x),q=d(n,E),H=d(E,n),W=h(o,k),V=h(k,o),G=s[U],$=s[U+1],X=u(o,l,y),J=u(k,M,_),Y=A+V|0,Q=v+W+b(Y,A)|0;Q=(Q=(Q=Q+X+b(Y=Y+J|0,J)|0)+G+b(Y=Y+$|0,$)|0)+z+b(Y=Y+R|0,R)|0;var ee=H+K|0,te=q+Z+b(ee,H)|0;v=y,A=_,y=l,_=M,l=o,M=k,o=r+Q+b(k=S+Y|0,S)|0,r=a,S=x,a=i,x=w,i=n,w=E,n=Q+te+b(E=Y+ee|0,Y)|0}this._al=this._al+E|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+S|0,this._el=this._el+k|0,this._fl=this._fl+M|0,this._gl=this._gl+_|0,this._hl=this._hl+A|0,this._ah=this._ah+n+b(this._al,E)|0,this._bh=this._bh+i+b(this._bl,w)|0,this._ch=this._ch+a+b(this._cl,x)|0,this._dh=this._dh+r+b(this._dl,S)|0,this._eh=this._eh+o+b(this._el,k)|0,this._fh=this._fh+l+b(this._fl,M)|0,this._gh=this._gh+y+b(this._gl,_)|0,this._hh=this._hh+v+b(this._hl,A)|0},l.prototype._hash=function(){var e=r.allocUnsafe(64);function t(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=l},function(e,t,n){"use strict";var i=n(118),a=n(502),r=n(152),s=n(119).Buffer,o=n(306),l=n(230),u=n(231),c=s.alloc(128);function d(e,t){r.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var n="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>n?t=("rmd160"===e?new l:u(e)).update(t).digest():t.length<n&&(t=s.concat([t,c],n));for(var i=this._ipad=s.allocUnsafe(n),a=this._opad=s.allocUnsafe(n),o=0;o<n;o++)i[o]=54^t[o],a[o]=92^t[o];this._hash="rmd160"===e?new l:u(e),this._hash.update(i)}i(d,r),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new l:u(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new a(o,t):new d(e,t)}},function(e,t,n){var i=n(225);e.exports=function(e){return(new i).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,n){t.pbkdf2=n(504),t.pbkdf2Sync=n(311)},function(e,t){var n=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!=t)throw new TypeError("Bad key length")}},function(e,t,n){(function(t){var n;n=t.browser||parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary",e.exports=n}).call(this,n(87))},function(e,t,n){var i=n(306),a=n(230),r=n(231),s=n(309),o=n(310),l=n(119).Buffer,u=l.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(e,t,n){var s=function(e){return"rmd160"===e||"ripemd160"===e?a:"md5"===e?i:function(t){return r(e).update(t).digest()}}(e),o="sha512"===e||"sha384"===e?128:64;t.length>o?t=s(t):t.length<o&&(t=l.concat([t,u],o));for(var d=l.allocUnsafe(o+c[e]),h=l.allocUnsafe(o+c[e]),f=0;f<o;f++)d[f]=54^t[f],h[f]=92^t[f];var p=l.allocUnsafe(o+n+4);d.copy(p,0,0,o),this.ipad1=p,this.ipad2=d,this.opad=h,this.alg=e,this.blocksize=o,this.hash=s,this.size=c[e]}d.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,i,a){l.isBuffer(e)||(e=l.from(e,o)),l.isBuffer(t)||(t=l.from(t,o)),s(n,i);var r=new d(a=a||"sha1",e,t.length),u=l.allocUnsafe(i),h=l.allocUnsafe(t.length+4);t.copy(h,0,0,t.length);for(var f=0,p=c[a],m=Math.ceil(i/p),g=1;g<=m;g++){h.writeUInt32BE(g,t.length);for(var b=r.run(h,r.ipad1),y=b,v=1;v<n;v++){y=r.run(y,r.ipad2);for(var E=0;E<p;E++)b[E]^=y[E]}b.copy(u,f),f+=p}return u}},function(e,t,n){var i=n(177),a=n(119).Buffer,r=n(313);function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return r(e._prev),t}t.encrypt=function(e,t){var n=Math.ceil(t.length/16),r=e._cache.length;e._cache=a.concat([e._cache,a.allocUnsafe(16*n)]);for(var o=0;o<n;o++){var l=s(e),u=r+16*o;e._cache.writeUInt32BE(l[0],u+0),e._cache.writeUInt32BE(l[1],u+4),e._cache.writeUInt32BE(l[2],u+8),e._cache.writeUInt32BE(l[3],u+12)}var c=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),i(t,c)}},function(e,t){e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,n){var i=n(197),a=n(119).Buffer,r=n(152),s=n(118),o=n(513),l=n(177),u=n(313);function c(e,t,n,s){r.call(this);var l=a.alloc(4,0);this._cipher=new i.AES(t);var c=this._cipher.encryptBlock(l);this._ghash=new o(c),n=function(e,t,n){if(12===t.length)return e._finID=a.concat([t,a.from([0,0,0,1])]),a.concat([t,a.from([0,0,0,2])]);var i=new o(n),r=t.length,s=r%16;i.update(t),s&&(s=16-s,i.update(a.alloc(s,0))),i.update(a.alloc(8,0));var l=8*r,c=a.alloc(8);c.writeUIntBE(l,0,8),i.update(c),e._finID=i.state;var d=a.from(e._finID);return u(d),d}(this,n,c),this._prev=a.from(n),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(c,r),c.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=a.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=l(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var i=Math.min(e.length,t.length),a=0;a<i;++a)n+=e[a]^t[a];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},c.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=c},function(e,t,n){var i=n(197),a=n(119).Buffer,r=n(152);function s(e,t,n,s){r.call(this),this._cipher=new i.AES(t),this._prev=a.from(n),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=s,this._mode=e}n(118)(s,r),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},e.exports=s},function(e,t,n){var i=n(160);e.exports=y,y.simpleSieve=g,y.fermatTest=b;var a=n(127),r=new a(24),s=new(n(318)),o=new a(1),l=new a(2),u=new a(5),c=(new a(16),new a(8),new a(10)),d=new a(3),h=(new a(7),new a(11)),f=new a(4),p=(new a(12),null);function m(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var i=Math.ceil(Math.sqrt(n)),a=0;a<t&&e[a]<=i&&n%e[a]!=0;a++);t!==a&&e[a]<=i||(e[t++]=n)}return p=e,e}function g(e){for(var t=m(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function b(e){var t=a.mont(e);return 0===l.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function y(e,t){if(e<16)return new a(2===t||5===t?[140,123]:[140,39]);var n,p;for(t=new a(t);;){for(n=new a(i(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(o),n.testn(1)||n.iadd(l),t.cmp(l)){if(!t.cmp(u))for(;n.mod(c).cmp(d);)n.iadd(f)}else for(;n.mod(r).cmp(h);)n.iadd(f);if(g(p=n.shrn(1))&&g(n)&&b(p)&&b(n)&&s.test(p)&&s.test(n))return n}}},function(e,t,n){var i=n(127),a=n(236);function r(e){this.rand=e||new a.Rand}e.exports=r,r.create=function(e){return new r(e)},r.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var a=new i(this.rand.generate(n))}while(a.cmp(e)>=0);return a},r.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},r.prototype.test=function(e,t,n){var a=e.bitLength(),r=i.mont(e),s=new i(1).toRed(r);t||(t=Math.max(1,a/48|0));for(var o=e.subn(1),l=0;!o.testn(l);l++);for(var u=e.shrn(l),c=o.toRed(r);t>0;t--){var d=this._randrange(new i(2),o);n&&n(d);var h=d.toRed(r).redPow(u);if(0!==h.cmp(s)&&0!==h.cmp(c)){for(var f=1;f<l;f++){if(0===(h=h.redSqr()).cmp(s))return!1;if(0===h.cmp(c))break}if(f===l)return!1}}return!0},r.prototype.getDivisor=function(e,t){var n=e.bitLength(),a=i.mont(e),r=new i(1).toRed(a);t||(t=Math.max(1,n/48|0));for(var s=e.subn(1),o=0;!s.testn(o);o++);for(var l=e.shrn(o),u=s.toRed(a);t>0;t--){var c=this._randrange(new i(2),s),d=e.gcd(c);if(0!==d.cmpn(1))return d;var h=c.toRed(a).redPow(l);if(0!==h.cmp(r)&&0!==h.cmp(u)){for(var f=1;f<o;f++){if(0===(h=h.redSqr()).cmp(r))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(u))break}if(f===o)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,n){"use strict";(function(t,i){var a;e.exports=M,M.ReadableState=k,n(174).EventEmitter;var r,s=function(e,t){return e.listeners(t).length},o=n(320),l=n(86).Buffer,u=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=n(529);r=c&&c.debuglog?c.debuglog("stream"):function(){};var d,h,f,p=n(530),m=n(321),g=n(322).getHighWaterMark,b=n(162).codes,y=b.ERR_INVALID_ARG_TYPE,v=b.ERR_STREAM_PUSH_AFTER_EOF,E=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(118)(M,o);var x=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(e,t,i){a=a||n(163),e=e||{},"boolean"!=typeof i&&(i=t instanceof a),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(176).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function M(e){if(a=a||n(163),!(this instanceof M))return new M(e);var t=this instanceof a;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function _(e,t,n,i,a){r("readableAddChunk",t);var s,o=e._readableState;if(null===t)o.reading=!1,function(e,t){if(r("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?D(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}}(e,o);else if(a||(s=function(e,t){var n,i;return i=t,l.isBuffer(i)||i instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(o,t)),s)x(e,s);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),i)o.endEmitted?x(e,new w):A(e,o,t,!0);else if(o.ended)x(e,new v);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?A(e,o,t,!1):I(e,o)):A(e,o,t,!1)}else i||(o.reading=!1,I(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function A(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&D(e)),I(e,t)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),M.prototype.destroy=m.destroy,M.prototype._undestroy=m.undestroy,M.prototype._destroy=function(e,t){t(e)},M.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=l.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},M.prototype.unshift=function(e){return _(this,e,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(e){d||(d=n(176).StringDecoder);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,a="";null!==i;)a+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==a&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var C=1073741824;function F(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=C?e=C:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function D(e){var t=e._readableState;r("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(r("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(T,e))}function T(e){var t=e._readableState;r("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,L(e)}function I(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(P,e,t))}function P(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(r("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function j(e){r("readable nexttick read 0"),e.read(0)}function B(e,t){r("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),L(e),t.flowing&&!t.reading&&e.read(0)}function L(e){var t=e._readableState;for(r("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function R(e){var t=e._readableState;r("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(z,t,e))}function z(e,t){if(r("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}M.prototype.read=function(e){r("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return r("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):D(this),null;if(0===(e=F(e,t))&&t.ended)return 0===t.length&&R(this),null;var i,a=t.needReadable;return r("need readable",a),(0===t.length||t.length-e<t.highWaterMark)&&r("length less than watermark",a=!0),t.ended||t.reading?r("reading or ended",a=!1):a&&(r("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=F(n,t))),null===(i=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&R(this)),null!==i&&this.emit("data",i),i},M.prototype._read=function(e){x(this,new E("_read()"))},M.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,r("pipe count=%d opts=%j",a.pipesCount,t);var o=t&&!1===t.end||e===i.stdout||e===i.stderr?m:l;function l(){r("onend"),e.end()}a.endEmitted?i.nextTick(o):n.once("end",o),e.on("unpipe",(function t(i,s){r("onunpipe"),i===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,r("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",t),n.removeListener("end",l),n.removeListener("end",m),n.removeListener("data",d),c=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}));var u=function(e){return function(){var t=e._readableState;r("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,L(e))}}(n);e.on("drain",u);var c=!1;function d(t){r("ondata");var i=e.write(t);r("dest.write",i),!1===i&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==U(a.pipes,e))&&!c&&(r("false write response, pause",a.awaitDrain),a.awaitDrain++),n.pause())}function h(t){r("onerror",t),m(),e.removeListener("error",h),0===s(e,"error")&&x(e,t)}function f(){e.removeListener("finish",p),m()}function p(){r("onfinish"),e.removeListener("close",f),m()}function m(){r("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",n),a.flowing||(r("pipe resume"),n.resume()),e},M.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<a;r++)i[r].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},M.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),a=this._readableState;return"data"===e?(a.readableListening=this.listenerCount("readable")>0,!1!==a.flowing&&this.resume()):"readable"===e&&(a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,r("on readable",a.length,a.reading),a.length?D(this):a.reading||i.nextTick(j,this))),n},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(O,this),n},M.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(O,this),t},M.prototype.resume=function(){var e=this._readableState;return e.flowing||(r("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(B,e,t))}(this,e)),e.paused=!1,this},M.prototype.pause=function(){return r("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(r("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var a in e.on("end",(function(){if(r("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(a){r("wrapped data"),n.decoder&&(a=n.decoder.write(a)),n.objectMode&&null==a||(n.objectMode||a&&a.length)&&(t.push(a)||(i=!0,e.pause()))})),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var s=0;s<S.length;s++)e.on(S[s],this.emit.bind(this,S[s]));return this._read=function(t){r("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(532)),h(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),M._fromList=N,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(e,t){return void 0===f&&(f=n(533)),f(M,e,t)})}).call(this,n(139),n(87))},function(e,t,n){e.exports=n(174).EventEmitter},function(e,t,n){"use strict";(function(t){function n(e,t){a(e,t),i(e)}function i(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,r){var s=this,o=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return o||l?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(a,this,e)):t.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!r&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(i,s):(s._writableState.errorEmitted=!0,t.nextTick(n,s,e)):t.nextTick(n,s,e):r?(t.nextTick(i,s),r(e)):t.nextTick(i,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,n(87))},function(e,t,n){"use strict";var i=n(162).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,a){var r=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,a,n);if(null!=r){if(!isFinite(r)||Math.floor(r)!==r||r<0)throw new i(a?n:"highWaterMark",r);return Math.floor(r)}return e.objectMode?16:16384}}},function(e,t,n){"use strict";(function(t,i){function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var a=i.callback;t.pendingcb--,a(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}var r;e.exports=M,M.WritableState=k;var s,o={deprecate:n(301)},l=n(320),u=n(86).Buffer,c=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=n(321),h=n(322).getHighWaterMark,f=n(162).codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,b=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,v=f.ERR_STREAM_NULL_VALUES,E=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,x=d.errorOrDestroy;function S(){}function k(e,t,s){r=r||n(163),e=e||{},"boolean"!=typeof s&&(s=t instanceof r),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,a=n.sync,r=n.writecb;if("function"!=typeof r)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,a,r){--t.pendingcb,n?(i.nextTick(r,a),i.nextTick(T,e,t),e._writableState.errorEmitted=!0,x(e,a)):(r(a),e._writableState.errorEmitted=!0,x(e,a),T(e,t))}(e,n,a,t,r);else{var s=F(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||C(e,n),a?i.nextTick(A,e,n,s,r):A(e,n,s,r)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function M(e){var t=this instanceof(r=r||n(163));if(!t&&!s.call(M,this))return new M(e);this._writableState=new k(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function _(e,t,n,i,a,r,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(a,t.onwrite):e._write(a,r,t.onwrite),t.sync=!1}function A(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),T(e,t)}function C(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),s=t.corkedRequestsFree;s.entry=n;for(var o=0,l=!0;n;)r[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;r.allBuffers=l,_(e,t,!0,t.length,r,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,c=n.encoding,d=n.callback;if(_(e,t,!1,t.objectMode?1:u.length,u,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function F(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function D(e,t){e._final((function(n){t.pendingcb--,n&&x(e,n),t.prefinished=!0,e.emit("prefinish"),T(e,t)}))}function T(e,t){var n=F(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(D,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var a=e._readableState;(!a||a.autoDestroy&&a.endEmitted)&&e.destroy()}return n}n(118)(M,l),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===M&&e&&e._writableState instanceof k}})):s=function(e){return e instanceof this},M.prototype.pipe=function(){x(this,new b)},M.prototype.write=function(e,t,n){var a,r=this._writableState,s=!1,o=!r.objectMode&&(a=e,u.isBuffer(a)||a instanceof c);return o&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=S),r.ending?function(e,t){var n=new E;x(e,n),i.nextTick(t,n)}(this,n):(o||function(e,t,n,a){var r;return null===n?r=new v:"string"==typeof n||t.objectMode||(r=new p("chunk",["string","Buffer"],n)),!r||(x(e,r),i.nextTick(a,r),!1)}(this,r,e,n))&&(r.pendingcb++,s=function(e,t,n,i,a,r){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}(t,i,a);i!==s&&(n=!0,a="buffer",i=s)}var o=t.objectMode?1:i.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:a,isBuf:n,callback:r,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,o,i,a,r);return l}(this,r,o,e,t,n)),s},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||C(this,e))},M.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),M.prototype._write=function(e,t,n){n(new m("_write()"))},M.prototype._writev=null,M.prototype.end=function(e,t,n){var a=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||function(e,t,n){t.ending=!0,T(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,a,n),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),M.prototype.destroy=d.destroy,M.prototype._undestroy=d.undestroy,M.prototype._destroy=function(e,t){t(e)}}).call(this,n(139),n(87))},function(e,t,n){"use strict";e.exports=c;var i=n(162).codes,a=i.ERR_METHOD_NOT_IMPLEMENTED,r=i.ERR_MULTIPLE_CALLBACK,s=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=i.ERR_TRANSFORM_WITH_LENGTH_0,l=n(163);function u(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;return e.push(null)}n(118)(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new a("_transform()"))},c.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,n){"use strict";var i=t;function a(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",n=0;n<e.length;n++)t+=a(e[n].toString(16));return t}i.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)n[i]=0|e[i];return n}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16));else for(i=0;i<e.length;i++){var a=e.charCodeAt(i),r=a>>8,s=255&a;r?n.push(r,s):n.push(s)}return n},i.zero2=a,i.toHex=r,i.encode=function(e,t){return"hex"===t?r(e):e}},function(e,t,n){"use strict";var i=t;i.base=n(198),i.short=n(540),i.mont=n(541),i.edwards=n(542)},function(e,t,n){"use strict";var i=n(143).rotr32;function a(e,t,n){return e&t^~e&n}function r(e,t,n){return e&t^e&n^t&n}function s(e,t,n){return e^t^n}t.ft_1=function(e,t,n,i){return 0===e?a(t,n,i):1===e||3===e?s(t,n,i):2===e?r(t,n,i):void 0},t.ch32=a,t.maj32=r,t.p32=s,t.s0_256=function(e){return i(e,2)^i(e,13)^i(e,22)},t.s1_256=function(e){return i(e,6)^i(e,11)^i(e,25)},t.g0_256=function(e){return i(e,7)^i(e,18)^e>>>3},t.g1_256=function(e){return i(e,17)^i(e,19)^e>>>10}},function(e,t,n){"use strict";var i=n(143),a=n(178),r=n(327),s=n(135),o=i.sum32,l=i.sum32_4,u=i.sum32_5,c=r.ch32,d=r.maj32,h=r.s0_256,f=r.s1_256,p=r.g0_256,m=r.g1_256,g=a.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}i.inherits(y,g),e.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=l(m(n[i-2]),n[i-7],p(n[i-15]),n[i-16]);var a=this.h[0],r=this.h[1],g=this.h[2],b=this.h[3],y=this.h[4],v=this.h[5],E=this.h[6],w=this.h[7];for(s(this.k.length===n.length),i=0;i<n.length;i++){var x=u(w,f(y),c(y,v,E),this.k[i],n[i]),S=o(h(a),d(a,r,g));w=E,E=v,v=y,y=o(b,x),b=g,g=r,r=a,a=o(x,S)}this.h[0]=o(this.h[0],a),this.h[1]=o(this.h[1],r),this.h[2]=o(this.h[2],g),this.h[3]=o(this.h[3],b),this.h[4]=o(this.h[4],y),this.h[5]=o(this.h[5],v),this.h[6]=o(this.h[6],E),this.h[7]=o(this.h[7],w)},y.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(e,t,n){"use strict";var i=n(143),a=n(178),r=n(135),s=i.rotr64_hi,o=i.rotr64_lo,l=i.shr64_hi,u=i.shr64_lo,c=i.sum64,d=i.sum64_hi,h=i.sum64_lo,f=i.sum64_4_hi,p=i.sum64_4_lo,m=i.sum64_5_hi,g=i.sum64_5_lo,b=a.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function E(e,t,n,i,a){var r=e&n^~e&a;return r<0&&(r+=4294967296),r}function w(e,t,n,i,a,r){var s=t&i^~t&r;return s<0&&(s+=4294967296),s}function x(e,t,n,i,a){var r=e&n^e&a^n&a;return r<0&&(r+=4294967296),r}function S(e,t,n,i,a,r){var s=t&i^t&r^i&r;return s<0&&(s+=4294967296),s}function k(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function M(e,t){var n=o(e,t,28)^o(t,e,2)^o(t,e,7);return n<0&&(n+=4294967296),n}function _(e,t){var n=o(e,t,14)^o(e,t,18)^o(t,e,9);return n<0&&(n+=4294967296),n}function A(e,t){var n=s(e,t,1)^s(e,t,8)^l(e,t,7);return n<0&&(n+=4294967296),n}function C(e,t){var n=o(e,t,1)^o(e,t,8)^u(e,t,7);return n<0&&(n+=4294967296),n}function F(e,t){var n=o(e,t,19)^o(t,e,29)^u(e,t,6);return n<0&&(n+=4294967296),n}i.inherits(v,b),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var n=this.W,i=0;i<32;i++)n[i]=e[t+i];for(;i<n.length;i+=2){var a=(g=n[i-4],b=n[i-3],y=void 0,(y=s(g,b,19)^s(b,g,29)^l(g,b,6))<0&&(y+=4294967296),y),r=F(n[i-4],n[i-3]),o=n[i-14],u=n[i-13],c=A(n[i-30],n[i-29]),d=C(n[i-30],n[i-29]),h=n[i-32],m=n[i-31];n[i]=f(a,r,o,u,c,d,h,m),n[i+1]=p(a,r,o,u,c,d,h,m)}var g,b,y},v.prototype._update=function(e,t){this._prepareBlock(e,t);var n,i,a,o=this.W,l=this.h[0],u=this.h[1],f=this.h[2],p=this.h[3],b=this.h[4],y=this.h[5],v=this.h[6],A=this.h[7],C=this.h[8],F=this.h[9],D=this.h[10],T=this.h[11],I=this.h[12],P=this.h[13],O=this.h[14],j=this.h[15];r(this.k.length===o.length);for(var B=0;B<o.length;B+=2){var L=O,N=j,R=(a=void 0,(a=s(n=C,i=F,14)^s(n,i,18)^s(i,n,9))<0&&(a+=4294967296),a),z=_(C,F),U=E(C,0,D,0,I),Z=w(0,F,0,T,0,P),K=this.k[B],q=this.k[B+1],H=o[B],W=o[B+1],V=m(L,N,R,z,U,Z,K,q,H,W),G=g(L,N,R,z,U,Z,K,q,H,W);L=k(l,u),N=M(l,u),R=x(l,0,f,0,b),z=S(0,u,0,p,0,y);var $=d(L,N,R,z),X=h(L,N,R,z);O=I,j=P,I=D,P=T,D=C,T=F,C=d(v,A,V,G),F=h(A,A,V,G),v=b,A=y,b=f,y=p,f=l,p=u,l=d(V,G,$,X),u=h(V,G,$,X)}c(this.h,0,l,u),c(this.h,2,f,p),c(this.h,4,b,y),c(this.h,6,v,A),c(this.h,8,C,F),c(this.h,10,D,T),c(this.h,12,I,P),c(this.h,14,O,j)},v.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(e,t,n){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e,t,n){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=r:t.BN=r,r.BN=r,r.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(557).Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void i(!1,"Invalid character in "+e)}function l(e,t,n){var i=o(e,n);return n-1>=t&&(i|=o(e,n-1)<<4),i}function u(e,t,n,a){for(var r=0,s=0,o=Math.min(e.length,n),l=t;l<o;l++){var u=e.charCodeAt(l)-48;r*=a,s=u>=49?u-49+10:u>=17?u-17+10:u,i(u>=0&&s<a,"Invalid character"),r+=s}return r}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,n):(this._parseBase(e,t,a),"le"===n&&this._initArray(this.toArray(),t,n)))},r.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},r.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,s,o=0;if("be"===n)for(a=e.length-1,r=0;a>=0;a-=3)s=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[r]|=s<<o&67108863,this.words[r+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===n)for(a=0,r=0;a<e.length;a+=3)s=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[r]|=s<<o&67108863,this.words[r+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this._strip()},r.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,r=0,s=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)a=l(e,t,i)<<r,this.words[s]|=67108863&a,r>=18?(r-=18,s+=1,this.words[s]|=a>>>26):r+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)a=l(e,t,i)<<r,this.words[s]|=67108863&a,r>=18?(r-=18,s+=1,this.words[s]|=a>>>26):r+=8;this._strip()},r.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=t)i++;i--,a=a/t|0;for(var r=e.length-n,s=r%i,o=Math.min(r,r-s)+n,l=0,c=n;c<o;c+=i)l=u(e,c,c+i,t),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=u(e,c,e.length,t),c=0;c<s;c++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype._move=function(e){c(e,this)},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){r.prototype.inspect=d}else r.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var a=0|e.words[0],r=0|t.words[0],s=a*r,o=67108863&s,l=s/67108864|0;n.words[0]=o;for(var u=1;u<i;u++){for(var c=l>>>26,d=67108863&l,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;c+=(s=(a=0|e.words[p])*(r=0|t.words[f])+d)/67108864|0,d=67108863&s}n.words[u]=0|d,l=0|c}return 0!==l?n.words[u]=0|l:n.length--,n._strip()}r.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var a=0,r=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<a|r)).toString(16);r=o>>>24-a&16777215,(a+=2)>=26&&(a-=26,s--),n=0!==r||s!==this.length-1?h[6-l.length]+l+n:l+n}for(0!==r&&(n=r.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],c=p[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(c).toString(e);n=(d=d.idivn(c)).isZero()?m+n:h[u-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16,2)},s&&(r.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},r.prototype.toArrayLike=function(e,t,n){this._strip();var a=this.byteLength(),r=n||Math.max(1,a);i(a<=r,"byte array longer than desired length"),i(r>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,r);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,a),s},r.prototype._toArrayLikeLE=function(e,t){for(var n=0,i=0,a=0,r=0;a<this.length;a++){var s=this.words[a]<<r|i;e[n++]=255&s,n<e.length&&(e[n++]=s>>8&255),n<e.length&&(e[n++]=s>>16&255),6===r?(n<e.length&&(e[n++]=s>>24&255),i=0,r=0):(i=s>>>24,r+=2)}if(n<e.length)for(e[n++]=i;n<e.length;)e[n++]=0},r.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,i=0,a=0,r=0;a<this.length;a++){var s=this.words[a]<<r|i;e[n--]=255&s,n>=0&&(e[n--]=s>>8&255),n>=0&&(e[n--]=s>>16&255),6===r?(n>=0&&(e[n--]=s>>24&255),i=0,r=0):(i=s>>>24,r+=2)}if(n>=0)for(e[n--]=i;n>=0;)e[n--]=0},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},r.prototype.ior=function(e){return i(!(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},r.prototype.iand=function(e){return i(!(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},r.prototype.ixor=function(e){return i(!(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return n>0&&(this.words[a]=~this.words[a]&67108863>>26-n),this._strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,a=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<a:this.words[n]&~(1<<a),this._strip()},r.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var a=0,r=0;r<i.length;r++)t=(0|n.words[r])+(0|i.words[r])+a,this.words[r]=67108863&t,a=t>>>26;for(;0!==a&&r<n.length;r++)t=(0|n.words[r])+a,this.words[r]=67108863&t,a=t>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;r<n.length;r++)this.words[r]=n.words[r];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=e):(n=e,i=this);for(var r=0,s=0;s<i.length;s++)r=(t=(0|n.words[s])-(0|i.words[s])+r)>>26,this.words[s]=67108863&t;for(;0!==r&&s<n.length;s++)r=(t=(0|n.words[s])+r)>>26,this.words[s]=67108863&t;if(0===r&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var i,a,r,s=e.words,o=t.words,l=n.words,u=0,c=0|s[0],d=8191&c,h=c>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,v=0|s[3],E=8191&v,w=v>>>13,x=0|s[4],S=8191&x,k=x>>>13,M=0|s[5],_=8191&M,A=M>>>13,C=0|s[6],F=8191&C,D=C>>>13,T=0|s[7],I=8191&T,P=T>>>13,O=0|s[8],j=8191&O,B=O>>>13,L=0|s[9],N=8191&L,R=L>>>13,z=0|o[0],U=8191&z,Z=z>>>13,K=0|o[1],q=8191&K,H=K>>>13,W=0|o[2],V=8191&W,G=W>>>13,$=0|o[3],X=8191&$,J=$>>>13,Y=0|o[4],Q=8191&Y,ee=Y>>>13,te=0|o[5],ne=8191&te,ie=te>>>13,ae=0|o[6],re=8191&ae,se=ae>>>13,oe=0|o[7],le=8191&oe,ue=oe>>>13,ce=0|o[8],de=8191&ce,he=ce>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(u+(i=Math.imul(d,U))|0)+((8191&(a=(a=Math.imul(d,Z))+Math.imul(h,U)|0))<<13)|0;u=((r=Math.imul(h,Z))+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,U),a=(a=Math.imul(p,Z))+Math.imul(m,U)|0,r=Math.imul(m,Z);var be=(u+(i=i+Math.imul(d,q)|0)|0)+((8191&(a=(a=a+Math.imul(d,H)|0)+Math.imul(h,q)|0))<<13)|0;u=((r=r+Math.imul(h,H)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(b,U),a=(a=Math.imul(b,Z))+Math.imul(y,U)|0,r=Math.imul(y,Z),i=i+Math.imul(p,q)|0,a=(a=a+Math.imul(p,H)|0)+Math.imul(m,q)|0,r=r+Math.imul(m,H)|0;var ye=(u+(i=i+Math.imul(d,V)|0)|0)+((8191&(a=(a=a+Math.imul(d,G)|0)+Math.imul(h,V)|0))<<13)|0;u=((r=r+Math.imul(h,G)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,U),a=(a=Math.imul(E,Z))+Math.imul(w,U)|0,r=Math.imul(w,Z),i=i+Math.imul(b,q)|0,a=(a=a+Math.imul(b,H)|0)+Math.imul(y,q)|0,r=r+Math.imul(y,H)|0,i=i+Math.imul(p,V)|0,a=(a=a+Math.imul(p,G)|0)+Math.imul(m,V)|0,r=r+Math.imul(m,G)|0;var ve=(u+(i=i+Math.imul(d,X)|0)|0)+((8191&(a=(a=a+Math.imul(d,J)|0)+Math.imul(h,X)|0))<<13)|0;u=((r=r+Math.imul(h,J)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(S,U),a=(a=Math.imul(S,Z))+Math.imul(k,U)|0,r=Math.imul(k,Z),i=i+Math.imul(E,q)|0,a=(a=a+Math.imul(E,H)|0)+Math.imul(w,q)|0,r=r+Math.imul(w,H)|0,i=i+Math.imul(b,V)|0,a=(a=a+Math.imul(b,G)|0)+Math.imul(y,V)|0,r=r+Math.imul(y,G)|0,i=i+Math.imul(p,X)|0,a=(a=a+Math.imul(p,J)|0)+Math.imul(m,X)|0,r=r+Math.imul(m,J)|0;var Ee=(u+(i=i+Math.imul(d,Q)|0)|0)+((8191&(a=(a=a+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;u=((r=r+Math.imul(h,ee)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(_,U),a=(a=Math.imul(_,Z))+Math.imul(A,U)|0,r=Math.imul(A,Z),i=i+Math.imul(S,q)|0,a=(a=a+Math.imul(S,H)|0)+Math.imul(k,q)|0,r=r+Math.imul(k,H)|0,i=i+Math.imul(E,V)|0,a=(a=a+Math.imul(E,G)|0)+Math.imul(w,V)|0,r=r+Math.imul(w,G)|0,i=i+Math.imul(b,X)|0,a=(a=a+Math.imul(b,J)|0)+Math.imul(y,X)|0,r=r+Math.imul(y,J)|0,i=i+Math.imul(p,Q)|0,a=(a=a+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,ee)|0;var we=(u+(i=i+Math.imul(d,ne)|0)|0)+((8191&(a=(a=a+Math.imul(d,ie)|0)+Math.imul(h,ne)|0))<<13)|0;u=((r=r+Math.imul(h,ie)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(F,U),a=(a=Math.imul(F,Z))+Math.imul(D,U)|0,r=Math.imul(D,Z),i=i+Math.imul(_,q)|0,a=(a=a+Math.imul(_,H)|0)+Math.imul(A,q)|0,r=r+Math.imul(A,H)|0,i=i+Math.imul(S,V)|0,a=(a=a+Math.imul(S,G)|0)+Math.imul(k,V)|0,r=r+Math.imul(k,G)|0,i=i+Math.imul(E,X)|0,a=(a=a+Math.imul(E,J)|0)+Math.imul(w,X)|0,r=r+Math.imul(w,J)|0,i=i+Math.imul(b,Q)|0,a=(a=a+Math.imul(b,ee)|0)+Math.imul(y,Q)|0,r=r+Math.imul(y,ee)|0,i=i+Math.imul(p,ne)|0,a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0,r=r+Math.imul(m,ie)|0;var xe=(u+(i=i+Math.imul(d,re)|0)|0)+((8191&(a=(a=a+Math.imul(d,se)|0)+Math.imul(h,re)|0))<<13)|0;u=((r=r+Math.imul(h,se)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(I,U),a=(a=Math.imul(I,Z))+Math.imul(P,U)|0,r=Math.imul(P,Z),i=i+Math.imul(F,q)|0,a=(a=a+Math.imul(F,H)|0)+Math.imul(D,q)|0,r=r+Math.imul(D,H)|0,i=i+Math.imul(_,V)|0,a=(a=a+Math.imul(_,G)|0)+Math.imul(A,V)|0,r=r+Math.imul(A,G)|0,i=i+Math.imul(S,X)|0,a=(a=a+Math.imul(S,J)|0)+Math.imul(k,X)|0,r=r+Math.imul(k,J)|0,i=i+Math.imul(E,Q)|0,a=(a=a+Math.imul(E,ee)|0)+Math.imul(w,Q)|0,r=r+Math.imul(w,ee)|0,i=i+Math.imul(b,ne)|0,a=(a=a+Math.imul(b,ie)|0)+Math.imul(y,ne)|0,r=r+Math.imul(y,ie)|0,i=i+Math.imul(p,re)|0,a=(a=a+Math.imul(p,se)|0)+Math.imul(m,re)|0,r=r+Math.imul(m,se)|0;var Se=(u+(i=i+Math.imul(d,le)|0)|0)+((8191&(a=(a=a+Math.imul(d,ue)|0)+Math.imul(h,le)|0))<<13)|0;u=((r=r+Math.imul(h,ue)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(j,U),a=(a=Math.imul(j,Z))+Math.imul(B,U)|0,r=Math.imul(B,Z),i=i+Math.imul(I,q)|0,a=(a=a+Math.imul(I,H)|0)+Math.imul(P,q)|0,r=r+Math.imul(P,H)|0,i=i+Math.imul(F,V)|0,a=(a=a+Math.imul(F,G)|0)+Math.imul(D,V)|0,r=r+Math.imul(D,G)|0,i=i+Math.imul(_,X)|0,a=(a=a+Math.imul(_,J)|0)+Math.imul(A,X)|0,r=r+Math.imul(A,J)|0,i=i+Math.imul(S,Q)|0,a=(a=a+Math.imul(S,ee)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,ee)|0,i=i+Math.imul(E,ne)|0,a=(a=a+Math.imul(E,ie)|0)+Math.imul(w,ne)|0,r=r+Math.imul(w,ie)|0,i=i+Math.imul(b,re)|0,a=(a=a+Math.imul(b,se)|0)+Math.imul(y,re)|0,r=r+Math.imul(y,se)|0,i=i+Math.imul(p,le)|0,a=(a=a+Math.imul(p,ue)|0)+Math.imul(m,le)|0,r=r+Math.imul(m,ue)|0;var ke=(u+(i=i+Math.imul(d,de)|0)|0)+((8191&(a=(a=a+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((r=r+Math.imul(h,he)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(N,U),a=(a=Math.imul(N,Z))+Math.imul(R,U)|0,r=Math.imul(R,Z),i=i+Math.imul(j,q)|0,a=(a=a+Math.imul(j,H)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,H)|0,i=i+Math.imul(I,V)|0,a=(a=a+Math.imul(I,G)|0)+Math.imul(P,V)|0,r=r+Math.imul(P,G)|0,i=i+Math.imul(F,X)|0,a=(a=a+Math.imul(F,J)|0)+Math.imul(D,X)|0,r=r+Math.imul(D,J)|0,i=i+Math.imul(_,Q)|0,a=(a=a+Math.imul(_,ee)|0)+Math.imul(A,Q)|0,r=r+Math.imul(A,ee)|0,i=i+Math.imul(S,ne)|0,a=(a=a+Math.imul(S,ie)|0)+Math.imul(k,ne)|0,r=r+Math.imul(k,ie)|0,i=i+Math.imul(E,re)|0,a=(a=a+Math.imul(E,se)|0)+Math.imul(w,re)|0,r=r+Math.imul(w,se)|0,i=i+Math.imul(b,le)|0,a=(a=a+Math.imul(b,ue)|0)+Math.imul(y,le)|0,r=r+Math.imul(y,ue)|0,i=i+Math.imul(p,de)|0,a=(a=a+Math.imul(p,he)|0)+Math.imul(m,de)|0,r=r+Math.imul(m,he)|0;var Me=(u+(i=i+Math.imul(d,pe)|0)|0)+((8191&(a=(a=a+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((r=r+Math.imul(h,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(N,q),a=(a=Math.imul(N,H))+Math.imul(R,q)|0,r=Math.imul(R,H),i=i+Math.imul(j,V)|0,a=(a=a+Math.imul(j,G)|0)+Math.imul(B,V)|0,r=r+Math.imul(B,G)|0,i=i+Math.imul(I,X)|0,a=(a=a+Math.imul(I,J)|0)+Math.imul(P,X)|0,r=r+Math.imul(P,J)|0,i=i+Math.imul(F,Q)|0,a=(a=a+Math.imul(F,ee)|0)+Math.imul(D,Q)|0,r=r+Math.imul(D,ee)|0,i=i+Math.imul(_,ne)|0,a=(a=a+Math.imul(_,ie)|0)+Math.imul(A,ne)|0,r=r+Math.imul(A,ie)|0,i=i+Math.imul(S,re)|0,a=(a=a+Math.imul(S,se)|0)+Math.imul(k,re)|0,r=r+Math.imul(k,se)|0,i=i+Math.imul(E,le)|0,a=(a=a+Math.imul(E,ue)|0)+Math.imul(w,le)|0,r=r+Math.imul(w,ue)|0,i=i+Math.imul(b,de)|0,a=(a=a+Math.imul(b,he)|0)+Math.imul(y,de)|0,r=r+Math.imul(y,he)|0;var _e=(u+(i=i+Math.imul(p,pe)|0)|0)+((8191&(a=(a=a+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((r=r+Math.imul(m,me)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(N,V),a=(a=Math.imul(N,G))+Math.imul(R,V)|0,r=Math.imul(R,G),i=i+Math.imul(j,X)|0,a=(a=a+Math.imul(j,J)|0)+Math.imul(B,X)|0,r=r+Math.imul(B,J)|0,i=i+Math.imul(I,Q)|0,a=(a=a+Math.imul(I,ee)|0)+Math.imul(P,Q)|0,r=r+Math.imul(P,ee)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(D,ne)|0,r=r+Math.imul(D,ie)|0,i=i+Math.imul(_,re)|0,a=(a=a+Math.imul(_,se)|0)+Math.imul(A,re)|0,r=r+Math.imul(A,se)|0,i=i+Math.imul(S,le)|0,a=(a=a+Math.imul(S,ue)|0)+Math.imul(k,le)|0,r=r+Math.imul(k,ue)|0,i=i+Math.imul(E,de)|0,a=(a=a+Math.imul(E,he)|0)+Math.imul(w,de)|0,r=r+Math.imul(w,he)|0;var Ae=(u+(i=i+Math.imul(b,pe)|0)|0)+((8191&(a=(a=a+Math.imul(b,me)|0)+Math.imul(y,pe)|0))<<13)|0;u=((r=r+Math.imul(y,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(N,X),a=(a=Math.imul(N,J))+Math.imul(R,X)|0,r=Math.imul(R,J),i=i+Math.imul(j,Q)|0,a=(a=a+Math.imul(j,ee)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,ee)|0,i=i+Math.imul(I,ne)|0,a=(a=a+Math.imul(I,ie)|0)+Math.imul(P,ne)|0,r=r+Math.imul(P,ie)|0,i=i+Math.imul(F,re)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(D,re)|0,r=r+Math.imul(D,se)|0,i=i+Math.imul(_,le)|0,a=(a=a+Math.imul(_,ue)|0)+Math.imul(A,le)|0,r=r+Math.imul(A,ue)|0,i=i+Math.imul(S,de)|0,a=(a=a+Math.imul(S,he)|0)+Math.imul(k,de)|0,r=r+Math.imul(k,he)|0;var Ce=(u+(i=i+Math.imul(E,pe)|0)|0)+((8191&(a=(a=a+Math.imul(E,me)|0)+Math.imul(w,pe)|0))<<13)|0;u=((r=r+Math.imul(w,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(N,Q),a=(a=Math.imul(N,ee))+Math.imul(R,Q)|0,r=Math.imul(R,ee),i=i+Math.imul(j,ne)|0,a=(a=a+Math.imul(j,ie)|0)+Math.imul(B,ne)|0,r=r+Math.imul(B,ie)|0,i=i+Math.imul(I,re)|0,a=(a=a+Math.imul(I,se)|0)+Math.imul(P,re)|0,r=r+Math.imul(P,se)|0,i=i+Math.imul(F,le)|0,a=(a=a+Math.imul(F,ue)|0)+Math.imul(D,le)|0,r=r+Math.imul(D,ue)|0,i=i+Math.imul(_,de)|0,a=(a=a+Math.imul(_,he)|0)+Math.imul(A,de)|0,r=r+Math.imul(A,he)|0;var Fe=(u+(i=i+Math.imul(S,pe)|0)|0)+((8191&(a=(a=a+Math.imul(S,me)|0)+Math.imul(k,pe)|0))<<13)|0;u=((r=r+Math.imul(k,me)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(N,ne),a=(a=Math.imul(N,ie))+Math.imul(R,ne)|0,r=Math.imul(R,ie),i=i+Math.imul(j,re)|0,a=(a=a+Math.imul(j,se)|0)+Math.imul(B,re)|0,r=r+Math.imul(B,se)|0,i=i+Math.imul(I,le)|0,a=(a=a+Math.imul(I,ue)|0)+Math.imul(P,le)|0,r=r+Math.imul(P,ue)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,he)|0)+Math.imul(D,de)|0,r=r+Math.imul(D,he)|0;var De=(u+(i=i+Math.imul(_,pe)|0)|0)+((8191&(a=(a=a+Math.imul(_,me)|0)+Math.imul(A,pe)|0))<<13)|0;u=((r=r+Math.imul(A,me)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(N,re),a=(a=Math.imul(N,se))+Math.imul(R,re)|0,r=Math.imul(R,se),i=i+Math.imul(j,le)|0,a=(a=a+Math.imul(j,ue)|0)+Math.imul(B,le)|0,r=r+Math.imul(B,ue)|0,i=i+Math.imul(I,de)|0,a=(a=a+Math.imul(I,he)|0)+Math.imul(P,de)|0,r=r+Math.imul(P,he)|0;var Te=(u+(i=i+Math.imul(F,pe)|0)|0)+((8191&(a=(a=a+Math.imul(F,me)|0)+Math.imul(D,pe)|0))<<13)|0;u=((r=r+Math.imul(D,me)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(N,le),a=(a=Math.imul(N,ue))+Math.imul(R,le)|0,r=Math.imul(R,ue),i=i+Math.imul(j,de)|0,a=(a=a+Math.imul(j,he)|0)+Math.imul(B,de)|0,r=r+Math.imul(B,he)|0;var Ie=(u+(i=i+Math.imul(I,pe)|0)|0)+((8191&(a=(a=a+Math.imul(I,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((r=r+Math.imul(P,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(N,de),a=(a=Math.imul(N,he))+Math.imul(R,de)|0,r=Math.imul(R,he);var Pe=(u+(i=i+Math.imul(j,pe)|0)|0)+((8191&(a=(a=a+Math.imul(j,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((r=r+Math.imul(B,me)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Oe=(u+(i=Math.imul(N,pe))|0)+((8191&(a=(a=Math.imul(N,me))+Math.imul(R,pe)|0))<<13)|0;return u=((r=Math.imul(R,me))+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=be,l[2]=ye,l[3]=ve,l[4]=Ee,l[5]=we,l[6]=xe,l[7]=Se,l[8]=ke,l[9]=Me,l[10]=_e,l[11]=Ae,l[12]=Ce,l[13]=Fe,l[14]=De,l[15]=Te,l[16]=Ie,l[17]=Pe,l[18]=Oe,0!==u&&(l[19]=u,n.length++),n};function b(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,a=0,r=0;r<n.length-1;r++){var s=a;a=0;for(var o=67108863&i,l=Math.min(r,t.length-1),u=Math.max(0,r-e.length+1);u<=l;u++){var c=r-u,d=(0|e.words[c])*(0|t.words[u]),h=67108863&d;o=67108863&(h=h+o|0),a+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[r]=o,i=s,s=a}return 0!==i?n.words[r]=i:n.length--,n._strip()}function y(e,t,n){return b(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(g=m),r.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?m(this,e,t):n<1024?b(this,e,t):y(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=r.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,a=0;a<t;a++)i|=(1&e)<<t-a-1,e>>=1;return i},v.prototype.permute=function(e,t,n,i,a,r){for(var s=0;s<r;s++)i[s]=t[e[s]],a[s]=n[e[s]]},v.prototype.transform=function(e,t,n,i,a,r){this.permute(r,e,t,n,i,a);for(var s=1;s<a;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),c=0;c<a;c+=o)for(var d=l,h=u,f=0;f<s;f++){var p=n[c+f],m=i[c+f],g=n[c+f+s],b=i[c+f+s],y=d*g-h*b;b=d*b+h*g,g=y,n[c+f]=p+g,i[c+f]=m+b,n[c+f+s]=p-g,i[c+f+s]=m-b,f!==o&&(y=l*d-u*h,h=l*h+u*d,d=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=e[i];e[i]=e[n-i-1],e[n-i-1]=a,a=t[i],t[i]=-t[n-i-1],t[n-i-1]=-a}},v.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var a=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&a,n=a<67108864?0:a/67108864|0}return e},v.prototype.convert13b=function(e,t,n,a){for(var r=0,s=0;s<t;s++)r+=0|e[s],n[2*s]=8191&r,r>>>=13,n[2*s+1]=8191&r,r>>>=13;for(s=2*t;s<a;++s)n[s]=0;i(0===r),i(!(-8192&r))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(i),r=this.stub(i),s=new Array(i),o=new Array(i),l=new Array(i),u=new Array(i),c=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,u,i),this.transform(s,r,o,l,i,a),this.transform(u,r,c,d,i,a);for(var f=0;f<i;f++){var p=o[f]*c[f]-l[f]*d[f];l[f]=o[f]*d[f]+l[f]*c[f],o[f]=p}return this.conjugate(o,l,i),this.transform(o,l,h,r,i,a),this.conjugate(h,r,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),y(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*e,s=(67108863&r)+(67108863&n);n>>=26,n+=r/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),t?this.ineg():this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,a=n%26;t[n]=e.words[i]>>>a&1}return t}(e);if(0===t.length)return new r(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var a=n.sqr();i<t.length;i++,a=a.sqr())0!==t[i]&&(n=n.mul(a));return n},r.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,a=(e-n)/26,r=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&r,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this._strip()},r.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,n){var a;i("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var r=e%26,s=Math.min((e-r)/26,this.length),o=67108863^67108863>>>r<<r,l=n;if(a-=s,a=Math.max(0,a),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=a);u--){var d=0|this.words[u];this.words[u]=c<<26-r|d>>>r,c=d&o}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,a=1<<t;return!(this.length<=n||!(this.words[n]&a))},r.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this._strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,n){var a,r,s=e.length+n;this._expand(s);var o=0;for(a=0;a<e.length;a++){r=(0|this.words[a+n])+o;var l=(0|e.words[a])*t;o=((r-=67108863&l)>>26)-(l/67108864|0),this.words[a+n]=67108863&r}for(;a<this.length-n;a++)o=(r=(0|this.words[a+n])+o)>>26,this.words[a+n]=67108863&r;if(0===o)return this._strip();for(i(-1===o),o=0,a=0;a<this.length;a++)o=(r=-(0|this.words[a])+o)>>26,this.words[a]=67108863&r;return this.negative=1,this._strip()},r.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),a=e,s=0|a.words[a.length-1];0!=(n=26-this._countBits(s))&&(a=a.ushln(n),i.iushln(n),s=0|a.words[a.length-1]);var o,l=i.length-a.length;if("mod"!==t){(o=new r(null)).length=l+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var c=i.clone()._ishlnsubmul(a,1,l);0===c.negative&&(i=c,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(a,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);o&&(o.words[d]=h)}return o&&o._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:o||null,mod:i}},r.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):this.negative&e.negative?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),a=e.andln(1),r=n.cmp(i);return r<0||1===a&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=(1<<26)%e,a=0,r=this.length-1;r>=0;r--)a=(n*a+(0|this.words[r]))%e;return t?-a:a},r.prototype.modn=function(e){return this.modrn(e)},r.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var r=(0|this.words[a])+67108864*n;this.words[a]=r/e|0,n=r%e}return this._strip(),t?this.ineg():this},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new r(1),s=new r(0),o=new r(0),l=new r(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;!(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(c),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var p=0,m=1;!(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(c),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(u)}},r.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new r(1),o=new r(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;!(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;!(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=t.cmp(n);if(a<0){var r=t;t=n,n=r}else if(0===a||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,a=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=a,this;for(var r=a,s=n;0!==r&&s<this.length;s++){var o=0|this.words[s];r=(o+=r)>>>26,o&=67108863,this.words[s]=o}return 0!==r&&(this.words[s]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|e.words[n];if(i!==a){i<a?t=-1:i>a&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new _(e)},r.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},a(x,w),x.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),a=0;a<i;a++)t.words[a]=e.words[a];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var r=e.words[9];for(t.words[t.length++]=r&n,a=10;a<e.length;a++){var s=0|e.words[a];e.words[a-10]=(s&n)<<4|r>>>22,r=s}r>>>=22,e.words[a-10]=r,0===r&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(S,w),a(k,w),a(M,w),M.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,a=67108863&i;i>>>=26,e.words[n]=a,t=i}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(E[e])return E[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new S;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new M}return E[e]=t,t},_.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){i(!(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},_.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new r(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);i(!a.isZero());var o=new r(1).toRed(this),l=o.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new r(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var d=this.pow(c,a),h=this.pow(e,a.addn(1).iushrn(1)),f=this.pow(e,a),p=s;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();i(g<p);var b=this.pow(d,new r(1).iushln(p-g-1));h=h.redMul(b),d=b.redSqr(),f=f.redMul(d),p=g}return h},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new r(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var a=n[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],c=l-1;c>=0;c--){var d=u>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4==++o||0===i&&0===c)&&(a=this.mul(a,n[s]),o=0,s=0)):o=0}l=26}return a},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new A(e)},a(A,_),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),r=a;return a.cmp(this.m)>=0?r=a.isub(this.m):a.cmpn(0)<0&&(r=a.iadd(this.m)),r._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(235)(e))},function(e,t,n){"use strict";const i=t;i.bignum=n(127),i.define=n(559).define,i.base=n(562),i.constants=n(563),i.decoders=n(334),i.encoders=n(332)},function(e,t,n){"use strict";const i=t;i.der=n(333),i.pem=n(560)},function(e,t,n){"use strict";const i=n(118),a=n(242).Buffer,r=n(243),s=n(245);function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){r.call(this,"der",e)}function u(e){return e<10?"0"+e:e}e.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},i(l,r),l.prototype._encodeComposite=function(e,t,n,i){const r=function(e,t,n,i){let a;if("seqof"===e?e="seq":"setof"===e&&(e="set"),s.tagByName.hasOwnProperty(e))a=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return i.error("Unknown tag: "+e);a=e}return a>=31?i.error("Multi-octet tag encoding unsupported"):(t||(a|=32),a|=s.tagClassByName[n||"universal"]<<6,a)}(e,t,n,this.reporter);if(i.length<128){const e=a.alloc(2);return e[0]=r,e[1]=i.length,this._createEncoderBuffer([e,i])}let o=1;for(let e=i.length;e>=256;e>>=8)o++;const l=a.alloc(2+o);l[0]=r,l[1]=128|o;for(let e=1+o,t=i.length;t>0;e--,t>>=8)l[e]=255&t;return this._createEncoderBuffer([l,i])},l.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=a.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},l.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let i=0;for(let t=0;t<e.length;t++){let n=e[t];for(i++;n>=128;n>>=7)i++}const r=a.alloc(i);let s=r.length-1;for(let t=e.length-1;t>=0;t--){let n=e[t];for(r[s--]=127&n;(n>>=7)>0;)r[s--]=128|127&n}return this._createEncoderBuffer(r)},l.prototype._encodeTime=function(e,t){let n;const i=new Date(e);return"gentime"===t?n=[u(i.getUTCFullYear()),u(i.getUTCMonth()+1),u(i.getUTCDate()),u(i.getUTCHours()),u(i.getUTCMinutes()),u(i.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[u(i.getUTCFullYear()%100),u(i.getUTCMonth()+1),u(i.getUTCDate()),u(i.getUTCHours()),u(i.getUTCMinutes()),u(i.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!a.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=a.from(t)}if(a.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=a.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const i=new Array(n);for(let t=i.length-1;t>=0;t--)i[t]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(a.from(i))},l.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},l.prototype._skipDefault=function(e,t,n){const i=this._baseState;let a;if(null===i.default)return!1;const r=e.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,t,n).join()),r.length!==i.defaultBuffer.length)return!1;for(a=0;a<r.length;a++)if(r[a]!==i.defaultBuffer[a])return!1;return!0}},function(e,t,n){"use strict";const i=t;i.der=n(335),i.pem=n(561)},function(e,t,n){"use strict";const i=n(118),a=n(127),r=n(179).DecoderBuffer,s=n(243),o=n(245);function l(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new u,this.tree._init(e.body)}function u(e){s.call(this,"der",e)}function c(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const i=o.tagClass[n>>6],a=!(32&n);if(31&~n)n&=31;else{let i=n;for(n=0;!(128&~i);){if(i=e.readUInt8(t),e.isError(i))return i;n<<=7,n|=127&i}}return{cls:i,primitive:a,tag:n,tagStr:o.tag[n]}}function d(e,t,n){let i=e.readUInt8(n);if(e.isError(i))return i;if(!t&&128===i)return null;if(!(128&i))return i;const a=127&i;if(a>4)return e.error("length octect is too long");i=0;for(let t=0;t<a;t++){i<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;i|=t}return i}e.exports=l,l.prototype.decode=function(e,t){return r.isDecoderBuffer(e)||(e=new r(e,t)),this.tree._decode(e,t)},i(u,s),u.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const i=e.save(),a=c(e,'Failed to peek tag: "'+t+'"');return e.isError(a)?a:(e.restore(i),a.tag===t||a.tagStr===t||a.tagStr+"of"===t||n)},u.prototype._decodeTag=function(e,t,n){const i=c(e,'Failed to decode tag of "'+t+'"');if(e.isError(i))return i;let a=d(e,i.primitive,'Failed to get length of "'+t+'"');if(e.isError(a))return a;if(!n&&i.tag!==t&&i.tagStr!==t&&i.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(i.primitive||null!==a)return e.skip(a,'Failed to match body of: "'+t+'"');const r=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(a=e.offset-r.offset,e.restore(r),e.skip(a,'Failed to match body of: "'+t+'"'))},u.prototype._skipUntilEnd=function(e,t){for(;;){const n=c(e,t);if(e.isError(n))return n;const i=d(e,n.primitive,t);if(e.isError(i))return i;let a;if(a=n.primitive||null!==i?e.skip(i):this._skipUntilEnd(e,t),e.isError(a))return a;if("end"===n.tagStr)break}},u.prototype._decodeList=function(e,t,n,i){const a=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const r=n.decode(e,"der",i);if(e.isError(r)&&t)break;a.push(r)}return a},u.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},u.prototype._decodeObjid=function(e,t,n){let i;const a=[];let r=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),r<<=7,r|=127&s,128&s||(a.push(r),r=0);128&s&&a.push(r);const o=a[0]/40|0,l=a[0]%40;if(i=n?a:[o,l].concat(a.slice(1)),t){let e=t[i.join(" ")];void 0===e&&(e=t[i.join(".")]),void 0!==e&&(i=e)}return i},u.prototype._decodeTime=function(e,t){const n=e.raw().toString();let i,a,r,s,o,l;if("gentime"===t)i=0|n.slice(0,4),a=0|n.slice(4,6),r=0|n.slice(6,8),s=0|n.slice(8,10),o=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");i=0|n.slice(0,2),a=0|n.slice(2,4),r=0|n.slice(4,6),s=0|n.slice(6,8),o=0|n.slice(8,10),l=0|n.slice(10,12),i=i<70?2e3+i:1900+i}return Date.UTC(i,a-1,r,s,o,l,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},u.prototype._decodeInt=function(e,t){const n=e.raw();let i=new a(n);return t&&(i=t[i.toString(10)]||i),i},u.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,n){(function(t){var i=n(173);function a(e){var n=new t(4);return n.writeUInt32BE(e,0),n}e.exports=function(e,n){for(var r,s=new t(""),o=0;s.length<n;)r=a(o++),s=t.concat([s,i("sha1").update(e).update(r).digest()]);return s.slice(0,n)}}).call(this,n(86).Buffer)},function(e,t){e.exports=function(e,t){for(var n=e.length,i=-1;++i<n;)e[i]^=t[i];return e}},function(e,t,n){(function(t){var i=n(127);e.exports=function(e,n){return new t(e.toRed(i.mont(n.modulus)).redPow(new i(n.publicExponent)).fromRed().toArray())}}).call(this,n(86).Buffer)},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var i=n(7),a=n(5),r=n(0),s=n(2);const o=(e={})=>Object(i.useQuery)(["useGetUninstallTokens",e],(()=>Object(s.b)({method:"get",path:a.nb.getListPath(),version:r.o.public.v1,query:e}))),l=e=>Object(i.useQuery)(["useGetUninstallToken",e],(()=>Object(s.b)({method:"get",path:a.nb.getInfoPath(e),version:r.o.public.v1}))),u=e=>Object(s.a)({method:"get",path:a.nb.getInfoPath(e),version:r.o.public.v1})},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(6),a=n(4),r=n(1),s=n.n(r);const o=a.i18n.translate("xpack.fleet.uninstallTokenList.emptyPolicyNameHint",{defaultMessage:"This token's related Agent policy has already been deleted, so the policy name is unavailable."}),l=()=>s.a.createElement(s.a.Fragment,null,"- ",s.a.createElement(i.EuiToolTip,{content:o},s.a.createElement(i.EuiIcon,{type:"questionInCircle",color:"subdued","aria-label":o,"data-test-subj":"emptyPolicyNameHint"})))},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(6),a=n(4),r=n(13),s=n(1),o=n.n(s);const l=({isLoading:e,agentPolicyMultiOptions:t,selectedPolicyIds:n,setSelectedPolicyIds:l,selectedAgentPolicies:u})=>{const c=Object(s.useMemo)((()=>t.filter((e=>n.includes(e.key)))),[t,n]),d=Object(s.useCallback)((e=>{l(Object(r.uniq)([...u.filter((e=>e.is_managed)).map((e=>e.id)),...e]))}),[u,l]);return o.a.createElement(i.EuiComboBox,{"aria-label":"Select Multiple Agent Policies","data-test-subj":"agentPolicyMultiSelect",placeholder:a.i18n.translate("xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyMultiPlaceholderText",{defaultMessage:"Select agent policies to add this integration to"}),options:t,selectedOptions:c,onChange:e=>d(e.map((e=>e.key))),isClearable:!0,isLoading:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(1),a=n.n(i),r=n(6),s=n(12),o=n(19),l=n(0),u=n(5),c=n(17);function d(e){const{data:t,error:n,isLoading:d}=Object(c.Mb)({page:1,perPage:o.SO_SEARCH_LIMIT,sortField:"name",sortOrder:"asc",noAgentCount:!0,full:!1}),h=Object(i.useMemo)((()=>(null==t?void 0:t.items.filter((e=>!e.is_managed)))||[]),[null==t?void 0:t.items]),{data:f,isLoading:p}=Object(c.Yb)(),{data:m,isLoading:g}=Object(c.ac)({page:1,perPage:o.SO_SEARCH_LIMIT,kuery:`${o.PACKAGE_POLICY_SAVED_OBJECT_TYPE}.package.name: ${null==e?void 0:e.name}`}),b=Object(i.useMemo)((()=>null==m?void 0:m.items.reduce(((e,t)=>(t.policy_ids.forEach((t=>{e[t]=!0})),e)),{})),[null==m?void 0:m.items]),{getDataOutputForPolicy:y}=Object(i.useMemo)((()=>{var e,t;const n=(null!==(e=null==f?void 0:f.items)&&void 0!==e?e:[]).find((e=>e.is_default)),i=(null!==(t=null==f?void 0:f.items)&&void 0!==t?t:[]).reduce(((e,t)=>(e[t.id]=t,e)),{});return{getDataOutputForPolicy:e=>e.data_output_id?i[e.data_output_id]:n}}),[f]),v=Object(i.useMemo)((()=>e?h.map((t=>{var n;const i=Object(u.X)(e)&&(null==b?void 0:b[t.id]),c=(null==e?void 0:e.name)===o.FLEET_APM_PACKAGE&&(null===(n=y(t))||void 0===n?void 0:n.type)===l.Xb.Logstash;return{inputDisplay:a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiText,{size:"s"},t.name),c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(r.EuiSpacer,{size:"xs"}),a.a.createElement(r.EuiText,{size:"s"},a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyDisabledAPMLogstashOuputText",defaultMessage:"Logstash output for integrations is not supported with APM"})))),value:t.id,disabled:i||c,"data-test-subj":"agentPolicyItem"}})):[]),[e,h,b,y]),E=Object(i.useMemo)((()=>!e||p||d||g?[]:h.map((t=>{var n;const i=Object(u.X)(e)&&(null==b?void 0:b[t.id]),c=(null==e?void 0:e.name)===o.FLEET_APM_PACKAGE&&(null===(n=y(t))||void 0===n?void 0:n.type)===l.Xb.Logstash;return{append:c?a.a.createElement(r.EuiToolTip,{content:a.a.createElement(s.FormattedMessage,{id:"xpack.fleet.createPackagePolicy.StepSelectPolicy.agentPolicyDisabledAPMLogstashOuputText",defaultMessage:"Logstash output for integrations is not supported with APM"})},a.a.createElement(r.EuiIcon,{size:"s",type:"warningFilled"})):null,key:t.id,label:t.name,disabled:i||c,"data-test-subj":"agentPolicyMultiItem"}}))),[e,h,b,y,p,d,g]);return{agentPoliciesError:n,isLoading:p||d||g,agentPolicyOptions:v,agentPolicies:h,agentPolicyMultiOptions:E}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"f",(function(){return _})),n.d(t,"g",(function(){return C}));var i=n(20),a=n.n(i),r=n(1),s=n.n(r),o=n(6),l=n(4),u=n(12),c=n(17),d=n(151),h=n(58),f=n.n(h);const p=({selectedFleetServerHost:e,setFleetServerHost:t,fleetServerHosts:n})=>{const i=Object(h.useTheme)(),a=Object(r.useMemo)((()=>[...n.map((e=>({inputDisplay:`${e.name} (${e.host_urls[0]})`,value:e.id}))),{icon:s.a.createElement(o.EuiIcon,{type:"plus",size:"m",color:"primary"}),inputDisplay:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostBtn",defaultMessage:"Add new Fleet Server Hosts"}),dropdownDisplay:s.a.createElement(o.EuiText,{size:"relative",color:i.eui.euiColorPrimary},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostBtn",defaultMessage:"Add new Fleet Server Hosts"})),"data-test-subj":"fleetServerSetup.addNewHostBtn",value:"@@##ADD_FLEET_SERVER_HOST##@@"}]),[n,i.eui.euiColorPrimary]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSuperSelect,{fullWidth:!0,"data-test-subj":"fleetServerSetup.fleetServerHostsSelect",prepend:s.a.createElement(o.EuiText,{size:"relative",color:""},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetServerHostsLabel",defaultMessage:"Fleet Server Hosts"})),onChange:e=>t(n.find((t=>t.id===e))),valueOfSelected:null==e?void 0:e.id,options:a}),s.a.createElement(o.EuiSpacer,{size:"m"}))},m=({fleetServerHostForm:e,disabled:t,onClose:n})=>({title:l.i18n.translate("xpack.fleet.fleetServerSetup.addFleetServerHostStepTitle",{defaultMessage:"Add your Fleet Server host"}),status:t?"disabled":void 0,children:t?null:s.a.createElement(g,{fleetServerHostForm:e,onClose:n})}),g=({fleetServerHostForm:e,onClose:t})=>{const{setFleetServerHost:n,fleetServerHost:i,handleSubmitForm:h,fleetServerHosts:f,error:m,inputs:g}=e,[b,y]=Object(r.useState)(!1),[v,E]=Object(r.useState)(),{notifications:w}=Object(c.sc)(),{getHref:x}=Object(c.jc)(),S=Object(r.useCallback)((async()=>{try{E(void 0),y(!0);const e=await h();e&&(n(e),E(e))}catch(e){w.toasts.addError(e,{title:l.i18n.translate("xpack.fleet.fleetServerSetup.errorAddingFleetServerHostTitle",{defaultMessage:"Error adding Fleet Server host"})})}finally{y(!1)}}),[h,n,w.toasts]);return s.a.createElement(o.EuiForm,{onSubmit:S},s.a.createElement(o.EuiText,null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostStepDescription",defaultMessage:"First, set the public IP or host name and port that agents will use to reach Fleet Server. It uses port {port} by default {toolTip}. We'll then generate a policy for you automatically. ",values:{port:s.a.createElement(o.EuiCode,null,"8220"),toolTip:s.a.createElement(o.EuiIconTip,{iconProps:{className:"eui-alignTop"},content:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.getStartedInstructionsPortTooltips",defaultMessage:"This can only be set during Fleet Server installation."}),position:"right"})}})),s.a.createElement(o.EuiSpacer,{size:"m"}),i?s.a.createElement(p,{setFleetServerHost:n,selectedFleetServerHost:i,fleetServerHosts:f}):null,i?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFormRow,a()({fullWidth:!0,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.nameInputLabel",defaultMessage:"Name"})},g.nameInput.formRowProps),s.a.createElement(o.EuiFieldText,a()({"data-test-subj":"fleetServerSetup.nameInput",fullWidth:!0,placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.nameInputPlaceholder",{defaultMessage:"Specify name"})},g.nameInput.props))),s.a.createElement(o.EuiFormRow,{fullWidth:!0,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.hostUrlLabel",defaultMessage:"URL"})},s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,a()({"data-test-subj":"fleetServerSetup.multiRowInput"},g.hostUrlsInput.props,{placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.fleetServerHostsInputPlaceholder",{defaultMessage:"Specify host URL"}),isUrl:!0})),m&&s.a.createElement(o.EuiFormErrorText,null,m))),f.length>0?s.a.createElement(o.EuiFormRow,a()({fullWidth:!0},g.isDefaultInput.formRowProps),s.a.createElement(o.EuiSwitch,a()({"data-test-subj":"fleetServerHostsFlyout.isDefaultSwitch"},g.isDefaultInput.props,{disabled:!1,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.defaultOutputSwitchLabel",defaultMessage:"Make this Fleet server the default one."})}))):null,s.a.createElement(o.EuiButton,{isLoading:b,onClick:S,"data-test-subj":"fleetServerAddHostBtn"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostButton",defaultMessage:"Add host"}))),v&&s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiCallOut,{iconType:"check",color:"success",title:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostSuccessTitle",defaultMessage:"Added Fleet Server host"})},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.addFleetServerHostSuccessText",defaultMessage:"Added {host}. You can edit your Fleet Server hosts in {fleetSettingsLink}.",values:{host:v.host_urls[0],fleetSettingsLink:s.a.createElement(o.EuiLink,{href:x("settings"),onClick:t},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetSettingsLink",defaultMessage:"Fleet Settings"}))}}))))};function b({disabled:e,hasRecentlyEnrolledFleetServers:t}){return{title:t?l.i18n.translate("xpack.fleet.fleetServerFlyout.confirmConnectionSuccessTitle",{defaultMessage:"Fleet Server connected"}):l.i18n.translate("xpack.fleet.fleetServerFlyout.confirmConnectionTitle",{defaultMessage:"Confirm connection"}),status:t?"complete":"disabled",children:!e&&s.a.createElement(y,{hasRecentlyEnrolledFleetServers:t})}}const y=({hasRecentlyEnrolledFleetServers:e})=>{const t=Object(c.Lb)(),n=Object(c.Kb)();return e?s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.connectionSuccessful",defaultMessage:"You can now continue enrolling agents with Fleet."})),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiButton,{color:"primary",onClick:()=>{n.forceDisplayInstructions=!1,t.closeFleetServerFlyout(),t.openEnrollmentFlyout()},"data-test-subj":"fleetServerFlyoutContinueEnrollingButton"},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.continueEnrollingButton",defaultMessage:"Continue enrolling Elastic Agent"}))):s.a.createElement(o.EuiLoadingSpinner,{size:"m"})};var v=n(219);f()(o.EuiFlexGroup).withConfig({displayName:"ContentWrapper",componentId:"sc-1uyozzx-0"})(["height:100%;margin:0 auto;max-width:800px;"]);const E=({disabled:e=!1,serviceToken:t,generateServiceToken:n,isLoadingServiceToken:i})=>({title:l.i18n.translate("xpack.fleet.fleetServerSetup.stepGenerateServiceTokenTitle",{defaultMessage:"Generate a service token"}),status:e?"disabled":void 0,children:!e&&s.a.createElement(v.a,{serviceToken:t,generateServiceToken:n,isLoadingServiceToken:i})});function w(e){return{title:l.i18n.translate("xpack.fleet.fleetServerFlyout.getStartedTitle",{defaultMessage:"Get started with Fleet Server"}),status:"success"===e.status?"complete":"current",children:s.a.createElement(x,e)}}const x=({fleetServerHosts:e,fleetServerHost:t,setFleetServerHost:n,status:i,error:r,inputs:h,submit:f,onClose:m})=>{const{getHref:g}=Object(c.jc)(),b=Object(c.yb)(),y=b.fleet.allAgentPolicies&&b.integrations.writeIntegrationPolicies,v=0===e.length&&!y;return"success"===i?s.a.createElement(o.EuiCallOut,{color:"success",iconType:"check",title:l.i18n.translate("xpack.fleet.fleetServerFlyout.generateFleetServerPolicySuccessTitle",{defaultMessage:"Fleet Server policy created."})},s.a.createElement(o.EuiText,null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.generateFleetServerPolicySuccessInstructions",defaultMessage:"Fleet server policy and service token have been generated. Host configured at {hostUrl}. You can edit your Fleet Server hosts in {fleetSettingsLink}.",values:{hostUrl:s.a.createElement(o.EuiCode,null,null==t?void 0:t.host_urls[0]),fleetSettingsLink:s.a.createElement(o.EuiLink,{href:g("settings"),onClick:m},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.fleetSettingsLink",defaultMessage:"Fleet Settings"}))}}))):s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.getStartedInstructions",defaultMessage:"First, set the public IP or host name and port that agents will use to reach Fleet Server. It uses port {port} by default {toolTip}. We'll then generate a policy for you automatically.",values:{port:s.a.createElement(o.EuiCode,null,"8220"),toolTip:s.a.createElement(o.EuiIconTip,{iconProps:{className:"eui-alignTop"},content:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.getStartedInstructionsPortTooltips",defaultMessage:"This can only be set during Fleet Server installation."}),position:"right"})}})),s.a.createElement(o.EuiSpacer,{size:"m"}),t?s.a.createElement(p,{setFleetServerHost:n,selectedFleetServerHost:t,fleetServerHosts:e}):null,s.a.createElement(o.EuiForm,{onSubmit:f},t?null:s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiFormRow,a()({fullWidth:!0,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.nameInputLabel",defaultMessage:"Name"})},h.nameInput.formRowProps),s.a.createElement(o.EuiFieldText,a()({"data-test-subj":"fleetServerSetup.nameInput",fullWidth:!0,placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.nameInputPlaceholder",{defaultMessage:"Specify name"})},h.nameInput.props,{disabled:v}))),s.a.createElement(o.EuiFormRow,{fullWidth:!0,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.hostUrlLabel",defaultMessage:"URL"})},s.a.createElement(s.a.Fragment,null,s.a.createElement(d.a,a()({"data-test-subj":"fleetServerSetup.multiRowInput"},h.hostUrlsInput.props,{disabled:v,placeholder:l.i18n.translate("xpack.fleet.fleetServerSetup.fleetServerHostsInputPlaceholder",{defaultMessage:"Specify host URL"}),isUrl:!0})),"error"===i&&s.a.createElement(o.EuiFormErrorText,null,r))),e.length>0?s.a.createElement(o.EuiFormRow,a()({fullWidth:!0},h.isDefaultInput.formRowProps),s.a.createElement(o.EuiSwitch,a()({"data-test-subj":"fleetServerHostsFlyout.isDefaultSwitch"},h.isDefaultInput.props,{disabled:!1,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.settings.fleetServerHostsFlyout.defaultOutputSwitchLabel",defaultMessage:"Make this Fleet server the default one."})}))):null,s.a.createElement(o.EuiSpacer,{size:"m"})),s.a.createElement(o.EuiButton,{isLoading:"loading"===i,onClick:f,"data-test-subj":"generateFleetServerPolicyButton",disabled:v},e.length>0?s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.continueFleetServerPolicyButton",defaultMessage:"Continue"}):s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.generateFleetServerPolicyButton",defaultMessage:"Generate Fleet Server policy"}))))};var S=n(117);function k({isFleetServerReady:e,disabled:t,serviceToken:n,fleetServerHost:i,fleetServerPolicyId:a,deploymentMode:r}){return{title:l.i18n.translate("xpack.fleet.fleetServerFlyout.installFleetServerTitle",{defaultMessage:"Install Fleet Server to a centralized host"}),status:t?"disabled":e?"complete":"incomplete",children:!t&&s.a.createElement(M,{serviceToken:n,fleetServerHost:i,fleetServerPolicyId:a,deploymentMode:r})}}const M=({serviceToken:e,fleetServerHost:t,fleetServerPolicyId:n,deploymentMode:i})=>{const{docLinks:a}=Object(c.sc)(),r=Object(c.hc)(),{output:l}=Object(c.Fb)(),{downloadSource:d}=Object(c.Eb)(),h="elasticsearch"===(null==l?void 0:l.type)?l:void 0,f=["linux","mac","windows","deb","rpm"].reduce(((a,s)=>{var o,l,u;return a[s]=function(e,t,n,i,a,r,s,o,l){const u="windows"===e?"`\n":"\\\n",c=function(e,t,n){const i=`${n?n.host.endsWith("/")?n.host.substring(0,n.host.length-1):n.host:"https://artifacts.elastic.co/downloads"}/beats/elastic-agent`;return{linux:{downloadCommand:[`curl -L -O ${i}/elastic-agent-${t}-linux-x86_64.tar.gz`,`tar xzvf elastic-agent-${t}-linux-x86_64.tar.gz`,`cd elastic-agent-${t}-linux-x86_64`].join("\n")},mac:{downloadCommand:[`curl -L -O ${i}/elastic-agent-${t}-darwin-aarch64.tar.gz`,`tar xzvf elastic-agent-${t}-darwin-aarch64.tar.gz`,`cd elastic-agent-${t}-darwin-aarch64`].join("\n")},windows:{downloadCommand:["$ProgressPreference = 'SilentlyContinue'",`Invoke-WebRequest -Uri https://artifacts.elastic.co/downloads/beats/elastic-agent/elastic-agent-${t}-windows-x86_64.zip -OutFile elastic-agent-${t}-windows-x86_64.zip`,`Expand-Archive .\\elastic-agent-${t}-windows-x86_64.zip`,`cd elastic-agent-${t}-windows-x86_64`].join("\n")},deb:{downloadCommand:[`curl -L -O ${i}/elastic-agent-${t}-amd64.deb`,`sudo dpkg -i elastic-agent-${t}-amd64.deb`].join("\n")},rpm:{downloadCommand:[`curl -L -O ${i}/elastic-agent-${t}-x86_64.rpm`,`sudo rpm -vi elastic-agent-${t}-x86_64.rpm`].join("\n")},kubernetes:{downloadCommand:""}}[e]}(e,null!=o?o:"",l),d=[];r&&a&&d.push(["url",a]),d.push(["fleet-server-es",t]),d.push(["fleet-server-service-token",n]),i&&d.push(["fleet-server-policy",i]),s&&d.push(["fleet-server-es-ca-trusted-fingerprint",s]),r&&(d.push(["certificate-authorities","<PATH_TO_CA>"]),s||d.push(["fleet-server-es-ca","<PATH_TO_ES_CERT>"]),d.push(["fleet-server-cert","<PATH_TO_FLEET_SERVER_CERT>"]),d.push(["fleet-server-cert-key","<PATH_TO_FLEET_SERVER_CERT_KEY>"])),d.push(["fleet-server-port","8220"]);const h=d.reduce(((e,[t,n])=>""===e&&"url"===t?`--${t}=${n}`:e+` ${u}  --${t}${n?`=${n}`:""}`),"").trim();return{linux:`${c.downloadCommand}\nsudo ./elastic-agent install ${h}`,mac:`${c.downloadCommand}\nsudo ./elastic-agent install ${h}`,windows:`${c.downloadCommand}\n.\\elastic-agent.exe install ${h}`,deb:`${c.downloadCommand}\nsudo elastic-agent enroll ${h}\nsudo systemctl enable elastic-agent\nsudo systemctl start elastic-agent`,rpm:`${c.downloadCommand}\nsudo elastic-agent enroll ${h}\nsudo systemctl enable elastic-agent\nsudo systemctl start elastic-agent`,kubernetes:"",cloudFormation:"",googleCloudShell:""}[e]}(s,null!==(o=null==h||null===(l=h.hosts)||void 0===l?void 0:l[0])&&void 0!==o?o:"<ELASTICSEARCH_HOST>",null!=e?e:"",n,t,"production"===i,null!==(u=null==h?void 0:h.ca_trusted_fingerprint)&&void 0!==u?u:void 0,r,d),a}),{});return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerFlyout.installFleetServerInstructions",defaultMessage:"Install Fleet Server agent on a centralized host so that other hosts you wish to monitor can connect to it. In production, we recommend using one or more dedicated hosts. For additional guidance, see our {installationLink}.",values:{installationLink:s.a.createElement(o.EuiLink,{target:"_blank",external:!0,href:a.links.fleet.installElasticAgent},s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.enrollmentInstructions.installationMessage.link",defaultMessage:"installation docs"}))}})),s.a.createElement(o.EuiSpacer,{size:"l"}),s.a.createElement(S.t,{linuxCommand:f.linux,macCommand:f.mac,windowsCommand:f.windows,linuxDebCommand:f.deb,linuxRpmCommand:f.rpm,k8sCommand:f.kubernetes,hasK8sIntegration:!1,hasK8sIntegrationMultiPage:!1,hasFleetServer:!0}))},_=({policyId:e,setPolicyId:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:i})=>({title:0!==n.length||e?l.i18n.translate("xpack.fleet.fleetServerSetup.stepSelectAgentPolicyTitle",{defaultMessage:"Select a policy for Fleet Server"}):l.i18n.translate("xpack.fleet.fleetServerSetup.stepCreateAgentPolicyTitle",{defaultMessage:"Create a policy for Fleet Server"}),status:e?"complete":void 0,children:s.a.createElement(A,{policyId:e,setPolicyId:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:i})}),A=({policyId:e,setPolicyId:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:i})=>(Object(r.useEffect)((()=>{1!==n.length||e||t(n[0].id)}),[n,e,t]),s.a.createElement(S.v,{agentPolicies:n,withKeySelection:!1,selectedPolicyId:e,setSelectedPolicyId:e=>{t(e)},refreshAgentPolicies:i,excludeFleetServer:!1,isFleetServerPolicy:!0})),C=({deploymentMode:e,setDeploymentMode:t,disabled:n})=>({title:l.i18n.translate("xpack.fleet.fleetServerSetup.stepDeploymentModeTitle",{defaultMessage:"Choose a deployment mode for security"}),status:n?"disabled":void 0,children:n?null:s.a.createElement(F,{deploymentMode:e,setDeploymentMode:t})}),F=({deploymentMode:e,setDeploymentMode:t})=>{const n=Object(r.useCallback)((e=>{const n=e.split("_")[0];"production"!==n&&"quickstart"!==n||t(n)}),[t]),i=Object(r.useMemo)((()=>Date.now()),[]);return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.EuiText,null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.stepDeploymentModeDescriptionText",defaultMessage:"Fleet uses Transport Layer Security (TLS) to encrypt traffic between Elastic Agents and other components in the Elastic Stack. Choose a deployment mode to determine how you wish to handle certificates. Your selection will affect the Fleet Server setup command shown in a later step."})),s.a.createElement(o.EuiSpacer,{size:"m"}),s.a.createElement(o.EuiRadioGroup,{options:[{id:`quickstart_${i}`,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.deploymentModeQuickStartOption",defaultMessage:"{quickStart}  Fleet Server will generate a self-signed certificate. Subsequent agents must be enrolled using the --insecure flag. Not recommended for production use cases.",values:{quickStart:s.a.createElement("strong",null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.quickStartText",defaultMessage:"Quick start"}))}})},{id:`production_${i}`,label:s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.deploymentModeProductionOption",defaultMessage:"{production}  Provide your own certificates. This option will require agents to specify a cert key when enrolling with Fleet",values:{production:s.a.createElement("strong",null,s.a.createElement(u.FormattedMessage,{id:"xpack.fleet.fleetServerSetup.productionText",defaultMessage:"Production"}))}})}],idSelected:`${e}_${i}`,onChange:n,name:`radio group ${i}`}))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return c}));var i=n(1),a=n(68),r=n(17),s=n(288);const o=()=>{var e;const[t,n]=Object(i.useState)(),[a,o]=Object(i.useState)(!1),l=null!==(e=null==t?void 0:t.is_preconfigured)&&void 0!==e&&e,u=Object(r.dc)("",s.c,l),c=Object(r.tc)(!1,l||(null==t?void 0:t.is_default)),d=Object(r.Bb)("hostUrls",[],s.b,l),h=Object(i.useMemo)((()=>({nameInput:u,isDefaultInput:c,hostUrlsInput:d})),[u,c,d]),f=Object(i.useCallback)((()=>Object(r.wc)(h)),[h]),{data:p,resendRequest:m}=Object(r.Ub)(),g=Object(i.useMemo)((()=>{var e;return null!==(e=null==p?void 0:p.items)&&void 0!==e?e:[]}),[null==p?void 0:p.items]),b=c.setValue;Object(i.useEffect)((()=>{const e=g.find((e=>!0===e.is_default));e?(n(e),b(!1)):(n(null),b(!0))}),[g,b]);const y=Object(i.useCallback)((async()=>{if(!f())return;o(!1);const e={name:h.nameInput.value,host_urls:h.hostUrlsInput.value,is_default:h.isDefaultInput.value},t=await Object(r.cb)(e);if(t.error)throw t.error;if(!t.data)throw new Error("No data");return await m(),o(!0),n(t.data.item),t.data.item}),[f,m,h.nameInput.value,h.hostUrlsInput.value,h.isDefaultInput.value]);return{fleetServerHosts:g,handleSubmitForm:y,fleetServerHost:t,isFleetServerHostSubmitted:a,setFleetServerHost:n,inputs:h}},l=e=>{var t;const[n,a]=Object(i.useState)(e),{isLoading:s,isInitialRequest:o,data:l,resendRequest:u}=Object(r.Sb)(),c=Object(i.useMemo)((()=>{var e,t,n;return null!=l&&null!==(e=l.fleet_server)&&void 0!==e&&e.policies?null==l||null===(t=l.fleet_server)||void 0===t||null===(n=t.policies)||void 0===n?void 0:n.filter((e=>!e.is_managed)):[]}),[null==l||null===(t=l.fleet_server)||void 0===t?void 0:t.policies]);return Object(i.useEffect)((()=>{1!==c.length||n||a(c[0].id)}),[c,n]),{isSelectFleetServerPolicyLoading:s&&o,fleetServerPolicyId:n,setFleetServerPolicyId:a,eligibleFleetServerPolicies:c||[],refreshEligibleFleetServerPolicies:u}};var u=n(4);const c=()=>{var e;const t=Object(r.Kb)(),{notifications:n}=Object(r.sc)(),a=t.isReady&&!(null!==(e=t.missingRequirements)&&void 0!==e&&e.includes("fleet_server"));return Object(i.useEffect)((()=>{let e=null;return a||(e=setInterval((async()=>{try{a?e&&clearInterval(e):(t.setForceDisplayInstructions(!0),t.refetch())}catch(e){n.toasts.addError(e,{title:u.i18n.translate("xpack.fleet.fleetServerSetup.errorRefreshingFleetServerStatus",{defaultMessage:"Error refreshing Fleet Server status"})})}}),1e4)),()=>{e&&clearInterval(e)}}),[n.toasts,a,t]),{isFleetServerReady:a}},d=e=>{const{isSelectFleetServerPolicyLoading:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:r,fleetServerPolicyId:s,setFleetServerPolicyId:u}=l(e),{isFleetServerReady:d}=c(),{serviceToken:h,isLoadingServiceToken:f,generateServiceToken:p}=Object(a.a)(),m=o(),[g,b]=Object(i.useState)("quickstart");return{isSelectFleetServerPolicyLoading:t,eligibleFleetServerPolicies:n,refreshEligibleFleetServerPolicies:r,fleetServerPolicyId:s,setFleetServerPolicyId:u,isFleetServerReady:d,serviceToken:h,isLoadingServiceToken:f,generateServiceToken:p,fleetServerHostForm:m,deploymentMode:g,setDeploymentMode:b}},h={id:"fleet-server-policy",name:"Fleet Server Policy",description:"Fleet Server policy generated by Kibana",namespace:"default",has_fleet_server:!0,monitoring_enabled:["logs","metrics"],is_default_fleet_server:!0},f=()=>{const[e,t]=Object(i.useState)("initial"),[n,s]=Object(i.useState)(),{fleetServerHosts:c,fleetServerHost:d,isFleetServerHostSubmitted:f,handleSubmitForm:p,error:m,setFleetServerHost:g,inputs:b}=o();Object(i.useEffect)((()=>{t("error"),s(m)}),[m]);const{notifications:y}=Object(r.sc)(),{fleetServerPolicyId:v,setFleetServerPolicyId:E}=l(),{serviceToken:w,generateServiceToken:x}=Object(a.a)();return{status:e,error:n,submit:Object(i.useCallback)((async()=>{try{if(!d||d){var e;if(t("loading"),!d){const e=await p();if(!e)return void t("initial");g(e)}await x();const a=await Object(r.F)(h.id);if(null!==(e=a.data)&&void 0!==e&&e.item){var n;E(null===(n=a.data)||void 0===n?void 0:n.item.id)}else{var i;const e=await Object(r.k)(h,{withSysMonitoring:!0});E(null===(i=e.data)||void 0===i?void 0:i.item.id)}t("success")}}catch(e){y.toasts.addError(e,{title:u.i18n.translate("xpack.fleet.fleetServerSetup.errorAddingFleetServerHostTitle",{defaultMessage:"Error adding Fleet Server host"})}),t("error"),s(e.message)}}),[d,p,g,x,E,y.toasts]),fleetServerPolicyId:v,fleetServerHosts:c,fleetServerHost:d,setFleetServerHost:g,isFleetServerHostSubmitted:f,serviceToken:w,inputs:b}}},,function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var i=n(25),a=n.n(i);function r(e){var t,n,i,r;return e&&e[0].diff&&a()(null!==(t=null===(n=e[0].diff[1].package)||void 0===n?void 0:n.version)&&void 0!==t?t:"",null!==(i=null===(r=e[0].diff[0].package)||void 0===r?void 0:r.version)&&void 0!==i?i:"")}var s=n(16);function o(e){const{IDLE_TIMEOUT:t,READ_TIMEOUT:n,SHUTDOWN_TIMEOUT:i,TAIL_SAMPLING_INTERVAL:a,WRITE_TIMEOUT:r}=s.f;return Object.fromEntries(Object.entries(e).map((e=>e[0]!==t&&e[0]!==n&&e[0]!==i&&e[0]!==a&&e[0]!==r||!/[0-9]+$/.test(e[1].value)?e:(e[1]={...e[1],value:e[1].value+"s"},[e[0],e[1]]))))}var l=n(5);const u=({packageInfo:e,packagePolicy:t})=>{const n=[];for(const o of null!==(i=e.vars)&&void 0!==i?i:[]){var i,a,r,s;const e=null===(a=t.vars)||void 0===a||null===(r=a[o.name])||void 0===r||null===(s=r.value)||void 0===s?void 0:s.isSecretRef;o.secret&&!e&&n.push(o)}for(const i of null!==(o=e.policy_templates)&&void 0!==o?o:[]){var o;if(Object(l.V)(i))for(const e of null!==(u=i.vars)&&void 0!==u?u:[]){var u,c,d,h,f,p;const i=null===(c=t.inputs)||void 0===c||null===(d=c[0])||void 0===d||null===(h=d.vars)||void 0===h||null===(f=h[e.name])||void 0===f||null===(p=f.value)||void 0===p?void 0:p.isSecretRef;e.secret&&!i&&n.push(e)}else for(const e of null!==(m=i.inputs)&&void 0!==m?m:[]){var m;for(const i of null!==(g=e.vars)&&void 0!==g?g:[]){var g,b,y,v,E,w;const e=null===(b=t.inputs)||void 0===b||null===(y=b[0])||void 0===y||null===(v=y.vars)||void 0===v||null===(E=v[i.name])||void 0===E||null===(w=E.value)||void 0===w?void 0:w.isSecretRef;i.secret&&!e&&n.push(i)}}}return n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(29);function a({path:e,policy:t,paramsToApply:n,mappingOptions:a={}}){const[r,s]=e.split("?"),o=Object(i.parse)(s);n.forEach((e=>{const n=a[e];if(n){const[i,a]=function(e,t,n){if(!t)return[];if("boolean"==typeof t&&t)return[e,"true"];return[t.renameKey?t.renameKey:e,t.policyIdAsValue?n:"true"]}(e,n,t.policy_ids[0]);i&&a&&(o[i]=a)}}));const l=Object(i.stringify)(o);return r+(l?`?${l}`:"")}var r=n(5);const s=({packageInfo:e})=>{var t;if(null!==(t=e.vars)&&void 0!==t&&t.some((e=>e.secret)))return!0;for(const t of null!==(n=e.policy_templates)&&void 0!==n?n:[]){var n,i;if(Object(r.V)(t)){if(null!==(i=t.vars)&&void 0!==i&&i.some((e=>e.secret)))return!0}else for(const e of null!==(a=t.inputs)&&void 0!==a?a:[]){var a,s;if(null!==(s=e.vars)&&void 0!==s&&s.some((e=>e.secret)))return!0}}return!1}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h.b})),n.d(t,"c",(function(){return f.b}));var i=n(1),a=n(4),r=n(13),s=n(109),o=n(59),l=n(269),u=n(0),c=n(149);function d({newAgentPolicy:e,packagePolicy:t,packageInfo:n,selectedPolicyTab:d,withSysMonitoring:h,packagePolicyId:f}){var p;const{showDevtoolsRequest:m}=o.b.get(),g=!u.gb.includes(null!==(p=null==n?void 0:n.name)&&void 0!==p?p:"")&&m,[b,y]=Object(i.useMemo)((()=>{if(d===c.b.NEW){var n;const i=(null==t||null===(n=t.package)||void 0===n?void 0:n.name)===u.cb;return[`${Object(l.a)(e,h&&!i)}\n\n${f?Object(l.d)(f,Object(s.set)(Object(r.omit)(t,"elasticsearch","policy_id"),"policy_ids",[...t.policy_ids,""])):Object(l.b)({...{...t,policy_ids:[""]}})}`,f?a.i18n.translate("xpack.fleet.editPackagePolicy.devtoolsRequestWithAgentPolicyDescription",{defaultMessage:"These Kibana requests create a new agent policy and update a package policy."}):a.i18n.translate("xpack.fleet.createPackagePolicy.devtoolsRequestWithAgentPolicyDescription",{defaultMessage:"These Kibana requests create a new agent policy and a new package policy."})]}return[f?Object(l.d)(f,Object(r.omit)(t,"elasticsearch","policy_id")):Object(l.b)({...t}),f?a.i18n.translate("xpack.fleet.editPackagePolicy.devtoolsRequestDescription",{defaultMessage:"This Kibana request updates package policy."}):a.i18n.translate("xpack.fleet.createPackagePolicy.devtoolsRequestDescription",{defaultMessage:"This Kibana request creates a new package policy."})]}),[t,e,h,d,f]);return{showDevtoolsRequest:g,devtoolRequest:b,devtoolRequestDescription:y}}var h=n(248),f=n(180)},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var i=n(1),a=n(16),r=n(17),s=n(380);const o=e=>{const{from:t,pkgkey:n,agentPolicyId:a}=e,{application:{navigateToApp:s}}=Object(r.sc)(),o=Object(r.ec)(),{getHref:l}=Object(r.jc)();return{cancelClickHandler:Object(i.useCallback)((e=>{null!=o&&o.onCancelNavigateTo&&(e.preventDefault(),s(...o.onCancelNavigateTo))}),[o,s]),cancelUrl:Object(i.useMemo)((()=>o&&o.onCancelUrl?o.onCancelUrl:"policy"===t&&a?l("policy_details",{policyId:a}):l("integration_details_overview",{pkgkey:n})),[o,t,a,l,n])}},l=e=>{const{packagePolicy:t,queryParamsPolicyId:n}=e,o=Object(r.ec)(),l=Object(i.useRef)(!0),{getPath:u}=Object(r.jc)(),{application:{navigateToApp:c}}=Object(r.sc)();return Object(i.useEffect)((()=>()=>{l.current=!1}),[]),Object(i.useCallback)(((e,i=[])=>{if(!l.current)return;const r=u("policy_details",{policyId:t.policy_ids[0]}),[d,h]=null!=o&&o.onSaveNavigateTo?[o.onSaveNavigateTo,null==o?void 0:o.onSaveQueryParams]:[[a.s,{path:r}],{showAddAgentHelp:!0,openEnrollmentFlyout:!0}],[f,p]=d;if(null!=p&&p.path){const t=Object(s.a)({path:n?r:p.path,policy:e,mappingOptions:h,paramsToApply:i});c(f,{...p,path:t})}else c(...d)}),[t.policy_ids,u,c,o,n])}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(213);Object.defineProperty(t,"AllSubstringsIndexStrategy",{enumerable:!0,get:function(){return i.AllSubstringsIndexStrategy}}),Object.defineProperty(t,"ExactWordIndexStrategy",{enumerable:!0,get:function(){return i.ExactWordIndexStrategy}}),Object.defineProperty(t,"PrefixIndexStrategy",{enumerable:!0,get:function(){return i.PrefixIndexStrategy}});var a=n(214);Object.defineProperty(t,"CaseSensitiveSanitizer",{enumerable:!0,get:function(){return a.CaseSensitiveSanitizer}}),Object.defineProperty(t,"LowerCaseSanitizer",{enumerable:!0,get:function(){return a.LowerCaseSanitizer}});var r=n(284);Object.defineProperty(t,"TfIdfSearchIndex",{enumerable:!0,get:function(){return r.TfIdfSearchIndex}}),Object.defineProperty(t,"UnorderedSearchIndex",{enumerable:!0,get:function(){return r.UnorderedSearchIndex}});var s=n(286);Object.defineProperty(t,"SimpleTokenizer",{enumerable:!0,get:function(){return s.SimpleTokenizer}}),Object.defineProperty(t,"StemmingTokenizer",{enumerable:!0,get:function(){return s.StemmingTokenizer}}),Object.defineProperty(t,"StopWordsTokenizer",{enumerable:!0,get:function(){return s.StopWordsTokenizer}});var o=n(455);Object.defineProperty(t,"Search",{enumerable:!0,get:function(){return o.Search}});var l=n(287);Object.defineProperty(t,"StopWordsMap",{enumerable:!0,get:function(){return l.StopWordsMap}});var u=n(456);Object.defineProperty(t,"TokenHighlighter",{enumerable:!0,get:function(){return u.TokenHighlighter}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.AllSubstringsIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"expandToken",value:function(e){for(var t,n=[],i=0,a=e.length;i<a;++i){t="";for(var r=i;r<a;++r)t+=e.charAt(r),n.push(t)}return n}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.ExactWordIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"expandToken",value:function(e){return e?[e]:[]}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.PrefixIndexStrategy=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"expandToken",value:function(e){for(var t=[],n="",i=0,a=e.length;i<a;++i)n+=e.charAt(i),t.push(n);return t}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.CaseSensitiveSanitizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"sanitize",value:function(e){return e?e.trim():""}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.LowerCaseSanitizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"sanitize",value:function(e){return e?e.toLocaleLowerCase().trim():""}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TfIdfSearchIndex=void 0;var i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=(i=n(285))&&i.__esModule?i:{default:i};t.TfIdfSearchIndex=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._uidFieldName=t,this._tokenToIdfCache={},this._tokenMap={}}return r(e,[{key:"indexDocument",value:function(e,t,n){this._tokenToIdfCache={};var i,r=this._tokenMap;"object"!==a(r[e])?r[e]=i={$numDocumentOccurrences:0,$totalNumOccurrences:1,$uidMap:{}}:(i=r[e]).$totalNumOccurrences++;var s=i.$uidMap;"object"!==a(s[t])?(i.$numDocumentOccurrences++,s[t]={$document:n,$numTokenOccurrences:1}):s[t].$numTokenOccurrences++}},{key:"search",value:function(e,t){for(var n={},i=0,r=e.length;i<r;i++){var s,o=e[i],l=this._tokenMap[o];if(!l)return[];if(0===i)for(var u=0,c=(s=Object.keys(l.$uidMap)).length;u<c;u++)n[d=s[u]]=l.$uidMap[d].$document;else for(u=0,c=(s=Object.keys(n)).length;u<c;u++){var d=s[u];"object"!==a(l.$uidMap[d])&&delete n[d]}}var h=[];for(var d in n)h.push(n[d]);var f=this._createCalculateTfIdf();return h.sort((function(n,i){return f(e,i,t)-f(e,n,t)}))}},{key:"_createCalculateIdf",value:function(){var e=this._tokenMap,t=this._tokenToIdfCache;return function(n,i){if(!t[n]){var a=void 0!==e[n]?e[n].$numDocumentOccurrences:0;t[n]=1+Math.log(i.length/(1+a))}return t[n]}}},{key:"_createCalculateTfIdf",value:function(){var e=this._tokenMap,t=this._uidFieldName,n=this._createCalculateIdf();return function(i,a,r){for(var o=0,l=0,u=i.length;l<u;++l){var c,d=i[l],h=n(d,r);h===1/0&&(h=0),c=t instanceof Array?a&&(0,s.default)(a,t):a&&a[t],o+=(void 0!==e[d]&&void 0!==e[d].$uidMap[c]?e[d].$uidMap[c].$numTokenOccurrences:0)*h}return o}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.UnorderedSearchIndex=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tokenToUidToDocumentMap={}}return a(e,[{key:"indexDocument",value:function(e,t,n){"object"!==i(this._tokenToUidToDocumentMap[e])&&(this._tokenToUidToDocumentMap[e]={}),this._tokenToUidToDocumentMap[e][t]=n}},{key:"search",value:function(e,t){for(var n={},a=this._tokenToUidToDocumentMap,r=0,s=e.length;r<s;r++){var o=a[e[r]];if(!o)return[];if(0===r)for(var l=0,u=(d=Object.keys(o)).length;l<u;l++)n[c=d[l]]=o[c];else for(l=0,u=(d=Object.keys(n)).length;l<u;l++){var c=d[l];"object"!==i(o[c])&&delete n[c]}}var d,h=[];for(r=0,u=(d=Object.keys(n)).length;r<u;r++)c=d[r],h.push(n[c]);return h}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=/[^a-z-0-9\-']+/i;t.SimpleTokenizer=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"tokenize",value:function(e){return e.split(a).filter((function(e){return e}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.StemmingTokenizer=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._stemmingFunction=t,this._tokenizer=n}return i(e,[{key:"tokenize",value:function(e){return this._tokenizer.tokenize(e).map(this._stemmingFunction)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StopWordsTokenizer=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(287);t.StopWordsTokenizer=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._tokenizer=t}return i(e,[{key:"tokenize",value:function(e){return this._tokenizer.tokenize(e).filter((function(e){return!a.StopWordsMap[e]}))}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Search=void 0;var i,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=(i=n(285))&&i.__esModule?i:{default:i},s=n(213),o=n(214),l=n(284),u=n(286);t.Search=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw Error("js-search requires a uid field name constructor parameter");this._uidFieldName=t,this._indexStrategy=new s.PrefixIndexStrategy,this._searchIndex=new l.TfIdfSearchIndex(t),this._sanitizer=new o.LowerCaseSanitizer,this._tokenizer=new u.SimpleTokenizer,this._documents=[],this._searchableFields=[]}return a(e,[{key:"addDocument",value:function(e){this.addDocuments([e])}},{key:"addDocuments",value:function(e){this._documents=this._documents.concat(e),this.indexDocuments_(e,this._searchableFields)}},{key:"addIndex",value:function(e){this._searchableFields.push(e),this.indexDocuments_(this._documents,[e])}},{key:"search",value:function(e){var t=this._tokenizer.tokenize(this._sanitizer.sanitize(e));return this._searchIndex.search(t,this._documents)}},{key:"indexDocuments_",value:function(e,t){this._initialized=!0;for(var n=this._indexStrategy,i=this._sanitizer,a=this._searchIndex,s=this._tokenizer,o=this._uidFieldName,l=0,u=e.length;l<u;l++){var c,d=e[l];c=o instanceof Array?(0,r.default)(d,o):d[o];for(var h=0,f=t.length;h<f;h++){var p,m=t[h];if(null!=(p=m instanceof Array?(0,r.default)(d,m):d[m])&&"string"!=typeof p&&p.toString&&(p=p.toString()),"string"==typeof p)for(var g=s.tokenize(i.sanitize(p)),b=0,y=g.length;b<y;b++)for(var v=g[b],E=n.expandToken(v),w=0,x=E.length;w<x;w++){var S=E[w];a.indexDocument(S,c,d)}}}}},{key:"indexStrategy",set:function(e){if(this._initialized)throw Error("IIndexStrategy cannot be set after initialization");this._indexStrategy=e},get:function(){return this._indexStrategy}},{key:"sanitizer",set:function(e){if(this._initialized)throw Error("ISanitizer cannot be set after initialization");this._sanitizer=e},get:function(){return this._sanitizer}},{key:"searchIndex",set:function(e){if(this._initialized)throw Error("ISearchIndex cannot be set after initialization");this._searchIndex=e},get:function(){return this._searchIndex}},{key:"tokenizer",set:function(e){if(this._initialized)throw Error("ITokenizer cannot be set after initialization");this._tokenizer=e},get:function(){return this._tokenizer}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenHighlighter=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(213),r=n(214);t.TokenHighlighter=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._indexStrategy=t||new a.PrefixIndexStrategy,this._sanitizer=n||new r.LowerCaseSanitizer,this._wrapperTagName=i||"mark"}return i(e,[{key:"highlight",value:function(e,t){for(var n=this._wrapText("").length,i=Object.create(null),a=0,r=t.length;a<r;a++)for(var s=this._sanitizer.sanitize(t[a]),o=this._indexStrategy.expandToken(s),l=0,u=o.length;l<u;l++){var c=o[l];i[c]?i[c].push(s):i[c]=[s]}for(var d="",h="",f=0,p=(a=0,e.length);a<p;a++){var m=e.charAt(a);" "===m?(d="",h="",f=a+1):(d+=m,h+=this._sanitizer.sanitize(m)),i[h]&&i[h].indexOf(h)>=0&&(d=this._wrapText(d),e=e.substring(0,f)+d+e.substring(a+1),a+=n,p+=n)}return e}},{key:"_wrapText",value:function(e){var t=this._wrapperTagName;return"<"+t+">"+e+"</"+t+">"}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a={};t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var s=[],o=[],l=function(e){var t=i.createContext(a);s.push(t),o.push(function(e){return function(){var t=i.useContext(e);return t}}(t))};n.length?n.forEach((function(e){return l(e.name)})):l(e.name);var u=function(t){for(var a=t.children,r=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(t,["children"]),o=e(r),l=a,u=0;u<s.length;u+=1){var c=s[u],d=n[u]||function(e){return e};l=i.createElement(c.Provider,{value:d(o)},l)}return l};return[u].concat(o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";var i,a,r=this&&this.__classPrivateFieldGet||function(e,t,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(e):i?i.value:t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,n,i,a){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?a.call(e,n):a?a.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.datetimeRegex=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=t.date=void 0;const o=n(222),l=n(460),u=n(294),c=n(193),d=n(223);class ParseInputLazyPath{constructor(e,t,n,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const h=(e,t)=>{if((0,u.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new d.ZodError(e.common.issues);return this._error=t,this._error}}};function f(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:i,description:a}=e;if(t&&(n||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(t,a)=>{var r,s;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:a.defaultError}:void 0===a.data?{message:null!==(r=null!=o?o:i)&&void 0!==r?r:a.defaultError}:"invalid_type"!==t.code?{message:a.defaultError}:{message:null!==(s=null!=o?o:n)&&void 0!==s?s:a.defaultError}},description:a}}class ZodType{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,c.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,c.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new u.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,c.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,u.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const i={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,c.getParsedType)(e)},a=this._parseSync({data:e,path:i.path,parent:i});return h(i,a)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,c.getParsedType)(e)},i=this._parse({data:e,path:n.path,parent:n}),a=await((0,u.isAsync)(i)?i:Promise.resolve(i));return h(n,a)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const a=e(t),r=()=>i.addIssue({code:d.ZodIssueCode.custom,...n(t)});return"undefined"!=typeof Promise&&a instanceof Promise?a.then((e=>!!e||(r(),!1))):!!a||(r(),!1)}))}refinement(e,t){return this._refinement(((n,i)=>!!e(n)||(i.addIssue("function"==typeof t?t(n,i):t),!1)))}_refinement(e){return new ZodEffects({schema:this,typeName:j.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...f(this._def),schema:this,typeName:j.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ZodDefault({...f(this._def),innerType:this,defaultValue:t,typeName:j.ZodDefault})}brand(){return new ZodBranded({typeName:j.ZodBranded,type:this,...f(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ZodCatch({...f(this._def),innerType:this,catchValue:t,typeName:j.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=ZodType,t.Schema=ZodType,t.ZodSchema=ZodType;const p=/^c[^\s-]{8,}$/i,m=/^[0-9a-z]+$/,g=/^[0-9A-HJKMNP-TV-Z]{26}$/,b=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,y=/^[a-z0-9_-]{21}$/i,v=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,E=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let w;const x=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,S=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,k=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,M="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_=new RegExp(`^${M}$`);function A(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function C(e){let t=`${M}T${A(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}t.datetimeRegex=C;class ZodString extends ZodType{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==c.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.string,received:t.parsedType}),u.INVALID}const t=new u.ParseStatus;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const i=e.data.length>r.value,a=e.data.length<r.value;(i||a)&&(n=this._getOrReturnCtx(e,n),i?(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):a&&(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)E.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"email",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)w||(w=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),w.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"emoji",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)b.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"uuid",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)y.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"nanoid",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)p.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"cuid",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)m.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"cuid2",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)g.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"ulid",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(i){n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"url",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"regex",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty())):"trim"===r.kind?e.data=e.data.trim():"includes"===r.kind?e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty()):"toLowerCase"===r.kind?e.data=e.data.toLowerCase():"toUpperCase"===r.kind?e.data=e.data.toUpperCase():"startsWith"===r.kind?e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty()):"endsWith"===r.kind?e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty()):"datetime"===r.kind?C(r).test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_string,validation:"datetime",message:r.message}),t.dirty()):"date"===r.kind?_.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_string,validation:"date",message:r.message}),t.dirty()):"time"===r.kind?new RegExp(`^${A(r)}$`).test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_string,validation:"time",message:r.message}),t.dirty()):"duration"===r.kind?v.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"duration",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?(i=e.data,("v4"!==(a=r.version)&&a||!x.test(i))&&("v6"!==a&&a||!S.test(i))&&(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"ip",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty())):"base64"===r.kind?k.test(e.data)||(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{validation:"base64",code:d.ZodIssueCode.invalid_string,message:r.message}),t.dirty()):c.util.assertNever(r);var i,a;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:d.ZodIssueCode.invalid_string,...l.errorUtil.errToObj(n)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...l.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...l.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...l.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...l.errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...l.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...l.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...l.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...l.errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...l.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...l.errorUtil.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...l.errorUtil.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...l.errorUtil.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...l.errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...l.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...l.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...l.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...l.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...l.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...l.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...l.errorUtil.errToObj(t)})}nonempty(e){return this.min(1,l.errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function F(e,t){const n=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,a=n>i?n:i;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}t.ZodString=ZodString,ZodString.create=e=>{var t;return new ZodString({checks:[],typeName:j.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...f(e)})};class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==c.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.number,received:t.parsedType}),u.INVALID}let t;const n=new u.ParseStatus;for(const i of this._def.checks)"int"===i.kind?c.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):"multipleOf"===i.kind?0!==F(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.not_finite,message:i.message}),n.dirty()):c.util.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,l.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,l.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,l.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,l.errorUtil.toString(t))}setLimit(e,t,n,i){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:l.errorUtil.toString(i)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:l.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:l.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:l.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:l.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:l.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:l.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:l.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:l.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:l.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&c.util.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=ZodNumber,ZodNumber.create=e=>new ZodNumber({checks:[],typeName:j.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...f(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==c.ZodParsedType.bigint){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.bigint,received:t.parsedType}),u.INVALID}let t;const n=new u.ParseStatus;for(const i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):c.util.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,l.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,l.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,l.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,l.errorUtil.toString(t))}setLimit(e,t,n,i){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:l.errorUtil.toString(i)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:l.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:l.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:l.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:l.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:l.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=ZodBigInt,ZodBigInt.create=e=>{var t;return new ZodBigInt({checks:[],typeName:j.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...f(e)})};class ZodBoolean extends ZodType{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==c.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.boolean,received:t.parsedType}),u.INVALID}return(0,u.OK)(e.data)}}t.ZodBoolean=ZodBoolean,ZodBoolean.create=e=>new ZodBoolean({typeName:j.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...f(e)});class ZodDate extends ZodType{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==c.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.date,received:t.parsedType}),u.INVALID}if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_date}),u.INVALID}const t=new u.ParseStatus;let n;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):c.util.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:l.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:l.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=ZodDate,ZodDate.create=e=>new ZodDate({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:j.ZodDate,...f(e)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==c.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.symbol,received:t.parsedType}),u.INVALID}return(0,u.OK)(e.data)}}t.ZodSymbol=ZodSymbol,ZodSymbol.create=e=>new ZodSymbol({typeName:j.ZodSymbol,...f(e)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==c.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.undefined,received:t.parsedType}),u.INVALID}return(0,u.OK)(e.data)}}t.ZodUndefined=ZodUndefined,ZodUndefined.create=e=>new ZodUndefined({typeName:j.ZodUndefined,...f(e)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==c.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.null,received:t.parsedType}),u.INVALID}return(0,u.OK)(e.data)}}t.ZodNull=ZodNull,ZodNull.create=e=>new ZodNull({typeName:j.ZodNull,...f(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,u.OK)(e.data)}}t.ZodAny=ZodAny,ZodAny.create=e=>new ZodAny({typeName:j.ZodAny,...f(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,u.OK)(e.data)}}t.ZodUnknown=ZodUnknown,ZodUnknown.create=e=>new ZodUnknown({typeName:j.ZodUnknown,...f(e)});class ZodNever extends ZodType{_parse(e){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.never,received:t.parsedType}),u.INVALID}}t.ZodNever=ZodNever,ZodNever.create=e=>new ZodNever({typeName:j.ZodNever,...f(e)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==c.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.void,received:t.parsedType}),u.INVALID}return(0,u.OK)(e.data)}}t.ZodVoid=ZodVoid,ZodVoid.create=e=>new ZodVoid({typeName:j.ZodVoid,...f(e)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),i=this._def;if(t.parsedType!==c.ZodParsedType.array)return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.array,received:t.parsedType}),u.INVALID;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,a=t.data.length<i.exactLength.value;(e||a)&&((0,u.addIssueToContext)(t,{code:e?d.ZodIssueCode.too_big:d.ZodIssueCode.too_small,minimum:a?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&((0,u.addIssueToContext)(t,{code:d.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&((0,u.addIssueToContext)(t,{code:d.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>i.type._parseAsync(new ParseInputLazyPath(t,e,t.path,n))))).then((e=>u.ParseStatus.mergeArray(n,e)));const a=[...t.data].map(((e,n)=>i.type._parseSync(new ParseInputLazyPath(t,e,t.path,n))));return u.ParseStatus.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:l.errorUtil.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:l.errorUtil.toString(t)}})}length(e,t){return new ZodArray({...this._def,exactLength:{value:e,message:l.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function D(e){if(e instanceof ZodObject){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=ZodOptional.create(D(i))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?new ZodArray({...e._def,type:D(e.element)}):e instanceof ZodOptional?ZodOptional.create(D(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(D(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map((e=>D(e)))):e}t.ZodArray=ZodArray,ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:j.ZodArray,...f(t)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=c.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==c.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.object,received:t.parsedType}),u.INVALID}const{status:t,ctx:n}=this._processInputParams(e),{shape:i,keys:a}=this._getCached(),r=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const e in n.data)a.includes(e)||r.push(e);const s=[];for(const e of a){const t=i[e],a=n.data[e];s.push({key:{status:"valid",value:e},value:t._parse(new ParseInputLazyPath(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)s.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)r.length>0&&((0,u.addIssueToContext)(n,{code:d.ZodIssueCode.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const i=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new ParseInputLazyPath(n,i,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,i=await t.value;e.push({key:n,value:i,alwaysSet:t.alwaysSet})}return e})).then((e=>u.ParseStatus.mergeObjectSync(t,e))):u.ParseStatus.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return l.errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var i,a,r,s;const o=null!==(r=null===(a=(i=this._def).errorMap)||void 0===a?void 0:a.call(i,t,n).message)&&void 0!==r?r:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=l.errorUtil.errToObj(e).message)&&void 0!==s?s:o}:{message:o}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:j.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};return c.util.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};return c.util.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new ZodObject({...this._def,shape:()=>t})}deepPartial(){return D(this)}partial(e){const t={};return c.util.objectKeys(this.shape).forEach((n=>{const i=this.shape[n];e&&!e[n]?t[n]=i:t[n]=i.optional()})),new ZodObject({...this._def,shape:()=>t})}required(e){const t={};return c.util.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof ZodOptional;)e=e._def.innerType;t[n]=e}})),new ZodObject({...this._def,shape:()=>t})}keyof(){return P(c.util.objectKeys(this.shape))}}t.ZodObject=ZodObject,ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:j.ZodObject,...f(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:j.ZodObject,...f(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:j.ZodObject,...f(t)});class ZodUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new d.ZodError(e.ctx.common.issues)));return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_union,unionErrors:n}),u.INVALID}));{let e;const i=[];for(const a of n){const n={...t,common:{...t.common,issues:[]},parent:null},r=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:n}),n.common.issues.length&&i.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const a=i.map((e=>new d.ZodError(e)));return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_union,unionErrors:a}),u.INVALID}}get options(){return this._def.options}}t.ZodUnion=ZodUnion,ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:j.ZodUnion,...f(t)});const T=e=>e instanceof ZodLazy?T(e.schema):e instanceof ZodEffects?T(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?c.util.objectValues(e.enum):e instanceof ZodDefault?T(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:e instanceof ZodOptional?[void 0,...T(e.unwrap())]:e instanceof ZodNullable?[null,...T(e.unwrap())]:e instanceof ZodBranded||e instanceof ZodReadonly?T(e.unwrap()):e instanceof ZodCatch?T(e._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.ZodParsedType.object)return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.object,received:t.parsedType}),u.INVALID;const n=this.discriminator,i=t.data[n],a=this.optionsMap.get(i);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):((0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),u.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const i=new Map;for(const n of t){const t=T(n.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of t){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,n)}}return new ZodDiscriminatedUnion({typeName:j.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...f(n)})}}function I(e,t){const n=(0,c.getParsedType)(e),i=(0,c.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(n===c.ZodParsedType.object&&i===c.ZodParsedType.object){const n=c.util.objectKeys(t),i=c.util.objectKeys(e).filter((e=>-1!==n.indexOf(e))),a={...e,...t};for(const n of i){const i=I(e[n],t[n]);if(!i.valid)return{valid:!1};a[n]=i.data}return{valid:!0,data:a}}if(n===c.ZodParsedType.array&&i===c.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let i=0;i<e.length;i++){const a=I(e[i],t[i]);if(!a.valid)return{valid:!1};n.push(a.data)}return{valid:!0,data:n}}return n===c.ZodParsedType.date&&i===c.ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}t.ZodDiscriminatedUnion=ZodDiscriminatedUnion;class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=(e,i)=>{if((0,u.isAborted)(e)||(0,u.isAborted)(i))return u.INVALID;const a=I(e.value,i.value);return a.valid?(((0,u.isDirty)(e)||(0,u.isDirty)(i))&&t.dirty(),{status:t.value,value:a.data}):((0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_intersection_types}),u.INVALID)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}t.ZodIntersection=ZodIntersection,ZodIntersection.create=(e,t,n)=>new ZodIntersection({left:e,right:t,typeName:j.ZodIntersection,...f(n)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==c.ZodParsedType.array)return(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.array,received:n.parsedType}),u.INVALID;if(n.data.length<this._def.items.length)return(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),u.INVALID;!this._def.rest&&n.data.length>this._def.items.length&&((0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new ParseInputLazyPath(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(i).then((e=>u.ParseStatus.mergeArray(t,e))):u.ParseStatus.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}t.ZodTuple=ZodTuple,ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:j.ZodTuple,rest:null,...f(t)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==c.ZodParsedType.object)return(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.object,received:n.parsedType}),u.INVALID;const i=[],a=this._def.keyType,r=this._def.valueType;for(const e in n.data)i.push({key:a._parse(new ParseInputLazyPath(n,e,n.path,e)),value:r._parse(new ParseInputLazyPath(n,n.data[e],n.path,e)),alwaysSet:e in n.data});return n.common.async?u.ParseStatus.mergeObjectAsync(t,i):u.ParseStatus.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,n){return new ZodRecord(t instanceof ZodType?{keyType:e,valueType:t,typeName:j.ZodRecord,...f(n)}:{keyType:ZodString.create(),valueType:e,typeName:j.ZodRecord,...f(t)})}}t.ZodRecord=ZodRecord;class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==c.ZodParsedType.map)return(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.map,received:n.parsedType}),u.INVALID;const i=this._def.keyType,a=this._def.valueType,r=[...n.data.entries()].map((([e,t],r)=>({key:i._parse(new ParseInputLazyPath(n,e,n.path,[r,"key"])),value:a._parse(new ParseInputLazyPath(n,t,n.path,[r,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of r){const i=await n.key,a=await n.value;if("aborted"===i.status||"aborted"===a.status)return u.INVALID;"dirty"!==i.status&&"dirty"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of r){const i=n.key,a=n.value;if("aborted"===i.status||"aborted"===a.status)return u.INVALID;"dirty"!==i.status&&"dirty"!==a.status||t.dirty(),e.set(i.value,a.value)}return{status:t.value,value:e}}}}t.ZodMap=ZodMap,ZodMap.create=(e,t,n)=>new ZodMap({valueType:t,keyType:e,typeName:j.ZodMap,...f(n)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==c.ZodParsedType.set)return(0,u.addIssueToContext)(n,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.set,received:n.parsedType}),u.INVALID;const i=this._def;null!==i.minSize&&n.data.size<i.minSize.value&&((0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&n.data.size>i.maxSize.value&&((0,u.addIssueToContext)(n,{code:d.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const a=this._def.valueType;function r(e){const n=new Set;for(const i of e){if("aborted"===i.status)return u.INVALID;"dirty"===i.status&&t.dirty(),n.add(i.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>a._parse(new ParseInputLazyPath(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>r(e))):r(s)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:l.errorUtil.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:l.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=ZodSet,ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:j.ZodSet,...f(t)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.ZodParsedType.function)return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.function,received:t.parsedType}),u.INVALID;function n(e,n){return(0,u.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter((e=>!!e)),issueData:{code:d.ZodIssueCode.invalid_arguments,argumentsError:n}})}function i(e,n){return(0,u.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,o.getErrorMap)(),o.defaultErrorMap].filter((e=>!!e)),issueData:{code:d.ZodIssueCode.invalid_return_type,returnTypeError:n}})}const a={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof ZodPromise){const e=this;return(0,u.OK)((async function(...t){const s=new d.ZodError([]),o=await e._def.args.parseAsync(t,a).catch((e=>{throw s.addIssue(n(t,e)),s})),l=await Reflect.apply(r,this,o);return await e._def.returns._def.type.parseAsync(l,a).catch((e=>{throw s.addIssue(i(l,e)),s}))}))}{const e=this;return(0,u.OK)((function(...t){const s=e._def.args.safeParse(t,a);if(!s.success)throw new d.ZodError([n(t,s.error)]);const o=Reflect.apply(r,this,s.data),l=e._def.returns.safeParse(o,a);if(!l.success)throw new d.ZodError([i(o,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new ZodFunction({...this._def,args:ZodTuple.create(e).rest(ZodUnknown.create())})}returns(e){return new ZodFunction({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new ZodFunction({args:e||ZodTuple.create([]).rest(ZodUnknown.create()),returns:t||ZodUnknown.create(),typeName:j.ZodFunction,...f(n)})}}t.ZodFunction=ZodFunction;class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=ZodLazy,ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:j.ZodLazy,...f(t)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{received:t.data,code:d.ZodIssueCode.invalid_literal,expected:this._def.value}),u.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function P(e,t){return new ZodEnum({values:e,typeName:j.ZodEnum,...f(t)})}t.ZodLiteral=ZodLiteral,ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:j.ZodLiteral,...f(t)});class ZodEnum extends ZodType{constructor(){super(...arguments),i.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return(0,u.addIssueToContext)(t,{expected:c.util.joinValues(n),received:t.parsedType,code:d.ZodIssueCode.invalid_type}),u.INVALID}if(r(this,i,"f")||s(this,i,new Set(this._def.values),"f"),!r(this,i,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return(0,u.addIssueToContext)(t,{received:t.data,code:d.ZodIssueCode.invalid_enum_value,options:n}),u.INVALID}return(0,u.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ZodEnum.create(e,{...this._def,...t})}exclude(e,t=this._def){return ZodEnum.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}t.ZodEnum=ZodEnum,i=new WeakMap,ZodEnum.create=P;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),a.set(this,void 0)}_parse(e){const t=c.util.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==c.ZodParsedType.string&&n.parsedType!==c.ZodParsedType.number){const e=c.util.objectValues(t);return(0,u.addIssueToContext)(n,{expected:c.util.joinValues(e),received:n.parsedType,code:d.ZodIssueCode.invalid_type}),u.INVALID}if(r(this,a,"f")||s(this,a,new Set(c.util.getValidEnumValues(this._def.values)),"f"),!r(this,a,"f").has(e.data)){const e=c.util.objectValues(t);return(0,u.addIssueToContext)(n,{received:n.data,code:d.ZodIssueCode.invalid_enum_value,options:e}),u.INVALID}return(0,u.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=ZodNativeEnum,a=new WeakMap,ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:j.ZodNativeEnum,...f(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.ZodParsedType.promise&&!1===t.common.async)return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.promise,received:t.parsedType}),u.INVALID;const n=t.parsedType===c.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,u.OK)(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}t.ZodPromise=ZodPromise,ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:j.ZodPromise,...f(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===j.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:e=>{(0,u.addIssueToContext)(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===i.type){const e=i.transform(n.data,a);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return u.INVALID;const i=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===i.status?u.INVALID:"dirty"===i.status||"dirty"===t.value?(0,u.DIRTY)(i.value):i}));{if("aborted"===t.value)return u.INVALID;const i=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===i.status?u.INVALID:"dirty"===i.status||"dirty"===t.value?(0,u.DIRTY)(i.value):i}}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const i=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===i.status?u.INVALID:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?u.INVALID:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===i.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!(0,u.isValid)(e))return e;const r=i.transform(e.value,a);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>(0,u.isValid)(e)?Promise.resolve(i.transform(e.value,a)).then((e=>({status:t.value,value:e}))):e))}c.util.assertNever(i)}}t.ZodEffects=ZodEffects,t.ZodTransformer=ZodEffects,ZodEffects.create=(e,t,n)=>new ZodEffects({schema:e,typeName:j.ZodEffects,effect:t,...f(n)}),ZodEffects.createWithPreprocess=(e,t,n)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:j.ZodEffects,...f(n)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===c.ZodParsedType.undefined?(0,u.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=ZodOptional,ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:j.ZodOptional,...f(t)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===c.ZodParsedType.null?(0,u.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=ZodNullable,ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:j.ZodNullable,...f(t)});class ZodDefault extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===c.ZodParsedType.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=ZodDefault,ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:j.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...f(t)});class ZodCatch extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return(0,u.isAsync)(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new d.ZodError(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new d.ZodError(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=ZodCatch,ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:j.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...f(t)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==c.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,u.addIssueToContext)(t,{code:d.ZodIssueCode.invalid_type,expected:c.ZodParsedType.nan,received:t.parsedType}),u.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ZodNaN,ZodNaN.create=e=>new ZodNaN({typeName:j.ZodNaN,...f(e)}),t.BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ZodBranded;class ZodPipeline extends ZodType{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?u.INVALID:"dirty"===e.status?(t.dirty(),(0,u.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?u.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new ZodPipeline({in:e,out:t,typeName:j.ZodPipeline})}}t.ZodPipeline=ZodPipeline;class ZodReadonly extends ZodType{_parse(e){const t=this._def.innerType._parse(e),n=e=>((0,u.isValid)(e)&&(e.value=Object.freeze(e.value)),e);return(0,u.isAsync)(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function O(e,t={},n){return e?ZodAny.create().superRefine(((i,a)=>{var r,s;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,o=null===(s=null!==(r=e.fatal)&&void 0!==r?r:n)||void 0===s||s,l="string"==typeof e?{message:e}:e;a.addIssue({code:"custom",...l,fatal:o})}})):ZodAny.create()}var j;t.ZodReadonly=ZodReadonly,ZodReadonly.create=(e,t)=>new ZodReadonly({innerType:e,typeName:j.ZodReadonly,...f(t)}),t.custom=O,t.late={object:ZodObject.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(j=t.ZodFirstPartyTypeKind||(t.ZodFirstPartyTypeKind={})),t.instanceof=(e,t={message:`Input not instance of ${e.name}`})=>O((t=>t instanceof e),t);const B=ZodString.create;t.string=B;const L=ZodNumber.create;t.number=L;const N=ZodNaN.create;t.nan=N;const R=ZodBigInt.create;t.bigint=R;const z=ZodBoolean.create;t.boolean=z;const U=ZodDate.create;t.date=U;const Z=ZodSymbol.create;t.symbol=Z;const K=ZodUndefined.create;t.undefined=K;const q=ZodNull.create;t.null=q;const H=ZodAny.create;t.any=H;const W=ZodUnknown.create;t.unknown=W;const V=ZodNever.create;t.never=V;const G=ZodVoid.create;t.void=G;const $=ZodArray.create;t.array=$;const X=ZodObject.create;t.object=X;const J=ZodObject.strictCreate;t.strictObject=J;const Y=ZodUnion.create;t.union=Y;const Q=ZodDiscriminatedUnion.create;t.discriminatedUnion=Q;const ee=ZodIntersection.create;t.intersection=ee;const te=ZodTuple.create;t.tuple=te;const ne=ZodRecord.create;t.record=ne;const ie=ZodMap.create;t.map=ie;const ae=ZodSet.create;t.set=ae;const re=ZodFunction.create;t.function=re;const se=ZodLazy.create;t.lazy=se;const oe=ZodLiteral.create;t.literal=oe;const le=ZodEnum.create;t.enum=le;const ue=ZodNativeEnum.create;t.nativeEnum=ue;const ce=ZodPromise.create;t.promise=ce;const de=ZodEffects.create;t.effect=de,t.transformer=de;const he=ZodOptional.create;t.optional=he;const fe=ZodNullable.create;t.nullable=fe;const pe=ZodEffects.createWithPreprocess;t.preprocess=pe;const me=ZodPipeline.create;t.pipeline=me,t.ostring=()=>B().optional(),t.onumber=()=>L().optional(),t.oboolean=()=>z().optional(),t.coerce={string:e=>ZodString.create({...e,coerce:!0}),number:e=>ZodNumber.create({...e,coerce:!0}),boolean:e=>ZodBoolean.create({...e,coerce:!0}),bigint:e=>ZodBigInt.create({...e,coerce:!0}),date:e=>ZodDate.create({...e,coerce:!0})},t.NEVER=u.INVALID},function(e,t,n){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,(i=t.errorUtil||(t.errorUtil={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},i.toString=e=>"string"==typeof e?e:null==e?void 0:e.message},function(e,t,n){"use strict";var i=n(462),a=n(481);function r(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}e.exports.Type=n(126),e.exports.Schema=n(159),e.exports.FAILSAFE_SCHEMA=n(224),e.exports.JSON_SCHEMA=n(296),e.exports.CORE_SCHEMA=n(295),e.exports.DEFAULT_SAFE_SCHEMA=n(171),e.exports.DEFAULT_FULL_SCHEMA=n(194),e.exports.load=i.load,e.exports.loadAll=i.loadAll,e.exports.safeLoad=i.safeLoad,e.exports.safeLoadAll=i.safeLoadAll,e.exports.dump=a.dump,e.exports.safeDump=a.safeDump,e.exports.YAMLException=n(170),e.exports.MINIMAL_SCHEMA=n(224),e.exports.SAFE_SCHEMA=n(171),e.exports.DEFAULT_SCHEMA=n(194),e.exports.scan=r("scan"),e.exports.parse=r("parse"),e.exports.compose=r("compose"),e.exports.addConstructor=r("addConstructor")},function(e,t,n){"use strict";var i=n(158),a=n(170),r=n(463),s=n(171),o=n(194),l=Object.prototype.hasOwnProperty,u=1,c=2,d=3,h=4,f=1,p=2,m=3,g=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,b=/[\x85\u2028\u2029]/,y=/[,\[\]\{\}]/,v=/^(?:!|!!|![a-z\-]+!)$/i,E=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function w(e){return Object.prototype.toString.call(e)}function x(e){return 10===e||13===e}function S(e){return 9===e||32===e}function k(e){return 9===e||32===e||10===e||13===e}function M(e){return 44===e||91===e||93===e||123===e||125===e}function _(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function A(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?"":76===e?"\u2028":80===e?"\u2029":""}function C(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var F=new Array(256),D=new Array(256),T=0;T<256;T++)F[T]=A(T)?1:0,D[T]=A(T);function I(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||o,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function P(e,t){return new a(t,new r(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function O(e,t){throw P(e,t)}function j(e,t){e.onWarning&&e.onWarning.call(null,P(e,t))}var B={YAML:function(e,t,n){var i,a,r;null!==e.version&&O(e,"duplication of %YAML directive"),1!==n.length&&O(e,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&O(e,"ill-formed argument of the YAML directive"),a=parseInt(i[1],10),r=parseInt(i[2],10),1!==a&&O(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=r<2,1!==r&&2!==r&&j(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var i,a;2!==n.length&&O(e,"TAG directive accepts exactly two arguments"),i=n[0],a=n[1],v.test(i)||O(e,"ill-formed tag handle (first argument) of the TAG directive"),l.call(e.tagMap,i)&&O(e,'there is a previously declared suffix for "'+i+'" tag handle'),E.test(a)||O(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[i]=a}};function L(e,t,n,i){var a,r,s,o;if(t<n){if(o=e.input.slice(t,n),i)for(a=0,r=o.length;a<r;a+=1)9===(s=o.charCodeAt(a))||32<=s&&s<=1114111||O(e,"expected valid JSON character");else g.test(o)&&O(e,"the stream contains non-printable characters");e.result+=o}}function N(e,t,n,a){var r,s,o,u;for(i.isObject(n)||O(e,"cannot merge mappings; the provided source object is unacceptable"),o=0,u=(r=Object.keys(n)).length;o<u;o+=1)s=r[o],l.call(t,s)||(t[s]=n[s],a[s]=!0)}function R(e,t,n,i,a,r,s,o){var u,c;if(Array.isArray(a))for(u=0,c=(a=Array.prototype.slice.call(a)).length;u<c;u+=1)Array.isArray(a[u])&&O(e,"nested arrays are not supported inside keys"),"object"==typeof a&&"[object Object]"===w(a[u])&&(a[u]="[object Object]");if("object"==typeof a&&"[object Object]"===w(a)&&(a="[object Object]"),a=String(a),null===t&&(t={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(r))for(u=0,c=r.length;u<c;u+=1)N(e,t,r[u],n);else N(e,t,r,n);else e.json||l.call(n,a)||!l.call(t,a)||(e.line=s||e.line,e.position=o||e.position,O(e,"duplicated mapping key")),t[a]=r,delete n[a];return t}function z(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):O(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function U(e,t,n){for(var i=0,a=e.input.charCodeAt(e.position);0!==a;){for(;S(a);)a=e.input.charCodeAt(++e.position);if(t&&35===a)do{a=e.input.charCodeAt(++e.position)}while(10!==a&&13!==a&&0!==a);if(!x(a))break;for(z(e),a=e.input.charCodeAt(e.position),i++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position)}return-1!==n&&0!==i&&e.lineIndent<n&&j(e,"deficient indentation"),i}function Z(e){var t,n=e.position;return!(45!==(t=e.input.charCodeAt(n))&&46!==t||t!==e.input.charCodeAt(n+1)||t!==e.input.charCodeAt(n+2)||(n+=3,0!==(t=e.input.charCodeAt(n))&&!k(t)))}function K(e,t){1===t?e.result+=" ":t>1&&(e.result+=i.repeat("\n",t-1))}function q(e,t){var n,i,a=e.tag,r=e.anchor,s=[],o=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),i=e.input.charCodeAt(e.position);0!==i&&45===i&&k(e.input.charCodeAt(e.position+1));)if(o=!0,e.position++,U(e,!0,-1)&&e.lineIndent<=t)s.push(null),i=e.input.charCodeAt(e.position);else if(n=e.line,V(e,t,d,!1,!0),s.push(e.result),U(e,!0,-1),i=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==i)O(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!o&&(e.tag=a,e.anchor=r,e.kind="sequence",e.result=s,!0)}function H(e){var t,n,i,a,r=!1,s=!1;if(33!==(a=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&O(e,"duplication of a tag property"),60===(a=e.input.charCodeAt(++e.position))?(r=!0,a=e.input.charCodeAt(++e.position)):33===a?(s=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&62!==a);e.position<e.length?(i=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):O(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==a&&!k(a);)33===a&&(s?O(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),v.test(n)||O(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),y.test(i)&&O(e,"tag suffix cannot contain flow indicator characters")}return i&&!E.test(i)&&O(e,"tag name cannot contain such characters: "+i),r?e.tag=i:l.call(e.tagMap,n)?e.tag=e.tagMap[n]+i:"!"===n?e.tag="!"+i:"!!"===n?e.tag="tag:yaml.org,2002:"+i:O(e,'undeclared tag handle "'+n+'"'),!0}function W(e){var t,n;if(38!==(n=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&O(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!k(n)&&!M(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&O(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function V(e,t,n,a,r){var s,o,g,b,y,v,E,w,A=1,T=!1,I=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=g=h===n||d===n,a&&U(e,!0,-1)&&(T=!0,e.lineIndent>t?A=1:e.lineIndent===t?A=0:e.lineIndent<t&&(A=-1)),1===A)for(;H(e)||W(e);)U(e,!0,-1)?(T=!0,g=s,e.lineIndent>t?A=1:e.lineIndent===t?A=0:e.lineIndent<t&&(A=-1)):g=!1;if(g&&(g=T||r),1!==A&&h!==n||(E=u===n||c===n?t:t+1,w=e.position-e.lineStart,1===A?g&&(q(e,w)||function(e,t,n){var i,a,r,s,o,l=e.tag,u=e.anchor,d={},f={},p=null,m=null,g=null,b=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),o=e.input.charCodeAt(e.position);0!==o;){if(i=e.input.charCodeAt(e.position+1),r=e.line,s=e.position,63!==o&&58!==o||!k(i)){if(!V(e,n,c,!1,!0))break;if(e.line===r){for(o=e.input.charCodeAt(e.position);S(o);)o=e.input.charCodeAt(++e.position);if(58===o)k(o=e.input.charCodeAt(++e.position))||O(e,"a whitespace character is expected after the key-value separator within a block mapping"),b&&(R(e,d,f,p,m,null),p=m=g=null),y=!0,b=!1,a=!1,p=e.tag,m=e.result;else{if(!y)return e.tag=l,e.anchor=u,!0;O(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=l,e.anchor=u,!0;O(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===o?(b&&(R(e,d,f,p,m,null),p=m=g=null),y=!0,b=!0,a=!0):b?(b=!1,a=!0):O(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,o=i;if((e.line===r||e.lineIndent>t)&&(V(e,t,h,!0,a)&&(b?m=e.result:g=e.result),b||(R(e,d,f,p,m,g,r,s),p=m=g=null),U(e,!0,-1),o=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==o)O(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return b&&R(e,d,f,p,m,null),y&&(e.tag=l,e.anchor=u,e.kind="mapping",e.result=d),y}(e,w,E))||function(e,t){var n,i,a,r,s,o,l,c,d,h,f=!0,p=e.tag,m=e.anchor,g={};if(91===(h=e.input.charCodeAt(e.position)))a=93,o=!1,i=[];else{if(123!==h)return!1;a=125,o=!0,i={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=i),h=e.input.charCodeAt(++e.position);0!==h;){if(U(e,!0,t),(h=e.input.charCodeAt(e.position))===a)return e.position++,e.tag=p,e.anchor=m,e.kind=o?"mapping":"sequence",e.result=i,!0;f||O(e,"missed comma between flow collection entries"),d=null,r=s=!1,63===h&&k(e.input.charCodeAt(e.position+1))&&(r=s=!0,e.position++,U(e,!0,t)),n=e.line,V(e,t,u,!1,!0),c=e.tag,l=e.result,U(e,!0,t),h=e.input.charCodeAt(e.position),!s&&e.line!==n||58!==h||(r=!0,h=e.input.charCodeAt(++e.position),U(e,!0,t),V(e,t,u,!1,!0),d=e.result),o?R(e,i,g,c,l,d):r?i.push(R(e,null,g,c,l,d)):i.push(l),U(e,!0,t),44===(h=e.input.charCodeAt(e.position))?(f=!0,h=e.input.charCodeAt(++e.position)):f=!1}O(e,"unexpected end of the stream within a flow collection")}(e,E)?I=!0:(o&&function(e,t){var n,a,r,s,o,l=f,u=!1,c=!1,d=t,h=0,g=!1;if(124===(s=e.input.charCodeAt(e.position)))a=!1;else{if(62!==s)return!1;a=!0}for(e.kind="scalar",e.result="";0!==s;)if(43===(s=e.input.charCodeAt(++e.position))||45===s)f===l?l=43===s?m:p:O(e,"repeat of a chomping mode identifier");else{if(!((r=48<=(o=s)&&o<=57?o-48:-1)>=0))break;0===r?O(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?O(e,"repeat of an indentation width identifier"):(d=t+r-1,c=!0)}if(S(s)){do{s=e.input.charCodeAt(++e.position)}while(S(s));if(35===s)do{s=e.input.charCodeAt(++e.position)}while(!x(s)&&0!==s)}for(;0!==s;){for(z(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!c||e.lineIndent<d)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>d&&(d=e.lineIndent),x(s))h++;else{if(e.lineIndent<d){l===m?e.result+=i.repeat("\n",u?1+h:h):l===f&&u&&(e.result+="\n");break}for(a?S(s)?(g=!0,e.result+=i.repeat("\n",u?1+h:h)):g?(g=!1,e.result+=i.repeat("\n",h+1)):0===h?u&&(e.result+=" "):e.result+=i.repeat("\n",h):e.result+=i.repeat("\n",u?1+h:h),u=!0,c=!0,h=0,n=e.position;!x(s)&&0!==s;)s=e.input.charCodeAt(++e.position);L(e,n,e.position,!1)}}return!0}(e,E)||function(e,t){var n,i,a;if(39!==(n=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,i=a=e.position;0!==(n=e.input.charCodeAt(e.position));)if(39===n){if(L(e,i,e.position,!0),39!==(n=e.input.charCodeAt(++e.position)))return!0;i=e.position,e.position++,a=e.position}else x(n)?(L(e,i,a,!0),K(e,U(e,!1,t)),i=a=e.position):e.position===e.lineStart&&Z(e)?O(e,"unexpected end of the document within a single quoted scalar"):(e.position++,a=e.position);O(e,"unexpected end of the stream within a single quoted scalar")}(e,E)||function(e,t){var n,i,a,r,s,o,l;if(34!==(o=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(o=e.input.charCodeAt(e.position));){if(34===o)return L(e,n,e.position,!0),e.position++,!0;if(92===o){if(L(e,n,e.position,!0),x(o=e.input.charCodeAt(++e.position)))U(e,!1,t);else if(o<256&&F[o])e.result+=D[o],e.position++;else if((s=120===(l=o)?2:117===l?4:85===l?8:0)>0){for(a=s,r=0;a>0;a--)(s=_(o=e.input.charCodeAt(++e.position)))>=0?r=(r<<4)+s:O(e,"expected hexadecimal character");e.result+=C(r),e.position++}else O(e,"unknown escape sequence");n=i=e.position}else x(o)?(L(e,n,i,!0),K(e,U(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Z(e)?O(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}O(e,"unexpected end of the stream within a double quoted scalar")}(e,E)?I=!0:function(e){var t,n,i;if(42!==(i=e.input.charCodeAt(e.position)))return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!k(i)&&!M(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&O(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),l.call(e.anchorMap,n)||O(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],U(e,!0,-1),!0}(e)?(I=!0,null===e.tag&&null===e.anchor||O(e,"alias node should not have any properties")):function(e,t,n){var i,a,r,s,o,l,u,c,d=e.kind,h=e.result;if(k(c=e.input.charCodeAt(e.position))||M(c)||35===c||38===c||42===c||33===c||124===c||62===c||39===c||34===c||37===c||64===c||96===c)return!1;if((63===c||45===c)&&(k(i=e.input.charCodeAt(e.position+1))||n&&M(i)))return!1;for(e.kind="scalar",e.result="",a=r=e.position,s=!1;0!==c;){if(58===c){if(k(i=e.input.charCodeAt(e.position+1))||n&&M(i))break}else if(35===c){if(k(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&Z(e)||n&&M(c))break;if(x(c)){if(o=e.line,l=e.lineStart,u=e.lineIndent,U(e,!1,-1),e.lineIndent>=t){s=!0,c=e.input.charCodeAt(e.position);continue}e.position=r,e.line=o,e.lineStart=l,e.lineIndent=u;break}}s&&(L(e,a,r,!1),K(e,e.line-o),a=r=e.position,s=!1),S(c)||(r=e.position+1),c=e.input.charCodeAt(++e.position)}return L(e,a,r,!1),!!e.result||(e.kind=d,e.result=h,!1)}(e,E,u===n)&&(I=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===A&&(I=g&&q(e,w))),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&O(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),b=0,y=e.implicitTypes.length;b<y;b+=1)if((v=e.implicitTypes[b]).resolve(e.result)){e.result=v.construct(e.result),e.tag=v.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else l.call(e.typeMap[e.kind||"fallback"],e.tag)?(v=e.typeMap[e.kind||"fallback"][e.tag],null!==e.result&&v.kind!==e.kind&&O(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+v.kind+'", not "'+e.kind+'"'),v.resolve(e.result)?(e.result=v.construct(e.result),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):O(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):O(e,"unknown tag !<"+e.tag+">");return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||I}function G(e){var t,n,i,a,r=e.position,s=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(a=e.input.charCodeAt(e.position))&&(U(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==a));){for(s=!0,a=e.input.charCodeAt(++e.position),t=e.position;0!==a&&!k(a);)a=e.input.charCodeAt(++e.position);for(i=[],(n=e.input.slice(t,e.position)).length<1&&O(e,"directive name must not be less than one character in length");0!==a;){for(;S(a);)a=e.input.charCodeAt(++e.position);if(35===a){do{a=e.input.charCodeAt(++e.position)}while(0!==a&&!x(a));break}if(x(a))break;for(t=e.position;0!==a&&!k(a);)a=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}0!==a&&z(e),l.call(B,n)?B[n](e,n,i):j(e,'unknown document directive "'+n+'"')}U(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,U(e,!0,-1)):s&&O(e,"directives end mark is expected"),V(e,e.lineIndent-1,h,!1,!0),U(e,!0,-1),e.checkLineBreaks&&b.test(e.input.slice(r,e.position))&&j(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Z(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,U(e,!0,-1)):e.position<e.length-1&&O(e,"end of the stream or a document separator is expected")}function $(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var n=new I(e,t),i=e.indexOf("\0");for(-1!==i&&(n.position=i,O(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)G(n);return n.documents}function X(e,t,n){null!==t&&"object"==typeof t&&void 0===n&&(n=t,t=null);var i=$(e,n);if("function"!=typeof t)return i;for(var a=0,r=i.length;a<r;a+=1)t(i[a])}function J(e,t){var n=$(e,t);if(0!==n.length){if(1===n.length)return n[0];throw new a("expected a single document in the stream, but found more")}}e.exports.loadAll=X,e.exports.load=J,e.exports.safeLoadAll=function(e,t,n){return"object"==typeof t&&null!==t&&void 0===n&&(n=t,t=null),X(e,t,i.extend({schema:s},n))},e.exports.safeLoad=function(e,t){return J(e,i.extend({schema:s},t))}},function(e,t,n){"use strict";var i=n(158);function a(e,t,n,i,a){this.name=e,this.buffer=t,this.position=n,this.line=i,this.column=a}a.prototype.getSnippet=function(e,t){var n,a,r,s,o;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",a=this.position;a>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(a-1));)if(a-=1,this.position-a>t/2-1){n=" ... ",a+=5;break}for(r="",s=this.position;s<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(s));)if((s+=1)-this.position>t/2-1){r=" ... ",s-=5;break}return o=this.buffer.slice(a,s),i.repeat(" ",e)+n+o+r+"\n"+i.repeat(" ",e+this.position-a+n.length)+"^"},a.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet())&&(n+=":\n"+t),n},e.exports=a},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var i=n(158),a=n(126);function r(e){return 48<=e&&e<=55}function s(e){return 48<=e&&e<=57}e.exports=new a("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=e.length,a=0,o=!1;if(!i)return!1;if("-"!==(t=e[a])&&"+"!==t||(t=e[++a]),"0"===t){if(a+1===i)return!0;if("b"===(t=e[++a])){for(a++;a<i;a++)if("_"!==(t=e[a])){if("0"!==t&&"1"!==t)return!1;o=!0}return o&&"_"!==t}if("x"===t){for(a++;a<i;a++)if("_"!==(t=e[a])){if(!(48<=(n=e.charCodeAt(a))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==t}for(;a<i;a++)if("_"!==(t=e[a])){if(!r(e.charCodeAt(a)))return!1;o=!0}return o&&"_"!==t}if("_"===t)return!1;for(;a<i;a++)if("_"!==(t=e[a])){if(":"===t)break;if(!s(e.charCodeAt(a)))return!1;o=!0}return!(!o||"_"===t)&&(":"!==t||/^(:[0-5]?[0-9])+$/.test(e.slice(a)))},construct:function(e){var t,n,i=e,a=1,r=[];return-1!==i.indexOf("_")&&(i=i.replace(/_/g,"")),"-"!==(t=i[0])&&"+"!==t||("-"===t&&(a=-1),t=(i=i.slice(1))[0]),"0"===i?0:"0"===t?"b"===i[1]?a*parseInt(i.slice(2),2):"x"===i[1]?a*parseInt(i,16):a*parseInt(i,8):-1!==i.indexOf(":")?(i.split(":").forEach((function(e){r.unshift(parseInt(e,10))})),i=0,n=1,r.forEach((function(e){i+=e*n,n*=60})),a*i):a*parseInt(i,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!i.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(e,t,n){"use strict";var i=n(158),a=n(126),r=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),s=/^[-+]?[0-9]+e/;e.exports=new a("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!r.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n,i,a;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,a=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:t.indexOf(":")>=0?(t.split(":").forEach((function(e){a.unshift(parseFloat(e,10))})),t=0,i=1,a.forEach((function(e){t+=e*i,i*=60})),n*t):n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||i.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(e))return"-0.0";return n=e.toString(10),s.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})},function(e,t,n){"use strict";var i=n(126),a=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),r=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");e.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==a.exec(e)||null!==r.exec(e))},construct:function(e){var t,n,i,s,o,l,u,c,d=0,h=null;if(null===(t=a.exec(e))&&(t=r.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],i=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(n,i,s));if(o=+t[4],l=+t[5],u=+t[6],t[7]){for(d=t[7].slice(0,3);d.length<3;)d+="0";d=+d}return t[9]&&(h=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(h=-h)),c=new Date(Date.UTC(n,i,s,o,l,u,d)),h&&c.setTime(c.getTime()-h),c},instanceOf:Date,represent:function(e){return e.toISOString()}})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}})},function(e,t,n){"use strict";var i;try{i=n(86).Buffer}catch(e){}var a=n(126),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";e.exports=new a("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,i=0,a=e.length,s=r;for(n=0;n<a;n++)if(!((t=s.indexOf(e.charAt(n)))>64)){if(t<0)return!1;i+=6}return i%8==0},construct:function(e){var t,n,a=e.replace(/[\r\n=]/g,""),s=a.length,o=r,l=0,u=[];for(t=0;t<s;t++)t%4==0&&t&&(u.push(l>>16&255),u.push(l>>8&255),u.push(255&l)),l=l<<6|o.indexOf(a.charAt(t));return 0==(n=s%4*6)?(u.push(l>>16&255),u.push(l>>8&255),u.push(255&l)):18===n?(u.push(l>>10&255),u.push(l>>2&255)):12===n&&u.push(l>>4&255),i?i.from?i.from(u):new i(u):u},predicate:function(e){return i&&i.isBuffer(e)},represent:function(e){var t,n,i="",a=0,s=e.length,o=r;for(t=0;t<s;t++)t%3==0&&t&&(i+=o[a>>18&63],i+=o[a>>12&63],i+=o[a>>6&63],i+=o[63&a]),a=(a<<8)+e[t];return 0==(n=s%3)?(i+=o[a>>18&63],i+=o[a>>12&63],i+=o[a>>6&63],i+=o[63&a]):2===n?(i+=o[a>>10&63],i+=o[a>>4&63],i+=o[a<<2&63],i+=o[64]):1===n&&(i+=o[a>>2&63],i+=o[a<<4&63],i+=o[64],i+=o[64]),i}})},function(e,t,n){"use strict";var i=n(126),a=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,s,o,l=[],u=e;for(t=0,n=u.length;t<n;t+=1){if(i=u[t],o=!1,"[object Object]"!==r.call(i))return!1;for(s in i)if(a.call(i,s)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==l.indexOf(s))return!1;l.push(s)}return!0},construct:function(e){return null!==e?e:[]}})},function(e,t,n){"use strict";var i=n(126),a=Object.prototype.toString;e.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,i,r,s,o=e;for(s=new Array(o.length),t=0,n=o.length;t<n;t+=1){if(i=o[t],"[object Object]"!==a.call(i))return!1;if(1!==(r=Object.keys(i)).length)return!1;s[t]=[r[0],i[r[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,i,a,r,s=e;for(r=new Array(s.length),t=0,n=s.length;t<n;t+=1)i=s[t],a=Object.keys(i),r[t]=[a[0],i[a[0]]];return r}})},function(e,t,n){"use strict";var i=n(126),a=Object.prototype.hasOwnProperty;e.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(a.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(e){return void 0===e},represent:function(){return""}})},function(e,t,n){"use strict";var i=n(126);e.exports=new i("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(e){if(null===e)return!1;if(0===e.length)return!1;var t=e,n=/\/([gim]*)$/.exec(e),i="";if("/"===t[0]){if(n&&(i=n[1]),i.length>3)return!1;if("/"!==t[t.length-i.length-1])return!1}return!0},construct:function(e){var t=e,n=/\/([gim]*)$/.exec(e),i="";return"/"===t[0]&&(n&&(i=n[1]),t=t.slice(1,t.length-i.length-1)),new RegExp(t,i)},predicate:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},represent:function(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}})},function(e,t,n){"use strict";var i;try{i=n(480)}catch(e){"undefined"!=typeof window&&(i=window.esprima)}var a=n(126);e.exports=new a("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(e){if(null===e)return!1;try{var t="("+e+")",n=i.parse(t,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(e){return!1}},construct:function(e){var t,n="("+e+")",a=i.parse(n,{range:!0}),r=[];if("Program"!==a.type||1!==a.body.length||"ExpressionStatement"!==a.body[0].type||"ArrowFunctionExpression"!==a.body[0].expression.type&&"FunctionExpression"!==a.body[0].expression.type)throw new Error("Failed to resolve function");return a.body[0].expression.params.forEach((function(e){r.push(e.name)})),t=a.body[0].expression.body.range,"BlockStatement"===a.body[0].expression.body.type?new Function(r,n.slice(t[0]+1,t[1]-1)):new Function(r,"return "+n.slice(t[0],t[1]))},predicate:function(e){return"[object Function]"===Object.prototype.toString.call(e)},represent:function(e){return e.toString()}})},function(e,t,n){var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=n(3),r=n(8),s=n(15);function o(e,t,n){var s=null,o=function(e,t){n&&n(e,t),s&&s.visit(e,t)},l="function"==typeof n?o:null,u=!1;if(t){u="boolean"==typeof t.comment&&t.comment;var c="boolean"==typeof t.attachComment&&t.attachComment;(u||c)&&((s=new i.CommentHandler).attach=c,t.comment=!0,l=o)}var d,h=!1;t&&"string"==typeof t.sourceType&&(h="module"===t.sourceType),d=t&&"boolean"==typeof t.jsx&&t.jsx?new a.JSXParser(e,t,l):new r.Parser(e,t,l);var f=h?d.parseModule():d.parseScript();return u&&s&&(f.comments=s.comments),d.config.tokens&&(f.tokens=d.tokens),d.config.tolerant&&(f.errors=d.errorHandler.errors),f}t.parse=o,t.parseModule=function(e,t,n){var i=t||{};return i.sourceType="module",o(e,i,n)},t.parseScript=function(e,t,n){var i=t||{};return i.sourceType="script",o(e,i,n)},t.tokenize=function(e,t,n){var i,a=new s.Tokenizer(e,t);i=[];try{for(;;){var r=a.getNextToken();if(!r)break;n&&(r=n(r)),i.push(r)}}catch(e){a.errorHandler.tolerate(e)}return a.errorHandler.tolerant&&(i.errors=a.errors()),i};var l=n(2);t.Syntax=l.Syntax,t.version="4.0.1"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===i.Syntax.BlockStatement&&0===e.body.length){for(var n=[],a=this.leading.length-1;a>=0;--a){var r=this.leading[a];t.end.offset>=r.start&&(n.unshift(r.comment),this.leading.splice(a,1),this.trailing.splice(a,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var i=this.trailing[n];i.start>=e.end.offset&&t.unshift(i.comment)}return this.trailing.length=0,t}var a=this.stack[this.stack.length-1];if(a&&a.node.trailingComments){var r=a.node.trailingComments[0];r&&r.range[0]>=e.end.offset&&(t=a.node.trailingComments,delete a.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){for(var t,n=[];this.stack.length>0&&(r=this.stack[this.stack.length-1])&&r.start>=e.start.offset;)t=r.node,this.stack.pop();if(t){for(var i=(t.leadingComments?t.leadingComments.length:0)-1;i>=0;--i){var a=t.leadingComments[i];a.range[1]<=e.start.offset&&(n.unshift(a),t.leadingComments.splice(i,1))}return t.leadingComments&&0===t.leadingComments.length&&delete t.leadingComments,n}for(i=this.leading.length-1;i>=0;--i){var r;(r=this.leading[i]).start<=e.start.offset&&(n.unshift(r.comment),this.leading.splice(i,1))}return n},e.prototype.visitNode=function(e,t){if(!(e.type===i.Syntax.Program&&e.body.length>0)){this.insertInnerComments(e,t);var n=this.findTrailingComments(t),a=this.findLeadingComments(t);a.length>0&&(e.leadingComments=a),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})}},e.prototype.visitComment=function(e,t){var n="L"===e.type[0]?"Line":"Block",i={type:n,value:e.value};if(e.range&&(i.range=e.range),e.loc&&(i.loc=e.loc),this.comments.push(i),this.attach){var a={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(a.comment.loc=e.loc),e.type=n,this.leading.push(a),this.trailing.push(a)}},e.prototype.visit=function(e,t){"LineComment"===e.type||"BlockComment"===e.type?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),s=n(5),o=n(6),l=n(7),u=n(8),c=n(13),d=n(14);function h(e){var t;switch(e.type){case o.JSXSyntax.JSXIdentifier:t=e.name;break;case o.JSXSyntax.JSXNamespacedName:var n=e;t=h(n.namespace)+":"+h(n.name);break;case o.JSXSyntax.JSXMemberExpression:var i=e;t=h(i.object)+"."+h(i.property)}return t}c.TokenName[100]="JSXIdentifier",c.TokenName[101]="JSXText";var f=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}return a(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){for(var t="&",n=!0,i=!1,a=!1,s=!1;!this.scanner.eof()&&n&&!i;){var o=this.scanner.source[this.scanner.index];if(o===e)break;if(i=";"===o,t+=o,++this.scanner.index,!i)switch(t.length){case 2:a="#"===o;break;case 3:a&&(n=(s="x"===o)||r.Character.isDecimalDigit(o.charCodeAt(0)),a=a&&!s);break;default:n=(n=n&&!(a&&!r.Character.isDecimalDigit(o.charCodeAt(0))))&&!(s&&!r.Character.isHexDigit(o.charCodeAt(0)))}}if(n&&i&&t.length>2){var l=t.substr(1,t.length-2);a&&l.length>1?t=String.fromCharCode(parseInt(l.substr(1),10)):s&&l.length>2?t=String.fromCharCode(parseInt("0"+l.substr(1),16)):a||s||!d.XHTMLEntities[l]||(t=d.XHTMLEntities[l])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(60===e||62===e||47===e||58===e||61===e||123===e||125===e)return{type:7,value:o=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(34===e||39===e){for(var t=this.scanner.index,n=this.scanner.source[this.scanner.index++],i="";!this.scanner.eof()&&(l=this.scanner.source[this.scanner.index++])!==n;)i+="&"===l?this.scanXHTMLEntity(n):l;return{type:8,value:i,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(46===e){var a=this.scanner.source.charCodeAt(this.scanner.index+1),s=this.scanner.source.charCodeAt(this.scanner.index+2),o=46===a&&46===s?"...":".";return t=this.scanner.index,this.scanner.index+=o.length,{type:7,value:o,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}if(96===e)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(r.Character.isIdentifierStart(e)&&92!==e){for(t=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var l=this.scanner.source.charCodeAt(this.scanner.index);if(r.Character.isIdentifierPart(l)&&92!==l)++this.scanner.index;else{if(45!==l)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(t,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:t,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var e=this.scanner.index,t="";!this.scanner.eof();){var n=this.scanner.source[this.scanner.index];if("{"===n||"<"===n)break;++this.scanner.index,t+=n,r.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,"\r"===n&&"\n"===this.scanner.source[this.scanner.index]&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var i={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(i)),i},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return 7===t.type&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return 100!==t.type&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(n,i))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var a=t;this.expectJSX(".");var r=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(a,r))}return t},t.prototype.parseJSXAttributeName=function(){var e,t=this.createJSXNode(),n=this.parseJSXIdentifier();if(this.matchJSX(":")){var i=n;this.expectJSX(":");var a=this.parseJSXIdentifier();e=this.finalize(t,new s.JSXNamespacedName(i,a))}else e=n;return e},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();8!==t.type&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new l.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){for(var e=[];!this.matchJSX("/")&&!this.matchJSX(">");){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,i,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var n=this.parseJSXElementName(),i=this.parseJSXAttributes(),a=this.matchJSX("/");return a&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(n,a,i))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e,t=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(e=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),e=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(t,new s.JSXExpressionContainer(e))},t.prototype.parseJSXChildren=function(){for(var e=[];!this.scanner.eof();){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var i=this.getTokenRaw(n),a=this.finalize(t,new s.JSXText(n.value,i));e.push(a)}if("{"!==this.scanner.source[this.scanner.index])break;var r=this.parseJSXExpressionContainer();e.push(r)}return e},t.prototype.parseComplexJSXElement=function(e){for(var t=[];!this.scanner.eof();){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),i=this.parseJSXBoundaryElement();if(i.type===o.JSXSyntax.JSXOpeningElement){var a=i;if(a.selfClosing){var r=this.finalize(n,new s.JSXElement(a,[],null));e.children.push(r)}else t.push(e),e={node:n,opening:a,closing:null,children:[]}}if(i.type===o.JSXSyntax.JSXClosingElement){e.closing=i;var l=h(e.opening.name);if(l!==h(e.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",l),!(t.length>0))break;r=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing)),(e=t[t.length-1]).children.push(r),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],i=null;if(!t.selfClosing){var a=this.parseComplexJSXElement({node:e,opening:t,closing:i,children:n});n=a.children,i=a.closing}return this.finalize(e,new s.JSXElement(t,n,i))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(u.Parser);t.JSXParser=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return 10===e||13===e||8232===e||8233===e},isIdentifierStart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6);t.JSXClosingElement=function(e){this.type=i.JSXSyntax.JSXClosingElement,this.name=e};t.JSXElement=function(e,t,n){this.type=i.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n};t.JSXEmptyExpression=function(){this.type=i.JSXSyntax.JSXEmptyExpression};t.JSXExpressionContainer=function(e){this.type=i.JSXSyntax.JSXExpressionContainer,this.expression=e};t.JSXIdentifier=function(e){this.type=i.JSXSyntax.JSXIdentifier,this.name=e};t.JSXMemberExpression=function(e,t){this.type=i.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t};t.JSXAttribute=function(e,t){this.type=i.JSXSyntax.JSXAttribute,this.name=e,this.value=t};t.JSXNamespacedName=function(e,t){this.type=i.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t};t.JSXOpeningElement=function(e,t,n){this.type=i.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n};t.JSXSpreadAttribute=function(e){this.type=i.JSXSyntax.JSXSpreadAttribute,this.argument=e};t.JSXText=function(e,t){this.type=i.JSXSyntax.JSXText,this.value=e,this.raw=t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.ArrayExpression=function(e){this.type=i.Syntax.ArrayExpression,this.elements=e};t.ArrayPattern=function(e){this.type=i.Syntax.ArrayPattern,this.elements=e};t.ArrowFunctionExpression=function(e,t,n){this.type=i.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1};t.AssignmentExpression=function(e,t,n){this.type=i.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n};t.AssignmentPattern=function(e,t){this.type=i.Syntax.AssignmentPattern,this.left=e,this.right=t};t.AsyncArrowFunctionExpression=function(e,t,n){this.type=i.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0};t.AsyncFunctionDeclaration=function(e,t,n){this.type=i.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AsyncFunctionExpression=function(e,t,n){this.type=i.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0};t.AwaitExpression=function(e){this.type=i.Syntax.AwaitExpression,this.argument=e};t.BinaryExpression=function(e,t,n){var a="||"===e||"&&"===e;this.type=a?i.Syntax.LogicalExpression:i.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n};t.BlockStatement=function(e){this.type=i.Syntax.BlockStatement,this.body=e};t.BreakStatement=function(e){this.type=i.Syntax.BreakStatement,this.label=e};t.CallExpression=function(e,t){this.type=i.Syntax.CallExpression,this.callee=e,this.arguments=t};t.CatchClause=function(e,t){this.type=i.Syntax.CatchClause,this.param=e,this.body=t};t.ClassBody=function(e){this.type=i.Syntax.ClassBody,this.body=e};t.ClassDeclaration=function(e,t,n){this.type=i.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n};t.ClassExpression=function(e,t,n){this.type=i.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n};t.ComputedMemberExpression=function(e,t){this.type=i.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t};t.ConditionalExpression=function(e,t,n){this.type=i.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n};t.ContinueStatement=function(e){this.type=i.Syntax.ContinueStatement,this.label=e};t.DebuggerStatement=function(){this.type=i.Syntax.DebuggerStatement};t.Directive=function(e,t){this.type=i.Syntax.ExpressionStatement,this.expression=e,this.directive=t};t.DoWhileStatement=function(e,t){this.type=i.Syntax.DoWhileStatement,this.body=e,this.test=t};t.EmptyStatement=function(){this.type=i.Syntax.EmptyStatement};t.ExportAllDeclaration=function(e){this.type=i.Syntax.ExportAllDeclaration,this.source=e};t.ExportDefaultDeclaration=function(e){this.type=i.Syntax.ExportDefaultDeclaration,this.declaration=e};t.ExportNamedDeclaration=function(e,t,n){this.type=i.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n};t.ExportSpecifier=function(e,t){this.type=i.Syntax.ExportSpecifier,this.exported=t,this.local=e};t.ExpressionStatement=function(e){this.type=i.Syntax.ExpressionStatement,this.expression=e};t.ForInStatement=function(e,t,n){this.type=i.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1};t.ForOfStatement=function(e,t,n){this.type=i.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n};t.ForStatement=function(e,t,n,a){this.type=i.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=a};t.FunctionDeclaration=function(e,t,n,a){this.type=i.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=a,this.expression=!1,this.async=!1};t.FunctionExpression=function(e,t,n,a){this.type=i.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=a,this.expression=!1,this.async=!1};t.Identifier=function(e){this.type=i.Syntax.Identifier,this.name=e};t.IfStatement=function(e,t,n){this.type=i.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n};t.ImportDeclaration=function(e,t){this.type=i.Syntax.ImportDeclaration,this.specifiers=e,this.source=t};t.ImportDefaultSpecifier=function(e){this.type=i.Syntax.ImportDefaultSpecifier,this.local=e};t.ImportNamespaceSpecifier=function(e){this.type=i.Syntax.ImportNamespaceSpecifier,this.local=e};t.ImportSpecifier=function(e,t){this.type=i.Syntax.ImportSpecifier,this.local=e,this.imported=t};t.LabeledStatement=function(e,t){this.type=i.Syntax.LabeledStatement,this.label=e,this.body=t};t.Literal=function(e,t){this.type=i.Syntax.Literal,this.value=e,this.raw=t};t.MetaProperty=function(e,t){this.type=i.Syntax.MetaProperty,this.meta=e,this.property=t};t.MethodDefinition=function(e,t,n,a,r){this.type=i.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=a,this.static=r};t.Module=function(e){this.type=i.Syntax.Program,this.body=e,this.sourceType="module"};t.NewExpression=function(e,t){this.type=i.Syntax.NewExpression,this.callee=e,this.arguments=t};t.ObjectExpression=function(e){this.type=i.Syntax.ObjectExpression,this.properties=e};t.ObjectPattern=function(e){this.type=i.Syntax.ObjectPattern,this.properties=e};t.Property=function(e,t,n,a,r,s){this.type=i.Syntax.Property,this.key=t,this.computed=n,this.value=a,this.kind=e,this.method=r,this.shorthand=s};t.RegexLiteral=function(e,t,n,a){this.type=i.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:a}};t.RestElement=function(e){this.type=i.Syntax.RestElement,this.argument=e};t.ReturnStatement=function(e){this.type=i.Syntax.ReturnStatement,this.argument=e};t.Script=function(e){this.type=i.Syntax.Program,this.body=e,this.sourceType="script"};t.SequenceExpression=function(e){this.type=i.Syntax.SequenceExpression,this.expressions=e};t.SpreadElement=function(e){this.type=i.Syntax.SpreadElement,this.argument=e};t.StaticMemberExpression=function(e,t){this.type=i.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t};t.Super=function(){this.type=i.Syntax.Super};t.SwitchCase=function(e,t){this.type=i.Syntax.SwitchCase,this.test=e,this.consequent=t};t.SwitchStatement=function(e,t){this.type=i.Syntax.SwitchStatement,this.discriminant=e,this.cases=t};t.TaggedTemplateExpression=function(e,t){this.type=i.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t};t.TemplateElement=function(e,t){this.type=i.Syntax.TemplateElement,this.value=e,this.tail=t};t.TemplateLiteral=function(e,t){this.type=i.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t};t.ThisExpression=function(){this.type=i.Syntax.ThisExpression};t.ThrowStatement=function(e){this.type=i.Syntax.ThrowStatement,this.argument=e};t.TryStatement=function(e,t,n){this.type=i.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n};t.UnaryExpression=function(e,t){this.type=i.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0};t.UpdateExpression=function(e,t,n){this.type=i.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n};t.VariableDeclaration=function(e,t){this.type=i.Syntax.VariableDeclaration,this.declarations=e,this.kind=t};t.VariableDeclarator=function(e,t){this.type=i.Syntax.VariableDeclarator,this.id=e,this.init=t};t.WhileStatement=function(e,t){this.type=i.Syntax.WhileStatement,this.test=e,this.body=t};t.WithStatement=function(e,t){this.type=i.Syntax.WithStatement,this.object=e,this.body=t};t.YieldExpression=function(e,t){this.type=i.Syntax.YieldExpression,this.argument=e,this.delegate=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(10),r=n(11),s=n(7),o=n(12),l=n(2),u=n(13),c="ArrowParameterPlaceHolder",d=function(){function e(e,t,n){void 0===t&&(t={}),this.config={range:"boolean"==typeof t.range&&t.range,loc:"boolean"==typeof t.loc&&t.loc,source:null,tokens:"boolean"==typeof t.tokens&&t.tokens,comment:"boolean"==typeof t.comment&&t.comment,tolerant:"boolean"==typeof t.tolerant&&t.tolerant},this.config.loc&&t.source&&null!==t.source&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new a.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new o.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=Array.prototype.slice.call(arguments,1),r=e.replace(/%(\d)/g,(function(e,t){return i.assert(t<a.length,"Message reference must be in range"),a[t]})),s=this.lastMarker.index,o=this.lastMarker.line,l=this.lastMarker.column+1;throw this.errorHandler.createError(s,o,l,r)},e.prototype.tolerateError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=Array.prototype.slice.call(arguments,1),r=e.replace(/%(\d)/g,(function(e,t){return i.assert(t<a.length,"Message reference must be in range"),a[t]})),s=this.lastMarker.index,o=this.scanner.lineNumber,l=this.lastMarker.column+1;this.errorHandler.tolerateError(s,o,l,r)},e.prototype.unexpectedTokenError=function(e,t){var n,i=t||r.Messages.UnexpectedToken;if(e?(t||(i=2===e.type?r.Messages.UnexpectedEOS:3===e.type?r.Messages.UnexpectedIdentifier:6===e.type?r.Messages.UnexpectedNumber:8===e.type?r.Messages.UnexpectedString:10===e.type?r.Messages.UnexpectedTemplate:r.Messages.UnexpectedToken,4===e.type&&(this.scanner.isFutureReservedWord(e.value)?i=r.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(i=r.Messages.StrictReservedWord))),n=e.value):n="ILLEGAL",i=i.replace("%0",n),e&&"number"==typeof e.lineNumber){var a=e.start,s=e.lineNumber,o=this.lastMarker.index-this.lastMarker.column,l=e.start-o+1;return this.errorHandler.createError(a,s,l,i)}return a=this.lastMarker.index,s=this.lastMarker.line,l=this.lastMarker.column+1,this.errorHandler.createError(a,s,l,i)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(this.config.comment){var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],i=void 0;i={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(i.range=n.range),this.config.loc&&(i.loc=n.loc);var a={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(i,a)}}else this.scanner.scanComments()},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:u.TokenName[e.type],value:this.getTokenRaw(e)};if(this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),9===e.type){var n=e.pattern,i=e.flags;t.regex={pattern:n,flags:i}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&3===t.type&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&2!==t.type&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){void 0===t&&(t=0);var n=e.start-e.lineStart,i=e.lineNumber;return n<0&&(n+=t,i--),{index:e.start,line:i,column:n}},e.prototype.finalize=function(e,t){if(this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source)),this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();7===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;7===e.type&&","===e.value?this.nextToken():7===e.type&&";"===e.value?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,r.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();4===t.type&&t.value===e||this.throwUnexpectedToken(t)},e.prototype.match=function(e){return 7===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return 4===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return 3===this.lookahead.type&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(7!==this.lookahead.type)return!1;var e=this.lookahead.value;return"="===e||"*="===e||"**="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,i=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var a=e.call(this);return null!==this.context.firstCoverInitializedNameError&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=i,a},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,i=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var a=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=i||this.context.firstCoverInitializedNameError,a},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(2===this.lookahead.type||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e,t,n,i=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&"await"===this.lookahead.value&&this.tolerateUnexpectedToken(this.lookahead),e=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(i,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,r.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.Literal(t.value,n));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.Literal("true"===t.value,n));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,t=this.nextToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.Literal(null,n));break;case 10:e=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,e=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":e=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":e=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,t=this.nextRegexToken(),n=this.getTokenRaw(t),e=this.finalize(i,new s.RegexLiteral(t.regex,n,t.pattern,t.flags));break;default:e=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?e=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?e=this.finalize(i,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?e=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),e=this.finalize(i,new s.ThisExpression)):e=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:e=this.throwUnexpectedToken(this.nextToken())}return e},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new s.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new s.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var i=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,i},e.prototype.parsePropertyMethodFunction=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters(),i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!1))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await;this.context.allowYield=!1,this.context.await=!0;var i=this.parseFormalParameters(),a=this.parsePropertyMethod(i);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new s.AsyncFunctionExpression(null,i.params,a))},e.prototype.parseObjectPropertyKey=function(){var e,t=this.createNode(),n=this.nextToken();switch(n.type){case 8:case 6:this.context.strict&&n.octal&&this.tolerateUnexpectedToken(n,r.Messages.StrictOctalLiteral);var i=this.getTokenRaw(n);e=this.finalize(t,new s.Literal(n.value,i));break;case 3:case 1:case 5:case 4:e=this.finalize(t,new s.Identifier(n.value));break;case 7:"["===n.value?(e=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):e=this.throwUnexpectedToken(n);break;default:e=this.throwUnexpectedToken(n)}return e},e.prototype.isPropertyKey=function(e,t){return e.type===l.Syntax.Identifier&&e.name===t||e.type===l.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t,n=this.createNode(),i=this.lookahead,a=null,o=null,l=!1,u=!1,c=!1,d=!1;if(3===i.type){var h=i.value;this.nextToken(),l=this.match("["),a=(d=!(this.hasLineTerminator||"async"!==h||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(n,new s.Identifier(h))}else this.match("*")?this.nextToken():(l=this.match("["),a=this.parseObjectPropertyKey());var f=this.qualifiedPropertyName(this.lookahead);if(3===i.type&&!d&&"get"===i.value&&f)t="get",l=this.match("["),a=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod();else if(3===i.type&&!d&&"set"===i.value&&f)t="set",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseSetterMethod();else if(7===i.type&&"*"===i.value&&f)t="init",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),u=!0;else if(a||this.throwUnexpectedToken(this.lookahead),t="init",this.match(":")&&!d)!l&&this.isPropertyKey(a,"__proto__")&&(e.value&&this.tolerateError(r.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),o=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))o=d?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0;else if(3===i.type)if(h=this.finalize(n,new s.Identifier(i.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),c=!0;var p=this.isolateCoverGrammar(this.parseAssignmentExpression);o=this.finalize(n,new s.AssignmentPattern(h,p))}else c=!0,o=h;else this.throwUnexpectedToken(this.nextToken());return this.finalize(n,new s.Property(t,a,l,o,u,c))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");for(var t=[],n={value:!1};!this.match("}");)t.push(this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new s.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){i.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,a=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:a},t.tail))},e.prototype.parseTemplateElement=function(){10!==this.lookahead.type&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,i=t.cooked;return this.finalize(e,new s.TemplateElement({raw:n,cooked:i},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],i=this.parseTemplateHead();for(n.push(i);!i.tail;)t.push(this.parseExpression()),i=this.parseTemplateElement(),n.push(i);return this.finalize(e,new s.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case l.Syntax.Identifier:case l.Syntax.MemberExpression:case l.Syntax.RestElement:case l.Syntax.AssignmentPattern:break;case l.Syntax.SpreadElement:e.type=l.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case l.Syntax.ArrayExpression:e.type=l.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)null!==e.elements[t]&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case l.Syntax.ObjectExpression:for(e.type=l.Syntax.ObjectPattern,t=0;t<e.properties.length;t++)this.reinterpretExpressionAsPattern(e.properties[t].value);break;case l.Syntax.AssignmentExpression:e.type=l.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left)}},e.prototype.parseGroupExpression=function(){var e;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:c,params:[],async:!1};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:c,params:[e],async:!1};else{var i=!1;if(this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var a=[];for(this.context.isAssignmentTarget=!1,a.push(e);2!==this.lookahead.type&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var r=0;r<a.length;r++)this.reinterpretExpressionAsPattern(a[r]);i=!0,e={type:c,params:a,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),a.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,r=0;r<a.length;r++)this.reinterpretExpressionAsPattern(a[r]);i=!0,e={type:c,params:a,async:!1}}else a.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(i)break}i||(e=this.finalize(this.startNode(t),new s.SequenceExpression(a)))}if(!i){if(this.expect(")"),this.match("=>")&&(e.type===l.Syntax.Identifier&&"yield"===e.name&&(i=!0,e={type:c,params:[e],async:!1}),!i)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),e.type===l.Syntax.SequenceExpression)for(r=0;r<e.expressions.length;r++)this.reinterpretExpressionAsPattern(e.expressions[r]);else this.reinterpretExpressionAsPattern(e);var o=e.type===l.Syntax.SequenceExpression?e.expressions:[e];e={type:c,params:o,async:!1}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return 3===e.type||4===e.type||1===e.type||5===e.type},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new s.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e,t=this.createNode(),n=this.parseIdentifierName();if(i.assert("new"===n.name,"New expression must start with `new`"),this.match("."))if(this.nextToken(),3===this.lookahead.type&&this.context.inFunctionBody&&"target"===this.lookahead.value){var a=this.parseIdentifierName();e=new s.MetaProperty(n,a)}else this.throwUnexpectedToken(this.lookahead);else{var r=this.isolateCoverGrammar(this.parseLeftHandSideExpression),o=this.match("(")?this.parseArguments():[];e=new s.NewExpression(r,o),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(t,e)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(e.push(t),this.match(")"))break;if(this.expectCommaSeparator(),this.match(")"))break}return this.expect(")"),e},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e,t=this.lookahead,n=this.matchContextualKeyword("async"),i=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(e=this.createNode(),this.nextToken(),e=this.finalize(e,new s.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):e=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var a=this.parseIdentifierName();e=this.finalize(this.startNode(t),new s.StaticMemberExpression(e,a))}else if(this.match("(")){var r=n&&t.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var o=r?this.parseAsyncArguments():this.parseArguments();if(e=this.finalize(this.startNode(t),new s.CallExpression(e,o)),r&&this.match("=>")){for(var l=0;l<o.length;++l)this.reinterpretExpressionAsPattern(o[l]);e={type:c,params:o,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),a=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),e=this.finalize(this.startNode(t),new s.ComputedMemberExpression(e,a));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var u=this.parseTemplateLiteral();e=this.finalize(this.startNode(t),new s.TaggedTemplateExpression(e,u))}return this.context.allowIn=i,e},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(e,new s.Super)},e.prototype.parseLeftHandSideExpression=function(){i.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new s.ComputedMemberExpression(t,n))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),n=this.parseIdentifierName(),t=this.finalize(e,new s.StaticMemberExpression(t,n));else{if(10!==this.lookahead.type||!this.lookahead.head)break;var a=this.parseTemplateLiteral();t=this.finalize(e,new s.TaggedTemplateExpression(t,a))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),i=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(r.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(r.Messages.InvalidLHSInAssignment);var a=!0;e=this.finalize(n,new s.UpdateExpression(i.value,e,a)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&7===this.lookahead.type&&(this.match("++")||this.match("--"))){this.context.strict&&e.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(r.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(r.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var o=this.nextToken().value;a=!1,e=this.finalize(this.startNode(t),new s.UpdateExpression(o,e,a))}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new s.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new s.UnaryExpression(n.value,e)),this.context.strict&&"delete"===e.operator&&e.argument.type===l.Syntax.Identifier&&this.tolerateError(r.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else e=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==l.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,i=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new s.BinaryExpression("**",n,i))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value;return 7===e.type?this.operatorPrecedence[t]||0:4===e.type&&("instanceof"===t||this.context.allowIn&&"in"===t)?7:0},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,i=this.binaryPrecedence(n);if(i>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var a=[e,this.lookahead],r=t,o=this.isolateCoverGrammar(this.parseExponentiationExpression),l=[r,n.value,o],u=[i];!((i=this.binaryPrecedence(this.lookahead))<=0);){for(;l.length>2&&i<=u[u.length-1];){o=l.pop();var c=l.pop();u.pop(),r=l.pop(),a.pop();var d=this.startNode(a[a.length-1]);l.push(this.finalize(d,new s.BinaryExpression(c,r,o)))}l.push(this.nextToken().value),u.push(i),a.push(this.lookahead),l.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var h=l.length-1;t=l[h];for(var f=a.pop();h>1;){var p=a.pop(),m=f&&f.lineStart;d=this.startNode(p,m),c=l[h-1],t=this.finalize(d,new s.BinaryExpression(c,l[h-2],t)),h-=2,f=p}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var i=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var a=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new s.ConditionalExpression(t,i,a)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case l.Syntax.Identifier:this.validateParam(e,t,t.name);break;case l.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case l.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case l.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)null!==t.elements[n]&&this.checkPatternParam(e,t.elements[n]);break;case l.Syntax.ObjectPattern:for(n=0;n<t.properties.length;n++)this.checkPatternParam(e,t.properties[n].value)}e.simple=e.simple&&t instanceof s.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t,n=[e],i=!1;switch(e.type){case l.Syntax.Identifier:break;case c:n=e.params,i=e.async;break;default:return null}t={simple:!0,paramSet:{}};for(var a=0;a<n.length;++a)(s=n[a]).type===l.Syntax.AssignmentPattern?s.right.type===l.Syntax.YieldExpression&&(s.right.argument&&this.throwUnexpectedToken(this.lookahead),s.right.type=l.Syntax.Identifier,s.right.name="yield",delete s.right.argument,delete s.right.delegate):i&&s.type===l.Syntax.Identifier&&"await"===s.name&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(t,s),n[a]=s;if(this.context.strict||!this.context.allowYield)for(a=0;a<n.length;++a){var s;(s=n[a]).type===l.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(t.message===r.Messages.StrictParamDupe){var o=this.context.strict?t.stricted:t.firstRestricted;this.throwUnexpectedToken(o,t.message)}return{simple:t.simple,params:n,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;if(e=this.parseConditionalExpression(),3===n.type&&n.lineNumber===this.lookahead.lineNumber&&"async"===n.value&&(3===this.lookahead.type||this.matchKeyword("yield"))){var i=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(i),e={type:c,params:[i],async:!0}}if(e.type===c||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var a=e.async,o=this.reinterpretAsCoverFormalsList(e);if(o){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var u=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=o.simple;var h=this.context.allowYield,f=this.context.await;this.context.allowYield=!0,this.context.await=a;var p=this.startNode(t);this.expect("=>");var m=void 0;if(this.match("{")){var g=this.context.allowIn;this.context.allowIn=!0,m=this.parseFunctionSourceElements(),this.context.allowIn=g}else m=this.isolateCoverGrammar(this.parseAssignmentExpression);var b=m.type!==l.Syntax.BlockStatement;this.context.strict&&o.firstRestricted&&this.throwUnexpectedToken(o.firstRestricted,o.message),this.context.strict&&o.stricted&&this.tolerateUnexpectedToken(o.stricted,o.message),e=a?this.finalize(p,new s.AsyncArrowFunctionExpression(o.params,m,b)):this.finalize(p,new s.ArrowFunctionExpression(o.params,m,b)),this.context.strict=u,this.context.allowStrictDirective=d,this.context.allowYield=h,this.context.await=f}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(r.Messages.InvalidLHSInAssignment),this.context.strict&&e.type===l.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(n,r.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(n,r.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var v=(n=this.nextToken()).value,E=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new s.AssignmentExpression(v,e,E)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];for(n.push(t);2!==this.lookahead.type&&this.match(",");)this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression));t=this.finalize(this.startNode(e),new s.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,4===this.lookahead.type)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,r.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,r.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration();break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");for(var t=[];!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.finalize(e,new s.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),i=this.parsePattern([],e);this.context.strict&&i.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(i.name)&&this.tolerateError(r.Messages.StrictVarName);var a=null;return"const"===e?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),a=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(r.Messages.DeclarationMissingInitializer,"const")):(!t.inFor&&i.type!==l.Syntax.Identifier||this.match("="))&&(this.expect("="),a=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(n,new s.VariableDeclarator(i,a))},e.prototype.parseBindingList=function(e,t){for(var n=[this.parseLexicalBinding(e,t)];this.match(",");)this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),3===t.type||7===t.type&&"["===t.value||7===t.type&&"{"===t.value||4===t.type&&"let"===t.value||4===t.type&&"yield"===t.value},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;i.assert("let"===n||"const"===n,"Lexical declaration must be either let or const");var a=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new s.VariableDeclaration(a,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var i=this.parsePattern(e,t);return this.finalize(n,new s.RestElement(i))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");for(var i=[];!this.match("]");)if(this.match(","))this.nextToken(),i.push(null);else{if(this.match("...")){i.push(this.parseBindingRestElement(e,t));break}i.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new s.ArrayPattern(i))},e.prototype.parsePropertyPattern=function(e,t){var n,i,a=this.createNode(),r=!1,o=!1;if(3===this.lookahead.type){var l=this.lookahead;n=this.parseVariableIdentifier();var u=this.finalize(a,new s.Identifier(l.value));if(this.match("=")){e.push(l),o=!0,this.nextToken();var c=this.parseAssignmentExpression();i=this.finalize(this.startNode(l),new s.AssignmentPattern(u,c))}else this.match(":")?(this.expect(":"),i=this.parsePatternWithDefault(e,t)):(e.push(l),o=!0,i=u)}else r=this.match("["),n=this.parseObjectPropertyKey(),this.expect(":"),i=this.parsePatternWithDefault(e,t);return this.finalize(a,new s.Property("init",n,r,i,!1,o))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),i=[];for(this.expect("{");!this.match("}");)i.push(this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new s.ObjectPattern(i))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(!this.matchKeyword("let")||"const"!==t&&"let"!==t||this.tolerateUnexpectedToken(this.lookahead,r.Messages.LetInLexicalBinding),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,i=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var a=this.context.allowYield;this.context.allowYield=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=a,i=this.finalize(this.startNode(n),new s.AssignmentPattern(i,r))}return i},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return 4===n.type&&"yield"===n.value?this.context.strict?this.tolerateUnexpectedToken(n,r.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):3!==n.type?this.context.strict&&4===n.type&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,r.Messages.StrictReservedWord):(this.context.strict||"let"!==n.value||"var"!==e)&&this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&3===n.type&&"await"===n.value&&this.tolerateUnexpectedToken(n),this.finalize(t,new s.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=this.parsePattern([],"var");this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(r.Messages.StrictVarName);var i=null;return this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):n.type===l.Syntax.Identifier||e.inFor||this.expect("="),this.finalize(t,new s.VariableDeclarator(n,i))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];for(n.push(this.parseVariableDeclaration(t));this.match(",");)this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new s.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new s.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(r.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e,t=this.createNode(),n=null;this.expectKeyword("if"),this.expect("(");var i=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(t,new s.IfStatement(i,e,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var i=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new s.DoWhileStatement(n,i))},e.prototype.parseWhileStatement=function(){var e,t=this.createNode();this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var i=this.context.inIteration;this.context.inIteration=!0,e=this.parseStatement(),this.context.inIteration=i}return this.finalize(t,new s.WhileStatement(n,e))},e.prototype.parseForStatement=function(){var e,t,n,i=null,a=null,o=null,u=!0,c=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){i=this.createNode(),this.nextToken();var d=this.context.allowIn;this.context.allowIn=!1;var h=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=d,1===h.length&&this.matchKeyword("in")){var f=h[0];f.init&&(f.id.type===l.Syntax.ArrayPattern||f.id.type===l.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(r.Messages.ForInOfLoopInitializer,"for-in"),i=this.finalize(i,new s.VariableDeclaration(h,"var")),this.nextToken(),e=i,t=this.parseExpression(),i=null}else 1===h.length&&null===h[0].init&&this.matchContextualKeyword("of")?(i=this.finalize(i,new s.VariableDeclaration(h,"var")),this.nextToken(),e=i,t=this.parseAssignmentExpression(),i=null,u=!1):(i=this.finalize(i,new s.VariableDeclaration(h,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){i=this.createNode();var p=this.nextToken().value;this.context.strict||"in"!==this.lookahead.value?(d=this.context.allowIn,this.context.allowIn=!1,h=this.parseBindingList(p,{inFor:!0}),this.context.allowIn=d,1===h.length&&null===h[0].init&&this.matchKeyword("in")?(i=this.finalize(i,new s.VariableDeclaration(h,p)),this.nextToken(),e=i,t=this.parseExpression(),i=null):1===h.length&&null===h[0].init&&this.matchContextualKeyword("of")?(i=this.finalize(i,new s.VariableDeclaration(h,p)),this.nextToken(),e=i,t=this.parseAssignmentExpression(),i=null,u=!1):(this.consumeSemicolon(),i=this.finalize(i,new s.VariableDeclaration(h,p)))):(i=this.finalize(i,new s.Identifier(p)),this.nextToken(),e=i,t=this.parseExpression(),i=null)}else{var m=this.lookahead;if(d=this.context.allowIn,this.context.allowIn=!1,i=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=d,this.matchKeyword("in"))this.context.isAssignmentTarget&&i.type!==l.Syntax.AssignmentExpression||this.tolerateError(r.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(i),e=i,t=this.parseExpression(),i=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&i.type!==l.Syntax.AssignmentExpression||this.tolerateError(r.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(i),e=i,t=this.parseAssignmentExpression(),i=null,u=!1;else{if(this.match(",")){for(var g=[i];this.match(",");)this.nextToken(),g.push(this.isolateCoverGrammar(this.parseAssignmentExpression));i=this.finalize(this.startNode(m),new s.SequenceExpression(g))}this.expect(";")}}if(void 0===e&&(this.match(";")||(a=this.parseExpression()),this.expect(";"),this.match(")")||(o=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),n=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var b=this.context.inIteration;this.context.inIteration=!0,n=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=b}return void 0===e?this.finalize(c,new s.ForStatement(i,a,o,n)):u?this.finalize(c,new s.ForInStatement(e,t,n)):this.finalize(c,new s.ForOfStatement(e,t,n))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();t=n;var i="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)||this.throwError(r.Messages.UnknownLabel,n.name)}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.throwError(r.Messages.IllegalContinue),this.finalize(e,new s.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(3===this.lookahead.type&&!this.hasLineTerminator){var n=this.parseVariableIdentifier(),i="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)||this.throwError(r.Messages.UnknownLabel,n.name),t=n}return this.consumeSemicolon(),null!==t||this.context.inIteration||this.context.inSwitch||this.throwError(r.Messages.IllegalBreak),this.finalize(e,new s.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(r.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=(this.match(";")||this.match("}")||this.hasLineTerminator||2===this.lookahead.type)&&8!==this.lookahead.type&&10!==this.lookahead.type?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ReturnStatement(t))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(r.Messages.StrictModeWith);var e,t=this.createNode();this.expectKeyword("with"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),e=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),e=this.parseStatement()),this.finalize(t,new s.WithStatement(n,e))},e.prototype.parseSwitchCase=function(){var e,t=this.createNode();this.matchKeyword("default")?(this.nextToken(),e=null):(this.expectKeyword("case"),e=this.parseExpression()),this.expect(":");for(var n=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)n.push(this.parseStatementListItem());return this.finalize(t,new s.SwitchCase(e,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var i=[],a=!1;for(this.expect("{");!this.match("}");){var o=this.parseSwitchCase();null===o.test&&(a&&this.throwError(r.Messages.MultipleDefaultsInSwitch),a=!0),i.push(o)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new s.SwitchStatement(t,i))},e.prototype.parseLabelledStatement=function(){var e,t=this.createNode(),n=this.parseExpression();if(n.type===l.Syntax.Identifier&&this.match(":")){this.nextToken();var i=n,a="$"+i.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,a)&&this.throwError(r.Messages.Redeclaration,"Label",i.name),this.context.labelSet[a]=!0;var o=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),o=this.parseClassDeclaration();else if(this.matchKeyword("function")){var u=this.lookahead,c=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(u,r.Messages.StrictFunction):c.generator&&this.tolerateUnexpectedToken(u,r.Messages.GeneratorInLegacyContext),o=c}else o=this.parseStatement();delete this.context.labelSet[a],e=new s.LabeledStatement(i,o)}else this.consumeSemicolon(),e=new s.ExpressionStatement(n);return this.finalize(t,e)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(r.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new s.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var t=[],n=this.parsePattern(t),i={},a=0;a<t.length;a++){var o="$"+t[a].value;Object.prototype.hasOwnProperty.call(i,o)&&this.tolerateError(r.Messages.DuplicateBinding,t[a].value),i[o]=!0}this.context.strict&&n.type===l.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(r.Messages.StrictCatchVariable),this.expect(")");var u=this.parseBlock();return this.finalize(e,new s.CatchClause(n,u))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,i=this.matchKeyword("finally")?this.parseFinallyClause():null;return n||i||this.throwError(r.Messages.NoCatchOrFinally),this.finalize(e,new s.TryStatement(t,n,i))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new s.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;e="{"===t?this.parseBlock():"("===t?this.parseExpressionStatement():";"===t?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,i=this.context.inIteration,a=this.context.inSwitch,r=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;2!==this.lookahead.type&&!this.match("}");)t.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=n,this.context.inIteration=i,this.context.inSwitch=a,this.context.inFunctionBody=r,this.finalize(e,new s.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var i="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=r.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=r.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=r.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=r.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,i)&&(e.stricted=t,e.message=r.Messages.StrictParamDupe)),"function"==typeof Object.defineProperty?Object.defineProperty(e.paramSet,i,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[i]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(r.Messages.DefaultRestParameter),this.match(")")||this.throwError(r.Messages.ParameterAfterRestParameter),this.finalize(t,new s.RestElement(n))},e.prototype.parseFormalParameter=function(e){for(var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t),i=0;i<t.length;i++)this.validateParam(e,t[i],t[i].value);e.simple=e.simple&&n instanceof s.Identifier,e.params.push(n)},e.prototype.parseFormalParameters=function(e){var t;if(t={simple:!0,params:[],firstRestricted:e},this.expect("("),!this.match(")"))for(t.paramSet={};2!==this.lookahead.type&&(this.parseFormalParameter(t),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===n.lineNumber&&4===n.type&&"function"===n.value}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),n=this.matchContextualKeyword("async");n&&this.nextToken(),this.expectKeyword("function");var i,a=!n&&this.match("*");a&&this.nextToken();var o=null,l=null;if(!e||!this.match("(")){var u=this.lookahead;o=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(u.value)&&this.tolerateUnexpectedToken(u,r.Messages.StrictFunctionName):this.scanner.isRestrictedWord(u.value)?(l=u,i=r.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(u.value)&&(l=u,i=r.Messages.StrictReservedWord)}var c=this.context.await,d=this.context.allowYield;this.context.await=n,this.context.allowYield=!a;var h=this.parseFormalParameters(l),f=h.params,p=h.stricted;l=h.firstRestricted,h.message&&(i=h.message);var m=this.context.strict,g=this.context.allowStrictDirective;this.context.allowStrictDirective=h.simple;var b=this.parseFunctionSourceElements();return this.context.strict&&l&&this.throwUnexpectedToken(l,i),this.context.strict&&p&&this.tolerateUnexpectedToken(p,i),this.context.strict=m,this.context.allowStrictDirective=g,this.context.await=c,this.context.allowYield=d,n?this.finalize(t,new s.AsyncFunctionDeclaration(o,f,b)):this.finalize(t,new s.FunctionDeclaration(o,f,b,a))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var n,i=!t&&this.match("*");i&&this.nextToken();var a,o=null,l=this.context.await,u=this.context.allowYield;if(this.context.await=t,this.context.allowYield=!i,!this.match("(")){var c=this.lookahead;o=this.context.strict||i||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(c.value)&&this.tolerateUnexpectedToken(c,r.Messages.StrictFunctionName):this.scanner.isRestrictedWord(c.value)?(a=c,n=r.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(c.value)&&(a=c,n=r.Messages.StrictReservedWord)}var d=this.parseFormalParameters(a),h=d.params,f=d.stricted;a=d.firstRestricted,d.message&&(n=d.message);var p=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=d.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&a&&this.throwUnexpectedToken(a,n),this.context.strict&&f&&this.tolerateUnexpectedToken(f,n),this.context.strict=p,this.context.allowStrictDirective=m,this.context.await=l,this.context.allowYield=u,t?this.finalize(e,new s.AsyncFunctionExpression(o,h,g)):this.finalize(e,new s.FunctionExpression(o,h,g,i))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),i=n.type===l.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,i?new s.Directive(n,i):new s.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){for(var e=null,t=[];;){var n=this.lookahead;if(8!==n.type)break;var i=this.parseDirective();t.push(i);var a=i.directive;if("string"!=typeof a)break;"use strict"===a?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,r.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,r.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return"["===e.value}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();n.params.length>0&&this.tolerateError(r.Messages.BadGetterArity);var i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!1))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();1!==n.params.length?this.tolerateError(r.Messages.BadSetterArity):n.params[0]instanceof s.RestElement&&this.tolerateError(r.Messages.BadSetterRestParameter);var i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!1))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=this.context.allowYield;this.context.allowYield=!0;var n=this.parseFormalParameters();this.context.allowYield=!1;var i=this.parsePropertyMethod(n);return this.context.allowYield=t,this.finalize(e,new s.FunctionExpression(null,n.params,i,!0))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e="["===t||"("===t||"{"===t||"+"===t||"-"===t||"!"===t||"~"===t||"++"===t||"--"===t||"/"===t||"/="===t;break;case 4:e="class"===t||"delete"===t||"function"===t||"let"===t||"new"===t||"super"===t||"this"===t||"typeof"===t||"void"===t||"yield"===t}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var i=this.context.allowYield;this.context.allowYield=!1,(n=this.match("*"))?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=i}return this.finalize(e,new s.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),i="",a=null,o=null,l=!1,u=!1,c=!1,d=!1;if(this.match("*"))this.nextToken();else if(l=this.match("["),"static"===(a=this.parseObjectPropertyKey()).name&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,c=!0,l=this.match("["),this.match("*")?this.nextToken():a=this.parseObjectPropertyKey()),3===t.type&&!this.hasLineTerminator&&"async"===t.value){var h=this.lookahead.value;":"!==h&&"("!==h&&"*"!==h&&(d=!0,t=this.lookahead,a=this.parseObjectPropertyKey(),3===t.type&&"constructor"===t.value&&this.tolerateUnexpectedToken(t,r.Messages.ConstructorIsAsync))}var f=this.qualifiedPropertyName(this.lookahead);return 3===t.type?"get"===t.value&&f?(i="get",l=this.match("["),a=this.parseObjectPropertyKey(),this.context.allowYield=!1,o=this.parseGetterMethod()):"set"===t.value&&f&&(i="set",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseSetterMethod()):7===t.type&&"*"===t.value&&f&&(i="init",l=this.match("["),a=this.parseObjectPropertyKey(),o=this.parseGeneratorMethod(),u=!0),!i&&a&&this.match("(")&&(i="init",o=d?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),u=!0),i||this.throwUnexpectedToken(this.lookahead),"init"===i&&(i="method"),l||(c&&this.isPropertyKey(a,"prototype")&&this.throwUnexpectedToken(t,r.Messages.StaticPrototype),!c&&this.isPropertyKey(a,"constructor")&&(("method"!==i||!u||o&&o.generator)&&this.throwUnexpectedToken(t,r.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,r.Messages.DuplicateConstructor):e.value=!0,i="constructor")),this.finalize(n,new s.MethodDefinition(a,l,o,i,c))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new s.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var i=e&&3!==this.lookahead.type?null:this.parseVariableIdentifier(),a=null;this.matchKeyword("extends")&&(this.nextToken(),a=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var r=this.parseClassBody();return this.context.strict=n,this.finalize(t,new s.ClassDeclaration(i,a,r))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=3===this.lookahead.type?this.parseVariableIdentifier():null,i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var a=this.parseClassBody();return this.context.strict=t,this.finalize(e,new s.ClassExpression(n,i,a))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Module(t))},e.prototype.parseScript=function(){for(var e=this.createNode(),t=this.parseDirectivePrologues();2!==this.lookahead.type;)t.push(this.parseStatementListItem());return this.finalize(e,new s.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();8!==this.lookahead.type&&this.throwError(r.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new s.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e,t,n=this.createNode();return 3===this.lookahead.type?(t=e=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),t=this.parseVariableIdentifier())):(t=e=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),t=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(n,new s.ImportSpecifier(t,e))},e.prototype.parseNamedImports=function(){this.expect("{");for(var e=[];!this.match("}");)e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new s.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(r.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new s.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(r.Messages.IllegalImportDeclaration);var e,t=this.createNode();this.expectKeyword("import");var n=[];if(8===this.lookahead.type)e=this.parseModuleSpecifier();else{if(this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var i=this.lookahead.value?r.Messages.UnexpectedToken:r.Messages.MissingFromClause;this.throwError(i,this.lookahead.value)}this.nextToken(),e=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(t,new s.ImportDeclaration(n,e))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new s.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(r.Messages.IllegalExportDeclaration);var e,t=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);e=this.finalize(t,new s.ExportDefaultDeclaration(n))}else this.matchKeyword("class")?(n=this.parseClassDeclaration(!0),e=this.finalize(t,new s.ExportDefaultDeclaration(n))):this.matchContextualKeyword("async")?(n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),e=this.finalize(t,new s.ExportDefaultDeclaration(n))):(this.matchContextualKeyword("from")&&this.throwError(r.Messages.UnexpectedToken,this.lookahead.value),n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),e=this.finalize(t,new s.ExportDefaultDeclaration(n)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var i=this.lookahead.value?r.Messages.UnexpectedToken:r.Messages.MissingFromClause;this.throwError(i,this.lookahead.value)}this.nextToken();var a=this.parseModuleSpecifier();this.consumeSemicolon(),e=this.finalize(t,new s.ExportAllDeclaration(a))}else if(4===this.lookahead.type){switch(n=void 0,this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction())n=this.parseFunctionDeclaration(),e=this.finalize(t,new s.ExportNamedDeclaration(n,[],null));else{var o=[],l=null,u=!1;for(this.expect("{");!this.match("}");)u=u||this.matchKeyword("default"),o.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),l=this.parseModuleSpecifier(),this.consumeSemicolon()):u?(i=this.lookahead.value?r.Messages.UnexpectedToken:r.Messages.MissingFromClause,this.throwError(i,this.lookahead.value)):this.consumeSemicolon(),e=this.finalize(t,new s.ExportNamedDeclaration(null,o,l))}return e},e}();t.Parser=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error("ASSERT: "+t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=new Error(e);try{throw n}catch(e){Object.create&&Object.defineProperty&&(n=Object.create(e),Object.defineProperty(n,"column",{value:t}))}return n},e.prototype.createError=function(e,t,n,i){var a="Line "+t+": "+i,r=this.constructError(a,n);return r.index=e,r.lineNumber=t,r.description=i,r},e.prototype.throwError=function(e,t,n,i){throw this.createError(e,t,n,i)},e.prototype.tolerateError=function(e,t,n,i){var a=this.createError(e,t,n,i);if(!this.tolerant)throw a;this.recordError(a)},e}();t.ErrorHandler=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),a=n(4),r=n(11);function s(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function o(e){return"01234567".indexOf(e)}var l=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return void 0===e&&(e=r.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){void 0===e&&(e=r.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t,n,i=[];for(this.trackComment&&(i=[],t=this.index-e,n={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});!this.eof();){var r=this.source.charCodeAt(this.index);if(++this.index,a.Character.isLineTerminator(r)){if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart-1};var s={multiLine:!1,slice:[t+e,this.index-1],range:[t,this.index-1],loc:n};i.push(s)}return 13===r&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,i}}return this.trackComment&&(n.end={line:this.lineNumber,column:this.index-this.lineStart},s={multiLine:!1,slice:[t+e,this.index],range:[t,this.index],loc:n},i.push(s)),i},e.prototype.skipMultiLineComment=function(){var e,t,n=[];for(this.trackComment&&(n=[],e=this.index-2,t={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var i=this.source.charCodeAt(this.index);if(a.Character.isLineTerminator(i))13===i&&10===this.source.charCodeAt(this.index+1)&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(42===i){if(47===this.source.charCodeAt(this.index+1)){if(this.index+=2,this.trackComment){t.end={line:this.lineNumber,column:this.index-this.lineStart};var r={multiLine:!0,slice:[e+2,this.index-2],range:[e,this.index],loc:t};n.push(r)}return n}++this.index}else++this.index}return this.trackComment&&(t.end={line:this.lineNumber,column:this.index-this.lineStart},r={multiLine:!0,slice:[e+2,this.index],range:[e,this.index],loc:t},n.push(r)),this.tolerateUnexpectedToken(),n},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);for(var t=0===this.index;!this.eof();){var n=this.source.charCodeAt(this.index);if(a.Character.isWhiteSpace(n))++this.index;else if(a.Character.isLineTerminator(n))++this.index,13===n&&10===this.source.charCodeAt(this.index)&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(47===n)if(47===(n=this.source.charCodeAt(this.index+1))){this.index+=2;var i=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(i)),t=!0}else{if(42!==n)break;this.index+=2,i=this.skipMultiLineComment(),this.trackComment&&(e=e.concat(i))}else if(t&&45===n){if(45!==this.source.charCodeAt(this.index+1)||62!==this.source.charCodeAt(this.index+2))break;this.index+=3,i=this.skipSingleLineComment(3),this.trackComment&&(e=e.concat(i))}else{if(60!==n||this.isModule)break;if("!--"!==this.source.slice(this.index+1,this.index+4))break;this.index+=4,i=this.skipSingleLineComment(4),this.trackComment&&(e=e.concat(i))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return"eval"===e||"arguments"===e},e.prototype.isKeyword=function(e){switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);n>=56320&&n<=57343&&(t=1024*(t-55296)+n-56320+65536)}return t},e.prototype.scanHexEscape=function(e){for(var t="u"===e?4:2,n=0,i=0;i<t;++i){if(this.eof()||!a.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=16*n+s(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;for("}"===e&&this.throwUnexpectedToken();!this.eof()&&(e=this.source[this.index++],a.Character.isHexDigit(e.charCodeAt(0)));)t=16*t+s(e);return(t>1114111||"}"!==e)&&this.throwUnexpectedToken(),a.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){for(var e=this.index++;!this.eof();){var t=this.source.charCodeAt(this.index);if(92===t)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!a.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e,t=this.codePointAt(this.index),n=a.Character.fromCodePoint(t);for(this.index+=n.length,92===t&&(117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&a.Character.isIdentifierStart(e.charCodeAt(0))||this.throwUnexpectedToken(),n=e);!this.eof()&&(t=this.codePointAt(this.index),a.Character.isIdentifierPart(t));)n+=e=a.Character.fromCodePoint(t),this.index+=e.length,92===t&&(n=n.substr(0,n.length-1),117!==this.source.charCodeAt(this.index)&&this.throwUnexpectedToken(),++this.index,"{"===this.source[this.index]?(++this.index,e=this.scanUnicodeCodePointEscape()):null!==(e=this.scanHexEscape("u"))&&"\\"!==e&&a.Character.isIdentifierPart(e.charCodeAt(0))||this.throwUnexpectedToken(),n+=e);return n},e.prototype.octalToDecimal=function(e){var t="0"!==e,n=o(e);return!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=8*n+o(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=8*n+o(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,n=92===this.source.charCodeAt(t)?this.getComplexIdentifier():this.getIdentifier();if(3!=(e=1===n.length?3:this.isKeyword(n)?4:"null"===n?5:"true"===n||"false"===n?1:3)&&t+n.length!==this.index){var i=this.index;this.index=t,this.tolerateUnexpectedToken(r.Messages.InvalidEscapedReservedWord),this.index=i}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":"{"===t&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,"."===this.source[this.index]&&"."===this.source[this.index+1]&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:">>>="===(t=this.source.substr(this.index,4))?this.index+=4:"==="===(t=t.substr(0,3))||"!=="===t||">>>"===t||"<<="===t||">>="===t||"**="===t?this.index+=3:"&&"===(t=t.substr(0,2))||"||"===t||"=="===t||"!="===t||"+="===t||"-="===t||"*="===t||"/="===t||"++"===t||"--"===t||"<<"===t||">>"===t||"&="===t||"|="===t||"^="===t||"%="===t||"<="===t||">="===t||"=>"===t||"**"===t?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){for(var t="";!this.eof()&&a.Character.isHexDigit(this.source.charCodeAt(this.index));)t+=this.source[this.index++];return 0===t.length&&this.throwUnexpectedToken(),a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){for(var t,n="";!this.eof()&&("0"===(t=this.source[this.index])||"1"===t);)n+=this.source[this.index++];return 0===n.length&&this.throwUnexpectedToken(),this.eof()||(t=this.source.charCodeAt(this.index),(a.Character.isIdentifierStart(t)||a.Character.isDecimalDigit(t))&&this.throwUnexpectedToken()),{type:6,value:parseInt(n,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",i=!1;for(a.Character.isOctalDigit(e.charCodeAt(0))?(i=!0,n="0"+this.source[this.index++]):++this.index;!this.eof()&&a.Character.isOctalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];return i||0!==n.length||this.throwUnexpectedToken(),(a.Character.isIdentifierStart(this.source.charCodeAt(this.index))||a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:i,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if("8"===t||"9"===t)return!1;if(!a.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];i.assert(a.Character.isDecimalDigit(t.charCodeAt(0))||"."===t,"Numeric literal must start with a decimal digit or a decimal point");var n="";if("."!==t){if(n=this.source[this.index++],t=this.source[this.index],"0"===n){if("x"===t||"X"===t)return++this.index,this.scanHexLiteral(e);if("b"===t||"B"===t)return++this.index,this.scanBinaryLiteral(e);if("o"===t||"O"===t)return this.scanOctalLiteral(t,e);if(t&&a.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("."===t){for(n+=this.source[this.index++];a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];t=this.source[this.index]}if("e"===t||"E"===t)if(n+=this.source[this.index++],"+"!==(t=this.source[this.index])&&"-"!==t||(n+=this.source[this.index++]),a.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;a.Character.isDecimalDigit(this.source.charCodeAt(this.index));)n+=this.source[this.index++];else this.throwUnexpectedToken();return a.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];i.assert("'"===t||'"'===t,"String literal must starts with a quote"),++this.index;for(var n=!1,s="";!this.eof();){var o=this.source[this.index++];if(o===t){t="";break}if("\\"===o)if((o=this.source[this.index++])&&a.Character.isLineTerminator(o.charCodeAt(0)))++this.lineNumber,"\r"===o&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(o){case"u":if("{"===this.source[this.index])++this.index,s+=this.scanUnicodeCodePointEscape();else{var l=this.scanHexEscape(o);null===l&&this.throwUnexpectedToken(),s+=l}break;case"x":var u=this.scanHexEscape(o);null===u&&this.throwUnexpectedToken(r.Messages.InvalidHexEscapeSequence),s+=u;break;case"n":s+="\n";break;case"r":s+="\r";break;case"t":s+="\t";break;case"b":s+="\b";break;case"f":s+="\f";break;case"v":s+="\v";break;case"8":case"9":s+=o,this.tolerateUnexpectedToken();break;default:if(o&&a.Character.isOctalDigit(o.charCodeAt(0))){var c=this.octalToDecimal(o);n=c.octal||n,s+=String.fromCharCode(c.code)}else s+=o}else{if(a.Character.isLineTerminator(o.charCodeAt(0)))break;s+=o}}return""!==t&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:s,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,i="`"===this.source[n],s=!1,o=2;for(++this.index;!this.eof();){var l=this.source[this.index++];if("`"===l){o=1,s=!0,t=!0;break}if("$"===l){if("{"===this.source[this.index]){this.curlyStack.push("${"),++this.index,t=!0;break}e+=l}else if("\\"===l)if(l=this.source[this.index++],a.Character.isLineTerminator(l.charCodeAt(0)))++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index;else switch(l){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="\t";break;case"u":if("{"===this.source[this.index])++this.index,e+=this.scanUnicodeCodePointEscape();else{var u=this.index,c=this.scanHexEscape(l);null!==c?e+=c:(this.index=u,e+=l)}break;case"x":var d=this.scanHexEscape(l);null===d&&this.throwUnexpectedToken(r.Messages.InvalidHexEscapeSequence),e+=d;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:"0"===l?(a.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(r.Messages.TemplateOctalLiteral),e+="\0"):a.Character.isOctalDigit(l.charCodeAt(0))?this.throwUnexpectedToken(r.Messages.TemplateOctalLiteral):e+=l}else a.Character.isLineTerminator(l.charCodeAt(0))?(++this.lineNumber,"\r"===l&&"\n"===this.source[this.index]&&++this.index,this.lineStart=this.index,e+="\n"):e+=l}return t||this.throwUnexpectedToken(),i||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-o),cooked:e,head:i,tail:s,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n=e,i=this;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,(function(e,t,n){var a=parseInt(t||n,16);return a>1114111&&i.throwUnexpectedToken(r.Messages.InvalidRegExp),a<=65535?String.fromCharCode(a):""})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,""));try{RegExp(n)}catch(e){this.throwUnexpectedToken(r.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(e){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];i.assert("/"===e,"Regular expression literal must start with a slash");for(var t=this.source[this.index++],n=!1,s=!1;!this.eof();)if(t+=e=this.source[this.index++],"\\"===e)e=this.source[this.index++],a.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(r.Messages.UnterminatedRegExp),t+=e;else if(a.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(r.Messages.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){s=!0;break}"["===e&&(n=!0)}return s||this.throwUnexpectedToken(r.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){for(var e="";!this.eof();){var t=this.source[this.index];if(!a.Character.isIdentifierPart(t.charCodeAt(0)))break;if(++this.index,"\\"!==t||this.eof())e+=t;else if("u"===(t=this.source[this.index])){++this.index;var n=this.index,i=this.scanHexEscape("u");if(null!==i)for(e+=i;n<this.index;++n)this.source[n];else this.index=n,e+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return e},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags();return{type:9,value:"",pattern:t,flags:n,regex:this.testRegExp(t,n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return a.Character.isIdentifierStart(e)?this.scanIdentifier():40===e||41===e||59===e?this.scanPunctuator():39===e||34===e?this.scanStringLiteral():46===e?a.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():a.Character.isDecimalDigit(e)?this.scanNumericLiteral():96===e||125===e&&"${"===this.curlyStack[this.curlyStack.length-1]?this.scanTemplate():e>=55296&&e<57343&&a.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",times:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",divide:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",frasl:"",euro:"",image:"",weierp:"",real:"",trade:"",alefsym:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lArr:"",uArr:"",rArr:"",dArr:"",hArr:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:"",lang:"",rang:""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),a=n(12),r=n(13),s=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=null!==e;switch(e){case"this":case"]":t=!1;break;case")":var n=this.values[this.paren-1];t="if"===n||"while"===n||"for"===n||"with"===n;break;case"}":if(t=!1,"function"===this.values[this.curly-3])t=!!(i=this.values[this.curly-4])&&!this.beforeFunctionExpression(i);else if("function"===this.values[this.curly-4]){var i;t=!(i=this.values[this.curly-5])||!this.beforeFunctionExpression(i)}}return t},e.prototype.push=function(e){7===e.type||4===e.type?("{"===e.value?this.curly=this.values.length:"("===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),o=function(){function e(e,t){this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=!!t&&"boolean"==typeof t.tolerant&&t.tolerant,this.scanner=new a.Scanner(e,this.errorHandler),this.scanner.trackComment=!!t&&"boolean"==typeof t.comment&&t.comment,this.trackRange=!!t&&"boolean"==typeof t.range&&t.range,this.trackLoc=!!t&&"boolean"==typeof t.loc&&t.loc,this.buffer=[],this.reader=new s}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(0===this.buffer.length){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],i=this.scanner.source.slice(n.slice[0],n.slice[1]),a={type:n.multiLine?"BlockComment":"LineComment",value:i};this.trackRange&&(a.range=n.range),this.trackLoc&&(a.loc=n.loc),this.buffer.push(a)}if(!this.scanner.eof()){var s=void 0;this.trackLoc&&(s={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var o="/"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(o);var l={type:r.TokenName[o.type],value:this.scanner.source.slice(o.start,o.end)};if(this.trackRange&&(l.range=[o.start,o.end]),this.trackLoc&&(s.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=s),9===o.type){var u=o.pattern,c=o.flags;l.regex={pattern:u,flags:c}}this.buffer.push(l)}}return this.buffer.shift()},e}();t.Tokenizer=o}])},e.exports=i()},function(e,t,n){"use strict";var i=n(158),a=n(170),r=n(194),s=n(171),o=Object.prototype.toString,l=Object.prototype.hasOwnProperty,u=9,c=10,d=13,h=32,f=33,p=34,m=35,g=37,b=38,y=39,v=42,E=44,w=45,x=58,S=61,k=62,M=63,_=64,A=91,C=93,F=96,D=123,T=124,I=125,P={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},O=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function j(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new a("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+i.repeat("0",r-t.length)+t}function B(e){this.schema=e.schema||r,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=i.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,i,a,r,s,o,u;if(null===t)return{};for(n={},a=0,r=(i=Object.keys(t)).length;a<r;a+=1)s=i[a],o=String(t[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(u=e.compiledTypeMap.fallback[s])&&l.call(u.styleAliases,o)&&(o=u.styleAliases[o]),n[s]=o;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function L(e,t){for(var n,a=i.repeat(" ",t),r=0,s=-1,o="",l=e.length;r<l;)-1===(s=e.indexOf("\n",r))?(n=e.slice(r),r=l):(n=e.slice(r,s+1),r=s+1),n.length&&"\n"!==n&&(o+=a),o+=n;return o}function N(e,t){return"\n"+i.repeat(" ",e.indent*t)}function R(e){return e===h||e===u}function z(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&65279!==e||65536<=e&&e<=1114111}function U(e,t){return z(e)&&65279!==e&&e!==E&&e!==A&&e!==C&&e!==D&&e!==I&&e!==x&&(e!==m||t&&function(e){return z(e)&&!R(e)&&65279!==e&&e!==d&&e!==c}(t))}function Z(e){return/^\n* /.test(e)}var K=1,q=2,H=3,W=4,V=5;function G(e,t,n,i){e.dump=function(){if(0===t.length)return"''";if(!e.noCompatMode&&-1!==O.indexOf(t))return"'"+t+"'";var r=e.indent*Math.max(1,n),s=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-r),o=i||e.flowLevel>-1&&n>=e.flowLevel;switch(function(e,t,n,i,a){var r,s,o,l,u=!1,d=!1,h=-1!==i,P=-1,O=z(l=e.charCodeAt(0))&&65279!==l&&!R(l)&&l!==w&&l!==M&&l!==x&&l!==E&&l!==A&&l!==C&&l!==D&&l!==I&&l!==m&&l!==b&&l!==v&&l!==f&&l!==T&&l!==S&&l!==k&&l!==y&&l!==p&&l!==g&&l!==_&&l!==F&&!R(e.charCodeAt(e.length-1));if(t)for(r=0;r<e.length;r++){if(!z(s=e.charCodeAt(r)))return V;o=r>0?e.charCodeAt(r-1):null,O=O&&U(s,o)}else{for(r=0;r<e.length;r++){if((s=e.charCodeAt(r))===c)u=!0,h&&(d=d||r-P-1>i&&" "!==e[P+1],P=r);else if(!z(s))return V;o=r>0?e.charCodeAt(r-1):null,O=O&&U(s,o)}d=d||h&&r-P-1>i&&" "!==e[P+1]}return u||d?n>9&&Z(e)?V:d?W:H:O&&!a(e)?K:q}(t,o,e.indent,s,(function(t){return function(e,t){var n,i;for(n=0,i=e.implicitTypes.length;n<i;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)}))){case K:return t;case q:return"'"+t.replace(/'/g,"''")+"'";case H:return"|"+$(t,e.indent)+X(L(t,r));case W:return">"+$(t,e.indent)+X(L(function(e,t){for(var n,i,a,r=/(\n+)([^\n]*)/g,s=(a=-1!==(a=e.indexOf("\n"))?a:e.length,r.lastIndex=a,J(e.slice(0,a),t)),o="\n"===e[0]||" "===e[0];i=r.exec(e);){var l=i[1],u=i[2];n=" "===u[0],s+=l+(o||n||""===u?"":"\n")+J(u,t),o=n}return s}(t,s),r));case V:return'"'+function(e){for(var t,n,i,a="",r=0;r<e.length;r++)(t=e.charCodeAt(r))>=55296&&t<=56319&&(n=e.charCodeAt(r+1))>=56320&&n<=57343?(a+=j(1024*(t-55296)+n-56320+65536),r++):a+=!(i=P[t])&&z(t)?e[r]:i||j(t);return a}(t)+'"';default:throw new a("impossible error: invalid scalar style")}}()}function $(e,t){var n=Z(e)?String(t):"",i="\n"===e[e.length-1];return n+(!i||"\n"!==e[e.length-2]&&"\n"!==e?i?"":"-":"+")+"\n"}function X(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function J(e,t){if(""===e||" "===e[0])return e;for(var n,i,a=/ [^ ]/g,r=0,s=0,o=0,l="";n=a.exec(e);)(o=n.index)-r>t&&(i=s>r?s:o,l+="\n"+e.slice(r,i),r=i+1),s=o;return l+="\n",e.length-r>t&&s>r?l+=e.slice(r,s)+"\n"+e.slice(s+1):l+=e.slice(r),l.slice(1)}function Y(e,t,n){var i,r,s,u,c,d;for(s=0,u=(r=n?e.explicitTypes:e.implicitTypes).length;s<u;s+=1)if(((c=r[s]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(e.tag=n?c.tag:"?",c.represent){if(d=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===o.call(c.represent))i=c.represent(t,d);else{if(!l.call(c.represent,d))throw new a("!<"+c.tag+'> tag resolver accepts not "'+d+'" style');i=c.represent[d](t,d)}e.dump=i}return!0}return!1}function Q(e,t,n,i,r,s){e.tag=null,e.dump=n,Y(e,n,!1)||Y(e,n,!0);var l=o.call(e.dump);i&&(i=e.flowLevel<0||e.flowLevel>t);var u,d,h="[object Object]"===l||"[object Array]"===l;if(h&&(d=-1!==(u=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(r=!1),d&&e.usedDuplicates[u])e.dump="*ref_"+u;else{if(h&&d&&!e.usedDuplicates[u]&&(e.usedDuplicates[u]=!0),"[object Object]"===l)i&&0!==Object.keys(e.dump).length?(function(e,t,n,i){var r,s,o,l,u,d,h="",f=e.tag,p=Object.keys(n);if(!0===e.sortKeys)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new a("sortKeys must be a boolean or a function");for(r=0,s=p.length;r<s;r+=1)d="",i&&0===r||(d+=N(e,t)),l=n[o=p[r]],Q(e,t+1,o,!0,!0,!0)&&((u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&c===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,u&&(d+=N(e,t)),Q(e,t+1,l,!0,u)&&(e.dump&&c===e.dump.charCodeAt(0)?d+=":":d+=": ",h+=d+=e.dump));e.tag=f,e.dump=h||"{}"}(e,t,e.dump,r),d&&(e.dump="&ref_"+u+e.dump)):(function(e,t,n){var i,a,r,s,o,l="",u=e.tag,c=Object.keys(n);for(i=0,a=c.length;i<a;i+=1)o="",0!==i&&(o+=", "),e.condenseFlow&&(o+='"'),s=n[r=c[i]],Q(e,t,r,!1,!1)&&(e.dump.length>1024&&(o+="? "),o+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Q(e,t,s,!1,!1)&&(l+=o+=e.dump));e.tag=u,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump));else if("[object Array]"===l){var f=e.noArrayIndent&&t>0?t-1:t;i&&0!==e.dump.length?(function(e,t,n,i){var a,r,s="",o=e.tag;for(a=0,r=n.length;a<r;a+=1)Q(e,t+1,n[a],!0,!0)&&(i&&0===a||(s+=N(e,t)),e.dump&&c===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=o,e.dump=s||"[]"}(e,f,e.dump,r),d&&(e.dump="&ref_"+u+e.dump)):(function(e,t,n){var i,a,r="",s=e.tag;for(i=0,a=n.length;i<a;i+=1)Q(e,t,n[i],!1,!1)&&(0!==i&&(r+=","+(e.condenseFlow?"":" ")),r+=e.dump);e.tag=s,e.dump="["+r+"]"}(e,f,e.dump),d&&(e.dump="&ref_"+u+" "+e.dump))}else{if("[object String]"!==l){if(e.skipInvalid)return!1;throw new a("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&G(e,e.dump,t,s)}null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function ee(e,t){var n,i,a=[],r=[];for(te(e,a,r),n=0,i=r.length;n<i;n+=1)t.duplicates.push(a[r[n]]);t.usedDuplicates=new Array(i)}function te(e,t,n){var i,a,r;if(null!==e&&"object"==typeof e)if(-1!==(a=t.indexOf(e)))-1===n.indexOf(a)&&n.push(a);else if(t.push(e),Array.isArray(e))for(a=0,r=e.length;a<r;a+=1)te(e[a],t,n);else for(a=0,r=(i=Object.keys(e)).length;a<r;a+=1)te(e[i[a]],t,n)}function ne(e,t){var n=new B(t=t||{});return n.noRefs||ee(e,n),Q(n,0,e,!0,!0)?n.dump+"\n":""}e.exports.dump=ne,e.exports.safeDump=function(e,t){return ne(e,i.extend({schema:s},t))}},function(e,t,n){const i=n(36);e.exports=(e,t)=>new i(e,t).patch},function(e,t,n){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=n(160),t.createHash=t.Hash=n(173),t.createHmac=t.Hmac=n(305);var i=n(503),a=Object.keys(i),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);t.getHashes=function(){return r};var s=n(308);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync;var o=n(505);t.Cipher=o.Cipher,t.createCipher=o.createCipher,t.Cipheriv=o.Cipheriv,t.createCipheriv=o.createCipheriv,t.Decipher=o.Decipher,t.createDecipher=o.createDecipher,t.Decipheriv=o.Decipheriv,t.createDecipheriv=o.createDecipheriv,t.getCiphers=o.getCiphers,t.listCiphers=o.listCiphers;var l=n(522);t.DiffieHellmanGroup=l.DiffieHellmanGroup,t.createDiffieHellmanGroup=l.createDiffieHellmanGroup,t.getDiffieHellman=l.getDiffieHellman,t.createDiffieHellman=l.createDiffieHellman,t.DiffieHellman=l.DiffieHellman;var u=n(527);t.createSign=u.createSign,t.Sign=u.Sign,t.createVerify=u.createVerify,t.Verify=u.Verify,t.createECDH=n(568);var c=n(569);t.publicEncrypt=c.publicEncrypt,t.privateEncrypt=c.privateEncrypt,t.publicDecrypt=c.publicDecrypt,t.privateDecrypt=c.privateDecrypt;var d=n(572);t.randomFill=d.randomFill,t.randomFillSync=d.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,n){"use strict";var i=n(119).Buffer,a=n(226).Transform;function r(e){a.call(this),this._block=i.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(118)(r,a),r.prototype._transform=function(e,t,n){var i=null;try{this.update(e,t)}catch(e){i=e}n(i)},r.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},r.prototype.update=function(e,t){if(function(e,t){if(!i.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer")}(e),this._finalized)throw new Error("Digest already called");i.isBuffer(e)||(e=i.from(e,t));for(var n=this._block,a=0;this._blockOffset+e.length-a>=this._blockSize;){for(var r=this._blockOffset;r<this._blockSize;)n[r++]=e[a++];this._update(),this._blockOffset=0}for(;a<e.length;)n[this._blockOffset++]=e[a++];for(var s=0,o=8*e.length;o>0;++s)this._length[s]+=o,(o=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*o);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=r},function(e,t,n){e.exports=n(41)(3088)},function(e,t){},function(e,t,n){"use strict";var i=n(228).Buffer,a=n(488);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,n,a=i.allocUnsafe(e>>>0),r=this.head,s=0;r;)t=a,n=s,r.data.copy(t,n),s+=r.data.length,r=r.next;return a},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(490),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(139))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,a,r,s,o,l=1,u={},c=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),i=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){r.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(a=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):i=function(e){setTimeout(p,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return u[l]=a,i(l),l++},h.clearImmediate=f}function f(e){delete u[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(undefined,n)}}(t)}finally{f(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(139),n(87))},function(e,t,n){var i=n(86),a=i.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return a(e,t,n)}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=s),r(a,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";e.exports=r;var i=n(302),a=Object.create(n(175));function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}a.inherits=n(118),a.inherits(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(229)},function(e,t,n){e.exports=n(155)},function(e,t,n){e.exports=n(227).Transform},function(e,t,n){e.exports=n(227).PassThrough},function(e,t,n){"use strict";(function(t){var i=n(226).Transform;function a(e){i.call(this),this._block=new t(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(118)(a,i),a.prototype._transform=function(e,n,i){var a=null;try{"buffer"!==n&&(e=new t(e,n)),this.update(e)}catch(e){a=e}i(a)},a.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(e){t=e}e(t)},a.prototype.update=function(e,n){if(!t.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");t.isBuffer(e)||(e=new t(e,n||"binary"));for(var i=this._block,a=0;this._blockOffset+e.length-a>=this._blockSize;){for(var r=this._blockOffset;r<this._blockSize;)i[r++]=e[a++];this._update(),this._blockOffset=0}for(;a<e.length;)i[this._blockOffset++]=e[a++];for(var s=0,o=8*e.length;o>0;++s)this._length[s]+=o,(o=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*o);return this},a.prototype._update=function(e){throw new Error("_update is not implemented")},a.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},a.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=a}).call(this,n(86).Buffer)},function(e,t,n){var i=n(118),a=n(161),r=n(119).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function l(){this.init(),this._w=o,a.call(this,64,56)}function u(e){return e<<30|e>>>2}function c(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}i(l,a),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,a=0|this._b,r=0|this._c,o=0|this._d,l=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=n[d-3]^n[d-8]^n[d-14]^n[d-16];for(var h=0;h<80;++h){var f=~~(h/20),p=0|((t=i)<<5|t>>>27)+c(f,a,r,o)+l+n[h]+s[f];l=o,o=r,r=u(a),a=i,i=p}this._a=i+this._a|0,this._b=a+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=r.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},function(e,t,n){var i=n(118),a=n(161),r=n(119).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function l(){this.init(),this._w=o,a.call(this,64,56)}function u(e){return e<<5|e>>>27}function c(e){return e<<30|e>>>2}function d(e,t,n,i){return 0===e?t&n|~t&i:2===e?t&n|t&i|n&i:t^n^i}i(l,a),l.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},l.prototype._update=function(e){for(var t,n=this._w,i=0|this._a,a=0|this._b,r=0|this._c,o=0|this._d,l=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=(t=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|t>>>31;for(var f=0;f<80;++f){var p=~~(f/20),m=u(i)+d(p,a,r,o)+l+n[f]+s[p]|0;l=o,o=r,r=c(a),a=i,i=m}this._a=i+this._a|0,this._b=a+this._b|0,this._c=r+this._c|0,this._d=o+this._d|0,this._e=l+this._e|0},l.prototype._hash=function(){var e=r.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=l},function(e,t,n){var i=n(118),a=n(303),r=n(161),s=n(119).Buffer,o=new Array(64);function l(){this.init(),this._w=o,r.call(this,64,56)}i(l,a),l.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},l.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=l},function(e,t,n){var i=n(118),a=n(304),r=n(161),s=n(119).Buffer,o=new Array(160);function l(){this.init(),this._w=o,r.call(this,128,112)}i(l,a),l.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},l.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,n,i){e.writeInt32BE(t,i),e.writeInt32BE(n,i+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=l},function(e,t,n){"use strict";var i=n(118),a=n(119).Buffer,r=n(152),s=a.alloc(128),o=64;function l(e,t){r.call(this,"digest"),"string"==typeof t&&(t=a.from(t)),this._alg=e,this._key=t,t.length>o?t=e(t):t.length<o&&(t=a.concat([t,s],o));for(var n=this._ipad=a.allocUnsafe(o),i=this._opad=a.allocUnsafe(o),l=0;l<o;l++)n[l]=54^t[l],i[l]=92^t[l];this._hash=[n]}i(l,r),l.prototype._update=function(e){this._hash.push(e)},l.prototype._final=function(){var e=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,e]))},e.exports=l},function(e,t,n){"use strict";e.exports=n(307)},function(e,t,n){(function(t,i){var a,r=n(309),s=n(310),o=n(311),l=n(119).Buffer,u=t.crypto&&t.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function h(e,t,n,i,a){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:a}},e,i<<3)})).then((function(e){return l.from(e)}))}e.exports=function(e,n,f,p,m,g){if(l.isBuffer(e)||(e=l.from(e,s)),l.isBuffer(n)||(n=l.from(n,s)),r(f,p),"function"==typeof m&&(g=m,m=void 0),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");var b=c[(m=m||"sha1").toLowerCase()];if(!b||"function"!=typeof t.Promise)return i.nextTick((function(){var t;try{t=o(e,n,f,p,m)}catch(e){return g(e)}g(null,t)}));!function(e,t){e.then((function(e){i.nextTick((function(){t(null,e)}))}),(function(e){i.nextTick((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==d[e])return d[e];var n=h(a=a||l.alloc(8),a,10,128,e).then((function(){return!0})).catch((function(){return!1}));return d[e]=n,n}(b).then((function(t){return t?h(e,n,f,p,b):o(e,n,f,p,m)})),g)}}).call(this,n(139),n(87))},function(e,t,n){var i=n(196),a=n(232),r=n(515),s=n(521),o=n(233);function l(e,t,n){if(e=e.toLowerCase(),o[e])return a.createCipheriv(e,t,n);if(s[e])return new r({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function u(e,t,n){if(e=e.toLowerCase(),o[e])return a.createDecipheriv(e,t,n);if(s[e])return new r({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var n,a;if(e=e.toLowerCase(),o[e])n=o[e].key,a=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,a=s[e].iv}var r=i(t,!1,n,a);return l(e,r.key,r.iv)},t.createCipheriv=t.Cipheriv=l,t.createDecipher=t.Decipher=function(e,t){var n,a;if(e=e.toLowerCase(),o[e])n=o[e].key,a=o[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,a=s[e].iv}var r=i(t,!1,n,a);return u(e,r.key,r.iv)},t.createDecipheriv=t.Decipheriv=u,t.listCiphers=t.getCiphers=function(){return Object.keys(s).concat(a.getCiphers())}},function(e,t,n){var i=n(233),a=n(315),r=n(119).Buffer,s=n(316),o=n(152),l=n(197),u=n(196);function c(e,t,n){o.call(this),this._cache=new h,this._cipher=new l.AES(t),this._prev=r.from(n),this._mode=e,this._autopadding=!0}n(118)(c,o),c.prototype._update=function(e){var t,n;this._cache.add(e);for(var i=[];t=this._cache.get();)n=this._mode.encrypt(this,t),i.push(n);return r.concat(i)};var d=r.alloc(16,16);function h(){this.cache=r.allocUnsafe(0)}function f(e,t,n){var o=i[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=r.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=r.from(n)),"GCM"!==o.mode&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===o.type?new s(o.module,t,n):"auth"===o.type?new a(o.module,t,n):new c(o.module,t,n)}c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=r.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=r.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return r.concat([this.cache,t])},t.createCipheriv=f,t.createCipher=function(e,t){var n=i[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var a=u(t,!1,n.key,n.iv);return f(e,a.key,a.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){var i=n(177);t.encrypt=function(e,t){var n=i(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var a=e._cipher.decryptBlock(t);return i(a,n)}},function(e,t,n){var i=n(119).Buffer,a=n(177);function r(e,t,n){var r=t.length,s=a(t,e._cache);return e._cache=e._cache.slice(r),e._prev=i.concat([e._prev,n?t:s]),s}t.encrypt=function(e,t,n){for(var a,s=i.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=i.allocUnsafe(0)),!(e._cache.length<=t.length)){s=i.concat([s,r(e,t,n)]);break}a=e._cache.length,s=i.concat([s,r(e,t.slice(0,a),n)]),t=t.slice(a)}return s}},function(e,t,n){var i=n(119).Buffer;function a(e,t,n){var a=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=i.concat([e._prev.slice(1),i.from([n?t:a])]),a}t.encrypt=function(e,t,n){for(var r=t.length,s=i.allocUnsafe(r),o=-1;++o<r;)s[o]=a(e,t[o],n);return s}},function(e,t,n){var i=n(119).Buffer;function a(e,t,n){for(var i,a,s=-1,o=0;++s<8;)i=t&1<<7-s?128:0,o+=(128&(a=e._cipher.encryptBlock(e._prev)[0]^i))>>s%8,e._prev=r(e._prev,n?i:a);return o}function r(e,t){var n=e.length,a=-1,r=i.allocUnsafe(e.length);for(e=i.concat([e,i.from([t])]);++a<n;)r[a]=e[a]<<1|e[a+1]>>7;return r}t.encrypt=function(e,t,n){for(var r=t.length,s=i.allocUnsafe(r),o=-1;++o<r;)s[o]=a(e,t[o],n);return s}},function(e,t,n){(function(e){var i=n(177);function a(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,a(t)]);var r=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),i(n,r)}}).call(this,n(86).Buffer)},function(e,t,n){var i=n(119).Buffer,a=i.alloc(16,0);function r(e){var t=i.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=i.alloc(16,0),this.cache=i.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,n,i=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],a=[0,0,0,0],s=-1;++s<128;){for(!!(this.state[~~(s/8)]&1<<7-s%8)&&(a[0]^=i[0],a[1]^=i[1],a[2]^=i[2],a[3]^=i[3]),n=!!(1&i[3]),t=3;t>0;t--)i[t]=i[t]>>>1|(1&i[t-1])<<31;i[0]=i[0]>>>1,n&&(i[0]=i[0]^225<<24)}this.state=r(a)},s.prototype.update=function(e){var t;for(this.cache=i.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(i.concat([this.cache,a],16)),this.ghash(r([0,e,0,t])),this.state},e.exports=s},function(e,t,n){var i=n(315),a=n(119).Buffer,r=n(233),s=n(316),o=n(152),l=n(197),u=n(196);function c(e,t,n){o.call(this),this._cache=new d,this._last=void 0,this._cipher=new l.AES(t),this._prev=a.from(n),this._mode=e,this._autopadding=!0}function d(){this.cache=a.allocUnsafe(0)}function h(e,t,n){var o=r[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=a.from(n)),"GCM"!==o.mode&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=a.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===o.type?new s(o.module,t,n,!0):"auth"===o.type?new i(o.module,t,n,!0):new c(o.module,t,n)}n(118)(c,o),c.prototype._update=function(e){var t,n;this._cache.add(e);for(var i=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),i.push(n);return a.concat(i)},c.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){for(var t=e[15],n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=a.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=u(t,!1,n.key,n.iv);return h(e,i.key,i.iv)},t.createDecipheriv=h},function(e,t,n){(function(t){var i=n(152),a=n(234),r=n(118),s={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};function o(e){i.call(this);var n,a=e.mode.toLowerCase(),r=s[a];n=e.decrypt?"decrypt":"encrypt";var o=e.key;"des-ede"!==a&&"des-ede-cbc"!==a||(o=t.concat([o,o.slice(0,8)]));var l=e.iv;this._des=r.create({key:o,iv:l,type:n})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],e.exports=o,r(o,i),o.prototype._update=function(e){return new t(this._des.update(e))},o.prototype._final=function(){return new t(this._des.final())}}).call(this,n(86).Buffer)},function(e,t,n){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,i){for(var a=0,r=0,s=6;s>=0;s-=2){for(var o=0;o<=24;o+=8)a<<=1,a|=t>>>o+s&1;for(o=0;o<=24;o+=8)a<<=1,a|=e>>>o+s&1}for(s=6;s>=0;s-=2){for(o=1;o<=25;o+=8)r<<=1,r|=t>>>o+s&1;for(o=1;o<=25;o+=8)r<<=1,r|=e>>>o+s&1}n[i+0]=a>>>0,n[i+1]=r>>>0},t.rip=function(e,t,n,i){for(var a=0,r=0,s=0;s<4;s++)for(var o=24;o>=0;o-=8)a<<=1,a|=t>>>o+s&1,a<<=1,a|=e>>>o+s&1;for(s=4;s<8;s++)for(o=24;o>=0;o-=8)r<<=1,r|=t>>>o+s&1,r<<=1,r|=e>>>o+s&1;n[i+0]=a>>>0,n[i+1]=r>>>0},t.pc1=function(e,t,n,i){for(var a=0,r=0,s=7;s>=5;s--){for(var o=0;o<=24;o+=8)a<<=1,a|=t>>o+s&1;for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+s&1}for(o=0;o<=24;o+=8)a<<=1,a|=t>>o+s&1;for(s=1;s<=3;s++){for(o=0;o<=24;o+=8)r<<=1,r|=t>>o+s&1;for(o=0;o<=24;o+=8)r<<=1,r|=e>>o+s&1}for(o=0;o<=24;o+=8)r<<=1,r|=e>>o+s&1;n[i+0]=a>>>0,n[i+1]=r>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,n,a){for(var r=0,s=0,o=i.length>>>1,l=0;l<o;l++)r<<=1,r|=e>>>i[l]&1;for(l=o;l<i.length;l++)s<<=1,s|=t>>>i[l]&1;n[a+0]=r>>>0,n[a+1]=s>>>0},t.expand=function(e,t,n){var i=0,a=0;i=(1&e)<<5|e>>>27;for(var r=23;r>=15;r-=4)i<<=6,i|=e>>>r&63;for(r=11;r>=3;r-=4)a|=e>>>r&63,a<<=6;a|=(31&e)<<1|e>>>31,t[n+0]=i>>>0,t[n+1]=a>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,i=0;i<4;i++)n<<=4,n|=a[64*i+(e>>>18-6*i&63)];for(i=0;i<4;i++)n<<=4,n|=a[256+64*i+(t>>>18-6*i&63)];return n>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<r.length;n++)t<<=1,t|=e>>>r[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var i=e.toString(2);i.length<t;)i="0"+i;for(var a=[],r=0;r<t;r+=n)a.push(i.slice(r,r+n));return a.join(" ")}},function(e,t,n){"use strict";var i=n(135);function a(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=a,a.prototype._init=function(){},a.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},a.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),i=0;i<n;i++)this.buffer[this.bufferOff+i]=e[t+i];return this.bufferOff+=n,n},a.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},a.prototype._updateEncrypt=function(e){var t=0,n=0,i=(this.bufferOff+e.length)/this.blockSize|0,a=new Array(i*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(a,n)));for(var r=e.length-(e.length-t)%this.blockSize;t<r;t+=this.blockSize)this._update(e,t,a,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return a},a.prototype._updateDecrypt=function(e){for(var t=0,n=0,i=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,a=new Array(i*this.blockSize);i>0;i--)t+=this._buffer(e,t),n+=this._flushBuffer(a,n);return t+=this._buffer(e,t),a},a.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},a.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},a.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},a.prototype._unpad=function(e){return e},a.prototype._finalDecrypt=function(){i.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,n){"use strict";var i=n(135),a=n(118),r=n(234),s=r.utils,o=r.Cipher;function l(){this.tmp=new Array(2),this.keys=null}function u(e){o.call(this,e);var t=new l;this._desState=t,this.deriveKeys(t,e.key)}a(u,o),e.exports=u,u.create=function(e){return new u(e)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(e,t){e.keys=new Array(32),i.equal(t.length,this.blockSize,"Invalid key length");var n=s.readUInt32BE(t,0),a=s.readUInt32BE(t,4);s.pc1(n,a,e.tmp,0),n=e.tmp[0],a=e.tmp[1];for(var r=0;r<e.keys.length;r+=2){var o=c[r>>>1];n=s.r28shl(n,o),a=s.r28shl(a,o),s.pc2(n,a,e.keys,r)}},u.prototype._update=function(e,t,n,i){var a=this._desState,r=s.readUInt32BE(e,t),o=s.readUInt32BE(e,t+4);s.ip(r,o,a.tmp,0),r=a.tmp[0],o=a.tmp[1],"encrypt"===this.type?this._encrypt(a,r,o,a.tmp,0):this._decrypt(a,r,o,a.tmp,0),r=a.tmp[0],o=a.tmp[1],s.writeUInt32BE(n,r,i),s.writeUInt32BE(n,o,i+4)},u.prototype._pad=function(e,t){for(var n=e.length-t,i=t;i<e.length;i++)e[i]=n;return!0},u.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)i.equal(e[n],t);return e.slice(0,e.length-t)},u.prototype._encrypt=function(e,t,n,i,a){for(var r=t,o=n,l=0;l<e.keys.length;l+=2){var u=e.keys[l],c=e.keys[l+1];s.expand(o,e.tmp,0),u^=e.tmp[0],c^=e.tmp[1];var d=s.substitute(u,c),h=o;o=(r^s.permute(d))>>>0,r=h}s.rip(o,r,i,a)},u.prototype._decrypt=function(e,t,n,i,a){for(var r=n,o=t,l=e.keys.length-2;l>=0;l-=2){var u=e.keys[l],c=e.keys[l+1];s.expand(r,e.tmp,0),u^=e.tmp[0],c^=e.tmp[1];var d=s.substitute(u,c),h=r;r=(o^s.permute(d))>>>0,o=h}s.rip(r,o,i,a)}},function(e,t,n){"use strict";var i=n(135),a=n(118),r={};function s(e){i.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}a(t,e);for(var n=Object.keys(r),i=0;i<n.length;i++){var s=n[i];t.prototype[s]=r[s]}return t.create=function(e){return new t(e)},t},r._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},r._update=function(e,t,n,i){var a=this._cbcState,r=this.constructor.super_.prototype,s=a.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)s[o]^=e[t+o];for(r._update.call(this,s,0,n,i),o=0;o<this.blockSize;o++)s[o]=n[i+o]}else{for(r._update.call(this,e,t,n,i),o=0;o<this.blockSize;o++)n[i+o]^=s[o];for(o=0;o<this.blockSize;o++)s[o]=e[t+o]}}},function(e,t,n){"use strict";var i=n(135),a=n(118),r=n(234),s=r.Cipher,o=r.DES;function l(e,t){i.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),a=t.slice(8,16),r=t.slice(16,24);this.ciphers="encrypt"===e?[o.create({type:"encrypt",key:n}),o.create({type:"decrypt",key:a}),o.create({type:"encrypt",key:r})]:[o.create({type:"decrypt",key:r}),o.create({type:"encrypt",key:a}),o.create({type:"decrypt",key:n})]}function u(e){s.call(this,e);var t=new l(this.type,this.options.key);this._edeState=t}a(u,s),e.exports=u,u.create=function(e){return new u(e)},u.prototype._update=function(e,t,n,i){var a=this._edeState;a.ciphers[0]._update(e,t,n,i),a.ciphers[1]._update(n,i,n,i),a.ciphers[2]._update(n,i,n,i)},u.prototype._pad=o.prototype._pad,u.prototype._unpad=o.prototype._unpad},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,n){(function(e){var i=n(317),a=n(525),r=n(526),s={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var n=new e(a[t].prime,"hex"),i=new e(a[t].gen,"hex");return new r(n,i)},t.createDiffieHellman=t.DiffieHellman=function t(n,a,o,l){return e.isBuffer(a)||void 0===s[a]?t(n,"binary",a,o):(a=a||"binary",l=l||"binary",o=o||new e([2]),e.isBuffer(o)||(o=new e(o,l)),"number"==typeof n?new r(i(n,o),o,!0):(e.isBuffer(n)||(n=new e(n,a)),new r(n,o,!0)))}}).call(this,n(86).Buffer)},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,n){(function(t){var i=n(127),a=new(n(318)),r=new i(24),s=new i(11),o=new i(10),l=new i(3),u=new i(7),c=n(317),d=n(160);function h(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._pub=new i(e),this}function f(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this._priv=new i(e),this}e.exports=m;var p={};function m(e,t,n){this.setGenerator(t),this.__prime=new i(e),this._prime=i.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=h,this.setPrivateKey=f):this._primeCode=8}function g(e,n){var i=new t(e.toArray());return n?i.toString(n):i}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),i=[n,e.toString(16)].join("_");if(i in p)return p[i];var d,h=0;if(e.isEven()||!c.simpleSieve||!c.fermatTest(e)||!a.test(e))return h+=1,h+="02"===n||"05"===n?8:4,p[i]=h,h;switch(a.test(e.shrn(1))||(h+=2),n){case"02":e.mod(r).cmp(s)&&(h+=8);break;case"05":(d=e.mod(o)).cmp(l)&&d.cmp(u)&&(h+=8);break;default:h+=4}return p[i]=h,h}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new i(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var n=(e=(e=new i(e)).toRed(this._prime)).redPow(this._priv).fromRed(),a=new t(n.toArray()),r=this.getPrime();if(a.length<r.length){var s=new t(r.length-a.length);s.fill(0),a=t.concat([s,a])}return a},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.__gen=e,this._gen=new i(e),this}}).call(this,n(86).Buffer)},function(e,t,n){"use strict";var i=n(119).Buffer,a=n(173),r=n(528),s=n(118),o=n(536),l=n(567),u=n(307);function c(e){r.Writable.call(this);var t=u[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=a(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){r.Writable.call(this);var t=u[e];if(!t)throw new Error("Unknown message digest");this._hash=a(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){return new c(e)}function f(e){return new d(e)}Object.keys(u).forEach((function(e){u[e].id=i.from(u[e].id,"hex"),u[e.toLowerCase()]=u[e]})),s(c,r.Writable),c.prototype._write=function(e,t,n){this._hash.update(e),n()},c.prototype.update=function(e,t){return this._hash.update("string"==typeof e?i.from(e,t):e),this},c.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),i=o(n,e,this._hashType,this._signType,this._tag);return t?i.toString(t):i},s(d,r.Writable),d.prototype._write=function(e,t,n){this._hash.update(e),n()},d.prototype.update=function(e,t){return this._hash.update("string"==typeof e?i.from(e,t):e),this},d.prototype.verify=function(e,t,n){var a="string"==typeof t?i.from(t,n):t;this.end();var r=this._hash.digest();return l(a,r,e,this._signType,this._tag)},e.exports={Sign:h,Verify:f,createSign:h,createVerify:f}},function(e,t,n){(t=e.exports=n(319)).Stream=t,t.Readable=t,t.Writable=n(323),t.Duplex=n(163),t.Transform=n(324),t.PassThrough=n(534),t.finished=n(237),t.pipeline=n(535)},function(e,t){},function(e,t,n){"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,o(i.key),i)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}var l=n(86).Buffer,u=n(531).inspect,c=u&&u.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,n,i,a=l.allocUnsafe(e>>>0),r=this.head,s=0;r;)t=r.data,n=a,i=s,l.prototype.copy.call(t,n,i),s+=r.data.length,r=r.next;return a}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var a=t.data,r=e>a.length?a.length:e;if(r===a.length?i+=a:i+=a.slice(0,e),0==(e-=r)){r===a.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=a.slice(r));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,r=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,r),0==(e-=r)){r===a.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=a.slice(r));break}++i}return this.length-=i,t}},{key:c,value:function(e,t){return u(this,a(a({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t){},function(e,t,n){"use strict";(function(t){var i;function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(237),s=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[c]=null,e[s]=null,e[o]=null,t(f(n,!1)))}}function m(e){t.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((a(i={get stream(){return this[h]},next:function(){var e=this,n=this[l];if(null!==n)return Promise.reject(n);if(this[u])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise((function(n,i){t.nextTick((function(){e[l]?i(e[l]):n(f(void 0,!0))}))}));var i,a=this[c];if(a)i=new Promise(function(e,t){return function(n,i){e.then((function(){t[u]?n(f(void 0,!0)):t[d](n,i)}),i)}}(a,this));else{var r=this[h].read();if(null!==r)return Promise.resolve(f(r,!1));i=new Promise(this[d])}return this[c]=i,i}},Symbol.asyncIterator,(function(){return this})),a(i,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),i),g);e.exports=function(e){var t,n=Object.create(b,(a(t={},h,{value:e,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,o,{value:null,writable:!0}),a(t,l,{value:null,writable:!0}),a(t,u,{value:e._readableState.endEmitted,writable:!0}),a(t,d,{value:function(e,t){var i=n[h].read();i?(n[c]=null,n[s]=null,n[o]=null,e(f(i,!1))):(n[s]=e,n[o]=t)},writable:!0}),t));return n[c]=null,r(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[o];return null!==t&&(n[c]=null,n[s]=null,n[o]=null,t(e)),void(n[l]=e)}var i=n[s];null!==i&&(n[c]=null,n[s]=null,n[o]=null,i(f(void 0,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this,n(87))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,n){"use strict";e.exports=a;var i=n(324);function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}n(118)(a,i),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){"use strict";var i,a=n(162).codes,r=a.ERR_MISSING_ARGS,s=a.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function l(e){e()}function u(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var c,d=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new r("streams");var h=t.map((function(e,a){var r=a<t.length-1;return function(e,t,a,r){r=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(r);var o=!1;e.on("close",(function(){o=!0})),void 0===i&&(i=n(237)),i(e,{readable:t,writable:a},(function(e){if(e)return r(e);o=!0,r()}));var l=!1;return function(t){if(!o&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new s("pipe"))}}(e,r,a>0,(function(e){c||(c=e),e&&h.forEach(l),r||(h.forEach(l),d(c))}))}));return t.reduce(u)}},function(e,t,n){"use strict";var i=n(119).Buffer,a=n(305),r=n(238),s=n(239).ec,o=n(330),l=n(199),u=n(336);function c(e,t,n,r){if((e=i.from(e.toArray())).length<t.byteLength()){var s=i.alloc(t.byteLength()-e.length);e=i.concat([s,e])}var o=n.length,l=function(e,t){e=(e=d(e,t)).mod(t);var n=i.from(e.toArray());if(n.length<t.byteLength()){var a=i.alloc(t.byteLength()-n.length);n=i.concat([a,n])}return n}(n,t),u=i.alloc(o);u.fill(1);var c=i.alloc(o);return c=a(r,c).update(u).update(i.from([0])).update(e).update(l).digest(),u=a(r,c).update(u).digest(),{k:c=a(r,c).update(u).update(i.from([1])).update(e).update(l).digest(),v:u=a(r,c).update(u).digest()}}function d(e,t){var n=new o(e),i=(e.length<<3)-t.bitLength();return i>0&&n.ishrn(i),n}function h(e,t,n){var r,s;do{for(r=i.alloc(0);8*r.length<e.bitLength();)t.v=a(n,t.k).update(t.v).digest(),r=i.concat([r,t.v]);s=d(r,e),t.k=a(n,t.k).update(t.v).update(i.from([0])).digest(),t.v=a(n,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function f(e,t,n,i){return e.toRed(o.mont(n)).redPow(t).fromRed().mod(i)}e.exports=function(e,t,n,a,p){var m=l(t);if(m.curve){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");return function(e,t){var n=u[t.curve.join(".")];if(!n)throw new Error("unknown curve "+t.curve.join("."));var a=new s(n).keyFromPrivate(t.privateKey).sign(e);return i.from(a.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==a)throw new Error("wrong private key type");return function(e,t,n){for(var a,r=t.params.priv_key,s=t.params.p,l=t.params.q,u=t.params.g,p=new o(0),m=d(e,l).mod(l),g=!1,b=c(r,l,e,n);!1===g;)p=f(u,a=h(l,b,n),s,l),0===(g=a.invm(l).imul(m.add(r.mul(p))).mod(l)).cmpn(0)&&(g=!1,p=new o(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var n=[48,e.length+t.length+4,2,e.length];return n=n.concat(e,[2,t.length],t),i.from(n)}(p,g)}(e,m,n)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong private key type");if(void 0!==t.padding&&1!==t.padding)throw new Error("illegal or unsupported padding mode");e=i.concat([p,e]);for(var g=m.modulus.byteLength(),b=[0,1];e.length+b.length+1<g;)b.push(255);b.push(0);for(var y=-1;++y<e.length;)b.push(e[y]);return r(b,m)},e.exports.getKey=c,e.exports.makeKey=h},function(e,t,n){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function a(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e,t,n){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=r:t.BN=r,r.BN=r,r.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(538).Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void i(!1,"Invalid character in "+e)}function l(e,t,n){var i=o(e,n);return n-1>=t&&(i|=o(e,n-1)<<4),i}function u(e,t,n,a){for(var r=0,s=0,o=Math.min(e.length,n),l=t;l<o;l++){var u=e.charCodeAt(l)-48;r*=a,s=u>=49?u-49+10:u>=17?u-17+10:u,i(u>=0&&s<a,"Invalid character"),r+=s}return r}function c(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var a=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(a++,this.negative=1),a<e.length&&(16===t?this._parseHex(e,a,n):(this._parseBase(e,t,a),"le"===n&&this._initArray(this.toArray(),t,n)))},r.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},r.prototype._initArray=function(e,t,n){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,s,o=0;if("be"===n)for(a=e.length-1,r=0;a>=0;a-=3)s=e[a]|e[a-1]<<8|e[a-2]<<16,this.words[r]|=s<<o&67108863,this.words[r+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);else if("le"===n)for(a=0,r=0;a<e.length;a+=3)s=e[a]|e[a+1]<<8|e[a+2]<<16,this.words[r]|=s<<o&67108863,this.words[r+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,r++);return this._strip()},r.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,r=0,s=0;if("be"===n)for(i=e.length-1;i>=t;i-=2)a=l(e,t,i)<<r,this.words[s]|=67108863&a,r>=18?(r-=18,s+=1,this.words[s]|=a>>>26):r+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)a=l(e,t,i)<<r,this.words[s]|=67108863&a,r>=18?(r-=18,s+=1,this.words[s]|=a>>>26):r+=8;this._strip()},r.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var i=0,a=1;a<=67108863;a*=t)i++;i--,a=a/t|0;for(var r=e.length-n,s=r%i,o=Math.min(r,r-s)+n,l=0,c=n;c<o;c+=i)l=u(e,c,c+i,t),this.imuln(a),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=u(e,c,e.length,t),c=0;c<s;c++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype._move=function(e){c(e,this)},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){r.prototype.inspect=d}else r.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(e,t,n){n.negative=t.negative^e.negative;var i=e.length+t.length|0;n.length=i,i=i-1|0;var a=0|e.words[0],r=0|t.words[0],s=a*r,o=67108863&s,l=s/67108864|0;n.words[0]=o;for(var u=1;u<i;u++){for(var c=l>>>26,d=67108863&l,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;c+=(s=(a=0|e.words[p])*(r=0|t.words[f])+d)/67108864|0,d=67108863&s}n.words[u]=0|d,l=0|c}return 0!==l?n.words[u]=0|l:n.length--,n._strip()}r.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var a=0,r=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<a|r)).toString(16);r=o>>>24-a&16777215,(a+=2)>=26&&(a-=26,s--),n=0!==r||s!==this.length-1?h[6-l.length]+l+n:l+n}for(0!==r&&(n=r.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=f[e],c=p[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(c).toString(e);n=(d=d.idivn(c)).isZero()?m+n:h[u-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16,2)},s&&(r.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},r.prototype.toArrayLike=function(e,t,n){this._strip();var a=this.byteLength(),r=n||Math.max(1,a);i(a<=r,"byte array longer than desired length"),i(r>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,r);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,a),s},r.prototype._toArrayLikeLE=function(e,t){for(var n=0,i=0,a=0,r=0;a<this.length;a++){var s=this.words[a]<<r|i;e[n++]=255&s,n<e.length&&(e[n++]=s>>8&255),n<e.length&&(e[n++]=s>>16&255),6===r?(n<e.length&&(e[n++]=s>>24&255),i=0,r=0):(i=s>>>24,r+=2)}if(n<e.length)for(e[n++]=i;n<e.length;)e[n++]=0},r.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,i=0,a=0,r=0;a<this.length;a++){var s=this.words[a]<<r|i;e[n--]=255&s,n>=0&&(e[n--]=s>>8&255),n>=0&&(e[n--]=s>>16&255),6===r?(n>=0&&(e[n--]=s>>24&255),i=0,r=0):(i=s>>>24,r+=2)}if(n>=0)for(e[n--]=i;n>=0;)e[n--]=0},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 8191&t||(n+=13,t>>>=13),127&t||(n+=7,t>>>=7),15&t||(n+=4,t>>>=4),3&t||(n+=2,t>>>=2),1&t||n++,n},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},r.prototype.ior=function(e){return i(!(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},r.prototype.iand=function(e){return i(!(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var i=0;i<n.length;i++)this.words[i]=t.words[i]^n.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},r.prototype.ixor=function(e){return i(!(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var a=0;a<t;a++)this.words[a]=67108863&~this.words[a];return n>0&&(this.words[a]=~this.words[a]&67108863>>26-n),this._strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var n=e/26|0,a=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<a:this.words[n]&~(1<<a),this._strip()},r.prototype.iadd=function(e){var t,n,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,i=e):(n=e,i=this);for(var a=0,r=0;r<i.length;r++)t=(0|n.words[r])+(0|i.words[r])+a,this.words[r]=67108863&t,a=t>>>26;for(;0!==a&&r<n.length;r++)t=(0|n.words[r])+a,this.words[r]=67108863&t,a=t>>>26;if(this.length=n.length,0!==a)this.words[this.length]=a,this.length++;else if(n!==this)for(;r<n.length;r++)this.words[r]=n.words[r];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,i,a=this.cmp(e);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(n=this,i=e):(n=e,i=this);for(var r=0,s=0;s<i.length;s++)r=(t=(0|n.words[s])-(0|i.words[s])+r)>>26,this.words[s]=67108863&t;for(;0!==r&&s<n.length;s++)r=(t=(0|n.words[s])+r)>>26,this.words[s]=67108863&t;if(0===r&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var i,a,r,s=e.words,o=t.words,l=n.words,u=0,c=0|s[0],d=8191&c,h=c>>>13,f=0|s[1],p=8191&f,m=f>>>13,g=0|s[2],b=8191&g,y=g>>>13,v=0|s[3],E=8191&v,w=v>>>13,x=0|s[4],S=8191&x,k=x>>>13,M=0|s[5],_=8191&M,A=M>>>13,C=0|s[6],F=8191&C,D=C>>>13,T=0|s[7],I=8191&T,P=T>>>13,O=0|s[8],j=8191&O,B=O>>>13,L=0|s[9],N=8191&L,R=L>>>13,z=0|o[0],U=8191&z,Z=z>>>13,K=0|o[1],q=8191&K,H=K>>>13,W=0|o[2],V=8191&W,G=W>>>13,$=0|o[3],X=8191&$,J=$>>>13,Y=0|o[4],Q=8191&Y,ee=Y>>>13,te=0|o[5],ne=8191&te,ie=te>>>13,ae=0|o[6],re=8191&ae,se=ae>>>13,oe=0|o[7],le=8191&oe,ue=oe>>>13,ce=0|o[8],de=8191&ce,he=ce>>>13,fe=0|o[9],pe=8191&fe,me=fe>>>13;n.negative=e.negative^t.negative,n.length=19;var ge=(u+(i=Math.imul(d,U))|0)+((8191&(a=(a=Math.imul(d,Z))+Math.imul(h,U)|0))<<13)|0;u=((r=Math.imul(h,Z))+(a>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(p,U),a=(a=Math.imul(p,Z))+Math.imul(m,U)|0,r=Math.imul(m,Z);var be=(u+(i=i+Math.imul(d,q)|0)|0)+((8191&(a=(a=a+Math.imul(d,H)|0)+Math.imul(h,q)|0))<<13)|0;u=((r=r+Math.imul(h,H)|0)+(a>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(b,U),a=(a=Math.imul(b,Z))+Math.imul(y,U)|0,r=Math.imul(y,Z),i=i+Math.imul(p,q)|0,a=(a=a+Math.imul(p,H)|0)+Math.imul(m,q)|0,r=r+Math.imul(m,H)|0;var ye=(u+(i=i+Math.imul(d,V)|0)|0)+((8191&(a=(a=a+Math.imul(d,G)|0)+Math.imul(h,V)|0))<<13)|0;u=((r=r+Math.imul(h,G)|0)+(a>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(E,U),a=(a=Math.imul(E,Z))+Math.imul(w,U)|0,r=Math.imul(w,Z),i=i+Math.imul(b,q)|0,a=(a=a+Math.imul(b,H)|0)+Math.imul(y,q)|0,r=r+Math.imul(y,H)|0,i=i+Math.imul(p,V)|0,a=(a=a+Math.imul(p,G)|0)+Math.imul(m,V)|0,r=r+Math.imul(m,G)|0;var ve=(u+(i=i+Math.imul(d,X)|0)|0)+((8191&(a=(a=a+Math.imul(d,J)|0)+Math.imul(h,X)|0))<<13)|0;u=((r=r+Math.imul(h,J)|0)+(a>>>13)|0)+(ve>>>26)|0,ve&=67108863,i=Math.imul(S,U),a=(a=Math.imul(S,Z))+Math.imul(k,U)|0,r=Math.imul(k,Z),i=i+Math.imul(E,q)|0,a=(a=a+Math.imul(E,H)|0)+Math.imul(w,q)|0,r=r+Math.imul(w,H)|0,i=i+Math.imul(b,V)|0,a=(a=a+Math.imul(b,G)|0)+Math.imul(y,V)|0,r=r+Math.imul(y,G)|0,i=i+Math.imul(p,X)|0,a=(a=a+Math.imul(p,J)|0)+Math.imul(m,X)|0,r=r+Math.imul(m,J)|0;var Ee=(u+(i=i+Math.imul(d,Q)|0)|0)+((8191&(a=(a=a+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;u=((r=r+Math.imul(h,ee)|0)+(a>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(_,U),a=(a=Math.imul(_,Z))+Math.imul(A,U)|0,r=Math.imul(A,Z),i=i+Math.imul(S,q)|0,a=(a=a+Math.imul(S,H)|0)+Math.imul(k,q)|0,r=r+Math.imul(k,H)|0,i=i+Math.imul(E,V)|0,a=(a=a+Math.imul(E,G)|0)+Math.imul(w,V)|0,r=r+Math.imul(w,G)|0,i=i+Math.imul(b,X)|0,a=(a=a+Math.imul(b,J)|0)+Math.imul(y,X)|0,r=r+Math.imul(y,J)|0,i=i+Math.imul(p,Q)|0,a=(a=a+Math.imul(p,ee)|0)+Math.imul(m,Q)|0,r=r+Math.imul(m,ee)|0;var we=(u+(i=i+Math.imul(d,ne)|0)|0)+((8191&(a=(a=a+Math.imul(d,ie)|0)+Math.imul(h,ne)|0))<<13)|0;u=((r=r+Math.imul(h,ie)|0)+(a>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(F,U),a=(a=Math.imul(F,Z))+Math.imul(D,U)|0,r=Math.imul(D,Z),i=i+Math.imul(_,q)|0,a=(a=a+Math.imul(_,H)|0)+Math.imul(A,q)|0,r=r+Math.imul(A,H)|0,i=i+Math.imul(S,V)|0,a=(a=a+Math.imul(S,G)|0)+Math.imul(k,V)|0,r=r+Math.imul(k,G)|0,i=i+Math.imul(E,X)|0,a=(a=a+Math.imul(E,J)|0)+Math.imul(w,X)|0,r=r+Math.imul(w,J)|0,i=i+Math.imul(b,Q)|0,a=(a=a+Math.imul(b,ee)|0)+Math.imul(y,Q)|0,r=r+Math.imul(y,ee)|0,i=i+Math.imul(p,ne)|0,a=(a=a+Math.imul(p,ie)|0)+Math.imul(m,ne)|0,r=r+Math.imul(m,ie)|0;var xe=(u+(i=i+Math.imul(d,re)|0)|0)+((8191&(a=(a=a+Math.imul(d,se)|0)+Math.imul(h,re)|0))<<13)|0;u=((r=r+Math.imul(h,se)|0)+(a>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(I,U),a=(a=Math.imul(I,Z))+Math.imul(P,U)|0,r=Math.imul(P,Z),i=i+Math.imul(F,q)|0,a=(a=a+Math.imul(F,H)|0)+Math.imul(D,q)|0,r=r+Math.imul(D,H)|0,i=i+Math.imul(_,V)|0,a=(a=a+Math.imul(_,G)|0)+Math.imul(A,V)|0,r=r+Math.imul(A,G)|0,i=i+Math.imul(S,X)|0,a=(a=a+Math.imul(S,J)|0)+Math.imul(k,X)|0,r=r+Math.imul(k,J)|0,i=i+Math.imul(E,Q)|0,a=(a=a+Math.imul(E,ee)|0)+Math.imul(w,Q)|0,r=r+Math.imul(w,ee)|0,i=i+Math.imul(b,ne)|0,a=(a=a+Math.imul(b,ie)|0)+Math.imul(y,ne)|0,r=r+Math.imul(y,ie)|0,i=i+Math.imul(p,re)|0,a=(a=a+Math.imul(p,se)|0)+Math.imul(m,re)|0,r=r+Math.imul(m,se)|0;var Se=(u+(i=i+Math.imul(d,le)|0)|0)+((8191&(a=(a=a+Math.imul(d,ue)|0)+Math.imul(h,le)|0))<<13)|0;u=((r=r+Math.imul(h,ue)|0)+(a>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(j,U),a=(a=Math.imul(j,Z))+Math.imul(B,U)|0,r=Math.imul(B,Z),i=i+Math.imul(I,q)|0,a=(a=a+Math.imul(I,H)|0)+Math.imul(P,q)|0,r=r+Math.imul(P,H)|0,i=i+Math.imul(F,V)|0,a=(a=a+Math.imul(F,G)|0)+Math.imul(D,V)|0,r=r+Math.imul(D,G)|0,i=i+Math.imul(_,X)|0,a=(a=a+Math.imul(_,J)|0)+Math.imul(A,X)|0,r=r+Math.imul(A,J)|0,i=i+Math.imul(S,Q)|0,a=(a=a+Math.imul(S,ee)|0)+Math.imul(k,Q)|0,r=r+Math.imul(k,ee)|0,i=i+Math.imul(E,ne)|0,a=(a=a+Math.imul(E,ie)|0)+Math.imul(w,ne)|0,r=r+Math.imul(w,ie)|0,i=i+Math.imul(b,re)|0,a=(a=a+Math.imul(b,se)|0)+Math.imul(y,re)|0,r=r+Math.imul(y,se)|0,i=i+Math.imul(p,le)|0,a=(a=a+Math.imul(p,ue)|0)+Math.imul(m,le)|0,r=r+Math.imul(m,ue)|0;var ke=(u+(i=i+Math.imul(d,de)|0)|0)+((8191&(a=(a=a+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((r=r+Math.imul(h,he)|0)+(a>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(N,U),a=(a=Math.imul(N,Z))+Math.imul(R,U)|0,r=Math.imul(R,Z),i=i+Math.imul(j,q)|0,a=(a=a+Math.imul(j,H)|0)+Math.imul(B,q)|0,r=r+Math.imul(B,H)|0,i=i+Math.imul(I,V)|0,a=(a=a+Math.imul(I,G)|0)+Math.imul(P,V)|0,r=r+Math.imul(P,G)|0,i=i+Math.imul(F,X)|0,a=(a=a+Math.imul(F,J)|0)+Math.imul(D,X)|0,r=r+Math.imul(D,J)|0,i=i+Math.imul(_,Q)|0,a=(a=a+Math.imul(_,ee)|0)+Math.imul(A,Q)|0,r=r+Math.imul(A,ee)|0,i=i+Math.imul(S,ne)|0,a=(a=a+Math.imul(S,ie)|0)+Math.imul(k,ne)|0,r=r+Math.imul(k,ie)|0,i=i+Math.imul(E,re)|0,a=(a=a+Math.imul(E,se)|0)+Math.imul(w,re)|0,r=r+Math.imul(w,se)|0,i=i+Math.imul(b,le)|0,a=(a=a+Math.imul(b,ue)|0)+Math.imul(y,le)|0,r=r+Math.imul(y,ue)|0,i=i+Math.imul(p,de)|0,a=(a=a+Math.imul(p,he)|0)+Math.imul(m,de)|0,r=r+Math.imul(m,he)|0;var Me=(u+(i=i+Math.imul(d,pe)|0)|0)+((8191&(a=(a=a+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((r=r+Math.imul(h,me)|0)+(a>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(N,q),a=(a=Math.imul(N,H))+Math.imul(R,q)|0,r=Math.imul(R,H),i=i+Math.imul(j,V)|0,a=(a=a+Math.imul(j,G)|0)+Math.imul(B,V)|0,r=r+Math.imul(B,G)|0,i=i+Math.imul(I,X)|0,a=(a=a+Math.imul(I,J)|0)+Math.imul(P,X)|0,r=r+Math.imul(P,J)|0,i=i+Math.imul(F,Q)|0,a=(a=a+Math.imul(F,ee)|0)+Math.imul(D,Q)|0,r=r+Math.imul(D,ee)|0,i=i+Math.imul(_,ne)|0,a=(a=a+Math.imul(_,ie)|0)+Math.imul(A,ne)|0,r=r+Math.imul(A,ie)|0,i=i+Math.imul(S,re)|0,a=(a=a+Math.imul(S,se)|0)+Math.imul(k,re)|0,r=r+Math.imul(k,se)|0,i=i+Math.imul(E,le)|0,a=(a=a+Math.imul(E,ue)|0)+Math.imul(w,le)|0,r=r+Math.imul(w,ue)|0,i=i+Math.imul(b,de)|0,a=(a=a+Math.imul(b,he)|0)+Math.imul(y,de)|0,r=r+Math.imul(y,he)|0;var _e=(u+(i=i+Math.imul(p,pe)|0)|0)+((8191&(a=(a=a+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((r=r+Math.imul(m,me)|0)+(a>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(N,V),a=(a=Math.imul(N,G))+Math.imul(R,V)|0,r=Math.imul(R,G),i=i+Math.imul(j,X)|0,a=(a=a+Math.imul(j,J)|0)+Math.imul(B,X)|0,r=r+Math.imul(B,J)|0,i=i+Math.imul(I,Q)|0,a=(a=a+Math.imul(I,ee)|0)+Math.imul(P,Q)|0,r=r+Math.imul(P,ee)|0,i=i+Math.imul(F,ne)|0,a=(a=a+Math.imul(F,ie)|0)+Math.imul(D,ne)|0,r=r+Math.imul(D,ie)|0,i=i+Math.imul(_,re)|0,a=(a=a+Math.imul(_,se)|0)+Math.imul(A,re)|0,r=r+Math.imul(A,se)|0,i=i+Math.imul(S,le)|0,a=(a=a+Math.imul(S,ue)|0)+Math.imul(k,le)|0,r=r+Math.imul(k,ue)|0,i=i+Math.imul(E,de)|0,a=(a=a+Math.imul(E,he)|0)+Math.imul(w,de)|0,r=r+Math.imul(w,he)|0;var Ae=(u+(i=i+Math.imul(b,pe)|0)|0)+((8191&(a=(a=a+Math.imul(b,me)|0)+Math.imul(y,pe)|0))<<13)|0;u=((r=r+Math.imul(y,me)|0)+(a>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(N,X),a=(a=Math.imul(N,J))+Math.imul(R,X)|0,r=Math.imul(R,J),i=i+Math.imul(j,Q)|0,a=(a=a+Math.imul(j,ee)|0)+Math.imul(B,Q)|0,r=r+Math.imul(B,ee)|0,i=i+Math.imul(I,ne)|0,a=(a=a+Math.imul(I,ie)|0)+Math.imul(P,ne)|0,r=r+Math.imul(P,ie)|0,i=i+Math.imul(F,re)|0,a=(a=a+Math.imul(F,se)|0)+Math.imul(D,re)|0,r=r+Math.imul(D,se)|0,i=i+Math.imul(_,le)|0,a=(a=a+Math.imul(_,ue)|0)+Math.imul(A,le)|0,r=r+Math.imul(A,ue)|0,i=i+Math.imul(S,de)|0,a=(a=a+Math.imul(S,he)|0)+Math.imul(k,de)|0,r=r+Math.imul(k,he)|0;var Ce=(u+(i=i+Math.imul(E,pe)|0)|0)+((8191&(a=(a=a+Math.imul(E,me)|0)+Math.imul(w,pe)|0))<<13)|0;u=((r=r+Math.imul(w,me)|0)+(a>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(N,Q),a=(a=Math.imul(N,ee))+Math.imul(R,Q)|0,r=Math.imul(R,ee),i=i+Math.imul(j,ne)|0,a=(a=a+Math.imul(j,ie)|0)+Math.imul(B,ne)|0,r=r+Math.imul(B,ie)|0,i=i+Math.imul(I,re)|0,a=(a=a+Math.imul(I,se)|0)+Math.imul(P,re)|0,r=r+Math.imul(P,se)|0,i=i+Math.imul(F,le)|0,a=(a=a+Math.imul(F,ue)|0)+Math.imul(D,le)|0,r=r+Math.imul(D,ue)|0,i=i+Math.imul(_,de)|0,a=(a=a+Math.imul(_,he)|0)+Math.imul(A,de)|0,r=r+Math.imul(A,he)|0;var Fe=(u+(i=i+Math.imul(S,pe)|0)|0)+((8191&(a=(a=a+Math.imul(S,me)|0)+Math.imul(k,pe)|0))<<13)|0;u=((r=r+Math.imul(k,me)|0)+(a>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(N,ne),a=(a=Math.imul(N,ie))+Math.imul(R,ne)|0,r=Math.imul(R,ie),i=i+Math.imul(j,re)|0,a=(a=a+Math.imul(j,se)|0)+Math.imul(B,re)|0,r=r+Math.imul(B,se)|0,i=i+Math.imul(I,le)|0,a=(a=a+Math.imul(I,ue)|0)+Math.imul(P,le)|0,r=r+Math.imul(P,ue)|0,i=i+Math.imul(F,de)|0,a=(a=a+Math.imul(F,he)|0)+Math.imul(D,de)|0,r=r+Math.imul(D,he)|0;var De=(u+(i=i+Math.imul(_,pe)|0)|0)+((8191&(a=(a=a+Math.imul(_,me)|0)+Math.imul(A,pe)|0))<<13)|0;u=((r=r+Math.imul(A,me)|0)+(a>>>13)|0)+(De>>>26)|0,De&=67108863,i=Math.imul(N,re),a=(a=Math.imul(N,se))+Math.imul(R,re)|0,r=Math.imul(R,se),i=i+Math.imul(j,le)|0,a=(a=a+Math.imul(j,ue)|0)+Math.imul(B,le)|0,r=r+Math.imul(B,ue)|0,i=i+Math.imul(I,de)|0,a=(a=a+Math.imul(I,he)|0)+Math.imul(P,de)|0,r=r+Math.imul(P,he)|0;var Te=(u+(i=i+Math.imul(F,pe)|0)|0)+((8191&(a=(a=a+Math.imul(F,me)|0)+Math.imul(D,pe)|0))<<13)|0;u=((r=r+Math.imul(D,me)|0)+(a>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(N,le),a=(a=Math.imul(N,ue))+Math.imul(R,le)|0,r=Math.imul(R,ue),i=i+Math.imul(j,de)|0,a=(a=a+Math.imul(j,he)|0)+Math.imul(B,de)|0,r=r+Math.imul(B,he)|0;var Ie=(u+(i=i+Math.imul(I,pe)|0)|0)+((8191&(a=(a=a+Math.imul(I,me)|0)+Math.imul(P,pe)|0))<<13)|0;u=((r=r+Math.imul(P,me)|0)+(a>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(N,de),a=(a=Math.imul(N,he))+Math.imul(R,de)|0,r=Math.imul(R,he);var Pe=(u+(i=i+Math.imul(j,pe)|0)|0)+((8191&(a=(a=a+Math.imul(j,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((r=r+Math.imul(B,me)|0)+(a>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Oe=(u+(i=Math.imul(N,pe))|0)+((8191&(a=(a=Math.imul(N,me))+Math.imul(R,pe)|0))<<13)|0;return u=((r=Math.imul(R,me))+(a>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,l[0]=ge,l[1]=be,l[2]=ye,l[3]=ve,l[4]=Ee,l[5]=we,l[6]=xe,l[7]=Se,l[8]=ke,l[9]=Me,l[10]=_e,l[11]=Ae,l[12]=Ce,l[13]=Fe,l[14]=De,l[15]=Te,l[16]=Ie,l[17]=Pe,l[18]=Oe,0!==u&&(l[19]=u,n.length++),n};function b(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var i=0,a=0,r=0;r<n.length-1;r++){var s=a;a=0;for(var o=67108863&i,l=Math.min(r,t.length-1),u=Math.max(0,r-e.length+1);u<=l;u++){var c=r-u,d=(0|e.words[c])*(0|t.words[u]),h=67108863&d;o=67108863&(h=h+o|0),a+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[r]=o,i=s,s=a}return 0!==i?n.words[r]=i:n.length--,n._strip()}function y(e,t,n){return b(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(g=m),r.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?m(this,e,t):n<1024?b(this,e,t):y(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=r.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var i=0,a=0;a<t;a++)i|=(1&e)<<t-a-1,e>>=1;return i},v.prototype.permute=function(e,t,n,i,a,r){for(var s=0;s<r;s++)i[s]=t[e[s]],a[s]=n[e[s]]},v.prototype.transform=function(e,t,n,i,a,r){this.permute(r,e,t,n,i,a);for(var s=1;s<a;s<<=1)for(var o=s<<1,l=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),c=0;c<a;c+=o)for(var d=l,h=u,f=0;f<s;f++){var p=n[c+f],m=i[c+f],g=n[c+f+s],b=i[c+f+s],y=d*g-h*b;b=d*b+h*g,g=y,n[c+f]=p+g,i[c+f]=m+b,n[c+f+s]=p-g,i[c+f+s]=m-b,f!==o&&(y=l*d-u*h,h=l*h+u*d,d=y)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),i=1&n,a=0;for(n=n/2|0;n;n>>>=1)a++;return 1<<a+1+i},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var i=0;i<n/2;i++){var a=e[i];e[i]=e[n-i-1],e[n-i-1]=a,a=t[i],t[i]=-t[n-i-1],t[n-i-1]=-a}},v.prototype.normalize13b=function(e,t){for(var n=0,i=0;i<t/2;i++){var a=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+n;e[i]=67108863&a,n=a<67108864?0:a/67108864|0}return e},v.prototype.convert13b=function(e,t,n,a){for(var r=0,s=0;s<t;s++)r+=0|e[s],n[2*s]=8191&r,r>>>=13,n[2*s+1]=8191&r,r>>>=13;for(s=2*t;s<a;++s)n[s]=0;i(0===r),i(!(-8192&r))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var i=2*this.guessLen13b(e.length,t.length),a=this.makeRBT(i),r=this.stub(i),s=new Array(i),o=new Array(i),l=new Array(i),u=new Array(i),c=new Array(i),d=new Array(i),h=n.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,u,i),this.transform(s,r,o,l,i,a),this.transform(u,r,c,d,i,a);for(var f=0;f<i;f++){var p=o[f]*c[f]-l[f]*d[f];l[f]=o[f]*d[f]+l[f]*c[f],o[f]=p}return this.conjugate(o,l,i),this.transform(o,l,h,r,i,a),this.conjugate(h,r,i),this.normalize13b(h,i),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),y(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"==typeof e),i(e<67108864);for(var n=0,a=0;a<this.length;a++){var r=(0|this.words[a])*e,s=(67108863&r)+(67108863&n);n>>=26,n+=r/67108864|0,n+=s>>>26,this.words[a]=67108863&s}return 0!==n&&(this.words[a]=n,this.length++),t?this.ineg():this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var i=n/26|0,a=n%26;t[n]=e.words[i]>>>a&1}return t}(e);if(0===t.length)return new r(1);for(var n=this,i=0;i<t.length&&0===t[i];i++,n=n.sqr());if(++i<t.length)for(var a=n.sqr();i<t.length;i++,a=a.sqr())0!==t[i]&&(n=n.mul(a));return n},r.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,n=e%26,a=(e-n)/26,r=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&r,l=(0|this.words[t])-o<<n;this.words[t]=l|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==a){for(t=this.length-1;t>=0;t--)this.words[t+a]=this.words[t];for(t=0;t<a;t++)this.words[t]=0;this.length+=a}return this._strip()},r.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,n){var a;i("number"==typeof e&&e>=0),a=t?(t-t%26)/26:0;var r=e%26,s=Math.min((e-r)/26,this.length),o=67108863^67108863>>>r<<r,l=n;if(a-=s,a=Math.max(0,a),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=a);u--){var d=0|this.words[u];this.words[u]=c<<26-r|d>>>r,c=d&o}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(e,t,n){return i(0===this.negative),this.iushrn(e,t,n)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,a=1<<t;return!(this.length<=n||!(this.words[n]&a))},r.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var a=67108863^67108863>>>t<<t;this.words[this.length-1]&=a}return this._strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,n){var a,r,s=e.length+n;this._expand(s);var o=0;for(a=0;a<e.length;a++){r=(0|this.words[a+n])+o;var l=(0|e.words[a])*t;o=((r-=67108863&l)>>26)-(l/67108864|0),this.words[a+n]=67108863&r}for(;a<this.length-n;a++)o=(r=(0|this.words[a+n])+o)>>26,this.words[a+n]=67108863&r;if(0===o)return this._strip();for(i(-1===o),o=0,a=0;a<this.length;a++)o=(r=-(0|this.words[a])+o)>>26,this.words[a]=67108863&r;return this.negative=1,this._strip()},r.prototype._wordDiv=function(e,t){var n=(this.length,e.length),i=this.clone(),a=e,s=0|a.words[a.length-1];0!=(n=26-this._countBits(s))&&(a=a.ushln(n),i.iushln(n),s=0|a.words[a.length-1]);var o,l=i.length-a.length;if("mod"!==t){(o=new r(null)).length=l+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var c=i.clone()._ishlnsubmul(a,1,l);0===c.negative&&(i=c,o&&(o.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|i.words[a.length+d])+(0|i.words[a.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(a,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(a,1,d),i.isZero()||(i.negative^=1);o&&(o.words[d]=h)}return o&&o._strip(),i._strip(),"div"!==t&&0!==n&&i.iushrn(n),{div:o||null,mod:i}},r.prototype.divmod=function(e,t,n){return i(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(a=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:a,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(a=o.div.neg()),{div:a,mod:o.mod}):this.negative&e.negative?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modrn(e.words[0]))}:this._wordDiv(e,t);var a,s,o},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),a=e.andln(1),r=n.cmp(i);return r<0||1===a&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=(1<<26)%e,a=0,r=this.length-1;r>=0;r--)a=(n*a+(0|this.words[r]))%e;return t?-a:a},r.prototype.modn=function(e){return this.modrn(e)},r.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var n=0,a=this.length-1;a>=0;a--){var r=(0|this.words[a])+67108864*n;this.words[a]=r/e|0,n=r%e}return this._strip(),t?this.ineg():this},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new r(1),s=new r(0),o=new r(0),l=new r(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;!(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(a.isOdd()||s.isOdd())&&(a.iadd(c),s.isub(d)),a.iushrn(1),s.iushrn(1);for(var p=0,m=1;!(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(o.isOdd()||l.isOdd())&&(o.iadd(c),l.isub(d)),o.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(o),s.isub(l)):(n.isub(t),o.isub(a),l.isub(s))}return{a:o,b:l,gcd:n.iushln(u)}},r.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a,s=new r(1),o=new r(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;!(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;!(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(l),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(a=0===t.cmpn(1)?s:o).cmpn(0)<0&&a.iadd(e),a},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var i=0;t.isEven()&&n.isEven();i++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var a=t.cmp(n);if(a<0){var r=t;t=n,n=r}else if(0===a||0===n.cmpn(1))break;t.isub(n)}return n.iushln(i)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,n=(e-t)/26,a=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=a,this;for(var r=a,s=n;0!==r&&s<this.length;s++){var o=0|this.words[s];r=(o+=r)>>>26,o&=67108863,this.words[s]=o}return 0!==r&&(this.words[s]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),i(e<=67108863,"Number is too big");var a=0|this.words[0];t=a===e?0:a<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var i=0|this.words[n],a=0|e.words[n];if(i!==a){i<a?t=-1:i>a&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new _(e)},r.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var E={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function M(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){_.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:n.ucmp(this.p);return 0===i?(n.words[0]=0,n.length=1):i>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},a(x,w),x.prototype.split=function(e,t){for(var n=4194303,i=Math.min(e.length,9),a=0;a<i;a++)t.words[a]=e.words[a];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var r=e.words[9];for(t.words[t.length++]=r&n,a=10;a<e.length;a++){var s=0|e.words[a];e.words[a-10]=(s&n)<<4|r>>>22,r=s}r>>>=22,e.words[a-10]=r,0===r&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var i=0|e.words[n];t+=977*i,e.words[n]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},a(S,w),a(k,w),a(M,w),M.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var i=19*(0|e.words[n])+t,a=67108863&i;i>>>=26,e.words[n]=a,t=i}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(E[e])return E[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new S;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new M}return E[e]=t,t},_.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},_.prototype._verify2=function(e,t){i(!(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},_.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(c(e,e.umod(this.m)._forceRed(this)),e)},_.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},_.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},_.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},_.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},_.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},_.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},_.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},_.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},_.prototype.isqr=function(e){return this.imul(e,e.clone())},_.prototype.sqr=function(e){return this.mul(e,e)},_.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var n=this.m.add(new r(1)).iushrn(2);return this.pow(e,n)}for(var a=this.m.subn(1),s=0;!a.isZero()&&0===a.andln(1);)s++,a.iushrn(1);i(!a.isZero());var o=new r(1).toRed(this),l=o.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new r(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var d=this.pow(c,a),h=this.pow(e,a.addn(1).iushrn(1)),f=this.pow(e,a),p=s;0!==f.cmp(o);){for(var m=f,g=0;0!==m.cmp(o);g++)m=m.redSqr();i(g<p);var b=this.pow(d,new r(1).iushln(p-g-1));h=h.redMul(b),d=b.redSqr(),f=f.redMul(d),p=g}return h},_.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},_.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new r(1).toRed(this),n[1]=e;for(var i=2;i<n.length;i++)n[i]=this.mul(n[i-1],e);var a=n[0],s=0,o=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],c=l-1;c>=0;c--){var d=u>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==s?(s<<=1,s|=d,(4==++o||0===i&&0===c)&&(a=this.mul(a,n[s]),o=0,s=0)):o=0}l=26}return a},_.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},_.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new A(e)},a(A,_),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),r=a;return a.cmp(this.m)>=0?r=a.isub(this.m):a.cmpn(0)<0&&(r=a.iadd(this.m)),r._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var n=e.mul(t),i=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(i).iushrn(this.shift),s=a;return a.cmp(this.m)>=0?s=a.isub(this.m):a.cmpn(0)<0&&(s=a.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,n(235)(e))},function(e,t){},function(e){e.exports=JSON.parse('{"name":"elliptic","version":"6.5.4","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"lint":"eslint lib test","lint:fix":"npm run lint -- --fix","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^2.0.2","coveralls":"^3.1.0","eslint":"^7.6.0","grunt":"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.5","mocha":"^8.0.1"},"dependencies":{"bn.js":"^4.11.9","brorand":"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1","inherits":"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}')},function(e,t,n){"use strict";var i=n(136),a=n(127),r=n(118),s=n(198),o=i.assert;function l(e){s.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function u(e,t,n,i){s.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(e,t,n,i){s.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(n,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}r(l,s),e.exports=l,l.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)n=new a(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?n=r[0]:(n=r[1],o(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new a(e.a,16),b:new a(e.b,16)}})):this._getEndoBasis(n)}}},l.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),n=new a(2).toRed(t).redInvm(),i=n.redNeg(),r=new a(3).toRed(t).redNeg().redSqrt().redMul(n);return[i.redAdd(r).fromRed(),i.redSub(r).fromRed()]},l.prototype._getEndoBasis=function(e){for(var t,n,i,r,s,o,l,u,c,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),p=new a(1),m=new a(0),g=new a(0),b=new a(1),y=0;0!==h.cmpn(0);){var v=f.div(h);u=f.sub(v.mul(h)),c=g.sub(v.mul(p));var E=b.sub(v.mul(m));if(!i&&u.cmp(d)<0)t=l.neg(),n=p,i=u.neg(),r=c;else if(i&&2==++y)break;l=u,f=h,h=u,g=p,p=c,b=m,m=E}s=u.neg(),o=c;var w=i.sqr().add(r.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=n),i.negative&&(i=i.neg(),r=r.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:i,b:r},{a:s,b:o}]},l.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],i=t[1],a=i.b.mul(e).divRound(this.n),r=n.b.neg().mul(e).divRound(this.n),s=a.mul(n.a),o=r.mul(i.a),l=a.mul(n.b),u=r.mul(i.b);return{k1:e.sub(s).sub(o),k2:l.add(u).neg()}},l.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var r=i.fromRed().isOdd();return(t&&!r||!t&&r)&&(i=i.redNeg()),this.point(e,i)},l.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,i=this.a.redMul(t),a=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===n.redSqr().redISub(a).cmpn(0)},l.prototype._endoWnafMulAdd=function(e,t,n){for(var i=this._endoWnafT1,a=this._endoWnafT2,r=0;r<e.length;r++){var s=this._endoSplit(t[r]),o=e[r],l=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),i[2*r]=o,i[2*r+1]=l,a[2*r]=s.k1,a[2*r+1]=s.k2}for(var u=this._wnafMulAdd(1,i,a,2*r,n),c=0;c<2*r;c++)i[c]=null,a[c]=null;return u},r(u,s.BasePoint),l.prototype.point=function(e,t,n){return new u(this,e,t,n)},l.prototype.pointFromJSON=function(e,t){return u.fromJSON(this,e,t)},u.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},u.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},u.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],n);if(!t[2])return i;function a(t){return e.point(t[0],t[1],n)}var r=t[2];return i.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[i].concat(r.doubles.points.map(a))},naf:r.naf&&{wnd:r.naf.wnd,points:[i].concat(r.naf.points.map(a))}},i},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.inf},u.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)},u.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),a=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(i),r=a.redSqr().redISub(this.x.redAdd(this.x)),s=a.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,s)},u.prototype.getX=function(){return this.x.fromRed()},u.prototype.getY=function(){return this.y.fromRed()},u.prototype.mul=function(e){return e=new a(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,n){var i=[this,t],a=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a):this.curve._wnafMulAdd(1,i,a,2)},u.prototype.jmulAdd=function(e,t,n){var i=[this,t],a=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,a,!0):this.curve._wnafMulAdd(1,i,a,2,!0)},u.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},u.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return t},u.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},r(c,s.BasePoint),l.prototype.jpoint=function(e,t,n){return new c(this,e,t,n)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(n,i)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(t),a=e.x.redMul(n),r=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),o=i.redSub(a),l=r.redSub(s);if(0===o.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),c=u.redMul(o),d=i.redMul(u),h=l.redSqr().redIAdd(c).redISub(d).redISub(d),f=l.redMul(d.redISub(h)).redISub(r.redMul(c)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(h,f,p)},c.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,i=e.x.redMul(t),a=this.y,r=e.y.redMul(t).redMul(this.z),s=n.redSub(i),o=a.redSub(r);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),u=l.redMul(s),c=n.redMul(l),d=o.redSqr().redIAdd(u).redISub(c).redISub(c),h=o.redMul(c.redISub(d)).redISub(a.redMul(u)),f=this.z.redMul(s);return this.curve.jpoint(d,h,f)},c.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var i=this.curve.a,a=this.curve.tinv,r=this.x,s=this.y,o=this.z,l=o.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var c=r.redSqr(),d=u.redSqr(),h=d.redSqr(),f=c.redAdd(c).redIAdd(c).redIAdd(i.redMul(l)),p=r.redMul(d),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),b=f.redMul(g);b=b.redIAdd(b).redISub(h);var y=u.redMul(o);t+1<e&&(l=l.redMul(h)),r=m,o=y,u=b}return this.curve.jpoint(r,u.redMul(a),o)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),r=a.redSqr(),s=this.x.redAdd(a).redSqr().redISub(i).redISub(r);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i),l=o.redSqr().redISub(s).redISub(s),u=r.redIAdd(r);u=(u=u.redIAdd(u)).redIAdd(u),e=l,t=o.redMul(s.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(c).redISub(h);f=f.redIAdd(f);var p=c.redAdd(c).redIAdd(c),m=p.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},c.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var i=this.x.redSqr(),a=this.y.redSqr(),r=a.redSqr(),s=this.x.redAdd(a).redSqr().redISub(i).redISub(r);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=o.redSqr().redISub(s).redISub(s);e=l;var u=r.redIAdd(r);u=(u=u.redIAdd(u)).redIAdd(u),t=o.redMul(s.redISub(l)).redISub(u),n=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(c).redMul(this.x.redAdd(c));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(c);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=f.redMul(p.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,n)},c.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,i=this.z,a=i.redSqr().redSqr(),r=t.redSqr(),s=n.redSqr(),o=r.redAdd(r).redIAdd(r).redIAdd(e.redMul(a)),l=t.redAdd(t),u=(l=l.redIAdd(l)).redMul(s),c=o.redSqr().redISub(u.redAdd(u)),d=u.redISub(c),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=o.redMul(d).redISub(h),p=n.redAdd(n).redMul(i);return this.curve.jpoint(c,f,p)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),i=t.redSqr(),a=e.redAdd(e).redIAdd(e),r=a.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(r)).redSqr(),l=i.redIAdd(i);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var u=a.redIAdd(s).redSqr().redISub(r).redISub(o).redISub(l),c=t.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var d=this.x.redMul(o).redISub(c);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(u.redMul(l.redISub(u)).redISub(s.redMul(o)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=this.z.redAdd(s).redSqr().redISub(n).redISub(o);return this.curve.jpoint(d,h,f)},c.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},c.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),a=n.redMul(e.z);return 0===this.y.redMul(a).redISub(e.y.redMul(i)).cmpn(0)},c.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var i=e.clone(),a=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(a),0===this.x.cmp(n))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,n){"use strict";var i=n(127),a=n(118),r=n(198),s=n(136);function o(e){r.call(this,"mont",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(e,t,n){r.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(t,16),this.z=new i(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(o,r),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),i=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},a(l,r.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},o.prototype.point=function(e,t){return new l(this,e,t)},o.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(e,t){return new l(e,t[0],t[1]||e.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),i=e.redMul(t),a=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(i,a)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),i=this.x.redSub(this.z),a=e.x.redAdd(e.z),r=e.x.redSub(e.z).redMul(n),s=a.redMul(i),o=t.z.redMul(r.redAdd(s).redSqr()),l=t.x.redMul(r.redISub(s).redSqr());return this.curve.point(o,l)},l.prototype.mul=function(e){for(var t=e.clone(),n=this,i=this.curve.point(null,null),a=[];0!==t.cmpn(0);t.iushrn(1))a.push(t.andln(1));for(var r=a.length-1;r>=0;r--)0===a[r]?(n=n.diffAdd(i,this),i=i.dbl()):(i=n.diffAdd(i,this),n=n.dbl());return i},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,n){"use strict";var i=n(136),a=n(127),r=n(118),s=n(198),o=i.assert;function l(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function u(e,t,n,i,r){s.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(n,16),this.z=i?new a(i,16):this.curve.one,this.t=r&&new a(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}r(l,s),e.exports=l,l.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},l.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},l.prototype.jpoint=function(e,t,n,i){return this.point(e,t,n,i)},l.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),r=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=i.redMul(r.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var l=o.fromRed().isOdd();return(t&&!l||!t&&l)&&(o=o.redNeg()),this.point(e,o)},l.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),r=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=i.redMul(r.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},l.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),i=t.redMul(this.a).redAdd(n),a=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===i.cmp(a)},r(u,s.BasePoint),l.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},l.prototype.point=function(e,t,n,i){return new u(this,e,t,n,i)},u.fromJSON=function(e,t){return new u(e,t[0],t[1],t[2])},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},u.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var i=this.curve._mulA(e),a=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),r=i.redAdd(t),s=r.redSub(n),o=i.redSub(t),l=a.redMul(s),u=r.redMul(o),c=a.redMul(o),d=s.redMul(r);return this.curve.point(l,u,d,c)},u.prototype._projDbl=function(){var e,t,n,i,a,r,s=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var u=(i=this.curve._mulA(o)).redAdd(l);this.zOne?(e=s.redSub(o).redSub(l).redMul(u.redSub(this.curve.two)),t=u.redMul(i.redSub(l)),n=u.redSqr().redSub(u).redSub(u)):(a=this.z.redSqr(),r=u.redSub(a).redISub(a),e=s.redSub(o).redISub(l).redMul(r),t=u.redMul(i.redSub(l)),n=u.redMul(r))}else i=o.redAdd(l),a=this.curve._mulC(this.z).redSqr(),r=i.redSub(a).redSub(a),e=this.curve._mulC(s.redISub(i)).redMul(r),t=this.curve._mulC(i).redMul(o.redISub(l)),n=i.redMul(r);return this.curve.point(e,t,n)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},u.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),a=this.z.redMul(e.z.redAdd(e.z)),r=n.redSub(t),s=a.redSub(i),o=a.redAdd(i),l=n.redAdd(t),u=r.redMul(s),c=o.redMul(l),d=r.redMul(l),h=s.redMul(o);return this.curve.point(u,c,h,d)},u.prototype._projAdd=function(e){var t,n,i=this.z.redMul(e.z),a=i.redSqr(),r=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(r).redMul(s),l=a.redSub(o),u=a.redAdd(o),c=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(r).redISub(s),d=i.redMul(l).redMul(c);return this.curve.twisted?(t=i.redMul(u).redMul(s.redSub(this.curve._mulA(r))),n=l.redMul(u)):(t=i.redMul(u).redMul(s.redSub(r)),n=this.curve._mulC(l).redMul(u)),this.curve.point(d,t,n)},u.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},u.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},u.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},u.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},u.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},u.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()},u.prototype.getY=function(){return this.normalize(),this.y.fromRed()},u.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},u.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),i=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}},u.prototype.toP=u.prototype.normalize,u.prototype.mixedAdd=u.prototype.add},function(e,t,n){"use strict";t.sha1=n(544),t.sha224=n(545),t.sha256=n(328),t.sha384=n(546),t.sha512=n(329)},function(e,t,n){"use strict";var i=n(143),a=n(178),r=n(327),s=i.rotl32,o=i.sum32,l=i.sum32_5,u=r.ft_1,c=a.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}i.inherits(h,c),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.W,i=0;i<16;i++)n[i]=e[t+i];for(;i<n.length;i++)n[i]=s(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var a=this.h[0],r=this.h[1],c=this.h[2],h=this.h[3],f=this.h[4];for(i=0;i<n.length;i++){var p=~~(i/20),m=l(s(a,5),u(p,r,c,h),f,n[i],d[p]);f=h,h=c,c=s(r,30),r=a,a=m}this.h[0]=o(this.h[0],a),this.h[1]=o(this.h[1],r),this.h[2]=o(this.h[2],c),this.h[3]=o(this.h[3],h),this.h[4]=o(this.h[4],f)},h.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},function(e,t,n){"use strict";var i=n(143),a=n(328);function r(){if(!(this instanceof r))return new r;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(r,a),e.exports=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},function(e,t,n){"use strict";var i=n(143),a=n(329);function r(){if(!(this instanceof r))return new r;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(r,a),e.exports=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},function(e,t,n){"use strict";var i=n(143),a=n(178),r=i.rotl32,s=i.sum32,o=i.sum32_3,l=i.sum32_4,u=a.BlockHash;function c(){if(!(this instanceof c))return new c;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,i){return e<=15?t^n^i:e<=31?t&n|~t&i:e<=47?(t|~n)^i:e<=63?t&i|n&~i:t^(n|~i)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}i.inherits(c,u),t.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(e,t){for(var n=this.h[0],i=this.h[1],a=this.h[2],u=this.h[3],c=this.h[4],y=n,v=i,E=a,w=u,x=c,S=0;S<80;S++){var k=s(r(l(n,d(S,i,a,u),e[p[S]+t],h(S)),g[S]),c);n=c,c=u,u=r(a,10),a=i,i=k,k=s(r(l(y,d(79-S,v,E,w),e[m[S]+t],f(S)),b[S]),x),y=x,x=w,w=r(E,10),E=v,v=k}k=o(this.h[1],a,w),this.h[1]=o(this.h[2],u,x),this.h[2]=o(this.h[3],c,y),this.h[3]=o(this.h[4],n,v),this.h[4]=o(this.h[0],i,E),this.h[0]=k},c.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,n){"use strict";var i=n(143),a=n(135);function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,n))}e.exports=r,r.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),a(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},r.prototype.update=function(e,t){return this.inner.update(e,t),this},r.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,n){"use strict";var i=n(127),a=n(551),r=n(136),s=n(240),o=n(236),l=r.assert,u=n(552),c=n(553);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(l(Object.prototype.hasOwnProperty.call(s,e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new u(this,e)},d.prototype.keyFromPrivate=function(e,t){return u.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return u.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new a({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new i(2));;){var s=new i(t.generate(n));if(!(s.cmp(r)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,n,r){"object"==typeof n&&(r=n,n=null),r||(r={}),t=this.keyFromPrivate(t,n),e=this._truncateToN(new i(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),l=e.toArray("be",s),u=new a({hash:this.hash,entropy:o,nonce:l,pers:r.pers,persEnc:r.persEnc||"utf8"}),d=this.n.sub(new i(1)),h=0;;h++){var f=r.k?r.k(h):new i(u.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(d)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var m=p.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var b=f.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var y=(p.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return r.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new c({r:g,s:b,recoveryParam:y})}}}}}},d.prototype.verify=function(e,t,n,a){e=this._truncateToN(new i(e,16)),n=this.keyFromPublic(n,a);var r=(t=new c(t,"hex")).r,s=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,l=s.invm(this.n),u=l.mul(e).umod(this.n),d=l.mul(r).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(u,n.getPublic(),d)).isInfinity()&&o.eqXToP(r):!(o=this.g.mulAdd(u,n.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(r)},d.prototype.recoverPubKey=function(e,t,n,a){l((3&n)===n,"The recovery param is more than two bits"),t=new c(t,a);var r=this.n,s=new i(e),o=t.r,u=t.s,d=1&n,h=n>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");o=h?this.curve.pointFromX(o.add(this.curve.n),d):this.curve.pointFromX(o,d);var f=t.r.invm(r),p=r.sub(s).mul(f).umod(r),m=u.mul(f).umod(r);return this.g.mulAdd(p,o,m)},d.prototype.getKeyRecoveryParam=function(e,t,n,i){if(null!==(t=new c(t,i)).recoveryParam)return t.recoveryParam;for(var a=0;a<4;a++){var r;try{r=this.recoverPubKey(e,t,a)}catch(e){continue}if(r.eq(n))return a}throw new Error("Unable to find valid recovery factor")}},function(e,t,n){"use strict";var i=n(241),a=n(325),r=n(135);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=a.toArray(e.entropy,e.entropyEnc||"hex"),n=a.toArray(e.nonce,e.nonceEnc||"hex"),i=a.toArray(e.pers,e.persEnc||"hex");r(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,i)}e.exports=s,s.prototype._init=function(e,t,n){var i=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var a=0;a<this.V.length;a++)this.K[a]=0,this.V[a]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new i.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,n,i){"string"!=typeof t&&(i=n,n=t,t=null),e=a.toArray(e,t),n=a.toArray(n,i),r(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},s.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=a.toArray(n,i||"hex"),this._update(n));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var s=r.slice(0,e);return this._update(n),this._reseed++,a.encode(s,t)}},function(e,t,n){"use strict";var i=n(127),a=n(136).assert;function r(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=r,r.fromPublic=function(e,t,n){return t instanceof r?t:new r(e,{pub:t,pubEnc:n})},r.fromPrivate=function(e,t,n){return t instanceof r?t:new r(e,{priv:t,privEnc:n})},r.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},r.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?a(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||a(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},r.prototype.derive=function(e){return e.validate()||a(e.validate(),"public point not validated"),e.mul(this.priv).getX()},r.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},r.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,n){"use strict";var i=n(127),a=n(136),r=a.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(r(e.r&&e.s,"Signature without r or s"),this.r=new i(e.r,16),this.s=new i(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function l(e,t){var n=e[t.place++];if(!(128&n))return n;var i=15&n;if(0===i||i>4)return!1;for(var a=0,r=0,s=t.place;r<i;r++,s++)a<<=8,a|=e[s],a>>>=0;return!(a<=127)&&(t.place=s,a)}function u(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function c(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=a.toArray(e,t);var n=new o;if(48!==e[n.place++])return!1;var r=l(e,n);if(!1===r)return!1;if(r+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var s=l(e,n);if(!1===s)return!1;var u=e.slice(n.place,s+n.place);if(n.place+=s,2!==e[n.place++])return!1;var c=l(e,n);if(!1===c)return!1;if(e.length!==c+n.place)return!1;var d=e.slice(n.place,c+n.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new i(u),this.s=new i(d),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=u(t),n=u(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];c(i,t.length),(i=i.concat(t)).push(2),c(i,n.length);var r=i.concat(n),s=[48];return c(s,r.length),s=s.concat(r),a.encode(s,e)}},function(e,t,n){"use strict";var i=n(241),a=n(240),r=n(136),s=r.assert,o=r.parseBytes,l=n(555),u=n(556);function c(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof c))return new c(e);e=a[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=i.sha512}e.exports=c,c.prototype.sign=function(e,t){e=o(e);var n=this.keyFromSecret(t),i=this.hashInt(n.messagePrefix(),e),a=this.g.mul(i),r=this.encodePoint(a),s=this.hashInt(r,n.pubBytes(),e).mul(n.priv()),l=i.add(s).umod(this.curve.n);return this.makeSignature({R:a,S:l,Rencoded:r})},c.prototype.verify=function(e,t,n){e=o(e),t=this.makeSignature(t);var i=this.keyFromPublic(n),a=this.hashInt(t.Rencoded(),i.pubBytes(),e),r=this.g.mul(t.S());return t.R().add(i.pub().mul(a)).eq(r)},c.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return r.intFromLE(e.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(e){return l.fromPublic(this,e)},c.prototype.keyFromSecret=function(e){return l.fromSecret(this,e)},c.prototype.makeSignature=function(e){return e instanceof u?e:new u(this,e)},c.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},c.prototype.decodePoint=function(e){var t=(e=r.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),i=!!(128&e[t]),a=r.intFromLE(n);return this.curve.pointFromY(a,i)},c.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(e){return r.intFromLE(e)},c.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,n){"use strict";var i=n(136),a=i.assert,r=i.parseBytes,s=i.cachedProperty;function o(e,t){this.eddsa=e,this._secret=r(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=r(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[n]&=127,i[n]|=64,i})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return a(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},o.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=o},function(e,t,n){"use strict";var i=n(127),a=n(136),r=a.assert,s=a.cachedProperty,o=a.parseBytes;function l(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),r(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(l,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(l,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(l,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(l,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),l.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},l.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},e.exports=l},function(e,t){},function(e,t,n){"use strict";var i=n(331);t.certificate=n(564);var a=i.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=a;var r=i.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=r;var s=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}));t.PublicKey=s;var o=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),l=i.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=l;var u=i.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=u;var c=i.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=c,t.DSAparam=i.define("DSAparam",(function(){this.int()}));var d=i.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=d;var h=i.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=i.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,n){"use strict";const i=n(332),a=n(334),r=n(118);function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return r(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(a[e])),this.decoders[e]},s.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(i[e])),this.encoders[e]},s.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},function(e,t,n){"use strict";const i=n(118),a=n(333);function r(e){a.call(this,e),this.enc="pem"}i(r,a),e.exports=r,r.prototype.encode=function(e,t){const n=a.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"];for(let e=0;e<n.length;e+=64)i.push(n.slice(e,e+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}},function(e,t,n){"use strict";const i=n(118),a=n(242).Buffer,r=n(335);function s(e){r.call(this,e),this.enc="pem"}i(s,r),e.exports=s,s.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),i=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,l=-1;for(let e=0;e<n.length;e++){const t=n[e].match(s);if(null!==t&&t[2]===i){if(-1!==o){if("END"!==t[1])break;l=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===l)throw new Error("PEM section not found for: "+i);const u=n.slice(o+1,l).join("");u.replace(/[^a-z0-9+/=]+/gi,"");const c=a.from(u,"base64");return r.prototype.decode.call(this,c,t)}},function(e,t,n){"use strict";const i=t;i.Reporter=n(244).Reporter,i.DecoderBuffer=n(179).DecoderBuffer,i.EncoderBuffer=n(179).EncoderBuffer,i.Node=n(243)},function(e,t,n){"use strict";const i=t;i._reverse=function(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const i=e[n];t[i]=n})),t},i.der=n(245)},function(e,t,n){"use strict";var i=n(331),a=i.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),r=i.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=i.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),o=i.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),l=i.define("RelativeDistinguishedName",(function(){this.setof(r)})),u=i.define("RDNSequence",(function(){this.seqof(l)})),c=i.define("Name",(function(){this.choice({rdnSequence:this.use(u)})})),d=i.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))})),h=i.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),f=i.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(c),this.key("validity").use(d),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())})),p=i.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));e.exports=p},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,n){var i=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=n(196),o=n(232),l=n(119).Buffer;e.exports=function(e,t){var n,u=e.toString(),c=u.match(i);if(c){var d="aes"+c[1],h=l.from(c[2],"hex"),f=l.from(c[3].replace(/[\r\n]/g,""),"base64"),p=s(t,h.slice(0,8),parseInt(c[1],10)).key,m=[],g=o.createDecipheriv(d,p,h);m.push(g.update(f)),m.push(g.final()),n=l.concat(m)}else{var b=u.match(r);n=l.from(b[2].replace(/[\r\n]/g,""),"base64")}return{tag:u.match(a)[1],data:n}}},function(e,t,n){"use strict";var i=n(119).Buffer,a=n(330),r=n(239).ec,s=n(199),o=n(336);function l(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=0)throw new Error("invalid sig")}e.exports=function(e,t,n,u,c){var d=s(n);if("ec"===d.type){if("ecdsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");return function(e,t,n){var i=o[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var a=new r(i),s=n.data.subjectPrivateKey.data;return a.verify(t,e,s)}(e,t,d)}if("dsa"===d.type){if("dsa"!==u)throw new Error("wrong public key type");return function(e,t,n){var i=n.data.p,r=n.data.q,o=n.data.g,u=n.data.pub_key,c=s.signature.decode(e,"der"),d=c.s,h=c.r;l(d,r),l(h,r);var f=a.mont(i),p=d.invm(r);return 0===o.toRed(f).redPow(new a(t).mul(p).mod(r)).fromRed().mul(u.toRed(f).redPow(h.mul(p).mod(r)).fromRed()).mod(i).mod(r).cmp(h)}(e,t,d)}if("rsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");t=i.concat([c,t]);for(var h=d.modulus.byteLength(),f=[1],p=0;t.length+f.length+2<h;)f.push(255),p+=1;f.push(0);for(var m=-1;++m<t.length;)f.push(t[m]);f=i.from(f);var g=a.mont(d.modulus);e=(e=new a(e).toRed(g)).redPow(new a(d.publicExponent)),e=i.from(e.fromRed().toArray());var b=p<8?1:0;for(h=Math.min(e.length,f.length),e.length!==f.length&&(b=1),m=-1;++m<h;)b|=e[m]^f[m];return 0===b}},function(e,t,n){(function(t){var i=n(239),a=n(127);e.exports=function(e){return new s(e)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(e){this.curveType=r[e],this.curveType||(this.curveType={name:e}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function o(e,n,i){Array.isArray(e)||(e=e.toArray());var a=new t(e);if(i&&a.length<i){var r=new t(i-a.length);r.fill(0),a=t.concat([r,a])}return n?a.toString(n):a}r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,s.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},s.prototype.computeSecret=function(e,n,i){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),o(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},s.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),o(n,e)},s.prototype.getPrivateKey=function(e){return o(this.keys.getPrivate(),e)},s.prototype.setPublicKey=function(e,n){return n=n||"utf8",t.isBuffer(e)||(e=new t(e,n)),this.keys._importPublic(e),this},s.prototype.setPrivateKey=function(e,n){n=n||"utf8",t.isBuffer(e)||(e=new t(e,n));var i=new a(e);return i=i.toString(16),this.keys._importPrivate(i),this}}).call(this,n(86).Buffer)},function(e,t,n){t.publicEncrypt=n(570),t.privateDecrypt=n(571),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},function(e,t,n){(function(t){var i=n(199),a=n(160),r=n(173),s=n(337),o=n(338),l=n(127),u=n(339),c=n(238);e.exports=function(e,n,d){var h;h=e.padding?e.padding:d?1:4;var f,p=i(e);if(4===h)f=function(e,n){var i=e.modulus.byteLength(),u=n.length,c=r("sha1").update(new t("")).digest(),d=c.length,h=2*d;if(u>i-h-2)throw new Error("message too long");var f=new t(i-u-h-2);f.fill(0);var p=i-d-1,m=a(d),g=o(t.concat([c,f,new t([1]),n],p),s(m,p)),b=o(m,s(g,d));return new l(t.concat([new t([0]),b,g],i))}(p,n);else if(1===h)f=function(e,n,i){var r,s=n.length,o=e.modulus.byteLength();if(s>o-11)throw new Error("message too long");return i?(r=new t(o-s-3)).fill(255):r=function(e,n){for(var i,r=new t(e),s=0,o=a(2*e),l=0;s<e;)l===o.length&&(o=a(2*e),l=0),(i=o[l++])&&(r[s++]=i);return r}(o-s-3),new l(t.concat([new t([0,i?1:2]),r,new t([0]),n],o))}(p,n,d);else{if(3!==h)throw new Error("unknown padding");if((f=new l(n)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return d?c(f,p):u(f,p)}}).call(this,n(86).Buffer)},function(e,t,n){(function(t){var i=n(199),a=n(337),r=n(338),s=n(127),o=n(238),l=n(173),u=n(339);e.exports=function(e,n,c){var d;d=e.padding?e.padding:c?1:4;var h,f=i(e),p=f.modulus.byteLength();if(n.length>p||new s(n).cmp(f.modulus)>=0)throw new Error("decryption error");h=c?u(new s(n),f):o(n,f);var m=new t(p-h.length);if(m.fill(0),h=t.concat([m,h],p),4===d)return function(e,n){e.modulus;var i=e.modulus.byteLength(),s=(n.length,l("sha1").update(new t("")).digest()),o=s.length;if(0!==n[0])throw new Error("decryption error");var u=n.slice(1,o+1),c=n.slice(o+1),d=r(u,a(c,o)),h=r(c,a(d,i-o-1));if(function(e,n){e=new t(e),n=new t(n);var i=0,a=e.length;e.length!==n.length&&(i++,a=Math.min(e.length,n.length));for(var r=-1;++r<a;)i+=e[r]^n[r];return i}(s,h.slice(0,o)))throw new Error("decryption error");for(var f=o;0===h[f];)f++;if(1!==h[f++])throw new Error("decryption error");return h.slice(f)}(f,h);if(1===d)return function(e,t,n){for(var i=t.slice(0,2),a=2,r=0;0!==t[a++];)if(a>=t.length){r++;break}var s=t.slice(2,a-1);if(t.slice(a-1,a),("0002"!==i.toString("hex")&&!n||"0001"!==i.toString("hex")&&n)&&r++,s.length<8&&r++,r)throw new Error("decryption error");return t.slice(a)}(0,h,c);if(3===d)return h;throw new Error("unknown padding")}}).call(this,n(86).Buffer)},function(e,t,n){"use strict";(function(e,i){function a(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var r=n(119),s=n(160),o=r.Buffer,l=r.kMaxLength,u=e.crypto||e.msCrypto,c=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>c||e<0)throw new TypeError("offset must be a uint32");if(e>l||e>t)throw new RangeError("offset out of range")}function h(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>c||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>l)throw new RangeError("buffer too small")}function f(e,t,n,a){if(i.browser){var r=e.buffer,o=new Uint8Array(r,t,n);return u.getRandomValues(o),a?void i.nextTick((function(){a(null,e)})):e}if(!a)return s(n).copy(e,t),e;s(n,(function(n,i){if(n)return a(n);i.copy(e,t),a(null,e)}))}u&&u.getRandomValues||!i.browser?(t.randomFill=function(t,n,i,a){if(!(o.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof n)a=n,n=0,i=t.length;else if("function"==typeof i)a=i,i=t.length-n;else if("function"!=typeof a)throw new TypeError('"cb" argument must be a function');return d(n,t.length),h(i,n,t.length),f(t,n,i,a)},t.randomFillSync=function(t,n,i){if(void 0===n&&(n=0),!(o.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return d(n,t.length),void 0===i&&(i=t.length-n),h(i,n,t.length),f(t,n,i)}):(t.randomFill=a,t.randomFillSync=a)}).call(this,n(139),n(87))},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,a,r;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(a=i;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,r[a]))return!1;for(a=i;0!=a--;){var s=r[a];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}}])]);