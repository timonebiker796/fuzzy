/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[4],{184:function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"h",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return g})),a.d(t,"g",(function(){return m})),a.d(t,"e",(function(){return p})),a.d(t,"i",(function(){return f})),a.d(t,"c",(function(){return b}));var n=a(6),i=a(1),r=a.n(i),l=a(4),s=a(134);const o="updates_available",c="install_failed",d="update_failed",u={id:"",title:l.i18n.translate("xpack.fleet.epmList.allPackagesFilterLinkText",{defaultMessage:"All categories"})},g={id:"",title:l.i18n.translate("xpack.fleet.epmList.allPackagesInstalledFilterLinkText",{defaultMessage:"All installed"})},m={id:o,title:l.i18n.translate("xpack.fleet.epmList.updatesAvailableFilterLinkText",{defaultMessage:"Updates available"})},p={id:c,title:l.i18n.translate("xpack.fleet.epmList.installFailedFilterLinkText",{defaultMessage:"Install failed"})},f={id:d,title:l.i18n.translate("xpack.fleet.epmList.updateFailedFilterLinkText",{defaultMessage:"Update failed"})};function b({isLoading:e,categories:t,selectedCategory:a,onCategoryChange:i}){return r.a.createElement(n.EuiFacetGroup,null,e?r.a.createElement(s.k,null):t.map((e=>r.a.createElement(n.EuiFacetButton,{"data-test-subj":`epmList.categories.${e.id}`,isSelected:e.id===a,key:e.id,id:e.id,quantity:e.count,onClick:()=>i(e)},e.title))))}},264:function(e,t,a){"use strict";a.d(t,"d",(function(){return R})),a.d(t,"c",(function(){return N})),a.d(t,"b",(function(){return G})),a.d(t,"a",(function(){return V}));var n=a(1),i=a.n(n),r=a(655),l=a(266),s=a(6),o=a(0),c=a(137),d=a(382),u=a(142),g=a(116),m=a(22),p=a(23),f=a.n(p),b=a(4),E=a(12),y=a(376),h=a(184);const v=()=>{const{docLinks:e}=Object(g.V)();return i.a.createElement(s.EuiLink,{href:e.links.fleet.learnMoreBlog,target:"_blank"},b.i18n.translate("xpack.fleet.epmList.availableCalloutBlogText",{defaultMessage:"announcement blog post"}))},k=()=>i.a.createElement(s.EuiCallOut,{title:b.i18n.translate("xpack.fleet.epmList.availableCalloutTitle",{defaultMessage:"Only installed Elastic Agent Integrations are displayed."}),iconType:"iInCircle"},i.a.createElement("p",null,i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epmList.availableCalloutIntroText",defaultMessage:"To learn more about integrations and the Elastic Agent, read our {link}",values:{link:i.a.createElement(v,null)}}))),C=({count:e})=>i.a.createElement(s.EuiCallOut,{title:b.i18n.translate("xpack.fleet.epmList.updatesAvailableCalloutTitle",{defaultMessage:"{count, number} of your installed integrations {count, plural, one {has an update} other {have updates}} available.",values:{count:e}}),iconType:"warning",color:"warning"},i.a.createElement("p",null,i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epmList.updatesAvailableCalloutText",defaultMessage:"Update your integrations to get the latest features."}))),I=()=>{const{docLinks:e}=Object(g.V)();return i.a.createElement(s.EuiCallOut,{title:b.i18n.translate("xpack.fleet.epmList.verificationWarningCalloutTitle",{defaultMessage:"Integrations not verified"}),iconType:"warning",color:"warning"},i.a.createElement("p",null,i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epmList.verificationWarningCalloutIntroText",defaultMessage:"One or more of the installed integrations contain an unsigned package of unknown authenticity. Learn more about {learnMoreLink}.",values:{learnMoreLink:i.a.createElement(s.EuiLink,{target:"_blank",external:!0,href:e.links.fleet.packageSignatures},i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.ConfirmForceInstallModal.learnMoreLink",defaultMessage:"package signatures"}))}})))},O=({installedPackages:e,isLoading:t})=>{Object(g.l)("integrations_installed");const{packageVerificationKeyId:a}=Object(g.E)(),{getHref:r,getAbsolutePath:l}=Object(g.N)(),{selectedCategory:s,searchParam:d}=N(Object(m.useParams)(),Object(m.useLocation)().search),[u,p]=Object(n.useState)(s),[b,E]=Object(n.useState)(d||""),{http:v}=Object(g.V)(),O=v.basePath.prepend,S=Object(m.useHistory)(),L=({searchString:e,categoryId:t,subCategoryId:a})=>c.j.integrations_installed({category:t||"",query:e||""})[1],M=({searchString:e,categoryId:t})=>{const a=L({categoryId:t,searchString:e});S.push(a)},j=({searchString:e,categoryId:t})=>{const a=L({categoryId:t,searchString:e});S.replace(a)},x=Object(n.useMemo)((()=>e.filter((e=>{var t;return(null==e||null===(t=e.installationInfo)||void 0===t?void 0:t.version)&&f()(e.installationInfo.version,e.version)}))),[e]),_=Object(n.useMemo)((()=>e.filter((e=>{var t;return(null==e||null===(t=e.installationInfo)||void 0===t?void 0:t.install_status)===o.Ob.InstallFailed}))),[e]),T=Object(n.useMemo)((()=>e.filter((e=>{var t,a;return null==e||null===(t=e.installationInfo)||void 0===t||null===(a=t.latest_install_failed_attempts)||void 0===a?void 0:a.some((t=>e.installationInfo&&f()(e.installationInfo.version,t.target_version)))}))),[e]),P=Object(n.useMemo)((()=>[{...h.b,count:e.length},{...h.g,count:x.length},{...h.i,count:T.length},{...h.e,count:_.length}]),[e.length,x.length,_.length,T.length]),F=Object(n.useMemo)((()=>{let t;return t=u===h.f?x:u===h.d?_:u===h.h?T:e,t.map((e=>R({getAbsolutePath:l,getHref:r,addBasePath:O,item:e,selectedCategory:u||"installed",packageVerificationKeyId:a})))}),[u,x,e,T,_,a,O,r,l]);if(!G(u,P))return j({searchString:b,categoryId:""}),null;let w=i.a.createElement(k,null);const A=F.filter((e=>e.isUnverified)).length,U=F.filter((e=>e.isUpdateAvailable)).length;A?w=i.a.createElement(I,null):U&&(w=i.a.createElement(C,{count:U}));const H=""!==u||t?null:w;return i.a.createElement(y.PackageListGrid,{isLoading:t,callout:H,categories:P,controls:i.a.createElement(h.c,{categories:P,selectedCategory:u,onCategoryChange:({id:e})=>{p(e),E(""),M({searchString:"",categoryId:e})}}),selectedCategory:u,setCategory:p,setUrlandPushHistory:M,setUrlandReplaceHistory:j,searchTerm:b,setSearchTerm:E,list:F})};var S=a(58),L=a.n(S);const M=i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.recommendedTooltip",defaultMessage:"We recommend Elastic Agent integrations when they are generally available."}),j=L()(s.EuiFlexItem).withConfig({displayName:"Item",componentId:"sc-18yxd2i-0"})(["padding-left:",";"],(e=>e.theme.eui.euiSizeXS)),x=L()(s.EuiSwitch).withConfig({displayName:"EuiSwitchNoWrap",componentId:"sc-18yxd2i-1"})(["white-space:nowrap;"]),_=[{type:"recommended",label:i.a.createElement(s.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},i.a.createElement(s.EuiFlexItem,{grow:!1},b.i18n.translate("xpack.fleet.epm.integrationPreference.recommendedLabel",{defaultMessage:"Recommended"})),i.a.createElement(j,null,i.a.createElement(s.EuiIconTip,{content:M})))},{type:"agent",label:b.i18n.translate("xpack.fleet.epm.integrationPreference.elasticAgentLabel",{defaultMessage:"Elastic Agent only"})},{type:"beats",label:b.i18n.translate("xpack.fleet.epm.integrationPreference.beatsLabel",{defaultMessage:"Beats only"})}],T=({initialType:e,onChange:t,prereleaseIntegrationsEnabled:a})=>{const[r,l]=i.a.useState(e),[o,c]=i.a.useState(void 0),d=Object(g.k)(),{docLinks:u,notifications:m}=Object(g.V)(),{mutateAsync:p}=Object(g.T)(),f=Object(n.useCallback)((async e=>{try{c(e);const t=await p({prerelease_integrations_enabled:e});if(t.error)throw t.error}catch(t){c(!e),m.toasts.addError(t,{title:b.i18n.translate("xpack.fleet.errorUpdatingSettings",{defaultMessage:"Error updating settings"})})}}),[p,m.toasts]),y=i.a.createElement(s.EuiLink,{href:u.links.fleet.beatsAgentComparison},i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.titleLink",defaultMessage:"Elastic Agent and Beats"})),h=i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epm.integrationPreference.title",defaultMessage:"If an integration is available for {link}, show:",values:{link:y}}),v=_.map((e=>({id:e.type,value:e.type,label:e.label}))),k=d.fleet.allSettings;return i.a.createElement(s.EuiPanel,{hasShadow:!1,paddingSize:"none"},k&&i.a.createElement(i.a.Fragment,null,i.a.createElement(x,{label:"Display beta integrations",checked:void 0!==o?o:a,onChange:e=>{f(e.target.checked)}}),i.a.createElement(s.EuiSpacer,{size:"l"})),i.a.createElement(s.EuiText,{size:"s"},h),i.a.createElement(s.EuiSpacer,{size:"m"}),i.a.createElement(s.EuiForm,null,i.a.createElement(s.EuiRadioGroup,{options:v,idSelected:r,onChange:(e,a)=>{l(e),t(a)},name:"preference"})),i.a.createElement(s.EuiSpacer,{size:"m"}))};var P=a(708);const F=({statusCode:e})=>{let t,a;return 502===e?(t=b.i18n.translate("xpack.fleet.epmList.eprUnavailableBadGatewayCalloutTitle",{defaultMessage:"Kibana cannot reach the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallouBdGatewaytTitleMessage",defaultMessage:"To view these integrations, configure a  {registryproxy} or host {onpremregistry}.",values:{registryproxy:i.a.createElement(w,null),onpremregistry:i.a.createElement(A,null)}})):(t=b.i18n.translate("xpack.fleet.epmList.eprUnavailable400500CalloutTitle",{defaultMessage:"Kibana cannot connect to the Elastic Package Registry, which provides Elastic Agent integrations\n"}),a=i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.epmList.eprUnavailableCallout400500TitleMessage",defaultMessage:"Ensure the {registryproxy} or {onpremregistry} is configured correctly, or try again later.",values:{registryproxy:i.a.createElement(w,null),onpremregistry:i.a.createElement(A,null)}})),i.a.createElement(s.EuiCallOut,{title:t,iconType:"iInCircle",color:"warning"},i.a.createElement("p",null,a))};function w(){const{docLinks:e}=Object(g.V)();return i.a.createElement(s.EuiLink,{href:e.links.fleet.settingsFleetServerProxySettings,target:"_blank"},b.i18n.translate("xpack.fleet.epmList.proxyLinkSnippedText",{defaultMessage:"proxy server"}))}function A(){const{docLinks:e}=Object(g.V)();return i.a.createElement(s.EuiLink,{href:e.links.fleet.onPremRegistry,target:"_blank"},b.i18n.translate("xpack.fleet.epmList.onPremLinkSnippetText",{defaultMessage:"your own registry"}))}const U=({prereleaseIntegrationsEnabled:e})=>{Object(g.l)("integrations_all");const{initialSelectedCategory:t,selectedCategory:a,setCategory:r,allCategories:l,mainCategories:o,preference:c,setPreference:d,isLoading:u,isLoadingCategories:m,isLoadingAllPackages:p,isLoadingAppendCustomIntegrations:f,eprPackageLoadingError:b,eprCategoryLoadingError:E,searchTerm:v,setSearchTerm:k,setUrlandPushHistory:C,setUrlandReplaceHistory:I,filteredCards:O,availableSubCategories:S,selectedSubCategory:L,setSelectedSubCategory:M}=Object(P.useAvailablePackages)({prereleaseIntegrationsEnabled:e}),j=Object(n.useCallback)((({id:e})=>{r(e),k(""),M(void 0),C({searchString:"",categoryId:e,subCategoryId:""})}),[r,k,M,C]);if(!u&&!G(t,l))return I({searchString:v,categoryId:"",subCategoryId:""}),null;let x,_=[i.a.createElement(s.EuiFlexItem,{grow:!1},i.a.createElement(s.EuiHorizontalRule,{margin:"m"}),i.a.createElement(T,{initialType:c,prereleaseIntegrationsEnabled:e,onChange:d}))];if(o&&(_=[i.a.createElement(s.EuiFlexItem,{className:"eui-yScrollWithShadows"},i.a.createElement(h.c,{isLoading:u,categories:o,selectedCategory:a,onCategoryChange:j})),..._]),b||E){const e=b||E;x=i.a.createElement(F,{statusCode:null==e?void 0:e.statusCode})}return i.a.createElement(y.PackageListGrid,{isLoading:m||p||f,controls:_,searchTerm:v,setSearchTerm:k,list:O,selectedCategory:a,setCategory:r,categories:o,setUrlandReplaceHistory:I,setUrlandPushHistory:C,callout:x,showCardLabels:!1,availableSubCategories:S,selectedSubCategory:L,setSelectedSubCategory:M,showMissingIntegrationMessage:!0})};var H=a(367),B=a(5);const R=({getAbsolutePath:e,getHref:t,item:a,addBasePath:n,packageVerificationKeyId:r,selectedCategory:l})=>{let c,d=!1,g="version"in a&&a.version||"",m=!1,p=!1;var b;"ui_link"===a.type?c=a.id.includes("language_client.")?n(a.uiInternalPath):a.uiExternalLink||e(a.uiInternalPath):(null!=a&&null!==(b=a.installationInfo)&&void 0!==b&&b.version&&(g=a.installationInfo.version||a.version,d=Object(u.d)(a,r),m=Object(u.e)(a),p=Object(H.b)(a)),c=t("integration_details_overview",{pkgkey:`${a.name}-${g}`,...a.integration?{integration:a.integration}:{}}));const y=Object(B.J)(g);let h;return"integration"===a.type&&(h=function(e){var t,a,n;const r=[];if(null!=e&&null!==(t=e.installationInfo)&&void 0!==t&&null!==(a=t.latest_install_failed_attempts)&&void 0!==a&&a.some((t=>e.installationInfo&&f()(e.installationInfo.version,t.target_version)))){var l,c;const t=null===(l=e.installationInfo)||void 0===l||null===(c=l.latest_install_failed_attempts)||void 0===c?void 0:c.find((t=>e.installationInfo&&f()(e.installationInfo.version,t.target_version)));r.push(i.a.createElement(s.EuiFlexItem,{key:"update_failed_badge",grow:!1},i.a.createElement(s.EuiSpacer,{size:"xs"}),i.a.createElement("span",null,i.a.createElement(s.EuiToolTip,{title:i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.packageCard.updateFailedTooltipTitle",defaultMessage:"Update failed"}),content:t?z(t):void 0},i.a.createElement(s.EuiBadge,{color:"danger",iconType:"error"},i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.packageCard.updateFailed",defaultMessage:"Update failed"}))))))}if((null===(n=e.installationInfo)||void 0===n?void 0:n.install_status)===o.Ob.InstallFailed){var d,u;const t=null===(d=e.installationInfo)||void 0===d||null===(u=d.latest_install_failed_attempts)||void 0===u?void 0:u.find((t=>{var a;return t.target_version===(null===(a=e.installationInfo)||void 0===a?void 0:a.version)}));r.push(i.a.createElement(s.EuiFlexItem,{key:"install_failed_badge",grow:!1},i.a.createElement(s.EuiSpacer,{size:"xs"}),i.a.createElement("span",null,i.a.createElement(s.EuiToolTip,{title:i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.packageCard.installFailedTooltipTitle",defaultMessage:"Install failed"}),content:t?z(t):void 0},i.a.createElement(s.EuiBadge,{color:"danger",iconType:"error"},i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.packageCard.installFailed",defaultMessage:"Install failed"}))))))}return r}(a)),{id:`${"ui_link"===a.type?"ui_link":"epr"}:${a.id}`,description:a.description,icons:a.icons&&a.icons.length?a.icons:[],title:a.title,url:c,fromIntegrations:l,integration:"integration"in a&&a.integration||"",name:"name"in a?a.name:a.id,version:g,release:y,categories:(a.categories||[]).filter((e=>!!e)),isReauthorizationRequired:p,isUnverified:d,isUpdateAvailable:m,extraLabelsBadges:h}};function z(e){var t,a;return i.a.createElement(i.a.Fragment,null,i.a.createElement(E.FormattedMessage,{id:"xpack.fleet.packageCard.faileAttemptDescription",defaultMessage:"Failed at {attemptDate}.",values:{attemptDate:i.a.createElement(i.a.Fragment,null,i.a.createElement(E.FormattedDate,{value:e.created_at,year:"numeric",month:"short",day:"numeric"}),i.a.createElement(i.a.Fragment,null," @ "),i.a.createElement(E.FormattedTime,{value:e.created_at,hour:"numeric",minute:"numeric",second:"numeric"}))}}),i.a.createElement("p",null,(null===(t=e.error)||void 0===t?void 0:t.name)||""," : ",(null===(a=e.error)||void 0===a?void 0:a.message)||""))}const N=(e,t)=>{const{category:a,subcategory:n}=e;return{selectedCategory:a||"",searchParam:new URLSearchParams(t).get(c.e)||"",selectedSubcategory:n}},G=(e,t)=>t.some((t=>t.id===e)),V=()=>{var e;const t=Object(g.k)().fleet.readSettings,{data:a,isFetchedAfterMount:m}=Object(g.H)({enabled:t}),p=null!==(e=null==a?void 0:a.item.prerelease_integrations_enabled)&&void 0!==e&&e,f=!t||m,{data:b,isLoading:E}=Object(g.F)({prerelease:p},{enabled:f}),y=Object(n.useMemo)((()=>((null==b?void 0:b.items)||[]).filter((e=>e.status===o.Ob.Installed||e.status===o.Ob.InstallFailed))),[b]),h={manage:Object(n.useMemo)((()=>y.filter((e=>{var t;return(null===(t=e.installationInfo)||void 0===t?void 0:t.verification_status)&&"unverified"===e.installationInfo.verification_status})).length),[y])+Object(n.useMemo)((()=>y.filter(u.e).length),[y])};return f?i.a.createElement(r.a,null,i.a.createElement(l.b,{path:c.d.integrations_installed},i.a.createElement(d.a,{section:"manage",notificationsBySection:h},i.a.createElement(O,{installedPackages:y,isLoading:E}))),i.a.createElement(l.b,{path:c.d.integrations_all},i.a.createElement(d.a,{section:"browse",notificationsBySection:h},i.a.createElement(U,{prereleaseIntegrationsEnabled:p})))):i.a.createElement(s.EuiLoadingSpinner,null)}},367:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return i}));const n=e=>{var t;return e&&e&&"installationInfo"in e&&e.installationInfo?null===(t=e.installationInfo.installed_es)||void 0===t?void 0:t.filter((e=>e.deferred)).length:0},i=e=>n(e)>0},382:function(e,t,a){"use strict";a.d(t,"b",(function(){return n.a})),a.d(t,"a",(function(){return c}));var n=a(165),i=a(1),r=a.n(i),l=a(6),s=a(12),o=a(15);const c=Object(i.memo)((({section:e,children:t,notificationsBySection:a})=>{var i;const{integrationAssistant:c}=Object(o.Xc)(),{getHref:d}=Object(o.Kc)(),u=[{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.integrationsAllLinkText",defaultMessage:"Browse integrations"}),section:"browse",href:d("integrations_all")},{name:r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.appNavigation.integrationsInstalledLinkText",defaultMessage:"Installed integrations"}),section:"manage",href:d("integrations_installed")}],{CreateIntegrationCardButton:g}=null!==(i=null==c?void 0:c.components)&&void 0!==i?i:{};return r.a.createElement(n.a,{leftColumn:r.a.createElement(l.EuiFlexGroup,{direction:"column",gutterSize:"none",justifyContent:"center"},r.a.createElement(l.EuiText,null,r.a.createElement("h1",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.integrationsHeaderTitle",defaultMessage:"Integrations"}))),r.a.createElement(l.EuiSpacer,{size:"s"}),r.a.createElement(l.EuiFlexItem,{grow:!1},r.a.createElement(l.EuiText,{size:"s",color:"subdued"},r.a.createElement("p",null,r.a.createElement(s.FormattedMessage,{id:"xpack.fleet.epm.pageSubtitle",defaultMessage:"Choose an integration to start collecting and analyzing your data."})))),r.a.createElement(l.EuiSpacer,{size:"s"})),rightColumnGrow:!1,rightColumn:g?r.a.createElement(l.EuiFlexItem,{grow:!1},r.a.createElement(g,null)):void 0,tabs:u.map((t=>{const n=null==a?void 0:a[t.section];return{name:t.name,append:n?r.a.createElement(l.EuiNotificationBadge,{className:"eui-alignCenter",size:"m"},n):void 0,href:t.href,isSelected:e===t.section}}))},t)}))},708:function(e,t,a){"use strict";a.r(t),a.d(t,"useAvailablePackages",(function(){return b}));var n=a(1),i=a(13),r=a(116),l=a(107),s=a(0);var o=a(264),c=a(142),d=a(5),u=a(184),g=a(106),m=a(22),p=a(137);function f(e){var t;if(!Object(c.c)(e))return e.categories;const a=null===(t=e.policy_templates)||void 0===t?void 0:t.reduce(((e,t)=>Object(d.V)(t)?e:[...e,...t.categories||[]]),e.categories||[]);return Object(i.uniq)(a)}const b=({prereleaseIntegrationsEnabled:e})=>{const[t,a]=Object(n.useState)("recommended"),{showIntegrationsSubcategories:b}=c.a.get(),{initialSelectedCategory:E,initialSubcategory:y,setUrlandPushHistory:h,setUrlandReplaceHistory:v,getHref:k,getAbsolutePath:C,searchParam:I,addBasePath:O}=(()=>{const{http:e}=Object(r.V)(),t=e.basePath.prepend,{selectedCategory:a,selectedSubcategory:n,searchParam:i}=Object(o.c)(Object(m.useParams)(),Object(m.useLocation)().search),{getHref:l,getAbsolutePath:s}=Object(r.N)(),c=Object(m.useHistory)(),d=({searchString:e,categoryId:t,subCategoryId:a})=>p.j.integrations_all({category:t||"",subCategory:a||"",searchTerm:e||""})[1];return{initialSelectedCategory:a,initialSubcategory:n,setUrlandPushHistory:({searchString:e,categoryId:t,subCategoryId:a})=>{const n=d({categoryId:t,searchString:e,subCategoryId:a});c.push(n)},setUrlandReplaceHistory:({searchString:e,categoryId:t,subCategoryId:a})=>{const n=d({categoryId:t,searchString:e,subCategoryId:a});c.replace(n)},getHref:l,getAbsolutePath:s,searchParam:i,addBasePath:t}})(),[S,L]=Object(n.useState)(E),[M,j]=Object(n.useState)(y),[x,_]=Object(n.useState)(I||""),{data:T,isLoading:P,error:F}=Object(r.F)({prerelease:e});null!=T&&T.items&&T.items.forEach((function(e){"kubernetes"===e.id&&(e.policy_templates=[])}));const w=Object(n.useMemo)((()=>((null==T?void 0:T.items)||[]).reduce(((e,t)=>{const{policy_templates:a=[],categories:n=[],...r}=t;return[...e,{...r,categories:f(t)},...Object(c.c)(t)?a.map((e=>{const{name:t,title:a,description:l,icons:s}=e,o=Object(d.W)(e)&&e.categories?e.categories:[],c=[...n,...o];return{...r,id:`${r.id}-${t}`,integration:t,title:a,description:l,icons:s||r.icons,categories:Object(i.uniq)(c)}})):[]]}),[])),[T]),{data:A,isInitialLoading:U}=Object(r.G)(),{isInitialLoading:H,data:B}=Object(r.t)(),R=(q="beats"===t?[]:w,X="agent"===t?[]:A||[],Object(n.useMemo)((()=>{const e=[],t=X,a=q.filter((e=>e.name!==s.L));a.forEach((a=>{const n=function(e,t,a){return"ga"===a?[]:Object(l.filterCustomIntegrations)(e,{eprPackageName:t})}(t,a.name,a.release);n.length?n.forEach((t=>{e.find((({id:e})=>e===t.id))||e.push(t)})):e.push(a)}));const n=t.filter((e=>!a.find((t=>t.name===e.eprOverlap))));return e.push(...n),e}),[q,X])),z=Object(n.useMemo)((()=>[...R,...B||[]].map((e=>Object(o.d)({getAbsolutePath:C,getHref:k,item:e,addBasePath:O}))).sort(((e,t)=>e.title.localeCompare(t.title)))),[O,B,C,k,R]),N=Object(n.useMemo)((()=>z.filter((e=>""===S||(M?e.categories.includes(M):e.categories.includes(S))))),[z,S,M]),{data:G,isLoading:V,error:D}=Object(r.u)({prerelease:e}),$=Object(n.useMemo)((()=>(null==G?void 0:G.items)||[]),[G]),K=Object(n.useMemo)((()=>{const e=V?[]:function(e,t){const a=[],n=e=>{const t=a.find((t=>t.id===e.id));t?t.count+=e.count:a.push(e)};e.forEach((e=>{n({...e,count:0})}));for(const[e,t]of Object.entries(g.INTEGRATION_CATEGORY_DISPLAY))n({...t,id:e,count:0});t.forEach((e=>{e.categories.forEach((e=>{const t=g.INTEGRATION_CATEGORY_DISPLAY[e]?g.INTEGRATION_CATEGORY_DISPLAY[e]:{title:e};n({...t,id:e,count:1})}))}));const i=a.filter((e=>e.count>0));return i.sort(((e,t)=>e.id.localeCompare(t.id))),i}($||[],z);return[{...u.a,count:z.length},...e||[]]}),[z,$,V]),W=Object(n.useMemo)((()=>b?K.filter((e=>void 0===e.parent_id)):K),[K,b]),Y=Object(n.useMemo)((()=>b?null==K?void 0:K.filter((e=>e.parent_id===S)):[]),[K,S,b]);var q,X;return{initialSelectedCategory:E,selectedCategory:S,setCategory:L,allCategories:K,mainCategories:W,availableSubCategories:Y,selectedSubCategory:M,setSelectedSubCategory:j,searchTerm:x,setSearchTerm:_,setUrlandPushHistory:h,setUrlandReplaceHistory:v,preference:t,setPreference:a,isLoading:U||H||V||P,isLoadingCategories:V,isLoadingAllPackages:P,isLoadingAppendCustomIntegrations:H,eprPackageLoadingError:F,eprCategoryLoadingError:D,filteredCards:N}}}}]);