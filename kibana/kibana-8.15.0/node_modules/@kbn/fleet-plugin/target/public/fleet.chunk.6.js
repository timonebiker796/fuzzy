/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.fleet_bundle_jsonpfunction=window.fleet_bundle_jsonpfunction||[]).push([[6],{260:function(e,t,a){e.exports=a(41)(1226)},370:function(e,t){e.exports=function(e,t,a){for(var n,l,i,r=e.children||[],s=[],o=-1,c=a.before;++o<r.length;)i=r[o],o+1<r.length?((l=t.handle.handlers[r[o+1].type])&&l.peek&&(l=l.peek),n=l?l(r[o+1],e,t,{before:"",after:""}).charAt(0):""):n=a.after,s.push(t.handle(i,e,t,{before:c,after:n})),c=s[s.length-1].slice(-1);return s.join("")}},372:function(e,t,a){"use strict";var n,l=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),i=[];function r(e){for(var t=-1,a=0;a<i.length;a++)if(i[a].identifier===e){t=a;break}return t}function s(e,t){for(var a={},n=[],l=0;l<e.length;l++){var s=e[l],o=t.base?s[0]+t.base:s[0],c=a[o]||0,u="".concat(o," ").concat(c);a[o]=c+1;var d=r(u),m={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(i[d].references++,i[d].updater(m)):i.push({identifier:u,updater:f(m,t),references:1}),n.push(u)}return n}function o(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=a.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=l(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,a,n){var l=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,l);else{var i=document.createTextNode(l),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(i,r[t]):e.appendChild(i)}}function m(e,t,a){var n=a.css,l=a.media,i=a.sourceMap;if(l?e.setAttribute("media",l):e.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var g=null,p=0;function f(e,t){var a,n,l;if(t.singleton){var i=p++;a=g||(g=o(t)),n=d.bind(null,a,i,!1),l=d.bind(null,a,i,!0)}else a=o(t),n=m.bind(null,a,t),l=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else l()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var l=r(a[n]);i[l].references--}for(var o=s(e,t),c=0;c<a.length;c++){var u=r(a[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}a=o}}}},373:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,l,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var s=(a=r,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(l," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[i].concat(o).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var l={};if(n)for(var i=0;i<this.length;i++){var r=this[i][0];null!=r&&(l[r]=!0)}for(var s=0;s<e.length;s++){var o=[].concat(e[s]);n&&l[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},656:function(e,t,a){const n=a(37);e.exports=(e,t,a)=>n(e,t,a)<=0},667:function(e,t,a){e.exports=a.p+"4263c1cc9b4ed4fad5cfb2db1f6ef6b9.svg"},668:function(e,t,a){"use strict";var n,l=a(669),i=a(678),r=a(688);e.exports=function(e){var t=this.data();function a(e,a){t[e]?t[e].push(a):t[e]=[a]}!n&&(this.Parser&&this.Parser.prototype&&this.Parser.prototype.blockTokenizers||this.Compiler&&this.Compiler.prototype&&this.Compiler.prototype.visitors)&&(n=!0,console.warn("[remark-gfm] Warning: please upgrade to remark 13 to use this plugin")),a("micromarkExtensions",l(e)),a("fromMarkdownExtensions",i),a("toMarkdownExtensions",r(e))}},669:function(e,t,a){e.exports=a(670)},670:function(e,t,a){var n=a(275),l=a(671),i=a(673),r=a(674),s=a(676);e.exports=function(e){return n([l,i(e),r,s])}},671:function(e,t,a){e.exports=a(672)},672:function(e,t,a){var n=a(191),l=a(168),i=a(211),r=a(124),s=a(209),o=a(210),c={tokenize:function(e,t,a){return function(t){return e.consume(t),n};function n(t){return 87===t||t-32==87?(e.consume(t),l):a(t)}function l(t){return 87===t||t-32==87?(e.consume(t),i):a(t)}function i(t){return 46===t?(e.consume(t),s):a(t)}function s(e){return null===e||r(e)?a(e):t(e)}},partial:!0},u={tokenize:function(e,t,a){var n,l;return r;function r(t){return 38===t?e.check(g,u,c)(t):46===t||95===t?e.check(m,u,c)(t):i(t)||o(t)||45!==t&&s(t)?u(t):(e.consume(t),r)}function c(t){return 46===t?(l=n,n=void 0,e.consume(t),r):(95===t&&(n=!0),e.consume(t),r)}function u(e){return l||n?a(e):t(e)}},partial:!0},d={tokenize:function(e,t){var a=0;return n;function n(r){return 38===r?e.check(g,t,l)(r):(40===r&&a++,41===r?e.check(m,i,l)(r):v(r)?t(r):k(r)?e.check(m,t,l)(r):(e.consume(r),n))}function l(t){return e.consume(t),n}function i(e){return--a<0?t(e):l(e)}},partial:!0},m={tokenize:function(e,t,a){return function(t){return e.consume(t),n};function n(l){return k(l)?(e.consume(l),n):v(l)?t(l):a(l)}},partial:!0},g={tokenize:function(e,t,a){return function(t){return e.consume(t),l};function l(t){return n(t)?(e.consume(t),l):59===t?(e.consume(t),i):a(t)}function i(e){return v(e)?t(e):a(e)}},partial:!0},p={tokenize:function(e,t,a){var n=this;return function(t){return 87!==t&&t-32!=87||!y(n.previous)||O(n.events)?a(t):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(c,e.attempt(u,e.attempt(d,l),a),a)(t))};function l(a){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(a)}},previous:y},f={tokenize:function(e,t,a){var n=this;return function(t){return 72!==t&&t-32!=72||!M(n.previous)||O(n.events)?a(t):(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),e.consume(t),l)};function l(t){return 84===t||t-32==84?(e.consume(t),r):a(t)}function r(t){return 84===t||t-32==84?(e.consume(t),c):a(t)}function c(t){return 80===t||t-32==80?(e.consume(t),m):a(t)}function m(t){return 83===t||t-32==83?(e.consume(t),g):g(t)}function g(t){return 58===t?(e.consume(t),p):a(t)}function p(t){return 47===t?(e.consume(t),f):a(t)}function f(t){return 47===t?(e.consume(t),E):a(t)}function E(t){return i(t)||o(t)||s(t)?a(t):e.attempt(u,e.attempt(d,h),a)(t)}function h(a){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(a)}},previous:M},E={tokenize:function(e,t,a){var n,i=this;return function(t){return x(t)&&j(i.previous)&&!O(i.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),r(t)):a(t)};function r(t){return x(t)?(e.consume(t),r):64===t?(e.consume(t),s):a(t)}function s(t){return 46===t?e.check(m,d,o)(t):45===t||95===t?e.check(m,a,c)(t):l(t)?(e.consume(t),s):d(t)}function o(t){return e.consume(t),n=!0,s}function c(t){return e.consume(t),u}function u(t){return 46===t?e.check(m,a,o)(t):s(t)}function d(l){return n?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(l)):a(l)}},previous:j},h={};t.text=h;for(var b=48;b<123;)h[b]=E,58==++b?b=65:91===b&&(b=97);function k(e){return 33===e||34===e||39===e||41===e||42===e||44===e||46===e||58===e||59===e||60===e||63===e||95===e||126===e}function v(e){return null===e||e<0||32===e||60===e}function x(e){return 43===e||45===e||46===e||95===e||l(e)}function y(e){return null===e||e<0||32===e||40===e||42===e||95===e||126===e}function M(e){return null===e||!n(e)}function j(e){return 47!==e&&M(e)}function O(e){for(var t=e.length;t--;)if(("labelLink"===e[t][1].type||"labelImage"===e[t][1].type)&&!e[t][1]._balanced)return!0}h[43]=E,h[45]=E,h[46]=E,h[95]=E,h[72]=[E,f],h[104]=[E,f],h[87]=[E,p],h[119]=[E,p]},673:function(e,t,a){e.exports=function(e){var t=(e||{}).singleTilde,a={tokenize:function(e,a,l){var i=this.previous,r=this.events,s=0;return function(t){return 126!==t||126===i&&"characterEscape"!==r[r.length-1][1].type?l(t):(e.enter("strikethroughSequenceTemporary"),o(t))};function o(r){var c,u,d=n(i);return 126===r?s>1?l(r):(e.consume(r),s++,o):s<2&&!t?l(r):(c=e.exit("strikethroughSequenceTemporary"),u=n(r),c._open=!u||2===u&&d,c._close=!d||2===d&&u,a(r))}},resolveAll:function(e,t){for(var a,n,s,o,c=-1;++c<e.length;)if("enter"===e[c][0]&&"strikethroughSequenceTemporary"===e[c][1].type&&e[c][1]._close)for(s=c;s--;)if("exit"===e[s][0]&&"strikethroughSequenceTemporary"===e[s][1].type&&e[s][1]._open&&e[c][1].end.offset-e[c][1].start.offset==e[s][1].end.offset-e[s][1].start.offset){e[c][1].type="strikethroughSequence",e[s][1].type="strikethroughSequence",a={type:"strikethrough",start:r(e[s][1].start),end:r(e[c][1].end)},n={type:"strikethroughText",start:r(e[s][1].end),end:r(e[c][1].start)},o=[["enter",a,t],["enter",e[s][1],t],["exit",e[s][1],t],["enter",n,t]],l(o,o.length,0,i(t.parser.constructs.insideSpan.null,e.slice(s+1,c),t)),l(o,o.length,0,[["exit",n,t],["enter",e[c][1],t],["exit",e[c][1],t],["exit",a,t]]),l(e,s-1,c-s+3,o),c=s+o.length-2;break}return function(e){for(var t=-1,a=e.length;++t<a;)"strikethroughSequenceTemporary"===e[t][1].type&&(e[t][1].type="data");return e}(e)}};return null==t&&(t=!0),{text:{126:a},insideSpan:{null:a}}};var n=a(276),l=a(146),i=a(190),r=a(154)},674:function(e,t,a){e.exports=a(675)},675:function(e,t,a){t.flow={null:{tokenize:function(e,t,a){var r,s,o=[],c=0;return function(t){return null===t||-5===t||-4===t||-3===t?a(t):(e.enter("table")._align=o,e.enter("tableHead"),e.enter("tableRow"),124===t?u(t):(c++,e.enter("temporaryTableCellContent"),g(t)))};function u(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),r=!0,d}function d(t){return null===t||-5===t||-4===t||-3===t?function(t){return null===t?a(t):(e.exit("tableRow"),e.exit("tableHead"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.check(l,a,n(e,f,"linePrefix",4)))}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),m):(r&&(r=void 0,c++),124===t?u(t):(e.enter("temporaryTableCellContent"),g(t)))}function m(t){return-2===t||-1===t||32===t?(e.consume(t),m):(e.exit("whitespace"),d(t))}function g(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),d(t)):(e.consume(t),92===t?p:g)}function p(t){return 92===t||124===t?(e.consume(t),g):g(t)}function f(t){return null===t||t<0||32===t?a(t):(e.enter("tableDelimiterRow"),E(t))}function E(t){return null===t||-5===t||-4===t||-3===t?x(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),h):45===t?(e.enter("tableDelimiterFiller"),e.consume(t),s=!0,o.push(null),b):58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),o.push("left"),k):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),E):a(t)}function h(t){return-2===t||-1===t||32===t?(e.consume(t),h):(e.exit("whitespace"),E(t))}function b(t){return 45===t?(e.consume(t),b):(e.exit("tableDelimiterFiller"),58===t?(e.enter("tableDelimiterAlignment"),e.consume(t),e.exit("tableDelimiterAlignment"),o[o.length-1]="left"===o[o.length-1]?"center":"right",v):E(t))}function k(t){return 45===t?(e.enter("tableDelimiterFiller"),e.consume(t),s=!0,b):a(t)}function v(t){return null===t||-5===t||-4===t||-3===t?x(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),h):124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),E):a(t)}function x(t){return e.exit("tableDelimiterRow"),s&&c===o.length?null===t?y(t):e.check(i,y,M)(t):a(t)}function y(a){return e.exit("table"),t(a)}function M(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),n(e,j,"linePrefix",4)}function j(t){return e.enter("tableBody"),O(t)}function O(t){return e.enter("tableRow"),124===t?C(t):(e.enter("temporaryTableCellContent"),F(t))}function C(t){return e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),I}function I(t){return null===t||-5===t||-4===t||-3===t?function(t){return e.exit("tableRow"),null===t?P(t):e.check(i,P,S)(t)}(t):-2===t||-1===t||32===t?(e.enter("whitespace"),e.consume(t),w):124===t?C(t):(e.enter("temporaryTableCellContent"),F(t))}function w(t){return-2===t||-1===t||32===t?(e.consume(t),w):(e.exit("whitespace"),I(t))}function F(t){return null===t||t<0||32===t||124===t?(e.exit("temporaryTableCellContent"),I(t)):(e.consume(t),92===t?T:F)}function T(t){return 92===t||124===t?(e.consume(t),F):F(t)}function P(t){return e.exit("tableBody"),y(t)}function S(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),n(e,O,"linePrefix",4)}},resolve:function(e,t){for(var a,n,l,i,r,s,o,c,u,d,m=e.length,g=-1;++g<m;)a=e[g][1],i&&("temporaryTableCellContent"===a.type&&(c=c||g,u=g),"tableCellDivider"!==a.type&&"tableRow"!==a.type||!u||(o={type:"chunkText",start:(s={type:"tableContent",start:e[c][1].start,end:e[u][1].end}).start,end:s.end,contentType:"text"},e.splice(c,u-c+1,["enter",s,t],["enter",o,t],["exit",o,t],["exit",s,t]),g-=u-c-3,m=e.length,c=void 0,u=void 0)),"exit"===e[g][0]&&d&&d+1<g&&("tableCellDivider"===a.type||"tableRow"===a.type&&(d+3<g||"whitespace"!==e[d][1].type))&&(r={type:l?"tableDelimiter":n?"tableHeader":"tableData",start:e[d][1].start,end:e[g][1].end},e.splice(g+("tableCellDivider"===a.type?1:0),0,["exit",r,t]),e.splice(d,0,["enter",r,t]),g+=2,m=e.length,d=g+1),"tableRow"===a.type&&(i="enter"===e[g][0])&&(d=g+1),"tableDelimiterRow"===a.type&&(l="enter"===e[g][0])&&(d=g+1),"tableHead"===a.type&&(n="enter"===e[g][0]);return e},interruptible:!0}};var n=a(125),l={tokenize:function(e,t,a){return function(t){return 45!==t?a(t):(e.enter("setextUnderline"),n(t))};function n(t){return 45===t?(e.consume(t),n):l(t)}function l(n){return-2===n||-1===n||32===n?(e.consume(n),l):null===n||-5===n||-4===n||-3===n?t(n):a(n)}},partial:!0},i={tokenize:function(e,t,a){var n=0;return function(t){return e.enter("check"),e.consume(t),l};function l(i){return-1===i||32===i?(e.consume(i),4==++n?t:l):null===i||i<0?t(i):a(i)}},partial:!0}},676:function(e,t,a){e.exports=a(677)},677:function(e,t,a){var n=a(147),l=a(125),i=a(167),r={tokenize:function(e,t,a){var n=this;return function(t){return 91===t&&null===n.previous&&n._gfmTasklistFirstContentOfListItem?(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),l):a(t)};function l(t){return-2===t||32===t?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),i):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),i):a(t)}function i(n){return 93===n?(e.enter("taskListCheckMarker"),e.consume(n),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),e.check({tokenize:s},t,a)):a(n)}}};function s(e,t,a){var r=this;return l(e,(function(e){return i(r.events,"whitespace")&&null!==e&&!n(e)?t(e):a(e)}),"whitespace")}t.text={91:r}},678:function(e,t,a){var n=a(679),l=a(685),i=a(686),r=a(687),s={}.hasOwnProperty;function o(e,t){var a,n,l;for(a in t)n=s.call(e,a)?e[a]:e[a]={},l=t[a],"canContainEols"===a||"transforms"===a?e[a]=[].concat(n,l):Object.assign(n,l)}e.exports=function(e){for(var t={transforms:[],canContainEols:[]},a=e.length,n=-1;++n<a;)o(t,e[n]);return t}([n,l,i,r])},679:function(e,t,a){var n=a(680),l=a(681),i=a(209),r=a(210);function s(e){this.config.enter.autolinkProtocol.call(this,e)}function o(e,t,a,l,i){var r,s,o="";return!!u(i)&&(/^w/i.test(t)&&(a=t+a,t="",o="http://"),!!function(e){var t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}(a)&&!!(r=function(e){var t,a,l,i=/[!"&'),.:;<>?\]}]+$/.exec(e);if(i)for(e=e.slice(0,i.index),t=(i=i[0]).indexOf(")"),a=n(e,"("),l=n(e,")");-1!==t&&a>l;)e+=i.slice(0,t+1),t=(i=i.slice(t+1)).indexOf(")"),l++;return[e,i]}(a+l))[0]&&(s={type:"link",title:null,url:o+t+r[0],children:[{type:"text",value:t+r[0]}]},r[1]&&(s=[s,{type:"text",value:r[1]}]),s))}function c(e,t,a,n){return!(!u(n,!0)||/[_-]$/.test(a))&&{type:"link",title:null,url:"mailto:"+t+"@"+a,children:[{type:"text",value:t+"@"+a}]}}function u(e,t){var a=e.input.charCodeAt(e.index-1);return(a!=a||r(a)||i(a))&&(!t||47!==a)}t.transforms=[function(e){l(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/i,o],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/,c]],{ignore:["link","linkReference"]})}],t.enter={literalAutolink:function(e){this.enter({type:"link",title:null,url:"",children:[]},e)},literalAutolinkEmail:s,literalAutolinkHttp:s,literalAutolinkWww:s},t.exit={literalAutolink:function(e){this.exit(e)},literalAutolinkEmail:function(e){this.config.exit.autolinkEmail.call(this,e)},literalAutolinkHttp:function(e){this.config.exit.autolinkProtocol.call(this,e)},literalAutolinkWww:function(e){this.config.exit.data.call(this,e),this.stack[this.stack.length-1].url="http://"+this.sliceSerialize(e)}}},680:function(e,t,a){e.exports=a(41)(3884)},681:function(e,t,a){"use strict";e.exports=function(e,t,a,n){var l,i;return"string"==typeof t||t&&"function"==typeof t.exec?i=[[t,a]]:(i=t,n=a),s(e,l=n||{},function e(t){var a=t[0];return function(n,i){var o,c,u,d,m=a[0],g=a[1],p=[],f=0,E=i.children.indexOf(n);for(m.lastIndex=0,c=m.exec(n.value);c&&(o=c.index,!1!==(d=g.apply(null,[].concat(c,{index:c.index,input:c.input})))&&(f!==o&&p.push({type:"text",value:n.value.slice(f,o)}),"string"==typeof d&&d.length>0&&(d={type:"text",value:d}),d&&(p=[].concat(p,d)),f=o+c[0].length),m.global);)c=m.exec(n.value);if(void 0===o?(p=[n],E--):(f<n.value.length&&p.push({type:"text",value:n.value.slice(f)}),p.unshift(E,1),r.apply(i.children,p)),t.length>1)for(u=e(t.slice(1)),o=-1;++o<p.length;)"text"===(n=p[o]).type?u(n,i):s(n,l,u);return E+p.length+1}}(function(e){var t,a,n=[];if("object"!=typeof e)throw new Error("Expected array or object as schema");if("length"in e)for(a=-1;++a<e.length;)n.push([o(e[a][0]),c(e[a][1])]);else for(t in e)n.push([o(t),c(e[t])]);return n}(i))),e};var n=a(682),l=a(683),i=a(684),r=[].splice;function s(e,t,a){var i=l(t.ignore||[]);return n(e,"text",(function(e,t){for(var n,l,r=-1;++r<t.length;){if(n=t[r],i(n,l?l.children.indexOf(n):void 0,l))return;l=n}return a(e,l)})),[]}function o(e){return"string"==typeof e?new RegExp(i(e),"g"):e}function c(e){return"function"==typeof e?e:function(){return e}}},682:function(e,t,a){e.exports=a(41)(3864)},683:function(e,t,a){e.exports=a(41)(1723)},684:function(e,t,a){"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},685:function(e,t){t.canContainEols=["delete"],t.enter={strikethrough:function(e){this.enter({type:"delete",children:[]},e)}},t.exit={strikethrough:function(e){this.exit(e)}}},686:function(e,t){function a(e){this.exit(e)}function n(e){this.enter({type:"tableCell",children:[]},e)}function l(e,t){return"|"===t?t:e}t.enter={table:function(e){this.enter({type:"table",align:e._align,children:[]},e),this.setData("inTable",!0)},tableData:n,tableHeader:n,tableRow:function(e){this.enter({type:"tableRow",children:[]},e)}},t.exit={codeText:function(e){var t=this.resume();this.getData("inTable")&&(t=t.replace(/\\([\\|])/g,l)),this.stack[this.stack.length-1].value=t,this.exit(e)},table:function(e){this.exit(e),this.setData("inTable")},tableData:a,tableHeader:a,tableRow:a}},687:function(e,t){function a(e){this.stack[this.stack.length-2].checked="taskListCheckValueChecked"===e.type}t.exit={taskListCheckValueChecked:a,taskListCheckValueUnchecked:a,paragraph:function(e){var t,a=this.stack[this.stack.length-2],n=this.stack[this.stack.length-1],l=a.children,i=n.children[0],r=-1;if(a&&"listItem"===a.type&&"boolean"==typeof a.checked&&i&&"text"===i.type){for(;++r<l.length;)if("paragraph"===l[r].type){t=l[r];break}t===n&&(i.value=i.value.slice(1),0===i.value.length?n.children.shift():(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}this.exit(e)}}},688:function(e,t,a){var n=a(689),l=a(690),i=a(691),r=a(694),s=a(700);e.exports=function(e){var t=s({handlers:{},join:[],unsafe:[],options:{}},{extensions:[n,l,i(e),r]});return Object.assign(t.options,{handlers:t.handlers,join:t.join,unsafe:t.unsafe})}},689:function(e,t){var a="phrasing",n=["autolink","link","image","label"];t.unsafe=[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:a,notInConstruct:n},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:a,notInConstruct:n},{character:":",before:"[ps]",after:"\\/",inConstruct:a,notInConstruct:n}]},690:function(e,t,a){var n=a(370);function l(e,t,a){var l=a.enter("emphasis"),i=n(e,a,{before:"~",after:"~"});return l(),"~~"+i+"~~"}t.unsafe=[{character:"~",inConstruct:"phrasing"}],t.handlers={delete:l},l.peek=function(){return"~"}},691:function(e,t,a){var n=a(370),l=a(692),i=a(693);e.exports=function(e){var t=e||{},a=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,o=a?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{table:function(e,t,a){return u(function(e,t){for(var a=e.children,n=-1,l=a.length,i=[],r=t.enter("table");++n<l;)i[n]=d(a[n],t);return r(),i}(e,a),e.align)},tableRow:function(e,t,a){var n=u([d(e,a)]);return n.slice(0,n.indexOf("\n"))},tableCell:c,inlineCode:function(e,t,a){var n=l(e,t,a);return-1!==a.stack.indexOf("tableCell")&&(n=n.replace(/\|/g,"\\$&")),n}}};function c(e,t,a){var l=a.enter("tableCell"),i=n(e,a,{before:o,after:o});return l(),i}function u(e,t){return i(e,{align:t,alignDelimiters:r,padding:a,stringLength:s})}function d(e,t){for(var a=e.children,n=-1,l=a.length,i=[],r=t.enter("tableRow");++n<l;)i[n]=c(a[n],0,t);return r(),i}}},692:function(e,t){function a(e){for(var t=e.value||"",a="`",n="";new RegExp("(^|[^`])"+a+"([^`]|$)").test(t);)a+="`";return/[^ \r\n]/.test(t)&&(/[ \r\n`]/.test(t.charAt(0))||/[ \r\n`]/.test(t.charAt(t.length-1)))&&(n=" "),a+n+t+n+a}e.exports=a,a.peek=function(){return"`"}},693:function(e,t,a){"use strict";var n=a(260);e.exports=function(e,t){for(var a,u,d,m,g,k,v,x,y,M,j,O,C=t||{},I=!1!==C.padding,w=!1!==C.delimiterStart,F=!1!==C.delimiterEnd,T=(C.align||[]).concat(),P=!1!==C.alignDelimiters,S=[],A=C.stringLength||h,L=-1,_=e.length,z=[],D=[],N=[],R=[],B=[],U=0;++L<_;){for(u=-1,N=[],R=[],(d=(a=e[L]).length)>U&&(U=d);++u<d;)k=null==(O=a[u])?"":String(O),!0===P&&(g=A(k),R[u]=g,(void 0===(m=B[u])||g>m)&&(B[u]=g)),N.push(k);z[L]=N,D[L]=R}if(u=-1,d=U,"object"==typeof T&&"length"in T)for(;++u<d;)S[u]=b(T[u]);else for(j=b(T);++u<d;)S[u]=j;for(u=-1,d=U,N=[],R=[];++u<d;)y="",M="",(j=S[u])===f?y=o:j===E?M=o:j===p&&(y=o,M=o),g=P?Math.max(1,B[u]-y.length-M.length):1,k=y+n(s,g)+M,!0===P&&((g=y.length+g+M.length)>B[u]&&(B[u]=g),R[u]=g),N[u]=k;for(z.splice(1,0,N),D.splice(1,0,R),L=-1,_=z.length,v=[];++L<_;){for(N=z[L],R=D[L],u=-1,d=U,x=[];++u<d;)k=N[u]||"",y="",M="",!0===P&&(g=B[u]-(R[u]||0),(j=S[u])===E?y=n(i,g):j===p?g%2==0?M=y=n(i,g/2):(y=n(i,g/2+.5),M=n(i,g/2-.5)):M=n(i,g)),!0===w&&0===u&&x.push(c),!0!==I||!1===P&&""===k||!0!==w&&0===u||x.push(i),!0===P&&x.push(y),x.push(k),!0===P&&x.push(M),!0===I&&x.push(i),!0!==F&&u===d-1||x.push(c);x=x.join(""),!1===F&&(x=x.replace(l,"")),v.push(x)}return v.join(r)};var l=/ +$/,i=" ",r="\n",s="-",o=":",c="|",u=0,d=67,m=76,g=82,p=99,f=108,E=114;function h(e){return e.length}function b(e){var t="string"==typeof e?e.charCodeAt(0):u;return t===m||t===f?f:t===g||t===E?E:t===d||t===p?p:u}},694:function(e,t,a){var n=a(695);t.unsafe=[{atBreak:!0,character:"-",after:"[:|-]"}],t.handlers={listItem:function(e,t,a){var l=n(e,t,a),i=e.children[0];return"boolean"==typeof e.checked&&i&&"paragraph"===i.type&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,(function(t){return t+"["+(e.checked?"x":" ")+"] "}))),l}}},695:function(e,t,a){e.exports=function(e,t,a){var o,c,u,d=l(a),m=i(a);return t&&t.ordered&&(d=(t.start>-1?t.start:1)+(!1===a.options.incrementListMarker?0:t.children.indexOf(e))+"."),o=d.length+1,("tab"===m||"mixed"===m&&(t&&t.spread||e.spread))&&(o=4*Math.ceil(o/4)),u=a.enter("listItem"),c=s(r(e,a),(function(e,t,a){return t?(a?"":n(" ",o))+e:(a?d:d+n(" ",o-d.length))+e})),u(),c};var n=a(260),l=a(696),i=a(697),r=a(698),s=a(699)},696:function(e,t){e.exports=function(e){var t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}},697:function(e,t){e.exports=function(e){var t=e.options.listItemIndent||"tab";if(1===t||"1"===t)return"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}},698:function(e,t,a){e.exports=function(e,t){for(var a,l=e.children||[],i=[],r=-1;++r<l.length;)a=l[r],i.push(t.handle(a,e,t,{before:"\n",after:"\n"})),r+1<l.length&&i.push(s(a,l[r+1]));return i.join("");function s(a,l){for(var i,r=-1;++r<t.join.length&&!0!==(i=t.join[r](a,l,e,t))&&1!==i;){if("number"==typeof i)return n("\n",1+Number(i));if(!1===i)return"\n\n\x3c!----\x3e\n\n"}return"\n\n"}};var n=a(260)},699:function(e,t){e.exports=function(e,t){for(var n,l=[],i=0,r=0;n=a.exec(e);)s(e.slice(i,n.index)),l.push(n[0]),i=n.index+n[0].length,r++;return s(e.slice(i)),l.join("");function s(e){l.push(t(e,r,!e))}};var a=/\r?\n|\r/g},700:function(e,t){e.exports=function e(t,a){var n,l=-1;if(a.extensions)for(;++l<a.extensions.length;)e(t,a.extensions[l]);for(n in a)"extensions"===n||("unsafe"===n||"join"===n?t[n]=t[n].concat(a[n]||[]):"handlers"===n?t[n]=Object.assign(t[n],a[n]||{}):t.options[n]=a[n]);return t}},701:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(702);case"v8light":return a(704)}},702:function(e,t,a){var n=a(372),l=a(703);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},703:function(e,t,a){(t=a(373)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}",""]),e.exports=t},704:function(e,t,a){var n=a(372),l=a(705);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},705:function(e,t,a){(t=a(373)(!1)).push([e.i,".fleet__epm__shiftNavTabs{margin-left:184px}",""]),e.exports=t},713:function(e,t,a){"use strict";a.r(t),a.d(t,"ProtectedRoute",(function(){return sa})),a.d(t,"renderApp",(function(){return ca})),a.d(t,"teardownIntegrations",(function(){return ua}));var n=a(1),l=a.n(n),i=a(35),r=a.n(i),s=a(22),o=a(266),c=a(15),u=a(20),d=a.n(u),m=a(6),g=a(709),p=a(655),f=a(7),E=a(102),h=a(32),b=a.n(h),k=a(103),v=a(61),x=a(73),y=a(114),M=a(117),j=a(116),O=a(137),C=a(264),I=a(58),w=a.n(I),F=a(4),T=a(12),P=a(23),S=a.n(P),A=a(367),L=a(5),_=a(0),z=a(142),D=a(53),N=a(134),R=a(382),B=a(255),U=a(385);const V=["apm","cloud_security_posture","cloud_defend","dga","fleet_server","osquery_manager","problemchild","security_detection_engine","synthetics"];var $=a(138),H=a(43),G=a.n(H),q=a(656),W=a.n(q);const K=(e,t,a)=>{const n=((e,t,a)=>{const n=e?Object($.safeLoad)(e):[];return a?n.filter((e=>W()(e.version,t)&&G()(e.version,a))):n.filter((e=>W()(e.version,t)))})(e,t,a);return(l=n)?l.reduce(((e,t)=>e+`Version: ${t.version}\nChanges:\n  Type: ${t.changes[0].type}\n  Description: ${t.changes[0].description}\n  Link: ${t.changes[0].link}\n\n`),""):"";var l};function Y({queryParams:e,href:t}){const{onboardingLink:a}=Object(n.useMemo)((()=>({onboardingLink:e.get("observabilityOnboardingLink")})),[e]),i=null!=a?a:t,r=a?J:X;return l.a.createElement(m.EuiButtonEmpty,{iconType:"arrowLeft",size:"xs",flush:"left",href:i},r)}const X=l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.browseAllButtonText",defaultMessage:"Back to integrations"}),J=l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.returnToObservabilityOnboarding",defaultMessage:"Back to selection"});function Q(e){const{userCanInstallPackages:t,missingSecurityConfiguration:a,packageName:n,href:i,onClick:r}=e,s=t?void 0:{content:a?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonSecurityRequiredTooltip",defaultMessage:"To add Elastic Agent Integrations, you must have security enabled and have the All privilege for Fleet. Contact your administrator."}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonPrivilegesRequiredTooltip",defaultMessage:"Elastic Agent Integrations require the All privilege for Fleet and All privilege for Integrations. Contact your administrator."})};return l.a.createElement(N.f,{fill:!0,isDisabled:!t,iconType:"plusInCircle",href:i,onClick:e=>r(e),"data-test-subj":"addIntegrationPolicyButton",tooltip:s},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.addPackagePolicyButtonText",defaultMessage:"Add {packageName}",values:{packageName:n}}))}const Z=({size:e="m"})=>l.a.createElement(m.EuiIconTip,{"aria-label":F.i18n.translate("xpack.fleet.epm.updateAvailableTooltip",{defaultMessage:"Update available"}),size:e,type:"warning",color:"warning",content:F.i18n.translate("xpack.fleet.epm.updateAvailableTooltip",{defaultMessage:"Update available"})}),ee=Object(n.memo)((({packageName:e})=>{var t;const{data:a}=Object(j.D)(e);return l.a.createElement(l.a.Fragment,null,null!==(t=null==a?void 0:a.response.agent_policy_count)&&void 0!==t?t:0)})),te=w()(m.EuiPanel).withConfig({displayName:"Panel",componentId:"sc-i62ya8-0"})(["padding:",";width:","px;svg,img{height:","px;width:","px;}.euiFlexItem{height:","px;justify-content:center;}"],(e=>e.theme.eui.euiSizeXL),(e=>6*parseFloat(e.theme.eui.euiSize)+2*parseFloat(e.theme.eui.euiSizeXL)),(e=>6*parseFloat(e.theme.eui.euiSize)),(e=>6*parseFloat(e.theme.eui.euiSize)),(e=>6*parseFloat(e.theme.eui.euiSize)));function ae({packageName:e,integrationName:t,version:a,icons:n}){const i=Object(j.R)({packageName:e,integrationName:t,version:a,icons:n});return l.a.createElement(te,null,l.a.createElement(m.EuiIcon,{type:i,size:"original"}))}function ne(){return l.a.createElement(te,null,l.a.createElement(N.k,null))}const le=({checked:e,disabled:t=!1,onChange:a})=>l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSwitch,{label:F.i18n.translate("xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateLabel",{defaultMessage:"Keep integration policies up to date automatically"}),checked:e,onChange:a,disabled:t}),l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement(m.EuiText,{color:"subdued",size:"xs"},l.a.createElement(m.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiIcon,{type:"iInCircle"})),l.a.createElement(m.EuiFlexItem,{grow:!1},t?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateDisabledDescription",defaultMessage:"This integration requires Fleet to automatically upgrade its integration policies"}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.keepIntegrationPoliciesUpToDateDescription",defaultMessage:"When enabled, Fleet will attempt to upgrade and deploy integration policies automatically"})))));var ie=a(3);const re=w()(m.EuiFlexItem).withConfig({displayName:"SideBarColumn",componentId:"sc-plv2a7-0"})(["max-width:160px;"]);var se=a(67);const oe=(e,t,a)=>e===D.a.transform?a.canReauthorizeTransforms?F.i18n.translate("xpack.fleet.epm.packageDetails.assets.deferredTransformReauthorizeDescription",{defaultMessage:"{assetCount, plural, one {Transform was installed but requires} other {# transforms were installed but require}} additional permissions to run. Reauthorize the {assetCount, plural, one {transform} other {transforms}} to start operations.",values:{assetCount:null!=t?t:1}}):F.i18n.translate("xpack.fleet.epm.packageDetails.assets.deferredTransformRequestPermissionDescription",{defaultMessage:"{assetCount, plural, one {Transform was installed but requires} other {# transforms were installed but require}} additional permissions to run. Contact your administrator to request the required privileges.",values:{assetCount:null!=t?t:1}}):F.i18n.translate("xpack.fleet.epm.packageDetails.assets.deferredInstallationsDescription",{defaultMessage:"Asset requires additional permissions."}),ce=({packageInfo:e,type:t,deferredInstallations:a,forceRefreshAssets:i})=>{var r,s,o,u,d;const{notifications:g}=Object(c.Xc)(),[p,f]=Object(n.useState)(!1),E=Object(n.useMemo)((()=>a.map((e=>({id:e.id,attributes:{title:e.id,description:e.type}})))),[a]),h=null!==(r=null===(s=Object(c.Ib)().packagePrivileges)||void 0===s||null===(o=s.transform)||void 0===o||null===(u=o.actions)||void 0===u||null===(d=u.canStartStopTransform)||void 0===d?void 0:d.executePackageAction)&&void 0!==r&&r,b=Object(n.useCallback)((async t=>{f(!0),g.toasts.addInfo(F.i18n.translate("xpack.fleet.epm.packageDetails.assets.authorizeTransformsAcknowledged",{defaultMessage:"Request to authorize {count, plural, one {# transform} other {# transforms}} acknowledged.",values:{count:t.length}}),{toastLifeTimeMs:500});try{const s=await Object(c.yb)(e.name,e.version,t);if(s.error)throw s.error;if(Array.isArray(s.data)){var a;const e=null===(a=s.data.find((e=>e.error)))||void 0===a?void 0:a.error,o=s.data.filter((e=>e.success)).length;if(e){var n,l,r;const a=null===(n=e.meta)||void 0===n?void 0:n.body,i=a?`${null===(l=a.error)||void 0===l?void 0:l.type}: ${null===(r=a.error)||void 0===r?void 0:r.reason}`:`${e.message}`;g.toasts.addError({name:i,message:i},{title:F.i18n.translate("xpack.fleet.epm.packageDetails.assets.authorizeTransformsUnsuccessful",{defaultMessage:"Unable to authorize {cntUnauthorized, plural, one {# transform} other {# transforms}}.",values:{cntUnauthorized:t.length-o}}),toastLifeTimeMs:1e3})}else g.toasts.addSuccess(F.i18n.translate("xpack.fleet.epm.packageDetails.assets.authorizeTransformsSuccessful",{defaultMessage:"Successfully authorized {count, plural, one {# transform} other {# transforms}}.",values:{count:o}}),{toastLifeTimeMs:1e3}),i&&i()}}catch(e){e&&(g.toasts.addError(e,{title:F.i18n.translate("xpack.fleet.epm.packageDetails.assets.unableToAuthorizeAllTransformsError",{defaultMessage:"An error occurred authorizing and starting transforms."})}),i&&i())}f(!1)}),[g.toasts,e.name,e.version,i]);return 0===E.length?null:l.a.createElement(m.EuiAccordion,{initialIsOpen:!0,buttonContent:l.a.createElement(m.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s",responsive:!1},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiText,{size:"m"},l.a.createElement("h3",null,se.a[t]))),l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiNotificationBadge,{color:"accent",size:"m"},l.a.createElement("h3",null,E.length)))),id:t},l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiText,null,oe(t,a.length,{canReauthorizeTransforms:h})," "),l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiButton,{"data-test-subject":"fleetAssetsReauthorizeAll",disabled:!h,isLoading:p,size:"m",onClick:e=>{e.preventDefault(),b(E.map((e=>({transformId:e.id}))))},"aria-label":oe(t,a.length,{canReauthorizeTransforms:h})},F.i18n.translate("xpack.fleet.epm.packageDetails.assets.reauthorizeAllButton",{defaultMessage:"Reauthorize all"})),l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiSplitPanel.Outer,{hasBorder:!0,hasShadow:!1},E.map((({id:e},a)=>l.a.createElement(n.Fragment,{key:e},l.a.createElement(m.EuiSplitPanel.Inner,{grow:!1,key:`${e}-${a}`},l.a.createElement(m.EuiFlexGroup,null,l.a.createElement(m.EuiFlexItem,{grow:8},l.a.createElement(m.EuiText,{size:"m"},l.a.createElement("p",null,e))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiToolTip,{content:h?void 0:oe(t,1,{canReauthorizeTransforms:h}),"data-test-subject":`fleetAssetsReauthorizeTooltip-${e}-${p}`},l.a.createElement(m.EuiButton,{isLoading:p,disabled:!h,size:"s",onClick:t=>{t.preventDefault(),b([{transformId:e}])}},F.i18n.translate("xpack.fleet.epm.packageDetails.assets.reauthorizeButton",{defaultMessage:"Reauthorize"})))))),a+1<E.length&&l.a.createElement(m.EuiHorizontalRule,{margin:"none"})))))))},ue=({deferredInstallations:e,packageInfo:t,forceRefreshAssets:a})=>{const n=Object(c.Ib)(),i=e.filter((e=>e.type===D.a.transform));return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h2",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.deferredInstallationsLabel",defaultMessage:"Deferred installations"}))),l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement(m.EuiCallOut,{size:"m",color:"warning",iconType:"alert",title:Object(B.d)(e.length,{authz:n})}),l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement(ce,{packageInfo:t,type:D.a.transform,deferredInstallations:i,forceRefreshAssets:a}))},de=({savedObjects:e,type:t})=>{const{http:a}=Object(j.V)(),i=t===D.c.dashboard;return l.a.createElement(m.EuiAccordion,{initialIsOpen:i,"data-test-subj":`fleetAssetsAccordion.button.${t}`,buttonContent:l.a.createElement(m.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s",responsive:!1},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiText,{size:"m"},l.a.createElement("h3",null,se.a[t]))),l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiNotificationBadge,{color:"subdued",size:"m"},l.a.createElement("h3",null,e.length)))),id:t},l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiSplitPanel.Outer,{hasBorder:!0,hasShadow:!1,"data-test-subj":`fleetAssetsAccordion.content.${t}`},e.map((({id:i,attributes:r,appLink:s},o)=>{const{title:c,description:u}=r||{};if("view"===t)return;const d=null!=c?c:i;return l.a.createElement(n.Fragment,{key:i},l.a.createElement(m.EuiSplitPanel.Inner,{grow:!1,key:o,"data-test-subj":`fleetAssetsAccordion.content.${t}.${d}`},l.a.createElement(m.EuiText,{size:"m"},l.a.createElement("p",null,s?l.a.createElement(m.EuiLink,{href:a.basePath.prepend(s)},d):d)),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement(m.EuiText,{size:"s",color:"subdued"},l.a.createElement("p",null,u)))),o+1<e.length&&l.a.createElement(m.EuiHorizontalRule,{margin:"none"}))})))))};function me({installInfo:e,title:t,onSuccess:a}){const{notifications:i}=Object(j.V)(),{name:r,version:s}=e,o=Object(j.k)().integrations.installPackages,{mutateAsync:c,isLoading:u}=Object(j.I)(),d=Object(n.useCallback)((async()=>{try{await c({pkgName:r,pkgVersion:s}),a&&await a()}catch(e){i.toasts.addError(e,{title:F.i18n.translate("xpack.fleet.fleetServerSetup.kibanaInstallAssetsErrorTitle",{defaultMessage:"Error installing Kibana assets"})})}}),[c,a,r,s,i.toasts]);return l.a.createElement(m.EuiButton,{disabled:!o,iconType:"importAction",isLoading:u,onClick:d},u?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.kibanaAssetsInstallingButtonLabel",defaultMessage:"Installing Kibana assets in current space",values:{title:t}}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.kibanaAssetsInstallButtonLabel",defaultMessage:"Install Kibana assets in current space",values:{title:t}}))}const ge=({packageInfo:e,refetchPackageInfo:t})=>{var a;const{name:i,version:r}=e,o=`${i}-${r}`,{docLinks:c}=Object(j.V)(),{spaceId:u}=Object(j.p)(),{useSpaceAwareness:d}=ie.b.get(),g=Object(j.W)(e.name,"package-detail-assets"),p=Object(j.k)().integrations.readPackageInfo,{getPath:f}=Object(j.N)(),E=Object(j.A)()(e.name),h="installationInfo"in e?e.installationInfo:void 0,b=null==h?void 0:h.installed_kibana_space_id,k=!b||b===u||(null==h||null===(a=h.additional_spaces_installed_kibana)||void 0===a?void 0:a[u||"default"]),[v,x]=Object(n.useState)({}),[y,M]=Object(n.useState)(),O=Object(n.useMemo)((()=>{var e;return b&&b!==u?(null==h||null===(e=h.additional_spaces_installed_kibana)||void 0===e?void 0:e[u||"default"])||[]:(null==h?void 0:h.installed_kibana)||[]}),[b,u,null==h?void 0:h.installed_kibana,null==h?void 0:h.additional_spaces_installed_kibana]),C=Object(n.useMemo)((()=>[...O,...(null==h?void 0:h.installed_es)||[]]),[O,null==h?void 0:h.installed_es]),I=Object(n.useMemo)((()=>C.reduce(((e,t)=>(!e[t.type]&&_.Nb.includes(t.type)&&(e[t.type]=[]),e[t.type].push(t),e)),{})),[C]),[w,F]=Object(n.useState)(),[P,S]=Object(n.useState)(!0),A=Object(n.useCallback)((()=>{t&&t()}),[t]);if(Object(n.useEffect)((()=>{(async()=>{if(h)if(0!==C.length){if(C.length>0){const e=C.filter((e=>"deferred"in e&&!0===e.deferred));M(e)}try{const e=C.map((({id:e,type:t})=>({id:e,type:t}))),{data:t,error:a}=await Object(j.h)({assetIds:e});a?F(a):x(((null==t?void 0:t.items)||[]).reduce(((e,t)=>(e[t.type]||(e[t.type]={}),e[t.type][t.id]=t,e)),{}))}catch(e){F(e)}finally{S(!1)}}else S(!1);else S(!1)})()}),[e,C,h]),E.status!==D.b.installed)return l.a.createElement(s.Redirect,{to:f("integration_details_overview",{pkgkey:o})});const L=Array.isArray(y)&&y.length>0;let z;z=P?l.a.createElement(N.k,null):p?0===C.length?g?l.a.createElement(N.g,null,l.a.createElement(g.Component,null),l.a.createElement(m.EuiSpacer,{size:"l"})):L?null:l.a.createElement(m.EuiTitle,null,l.a.createElement("h2",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.noAssetsFoundLabel",defaultMessage:"No assets found"}))):[k?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiCallOut,{heading:"h2",title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsNotAvailableInCurrentSpaceTitle",defaultMessage:"Kibana assets not available in this space"})},l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsNotAvailableInCurrentSpaceBody",defaultMessage:"This integration is installed, but Kibana assets are not available in this space. {learnMoreLink}.",values:{learnMoreLink:l.a.createElement(m.EuiLink,{href:c.links.fleet.installAndUninstallIntegrationAssets,external:!0},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsNotAvailableInCurrentSpace.learnMore",defaultMessage:"Learn more"}))}})),d?l.a.createElement(me,{installInfo:h,title:e.title,onSuccess:A}):null),l.a.createElement(m.EuiSpacer,{size:"m"})),g?l.a.createElement(N.g,null,l.a.createElement(g.Component,null),l.a.createElement(m.EuiSpacer,{size:"l"})):null,..._.Nb.map((e=>{const t=I[e]||[],a=v[e]||{},i=t.map((e=>({...e,...a[e.id]})));return i.length?l.a.createElement(n.Fragment,{key:e},l.a.createElement(de,{savedObjects:i,type:e,key:e}),l.a.createElement(m.EuiSpacer,{size:"l"})):null}))]:l.a.createElement(m.EuiCallOut,{color:"warning",title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsPermissionErrorTitle",defaultMessage:"Permission error"})},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.assetsPermissionError",defaultMessage:"You do not have permission to retrieve the Kibana saved object for that integration. Contact your administrator."}));const R=L?l.a.createElement(l.a.Fragment,null,l.a.createElement(ue,{deferredInstallations:y,packageInfo:e,forceRefreshAssets:A}),l.a.createElement(m.EuiSpacer,{size:"m"})):null;return l.a.createElement(m.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(re,{grow:1}),l.a.createElement(m.EuiFlexItem,{grow:7},w&&l.a.createElement(l.a.Fragment,null,l.a.createElement(N.e,{title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.assets.fetchAssetsErrorTitle",defaultMessage:"Error loading complete asset information"}),error:w}),l.a.createElement(m.EuiSpacer,{size:"m"})),R,z))};var pe=a(259),fe=a(667),Ee=a.n(fe),he=a(8);const be=({onDismiss:e})=>{const{docLinks:t}=Object(v.useKibana)().services,{euiTheme:a}=Object(m.useEuiTheme)(),n=F.i18n.translate("avcBanner.title",{defaultMessage:"100% protection with zero false positives."}),l=Object(pe.css)({paddingLeft:`${a.size.xl}`,backgroundImage:`url(${Ee.a})`,backgroundRepeat:"no-repeat",backgroundPositionX:"right",backgroundPositionY:"bottom"},"","");return Object(he.jsx)(m.EuiCallOut,{title:n,color:"success",iconType:"cheer",onDismiss:e,className:l,"data-test-subj":"avcResultsBanner"},Object(he.jsx)(T.FormattedMessage,{id:"avcBanner.body",defaultMessage:"Elastic Security shines in Malware Protection Test by AV-Comparatives"}),Object(he.jsx)(m.EuiSpacer,{size:"s"}),Object(he.jsx)(m.EuiButton,{size:"s",color:"success",href:null==t?void 0:t.links.securitySolution.avcResults,target:"_blank","data-test-subj":"avcReadTheBlog"},Object(he.jsx)(T.FormattedMessage,{id:"avcBanner.readTheBlog.link",defaultMessage:"Read the blog"})))},ke=w()(m.EuiPagination).withConfig({displayName:"Pagination",componentId:"sc-4eq3x5-0"})(["max-width:130px;"]),ve=Object(n.memo)((({images:e,packageName:t,version:a})=>{const{toPackageImage:i}=Object(j.O)(),[r,s]=Object(n.useState)(0),o=Object(n.useMemo)((()=>e.length-1),[e.length]),c=Object(n.useMemo)((()=>i(e[r],t,a)),[r,e,t,i,a]);return l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween"},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiText,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.screenshotsTitle",defaultMessage:"Screenshots"})))),l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(ke,{"aria-label":F.i18n.translate("xpack.fleet.epm.screenshotPaginationAriaLabel",{defaultMessage:"{packageName} screenshot pagination",values:{packageName:t}}),pageCount:o+1,activePage:r,onPageClick:e=>s(e),compressed:!0})))),l.a.createElement(m.EuiFlexItem,null,c?l.a.createElement(m.EuiImage,{allowFullScreen:!0,hasShadow:!0,alt:e[r].title||F.i18n.translate("xpack.fleet.epm.screenshotAltText",{defaultMessage:"{packageName} screenshot #{imageNumber}",values:{packageName:t,imageNumber:r+1}}),title:e[r].title,url:c}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.screenshotErrorText",defaultMessage:"Unable to load this screenshot"})))}));var xe=a(187),ye=a.n(xe),Me=a(668),je=a.n(Me);const Oe={$json:"json",$yml:"yml"},Ce=w.a.h3.withConfig({displayName:"StyledH3",componentId:"sc-tuif3t-0"})(["scroll-margin-top:105px;"]),Ie=w.a.h4.withConfig({displayName:"StyledH4",componentId:"sc-tuif3t-1"})(["scroll-margin-top:105px;"]),we=w.a.h5.withConfig({displayName:"StyledH5",componentId:"sc-tuif3t-2"})(["scroll-margin-top:105px;"]),Fe=w.a.h5.withConfig({displayName:"StyledH6",componentId:"sc-tuif3t-3"})(["scroll-margin-top:105px;"]),Te=e=>({table:({children:e})=>l.a.createElement(m.EuiTable,null,e),tr:({children:e})=>l.a.createElement(m.EuiTableRow,null,e),th:({children:e})=>l.a.createElement(m.EuiTableHeaderCell,null,e),td:({children:e})=>l.a.createElement(m.EuiTableRowCell,null,e),h1:({children:t,node:a})=>{var n,i;const r=Ge(null===(n=t[0])||void 0===n?void 0:n.toString(),null===(i=a.position)||void 0===i?void 0:i.start.line);return l.a.createElement(Ce,{ref:t=>e.current.set(`${r}`,t)},t)},h2:({children:t,node:a})=>{var n,i;const r=Ge(null===(n=t[0])||void 0===n?void 0:n.toString(),null===(i=a.position)||void 0===i?void 0:i.start.line);return l.a.createElement(Ie,{ref:t=>e.current.set(`${r}`,t)},t)},h3:({children:t,node:a})=>{var n,i;const r=Ge(null===(n=t[0])||void 0===n?void 0:n.toString(),null===(i=a.position)||void 0===i?void 0:i.start.line);return l.a.createElement(we,{ref:t=>e.current.set(`${r}`,t)},t)},h4:({children:t,node:a})=>{var n,i;const r=Ge(null===(n=t[0])||void 0===n?void 0:n.toString(),null===(i=a.position)||void 0===i?void 0:i.start.line);return l.a.createElement(Fe,{ref:t=>e.current.set(`${r}`,t)},t)},h5:({children:e})=>l.a.createElement("h6",null,e),h6:({children:e})=>l.a.createElement("h6",null,e),link:({children:e,href:t})=>l.a.createElement(m.EuiLink,{href:t,target:"_blank",rel:"noopener nofollow noreferrer"},e),code:({className:e,children:t,inline:a})=>{var n,i;let r=null!==(n=null===(i=/language-(\w+)/.exec(e||""))||void 0===i?void 0:i[1])&&void 0!==n?n:"";const s=r?Oe[r]:void 0;return s&&(r=s),a?l.a.createElement(m.EuiCode,null,t):l.a.createElement(m.EuiCodeBlock,{language:r,overflowHeight:500,isCopyable:!0},t)},img:e=>l.a.createElement("img",d()({style:{maxWidth:"100%"}},e,{alt:e.alt}))});function Pe({packageName:e,version:t,markdown:a,refs:n}){const{toRelativeImage:i}=Object(j.O)(),r=l.a.useCallback((a=>0!==a.indexOf("http://")&&0!==a.indexOf("https://")?i({packageName:e,version:t,path:a}):a),[i,e,t]);return l.a.createElement(l.a.Fragment,null,void 0!==a?l.a.createElement(m.EuiText,{grow:!0},l.a.createElement(ye.a,{transformImageUri:r,components:Te(n),remarkPlugins:[je.a]},a)):l.a.createElement(m.EuiText,null,l.a.createElement(m.EuiSkeletonText,{lines:5}),l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiSkeletonText,{lines:6}),l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiSkeletonText,{lines:4})))}var Se=a(107),Ae=a(13);const Le=({latestVersion:e,currentVersion:t,packageName:a,onClose:n})=>{const{notifications:i}=Object(j.V)(),{data:r,error:s,isLoading:o}=Object(j.v)(`/package/${a}/${e}/changelog.yml`),c=null==r?void 0:r.data,u=t?K(c,e,t):K(c,e);return s&&i.toasts.addError(s,{title:F.i18n.translate("xpack.fleet.epm.errorLoadingChangelog",{defaultMessage:"Error loading changelog information"})}),l.a.createElement(m.EuiModal,{maxWidth:!0,onClose:n,"data-test-subj":"integrations.changelogModal"},l.a.createElement(m.EuiModalHeader,null,l.a.createElement(m.EuiModalHeaderTitle,null,"Changelog")),l.a.createElement(m.EuiModalBody,null,l.a.createElement(m.EuiSkeletonText,{lines:10,size:"s",isLoading:o,contentAriaLabel:"changelog text"},l.a.createElement(m.EuiCodeBlock,{overflowHeight:360},u))),l.a.createElement(m.EuiModalFooter,null,l.a.createElement(m.EuiButton,{color:"primary",fill:!0,onClick:n},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.changelogModalCloseBtn",defaultMessage:"Close"}))))},_e=({noticePath:e,onClose:t})=>{const{notifications:a}=Object(j.V)(),[i,r]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{!async function(){try{const{data:t}=await Object(j.i)(e);r(t||"")}catch(e){a.toasts.addError(e,{title:F.i18n.translate("xpack.fleet.epm.errorLoadingNotice",{defaultMessage:"Error loading NOTICE.txt"})})}}()}),[e,a]),l.a.createElement(m.EuiModal,{maxWidth:!0,onClose:t},l.a.createElement(m.EuiModalHeader,null,l.a.createElement(m.EuiModalHeaderTitle,null,"NOTICE.txt")),l.a.createElement(m.EuiModalBody,null,l.a.createElement(m.EuiCodeBlock,{overflowHeight:360},i||l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement(m.EuiSkeletonText,{lines:5})),l.a.createElement("p",null,l.a.createElement(m.EuiSkeletonText,{lines:6}))))),l.a.createElement(m.EuiModalFooter,null,l.a.createElement(m.EuiButton,{color:"primary",fill:!0,onClick:t},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.noticeModalCloseBtn",defaultMessage:"Close"}))))},ze=({licenseName:e="LICENSE.txt",licensePath:t,onClose:a})=>{const{notifications:n}=Object(j.V)(),{data:i,error:r,isLoading:s}=Object(j.v)(t),o=null==i?void 0:i.data;return r&&n.toasts.addError(r,{title:F.i18n.translate("xpack.fleet.epm.errorLoadingLicense",{defaultMessage:"Error loading license information"})}),l.a.createElement(m.EuiModal,{maxWidth:!0,onClose:a},l.a.createElement(m.EuiModalHeader,null,l.a.createElement(m.EuiModalHeaderTitle,null,e)),l.a.createElement(m.EuiModalBody,null,l.a.createElement(m.EuiSkeletonText,{lines:10,size:"s",isLoading:s,contentAriaLabel:"License text"},l.a.createElement(m.EuiCodeBlock,{overflowHeight:360},o))),l.a.createElement(m.EuiModalFooter,null,l.a.createElement(m.EuiButton,{color:"primary",fill:!0,onClick:a},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.licenseModalCloseBtn",defaultMessage:"Close"}))))},De=Object(Se.withSuspense)(Se.LazyReplacementCard),Ne=Object(k.euiStyled)(m.EuiFlexItem)`
  margin: 0;

  & .euiAccordion {
    padding-top: ${({theme:e})=>2*parseInt(e.eui.euiSizeL,10)}px;

    &::before {
      content: '';
      display: block;
      border-top: 1px solid ${({theme:e})=>e.eui.euiColorLightShade};
      position: relative;
      top: -${({theme:e})=>e.eui.euiSizeL};
      margin: 0 ${({theme:e})=>e.eui.euiSizeXS};
    }
  }
`,Re=Object(n.memo)((({packageInfo:e,integrationInfo:t})=>{var a,i,r,s;const{data:o,isLoading:c}=Object(j.u)(),u=Object(n.useMemo)((()=>{let a=[];return null!=e&&e.categories&&(a=e.categories),null!=t&&t.categories&&(a=Object(Ae.uniq)([...a,...(null==t?void 0:t.categories)||[]])),a}),[t,null==e?void 0:e.categories]),d=Object(n.useMemo)((()=>!c&&null!=o&&o.items?o.items.filter((e=>null==u?void 0:u.includes(e.id))).map((e=>e.title)):[]),[o,c,u]),[g,p]=Object(n.useState)(!1),f=Object(n.useCallback)((()=>{p((e=>!e))}),[]),[E,h]=Object(n.useState)(!1),b=Object(n.useCallback)((()=>{h((e=>!e))}),[]),[k,v]=Object(n.useState)(!1),x=Object(n.useCallback)((()=>{v((e=>!e))}),[]),y=Object(n.useMemo)((()=>{var t,a,n,i;const r=[{title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.versionLabel",defaultMessage:"Version"})),description:e.version},{title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.categoryLabel",defaultMessage:"Category"})),description:d.join(", ")}];Object(D.d)(e.assets).forEach((([e,t])=>{const a=Object(D.d)(t).reduce(((t,[a,n])=>(se.b[e].includes(a)&&(t[a]=n),t)),{});Object.entries(a).length&&r.push({title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.assetGroupTitle",defaultMessage:"{assetType} assets",values:{assetType:se.c[e]}})),description:l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(D.d)(a).map((([e,t],a)=>{const n=e;return l.a.createElement(m.EuiFlexItem,{key:`item-${a}`},l.a.createElement(m.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},l.a.createElement(m.EuiFlexItem,{grow:!1},se.a[n]),l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiNotificationBadge,{color:"subdued"},t.length))))})))})}));const s=[...new Set((null===(t=e.data_streams)||void 0===t?void 0:t.map((e=>e.type)))||[])];let o;switch(s.length&&r.push({title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.featuresLabel",defaultMessage:"Features"})),description:s.join(", ")}),r.push({title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.subscriptionLabel",defaultMessage:"Subscription"})),description:l.a.createElement("p",null,(null===(a=e.conditions)||void 0===a||null===(n=a.elastic)||void 0===n?void 0:n.subscription)||e.license||"-")}),e.owner.type){case"community":o=l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.ownerTypeCommunityDescription",defaultMessage:"Community"});break;case"partner":o=l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.ownerTypePartnerDescription",defaultMessage:"Partner"});break;case"elastic":o=l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.ownerTypeElasticDescription",defaultMessage:"Elastic"})}var c,u;return o&&r.push({title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.ownerTypeLabel",defaultMessage:"Developed by"})),description:o}),(e.licensePath||null!==(i=e.source)&&void 0!==i&&i.license||e.notice)&&r.push({title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.licenseLabel",defaultMessage:"License"})),description:l.a.createElement(l.a.Fragment,null,e.licensePath?l.a.createElement("p",null,l.a.createElement(m.EuiLink,{onClick:b},(null===(c=e.source)||void 0===c?void 0:c.license)||"LICENSE.txt")):l.a.createElement("p",null,(null===(u=e.source)||void 0===u?void 0:u.license)||"-"),e.notice&&l.a.createElement("p",null,l.a.createElement(m.EuiLink,{onClick:f},"NOTICE.txt")))}),r.push({title:l.a.createElement(m.EuiTextColor,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.changelogLabel",defaultMessage:"Changelog"})),description:l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement(m.EuiLink,{onClick:x},"View Changelog")))}),r}),[d,e.assets,null===(a=e.conditions)||void 0===a||null===(i=a.elastic)||void 0===i?void 0:i.subscription,e.data_streams,e.license,e.licensePath,e.notice,null===(r=e.source)||void 0===r?void 0:r.license,e.owner.type,e.version,b,f,x]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiPortal,null,g&&e.notice&&l.a.createElement(_e,{noticePath:e.notice,onClose:f})),l.a.createElement(m.EuiPortal,null,E&&e.licensePath&&l.a.createElement(ze,{licenseName:null===(s=e.source)||void 0===s?void 0:s.license,licensePath:e.licensePath,onClose:b})),l.a.createElement(m.EuiPortal,null,k&&l.a.createElement(Le,{latestVersion:e.version,packageName:e.name,onClose:x})),l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiText,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.detailsTitle",defaultMessage:"Details"})))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiDescriptionList,{type:"column",compressed:!0,listItems:y})),l.a.createElement(Ne,null,l.a.createElement(De,{eprPackageName:e.name}))))})),Be=Object(n.memo)((()=>{const{docLinks:e}=Object(j.V)();return l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"s"},l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween"},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiText,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.requirementsTitle",defaultMessage:"Requirements"})))))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiDescriptionList,{type:"column",compressed:!0,listItems:[{title:F.i18n.translate("xpack.fleet.epm.requirements.permissionLabel",{defaultMessage:"Permissions"}),description:l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiToolTip,{content:F.i18n.translate("xpack.fleet.epm.requirements.permissionRequireRootTooltip",{defaultMessage:"Elastic agent needs to be run with root or administrator privileges"})},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.requirements.permissionRequireRootMessage",defaultMessage:"{guideLink}",values:{guideLink:l.a.createElement(m.EuiLink,{href:e.links.fleet.unprivilegedMode,target:"_blank",external:!0},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.permissionRequireRootMessage.guideLink",defaultMessage:"Root privileges"}))}})))}]})))})),Ue=w()(re).withConfig({displayName:"SideBar",componentId:"sc-tpxlwm-0"})(["position:sticky;top:70px;padding-top:50px;padding-left:10px;text-overflow:ellipsis;max-height:500px;"]),Ve=w()(m.EuiSideNav).withConfig({displayName:"StyledSideNav",componentId:"sc-tpxlwm-1"})(["overflow-y:auto;overflow-x:hidden;"]),$e=()=>{const{docLinks:e}=Object(c.Xc)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiCallOut,{title:F.i18n.translate("xpack.fleet.epm.verificationWarningCalloutTitle",{defaultMessage:"Integration not verified"}),iconType:"warning",color:"warning"},l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.verificationWarningCalloutIntroText",defaultMessage:"This integration contains an unsigned package of unknown authenticity. Learn more about {learnMoreLink}.",values:{learnMoreLink:l.a.createElement(m.EuiLink,{target:"_blank",external:!0,href:e.links.fleet.packageSignatures},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.verificationWarningCalloutLearnMoreLink",defaultMessage:"package signatures"}))}}))),l.a.createElement(m.EuiSpacer,{size:"l"}))},He=({packageName:e,packageTitle:t,latestGAVersion:a})=>{const{getHref:n}=Object(c.Kc)(),i=n("integration_details_overview",{pkgkey:`${e}-${a}`});return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiCallOut,{"data-test-subj":"prereleaseCallout",title:F.i18n.translate("xpack.fleet.epm.prereleaseWarningCalloutTitle",{defaultMessage:"This is a pre-release version of {packageTitle} integration.",values:{packageTitle:t}}),iconType:"iInCircle",color:"warning"},a&&l.a.createElement("p",null,l.a.createElement(m.EuiButton,{href:i,color:"warning","data-test-subj":"switchToGABtn"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.prereleaseWarningCalloutSwitchToGAButton",defaultMessage:"Switch to latest GA version"})))),l.a.createElement(m.EuiSpacer,{size:"l"}))},Ge=(e,t)=>{if(!e)return"";const a=`${e.replaceAll(" ","-").toLowerCase().slice(0,12)}`;return t?`${a}-${t}`:a},qe=Object(n.memo)((({packageInfo:e,integrationInfo:t,latestGAVersion:a})=>{var i;const r=Object(n.useMemo)((()=>(null==t?void 0:t.screenshots)||e.screenshots||[]),[t,e.screenshots]),{storage:s}=Object(v.useKibana)().services,{packageVerificationKeyId:o}=Object(c.vc)(),u=Object(ie.r)(e,o),d=Object(L.Y)(e.version),g="endpoint"===e.name,[p,f]=Object(n.useState)(void 0),[E,h]=Object(n.useState)(void 0),[b,k]=Object(n.useState)(!1),x=Object(n.useRef)(new Map),y=e=>{var t;h(e),null===(t=x.current.get(e))||void 0===t||t.scrollIntoView({behavior:"smooth"})},M=t&&Object(L.W)(t)&&null!=t&&t.readme?null==t?void 0:t.readme:e.readme||"";Object(n.useEffect)((()=>{Object(c.L)(M).then((e=>{f(e.data||"")}))}),[M]);const j=e=>e.replace(/^#+\s*/,""),O=Object(n.useCallback)(((e,t={})=>{const a=j(e.line),n=Ge(a,e.position+1);return{id:n,name:a,isSelected:E===n,onClick:()=>y(n),...t,renderItem:""===a?()=>null:void 0}}),[E]),C=Object(n.useCallback)((e=>{const t={forceOpen:!0};return e.reduce(((a,n,l)=>{if(n.line.startsWith("## ")){const e=O(n,t);a.push(e)}else if(n.line.startsWith("### ")){const m=O(n,t);let g=l+1;for(;g<e.length&&e[g].line.startsWith("#### ");){var i;const a=O(e[g],t);null!=m&&m.items||(m.items=[]),null===(i=m.items)||void 0===i||i.push(a),g++}const p=a.length-1;if(p>=0){var r,s,o;null!==(r=a[p])&&void 0!==r&&r.items||(a[p].items=[]),null===(s=a[p])||void 0===s||null===(o=s.items)||void 0===o||o.push(m)}else{var c,u,d;const e=O({line:"",position:n.position},t);a.push(e),null!==(c=a[0])&&void 0!==c&&c.items||(a[0].items=[]),null===(u=a[0])||void 0===u||null===(d=u.items)||void 0===d||d.push(m)}}return a}),[])}),[O]),I=Object(n.useMemo)((()=>(e=>{if(!e)return[];const t=/^\s*#+\s+(.+)/;return e.split("\n").map(((e,t)=>({line:e,position:t}))).filter((e=>e.line.match(t)))})(p)),[p]),w=Object(n.useMemo)((()=>C(I)),[C,I]),F=Object(n.useMemo)((()=>I.find((e=>e.line.startsWith("# ")))),[I]),T=Object(n.useMemo)((()=>{const e=`${F?j(F.line):""}`,t=Ge(e,F?(null==F?void 0:F.position)+1:1);return[{name:e,id:t,onClick:()=>y(t),items:w}]}),[F,w]),P=Object(L.Z)(e),[S,A]=Object(n.useState)(null===(i=s.get("securitySolution.showAvcBanner"))||void 0===i||i),_=Object(n.useCallback)((()=>{A(!1),s.set("securitySolution.showAvcBanner",!1)}),[s]);return l.a.createElement(m.EuiFlexGroup,{alignItems:"flexStart","data-test-subj":"epm.OverviewPage"},l.a.createElement(Ue,{grow:2},T?l.a.createElement(Ve,{mobileTitle:"Nav Items",toggleOpenOnMobile:()=>{k(!b)},isOpenOnMobile:b,items:T}):null),l.a.createElement(m.EuiFlexItem,{grow:9,className:"eui-textBreakWord"},u&&l.a.createElement($e,null),g&&S&&l.a.createElement(l.a.Fragment,null,l.a.createElement(be,{onDismiss:_}),l.a.createElement(m.EuiSpacer,{size:"s"})),d&&l.a.createElement(He,{packageName:e.name,packageTitle:e.title,latestGAVersion:a}),e.readme?l.a.createElement(Pe,{markdown:p,packageName:e.name,version:e.version,refs:x}):null),l.a.createElement(m.EuiFlexItem,{grow:3},l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"l",alignItems:"flexStart"},P?l.a.createElement(m.EuiFlexItem,null,l.a.createElement(Be,null)):null,r.length?l.a.createElement(m.EuiFlexItem,null,l.a.createElement(ve,{images:r,packageName:e.name,version:e.version})):null,l.a.createElement(m.EuiFlexItem,{className:"eui-textBreakWord"},l.a.createElement(Re,{packageInfo:e,integrationInfo:t})))))}));var We=a(29);const Ke=({onAddAgent:e,canAddAgents:t})=>l.a.createElement(m.EuiButton,{iconType:"plusInCircle","data-test-subj":"addAgentButton",onClick:e,size:"s",isDisabled:!t},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.addAgent",defaultMessage:"Add agent"})),Ye=({onAddAgent:e,canAddAgents:t})=>{const[a,i]=Object(n.useState)(!0),r=l.a.createElement(Ke,{onAddAgent:()=>{i(!1),e()},canAddAgents:t});return l.a.createElement(N.a,{button:r,isOpen:a,closePopover:()=>i(!1)})},Xe=({agentPolicy:e,agentCount:t=0,onAddAgent:a,hasHelpPopover:n=!1,canAddAgents:i})=>t>0||e.is_managed?l.a.createElement(N.j,{count:t,agentPolicyId:e.id,className:"eui-textTruncate"}):n&&i?l.a.createElement(Ye,{onAddAgent:a,canAddAgents:i}):l.a.createElement(Ke,{onAddAgent:a,canAddAgents:i}),Je={minWidth:0},Qe=Object(n.memo)((({name:e,className:t,"data-test-subj":a,title:i,...r})=>{const s=Object(n.useCallback)((e=>{if(a)return`${a}-${e}`}),[a]);return l.a.createElement(m.EuiFlexGroup,{gutterSize:"s",alignItems:"baseline",style:Je,className:t,"data-test-subj":a,title:i,responsive:!1},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiAvatar,d()({name:e,"data-test-subj":s("avatar")},r))),l.a.createElement(m.EuiFlexItem,{grow:!1,className:"eui-textTruncate"},l.a.createElement(m.EuiText,{size:"s",className:"eui-textTruncate","data-test-subj":s("name")},e)))})),Ze=Object(n.memo)((({packagePolicy:e})=>{const{getHref:t}=Object(j.N)();return l.a.createElement(m.EuiLink,{className:"eui-textTruncate","data-test-subj":"integrationNameLink",title:e.name,href:t("integration_policy_edit",{packagePolicyId:e.id})},e.name)})),et=()=>l.a.createElement(m.EuiText,{color:"subdued",size:"xs",className:"eui-textNoWrap"},l.a.createElement(m.EuiIcon,{size:"m",type:"warning",color:"warning"})," ",l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.agentPolicyDeletedWarning",defaultMessage:"Policy not found"})),tt=({name:e,version:t})=>{var a,i,r,o;const{search:c}=Object(s.useLocation)(),u=Object(s.useHistory)(),d=Object(n.useMemo)((()=>new URLSearchParams(c)),[c]),g=Object(n.useMemo)((()=>d.get("addAgentToPolicyId")),[d]),p=Object(n.useMemo)((()=>d.get("showAddAgentHelpForPolicyId")),[d]),[f,E]=Object(n.useState)(g),{getPath:h,getHref:b}=Object(j.N)(),k=Object(j.A)()(e),{pagination:v,pageSizeOptions:x,setPagination:y}=Object(j.bb)(),{canUseMultipleAgentPolicies:M}=Object(j.Q)(),{data:C,isLoading:I,resendRequest:w}=(e=>{const{data:t,error:a,isLoading:l,resendRequest:i}=Object(j.B)(e),r=Object(n.useMemo)((()=>null!=t&&t.items.length?Array.from(new Set(t.items.flatMap((e=>e.policy_ids))).values()):[]),[t]),{data:s,isLoading:o}=Object(j.n)({path:z.b.getBulkGetPath(),method:"post",body:{ids:r,full:!0,ignoreMissing:!0},version:_.o.public.v1,shouldSendRequest:r.length>0}),[c,u]=Object(n.useState)();return Object(n.useEffect)((()=>{if(l||o)return;if(null==t||!t.items)return void u(void 0);const e={};if(null!=s&&s.items)for(const t of s.items)e[t.id]=t;const a=t.items.map((t=>({packagePolicy:t,agentPolicies:t.policy_ids.map((t=>e[t])).filter((e=>!!e))})));u({...t,items:a})}),[o,l,t,s]),{data:c,error:a,isLoading:l||o,resendRequest:i}})({page:v.currentPage,perPage:v.pageSize,kuery:`${O.g}.package.name: ${e}`}),{isPackagePolicyUpgradable:P}=Object(j.M)(),S=Object(j.k)().integrations.writeIntegrationPolicies,A=Object(j.k)().integrations.readIntegrationPolicies,R=Object(j.k)().fleet.addAgents,B=Object(j.k)().fleet.addFleetServers,U=Object(j.k)().fleet.readAgentPolicies,V=Object(n.useMemo)((()=>{if(null==C||!C.items)return[];const e=C.items.map((({agentPolicies:e,packagePolicy:t})=>{const a=P(t);return{agentPolicies:e,packagePolicy:{...t,hasUpgrade:a}}}));return e}),[null==C?void 0:C.items,P]),$=null===(a=V.find((({agentPolicies:e})=>e.find((e=>e.id===p)))))||void 0===a||null===(i=a.packagePolicy)||void 0===i?void 0:i.id;Object(n.useEffect)((()=>{const e=u.listen((e=>{const t=new URLSearchParams(e.search).get("addAgentToPolicyId");t&&E(t)}));return()=>e()}),[u]);const H=Object(n.useCallback)((({page:e})=>{y({currentPage:e.index+1,pageSize:e.size})}),[y]),G=M&&A&&U,q=Object(n.useMemo)((()=>[{field:"packagePolicy.name",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.name",{defaultMessage:"Integration policy"}),render:(e,{packagePolicy:t})=>l.a.createElement(Ze,{packagePolicy:t})},{field:"packagePolicy.package.version",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.version",{defaultMessage:"Version"}),render:(e,{agentPolicies:t,packagePolicy:a})=>l.a.createElement(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiText,{size:"s",className:"eui-textNoWrap","data-test-subj":"packageVersionText"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.packageVersion",defaultMessage:"v{version}",values:{version:e}}))),t.length>0&&a.hasUpgrade&&l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiButton,{size:"s",minWidth:"0",href:`${b("upgrade_package_policy",{policyId:t[0].id,packagePolicyId:a.id})}?from=integrations-policy-list`,"data-test-subj":"integrationPolicyUpgradeBtn",isDisabled:!S},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.policyDetails.packagePoliciesTable.upgradeButton",defaultMessage:"Upgrade"}))))},{field:"packagePolicy.policy_ids",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.agentPolicy",{defaultMessage:"Agent policy"}),truncateText:!0,render:(e,{agentPolicies:t,packagePolicy:a})=>t.length>0?G?l.a.createElement(N.l,{policies:t,packagePolicyId:a.id,onAgentPoliciesChange:w}):l.a.createElement(N.c,{policy:t[0]}):l.a.createElement(et,null)},{field:"packagePolicy.updated_by",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.updatedBy",{defaultMessage:"Last updated by"}),truncateText:!0,render:e=>l.a.createElement(Qe,{size:"s",name:e,title:e})},{field:"packagePolicy.updated_at",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.updatedAt",{defaultMessage:"Last updated"}),truncateText:!0,render:e=>l.a.createElement("span",{className:"eui-textTruncate",title:e},l.a.createElement(T.FormattedRelative,{value:e}))},{field:"",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.agentCount",{defaultMessage:"Agents"}),render({agentPolicies:e,packagePolicy:t}){if(0===e.length)return null;const a=e[0],n=Object(L.ib)(a)?B:R;return l.a.createElement(Xe,{agentPolicy:a,agentCount:a.agents,onAddAgent:()=>E(a.id),canAddAgents:n,hasHelpPopover:$===t.id})}},{field:"",name:F.i18n.translate("xpack.fleet.epm.packageDetails.integrationList.actions",{defaultMessage:"Actions"}),width:"8ch",align:"right",render({agentPolicies:e,packagePolicy:t}){const a=e[0];return l.a.createElement(N.m,{agentPolicies:e,packagePolicy:t,showAddAgent:!0,upgradePackagePolicyHref:a?`${b("upgrade_package_policy",{policyId:a.id,packagePolicyId:t.id})}?from=integrations-policy-list`:void 0})}}]),[b,S,G,B,R,$,w]),W=Object(n.useMemo)((()=>I?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.integrationList.loadingPoliciesMessage",defaultMessage:"Loading integration policies…"}):void 0),[I]),K=Object(n.useMemo)((()=>{var e;return{pageIndex:v.currentPage-1,pageSize:v.pageSize,totalItemCount:null!==(e=null==C?void 0:C.total)&&void 0!==e?e:0,pageSizeOptions:x}}),[null==C?void 0:C.total,x,v.currentPage,v.pageSize]);if(k.status!==D.b.installed&&!f)return l.a.createElement(s.Redirect,{to:h("integration_details_overview",{pkgkey:`${e}-${t}`})});const Y=V.find((({agentPolicies:e})=>e.find((e=>e.id===f)))),X=null==Y?void 0:Y.agentPolicies,J=null==Y?void 0:Y.packagePolicy;return l.a.createElement(j.b.Provider,{value:{refresh:w}},l.a.createElement(m.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(re,{grow:1}),l.a.createElement(m.EuiFlexItem,{grow:7},l.a.createElement(m.EuiBasicTable,{items:V||[],columns:q,loading:I,"data-test-subj":"integrationPolicyTable",pagination:K,onChange:H,noItemsMessage:W}))),f&&X&&!I&&l.a.createElement(N.b,{onClose:()=>{E(null);const{addAgentToPolicyId:e,...t}=Object(We.parse)(c);u.replace({search:Object(We.stringify)(t)})},agentPolicy:X[0],isIntegrationFlow:!0,installedPackagePolicy:{name:(null==J||null===(r=J.package)||void 0===r?void 0:r.name)||"",version:(null==J||null===(o=J.package)||void 0===o?void 0:o.version)||""}}))};var at=a(371);const nt=e=>{const{onCancel:t,onConfirm:a,packageName:n,numOfAssets:i}=e;return l.a.createElement(m.EuiConfirmModal,{title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installTitle",defaultMessage:"Install {packageName}",values:{packageName:n}}),onCancel:t,onConfirm:a,cancelButtonText:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installButtonLabel",defaultMessage:"Install {packageName}",values:{packageName:n}}),defaultFocusedButton:"confirm"},l.a.createElement(m.EuiCallOut,{iconType:"iInCircle",title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installCalloutTitle",defaultMessage:"This action will install {numOfAssets} assets",values:{numOfAssets:i}})}),l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmInstallModal.installDescription",defaultMessage:"Kibana assets will be installed in the current Space (Default) and will only be accessible to users who have permission to view this Space. Elasticsearch assets are installed globally and will be accessible to all Kibana users."})))};function lt(e){const{name:t,numOfAssets:a,title:i,version:r}=e,s=Object(j.k)().integrations.installPackages,o=Object(j.J)(),c=Object(j.A)(),{status:u}=c(t),d=u===D.b.installing,[g,p]=Object(n.useState)(!1),f=Object(n.useCallback)((()=>{p(!g)}),[g]),E=Object(n.useCallback)((()=>{o({name:t,version:r,title:i}),f()}),[o,t,i,f,r]),h=l.a.createElement(nt,{numOfAssets:a,packageName:i,onCancel:f,onConfirm:E});return s?l.a.createElement(n.Fragment,null,l.a.createElement(m.EuiButton,{iconType:"importAction",isLoading:d,onClick:f,"data-test-subj":"installAssetsButton"},d?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.installingPackageButtonLabel",defaultMessage:"Installing {title} assets",values:{title:i}}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.installPackageButtonLabel",defaultMessage:"Install {title} assets",values:{title:i}})),g&&h):null}function it(e){const{name:t,title:a,version:i,installSource:r}=e,s=Object(j.k)().integrations.installPackages,o=Object(j.J)(),c=Object(j.A)(),{status:u}=c(t),d=u===D.b.reinstalling,g="upload"===r,p=Object(n.useCallback)((()=>{o({name:t,version:i,title:a,isReinstall:!0})}),[o,t,a,i]),f=l.a.createElement(m.EuiButton,{iconType:"refresh",isLoading:d,onClick:p,disabled:g},d?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.reinstallingPackageButtonLabel",defaultMessage:"Reinstalling {title}",values:{title:a}}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.reinstallPackageButtonLabel",defaultMessage:"Reinstall {title}",values:{title:a}}));return s?l.a.createElement(n.Fragment,null,g?l.a.createElement(m.EuiToolTip,{content:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.installPackage.uploadedTooltip",defaultMessage:"This integration was installed by upload and cannot be automatically reinstalled. Please upload it again to reinstall."})},f):f):null}var rt=a(62);const st=({dryRunData:e,isUpgradingPackagePolicies:t=!1,name:a,packagePolicyIds:i=[],agentPolicyIds:r=[],setIsUpgradingPackagePolicies:o=(()=>{}),title:c,version:u,startServices:d})=>{const g=Object(s.useHistory)(),{getPath:p}=Object(j.N)(),{notifications:f}=Object(j.V)(),E=Object(j.k)().integrations.upgradePackages,h=Object(j.J)(),b=Object(j.A)(),{status:k}=b(a),v=k===D.b.installing,[x,y]=Object(n.useState)(!1),[M,O]=Object(n.useState)(!0),{data:C}=Object(j.m)(r,{full:!0}),I=Object(n.useMemo)((()=>i.length),[i]),w=Object(n.useMemo)((()=>null!=C&&C.items?C.items.reduce(((e,t)=>{var a;return e+((null!=t&&t.package_policies?(a=t.package_policies,Array.isArray(a)&&a.every((e=>"string"==typeof e))?t.package_policies.filter((e=>i.includes(e))):t.package_policies.filter((e=>i.includes(e.id)))):[]).length>0&&null!=t&&t.agents?null==t?void 0:t.agents:0)}),0):0),[C,i]),P=Object(n.useMemo)((()=>null==e?void 0:e.filter((e=>e.hasErrors)).length),[e]),S=Object(n.useCallback)((()=>{O((e=>!e))}),[]),A=Object(n.useCallback)((()=>{if(!g.location.pathname.match(p("integration_details_settings",{pkgkey:`${a}-.*`})))return;const e=p("integration_details_settings",{pkgkey:`${a}-${u}`});g.push(e)}),[g,p,a,u]),L=Object(n.useCallback)((async()=>{await h({name:a,version:u,title:c,isUpgrade:!0}),A()}),[h,a,c,u,A]),_=Object(j.Z)(),z=Object(n.useCallback)((async()=>{if(t)return;if(y(!1),o(!0),!await h({name:a,version:u,title:c,isUpgrade:!0}))return void o(!1);const n=i.filter((t=>{var a;return!(null!=e&&null!==(a=e.find((e=>{var a;return(null===(a=e.diff)||void 0===a?void 0:a[0].id)===t})))&&void 0!==a&&a.hasErrors)}));n.length||(o(!1),A());try{await _.mutateAsync({packagePolicyIds:n}),f.toasts.addSuccess({title:Object(rt.a)(l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.packageUpdateSuccessTitle",defaultMessage:"Updated {title} and upgraded policies",values:{title:c}}),d),text:Object(rt.a)(l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.packageUpdateSuccessDescription",defaultMessage:"Successfully updated {title} and upgraded policies",values:{title:c}}),d)}),A()}catch(e){f.toasts.addError(e,{title:F.i18n.translate("xpack.fleet.integrations.settings.errorUpdatingPoliciesToast.title",{defaultMessage:"Error updating policies"}),toastMessage:F.i18n.translate("xpack.fleet.integrations.settings.errorUpdatingPoliciesToast.message",{defaultMessage:"Integrations policies, need to be manually updated. \n Error: {error}",values:{error:e.message}})}),o(!1),A()}}),[t,o,h,a,u,c,_,i,e,f.toasts,d,A]),N=l.a.createElement(m.EuiConfirmModal,{isLoading:t,maxWidth:568,onCancel:()=>{y(!1)},cancelButtonText:F.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.cancel",{defaultMessage:"Cancel"}),onConfirm:z,confirmButtonText:F.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.confirm",{defaultMessage:"Upgrade {packageName} and policies",values:{packageName:c}}),title:F.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.updateTitle",{defaultMessage:"Upgrade {packageName} and policies",values:{packageName:c}})},l.a.createElement(l.a.Fragment,null,P&&P>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiCallOut,{color:"warning",iconType:"warning",title:F.i18n.translate("xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.title",{defaultMessage:"Some integration policies have conflicts"})},l.a.createElement("strong",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.integrationPolicyCount",defaultMessage:"{conflictCount, plural, one { # integration policy} other { # integration policies}}",values:{conflictCount:P}}))," ",l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.conflictCallOut.body",defaultMessage:"{conflictCount, plural, one { has} other { have}} conflicts and will not be upgraded automatically. You can manually resolve these conflicts via agent policy settings in Fleet after performing this upgrade.",values:{conflictCount:P}})),l.a.createElement(m.EuiSpacer,{size:"l"})):null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUpdateModal.body",defaultMessage:"This action will deploy updates to all agents which use these policies. Fleet has detected that {packagePolicyCountText} {packagePolicyCount, plural, one { is} other { are}} ready to be upgraded and {packagePolicyCount, plural, one { is} other { are}} already in use by {agentCountText}.",values:{packagePolicyCount:I,packagePolicyCountText:l.a.createElement("strong",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.confirmUpdateModal.body.policyCount",defaultMessage:"{packagePolicyCount, plural, one {# integration policy} other {# integration policies}}",values:{packagePolicyCount:I}})),agentCountText:l.a.createElement("strong",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.confirmUpdateModal.body.agentCount",defaultMessage:"{agentCount, plural, one {# agent} other {# agents}}",values:{agentCount:w}}))}})));return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiFlexGroup,{alignItems:"center"},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiButton,{isLoading:v||t,onClick:M?()=>y(!0):L,"data-test-subj":"updatePackageBtn",isDisabled:!E},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.updatePackage.updatePackageButtonLabel",defaultMessage:"Upgrade to latest version"}))),I>0&&l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiCheckbox,{labelProps:{style:{display:"flex"}},id:"upgradePoliciesCheckbox","data-test-subj":"epmDetails.upgradePoliciesCheckbox",disabled:!E,checked:M,onChange:S,label:F.i18n.translate("xpack.fleet.integrations.updatePackage.upgradePoliciesCheckboxLabel",{defaultMessage:"Upgrade integration policies"})}))),x&&N)},ot=e=>{const{onCancel:t,onConfirm:a,packageName:n,numOfAssets:i}=e;return l.a.createElement(m.EuiConfirmModal,{title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallTitle",defaultMessage:"Uninstall {packageName}",values:{packageName:n}}),onCancel:t,onConfirm:a,cancelButtonText:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallButtonLabel",defaultMessage:"Uninstall {packageName}",values:{packageName:n}}),defaultFocusedButton:"confirm",buttonColor:"danger"},l.a.createElement(m.EuiCallOut,{color:"danger",title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallCallout.title",defaultMessage:"This action will remove {numOfAssets} assets",values:{numOfAssets:i}})},l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallCallout.description",defaultMessage:"Kibana and Elasticsearch assets that were created by this integration will be removed. Agents policies and any data sent by your agents will not be effected."}))),l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.confirmUninstallModal.uninstallDescription",defaultMessage:"This action cannot be undone. Are you sure you wish to continue?"})))},ct=({disabled:e=!1,latestVersion:t,name:a,numOfAssets:i,title:r,version:s})=>{const o=Object(j.k)().integrations.removePackages,c=Object(j.X)(),u=Object(j.A)(),{status:d}=u(a),g=d===D.b.uninstalling,[p,f]=Object(n.useState)(!1),E=Object(n.useCallback)((()=>{c({name:a,version:s,title:r,redirectToVersion:null!=t?t:s}),f(!1)}),[c,a,r,s,t]),h=l.a.createElement(ot,{numOfAssets:i,packageName:r,onCancel:()=>f(!1),onConfirm:E});return o?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiButton,{"data-test-subj":"uninstallAssetsButton",iconType:"trash",isLoading:g,onClick:()=>f(!0),color:"danger",disabled:!(!e&&!g)},g?l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.uninstallPackage.uninstallingPackageButtonLabel",defaultMessage:"Uninstalling {title}",values:{title:r}}):l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.uninstallPackage.uninstallPackageButtonLabel",defaultMessage:"Uninstall {title}",values:{title:r}})),p&&h):null},ut=w.a.td.withConfig({displayName:"SettingsTitleCell",componentId:"sc-qmedro-0"})(["padding-right:",";padding-bottom:",";"],(e=>e.theme.eui.euiSizeXL),(e=>e.theme.eui.euiSizeM)),dt=()=>l.a.createElement("strong",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallNoteLabel",defaultMessage:"Note:"})),mt=({latestVersion:e,toggleChangelogModal:t})=>l.a.createElement(m.EuiCallOut,{color:"warning",iconType:"warning",title:F.i18n.translate("xpack.fleet.integrations.settings.versionInfo.updatesAvailable",{defaultMessage:"New version available"})},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integration.settings.versionInfo.updatesAvailableBody",defaultMessage:"Upgrade to version {latestVersion} to get the latest features. {changelogLink}",values:{latestVersion:e,changelogLink:l.a.createElement(m.EuiLink,{onClick:t},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integration.settings.versionInfo.updatesAvailableChangelogLink",defaultMessage:"View changelog."}))}})),gt=({name:e,version:t})=>{const{getHref:a}=Object(j.N)(),n=a("integration_details_settings",{pkgkey:`${e}-${t}`});return l.a.createElement(m.EuiLink,{href:n},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageLatestVersionLink",defaultMessage:"latest version"}))},pt=Object(n.memo)((({packageInfo:e,startServices:t})=>{var a;const{name:i,title:r,latestVersion:s,version:o,keepPoliciesUpToDate:c}=e,[u,g]=Object(n.useState)(!1),[p,f]=Object(n.useState)(!1),E=Object(n.useCallback)((()=>{f(!p)}),[p]),h=Object(j.A)(),{data:b}=Object(j.C)({perPage:O.i,page:1,kuery:`${O.g}.package.name:${i}`}),k=Object(n.useMemo)((()=>null==b?void 0:b.items.map((({id:e})=>e))),[b]),v=Object(n.useMemo)((()=>{var e;return null!==(e=null==b?void 0:b.items.flatMap((e=>e.policy_ids)))&&void 0!==e?e:[]}),[b]),{data:x}=Object(j.ab)(null!=k?k:[],s,{enabled:k&&k.length>0}),y=Object(j.Y)(),{notifications:M}=Object(j.V)(),C=Object(n.useMemo)((()=>O.f.some((e=>e.name===i))),[i]),I=Object(n.useMemo)((()=>O.a.some((e=>e.name===i))),[i]),[w,P]=Object(n.useState)(null!=c&&c),A=Object(n.useCallback)((()=>{P((e=>!e)),y.mutate({pkgName:e.name,pkgVersion:e.version,body:{keepPoliciesUpToDate:!w}},{onSuccess:()=>{M.toasts.addSuccess({title:F.i18n.translate("xpack.fleet.integrations.integrationSaved",{defaultMessage:"Integration settings saved"}),text:w?F.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateDisabledSuccess",{defaultMessage:"Fleet will not automatically keep integration policies up to date for {title}",values:{title:r}}):F.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateEnabledSuccess",{defaultMessage:"Fleet will automatically keep integration policies up to date for {title}",values:{title:r}})})},onError:e=>{M.toasts.addError(e,{title:F.i18n.translate("xpack.fleet.integrations.integrationSavedError",{defaultMessage:"Error saving integration settings"}),toastMessage:F.i18n.translate("xpack.fleet.integrations.keepPoliciesUpToDateError",{defaultMessage:"Error saving integration settings for {title}",values:{title:r}})})}})}),[w,M.toasts,e.name,e.version,r,y]),{status:L,version:_}=h(i),z=!(null==b||!b.total),N=!(!_||!S()(_,s)),R=o<s,B=L===D.b.notInstalled&&R||L===D.b.installed&&_!==o,U=L===D.b.installing&&_,{numOfAssets:V,numTransformAssets:$}=Object(n.useMemo)((()=>({numTransformAssets:Object(at.b)(e.assets),numOfAssets:Object.entries(e.assets).reduce(((e,[t,a])=>e+Object.entries(a).reduce(((e,[t,a])=>e+a.length),0)),0)})),[e.assets]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(re,{grow:1}),l.a.createElement(m.EuiFlexItem,{grow:7},l.a.createElement(m.EuiText,null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h3",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageSettingsTitle",defaultMessage:"Settings"}))),l.a.createElement(m.EuiSpacer,{size:"s"}),null!==_&&l.a.createElement("div",null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageVersionTitle",defaultMessage:"{title} version",values:{title:r}}))),l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement(ut,null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.versionInfo.installedVersion",defaultMessage:"Installed version"})),l.a.createElement("td",null,l.a.createElement(m.EuiTitle,{size:"xs","data-test-subj":"epmSettings.installedVersionTitle"},l.a.createElement("span",null,_)))),l.a.createElement("tr",null,l.a.createElement(ut,null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.versionInfo.latestVersion",defaultMessage:"Latest version"})),l.a.createElement("td",null,l.a.createElement(m.EuiTitle,{size:"xs","data-test-subj":"epmSettings.latestVersionTitle"},l.a.createElement("span",null,s)))))),C&&l.a.createElement(l.a.Fragment,null,l.a.createElement(le,{checked:w,onChange:A,disabled:I}),l.a.createElement(m.EuiSpacer,{size:"l"})),(N||u)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(mt,{latestVersion:s,toggleChangelogModal:E}),l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement("p",null,l.a.createElement(st,d()({},e,{version:s,agentPolicyIds:v,packagePolicyIds:k,dryRunData:x,isUpgradingPackagePolicies:u,setIsUpgradingPackagePolicies:g,startServices:t}))))),!B&&!U&&l.a.createElement("div",null,l.a.createElement(m.EuiSpacer,{size:"s"}),L===D.b.notInstalled||L===D.b.installing?l.a.createElement("div",null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallTitle",defaultMessage:"Install {title}",values:{title:r}}))),l.a.createElement(m.EuiSpacer,{size:"s"}),$>0?l.a.createElement(l.a.Fragment,null,l.a.createElement(at.a,{count:$}),l.a.createElement(m.EuiSpacer,{size:"s"})):null,l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallDescription",defaultMessage:"Install this integration to setup Kibana and Elasticsearch assets designed for {title} data.",values:{title:r}})),l.a.createElement(m.EuiFlexGroup,null,l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement("p",null,l.a.createElement(lt,d()({},e,{numOfAssets:V,disabled:!b||z})))))):l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallTitle",defaultMessage:"Uninstall"})))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallDescription",defaultMessage:"Remove Kibana and Elasticsearch assets that were installed by this integration."})),l.a.createElement(m.EuiFlexItem,null,l.a.createElement("div",null,l.a.createElement(ct,d()({},e,{numOfAssets:V,latestVersion:s,disabled:!b||z})))),z&&l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiText,{color:"subdued",size:"s"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageUninstallNoteDescription.packageUninstallNoteDetail",defaultMessage:"{strongNote} {title} cannot be uninstalled because there are active agents that use this integration. To uninstall, remove all {title} integrations from your agent policies.",values:{title:r,strongNote:l.a.createElement(dt,null)}})))),l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"m"},l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageReinstallTitle",defaultMessage:"Reinstall"})))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageReinstallDescription",defaultMessage:"Reinstall Kibana and Elasticsearch assets for this integration."})),l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement("div",null,l.a.createElement(it,d()({},e,{installSource:"installationInfo"in e&&null!==(a=e.installationInfo)&&void 0!==a&&a.install_source?e.installationInfo.install_source:""}))))))),B&&R&&!U&&l.a.createElement("div",null,l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement("div",null,l.a.createElement(m.EuiTitle,null,l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageInstallTitle",defaultMessage:"Install {title}",values:{title:r}}))),l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement("p",null,l.a.createElement(m.EuiText,{color:"subdued"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.settings.packageSettingsOldVersionMessage",defaultMessage:"Version {version} is out of date. The {latestVersion} of this integration is available to be installed.",values:{version:o,latestVersion:l.a.createElement(gt,{name:i,version:s})}})))))))),l.a.createElement(m.EuiPortal,null,p&&l.a.createElement(Le,{currentVersion:o,latestVersion:s,packageName:i,onClose:E})))})),ft=Object(n.memo)((({packageInfo:e})=>{const t=Object(j.W)(e.name,"package-detail-custom"),{getPath:a}=Object(j.N)(),i=Object(n.useMemo)((()=>Object(z.g)(e)),[e]);return t?l.a.createElement(m.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(re,{grow:1}),l.a.createElement(m.EuiFlexItem,{grow:7},l.a.createElement(N.g,null,l.a.createElement(t.Component,{pkgkey:i,packageInfo:e})))):l.a.createElement(s.Redirect,{to:a("integration_details_overview",{pkgkey:i})})})),Et=({packageInfo:e,integration:t})=>{var a;return null===(a=e.policy_templates)||void 0===a?void 0:a.reduce(((a,n)=>t&&n.name!==t?a:"inputs"in n&&n.inputs?[...a,...n.inputs.map((t=>({key:`${n.name}-${t.type}`,...t,streams:Object(L.P)(t.type,e,[])})))]:a),[])},ht=({packageInfo:e,integration:t})=>!!(e.vars&&e.vars.length>0)||(Et({packageInfo:e,integration:t})||[]).length>0||void 0,bt=({packageInfo:e,integration:t})=>{const{docLinks:a}=Object(c.Xc)(),n=ht({packageInfo:e,integration:t});return l.a.createElement(m.EuiFlexGroup,{alignItems:"flexStart"},l.a.createElement(re,{grow:1}),l.a.createElement(m.EuiFlexItem,{grow:7},l.a.createElement(m.EuiText,null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.description",defaultMessage:"This documents all the inputs, streams, and variables available to use this integration programmatically via the Fleet Kibana API. {learnMore}",values:{learnMore:l.a.createElement(m.EuiLink,{href:a.links.fleet.api,external:!0},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.learnMoreLink",defaultMessage:"Learn more"}))}})),l.a.createElement(m.EuiSpacer,{size:"m"}),n?l.a.createElement(l.a.Fragment,null,l.a.createElement(xt,{vars:e.vars}),l.a.createElement(vt,{packageInfo:e,integration:t})):l.a.createElement(m.EuiCallOut,{title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.noDocumentationMessage",defaultMessage:"This integration has no references available."})}),l.a.createElement(m.EuiSpacer,{size:"m"})))},kt=({streams:e})=>0===e.length?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiTitle,{size:"xs"},l.a.createElement("h6",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.streamsTitle",defaultMessage:"Streams"}))),l.a.createElement(m.EuiSpacer,{size:"m"}),e.map((e=>l.a.createElement(m.EuiAccordion,{key:e.data_stream.type+e.data_stream.dataset,id:e.data_stream.type+e.data_stream.dataset,buttonContent:l.a.createElement(m.EuiText,null,l.a.createElement(m.EuiCode,null,e.data_stream.dataset),"(",e.title,")"),initialIsOpen:!1,paddingSize:"m"},l.a.createElement(m.EuiText,null,e.description),e.vars?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(yt,{vars:e.vars})):null)))),vt=({packageInfo:e,integration:t})=>{var a;const i=Object(n.useMemo)((()=>Et({packageInfo:e,integration:t})),[e,t]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(m.EuiTitle,{size:"xs"},l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.inputsTitle",defaultMessage:"Inputs"}))),l.a.createElement(m.EuiSpacer,{size:"s"}),null!==(a=null==i?void 0:i.map((e=>l.a.createElement(m.EuiAccordion,{key:e.key,id:e.key,buttonContent:l.a.createElement(m.EuiText,null,l.a.createElement(m.EuiCode,null,e.key),"(",e.title,")"),initialIsOpen:!1,paddingSize:"m"},l.a.createElement(m.EuiText,null,e.description),e.vars?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(yt,{vars:e.vars})):null,l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(kt,{streams:e.streams})))))&&void 0!==a?a:null)},xt=({vars:e})=>e?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiTitle,{size:"xs"},l.a.createElement("h4",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.globalVariablesTitle",defaultMessage:"Package variables"}))),l.a.createElement(m.EuiSpacer,{size:"m"}),l.a.createElement(yt,{vars:e}),l.a.createElement(m.EuiSpacer,{size:"m"})):null,yt=({vars:e})=>{const t=Object(n.useMemo)((()=>[{field:"name",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnKeyName",defaultMessage:"Key"}),render:e=>l.a.createElement(m.EuiCode,null,e)},{field:"title",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnTitleName",defaultMessage:"Title"})},{field:"type",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnTypeName",defaultMessage:"Type"})},{field:"required",width:"70px",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnRequiredName",defaultMessage:"Required"})},{field:"multi",width:"70px",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.columnMultidName",defaultMessage:"Multi"})}]),[]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiTitle,{size:"xxs"},l.a.createElement("h6",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetails.apiReference.variableTableTitle",defaultMessage:"Variables"}))),l.a.createElement(m.EuiBasicTable,{columns:t,items:e}))},Mt=({packageInfo:e})=>{const{notifications:t,docLinks:a}=Object(j.V)(),{name:n,version:i,title:r}=e,s="installing"!==e.status,o=Object(L.Y)(e.version),{data:c,error:u,isLoading:d}=Object(j.w)({pkgName:n,pkgVersion:i},{format:"yaml",prerelease:o});return u&&t.toasts.addError(u,{title:F.i18n.translate("xpack.fleet.epm.InputTemplates.loadingErro",{defaultMessage:"Error input templates"})}),l.a.createElement(m.EuiFlexGroup,{"data-test-subj":"epm.Configs",alignItems:"flexStart"},l.a.createElement(re,{grow:1}),l.a.createElement(m.EuiFlexItem,{grow:7},d&&!c?l.a.createElement(m.EuiSkeletonText,{lines:10}):l.a.createElement(l.a.Fragment,null,o&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement(He,{packageName:e.name,packageTitle:e.title})),l.a.createElement(m.EuiText,null,l.a.createElement("p",null,l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.InputTemplates.mainText",defaultMessage:"View sample configurations for each of the {name} integration's data streams below. Copy/paste this YML into your {elasticAgentYml} file or into a file within your {inputsDir} directory. For more information, see the {userGuideLink}",values:{name:r,elasticAgentYml:l.a.createElement(m.EuiCode,null,"elastic-agent.yml"),inputsDir:l.a.createElement(m.EuiCode,null,"inputs.d"),userGuideLink:l.a.createElement(m.EuiLink,{href:a.links.fleet.elasticAgentInputConfiguration,external:!0,target:"_blank"},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.InputTemplates.guideLink",defaultMessage:"Fleet and Elastic Agent Guide"}))}}))),s&&l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement(m.EuiCallOut,{title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.InputTemplates.installCallout",defaultMessage:"Install the integration to use the following configs."}),color:"warning",iconType:"warning"})),l.a.createElement(m.EuiSpacer,{size:"s"}),l.a.createElement(m.EuiCodeBlock,{language:"yaml",isCopyable:!0,paddingSize:"s",overflowHeight:1e3},c))))};a(701);const jt=w.a.div.withConfig({displayName:"Divider",componentId:"sc-v14k5b-0"})(["width:0;height:100%;border-left:",";"],(e=>e.theme.eui.euiBorderThin)),Ot=w()(m.EuiFlexItem).withConfig({displayName:"FlexItemWithMinWidth",componentId:"sc-v14k5b-1"})(["min-width:0px;"]),Ct=w()(m.EuiFlexItem).withConfig({displayName:"FlexItemWithMaxHeight",componentId:"sc-v14k5b-2"})(["@media (min-width:768px){max-height:60px;}"]);function It({packageTitle:e}){return Object(j.l)("integration_details_overview",{pkgTitle:e}),null}function wt(){var e,t,a,i,r;const{getId:c}=Object(j.j)(),{getFromIntegrations:u}=Object(j.K)(),{pkgkey:d,panel:g}=Object(s.useParams)(),{getHref:f,getPath:E}=Object(j.N)(),h=Object(s.useHistory)(),{pathname:b,search:k,hash:v}=Object(s.useLocation)(),x=Object(n.useMemo)((()=>new URLSearchParams(k)),[k]),y=Object(n.useMemo)((()=>x.get("integration")),[x]),M=Object(n.useMemo)((()=>Boolean(x.get("prerelease"))),[x]),C=Object(j.k)(),I=C.fleet.addAgents,w=C.integrations.installPackages,P=C.integrations.readPackageSettings,$=C.integrations.readIntegrationPolicies,{data:H,error:G,isLoading:q}=Object(j.S)(),W=!(null!=H&&H.success)&&"MISSING_SECURITY"===G,K=w&&(null==H?void 0:H.success),X=Object(j.V)(),J=!(null==X||null===(e=X.cloud)||void 0===e||!e.cloudId),{createPackagePolicyMultiPageLayout:te}=z.a.get(),le=c(),ie="overview"===g,[re,se]=Object(n.useState)(null),oe=Object(j.U)(),ce=Object(j.A)(),ue=Object(j.W)(null!==(t=null==re?void 0:re.name)&&void 0!==t?t:"","package-detail-assets"),de=Object(n.useMemo)((()=>{var e;if(null!==re&&re.name)return null===(e=ce(null==re?void 0:re.name))||void 0===e?void 0:e.status}),[re,ce]),me=Object(n.useMemo)((()=>de===D.b.installed||de===D.b.reinstalling),[de]),pe=re&&"installationInfo"in re&&(null===(a=re.installationInfo)||void 0===a?void 0:a.version)&&S()(re.installationInfo.version,re.latestVersion),[fe,Ee]=l.a.useState(),{data:he,isInitialLoading:be}=Object(j.H)({enabled:C.fleet.readSettings});Object(n.useEffect)((()=>{const e=Boolean(null==he?void 0:he.item.prerelease_integrations_enabled)||M;Ee(e)}),[null==he?void 0:he.item.prerelease_integrations_enabled,M]);const{pkgName:ke,pkgVersion:ve}=Object(L.mb)(d),{data:xe,error:ye,isLoading:Me,isFetchedAfterMount:je,refetch:Oe}=Object(j.z)(ke,ve,{prerelease:fe},{enabled:!C.fleet.readSettings||!be,refetchOnMount:"always"}),[Ce,Ie]=Object(n.useState)(),[we,Fe]=Object(n.useState)(),{data:Te}=Object(j.z)(ke,"",{prerelease:!1});Object(n.useEffect)((()=>{const e=null==Te?void 0:Te.item;e&&!Object(L.Y)(e.version)&&Ie(e.version)}),[null==Te?void 0:Te.item]);const{data:Pe}=Object(j.z)(ke,"",{prerelease:!0});Object(n.useEffect)((()=>{Fe(null==Pe?void 0:Pe.item.version)}),[null==Pe?void 0:Pe.item.version]);const{isFirstTimeAgentUser:Se=!1,isLoading:Ae}=Object(U.a)(),Le=Object(j.L)(ke),[_e,ze]=Object(n.useState)(de);Object(n.useEffect)((()=>{"not_installed"===de&&ze(de),"not_installed"===_e&&"installed"===de&&(ze(de),Oe())}),[de,_e,Oe]);const De=Me||q||Ae||!je,Ne=void 0!==Object(j.W)(null!==(i=null==xe||null===(r=xe.item)||void 0===r?void 0:r.name)&&void 0!==i?i:"","package-detail-custom"),Re=I&&!!re&&Object(L.gb)(re).length>0,Be=!_.gb.includes(ke)&&re&&ht({packageInfo:re,integration:y});Object(n.useEffect)((()=>{if(je&&null!=xe&&xe.item){const t=xe.item;let a;se(t);const{name:n}=xe.item;var e;"installationInfo"in t&&(a=null===(e=t.installationInfo)||void 0===e?void 0:e.version);const l=null==t?void 0:t.status;n&&oe({name:n,status:l,version:a||null})}}),[xe,je,oe,se]);const Ue=Object(n.useMemo)((()=>{var e;return y?null==re||null===(e=re.policy_templates)||void 0===e?void 0:e.find((e=>e.name===y)):void 0}),[y,re]),Ve=u(),$e=f("updates_available"===Ve?"integrations_installed_updates_available":"installed"===Ve?"integrations_installed":"integrations_all"),He=Object(n.useMemo)((()=>Object(A.a)(re)),[re]),Ge=Object(n.useMemo)((()=>l.a.createElement(m.EuiFlexGroup,{direction:"column",gutterSize:"m","data-test-subj":"headerLeft"},l.a.createElement(m.EuiFlexItem,null,l.a.createElement("div",null,l.a.createElement(Y,{queryParams:x,href:$e}))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiFlexGroup,{gutterSize:"l"},l.a.createElement(Ct,{grow:!1},De||!re?l.a.createElement(ne,null):l.a.createElement(ae,{packageName:re.name,integrationName:null==Ue?void 0:Ue.name,version:re.version,icons:(null==Ue?void 0:Ue.icons)||re.icons})),l.a.createElement(Ot,{grow:!0},l.a.createElement(m.EuiFlexGroup,{direction:"column",justifyContent:"flexStart",gutterSize:"xs"},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiText,null,l.a.createElement("h1",null,(null==Ue?void 0:Ue.title)||(null==re?void 0:re.title)||" "))),l.a.createElement(m.EuiFlexItem,null,l.a.createElement(m.EuiFlexGroup,{gutterSize:"xs"},l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(m.EuiBadge,{color:"default"},F.i18n.translate("xpack.fleet.epm.elasticAgentBadgeLabel",{defaultMessage:"Elastic Agent"}))),null!=re&&re.release&&"ga"!==re.release?l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(N.h,{release:Object(L.J)(re.version)})):null)))))))),[Ue,De,re,$e,x]),We=Object(n.useCallback)((e=>{e.preventDefault();const t=h.createHref({pathname:b,search:k,hash:v}),a=(({currentPath:e,integration:t,agentPolicyId:a,pkgkey:n,isFirstTimeAgentUser:l,isCloud:i,isExperimentalAddIntegrationPageEnabled:r,isGuidedOnboardingActive:s})=>{const o=t?{integration:t}:{},c=(e=>V.some((t=>e.startsWith(t))))(n),u=r&&i&&(l||s)&&!c,d=O.j.add_integration_to_policy({pkgkey:n,useMultiPageLayout:u,...o,...a?{agentPolicyId:a}:{}})[1];let m,g;a?(m=[O.h,{path:O.j.policy_details({policyId:a})[1]}],g={showAddAgentHelp:!0,openEnrollmentFlyout:!0}):(m=[O.c,{path:O.j.integration_details_policies({pkgkey:n,...o})[1]}],g={showAddAgentHelp:{renameKey:"showAddAgentHelpForPolicyId",policyIdAsValue:!0},openEnrollmentFlyout:{renameKey:"addAgentToPolicyId",policyIdAsValue:!0}});const p={onSaveNavigateTo:m,onSaveQueryParams:g,onCancelNavigateTo:[O.c,{path:O.j.integration_details_overview({pkgkey:n,...o})[1]}],onCancelUrl:e};return[O.h,{path:d,state:p}]})({agentPolicyId:le,currentPath:t,integration:y,isCloud:J,isExperimentalAddIntegrationPageEnabled:te,isFirstTimeAgentUser:Se,isGuidedOnboardingActive:Le,pkgkey:d});X.application.navigateToApp(...a)}),[le,v,h,y,J,te,Se,Le,b,d,k,X.application]),Ke=Object(n.useMemo)((()=>fe&&Ce&&we&&Ce!==we&&(!(null!=re&&re.version)||re.version===Ce||re.version===we)),[fe,Ce,we,null==re?void 0:re.version]),Ye=Object(n.useMemo)((()=>[{value:we,text:we},{value:Ce,text:Ce}]),[we,Ce]),Xe=F.i18n.translate("xpack.fleet.epm.versionLabel",{defaultMessage:"Version"}),Je=Object(n.useCallback)(((e,t)=>{const a=E("integration_details_overview",{pkgkey:`${t}-${e}`});h.push(a)}),[E,h]),Qe=Object(n.useMemo)((()=>re?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiSpacer,{size:"l"}),l.a.createElement(m.EuiFlexGroup,{justifyContent:"flexEnd",direction:"row"},[{label:Ke?void 0:Xe,content:l.a.createElement(m.EuiFlexGroup,{gutterSize:"s"},l.a.createElement(m.EuiFlexItem,null,Ke?l.a.createElement(m.EuiSelect,{"data-test-subj":"versionSelect",prepend:Xe,options:Ye,value:re.version,onChange:e=>Je(e.target.value,re.name)}):l.a.createElement("div",{"data-test-subj":"versionText"},re.version)),pe?l.a.createElement(m.EuiFlexItem,{grow:!1},l.a.createElement(Z,null)):null)},...me?[{isDivider:!0},{label:F.i18n.translate("xpack.fleet.epm.usedByLabel",{defaultMessage:"Agent policies"}),"data-test-subj":"agentPolicyCount",content:l.a.createElement(ee,{packageName:re.name})}]:[],{isDivider:!0},{content:l.a.createElement(N.n,{packageKey:d,tourType:"addIntegrationButton",isTourVisible:ie&&Le,tourOffset:10},l.a.createElement(Q,{userCanInstallPackages:K,href:f("add_integration_to_policy",{pkgkey:d,...y?{integration:y}:{},...le?{agentPolicyId:le}:{}}),missingSecurityConfiguration:W,packageName:(null==Ue?void 0:Ue.title)||re.title,onClick:We}))}].map(((e,t)=>{var a;return l.a.createElement(m.EuiFlexItem,{grow:!1,key:t,"data-test-subj":e["data-test-subj"]},null!==(a=e.isDivider)&&void 0!==a&&a?l.a.createElement(jt,null):e.label?l.a.createElement(m.EuiDescriptionList,{className:"eui-textRight",compressed:!0,textStyle:"reverse"},l.a.createElement(m.EuiDescriptionListTitle,null,e.label),l.a.createElement(m.EuiDescriptionListDescription,null,e.content)):e.content)})))):void 0),[re,pe,me,d,ie,Le,K,f,y,le,W,null==Ue?void 0:Ue.title,We,Je,Ke,Xe,Ye]),Ze=Object(n.useMemo)((()=>{if(!re)return[];const e=Object(z.g)(re),t=[{id:"overview",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.overviewLinkText",defaultMessage:"Overview"}),isSelected:"overview"===g,"data-test-subj":"tab-overview",href:f("integration_details_overview",{pkgkey:e,...y?{integration:y}:{}})}];return $&&me&&t.push({id:"policies",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packagePoliciesLinkText",defaultMessage:"Integration policies"}),isSelected:"policies"===g,"data-test-subj":"tab-policies",href:f("integration_details_policies",{pkgkey:e,...y?{integration:y}:{}})}),me&&(re.assets||ue)&&t.push({id:"assets",name:l.a.createElement("div",{style:{display:"flex",textAlign:"center"}},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packageAssetsLinkText",defaultMessage:"Assets"})," ",He>0?l.a.createElement(B.c,{numOfDeferredInstallations:He}):null),isSelected:"assets"===g,"data-test-subj":"tab-assets",href:f("integration_details_assets",{pkgkey:e,...y?{integration:y}:{}})}),P&&t.push({id:"settings",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.settingsLinkText",defaultMessage:"Settings"}),isSelected:"settings"===g,"data-test-subj":"tab-settings",href:f("integration_details_settings",{pkgkey:e,...y?{integration:y}:{}})}),P&&Re&&t.push({id:"configs",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.configsText",defaultMessage:"Configs"}),isSelected:"configs"===g,"data-test-subj":"tab-configs",href:f("integration_details_configs",{pkgkey:e,...y?{integration:y}:{}})}),P&&Ne&&t.push({id:"custom",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.packageCustomLinkText",defaultMessage:"Advanced"}),isSelected:"custom"===g,"data-test-subj":"tab-custom",href:f("integration_details_custom",{pkgkey:e,...y?{integration:y}:{}})}),Be&&t.push({id:"api-reference",name:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsNav.documentationLinkText",defaultMessage:"API reference"}),isSelected:"api-reference"===g,"data-test-subj":"tab-api-reference",href:f("integration_details_api_reference",{pkgkey:e,...y?{integration:y}:{}})}),t}),[re,g,f,y,$,me,ue,P,Re,Ne,Be,He]),et=W?l.a.createElement(l.a.Fragment,null,l.a.createElement(m.EuiCallOut,{color:"warning",iconType:"lock",title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutTitle",defaultMessage:"Security needs to be enabled in order to add Elastic Agent integrations"})},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutDescription",defaultMessage:"In order to fully use Fleet, you must enable Elasticsearch and Kibana security features. Follow the {guideLink} to enable security.",values:{guideLink:l.a.createElement("a",{href:X.http.basePath.prepend("/app/fleet")},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.packageDetailsSecurityRequiredCalloutDescriptionGuideLink",defaultMessage:"steps in this guide"}))}})),l.a.createElement(m.EuiSpacer,null)):void 0;return l.a.createElement(R.b,{leftColumn:Ge,rightColumn:Qe,rightColumnGrow:!1,topContent:et,tabs:Ze,tabsClassName:"fleet__epm__shiftNavTabs"},Ue||re?l.a.createElement(It,{packageTitle:(null==Ue?void 0:Ue.title)||(null==re?void 0:re.title)||""}):null,ye?l.a.createElement(N.e,{title:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.epm.loadingIntegrationErrorTitle",defaultMessage:"Error loading integration details"}),error:ye.message}):De||!re?l.a.createElement(N.k,null):l.a.createElement(p.a,null,l.a.createElement(o.b,{path:O.d.integration_details_overview},l.a.createElement(qe,{packageInfo:re,integrationInfo:Ue,latestGAVersion:Ce})),l.a.createElement(o.b,{path:O.d.integration_details_settings},l.a.createElement(pt,{packageInfo:re,startServices:X})),l.a.createElement(o.b,{path:O.d.integration_details_assets},l.a.createElement(ge,{packageInfo:re,refetchPackageInfo:Oe})),l.a.createElement(o.b,{path:O.d.integration_details_configs},l.a.createElement(Mt,{packageInfo:re})),l.a.createElement(o.b,{path:O.d.integration_details_policies},l.a.createElement(tt,{name:re.name,version:re.version})),l.a.createElement(o.b,{path:O.d.integration_details_custom},l.a.createElement(ft,{packageInfo:re})),l.a.createElement(o.b,{path:O.d.integration_details_api_reference},l.a.createElement(bt,{packageInfo:re,integration:null==Ue?void 0:Ue.name})),l.a.createElement(s.Redirect,{to:O.d.integration_details_overview})))}var Ft=a(268);const Tt=Object(n.memo)((()=>{var e,t,a;const{params:{packagePolicyId:n}}=Object(s.useRouteMatch)(),{search:i}=Object(s.useLocation)(),{data:r}=Object(j.y)(n),o=Object(j.W)(null!==(e=null==r||null===(t=r.item)||void 0===t||null===(a=t.package)||void 0===a?void 0:a.name)&&void 0!==e?e:"","package-policy-edit"),c=new URLSearchParams(i).get("from");let u;return u=c&&"fleet-policy-list"===c?"edit":"package-edit",l.a.createElement(Ft.a,{packagePolicyId:n,from:u,forceUpgrade:null==o?void 0:o.useLatestPackageVersion})})),Pt=l.a.memo((()=>{const{integrationAssistant:e}=Object(j.V)();Object(j.l)("integration_create");const t=null==e?void 0:e.components.CreateIntegration;return t?l.a.createElement(t,null):null}));var St=a(34);const At=()=>{const{pkgkey:e}=Object(s.useParams)(),{getPath:t}=Object(j.N)();Object(j.l)("integration_details_overview",{pkgTitle:Object(Ae.capitalize)(e)});const a=Object(St.b)().languageClientsUiComponents[e];return a?l.a.createElement(a,null):l.a.createElement(s.Redirect,{to:t("integrations_all")})},Lt=()=>{const{integrationAssistant:e}=Object(j.V)();return Object(j.l)("integrations"),l.a.createElement(p.a,null,l.a.createElement(o.b,{path:O.d.integration_policy_edit},l.a.createElement(Tt,null)),l.a.createElement(o.b,{path:O.d.integration_details},l.a.createElement(j.d,null,l.a.createElement(wt,null))),l.a.createElement(o.b,{path:O.d.integration_details_language_clients},l.a.createElement(j.d,null,l.a.createElement(l.a.Suspense,{fallback:l.a.createElement(m.EuiSkeletonText,null)},l.a.createElement(At,null)))),e&&l.a.createElement(o.b,{path:O.d.integrations_create},l.a.createElement(Pt,null)),l.a.createElement(o.b,{path:O.d.integrations},l.a.createElement(C.a,null)))};var _t,zt=a(261),Dt=(_t=function(e,t){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},_t(e,t)},function(e,t){function a(){this.constructor=e}_t(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),Nt="html",Rt="svg",Bt=function(e,t){var a,n,l,i={};if(e===Nt)l=document.createElement("div");else{if(e!==Rt)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');l=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var r=0,s=Object.entries(t.attributes);r<s.length;r++){var o=s[r],c=o[0],u=o[1];l.setAttribute(c,u)}var d={element:l,elementType:e,setPortalProps:function(e){i=e},getInitialPortalProps:function(){return i},mount:function(t,l){if(l!==n){if(d.unmount(),t!==a&&!function(e,t){if(t===Nt)return e instanceof HTMLElement;if(t===Rt)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(d.element,l),a=t,n=l}},unmount:function(e){e&&e!==n||a&&n&&(a.replaceChild(n,d.element),a=void 0,n=void 0)}};return d},Ut=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return Dt(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,l=t.node;return i.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),l.element)},t}(n.PureComponent),Vt=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return Dt(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),$t=Bt.bind(null,Nt);Bt.bind(null,Rt);const Ht=({children:e,setHeaderActionMenu:t,startServices:a})=>{const i=Object(n.useMemo)((()=>$t()),[]);return Object(n.useEffect)((()=>(t((e=>Object(rt.a)(l.a.createElement(Vt,{node:i}),a)(e))),()=>{i.unmount(),t(void 0)})),[i,t,a]),l.a.createElement(Ut,{node:i},e)},Gt=l.a.createContext(null),qt=({children:e,...t})=>Object(he.jsx)(Gt.Provider,{value:t},e),Wt=({children:e,...t})=>{var a;const{core:{application:{navigateToUrl:n}},cloud:{isCloudEnabled:l,cloudId:i,elasticsearchUrl:r},share:{url:{locators:s}},docLinks:{links:{fleet:{apiKeysLearnMore:o},cloud:{beatsAndLogstashConfiguration:c}}}}=t,u=null===(a=s.get("MANAGEMENT_APP_LOCATOR"))||void 0===a?void 0:a.useUrl({sectionId:"security",appId:"api_keys"});return Object(he.jsx)(qt,{cloudId:l?i:void 0,elasticsearchUrl:r,managementUrl:u,apiKeysLearnMoreUrl:o,cloudIdLearnMoreUrl:c,navigateToUrl:n},e)};const Kt=({elasticsearchUrl:e})=>Object(he.jsx)(m.EuiFormRow,{label:F.i18n.translate("cloud.deploymentDetails.elasticEndpointLabel",{defaultMessage:"Elasticsearch endpoint"}),fullWidth:!0},Object(he.jsx)(m.EuiFlexGroup,{gutterSize:"s"},Object(he.jsx)(m.EuiFlexItem,null,Object(he.jsx)(m.EuiFieldText,{value:e,fullWidth:!0,disabled:!0,"data-test-subj":"deploymentDetailsEsEndpoint"})),Object(he.jsx)(m.EuiFlexItem,{grow:!1},Object(he.jsx)(m.EuiCopy,{textToCopy:e},(e=>Object(he.jsx)(m.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),Yt=({learnMoreUrl:e})=>Object(he.jsx)(m.EuiLink,{href:e},F.i18n.translate("cloud.deploymentDetails.cloudIDLabelToolip.learnMoreLink",{defaultMessage:"Learn more"}));var Xt={name:"z5y8xy",styles:"min-width:200px;height:16px"},Jt={name:"16ceglb",styles:"font-weight:600"};const Qt=({learnMoreUrl:e})=>{const[t,a]=Object(n.useState)(!1);return Object(he.jsx)(m.EuiFlexGroup,{css:Xt,alignItems:"center",gutterSize:"xs"},Object(he.jsx)(m.EuiFlexItem,{grow:!1},Object(he.jsx)(m.EuiText,{size:"xs",css:Jt},F.i18n.translate("cloud.deploymentDetails.cloudIDLabel",{defaultMessage:"Cloud ID"}))),Object(he.jsx)(m.EuiFlexItem,null,Object(he.jsx)(m.EuiPopover,{button:Object(he.jsx)(m.EuiButtonIcon,{iconType:"questionInCircle",onClick:()=>{a(!0)}}),isOpen:t,closePopover:()=>{a(!1)},anchorPosition:"upCenter"},Object(he.jsx)("p",{style:{width:270}},Object(he.jsx)(T.FormattedMessage,{id:"cloud.deploymentDetails.cloudIDLabelToolip",defaultMessage:"Get started with Elastic Agent or Logstash quickly. The Cloud ID simplifies sending data to Elastic. {link}",values:{link:Object(he.jsx)(Yt,{learnMoreUrl:e})}})))))},Zt=({cloudId:e,learnMoreUrl:t})=>Object(he.jsx)(m.EuiFormRow,{label:Object(he.jsx)(Qt,{learnMoreUrl:t}),fullWidth:!0},Object(he.jsx)(m.EuiFlexGroup,{gutterSize:"s"},Object(he.jsx)(m.EuiFlexItem,null,Object(he.jsx)(m.EuiFieldText,{value:e,fullWidth:!0,disabled:!0,"data-test-subj":"deploymentDetailsCloudID"})),Object(he.jsx)(m.EuiFlexItem,{grow:!1},Object(he.jsx)(m.EuiCopy,{textToCopy:e},(e=>Object(he.jsx)(m.EuiButtonIcon,{onClick:e,iconType:"copyClipboard",display:"base",size:"m"})))))),ea=({closeModal:e})=>{const{cloudId:t,elasticsearchUrl:a,managementUrl:l,apiKeysLearnMoreUrl:i,cloudIdLearnMoreUrl:r,navigateToUrl:s}=function(){const e=Object(n.useContext)(Gt);if(!e)throw new Error("DeploymentDetailsContext is missing. Ensure your component or React root is wrapped with <DeploymentDetailsProvider /> or <DeploymentDetailsKibanaProvider />.");return e}(),o=!!e;return t?Object(he.jsx)(m.EuiForm,{component:"div"},a&&Object(he.jsx)(Kt,{elasticsearchUrl:a}),Object(he.jsx)(Zt,{cloudId:t,learnMoreUrl:r}),Object(he.jsx)(m.EuiSpacer,{size:"m"}),l&&Object(he.jsx)(m.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceBetween",alignItems:"center"},Object(he.jsx)(m.EuiFlexItem,{grow:!1},Object(he.jsx)(m.EuiButtonEmpty,{href:l,onClick:t=>{var a;(a=t).metaKey||a.altKey||a.ctrlKey||a.shiftKey||(t.preventDefault(),s(l)),e&&e()},flush:"left"},F.i18n.translate("cloud.deploymentDetails.createManageApiKeysButtonLabel",{defaultMessage:"Create and manage API keys"}))),!o&&Object(he.jsx)(m.EuiFlexItem,{grow:!1},Object(he.jsx)(m.EuiLink,{external:!0,href:i,target:"_blank"},F.i18n.translate("cloud.deploymentDetails.learnMoreButtonLabel",{defaultMessage:"Learn more"}))))):null},ta=()=>{const[e,t]=l.a.useState(!1),{share:a,cloud:n,docLinks:i,application:r}=Object(j.V)();if(!n)return null;const{isCloudEnabled:s,cloudId:o}=n;if(!s||!o)return null;const c=l.a.createElement(m.EuiHeaderLink,{onClick:()=>t(!e),isActive:!0},F.i18n.translate("xpack.fleet.integrations.connectionDetailsButton",{defaultMessage:"Connection details"}));return l.a.createElement(Wt,{core:{application:r},share:a,cloud:n,docLinks:i},l.a.createElement(m.EuiPopover,{isOpen:e,closePopover:()=>t(!1),button:c,anchorPosition:"downCenter"},l.a.createElement("div",{style:{width:450}},l.a.createElement(ea,null))))},aa=({setHeaderActionMenu:e,startServices:t})=>{const{euiTheme:a}=Object(m.useEuiTheme)(),n=l.a.useMemo((()=>pe.css`
      color: ${a.colors.text};
    `),[a]),i=Object(zt.b)();return l.a.createElement(Ht,{setHeaderActionMenu:e,startServices:t},l.a.createElement(m.EuiHeaderSection,{grow:!1},l.a.createElement(m.EuiHeaderSectionItem,null,l.a.createElement(m.EuiHeaderLinks,null,l.a.createElement(ta,null))),i?l.a.createElement(m.EuiHeaderSectionItem,null,l.a.createElement(m.EuiHeaderLinks,null,l.a.createElement(m.EuiToolTip,{content:l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.header.readOnlyTooltip",defaultMessage:"You can view Integrations, but to perform all actions you need additional privileges."})},l.a.createElement(m.EuiButtonEmpty,{iconType:"glasses",className:n,disabled:!0},l.a.createElement(T.FormattedMessage,{id:"xpack.fleet.integrations.header.readOnlyBtn",defaultMessage:"Read-only"}))))):null))},na=new f.QueryClient,la=()=>l.a.createElement(l.a.Fragment,null),ia=Object(n.memo)((({children:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:r,setHeaderActionMenu:s,fleetStatus:o})=>{var u;const m=b()(t.theme.theme$),p=m&&m.darkMode,h=(null===(u=t.cloud)||void 0===u?void 0:u.CloudContextProvider)||la;return l.a.createElement(x.a,d()({},t,{theme:t.theme,modify:{breakpoint:{xxl:1600}}}),l.a.createElement(y.a,{coreStart:{application:t.application}},l.a.createElement(v.KibanaContextProvider,{services:{...t}},l.a.createElement(c.b.Provider,{value:a},l.a.createElement(c.e.Provider,{value:i},l.a.createElement(k.EuiThemeProvider,{darkMode:p},l.a.createElement(f.QueryClientProvider,{client:na},l.a.createElement(E.ReactQueryDevtools,{initialIsOpen:!1}),l.a.createElement(j.f.Provider,{value:r},l.a.createElement(c.c,{defaultFleetStatus:o},l.a.createElement(t.customIntegrations.ContextProvider,null,l.a.createElement(h,null,l.a.createElement(g.a,{history:n},l.a.createElement(zt.a,null,l.a.createElement(j.a,null,l.a.createElement(j.e,{startServices:t},l.a.createElement(j.c,null,l.a.createElement(aa,{setHeaderActionMenu:s,startServices:t}),e))))))))))))))))})),ra=Object(n.memo)((()=>{var e;const t=Object(j.q)(),a=Object(c.Ub)();return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,null,l.a.createElement(o.b,{path:O.d.integrations},l.a.createElement(Lt,null)),l.a.createElement(o.b,{render:({location:e})=>{if(!(""===e.pathname&&e.hash.length>0))return l.a.createElement(s.Redirect,{to:O.j.integrations_all({})[1]});const t=e.hash.replace(/^#/,"");return l.a.createElement(s.Redirect,{to:{...e,pathname:t,hash:void 0}})}})),t.isEnrollmentFlyoutOpen&&l.a.createElement(m.EuiPortal,null,l.a.createElement(N.b,{defaultMode:a.isReady&&null!==(e=a.missingRequirements)&&void 0!==e&&e.includes("fleet_server")?"managed":"standalone",isIntegrationFlow:!0,onClose:()=>t.closeEnrollmentFlyout()})),t.isFleetServerFlyoutOpen&&l.a.createElement(m.EuiPortal,null,l.a.createElement(M.l,{onClose:()=>t.closeFleetServerFlyout()})))})),sa=({isAllowed:e=!1,restrictedPath:t="/",...a})=>e?l.a.createElement(o.b,a):l.a.createElement(s.Redirect,{to:{pathname:t}}),oa=({basepath:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:r,setHeaderActionMenu:s})=>l.a.createElement(ia,{basepath:e,startServices:t,config:a,history:n,kibanaVersion:i,extensions:r,setHeaderActionMenu:s},l.a.createElement(ra,null));function ca(e,{element:t,appBasePath:a,history:n,setHeaderActionMenu:i},s,o,c,u){return r.a.render(l.a.createElement(u,null,l.a.createElement(oa,{basepath:a,startServices:e,config:s,history:n,kibanaVersion:o,extensions:c,setHeaderActionMenu:i})),t),()=>{r.a.unmountComponentAtNode(t)}}const ua=e=>{e.chrome.docTitle.reset(),e.chrome.setBreadcrumbs([]),c.i.stop()}}}]);