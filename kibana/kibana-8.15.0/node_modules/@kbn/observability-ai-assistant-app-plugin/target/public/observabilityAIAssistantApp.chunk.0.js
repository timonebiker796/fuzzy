/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observabilityAIAssistantApp_bundle_jsonpfunction=window.observabilityAIAssistantApp_bundle_jsonpfunction||[]).push([[0],Array(43).concat([function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(14);const s=()=>Object(i.useKibana)()},function(e,t,n){"use strict";e.exports=n(76)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),s=n(16);function r(){const e=Object(i.useContext)(s.a);if(!e)throw new Error("ObservabilityAIAssistantContext not set. Did you wrap your component in `<ObservabilityAIAssistantProvider/>`?");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var i=n(72),s=n(73);function r(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=r,t.parseJSON=function(e,t){return r((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return r((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(i){return e(i)?t.right(i):t.left(n(i))}},t.fold=function(e,n){return function(i){return t.isLeft(i)?e(i.left):n(i.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(i){return e(i)?t.right(i):t.left(n(i))}))};var a=function(e,n){return s.pipe(e,t.map(n))},o=function(e,n){return s.pipe(e,t.ap(n))},c=function(e,n){return s.pipe(e,t.chain(n))},l=function(e,n,i){return s.pipe(e,t.reduce(n,i))},u=function(e){return function(n,i){var r=t.foldMap(e);return s.pipe(n,r(i))}},d=function(e,n,i){return s.pipe(e,t.reduceRight(n,i))},f=function(e){var n=t.traverse(e);return function(e,t){return s.pipe(e,n(t))}},p=function(e,n,i){return s.pipe(e,t.bimap(n,i))},b=function(e,n){return s.pipe(e,t.mapLeft(n))},g=function(e,n){return s.pipe(e,t.alt(n))},v=function(e,n){return s.pipe(e,t.extend(n))},m=function(e,n){return i.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function y(e){return{concat:function(n,i){return t.isLeft(n)?n:t.isLeft(i)?i:t.right(e.concat(n.right,i.right))}}}function j(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:a,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,i){return t.isLeft(e)||i(e.right)?e:n},filterMap:function(e,i){if(t.isLeft(e))return e;var s=i(e.right);return"None"===s._tag?n:t.right(s.value)},partition:function(e,i){return t.isLeft(e)?{left:e,right:e}:i(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,i){if(t.isLeft(e))return{left:e,right:e};var s=i(e.right);return t.isLeft(s)?{left:t.right(s.left),right:n}:{left:n,right:t.right(s.right)}}}}function h(e){return{URI:t.URI,_E:void 0,map:a,ap:function(n,i){return t.isLeft(n)?t.isLeft(i)?t.left(e.concat(n.left,i.left)):n:t.isLeft(i)?i:t.right(n.right(i.right))},of:t.of}}function x(e){return{URI:t.URI,_E:void 0,map:a,alt:function(n,i){if(t.isRight(n))return n;var s=i();return t.isLeft(s)?t.left(e.concat(n.left,s.left)):s}}}function O(e,n){return{concat:function(i,s){return t.isLeft(i)?t.isLeft(s)?t.left(e.concat(i.left,s.left)):i:t.isLeft(s)?s:t.right(n.concat(i.right,s.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(i){return t.isLeft(i)?t.left(e(i.left)):t.right(n(i.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return s.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return s.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return s.pipe(n,t.chainW((function(n){return s.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(s.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(s.identity),t.reduce=function(e,n){return function(i){return t.isLeft(i)?e:n(e,i.right)}},t.foldMap=function(e){return function(n){return function(i){return t.isLeft(i)?e.empty:n(i.right)}}},t.reduceRight=function(e,n){return function(i){return t.isLeft(i)?e:n(i.right,e)}},t.traverse=function(e){return function(n){return function(i){return t.isLeft(i)?e.of(t.left(i.left)):e.map(n(i.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(i){return t.isLeft(i)?"left("+e.show(i.left)+")":"right("+n.show(i.right)+")"}}},t.getEq=function(e,n){return{equals:function(i,s){return i===s||(t.isLeft(i)?t.isLeft(s)&&e.equals(i.left,s.left):t.isRight(s)&&n.equals(i.right,s.right))}}},t.getSemigroup=function(e){return{concat:function(n,i){return t.isLeft(i)?n:t.isLeft(n)?i:t.right(e.concat(n.right,i.right))}}},t.getApplySemigroup=y,t.getApplyMonoid=function(e){return{concat:y(e).concat,empty:t.right(e.empty)}},t.getFilterable=j,t.getWitherable=function(e){var n=j(e);return{URI:t.URI,_E:void 0,map:a,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:f,sequence:t.sequence,reduce:l,foldMap:u,reduceRight:d,wither:function(e){var t=f(e);return function(i,s){return e.map(t(i,s),n.compact)}},wilt:function(e){var t=f(e);return function(i,s){return e.map(t(i,s),n.separate)}}}},t.getApplicativeValidation=h,t.getAltValidation=x,t.getValidation=function(e){var n=h(e),i=x(e);return{URI:t.URI,_E:void 0,map:a,of:t.of,chain:c,bimap:p,mapLeft:b,reduce:l,foldMap:u,reduceRight:d,extend:v,traverse:f,sequence:t.sequence,chainRec:m,throwError:t.throwError,ap:n.ap,alt:i.alt}},t.getValidationSemigroup=O,t.Functor={URI:t.URI,map:a},t.Applicative={URI:t.URI,map:a,ap:o,of:t.of},t.Monad={URI:t.URI,map:a,ap:o,of:t.of,chain:c},t.Foldable={URI:t.URI,reduce:l,foldMap:u,reduceRight:d},t.Traversable={URI:t.URI,map:a,reduce:l,foldMap:u,reduceRight:d,traverse:f,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:p,mapLeft:b},t.Alt={URI:t.URI,map:a,alt:g},t.Extend={URI:t.URI,map:a,extend:v},t.ChainRec={URI:t.URI,map:a,ap:o,chain:c,chainRec:m},t.MonadThrow={URI:t.URI,map:a,ap:o,of:t.of,chain:c,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:O(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:a,of:t.of,ap:o,chain:c,reduce:l,foldMap:u,reduceRight:d,traverse:f,sequence:t.sequence,bimap:p,mapLeft:b,alt:g,extend:v,chainRec:m,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,i){return!t.isLeft(i)&&e.equals(n,i.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(s.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(i){return s.pipe(n(i),t.map((function(t){return s.bind_(i,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return s.flow(t.map((function(t){return function(n){return s.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var i=n(4);const s=i.i18n.translate("xpack.observabilityAiAssistant.assistantSetup.title",{defaultMessage:"Welcome to Elastic AI Assistant"}),r=i.i18n.translate("xpack.observabilityAiAssistant.emptyConversationTitle",{defaultMessage:"New conversation"}),a=i.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.title",{defaultMessage:"Upgrade your license"})},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(1),s=n(64),r=n(43);function a(){const{services:{http:e,application:{navigateToApp:t}}}=Object(r.a)(),n=(...e)=>s.a.link(...e);return Object(i.useMemo)((()=>({...s.a,push:(...e)=>{const i=n(...e);t("observabilityAIAssistant",{path:i,replace:!1})},replace:(e,...i)=>{const s=n(e,...i);t("observabilityAIAssistant",{path:s,replace:!0})},link:(t,...i)=>e.basePath.prepend("/app/observabilityAIAssistant"+n(t,...i))})),[t,e.basePath])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(43);function s(){const{services:{plugins:{start:{observabilityAIAssistant:e}}}}=Object(i.a)();return e.useGenAIConnectors()}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return M})),n.d(t,"e",(function(){return F}));var i=n(28),s=n(24),r=n(46);function a(...e){return{...new i.Type("merge",(t=>e.every((e=>e.is(t)))),((t,n)=>{const a=[],o=[];e.map(((e,i)=>e.validate(t,n.concat({key:String(i),type:e,actual:t})))).forEach((e=>{Object(r.isLeft)(e)?a.push(...e.left):o.push(e.right)}));const c=Object(s.merge)({},...o);return a.length>0?i.failures(a):i.success(c)}),(t=>e.reduce(((e,t)=>t.encode(e)),t))),_tag:"MergeType",types:e}}const o=["StringType","NumberType","BooleanType","ArrayType","DictionaryType","InterfaceType","PartialType","UnionType","IntersectionType","MergeType"],c=e=>"_tag"in e&&o.includes(e._tag);function l(e){if(!c(e))return e;switch(e._tag){case"ArrayType":return i.array(l(e.type));case"DictionaryType":return i.dictionary(e.domain,l(e.codomain));case"InterfaceType":return i.exact(i.interface(Object(s.mapValues)(e.props,l)));case"PartialType":return i.exact(i.partial(Object(s.mapValues)(e.props,l)));case"IntersectionType":return i.intersection(e.types.map(l));case"UnionType":return i.union(e.types.map(l));case"MergeType":return a(l(e.types[0]),l(e.types[1]));default:return e}}var u=n(74),d=n(66),f=n.n(d),p=n(70);function b(e){return e.replace(/(?:{([^\/]+)})/g,":$1")}class NotFoundRouteException extends Error{constructor(e){super(e)}}function g(e){const t=new Map,n=new Map,i=Object.entries(e).map((([e,t])=>o({...t,path:e})));function o(e){var i,s,r;const a={component:()=>e.element,routes:null!==(i=null===(s=Object.entries(null!==(r=e.children)&&void 0!==r?r:{}))||void 0===s?void 0:s.map((([e,t])=>o({...t,path:e}))))&&void 0!==i?i:[],exact:!e.children||0===Object.values(e.children).length,path:b(e.path)};return t.set(a,e),n.set(e,a),a}function c(e){const n=Object(p.matchRoutes)(i,b(e));if(!n.length)throw new Error(`No matching route found for ${e}`);return n.map((e=>t.get(e.route)))}const d=(...e)=>{let n=!1;"boolean"==typeof e[e.length-1]&&(n=e[e.length-1],e.pop());const a=e[e.length-1];e.pop();let o=e;0===o.length&&(o=[a.pathname||"/"]);let c=[],d=-1;const g=o.map((t=>{const n=t.endsWith("/*")||0===e.length?1:0;return{length:t.length,greedy:n,path:t}})),v=Object(s.orderBy)(g,["greedy","length"],["desc","desc"]);for(const{path:e,greedy:t}of v){if(c=Object(p.matchRoutes)(i,b(a.pathname)),d=t?c.length-1:Object(s.findLastIndex)(c,(t=>t.route.path===b(e))),-1!==d)break;d=-1}if(-1===d){if(n)return[];let e;throw e=1===o.length?`${o[0]} does not match current path ${a.pathname}`:`None of ${o.join(", ")} match current path ${a.pathname}`,new Error(e)}if(!c.some((e=>e.match.isExact)))throw new NotFoundRouteException("No route was matched");return c.slice(0,d+1).map((e=>{const n=t.get(e.route);if(null!=n&&n.params){var i;const t=l(n.params).decode(Object(s.merge)({},null!==(i=n.defaults)&&void 0!==i?i:{},{path:e.match.params,query:f.a.parse(a.search,{decode:!0})}));if(Object(r.isLeft)(t))throw new Error(u.PathReporter.report(t).join("\n"));return{match:{...e.match,params:t.right},route:n}}return{match:{...e.match,params:{path:{},query:{}}},route:n}}))};return{link:(e,...t)=>((e,...t)=>{const n=t[0],i=Object(s.merge)({path:{},query:{}},n),o=c(e=e.split("/").map((e=>{const t=e.match(/(?:{([a-zA-Z]+)})/);return t?i.path[t[1]]:e})).join("/")),l=a(...Object(s.compact)(o.map((e=>e.params)))),d=Object(s.merge)({},...o.map((e=>{var t;return null!==(t=e.defaults)&&void 0!==t?t:{}})),i),p=l.decode(d);if(Object(r.isLeft)(p))throw new Error(u.PathReporter.report(p).join("\n"));return f.a.stringifyUrl({url:e,query:d.query},{encode:!0})})(e,...t),getParams:(...e)=>{const t=d(...e);return t.length?Object(s.merge)({path:{},query:{}},...t.map((e=>{var t,n;return Object(s.merge)({},null!==(t=null===(n=e.route)||void 0===n?void 0:n.defaults)&&void 0!==t?t:{},e.match.params)}))):void 0},matchRoutes:(...e)=>d(...e),getRoutePath:e=>e.path,getRoutesToMatch:e=>c(e)}}var v=n(1),m=n.n(v),y=n(0);const j=Object(v.createContext)(void 0);function h({element:e,children:t}){return Object(y.jsx)(j.Provider,{value:{element:e}},t)}function x(){const e=Object(v.useContext)(j);if(!e)throw new Error("Outlet context not available");return e.element||null}const O=Object(v.createContext)(void 0),A=({match:e,element:t,children:n})=>Object(y.jsx)(O.Provider,{value:{match:e,element:t}},Object(y.jsx)(h,{element:t},n));var E=n(25);const w=Object(v.createContext)(void 0),C=({router:e,children:t})=>Object(y.jsx)(w.Provider,{value:e},t);function S(){const e=Object(v.useContext)(w);if(!e)throw new Error("Router not found in context");return e}function k(){return function(e){const t=S(),n=Object(E.useLocation)();return Object(v.useMemo)((()=>void 0===e?t.matchRoutes(n):t.matchRoutes(e,n)),[e,t,n])}().concat().reverse().reduce(((e,t)=>{const{element:n}=t.route;return Object(y.jsx)(A,{match:t,element:e},n)}),Object(y.jsx)(m.a.Fragment,null))}var T=n(32);const I=({children:e,...t})=>Object(y.jsx)(E.Router,t,Object(y.jsx)(T.CompatRouter,null,e));function M({children:e,router:t,history:n}){return Object(y.jsx)(I,{history:n},Object(y.jsx)(C,{router:t},e))}function F(...e){const t=S(),n=Object(E.useLocation)();let i=!1;const s=e[e.length-1];return"boolean"==typeof s&&(i=s,e.pop()),Object(v.useMemo)((()=>t.getParams(...e,n,i)),[t,...e,n,i])}},function(e,t,n){"use strict";e.exports=n(78)},function(e,t,n){"use strict";e.exports=n(85)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.default=function(e){var t=i.useRef();return i.useEffect((function(){t.current=e})),t.current}},function(e,t,n){"use strict";n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return E}));var i=n(3),s=n(44),r=n(4),a=n(1),o=n(6),c=n.n(o),l=n(56),u=n(57),d=n(58),f=n(49),p=n(43),b=n(59),g=n(60),v=n(63),m=n(61),y=n(65),j=n(0);const h=260,x=34,O=400;let A=function(e){return e.PUSH="push",e.OVERLAY="overlay",e}({});function E({initialTitle:e,initialMessages:t,initialFlyoutPositionMode:n,isOpen:o,onClose:E}){const{euiTheme:C}=Object(i.useEuiTheme)(),S=Object(i.useCurrentEuiBreakpoint)(),k=Object(d.a)(),T=Object(f.a)(),I=Object(b.a)(),[M,F]=Object(a.useState)(void 0),[L,R]=Object(a.useState)(n||A.OVERLAY),[_,P]=Object(a.useState)(!1),[N,U]=Object(a.useState)(null),[z,B]=Object(a.useState)(!1),{services:{plugins:{start:{observabilityAIAssistant:{ObservabilityAIAssistantMultipaneFlyoutContext:G}}}}}=Object(p.a)(),q=Object(u.a)(),{key:D,updateConversationIdInPlace:V}=Object(l.a)(M),W=Object(s.css)({name:"mysz59",styles:"max-inline-size:100%!important"}),H=Object(s.css)("max-width:",_?h:x,"px;min-width:",_?h:x,"px;border-right:solid 1px ",C.border.color,";",""),$=Object(s.css)("position:absolute;margin-top:16px;margin-left:",_?h-x:5,"px;z-index:1;",""),J=Object(s.css)("color:",C.colors.primary,";",""),K=Object(s.css)({name:"nlg3or",styles:"height:100%;flex-wrap:nowrap"}),Y=Object(s.css)({name:"ovk77c",styles:"min-width:0"}),Q=Object(s.css)({name:"eivff4",styles:"display:none"}),Z=Object(s.css)("position:absolute;bottom:30px;margin-left:",_?h-x:5,"px;z-index:1;","");return o?Object(j.jsx)(G.Provider,{value:{container:N,setVisibility:B}},Object(j.jsx)(i.EuiFlyoutResizable,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatFlyout.euiFlyoutResizable.aiAssistantForObservabilityLabel",{defaultMessage:"AI Assistant for Observability Chat Flyout"}),className:W,closeButtonProps:{css:{marginRight:"xs"===S?C.size.xs:C.size.s,marginTop:"xs"===S?C.size.xs:C.size.s}},paddingSize:"m",pushAnimation:!0,minWidth:O,size:w({breakpoint:S,expanded:_,isSecondSlotVisible:z}),type:L,onClose:()=>{E(),B(!1),N&&c.a.unmountComponentAtNode(N)}},Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"none",className:K},Object(j.jsx)(i.EuiFlexItem,{className:"xs"===S?Q:H},Object(j.jsx)(i.EuiPopover,{anchorPosition:"downLeft",className:$,button:Object(j.jsx)(i.EuiToolTip,{content:_?r.i18n.translate("xpack.observabilityAiAssistant.chatFlyout.euiToolTip.collapseConversationListLabel",{defaultMessage:"Collapse conversation list"}):r.i18n.translate("xpack.observabilityAiAssistant.chatFlyout.euiToolTip.expandConversationListLabel",{defaultMessage:"Expand conversation list"}),display:"block"},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatFlyout.euiButtonIcon.expandConversationListLabel",{defaultMessage:"Expand conversation list"}),className:J,color:"text","data-test-subj":"observabilityAiAssistantChatFlyoutButton",iconType:_?"transitionLeftIn":"transitionLeftOut",onClick:()=>P(!_)}))}),_?Object(j.jsx)(y.a,{conversations:q.conversations,isLoading:q.isLoading,selectedConversationId:M,onConversationDeleteClick:e=>{q.deleteConversation(e).then((()=>{e===M&&F(void 0)}))},onConversationSelect:e=>{F(e)}}):Object(j.jsx)(i.EuiPopover,{anchorPosition:"downLeft",button:Object(j.jsx)(i.EuiToolTip,{content:r.i18n.translate("xpack.observabilityAiAssistant.chatFlyout.euiToolTip.newChatLabel",{defaultMessage:"New chat"}),display:"block"},Object(j.jsx)(g.a,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatFlyout.euiButtonIcon.newChatLabel",{defaultMessage:"New chat"}),collapsed:!0,"data-test-subj":"observabilityAiAssistantNewChatFlyoutButton",onClick:()=>{F(void 0)}})),className:Z})),Object(j.jsx)(i.EuiFlexItem,{className:Y},Object(j.jsx)(v.a,{key:D,connectors:T,currentUser:k,flyoutPositionMode:L,initialTitle:e,initialMessages:t,initialConversationId:M,knowledgeBase:I,showLinkToConversationsApp:!0,onConversationUpdate:e=>{M||V(e.conversation.id),F(e.conversation.id),q.conversations.refresh()},onToggleFlyoutPositionMode:e=>{R(e)}})),Object(j.jsx)(i.EuiFlexItem,{style:{maxWidth:z?O:0,paddingTop:"56px"}},Object(j.jsx)(m.a,{setContainer:U,visible:z,style:{borderTop:`solid 1px ${C.border.color}`,borderLeft:`solid 1px ${C.border.color}`}}))))):null}const w=({breakpoint:e,expanded:t,isSecondSlotVisible:n})=>"xs"===e?"90vw":t||n?t&&!n?`calc(40vw + ${h-x}px`:!t&&n?`calc(40vw + ${O}px`:`calc(40vw + ${h-x}px + ${O}px`:"40vw"},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),s=n(27);function r(e){const t=Object(i.useRef)(Object(s.v4)()),n=Object(i.useRef)(e);return n.current!==e&&(t.current=Object(s.v4)()),n.current=e,{updateConversationIdInPlace:e=>{n.current=e},key:t.current}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(1),s=n(4),r=n(12),a=n(43),o=n(45);function c(){const e=Object(o.a)(),[t,n]=Object(i.useState)(!1),{services:{notifications:c}}=Object(a.a)(),l=Object(r.useAbortableAsync)((({signal:t})=>(n(!0),e.callApi("POST /internal/observability_ai_assistant/conversations",{signal:t}))),[e]);return Object(i.useEffect)((()=>{n(l.loading)}),[l.loading]),{deleteConversation:t=>(n(!0),(async t=>{n(!0);try{await e.callApi("DELETE /internal/observability_ai_assistant/conversation/{conversationId}",{params:{path:{conversationId:t}},signal:null}),l.refresh()}catch(e){c.toasts.addError(e,{title:s.i18n.translate("xpack.observabilityAiAssistant.flyout.failedToDeleteConversation",{defaultMessage:"Could not delete conversation"})})}})(t).finally((()=>{n(!1)}))),conversations:l,isLoading:l.loading||t}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),s=n(43);function r(){const{services:{plugins:{start:{security:e}}}}=Object(s.a)(),[t,n]=Object(i.useState)();return Object(i.useEffect)((()=>{(async()=>{try{const t=await e.authc.getCurrentUser();n(t)}catch{n(void 0)}})()}),[e]),t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(4),s=n(1),r=n(12),a=n(43),o=n(45);function c(){var e;const{notifications:{toasts:t},plugins:{start:{ml:n}}}=Object(a.a)().services,c=Object(o.a)(),l=Object(r.useAbortableAsync)((({signal:e})=>c.callApi("GET /internal/observability_ai_assistant/kb/status",{signal:e})),[c]),[u,d]=Object(s.useState)(!1),[f,p]=Object(s.useState)();return Object(s.useMemo)((()=>{let e=0;const s=()=>(d(!0),c.callApi("POST /internal/observability_ai_assistant/kb/setup",{signal:null}).then((()=>{var e;return null===(e=n.mlApi)||void 0===e?void 0:e.savedObjects.syncSavedObjects()})).then((()=>{l.refresh()})).catch((n=>{var r,a;if((503===(null===(r=n.body)||void 0===r?void 0:r.statusCode)||504===(null===(a=n.body)||void 0===a?void 0:a.statusCode))&&e<5)return e++,s();p(n),t.addError(n,{title:i.i18n.translate("xpack.observabilityAiAssistant.errorSettingUpKnowledgeBase",{defaultMessage:"Could not set up Knowledge Base"})})})).finally((()=>{d(!1)})));return{status:l,install:s,isInstalling:u,installError:f}}),[l,u,f,c,null===(e=n.mlApi)||void 0===e?void 0:e.savedObjects,t])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(2),s=n.n(i),r=(n(1),n(3)),a=n(4),o=n(0);function c(e){const{collapsed:t,...n}=e;return e.collapsed?Object(o.jsx)(r.EuiButtonIcon,s()({"data-test-subj":"observabilityAiAssistantNewChatButtonButton",iconType:"newChat",size:"xs"},n)):Object(o.jsx)(r.EuiButton,s()({"data-test-subj":"observabilityAiAssistantNewChatButton",iconType:"newChat"},n),a.i18n.translate("xpack.observabilityAiAssistant.newChatButton",{defaultMessage:"New chat"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(3),s=n(1),r=n(0);function a({visible:e,setContainer:t,style:n}){const a=Object(s.useRef)(null);return Object(s.useEffect)((()=>{null!=a&&a.current&&t&&t(a.current)}),[t]),Object(r.jsx)(i.EuiFlexGroup,{className:"lnsConfigPanel__overlay",style:{...n,padding:0,position:"relative",blockSize:e?"100%":0},direction:"column",ref:a,gutterSize:"none"})}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return st}));var i=n(3),s=n(44),r=n(4),a=n(12),o=n(26),c=n(24),l=n(1),u=n.n(l),d=n(47),f=n(43);function p(e){const t=Object(l.useRef)(e);return t.current!==e&&console.trace(`Variable changed from ${t.current} to ${e}, but only the initial value will be taken into account`),t.current}var b=n(45);function g({title:e=d.b}={}){return{"@timestamp":(new Date).toISOString(),messages:[],conversation:{title:e},labels:{},numeric_labels:{},public:!1}}const v=[];var m=n(5),y=n.n(m);const j=()=>{const{services:{plugins:{start:{licensing:e}}}}=Object(f.a)(),t=y()(e.license$);return{getLicense:()=>null!=t?t:null,hasAtLeast:Object(l.useCallback)((e=>{if(t)return!!t&&t.isAvailable&&t.isActive&&t.hasAtLeast(e)}),[t])}};function h(){const{services:{plugins:{start:{observabilityAIAssistant:e}}}}=Object(f.a)();return e.useObservabilityAIAssistantChatService()}var x=n(0),O={name:"1y0ex1",styles:"max-width:400px"};function A({mode:e,selectedFunctionName:t,onSelectFunction:n,disabled:s}){const{getFunctions:a}=h(),o=a(),[c,u]=Object(l.useState)(E({functions:o,selectedFunctionName:t})),[d,f]=Object(l.useState)(!1),p=()=>{if(t)return n(void 0),void f(!1);f(!d)};return Object(l.useEffect)((()=>{const e=E({functions:o,selectedFunctionName:t});e.length!==c.length&&u(e)}),[c.length,o,t]),Object(x.jsx)(i.EuiPopover,{anchorPosition:"downLeft",button:Object(x.jsx)(i.EuiToolTip,{key:e,content:"prompt"===e?r.i18n.translate("xpack.observabilityAiAssistant.functionListPopover.euiToolTip.selectAFunctionLabel",{defaultMessage:"Select a function"}):r.i18n.translate("xpack.observabilityAiAssistant.functionListPopover.euiToolTip.clearFunction",{defaultMessage:"Clear function"}),display:"block"},Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.functionListPopover.euiButtonIcon.selectAFunctionLabel",{defaultMessage:"Select function"}),"data-test-subj":"observabilityAiAssistantFunctionListPopoverButton",disabled:s,iconType:t?"cross":"plusInCircle",size:"xs",onClick:p})),closePopover:p,css:O,initialFocus:"#searchFilterList",panelPaddingSize:"none",isOpen:d},Object(x.jsx)(i.EuiSelectable,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.prompt.functionList.functionList",{defaultMessage:"Function list"}),listProps:{isVirtualized:!1,showIcons:!1},options:c,renderOption:w,searchable:!0,searchProps:{"data-test-subj":"searchFiltersList",id:"searchFilterList",placeholder:r.i18n.translate("xpack.observabilityAiAssistant.prompt.functionList.filter",{defaultMessage:"Filter"})},singleSelection:!0,onChange:e=>{const t=e.filter((e=>!("checked"in e)));var i;t&&1===t.length&&(i={...t[0],checked:"on"},f(!1),n(i.label))}},((e,t)=>Object(x.jsx)("div",{style:{overflow:"hidden"}},t,Object(x.jsx)("div",{style:{width:500,height:350,overflowY:"scroll"}},e)))))}function E({functions:e,selectedFunctionName:t}){return e.filter((e=>e.visibility!==a.FunctionVisibility.AssistantOnly&&e.visibility!==a.FunctionVisibility.Internal)).map((e=>({label:e.name,searchableLabel:e.descriptionForUser||e.description,checked:e.name===t?"on":"off"})))}function w(e,t){return Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"xs",direction:"column"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"xs"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiText,{size:"s"},Object(x.jsx)("strong",null,Object(x.jsx)(i.EuiHighlight,{search:t},e.label)," ",Object(x.jsx)(i.EuiBetaBadge,{label:"beta",size:"s",style:{verticalAlign:"middle"}})))),Object(x.jsx)(i.EuiFlexItem,{grow:!1}))),Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiText,{size:"xs",style:{textOverflow:"ellipsis",overflow:"hidden",marginBottom:4}},Object(x.jsx)(i.EuiHighlight,{search:t},e.searchableLabel||""))))}var C=n(54),S=n.n(C),k=n(33),T=n(34);function I(e){const t={};return function({properties:e,required:n}){for(const i in e)if(e.hasOwnProperty(i)){const s=e[i];"object"===s.type?t[i]=I(s):null!=n&&n.includes(i)&&("array"===s.type&&(t[i]=[]),"number"===s.type&&(t[i]=1),"string"===s.type&&(t[i]=""))}}(e),t}function M(e){try{return JSON.parse(e)}catch(t){return e}}const{editor:F,languages:L,Uri:R}=T.monaco,_=({functionName:e,initialJson:t})=>{const n=h().getFunctions().find((t=>t.name===e)),[i,s]=Object(l.useState)(t),r=`http://elastic.co/${e}.json`,a=Object(l.useMemo)((()=>R.parse(r)),[r]);return Object(l.useEffect)((()=>{s(t)}),[e]),Object(l.useMemo)((()=>{if(!n||!a)return{};const e={...n.parameters},t=i?JSON.stringify(M(i),null,4):n.parameters.properties?JSON.stringify(I(n.parameters),null,4):"";L.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:r,fileMatch:[String(a)],schema:e}]});let s=F.getModel(a);return null===s?s=F.createModel(t,"json",a):s.setValue(t),{model:s,initialJsonString:t}}),[r,n,i,a])},P=Object(s.css)({name:"1r5gb7q",styles:"display:inline-block"});function N({functionName:e,functionPayload:t,onChange:n,onFocus:s,onBlur:o}){var c;const u=Object(l.useRef)(null),[d,f]=Object(l.useState)(0),p=S()(t),{model:b,initialJsonString:g}=_({functionName:e,initialJson:t}),v=Object(l.useCallback)((()=>{const e=(null==b?void 0:b.getLineCount())||0;e!==d&&f(e+1)}),[d,b]);return Object(l.useEffect)((()=>{v()}),[b,v]),Object(l.useEffect)((()=>{void 0===p&&g&&n({role:a.MessageRole.Assistant,content:"",function_call:{name:e,trigger:a.MessageRole.User,arguments:g}})}),[e,t,g,n,p]),null===(c=u.current)||void 0===c||c.onDidBlurEditorWidget((()=>{o()})),Object(x.jsx)(i.EuiPanel,{paddingSize:"none",hasShadow:!1,hasBorder:!0},Object(x.jsx)(i.EuiCode,{className:P},e),Object(x.jsx)(k.CodeEditor,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatPromptEditor.codeEditor.payloadEditorLabel",{defaultMessage:"payloadEditor"}),"data-test-subj":"observabilityAiAssistantChatPromptEditorCodeEditor",editorDidMount:e=>{u.current=e,e.focus(),s()},fullWidth:!0,height:"180px",isCopyable:!0,languageId:"json",languageConfiguration:{autoClosingPairs:[{open:"{",close:"}"}]},options:{accessibilitySupport:"off",acceptSuggestionOnEnter:"on",automaticLayout:!0,autoClosingQuotes:"always",autoIndent:"full",contextmenu:!0,fontSize:12,formatOnPaste:!0,formatOnType:!0,inlayHints:{enabled:"on"},lineNumbers:"on",minimap:{enabled:!1},model:b,overviewRulerBorder:!1,quickSuggestions:!0,scrollbar:{alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,suggestOnTriggerCharacters:!0,tabSize:2,wordWrap:"on",wrappingIndent:"indent"},transparentBackground:!0,value:t||"",onChange:t=>{v(),n({role:a.MessageRole.Assistant,content:"",function_call:{name:e,trigger:a.MessageRole.User,arguments:t}})}}))}const U=Object(s.css)({name:"o9xm9i",styles:"max-inline-size:100%"}),z=Object(s.css)({name:"1q215yv",styles:"max-height:200px;width:100%"}),B=Object(s.css)({name:"1o34ysi",styles:".euiSelectableListItem__icon{display:none;}"});function G({disabled:e,prompt:t,lastUsedPrompts:n,onChange:s,onChangeHeight:o,onFocus:c,onBlur:d}){const f=Object(l.useRef)(null),[p,b]=Object(l.useState)(!1),g=Object(l.useCallback)((()=>{if(f.current){var e;f.current.style.minHeight="auto";const t=Math.min(null===(e=f.current)||void 0===e?void 0:e.scrollHeight,350);f.current.style.minHeight=t+"px",o(t)}}),[o]);return Object(l.useEffect)((()=>{const e=f.current;e&&e.focus()}),[]),Object(l.useEffect)((()=>{g()}),[g]),Object(l.useEffect)((()=>{void 0===t&&g()}),[g,t]),Object(x.jsx)(i.EuiInputPopover,{display:"flex",isOpen:p,closePopover:()=>{b(!1),c()},className:U,input:Object(x.jsx)(i.EuiTextArea,{className:z,"data-test-subj":"observabilityAiAssistantChatPromptEditorTextArea",disabled:e,fullWidth:!0,inputRef:f,placeholder:r.i18n.translate("xpack.observabilityAiAssistant.prompt.placeholder",{defaultMessage:"Send a message to the Assistant"}),resize:"vertical",rows:1,value:t||"",onChange:e=>{g(),s({role:a.MessageRole.User,content:e.currentTarget.value})},onFocus:c,onKeyDown:e=>{t||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),b(!0))},onBlur:d}),panelMinWidth:300,anchorPosition:"downLeft"},Object(x.jsx)(i.EuiSelectable,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.promptEditorNaturalLanguage.euiSelectable.selectAnOptionLabel",{defaultMessage:"Select an option"}),className:B,options:n.map((e=>({label:e}))),searchable:!0,singleSelection:!0,onChange:(e,t,n)=>{s({role:a.MessageRole.User,content:n.label}),b(!1)}},(e=>Object(x.jsx)(u.a.Fragment,null,e))))}const q="kibana.ai-assistant.last-used-prompts";function D({disabled:e,hidden:t,loading:n,initialRole:s,initialFunctionCall:o,initialContent:u,onChangeHeight:d,onSendTelemetry:f,onSubmit:p}){var b,g,v,m,y;const j=Object(l.useRef)(null),[h,O]=Object(l.useState)(null!=o&&o.name?"function":"prompt"),[E,w]=Object(l.useState)(!1),{lastUsedPrompts:C,addLastUsedPrompt:S}=function(){const[e,t]=function(e,t){const[n,i]=Object(l.useState)(0),s=Object(l.useMemo)((()=>function(e,t){const n=window.localStorage.getItem(e);if(null!==n)try{return JSON.parse(n)}catch(t){window.localStorage.removeItem(e),console.log(`Unable to decode: ${e}`)}return t}(e,t)),[e,n,t]),r=Object(l.useCallback)((t=>{void 0===t?window.localStorage.removeItem(e):(window.localStorage.setItem(e,JSON.stringify(t)),i(n+1))}),[e,n]);return Object(l.useEffect)((()=>{function t(t){t.key===e&&i(n+1)}return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[e,i,n]),Object(l.useMemo)((()=>[s,r]),[s,r])}(q,[]),n=Object(l.useCallback)((n=>t(Object(c.uniq)([n,...e]).slice(0,5))),[e,t]);return Object(l.useMemo)((()=>({lastUsedPrompts:e,addLastUsedPrompt:n})),[n,e])}(),k=s?{role:s,content:null!=u?u:"",...o?{function_call:o}:{}}:void 0,[T,I]=Object(l.useState)(k),M=Object(l.useMemo)((()=>{var e,t;let n=!1;if(null!=T&&null!==(e=T.function_call)&&void 0!==e&&e.name&&null!=T&&null!==(t=T.function_call)&&void 0!==t&&t.arguments){try{JSON.parse(T.function_call.arguments)}catch(e){n=!0}return n}}),[null==T||null===(b=T.function_call)||void 0===b?void 0:b.arguments,null==T||null===(g=T.function_call)||void 0===g?void 0:g.name]),F=e=>{I(e)},L=Object(l.useCallback)((()=>{if(n||!T)return;T.content&&S(T.content);const e=T;try{const e={"@timestamp":(new Date).toISOString(),message:T};p(e),I(void 0),O("prompt"),f({type:a.ObservabilityAIAssistantTelemetryEventType.UserSentPromptInChat,payload:e})}catch(n){var t;I(e),O(null!==(t=e.function_call)&&void 0!==t&&t.name?"function":"prompt")}}),[S,T,n,f,p]);return Object(l.useEffect)((()=>{const t=t=>{T&&!e&&!M&&E&&(t.shiftKey||t.key!==i.keys.ENTER||(t.preventDefault(),L()))};return window.addEventListener("keypress",t),()=>{window.removeEventListener("keypress",t)}}),[e,L,E,T,M]),Object(l.useEffect)((()=>{t?d(0):j.current&&d(j.current.clientHeight)}),[t,d]),Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"center",ref:j},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(A,{mode:h,selectedFunctionName:null==T||null===(v=T.function_call)||void 0===v?void 0:v.name,onSelectFunction:e=>{if(e)return O("function"),I({function_call:{name:e,trigger:a.MessageRole.Assistant},role:a.MessageRole.User}),void d(200);O("prompt"),I(void 0),j.current&&d(j.current.clientHeight)},disabled:n||e})),Object(x.jsx)(i.EuiFlexItem,null,"function"===h&&null!=T&&null!==(m=T.function_call)&&void 0!==m&&m.name?Object(x.jsx)(N,{functionName:T.function_call.name,functionPayload:T.function_call.arguments,onChange:F,onFocus:()=>w(!0),onBlur:()=>w(!1)}):Object(x.jsx)(G,{disabled:e,prompt:null==T?void 0:T.content,lastUsedPrompts:C,onChange:F,onChangeHeight:d,onFocus:()=>w(!0),onBlur:()=>w(!1)})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiButtonIcon,{"data-test-subj":"observabilityAiAssistantChatPromptEditorButtonIcon","aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatPromptEditor.euiButtonIcon.submitLabel",{defaultMessage:"Submit"}),disabled:n||e||M,display:"function"===h?null!=T&&null!==(y=T.function_call)&&void 0!==y&&y.name?"fill":"base":null!=T&&T.content?"fill":"base",iconType:"kqlFunction",isLoading:n,size:"m",onClick:L})))}function V({connectors:e,conversationId:t,disabled:n,onCopyConversationClick:s}){var o,c;const{application:{navigateToUrl:u,navigateToApp:d},http:p}=Object(f.a)().services,[b,g]=Object(l.useState)(!1),v=()=>{g(!b)};return Object(x.jsx)(i.EuiPopover,{isOpen:b,button:Object(x.jsx)(i.EuiToolTip,{content:r.i18n.translate("xpack.observabilityAiAssistant.chatActionsMenu.euiToolTip.moreActionsLabel",{defaultMessage:"More actions"}),display:"block"},Object(x.jsx)(i.EuiButtonIcon,{"data-test-subj":"observabilityAiAssistantChatActionsMenuButtonIcon",disabled:n,iconType:"boxesVertical",onClick:v,"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatActionsMenu.euiButtonIcon.menuLabel",{defaultMessage:"Menu"})})),panelPaddingSize:"none",closePopover:v},Object(x.jsx)(i.EuiContextMenu,{initialPanelId:0,panels:[{id:0,title:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.title",{defaultMessage:"Actions"}),items:[{name:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.knowledgeBase",{defaultMessage:"Manage knowledge base"}),onClick:()=>{v(),u(function(e){return e.basePath.prepend("/app/management/kibana/observabilityAiAssistantManagement?tab=knowledge_base")}(p))}},{name:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.settings",{defaultMessage:"AI Assistant Settings"}),onClick:()=>{v(),u(function(e){return e.basePath.prepend("/app/management/kibana/observabilityAiAssistantManagement")}(p))}},{name:Object(x.jsx)("div",{className:"eui-textTruncate"},r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.connector",{defaultMessage:"Connector"})," ",Object(x.jsx)("strong",null,null===(o=e.connectors)||void 0===o||null===(c=o.find((({id:t})=>t===e.selectedConnector)))||void 0===c?void 0:c.name)),panel:1},{name:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.copyConversation",{defaultMessage:"Copy conversation"}),disabled:!t,onClick:()=>{v(),s()}}]},{id:1,width:256,title:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.actions.connector",{defaultMessage:"Connector"}),content:Object(x.jsx)(i.EuiPanel,null,Object(x.jsx)(a.ConnectorSelectorBase,e),Object(x.jsx)(i.EuiButtonEmpty,{flush:"left",size:"xs","data-test-subj":"settingsTabGoToConnectorsButton",onClick:()=>{d("management",{path:"/insightsAndAlerting/triggersActionsConnectors/connectors"})}},r.i18n.translate("xpack.observabilityAiAssistant.settingsPage.goToConnectorsButtonLabel",{defaultMessage:"Manage connectors"})))}]}))}var W=n(48),H=n(55);const $=Object(s.css)({name:"ovk77c",styles:"min-width:0"}),J=Object(s.css)({name:"15d1wjc",styles:"padding-top:12px;padding-bottom:12px"}),K=Object(s.css)({name:"6gg7bn",styles:"padding-top:8px;padding-bottom:8px"});function Y({connectors:e,conversationId:t,flyoutPositionMode:n,licenseInvalid:o,loading:c,title:d,onCopyConversation:f,onSaveTitle:p,onToggleFlyoutPositionMode:b}){const g=Object(i.useEuiTheme)(),v=Object(i.useCurrentEuiBreakpoint)(),m=Object(W.a)(),[y,j]=Object(l.useState)(d);return Object(l.useEffect)((()=>{j(d)}),[d]),Object(x.jsx)(i.EuiPanel,{borderRadius:"none",className:"xs"===v?K:J,hasBorder:!1,hasShadow:!1,paddingSize:"xs"===v?"s":"m"},Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"m",responsive:!1,alignItems:"center"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},c?Object(x.jsx)(i.EuiLoadingSpinner,{size:"xs"===v?"m":"l"}):Object(x.jsx)(a.AssistantAvatar,{size:"xs"===v?"xs":"s"})),Object(x.jsx)(i.EuiFlexItem,{grow:!0,className:$},Object(x.jsx)(i.EuiInlineEditTitle,{heading:"h2",size:"xs"===v?"xs":"s",value:y,className:Object(s.css)("color:",d?g.euiTheme.colors.text:g.euiTheme.colors.subduedText,";",""),inputAriaLabel:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.editConversationInput",{defaultMessage:"Edit conversation"}),isReadOnly:!t||!e.selectedConnector||o||!Boolean(p),onChange:e=>{j(e.currentTarget.nodeValue||"")},onSave:e=>{p&&p(e)},onCancel:()=>{j(d)}})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s",responsive:!1},n&&b?Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiPopover,{anchorPosition:"downLeft",button:Object(x.jsx)(i.EuiToolTip,{content:"overlay"===n?r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.euiToolTip.flyoutModeLabel.dock",{defaultMessage:"Dock chat"}):r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.euiToolTip.flyoutModeLabel.undock",{defaultMessage:"Undock chat"}),display:"block"},Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.euiButtonIcon.toggleFlyoutModeLabel",{defaultMessage:"Toggle flyout mode"}),"data-test-subj":"observabilityAiAssistantChatHeaderButton",iconType:"overlay"===n?"menuRight":"menuLeft",onClick:()=>{n&&(null==b||b(n===H.b.OVERLAY?H.b.PUSH:H.b.OVERLAY))}}))})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiPopover,{anchorPosition:"downLeft",button:Object(x.jsx)(i.EuiToolTip,{content:r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.euiToolTip.navigateToConversationsLabel",{defaultMessage:"Navigate to conversations"}),display:"block"},Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatHeader.euiButtonIcon.navigateToConversationsLabel",{defaultMessage:"Navigate to conversations"}),"data-test-subj":"observabilityAiAssistantChatHeaderButton",iconType:"discuss",onClick:()=>{t?m.push("/conversations/{conversationId}",{path:{conversationId:t},query:{}}):m.push("/conversations/new",{path:{},query:{}})}}))}))):null,Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(V,{connectors:e,conversationId:t,disabled:o,onCopyConversationClick:f}))))))}var Q=n(2),Z=n.n(Q);function X({canCopy:e,canEdit:t,collapsed:n,editing:s,expanded:a,onToggleEdit:o,onToggleExpand:c,onCopyToClipboard:d}){const[f,p]=Object(l.useState)();return Object(l.useEffect)((()=>{const e=setTimeout((()=>{f&&p(void 0)}),800);return()=>{clearTimeout(e)}}),[f]),Object(x.jsx)(u.a.Fragment,null,t?Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.editPrompt",{defaultMessage:"Edit prompt"}),color:"text","data-test-subj":"observabilityAiAssistantChatItemActionsEditPromptButton",display:s?"fill":"empty",iconType:"documentEdit",onClick:o}):null,n?Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.inspectPrompt",{defaultMessage:"Inspect prompt"}),color:"text","data-test-subj":"observabilityAiAssistantChatItemActionsInspectPromptButton",display:a?"fill":"empty",iconType:a?"eyeClosed":"eye",onClick:c}):null,e?Object(x.jsx)(i.EuiPopover,{button:Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.copyMessage",{defaultMessage:"Copy message"}),color:"text","data-test-subj":"observabilityAiAssistantChatItemActionsCopyMessageButton",iconType:"copyClipboard",display:"copy"===f?"fill":"empty",onClick:()=>{p("copy"),d()}}),isOpen:"copy"===f,panelPaddingSize:"s",closePopover:()=>p(void 0)},Object(x.jsx)(i.EuiText,{size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.actions.copyMessageSuccessful",{defaultMessage:"Copied message"}))):null)}function ee(e,t){if(t&&t.color)return t.color;const n=ne(e).codePointAt(0)||97;return i.VISUALIZATION_COLORS[n%i.VISUALIZATION_COLORS.length]}function te(e,t){if(t&&t.initials)return t.initials;const n=ne(e).split(" "),i=Math.min(2,n.length);return n.splice(i,n.length),n.map((e=>e.substring(0,1))).join("")}function ne(e){return e.full_name||e.email||e.username}const ie=({user:e,avatar:t,...n})=>{const{euiTheme:s}=Object(i.useEuiTheme)();if(!e)return Object(x.jsx)(i.EuiAvatar,Z()({name:"",color:s.colors.lightestShade,initials:"?"},n));const r=function(e){const t=ne(e);return e.email&&e.email!==t?`${t} (${e.email})`:t}(e);return null!=t&&t.imageUrl?Object(x.jsx)(i.EuiAvatar,Z()({name:r,imageUrl:t.imageUrl,color:"plain"},n)):Object(x.jsx)(i.EuiAvatar,Z()({name:r,initials:te(e,t),initialsLength:2,color:ee(e,t)},n))},se=Object(s.css)({name:"16rkxwb",styles:"svg{width:16px;height:16px;}"});function re({currentUser:e,role:t,loading:n}){if(n||!e)return Object(x.jsx)(i.EuiLoadingSpinner,{size:"xl"});switch(t){case a.MessageRole.User:return Object(x.jsx)(ie,{user:e,size:"m","data-test-subj":"userMenuAvatar"});case a.MessageRole.Assistant:case a.MessageRole.Elastic:case a.MessageRole.Function:return Object(x.jsx)(i.EuiAvatar,{name:"Elastic Assistant",iconType:a.AssistantAvatar,color:"subdued",className:se});case a.MessageRole.System:return Object(x.jsx)(i.EuiAvatar,{name:"system",iconType:"dot",color:"subdued"});default:return null}}const ae=Object(s.css)({name:"1vx56qr",styles:"padding:4px 0;img{max-width:100%;}"}),oe=Object(s.css)({name:"14o5m2r",styles:"padding:12px 0"});function ce({editing:e,loading:t,functionCall:n,content:s,role:r,onActionClick:o,onSendTelemetry:l,onSubmit:u}){return e?Object(x.jsx)(i.EuiPanel,{paddingSize:"none",hasBorder:!1,hasShadow:!1,className:oe},Object(x.jsx)(D,{disabled:!1,hidden:!1,loading:!1,initialFunctionCall:n,initialContent:s,initialRole:r,onChangeHeight:c.noop,onSubmit:u,onSendTelemetry:l})):Object(x.jsx)(i.EuiPanel,{paddingSize:"none",hasBorder:!1,hasShadow:!1,className:ae},Object(x.jsx)(a.MessageText,{content:s||"",loading:t,onActionClick:o}))}function le(e){return e===a.MessageRole.User?r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.messages.user.label",{defaultMessage:"You"}):e===a.MessageRole.System?r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.messages.system.label",{defaultMessage:"System"}):r.i18n.translate("xpack.observabilityAiAssistant.chatTimeline.messages.elasticAssistant.label",{defaultMessage:"Elastic Assistant"})}const ue=Object(s.css)({name:"emp3qy",styles:".euiCommentEvent__header>.euiPanel{padding-top:4px;padding-bottom:4px;}"}),de=Object(s.css)(ue," .euiCommentEvent__body{padding:0;}>:last-child{overflow-x:hidden;}",""),fe=Object(s.css)({name:"vjuxqh",styles:".euiCommentEvent{border:none;}.euiCommentEvent__header{background:transparent;border-block-end:none;>.euiPanel{background:none;}}.euiCommentEvent__body{display:none;}"});function pe({actions:{canCopy:e,canEdit:t,canGiveFeedback:n,canRegenerate:r},content:o,function_call:c,role:u,currentUser:d,display:{collapsed:f},element:p,error:b,loading:g,title:v,onActionClick:m,onEditSubmit:y,onFeedbackClick:j,onRegenerateClick:h,onSendTelemetry:O,onStopGeneratingClick:A}){const E=Object(i.useGeneratedHtmlId)({prefix:"chat"}),[w,C]=Object(l.useState)(!1),[S,k]=Object(l.useState)(Boolean(p)),T=[e,f,e].filter(Boolean),I=Object(s.css)(ue," .euiCommentEvent__body{padding:0;height:",S?"fit-content":"0px",";overflow:hidden;border:none;}",""),M=()=>{k(!S),w&&C(!1)},F=()=>{f&&!S&&k(!0),C(!w)};let L=o||g||b?Object(x.jsx)(ce,{editing:w,loading:g,functionCall:c,content:o,role:u,onSubmit:e=>(F(),y(e)),onActionClick:m,onSendTelemetry:O}):null;return f&&(L=Object(x.jsx)(i.EuiAccordion,{id:E,arrowDisplay:"none",forceState:S?"open":"closed",onToggle:M},L)),Object(x.jsx)(i.EuiComment,{timelineAvatar:Object(x.jsx)(re,{loading:g,currentUser:d,role:u}),username:le(u),event:v,actions:Object(x.jsx)(X,{canCopy:e,canEdit:t,collapsed:f,editing:w,expanded:S,onCopyToClipboard:()=>{navigator.clipboard.writeText(o||"")},onToggleEdit:F,onToggleExpand:M}),className:0!==T.length||o?f?I:de:fe},Object(x.jsx)(i.EuiPanel,{hasShadow:!1,paddingSize:"s"},p?Object(x.jsx)(i.EuiErrorBoundary,null,p):null,L,b?Object(x.jsx)(a.FailedToLoadResponse,null):null),Object(x.jsx)(a.ChatItemControls,{canGiveFeedback:n,canRegenerate:r,error:b,loading:g,onFeedbackClick:j,onRegenerateClick:h,onStopGeneratingClick:A}))}const be=Object(s.css)({name:"8l0un1",styles:".euiCommentEvent{border:none;}.euiCommentEvent__header{background:transparent;border-block-end:none;}.euiCommentEvent__body{display:none;}.euiLink{padding:0;}.euiLink:focus{text-decoration:none;}.euiLink:hover{text-decoration:underline;}.euiAvatar{cursor:pointer;:hover{border:solid 2px #d3dae6;}}"});function ge({consolidatedItem:e,onActionClick:t,onEditSubmit:n,onFeedback:s,onRegenerate:a,onSendTelemetry:o,onStopGenerating:c}){const[d,f]=Object(l.useState)(!1),p=()=>{f(!d)};return Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiComment,{className:be,timelineAvatar:Object(x.jsx)(i.EuiAvatar,{color:"subdued",name:"inspect",iconType:"layers",onClick:p}),event:Object(x.jsx)(i.EuiLink,{color:"subdued","data-test-subj":"observabilityAiAssistantChatCollapsedItemsCollapsedItemsLink",onClick:p},Object(x.jsx)("em",null,d?r.i18n.translate("xpack.observabilityAiAssistant.chatCollapsedItems.hideEvents",{defaultMessage:"Hide {count} events",values:{count:e.length}}):r.i18n.translate("xpack.observabilityAiAssistant.chatCollapsedItems.showEvents",{defaultMessage:"Show {count} events",values:{count:e.length}}))),username:"",actions:Object(x.jsx)(i.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.observabilityAiAssistant.chatCollapsedItems.toggleButtonLabel",{defaultMessage:"Show / hide items"}),color:"text","data-test-subj":"observabilityAiAssistantChatCollapsedItemsButton",iconType:d?"arrowUp":"arrowDown",onClick:p})}),d?e.map(((e,i)=>Object(x.jsx)(pe,Z()({key:i},e,{onActionClick:n=>{t({message:e.message,payload:n})},onEditSubmit:t=>n(e.message,t),onFeedbackClick:t=>{s(e.message,t)},onRegenerateClick:()=>{a(e.message)},onSendTelemetry:o,onStopGeneratingClick:c})))):null)}var ve=n(27),me=n(30);function ye(e){const t=h();return Object(x.jsx)(u.a.Fragment,null,t.renderFunction(e.name,e.arguments,e.response,e.onActionClick))}function je(e){let t;if(e.name){const n=e.role!==a.MessageRole.Assistant&&e.content?M(e.content):e.content,i=e.data?M(e.data):void 0;t=Object(c.omitBy)({content:n,data:i},c.isEmpty)}else{var n,i;t={name:null===(n=e.function_call)||void 0===n?void 0:n.name,args:null!==(i=e.function_call)&&void 0!==i&&i.arguments?M(e.function_call.arguments):void 0}}return`\`\`\`\n${JSON.stringify(t,null,2)}\n\`\`\``}function he({name:e}){const{euiTheme:t}=Object(i.useEuiTheme)();return Object(x.jsx)("span",{style:{fontFamily:t.font.familyCode,fontSize:13}},e)}function xe({messages:e,chatService:t,hasConnector:n,currentUser:o,onEdit:u,onFeedback:d,onRegenerate:f,onSendTelemetry:p,onStopGenerating:b,onActionClick:g,chatState:v}){const m=Object(l.useMemo)((()=>{const i=function({chatService:e,currentUser:t,hasConnector:n,messages:i,chatState:s,onActionClick:o}){var l,u;const d=i.filter((e=>e.message.role!==a.MessageRole.System)),f=[{id:Object(ve.v4)(),actions:{canCopy:!1,canEdit:!1,canGiveFeedback:!1,canRegenerate:!1},display:{collapsed:!1,hide:!1},currentUser:t,loading:!1,message:{"@timestamp":(new Date).toISOString(),message:{role:a.MessageRole.User}},title:r.i18n.translate("xpack.observabilityAiAssistant.conversationStartTitle",{defaultMessage:"started a conversation"}),role:a.MessageRole.User},...d.map(((i,s)=>{var r,c;const l=Object(ve.v4)();let u,f,p="";const b=i.message.name&&d[s-1]&&d[s-1].message.function_call?d[s-1].message.function_call:void 0;let g=(null===(r=i.message.function_call)||void 0===r?void 0:r.trigger)||i.message.role;const v={canCopy:!1,canEdit:!1,canGiveFeedback:!1,canRegenerate:!1},m={collapsed:!1,hide:!1};switch(g){case a.MessageRole.User:if(v.canCopy=!0,v.canGiveFeedback=!1,v.canRegenerate=!1,m.hide=!1,i.message.name&&b){let t=!1;try{var y;const e=JSON.parse(null!==(y=i.message.content)&&void 0!==y?y:"null");t=e&&"object"==typeof e&&"error"in e}catch(e){t=!0}p=t?Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.executedFunctionFailureEvent",defaultMessage:"failed to execute the function {functionName}",values:{functionName:Object(x.jsx)(he,{name:i.message.name})}}):Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.userExecutedFunctionEvent",defaultMessage:"executed the function {functionName}",values:{functionName:Object(x.jsx)(he,{name:i.message.name})}}),f=!t&&e.hasRenderFunction(i.message.name)?Object(x.jsx)(ye,{name:i.message.name,arguments:null==b?void 0:b.arguments,response:i.message,onActionClick:e=>{o({message:i,payload:e})}}):void 0,u=f?void 0:je(i.message),(null==b?void 0:b.trigger)===a.MessageRole.Assistant&&(g=a.MessageRole.Assistant),v.canEdit=!1,m.collapsed=!f}else i.message.function_call?(p=Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.userSuggestedFunctionEvent",defaultMessage:"requested the function {functionName}",values:{functionName:Object(x.jsx)(he,{name:i.message.function_call.name})}}),u=je(i.message),v.canEdit=n,m.collapsed=!0):(p="",u=i.message.content,v.canEdit=n,m.collapsed=!1);break;case a.MessageRole.Assistant:v.canRegenerate=n,v.canCopy=!0,v.canGiveFeedback=!0,m.hide=!1,null!==(c=i.message.function_call)&&void 0!==c&&c.name?(p=Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.suggestedFunctionEvent",defaultMessage:"requested the function {functionName}",values:{functionName:Object(x.jsx)(he,{name:i.message.function_call.name})}}),i.message.content?(u=i.message.content,m.collapsed=!1):(u=je(i.message),m.collapsed=!0),v.canEdit=!0):(p="",u=i.message.content,m.collapsed=!1,v.canEdit=!1)}return{id:l,role:g,title:p,content:u,element:f,actions:v,display:m,currentUser:t,function_call:i.message.function_call,loading:!1,message:i}}))],p=s===a.ChatState.Loading;let b=Object(c.last)(f);const g=(null===(l=b)||void 0===l?void 0:l.message.message.role)===a.MessageRole.Assistant&&!(null!==(u=b.message.message.function_call)&&void 0!==u&&u.name);return p&&!g&&(f.push({id:Object(ve.v4)(),actions:{canCopy:!1,canEdit:!1,canGiveFeedback:!1,canRegenerate:!1},display:{collapsed:!1,hide:!1},content:"",currentUser:t,loading:s===a.ChatState.Loading,role:a.MessageRole.Assistant,title:"",message:{"@timestamp":(new Date).toISOString(),message:{role:a.MessageRole.Assistant,content:""}}}),b=Object(c.last)(f)),p&&b&&(b.loading=p),f}({chatService:t,hasConnector:n,messages:e,currentUser:o,chatState:v,onActionClick:g}),s=[];let l=null;for(const e of i)!e.display.hide&&e&&(e.display.collapsed?l?l.push(e):(l=[e],s.push(l)):(s.push(e),l=null));return s}),[t,n,e,o,v,g]);return Object(x.jsx)(i.EuiCommentList,{className:Object(s.css)({name:"xaxuoa",styles:"padding-bottom:32px"})},m.map(((e,t)=>Array.isArray(e)?Object(x.jsx)(ge,{key:t,consolidatedItem:e,onActionClick:g,onEditSubmit:u,onFeedback:d,onRegenerate:f,onSendTelemetry:p,onStopGenerating:b}):Object(x.jsx)(pe,Z()({key:t},Object(c.omit)(e,"message"),{onActionClick:t=>{g({message:e.message,payload:t})},onFeedbackClick:t=>{d(e.message,t)},onRegenerateClick:()=>{f(e.message)},onEditSubmit:t=>{u(e.message,t)},onSendTelemetry:p,onStopGeneratingClick:b})))))}var Oe=n(86),Ae=n.n(Oe);const Ee=()=>{const{services:{plugins:{start:{share:e}}}}=Object(f.a)(),t=e.url.locators.get("LICENSE_MANAGEMENT_LOCATOR");if(t)return()=>t.navigate({page:"dashboard"})},we=Object(s.css)("height:100%;padding:",o.euiThemeVars.euiPanelPaddingModifiers.paddingMedium,";","");function Ce(){const e=Ee();return Object(x.jsx)(i.EuiPanel,{hasBorder:!0,hasShadow:!1},Object(x.jsx)(i.EuiFlexGroup,{direction:"column",alignItems:"center",justifyContent:"center",className:we},Object(x.jsx)(i.EuiImage,{src:Ae.a,alt:"Elastic AI Assistant",size:"m"}),Object(x.jsx)(i.EuiTitle,null,Object(x.jsx)("h2",null,d.c)),Object(x.jsx)(i.EuiText,{color:"subdued"},r.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.body",{defaultMessage:"You need an Enterprise license to use the Elastic AI Assistant."})),Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiFlexGroup,null,Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiButton,{"data-test-subj":"observabilityAiAssistantIncorrectLicensePanelSubscriptionPlansButton",fill:!0,href:"https://www.elastic.co/subscriptions",target:"_blank"},r.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.subscriptionPlansButton",{defaultMessage:"Subscription plans"}))),Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantIncorrectLicensePanelManageLicenseButton",onClick:e},r.i18n.translate("xpack.observabilityAiAssistant.incorrectLicense.manageLicense",{defaultMessage:"Manage license"})))))))}function Se(){return Object(x.jsx)(i.EuiCallOut,{color:"warning"},Object(x.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"s",alignItems:"center"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIcon,{type:"warning"})),Object(x.jsx)(i.EuiFlexItem,{grow:!0},Object(x.jsx)(i.EuiText,{size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.simulatedFunctionCallingCalloutLabel",{defaultMessage:"Simulated function calling is enabled. You might see degradated performance."})))))}var ke=n(35);function Te(){return Object(x.jsx)(i.EuiText,{color:"subdued",size:"xs",textAlign:"center","data-test-subj":"observabilityAiAssistantDisclaimer"},r.i18n.translate("xpack.observabilityAiAssistant.disclaimer.disclaimerLabel",{defaultMessage:"This chat is powered by an integration with your LLM provider. LLMs are known to sometimes present incorrect information as if it's correct. Elastic supports configuration and connection to the LLM provider and your knowledge base, but is not responsible for the LLM's responses."}))}const Ie=Object(s.keyframes)({name:"5j8bii",styles:"from{opacity:0;}to{opacity:1;}"}),Me=Object(s.css)("animation:",Ie," ",o.euiThemeVars.euiAnimSpeedNormal," ease-in-out;","");function Fe({connectors:e,onSetupConnectorClick:t}){var n,s;if(e.error){const t=(s=e.error)instanceof Error&&"request"in s&&"name"in s&&403===e.error.body.statusCode;return Object(x.jsx)("div",{className:Me},Object(x.jsx)(i.EuiFlexGroup,{direction:"row",alignItems:"center",justifyContent:"center",gutterSize:"xs"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIcon,{type:"alert",color:"danger"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiText,{color:"danger"},t?r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageConnectors.connectorsForbiddenTextLabel",{defaultMessage:"Required privileges to get connectors are missing"}):r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageConnectors.connectorsErrorTextLabel",{defaultMessage:"Could not load connectors"})))))}return!e.loading&&0===(null===(n=e.connectors)||void 0===n?void 0:n.length)&&t?Object(x.jsx)("div",{className:Me},Object(x.jsx)(i.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.initialSetupPanel.setupConnector.description2",{defaultMessage:"Start working with the Elastic AI Assistant by setting up a connector for your AI provider. The model needs to support function calls. When using OpenAI or Azure, we recommend using GPT4."}),Object(x.jsx)(i.EuiIconTip,{content:r.i18n.translate("xpack.observabilityAiAssistant.technicalPreviewBadgeDescription",{defaultMessage:"GPT4 is required for a more consistent experience when using function calls (for example when performing root cause analysis, visualizing data and more). GPT3.5 can work for some of the simpler workflows, such as explaining errors or for a ChatGPT like experience within Kibana which don't require the use of frequent function calls."}),anchorProps:{css:{verticalAlign:"text-bottom"}},size:"s",type:"iInCircle",position:"top"})),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)("div",null,Object(x.jsx)(i.EuiButton,{"data-test-subj":"observabilityAiAssistantInitialSetupPanelSetUpGenerativeAiConnectorButton",fill:!0,color:"primary",onClick:t},r.i18n.translate("xpack.observabilityAiAssistant.initialSetupPanel.setupConnector.buttonLabel",{defaultMessage:"Set up GenAI connector"})))):null}var Le=n(87),Re=n.n(Le),_e=n(88),Pe=n.n(_e);const Ne=Object(s.css)({name:"n3vsoe",styles:"width:330px"});function Ue({knowledgeBase:e,onRetryInstall:t}){var n,s,a,o,c,l;const{http:u}=Object(f.a)().services,d=null===(n=e.status.value)||void 0===n?void 0:n.model_name;return Object(x.jsx)("div",{className:Ne,"data-test-subj":"observabilityAiAssistantWelcomeMessageKnowledgeBaseSetupErrorPanel"},Object(x.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m"},Object(x.jsx)(i.EuiDescriptionList,null,Object(x.jsx)(i.EuiDescriptionListTitle,null,r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.issuesDescriptionListTitleLabel",{defaultMessage:"Issues"})),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiDescriptionListDescription,null,Object(x.jsx)("ul",null,null!==(s=e.status.value)&&void 0!==s&&s.deployment_state?null:Object(x.jsx)("li",null,Object(x.jsx)(i.EuiIcon,{type:"alert",color:"subdued"})," ",Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.modelIsNotDeployedLabel",defaultMessage:"Model {modelName} is not deployed",values:{modelName:Object(x.jsx)(i.EuiCode,null,d)}})),null!==(a=e.status.value)&&void 0!==a&&a.deployment_state&&"started"!==e.status.value.deployment_state?Object(x.jsx)("li",null,Object(x.jsx)(i.EuiIcon,{type:"alert",color:"subdued"})," ",Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.modelIsNotStartedLabel",defaultMessage:"Deployment state of {modelName} is {deploymentState}",values:{modelName:Object(x.jsx)(i.EuiCode,null,d),deploymentState:Object(x.jsx)(i.EuiCode,null,null===(o=e.status.value)||void 0===o?void 0:o.deployment_state)}})):null,null!==(c=e.status.value)&&void 0!==c&&c.allocation_state&&"fully_allocated"!==e.status.value.allocation_state?Object(x.jsx)("li",null,Object(x.jsx)(i.EuiIcon,{type:"alert",color:"subdued"})," ",Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.modelIsNotFullyAllocatedLabel",defaultMessage:"Allocation state of {modelName} is {allocationState}",values:{modelName:Object(x.jsx)(i.EuiCode,null,d),allocationState:Object(x.jsx)(i.EuiCode,null,null===(l=e.status.value)||void 0===l?void 0:l.allocation_state)}})):null)))),Object(x.jsx)(i.EuiHorizontalRule,{margin:"none"}),Object(x.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m"},Object(x.jsx)(i.EuiText,{color:"subdued",size:"xs"},Object(x.jsx)(me.FormattedMessage,{id:"xpack.observabilityAiAssistant.welcomeMessage.div.checkTrainedModelsToLabel",defaultMessage:" {retryInstallingLink} or check {trainedModelsLink} to ensure {modelName} is deployed and running.",values:{modelName:d,retryInstallingLink:Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityAiAssistantWelcomeMessageKnowledgeBaseSetupErrorPanelRetryInstallingLink",onClick:t},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageKnowledgeBaseSetupErrorPanel.retryInstallingLinkLabel",{defaultMessage:"Retry install"})),trainedModelsLink:Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityAiAssistantWelcomeMessageTrainedModelsLink",external:!0,href:u.basePath.prepend("/app/ml/trained_models"),target:"_blank"},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.trainedModelsLinkLabel",{defaultMessage:"Trained Models"}))}}))))}function ze({connectors:e,knowledgeBase:t}){var n,s,a,o,d;const f=S()(!1===(null===(n=t.status.value)||void 0===n?void 0:n.ready)),[p,b]=Object(l.useState)(!1),[g,v]=Object(l.useState)(0),[,,m]=Re()((()=>b(!1)),g),[y,j]=Object(l.useState)(!1),[h,O]=Object(l.useState)(!1);Object(l.useEffect)((()=>{var e;f&&null!==(e=t.status.value)&&void 0!==e&&e.ready&&(v(3e3),m(),b(!0))}),[null===(s=t.status.value)||void 0===s?void 0:s.ready,f,m]),Object(l.useEffect)((()=>{var e;!h&&null!==(e=t.status.value)&&void 0!==e&&e.ready&&O(!1)}),[h,null===(a=t.status.value)||void 0===a?void 0:a.ready]),Pe()((()=>{t.status.refresh()}),h?5e3:null);const A=async()=>{O(!0),j(!1),await t.install().then((()=>{O(!1)}))};return void 0!==(null===(o=t.status.value)||void 0===o?void 0:o.ready)?Object(x.jsx)(u.a.Fragment,null,t.isInstalling?Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.weAreSettingUpTextLabel",{defaultMessage:"We are setting up your knowledge base. This may take a few minutes. You can continue to use the Assistant while this process is underway."})),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantWelcomeMessageSettingUpKnowledgeBaseButton",isLoading:!0,onClick:c.noop},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.div.settingUpKnowledgeBaseLabel",{defaultMessage:"Setting up Knowledge base"}))):null,null!==(d=e.connectors)&&void 0!==d&&d.length&&(!t.isInstalling&&t.installError||!t.isInstalling&&!1===t.status.loading&&!1===t.status.value.ready)?Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessageKnowledgeBase.yourKnowledgeBaseIsNotSetUpCorrectlyLabel",{defaultMessage:"Your Knowledge base hasn't been set up."})),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiFlexGroup,{justifyContent:"center"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)("div",null,Object(x.jsx)(i.EuiButton,{color:"primary","data-test-subj":"observabilityAiAssistantWelcomeMessageSetUpKnowledgeBaseButton",fill:!0,isLoading:h,iconType:"importAction",onClick:A},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.retryButtonLabel",{defaultMessage:"Install Knowledge base"})))),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiPopover,{button:Object(x.jsx)(i.EuiButtonEmpty,{"data-test-subj":"observabilityAiAssistantWelcomeMessageInspectErrorsButton",iconType:"inspect",onClick:()=>j(!y)},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.inspectErrorsButtonEmptyLabel",{defaultMessage:"Inspect issues"})),isOpen:y,panelPaddingSize:"none",closePopover:()=>j(!1)},Object(x.jsx)(Ue,{knowledgeBase:t,onRetryInstall:A})))),Object(x.jsx)(i.EuiSpacer,{size:"m"})):null,p?Object(x.jsx)("div",null,Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIcon,{type:"checkInCircleFilled",color:"success"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.welcomeMessage.knowledgeBaseSuccessfullyInstalledLabel",{defaultMessage:"Knowledge base successfully installed"}))))):null):null}var Be=n(49);function Ge(e){return null!=e}const qe=Object(s.css)({name:"1hve94u",styles:"max-width:50%;min-width:calc(50% - 8px)"}),De=Object(s.css)({name:"1fso55n",styles:"text-align:center!important"});function Ve({onSelectPrompt:e}){const t=Object(b.a)(),{connectors:n}=Object(Be.a)();if(!n||0===n.length)return null;const s=t.getScreenContexts(),r=Object(c.uniq)([...s].reverse().flatMap((e=>e.starterPrompts)).filter(Ge).slice(0,4));return Object(x.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"m",wrap:!0},r.map((({prompt:t,title:n,icon:s})=>Object(x.jsx)(i.EuiFlexItem,{key:t,className:qe},Object(x.jsx)(i.EuiPanel,{paddingSize:"m",hasShadow:!1,hasBorder:!0,onClick:()=>e(t),className:De},Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiIcon,{type:s,size:"xl"}),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiTitle,{size:"xs"},Object(x.jsx)("h2",null,n)),Object(x.jsx)(i.EuiText,{size:"s"},t))))))}const We=Object(s.css)({name:"13udsys",styles:"height:100%"}),He=Object(s.css)({name:"7rufyv",styles:"max-width:600px;text-align:center"});function $e({connectors:e,knowledgeBase:t,onSelectPrompt:n}){const s=Object(i.useCurrentEuiBreakpoint)(),{application:{navigateToApp:r,capabilities:o},plugins:{start:{triggersActionsUi:{getAddConnectorFlyout:c}}}}=Object(f.a)().services,[d,p]=Object(l.useState)(!1);return Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",direction:"column",gutterSize:"none",className:We},Object(x.jsx)(i.EuiFlexItem,{grow:!0,className:He},Object(x.jsx)(i.EuiSpacer,{size:["xl","l"].includes(s)?"l":"s"}),Object(x.jsx)(Fe,{connectors:e,onSetupConnectorClick:()=>{var e,t;null!==(e=o.management)&&void 0!==e&&null!==(t=e.insightsAndAlerting)&&void 0!==t&&t.triggersActions?p(!0):r("management",{path:"/insightsAndAlerting/triggersActionsConnectors/connectors"})}}),Object(x.jsx)(ze,{connectors:e,knowledgeBase:t})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(Ve,{onSelectPrompt:n}),Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(Te,null))),d?Object(x.jsx)(c,{featureId:ke.GenerativeAIForObservabilityConnectorFeatureId,onConnectorCreated:n=>{var i;p(!1),Object(a.isSupportedConnectorType)(n.actionTypeId)&&e.reloadConnectors(),t.status.value&&!1!==(null===(i=t.status.value)||void 0===i?void 0:i.ready)||t.install()},onClose:()=>p(!1)}):null)}const Je=Object(s.css)({name:"13udsys",styles:"height:100%"}),Ke=e=>Object(s.css)("overflow-y:auto;",e,";",""),Ye=Object(s.css)("overflow:hidden;transition:height ",o.euiThemeVars.euiAnimSpeedFast," ",o.euiThemeVars.euiAnimSlightResistance,";",""),Qe=Object(s.css)("height:100%;padding:",o.euiThemeVars.euiPanelPaddingModifiers.paddingMedium,";",""),Ze=Object(s.css)({name:"qbt5ty",styles:"align-self:center"}),Xe=Object(s.css)({name:"pbkze0",styles:"padding-top:12px;padding-bottom:8px"}),et=Object(s.keyframes)({name:"12zx3ov",styles:"from{opacity:0;transform:scale(0.9);}to{opacity:1;transform:scale(1);}"}),tt=Object(s.css)("height:100%;opacity:0;animation:",et," ",o.euiThemeVars.euiAnimSpeedNormal," ",o.euiThemeVars.euiAnimSlightBounce," ",o.euiThemeVars.euiAnimSpeedNormal," forwards;",""),nt=Object(s.css)({name:"1stkxjl",styles:"min-width:0;max-height:100%"}),it=32;function st({connectors:e,currentUser:t,flyoutPositionMode:n,initialConversationId:o,initialMessages:m,initialTitle:y,knowledgeBase:O,showLinkToConversationsApp:A,onConversationUpdate:E,onToggleFlyoutPositionMode:w}){var C,S;const k=j(),T=null==k?void 0:k.hasAtLeast("enterprise"),I=Object(i.useEuiTheme)(),M=Object(i.euiScrollBarStyles)(I),F=h(),{simulatedFunctionCallingEnabled:L}=function(){const{services:{uiSettings:e}}=Object(f.a)();return{simulatedFunctionCallingEnabled:e.get(a.aiAssistantSimulatedFunctionCalling,!1)}}(),{conversation:R,messages:_,next:P,state:N,stop:U,saveTitle:z}=function({initialConversationId:e,initialMessages:t=v,initialTitle:n,chatService:i,connectorId:s,onConversationUpdate:o}){const u=Object(b.a)(),{services:{notifications:d,plugins:{start:{observabilityAIAssistant:{useChat:m}}}}}=Object(f.a)(),y=p(e),j=p(t),h=p(n);if(j.length&&y)throw new Error("Cannot set initialMessages if initialConversationId is set");const{next:x,messages:O,setMessages:A,state:E,stop:w}=m({initialMessages:j,initialConversationId:y,chatService:i,service:u,connectorId:s,onConversationUpdate:e=>{k.refresh(),S(e.conversation.id),null==o||o({conversation:e.conversation})},persist:!0}),[C,S]=Object(l.useState)(y),k=Object(a.useAbortableAsync)((({signal:e})=>C?u.callApi("GET /internal/observability_ai_assistant/conversation/{conversationId}",{signal:e,params:{path:{conversationId:C}}}).then((e=>(A(e.messages),e))).catch((e=>{throw A([]),e})):g({title:h})),[C,h,u,A],{defaultValue:()=>{if(!C)return g({title:h})}});return{conversation:k,state:E,next:x,stop:w,messages:O,saveTitle:e=>{if(!C||!k.value)throw new Error("Cannot save title if conversation is not stored");const t=Object(c.merge)({},k.value,{conversation:{title:e}});return(n=t,u.callApi("PUT /internal/observability_ai_assistant/conversation/{conversationId}",{signal:null,params:{path:{conversationId:n.conversation.id},body:{conversation:Object(c.merge)({"@timestamp":n["@timestamp"],conversation:{id:n.conversation.id}},Object(c.omit)(n,"conversation.last_updated","namespace","user"))}}}).catch((e=>{throw d.toasts.addError(e,{title:r.i18n.translate("xpack.observabilityAiAssistant.errorUpdatingConversation",{defaultMessage:"Could not update conversation"})}),e}))).then((()=>k.refresh())).then((()=>{null==o||o(t)}));var n}}}({initialConversationId:o,initialMessages:m,initialTitle:y,chatService:F,connectorId:e.selectedConnector,onConversationUpdate:E}),B=Object(l.useRef)(null);let G;const q=Boolean(e.loading||O.status.loading||N===a.ChatState.Loading||R.loading);let V=(null===(C=R.value)||void 0===C?void 0:C.conversation.title)||y;V||(V=e.selectedConnector?T||o?d.b:d.c:d.a);const W=Object(s.css)("padding-right:",A?"32px":"0",";",""),[H,$]=Object(l.useState)(!0),[J,K]=Object(l.useState)(0),Q=(e,t)=>{var n;null!==(n=R.value)&&void 0!==n&&n.conversation&&"user"in R.value&&F.sendAnalyticsEvent({type:a.ObservabilityAIAssistantTelemetryEventType.ChatFeedback,payload:{messageWithFeedback:{message:e,feedback:t},conversation:R.value}})},Z=Object(l.useCallback)((e=>{K(0===e?0:e+it)}),[]);Object(l.useEffect)((()=>{var e;const t=null===(e=B.current)||void 0===e?void 0:e.parentElement;if(t)return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)};function n(){$((e=>e.scrollTop+e.clientHeight>=e.scrollHeight)(t))}}),[B.current]),Object(l.useEffect)((()=>{var e;const t=null===(e=B.current)||void 0===e?void 0:e.parentElement;t&&H&&(t.scrollTop=t.scrollHeight)}));const X=({message:e,payload:t})=>{var n;switch($(!0),t.type){case a.ChatActionClickType.executeEsqlQuery:P(_.concat({"@timestamp":(new Date).toISOString(),message:{role:a.MessageRole.Assistant,content:"",function_call:{name:"execute_query",arguments:JSON.stringify({query:t.query}),trigger:a.MessageRole.User}}}));break;case a.ChatActionClickType.updateVisualization:const i=e,s=JSON.parse(null!==(n=i.message.data)&&void 0!==n?n:"{}");P(_.slice(0,_.indexOf(i)).concat({"@timestamp":(new Date).toISOString(),message:{name:"visualize_query",content:i.message.content,data:JSON.stringify({...s,userOverrides:t.userOverrides}),role:a.MessageRole.User}}));break;case a.ChatActionClickType.visualizeEsqlQuery:P(_.concat({"@timestamp":(new Date).toISOString(),message:{role:a.MessageRole.Assistant,content:"",function_call:{name:"visualize_query",arguments:JSON.stringify({query:t.query,intention:a.VisualizeESQLUserIntention.visualizeAuto}),trigger:a.MessageRole.User}}}))}};var ee;if(T||o)if(!R.value&&R.loading)G=null;else{var te,ne,ie;G=Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiFlexItem,{grow:!0,className:Ke(M)},Object(x.jsx)("div",{ref:B,className:Je},Object(x.jsx)(i.EuiPanel,{grow:!0,hasBorder:!1,hasShadow:!1,paddingSize:"m",className:tt},0===(null===(te=e.connectors)||void 0===te?void 0:te.length)||1===_.length?Object(x.jsx)($e,{connectors:e,knowledgeBase:O,onSelectPrompt:e=>P(_.concat([{"@timestamp":(new Date).toISOString(),message:{content:e,role:a.MessageRole.User}}]))}):Object(x.jsx)(xe,{messages:_,knowledgeBase:O,chatService:F,currentUser:t,chatState:N,hasConnector:!(null===(ne=e.connectors)||void 0===ne||!ne.length),onEdit:(e,t)=>{$(!0);const n=_.indexOf(e);P(_.slice(0,n).concat(t))},onFeedback:Q,onRegenerate:e=>{P(function(e,t){const n=e.indexOf(t),i=e.slice(0,n),s=Object(c.findLastIndex)(i,(e=>"user"===e.message.role&&!e.message.name));return i.slice(0,s+1)}(_,e))},onSendTelemetry:e=>F.sendAnalyticsEvent(e),onStopGenerating:U,onActionClick:X})))),L?Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(Se,null)):null,Object(x.jsx)(i.EuiFlexItem,{grow:!1,className:Ye,style:{height:J}},Object(x.jsx)(i.EuiHorizontalRule,{margin:"none"}),Object(x.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m",color:"subdued",className:Xe},Object(x.jsx)(D,{disabled:!e.selectedConnector||!T,hidden:e.loading||0===(null===(ie=e.connectors)||void 0===ie?void 0:ie.length),loading:q,onChangeHeight:Z,onSendTelemetry:e=>F.sendAnalyticsEvent(e),onSubmit:e=>($(!0),P(_.concat(e)))}),Object(x.jsx)(i.EuiSpacer,{size:"s"}))))}else G=Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiFlexItem,{grow:!0,className:Qe},Object(x.jsx)(Ce,null)),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiHorizontalRule,{margin:"none"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"m"},Object(x.jsx)(D,{hidden:e.loading||0===(null===(ee=e.connectors)||void 0===ee?void 0:ee.length),loading:q,disabled:!0,onChangeHeight:K,onSubmit:e=>{P(_.concat(e))},onSendTelemetry:e=>F.sendAnalyticsEvent(e)}),Object(x.jsx)(i.EuiSpacer,{size:"s"}))));return R.error?Object(x.jsx)(i.EuiFlexGroup,{direction:"column",className:nt,gutterSize:"none",justifyContent:"center",responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1,className:Ze},Object(x.jsx)(i.EuiCallOut,{color:"danger",title:r.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationTitle",{defaultMessage:"Conversation not found"}),iconType:"warning"},r.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationContent",{defaultMessage:"Could not find a conversation with id {conversationId}. Make sure the conversation exists and you have access to it.",values:{conversationId:o}})))):Object(x.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"none",className:nt,responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1,className:R.error?Ze:void 0},R.error?Object(x.jsx)(i.EuiCallOut,{color:"danger",title:r.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationTitle",{defaultMessage:"Conversation not found"}),iconType:"warning"},r.i18n.translate("xpack.observabilityAiAssistant.couldNotFindConversationContent",{defaultMessage:"Could not find a conversation with id {conversationId}. Make sure the conversation exists and you have access to it.",values:{conversationId:o}})):null),Object(x.jsx)(i.EuiFlexItem,{grow:!1,className:W},Object(x.jsx)(Y,{connectors:e,conversationId:null!==(S=R.value)&&void 0!==S&&S.conversation&&"id"in R.value.conversation?R.value.conversation.id:void 0,flyoutPositionMode:n,licenseInvalid:!T&&!o,loading:q,title:V,onCopyConversation:()=>{var e,t,n;const i=JSON.stringify({title:y,messages:null!==(e=null===(t=R.value)||void 0===t?void 0:t.messages)&&void 0!==e?e:_});null===(n=navigator.clipboard)||void 0===n||n.writeText(i||"")},onSaveTitle:e=>{z(e)},onToggleFlyoutPositionMode:w})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiHorizontalRule,{margin:"none"})),G)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n(51),s=n(28),r=n(1),a=n(25),o=n(44),c=n(43),l=n(0);const u=Object(o.css)({name:"8k4y4e",styles:"width:100%;display:flex;flex-grow:1;padding-top:0;padding-bottom:0;max-block-size:calc(100vh - 96px)"});var d=n(3),f=n(26),p=n(6),b=n.n(p),g=n(12),v=n(63),m=n(61),y=n(65),j=n(58),h=n(49),x=n(59),O=n(48),A=n(45),E=n(56),w=n(57);function C(){const{euiTheme:e}=Object(d.useEuiTheme)(),t=Object(j.a)(),n=Object(A.a)(),s=Object(h.a)(),a=Object(x.a)(),u=Object(O.a)(),{path:p}=Object(i.e)("/conversations/*"),{services:{plugins:{start:{observabilityAIAssistant:{ObservabilityAIAssistantChatServiceContext:C}}}}}=Object(c.a)(),S=Object(g.useAbortableAsync)((({signal:e})=>n.start({signal:e})),[n]),k="conversationId"in p?p.conversationId:void 0,{key:T,updateConversationIdInPlace:I}=Object(E.a)(k),[M,F]=Object(r.useState)(null),[L,R]=Object(r.useState)(!1),_=Object(w.a)();function P(e){e?u.push("/conversations/{conversationId}",{path:{conversationId:e},query:{}}):u.push("/conversations/new",{path:{},query:{}})}Object(r.useEffect)((()=>()=>{R(!1),M&&b.a.unmountComponentAtNode(M)}),[]);const N=Object(o.css)({name:"qhxz92",styles:"max-width:100%"}),U=Object(o.css)("min-width:250px;width:250px;border-right:solid 1px ",f.euiThemeVars.euiColorLightShade,";",""),z=Object(o.css)("display:flex;position:absolute;z-index:1;top:56px;right:0;height:calc(100% - 56px);background-color:",e.colors.lightestShade,";width:",L?400:0,"px;border-top:solid 1px ",f.euiThemeVars.euiColorLightShade,";border-left:solid 1px ",f.euiThemeVars.euiColorLightShade,";.euiFlyoutHeader{padding:",e.size.m,";}.euiFlyoutFooter{padding:",e.size.m,";padding-top:",e.size.l,";padding-bottom:",e.size.l,";}","");return Object(l.jsx)(d.EuiFlexGroup,{direction:"row",className:N,gutterSize:"none"},Object(l.jsx)(d.EuiFlexItem,{grow:!1,className:U},Object(l.jsx)(y.a,{selectedConversationId:k,conversations:_.conversations,isLoading:_.isLoading,onConversationDeleteClick:e=>{_.deleteConversation(e).then((()=>{e===k&&P(void 0)}))}}),Object(l.jsx)(d.EuiSpacer,{size:"s"})),S.value?null:Object(l.jsx)(d.EuiFlexGroup,{direction:"column",alignItems:"center",gutterSize:"l"},Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiSpacer,{size:"xl"}),Object(l.jsx)(d.EuiLoadingSpinner,{size:"l"}))),S.value&&Object(l.jsx)(C.Provider,{value:S.value},Object(l.jsx)(v.a,{key:T,currentUser:t,connectors:s,initialConversationId:k,knowledgeBase:a,showLinkToConversationsApp:!1,onConversationUpdate:e=>{k||(I(e.conversation.id),P(e.conversation.id)),_.conversations.refresh()}}),Object(l.jsx)("div",{className:z},Object(l.jsx)(m.a,{setContainer:F,visible:L,style:{width:"100%"}}))))}const S={"/":{element:Object(l.jsx)(a.Redirect,{to:"/conversations/new"})},"/conversations":{element:Object(l.jsx)((function({children:e}){const{services:{plugins:{start:{observabilityShared:t}}}}=Object(c.a)(),n=t.navigation.PageTemplate;return Object(l.jsx)(n,{pageSectionProps:{alignment:"horizontalCenter",restrictWidth:!0,contentProps:{className:u},paddingSize:"none"}},e)}),null,Object(l.jsx)(i.a,null)),children:{"/conversations/new":{element:Object(l.jsx)(C,null)},"/conversations/{conversationId}":{params:s.intersection([s.type({path:s.type({conversationId:s.string})}),s.partial({state:s.partial({prevConversationKey:s.string})})]),element:Object(l.jsx)(C,null)},"/conversations":{element:Object(l.jsx)(a.Redirect,{to:"/conversations/new"})}}}},k=Object(i.d)(S)},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i=n(3),s=n(44),r=n(4),a=n(1),o=n.n(a),c=n(0),l=n(48),u=n(47),d=n(60);const f=Object(s.css)({name:"50zrmy",styles:"text-transform:uppercase"}),p=Object(s.css)({name:"10s85ir",styles:"max-height:100%;padding-top:56px"}),b=e=>Object(s.css)("overflow-y:auto;",e,";",""),g=Object(s.css)({name:"1eb9m24",styles:"padding-bottom:5px"});function v({conversations:e,isLoading:t,selectedConversationId:n,onConversationSelect:v,onConversationDeleteClick:m}){var y,j;const h=Object(l.a)(),x=Object(i.useEuiTheme)(),O=Object(i.euiScrollBarStyles)(x),A=Object(s.css)("height:100%;border-top:solid 1px ",x.euiTheme.border.color,";padding:",x.euiTheme.size.s,";",""),{element:E,confirm:w}=function({title:e,children:t,confirmButtonText:n}){const[s,r]=Object(a.useState)(void 0);return{element:s,confirm:()=>new Promise((s=>{r(Object(c.jsx)(i.EuiConfirmModal,{title:e,onConfirm:()=>{s(!0),r(void 0)},onCancel:()=>{s(!1),r(void 0)},confirmButtonText:n},t))}))}}({title:r.i18n.translate("xpack.observabilityAiAssistant.flyout.confirmDeleteConversationTitle",{defaultMessage:"Delete this conversation?"}),children:r.i18n.translate("xpack.observabilityAiAssistant.flyout.confirmDeleteConversationContent",{defaultMessage:"This action cannot be undone."}),confirmButtonText:r.i18n.translate("xpack.observabilityAiAssistant.flyout.confirmDeleteButtonText",{defaultMessage:"Delete conversation"})}),C=[...n?[]:[{id:"",label:u.b,lastUpdated:"",href:h.link("/conversations/new")}],...(null!==(y=null===(j=e.value)||void 0===j?void 0:j.conversations)&&void 0!==y?y:[]).map((({conversation:e})=>({id:e.id,label:e.title,lastUpdated:e.last_updated,href:h.link("/conversations/{conversationId}",{path:{conversationId:e.id}})})))];return Object(c.jsx)(o.a.Fragment,null,Object(c.jsx)(i.EuiPanel,{paddingSize:"none",hasShadow:!1,className:p},Object(c.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"none",className:A},Object(c.jsx)(i.EuiFlexItem,{grow:!0,className:b(O)},Object(c.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"s"},Object(c.jsx)(i.EuiFlexGroup,{direction:"row",gutterSize:"xs",alignItems:"center"},Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiSpacer,{size:"s"}),Object(c.jsx)(i.EuiText,{className:f,size:"s"},Object(c.jsx)("strong",null,r.i18n.translate("xpack.observabilityAiAssistant.conversationList.title",{defaultMessage:"Previously"})))),t?Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiLoadingSpinner,{size:"s"})):null))),e.error?Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"s"},Object(c.jsx)(i.EuiFlexGroup,{direction:"row",alignItems:"center",gutterSize:"s"},Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiIcon,{type:"warning",color:"danger"})),Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiText,{size:"s",color:"danger"},r.i18n.translate("xpack.observabilityAiAssistant.conversationList.errorMessage",{defaultMessage:"Failed to load"})))))):null,null!=C&&C.length?Object(c.jsx)(i.EuiFlexItem,{grow:!0},Object(c.jsx)(i.EuiListGroup,{flush:!1,gutterSize:"none"},null==C?void 0:C.map((e=>Object(c.jsx)(i.EuiListGroupItem,{"data-test-subj":"observabilityAiAssistantConversationsLink",key:e.id,label:e.label,size:"s",isActive:e.id===n,isDisabled:t,wrapText:!0,showToolTip:!0,href:e.href,onClick:t=>{v&&(t.preventDefault(),v(e.id))},extraAction:e.id?{iconType:"trash","aria-label":r.i18n.translate("xpack.observabilityAiAssistant.conversationList.deleteConversationIconLabel",{defaultMessage:"Delete"}),onClick:()=>{w().then((t=>{t&&m(e.id)}))}}:void 0}))))):null,t||e.error||null!=C&&C.length?null:Object(c.jsx)(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"s"},Object(c.jsx)(i.EuiText,{color:"subdued",size:"s"},r.i18n.translate("xpack.observabilityAiAssistant.conversationList.noConversations",{defaultMessage:"No conversations"}))))),Object(c.jsx)(i.EuiFlexItem,{grow:!1},Object(c.jsx)(i.EuiPanel,{paddingSize:"s",hasBorder:!1,hasShadow:!1},Object(c.jsx)(i.EuiFlexGroup,{alignItems:"center"},Object(c.jsx)(i.EuiFlexItem,{grow:!0,className:g},Object(c.jsx)(d.a,{href:h.link("/conversations/new"),onClick:e=>{v&&(e.preventDefault(),v(void 0))}}))))))),E)}},function(e,t,n){"use strict";const i=n(67),s=n(68),r=n(69);function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?i(e):encodeURIComponent(e):e}function c(e,t){return t.decode?s(e):e}function l(e){return Array.isArray(e)?e.sort():"object"==typeof e?l(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,i)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===i[e]&&(i[e]={}),i[e][t[1]]=n):i[e]=n};case"bracket":return(e,n,i)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==i[e]?i[e]=[].concat(i[e],n):i[e]=[n]:i[e]=n};case"comma":case"separator":return(t,n,i)=>{const s="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>c(t,e))):null===n?n:c(n,e);i[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e)return i;if(!(e=e.trim().replace(/^[?#&]/,"")))return i;for(const s of e.split("&")){let[e,a]=r(t.decode?s.replace(/\+/g," "):s,"=");a=void 0===a?null:["comma","separator"].includes(t.arrayFormat)?a:c(a,t),n(c(e,t),a,i)}for(const e of Object.keys(i)){const n=i[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=f(n[e],t);else i[e]=f(n,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{const n=i[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=l(n):e[t]=n,e}),Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],i=function(e){switch(e.arrayFormat){case"index":return t=>(n,i)=>{const s=n.length;return void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[o(t,e),"[",s,"]"].join("")]:[...n,[o(t,e),"[",o(s,e),"]=",o(i,e)].join("")]};case"bracket":return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,[o(t,e),"[]"].join("")]:[...n,[o(t,e),"[]=",o(i,e)].join("")];case"comma":case"separator":return t=>(n,i)=>null==i||0===i.length?n:0===n.length?[[o(t,e),"=",o(i,e)].join("")]:[[n,o(i,e)].join(e.arrayFormatSeparator)];default:return t=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:null===i?[...n,o(t,e)]:[...n,[o(t,e),"=",o(i,e)].join("")]}}(t),s={};for(const t of Object.keys(e))n(t)||(s[t]=e[t]);const r=Object.keys(s);return!1!==t.sort&&r.sort(t.sort),r.map((n=>{const s=e[n];return void 0===s?"":null===s?o(n,t):Array.isArray(s)?s.reduce(i(n),[]).join("&"):o(n,t)+"="+o(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:c(i,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const i=u(e.url).split("?")[0]||"",s=t.extract(e.url),r=t.parse(s,{sort:!1}),a=Object.assign(r,e.query);let c=t.stringify(a,n);c&&(c=`?${c}`);let l=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l=`#${o(e.fragmentIdentifier,n)}`),`${i}${c}${l}`}},function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,n){"use strict";var i="%[a-f0-9]{2}",s=new RegExp("("+i+")|([^%]+?)","gi"),r=new RegExp("("+i+")+","gi");function a(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],a(n),a(i))}function o(e){try{return decodeURIComponent(e)}catch(i){for(var t=e.match(s)||[],n=1;n<t.length;n++)t=(e=a(t,n).join("")).match(s)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=o(n[0]);i!==n[0]&&(t[n[0]]=i)}n=r.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},function(e,t,n){"use strict";e.exports=n(71)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,s=n(31),r=(i=n(1))&&"object"==typeof i&&"default"in i?i.default:i;function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}t.matchRoutes=function e(t,n,i){return void 0===i&&(i=[]),t.some((function(t){var r=t.path?s.matchPath(n,t):i.length?i[i.length-1].match:s.Router.computeRootMatch(n);return r&&(i.push({route:t,match:r}),t.routes&&e(t.routes,n,i)),r})),i},t.renderRoutes=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?r.createElement(s.Switch,n,e.map((function(e,n){return r.createElement(s.Route,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(a({},n,{},t,{route:e})):r.createElement(e.component,a({},n,t,{route:e}))}})}))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},function(e,t,n){"use strict";function i(e){return e}function s(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=i,t.unsafeCoerce=i,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,i,s,r,a,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return i(n(t(e.apply(this,arguments))))};case 5:return function(){return s(i(n(t(e.apply(this,arguments)))))};case 6:return function(){return r(s(i(n(t(e.apply(this,arguments))))))};case 7:return function(){return a(r(s(i(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(a(r(s(i(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(a(r(s(i(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=s,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,i,s,r,a,o,c,l,u,d,f,p,b,g,v,m,y,j){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return s(i(n(t(e))));case 6:return r(s(i(n(t(e)))));case 7:return a(r(s(i(n(t(e))))));case 8:return o(a(r(s(i(n(t(e)))))));case 9:return c(o(a(r(s(i(n(t(e))))))));case 10:return l(c(o(a(r(s(i(n(t(e)))))))));case 11:return u(l(c(o(a(r(s(i(n(t(e))))))))));case 12:return d(u(l(c(o(a(r(s(i(n(t(e)))))))))));case 13:return f(d(u(l(c(o(a(r(s(i(n(t(e))))))))))));case 14:return p(f(d(u(l(c(o(a(r(s(i(n(t(e)))))))))))));case 15:return b(p(f(d(u(l(c(o(a(r(s(i(n(t(e))))))))))))));case 16:return g(b(p(f(d(u(l(c(o(a(r(s(i(n(t(e)))))))))))))));case 17:return v(g(b(p(f(d(u(l(c(o(a(r(s(i(n(t(e))))))))))))))));case 18:return m(v(g(b(p(f(d(u(l(c(o(a(r(s(i(n(t(e)))))))))))))))));case 19:return y(m(v(g(b(p(f(d(u(l(c(o(a(r(s(i(n(t(e))))))))))))))))));case 20:return j(y(m(v(g(b(p(f(d(u(l(c(o(a(r(s(i(n(t(e)))))))))))))))))))}},t.hole=s,t.bind_=function(e,t,n){var i;return Object.assign({},e,((i={})[t]=n,i))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(75),s=n(46);function r(e){return void 0!==e.message?e.message:"Invalid value "+("function"==typeof(t=e.value)?i.getFunctionName(t):"number"!=typeof t||isFinite(t)?JSON.stringify(t):isNaN(t)?"NaN":t>0?"Infinity":"-Infinity")+" supplied to "+e.context.map((function(e){return e.key+": "+e.type.name})).join("/");var t}function a(e){return e.map(r)}function o(){return["No errors!"]}t.failure=a,t.success=o,t.PathReporter={report:s.fold(a,o)}},function(e,t,n){"use strict";var i,s=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},i(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=n(46),o=a.either.map,c=a.either.chain,l=function(){function e(e,t,n,i){this.name=e,this.is=t,this.validate=n,this.encode=i,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(n,i){var s=this;return void 0===i&&(i="pipe("+this.name+", "+n.name+")"),new e(i,n.is,(function(e,t){return c(s.validate(e,t),(function(e){return n.validate(e,t)}))}),this.encode===t.identity&&n.encode===t.identity?t.identity:function(e){return s.encode(n.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}();t.Type=l,t.identity=function(e){return e},t.getFunctionName=function(e){return e.displayName||e.name||"<function"+e.length+">"},t.getContextEntry=function(e,t){return{key:e,type:t}},t.appendContext=function(e,t,n,i){for(var s=e.length,r=Array(s+1),a=0;a<s;a++)r[a]=e[a];return r[s]={key:t,type:n,actual:i},r},t.failures=a.left,t.failure=function(e,n,i){return t.failures([{value:e,context:n,message:i}])},t.success=a.right;var u=function(e,t){for(var n=t.length,i=0;i<n;i++)e.push(t[i])},d=function(e){return function(t){return t._tag===e}},f=d("AnyType"),p=d("InterfaceType"),b=d("PartialType"),g=function(e){function n(){var n=e.call(this,"null",(function(e){return null===e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="NullType",n}return s(n,e),n}(l);t.NullType=g,t.nullType=new g,t.null=t.nullType;var v=function(e){function n(){var n=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="UndefinedType",n}return s(n,e),n}(l);t.UndefinedType=v;var m=new v;t.undefined=m;var y=function(e){function n(){var n=e.call(this,"void",m.is,m.validate,t.identity)||this;return n._tag="VoidType",n}return s(n,e),n}(l);t.VoidType=y,t.voidType=new y,t.void=t.voidType;var j=function(e){function n(){var n=e.call(this,"unknown",(function(e){return!0}),t.success,t.identity)||this;return n._tag="UnknownType",n}return s(n,e),n}(l);t.UnknownType=j,t.unknown=new j;var h=function(e){function n(){var n=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="StringType",n}return s(n,e),n}(l);t.StringType=h,t.string=new h;var x=function(e){function n(){var n=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="NumberType",n}return s(n,e),n}(l);t.NumberType=x,t.number=new x;var O=function(e){function n(){var n=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="BooleanType",n}return s(n,e),n}(l);t.BooleanType=O,t.boolean=new O;var A=function(e){function n(){var n=e.call(this,"UnknownArray",Array.isArray,(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="AnyArrayType",n}return s(n,e),n}(l);t.AnyArrayType=A,t.UnknownArray=new A,t.Array=t.UnknownArray;var E=function(e){function n(){var n=e.call(this,"UnknownRecord",(function(e){return"[object Object]"===Object.prototype.toString.call(e)}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="AnyDictionaryType",n}return s(n,e),n}(l);t.AnyDictionaryType=E,t.UnknownRecord=new E;var w=function(e){function n(){var n=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="FunctionType",n}return s(n,e),n}(l);t.FunctionType=w,t.Function=new w;var C=function(e){function t(t,n,i,s,r,a){var o=e.call(this,t,n,i,s)||this;return o.type=r,o.predicate=a,o._tag="RefinementType",o}return s(t,e),t}(l);t.RefinementType=C,t.brand=function(e,t,n){return X(e,t,n)},t.Int=t.brand(t.number,(function(e){return Number.isInteger(e)}),"Int");var S=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.value=r,a._tag="LiteralType",a}return s(t,e),t}(l);t.LiteralType=S,t.literal=function(e,n){void 0===n&&(n=JSON.stringify(e));var i=function(t){return t===e};return new S(n,i,(function(n,s){return i(n)?t.success(e):t.failure(n,s)}),t.identity,e)};var k=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.keys=r,a._tag="KeyofType",a}return s(t,e),t}(l);t.KeyofType=k;var T=Object.prototype.hasOwnProperty;t.keyof=function(e,n){void 0===n&&(n=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var i=function(n){return t.string.is(n)&&T.call(e,n)};return new k(n,i,(function(e,n){return i(e)?t.success(e):t.failure(e,n)}),t.identity,e)};var I=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.runDefinition=r,a._tag="RecursiveType",a}return s(t,e),t}(l);t.RecursiveType=I,Object.defineProperty(I.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),t.recursion=function(e,t){var n,i=function(){return n||((n=t(s)).name=e),n},s=new I(e,(function(e){return i().is(e)}),(function(e,t){return i().validate(e,t)}),(function(e){return i().encode(e)}),i);return s};var M=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.type=r,a._tag="ArrayType",a}return s(t,e),t}(l);t.ArrayType=M,t.array=function(e,n){return void 0===n&&(n="Array<"+e.name+">"),new M(n,(function(n){return t.UnknownArray.is(n)&&n.every(e.is)}),(function(n,i){return c(t.UnknownArray.validate(n,i),(function(n){for(var s=n.length,r=n,o=[],c=0;c<s;c++){var l=n[c],d=e.validate(l,t.appendContext(i,String(c),e,l));if(a.isLeft(d))u(o,d.left);else{var f=d.right;f!==l&&(r===n&&(r=n.slice()),r[c]=f)}}return o.length>0?t.failures(o):t.success(r)}))}),e.encode===t.identity?t.identity:function(t){return t.map(e.encode)},e)};var F=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.props=r,a._tag="InterfaceType",a}return s(t,e),t}(l);t.InterfaceType=F;var L=function(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")},R=function(e){for(var n=0;n<e.length;n++)if(e[n].encode!==t.identity)return!1;return!0},_=function(e){return"{ "+L(e)+" }"};t.type=function(e,n){void 0===n&&(n=_(e));var i=Object.keys(e),s=i.map((function(t){return e[t]})),o=i.length;return new F(n,(function(e){if(t.UnknownRecord.is(e)){for(var n=0;n<o;n++){var r=i[n];if(!T.call(e,r)||!s[n].is(e[r]))return!1}return!0}return!1}),(function(e,n){return c(t.UnknownRecord.validate(e,n),(function(e){for(var c=e,l=[],d=0;d<o;d++){var f=i[d];T.call(c,f)||(c===e&&(c=r({},e)),c[f]=c[f]);var p=c[f],b=s[d],g=b.validate(p,t.appendContext(n,f,b,p));if(a.isLeft(g))u(l,g.left);else{var v=g.right;v!==p&&(c===e&&(c=r({},e)),c[f]=v)}}return l.length>0?t.failures(l):t.success(c)}))}),R(s)?t.identity:function(e){for(var n=r({},e),a=0;a<o;a++){var c=i[a],l=s[a].encode;l!==t.identity&&(n[c]=l(e[c]))}return n},e)},t.interface=t.type;var P=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.props=r,a._tag="PartialType",a}return s(t,e),t}(l);t.PartialType=P;var N=function(e){return"Partial<"+e+">"};t.partial=function(e,n){void 0===n&&(n=N(_(e)));var i=Object.keys(e),s=i.map((function(t){return e[t]})),o=i.length;return new P(n,(function(n){if(t.UnknownRecord.is(n)){for(var s=0;s<o;s++){var r=i[s],a=n[r];if(void 0!==a&&!e[r].is(a))return!1}return!0}return!1}),(function(n,s){return c(t.UnknownRecord.validate(n,s),(function(n){for(var c=n,l=[],d=0;d<o;d++){var f=i[d],p=c[f],b=e[f],g=b.validate(p,t.appendContext(s,f,b,p));if(a.isLeft(g))void 0!==p&&u(l,g.left);else{var v=g.right;v!==p&&(c===n&&(c=r({},n)),c[f]=v)}}return l.length>0?t.failures(l):t.success(c)}))}),R(s)?t.identity:function(e){for(var t=r({},e),n=0;n<o;n++){var a=i[n],c=e[a];void 0!==c&&(t[a]=s[n].encode(c))}return t},e)};var U=function(e){function t(t,n,i,s,r,a){var o=e.call(this,t,n,i,s)||this;return o.domain=r,o.codomain=a,o._tag="DictionaryType",o}return s(t,e),t}(l);t.DictionaryType=U,t.record=function(e,n,i){return void 0===i&&(i="{ [K in "+e.name+"]: "+n.name+" }"),new U(i,(function(i){return t.UnknownRecord.is(i)?Object.keys(i).every((function(t){return e.is(t)&&n.is(i[t])})):f(n)&&Array.isArray(i)}),(function(i,s){if(t.UnknownRecord.is(i)){for(var r={},o=[],c=Object.keys(i),l=c.length,d=!1,p=0;p<l;p++){var b=c[p],g=i[b],v=e.validate(b,t.appendContext(s,b,e,b));if(a.isLeft(v))u(o,v.left);else{var m=v.right;d=d||m!==b,b=m;var y=n.validate(g,t.appendContext(s,b,n,g));if(a.isLeft(y))u(o,y.left);else{var j=y.right;d=d||j!==g,r[b]=j}}}return o.length>0?t.failures(o):t.success(d?r:i)}return f(n)&&Array.isArray(i)?t.success(i):t.failure(i,s)}),e.encode===t.identity&&n.encode===t.identity?t.identity:function(t){for(var i={},s=Object.keys(t),r=s.length,a=0;a<r;a++){var o=s[a];i[String(e.encode(o))]=n.encode(t[o])}return i},e,n)};var z=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.types=r,a._tag="UnionType",a}return s(t,e),t}(l);t.UnionType=z;var B=function(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"};t.union=function(e,n){void 0===n&&(n=B(e));var i=ae(e);if(void 0!==i&&e.length>0){var s=i[0],r=i[1],o=r.length,l=function(e){for(var t=0;t<o;t++)if(-1!==r[t].indexOf(e))return t};return new H(n,(function(n){if(t.UnknownRecord.is(n)){var i=l(n[s]);return void 0!==i&&e[i].is(n)}return!1}),(function(n,i){return c(t.UnknownRecord.validate(n,i),(function(r){var a=l(r[s]);if(void 0===a)return t.failure(n,i);var o=e[a];return o.validate(r,t.appendContext(i,String(a),o,r))}))}),R(e)?t.identity:function(t){var i=l(t[s]);if(void 0===i)throw new Error("no codec found to encode value in union codec "+n);return e[i].encode(t)},e,s)}return new z(n,(function(t){return e.some((function(e){return e.is(t)}))}),(function(n,i){for(var s=[],r=0;r<e.length;r++){var o=e[r],c=o.validate(n,t.appendContext(i,String(r),o,n));if(!a.isLeft(c))return t.success(c.right);u(s,c.left)}return t.failures(s)}),R(e)?t.identity:function(t){for(var i=0,s=e;i<s.length;i++){var r=s[i];if(r.is(t))return r.encode(t)}throw new Error("no codec found to encode value in union type "+n)},e)};var G=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.types=r,a._tag="IntersectionType",a}return s(t,e),t}(l);t.IntersectionType=G;var q=function(e,n){for(var i=!0,s=!0,r=0,a=n;r<a.length;r++)(u=a[r])!==e&&(i=!1),t.UnknownRecord.is(u)&&(s=!1);if(i)return e;if(s)return n[n.length-1];for(var o={},c=0,l=n;c<l.length;c++){var u=l[c];for(var d in u)u[d]===e[d]&&o.hasOwnProperty(d)||(o[d]=u[d])}return o};t.intersection=function(e,n){void 0===n&&(n="("+e.map((function(e){return e.name})).join(" & ")+")");var i=e.length;return new G(n,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?t.success:function(n,s){for(var r=[],o=[],c=0;c<i;c++){var l=e[c],d=l.validate(n,t.appendContext(s,String(c),l,n));a.isLeft(d)?u(o,d.left):r.push(d.right)}return o.length>0?t.failures(o):t.success(q(n,r))},0===e.length?t.identity:function(t){return q(t,e.map((function(e){return e.encode(t)})))},e)};var D=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.types=r,a._tag="TupleType",a}return s(t,e),t}(l);t.TupleType=D,t.tuple=function(e,n){void 0===n&&(n="["+e.map((function(e){return e.name})).join(", ")+"]");var i=e.length;return new D(n,(function(n){return t.UnknownArray.is(n)&&n.length===i&&e.every((function(e,t){return e.is(n[t])}))}),(function(n,s){return c(t.UnknownArray.validate(n,s),(function(n){for(var r=n.length>i?n.slice(0,i):n,o=[],c=0;c<i;c++){var l=n[c],d=e[c],f=d.validate(l,t.appendContext(s,String(c),d,l));if(a.isLeft(f))u(o,f.left);else{var p=f.right;p!==l&&(r===n&&(r=n.slice()),r[c]=p)}}return o.length>0?t.failures(o):t.success(r)}))}),R(e)?t.identity:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)};var V=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.type=r,a._tag="ReadonlyType",a}return s(t,e),t}(l);t.ReadonlyType=V,t.readonly=function(e,n){return void 0===n&&(n="Readonly<"+e.name+">"),new V(n,e.is,(function(t,n){return o(e.validate(t,n),(function(e){return e}))}),e.encode===t.identity?t.identity:e.encode,e)};var W=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.type=r,a._tag="ReadonlyArrayType",a}return s(t,e),t}(l);t.ReadonlyArrayType=W,t.readonlyArray=function(e,n){void 0===n&&(n="ReadonlyArray<"+e.name+">");var i=t.array(e);return new W(n,i.is,(function(e,t){return o(i.validate(e,t),(function(e){return e}))}),i.encode,e)},t.strict=function(e,n){return t.exact(t.type(e),n)};var H=function(e){function t(t,n,i,s,r,a){var o=e.call(this,t,n,i,s,r)||this;return o.tag=a,o}return s(t,e),t}(z);t.TaggedUnionType=H,t.taggedUnion=function(e,n,i){void 0===i&&(i=B(n));var s=t.union(n,i);return s instanceof H?s:(console.warn("[io-ts] Cannot build a tagged union for "+i+", returning a de-optimized union"),new H(i,s.is,s.validate,s.encode,n,e))};var $=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.type=r,a._tag="ExactType",a}return s(t,e),t}(l);t.ExactType=$;var J=function(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return J(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,J(t))}),{})}},K=function(e,t){for(var n=Object.getOwnPropertyNames(e),i=!1,s={},r=0;r<n.length;r++){var a=n[r];T.call(t,a)?s[a]=e[a]:i=!0}return i?s:e};t.exact=function(e,n){void 0===n&&(n=function(e){return p(e)?"{| "+L(e.props)+" |}":b(e)?N("{| "+L(e.props)+" |}"):"Exact<"+e.name+">"}(e));var i=J(e);return new $(n,e.is,(function(n,s){return c(t.UnknownRecord.validate(n,s),(function(){return o(e.validate(n,s),(function(e){return K(e,i)}))}))}),(function(t){return e.encode(K(t,i))}),e)},t.getValidationError=function(e,t){return{value:e,context:t}},t.getDefaultContext=function(e){return[{key:"",type:e}]};var Y=function(e){function n(){var n=e.call(this,"never",(function(e){return!1}),(function(e,n){return t.failure(e,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return s(n,e),n}(l);t.NeverType=Y,t.never=new Y;var Q=function(e){function n(){var n=e.call(this,"any",(function(e){return!0}),t.success,t.identity)||this;return n._tag="AnyType",n}return s(n,e),n}(l);t.AnyType=Q,t.any=new Q,t.Dictionary=t.UnknownRecord;var Z=function(e){function n(){var n=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,i){return n.is(e)?t.success(e):t.failure(e,i)}),t.identity)||this;return n._tag="ObjectType",n}return s(n,e),n}(l);function X(e,n,i){return void 0===i&&(i="("+e.name+" | "+t.getFunctionName(n)+")"),new C(i,(function(t){return e.is(t)&&n(t)}),(function(i,s){return c(e.validate(i,s),(function(e){return n(e)?t.success(e):t.failure(e,s)}))}),e.encode,e,n)}t.ObjectType=Z,t.object=new Z,t.refinement=X,t.Integer=X(t.number,Number.isInteger,"Integer"),t.dictionary=t.record;var ee=function(e){function t(t,n,i,s,r){var a=e.call(this,t,n,i,s)||this;return a.props=r,a._tag="StrictType",a}return s(t,e),t}(l);t.StrictType=ee,t.clean=function(e){return e},t.alias=function(e){return function(){return e}};var te=function(e){return e.length>0};function ne(e,t){for(var n=[],i=0,s=e;i<s.length;i++){var r=s[i];-1!==t.indexOf(r)&&n.push(r)}return n}function ie(e){return"LiteralType"===e._tag}t.emptyTags={};var se=[];function re(e){if(-1!==se.indexOf(e))return t.emptyTags;if(function(e){return"InterfaceType"===e._tag}(e)||function(e){return"StrictType"===e._tag}(e)){var n=t.emptyTags;for(var i in e.props){var s=e.props[i];ie(s)&&(n===t.emptyTags&&(n={}),n[i]=[s.value])}return n}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return re(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,n){return function(e,n){if(e===t.emptyTags)return n;if(n===t.emptyTags)return e;var i=Object.assign({},e);for(var s in n)if(e.hasOwnProperty(s)){var r=ne(e[s],n[s]);if(!te(r)){i=t.emptyTags;break}i[s]=r}else i[s]=n[s];return i}(e,re(n))}),t.emptyTags);if(function(e){return"UnionType"===e._tag}(e))return e.types.slice(1).reduce((function(e,n){return function(e,n){if(e===t.emptyTags||n===t.emptyTags)return t.emptyTags;var i=t.emptyTags;for(var s in e)n.hasOwnProperty(s)&&0===ne(e[s],n[s]).length&&(i===t.emptyTags&&(i={}),i[s]=e[s].concat(n[s]));return i}(e,re(n))}),re(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){se.push(e);var r=re(e.type);return se.pop(),r}return t.emptyTags}function ae(e){for(var t=re(e[0]),n=Object.keys(t),i=e.length,s=function(n){for(var s=t[n].slice(),r=[t[n]],a=1;a<i;a++){var o=re(e[a])[n];if(void 0===o)return"continue-keys";if(o.some((function(e){return-1!==s.indexOf(e)})))return"continue-keys";s.push.apply(s,o),r.push(o)}return{value:[n,r]}},r=0,a=n;r<a.length;r++){var o=s(a[r]);if("object"==typeof o)return o.value}}t.getTags=re,t.getIndex=ae},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(77);n(7),n(52),n(53);var s=i.default({key:"css"}),r=s.flush,a=s.hydrate,o=s.cx,c=s.merge,l=s.getRegisteredStyles,u=s.injectGlobal,d=s.keyframes,f=s.css,p=s.sheet,b=s.cache;t.cache=b,t.css=f,t.cx=o,t.flush=r,t.getRegisteredStyles=l,t.hydrate=a,t.injectGlobal=u,t.keyframes=d,t.merge=c,t.sheet=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),s=n(52),r=n(53);function a(e){return e&&e.__esModule?e:{default:e}}var o=a(i);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function l(e,t,n){var i=[],s=r.getRegisteredStyles(e,i,n);return i.length<2?n:s+t(i)}var u=function e(t){for(var n="",i=0;i<t.length;i++){var s=t[i];if(null!=s){var r=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))r=e(s);else for(var a in r="",s)s[a]&&a&&(r&&(r+=" "),r+=a);break;default:r=s}r&&(n&&(n+=" "),n+=r)}}return n};t.default=function(e){var t=o.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=s.serializeStyles(n,t.registered,void 0);return r.insertStyles(t,a,!1),t.key+"-"+a.name};return{css:n,cx:function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return l(t.registered,n,u(i))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=s.serializeStyles(n,t.registered);c(t,r)},keyframes:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=s.serializeStyles(n,t.registered),a="animation-"+r.name;return c(t,{name:r.name,styles:"@keyframes "+a+"{"+r.styles+"}"}),a},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:r.getRegisteredStyles.bind(null,t.registered),merge:l.bind(null,t.registered,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(79),s=n(81),r=n(83);function a(e){return e&&e.__esModule?e:{default:e}}var o=a(i),c=a(s),l=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},f=function(e){return null!=e&&"boolean"!=typeof e},p=a(r).default((function(e){return d(e)?e:e.replace(l,"-$&").toLowerCase()})),b=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,n){return v={name:t,styles:n,next:v},t}))}return 1===c.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function g(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return v={name:n.name,styles:n.styles,next:v},n.name;if(void 0!==n.styles){var i=n.next;if(void 0!==i)for(;void 0!==i;)v={name:i.name,styles:i.styles,next:v},i=i.next;return n.styles+";"}return function(e,t,n){var i="";if(Array.isArray(n))for(var s=0;s<n.length;s++)i+=g(e,t,n[s])+";";else for(var r in n){var a=n[r];if("object"!=typeof a)null!=t&&void 0!==t[a]?i+=r+"{"+t[a]+"}":f(a)&&(i+=p(r)+":"+b(r,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var o=g(e,t,a);switch(r){case"animation":case"animationName":i+=p(r)+":"+o+";";break;default:i+=r+"{"+o+"}"}}else for(var c=0;c<a.length;c++)f(a[c])&&(i+=p(r)+":"+b(r,a[c])+";")}return i}(e,t,n);case"function":if(void 0!==e){var s=v,r=n(e);return v=s,g(e,t,r)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var v,m=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,s="";v=void 0;var r=e[0];null==r||void 0===r.raw?(i=!1,s+=g(n,t,r)):s+=r[0];for(var a=1;a<e.length;a++)s+=g(n,t,e[a]),i&&(s+=r[a]);m.lastIndex=0;for(var c,l="";null!==(c=m.exec(s));)l+="-"+c[1];return{name:o.default(s)+l,styles:s,next:v}}},function(e,t,n){"use strict";e.exports=n(80)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,n=0,i=0,s=e.length;s>=4;++i,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(s){case 3:n^=(255&e.charCodeAt(i+2))<<16;case 2:n^=(255&e.charCodeAt(i+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(i)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}},function(e,t,n){"use strict";e.exports=n(82)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,n){"use strict";e.exports=n(84)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="undefined"!=typeof document,s=function(e,t,n){var s=e.key+"-"+t.name;(!1===n||!1===i&&void 0!==e.compat)&&void 0===e.registered[s]&&(e.registered[s]=t.styles)};t.getRegisteredStyles=function(e,t,n){var i="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):i+=n+" "})),i},t.insertStyles=function(e,t,n){s(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a="",o=t;do{var c=e.insert(t===o?"."+r:"",o,e.sheet,!0);i||void 0===c||(a+=c),o=o.next}while(void 0!==o);if(!i&&0!==a.length)return a}},t.registerStyles=s},function(e,t,n){e.exports=n.p+"268ef3ed8d7e6357bd2128af250b7ca3.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.default=function(e,t){void 0===t&&(t=0);var n=i.useRef(!1),s=i.useRef(),r=i.useRef(e),a=i.useCallback((function(){return n.current}),[]),o=i.useCallback((function(){n.current=!1,s.current&&clearTimeout(s.current),s.current=setTimeout((function(){n.current=!0,r.current()}),t)}),[t]),c=i.useCallback((function(){n.current=null,s.current&&clearTimeout(s.current)}),[]);return i.useEffect((function(){r.current=e}),[e]),i.useEffect((function(){return o(),c}),[t]),[a,c,o]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.default=function(e,t){var n=i.useRef((function(){}));i.useEffect((function(){n.current=e})),i.useEffect((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}}])]);