/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[8,33,66],{132:function(t,n,e){"use strict";e.d(n,"c",(function(){return r})),e.d(n,"d",(function(){return o})),e.d(n,"h",(function(){return a})),e.d(n,"b",(function(){return u})),e.d(n,"e",(function(){return s})),e.d(n,"f",(function(){return l})),e.d(n,"j",(function(){return c})),e.d(n,"g",(function(){return d})),e.d(n,"a",(function(){return f})),e.d(n,"i",(function(){return _}));var i=e(5);const r={CLEAR_EXPLORER_DATA:"clearExplorerData",CLEAR_INFLUENCER_FILTER_SETTINGS:"clearInfluencerFilterSettings",CLEAR_JOBS:"clearJobs",JOB_SELECTION_CHANGE:"jobSelectionChange",SET_CHARTS_DATA_LOADING:"setChartsDataLoading",SET_EXPLORER_DATA:"setExplorerData"},o={ADD:"+",REMOVE:"-"},a={OVERALL:"overall",VIEW_BY:"viewBy"},u={EVENT_DISTRIBUTION:"event_distribution",POPULATION_DISTRIBUTION:"population_distribution",SINGLE_METRIC:"single_metric",GEO_MAP:"geo_map"},s=10,l=10,c=i.i18n.translate("xpack.ml.explorer.jobIdLabel",{defaultMessage:"job ID"}),d=i.i18n.translate("xpack.ml.explorer.overallLabel",{defaultMessage:"Overall"}),f=1e3,_=10},140:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));let i=function(t){return t[t.CRITICAL=75]="CRITICAL",t[t.MAJOR=50]="MAJOR",t[t.MINOR=25]="MINOR",t[t.WARNING=3]="WARNING",t[t.LOW=0]="LOW",t}({})},173:function(t,n,e){"use strict";e.d(n,"a",(function(){return o}));var i=e(5),r=e(174);const o={critical:{id:r.a.CRITICAL,label:i.i18n.translate("xpack.ml.anomalyUtils.severity.criticalLabel",{defaultMessage:"critical"})},major:{id:r.a.MAJOR,label:i.i18n.translate("xpack.ml.anomalyUtils.severity.majorLabel",{defaultMessage:"major"})},minor:{id:r.a.MINOR,label:i.i18n.translate("xpack.ml.anomalyUtils.severity.minorLabel",{defaultMessage:"minor"})},warning:{id:r.a.WARNING,label:i.i18n.translate("xpack.ml.anomalyUtils.severity.warningLabel",{defaultMessage:"warning"})},unknown:{id:r.a.UNKNOWN,label:i.i18n.translate("xpack.ml.anomalyUtils.severity.unknownLabel",{defaultMessage:"unknown"})},low:{id:r.a.LOW,label:i.i18n.translate("xpack.ml.anomalyUtils.severityWithLow.lowLabel",{defaultMessage:"low"})}}},174:function(t,n,e){"use strict";e.d(n,"a",(function(){return i}));let i=function(t){return t.CRITICAL="critical",t.MAJOR="major",t.MINOR="minor",t.WARNING="warning",t.LOW="low",t.UNKNOWN="unknown",t}({})},181:function(t,n,e){"use strict";e.d(n,"a",(function(){return i})),e.d(n,"d",(function(){return r})),e.d(n,"b",(function(){return o})),e.d(n,"e",(function(){return a})),e.d(n,"c",(function(){return u}));let i=function(t){return t.SKIP_MODEL_UPDATE="skip_model_update",t.SKIP_RESULT="skip_result",t}({}),r=function(t){return t.EXCLUDE="exclude",t.INCLUDE="include",t}({}),o=function(t){return t.ACTUAL="actual",t.DIFF_FROM_TYPICAL="diff_from_typical",t.TYPICAL="typical",t}({}),a=function(t){return t.LESS_THAN="lt",t.LESS_THAN_OR_EQUAL="lte",t.GREATER_THAN="gt",t.GREATER_THAN_OR_EQUAL="gte",t}({});const u=["freq_rare","lat_long","metric","rare"]},252:function(t,n,e){"use strict";e.d(n,"a",(function(){return u})),e.d(n,"f",(function(){return c})),e.d(n,"e",(function(){return d})),e.d(n,"g",(function(){return f})),e.d(n,"c",(function(){return _})),e.d(n,"d",(function(){return m})),e.d(n,"i",(function(){return p})),e.d(n,"j",(function(){return h})),e.d(n,"h",(function(){return v})),e.d(n,"b",(function(){return g}));var i=e(140),r=e(173),o=e(181);let a=function(t){return t.BY="by",t.OVER="over",t.PARTITON="partition",t}({});const u={ADD:"+",REMOVE:"-"},s=["count","distinct_count","lat_long","mean","max","min","sum","median","varp","info_content","time"],l=["count","distinct_count","lat_long","mean","max","min","sum","median","varp","info_content","time"];function c(t){return"mlcategory"===t.entityName}function d(t){return t>=i.a.CRITICAL?r.a.critical:t>=i.a.MAJOR?r.a.major:t>=i.a.MINOR?r.a.minor:t>=i.a.WARNING?r.a.warning:t>=i.a.LOW?r.a.low:r.a.unknown}function f(t){if(void 0===t.anomaly_score_explanation)return!1;const n=t.anomaly_score_explanation.single_bucket_impact,e=t.anomaly_score_explanation.multi_bucket_impact;return void 0!==e&&0!==e&&!(void 0!==n&&n>e)&&((void 0===n||0===n)&&e>0||void 0!==n&&e>n&&(e-n)*e/n*1.7>=2)}function _(t){return t<2?1:t<4?2:t<7?3:t<12?4:5}function m(t){const n=[];return void 0!==t.partition_field_name&&n.push({fieldName:t.partition_field_name,fieldValue:t.partition_field_value,fieldType:a.PARTITON}),void 0!==t.over_field_name&&n.push({fieldName:t.over_field_name,fieldValue:t.over_field_value,fieldType:a.OVER}),void 0!==t.by_field_name&&void 0===t.over_field_name&&n.push({fieldName:t.by_field_name,fieldValue:t.by_field_value,fieldType:a.BY}),n}function p(t){return s.indexOf(t)>-1}function h(t){return l.indexOf(t)>-1}function v(t){return-1===o.c.indexOf(t.function)||void 0!==function(t){return void 0!==t.by_field_name&&void 0!==t.by_field_value?t.by_field_name:void 0!==t.over_field_name?t.over_field_name:void 0!==t.partition_field_name?t.partition_field_name:void 0}(t)}const g={toES(t){let n=t;return"mean"===n?n="avg":"distinct_count"===n?n="cardinality":"median"===n&&(n="percentiles"),n},toML(t){let n=t;return"avg"===n?n="mean":"cardinality"===n?n="distinct_count":"percentiles"===n&&(n="median"),n}}},318:function(t,n,e){"use strict";e.d(n,"a",(function(){return v})),e.d(n,"b",(function(){return b}));var i=e(29),r=e(86),o=e(8),a=e(39),u=e.n(a),s=e(47),l=e.n(s);const c=new RegExp("^([0-9]*)\\s*("+l.a.units.join("|")+")$"),d=["ms","s","m","h"],f=["ms","s","m","h","d"],{duration:_}=u.a,m=l.a.unitsDesc,p=m.indexOf("w"),h=function(){const t=[[_(500,"ms"),_(100,"ms")],[_(5,"second"),_(1,"second")],[_(10,"second"),_(5,"second")],[_(15,"second"),_(10,"second")],[_(30,"second"),_(15,"second")],[_(1,"minute"),_(30,"second")],[_(5,"minute"),_(1,"minute")],[_(10,"minute"),_(5,"minute")],[_(15,"minute"),_(10,"minute")],[_(30,"minute"),_(10,"minute")],[_(1,"hour"),_(30,"minute")],[_(2,"hour"),_(1,"hour")],[_(4,"hour"),_(2,"hour")],[_(6,"hour"),_(4,"hour")],[_(8,"hour"),_(6,"hour")],[_(12,"hour"),_(8,"hour")],[_(24,"hour"),_(12,"hour")],[_(2,"d"),_(1,"d")],[_(4,"d"),_(2,"d")],[_(1,"week"),_(4,"d")],[_(1,"month"),_(1,"week")],[_(1,"year"),_(1,"month")],[1/0,_(1,"year")]].slice(0).reverse();function n(t,n,e){return function(i,r){const o=function(i,r){const o=r/i;let a;for(let i=0;i<t.length;i++){const r=t[i],u=n(r[0],r[1],o);if(null==u){if(!e)continue;if(a)return a;break}if(!e)return u;a=u}const s=Math.max(Math.floor(o),1);return u.a.duration(s,"ms")}(i,r);if(o)return u.a.duration(o._data)}}return{near:n(t,(function(t,n,e){if(t>e){if(t===1/0)return n;const i=t.asMilliseconds(),r=n.asMilliseconds();return Math.abs(i-e)<=Math.abs(r)?t:n}}),!0),lessThan:n(t,(function(t,n,e){if(n<e)return t!==1/0?t:n})),atLeast:n(t,(function(t,n,e){if(n<=e)return n}))}}();function v(t,n){this._timeBucketsConfig=t,this._fieldFormats=n,this.barTarget=this._timeBucketsConfig[r.UI_SETTINGS.HISTOGRAM_BAR_TARGET],this.maxBars=this._timeBucketsConfig[r.UI_SETTINGS.HISTOGRAM_MAX_BARS]}function g(t,n){const e=function(t){for(let n=0;n<m.length;n++){const e=m[n],i=t.as(e);if(i>=1&&Math.floor(i)===i){if(n<=p)continue;return{value:i,unit:e,expression:i+e}}}const n=t.as("ms");return{value:n,unit:"ms",expression:n+"ms"}}(t);t.esValue=e.value,t.esUnit=e.unit,t.expression=e.expression,t.overflow=n>t&&u.a.duration(t-n);const i=u.a.normalizeUnits(e.unit);return 1===e.value?t.description=i:t.description=`${e.value} ${i}s`,t}function I(t){return t&&"isValid"in t&&t.isValid()}function b(t,n,e=!1){const i=n.asMilliseconds(),r=Math.floor(t.min.valueOf()/i)*i;let o=Math.ceil(t.max.valueOf()/i)*i;return!1===e&&(o-=1),{min:u()(r),max:u()(o)}}v.prototype.setBarTarget=function(t){this.barTarget=t},v.prototype.setMaxBars=function(t){this.maxBars=t},v.prototype.setBounds=function(t){if(!t)return this.clearBounds();let n;n=Object(o.isPlainObject)(t)?[t.min,t.max]:Array.isArray(t)?t:[];const e=Object(o.sortBy)(n.map(Object(o.ary)(u.a,1)),Number);if(2!==e.length||!e.every(I))throw this.clearBounds(),new Error("invalid bounds set: "+t);if(this._lb=e.shift(),this._ub=e.pop(),this.getDuration().asSeconds()<0)throw new TypeError("Intervals must be positive")},v.prototype.clearBounds=function(){this._lb=this._ub=null},v.prototype.hasBounds=function(){return I(this._ub)&&I(this._lb)},v.prototype.getBounds=function(){if(this.hasBounds())return{min:this._lb,max:this._ub}},v.prototype.getDuration=function(){if(this.hasBounds())return u.a.duration(this._ub-this._lb,"ms")},v.prototype.setInterval=function(t){this.originalInterval=t;let n=t;if(n&&"auto"!==n){if(Object(o.isString)(n)&&(t=n,n=function(t,n=!1){const e=String(t).trim().match(c);if(!Array.isArray(e)||e.length<3)return null;try{const t=parseInt(e[1],10),i=e[2];return isNaN(t)||t<1&&-1===d.indexOf(i)||!0===n&&-1===f.indexOf(i)?null:Object(a.duration)(t,i)}catch(t){return null}}(n),0==+n&&(n=null)),!u.a.isDuration(n))throw new TypeError('"'+t+'" is not a valid interval.');this._i=n}else this._i="auto"},v.prototype.getInterval=function(){const t=this,n=t.getDuration();return g(function(e){if(!t.hasBounds())return e;const i=t.maxBars;let r;return n/e>i?(r=h.lessThan(i,n),+r==+e?e:(g(e,n),Object(o.assign)(r,{preScaled:e,scale:e/r,scaled:!0}))):e}(function(){const e=t._i;return u.a.isDuration(e)?e:h.near(t.barTarget,n)}()),n)},v.prototype.getIntervalToNearestMultiple=function(t){const n=this.getInterval(),e=n.asSeconds(),i=e%t;if(0===i)return n;let r=i>t/2?e+t-i:e-i;r=0===r?t:r;const o=u.a.duration(r,"seconds");g(o,this.getDuration());const a=n.preScaled;return void 0!==a&&a<o&&(o.preScaled=a,o.scale=a/o,o.scaled=!0),o},v.prototype.getIntervalToNearestMultiple=function(t){const n=this.getInterval(),e=n.asSeconds(),i=e%t;if(0===i)return n;let r=i>t/2?e+t-i:e-i;r=0===r?t:r;const o=u.a.duration(r,"seconds");g(o,this.getDuration());const a=n.preScaled;return void 0!==a&&a<o&&(o.preScaled=a,o.scale=a/o,o.scaled=!0),o},v.prototype.getScaledDateFormat=function(){const t=this.getInterval(),n=this._timeBucketsConfig["dateFormat:scaled"];for(let e=n.length-1;e>=0;e--){const i=n[e];if(!i[0]||t>=u.a.duration(i[0]))return i[1]}return this._timeBucketsConfig.dateFormat},v.prototype.getScaledDateFormatter=function(){return new(this._fieldFormats.getType(i.FIELD_FORMAT_IDS.DATE))({pattern:this.getScaledDateFormat()},this._timeBucketsConfig)}}}]);