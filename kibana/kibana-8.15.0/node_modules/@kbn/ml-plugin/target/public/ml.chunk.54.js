/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[54],{150:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(33),i=a(203);const n=[s.euiDarkVars.euiColorVis0,s.euiDarkVars.euiColorVis1,s.euiDarkVars.euiColorVis2,s.euiDarkVars.euiColorVis3,s.euiDarkVars.euiColorVis4,s.euiDarkVars.euiColorVis5,s.euiDarkVars.euiColorVis6,s.euiDarkVars.euiColorVis7,s.euiDarkVars.euiColorVis8,s.euiDarkVars.euiColorVis9,s.euiDarkVars.euiColorDarkShade,s.euiDarkVars.euiColorPrimary],o={};function l(e){if(void 0===o[e]){const t=Object(i.a)(e),a=n[t%n.length];return o[e]=a,a}return o[e]}},188:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var s=a(2),i=a.n(s),n=a(25),o=a(15),l=a(28),r=a(122),c=a(6);const u=({jobCount:e})=>{const{showNodeInfo:t}=Object(r.d)();return!1===t||!1===Object(l.b)()||0===e?null:Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(n.EuiCallOut,{title:Object(c.jsx)(o.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarning.title",defaultMessage:"Awaiting machine learning node"}),color:"primary",iconType:"iInCircle"},Object(c.jsx)("div",null,Object(c.jsx)(o.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarning.noMLNodesAvailableDescription",defaultMessage:"{jobCount, plural, one {# job} other {# jobs}} will start after autoscaling has increased ML capacity. This may take several minutes.",values:{jobCount:e}}))),Object(c.jsx)(n.EuiSpacer,{size:"m"}))},d=()=>{const{showNodeInfo:e}=Object(r.d)();return!1===Object(l.b)()?null:e?Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(n.EuiCallOut,{title:Object(c.jsx)(o.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarning.title",defaultMessage:"Awaiting machine learning node"}),color:"primary",iconType:"iInCircle"},Object(c.jsx)("div",null,Object(c.jsx)(o.FormattedMessage,{id:"xpack.ml.newJobAwaitingNodeWarning.noMLNodesAvailableDescription",defaultMessage:"There are currently no nodes that can run the job, therefore it will remain in OPENING state until autoscaling increases ML capacity. This may take several minutes."}))),Object(c.jsx)(n.EuiSpacer,{size:"m"})):Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(n.EuiCallOut,{title:Object(c.jsx)(o.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarning.serverless.title",defaultMessage:"Machine learning is starting..."}),color:"primary",iconType:"iInCircle"}),Object(c.jsx)(n.EuiSpacer,{size:"m"}))};a(44)},203:function(e,t,a){"use strict";function s(e){let t=0,a=0;if(0===e.length)return t;for(let s=0;s<e.length;s++)a=e.charCodeAt(s),t=(t<<5)-t+a,t|=0;return t<0?-2*t:t}a.d(t,"a",(function(){return s}))},209:function(e,t,a){"use strict";var s=a(163);a.d(t,"a",(function(){return s.a}))},244:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var s=a(2),i=a.n(s),n=a(25),o=a(5),l=a(15),r=a(261),c=a.n(r),u=a(28),d=a(10),b=a(1),m=a(70),j=a(6);const p=()=>{const{services:{docLinks:e}}=Object(d.d)(),[t,a]=Object(m.usePermissionCheck)(["canCreateDataFrameAnalytics","canStartStopDataFrameAnalytics"]),s=!Object(u.c)()||!t||!a,r=Object(d.h)();return Object(j.jsx)(n.EuiEmptyPrompt,{layout:"horizontal",hasBorder:!1,hasShadow:!1,icon:Object(j.jsx)(n.EuiImage,{size:"fullWidth",src:c.a,alt:o.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptTitle",{defaultMessage:"Analyze your data with data frame analytics"})}),title:Object(j.jsx)("h2",null,Object(j.jsx)(l.FormattedMessage,{id:"xpack.ml.dataFrame.analyticsList.emptyPromptTitle",defaultMessage:"Analyze your data with data frame analytics"})),body:Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)("p",null,Object(j.jsx)(l.FormattedMessage,{id:"xpack.ml.overview.analyticsList.emptyPromptText",defaultMessage:"Train outlier detection, regression, or classification machine learning models using data frame analytics."}))),actions:[Object(j.jsx)(n.EuiButton,{onClick:async()=>{await r(b.b.DATA_FRAME_ANALYTICS_SOURCE_SELECTION)},isDisabled:s,color:"primary","data-test-subj":"mlAnalyticsCreateFirstButton"},o.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptButtonText",{defaultMessage:"Create data frame analytics job"})),Object(j.jsx)(n.EuiLink,{href:e.links.ml.dataFrameAnalytics,target:"_blank",external:!0},Object(j.jsx)(l.FormattedMessage,{id:"xpack.ml.common.readDocumentationLink",defaultMessage:"Read documentation"}))],"data-test-subj":"mlNoDataFrameAnalyticsFound"})}},260:function(e,t,a){e.exports=a.p+"7a4082435b3e1246960afd2e97c6c091.png"},261:function(e,t,a){e.exports=a.p+"bd21a7c05ddd7f5b46fe03d98fd506c9.png"},276:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var s=a(2),i=a.n(s),n=a(15),o=a(25),l=a(260),r=a.n(l),c=a(1),u=a(10),d=a(70),b=a(28),m=a(6);const j=()=>{const e=!Object(d.usePermissionCheck)("canCreateJob")||!Object(b.c)(),{services:{docLinks:t}}=Object(u.d)(),a=Object(u.g)(),s=Object(u.h)();return Object(m.jsx)(o.EuiEmptyPrompt,{layout:"horizontal",hasBorder:!1,hasShadow:!1,icon:Object(m.jsx)(o.EuiImage,{size:"fullWidth",src:r.a,alt:"anomaly_detection"}),title:Object(m.jsx)("h2",null,Object(m.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.anomalyDetection.createFirstJobMessage",defaultMessage:"Start detecting anomalies"})),body:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)("p",null,Object(m.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.anomalyDetection.emptyPromptText",defaultMessage:"Anomaly detection enables you to find unusual behavior in time series data. Start automatically spotting the anomalies hiding in your data and resolve issues faster."}))),actions:[Object(m.jsx)(o.EuiButton,{color:"primary",onClick:async()=>{if(!a)return;const e=await a.getUrl({page:c.b.ANOMALY_DETECTION_CREATE_JOB_SELECT_INDEX});await s(e,!0)},isDisabled:e,"data-test-subj":"mlCreateNewJobButton"},Object(m.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.anomalyDetection.createJobButtonText",defaultMessage:"Create anomaly detection job"})),Object(m.jsx)(o.EuiLink,{href:t.links.ml.anomalyDetection,target:"_blank",external:!0},Object(m.jsx)(n.FormattedMessage,{id:"xpack.ml.common.readDocumentationLink",defaultMessage:"Read documentation"}))],"data-test-subj":"mlAnomalyDetectionEmptyState"})}},279:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(120),i=a.n(s),n=(a(2),a(25)),o=a(5),l=a(150),r=a(6);const c=({icon:e,id:t,isGroup:a=!1,numJobs:s,removeId:c})=>{let u,d={color:a?Object(l.a)(t):"hollow"};return!0===e&&c&&(d={...d,iconType:"cross",iconSide:"right",onClick:()=>c(t),onClickAriaLabel:"Remove id"}),void 0!==s&&(u=o.i18n.translate("xpack.ml.jobSelector.selectedGroupJobs",{defaultMessage:"({jobsCount, plural, one {# job} other {# jobs}})",values:{jobsCount:s}})),Object(r.jsx)(n.EuiBadge,i()({key:`${t}-id`,"data-test-subj":`mlJobSelectionBadge ${t}`},d),`${t}${u||""}`)}},323:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(6);a(2);const i={name:"1v0pok0",styles:"min-width:300px"},n=({title:e})=>Object(s.jsx)("div",{css:i},e)},353:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var s=a(2),i=a(86),n=a(318);const o=e=>Object(s.useMemo)((()=>new n.a({[i.UI_SETTINGS.HISTOGRAM_MAX_BARS]:e.get(i.UI_SETTINGS.HISTOGRAM_MAX_BARS),[i.UI_SETTINGS.HISTOGRAM_BAR_TARGET]:e.get(i.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:e.get("dateFormat"),"dateFormat:scaled":e.get("dateFormat:scaled")})),[e])},868:function(e,t,a){"use strict";a.r(t),a.d(t,"overviewPanelDefaultState",(function(){return ie})),a.d(t,"OverviewPage",(function(){return ne}));var s=a(2),i=a.n(s),n=a(15),o=a(25),l=a(5),r=a(517),c=a(417),u=a(189),d=a(256),b=a(1),m=a(179),j=a(255),p=a(70),g=a(28),O=a(8),v=a(10),x=a(415),f=a(353);function y(){const e=Object(v.g)(),t=Object(r.c)(),a=Object(v.h)();return[{isPrimary:!0,name:l.i18n.translate("xpack.ml.overview.anomalyDetection.viewJobsActionName",{defaultMessage:"View jobs"}),description:l.i18n.translate("xpack.ml.overview.anomalyDetection.resultActions.openInJobManagementText",{defaultMessage:"View jobs"}),icon:"list",type:"icon",onClick:async t=>{const s=await(null==e?void 0:e.getUrl({page:b.b.ANOMALY_DETECTION_JOBS_MANAGE,pageState:{groupIds:[t.id]}}));await a(s)}},{isPrimary:!1,name:l.i18n.translate("xpack.ml.overview.anomalyDetection.viewResultsActionName",{defaultMessage:"View in Anomaly Explorer"}),description:l.i18n.translate("xpack.ml.overview.anomalyDetection.resultActions.openJobsInAnomalyExplorerText",{defaultMessage:"View in Anomaly Explorer"}),icon:"visTable",type:"icon",onClick:async s=>{const i=await(null==e?void 0:e.getUrl({page:b.b.ANOMALY_EXPLORER,pageState:{jobIds:s.jobIds,timeRange:t.getTime()}}));await a(i)}}]}var w=a(279),h=a(135),S=a(241),T=a(6);let M=function(e){return e.id="id",e.maxAnomalyScore="max_anomaly_score",e.overallSwimLane="overallSwimLane",e.jobIds="jobIds",e.latestTimestamp="latest_timestamp",e.docsProcessed="docs_processed",e.jobsInGroup="jobs_in_group",e}({});const A=({items:e,chartsService:t})=>{const a=Object.values(e),[i,r]=Object(s.useState)(0),[c,u]=Object(s.useState)(10),[d,b]=Object(s.useState)(M.id),[m,j]=Object(s.useState)("asc"),{services:{uiSettings:p}}=Object(v.d)(),g=Object(f.a)(p),O=[{field:M.id,name:l.i18n.translate("xpack.ml.overview.anomalyDetection.tableId",{defaultMessage:"Group ID"}),render:e=>Object(T.jsx)(w.a,{id:e,isGroup:"ungrouped"!==e}),sortable:!0,truncateText:!0,width:"15%"},{name:Object(T.jsx)(o.EuiToolTip,{content:l.i18n.translate("xpack.ml.overview.anomalyDetection.tableOverallScoreTooltip",{defaultMessage:"Overall anomaly scores within selected time range"})},Object(T.jsx)("span",null,l.i18n.translate("xpack.ml.overview.anomalyDetection.overallScore",{defaultMessage:"Overall score"}),Object(T.jsx)(o.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),render:e=>{const a=e.overallSwimLane;return a?a.points.length>0&&a.points.every((e=>0===e.value))?Object(T.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.anomalyDetection.noAnomaliesFoundMessage",defaultMessage:"No anomalies found"}):Object(T.jsx)(S.b,{timeBuckets:g,swimlaneData:e.overallSwimLane,swimlaneType:"overall",onResize:()=>{},isLoading:!1,id:e.id,showTimeline:!1,showYAxis:!1,showLegend:!1,noDataWarning:Object(T.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.anomalyDetection.noResultsFoundMessage",defaultMessage:"No results found"}),chartsService:t}):null},width:"300px"},{field:M.jobsInGroup,name:l.i18n.translate("xpack.ml.overview.anomalyDetection.tableNumJobs",{defaultMessage:"Jobs in group"}),sortable:!0,truncateText:!0,width:"10%"},{field:M.latestTimestamp,name:l.i18n.translate("xpack.ml.overview.anomalyDetection.tableLatestTimestamp",{defaultMessage:"Latest timestamp"}),dataType:"date",render:e=>Object(x.b)(e),textOnly:!0,truncateText:!0,sortable:!0,width:"25%"},{field:M.docsProcessed,name:l.i18n.translate("xpack.ml.overview.anomalyDetection.tableDocsProcessed",{defaultMessage:"Docs processed"}),render:e=>Object(h.i)(e),textOnly:!0,sortable:!0,width:"15%"},{name:l.i18n.translate("xpack.ml.overview.anomalyDetection.tableActionLabel",{defaultMessage:"Actions"}),actions:y(),width:"80px",align:"right"}],A={initialPageIndex:i,initialPageSize:c,totalItemCount:a.length,pageSizeOptions:[10,20,50],showPerPageOptions:!0},k={sort:{field:d,direction:m}};return Object(T.jsx)(o.EuiInMemoryTable,{allowNeutralSort:!1,className:"mlAnomalyDetectionTable",columns:O,items:a,itemId:M.id,onTableChange:({page:e={index:0,size:10},sort:t={field:M.id,direction:"asc"}})=>{const{index:a,size:s}=e;r(a),u(s);const{field:i,direction:n}=t;b(i),j(n)},pagination:A,sorting:k,"data-test-subj":"mlOverviewTableAnomalyDetection"})};var k=a(11),E=a(30),_=a(160),D=a(71),L=a(276),C=a(122);const I=({anomalyTimelineService:e,setLazyJobCount:t})=>{const{services:{charts:a}}=Object(v.d)(),{displayErrorToast:i}=Object(D.useToastNotificationService)(),{showNodeInfo:r}=Object(C.d)(),c=Object(_.a)(),[p,g]=Object(u.b)(m.g,ie),x=Object(v.f)({page:b.b.ANOMALY_DETECTION_JOBS_MANAGE}),[f,y]=Object(s.useState)(!1),[w,h]=Object(s.useState)({}),[S,M]=Object(s.useState)(0),[I,N]=Object(s.useState)(),[J,F]=Object(s.useState)(),[P,B]=Object(s.useState)(),V=async t=>{try{const a=Object.fromEntries(Object.entries(t).filter((([e,t])=>t.jobs.length>0)).map((([t,a])=>[t,e.loadOverallData(a.jobs,300)]))),s=Object(O.zipObject)(Object.keys(a),await Promise.all(Object.values(a))),i={...t};for(const e in i)i.hasOwnProperty(e)&&(i[e].overallSwimLane=s[e]);h(i)}catch(e){i(e,l.i18n.translate("xpack.ml.overview.anomalyDetection.errorWithFetchingSwimLanesData",{defaultMessage:"An error occurred fetching anomaly results"}))}};Object(s.useEffect)((()=>{(async()=>{y(!0);let e=0;try{const a=(await k.ml.jobs.jobsSummary([])).map((t=>(t.latestTimestampSortValue=t.latestTimestampMs||0,t.awaitingNodeAssignment&&e++,t))),{groups:s,count:i}=function(e){const t={ungrouped:{id:"ungrouped",jobs:[],jobIds:[],docs_processed:0,latest_timestamp:0,max_anomaly_score:null,jobs_in_group:0}};e.forEach((e=>{e.groups.length>0?e.groups.forEach((a=>{void 0===t[a]?t[a]={id:a,jobs:[e],jobIds:[e.id],docs_processed:e.processed_record_count,latest_timestamp:e.latestTimestampMs,max_anomaly_score:null,jobs_in_group:1}:(t[a].jobs.push(e),t[a].jobIds.push(e.id),t[a].docs_processed+=e.processed_record_count,t[a].jobs_in_group++,(void 0===t[a].latest_timestamp||e.latestTimestampMs&&e.latestTimestampMs>t[a].latest_timestamp)&&(t[a].latest_timestamp=e.latestTimestampMs))})):(t.ungrouped.jobs.push(e),t.ungrouped.jobIds.push(e.id),t.ungrouped.docs_processed+=e.processed_record_count,t.ungrouped.jobs_in_group++,e.latestTimestampMs&&e.latestTimestampMs>t.ungrouped.latest_timestamp&&(t.ungrouped.latest_timestamp=e.latestTimestampMs))})),0===t.ungrouped.jobIds.length&&delete t.ungrouped;const a=Object.values(t).length;return{groups:t,count:a}}(a),n=function(e,t){const a={total:{label:l.i18n.translate("xpack.ml.overviewJobsList.statsBar.totalJobsLabel",{defaultMessage:"Total"}),value:0,show:!0,group:0},open:{label:l.i18n.translate("xpack.ml.overviewJobsList.statsBar.openJobsLabel",{defaultMessage:"Open"}),value:0,show:!0,group:0},closed:{label:l.i18n.translate("xpack.ml.overviewJobsList.statsBar.closedJobsLabel",{defaultMessage:"Closed"}),value:0,show:!0,group:0},failed:{label:l.i18n.translate("xpack.ml.overviewJobsList.statsBar.failedJobsLabel",{defaultMessage:"Failed"}),value:0,show:!1,group:0},...t?{activeNodes:{label:l.i18n.translate("xpack.ml.overviewJobsList.statsBar.activeMLNodesLabel",{defaultMessage:"Active ML nodes"}),value:0,show:!0,group:1}}:{},activeDatafeeds:{label:l.i18n.translate("xpack.ml.jobsList.statsBar.activeDatafeedsLabel",{defaultMessage:"Active datafeeds"}),value:0,show:!0,group:1}};if(void 0===e)return a;const s={};let i=0;if(e.forEach((e=>{e.jobState===E.c.OPENED?a.open.value++:e.jobState===E.c.CLOSED?a.closed.value++:e.jobState===E.c.FAILED&&i++,e.hasDatafeed&&e.datafeedState===E.a.STARTED&&a.activeDatafeeds.value++,void 0!==e.nodeName&&(s[e.nodeName]={})})),a.total.value=e.length,i?(a.failed.value=i,a.failed.show=!0):a.failed.show=!1,t&&(a.activeNodes.value=Object.keys(s).length),0===a.total.value)for(const[e,t]of Object.entries(a))"total"!==e&&(t.show=!1);return a}(a,r),o=Object(O.groupBy)(Object.entries(n).filter((([e,t])=>t.show)).map((([e,t])=>t)),"group");y(!1),B(void 0),N(o[0]),F(o[1]),M(i),h(s),V(s),t(e)}catch(e){B(void 0!==e.message?e.message:JSON.stringify(e)),y(!1)}})()}),[null==c?void 0:c.timeRange]);const R=Object(T.jsx)(s.Fragment,null,Object(T.jsx)(o.EuiCallOut,{title:l.i18n.translate("xpack.ml.overview.anomalyDetection.errorPromptTitle",{defaultMessage:"An error occurred getting the anomaly detection jobs list."}),color:"danger",iconType:"warning"},Object(T.jsx)("pre",null,P))),z=!P&&!1===f&&void 0===P&&0===S;return Object(T.jsx)(j.a,{isOpen:p.adJobs,onToggle:e=>{g({...p,adJobs:e})},header:Object(T.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.adJobsPanel.header",defaultMessage:"Anomaly Detection Jobs"}),headerItems:[...I?[Object(T.jsx)(d.b,{inputStats:I,dataTestSub:"mlOverviewJobStatsBar"})]:[],...J?[Object(T.jsx)(d.b,{inputStats:J,dataTestSub:"mlOverviewJobStatsBarExtra"})]:[],Object(T.jsx)(o.EuiLink,{href:x},l.i18n.translate("xpack.ml.overview.anomalyDetection.manageJobsButtonText",{defaultMessage:"Manage jobs"}))]},z?Object(T.jsx)(L.a,null):null,void 0!==P&&R,f?Object(T.jsx)(o.EuiLoadingSpinner,{className:"mlOverviewPanel__spinner",size:"xl"}):null,!1===f&&void 0===P&&S>0?Object(T.jsx)(A,{items:w,chartsService:a}):null)};var N=a(204),J=a(164),F=a(387),P=a(294);const B=({item:e})=>{const{disabled:t,tooltipContent:a}=Object(P.a)(e),i=l.i18n.translate("xpack.ml.overview.analytics.resultActions.openJobText",{defaultMessage:"View job results"}),n=!1===t?i:a,r=Object(s.useMemo)((()=>Object(N.a)(e.config.analysis)),[e]),c=Object(v.f)({page:b.b.DATA_FRAME_ANALYTICS_EXPLORATION,pageState:{jobId:e.id,analysisType:r}});return Object(T.jsx)(o.EuiToolTip,{position:"top",content:n},Object(T.jsx)(o.EuiButtonIcon,{href:c,size:"xs",iconType:"visTable","aria-label":i,"data-test-subj":"mlOverviewAnalyticsJobViewButton",isDisabled:t}))};function V(){const e=Object(v.g)(),t=Object(v.h)();return[{isPrimary:!1,name:l.i18n.translate("xpack.ml.overview.analytics.viewJobActionName",{defaultMessage:"View job"}),description:l.i18n.translate("xpack.ml.overview.analytics.viewJobActionName",{defaultMessage:"View job"}),type:"icon",icon:"list",onClick:async a=>{const s=await(null==e?void 0:e.getUrl({page:b.b.DATA_FRAME_ANALYTICS_JOBS_MANAGE,pageState:{jobId:a.id}}));await t(s)}},{isPrimary:!1,name:l.i18n.translate("xpack.ml.overview.analytics.viewResultsActionName",{defaultMessage:"View results"}),description:l.i18n.translate("xpack.ml.overview.analytics.resultActions.openJobText",{defaultMessage:"View job results"}),render:e=>Object(T.jsx)(B,{item:e})}]}const R=({items:e})=>{const[t,a]=Object(s.useState)(0),[i,n]=Object(s.useState)(10),[r,c]=Object(s.useState)(J.b.id),[u,d]=Object(s.useState)("asc"),b=[{field:J.b.id,name:l.i18n.translate("xpack.ml.overview.analyticsList.id",{defaultMessage:"ID"}),sortable:!0,truncateText:!1,width:"20%"},{name:l.i18n.translate("xpack.ml.overview.analyticsList.type",{defaultMessage:"Type"}),sortable:e=>Object(N.a)(e.config.analysis),truncateText:!0,render:e=>Object(T.jsx)(o.EuiBadge,{color:"hollow"},Object(N.a)(e.config.analysis)),width:"150px"},{name:l.i18n.translate("xpack.ml.overview.analyticsList.status",{defaultMessage:"Status"}),sortable:e=>e.stats.state,truncateText:!0,render:e=>Object(F.c)(e.stats.state,e.stats.failure_reason),width:"100px"},F.d,{field:J.b.configCreateTime,name:l.i18n.translate("xpack.ml.overview.analyticsList.reatedTimeColumnName",{defaultMessage:"Creation time"}),dataType:"date",render:e=>Object(x.b)(e),textOnly:!0,truncateText:!0,sortable:!0,width:"25%"},{name:l.i18n.translate("xpack.ml.overview.analyticsList.tableActionLabel",{defaultMessage:"Actions"}),actions:V(),width:"80px"}],m={initialPageIndex:t,initialPageSize:i,totalItemCount:e.length,pageSizeOptions:[10,20,50],showPerPageOptions:!0},j={sort:{field:r,direction:u}};return Object(T.jsx)(o.EuiInMemoryTable,{allowNeutralSort:!1,className:"mlAnalyticsTable",columns:b,items:e,itemId:J.b.id,onTableChange:({page:e={index:0,size:10},sort:t={field:J.b.id,direction:"asc"}})=>{const{index:s,size:i}=e;a(s),n(i);const{field:o,direction:l}=t;c(o),d(l)},pagination:m,sorting:j,"data-test-subj":"mlOverviewTableAnalytics"})};var z=a(274),G=a(244),U={name:"1r5gb7q",styles:"display:inline-block"};const Y=({setLazyJobCount:e})=>{const t=Object(_.a)(),[a,i]=Object(s.useState)([]),[r,c]=Object(s.useState)(void 0),[p,g]=Object(s.useState)(),[O,x]=Object(s.useState)(!1),f=Object(v.f)({page:b.b.DATA_FRAME_ANALYTICS_JOBS_MANAGE}),[y,w]=Object(u.b)(m.g,ie),h=Object(s.useCallback)((e=>{if(!e)return;const t=Object.entries(e).filter((([e,t])=>t.show)).map((([e,t])=>t));c(t)}),[]),S=Object(z.d)(i,h,g,x,e,!1);Object(s.useEffect)((()=>{S(!0)}),[t]);const M=Object(T.jsx)(o.EuiCallOut,{title:l.i18n.translate("xpack.ml.overview.analyticsList.errorPromptTitle",{defaultMessage:"An error occurred getting the data frame analytics list."}),color:"danger",iconType:"warning"},Object(T.jsx)("pre",null,p&&void 0!==p.message?p.message:JSON.stringify(p))),A=void 0===p&&!0===O&&0===a.length;return Object(T.jsx)(j.a,{isOpen:y.dfaJobs,onToggle:e=>{w({...y,dfaJobs:e})},header:Object(T.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.analyticsList.PanelTitle",defaultMessage:"Data Frame Analytics Jobs"}),headerItems:[...r?[Object(T.jsx)(d.b,{inputStats:r,dataTestSub:"mlOverviewAnalyticsStatsBar"})]:[],Object(T.jsx)(o.EuiLink,{href:f},l.i18n.translate("xpack.ml.overview.analyticsList.manageJobsButtonText",{defaultMessage:"Manage jobs"}))]},A?Object(T.jsx)(G.a,null):null,void 0!==p?M:null,!1===O&&Object(T.jsx)(o.EuiLoadingSpinner,{css:U,size:"xl"}),!0===O&&a.length>0?Object(T.jsx)(R,{items:a}):null)};var W=a(284),X=a(80);const H=({createAnomalyDetectionJobDisabled:e,setAdLazyJobCount:t,setDfaLazyJobCount:a})=>{const{services:{uiSettings:n,mlServices:{mlApiServices:l}}}=Object(v.d)(),{isADEnabled:c,isDFAEnabled:u}=Object(C.d)(),d=Object(r.c)(),[b,m]=Object(s.useState)();return Object(s.useEffect)((()=>{m(new W.AnomalyTimelineService(d,n,Object(X.mlResultsServiceProvider)(l)))}),[]),void 0===b?null:Object(T.jsx)(i.a.Fragment,null,c?Object(T.jsx)(i.a.Fragment,null,Object(T.jsx)(I,{anomalyTimelineService:b,setLazyJobCount:t}),Object(T.jsx)(o.EuiSpacer,{size:"m"})):null,u?Object(T.jsx)(Y,{setLazyJobCount:a}):null)};var $=a(51),q=a(188),K=a(169),Q=a(209),Z=a(142),ee=a(495),te=a(134),ae=a(323),se=a(23);const ie=Object.freeze({nodes:!0,adJobs:!0,dfaJobs:!0}),ne=()=>{const[e,t]=Object(p.usePermissionCheck)(["canViewMlNodes","canCreateJob"]),a=!t||!Object(g.c)(),{services:{docLinks:O}}=Object(v.d)(),x=O.links.ml.guide,f=Object(v.f)({page:b.b.MEMORY_USAGE}),y=Object(r.c)({timeRangeSelector:!0,autoRefreshSelector:!0}),[w,h]=Object(s.useState)(0),[S,M]=Object(s.useState)(0),[A,k]=Object(u.b)(m.g,ie);return Object(T.jsx)("div",null,Object(T.jsx)(te.a,null,Object(T.jsx)(ae.a,{title:l.i18n.translate("xpack.ml.overview.overviewLabel",{defaultMessage:"Overview"})})),Object(T.jsx)($.b,null),Object(T.jsx)(q.a,{jobCount:w+S}),Object(T.jsx)(K.a,{onCloseFlyout:()=>{const{from:e,to:t}=y.getTime(),a={start:e,end:t};c.a.next({lastRefresh:Date.now(),timeRange:a})}}),Object(T.jsx)(Q.a,null),e?Object(T.jsx)(i.a.Fragment,null,Object(T.jsx)(j.a,{isOpen:A.nodes,onToggle:e=>{k({...A,nodes:e})},header:Object(T.jsx)(n.FormattedMessage,{id:"xpack.ml.overview.nodesPanel.header",defaultMessage:"Nodes"}),headerItems:[Object(T.jsx)(d.b,{inputStats:[{label:l.i18n.translate("xpack.ml.overview.nodesPanel.totalNodesLabel",{defaultMessage:"Total"}),value:Object(se.c)(),"data-test-subj":"mlTotalNodesCount"}],dataTestSub:"mlOverviewAnalyticsStatsBar"}),Object(T.jsx)(o.EuiLink,{href:f},l.i18n.translate("xpack.ml.overview.nodesPanel.viewNodeLink",{defaultMessage:"View nodes"}))]},Object(T.jsx)(ee.a,{compactView:!0})),Object(T.jsx)(o.EuiSpacer,{size:"m"})):null,Object(T.jsx)(H,{createAnomalyDetectionJobDisabled:a,setAdLazyJobCount:h,setDfaLazyJobCount:M}),Object(T.jsx)(Z.a,{docLink:x}))};t.default=ne}}]);