/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[52],{120:function(e,t,n){e.exports=n(57)(4)},131:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));var r=n(4),o=n.n(r);let i=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),a=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class kbn_field_type_KbnFieldType{constructor(e={}){o()(this,"name",void 0),o()(this,"sortable",void 0),o()(this,"filterable",void 0),o()(this,"esTypes",void 0),this.name=e.name||a.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}const s=new kbn_field_type_KbnFieldType({name:a.UNKNOWN}),u=[new kbn_field_type_KbnFieldType({name:a.STRING,sortable:!0,filterable:!0,esTypes:[i.STRING,i.TEXT,i.MATCH_ONLY_TEXT,i.KEYWORD,i.VERSION,i._TYPE,i._ID]}),new kbn_field_type_KbnFieldType({name:a.NUMBER,sortable:!0,filterable:!0,esTypes:[i.FLOAT,i.HALF_FLOAT,i.SCALED_FLOAT,i.DOUBLE,i.INTEGER,i.LONG,i.UNSIGNED_LONG,i.SHORT,i.BYTE,i.TOKEN_COUNT,i.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:a.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[i.FLOAT_RANGE,i.DOUBLE_RANGE,i.INTEGER_RANGE,i.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:a.DATE,sortable:!0,filterable:!0,esTypes:[i.DATE,i.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:a.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[i.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:a.IP,sortable:!0,filterable:!0,esTypes:[i.IP]}),new kbn_field_type_KbnFieldType({name:a.IP_RANGE,sortable:!0,filterable:!0,esTypes:[i.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:a.BOOLEAN,sortable:!0,filterable:!0,esTypes:[i.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:a.OBJECT,esTypes:[i.OBJECT]}),new kbn_field_type_KbnFieldType({name:a.NESTED,esTypes:[i.NESTED]}),new kbn_field_type_KbnFieldType({name:a.GEO_POINT,esTypes:[i.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:a.GEO_SHAPE,esTypes:[i.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:a.ATTACHMENT,esTypes:[i.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:a.MURMUR3,esTypes:[i.MURMUR3]}),new kbn_field_type_KbnFieldType({name:a._SOURCE,esTypes:[i._SOURCE]}),new kbn_field_type_KbnFieldType({name:a.HISTOGRAM,filterable:!0,esTypes:[i.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:a.CONFLICT}),s],c=e=>{const t=u.find((t=>t.esTypes.includes(e)));return t&&t.name?t.name:a.UNKNOWN};function l(e){switch(e){case i._INDEX:return a.STRING;case"_version":return a.NUMBER;case"datetime":return a.DATE;default:return c(e)}}},147:function(e,t,n){"use strict";n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return E})),n.d(t,"e",(function(){return T}));var r=n(8),o=n(31),i=n.n(o),a=n(75),s=n(82),u=n(247),c=n(166);const l={bool:{must:[{match_all:{}}]}},d={query:"",language:"lucene"};function _(){return Object(r.cloneDeep)(l)}function f(){return Object(r.cloneDeep)(d)}function b(e,t,n){return null===n?{query:f(),combinedQuery:_()}:E(Object(c.c)(n),t,e)}function E(e,t,n){let r=f(),o=_();r=e.query;const i=e.filter,c=Array.isArray(i)?i:[];if(r.language===u.a.KUERY){const e=Object(a.fromKueryExpression)(r.query);""!==r.query&&(o=Object(a.toElasticsearchQuery)(e,t));const n=Object(a.buildQueryFromFilters)(c,t);void 0===o.bool&&(o.bool={},void 0!==o.multi_match&&(o.bool.should={multi_match:o.multi_match},delete o.multi_match)),!1===Array.isArray(o.bool.filter)&&(o.bool.filter=void 0===o.bool.filter?[]:[o.bool.filter]),!1===Array.isArray(o.bool.must_not)&&(o.bool.must_not=void 0===o.bool.must_not?[]:[o.bool.must_not]),o.bool.filter=[...o.bool.filter,...n.filter],o.bool.must_not=[...o.bool.must_not,...n.must_not]}else{const e=Object(s.getEsQueryConfig)(n);o=Object(a.buildEsQuery)(t,[r],c,e)}return{query:r,combinedQuery:o}}function T(e,t){try{return i.a.decode(e)}catch(e){return t}}},166:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return a}));const r=e=>async t=>{var n,r;const o={savedSearch:null,dataView:null};if(void 0===t)return o;const i=await e.savedSearchService.get(t);if(null===i)return o;const a=null===(n=i.references)||void 0===n||null===(r=n.find((e=>"index-pattern"===e.type)))||void 0===r?void 0:r.id;return o.dataView=await e.dataViewsService.get(a),o.savedSearch=i,o};function o(e){return{query:e.searchSource.getField("query"),filter:e.searchSource.getField("filter")}}function i(e){return e.includes(":")}function a(e){const t={message:null,errorMessage:null};for(const o of e.fields){var n,r;"message"===o.name&&null!==(n=o.toSpec().esTypes)&&void 0!==n&&n.includes("text")?t.message=o:"error.message"===o.name&&null!==(r=o.toSpec().esTypes)&&void 0!==r&&r.includes("text")&&(t.errorMessage=o)}return null!==t.message?{dataView:e,field:t.message}:null!==t.errorMessage?{dataView:e,field:t.errorMessage}:null}},203:function(e,t,n){"use strict";function r(e){let t=0,n=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t<0?-2*t:t}n.d(t,"a",(function(){return r}))},204:function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return _}));var r=n(218);const o=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===r.b.OUTLIER_DETECTION},i=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===r.b.REGRESSION},a=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===r.b.CLASSIFICATION},s=e=>{let t="";return i(e)&&(t=e.regression.dependent_variable),a(e)&&(t=e.classification.dependent_variable),t},u=e=>{let t;return i(e)&&void 0!==e.regression.prediction_field_name?t=e.regression.prediction_field_name:a(e)&&void 0!==e.classification.prediction_field_name&&(t=e.classification.prediction_field_name),t},c=e=>`${s(e)}_prediction`,l=(e,t,n)=>`${e}.${u(t)||c(t)}`,d=e=>{const t=Object.keys(e||{});return 1===t.length?t[0]:"unknown"},_=e=>{let t;return i(e)&&(t=e.regression.training_percent),a(e)&&(t=e.classification.training_percent),t}},218:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return _})),n.d(t,"h",(function(){return f})),n.d(t,"m",(function(){return b})),n.d(t,"l",(function(){return E}));const r={OUTLIER_DETECTION:"outlier_detection",REGRESSION:"regression",CLASSIFICATION:"classification"},o={ANALYZING:"analyzing",FAILED:"failed",REINDEXING:"reindexing",STARTED:"started",STARTING:"starting",STOPPED:"stopped"},i="ml",a={ANALYTICS:"analytics",ANALYTICS_JOB_MISSING:"analytics-job-missing",TRANSFORM:"transform",INDEX:"index",TRAINED_MODEL:"trainedModel",INGEST_PIPELINE:"ingestPipeline"},s="feature_importance",u="feature_influence",c="top_classes",l="outlier_score";let d=function(e){return e.ALPHA="alpha",e.ETA="eta",e.ETA_GROWTH_RATE_PER_TREE="eta_growth_rate_per_tree",e.DOWNSAMPLE_FACTOR="downsample_factor",e.FEATURE_BAG_FRACTION="feature_bag_fraction",e.FEATURE_INFLUENCE_THRESHOLD="feature_influence_threshold",e.GAMMA="gamma",e.LAMBDA="lambda",e.MAX_TREES="max_trees",e.MAX_OPTIMIZATION_ROUNDS_PER_HYPERPARAMETER="max_optimization_rounds_per_hyperparameter",e.METHOD="method",e.N_NEIGHBORS="n_neighbors",e.NUM_TOP_CLASSES="num_top_classes",e.NUM_TOP_FEATURE_IMPORTANCE_VALUES="num_top_feature_importance_values",e.OUTLIER_FRACTION="outlier_fraction",e.RANDOMIZE_SEED="randomize_seed",e.SOFT_TREE_DEPTH_LIMIT="soft_tree_depth_limit",e.SOFT_TREE_DEPTH_TOLERANCE="soft_tree_depth_tolerance",e}({}),_=function(e){return e.LOF="lof",e.LDOF="ldof",e.DISTANCE_KTH_NN="distance_kth_nn",e.DISTANCE_KNN="distance_knn",e}({});const f=0,b=1,E=100},229:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return T})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return p})),n.d(t,"k",(function(){return m})),n.d(t,"i",(function(){return O})),n.d(t,"d",(function(){return A})),n.d(t,"g",(function(){return N})),n.d(t,"h",(function(){return g})),n.d(t,"j",(function(){return S})),n.d(t,"m",(function(){return I})),n.d(t,"o",(function(){return D})),n.d(t,"n",(function(){return v})),n.d(t,"l",(function(){return G}));var r=n(83),o=n.n(r),i=n(2),a=n(5),s=n(131),u=n(69);let c=function(e){return e.HISTOGRAM="histogram",e.COUNTER="counter",e.GAUGE="gauge",e.SUMMARY="summary",e}({});var l=n(415),d=n(414),_=n(218),f=n(322);n(37);const b=10,E=1e4;let T=function(e){return e[e.UNUSED=0]="UNUSED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR",e}({});const y={border:"all",fontSize:"s",cellPadding:"s",stripes:!1,rowHover:"none",header:"shade"},p={showColumnSelector:!0,showDisplaySelector:!1,showSortSelector:!0,showFullScreenSelector:!1},m=e=>{const t=e.fields.map((e=>e.name));return t.filter((n=>{if(e.metaFields.includes(n))return!1;const r=n.split(".");return"keyword"!==r.pop()||!t.includes(r.join("."))}))},O=(e,t)=>Object.keys(e).map((n=>{let r;const o=e[n];switch(void 0!==o&&(d.a.has(o)||d.c.has(o))&&(r="numeric"),o){case"date":r="datetime";break;case"nested":case"geo_point":r="json";break;case"boolean":r="boolean";break;case"text":r=A}return n===`${t}.${_.j}`&&(r="numeric"),n.includes(`${t}.${_.k}`)&&(r="json"),n.includes(`${t}.${_.e}`)&&(r="featureImportance"),n===`${t}.${_.f}`&&(r="featureInfluence"),{id:n,schema:r,isSortable:!0}})),A="non-aggregatable",N=e=>{let t;switch(e){case s.a.GEO_POINT:case s.a.GEO_SHAPE:t="json";break;case s.a.BOOLEAN:t="boolean";break;case s.a.DATE:case s.a.DATE_NANOS:t="datetime";break;case s.a.BYTE:case s.a.DOUBLE:case s.a.FLOAT:case s.a.HALF_FLOAT:case s.a.INTEGER:case s.a.LONG:case s.a.SCALED_FLOAT:case s.a.SHORT:case"number":t="numeric";case s.a.KEYWORD:case s.a.VERSION:case s.a.TEXT:}return t},g=e=>{var t;let n;if(e){switch(e.type){case s.b.BOOLEAN:n="boolean";break;case s.b.DATE:n="datetime";break;case s.b.GEO_POINT:case s.b.GEO_SHAPE:n="json";break;case s.b.NUMBER:n="numeric";break;case s.b.NESTED:n="json"}return void 0===n&&!1===e.aggregatable||(e=>(null==e?void 0:e.timeSeriesMetric)===c.COUNTER)(e)||"numeric"===n&&null!=e&&null!==(t=e.esTypes)&&void 0!==t&&t.some((e=>e===s.a.AGGREGATE_METRIC_DOUBLE))?A:n}},R=(e,t)=>t?"true"===e:e,S=(e,t,n=!1)=>{const r=e[`${t}.feature_importance`];return void 0===r?[]:r.map((e=>({feature_name:Array.isArray(e.feature_name)?e.feature_name[0]:e.feature_name,classes:Array.isArray(e.classes)?e.classes.map((e=>{const t=G(e);return{importance:t.importance,class_name:R(t.class_name,n)}})):e.classes,importance:Array.isArray(e.importance)?e.importance[0]:e.importance})))},I=(e,t)=>{const n=e[`${t}.top_classes`];return void 0===n?[]:n.map((e=>G(e)))},D=(e,t,n,r,a)=>Object(i.useMemo)((()=>({rowIndex:i,columnId:c,setCellProps:d})=>{const f=i-t.pageIndex*t.pageSize,b=n[f];if(void 0===b)return null;if(void 0===e)return null;const E=e.fields.getByName(c);let T;void 0!==E&&(T=e.getFormatterForField(E));const y=function(e){if(n.hasOwnProperty(f)){const t=n[f];return t.hasOwnProperty(e)?t[e]:e===`${r}.feature_importance`?S(b,null!=r?r:_.d):e===`${r}.top_classes`?I(b,null!=r?r:_.d):Object(u.a)(n[f],e,null)}return null}(c);return"function"==typeof a&&a(c,y,b,d),"object"==typeof y&&null!==y?JSON.stringify(y):null==y?null:void 0!==T?T.convert(y,"text"):"string"==typeof y||null===y?y:(null==E?void 0:E.type)===s.b.DATE?Object(l.c)(1e3*o()(y).unix()):"boolean"==typeof y?y?"true":"false":y}),[null==e?void 0:e.fields,t.pageIndex,t.pageSize,n]),v=(e,t)=>{t.addDanger(a.i18n.translate("xpack.ml.dataGrid.columnChart.ErrorMessageToast",{defaultMessage:"An error occurred fetching the histogram charts data: {error}",values:{error:Object(f.a)(e)}}))},G=(e,t)=>{const n={...e};for(const e of Object.keys(n))void 0===t?Array.isArray(n[e])&&1===n[e].length&&(n[e]=n[e][0]):!1===t(e)&&Array.isArray(n[e])&&1===n[e].length&&(n[e]=n[e][0]);return n}},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={KUERY:"kuery",LUCENE:"lucene"}},248:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="YYYY-MM-DD HH:mm:ss"},322:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(37);const o=e=>{var t;if(function(e){var t;return e&&void 0!==(null===(t=e.error)||void 0===t?void 0:t.reason)}(e))return{message:null!==(t=e.error.reason)&&void 0!==t?t:"",statusCode:e.status,fullError:e};if(function(e){return"string"==typeof e}(e))return{message:e};if(function(e){return!0===(null==e?void 0:e.isBoom)}(e))return{message:e.output.payload.message,statusCode:e.output.payload.statusCode};if(void 0===(null==e?void 0:e.body)&&(null==e||!e.message))return{message:""};if("string"==typeof e.body)return{message:e.body};if(function(e){return"object"==typeof e.body&&"message"in e.body}(e)){var n,o;if("object"==typeof e.body.attributes&&"string"==typeof(null===(n=e.body.attributes.body)||void 0===n||null===(o=n.error)||void 0===o?void 0:o.reason)){var i,a,s;const t={message:e.body.attributes.body.error.reason,statusCode:e.body.statusCode,fullError:e.body.attributes.body};var u,c,l;return"object"!=typeof e.body.attributes.body.error.caused_by||"string"!=typeof(null===(i=e.body.attributes.body.error.caused_by)||void 0===i?void 0:i.reason)&&"string"!=typeof(null===(a=e.body.attributes.body.error.caused_by)||void 0===a||null===(s=a.caused_by)||void 0===s?void 0:s.reason)||(t.causedBy=(null===(u=e.body.attributes.body.error.caused_by)||void 0===u||null===(c=u.caused_by)||void 0===c?void 0:c.reason)||(null===(l=e.body.attributes.body.error.caused_by)||void 0===l?void 0:l.reason)),Array.isArray(e.body.attributes.body.error.root_cause)&&"object"==typeof e.body.attributes.body.error.root_cause[0]&&Object(r.a)(e.body.attributes.body.error.root_cause[0],["script"])&&(t.causedBy=e.body.attributes.body.error.root_cause[0].script,t.message+=`: '${e.body.attributes.body.error.root_cause[0].script}'`),t}return{message:e.body.message,statusCode:e.body.statusCode}}return function(e){return e&&void 0!==e.message&&"string"==typeof e.message}(e)?{message:e.message}:{message:""}},i=e=>o(e).message},414:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d}));var r=n(131),o=n(204),i=n(218);const a=8,s=new Set([r.a.UNSIGNED_LONG,r.a.LONG,r.a.INTEGER,r.a.SHORT,r.a.BYTE]),u=new Set([r.a.DOUBLE,r.a.FLOAT,r.a.HALF_FLOAT,r.a.SCALED_FLOAT]),c="ml__id_copy",l="ml__incremental_id",d=(e,t,n)=>{const r=n.dest.results_field;if(Object(o.h)(n.analysis)){if(e===`${r}.${i.j}`)return-1;if(t===`${r}.${i.j}`)return 1}if(Object(o.g)(n.analysis)||Object(o.i)(n.analysis)){const i=Object(o.c)(n.analysis),a=Object(o.d)(r,n.analysis,!0);if(e===`${r}.is_training`)return-1;if(t===`${r}.is_training`)return 1;if(e===a)return-1;if(t===a)return 1;if(e===i||e===i.replace(/\.keyword$/,""))return-1;if(t===i||t===i.replace(/\.keyword$/,""))return 1;if(e===`${r}.prediction_probability`)return-1;if(t===`${r}.prediction_probability`)return 1}const a=typeof e,s=typeof t,u=e.split("."),c=u[0],l=t.split("."),d=l[0];return c===r&&u.length>1&&d!==r?(u.shift(),u.shift(),u.join(".")===t?1:u.join(".").localeCompare(t)):d===r&&l.length>1&&c!==r?(l.shift(),l.shift(),l.join(".")===e?-1:e.localeCompare(l.join("."))):"string"!==a&&"string"===s?1:"string"===a&&"string"!==s?-1:e.localeCompare(t)}},415:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d}));var r=n(47),o=n.n(r),i=n(25),a=n(248);function s(e){return Object(i.formatDate)(e,"MMMM Do YYYY")}function u(e){return Object(i.formatDate)(e,"MMMM Do YYYY, HH:mm")}function c(e){return Object(i.formatDate)(e,"MMMM Do YYYY, HH:mm:ss")}function l(e){if(!e)return!1;const t=o.a.parse(e.from),n=o.a.parse(e.to);return!!(t&&t.isValid()&&n&&n.isValid())}const d=e=>Object(i.formatDate)(e,a.a)},829:function(e,t,n){"use strict";n.r(t);var r=n(226);n.d(t,"FieldStatsInfoButton",(function(){return r.a}));var o=n(157);n.d(t,"useFieldStatsTrigger",(function(){return o.a}));var i=n(313);n.d(t,"FieldStatsFlyoutProvider",(function(){return i.a}));var a=n(217);n.d(t,"useFieldStatsFlyoutContext",(function(){return a.b}))}}]);