/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[56],{160:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var s=a(26),n=a.n(s),i=a(7),l=a(2),c=a(517),o=a(417),r=a(153);const d=()=>{const e=Object(c.c)(),t=()=>{const{from:t,to:a}=e.getTime();return{start:t,end:a}},a=Object(l.useMemo)((()=>Object(i.merge)(o.a,e.getTimeUpdate$().pipe(Object(i.map)((()=>({lastRefresh:Date.now(),timeRange:t()})))),r.b.pipe(Object(i.map)((e=>({lastRefresh:e})))))),[]);return n()(a)}},163:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(2),n=a.n(s),i=a(25),l=a(15),c=a(70),o=a(6);const r=()=>!0===Object(c.useUpgradeCheck)()?Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiCallOut,{title:Object(o.jsx)(l.FormattedMessage,{id:"xpack.ml.upgrade.upgradeWarning.upgradeInProgressWarningTitle",defaultMessage:"Index migration in progress"}),color:"warning",iconType:"warning"},Object(o.jsx)("p",null,Object(o.jsx)(l.FormattedMessage,{id:"xpack.ml.upgrade.upgradeWarning.upgradeInProgressWarningDescription",defaultMessage:"Indices related to Machine Learning are currently being upgraded."}),Object(o.jsx)("br",null),Object(o.jsx)(l.FormattedMessage,{id:"xpack.ml.upgrade.upgradeWarning.upgradeInProgressWarningDescriptionExtra",defaultMessage:"Some actions will not be available during this time."}))),Object(o.jsx)(i.EuiSpacer,{size:"m"})):null},167:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(116);const n=Object(s.a)((async()=>({default:(await a.e(96).then(a.bind(null,230))).JobSpacesSyncFlyout})))},169:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(2),n=a.n(s),i=a(25),l=a(15),c=a(10),o=a(167),r=a(70),d=a(6);const u=({mlSavedObjectType:e,onCloseFlyout:t,forceRefresh:a})=>{const{savedObjects:{syncCheck:u}}=Object(c.c)(),m=Object(s.useRef)(!1),[j,b]=Object(s.useState)(!1),[g,p]=Object(s.useState)(!1),[x,f,y]=Object(r.usePermissionCheck)(["canCreateJob","canCreateDataFrameAnalytics","canCreateTrainedModels"]),O=Object(s.useMemo)((()=>x||f||y),[f,x,y]),M=Object(s.useCallback)((async()=>{try{if(!1===m.current)return;const{result:t}=await u(e);!0===m.current&&b(g||t)}catch(e){console.log("Saved object synchronization check could not be performed.")}}),[g,b]);Object(s.useEffect)((function(){return m.current=!0,void 0!==a&&!0!==a||M(),()=>{m.current=!1}}),[a,m,M]);const E=Object(s.useCallback)((()=>{p(!1),void 0===a&&M(),"function"==typeof t&&t()}),[M,t,p]);return Object(s.useEffect)((function(){!1===j&&!0===m.current&&p(!1)}),[j,p]),!1===j?null:Object(d.jsx)(n.a.Fragment,null,Object(d.jsx)(i.EuiCallOut,{title:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.title",defaultMessage:"ML job and trained model synchronization required"}),color:"warning",iconType:"warning","data-test-subj":"mlJobSyncRequiredWarning"},Object(d.jsx)(n.a.Fragment,null,Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.description",defaultMessage:"Some jobs or trained models are missing or have incomplete saved objects. "}),O?Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.link",defaultMessage:" {link}",values:{link:Object(d.jsx)(i.EuiLink,{onClick:p.bind(null,!0)},Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.linkToManagement.link",defaultMessage:"Synchronize your jobs and trained models."}))}}):Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.noPermission",defaultMessage:"An Administrator can synchronize the jobs and trained models in Stack Management."}),g&&Object(d.jsx)(o.a,{onClose:E}))),Object(d.jsx)(i.EuiSpacer,{size:"m"}))}},209:function(e,t,a){"use strict";var s=a(163);a.d(t,"a",(function(){return s.a}))},244:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var s=a(2),n=a.n(s),i=a(25),l=a(5),c=a(15),o=a(261),r=a.n(o),d=a(28),u=a(10),m=a(1),j=a(70),b=a(6);const g=()=>{const{services:{docLinks:e}}=Object(u.d)(),[t,a]=Object(j.usePermissionCheck)(["canCreateDataFrameAnalytics","canStartStopDataFrameAnalytics"]),s=!Object(d.c)()||!t||!a,o=Object(u.h)();return Object(b.jsx)(i.EuiEmptyPrompt,{layout:"horizontal",hasBorder:!1,hasShadow:!1,icon:Object(b.jsx)(i.EuiImage,{size:"fullWidth",src:r.a,alt:l.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptTitle",{defaultMessage:"Analyze your data with data frame analytics"})}),title:Object(b.jsx)("h2",null,Object(b.jsx)(c.FormattedMessage,{id:"xpack.ml.dataFrame.analyticsList.emptyPromptTitle",defaultMessage:"Analyze your data with data frame analytics"})),body:Object(b.jsx)(n.a.Fragment,null,Object(b.jsx)("p",null,Object(b.jsx)(c.FormattedMessage,{id:"xpack.ml.overview.analyticsList.emptyPromptText",defaultMessage:"Train outlier detection, regression, or classification machine learning models using data frame analytics."}))),actions:[Object(b.jsx)(i.EuiButton,{onClick:async()=>{await o(m.b.DATA_FRAME_ANALYTICS_SOURCE_SELECTION)},isDisabled:s,color:"primary","data-test-subj":"mlAnalyticsCreateFirstButton"},l.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptButtonText",{defaultMessage:"Create data frame analytics job"})),Object(b.jsx)(i.EuiLink,{href:e.links.ml.dataFrameAnalytics,target:"_blank",external:!0},Object(b.jsx)(c.FormattedMessage,{id:"xpack.ml.common.readDocumentationLink",defaultMessage:"Read documentation"}))],"data-test-subj":"mlNoDataFrameAnalyticsFound"})}},261:function(e,t,a){e.exports=a.p+"bd21a7c05ddd7f5b46fe03d98fd506c9.png"},267:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));const s={id:"model_id",description:"description",createdAt:"create_time",type:"type",modelType:"model_type"}},297:function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"j",(function(){return d})),a.d(t,"i",(function(){return u})),a.d(t,"b",(function(){return m})),a.d(t,"f",(function(){return j})),a.d(t,"a",(function(){return b})),a.d(t,"e",(function(){return g})),a.d(t,"d",(function(){return p})),a.d(t,"h",(function(){return x}));var s=a(5);const n=".elser_model_2",i=".elser_model_2_linux-x86_64",l=".multilingual-e5-small",c=".multilingual-e5-small_linux-x86_64",o=".elser_model_1",r={STARTED:"started",STARTING:"starting",STOPPING:"stopping"},d={PYTORCH:"pytorch",TREE_ENSEMBLE:"tree_ensemble",LANG_IDENT:"lang_ident"},u={NER:"ner",QUESTION_ANSWERING:"question_answering",ZERO_SHOT_CLASSIFICATION:"zero_shot_classification",TEXT_CLASSIFICATION:"text_classification",TEXT_EMBEDDING:"text_embedding",FILL_MASK:"fill_mask",TEXT_EXPANSION:"text_expansion"},m=s.i18n.translate("xpack.ml.trainedModels.modelsList.builtInModelLabel",{defaultMessage:"built-in"}),j="elastic",b="prepackaged",g="elastic",p=Object.freeze({[o]:{modelName:"elser",hidden:!0,version:1,config:{input:{field_names:["text_field"]}},description:s.i18n.translate("xpack.ml.trainedModels.modelsList.elserDescription",{defaultMessage:"Elastic Learned Sparse EncodeR v1 (Tech Preview)"}),type:["elastic","pytorch","text_expansion"]},[n]:{modelName:"elser",version:2,default:!0,config:{input:{field_names:["text_field"]}},description:s.i18n.translate("xpack.ml.trainedModels.modelsList.elserV2Description",{defaultMessage:"Elastic Learned Sparse EncodeR v2"}),type:["elastic","pytorch","text_expansion"]},[i]:{modelName:"elser",version:2,os:"Linux",arch:"amd64",config:{input:{field_names:["text_field"]}},description:s.i18n.translate("xpack.ml.trainedModels.modelsList.elserV2x86Description",{defaultMessage:"Elastic Learned Sparse EncodeR v2, optimized for linux-x86_64"}),type:["elastic","pytorch","text_expansion"]},[l]:{modelName:"e5",version:1,default:!0,config:{input:{field_names:["text_field"]}},description:s.i18n.translate("xpack.ml.trainedModels.modelsList.e5v1Description",{defaultMessage:"E5 (EmbEddings from bidirEctional Encoder rEpresentations)"}),license:"MIT",licenseUrl:"https://huggingface.co/elastic/multilingual-e5-small",type:["pytorch","text_embedding"]},[c]:{modelName:"e5",version:1,os:"Linux",arch:"amd64",config:{input:{field_names:["text_field"]}},description:s.i18n.translate("xpack.ml.trainedModels.modelsList.e5v1x86Description",{defaultMessage:"E5 (EmbEddings from bidirEctional Encoder rEpresentations), optimized for linux-x86_64"}),license:"MIT",licenseUrl:"https://huggingface.co/elastic/multilingual-e5-small_linux-x86_64",type:["pytorch","text_embedding"]}}),x={...r,DOWNLOADING:"downloading",DOWNLOADED:"downloaded",NOT_DOWNLOADED:"notDownloaded"}},398:function(e,t,a){"use strict";a.d(t,"a",(function(){return x})),a.d(t,"b",(function(){return f}));var s=a(2),n=a.n(s),i=a(25),l=a(5),c=a(15),o=a(297),r=a(46),d=a(71),u=a(267),m=a(10),j=a(6);function b(e){return e.dest&&e.analysis&&e.id}const g=[{field:"id",name:l.i18n.translate("xpack.ml.analyticsSelector.id",{defaultMessage:"ID"}),sortable:e=>e.id,truncateText:!0,"data-test-subj":"mlAnalyticsSelectorTableColumnId",scope:"row"},{field:"description",name:l.i18n.translate("xpack.ml.analyticsSelector.description",{defaultMessage:"Description"}),sortable:!0,truncateText:!0,"data-test-subj":"mlAnalyticsSelectorColumnJobDescription"},{field:"source.index",name:l.i18n.translate("xpack.ml.analyticsSelector.sourceIndex",{defaultMessage:"Source index"}),sortable:!0,truncateText:!0,"data-test-subj":"mlAnalyticsSelectorColumnSourceIndex"},{field:"dest.index",name:l.i18n.translate("xpack.ml.analyticsSelector.destinationIndex",{defaultMessage:"Destination index"}),sortable:!0,truncateText:!0,"data-test-subj":"mlAnalyticsSelectorColumnDestIndex"}],p=[{field:u.a.id,name:l.i18n.translate("xpack.ml.analyticsSelector.modelsList.modelIdHeader",{defaultMessage:"ID"}),sortable:!0,truncateText:!1,"data-test-subj":"mlAnalyticsSelectorColumnId"},{field:u.a.description,width:"350px",name:l.i18n.translate("xpack.ml.analyticsSelector.modelsList.modelDescriptionHeader",{defaultMessage:"Description"}),sortable:!1,truncateText:!1,"data-test-subj":"mlAnalyticsSelectorColumnDescription"}];function x({setAnalyticsId:e,jobsOnly:t=!1,setIsIdSelectorFlyoutVisible:a}){const[n,u]=Object(s.useState)(),[x,f]=Object(s.useState)([]),[y,O]=Object(s.useState)([]),[M,E]=Object(s.useState)(!1),{displayErrorToast:S}=Object(d.useToastNotificationService)(),_=Object(r.b)(),{dataFrameAnalytics:{getDataFrameAnalytics:F}}=Object(m.c)();function I(){a(!1)}Object(s.useEffect)((()=>{!async function(){E(!0);try{const{data_frame_analytics:e}=await F();f(e)}catch(e){console.error("Error fetching analytics",e),S(e,l.i18n.translate("xpack.ml.analyticsSelector.analyticsFetchErrorMessage",{defaultMessage:"An error occurred fetching analytics jobs. Refresh and try again."}))}E(!1)}(),!1===t&&async function(){E(!0);try{const e=await _.getTrainedModels();O(e)}catch(e){console.error("Error fetching trained models",e),S(e,l.i18n.translate("xpack.ml.analyticsSelector.trainedModelsFetchErrorMessage",{defaultMessage:"An error occurred fetching trained models. Refresh and try again."}))}E(!1)}()}),[]);const k=Object(s.useCallback)((()=>{void 0!==n&&e(n),I()}),[null==n?void 0:n.model_id,null==n?void 0:n.job_id]),v={initialPageSize:20,pageSizeOptions:[5,10,20,50]},h={selectable:e=>{const t=b(e),a=t?e.id:e.model_id,s=!t&&e.tags.includes(o.a);return(void 0===n||(null==n?void 0:n.job_id)===a||(null==n?void 0:n.model_id)===a)&&!s},onSelectionChange:e=>{var t,a;const s=e[0];if(!s)return void u(void 0);const n=b(s),i=n?s.analysis:s.inference_config,l=i?Object.keys(i)[0]:void 0;u({model_id:n?void 0:s.model_id,job_id:n?s.id:null===(t=s.metadata)||void 0===t||null===(a=t.analytics_config)||void 0===a?void 0:a.id,analysis_type:l})}},T=[{id:"Jobs",name:l.i18n.translate("xpack.ml.analyticsSelector.jobsTab",{defaultMessage:"Jobs"}),content:Object(j.jsx)(i.EuiInMemoryTable,{items:x,itemId:"id",loading:M,columns:g,pagination:v,sorting:!0,selection:h})}];return!1===t&&T.push({id:"Models",name:l.i18n.translate("xpack.ml.analyticsSelector.modelsTab",{defaultMessage:"Models"}),content:Object(j.jsx)(i.EuiInMemoryTable,{items:y,itemId:"model_id",loading:M,columns:p,pagination:v,sorting:!0,selection:h})}),Object(j.jsx)(i.EuiFlyout,{onClose:I,"data-test-subj":"mlFlyoutJobSelector","aria-labelledby":"jobSelectorFlyout"},Object(j.jsx)(i.EuiFlyoutHeader,{hasBorder:!0},Object(j.jsx)(i.EuiTitle,{size:"m"},Object(j.jsx)("h2",{id:"flyoutTitle"},l.i18n.translate("xpack.ml.analyticsSelector.flyoutTitle",{defaultMessage:"Analytics selection"})))),Object(j.jsx)(i.EuiFlyoutBody,{"data-test-subj":"mlJobSelectorFlyoutBody"},Object(j.jsx)(i.EuiTabbedContent,{size:"s",tabs:T,initialSelectedTab:T[0]})),Object(j.jsx)(i.EuiFlyoutFooter,null,Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButton,{onClick:k,fill:!0,isDisabled:void 0===n,"data-test-subj":"mlFlyoutAnalyticsSelectorButtonApply"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.ml.analyticsSelector.applyFlyoutButton",defaultMessage:"Apply"}))),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonEmpty,{iconType:"cross",onClick:I,"data-test-subj":"mlFlyoutAnalyticsSelectorButtonClose"},l.i18n.translate("xpack.ml.analyticsSelector.closeFlyoutButton",{defaultMessage:"Close"}))))))}const f=({setIsIdSelectorFlyoutVisible:e,selectedId:t})=>Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},t?Object(j.jsx)(i.EuiBadge,{key:`${t}-id`,"data-test-subj":`mlAnalyticsIdSelectionBadge ${t}`,color:"hollow"},t):null,t?null:Object(j.jsx)(i.EuiText,{size:"xs"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.ml.dataframe.analytics.noIdsSelectedLabel",defaultMessage:"No Analytics ID selected"}))),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonEmpty,{size:"xs",iconType:"pencil",onClick:e.bind(null,!0),"data-test-subj":"mlButtonEditAnalyticsIdSelection"},Object(j.jsx)(c.FormattedMessage,{id:"xpack.ml.dataframe.analytics.editSelection",defaultMessage:"Edit selection"})))),Object(j.jsx)(i.EuiHorizontalRule,null))},841:function(e,t,a){"use strict";a.r(t),a.d(t,"Page",(function(){return y}));var s=a(2),n=a.n(s),i=a(25),l=a(15),c=a(68),o=a(51),r=a(169),d=a(209),u=a(491),m=a(142),j=a(10),b=a(148),g=a(134),p=a(398),x=a(244),f=a(6);const y=()=>{var e,t;const[a,y]=Object(c.d)("_g"),O=null==a||null===(e=a.ml)||void 0===e?void 0:e.jobId,M=null==a||null===(t=a.ml)||void 0===t?void 0:t.modelId,[E,S]=Object(s.useState)(!1),[_,F]=Object(s.useState)(!O&&!M),[I,k]=Object(s.useState)(!0),{refresh:v}=Object(b.m)({isLoading:S}),h=Object(s.useCallback)((e=>{y({ml:{...e.job_id&&!e.model_id?{jobId:e.job_id}:{},...e.model_id?{modelId:e.model_id}:{}}})}),[y]),{services:{docLinks:T}}=Object(j.d)(),{dataFrameAnalytics:{getDataFrameAnalytics:A}}=Object(j.c)(),D=T.links.ml.dataFrameAnalytics;return Object(s.useEffect)((function(){(async()=>{try{const{count:e}=await A(void 0,void 0,0);k(e>0)}catch(e){console.error("Error checking analytics jobs exist",e)}})()}),[]),Object(f.jsx)(n.a.Fragment,null,Object(f.jsx)(p.b,{setIsIdSelectorFlyoutVisible:F,selectedId:null!=O?O:M}),_?Object(f.jsx)(p.a,{setAnalyticsId:h,setIsIdSelectorFlyoutVisible:F}):null,void 0===O&&void 0===M?Object(f.jsx)(g.a,null,Object(f.jsx)(l.FormattedMessage,{"data-test-subj":"mlPageDataFrameAnalyticsMapTitle",id:"xpack.ml.dataframe.analyticsMap.title",defaultMessage:"Map for Analytics"})):null,void 0!==O&&void 0===M?Object(f.jsx)(g.a,null,Object(f.jsx)(l.FormattedMessage,{"data-test-subj":"mlPageDataFrameAnalyticsMapTitle",id:"xpack.ml.dataframe.analyticsMap.analyticsIdTitle",defaultMessage:"Map for job ID {jobId}",values:{jobId:O}})):null,void 0!==M&&void 0===O?Object(f.jsx)(g.a,null,Object(f.jsx)(l.FormattedMessage,{"data-test-subj":"mlPageDataFrameAnalyticsMapTitle",id:"xpack.ml.dataframe.analyticsMap.modelIdTitle",defaultMessage:"Map for trained model ID {modelId}",values:{modelId:M}})):null,Object(f.jsx)(o.b,null),Object(f.jsx)(r.a,{onCloseFlyout:v}),Object(f.jsx)(d.a,null),O||M?Object(f.jsx)(u.JobMap,{key:`${null!=O?O:M}-id`,analyticsId:O,modelId:M,forceRefresh:E}):!1===I?Object(f.jsx)(x.a,null):Object(f.jsx)(n.a.Fragment,null,Object(f.jsx)(i.EuiEmptyPrompt,{iconType:"warning",title:Object(f.jsx)("h2",null,Object(f.jsx)(l.FormattedMessage,{id:"xpack.ml.dataframe.analyticsMap.noJobSelectedLabel",defaultMessage:"No Analytics ID selected"})),"data-test-subj":"mlNoAnalyticsFound"})),Object(f.jsx)(m.a,{docLink:D}))}}}]);