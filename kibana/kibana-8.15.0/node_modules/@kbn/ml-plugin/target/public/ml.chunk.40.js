/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[40,37,38,80,85,86,103],{122:function(e,t,a){"use strict";var i=a(158);a.d(t,"a",(function(){return i.a})),a.d(t,"c",(function(){return i.b}));var n=a(205);a.d(t,"b",(function(){return n.a})),a.d(t,"d",(function(){return n.b}))},130:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return u})),a(2);var i=a(575),n=a(25),r=a(68),s=a(396),l=a(416),o=a(6);const c=({context:e,children:t})=>{const a=!e.initialized;return null!=e&&e.resolvedComponent?e.resolvedComponent:Object(o.jsx)(n.EuiSkeletonText,{lines:10,isLoading:a},a?null:t)},d=({pageDeps:e})=>Object(o.jsx)(i.a,{history:e.history},Object(o.jsx)(r.a,null,Object(o.jsx)(s.a,null,Object(o.jsx)(l.a,{pageDeps:e}))));function u(e,t){return`/${e}${t?`${t}`:""}`}},134:function(e,t,a){"use strict";var i=a(331);a.d(t,"a",(function(){return i.a}))},139:function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"d",(function(){return v})),a.d(t,"n",(function(){return O})),a.d(t,"g",(function(){return y})),a.d(t,"f",(function(){return _})),a.d(t,"k",(function(){return S})),a.d(t,"i",(function(){return E})),a.d(t,"j",(function(){return w})),a.d(t,"o",(function(){return A})),a.d(t,"l",(function(){return T})),a.d(t,"m",(function(){return C})),a.d(t,"p",(function(){return k})),a.d(t,"c",(function(){return I})),a.d(t,"b",(function(){return L})),a.d(t,"h",(function(){return R})),a.d(t,"q",(function(){return D})),a.d(t,"e",(function(){return F}));var i=a(8),n=a(83),r=a.n(n),s=a(7),l=a(131),o=a(37),c=a(322),d=a(252),u=a(830),m=a(162),p=a(123),b=a(40),f=a(11),h=a(73),g=a(17),x=a(132);function j(e){return e.map((e=>{var t;const a=Object(b.a)(e.analysis_config.bucket_span);return{id:e.job_id,selected:!1,bucketSpanSeconds:a.asSeconds(),isSingleMetricViewerJob:Object(p.r)(e),sourceIndices:e.datafeed_config.indices,modelPlotEnabled:!0===(null===(t=e.model_plot_config)||void 0===t?void 0:t.enabled)}}))}function v(){return{selectedCells:void 0}}async function O(e,t,a,n,r,s,l,o){const c={};s.forEach((e=>{const t=e.fieldName;void 0===c[e.fieldName]&&(c[e.fieldName]=[]),c[t].push(e.fieldValue)})),r.forEach((e=>{(e.influencers||[]).forEach((e=>{const t=e.influencer_field_name,a=e.influencer_field_values;void 0===c[t]&&(c[t]=[]),c[t].push(...a)}))}));const d={};Object.keys(c).forEach((e=>{const t=c[e];d[e]=Object(i.uniq)(t)}));const u=[];return Object.keys(d).forEach((e=>{void 0!==s.find((t=>t.fieldName===e))?u.push(...s):d[e].forEach((t=>{u.push({fieldName:e,fieldValue:t})}))})),await k(e,t,a,n,u,l,o)}function y(e){const t=[];return e.forEach((e=>{const a=h.mlJobService.getJob(e.id);void 0!==a&&a.analysis_config&&a.analysis_config.influencers&&t.push(...a.analysis_config.influencers)})),t}function _(){const e=Object(g.g)().get("dateFormat:tz");return"Browser"!==e?e:r.a.tz.guess()}function S(e,t){const a=t;let i=a.min.valueOf(),n=a.max.valueOf();return void 0!==(null==e?void 0:e.times)&&(i=void 0!==e.times[0]?1e3*e.times[0]:a.min.valueOf(),n=a.max.valueOf(),void 0!==e.times[1]&&(n=1e3*e.times[1]-1)),{earliestMs:i,latestMs:n}}function E(e,t){return e&&e.type!==x.h.OVERALL&&void 0!==e.viewByFieldName&&e.viewByFieldName!==x.j?e.lanes.map((e=>({fieldName:t,fieldValue:e}))):[]}function w(e,t){return e&&e.type!==x.h.OVERALL&&void 0!==e.viewByFieldName&&e.viewByFieldName===x.j?e.lanes:t.map((e=>e.id))}function A(e,t){const a=e.map((e=>e.id)),i=S(void 0,t);return new Promise((e=>{Object(s.lastValueFrom)(f.ml.annotations.getAnnotations$({jobIds:a,earliestMs:i.earliestMs,latestMs:i.latestMs,maxAnnotations:m.a})).then((t=>{if(void 0!==t.error||void 0===t.annotations){const a=Object(c.a)(t.error);return e({annotationsData:[],error:""!==a?a:void 0})}const i=[];return a.forEach((e=>{const a=t.annotations[e];void 0!==a&&i.push(...a)})),e({annotationsData:i.sort(((e,t)=>e.timestamp-t.timestamp)).map(((e,t)=>(e.key=(t+1).toString(),e)))})})).catch((t=>{const a=Object(c.a)(t);return e({annotationsData:[],error:""!==a?a:void 0})}))}))}function T(e,t,a){const i=w(e,t),n=S(e,a);return new Promise((e=>{Object(s.lastValueFrom)(f.ml.annotations.getAnnotations$({jobIds:i,earliestMs:n.earliestMs,latestMs:n.latestMs,maxAnnotations:m.a})).then((t=>{if(void 0!==t.error||void 0===t.annotations){const a=Object(c.a)(t.error);return e({annotationsData:[],totalCount:0,error:""!==a?a:void 0})}const a=[];return i.forEach((e=>{const i=t.annotations[e];void 0!==i&&a.push(...i)})),e({annotationsData:a.sort(((e,t)=>e.timestamp-t.timestamp)).map(((e,t)=>(e.key=(t+1).toString(),e))),totalCount:t.totalCount})})).catch((t=>{const a=Object(c.a)(t);return e({annotationsData:[],totalCount:0,error:""!==a?a:void 0})}))}))}async function C(e,t,a,n,r,s,l,o){const c=w(e,t),b=E(e,r),g=S(e,n);return new Promise(((e,t)=>{f.ml.results.getAnomaliesTableData(c,[],b,s,l,g.earliestMs,g.latestMs,a,m.b,x.e,o).toPromise().then((t=>{const a=t.anomalies,n=h.mlJobService.detectorsByJob;a.forEach((e=>{const t=e.jobId,a=Object(i.get)(n,[t,e.detectorIndex]);e.detector=Object(i.get)(a,["detector_description"],e.source.function_description),void 0!==a&&void 0!==a.custom_rules&&(e.rulesLength=a.custom_rules.length);const r=h.mlJobService.getJob(t);let s=Object(p.p)(r,e.detectorIndex);if(!1===s&&Object(p.n)(r,e.detectorIndex)){const t=Object(d.d)(e.source);s=Object(p.o)(r,e.detectorIndex,t)}e.isTimeSeriesViewRecord=s,e.isGeoRecord=void 0!==a&&a.function===u.b.LAT_LONG,void 0!==h.mlJobService.customUrlsByJob[t]&&(e.customUrls=h.mlJobService.customUrlsByJob[t])})),e({anomalies:a,interval:t.interval,examplesByJobId:t.examplesByJobId,showViewSeriesLink:!0,jobIds:c})})).catch((e=>{console.log("Explorer - error loading data for anomalies table:",e),t()}))}))}async function k(e,t,a,i,n,r,s){return new Promise((l=>{!0!==r?e.getTopInfluencers(t,a,i,x.f,10,1,n,s).then((e=>{l(e.influencers)})):l({})}))}function M(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function I(e){return e.replace(/[()]/g,"\\$&")}function L(e){return e.replace(/[\\"]/g,"\\$&")}function R(e,t){const a=M(e),i=M(t);return new RegExp(`(${a})\\s?:\\s?(")?(${i})(")?`,"i")}function D(e,t,a){let i="";const n=R(t,a);return i=e.replace(n,""),i=i.replace(/\s+(and|or)\s+(and|or)\s+/gi," $1 "),i=i.replace(/\s(and|or)\s*$/gi,""),i=i.replace(/^\s*(and|or)\s/gi,""),i}async function F(e,t,a){const i={},n=new Map;if(Array.isArray(e))for(const c of e){let e,d;if(s=c,Object(o.a)(s)&&"string"==typeof s.id&&void 0!==s.selected&&void 0!==s.bucketSpanSeconds?(e=c.sourceIndices,d=c.id):(e=c.datafeed_config.indices,d=c.job_id),Array.isArray(e))for(const s of e){var r;const e=n.get(s),o=null!==(r=null==e?void 0:e.id)&&void 0!==r?r:await a.getDataViewIdFromName(s);if(o){const a=null!=e?e:await t.get(o);if(!a)continue;n.set(s,a);const r=[...a.fields.getByType(l.a.GEO_POINT),...a.fields.getByType(l.a.GEO_SHAPE)];r.length>0&&(void 0===i[d]&&(i[d]={[s]:{geoFields:[],dataViewId:o}}),i[d][s].geoFields.push(...r.map((e=>e.name))))}}}var s;return{sourceIndicesWithGeoFieldsMap:i,dataViews:[...n.values()]}}},142:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(2),n=a.n(i),r=a(5),s=a(10);const l=n.a.memo((({docLink:e,appName:t})=>{const{chrome:a}=Object(s.d)().services;return Object(i.useEffect)((()=>{a.setHelpExtension({appName:null!=t?t:r.i18n.translate("xpack.ml.chrome.help.appName",{defaultMessage:"Machine Learning"}),links:[{href:e,linkType:"documentation"}]})}),[]),null}));l.displayName="HelpMenu"},153:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return AnnotationUpdatesService}));var i=a(4),n=a.n(i),r=a(7);new r.BehaviorSubject(null);const s=new r.BehaviorSubject(Date.now()),l=()=>s.next(Date.now());class AnnotationUpdatesService{constructor(){n()(this,"_annotation$",new r.BehaviorSubject(null))}update$(){return this._annotation$.asObservable()}isAnnotationInitialized$(){return this._annotation$.asObservable().pipe(Object(r.distinctUntilChanged)(((e,t)=>null!==e&&null!==t)))}setValue(e){this._annotation$.next(e)}}},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n}));let i=null;function n(e){return i=e,i}function r(){return null!==i&&i.hasLicenseExpired()}function s(){return null!==i&&i.isFullLicense()}},158:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return h}));var i=a(2),n=a.n(i),r=a(15),s=a(22),l=a(19),o=a(5),c=a(25),d=a(166),u=a(10),m=a(147),p=a(6);const b=n.a.createContext({}),f=({children:e})=>{const[t,a]=Object(i.useState)(),[n,f]=Object(i.useState)(),h=Object(s.useLocation)(),{services:{data:{dataViews:g},savedSearch:x,uiSettings:j}}=Object(u.d)(),{index:v,savedSearchId:O}=Object(l.parse)(h.search,{sort:!1}),y=Object(i.useCallback)((e=>Object(d.b)({savedSearchService:x,dataViewsService:g})(e)),[x,g]),_=Object(i.useCallback)((async()=>{if(""===v)throw new Error(o.i18n.translate("xpack.ml.useResolver.errorIndexPatternIdEmptyString",{defaultMessage:"dataViewId must not be empty string."}));let e={savedSearch:null,dataView:null};void 0!==O?e=await y(O):void 0!==v&&(e.dataView=await g.get(v));const{savedSearch:t,dataView:a}=e,{combinedQuery:i}=Object(m.b)(j,null!==a?a:void 0,t);return{combinedQuery:i,selectedDataView:a,selectedSavedSearch:t}}),[v,O,j,g,y]);return Object(i.useEffect)((()=>{_().then((e=>{a(e)})).catch((e=>{f(e)}))}),[_]),t||n?n?Object(p.jsx)(c.EuiEmptyPrompt,{iconType:"error",color:"danger",title:Object(p.jsx)("h2",null,Object(p.jsx)(r.FormattedMessage,{id:"xpack.ml.dataSourceContext.errorTitle",defaultMessage:"Unable to fetch data view or saved search"})),body:Object(p.jsx)("p",null,n.message)}):Object(p.jsx)(b.Provider,{value:t},e):null},h=()=>Object(i.useContext)(b)},162:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));const i=500,n=500},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(2),n=a(153);const r=Object(i.createContext)(new n.a)},172:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(58),n=a(2),r=i.__importDefault(a(223));t.default=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=[]);var i=r.default(e,t),s=i[0],l=i[1],o=i[2];return n.useEffect(o,a),[s,l]}},178:function(e,t,a){"use strict";a.d(t,"b",(function(){return L})),a.d(t,"a",(function(){return R}));var i=a(2),n=a.n(i),r=a(517),s=a(4),l=a.n(s),o=a(7),c=a(8),d=a(417),u=a(132),m=a(73),p=a(139),b=a(283);class anomaly_timeline_state_service_AnomalyTimelineStateService extends b.a{constructor(e,t,a,i){super(),l()(this,"_explorerURLStateCallback",void 0),l()(this,"_overallSwimLaneData$",new o.BehaviorSubject(null)),l()(this,"_viewBySwimLaneData$",new o.BehaviorSubject(void 0)),l()(this,"_swimLaneUrlState$",new o.BehaviorSubject(null)),l()(this,"_containerWidth$",new o.BehaviorSubject(0)),l()(this,"_selectedCells$",new o.BehaviorSubject(void 0)),l()(this,"_swimLaneSeverity$",new o.BehaviorSubject(0)),l()(this,"_swimLanePagination$",new o.BehaviorSubject({viewByFromPage:1,viewByPerPage:10})),l()(this,"_swimLaneCardinality$",new o.BehaviorSubject(void 0)),l()(this,"_viewBySwimlaneFieldName$",new o.BehaviorSubject(void 0)),l()(this,"_viewBySwimLaneOptions$",new o.BehaviorSubject([])),l()(this,"_topFieldValues$",new o.BehaviorSubject([])),l()(this,"_isOverallSwimLaneLoading$",new o.BehaviorSubject(!0)),l()(this,"_isViewBySwimLaneLoading$",new o.BehaviorSubject(!0)),l()(this,"_swimLaneBucketInterval$",new o.BehaviorSubject(null)),l()(this,"_timeBounds$",void 0),l()(this,"_refreshSubject$",void 0),l()(this,"timeDomain$",this._overallSwimLaneData$.pipe(Object(o.map)((e=>e?{min:1e3*e.earliest,max:1e3*e.latest,minInterval:1e3*e.interval}:null)))),this.anomalyExplorerUrlStateService=e,this.anomalyExplorerCommonStateService=t,this.anomalyTimelineService=a,this.timefilter=i,this._timeBounds$=this.timefilter.getTimeUpdate$().pipe(Object(o.startWith)(null),Object(o.map)((()=>this.timefilter.getBounds()))),this._refreshSubject$=d.a.pipe(Object(o.startWith)({lastRefresh:0})),this._explorerURLStateCallback=(e,t)=>{const a=this.anomalyExplorerUrlStateService.getPageUrlState(),i=null==a?void 0:a.mlExplorerSwimlane,n=t?e:{...i,...e};return this.anomalyExplorerUrlStateService.updateUrlState({...a,mlExplorerSwimlane:n})},this._init()}_initSubscriptions(){const e=new o.Subscription;return e.add(this.anomalyExplorerUrlStateService.getPageUrlState$().pipe(Object(o.map)((e=>null==e?void 0:e.mlExplorerSwimlane)),Object(o.distinctUntilChanged)(c.isEqual)).subscribe(this._swimLaneUrlState$)),e.add(this._initViewByData()),e.add(this._swimLaneUrlState$.pipe(Object(o.map)((e=>{var t;return null!==(t=null==e?void 0:e.severity)&&void 0!==t?t:0})),Object(o.distinctUntilChanged)()).subscribe(this._swimLaneSeverity$)),e.add(this._initSwimLanePagination()),e.add(this._initOverallSwimLaneData()),e.add(this._initTopFieldValues()),e.add(this._initViewBySwimLaneData()),e.add(Object(o.combineLatest)([this.anomalyExplorerCommonStateService.getSelectedJobs$(),this.getContainerWidth$(),this._timeBounds$]).subscribe((([e,t])=>{this._swimLaneBucketInterval$.next(this.anomalyTimelineService.getSwimlaneBucketInterval(e,t))}))),e.add(this._initSelectedCells()),e}_initViewByData(){return Object(o.combineLatest)([this._swimLaneUrlState$.pipe(Object(o.map)((e=>null==e?void 0:e.viewByFieldName)),Object(o.distinctUntilChanged)()),this.anomalyExplorerCommonStateService.getSelectedJobs$(),this.anomalyExplorerCommonStateService.getFilterSettings$(),this._selectedCells$]).subscribe((([e,t,a,i])=>{const{viewBySwimlaneFieldName:n,viewBySwimlaneOptions:r}=this._getViewBySwimlaneOptions(e,a.filterActive,a.filteredFields,!1,i,t);this._viewBySwimlaneFieldName$.next(n),this._viewBySwimLaneOptions$.next(r)}))}_initSwimLanePagination(){return Object(o.combineLatest)([this._swimLaneUrlState$.pipe(Object(o.map)((e=>{var t,a;return{viewByFromPage:null!==(t=null==e?void 0:e.viewByFromPage)&&void 0!==t?t:1,viewByPerPage:null!==(a=null==e?void 0:e.viewByPerPage)&&void 0!==a?a:10}})),Object(o.distinctUntilChanged)(c.isEqual)),this.anomalyExplorerCommonStateService.getInfluencerFilterQuery$(),this._timeBounds$]).subscribe((([e,t])=>{let a=e;t&&(a={viewByPerPage:e.viewByPerPage,viewByFromPage:1}),this._swimLanePagination$.next(a)}))}_initOverallSwimLaneData(){return Object(o.combineLatest)([this.anomalyExplorerCommonStateService.getSelectedJobs$(),this._swimLaneSeverity$,this.getSwimLaneBucketInterval$(),this._timeBounds$,this._refreshSubject$]).pipe(Object(o.tap)((()=>{this._isOverallSwimLaneLoading$.next(!0)})),Object(o.switchMap)((([e,t,a])=>Object(o.from)(this.anomalyTimelineService.loadOverallData(e,void 0,a,t))))).subscribe((e=>{this._overallSwimLaneData$.next(e),this._isOverallSwimLaneLoading$.next(!1)}))}_initTopFieldValues(){return Object(o.combineLatest)([this.anomalyExplorerCommonStateService.getSelectedJobs$(),this.anomalyExplorerCommonStateService.getInfluencerFilterQuery$(),this.getViewBySwimlaneFieldName$(),this.getSwimLanePagination$(),this.getSwimLaneCardinality$(),this.getSelectedCells$(),this.getSwimLaneBucketInterval$(),this._timeBounds$,this._refreshSubject$]).pipe(Object(o.switchMap)((([e,t,a,i,n,r,s])=>{if(null==r||!r.showTopFieldValues)return Object(o.of)([]);const l=Object(p.i)(r,a),c=Object(p.k)(r,this.timefilter.getBounds());return Object(o.from)(this.anomalyTimelineService.loadViewByTopFieldValuesForSelectedTime(c.earliestMs,c.latestMs,e,a,u.a,i.viewByPerPage,i.viewByFromPage,s,l,t))}))).subscribe(this._topFieldValues$)}_initViewBySwimLaneData(){return Object(o.combineLatest)([this._overallSwimLaneData$.pipe(Object(o.skipWhile)((e=>!e))),this.anomalyExplorerCommonStateService.getSelectedJobs$(),this.anomalyExplorerCommonStateService.getInfluencerFilterQuery$(),this._swimLaneSeverity$,this.getSwimLaneBucketInterval$(),this.getViewBySwimlaneFieldName$(),this.getSwimLanePagination$(),this._topFieldValues$.pipe(Object(o.distinctUntilChanged)(c.isEqual)),this._timeBounds$,this._refreshSubject$]).pipe(Object(o.tap)((()=>{this._isViewBySwimLaneLoading$.next(!0)})),Object(o.switchMap)((([e,t,a,i,n,r,s,l])=>Object(o.from)(this.anomalyTimelineService.loadViewBySwimlane(l,{earliest:e.earliest,latest:e.latest},t,r,u.a,s.viewByPerPage,s.viewByFromPage,void 0,a,n,i))))).subscribe((e=>{this._viewBySwimLaneData$.next(e),this._isViewBySwimLaneLoading$.next(!1),this._swimLaneCardinality$.next(null==e?void 0:e.cardinality)}))}_initSelectedCells(){return Object(o.combineLatest)([this._viewBySwimlaneFieldName$,this._swimLaneUrlState$,this.getSwimLaneBucketInterval$(),this._timeBounds$]).pipe(Object(o.map)((([e,t,a])=>{var i,n;if(null==t||!t.selectedType)return null;let r=null!==(i=t.selectedTimes)&&void 0!==i?i:t.selectedTime;"number"==typeof r&&(r=[r,r+a.asSeconds()]);let s=null!==(n=t.selectedLanes)&&void 0!==n?n:t.selectedLane;return"string"==typeof s&&(s=[s]),r=this._getAdjustedTimeSelection(r,this.timefilter.getBounds()),r?{type:t.selectedType,lanes:s,times:r,showTopFieldValues:t.showTopFieldValues,viewByFieldName:e}:null})),Object(o.distinctUntilChanged)(c.isEqual)).subscribe(this._selectedCells$)}_getAdjustedTimeSelection(e,t){const[a,i]=e,n=this.getSwimLaneBucketInterval().asSeconds(),r=t.min.unix()-n,s=t.max.unix()+n,l=Math.max(a,r),o=Math.min(i,s);if(!(r>o||s<l))return a===l&&i===o?e:l!==r||o!==s?[l,o]:void 0}_getViewBySwimlaneOptions(e,t,a,i,n,r){var s;const l=null!==(s=null==r?void 0:r.map((e=>e.id)))&&void 0!==s?s:[],o=Object(c.sortBy)(Object(c.uniq)(m.mlJobService.jobs.reduce(((e,t)=>l.some((e=>e===t.job_id))?e.concat(t.analysis_config.influencers||[]):e),[])),(e=>e.toLowerCase()));o.push(u.j);let d,p=o;if(-1!==p.indexOf(e))d=e;else if(l.length>1)d=u.j;else if(m.mlJobService.jobs.length>0&&l.length>0){var b;const e=m.mlJobService.jobs.find((e=>e.job_id===l[0])),t=null!==(b=null==e?void 0:e.analysis_config.influencers)&&void 0!==b?b:[];null==e||e.analysis_config.detectors.forEach((e=>void 0!==e.partition_field_name&&-1!==t.indexOf(e.partition_field_name)?(d=e.partition_field_name,!1):void 0!==e.over_field_name&&-1!==t.indexOf(e.over_field_name)?(d=e.over_field_name,!1):void 0!==e.by_field_name&&void 0===e.over_field_name&&-1!==t.indexOf(e.by_field_name)?(d=e.by_field_name,!1):void 0)),void 0===d&&(d=t.length>0?t[0]:p.length>0?p[0]:void 0)}if(!0!==t||!0!==i||n){if(!0===t&&Array.isArray(p)&&Array.isArray(a)){const e=p.filter((e=>a.includes(e)||e===u.j||n&&n.viewByFieldName===e));e.length>1&&(p=e,p.includes(d)||(d=p[0]))}}else p=[u.j];return{viewBySwimlaneFieldName:d,viewBySwimlaneOptions:p}}getOverallSwimLaneData$(){return this._overallSwimLaneData$.asObservable()}getViewBySwimLaneData$(){return this._viewBySwimLaneData$.asObservable()}getContainerWidth$(){return this._containerWidth$.pipe(Object(o.debounceTime)(500),Object(o.distinctUntilChanged)(((e,t)=>Math.abs(e-t)<20)))}getContainerWidth(){return this._containerWidth$.getValue()}getSelectedCells$(){return this._selectedCells$.asObservable()}getSelectedCells(){return this._selectedCells$.getValue()}getSwimLaneSeverity$(){return this._swimLaneSeverity$.asObservable()}getSwimLaneSeverity(){return this._swimLaneSeverity$.getValue()}getSwimLanePagination$(){return this._swimLanePagination$.asObservable()}getSwimLanePagination(){return this._swimLanePagination$.getValue()}setSwimLanePagination(e){const t=e;t.viewByPerPage&&(t.viewByFromPage=1),this._explorerURLStateCallback(t)}getSwimLaneCardinality$(){return this._swimLaneCardinality$.pipe(Object(o.distinctUntilChanged)())}getViewBySwimlaneFieldName$(){return this._viewBySwimlaneFieldName$.pipe(Object(o.distinctUntilChanged)())}getViewBySwimLaneOptions$(){return this._viewBySwimLaneOptions$.asObservable()}getSwimLaneJobs$(){return Object(o.combineLatest)([this.anomalyExplorerCommonStateService.getSelectedJobs$(),this.getViewBySwimlaneFieldName$(),this._viewBySwimLaneData$,this._selectedCells$]).pipe(Object(o.map)((([e,t,a,i])=>(null==i?void 0:i.type)===u.h.VIEW_BY&&(null==i?void 0:i.viewByFieldName)===u.j?e.filter((e=>i.lanes.includes(e.id))):(null==i?void 0:i.type)===u.h.OVERALL&&(null==i?void 0:i.viewByFieldName)===u.j&&a?e.filter((e=>a.laneLabels.includes(e.id))):e)))}getViewBySwimLaneOptions(){return this._viewBySwimLaneOptions$.getValue()}isOverallSwimLaneLoading$(){return this._isOverallSwimLaneLoading$.asObservable()}isViewBySwimLaneLoading$(){return this._isViewBySwimLaneLoading$.asObservable()}setContainerWidth(e){this._containerWidth$.next(e)}setSeverity(e){this._explorerURLStateCallback({severity:e,viewByFromPage:1})}setSelectedCells(e){const t={...this._swimLaneUrlState$.getValue()};if(void 0!==e){var a,i;e.showTopFieldValues=!1;const n=null===(a=this._selectedCells$.getValue())||void 0===a?void 0:a.type,r=null===(i=this._selectedCells$.getValue())||void 0===i?void 0:i.showTopFieldValues,s=null==e?void 0:e.type;(n===u.h.OVERALL&&s===u.h.VIEW_BY||s===u.h.OVERALL||!0===r)&&(e.showTopFieldValues=!0),t.selectedType=e.type,t.selectedLanes=e.lanes,t.selectedTimes=e.times,t.showTopFieldValues=e.showTopFieldValues,this._explorerURLStateCallback(t)}else delete t.selectedType,delete t.selectedLanes,delete t.selectedTimes,delete t.showTopFieldValues,this._explorerURLStateCallback(t,!0)}setViewBySwimLaneFieldName(e){this._explorerURLStateCallback({viewByFromPage:1,viewByPerPage:this._swimLanePagination$.getValue().viewByPerPage,viewByFieldName:e},!0)}getSwimLaneBucketInterval$(){return this._swimLaneBucketInterval$.pipe(Object(o.filter)((e=>!!e)),Object(o.distinctUntilChanged)(((e,t)=>e.asSeconds()===t.asSeconds())))}getSwimLaneBucketInterval(){return this._swimLaneBucketInterval$.getValue()}}class anomaly_explorer_common_state_AnomalyExplorerCommonStateService extends b.a{_getDefaultFilterSettings(){return{filterActive:!1,filteredFields:[],queryString:"",influencersFilterQuery:void 0}}constructor(e){super(),l()(this,"_selectedJobs$",new o.BehaviorSubject(void 0)),l()(this,"_filterSettings$",new o.BehaviorSubject(this._getDefaultFilterSettings())),l()(this,"_smvJobs$",this.getSelectedJobs$().pipe(Object(o.map)((e=>e.filter((e=>e.isSingleMetricViewerJob)))),Object(o.shareReplay)(1))),this.anomalyExplorerUrlStateService=e,this._init()}_initSubscriptions(){return this.anomalyExplorerUrlStateService.getPageUrlState$().pipe(Object(o.map)((e=>null==e?void 0:e.mlExplorerFilter)),Object(o.distinctUntilChanged)(c.isEqual)).subscribe((e=>{const t={...this._getDefaultFilterSettings(),...e};this._filterSettings$.next(t)}))}setSelectedJobs(e){this._selectedJobs$.next(e)}getSelectedJobs$(){return this._selectedJobs$.pipe(Object(o.filter)((e=>Array.isArray(e)&&e.length>0)),Object(o.distinctUntilChanged)(c.isEqual),Object(o.shareReplay)(1))}getSingleMetricJobs$(){return this._smvJobs$}getSelectedJobs(){return this._selectedJobs$.getValue()}getInfluencerFilterQuery$(){return this._filterSettings$.pipe(Object(o.map)((e=>null==e?void 0:e.influencersFilterQuery)),Object(o.distinctUntilChanged)(c.isEqual))}getFilterSettings$(){return this._filterSettings$.asObservable()}getFilterSettings(){return this._filterSettings$.getValue()}setFilterSettings(e){this.anomalyExplorerUrlStateService.updateUrlState({mlExplorerFilter:{influencersFilterQuery:e.filterQuery,filterActive:!0,filteredFields:e.filteredFields,queryString:e.queryString}})}clearFilterSettings(){this.anomalyExplorerUrlStateService.updateUrlState({mlExplorerFilter:{}})}}var f=a(10),h=a(80),g=a(284),x=a(68),j=a(1);class anomaly_charts_state_service_AnomalyChartsStateService extends b.a{constructor(e,t,a,i,n){super(),l()(this,"_isChartsDataLoading$",new o.BehaviorSubject(!1)),l()(this,"_chartsData$",new o.BehaviorSubject({chartsPerRow:1,errorMessages:void 0,seriesToPlot:[],tooManyBuckets:!1,timeFieldName:"timestamp"})),l()(this,"_showCharts$",new o.BehaviorSubject(!0)),this._anomalyExplorerCommonStateService=e,this._anomalyTimelineStateServices=t,this._anomalyExplorerChartsService=a,this._anomalyExplorerUrlStateService=i,this._tableSeverityState=n,this._init()}_initSubscriptions(){const e=new o.Subscription;return e.add(this._anomalyExplorerUrlStateService.getPageUrlState$().pipe(Object(o.map)((e=>{var t;return null===(t=null==e?void 0:e.mlShowCharts)||void 0===t||t})),Object(o.distinctUntilChanged)()).subscribe(this._showCharts$)),e.add(this.initChartDataSubscription()),e}initChartDataSubscription(){return Object(o.combineLatest)([this._anomalyExplorerCommonStateService.getSelectedJobs$(),this._anomalyExplorerCommonStateService.getInfluencerFilterQuery$(),this._anomalyTimelineStateServices.getContainerWidth$().pipe(Object(o.skipWhile)((e=>0===e))),this._anomalyTimelineStateServices.getSelectedCells$(),this._anomalyTimelineStateServices.getViewBySwimlaneFieldName$(),this._tableSeverityState.getPageUrlState$()]).pipe(Object(o.switchMap)((([e,t,a,i,n,r])=>{if(!i)return Object(o.of)({chartsPerRow:1,errorMessages:void 0,seriesToPlot:[],tooManyBuckets:!1,timeFieldName:"timestamp"});const s=Object(p.j)(i,e);this._isChartsDataLoading$.next(!0);const l=Object(p.i)(i,n);return this._anomalyExplorerChartsService.getAnomalyData$(s,a,1e3*(null==i?void 0:i.times[0]),1e3*(null==i?void 0:i.times[1]),t,l,r.val,6)}))).subscribe((e=>{this._chartsData$.next(e),this._isChartsDataLoading$.next(!1)}))}getChartsData$(){return this._chartsData$.asObservable()}getChartsData(){return this._chartsData$.getValue()}getShowCharts$(){return this._showCharts$.asObservable()}getShowCharts(){return this._showCharts$.getValue()}setShowCharts(e){this._anomalyExplorerUrlStateService.updateUrlState({mlShowCharts:e})}}var v=a(48),O=a(285),y=a(390),_=a(500),S=a(219),E=a(220);function w(){return{overallAnnotations:{error:void 0,annotationsData:[]},annotations:{error:void 0,annotationsData:[]},anomalyChartsDataLoading:!0,chartsData:{chartsPerRow:1,errorMessages:void 0,seriesToPlot:[],tooManyBuckets:!1,timeFieldName:"timestamp"},fieldFormatsLoading:!1,filterPlaceHolder:void 0,indexPattern:{title:E.a,fields:[]},influencers:{},isAndOperator:!1,loading:!0,maskAll:!1,noInfluencersConfigured:!0,queryString:"",selectedJobs:null,tableData:{anomalies:[],examplesByJobId:[""],interval:0,jobIds:[],showViewSeriesLink:!1},tableQueryString:""}}var A=a(5);const T=e=>{const{influencers:t,noInfluencersConfigured:a}=e;if(void 0!==t&&!a)for(const e in t)if(t[e][0]&&t[e][0].influencerFieldValue)return{filterPlaceHolder:A.i18n.translate("xpack.ml.explorer.kueryBar.filterPlaceholder",{defaultMessage:"Filter by influencer fields… ({queryExample})",values:{queryExample:`${e} : ${t[e][0].influencerFieldValue}`}})};return{}},C=new o.Subject,k=C.pipe(Object(o.flatMap)((e=>Object(o.isObservable)(e)?e:Object(o.from)([e]))),Object(o.distinctUntilChanged)(c.isEqual)).pipe(Object(o.scan)(((e,t)=>{const{type:a,payload:i}=t;let n;switch(a){case u.c.CLEAR_EXPLORER_DATA:n=w();break;case u.c.CLEAR_INFLUENCER_FILTER_SETTINGS:n=function(e){return{...e,isAndOperator:!1,maskAll:!1,queryString:"",tableQueryString:"",...Object(p.d)()}}(e);break;case u.c.CLEAR_JOBS:n={...e,...Object(p.d)(),loading:!1,selectedJobs:[]};break;case u.c.JOB_SELECTION_CHANGE:n=((e,t)=>{const{selectedJobs:a}=t,i={...e,noInfluencersConfigured:0===Object(p.g)(a).length,selectedJobs:a};if(!0===i.noInfluencersConfigured){const e={filterActive:!1,filteredFields:[],influencersFilterQuery:void 0,maskAll:!1,queryString:"",tableQueryString:""};Object.assign(i,e)}else i.indexPattern=Object(S.a)(a);return i.loading=!0,i})(e,i);break;case u.c.SET_CHARTS_DATA_LOADING:n={...e,anomalyChartsDataLoading:!0,chartsData:{chartsPerRow:1,errorMessages:void 0,seriesToPlot:[],tooManyBuckets:!1,timeFieldName:"timestamp"}};break;case u.c.SET_EXPLORER_DATA:n={...e,...i};break;default:n=e}return null===n.selectedJobs?n:{...n,...T(n)}}),w()),Object(o.shareReplay)(1));var M=a(6);const I=n.a.createContext(void 0);function L(){const e=Object(i.useContext)(I);if(void 0===e)throw new Error("AnomalyExplorerContext has not been initialized.");return e}const R=({children:e})=>{const[,,t]=function(){const[e]=Object(x.c)("mlExplorerSwimlane");return Object(x.c)(j.b.ANOMALY_EXPLORER,{mlExplorerSwimlane:e,mlExplorerFilter:{}})}(),a=Object(r.c)(),{services:{mlServices:{mlApiServices:n,mlFieldFormatService:s},uiSettings:l,data:o}}=Object(f.d)(),[,,c]=Object(O.a)(),d=Object(i.useMemo)((()=>Object(h.mlResultsServiceProvider)(n)),[]),[m,p]=Object(i.useState)(void 0);return Object(i.useEffect)((()=>{const e=(e=>({state$:k,clearExplorerData:()=>{C.next({type:u.c.CLEAR_EXPLORER_DATA})},clearInfluencerFilterSettings:()=>{C.next({type:u.c.CLEAR_INFLUENCER_FILTER_SETTINGS})},clearJobs:()=>{C.next({type:u.c.CLEAR_JOBS})},updateJobSelection:t=>{C.next(Object(_.a)(e,t))},setExplorerData:e=>{C.next((e=>({type:u.c.SET_EXPLORER_DATA,payload:e}))(e))},setChartsDataLoading:()=>{C.next({type:u.c.SET_CHARTS_DATA_LOADING})}}))(s),i=new g.AnomalyTimelineService(a,l,d),r=new anomaly_explorer_common_state_AnomalyExplorerCommonStateService(t),m=new anomaly_timeline_state_service_AnomalyTimelineStateService(t,r,i,a),b=new v.a(a,n,d),f=new anomaly_charts_state_service_AnomalyChartsStateService(r,m,b,t,c),h=new y.b(m,o,a);return p({anomalyExplorerChartsService:b,anomalyExplorerCommonStateService:r,anomalyTimelineService:i,anomalyTimelineStateService:m,chartsStateService:f,anomalyDetectionAlertsStateService:h,explorerService:e}),()=>{r.destroy(),m.destroy(),f.destroy(),h.destroy()}}),[]),void 0===m?null:Object(M.jsx)(I.Provider,{value:m},e)}},192:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2);t.default=function(e){i.useEffect(e,[])}},193:function(e,t,a){"use strict";var i=a(171);a.d(t,"a",(function(){return i.a}))},204:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"i",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return m}));var i=a(218);const n=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===i.b.OUTLIER_DETECTION},r=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===i.b.REGRESSION},s=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===i.b.CLASSIFICATION},l=e=>{let t="";return r(e)&&(t=e.regression.dependent_variable),s(e)&&(t=e.classification.dependent_variable),t},o=e=>{let t;return r(e)&&void 0!==e.regression.prediction_field_name?t=e.regression.prediction_field_name:s(e)&&void 0!==e.classification.prediction_field_name&&(t=e.classification.prediction_field_name),t},c=e=>`${l(e)}_prediction`,d=(e,t,a)=>`${e}.${o(t)||c(t)}`,u=e=>{const t=Object.keys(e||{});return 1===t.length?t[0]:"unknown"},m=e=>{let t;return r(e)&&(t=e.regression.training_percent),s(e)&&(t=e.classification.training_percent),t}},205:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var i=a(2),n=a(6);const r=Object(i.createContext)({showContextualInsights:!0,showNodeInfo:!0,showMLNavMenu:!0,showLicenseInfo:!0,isADEnabled:!0,isDFAEnabled:!0,isNLPEnabled:!0,showRuleFormV2:!0}),s=({children:e,isServerless:t,showMLNavMenu:a=!0,mlFeatures:i,experimentalFeatures:s})=>{var l;const o={showContextualInsights:t,showNodeInfo:!t,showMLNavMenu:a,showLicenseInfo:!t,isADEnabled:i.ad,isDFAEnabled:i.dfa,isNLPEnabled:i.nlp,showRuleFormV2:null!==(l=null==s?void 0:s.ruleFormV2)&&void 0!==l&&l};return Object(n.jsx)(r.Provider,{value:o},e)};function l(){const e=Object(i.useContext)(r);return Object(i.useMemo)((()=>e),[e])}},207:function(e,t,a){"use strict";a.d(t,"c",(function(){return g})),a.d(t,"d",(function(){return j})),a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return O}));var i=a(2),n=a(25),r=a(5),s=a(15),l=a(68),o=a(140),c=a(335),d=a(6);const u=r.i18n.translate("xpack.ml.controls.selectSeverity.warningLabel",{defaultMessage:"warning"}),m=r.i18n.translate("xpack.ml.controls.selectSeverity.minorLabel",{defaultMessage:"minor"}),p=r.i18n.translate("xpack.ml.controls.selectSeverity.majorLabel",{defaultMessage:"major"}),b=r.i18n.translate("xpack.ml.controls.selectSeverity.criticalLabel",{defaultMessage:"critical"}),f={[u]:o.a.LOW,[m]:o.a.MINOR,[p]:o.a.MAJOR,[b]:o.a.CRITICAL},h=[{val:o.a.LOW,display:u,color:Object(c.a)(o.a.LOW)},{val:o.a.MINOR,display:m,color:Object(c.a)(o.a.MINOR)},{val:o.a.MAJOR,display:p,color:Object(c.a)(o.a.MAJOR)},{val:o.a.CRITICAL,display:b,color:Object(c.a)(o.a.CRITICAL)}];function g(e){let t=h.find((t=>t.val===e));return void 0===t&&(t=h[0]),t}const x=h[0],j=()=>Object(l.c)("mlSelectSeverity",x),v=({classNames:e}={classNames:""})=>{const[t,a]=j();return Object(d.jsx)(O,{severity:t,onChange:a})},O=({classNames:e="",severity:t,onChange:a,compressed:l})=>{const o=Object(i.useMemo)((()=>h.map((({color:e,display:t,val:a})=>({value:t,inputDisplay:Object(d.jsx)(i.Fragment,null,Object(d.jsx)(n.EuiHealth,{color:e,style:{lineHeight:"inherit"}},t)),dropdownDisplay:Object(d.jsx)(i.Fragment,null,Object(d.jsx)(n.EuiHealth,{color:e,style:{lineHeight:"inherit"}},t),Object(d.jsx)(n.EuiSpacer,{size:"xs"}),Object(d.jsx)(n.EuiText,{size:"xs",color:"subdued"},Object(d.jsx)("p",null,Object(d.jsx)(s.FormattedMessage,{id:"xpack.ml.controls.selectSeverity.scoreDetailsDescription",defaultMessage:"score {value} and above",values:{value:a}}))))})))),[]);return Object(d.jsx)(n.EuiSuperSelect,{prepend:r.i18n.translate("xpack.ml.explorer.severityThresholdLabel",{defaultMessage:"Severity"}),"data-test-subj":"mlAnomalySeverityThresholdControls",className:e,hasDividers:!0,options:o,valueOfSelected:t.display,onChange:e=>{a(g(f[e]))},compressed:!0})}},215:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var i=a(131),n=a(100),r=a(204),s=a(218),l=a(518),o=a(414),c=a(282),d=a(11);class new_job_capabilities_service_analytics_NewJobCapsServiceAnalytics extends c.a{async initializeFromDataVIew(e){try{const t=function(e,t){const a=e[t],n=[],r={};return void 0!==a&&(a.fields.forEach((e=>{e.type===i.a.NESTED&&void 0===r[e.name]&&(r[e.name]=!0,n.push(e))})),Object.keys(r).length>0?a.fields.forEach((e=>{if(e.type!==i.a.NESTED){const t=e.name.split(".").shift();t&&void 0===r[t]&&n.push(e)}})):n.push(...a.fields)),n}(await d.ml.dataFrameAnalytics.newJobCapsAnalytics(e.getIndexPattern(),e.type===n.DataViewType.ROLLUP),e.getIndexPattern()),{fieldsPreferringKeyword:a}=Object(c.b)(t);this._fields=a,this.removeCounterFields()}catch(e){console.error("Unable to load analytics index fields",e)}}isKeywordAndTextType(e){var t;const a=null===(t=this.fields.find((t=>t.name===e)))||void 0===t?void 0:t.type;let n=!1;if(void 0!==a&&a===i.a.KEYWORD){const t=this.getFieldById(e.replace(/\.keyword$/,""));n=null!==t&&t.type===i.a.TEXT}else if(void 0!==a&&a===i.a.TEXT){const t=this.getFieldById(`${e}.keyword`);n=null!==t&&t.type===i.a.KEYWORD}return n}getDefaultFields(e,t){let a=[...this.fields];if(0===a.length)return{selectedFields:[],docFields:[]};const n=e.dest.results_field,c=[];let d,u;if(Object(r.h)(e.analysis)&&(a=e.analysis.outlier_detection.compute_feature_influence?a.filter((e=>!e.name.includes(`${n}.${s.f}.`))):a.filter((e=>!e.name.includes(`${n}.${s.f}`))),!0===t&&c.push({id:`${n}.${s.j}`,name:`${n}.${s.j}`,type:i.b.NUMBER})),Object(r.g)(e.analysis)||Object(r.i)(e.analysis)){var m;const o=Object(r.c)(e.analysis);d=null===(m=this.getFieldById(o))||void 0===m?void 0:m.type;const p=Object(r.e)(e.analysis),b=Object(l.a)(e.analysis),f=(e=>{let t;return Object(r.g)(e)&&void 0!==e.classification.num_top_classes&&(t=e.classification.num_top_classes),t})(e.analysis);u=`${n}.${p||`${o}_prediction`}`,a=0===(null!=b?b:0)?this.fields.filter((e=>!e.name.includes(`${n}.${s.e}`))):a.filter((e=>!e.name.includes(`${n}.${s.e}.`))),a=0===(null!=f?f:0)?a.filter((e=>!e.name.includes(`${n}.${s.k}`))):a.filter((e=>!e.name.includes(`${n}.${s.k}.`))),!0===t&&c.push({id:`${n}.is_training`,name:`${n}.is_training`,type:i.a.BOOLEAN},{id:u,name:u,type:d})}c.push(...a),c.sort((({name:t},{name:a})=>Object(o.f)(t,a,e)));let p=c.filter((e=>e.name===u||!e.name.includes(".keyword")));return p.length>o.b&&(p=p.slice(0,o.b)),{selectedFields:p,docFields:c,depVarType:d}}}const u=new new_job_capabilities_service_analytics_NewJobCapsServiceAnalytics},218:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"g",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"k",(function(){return c})),a.d(t,"j",(function(){return d})),a.d(t,"a",(function(){return u})),a.d(t,"i",(function(){return m})),a.d(t,"h",(function(){return p})),a.d(t,"m",(function(){return b})),a.d(t,"l",(function(){return f}));const i={OUTLIER_DETECTION:"outlier_detection",REGRESSION:"regression",CLASSIFICATION:"classification"},n={ANALYZING:"analyzing",FAILED:"failed",REINDEXING:"reindexing",STARTED:"started",STARTING:"starting",STOPPED:"stopped"},r="ml",s={ANALYTICS:"analytics",ANALYTICS_JOB_MISSING:"analytics-job-missing",TRANSFORM:"transform",INDEX:"index",TRAINED_MODEL:"trainedModel",INGEST_PIPELINE:"ingestPipeline"},l="feature_importance",o="feature_influence",c="top_classes",d="outlier_score";let u=function(e){return e.ALPHA="alpha",e.ETA="eta",e.ETA_GROWTH_RATE_PER_TREE="eta_growth_rate_per_tree",e.DOWNSAMPLE_FACTOR="downsample_factor",e.FEATURE_BAG_FRACTION="feature_bag_fraction",e.FEATURE_INFLUENCE_THRESHOLD="feature_influence_threshold",e.GAMMA="gamma",e.LAMBDA="lambda",e.MAX_TREES="max_trees",e.MAX_OPTIMIZATION_ROUNDS_PER_HYPERPARAMETER="max_optimization_rounds_per_hyperparameter",e.METHOD="method",e.N_NEIGHBORS="n_neighbors",e.NUM_TOP_CLASSES="num_top_classes",e.NUM_TOP_FEATURE_IMPORTANCE_VALUES="num_top_feature_importance_values",e.OUTLIER_FRACTION="outlier_fraction",e.RANDOMIZE_SEED="randomize_seed",e.SOFT_TREE_DEPTH_LIMIT="soft_tree_depth_limit",e.SOFT_TREE_DEPTH_TOLERANCE="soft_tree_depth_tolerance",e}({}),m=function(e){return e.LOF="lof",e.LDOF="ldof",e.DISTANCE_KTH_NN="distance_kth_nn",e.DISTANCE_KNN="distance_knn",e}({});const p=0,b=1,f=100},219:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(220),n=a(139);function r(e){return{title:i.a,fields:Object(n.g)(e).map((e=>({name:e,type:"string",aggregatable:!0,searchable:!0})))}}},220:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=".ml-anomalies-*"},223:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2);t.default=function(e,t){void 0===t&&(t=0);var a=i.useRef(!1),n=i.useRef(),r=i.useRef(e),s=i.useCallback((function(){return a.current}),[]),l=i.useCallback((function(){a.current=!1,n.current&&clearTimeout(n.current),n.current=setTimeout((function(){a.current=!0,r.current()}),t)}),[t]),o=i.useCallback((function(){a.current=null,n.current&&clearTimeout(n.current)}),[]);return i.useEffect((function(){r.current=e}),[e]),i.useEffect((function(){return l(),o}),[t]),[s,o,l]}},228:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var i=a(35),n=a(70),r=a(85),s=a(12),l=a(11),o=a(103),c=a(0);function d(e){if(void 0===e){const e=(e,t)=>{};return{click:e,count:e}}return{click:(t,a)=>e.reportUiCounter(c.g,o.METRIC_TYPE.CLICK,t,a),count:(t,a)=>e.reportUiCounter(c.g,o.METRIC_TYPE.COUNT,t,a)}}var u=a(77);function m(e,t,a){const o=new s.a(e),c=Object(l.mlApiServicesProvider)(o),m=Object(u.indexServiceFactory)(t);return{httpService:o,mlApiServices:c,mlFieldFormatService:Object(r.fieldFormatServiceFactory)(c,m),mlUsageCollection:d(a),mlCapabilities:new n.MlCapabilitiesService(c),mlLicense:new i.a}}},241:function(e,t,a){"use strict";a.d(t,"a",(function(){return w})),a.d(t,"c",(function(){return A})),a.d(t,"b",(function(){return I}));var i=a(2),n=a.n(i),r=a(25),s=a(8),l=a(76),o=a(39),c=a.n(o),d=a(5),u=a(108),m=a(6),p=a(140),b=a(175),f=a(529),h=a(415),g=a(54),x=a(15);const j=({cardinality:e,fromPage:t,perPage:a,onPaginationChange:n})=>{const s=t-1,[l,o]=Object(i.useState)(!1),c=()=>o(!1),u=Object(i.useCallback)((e=>{n({fromPage:e+1})}),[]),p=Object(i.useCallback)((e=>{n({perPage:e})}),[]),b=Math.ceil(e/a),f=[5,10,20,50,100].map((e=>Object(m.jsx)(r.EuiContextMenuItem,{key:`${e}_rows`,icon:e===a?"check":"empty",onClick:()=>{c(),p(e)},"data-test-subj":`${e} rows`},Object(m.jsx)(x.FormattedMessage,{id:"xpack.ml.explorer.swimLaneSelectRowsPerPage",defaultMessage:"{rowsCount} rows",values:{rowsCount:e}}))));return Object(m.jsx)(r.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(m.jsx)(r.EuiFlexItem,{grow:!1},Object(m.jsx)(r.EuiPopover,{button:Object(m.jsx)(r.EuiButtonEmpty,{size:"xs",color:"text",iconType:"arrowDown",iconSide:"right",onClick:()=>o((()=>!l)),"data-test-subj":"mlSwimLanePageSizeControl"},Object(m.jsx)("span",{"data-test-subj":a},Object(m.jsx)(x.FormattedMessage,{id:"xpack.ml.explorer.swimLaneRowsPerPage",defaultMessage:"Rows per page: {rowsCount}",values:{rowsCount:a}}))),isOpen:l,closePopover:c,panelPaddingSize:"none"},Object(m.jsx)(r.EuiContextMenuPanel,{items:f,"data-test-subj":"mlSwimLanePageSizePanel"}))),Object(m.jsx)(r.EuiFlexItem,{grow:!1},Object(m.jsx)(r.EuiPagination,{"aria-label":d.i18n.translate("xpack.ml.explorer.swimLanePagination",{defaultMessage:"Anomaly swim lane pagination"}),pageCount:b,activePage:s,onPageClick:u,"data-test-subj":"mlSwimLanePagination"})))};var v=a(132),O=a(135),y=a(286),_=(a(340),a(199)),S=a(49),E=a(10);const w=30;function A(e){return e&&e.hasOwnProperty("cardinality")}var T={name:"bjn8wh",styles:"position:relative"},C={name:"vxhryu",styles:"width:100%;height:100%;overflow:hidden"},k={name:"wo686d",styles:"width:100%;overflow-y:auto;overflow-x:hidden"},M={name:"xbymsc",styles:"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)"};const I=({id:e,onResize:t,perPage:a,fromPage:o,swimlaneLimit:x,onPaginationChange:A,isLoading:I,noDataWarning:L,filterActive:R,swimlaneData:D,swimlaneType:F,selection:N,onCellsSelection:B,timeBuckets:P,chartsService:$,showTimeline:V=!0,showYAxis:U=!0,showLegend:z=!0,"data-test-subj":J,yAxisWidth:G,onRenderComplete:W})=>{var Y,q,H;const[X,Q]=Object(i.useState)(0),{services:{theme:Z}}=Object(E.d)(),K=Object(g.b)(Z),{euiTheme:ee}=Object(E.a)(),te=Object(i.useRef)(),ae=Object(i.useCallback)(Object(s.throttle)((e=>{const a=e.width-S.a;Q(a),t(a)}),500),[X]),ie=Object(i.useMemo)((()=>{const e=!0===R&&F===v.h.OVERALL;if(null==D||!D.points)return[];const t=D.laneLabels;return D.points.map((t=>{const a={...t,time:1e3*t.time,value:0===t.value?null:t.value};return e&&(a.laneLabel=d.i18n.translate("xpack.ml.explorer.overallSwimlaneUnfilteredLabel",{defaultMessage:"{label} (unfiltered)",values:{label:Object(O.f)(t.laneLabel)}})),a})).sort(((e,a)=>{let i=t.indexOf(e.laneLabel),n=t.indexOf(a.laneLabel);return i=i>-1?i:t.length,n=n>-1?n:t.length,i-n}))}),[null==D?void 0:D.points,R,F,null==D?void 0:D.laneLabels]),ne=(null==D||null===(Y=D.laneLabels)||void 0===Y?void 0:Y.length)>0&&ie.length>0,re=(ne||I)&&void 0!==x&&x>(null!=a?a:5)&&A&&o&&a,se=null!==(q=null==D||null===(H=D.laneLabels)||void 0===H?void 0:H.length)&&void 0!==q?q:0,le=Object(i.useMemo)((()=>I?te.current:se*(w+2)+(z?34:0)+(V?24:0)),[I,se]);Object(i.useEffect)((()=>{I||(te.current=le)}),[I,le]);const oe=Object(i.useMemo)((()=>{if(N&&D&&(F===N.type&&(void 0===(null==D?void 0:D.fieldName)||D.fieldName===N.viewByFieldName)||!1!==R))return{x:N.times.map((e=>1e3*e)),y:N.lanes}}),[N,D,F]),ce=!!B,de=Object(i.useMemo)((()=>ne?{background:{color:ee.euiPanelBackgroundColorModifiers.plain},heatmap:{grid:{stroke:{width:1,color:ee.euiBorderColor}},cell:{maxWidth:"fill",maxHeight:"fill",label:{visible:!1},border:{stroke:ee.euiBorderColor,strokeWidth:0}},yAxisLabel:{visible:U,width:G,textColor:ee.euiTextSubduedColor,padding:S.b,fontSize:parseInt(ee.euiFontSizeXS,10)},xAxisLabel:{visible:V,textColor:ee.euiTextSubduedColor,fontSize:parseInt(ee.euiFontSizeXS,10)},brushMask:{visible:ce,fill:K?"rgb(30,31,35,80%)":"rgb(247,247,247,50%)"},brushArea:{visible:ce,stroke:K?"rgb(255, 255, 255)":"rgb(105, 112, 125)"},...z?{maxLegendHeight:34}:{}}}:{}),[ne,F,null==D?void 0:D.fieldName,K,P,B]),ue=Object(i.useRef)(null),me=Object(u.useActiveCursor)($.activeCursor,ue,{isDateHistogram:!0}),pe=Object(i.useCallback)((e=>{if(!B)return;const t=e[0][0],a=t.datum.x/1e3,i={lanes:[String(t.datum.y)],times:[a,a+D.interval],type:F,viewByFieldName:D.fieldName};B(i)}),[F,null==D?void 0:D.fieldName,null==D?void 0:D.interval,B]),be=Object(i.useMemo)((()=>{return{placement:"auto",fallbackPlacements:["left"],boundary:"chart",customTooltip:(e=null==D?void 0:D.fieldName,({values:t})=>{const a=[];if(1===t.length&&e){const[i]=t;a.push({skipHeader:!0}),a.push({label:e,value:i.value,seriesIdentifier:{key:i.value}})}else if(3===t.length){const[i,n,r]=t,s=Object(h.b)(parseInt(i.value,10));a.push({label:s}),void 0!==e&&a.push({label:e,value:n.value,seriesIdentifier:{key:n.value}}),a.push({label:d.i18n.translate("xpack.ml.explorer.swimlane.maxAnomalyScoreLabel",{defaultMessage:"Max anomaly score"}),value:"0"===r.formattedValue?" < 1":r.formattedValue,color:r.color,seriesIdentifier:{key:r.value}})}return Object(m.jsx)(y.a,{tooltipData:a})})};var e}),[null==D?void 0:D.fieldName]),fe=Object(i.useMemo)((()=>D?{min:1e3*D.earliest,max:1e3*D.latest,minInterval:1e3*D.interval}:void 0),[D]),he=e=>{e.cells.length&&ce&&"function"==typeof B&&B({lanes:e.y,times:e.x.map((e=>e/1e3)),type:F,viewByFieldName:D.fieldName})},ge=!I&&!ne&&!!L;return ge&&(null==W||W()),Object(m.jsx)(r.EuiResizeObserver,{onResize:ae},(t=>{var i,s;return Object(m.jsx)(r.EuiFlexGroup,{gutterSize:"none",direction:"column",ref:t,"data-test-subj":J,css:C},Object(m.jsx)(r.EuiFlexItem,{css:k,grow:!1},Object(m.jsx)(n.a.Fragment,null,Object(m.jsx)("div",null,Object(m.jsx)("div",{style:{height:`${le}px`},css:T,hidden:ge},ne&&!I&&Object(m.jsx)(l.Chart,{className:"mlSwimLaneContainer",ref:ue},Object(m.jsx)(l.Tooltip,be),Object(m.jsx)(l.Settings,{theme:de,baseTheme:l.LEGACY_LIGHT_THEME,onElementClick:pe,onPointerUpdate:me,showLegend:z,legendPosition:l.Position.Top,xDomain:fe,debugState:null!==(i=window._echDebugStateFlag)&&void 0!==i&&i,onBrushEnd:he,locale:d.i18n.getLocale(),onRenderChange:e=>{e&&W&&W()}}),Object(m.jsx)(l.Heatmap,{id:e,timeZone:"UTC",colorScale:{type:"bands",bands:[{start:p.a.LOW,end:p.a.WARNING,color:b.a.LOW},{start:p.a.WARNING,end:p.a.MINOR,color:b.a.WARNING},{start:p.a.MINOR,end:p.a.MAJOR,color:b.a.MINOR},{start:p.a.MAJOR,end:p.a.CRITICAL,color:b.a.MAJOR},{start:p.a.CRITICAL,end:1/0,color:b.a.CRITICAL}]},data:ie,xAccessor:"time",yAccessor:"laneLabel",valueAccessor:"value",highlightedData:oe,valueFormatter:f.a,xScale:{type:l.ScaleType.Time,interval:{type:"fixed",unit:"ms",value:null!==(s=null==fe?void 0:fe.minInterval)&&void 0!==s?s:6e4}},ySortPredicate:"dataIndex",yAxisLabelFormatter:e=>""===e?_.a:String(e),xAxisLabelFormatter:e=>{P.setInterval(`${D.interval}s`);const t=P.getScaledDateFormat();return c()(e).format(t)}})),I&&Object(m.jsx)(r.EuiText,{textAlign:"center",css:M},Object(m.jsx)(r.EuiLoadingChart,{size:"xl",mono:!0,"data-test-subj":"mlSwimLaneLoadingIndicator"}))),ge?Object(m.jsx)(n.a.Fragment,null,L):null))),re&&Object(m.jsx)(r.EuiFlexItem,{grow:!1},Object(m.jsx)(j,{cardinality:x,fromPage:o,perPage:a,onPaginationChange:A})))}))}},249:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(58).__importDefault(a(192));t.default=function(e){i.default((function(){e()}))}},250:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return o}));const i=3e4,n=1e3,r=2e3,s=12e4,l=6e4,o=1e3},251:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(2);const n=[10,25,50];function r(e,t,a){const{pageIndex:r,pageSize:s,sortField:l,sortDirection:o}=t;return{onTableChange:Object(i.useCallback)((({page:e,sort:i})=>{var n,r,s;let l=null==i?void 0:i.field;"string"!=typeof l&&(l=t.sortField);const o={pageIndex:null!==(n=null==e?void 0:e.index)&&void 0!==n?n:t.pageIndex,pageSize:null!==(r=null==e?void 0:e.size)&&void 0!==r?r:t.pageSize,sortField:l,sortDirection:null!==(s=null==i?void 0:i.direction)&&void 0!==s?s:t.sortDirection};a(o)}),[t,a]),pagination:Object(i.useMemo)((()=>({pageIndex:r,pageSize:s,totalItemCount:e,pageSizeOptions:n})),[e,r,s]),sorting:Object(i.useMemo)((()=>({sort:{field:l,direction:o}})),[l,o])}}},254:function(e,t,a){"use strict";a.d(t,"c",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return g}));var i=a(8),n=a(2),r=a.n(n),s=a(67),l=a(118),o=a(29),c=a(335),d=a(529),u=a(25),m=a(13),p=a(45),b=a(6);const f=({columnId:e,data:t,fieldFormats:a})=>{const n=h(a);if(!Object(s.a)(t))return;const r=(({data:e,fieldName:t})=>{const a=e.find((e=>e.field===t));if(null!=a&&null!=a.value)return a.value})({data:t,fieldName:e}),l=(e=>{const t=Array.isArray(e)?e.join():e;return Object(i.isEmpty)(t)?"—":"object"==typeof t?JSON.stringify(t):t})(r);return n(e,l)};function h(e){const t=Object(p.a)(e);return(e,a)=>{if(!Object(s.a)(a))return Object(b.jsx)(r.a.Fragment,null,"—");switch(e){case l.h:case l.b:case m.c:return Object(b.jsx)(r.a.Fragment,null,t(o.FIELD_FORMAT_IDS.DATE)(a));case l.a:return Object(b.jsx)(r.a.Fragment,null,t(o.FIELD_FORMAT_IDS.DURATION,{inputFormat:"microseconds",outputFormat:"humanizePrecise"})(a));case m.b:let e;return e="number"==typeof a?a:a.split(",").map(Number).at(-1),Object(b.jsx)(u.EuiHealth,{textSize:"xs",color:Object(c.a)(e)},Object(d.a)(e));default:return Object(b.jsx)(r.a.Fragment,null,a)}}}function g(e){const t=h(e);return(e,a)=>({title:m.i[e],description:t(e,a)})}},255:function(e,t,a){"use strict";var i=a(256);a.d(t,"a",(function(){return i.a}));var n=a(336);a.d(t,"b",(function(){return n.a}))},256:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var i=a(6),n=a(25),r=(a(2),a(336)),s=a(10);const l=({isOpen:e,onToggle:t,children:a,header:l,headerItems:o})=>{const{euiTheme:c}=Object(s.a)();return Object(i.jsx)(n.EuiSplitPanel.Outer,{grow:!0,hasShadow:!1,css:Object(i.css)({border:`${c.euiBorderWidthThin} solid ${e?c.euiBorderColor:"transparent"}`},"","")},Object(i.jsx)(n.EuiSplitPanel.Inner,{color:e?"plain":"subdued"},Object(i.jsx)(n.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(i.jsx)(n.EuiFlexItem,{grow:!1},Object(i.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(i.jsx)(n.EuiFlexItem,{grow:!1},Object(i.jsx)(n.EuiButtonIcon,{color:"text",iconType:e?"arrowDown":"arrowRight",onClick:()=>{t(!e)}})),Object(i.jsx)(n.EuiFlexItem,{grow:!1},Object(i.jsx)(n.EuiTitle,{size:"xxs"},Object(i.jsx)("h2",null,l))))),o?Object(i.jsx)(n.EuiFlexItem,{grow:!1},Object(i.jsx)(r.a,{headerItems:o})):null)),e?Object(i.jsx)(n.EuiSplitPanel.Inner,{css:Object(i.css)({borderTop:`${c.euiBorderWidthThin} solid ${c.euiBorderColor}`},"",""),grow:!1},a):null)},o=({inputStats:e,dataTestSub:t})=>Object(i.jsx)(n.EuiFlexGroup,{"data-test-subj":t,alignItems:"center",gutterSize:"m"},e.map((({value:e,label:t,"data-test-subj":a})=>Object(i.jsx)(n.EuiFlexItem,{grow:!1,key:t},Object(i.jsx)(n.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(i.jsx)(n.EuiFlexItem,{grow:!1},Object(i.jsx)(n.EuiText,{size:"s"},t,":")),Object(i.jsx)(n.EuiFlexItem,{grow:!1},Object(i.jsx)(n.EuiBadge,{"data-test-subj":a},e)))))))},257:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return u}));var i=a(2),n=a.n(i),r=a(26),s=a.n(r),l=a(6);const o=n.a.createContext(null),c=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:i}=t;return Object(l.jsx)(o.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)},d=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:i}=t.application,n=s()(i,void 0);return Object(l.jsx)(o.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)};function u(){const e=Object(i.useContext)(o);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}},272:function(e,t,a){"use strict";a.r(t),a.d(t,"VisualizationExtractor",(function(){return visualization_extractor_VisualizationExtractor})),a.d(t,"resolver",(function(){return A})),a.d(t,"QuickLensJobCreator",(function(){return quick_create_job_QuickLensJobCreator})),a.d(t,"getJobsItemsFromEmbeddable",(function(){return f})),a.d(t,"isCompatibleVisualizationType",(function(){return g})),a.d(t,"redirectToADJobWizards",(function(){return b})),a.d(t,"getChartInfoFromVisualization",(function(){return v}));var i=a(91),n=a(5),r=a(125),s=a(136),l=a(131),o=a(830),c=a(1);const d=["line","bar","bar_stacked","bar_percentage_stacked","bar_horizontal","bar_horizontal_stacked","area","area_stacked","area_percentage_stacked"],u=i.layerTypes.DATA,m="lnsXY",p=[l.b.STRING,l.b.IP];async function b(e,t,a,i){const{query:n,filters:r,to:s,from:l,vis:o}=await f(e,i),d=a.url.locators.get(c.a),u=await(null==d?void 0:d.getUrl({page:c.b.ANOMALY_DETECTION_CREATE_JOB_FROM_LENS,pageState:{vis:o,from:l,to:s,query:n,filters:r,layerIndex:t}}));window.open(u,"_blank")}async function f(e,t){var a,i,r,l,o,c,d;if(!t)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.lensNotFound",{defaultMessage:"Lens is not intialized"}));const u=Object(s.e)(e.parentApi,"dashboard")?e.parentApi:void 0,m=null!==(a=null===(i=e.timeRange$)||void 0===i?void 0:i.value)&&void 0!==a?a:null==u||null===(r=u.timeRange$)||void 0===r?void 0:r.value;if(void 0===m)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.noTimeRange",{defaultMessage:"Time range not specified."}));const p=e.getSavedVis();if(void 0===p)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.visNotFound",{defaultMessage:"Visualization cannot be found."}));return{vis:p,chartInfo:await v(t,p),from:m.from,to:m.to,query:null!==(l=null==u||null===(o=u.query$)||void 0===o?void 0:o.value)&&void 0!==l?l:{query:"",language:"kuery"},filters:null!==(c=null==u||null===(d=u.filters$)||void 0===d?void 0:d.value)&&void 0!==c?c:[],dashboard:u}}function h(e){const t=function(e){switch(e){case"average":return o.b.MEAN;case"count":return o.b.COUNT;case"max":return o.b.MAX;case"median":return o.b.MEDIAN;case"min":return o.b.MIN;case"sum":return o.b.SUM;case"unique_count":return o.b.DISTINCT_COUNT;default:return null}}(e);if(null===t)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.incorrectFunction",{defaultMessage:"Selected function {operationType} is not supported by anomaly detection detectors",values:{operationType:e}}));return t}async function g(e){return e.visualizationType===m&&void 0===e.query.esql&&e.layers.some((e=>e.layerType===i.layerTypes.DATA&&void 0!==e.dataView))}function x(e){return e.layerType===u&&e.chartType&&d.includes(e.chartType)}function j(e,t){return e.map((({operation:e})=>{var a,i;const n=h(e.type);return{function:n,..."count"===n?{}:{field_name:null===(a=e.fields)||void 0===a?void 0:a[0]},...t?{partition_field_name:null===(i=t.operation.fields)||void 0===i?void 0:i[0]}:{}}}))}async function v(e,t){const a=await(await(await e.stateHelperApi()).chartInfo).getChartInfo(t);if(!a)throw new Error("Cannot create job, chart info is undefined");return a}class visualization_extractor_VisualizationExtractor{constructor(){}async getResultLayersFromEmbeddable(e,t){const{chartInfo:a}=await f(e,t);return this.getLayers(a,t)}async extractFields(e){var t;if(!x(e))throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.incompatibleLayerType",{defaultMessage:"Layer is incompatible. Only chart layers can be used."}));const a=e.dimensions.find((e=>{var t;return"date"===(null===(t=e.operation)||void 0===t?void 0:t.dataType)}));if(void 0===a||null===(t=a.operation.fields)||void 0===t||!t.length)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.noDateField",{defaultMessage:"Cannot find a date field."}));const i=e.dimensions.filter((e=>"metric"===e.role));!function(e){if(e.forEach((e=>"date"!==e.operation.dataType&&h(e.operation.type))),e.some((e=>{var t;return!(null!==(t=e.operation.fields)&&void 0!==t&&t.length)})))throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.colsNoSourceField",{defaultMessage:"Some columns do not contain a source field."}));if(e.some((e=>function(e){return e.operation.hasTimeShift||e.operation.filter}(e))))throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.colsUsingFilterTimeSift",{defaultMessage:"Columns contain settings which are incompatible with ML detectors, time shift and filter by are not supported."}))}(i);const r=e.dimensions.find((e=>"split"===e.role&&"breakdown"===e.dimensionType));if(r&&"terms"===r.operation.type&&r.operation.fields&&r.operation.fields.length>1)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.splitFieldHasMultipleFields",{defaultMessage:"Selected split field contains more than one field."}));if(r&&(s=r,!p.includes(s.operation.dataType)))throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.splitFieldMustBeString",{defaultMessage:"Selected split field type must be string."}));var s;if(!e.dataView)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.noDataViews",{defaultMessage:"No data views can be found in the visualization."}));if(a.operation.fields[0]!==e.dataView.timeFieldName)throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.timeFieldNotInDataView",{defaultMessage:"Selected time field must be the default time field configured for data view."}));return{fields:i,timeField:a,splitField:r,dataView:e.dataView}}async getLayers(e,t){const a=await async function(e){const t=await e.getXyVisTypes();return e=>{var a;switch(e.layerType){case i.layerTypes.DATA:const r=t.find((t=>t.id===e.chartType));return{label:(null==r?void 0:r.fullLabel)||(null==r?void 0:r.label)||e.layerType,icon:null!==(a=null==r?void 0:r.icon)&&void 0!==a?a:""};case i.layerTypes.ANNOTATIONS:return{label:n.i18n.translate("xpack.ml.newJob.fromLens.createJob.VisType.annotations",{defaultMessage:"Annotations"}),icon:""};case i.layerTypes.REFERENCELINE:return{label:n.i18n.translate("xpack.ml.newJob.fromLens.createJob.VisType.referenceLine",{defaultMessage:"Reference line"}),icon:""};default:return{label:e.layerType,icon:""}}}}(t);return await Promise.all(e.layers.filter((({layerType:e})=>e===i.layerTypes.DATA)).map((async e=>{const{icon:t,label:i}=a(e);try{const{fields:a,splitField:n}=await this.extractFields(e),s=j(a,n),l=n||s.length>1?r.f.MULTI_METRIC:r.f.SINGLE_METRIC;return{id:e.layerId,layerType:e.layerType,label:i,icon:t,jobType:l,isCompatible:!0}}catch(a){return{id:e.layerId,layerType:e.layerType,label:i,icon:t,jobType:null,isCompatible:!1,error:a}}})))}}var O=a(31),y=a.n(O),_=a(154),S=a(133),E=a(193);class quick_create_job_QuickLensJobCreator extends E.a{constructor(e,t,a,i,n,r){super(t,a,i,n,r),this.lens=e}async createAndSaveJob(e,t,a,i,n,s){const{query:l,filters:o,to:c,from:d,dashboard:u,chartInfo:m}=await f(a,this.lens);if(void 0===l||void 0===o)throw new Error("Cannot create job, query and filters are undefined");const{jobConfig:p,datafeedConfig:b,start:h,end:g,jobType:x}=await this.createJob(m,d,c,l,o,t,s),j=x===r.f.SINGLE_METRIC?r.a.SINGLE_METRIC_FROM_LENS:r.a.MULTI_METRIC_FROM_LENS;return await this.putJobAndDataFeed({jobId:e,datafeedConfig:b,jobConfig:p,createdByLabel:j,dashboard:u,start:h,end:g,startJob:i,runInRealTime:n})}async createAndStashADJob(e,t,a,i,n,s){const l=await v(this.lens,e);try{const{jobConfig:e,datafeedConfig:o,jobType:c,start:d,end:u,includeTimeRange:m}=await this.createJob(l,t,a,i,n,r.b,s);Object(S.n)({jobConfig:e,datafeedConfig:o,createdBy:c===r.f.SINGLE_METRIC?r.a.SINGLE_METRIC:r.a.MULTI_METRIC,start:d,end:u},!0,m,!m)}catch(e){console.error(e)}}async createJob(e,t,a,i,r,s,l){const{jobConfig:o,datafeedConfig:c,jobType:d}=await this.createADJobFromLensSavedObject(e,i,r,s,l);let u,m,p=!0;try{const{min:e,max:i}=this.timeFilter.calculateBounds({to:a,from:t});if(u=null==e?void 0:e.valueOf(),m=null==i?void 0:i.valueOf(),void 0===u||void 0===m||isNaN(u)||isNaN(m))throw Error(n.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.timeRange",{defaultMessage:"Incompatible time range"}))}catch(e){console.error(e),p=!1,u=void 0,m=void 0}return{jobConfig:o,datafeedConfig:c,jobType:d,start:u,end:m,includeTimeRange:p}}async createADJobFromLensSavedObject(e,t,a,i,n){var s;const l=e.layers.filter(x),o=void 0!==n?e.layers[n]:l[0],c=new visualization_extractor_VisualizationExtractor,{fields:d,timeField:u,splitField:m,dataView:p}=await c.extractFields(o),b=Object(_.c)(),f=Object(_.b)(p.getIndexPattern()),h=this.combineQueriesAndFilters({query:t,filters:a},{query:e.query,filters:e.filters},p);f.query=h,b.analysis_config.detectors=j(d,m),b.data_description.time_field=null===(s=u.operation.fields)||void 0===s?void 0:s[0],b.analysis_config.bucket_span=i,m&&m.operation.fields&&(b.analysis_config.influencers=[m.operation.fields[0]]);const g=!m&&1===b.analysis_config.detectors.length,v=g?r.f.SINGLE_METRIC:r.f.MULTI_METRIC;return g&&(b.model_plot_config={enabled:!0,annotations_enabled:!0}),{jobConfig:b,datafeedConfig:f,jobType:v}}}var w=a(147);async function A(e,t,a,i,n,r,s){const{dataViews:l,lens:o,mlApiServices:c,timeFilter:d,kibanaConfig:u,dashboardService:m}=e;if(void 0===t)throw new Error("Cannot create visualization");const p=y.a.decode(t);if(!p)throw new Error("Cannot create visualization");const b=Object(w.e)(n,Object(w.d)()),f=Object(w.e)(r,[]),h=Object(w.e)(a,""),g=Object(w.e)(i,""),x=Object(w.e)(s,void 0),j=new quick_create_job_QuickLensJobCreator(o,l,u,d,m,c);await j.createAndStashADJob(p,h,g,b,f,x)}},273:function(e,t,a){"use strict";a.r(t),a.d(t,"resolver",(function(){return b})),a.d(t,"QuickGeoJobCreator",(function(){return quick_create_job_QuickGeoJobCreator})),a.d(t,"getJobsItemsFromEmbeddable",(function(){return u})),a.d(t,"isCompatibleMapVisualization",(function(){return d})),a.d(t,"redirectToGeoJobWizard",(function(){return c})),a.d(t,"VisualizationExtractor",(function(){return visualization_extractor_VisualizationExtractor}));var i=a(5),n=a(125),r=a(154),s=a(133),l=a(136),o=a(1);async function c(e,t,a,i,n,r){var s,l,c;const{query:d,filters:m,to:p,from:b}=await u(e),f=null===(s=e.query$)||void 0===s?void 0:s.value,h=null!==(l=null===(c=e.filters$)||void 0===c?void 0:c.value)&&void 0!==l?l:[],g=r.url.locators.get(o.a),x={dashboard:{query:d,filters:m},dataViewId:t,embeddable:{query:f,filters:h},geoField:a,splitField:n,from:b,to:p,...i?{layer:{query:i}}:{}},j=await(null==g?void 0:g.getUrl({page:o.b.ANOMALY_DETECTION_CREATE_JOB_FROM_MAP,pageState:x}));window.open(j,"_blank")}function d(e){return e.getLayerList().some((e=>e.getGeoFieldNames().length&&e.getIndexPatternIds().length))}async function u(e){var t,a,n,r,s,o,c;const d=Object(l.e)(e.parentApi,"dashboard")?e.parentApi:void 0,u=null!==(t=null===(a=e.timeRange$)||void 0===a?void 0:a.value)&&void 0!==t?t:null==d||null===(n=d.timeRange$)||void 0===n?void 0:n.value;if(void 0===u)throw Error(i.i18n.translate("xpack.ml.newJob.fromGeo.createJob.error.noTimeRange",{defaultMessage:"Time range not specified."}));return{from:u.from,to:u.to,query:null!==(r=null==d||null===(s=d.query$)||void 0===s?void 0:s.value)&&void 0!==r?r:{query:"",language:"kuery"},filters:null!==(o=null==d||null===(c=d.filters$)||void 0===c?void 0:c.value)&&void 0!==o?o:[],dashboard:d}}var m=a(193),p=a(147);class quick_create_job_QuickGeoJobCreator extends m.a{constructor(e,t,a,i,n){super(e,t,a,i,n)}async createAndSaveGeoJob({jobId:e,bucketSpan:t,embeddable:a,startJob:i,runInRealTime:r,dataViewId:s,sourceDataView:l,geoField:o,splitField:c,layerLevelQuery:d}){var m,b,f,h;const{query:g,filters:x,to:j,from:v,dashboard:O}=await u(a),y=null!==(m=null===(b=a.query$)||void 0===b?void 0:b.value)&&void 0!==m?m:Object(p.d)(),_=null!==(f=null===(h=a.filters$)||void 0===h?void 0:h.value)&&void 0!==f?f:[];if(void 0===g||void 0===x)throw new Error("Cannot create job, query and filters are undefined");const{jobConfig:S,datafeedConfig:E,start:w,end:A}=await this.createGeoJob({dataViewId:s,sourceDataView:l,from:v,to:j,query:g,filters:x,embeddableQuery:y,embeddableFilters:_,layerLevelQuery:d,geoField:o,splitField:c,bucketSpan:t});return await this.putJobAndDataFeed({jobId:e,datafeedConfig:E,jobConfig:S,createdByLabel:n.a.GEO_FROM_LENS,dashboard:O,start:w,end:A,startJob:i,runInRealTime:r})}async createAndStashGeoJob(e,t,a,i,r,l,o,c,d=null,u){try{const{jobConfig:m,datafeedConfig:p,start:b,end:f,includeTimeRange:h}=await this.createGeoJob({dataViewId:e,from:t,to:a,query:i,filters:r,embeddableQuery:l,embeddableFilters:o,geoField:c,splitField:d,layerLevelQuery:u});Object(s.n)({jobConfig:m,datafeedConfig:p,createdBy:n.a.GEO,start:b,end:f},!0,h,!h)}catch(e){console.error(e)}}async createGeoJob({dataViewId:e,sourceDataView:t,from:a,to:n,query:r,filters:s,embeddableQuery:l,embeddableFilters:o,layerLevelQuery:c,geoField:d,splitField:u,bucketSpan:m}){const{jobConfig:p,datafeedConfig:b,jobType:f}=await this.createGeoJobFromMapEmbeddable({sourceDataView:t,dataViewId:e,dashboard:{query:r,filters:s},embeddable:{query:l,filters:o},layerLevelQuery:c,geoField:d,splitField:u,...m?{bucketSpan:m}:{}});let h,g,x=!0;try{const{min:e,max:t}=this.timeFilter.calculateBounds({to:n,from:a});if(h=null==e?void 0:e.valueOf(),g=null==t?void 0:t.valueOf(),void 0===h||void 0===g||isNaN(h)||isNaN(g))throw Error(i.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.timeRange",{defaultMessage:"Incompatible time range"}))}catch(e){console.error(e),x=!1,h=void 0,g=void 0}return{jobConfig:p,datafeedConfig:b,jobType:f,start:h,end:g,includeTimeRange:x}}async createGeoJobFromMapEmbeddable({sourceDataView:e,dataViewId:t,dashboard:a,embeddable:i,layerLevelQuery:s,bucketSpan:l,geoField:o,splitField:c}){const d=e||await this.dataViews.get(t,!0),u=Object(r.c)(),m=Object(r.b)(d.getIndexPattern()),p=this.combineQueriesAndFilters(a,i,d,s?{query:s,filters:[]}:void 0);return m.query=p,u.analysis_config.detectors=[{function:"lat_long",field_name:o,...c?{partition_field_name:c}:{}}],u.data_description.time_field=d.timeFieldName,u.analysis_config.bucket_span=null!=l?l:n.b,c&&(u.analysis_config.influencers=[c]),{jobConfig:u,datafeedConfig:m,jobType:n.f.GEO}}}async function b(e,t,a,i,n,r,s,l,o){const{dataViews:c,kibanaConfig:d,timeFilter:u,dashboardService:m,mlApiServices:b}=e,f={query:Object(p.d)(),filters:[]},h=Object(p.e)(t,f),g=Object(p.e)(i,f),x=void 0!==o?Object(p.e)(o,f):f,j=Object(p.e)(n,""),v=Object(p.e)(r,null),O=Object(p.e)(a,""),y=Object(p.e)(s,""),_=Object(p.e)(l,""),S=new quick_create_job_QuickGeoJobCreator(c,d,u,m,b);await S.createAndStashGeoJob(O,y,_,h.query,h.filters,g.query,g.filters,j,v,null==x?void 0:x.query)}var f=a(102),h=a(159);class visualization_extractor_VisualizationExtractor{constructor(){}async getResultLayersFromEmbeddable(e){var t,a;const i=[],n=null!==(t=null===(a=e.dataViews)||void 0===a?void 0:a.value)&&void 0!==t?t:[],r={};return await Object(f.asyncForEach)(e.getLayerList(),(async e=>{const t=e.getGeoFieldNames().length?e.getGeoFieldNames()[0]:void 0,a=e.getIndexPatternIds().length?e.getIndexPatternIds()[0]:void 0,s=await e.getDisplayName(),l=e.getId(),o=e.getQuery();if(t&&a&&void 0===r[t]){r[t]=!0;const e=n.find((e=>e.id===a));i.push({layerId:l,layerDisplayName:s,geoField:t,dataViewId:a,dataView:e,query:o,...e?{splitFieldOptions:await this.getSplitFieldOptions(e)}:{splitFieldOptions:[]}})}})),i}async getSplitFieldOptions(e){var t;return(null!==(t=e.fields.getAll().sort(((e,t)=>e.name.localeCompare(t.name))))&&void 0!==t?t:[]).filter((e=>h.a.some((t=>{var a;return null===(a=e.esTypes)||void 0===a?void 0:a.includes(t)})))).map((e=>({label:e.name,field:e.name})))}}},281:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var i=a(2),n=a(6);const r=Object(i.createContext)(void 0),s=()=>{const e=Object(i.useContext)(r);if(void 0===e)throw new Error("datePickerContext was used outside of its Provider");return e},l=e=>{const{children:t,...a}=e;return Object(n.jsx)(r.Provider,{value:a},t)}},283:function(e,t,a){"use strict";a.d(t,"a",(function(){return StateService}));var i=a(4),n=a.n(i),r=a(7);class StateService{constructor(){n()(this,"subscriptions$",new r.Subscription)}_init(){this.subscriptions$=this._initSubscriptions()}destroy(){this.subscriptions$.unsubscribe()}}},284:function(e,t,a){"use strict";a.r(t),a.d(t,"AnomalyTimelineService",(function(){return AnomalyTimelineService}));var i=a(4),n=a.n(i),r=a(82),s=a(37),l=a(318),o=a(132);class AnomalyTimelineService{constructor(e,t,a){n()(this,"timeBuckets",void 0),n()(this,"_customTimeRange",void 0),this.timeFilter=e,this.mlResultsService=a,this.timeBuckets=new l.a({"histogram:maxBars":t.get(r.UI_SETTINGS.HISTOGRAM_MAX_BARS),"histogram:barTarget":t.get(r.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:t.get("dateFormat"),"dateFormat:scaled":t.get("dateFormat:scaled")}),this.timeFilter.enableTimeRangeSelector()}static isSwimlaneData(e){return Object(s.a)(e,["interval","points","laneLabels"])}static isOverallSwimlaneData(e){return this.isSwimlaneData(e)&&Object(s.a)(e,["earliest","latest"])&&1===e.laneLabels.length&&e.laneLabels[0]===o.g}setTimeRange(e){this._customTimeRange=e}getSwimlaneBucketInterval(e,t){const a=this.getTimeBounds();if(void 0===a)throw new Error("timeRangeSelectorEnabled has to be enabled");this.timeBuckets.setInterval("auto"),this.timeBuckets.setBounds(a);const i=this.timeBuckets.getInterval().asSeconds(),n=(a.max.valueOf()-a.min.valueOf())/1e3/i;Math.floor(t/n*100)/100<8&&this.timeBuckets.setInterval(2*i+"s");const r=e.reduce(((e,t)=>Math.max(e,t.bucketSpanSeconds)),0);return r>i&&(this.timeBuckets.setInterval(r+"s"),this.timeBuckets.setBounds(a)),this.timeBuckets.getInterval()}async loadOverallData(e,t,a,i){const n=null!=a?a:this.getSwimlaneBucketInterval(e,t);if(!e||!e.length)throw new Error("Explorer jobs collection is required");const r=this.getTimeBounds(),s=Object(l.b)(r,n,!1),o=e.map((e=>e.id)),c=Object(l.b)(r,n,!0),d=await this.mlResultsService.getOverallBucketScores(o,1,c.min.valueOf(),c.max.valueOf(),n.asSeconds()+"s",i);return this.processOverallResults(d.results,s,n.asSeconds())}async loadViewBySwimlane(e,t,a,i,n,r,s,c,d,u,m){const p=this.getTimeBounds();if(void 0===p)throw new Error("timeRangeSelectorEnabled has to be enabled");const b=null!=u?u:this.getSwimlaneBucketInterval(a,c),f=Object(l.b)(p,b,!1),h=a.map((e=>e.id)),g=b.asMilliseconds();let x;if(i===o.j){const t=void 0!==e&&e.length>0?e:h;x=await this.mlResultsService.getScoresByBucket(t,f.min.valueOf(),f.max.valueOf(),g,r,s,m)}else x=await this.mlResultsService.getInfluencerValueMaxScoreByTime(h,i,e,f.min.valueOf(),f.max.valueOf(),g,n,r,s,d,m);if(void 0!==x)return this.processViewByResults(x.results,x.cardinality,e,t,i,b.asSeconds())}async loadViewByTopFieldValuesForSelectedTime(e,t,a,i,n,r,s,l,c,d){const u=a.map((e=>e.id));if(i!==o.j){const a=await this.mlResultsService.getTopInfluencers(u,e,t,n,r,s,c,d);if(void 0===a.influencers[i])return[];const l=[],o=a.influencers[i];return Array.isArray(o)&&o.forEach((e=>{e.maxAnomalyScore>0&&l.push(e.influencerFieldValue)})),l}{const a=await this.mlResultsService.getScoresByBucket(u,e,t,l.asMilliseconds(),r,s,n);return Object.keys(a.results)}}getTimeBounds(){return void 0!==this._customTimeRange?this.timeFilter.calculateBounds(this._customTimeRange):this.timeFilter.getBounds()}processOverallResults(e,t,a){const i=o.g,n={laneLabels:[i],points:[],interval:a,earliest:t.min.valueOf()/1e3,latest:t.max.valueOf()/1e3};return Object.entries(e).forEach((([e,t])=>{const a=+e/1e3;n.points.push({laneLabel:i,time:a,value:t}),n.earliest=Math.min(a,n.earliest),n.latest=Math.max(a+n.interval,n.latest)})),n}processViewByResults(e,t,a,i,n,r){const s={fieldName:n,points:[],laneLabels:[],interval:r,earliest:i.earliest,latest:i.latest,cardinality:t},l={};Object.entries(e).forEach((([e,t])=>{s.laneLabels.push(e),l[e]=0,Object.entries(t).forEach((([t,a])=>{const i=+t/1e3;s.points.push({laneLabel:e,time:i,value:a}),l[e]=Math.max(l[e],a)}))}));const o=a.length;return s.laneLabels=0===o?s.laneLabels.sort(((e,t)=>l[t]-l[e])):s.laneLabels.sort(((e,t)=>{let i=a.indexOf(e),n=a.indexOf(t);return i=i>-1?i:o,n=n>-1?n:o,i-n})),s}}},285:function(e,t,a){"use strict";var i=a(207);a.d(t,"a",(function(){return i.d}))},287:function(e,t,a){"use strict";var i=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function n(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!((n=e[a])===(r=t[a])||i(n)&&i(r)))return!1;var n,r;return!0}e.exports=function(e,t){void 0===t&&(t=n);var a=null;function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(a&&a.lastThis===this&&t(i,a.lastArgs))return a.lastResult;var r=e.apply(this,i);return a={lastResult:r,lastArgs:i,lastThis:this},r}return i.clear=function(){a=null},i}},311:function(e,t,a){"use strict";a.d(t,"b",(function(){return pn})),a.d(t,"a",(function(){return bn}));var i={};a.r(i),a.d(i,"overviewRouteFactory",(function(){return ze})),a.d(i,"appRootRouteFactory",(function(){return Ge})),a.d(i,"jobListRouteFactory",(function(){return at})),a.d(i,"indexOrSearchRouteFactory",(function(){return pt})),a.d(i,"dataVizIndexOrSearchRouteFactory",(function(){return bt})),a.d(i,"logRateAnalysisIndexOrSearchRouteFactory",(function(){return ft})),a.d(i,"explainLogRateSpikesIndexOrSearchRouteFactory",(function(){return ht})),a.d(i,"logCategorizationIndexOrSearchRouteFactory",(function(){return gt})),a.d(i,"changePointDetectionIndexOrSearchRouteFactory",(function(){return xt})),a.d(i,"jobTypeRouteFactory",(function(){return yt})),a.d(i,"newJobRouteFactory",(function(){return St})),a.d(i,"singleMetricRouteFactory",(function(){return Gt})),a.d(i,"multiMetricRouteFactory",(function(){return Wt})),a.d(i,"multiMetricRouteFactoryRedirect",(function(){return Yt})),a.d(i,"populationRouteFactory",(function(){return qt})),a.d(i,"advancedRouteFactory",(function(){return Ht})),a.d(i,"advancedRouteFactoryRedirect",(function(){return Xt})),a.d(i,"categorizationRouteFactory",(function(){return Qt})),a.d(i,"rareRouteFactory",(function(){return Zt})),a.d(i,"geoRouteFactory",(function(){return Kt})),a.d(i,"recognizeRouteFactory",(function(){return ia})),a.d(i,"checkViewOrCreateRouteFactory",(function(){return na})),a.d(i,"fromLensRouteFactory",(function(){return oa})),a.d(i,"fromMapRouteFactory",(function(){return ua})),a.d(i,"fromPatternAnalysisRouteFactory",(function(){return ba})),a.d(i,"selectorRouteFactory",(function(){return ga})),a.d(i,"dataDriftRouteIndexOrSearchFactory",(function(){return Ra})),a.d(i,"dataDriftRouteIndexPatternFactory",(function(){return Da})),a.d(i,"indexBasedRouteFactory",(function(){return Ba})),a.d(i,"indexESQLBasedRouteFactory",(function(){return Pa})),a.d(i,"fileBasedRouteFactory",(function(){return Ua})),a.d(i,"settingsRouteFactory",(function(){return Wa})),a.d(i,"calendarListRouteFactory",(function(){return Ha})),a.d(i,"newCalendarRouteFactory",(function(){return Ka})),a.d(i,"editCalendarRouteFactory",(function(){return ei})),a.d(i,"filterListRouteFactory",(function(){return ii})),a.d(i,"newFilterListRouteFactory",(function(){return li})),a.d(i,"editFilterListRouteFactory",(function(){return oi})),a.d(i,"analyticsJobsListRouteFactory",(function(){return ui})),a.d(i,"analyticsJobExplorationRouteFactory",(function(){return bi})),a.d(i,"analyticsJobsCreationRouteFactory",(function(){return gi})),a.d(i,"analyticsMapRouteFactory",(function(){return vi})),a.d(i,"analyticsSourceSelectionRouteFactory",(function(){return _i})),a.d(i,"logRateAnalysisRouteFactory",(function(){return wi})),a.d(i,"explainLogRateSpikesRouteFactory",(function(){return Ai})),a.d(i,"logCategorizationRouteFactory",(function(){return Mi})),a.d(i,"changePointDetectionRouteFactory",(function(){return Ri})),a.d(i,"timeSeriesExplorerRouteFactory",(function(){return Bi})),a.d(i,"explorerRouteFactory",(function(){return Ui})),a.d(i,"modelsListRouteFactory",(function(){return Gi})),a.d(i,"dataDriftRouteFactory",(function(){return qi})),a.d(i,"notificationsRouteFactory",(function(){return Qi})),a.d(i,"nodesListRouteFactory",(function(){return en}));var n=a(2),r=a.n(n),s=a(330),l=a(22),o=a(8),c=a(109),d=a(120),u=a.n(d);const m={services:{}},p=Object(n.createContext)(m);var b=a(572),f=a.n(b),h=a(6);const g=({children:e,component:t,render:a,...i})=>{const s=Object(n.useMemo)((()=>{if(t)return e=>Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(x,null),Object(h.jsx)(t,e))}),[t]);if(s)return Object(h.jsx)(l.Route,u()({},i,{component:s}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(h.jsx)(l.Route,u()({},i,{render:e=>Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(x,null),t(e))}))}return Object(h.jsx)(l.Route,i,Object(h.jsx)(x,null),e)},x=()=>{const{executionContext:e}=Object(n.useContext)(p).services,t=Object(l.useRouteMatch)();return function(e,t){f()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},j=({legacySwitch:e=!0,children:t})=>{const a=Object(l.useRouteMatch)();return e?Object(h.jsx)(l.Switch,null,t):Object(h.jsx)(c.Routes,null,n.Children.map(t,(e=>{if(r.a.isValidElement(e)&&e.type===g){var i;const n=Object(o.replace)(null==e?void 0:e.props.path,a.url+"/",""),s="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(h.jsx)(c.Route,{path:n,element:Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(x,null),(null==e||null===(i=e.props)||void 0===i?void 0:i.component)&&Object(h.jsx)(e.props.component,null)||s&&s()||t)})}return e})))};var v=a(7),O=a(25),y=a(5),_=a(87),S=a.n(_),E=(a(561),a(15));a(544);const w=e=>{const{className:t,size:a,...i}=e,n={};return(e=>void 0===e.iconType)(e)&&(n.iconType=`logo${e.name.replace(/\s+/g,"")}`),Object(h.jsx)(O.EuiAvatar,u()({className:S()("kbnSolutionAvatar",{[`kbnSolutionAvatar--${a}`]:a},t),size:"xxl"===a?"xl":a,iconSize:a,color:"plain"},i,n))};a(566);const A=y.i18n.translate("sharedUXPackages.solutionNav.collapsibleLabel",{defaultMessage:"Collapse side navigation"}),T=y.i18n.translate("sharedUXPackages.solutionNav.openLabel",{defaultMessage:"Open side navigation"}),C=({className:e,isCollapsed:t,...a})=>{const i=S()("kbnSolutionNavCollapseButton",{"kbnSolutionNavCollapseButton-isCollapsed":t},e);return Object(h.jsx)(O.EuiButtonIcon,u()({className:i,size:"s",color:"text",iconType:t?"menuRight":"menuLeft","aria-label":t?T:A,title:t?T:A},a))},k="248px",M=(e,t)=>e.map((e=>(e.tabIndex=t?-1:void 0,e.items=e.items&&M(e.items,t),e))),I=Object(O.htmlIdGenerator)("SolutionNav"),L=({children:e,headingProps:t,icon:a,isOpenOnDesktop:i=!1,items:s,mobileBreakpoints:l=["xs","s"],closeFlyoutButtonPosition:o="outside",name:c,onCollapse:d,canBeCollapsed:m=!0,...p})=>{const b=Object(O.useIsWithinBreakpoints)(l),f=Object(O.useIsWithinBreakpoints)(["m"]),g=Object(O.useIsWithinMinBreakpoint)("l"),[x,j]=Object(n.useState)(!1),v=g&&!i&&m,_=!!e,A=S()("kbnSolutionNav",{"kbnSolutionNav--hidden":v}),T=(null==t?void 0:t.id)||I("heading"),L=(null==t?void 0:t.element)||"h2",R=Object(h.jsx)(O.EuiTitle,{size:"xs",id:T,"data-test-subj":null==t?void 0:t["data-test-subj"],className:"kbnSolutionNav__title"},Object(h.jsx)(L,null,a&&Object(h.jsx)(w,{className:"kbnSolutionNav__titleAvatar",iconType:a,name:c}),Object(h.jsx)("strong",null,Object(h.jsx)(E.FormattedMessage,{id:"sharedUXPackages.solutionNav.mobileTitleText",defaultMessage:"{solutionName} {menuText}",values:{solutionName:c||"Navigation",menuText:b?y.i18n.translate("sharedUXPackages.solutionNav.menuText",{defaultMessage:"menu"}):""}})))),D=Object(n.useMemo)((()=>_?e:s?Object(h.jsx)(O.EuiSideNav,u()({"aria-labelledby":T,"aria-hidden":v,items:M(s,v),mobileBreakpoints:[]},p)):null),[e,T,_,v,s,p]),{euiTheme:F}=Object(O.useEuiTheme)(),N=Object(n.useMemo)((()=>g?i?k:F.size.xxl:f?x||!m?k:F.size.xxl:"0"),[F,i,x,m,f,g]),{setGlobalCSSVariables:B}=Object(O.useEuiThemeCSSVariables)();return Object(n.useEffect)((()=>{B({"--kbnSolutionNavOffset":N})}),[N,B]),Object(h.jsx)(r.a.Fragment,null,b&&Object(h.jsx)(O.EuiCollapsibleNavGroup,{className:A,paddingSize:"none",background:"none",title:R,titleElement:"span",isCollapsible:m,initialIsOpen:!1},Object(h.jsx)(O.EuiPanel,{color:"transparent",paddingSize:"s"},D)),f&&Object(h.jsx)(r.a.Fragment,null,(x||!m)&&Object(h.jsx)(O.EuiFlyout,{ownFocus:!1,outsideClickCloses:!0,onClose:()=>j(!1),side:"left",size:248,closeButtonPosition:o,className:"kbnSolutionNav__flyout",hideCloseButton:!m},Object(h.jsx)(O.EuiPageSidebar,{className:A,hasEmbellish:!0},R,Object(h.jsx)(O.EuiSpacer,{size:"l"}),D)),m&&Object(h.jsx)(C,{isCollapsed:!0,onClick:()=>{j(!x)}})),g&&Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)("div",{className:A},R,Object(h.jsx)(O.EuiSpacer,{size:"l"}),D),m&&Object(h.jsx)(C,{isCollapsed:!i,onClick:d})))};var R=a(550);const D="solutionNavIsCollapsed",F=e=>{const t=t=>{var a;const i=Object(O.useIsWithinBreakpoints)(["m"]),r=Object(O.useIsWithinMinBreakpoint)("l"),[s,l]=Object(n.useState)(!JSON.parse(String(localStorage.getItem(D)))),{solutionNav:o,children:c,...d}=t,{euiTheme:m}=Object(O.useEuiTheme)(),{canBeCollapsed:p=!0}=o,b=i||p&&r&&!s,f=(e=>Object(R.css)("flex:0 1 0;overflow:hidden;",O.euiCanAnimate,"{transition:min-width ",e.animation.fast," ",e.animation.resistance,";}",""))(m),g=S()("kbnSolutionNav__sidebar",{"kbnSolutionNav__sidebar--shrink":b},null===(a=t.pageSideBarProps)||void 0===a?void 0:a.className,f),x=Object(h.jsx)(L,u()({isOpenOnDesktop:s,onCollapse:()=>{l(!s),localStorage.setItem(D,JSON.stringify(s))}},o)),j={paddingSize:"none",...t.pageSideBarProps,minWidth:b?m.size.xxl:void 0,className:g,hasEmbellish:!b};return Object(h.jsx)(e,u()({},d,{pageSideBar:x,pageSideBarProps:j}),c)};var a;return t.displayName=`WithSolutionNavBar(${a=e,a.displayName||a.name||"UnnamedComponent"})`,t};var N=a(393),B=a(549),P=a.n(B);const $=y.i18n.translate("sharedUXPackages.card.noData.noPermission.title",{defaultMessage:"Contact your administrator"}),V=y.i18n.translate("sharedUXPackages.card.noData.noPermission.description",{defaultMessage:"This integration is not yet enabled. Your administrator has the required permissions to turn it on."}),U=y.i18n.translate("sharedUXPackages.card.noData.title",{defaultMessage:"Add Elastic Agent"}),z=y.i18n.translate("sharedUXPackages.card.noData.description",{defaultMessage:"Use Elastic Agent for a simple, unified way to collect data from your machines."}),J=()=>Object(h.jsx)(O.EuiImage,{size:"fullWidth",style:{width:"max(100%, 360px)",height:240,objectFit:"cover",background:"aliceblue"},url:P.a,alt:""}),G=({title:e,description:t,canAccessFleet:a,button:i,href:n,...r})=>Object(h.jsx)(O.EuiCard,u()({css:{maxWidth:400,marginInline:"auto"},paddingSize:"l",title:a?Object(h.jsx)(O.EuiScreenReaderOnly,null,Object(h.jsx)("span",null,e||U)):Object(h.jsx)(O.EuiTextColor,{color:"default"},$),description:a?t||z:Object(h.jsx)(O.EuiTextColor,{color:"default"},V),footer:(()=>{if(a)return i&&"string"!=typeof i?i:Object(h.jsx)(O.EuiButton,{fill:!0,href:n,"data-test-subj":"noDataDefaultFooterAction"},i||e||U)})(),isDisabled:!a,href:n,image:Object(h.jsx)(J,null)},r));a(257);const W=r.a.createContext(null),Y=({href:e,category:t,description:a,...i})=>{var r;const{canAccessFleet:s,addBasePath:l}=function(){const e=Object(n.useContext)(W);if(!e)throw new Error("NoDataCard Context is missing.  Ensure your component or React root is wrapped with NoDataCardContext.");return e}(),o=Object(n.useMemo)((()=>{if(e)return e;const a="/app/integrations/browse";return l(t?`${a}/${t}`:a)}),[l,e,t]);return Object(h.jsx)(N.a,null,Object(h.jsx)(G,u()({},i,{href:o,canAccessFleet:null!==(r=i.canAccessFleet)&&void 0!==r?r:s,description:a})))},q=({action:e})=>{const t=Object.keys(e);if(1!==t.length)return null;const a=t[0],i="elasticAgent"===a?"empty-page-agent-action":`empty-page-${a}-action`;return Object(h.jsx)(Y,u()({key:i},e[a]))},H=({solution:e,logo:t,action:a,docsLink:i,pageTitle:n,pageDescription:r,className:s})=>{const l=n||y.i18n.translate("sharedUXPackages.noDataPage.welcomeTitle",{defaultMessage:"Welcome to Elastic {solution}!",values:{solution:e}}),o=i?Object(h.jsx)(O.EuiLink,{href:i,target:"_blank"},Object(h.jsx)(E.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro.link",defaultMessage:"learn more"})):null,c=null!=r?r:o?Object(h.jsx)(E.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro",defaultMessage:"Add your data to get started, or {link} about {solution}.",values:{solution:e,link:o}}):Object(h.jsx)(E.FormattedMessage,{id:"sharedUXPackages.noDataPage.introNoDocLink",defaultMessage:"Add your data to get started."});return Object(h.jsx)(O.EuiPageTemplate.Section,{alignment:"center",grow:!0,className:S()("kbnNoDataPageContents",s),"data-test-subj":"kbnNoDataPage"},Object(h.jsx)(O.EuiText,{textAlign:"center"},Object(h.jsx)(w,{name:e,iconType:t||`logo${e}`,size:"xxl"}),Object(h.jsx)(O.EuiSpacer,{size:"l"}),Object(h.jsx)("h1",null,l),Object(h.jsx)(O.EuiTextColor,{color:"subdued"},Object(h.jsx)("p",null,c))),Object(h.jsx)(O.EuiSpacer,{size:"xxl"}),Object(h.jsx)(q,{action:a}))},X=e=>{const{className:t,noDataConfig:a,pageSideBar:i,pageSideBarProps:n,...r}=e;if(!a)return null;let s;i&&(s=Object(h.jsx)(O.EuiPageTemplate.Sidebar,n,i));const l=((e,t)=>S()("kbnPageTemplate","",t||""))(0,t);return Object(h.jsx)(O.EuiPageTemplate,u()({className:l,restrictWidth:950,panelled:!1,offset:0,minHeight:0},r),s,Object(h.jsx)(H,a))},Q=F(X),Z=({className:e,pageHeader:t,children:a,isEmptyState:i,pageSideBar:n,pageSideBarProps:r,emptyPageBody:s,...l})=>{let o,c;if(i&&t&&!a){const{iconType:e,pageTitle:i,description:n,rightSideItems:r}=t,s=i?Object(h.jsx)("h1",null,i):void 0,l=n?Object(h.jsx)("p",null,n):void 0;a=Object(h.jsx)(O.EuiPageTemplate.EmptyPrompt,{iconType:e,iconColor:"",title:s,body:l,actions:r})}else t&&(o=Object(h.jsx)(O.EuiPageTemplate.Header,t));if(i&&s&&(a=s),n){const e={...r};e.sticky=!0,c=Object(h.jsx)(O.EuiPageTemplate.Sidebar,e,n)}const d=((e,t)=>S()("kbnPageTemplate","",t||""))(0,e);return Object(h.jsx)(O.EuiPageTemplate,u()({className:d,offset:0,minHeight:o?"calc(100vh - var(--kbnAppHeadersOffset, var(--euiFixedHeadersOffset, 0)))":0,grow:!o&&void 0},l),c,o,a)},K=F(Z),ee=Object.assign((({className:e,children:t,solutionNav:a,noDataConfig:i,...n})=>i&&a?Object(h.jsx)(Q,{"data-test-subj":n["data-test-subj"],className:e,noDataConfig:i,solutionNav:a}):i?Object(h.jsx)(X,{"data-test-subj":n["data-test-subj"],className:e,noDataConfig:i}):a?Object(h.jsx)(K,u()({className:e,solutionNav:a,children:t},n)):Object(h.jsx)(Z,u()({className:e,children:t},n))),{Sidebar:O.EuiPageTemplate.Sidebar,Header:O.EuiPageTemplate.Header,Section:O.EuiPageTemplate.Section,BottomBar:O.EuiPageTemplate.BottomBar,EmptyPrompt:O.EuiPageTemplate.EmptyPrompt});var te=a(571),ae=a(68),ie=a(155),ne=a(517),re=a(281),se=a(417);const le=5e3,oe=e=>{var t,a,i;const{isAutoRefreshOnly:s,isLoading:l=!1,showRefresh:c,width:d,flexGroup:u=!0,isDisabled:m=!1,needsUpdate:p,onRefresh:b}=e,{data:f,notifications:{toasts:g},uiSettings:x,uiSettingsKeys:j,theme:_,i18n:S}=Object(re.b)(),w=Object(O.useIsWithinMaxBreakpoint)("l"),{timefilter:A,history:T}=f.query.timefilter,[C,k]=Object(ae.d)("_g"),M=(I=T,function(){var e,t;return null!==(e=null===(t=I.get())||void 0===t?void 0:t.map((({from:e,to:t})=>({start:e,end:t}))))&&void 0!==e?e:[]});var I;const L=Object(ne.a)(),R=Object(ne.b)();Object(n.useEffect)((function(){void 0!==(null==C?void 0:C.time)&&A.setTime({from:C.time.from,to:C.time.to})}),[null==C||null===(t=C.time)||void 0===t?void 0:t.from,null==C||null===(a=C.time)||void 0===a?void 0:a.to,null==C||null===(i=C.time)||void 0===i?void 0:i.ts]),Object(n.useEffect)((function(){var e,t;void 0!==(null==C?void 0:C.refreshInterval)&&A.setRefreshInterval({pause:!(null==C||null===(e=C.refreshInterval)||void 0===e||!e.pause),value:null==C||null===(t=C.refreshInterval)||void 0===t?void 0:t.value})}),[null==C?void 0:C.refreshInterval]);const D=Object(n.useCallback)(Object(o.debounce)((e=>{k("refreshInterval",e,!0)}),200),[k]),[F,N]=Object(n.useState)(M()),[B,P]=Object(n.useState)(A.isAutoRefreshSelectorEnabled()),[$,V]=Object(n.useState)(A.isTimeRangeSelectorEnabled()),U=L;Object(n.useEffect)((function(){const e=!(null==C||!C.refreshInterval);U.value<le&&!U.pause&&g.addWarning({title:e?y.i18n.translate("xpack.ml.datePicker.shortRefreshIntervalURLWarningMessage",{defaultMessage:"The refresh interval in the URL is shorter than the minimum supported interval."}):y.i18n.translate("xpack.ml.datePicker.shortRefreshIntervalTimeFilterWarningMessage",{defaultMessage:"The refresh interval in Advanced Settings is shorter than the minimum supported interval."}),text:Object(ie.a)(Object(h.jsx)(O.EuiButton,{onClick:D.bind(null,{pause:U.pause,value:le})},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.datePicker.pageRefreshResetButton",defaultMessage:"Set to {defaultInterval}",values:{defaultInterval:"5s"}})),{theme:_,i18n:S})},{toastLifeTimeMs:3e4})}),[JSON.stringify(U),JSON.stringify(null==C?void 0:C.refreshInterval),D]);const z=x.get("dateFormat"),J=x.get(j.TIMEPICKER_QUICK_RANGES),G=Object(n.useMemo)((()=>J.map((({from:e,to:t,display:a})=>({start:e,end:t,label:a})))),[J]);Object(n.useEffect)((()=>{const e=new v.Subscription,t=A.getEnabledUpdated$();return void 0!==t&&e.add(t.subscribe((e=>{P(A.isAutoRefreshSelectorEnabled()),V(A.isTimeRangeSelectorEnabled())}))),function(){e.unsubscribe()}}),[]);const W=Object(n.useCallback)((({start:e,end:t})=>{N(M()),k("time",{from:e,to:t,..."now"===e||"now"===t?{ts:Date.now()}:{}})}),[k]),Y=Object(n.useCallback)((()=>{se.a.next({lastRefresh:Date.now()}),b&&b()}),[b]),q=Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(O.EuiFlexItem,null,Object(h.jsx)(O.EuiSuperDatePicker,{isLoading:l,start:R.from,end:R.to,isPaused:U.pause,isAutoRefreshOnly:!$||s,refreshInterval:U.value||le,onTimeChange:W,onRefresh:Y,onRefreshChange:function({isPaused:e,refreshInterval:t}){!1===e&&t<=0&&D({pause:e,value:5e3}),D({pause:e,value:t})},recentlyUsedRanges:F,dateFormat:z,commonlyUsedRanges:G,updateButtonProps:{iconOnly:w,fill:!1,...p?{needsUpdate:p}:{}},width:d,isDisabled:m})),!0!==c&&$?null:Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(O.EuiButton,{fill:!1,color:p?"success":"primary",iconType:p?"kqlFunction":"refresh",onClick:Y,"data-test-subj":"mlDatePickerRefreshPageButton"+(l?" loading":" loaded"),isLoading:l},p?Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.datePicker.pageUpdateButton",defaultMessage:"Update"}):Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.datePicker.pageRefreshButton",defaultMessage:"Refresh"})))),H=u?Object(h.jsx)(O.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},q):q;return B||$?H:null};var ce=a(16),de=a(205),ue=a(28),me=a(18);const pe=Object.freeze({text:y.i18n.translate("xpack.ml.machineLearningBreadcrumbLabel",{defaultMessage:"Machine Learning"}),href:"/"}),be=Object.freeze({text:y.i18n.translate("xpack.ml.settingsBreadcrumbLabel",{defaultMessage:"Settings"}),href:"/settings",deepLinkId:"ml:settings"}),fe=Object.freeze({text:y.i18n.translate("xpack.ml.anomalyDetectionBreadcrumbLabel",{defaultMessage:"Anomaly Detection"}),href:"/jobs",deepLinkId:"ml:anomalyDetection"}),he=Object.freeze({text:y.i18n.translate("xpack.ml.dataFrameAnalyticsLabel",{defaultMessage:"Data Frame Analytics"}),href:"/data_frame_analytics",deepLinkId:"ml:dataFrameAnalytics"}),ge=Object.freeze({text:y.i18n.translate("xpack.ml.modelManagementLabel",{defaultMessage:"Model Management"}),href:"/trained_models",deepLinkId:"ml:modelManagement"}),xe=Object.freeze({text:y.i18n.translate("xpack.ml.datavisualizerBreadcrumbLabel",{defaultMessage:"Data Visualizer"}),href:"/datavisualizer",deepLinkId:"ml:dataVisualizer"}),je=Object.freeze({text:y.i18n.translate("xpack.ml.aiopsBreadcrumbLabel",{defaultMessage:"AIOps Labs"}),href:"/aiops/log_rate_analysis_index_select"}),ve=Object.freeze({text:y.i18n.translate("xpack.ml.aiopsBreadcrumbLabel",{defaultMessage:"AIOps Labs"}),href:"/aiops/log_categorization_index_select"}),Oe=Object.freeze({text:y.i18n.translate("xpack.ml.aiopsBreadcrumbLabel",{defaultMessage:"AIOps Labs"}),href:"/aiops/change_point_detection_index_select"}),ye=Object.freeze({text:y.i18n.translate("xpack.ml.aiops.logRateAnalysisBreadcrumbLabel",{defaultMessage:"Log Rate Analysis"}),href:"/aiops/log_rate_analysis_index_select",deepLinkId:"ml:logRateAnalysis"}),_e=Object.freeze({text:y.i18n.translate("xpack.ml.aiops.logPatternAnalysisBreadcrumbLabel",{defaultMessage:"Log Pattern Analysis"}),href:"/aiops/log_categorization_index_select",deepLinkId:"ml:logPatternAnalysis"}),Se=Object.freeze({text:y.i18n.translate("xpack.ml.aiops.changePointDetectionBreadcrumbLabel",{defaultMessage:"Change Point Detection"}),href:"/aiops/change_point_detection_index_select",deepLinkId:"ml:changePointDetections"}),Ee=Object.freeze({text:y.i18n.translate("xpack.ml.createJobsBreadcrumbLabel",{defaultMessage:"Create job"}),href:"/jobs/new_job"}),we=Object.freeze({text:y.i18n.translate("xpack.ml.settings.breadcrumbs.calendarManagementLabel",{defaultMessage:"Calendar management"}),href:"/settings/calendars_list",deepLinkId:"ml:calendarSettings"}),Ae=Object.freeze({text:y.i18n.translate("xpack.ml.settings.breadcrumbs.filterListsLabel",{defaultMessage:"Filter lists"}),href:"/settings/filter_lists",deepLinkId:"ml:filterListsSettings"}),Te=Object.freeze({text:y.i18n.translate("xpack.ml.settings.breadcrumbs.dataComparisonLabel",{defaultMessage:"Data drift"}),href:"/data_drift_index_select",deepLinkId:"ml:dataDrift"}),Ce={ML_BREADCRUMB:pe,SETTINGS_BREADCRUMB:be,ANOMALY_DETECTION_BREADCRUMB:fe,DATA_FRAME_ANALYTICS_BREADCRUMB:he,TRAINED_MODELS:ge,DATA_DRIFT_BREADCRUMB:Te,DATA_VISUALIZER_BREADCRUMB:xe,AIOPS_BREADCRUMB_LOG_RATE_ANALYSIS:je,AIOPS_BREADCRUMB_LOG_PATTERN_ANALYSIS:ve,AIOPS_BREADCRUMB_CHANGE_POINT_DETECTION:Oe,LOG_RATE_ANALYSIS:ye,LOG_PATTERN_ANALYSIS:_e,CHANGE_POINT_DETECTION:Se,CREATE_JOB_BREADCRUMB:Ee,CALENDAR_MANAGEMENT_BREADCRUMB:we,FILTER_LISTS_BREADCRUMB:Ae},ke=(e,t)=>a=>{a.preventDefault(),t(e)},Me=(e,t,a)=>({text:Ce[e].text,...t?{href:`${a}/app/ml${Ce[e].href}`,deepLinkId:Ce[e].deepLinkId,onClick:ke(Ce[e].href,t)}:{}});var Ie=a(130),Le=a(249),Re=a.n(Le),De=a(70),Fe=a(142),Ne=a(10);const Be=({missingCapabilities:e})=>{const{services:{docLinks:t}}=Object(Ne.d)(),a=t.links.ml.guide,i=(null!=e?e:[]).map((e=>Object(De.createPermissionFailureMessage)(e)));return Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(O.EuiPageTemplate.EmptyPrompt,{color:"danger",alignment:"horizontalCenter",iconType:"warning",title:Object(h.jsx)("h2",null,Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.management.jobsList.accessDeniedTitle",defaultMessage:"Access denied"})),body:Object(h.jsx)("div",null,Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.accessDenied.description",defaultMessage:"You do not have permission to view this page."}),i?Object(h.jsx)("ul",null,i.map((e=>Object(h.jsx)("li",{key:e},e)))):null)}),Object(h.jsx)(Fe.a,{docLink:a}))};var Pe=a(0),$e=a(1);const Ve=(e,t,a)=>{const i=Object(n.useRef)(t),r=Object(n.useRef)(a),[s,l]=Object(n.useState)(),[o,c]=Object(n.useState)({initialized:!1}),{services:{application:{navigateToApp:d,navigateToUrl:u},mlServices:{mlCapabilities:m},uiSettings:p,data:{dataViews:b},notifications:f,share:{url:{locators:g}}}}=Object(Ne.d)(),x=Object(Ne.e)();Re()((function(){m.refreshCapabilities()}));const j=Object(n.useCallback)((async()=>!1===x.isMlEnabled||!1===x.isMinimumLicense?(await d("home"),Promise.reject()):"full"===e&&!1===x.isFullLicense?(await d(Pe.g,{path:$e.b.DATA_VISUALIZER}),Promise.reject()):!x.hasLicenseExpired||(await u(await g.get("LICENSE_MANAGEMENT_LOCATOR").getUrl({page:"dashboard"})),Promise.reject())),[g,x.hasLicenseExpired,x.isFullLicense,x.isMinimumLicense,x.isMlEnabled,d,u,e]),v=Object(De.usePermissionCheck)(t),O=Object(n.useCallback)((async()=>{const e=i.current.filter(((e,t)=>!v[t]));return!(e.length>0)||(c({initialized:!0,resolvedComponent:Object(h.jsx)(Be,{missingCapabilities:e})}),Promise.reject())}),[v]),_=Object(n.useCallback)((async()=>{if(!r.current)return;const e=Object.keys(r.current),t=Object.values(r.current),a=e.reduce(((e,t)=>(e[t]={},e)),{});return(await Promise.all(t.map((e=>e())))).forEach(((t,i)=>a[e[i]]=t)),a}),[]);return Object(n.useEffect)((function(){let e=!0;return j().then(O).then(_).then((t=>{e&&(c({initialized:!0}),l(t))})).catch((e=>{e instanceof Error&&f.toasts.addError(e,{title:y.i18n.translate("xpack.ml.useResolver.errorTitle",{defaultMessage:"An error has occurred"})})})),()=>{e=!1}}),[j,x,O,f.toasts,_,b,p]),{context:o,results:s}},Ue=r.a.lazy((()=>Promise.all([a.e(4),a.e(6),a.e(7),a.e(9),a.e(22),a.e(20),a.e(32),a.e(54)]).then(a.bind(null,868)))),ze=(e,t)=>({id:"overview",path:Object(Ie.c)(ce.a.OVERVIEW),title:y.i18n.translate("xpack.ml.overview.overviewLabel",{defaultMessage:"Overview"}),enableDatePicker:!0,render:(e,t)=>Object(h.jsx)(Je,u()({},e,{deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.overview.overviewLabel",{defaultMessage:"Overview"})}],"data-test-subj":"mlPageOverview"}),Je=()=>{const{context:e}=Ve("full",["canGetMlInfo"],{getMlNodeCount:ue.a,loadMlServerInfo:me.g});return Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1}),Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(n.Suspense,{fallback:null},Object(h.jsx)(Ue,null)))},Ge=(e,t)=>({id:"",path:"/",render:()=>Object(h.jsx)(We,null),breadcrumbs:[]}),We=()=>{const{isADEnabled:e,isDFAEnabled:t,isNLPEnabled:a}=Object(de.b)();return!1===e&&!1===t&&!0===a?Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.TRAINED_MODELS_MANAGE)}):Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.OVERVIEW)})};var Ye=a(26),qe=a.n(Ye),He=a(116),Xe=a(250),Qe=a(153),Ze=a(170),Ke=a(23);const et=()=>({getMlNodeCount:Ke.b,loadMlServerInfo:me.g}),tt=Object(He.a)((async()=>({default:(await Promise.all([a.e(6),a.e(12),a.e(18),a.e(43)]).then(a.bind(null,860))).JobsPage}))),at=(e,t)=>({id:"anomaly_detection",title:y.i18n.translate("xpack.ml.anomalyDetection.jobs.docTitle",{defaultMessage:"Anomaly Detection Jobs"}),path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_JOBS_MANAGE),render:()=>Object(h.jsx)(it,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.anomalyDetection.jobsManagementLabel",{defaultMessage:"Jobs"})}],"data-test-subj":"mlPageJobManagement",enableDatePicker:!0}),it=()=>{var e,t,a;const{context:i}=Ve("full",["canGetJobs"],et()),r=Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!0}),s=Object(ne.a)(),l=qe()(se.a),o=null!==(e=null==l?void 0:l.lastRefresh)&&void 0!==e?e:0,c=null!==(t=s.value)&&void 0!==t?t:0,d=null===(a=s.pause)||void 0===a||a;Object(n.useEffect)((()=>{const e=0===c||!0===d?{pause:!1,value:Xe.d}:{pause:d,value:c};r.setRefreshInterval(e)}),[]);const u=Object(n.useMemo)((()=>new Qe.a),[]);return Object(h.jsx)(Ie.b,{context:i},Object(h.jsx)(Ze.a.Provider,{value:u},Object(h.jsx)(tt,{lastRefresh:o})))};var nt=a(814);const rt=({nextStepPath:e,title:t})=>{const a=Object(Ne.h)(),i=Object(n.useCallback)((()=>{a(e)}),[a,e]);return Object(h.jsx)(O.EuiButton,{onClick:i},t)};var st=function(e){return e[e.NEW_JOB=0]="NEW_JOB",e[e.DATAVISUALIZER=1]="DATAVISUALIZER",e}(st||{});const lt=Object(He.a)((async()=>({default:(await Promise.resolve().then(a.bind(null,814))).Page}))),ot=(e,t)=>[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.createJobLabel",{defaultMessage:"Create job"})}],ct=(e,t)=>[Me("ML_BREADCRUMB",e,t),Me("DATA_VISUALIZER_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.selectDateViewLabel",{defaultMessage:"Select Data View"})}],dt=(e,t)=>[Me("ML_BREADCRUMB",e,t),Me("AIOPS_BREADCRUMB_LOG_RATE_ANALYSIS",e,t),Me("LOG_RATE_ANALYSIS",e,t),{text:y.i18n.translate("xpack.ml.aiopsBreadcrumbs.selectDataViewLabel",{defaultMessage:"Select Data View"})}],ut=(e,t)=>[Me("ML_BREADCRUMB",e,t),Me("AIOPS_BREADCRUMB_LOG_PATTERN_ANALYSIS",e,t),Me("LOG_PATTERN_ANALYSIS",e,t),{text:y.i18n.translate("xpack.ml.aiopsBreadcrumbs.selectDataViewLabel",{defaultMessage:"Select Data View"})}],mt=(e,t)=>[Me("ML_BREADCRUMB",e,t),Me("AIOPS_BREADCRUMB_CHANGE_POINT_DETECTION",e,t),Me("CHANGE_POINT_DETECTION",e,t),{text:y.i18n.translate("xpack.ml.aiopsBreadcrumbs.selectDataViewLabel",{defaultMessage:"Select Data View"})}],pt=(e,t)=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_SELECT_INDEX),render:(e,t)=>Object(h.jsx)(jt,u()({},e,{nextStepPath:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_SELECT_TYPE),deps:t,mode:st.NEW_JOB})),breadcrumbs:ot(e,t)}),bt=(e,t)=>({id:"data_view_datavisualizer",path:Object(Ie.c)(ce.a.DATA_VISUALIZER_INDEX_SELECT),title:y.i18n.translate("xpack.ml.selectDataViewLabel",{defaultMessage:"Select Data View"}),render:(e,t)=>{const a=Object(h.jsx)(rt,{nextStepPath:Object(Ie.c)(ce.a.DATA_VISUALIZER_ESQL),title:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.datavisualizer.selector.useESQLButtonLabel",defaultMessage:"Use ES|QL"})});return Object(h.jsx)(jt,u()({},e,{nextStepPath:Object(Ie.c)(ce.a.DATA_VISUALIZER_INDEX_VIEWER),deps:t,mode:st.DATAVISUALIZER,extraButtons:a}))},breadcrumbs:ct(e,t)}),ft=(e,t)=>({id:"data_view_log_rate_analysis",path:Object(Ie.c)(ce.a.AIOPS_LOG_RATE_ANALYSIS_INDEX_SELECT),title:y.i18n.translate("xpack.ml.selectDataViewLabel",{defaultMessage:"Select Data View"}),render:(e,t)=>Object(h.jsx)(jt,u()({},e,{nextStepPath:Object(Ie.c)(ce.a.AIOPS_LOG_RATE_ANALYSIS),deps:t,mode:st.DATAVISUALIZER})),breadcrumbs:dt(e,t)}),ht=()=>({path:Object(Ie.c)(ce.a.AIOPS_EXPLAIN_LOG_RATE_SPIKES_INDEX_SELECT),render:()=>Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.AIOPS_LOG_RATE_ANALYSIS_INDEX_SELECT)}),breadcrumbs:[]}),gt=(e,t)=>({id:"data_view_log_categorization",path:Object(Ie.c)(ce.a.AIOPS_LOG_CATEGORIZATION_INDEX_SELECT),title:y.i18n.translate("xpack.ml.selectDataViewLabel",{defaultMessage:"Select Data View"}),render:(e,t)=>Object(h.jsx)(jt,u()({},e,{nextStepPath:Object(Ie.c)(ce.a.AIOPS_LOG_CATEGORIZATION),deps:t,mode:st.DATAVISUALIZER})),breadcrumbs:ut(e,t)}),xt=(e,t)=>({id:"data_view_change_point_detection",path:Object(Ie.c)(ce.a.AIOPS_CHANGE_POINT_DETECTION_INDEX_SELECT),title:y.i18n.translate("xpack.ml.selectDataViewLabel",{defaultMessage:"Select Data View"}),render:(e,t)=>Object(h.jsx)(jt,u()({},e,{nextStepPath:Object(Ie.c)(ce.a.AIOPS_CHANGE_POINT_DETECTION),deps:t,mode:st.DATAVISUALIZER})),breadcrumbs:mt(e,t)}),jt=({nextStepPath:e,mode:t,extraButtons:a})=>{const{services:{http:{basePath:i},application:{navigateToUrl:n},data:{dataViews:r}}}=Object(Ne.d)(),s={...et(),preConfiguredJobRedirect:()=>Object(nt.preConfiguredJobRedirect)(r,i.get(),n)},{context:l}=Ve(t===st.NEW_JOB?"full":"basic",t===st.NEW_JOB?["canCreateJob"]:[],t===st.NEW_JOB?s:{});return Object(h.jsx)(Ie.b,{context:l},Object(h.jsx)(lt,{nextStepPath:e,extraButtons:a}))};var vt=a(122);const Ot=Object(He.a)((async()=>({default:(await a.e(88).then(a.bind(null,869))).Page}))),yt=(e,t)=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_SELECT_TYPE),render:()=>Object(h.jsx)(_t,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.selectJobType",{defaultMessage:"Create job"}),href:""}]}),_t=()=>{const{context:e}=Ve("full",["canGetJobs"],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(vt.a,null,Object(h.jsx)(Ot,null)))},St=()=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB),render:()=>Object(h.jsx)(Et,null),breadcrumbs:[]}),Et=()=>Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_SELECT_INDEX)});var wt=a(19),At=a(158),Tt=a(125),Ct=a(73),kt=a(166),Mt=a(215),It=a(144);const Lt="anomaly-detector";function Rt(e,t,a,i,n){return new Promise((async(r,s)=>{try{const l=n===Lt?It.b:Mt.a;if(void 0!==e){const t=await a.get(e);await l.initializeFromDataVIew(t),r(l.newJobCaps)}else if(void 0!==t){const{dataView:e}=await Object(kt.b)({savedSearchService:i,dataViewsService:a})(t);if(null===e)return console.error("Cannot retrieve data view from saved search"),void s();await l.initializeFromDataVIew(e),r(l.newJobCaps)}else s()}catch(e){s(e)}}))}var Dt=a(34);const Ft=Object(He.a)((async()=>({default:(await Promise.all([a.e(6),a.e(12),a.e(13),a.e(47)]).then(a.bind(null,857))).Page}))),Nt=(e,t)=>[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("CREATE_JOB_BREADCRUMB",e,t)],Bt=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.singleMetricLabel",{defaultMessage:"Single metric"}),href:""}],Pt=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.multiMetricLabel",{defaultMessage:"Multi-metric"}),href:""}],$t=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.populationLabel",{defaultMessage:"Population"}),href:""}],Vt=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.advancedConfigurationLabel",{defaultMessage:"Advanced configuration"}),href:""}],Ut=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.categorizationLabel",{defaultMessage:"Categorization"}),href:""}],zt=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.rareLabel",{defaultMessage:"Rare"}),href:""}],Jt=(e,t)=>[...Nt(e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.geoLabel",{defaultMessage:"Geo"}),href:""}],Gt=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_SINGLE_METRIC),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.SINGLE_METRIC,deps:t})),breadcrumbs:Bt(e,t)}),Wt=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_MULTI_METRIC),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.MULTI_METRIC,deps:t})),breadcrumbs:Pt(e,t)}),Yt=()=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_CONVERT_TO_MULTI_METRIC),render:e=>Object(h.jsx)(l.Redirect,{to:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_MULTI_METRIC,e.location.search)}),breadcrumbs:[]}),qt=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_POPULATION),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.POPULATION,deps:t})),breadcrumbs:$t(e,t)}),Ht=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_ADVANCED),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.ADVANCED,deps:t})),breadcrumbs:Vt(e,t)}),Xt=()=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_CONVERT_TO_ADVANCED),render:e=>Object(h.jsx)(l.Redirect,{to:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_ADVANCED,e.location.search)}),breadcrumbs:[]}),Qt=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_CATEGORIZATION),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.CATEGORIZATION,deps:t})),breadcrumbs:Ut(e,t)}),Zt=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_RARE),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.RARE,deps:t})),breadcrumbs:zt(e,t)}),Kt=(e,t)=>({path:Object(Ie.c)($e.b.ANOMALY_DETECTION_CREATE_JOB_GEO),render:(e,t)=>Object(h.jsx)(ea,u()({},e,{jobType:Tt.f.GEO,deps:t})),breadcrumbs:Jt(e,t)}),ea=({location:e,jobType:t})=>{const a=Object(Dt.a)($e.b.ANOMALY_DETECTION_JOBS_MANAGE),{index:i,savedSearchId:n}=Object(wt.parse)(e.search,{sort:!1}),{services:{data:{dataViews:r},savedSearch:s,mlServices:{mlApiServices:l}}}=Object(Ne.d)(),{context:o,results:c}=Ve("full",["canGetJobs","canCreateJob"],{...et(),privileges:()=>Object(De.checkCreateJobsCapabilitiesResolver)(a),jobCaps:()=>Rt(i,n,r,s,Lt),existingJobsAndGroups:()=>Object(Ct.mlJobServiceFactory)(void 0,l).getJobAndGroupIds()});return Object(h.jsx)(Ie.b,{context:o},Object(h.jsx)(At.a,null,c?Object(h.jsx)(Ft,{jobType:t,existingJobsAndGroups:c.existingJobsAndGroups}):null))};var ta=a(418);const aa=Object(He.a)((async()=>({default:(await a.e(59).then(a.bind(null,870))).Page}))),ia=(e,t)=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_RECOGNIZER),render:(e,t)=>Object(h.jsx)(ra,u()({},e,{deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("CREATE_JOB_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.jobsBreadcrumbs.selectIndexOrSearchLabelRecognize",{defaultMessage:"Recognized index"}),href:""}]}),na=()=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_MODULES_VIEW_OR_CREATE),render:(e,t)=>Object(h.jsx)(sa,u()({},e,{deps:t})),breadcrumbs:[]}),ra=({location:e})=>{const{id:t}=Object(wt.parse)(e.search,{sort:!1}),{services:{mlServices:{mlApiServices:a}}}=Object(Ne.d)(),{context:i,results:n}=Ve("full",["canGetJobs"],{...et(),existingJobsAndGroups:()=>Object(Ct.mlJobServiceFactory)(void 0,a).getJobAndGroupIds()});return Object(h.jsx)(Ie.b,{context:i},Object(h.jsx)(vt.a,null,n?Object(h.jsx)(aa,{moduleId:t,existingGroupIds:n.existingJobsAndGroups.groupIds}):null))},sa=({location:e})=>{const{services:{notifications:{toasts:t},mlServices:{mlApiServices:a}}}=Object(Ne.d)(),{id:i,index:n}=Object(wt.parse)(e.search,{sort:!1}),{createLinkWithUserDefaults:r}=Object(ta.a)(),s=Object(Ne.h)();return Ve("full",["canCreateJob"],{checkViewOrCreateJobs:function(){return new Promise(((e,l)=>{a.dataRecognizerModuleJobsExist({moduleId:i}).then((async e=>{if(!0===e.jobsExist){const t=r("explorer",e.jobs);await s(t),l()}else await s(`/jobs/new_job/recognize?id=${i}&index=${n}`),l()})).catch((async e=>{t.addError(e,{title:y.i18n.translate("xpack.ml.newJob.recognize.moduleCheckJobsExistWarningTitle",{defaultMessage:"Error checking module {moduleId}",values:{moduleId:i}}),toastMessage:y.i18n.translate("xpack.ml.newJob.recognize.moduleCheckJobsExistWarningDescription",{defaultMessage:"An error occurred checking whether the jobs in the module have been created. Search the list for matching jobs or create new jobs."})}),await s("/jobs"),l()}))}))}}),null};var la=a(272);const oa=()=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_FROM_LENS),render:(e,t)=>Object(h.jsx)(ca,u()({},e,{deps:t})),breadcrumbs:[]}),ca=({location:e})=>{const{vis:t,from:a,to:i,query:n,filters:r,layerIndex:s}=Object(wt.parse)(e.search,{sort:!1}),{services:{data:{dataViews:o,query:{timefilter:{timefilter:c}}},dashboard:d,uiSettings:u,mlServices:{mlApiServices:m},lens:p}}=Object(Ne.d)(),{context:b}=Ve("full",["canCreateJob"],{redirect:()=>Object(la.resolver)({dataViews:o,lens:p,mlApiServices:m,timeFilter:c,kibanaConfig:u,dashboardService:d},t,a,i,n,r,s)});return Object(h.jsx)(Ie.b,{context:b},Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB)}))};var da=a(273);const ua=()=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_FROM_MAP),render:(e,t)=>Object(h.jsx)(ma,u()({},e,{deps:t})),breadcrumbs:[]}),ma=({location:e})=>{const{dashboard:t,dataViewId:a,embeddable:i,geoField:n,splitField:r,from:s,to:o,layer:c}=Object(wt.parse)(e.search,{sort:!1}),{services:{data:{dataViews:d,query:{timefilter:{timefilter:u}}},dashboard:m,uiSettings:p,mlServices:{mlApiServices:b}}}=Object(Ne.d)(),{context:f}=Ve("full",["canCreateJob"],{redirect:()=>Object(da.resolver)({dataViews:d,mlApiServices:b,timeFilter:u,kibanaConfig:p,dashboardService:m},t,a,i,n,r,s,o,c)});return Object(h.jsx)(Ie.b,{context:f},Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB)}))};var pa=a(397);const ba=()=>({path:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB_FROM_PATTERN_ANALYSIS),render:(e,t)=>Object(h.jsx)(fa,u()({},e,{deps:t})),breadcrumbs:[]}),fa=({location:e})=>{const{categorizationType:t,dataViewId:a,field:i,partitionField:n,stopOnWarn:r,from:s,to:o,query:c}=Object(wt.parse)(e.search,{sort:!1}),{services:{data:d,dashboard:u,uiSettings:m,mlServices:{mlApiServices:p}}}=Object(Ne.d)(),{context:b}=Ve("full",["canCreateJob"],{redirect:()=>Object(pa.c)({mlApiServices:p,timeFilter:d.query.timefilter.timefilter,kibanaConfig:m,dashboardService:u,data:d},t,a,i,n,r,s,o,c)});return Object(h.jsx)(Ie.b,{context:b},Object(h.jsx)(l.Redirect,{to:Object(Ie.c)(ce.a.ANOMALY_DETECTION_CREATE_JOB)}))},ha=Object(He.a)((async()=>({default:(await a.e(100).then(a.bind(null,890))).DatavisualizerSelector}))),ga=(e,t)=>({id:"datavisualizer",path:Object(Ie.c)(ce.a.DATA_VISUALIZER),title:y.i18n.translate("xpack.ml.dataVisualizer.docTitle",{defaultMessage:"Data Visualizer"}),render:()=>Object(h.jsx)(xa,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_VISUALIZER_BREADCRUMB")]}),xa=()=>{const{context:e}=Ve("basic",["canFindFileStructure"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(ha,null))};var ja=a(99),va=a(100),Oa=a(71),ya=a(172),_a=a.n(ya),Sa=a(251);const Ea=y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.createIndex.noMatch",{defaultMessage:"Name must match one or more data streams, indices, or index aliases."});function wa({id:e,label:t,dataViewEditorService:a,indexPattern:i,setIndexPattern:r,onError:s,helpText:l}){_a()((()=>{a.setIndexPattern(i)}),250,[i]);const o=qe()(a.matchedIndices$,Aa),c=""===i||""!==i&&0===o.exactMatchedIndices.length?o.allIndices:o.exactMatchedIndices,[d,u]=Object(n.useState)(!1),[m,p]=Object(n.useState)({pageIndex:0,pageSize:10,sortField:"name",sortDirection:"asc"}),{onTableChange:b,pagination:f}=Object(Sa.a)(c.length,m,p),g=Object(n.useMemo)((()=>c.slice(f.pageIndex*f.pageSize,(f.pageIndex+1)*f.pageSize)),[f.pageSize,f.pageIndex,c]),x=[{field:"name",name:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.tableColShard",{defaultMessage:"Matched indices"}),sortable:!1,truncateText:!1}],j=Object(n.useMemo)((()=>""===i?y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.error.noEmptyIndexPattern",{defaultMessage:"Index pattern must not be empty."}):""!==i&&0===o.exactMatchedIndices.length?Ea:void 0),[i,o.exactMatchedIndices.length]);Object(n.useEffect)((()=>{s&&s(j)}),[s,j]);const{euiTheme:v}=Object(O.useEuiTheme)();return Object(h.jsx)(O.EuiFlexGrid,{columns:2,gutterSize:"none"},Object(h.jsx)(O.EuiFlexItem,{css:Object(h.css)({paddingLeft:v.size.base,paddingRight:v.size.base,borderRight:v.border.thin},"","")},Object(h.jsx)(O.EuiFormRow,{label:t,error:j,isInvalid:void 0!==j,fullWidth:!0,helpText:l,"data-test-subj":`mlDataDriftIndexPatternFormRow-${null!=e?e:""}`},Object(h.jsx)(O.EuiFieldText,{value:i,onChange:e=>{let t=e.target.value;1===t.length&&!d&&Ta(t)?(t+="*",u(!0),setTimeout((()=>e.target.setSelectionRange(1,1)))):["","*"].includes(t)&&d&&(t="",u(!1)),r(t)},fullWidth:!0,"data-test-subj":`mlDataDriftIndexPatternTitleInput-${null!=e?e:""}`,placeholder:"example-pattern*"}))),Object(h.jsx)(O.EuiFlexItem,{css:Object(h.css)({paddingLeft:v.size.base,paddingRight:v.size.base},"","")},j===Ea?Object(h.jsx)(O.EuiCallOut,{color:"warning"},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.notMatchDetail",defaultMessage:"The index pattern you entered doesn't match any data streams, indices, or index aliases. You can match {strongIndices}.",values:{strongIndices:Object(h.jsx)("strong",null,Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.allIndicesLabel",defaultMessage:"{indicesLength, plural, one {# source} other {# sources} }",values:{indicesLength:o.allIndices.length}}))}})):null,Object(h.jsx)(O.EuiBasicTable,{items:g,columns:x,pagination:f,onChange:b,"data-test-subject":`mlDataDriftIndexPatternTable-${null!=e?e:""}`,rowProps:t=>({"data-test-subj":`mlDataDriftIndexPatternTableRow row-${e}`})})))}const Aa={allIndices:[],exactMatchedIndices:[],partialMatchedIndices:[],visibleIndices:[]},Ta=e=>!(!e||!/[a-z0-9]/i.test(e)||1!==e.length),Ca=(e,t)=>e===t?e:`${e},${t}`;function ka({referenceDataViewEditorService:e,comparisonDataViewEditorService:t,initialReferenceIndexPattern:a,initialComparisonIndexPattern:i}){const{services:{dataViewEditor:s,data:{dataViews:l}}}=Object(Ne.d)(),c=Object(Ne.g)(),d=null==s?void 0:s.userPermissions.editDataView(),[u,m]=Object(n.useState)([]),[p,b]=Object(n.useState)(""),[f,g]=Object(n.useState)(),[x,j]=Object(n.useState)(),[_,S]=Object(n.useState)(),[w,A]=Object(n.useState)(),T=Object(Oa.useToastNotificationService)(),C=Object(n.useMemo)((()=>Object(v.combineLatest)([null==e?void 0:e.timestampFieldOptions$,null==t?void 0:t.timestampFieldOptions$]).pipe(Object(v.map)((([e,t])=>Object(o.intersectionBy)(e,t,(e=>e.fieldName)).map((({display:e,fieldName:t})=>({label:e,value:t}))))))),[t,e]),k=qe()(C,[]),[M,I]=Object(n.useState)(null!=a?a:""),[L,R]=Object(n.useState)(null!=i?i:""),D=Object(Ne.h)(),F=Object(n.useRef)(new AbortController);Object(n.useEffect)((()=>{let e=!1;return!e&&Array.isArray(k)&&k.length>0&&0===u.length&&m([k[0]]),()=>{e=!0}}),[k,u]),Object(n.useEffect)((function(){let e=!1;return(async()=>{if(F.current.abort(),F.current=new AbortController,g(void 0),j(void 0),!e&&M&&L){const e=Ca(M,L),t=await l.find(e),a=Array.isArray(u)&&u.length>0&&""!==u[0].value?u[0].value:void 0;if(Array.isArray(t)&&t.length>0){const i=t.find((e=>e.timeFieldName===a));i?j(i.id):g(y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.hasDataViewWithDifferentTimeField",{defaultMessage:"Found a data view matching pattern ''{indexPattern}'' but with a different time field. Creating a new data view to analyze data drift.",values:{indexPattern:e}}))}}})(),()=>{var t;null===(t=F.current)||void 0===t||t.abort(),e=!0}}),[M,L,u,l]);const N=Object(o.debounce)((async(e=!1)=>{const t=Ca(M,L),a=Array.isArray(u)&&u.length>0?u[0].value:void 0;let i;try{var n;if(!x){const n=""===p?void 0===f?t:`${t}${a?"-"+a:""}`:p;i=d&&!1===e?await l.createAndSave({title:t,name:n,timeFieldName:a}):await l.create({title:t,name:n,timeFieldName:a})}const r=null!=x?x:null===(n=i)||void 0===n?void 0:n.id,s=await c.getUrl({page:$e.b.DATA_DRIFT,pageState:{index:r,reference:encodeURIComponent(M),comparison:encodeURIComponent(L),timeFieldName:a}});await D(s)}catch(e){T.displayErrorToast(e)}}),400),B=void 0!==_||void 0!==w||!L||!M,P=[{title:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.enterReferenceDataTitle",{defaultMessage:"Enter index pattern for reference data"}),children:Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(wa,{id:"reference",label:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.referenceData",defaultMessage:"Index pattern"}),helpText:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.requireSameTimeFieldHelpText",defaultMessage:"To view the changes in the data over time, reference and comparison data can have different index patterns, but they must have the same time field."}),dataViewEditorService:e,indexPattern:M,setIndexPattern:I,onError:S}))},{title:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.enterComparisonDataTitle",{defaultMessage:"Enter index pattern for comparison data"}),children:Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(wa,{id:"comparison",label:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.comparisonDataIndexPatternHelp",defaultMessage:"Index pattern"}),helpText:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.requireSameTimeFieldHelpText",defaultMessage:"To view the changes in the data over time, reference and comparison data can have different index patterns, but they must have the same time field."}),dataViewEditorService:t,indexPattern:L,setIndexPattern:R,onError:A}))},{title:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.additionalSettingsTitle",{defaultMessage:"Additional settings"}),children:Object(h.jsx)(O.EuiFlexGroup,{direction:"column"},k.length>0?Object(h.jsx)(O.EuiFormRow,{label:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.timestampFieldLabel",{defaultMessage:"Timestamp field"}),fullWidth:!0,color:"disabled"},Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(O.EuiComboBox,{placeholder:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.timestampFieldOptions",{defaultMessage:"Select an optional timestamp field"}),singleSelection:{asPlainText:!0},options:k,selectedOptions:u,onChange:e=>{0!==e.length&&m(e)},isClearable:!1,isDisabled:""===L&&""===M,"data-test-subj":"mlDataDriftTimestampField","aria-label":y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.timestampSelectAriaLabel",{defaultMessage:"Timestamp field"}),fullWidth:!0}))):null,x?null:Object(h.jsx)(O.EuiFormRow,{label:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.dataViewName",{defaultMessage:"Data view name"}),helpText:y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.dataViewHelpText",{defaultMessage:"Optional data view name."})+(M&&L?` ${y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.defaultDataViewHelpText",{defaultMessage:"Default to {fallbackDataViewName} if not set.",values:{fallbackDataViewName:Ca(M,L)}})}`:""),fullWidth:!0},Object(h.jsx)(O.EuiFieldText,{value:p,onChange:e=>{b(e.target.value)},fullWidth:!0,"data-test-subj":"dataDriftDataViewNameInput"})),f?Object(h.jsx)(O.EuiCallOut,{color:"primary"},f):null,Object(h.jsx)(O.EuiFormRow,{id:"analyzeDriftData"},Object(h.jsx)(O.EuiFlexGroup,null,d&&void 0===x?Object(h.jsx)(O.EuiFlexItem,null,Object(h.jsx)(O.EuiButton,{color:"primary",disabled:B,onClick:N.bind(null,!0),iconType:"visTagCloud","data-test-subj":"analyzeDataDriftWithoutSavingButton","aria-label":y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.analyzeDataDriftWithoutSavingLabel",{defaultMessage:"Analyze data drift without saving"})},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.analyzeDataDriftWithoutSavingLabel",defaultMessage:"Analyze data drift without saving"}))):null,Object(h.jsx)(O.EuiFlexItem,null,Object(h.jsx)(O.EuiButton,{disabled:B,fill:!0,onClick:N.bind(null,!1),iconType:"visTagCloud","data-test-subj":"analyzeDataDriftButton","aria-label":y.i18n.translate("xpack.ml.dataDrift.indexPatternsEditor.analyzeDataDriftLabel",{defaultMessage:"Analyze data drift"})},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.indexPatternsEditor.analyzeDataDriftLabel",defaultMessage:"Analyze data drift"}))))))}];return Object(h.jsx)(O.EuiSteps,{steps:P})}var Ma=a(134);const Ia=()=>{const e=Object(Ne.h)(),{contentManagement:t,uiSettings:a}=Object(Ne.d)().services,{services:{dataViewEditor:i}}=Object(Ne.d)(),n=null==i?void 0:i.userPermissions.editDataView();return Object(h.jsx)("div",{"data-test-subj":"mlPageSourceSelection"},Object(h.jsx)(O.EuiPageBody,{restrictWidth:1200},Object(h.jsx)(Ma.a,null,Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.newJob.wizard.selectDataViewOrSavedSearch",defaultMessage:"Select data view or saved search"})),Object(h.jsx)(O.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(h.jsx)(ja.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:(t,a)=>{e(`/data_drift?${"index-pattern"===a?"index":"savedSearchId"}=${encodeURIComponent(t)}`)},showFilter:!0,noItemsMessage:y.i18n.translate("xpack.ml.newJob.wizard.searchSelection.notFoundLabel",{defaultMessage:"No matching data views or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:()=>"search",name:y.i18n.translate("xpack.ml.newJob.wizard.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:()=>"indexPatternApp",name:y.i18n.translate("xpack.ml.newJob.wizard.searchSelection.savedObjectType.dataView",{defaultMessage:"Data view"})}],fixedPageSize:20,services:{contentClient:t.client,uiSettings:a}},Object(h.jsx)(O.EuiButton,{size:"m",fill:!0,iconType:"plusInCircleFilled",onClick:()=>e(Object(Ie.c)($e.b.DATA_DRIFT_CUSTOM)),disabled:!n,"data-test-subj":"dataDriftCreateDataViewButton"},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.createDataViewButton",defaultMessage:"Create a data view"}))))))},La=()=>{const{reference:e,comparison:t}=Object(wt.parse)(location.search,{sort:!1}),[a,i]=Object(n.useState)(),{services:{dataViewEditor:r,http:s,data:{dataViews:l}}}=Object(Ne.d)(),{dataViewEditorServiceFactory:o}=r,c=Object(n.useMemo)((()=>t?t.replaceAll("'",""):""),[t]),d=Object(n.useMemo)((()=>e?e.replaceAll("'",""):""),[e]);return Object(n.useEffect)((()=>{let e=!1;return(async()=>{if(s&&l&&o){const{DataViewEditorService:t}=await o(),a=new t({services:{http:s,dataViews:l},initialValues:{name:"",type:va.INDEX_PATTERN_TYPE.DEFAULT,indexPattern:d},requireTimestampField:!1}),n=new t({services:{http:s,dataViews:l},initialValues:{name:"",type:va.INDEX_PATTERN_TYPE.DEFAULT,indexPattern:c},requireTimestampField:!1});e||i({referenceDataViewEditorService:a,comparisonDataViewEditorService:n})}})(),()=>{e=!0}}),[o,s,l,d,c]),Object(h.jsx)("div",{"data-test-subj":"mlPageSourceSelection"},Object(h.jsx)(O.EuiPageBody,{restrictWidth:1200},Object(h.jsx)(Ma.a,null,Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.dataDrift.createDataDriftDataViewTitle",defaultMessage:"Create data view and analyze data drift"})),Object(h.jsx)(O.EuiPageSection,null,a?Object(h.jsx)(ka,{initialComparisonIndexPattern:c,initialReferenceIndexPattern:d,referenceDataViewEditorService:a.referenceDataViewEditorService,comparisonDataViewEditorService:a.comparisonDataViewEditorService}):null)))},Ra=(e,t)=>({id:"data_drift",path:Object(Ie.c)($e.b.DATA_DRIFT_INDEX_SELECT),title:y.i18n.translate("xpack.ml.dataVisualizer.dataDrift.docTitle",{defaultMessage:"Data Drift"}),render:(e,t)=>Object(h.jsx)(Fa,u()({},e,{deps:t,mode:$e.b.DATA_DRIFT_INDEX_SELECT})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),{text:xe.text,...e?{href:`${t}/app/ml${Te.href}`,onClick:ke(Te.href,e)}:{}},{text:y.i18n.translate("xpack.ml.trainedModelsBreadcrumbs.dataDriftLabel",{defaultMessage:"Data Drift"})}],"data-test-subj":"mlPageDataDrift"}),Da=(e,t)=>({id:"data_drift",path:Object(Ie.c)($e.b.DATA_DRIFT_CUSTOM),title:y.i18n.translate("xpack.ml.dataVisualizer.dataDriftCustomIndexPatterns.docTitle",{defaultMessage:"Data Drift Custom Index Patterns"}),render:(e,t)=>Object(h.jsx)(Fa,u()({},e,{deps:t,mode:$e.b.DATA_DRIFT_CUSTOM})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),{text:xe.text,...e?{href:`${t}/app/ml${Te.href}`,onClick:ke(Te.href,e)}:{}},{text:y.i18n.translate("xpack.ml.trainedModelsBreadcrumbs.dataDriftLabel",{defaultMessage:"Data Drift"})}],"data-test-subj":"mlPageDataDriftCustomIndexPatterns"}),Fa=({mode:e})=>{const{context:t}=Ve("full",[],et());return Object(h.jsx)(Ie.b,{context:t},Object(h.jsx)(vt.a,null,e===$e.b.DATA_DRIFT_INDEX_SELECT?Object(h.jsx)(Ia,null):Object(h.jsx)(La,null)))},Na=Object(He.a)((async()=>({default:(await a.e(84).then(a.bind(null,836))).IndexDataVisualizerPage}))),Ba=(e,t)=>({id:"data_view_datavisualizer",path:Object(Ie.c)(ce.a.DATA_VISUALIZER_INDEX_VIEWER),title:y.i18n.translate("xpack.ml.dataVisualizer.dataView.docTitle",{defaultMessage:"Index Data Visualizer"}),render:()=>Object(h.jsx)($a,{esql:!1}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_VISUALIZER_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.dataViewLabel",{defaultMessage:"Data View"})}]}),Pa=(e,t)=>({id:"data_view_datavisualizer_esql",path:Object(Ie.c)(ce.a.DATA_VISUALIZER_ESQL),title:y.i18n.translate("xpack.ml.dataVisualizer.esql.docTitle",{defaultMessage:"Index Data Visualizer (ES|QL)"}),render:()=>Object(h.jsx)($a,{esql:!0}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_VISUALIZER_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.esqlLabel",{defaultMessage:"Index Data Visualizer (ES|QL)"})}]}),$a=({esql:e})=>{const{context:t}=Ve("basic",[]);return Object(h.jsx)(Ie.b,{context:t},Object(h.jsx)(vt.a,null,Object(h.jsx)(Na,{esql:e})))},Va=Object(He.a)((async()=>({default:(await a.e(99).then(a.bind(null,891))).FileDataVisualizerPage}))),Ua=(e,t)=>({id:"filedatavisualizer",path:Object(Ie.c)(ce.a.DATA_VISUALIZER_FILE),title:y.i18n.translate("xpack.ml.dataVisualizer.file.docTitle",{defaultMessage:"File Data Visualizer"}),render:()=>Object(h.jsx)(za,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_VISUALIZER_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataVisualizer.fileBasedLabel",{defaultMessage:"File"})}]}),za=()=>{const{context:e}=Ve("basic",["canFindFileStructure"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(Va,null))};var Ja=a(813);const Ga=Object(He.a)((async()=>({default:(await Promise.resolve().then(a.bind(null,813))).Settings}))),Wa=(e,t)=>({id:"settings",path:Object(Ie.c)(ce.a.SETTINGS),title:y.i18n.translate("xpack.ml.settings.docTitle",{defaultMessage:"Settings"}),render:()=>Object(h.jsx)(Ya,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB")]}),Ya=()=>{const{context:e}=Ve("full",["canGetJobs"],{getMlNodeCount:Ke.b});Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1});const[t,a,i,n]=Object(De.usePermissionCheck)(["canGetFilters","canCreateFilter","canGetCalendars","canCreateCalendar"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(Ja.AnomalyDetectionSettingsContext.Provider,{value:{canGetFilters:t,canCreateFilter:a,canGetCalendars:i,canCreateCalendar:n}},Object(h.jsx)(Ga,null)))},qa=Object(He.a)((async()=>({default:(await a.e(29).then(a.bind(null,864))).CalendarsList}))),Ha=(e,t)=>({path:Object(Ie.c)(ce.a.CALENDARS_MANAGE),title:y.i18n.translate("xpack.ml.settings.calendarList.docTitle",{defaultMessage:"Calendars"}),render:(e,t)=>Object(h.jsx)(Xa,u()({},e,{deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB",e,t),Me("CALENDAR_MANAGEMENT_BREADCRUMB")]}),Xa=()=>{const{context:e}=Ve("full",["canGetCalendars"],{getMlNodeCount:Ke.b});Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1});const[t,a]=Object(De.usePermissionCheck)(["canCreateCalendar","canDeleteCalendar"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(qa,{canCreateCalendar:t,canDeleteCalendar:a}))};var Qa=function(e){return e[e.NEW=0]="NEW",e[e.EDIT=1]="EDIT",e}(Qa||{});const Za=Object(He.a)((async()=>({default:(await a.e(29).then(a.bind(null,864))).NewCalendar}))),Ka=(e,t)=>({path:Object(Ie.c)($e.b.CALENDARS_NEW),title:y.i18n.translate("xpack.ml.settings.createCalendar.docTitle",{defaultMessage:"Create Calendar"}),render:(e,t)=>Object(h.jsx)(ti,u()({},e,{deps:t,mode:Qa.NEW})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB",e,t),Me("CALENDAR_MANAGEMENT_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.settings.breadcrumbs.calendarManagement.createLabel",{defaultMessage:"Create"})}]}),ei=(e,t)=>({path:Object(Ie.c)($e.b.CALENDARS_EDIT,"/:calendarId"),title:y.i18n.translate("xpack.ml.settings.editCalendar.docTitle",{defaultMessage:"Edit Calendar"}),render:(e,t)=>Object(h.jsx)(ti,u()({},e,{deps:t,mode:Qa.EDIT})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB",e,t),Me("CALENDAR_MANAGEMENT_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.settings.breadcrumbs.calendarManagement.editLabel",{defaultMessage:"Edit"})}]}),ti=({location:e,mode:t})=>{let a;if(t===Qa.EDIT){const t=e.pathname.match(/.+\/(.+)$/);a=t&&t.length>1?t[1]:void 0}const{context:i}=Ve("full",["canGetJobs"],{getMlNodeCount:ue.a});Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1});const[n,r]=Object(De.usePermissionCheck)(["canCreateCalendar","canDeleteCalendar"]);return Object(h.jsx)(Ie.b,{context:i},Object(h.jsx)(Za,{calendarId:a,canCreateCalendar:n,canDeleteCalendar:r}))},ai=Object(He.a)((async()=>({default:(await a.e(35).then(a.bind(null,862))).FilterLists}))),ii=(e,t)=>({path:Object(Ie.c)(ce.a.FILTER_LISTS_MANAGE),title:y.i18n.translate("xpack.ml.settings.filterList.docTitle",{defaultMessage:"Filters"}),render:()=>Object(h.jsx)(ni,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB",e,t),Me("FILTER_LISTS_BREADCRUMB")]}),ni=()=>{const{context:e}=Ve("full",["canGetFilters"],{getMlNodeCount:Ke.b});Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1});const[t,a]=Object(De.usePermissionCheck)(["canCreateFilter","canDeleteFilter"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(ai,{canCreateFilter:t,canDeleteFilter:a}))};var ri=function(e){return e[e.NEW=0]="NEW",e[e.EDIT=1]="EDIT",e}(ri||{});const si=Object(He.a)((async()=>({default:(await a.e(35).then(a.bind(null,862))).EditFilterList}))),li=(e,t)=>({path:Object(Ie.c)($e.b.FILTER_LISTS_NEW),title:y.i18n.translate("xpack.ml.settings.createFilter.docTitle",{defaultMessage:"Create Filter"}),render:(e,t)=>Object(h.jsx)(ci,u()({},e,{mode:ri.NEW,deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB",e,t),Me("FILTER_LISTS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.settings.breadcrumbs.filterLists.createLabel",{defaultMessage:"Create"})}]}),oi=(e,t)=>({path:Object(Ie.c)($e.b.FILTER_LISTS_EDIT,"/:filterId"),title:y.i18n.translate("xpack.ml.settings.editFilter.docTitle",{defaultMessage:"Edit Filter"}),render:(e,t)=>Object(h.jsx)(ci,u()({},e,{mode:ri.EDIT,deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("SETTINGS_BREADCRUMB",e,t),Me("FILTER_LISTS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.settings.breadcrumbs.filterLists.editLabel",{defaultMessage:"Edit"})}]}),ci=({location:e,mode:t})=>{let a;if(t===ri.EDIT){const t=e.pathname.match(/.+\/(.+)$/);a=t&&t.length>1?t[1]:void 0}const{context:i}=Ve("full",["canGetFilters","canCreateFilter"],{getMlNodeCount:Ke.b});Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1});const[n,r]=Object(De.usePermissionCheck)(["canCreateFilter","canDeleteFilter"]);return Object(h.jsx)(Ie.b,{context:i},Object(h.jsx)(si,{filterId:a,canCreateFilter:n,canDeleteFilter:r}))},di=Object(He.a)((async()=>({default:(await Promise.all([a.e(4),a.e(6),a.e(7),a.e(9),a.e(15),a.e(20),a.e(28),a.e(72)]).then(a.bind(null,873))).Page}))),ui=(e,t)=>({id:"data_frame_analytics",path:Object(Ie.c)(ce.a.DATA_FRAME_ANALYTICS_JOBS_MANAGE),title:y.i18n.translate("xpack.ml.dataFrameAnalytics.jobs.docTitle",{defaultMessage:"Data Frame Analytics Jobs"}),render:()=>Object(h.jsx)(mi,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_FRAME_ANALYTICS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.jobsManagementLabel",{defaultMessage:"Jobs"})}],"data-test-subj":"mlPageDataFrameAnalytics",enableDatePicker:!0}),mi=()=>{const{context:e}=Ve("full",["canGetDataFrameAnalytics"],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(di,null))},pi=Object(He.a)((async()=>({default:(await Promise.all([a.e(4),a.e(27),a.e(28),a.e(44)]).then(a.bind(null,861))).Page}))),bi=(e,t)=>({path:Object(Ie.c)(ce.a.DATA_FRAME_ANALYTICS_EXPLORATION),render:()=>Object(h.jsx)(fi,null),title:y.i18n.translate("xpack.ml.dataFrameAnalytics.exploration.docTitle",{defaultMessage:"Results Explorer"}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_FRAME_ANALYTICS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.dataFrameExplorationLabel",{defaultMessage:"Results Explorer"})}]}),fi=()=>{const{context:e}=Ve("full",["canGetDataFrameAnalytics"],et()),[t]=Object(ae.d)("_g"),a=null==t?void 0:t.ml.jobId,i=null==t?void 0:t.ml.analysisType;return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(pi,{jobId:a,analysisType:i}))},hi=Object(He.a)((async()=>({default:(await Promise.all([a.e(4),a.e(6),a.e(7),a.e(13),a.e(27),a.e(60)]).then(a.bind(null,859))).Page}))),gi=(e,t)=>({path:Object(Ie.c)(ce.a.DATA_FRAME_ANALYTICS_CREATE_JOB),render:(e,t)=>Object(h.jsx)(xi,u()({},e,{deps:t})),title:y.i18n.translate("xpack.ml.dataFrameAnalytics.createJob.docTitle",{defaultMessage:"Create Job"}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_FRAME_ANALYTICS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.dataFrameCreationLabel",{defaultMessage:"Create Job"})}]}),xi=({location:e})=>{const{index:t,jobId:a,savedSearchId:i}=Object(wt.parse)(e.search,{sort:!1}),{services:{data:{dataViews:n},savedSearch:r}}=Object(Ne.d)(),{context:s}=Ve("full",["canGetDataFrameAnalytics","canCreateDataFrameAnalytics"],{...et(),analyticsFields:()=>Rt(t,i,n,r,"data-frame-analytics")});return Object(h.jsx)(Ie.b,{context:s},Object(h.jsx)(vt.a,null,Object(h.jsx)(hi,{jobId:a})))},ji=Object(He.a)((async()=>({default:(await Promise.all([a.e(4),a.e(7),a.e(9),a.e(15),a.e(56)]).then(a.bind(null,841))).Page}))),vi=(e,t)=>({path:Object(Ie.c)(ce.a.DATA_FRAME_ANALYTICS_MAP),render:()=>Object(h.jsx)(Oi,null),title:y.i18n.translate("xpack.ml.dataFrameAnalytics.analyticsMap.docTitle",{defaultMessage:"Analytics Map"}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_FRAME_ANALYTICS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.analyticsMapLabel",{defaultMessage:"Analytics Map"})}],enableDatePicker:!0,"data-test-subj":"mlPageAnalyticsMap"}),Oi=()=>{const{context:e}=Ve("full",["canGetDataFrameAnalytics"],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(ji,null))},yi=Object(He.a)((async()=>({default:(await a.e(98).then(a.bind(null,883))).Page}))),_i=(e,t)=>({path:Object(Ie.c)(ce.a.DATA_FRAME_ANALYTICS_SOURCE_SELECTION),render:()=>Object(h.jsx)(Si,null),title:y.i18n.translate("xpack.ml.dataFrameAnalytics.sourceSelection.docTitle",{defaultMessage:"Source Selection"}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("DATA_FRAME_ANALYTICS_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.dataFrameAnalyticsBreadcrumbs.dataFrameSourceSelectionLabel",{defaultMessage:"Source Selection"})}]}),Si=()=>{const{context:e}=Ve("full",["canGetDataFrameAnalytics"],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(yi,null))},Ei=Object(He.a)((async()=>({default:(await a.e(92).then(a.bind(null,373))).LogRateAnalysisPage}))),wi=(e,t)=>({id:"log_rate_analysis",path:Object(Ie.c)(ce.a.AIOPS_LOG_RATE_ANALYSIS),title:y.i18n.translate("xpack.ml.aiops.logRateAnalysis.docTitle",{defaultMessage:"Log rate analysis"}),render:()=>Object(h.jsx)(Ci,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("AIOPS_BREADCRUMB_LOG_RATE_ANALYSIS",e,t),{text:y.i18n.translate("xpack.ml.aiopsBreadcrumbs.logRateAnalysisLabel",{defaultMessage:"Log rate analysis"})}]}),Ai=()=>({path:Object(Ie.c)(ce.a.AIOPS_EXPLAIN_LOG_RATE_SPIKES),render:()=>Object(h.jsx)(Ti,null),breadcrumbs:[]}),Ti=()=>{const e=Object(l.useLocation)();return Object(h.jsx)(l.Redirect,{to:{pathname:Object(Ie.c)(ce.a.AIOPS_LOG_RATE_ANALYSIS),search:`${e.search}`}})},Ci=()=>{const{context:e}=Ve("full",["canUseAiops"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(vt.a,null,Object(h.jsx)(Ei,null)))},ki=Object(He.a)((async()=>({default:(await a.e(91).then(a.bind(null,842))).LogCategorizationPage}))),Mi=(e,t)=>({id:"log_categorization",path:Object(Ie.c)(ce.a.AIOPS_LOG_CATEGORIZATION),title:y.i18n.translate("xpack.ml.aiops.logCategorization.docTitle",{defaultMessage:"Log Pattern Analysis"}),render:()=>Object(h.jsx)(Ii,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("AIOPS_BREADCRUMB_LOG_PATTERN_ANALYSIS",e,t),{text:y.i18n.translate("xpack.ml.aiops.logCategorization.docTitle",{defaultMessage:"Log Pattern Analysis"})}]}),Ii=()=>{const{context:e}=Ve("full",["canUseAiops"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(vt.a,null,Object(h.jsx)(ki,null)))},Li=Object(He.a)((async()=>({default:(await Promise.all([a.e(13),a.e(71)]).then(a.bind(null,892))).ChangePointDetectionPage}))),Ri=(e,t)=>({id:"change_point_detection",path:Object(Ie.c)(ce.a.AIOPS_CHANGE_POINT_DETECTION),title:y.i18n.translate("xpack.ml.aiops.changePointDetection.docTitle",{defaultMessage:"Change point detection"}),render:()=>Object(h.jsx)(Di,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("AIOPS_BREADCRUMB_CHANGE_POINT_DETECTION",e,t),{text:y.i18n.translate("xpack.ml.aiopsBreadcrumbs.changePointDetectionLabel",{defaultMessage:"Change point detection"})}],disabled:!1}),Di=()=>{const{context:e}=Ve("full",["canUseAiops"]);return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(vt.a,null,Object(h.jsx)(Li,null)))};var Fi=a(139);const Ni=Object(He.a)((async()=>({default:(await Promise.all([a.e(12),a.e(14),a.e(17),a.e(18),a.e(21),a.e(25),a.e(51)]).then(a.bind(null,865))).TimeSeriesExplorerUrlStateManager}))),Bi=(e,t)=>({id:"timeseriesexplorer",path:Object(Ie.c)(ce.a.SINGLE_METRIC_VIEWER),title:y.i18n.translate("xpack.ml.anomalyDetection.singleMetricViewerLabel",{defaultMessage:"Single Metric Viewer"}),render:(e,t)=>Object(h.jsx)(Pi,u()({},e,{deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.anomalyDetection.singleMetricViewerLabel",{defaultMessage:"Single Metric Viewer"})}],enableDatePicker:!0}),Pi=({deps:e})=>{const t=Object(Ne.c)(),a=Object(Ne.j)(),{context:i,results:r}=Ve("full",["canGetJobs"],{...et(),jobs:Ct.mlJobService.loadJobsWrapper,jobsWithTimeRange:()=>t.jobs.jobsWithTimerange(Object(Fi.f)())}),s=Object(n.useMemo)((()=>new Qe.a),[]);return Object(h.jsx)(Ie.b,{context:i},Object(h.jsx)(Ze.a.Provider,{value:s},r?Object(h.jsx)(Ni,{config:a,jobsWithTimeRange:r.jobsWithTimeRange.jobs}):null))};var $i=a(178);const Vi=Object(He.a)((async()=>({default:(await Promise.all([a.e(12),a.e(14),a.e(17),a.e(18),a.e(25),a.e(48)]).then(a.bind(null,866))).ExplorerUrlStateManager}))),Ui=(e,t)=>({id:"explorer",path:Object(Ie.c)(ce.a.ANOMALY_EXPLORER),title:y.i18n.translate("xpack.ml.anomalyDetection.anomalyExplorer.docTitle",{defaultMessage:"Anomaly Explorer"}),render:(e,t)=>Object(h.jsx)(zi,u()({},e,{deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("ANOMALY_DETECTION_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.anomalyDetection.anomalyExplorerLabel",{defaultMessage:"Anomaly Explorer"})}],enableDatePicker:!0,"data-test-subj":"mlPageAnomalyExplorer"}),zi=()=>{const{services:{mlServices:{mlApiServices:e}}}=Object(Ne.d)(),{context:t,results:a}=Ve("full",["canGetJobs"],{...et(),jobs:Ct.mlJobService.loadJobsWrapper,jobsWithTimeRange:()=>e.jobs.jobsWithTimerange(Object(Fi.f)())}),i=Object(n.useMemo)((()=>new Qe.a),[]);return Object(h.jsx)(Ie.b,{context:t},Object(h.jsx)(Ze.a.Provider,{value:i},Object(h.jsx)($i.a,null,a?Object(h.jsx)(Vi,{jobsWithTimeRange:a.jobsWithTimeRange.jobs}):null)))},Ji=Object(He.a)((async()=>({default:(await a.e(50).then(a.bind(null,858))).ModelsList}))),Gi=(e,t)=>({id:"trained_models",path:Object(Ie.c)(ce.a.TRAINED_MODELS_MANAGE),title:y.i18n.translate("xpack.ml.modelManagement.trainedModels.docTitle",{defaultMessage:"Trained Models"}),render:()=>Object(h.jsx)(Wi,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),Me("TRAINED_MODELS",e,t),{text:y.i18n.translate("xpack.ml.trainedModelsBreadcrumbs.trainedModelsLabel",{defaultMessage:"Trained Models"})}],enableDatePicker:!0,"data-test-subj":"mlPageModelManagement"}),Wi=()=>{const{context:e}=Ve("full",["canGetTrainedModels"],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(Ma.a,null,Object(h.jsx)(O.EuiFlexGroup,{responsive:!1,wrap:!1,alignItems:"center",gutterSize:"m"},Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.modelManagement.trainedModelsHeader",defaultMessage:"Trained Models"})))),Object(h.jsx)(Ji,null))},Yi=Object(He.a)((async()=>({default:(await a.e(82).then(a.bind(null,844))).DataDriftPage}))),qi=(e,t)=>({id:"data_drift",path:Object(Ie.c)(ce.a.DATA_DRIFT),title:y.i18n.translate("xpack.ml.dataVisualizer.dataDrift.docTitle",{defaultMessage:"Data Drift"}),render:(e,t)=>Object(h.jsx)(Hi,u()({},e,{deps:t})),breadcrumbs:[Me("ML_BREADCRUMB",e,t),{text:xe.text,...e?{href:`${t}/app/ml${Te.href}`,onClick:ke(Te.href,e)}:{}},{text:y.i18n.translate("xpack.ml.trainedModelsBreadcrumbs.dataDriftLabel",{defaultMessage:"Data Drift"})}],"data-test-subj":"mlPageDataDrift"}),Hi=()=>{const{context:e}=Ve("full",[],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(vt.a,null,Object(h.jsx)(Yi,null)))},Xi=r.a.lazy((()=>a.e(67).then(a.bind(null,878)))),Qi=(e,t)=>({id:"notifications",path:Object(Ie.c)(ce.a.NOTIFICATIONS),title:y.i18n.translate("xpack.ml.notifications.notificationsLabel",{defaultMessage:"Notifications"}),enableDatePicker:!0,render:()=>Object(h.jsx)(Zi,null),breadcrumbs:[Me("ML_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.overview.notificationsLabel",{defaultMessage:"Notifications"})}],"data-test-subj":"mlPageNotifications"}),Zi=()=>{const{context:e}=Ve("full",["canGetMlInfo"],{getMlNodeCount:ue.a,loadMlServerInfo:me.g});return Object(ne.c)({timeRangeSelector:!1,autoRefreshSelector:!1}),Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(n.Suspense,{fallback:null},Object(h.jsx)(Xi,null)))},Ki=Object(He.a)((async()=>({default:(await Promise.all([a.e(22),a.e(32),a.e(81)]).then(a.bind(null,889))).MemoryUsagePage}))),en=(e,t)=>({path:Object(Ie.c)(ce.a.MEMORY_USAGE),render:()=>Object(h.jsx)(tn,null),title:y.i18n.translate("xpack.ml.modelManagement.memoryUsage.docTitle",{defaultMessage:"Memory Usage"}),breadcrumbs:[Me("ML_BREADCRUMB",e,t),{text:y.i18n.translate("xpack.ml.trainedModelsBreadcrumbs.nodeOverviewLabel",{defaultMessage:"Memory Usage"})}],enableDatePicker:!0}),tn=()=>{const{context:e}=Ve("full",[],et());return Object(h.jsx)(Ie.b,{context:e},Object(h.jsx)(Ki,null))};var an=a(115);const nn=({path:e,children:t})=>Object(h.jsx)(an.TrackApplicationView,{viewId:e},t);var rn=a(21),sn=a(331),ln=a(29),on=a(45),cn=a(396),dn={name:"4zleql",styles:"display:block"};const un=()=>{var e,t;const{notificationsCounts:a,latestRequestedAt:i}=Object(cn.b)(),n=Object(on.b)(ln.FIELD_FORMAT_IDS.DATE),r=(null!==(e=null==a?void 0:a.error)&&void 0!==e?e:0)+(null!==(t=null==a?void 0:a.warning)&&void 0!==t?t:0),s=a&&Object.values(a).some((e=>e>0));return Object(h.jsx)(O.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.navMenu.notificationsTabLinkText",defaultMessage:"Notifications"})),r?Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(O.EuiToolTip,{position:"right",content:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.notificationsIndicator.errorsAndWarningLabel",defaultMessage:"There {count, plural, one {is # notification} other {are # notifications}} with error or warning level since {lastCheckedAt}",values:{count:r,lastCheckedAt:n(i)}})},Object(h.jsx)(O.EuiNotificationBadge,{"aria-label":y.i18n.translate("xpack.ml.notificationsIndicator.unreadErrors",{defaultMessage:"Unread errors or warnings indicator."}),"data-test-subj":"mlNotificationErrorsIndicator"},r))):null,!r&&s?Object(h.jsx)(O.EuiFlexItem,{grow:!1},Object(h.jsx)(O.EuiToolTip,{position:"right",content:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.notificationsIndicator.unreadLabel",defaultMessage:"You have unread notifications since {lastCheckedAt}",values:{lastCheckedAt:n(i)}})},Object(h.jsx)(O.EuiHealth,{css:dn,color:"primary",role:"img","aria-label":y.i18n.translate("xpack.ml.notificationsIndicator.unreadIcon",{defaultMessage:"Unread notifications indicator."}),"data-test-subj":"mlNotificationsIndicator"}))):null)};var mn=a(156);const pn=Object(n.createContext)({setHeaderActionMenu:()=>{},headerPortal:Object(s.c)(),isHeaderMounted:!1,setIsHeaderMounted:()=>{}}),bn=r.a.memo((({pageDeps:e})=>{const t=Object(Ne.h)(),{services:{http:{basePath:a},mlServices:{httpService:r}}}=Object(Ne.d)(),{showMLNavMenu:c}=Object(vt.d)(),d=Object(n.useMemo)((()=>Object(s.c)()),[]),[u,m]=Object(n.useState)(!1),[p,b]=Object(n.useState)(!1);Object(n.useEffect)((()=>{const e=new v.Subscription;return e.add(r.getLoadingCount$.subscribe((e=>{b(0!==e)}))),function(){e.unsubscribe()}}),[]);const f=Object(n.useMemo)((()=>Object.values(i).map((e=>e(t,a.get()))).filter((e=>!e.disabled))),[]),g=(e=>{var t;const{pathname:a}=Object(l.useLocation)(),{services:{executionContext:i,overlays:r,...s}}=Object(Ne.d)(),c=Object(l.useRouteMatch)("/settings/calendars_list/edit_calendar/:calendarId"),d=Object(l.useRouteMatch)("/settings/filter_lists/edit_filter_list/:filterId"),u=Object(n.useMemo)((()=>Object(o.keyBy)(e,"path")),[]),m=Object(n.useMemo)((()=>{if(c)return u[c.path];if(d)return u[d.path];const e=a.replace(/\/$/,"");return u[e]}),[a]),p=Object(n.useRef)();return Object(n.useEffect)((function(){!m&&a&&(p.current=r.banners.replace(p.current,Object(ie.a)(Object(h.jsx)(O.EuiCallOut,{color:"warning",iconType:"iInCircle",title:Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.notFoundPage.title",defaultMessage:"Page Not Found"}),"data-test-subj":"mlPageNotFoundBanner"},Object(h.jsx)("p",{"data-test-subj":"mlPageNotFoundBannerText"},Object(h.jsx)(E.FormattedMessage,{id:"xpack.ml.notFoundPage.bannerText",defaultMessage:"The Machine Learning application doesn't recognize this route: {route}. You've been redirected to the Overview page.",values:{route:a}}))),s)),setTimeout((()=>{p.current&&r.banners.remove(p.current)}),15e3))}),[m,r,a,s]),Object(rn.useExecutionContext)(i,{name:Pe.g,type:"application",page:null!==(t=null==m?void 0:m.path)&&void 0!==t?t:"/overview",id:null==m?void 0:m.path}),null!=m?m:u["/overview"]})(f),x=Object(n.useMemo)((()=>[...g.enableDatePicker?[Object(h.jsx)(oe,{isLoading:p,width:"full"})]:[]]),[g.enableDatePicker,p]);(e=>{const t=null==e?void 0:e.title,{services:{chrome:{docTitle:a}}}=Object(Ne.d)(),i=Object(n.useCallback)((e=>{a.change([e,Pe.a])}),[a]);Object(n.useEffect)((()=>{t&&i(t)}),[i,t])})(g),Object(n.useEffect)((()=>{const e=document.querySelector('[data-test-subj="mlApp"]');if(e&&"string"==typeof(null==g?void 0:g["data-test-subj"])){const t=e.querySelector("main");t&&t.setAttribute("data-test-subj",null==g?void 0:g["data-test-subj"])}}),[g]);const j=function(e){const t=Object(Ne.g)(),a=Object(Ne.h)(),i=!Object(mn.b)(),r=Object(De.usePermissionCheck)("canViewMlNodes"),[s]=Object(ae.d)("_g"),l=Object(n.useMemo)((()=>void 0!==(null==s?void 0:s.refreshInterval)?{globalState:{refreshInterval:s.refreshInterval}}:void 0),[null==s?void 0:s.refreshInterval]),o=Object(n.useCallback)((async e=>{const i=await t.getUrl({page:e,pageState:l});await a(i,!1)}),[l]),c=Object(n.useMemo)((()=>{const e=i,t=[{id:"main_section",name:"",items:[{id:"overview",pathId:$e.b.OVERVIEW,name:y.i18n.translate("xpack.ml.navMenu.overviewTabLinkText",{defaultMessage:"Overview"}),disabled:e,testSubj:"mlMainTab overview"},{id:"notifications",pathId:$e.b.NOTIFICATIONS,name:e?y.i18n.translate("xpack.ml.navMenu.notificationsTabLinkText",{defaultMessage:"Notifications"}):Object(h.jsx)(un,null),disabled:e,testSubj:"mlMainTab notifications"},{id:"memory_usage",pathId:$e.b.MEMORY_USAGE,name:y.i18n.translate("xpack.ml.navMenu.memoryUsageText",{defaultMessage:"Memory Usage"}),disabled:e||!r,testSubj:"mlMainTab nodesOverview"}]},{id:"anomaly_detection_section",name:y.i18n.translate("xpack.ml.navMenu.anomalyDetectionTabLinkText",{defaultMessage:"Anomaly Detection"}),disabled:e,items:[{id:"anomaly_detection",name:y.i18n.translate("xpack.ml.navMenu.anomalyDetection.jobsManagementText",{defaultMessage:"Jobs"}),disabled:e,pathId:$e.b.ANOMALY_DETECTION_JOBS_MANAGE,testSubj:"mlMainTab anomalyDetection"},{id:"anomaly_explorer",name:y.i18n.translate("xpack.ml.navMenu.anomalyDetection.anomalyExplorerText",{defaultMessage:"Anomaly Explorer"}),disabled:e,pathId:$e.b.ANOMALY_EXPLORER,testSubj:"mlMainTab anomalyExplorer"},{id:"single_metric_viewer",name:y.i18n.translate("xpack.ml.navMenu.anomalyDetection.singleMetricViewerText",{defaultMessage:"Single Metric Viewer"}),pathId:$e.b.SINGLE_METRIC_VIEWER,disabled:e,testSubj:"mlMainTab singleMetricViewer"},{id:"settings",pathId:$e.b.SETTINGS,name:y.i18n.translate("xpack.ml.navMenu.settingsTabLinkText",{defaultMessage:"Settings"}),disabled:e,testSubj:"mlMainTab settings",highlightNestedRoutes:!0}]},{id:"data_frame_analytics_section",name:y.i18n.translate("xpack.ml.navMenu.dataFrameAnalyticsTabLinkText",{defaultMessage:"Data Frame Analytics"}),disabled:e,items:[{id:"data_frame_analytics_jobs",pathId:$e.b.DATA_FRAME_ANALYTICS_JOBS_MANAGE,name:y.i18n.translate("xpack.ml.navMenu.dataFrameAnalytics.jobsManagementText",{defaultMessage:"Jobs"}),disabled:e,testSubj:"mlMainTab dataFrameAnalytics"},{id:"data_frame_analytics_results_explorer",pathId:$e.b.DATA_FRAME_ANALYTICS_EXPLORATION,name:y.i18n.translate("xpack.ml.navMenu.dataFrameAnalytics.resultsExplorerText",{defaultMessage:"Results Explorer"}),disabled:e,testSubj:"mlMainTab dataFrameAnalyticsResultsExplorer"},{id:"data_frame_analytics_job_map",pathId:$e.b.DATA_FRAME_ANALYTICS_MAP,name:y.i18n.translate("xpack.ml.navMenu.dataFrameAnalytics.analyticsMapText",{defaultMessage:"Analytics Map"}),disabled:e,testSubj:"mlMainTab dataFrameAnalyticsMap"}]},{id:"model_management",name:y.i18n.translate("xpack.ml.navMenu.modelManagementText",{defaultMessage:"Model Management"}),disabled:e,items:[{id:"trained_models",pathId:$e.b.TRAINED_MODELS_MANAGE,name:y.i18n.translate("xpack.ml.navMenu.trainedModelsText",{defaultMessage:"Trained Models"}),disabled:e,testSubj:"mlMainTab trainedModels"}]},{id:"datavisualizer",name:y.i18n.translate("xpack.ml.navMenu.dataVisualizerTabLinkText",{defaultMessage:"Data Visualizer"}),disabled:!1,pathId:$e.b.DATA_VISUALIZER,testSubj:"mlMainTab dataVisualizer",items:[{id:"filedatavisualizer",pathId:$e.b.DATA_VISUALIZER_FILE,name:y.i18n.translate("xpack.ml.navMenu.fileDataVisualizerLinkText",{defaultMessage:"File"}),disabled:!1,testSubj:"mlMainTab fileDataVisualizer"},{id:"data_view_datavisualizer",pathId:$e.b.DATA_VISUALIZER_INDEX_SELECT,name:y.i18n.translate("xpack.ml.navMenu.dataViewDataVisualizerLinkText",{defaultMessage:"Data View"}),disabled:!1,testSubj:"mlMainTab indexDataVisualizer"},{id:"esql_datavisualizer",pathId:$e.b.DATA_VISUALIZER_ESQL,name:y.i18n.translate("xpack.ml.navMenu.esqlDataVisualizerLinkText",{defaultMessage:"ES|QL"}),disabled:!1,testSubj:"mlMainTab esqlDataVisualizer"},{id:"data_drift",pathId:$e.b.DATA_DRIFT_INDEX_SELECT,name:y.i18n.translate("xpack.ml.navMenu.dataComparisonText",{defaultMessage:"Data Drift"}),disabled:e,testSubj:"mlMainTab dataDrift"}]}];return t.push({id:"aiops_section",name:y.i18n.translate("xpack.ml.navMenu.aiopsTabLinkText",{defaultMessage:"AIOps Labs"}),disabled:e,items:[{id:"logRateAnalysis",pathId:$e.b.AIOPS_LOG_RATE_ANALYSIS_INDEX_SELECT,name:y.i18n.translate("xpack.ml.navMenu.logRateAnalysisLinkText",{defaultMessage:"Log Rate Analysis"}),disabled:e,testSubj:"mlMainTab logRateAnalysis",relatedRouteIds:["log_rate_analysis"]},{id:"logCategorization",pathId:$e.b.AIOPS_LOG_CATEGORIZATION_INDEX_SELECT,name:y.i18n.translate("xpack.ml.navMenu.logCategorizationLinkText",{defaultMessage:"Log Pattern Analysis"}),disabled:e,testSubj:"mlMainTab logCategorization",relatedRouteIds:["log_categorization"]},{id:"changePointDetection",pathId:$e.b.AIOPS_CHANGE_POINT_DETECTION_INDEX_SELECT,name:y.i18n.translate("xpack.ml.navMenu.changePointDetectionLinkText",{defaultMessage:"Change Point Detection"}),disabled:e,testSubj:"mlMainTab changePointDetection",relatedRouteIds:["change_point_detection"]}]}),t}),[i,r]),d=Object(n.useCallback)((t=>{const{id:a,disabled:i,items:n,onClick:r,pathId:s,name:l,testSubj:c,highlightNestedRoutes:u,relatedRouteIds:m}=t,p=null!=r?r:s?o.bind(null,s):void 0,b=`/${s}`===(null==e?void 0:e.path)||!!u&&(null==e?void 0:e.path.includes(`${s}/`))||Array.isArray(m)&&m.includes(null==e?void 0:e.id);return{id:a,name:l,isSelected:b,disabled:i,...p?{onClick:p}:{},"data-test-subj":c+(b?" selected":""),items:n?n.map(d):void 0,forceOpen:!0}}),[e,o]);return Object(n.useMemo)((()=>c.map(d)),[c,d])}(g);return Object(h.jsx)(pn.Provider,{value:{setHeaderActionMenu:e.setHeaderActionMenu,headerPortal:d,setIsHeaderMounted:m,isHeaderMounted:u}},Object(h.jsx)(ee,{className:"ml-app","data-test-subj":"mlApp",restrictWidth:!1,panelled:!0,solutionNav:c?{name:y.i18n.translate("xpack.ml.plugin.title",{defaultMessage:"Machine Learning"}),icon:"machineLearningApp",items:j}:void 0,pageHeader:{pageTitle:Object(h.jsx)(sn.b,null),rightSideItems:x,restrictWidth:!1}},Object(h.jsx)(fn,{headerPortal:d,setIsHeaderMounted:m,pageDeps:e,routeList:f})))})),fn=r.a.memo((({pageDeps:e,routeList:t})=>{const{services:{application:a}}=Object(Ne.d)();return Object(h.jsx)(te.a,{coreStart:{application:a}},Object(h.jsx)(O.EuiPageSection,{restrictWidth:!1},Object(h.jsx)(j,null,t.map((t=>Object(h.jsx)(g,{key:t.path,path:t.path,exact:!0,render:a=>(window.setTimeout((()=>{e.setBreadcrumbs(t.breadcrumbs)})),Object(h.jsx)(nn,{path:t.path},t.render(a,e)))}))),Object(h.jsx)(l.Redirect,{to:"/overview"}))))}))},314:function(e,t,a){"use strict";a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return O}));var i=a(2),n=a.n(i),r=a(5),s=a(118),l=a(96);const o="management";var c=a(8),d=a(25),u=a(67),m=a(6);const p=({alert:e})=>{const t=e[s.e];return Object(m.jsx)(d.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,t))},b=(e,t)=>()=>({body:({alert:a,id:i})=>Object(m.jsx)(d.EuiPanel,null,Object(m.jsx)(d.EuiDescriptionList,{listItems:e.map((e=>{const i=Object(c.get)(a,e.id),n=Array.isArray(i)?i.at(-1):i;return{title:e.displayAsText,description:Object(u.a)(n)?t(e.id,n):"—"}})),type:"column",columnWidths:[1,3]})),header:p,footer:null});var f=a(13),h=a(254),g=a(0),x=a(10);function j(e){var t,a,o,c,u,p;const{alert:b,refresh:f}=e,{cases:h,triggersActionsUi:j}=Object(x.d)().services,v=null==h?void 0:h.helpers.canUseCases([l.APP_ID]),[O,y]=Object(i.useState)(!1),_=null!==(t=null===(a=b[s.g])||void 0===a?void 0:a[0])&&void 0!==t?t:null,S=null!==(o=null===(c=b[s.j])||void 0===c?void 0:c[0])&&void 0!==o?o:"",E=Object(i.useMemo)((()=>({_id:b._id,_index:b._index})),[b._id,b._index]),w=Object(i.useMemo)((()=>{var e;return null!=E&&E._id?[{alertId:null!=S?S:"",index:null!==(e=null==E?void 0:E._index)&&void 0!==e?e:"",type:l.AttachmentType.alert,rule:{id:_,name:b[s.e][0]},owner:g.g}]:[]}),[b,S,null==E?void 0:E._id,null==E?void 0:E._index,_]),A=Object(i.useCallback)((()=>{f()}),[f]),T=null==h||null===(u=h.hooks)||void 0===u?void 0:u.useCasesAddToNewCaseFlyout({onSuccess:A}),C=null==h||null===(p=h.hooks)||void 0===p?void 0:p.useCasesAddToExistingCaseModal({onSuccess:A}),k=()=>{y(!1)},M=Object(i.useMemo)((()=>null==j?void 0:j.getAlertsTableDefaultAlertActions({key:"defaultRowActions",onActionExecuted:k,isAlertDetailsEnabled:!1,resolveRulePagePath:e=>e?`/app/management/insightsAndAlerting/triggersActions/rule/${e}`:null,...e})),[e,j]),I=[...v&&null!=v&&v.create&&v.read?[Object(m.jsx)(d.EuiContextMenuItem,{"data-test-subj":"add-to-existing-case-action",key:"addToExistingCase",onClick:()=>{null==C||C.open({getAttachments:()=>w}),k()},size:"s"},r.i18n.translate("xpack.ml.alerts.actions.addToCase",{defaultMessage:"Add to existing case"})),Object(m.jsx)(d.EuiContextMenuItem,{"data-test-subj":"add-to-new-case-action",key:"addToNewCase",onClick:()=>{null==T||T.open({attachments:w}),k()},size:"s"},r.i18n.translate("xpack.ml.alerts.actions.addToNewCase",{defaultMessage:"Add to new case"}))]:[],M],L=I.length<=0?r.i18n.translate("xpack.ml.alertsTable.notEnoughPermissions",{defaultMessage:"Additional privileges required"}):r.i18n.translate("xpack.ml.alertsTable.moreActionsTextLabel",{defaultMessage:"More actions"});return Object(m.jsx)(n.a.Fragment,null,Object(m.jsx)(d.EuiPopover,{anchorPosition:"downLeft",button:Object(m.jsx)(d.EuiToolTip,{content:L},Object(m.jsx)(d.EuiButtonIcon,{"aria-label":L,color:"text","data-test-subj":"alertsTableRowActionMore",display:"empty",iconType:"boxesHorizontal",onClick:()=>{y(!O)},size:"s"})),closePopover:k,isOpen:O,panelPaddingSize:"none"},Object(m.jsx)(d.EuiContextMenuPanel,{size:"s",items:I,"data-test-subj":"alertsTableActionsMenu"})))}function v(e,t){const a=[{id:s.i,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.status",{defaultMessage:"Status"}),initialWidth:150},{id:s.d,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.reason",{defaultMessage:"Reason"}),initialWidth:150},{id:s.e,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.ruleName",{defaultMessage:"Rule name"}),initialWidth:150},{id:f.a,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.jobId",{defaultMessage:"Job ID"}),initialWidth:150},{id:f.b,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.anomalyScore",{defaultMessage:"Latest anomaly score"}),initialWidth:150,isSortable:!0},{id:s.h,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.triggeredAt",{defaultMessage:"Triggered at"}),initialWidth:250,schema:"datetime"},{id:s.b,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.recoveredAt",{defaultMessage:"Recovered at"}),initialWidth:250,schema:"datetime"},{id:f.c,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.anomalyTime",{defaultMessage:"Latest anomaly time"}),initialWidth:250,schema:"datetime"},{id:s.a,displayAsText:r.i18n.translate("xpack.ml.alertsTable.columns.duration",{defaultMessage:"Duration"}),initialWidth:150,schema:"numeric"}],i=[{[s.h]:{order:"desc"}}],n={id:O,cases:{appId:o,featureId:l.FEATURE_ID,owner:[l.APP_ID],syncAlerts:!1},columns:a,useInternalFlyout:b(a,Object(h.b)(t)),getRenderCellValue:h.c,sort:i,useActionsColumn:()=>({renderCustomActionsRow:e=>Object(m.jsx)(j,e)}),ruleTypeIds:[f.g.ANOMALY_DETECTION]};e.alertsTableConfigurationRegistry.register(n)}const O="mlAlerts"},330:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var i,n=a(2),r=a(79),s=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},i(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),l="html",o="svg",c=function(e,t){var a,i,n,r={};if(e===l)n=document.createElement("div");else{if(e!==o)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');n=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var s=0,c=Object.entries(t.attributes);s<c.length;s++){var d=c[s],u=d[0],m=d[1];n.setAttribute(u,m)}var p={element:n,elementType:e,setPortalProps:function(e){r=e},getInitialPortalProps:function(){return r},mount:function(t,n){if(n!==i){if(p.unmount(),t!==a&&!function(e,t){if(t===l)return e instanceof HTMLElement;if(t===o)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(p.element,n),a=t,i=n}},unmount:function(e){e&&e!==i||a&&i&&(a.replaceChild(i,p.element),a=void 0,i=void 0)}};return p},d=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return s(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,i=t.node;return r.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),i.element)},t}(n.PureComponent),u=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return s(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),m=c.bind(null,l);c.bind(null,o)},331:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c}));var i=a(2),n=a(330),r=a(25),s=a(311),l=a(6);const o=({children:e})=>{const{headerPortal:t,setIsHeaderMounted:a}=Object(i.useContext)(s.b);return Object(i.useEffect)((()=>(a(!0),()=>{a(!1)})),[]),Object(l.jsx)(n.a,{node:t},e)},c=()=>{const{headerPortal:e,isHeaderMounted:t}=Object(i.useContext)(s.b);return t?Object(l.jsx)(n.b,{node:e}):Object(l.jsx)(r.EuiSkeletonText,{lines:1})}},332:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return n}));const i="ml:anomalyDetection:results:enableTimeDefaults",n="ml:anomalyDetection:results:timeDefaults"},336:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(25),n=a(6),r=(a(2),a(10));const s=({headerItems:e,compressed:t=!1})=>{const{euiTheme:a}=Object(r.a)();return Object(n.jsx)(i.EuiFlexGroup,{gutterSize:t?"s":"l",alignItems:"center"},e.map(((r,s)=>Object(n.jsx)(i.EuiFlexItem,{key:s,grow:!1},Object(n.jsx)("div",{css:s<(null==e?void 0:e.length)-1?Object(n.css)("border-right:",a.euiBorderWidthThin," solid ",a.euiBorderColor,";padding-right:",t?a.euiPanelPaddingModifiers.paddingSmall:a.euiPanelPaddingModifiers.paddingLarge,";",""):null},r)))))}},340:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(341);case"v8light":return a(343)}},341:function(e,t,a){var i=a(126),n=a(342);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},342:function(e,t,a){(t=a(127)(!1)).push([e.i,".mlSwimLaneContainer .echLegendListContainer{height:34px!important}.mlSwimLaneContainer .echLegendList{display:flex!important;flex-wrap:nowrap;justify-content:space-between!important;position:absolute;right:0}",""]),e.exports=t},343:function(e,t,a){var i=a(126),n=a(344);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},344:function(e,t,a){(t=a(127)(!1)).push([e.i,".mlSwimLaneContainer .echLegendListContainer{height:34px!important}.mlSwimLaneContainer .echLegendList{display:flex!important;flex-wrap:nowrap;justify-content:space-between!important;position:absolute;right:0}",""]),e.exports=t},390:function(e,t,a){"use strict";a.d(t,"a",(function(){return A})),a.d(t,"c",(function(){return I})),a.d(t,"b",(function(){return anomaly_detection_alerts_state_service_AnomalyDetectionAlertsStateService}));var i=a(2),n=a.n(i),r=a(517),s=a(26),l=a.n(s),o=a(6),c=a(5),d=a(178),u=a(10),m=a(49);const p=({seriesType:e="line"})=>{const{services:{lens:{EmbeddableComponent:t}}}=Object(u.d)(),{anomalyTimelineStateService:a}=Object(d.b)(),n=Object(r.b)(),s=l()(a.getSwimLaneBucketInterval$(),a.getSwimLaneBucketInterval()),p=Object(i.useMemo)((()=>({title:"",visualizationType:"lnsXY",references:[],type:"lens",state:{internalReferences:[{type:"index-pattern",id:"ml-alerts-data-view",name:"indexpattern-datasource-layer-layer1"}],adHocDataViews:{"ml-alerts-data-view":{id:"ml-alerts-data-view",title:".alerts-ml.anomaly-detection.alerts-default",timeFieldName:"@timestamp"}},visualization:{hideEndzones:!0,legend:{isVisible:!1},valueLabels:"hide",fittingFunction:"None",axisTitlesVisibilitySettings:{x:!1,yLeft:!1,yRight:!1},tickLabelsVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},labelsOrientation:{x:0,yLeft:0,yRight:0},gridlinesVisibilitySettings:{x:!0,yLeft:!0,yRight:!0},preferredSeriesType:e,layers:[{layerId:"layer1",accessors:["7327df72-9def-4642-a72d-dc2b0790d5f9"],position:"top",seriesType:e,showGridlines:!1,layerType:"data",xAccessor:"953f9efc-fbf6-44e0-a450-c645d2b5ec22"}]},query:{query:"",language:"kuery"},filters:[],datasourceStates:{formBased:{layers:{layer1:{columns:{"953f9efc-fbf6-44e0-a450-c645d2b5ec22":{label:"@timestamp",dataType:"date",operationType:"date_histogram",sourceField:"@timestamp",isBucketed:!0,scale:"interval",params:{interval:null==s?void 0:s.expression,includeEmptyRows:!0,dropPartials:!1}},"7327df72-9def-4642-a72d-dc2b0790d5f9":{label:c.i18n.translate("xpack.ml.explorer.alerts.totalAlerts",{defaultMessage:"Total alerts"}),dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:"___records___",params:{emptyAsNull:!1,format:{id:"number",params:{decimals:0,compact:!0}}}}},columnOrder:["953f9efc-fbf6-44e0-a450-c645d2b5ec22","7327df72-9def-4642-a72d-dc2b0790d5f9"],incompleteColumns:{},sampling:1}}},indexpattern:{layers:{}},textBased:{layers:{}}}}})),[null==s?void 0:s.expression,e]);return s?Object(o.jsx)("div",{css:Object(o.css)("padding-left:",m.c-45,"px;height:120px;width:100%;","")},Object(o.jsx)(t,{id:"mlExplorerAlertsPreview",style:{height:120},timeRange:n,attributes:p,renderMode:"view",executionContext:{type:"ml_overall_alert_preview_chart",name:"Anomaly detection alert preview chart"},disableTriggers:!0})):null};var b=a(25),f=a(15);const h={APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SLO:"slo",SIEM:"siem",UPTIME:"uptime",ML:"ml",STACK_ALERTS:"stackAlerts",EXAMPLE:"AlertingExample",MONITORING:"monitoring"},g=(Object.values(h).map((e=>e)),"active"),x="recovered",j="untracked";var v=a(314),O=a(255),y=a(118);const _={[g]:c.i18n.translate("xpack.ml.explorer.alertsPanel.statusNameMap.active",{defaultMessage:"Active"}),[x]:c.i18n.translate("xpack.ml.explorer.alertsPanel.statusNameMap.recovered",{defaultMessage:"Recovered"}),[j]:c.i18n.translate("xpack.ml.explorer.alertsPanel.statusNameMap.untracked",{defaultMessage:"Untracked"})};var S=a(254),E=a(8);const w=()=>{const{services:{fieldFormats:e}}=Object(u.d)(),{anomalyDetectionAlertsStateService:t}=Object(d.b)(),a=l()(t.anomalyDetectionAlerts$,[]),r=Object(S.b)(e),[s,m]=Object(i.useState)(0),p=Object(i.useMemo)((()=>function(e){var t;return Object.entries(null!==(t=Object(E.groupBy)(e,y.e))&&void 0!==t?t:[]).map((([e,t])=>{const a=t.reduce(((e,t)=>t[y.h]>e[y.h]?t:e));return[e,{totalCount:t.length,activeCount:t.filter((e=>e[y.i]===g)).length,recoveredAt:a[y.b],startedAt:a[y.h],lastDuration:a[y.a]}]})).sort((([,e],[,t])=>e.activeCount>t.activeCount?-1:e.activeCount<t.activeCount?1:e.totalCount>t.totalCount?-1:e.totalCount<t.totalCount?1:e.lastDuration>t.lastDuration?-1:e.lastDuration<t.lastDuration?1:0))}(a)),[a]),f=Object(i.useMemo)((()=>p.slice(3*s,3*(s+1))),[s,p]);return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(b.EuiFlexGrid,{columns:3,gutterSize:"m"},f.map((([e,t])=>Object(o.jsx)(b.EuiFlexItem,{key:e,grow:!1},Object(o.jsx)(b.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(b.EuiTitle,{size:"xs"},Object(o.jsx)("h5",null,e))),t.activeCount>0?Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(b.EuiBadge,{color:"accent"},_.active)):null),Object(o.jsx)(b.EuiDescriptionList,{compressed:!0,type:"column",listItems:[{title:c.i18n.translate("xpack.ml.explorer.alertsPanel.summary.totalAlerts",{defaultMessage:"Total alerts: "}),description:t.totalCount},...t.activeCount>0?[{title:c.i18n.translate("xpack.ml.explorer.alertsPanel.summary.startedAt",{defaultMessage:"Started at: "}),description:r(y.b,t.startedAt)}]:[{title:c.i18n.translate("xpack.ml.explorer.alertsPanel.summary.recoveredAt",{defaultMessage:"Recovered at: "}),description:r(y.b,t.recoveredAt)}],{title:c.i18n.translate("xpack.ml.explorer.alertsPanel.summary.lastDuration",{defaultMessage:"Last duration: "}),description:r(y.a,t.lastDuration)}]}))))),p.length>3?Object(o.jsx)(b.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd"},Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(b.EuiPagination,{"aria-label":c.i18n.translate("xpack.ml.explorer.alertsPanel.summary.paginationAreaLabel",{defaultMessage:"Pagination for alerting rules summary"}),pageCount:Math.ceil(p.length/3),activePage:s,onPageClick:m}))):null)},A=()=>{const{services:{triggersActionsUi:e}}=Object(u.d)(),[t,a]=Object(i.useState)(!0),[r,s]=Object(i.useState)("alertsSummary"),{services:{fieldFormats:m}}=Object(u.d)(),{anomalyDetectionAlertsStateService:x}=Object(d.b)(),j=l()(x.countByStatus$),y=l()(x.alertsQuery$,{}),S=l()(x.isLoading$,!0),E={alertsTableConfigurationRegistry:e.alertsTableConfigurationRegistry,configurationId:v.a,id:"ml-details-alerts",featureIds:[h.ML],query:y,showExpandToDetails:!0,showAlertStatusWithFlapping:!0,cellContext:{fieldFormats:m}},A=e.getAlertsStateTable(E),T=[{id:"alertsSummary",label:c.i18n.translate("xpack.ml.explorer.alertsPanel.summaryLabel",{defaultMessage:"Summary"})},{id:"alertsTable",label:c.i18n.translate("xpack.ml.explorer.alertsPanel.detailsLabel",{defaultMessage:"Details"})}];return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(O.a,{isOpen:t,onToggle:a,header:Object(o.jsx)(b.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(f.FormattedMessage,{id:"xpack.ml.explorer.alertsPanel.header",defaultMessage:"Alerts"})),S?Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(b.EuiLoadingSpinner,{size:"m"})):null),headerItems:Object.entries(null!=j?j:{}).map((([e,t])=>Object(o.jsx)(n.a.Fragment,null,_[e]," ",Object(o.jsx)(b.EuiNotificationBadge,{size:"m",color:e===g?"accent":"subdued"},t))))},Object(o.jsx)(p,null),Object(o.jsx)(b.EuiSpacer,{size:"m"}),Object(o.jsx)(b.EuiButtonGroup,{legend:c.i18n.translate("xpack.ml.explorer.alertsPanel.summaryTableToggle",{defaultMessage:"Summary / Table view toggle"}),options:T,idSelected:r,onChange:s}),Object(o.jsx)(b.EuiSpacer,{size:"m"}),"alertsTable"===r?A:Object(o.jsx)(w,null)),Object(o.jsx)(b.EuiSpacer,{size:"m"}))};var T=a(13),C=a(241),k={name:"68tcm5",styles:"position:absolute;top:0;visibility:hidden"},M={name:"bjn8wh",styles:"position:relative"};const I=({children:e,selection:t,swimlaneContainerWidth:a,swimLaneData:n})=>{var r;const{services:{fieldFormats:s}}=Object(u.d)(),p=Object(i.useRef)(null),{anomalyDetectionAlertsStateService:h,anomalyTimelineStateService:x}=Object(d.b)(),j=l()(h.selectedAlerts$,[]),v=Object(i.useMemo)((()=>{if(!t||!n)return 0;const e=(n.points.findIndex((e=>e.time===t.times[0]))+1)*(a/n.points.length);return m.c+e}),[t,a,n]),w=!!t&&!(null==j||!j.length),A=Object(i.useMemo)((()=>Object(S.a)(s)),[s]),I=Object(i.useCallback)((()=>{x.setSelectedCells()}),[x]);return Object(o.jsx)("div",{ref:p,"data-test-subj":"mlSwimLaneWrapper",css:M},Object(o.jsx)("div",{"data-test-subj":"swimLanePopoverTriggerWrapper",style:{left:`${v}px`},css:Object(o.css)("position:absolute;top:-",C.a/2,"px;height:0;","")},Object(o.jsx)(b.EuiPopover,{button:Object(o.jsx)("button",{"data-test-subj":"mlSwimLanePopoverTrigger",css:k}),isOpen:w,anchorPosition:"upCenter",hasArrow:!0,repositionOnScroll:!0,closePopover:I,panelPaddingSize:"s"},Object(o.jsx)(b.EuiPopoverTitle,{paddingSize:"xs"},Object(o.jsx)(b.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"center"},Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(f.FormattedMessage,{id:"xpack.ml.explorer.alertsPanel.header",defaultMessage:"Alerts"})),Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(b.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(o.jsx)(b.EuiFlexItem,null,Object(o.jsx)(O.b,{compressed:!0,headerItems:Object.entries(null!==(r=h.countAlertsByStatus(null!=j?j:[]))&&void 0!==r?r:{}).map((([e,t])=>Object(o.jsx)(b.EuiText,{size:"xs"},_[e]," ",Object(o.jsx)(b.EuiNotificationBadge,{size:"s",color:e===g?"accent":"subdued"},t))))})),Object(o.jsx)(b.EuiFlexItem,{grow:!1},Object(o.jsx)(b.EuiButtonIcon,{size:"s",color:"text",iconType:"cross",onClick:I,"aria-label":c.i18n.translate("xpack.ml.explorer.cellSelectionPopover.closeButtonAriaLabel",{defaultMessage:"Close popover"})})))))),null!=j&&j.length?Object(o.jsx)(R,{data:j}):(null!=j?j:[]).map((e=>{const t=Object.entries(Object(E.pick)(e,[y.e,T.a,T.c,y.h,y.a])).map((([e,t])=>A(e,t)));return Object(o.jsx)(b.EuiFlexGroup,null,t.map((({title:e,description:t})=>Object(o.jsx)(b.EuiFlexItem,null,Object(o.jsx)(b.EuiDescriptionList,{compressed:!0,listItems:[{title:e,description:t}]})))))})))),e)};var L={name:"nv8kcr",styles:"width:510px"};const R=({data:e})=>{const{services:{fieldFormats:t}}=Object(u.d)(),a=Object(i.useMemo)((()=>Object(S.b)(t)),[t]),n=Object(i.useMemo)((()=>[{field:y.e,width:"150px",name:T.i[y.e],sortable:!0},{field:y.h,width:"200px",name:T.i[y.h],sortable:!0,render:e=>a(y.h,e)},{field:y.a,width:"110px",name:T.i[y.a],sortable:!0,render:e=>a(y.a,e)}]),[a]);return Object(o.jsx)(b.EuiInMemoryTable,{css:L,compressed:!0,columns:n,items:e,sorting:{sort:{field:y.h,direction:"asc"}},pagination:e.length>3&&{compressed:!0,initialPageSize:3,pageSizeOptions:[3,5,10]}})};var D=a(4),F=a.n(D),N=a(7),B=a(82),P=a(67),$=a(335),V=a(283);class anomaly_detection_alerts_state_service_AnomalyDetectionAlertsStateService extends V.a{constructor(e,t,a){super(),F()(this,"_aadAlerts$",new N.BehaviorSubject([])),F()(this,"_isLoading$",new N.BehaviorSubject(!0)),F()(this,"anomalyDetectionAlerts$",this._aadAlerts$.asObservable()),F()(this,"alertsQuery$",void 0),F()(this,"isLoading$",this._isLoading$.asObservable()),F()(this,"selectedAlerts$",void 0),F()(this,"countByStatus$",this._aadAlerts$.pipe(Object(N.map)((e=>this.countAlertsByStatus(e))))),this._anomalyTimelineStateServices=e,this.data=t,this.timefilter=a,this.selectedAlerts$=Object(N.combineLatest)([this._aadAlerts$,this._anomalyTimelineStateServices.getSelectedCells$().pipe(Object(N.map)((e=>null==e?void 0:e.times)))]).pipe(Object(N.map)((([e,t])=>Array.isArray(t)?e.filter((e=>e[T.c]>=1e3*t[0]&&e[T.c]<=1e3*t[1])):null)));const i=this.timefilter.getTimeUpdate$().pipe(Object(N.startWith)(null),Object(N.map)((()=>this.timefilter.getTime())));this.alertsQuery$=Object(N.combineLatest)([this._anomalyTimelineStateServices.getSwimLaneJobs$(),i]).pipe(Object(N.map)((([e,t])=>({bool:{filter:[{term:{[y.f]:T.g.ANOMALY_DETECTION}},{range:{[T.c]:{gte:t.from,lte:t.to}}},{terms:{[T.a]:e.map((e=>e.id))}}]}})))),this._init()}countAlertsByStatus(e){return e.reduce(((e,t)=>(Object(P.a)(e[t[y.i]])?e[t[y.i]]++:e[t[y.i]]=0,e)),{active:0,recovered:0})}_initSubscriptions(){const e=new N.Subscription;return e.add(this.alertsQuery$.pipe(Object(N.tap)((()=>{this._isLoading$.next(!0)})),Object(N.debounceTime)(300),Object(N.switchMap)((e=>this.data.search.search({featureIds:[h.ML],query:e},{strategy:"privateRuleRegistryAlertsSearchStrategy"}).pipe(Object(N.catchError)((e=>N.EMPTY)))))).subscribe((e=>{Object(B.isRunningResponse)(e)||(this._aadAlerts$.next(e.rawResponse.hits.hits.map((({fields:e})=>{var t;if(!Object(P.a)(e))return;const a=Number(e[T.b][0]);return{id:e[y.j][0],[y.e]:e[y.e][0],[T.b]:a,[T.a]:e[T.a][0],[T.c]:new Date(e[T.c][0]).getTime(),[y.h]:e[y.h][0],[y.b]:null===(t=e[y.b])||void 0===t?void 0:t[0],[y.i]:e[y.i][0],[y.a]:e[y.a][0],color:Object($.a)(a)}})).filter(P.a)),this._isLoading$.next(!1))}))),e}}},393:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(120),n=a.n(i),r=a(2),s=a(257);var l=a(6);const o={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},c=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const s=Object(r.useRef)(null),c=Object(r.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:i})=>{if(!t||!i)return;const n=((e,t)=>{let a=e;do{var i,n;if("a"===(null===(i=a)||void 0===i?void 0:i.tagName.toLowerCase()))return a;const e=null===(n=a)||void 0===n?void 0:n.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!n)return;const r=n.href,s=""===n.target||"_self"===n.target,l=0===e.button;r&&s&&l&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(n.href))})({event:e,currentAppId:a,navigateToUrl:t,container:s.current})),[a,t]);return Object(l.jsx)("div",n()({onClick:c,ref:s,css:o,"data-test-subj":"kbnRedirectAppLink"},i),e)},d=({children:e,...t})=>Object(l.jsx)(c,n()({},Object(s.c)(),t),e)},396:function(e,t,a){"use strict";a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return h}));var i=a(2),n=a.n(i),r=a(7),s=a(39),l=a.n(s),o=a(37),c=a(189),d=a(10),u=a(179),m=a(6);const p={info:0,error:0,warning:0},b=n.a.createContext({notificationsCounts:p,lastCheckedAt:null,latestRequestedAt:null,setLastCheckedAt:()=>{}}),f=({children:e})=>{const{services:{mlServices:{mlApiServices:t},application:{capabilities:a}}}=Object(d.d)(),n=a.ml.canGetJobs,s=a.ml.canGetDataFrameAnalytics,f=a.ml.canGetTrainedModels,h=n&&s&&f,[g,x]=Object(c.b)(u.f),j=function(e){const t=Object(i.useMemo)((()=>new r.BehaviorSubject(e)),[]);return Object(i.useEffect)((function(){t.next(e)}),[t,e]),Object(i.useMemo)((()=>t.asObservable()),[t])}(g),[v,O]=Object(i.useState)(null),[y,_]=Object(i.useState)(p);return Object(i.useEffect)((function(){if(!h)return;const e=Object(r.combineLatest)([j,Object(r.timer)(0,6e4)]).pipe(Object(r.map)((([e])=>null!=e?e:l()().subtract(7,"d").valueOf())),Object(r.tap)((e=>{O(e)})),Object(r.switchMap)((e=>t.notifications.countMessages$({lastCheckedAt:e}))),Object(r.retry)({delay:6e4})).subscribe((e=>{_(Object(o.a)(e)?e:p)}));return()=>{e.unsubscribe()}}),[h,j,t.notifications]),Object(m.jsx)(b.Provider,{value:{notificationsCounts:y,lastCheckedAt:g,setLastCheckedAt:x,latestRequestedAt:v}},e)};function h(){return Object(i.useContext)(b)}},397:function(e,t,a){"use strict";a.d(t,"b",(function(){return quick_create_job_QuickCategorizationJobCreator})),a.d(t,"a",(function(){return d})),a.d(t,"c",(function(){return m}));var i=a(5),n=a(830),r=a(520),s=a(125),l=a(171),o=a(154),c=a(133);const d={COUNT:n.b.COUNT,HIGH_COUNT:n.b.HIGH_COUNT,RARE:n.b.RARE};class quick_create_job_QuickCategorizationJobCreator extends l.a{constructor(e,t,a,i,n,r){super(e,t,a,i,r),this.data=n}async createAndSaveJob(e,t,a,i,n,r,l,o,c,d,u){if(void 0===o)throw new Error("Cannot create job, query and filters are undefined");const{jobConfig:m,datafeedConfig:p,start:b,end:f}=await this.createJob(e,i,n,r,l,c,o,a),h=s.a.CATEGORIZATION_FROM_PATTERN_ANALYSIS;return await this.putJobAndDataFeed({jobId:t,datafeedConfig:p,jobConfig:m,createdByLabel:h,start:b,end:f,startJob:d,runInRealTime:u})}async createAndStashADJob(e,t,a,i,n,r,l,o){try{var d;const u=await this.data.dataViews.get(t),m=u.getFieldByName(a),p=i&&null!==(d=u.getFieldByName(i))&&void 0!==d?d:null;if(void 0===m)throw new Error("Cannot create job, field is undefined");const{jobConfig:b,datafeedConfig:f,start:h,end:g,includeTimeRange:x}=await this.createJob(e,u,m,p,n,{from:r,to:l},o,s.b);Object(c.n)({jobConfig:b,datafeedConfig:f,createdBy:s.a.CATEGORIZATION_FROM_PATTERN_ANALYSIS,start:h,end:g},!0,x,!x)}catch(e){console.error(e)}}async createJob(e,t,a,n,s,l,c,d){const u=Object(o.c)(),m=Object(o.b)(t.getIndexPattern());let p,b;m.query=c,u.analysis_config={categorization_field_name:a.name,per_partition_categorization:{enabled:null!==n,stop_on_warn:s},influencers:[r.b],detectors:[{function:e,by_field_name:r.b}],bucket_span:d},null!==n&&(u.analysis_config.detectors[0].partition_field_name=n.name,u.analysis_config.influencers.push(n.name)),u.data_description.time_field=t.timeFieldName;let f=!0;try{const{min:e,max:t}=this.timeFilter.calculateBounds(l);if(p=null==e?void 0:e.valueOf(),b=null==t?void 0:t.valueOf(),void 0===p||void 0===b||isNaN(p)||isNaN(b))throw Error(i.i18n.translate("xpack.ml.newJob.fromLens.createJob.error.timeRange",{defaultMessage:"Incompatible time range"}))}catch(e){console.error(e),f=!1,p=void 0,b=void 0}return{jobConfig:u,datafeedConfig:m,start:p,end:b,includeTimeRange:f}}}var u=a(147);async function m(e,t,a,i,n,r,s,l,o){const{mlApiServices:c,timeFilter:m,kibanaConfig:p,dashboardService:b,data:f}=e,h=Object(u.e)(o,Object(u.c)()),g=Object(u.e)(s,""),x=Object(u.e)(l,""),j=Object(u.e)(t,d.COUNT),v=Object(u.e)(a,""),O=Object(u.e)(i,""),y=null===n?"":Object(u.e)(n,""),_=Object(u.e)(r,!1),S=new quick_create_job_QuickCategorizationJobCreator(f.dataViews,p,m,b,f,c);await S.createAndStashADJob(j,v,O,y,_,g,x,h)}},403:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var i=a(25),n=a(15),r=a(2),s=a(10),l=a(6);const o=({onDataViewCreated:e,allowAdHocDataView:t=!1})=>{const{dataViewEditor:a}=Object(s.d)().services,o=Boolean(null==a?void 0:a.userPermissions.editDataView()),c=Object(r.useRef)(),d=Object(r.useCallback)((()=>{c.current=null==a?void 0:a.openEditor({onSave:async t=>{t.id&&e&&e(t)},allowAdHocDataView:t})}),[e,a,t]);return Object(r.useEffect)((function(){return()=>{c.current&&c.current()}}),[]),o?Object(l.jsx)(i.EuiButton,{onClick:d,fill:!0,iconType:"plusInCircle","data-test-subj":"newDataViewButton",disabled:!o},Object(l.jsx)(n.FormattedMessage,{id:"xpack.ml.savedObjectFinder.createADataView",defaultMessage:"Create a data view"})):null}},414:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return u}));var i=a(131),n=a(204),r=a(218);const s=8,l=new Set([i.a.UNSIGNED_LONG,i.a.LONG,i.a.INTEGER,i.a.SHORT,i.a.BYTE]),o=new Set([i.a.DOUBLE,i.a.FLOAT,i.a.HALF_FLOAT,i.a.SCALED_FLOAT]),c="ml__id_copy",d="ml__incremental_id",u=(e,t,a)=>{const i=a.dest.results_field;if(Object(n.h)(a.analysis)){if(e===`${i}.${r.j}`)return-1;if(t===`${i}.${r.j}`)return 1}if(Object(n.g)(a.analysis)||Object(n.i)(a.analysis)){const r=Object(n.c)(a.analysis),s=Object(n.d)(i,a.analysis,!0);if(e===`${i}.is_training`)return-1;if(t===`${i}.is_training`)return 1;if(e===s)return-1;if(t===s)return 1;if(e===r||e===r.replace(/\.keyword$/,""))return-1;if(t===r||t===r.replace(/\.keyword$/,""))return 1;if(e===`${i}.prediction_probability`)return-1;if(t===`${i}.prediction_probability`)return 1}const s=typeof e,l=typeof t,o=e.split("."),c=o[0],d=t.split("."),u=d[0];return c===i&&o.length>1&&u!==i?(o.shift(),o.shift(),o.join(".")===t?1:o.join(".").localeCompare(t)):u===i&&d.length>1&&c!==i?(d.shift(),d.shift(),d.join(".")===e?-1:e.localeCompare(d.join("."))):"string"!==s&&"string"===l?1:"string"===s&&"string"!==l?-1:e.localeCompare(t)}},416:function(e,t,a){"use strict";var i=a(311);a.d(t,"b",(function(){return i.b})),a.d(t,"a",(function(){return i.a}))},417:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));const i=new(a(7).Subject)},418:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(2),n=a(10),r=a(332),s=a(73);const l=()=>{const{services:{http:{basePath:e}}}=Object(n.d)(),t=Object(n.j)().get(r.b),a=Object(n.j)().get(r.a);return{createLinkWithUserDefaults:Object(i.useCallback)(((i,n)=>{const r=s.mlJobService.createResultsUrlForJobs(n,i,!0===t&&void 0!==a?a:void 0);return`${e.get()}/app/ml/${r}`}),[e])}}},425:function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},426:function(e,t,a){e.exports=a.p+"1cbd62546f764080f7071e03889e9de3.svg"},427:function(e,t,a){"use strict";e.exports=a(553)},428:function(e,t,a){"use strict";e.exports=a(560)},429:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var i=a(58).__importDefault(a(573));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=i.default},500:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return E}));var i=a(7),n=a(73),r=a(132),s=a(139);function l(e,t){return Object(i.from)(e.populateFormats(t)).pipe(Object(i.map)((e=>{if(e.error)return null;const a=Object(s.a)(n.mlJobService.jobs).map((e=>(e.selected=t.some((t=>e.id===t)),e))).filter((e=>e.selected));return{type:r.c.JOB_SELECTION_CHANGE,payload:{loading:!1,selectedJobs:a}}})))}var o=a(287),c=a.n(o),d=a(8),u=a(26),m=a.n(u),p=a(2),b=a(517),f=a(10),h=a(80),g=a(178);const x=(e,t)=>Object(d.isEqual)(e,t),j=(e,t)=>c()(((e,t=null)=>function(a,...i){return e.apply(t,i)})(e,t),x),v=j(s.o),O=j(s.l),y=j(s.n),_=j(s.p),S=j(s.m),E=()=>{const e=Object(b.c)(),{services:{mlServices:{mlApiServices:t}}}=Object(f.d)(),{anomalyExplorerChartsService:a}=Object(g.b)(),n=Object(p.useMemo)((()=>((e,t,a)=>n=>{if(void 0===(r=n)||void 0===r.selectedJobs||null===r.selectedJobs||void 0===r.viewBySwimlaneFieldName)return Object(i.of)({});var r;const{lastRefresh:l,influencersFilterQuery:o,noInfluencersConfigured:c,selectedCells:d,selectedJobs:u,tableInterval:m,tableSeverity:p,viewBySwimlaneFieldName:b}=n,f=Object(s.i)(d,b),h=Object(s.j)(d,u),g=a.getBounds(),x=Object(s.k)(d,g),j=Object(s.f)();return Object(i.forkJoin)({overallAnnotations:v(l,u,g),annotationsData:O(l,d,u,g),anomalyChartRecords:t.loadDataForCharts$(h,x.earliestMs,x.latestMs,f,d,o),influencers:0===f.length?_(l,e,h,x.earliestMs,x.latestMs,[],c,o):Promise.resolve({}),tableData:S(l,d,u,j,g,b,m,p,o)}).pipe(Object(i.switchMap)((({overallAnnotations:t,anomalyChartRecords:a,influencers:n,annotationsData:r,tableData:s})=>Object(i.forkJoin)({filteredTopInfluencers:(f.length>0||void 0!==o)&&void 0!==a&&a.length>0?y(l,e,h,x.earliestMs,x.latestMs,a,f,c,o):Promise.resolve(n)}).pipe(Object(i.map)((({filteredTopInfluencers:e})=>({overallAnnotations:t,annotations:r,influencers:e,loading:!1,anomalyChartsDataLoading:!1,tableData:s})))))))})(Object(h.mlResultsServiceProvider)(t),a,e)),[]),r=Object(p.useMemo)((()=>new i.Subject),[]),l=Object(p.useMemo)((()=>r.pipe(Object(i.switchMap)(n))),[]);return[m()(l),Object(p.useCallback)((e=>{r.next(e)}),[])]}},512:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(513);case"v8light":return a(515)}},513:function(e,t,a){var i=a(126),n=a(514);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},514:function(e,t,a){(t=a(127)(!1)).push([e.i,'.ml-app .mlDataFrameAnalyticsRegression__evaluateStat{padding-top:24px}.ml-app .mlJobMapLegend__container{background-color:"#FFFFFF"}.ml-app .mlJobMapLegend__indexPattern{background-color:#fff;border:2px solid #d36086;display:"inline-block";height:12px;transform:rotate(45deg);width:12px}.ml-app .mlJobMapLegend__ingestPipeline{background-color:#fff;border:2px solid #da8b45;border-radius:4px;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__transform{background-color:#fff;border:2px solid #6092c0;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__analytics{background-color:#fff;border:2px solid #54b399;border-radius:50%;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__analyticsMissing{background-color:#fff;border:2px solid #fff;border-radius:50%;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__sourceNode{background-color:#f3d371;border:1px solid #343741;border-radius:6px;display:"inline-block";height:12px;width:12px}.ml-app .mlAnalyticsTable .euiTableRow-isExpandedRow .euiTableCellContent{animation:none!important}.ml-app .mlAnalyticsTable .euiTableRow-isExpandedRow .euiTableCellContent .euiTableCellContent__text{width:100%}.ml-app .mlAnalyticsTable .euiIcon[data-is-loaded]{animation:none!important}.ml-app .mlTaskModeBadge,.ml-app .mlTaskStateBadge{max-width:100px}.ml-app .dataFrameAnalyticsCreateSearchDialog{min-height:600px;width:720px}.ml-app .dfAnalyticsCreationWizard__card{width:300px}.ml-app .mlSwimLaneContainer .echLegendListContainer{height:34px!important}.ml-app .mlSwimLaneContainer .echLegendList{display:flex!important;flex-wrap:nowrap;justify-content:space-between!important;position:absolute;right:0}.ml-app .ml-explorer-chart-eui-icon-tip{max-width:none}.ml-app .ml-explorer-chart-label-badges{align-items:center;display:flex;margin-top:4px}.ml-app .ml-reset-font-weight{font-weight:400}.ml-app .ml-explorer-chart-container{overflow:hidden}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg{font-family:Inter,BlinkMacSystemFont,Helvetica,Arial,sans-serif;font-size:12px}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#1d1e24;opacity:1}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:#c8c8c81a;stroke:#98a2b3;stroke-width:2px;stroke-opacity:.8}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#98a2b3;fill:#343741;pointer-events:none}.ml-app .ml-explorer-chart-container .axis line,.ml-app .ml-explorer-chart-container .axis path{fill:none;stroke:#343741;shape-rendering:crispEdges}.ml-app .ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:#0003}.ml-app .ml-explorer-chart-container .axis text{fill:#98a2b3}.ml-app .ml-explorer-chart-container .axis .tick line{stroke:#343741;stroke-width:1px}.ml-app .ml-explorer-chart-container .values-line{fill:none;stroke:#36a2ef;stroke-width:2}.ml-app .ml-explorer-chart-container .values-dots circle,.ml-app .ml-explorer-chart-container .values-dots-circle{fill:#36a2ef;stroke-width:0}.ml-app .ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#535966}.ml-app .ml-explorer-chart-container .metric-value{fill:#0000;stroke:#36a2ef;stroke-width:0;opacity:1}.ml-app .ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#535966}.ml-app .ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#36a2ef}.ml-app .ml-explorer-chart-container .anomaly-marker.critical{fill:#fe5050}.ml-app .ml-explorer-chart-container .anomaly-marker.major{fill:#fba740}.ml-app .ml-explorer-chart-container .anomaly-marker.minor{fill:#fdec25}.ml-app .ml-explorer-chart-container .anomaly-marker.warning{fill:#8bc8fb}.ml-app .ml-explorer-chart-container .anomaly-marker.low{fill:#d2e9f7}.ml-app .ml-explorer-chart-container .anomaly-marker:hover,.ml-app .ml-explorer-chart-container .metric-value:hover{stroke-width:6px;stroke-opacity:.65}.ml-app .ml-explorer-chart{overflow:hidden}.ml-app .ml-explorer-chart-content-wrapper{height:215px}.ml-app .ml-explorer-chart-axis-emphasis{font-weight:700}.ml-app .ml-time-series-explorer{color:#98a2b3}.ml-app .ml-time-series-explorer .forecast-controls{float:right}.ml-app .ml-time-series-explorer .ml-timeseries-chart svg{font-family:Inter,BlinkMacSystemFont,Helvetica,Arial,sans-serif;font-size:12px}.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis line,.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis path{fill:none;stroke:#343741;shape-rendering:crispEdges;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis text{fill:#dfe5ef}.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis .tick line{stroke:#343741}.ml-app .ml-time-series-explorer .ml-timeseries-chart .chart-border{stroke:#343741;fill:none;stroke-width:1;shape-rendering:crispEdges}.ml-app .ml-time-series-explorer .ml-timeseries-chart .chart-border-highlight{stroke:#98a2b3;stroke-width:2}.ml-app .ml-time-series-explorer .ml-timeseries-chart .chart-border-highlight:hover{opacity:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .area{stroke-width:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .area.bounds{fill:#36a2ef33;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .values-line{fill:none;stroke:#36a2ef;stroke-width:2;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .values-line.forecast{stroke:#d6bf57;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .hidden{visibility:hidden}.ml-app .ml-time-series-explorer .ml-timeseries-chart .area.forecast{fill:#d6bf574d;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .values-dots circle{fill:#36a2ef;stroke-width:0}.ml-app .ml-time-series-explorer .ml-timeseries-chart .metric-value{fill:#0000;stroke:#36a2ef;stroke-width:0;opacity:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker{stroke-width:1px;stroke:#535966}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.critical{fill:#fe5050}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.major{fill:#fba740}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.minor{fill:#fdec25}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.warning{fill:#8bc8fb}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.low{fill:#d2e9f7}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.highlighted,.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker:hover,.ml-app .ml-time-series-explorer .ml-timeseries-chart .metric-value:hover{stroke-width:6px;stroke-opacity:.65;stroke:#36a2ef}.ml-app .ml-time-series-explorer .ml-timeseries-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#98a2b3;fill:#343741}.ml-app .ml-time-series-explorer .ml-timeseries-chart .forecast .metric-value,.ml-app .ml-time-series-explorer .ml-timeseries-chart .forecast .metric-value:hover{stroke:#d6bf57}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .x-axis-background line{fill:none;shape-rendering:crispEdges;stroke:#25262e}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .x-axis-background rect{fill:#25262e}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom{fill:#98a2b3}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a text{fill:#36a2ef;cursor:pointer}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a:active,.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a:focus,.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a:hover{text-decoration:underline}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .x.axis path{display:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .axis text{fill:#dfe5ef;font-size:10px}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .values-line{stroke-width:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .mask polygon{fill-opacity:.1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .mask .area.bounds{fill:#343741}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .mask .values-line{stroke-width:1;stroke:#535966}.ml-app .ml-time-series-explorer .ml-timeseries-chart .swimlane .axis text,.ml-app .ml-time-series-explorer .ml-timeseries-chart .swimlane rect.swimlane-cell-hidden{display:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .brush .extent{fill-opacity:0;shape-rendering:crispEdges;stroke:#98a2b3;stroke-width:2;cursor:move}.ml-app .ml-time-series-explorer .ml-timeseries-chart .brush .extent:hover{opacity:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .top-border{fill:#1d1e24}.ml-app .ml-time-series-explorer .ml-timeseries-chart foreignObject.brush-handle{padding-top:1px;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart div.brush-handle-inner{fill:#98a2b3;background-color:#343741;border:1px solid #98a2b3;cursor:ew-resize;font-size:14px;height:70px;margin-top:9px;text-align:center;width:10px}.ml-app .ml-time-series-explorer .ml-timeseries-chart div.brush-handle-inner-left{border-radius:6px 0 0 6px}.ml-app .ml-time-series-explorer .ml-timeseries-chart div.brush-handle-inner-right{border-radius:0 6px 6px 0}.ml-app .ml-time-series-explorer .ml-timeseries-chart rect.brush-handle{stroke-width:1;stroke:#98a2b3;fill:#343741;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart rect.brush-handle:hover{opacity:1}.ml-app .mlTimeSeriesExplorerProgress{background-color:#1d1e24}.ml-app .mlTimeSeriesExplorerProgress::-moz-progress-bar,.ml-app .mlTimeSeriesExplorerProgress::-webkit-progress-bar{background-color:#1d1e24}.ml-app .mlAnnotationBrush .extent{stroke:#343741;stroke-width:2px;stroke-dasharray:2 2;fill:#25262e;shape-rendering:geometricPrecision}.ml-app .mlAnnotationRect{stroke:#fff;stroke-width:2px;stroke-opacity:.2;fill:#fff;fill-opacity:.05;shape-rendering:geometricPrecision;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlAnnotationRect-isHighlight{stroke-opacity:.4;fill-opacity:.1;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlAnnotationRect-isBlur{stroke-opacity:.1;fill-opacity:.025;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlAnnotationText{text-anchor:middle;fill:#fff;font-family:Inter,BlinkMacSystemFont,Helvetica,Arial,sans-serif;font-size:12px;font-weight:500;transition:fill .15s;-webkit-user-select:none;user-select:none}.ml-app .mlAnnotationText-isBlur{fill:#535966;transition:fill .15s}.ml-app .mlAnnotationTextRect{fill:#343741;transition:fill .15s}.ml-app .mlAnnotationTextRect-isBlur{fill:#25262e;transition:fill .15s}.ml-app .mlAnnotationHidden{display:none}.ml-app .mlContextAnnotationRect{stroke:#fff;stroke-width:2px;stroke-opacity:.2;fill:#fff;fill-opacity:.05;shape-rendering:geometricPrecision;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlContextAnnotationRect-isBlur{stroke-opacity:.1;fill-opacity:.025;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .ml-annotation-description-list{row-gap:4px}.ml-app .ml-anomalies-table tr td:first-child,.ml-app .ml-anomalies-table tr th:first-child{width:32px}.ml-app .ml-anomalies-table .euiTableCellContent .euiHealth{font-size:inherit}.ml-app .ml-anomalies-table .euiTableCellContent .detector-rules-icon{margin-left:4px;opacity:.5}.ml-app .ml-anomalies-table .euiContextMenuItem{min-width:150px}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples__header{display:inline}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples__link{width:100%}.ml-app .ml-anomalies-table .category-example{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples{padding:24px}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples__item{display:block;font-family:Roboto Mono,Menlo,Courier,monospace;white-space:wrap}.ml-app .ml-anomalies-table .interim-result{font-style:italic}.ml-app .ml-anomalies-table .ml-anomalies-table-details{padding:12px}.ml-app .mlColorRangeLegend text{fill:#98a2b3;font-size:10px;font-size:.7142857143rem}.ml-app .mlColorRangeLegend .axis path{fill:none;stroke:none}.ml-app .mlColorRangeLegend .axis line{fill:none;stroke:#535966;shape-rendering:crispEdges}.ml-app .field-value-short{display:inline-block;max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;vertical-align:bottom;white-space:nowrap!important}.ml-app .field-value-long{overflow-wrap:break-word}.ml-app .filter-button{height:16px;opacity:.5;transform:translateY(-1px);width:16px}.ml-app .filter-button .euiIcon{height:12px;width:12px}.ml-app .filter-button:hover{opacity:1}.ml-app .ml-influencers-list{line-height:1.45}.ml-app .ml-influencers-list .field-label{font-size:12px;max-height:14px;max-width:calc(100% - 102px);text-align:left}.ml-app .ml-influencers-list .field-label .field-value{display:inline-block;max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;vertical-align:bottom;white-space:nowrap!important}.ml-app .ml-influencers-list .progress{background-color:#0000;color:#98a2b3;display:inline-block;height:22px;margin-bottom:0;min-width:70px;width:calc(100% - 34px)}.ml-app .ml-influencers-list .progress .progress-bar-holder{width:calc(100% - 28px)}.ml-app .ml-influencers-list .progress .progress-bar{display:inline-block;height:2px;line-height:18px;margin-top:12px;text-align:right;transition:none}.ml-app .ml-influencers-list .progress.critical .progress-bar{background-color:#fe5050}.ml-app .ml-influencers-list .progress.critical .score-label{border-color:#fe5050}.ml-app .ml-influencers-list .progress.major .progress-bar{background-color:#fba740}.ml-app .ml-influencers-list .progress.major .score-label{border-color:#fba740}.ml-app .ml-influencers-list .progress.minor .progress-bar{background-color:#fdec25}.ml-app .ml-influencers-list .progress.minor .score-label{border-color:#fdec25}.ml-app .ml-influencers-list .progress.warning .progress-bar{background-color:#8bc8fb}.ml-app .ml-influencers-list .progress.warning .score-label{border-color:#8bc8fb}.ml-app .ml-influencers-list .score-label{display:inline;font-size:12px;line-height:14px;margin-left:4px;text-align:center;white-space:nowrap}.ml-app .ml-influencers-list .total-score-label{border:1px solid #343741;border-radius:6px;color:#98a2b3;display:inline-block;font-size:11px;line-height:14px;margin-top:4px;padding:2px;text-align:center;vertical-align:top;width:32px}.ml-app .ml-influencers-list-tooltip{word-break:break-all}.ml-app .mlJobSelectorFlyoutBody>.euiFlyoutBody__overflow{padding-top:8px}.ml-app .mlJobSelector__ganttBar{background-color:#79adda;border-radius:2px;height:12px}.ml-app .mlJobSelector__ganttBarBackEdge{border-left:1px solid #d6d6d6;border-right:1px solid #d6d6d6;height:16px;margin-bottom:-14px;padding-top:8px}.ml-app .mlJobSelector__ganttBarDashed{border-top:1px dashed #d6d6d6;height:1px}.ml-app .mlJobSelector__ganttBarRunning{animation:progress-bar-stripes 2s linear infinite;background-image:linear-gradient(45deg,#ffffff26 25%,#0000 0,#0000 50%,#ffffff26 0,#ffffff26 75%,#0000 0,#0000);background-size:40px 40px}.ml-app .ml-rule-editor-flyout{font-size:14px}.ml-app .ml-rule-editor-flyout .select-rule-action .rule-detector-description-list{padding-left:16px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel{padding:8px 0}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList{row-gap:4px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__title{padding:0 16px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__description:nth-child(2),.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__title:first-child{border-bottom:1px solid #343741;color:#dfe5ef;font-weight:700;padding-bottom:12px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__description:nth-child(4),.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__title:nth-child(3){padding-top:8px}.ml-app .ml-rule-editor-flyout .scope-enable-checkbox .euiCheckbox__input[disabled]~.euiCheckbox__label{color:inherit}.ml-app .ml-rule-editor-flyout .scope-field-checkbox{margin-right:2px}.ml-app .ml-rule-editor-flyout .scope-field-checkbox .euiCheckbox{margin-top:4px}.ml-app .ml-rule-editor-flyout .scope-field-button{border-bottom:none;pointer-events:none}.ml-app .ml-rule-editor-flyout .scope-edit-filter-link{font-size:12px;line-height:32px}.ml-app .ml-rule-editor-flyout .condition-edit-value-field{height:28px;margin:0 2px;width:170px}.ml-app .ml-rule-editor-flyout .condition-edit-value-field input{height:28px}.ml-app .ml-rule-editor-flyout .euiExpressionButton.disabled{pointer-events:none}.ml-app .ml-rule-editor-flyout .euiExpressionButton.disabled .euiExpressionButton__description,.ml-app .ml-rule-editor-flyout .euiExpressionButton.disabled .euiExpressionButton__value{color:#343741}.ml-app .ml-rule-editor-flyout .text-highlight{font-weight:700}.ml-app .rule-detector-description-list{row-gap:4px}',""]),e.exports=t},515:function(e,t,a){var i=a(126),n=a(516);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},516:function(e,t,a){(t=a(127)(!1)).push([e.i,'.ml-app .mlDataFrameAnalyticsRegression__evaluateStat{padding-top:24px}.ml-app .mlJobMapLegend__container{background-color:"#FFFFFF"}.ml-app .mlJobMapLegend__indexPattern{background-color:#fff;border:2px solid #d36086;display:"inline-block";height:12px;transform:rotate(45deg);width:12px}.ml-app .mlJobMapLegend__ingestPipeline{background-color:#fff;border:2px solid #da8b45;border-radius:4px;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__transform{background-color:#fff;border:2px solid #6092c0;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__analytics{background-color:#fff;border:2px solid #54b399;border-radius:50%;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__analyticsMissing{background-color:#fff;border:2px solid #000;border-radius:50%;display:"inline-block";height:12px;width:12px}.ml-app .mlJobMapLegend__sourceNode{background-color:#fec514;border:1px solid #d3dae6;border-radius:6px;display:"inline-block";height:12px;width:12px}.ml-app .mlAnalyticsTable .euiTableRow-isExpandedRow .euiTableCellContent{animation:none!important}.ml-app .mlAnalyticsTable .euiTableRow-isExpandedRow .euiTableCellContent .euiTableCellContent__text{width:100%}.ml-app .mlAnalyticsTable .euiIcon[data-is-loaded]{animation:none!important}.ml-app .mlTaskModeBadge,.ml-app .mlTaskStateBadge{max-width:100px}.ml-app .dataFrameAnalyticsCreateSearchDialog{min-height:600px;width:720px}.ml-app .dfAnalyticsCreationWizard__card{width:300px}.ml-app .mlSwimLaneContainer .echLegendListContainer{height:34px!important}.ml-app .mlSwimLaneContainer .echLegendList{display:flex!important;flex-wrap:nowrap;justify-content:space-between!important;position:absolute;right:0}.ml-app .ml-explorer-chart-eui-icon-tip{max-width:none}.ml-app .ml-explorer-chart-label-badges{align-items:center;display:flex;margin-top:4px}.ml-app .ml-reset-font-weight{font-weight:400}.ml-app .ml-explorer-chart-container{overflow:hidden}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg{font-family:Inter,BlinkMacSystemFont,Helvetica,Arial,sans-serif;font-size:12px}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect{fill:#fff;opacity:1}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.selected-interval{fill:#c8c8c81a;stroke:#69707d;stroke-width:2px;stroke-opacity:.8}.ml-app .ml-explorer-chart-container .ml-explorer-chart-svg .line-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#69707d;fill:#d3dae6;pointer-events:none}.ml-app .ml-explorer-chart-container .axis line,.ml-app .ml-explorer-chart-container .axis path{fill:none;stroke:#d3dae6;shape-rendering:crispEdges}.ml-app .ml-explorer-chart-container .axis .tick line.ml-tick-emphasis{stroke:#0003}.ml-app .ml-explorer-chart-container .axis text{fill:#69707d}.ml-app .ml-explorer-chart-container .axis .tick line{stroke:#d3dae6;stroke-width:1px}.ml-app .ml-explorer-chart-container .values-line{fill:none;stroke:#07c;stroke-width:2}.ml-app .ml-explorer-chart-container .values-dots circle,.ml-app .ml-explorer-chart-container .values-dots-circle{fill:#07c;stroke-width:0}.ml-app .ml-explorer-chart-container .values-dots circle.values-dots-circle-blur{fill:#98a2b3}.ml-app .ml-explorer-chart-container .metric-value{fill:#0000;stroke:#07c;stroke-width:0;opacity:1}.ml-app .ml-explorer-chart-container .anomaly-marker{stroke-width:1px;stroke:#98a2b3}.ml-app .ml-explorer-chart-container .anomaly-marker:hover{stroke-width:6px;stroke:#07c}.ml-app .ml-explorer-chart-container .anomaly-marker.critical{fill:#fe5050}.ml-app .ml-explorer-chart-container .anomaly-marker.major{fill:#fba740}.ml-app .ml-explorer-chart-container .anomaly-marker.minor{fill:#fdec25}.ml-app .ml-explorer-chart-container .anomaly-marker.warning{fill:#8bc8fb}.ml-app .ml-explorer-chart-container .anomaly-marker.low{fill:#d2e9f7}.ml-app .ml-explorer-chart-container .anomaly-marker:hover,.ml-app .ml-explorer-chart-container .metric-value:hover{stroke-width:6px;stroke-opacity:.65}.ml-app .ml-explorer-chart{overflow:hidden}.ml-app .ml-explorer-chart-content-wrapper{height:215px}.ml-app .ml-explorer-chart-axis-emphasis{font-weight:700}.ml-app .ml-time-series-explorer{color:#69707d}.ml-app .ml-time-series-explorer .forecast-controls{float:right}.ml-app .ml-time-series-explorer .ml-timeseries-chart svg{font-family:Inter,BlinkMacSystemFont,Helvetica,Arial,sans-serif;font-size:12px}.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis line,.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis path{fill:none;stroke:#d3dae6;shape-rendering:crispEdges;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis text{fill:#343741}.ml-app .ml-time-series-explorer .ml-timeseries-chart .axis .tick line{stroke:#d3dae6}.ml-app .ml-time-series-explorer .ml-timeseries-chart .chart-border{stroke:#d3dae6;fill:none;stroke-width:1;shape-rendering:crispEdges}.ml-app .ml-time-series-explorer .ml-timeseries-chart .chart-border-highlight{stroke:#69707d;stroke-width:2}.ml-app .ml-time-series-explorer .ml-timeseries-chart .chart-border-highlight:hover{opacity:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .area{stroke-width:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .area.bounds{fill:#07c3;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .values-line{fill:none;stroke:#07c;stroke-width:2;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .values-line.forecast{stroke:#d6bf57;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .hidden{visibility:hidden}.ml-app .ml-time-series-explorer .ml-timeseries-chart .area.forecast{fill:#d6bf574d;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .values-dots circle{fill:#07c;stroke-width:0}.ml-app .ml-time-series-explorer .ml-timeseries-chart .metric-value{fill:#0000;stroke:#07c;stroke-width:0;opacity:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker{stroke-width:1px;stroke:#98a2b3}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.critical{fill:#fe5050}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.major{fill:#fba740}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.minor{fill:#fdec25}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.warning{fill:#8bc8fb}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.low{fill:#d2e9f7}.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker.highlighted,.ml-app .ml-time-series-explorer .ml-timeseries-chart .anomaly-marker:hover,.ml-app .ml-time-series-explorer .ml-timeseries-chart .metric-value:hover{stroke-width:6px;stroke-opacity:.65;stroke:#07c}.ml-app .ml-time-series-explorer .ml-timeseries-chart rect.scheduled-event-marker{stroke-width:1px;stroke:#69707d;fill:#d3dae6}.ml-app .ml-time-series-explorer .ml-timeseries-chart .forecast .metric-value,.ml-app .ml-time-series-explorer .ml-timeseries-chart .forecast .metric-value:hover{stroke:#d6bf57}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .x-axis-background line{fill:none;shape-rendering:crispEdges;stroke:#f5f7fa}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .x-axis-background rect{fill:#f5f7fa}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom{fill:#69707d}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a text{fill:#07c;cursor:pointer}.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a:active,.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a:focus,.ml-app .ml-time-series-explorer .ml-timeseries-chart .focus-chart .focus-zoom a:hover{text-decoration:underline}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .x.axis path{display:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .axis text{fill:#343741;font-size:10px}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .values-line{stroke-width:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .mask polygon{fill-opacity:.1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .mask .area.bounds{fill:#d3dae6}.ml-app .ml-time-series-explorer .ml-timeseries-chart .context-chart .mask .values-line{stroke-width:1;stroke:#98a2b3}.ml-app .ml-time-series-explorer .ml-timeseries-chart .swimlane .axis text,.ml-app .ml-time-series-explorer .ml-timeseries-chart .swimlane rect.swimlane-cell-hidden{display:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart .brush .extent{fill-opacity:0;shape-rendering:crispEdges;stroke:#69707d;stroke-width:2;cursor:move}.ml-app .ml-time-series-explorer .ml-timeseries-chart .brush .extent:hover{opacity:1}.ml-app .ml-time-series-explorer .ml-timeseries-chart .top-border{fill:#fff}.ml-app .ml-time-series-explorer .ml-timeseries-chart foreignObject.brush-handle{padding-top:1px;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart div.brush-handle-inner{fill:#69707d;background-color:#d3dae6;border:1px solid #69707d;cursor:ew-resize;font-size:14px;height:70px;margin-top:9px;text-align:center;width:10px}.ml-app .ml-time-series-explorer .ml-timeseries-chart div.brush-handle-inner-left{border-radius:6px 0 0 6px}.ml-app .ml-time-series-explorer .ml-timeseries-chart div.brush-handle-inner-right{border-radius:0 6px 6px 0}.ml-app .ml-time-series-explorer .ml-timeseries-chart rect.brush-handle{stroke-width:1;stroke:#69707d;fill:#d3dae6;pointer-events:none}.ml-app .ml-time-series-explorer .ml-timeseries-chart rect.brush-handle:hover{opacity:1}.ml-app .mlTimeSeriesExplorerProgress{background-color:#fff}.ml-app .mlTimeSeriesExplorerProgress::-moz-progress-bar,.ml-app .mlTimeSeriesExplorerProgress::-webkit-progress-bar{background-color:#fff}.ml-app .mlAnnotationBrush .extent{stroke:#d3dae6;stroke-width:2px;stroke-dasharray:2 2;fill:#f5f7fa;shape-rendering:geometricPrecision}.ml-app .mlAnnotationRect{stroke:#000;stroke-width:2px;stroke-opacity:.2;fill:#000;fill-opacity:.05;shape-rendering:geometricPrecision;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlAnnotationRect-isHighlight{stroke-opacity:.4;fill-opacity:.1;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlAnnotationRect-isBlur{stroke-opacity:.1;fill-opacity:.025;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlAnnotationText{text-anchor:middle;fill:#000;font-family:Inter,BlinkMacSystemFont,Helvetica,Arial,sans-serif;font-size:12px;font-weight:500;transition:fill .15s;-webkit-user-select:none;user-select:none}.ml-app .mlAnnotationText-isBlur{fill:#98a2b3;transition:fill .15s}.ml-app .mlAnnotationTextRect{fill:#d3dae6;transition:fill .15s}.ml-app .mlAnnotationTextRect-isBlur{fill:#f5f7fa;transition:fill .15s}.ml-app .mlAnnotationHidden{display:none}.ml-app .mlContextAnnotationRect{stroke:#000;stroke-width:2px;stroke-opacity:.2;fill:#000;fill-opacity:.05;shape-rendering:geometricPrecision;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .mlContextAnnotationRect-isBlur{stroke-opacity:.1;fill-opacity:.025;transition:stroke-opacity .15s;transition:fill-opacity .15s}.ml-app .ml-annotation-description-list{row-gap:4px}.ml-app .ml-anomalies-table tr td:first-child,.ml-app .ml-anomalies-table tr th:first-child{width:32px}.ml-app .ml-anomalies-table .euiTableCellContent .euiHealth{font-size:inherit}.ml-app .ml-anomalies-table .euiTableCellContent .detector-rules-icon{margin-left:4px;opacity:.5}.ml-app .ml-anomalies-table .euiContextMenuItem{min-width:150px}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples__header{display:inline}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples__link{width:100%}.ml-app .ml-anomalies-table .category-example{display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples{padding:24px}.ml-app .ml-anomalies-table .mlAnomalyCategoryExamples__item{display:block;font-family:Roboto Mono,Menlo,Courier,monospace;white-space:wrap}.ml-app .ml-anomalies-table .interim-result{font-style:italic}.ml-app .ml-anomalies-table .ml-anomalies-table-details{padding:12px}.ml-app .mlColorRangeLegend text{fill:#69707d;font-size:10px;font-size:.7142857143rem}.ml-app .mlColorRangeLegend .axis path{fill:none;stroke:none}.ml-app .mlColorRangeLegend .axis line{fill:none;stroke:#98a2b3;shape-rendering:crispEdges}.ml-app .field-value-short{display:inline-block;max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;vertical-align:bottom;white-space:nowrap!important}.ml-app .field-value-long{overflow-wrap:break-word}.ml-app .filter-button{height:16px;opacity:.5;transform:translateY(-1px);width:16px}.ml-app .filter-button .euiIcon{height:12px;width:12px}.ml-app .filter-button:hover{opacity:1}.ml-app .ml-influencers-list{line-height:1.45}.ml-app .ml-influencers-list .field-label{font-size:12px;max-height:14px;max-width:calc(100% - 102px);text-align:left}.ml-app .ml-influencers-list .field-label .field-value{display:inline-block;max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;vertical-align:bottom;white-space:nowrap!important}.ml-app .ml-influencers-list .progress{background-color:#0000;color:#69707d;display:inline-block;height:22px;margin-bottom:0;min-width:70px;width:calc(100% - 34px)}.ml-app .ml-influencers-list .progress .progress-bar-holder{width:calc(100% - 28px)}.ml-app .ml-influencers-list .progress .progress-bar{display:inline-block;height:2px;line-height:18px;margin-top:12px;text-align:right;transition:none}.ml-app .ml-influencers-list .progress.critical .progress-bar{background-color:#fe5050}.ml-app .ml-influencers-list .progress.critical .score-label{border-color:#fe5050}.ml-app .ml-influencers-list .progress.major .progress-bar{background-color:#fba740}.ml-app .ml-influencers-list .progress.major .score-label{border-color:#fba740}.ml-app .ml-influencers-list .progress.minor .progress-bar{background-color:#fdec25}.ml-app .ml-influencers-list .progress.minor .score-label{border-color:#fdec25}.ml-app .ml-influencers-list .progress.warning .progress-bar{background-color:#8bc8fb}.ml-app .ml-influencers-list .progress.warning .score-label{border-color:#8bc8fb}.ml-app .ml-influencers-list .score-label{display:inline;font-size:12px;line-height:14px;margin-left:4px;text-align:center;white-space:nowrap}.ml-app .ml-influencers-list .total-score-label{border:1px solid #d3dae6;border-radius:6px;color:#69707d;display:inline-block;font-size:11px;line-height:14px;margin-top:4px;padding:2px;text-align:center;vertical-align:top;width:32px}.ml-app .ml-influencers-list-tooltip{word-break:break-all}.ml-app .mlJobSelectorFlyoutBody>.euiFlyoutBody__overflow{padding-top:8px}.ml-app .mlJobSelector__ganttBar{background-color:#79adda;border-radius:2px;height:12px}.ml-app .mlJobSelector__ganttBarBackEdge{border-left:1px solid #d6d6d6;border-right:1px solid #d6d6d6;height:16px;margin-bottom:-14px;padding-top:8px}.ml-app .mlJobSelector__ganttBarDashed{border-top:1px dashed #d6d6d6;height:1px}.ml-app .mlJobSelector__ganttBarRunning{animation:progress-bar-stripes 2s linear infinite;background-image:linear-gradient(45deg,#ffffff26 25%,#0000 0,#0000 50%,#ffffff26 0,#ffffff26 75%,#0000 0,#0000);background-size:40px 40px}.ml-app .ml-rule-editor-flyout{font-size:14px}.ml-app .ml-rule-editor-flyout .select-rule-action .rule-detector-description-list{padding-left:16px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel{padding:8px 0}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList{row-gap:4px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__title{padding:0 16px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__description:nth-child(2),.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__title:first-child{border-bottom:1px solid #d3dae6;color:#1a1c21;font-weight:700;padding-bottom:12px}.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__description:nth-child(4),.ml-app .ml-rule-editor-flyout .select-rule-action-panel .euiDescriptionList .euiDescriptionList__title:nth-child(3){padding-top:8px}.ml-app .ml-rule-editor-flyout .scope-enable-checkbox .euiCheckbox__input[disabled]~.euiCheckbox__label{color:inherit}.ml-app .ml-rule-editor-flyout .scope-field-checkbox{margin-right:2px}.ml-app .ml-rule-editor-flyout .scope-field-checkbox .euiCheckbox{margin-top:4px}.ml-app .ml-rule-editor-flyout .scope-field-button{border-bottom:none;pointer-events:none}.ml-app .ml-rule-editor-flyout .scope-edit-filter-link{font-size:12px;line-height:32px}.ml-app .ml-rule-editor-flyout .condition-edit-value-field{height:28px;margin:0 2px;width:170px}.ml-app .ml-rule-editor-flyout .condition-edit-value-field input{height:28px}.ml-app .ml-rule-editor-flyout .euiExpressionButton.disabled{pointer-events:none}.ml-app .ml-rule-editor-flyout .euiExpressionButton.disabled .euiExpressionButton__description,.ml-app .ml-rule-editor-flyout .euiExpressionButton.disabled .euiExpressionButton__value{color:#d3dae6}.ml-app .ml-rule-editor-flyout .text-highlight{font-weight:700}.ml-app .rule-detector-description-list{row-gap:4px}',""]),e.exports=t},517:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var i=a(2),n=a(26),r=a.n(n),s=a(7),l=a(8),o=a(281);a(417);const c=(e={})=>{const{timeRangeSelector:t,autoRefreshSelector:a}=e,{data:{query:{timefilter:{timefilter:n}}}}=Object(o.b)();return Object(i.useEffect)((()=>{!0!==t||n.isTimeRangeSelectorEnabled()?!1===t&&n.isTimeRangeSelectorEnabled()&&n.disableTimeRangeSelector():n.enableTimeRangeSelector(),!0!==a||n.isAutoRefreshSelectorEnabled()?!1===a&&n.isAutoRefreshSelectorEnabled()&&n.disableAutoRefreshSelector():n.enableAutoRefreshSelector()}),[t,a,n]),n},d=()=>{const e=c(),t=Object(i.useMemo)((()=>e.getRefreshIntervalUpdate$().pipe(Object(s.map)(e.getRefreshInterval))),[e]);return r()(t,e.getRefreshInterval())},u=(e=!1)=>{const t=c(),a=Object(i.useMemo)((()=>e?t.getAbsoluteTime.bind(t):t.getTime.bind(t)),[e,t]),n=Object(i.useMemo)((()=>t.getTimeUpdate$().pipe(Object(s.map)(a),Object(s.distinctUntilChanged)(l.isEqual))),[t,a]);return r()(n,a())}},518:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(204);const n=e=>{let t;return Object(i.i)(e)&&void 0!==e.regression.num_top_feature_importance_values?t=e.regression.num_top_feature_importance_values:Object(i.g)(e)&&void 0!==e.classification.num_top_feature_importance_values&&(t=e.classification.num_top_feature_importance_values),t}},544:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(545);case"v8light":return a(547)}},545:function(e,t,a){var i=a(126),n=a(546);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},546:function(e,t,a){var i=a(127),n=a(425),r=a(426);t=i(!1);var s=n(r);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125)}.kbnSolutionAvatar--xxl{background:#1d1e24 url("+s+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},547:function(e,t,a){var i=a(126),n=a(548);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},548:function(e,t,a){var i=a(127),n=a(425),r=a(426);t=i(!1);var s=n(r);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d}.kbnSolutionAvatar--xxl{background:#fff url("+s+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},549:function(e,t,a){e.exports=a.p+"baad30acfe492601d08a0e839c9bb3f5.svg"},550:function(e,t,a){"use strict";e.exports=a(551)},551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(552);a(84),a(427),a(428);var n=i.default({key:"css"}),r=n.flush,s=n.hydrate,l=n.cx,o=n.merge,c=n.getRegisteredStyles,d=n.injectGlobal,u=n.keyframes,m=n.css,p=n.sheet,b=n.cache;t.cache=b,t.css=m,t.cx=l,t.flush=r,t.getRegisteredStyles=c,t.hydrate=s,t.injectGlobal=d,t.keyframes=u,t.merge=o,t.sheet=p},552:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(84),n=a(427),r=a(428);function s(e){return e&&e.__esModule?e:{default:e}}var l=s(i);function o(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function c(e,t,a){var i=[],n=r.getRegisteredStyles(e,i,a);return i.length<2?a:n+t(i)}var d=function e(t){for(var a="",i=0;i<t.length;i++){var n=t[i];if(null!=n){var r=void 0;switch(typeof n){case"boolean":break;case"object":if(Array.isArray(n))r=e(n);else for(var s in r="",n)n[s]&&s&&(r&&(r+=" "),r+=s);break;default:r=n}r&&(a&&(a+=" "),a+=r)}}return a};t.default=function(e){var t=l.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var a=function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];var s=n.serializeStyles(a,t.registered,void 0);return r.insertStyles(t,s,!1),t.key+"-"+s.name};return{css:a,cx:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return c(t.registered,a,d(i))},injectGlobal:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];var r=n.serializeStyles(a,t.registered);o(t,r)},keyframes:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];var r=n.serializeStyles(a,t.registered),s="animation-"+r.name;return o(t,{name:r.name,styles:"@keyframes "+s+"{"+r.styles+"}"}),s},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:r.getRegisteredStyles.bind(null,t.registered),merge:c.bind(null,t.registered,a)}}},553:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(554),n=a(556),r=a(558);function s(e){return e&&e.__esModule?e:{default:e}}var l=s(i),o=s(n),c=/[A-Z]|^ms/g,d=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},m=function(e){return null!=e&&"boolean"!=typeof e},p=s(r).default((function(e){return u(e)?e:e.replace(c,"-$&").toLowerCase()})),b=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(d,(function(e,t,a){return h={name:t,styles:a,next:h},t}))}return 1===o.default[e]||u(e)||"number"!=typeof t||0===t?t:t+"px"};function f(e,t,a){if(null==a)return"";if(void 0!==a.__emotion_styles)return a;switch(typeof a){case"boolean":return"";case"object":if(1===a.anim)return h={name:a.name,styles:a.styles,next:h},a.name;if(void 0!==a.styles){var i=a.next;if(void 0!==i)for(;void 0!==i;)h={name:i.name,styles:i.styles,next:h},i=i.next;return a.styles+";"}return function(e,t,a){var i="";if(Array.isArray(a))for(var n=0;n<a.length;n++)i+=f(e,t,a[n])+";";else for(var r in a){var s=a[r];if("object"!=typeof s)null!=t&&void 0!==t[s]?i+=r+"{"+t[s]+"}":m(s)&&(i+=p(r)+":"+b(r,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var l=f(e,t,s);switch(r){case"animation":case"animationName":i+=p(r)+":"+l+";";break;default:i+=r+"{"+l+"}"}}else for(var o=0;o<s.length;o++)m(s[o])&&(i+=p(r)+":"+b(r,s[o])+";")}return i}(e,t,a);case"function":if(void 0!==e){var n=h,r=a(e);return h=n,f(e,t,r)}}if(null==t)return a;var s=t[a];return void 0!==s?s:a}var h,g=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,a){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,n="";h=void 0;var r=e[0];null==r||void 0===r.raw?(i=!1,n+=f(a,t,r)):n+=r[0];for(var s=1;s<e.length;s++)n+=f(a,t,e[s]),i&&(n+=r[s]);g.lastIndex=0;for(var o,c="";null!==(o=g.exec(n));)c+="-"+o[1];return{name:l.default(n)+c,styles:n,next:h}}},554:function(e,t,a){"use strict";e.exports=a(555)},555:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,a=0,i=0,n=e.length;n>=4;++i,n-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),a=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&a)+(59797*(a>>>16)<<16);switch(n){case 3:a^=(255&e.charCodeAt(i+2))<<16;case 2:a^=(255&e.charCodeAt(i+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(i)))+(59797*(a>>>16)<<16)}return(((a=1540483477*(65535&(a^=a>>>13))+(59797*(a>>>16)<<16))^a>>>15)>>>0).toString(36)}},556:function(e,t,a){"use strict";e.exports=a(557)},557:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},558:function(e,t,a){"use strict";e.exports=a(559)},559:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(a){return void 0===t[a]&&(t[a]=e(a)),t[a]}}},560:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="undefined"!=typeof document,n=function(e,t,a){var n=e.key+"-"+t.name;(!1===a||!1===i&&void 0!==e.compat)&&void 0===e.registered[n]&&(e.registered[n]=t.styles)};t.getRegisteredStyles=function(e,t,a){var i="";return a.split(" ").forEach((function(a){void 0!==e[a]?t.push(e[a]+";"):i+=a+" "})),i},t.insertStyles=function(e,t,a){n(e,t,a);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s="",l=t;do{var o=e.insert(t===l?"."+r:"",l,e.sheet,!0);i||void 0===o||(s+=o),l=l.next}while(void 0!==l);if(!i&&0!==s.length)return s}},t.registerStyles=n},561:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(562);case"v8light":return a(564)}},562:function(e,t,a){var i=a(126),n=a(563);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},563:function(e,t,a){(t=a(127)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#141519}.kbnSolutionNav__flyout .kbnSolutionNav{flex:auto}.kbnSolutionNav{display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px)and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},564:function(e,t,a){var i=a(126),n=a(565);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},565:function(e,t,a){(t=a(127)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#fafbfd}.kbnSolutionNav__flyout .kbnSolutionNav{flex:auto}.kbnSolutionNav{display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px)and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},566:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(567);case"v8light":return a(569)}},567:function(e,t,a){var i=a(126),n=a(568);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},568:function(e,t,a){(t=a(127)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#1d1e24!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},569:function(e,t,a){var i=a(126),n=a(570);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},570:function(e,t,a){(t=a(127)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#fff!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},571:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a(2);var i=a(393),n=a(257),r=a(6);const s=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...s}=t,l=Object(r.jsx)(i.a,s,e);return Object(r.jsx)(n.a,{coreStart:a},l)}const{navigateToUrl:a,currentAppId:s,...l}=t,o=Object(r.jsx)(i.a,l,e);return Object(r.jsx)(n.b,{currentAppId:s,navigateToUrl:a},o)}},572:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(58),n=a(429),r=i.__importDefault(a(574));t.default=function(e,t){r.default(e,t,n.isDeepEqual)}},573:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var i,n,r;if(Array.isArray(t)){if((i=t.length)!=a.length)return!1;for(n=i;0!=n--;)if(!e(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(n=i;0!=n--;)if(!Object.prototype.hasOwnProperty.call(a,r[n]))return!1;for(n=i;0!=n--;){var s=r[n];if(!("_owner"===s&&t.$$typeof||e(t[s],a[s])))return!1}return!0}return t!=t&&a!=a}},574:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2);t.default=function(e,t,a){var n=i.useRef(void 0);n.current&&a(t,n.current)||(n.current=t),i.useEffect(e,n.current)}},575:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a(2);var i=a(22),n=a(109),r=a(6);const s=({children:e,...t})=>Object(r.jsx)(i.Router,t,Object(r.jsx)(n.CompatRouter,null,e))},576:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2);t.default=function(e,t){i.useEffect((function(){return e&&e(),function(){t&&t()}}),[])}},70:function(e,t,a){"use strict";a.r(t),a.d(t,"MlCapabilitiesService",(function(){return check_capabilities_MlCapabilitiesService})),a.d(t,"usePermissionCheck",(function(){return g})),a.d(t,"useUpgradeCheck",(function(){return x})),a.d(t,"checkGetManagementMlJobsResolver",(function(){return j})),a.d(t,"checkCreateJobsCapabilitiesResolver",(function(){return v})),a.d(t,"checkPermission",(function(){return O})),a.d(t,"createPermissionFailureMessage",(function(){return y}));var i=a(4),n=a.n(i),r=a(5),s=a(7),l=a(8),o=a(26),c=a.n(o),d=a(2),u=a(10),m=a(156),p=a(50),b=a(11);let f=Object(p.a)();const h=3e5;class check_capabilities_MlCapabilitiesService{constructor(e){n()(this,"_isLoading$",new s.BehaviorSubject(!0)),n()(this,"_updateRequested$",new s.BehaviorSubject(Date.now())),n()(this,"_capabilities$",new s.BehaviorSubject(null)),n()(this,"_capabilitiesObs$",this._capabilities$.asObservable()),n()(this,"_isPlatinumOrTrialLicense$",new s.BehaviorSubject(null)),n()(this,"_mlFeatureEnabledInSpace$",new s.BehaviorSubject(null)),n()(this,"_isUpgradeInProgress$",new s.BehaviorSubject(null)),n()(this,"capabilities$",this._capabilities$.pipe(Object(s.distinctUntilChanged)(l.isEqual))),n()(this,"_subscription",void 0),this.mlApiServices=e,this.init()}init(){this._subscription=Object(s.combineLatest)([this._updateRequested$,Object(s.timer)(0,h)]).pipe(Object(s.tap)((()=>{this._isLoading$.next(!0)})),Object(s.switchMap)((()=>Object(s.from)(this.mlApiServices.checkMlCapabilities()))),Object(s.retry)({delay:h})).subscribe((e=>{this._capabilities$.next(e.capabilities),this._isPlatinumOrTrialLicense$.next(e.isPlatinumOrTrialLicense),this._mlFeatureEnabledInSpace$.next(e.mlFeatureEnabledInSpace),this._isUpgradeInProgress$.next(e.upgradeInProgress),this._isLoading$.next(!1),f=e.capabilities}))}getCapabilities(){return this._capabilities$.getValue()}isPlatinumOrTrialLicense(){return this._isPlatinumOrTrialLicense$.getValue()}mlFeatureEnabledInSpace(){return this._mlFeatureEnabledInSpace$.getValue()}isUpgradeInProgress$(){return this._isUpgradeInProgress$}isUpgradeInProgress(){return this._isUpgradeInProgress$.getValue()}getCapabilities$(){return this._capabilitiesObs$}refreshCapabilities(){this._updateRequested$.next(Date.now())}destroy(){this._subscription&&this._subscription.unsubscribe()}}function g(e){const{services:{mlServices:{mlCapabilities:t}}}=Object(u.d)(),a=Object(d.useRef)(e),i=c()(t.capabilities$,t.getCapabilities());return Object(d.useMemo)((()=>Array.isArray(a.current)?a.current.map((e=>i[e])):i[a.current]),[i])}function x(){const{services:{mlServices:{mlCapabilities:e}}}=Object(u.d)(),t=c()(e.isUpgradeInProgress$(),e.isUpgradeInProgress());return null!=t&&t}function j({mlCapabilities:e}){return new Promise((async(t,a)=>{try{const i=await Object(s.firstValueFrom)(e.getCapabilities$().pipe(Object(s.filter)((e=>!!e))));return null===i?a():(f=i,!0===(i.isADEnabled&&i.canCreateJob||i.isDFAEnabled&&i.canCreateDataFrameAnalytics||i.isNLPEnabled&&i.canCreateTrainedModels)?t():a({capabilities:i,isPlatinumOrTrialLicense:e.isPlatinumOrTrialLicense(),mlFeatureEnabledInSpace:e.mlFeatureEnabledInSpace(),isUpgradeInProgress:e.isUpgradeInProgress()}))}catch(e){a(e)}}))}function v(e){return new Promise(((t,a)=>{b.ml.checkMlCapabilities().then((async({capabilities:i,isPlatinumOrTrialLicense:n})=>(f=i,f.canCreateJob||!1===n?t(f):(await e(),a())))).catch((async t=>(await e(),a())))}))}function O(e){const t=Object(m.a)();return!0===f[e]&&!0!==t}function y(e){let t="";return Object(m.a)()?t=r.i18n.translate("xpack.ml.privilege.licenseHasExpiredTooltip",{defaultMessage:"Your license has expired."}):"canCreateJob"===e?t=r.i18n.translate("xpack.ml.privilege.noPermission.createMLJobsTooltip",{defaultMessage:"You do not have permission to create Machine Learning jobs."}):"canStartStopDatafeed"===e?t=r.i18n.translate("xpack.ml.privilege.noPermission.startOrStopDatafeedsTooltip",{defaultMessage:"You do not have permission to start or stop datafeeds."}):"canUpdateJob"===e?t=r.i18n.translate("xpack.ml.privilege.noPermission.editJobsTooltip",{defaultMessage:"You do not have permission to edit jobs."}):"canDeleteJob"===e?t=r.i18n.translate("xpack.ml.privilege.noPermission.deleteJobsTooltip",{defaultMessage:"You do not have permission to delete jobs."}):"canCreateCalendar"===e?t=r.i18n.translate("xpack.ml.privilege.noPermission.createCalendarsTooltip",{defaultMessage:"You do not have permission to create calendars."}):"canDeleteCalendar"===e?t=r.i18n.translate("xpack.ml.privilege.noPermission.deleteCalendarsTooltip",{defaultMessage:"You do not have permission to delete calendars."}):"canForecastJob"===e&&(t=r.i18n.translate("xpack.ml.privilege.noPermission.runForecastsTooltip",{defaultMessage:"You do not have permission to run forecasts."})),r.i18n.translate("xpack.ml.privilege.pleaseContactAdministratorTooltip",{defaultMessage:"{message} Please contact your administrator.",values:{message:t}})}},77:function(e,t,a){"use strict";a.r(t),a.d(t,"indexServiceFactory",(function(){return n})),a.d(t,"useMlIndexUtils",(function(){return r}));var i=a(10);function n(e){return{getDataViewIdFromName:async function(t,a){var i;const n=(await e.find(t)).find((e=>e.getIndexPattern()===t));var r;return n?null!==(i=n.id)&&void 0!==i?i:n.getIndexPattern():void 0!==a&&null!==(r=(await e.create({id:void 0,name:t,title:t,timeFieldName:a.data_description.time_field})).id)&&void 0!==r?r:null},getDataViewById:function(t){return t?e.get(t):e.create({})},loadDataViewListItems:async function(){return(await e.getIdsWithTitle()).sort(((e,t)=>e.title.localeCompare(t.title)))}}}const r=()=>n(Object(i.d)().services.data.dataViews)},813:function(e,t,a){"use strict";a.r(t),a.d(t,"AnomalyDetectionSettingsContext",(function(){return n})),a.d(t,"Settings",(function(){return g}));var i=a(2);const n=Object(i.createContext)({canGetFilters:!1,canCreateFilter:!1,canGetCalendars:!1,canCreateCalendar:!1});var r=a(15),s=a(25),l=a(5),o=a(11),c=a(71),d=a(1),u=a(34),m=a(6);const p=()=>{const[e,t]=Object(i.useState)(0),[a,p]=Object(i.useState)(0),{canGetFilters:b,canCreateFilter:f,canGetCalendars:h,canCreateCalendar:g}=Object(i.useContext)(n),{displayErrorToast:x}=Object(c.useToastNotificationService)(),j=Object(u.a)(d.b.CALENDARS_MANAGE),v=Object(u.a)(d.b.CALENDARS_NEW),O=Object(u.a)(d.b.FILTER_LISTS_MANAGE),y=Object(u.a)(d.b.FILTER_LISTS_NEW);return Object(i.useEffect)((()=>{!async function(){if(!0===h)try{const e=await o.ml.calendars();t(e.length)}catch(e){x(e,l.i18n.translate("xpack.ml.settings.anomalyDetection.loadingCalendarsCountErrorMessage",{defaultMessage:"An error occurred obtaining the count of calendars"}))}if(!0===b)try{const e=await o.ml.filters.filtersStats();p(e.length)}catch(e){x(e,l.i18n.translate("xpack.ml.settings.anomalyDetection.loadingFilterListCountErrorMessage",{defaultMessage:"An error occurred obtaining the count of filter lists"}))}}()}),[]),Object(m.jsx)(i.Fragment,null,Object(m.jsx)(s.EuiTitle,null,Object(m.jsx)("h2",null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.anomalyDetectionTitle",defaultMessage:"Anomaly Detection"}))),Object(m.jsx)(s.EuiSpacer,{size:"m"}),Object(m.jsx)(s.EuiFlexGroup,{gutterSize:"xl"},Object(m.jsx)(s.EuiFlexItem,{grow:5},Object(m.jsx)(s.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.calendarsTitle",defaultMessage:"Calendars"}))),Object(m.jsx)(s.EuiSpacer,{size:"s"}),Object(m.jsx)(s.EuiText,{size:"s"},Object(m.jsx)(s.EuiTextColor,{color:"subdued"},Object(m.jsx)("p",null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.calendarsText",defaultMessage:"Calendars contain a list of scheduled events for which you do not want to generate anomalies, such as planned system outages or public holidays."})))),Object(m.jsx)(s.EuiSpacer,{size:"m"}),Object(m.jsx)(s.EuiFlexGroup,{alignItems:"center"},h&&Object(m.jsx)(s.EuiFlexItem,{grow:!1,style:{display:"block"}},Object(m.jsx)(s.EuiText,null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.calendarsSummaryCount",defaultMessage:"You have {calendarsCountBadge} {calendarsCount, plural, one {calendar} other {calendars}}",values:{calendarsCountBadge:Object(m.jsx)(s.EuiBadge,null,e),calendarsCount:e}}))),Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiButtonEmpty,{"data-test-subj":"mlCalendarsMngButton",flush:"left",color:"primary",onClick:j,isDisabled:!1===h},Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.manageCalendarsLink",defaultMessage:"Manage"}))),Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiButtonEmpty,{"data-test-subj":"mlCalendarsCreateButton",flush:"left",color:"primary",onClick:v,isDisabled:!1===g},Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.createCalendarLink",defaultMessage:"Create"}))))),Object(m.jsx)(s.EuiFlexItem,{grow:5},Object(m.jsx)(s.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.filterListsTitle",defaultMessage:"Filter Lists"}))),Object(m.jsx)(s.EuiSpacer,{size:"s"}),Object(m.jsx)(s.EuiText,{size:"s"},Object(m.jsx)(s.EuiTextColor,{color:"subdued"},Object(m.jsx)("p",null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.filterListsText",defaultMessage:"Filter lists contain values that you can use to include or exclude events from the machine learning analysis."})))),Object(m.jsx)(s.EuiSpacer,{size:"m"}),Object(m.jsx)(s.EuiFlexGroup,{alignItems:"center"},b&&Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiText,null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.filterListsSummaryCount",defaultMessage:"You have {filterListsCountBadge} {filterListsCount, plural, one {filter list} other {filter lists}}",values:{filterListsCountBadge:Object(m.jsx)(s.EuiBadge,null,a),filterListsCount:a}}))),Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiButtonEmpty,{"data-test-subj":"mlFilterListsMngButton",flush:"left",color:"primary",onClick:O,isDisabled:!1===b},Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.manageFilterListsLink",defaultMessage:"Manage"}))),Object(m.jsx)(s.EuiFlexItem,{grow:!1},Object(m.jsx)(s.EuiButtonEmpty,{"data-test-subj":"mlFilterListsCreateButton",color:"primary",onClick:y,isDisabled:!1===f},Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.anomalyDetection.createFilterListsLink",defaultMessage:"Create"})))))))};var b=a(142),f=a(10),h=a(134);const g=()=>{const{services:{docLinks:e}}=Object(f.d)(),t=e.links.ml.guide;return Object(m.jsx)(i.Fragment,null,Object(m.jsx)("div",{"data-test-subj":"mlPageSettings"},Object(m.jsx)(h.a,null,Object(m.jsx)(r.FormattedMessage,{id:"xpack.ml.settings.title",defaultMessage:"Settings"})),Object(m.jsx)(p,null)),Object(m.jsx)(b.a,{docLink:t}))}},814:function(e,t,a){"use strict";a.r(t),a.d(t,"Page",(function(){return m})),a.d(t,"preConfiguredJobRedirect",(function(){return f}));var i=a(2),n=a(25),r=a(5),s=a(15),l=a(99),o=a(403),c=a(10),d=a(134),u=a(6);const m=({nextStepPath:e,extraButtons:t})=>{const{contentManagement:a,uiSettings:m}=Object(c.d)().services,p=Object(c.h)(),b=Object(i.useCallback)(((t,a,i)=>{p(`${e}?${"index-pattern"===a?"index":"savedSearchId"}=${encodeURIComponent(t)}`)}),[p,e]);return Object(u.jsx)("div",{"data-test-subj":"mlPageSourceSelection"},Object(u.jsx)(n.EuiPageBody,{restrictWidth:1200},Object(u.jsx)(d.a,null,Object(u.jsx)(s.FormattedMessage,{id:"xpack.ml.newJob.wizard.selectDataViewOrSavedSearch",defaultMessage:"Select data view or saved search"})),Object(u.jsx)(n.EuiPanel,{hasShadow:!1,hasBorder:!0},Object(u.jsx)(l.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:b,showFilter:!0,noItemsMessage:r.i18n.translate("xpack.ml.newJob.wizard.searchSelection.notFoundLabel",{defaultMessage:"No matching data views or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:()=>"search",name:r.i18n.translate("xpack.ml.newJob.wizard.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:()=>"indexPatternApp",name:r.i18n.translate("xpack.ml.newJob.wizard.searchSelection.savedObjectType.dataView",{defaultMessage:"Data view"})}],fixedPageSize:20,services:{contentClient:a.client,uiSettings:m}},Object(u.jsx)(n.EuiFlexGroup,{direction:"row",gutterSize:"s"},Object(u.jsx)(o.a,{onDataViewCreated:e=>{b(e.id,"index-pattern",e.getIndexPattern())},allowAdHocDataView:!0}),t||null)))))};var p=a(73),b=a(125);async function f(e,t,a){const{createdBy:i,job:n,datafeed:r}=p.mlJobService.tempJobCloningObjects;if(!n||!r)return Promise.resolve();{const s=await async function(e,t,a){var i;if(null===a)throw new Error("Data views are not initialized!");const n=t.indices.join(","),r=(await(null==a?void 0:a.find(n))).find((e=>e.getIndexPattern()===n));var s;return void 0===r?null!==(s=(await a.create({id:void 0,name:n,title:n,timeFieldName:e.data_description.time_field})).id)&&void 0!==s?s:null:null!==(i=r.id)&&void 0!==i?i:null}(n,r,e);if(null===s)return Promise.resolve();try{const e=await async function(e,t){let a="";switch(e){case b.a.SINGLE_METRIC:case b.a.SINGLE_METRIC_FROM_LENS:a=b.f.SINGLE_METRIC;break;case b.a.MULTI_METRIC:case b.a.MULTI_METRIC_FROM_LENS:a=b.f.MULTI_METRIC;break;case b.a.POPULATION:a=b.f.POPULATION;break;case b.a.CATEGORIZATION:case b.a.CATEGORIZATION_FROM_PATTERN_ANALYSIS:a=b.f.CATEGORIZATION;break;case b.a.RARE:a=b.f.RARE;break;case b.a.GEO:case b.a.GEO_FROM_LENS:a=b.f.GEO;break;case b.a.ADVANCED:default:a=b.f.ADVANCED}return`jobs/new_job/${a}?index=${t}&_g=()`}(i,s);return await a(`${t}/app/ml/${e}`),Promise.reject()}catch(e){return Promise.resolve()}}}},85:function(e,t,a){"use strict";a.r(t),a.d(t,"fieldFormatServiceFactory",(function(){return l}));var i=a(4),n=a.n(i),r=a(123),s=a(73);class field_format_service_FieldFormatService{constructor(e,t){n()(this,"indexPatternIdsByJob",{}),n()(this,"formatsByJob",{}),this.mlApiServices=e,this.mlIndexUtils=t}async populateFormats(e){(await Promise.all(e.map((async e=>{let t;if(this.mlApiServices){const{jobs:a}=await this.mlApiServices.getJobs({jobId:e});t=a[0]}else t=s.mlJobService.getJob(e);return{jobId:e,dataViewId:await this.mlIndexUtils.getDataViewIdFromName(t.datafeed_config.indices.join(","))}})))).forEach((({jobId:e,dataViewId:t})=>{null!==t&&(this.indexPatternIdsByJob[e]=t)}));const t=e.map((e=>Promise.all([this.getFormatsForJob(e)])));try{return(await Promise.all(t)).forEach(((t,a)=>{this.formatsByJob[e[a]]=t[0]})),this.formatsByJob}catch(e){return console.log("Error populating field formats:",e),{formats:{},error:e}}}getFieldFormat(e,t){if(this.formatsByJob.hasOwnProperty(e))return this.formatsByJob[e][t]}async getFormatsForJob(e){let t;if(this.mlApiServices){const{jobs:a}=await this.mlApiServices.getJobs({jobId:e});t=a[0]}else t=s.mlJobService.getJob(e);const a=t.analysis_config.detectors||[],i=[],n=this.indexPatternIdsByJob[e];if(void 0!==n){const e=await this.mlIndexUtils.getDataViewById(n),t=e.fields;a.forEach((a=>{const n=Object(r.s)(a.function);if(void 0!==a.field_name&&"cardinality"!==n){const n=t.getByName(a.field_name);void 0!==n&&(i[a.detector_index]=e.getFormatterForField(n))}}))}return i}}function l(e,t){return new field_format_service_FieldFormatService(e,t)}},884:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return A}));var i=a(2),n=a.n(i),r=(a(512),a(79)),s=a.n(r),l=a(8),o=a(281),c=a(3),d=a(86),u=a(21),m=a(143),p=a(189),b=a(576),f=a.n(b),h=a(26),g=a.n(h),x=a(179),j=a(17),v=a(156),O=a(130),y=a(122),_=a(228),S=a(6);const E=new c.Storage(window.localStorage),w=({coreStart:e,deps:t,appMountParams:a,isServerless:r,mlFeatures:s,experimentalFeatures:c})=>{var b,h;const j={history:a.history,setHeaderActionMenu:a.setHeaderActionMenu,setBreadcrumbs:e.chrome.setBreadcrumbs},w=g()(e.chrome.getChromeStyle$(),"classic"),A=Object(i.useMemo)((()=>({...e,cases:t.cases,charts:t.charts,contentManagement:t.contentManagement,dashboard:t.dashboard,data:t.data,dataViewEditor:t.dataViewEditor,dataViews:t.data.dataViews,dataVisualizer:t.dataVisualizer,embeddable:t.embeddable,fieldFormats:t.fieldFormats,kibanaVersion:t.kibanaVersion,lens:t.lens,licenseManagement:t.licenseManagement,maps:t.maps,observabilityAIAssistant:t.observabilityAIAssistant,presentationUtil:t.presentationUtil,savedObjectsManagement:t.savedObjectsManagement,savedSearch:t.savedSearch,security:t.security,share:t.share,storage:E,triggersActionsUi:t.triggersActionsUi,uiActions:t.uiActions,unifiedSearch:t.unifiedSearch,usageCollection:t.usageCollection,mlServices:Object(_.a)(e.http,t.data.dataViews,t.usageCollection)})),[t,e]);f()((function(){Object(v.c)(A.mlServices.mlLicense),A.mlServices.mlLicense.setup(t.licensing.license$)}),(function(){A.mlServices.mlLicense.unsubscribe()}));const T=g()(A.mlServices.mlLicense.isLicenseReady$,!1),C=g()(A.mlServices.mlCapabilities.capabilities$,A.mlServices.mlCapabilities.getCapabilities());if(!T||!C)return null;const k=Object(l.pick)(e,"analytics","i18n","theme"),M={...Object(l.pick)(A,["data","http","notifications","theme","uiSettings","i18n"]),uiSettingsKeys:d.UI_SETTINGS,showFrozenDataTierChoice:!r},I=null!==(b=null===(h=t.usageCollection)||void 0===h?void 0:h.components.ApplicationUsageTrackingProvider)&&void 0!==b?b:n.a.Fragment;return Object(S.jsx)(m.a,k,Object(S.jsx)(I,null,Object(S.jsx)(u.KibanaContextProvider,{services:A},Object(S.jsx)(p.a,{storage:E,storageKeys:x.h},Object(S.jsx)(o.a,M,Object(S.jsx)(y.b,{isServerless:r,mlFeatures:s,showMLNavMenu:"classic"===w,experimentalFeatures:c},Object(S.jsx)(O.a,{pageDeps:j})))))))},A=(e,t,a,i,n,r)=>(Object(j.h)({timefilter:t.data.query.timefilter,fieldFormats:t.fieldFormats,config:e.uiSettings,docLinks:e.docLinks,toastNotifications:e.notifications.toasts,recentlyAccessed:e.chrome.recentlyAccessed,application:e.application,http:e.http,maps:t.maps}),a.onAppLeave((e=>e.default())),s.a.render(Object(S.jsx)(w,{coreStart:e,deps:t,appMountParams:a,isServerless:i,mlFeatures:n,experimentalFeatures:r}),a.element),()=>{Object(j.a)(),s.a.unmountComponentAtNode(a.element),t.data.search.session.clear()})}}]);