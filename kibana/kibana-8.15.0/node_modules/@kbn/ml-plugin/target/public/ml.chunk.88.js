/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[88],{236:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var i=t(5),s=t(17);function l(e,a,t,l){let n="",o=`ml-job-${a}`;switch(e){case"explorer":n=i.i18n.translate("xpack.ml.anomalyExplorerPageLabel",{defaultMessage:"Anomaly Explorer"});break;case"timeseriesexplorer":n=i.i18n.translate("xpack.ml.singleMetricViewerPageLabel",{defaultMessage:"Single Metric Viewer"});break;case"jobs/new_job/datavisualizer":n=i.i18n.translate("xpack.ml.dataVisualizerPageLabel",{defaultMessage:"Data Visualizer"}),o=`ml-datavisualizer-${a}`;break;default:return void console.error("addItemToRecentlyAccessed - No page specified")}(null!=l?l:Object(s.e)()).add(t,`ML - ${a} - ${n}`,o)}},869:function(e,a,t){"use strict";t.r(a),t.d(a,"Page",(function(){return M}));var i=t(2),s=t.n(i),l=t(5),n=t(25),o=t(15),r=t(131),c=t(10),d=t(122),b=t(120),u=t.n(b),j=t(6);const p=({icon:e,iconAreaLabel:a,title:t,description:i,onClick:s,href:l,isDisabled:o,"data-test-subj":r})=>{const c={...l?{href:l}:{},...s?{onClick:s}:{}};return Object(j.jsx)(n.EuiPanel,{style:{cursor:o?"not-allowed":void 0},hasShadow:!1,hasBorder:!0},Object(j.jsx)(n.EuiLink,u()({style:{display:"block",pointerEvents:o?"none":void 0,background:"transparent",outline:"none"},"data-test-subj":r,color:"subdued"},c),Object(j.jsx)(n.EuiFlexGroup,{gutterSize:"l",responsive:!0},Object(j.jsx)(n.EuiFlexItem,{grow:!1,style:{paddingTop:"8px"}},"string"==typeof e?Object(j.jsx)(n.EuiIcon,{size:"xl",type:e,"aria-label":a}):e),Object(j.jsx)(n.EuiFlexItem,null,Object(j.jsx)(n.EuiTitle,{size:"s"},Object(j.jsx)("h3",null,t)),Object(j.jsx)(n.EuiText,{color:"subdued"},Object(j.jsx)("p",null,i))))))},x=({config:e,indexPattern:a,savedSearch:t})=>{const{services:{http:{basePath:i}}}=Object(c.d)(),s=null===t?`index=${a.id}`:`savedSearchId=${t.id}`,l=`${i.get()}/app/ml/jobs/new_job/recognize?id=${e.id}&${s}`;let o=null;return o=e.logo&&e.logo.icon?Object(j.jsx)(n.EuiIcon,{type:e.logo.icon,size:"xl"}):e.logo&&e.logo.src?Object(j.jsx)("img",{alt:"",src:e.logo.src}):Object(j.jsx)("h3",{className:"euiTitle euiTitle--small"},e.id),Object(j.jsx)(n.EuiFlexItem,null,Object(j.jsx)(p,{"data-test-subj":`mlRecognizerCard ${e.id}`,href:l,title:e.title,description:e.description,icon:o}))};var g=t(11);class data_recognizer_DataRecognizer extends i.Component{constructor(e){super(e),this.state={results:[]},this.indexPattern=e.indexPattern,this.savedSearch=e.savedSearch,this.className=e.className,this.results=e.results}componentDidMount(){g.ml.recognizeIndex({indexPatternTitle:this.indexPattern.title}).then((e=>{e.sort(((e,a)=>e.title.localeCompare(a.title)));const a=e.map((e=>Object(j.jsx)(x,{key:e.id,config:e,indexPattern:this.indexPattern,savedSearch:this.savedSearch})));"object"==typeof this.results&&(this.results.count=a.length,"function"==typeof this.results.onChange&&this.results.onChange()),this.setState({results:a})})).catch((e=>{console.error("Error attempting to recognize index",e)}))}render(){return Object(j.jsx)(s.a.Fragment,null,this.state.results)}}var m=t(236);const w=Object(j.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(j.jsx)("path",{d:"M16 32C7.16344 32 0 24.8366 0 16C0 7.16344 7.16344 0 16 0C24.8366 0 32 7.16344 32 16H30C30 8.26801 23.732 2 16 2C8.26801 2 2 8.26801 2 16C2 23.732 8.26801 30 16 30V32Z",fill:"#343741"}),Object(j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 15H23V17H17V23H15V17H9V15H15V9H17V15ZM32 30V32H20V30H32ZM32 22L20 22V24L32 24V22ZM32 26V28H20V26H32Z",fill:"#017D73"}));var h=t(1);const f=Object(j.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(j.jsx)("path",{d:"M16 32C7.16344 32 0 24.8366 0 16C0 7.16344 7.16344 0 16 0C24.8366 0 32 7.16344 32 16H30C30 8.26801 23.732 2 16 2C8.26801 2 2 8.26801 2 16C2 23.732 8.26801 30 16 30V32Z",fill:"#343741"}),Object(j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 15H23V17H17V23H15V17H9V15H15V9H17V15ZM32 30V32H20V30H32ZM32 22L20 22V24L32 24V22ZM32 26V28H20V26H32Z",fill:"#017D73"})),T=Object(j.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(j.jsx)("g",{clipPath:"url(#clip0_180_356)"},Object(j.jsx)("path",{d:"M16 32C7.16344 32 0 24.8366 0 16C0 7.16344 7.16344 0 16 0C24.8366 0 32 7.16344 32 16H30C30 8.26801 23.732 2 16 2C8.26801 2 2 8.26801 2 16C2 23.732 8.26801 30 16 30V32Z",fill:"#343741"}),Object(j.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 15H17V9H15V15H9V17H15V23H17V17H23V15ZM22 24.1957C22 27.3292 25.4265 32 27 32C28.5735 32 32 27.3292 32 24.1957C32 24.1624 31.9997 24.1292 31.9991 24.096C31.9997 24.0641 32 24.0321 32 24C32 21.2386 29.7614 19 27 19C24.2386 19 22 21.2386 22 24C22 24.0321 22.0003 24.0641 22.0009 24.096C22.0003 24.1292 22 24.1624 22 24.1957ZM27 26C28.1046 26 29 25.1046 29 24C29 22.8954 28.1046 22 27 22C25.8954 22 25 22.8954 25 24C25 25.1046 25.8954 26 27 26Z",fill:"#007E77"})),Object(j.jsx)("defs",null,Object(j.jsx)("clipPath",{id:"clip0_180_356"},Object(j.jsx)("rect",{width:"32",height:"32",fill:"white"}))));var O=t(34),y=t(134);const M=()=>{var e,a;const{services:{share:t,notifications:{toasts:b}}}=Object(c.d)(),u=Object(d.c)(),x=Object(c.h)(),g=Object(O.a)(h.b.ANOMALY_DETECTION_CREATE_JOB_SELECT_INDEX),[M,z]=Object(i.useState)(0),{selectedDataView:v,selectedSavedSearch:k}=u,V=v.isTimeBased();Object(i.useEffect)((()=>{V||b.addWarning({title:l.i18n.translate("xpack.ml.dataViewNotBasedOnTimeSeriesNotificationTitle",{defaultMessage:"The data view {dataViewIndexPattern} is not based on a time series",values:{dataViewIndexPattern:v.getIndexPattern()}}),text:l.i18n.translate("xpack.ml.dataViewNotBasedOnTimeSeriesNotificationDescription",{defaultMessage:"Anomaly detection only runs over time-based indices"})})}),[V,v,b]);const C=Object(i.useMemo)((()=>[...v.fields.getByType(r.a.GEO_POINT),...v.fields.getByType(r.a.GEO_SHAPE)].length>0),[v]),J=!V&&k?l.i18n.translate("xpack.ml.newJob.wizard.jobType.dataViewFromSavedSearchNotTimeBasedMessage",{defaultMessage:"{savedSearchTitle} uses data view {dataViewName} which is not time based",values:{savedSearchTitle:null!==(e=k.title)&&void 0!==e?e:"",dataViewName:v.getName()}}):l.i18n.translate("xpack.ml.newJob.wizard.jobType.dataViewNotTimeBasedMessage",{defaultMessage:"Data view {dataViewName} is not time based",values:{dataViewName:v.getName()}}),E=k?l.i18n.translate("xpack.ml.newJob.wizard.jobType.savedSearchPageTitleLabel",{defaultMessage:"saved search {savedSearchTitle}",values:{savedSearchTitle:null!==(a=k.title)&&void 0!==a?a:""}}):l.i18n.translate("xpack.ml.newJob.wizard.jobType.dataViewPageTitleLabel",{defaultMessage:"data view {dataViewName}",values:{dataViewName:v.getName()}}),S={count:0,onChange(){z(S.count)}},L=()=>k?`?savedSearchId=${k.id}`:`?index=${v.id}`,D=[{onClick:()=>x(`/jobs/new_job/single_metric${L()}`),icon:{type:"createSingleMetricJob",ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.singleMetricAriaLabel",{defaultMessage:"Single metric job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.singleMetricTitle",{defaultMessage:"Single metric"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.singleMetricDescription",{defaultMessage:"Detect anomalies in a single time series."}),id:"mlJobTypeLinkSingleMetricJob"},{onClick:()=>x(`/jobs/new_job/multi_metric${L()}`),icon:{type:"createMultiMetricJob",ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.multiMetricAriaLabel",{defaultMessage:"Multi-metric job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.multiMetricTitle",{defaultMessage:"Multi-metric"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.multiMetricDescription",{defaultMessage:"Detect anomalies with one or more metrics and optionally split the analysis."}),id:"mlJobTypeLinkMultiMetricJob"},{onClick:()=>x(`/jobs/new_job/population${L()}`),icon:{type:"createPopulationJob",ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.populationAriaLabel",{defaultMessage:"Population job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.populationTitle",{defaultMessage:"Population"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.populationDescription",{defaultMessage:"Detect unusual activity in a population. Recommended for high cardinality data."}),id:"mlJobTypeLinkPopulationJob"},{onClick:()=>x(`/jobs/new_job/advanced${L()}`),icon:{type:"createAdvancedJob",ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.advancedAriaLabel",{defaultMessage:"Advanced job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.advancedTitle",{defaultMessage:"Advanced"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.advancedDescription",{defaultMessage:"Use the full range of options to create a job for more advanced use cases."}),id:"mlJobTypeLinkAdvancedJob"},{onClick:()=>x(`/jobs/new_job/categorization${L()}`),icon:{type:w,ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.categorizationAriaLabel",{defaultMessage:"Categorization job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.categorizationTitle",{defaultMessage:"Categorization"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.categorizationDescription",{defaultMessage:"Group log messages into categories and detect anomalies within them."}),id:"mlJobTypeLinkCategorizationJob"},{onClick:()=>x(`/jobs/new_job/rare${L()}`),icon:{type:f,ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.rareAriaLabel",{defaultMessage:"Rare job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.rareTitle",{defaultMessage:"Rare"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.rareDescription",{defaultMessage:"Detect rare values in time series data."}),id:"mlJobTypeLinkrareJob"}];return C&&D.push({onClick:()=>x(`/jobs/new_job/geo${L()}`),icon:{type:T,ariaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.geoAriaLabel",{defaultMessage:"Geo job"})},title:l.i18n.translate("xpack.ml.newJob.wizard.jobType.geoTitle",{defaultMessage:"Geo"}),description:l.i18n.translate("xpack.ml.newJob.wizard.jobType.geoDescription",{defaultMessage:"Detect anomalies in the geographic location of the data."}),id:"mlJobTypeLinkGeoJob"}),Object(j.jsx)("div",{"data-test-subj":"mlPageJobTypeSelection"},Object(j.jsx)(y.a,null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.createJobFromTitle",defaultMessage:"Create a job from the {pageTitleLabel}",values:{pageTitleLabel:E}})),!1===V&&Object(j.jsx)(s.a.Fragment,null,Object(j.jsx)(n.EuiCallOut,{title:J,color:"warning",iconType:"warning"},Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.howToRunAnomalyDetectionDescription",defaultMessage:"Anomaly detection can only be run over indices which are time based."}),Object(j.jsx)("br",null),Object(j.jsx)(n.EuiLink,{onClick:g},Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.selectDifferentIndexLinkText",defaultMessage:"Select a different data view or saved search"}))),Object(j.jsx)(n.EuiSpacer,{size:"xxl"})),Object(j.jsx)("div",{hidden:0===M},Object(j.jsx)(n.EuiTitle,{size:"s"},Object(j.jsx)("h2",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.useSuppliedConfigurationTitle",defaultMessage:"Use preconfigured jobs"}))),Object(j.jsx)(n.EuiSpacer,{size:"s"}),Object(j.jsx)(n.EuiText,null,Object(j.jsx)("p",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.useSuppliedConfigurationDescription",defaultMessage:"The fields in your data match known configurations. Create a set of preconfigured jobs."}))),Object(j.jsx)(n.EuiSpacer,{size:"m"}),Object(j.jsx)(n.EuiFlexGrid,{gutterSize:"l",columns:4},Object(j.jsx)(data_recognizer_DataRecognizer,{indexPattern:v,savedSearch:k,results:S})),Object(j.jsx)(n.EuiSpacer,{size:"xxl"})),Object(j.jsx)(n.EuiTitle,{size:"s"},Object(j.jsx)("h2",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.useWizardTitle",defaultMessage:"Use a wizard"}))),Object(j.jsx)(n.EuiSpacer,{size:"m"}),Object(j.jsx)(n.EuiFlexGrid,{gutterSize:"l",columns:4},D.map((({onClick:e,icon:a,title:t,description:i,id:s})=>Object(j.jsx)(n.EuiFlexItem,{key:s},Object(j.jsx)(p,{"data-test-subj":s,onClick:e,icon:a.type,iconAreaLabel:a.ariaLabel,title:t,description:i,isDisabled:!V}))))),Object(j.jsx)(n.EuiSpacer,{size:"xxl"}),Object(j.jsx)(n.EuiText,null,Object(j.jsx)(n.EuiTitle,{size:"s"},Object(j.jsx)("h3",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.learnMoreAboutDataTitle",defaultMessage:"Learn more about your data"}))),Object(j.jsx)("p",null,Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.learnMoreAboutDataDescription",defaultMessage:"If you're not sure what type of job to create, first explore the fields and metrics in your data."}))),Object(j.jsx)(n.EuiSpacer,{size:"m"}),Object(j.jsx)(n.EuiFlexGrid,{gutterSize:"l",columns:4},Object(j.jsx)(n.EuiFlexItem,null,Object(j.jsx)(p,{icon:"dataVisualizer",iconAreaLabel:l.i18n.translate("xpack.ml.newJob.wizard.jobType.dataVisualizerAriaLabel",{defaultMessage:"Data Visualizer"}),title:Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.dataVisualizerTitle",defaultMessage:"Data Visualizer"}),description:Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.newJob.wizard.jobType.dataVisualizerDescription",defaultMessage:"Learn more about the characteristics of your data and identify the fields for analysis with machine learning."}),onClick:async()=>{var e;const a=k?null!==(e=k.title)&&void 0!==e?e:"":v.getName(),i=t.url.locators.get(h.a),s=await i.getUrl({page:h.b.DATA_VISUALIZER_INDEX_VIEWER,pageState:{...null!=k&&k.id?{savedSearchId:k.id}:{index:v.id}}},{absolute:!0});Object(m.a)(h.b.DATA_VISUALIZER_INDEX_VIEWER,a,s),x(`/jobs/new_job/datavisualizer${L()}`)}}))))}}}]);