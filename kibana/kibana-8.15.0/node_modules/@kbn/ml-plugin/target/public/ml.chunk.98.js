/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[98],{883:function(e,a,t){"use strict";t.r(a),t.d(a,"Page",(function(){return S}));var s=t(2),c=t.n(s),n=t(15),r=t(142),i=t(10),d=t(134),l=t(25),o=t(5),u=t(69),j=t(99),b=t(403),v=t(71),h=t(166),O=t(6);const m=()=>{const{services:{savedSearch:e,data:{dataViews:a},contentManagement:t,uiSettings:n}}=Object(i.d)(),r=Object(i.h)(),[d,m]=Object(s.useState)(!1),[S,x]=Object(s.useState)(),g=Object(v.useToastNotificationService)(),p=async(t,s,c,n)=>{let i="";if("index-pattern"===s&&n)i=Object(u.a)(n,"attributes.title");else if("search"===s)try{var d,l;i=null!==(d=null===(l=(await Object(h.b)({savedSearchService:e,dataViewsService:a})(t)).dataView)||void 0===l?void 0:l.title)&&void 0!==d?d:""}catch(e){return void g.displayErrorToast(e,o.i18n.translate("xpack.ml.dataFrame.analytics.create.searchSelection.errorGettingDataViewTitle",{defaultMessage:"Error loading data view used by the saved search"}))}if(Object(h.d)(i)&&n)return m(!0),void x("search"===s?o.i18n.translate("xpack.ml.dataFrame.analytics.create.searchSelection.CcsErrorCallOutBody",{defaultMessage:"The saved search ''{savedSearchTitle}'' uses the data view ''{dataViewName}''.",values:{savedSearchTitle:Object(u.a)(n,"attributes.title"),dataViewName:i}}):void 0);await r(`/data_frame_analytics/new_job?${"index-pattern"===s?"index":"savedSearchId"}=${encodeURIComponent(t)}`)};return Object(O.jsx)("div",{"data-test-subj":"mlDFAPageSourceSelection"},Object(O.jsx)(l.EuiPageBody,{restrictWidth:1200},Object(O.jsx)(l.EuiPanel,{hasShadow:!1,hasBorder:!0},d&&Object(O.jsx)(c.a.Fragment,null,Object(O.jsx)(l.EuiCallOut,{"data-test-subj":"analyticsCreateSourceIndexModalCcsErrorCallOut",title:o.i18n.translate("xpack.ml.dataFrame.analytics.create.searchSelection.CcsErrorCallOutTitle",{defaultMessage:"Data views using cross-cluster search are not supported."}),color:"danger"},"string"==typeof S&&Object(O.jsx)("p",null,S)),Object(O.jsx)(l.EuiSpacer,{size:"m"})),Object(O.jsx)(j.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:p,showFilter:!0,noItemsMessage:o.i18n.translate("xpack.ml.dataFrame.analytics.create.searchSelection.notFoundLabel",{defaultMessage:"No matching indices or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:()=>"search",name:o.i18n.translate("xpack.ml.dataFrame.analytics.create.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:()=>"indexPatternApp",name:o.i18n.translate("xpack.ml.dataFrame.analytics.create.searchSelection.savedObjectType.dataView",{defaultMessage:"Data view"})}],fixedPageSize:20,services:{contentClient:t.client,uiSettings:n}},Object(O.jsx)(b.a,{onDataViewCreated:e=>{p(e.id,"index-pattern",e.getIndexPattern())},allowAdHocDataView:!0})))))},S=()=>{const{services:{docLinks:e}}=Object(i.d)(),a=e.links.ml.dataFrameAnalytics;return Object(O.jsx)(c.a.Fragment,null,Object(O.jsx)(d.a,null,Object(O.jsx)(n.FormattedMessage,{id:"xpack.ml.dataframe.analyticsSourceSelection.title",defaultMessage:"New analytics job / Choose a source data view"})),Object(O.jsx)(m,null),Object(O.jsx)(r.a,{docLink:a}))}}}]);