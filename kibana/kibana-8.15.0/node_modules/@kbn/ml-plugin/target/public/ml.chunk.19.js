/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[19,77],{143:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var i=n(120),o=n.n(i),r=n(2),s=n(88),a=n(149),l=n(26),c=n.n(l),u=n(84),d=n.n(u),m=n(25);const p="eui-global",b="eui-utilities",g={darkMode:!1};var f=n(6);const j=[m.euiStylisPrefixer],y=d()({key:"css",stylisPlugins:j,container:document.querySelector('meta[name="emotion"]')}),O=d()({key:p,stylisPlugins:j,container:document.querySelector(`meta[name="${p}"]`)}),h=d()({key:b,stylisPlugins:j,container:document.querySelector(`meta[name="${b}"]`)});y.compat=!0,O.compat=!0,h.compat=!0;const x={default:y,global:O,utility:h},v=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:i,children:o})=>{const s=c()(e,g),a=Object(r.useMemo)((()=>(e=>e.darkMode?m.COLOR_MODES_STANDARD.dark:m.COLOR_MODES_STANDARD.light)(s)),[s]),l=n||a,u=!1!==t&&void 0;return Object(f.jsx)(m.EuiProvider,{cache:x,modify:i,colorMode:l,globalStyles:u,utilityClasses:u},o)},E=({children:e,i18n:t,...n})=>Object(s.useIsNestedEuiProvider)()?(Object(a.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(f.jsx)(t.Context,null,e)):Object(f.jsx)(v,n,Object(f.jsx)(t.Context,null,e));var S=n(89);const C=({children:e,...t})=>Object(f.jsx)(E,o()({globalStyles:!1},t),Object(f.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(f.jsx)(S.KibanaErrorBoundary,null,e)))},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(2),o=n(79),r=n.n(o),s=n(143),a=n(6);const l=(e,t)=>n=>(r.a.render(Object(a.jsx)(s.a,t,e),n),()=>r.a.unmountComponentAtNode(n));n(4),n(5),i.Component},179:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"h",(function(){return u}));const i="ml.singleMetricViewer.partitionFields",o="ml.jobSelectorFlyout.applyTimeRange",r="ml.frozenDataTierPreference",s="ml.anomalyExplorerPanels",a="ml.notificationsLastCheckedAt",l="ml.overviewPanels",c="ml.elserUpdateCalloutDismissed",u=[i,o,"ml.gettingStarted.isDismissed",r,s,a,l,c]},189:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n(2),o=n.n(i),r=n(8),s=n(67),a=n(6);const l=o.a.createContext({value:null,setValue(){throw new Error("MlStorageContext set method is not implemented")},removeValue(){throw new Error("MlStorageContext remove method is not implemented")}});function c({children:e,storage:t,storageKeys:n}){const o=Object(i.useMemo)((()=>n.reduce(((e,n)=>(e[n]=t.get(n),e)),{})),[t,n]),[c,u]=Object(i.useState)(o),d=Object(i.useCallback)(((e,n)=>{t.set(e,n),u((t=>({...t,[e]:n})))}),[t]),m=Object(i.useCallback)((e=>{t.remove(e),u((t=>Object(r.omit)(t,e)))}),[t]);Object(i.useEffect)((function(){const e=e=>{(function(e,t){return t.includes(e)})(e.key,n)&&(Object(s.a)(e.newValue)?u((t=>({...t,[e.key]:"string"==typeof e.newValue?JSON.parse(e.newValue):e.newValue}))):u((t=>Object(r.omit)(t,e.key))))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[n]);const p=Object(i.useMemo)((()=>({value:c,setValue:d,removeValue:m})),[c,d,m]);return Object(a.jsx)(l.Provider,{value:p},e)}function u(e,t){const{value:n,setValue:o,removeValue:r}=Object(i.useContext)(l);return[Object(i.useMemo)((()=>{var i;return null!==(i=null==n?void 0:n[e])&&void 0!==i?i:t}),[n,e,t]),Object(i.useCallback)((t=>{Object(s.a)(t)?o(e,t):r(e)}),[o,r,e])]}},199:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return entity_control_EntityControl}));var i=n(4),o=n.n(i),r=n(8),s=n(2),a=n(25),l=n(15),c=n(5),u=n(335),d=n(6);const m=({entity:e,isModelPlotEnabled:t,config:n,onConfigChange:i})=>{var o,r;const[u,m]=Object(s.useState)(!1),p=t&&!(null!=n&&n.anomalousOnly),b=Object(s.useMemo)((()=>[{id:"anomaly_score",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.sortByScoreLabel",{defaultMessage:"Anomaly score"}),disabled:p},{id:"name",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.sortByNameLabel",{defaultMessage:"Name"})}]),[t,n]),g=Object(s.useMemo)((()=>[{id:"asc",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.ascOptionsOrderLabel",{defaultMessage:"asc"})},{id:"desc",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.descOptionsOrderLabel",{defaultMessage:"desc"})}]),[]);return Object(d.jsx)(a.EuiPopover,{ownFocus:!0,style:{height:"40px"},button:Object(d.jsx)(a.EuiButtonIcon,{color:"text",iconSize:"m",iconType:"gear","aria-label":c.i18n.translate("xpack.ml.timeSeriesExplorer.editControlConfiguration",{defaultMessage:"Edit field configuration"}),onClick:()=>{m(!u)},"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigButton_${e.fieldName}`}),isOpen:u,closePopover:()=>{m(!1)}},Object(d.jsx)("div",{"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigPopover_${e.fieldName}`},Object(d.jsx)(a.EuiFormRow,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.sortByLabel",defaultMessage:"Sort by"})},Object(d.jsx)(a.EuiRadioGroup,{options:b,idSelected:p?"name":null==n||null===(o=n.sort)||void 0===o?void 0:o.by,onChange:t=>{i(e.fieldType,{sort:{order:n.sort.order,by:t}})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigSortBy_${e.fieldName}`})),Object(d.jsx)(a.EuiFormRow,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.orderLabel",defaultMessage:"Order"})},Object(d.jsx)(a.EuiRadioGroup,{options:g,idSelected:null==n||null===(r=n.sort)||void 0===r?void 0:r.order,onChange:t=>{i(e.fieldType,{sort:{by:n.sort.by,order:t}})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigOrder_${e.fieldName}`})),Object(d.jsx)(a.EuiHorizontalRule,{margin:"s"}),Object(d.jsx)(a.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(d.jsx)(a.EuiFlexItem,{grow:!1},t?Object(d.jsx)(a.EuiSwitch,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.anomalousOnlyLabel",defaultMessage:"Anomalous only"}),checked:n.anomalousOnly,onChange:t=>{const o=t.target.checked;i(e.fieldType,{anomalousOnly:o,sort:{order:n.sort.order,by:n.sort.by}})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigAnomalousOnly_${e.fieldName}`}):Object(d.jsx)(a.EuiSwitch,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.applyTimeRangeLabel",defaultMessage:"Apply time range"}),checked:n.applyTimeRange,onChange:t=>{const n=t.target.checked;i(e.fieldType,{applyTimeRange:n})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigAnomalousOnly_${e.fieldName}`})),Object(d.jsx)(a.EuiFlexItem,{grow:!1,style:{width:"16px"}},!t||null!=n&&n.anomalousOnly?null:Object(d.jsx)(a.EuiToolTip,{position:"top",content:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.nonAnomalousResultsWithModelPlotInfo",defaultMessage:"The list contains values from the model plot results."})},Object(d.jsx)(a.EuiIcon,{tabIndex:0,type:"iInCircle",color:"subdued"})),t||null!=n&&n.applyTimeRange?null:Object(d.jsx)(a.EuiToolTip,{position:"top",content:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.ignoreTimeRangeInfo",defaultMessage:"The list contains values from all anomalies created during the lifetime of the job."})},Object(d.jsx)(a.EuiIcon,{tabIndex:0,type:"iInCircle",color:"subdued"}))))))},p=c.i18n.translate("xpack.ml.timeSeriesExplorer.emptyPartitionFieldLabel.",{defaultMessage:'"" (empty string)'});class entity_control_EntityControl extends s.Component{constructor(...e){super(...e),o()(this,"inputRef",void 0),o()(this,"state",{selectedOptions:void 0,options:void 0,isLoading:!1,isEntityConfigPopoverOpen:!1}),o()(this,"onChange",(e=>{var t,n,i;const o=e.length>0?e:void 0;this.setState({selectedOptions:o});const r=Array.isArray(o)&&null!==(null===(t=o[0].value)||void 0===t?void 0:t.value)&&null!==(n=null===(i=o[0].value)||void 0===i?void 0:i.value)&&void 0!==n?n:null;this.props.entityFieldValueChanged(this.props.entity,r)})),o()(this,"onManualInput",(e=>{if(!e.trim().toLowerCase())return;const t={label:e,value:{value:e}};this.setState({selectedOptions:[t]}),this.props.entityFieldValueChanged(this.props.entity,e)})),o()(this,"onSearchChange",(e=>{this.setState({isLoading:!0,options:[]}),this.props.onSearchChange(this.props.entity,e)})),o()(this,"renderOption",((e,t)=>{var n;const i=Object(d.jsx)(a.EuiHighlight,{search:t},e.label);return null!==(n=e.value)&&void 0!==n&&n.maxRecordScore?Object(d.jsx)(a.EuiHealth,{color:Object(u.a)(e.value.maxRecordScore)},i):i}))}componentDidUpdate(e){const{entity:t,forceSelection:n,isLoading:i,options:o}=this.props,{options:s,selectedOptions:a}=this.state,{fieldValue:l}=t;let c=a;void 0===a&&null!==l||Array.isArray(a)&&a[0].value!==l&&null!==l?c=[{label:""===l?p:l,value:l}]:Array.isArray(a)&&null===l&&(c=void 0),!0===e.isLoading&&!1===i&&this.setState({isLoading:!1,selectedOptions:c}),Object(r.isEqual)(o,s)||this.setState({options:o}),n&&this.inputRef&&this.inputRef.focus()}render(){const{entity:e,forceSelection:t,isModelPlotEnabled:n,config:i,onConfigChange:o}=this.props,{isLoading:r,options:s,selectedOptions:u}=this.state,p=Object(d.jsx)(a.EuiComboBox,{async:!0,isLoading:r,inputRef:e=>{e&&(this.inputRef=e)},style:{minWidth:"300px"},placeholder:c.i18n.translate("xpack.ml.timeSeriesExplorer.enterValuePlaceholder",{defaultMessage:"Enter value"}),singleSelection:{asPlainText:!0},onCreateOption:this.onManualInput,customOptionText:c.i18n.translate("xpack.ml.timeSeriesExplorer.setManualInputHelperText",{defaultMessage:"No matching values"}),options:s,selectedOptions:u,onChange:this.onChange,onSearchChange:this.onSearchChange,isClearable:!1,renderOption:this.renderOption,"data-test-subj":`mlSingleMetricViewerEntitySelection ${e.fieldName}`,prepend:Object(d.jsx)(m,{entity:e,isModelPlotEnabled:n,config:i,onConfigChange:o})}),b=Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.selectFieldMessage",defaultMessage:"Select {fieldName}",values:{fieldName:e.fieldName}});return Object(d.jsx)(a.EuiFlexItem,{grow:!1},Object(d.jsx)(a.EuiFormRow,{label:e.fieldName,helpText:t?b:null},p))}}},335:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(140),o=n(175);function r(e){return e>=i.a.CRITICAL?o.a.CRITICAL:e>=i.a.MAJOR?o.a.MAJOR:e>=i.a.MINOR?o.a.MINOR:e>=i.a.WARNING?o.a.WARNING:e>=i.a.LOW?o.a.LOW:o.a.BLANK}}}]);