/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[63],{140:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));let n=function(e){return e[e.CRITICAL=75]="CRITICAL",e[e.MAJOR=50]="MAJOR",e[e.MINOR=25]="MINOR",e[e.WARNING=3]="WARNING",e[e.LOW=0]="LOW",e}({})},175:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n={CRITICAL:"#fe5050",MAJOR:"#fba740",MINOR:"#fdec25",WARNING:"#8bc8fb",LOW:"#d2e9f7",BLANK:"#ffffff"}},254:function(e,t,a){"use strict";a.d(t,"c",(function(){return A})),a.d(t,"b",(function(){return j})),a.d(t,"a",(function(){return x}));var n=a(8),s=a(2),i=a.n(s),l=a(67),r=a(118),o=a(29),u=a(335),c=a(529),d=a(25),m=a(13),b=a(45),f=a(6);const A=({columnId:e,data:t,fieldFormats:a})=>{const s=j(a);if(!Object(l.a)(t))return;const i=(({data:e,fieldName:t})=>{const a=e.find((e=>e.field===t));if(null!=a&&null!=a.value)return a.value})({data:t,fieldName:e}),r=(e=>{const t=Array.isArray(e)?e.join():e;return Object(n.isEmpty)(t)?"—":"object"==typeof t?JSON.stringify(t):t})(i);return s(e,r)};function j(e){const t=Object(b.a)(e);return(e,a)=>{if(!Object(l.a)(a))return Object(f.jsx)(i.a.Fragment,null,"—");switch(e){case r.h:case r.b:case m.c:return Object(f.jsx)(i.a.Fragment,null,t(o.FIELD_FORMAT_IDS.DATE)(a));case r.a:return Object(f.jsx)(i.a.Fragment,null,t(o.FIELD_FORMAT_IDS.DURATION,{inputFormat:"microseconds",outputFormat:"humanizePrecise"})(a));case m.b:let e;return e="number"==typeof a?a:a.split(",").map(Number).at(-1),Object(f.jsx)(d.EuiHealth,{textSize:"xs",color:Object(u.a)(e)},Object(c.a)(e));default:return Object(f.jsx)(i.a.Fragment,null,a)}}}function x(e){const t=j(e);return(e,a)=>({title:m.i[e],description:t(e,a)})}},314:function(e,t,a){"use strict";a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return T}));var n=a(2),s=a.n(n),i=a(5),l=a(118),r=a(96);const o="management";var u=a(8),c=a(25),d=a(67),m=a(6);const b=({alert:e})=>{const t=e[l.e];return Object(m.jsx)(c.EuiTitle,{size:"s"},Object(m.jsx)("h3",null,t))},f=(e,t)=>()=>({body:({alert:a,id:n})=>Object(m.jsx)(c.EuiPanel,null,Object(m.jsx)(c.EuiDescriptionList,{listItems:e.map((e=>{const n=Object(u.get)(a,e.id),s=Array.isArray(n)?n.at(-1):n;return{title:e.displayAsText,description:Object(d.a)(s)?t(e.id,s):"—"}})),type:"column",columnWidths:[1,3]})),header:b,footer:null});var A=a(13),j=a(254),x=a(0),p=a(10);function g(e){var t,a,o,u,d,b;const{alert:f,refresh:A}=e,{cases:j,triggersActionsUi:g}=Object(p.d)().services,O=null==j?void 0:j.helpers.canUseCases([r.APP_ID]),[T,I]=Object(n.useState)(!1),y=null!==(t=null===(a=f[l.g])||void 0===a?void 0:a[0])&&void 0!==t?t:null,M=null!==(o=null===(u=f[l.j])||void 0===u?void 0:u[0])&&void 0!==o?o:"",h=Object(n.useMemo)((()=>({_id:f._id,_index:f._index})),[f._id,f._index]),v=Object(n.useMemo)((()=>{var e;return null!=h&&h._id?[{alertId:null!=M?M:"",index:null!==(e=null==h?void 0:h._index)&&void 0!==e?e:"",type:r.AttachmentType.alert,rule:{id:y,name:f[l.e][0]},owner:x.g}]:[]}),[f,M,null==h?void 0:h._id,null==h?void 0:h._index,y]),R=Object(n.useCallback)((()=>{A()}),[A]),C=null==j||null===(d=j.hooks)||void 0===d?void 0:d.useCasesAddToNewCaseFlyout({onSuccess:R}),N=null==j||null===(b=j.hooks)||void 0===b?void 0:b.useCasesAddToExistingCaseModal({onSuccess:R}),E=()=>{I(!1)},k=Object(n.useMemo)((()=>null==g?void 0:g.getAlertsTableDefaultAlertActions({key:"defaultRowActions",onActionExecuted:E,isAlertDetailsEnabled:!1,resolveRulePagePath:e=>e?`/app/management/insightsAndAlerting/triggersActions/rule/${e}`:null,...e})),[e,g]),_=[...O&&null!=O&&O.create&&O.read?[Object(m.jsx)(c.EuiContextMenuItem,{"data-test-subj":"add-to-existing-case-action",key:"addToExistingCase",onClick:()=>{null==N||N.open({getAttachments:()=>v}),E()},size:"s"},i.i18n.translate("xpack.ml.alerts.actions.addToCase",{defaultMessage:"Add to existing case"})),Object(m.jsx)(c.EuiContextMenuItem,{"data-test-subj":"add-to-new-case-action",key:"addToNewCase",onClick:()=>{null==C||C.open({attachments:v}),E()},size:"s"},i.i18n.translate("xpack.ml.alerts.actions.addToNewCase",{defaultMessage:"Add to new case"}))]:[],k],L=_.length<=0?i.i18n.translate("xpack.ml.alertsTable.notEnoughPermissions",{defaultMessage:"Additional privileges required"}):i.i18n.translate("xpack.ml.alertsTable.moreActionsTextLabel",{defaultMessage:"More actions"});return Object(m.jsx)(s.a.Fragment,null,Object(m.jsx)(c.EuiPopover,{anchorPosition:"downLeft",button:Object(m.jsx)(c.EuiToolTip,{content:L},Object(m.jsx)(c.EuiButtonIcon,{"aria-label":L,color:"text","data-test-subj":"alertsTableRowActionMore",display:"empty",iconType:"boxesHorizontal",onClick:()=>{I(!T)},size:"s"})),closePopover:E,isOpen:T,panelPaddingSize:"none"},Object(m.jsx)(c.EuiContextMenuPanel,{size:"s",items:_,"data-test-subj":"alertsTableActionsMenu"})))}function O(e,t){const a=[{id:l.i,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.status",{defaultMessage:"Status"}),initialWidth:150},{id:l.d,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.reason",{defaultMessage:"Reason"}),initialWidth:150},{id:l.e,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.ruleName",{defaultMessage:"Rule name"}),initialWidth:150},{id:A.a,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.jobId",{defaultMessage:"Job ID"}),initialWidth:150},{id:A.b,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.anomalyScore",{defaultMessage:"Latest anomaly score"}),initialWidth:150,isSortable:!0},{id:l.h,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.triggeredAt",{defaultMessage:"Triggered at"}),initialWidth:250,schema:"datetime"},{id:l.b,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.recoveredAt",{defaultMessage:"Recovered at"}),initialWidth:250,schema:"datetime"},{id:A.c,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.anomalyTime",{defaultMessage:"Latest anomaly time"}),initialWidth:250,schema:"datetime"},{id:l.a,displayAsText:i.i18n.translate("xpack.ml.alertsTable.columns.duration",{defaultMessage:"Duration"}),initialWidth:150,schema:"numeric"}],n=[{[l.h]:{order:"desc"}}],s={id:T,cases:{appId:o,featureId:r.FEATURE_ID,owner:[r.APP_ID],syncAlerts:!1},columns:a,useInternalFlyout:f(a,Object(j.b)(t)),getRenderCellValue:j.c,sort:n,useActionsColumn:()=>({renderCustomActionsRow:e=>Object(m.jsx)(g,e)}),ruleTypeIds:[A.g.ANOMALY_DETECTION]};e.alertsTableConfigurationRegistry.register(s)}const T="mlAlerts"},335:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(140),s=a(175);function i(e){return e>=n.a.CRITICAL?s.a.CRITICAL:e>=n.a.MAJOR?s.a.MAJOR:e>=n.a.MINOR?s.a.MINOR:e>=n.a.WARNING?s.a.WARNING:e>=n.a.LOW?s.a.LOW:s.a.BLANK}},529:function(e,t,a){"use strict";function n(e){return e<1?"< 1":String(parseInt(String(e),10))}a.d(t,"a",(function(){return n}))},849:function(e,t,a){"use strict";a.r(t);var n=a(314);a.d(t,"registerAlertsTableConfiguration",(function(){return n.b}))}}]);