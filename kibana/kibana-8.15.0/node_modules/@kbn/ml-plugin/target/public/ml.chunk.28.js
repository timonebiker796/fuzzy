/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[28],{169:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(2),i=s.n(a),n=s(25),l=s(15),o=s(10),c=s(167),r=s(70),d=s(6);const u=({mlSavedObjectType:e,onCloseFlyout:t,forceRefresh:s})=>{const{savedObjects:{syncCheck:u}}=Object(o.c)(),j=Object(a.useRef)(!1),[b,m]=Object(a.useState)(!1),[p,x]=Object(a.useState)(!1),[g,f,O]=Object(r.usePermissionCheck)(["canCreateJob","canCreateDataFrameAnalytics","canCreateTrainedModels"]),y=Object(a.useMemo)((()=>g||f||O),[f,g,O]),T=Object(a.useCallback)((async()=>{try{if(!1===j.current)return;const{result:t}=await u(e);!0===j.current&&m(p||t)}catch(e){console.log("Saved object synchronization check could not be performed.")}}),[p,m]);Object(a.useEffect)((function(){return j.current=!0,void 0!==s&&!0!==s||T(),()=>{j.current=!1}}),[s,j,T]);const E=Object(a.useCallback)((()=>{x(!1),void 0===s&&T(),"function"==typeof t&&t()}),[T,t,x]);return Object(a.useEffect)((function(){!1===b&&!0===j.current&&x(!1)}),[b,x]),!1===b?null:Object(d.jsx)(i.a.Fragment,null,Object(d.jsx)(n.EuiCallOut,{title:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.title",defaultMessage:"ML job and trained model synchronization required"}),color:"warning",iconType:"warning","data-test-subj":"mlJobSyncRequiredWarning"},Object(d.jsx)(i.a.Fragment,null,Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.description",defaultMessage:"Some jobs or trained models are missing or have incomplete saved objects. "}),y?Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.link",defaultMessage:" {link}",values:{link:Object(d.jsx)(n.EuiLink,{onClick:x.bind(null,!0)},Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.linkToManagement.link",defaultMessage:"Synchronize your jobs and trained models."}))}}):Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.jobsList.missingSavedObjectWarning.noPermission",defaultMessage:"An Administrator can synchronize the jobs and trained models in Stack Management."}),p&&Object(d.jsx)(c.a,{onClose:E}))),Object(d.jsx)(n.EuiSpacer,{size:"m"}))}},221:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=e=>t=>{t.currentTarget.blur(),e()}},244:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var a=s(2),i=s.n(a),n=s(25),l=s(5),o=s(15),c=s(261),r=s.n(c),d=s(28),u=s(10),j=s(1),b=s(70),m=s(6);const p=()=>{const{services:{docLinks:e}}=Object(u.d)(),[t,s]=Object(b.usePermissionCheck)(["canCreateDataFrameAnalytics","canStartStopDataFrameAnalytics"]),a=!Object(d.c)()||!t||!s,c=Object(u.h)();return Object(m.jsx)(n.EuiEmptyPrompt,{layout:"horizontal",hasBorder:!1,hasShadow:!1,icon:Object(m.jsx)(n.EuiImage,{size:"fullWidth",src:r.a,alt:l.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptTitle",{defaultMessage:"Analyze your data with data frame analytics"})}),title:Object(m.jsx)("h2",null,Object(m.jsx)(o.FormattedMessage,{id:"xpack.ml.dataFrame.analyticsList.emptyPromptTitle",defaultMessage:"Analyze your data with data frame analytics"})),body:Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)("p",null,Object(m.jsx)(o.FormattedMessage,{id:"xpack.ml.overview.analyticsList.emptyPromptText",defaultMessage:"Train outlier detection, regression, or classification machine learning models using data frame analytics."}))),actions:[Object(m.jsx)(n.EuiButton,{onClick:async()=>{await c(j.b.DATA_FRAME_ANALYTICS_SOURCE_SELECTION)},isDisabled:a,color:"primary","data-test-subj":"mlAnalyticsCreateFirstButton"},l.i18n.translate("xpack.ml.dataFrame.analyticsList.emptyPromptButtonText",{defaultMessage:"Create data frame analytics job"})),Object(m.jsx)(n.EuiLink,{href:e.links.ml.dataFrameAnalytics,target:"_blank",external:!0},Object(m.jsx)(o.FormattedMessage,{id:"xpack.ml.common.readDocumentationLink",defaultMessage:"Read documentation"}))],"data-test-subj":"mlNoDataFrameAnalyticsFound"})}},261:function(e,t,s){e.exports=s.p+"bd21a7c05ddd7f5b46fe03d98fd506c9.png"},325:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s(2);var a=s(25),i=s(6);const[n,l,o]=["info","warning","error"],c=({message:e,showTooltip:t=!1})=>{if(void 0===e)return Object(i.jsx)("span",null);let s="primary",c="warning";return e.level===n?c="iInCircle":e.level===l?s="warning":e.level===o&&(s="danger"),t?Object(i.jsx)(a.EuiToolTip,{position:"bottom",content:e.text},Object(i.jsx)(a.EuiIcon,{type:c,color:s})):Object(i.jsx)(a.EuiIcon,{type:c,color:s})}},409:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var a=s(2),i=s.n(a),n=s(25),l=s(5),o=s(15),c=s(415),r=s(221),d=s(325),u=s(122),j=s(6);const b=({messages:e,loading:t,error:s,refreshMessage:b,actionHandler:m})=>{const{showNodeInfo:p}=Object(u.d)(),x=Object(a.useMemo)((()=>{const e=[{name:b?Object(j.jsx)(n.EuiToolTip,{content:l.i18n.translate("xpack.ml.jobMessages.refreshLabel",{defaultMessage:"Refresh"})},Object(j.jsx)(n.EuiButtonIcon,{onClick:Object(r.a)((()=>{b()})),iconType:"refresh","aria-label":l.i18n.translate("xpack.ml.jobMessages.refreshAriaLabel",{defaultMessage:"Refresh"})})):"",render:e=>Object(j.jsx)(d.a,{message:e}),width:"6%"},{field:"timestamp",name:l.i18n.translate("xpack.ml.jobMessages.timeLabel",{defaultMessage:"Time"}),render:c.d,width:"120px",sortable:!0},{field:"message",name:l.i18n.translate("xpack.ml.jobMessages.messageLabel",{defaultMessage:"Message"}),width:"50%"}];return p&&e.splice(2,0,{field:"node_name",name:l.i18n.translate("xpack.ml.jobMessages.nodeLabel",{defaultMessage:"Node"}),width:"150px"}),"function"==typeof m&&e.push({name:l.i18n.translate("xpack.ml.jobMessages.actionsLabel",{defaultMessage:"Actions"}),width:"10%",actions:[{render:e=>Object(j.jsx)(n.EuiToolTip,{content:Object(j.jsx)(o.FormattedMessage,{id:"xpack.ml.jobMessages.toggleInChartTooltipText",defaultMessage:"Toggle in chart"})},Object(j.jsx)(n.EuiButtonIcon,{size:"xs","aria-label":l.i18n.translate("xpack.ml.jobMessages.toggleInChartAriaLabel",{defaultMessage:"Toggle in chart"}),iconType:"visAreaStacked",onClick:()=>m(e)}))}]}),e}),[p,b,m]);return Object(j.jsx)(i.a.Fragment,null,Object(j.jsx)(n.EuiSpacer,{size:"s"}),Object(j.jsx)(n.EuiInMemoryTable,{items:e,columns:x,sorting:{sort:{field:"timestamp",direction:"desc"}},compressed:!0,loading:t,error:s,pagination:!0,"data-test-subj":"mlAnalyticsDetailsJobMessagesTable"}))}},498:function(e,t,s){"use strict";s.d(t,"a",(function(){return w}));var a=s(2),i=s.n(a),n=s(83),l=s.n(n),o=s(25),c=s(5),r=s(415),d=s(204),u=(s(600),s(6));const j=({overallDetails:e})=>Object(u.jsx)(o.EuiFlexGroup,{alignItems:"center",wrap:!0,"data-test-subj":e.dataTestSubj},e.items.map((e=>"badge"===e.title?Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiBetaBadge,{label:e.description,color:"subdued",title:e.title})):Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiFlexGroup,{gutterSize:"xs"},Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiDescriptionListDescription,{className:"descriptionListTitle"},Object(u.jsx)(o.EuiText,{size:"xs"},e.title))),Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(o.EuiDescriptionListTitle,{className:"descriptionListDescription"},Object(u.jsx)(o.EuiText,{size:"s"},Object(u.jsx)("h5",null,e.description))))))))),b=({section:e})=>Object(u.jsx)(o.EuiFlexGroup,{direction:"column",gutterSize:"s","data-test-subj":e.dataTestSubj},Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiTitle,{size:"xs"},Object(u.jsx)("span",null,e.title))),Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiFlexGroup,null,e.items.map((e=>Object(u.jsx)(o.EuiFlexItem,{grow:!1},Object(u.jsx)(o.EuiDescriptionListDescription,{className:"descriptionListTitle"},Object(u.jsx)(o.EuiText,{size:"xs"},e.title)),Object(u.jsx)(o.EuiDescriptionListTitle,{className:"descriptionListDescription"},Object(u.jsx)(o.EuiText,{size:"xs"},Object(u.jsx)("h5",null,e.description))))))))),m=({section:e})=>{if(null!=e&&e.items&&0===e.items.length)return null;const t=[{field:"title",name:""},{field:"description",name:"",render:e=>Object(u.jsx)(i.a.Fragment,null,e)}];return Object(u.jsx)("div",{"data-test-subj":e.dataTestSubj},Object(u.jsx)(o.EuiTitle,{size:"xs"},Object(u.jsx)("span",null,e.title)),Object(u.jsx)(o.EuiBasicTable,{compressed:!0,items:e.items,columns:t,tableCaption:e.title,tableLayout:"auto",className:"mlExpandedRowDetailsSection","data-test-subj":`${e.dataTestSubj}-table`}))},p=({analysisStats:e,dataCounts:t,memoryUsage:s,overallDetails:a,progress:n,dataTestSubj:l})=>Object(u.jsx)(i.a.Fragment,null,Object(u.jsx)(o.EuiSpacer,null),Object(u.jsx)(o.EuiFlexGroup,{direction:"column",className:"mlExpandedRowDetails","data-test-subj":l,gutterSize:"s"},Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(j,{overallDetails:a})),Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(o.EuiFlexGroup,null,Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(b,{section:t})),Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(b,{section:s})))),Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(o.EuiHorizontalRule,{margin:"xs"})),Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(o.EuiFlexGroup,null,Object(u.jsx)(o.EuiFlexItem,{grow:1,"data-test-subj":n.dataTestSubj},Object(u.jsx)(o.EuiSpacer,{size:"s"}),Object(u.jsx)(o.EuiTitle,{size:"xs"},Object(u.jsx)("span",null,n.title)),Object(u.jsx)(o.EuiSpacer,{size:"xs"}),n.items.map((e=>Object(u.jsx)(i.a.Fragment,null,e.description,Object(u.jsx)(o.EuiSpacer,{size:"s"}))))),Object(u.jsx)(o.EuiFlexItem,{grow:3},Object(u.jsx)(o.EuiSpacer,{size:"s"}),e?Object(u.jsx)(m,{section:e}):null))))),x=({json:e,dataTestSubj:t})=>Object(u.jsx)(o.EuiFlexGroup,{"data-test-subj":t},Object(u.jsx)(o.EuiFlexItem,null,Object(u.jsx)(o.EuiSpacer,{size:"s"}),Object(u.jsx)(o.EuiCodeBlock,{"aria-label":c.i18n.translate("xpack.ml.dataframe.analyticsList.analyticsDetails.expandedRowJsonPane",{defaultMessage:"JSON of data frame analytics configuration"}),style:{width:"100%"},language:"json",fontSize:"s",paddingSize:"s",overflowHeight:300,isCopyable:!0,"data-test-subj":"mlAnalyticsDetailsJsonPreview"},JSON.stringify(e,null,2))),Object(u.jsx)(o.EuiFlexItem,{grow:!1}," "));var g=s(164),f=(s(605),s(11)),O=s(148),y=s(409),T=s(71);const E=({analyticsId:e,dataTestSubj:t})=>{const[s,i]=Object(a.useState)([]),[n,l]=Object(a.useState)(!1),[o,r]=Object(a.useState)(""),d=Object(T.useToastNotificationService)(),j=Object(a.useCallback)((async()=>{try{l(!0);const t=await f.ml.dataFrameAnalytics.getAnalyticsAuditMessages(e);l(!1),i(t)}catch(e){l(!1),d.displayErrorToast(e,c.i18n.translate("xpack.ml.dfAnalyticsList.analyticsDetails.messagesPane.errorToastMessageTitle",{defaultMessage:"Error loading job messages"})),r(c.i18n.translate("xpack.ml.dfAnalyticsList.analyticsDetails.messagesPane.errorMessage",{defaultMessage:"Messages could not be loaded"}))}}),[]);return Object(a.useEffect)((()=>{j()}),[]),Object(O.m)({onRefresh:j}),Object(u.jsx)("div",{className:"mlExpandedRowJobMessages","data-test-subj":t},Object(u.jsx)(y.a,{messages:s,loading:n,error:o,refreshMessage:j}))};function S(e){return"object"==typeof e?JSON.stringify(e):e.toString()}const w=({item:e})=>{var t,s,a;const i=Object(d.a)(e.config.analysis),n={...e.stats},j=n.analysis_stats?n.analysis_stats[`${i}_stats`]:void 0;null!==(t=e.config)&&void 0!==t&&t.description&&(n.description=e.config.description),delete n.progress;const b={title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.dataCounts",{defaultMessage:"Data counts"}),items:[{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.trainingDocsCount",{defaultMessage:"Training docs"}),description:n.data_counts.training_docs_count},{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.testDocsCount",{defaultMessage:"Test docs"}),description:n.data_counts.test_docs_count},{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.skippedDocsCount",{defaultMessage:"Skipped docs"}),description:n.data_counts.skipped_docs_count}],dataTestSubj:"mlAnalyticsTableRowDetailsSection counts"},m={title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.memoryUsage",{defaultMessage:"Memory usage"}),items:[{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.timestamp",{defaultMessage:"Timestamp"}),description:Object(r.c)(1e3*l()(n.memory_usage.timestamp).unix())},{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.peakUsageBytes",{defaultMessage:"Peak usage bytes"}),description:n.memory_usage.peak_usage_bytes},{title:"Status",description:n.memory_usage.status}],dataTestSubj:"mlAnalyticsTableRowDetailsSection stats"},{currentPhase:f,totalPhases:O}=Object(g.c)(e.stats),y={title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.progressTitle",{defaultMessage:"Phase {phase}",values:{phase:`${f}/${O}`}}),items:[...e.stats.progress.map((e=>({title:e.phase,description:Object(u.jsx)(o.EuiProgress,{label:e.phase,valueText:!0,value:e.progress_percent,max:100,color:"success",size:"s"})})))],dataTestSubj:"mlAnalyticsTableRowDetailsSection progress"},T={title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.stats",{defaultMessage:"Overall"}),items:[{title:"badge",description:n.state},{title:"Create time",description:Object(r.c)(1e3*l()(e.config.create_time).unix())},{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.modelMemoryLimit",{defaultMessage:"Model memory limit"}),description:null!==(s=e.config.model_memory_limit)&&void 0!==s?s:""},{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.version",{defaultMessage:"Version"}),description:null!==(a=e.config.version)&&void 0!==a?a:""}],dataTestSubj:"mlAnalyticsTableRowDetailsSection state"},w=j?{title:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettings.analysisStats",{defaultMessage:"Analysis stats"}),items:[{title:"timestamp",description:Object(r.c)(1e3*l()(j.timestamp).unix())},{title:"timing_stats",description:S(j.timing_stats)},...Object.entries(j.parameters||j.hyperparameters||{}).map((([e,t])=>({title:e.toString(),description:S(t)})))],dataTestSubj:"mlAnalyticsTableRowDetailsSection analysisStats"}:void 0,M=[{id:"ml-analytics-job-details",name:c.i18n.translate("xpack.ml.dataframe.analyticsList.expandedRow.tabs.jobSettingsLabel",{defaultMessage:"Details"}),content:Object(u.jsx)(p,{overallDetails:T,dataCounts:b,memoryUsage:m,analysisStats:w,progress:y,dataTestSubj:`mlAnalyticsTableRowDetailsTabContent job-details ${e.config.id}`}),"data-test-subj":`mlAnalyticsTableRowDetailsTab job-details ${e.config.id}`},{id:"ml-analytics-job-json",name:"JSON",content:Object(u.jsx)(x,{json:e.config,dataTestSubj:`mlAnalyticsTableRowDetailsTabContent json ${e.config.id}`}),"data-test-subj":`mlAnalyticsTableRowDetailsTab json ${e.config.id}`},{id:"ml-analytics-job-messages",name:c.i18n.translate("xpack.ml.dataframe.analyticsList.analyticsDetails.tabs.analyticsMessagesLabel",{defaultMessage:"Messages"}),content:Object(u.jsx)(E,{analyticsId:e.id,dataTestSubj:`mlAnalyticsTableRowDetailsTabContent job-messages ${e.config.id}`}),"data-test-subj":`mlAnalyticsTableRowDetailsTab job-messages ${e.config.id}`}];return Object(u.jsx)(o.EuiTabbedContent,{size:"s",tabs:M,initialSelectedTab:M[0],onTabClick:()=>{},expand:!1,style:{width:"100%"},"data-test-subj":`mlAnalyticsTableRowDetails-${e.config.id}`})}},600:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(601);case"v8light":return s(603)}},601:function(e,t,s){var a=s(126),i=s(602);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},602:function(e,t,s){(t=s(127)(!1)).push([e.i,".mlExpandedRowDetails{padding:8px 16px 16px}.mlExpandedRowDetailsSection thead{display:none}",""]),e.exports=t},603:function(e,t,s){var a=s(126),i=s(604);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},604:function(e,t,s){(t=s(127)(!1)).push([e.i,".mlExpandedRowDetails{padding:8px 16px 16px}.mlExpandedRowDetailsSection thead{display:none}",""]),e.exports=t},605:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(606);case"v8light":return s(608)}},606:function(e,t,s){var a=s(126),i=s(607);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},607:function(e,t,s){(t=s(127)(!1)).push([e.i,".mlExpandedRowJobMessages{padding:0 8px 8px}.mlExpandedRowJobMessages .euiTable,.mlExpandedRowJobMessages .euiTableRowCell{background-color:#0000!important}",""]),e.exports=t},608:function(e,t,s){var a=s(126),i=s(609);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},609:function(e,t,s){(t=s(127)(!1)).push([e.i,".mlExpandedRowJobMessages{padding:0 8px 8px}.mlExpandedRowJobMessages .euiTable,.mlExpandedRowJobMessages .euiTableRowCell{background-color:#0000!important}",""]),e.exports=t}}]);