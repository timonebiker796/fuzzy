/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[84],{138:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},836:function(e,t,a){"use strict";a.r(t),a.d(t,"IndexDataVisualizerPage",(function(){return y}));var i=a(2),n=a.n(i),c=a(5),s=a(15),r=a(517),l=a(25),o=a(138),d=a.n(o),u=a(10),b=a(142),j=a(1),g=a(156),m=a(23),O=a(70),f=a(134),p=a(122),x=a(6);const y=({esql:e=!1})=>{Object(r.c)({timeRangeSelector:!1,autoRefreshSelector:!1});const{services:{docLinks:t,dataVisualizer:a,data:{dataViews:{get:o}},mlServices:{mlApiServices:{recognizeIndex:y}}}}=Object(u.d)(),{showNodeInfo:v}=Object(p.d)(),_=Object(u.g)(),D=!Object(g.b)();Object(m.b)();const[A,w]=Object(i.useState)(null),C=d()();Object(i.useEffect)((()=>{if(void 0!==a){const{getIndexDataVisualizerComponent:e}=a;e().then((e=>{C()&&w(e)}))}}),[]);const E=async({dataViewId:e,dataViewTitle:t,globalState:a})=>[{id:"create_ml_ad_job",title:c.i18n.translate("xpack.ml.indexDatavisualizer.actionsPanel.anomalyDetectionTitle",{defaultMessage:"Advanced anomaly detection"}),description:c.i18n.translate("xpack.ml.indexDatavisualizer.actionsPanel.anomalyDetectionDescription",{defaultMessage:"Create a job with the full range of options for more advanced use cases."}),icon:"createAdvancedJob",type:"file",getUrl:async()=>await _.getUrl({page:j.b.ANOMALY_DETECTION_CREATE_JOB_ADVANCED,pageState:{index:e,globalState:a}}),canDisplay:async()=>{try{const{timeFieldName:t}=await o(e);return Object(g.b)()&&void 0!==t&&Object(O.checkPermission)("canCreateJob")&&Object(m.e)()}catch(e){return!1}},"data-test-subj":"dataVisualizerCreateAdvancedJobCard"},{id:"create_ml_dfa_job",title:c.i18n.translate("xpack.ml.indexDatavisualizer.actionsPanel.dataframeTitle",{defaultMessage:"Data frame analytics"}),description:c.i18n.translate("xpack.ml.indexDatavisualizer.actionsPanel.dataframeDescription",{defaultMessage:"Create outlier detection, regression, or classification analytics."}),icon:"classificationJob",type:"file",getUrl:async()=>await _.getUrl({page:j.b.DATA_FRAME_ANALYTICS_CREATE_JOB,pageState:{index:e,globalState:a}}),canDisplay:async()=>Object(g.b)()&&Object(O.checkPermission)("canCreateDataFrameAnalytics")&&Object(m.e)(),"data-test-subj":"dataVisualizerCreateDataFrameAnalyticsCard"}],z=async e=>{const{dataViewId:t,dataViewTitle:a}=e;try{const e=await y({indexPatternTitle:a});return null==e?void 0:e.map((e=>{var a,i;return{id:e.id,title:e.title,description:e.description,icon:null!==(a=null===(i=e.logo)||void 0===i?void 0:i.icon)&&void 0!==a?a:"",type:"index",getUrl:async()=>await _.getUrl({page:j.b.ANOMALY_DETECTION_CREATE_JOB_RECOGNIZER,pageState:{id:e.id,index:t}}),canDisplay:async()=>{try{const{timeFieldName:e}=await o(t);return Object(g.b)()&&void 0!==e&&Object(O.checkPermission)("canCreateJob")&&Object(m.e)()}catch(e){return!1}},"data-test-subj":e.id}}))}catch(e){return console.error("Platinum, Enterprise or trial license needed"),[]}},T=Object(i.useMemo)((()=>D?[]:[z,E]),[_,D]);return A?Object(x.jsx)(i.Fragment,null,null!==A?Object(x.jsx)(n.a.Fragment,null,Object(x.jsx)(f.a,null,Object(x.jsx)(l.EuiFlexGroup,{gutterSize:"s",alignItems:"center",direction:"row"},Object(x.jsx)(s.FormattedMessage,{id:"xpack.ml.dataVisualizer.pageHeader",defaultMessage:"Data Visualizer"}),e?Object(x.jsx)(n.a.Fragment,null,Object(x.jsx)(l.EuiFlexItem,{grow:!1},Object(x.jsx)(s.FormattedMessage,{id:"xpack.ml.datavisualizer",defaultMessage:"(ES|QL)"}))):null)),Object(x.jsx)(A,{getAdditionalLinks:T,showFrozenDataTierChoice:v,esql:e})):null,Object(x.jsx)(b.a,{docLink:t.links.ml.guide})):Object(x.jsx)(i.Fragment,null)}}}]);