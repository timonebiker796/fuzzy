/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[29],{176:function(e,t,a){(function(e){var n=a(263).format_value,r=t.schema={},s=t.properties={CALSCALE:{type:"TEXT"},METHOD:{type:"TEXT"},PRODID:{type:"TEXT"},VERSION:{type:"TEXT"},ATTACH:{type:"URI"},CATEGORIES:{type:"TEXT",list:!0},CLASS:{type:"TEXT"},COMMENT:{type:"TEXT"},DESCRIPTION:{type:"TEXT"},GEO:{type:"FLOAT",list:!0},LOCATION:{type:"TEXT"},"PERCENT-COMPLETE":{type:"INTEGER"},PRIORITY:{type:"INTEGER"},RESOURCES:{type:"TEXT"},STATUS:{type:"TEXT"},SUMMARY:{type:"TEXT"},COMPLETED:{type:"DATE-TIME"},DTEND:{type:"DATE-TIME"},DUE:{type:"DATE-TIME"},DTSTART:{type:"DATE-TIME"},DURATION:{type:"DURATION"},FREEBUSY:{type:"PERIOD"},TRANSP:{type:"TEXT"},TZID:{type:"TEXT"},TZNAME:{type:"TEXT"},TZOFFSETFROM:{type:"UTC-OFFSET"},TZOFFSETTO:{type:"UTC-OFFSET"},TZURL:{type:"URI"},ATTENDEE:{type:"CAL-ADDRESS"},CONTACT:{type:"TEXT"},ORGANIZER:{type:"CAL-ADDRESS"},"RECURRENCE-ID":{type:"DATE-TIME"},"RELATED-TO":{type:"TEXT"},URL:{type:"URI"},UID:{type:"TEXT"},EXDATE:{type:"DATE-TIME",list:!0},RDATE:{type:"DATE-TIME",list:!0},RRULE:{type:"RECUR"},ACTION:{type:"TEXT"},REPEAT:{type:"INTEGER"},TRIGGER:{type:"DURATION"},CREATED:{type:"DATE-TIME"},DTSTAMP:{type:"DATE-TIME"},"LAST-MODIFIED":{type:"DATE-TIME"},SEQUENCE:{type:"INTEGER"},"REQUEST-STATUS":{type:"TEXT"}},i=t.CalendarObject=function(e,t){this.calendar=e,this.element=t,this.components={},this.properties={}};i.create=function(e,t){var a=(r[e]||{}).factory;return void 0!==a?new a(t):new i(t,e)},i.prototype.clone=function(){var e=i.create(this.element,this.calendar);for(var t in this.properties)e.addProperties(this.properties[t]);for(var a=this.getComponents(),n=0;n<a.length;++n)e.addComponent(a[n]);return e},i.prototype.addProperties=function(e){e.forEach(this.addProperty.bind(this))},i.prototype.addProperty=function(e,t,a){if(e instanceof o)e=e.clone();else{if(void 0===t)return;e=new o(e,t,a)}return this.properties[e.name]=this.properties[e.name]||[],this.properties[e.name].push(e),e},i.prototype.setProperty=function(e,t,a){this.removeProperty(e instanceof o?e.name:e),this.addProperty(e,t,a)},i.prototype.addComponent=function(e){if(!(e instanceof i)){var t=(r[e]||{}).factory;e=void 0!==t?new t(this.calendar):new i(this.calendar,e)}return e.calendar&&e.calendar!==this.calendar&&(e=e.clone()),this.components[e.element]=this.components[e.element]||[],this.components[e.element].push(e),e.calendar=this.calendar,e},i.prototype.addComponents=function(e){e.forEach(this.addComponent.bind(this))},i.prototype.getComponents=function(e){if(void 0===e){var t=[];for(var a in this.components)t=t.concat(this.components[a]);return t}return this.components[e]||[]},i.prototype.getProperty=function(e,t){return(this.properties[e]||[])[t||0]},i.prototype.getProperties=function(e){return this.properties[e]||[]},i.prototype.getPropertyValue=function(e,t){return(this.getProperty(e,t)||{}).value},i.prototype.removeProperty=function(e){delete this.properties[e]},i.prototype.validate=function(){var e=this,t=r[e.element];for(var a in t&&t.required_properties&&t.required_properties.forEach((function(t){if(!e.getPropertyValue(t))throw new Error(t+" is a required property of "+e.element)})),e.components)e.components[a].forEach((function(e){e.validate()}))},i.prototype.toString=function(){var e;if("VCALENDAR"==this.element)e=this.format();else{var t=new(a(302).iCalendar);t.addComponent(this),e=t.format()}return e.push(""),e.join("\r\n")},i.prototype.format=function(){var e=["BEGIN:"+this.element];for(var t in this.properties)this.properties[t].forEach((function(t){e.push.apply(e,t.format())}));for(var a in this.components)for(a=this.components[a],t=0;t<a.length;++t)e.push.apply(e,a[t].format());return e.push("END:"+this.element),e};var o=t.CalendarProperty=function(e,t,a){var n=s[e];this.type=n&&n.type?n.type:"TEXT",this.name=e,this.value=t,this.parameters=a||{}};o.prototype.clone=function(){var e=new o(this.name,this.value);for(var t in e.type=this.type,this.parameters)e.parameters[t]=this.parameters[t];return e},o.prototype.getParameter=function(e){return this.parameters[e]},o.prototype.setParameter=function(e,t){this.parameters[e]=t},o.prototype.format=function(){var t=[];for(var a in this.parameters)t.push(a+"="+this.parameters[a]);t.length&&(t=";"+t.join(";"));for(var r,s=new e(this.name+t+":"+n(this.type,this.value,this.parameters)),i=0,o=[];;){for(i+(r=75)>=s.length&&(r=s.length-i);128==(192&s[i+r]);)r--;if(o.push(s.toString("utf8",i,i+r)),i+r>=s.length)break;s[i+=r-1]=32}return o}}).call(this,a(300).Buffer)},237:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="_all"},263:function(e,t,a){(function(e){var n=a(301).RRule;function r(e,t){t=t||2;var a=e<0;return a&&(e*=-1),e=e.toString(),(a?"-":"")+"000000000000000000".substr(0,t-e.length)+e}var s={BINARY:{format:function(e){return e.toString("base64")},parse:function(t){return new e(t,"base64")}},BOOLEAN:{format:function(e){return e?"TRUE":"FALSE"},parse:function(e){return"TRUE"==e.toUpperCase()}},"CAL-ADDRESS":{format:function(e){var t=e.toString();return 0!=t.lastIndexOf("mailto:")&&(t="mailto:"+t),t}},DATE:{format:function(e){return e instanceof Date||(e=new Date(e)),e.getFullYear()+r(e.getMonth()+1)+r(e.getDate())},parse:function(e){var t=new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(4,2),10)-1,parseInt(e.substr(6,2),10),0,0,0);return t.date_only=!0,t}},"DATE-TIME":{format:function(e,t){return e instanceof Date||(e=new Date(e)),e.date_only||"DATE"===t.VALUE?i("DATE",e):e.getUTCFullYear()+r(e.getUTCMonth()+1)+r(e.getUTCDate())+"T"+i("TIME",e)},parse:function(e,t,a){if("DATE"===t.VALUE||e.length<=8)return s.DATE.parse(e);var n=t.TZID,r=[parseInt(e.substr(0,4),10),parseInt(e.substr(4,2),10),parseInt(e.substr(6,2),10),parseInt(e.substr(9,2),10),parseInt(e.substr(11,2),10),parseInt(e.substr(13,2),10)],i=e.length>15&&"Z"===e[15];if(void 0!==n){var o=a.timezone(n);if(!o)throw new Error("Unable to load TZ data for "+n);return o.fromLocalTime(r)}return r[1]-=1,i?new Date(Date.UTC.apply(null,r)):new Date(r[0],r[1],r[2],r[3],r[4],r[5])}},DURATION:{format:function(e){var t=e<0;t&&(e*=-1);var a=Math.floor(e/604800);e-=60*a*60*24*7;var n=Math.floor(e/86400);e-=60*n*60*24;var r=Math.floor(e/3600);e-=60*r*60;var s=Math.floor(e/60),i=e-=60*s,o=["P"];return t&&o.unshift("-"),a&&o.push(a+"W"),n&&o.push(n+"D"),(r||s||i)&&o.push("T"),r&&o.push(r+"H"),s&&o.push(s+"M"),i&&o.push(i+"S"),o.join("")},parse:function(e){for(var t=/(-)?P(\d+W)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+S)?)?/.exec(e).slice(1),a=[-1,604800,86400,3600,60,1],n=0,r=1;r<t.length;++r)void 0!==t[r]&&(n+=parseInt(t[r],10)*a[r]);return void 0!==t[0]&&(n*=a[0]),n}},FLOAT:{format:function(e){return e.toString()}},INTEGER:{format:function(e){return e.toString()}},PERIOD:{format:function(e){return i("DATE-TIME",e[0])+"/"+i(e[1]instanceof Date?"DATE-TIME":"DURATION",e[1])}},RECUR:{format:function(e){return(e instanceof n?e:new n(e)).toString()},parse:function(e){return n.parse(e)}},TEXT:{format:function(e){return(e||"").toString().replace(/([\\,;])/g,"\\$1").replace(/\n/g,"\\n")},parse:function(e){return e.replace(/\\([\\,;])/g,"$1").replace(/\\[nN]/g,"\n")}},TIME:{format:function(e){return e instanceof Date||(e=new Date(e)),r(e.getUTCHours())+r(e.getUTCMinutes())+r(e.getUTCSeconds())+"Z"},parse:function(e){return e.length>6&&"Z"===e[6]?new Date(Date.UTC(0,0,0,parseInt(e.substr(0,2),10),parseInt(e.substr(2,2),10),parseInt(e.substr(4,2),10))):new Date(0,0,0,parseInt(e.substr(0,2),10),parseInt(e.substr(2,2),10),parseInt(e.substr(4,2),10))}},URI:{format:function(e){return e.toString()}},"UTC-OFFSET":{format:function(e){var t=e<0;return t&&(e*=-1),(t?"-":"+")+r(e,4)}}},i=t.format_value=function(e,t,a){if(void 0===t)return"";var n=s[e||"TEXT"];if(void 0===n)throw Error("Invalid iCalendar datatype: "+e);return Array.isArray(t)&&"PERIOD"!==e||"PERIOD"===e&&t[0]&&Array.isArray(t[0])?t.map((function(e){return n.format(e,a||{})})).join(","):n.format(t,a||{})},o=t.parse_value=function(e,t,a,n,r){if(r)return t.split(",").map((function(t){return o(e,t,a,n)}));var i=s[e||"TEXT"];if(void 0===i)throw Error("Invalid iCalendar datatype: "+e);var l=(a=a||{}).VALUE&&s[a.VALUE];return l&&(i=l),i.parse?i.parse(t,a,n):t}}).call(this,a(300).Buffer)},264:function(e,t,a){e.exports=a(57)(3090)},300:function(e,t,a){e.exports=a(57)(3085)},301:function(e,t,a){var n=a(263),r=["FREQ","INTERVAL","COUNT","UNTIL","BYDAY","BYMONTH","BYMONTHDAY"],s=["SU","MO","TU","WE","TH","FR","SA"];function i(e){return Array.isArray(e)?(e=e.slice(0))[1]--:e=[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],new Date(Date.UTC.apply(null,e))}function o(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())}function l(e){return e<0?Math.ceil(e):Math.floor(e)}function d(e){return e.getUTCFullYear()}function c(e){return e.getUTCMonth()+1}function u(e){return e.getUTCDate()}function p(e){return e.getUTCHours()}function f(e){return e.getUTCMinutes()}function h(e){return e.getUTCSeconds()}function E(e){return e.getUTCMilliseconds()}function m(e,t){return e.setUTCMonth(t-1),e}function g(e,t){return e.setUTCDate(t),e}function b(e,t){return e.setUTCHours(t),e}function j(e,t){return e.setUTCMinutes(t),e}function v(e,t){return e.setUTCSeconds(t),e}function T(e,t){return e.setUTCMilliseconds(t),e}function O(e,t){return function(e,t){return e.setUTCFullYear(t),e}(e,d(e)+t)}function C(e,t){return m(e,c(e)+t)}function D(e,t){return g(e,u(e)+t)}function x(e){return e.getUTCDay()}function M(e,t){return(t-e)/864e5}var y=t.RRule=function(e,t,a){for(var n in t instanceof Date&&(t={DTSTART:t,DTEND:a}),t=t||{},this.start=t.DTSTART?i(t.DTSTART):null,this.end=t.DTEND?i(t.DTEND):null,this.exceptions=t.EXDATE||[],"string"==typeof e&&(e=y.parse(e)),this.rule={},e||{}){if(-1==r.indexOf(n))throw new Error(n+" is not currently supported!");this.rule[n]=I[n]?I[n].parse(e[n]):e[n]}};y.parse=function(e){for(var t=e.split(/=|;/),a={},n=0;n<t.length;n+=2)a[t[n]]=t[n+1];return a},y.prototype.setFrequency=function(e){this.rule.FREQ=e},y.prototype.valueOf=function(){return this.rule},y.prototype.toString=function(){var e=["FREQ="+this.rule.FREQ];for(var t in this.rule)"FREQ"!=t&&e.push(t+"="+((I[t]||{}).format?I[t].format(this.rule[t]):this.rule[t]));return e.join(";")},y.prototype.next=function(e){if((!(e=e&&i(e))||e<this.start)&&(e=new Date(this.start.valueOf()-1)),this.until&&e>this.until)return null;var t=A[this.rule.FREQ];if(!t)throw new Error(this.rule.FREQ+" recurrence is not supported");e:for(;;){for(var a=t.next(this.rule,this.start,e),n=o(a),r=0;r<this.exceptions.length;r++){var s=this.exceptions[r];if(s.valueOf()==n.valueOf()||s.date_only&&d(i(s))==d(n)&&c(i(s))==c(n)&&u(i(s))==u(n)){e=a;continue e}}break}return this.until&&a>this.until||this.rule.COUNT&&null!==this.count_end&&(void 0===this.count_end&&(this.count_end=null,this.count_end=this.nextOccurences(this.rule.COUNT).pop()),a>i(this.count_end))||this.rule.UNTIL&&a>i(this.rule.UNTIL)?null:o(a)},y.prototype.nextOccurences=function(e,t){1===arguments.length&&(t=e,e=void 0);var a=[];if(t instanceof Date)for(;(e=this.next(e))&&e<=t;)a.push(e);else for(;t--&&null!==e;)(e=this.next(e))&&a.push(e);return a};var I={INTERVAL:{parse:function(e){return parseInt(e,10)}},UNTIL:{parse:function(e){return e instanceof Date?e:n.parse_value("DATE-TIME",e)},format:function(e){return n.format_value("DATE-TIME",e)}},FREQ:{parse:function(e){return e}},BYMONTH:{parse:function(e){return"number"==typeof e?[e]:e.split(",").map((function(e){return parseInt(e,10)}))},format:function(e){return e.join(",")}},BYDAY:{parse:function(e){var t=e.split(",").map((function(e){var t=e.match(/([+-]?\d)?(SU|MO|TU|WE|TH|FR|SA)/);return[parseInt(t[1],10)||0,s.indexOf(t[2])]}));return t.sort((function(e,t){return e[0]==t[0]?e[1]-t[1]:e[0]-t[0]})),t},format:function(e){return e.map((function(e){return(e[0]||"")+s[e[1]]})).join(",")}},EXDATE:{parse:function(e){return e.split(",").map((function(e){return 8==e.length?n.parse_value("DATE",e):n.parse_value("DATE-TIME",e)}))},format:function(e){return e.map((function(e){return n.format_value(e.date_only?"DATE":"DATE-TIME",e)})).join(",")}}};I.BYMONTHDAY=I.BYMONTH,I.COUNT=I.INTERVAL;var A={DAILY:{next:function(e,t,a){var n=new Date(a);b(n,p(t)),j(n,f(t)),v(n,h(t)),T(n,E(t));var r=e.INTERVAL||1,s=l(M(n,t))%r;s&&D(n,r-s);for(var i=0;i<2&&!((n=L(e.BYDAY,n,a)).valueOf()>a.valueOf());++i)D(n,r);return n}},WEEKLY:{next:function(e,t,a){var n=new Date(a);b(n,p(t)),j(n,f(t)),v(n,h(t)),T(n,E(t));var r,s,i=e.INTERVAL||1,o=l(M(t,n)/7)%i;for(o&&D(n,7*(i-o));n=L(e.BYDAY,n,a),e.BYDAY&&e.BYDAY.length||(startDayOfWeek=x(t),nextDayOfWeek=x(n),nextDayOfWeek>startDayOfWeek?D(n,startDayOfWeek-nextDayOfWeek):startDayOfWeek>nextDayOfWeek&&D(n,startDayOfWeek-nextDayOfWeek-7)),!(n.valueOf()>a.valueOf())||(r=e.BYMONTH,s=n,r&&r.length&&-1===r.indexOf(c(s)));)D(n,7*i);return n}},MONTHLY:{next:function(e,t,a){var n=new Date(a);b(n,p(t)),j(n,f(t)),v(n,h(t)),T(n,E(t));var r=e.INTERVAL||1,s=c(n)-c(t)+12*(d(n)-d(t));s%r&&C(n,r-s%r);for(var i=0;i<2&&(i&&g(n,1),n=L(e.BYDAY,n,a),n=R(e.BYMONTHDAY,n,a),e.BYDAY&&e.BYDAY.length||e.BYMONTHDAY&&e.BYMONTHDAY.length||g(n,u(t)),!(n.valueOf()>a.valueOf()));++i)C(n,r);return n}},YEARLY:{next:function(e,t,a){var n=new Date(a);b(n,p(t)),j(n,f(t)),v(n,h(t)),T(n,E(t));var r=e.INTERVAL||1,s=(d(a)-d(t))%r;s&&O(n,r-s);for(var i=0;i<2&&(n=w(e.BYMONTH,n),n=R(e.BYMONTHDAY,n,a),n=L(e.BYDAY,n,a),e.BYMONTH&&e.BYMONTH.length||m(n,c(t)),e.BYDAY&&e.BYDAY.length||e.BYMONTHDAY&&e.BYMONTHDAY.length||g(n,u(t)),!(n.valueOf()>a.valueOf()));++i)g(m(O(n,r),1),1);return n}}};function S(e){return e.sort((function(e,t){return null===e&&null===t?0:null===e?1:null===t?-1:e.valueOf()-t.valueOf()}))}function w(e,t){return e&&e.length&&S(e.map((function(e){var a=e-c(t);a<0&&(a+=12);var n=C(new Date(t),a);return g(n,1),n}))).shift()||t}function R(e,t,a){return e&&e.length&&S(e.map((function(e){var n=g(new Date(t),e);return n.valueOf()<=a.valueOf()?null:n}))).shift()||t}function L(e,t,a){return e&&e.length&&S(e.map((function(e){(i=e[1]-x(t))<0&&(i+=7);var n=D(new Date(t),i);if(e[0]>0){var r=0|(u(n)-1)/7+1;if(r>e[0])return null;D(n,7*(e[0]-r))}else if(e[0]<0){for(var s=new Date(n),i=[];c(s)===c(n);)i.push(u(s)),D(s,7);g(n,i.reverse()[-e[0]-1])}return n.valueOf()<=a.valueOf()?null:n}))).shift()||t}},302:function(e,t,a){a(354);var n=a(264),r=a(176).CalendarObject,s=(a(176).CalendarProperty,a(176).schema),i=t.iCalendar=function(e){r.call(this,this,"VCALENDAR"),this.calendar=this,e||(this.addProperty("VERSION","2.0"),this.addProperty("PRODID",a(440).PRODID))};n.inherits(i,r),i.prototype.events=function(){return this.components.VEVENT||[]},i.prototype.timezone=function(e){for(var t=0;t<this.components.VTIMEZONE.length;++t){var a=this.components.VTIMEZONE[t];if(a.getPropertyValue("TZID")==e)return a}},s.VCALENDAR={factory:i,valid_properties:[],required_properties:["PRODID","VERSION"],valid_children:["VEVENT"],required_children:[]},s.VTODO={required_properties:["DTSTAMP","UID"]},s.VJOURNAL={required_properties:["DTSTAMP","UID"]},s.VFREEBUSY={required_properties:["DTSTAMP","UID"]},s.VALARM={required_properties:["ACTION","TRIGGER"]}},354:function(e,t,a){"use strict";(function(t){var n=a(597);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function r(e,t){if(e===t)return 0;for(var a=e.length,n=t.length,r=0,s=Math.min(a,n);r<s;++r)if(e[r]!==t[r]){a=e[r],n=t[r];break}return a<n?-1:n<a?1:0}function s(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var i=a(264),o=Object.prototype.hasOwnProperty,l=Array.prototype.slice,d="foo"===function(){}.name;function c(e){return Object.prototype.toString.call(e)}function u(e){return!s(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}var p=e.exports=b,f=/\s*function\s+([^\(\s]*)\s*/;function h(e){if(i.isFunction(e)){if(d)return e.name;var t=e.toString().match(f);return t&&t[1]}}function E(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(d||!i.isFunction(e))return i.inspect(e);var t=h(e);return"[Function"+(t?": "+t:"")+"]"}function g(e,t,a,n,r){throw new p.AssertionError({message:a,actual:e,expected:t,operator:n,stackStartFunction:r})}function b(e,t){e||g(e,!0,t,"==",p.ok)}function j(e,t,a,n){if(e===t)return!0;if(s(e)&&s(t))return 0===r(e,t);if(i.isDate(e)&&i.isDate(t))return e.getTime()===t.getTime();if(i.isRegExp(e)&&i.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(u(e)&&u(t)&&c(e)===c(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(s(e)!==s(t))return!1;var o=(n=n||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===n.expected.indexOf(t)||(n.actual.push(e),n.expected.push(t),function(e,t,a,n){if(null==e||null==t)return!1;if(i.isPrimitive(e)||i.isPrimitive(t))return e===t;if(a&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var r=v(e),s=v(t);if(r&&!s||!r&&s)return!1;if(r)return j(e=l.call(e),t=l.call(t),a);var o,d,c=C(e),u=C(t);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),d=c.length-1;d>=0;d--)if(c[d]!==u[d])return!1;for(d=c.length-1;d>=0;d--)if(!j(e[o=c[d]],t[o],a,n))return!1;return!0}(e,t,a,n))}return a?e===t:e==t}function v(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function T(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function O(e,t,a,n){var r;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof a&&(n=a,a=null),r=function(e){var t;try{e()}catch(e){t=e}return t}(t),n=(a&&a.name?" ("+a.name+").":".")+(n?" "+n:"."),e&&!r&&g(r,a,"Missing expected exception"+n);var s="string"==typeof n,o=!e&&r&&!a;if((!e&&i.isError(r)&&s&&T(r,a)||o)&&g(r,a,"Got unwanted exception"+n),e&&r&&a&&!T(r,a)||!e&&r)throw r}p.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=E(m(this.actual),128)+" "+this.operator+" "+E(m(this.expected),128),this.generatedMessage=!0);var t=e.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var a=new Error;if(a.stack){var n=a.stack,r=h(t),s=n.indexOf("\n"+r);if(s>=0){var i=n.indexOf("\n",s+1);n=n.substring(i+1)}this.stack=n}}},i.inherits(p.AssertionError,Error),p.fail=g,p.ok=b,p.equal=function(e,t,a){e!=t&&g(e,t,a,"==",p.equal)},p.notEqual=function(e,t,a){e==t&&g(e,t,a,"!=",p.notEqual)},p.deepEqual=function(e,t,a){j(e,t,!1)||g(e,t,a,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(e,t,a){j(e,t,!0)||g(e,t,a,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(e,t,a){j(e,t,!1)&&g(e,t,a,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function e(t,a,n){j(t,a,!0)&&g(t,a,n,"notDeepStrictEqual",e)},p.strictEqual=function(e,t,a){e!==t&&g(e,t,a,"===",p.strictEqual)},p.notStrictEqual=function(e,t,a){e===t&&g(e,t,a,"!==",p.notStrictEqual)},p.throws=function(e,t,a){O(!0,e,t,a)},p.doesNotThrow=function(e,t,a){O(!1,e,t,a)},p.ifError=function(e){if(e)throw e},p.strict=n((function e(t,a){t||g(t,!0,a,"==",e)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var C=Object.keys||function(e){var t=[];for(var a in e)o.call(e,a)&&t.push(a);return t}}).call(this,a(253))},440:function(e,t,a){t.format_value=a(263).format_value,t.parse_value=a(263).parse_value,t.RRule=a(301).RRule,t.parse_calendar=a(441).parse_calendar,t.ParseError=a(441).ParseError,t.CalendarObject=a(176).CalendarObject,t.CalendarProperty=a(176).CalendarProperty,t.iCalendar=a(302).iCalendar,t.VEvent=a(598).VEvent,t.VTimezone=a(599).VTimezone,t.PRODID="-//Tri Tech Computers//node-icalendar//EN"},441:function(e,t,a){a(354);var n=a(264),r=a(263),s=a(176).CalendarObject,i=a(176).schema,o=a(176).properties,l=a(302).iCalendar,d=r.parse_value,c=(r.format_value,t.ParseError=function(){Error.apply(this,arguments)});function u(e,t){var a=e.calendar;return function n(r,l,c){if("BEGIN"==r){var p=(i[l]||{}).factory,f=void 0!==p?new p(a):new s(a,l);return u(f,(function(){return e.addComponent(f),n.apply(this,arguments)}))}if("END"==r)return t;var h=o[r]||{};return l=d(h.type,l,c,a,h.list),e.addProperty(r,l,c),n}}function p(e){var t,a,n={},r=PROP_NAME,s=0;function i(e){r=e,s=l+1}function o(){return e.substr(s,l-s)}for(var l=0,d=e.length;l<d;++l){var c=e[l];switch(r){case PROP_NAME:":"!=c&&";"!=c||(t=o(),r=PARAM_OR_VALUE,--l);break;case PARAM_OR_VALUE:if(":"==c)i(PROP_VALUE);else{if(";"!=c)throw new Error("Parse error");i(PARAM_NAME)}break;case PARAM_NAME:"="==c&&(a=o(),i(MAYBE_QUOTED_PARAM));break;case MAYBE_QUOTED_PARAM:'"'==c?i(QUOTED_PARAM_VALUE):r=PARAM_VALUE;break;case PARAM_VALUE:":"!=c&&";"!=c||(n[a]=o(),r=PARAM_OR_VALUE,--l);break;case QUOTED_PARAM_VALUE:'"'==c&&(n[a]=o(),r=PARAM_OR_VALUE);break;case PROP_VALUE:l=d;break;default:throw new Error("Invalid parser state")}}return[t,o(),n]}n.inherits(c,Error),PROP_NAME=0,PARAM_NAME=1,PARAM_VALUE=2,MAYBE_QUOTED_PARAM=3,QUOTED_PARAM_VALUE=4,PARAM_OR_VALUE=5,PROP_VALUE=6,t.parse_calendar=function(e,a){e=e.split(/\r?\n/);var n=new l(!0);if(a)if("string"==typeof a&&(a=t.parse_calendar(a)),a instanceof l)for(var r=a.getComponents("VTIMEZONE"),s=0;s<r.length;++s)n.addComponent(r[s]);else n.addComponent(r[s]);var i,o,d,f=(i="BEGIN",o="VCALENDAR",d=u(n),function(e,t,a){if(e!=i)throw new c("Expected BEGIN got "+e);if(o&&o!=t)throw new c("Expected "+o+" got "+t);return d});for(s=0;s<e.length-1;++s)if(e[s].length){if(void 0===f)throw new c("Mismatched BEGIN/END tags");for(var h=s;h+1<e.length&&(" "===e[h+1][0]||"\t"===e[h+1][0]);)++h;var E=e[s];if(h!=s){for(var m=e.slice(s,h+1),g=1;g<m.length;++g)m[g]=m[g].substr(1);E=m.join(""),s=h}f=f.apply(null,p(E))}if(void 0!==f)throw new c("Unable to parse calendar data; END:VCALENDAR not found!");return n}},597:function(e,t,a){e.exports=a(57)(1128)},598:function(e,t,a){"use strict";var n=a(264),r=a(176).CalendarObject,s=a(176).schema,i=a(302).iCalendar,o=a(301).RRule,l=t.VEvent=function(e,t){e instanceof i||null==e||(t=e,e=null),r.call(this,e,"VEVENT"),void 0!==t&&(this.addProperty("DTSTAMP",new Date),this.addProperty("UID",t))};n.inherits(l,r),l.prototype.setSummary=function(e){this.addProperty("SUMMARY",e)},l.prototype.setLocation=function(e){this.addProperty("LOCATION",e)},l.prototype.setDescription=function(e){this.addProperty("DESCRIPTION",e)},l.prototype.setDate=function(e,t){this.addProperty("DTSTART",e),t instanceof Date?this.addProperty("DTEND",t):this.addProperty("DURATION",t)},l.prototype.rrule=function(){var e=this.getPropertyValue("RRULE");if(!e)return null;for(var t,a=[],n=0;t=this.getPropertyValue("EXDATE",n++);)a.push.apply(a,t);return new o(e,{DTSTART:this.getPropertyValue("DTSTART"),DTEND:this.getPropertyValue("DTEND"),EXDATE:a})},l.prototype.inTimeRange=function(e,t){var a=this.rrule();if(a){var n=a.next(e);return null!==n&&(!t||n<=t)}var r=this.getPropertyValue("DTSTART"),s=this.getPropertyValue("DTEND");if(!s){var i=this.getPropertyValue("DURATION");if(0===i)return(!e||e<=r)&&(!t||t>r);s=i?new Date(r.valueOf()+1e3*this.getPropertyValue("DURATION")):new Date(r.valueOf()+864e5)}return(!e||e<s)&&(!t||t>r)},l.prototype.reply=function(e,t,a){var n=this.clone(!0);a=a||{},!0===t||void 0===t?t="ACCEPTED":!1===t&&(t="DECLINED"),n.setProperty("ATTENDEE",e,{PARTSTAT:t,CN:a.CN||e}),n.setProperty("DTSTAMP",new Date),n.setProperty("LAST-MODIFIED",new Date);var r=new i;return r.addProperty("METHOD","REPLY"),this.calendar&&r.addComponents(this.calendar.getComponents("VTIMEZONE")),r.addComponent(n),r},s.VEVENT={factory:l,valid_properties:[],required_properties:["DTSTAMP","UID"],valid_children:[],required_children:[]}},599:function(e,t,a){var n=a(354),r=a(264),s=a(176).CalendarObject,i=a(176).schema,o=a(301).RRule,l=t.VTimezone=function(e,t){s.call(this,e,"VTIMEZONE"),this.addProperty("TZID",t)};r.inherits(l,s),l.prototype.getRRule=function(e){var t=this.getComponents(e)[0];return t&&t.getPropertyValue("RRULE")?new o(t.getPropertyValue("RRULE"),t.getPropertyValue("DTSTART"),t.getPropertyValue("DTEND")):null},l.prototype.getOffsetForDate=function(e){if(!this.getComponents("DAYLIGHT").length)return this.getComponents("STANDARD")[0].getPropertyValue("TZOFFSETTO");n.equal(1,this.components.STANDARD.length),n.equal(1,this.components.DAYLIGHT.length);var t=this.getRRule("STANDARD"),a=this.getRRule("DAYLIGHT");return null===t||null===a?this.getComponents("STANDARD")[0].getPropertyValue("TZOFFSETTO"):(t=t.next(e),a=a.next(e),this.getComponents(a<t?"STANDARD":"DAYLIGHT")[0].getPropertyValue("TZOFFSETTO"))},l.prototype.fromLocalTime=function(e){var t=this.getOffsetForDate(e),a=t%100;return t=(t-a)/100,new Date(Date.UTC(e[0],e[1]-1,e[2],e[3]-t,e[4]-a,e[5]))},i.VTIMEZONE={factory:l}},864:function(e,t,a){"use strict";a.r(t),a.d(t,"NewCalendar",(function(){return L})),a.d(t,"CalendarsList",(function(){return U}));var n=a(4),r=a.n(n),s=a(2),i=a.n(s),o=a(5),l=a(25),d=a(11),c=a(123);function u(){return Math.random().toString(36).substr(2,9)}var p=a(39),f=a.n(p),h=a(15),E=a(248),m=a(6);function g({onClick:e,testSubj:t,disabled:a}){return Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiButtonEmpty,{size:"xs",color:"danger",onClick:e,isDisabled:a,"data-test-subj":t},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.deleteButtonLabel",defaultMessage:"Delete"})))}const b=({canCreateCalendar:e,canDeleteCalendar:t,eventsList:a,onDeleteClick:n,showSearchBar:r,showImportModal:i,showNewEventModal:d,loading:c,saving:u})=>{const p=[{field:"description",name:o.i18n.translate("xpack.ml.calendarsEdit.eventsTable.descriptionColumnName",{defaultMessage:"Description"}),sortable:!0,truncateText:!0,scope:"row"},{field:"start_time",name:o.i18n.translate("xpack.ml.calendarsEdit.eventsTable.startColumnName",{defaultMessage:"Start"}),sortable:!0,render:e=>f()(e).format(E.a)},{field:"end_time",name:o.i18n.translate("xpack.ml.calendarsEdit.eventsTable.endColumnName",{defaultMessage:"End"}),sortable:!0,render:e=>f()(e).format(E.a)},{field:"",name:"",render:e=>Object(m.jsx)(g,{testSubj:"mlCalendarEventDeleteButton",disabled:!1===t||!0===u||!0===c,onClick:()=>{n(e.event_id)}})}],b={toolsRight:[Object(m.jsx)(l.EuiButton,{isDisabled:!1===e||!0===u||!0===c,key:"ml_new_event","data-test-subj":"mlCalendarNewEventButton",size:"s",iconType:"plusInCircle",onClick:d},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.newEventButtonLabel",defaultMessage:"New event"})),Object(m.jsx)(l.EuiButton,{isDisabled:!1===e||!0===u||!0===c,key:"ml_import_event","data-test-subj":"mlCalendarImportEventsButton",size:"s",iconType:"importAction",onClick:i},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.importEventsButtonLabel",defaultMessage:"Import events"}))],box:{incremental:!0},filters:[]};return Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiSpacer,{size:"m"}),Object(m.jsx)(l.EuiInMemoryTable,{items:a,itemId:"event_id",columns:p,pagination:{initialPageSize:5,pageSizeOptions:[5,10]},sorting:{sort:{field:"description",direction:"asc"}},search:r?b:void 0,"data-test-subj":"mlCalendarEventsTable",rowProps:e=>({"data-test-subj":`mlCalendarEventListRow row-${e.description}`})}))};b.defaultProps={showSearchBar:!1,canCreateCalendar:!0,canDeleteCalendar:!0};var j=a(1),v=a(34),T=a(134);function O({calendarId:e,description:t}){return Object(m.jsx)(s.Fragment,null,Object(m.jsx)(T.a,null,Object(m.jsx)("span",{"data-test-subj":"mlCalendarTitle"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.calendarTitle",defaultMessage:"Calendar {calendarId}",values:{calendarId:e}}))),t?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(l.EuiText,{"data-test-subj":"mlCalendarDescriptionText"},Object(m.jsx)("p",null,t)),Object(m.jsx)(l.EuiSpacer,{size:"l"})):null)}const C=({calendarId:e,canCreateCalendar:t,canDeleteCalendar:a,description:n,eventsList:r,groupIds:d,isEdit:c,isNewCalendarIdValid:u,jobIds:p,onCalendarIdChange:f,onCreate:E,onCreateGroupOption:g,onDescriptionChange:C,onEdit:D,onEventDelete:x,onGroupSelection:M,showImportModal:y,onJobSelection:I,saving:A,loading:S,selectedGroupOptions:w,selectedJobOptions:R,showNewEventModal:L,isGlobalCalendar:F,onGlobalCalendarChange:N})=>{const _=o.i18n.translate("xpack.ml.calendarsEdit.calendarForm.allowedCharactersDescription",{defaultMessage:"Use lowercase alphanumerics (a-z and 0-9), hyphens or underscores; must start and end with an alphanumeric character"}),P=!0!==u||c?void 0:_,k=!1!==u||c?void 0:[_],U=!1===t||A||!u||""===e||!0===S,V=Object(v.a)(j.b.CALENDARS_MANAGE);return Object(m.jsx)(l.EuiForm,{"data-test-subj":"mlCalendarForm"+(!0===c?"Edit":"New")},!0===c?Object(m.jsx)(O,{calendarId:e,description:n}):Object(m.jsx)(s.Fragment,null,Object(m.jsx)(T.a,null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.createCalendarTitle",defaultMessage:"Create new calendar"})),Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.calendarIdLabel",defaultMessage:"Calendar ID"}),helpText:P,error:k,isInvalid:!u},Object(m.jsx)(l.EuiFieldText,{name:"calendarId",value:e,onChange:f,disabled:!0===c||!0===A||!0===S,"data-test-subj":"mlCalendarIdInput"})),Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.descriptionLabel",defaultMessage:"Description"})},Object(m.jsx)(l.EuiFieldText,{name:"description",value:n,onChange:C,disabled:!0===c||!0===A||!0===S,"data-test-subj":"mlCalendarDescriptionInput"})),Object(m.jsx)(l.EuiSpacer,{size:"m"})),Object(m.jsx)(l.EuiSwitch,{name:"switch",label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.allJobsLabel",defaultMessage:"Apply calendar to all jobs"}),checked:F,onChange:N,disabled:!0===A||!1===t||!0===S,"data-test-subj":"mlCalendarApplyToAllJobsSwitch"}),!1===F&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(l.EuiSpacer,{size:"m"}),Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.jobsLabel",defaultMessage:"Jobs"})},Object(m.jsx)(l.EuiComboBox,{options:p,selectedOptions:R,onChange:I,isDisabled:!0===A||!1===t||!0===S,"data-test-subj":"mlCalendarJobSelection"})),Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.groupsLabel",defaultMessage:"Groups"})},Object(m.jsx)(l.EuiComboBox,{onCreateOption:g,options:d,selectedOptions:w,onChange:M,isDisabled:!0===A||!1===t||!0===S,"data-test-subj":"mlCalendarJobGroupSelection"}))),Object(m.jsx)(l.EuiSpacer,{size:"xl"}),Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.eventsLabel",defaultMessage:"Events"}),fullWidth:!0},Object(m.jsx)(b,{canCreateCalendar:t,canDeleteCalendar:a,eventsList:r,onDeleteClick:x,showImportModal:y,showNewEventModal:L,loading:S,saving:A,showSearchBar:!0})),Object(m.jsx)(l.EuiSpacer,{size:"l"}),Object(m.jsx)(l.EuiFlexGroup,{justifyContent:"flexEnd"},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiButton,{isDisabled:A,onClick:V},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.cancelButtonLabel",defaultMessage:"Cancel"}))),Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiButton,{"data-test-subj":"mlSaveCalendarButton",fill:!0,onClick:c?D:E,isDisabled:U},A?Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.savingButtonLabel",defaultMessage:"Saving…"}):Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.calendarForm.saveButtonLabel",defaultMessage:"Save"})))))};class new_event_modal_NewEventModal extends s.Component{constructor(e){super(e),r()(this,"onDescriptionChange",(e=>{this.setState({description:e.target.value})})),r()(this,"handleAddEvent",(()=>{const{description:e,startDate:t,endDate:a}=this.state,n=u(),r={description:e,start_time:t.valueOf(),end_time:a.valueOf(),event_id:n};this.props.addEvent(r)})),r()(this,"handleChangeStart",(e=>{let t=null,a=this.state.endDate;const n=f()(e),r=f()(e);t=n.startOf("day"),t>a&&(a=r.startOf("day").add(1,"days")),this.setState({startDate:t,endDate:a,startDateString:t.format(E.a),endDateString:a.format(E.a)})})),r()(this,"handleChangeEnd",(e=>{let t=this.state.startDate,a=null;const n=f()(e);a=f()(e).startOf("day"),t>a&&(t=n.startOf("day").subtract(1,"days")),this.setState({startDate:t,endDate:a,startDateString:t.format(E.a),endDateString:a.format(E.a)})})),r()(this,"handleTimeStartChange",(e=>{const t=e.target.value;let a=!1;19===t.length?a=f()(t).isValid(E.a,!0):this.setState({startDateString:t}),a&&this.setState({startDateString:t,startDate:f()(t)})})),r()(this,"handleTimeEndChange",(e=>{const t=e.target.value;let a=!1;19===t.length?a=f()(t).isValid(E.a,!0):this.setState({endDateString:t}),a&&this.setState({endDateString:t,endDate:f()(t)})})),r()(this,"renderRangedDatePicker",(()=>{const{startDate:e,endDate:t,startDateString:a,endDateString:n}=this.state,r=Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiFlexGroup,null,Object(m.jsx)(l.EuiFlexItem,null,Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.newEventModal.fromLabel",defaultMessage:"From:"}),helpText:E.a},Object(m.jsx)(l.EuiFieldText,{name:"startTime",onChange:this.handleTimeStartChange,placeholder:E.a,value:a}))),Object(m.jsx)(l.EuiFlexItem,null,Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.newEventModal.toLabel",defaultMessage:"To:"}),helpText:E.a},Object(m.jsx)(l.EuiFieldText,{name:"endTime",onChange:this.handleTimeEndChange,placeholder:E.a,value:n})))));return Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiSpacer,{size:"s"}),r,Object(m.jsx)(l.EuiSpacer,{size:"s"}),Object(m.jsx)(l.EuiFormRow,{fullWidth:!0},Object(m.jsx)(l.EuiDatePickerRange,{inline:!0,css:Object(m.css)("@media (min-width: ",553,"px){inline-size:",553,"px;max-inline-size:100%;}",""),startDateControl:Object(m.jsx)(l.EuiDatePicker,{selected:e,onChange:this.handleChangeStart,startDate:e,endDate:t,isInvalid:e>t,"aria-label":o.i18n.translate("xpack.ml.calendarsEdit.newEventModal.startDateAriaLabel",{defaultMessage:"Start date"}),timeFormat:E.a,dateFormat:E.a}),endDateControl:Object(m.jsx)(l.EuiDatePicker,{selected:t,onChange:this.handleChangeEnd,startDate:e,endDate:t,isInvalid:e>t,"aria-label":o.i18n.translate("xpack.ml.calendarsEdit.newEventModal.endDateAriaLabel",{defaultMessage:"End date"}),timeFormat:E.a,dateFormat:E.a})})))}));const t=f()().startOf("day"),a=f()().startOf("day").add(1,"days");this.state={startDate:t,endDate:a,description:"",startDateString:t.format(E.a),endDateString:a.format(E.a)}}render(){const{closeModal:e}=this.props,{description:t}=this.state;return Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiModal,{onClose:e,initialFocus:"[name=eventDescription]",maxWidth:!1,"data-test-subj":"mlCalendarEventForm"},Object(m.jsx)(l.EuiModalHeader,null,Object(m.jsx)(l.EuiModalHeaderTitle,null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.newEventModal.createNewEventTitle",defaultMessage:"Create new event"}))),Object(m.jsx)(l.EuiModalBody,null,Object(m.jsx)(l.EuiForm,null,Object(m.jsx)(l.EuiFormRow,{label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.newEventModal.descriptionLabel",defaultMessage:"Description"}),fullWidth:!0},Object(m.jsx)(l.EuiFieldText,{name:"eventDescription",onChange:this.onDescriptionChange,isInvalid:!t,fullWidth:!0,"data-test-subj":"mlCalendarEventDescriptionInput"})),Object(m.jsx)(l.EuiSpacer,{size:"m"}),this.renderRangedDatePicker())),Object(m.jsx)(l.EuiModalFooter,null,Object(m.jsx)(l.EuiButtonEmpty,{onClick:e,"data-test-subj":"mlCalendarCancelEventButton"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.newEventModal.cancelButtonLabel",defaultMessage:"Cancel"})),Object(m.jsx)(l.EuiButton,{onClick:this.handleAddEvent,fill:!0,disabled:!t,"data-test-subj":"mlCalendarAddEventButton"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.newEventModal.addButtonLabel",defaultMessage:"Add"})))))}}function D({events:e,showRecurringWarning:t,includePastEvents:a,onCheckboxToggle:n,onEventDelete:r}){return Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiSpacer,{size:"s"}),Object(m.jsx)(l.EuiFlexItem,null,Object(m.jsx)(l.EuiText,null,Object(m.jsx)("h4",null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.importedEvents.eventsToImportTitle",defaultMessage:"Events to import: {eventsCount}",values:{eventsCount:e.length}})),t&&Object(m.jsx)(l.EuiText,{color:"danger"},Object(m.jsx)("p",null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.importedEvents.recurringEventsNotSupportedDescription",defaultMessage:"Recurring events not supported. Only the first event will be imported."}))))),Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(b,{eventsList:e,onDeleteClick:r})),Object(m.jsx)(l.EuiSpacer,{size:"m"}),Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiCheckbox,{id:"ml-include-past-events",label:Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.importedEvents.includePastEventsLabel",defaultMessage:"Include past events"}),checked:a,onChange:n})))}var x=a(440),M=a.n(x);function y(e){const t=f()().valueOf();return e.filter((e=>e.start_time>t))}class import_modal_ImportModal extends s.Component{constructor(e){super(e),r()(this,"handleImport",(async e=>{const t=e[0],a=o.i18n.translate("xpack.ml.calendarsEdit.importModal.couldNotParseICSFileErrorMessage",{defaultMessage:"Could not parse ICS file."});let n=[];if(t&&t.size<=1e8){this.setState({fileLoading:!0,fileLoaded:!0});try{r=(await(s=t,new Promise(((e,t)=>{if(s&&s.size){const a=new FileReader;a.readAsText(s),a.onload=()=>{const n=a.result;""===n?t():e({data:n})}}else t()})))).data,n=function(e){const t=e.events(),a=[];return t.forEach((e=>{if("VEVENT"===e.element){const t=e.properties.SUMMARY,n=e.properties.DTSTART,r=e.properties.DTEND,s=void 0!==e.properties.RRULE;if(t&&n&&r&&t.length&&n.length&&r.length){const e=u();a.push({event_id:e,description:t[0].value,start_time:n[0].value.valueOf(),end_time:r[0].value.valueOf(),asterisk:s})}}})),a}(M.a.parse_calendar(r+"\n")),this.setState({allImportedEvents:n,selectedEvents:y(n),fileLoading:!1,errorMessage:null,includePastEvents:!1})}catch(e){console.log(a,e),this.setState({errorMessage:a,fileLoading:!1})}}else t&&t.size>1e8?this.setState({fileLoading:!1,errorMessage:a}):this.setState({fileLoading:!1,errorMessage:null});var r,s})),r()(this,"onEventDelete",(e=>{this.setState((t=>({allImportedEvents:t.allImportedEvents.filter((t=>t.event_id!==e)),selectedEvents:t.selectedEvents.filter((t=>t.event_id!==e))})))})),r()(this,"onCheckboxToggle",(e=>{this.setState({includePastEvents:e.target.checked})})),r()(this,"handleEventsAdd",(()=>{const{allImportedEvents:e,selectedEvents:t,includePastEvents:a}=this.state,n=(a?e:t).map((e=>({description:e.description,start_time:e.start_time,end_time:e.end_time,event_id:e.event_id})));this.props.addImportedEvents(n)})),r()(this,"renderCallout",(()=>Object(m.jsx)(l.EuiCallOut,{color:"danger"},Object(m.jsx)("p",null,this.state.errorMessage)))),this.state={includePastEvents:!1,allImportedEvents:[],selectedEvents:[],fileLoading:!1,fileLoaded:!1,errorMessage:null}}render(){const{closeImportModal:e}=this.props,{fileLoading:t,fileLoaded:a,allImportedEvents:n,selectedEvents:r,errorMessage:i,includePastEvents:d}=this.state;let c,u=!1;return c=d?n:r,void 0!==c.find((e=>e.asterisk))&&(u=!0),Object(m.jsx)(s.Fragment,null,Object(m.jsx)(l.EuiModal,{onClose:e,maxWidth:!0},Object(m.jsx)(l.EuiModalHeader,null,Object(m.jsx)(l.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiModalHeaderTitle,null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.importEventsTitle",defaultMessage:"Import events"}))),Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)("p",null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.importEventsDescription",defaultMessage:"Import events from an ICS file."}))))),Object(m.jsx)(l.EuiModalBody,null,Object(m.jsx)(l.EuiFlexGroup,{direction:"column"},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiFilePicker,{compressed:!0,initialPromptText:o.i18n.translate("xpack.ml.calendarsEdit.importModal.selectOrDragAndDropFilePromptText",{defaultMessage:"Select or drag and drop a file"}),onChange:this.handleImport,disabled:t})),null!==i&&this.renderCallout(),n.length>0&&Object(m.jsx)(D,{events:c,showRecurringWarning:u,includePastEvents:d,onCheckboxToggle:this.onCheckboxToggle,onEventDelete:this.onEventDelete}))),Object(m.jsx)(l.EuiModalFooter,null,Object(m.jsx)(l.EuiButtonEmpty,{onClick:e},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.cancelButtonLabel",defaultMessage:"Cancel"})),Object(m.jsx)(l.EuiButton,{onClick:this.handleEventsAdd,fill:!0,disabled:!1===a||null!==i},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsEdit.eventsTable.importButtonLabel",defaultMessage:"Import"})))))}}var I=a(21),A=a(237),S=a(71),w=a(17),R=a(142);class new_calendar_NewCalendarUI extends s.Component{constructor(e){super(e),r()(this,"returnToCalendarsManagementPage",(async()=>{const{services:{http:{basePath:e},application:{navigateToUrl:t}}}=this.props.kibana;await t(`${e.get()}/app/ml/${j.b.CALENDARS_MANAGE}`,!0)})),r()(this,"isDuplicateId",(()=>{const{calendars:e,formCalendarId:t}=this.state;for(let a=0;a<e.length;a++)if(e[a].calendar_id===t)return!0;return!1})),r()(this,"onCreate",(async()=>{const{formCalendarId:e}=this.state;if(this.isDuplicateId()){const{toasts:t}=this.props.kibana.services.notifications;t.addDanger(o.i18n.translate("xpack.ml.calendarsEdit.canNotCreateCalendarWithExistingIdErrorMessag",{defaultMessage:"Cannot create calendar with id [{formCalendarId}] as it already exists.",values:{formCalendarId:e}}))}else{const e=this.setUpCalendarForApi();this.setState({saving:!0});try{await d.ml.addCalendar(e),await this.returnToCalendarsManagementPage()}catch(t){this.setState({saving:!1}),this.toastNotificationService.displayErrorToast(t,o.i18n.translate("xpack.ml.calendarsEdit.errorWithCreatingCalendarErrorMessage",{defaultMessage:"An error occurred creating calendar {calendarId}",values:{calendarId:e.calendarId}}))}}})),r()(this,"onEdit",(async()=>{const e=this.setUpCalendarForApi();this.setState({saving:!0});try{await d.ml.updateCalendar(e),await this.returnToCalendarsManagementPage()}catch(t){this.setState({saving:!1}),this.toastNotificationService.displayErrorToast(t,o.i18n.translate("xpack.ml.calendarsEdit.errorWithUpdatingCalendarErrorMessage",{defaultMessage:"An error occurred saving calendar {calendarId}. Try refreshing the page.",values:{calendarId:e.calendarId}}))}})),r()(this,"setUpCalendarForApi",(()=>{const{formCalendarId:e,description:t,events:a,selectedGroupOptions:n,selectedJobOptions:r,isGlobalCalendar:s}=this.state,i=s?[A.a]:[...r.map((e=>e.label)),...n.map((e=>e.label))];return{calendarId:e,description:t,events:a.map((e=>({description:e.description,start_time:e.start_time,end_time:e.end_time}))),job_ids:i}})),r()(this,"onCreateGroupOption",(e=>{const t={label:e};this.setState((e=>({selectedGroupOptions:e.selectedGroupOptions.concat(t)})))})),r()(this,"onGlobalCalendarChange",(({currentTarget:e})=>{this.setState({isGlobalCalendar:e.checked})})),r()(this,"onJobSelection",(e=>{this.setState({selectedJobOptions:e})})),r()(this,"onGroupSelection",(e=>{this.setState({selectedGroupOptions:e})})),r()(this,"onCalendarIdChange",(e=>{const t=function(e){let t=!0;return(""===e||void 0===e||!1===Object(c.l)(e))&&(t=!1),t}(e.target.value);this.setState({formCalendarId:e.target.value,isNewCalendarIdValid:t})})),r()(this,"onDescriptionChange",(e=>{this.setState({description:e.target.value})})),r()(this,"showImportModal",(()=>{this.setState((e=>({isImportModalVisible:!e.isImportModalVisible})))})),r()(this,"closeImportModal",(()=>{this.setState({isImportModalVisible:!1})})),r()(this,"onEventDelete",(e=>{this.setState((t=>({events:t.events.filter((t=>t.event_id!==e))})))})),r()(this,"closeNewEventModal",(()=>{this.setState({isNewEventModalVisible:!1})})),r()(this,"showNewEventModal",(()=>{this.setState({isNewEventModalVisible:!0})})),r()(this,"addEvent",(e=>{this.setState((t=>({events:[...t.events,e],isNewEventModalVisible:!1})))})),r()(this,"addImportedEvents",(e=>{this.setState((t=>({events:[...t.events,...e],isImportModalVisible:!1})))})),this.state={isNewEventModalVisible:!1,isImportModalVisible:!1,isNewCalendarIdValid:null,loading:!0,jobIds:[],jobIdOptions:[],groupIds:[],groupIdOptions:[],calendars:[],formCalendarId:"",description:"",selectedJobOptions:[],selectedGroupOptions:[],events:[],saving:!1,selectedCalendar:void 0,isGlobalCalendar:!1}}componentDidMount(){this.toastNotificationService=Object(S.toastNotificationServiceProvider)(this.props.kibana.services.notifications.toasts),this.formSetup()}async formSetup(){try{const{jobIds:e,groupIds:t,calendars:a}=await new Promise((async(e,t)=>{try{const[t,a,n]=await Promise.all([new Promise(((e,t)=>{d.ml.jobs.jobsSummary().then((t=>{e(t.map((e=>e.id)))})).catch((e=>{const a=o.i18n.translate("xpack.ml.calendarsEdit.errorWithFetchingJobSummariesErrorMessage",{defaultMessage:"Error fetching job summaries: {err}",values:{err:e}});console.log(a),t(a)}))})),new Promise(((e,t)=>{d.ml.jobs.groups().then((t=>{e(t.map((e=>e.id)))})).catch((e=>{const a=o.i18n.translate("xpack.ml.calendarsEdit.errorWithLoadingGroupsErrorMessage",{defaultMessage:"Error loading groups: {err}",values:{err:e}});console.log(a),t(a)}))})),new Promise(((e,t)=>{d.ml.calendars().then((t=>{e(t)})).catch((e=>{const a=o.i18n.translate("xpack.ml.calendarsEdit.errorWithLoadingCalendarsErrorMessage",{defaultMessage:"Error loading calendars: {err}",values:{err:e}});console.log(a),t(a)}))}))]);e({jobIds:t,groupIds:a,calendars:n})}catch(e){console.log(e),t(e)}})),n=e.map((e=>({label:e}))),r=t.map((e=>({label:e}))),s=[],i=[];let l,c=[],u="",p=!1;void 0!==this.props.calendarId&&(l=a.find((e=>e.calendar_id===this.props.calendarId)),l&&(u=l.calendar_id,c=l.events,l.job_ids.includes(A.a)?p=!0:l.job_ids.forEach((a=>{e.find((e=>e===a))?s.push({label:a}):t.find((e=>e===a))&&i.push({label:a})})))),this.setState({events:c,formCalendarId:u,jobIds:e,jobIdOptions:n,groupIds:t,groupIdOptions:r,calendars:a,loading:!1,selectedJobOptions:s,selectedGroupOptions:i,selectedCalendar:l,isGlobalCalendar:p})}catch(e){this.setState({loading:!1}),this.toastNotificationService.displayErrorToast(e,o.i18n.translate("xpack.ml.calendarsEdit.errorWithLoadingCalendarFromDataErrorMessage",{defaultMessage:"An error occurred loading calendar form data. Try refreshing the page."}))}}render(){const{events:e,isNewEventModalVisible:t,isImportModalVisible:a,isNewCalendarIdValid:n,formCalendarId:r,description:i,groupIdOptions:o,jobIdOptions:d,saving:c,loading:u,selectedCalendar:p,selectedJobOptions:f,selectedGroupOptions:h,isGlobalCalendar:E}=this.state,g=Object(w.c)().links.ml.calendars;let b="";return t?b=Object(m.jsx)(new_event_modal_NewEventModal,{addEvent:this.addEvent,closeModal:this.closeNewEventModal}):a&&(b=Object(m.jsx)(import_modal_ImportModal,{addImportedEvents:this.addImportedEvents,closeImportModal:this.closeImportModal})),Object(m.jsx)(s.Fragment,null,Object(m.jsx)("div",{"data-test-subj":"mlPageCalendarEdit"},Object(m.jsx)(l.EuiPageBody,null,Object(m.jsx)(C,{calendarId:p?p.calendar_id:r,canCreateCalendar:this.props.canCreateCalendar,canDeleteCalendar:this.props.canDeleteCalendar,description:p?p.description:i,eventsList:e,groupIds:o,isEdit:void 0!==p,isNewCalendarIdValid:!(!p&&null!==n)||n,jobIds:d,onCalendarIdChange:this.onCalendarIdChange,onCreate:this.onCreate,onDescriptionChange:this.onDescriptionChange,onEdit:this.onEdit,onEventDelete:this.onEventDelete,onGroupSelection:this.onGroupSelection,showImportModal:this.showImportModal,onJobSelection:this.onJobSelection,saving:c,loading:u,selectedGroupOptions:h,selectedJobOptions:f,onCreateGroupOption:this.onCreateGroupOption,showNewEventModal:this.showNewEventModal,isGlobalCalendar:E,onGlobalCalendarChange:this.onGlobalCalendarChange}),b)),Object(m.jsx)(R.a,{docLink:g}))}}const L=Object(I.withKibana)(new_calendar_NewCalendarUI),F=Object(I.withKibana)((function({totalCount:e,refreshCalendars:t,kibana:a}){const n=a.services.docLinks.links.ml.calendars;return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(T.a,null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.settings.calendars.listHeader.calendarsTitle",defaultMessage:"Calendars"})),Object(m.jsx)(l.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline"},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiFlexGroup,{alignItems:"baseline",gutterSize:"m",responsive:!1},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiTextColor,{color:"subdued"},Object(m.jsx)("p",null,Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.settings.calendars.listHeader.calendarsListTotalCount",defaultMessage:"{totalCount} in total",values:{totalCount:e}})))))),Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiFlexGroup,{alignItems:"baseline",gutterSize:"m",responsive:!1},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiButtonEmpty,{size:"s",iconType:"refresh",onClick:t,"data-test-subj":"mlCalendarListRefreshButton"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.settings.calendars.listHeader.refreshButtonLabel",defaultMessage:"Refresh"})))))),Object(m.jsx)(l.EuiSpacer,{size:"m"}),Object(m.jsx)(l.EuiText,null,Object(m.jsx)("p",null,Object(m.jsx)(l.EuiTextColor,{color:"subdued"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.settings.calendars.listHeader.calendarsDescription",defaultMessage:"Calendars contain a list of scheduled events for which you do not want to generate anomalies, such as planned system outages or public holidays. The same calendar can be assigned to multiple jobs.{br}{learnMoreLink}",values:{br:Object(m.jsx)("br",null),learnMoreLink:Object(m.jsx)(l.EuiLink,{href:n,target:"_blank"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.settings.calendars.listHeader.calendarsDescription.learnMoreLinkText",defaultMessage:"Learn more"}))}})))),Object(m.jsx)(l.EuiSpacer,{size:"m"}))}));var N=a(22);const _=({calendarsList:e,onDeleteClick:t,setSelectedCalendarList:a,loading:n,canCreateCalendar:r,canDeleteCalendar:s,mlNodesAvailable:i,itemsSelected:d})=>{const c=Object(v.a)(j.b.CALENDARS_NEW),u=[{field:"calendar_id",name:o.i18n.translate("xpack.ml.calendarsList.table.idColumnName",{defaultMessage:"ID"}),sortable:!0,truncateText:!0,scope:"row",render:e=>Object(m.jsx)(N.Link,{to:`/${j.b.CALENDARS_EDIT}/${e}`,"data-test-subj":"mlEditCalendarLink"},e),"data-test-subj":"mlCalendarListColumnId"},{field:"job_ids_string",name:o.i18n.translate("xpack.ml.calendarsList.table.jobsColumnName",{defaultMessage:"Jobs"}),sortable:!0,truncateText:!0,render:e=>e===A.a?Object(m.jsx)("span",{style:{fontStyle:"italic"}},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsList.table.allJobsLabel",defaultMessage:"Applies to all jobs"})):e,"data-test-subj":"mlCalendarListColumnJobs"},{field:"events_length",name:o.i18n.translate("xpack.ml.calendarsList.table.eventsColumnName",{defaultMessage:"Events"}),sortable:!0,render:e=>o.i18n.translate("xpack.ml.calendarsList.table.eventsCountLabel",{defaultMessage:"{eventsLength, plural, one {# event} other {# events}}",values:{eventsLength:e}}),"data-test-subj":"mlCalendarListColumnEvents"}],p={onSelectionChange:e=>a(e)},f={toolsRight:[Object(m.jsx)(l.EuiButton,{size:"s","data-test-subj":"mlCalendarButtonCreate",key:"new_calendar_button",onClick:c,isDisabled:!1===r||!1===i},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsList.table.newButtonLabel",defaultMessage:"New"})),Object(m.jsx)(l.EuiButton,{size:"s",color:"danger",iconType:"trash",onClick:t,isDisabled:!1===s||!1===i||!1===d,"data-test-subj":"mlCalendarButtonDelete",key:"delete_calendar_button"},Object(m.jsx)(h.FormattedMessage,{id:"xpack.ml.calendarsList.table.deleteButtonLabel",defaultMessage:"Delete"}))],box:{incremental:!0},filters:[]};return Object(m.jsx)("div",{"data-test-subj":"mlCalendarTableContainer"},Object(m.jsx)(l.EuiInMemoryTable,{items:e,itemId:"calendar_id",columns:u,search:f,pagination:{initialPageSize:20,pageSizeOptions:[10,20]},sorting:{sort:{field:"calendar_id",direction:"asc"}},loading:n,selection:p,"data-test-subj":n?"mlCalendarTable loading":"mlCalendarTable loaded",rowProps:e=>({"data-test-subj":`mlCalendarListRow row-${e.calendar_id}`})}))};var P=a(23),k=a(322);class calendars_list_CalendarsListUI extends s.Component{constructor(e){super(e),r()(this,"loadCalendars",(async()=>{this.setState({loading:!0});try{const e=await d.ml.calendars();this.setState({calendars:e,loading:!1,isDestroyModalVisible:!1})}catch(e){console.log(e),this.setState({loading:!1});const{toasts:t}=this.props.kibana.services.notifications;t.addDanger(o.i18n.translate("xpack.ml.calendarsList.errorWithLoadingListOfCalendarsErrorMessage",{defaultMessage:"An error occurred loading the list of calendars."})),Object(S.toastNotificationServiceProvider)(t).displayErrorToast(e,o.i18n.translate("xpack.ml.calendarsList.errorWithLoadingListOfCalendarsErrorMessage",{defaultMessage:"An error occurred loading the list of calendars."}))}})),r()(this,"closeDestroyModal",(()=>{this.setState({isDestroyModalVisible:!1,calendarId:null})})),r()(this,"showDestroyModal",(()=>{this.setState({isDestroyModalVisible:!0})})),r()(this,"setSelectedCalendarList",(e=>{this.setState({selectedForDeletion:e})})),r()(this,"deleteCalendars",(()=>{const{selectedForDeletion:e}=this.state;this.closeDestroyModal(),async function(e,t){if(void 0===e||0===e.length)return;const a=Object(w.f)(),n=e.length>1?o.i18n.translate("xpack.ml.calendarsList.deleteCalendars.calendarsLabel",{defaultMessage:"{calendarsToDeleteCount} calendars",values:{calendarsToDeleteCount:e.length}}):`${e[0].calendar_id}`;a.add(o.i18n.translate("xpack.ml.calendarsList.deleteCalendars.deletingCalendarsNotificationMessage",{defaultMessage:"Deleting {messageId}",values:{messageId:n}}));for(const t of e){const e=t.calendar_id;try{await d.ml.deleteCalendar({calendarId:e})}catch(e){console.log("Error deleting calendar:",e),a.addDanger({title:o.i18n.translate("xpack.ml.calendarsList.deleteCalendars.deletingCalendarErrorMessage",{defaultMessage:"An error occurred deleting calendar {calendarId}",values:{calendarId:t.calendar_id}}),text:Object(k.a)(e)})}}a.addSuccess(o.i18n.translate("xpack.ml.calendarsList.deleteCalendars.deletingCalendarSuccessNotificationMessage",{defaultMessage:"{messageId} deleted",values:{messageId:n}})),t()}(e,this.loadCalendars)})),r()(this,"addRequiredFieldsToList",((e=[])=>{for(let t=0;t<e.length;t++)e[t].job_ids_string=e[t].job_ids.join(", "),e[t].events_length=e[t].events.length;return e})),this.state={loading:!0,calendars:[],isDestroyModalVisible:!1,calendarId:null,selectedForDeletion:[],nodesAvailable:Object(P.e)()}}componentDidMount(){this.loadCalendars()}render(){const{calendars:e,selectedForDeletion:t,loading:a,nodesAvailable:n}=this.state,{canCreateCalendar:r,canDeleteCalendar:s}=this.props;let d="";const c=Object(w.c)().links.ml.calendars;return this.state.isDestroyModalVisible&&(d=Object(m.jsx)(l.EuiConfirmModal,{"data-test-subj":"mlCalendarDeleteConfirmation",title:o.i18n.translate("xpack.ml.calendarsList.deleteCalendarsModal.deleteMultipleCalendarsTitle",{defaultMessage:"Delete {calendarsCount, plural, one {{calendarsList}} other {# calendars}}?",values:{calendarsCount:t.length,calendarsList:t.map((e=>e.calendar_id)).join(", ")}}),onCancel:this.closeDestroyModal,onConfirm:this.deleteCalendars,cancelButtonText:o.i18n.translate("xpack.ml.calendarsList.deleteCalendarsModal.cancelButtonLabel",{defaultMessage:"Cancel"}),confirmButtonText:o.i18n.translate("xpack.ml.calendarsList.deleteCalendarsModal.deleteButtonLabel",{defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:l.EUI_MODAL_CONFIRM_BUTTON})),Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)("div",{"data-test-subj":"mlPageCalendarManagement"},Object(m.jsx)(F,{totalCount:e.length,refreshCalendars:this.loadCalendars}),Object(m.jsx)(_,{loading:a,calendarsList:this.addRequiredFieldsToList(e),onDeleteClick:this.showDestroyModal,canCreateCalendar:r,canDeleteCalendar:s,mlNodesAvailable:n,setSelectedCalendarList:this.setSelectedCalendarList,itemsSelected:t.length>0}),d),Object(m.jsx)(R.a,{docLink:c}))}}const U=Object(I.withKibana)(calendars_list_CalendarsListUI)}}]);