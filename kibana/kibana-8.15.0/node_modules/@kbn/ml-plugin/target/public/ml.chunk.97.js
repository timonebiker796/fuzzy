/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[97],{833:function(e,t,a){"use strict";a.r(t);var n=a(2),l=a.n(n),o=a(25),s=a(15),i=a(21),d=a(30),c=a(11),r=a(12),u=a(18),j=a(6);function m(e){return void 0===e.node&&e.state===d.c.OPENING}t.default=({jobIds:e})=>{const{http:t}=Object(i.useKibana)().services,a=Object(n.useMemo)((()=>Object(c.mlApiServicesProvider)(new r.a(t))),[t]),[d,b]=Object(n.useState)(0),[g,p]=Object(n.useState)(null),O=Object(n.useCallback)((async()=>{try{if(0===e.length)return void b(0);const{lazyNodeCount:t}=await a.mlNodeCount();if(0===t)return void b(0);const{jobs:n}=await a.getJobStats({jobId:e.join(",")}),l=n.filter(m);b(l.length)}catch(e){b(0),console.error("Could not determine ML node information",e)}}),[e]),f=Object(n.useCallback)((async()=>{if(0!==d)try{var e;const t=await a.mlInfo(),n=null!==(e=t.cloudId)&&void 0!==e?e:null,l=!0===t.isCloudTrial;p({isCloud:null!==n,cloudId:n,isCloudTrial:l,deploymentId:null===n?null:Object(u.a)(n)})}catch(e){p(null),console.error("Could not determine cloud information",e)}}),[d]);return Object(n.useEffect)((()=>{f()}),[d]),Object(n.useEffect)((()=>{O()}),[e]),0===d?null:Object(j.jsx)(l.a.Fragment,null,Object(j.jsx)(o.EuiCallOut,{title:Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.title",defaultMessage:"Awaiting machine learning node"}),color:"primary",iconType:"iInCircle"},Object(j.jsx)("div",null,Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.noMLNodesAvailableDescription",defaultMessage:"{jobCount, plural, one {# job} other {# jobs}} will start after autoscaling has increased ML capacity. This may take several minutes.",values:{jobCount:d}}),Object(j.jsx)(o.EuiSpacer,{size:"s"}),g&&(g.isCloud?Object(j.jsx)(l.a.Fragment,null,Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.isCloud",defaultMessage:"Elastic Cloud deployments can autoscale to add more ML capacity. This may take 5-20 minutes. "}),null===g.deploymentId?null:Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.isCloud.link",defaultMessage:"You can monitor progress in the {link}.",values:{link:Object(j.jsx)(o.EuiLink,{href:`https://cloud.elastic.co/deployments?q=${g.deploymentId}`},Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.linkToCloud.linkText",defaultMessage:"Elastic Cloud admin console"}))}})):Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.notCloud",defaultMessage:"Only Elastic Cloud deployments can autoscale; you must add machine learning nodes. {link}",values:{link:Object(j.jsx)(o.EuiLink,{href:"https://www.elastic.co/guide/en/elasticsearch/reference/master/modules-node.html#ml-node"},Object(j.jsx)(s.FormattedMessage,{id:"xpack.ml.jobsAwaitingNodeWarningShared.linkToCloud.learnMore",defaultMessage:"Learn more."}))}})))),Object(j.jsx)(o.EuiSpacer,{size:"m"}))}}}]);