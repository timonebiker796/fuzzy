/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[45,77],{143:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a(120),i=a.n(n),o=a(2),r=a(88),s=a(149),l=a(26),c=a.n(l),u=a(84),d=a.n(u),m=a(25);const b="eui-global",p="eui-utilities",j={darkMode:!1};var g=a(6);const f=[m.euiStylisPrefixer],v=d()({key:"css",stylisPlugins:f,container:document.querySelector('meta[name="emotion"]')}),x=d()({key:b,stylisPlugins:f,container:document.querySelector(`meta[name="${b}"]`)}),O=d()({key:p,stylisPlugins:f,container:document.querySelector(`meta[name="${p}"]`)});v.compat=!0,x.compat=!0,O.compat=!0;const h={default:v,global:x,utility:O},y=({theme:{theme$:e},globalStyles:t,colorMode:a,modify:n,children:i})=>{const r=c()(e,j),s=Object(o.useMemo)((()=>(e=>e.darkMode?m.COLOR_MODES_STANDARD.dark:m.COLOR_MODES_STANDARD.light)(r)),[r]),l=a||s,u=!1!==t&&void 0;return Object(g.jsx)(m.EuiProvider,{cache:h,modify:n,colorMode:l,globalStyles:u,utilityClasses:u},i)},w=({children:e,i18n:t,...a})=>Object(r.useIsNestedEuiProvider)()?(Object(s.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(g.jsx)(t.Context,null,e)):Object(g.jsx)(y,a,Object(g.jsx)(t.Context,null,e));var S=a(89);const E=({children:e,...t})=>Object(g.jsx)(w,i()({globalStyles:!1},t),Object(g.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(g.jsx)(S.KibanaErrorBoundary,null,e)))},149:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var n=void 0;t.setEuiDevProviderWarning=function(e){return n=e},t.getEuiDevProviderWarning=function(){return n},t.emitEuiProviderWarning=function(e){if("function"==typeof n)return n(e);switch(n){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},192:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e){n.useEffect(e,[])}},199:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return entity_control_EntityControl}));var n=a(4),i=a.n(n),o=a(8),r=a(2),s=a(25),l=a(15),c=a(5),u=a(335),d=a(6);const m=({entity:e,isModelPlotEnabled:t,config:a,onConfigChange:n})=>{var i,o;const[u,m]=Object(r.useState)(!1),b=t&&!(null!=a&&a.anomalousOnly),p=Object(r.useMemo)((()=>[{id:"anomaly_score",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.sortByScoreLabel",{defaultMessage:"Anomaly score"}),disabled:b},{id:"name",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.sortByNameLabel",{defaultMessage:"Name"})}]),[t,a]),j=Object(r.useMemo)((()=>[{id:"asc",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.ascOptionsOrderLabel",{defaultMessage:"asc"})},{id:"desc",label:c.i18n.translate("xpack.ml.timeSeriesExplorer.descOptionsOrderLabel",{defaultMessage:"desc"})}]),[]);return Object(d.jsx)(s.EuiPopover,{ownFocus:!0,style:{height:"40px"},button:Object(d.jsx)(s.EuiButtonIcon,{color:"text",iconSize:"m",iconType:"gear","aria-label":c.i18n.translate("xpack.ml.timeSeriesExplorer.editControlConfiguration",{defaultMessage:"Edit field configuration"}),onClick:()=>{m(!u)},"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigButton_${e.fieldName}`}),isOpen:u,closePopover:()=>{m(!1)}},Object(d.jsx)("div",{"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigPopover_${e.fieldName}`},Object(d.jsx)(s.EuiFormRow,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.sortByLabel",defaultMessage:"Sort by"})},Object(d.jsx)(s.EuiRadioGroup,{options:p,idSelected:b?"name":null==a||null===(i=a.sort)||void 0===i?void 0:i.by,onChange:t=>{n(e.fieldType,{sort:{order:a.sort.order,by:t}})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigSortBy_${e.fieldName}`})),Object(d.jsx)(s.EuiFormRow,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.orderLabel",defaultMessage:"Order"})},Object(d.jsx)(s.EuiRadioGroup,{options:j,idSelected:null==a||null===(o=a.sort)||void 0===o?void 0:o.order,onChange:t=>{n(e.fieldType,{sort:{by:a.sort.by,order:t}})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigOrder_${e.fieldName}`})),Object(d.jsx)(s.EuiHorizontalRule,{margin:"s"}),Object(d.jsx)(s.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(d.jsx)(s.EuiFlexItem,{grow:!1},t?Object(d.jsx)(s.EuiSwitch,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.anomalousOnlyLabel",defaultMessage:"Anomalous only"}),checked:a.anomalousOnly,onChange:t=>{const i=t.target.checked;n(e.fieldType,{anomalousOnly:i,sort:{order:a.sort.order,by:a.sort.by}})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigAnomalousOnly_${e.fieldName}`}):Object(d.jsx)(s.EuiSwitch,{label:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.applyTimeRangeLabel",defaultMessage:"Apply time range"}),checked:a.applyTimeRange,onChange:t=>{const a=t.target.checked;n(e.fieldType,{applyTimeRange:a})},compressed:!0,"data-test-subj":`mlSingleMetricViewerEntitySelectionConfigAnomalousOnly_${e.fieldName}`})),Object(d.jsx)(s.EuiFlexItem,{grow:!1,style:{width:"16px"}},!t||null!=a&&a.anomalousOnly?null:Object(d.jsx)(s.EuiToolTip,{position:"top",content:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.nonAnomalousResultsWithModelPlotInfo",defaultMessage:"The list contains values from the model plot results."})},Object(d.jsx)(s.EuiIcon,{tabIndex:0,type:"iInCircle",color:"subdued"})),t||null!=a&&a.applyTimeRange?null:Object(d.jsx)(s.EuiToolTip,{position:"top",content:Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.ignoreTimeRangeInfo",defaultMessage:"The list contains values from all anomalies created during the lifetime of the job."})},Object(d.jsx)(s.EuiIcon,{tabIndex:0,type:"iInCircle",color:"subdued"}))))))},b=c.i18n.translate("xpack.ml.timeSeriesExplorer.emptyPartitionFieldLabel.",{defaultMessage:'"" (empty string)'});class entity_control_EntityControl extends r.Component{constructor(...e){super(...e),i()(this,"inputRef",void 0),i()(this,"state",{selectedOptions:void 0,options:void 0,isLoading:!1,isEntityConfigPopoverOpen:!1}),i()(this,"onChange",(e=>{var t,a,n;const i=e.length>0?e:void 0;this.setState({selectedOptions:i});const o=Array.isArray(i)&&null!==(null===(t=i[0].value)||void 0===t?void 0:t.value)&&null!==(a=null===(n=i[0].value)||void 0===n?void 0:n.value)&&void 0!==a?a:null;this.props.entityFieldValueChanged(this.props.entity,o)})),i()(this,"onManualInput",(e=>{if(!e.trim().toLowerCase())return;const t={label:e,value:{value:e}};this.setState({selectedOptions:[t]}),this.props.entityFieldValueChanged(this.props.entity,e)})),i()(this,"onSearchChange",(e=>{this.setState({isLoading:!0,options:[]}),this.props.onSearchChange(this.props.entity,e)})),i()(this,"renderOption",((e,t)=>{var a;const n=Object(d.jsx)(s.EuiHighlight,{search:t},e.label);return null!==(a=e.value)&&void 0!==a&&a.maxRecordScore?Object(d.jsx)(s.EuiHealth,{color:Object(u.a)(e.value.maxRecordScore)},n):n}))}componentDidUpdate(e){const{entity:t,forceSelection:a,isLoading:n,options:i}=this.props,{options:r,selectedOptions:s}=this.state,{fieldValue:l}=t;let c=s;void 0===s&&null!==l||Array.isArray(s)&&s[0].value!==l&&null!==l?c=[{label:""===l?b:l,value:l}]:Array.isArray(s)&&null===l&&(c=void 0),!0===e.isLoading&&!1===n&&this.setState({isLoading:!1,selectedOptions:c}),Object(o.isEqual)(i,r)||this.setState({options:i}),a&&this.inputRef&&this.inputRef.focus()}render(){const{entity:e,forceSelection:t,isModelPlotEnabled:a,config:n,onConfigChange:i}=this.props,{isLoading:o,options:r,selectedOptions:u}=this.state,b=Object(d.jsx)(s.EuiComboBox,{async:!0,isLoading:o,inputRef:e=>{e&&(this.inputRef=e)},style:{minWidth:"300px"},placeholder:c.i18n.translate("xpack.ml.timeSeriesExplorer.enterValuePlaceholder",{defaultMessage:"Enter value"}),singleSelection:{asPlainText:!0},onCreateOption:this.onManualInput,customOptionText:c.i18n.translate("xpack.ml.timeSeriesExplorer.setManualInputHelperText",{defaultMessage:"No matching values"}),options:r,selectedOptions:u,onChange:this.onChange,onSearchChange:this.onSearchChange,isClearable:!1,renderOption:this.renderOption,"data-test-subj":`mlSingleMetricViewerEntitySelection ${e.fieldName}`,prepend:Object(d.jsx)(m,{entity:e,isModelPlotEnabled:a,config:n,onConfigChange:i})}),p=Object(d.jsx)(l.FormattedMessage,{id:"xpack.ml.timeSeriesExplorer.selectFieldMessage",defaultMessage:"Select {fieldName}",values:{fieldName:e.fieldName}});return Object(d.jsx)(s.EuiFlexItem,{grow:!1},Object(d.jsx)(s.EuiFormRow,{label:e.fieldName,helpText:t?p:null},b))}}},224:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(58),i=a(2),o=n.__importDefault(a(192));t.default=function(e){var t=i.useRef(e);t.current=e,o.default((function(){return function(){return t.current()}}))}},241:function(e,t,a){"use strict";a.d(t,"a",(function(){return C})),a.d(t,"c",(function(){return M})),a.d(t,"b",(function(){return A}));var n=a(2),i=a.n(n),o=a(25),r=a(8),s=a(76),l=a(39),c=a.n(l),u=a(5),d=a(108),m=a(6),b=a(140),p=a(175),j=a(529),g=a(415),f=a(54),v=a(15);const x=({cardinality:e,fromPage:t,perPage:a,onPaginationChange:i})=>{const r=t-1,[s,l]=Object(n.useState)(!1),c=()=>l(!1),d=Object(n.useCallback)((e=>{i({fromPage:e+1})}),[]),b=Object(n.useCallback)((e=>{i({perPage:e})}),[]),p=Math.ceil(e/a),j=[5,10,20,50,100].map((e=>Object(m.jsx)(o.EuiContextMenuItem,{key:`${e}_rows`,icon:e===a?"check":"empty",onClick:()=>{c(),b(e)},"data-test-subj":`${e} rows`},Object(m.jsx)(v.FormattedMessage,{id:"xpack.ml.explorer.swimLaneSelectRowsPerPage",defaultMessage:"{rowsCount} rows",values:{rowsCount:e}}))));return Object(m.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(m.jsx)(o.EuiFlexItem,{grow:!1},Object(m.jsx)(o.EuiPopover,{button:Object(m.jsx)(o.EuiButtonEmpty,{size:"xs",color:"text",iconType:"arrowDown",iconSide:"right",onClick:()=>l((()=>!s)),"data-test-subj":"mlSwimLanePageSizeControl"},Object(m.jsx)("span",{"data-test-subj":a},Object(m.jsx)(v.FormattedMessage,{id:"xpack.ml.explorer.swimLaneRowsPerPage",defaultMessage:"Rows per page: {rowsCount}",values:{rowsCount:a}}))),isOpen:s,closePopover:c,panelPaddingSize:"none"},Object(m.jsx)(o.EuiContextMenuPanel,{items:j,"data-test-subj":"mlSwimLanePageSizePanel"}))),Object(m.jsx)(o.EuiFlexItem,{grow:!1},Object(m.jsx)(o.EuiPagination,{"aria-label":u.i18n.translate("xpack.ml.explorer.swimLanePagination",{defaultMessage:"Anomaly swim lane pagination"}),pageCount:p,activePage:r,onPageClick:d,"data-test-subj":"mlSwimLanePagination"})))};var O=a(132),h=a(135),y=a(286),w=(a(340),a(199)),S=a(49),E=a(10);const C=30;function M(e){return e&&e.hasOwnProperty("cardinality")}var P={name:"bjn8wh",styles:"position:relative"},L={name:"vxhryu",styles:"width:100%;height:100%;overflow:hidden"},I={name:"wo686d",styles:"width:100%;overflow-y:auto;overflow-x:hidden"},T={name:"xbymsc",styles:"position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)"};const A=({id:e,onResize:t,perPage:a,fromPage:l,swimlaneLimit:v,onPaginationChange:M,isLoading:A,noDataWarning:R,filterActive:k,swimlaneData:_,swimlaneType:B,selection:N,onCellsSelection:D,timeBuckets:F,chartsService:W,showTimeline:$=!0,showYAxis:z=!0,showLegend:G=!0,"data-test-subj":V,yAxisWidth:Y,onRenderComplete:H})=>{var q,U,J;const[K,X]=Object(n.useState)(0),{services:{theme:Q}}=Object(E.d)(),Z=Object(f.b)(Q),{euiTheme:ee}=Object(E.a)(),te=Object(n.useRef)(),ae=Object(n.useCallback)(Object(r.throttle)((e=>{const a=e.width-S.a;X(a),t(a)}),500),[K]),ne=Object(n.useMemo)((()=>{const e=!0===k&&B===O.h.OVERALL;if(null==_||!_.points)return[];const t=_.laneLabels;return _.points.map((t=>{const a={...t,time:1e3*t.time,value:0===t.value?null:t.value};return e&&(a.laneLabel=u.i18n.translate("xpack.ml.explorer.overallSwimlaneUnfilteredLabel",{defaultMessage:"{label} (unfiltered)",values:{label:Object(h.f)(t.laneLabel)}})),a})).sort(((e,a)=>{let n=t.indexOf(e.laneLabel),i=t.indexOf(a.laneLabel);return n=n>-1?n:t.length,i=i>-1?i:t.length,n-i}))}),[null==_?void 0:_.points,k,B,null==_?void 0:_.laneLabels]),ie=(null==_||null===(q=_.laneLabels)||void 0===q?void 0:q.length)>0&&ne.length>0,oe=(ie||A)&&void 0!==v&&v>(null!=a?a:5)&&M&&l&&a,re=null!==(U=null==_||null===(J=_.laneLabels)||void 0===J?void 0:J.length)&&void 0!==U?U:0,se=Object(n.useMemo)((()=>A?te.current:re*(C+2)+(G?34:0)+($?24:0)),[A,re]);Object(n.useEffect)((()=>{A||(te.current=se)}),[A,se]);const le=Object(n.useMemo)((()=>{if(N&&_&&(B===N.type&&(void 0===(null==_?void 0:_.fieldName)||_.fieldName===N.viewByFieldName)||!1!==k))return{x:N.times.map((e=>1e3*e)),y:N.lanes}}),[N,_,B]),ce=!!D,ue=Object(n.useMemo)((()=>ie?{background:{color:ee.euiPanelBackgroundColorModifiers.plain},heatmap:{grid:{stroke:{width:1,color:ee.euiBorderColor}},cell:{maxWidth:"fill",maxHeight:"fill",label:{visible:!1},border:{stroke:ee.euiBorderColor,strokeWidth:0}},yAxisLabel:{visible:z,width:Y,textColor:ee.euiTextSubduedColor,padding:S.b,fontSize:parseInt(ee.euiFontSizeXS,10)},xAxisLabel:{visible:$,textColor:ee.euiTextSubduedColor,fontSize:parseInt(ee.euiFontSizeXS,10)},brushMask:{visible:ce,fill:Z?"rgb(30,31,35,80%)":"rgb(247,247,247,50%)"},brushArea:{visible:ce,stroke:Z?"rgb(255, 255, 255)":"rgb(105, 112, 125)"},...G?{maxLegendHeight:34}:{}}}:{}),[ie,B,null==_?void 0:_.fieldName,Z,F,D]),de=Object(n.useRef)(null),me=Object(d.useActiveCursor)(W.activeCursor,de,{isDateHistogram:!0}),be=Object(n.useCallback)((e=>{if(!D)return;const t=e[0][0],a=t.datum.x/1e3,n={lanes:[String(t.datum.y)],times:[a,a+_.interval],type:B,viewByFieldName:_.fieldName};D(n)}),[B,null==_?void 0:_.fieldName,null==_?void 0:_.interval,D]),pe=Object(n.useMemo)((()=>{return{placement:"auto",fallbackPlacements:["left"],boundary:"chart",customTooltip:(e=null==_?void 0:_.fieldName,({values:t})=>{const a=[];if(1===t.length&&e){const[n]=t;a.push({skipHeader:!0}),a.push({label:e,value:n.value,seriesIdentifier:{key:n.value}})}else if(3===t.length){const[n,i,o]=t,r=Object(g.b)(parseInt(n.value,10));a.push({label:r}),void 0!==e&&a.push({label:e,value:i.value,seriesIdentifier:{key:i.value}}),a.push({label:u.i18n.translate("xpack.ml.explorer.swimlane.maxAnomalyScoreLabel",{defaultMessage:"Max anomaly score"}),value:"0"===o.formattedValue?" < 1":o.formattedValue,color:o.color,seriesIdentifier:{key:o.value}})}return Object(m.jsx)(y.a,{tooltipData:a})})};var e}),[null==_?void 0:_.fieldName]),je=Object(n.useMemo)((()=>_?{min:1e3*_.earliest,max:1e3*_.latest,minInterval:1e3*_.interval}:void 0),[_]),ge=e=>{e.cells.length&&ce&&"function"==typeof D&&D({lanes:e.y,times:e.x.map((e=>e/1e3)),type:B,viewByFieldName:_.fieldName})},fe=!A&&!ie&&!!R;return fe&&(null==H||H()),Object(m.jsx)(o.EuiResizeObserver,{onResize:ae},(t=>{var n,r;return Object(m.jsx)(o.EuiFlexGroup,{gutterSize:"none",direction:"column",ref:t,"data-test-subj":V,css:L},Object(m.jsx)(o.EuiFlexItem,{css:I,grow:!1},Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)("div",null,Object(m.jsx)("div",{style:{height:`${se}px`},css:P,hidden:fe},ie&&!A&&Object(m.jsx)(s.Chart,{className:"mlSwimLaneContainer",ref:de},Object(m.jsx)(s.Tooltip,pe),Object(m.jsx)(s.Settings,{theme:ue,baseTheme:s.LEGACY_LIGHT_THEME,onElementClick:be,onPointerUpdate:me,showLegend:G,legendPosition:s.Position.Top,xDomain:je,debugState:null!==(n=window._echDebugStateFlag)&&void 0!==n&&n,onBrushEnd:ge,locale:u.i18n.getLocale(),onRenderChange:e=>{e&&H&&H()}}),Object(m.jsx)(s.Heatmap,{id:e,timeZone:"UTC",colorScale:{type:"bands",bands:[{start:b.a.LOW,end:b.a.WARNING,color:p.a.LOW},{start:b.a.WARNING,end:b.a.MINOR,color:p.a.WARNING},{start:b.a.MINOR,end:b.a.MAJOR,color:p.a.MINOR},{start:b.a.MAJOR,end:b.a.CRITICAL,color:p.a.MAJOR},{start:b.a.CRITICAL,end:1/0,color:p.a.CRITICAL}]},data:ne,xAccessor:"time",yAccessor:"laneLabel",valueAccessor:"value",highlightedData:le,valueFormatter:j.a,xScale:{type:s.ScaleType.Time,interval:{type:"fixed",unit:"ms",value:null!==(r=null==je?void 0:je.minInterval)&&void 0!==r?r:6e4}},ySortPredicate:"dataIndex",yAxisLabelFormatter:e=>""===e?w.a:String(e),xAxisLabelFormatter:e=>{F.setInterval(`${_.interval}s`);const t=F.getScaledDateFormat();return c()(e).format(t)}})),A&&Object(m.jsx)(o.EuiText,{textAlign:"center",css:T},Object(m.jsx)(o.EuiLoadingChart,{size:"xl",mono:!0,"data-test-subj":"mlSwimLaneLoadingIndicator"}))),fe?Object(m.jsx)(i.a.Fragment,null,R):null))),oe&&Object(m.jsx)(o.EuiFlexItem,{grow:!1},Object(m.jsx)(x,{cardinality:v,fromPage:l,perPage:a,onPaginationChange:M})))}))}},248:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n="YYYY-MM-DD HH:mm:ss"},270:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a(26),a(7);var n=a(2),i=a(21);const o=(e,t,a,o)=>{const r=Object(n.useMemo)((()=>{const e={type:"visualization",name:a,id:o};return{...t,child:e}}),[a,o,t]);Object(i.useExecutionContext)(e,r)}},335:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(140),i=a(175);function o(e){return e>=n.a.CRITICAL?i.a.CRITICAL:e>=n.a.MAJOR?i.a.MAJOR:e>=n.a.MINOR?i.a.MINOR:e>=n.a.WARNING?i.a.WARNING:e>=n.a.LOW?i.a.LOW:i.a.BLANK}},340:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(341);case"v8light":return a(343)}},341:function(e,t,a){var n=a(126),i=a(342);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},342:function(e,t,a){(t=a(127)(!1)).push([e.i,".mlSwimLaneContainer .echLegendListContainer{height:34px!important}.mlSwimLaneContainer .echLegendList{display:flex!important;flex-wrap:nowrap;justify-content:space-between!important;position:absolute;right:0}",""]),e.exports=t},343:function(e,t,a){var n=a(126),i=a(344);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},344:function(e,t,a){(t=a(127)(!1)).push([e.i,".mlSwimLaneContainer .echLegendListContainer{height:34px!important}.mlSwimLaneContainer .echLegendList{display:flex!important;flex-wrap:nowrap;justify-content:space-between!important;position:absolute;right:0}",""]),e.exports=t},353:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(2),i=a(86),o=a(318);const r=e=>Object(n.useMemo)((()=>new o.a({[i.UI_SETTINGS.HISTOGRAM_MAX_BARS]:e.get(i.UI_SETTINGS.HISTOGRAM_MAX_BARS),[i.UI_SETTINGS.HISTOGRAM_BAR_TARGET]:e.get(i.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:e.get("dateFormat"),"dateFormat:scaled":e.get("dateFormat:scaled")})),[e])},379:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a(4);var n=a(93),i=a(7);const o=(e,t,a)=>{const n=new i.BehaviorSubject(void 0);return a.add(t.jobIds.pipe(Object(i.switchMap)((t=>e.anomalyDetectorService.getJobs$(t))),Object(i.map)((e=>[...new Set(e.map((e=>e.datafeed_config.indices)).flat())])),Object(i.switchMap)((t=>Object(i.forkJoin)(t.map((t=>Object(i.from)(e.dataViewsService.find(`"${t}"`).then((e=>e.find((e=>e.getIndexPattern().toLowerCase().includes(t.toLowerCase()))))))))))),Object(i.map)((e=>e.flat().filter((e=>void 0!==e))))).subscribe(n)),n};n.Embeddable},380:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(8),i=a(7),o=a(40);function r(e,t,a){return e.pipe(Object(i.distinctUntilChanged)(n.isEqual),Object(i.switchMap)((e=>t.getJobs$(e).pipe(Object(i.catchError)((e=>{var t;return a(null!==(t=e.body)&&void 0!==t?t:e),i.EMPTY}))))),Object(i.map)((e=>e.map((e=>{var t;const a=Object(o.a)(e.analysis_config.bucket_span);return{id:e.job_id,selected:!0,bucketSpanSeconds:a.asSeconds(),modelPlotEnabled:!0===(null===(t=e.model_plot_config)||void 0===t?void 0:t.enabled)}})))))}},381:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(75),i=a(82),o=a(67);function r(e,t,a){const r=null!=e?e:[],s=null!=t?t:Object(i.getDefaultQuery)();let l={};Object(n.isOfAggregateQueryType)(s)||(l="kuery"===s.language?Object(n.toElasticsearchQuery)(Object(n.fromKueryExpression)(s.query)):Object(n.luceneStringToDsl)(s.query));const c=Object(o.a)(l)?[l]:[],u=[];for(const e of r){if(e.meta.disabled||void 0!==a&&e.meta.controlledBy===a)continue;const{meta:{negate:t,type:n,key:i}}=e;let o=e.query;void 0===o&&"exists"===n&&(o={exists:{field:i}}),o&&(t?u.push(o):c.push(o))}return{bool:{must:c,must_not:u}}}},415:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return d}));var n=a(47),i=a.n(n),o=a(25),r=a(248);function s(e){return Object(o.formatDate)(e,"MMMM Do YYYY")}function l(e){return Object(o.formatDate)(e,"MMMM Do YYYY, HH:mm")}function c(e){return Object(o.formatDate)(e,"MMMM Do YYYY, HH:mm:ss")}function u(e){if(!e)return!1;const t=i.a.parse(e.from),a=i.a.parse(e.to);return!!(t&&t.isValid()&&a&&a.isValid())}const d=e=>Object(o.formatDate)(e,r.a)},881:function(e,t,a){"use strict";a.r(t),a.d(t,"getAnomalySwimLaneEmbeddableFactory",(function(){return T}));var n=a(25),i=a(6),o=a(5),r=a(15),s=a(21),l=a(353),c=a(136),u=a(143),d=a(2),m=a(224),b=a.n(m),p=a(7),j=a(161),g=a(49),f=a(241),v=a(12),x=a(389),O=a(379),h=a(270),y=a(206),w=a.n(y),S=a(132),E=a(53),C=a(380),M=a(381),P={name:"hdjpxu",styles:"width:100%;padding:8px"},L={name:"1d3w5wq",styles:"width:100%"},I={name:"1hcx8jb",styles:"padding:0"};const T=e=>{const t={type:j.c,deserializeState:e=>e.rawState,buildEmbeddable:async(t,m,y,T)=>{var A,R;if(!Object(c.a)(T))throw new Error("Parent API does not have execution context");const k=await(async e=>{const[[t,n],{AnomalyDetectorService:i},{AnomalyTimelineService:o},{mlApiServicesProvider:r},{mlResultsServiceProvider:s}]=await Promise.all([e(),a.e(24).then(a.bind(null,111)),a.e(103).then(a.bind(null,284)),Promise.resolve().then(a.bind(null,11)),Promise.all([a.e(0),a.e(3)]).then(a.bind(null,80))]),l=new v.a(t.http);return[t,n,{anomalyDetectorService:new i(l),anomalyTimelineService:new o(n.data.query.timefilter.timefilter,t.uiSettings,s(r(l)))}]})(e),[_,B,N]=k,D=new p.Subscription,F=new p.BehaviorSubject(void 0),W=new p.BehaviorSubject(!0),$=new p.BehaviorSubject(void 0),z=null!==(A=t.query?new p.BehaviorSubject(t.query):null==T?void 0:T.query$)&&void 0!==A?A:new p.BehaviorSubject(void 0),G=null!==(R=t.query?new p.BehaviorSubject(t.filters):null==T?void 0:T.filters$)&&void 0!==R?R:new p.BehaviorSubject(void 0),V=new p.BehaviorSubject(void 0),{titlesApi:Y,titleComparators:H,serializeTitles:q}=Object(c.j)(t),{api:U,comparators:J,serialize:K}=Object(c.i)(t),{swimLaneControlsApi:X,serializeSwimLaneState:Q,swimLaneComparators:Z,onSwimLaneDestroy:ee}=((e,t)=>{var a;const n=new p.BehaviorSubject(e.jobIds),i=new p.BehaviorSubject(e.swimlaneType),o=new p.BehaviorSubject(e.viewBy),r=new p.BehaviorSubject(1),s=new p.BehaviorSubject(null!==(a=e.perPage)&&void 0!==a?a:S.i),l=e=>{r.next(e.fromPage),e.perPage&&s.next(e.perPage)},c=Object(p.combineLatest)([n,i,o]).subscribe((()=>{l({fromPage:1})})),u={jobIds:[n,e=>n.next(e),w.a],swimlaneType:[i,e=>i.next(e)],viewBy:[o,e=>o.next(e)],perPage:[s,e=>s.next(e)]};return{swimLaneControlsApi:{jobIds:n,swimlaneType:i,viewBy:o,fromPage:r,perPage:s,updateUserInput:e=>{n.next(e.jobIds),i.next(e.swimlaneType),o.next(e.viewBy),t.setPanelTitle(e.panelTitle)},updatePagination:l},serializeSwimLaneState:()=>({jobIds:n.value,swimlaneType:i.value,viewBy:o.value,perPage:s.value}),swimLaneComparators:u,onSwimLaneDestroy:()=>{c.unsubscribe(),n.complete(),i.complete(),o.complete(),r.complete(),s.complete()}}})(t,Y),te=new p.BehaviorSubject(void 0),ae=m({isEditingEnabled:()=>!0,getTypeDisplayName:()=>o.i18n.translate("xpack.ml.swimlaneEmbeddable.typeDisplayName",{defaultMessage:"swim lane"}),onEdit:async()=>{try{const{resolveAnomalySwimlaneUserInput:e}=await Promise.all([a.e(0),a.e(61)]).then(a.bind(null,816)),t=await e({..._,...B},T,y,{...q(),...Q()});X.updateUserInput(t)}catch(e){return Promise.reject()}},...Y,...U,...X,query$:z,filters$:G,interval:F,setInterval:e=>F.next(e),dataViews:Object(O.a)({anomalyDetectorService:k[2].anomalyDetectorService,dataViewsService:k[1].data.dataViews},{jobIds:X.jobIds},D),dataLoading:W,serializeState:()=>({rawState:{timeRange:void 0,...q(),...K(),...Q()},references:[]})},{...J,...H,...Z}),ne=Object(p.combineLatest)([ae.timeRange$,Object(c.b)(ae)&&Object(c.f)(ae.parentApi)?ae.parentApi.timeRange$:Object(p.of)(null),Object(c.b)(ae)&&Object(c.f)(ae.parentApi)?ae.parentApi.timeslice$:Object(p.of)(null)]).pipe(Object(p.map)((([e,t,a])=>e||t||(a?t:void 0)))),{swimLaneData$:ie,onDestroy:oe}=((e,t,a,n,i,o,r,s,l)=>{const{anomalyTimelineService:c,anomalyDetectorService:u}=l,d=new p.BehaviorSubject(void 0),m=Object(C.a)(e.jobIds,u,(e=>{n.next(e)})).pipe(Object(p.shareReplay)(1)),b=Object(p.combineLatest)({jobIds:e.jobIds,swimlaneType:e.swimlaneType,viewBy:e.viewBy,perPage:e.perPage,fromPage:e.fromPage}),j=Object(p.combineLatest)([m,t,i]).pipe(Object(p.skipWhile)((([e,t])=>!Array.isArray(e)||!t)),Object(p.tap)((([,,e])=>{c.setTimeRange(e)})),Object(p.map)((([e,t])=>c.getSwimlaneBucketInterval(e,t)))),g=Object(p.combineLatest)([m,b,o,r,j,s.pipe(Object(p.startWith)(null))]).pipe(Object(p.tap)((()=>{a.next(!0)})),Object(p.debounceTime)(500),Object(p.switchMap)((([e,t,a,i,o])=>{if(!e)return Object(p.of)(void 0);const{viewBy:r,swimlaneType:s,perPage:l,fromPage:u}=t;let m;try{(i||a)&&(m=Object(M.a)(i,a,E.b))}catch(e){return n.next(e),p.EMPTY}return Object(p.from)(c.loadOverallData(e,void 0,o)).pipe(Object(p.switchMap)((t=>{const{earliest:a,latest:n}=t;if(t&&s===S.h.VIEW_BY){const t=d.value;let i=S.a;return Object(f.c)(t)&&r===t.fieldName&&(i=t.cardinality),Object(p.from)(c.loadViewBySwimlane([],{earliest:a,latest:n},e,r,i,l,u,void 0,m,o)).pipe(Object(p.map)((e=>({...e,earliest:a,latest:n}))))}return Object(p.of)(t)})),Object(p.catchError)((e=>(n.next(e),p.EMPTY))))}))).subscribe((t=>{e.setInterval(null==t?void 0:t.interval),a.next(!1),n.next(void 0),d.next(t)}));return{swimLaneData$:d,onDestroy:()=>{g.unsubscribe()}}})(ae,te.asObservable(),W,$,ne,z,G,V,N),re=()=>{};return{api:ae,Component:()=>{const{uiSettings:e}=_,{uiActions:t}=B,a=Object(l.a)(e);if(!Object(c.a)(T))throw new Error("Parent API does not have execution context");Object(h.a)(k[0].executionContext,T.executionContext,j.c,y),b()((()=>{ee(),oe(),D.unsubscribe()}));const[o,m,p,v,O]=Object(c.k)(ae.fromPage,ae.perPage,ae.swimlaneType,ie,$),[w,S]=Object(d.useState)(),E=Object(d.useCallback)((e=>{S(e),e&&t.getTrigger(x.a).exec({embeddable:ae,data:e,updateCallback:S.bind(null,void 0)})}),[v,m,S]);return O?Object(i.jsx)(n.EuiCallOut,{title:Object(i.jsx)(r.FormattedMessage,{id:"xpack.ml.swimlaneEmbeddable.errorMessage",defaultMessage:"Unable to load the data for the swim lane"}),color:"danger",iconType:"warning",css:L},Object(i.jsx)("p",null,O.message)):Object(i.jsx)(u.a,_,Object(i.jsx)(s.KibanaContextProvider,{services:{..._}},Object(i.jsx)("div",{css:P,"data-test-subj":"mlAnomalySwimlaneEmbeddableWrapper","data-shared-item":""},Object(i.jsx)(f.b,{id:y,"data-test-subj":`mlSwimLaneEmbeddable_${y}`,timeBuckets:a,swimlaneData:v,swimlaneType:p,fromPage:o,perPage:m,swimlaneLimit:Object(f.c)(v)?v.cardinality:void 0,onResize:e=>te.next(e),selection:w,onCellsSelection:E,onPaginationChange:e=>{e.fromPage&&ae.updatePagination({fromPage:e.fromPage}),e.perPage&&ae.updatePagination({perPage:e.perPage,fromPage:1})},isLoading:W.value,yAxisWidth:{max:g.c},noDataWarning:Object(i.jsx)(n.EuiEmptyPrompt,{titleSize:"xxs",css:I,title:Object(i.jsx)("h2",null,Object(i.jsx)(r.FormattedMessage,{id:"xpack.ml.swimlaneEmbeddable.noDataFound",defaultMessage:"No anomalies found"}))}),chartsService:B.charts,onRenderComplete:re}))))}}}};return t}}}]);