/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[41,37,38,77,80],{120:function(e,t,n){e.exports=n(57)(4)},122:function(e,t,n){"use strict";var a=n(158);n.d(t,"a",(function(){return a.a})),n.d(t,"c",(function(){return a.b}));var i=n(205);n.d(t,"b",(function(){return i.a})),n.d(t,"d",(function(){return i.b}))},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(120),i=n.n(a),s=n(2),r=n(88),o=n(149),c=n(26),l=n.n(c),u=n(84),d=n.n(u),b=n(25);const m="eui-global",f="eui-utilities",p={darkMode:!1};var g=n(6);const j=[b.euiStylisPrefixer],O=d()({key:"css",stylisPlugins:j,container:document.querySelector('meta[name="emotion"]')}),h=d()({key:m,stylisPlugins:j,container:document.querySelector(`meta[name="${m}"]`)}),v=d()({key:f,stylisPlugins:j,container:document.querySelector(`meta[name="${f}"]`)});O.compat=!0,h.compat=!0,v.compat=!0;const y={default:O,global:h,utility:v},x=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:a,children:i})=>{const r=l()(e,p),o=Object(s.useMemo)((()=>(e=>e.darkMode?b.COLOR_MODES_STANDARD.dark:b.COLOR_MODES_STANDARD.light)(r)),[r]),c=n||o,u=!1!==t&&void 0;return Object(g.jsx)(b.EuiProvider,{cache:y,modify:a,colorMode:c,globalStyles:u,utilityClasses:u},i)},_=({children:e,i18n:t,...n})=>Object(r.useIsNestedEuiProvider)()?(Object(o.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(g.jsx)(t.Context,null,e)):Object(g.jsx)(x,n,Object(g.jsx)(t.Context,null,e));var S=n(89);const T=({children:e,...t})=>Object(g.jsx)(_,i()({globalStyles:!1},t),Object(g.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(g.jsx)(S.KibanaErrorBoundary,null,e)))},147:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return g}));var a=n(8),i=n(31),s=n.n(i),r=n(75),o=n(82),c=n(247),l=n(166);const u={bool:{must:[{match_all:{}}]}},d={query:"",language:"lucene"};function b(){return Object(a.cloneDeep)(u)}function m(){return Object(a.cloneDeep)(d)}function f(e,t,n){return null===n?{query:m(),combinedQuery:b()}:p(Object(l.c)(n),t,e)}function p(e,t,n){let a=m(),i=b();a=e.query;const s=e.filter,l=Array.isArray(s)?s:[];if(a.language===c.a.KUERY){const e=Object(r.fromKueryExpression)(a.query);""!==a.query&&(i=Object(r.toElasticsearchQuery)(e,t));const n=Object(r.buildQueryFromFilters)(l,t);void 0===i.bool&&(i.bool={},void 0!==i.multi_match&&(i.bool.should={multi_match:i.multi_match},delete i.multi_match)),!1===Array.isArray(i.bool.filter)&&(i.bool.filter=void 0===i.bool.filter?[]:[i.bool.filter]),!1===Array.isArray(i.bool.must_not)&&(i.bool.must_not=void 0===i.bool.must_not?[]:[i.bool.must_not]),i.bool.filter=[...i.bool.filter,...n.filter],i.bool.must_not=[...i.bool.must_not,...n.must_not]}else{const e=Object(o.getEsQueryConfig)(n);i=Object(r.buildEsQuery)(t,[a],l,e)}return{query:a,combinedQuery:i}}function g(e,t){try{return s.a.decode(e)}catch(e){return t}}},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var a=void 0;t.setEuiDevProviderWarning=function(e){return a=e},t.getEuiDevProviderWarning=function(){return a},t.emitEuiProviderWarning=function(e){if("function"==typeof a)return a(e);switch(a){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(33),i=n(203);const s=[a.euiDarkVars.euiColorVis0,a.euiDarkVars.euiColorVis1,a.euiDarkVars.euiColorVis2,a.euiDarkVars.euiColorVis3,a.euiDarkVars.euiColorVis4,a.euiDarkVars.euiColorVis5,a.euiDarkVars.euiColorVis6,a.euiDarkVars.euiColorVis7,a.euiDarkVars.euiColorVis8,a.euiDarkVars.euiColorVis9,a.euiDarkVars.euiColorDarkShade,a.euiDarkVars.euiColorPrimary],r={};function o(e){if(void 0===r[e]){const t=Object(i.a)(e),n=s[t%s.length];return r[e]=n,n}return r[e]}},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),i=n(79),s=n.n(i),r=n(143),o=n(6);const c=(e,t)=>n=>(s.a.render(Object(o.jsx)(r.a,t,e),n),()=>s.a.unmountComponentAtNode(n));n(4),n(5),a.Component},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}));let a=null;function i(e){return a=e,a}function s(){return null!==a&&a.hasLicenseExpired()}function r(){return null!==a&&a.isFullLicense()}},158:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return g}));var a=n(2),i=n.n(a),s=n(15),r=n(22),o=n(19),c=n(5),l=n(25),u=n(166),d=n(10),b=n(147),m=n(6);const f=i.a.createContext({}),p=({children:e})=>{const[t,n]=Object(a.useState)(),[i,p]=Object(a.useState)(),g=Object(r.useLocation)(),{services:{data:{dataViews:j},savedSearch:O,uiSettings:h}}=Object(d.d)(),{index:v,savedSearchId:y}=Object(o.parse)(g.search,{sort:!1}),x=Object(a.useCallback)((e=>Object(u.b)({savedSearchService:O,dataViewsService:j})(e)),[O,j]),_=Object(a.useCallback)((async()=>{if(""===v)throw new Error(c.i18n.translate("xpack.ml.useResolver.errorIndexPatternIdEmptyString",{defaultMessage:"dataViewId must not be empty string."}));let e={savedSearch:null,dataView:null};void 0!==y?e=await x(y):void 0!==v&&(e.dataView=await j.get(v));const{savedSearch:t,dataView:n}=e,{combinedQuery:a}=Object(b.b)(h,null!==n?n:void 0,t);return{combinedQuery:a,selectedDataView:n,selectedSavedSearch:t}}),[v,y,h,j,x]);return Object(a.useEffect)((()=>{_().then((e=>{n(e)})).catch((e=>{p(e)}))}),[_]),t||i?i?Object(m.jsx)(l.EuiEmptyPrompt,{iconType:"error",color:"danger",title:Object(m.jsx)("h2",null,Object(m.jsx)(s.FormattedMessage,{id:"xpack.ml.dataSourceContext.errorTitle",defaultMessage:"Unable to fetch data view or saved search"})),body:Object(m.jsx)("p",null,i.message)}):Object(m.jsx)(f.Provider,{value:t},e):null},g=()=>Object(a.useContext)(f)},159:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d}));var a=n(131),i=n(519),s=n(830);const r=[a.a.TEXT,a.a.KEYWORD,a.a.IP,a.a.VERSION];function o(e,t,n){const r=function(e){return e.filter((e=>e.type===a.a.KEYWORD||e.type===a.a.VERSION))}(e),o=function(e){return e.filter((e=>e.type===a.a.TEXT))}(e),u=function(e){return e.filter((e=>e.type===a.a.LONG||e.type===a.a.UNSIGNED_LONG||e.type===a.a.INTEGER||e.type===a.a.SHORT||e.type===a.a.BYTE||e.type===a.a.DOUBLE||e.type===a.a.FLOAT||e.type===a.a.HALF_FLOAT||e.type===a.a.SCALED_FLOAT))}(e),d=function(e){return e.filter((e=>e.type===a.a.IP))}(e),b=l(e),m=Object.keys(n).length>0,f=function(e,t){return function(n,a){(!1===e||t[n.id]&&t[n.id].find((e=>e.agg===a.dslName)))&&(void 0!==n.aggs&&n.aggs.push(a),void 0!==a.fields&&a.fields.push(n))}}(m,n);return t.forEach((e=>{if(e.type===i.b&&void 0!==e.fields)switch(e.id){case s.b.LAT_LONG:b.forEach((t=>f(t,e)));break;case s.b.INFO_CONTENT:case s.b.HIGH_INFO_CONTENT:case s.b.LOW_INFO_CONTENT:o.forEach((t=>f(t,e)));case s.b.DISTINCT_COUNT:case s.b.HIGH_DISTINCT_COUNT:case s.b.LOW_DISTINCT_COUNT:r.forEach((t=>f(t,e))),d.forEach((t=>f(t,e)));default:u.forEach((t=>{t.aggregatable&&f(t,e)}))}})),{aggs:t,fields:m?c(e):e}}function c(e){return e.filter((e=>e.aggs&&(e.aggs.length>0||0===e.aggs.length&&e.type===a.a.DATE)))}function l(e){return e.filter((e=>e.type===a.a.GEO_POINT||e.type===a.a.GEO_SHAPE))}function u(e){if(0===e.length)return e;let t;return e[0].id===i.a&&([t]=e.splice(0,1)),e.sort(((e,t)=>e.name.localeCompare(t.name))),void 0!==t&&e.splice(0,0,t),e}function d(e,t=!0){return e.filter((e=>r.includes(e.type)===t))}},166:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return r}));const a=e=>async t=>{var n,a;const i={savedSearch:null,dataView:null};if(void 0===t)return i;const s=await e.savedSearchService.get(t);if(null===s)return i;const r=null===(n=s.references)||void 0===n||null===(a=n.find((e=>"index-pattern"===e.type)))||void 0===a?void 0:a.id;return i.dataView=await e.dataViewsService.get(r),i.savedSearch=s,i};function i(e){return{query:e.searchSource.getField("query"),filter:e.searchSource.getField("filter")}}function s(e){return e.includes(":")}function r(e){const t={message:null,errorMessage:null};for(const i of e.fields){var n,a;"message"===i.name&&null!==(n=i.toSpec().esTypes)&&void 0!==n&&n.includes("text")?t.message=i:"error.message"===i.name&&null!==(a=i.toSpec().esTypes)&&void 0!==a&&a.includes("text")&&(t.errorMessage=i)}return null!==t.message?{dataView:e,field:t.message}:null!==t.errorMessage?{dataView:e,field:t.errorMessage}:null}},172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(58),i=n(2),s=a.__importDefault(n(223));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var a=s.default(e,t),r=a[0],o=a[1],c=a[2];return i.useEffect(c,n),[r,o]}},203:function(e,t,n){"use strict";function a(e){let t=0,n=0;if(0===e.length)return t;for(let a=0;a<e.length;a++)n=e.charCodeAt(a),t=(t<<5)-t+n,t|=0;return t<0?-2*t:t}n.d(t,"a",(function(){return a}))},204:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return b}));var a=n(218);const i=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===a.b.OUTLIER_DETECTION},s=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===a.b.REGRESSION},r=e=>{if("object"!=typeof e||null===e)return!1;const t=Object.keys(e);return 1===t.length&&t[0]===a.b.CLASSIFICATION},o=e=>{let t="";return s(e)&&(t=e.regression.dependent_variable),r(e)&&(t=e.classification.dependent_variable),t},c=e=>{let t;return s(e)&&void 0!==e.regression.prediction_field_name?t=e.regression.prediction_field_name:r(e)&&void 0!==e.classification.prediction_field_name&&(t=e.classification.prediction_field_name),t},l=e=>`${o(e)}_prediction`,u=(e,t,n)=>`${e}.${c(t)||l(t)}`,d=e=>{const t=Object.keys(e||{});return 1===t.length?t[0]:"unknown"},b=e=>{let t;return s(e)&&(t=e.regression.training_percent),r(e)&&(t=e.classification.training_percent),t}},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(2),i=n(6);const s=Object(a.createContext)({showContextualInsights:!0,showNodeInfo:!0,showMLNavMenu:!0,showLicenseInfo:!0,isADEnabled:!0,isDFAEnabled:!0,isNLPEnabled:!0,showRuleFormV2:!0}),r=({children:e,isServerless:t,showMLNavMenu:n=!0,mlFeatures:a,experimentalFeatures:r})=>{var o;const c={showContextualInsights:t,showNodeInfo:!t,showMLNavMenu:n,showLicenseInfo:!t,isADEnabled:a.ad,isDFAEnabled:a.dfa,isNLPEnabled:a.nlp,showRuleFormV2:null!==(o=null==r?void 0:r.ruleFormV2)&&void 0!==o&&o};return Object(i.jsx)(s.Provider,{value:c},e)};function o(){const e=Object(a.useContext)(s);return Object(a.useMemo)((()=>e),[e])}},215:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(131),i=n(100),s=n(204),r=n(218),o=n(518),c=n(414),l=n(282),u=n(11);class new_job_capabilities_service_analytics_NewJobCapsServiceAnalytics extends l.a{async initializeFromDataVIew(e){try{const t=function(e,t){const n=e[t],i=[],s={};return void 0!==n&&(n.fields.forEach((e=>{e.type===a.a.NESTED&&void 0===s[e.name]&&(s[e.name]=!0,i.push(e))})),Object.keys(s).length>0?n.fields.forEach((e=>{if(e.type!==a.a.NESTED){const t=e.name.split(".").shift();t&&void 0===s[t]&&i.push(e)}})):i.push(...n.fields)),i}(await u.ml.dataFrameAnalytics.newJobCapsAnalytics(e.getIndexPattern(),e.type===i.DataViewType.ROLLUP),e.getIndexPattern()),{fieldsPreferringKeyword:n}=Object(l.b)(t);this._fields=n,this.removeCounterFields()}catch(e){console.error("Unable to load analytics index fields",e)}}isKeywordAndTextType(e){var t;const n=null===(t=this.fields.find((t=>t.name===e)))||void 0===t?void 0:t.type;let i=!1;if(void 0!==n&&n===a.a.KEYWORD){const t=this.getFieldById(e.replace(/\.keyword$/,""));i=null!==t&&t.type===a.a.TEXT}else if(void 0!==n&&n===a.a.TEXT){const t=this.getFieldById(`${e}.keyword`);i=null!==t&&t.type===a.a.KEYWORD}return i}getDefaultFields(e,t){let n=[...this.fields];if(0===n.length)return{selectedFields:[],docFields:[]};const i=e.dest.results_field,l=[];let u,d;if(Object(s.h)(e.analysis)&&(n=e.analysis.outlier_detection.compute_feature_influence?n.filter((e=>!e.name.includes(`${i}.${r.f}.`))):n.filter((e=>!e.name.includes(`${i}.${r.f}`))),!0===t&&l.push({id:`${i}.${r.j}`,name:`${i}.${r.j}`,type:a.b.NUMBER})),Object(s.g)(e.analysis)||Object(s.i)(e.analysis)){var b;const c=Object(s.c)(e.analysis);u=null===(b=this.getFieldById(c))||void 0===b?void 0:b.type;const m=Object(s.e)(e.analysis),f=Object(o.a)(e.analysis),p=(e=>{let t;return Object(s.g)(e)&&void 0!==e.classification.num_top_classes&&(t=e.classification.num_top_classes),t})(e.analysis);d=`${i}.${m||`${c}_prediction`}`,n=0===(null!=f?f:0)?this.fields.filter((e=>!e.name.includes(`${i}.${r.e}`))):n.filter((e=>!e.name.includes(`${i}.${r.e}.`))),n=0===(null!=p?p:0)?n.filter((e=>!e.name.includes(`${i}.${r.k}`))):n.filter((e=>!e.name.includes(`${i}.${r.k}.`))),!0===t&&l.push({id:`${i}.is_training`,name:`${i}.is_training`,type:a.a.BOOLEAN},{id:d,name:d,type:u})}l.push(...n),l.sort((({name:t},{name:n})=>Object(c.f)(t,n,e)));let m=l.filter((e=>e.name===d||!e.name.includes(".keyword")));return m.length>c.b&&(m=m.slice(0,c.b)),{selectedFields:m,docFields:l,depVarType:u}}}const d=new new_job_capabilities_service_analytics_NewJobCapsServiceAnalytics},218:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"k",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return b})),n.d(t,"h",(function(){return m})),n.d(t,"m",(function(){return f})),n.d(t,"l",(function(){return p}));const a={OUTLIER_DETECTION:"outlier_detection",REGRESSION:"regression",CLASSIFICATION:"classification"},i={ANALYZING:"analyzing",FAILED:"failed",REINDEXING:"reindexing",STARTED:"started",STARTING:"starting",STOPPED:"stopped"},s="ml",r={ANALYTICS:"analytics",ANALYTICS_JOB_MISSING:"analytics-job-missing",TRANSFORM:"transform",INDEX:"index",TRAINED_MODEL:"trainedModel",INGEST_PIPELINE:"ingestPipeline"},o="feature_importance",c="feature_influence",l="top_classes",u="outlier_score";let d=function(e){return e.ALPHA="alpha",e.ETA="eta",e.ETA_GROWTH_RATE_PER_TREE="eta_growth_rate_per_tree",e.DOWNSAMPLE_FACTOR="downsample_factor",e.FEATURE_BAG_FRACTION="feature_bag_fraction",e.FEATURE_INFLUENCE_THRESHOLD="feature_influence_threshold",e.GAMMA="gamma",e.LAMBDA="lambda",e.MAX_TREES="max_trees",e.MAX_OPTIMIZATION_ROUNDS_PER_HYPERPARAMETER="max_optimization_rounds_per_hyperparameter",e.METHOD="method",e.N_NEIGHBORS="n_neighbors",e.NUM_TOP_CLASSES="num_top_classes",e.NUM_TOP_FEATURE_IMPORTANCE_VALUES="num_top_feature_importance_values",e.OUTLIER_FRACTION="outlier_fraction",e.RANDOMIZE_SEED="randomize_seed",e.SOFT_TREE_DEPTH_LIMIT="soft_tree_depth_limit",e.SOFT_TREE_DEPTH_TOLERANCE="soft_tree_depth_tolerance",e}({}),b=function(e){return e.LOF="lof",e.LDOF="ldof",e.DISTANCE_KTH_NN="distance_kth_nn",e.DISTANCE_KNN="distance_knn",e}({});const m=0,f=1,p=100},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.default=function(e,t){void 0===t&&(t=0);var n=a.useRef(!1),i=a.useRef(),s=a.useRef(e),r=a.useCallback((function(){return n.current}),[]),o=a.useCallback((function(){n.current=!1,i.current&&clearTimeout(i.current),i.current=setTimeout((function(){n.current=!0,s.current()}),t)}),[t]),c=a.useCallback((function(){n.current=null,i.current&&clearTimeout(i.current)}),[]);return a.useEffect((function(){s.current=e}),[e]),a.useEffect((function(){return o(),c}),[t]),[r,c,o]}},228:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(35),i=n(70),s=n(85),r=n(12),o=n(11),c=n(103),l=n(0);function u(e){if(void 0===e){const e=(e,t)=>{};return{click:e,count:e}}return{click:(t,n)=>e.reportUiCounter(l.g,c.METRIC_TYPE.CLICK,t,n),count:(t,n)=>e.reportUiCounter(l.g,c.METRIC_TYPE.COUNT,t,n)}}var d=n(77);function b(e,t,n){const c=new r.a(e),l=Object(o.mlApiServicesProvider)(c),b=Object(d.indexServiceFactory)(t);return{httpService:c,mlApiServices:l,mlFieldFormatService:Object(s.fieldFormatServiceFactory)(l,b),mlUsageCollection:u(n),mlCapabilities:new i.MlCapabilitiesService(l),mlLicense:new a.a}}},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n(2);var a=n(25),i=n(150),s=n(6);const r=({name:e})=>Object(s.jsx)(a.EuiBadge,{key:`${e}-id`,"data-test-subj":"mlJobGroup",color:Object(i.a)(e)},e)},247:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={KUERY:"kuery",LUCENE:"lucene"}},257:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return d}));var a=n(2),i=n.n(a),s=n(26),r=n.n(s),o=n(6);const c=i.a.createContext(null),l=({children:e,...t})=>{const{navigateToUrl:n,currentAppId:a}=t;return Object(o.jsx)(c.Provider,{value:{navigateToUrl:n,currentAppId:a}},e)},u=({children:e,coreStart:t})=>{const{navigateToUrl:n,currentAppId$:a}=t.application,i=r()(a,void 0);return Object(o.jsx)(c.Provider,{value:{navigateToUrl:n,currentAppId:i}},e)};function d(){const e=Object(a.useContext)(c);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}},282:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return NewJobCapabilitiesServiceBase}));var a=n(4),i=n.n(a),s=n(131);function r(e){const t=e.filter((e=>e.type===s.a.KEYWORD)).map((e=>e.id)),n=e.filter((e=>e.type===s.a.TEXT)).map((e=>e.id));return{fieldsPreferringKeyword:e.filter((e=>e.type!==s.a.TEXT||e.type===s.a.TEXT&&!1===t.includes(`${e.id}.keyword`))),fieldsPreferringText:e.filter((e=>e.type!==s.a.KEYWORD||e.type===s.a.KEYWORD&&!1===n.includes(e.id.replace(/\.keyword$/,""))))}}class NewJobCapabilitiesServiceBase{constructor(){i()(this,"_fields",void 0),i()(this,"_aggs",void 0),this._fields=[],this._aggs=[]}get fields(){return this._fields}get aggs(){return this._aggs}get newJobCaps(){return{fields:this._fields,aggs:this._aggs}}getFieldById(e){const t=this._fields.find((t=>t.id===e));return void 0===t?null:t}getAggById(e){const t=this._aggs.find((t=>t.id===e));return void 0===t?null:t}removeCounterFields(){this._fields=this._fields.filter((e=>!1===e.counter))}}},334:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(86),i=n(37);function s(e){return(Object(i.a)(e,["type"])&&1===Object.keys(e).length||Object(i.a)(e,["type","script"])&&("string"==typeof e.script||Object(i.a)(e.script,["source"])&&"string"==typeof e.script.source||Object(i.a)(e.script,["id"])&&"string"==typeof e.script.id))&&a.RUNTIME_FIELD_TYPES.includes(e.type)}},350:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(2),i=n(25),s=n(10),r=n(1),o=n(243),c=n(6);function l(e){return void 0!==e.groupId}var u={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"};const d=e=>{const t=Object(s.g)(),[n,d]=Object(a.useState)("");return Object(a.useEffect)((()=>{let n=!1;return(async()=>{const a={};if(l(e)?a.groupIds=[e.groupId]:a.jobId=e.id,t){const e=await t.getUrl({page:r.b.ANOMALY_DETECTION_JOBS_MANAGE,pageState:a});n||d(e)}})(),()=>{n=!0}}),[e,t]),l(e)?Object(c.jsx)(i.EuiLink,{key:e.groupId,href:n},Object(c.jsx)(o.a,{name:e.groupId})):Object(c.jsx)(i.EuiLink,{key:e.id,href:n,css:u,title:e.id},e.id)}},393:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(120),i=n.n(a),s=n(2),r=n(257);var o=n(6);const c={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},l=({children:e,navigateToUrl:t,currentAppId:n,...a})=>{const r=Object(s.useRef)(null),l=Object(s.useCallback)((e=>(({event:e,container:t,navigateToUrl:n,currentAppId:a})=>{if(!t||!a)return;const i=((e,t)=>{let n=e;do{var a,i;if("a"===(null===(a=n)||void 0===a?void 0:a.tagName.toLowerCase()))return n;const e=null===(i=n)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;n=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const s=i.href,r=""===i.target||"_self"===i.target,o=0===e.button;s&&r&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),n(i.href))})({event:e,currentAppId:n,navigateToUrl:t,container:r.current})),[n,t]);return Object(o.jsx)("div",i()({onClick:l,ref:r,css:c,"data-test-subj":"kbnRedirectAppLink"},a),e)},u=({children:e,...t})=>Object(o.jsx)(l,i()({},Object(r.c)(),t),e)},414:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d}));var a=n(131),i=n(204),s=n(218);const r=8,o=new Set([a.a.UNSIGNED_LONG,a.a.LONG,a.a.INTEGER,a.a.SHORT,a.a.BYTE]),c=new Set([a.a.DOUBLE,a.a.FLOAT,a.a.HALF_FLOAT,a.a.SCALED_FLOAT]),l="ml__id_copy",u="ml__incremental_id",d=(e,t,n)=>{const a=n.dest.results_field;if(Object(i.h)(n.analysis)){if(e===`${a}.${s.j}`)return-1;if(t===`${a}.${s.j}`)return 1}if(Object(i.g)(n.analysis)||Object(i.i)(n.analysis)){const s=Object(i.c)(n.analysis),r=Object(i.d)(a,n.analysis,!0);if(e===`${a}.is_training`)return-1;if(t===`${a}.is_training`)return 1;if(e===r)return-1;if(t===r)return 1;if(e===s||e===s.replace(/\.keyword$/,""))return-1;if(t===s||t===s.replace(/\.keyword$/,""))return 1;if(e===`${a}.prediction_probability`)return-1;if(t===`${a}.prediction_probability`)return 1}const r=typeof e,o=typeof t,c=e.split("."),l=c[0],u=t.split("."),d=u[0];return l===a&&c.length>1&&d!==a?(c.shift(),c.shift(),c.join(".")===t?1:c.join(".").localeCompare(t)):d===a&&u.length>1&&l!==a?(u.shift(),u.shift(),u.join(".")===e?-1:e.localeCompare(u.join("."))):"string"!==r&&"string"===o?1:"string"===r&&"string"!==o?-1:e.localeCompare(t)}},423:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(37),i=n(334);function s(e){return Object(a.a)(e)&&Object.values(e).every((e=>Object(i.a)(e)))}},518:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(204);const i=e=>{let t;return Object(a.i)(e)&&void 0!==e.regression.num_top_feature_importance_values?t=e.regression.num_top_feature_importance_values:Object(a.g)(e)&&void 0!==e.classification.num_top_feature_importance_values&&(t=e.classification.num_top_feature_importance_values),t}},571:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n(2);var a=n(393),i=n(257),s=n(6);const r=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:n,...r}=t,o=Object(s.jsx)(a.a,r,e);return Object(s.jsx)(i.a,{coreStart:n},o)}const{navigateToUrl:n,currentAppId:r,...o}=t,c=Object(s.jsx)(a.a,o,e);return Object(s.jsx)(i.b,{currentAppId:r,navigateToUrl:n},c)}},575:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n(2);var a=n(22),i=n(109),s=n(6);const r=({children:e,...t})=>Object(s.jsx)(a.Router,t,Object(s.jsx)(i.CompatRouter,null,e))},70:function(e,t,n){"use strict";n.r(t),n.d(t,"MlCapabilitiesService",(function(){return check_capabilities_MlCapabilitiesService})),n.d(t,"usePermissionCheck",(function(){return j})),n.d(t,"useUpgradeCheck",(function(){return O})),n.d(t,"checkGetManagementMlJobsResolver",(function(){return h})),n.d(t,"checkCreateJobsCapabilitiesResolver",(function(){return v})),n.d(t,"checkPermission",(function(){return y})),n.d(t,"createPermissionFailureMessage",(function(){return x}));var a=n(4),i=n.n(a),s=n(5),r=n(7),o=n(8),c=n(26),l=n.n(c),u=n(2),d=n(10),b=n(156),m=n(50),f=n(11);let p=Object(m.a)();const g=3e5;class check_capabilities_MlCapabilitiesService{constructor(e){i()(this,"_isLoading$",new r.BehaviorSubject(!0)),i()(this,"_updateRequested$",new r.BehaviorSubject(Date.now())),i()(this,"_capabilities$",new r.BehaviorSubject(null)),i()(this,"_capabilitiesObs$",this._capabilities$.asObservable()),i()(this,"_isPlatinumOrTrialLicense$",new r.BehaviorSubject(null)),i()(this,"_mlFeatureEnabledInSpace$",new r.BehaviorSubject(null)),i()(this,"_isUpgradeInProgress$",new r.BehaviorSubject(null)),i()(this,"capabilities$",this._capabilities$.pipe(Object(r.distinctUntilChanged)(o.isEqual))),i()(this,"_subscription",void 0),this.mlApiServices=e,this.init()}init(){this._subscription=Object(r.combineLatest)([this._updateRequested$,Object(r.timer)(0,g)]).pipe(Object(r.tap)((()=>{this._isLoading$.next(!0)})),Object(r.switchMap)((()=>Object(r.from)(this.mlApiServices.checkMlCapabilities()))),Object(r.retry)({delay:g})).subscribe((e=>{this._capabilities$.next(e.capabilities),this._isPlatinumOrTrialLicense$.next(e.isPlatinumOrTrialLicense),this._mlFeatureEnabledInSpace$.next(e.mlFeatureEnabledInSpace),this._isUpgradeInProgress$.next(e.upgradeInProgress),this._isLoading$.next(!1),p=e.capabilities}))}getCapabilities(){return this._capabilities$.getValue()}isPlatinumOrTrialLicense(){return this._isPlatinumOrTrialLicense$.getValue()}mlFeatureEnabledInSpace(){return this._mlFeatureEnabledInSpace$.getValue()}isUpgradeInProgress$(){return this._isUpgradeInProgress$}isUpgradeInProgress(){return this._isUpgradeInProgress$.getValue()}getCapabilities$(){return this._capabilitiesObs$}refreshCapabilities(){this._updateRequested$.next(Date.now())}destroy(){this._subscription&&this._subscription.unsubscribe()}}function j(e){const{services:{mlServices:{mlCapabilities:t}}}=Object(d.d)(),n=Object(u.useRef)(e),a=l()(t.capabilities$,t.getCapabilities());return Object(u.useMemo)((()=>Array.isArray(n.current)?n.current.map((e=>a[e])):a[n.current]),[a])}function O(){const{services:{mlServices:{mlCapabilities:e}}}=Object(d.d)(),t=l()(e.isUpgradeInProgress$(),e.isUpgradeInProgress());return null!=t&&t}function h({mlCapabilities:e}){return new Promise((async(t,n)=>{try{const a=await Object(r.firstValueFrom)(e.getCapabilities$().pipe(Object(r.filter)((e=>!!e))));return null===a?n():(p=a,!0===(a.isADEnabled&&a.canCreateJob||a.isDFAEnabled&&a.canCreateDataFrameAnalytics||a.isNLPEnabled&&a.canCreateTrainedModels)?t():n({capabilities:a,isPlatinumOrTrialLicense:e.isPlatinumOrTrialLicense(),mlFeatureEnabledInSpace:e.mlFeatureEnabledInSpace(),isUpgradeInProgress:e.isUpgradeInProgress()}))}catch(e){n(e)}}))}function v(e){return new Promise(((t,n)=>{f.ml.checkMlCapabilities().then((async({capabilities:a,isPlatinumOrTrialLicense:i})=>(p=a,p.canCreateJob||!1===i?t(p):(await e(),n())))).catch((async t=>(await e(),n())))}))}function y(e){const t=Object(b.a)();return!0===p[e]&&!0!==t}function x(e){let t="";return Object(b.a)()?t=s.i18n.translate("xpack.ml.privilege.licenseHasExpiredTooltip",{defaultMessage:"Your license has expired."}):"canCreateJob"===e?t=s.i18n.translate("xpack.ml.privilege.noPermission.createMLJobsTooltip",{defaultMessage:"You do not have permission to create Machine Learning jobs."}):"canStartStopDatafeed"===e?t=s.i18n.translate("xpack.ml.privilege.noPermission.startOrStopDatafeedsTooltip",{defaultMessage:"You do not have permission to start or stop datafeeds."}):"canUpdateJob"===e?t=s.i18n.translate("xpack.ml.privilege.noPermission.editJobsTooltip",{defaultMessage:"You do not have permission to edit jobs."}):"canDeleteJob"===e?t=s.i18n.translate("xpack.ml.privilege.noPermission.deleteJobsTooltip",{defaultMessage:"You do not have permission to delete jobs."}):"canCreateCalendar"===e?t=s.i18n.translate("xpack.ml.privilege.noPermission.createCalendarsTooltip",{defaultMessage:"You do not have permission to create calendars."}):"canDeleteCalendar"===e?t=s.i18n.translate("xpack.ml.privilege.noPermission.deleteCalendarsTooltip",{defaultMessage:"You do not have permission to delete calendars."}):"canForecastJob"===e&&(t=s.i18n.translate("xpack.ml.privilege.noPermission.runForecastsTooltip",{defaultMessage:"You do not have permission to run forecasts."})),s.i18n.translate("xpack.ml.privilege.pleaseContactAdministratorTooltip",{defaultMessage:"{message} Please contact your administrator.",values:{message:t}})}},77:function(e,t,n){"use strict";n.r(t),n.d(t,"indexServiceFactory",(function(){return i})),n.d(t,"useMlIndexUtils",(function(){return s}));var a=n(10);function i(e){return{getDataViewIdFromName:async function(t,n){var a;const i=(await e.find(t)).find((e=>e.getIndexPattern()===t));var s;return i?null!==(a=i.id)&&void 0!==a?a:i.getIndexPattern():void 0!==n&&null!==(s=(await e.create({id:void 0,name:t,title:t,timeFieldName:n.data_description.time_field})).id)&&void 0!==s?s:null},getDataViewById:function(t){return t?e.get(t):e.create({})},loadDataViewListItems:async function(){return(await e.getIdsWithTitle()).sort(((e,t)=>e.title.localeCompare(t.title)))}}}const s=()=>i(Object(a.d)().services.data.dataViews)},85:function(e,t,n){"use strict";n.r(t),n.d(t,"fieldFormatServiceFactory",(function(){return o}));var a=n(4),i=n.n(a),s=n(123),r=n(73);class field_format_service_FieldFormatService{constructor(e,t){i()(this,"indexPatternIdsByJob",{}),i()(this,"formatsByJob",{}),this.mlApiServices=e,this.mlIndexUtils=t}async populateFormats(e){(await Promise.all(e.map((async e=>{let t;if(this.mlApiServices){const{jobs:n}=await this.mlApiServices.getJobs({jobId:e});t=n[0]}else t=r.mlJobService.getJob(e);return{jobId:e,dataViewId:await this.mlIndexUtils.getDataViewIdFromName(t.datafeed_config.indices.join(","))}})))).forEach((({jobId:e,dataViewId:t})=>{null!==t&&(this.indexPatternIdsByJob[e]=t)}));const t=e.map((e=>Promise.all([this.getFormatsForJob(e)])));try{return(await Promise.all(t)).forEach(((t,n)=>{this.formatsByJob[e[n]]=t[0]})),this.formatsByJob}catch(e){return console.log("Error populating field formats:",e),{formats:{},error:e}}}getFieldFormat(e,t){if(this.formatsByJob.hasOwnProperty(e))return this.formatsByJob[e][t]}async getFormatsForJob(e){let t;if(this.mlApiServices){const{jobs:n}=await this.mlApiServices.getJobs({jobId:e});t=n[0]}else t=r.mlJobService.getJob(e);const n=t.analysis_config.detectors||[],a=[],i=this.indexPatternIdsByJob[e];if(void 0!==i){const e=await this.mlIndexUtils.getDataViewById(i),t=e.fields;n.forEach((n=>{const i=Object(s.s)(n.function);if(void 0!==n.field_name&&"cardinality"!==i){const i=t.getByName(n.field_name);void 0!==i&&(a[n.detector_index]=e.getFormatterForField(i))}}))}return a}}function o(e,t){return new field_format_service_FieldFormatService(e,t)}},863:function(e,t,n){"use strict";n.r(t),n.d(t,"mountApp",(function(){return W}));var a=n(79),i=n.n(a),s=n(2),r=n.n(s),o=n(575),c=n(5),l=n(15),u=n(25),d=n(21),b=n(143),m=n(571),f=n(163),p=n(228),g=n(122),j=n(0),O=n(70),h=n(6);const v=()=>Object(h.jsx)(u.EuiPageTemplate.EmptyPrompt,{"data-test-subj":"mlPageAccessDenied",color:"danger",iconType:"warning",title:Object(h.jsx)("h2",null,Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.noPermissionToAccessLabel",defaultMessage:"Access denied"})),body:Object(h.jsx)("p",null,Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.noGrantedPrivilegesDescription",defaultMessage:"You donâ€™t have permission to manage Machine Learning jobs. Access to the plugin requires the Machine Learning feature to be visible in this space."}))}),y=({basePath:e})=>Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(u.EuiPageTemplate.EmptyPrompt,{title:Object(h.jsx)("h2",null,Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.insufficientLicenseLabel",defaultMessage:"Machine learning is a subscription feature"})),"data-test-subj":"mlPageInsufficientLicense",body:Object(h.jsx)(u.EuiFlexGroup,{direction:"column"},Object(h.jsx)(u.EuiFlexItem,null,Object(h.jsx)(u.EuiText,{color:"subdued"},Object(h.jsx)("p",null,Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.insufficientLicenseDescription",defaultMessage:"Select an option to unlock it."})))),Object(h.jsx)(u.EuiFlexItem,null,Object(h.jsx)(u.EuiFlexGroup,{justifyContent:"center"},Object(h.jsx)(u.EuiFlexItem,{grow:!1},Object(h.jsx)(u.EuiButtonEmpty,{"data-test-subj":"license-prompt-upgrade",key:"upgrade-subscription-button",target:"_blank",href:"https://www.elastic.co/subscriptions"},Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.insufficientLicenseDescription.SubscriptionLink",defaultMessage:"Upgrade your subscription"}))),Object(h.jsx)(u.EuiFlexItem,{grow:!1},Object(h.jsx)(u.EuiButton,{fill:!0,"data-test-subj":"license-prompt-trial",key:"start-trial-button",target:"_blank",href:`${e.get()}/app/management/stack/license_management/home`},Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.insufficientLicenseDescription.startTrialLink",defaultMessage:"Start trial"}))))))}));var x=n(167),_=n(116);const S=Object(_.a)((async()=>({default:(await n.e(95).then(n.bind(null,880))).ImportJobsFlyout}))),T=Object(_.a)((async()=>({default:(await n.e(94).then(n.bind(null,851))).ExportJobsFlyout})));var E=n(10);var M=n(1),C={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"};const I=({id:e})=>{const t=Object(E.f)({page:M.b.TRAINED_MODELS_MANAGE,pageState:{modelId:e}});return Object(h.jsx)(u.EuiLink,{href:t,css:C,title:e},e)};var w=n(350),k=n(387);function F(e){switch(e){case"anomaly-detector":return A;case"data-frame-analytics":return P;case"trained-model":return L;default:return[]}}const A=[{field:"id",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.ad.id",{defaultMessage:"ID"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnId",scope:"row",width:"250px",render:e=>Object(h.jsx)(w.a,{id:e})},{field:"description",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.ad.description",{defaultMessage:"Description"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnDescription"},{field:"jobState",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.ad.jobState",{defaultMessage:"Job state"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnJobState",width:"100px"},{field:"datafeedState",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.ad.datafeedState",{defaultMessage:"Datafeed state"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnDatafeedState",width:"150px"}],P=[{field:"id",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.dfa.id",{defaultMessage:"ID"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnId",scope:"row",width:"250px",render:e=>Object(h.jsx)(k.a,{jobId:e})},{field:"description",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.dfa.description",{defaultMessage:"Description"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnDescription"},{field:"source_index",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.dfa.source_index",{defaultMessage:"Source index"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnSourceIndex",width:"200px"},{field:"dest_index",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.dfa.dest_index",{defaultMessage:"Destination index"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnDestIndex",width:"200px"},{field:"job_type",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.dfa.job_type",{defaultMessage:"Type"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnJobType",width:"150px"},{field:"state",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.dfa.state",{defaultMessage:"Status"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnState",width:"100px"}],L=[{field:"id",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.id",{defaultMessage:"ID"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnId",scope:"row",width:"250px",render:e=>Object(h.jsx)(I,{id:e})},{field:"description",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.description",{defaultMessage:"Description"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnDescription"},{field:"type",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.type",{defaultMessage:"Type"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnType",width:"250px"},{field:"state",name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.trainedModels.state",{defaultMessage:"State"}),sortable:!0,truncateText:!0,"data-test-subj":"mlSpaceManagementTableColumnState",width:"100px"}];var D=n(24),N=n(71);const R=c.i18n.translate("xpack.ml.management.jobsSpacesList.jobObjectNoun",{defaultMessage:"job"}),$=c.i18n.translate("xpack.ml.management.jobsSpacesList.modelObjectNoun",{defaultMessage:"trained model"}),U=({spacesApi:e,spaceIds:t,id:n,mlSavedObjectType:a,refresh:i})=>{const{savedObjects:{updateJobsSpaces:o,updateModelsSpaces:l}}=Object(E.c)(),{displayErrorToast:d}=Object(N.useToastNotificationService)(),[b,m]=Object(s.useState)(!1);function f(){m(!1),i()}function p(e){Object.entries(e).forEach((([e,{success:t,error:n}])=>{if(!1===t){const t=c.i18n.translate("xpack.ml.management.jobsSpacesList.updateSpaces.error",{defaultMessage:"Error updating {id}",values:{id:e}});d(n,t)}}))}const g=Object(s.useCallback)(e.ui.components.getSpaceList,[e]),j=Object(s.useCallback)(e.ui.components.getShareToSpaceFlyout,[e]),O={savedObjectTarget:{type:D.a,id:n,namespaces:t,title:n,noun:"trained-model"===a?$:R},behaviorContext:"outside-space",changeSpacesHandler:async function(e,t,i){const s=t.includes("*")?[]:i;(t.length||s.length)&&p("trained-model"===a?await l([n],t,s):await o(a,[n],t,s)),f()},onClose:f};return Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(u.EuiButtonEmpty,{onClick:()=>m(!0),style:{height:"auto"},"data-test-subj":"mlJobListRowManageSpacesButton"},Object(h.jsx)(g,{namespaces:t,displayLimit:0,behaviorContext:"outside-space"})),b&&Object(h.jsx)(j,O))};function V(e,t){return t.map((([t,n])=>{const a=[...new Set(e.map((e=>e[t])).flat())].sort(((e,t)=>e.localeCompare(t))).map((e=>({value:e,name:e})));return{type:"field_value_selection",multiSelect:"or",field:t,name:n,options:a}}))}const B=({spacesApi:e,onTabChange:t,onReload:n})=>{const{getList:a}=function(){const{services:{mlServices:{httpService:e}}}=Object(E.d)();return Object(s.useMemo)((()=>function(e){return{getList:t=>e.http({path:`${j.d}/management/list/${t}`,method:"GET",version:"1"})}}(e)),[e])}(),[i,o]=Object(s.useState)(null),[l,d]=Object(s.useState)(),[b,m]=Object(s.useState)([]),[f,p]=Object(s.useState)(),[O,v]=Object(s.useState)(!1),{isADEnabled:y,isDFAEnabled:x,isNLPEnabled:_}=Object(g.d)(),{onTableChange:S,pagination:T,sorting:M,setPageIndex:C}=function(e,t,n="asc",a){var i,r,o;const[c,l]=Object(s.useState)(null!==(i=null==a?void 0:a.pageIndex)&&void 0!==i?i:0),[u,d]=Object(s.useState)(null!==(r=null==a?void 0:a.pageSize)&&void 0!==r?r:10),[b,m]=Object(s.useState)(t),[f,p]=Object(s.useState)(n);return{onTableChange:({page:e={index:0,size:10},sort:t={field:b,direction:f}})=>{const{index:n,size:a}=e;l(n),d(a);const{field:i,direction:s}=t;m(i),p(s)},pagination:{pageIndex:c,pageSize:u,totalItemCount:(null!=e?e:[]).length,pageSizeOptions:null!==(o=null==a?void 0:a.pageSizeOptions)&&void 0!==o?o:[10,20,50],showPerPageOptions:!0},sorting:{sort:{field:b,direction:f}},setPageIndex:l}}(null!=l?l:[],"id"),I=Object(s.useRef)(!0);Object(s.useEffect)((()=>()=>{I.current=!1}),[]),Object(s.useEffect)((function(){!0===y?o("anomaly-detector"):!0===x?o("data-frame-analytics"):!0===_&&o("trained-model")}),[y,x,_]);const w=Object(s.useRef)(null),k=Object(s.useCallback)((e=>{null!==e&&(w.current=e,v(!0),a(e).then((t=>{I.current&&e===w.current&&(d(t),v(!1),p(function(e,t){switch(e){case"anomaly-detector":return V(t,[["jobState",c.i18n.translate("xpack.ml.management.spaceManagementFilters.ad.jobState",{defaultMessage:"Job state"})],["datafeedState",c.i18n.translate("xpack.ml.management.spaceManagementFilters.ad.datafeedState",{defaultMessage:"Datafeed state"})]]);case"data-frame-analytics":return V(t,[["job_type",c.i18n.translate("xpack.ml.management.spaceManagementFilters.dfa.job_type",{defaultMessage:"Type"})],["state",c.i18n.translate("xpack.ml.management.spaceManagementFilters.dfa.state",{defaultMessage:"Status"})]]);case"trained-model":return V(t,[["type",c.i18n.translate("xpack.ml.management.spaceManagementFilters.trainedModels.type",{defaultMessage:"Type"})]]);default:return}}(e,t)))})).catch((()=>{I.current&&(d([]),p(void 0),v(!1))})))}),[a,w]);Object(s.useEffect)((()=>(n((()=>()=>k(i))),()=>{n(null)})),[i,k,n]),Object(s.useEffect)((function(){d(void 0),null!==i&&(m(A()),t(i),k(i),C(0))}),[i]);const A=Object(s.useCallback)((()=>null===i?[]:[...F(i),...void 0!==e?[{name:c.i18n.translate("xpack.ml.management.spaceManagementTableColumn.spaces",{defaultMessage:"spaces"}),"data-test-subj":"mlSpaceManagementTableColumnSpaces",sortable:!0,truncateText:!0,align:"right",width:"10%",render:t=>{var n;return Object(h.jsx)(U,{spacesApi:e,spaceIds:null!==(n=t.spaces)&&void 0!==n?n:[],id:t.id,mlSavedObjectType:i,refresh:k.bind(null,i)})}}]:[]]),[i,e,k]),P=Object(s.useCallback)((()=>Object(h.jsx)(r.a.Fragment,null,O?Object(h.jsx)(u.EuiProgress,{size:"xs",color:"accent"}):null,Object(h.jsx)(u.EuiSpacer,{size:"m"}),void 0===l?null:Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(u.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"none"},Object(h.jsx)(u.EuiFlexItem,{grow:!1},Object(h.jsx)(J,{onRefreshClick:k.bind(null,i),isRefreshing:O}))),Object(h.jsx)(u.EuiInMemoryTable,{"data-test-subj":`mlSpacesManagementTable-${i} ${O?"loading":"loaded"}`,items:l,columns:b,search:{box:{incremental:!0},filters:f},onTableChange:S,pagination:T,sorting:M,rowProps:e=>({"data-test-subj":`mlSpacesManagementTable-${i} row-${e.id}`})})))),[l,b,O,f,i,k,S]),L=Object(s.useMemo)((()=>{const e=[];return!0===y&&e.push({"data-test-subj":"mlStackManagementAnomalyDetectionTab",id:"anomaly-detector",name:c.i18n.translate("xpack.ml.management.list.anomalyDetectionTab",{defaultMessage:"Anomaly detection"}),content:P()}),!0===x&&e.push({"data-test-subj":"mlStackManagementAnalyticsTab",id:"data-frame-analytics",name:c.i18n.translate("xpack.ml.management.list.analyticsTab",{defaultMessage:"Analytics"}),content:P()}),!0!==_&&!0!==x||e.push({"data-test-subj":"mlStackManagementTrainedModelsTab",id:"trained-model",name:c.i18n.translate("xpack.ml.management.list.trainedModelsTab",{defaultMessage:"Trained models"}),content:P()}),e}),[P,y,x,_]);return Object(h.jsx)(u.EuiTabbedContent,{"data-test-subj":"mlSpacesManagementTable",onTabClick:({id:e})=>{o(e)},size:"s",tabs:L,initialSelectedTab:L[0]})},J=({onRefreshClick:e,isRefreshing:t})=>Object(h.jsx)(u.EuiButtonEmpty,{"data-test-subj":"mlRefreshJobListButton"+(t?" loading":" loaded"),onClick:e,isLoading:t,iconType:"refresh",iconSide:"left",iconSize:"m"},Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.list.refreshButtonLabel",defaultMessage:"Refresh"})),G=({currentTabId:e})=>{const{services:{docLinks:{links:{ml:t}}}}=Object(E.d)();let n=t.anomalyDetectionJobs,a=c.i18n.translate("xpack.ml.management.jobsList.anomalyDetectionDocsLabel",{defaultMessage:"Anomaly detection jobs docs"});return"data-frame-analytics"===e?(n=t.dataFrameAnalytics,a=c.i18n.translate("xpack.ml.management.jobsList.analyticsDocsLabel",{defaultMessage:"Analytics jobs docs"})):"trained-model"===e&&(n=t.trainedModels,a=c.i18n.translate("xpack.ml.management.jobsList.trainedModelsDocsLabel",{defaultMessage:"Trained models docs"})),Object(h.jsx)(u.EuiButtonEmpty,{href:n,target:"_blank",iconType:"help","data-test-subj":"mlDocumentationLink"},a)},Y=({children:e})=>Object(h.jsx)(r.a.Fragment,null,e),K=({coreStart:e,share:t,history:n,spacesApi:a,data:i,usageCollection:_,fieldFormats:E,isServerless:M,mlFeatures:C})=>{const[I,w]=Object(s.useState)(!1),[k,F]=Object(s.useState)(!1),[A,P]=Object(s.useState)(!1),[L,D]=Object(s.useState)(!0),[N,R]=Object(s.useState)(!1),[$,U]=Object(s.useState)("anomaly-detector"),[V,J]=Object(s.useState)(null),K=Object(s.useMemo)((()=>Object(p.a)(e.http,i.dataViews,_)),[e.http,i.dataViews,_]);Object(s.useEffect)((()=>{(async()=>{try{await Object(O.checkGetManagementMlJobsResolver)(K)}catch(e){e.mlFeatureEnabledInSpace&&!1===e.isPlatinumOrTrialLicense?D(!1):e.isUpgradeInProgress?P(!0):F(!0)}w(!0)})()}),[]);const z=Object(s.useCallback)(a?a.ui.components.getSpacesContextProvider:Y,[a]);return!1===I?null:A?Object(h.jsx)(l.I18nProvider,null,Object(h.jsx)(b.a,e,Object(h.jsx)(d.KibanaContextProvider,{services:{...e,share:t,data:i,usageCollection:_,fieldFormats:E,spacesApi:a,mlServices:K}},Object(h.jsx)(f.a,null)))):k?Object(h.jsx)(l.I18nProvider,null,Object(h.jsx)(b.a,e,Object(h.jsx)(v,null))):!1===L?Object(h.jsx)(l.I18nProvider,null,Object(h.jsx)(b.a,e,Object(h.jsx)(y,{basePath:e.http.basePath}))):Object(h.jsx)(l.I18nProvider,null,Object(h.jsx)(b.a,e,Object(h.jsx)(m.a,{coreStart:{application:e.application}},Object(h.jsx)(d.KibanaContextProvider,{services:{...e,share:t,data:i,usageCollection:_,fieldFormats:E,spacesApi:a,mlServices:K}},Object(h.jsx)(z,{feature:j.g},Object(h.jsx)(g.b,{isServerless:M,mlFeatures:C},Object(h.jsx)(o.a,{history:n},Object(h.jsx)(u.EuiPageTemplate.Header,{pageTitle:Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.jobsListTitle",defaultMessage:"Machine Learning"}),description:Object(h.jsx)(l.FormattedMessage,{id:"xpack.ml.management.jobsList.jobsListTagline",defaultMessage:"Identify, analyze, and process your data using advanced analysis techniques."}),rightSideItems:[Object(h.jsx)(G,{currentTabId:$})],bottomBorder:!0,paddingSize:"none"}),Object(h.jsx)(u.EuiSpacer,{size:"l"}),Object(h.jsx)(u.EuiPageTemplate.Section,{paddingSize:"none",id:"kibanaManagementMLSection","data-test-subj":"mlPageStackManagementJobsList"},Object(h.jsx)(u.EuiFlexGroup,null,Object(h.jsx)(u.EuiFlexItem,{grow:!1},Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(u.EuiButtonEmpty,{onClick:()=>R(!0),"data-test-subj":"mlStackMgmtSyncButton"},c.i18n.translate("xpack.ml.management.jobsList.syncFlyoutButton",{defaultMessage:"Synchronize saved objects"})),N&&Object(h.jsx)(x.a,{onClose:function(){"function"==typeof V&&V(),R(!1)}}),Object(h.jsx)(u.EuiSpacer,{size:"s"}))),Object(h.jsx)(u.EuiFlexItem,{grow:!1},Object(h.jsx)(T,{isDisabled:!1,currentTab:"trained-model"===$?"anomaly-detector":$})),Object(h.jsx)(u.EuiFlexItem,{grow:!1},Object(h.jsx)(S,{isDisabled:!1,onImportComplete:V}))),Object(h.jsx)(B,{spacesApi:a,onTabChange:U,onReload:J})))))))))},z="/management/ml/jobs_list",H=(e,t,n,s,o,c,l,u,d,b)=>(i.a.render(r.a.createElement(K,{coreStart:n,history:t,share:s,data:o,spacesApi:d,usageCollection:b,fieldFormats:c,isServerless:l,mlFeatures:u}),e),()=>{Object(a.unmountComponentAtNode)(e)});async function W(e,t,n,a,i){const[s,r]=await e.getStartServices();return t.setBreadcrumbs([{text:c.i18n.translate("xpack.ml.management.breadcrumb",{defaultMessage:"Machine Learning"}),href:`#${z}`}]),H(t.element,t.history,s,r.share,r.data,r.fieldFormats,a,i,r.spaces,n.usageCollection)}}}]);