/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ml_bundle_jsonpfunction=window.ml_bundle_jsonpfunction||[]).push([[57,77],{143:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r=n(120),i=n.n(r),a=n(2),o=n(88),s=n(149),c=n(26),l=n.n(c),d=n(84),u=n.n(d),b=n(25);const m="eui-global",v="eui-utilities",h={darkMode:!1};var y=n(6);const j=[b.euiStylisPrefixer],f=u()({key:"css",stylisPlugins:j,container:document.querySelector('meta[name="emotion"]')}),p=u()({key:m,stylisPlugins:j,container:document.querySelector(`meta[name="${m}"]`)}),w=u()({key:v,stylisPlugins:j,container:document.querySelector(`meta[name="${v}"]`)});f.compat=!0,p.compat=!0,w.compat=!0;const x={default:f,global:p,utility:w},S=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:r,children:i})=>{const o=l()(e,h),s=Object(a.useMemo)((()=>(e=>e.darkMode?b.COLOR_MODES_STANDARD.dark:b.COLOR_MODES_STANDARD.light)(o)),[o]),c=n||s,d=!1!==t&&void 0;return Object(y.jsx)(b.EuiProvider,{cache:x,modify:r,colorMode:c,globalStyles:d,utilityClasses:d},i)},O=({children:e,i18n:t,...n})=>Object(o.useIsNestedEuiProvider)()?(Object(s.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(y.jsx)(t.Context,null,e)):Object(y.jsx)(S,n,Object(y.jsx)(t.Context,null,e));var g=n(89);const P=({children:e,...t})=>Object(y.jsx)(O,i()({globalStyles:!1},t),Object(y.jsx)(g.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(y.jsx)(g.KibanaErrorBoundary,null,e)))},149:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var r=void 0;t.setEuiDevProviderWarning=function(e){return r=e},t.getEuiDevProviderWarning=function(){return r},t.emitEuiProviderWarning=function(e){if("function"==typeof r)return r(e);switch(r){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){r.useEffect(e,[])}},224:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(58),i=n(2),a=r.__importDefault(n(192));t.default=function(e){var t=i.useRef(e);t.current=e,a.default((function(){return function(){return t.current()}}))}},270:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n(26),n(7);var r=n(2),i=n(21);const a=(e,t,n,a)=>{const o=Object(r.useMemo)((()=>{const e={type:"visualization",name:n,id:a};return{...t,child:e}}),[n,a,t]);Object(i.useExecutionContext)(e,o)}},345:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(12),i=n(48);const a=async(e,t)=>{const[{AnomalyDetectorService:a},{fieldFormatServiceFactory:o},{indexServiceFactory:s},{mlApiServicesProvider:c},{mlResultsServiceProvider:l}]=await Promise.all([await n.e(24).then(n.bind(null,111)),await Promise.all([n.e(0),n.e(1),n.e(37)]).then(n.bind(null,85)),await n.e(38).then(n.bind(null,77)),await Promise.resolve().then(n.bind(null,11)),await Promise.all([n.e(0),n.e(2),n.e(3),n.e(33)]).then(n.bind(null,80))]),d=new r.a(e.http),u=new a(d),b=c(d),m=l(b);return[e,t,{anomalyDetectorService:u,anomalyExplorerService:new i.a(t.data.query.timefilter.timefilter,b,m),mlFieldFormatService:o(b,s(t.data.dataViews)),mlResultsService:m}]}},379:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n(4);var r=n(93),i=n(7);const a=(e,t,n)=>{const r=new i.BehaviorSubject(void 0);return n.add(t.jobIds.pipe(Object(i.switchMap)((t=>e.anomalyDetectorService.getJobs$(t))),Object(i.map)((e=>[...new Set(e.map((e=>e.datafeed_config.indices)).flat())])),Object(i.switchMap)((t=>Object(i.forkJoin)(t.map((t=>Object(i.from)(e.dataViewsService.find(`"${t}"`).then((e=>e.find((e=>e.getIndexPattern().toLowerCase().includes(t.toLowerCase()))))))))))),Object(i.map)((e=>e.flat().filter((e=>void 0!==e))))).subscribe(r)),r};r.Embeddable},382:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),i=n(206),a=n.n(i),o=n(48);const s=(e,t,n)=>{var i;const s=new r.BehaviorSubject(e.jobIds),c=new r.BehaviorSubject(null!==(i=e.maxSeriesToPlot)&&void 0!==i?i:o.b),l=new r.BehaviorSubject(e.severityThreshold),d=new r.BehaviorSubject(e.selectedEntities),u=new r.BehaviorSubject(void 0),b=new r.BehaviorSubject(!0),m=new r.BehaviorSubject(void 0),v={jobIds:[s,e=>s.next(e),a.a],maxSeriesToPlot:[c,e=>c.next(e)],severityThreshold:[l,e=>l.next(e)],selectedEntities:[d,e=>d.next(e),a.a]};return{anomalyChartsControlsApi:{jobIds$:s,maxSeriesToPlot$:c,severityThreshold$:l,selectedEntities$:d,updateUserInput:e=>{s.next(e.jobIds),c.next(e.maxSeriesToPlot),t&&t.setPanelTitle(e.title)},updateSeverityThreshold:e=>l.next(e),updateSelectedEntities:e=>d.next(e)},dataLoadingApi:{dataLoading:b,setInterval:e=>u.next(e),onRenderComplete:()=>b.next(!1),onLoading:e=>b.next(e),onError:e=>m.next(e)},serializeAnomalyChartsState:()=>({jobIds:s.value,maxSeriesToPlot:c.value,severityThreshold:l.value,selectedEntities:d.value}),anomalyChartsComparators:v,onAnomalyChartsDestroy:()=>{s.complete(),c.complete(),l.complete(),d.complete()}}}},383:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(116);const i=Object(r.a)((()=>Promise.all([n.e(0),n.e(1),n.e(2),n.e(8),n.e(11),n.e(14),n.e(26),n.e(49)]).then(n.bind(null,499))))},845:function(e,t,n){"use strict";n.r(t),n.d(t,"getAnomalyChartsReactEmbeddableFactory",(function(){return w}));var r=n(5),i=n(143),a=(n(2),n(7)),o=n(136),s=n(224),c=n.n(s),l=n(21),d=n(206),u=n.n(d),b=n(6),m=n(25),v=n(161),h=n(270),y=n(382),j=n(383),f=n(345),p=n(379);const w=e=>({type:v.a,deserializeState:e=>e.rawState,buildEmbeddable:async(t,s,d,w)=>{if(!Object(o.a)(w))throw new Error("Parent API does not have execution context");const[x,S]=await e(),O=await Object(f.a)(x,S),[,,g]=O,P=new a.Subscription,{titlesApi:E,titleComparators:C,serializeTitles:A}=Object(o.j)(t),{api:D,comparators:T,serialize:R}=Object(o.i)(t),{anomalyChartsControlsApi:_,dataLoadingApi:I,serializeAnomalyChartsState:M,anomalyChartsComparators:k,onAnomalyChartsDestroy:$}=Object(y.a)(t,E,w),B=s({isEditingEnabled:()=>!0,getTypeDisplayName:()=>r.i18n.translate("xpack.ml.components.mlAnomalyExplorerEmbeddable.typeDisplayName",{defaultMessage:"anomaly charts"}),onEdit:async()=>{try{const{resolveEmbeddableAnomalyChartsUserInput:e}=await Promise.all([n.e(0),n.e(1),n.e(30)]).then(n.bind(null,777)),t=await e(x,S,w,d,{...A(),...M()});_.updateUserInput(t)}catch(e){return console.error(e),Promise.reject()}},...E,...D,..._,...I,dataViews:Object(p.a)({anomalyDetectorService:g.anomalyDetectorService,dataViewsService:S.data.dataViews},{jobIds:_.jobIds$},P),serializeState:()=>({rawState:{timeRange:void 0,...A(),...R(),...M()},references:[]})},{...T,...C,...k}),L=Object(o.g)(B).pipe(Object(a.map)((e=>e.timeRange)),Object(a.distinctUntilChanged)(u.a)),{onRenderComplete:z,onLoading:W,onError:F}=I,K={mlServices:{...g},...x,...S};return{api:B,Component:()=>{if(!Object(o.a)(w))throw new Error("Parent API does not have execution context");Object(h.a)(x.executionContext,w.executionContext,v.a,d),c()((()=>{$(),P.unsubscribe()}));const{euiTheme:e}=Object(m.useEuiTheme)();return Object(b.jsx)(i.a,x,Object(b.jsx)(l.KibanaContextProvider,{services:K},Object(b.jsx)("div",{css:Object(b.css)("width:100%;padding:",e.size.xs,";overflow-y:auto;",""),"data-test-subj":"mlAnomalySwimlaneEmbeddableWrapper"},Object(b.jsx)(j.a,{id:d,severityThreshold:t.severityThreshold,api:B,services:O,onLoading:W,onRenderComplete:z,onError:F,timeRange$:L}))))}}}})}}]);