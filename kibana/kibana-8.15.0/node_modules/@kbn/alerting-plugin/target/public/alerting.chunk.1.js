/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.alerting_bundle_jsonpfunction=window.alerting_bundle_jsonpfunction||[]).push([[1],{54:function(e,t,a){"use strict";var n,r=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),s=[];function i(e){for(var t=-1,a=0;a<s.length;a++)if(s[a].identifier===e){t=a;break}return t}function l(e,t){for(var a={},n=[],r=0;r<e.length;r++){var l=e[r],o=t.base?l[0]+t.base:l[0],u=a[o]||0,c="".concat(o," ").concat(u);a[o]=u+1;var d=i(c),b={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(s[d].references++,s[d].updater(b)):s.push({identifier:c,updater:g(b,t),references:1}),n.push(c)}return n}function o(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var s=a.nc;s&&(n.nonce=s)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var i=r(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,a,n){var r=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,r);else{var s=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(s,i[t]):e.appendChild(s)}}function b(e,t,a){var n=a.css,r=a.media,s=a.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var p=null,m=0;function g(e,t){var a,n,r;if(t.singleton){var s=m++;a=p||(p=o(t)),n=d.bind(null,a,s,!1),r=d.bind(null,a,s,!0)}else a=o(t),n=b.bind(null,a,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var r=i(a[n]);s[r].references--}for(var o=l(e,t),u=0;u<a.length;u++){var c=i(a[u]);0===s[c].references&&(s[c].updater(),s.splice(c,1))}a=o}}}},55:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,r,s=e[1]||"",i=e[3];if(!i)return s;if(t&&"function"==typeof btoa){var l=(a=i,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(r," */")),o=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[s].concat(o).concat([l]).join("\n")}return[s].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var s=0;s<this.length;s++){var i=this[s][0];null!=i&&(r[i]=!0)}for(var l=0;l<e.length;l++){var o=[].concat(e[l]);n&&r[o[0]]||(a&&(o[2]?o[2]="".concat(a," and ").concat(o[2]):o[2]=a),t.push(o))}},t}},56:function(e,t,a){"use strict";a.d(t,"a",(function(){return be}));var n=a(12),r=a.n(n),s=a(16),i=a.n(s),l=a(17),o=a(23),u=a(14),c=a(21);const d=[...a.n(c).a.tz.names().filter((e=>!["America/Nuuk","EST","HST","ROC","MST"].includes(e)))];var b=a(0);const p=Object.freeze({kibana:{id:"kibana",label:b.i18n.translate("core.ui.kibanaNavList.label",{defaultMessage:"Analytics"}),euiIconType:"logoKibana",order:1e3},enterpriseSearch:{id:"enterpriseSearch",label:b.i18n.translate("core.ui.searchNavList.label",{defaultMessage:"Search"}),order:2e3,euiIconType:"logoEnterpriseSearch"},observability:{id:"observability",label:b.i18n.translate("core.ui.observabilityNavList.label",{defaultMessage:"Observability"}),euiIconType:"logoObservability",order:3e3},security:{id:"securitySolution",label:b.i18n.translate("core.ui.securityNavList.label",{defaultMessage:"Security"}),order:4e3,euiIconType:"logoSecurity"},management:{id:"management",label:b.i18n.translate("core.ui.managementNavList.label",{defaultMessage:"Management"}),order:5e3,euiIconType:"managementApp"}});var m=a(31),g=a(35),f=a(32),j=a(34);const{emptyField:h}=m.fieldValidators,y={title:{type:l.FIELD_TYPES.TEXT,label:f.wb,validations:[{validator:h(f.Q)}]},categoryIds:{validations:[{validator:h(f.m)}]},scopedQuery:{defaultValue:{kql:"",filters:[]}},startDate:{},endDate:{},timezone:{},recurring:{type:l.FIELD_TYPES.TOGGLE,label:f.U,defaultValue:!1},recurringSchedule:{frequency:{type:l.FIELD_TYPES.SELECT,label:f.U,defaultValue:g.a.DAILY},interval:{type:l.FIELD_TYPES.NUMBER,label:"",defaultValue:1,validations:[{validator:h(f.O)}]},ends:{type:l.FIELD_TYPES.BUTTON_GROUP,label:f.A,defaultValue:j.d.NEVER,validations:[]},until:{},count:{label:"",type:l.FIELD_TYPES.TEXT,defaultValue:1,validations:[{validator:h(f.u)}]},customFrequency:{type:l.FIELD_TYPES.SELECT,label:"",defaultValue:g.a.WEEKLY},byweekday:{},bymonth:{type:l.FIELD_TYPES.BUTTON_GROUP,label:"",validations:[],defaultValue:"day"}}};var O=a(41),x=a(13),v=a(39);const S=Object(l.getUseField)({component:o.Field}),E={flexField:{name:"162yvs7",styles:".euiFormRow__labelWrapper{margin-bottom:unset;}"}},w=r.a.memo((()=>{const[{startDate:e,recurringSchedule:t}]=Object(l.useFormData)({watch:["startDate","recurringSchedule.frequency","recurringSchedule.interval","recurringSchedule.customFrequency"]}),a=Object(n.useMemo)((()=>Object(j.a)(null==t?void 0:t.interval)),[null==t?void 0:t.interval]),s=Object(n.useMemo)((()=>{if(!e)return[];const t=i()(e),{dayOfWeek:a,nthWeekdayOfMonth:n,isLastOfMonth:r}=Object(O.a)(t,"ddd");return[{id:"day",label:f.z(t)},{id:"weekday",label:f.gb(a)[r?0:n]}]}),[e]),o=Object(n.useMemo)((()=>Object(v.a)([],i()(e))),[e]);return Object(x.jsx)(r.a.Fragment,null,(null==t?void 0:t.frequency)!==g.a.DAILY?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiSpacer,{size:"s"}),Object(x.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"flexStart"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(S,{path:"recurringSchedule.interval",css:E.flexField,componentProps:{"data-test-subj":"interval-field",id:"interval",euiFieldProps:{min:1,prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"interval"},f.N)}}})),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(S,{path:"recurringSchedule.customFrequency",componentProps:{"data-test-subj":"custom-frequency-field",euiFieldProps:{options:a}}}))),Object(x.jsx)(u.EuiSpacer,{size:"s"})):null,Number(null==t?void 0:t.customFrequency)===g.a.WEEKLY||(null==t?void 0:t.frequency)===g.a.DAILY?Object(x.jsx)(S,{path:"recurringSchedule.byweekday",config:{type:l.FIELD_TYPES.MULTI_BUTTON_GROUP,label:"",validations:[{validator:({value:e})=>{if(Object.values(e).every((e=>!1===e)))return{message:f.k}}}],defaultValue:o},componentProps:{"data-test-subj":"byweekday-field",euiFieldProps:{legend:"Repeat on weekday",options:j.l}}}):null,Number(null==t?void 0:t.customFrequency)===g.a.MONTHLY?Object(x.jsx)(S,{path:"recurringSchedule.bymonth",componentProps:{"data-test-subj":"bymonth-field",euiFieldProps:{legend:"Repeat on weekday or month day",options:s}}}):null)}));w.displayName="CustomRecurringSchedule";var F=a(50),I=a(42);const T=Object(l.getUseField)({component:o.Field}),M=e=>i()(e),C=e=>e.toISOString(),k=r.a.memo((()=>{const[e]=Object(n.useState)(i()()),[{startDate:t,endDate:a,timezone:s,recurringSchedule:o}]=Object(l.useFormData)({watch:["startDate","endDate","timezone","recurringSchedule.frequency","recurringSchedule.interval","recurringSchedule.ends","recurringSchedule.until","recurringSchedule.count","recurringSchedule.customFrequency","recurringSchedule.byweekday","recurringSchedule.bymonth"]}),{options:c,presets:d}=Object(n.useMemo)((()=>{if(!t)return{options:j.b,presets:j.c};const e=i()(t),{dayOfWeek:a,nthWeekdayOfMonth:n,isLastOfMonth:r}=Object(O.a)(e);return{options:[{text:f.F,value:g.a.DAILY},{text:f.K(a),value:g.a.WEEKLY},{text:f.H(a)[r?0:n],value:g.a.MONTHLY},{text:f.M(e),value:g.a.YEARLY},{text:f.E,value:"CUSTOM"}],presets:Object(I.a)(e)}}),[t]);return Object(x.jsx)(u.EuiSplitPanel.Outer,{hasShadow:!1,hasBorder:!0},Object(x.jsx)(u.EuiSplitPanel.Inner,{color:"subdued"},Object(x.jsx)(T,{path:"recurringSchedule.frequency",componentProps:{"data-test-subj":"frequency-field",euiFieldProps:{options:c}}}),(null==o?void 0:o.frequency)===g.a.DAILY||"CUSTOM"===(null==o?void 0:o.frequency)?Object(x.jsx)(w,{"data-test-subj":"custom-recurring-form"}):null,Object(x.jsx)(T,{path:"recurringSchedule.ends",componentProps:{"data-test-subj":"ends-field",euiFieldProps:{legend:"Recurrence ends",options:j.g}}}),(null==o?void 0:o.ends)===j.d.ON_DATE?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiSpacer,{size:"m"}),Object(x.jsx)(u.EuiFlexGroup,{alignItems:"flexEnd"},Object(x.jsx)(u.EuiFlexItem,{grow:3},Object(x.jsx)(T,{path:"recurringSchedule.until",config:{type:l.FIELD_TYPES.DATE_PICKER,label:"",defaultValue:i()(a).endOf("day").toISOString(),validations:[],serializer:C,deserializer:M},componentProps:{"data-test-subj":"until-field",euiFieldProps:{showTimeSelect:!1,minDate:e}}})),s?Object(x.jsx)(u.EuiFlexItem,{grow:1},Object(x.jsx)(u.EuiComboBox,{"data-test-subj":"disabled-timezone-field",id:"disabled-timezone",isDisabled:!0,singleSelection:{asPlainText:!0},selectedOptions:[{label:s[0]}],isClearable:!1,prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"disabled-timezone"},f.eb)})):null)):null,(null==o?void 0:o.ends)===j.d.AFTER_X?Object(x.jsx)(T,{path:"recurringSchedule.count",componentProps:{"data-test-subj":"count-field",id:"count",euiFieldProps:{type:"number",min:1,prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"count"},f.s),append:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"count"},f.t)}}}):null),Object(x.jsx)(u.EuiHorizontalRule,{margin:"none"}),Object(x.jsx)(u.EuiSplitPanel.Inner,null,f.T(Object(F.a)(i()(t),o,d))))}));k.displayName="RecurringSchedule";const L=r.a.memo((({isLoading:e,editMode:t})=>{const{submit:a,isSubmitting:n}=Object(l.useFormContext)();return Object(x.jsx)(u.EuiButton,{"data-test-subj":"create-submit",fill:!0,isDisabled:e||n,isLoading:e||n,onClick:a},t?f.Ab:f.jb)}));L.displayName="SubmitButton";var R=a(51);const D=(e,t,a)=>{var n;const r=Object(I.a)(e),s={dtstart:e.toISOString(),tzid:t};if(!a)return{...s,freq:g.a.YEARLY,count:1};let i=a;"CUSTOM"!==a.frequency&&(i={...a,...r[a.frequency]});const l=null!==(n=i.customFrequency)&&void 0!==n?n:i.frequency;if(s.freq=l,s.interval=i.interval,i.until&&(s.until=i.until),i.count&&(s.count=i.count),i.byweekday){const e=i.byweekday;s.byweekday=Object.keys(e).filter((t=>!0===e[t])).map((e=>j.e[Number(e)]))}return i.bymonth&&("day"===i.bymonth?s.bymonthday=[e.date()]:"weekday"===i.bymonth&&(s.byweekday=[Object(R.a)(e)])),l===g.a.YEARLY&&(s.bymonth=[e.month()+1],s.bymonthday=[e.date()]),s};var _=a(1),P=a(15),A=a(33),V=a(38);const U=e=>({title:e.title,duration:e.duration,r_rule:e.rRule,...void 0!==e.categoryIds?{category_ids:e.categoryIds}:{},...void 0!==e.scopedQuery?{scoped_query:e.scopedQuery}:{}}),q=b.i18n.translate("xpack.alerting.maintenanceWindowsCreateFailureWithoutMessage",{defaultMessage:"Failed to create maintenance window"});const z=e=>({title:e.title,duration:e.duration,r_rule:e.rRule,...void 0!==e.categoryIds?{category_ids:e.categoryIds}:{},...void 0!==e.scopedQuery?{scoped_query:e.scopedQuery}:{}});var N=a(4),W=a(36),B=a.n(W),Q=a(6);function Y(e,t,a){const n=Object(Q.get)(e,t);let r=i()();n&&i()(n).isValid()&&(r=i()(n));const s=a&&a.length>0?i()().tz(a[0]).year(r.year()).month(r.month()).date(r.date()).hour(r.hour()).minute(r.minute()).second(r.second()).millisecond(r.millisecond()).utcOffset():r.utcOffset();return{selected:r.clone().utcOffset(s),utcOffset:s}}const G=r.a.memo((({fields:e,timezone:t,showTimeSelect:a=!0,...s})=>{const[o]=Object(n.useState)(i()()),{setFieldValue:c}=Object(l.useFormContext)(),[d]=Object(l.useFormData)({watch:[e.startDate.path,e.endDate.path]}),{selected:b,utcOffset:p}=Y(d,e.startDate.path,t),{selected:m,utcOffset:g}=Y(d,e.endDate.path,t),j=Object(n.useCallback)((t=>{if(t&&t.isAfter(m)){const a=i()(t).add(30,"minutes");c(e.endDate.path,a)}c(e.startDate.path,t?t.toISOString():t)}),[c,m,e.endDate.path,e.startDate.path]),h=Object(n.useCallback)((t=>{c(e.endDate.path,t?t.toISOString():t)}),[c,e.endDate.path]),y=b.isAfter(m);return Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiFormRow,B()({label:e.startDate.label},s,{fullWidth:!0}),Object(x.jsx)(u.EuiDatePickerRange,{isInvalid:y,startDateControl:Object(x.jsx)(u.EuiDatePicker,{selected:b,onChange:e=>e&&j(e),startDate:b,endDate:m,"aria-label":"Start date",showTimeSelect:a,minDate:o,utcOffset:p}),endDateControl:Object(x.jsx)(u.EuiDatePicker,{selected:m,onChange:e=>e&&h(e),startDate:b,endDate:m,"aria-label":"End date",showTimeSelect:a,minDate:o,utcOffset:g}),fullWidth:!0})),y?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiSpacer,{size:"xs"}),Object(x.jsx)(u.EuiText,{size:"xs",color:"danger"},f.W)):null)}));G.displayName="DatePickerRangeField";var H=a(52);const K=[{id:p.observability.id,label:f.n,"data-test-subj":`option-${p.observability.id}`},{id:p.security.id,label:f.o,"data-test-subj":`option-${p.security.id}`},{id:p.management.id,label:f.r,"data-test-subj":`option-${p.management.id}`}].sort(((e,t)=>e.id.localeCompare(t.id))),$=e=>{const{selectedCategories:t,availableCategories:a,errors:r=[],isLoading:s=!1,isScopedQueryEnabled:i=!1,onChange:l}=e,o=Object(n.useMemo)((()=>t.reduce(((e,t)=>(e[t]=!0,e)),{})),[t]),c=Object(n.useMemo)((()=>K.map((e=>({...e,disabled:!a.includes(e.id)}))).sort(((e,t)=>e.id.localeCompare(t.id)))),[a]),d=Object(n.useCallback)((e=>{t.includes(e)?l(t.filter((t=>t!==e))):l([...t,e])}),[t,l]),b=Object(n.useCallback)((e=>{l([e])}),[l]),p=Object(n.useMemo)((()=>i?Object(x.jsx)(u.EuiRadioGroup,{"data-test-subj":"maintenanceWindowCategorySelectionRadioGroup",options:c,idSelected:t[0],onChange:b}):Object(x.jsx)(u.EuiCheckboxGroup,{"data-test-subj":"maintenanceWindowCategorySelectionCheckboxGroup",options:c,idToSelectedMap:o,onChange:d})),[i,c,t,o,d,b]);return s?Object(x.jsx)(u.EuiFlexGroup,{justifyContent:"spaceAround","data-test-subj":"maintenanceWindowCategorySelectionLoading"},Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(u.EuiLoadingSpinner,{size:"l"}))):Object(x.jsx)(u.EuiFlexGroup,{"data-test-subj":"maintenanceWindowCategorySelection"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiText,{size:"s"},Object(x.jsx)("h4",null,f.q),Object(x.jsx)("p",null,Object(x.jsx)(u.EuiTextColor,{color:"subdued"},f.p)))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiFormRow,{label:f.l,isInvalid:!!r.length,error:r[0]},p)))},X=e=>{const{checked:t,onEnabledChange:a}=e,r=Object(n.useCallback)((e=>{a(e.target.checked)}),[a]);return Object(x.jsx)(u.EuiFlexGroup,{"data-test-subj":"maintenanceWindowScopedQuerySwitch",direction:"column"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiText,{size:"s"},Object(x.jsx)("h4",null,f.ab),Object(x.jsx)("p",null,Object(x.jsx)(u.EuiTextColor,{color:"subdued"},f.X)))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiSwitch,{label:f.bb,checked:t,onChange:r})))};b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.activeLabel",{defaultMessage:"Active"}),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.recoveredLabel",{defaultMessage:"Recovered"}),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.flappingLabel",{defaultMessage:"Flapping"}),b.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.untrackedLabel",{defaultMessage:"Untracked"}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.fetchError",{defaultMessage:"Failed to check if maintenance windows are active"}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.fetchErrorDescription",{defaultMessage:"Rule notifications are stopped while maintenance windows are running."}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActiveDescription",{defaultMessage:"Rule notifications are stopped while maintenance windows are running."}),b.i18n.translate("alertsUIShared.maintenanceWindowCallout.maintenanceWindowActiveNoCategories",{defaultMessage:"One or more maintenance windows are running"}),p.management,b.i18n.translate("alertsUIShared.maintenanceWindowCallout.managementCategoryLabel",{defaultMessage:"Stack"}),a(63);b.i18n.translate("alertsUIShared.components.addMessageVariables.loadingMessage",{defaultMessage:"Loading variables"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.noVariablesFound",{defaultMessage:"No variables found"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.noVariablesAvailable",{defaultMessage:"No variables available"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.deprecatedVariablesAreShown",{defaultMessage:"Deprecated variables are shown"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.deprecatedVariablesAreHidden",{defaultMessage:"Deprecated variables are hidden"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.hideDeprecatedVariables",{defaultMessage:"Hide"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.showAllDeprecatedVariables",{defaultMessage:"Show all"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.addVariablePopoverButton",{defaultMessage:"Add variable"}),b.i18n.translate("alertsUIShared.components.addMessageVariables.addRuleVariableTitle",{defaultMessage:"Add variable"});const J={APM:"apm",LOGS:"logs",INFRASTRUCTURE:"infrastructure",OBSERVABILITY:"observability",SLO:"slo",SIEM:"siem",UPTIME:"uptime",ML:"ml",STACK_ALERTS:"stackAlerts",EXAMPLE:"AlertingExample",MONITORING:"monitoring"},Z=(Object.values(J).map((e=>e)),"alerts"),ee="/internal/rac/alerts",te=[],ae=[];const ne=b.i18n.translate("alertsUIShared.component.alertsSearchBar.placeholder",{defaultMessage:"Search alerts (e.g. kibana.alert.evaluation.threshold > 75)"});const re={type:"alerts",fields:{}},se=({appName:e,disableQueryLanguageSwitcher:t=!1,featureIds:a,ruleTypeId:r,query:s,filters:i,onQueryChange:l,onQuerySubmit:o,onFiltersUpdated:u,rangeFrom:c,rangeTo:d,showFilterBar:p=!1,showDatePicker:m=!0,showSubmitButton:g=!0,placeholder:f=ne,submitOnBlur:j=!1,http:h,toasts:y,unifiedSearchBar:O,dataViewsService:x})=>{var v;const[S,E]=Object(n.useState)("kuery"),{dataViews:w,loading:F}=function(e){const{http:t,dataViewsService:a,toasts:r,featureIds:s}=e,[i,l]=Object(n.useState)([]),o=s.sort().join(","),u=1===s.length&&s.includes(J.SIEM),c=s.length>1&&s.includes(J.SIEM),d=s.length>0&&!u&&!c,p=()=>{r.addDanger(b.i18n.translate("alertsUIShared.hooks.useAlertDataView.useAlertDataMessage",{defaultMessage:"Unable to load alert data view"}))},{data:m,isSuccess:g,isInitialLoading:f,isLoading:j}=Object(P.useQuery)({queryKey:["loadAlertIndexNames",o],queryFn:()=>async function({http:e,features:t}){const{index_name:a=[]}=await e.get(`${ee}/index`,{query:{features:t}});return a}({http:t,features:o}),onError:p,refetchOnWindowFocus:!1,enabled:s.length>0&&!c}),{data:h,isSuccess:y,isInitialLoading:O,isLoading:x}=Object(P.useQuery)({queryKey:["loadAlertFields",o],queryFn:()=>async function({http:e,featureIds:t}){const{fields:a=[]}=await e.get(`${ee}/browser_fields`,{query:{featureIds:t}});return a}({http:t,featureIds:s}),onError:p,refetchOnWindowFocus:!1,enabled:d});return Object(n.useEffect)((()=>()=>{i.map((e=>{a.clearInstanceCache(e.id)}))}),[i]),Object(n.useEffect)((()=>{u&&g&&async function(){const e=await a.create({title:(null!=m?m:[]).join(","),allowNoIndex:!0});l([e])}()}),[a,m,g,u]),Object(n.useEffect)((()=>{var e;m&&h&&!u&&y&&g&&l([{title:(null!=m?m:[]).join(","),fieldFormatMap:{},fields:null===(e=null!=h?h:[])||void 0===e?void 0:e.map((e=>({...e,...e.esTypes&&e.esTypes.includes("flattened")?{type:"string"}:{}})))}])}),[h,a,m,g,u,y]),Object(n.useMemo)((()=>({dataViews:i,loading:0!==s.length&&!c&&(u?f||j||0===i.length:f||j||O||x)})),[i,s.length,c,u,f,j,O,x])}({featureIds:null!=a?a:[],http:h,toasts:y,dataViewsService:x}),{aadFields:I,loading:T}=function(e){const{ruleTypeId:t,http:a,toasts:r}=e,{data:s=ae,isInitialLoading:i,isLoading:l}=Object(P.useQuery)({queryKey:["loadAlertAadFieldsPerRuleType",t],queryFn:()=>async function({http:e,ruleTypeId:t}){return t?await e.get(`${ee}/aad_fields`,{query:{ruleTypeId:t}}):ae}({http:a,ruleTypeId:t}),onError:()=>{r.addDanger(b.i18n.translate("alertsUIShared.hooks.useRuleAADFields.errorMessage",{defaultMessage:"Unable to load alert fields per rule type"}))},refetchOnWindowFocus:!1,enabled:void 0!==t});return Object(n.useMemo)((()=>({aadFields:s,loading:void 0!==t&&(i||l)})),[s,i,l,t])}({ruleTypeId:r,http:h,toasts:y}),M=r&&null!=I&&I.length?[{title:r,fields:I}]:w,C=(({http:e,toasts:t,filteredRuleTypes:a,registeredRuleTypes:r,enabled:s=!0})=>{const{data:i,isSuccess:l,isFetching:o,isInitialLoading:u,isLoading:c,error:d}=Object(P.useQuery)({queryKey:["loadRuleTypes"],queryFn:()=>async function({http:e}){return(await e.get("/api/alerting/rule_types")).map((e=>(({enabled_in_license:e,recovery_action_group:t,action_groups:a,default_action_group_id:n,minimum_license_required:r,action_variables:s,authorized_consumers:i,rule_task_timeout:l,does_set_recovery_context:o,default_schedule_interval:u,has_alerts_mappings:c,has_fields_for_a_a_d:d,...b})=>({enabledInLicense:e,recoveryActionGroup:t,actionGroups:a,defaultActionGroupId:n,minimumLicenseRequired:r,actionVariables:s,authorizedConsumers:i,ruleTaskTimeout:l,doesSetRecoveryContext:o,defaultScheduleInterval:u,hasAlertsMappings:c,hasFieldsForAAD:d,...b}))(e)))}({http:e}),onError:e=>{e&&t.addDanger(b.i18n.translate("alertsUIShared.hooks.useLoadRuleTypesQuery.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"}))},refetchOnWindowFocus:!1,staleTime:6e4,enabled:s}),p=Object(n.useMemo)((()=>i?(({data:e,filteredRuleTypes:t,registeredRuleTypes:a})=>{const n=new Map,r=a?Object(Q.keyBy)(a,"id"):{};for(const t of e){const e={...t};a?r[t.id]&&(e.description=r[t.id].description,n.set(t.id,e)):n.set(t.id,e)}let s=n;return null!=t&&t.length&&(s=new Map([...n].filter((([e,a])=>t.includes(a.id))))),s})({data:i,filteredRuleTypes:a,registeredRuleTypes:r}):new Map),[i,a,r]),m=p.size>0,g=Object(n.useMemo)((()=>[...p.values()]),[p]),f=g.some((e=>{var t;return null===(t=e.authorizedConsumers[Z])||void 0===t?void 0:t.all})),j=f||g.some((e=>{var t;return null===(t=e.authorizedConsumers[Z])||void 0===t?void 0:t.read}));return{ruleTypesState:{initialLoad:c||u,isLoading:c||o,data:p,error:d},hasAnyAuthorizedRuleType:m,authorizedRuleTypes:g,authorizedToReadAnyRules:j,authorizedToCreateAnyRules:f,isSuccess:l}})({filteredRuleTypes:void 0!==r?[r]:[],enabled:void 0!==r,http:h,toasts:y}),k=a&&1===a.length&&a.includes(J.SIEM)||C&&r&&(null===(v=C.ruleTypesState.data.get(r))||void 0===v?void 0:v.producer)===J.SIEM,L=Object(n.useCallback)((({dateRange:e,query:t})=>{var a;o({dateRange:e,query:"string"==typeof(null==t?void 0:t.query)?t.query:void 0}),E(null!==(a=null==t?void 0:t.language)&&void 0!==a?a:"kuery")}),[o,E]),R=Object(n.useCallback)((({dateRange:e,query:t})=>{var a;null==l||l({dateRange:e,query:"string"==typeof(null==t?void 0:t.query)?t.query:void 0}),E(null!==(a=null==t?void 0:t.language)&&void 0!==a?a:"kuery")}),[l,E]);return O({appName:e,disableQueryLanguageSwitcher:t,indexPatterns:F||T?te:M,placeholder:f,query:{query:null!=s?s:"",language:S},filters:i,dateRangeFrom:c,dateRangeTo:d,displayStyle:"inPage",showFilterBar:p,onQuerySubmit:L,onFiltersUpdated:u,onRefresh:({dateRange:e})=>{o({dateRange:e})},showDatePicker:m,showQueryInput:!0,saveQueryMenuVisibility:"allowed_by_app_privilege",showSubmitButton:g,submitOnBlur:j,onQueryChange:R,suggestionsAbstraction:k?void 0:re})};a(22),b.i18n.translate("alertsUIShared.alertFieldsTable.filter.placeholder",{defaultMessage:"Filter by Field, Value, or Description..."}),b.i18n.translate("alertsUIShared.alertFieldsTable.field",{defaultMessage:"Field"}),b.i18n.translate("alertsUIShared.alertFieldsTable.value",{defaultMessage:"Value"});var ie=a(7);const le=r.a.memo((e=>{const{featureIds:t,query:a,filters:r,errors:s=[],isLoading:i,isEnabled:l=!0,onQueryChange:o,onFiltersChange:c}=e,{http:d,data:p,notifications:{toasts:m},unifiedSearch:{ui:{SearchBar:g}}}=Object(A.a)().services,f=Object(n.useCallback)((({query:e})=>{o(e||"")}),[o]);return i?Object(x.jsx)(u.EuiFlexGroup,{justifyContent:"spaceAround","data-test-subj":"maintenanceWindowScopedQueryLoading"},Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(u.EuiLoadingSpinner,{size:"l"}))):l?Object(x.jsx)(u.EuiFlexGroup,{"data-test-subj":"maintenanceWindowScopeQuery",direction:"column"},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiFormRow,{fullWidth:!0,isInvalid:0!==s.length,error:s[0]},Object(x.jsx)(se,{appName:ie.a.getI18nName(b.i18n),featureIds:t,disableQueryLanguageSwitcher:!0,query:a,filters:r,onQueryChange:f,onQuerySubmit:f,onFiltersUpdated:c,showFilterBar:!0,submitOnBlur:!0,showDatePicker:!1,showSubmitButton:!1,http:d,toasts:m,unifiedSearchBar:g,dataViewsService:p.dataViews})))):null}));var oe;const ue=Object(l.getUseField)({component:o.Field}),ce=[p.observability.id,p.security.id,p.management.id],de=null!==(oe=d.map((e=>({label:e}))))&&void 0!==oe?oe:[{label:"UTC"}],be=r.a.memo((e=>{var t,a;const{onCancel:s,onSuccess:o,initialValue:c,maintenanceWindowId:d,scopedQueryFeatureFlag:p=!0}=e,[m]=Object(n.useState)(i()().toISOString()),[g]=Object(n.useState)(i()().add(30,"minutes").toISOString()),[j,h]=Object(n.useState)(!1),{defaultTimezone:O,isBrowser:v}=(()=>{const e=Object(A.b)("dateFormat:tz");var t,a;return e&&"Browser"!==e?{defaultTimezone:e,isBrowser:!1}:{defaultTimezone:null!==(t=null===(a=i.a.tz)||void 0===a?void 0:a.guess())&&void 0!==t?t:"UTC",isBrowser:!0}})(),[S,E]=Object(n.useState)(!(null==c||!c.scopedQuery)),[w,F]=Object(n.useState)((null==c||null===(t=c.scopedQuery)||void 0===t?void 0:t.kql)||""),[I,T]=Object(n.useState)((null==c||null===(a=c.scopedQuery)||void 0===a?void 0:a.filters)||[]),[M,C]=Object(n.useState)([]),R=Object(n.useRef)(!1),W=Object(n.useRef)([]),B=void 0!==c&&void 0!==d,Q=Object(n.useCallback)((e=>{var t;null!==(t=e.body)&&void 0!==t&&t.message&&Object(_.isScopedQueryError)(e.body.message)&&C([f.Z])}),[]),{mutate:Y,isLoading:K}=function(e){const{onError:t}=e||{},{http:a,notifications:{toasts:n}}=Object(A.a)().services;return Object(P.useMutation)((e=>async function({http:e,createParams:t}){const a=await e.post(`${_.INTERNAL_BASE_ALERTING_API_PATH}/rules/maintenance_window`,{body:JSON.stringify(U(t))});return Object(V.a)(a)}({http:a,createParams:e})),{onSuccess:e=>{n.addSuccess(b.i18n.translate("xpack.alerting.maintenanceWindowsCreateSuccess",{defaultMessage:"Created maintenance window ''{title}''",values:{title:e.title}}))},onError:e=>{var a,r,s;n.addDanger((s=400===(null===(a=e.body)||void 0===a?void 0:a.statusCode)?null===(r=e.body)||void 0===r?void 0:r.message:"")?(e=>b.i18n.translate("xpack.alerting.maintenanceWindowsCreateFailureWithMessage",{defaultMessage:"Failed to create maintenance window: {message}",values:{message:e}}))(s):q),null==t||t(e)}})}({onError:Q}),{mutate:J,isLoading:Z}=function(e){const{onError:t}=e||{},{http:a,notifications:{toasts:n}}=Object(A.a)().services;return Object(P.useMutation)((({maintenanceWindowId:e,updateParams:t})=>async function({http:e,maintenanceWindowId:t,updateParams:a}){const n=await e.post(`${_.INTERNAL_BASE_ALERTING_API_PATH}/rules/maintenance_window/${encodeURIComponent(t)}`,{body:JSON.stringify(z(a))});return Object(V.a)(n)}({http:a,maintenanceWindowId:e,updateParams:t})),{onSuccess:e=>{n.addSuccess(b.i18n.translate("xpack.alerting.maintenanceWindowsUpdateSuccess",{defaultMessage:"Updated maintenance window ''{title}''",values:{title:e.title}}))},onError:e=>{n.addDanger(b.i18n.translate("xpack.alerting.maintenanceWindowsUpdateFailure",{defaultMessage:"Failed to update maintenance window."})),null==t||t(e)}})}({onError:Q}),{mutate:ee}=Object(H.a)(),{data:te,isLoading:ae}=(()=>{const{http:e,notifications:{toasts:t}}=Object(A.a)().services,{isLoading:a,isFetching:n,data:r}=Object(P.useQuery)({queryKey:["useGetRuleTypes"],queryFn:()=>Object(N.c)({http:e}),onError:()=>{t.addDanger(b.i18n.translate("xpack.alerting.hooks.useGetRuleTypes.error",{defaultMessage:"Unable to load rule types."}))},refetchOnWindowFocus:!1});return{data:r,isLoading:a||n}})(),ne=Object(n.useMemo)((()=>S&&p&&(w||I.length)?{kql:w,filters:I}:null),[S,p,w,I]),re=Object(n.useCallback)((async(e,t)=>{if(!t||0!==M.length)return;if(S&&!ne)return void C([f.Y]);const a=i()(e.startDate),n=i()(e.endDate),r={title:e.title,duration:n.diff(a),rRule:D(a,e.timezone?e.timezone[0]:O,e.recurringSchedule),categoryIds:e.categoryIds,scopedQuery:ne};B?J({maintenanceWindowId:d,updateParams:r},{onSuccess:o}):Y(r,{onSuccess:o})}),[B,S,M,d,J,Y,o,O,ne]),{form:se}=Object(l.useForm)({defaultValue:c,options:{stripEmptyFields:!1},schema:y,onSubmit:re}),[{recurring:ie,timezone:oe,categoryIds:be},pe,me]=Object(l.useFormData)({form:se,watch:["recurring","timezone","categoryIds","scopedQuery"]}),ge=ie||!1,fe=v||void 0!==(null==c?void 0:c.timezone),je=Object(n.useCallback)((()=>h(!1)),[]),he=Object(n.useCallback)((()=>h(!0)),[]),{setFieldValue:ye}=se,Oe=Object(n.useMemo)((()=>te?te.filter((e=>ce.includes(e.category))):[]),[te]),xe=Object(n.useMemo)((()=>[...new Set(Oe.map((e=>e.category)))]),[Oe]),ve=Object(n.useMemo)((()=>{if(!Array.isArray(Oe)||!Array.isArray(be)||!me)return[];const e=new Set;return Oe.forEach((t=>{be.includes(t.category)&&e.add(t.producer)})),[...e]}),[Oe,be,me]),Se=Object(n.useCallback)((e=>{be&&ye("categoryIds",e)}),[be,ye]),Ee=Object(n.useCallback)((e=>{ye("categoryIds",e?[(null==be?void 0:be.sort()[0])||xe.sort()[0]]:W.current),E(e)}),[be,xe,ye]),we=Object(n.useCallback)((e=>{M.length&&C([]),F(e)}),[M]),Fe=Object(n.useMemo)((()=>{let e;return j&&(e=Object(x.jsx)(u.EuiConfirmModal,{title:f.d,onCancel:je,onConfirm:()=>{je(),ee({maintenanceWindowId:d,archive:!0},{onSuccess:o})},cancelButtonText:f.e,confirmButtonText:f.d,defaultFocusedButton:"confirm",buttonColor:"danger"},Object(x.jsx)("p",null,f.b))),e}),[je,ee,j,d,o]);return Object(n.useEffect)((()=>{B||me&&(R.current||Oe.length&&(ye("categoryIds",[...new Set(Oe.map((e=>e.category)))]),R.current=!0))}),[B,Oe,me]),Object(n.useEffect)((()=>{B&&me&&(R.current||Array.isArray(be)||(ye("categoryIds",ce),R.current=!0))}),[B,be,me]),Object(n.useEffect)((()=>{!S&&Array.isArray(be)&&(W.current=be)}),[be,S]),Object(x.jsx)(l.Form,{form:se},Object(x.jsx)(u.EuiFlexGroup,{direction:"column",responsive:!1},Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(ue,{path:"title",componentProps:{"data-test-subj":"title-field",euiFieldProps:{autoFocus:!0}}})),Object(x.jsx)(u.EuiSpacer,{size:"xs"}),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiText,{size:"s"},Object(x.jsx)("h4",null,f.db),Object(x.jsx)("p",null,Object(x.jsx)(u.EuiTextColor,{color:"subdued"},f.cb)))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiFlexGroup,{alignItems:"flexEnd",responsive:!1},Object(x.jsx)(u.EuiFlexItem,{grow:3},Object(x.jsx)(l.UseMultiFields,{fields:{startDate:{path:"startDate",config:{label:f.V,defaultValue:m,validations:[]}},endDate:{path:"endDate",config:{label:"",defaultValue:g,validations:[]}}}},(e=>Object(x.jsx)(G,{fields:e,timezone:null!=oe?oe:[O],"data-test-subj":"date-field"})))),fe?Object(x.jsx)(u.EuiFlexItem,{grow:1},Object(x.jsx)(ue,{path:"timezone",config:{type:l.FIELD_TYPES.COMBO_BOX,validations:[],defaultValue:[O]},componentProps:{"data-test-subj":"timezone-field",id:"timezone",euiFieldProps:{fullWidth:!0,options:de,singleSelection:{asPlainText:!0},isClearable:!1,noSuggestions:!1,placeholder:"",prepend:Object(x.jsx)(u.EuiFormLabel,{htmlFor:"timezone"},f.eb)}}})):null)),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(ue,{path:"recurring",componentProps:{"data-test-subj":"recurring-field"}})),ge&&Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(k,{"data-test-subj":"recurring-form"})),p&&Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"}),Object(x.jsx)(ue,{path:"scopedQuery"},(()=>Object(x.jsx)(X,{checked:S,onEnabledChange:Ee})))),Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"}),Object(x.jsx)(ue,{path:"categoryIds"},(e=>Object(x.jsx)($,{isScopedQueryEnabled:S,isLoading:ae,selectedCategories:be||[],availableCategories:xe,errors:e.errors.map((e=>e.message)),onChange:Se})))),p&&Object(x.jsx)(u.EuiFlexItem,null,Object(x.jsx)(ue,{path:"scopedQuery"},(()=>Object(x.jsx)(le,{featureIds:ve,query:w,filters:I,isLoading:ae,isEnabled:S,errors:M,onQueryChange:we,onFiltersChange:T})))),Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"})),B&&Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(u.EuiCallOut,{title:f.d,color:"danger",iconType:"trash"},Object(x.jsx)("p",null,f.c),Object(x.jsx)(u.EuiButton,{fill:!0,color:"danger",onClick:he},f.a),Fe),Object(x.jsx)(u.EuiHorizontalRule,{margin:"xl"})),Object(x.jsx)(u.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",gutterSize:"l",responsive:!1},Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(u.EuiButtonEmpty,{onClick:s,size:"s","data-test-subj":"cancelMaintenanceWindow"},f.e)),Object(x.jsx)(u.EuiFlexItem,{grow:!1},Object(x.jsx)(L,{isLoading:K||Z,editMode:B}))))}));be.displayName="CreateMaintenanceWindowForm"},63:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(64);case"v8light":return a(66)}},64:function(e,t,a){var n=a(54),r=a(65);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},65:function(e,t,a){(t=a(55)(!1)).push([e.i,'.messageVariablesPanel{height:100%;-webkit-mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);max-height:320px;max-width:320px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.messageVariablesPanel::-webkit-scrollbar{height:16px;width:16px}.messageVariablesPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.messageVariablesPanel::-webkit-scrollbar-corner,.messageVariablesPanel::-webkit-scrollbar-track{background-color:#0000}.messageVariablesPanel:focus{outline:none}.messageVariablesPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}',""]),e.exports=t},66:function(e,t,a){var n=a(54),r=a(67);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[e.i,r,""]]);n(r,{insert:"head",singleton:!1}),e.exports=r.locals||{}},67:function(e,t,a){(t=a(55)(!1)).push([e.i,'.messageVariablesPanel{height:100%;-webkit-mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);mask-image:linear-gradient(180deg,#ff00001a 0,red 7.5px,red calc(100% - 7.5px),#ff00001a);max-height:320px;max-width:320px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.messageVariablesPanel::-webkit-scrollbar{height:16px;width:16px}.messageVariablesPanel::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.messageVariablesPanel::-webkit-scrollbar-corner,.messageVariablesPanel::-webkit-scrollbar-track{background-color:#0000}.messageVariablesPanel:focus{outline:none}.messageVariablesPanel[tabindex="0"]:focus:focus-visible{outline-style:auto}',""]),e.exports=t}}]);