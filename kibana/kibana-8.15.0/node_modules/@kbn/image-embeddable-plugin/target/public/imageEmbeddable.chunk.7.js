(window.imageEmbeddable_bundle_jsonpfunction=window.imageEmbeddable_bundle_jsonpfunction||[]).push([[7],{68:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var i=t(10),l=t(12),o=t(11);const d=Object(i.lazy)((()=>t.e(6).then(t.bind(null,62)))),s=e=>{var a;return Object(o.jsx)(i.Suspense,{fallback:null!==(a=e.lazyLoadFallback)&&void 0!==a?a:Object(o.jsx)(l.EuiLoadingSpinner,{size:"xl"})},Object(o.jsx)(d,e))}},71:function(e,a,t){"use strict";t.r(a),t.d(a,"ImageEditorFlyout",(function(){return O}));var i=t(12),l=t(10),o=t.n(l),d=t(11),s=t(68);const n=Object(l.lazy)((()=>t.e(5).then(t.bind(null,69)))),r=e=>Object(d.jsx)(l.Suspense,{fallback:Object(d.jsx)(i.EuiLoadingSpinner,{size:"xl"})},Object(d.jsx)(n,e));var u=t(2),g=t(20),c=t(30),b=t(51),m=t(39),j=t(27);const x=Object(d.css)({aspectRatio:"21 / 9",width:"100%",height:"auto",maxHeight:"max(20vh, 180px)"},"","");var E={name:"16z1boa",styles:"max-inline-size:none!important"};function O(e){var a;const t=!!e.initialImageConfig,{euiTheme:n}=Object(i.useEuiTheme)(),{validateUrl:O}=Object(j.b)(),[f,p]=Object(l.useState)((()=>{var a,t;return"file"===(null===(a=e.initialImageConfig)||void 0===a||null===(t=a.src)||void 0===t?void 0:t.type)?e.initialImageConfig.src.fileId:void 0})),[v,h]=Object(l.useState)((()=>{var a,t;return"file"===(null===(a=e.initialImageConfig)||void 0===a||null===(t=a.src)||void 0===t?void 0:t.type)?e.initialImageConfig.src.fileImageMeta:void 0})),[F,M]=Object(l.useState)((()=>{var a,t,i;return null!==(a=null===(t=e.initialImageConfig)||void 0===t||null===(i=t.src)||void 0===i?void 0:i.type)&&void 0!==a?a:"file"})),[C,S]=Object(l.useState)((()=>{var a,t;return"url"===(null===(a=e.initialImageConfig)||void 0===a||null===(t=a.src)||void 0===t?void 0:t.type)?e.initialImageConfig.src.url:""})),[I,y]=Object(l.useState)((()=>{var e,a;return C&&null!==(e=null===(a=O(C))||void 0===a?void 0:a.error)&&void 0!==e?e:null})),[k,T]=Object(l.useState)(!1),[L,z]=Object(l.useState)((()=>{var a,t,i;return null!==(a=null===(t=e.initialImageConfig)||void 0===t||null===(i=t.sizing)||void 0===i?void 0:i.objectFit)&&void 0!==a?a:"contain"})),[w,B]=Object(l.useState)((()=>{var a,t;return null!==(a=null===(t=e.initialImageConfig)||void 0===t?void 0:t.altText)&&void 0!==a?a:""})),[U,P,R]=Object(i.useColorPickerState)(null==e||null===(a=e.initialImageConfig)||void 0===a?void 0:a.backgroundColor),W=!!U&&!!R,A={...e.initialImageConfig,src:"url"===F?{type:"url",url:C}:{type:"file",fileId:f,fileImageMeta:v},altText:w,backgroundColor:R?void 0:U,sizing:{objectFit:L}},D=Object(m.a)(A,{validateUrl:O});return Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(i.EuiFlyoutHeader,{hasBorder:!0},Object(d.jsx)(i.EuiTitle,{size:"m"},Object(d.jsx)("h2",null,t?Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.editImagetitle",defaultMessage:"Edit image"}):Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.addImagetitle",defaultMessage:"Add image"}))),Object(d.jsx)(i.EuiSpacer,{size:"s"}),Object(d.jsx)(i.EuiTabs,{style:{marginBottom:"-25px"}},Object(d.jsx)(i.EuiTab,{onClick:()=>M("file"),isSelected:"file"===F},Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.uploadTabLabel",defaultMessage:"Upload"})),Object(d.jsx)(i.EuiTab,{onClick:()=>M("url"),isSelected:"url"===F},Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.useLinkTabLabel",defaultMessage:"Use link"})))),Object(d.jsx)(i.EuiFlyoutBody,null,"file"===F&&Object(d.jsx)(o.a.Fragment,null,D?Object(d.jsx)(b.ImageViewer,{css:x,imageConfig:A,onChange:()=>T(!0),onClear:()=>{p(void 0),h(void 0)},containerCSS:Object(d.css)("border:",n.border.thin,";background-color:",n.colors.lightestShade,";","")}):Object(d.jsx)(i.EuiFormRow,{fullWidth:!0,css:Object(d.css)(".lazy-load-fallback,.euiFilePicker__prompt{height:auto;",x,";}.lazy-load-fallback{display:flex;justify-content:center;align-items:center;}","")},Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(s.a,{kind:c.a.id,onDone:e=>{var a;return p(null===(a=e[0])||void 0===a?void 0:a.id)},immediate:!0,initialPromptText:u.i18n.translate("imageEmbeddable.imageEditor.uploadImagePromptText",{defaultMessage:"Select or drag and drop an image"}),fullWidth:!0,lazyLoadFallback:Object(d.jsx)("div",{className:"lazy-load-fallback"},Object(d.jsx)(i.EuiLoadingSpinner,{size:"xl"}))}),Object(d.jsx)("p",{style:{textAlign:"center"}},Object(d.jsx)(i.EuiLink,{onClick:()=>T(!0),"data-test-subj":"imageEmbeddableEditorSelectFiles"},Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.selectImagePromptText",defaultMessage:"Use a previously uploaded image"})))))),"url"===F&&Object(d.jsx)(o.a.Fragment,null,D?Object(d.jsx)(b.ImageViewer,{css:x,imageConfig:A,onError:()=>{y(u.i18n.translate("imageEmbeddable.imageEditor.urlFailedToLoadImageErrorMessage",{defaultMessage:"Unable to load image."}))},containerCSS:Object(d.css)("border:",n.border.thin,";background-color:",n.colors.lightestShade,";","")}):Object(d.jsx)(i.EuiEmptyPrompt,{css:E,iconType:"image",color:"subdued",title:Object(d.jsx)("p",null,Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.byURLNoImageTitle",defaultMessage:"No Image"})),titleSize:"s"}),Object(d.jsx)(i.EuiSpacer,null),Object(d.jsx)(i.EuiFormRow,{label:Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageURLInputLabel",defaultMessage:"Link to image"}),helpText:Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageURLHelpText",defaultMessage:"Supported file types: png, jpeg, webp, and avif."}),fullWidth:!0,isInvalid:!!I,error:I},Object(d.jsx)(i.EuiTextArea,{"data-test-subj":"imageEmbeddableEditorUrlInput",fullWidth:!0,compressed:!0,placeholder:u.i18n.translate("imageEmbeddable.imageEditor.imageURLPlaceholderText",{defaultMessage:"Example: https://elastic.co/my-image.png"}),value:C,onChange:e=>{const a=e.target.value,{isValid:t,error:i}=O(a);y(t?null:i),S(e.target.value)}}))),Object(d.jsx)(i.EuiSpacer,null),Object(d.jsx)(i.EuiFormRow,{label:Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageFillModeLabel",defaultMessage:"Fill mode"}),fullWidth:!0},Object(d.jsx)(i.EuiSelect,{fullWidth:!0,options:[{value:"contain",text:u.i18n.translate("imageEmbeddable.imageEditor.imageFillModeContainOptionText",{defaultMessage:"Fit maintaining aspect ratio"})},{value:"cover",text:u.i18n.translate("imageEmbeddable.imageEditor.imageFillModeCoverOptionText",{defaultMessage:"Fill maintaining aspect ratio"})},{value:"fill",text:u.i18n.translate("imageEmbeddable.imageEditor.imageFillModeFillOptionText",{defaultMessage:"Stretch to fill"})},{value:"none",text:u.i18n.translate("imageEmbeddable.imageEditor.imageFillModeNoneOptionText",{defaultMessage:"Don't resize"})}],value:L,onChange:e=>z(e.target.value)})),Object(d.jsx)(i.EuiSpacer,null),Object(d.jsx)(i.EuiFormRow,{label:Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageBackgroundColorLabel",defaultMessage:"Background color"}),fullWidth:!0,isInvalid:W,error:R},Object(d.jsx)(i.EuiColorPicker,{fullWidth:!0,onChange:P,color:U,isInvalid:W,isClearable:!0,placeholder:u.i18n.translate("imageEmbeddable.imageEditor.imageBackgroundColorPlaceholderText",{defaultMessage:"Transparent"})})),Object(d.jsx)(i.EuiSpacer,null),Object(d.jsx)(i.EuiFormRow,{label:Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageBackgroundDescriptionLabel",defaultMessage:"Description"}),fullWidth:!0},Object(d.jsx)(i.EuiTextArea,{"data-test-subj":"imageEmbeddableEditorAltInput",fullWidth:!0,compressed:!0,value:w,maxLength:1e3,placeholder:u.i18n.translate("imageEmbeddable.imageEditor.imageAltInputPlaceholderText",{defaultMessage:"Alt text that describes the image"}),onChange:e=>{B(e.target.value)}}))),Object(d.jsx)(i.EuiFlyoutFooter,null,Object(d.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(d.jsx)(i.EuiFlexItem,{grow:!1},Object(d.jsx)(i.EuiButtonEmpty,{iconType:"cross",onClick:e.onCancel,flush:"left"},Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageBackgroundCloseButtonText",defaultMessage:"Close"}))),Object(d.jsx)(i.EuiFlexItem,{grow:!1},Object(d.jsx)(i.EuiButton,{onClick:()=>{D&&e.onSave(A)},fill:!0,isDisabled:!D,"data-test-subj":"imageEmbeddableEditorSave"},Object(d.jsx)(g.FormattedMessage,{id:"imageEmbeddable.imageEditor.imageBackgroundSaveImageButtonText",defaultMessage:"Save"}))))),k&&Object(d.jsx)(r,{kind:c.a.id,shouldAllowDelete:a=>{var t;return!!e.user&&e.user.profile_uid===(null===(t=a.user)||void 0===t?void 0:t.id)},multiple:!1,onClose:()=>{T(!1)},onDone:([e])=>{p(e.id),h(e.meta),T(!1)}}))}}}]);