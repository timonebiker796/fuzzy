(window.imageEmbeddable_bundle_jsonpfunction=window.imageEmbeddable_bundle_jsonpfunction||[]).push([[4],{26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(10),o=r.__importDefault(n(35));t.default=function(e,t){var n=i.useState(t),r=n[0],a=n[1];return o.default((function(){var t=e.subscribe(a);return function(){return t.unsubscribe()}}),[e]),r}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(10);const i=Object(r.createContext)(null),o=()=>{const e=Object(r.useContext)(i);if(!e)throw new Error("ImageViewerContext is not found!");return e}},28:function(e,t,n){e.exports=n(14)(4)},29:function(e,t,n){e.exports=n(14)(2)},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=n(19).DefaultFileKind.kind},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2);const i=/^(?:(?:https?):|[^&:/?#]*(?:[/?#]|$))/gi,o=r.i18n.translate("imageEmbeddable.imageEditor.urlFormatGeneralErrorMessage",{defaultMessage:"Invalid format. Example: {exampleUrl}",values:{exampleUrl:"https://elastic.co/my-image.png"}}),a=r.i18n.translate("imageEmbeddable.imageEditor.urlFormatExternalErrorMessage",{defaultMessage:'This URL is not allowed by your administrator. Refer to "externalUrl.policy" configuration.'});function s(e){return t=>{if(!t)return{isValid:!1,error:o};try{if(new URL(t),!t.match(i))throw new Error;return e.validateUrl(t)?{isValid:!0}:{isValid:!1,error:a}}catch(e){return{isValid:!1,error:o}}}}},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=i},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var r=void 0;t.setEuiDevProviderWarning=function(e){return r=e},t.getEuiDevProviderWarning=function(){return r},t.emitEuiProviderWarning=function(e){if("function"==typeof r)return r(e);switch(r){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},40:function(e,t,n){"use strict";n.r(t),n.d(t,"openImageEditor",(function(){return F}));var r=n(10),i=n(41),o=n(13),a=n.n(o),s=n(28),u=n.n(s),l=n(15),c=n(36),d=n(26),f=n.n(d),b=n(16),m=n.n(b),v=n(12);const g="eui-global",y="eui-utilities",j={darkMode:!1};var O=n(11);const h=[v.euiStylisPrefixer],E=m()({key:"css",stylisPlugins:h,container:document.querySelector('meta[name="emotion"]')}),x=m()({key:g,stylisPlugins:h,container:document.querySelector(`meta[name="${g}"]`)}),p=m()({key:y,stylisPlugins:h,container:document.querySelector(`meta[name="${y}"]`)});E.compat=!0,x.compat=!0,p.compat=!0;const w={default:E,global:x,utility:p},P=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:i,children:o})=>{const a=f()(e,j),s=Object(r.useMemo)((()=>(e=>e.darkMode?v.COLOR_MODES_STANDARD.dark:v.COLOR_MODES_STANDARD.light)(a)),[a]),u=n||s,l=!1!==t&&void 0;return Object(O.jsx)(v.EuiProvider,{cache:w,modify:i,colorMode:u,globalStyles:l,utilityClasses:l},o)},C=({children:e,i18n:t,...n})=>Object(l.useIsNestedEuiProvider)()?(Object(c.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(O.jsx)(t.Context,null,e)):Object(O.jsx)(P,n,Object(O.jsx)(t.Context,null,e));var _=n(18);const D=({children:e,...t})=>Object(O.jsx)(C,u()({globalStyles:!1},t),Object(O.jsx)(_.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(O.jsx)(_.KibanaErrorBoundary,null,e)));n(29),n(2),r.Component;var M=n(45),S=n(30),k=n(0),R=n(33),U=n(27);const F=async({parentApi:e,initialImageConfig:t})=>{const{ImageEditorFlyout:r}=await Promise.all([n.e(1),n.e(7)]).then(n.bind(null,71)),{overlays:o,theme:s,i18n:u,http:l,security:c}=k.a,d=await c.authc.getCurrentUser(),f=k.b.filesClientFactory.asUnscoped(),b=Object(i.tracksOverlays)(e)?e:void 0;return new Promise(((e,n)=>{const i=()=>{n(),c.close(),null==b||b.clearOverlays()},c=o.openFlyout((m=Object(O.jsx)(M.a,{client:f},Object(O.jsx)(U.a.Provider,{value:{getImageDownloadHref:e=>f.getDownloadHref({id:e,fileKind:S.a.id}),validateUrl:Object(R.a)(l.externalUrl)}},Object(O.jsx)(r,{user:d,onCancel:i,onSave:t=>{e(t),c.close(),null==b||b.clearOverlays()},initialImageConfig:t}))),v={theme:s,i18n:u},e=>(a.a.render(Object(O.jsx)(D,v,m),e),()=>a.a.unmountComponentAtNode(e))),{onClose:()=>{i()},ownFocus:!0,"data-test-subj":"createImageEmbeddableFlyout"});var m,v;null==b||b.openOverlay(c)}))}},45:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=n(10),i=n(11);const o=Object(r.createContext)(null),a=()=>{const e=Object(r.useContext)(o);if(!e)throw new Error("FilesContext is not found!");return e},s=({client:e,children:t})=>Object(i.jsx)(o.Provider,{value:{client:e}},t)}}]);