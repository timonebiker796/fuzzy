/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[1],{101:function(e,t,a){"use strict";function i(e){return e.hasOwnProperty("existsInDocs")}a.d(t,"a",(function(){return i}))},102:function(e,t,a){"use strict";var i=a(127);a.d(t,"a",(function(){return i.b}))},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return U}));var i=a(0),s=a.n(i),n=a(10),l=a(4),r=a(5),o=a(1),d=a(150),u=a.n(d),c=a(6),m=a(11),p=a(291),x=a(25),b=a(65),j=a(101);const f=({config:e,showIcon:t,totalCount:a})=>{const{stats:i,type:l}=e,{services:{data:{fieldFormats:r}}}=Object(b.a)();if(void 0===i)return null;const{count:d,sampleCount:u}=i,f=Math.min(null!=u?u:1/0,null!=a?a:1/0),g=null!=d?d:Object(j.a)(e)&&!0===e.existsInDocs?void 0:0,v=void 0!==g&&void 0!==f?`(${0===f?0:Object(p.a)(g/f*100)}%)`:null,h=Object(o.jsx)(n.EuiText,{size:"xs"},r.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(g)," ",v),O=l===c.i.TEXT?Object(o.jsx)(x.FormattedMessage,{id:"xpack.dataVisualizer.sampledPercentageForTextFieldsMsg",defaultMessage:"The % of documents for text fields is calculated from a sample of {sampledDocumentsFormatted} {sampledDocuments, plural, one {record} other {records}}.",values:{sampledDocuments:u,sampledDocumentsFormatted:Object(o.jsx)("strong",null,r.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(u))}}):null,T=t?l===c.i.TEXT?Object(o.jsx)(n.EuiToolTip,{content:O},Object(o.jsx)(n.EuiIcon,{type:"partial",size:"m",className:"columnHeader__icon"})):Object(o.jsx)(n.EuiIcon,{type:"document",size:"m",className:"columnHeader__icon"}):null;return void 0!==g?Object(o.jsx)(s.a.Fragment,null,T,Object(o.jsx)(n.EuiToolTip,{content:O},h)):null};var g=a(184),v=a(98);const h=({config:e})=>{const{stats:t,fieldFormat:a,fieldName:l}=e,r=`dataVisualizerDataGridChart-${l}`,d=Object(i.useMemo)((()=>Object(g.b)(null==t?void 0:t.distribution,100)),[null==t?void 0:t.distribution]),u=Object(i.useMemo)((()=>Array.isArray(d)&&void 0!==d[0].x&&void 0!==d[d.length-1].x?{min:Object(v.c)(d[0].x),max:Object(v.c)(d[d.length-1].x)}:""),[d]);return Object(o.jsx)("div",{"data-test-subj":r,style:{width:"100%"}},Object(o.jsx)("div",{className:"dataGridChart__histogram","data-test-subj":`${r}-histogram`},Object(o.jsx)(g.a,{width:100,height:10,chartData:d,fieldFormat:a,hideXAxis:!0})),Object(o.jsx)("div",{className:"dataGridChart__legend","data-test-subj":`${r}-legend`},u&&Object(o.jsx)(s.a.Fragment,null,Object(o.jsx)(n.EuiFlexGroup,{direction:"row","data-test-subj":`${r}-legend`,responsive:!1,gutterSize:"m"},Object(o.jsx)(n.EuiFlexItem,{className:"dataGridChart__legend",style:{maxWidth:75}},Object(v.d)(u.min,a)),Object(o.jsx)(n.EuiFlexItem,{className:"dataGridChart__legend"},Object(v.d)(u.max,a))))))},O=[10,25,50,100];var T=a(45),_=a.n(T),y=a(29),E=a(24);const M=e=>Object(E.a)(e,["data","id","interval","stats","type"])&&"numeric"===e.type,C=e=>Object(E.a)(e,["data","cardinality","id","type"])&&("ordinal"===e.type||"boolean"===e.type);a(205);var V=a(30),F=a.n(V),N=a(8),w=a(69),z=a.n(w),S=a(38);const k=new N.BehaviorSubject(null),D=Object(n.euiPaletteColorBlind)()[0],I=Object(n.euiPaletteColorBlind)({rotations:2})[10],G=(e,t,a=!1)=>{if("unsupported"===e.type)return l.i18n.translate("xpack.dataVisualizer.dataGridChart.histogramNotAvailable",{defaultMessage:"Chart not supported."});if(0===e.data.length)return"";var i,s,n,r;if("boolean"===e.type)return Object(o.jsx)("table",null,Object(o.jsx)("tbody",null,Object(o.jsx)("tr",null,void 0!==e.data[0]&&Object(o.jsx)("td",{className:"dataGridChart__legendBoolean"},null!==(i=null===(s=e.data[0].key_as_string)||void 0===s?void 0:s.slice(0,1))&&void 0!==i?i:""),void 0!==e.data[1]&&Object(o.jsx)("td",{className:"dataGridChart__legendBoolean"},null!==(n=null===(r=e.data[1].key_as_string)||void 0===r?void 0:r.slice(0,1))&&void 0!==n?n:""))));if(C(e)&&a)return l.i18n.translate("xpack.dataVisualizer.dataGridChart.singleTopValueLegend",{defaultMessage:"{cardinality, plural, one {# value {exampleValue}} other {# values}}",values:{cardinality:e.cardinality,exampleValue:e.data[0].key?`(${e.data[0].key})`:""}});if(C(e)&&e.cardinality<=t)return l.i18n.translate("xpack.dataVisualizer.dataGridChart.singleCategoryLegend",{defaultMessage:"{cardinality, plural, one {# category} other {# categories}}",values:{cardinality:e.cardinality}});if(C(e)&&e.cardinality>t)return l.i18n.translate("xpack.dataVisualizer.dataGridChart.topCategoriesLegend",{defaultMessage:"top {maxChartColumns} of {cardinality} categories",values:{cardinality:e.cardinality,maxChartColumns:t}});if(M(e)){const t=Math.round(100*e.stats[0])/100,a=Math.round(100*e.stats[1])/100;return t!==a?`${t} - ${a}`:""+t}return""},L={bottom:0,left:0,right:0,top:0},A={width:100,height:10},P=({chartData:e,columnType:t,dataTestSubj:a,hideLabel:i,maxChartColumns:s,isNumeric:n})=>{const{data:r,legendText:d}=((e,t,a,i)=>{const s=(e=>{if("non-aggregatable"===e)return;let t;switch(e){case"datetime":t=S.KBN_FIELD_TYPES.DATE;break;case"numeric":t=S.KBN_FIELD_TYPES.NUMBER;break;case"boolean":t=S.KBN_FIELD_TYPES.BOOLEAN;break;case"json":t=S.KBN_FIELD_TYPES.OBJECT;break;default:t=S.KBN_FIELD_TYPES.STRING}return t})(t.schema),n=z()(k),l=(e=>{switch(e){case S.KBN_FIELD_TYPES.BOOLEAN:case S.KBN_FIELD_TYPES.IP:case S.KBN_FIELD_TYPES.STRING:return"ordinal";case S.KBN_FIELD_TYPES.DATE:return"time";case S.KBN_FIELD_TYPES.NUMBER:return"linear"}})(s),r=a=>null==n||C(e)&&"ordinal"===l&&n._source[t.id]===a.key||M(e)&&"linear"===l&&n._source[t.id]>=+a.key&&n._source[t.id]<+a.key+e.interval||M(e)&&"time"===l&&1e3*F()(n._source[t.id]).unix()>=+a.key&&1e3*F()(n._source[t.id]).unix()<+a.key+e.interval?D:I;let o=[];return C(e)?o=e.data.map(((e,t)=>{var a;return{...e,x:t,key_as_string:null!==(a=e.key_as_string)&&void 0!==a?a:e.key,color:r(e)}})):M(e)&&(o=e.data.map(((e,t)=>({...e,x:t,key_as_string:e.key_as_string||e.key,color:r(e)})))),{data:o,legendText:G(e,a,i),xScaleType:l}})(e,t,s,n);return Object(o.jsx)("div",{"data-test-subj":a,style:{width:"100%"}},(u=e,!(Object(E.a)(u,["type"])&&"unsupported"===u.type)&&r.length>0&&Object(o.jsx)(y.Chart,{size:A},Object(o.jsx)(y.Settings,{baseTheme:y.LEGACY_LIGHT_THEME,xDomain:Array.from({length:s},((e,t)=>t)),theme:{chartMargins:L,chartPaddings:L,crosshair:{band:{visible:!1}}},locale:l.i18n.getLocale()}),Object(o.jsx)(y.Axis,{id:"bottom",position:y.Position.Bottom,tickFormat:e=>{var t,a;return`${null!==(t=null===(a=r[e])||void 0===a?void 0:a.key_as_string)&&void 0!==t?t:""}`},hide:!0}),Object(o.jsx)(y.BarSeries,{id:"count",xScaleType:y.ScaleType.Ordinal,yScaleType:y.ScaleType.Linear,xAccessor:"x",yAccessors:["doc_count"],data:r,styleAccessor:e=>e.datum.color}))),Object(o.jsx)("div",{className:_()("dataGridChart__legend",{"dataGridChart__legend--numeric":"number"===t.schema}),"data-test-subj":`${a}-legend`},d),!i&&Object(o.jsx)("div",{"data-test-subj":`${a}-id`},t.id));var u},R=({config:e,isNumeric:t})=>{const{stats:a}=e;if(void 0===a)return null;const{topValues:i,cardinality:s}=a;if(void 0===s||void 0===i||void 0===e.fieldName)return null;const n={cardinality:s,data:i.map((e=>{var t;return{...e,key:null===(t=e.key)||void 0===t?void 0:t.toString()}})),id:e.fieldName,type:"ordinal"},l={id:e.fieldName,schema:void 0};return Object(o.jsx)(P,{chartData:n,columnType:l,dataTestSubj:`dataVisualizerDataGridChart-${e.fieldName}`,hideLabel:!0,maxChartColumns:10,isNumeric:t})},B=({config:e})=>{const t=e.stats;return void 0===t||void 0===t.min||void 0===t.median||void 0===t.max?null:Object(o.jsx)(n.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(o.jsx)(n.EuiFlexGroup,{gutterSize:"xs"},Object(o.jsx)(n.EuiFlexItem,null,Object(o.jsx)(n.EuiText,{size:"xs"},Object(o.jsx)(x.FormattedMessage,{id:"xpack.dataVisualizer.fieldStats.minTitle",defaultMessage:"min"}))),Object(o.jsx)(n.EuiFlexItem,null,Object(o.jsx)(n.EuiText,{size:"xs"},Object(o.jsx)(x.FormattedMessage,{id:"xpack.dataVisualizer.fieldStats.medianTitle",defaultMessage:"median"}))),Object(o.jsx)(n.EuiFlexItem,null,Object(o.jsx)(n.EuiText,{size:"xs"},Object(o.jsx)(x.FormattedMessage,{id:"xpack.dataVisualizer.fieldStats.maxTitle",defaultMessage:"max"})))),Object(o.jsx)(n.EuiFlexGroup,{gutterSize:"xs"},Object(o.jsx)(n.EuiFlexItem,null,Object(o.jsx)(n.EuiText,{size:"xs"},t.min)),Object(o.jsx)(n.EuiFlexItem,null,Object(o.jsx)(n.EuiText,{size:"xs"},t.median)),Object(o.jsx)(n.EuiFlexItem,null,Object(o.jsx)(n.EuiText,{size:"xs"},t.max))))};var $=a(125);const H=({config:e})=>{const t=Object(i.useMemo)((()=>{const t=Object($.b)(e);if(t){const a=[{key:"true",key_as_string:"true",doc_count:t.trueCount},{key:"false",key_as_string:"false",doc_count:t.falseCount}];return{id:e.fieldName,cardinality:2,data:a,type:"boolean"}}}),[e]);if(!t||void 0===e.fieldName)return null;const a={id:e.fieldName,schema:void 0},s=`dataVisualizerDataGridChart-${e.fieldName}`;return Object(o.jsx)(P,{dataTestSubj:s,chartData:t,columnType:a,hideLabel:!0,maxChartColumns:10})},Y=({showIcon:e,config:t})=>{const{stats:a,type:i}=t,{services:{data:{fieldFormats:l}}}=Object(b.a)(),r=null==a?void 0:a.cardinality;if(void 0===r||void 0===a)return null;const{sampleCount:d}=a,u=i===c.i.TEXT?Object(o.jsx)(x.FormattedMessage,{id:"xpack.dataVisualizer.sampledCardinalityForTextFieldsMsg",defaultMessage:"The cardinality for text fields is calculated from a sample of {sampledDocumentsFormatted} {sampledDocuments, plural, one {record} other {records}}.",values:{sampledDocuments:d,sampledDocumentsFormatted:Object(o.jsx)("strong",null,l.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(d))}}):null,p=e?i===c.i.TEXT?Object(o.jsx)(n.EuiToolTip,{content:u},Object(o.jsx)(n.EuiIcon,{type:"partial",size:"m",className:"columnHeader__icon"})):Object(o.jsx)(n.EuiIcon,{type:"database",size:"m",className:"columnHeader__icon"}):null,j=Object(o.jsx)(n.EuiText,{size:"xs"},r);return Object(o.jsx)(s.a.Fragment,null,p,Object(o.jsx)(n.EuiToolTip,{content:u},j))};var W=a(120);a(215);const U=({items:e,pageState:t,updatePageState:a,getItemIdToExpandedRowMap:s,extendedColumns:d,showPreviewByDefault:m,onChange:p,loading:x,totalCount:b,overallStatsRunning:g,renderFieldName:v,error:T})=>{const{euiTheme:_}=Object(n.useEuiTheme)(),[y,E]=Object(i.useState)([]),[M,C]=Object(i.useState)(!1),{onTableChange:V,pagination:F,sorting:N}=function(e,t,a){const{pageIndex:s,pageSize:n,sortField:l,sortDirection:r}=t;return{onTableChange:Object(i.useCallback)((({page:e,sort:i})=>{var s,n,l,r;const o={...t,pageIndex:null!==(s=null==e?void 0:e.index)&&void 0!==s?s:t.pageIndex,pageSize:null!==(n=null==e?void 0:e.size)&&void 0!==n?n:t.pageSize,sortField:null!==(l=null==i?void 0:i.field)&&void 0!==l?l:t.sortField,sortDirection:null!==(r=null==i?void 0:i.direction)&&void 0!==r?r:t.sortDirection};a(o)}),[t,a]),pagination:Object(i.useMemo)((()=>({pageIndex:s,pageSize:n,totalItemCount:e.length,pageSizeOptions:O})),[e,s,n]),sorting:Object(i.useMemo)((()=>({sort:{field:l,direction:r}})),[l,r])}}(e,t,a),[w,z]=Object(i.useState)(null==m||m),[S,k]=Object(i.useState)(Object($.a)()),D=Object(i.useCallback)((t=>{E(t?e.map((e=>e.fieldName)).filter((e=>void 0!==e)):[]),C(t)}),[e]),I=u()(),G=Object(i.useCallback)(Object(r.throttle)((e=>{I()&&k(Object($.a)(e.width))}),500),[]),L=Object(i.useCallback)((()=>{z(!w),p&&p({showDistributions:!w})}),[p,w]),A=Object(i.useMemo)((()=>{const e=[{name:"small"!==S.breakPoint?Object(o.jsx)(n.EuiButtonIcon,{"data-test-subj":"dataVisualizerToggleDetailsForAllRowsButton "+(M?"expanded":"collapsed"),onClick:()=>D(!M),"aria-label":M?l.i18n.translate("xpack.dataVisualizer.dataGrid.collapseDetailsForAllAriaLabel",{defaultMessage:"Collapse details for all fields"}):l.i18n.translate("xpack.dataVisualizer.dataGrid.expandDetailsForAllAriaLabel",{defaultMessage:"Expand details for all fields"}),iconType:M?"arrowDown":"arrowRight"}):null,align:n.RIGHT_ALIGNMENT,width:S.expander,isExpander:!0,render:e=>{var t;const a=null!==(t=e.displayName)&&void 0!==t?t:e.fieldName;if(void 0===e.fieldName)return null;const i=y.includes(e.fieldName)?"arrowDown":"arrowRight";return Object(o.jsx)(n.EuiButtonIcon,{"data-test-subj":`dataVisualizerDetailsToggle-${e.fieldName}-${i}`,onClick:()=>function(e){if(void 0===e.fieldName)return;const t=y.indexOf(e.fieldName);-1!==t?y.splice(t,1):y.push(e.fieldName),E([...y])}(e),"aria-label":y.includes(e.fieldName)?l.i18n.translate("xpack.dataVisualizer.dataGrid.rowCollapse",{defaultMessage:"Hide details for {fieldName}",values:{fieldName:a}}):l.i18n.translate("xpack.dataVisualizer.dataGrid.rowExpand",{defaultMessage:"Show details for {fieldName}",values:{fieldName:a}}),iconType:i})},"data-test-subj":"dataVisualizerTableColumnDetailsToggle"},{field:"type",name:l.i18n.translate("xpack.dataVisualizer.dataGrid.typeColumnName",{defaultMessage:"Type"}),render:(e,t)=>{var a;return Object(o.jsx)(W.a,{type:null!==(a=t.secondaryType)&&void 0!==a?a:e,tooltipEnabled:!0})},width:S.type,sortable:!0,align:n.CENTER_ALIGNMENT,"data-test-subj":"dataVisualizerTableColumnType"},{field:"fieldName",name:l.i18n.translate("xpack.dataVisualizer.dataGrid.nameColumnName",{defaultMessage:"Name"}),sortable:!0,truncateText:!0,render:(e,t)=>{var a;const i=null!==(a=t.displayName)&&void 0!==a?a:t.fieldName;return Object(o.jsx)(n.EuiText,{size:"xs","data-test-subj":`dataVisualizerDisplayName-${t.fieldName}`},v?v(e,t):i)},align:n.LEFT_ALIGNMENT,"data-test-subj":"dataVisualizerTableColumnName"},{field:"docCount",name:Object(o.jsx)("div",{className:"columnHeader__title"},l.i18n.translate("xpack.dataVisualizer.dataGrid.documentsCountColumnName",{defaultMessage:"Documents (%)"}),Object(o.jsx)(n.EuiIconTip,{content:l.i18n.translate("xpack.dataVisualizer.dataGrid.documentsCountColumnTooltip",{defaultMessage:"Document count found is based on a smaller set of sampled records."}),type:"questionInCircle"})),render:(e,t)=>g?Object(o.jsx)(n.EuiText,{textAlign:"center"},Object(o.jsx)(n.EuiLoadingSpinner,{size:"s"})):Object(o.jsx)(f,{config:t,showIcon:S.showIcon,totalCount:b}),sortable:e=>{var t;return null==e||null===(t=e.stats)||void 0===t?void 0:t.count},align:n.LEFT_ALIGNMENT,"data-test-subj":"dataVisualizerTableColumnDocumentsCount",width:S.docCount},{field:"cardinality",name:l.i18n.translate("xpack.dataVisualizer.dataGrid.distinctValuesColumnName",{defaultMessage:"Distinct values"}),render:(e,t)=>g?Object(o.jsx)(n.EuiText,{textAlign:"center"},Object(o.jsx)(n.EuiLoadingSpinner,{size:"s"})):Object(o.jsx)(Y,{config:t,showIcon:S.showIcon}),sortable:e=>{var t;return null==e||null===(t=e.stats)||void 0===t?void 0:t.cardinality},align:n.LEFT_ALIGNMENT,"data-test-subj":"dataVisualizerTableColumnDistinctValues",width:S.distinctValues},{name:Object(o.jsx)("div",{className:"columnHeader__title"},S.showIcon?Object(o.jsx)(n.EuiIcon,{type:"visBarVertical",className:"columnHeader__icon"}):null,l.i18n.translate("xpack.dataVisualizer.dataGrid.distributionsColumnName",{defaultMessage:"Distributions"}),Object(o.jsx)(n.EuiToolTip,{content:w?l.i18n.translate("xpack.dataVisualizer.dataGrid.hideDistributionsTooltip",{defaultMessage:"Hide distributions"}):l.i18n.translate("xpack.dataVisualizer.dataGrid.showDistributionsTooltip",{defaultMessage:"Show distributions"})},Object(o.jsx)(n.EuiButtonIcon,{style:{marginLeft:4},size:"s",iconType:w?"eyeClosed":"eye",onClick:()=>L(),"aria-label":w?l.i18n.translate("xpack.dataVisualizer.dataGrid.showDistributionsAriaLabel",{defaultMessage:"Show distributions"}):l.i18n.translate("xpack.dataVisualizer.dataGrid.hideDistributionsAriaLabel",{defaultMessage:"Hide distributions"})}))),render:e=>{var t,a,i,s;return void 0===e||!1===w?null:"loading"in e&&!0===e.loading?Object(o.jsx)(n.EuiText,{textAlign:"center"},Object(o.jsx)(n.EuiLoadingSpinner,{size:"s"})):e.type!==c.i.KEYWORD&&e.type!==c.i.IP||void 0===(null===(t=e.stats)||void 0===t?void 0:t.topValues)?e.type===c.i.NUMBER||e.secondaryType===c.i.NUMBER?Object(j.a)(e)&&void 0!==(null===(a=e.stats)||void 0===a?void 0:a.distribution)?(null===(i=e.stats)||void 0===i||null===(s=i.distribution)||void 0===s?void 0:s.percentiles.length)<=2?Object(o.jsx)(R,{config:e,isNumeric:!0}):Object(o.jsx)(h,{config:e}):Object(o.jsx)(B,{config:e}):e.type===c.i.BOOLEAN?Object(o.jsx)(H,{config:e}):null:Object(o.jsx)(R,{config:e})},width:S.distributions,align:n.LEFT_ALIGNMENT,"data-test-subj":"dataVisualizerTableColumnDistribution"}];return d?[...e,...d]:e}),[M,w,a,d,S.breakPoint,D,g]),P=Object(i.useMemo)((()=>s(y,e)),[e,y,s]),U="calc(max(20%, 225px))",K="calc(max(30%, 300px))",q=Object(o.css)({thead:{position:"sticky",insetBlockStart:0,zIndex:1,backgroundColor:_.colors.emptyShade,boxShadow:`inset 0 0px 0, inset 0 -1px 0 ${_.border.color}`},".euiTableRow > .euiTableRowCell":{borderTop:0},[Object(n.useEuiMinBreakpoint)("s")]:{"& .columnHeader__title":{display:"flex",alignItems:"center"},"& .columnHeader__icon":{paddingRight:_.size.xs},"& .euiTableRow > .euiTableRowCell":{borderTop:0,borderBottom:_.border.thin},"& .euiTableCellContent":{padding:_.size.xs},"& .euiTableRow-isExpandedRow":{".euiTableRowCell":{backgroundColor:`${_.colors.emptyShade} !important`,borderTop:0,borderBottom:_.border.thin,"&:hover":{backgroundColor:`${_.colors.emptyShade} !important`}}},"& .dvSummaryTable":{".euiTableHeaderCell":{display:"none"}},"& .dvSummaryTable__wrapper":{minWidth:U,maxWidth:U,"&.dvPanel__dateSummary":{minWidth:K,maxWidth:K}},"& .dvTopValues__wrapper":{minWidth:"fit-content"},"& .dvPanel__wrapper":{"&.dvPanel--compressed":{width:U},"&.dvPanel--uniform":{minWidth:U,maxWidth:U}},"& .dvPanel__wrapper:not(:last-child)":{margin:`${_.size.xs} ${_.size.m} ${_.size.m} 0`},"& .dvPanel__wrapper:last-child":{margin:`${_.size.xs} 0 ${_.size.m} 0`},"& .dvMap__wrapper":{height:"240px"},"& .dvText__wrapper":{minWidth:U}}},"",""),J=Object(i.useMemo)((()=>!g&&T?l.i18n.translate("xpack.dataVisualizer.dataGrid.errorMessage",{defaultMessage:"An error occured fetching field statistics"}):x?l.i18n.translate("xpack.dataVisualizer.dataGrid.searchingMessage",{defaultMessage:"Searching"}):void 0),[T,x,g]);return Object(o.jsx)(n.EuiResizeObserver,{onResize:G},(t=>Object(o.jsx)("div",{"data-test-subj":"dataVisualizerTableContainer",ref:t,"data-shared-item":""},Object(o.jsx)(n.EuiInMemoryTable,{message:J,css:q,items:e,itemId:"fieldName",columns:A,pagination:F,sorting:N,itemIdToExpandedRowMap:P,onTableChange:V,"data-test-subj":"dataVisualizerTable-"+(x?"loading":"loaded"),rowProps:e=>({"data-test-subj":`dataVisualizerRow row-${e.fieldName}`})}))))}},112:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(6);function s(e,t,a){let s=e;return a&&a.length>0&&(s=s.filter((e=>a.findIndex((t=>function(e,t){return e===t.secondaryType||e===t.type}(t,e)))>-1))),t&&t.length>0&&(s=s.filter((e=>t.findIndex((t=>t===e.fieldName))>-1))),{filteredFields:s,visibleFieldsCount:s.length,visibleMetricsCount:s.filter((e=>e.type===i.i.NUMBER)).length}}},125:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));const i=e=>{const{stats:t}=e;if(void 0===t)return null;const{count:a}=t;let{trueCount:i,falseCount:s}=t;var n;return void 0!==t.trueCount&&void 0!==t.falseCount||null!=e&&null!==(n=e.stats)&&void 0!==n&&n.topValues&&e.stats.topValues.forEach((e=>{void 0!==e.doc_count&&("false"===e.key.toString().toLowerCase()&&(s=e.doc_count),"true"===e.key.toString().toLowerCase()&&(i=e.doc_count))})),void 0===a||void 0===i||void 0===s?null:{count:a,trueCount:i,falseCount:s}},s=e=>{const t={expander:"40px",type:"75px",docCount:"225px",distinctValues:"225px",distributions:"225px",showIcon:!0,breakPoint:"large"};return void 0===e?t:e<=700?{expander:"25px",type:"40px",docCount:"auto",distinctValues:"auto",distributions:"auto",showIcon:!1,breakPoint:"small"}:e<=1e3?{expander:"25px",type:"40px",docCount:"auto",distinctValues:"auto",distributions:"auto",showIcon:!1,breakPoint:"medium"}:t}},126:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(10),s=a(1);const n=()=>{const{euiTheme:e}=Object(i.useEuiTheme)();return Object(s.css)({width:"100%",paddingLeft:`calc(${e.size.base} * 3)`},"","")}},127:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u})),a(0);var i=a(10),s=a(25),n=a(4),l=a(99),r=a(80),o=a(1);const d=n.i18n.translate("xpack.dataVisualizer.dataGrid.field.examplesList.emptyExampleMessage",{defaultMessage:"(empty)"}),u=({examples:e})=>{if(null==e||!Array.isArray(e))return null;let t;return t=0===e.length?Object(o.jsx)(s.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.examplesList.noExamplesMessage",defaultMessage:"No examples were obtained for this field"}):e.map(((e,t)=>Object(o.jsx)(i.EuiListGroupItem,{size:"xs",key:`example_${t}`,label:"string"==typeof e?""===e?d:e:JSON.stringify(e)}))),Object(o.jsx)(r.a,{dataTestSubj:"dataVisualizerFieldDataExamplesList",className:"dvText__wrapper dvPanel__wrapper"},Object(o.jsx)(l.a,null,Object(o.jsx)(s.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.examplesList.title",defaultMessage:"{numExamples, plural, one {Value} other {Examples}}",values:{numExamples:e.length}})),Object(o.jsx)(i.EuiListGroup,{showToolTips:!0,maxWidth:"s",gutterSize:"none",flush:!0},t))}},128:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(10),s=a(25),n=(a(0),a(1));const l=({fieldName:e,error:t})=>Object(n.jsx)(i.EuiCallOut,{heading:"p",color:"danger",size:"s"},Object(n.jsx)(s.FormattedMessage,{id:"xpack.dataVisualizer.index.fieldStatisticsErrorMessage",defaultMessage:"Error getting statistics for field ''{fieldName}'' because {reason}",values:{fieldName:e,reason:t.message}}))},143:function(e,t,a){"use strict";a.d(t,"a",(function(){return C})),a.d(t,"b",(function(){return F})),a.d(t,"d",(function(){return S})),a.d(t,"c",(function(){return k})),a.d(t,"e",(function(){return G})),a.d(t,"f",(function(){return A})),a.d(t,"g",(function(){return P}));var i=a(0),s=a.n(i),n=a(10),l=a(29),r=a(25),o=a(291),d=a(4),u=a(45),c=a.n(u),m=a(11),p=a(1),x=a(65),b=a(98),j=a(99),f=a(80),g=a(127);function v(e){return e>=.1?`${Object(o.a)(e,1)}%`:0===e?"0%":"< 0.1%"}var h={name:"5iz1wr",styles:"width:48px"},O={name:"5iz1wr",styles:"width:48px"};const T=({stats:e,fieldFormat:t,barColor:a,compressed:s,onAddFilter:l,showSampledValues:o=!1})=>{var u,T,_;const{services:{data:{fieldFormats:y}}}=Object(x.a)();if(void 0===e||!e.topValues)return null;const{fieldName:E,sampleCount:M,approximate:C}=e,V=null!==(u=o?e.sampledValues:e.topValues)&&void 0!==u?u:[];if(0===(null==V?void 0:V.length))return null;const F=o?null!==(T=e.topValuesSampleSize)&&void 0!==T?T:0:Math.min(null!=M?M:1/0,null!==(_=e.totalDocuments)&&void 0!==_?_:1/0),N=Object(p.jsx)(n.EuiText,{color:"subdued",size:"xs"},(()=>{if(o&&void 0!==e.topValuesSampleSize)return Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValues.calculatedFromSampleValuesLabel",defaultMessage:"Calculated from {sampledDocumentsFormatted} sample {sampledDocuments, plural, one {value} other {values}}.",values:{sampledDocuments:e.topValuesSampleSize,sampledDocumentsFormatted:Object(p.jsx)("strong",null,y.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(e.topValuesSampleSize))}});const t=C?Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValues.estimatedMsg",defaultMessage:"Estimated"}):Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValues.calculatedMsg",defaultMessage:"Calculated"});return F>(null!=M?M:0)?Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValues.calculatedFromSampleRecordsLabel",defaultMessage:"{method} from {sampledDocumentsFormatted} sample {sampledDocuments, plural, one {record} other {records}}.",values:{method:t,sampledDocuments:M,sampledDocumentsFormatted:Object(p.jsx)("strong",null,y.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(M))}}):Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValues.calculatedFromTotalRecordsLabel",defaultMessage:"{method} from {totalDocumentsFormatted} {totalDocuments, plural, one {record} other {records}}.",values:{method:t,totalDocuments:F,totalDocumentsFormatted:Object(p.jsx)("strong",null,y.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(null!=F?F:0))}})})()),w=V.map((e=>({...e,percent:"number"==typeof e.percent?e.percent:e.doc_count/F}))),z=!0!==C,S=1-(w?w.reduce(((e,t)=>e+t.percent),0):0),k=Math.floor(S*(null!=M?M:0));return Object(p.jsx)(f.a,{dataTestSubj:"dataVisualizerFieldDataTopValues",className:c()("dvPanel__wrapper",s?"dvPanel--compressed":void 0)},Object(p.jsx)(j.a,null,o?Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topSampledValuesLabel",defaultMessage:"Top sampled values"}):Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValuesLabel",defaultMessage:"Top values"})),Object(p.jsx)("div",{"data-test-subj":"dataVisualizerFieldDataTopValuesContent",className:c()("fieldDataTopValuesContainer","dvTopValues__wrapper")},Array.isArray(w)?w.map((e=>{var i;const s=null!==(i=e.key_as_string)&&void 0!==i?i:e.key?e.key.toString():"",r=""===s?g.a:s;return Object(p.jsx)(n.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",key:r},Object(p.jsx)(n.EuiFlexItem,{"data-test-subj":"dataVisualizerFieldDataTopValueBar"},Object(p.jsx)(n.EuiProgress,{value:e.percent,max:1,color:a,size:"xs",label:e.key?Object(b.d)(e.key,t):r,className:c()("eui-textTruncate","topValuesValueLabelContainer"),valueText:`${e.doc_count}${void 0!==F?` (${v(100*e.percent)})`:""}`})),void 0!==E&&void 0!==r&&void 0!==l?Object(p.jsx)("div",{css:O},Object(p.jsx)(n.EuiButtonIcon,{iconSize:"s",iconType:"plusInCircle",onClick:()=>l(E,s,"+"),"aria-label":d.i18n.translate("xpack.dataVisualizer.dataGrid.field.addFilterAriaLabel",{defaultMessage:'Filter for {fieldName}: "{value}"',values:{fieldName:E,value:r}}),"data-test-subj":`dvFieldDataTopValuesAddFilterButton-${E}-${r}`,style:{minHeight:"auto",minWidth:"auto",paddingRight:2,paddingLeft:2,paddingTop:0,paddingBottom:0}}),Object(p.jsx)(n.EuiButtonIcon,{iconSize:"s",iconType:"minusInCircle",onClick:()=>l(E,s,"-"),"aria-label":d.i18n.translate("xpack.dataVisualizer.dataGrid.field.removeFilterAriaLabel",{defaultMessage:'Filter out {fieldName}: "{value}"',values:{fieldName:E,value:r}}),"data-test-subj":`dvFieldDataTopValuesExcludeFilterButton-${E}-${r}`,style:{minHeight:"auto",minWidth:"auto",paddingTop:0,paddingBottom:0,paddingRight:2,paddingLeft:2}})):null)})):null,z&&k>0?Object(p.jsx)(n.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",key:"other"},Object(p.jsx)(n.EuiFlexItem,{"data-test-subj":"dataVisualizerFieldDataTopValueBar"},Object(p.jsx)(n.EuiProgress,{value:k,max:F,color:a,size:"xs",label:Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.topValuesOtherLabel",defaultMessage:"Other"}),className:c()("eui-textTruncate","topValuesValueLabelContainer"),valueText:`${k}${void 0!==F?` (${v(100*S)})`:""}`})),l?Object(p.jsx)("div",{css:h}):null):null,Object(p.jsx)(i.Fragment,null,Object(p.jsx)(n.EuiSpacer,{size:"xs"}),N)))};var _=a(125),y=a(189),E=a(84),M=a(81);const C=({config:e,onAddFilter:t})=>{const a="fieldFormat"in e?e.fieldFormat:void 0,s=Object(i.useMemo)((()=>Object(_.b)(e)),[e]),u=Object(y.a)();if(!s)return null;const{count:c}=s;return Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerBooleanContent"},Object(p.jsx)(E.a,{config:e}),Object(p.jsx)(T,{stats:e.stats,fieldFormat:a,barColor:"success",onAddFilter:t}),Object(p.jsx)(f.a,{className:"dvPanel__wrapper dvPanel--uniform"},Object(p.jsx)(j.a,null,Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.cardBoolean.valuesLabel",defaultMessage:"Values"})),Object(p.jsx)(n.EuiSpacer,{size:"xs"}),Object(p.jsx)(l.Chart,{renderer:"canvas",size:{height:70}},Object(p.jsx)(l.Axis,{id:"bottom",position:"bottom",showOverlappingTicks:!0}),Object(p.jsx)(l.Axis,{id:"left2",title:"Left axis",hide:!0,tickFormat:e=>{return`${t=e} (${function(e){return 0===e?"0%":e>=.1?`${Object(o.a)(e)}%`:"< 0.1%"}(t/c*100)})`;var t}}),Object(p.jsx)(l.Settings,{baseTheme:l.LEGACY_LIGHT_THEME,showLegend:!1,theme:u,locale:d.i18n.getLocale()}),Object(p.jsx)(l.BarSeries,{id:e.fieldName||a,data:[{x:"true",count:s.trueCount},{x:"false",count:s.falseCount}],splitSeriesAccessors:["x"],stackAccessors:["x"],xAccessor:"x",xScaleType:l.ScaleType.Ordinal,yAccessors:["count"],yScaleType:l.ScaleType.Linear}))))},V="MMM D YYYY, HH:mm:ss.SSS",F=({config:e})=>{const{stats:t}=e;if(void 0===t)return null;const{earliest:a,latest:i}=t,s=d.i18n.translate("xpack.dataVisualizer.dataGrid.field.cardDate.summaryTableTitle",{defaultMessage:"Summary"}),l=[{function:"earliest",display:Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.cardDate.earliestLabel",defaultMessage:"earliest"}),value:"string"==typeof a?a:Object(n.formatDate)(a,V)},{function:"latest",display:Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.cardDate.latestLabel",defaultMessage:"latest"}),value:"string"==typeof i?i:Object(n.formatDate)(i,V)}],o=[{name:"",field:"function",render:(e,t)=>t.display,width:"70px",align:n.LEFT_ALIGNMENT},{field:"value",name:"",render:e=>Object(p.jsx)("strong",null,e),align:n.RIGHT_ALIGNMENT}];return Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerDateContent"},Object(p.jsx)(E.a,{config:e}),Object(p.jsx)(f.a,{className:"dvSummaryTable__wrapper dvPanel__wrapper dvPanel__dateSummary"},Object(p.jsx)(j.a,null,s),Object(p.jsx)(n.EuiBasicTable,{className:"dvSummaryTable","data-test-subj":"dataVisualizerDateSummaryTable",compressed:!0,items:l,columns:o,tableCaption:s,tableLayout:"auto"})))};a(145);var N=a(40);const w=({stats:e,suggestion:t})=>{var a,s;const{services:{data:{fieldFormats:l},maps:o}}=Object(x.a)(),{fieldName:u,isTopValuesSampled:c,topValues:b,sampleCount:j}=e,g=Object(i.useMemo)((()=>((e,t,{layerId:a,field:i})=>({id:"choroplethLayer",label:d.i18n.translate("xpack.dataVisualizer.choroplethMap.topValuesCount",{defaultMessage:"Top values count for {fieldName}",values:{fieldName:e}}),joins:[{leftField:i,right:{id:"doc_count",type:N.SOURCE_TYPES.TABLE_SOURCE,__rows:t,__columns:[{name:"key",type:"string"},{name:"doc_count",type:"number"}],term:"key"}}],sourceDescriptor:{type:"EMS_FILE",id:a},style:{type:"VECTOR",properties:{icon:{type:N.STYLE_TYPE.STATIC,options:{value:"marker"}},fillColor:{type:N.STYLE_TYPE.DYNAMIC,options:{color:"Blue to Red",colorCategory:"palette_0",fieldMetaOptions:{isEnabled:!0,sigma:3},type:N.COLOR_MAP_TYPE.ORDINAL,field:{name:"doc_count",origin:N.FIELD_ORIGIN.JOIN},useCustomColorRamp:!1}},lineColor:{type:N.STYLE_TYPE.DYNAMIC,options:{fieldMetaOptions:{isEnabled:!0}}},lineWidth:{type:N.STYLE_TYPE.STATIC,options:{size:1}}},isTimeAware:!0},type:N.LAYER_TYPE.GEOJSON_VECTOR}))(u||"",b||[],t)),[t,u,b]),v=null!==(a=null!==(s=e.totalDocuments)&&void 0!==s?s:j)&&void 0!==a?a:0,h=v?Object(p.jsx)(n.EuiText,{color:"subdued",size:"xs"},c?Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.choroplethMapTopValues.calculatedFromSampleRecordsLabel",defaultMessage:"Calculated from {sampledDocumentsFormatted} sample {sampledDocuments, plural, one {record} other {records}}.",values:{sampledDocuments:j,sampledDocumentsFormatted:Object(p.jsx)("strong",null,l.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(j))}}):Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.choroplethMapTopValues.calculatedFromTotalRecordsLabel",defaultMessage:"Calculated from {totalDocumentsFormatted} {totalDocuments, plural, one {record} other {records}}.",values:{totalDocuments:v,totalDocumentsFormatted:Object(p.jsx)("strong",null,l.getDefaultInstance(m.b.NUMBER,[m.a.INTEGER]).convert(null!=v?v:0))}})):null;return Object(p.jsx)(f.a,{dataTestSubj:"fileDataVisualizerChoroplethMapTopValues",className:"dvPanel__wrapper",grow:!0},o&&Object(p.jsx)("div",{className:"dvMap__wrapper"},Object(p.jsx)(o.PassiveMap,{passiveLayer:g})),h)};var z=a(128);const S=({config:e,onAddFilter:t})=>{var a,s,n;const[l,r]=Object(i.useState)(null),{stats:o,fieldName:d}=e,u="fieldFormat"in e?e.fieldFormat:void 0,{services:{maps:c}}=Object(x.a)();return Object(i.useEffect)((()=>{if(!c)return;if(null==o||!o.topValues)return void r(null);let e=!1;return c.suggestEMSTermJoinConfig({sampleValues:o.topValues.map((e=>e.key)),sampleValuesColumnName:d||""}).then((t=>{e||r(t)})).catch((()=>{e||r(null)})),()=>{e=!0}}),[d,c,null==o?void 0:o.topValues]),Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerKeywordContent"},Object(p.jsx)(E.a,{config:e}),null!==(a=e.stats)&&void 0!==a&&a.error&&void 0!==d?Object(p.jsx)(z.a,{fieldName:d,error:null===(s=e.stats)||void 0===s?void 0:s.error}):null,Object(p.jsx)(T,{stats:o,fieldFormat:u,barColor:"success",onAddFilter:t}),null!==(n=e.stats)&&void 0!==n&&n.sampledValues&&void 0!==d?Object(p.jsx)(T,{stats:o,fieldFormat:u,barColor:"success",onAddFilter:t,showSampledValues:!0}):null,l&&o&&Object(p.jsx)(w,{stats:o,suggestion:l}))},k=({config:e,onAddFilter:t})=>{const{stats:a}=e;if(void 0===a)return null;const{count:i,sampleCount:s,cardinality:n}=a;if(void 0===i||void 0===s||void 0===n)return null;const l="fieldFormat"in e?e.fieldFormat:void 0;return Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerIPContent"},Object(p.jsx)(E.a,{config:e}),a&&Object(p.jsx)(T,{stats:a,fieldFormat:l,barColor:"success",onAddFilter:t}))};var D=a(220),I=a(184);const G=({config:e,onAddFilter:t})=>{var a,s;const{stats:l}=e,o=Object(i.useMemo)((()=>Object(I.b)(null==l?void 0:l.distribution,260)),[null==l?void 0:l.distribution]);if(void 0===l)return null;const{min:u,median:c,max:m,distribution:x}=l,g="fieldFormat"in e?e.fieldFormat:void 0,v=[{function:"min",display:Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.numberContent.minLabel",defaultMessage:"min"}),value:Object(b.d)(u,g)},...Object(D.a)(c)?[{function:"median",display:Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.numberContent.medianLabel",defaultMessage:"median"}),value:Object(b.d)(c,g)}]:[],{function:"max",display:Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.numberContent.maxLabel",defaultMessage:"max"}),value:Object(b.d)(m,g)}],h=[{name:"",render:e=>e.display,width:"25px",align:n.LEFT_ALIGNMENT},{field:"value",name:"",render:e=>Object(p.jsx)("strong",null,e),align:n.RIGHT_ALIGNMENT}],O=d.i18n.translate("xpack.dataVisualizer.dataGrid.fieldExpandedRow.numberContent.summaryTableTitle",{defaultMessage:"Summary"});return Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerNumberContent"},Object(p.jsx)(E.a,{config:e}),Object(p.jsx)(f.a,{className:"dvSummaryTable__wrapper dvPanel__wrapper",grow:1},Object(p.jsx)(j.a,null,O),Object(p.jsx)(n.EuiBasicTable,{className:"dvSummaryTable",compressed:!0,items:v,columns:h,tableCaption:O,"data-test-subj":"dataVisualizerNumberSummaryTable"})),l&&Object(p.jsx)(T,{stats:l,fieldFormat:g,barColor:"success",compressed:!0,onAddFilter:t}),x&&void 0!==(null===(a=l.distribution)||void 0===a?void 0:a.percentiles.length)&&(null===(s=l.distribution)||void 0===s?void 0:s.percentiles.length)>2&&Object(p.jsx)(f.a,{dataTestSubj:"dataVisualizerFieldDataMetricDistribution",className:"dvPanel__wrapper",grow:!1},Object(p.jsx)(n.EuiFlexItem,{grow:!1},Object(p.jsx)(j.a,null,Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.numberContent.distributionTitle",defaultMessage:"Distribution"}))),Object(p.jsx)(n.EuiFlexItem,{className:"metricDistributionChartContainer"},Object(p.jsx)(I.a,{width:260,height:200,chartData:o,fieldFormat:g})),Object(p.jsx)(n.EuiFlexItem,{grow:!1},Object(p.jsx)(n.EuiText,{size:"xs",textAlign:"center"},Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.numberContent.displayingPercentilesLabel",defaultMessage:"Displaying {minPercent} - {maxPercent} percentiles",values:{minPercent:Object(b.e)(x.minPercentile),maxPercent:Object(b.e)(x.maxPercentile)}})))))};var L=a(102);const A=({config:e})=>{const{stats:t}=e;return void 0===t?null:void 0===t.count?Object(p.jsx)(s.a.Fragment,null,Array.isArray(t.examples)&&Object(p.jsx)(L.a,{examples:t.examples})):Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerOtherContent"},Object(p.jsx)(E.a,{config:e}),Array.isArray(t.examples)&&Object(p.jsx)(L.a,{examples:t.examples}))},P=({config:e})=>{const{stats:t}=e;if(void 0===t)return null;const{examples:a}=t;if(void 0===a)return null;const s=a.length;return Object(p.jsx)(M.a,{dataTestSubj:"dataVisualizerTextContent"},Object(p.jsx)(n.EuiFlexItem,{grow:!1,className:"dvText__wrapper"},s>0&&Object(p.jsx)(L.a,{examples:a}),0===s&&Object(p.jsx)(i.Fragment,null,Object(p.jsx)(n.EuiSpacer,{size:"xs"}),Object(p.jsx)(n.EuiCallOut,{size:"s",title:d.i18n.translate("xpack.dataVisualizer.dataGrid.fieldText.noExamplesForFieldsTitle",{defaultMessage:"No examples were obtained for this field"}),iconType:"warning"},Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldText.fieldNotPresentDescription",defaultMessage:"This field was not present in the {sourceParam} field of documents queried.",values:{sourceParam:Object(p.jsx)("span",{className:"dvExpandedRow__codeContent"},"_source")}}),Object(p.jsx)(n.EuiSpacer,{size:"s"}),Object(p.jsx)(r.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldText.fieldMayBePopulatedDescription",defaultMessage:"It may be populated, for example, using a {copyToParam} parameter in the document mapping, or be pruned from the {sourceParam} field after indexing through the use of {includesParam} and {excludesParam} parameters.",values:{copyToParam:Object(p.jsx)("span",{className:"dvExpandedRow__codeContent"},"copy_to"),sourceParam:Object(p.jsx)("span",{className:"dvExpandedRow__codeContent"},"_source"),includesParam:Object(p.jsx)("span",{className:"dvExpandedRow__codeContent"},"includes"),excludesParam:Object(p.jsx)("span",{className:"dvExpandedRow__codeContent"},"excludes")}})))))}},145:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return j}));var i=a(0),s=a(84),n=a(10),l=a(40);const r=e=>{if("string"==typeof e){var t,a;const i=e.trim().replace("POINT (","").replace(")",""),s=b.exec(i.trim());if(null!=(null==s||null===(t=s.groups)||void 0===t?void 0:t.lat)&&null!=(null==s||null===(a=s.groups)||void 0===a?void 0:a.lon))return{lat:parseFloat(s.groups.lat.trim()),lon:parseFloat(s.groups.lon.trim())}}},o=Object(n.euiPaletteColorBlind)()[0],d=(e,t=o)=>({id:"geo_points",label:"Geo points",sourceDescriptor:{type:l.SOURCE_TYPES.GEOJSON_FILE,__featureCollection:{features:e,type:"FeatureCollection"}},visible:!0,style:{type:"VECTOR",properties:{fillColor:{type:"STATIC",options:{color:t}},lineColor:{type:"STATIC",options:{color:"#fff"}},lineWidth:{type:"STATIC",options:{size:2}},iconSize:{type:"STATIC",options:{size:6}}}},type:l.LAYER_TYPE.GEOJSON_VECTOR});var u=a(81),c=a(102),m=a(80),p=a(65),x=a(1);const b=RegExp("(?<lat>.+) (?<lon>.+)"),j=({config:e})=>{const{services:{maps:t}}=Object(p.a)(),a=Object(i.useMemo)((()=>{const{stats:t}=e;if(void 0===t||void 0===t.topValues)return null;if(Array.isArray(t.topValues)){const a=[],i=[];for(let s=0;s<t.topValues.length;s++){const n=t.topValues[s],l=r(n.key);if(l){const t=`(${l.lat}, ${l.lon})`;i.push(l),a.push({type:"Feature",id:`fileDataVisualizer-${e.fieldName}-${s}`,geometry:{type:"Point",coordinates:[l.lat,l.lon]},properties:{value:t,count:n.doc_count}})}}if(a.length>0)return{examples:i,pointsLayer:d(a)}}}),[e]);return Object(x.jsx)(u.a,{dataTestSubj:"dataVisualizerGeoPointContent"},Object(x.jsx)(s.a,{config:e}),(null==a?void 0:a.examples)&&Object(x.jsx)(c.a,{examples:a.examples}),t&&(null==a?void 0:a.pointsLayer)&&Object(x.jsx)(m.a,{className:"dvPanel__wrapper dvMap__wrapper",grow:!0},Object(x.jsx)(t.PassiveMap,{passiveLayer:a.pointsLayer})))}},150:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},184:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return p})),a(0);var i=a(4),s=a(29),n=a(25),l=a(98),r=a(1);const o=({chartPoint:e,maxWidth:t,fieldFormat:a})=>void 0===e?null:Object(r.jsx)("div",{style:{maxWidth:t}},e.dataMax>e.dataMin?Object(r.jsx)(n.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.metricDistributionChart.tooltipValueBetweenLabel",defaultMessage:"{percent}% of documents have values between {minValFormatted} and {maxValFormatted}",values:{percent:e.percent,minValFormatted:Object(l.d)(e.dataMin,a),maxValFormatted:Object(l.d)(e.dataMax,a)}}):Object(r.jsx)(n.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.metricDistributionChart.tooltipValueEqualLabel",defaultMessage:"{percent}% of documents have a value of {valFormatted}",values:{percent:e.percent,valFormatted:Object(l.d)(e.dataMin,a)}}));var d=a(189);const u=({width:e,height:t,chartData:a,fieldFormat:n,hideXAxis:u})=>{const c=i.i18n.translate("xpack.dataVisualizer.dataGrid.field.metricDistributionChart.seriesName",{defaultMessage:"distribution"}),m=Object(d.a)();return Object(r.jsx)("div",{"data-test-subj":"dataVisualizerFieldDataMetricDistributionChart",className:"dataGridChart__histogram"},Object(r.jsx)(s.Chart,{size:{width:e,height:t}},Object(r.jsx)(s.Tooltip,{headerFormatter:t=>{const i=t.value,s=a.find((e=>e.x===i));return Object(r.jsx)(o,{chartPoint:s,maxWidth:e,fieldFormat:n})}}),Object(r.jsx)(s.Settings,{baseTheme:s.LEGACY_LIGHT_THEME,theme:m,locale:i.i18n.getLocale()}),Object(r.jsx)(s.Axis,{id:"bottom",position:s.Position.Bottom,tickFormat:e=>Object(l.d)(e,n),hide:!0===u}),Object(r.jsx)(s.Axis,{id:"left",position:s.Position.Left,tickFormat:e=>e.toFixed(3),hide:!0}),Object(r.jsx)(s.AreaSeries,{id:"metric_distribution",name:c,xScaleType:s.ScaleType.Linear,yScaleType:s.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],data:a.length>0?a:[{x:0,y:0,dataMin:0,dataMax:0,percent:0}],curve:s.CurveType.CURVE_STEP_AFTER})))},c=3,m=20;function p(e,t){let a=[];if(void 0===e)return a;const i=e.percentiles;if(0===(null==i?void 0:i.length))return a;const s=i[0].minValue,n=i[i.length-1].maxValue;let l=s,r=n;n===s&&(0!==s?(l=0,r=2*s):r=1);const o=c/t*(r-l),d=[];let u;i.forEach(((e,t)=>{if(0===t){const t={x0:e.minValue,x1:Math.max(e.minValue+o,e.maxValue),y:0,dataMin:e.minValue,dataMax:e.maxValue,percent:e.percent,isMinWidth:!1};t.y=e.percent/(t.x1-t.x0)*Math.max(1,o/Math.max(e.maxValue-e.minValue,.5*o)),t.isMinWidth=e.maxValue<=e.minValue+o,d.push(t),u=t}else if(!1===u.isMinWidth||e.maxValue>u.x1){const t={x0:u.x1,x1:Math.max(u.x1+o,e.maxValue),y:0,dataMin:e.minValue,dataMax:e.maxValue,percent:e.percent,isMinWidth:!1};t.y=e.percent/(t.x1-t.x0)*Math.max(1,o/Math.max(e.maxValue-e.minValue,.5*o)),t.isMinWidth=e.maxValue<=u.x1+o,d.push(t),u=t}else u.percent=u.percent+e.percent,u.y=u.percent/(u.x1-u.x0),u.dataMax=e.maxValue})),n!==s&&(r=d[d.length-1].x1);let p=d.map((e=>e.y));p=p.sort(((e,t)=>e-t));let x=0;const b=d.length;x=1===Math.abs(b%2)?m*p[Math.floor(b/2)]:m*(p[Math.floor(b/2)-1]+p[Math.floor(b/2)])/2,d.forEach((e=>{e.y=Math.min(e.y,x)})),a=d.map((e=>{const{x0:t,y:a,dataMin:i,dataMax:s,percent:n}=e;return{x:t,y:a,dataMin:i,dataMax:s,percent:n}}));const j=d[d.length-1];return a.push({x:j.x1,y:0,dataMin:j.dataMin,dataMax:j.dataMax,percent:j.percent}),a}},189:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(0),s=a(77);const n=()=>{const e=Object(s.a)();return Object(i.useMemo)((()=>{const t=e.euiColorVis0;return{axes:{tickLabel:{fontSize:parseInt(e.euiFontSizeXS,10),fontFamily:e.euiFontFamily,fontStyle:"italic"}},background:{color:"transparent"},chartMargins:{left:0,right:0,top:0,bottom:0},chartPaddings:{left:0,right:0,top:4,bottom:0},scales:{barsPadding:.1},colors:{vizColors:[t]},areaSeriesStyle:{line:{strokeWidth:1,visible:!0},point:{visible:!1,radius:0,opacity:0},area:{visible:!0,opacity:1}}}}),[e])}},205:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(206);case"v8light":return a(208)}},206:function(e,t,a){var i=a(86),s=a(207);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);i(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},207:function(e,t,a){(t=a(87)(!1)).push([e.i,".dataGridChart__column-chart,.dataGridChart__histogram{width:100%}.dataGridChart__legend{color:#535966;display:block;font-size:11px;font-style:italic;font-weight:400;line-height:1.1;max-width:100%;overflow:hidden!important;overflow-x:hidden;text-align:left;text-overflow:ellipsis!important;white-space:nowrap!important}.dataGridChart__legend--numeric{text-align:right}.dataGridChart__legendBoolean{width:10px}.dataGrid .euiDataGridHeaderCell__content{margin-top:auto}",""]),e.exports=t},208:function(e,t,a){var i=a(86),s=a(209);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);i(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},209:function(e,t,a){(t=a(87)(!1)).push([e.i,".dataGridChart__column-chart,.dataGridChart__histogram{width:100%}.dataGridChart__legend{color:#98a2b3;display:block;font-size:11px;font-style:italic;font-weight:400;line-height:1.1;max-width:100%;overflow:hidden!important;overflow-x:hidden;text-align:left;text-overflow:ellipsis!important;white-space:nowrap!important}.dataGridChart__legend--numeric{text-align:right}.dataGridChart__legendBoolean{width:10px}.dataGrid .euiDataGridHeaderCell__content{margin-top:auto}",""]),e.exports=t},215:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(216);case"v8light":return a(218)}},216:function(e,t,a){var i=a(86),s=a(217);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);i(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},217:function(e,t,a){(t=a(87)(!1)).push([e.i,".metricDistributionChartContainer{padding-top:4px;width:100%}.dataVisualizerColumnHeaderIcon{max-width:12px}",""]),e.exports=t},218:function(e,t,a){var i=a(86),s=a(219);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);i(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},219:function(e,t,a){(t=a(87)(!1)).push([e.i,".metricDistributionChartContainer{padding-top:4px;width:100%}.dataVisualizerColumnHeaderIcon{max-width:12px}",""]),e.exports=t},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a(0);var i=a(10),s=a(1);const n=({children:e,dataTestSubj:t,grow:a,className:n})=>Object(s.jsx)(i.EuiPanel,{"data-test-subj":t,hasShadow:!1,hasBorder:!1,grow:!!a,className:null!=n?n:"",paddingSize:"s"},e)},81:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a(0);var i=a(10),s=a(1);const n=({children:e,dataTestSubj:t})=>Object(s.jsx)(i.EuiFlexGroup,{"data-test-subj":t,gutterSize:"s",wrap:!0},e)},84:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var i=a(25),s=(a(0),a(4)),n=a(10),l=a(291),r=a(99),o=a(101),d=a(80),u=a(1);const c=[{field:"function",name:"",render:(e,t)=>t.display,width:"25px",align:n.LEFT_ALIGNMENT},{field:"value",name:"",render:e=>Object(u.jsx)("strong",null,e),align:n.RIGHT_ALIGNMENT}],m=s.i18n.translate("xpack.dataVisualizer.dataGrid.fieldExpandedRow.documentStatsTable.metaTableTitle",{defaultMessage:"Documents stats"}),p=({config:e})=>{if(void 0===(null==e?void 0:e.stats)||void 0===e.stats.cardinality||void 0===e.stats.count||void 0===e.stats.sampleCount)return null;const{cardinality:t,count:a,sampleCount:s}=e.stats,p=null!=a?a:Object(o.a)(e)&&!0===e.existsInDocs?void 0:0,x=void 0!==p&&void 0!==s?Object(l.a)(p/s*100):void 0,b=[{function:"count",display:Object(u.jsx)(i.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.documentStatsTable.countLabel",defaultMessage:"count"}),value:a},...void 0!==x?[{function:"percentage",display:Object(u.jsx)(i.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.documentStatsTable.percentageLabel",defaultMessage:"percentage"}),value:`${x}%`}]:[],{function:"distinctValues",display:Object(u.jsx)(i.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.fieldExpandedRow.documentStatsTable.distinctValueLabel",defaultMessage:"distinct values"}),value:t}];return Object(u.jsx)(d.a,{dataTestSubj:"dataVisualizerDocumentStatsContent",className:"dvSummaryTable__wrapper dvPanel__wrapper"},Object(u.jsx)(r.a,null,m),Object(u.jsx)(n.EuiBasicTable,{className:"dvSummaryTable",compressed:!0,items:b,columns:c,tableCaption:m}))}},98:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"f",(function(){return u})),a.d(t,"g",(function(){return o})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return x})),a.d(t,"c",(function(){return g}));var i=a(5),s=a(6);const n=1e3,l=5,r={timestampFormat:void 0,timestampField:void 0,format:void 0,delimiter:void 0,quote:void 0,hasHeaderRow:void 0,charset:void 0,columnNames:void 0,shouldTrimFields:void 0,grokPattern:void 0,linesToSample:void 0};function o(e){return new Promise(((t,a)=>{if(e&&e.size){const i=new FileReader;i.readAsArrayBuffer(e),i.onload=()=>{const e=new TextDecoder,n=i.result;if(null===n||"string"==typeof n)return a();const r=l*s.e,o=e.decode(n.slice(0,r));""===o?a():t({fileContents:o,data:n})}}else a()}))}function d(e,t){const a={};for(const s in r)if(r.hasOwnProperty(s)){let n=e[s];(Array.isArray(n)&&Object(i.isEqual)(n,t[s])||void 0===n||n===t[s])&&(n=""),a[s.replace(/([A-Z])/g,(e=>`_${e.toLowerCase()}`))]=n}return""===a.format&&t.format===s.c.DELIMITED&&(""===a.should_trim_fields&&""===a.has_header_row&&""===a.delimiter&&""===a.quote&&""===a.column_names||(a.format=t.format),Array.isArray(a.column_names)&&(a.column_names=a.column_names.join())),""===a.format&&t.format===s.c.SEMI_STRUCTURED_TEXT&&""!==a.grok_pattern&&(a.format=t.format),a.format!==s.c.NDJSON&&t.format!==s.c.NDJSON||(a.should_trim_fields="",a.has_header_row="",a.delimiter="",a.quote="",a.column_names=""),""===a.lines_to_sample&&(a.lines_to_sample=e.linesToSample),a}function u({results:e,overrides:t}){let a;t&&t.timestamp_format===s.g||void 0===e.java_timestamp_formats?a=s.g:e.java_timestamp_formats.length&&(a=e.java_timestamp_formats[0]);const i=void 0!==t&&void 0!==t.lines_to_sample?t.lines_to_sample:n;return{format:e.format,delimiter:e.delimiter,timestampField:e.timestamp_field,timestampFormat:a,quote:e.quote,hasHeaderRow:e.has_header_row,shouldTrimFields:e.should_trim_fields,charset:e.charset,columnNames:e.column_names,grokPattern:e.grok_pattern,linesToSample:i}}function c(e,t){return null!=t?t.convert(e,"text"):e}var m=a(49),p=a.n(m);function x(e){const t=Math.floor(e);return`${p()(t).format("0o")}`}var b=a(30),j=a.n(b);const f=3;function g(e,t,a,i){if(null==e)return"";if("time_of_week"===t){const t=void 0!==i&&void 0!==i.timestamp?new Date(i.timestamp):new Date,a=j.a.utc(t).startOf("week").add(e,"s");return j()(a.valueOf()).format("ddd HH:mm")}if("time_of_day"===t){const t=void 0!==i&&void 0!==i.timestamp?new Date(i.timestamp):new Date,a=j.a.utc(t).startOf("day").add(e,"s");return j()(a.valueOf()).format("HH:mm")}if(void 0!==a)return a.convert(e,"text");{const t=Math.abs(e);if(t>=1e4||t===Math.floor(t))return void 0!==a?a.convert(e,"text"):Number(e.toFixed(0));if(t>=10)return Number(e.toFixed(1));{let t;return t=e>0?Math.pow(10,f-Math.floor(Math.log(e)/Math.LN10)-1):Math.pow(10,f-Math.floor(Math.log(-1*e)/Math.LN10)-1),Math.round(e*t)/t}}}},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(10),s=(a(0),a(1));const n=({children:e})=>{const{euiTheme:t}=Object(i.useEuiTheme)(),a=Object(s.css)({textTransform:"uppercase",textAlign:"left",color:t.colors.darkShade,fontWeight:"bold",paddingBottom:t.size.s},"","");return Object(s.jsx)(i.EuiText,{size:"xs",color:"subdued",css:a,textAlign:"center"},e)}}}]);