/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[10],Array(66).concat([function(e,t,n){"use strict";t.__esModule=!0,t.HTTP_REQUEST_TIMEOUT=t.SESSION_TIMEOUT=t.OUTCOME_UNKNOWN=t.OUTCOME_FAILURE=t.OUTCOME_SUCCESS=t.EVENT=t.LAYOUT_SHIFT=t.FIRST_INPUT=t.TRUNCATED_TYPE=t.ERROR_LOGGING=t.PERFORMANCE_MONITORING=t.APM_SERVER=t.TRANSACTION_SERVICE=t.LOGGING_SERVICE=t.CONFIG_SERVICE=t.TRANSACTIONS=t.ERRORS=t.TRANSACTION_TYPE_ORDER=t.USER_INTERACTION=t.TEMPORARY_TYPE=t.KEYWORD_LIMIT=t.LARGEST_CONTENTFUL_PAINT=t.FIRST_CONTENTFUL_PAINT=t.RESOURCE=t.NAVIGATION=t.MEASURE=t.PAINT=t.LONG_TASK=t.HTTP_REQUEST_TYPE=t.LOCAL_CONFIG_KEY=t.AFTER_EVENT=t.BEFORE_EVENT=t.ERROR=t.CLICK=t.EVENT_TARGET=t.HISTORY=t.FETCH=t.XMLHTTPREQUEST=t.TRANSACTION_IGNORE=t.QUEUE_ADD_TRANSACTION=t.QUEUE_FLUSH=t.CONFIG_CHANGE=t.TRANSACTION_END=t.TRANSACTION_START=t.USER_TIMING_THRESHOLD=t.TYPE_CUSTOM=t.PAGE_EXIT=t.NAME_UNKNOWN=t.ROUTE_CHANGE=t.PAGE_LOAD=t.PAGE_LOAD_DELAY=t.MAX_SPAN_DURATION=t.REUSABILITY_THRESHOLD=t.RESOURCE_INITIATOR_TYPES=t.REMOVE_EVENT_LISTENER_STR=t.ADD_EVENT_LISTENER_STR=t.INVOKE=t.SCHEDULE=void 0,t.SCHEDULE="schedule",t.INVOKE="invoke",t.ADD_EVENT_LISTENER_STR="addEventListener",t.REMOVE_EVENT_LISTENER_STR="removeEventListener",t.RESOURCE_INITIATOR_TYPES=["link","css","script","img","xmlhttprequest","fetch","beacon","iframe"],t.REUSABILITY_THRESHOLD=5e3,t.MAX_SPAN_DURATION=3e5,t.PAGE_LOAD_DELAY=1e3;var r="page-load";t.PAGE_LOAD=r;var i="route-change";t.ROUTE_CHANGE=i;var a="custom";t.TYPE_CUSTOM=a;var o="user-interaction";t.USER_INTERACTION=o;var s="http-request";t.HTTP_REQUEST_TYPE=s;var c="temporary";t.TEMPORARY_TYPE=c,t.NAME_UNKNOWN="Unknown",t.PAGE_EXIT="page-exit";var u=[r,i,o,s,a,c];t.TRANSACTION_TYPE_ORDER=u,t.OUTCOME_SUCCESS="success",t.OUTCOME_FAILURE="failure",t.OUTCOME_UNKNOWN="unknown",t.USER_TIMING_THRESHOLD=60,t.TRANSACTION_START="transaction:start",t.TRANSACTION_END="transaction:end",t.CONFIG_CHANGE="config:change",t.QUEUE_FLUSH="queue:flush",t.QUEUE_ADD_TRANSACTION="queue:add_transaction",t.TRANSACTION_IGNORE="transaction:ignore",t.XMLHTTPREQUEST="xmlhttprequest",t.FETCH="fetch",t.HISTORY="history",t.EVENT_TARGET="eventtarget",t.CLICK="click",t.ERROR="error",t.BEFORE_EVENT=":before",t.AFTER_EVENT=":after",t.LOCAL_CONFIG_KEY="elastic_apm_config",t.LONG_TASK="longtask",t.PAINT="paint",t.MEASURE="measure",t.NAVIGATION="navigation",t.RESOURCE="resource",t.FIRST_CONTENTFUL_PAINT="first-contentful-paint",t.LARGEST_CONTENTFUL_PAINT="largest-contentful-paint",t.FIRST_INPUT="first-input",t.LAYOUT_SHIFT="layout-shift",t.EVENT="event",t.ERRORS="errors",t.TRANSACTIONS="transactions",t.CONFIG_SERVICE="ConfigService",t.LOGGING_SERVICE="LoggingService",t.TRANSACTION_SERVICE="TransactionService",t.APM_SERVER="ApmServer",t.PERFORMANCE_MONITORING="PerformanceMonitoring",t.ERROR_LOGGING="ErrorLogging",t.TRUNCATED_TYPE=".truncated",t.KEYWORD_LIMIT=1024,t.SESSION_TIMEOUT=18e5,t.HTTP_REQUEST_TIMEOUT=1e4},function(e,t,n){"use strict";t.__esModule=!0,t.extend=function(e){return h(e,i.call(arguments,1),!1)},t.merge=function(e){return h(e,i.call(arguments,1),!0)},t.isUndefined=g,t.noop=function(){},t.baseExtend=h,t.bytesToHex=d,t.isCORSSupported=s,t.isObject=p,t.isFunction=v,t.isPlatformSupported=function(){return a&&"function"==typeof Set&&"function"==typeof JSON.stringify&&o&&"function"==typeof o.now&&s()},t.isDtHeaderValid=function(e){return/^[\da-f]{2}-[\da-f]{32}-[\da-f]{16}-[\da-f]{2}$/.test(e)&&"00000000000000000000000000000000"!==e.slice(3,35)&&"0000000000000000"!==e.slice(36,52)},t.parseDtHeaderValue=function(e){var t=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})$/.exec(e);if(t){var n="00"!==t[4];return{traceId:t[2],id:t[3],sampled:n}}},t.getServerTimingInfo=function(e){void 0===e&&(e=[]);for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.name,a=r.duration,o=r.description,s=i;o&&(s+=";desc="+o),a&&(s+=";dur="+a),t.push(s)}return t.join(", ")},t.getDtHeaderValue=function(e){if(e&&e.traceId&&e.id&&e.parentId){var t=e.sampled?"01":"00",n=e.sampled?e.id:e.parentId;return"00-"+e.traceId+"-"+n+"-"+t}},t.getTSHeaderValue=function(e){var t=e.sampleRate;if(!("number"!=typeof t||String(t).length>256))return"es=s:"+t},t.getCurrentScript=function(){if("undefined"!=typeof document)return document.currentScript||_()},t.getElasticScript=_,t.getTimeOrigin=function(){return o.timing.fetchStart},t.generateRandomId=function(e){return d(l()).substr(0,e)},t.getEarliestSpan=function(e){for(var t=e[0],n=1;n<e.length;n++){var r=e[n];t._start>r._start&&(t=r)}return t},t.getLatestNonXHRSpan=function(e){return E(e,(function(e){return-1===String(e).indexOf("external")}))},t.getLatestXHRSpan=function(e){return E(e,(function(e){return-1!==String(e).indexOf("external")}))},t.getDuration=function(e,t){return g(t)||g(e)?null:parseInt(t-e)},t.getTime=function(e){return"number"==typeof e&&e>=0?e:T()},t.now=T,t.rng=l,t.checkSameOrigin=function e(t,n){var r=!1;return"string"==typeof n?r=t===n:n&&"function"==typeof n.test?r=n.test(t):Array.isArray(n)&&n.forEach((function(n){r||(r=e(t,n))})),r},t.scheduleMacroTask=function(e){setTimeout(e,0)},t.scheduleMicroTask=function(e){r.Promise.resolve().then(e)},t.setLabel=function(e,t,n){if(n&&e){var r=m(e),i=typeof t;return null!=t&&"boolean"!==i&&"number"!==i&&(t=String(t)),n[r]=t,n}},t.setRequestHeader=function(e,t,n){"function"==typeof e.setRequestHeader?e.setRequestHeader(t,n):e.headers&&"function"==typeof e.headers.append?e.headers.append(t,n):e[t]=n},t.stripQueryStringFromUrl=function(e){return e&&e.split("?")[0]},t.find=function(e,t,n){if(null==e)throw new TypeError("array is null or not defined");var r=Object(e),i=r.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var a=0;a<i;){var o=r[a];if(t.call(n,o,a,r))return o;a++}},t.removeInvalidChars=m,t.isPerfTimelineSupported=function(){return"function"==typeof o.getEntriesByType},t.isPerfTypeSupported=function(e){return"undefined"!=typeof PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.indexOf(e)>=0},t.isPerfInteractionCountSupported=function(){return"interactionCount"in performance},t.isBeaconInspectionEnabled=function(){var e="_elastic_inspect_beacon_";if(null!=sessionStorage.getItem(e))return!0;if(!window.URL||!window.URLSearchParams)return!1;try{var t=new URL(window.location.href).searchParams.has(e);return t&&sessionStorage.setItem(e,!0),t}catch(e){}return!1},t.isRedirectInfoAvailable=function(e){return e.redirectStart>0},t.isBrowser=t.PERF=void 0;var r=n(95),i=[].slice,a="undefined"!=typeof window;t.isBrowser=a;var o=a&&"undefined"!=typeof performance?performance:{};function s(){return"withCredentials"in new window.XMLHttpRequest}t.PERF=o;for(var c=[],u=0;u<256;++u)c[u]=(u+256).toString(16).substr(1);function d(e){for(var t=[],n=0;n<e.length;n++)t.push(c[e[n]]);return t.join("")}var f=new Uint8Array(16);function l(){return"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues?crypto.getRandomValues(f):"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues?msCrypto.getRandomValues(f):f}function p(e){return null!==e&&"object"==typeof e}function v(e){return"function"==typeof e}function h(e,t,n){for(var r=0,i=t.length;r<i;++r){var a=t[r];if(p(a)||v(a))for(var o=Object.keys(a),s=0,c=o.length;s<c;s++){var u=o[s],d=a[u];n&&p(d)?(p(e[u])||(e[u]=Array.isArray(d)?[]:{}),h(e[u],[d],!1)):e[u]=d}}return e}function _(){if("undefined"!=typeof document)for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;t++){var r=e[t];if(r.src.indexOf("elastic")>0)return r}}function g(e){return void 0===e}function m(e){return e.replace(/[.*"]/g,"_")}function E(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r];t&&t(i.type)&&(!n||n._end<i._end)&&(n=i)}return n}function T(){return o.now()}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.state=t.__DEV__=void 0,t.__DEV__=!1;var r={bootstrapTime:null,lastHiddenStart:Number.MIN_SAFE_INTEGER};t.state=r},,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.Promise=void 0;var r,i=(r=n(245))&&r.__esModule?r:{default:r},a={};n(67).isBrowser?a=window:"undefined"!=typeof self&&(a=self);var o="Promise"in a?a.Promise:i.default;t.Promise=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(178),i=function(){function e(){}return e.prototype.context=function(){return this._context()},e.prototype.tracer=function(){return this._tracer()},e.prototype.setOperationName=function(e){return this._setOperationName(e),this},e.prototype.setBaggageItem=function(e,t){return this._setBaggageItem(e,t),this},e.prototype.getBaggageItem=function(e){return this._getBaggageItem(e)},e.prototype.setTag=function(e,t){var n;return this._addTags(((n={})[e]=t,n)),this},e.prototype.addTags=function(e){return this._addTags(e),this},e.prototype.log=function(e,t){return this._log(e,t),this},e.prototype.logEvent=function(e,t){return this._log({event:e,payload:t})},e.prototype.finish=function(e){this._finish(e)},e.prototype._context=function(){return r.spanContext},e.prototype._tracer=function(){return r.tracer},e.prototype._setOperationName=function(e){},e.prototype._setBaggageItem=function(e,t){},e.prototype._getBaggageItem=function(e){},e.prototype._addTags=function(e){},e.prototype._log=function(e,t){},e.prototype._finish=function(e){},e}();t.Span=i,t.default=i},,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=(r=n(172))&&r.__esModule?r:{default:r},a=n(136);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}var s=function(e){var t,n;function r(t,n,r){var i;if((i=e.call(this,t,n,r)||this).parentId=i.options.parentId,i.subtype=void 0,i.action=void 0,-1!==i.type.indexOf(".")){var a=i.type.split(".",3);i.type=a[0],i.subtype=a[1],i.action=a[2]}return i.sync=i.options.sync,i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r.prototype.end=function(t,n){e.prototype.end.call(this,t),(0,a.addSpanContext)(this,n)},r}(i.default);t.default=s},,,,,,,,,,function(e,t,n){"use strict";function r(e){return"__apm_symbol__"+e}t.__esModule=!0,t.apmSymbol=r,t.patchMethod=function(e,t,n){for(var i=e;i&&!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);!i&&e[t]&&(i=e);var a,o,s,c=r(t);if(i&&!(a=i[c])&&(a=i[c]=i[t],!(o=i&&Object.getOwnPropertyDescriptor(i,t))||!1!==o.writable&&("function"!=typeof o.get||void 0!==o.set))){var u=n(a,c,t);i[t]=function(){return u(this,arguments)},s=a,i[t][r("OriginalDelegate")]=s}return a},t.XHR_METHOD=t.XHR_URL=t.XHR_SYNC=t.XHR_IGNORE=t.globalState=void 0,t.globalState={fetchInProgress:!1};var i=r("xhrIgnore");t.XHR_IGNORE=i;var a=r("xhrSync");t.XHR_SYNC=a;var o=r("xhrURL");t.XHR_URL=o;var s=r("xhrMethod");t.XHR_METHOD=s},,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.getPageContext=v,t.addSpanContext=function(e,t){if(t){var n;switch(e.type){case u:n=function(e){var t,n=e.url,i=e.method,a=e.target,o=e.response,s=new r.Url(n),c=p(s),u={http:{method:i,url:s.href},destination:c};return a&&void 0!==a.status?t=a.status:o&&(t=o.status),u.http.status_code=t,u}(t);break;case d:n=function(e){var t=e.entry,n=e.url,i=p(new r.Url(n));return{http:{url:n,response:l(t)},destination:i}}(t);break;case f:n=function(e){var t=e.url;return{destination:p(new r.Url(t))}}(t)}e.addContext(n)}},t.addTransactionContext=function(e,t){var n=void 0===t?{}:t,r=(n.tags,function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,o)),s=v(),c={};if(e.type===i.PAGE_EXIT)e.ensureContext(),e.context.page&&e.context.page.url&&(s.page.url=e.context.page.url);else if(e.type===i.PAGE_LOAD&&(0,a.isPerfTimelineSupported)()){var u=a.PERF.getEntriesByType(i.NAVIGATION);u&&u.length>0&&(c={response:l(u[0])})}e.addContext(s,c,r)};var r=n(137),i=n(66),a=n(67),o=["tags"],s=91,c=93,u="external",d="resource",f="hard-navigation";function l(e){var t=e.transferSize,n=e.encodedBodySize,r=e.decodedBodySize,i=e.serverTiming,o={transfer_size:t,encoded_body_size:n,decoded_body_size:r},s=(0,a.getServerTimingInfo)(i);return s&&(o.headers={"server-timing":s}),o}function p(e){var t=e.port,n=e.protocol,r=e.hostname,i=function(e,t){return""===e&&(e="http:"===t?"80":"https:"===t?"443":""),e}(t,n),a=r.charCodeAt(0)===s&&r.charCodeAt(r.length-1)===c,o=r;return a&&(o=r.slice(1,-1)),{service:{resource:r+":"+i,name:"",type:""},address:o,port:Number(i)}}function v(){return{page:{referer:document.referrer,url:location.href}}}},function(e,t,n){"use strict";t.__esModule=!0,t.slugifyUrl=function(e,t){void 0===t&&(t=2);for(var n=new o(e),r=n.query,i=n.path.substring(1).split("/"),a=":id",s=/\W|_/g,c=/[0-9]/g,u=/[a-z]/g,d=/[A-Z]/g,f=[],l=!1,p=0;p<i.length;p++){var v=i[p];if(l||p>t-1){v&&f.push("*");break}if((v.match(s)||[]).length>=2)f.push(a),l=!0;else{var h=(v.match(c)||[]).length;if(h>3||v.length>3&&h/v.length>=.3)f.push(a),l=!0;else{var _=(v.match(d)||[]).length,g=(v.match(u)||[]).length/v.length,m=_/v.length;v.length>5&&(m>.3&&m<.6||g>.3&&g<.6)?(f.push(a),l=!0):v&&f.push(v)}}}return"/"+(f.length>=2?f.join("/"):f.join(""))+(r?"?{query}":"")},t.Url=void 0;var r=n(67),i=[["#","hash"],["?","query"],["/","path"],["@","auth",1],[NaN,"host",void 0,1]],a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,o=function(){function e(e){var t,n=this.extractProtocol(e||""),r=n.protocol,a=n.address,o=n.slashes,s=!r&&!o,c=this.getLocation(),u=i.slice();a=a.replace("\\","/"),o||(u[2]=[NaN,"path"]);for(var d=0;d<u.length;d++){var f=u[d],l=f[0],p=f[1];if("string"==typeof l){if(~(t=a.indexOf(l))){var v=f[2];if(v){var h=a.lastIndexOf(l);t=Math.max(t,h),this[p]=a.slice(0,t),a=a.slice(t+v)}else this[p]=a.slice(t),a=a.slice(0,t)}}else this[p]=a,a="";this[p]=this[p]||s&&f[3]&&c[p]||"",f[3]&&(this[p]=this[p].toLowerCase())}if(s&&"/"!==this.path.charAt(0)&&(this.path="/"+this.path),this.relative=s,this.protocol=r||c.protocol,this.hostname=this.host,this.port="",/:\d+$/.test(this.host)){var _=this.host.split(":"),g=_.pop(),m=_.join(":");!function(e,t){switch(t){case"http:":return"80"===e;case"https:":return"443"===e}return!0}(g,this.protocol)?this.port=g:this.host=m,this.hostname=m}this.origin=this.protocol&&this.host&&"file:"!==this.protocol?this.protocol+"//"+this.host:"null",this.href=this.toString()}var t=e.prototype;return t.toString=function(){var e=this.protocol;if(e+="//",this.auth){var t="[REDACTED]",n=this.auth.split(":");e+=(n[0]?t:"")+(n[1]?":"+t:"")+"@"}return e+=this.host,e+=this.path,(e+=this.query)+this.hash},t.getLocation=function(){var e={};return r.isBrowser&&(e=window),e.location},t.extractProtocol=function(e){var t=a.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],address:t[3]}},e}();t.Url=o},function(e,t,n){"use strict";t.__esModule=!0,t.truncate=d,t.truncateModel=function e(t,n,r){void 0===t&&(t={}),void 0===r&&(r=n);for(var i=Object.keys(t),a=[],o=function(o){var s=i[o],c=!0===t[s]?a:t[s];Array.isArray(c)?"*"===s?Object.keys(r).forEach((function(e){return l(r,e,c)})):l(r,s,c):e(c,n,r[s])},s=0;s<i.length;s++)o(s);return n},t.RESPONSE_MODEL=t.METADATA_MODEL=t.ERROR_MODEL=t.TRANSACTION_MODEL=t.SPAN_MODEL=void 0;var r=n(66),i={service:{name:[r.KEYWORD_LIMIT,!0],version:!0,agent:{version:[r.KEYWORD_LIMIT,!0]},environment:!0},labels:{"*":!0}};t.METADATA_MODEL=i;var a={"*":!0,headers:{"*":!0}};t.RESPONSE_MODEL=a;var o={user:{id:!0,email:!0,username:!0},tags:{"*":!0},http:{response:a},destination:{address:[r.KEYWORD_LIMIT],service:{"*":[r.KEYWORD_LIMIT,!0]}},response:a},s={name:[r.KEYWORD_LIMIT,!0],type:[r.KEYWORD_LIMIT,!0],id:[r.KEYWORD_LIMIT,!0],trace_id:[r.KEYWORD_LIMIT,!0],parent_id:[r.KEYWORD_LIMIT,!0],transaction_id:[r.KEYWORD_LIMIT,!0],subtype:!0,action:!0,context:o};t.SPAN_MODEL=s;var c={name:!0,parent_id:!0,type:[r.KEYWORD_LIMIT,!0],id:[r.KEYWORD_LIMIT,!0],trace_id:[r.KEYWORD_LIMIT,!0],span_count:{started:[r.KEYWORD_LIMIT,!0]},context:o};t.TRANSACTION_MODEL=c;var u={id:[r.KEYWORD_LIMIT,!0],trace_id:!0,transaction_id:!0,parent_id:!0,culprit:!0,exception:{type:!0},transaction:{type:!0},context:o};function d(e,t,n,i){return void 0===t&&(t=r.KEYWORD_LIMIT),void 0===n&&(n=!1),void 0===i&&(i="N/A"),n&&f(e)&&(e=i),"string"==typeof e?e.substring(0,t):e}function f(e){return null==e||""===e||void 0===e}function l(e,t,n){var r=d(e[t],n[0],n[1]);f(r)?delete e[t]:e[t]=r}t.ERROR_MODEL=u},function(e,t,n){"use strict";t.__esModule=!0,t.ServiceFactory=t.serviceCreators=void 0;var r,i=u(n(251)),a=u(n(257)),o=u(n(258)),s=n(66),c=n(89);function u(e){return e&&e.__esModule?e:{default:e}}var d=((r={})[s.CONFIG_SERVICE]=function(){return new a.default},r[s.LOGGING_SERVICE]=function(){return new o.default({prefix:"[Elastic APM] "})},r[s.APM_SERVER]=function(e){var t=e.getService([s.CONFIG_SERVICE,s.LOGGING_SERVICE]),n=t[0],r=t[1];return new i.default(n,r)},r);t.serviceCreators=d;var f=function(){function e(){this.instances={},this.initialized=!1}var t=e.prototype;return t.init=function(){if(!this.initialized){this.initialized=!0;var e=this.getService(s.CONFIG_SERVICE);e.init();var t=this.getService([s.LOGGING_SERVICE,s.APM_SERVER]),n=t[0],r=t[1];e.events.observe(s.CONFIG_CHANGE,(function(){var t=e.get("logLevel");n.setLevel(t)})),r.init()}},t.getService=function(e){var t=this;return"string"==typeof e?(this.instances[e]||("function"==typeof d[e]?this.instances[e]=d[e](this):c.__DEV__&&console.log("Cannot get service, No creator for: "+e)),this.instances[e]):Array.isArray(e)?e.map((function(e){return t.getService(e)})):void 0},e}();t.ServiceFactory=f},function(e,t,n){"use strict";t.__esModule=!0,t.patchAll=function(){return d||(d=!0,(0,i.patchXMLHttpRequest)((function(e,t){u.send(c.XMLHTTPREQUEST,[e,t])})),(0,a.patchFetch)((function(e,t){u.send(c.FETCH,[e,t])})),(0,o.patchHistory)((function(e,t){u.send(c.HISTORY,[e,t])}))),u},t.patchEventHandler=void 0;var r,i=n(261),a=n(262),o=n(263),s=(r=n(170))&&r.__esModule?r:{default:r},c=n(66),u=new s.default;t.patchEventHandler=u;var d=!1},function(e,t,n){"use strict";t.__esModule=!0,t.shouldCreateSpan=function(e,t,n,i,a){return void 0===a&&(a=0),"number"==typeof e&&"number"==typeof t&&e>=a&&t>e&&e-a>=n&&t-a<=i&&t-e<r.MAX_SPAN_DURATION&&e-a<r.MAX_SPAN_DURATION&&t-a<r.MAX_SPAN_DURATION};var r=n(66)},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(16)(188)},function(e,t,n){"use strict";t.__esModule=!0,t.getPageLoadMarks=function(e){var t=function(e){var t=e.redirectStart,n=e.fetchStart,a=e.navigationStart,o=e.responseStart,s=e.responseEnd;if(n>=a&&o>=n&&s>=o){var c={};return i.forEach((function(i){var a=e[i];a&&a>=n&&((0,r.isRedirectInfoAvailable)(e)?c[i]=parseInt(a-t):c[i]=parseInt(a-n))})),c}return null}(e);return null==t?null:{navigationTiming:t,agent:{timeToFirstByte:t.responseStart,domInteractive:t.domInteractive,domComplete:t.domComplete}}},t.COMPRESSED_NAV_TIMING_MARKS=t.NAVIGATION_TIMING_MARKS=void 0;var r=n(67),i=["fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];t.NAVIGATION_TIMING_MARKS=i,t.COMPRESSED_NAV_TIMING_MARKS=["fs","ls","le","cs","ce","qs","rs","re","dl","di","ds","de","dc","es","ee"]},function(e,t,n){"use strict";t.__esModule=!0,t.shouldUseFetchWithKeepAlive=function(e,t){if(!s())return!1;if(!("keepalive"in new Request("")))return!1;var n=function(e){return e?e instanceof Blob?e.size:new Blob([e]).size:0}(t);return"POST"===e&&n<o},t.sendFetchRequest=function(e,t,n){var o,s=n.keepalive,c=void 0!==s&&s,u=n.timeout,d=void 0===u?r.HTTP_REQUEST_TIMEOUT:u,f=n.payload,l=n.headers,p=n.sendCredentials,v={};if("function"==typeof AbortController){var h=new AbortController;v.signal=h.signal,setTimeout((function(){return h.abort()}),d)}return window.fetch(t,a({body:f,headers:l,method:e,keepalive:c,credentials:p?"include":"omit"},v)).then((function(e){return(o=e).text()})).then((function(e){var n={url:t,status:o.status,responseText:e};if(!(0,i.isResponseSuccessful)(o.status))throw n;return n}))},t.isFetchSupported=s,t.BYTE_LIMIT=void 0;var r=n(66),i=n(169);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}var o=6e4;function s(){return"function"==typeof window.fetch&&"function"==typeof window.Request}t.BYTE_LIMIT=o},function(e,t,n){"use strict";t.__esModule=!0,t.isResponseSuccessful=function(e){return!(0===e||e>399&&e<600)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(66),i=function(){function e(){this.observers={}}var t=e.prototype;return t.observe=function(e,t){var n=this;if("function"==typeof t)return this.observers[e]||(this.observers[e]=[]),this.observers[e].push(t),function(){var r=n.observers[e].indexOf(t);r>-1&&n.observers[e].splice(r,1)}},t.sendOnly=function(e,t){var n=this.observers[e];n&&n.forEach((function(e){try{e.apply(void 0,t)}catch(e){console.log(e,e.stack)}}))},t.send=function(e,t){this.sendOnly(e+r.BEFORE_EVENT,t),this.sendOnly(e,t),this.sendOnly(e+r.AFTER_EVENT,t)},e}();t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=c(n(107)),i=c(n(172)),a=n(67),o=n(66),s=n(265);function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}var d=function(e){var t,n;function i(t,n,r){var i;return(i=e.call(this,t,n,r)||this).traceId=(0,a.generateRandomId)(),i.marks=void 0,i.spans=[],i._activeSpans={},i._activeTasks=new Set,i.blocked=!1,i.captureTimings=!1,i.breakdownTimings=[],i.sampleRate=i.options.transactionSampleRate,i.sampled=Math.random()<=i.sampleRate,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var c=i.prototype;return c.addMarks=function(e){this.marks=(0,a.merge)(this.marks||{},e)},c.mark=function(e){var t=(0,a.removeInvalidChars)(e),n=(0,a.now)()-this._start,r={};r[t]=n,this.addMarks({custom:r})},c.canReuse=function(){var e=this.options.reuseThreshold||o.REUSABILITY_THRESHOLD;return!!this.options.canReuse&&!this.ended&&(0,a.now)()-this._start<e},c.redefine=function(e,t,n){e&&(this.name=e),t&&(this.type=t),n&&(this.options.reuseThreshold=n.reuseThreshold,(0,a.extend)(this.options,n))},c.startSpan=function(e,t,n){var i=this;if(!this.ended){var o=(0,a.extend)({},n);o.onEnd=function(e){i._onSpanEnd(e)},o.traceId=this.traceId,o.sampled=this.sampled,o.sampleRate=this.sampleRate,o.parentId||(o.parentId=this.id);var s=new r.default(e,t,o);return this._activeSpans[s.id]=s,o.blocking&&this.addTask(s.id),s}},c.isFinished=function(){return!this.blocked&&0===this._activeTasks.size},c.detectFinish=function(){this.isFinished()&&this.end()},c.end=function(e){if(!this.ended){for(var t in this.ended=!0,this._end=(0,a.getTime)(e),this._activeSpans){var n=this._activeSpans[t];n.type=n.type+o.TRUNCATED_TYPE,n.end(e)}this.callOnEnd()}},c.captureBreakdown=function(){this.breakdownTimings=(0,s.captureBreakdown)(this)},c.block=function(e){this.blocked=e,this.blocked||this.detectFinish()},c.addTask=function(e){return e||(e="task-"+(0,a.generateRandomId)(16)),this._activeTasks.add(e),e},c.removeTask=function(e){this._activeTasks.delete(e)&&this.detectFinish()},c.resetFields=function(){this.spans=[],this.sampleRate=0},c._onSpanEnd=function(e){this.spans.push(e),delete this._activeSpans[e.id],this.removeTask(e.id)},c.isManaged=function(){return!!this.options.managed},i}(i.default);t.default=d},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(67),i=n(66),a=function(){function e(e,t,n){void 0===n&&(n={}),e||(e=i.NAME_UNKNOWN),t||(t=i.TYPE_CUSTOM),this.name=e,this.type=t,this.options=n,this.id=n.id||(0,r.generateRandomId)(16),this.traceId=n.traceId,this.sampled=n.sampled,this.sampleRate=n.sampleRate,this.timestamp=n.timestamp,this._start=(0,r.getTime)(n.startTime),this._end=void 0,this.ended=!1,this.outcome=void 0,this.onEnd=n.onEnd}var t=e.prototype;return t.ensureContext=function(){this.context||(this.context={})},t.addLabels=function(e){this.ensureContext();var t=this.context;t.tags||(t.tags={}),Object.keys(e).forEach((function(n){return(0,r.setLabel)(n,e[n],t.tags)}))},t.addContext=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0!==t.length&&(this.ensureContext(),r.merge.apply(void 0,[this.context].concat(t)))},t.end=function(e){this.ended||(this.ended=!0,this._end=(0,r.getTime)(e),this.callOnEnd())},t.callOnEnd=function(){"function"==typeof this.onEnd&&this.onEnd(this)},t.duration=function(){return(0,r.getDuration)(this._start,this._end)},e}(),o=a;t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.createLongTaskSpans=d,t.createFirstInputDelaySpan=f,t.createTotalBlockingTimeSpan=function(e){var t=e.start,n=e.duration,r=new o.default("Total Blocking Time",i.LONG_TASK,{startTime:t});return r.end(t+n),r},t.calculateTotalBlockingTime=l,t.calculateCumulativeLayoutShift=p,t.captureObserverEntries=function(e,t){var n=t.isHardNavigation,r=t.trStart,o=e.getEntriesByType(i.LONG_TASK).filter((function(e){return e.startTime>=r})),s={spans:d(o,c.longtask),marks:{}};if(!n)return s;var u=e.getEntriesByType(i.LARGEST_CONTENTFUL_PAINT),v=u[u.length-1];if(v){var h=parseInt(v.startTime);c.lcp=h,s.marks.largestContentfulPaint=h}var _=a.PERF.timing,g=_.fetchStart-_.navigationStart;(0,a.isRedirectInfoAvailable)(_)&&(g=0);var m=e.getEntriesByName(i.FIRST_CONTENTFUL_PAINT)[0];if(m){var E=parseInt(g>=0?m.startTime-g:m.startTime);c.fcp=E,s.marks.firstContentfulPaint=E}var T=f(e.getEntriesByType(i.FIRST_INPUT));return T&&(c.fid=T.duration(),s.spans.push(T)),l(o),p(e.getEntriesByType(i.LAYOUT_SHIFT)),s},t.PerfEntryRecorder=t.metrics=void 0;var r,i=n(66),a=n(67),o=(r=n(107))&&r.__esModule?r:{default:r};function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var c={fid:0,fcp:0,tbt:{start:1/0,duration:0},cls:{score:0,firstEntryTime:Number.NEGATIVE_INFINITY,prevEntryTime:Number.NEGATIVE_INFINITY,currentSessionScore:0},longtask:{count:0,duration:0,max:0}};t.metrics=c;var u=50;function d(e,t){for(var n=[],r=0;r<e.length;r++){var a=e[r],s=a.name,c=a.startTime,u=a.duration,d=a.attribution,f=c+u,l=new o.default("Longtask("+s+")",i.LONG_TASK,{startTime:c});if(t.count++,t.duration+=u,t.max=Math.max(u,t.max),d.length>0){var p=d[0],v=p.name,h=p.containerType,_=p.containerName,g=p.containerId,m={attribution:v,type:h};_&&(m.name=_),g&&(m.id=g),l.addContext({custom:m})}l.end(f),n.push(l)}return n}function f(e){var t=e[0];if(t){var n=t.startTime,r=t.processingStart,a=new o.default("First Input Delay",i.FIRST_INPUT,{startTime:n});return a.end(r),a}}function l(e){e.forEach((function(e){var t=e.name,n=e.startTime,r=e.duration;if(!(n<c.fcp||"self"!==t&&-1===t.indexOf("same-origin"))){c.tbt.start=Math.min(c.tbt.start,n);var i=r-u;i>0&&(c.tbt.duration+=i)}}))}function p(e){e.forEach((function(e){!e.hadRecentInput&&e.value&&((e.startTime-c.cls.firstEntryTime>5e3||e.startTime-c.cls.prevEntryTime>1e3)&&(c.cls.firstEntryTime=e.startTime,c.cls.currentSessionScore=0),c.cls.prevEntryTime=e.startTime,c.cls.currentSessionScore+=e.value,c.cls.score=Math.max(c.cls.score,c.cls.currentSessionScore))}))}var v=function(){function e(e){this.po={observe:a.noop,disconnect:a.noop},window.PerformanceObserver&&(this.po=new PerformanceObserver(e))}var t=e.prototype;return t.start=function(e,t){void 0===t&&(t={buffered:!0});try{if(!(0,a.isPerfTypeSupported)(e))return;this.po.observe(s({type:e},t))}catch(e){}},t.stop=function(){this.po.disconnect()},e}();t.PerfEntryRecorder=v},function(e,t,n){"use strict";t.__esModule=!0,t.observeUserInteractions=function(e){void 0===e&&(e=new a.PerfEntryRecorder(u));var t=(0,i.isPerfInteractionCountSupported)(),n=t?o:16;e.start(r.EVENT,{buffered:!0,durationThreshold:n}),t||e.start(r.FIRST_INPUT)},t.processUserInteractions=u,t.calculateInp=function(){if(0===c.longestInteractions.length)return d()>0?0:void 0;var e=Math.min(c.longestInteractions.length-1,Math.floor(d()/50));return c.longestInteractions[e].duration},t.interactionCount=d,t.restoreINPState=function(){c.minInteractionId=1/0,c.maxInteractionId=0,c.interactionCount=0,c.longestInteractions=[]},t.inpState=void 0;var r=n(66),i=n(67),a=n(173),o=40,s=10,c={minInteractionId:1/0,maxInteractionId:0,interactionCount:0,longestInteractions:[]};function u(e){e.getEntries().forEach((function(e){e.interactionId&&(function(e){(0,i.isPerfInteractionCountSupported)()||(c.minInteractionId=Math.min(c.minInteractionId,e.interactionId),c.maxInteractionId=Math.max(c.maxInteractionId,e.interactionId),c.interactionCount=(c.maxInteractionId-c.minInteractionId)/7+1)}(e),e.duration<o||function(e){var t=c.longestInteractions[c.longestInteractions.length-1];if(!(void 0!==t&&e.duration<=t.duration&&e.interactionId!=t.id)){var n=c.longestInteractions.filter((function(t){return t.id===e.interactionId}));if(n.length>0){var r=n[0];r.duration=Math.max(r.duration,e.duration)}else c.longestInteractions.push({id:e.interactionId,duration:e.duration});c.longestInteractions.sort((function(e,t){return t.duration-e.duration})),c.longestInteractions.splice(s)}}(e))}))}function d(){return performance.interactionCount||c.interactionCount}t.inpState=c},function(e,t,n){"use strict";t.__esModule=!0,t.reportInp=function(e){var t=(0,r.calculateInp)();if(t>=0){var n=(0,i.now)(),o=e.startTransaction(a.PAGE_EXIT,a.PAGE_EXIT,{startTime:n}),s=performance.getEntriesByType("navigation");if(s.length>0){var c=s[0].name;o.addContext({page:{url:c}})}o.addLabels({inp_value:t});var u=n+t+1;return o.end(u),(0,r.restoreINPState)(),o}};var r=n(174),i=n(67),a=n(66)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(278),i=n(178),a=n(96),o=function(){function e(){}return e.prototype.startSpan=function(e,t){if(void 0===t&&(t={}),t.childOf){var n=r.childOf(t.childOf);t.references?t.references.push(n):t.references=[n],delete t.childOf}return this._startSpan(e,t)},e.prototype.inject=function(e,t,n){return e instanceof a.default&&(e=e.context()),this._inject(e,t,n)},e.prototype.extract=function(e,t){return this._extract(e,t)},e.prototype._startSpan=function(e,t){return i.span},e.prototype._inject=function(e,t,n){},e.prototype._extract=function(e,t){return i.spanContext},e}();t.Tracer=o,t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FORMAT_BINARY="binary",t.FORMAT_TEXT_MAP="text_map",t.FORMAT_HTTP_HEADERS="http_headers",t.REFERENCE_CHILD_OF="child_of",t.REFERENCE_FOLLOWS_FROM="follows_from"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),i=n(280),a=n(176);t.tracer=null,t.spanContext=null,t.span=null,t.initialize=function(){t.tracer=new a.default,t.span=new r.default,t.spanContext=new i.default}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(96),a=n(67),o=(r=n(171))&&r.__esModule?r:{default:r};function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var c=function(e){var t,n;function r(t,n){var r;return(r=e.call(this)||this).__tracer=t,r.span=n,r.isTransaction=n instanceof o.default,r.spanContext={id:n.id,traceId:n.traceId,sampled:n.sampled},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var i=r.prototype;return i._context=function(){return this.spanContext},i._tracer=function(){return this.__tracer},i._setOperationName=function(e){this.span.name=e},i._addTags=function(e){var t=(0,a.extend)({},e);if(t.type&&(this.span.type=t.type,delete t.type),this.isTransaction){var n=t["user.id"],r=t["user.username"],i=t["user.email"];(n||r||i)&&(this.span.addContext({user:{id:n,username:r,email:i}}),delete t["user.id"],delete t["user.username"],delete t["user.email"])}this.span.addLabels(t)},i._log=function(e,t){"error"===e.event&&(e["error.object"]?this.__tracer.errorLogging.logError(e["error.object"]):e.message&&this.__tracer.errorLogging.logError(e.message))},i._finish=function(e){this.span.end(),e&&(this.span._end=e-(0,a.getTimeOrigin)())},r}(i.Span);t.default=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.__esModule=!0,t.createServiceFactory=function(){return(0,i.registerServices)(),(0,r.registerServices)(),new a.ServiceFactory};var r=n(242),i=n(259);t.observeUserInteractions=i.observeUserInteractions;var a=n(139);t.ServiceFactory=a.ServiceFactory;var o=n(67);t.isPlatformSupported=o.isPlatformSupported,t.scheduleMicroTask=o.scheduleMicroTask,t.scheduleMacroTask=o.scheduleMacroTask,t.isBrowser=o.isBrowser;var s=n(140);t.patchAll=s.patchAll,t.patchEventHandler=s.patchEventHandler;var c=n(270);t.observePageVisibility=c.observePageVisibility,t.observePageClicks=c.observePageClicks;var u=n(66);t.PAGE_LOAD_DELAY=u.PAGE_LOAD_DELAY,t.PAGE_LOAD=u.PAGE_LOAD,t.ERROR=u.ERROR,t.CONFIG_SERVICE=u.CONFIG_SERVICE,t.LOGGING_SERVICE=u.LOGGING_SERVICE,t.TRANSACTION_SERVICE=u.TRANSACTION_SERVICE,t.APM_SERVER=u.APM_SERVER,t.PERFORMANCE_MONITORING=u.PERFORMANCE_MONITORING,t.ERROR_LOGGING=u.ERROR_LOGGING,t.EVENT_TARGET=u.EVENT_TARGET,t.CLICK=u.CLICK;var d=n(273);t.getInstrumentationFlags=d.getInstrumentationFlags;var f,l=(f=n(274))&&f.__esModule?f:{default:f};t.afterFrame=l.default;var p=n(275);t.bootstrap=p.bootstrap;var v=n(276);t.createTracer=v.createTracer},function(e,t,n){"use strict";t.__esModule=!0,t.registerServices=function(){o.serviceCreators[a.ERROR_LOGGING]=function(e){var t=e.getService([a.APM_SERVER,a.CONFIG_SERVICE,a.TRANSACTION_SERVICE]),n=t[0],r=t[1],o=t[2];return new i.default(n,r,o)}};var r,i=(r=n(243))&&r.__esModule?r:{default:r},a=n(66),o=n(139)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(244),a=n(67),o=n(136),s=n(138),c=(r=n(249))&&r.__esModule?r:{default:r},u=["tags"],d=["stack","message"],f="Unhandled promise rejection: ",l=function(){function e(e,t,n){this._apmServer=e,this._configService=t,this._transactionService=n}var t=e.prototype;return t.createErrorDataModel=function(e){var t=(0,i.createStackTraces)(c.default,e),n=(0,i.filterInvalidFrames)(t),r="(inline script)",f=n[n.length-1];f&&f.filename&&(r=f.filename);var l=e.message,p=e.error,v=l,h="",_={};if(p&&"object"==typeof p){v=v||p.message,h=p.name;var g=function(e){var t=!1,n={};if(Object.keys(e).forEach((function(r){if(!(d.indexOf(r)>=0)){var i=e[r];if(null!=i&&"function"!=typeof i){if("object"==typeof i){if("function"!=typeof i.toISOString)return;i=i.toISOString()}n[r]=i,t=!0}}})),t)return n}(p);g&&(_.custom=g)}h||v&&v.indexOf(":")>-1&&(h=v.split(":")[0]);var m=this._transactionService.getCurrentTransaction(),E=m?m.context:{},T=this._configService.get("context"),S=(T.tags,function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(T,u)),y=(0,o.getPageContext)(),R=(0,a.merge)({},y,E,S,_),I={id:(0,a.generateRandomId)(),culprit:r,exception:{message:v,stacktrace:n,type:h},context:R};return m&&(I=(0,a.extend)(I,{trace_id:m.traceId,parent_id:m.id,transaction_id:m.id,transaction:{type:m.type,sampled:m.sampled}})),(0,s.truncateModel)(s.ERROR_MODEL,I)},t.logErrorEvent=function(e){if(void 0!==e){var t=this.createErrorDataModel(e);void 0!==t.exception.message&&this._apmServer.addError(t)}},t.registerListeners=function(){var e=this;window.addEventListener("error",(function(t){return e.logErrorEvent(t)})),window.addEventListener("unhandledrejection",(function(t){return e.logPromiseEvent(t)}))},t.logPromiseEvent=function(e){var t,n=e.reason;if(null==n&&(n="<no reason specified>"),"string"==typeof n.message){var r=n.name?n.name+": ":"";t={error:n,message:f+r+n.message}}else t=this._parseRejectReason(n);this.logErrorEvent(t)},t.logError=function(e){var t={};return"string"==typeof e?t.message=e:t.error=e,this.logErrorEvent(t)},t._parseRejectReason=function(e){var t={message:f};if(Array.isArray(e))t.message+="<object>";else if("object"==typeof e)try{t.message+=JSON.stringify(e),t.error=e}catch(e){t.message+="<object>"}else t.message+="function"==typeof e?"<function>":e;return t},e}();t.default=l},function(e,t,n){"use strict";t.__esModule=!0,t.createStackTraces=function(e,t){var n,r=t.error,i=t.filename,a=t.lineno,o=t.colno,s=[];if(r)try{s=e.parse(r)}catch(e){}return function(e){return 0!==e.length&&(1!==e.length||"lineNumber"in e[0])}(s)||(s=[{fileName:i,lineNumber:a,columnNumber:o}]),(n=s,n.map((function(e){return e.functionName&&(e.functionName=(n=(t=e.functionName).split("/"),t=(t=(t=n.length>1?["Object",n[n.length-1]].join("."):n[0]).replace(/.<$/gi,".<anonymous>")).replace(/^Anonymous function$/,"<anonymous>"),t=(n=t.split(".")).length>1?n[n.length-1]:n[0])),e;var t,n}))).map((function(e){var t=e.fileName,n=e.lineNumber,r=e.columnNumber,i=e.functionName,a=void 0===i?"<anonymous>":i;if(!t&&!n)return{};if(!r&&!n)return{};var o,s,c=function(e){return void 0===e&&(e=""),"<anonymous>"===e&&(e=""),e}(t),u=(o=c,s=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),o.indexOf(s)>-1&&(o=o.replace(s+"/","")),o);return function(e){return!!e&&0===window.location.href.indexOf(e)}(c)&&(u="(inline script)"),{abs_path:t,filename:u,function:a,lineno:n,colno:r}}))},t.filterInvalidFrames=function(e){return e.filter((function(e){var t=e.filename,n=e.lineno;return void 0!==t&&void 0!==n}))}},function(e,t,n){"use strict";(function(t){var n=setTimeout;function r(e){return Boolean(e&&void 0!==e.length)}function i(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,r)}else(1===e._state?s:c)(t.promise,e._value)}))):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void f((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,u(e)}catch(t){c(e,t)}var r,i}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)o(e,e._deferreds[t]);e._deferreds=null}function d(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e((function(e){n||(n=!0,s(t,e))}),(function(e){n||(n=!0,c(t,e))}))}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new d(e,t,n)),n},a.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},a.all=function(e){return new a((function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var a=i.length;function o(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(t){o(e,t)}),n)}i[e]=r,0==--a&&t(i)}catch(e){n(e)}}for(var s=0;s<i.length;s++)o(s,i[s])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)a.resolve(e[i]).then(t,n)}))},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){n(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=a}).call(this,n(246).setImmediate)},function(e,t,n){(function(e){var r=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(247),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(166))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,c=1,u={},d=!1,f=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){v(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&v(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){v(e.data)},r=function(e){a.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){v(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(v,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},l.clearImmediate=p}function p(e){delete u[e]}function v(e){if(d)setTimeout(v,0,e);else{var t=u[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(undefined,n)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(166),n(248))},function(e,t,n){e.exports=n(16)(675)},function(e,t,n){var r,i,a;!function(o,s){"use strict";i=[n(250)],void 0===(a="function"==typeof(r=function(e){var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;function i(e,t,n){if("function"==typeof Array.prototype.map)return e.map(t,n);for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=t.call(n,e[i]);return r}function a(e,t,n){if("function"==typeof Array.prototype.filter)return e.filter(t,n);for(var r=[],i=0;i<e.length;i++)t.call(n,e[i])&&r.push(e[i]);return r}return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(t){return i(a(t.stack.split("\n"),(function(e){return!!e.match(n)}),this),(function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,a=function(e,t){if("function"==typeof Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}(["eval","<anonymous>"],r[0])>-1?void 0:r[0];return new e(i,void 0,a,r[1],r[2],t)}),this)},parseFFOrSafari:function(t){return i(a(t.stack.split("\n"),(function(e){return!e.match(r)}),this),(function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var n=t.split("@"),r=this.extractLocation(n.pop()),i=n.join("@")||void 0;return new e(i,void 0,r[0],r[1],r[2],t)}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=t.message.split("\n"),i=[],a=2,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new e(void 0,void 0,s[2],s[1],void 0,r[a]))}return i},parseOpera10:function(t){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=t.stacktrace.split("\n"),i=[],a=0,o=r.length;a<o;a+=2){var s=n.exec(r[a]);s&&i.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,r[a]))}return i},parseOpera11:function(n){return i(a(n.stack.split("\n"),(function(e){return!!e.match(t)&&!e.match(/^Error created at/)}),this),(function(t){var n,r=t.split("@"),i=this.extractLocation(r.pop()),a=r.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(n=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new e(o,s,i[0],i[1],i[2],t)}),this)}}})?r.apply(t,i):r)||(e.exports=a)}()},function(e,t,n){var r,i,a;!function(n,o){"use strict";i=[],void 0===(a="function"==typeof(r=function(){function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,n,r,i,a){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})?r.apply(t,i):r)||(e.exports=a)}()},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=v(n(252)),i=v(n(253)),a=v(n(254)),o=n(138),s=n(66),c=n(67),u=n(95),d=n(255),f=n(89),l=n(168),p=n(256);function v(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(e,t){this._configService=e,this._loggingService=t,this.queue=void 0,this.throttleEvents=c.noop}var t=e.prototype;return t.init=function(){var e=this,t=this._configService.get("queueLimit"),n=this._configService.get("flushInterval"),a=this._configService.get("eventsLimit");this.queue=new r.default((function(t){var n=e.sendEvents(t);n&&n.catch((function(t){e._loggingService.warn("Failed sending events!",e._constructError(t))}))}),{queueLimit:t,flushInterval:n}),this.throttleEvents=(0,i.default)(this.queue.add.bind(this.queue),(function(){return e._loggingService.warn("Dropped events due to throttling!")}),{limit:a,interval:6e4}),this._configService.observeEvent(s.QUEUE_FLUSH,(function(){e.queue.flush()}))},t._postJson=function(e,t){var n=this,r={payload:t,headers:{"Content-Type":"application/x-ndjson"},beforeSend:this._configService.get("apmRequest")};return(0,d.compressPayload)(r).catch((function(e){return f.__DEV__&&n._loggingService.debug("Compressing the payload using CompressionStream API failed",e.message),r})).then((function(t){return n._makeHttpRequest("POST",e,t)})).then((function(e){return e.responseText}))},t._constructError=function(e){var t=e.url,n=e.status,r=e.responseText;if(void 0===n)return e;var i=t+" HTTP status: "+n;if(f.__DEV__&&r)try{var a=[],o=JSON.parse(r);o.errors&&o.errors.length>0&&(o.errors.forEach((function(e){return a.push(e.message)})),i+=" "+a.join(","))}catch(e){this._loggingService.debug("Error parsing response from APM server",e)}return new Error(i)},t._makeHttpRequest=function(e,t,n){var r=void 0===n?{}:n,i=r.timeout,a=void 0===i?s.HTTP_REQUEST_TIMEOUT:i,o=r.payload,c=r.headers,u=r.beforeSend,d=this._configService.get("sendCredentials");return!u&&(0,l.shouldUseFetchWithKeepAlive)(e,o)?(0,l.sendFetchRequest)(e,t,{keepalive:!0,timeout:a,payload:o,headers:c,sendCredentials:d}).catch((function(n){if(n instanceof TypeError)return(0,p.sendXHR)(e,t,{timeout:a,payload:o,headers:c,beforeSend:u,sendCredentials:d});throw n})):(0,p.sendXHR)(e,t,{timeout:a,payload:o,headers:c,beforeSend:u,sendCredentials:d})},t.fetchConfig=function(e,t){var n=this,r=this.getEndpoints().configEndpoint;if(!e)return u.Promise.reject("serviceName is required for fetching central config.");r+="?service.name="+e,t&&(r+="&service.environment="+t);var i=this._configService.getLocalConfig();i&&(r+="&ifnonematch="+i.etag);var a=this._configService.get("apmRequest");return this._makeHttpRequest("GET",r,{timeout:5e3,beforeSend:a}).then((function(e){var t=e.status,r=e.responseText;if(304===t)return i;var a=JSON.parse(r),o=e.getResponseHeader("etag");return o&&(a.etag=o.replace(/["]/g,""),n._configService.setLocalConfig(a,!0)),a})).catch((function(e){var t=n._constructError(e);return u.Promise.reject(t)}))},t.createMetaData=function(){var e=this._configService,t={service:{name:e.get("serviceName"),version:e.get("serviceVersion"),agent:{name:"rum-js",version:e.version},language:{name:"javascript"},environment:e.get("environment")},labels:e.get("context.tags")};return(0,o.truncateModel)(o.METADATA_MODEL,t)},t.addError=function(e){var t;this.throttleEvents(((t={})[s.ERRORS]=e,t))},t.addTransaction=function(e){var t;this.throttleEvents(((t={})[s.TRANSACTIONS]=e,t))},t.ndjsonErrors=function(e,t){var n=t?"e":"error";return e.map((function(e){var r;return a.default.stringify(((r={})[n]=t?(0,d.compressError)(e):e,r))}))},t.ndjsonMetricsets=function(e){return e.map((function(e){return a.default.stringify({metricset:e})})).join("")},t.ndjsonTransactions=function(e,t){var n=this,r=t?"x":"transaction";return e.map((function(e){var i,o="",s="";return t||(e.spans&&(o=e.spans.map((function(e){return a.default.stringify({span:e})})).join(""),delete e.spans),e.breakdown&&(s=n.ndjsonMetricsets(e.breakdown),delete e.breakdown)),a.default.stringify(((i={})[r]=t?(0,d.compressTransaction)(e):e,i))+o+s}))},t.sendEvents=function(e){var t,n;if(0!==e.length){for(var r=[],i=[],o=0;o<e.length;o++){var c=e[o];c[s.TRANSACTIONS]&&r.push(c[s.TRANSACTIONS]),c[s.ERRORS]&&i.push(c[s.ERRORS])}if(0!==r.length||0!==i.length){var u=this._configService,f=((t={})[s.TRANSACTIONS]=r,t[s.ERRORS]=i,t),l=u.applyFilters(f);if(l){var p=u.get("apiVersion")>2,v=[],h=this.createMetaData(),_=p?"m":"metadata";v.push(a.default.stringify(((n={})[_]=p?(0,d.compressMetadata)(h):h,n)));var g=(v=v.concat(this.ndjsonErrors(l[s.ERRORS],p),this.ndjsonTransactions(l[s.TRANSACTIONS],p))).join(""),m=this.getEndpoints().intakeEndpoint;return this._postJson(m,g)}this._loggingService.warn("Dropped payload due to filtering!")}}},t.getEndpoints=function(){var e=this._configService.get("serverUrl"),t=this._configService.get("apiVersion");return{intakeEndpoint:e+(this._configService.get("serverUrlPrefix")||"/intake/v"+t+"/rum/events"),configEndpoint:e+"/config/v1/rum/agents"}},e}();t.default=h},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){function e(e,t){void 0===t&&(t={}),this.onFlush=e,this.items=[],this.queueLimit=t.queueLimit||-1,this.flushInterval=t.flushInterval||0,this.timeoutId=void 0}var t=e.prototype;return t._setTimer=function(){var e=this;this.timeoutId=setTimeout((function(){return e.flush()}),this.flushInterval)},t._clear=function(){void 0!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.items=[]},t.flush=function(){this.onFlush(this.items),this._clear()},t.add=function(e){this.items.push(e),-1!==this.queueLimit&&this.items.length>=this.queueLimit?this.flush():void 0===this.timeoutId&&this._setTimer()},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){var r,i=this,a=n.limit,o=n.interval,s=0;return function(){return s++,void 0===r&&(r=setTimeout((function(){s=0,r=void 0}),o)),s>a&&"function"==typeof t?t.apply(i,arguments):e.apply(i,arguments)}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=function(){function e(){}return e.stringify=function(e){return JSON.stringify(e)+"\n"},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.compressMetadata=function(e){var t=e.service,n=e.labels,r=t.agent,i=t.language;return{se:{n:t.name,ve:t.version,a:{n:r.name,ve:r.version},la:{n:i.name},en:t.environment},l:n}},t.compressTransaction=function(e){var t=e.spans.map((function(t){var n={id:t.id,n:t.name,t:t.type,s:t.start,d:t.duration,c:s(t.context),o:t.outcome,sr:t.sample_rate};return t.parent_id!==e.id&&(n.pid=t.parent_id),!0===t.sync&&(n.sy=!0),t.subtype&&(n.su=t.subtype),t.action&&(n.ac=t.action),n})),n={id:e.id,tid:e.trace_id,n:e.name,t:e.type,d:e.duration,c:s(e.context),k:c(e.marks),me:d(e.breakdown),y:t,yc:{sd:t.length},sm:e.sampled,sr:e.sample_rate,o:e.outcome};if(e.experience){var r=e.experience,i=r.cls,a=r.fid,o=r.tbt,u=r.longtask;n.exp={cls:i,fid:a,tbt:o,lt:u}}if(e.session){var f=e.session,l=f.id,p=f.sequence;n.ses={id:l,seq:p}}return n},t.compressError=function(e){var t,n=e.exception,r={id:e.id,cl:e.culprit,ex:{mg:n.message,st:(t=n.stacktrace,t.map((function(e){return{ap:e.abs_path,f:e.filename,fn:e.function,li:e.lineno,co:e.colno}}))),t:e.type},c:s(e.context)},i=e.transaction;return i&&(r.tid=e.trace_id,r.pid=e.parent_id,r.xid=e.transaction_id,r.x={t:i.type,sm:i.sampled}),r},t.compressMetricsets=d,t.compressPayload=function(e,t){void 0===t&&(t="gzip");var n="function"==typeof CompressionStream;return new r.Promise((function(r){if(!n)return r(e);if((0,a.isBeaconInspectionEnabled)())return r(e);var i=e.payload,o=e.headers,s=e.beforeSend,c=new Blob([i]).stream().pipeThrough(new CompressionStream(t));return new Response(c).blob().then((function(e){return o["Content-Encoding"]=t,r({payload:e,headers:o,beforeSend:s})}))}))};var r=n(95),i=n(167),a=n(67);function o(e){return{ts:e.transfer_size,ebs:e.encoded_body_size,dbs:e.decoded_body_size}}function s(e){if(!e)return null;var t={},n=e.page,r=e.http,i=e.response,a=e.destination,s=e.user,c=e.custom;if(n&&(t.p={rf:n.referer,url:n.url}),r&&(t.h=function(e){var t={},n=e.method,r=e.status_code,i=e.url,a=e.response;return t.url=i,n&&(t.mt=n),r&&(t.sc=r),a&&(t.r=o(a)),t}(r)),i&&(t.r=o(i)),a){var u=a.service;t.dt={se:{n:u.name,t:u.type,rc:u.resource},ad:a.address,po:a.port}}return s&&(t.u={id:s.id,un:s.username,em:s.email}),c&&(t.cu=c),t}function c(e){if(!e)return null;var t=function(e){if(!e)return null;var t={};return i.COMPRESSED_NAV_TIMING_MARKS.forEach((function(n,r){var a=i.NAVIGATION_TIMING_MARKS[r];t[n]=e[a]})),t}(e.navigationTiming);return{nt:t,a:u(t,e.agent)}}function u(e,t){var n={};if(e&&(n={fb:e.rs,di:e.di,dc:e.dc}),t){var r=t.firstContentfulPaint,i=t.largestContentfulPaint;r&&(n.fp=r),i&&(n.lp=i)}return 0===Object.keys(n).length?null:n}function d(e){return e.map((function(e){var t=e.span,n=e.samples;return{y:{t:t.type},sa:{ysc:{v:n["span.self_time.count"].value},yss:{v:n["span.self_time.sum.us"].value}}}}))}},function(e,t,n){"use strict";t.__esModule=!0,t.sendXHR=function(e,t,n){var o=n.timeout,s=void 0===o?HTTP_REQUEST_TIMEOUT:o,c=n.payload,u=n.headers,d=n.beforeSend,f=n.sendCredentials;return new a.Promise((function(n,a){var o=new window.XMLHttpRequest;if(o[r.XHR_IGNORE]=!0,o.open(e,t,!0),o.timeout=s,o.withCredentials=f,u)for(var l in u)u.hasOwnProperty(l)&&o.setRequestHeader(l,u[l]);o.onreadystatechange=function(){if(4===o.readyState){var e=o.status,r=o.responseText;(0,i.isResponseSuccessful)(e)?n(o):a({url:t,status:e,responseText:r})}},o.onerror=function(){var e=o.status,n=o.responseText;a({url:t,status:e,responseText:n})};var p=!0;"function"==typeof d&&(p=d({url:t,method:e,headers:u,payload:c,xhr:o})),p?o.send(c):a({url:t,status:0,responseText:"Request rejected by user configuration."})}))};var r=n(117),i=n(169),a=n(95)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(67),a=(r=n(170))&&r.__esModule?r:{default:r},o=n(66);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}var c=function(){function e(){this.config={serviceName:"",serviceVersion:"",environment:"",serverUrl:"http://localhost:8200",serverUrlPrefix:"",active:!0,instrument:!0,disableInstrumentations:[],logLevel:"warn",breakdownMetrics:!1,ignoreTransactions:[],eventsLimit:80,queueLimit:-1,flushInterval:500,distributedTracing:!0,distributedTracingOrigins:[],distributedTracingHeaderName:"traceparent",pageLoadTraceId:"",pageLoadSpanId:"",pageLoadSampled:!1,pageLoadTransactionName:"",propagateTracestate:!1,transactionSampleRate:1,centralConfig:!1,monitorLongtasks:!0,apiVersion:2,context:{},session:!1,apmRequest:null,sendCredentials:!1},this.events=new a.default,this.filters=[],this.version=""}var t=e.prototype;return t.init=function(){var e=function(e){if(!e)return{};for(var t={},n=/^data-([\w-]+)$/,r=e.attributes,i=0;i<r.length;i++){var a=r[i];n.test(a.nodeName)&&(t[a.nodeName.match(n)[1].split("-").map((function(e,t){return t>0?e.charAt(0).toUpperCase()+e.substring(1):e})).join("")]=a.value||a.nodeValue)}return t}((0,i.getCurrentScript)());this.setConfig(e)},t.setVersion=function(e){this.version=e},t.addFilter=function(e){if("function"!=typeof e)throw new Error("Argument to must be function");this.filters.push(e)},t.applyFilters=function(e){for(var t=0;t<this.filters.length;t++)if(!(e=this.filters[t](e)))return;return e},t.get=function(e){return e.split(".").reduce((function(e,t){return e&&e[t]}),this.config)},t.setUserContext=function(e){void 0===e&&(e={});var t={},n=e,r=n.id,a=n.username,o=n.email;"number"!=typeof r&&"string"!=typeof r||(t.id=r),"string"==typeof a&&(t.username=a),"string"==typeof o&&(t.email=o),this.config.context.user=(0,i.extend)(this.config.context.user||{},t)},t.setCustomContext=function(e){void 0===e&&(e={}),this.config.context.custom=(0,i.extend)(this.config.context.custom||{},e)},t.addLabels=function(e){var t=this;this.config.context.tags||(this.config.context.tags={}),Object.keys(e).forEach((function(n){return(0,i.setLabel)(n,e[n],t.config.context.tags)}))},t.setConfig=function(e){void 0===e&&(e={});var t=e,n=t.transactionSampleRate,r=t.serverUrl;r&&(e.serverUrl=r.replace(/\/+$/,"")),(0,i.isUndefined)(n)||(n<1e-4&&n>0&&(n=1e-4),e.transactionSampleRate=Math.round(1e4*n)/1e4),(0,i.merge)(this.config,e),this.events.send(o.CONFIG_CHANGE,[this.config])},t.validate=function(e){void 0===e&&(e={});var t=["serviceName","serverUrl"],n=Object.keys(this.config),r={missing:[],invalid:[],unknown:[]};Object.keys(e).forEach((function(i){-1===t.indexOf(i)||e[i]||r.missing.push(i),-1===n.indexOf(i)&&r.unknown.push(i)})),e.serviceName&&!/^[a-zA-Z0-9 _-]+$/.test(e.serviceName)&&r.invalid.push({key:"serviceName",value:e.serviceName,allowed:"a-z, A-Z, 0-9, _, -, <space>"});var i=e.transactionSampleRate;return void 0!==i&&("number"!=typeof i||isNaN(i)||i<0||i>1)&&r.invalid.push({key:"transactionSampleRate",value:i,allowed:"Number between 0 and 1"}),r},t.getLocalConfig=function(){var e=sessionStorage;this.config.session&&(e=localStorage);var t=e.getItem(o.LOCAL_CONFIG_KEY);if(t)return JSON.parse(t)},t.setLocalConfig=function(e,t){if(e){t&&(e=s({},this.getLocalConfig(),e));var n=sessionStorage;this.config.session&&(n=localStorage),n.setItem(o.LOCAL_CONFIG_KEY,JSON.stringify(e))}},t.dispatchEvent=function(e,t){this.events.send(e,t)},t.observeEvent=function(e,t){return this.events.observe(e,t)},e}(),u=c;t.default=u},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(67),i=function(){function e(e){void 0===e&&(e={}),this.levels=["trace","debug","info","warn","error"],this.level=e.level||"warn",this.prefix=e.prefix||"",this.resetLogMethods()}var t=e.prototype;return t.shouldLog=function(e){return this.levels.indexOf(e)>=this.levels.indexOf(this.level)},t.setLevel=function(e){e!==this.level&&(this.level=e,this.resetLogMethods())},t.resetLogMethods=function(){var e=this;this.levels.forEach((function(t){e[t]=e.shouldLog(t)?function(){var e=t;"trace"!==t&&"debug"!==t||(e="info");var n=arguments;if(n[0]=this.prefix+n[0],console){var r=console[e]||console.log;"function"==typeof r&&r.apply(console,n)}}:r.noop}))},e}(),a=i;t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.registerServices=function(){o.serviceCreators[a.TRANSACTION_SERVICE]=function(e){var t=e.getService([a.LOGGING_SERVICE,a.CONFIG_SERVICE]),n=t[0],r=t[1];return new i.default(n,r)},o.serviceCreators[a.PERFORMANCE_MONITORING]=function(e){var t=e.getService([a.APM_SERVER,a.CONFIG_SERVICE,a.LOGGING_SERVICE,a.TRANSACTION_SERVICE]),n=t[0],i=t[1],o=t[2],s=t[3];return new r.default(n,i,o,s)}};var r=u(n(260)),i=u(n(264)),a=n(66),o=n(139),s=n(174);t.observeUserInteractions=s.observeUserInteractions;var c=n(175);function u(e){return e&&e.__esModule?e:{default:e}}t.reportInp=c.reportInp},function(e,t,n){"use strict";t.__esModule=!0,t.groupSmallContinuouslySimilarSpans=f,t.adjustTransaction=l,t.default=void 0;var r=n(67),i=n(137),a=n(140),o=n(117),s=n(66),c=n(138),u=n(89),d=.05;function f(e,t,n){e.sort((function(e,t){return e._start-t._start}));var r=[],i=1;return e.forEach((function(a,o){if(0===r.length)r.push(a);else{var s=r[r.length-1],c=s.type===a.type&&s.subtype===a.subtype&&s.action===a.action&&s.name===a.name&&a.duration()/t<n&&(a._start-s._end)/t<n,u=e.length===o+1;c&&(i++,s._end=a._end),i>1&&(!c||u)&&(s.name=i+"x "+s.name,i=1),c||r.push(a)}})),r}function l(e){if(e.sampled){var t=e.spans.filter((function(t){return t.duration()>0&&t._start>=e._start&&t._end<=e._end}));if(e.isManaged()){var n=f(t,e.duration(),d);e.spans=n}else e.spans=t}else e.resetFields();return e}var p=function(){function e(e,t,n,r){this._apmServer=e,this._configService=t,this._logginService=n,this._transactionService=r}var t=e.prototype;return t.init=function(e){var t=this;void 0===e&&(e={}),this._configService.events.observe(s.TRANSACTION_END+s.AFTER_EVENT,(function(e){var n=t.createTransactionPayload(e);n&&(t._apmServer.addTransaction(n),t._configService.dispatchEvent(s.QUEUE_ADD_TRANSACTION))})),e[s.HISTORY]&&a.patchEventHandler.observe(s.HISTORY,this.getHistorySub()),e[s.XMLHTTPREQUEST]&&a.patchEventHandler.observe(s.XMLHTTPREQUEST,this.getXHRSub()),e[s.FETCH]&&a.patchEventHandler.observe(s.FETCH,this.getFetchSub())},t.getHistorySub=function(){var e=this._transactionService;return function(t,n){n.source===s.HISTORY&&t===s.INVOKE&&e.startTransaction(n.data.title,"route-change",{managed:!0,canReuse:!0})}},t.getXHRSub=function(){var e=this;return function(t,n){n.source!==s.XMLHTTPREQUEST||o.globalState.fetchInProgress||e.processAPICalls(t,n)}},t.getFetchSub=function(){var e=this;return function(t,n){n.source===s.FETCH&&e.processAPICalls(t,n)}},t.processAPICalls=function(e,t){var n=this._configService,a=this._transactionService;if(t.data&&t.data.url){var o=this._apmServer.getEndpoints();if(Object.keys(o).some((function(e){return-1!==t.data.url.indexOf(o[e])})))return}if(e===s.SCHEDULE&&t.data){var c=t.data,d=new i.Url(c.url),f=c.method+" "+(d.relative?d.path:(0,r.stripQueryStringFromUrl)(d.href));a.getCurrentTransaction()||a.startTransaction(f,s.HTTP_REQUEST_TYPE,{managed:!0});var l=a.startSpan(f,"external.http",{blocking:!0});if(!l)return;var p=n.get("distributedTracing"),v=n.get("distributedTracingOrigins"),h=new i.Url(window.location.href),_=(0,r.checkSameOrigin)(d.origin,h.origin)||(0,r.checkSameOrigin)(d.origin,v),g=c.target;p&&_&&g?(this.injectDtHeader(l,g),n.get("propagateTracestate")&&this.injectTSHeader(l,g)):u.__DEV__&&this._logginService.debug("Could not inject distributed tracing header to the request origin ('"+d.origin+"') from the current origin ('"+h.origin+"')"),c.sync&&(l.sync=c.sync),c.span=l}else if(e===s.INVOKE){var m=t.data;if(m&&m.span){var E,T,S=m.span,y=m.response,R=m.target;E=y?y.status:R.status,T="abort"==m.status||m.aborted?s.OUTCOME_UNKNOWN:E>=400||0==E?s.OUTCOME_FAILURE:s.OUTCOME_SUCCESS,S.outcome=T;var I=a.getCurrentTransaction();I&&I.type===s.HTTP_REQUEST_TYPE&&(I.outcome=T),a.endSpan(S,m)}}},t.injectDtHeader=function(e,t){var n=this._configService.get("distributedTracingHeaderName"),i=(0,r.getDtHeaderValue)(e);(0,r.isDtHeaderValid)(i)&&i&&n&&(0,r.setRequestHeader)(t,n,i)},t.injectTSHeader=function(e,t){var n=(0,r.getTSHeaderValue)(e);n&&(0,r.setRequestHeader)(t,"tracestate",n)},t.extractDtHeader=function(e){var t=this._configService.get("distributedTracingHeaderName");if(e)return(0,r.parseDtHeaderValue)(e[t])},t.filterTransaction=function(e){var t=e.duration();if(!t){if(u.__DEV__){var n="transaction("+e.id+", "+e.name+") was discarded! ";n+=0===t?"Transaction duration is 0":"Transaction wasn't ended",this._logginService.debug(n)}return!1}if(e.isManaged()){if(t>6e4)return u.__DEV__&&this._logginService.debug("transaction("+e.id+", "+e.name+") was discarded! Transaction duration ("+t+") is greater than managed transaction threshold (60000)"),!1;if(e.sampled&&0===e.spans.length)return u.__DEV__&&this._logginService.debug("transaction("+e.id+", "+e.name+") was discarded! Transaction does not have any spans"),!1}return!0},t.createTransactionDataModel=function(e){var t=e._start,n=e.spans.map((function(n){var r={id:n.id,transaction_id:e.id,parent_id:n.parentId||e.id,trace_id:e.traceId,name:n.name,type:n.type,subtype:n.subtype,action:n.action,sync:n.sync,start:parseInt(n._start-t),duration:n.duration(),context:n.context,outcome:n.outcome,sample_rate:n.sampleRate};return(0,c.truncateModel)(c.SPAN_MODEL,r)})),r={id:e.id,trace_id:e.traceId,session:e.session,name:e.name,type:e.type,duration:e.duration(),spans:n,context:e.context,marks:e.marks,breakdown:e.breakdownTimings,span_count:{started:n.length},sampled:e.sampled,sample_rate:e.sampleRate,experience:e.experience,outcome:e.outcome};return(0,c.truncateModel)(c.TRANSACTION_MODEL,r)},t.createTransactionPayload=function(e){var t=l(e);if(this.filterTransaction(t))return this.createTransactionDataModel(e);this._configService.dispatchEvent(s.TRANSACTION_IGNORE)},e}();t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.patchXMLHttpRequest=function(e){var t=XMLHttpRequest.prototype;if(t&&t[i.ADD_EVENT_LISTENER_STR])var n="readystatechange",a="load",o="error",s=(0,r.patchMethod)(t,"open",(function(){return function(e,t){return e[r.XHR_IGNORE]||(e[r.XHR_METHOD]=t[0],e[r.XHR_URL]=t[1],e[r.XHR_SYNC]=!1===t[2]),s.apply(e,t)}})),c=(0,r.patchMethod)(t,"send",(function(){return function(t,s){if(t[r.XHR_IGNORE])return c.apply(t,s);var d={source:i.XMLHTTPREQUEST,state:"",type:"macroTask",data:{target:t,method:t[r.XHR_METHOD],sync:t[r.XHR_SYNC],url:t[r.XHR_URL],status:""}};try{return function(t){if(t.state!==i.SCHEDULE){t.state=i.SCHEDULE,e(i.SCHEDULE,t);var r=t.data.target;s(n),s(a),s("timeout"),s(o),s("abort")}function s(e){r[i.ADD_EVENT_LISTENER_STR](e,(function(e){var i=e.type;i===n?4===r.readyState&&0!==r.status&&u(t,"success"):u(t,i===a?"success":i)}))}}(d),c.apply(t,s)}catch(e){throw u(d,o),e}}}));function u(t,n){t.state!==i.INVOKE&&(t.state=i.INVOKE,t.data.status=n,e(i.INVOKE,t))}};var r=n(117),i=n(66)},function(e,t,n){"use strict";t.__esModule=!0,t.patchFetch=function(e){if((0,s.isFetchSupported)()){var t=window.fetch;window.fetch=function(s,u){var d,f,l=this,p=arguments,v=s instanceof URL;if("string"==typeof s||v)d=new Request(s,u),f=v?d.url:s;else{if(!s)return t.apply(l,p);f=(d=s).url}var h={source:a.FETCH,state:"",type:"macroTask",data:{target:d,method:d.method,url:f,aborted:!1}};return new r.Promise((function(r,s){var u;i.globalState.fetchInProgress=!0,function(t){t.state=a.SCHEDULE,e(a.SCHEDULE,t)}(h);try{u=t.apply(l,[d])}catch(e){return s(e),h.data.error=e,n(h),void(i.globalState.fetchInProgress=!1)}u.then((function(e){var t=e.clone?e.clone():{};r(e),(0,o.scheduleMicroTask)((function(){h.data.response=e;var r=t.body;r?function(e,t){var r=e.getReader();!function e(){r.read().then((function(r){r.done?n(t):e()}),(function(e){c(t,e)}))}()}(r,h):n(h)}))}),(function(e){s(e),(0,o.scheduleMicroTask)((function(){c(h,e)}))})),i.globalState.fetchInProgress=!1}))}}function n(t){t.state=a.INVOKE,e(a.INVOKE,t)}function c(e,t){e.data.aborted=function(e){return e&&"AbortError"===e.name}(t),e.data.error=t,n(e)}};var r=n(95),i=n(117),a=n(66),o=n(67),s=n(168)},function(e,t,n){"use strict";t.__esModule=!0,t.patchHistory=function(e){if(window.history){var t=history.pushState;"function"==typeof t&&(history.pushState=function(n,i,a){var o={source:r.HISTORY,data:{state:n,title:i,url:a}};e(r.INVOKE,o),t.apply(this,arguments)})}};var r=n(66)},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(95),a=(r=n(171))&&r.__esModule?r:{default:r},o=n(173),s=n(67),c=n(266),u=n(66),d=n(136),f=n(89),l=n(137),p=function(){function e(e,t){var n=this;this._config=t,this._logger=e,this.currentTransaction=void 0,this.respIntervalId=void 0,this.recorder=new o.PerfEntryRecorder((function(e){var t=n.getCurrentTransaction();if(t&&t.captureTimings){var r,i=t.type===u.PAGE_LOAD,a=(0,o.captureObserverEntries)(e,{isHardNavigation:i,trStart:i?0:t._start}),s=a.spans,c=a.marks;(r=t.spans).push.apply(r,s),t.addMarks({agent:c})}}))}var t=e.prototype;return t.createCurrentTransaction=function(e,t,n){var r=new a.default(e,t,n);return this.currentTransaction=r,r},t.getCurrentTransaction=function(){if(this.currentTransaction&&!this.currentTransaction.ended)return this.currentTransaction},t.createOptions=function(e){var t=this._config.config,n={transactionSampleRate:t.transactionSampleRate},r=(0,s.extend)(n,e);return r.managed&&(r=(0,s.extend)({pageLoadTraceId:t.pageLoadTraceId,pageLoadSampled:t.pageLoadSampled,pageLoadSpanId:t.pageLoadSpanId,pageLoadTransactionName:t.pageLoadTransactionName},r)),r},t.startManagedTransaction=function(e,t,n){var r=this.getCurrentTransaction(),i=!1;if(r)if(r.canReuse()&&n.canReuse){var a=r.type,o=u.TRANSACTION_TYPE_ORDER.indexOf(r.type),s=u.TRANSACTION_TYPE_ORDER.indexOf(t);o>=0&&s<o&&(a=t),f.__DEV__&&this._logger.debug("redefining transaction("+r.id+", "+r.name+", "+r.type+")","to","("+(e||r.name)+", "+a+")",r),r.redefine(e,a,n),i=!0}else f.__DEV__&&this._logger.debug("ending previous transaction("+r.id+", "+r.name+")",r),r.end(),r=this.createCurrentTransaction(e,t,n);else r=this.createCurrentTransaction(e,t,n);return r.type===u.PAGE_LOAD&&(i||(this.recorder.start(u.LARGEST_CONTENTFUL_PAINT),this.recorder.start(u.PAINT),this.recorder.start(u.FIRST_INPUT),this.recorder.start(u.LAYOUT_SHIFT)),n.pageLoadTraceId&&(r.traceId=n.pageLoadTraceId),n.pageLoadSampled&&(r.sampled=n.pageLoadSampled),r.name===u.NAME_UNKNOWN&&n.pageLoadTransactionName&&(r.name=n.pageLoadTransactionName)),!i&&this._config.get("monitorLongtasks")&&this.recorder.start(u.LONG_TASK),r.sampled&&(r.captureTimings=!0),r},t.startTransaction=function(e,t,n){var r,i=this,o=this.createOptions(n),s=!0;return o.managed?this.currentTransaction===(r=this.startManagedTransaction(e,t,o))&&(s=!1):r=new a.default(e,t,o),r.onEnd=function(){return i.handleTransactionEnd(r)},s&&(f.__DEV__&&this._logger.debug("startTransaction("+r.id+", "+r.name+", "+r.type+")"),this._config.events.send(u.TRANSACTION_START,[r])),r},t.handleTransactionEnd=function(e){var t=this;this.recorder.stop();var n=window.location.href;return i.Promise.resolve().then((function(){var r=e.name,i=e.type;if(f.state.lastHiddenStart>=e._start)return f.__DEV__&&t._logger.debug("transaction("+e.id+", "+r+", "+i+") was discarded! The page was hidden during the transaction!"),void t._config.dispatchEvent(u.TRANSACTION_IGNORE);if(t.shouldIgnoreTransaction(r)||i===u.TEMPORARY_TYPE)return f.__DEV__&&t._logger.debug("transaction("+e.id+", "+r+", "+i+") is ignored"),void t._config.dispatchEvent(u.TRANSACTION_IGNORE);if(i===u.PAGE_LOAD){var a=t._config.get("pageLoadTransactionName");if(r===u.NAME_UNKNOWN&&a&&(e.name=a),e.captureTimings){var p=o.metrics.cls,v=o.metrics.fid,h=o.metrics.tbt,_=o.metrics.longtask;h.duration>0&&e.spans.push((0,o.createTotalBlockingTimeSpan)(h)),e.experience={},(0,s.isPerfTypeSupported)(u.LONG_TASK)&&(e.experience.tbt=h.duration),(0,s.isPerfTypeSupported)(u.LAYOUT_SHIFT)&&(e.experience.cls=p.score),v>0&&(e.experience.fid=v),_.count>0&&(e.experience.longtask={count:_.count,sum:_.duration,max:_.max})}t.setSession(e)}e.name===u.NAME_UNKNOWN&&(e.name=(0,l.slugifyUrl)(n)),(0,c.captureNavigation)(e),t.adjustTransactionTime(e),t._config.get("breakdownMetrics")&&e.captureBreakdown();var g=t._config.get("context");(0,d.addTransactionContext)(e,g),t._config.events.send(u.TRANSACTION_END,[e]),f.__DEV__&&t._logger.debug("end transaction("+e.id+", "+e.name+", "+e.type+")",e)}),(function(n){f.__DEV__&&t._logger.debug("error ending transaction("+e.id+", "+e.name+")",n)}))},t.setSession=function(e){var t=this._config.get("session");if(t){"boolean"==typeof t||t.timestamp&&Date.now()-t.timestamp>u.SESSION_TIMEOUT?e.session={id:(0,s.generateRandomId)(16),sequence:1}:e.session={id:t.id,sequence:t.sequence?t.sequence+1:1};var n={session:{id:e.session.id,sequence:e.session.sequence,timestamp:Date.now()}};this._config.setConfig(n),this._config.setLocalConfig(n,!0)}},t.adjustTransactionTime=function(e){var t=e.spans,n=(0,s.getEarliestSpan)(t);n&&n._start<e._start&&(e._start=n._start);var r=((0,s.getLatestNonXHRSpan)(t)||{})._end||0;if(e.type===u.PAGE_LOAD){var i=e._end-u.PAGE_LOAD_DELAY,a=o.metrics.lcp||0,c=((0,s.getLatestXHRSpan)(t)||{})._end||0;e._end=Math.max(r,c,a,i)}else r>e._end&&(e._end=r);this.truncateSpans(t,e._end)},t.truncateSpans=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];r._end>t&&(r._end=t,r.type+=u.TRUNCATED_TYPE),r._start>t&&(r._start=t)}},t.shouldIgnoreTransaction=function(e){var t=this._config.get("ignoreTransactions");if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof r.test){if(r.test(e))return!0}else if(r===e)return!0}return!1},t.startSpan=function(e,t,n){var r=this.getCurrentTransaction();r||(r=this.createCurrentTransaction(void 0,u.TEMPORARY_TYPE,this.createOptions({canReuse:!0,managed:!0})));var i=r.startSpan(e,t,n);return f.__DEV__&&this._logger.debug("startSpan("+e+", "+i.type+")","on transaction("+r.id+", "+r.name+")"),i},t.endSpan=function(e,t){if(e){if(f.__DEV__){var n=this.getCurrentTransaction();n&&this._logger.debug("endSpan("+e.name+", "+e.type+")","on transaction("+n.id+", "+n.name+")")}e.end(null,t)}},e}();t.default=p},function(e,t,n){"use strict";t.__esModule=!0,t.captureBreakdown=function(e,t){void 0===t&&(t=r.PERF.timing);var n=[],o=e.name,c=e.type,u=e.sampled,d={name:o,type:c};if(!u)return n;if(c===i.PAGE_LOAD&&t)for(var f=0;f<a.length;f++){var l=a[f],p=t[l[0]],v=t[l[1]],h=(0,r.getDuration)(p,v);0!==h&&null!=h&&n.push(s(d,{details:{type:l[2]},duration:h}))}else{var _=function(e){var t={},n=function(e){var t=e.spans,n=e._start,r=e._end;if(0===t.length)return e.duration();t.sort((function(e,t){return e._start-t._start}));for(var i=t[0],a=i._end,o=i._start,s=a,c=o-n,u=1;u<t.length;u++)o=(i=t[u])._start,a=i._end,o>s?(c+=o-s,s=a):a>s&&(s=a);return s<r&&(c+=r-s),c}(e);t.app={count:1,duration:n};for(var r=e.spans,a=0;a<r.length;a++){var o=r[a],s=o.duration();if(0!==s&&null!=s){var c=o.type,u=o.subtype,d=c.replace(i.TRUNCATED_TYPE,"");u&&(d+="."+u),t[d]||(t[d]={duration:0,count:0}),t[d].count++,t[d].duration+=s}}return t}(e);Object.keys(_).forEach((function(e){var t=e.split("."),r=t[0],i=t[1],a=_[e],o=a.duration,c=a.count;n.push(s(d,{details:{type:r,subtype:i},duration:o,count:c}))}))}return n};var r=n(67),i=n(66),a=[["domainLookupStart","domainLookupEnd","DNS"],["connectStart","connectEnd","TCP"],["requestStart","responseStart","Request"],["responseStart","responseEnd","Response"],["domLoading","domComplete","Processing"],["loadEventStart","loadEventEnd","Load"]];function o(e){return{value:e}}function s(e,t){var n=t.details,r=t.count,i=void 0===r?1:r,a=t.duration;return{transaction:e,span:n,samples:{"span.self_time.count":o(i),"span.self_time.sum.us":o(1e3*a)}}}},function(e,t,n){"use strict";t.__esModule=!0,t.captureNavigation=function(e){if(e.captureTimings){var t=e._end;if(e.type===i.PAGE_LOAD){if(e.marks&&e.marks.custom){var n=e.marks.custom;Object.keys(n).forEach((function(t){n[t]+=e._start}))}e._start=0;var d=r.PERF.timing,f=(0,r.isRedirectInfoAvailable)(d)?d.redirectStart:d.fetchStart;(0,o.createNavigationTimingSpans)(d,f,0,t).forEach((function(t){t.traceId=e.traceId,t.sampled=e.sampled,t.pageResponse&&e.options.pageLoadSpanId&&(t.id=e.options.pageLoadSpanId),e.spans.push(t)})),e.addMarks((0,u.getPageLoadMarks)(d))}if((0,r.isPerfTimelineSupported)()){var l=e._start,p=r.PERF.getEntriesByType(i.RESOURCE);(0,c.createResourceTimingSpans)(p,a.state.bootstrapTime,l,t).forEach((function(t){return e.spans.push(t)}));var v=r.PERF.getEntriesByType(i.MEASURE);(0,s.createUserTimingSpans)(v,l,t).forEach((function(t){return e.spans.push(t)}))}}else e.type===i.PAGE_LOAD&&(e._start=0)};var r=n(67),i=n(66),a=n(89),o=n(267);t.createNavigationTimingSpans=o.createNavigationTimingSpans;var s=n(268);t.createUserTimingSpans=s.createUserTimingSpans;var c=n(269);t.createResourceTimingSpans=c.createResourceTimingSpans;var u=n(167);t.getPageLoadMarks=u.getPageLoadMarks},function(e,t,n){"use strict";t.__esModule=!0,t.createNavigationTimingSpans=function(e,t,n,r){for(var s=[],c=0;c<o.length;c++){var u=e[o[c][0]],d=e[o[c][1]];if((0,i.shouldCreateSpan)(u,d,n,r,t)){var f=new a.default(o[c][2],"hard-navigation.browser-timing"),l=null;"requestStart"===o[c][0]&&(f.pageResponse=!0,l={url:location.origin}),f._start=u-t,f.end(d-t,l),s.push(f)}}return s};var r,i=n(141),a=(r=n(107))&&r.__esModule?r:{default:r},o=[["redirectStart","redirectEnd","Redirect"],["domainLookupStart","domainLookupEnd","Domain lookup"],["connectStart","connectEnd","Making a connection to the server"],["requestStart","responseEnd","Requesting and receiving the document"],["domLoading","domInteractive","Parsing the document, executing sync. scripts"],["domContentLoadedEventStart","domContentLoadedEventEnd",'Fire "DOMContentLoaded" event'],["loadEventStart","loadEventEnd",'Fire "load" event']]},function(e,t,n){"use strict";t.__esModule=!0,t.createUserTimingSpans=function(e,t,n){for(var r=[],s=0;s<e.length;s++){var c=e[s],u=c.name,d=c.startTime,f=c.duration,l=d+f;if(!(f<=i.USER_TIMING_THRESHOLD)&&(0,a.shouldCreateSpan)(d,l,t,n)){var p=new o.default(u,"app");p._start=d,p.end(l),r.push(p)}}return r};var r,i=n(66),a=n(141),o=(r=n(107))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0,t.createResourceTimingSpans=function(e,t,n,r){for(var i=[],s=0;s<e.length;s++){var d=e[s],f=d.initiatorType,l=d.name,p=d.startTime,v=d.responseEnd;-1!==o.RESOURCE_INITIATOR_TYPES.indexOf(f)&&null!=l&&(("xmlhttprequest"===f||"fetch"===f)&&(/intake\/v\d+\/rum\/events/.test(l)||u(p,t))||(0,a.shouldCreateSpan)(p,v,n,r)&&i.push(c(e[s])))}return i};var r,i=n(67),a=n(141),o=n(66),s=(r=n(107))&&r.__esModule?r:{default:r};function c(e){var t=e.name,n=e.initiatorType,r=e.startTime,a=e.responseEnd,o="resource";n&&(o+="."+n);var c=(0,i.stripQueryStringFromUrl)(t),u=new s.default(c,o);return u._start=r,u.end(a,{url:t,entry:e}),u}function u(e,t){return null!=t&&e>t}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(271);t.observePageVisibility=r.observePageVisibility;var i=n(272);t.observePageClicks=i.observePageClicks},function(e,t,n){"use strict";t.__esModule=!0,t.observePageVisibility=function(e,t){"hidden"===document.visibilityState&&(i.state.lastHiddenStart=0);var n=function(){"hidden"===document.visibilityState&&s(e,t)},r=function(){return s(e,t)},a=!0;return window.addEventListener("visibilitychange",n,a),window.addEventListener("pagehide",r,a),function(){window.removeEventListener("visibilitychange",n,a),window.removeEventListener("pagehide",r,a)}};var r=n(66),i=n(89),a=n(67),o=n(175);function s(e,t){if((0,o.reportInp)(t))var n=e.observeEvent(r.QUEUE_ADD_TRANSACTION,(function(){c(e,t),n()}));else c(e,t)}function c(e,t){var n=t.getCurrentTransaction();if(n){var o=e.observeEvent(r.TRANSACTION_IGNORE,(function(){i.state.lastHiddenStart=(0,a.now)(),o(),s()})),s=e.observeEvent(r.QUEUE_ADD_TRANSACTION,(function(){e.dispatchEvent(r.QUEUE_FLUSH),i.state.lastHiddenStart=(0,a.now)(),s(),o()}));n.end()}else e.dispatchEvent(r.QUEUE_FLUSH),i.state.lastHiddenStart=(0,a.now)()}},function(e,t,n){"use strict";t.__esModule=!0,t.observePageClicks=function(e){var t=function(t){t.target instanceof Element&&function(e,t){var n=function(e){var t={transactionName:null,context:null};t.transactionName=function(e){var t=function(e){var t="data-transaction-name",n=e.getAttribute(t);if(e.closest){var r=e.closest(i);return r?r.getAttribute(t):n}return n}(e);if(t)return t;var n=e.tagName.toLowerCase(),r=e.getAttribute("name");return r?n+'["'+r+'"]':n}(e);var n=e.getAttribute("class");return n&&(t.context={custom:{classes:n}}),t}(t),a=n.transactionName,o=n.context,s=e.startTransaction("Click - "+a,r.USER_INTERACTION,{managed:!0,canReuse:!0,reuseThreshold:300});s&&o&&s.addContext(o)}(e,t.target)},n="click";return window.addEventListener(n,t,!0),function(){window.removeEventListener(n,t,!0)}};var r=n(66),i="a[data-transaction-name], button[data-transaction-name]"},function(e,t,n){"use strict";t.__esModule=!0,t.getInstrumentationFlags=function(e,t){var n,i=((n={})[r.XMLHTTPREQUEST]=!1,n[r.FETCH]=!1,n[r.HISTORY]=!1,n[r.PAGE_LOAD]=!1,n[r.ERROR]=!1,n[r.EVENT_TARGET]=!1,n[r.CLICK]=!1,n);return e?(Object.keys(i).forEach((function(e){-1===t.indexOf(e)&&(i[e]=!0)})),i):i};var r=n(66)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(i),setTimeout(e)},n=setTimeout(t,r),i=requestAnimationFrame(t)};var r=100},function(e,t,n){"use strict";t.__esModule=!0,t.bootstrap=function(){return(0,r.isPlatformSupported)()?((0,i.patchAll)(),a.state.bootstrapTime=(0,r.now)(),o=!0):r.isBrowser&&console.log("[Elastic APM] platform is not supported!"),o};var r=n(67),i=n(140),a=n(89),o=!1},function(e,t,n){"use strict";t.__esModule=!0,t.createTracer=function(e){var t=e.getService(a.PERFORMANCE_MONITORING),n=e.getService(a.TRANSACTION_SERVICE),i=e.getService(a.ERROR_LOGGING),o=e.getService(a.LOGGING_SERVICE);return new r.default(t,n,o,i)};var r=o(n(277));t.Tracer=r.default;var i=o(n(179));t.Span=i.default;var a=n(66);function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r,i=n(176),a=n(177),o=n(96),s=n(67),c=n(89),u=(r=n(179))&&r.__esModule?r:{default:r};function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var f=function(e){var t,n;function r(t,n,r,i){var a;return(a=e.call(this)||this).performanceMonitoring=t,a.transactionService=n,a.loggingService=r,a.errorLogging=i,a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,d(t,n);var i=r.prototype;return i._startSpan=function(e,t){var n,r={managed:!0};if(t)if(r.timestamp=t.startTime,t.childOf)r.parentId=t.childOf.id;else if(t.references&&t.references.length>0){t.references.length>1&&c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: Unsupported number of references, only the first childOf reference will be recorded.");var i=(0,s.find)(t.references,(function(e){return e.type()===a.REFERENCE_CHILD_OF}));i&&(r.parentId=i.referencedContext().id)}if(!(n=this.transactionService.getCurrentTransaction()?this.transactionService.startSpan(e,void 0,r):this.transactionService.startTransaction(e,void 0,r)))return new o.Span;r.timestamp&&(n._start=r.timestamp-(0,s.getTimeOrigin)());var d=new u.default(this,n);return t&&t.tags&&d.addTags(t.tags),d},i._inject=function(e,t,n){switch(t){case a.FORMAT_TEXT_MAP:case a.FORMAT_HTTP_HEADERS:this.performanceMonitoring.injectDtHeader(e,n);break;case a.FORMAT_BINARY:c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: binary carrier format is not supported.")}},i._extract=function(e,t){var n;switch(e){case a.FORMAT_TEXT_MAP:case a.FORMAT_HTTP_HEADERS:n=this.performanceMonitoring.extractDtHeader(t);break;case a.FORMAT_BINARY:c.__DEV__&&this.loggingService.debug("Elastic APM OpenTracing: binary carrier format is not supported.")}return n||(n=null),n},r}(i.Tracer);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(177),i=n(279),a=n(96);t.childOf=function(e){return e instanceof a.default&&(e=e.context()),new i.default(r.REFERENCE_CHILD_OF,e)},t.followsFrom=function(e){return e instanceof a.default&&(e=e.context()),new i.default(r.REFERENCE_FOLLOWS_FROM,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(96),i=function(){function e(e,t){this._type=e,this._referencedContext=t instanceof r.default?t.context():t}return e.prototype.type=function(){return this._type},e.prototype.referencedContext=function(){return this._referencedContext},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.toTraceId=function(){return""},e.prototype.toSpanId=function(){return""},e}();t.SpanContext=r,t.default=r},,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"PerformanceContextProvider",(function(){return d}));var r=n(0),i=n.n(r),a=n(241),o=n(12),s=n(132),c=n(131),u=n(1);function d({children:e}){const[t,n]=Object(r.useState)(!1),d=Object(o.useLocation)(),f=function(){performance.mark(s.a.startPageChange);const e=[];return{pageReady(t){performance.mark(s.a.endPageReady),e.includes(t)||(performance.measure(t,{detail:{eventName:"kibana:plugin_render_time",type:"kibana:performance"},start:s.a.startPageChange,end:s.a.endPageReady}),e.push(t))}}}();i.a.useEffect((()=>(Object(a.afterFrame)((()=>{n(!0)})),()=>{n(!1),performance.clearMeasures(d.pathname)})),[d.pathname]);const l=Object(r.useMemo)((()=>({onPageReady(){t&&f.pageReady(d.pathname)}})),[t,d.pathname,f]);return Object(u.jsx)(c.a.Provider,{value:l},e)}t.default=d}])]);