/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[20],{296:function(e,t,a){"use strict";a.r(t),a.d(t,"createAddFieldStatsTableAction",(function(){return I}));var i=a(4),n=a(144),l=a(51),s=a(233),o=a(119),r=a(28),d=(a(0),a(220)),c=a(61),u=a(14),p=a(106),w=a(115),y=a(186),b=a(1);const v=async e=>{const{apiIsPresentationContainer:t}=await Promise.resolve().then(a.bind(null,144));return t(e)?e:void 0};function I(e,t){return{id:"create-field-stats-table",grouping:c.COMMON_VISUALIZATION_GROUPING,order:10,getIconType:()=>"inspect",getDisplayName:()=>i.i18n.translate("xpack.dataVisualizer.fieldStatistics.displayName",{defaultMessage:"Field statistics"}),isCompatible:async e=>Boolean(await v(e.embeddable)),async execute(a){const i=await v(a.embeddable);if(!i)throw new l.IncompatibleActionError;try{const a=await t.data.dataViews.getDefault(),l={viewType:p.a.ESQL,query:{esql:`from ${null==a?void 0:a.getIndexPattern()} | limit 10`}},c=await i.addNewPanel({panelType:u.b,initialState:l});c&&async function({api:e,isNewPanel:t,deletePanel:a,coreStart:i,pluginStart:l,initialState:c}){const u=e.parentApi,p=Object(n.tracksOverlays)(u)?u:void 0,v={...i,...l};let I=!1;const f=()=>{I&&e&&c&&e.updateUserInput(c),t&&a&&a(),O.close(),null==p||p.clearOverlays()},O=v.overlays.openFlyout(Object(o.a)(Object(b.jsx)(r.KibanaContextProvider,{services:v},Object(b.jsx)(y.a,{initialInput:c,onPreview:async t=>{e.updateUserInput&&(e.updateUserInput(t),I=!0)},onCreate:async t=>{var a;const i=null==t||null===(a=t.query)||void 0===a?void 0:a.esql;if(Object(d.a)(i)){const e=Object(s.a)(i),a=await Object(w.a)(l.data.dataViews,e,void 0);null!=a&&a.id&&t.dataViewId!==a.id&&(t.dataViewId=a.id)}e&&e.updateUserInput(t),O.close(),null==p||p.clearOverlays()},onCancel:f,isNewPanel:t})),i),{ownFocus:!0,size:"s",paddingSize:"m",hideCloseButton:!0,type:"push","data-test-subj":"fieldStatisticsInitializerFlyout",onClose:f});null==p||p.openOverlay(O,{focusedPanelId:e.uuid})}({api:c,isNewPanel:!0,deletePanel:()=>{i.removePanel(c.uuid)},coreStart:e,pluginStart:t,initialState:l})}catch(e){return Promise.reject(e)}}}}}}]);