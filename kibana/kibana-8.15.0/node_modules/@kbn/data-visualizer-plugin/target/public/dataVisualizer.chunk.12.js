/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.dataVisualizer_bundle_jsonpfunction=window.dataVisualizer_bundle_jsonpfunction||[]).push([[12],{105:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));const i=()=>({isRunning:!1,loaded:0,total:100}),a=()=>(e,t)=>({...e,...t})},111:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var i=n(5),a=n(11),s=n(6);function r(e){const{mappings:t,field_stats:n,column_names:a}=e,s=void 0!==a?a:Object.keys(n),r=Object(i.difference)(Object.keys(t.properties),s),c=r.indexOf("@timestamp");return-1!==c&&r.splice(c,1),r.length&&s.push(...r),s}function c(e){switch(e){case a.a.FLOAT:case a.a.HALF_FLOAT:case a.a.SCALED_FLOAT:case a.a.DOUBLE:case a.a.INTEGER:case a.a.LONG:case a.a.SHORT:case a.a.UNSIGNED_LONG:return s.i.NUMBER;case a.a.DATE:case a.a.DATE_NANOS:return s.i.DATE;default:return e}}},113:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i=new(n(8).Subject)},114:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var i=n(4);const a=75,s=i.i18n.translate("xpack.dataVisualizer.chrome.help.appName",{defaultMessage:"Data Visualizer"})},118:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n(0),a=n(126),s=n(40),r=n(81),c=n(84),u=n(102),o=n(65),l=n(6),d=n(80),f=n(1);const b=({config:e,dataView:t,combinedQuery:n,esql:a,timeFieldName:b})=>{const{stats:j}=e,[m,g]=Object(i.useState)([]),{services:{maps:p,data:O}}=Object(o.a)(),x=Object(i.useMemo)((()=>n?{query:n.searchString,language:n.searchQueryLanguage}:void 0),[n]);return Object(i.useEffect)((()=>{if(!p)return;if(null==t||!t.id||null==e||!e.fieldName||e.type!==l.i.GEO_POINT&&e.type!==l.i.GEO_SHAPE)return void g([]);let n=!1;return p.createLayerDescriptors.createESSearchSourceLayerDescriptor({indexPatternId:t.id,geoFieldName:e.fieldName,geoFieldType:e.type}).then((i=>{if(!n)if(void 0!==a){var s;const n={columns:[{name:e.fieldName,type:e.type}],dataViewId:t.id,dateField:null!==(s=t.timeFieldName)&&void 0!==s?s:b,geoField:e.fieldName,esql:a,narrowByGlobalSearch:!0,narrowByGlobalTime:!0,narrowByMapBounds:!0,id:i.sourceDescriptor.id,type:"ESQL",applyForceRefresh:!0};g([{...i,sourceDescriptor:n}])}else g([i])})).catch((()=>{n||g([])})),()=>{n=!0}}),[t,n,a,e,p,b]),void 0===(null==j?void 0:j.examples)?null:Object(f.jsx)(r.a,{dataTestSubj:"dataVisualizerIndexBasedMapContent"},Object(f.jsx)(c.a,{config:e}),Object(f.jsx)(u.a,{examples:null==j?void 0:j.examples}),p&&Object(f.jsx)(d.a,{className:"dvPanel__wrapper dvMap__wrapper",grow:!0},Object(f.jsx)(p.Map,{layerList:m,hideFilterActions:!0,mapSettings:{initialLocation:s.INITIAL_LOCATION.AUTO_FIT_TO_BOUNDS,autoFitToDataBounds:!0},filters:O.query.filterManager.getFilters(),query:x,timeRange:O.query.timefilter.timefilter.getTime()})))};var j=n(143),m=n(10),g=n(25);const p=()=>Object(f.jsx)(i.Fragment,null,Object(f.jsx)(m.EuiText,{textAlign:"center"},Object(f.jsx)(m.EuiIcon,{type:"warning"})),Object(f.jsx)(m.EuiText,{textAlign:"center",size:"xs"},Object(f.jsx)(g.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.fieldNotInDocsLabel",defaultMessage:"This field does not appear in any documents for the selected time range"}))),O=()=>Object(f.jsx)(i.Fragment,null,Object(f.jsx)(m.EuiSpacer,{size:"xxl"}),Object(f.jsx)(m.EuiFlexGroup,{justifyContent:"spaceAround"},Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)(m.EuiLoadingSpinner,{size:"l"}))),Object(f.jsx)(m.EuiFlexGroup,{justifyContent:"spaceAround"},Object(f.jsx)(m.EuiFlexItem,{grow:!1},Object(f.jsx)(m.EuiText,{color:"subdued"},Object(f.jsx)(g.FormattedMessage,{id:"xpack.dataVisualizer.dataGrid.field.loadingLabel",defaultMessage:"Loading"})))));var x=n(128);const E=({item:e,dataView:t,combinedQuery:n,onAddFilter:i,esql:s,totalDocuments:r,timeFieldName:c,typeAccessor:u="type"})=>{const o={...e,stats:{...e.stats,totalDocuments:r}},{loading:d,existsInDocs:m,fieldName:g}=o,E=o[u],v=Object(a.a)();return Object(f.jsx)("div",{css:v,"data-test-subj":`dataVisualizerFieldExpandedRow-${g}`},!0===d?Object(f.jsx)(O,null):function(){var e,a;if(!1===m)return Object(f.jsx)(p,null);if(null!==(e=o.stats)&&void 0!==e&&e.error)return Object(f.jsx)(x.a,{fieldName:g,error:null===(a=o.stats)||void 0===a?void 0:a.error});switch(E){case l.i.NUMBER:return Object(f.jsx)(j.e,{config:o,onAddFilter:i});case l.i.BOOLEAN:return Object(f.jsx)(j.a,{config:o,onAddFilter:i});case l.i.DATE:return Object(f.jsx)(j.b,{config:o});case l.i.GEO_POINT:case l.i.GEO_SHAPE:return Object(f.jsx)(b,{config:o,dataView:t,combinedQuery:n,esql:s,timeFieldName:c});case l.i.IP:return Object(f.jsx)(j.c,{config:o,onAddFilter:i});case l.i.KEYWORD:case l.i.VERSION:return Object(f.jsx)(j.d,{config:o,onAddFilter:i});case l.i.TEXT:return Object(f.jsx)(j.g,{config:o});default:return Object(f.jsx)(j.f,{config:o})}}())}},133:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(220),a=n(5);const s=(e,t,n)=>{const s={percentiles:[],minPercentile:0,maxPercentile:100};if(0===e.length)return s;let r=[],c=n;if(c>=0){s.minPercentile=0,s.maxPercentile=90,r=e.slice(0,e.length-2);const n=c+1.5*(Object(a.last)(r).value-c);for(let i=r.length;i<e.length&&e[i].value<n;i++)r.push(e[i]),s.maxPercentile+=t}else{const t=c;c=e[0].value,s.minPercentile=5,s.maxPercentile=95,r=e.slice(1,e.length-1);const n=Object(a.last)(r).value,i=.25*(n-c);c-t<i&&(r.splice(0,0,e[0]),s.minPercentile=0,c=t),e[e.length-1].value-n<i&&(r.push(e[e.length-1]),s.maxPercentile=100)}const u=r.length;let o=c,l=0;for(let e=0;e<u;e++){const n=r[e];Object(i.a)(n.value)&&(n.value.toPrecision(15)!==o.toPrecision(15)?(l>0&&s.percentiles.push({percent:l*t,minValue:o,maxValue:o}),s.percentiles.push({percent:t,minValue:o,maxValue:n.value}),o=n.value,l=0):(l++,e===u-1&&s.percentiles.push({percent:l*t,minValue:o,maxValue:o})))}return s}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n(0);var i=n(25),a=n(1),s=n(10),r={name:"1eem2vi",styles:"display:flex;flex-direction:column;justify-content:center;flex:1 0 100%;text-align:center"};const c=()=>Object(a.jsx)("div",{css:r},Object(a.jsx)(s.EuiText,{size:"xs",color:"subdued"},Object(a.jsx)(s.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued"}),Object(a.jsx)(s.EuiSpacer,{size:"m"}),Object(a.jsx)(i.FormattedMessage,{id:"xpack.dataVisualizer.index.embeddableNoResultsMessage",defaultMessage:"No results found"})))},152:function(e,t,n){"use strict";function i(e){var t;return e.timeSeriesMetric||(null!==(t=e.type)&&void 0!==t?t:"string")}n.d(t,"a",(function(){return i}))},159:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d}));var i=n(0),a=n(69),s=n.n(a),r=n(8),c=n(5),u=n(91);n(113);const o=(e={})=>{const{timeRangeSelector:t,autoRefreshSelector:n}=e,{data:{query:{timefilter:{timefilter:a}}}}=Object(u.b)();return Object(i.useEffect)((()=>{!0!==t||a.isTimeRangeSelectorEnabled()?!1===t&&a.isTimeRangeSelectorEnabled()&&a.disableTimeRangeSelector():a.enableTimeRangeSelector(),!0!==n||a.isAutoRefreshSelectorEnabled()?!1===n&&a.isAutoRefreshSelectorEnabled()&&a.disableAutoRefreshSelector():a.enableAutoRefreshSelector()}),[t,n,a]),a},l=()=>{const e=o(),t=Object(i.useMemo)((()=>e.getRefreshIntervalUpdate$().pipe(Object(r.map)(e.getRefreshInterval))),[e]);return s()(t,e.getRefreshInterval())},d=(e=!1)=>{const t=o(),n=Object(i.useMemo)((()=>e?t.getAbsoluteTime.bind(t):t.getTime.bind(t)),[e,t]),a=Object(i.useMemo)((()=>t.getTimeUpdate$().pipe(Object(r.map)(n),Object(r.distinctUntilChanged)(c.isEqual))),[t,n]);return s()(a,n())}},164:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(108),r=n(182),c=n(135),u=n(1);const o=Object(r.a)(),l=a.a.memo((e=>{const{onTableUpdate:t,onRenderComplete:n}=e,[a,l]=Object(i.useState)(o),d=Object(i.useCallback)((e=>{l({...a,...e}),t&&t(e)}),[a,t]),{configs:f,extendedColumns:b,progress:j,overallStatsProgress:m,setLastRefresh:g,getItemIdToExpandedRowMap:p,resetData:O}=Object(r.b)(e,a);return Object(i.useEffect)((()=>{g(Date.now())}),[null==e?void 0:e.lastReloadRequestTime,g]),Object(i.useEffect)((()=>{var t;const n=null===(t=e.resetData$)||void 0===t?void 0:t.subscribe((()=>{O()}));return()=>null==n?void 0:n.unsubscribe()}),[e.resetData$,O]),Object(i.useEffect)((()=>{100===j&&n&&n()}),[j,n]),100===j&&0===f.length?Object(u.jsx)(c.a,null):Object(u.jsx)(s.a,{items:f,pageState:a,updatePageState:d,getItemIdToExpandedRowMap:p,extendedColumns:b,showPreviewByDefault:null==e?void 0:e.showPreviewByDefault,onChange:t,loading:j<100,overallStatsRunning:m.isRunning,error:m.error})}));t.default=l},229:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));const i={KUERY:"kuery",LUCENE:"lucene"}},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return r}));const i="DATA_VISUALIZER_INDEX_VIEWER",a="index_data_visualizer",s=10;function r(){return{overallStats:{totalCount:0,aggregatableExistsFields:[],aggregatableNotExistsFields:[],nonAggregatableExistsFields:[],nonAggregatableNotExistsFields:[]},metricConfigs:[],totalMetricFieldCount:0,populatedMetricFieldCount:0,metricsLoaded:!1,nonMetricConfigs:[],nonMetricsLoaded:!1,documentCountStats:void 0}}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));const i=10,a=100,s=5}}]);