/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.transform_bundle_jsonpfunction=window.transform_bundle_jsonpfunction||[]).push([[3],{111:function(e,t,n){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var r=e("../lib/oop"),s=e("./text_highlight_rules").TextHighlightRules,a=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};r.inherits(a,s),t.JsonHighlightRules=a})),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var r=e("../range").Range,s=function(){};(function(){this.checkOutdent=function(e,t){return!!/^\s+$/.test(e)&&/^\s*\}/.test(t)},this.autoOutdent=function(e,t){var n=e.getLine(t).match(/^(\s*\})/);if(!n)return 0;var s=n[1].length,a=e.findMatchingBracket({row:t,column:s});if(!a||a.row==t)return 0;var o=this.$getIndent(e.getLine(a.row));e.replace(new r(t,0,t,s-1),o)},this.$getIndent=function(e){return e.match(/^\s*/)[0]}}).call(s.prototype),t.MatchingBraceOutdent=s})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var r=e("../../lib/oop"),s=e("../../range").Range,a=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};r.inherits(o,a),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var r=e.getLine(n);if(this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r))return"";var s=this._getFoldWidgetBase(e,t,n);return!s&&this.startRegionRe.test(r)?"start":s},this.getFoldWidgetRange=function(e,t,n,r){var s,a=e.getLine(n);if(this.startRegionRe.test(a))return this.getCommentRegionBlock(e,a,n);if(s=a.match(this.foldingStartMarker)){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var i=e.getCommentFoldRange(n,o+s[0].length,1);return i&&!i.isMultiLine()&&(r?i=this.getSectionRange(e,n):"all"!=t&&(i=null)),i}return"markbegin"!==t&&(s=a.match(this.foldingStopMarker))?(o=s.index+s[0].length,s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)):void 0},this.getSectionRange=function(e,t){for(var n=e.getLine(t),r=n.search(/\S/),a=t,o=n.length,i=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(r>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=a)break;if(u.isMultiLine())t=u.end.row;else if(r==c)break}i=t}}return new s(a,o,i,e.getLine(i).length)},this.getCommentRegionBlock=function(e,t,n){for(var r=t.search(/\s*$/),a=e.getLength(),o=n,i=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<a;){t=e.getLine(n);var c=i.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new s(o,r,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],(function(e,t,r){"use strict";var s=e("../lib/oop"),a=e("./text").Mode,o=e("./json_highlight_rules").JsonHighlightRules,i=e("./matching_brace_outdent").MatchingBraceOutdent,l=e("./behaviour/cstyle").CstyleBehaviour,c=e("./folding/cstyle").FoldMode,u=e("../worker/worker_client").WorkerClient,p=function(){this.HighlightRules=o,this.$outdent=new i,this.$behaviour=new l,this.foldingRules=new c};s.inherits(p,a),function(){this.getNextLineIndent=function(e,t,n){var r=this.$getIndent(t);return"start"==e&&t.match(/^.*[\{\(\[]\s*$/)&&(r+=n),r},this.checkOutdent=function(e,t,n){return this.$outdent.checkOutdent(t,n)},this.autoOutdent=function(e,t,n){this.$outdent.autoOutdent(t,n)},this.createWorker=function(e){var t=new u(["ace"],n(112),"JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t},this.$id="ace/mode/json"}.call(p.prototype),t.Mode=p}))},112:function(e,t){e.exports.id="ace/mode/json_worker",e.exports.src='"no use strict";!function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}}(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}if("[object Object]"!==Object.prototype.toString.call(obj))return obj;copy={};for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/</g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},115:function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},116:function(e,t,n){"use strict";var r="%[a-f0-9]{2}",s=new RegExp("("+r+")|([^%]+?)","gi"),a=new RegExp("("+r+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function i(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(s)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(s)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),o=0;o<s.length;o++){var l=s[o];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},117:function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var r=n(3);t.useFirstMountState=function(){var e=r.useRef(!0);return e.current?(e.current=!1,!0):e.current}},120:function(e){e.exports=JSON.parse('{"type":"object","properties":{"aggregations":{"description":"Defines how to aggregate the grouped data. The following aggregations are currently supported: average, bucket\\nscript, bucket selector, cardinality, filter, geo bounds, geo centroid, geo line, max, median absolute deviation,\\nmin, missing, percentiles, rare terms, scripted metric, stats, sum, terms, top metrics, value count, weighted\\naverage.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.aggregations:AggregationContainer"}},"group_by":{"description":"Defines how to group the data. More than one grouping can be defined per pivot. The following groupings are\\ncurrently supported: date histogram, geotile grid, histogram, terms.","type":"object","additionalProperties":{"$ref":"#/components/schemas/transform._types:PivotGroupByContainer"}}},"components":{"schemas":{"_types.aggregations:AggregationContainer":{"allOf":[{"type":"object","properties":{"aggregations":{"description":"Sub-aggregations for this aggregation.\\nOnly applies to bucket aggregations.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.aggregations:AggregationContainer"}},"meta":{"$ref":"#/components/schemas/_types:Metadata"}}},{"type":"object","properties":{"adjacency_matrix":{"$ref":"#/components/schemas/_types.aggregations:AdjacencyMatrixAggregation"},"auto_date_histogram":{"$ref":"#/components/schemas/_types.aggregations:AutoDateHistogramAggregation"},"avg":{"$ref":"#/components/schemas/_types.aggregations:AverageAggregation"},"avg_bucket":{"$ref":"#/components/schemas/_types.aggregations:AverageBucketAggregation"},"boxplot":{"$ref":"#/components/schemas/_types.aggregations:BoxplotAggregation"},"bucket_script":{"$ref":"#/components/schemas/_types.aggregations:BucketScriptAggregation"},"bucket_selector":{"$ref":"#/components/schemas/_types.aggregations:BucketSelectorAggregation"},"bucket_sort":{"$ref":"#/components/schemas/_types.aggregations:BucketSortAggregation"},"bucket_count_ks_test":{"$ref":"#/components/schemas/_types.aggregations:BucketKsAggregation"},"bucket_correlation":{"$ref":"#/components/schemas/_types.aggregations:BucketCorrelationAggregation"},"cardinality":{"$ref":"#/components/schemas/_types.aggregations:CardinalityAggregation"},"categorize_text":{"$ref":"#/components/schemas/_types.aggregations:CategorizeTextAggregation"},"children":{"$ref":"#/components/schemas/_types.aggregations:ChildrenAggregation"},"composite":{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregation"},"cumulative_cardinality":{"$ref":"#/components/schemas/_types.aggregations:CumulativeCardinalityAggregation"},"cumulative_sum":{"$ref":"#/components/schemas/_types.aggregations:CumulativeSumAggregation"},"date_histogram":{"$ref":"#/components/schemas/_types.aggregations:DateHistogramAggregation"},"date_range":{"$ref":"#/components/schemas/_types.aggregations:DateRangeAggregation"},"derivative":{"$ref":"#/components/schemas/_types.aggregations:DerivativeAggregation"},"diversified_sampler":{"$ref":"#/components/schemas/_types.aggregations:DiversifiedSamplerAggregation"},"extended_stats":{"$ref":"#/components/schemas/_types.aggregations:ExtendedStatsAggregation"},"extended_stats_bucket":{"$ref":"#/components/schemas/_types.aggregations:ExtendedStatsBucketAggregation"},"frequent_item_sets":{"$ref":"#/components/schemas/_types.aggregations:FrequentItemSetsAggregation"},"filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"filters":{"$ref":"#/components/schemas/_types.aggregations:FiltersAggregation"},"geo_bounds":{"$ref":"#/components/schemas/_types.aggregations:GeoBoundsAggregation"},"geo_centroid":{"$ref":"#/components/schemas/_types.aggregations:GeoCentroidAggregation"},"geo_distance":{"$ref":"#/components/schemas/_types.aggregations:GeoDistanceAggregation"},"geohash_grid":{"$ref":"#/components/schemas/_types.aggregations:GeoHashGridAggregation"},"geo_line":{"$ref":"#/components/schemas/_types.aggregations:GeoLineAggregation"},"geotile_grid":{"$ref":"#/components/schemas/_types.aggregations:GeoTileGridAggregation"},"geohex_grid":{"$ref":"#/components/schemas/_types.aggregations:GeohexGridAggregation"},"global":{"$ref":"#/components/schemas/_types.aggregations:GlobalAggregation"},"histogram":{"$ref":"#/components/schemas/_types.aggregations:HistogramAggregation"},"ip_range":{"$ref":"#/components/schemas/_types.aggregations:IpRangeAggregation"},"ip_prefix":{"$ref":"#/components/schemas/_types.aggregations:IpPrefixAggregation"},"inference":{"$ref":"#/components/schemas/_types.aggregations:InferenceAggregation"},"line":{"$ref":"#/components/schemas/_types.aggregations:GeoLineAggregation"},"matrix_stats":{"$ref":"#/components/schemas/_types.aggregations:MatrixStatsAggregation"},"max":{"$ref":"#/components/schemas/_types.aggregations:MaxAggregation"},"max_bucket":{"$ref":"#/components/schemas/_types.aggregations:MaxBucketAggregation"},"median_absolute_deviation":{"$ref":"#/components/schemas/_types.aggregations:MedianAbsoluteDeviationAggregation"},"min":{"$ref":"#/components/schemas/_types.aggregations:MinAggregation"},"min_bucket":{"$ref":"#/components/schemas/_types.aggregations:MinBucketAggregation"},"missing":{"$ref":"#/components/schemas/_types.aggregations:MissingAggregation"},"moving_avg":{"$ref":"#/components/schemas/_types.aggregations:MovingAverageAggregation"},"moving_percentiles":{"$ref":"#/components/schemas/_types.aggregations:MovingPercentilesAggregation"},"moving_fn":{"$ref":"#/components/schemas/_types.aggregations:MovingFunctionAggregation"},"multi_terms":{"$ref":"#/components/schemas/_types.aggregations:MultiTermsAggregation"},"nested":{"$ref":"#/components/schemas/_types.aggregations:NestedAggregation"},"normalize":{"$ref":"#/components/schemas/_types.aggregations:NormalizeAggregation"},"parent":{"$ref":"#/components/schemas/_types.aggregations:ParentAggregation"},"percentile_ranks":{"$ref":"#/components/schemas/_types.aggregations:PercentileRanksAggregation"},"percentiles":{"$ref":"#/components/schemas/_types.aggregations:PercentilesAggregation"},"percentiles_bucket":{"$ref":"#/components/schemas/_types.aggregations:PercentilesBucketAggregation"},"range":{"$ref":"#/components/schemas/_types.aggregations:RangeAggregation"},"rare_terms":{"$ref":"#/components/schemas/_types.aggregations:RareTermsAggregation"},"rate":{"$ref":"#/components/schemas/_types.aggregations:RateAggregation"},"reverse_nested":{"$ref":"#/components/schemas/_types.aggregations:ReverseNestedAggregation"},"sampler":{"$ref":"#/components/schemas/_types.aggregations:SamplerAggregation"},"scripted_metric":{"$ref":"#/components/schemas/_types.aggregations:ScriptedMetricAggregation"},"serial_diff":{"$ref":"#/components/schemas/_types.aggregations:SerialDifferencingAggregation"},"significant_terms":{"$ref":"#/components/schemas/_types.aggregations:SignificantTermsAggregation"},"significant_text":{"$ref":"#/components/schemas/_types.aggregations:SignificantTextAggregation"},"stats":{"$ref":"#/components/schemas/_types.aggregations:StatsAggregation"},"stats_bucket":{"$ref":"#/components/schemas/_types.aggregations:StatsBucketAggregation"},"string_stats":{"$ref":"#/components/schemas/_types.aggregations:StringStatsAggregation"},"sum":{"$ref":"#/components/schemas/_types.aggregations:SumAggregation"},"sum_bucket":{"$ref":"#/components/schemas/_types.aggregations:SumBucketAggregation"},"terms":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregation"},"top_hits":{"$ref":"#/components/schemas/_types.aggregations:TopHitsAggregation"},"t_test":{"$ref":"#/components/schemas/_types.aggregations:TTestAggregation"},"top_metrics":{"$ref":"#/components/schemas/_types.aggregations:TopMetricsAggregation"},"value_count":{"$ref":"#/components/schemas/_types.aggregations:ValueCountAggregation"},"weighted_avg":{"$ref":"#/components/schemas/_types.aggregations:WeightedAverageAggregation"},"variable_width_histogram":{"$ref":"#/components/schemas/_types.aggregations:VariableWidthHistogramAggregation"}},"minProperties":1,"maxProperties":1}]},"_types:Metadata":{"type":"object","additionalProperties":{"type":"object"}},"_types.aggregations:AdjacencyMatrixAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"filters":{"description":"Filters used to create buckets.\\nAt least one filter is required.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"separator":{"description":"Separator used to concatenate filter names. Defaults to &.","type":"string"}}}]},"_types.aggregations:BucketAggregationBase":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object"}]},"_types.aggregations:Aggregation":{"type":"object"},"_types.query_dsl:QueryContainer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html"},"type":"object","properties":{"bool":{"$ref":"#/components/schemas/_types.query_dsl:BoolQuery"},"boosting":{"$ref":"#/components/schemas/_types.query_dsl:BoostingQuery"},"common":{"deprecated":true,"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:CommonTermsQuery"},"minProperties":1,"maxProperties":1},"combined_fields":{"$ref":"#/components/schemas/_types.query_dsl:CombinedFieldsQuery"},"constant_score":{"$ref":"#/components/schemas/_types.query_dsl:ConstantScoreQuery"},"dis_max":{"$ref":"#/components/schemas/_types.query_dsl:DisMaxQuery"},"distance_feature":{"$ref":"#/components/schemas/_types.query_dsl:DistanceFeatureQuery"},"exists":{"$ref":"#/components/schemas/_types.query_dsl:ExistsQuery"},"function_score":{"$ref":"#/components/schemas/_types.query_dsl:FunctionScoreQuery"},"fuzzy":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-fuzzy-query.html"},"description":"Returns documents that contain terms similar to the search term, as measured by a Levenshtein edit distance.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:FuzzyQuery"},"minProperties":1,"maxProperties":1},"geo_bounding_box":{"$ref":"#/components/schemas/_types.query_dsl:GeoBoundingBoxQuery"},"geo_distance":{"$ref":"#/components/schemas/_types.query_dsl:GeoDistanceQuery"},"geo_polygon":{"$ref":"#/components/schemas/_types.query_dsl:GeoPolygonQuery"},"geo_shape":{"$ref":"#/components/schemas/_types.query_dsl:GeoShapeQuery"},"has_child":{"$ref":"#/components/schemas/_types.query_dsl:HasChildQuery"},"has_parent":{"$ref":"#/components/schemas/_types.query_dsl:HasParentQuery"},"ids":{"$ref":"#/components/schemas/_types.query_dsl:IdsQuery"},"intervals":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-intervals-query.html"},"description":"Returns documents based on the order and proximity of matching terms.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsQuery"},"minProperties":1,"maxProperties":1},"knn":{"$ref":"#/components/schemas/_types:KnnQuery"},"match":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html"},"description":"Returns documents that match a provided text, number, date or boolean value.\\nThe provided text is analyzed before matching.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:MatchQuery"},"minProperties":1,"maxProperties":1},"match_all":{"$ref":"#/components/schemas/_types.query_dsl:MatchAllQuery"},"match_bool_prefix":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-bool-prefix-query.html"},"description":"Analyzes its input and constructs a `bool` query from the terms.\\nEach term except the last is used in a `term` query.\\nThe last term is used in a prefix query.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:MatchBoolPrefixQuery"},"minProperties":1,"maxProperties":1},"match_none":{"$ref":"#/components/schemas/_types.query_dsl:MatchNoneQuery"},"match_phrase":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase.html"},"description":"Analyzes the text and creates a phrase query out of the analyzed text.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:MatchPhraseQuery"},"minProperties":1,"maxProperties":1},"match_phrase_prefix":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query-phrase-prefix.html"},"description":"Returns documents that contain the words of a provided text, in the same order as provided.\\nThe last term of the provided text is treated as a prefix, matching any words that begin with that term.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:MatchPhrasePrefixQuery"},"minProperties":1,"maxProperties":1},"more_like_this":{"$ref":"#/components/schemas/_types.query_dsl:MoreLikeThisQuery"},"multi_match":{"$ref":"#/components/schemas/_types.query_dsl:MultiMatchQuery"},"nested":{"$ref":"#/components/schemas/_types.query_dsl:NestedQuery"},"parent_id":{"$ref":"#/components/schemas/_types.query_dsl:ParentIdQuery"},"percolate":{"$ref":"#/components/schemas/_types.query_dsl:PercolateQuery"},"pinned":{"$ref":"#/components/schemas/_types.query_dsl:PinnedQuery"},"prefix":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-prefix-query.html"},"description":"Returns documents that contain a specific prefix in a provided field.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:PrefixQuery"},"minProperties":1,"maxProperties":1},"query_string":{"$ref":"#/components/schemas/_types.query_dsl:QueryStringQuery"},"range":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html"},"description":"Returns documents that contain terms within a provided range.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:RangeQuery"},"minProperties":1,"maxProperties":1},"rank_feature":{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureQuery"},"regexp":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html"},"description":"Returns documents that contain terms matching a regular expression.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:RegexpQuery"},"minProperties":1,"maxProperties":1},"rule_query":{"$ref":"#/components/schemas/_types.query_dsl:RuleQuery"},"script":{"$ref":"#/components/schemas/_types.query_dsl:ScriptQuery"},"script_score":{"$ref":"#/components/schemas/_types.query_dsl:ScriptScoreQuery"},"shape":{"$ref":"#/components/schemas/_types.query_dsl:ShapeQuery"},"simple_query_string":{"$ref":"#/components/schemas/_types.query_dsl:SimpleQueryStringQuery"},"span_containing":{"$ref":"#/components/schemas/_types.query_dsl:SpanContainingQuery"},"field_masking_span":{"$ref":"#/components/schemas/_types.query_dsl:SpanFieldMaskingQuery"},"span_first":{"$ref":"#/components/schemas/_types.query_dsl:SpanFirstQuery"},"span_multi":{"$ref":"#/components/schemas/_types.query_dsl:SpanMultiTermQuery"},"span_near":{"$ref":"#/components/schemas/_types.query_dsl:SpanNearQuery"},"span_not":{"$ref":"#/components/schemas/_types.query_dsl:SpanNotQuery"},"span_or":{"$ref":"#/components/schemas/_types.query_dsl:SpanOrQuery"},"span_term":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-span-term-query.html"},"description":"Matches spans containing a term.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:SpanTermQuery"},"minProperties":1,"maxProperties":1},"span_within":{"$ref":"#/components/schemas/_types.query_dsl:SpanWithinQuery"},"term":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html"},"description":"Returns documents that contain an exact term in a provided field.\\nTo return a document, the query term must exactly match the queried field\'s value, including whitespace and capitalization.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:TermQuery"},"minProperties":1,"maxProperties":1},"terms":{"$ref":"#/components/schemas/_types.query_dsl:TermsQuery"},"terms_set":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-terms-set-query.html"},"description":"Returns documents that contain a minimum number of exact terms in a provided field.\\nTo return a document, a required number of terms must exactly match the field values, including whitespace and capitalization.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:TermsSetQuery"},"minProperties":1,"maxProperties":1},"text_expansion":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-text-expansion-query.html"},"description":"Uses a natural language processing model to convert the query text into a list of token-weight pairs which are then used in a query against a sparse vector or rank features field.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:TextExpansionQuery"},"minProperties":1,"maxProperties":1},"weighted_tokens":{"description":"Supports returning text_expansion query results by sending in precomputed tokens with the query.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:WeightedTokensQuery"},"minProperties":1,"maxProperties":1},"wildcard":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-wildcard-query.html"},"description":"Returns documents that contain terms matching a wildcard pattern.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:WildcardQuery"},"minProperties":1,"maxProperties":1},"wrapper":{"$ref":"#/components/schemas/_types.query_dsl:WrapperQuery"},"type":{"$ref":"#/components/schemas/_types.query_dsl:TypeQuery"}},"minProperties":1,"maxProperties":1},"_types.query_dsl:BoolQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"filter":{"description":"The clause (query) must appear in matching documents.\\nHowever, unlike `must`, the score of the query will be ignored.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}}]},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"must":{"description":"The clause (query) must appear in matching documents and will contribute to the score.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}}]},"must_not":{"description":"The clause (query) must not appear in the matching documents.\\nBecause scoring is ignored, a score of `0` is returned for all documents.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}}]},"should":{"description":"The clause (query) should appear in the matching document.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}}]}}}]},"_types.query_dsl:QueryBase":{"type":"object","properties":{"boost":{"description":"Floating point number used to decrease or increase the relevance scores of the query.\\nBoost values are relative to the default value of 1.0.\\nA boost value between 0 and 1.0 decreases the relevance score.\\nA value greater than 1.0 increases the relevance score.","type":"number"},"_name":{"type":"string"}}},"_types:MinimumShouldMatch":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-minimum-should-match.html"},"description":"The minimum number of terms that should match as integer, percentage or range","oneOf":[{"type":"number"},{"type":"string"}]},"_types.query_dsl:BoostingQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"negative_boost":{"description":"Floating point number between 0 and 1.0 used to decrease the relevance scores of documents matching the `negative` query.","type":"number"},"negative":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"positive":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"required":["negative_boost","negative","positive"]}]},"_types.query_dsl:CommonTermsQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"type":"string"},"cutoff_frequency":{"type":"number"},"high_freq_operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"low_freq_operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"query":{"type":"string"}},"required":["query"]}]},"_types.query_dsl:Operator":{"type":"string","enum":["and","AND","or","OR"]},"_types.query_dsl:CombinedFieldsQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"fields":{"description":"List of fields to search. Field wildcard patterns are allowed. Only `text` fields are supported, and they must all have the same search `analyzer`.","type":"array","items":{"$ref":"#/components/schemas/_types:Field"}},"query":{"description":"Text to search for in the provided `fields`.\\nThe `combined_fields` query analyzes the provided text before performing a search.","type":"string"},"auto_generate_synonyms_phrase_query":{"description":"If true, match phrase queries are automatically created for multi-term synonyms.","type":"boolean"},"operator":{"$ref":"#/components/schemas/_types.query_dsl:CombinedFieldsOperator"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"zero_terms_query":{"$ref":"#/components/schemas/_types.query_dsl:CombinedFieldsZeroTerms"}},"required":["fields","query"]}]},"_types:Field":{"description":"Path to field or array of paths. Some API\'s support wildcards in the path to select multiple fields.","type":"string"},"_types.query_dsl:CombinedFieldsOperator":{"type":"string","enum":["or","and"]},"_types.query_dsl:CombinedFieldsZeroTerms":{"type":"string","enum":["none","all"]},"_types.query_dsl:ConstantScoreQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"required":["filter"]}]},"_types.query_dsl:DisMaxQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"queries":{"description":"One or more query clauses.\\nReturned documents must match one or more of these queries.\\nIf a document matches multiple queries, Elasticsearch uses the highest relevance score.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"tie_breaker":{"description":"Floating point number between 0 and 1.0 used to increase the relevance scores of documents matching multiple query clauses.","type":"number"}},"required":["queries"]}]},"_types.query_dsl:DistanceFeatureQuery":{"oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:GeoDistanceFeatureQuery"},{"$ref":"#/components/schemas/_types.query_dsl:DateDistanceFeatureQuery"}]},"_types.query_dsl:GeoDistanceFeatureQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:DistanceFeatureQueryBaseGeoLocationDistance"},{"type":"object"}]},"_types.query_dsl:DistanceFeatureQueryBaseGeoLocationDistance":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"origin":{"$ref":"#/components/schemas/_types:GeoLocation"},"pivot":{"$ref":"#/components/schemas/_types:Distance"},"field":{"$ref":"#/components/schemas/_types:Field"}},"required":["origin","pivot","field"]}]},"_types:GeoLocation":{"description":"A latitude/longitude as a 2 dimensional point. It can be represented in various ways:\\n- as a `{lat, long}` object\\n- as a geo hash value\\n- as a `[lon, lat]` array\\n- as a string in `\\"<lat>, <lon>\\"` or WKT point formats","oneOf":[{"$ref":"#/components/schemas/_types:LatLonGeoLocation"},{"$ref":"#/components/schemas/_types:GeoHashLocation"},{"type":"array","items":{"type":"number"}},{"type":"string"}]},"_types:LatLonGeoLocation":{"type":"object","properties":{"lat":{"description":"Latitude","type":"number"},"lon":{"description":"Longitude","type":"number"}},"required":["lat","lon"]},"_types:GeoHashLocation":{"type":"object","properties":{"geohash":{"$ref":"#/components/schemas/_types:GeoHash"}},"required":["geohash"]},"_types:GeoHash":{"type":"string"},"_types:Distance":{"type":"string"},"_types.query_dsl:DateDistanceFeatureQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:DistanceFeatureQueryBaseDateMathDuration"},{"type":"object"}]},"_types.query_dsl:DistanceFeatureQueryBaseDateMathDuration":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"origin":{"$ref":"#/components/schemas/_types:DateMath"},"pivot":{"$ref":"#/components/schemas/_types:Duration"},"field":{"$ref":"#/components/schemas/_types:Field"}},"required":["origin","pivot","field"]}]},"_types:DateMath":{"type":"string"},"_types:Duration":{"externalDocs":{"url":"https://github.com/elastic/elasticsearch/blob/current/libs/core/src/main/java/org/elasticsearch/core/TimeValue.java"},"description":"A duration. Units can be `nanos`, `micros`, `ms` (milliseconds), `s` (seconds), `m` (minutes), `h` (hours) and\\n`d` (days). Also accepts \\"0\\" without a unit and \\"-1\\" to indicate an unspecified value.","oneOf":[{"type":"string"},{"type":"string","enum":["-1"]},{"type":"string","enum":["0"]}]},"_types.query_dsl:ExistsQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"}},"required":["field"]}]},"_types.query_dsl:FunctionScoreQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"boost_mode":{"$ref":"#/components/schemas/_types.query_dsl:FunctionBoostMode"},"functions":{"description":"One or more functions that compute a new score for each document returned by the query.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:FunctionScoreContainer"}},"max_boost":{"description":"Restricts the new score to not exceed the provided limit.","type":"number"},"min_score":{"description":"Excludes documents that do not meet the provided score threshold.","type":"number"},"query":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"score_mode":{"$ref":"#/components/schemas/_types.query_dsl:FunctionScoreMode"}}}]},"_types.query_dsl:FunctionBoostMode":{"type":"string","enum":["multiply","replace","sum","avg","max","min"]},"_types.query_dsl:FunctionScoreContainer":{"allOf":[{"type":"object","properties":{"filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"weight":{"type":"number"}}},{"type":"object","properties":{"exp":{"$ref":"#/components/schemas/_types.query_dsl:DecayFunction"},"gauss":{"$ref":"#/components/schemas/_types.query_dsl:DecayFunction"},"linear":{"$ref":"#/components/schemas/_types.query_dsl:DecayFunction"},"field_value_factor":{"$ref":"#/components/schemas/_types.query_dsl:FieldValueFactorScoreFunction"},"random_score":{"$ref":"#/components/schemas/_types.query_dsl:RandomScoreFunction"},"script_score":{"$ref":"#/components/schemas/_types.query_dsl:ScriptScoreFunction"}},"minProperties":1,"maxProperties":1}]},"_types.query_dsl:DecayFunction":{"oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:DateDecayFunction"},{"$ref":"#/components/schemas/_types.query_dsl:NumericDecayFunction"},{"$ref":"#/components/schemas/_types.query_dsl:GeoDecayFunction"}]},"_types.query_dsl:DateDecayFunction":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:DecayFunctionBase"},{"type":"object"}]},"_types.query_dsl:DecayFunctionBase":{"type":"object","properties":{"multi_value_mode":{"$ref":"#/components/schemas/_types.query_dsl:MultiValueMode"}}},"_types.query_dsl:MultiValueMode":{"type":"string","enum":["min","max","avg","sum"]},"_types.query_dsl:NumericDecayFunction":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:DecayFunctionBase"},{"type":"object"}]},"_types.query_dsl:GeoDecayFunction":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:DecayFunctionBase"},{"type":"object"}]},"_types.query_dsl:FieldValueFactorScoreFunction":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"factor":{"description":"Optional factor to multiply the field value with.","type":"number"},"missing":{"description":"Value used if the document doesn’t have that field.\\nThe modifier and factor are still applied to it as though it were read from the document.","type":"number"},"modifier":{"$ref":"#/components/schemas/_types.query_dsl:FieldValueFactorModifier"}},"required":["field"]},"_types.query_dsl:FieldValueFactorModifier":{"type":"string","enum":["none","log","log1p","log2p","ln","ln1p","ln2p","square","sqrt","reciprocal"]},"_types.query_dsl:RandomScoreFunction":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"seed":{"oneOf":[{"type":"number"},{"type":"string"}]}}},"_types.query_dsl:ScriptScoreFunction":{"type":"object","properties":{"script":{"$ref":"#/components/schemas/_types:Script"}},"required":["script"]},"_types:Script":{"oneOf":[{"$ref":"#/components/schemas/_types:InlineScript"},{"$ref":"#/components/schemas/_types:StoredScriptId"}]},"_types:InlineScript":{"allOf":[{"$ref":"#/components/schemas/_types:ScriptBase"},{"type":"object","properties":{"lang":{"$ref":"#/components/schemas/_types:ScriptLanguage"},"options":{"type":"object","additionalProperties":{"type":"string"}},"source":{"description":"The script source.","type":"string"}},"required":["source"]}]},"_types:ScriptBase":{"type":"object","properties":{"params":{"description":"Specifies any named parameters that are passed into the script as variables.\\nUse parameters instead of hard-coded values to decrease compile time.","type":"object","additionalProperties":{"type":"object"}}}},"_types:ScriptLanguage":{"anyOf":[{"type":"string","enum":["painless","expression","mustache","java"]},{"type":"string"}]},"_types:StoredScriptId":{"allOf":[{"$ref":"#/components/schemas/_types:ScriptBase"},{"type":"object","properties":{"id":{"$ref":"#/components/schemas/_types:Id"}},"required":["id"]}]},"_types:Id":{"type":"string"},"_types.query_dsl:FunctionScoreMode":{"type":"string","enum":["multiply","sum","avg","first","max","min"]},"_types.query_dsl:FuzzyQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"max_expansions":{"description":"Maximum number of variations created.","type":"number"},"prefix_length":{"description":"Number of beginning characters left unchanged when creating expansions.","type":"number"},"rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"transpositions":{"description":"Indicates whether edits include transpositions of two adjacent characters (for example `ab` to `ba`).","type":"boolean"},"fuzziness":{"$ref":"#/components/schemas/_types:Fuzziness"},"value":{"description":"Term you wish to find in the provided field.","oneOf":[{"type":"string"},{"type":"number"},{"type":"boolean"}]}},"required":["value"]}]},"_types:MultiTermQueryRewrite":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-term-rewrite.html"},"type":"string"},"_types:Fuzziness":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#fuzziness"},"oneOf":[{"type":"string"},{"type":"number"}]},"_types.query_dsl:GeoBoundingBoxQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"type":{"$ref":"#/components/schemas/_types.query_dsl:GeoExecution"},"validation_method":{"$ref":"#/components/schemas/_types.query_dsl:GeoValidationMethod"},"ignore_unmapped":{"description":"Set to `true` to ignore an unmapped field and not match any documents for this query.\\nSet to `false` to throw an exception if the field is not mapped.","type":"boolean"}}}]},"_types.query_dsl:GeoExecution":{"type":"string","enum":["memory","indexed"]},"_types.query_dsl:GeoValidationMethod":{"type":"string","enum":["coerce","ignore_malformed","strict"]},"_types.query_dsl:GeoDistanceQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"distance":{"$ref":"#/components/schemas/_types:Distance"},"distance_type":{"$ref":"#/components/schemas/_types:GeoDistanceType"},"validation_method":{"$ref":"#/components/schemas/_types.query_dsl:GeoValidationMethod"},"ignore_unmapped":{"description":"Set to `true` to ignore an unmapped field and not match any documents for this query.\\nSet to `false` to throw an exception if the field is not mapped.","type":"boolean"}},"required":["distance"]}]},"_types:GeoDistanceType":{"type":"string","enum":["arc","plane"]},"_types.query_dsl:GeoPolygonQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"validation_method":{"$ref":"#/components/schemas/_types.query_dsl:GeoValidationMethod"},"ignore_unmapped":{"type":"boolean"}}}]},"_types.query_dsl:GeoShapeQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"ignore_unmapped":{"description":"Set to `true` to ignore an unmapped field and not match any documents for this query.\\nSet to `false` to throw an exception if the field is not mapped.","type":"boolean"}}}]},"_types.query_dsl:HasChildQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"ignore_unmapped":{"description":"Indicates whether to ignore an unmapped `type` and not return any documents instead of an error.","type":"boolean"},"inner_hits":{"$ref":"#/components/schemas/_global.search._types:InnerHits"},"max_children":{"description":"Maximum number of child documents that match the query allowed for a returned parent document.\\nIf the parent document exceeds this limit, it is excluded from the search results.","type":"number"},"min_children":{"description":"Minimum number of child documents that match the query required to match the query for a returned parent document.\\nIf the parent document does not meet this limit, it is excluded from the search results.","type":"number"},"query":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"score_mode":{"$ref":"#/components/schemas/_types.query_dsl:ChildScoreMode"},"type":{"$ref":"#/components/schemas/_types:RelationName"}},"required":["query","type"]}]},"_global.search._types:InnerHits":{"type":"object","properties":{"name":{"$ref":"#/components/schemas/_types:Name"},"size":{"description":"The maximum number of hits to return per `inner_hits`.","type":"number"},"from":{"description":"Inner hit starting document offset.","type":"number"},"collapse":{"$ref":"#/components/schemas/_global.search._types:FieldCollapse"},"docvalue_fields":{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:FieldAndFormat"}},"explain":{"type":"boolean"},"highlight":{"$ref":"#/components/schemas/_global.search._types:Highlight"},"ignore_unmapped":{"type":"boolean"},"script_fields":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types:ScriptField"}},"seq_no_primary_term":{"type":"boolean"},"fields":{"$ref":"#/components/schemas/_types:Fields"},"sort":{"$ref":"#/components/schemas/_types:Sort"},"_source":{"$ref":"#/components/schemas/_global.search._types:SourceConfig"},"stored_fields":{"$ref":"#/components/schemas/_types:Fields"},"track_scores":{"type":"boolean"},"version":{"type":"boolean"}}},"_types:Name":{"type":"string"},"_global.search._types:FieldCollapse":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"inner_hits":{"description":"The number of inner hits and their sort order","oneOf":[{"$ref":"#/components/schemas/_global.search._types:InnerHits"},{"type":"array","items":{"$ref":"#/components/schemas/_global.search._types:InnerHits"}}]},"max_concurrent_group_searches":{"description":"The number of concurrent requests allowed to retrieve the inner_hits per group","type":"number"},"collapse":{"$ref":"#/components/schemas/_global.search._types:FieldCollapse"}},"required":["field"]},"_types.query_dsl:FieldAndFormat":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"format":{"description":"Format in which the values are returned.","type":"string"},"include_unmapped":{"type":"boolean"}},"required":["field"]},"_global.search._types:Highlight":{"allOf":[{"$ref":"#/components/schemas/_global.search._types:HighlightBase"},{"type":"object","properties":{"encoder":{"$ref":"#/components/schemas/_global.search._types:HighlighterEncoder"},"fields":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_global.search._types:HighlightField"}}},"required":["fields"]}]},"_global.search._types:HighlightBase":{"type":"object","properties":{"type":{"$ref":"#/components/schemas/_global.search._types:HighlighterType"},"boundary_chars":{"description":"A string that contains each boundary character.","type":"string"},"boundary_max_scan":{"description":"How far to scan for boundary characters.","type":"number"},"boundary_scanner":{"$ref":"#/components/schemas/_global.search._types:BoundaryScanner"},"boundary_scanner_locale":{"description":"Controls which locale is used to search for sentence and word boundaries.\\nThis parameter takes a form of a language tag, for example: `\\"en-US\\"`, `\\"fr-FR\\"`, `\\"ja-JP\\"`.","type":"string"},"force_source":{"deprecated":true,"type":"boolean"},"fragmenter":{"$ref":"#/components/schemas/_global.search._types:HighlighterFragmenter"},"fragment_size":{"description":"The size of the highlighted fragment in characters.","type":"number"},"highlight_filter":{"type":"boolean"},"highlight_query":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"max_fragment_length":{"type":"number"},"max_analyzed_offset":{"description":"If set to a non-negative value, highlighting stops at this defined maximum limit.\\nThe rest of the text is not processed, thus not highlighted and no error is returned\\nThe `max_analyzed_offset` query setting does not override the `index.highlight.max_analyzed_offset` setting, which prevails when it’s set to lower value than the query setting.","type":"number"},"no_match_size":{"description":"The amount of text you want to return from the beginning of the field if there are no matching fragments to highlight.","type":"number"},"number_of_fragments":{"description":"The maximum number of fragments to return.\\nIf the number of fragments is set to `0`, no fragments are returned.\\nInstead, the entire field contents are highlighted and returned.\\nThis can be handy when you need to highlight short texts such as a title or address, but fragmentation is not required.\\nIf `number_of_fragments` is `0`, `fragment_size` is ignored.","type":"number"},"options":{"type":"object","additionalProperties":{"type":"object"}},"order":{"$ref":"#/components/schemas/_global.search._types:HighlighterOrder"},"phrase_limit":{"description":"Controls the number of matching phrases in a document that are considered.\\nPrevents the `fvh` highlighter from analyzing too many phrases and consuming too much memory.\\nWhen using `matched_fields`, `phrase_limit` phrases per matched field are considered. Raising the limit increases query time and consumes more memory.\\nOnly supported by the `fvh` highlighter.","type":"number"},"post_tags":{"description":"Use in conjunction with `pre_tags` to define the HTML tags to use for the highlighted text.\\nBy default, highlighted text is wrapped in `<em>` and `</em>` tags.","type":"array","items":{"type":"string"}},"pre_tags":{"description":"Use in conjunction with `post_tags` to define the HTML tags to use for the highlighted text.\\nBy default, highlighted text is wrapped in `<em>` and `</em>` tags.","type":"array","items":{"type":"string"}},"require_field_match":{"description":"By default, only fields that contains a query match are highlighted.\\nSet to `false` to highlight all fields.","type":"boolean"},"tags_schema":{"$ref":"#/components/schemas/_global.search._types:HighlighterTagsSchema"}}},"_global.search._types:HighlighterType":{"anyOf":[{"type":"string","enum":["plain","fvh","unified"]},{"type":"string"}]},"_global.search._types:BoundaryScanner":{"type":"string","enum":["chars","sentence","word"]},"_global.search._types:HighlighterFragmenter":{"type":"string","enum":["simple","span"]},"_global.search._types:HighlighterOrder":{"type":"string","enum":["score"]},"_global.search._types:HighlighterTagsSchema":{"type":"string","enum":["styled"]},"_global.search._types:HighlighterEncoder":{"type":"string","enum":["default","html"]},"_global.search._types:HighlightField":{"allOf":[{"$ref":"#/components/schemas/_global.search._types:HighlightBase"},{"type":"object","properties":{"fragment_offset":{"type":"number"},"matched_fields":{"$ref":"#/components/schemas/_types:Fields"},"analyzer":{"$ref":"#/components/schemas/_types.analysis:Analyzer"}}}]},"_types:Fields":{"oneOf":[{"$ref":"#/components/schemas/_types:Field"},{"type":"array","items":{"$ref":"#/components/schemas/_types:Field"}}]},"_types.analysis:Analyzer":{"discriminator":{"propertyName":"type"},"oneOf":[{"$ref":"#/components/schemas/_types.analysis:CustomAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:FingerprintAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:KeywordAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:LanguageAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:NoriAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:PatternAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:SimpleAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:StandardAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:StopAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:WhitespaceAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:IcuAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:KuromojiAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:SnowballAnalyzer"},{"$ref":"#/components/schemas/_types.analysis:DutchAnalyzer"}]},"_types.analysis:CustomAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["custom"]},"char_filter":{"type":"array","items":{"type":"string"}},"filter":{"type":"array","items":{"type":"string"}},"position_increment_gap":{"type":"number"},"position_offset_gap":{"type":"number"},"tokenizer":{"type":"string"}},"required":["type","tokenizer"]},"_types.analysis:FingerprintAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["fingerprint"]},"version":{"$ref":"#/components/schemas/_types:VersionString"},"max_output_size":{"type":"number"},"preserve_original":{"type":"boolean"},"separator":{"type":"string"},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"},"stopwords_path":{"type":"string"}},"required":["type","max_output_size","preserve_original","separator"]},"_types:VersionString":{"type":"string"},"_types.analysis:StopWords":{"description":"Language value, such as _arabic_ or _thai_. Defaults to _english_.\\nEach language value corresponds to a predefined list of stop words in Lucene. See Stop words by language for supported language values and their stop words.\\nAlso accepts an array of stop words.","oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"_types.analysis:KeywordAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["keyword"]},"version":{"$ref":"#/components/schemas/_types:VersionString"}},"required":["type"]},"_types.analysis:LanguageAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["language"]},"version":{"$ref":"#/components/schemas/_types:VersionString"},"language":{"$ref":"#/components/schemas/_types.analysis:Language"},"stem_exclusion":{"type":"array","items":{"type":"string"}},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"},"stopwords_path":{"type":"string"}},"required":["type","language","stem_exclusion"]},"_types.analysis:Language":{"type":"string","enum":["Arabic","Armenian","Basque","Brazilian","Bulgarian","Catalan","Chinese","Cjk","Czech","Danish","Dutch","English","Estonian","Finnish","French","Galician","German","Greek","Hindi","Hungarian","Indonesian","Irish","Italian","Latvian","Norwegian","Persian","Portuguese","Romanian","Russian","Sorani","Spanish","Swedish","Turkish","Thai"]},"_types.analysis:NoriAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["nori"]},"version":{"$ref":"#/components/schemas/_types:VersionString"},"decompound_mode":{"$ref":"#/components/schemas/_types.analysis:NoriDecompoundMode"},"stoptags":{"type":"array","items":{"type":"string"}},"user_dictionary":{"type":"string"}},"required":["type"]},"_types.analysis:NoriDecompoundMode":{"type":"string","enum":["discard","none","mixed"]},"_types.analysis:PatternAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["pattern"]},"version":{"$ref":"#/components/schemas/_types:VersionString"},"flags":{"type":"string"},"lowercase":{"type":"boolean"},"pattern":{"type":"string"},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"}},"required":["type","pattern"]},"_types.analysis:SimpleAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["simple"]},"version":{"$ref":"#/components/schemas/_types:VersionString"}},"required":["type"]},"_types.analysis:StandardAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["standard"]},"max_token_length":{"type":"number"},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"}},"required":["type"]},"_types.analysis:StopAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["stop"]},"version":{"$ref":"#/components/schemas/_types:VersionString"},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"},"stopwords_path":{"type":"string"}},"required":["type"]},"_types.analysis:WhitespaceAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["whitespace"]},"version":{"$ref":"#/components/schemas/_types:VersionString"}},"required":["type"]},"_types.analysis:IcuAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["icu_analyzer"]},"method":{"$ref":"#/components/schemas/_types.analysis:IcuNormalizationType"},"mode":{"$ref":"#/components/schemas/_types.analysis:IcuNormalizationMode"}},"required":["type","method","mode"]},"_types.analysis:IcuNormalizationType":{"type":"string","enum":["nfc","nfkc","nfkc_cf"]},"_types.analysis:IcuNormalizationMode":{"type":"string","enum":["decompose","compose"]},"_types.analysis:KuromojiAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["kuromoji"]},"mode":{"$ref":"#/components/schemas/_types.analysis:KuromojiTokenizationMode"},"user_dictionary":{"type":"string"}},"required":["type","mode"]},"_types.analysis:KuromojiTokenizationMode":{"type":"string","enum":["normal","search","extended"]},"_types.analysis:SnowballAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["snowball"]},"version":{"$ref":"#/components/schemas/_types:VersionString"},"language":{"$ref":"#/components/schemas/_types.analysis:SnowballLanguage"},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"}},"required":["type","language"]},"_types.analysis:SnowballLanguage":{"type":"string","enum":["Armenian","Basque","Catalan","Danish","Dutch","English","Finnish","French","German","German2","Hungarian","Italian","Kp","Lovins","Norwegian","Porter","Portuguese","Romanian","Russian","Spanish","Swedish","Turkish"]},"_types.analysis:DutchAnalyzer":{"type":"object","properties":{"type":{"type":"string","enum":["dutch"]},"stopwords":{"$ref":"#/components/schemas/_types.analysis:StopWords"}},"required":["type"]},"_types:ScriptField":{"type":"object","properties":{"script":{"$ref":"#/components/schemas/_types:Script"},"ignore_failure":{"type":"boolean"}},"required":["script"]},"_types:Sort":{"oneOf":[{"$ref":"#/components/schemas/_types:SortCombinations"},{"type":"array","items":{"$ref":"#/components/schemas/_types:SortCombinations"}}]},"_types:SortCombinations":{"oneOf":[{"$ref":"#/components/schemas/_types:Field"},{"$ref":"#/components/schemas/_types:SortOptions"}]},"_types:SortOptions":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/sort-search-results.html"},"type":"object","properties":{"_score":{"$ref":"#/components/schemas/_types:ScoreSort"},"_doc":{"$ref":"#/components/schemas/_types:ScoreSort"},"_geo_distance":{"$ref":"#/components/schemas/_types:GeoDistanceSort"},"_script":{"$ref":"#/components/schemas/_types:ScriptSort"}},"minProperties":1,"maxProperties":1},"_types:ScoreSort":{"type":"object","properties":{"order":{"$ref":"#/components/schemas/_types:SortOrder"}}},"_types:SortOrder":{"type":"string","enum":["asc","desc"]},"_types:GeoDistanceSort":{"type":"object","properties":{"mode":{"$ref":"#/components/schemas/_types:SortMode"},"distance_type":{"$ref":"#/components/schemas/_types:GeoDistanceType"},"ignore_unmapped":{"type":"boolean"},"order":{"$ref":"#/components/schemas/_types:SortOrder"},"unit":{"$ref":"#/components/schemas/_types:DistanceUnit"}}},"_types:SortMode":{"type":"string","enum":["min","max","sum","avg","median"]},"_types:DistanceUnit":{"type":"string","enum":["in","ft","yd","mi","nmi","km","m","cm","mm"]},"_types:ScriptSort":{"type":"object","properties":{"order":{"$ref":"#/components/schemas/_types:SortOrder"},"script":{"$ref":"#/components/schemas/_types:Script"},"type":{"$ref":"#/components/schemas/_types:ScriptSortType"},"mode":{"$ref":"#/components/schemas/_types:SortMode"},"nested":{"$ref":"#/components/schemas/_types:NestedSortValue"}},"required":["script"]},"_types:ScriptSortType":{"type":"string","enum":["string","number","version"]},"_types:NestedSortValue":{"type":"object","properties":{"filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"max_children":{"type":"number"},"nested":{"$ref":"#/components/schemas/_types:NestedSortValue"},"path":{"$ref":"#/components/schemas/_types:Field"}},"required":["path"]},"_global.search._types:SourceConfig":{"description":"Defines how to fetch a source. Fetching can be disabled entirely, or the source can be filtered.","oneOf":[{"type":"boolean"},{"$ref":"#/components/schemas/_global.search._types:SourceFilter"}]},"_global.search._types:SourceFilter":{"type":"object","properties":{"excludes":{"$ref":"#/components/schemas/_types:Fields"},"includes":{"$ref":"#/components/schemas/_types:Fields"}}},"_types.query_dsl:ChildScoreMode":{"type":"string","enum":["none","avg","sum","max","min"]},"_types:RelationName":{"type":"string"},"_types.query_dsl:HasParentQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"ignore_unmapped":{"description":"Indicates whether to ignore an unmapped `parent_type` and not return any documents instead of an error.\\nYou can use this parameter to query multiple indices that may not contain the `parent_type`.","type":"boolean"},"inner_hits":{"$ref":"#/components/schemas/_global.search._types:InnerHits"},"parent_type":{"$ref":"#/components/schemas/_types:RelationName"},"query":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"score":{"description":"Indicates whether the relevance score of a matching parent document is aggregated into its child documents.","type":"boolean"}},"required":["parent_type","query"]}]},"_types.query_dsl:IdsQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"values":{"$ref":"#/components/schemas/_types:Ids"}}}]},"_types:Ids":{"oneOf":[{"$ref":"#/components/schemas/_types:Id"},{"type":"array","items":{"$ref":"#/components/schemas/_types:Id"}}]},"_types.query_dsl:IntervalsQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"all_of":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsAllOf"},"any_of":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsAnyOf"},"fuzzy":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsFuzzy"},"match":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsMatch"},"prefix":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsPrefix"},"wildcard":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsWildcard"}},"minProperties":1,"maxProperties":1}]},"_types.query_dsl:IntervalsAllOf":{"type":"object","properties":{"intervals":{"description":"An array of rules to combine. All rules must produce a match in a document for the overall source to match.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"}},"max_gaps":{"description":"Maximum number of positions between the matching terms.\\nIntervals produced by the rules further apart than this are not considered matches.","type":"number"},"ordered":{"description":"If `true`, intervals produced by the rules should appear in the order in which they are specified.","type":"boolean"},"filter":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsFilter"}},"required":["intervals"]},"_types.query_dsl:IntervalsContainer":{"type":"object","properties":{"all_of":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsAllOf"},"any_of":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsAnyOf"},"fuzzy":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsFuzzy"},"match":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsMatch"},"prefix":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsPrefix"},"wildcard":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsWildcard"}},"minProperties":1,"maxProperties":1},"_types.query_dsl:IntervalsAnyOf":{"type":"object","properties":{"intervals":{"description":"An array of rules to match.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"}},"filter":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsFilter"}},"required":["intervals"]},"_types.query_dsl:IntervalsFilter":{"type":"object","properties":{"after":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"before":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"contained_by":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"containing":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"not_contained_by":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"not_containing":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"not_overlapping":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"overlapping":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsContainer"},"script":{"$ref":"#/components/schemas/_types:Script"}},"minProperties":1,"maxProperties":1},"_types.query_dsl:IntervalsFuzzy":{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to normalize the term.","type":"string"},"fuzziness":{"$ref":"#/components/schemas/_types:Fuzziness"},"prefix_length":{"description":"Number of beginning characters left unchanged when creating expansions.","type":"number"},"term":{"description":"The term to match.","type":"string"},"transpositions":{"description":"Indicates whether edits include transpositions of two adjacent characters (for example, `ab` to `ba`).","type":"boolean"},"use_field":{"$ref":"#/components/schemas/_types:Field"}},"required":["term"]},"_types.query_dsl:IntervalsMatch":{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to analyze terms in the query.","type":"string"},"max_gaps":{"description":"Maximum number of positions between the matching terms.\\nTerms further apart than this are not considered matches.","type":"number"},"ordered":{"description":"If `true`, matching terms must appear in their specified order.","type":"boolean"},"query":{"description":"Text you wish to find in the provided field.","type":"string"},"use_field":{"$ref":"#/components/schemas/_types:Field"},"filter":{"$ref":"#/components/schemas/_types.query_dsl:IntervalsFilter"}},"required":["query"]},"_types.query_dsl:IntervalsPrefix":{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to analyze the `prefix`.","type":"string"},"prefix":{"description":"Beginning characters of terms you wish to find in the top-level field.","type":"string"},"use_field":{"$ref":"#/components/schemas/_types:Field"}},"required":["prefix"]},"_types.query_dsl:IntervalsWildcard":{"type":"object","properties":{"analyzer":{"description":"Analyzer used to analyze the `pattern`.\\nDefaults to the top-level field\'s analyzer.","type":"string"},"pattern":{"description":"Wildcard pattern used to find matching terms.","type":"string"},"use_field":{"$ref":"#/components/schemas/_types:Field"}},"required":["pattern"]},"_types:KnnQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"query_vector":{"$ref":"#/components/schemas/_types:QueryVector"},"query_vector_builder":{"$ref":"#/components/schemas/_types:QueryVectorBuilder"},"num_candidates":{"description":"The number of nearest neighbor candidates to consider per shard","type":"number"},"filter":{"description":"Filters for the kNN search query","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}}]},"similarity":{"description":"The minimum similarity for a vector to be considered a match","type":"number"}},"required":["field"]}]},"_types:QueryVector":{"type":"array","items":{"type":"number"}},"_types:QueryVectorBuilder":{"type":"object","properties":{"text_embedding":{"$ref":"#/components/schemas/_types:TextEmbedding"}},"minProperties":1,"maxProperties":1},"_types:TextEmbedding":{"type":"object","properties":{"model_id":{"type":"string"},"model_text":{"type":"string"}},"required":["model_id","model_text"]},"_types.query_dsl:MatchQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert the text in the query value into tokens.","type":"string"},"auto_generate_synonyms_phrase_query":{"description":"If `true`, match phrase queries are automatically created for multi-term synonyms.","type":"boolean"},"cutoff_frequency":{"deprecated":true,"type":"number"},"fuzziness":{"$ref":"#/components/schemas/_types:Fuzziness"},"fuzzy_rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"fuzzy_transpositions":{"description":"If `true`, edits for fuzzy matching include transpositions of two adjacent characters (for example, `ab` to `ba`).","type":"boolean"},"lenient":{"description":"If `true`, format-based errors, such as providing a text query value for a numeric field, are ignored.","type":"boolean"},"max_expansions":{"description":"Maximum number of terms to which the query will expand.","type":"number"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"prefix_length":{"description":"Number of beginning characters left unchanged for fuzzy matching.","type":"number"},"query":{"description":"Text, number, boolean value or date you wish to find in the provided field.","oneOf":[{"type":"string"},{"type":"number"},{"type":"boolean"}]},"zero_terms_query":{"$ref":"#/components/schemas/_types.query_dsl:ZeroTermsQuery"}},"required":["query"]}]},"_types.query_dsl:ZeroTermsQuery":{"type":"string","enum":["all","none"]},"_types.query_dsl:MatchAllQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object"}]},"_types.query_dsl:MatchBoolPrefixQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert the text in the query value into tokens.","type":"string"},"fuzziness":{"$ref":"#/components/schemas/_types:Fuzziness"},"fuzzy_rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"fuzzy_transpositions":{"description":"If `true`, edits for fuzzy matching include transpositions of two adjacent characters (for example, `ab` to `ba`).\\nCan be applied to the term subqueries constructed for all terms but the final term.","type":"boolean"},"max_expansions":{"description":"Maximum number of terms to which the query will expand.\\nCan be applied to the term subqueries constructed for all terms but the final term.","type":"number"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"prefix_length":{"description":"Number of beginning characters left unchanged for fuzzy matching.\\nCan be applied to the term subqueries constructed for all terms but the final term.","type":"number"},"query":{"description":"Terms you wish to find in the provided field.\\nThe last term is used in a prefix query.","type":"string"}},"required":["query"]}]},"_types.query_dsl:MatchNoneQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object"}]},"_types.query_dsl:MatchPhraseQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert the text in the query value into tokens.","type":"string"},"query":{"description":"Query terms that are analyzed and turned into a phrase query.","type":"string"},"slop":{"description":"Maximum number of positions allowed between matching tokens.","type":"number"},"zero_terms_query":{"$ref":"#/components/schemas/_types.query_dsl:ZeroTermsQuery"}},"required":["query"]}]},"_types.query_dsl:MatchPhrasePrefixQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert text in the query value into tokens.","type":"string"},"max_expansions":{"description":"Maximum number of terms to which the last provided term of the query value will expand.","type":"number"},"query":{"description":"Text you wish to find in the provided field.","type":"string"},"slop":{"description":"Maximum number of positions allowed between matching tokens.","type":"number"},"zero_terms_query":{"$ref":"#/components/schemas/_types.query_dsl:ZeroTermsQuery"}},"required":["query"]}]},"_types.query_dsl:MoreLikeThisQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"The analyzer that is used to analyze the free form text.\\nDefaults to the analyzer associated with the first field in fields.","type":"string"},"boost_terms":{"description":"Each term in the formed query could be further boosted by their tf-idf score.\\nThis sets the boost factor to use when using this feature.\\nDefaults to deactivated (0).","type":"number"},"fail_on_unsupported_field":{"description":"Controls whether the query should fail (throw an exception) if any of the specified fields are not of the supported types (`text` or `keyword`).","type":"boolean"},"fields":{"description":"A list of fields to fetch and analyze the text from.\\nDefaults to the `index.query.default_field` index setting, which has a default value of `*`.","type":"array","items":{"$ref":"#/components/schemas/_types:Field"}},"include":{"description":"Specifies whether the input documents should also be included in the search results returned.","type":"boolean"},"like":{"description":"Specifies free form text and/or a single or multiple documents for which you want to find similar documents.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:Like"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:Like"}}]},"max_doc_freq":{"description":"The maximum document frequency above which the terms are ignored from the input document.","type":"number"},"max_query_terms":{"description":"The maximum number of query terms that can be selected.","type":"number"},"max_word_length":{"description":"The maximum word length above which the terms are ignored.\\nDefaults to unbounded (`0`).","type":"number"},"min_doc_freq":{"description":"The minimum document frequency below which the terms are ignored from the input document.","type":"number"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"min_term_freq":{"description":"The minimum term frequency below which the terms are ignored from the input document.","type":"number"},"min_word_length":{"description":"The minimum word length below which the terms are ignored.","type":"number"},"routing":{"$ref":"#/components/schemas/_types:Routing"},"stop_words":{"$ref":"#/components/schemas/_types.analysis:StopWords"},"unlike":{"description":"Used in combination with `like` to exclude documents that match a set of terms.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:Like"},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:Like"}}]},"version":{"$ref":"#/components/schemas/_types:VersionNumber"},"version_type":{"$ref":"#/components/schemas/_types:VersionType"}},"required":["like"]}]},"_types.query_dsl:Like":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-mlt-query.html#_document_input_parameters"},"description":"Text that we want similar documents for or a lookup to a document\'s field for the text.","oneOf":[{"type":"string"},{"$ref":"#/components/schemas/_types.query_dsl:LikeDocument"}]},"_types.query_dsl:LikeDocument":{"type":"object","properties":{"doc":{"description":"A document not present in the index.","type":"object"},"fields":{"type":"array","items":{"$ref":"#/components/schemas/_types:Field"}},"_id":{"$ref":"#/components/schemas/_types:Id"},"_index":{"$ref":"#/components/schemas/_types:IndexName"},"per_field_analyzer":{"description":"Overrides the default analyzer.","type":"object","additionalProperties":{"type":"string"}},"routing":{"$ref":"#/components/schemas/_types:Routing"},"version":{"$ref":"#/components/schemas/_types:VersionNumber"},"version_type":{"$ref":"#/components/schemas/_types:VersionType"}}},"_types:IndexName":{"type":"string"},"_types:Routing":{"type":"string"},"_types:VersionNumber":{"type":"number"},"_types:VersionType":{"type":"string","enum":["internal","external","external_gte","force"]},"_types.query_dsl:MultiMatchQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert the text in the query value into tokens.","type":"string"},"auto_generate_synonyms_phrase_query":{"description":"If `true`, match phrase queries are automatically created for multi-term synonyms.","type":"boolean"},"cutoff_frequency":{"deprecated":true,"type":"number"},"fields":{"$ref":"#/components/schemas/_types:Fields"},"fuzziness":{"$ref":"#/components/schemas/_types:Fuzziness"},"fuzzy_rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"fuzzy_transpositions":{"description":"If `true`, edits for fuzzy matching include transpositions of two adjacent characters (for example, `ab` to `ba`).\\nCan be applied to the term subqueries constructed for all terms but the final term.","type":"boolean"},"lenient":{"description":"If `true`, format-based errors, such as providing a text query value for a numeric field, are ignored.","type":"boolean"},"max_expansions":{"description":"Maximum number of terms to which the query will expand.","type":"number"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"prefix_length":{"description":"Number of beginning characters left unchanged for fuzzy matching.","type":"number"},"query":{"description":"Text, number, boolean value or date you wish to find in the provided field.","type":"string"},"slop":{"description":"Maximum number of positions allowed between matching tokens.","type":"number"},"tie_breaker":{"description":"Determines how scores for each per-term blended query and scores across groups are combined.","type":"number"},"type":{"$ref":"#/components/schemas/_types.query_dsl:TextQueryType"},"zero_terms_query":{"$ref":"#/components/schemas/_types.query_dsl:ZeroTermsQuery"}},"required":["query"]}]},"_types.query_dsl:TextQueryType":{"type":"string","enum":["best_fields","most_fields","cross_fields","phrase","phrase_prefix","bool_prefix"]},"_types.query_dsl:NestedQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"ignore_unmapped":{"description":"Indicates whether to ignore an unmapped path and not return any documents instead of an error.","type":"boolean"},"inner_hits":{"$ref":"#/components/schemas/_global.search._types:InnerHits"},"path":{"$ref":"#/components/schemas/_types:Field"},"query":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"score_mode":{"$ref":"#/components/schemas/_types.query_dsl:ChildScoreMode"}},"required":["path","query"]}]},"_types.query_dsl:ParentIdQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"id":{"$ref":"#/components/schemas/_types:Id"},"ignore_unmapped":{"description":"Indicates whether to ignore an unmapped `type` and not return any documents instead of an error.","type":"boolean"},"type":{"$ref":"#/components/schemas/_types:RelationName"}}}]},"_types.query_dsl:PercolateQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"document":{"description":"The source of the document being percolated.","type":"object"},"documents":{"description":"An array of sources of the documents being percolated.","type":"array","items":{"type":"object"}},"field":{"$ref":"#/components/schemas/_types:Field"},"id":{"$ref":"#/components/schemas/_types:Id"},"index":{"$ref":"#/components/schemas/_types:IndexName"},"name":{"description":"The suffix used for the `_percolator_document_slot` field when multiple `percolate` queries are specified.","type":"string"},"preference":{"description":"Preference used to fetch document to percolate.","type":"string"},"routing":{"$ref":"#/components/schemas/_types:Routing"},"version":{"$ref":"#/components/schemas/_types:VersionNumber"}},"required":["field"]}]},"_types.query_dsl:PinnedQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"allOf":[{"type":"object","properties":{"organic":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"required":["organic"]},{"type":"object","properties":{"ids":{"description":"Document IDs listed in the order they are to appear in results.\\nRequired if `docs` is not specified.","type":"array","items":{"$ref":"#/components/schemas/_types:Id"}},"docs":{"description":"Documents listed in the order they are to appear in results.\\nRequired if `ids` is not specified.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:PinnedDoc"}}},"minProperties":1,"maxProperties":1}]}]},"_types.query_dsl:PinnedDoc":{"type":"object","properties":{"_id":{"$ref":"#/components/schemas/_types:Id"},"_index":{"$ref":"#/components/schemas/_types:IndexName"}},"required":["_id","_index"]},"_types.query_dsl:PrefixQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"value":{"description":"Beginning characters of terms you wish to find in the provided field.","type":"string"},"case_insensitive":{"description":"Allows ASCII case insensitive matching of the value with the indexed field values when set to `true`.\\nDefault is `false` which means the case sensitivity of matching depends on the underlying field’s mapping.","type":"boolean"}},"required":["value"]}]},"_types.query_dsl:QueryStringQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"allow_leading_wildcard":{"description":"If `true`, the wildcard characters `*` and `?` are allowed as the first character of the query string.","type":"boolean"},"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert text in the query string into tokens.","type":"string"},"analyze_wildcard":{"description":"If `true`, the query attempts to analyze wildcard terms in the query string.","type":"boolean"},"auto_generate_synonyms_phrase_query":{"description":"If `true`, match phrase queries are automatically created for multi-term synonyms.","type":"boolean"},"default_field":{"$ref":"#/components/schemas/_types:Field"},"default_operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"enable_position_increments":{"description":"If `true`, enable position increments in queries constructed from a `query_string` search.","type":"boolean"},"escape":{"type":"boolean"},"fields":{"description":"Array of fields to search. Supports wildcards (`*`).","type":"array","items":{"$ref":"#/components/schemas/_types:Field"}},"fuzziness":{"$ref":"#/components/schemas/_types:Fuzziness"},"fuzzy_max_expansions":{"description":"Maximum number of terms to which the query expands for fuzzy matching.","type":"number"},"fuzzy_prefix_length":{"description":"Number of beginning characters left unchanged for fuzzy matching.","type":"number"},"fuzzy_rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"fuzzy_transpositions":{"description":"If `true`, edits for fuzzy matching include transpositions of two adjacent characters (for example, `ab` to `ba`).","type":"boolean"},"lenient":{"description":"If `true`, format-based errors, such as providing a text value for a numeric field, are ignored.","type":"boolean"},"max_determinized_states":{"description":"Maximum number of automaton states required for the query.","type":"number"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"phrase_slop":{"description":"Maximum number of positions allowed between matching tokens for phrases.","type":"number"},"query":{"description":"Query string you wish to parse and use for search.","type":"string"},"quote_analyzer":{"description":"Analyzer used to convert quoted text in the query string into tokens.\\nFor quoted text, this parameter overrides the analyzer specified in the `analyzer` parameter.","type":"string"},"quote_field_suffix":{"description":"Suffix appended to quoted text in the query string.\\nYou can use this suffix to use a different analysis method for exact matches.","type":"string"},"rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"tie_breaker":{"description":"How to combine the queries generated from the individual search terms in the resulting `dis_max` query.","type":"number"},"time_zone":{"$ref":"#/components/schemas/_types:TimeZone"},"type":{"$ref":"#/components/schemas/_types.query_dsl:TextQueryType"}},"required":["query"]}]},"_types:TimeZone":{"type":"string"},"_types.query_dsl:RangeQuery":{"oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:DateRangeQuery"},{"$ref":"#/components/schemas/_types.query_dsl:NumberRangeQuery"},{"$ref":"#/components/schemas/_types.query_dsl:TermsRangeQuery"}]},"_types.query_dsl:DateRangeQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RangeQueryBase"},{"type":"object","properties":{"gt":{"$ref":"#/components/schemas/_types:DateMath"},"gte":{"$ref":"#/components/schemas/_types:DateMath"},"lt":{"$ref":"#/components/schemas/_types:DateMath"},"lte":{"$ref":"#/components/schemas/_types:DateMath"},"from":{"oneOf":[{"$ref":"#/components/schemas/_types:DateMath"},{"nullable":true,"type":"string"}]},"to":{"oneOf":[{"$ref":"#/components/schemas/_types:DateMath"},{"nullable":true,"type":"string"}]},"format":{"$ref":"#/components/schemas/_types:DateFormat"},"time_zone":{"$ref":"#/components/schemas/_types:TimeZone"}}}]},"_types.query_dsl:RangeQueryBase":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"relation":{"$ref":"#/components/schemas/_types.query_dsl:RangeRelation"}}}]},"_types.query_dsl:RangeRelation":{"type":"string","enum":["within","contains","intersects"]},"_types:DateFormat":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html"},"type":"string"},"_types.query_dsl:NumberRangeQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RangeQueryBase"},{"type":"object","properties":{"gt":{"description":"Greater than.","type":"number"},"gte":{"description":"Greater than or equal to.","type":"number"},"lt":{"description":"Less than.","type":"number"},"lte":{"description":"Less than or equal to.","type":"number"},"from":{"oneOf":[{"type":"number"},{"nullable":true,"type":"string"}]},"to":{"oneOf":[{"type":"number"},{"nullable":true,"type":"string"}]}}}]},"_types.query_dsl:TermsRangeQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RangeQueryBase"},{"type":"object","properties":{"gt":{"description":"Greater than.","type":"string"},"gte":{"description":"Greater than or equal to.","type":"string"},"lt":{"description":"Less than.","type":"string"},"lte":{"description":"Less than or equal to.","type":"string"},"from":{"oneOf":[{"type":"string"},{"nullable":true,"type":"string"}]},"to":{"oneOf":[{"type":"string"},{"nullable":true,"type":"string"}]}}}]},"_types.query_dsl:RankFeatureQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"saturation":{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunctionSaturation"},"log":{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunctionLogarithm"},"linear":{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunctionLinear"},"sigmoid":{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunctionSigmoid"}},"required":["field"]}]},"_types.query_dsl:RankFeatureFunctionSaturation":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunction"},{"type":"object","properties":{"pivot":{"description":"Configurable pivot value so that the result will be less than 0.5.","type":"number"}}}]},"_types.query_dsl:RankFeatureFunction":{"type":"object"},"_types.query_dsl:RankFeatureFunctionLogarithm":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunction"},{"type":"object","properties":{"scaling_factor":{"description":"Configurable scaling factor.","type":"number"}},"required":["scaling_factor"]}]},"_types.query_dsl:RankFeatureFunctionLinear":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunction"},{"type":"object"}]},"_types.query_dsl:RankFeatureFunctionSigmoid":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:RankFeatureFunction"},{"type":"object","properties":{"pivot":{"description":"Configurable pivot value so that the result will be less than 0.5.","type":"number"},"exponent":{"description":"Configurable Exponent.","type":"number"}},"required":["pivot","exponent"]}]},"_types.query_dsl:RegexpQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"case_insensitive":{"description":"Allows case insensitive matching of the regular expression value with the indexed field values when set to `true`.\\nWhen `false`, case sensitivity of matching depends on the underlying field’s mapping.","type":"boolean"},"flags":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/regexp-syntax.html"},"description":"Enables optional operators for the regular expression.","type":"string"},"max_determinized_states":{"description":"Maximum number of automaton states required for the query.","type":"number"},"rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"value":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/regexp-syntax.html"},"description":"Regular expression for terms you wish to find in the provided field.","type":"string"}},"required":["value"]}]},"_types.query_dsl:RuleQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"organic":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"ruleset_id":{"$ref":"#/components/schemas/_types:Id"},"match_criteria":{"type":"object"}},"required":["organic","ruleset_id","match_criteria"]}]},"_types.query_dsl:ScriptQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"script":{"$ref":"#/components/schemas/_types:Script"}},"required":["script"]}]},"_types.query_dsl:ScriptScoreQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"min_score":{"description":"Documents with a score lower than this floating point number are excluded from the search results.","type":"number"},"query":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"script":{"$ref":"#/components/schemas/_types:Script"}},"required":["query","script"]}]},"_types.query_dsl:ShapeQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"ignore_unmapped":{"description":"When set to `true` the query ignores an unmapped field and will not match any documents.","type":"boolean"}}}]},"_types.query_dsl:SimpleQueryStringQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"analyzer":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html"},"description":"Analyzer used to convert text in the query string into tokens.","type":"string"},"analyze_wildcard":{"description":"If `true`, the query attempts to analyze wildcard terms in the query string.","type":"boolean"},"auto_generate_synonyms_phrase_query":{"description":"If `true`, the parser creates a match_phrase query for each multi-position token.","type":"boolean"},"default_operator":{"$ref":"#/components/schemas/_types.query_dsl:Operator"},"fields":{"description":"Array of fields you wish to search.\\nAccepts wildcard expressions.\\nYou also can boost relevance scores for matches to particular fields using a caret (`^`) notation.\\nDefaults to the `index.query.default_field index` setting, which has a default value of `*`.","type":"array","items":{"$ref":"#/components/schemas/_types:Field"}},"flags":{"$ref":"#/components/schemas/_types.query_dsl:SimpleQueryStringFlags"},"fuzzy_max_expansions":{"description":"Maximum number of terms to which the query expands for fuzzy matching.","type":"number"},"fuzzy_prefix_length":{"description":"Number of beginning characters left unchanged for fuzzy matching.","type":"number"},"fuzzy_transpositions":{"description":"If `true`, edits for fuzzy matching include transpositions of two adjacent characters (for example, `ab` to `ba`).","type":"boolean"},"lenient":{"description":"If `true`, format-based errors, such as providing a text value for a numeric field, are ignored.","type":"boolean"},"minimum_should_match":{"$ref":"#/components/schemas/_types:MinimumShouldMatch"},"query":{"description":"Query string in the simple query string syntax you wish to parse and use for search.","type":"string"},"quote_field_suffix":{"description":"Suffix appended to quoted text in the query string.","type":"string"}},"required":["query"]}]},"_types.query_dsl:SimpleQueryStringFlags":{"externalDocs":{"url":"https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html#supported-flags"},"description":"Query flags can be either a single flag or a combination of flags, e.g. `OR|AND|PREFIX`","allOf":[{"$ref":"#/components/schemas/_spec_utils:PipeSeparatedFlagsSimpleQueryStringFlag"}]},"_spec_utils:PipeSeparatedFlagsSimpleQueryStringFlag":{"description":"A set of flags that can be represented as a single enum value or a set of values that are encoded\\nas a pipe-separated string\\n\\nDepending on the target language, code generators can use this hint to generate language specific\\nflags enum constructs and the corresponding (de-)serialization code.","oneOf":[{"$ref":"#/components/schemas/_types.query_dsl:SimpleQueryStringFlag"},{"type":"string"}]},"_types.query_dsl:SimpleQueryStringFlag":{"type":"string","enum":["NONE","AND","NOT","OR","PREFIX","PHRASE","PRECEDENCE","ESCAPE","WHITESPACE","FUZZY","NEAR","SLOP","ALL"]},"_types.query_dsl:SpanContainingQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"big":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"},"little":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"}},"required":["big","little"]}]},"_types.query_dsl:SpanQuery":{"type":"object","properties":{"span_containing":{"$ref":"#/components/schemas/_types.query_dsl:SpanContainingQuery"},"field_masking_span":{"$ref":"#/components/schemas/_types.query_dsl:SpanFieldMaskingQuery"},"span_first":{"$ref":"#/components/schemas/_types.query_dsl:SpanFirstQuery"},"span_gap":{"$ref":"#/components/schemas/_types.query_dsl:SpanGapQuery"},"span_multi":{"$ref":"#/components/schemas/_types.query_dsl:SpanMultiTermQuery"},"span_near":{"$ref":"#/components/schemas/_types.query_dsl:SpanNearQuery"},"span_not":{"$ref":"#/components/schemas/_types.query_dsl:SpanNotQuery"},"span_or":{"$ref":"#/components/schemas/_types.query_dsl:SpanOrQuery"},"span_term":{"description":"The equivalent of the `term` query but for use with other span queries.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:SpanTermQuery"},"minProperties":1,"maxProperties":1},"span_within":{"$ref":"#/components/schemas/_types.query_dsl:SpanWithinQuery"}},"minProperties":1,"maxProperties":1},"_types.query_dsl:SpanFieldMaskingQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"query":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"}},"required":["field","query"]}]},"_types.query_dsl:SpanFirstQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"end":{"description":"Controls the maximum end position permitted in a match.","type":"number"},"match":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"}},"required":["end","match"]}]},"_types.query_dsl:SpanGapQuery":{"description":"Can only be used as a clause in a span_near query.","type":"object","additionalProperties":{"type":"number"},"minProperties":1,"maxProperties":1},"_types.query_dsl:SpanMultiTermQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"match":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"required":["match"]}]},"_types.query_dsl:SpanNearQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"clauses":{"description":"Array of one or more other span type queries.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"}},"in_order":{"description":"Controls whether matches are required to be in-order.","type":"boolean"},"slop":{"description":"Controls the maximum number of intervening unmatched positions permitted.","type":"number"}},"required":["clauses"]}]},"_types.query_dsl:SpanNotQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"dist":{"description":"The number of tokens from within the include span that can’t have overlap with the exclude span.\\nEquivalent to setting both `pre` and `post`.","type":"number"},"exclude":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"},"include":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"},"post":{"description":"The number of tokens after the include span that can’t have overlap with the exclude span.","type":"number"},"pre":{"description":"The number of tokens before the include span that can’t have overlap with the exclude span.","type":"number"}},"required":["exclude","include"]}]},"_types.query_dsl:SpanOrQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"clauses":{"description":"Array of one or more other span type queries.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"}}},"required":["clauses"]}]},"_types.query_dsl:SpanTermQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"value":{"type":"string"}},"required":["value"]}]},"_types.query_dsl:SpanWithinQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"big":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"},"little":{"$ref":"#/components/schemas/_types.query_dsl:SpanQuery"}},"required":["big","little"]}]},"_types.query_dsl:TermQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"value":{"$ref":"#/components/schemas/_types:FieldValue"},"case_insensitive":{"description":"Allows ASCII case insensitive matching of the value with the indexed field values when set to `true`.\\nWhen `false`, the case sensitivity of matching depends on the underlying field’s mapping.","type":"boolean"}},"required":["value"]}]},"_types:FieldValue":{"description":"A field value.","oneOf":[{"type":"number"},{"type":"number"},{"type":"string"},{"type":"boolean"},{"nullable":true,"type":"string"},{"type":"object"}]},"_types.query_dsl:TermsQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object"}]},"_types.query_dsl:TermsSetQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"minimum_should_match_field":{"$ref":"#/components/schemas/_types:Field"},"minimum_should_match_script":{"$ref":"#/components/schemas/_types:Script"},"terms":{"description":"Array of terms you wish to find in the provided field.","type":"array","items":{"type":"string"}}},"required":["terms"]}]},"_types.query_dsl:TextExpansionQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"model_id":{"description":"The text expansion NLP model to use","type":"string"},"model_text":{"description":"The query text","type":"string"},"pruning_config":{"$ref":"#/components/schemas/_types.query_dsl:TokenPruningConfig"}},"required":["model_id","model_text"]}]},"_types.query_dsl:TokenPruningConfig":{"type":"object","properties":{"tokens_freq_ratio_threshold":{"description":"Tokens whose frequency is more than this threshold times the average frequency of all tokens in the specified field are considered outliers and pruned.","type":"number"},"tokens_weight_threshold":{"description":"Tokens whose weight is less than this threshold are considered nonsignificant and pruned.","type":"number"},"only_score_pruned_tokens":{"description":"Whether to only score pruned tokens, vs only scoring kept tokens.","type":"boolean"}}},"_types.query_dsl:WeightedTokensQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"tokens":{"description":"The tokens representing this query","type":"object","additionalProperties":{"type":"number"}},"pruning_config":{"$ref":"#/components/schemas/_types.query_dsl:TokenPruningConfig"}},"required":["tokens"]}]},"_types.query_dsl:WildcardQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"case_insensitive":{"description":"Allows case insensitive matching of the pattern with the indexed field values when set to true. Default is false which means the case sensitivity of matching depends on the underlying field’s mapping.","type":"boolean"},"rewrite":{"$ref":"#/components/schemas/_types:MultiTermQueryRewrite"},"value":{"description":"Wildcard pattern for terms you wish to find in the provided field. Required, when wildcard is not set.","type":"string"},"wildcard":{"description":"Wildcard pattern for terms you wish to find in the provided field. Required, when value is not set.","type":"string"}}}]},"_types.query_dsl:WrapperQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"query":{"description":"A base64 encoded query.\\nThe binary data format can be any of JSON, YAML, CBOR or SMILE encodings","type":"string"}},"required":["query"]}]},"_types.query_dsl:TypeQuery":{"allOf":[{"$ref":"#/components/schemas/_types.query_dsl:QueryBase"},{"type":"object","properties":{"value":{"type":"string"}},"required":["value"]}]},"_types.aggregations:AutoDateHistogramAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"buckets":{"description":"The target number of buckets.","type":"number"},"field":{"$ref":"#/components/schemas/_types:Field"},"format":{"description":"The date format used to format `key_as_string` in the response.\\nIf no `format` is specified, the first date format specified in the field mapping is used.","type":"string"},"minimum_interval":{"$ref":"#/components/schemas/_types.aggregations:MinimumInterval"},"missing":{"$ref":"#/components/schemas/_types:DateTime"},"offset":{"description":"Time zone specified as a ISO 8601 UTC offset.","type":"string"},"params":{"type":"object","additionalProperties":{"type":"object"}},"script":{"$ref":"#/components/schemas/_types:Script"},"time_zone":{"$ref":"#/components/schemas/_types:TimeZone"}}}]},"_types.aggregations:MinimumInterval":{"type":"string","enum":["second","minute","hour","day","month","year"]},"_types:DateTime":{"description":"A date and time, either as a string whose format can depend on the context (defaulting to ISO 8601), or a\\nnumber of milliseconds since the Epoch. Elasticsearch accepts both as input, but will generally output a string\\nrepresentation.","oneOf":[{"type":"string"},{"$ref":"#/components/schemas/_types:EpochTimeUnitMillis"}]},"_types:EpochTimeUnitMillis":{"allOf":[{"$ref":"#/components/schemas/_types:UnitMillis"}]},"_types:UnitMillis":{"description":"Time unit for milliseconds","type":"number"},"_types.aggregations:AverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object"}]},"_types.aggregations:FormatMetricAggregationBase":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"format":{"type":"string"}}}]},"_types.aggregations:MetricAggregationBase":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"missing":{"$ref":"#/components/schemas/_types.aggregations:Missing"},"script":{"$ref":"#/components/schemas/_types:Script"}}},"_types.aggregations:Missing":{"oneOf":[{"type":"string"},{"type":"number"},{"type":"number"},{"type":"boolean"}]},"_types.aggregations:AverageBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:PipelineAggregationBase":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketPathAggregation"},{"type":"object","properties":{"format":{"description":"`DecimalFormat` pattern for the output value.\\nIf specified, the formatted value is returned in the aggregation’s `value_as_string` property.","type":"string"},"gap_policy":{"$ref":"#/components/schemas/_types.aggregations:GapPolicy"}}}]},"_types.aggregations:BucketPathAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object","properties":{"buckets_path":{"$ref":"#/components/schemas/_types.aggregations:BucketsPath"}}}]},"_types.aggregations:BucketsPath":{"description":"Buckets path can be expressed in different ways, and an aggregation may accept some or all of these\\nforms depending on its type. Please refer to each aggregation\'s documentation to know what buckets\\npath forms they accept.","oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}},{"type":"object","additionalProperties":{"type":"string"}}]},"_types.aggregations:GapPolicy":{"type":"string","enum":["skip","insert_zeros","keep_values"]},"_types.aggregations:BoxplotAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"compression":{"description":"Limits the maximum number of nodes used by the underlying TDigest algorithm to `20 * compression`, enabling control of memory usage and approximation error.","type":"number"}}}]},"_types.aggregations:BucketScriptAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"script":{"$ref":"#/components/schemas/_types:Script"}}}]},"_types.aggregations:BucketSelectorAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"script":{"$ref":"#/components/schemas/_types:Script"}}}]},"_types.aggregations:BucketSortAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object","properties":{"from":{"description":"Buckets in positions prior to `from` will be truncated.","type":"number"},"gap_policy":{"$ref":"#/components/schemas/_types.aggregations:GapPolicy"},"size":{"description":"The number of buckets to return.\\nDefaults to all buckets of the parent aggregation.","type":"number"},"sort":{"$ref":"#/components/schemas/_types:Sort"}}}]},"_types.aggregations:BucketKsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketPathAggregation"},{"type":"object","properties":{"alternative":{"description":"A list of string values indicating which K-S test alternative to calculate. The valid values\\nare: \\"greater\\", \\"less\\", \\"two_sided\\". This parameter is key for determining the K-S statistic used\\nwhen calculating the K-S test. Default value is all possible alternative hypotheses.","type":"array","items":{"type":"string"}},"fractions":{"description":"A list of doubles indicating the distribution of the samples with which to compare to the `buckets_path` results.\\nIn typical usage this is the overall proportion of documents in each bucket, which is compared with the actual\\ndocument proportions in each bucket from the sibling aggregation counts. The default is to assume that overall\\ndocuments are uniformly distributed on these buckets, which they would be if one used equal percentiles of a\\nmetric to define the bucket end points.","type":"array","items":{"type":"number"}},"sampling_method":{"description":"Indicates the sampling methodology when calculating the K-S test. Note, this is sampling of the returned values.\\nThis determines the cumulative distribution function (CDF) points used comparing the two samples. Default is\\n`upper_tail`, which emphasizes the upper end of the CDF points. Valid options are: `upper_tail`, `uniform`,\\nand `lower_tail`.","type":"string"}}}]},"_types.aggregations:BucketCorrelationAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketPathAggregation"},{"type":"object","properties":{"function":{"$ref":"#/components/schemas/_types.aggregations:BucketCorrelationFunction"}},"required":["function"]}]},"_types.aggregations:BucketCorrelationFunction":{"type":"object","properties":{"count_correlation":{"$ref":"#/components/schemas/_types.aggregations:BucketCorrelationFunctionCountCorrelation"}},"required":["count_correlation"]},"_types.aggregations:BucketCorrelationFunctionCountCorrelation":{"type":"object","properties":{"indicator":{"$ref":"#/components/schemas/_types.aggregations:BucketCorrelationFunctionCountCorrelationIndicator"}},"required":["indicator"]},"_types.aggregations:BucketCorrelationFunctionCountCorrelationIndicator":{"type":"object","properties":{"doc_count":{"description":"The total number of documents that initially created the expectations. It’s required to be greater\\nthan or equal to the sum of all values in the buckets_path as this is the originating superset of data\\nto which the term values are correlated.","type":"number"},"expectations":{"description":"An array of numbers with which to correlate the configured `bucket_path` values.\\nThe length of this value must always equal the number of buckets returned by the `bucket_path`.","type":"array","items":{"type":"number"}},"fractions":{"description":"An array of fractions to use when averaging and calculating variance. This should be used if\\nthe pre-calculated data and the buckets_path have known gaps. The length of fractions, if provided,\\nmust equal expectations.","type":"array","items":{"type":"number"}}},"required":["doc_count","expectations"]},"_types.aggregations:CardinalityAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"precision_threshold":{"description":"A unique count below which counts are expected to be close to accurate.\\nThis allows to trade memory for accuracy.","type":"number"},"rehash":{"type":"boolean"},"execution_hint":{"$ref":"#/components/schemas/_types.aggregations:CardinalityExecutionMode"}}}]},"_types.aggregations:CardinalityExecutionMode":{"type":"string","enum":["global_ordinals","segment_ordinals","direct","save_memory_heuristic","save_time_heuristic"]},"_types.aggregations:CategorizeTextAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"max_unique_tokens":{"description":"The maximum number of unique tokens at any position up to max_matched_tokens. Must be larger than 1.\\nSmaller values use less memory and create fewer categories. Larger values will use more memory and\\ncreate narrower categories. Max allowed value is 100.","type":"number"},"max_matched_tokens":{"description":"The maximum number of token positions to match on before attempting to merge categories. Larger\\nvalues will use more memory and create narrower categories. Max allowed value is 100.","type":"number"},"similarity_threshold":{"description":"The minimum percentage of tokens that must match for text to be added to the category bucket. Must\\nbe between 1 and 100. The larger the value the narrower the categories. Larger values will increase memory\\nusage and create narrower categories.","type":"number"},"categorization_filters":{"description":"This property expects an array of regular expressions. The expressions are used to filter out matching\\nsequences from the categorization field values. You can use this functionality to fine tune the categorization\\nby excluding sequences from consideration when categories are defined. For example, you can exclude SQL\\nstatements that appear in your log files. This property cannot be used at the same time as categorization_analyzer.\\nIf you only want to define simple regular expression filters that are applied prior to tokenization, setting\\nthis property is the easiest method. If you also want to customize the tokenizer or post-tokenization filtering,\\nuse the categorization_analyzer property instead and include the filters as pattern_replace character filters.","type":"array","items":{"type":"string"}},"categorization_analyzer":{"$ref":"#/components/schemas/_types.aggregations:CategorizeTextAnalyzer"},"shard_size":{"description":"The number of categorization buckets to return from each shard before merging all the results.","type":"number"},"size":{"description":"The number of buckets to return.","type":"number"},"min_doc_count":{"description":"The minimum number of documents in a bucket to be returned to the results.","type":"number"},"shard_min_doc_count":{"description":"The minimum number of documents in a bucket to be returned from the shard before merging.","type":"number"}},"required":["field"]}]},"_types.aggregations:CategorizeTextAnalyzer":{"oneOf":[{"type":"string"},{"$ref":"#/components/schemas/_types.aggregations:CustomCategorizeTextAnalyzer"}]},"_types.aggregations:CustomCategorizeTextAnalyzer":{"type":"object","properties":{"char_filter":{"type":"array","items":{"type":"string"}},"tokenizer":{"type":"string"},"filter":{"type":"array","items":{"type":"string"}}}},"_types.aggregations:ChildrenAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"type":{"$ref":"#/components/schemas/_types:RelationName"}}}]},"_types.aggregations:CompositeAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"after":{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregateKey"},"size":{"description":"The number of composite buckets that should be returned.","type":"number"},"sources":{"description":"The value sources used to build composite buckets.\\nKeys are returned in the order of the `sources` definition.","type":"array","items":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregationSource"}}}}}]},"_types.aggregations:CompositeAggregateKey":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types:FieldValue"}},"_types.aggregations:CompositeAggregationSource":{"type":"object","properties":{"terms":{"$ref":"#/components/schemas/_types.aggregations:CompositeTermsAggregation"},"histogram":{"$ref":"#/components/schemas/_types.aggregations:CompositeHistogramAggregation"},"date_histogram":{"$ref":"#/components/schemas/_types.aggregations:CompositeDateHistogramAggregation"},"geotile_grid":{"$ref":"#/components/schemas/_types.aggregations:CompositeGeoTileGridAggregation"}}},"_types.aggregations:CompositeTermsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregationBase"},{"type":"object"}]},"_types.aggregations:CompositeAggregationBase":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"missing_bucket":{"type":"boolean"},"missing_order":{"$ref":"#/components/schemas/_types.aggregations:MissingOrder"},"script":{"$ref":"#/components/schemas/_types:Script"},"value_type":{"$ref":"#/components/schemas/_types.aggregations:ValueType"},"order":{"$ref":"#/components/schemas/_types:SortOrder"}}},"_types.aggregations:MissingOrder":{"type":"string","enum":["first","last","default"]},"_types.aggregations:ValueType":{"type":"string","enum":["string","long","double","number","date","date_nanos","ip","numeric","geo_point","boolean"]},"_types.aggregations:CompositeHistogramAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregationBase"},{"type":"object","properties":{"interval":{"type":"number"}},"required":["interval"]}]},"_types.aggregations:CompositeDateHistogramAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregationBase"},{"type":"object","properties":{"format":{"type":"string"},"calendar_interval":{"$ref":"#/components/schemas/_types:DurationLarge"},"fixed_interval":{"$ref":"#/components/schemas/_types:DurationLarge"},"offset":{"$ref":"#/components/schemas/_types:Duration"},"time_zone":{"$ref":"#/components/schemas/_types:TimeZone"}}}]},"_types:DurationLarge":{"description":"A date histogram interval. Similar to `Duration` with additional units: `w` (week), `M` (month), `q` (quarter) and\\n`y` (year)","type":"string"},"_types.aggregations:CompositeGeoTileGridAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:CompositeAggregationBase"},{"type":"object","properties":{"precision":{"type":"number"},"bounds":{"$ref":"#/components/schemas/_types:GeoBounds"}}}]},"_types:GeoBounds":{"description":"A geo bounding box. It can be represented in various ways:\\n- as 4 top/bottom/left/right coordinates\\n- as 2 top_left / bottom_right points\\n- as 2 top_right / bottom_left points\\n- as a WKT bounding box","oneOf":[{"$ref":"#/components/schemas/_types:CoordsGeoBounds"},{"$ref":"#/components/schemas/_types:TopLeftBottomRightGeoBounds"},{"$ref":"#/components/schemas/_types:TopRightBottomLeftGeoBounds"},{"$ref":"#/components/schemas/_types:WktGeoBounds"}]},"_types:CoordsGeoBounds":{"type":"object","properties":{"top":{"type":"number"},"bottom":{"type":"number"},"left":{"type":"number"},"right":{"type":"number"}},"required":["top","bottom","left","right"]},"_types:TopLeftBottomRightGeoBounds":{"type":"object","properties":{"top_left":{"$ref":"#/components/schemas/_types:GeoLocation"},"bottom_right":{"$ref":"#/components/schemas/_types:GeoLocation"}},"required":["top_left","bottom_right"]},"_types:TopRightBottomLeftGeoBounds":{"type":"object","properties":{"top_right":{"$ref":"#/components/schemas/_types:GeoLocation"},"bottom_left":{"$ref":"#/components/schemas/_types:GeoLocation"}},"required":["top_right","bottom_left"]},"_types:WktGeoBounds":{"type":"object","properties":{"wkt":{"type":"string"}},"required":["wkt"]},"_types.aggregations:CumulativeCardinalityAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:CumulativeSumAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:DateHistogramAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"calendar_interval":{"$ref":"#/components/schemas/_types.aggregations:CalendarInterval"},"extended_bounds":{"$ref":"#/components/schemas/_types.aggregations:ExtendedBoundsFieldDateMath"},"hard_bounds":{"$ref":"#/components/schemas/_types.aggregations:ExtendedBoundsFieldDateMath"},"field":{"$ref":"#/components/schemas/_types:Field"},"fixed_interval":{"$ref":"#/components/schemas/_types:Duration"},"format":{"description":"The date format used to format `key_as_string` in the response.\\nIf no `format` is specified, the first date format specified in the field mapping is used.","type":"string"},"interval":{"$ref":"#/components/schemas/_types:Duration"},"min_doc_count":{"description":"Only returns buckets that have `min_doc_count` number of documents.\\nBy default, all buckets between the first bucket that matches documents and the last one are returned.","type":"number"},"missing":{"$ref":"#/components/schemas/_types:DateTime"},"offset":{"$ref":"#/components/schemas/_types:Duration"},"order":{"$ref":"#/components/schemas/_types.aggregations:AggregateOrder"},"params":{"type":"object","additionalProperties":{"type":"object"}},"script":{"$ref":"#/components/schemas/_types:Script"},"time_zone":{"$ref":"#/components/schemas/_types:TimeZone"},"keyed":{"description":"Set to `true` to associate a unique string key with each bucket and return the ranges as a hash rather than an array.","type":"boolean"}}}]},"_types.aggregations:CalendarInterval":{"type":"string","enum":["second","1s","minute","1m","hour","1h","day","1d","week","1w","month","1M","quarter","1q","year","1Y"]},"_types.aggregations:ExtendedBoundsFieldDateMath":{"type":"object","properties":{"max":{"$ref":"#/components/schemas/_types.aggregations:FieldDateMath"},"min":{"$ref":"#/components/schemas/_types.aggregations:FieldDateMath"}}},"_types.aggregations:FieldDateMath":{"description":"A date range limit, represented either as a DateMath expression or a number expressed\\naccording to the target field\'s precision.","oneOf":[{"$ref":"#/components/schemas/_types:DateMath"},{"type":"number"}]},"_types.aggregations:AggregateOrder":{"oneOf":[{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types:SortOrder"},"minProperties":1,"maxProperties":1},{"type":"array","items":{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types:SortOrder"},"minProperties":1,"maxProperties":1}}]},"_types.aggregations:DateRangeAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"format":{"description":"The date format used to format `from` and `to` in the response.","type":"string"},"missing":{"$ref":"#/components/schemas/_types.aggregations:Missing"},"ranges":{"description":"Array of date ranges.","type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:DateRangeExpression"}},"time_zone":{"$ref":"#/components/schemas/_types:TimeZone"},"keyed":{"description":"Set to `true` to associate a unique string key with each bucket and returns the ranges as a hash rather than an array.","type":"boolean"}}}]},"_types.aggregations:DateRangeExpression":{"type":"object","properties":{"from":{"$ref":"#/components/schemas/_types.aggregations:FieldDateMath"},"key":{"description":"Custom key to return the range with.","type":"string"},"to":{"$ref":"#/components/schemas/_types.aggregations:FieldDateMath"}}},"_types.aggregations:DerivativeAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:DiversifiedSamplerAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"execution_hint":{"$ref":"#/components/schemas/_types.aggregations:SamplerAggregationExecutionHint"},"max_docs_per_value":{"description":"Limits how many documents are permitted per choice of de-duplicating value.","type":"number"},"script":{"$ref":"#/components/schemas/_types:Script"},"shard_size":{"description":"Limits how many top-scoring documents are collected in the sample processed on each shard.","type":"number"},"field":{"$ref":"#/components/schemas/_types:Field"}}}]},"_types.aggregations:SamplerAggregationExecutionHint":{"type":"string","enum":["map","global_ordinals","bytes_hash"]},"_types.aggregations:ExtendedStatsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object","properties":{"sigma":{"description":"The number of standard deviations above/below the mean to display.","type":"number"}}}]},"_types.aggregations:ExtendedStatsBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"sigma":{"description":"The number of standard deviations above/below the mean to display.","type":"number"}}}]},"_types.aggregations:FrequentItemSetsAggregation":{"type":"object","properties":{"fields":{"description":"Fields to analyze.","type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:FrequentItemSetsField"}},"minimum_set_size":{"description":"The minimum size of one item set.","type":"number"},"minimum_support":{"description":"The minimum support of one item set.","type":"number"},"size":{"description":"The number of top item sets to return.","type":"number"},"filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"required":["fields"]},"_types.aggregations:FrequentItemSetsField":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"exclude":{"$ref":"#/components/schemas/_types.aggregations:TermsExclude"},"include":{"$ref":"#/components/schemas/_types.aggregations:TermsInclude"}},"required":["field"]},"_types.aggregations:TermsExclude":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}}]},"_types.aggregations:TermsInclude":{"oneOf":[{"type":"string"},{"type":"array","items":{"type":"string"}},{"$ref":"#/components/schemas/_types.aggregations:TermsPartition"}]},"_types.aggregations:TermsPartition":{"type":"object","properties":{"num_partitions":{"description":"The number of partitions.","type":"number"},"partition":{"description":"The partition number for this request.","type":"number"}},"required":["num_partitions","partition"]},"_types.aggregations:FiltersAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"filters":{"$ref":"#/components/schemas/_types.aggregations:BucketsQueryContainer"},"other_bucket":{"description":"Set to `true` to add a bucket to the response which will contain all documents that do not match any of the given filters.","type":"boolean"},"other_bucket_key":{"description":"The key with which the other bucket is returned.","type":"string"},"keyed":{"description":"By default, the named filters aggregation returns the buckets as an object.\\nSet to `false` to return the buckets as an array of objects.","type":"boolean"}}}]},"_types.aggregations:BucketsQueryContainer":{"description":"Aggregation buckets. By default they are returned as an array, but if the aggregation has keys configured for\\nthe different buckets, the result is a dictionary.","oneOf":[{"type":"object","additionalProperties":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},{"type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}}]},"_types.aggregations:GeoBoundsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"wrap_longitude":{"description":"Specifies whether the bounding box should be allowed to overlap the international date line.","type":"boolean"}}}]},"_types.aggregations:GeoCentroidAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"count":{"type":"number"},"location":{"$ref":"#/components/schemas/_types:GeoLocation"}}}]},"_types.aggregations:GeoDistanceAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"distance_type":{"$ref":"#/components/schemas/_types:GeoDistanceType"},"field":{"$ref":"#/components/schemas/_types:Field"},"origin":{"$ref":"#/components/schemas/_types:GeoLocation"},"ranges":{"description":"An array of ranges used to bucket documents.","type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:AggregationRange"}},"unit":{"$ref":"#/components/schemas/_types:DistanceUnit"}}}]},"_types.aggregations:AggregationRange":{"type":"object","properties":{"from":{"description":"Start of the range (inclusive).","oneOf":[{"type":"number"},{"type":"string"},{"nullable":true,"type":"string"}]},"key":{"description":"Custom key to return the range with.","type":"string"},"to":{"description":"End of the range (exclusive).","oneOf":[{"type":"number"},{"type":"string"},{"nullable":true,"type":"string"}]}}},"_types.aggregations:GeoHashGridAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"bounds":{"$ref":"#/components/schemas/_types:GeoBounds"},"field":{"$ref":"#/components/schemas/_types:Field"},"precision":{"$ref":"#/components/schemas/_types:GeoHashPrecision"},"shard_size":{"description":"Allows for more accurate counting of the top cells returned in the final result the aggregation.\\nDefaults to returning `max(10,(size x number-of-shards))` buckets from each shard.","type":"number"},"size":{"description":"The maximum number of geohash buckets to return.","type":"number"}}}]},"_types:GeoHashPrecision":{"description":"A precision that can be expressed as a geohash length between 1 and 12, or a distance measure like \\"1km\\", \\"10m\\".","oneOf":[{"type":"number"},{"type":"string"}]},"_types.aggregations:GeoLineAggregation":{"type":"object","properties":{"point":{"$ref":"#/components/schemas/_types.aggregations:GeoLinePoint"},"sort":{"$ref":"#/components/schemas/_types.aggregations:GeoLineSort"},"include_sort":{"description":"When `true`, returns an additional array of the sort values in the feature properties.","type":"boolean"},"sort_order":{"$ref":"#/components/schemas/_types:SortOrder"},"size":{"description":"The maximum length of the line represented in the aggregation.\\nValid sizes are between 1 and 10000.","type":"number"}},"required":["point","sort"]},"_types.aggregations:GeoLinePoint":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"}},"required":["field"]},"_types.aggregations:GeoLineSort":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"}},"required":["field"]},"_types.aggregations:GeoTileGridAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"precision":{"$ref":"#/components/schemas/_types:GeoTilePrecision"},"shard_size":{"description":"Allows for more accurate counting of the top cells returned in the final result the aggregation.\\nDefaults to returning `max(10,(size x number-of-shards))` buckets from each shard.","type":"number"},"size":{"description":"The maximum number of buckets to return.","type":"number"},"bounds":{"$ref":"#/components/schemas/_types:GeoBounds"}}}]},"_types:GeoTilePrecision":{"type":"number"},"_types.aggregations:GeohexGridAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"precision":{"description":"Integer zoom of the key used to defined cells or buckets\\nin the results. Value should be between 0-15.","type":"number"},"bounds":{"$ref":"#/components/schemas/_types:GeoBounds"},"size":{"description":"Maximum number of buckets to return.","type":"number"},"shard_size":{"description":"Number of buckets returned from each shard.","type":"number"}},"required":["field"]}]},"_types.aggregations:GlobalAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object"}]},"_types.aggregations:HistogramAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"extended_bounds":{"$ref":"#/components/schemas/_types.aggregations:ExtendedBoundsdouble"},"hard_bounds":{"$ref":"#/components/schemas/_types.aggregations:ExtendedBoundsdouble"},"field":{"$ref":"#/components/schemas/_types:Field"},"interval":{"description":"The interval for the buckets.\\nMust be a positive decimal.","type":"number"},"min_doc_count":{"description":"Only returns buckets that have `min_doc_count` number of documents.\\nBy default, the response will fill gaps in the histogram with empty buckets.","type":"number"},"missing":{"description":"The value to apply to documents that do not have a value.\\nBy default, documents without a value are ignored.","type":"number"},"offset":{"description":"By default, the bucket keys start with 0 and then continue in even spaced steps of `interval`.\\nThe bucket boundaries can be shifted by using the `offset` option.","type":"number"},"order":{"$ref":"#/components/schemas/_types.aggregations:AggregateOrder"},"script":{"$ref":"#/components/schemas/_types:Script"},"format":{"type":"string"},"keyed":{"description":"If `true`, returns buckets as a hash instead of an array, keyed by the bucket keys.","type":"boolean"}}}]},"_types.aggregations:ExtendedBoundsdouble":{"type":"object","properties":{"max":{"description":"Maximum value for the bound.","type":"number"},"min":{"description":"Minimum value for the bound.","type":"number"}}},"_types.aggregations:IpRangeAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"ranges":{"description":"Array of IP ranges.","type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:IpRangeAggregationRange"}}}}]},"_types.aggregations:IpRangeAggregationRange":{"type":"object","properties":{"from":{"description":"Start of the range.","oneOf":[{"type":"string"},{"nullable":true,"type":"string"}]},"mask":{"description":"IP range defined as a CIDR mask.","type":"string"},"to":{"description":"End of the range.","oneOf":[{"type":"string"},{"nullable":true,"type":"string"}]}}},"_types.aggregations:IpPrefixAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"prefix_length":{"description":"Length of the network prefix. For IPv4 addresses the accepted range is [0, 32].\\nFor IPv6 addresses the accepted range is [0, 128].","type":"number"},"is_ipv6":{"description":"Defines whether the prefix applies to IPv6 addresses.","type":"boolean"},"append_prefix_length":{"description":"Defines whether the prefix length is appended to IP address keys in the response.","type":"boolean"},"keyed":{"description":"Defines whether buckets are returned as a hash rather than an array in the response.","type":"boolean"},"min_doc_count":{"description":"Minimum number of documents in a bucket for it to be included in the response.","type":"number"}},"required":["field","prefix_length"]}]},"_types.aggregations:InferenceAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"model_id":{"$ref":"#/components/schemas/_types:Name"},"inference_config":{"$ref":"#/components/schemas/_types.aggregations:InferenceConfigContainer"}},"required":["model_id"]}]},"_types.aggregations:InferenceConfigContainer":{"type":"object","properties":{"regression":{"$ref":"#/components/schemas/ml._types:RegressionInferenceOptions"},"classification":{"$ref":"#/components/schemas/ml._types:ClassificationInferenceOptions"}},"minProperties":1,"maxProperties":1},"ml._types:RegressionInferenceOptions":{"type":"object","properties":{"results_field":{"$ref":"#/components/schemas/_types:Field"},"num_top_feature_importance_values":{"externalDocs":{"url":"https://www.elastic.co/guide/en/machine-learning/current/ml-feature-importance.html"},"description":"Specifies the maximum number of feature importance values per document.","type":"number"}}},"ml._types:ClassificationInferenceOptions":{"type":"object","properties":{"num_top_classes":{"description":"Specifies the number of top class predictions to return. Defaults to 0.","type":"number"},"num_top_feature_importance_values":{"externalDocs":{"url":"https://www.elastic.co/guide/en/machine-learning/current/ml-feature-importance.html"},"description":"Specifies the maximum number of feature importance values per document.","type":"number"},"prediction_field_type":{"description":"Specifies the type of the predicted field to write. Acceptable values are: string, number, boolean. When boolean is provided 1.0 is transformed to true and 0.0 to false.","type":"string"},"results_field":{"description":"The field that is added to incoming documents to contain the inference prediction. Defaults to predicted_value.","type":"string"},"top_classes_results_field":{"description":"Specifies the field to which the top classes are written. Defaults to top_classes.","type":"string"}}},"_types.aggregations:MatrixStatsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MatrixAggregation"},{"type":"object","properties":{"mode":{"$ref":"#/components/schemas/_types:SortMode"}}}]},"_types.aggregations:MatrixAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object","properties":{"fields":{"$ref":"#/components/schemas/_types:Fields"},"missing":{"description":"The value to apply to documents that do not have a value.\\nBy default, documents without a value are ignored.","type":"object","additionalProperties":{"type":"number"}}}}]},"_types.aggregations:MaxAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object"}]},"_types.aggregations:MaxBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:MedianAbsoluteDeviationAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object","properties":{"compression":{"description":"Limits the maximum number of nodes used by the underlying TDigest algorithm to `20 * compression`, enabling control of memory usage and approximation error.","type":"number"}}}]},"_types.aggregations:MinAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object"}]},"_types.aggregations:MinBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:MissingAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"missing":{"$ref":"#/components/schemas/_types.aggregations:Missing"}}}]},"_types.aggregations:MovingAverageAggregation":{"discriminator":{"propertyName":"model"},"oneOf":[{"$ref":"#/components/schemas/_types.aggregations:LinearMovingAverageAggregation"},{"$ref":"#/components/schemas/_types.aggregations:SimpleMovingAverageAggregation"},{"$ref":"#/components/schemas/_types.aggregations:EwmaMovingAverageAggregation"},{"$ref":"#/components/schemas/_types.aggregations:HoltMovingAverageAggregation"},{"$ref":"#/components/schemas/_types.aggregations:HoltWintersMovingAverageAggregation"}]},"_types.aggregations:LinearMovingAverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MovingAverageAggregationBase"},{"type":"object","properties":{"model":{"type":"string","enum":["linear"]},"settings":{"$ref":"#/components/schemas/_types:EmptyObject"}},"required":["model","settings"]}]},"_types.aggregations:MovingAverageAggregationBase":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"minimize":{"type":"boolean"},"predict":{"type":"number"},"window":{"type":"number"}}}]},"_types:EmptyObject":{"type":"object"},"_types.aggregations:SimpleMovingAverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MovingAverageAggregationBase"},{"type":"object","properties":{"model":{"type":"string","enum":["simple"]},"settings":{"$ref":"#/components/schemas/_types:EmptyObject"}},"required":["model","settings"]}]},"_types.aggregations:EwmaMovingAverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MovingAverageAggregationBase"},{"type":"object","properties":{"model":{"type":"string","enum":["ewma"]},"settings":{"$ref":"#/components/schemas/_types.aggregations:EwmaModelSettings"}},"required":["model","settings"]}]},"_types.aggregations:EwmaModelSettings":{"type":"object","properties":{"alpha":{"type":"number"}}},"_types.aggregations:HoltMovingAverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MovingAverageAggregationBase"},{"type":"object","properties":{"model":{"type":"string","enum":["holt"]},"settings":{"$ref":"#/components/schemas/_types.aggregations:HoltLinearModelSettings"}},"required":["model","settings"]}]},"_types.aggregations:HoltLinearModelSettings":{"type":"object","properties":{"alpha":{"type":"number"},"beta":{"type":"number"}}},"_types.aggregations:HoltWintersMovingAverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MovingAverageAggregationBase"},{"type":"object","properties":{"model":{"type":"string","enum":["holt_winters"]},"settings":{"$ref":"#/components/schemas/_types.aggregations:HoltWintersModelSettings"}},"required":["model","settings"]}]},"_types.aggregations:HoltWintersModelSettings":{"type":"object","properties":{"alpha":{"type":"number"},"beta":{"type":"number"},"gamma":{"type":"number"},"pad":{"type":"boolean"},"period":{"type":"number"},"type":{"$ref":"#/components/schemas/_types.aggregations:HoltWintersType"}}},"_types.aggregations:HoltWintersType":{"type":"string","enum":["add","mult"]},"_types.aggregations:MovingPercentilesAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"window":{"description":"The size of window to \\"slide\\" across the histogram.","type":"number"},"shift":{"description":"By default, the window consists of the last n values excluding the current bucket.\\nIncreasing `shift` by 1, moves the starting window position by 1 to the right.","type":"number"},"keyed":{"type":"boolean"}}}]},"_types.aggregations:MovingFunctionAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"script":{"description":"The script that should be executed on each window of data.","type":"string"},"shift":{"description":"By default, the window consists of the last n values excluding the current bucket.\\nIncreasing `shift` by 1, moves the starting window position by 1 to the right.","type":"number"},"window":{"description":"The size of window to \\"slide\\" across the histogram.","type":"number"}}}]},"_types.aggregations:MultiTermsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"collect_mode":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregationCollectMode"},"order":{"$ref":"#/components/schemas/_types.aggregations:AggregateOrder"},"min_doc_count":{"description":"The minimum number of documents in a bucket for it to be returned.","type":"number"},"shard_min_doc_count":{"description":"The minimum number of documents in a bucket on each shard for it to be returned.","type":"number"},"shard_size":{"description":"The number of candidate terms produced by each shard.\\nBy default, `shard_size` will be automatically estimated based on the number of shards and the `size` parameter.","type":"number"},"show_term_doc_count_error":{"description":"Calculates the doc count error on per term basis.","type":"boolean"},"size":{"description":"The number of term buckets should be returned out of the overall terms list.","type":"number"},"terms":{"description":"The field from which to generate sets of terms.","type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:MultiTermLookup"}}},"required":["terms"]}]},"_types.aggregations:TermsAggregationCollectMode":{"type":"string","enum":["depth_first","breadth_first"]},"_types.aggregations:MultiTermLookup":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"missing":{"$ref":"#/components/schemas/_types.aggregations:Missing"}},"required":["field"]},"_types.aggregations:NestedAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"path":{"$ref":"#/components/schemas/_types:Field"}}}]},"_types.aggregations:NormalizeAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"method":{"$ref":"#/components/schemas/_types.aggregations:NormalizeMethod"}}}]},"_types.aggregations:NormalizeMethod":{"type":"string","enum":["rescale_0_1","rescale_0_100","percent_of_sum","mean","z-score","softmax"]},"_types.aggregations:ParentAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"type":{"$ref":"#/components/schemas/_types:RelationName"}}}]},"_types.aggregations:PercentileRanksAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object","properties":{"keyed":{"description":"By default, the aggregation associates a unique string key with each bucket and returns the ranges as a hash rather than an array.\\nSet to `false` to disable this behavior.","type":"boolean"},"values":{"description":"An array of values for which to calculate the percentile ranks.","oneOf":[{"type":"array","items":{"type":"number"}},{"nullable":true,"type":"string"}]},"hdr":{"$ref":"#/components/schemas/_types.aggregations:HdrMethod"},"tdigest":{"$ref":"#/components/schemas/_types.aggregations:TDigest"}}}]},"_types.aggregations:HdrMethod":{"type":"object","properties":{"number_of_significant_value_digits":{"description":"Specifies the resolution of values for the histogram in number of significant digits.","type":"number"}}},"_types.aggregations:TDigest":{"type":"object","properties":{"compression":{"description":"Limits the maximum number of nodes used by the underlying TDigest algorithm to `20 * compression`, enabling control of memory usage and approximation error.","type":"number"}}},"_types.aggregations:PercentilesAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object","properties":{"keyed":{"description":"By default, the aggregation associates a unique string key with each bucket and returns the ranges as a hash rather than an array.\\nSet to `false` to disable this behavior.","type":"boolean"},"percents":{"description":"The percentiles to calculate.","type":"array","items":{"type":"number"}},"hdr":{"$ref":"#/components/schemas/_types.aggregations:HdrMethod"},"tdigest":{"$ref":"#/components/schemas/_types.aggregations:TDigest"}}}]},"_types.aggregations:PercentilesBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"percents":{"description":"The list of percentiles to calculate.","type":"array","items":{"type":"number"}}}}]},"_types.aggregations:RangeAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"missing":{"description":"The value to apply to documents that do not have a value.\\nBy default, documents without a value are ignored.","type":"number"},"ranges":{"description":"An array of ranges used to bucket documents.","type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:AggregationRange"}},"script":{"$ref":"#/components/schemas/_types:Script"},"keyed":{"description":"Set to `true` to associate a unique string key with each bucket and return the ranges as a hash rather than an array.","type":"boolean"},"format":{"type":"string"}}}]},"_types.aggregations:RareTermsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"exclude":{"$ref":"#/components/schemas/_types.aggregations:TermsExclude"},"field":{"$ref":"#/components/schemas/_types:Field"},"include":{"$ref":"#/components/schemas/_types.aggregations:TermsInclude"},"max_doc_count":{"description":"The maximum number of documents a term should appear in.","type":"number"},"missing":{"$ref":"#/components/schemas/_types.aggregations:Missing"},"precision":{"description":"The precision of the internal CuckooFilters.\\nSmaller precision leads to better approximation, but higher memory usage.","type":"number"},"value_type":{"type":"string"}}}]},"_types.aggregations:RateAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object","properties":{"unit":{"$ref":"#/components/schemas/_types.aggregations:CalendarInterval"},"mode":{"$ref":"#/components/schemas/_types.aggregations:RateMode"}}}]},"_types.aggregations:RateMode":{"type":"string","enum":["sum","value_count"]},"_types.aggregations:ReverseNestedAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"path":{"$ref":"#/components/schemas/_types:Field"}}}]},"_types.aggregations:SamplerAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"shard_size":{"description":"Limits how many top-scoring documents are collected in the sample processed on each shard.","type":"number"}}}]},"_types.aggregations:ScriptedMetricAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"combine_script":{"$ref":"#/components/schemas/_types:Script"},"init_script":{"$ref":"#/components/schemas/_types:Script"},"map_script":{"$ref":"#/components/schemas/_types:Script"},"params":{"description":"A global object with script parameters for `init`, `map` and `combine` scripts.\\nIt is shared between the scripts.","type":"object","additionalProperties":{"type":"object"}},"reduce_script":{"$ref":"#/components/schemas/_types:Script"}}}]},"_types.aggregations:SerialDifferencingAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object","properties":{"lag":{"description":"The historical bucket to subtract from the current value.\\nMust be a positive, non-zero integer.","type":"number"}}}]},"_types.aggregations:SignificantTermsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"background_filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"chi_square":{"$ref":"#/components/schemas/_types.aggregations:ChiSquareHeuristic"},"exclude":{"$ref":"#/components/schemas/_types.aggregations:TermsExclude"},"execution_hint":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregationExecutionHint"},"field":{"$ref":"#/components/schemas/_types:Field"},"gnd":{"$ref":"#/components/schemas/_types.aggregations:GoogleNormalizedDistanceHeuristic"},"include":{"$ref":"#/components/schemas/_types.aggregations:TermsInclude"},"jlh":{"$ref":"#/components/schemas/_types:EmptyObject"},"min_doc_count":{"description":"Only return terms that are found in more than `min_doc_count` hits.","type":"number"},"mutual_information":{"$ref":"#/components/schemas/_types.aggregations:MutualInformationHeuristic"},"percentage":{"$ref":"#/components/schemas/_types.aggregations:PercentageScoreHeuristic"},"script_heuristic":{"$ref":"#/components/schemas/_types.aggregations:ScriptedHeuristic"},"shard_min_doc_count":{"description":"Regulates the certainty a shard has if the term should actually be added to the candidate list or not with respect to the `min_doc_count`.\\nTerms will only be considered if their local shard frequency within the set is higher than the `shard_min_doc_count`.","type":"number"},"shard_size":{"description":"Can be used to control the volumes of candidate terms produced by each shard.\\nBy default, `shard_size` will be automatically estimated based on the number of shards and the `size` parameter.","type":"number"},"size":{"description":"The number of buckets returned out of the overall terms list.","type":"number"}}}]},"_types.aggregations:ChiSquareHeuristic":{"type":"object","properties":{"background_is_superset":{"description":"Set to `false` if you defined a custom background filter that represents a different set of documents that you want to compare to.","type":"boolean"},"include_negatives":{"description":"Set to `false` to filter out the terms that appear less often in the subset than in documents outside the subset.","type":"boolean"}},"required":["background_is_superset","include_negatives"]},"_types.aggregations:TermsAggregationExecutionHint":{"type":"string","enum":["map","global_ordinals","global_ordinals_hash","global_ordinals_low_cardinality"]},"_types.aggregations:GoogleNormalizedDistanceHeuristic":{"type":"object","properties":{"background_is_superset":{"description":"Set to `false` if you defined a custom background filter that represents a different set of documents that you want to compare to.","type":"boolean"}}},"_types.aggregations:MutualInformationHeuristic":{"type":"object","properties":{"background_is_superset":{"description":"Set to `false` if you defined a custom background filter that represents a different set of documents that you want to compare to.","type":"boolean"},"include_negatives":{"description":"Set to `false` to filter out the terms that appear less often in the subset than in documents outside the subset.","type":"boolean"}}},"_types.aggregations:PercentageScoreHeuristic":{"type":"object"},"_types.aggregations:ScriptedHeuristic":{"type":"object","properties":{"script":{"$ref":"#/components/schemas/_types:Script"}},"required":["script"]},"_types.aggregations:SignificantTextAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"background_filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"},"chi_square":{"$ref":"#/components/schemas/_types.aggregations:ChiSquareHeuristic"},"exclude":{"$ref":"#/components/schemas/_types.aggregations:TermsExclude"},"execution_hint":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregationExecutionHint"},"field":{"$ref":"#/components/schemas/_types:Field"},"filter_duplicate_text":{"description":"Whether to out duplicate text to deal with noisy data.","type":"boolean"},"gnd":{"$ref":"#/components/schemas/_types.aggregations:GoogleNormalizedDistanceHeuristic"},"include":{"$ref":"#/components/schemas/_types.aggregations:TermsInclude"},"jlh":{"$ref":"#/components/schemas/_types:EmptyObject"},"min_doc_count":{"description":"Only return values that are found in more than `min_doc_count` hits.","type":"number"},"mutual_information":{"$ref":"#/components/schemas/_types.aggregations:MutualInformationHeuristic"},"percentage":{"$ref":"#/components/schemas/_types.aggregations:PercentageScoreHeuristic"},"script_heuristic":{"$ref":"#/components/schemas/_types.aggregations:ScriptedHeuristic"},"shard_min_doc_count":{"description":"Regulates the certainty a shard has if the values should actually be added to the candidate list or not with respect to the min_doc_count.\\nValues will only be considered if their local shard frequency within the set is higher than the `shard_min_doc_count`.","type":"number"},"shard_size":{"description":"The number of candidate terms produced by each shard.\\nBy default, `shard_size` will be automatically estimated based on the number of shards and the `size` parameter.","type":"number"},"size":{"description":"The number of buckets returned out of the overall terms list.","type":"number"},"source_fields":{"$ref":"#/components/schemas/_types:Fields"}}}]},"_types.aggregations:StatsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object"}]},"_types.aggregations:StatsBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:StringStatsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"show_distribution":{"description":"Shows the probability distribution for all characters.","type":"boolean"}}}]},"_types.aggregations:SumAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormatMetricAggregationBase"},{"type":"object"}]},"_types.aggregations:SumBucketAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:PipelineAggregationBase"},{"type":"object"}]},"_types.aggregations:TermsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:BucketAggregationBase"},{"type":"object","properties":{"collect_mode":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregationCollectMode"},"exclude":{"$ref":"#/components/schemas/_types.aggregations:TermsExclude"},"execution_hint":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregationExecutionHint"},"field":{"$ref":"#/components/schemas/_types:Field"},"include":{"$ref":"#/components/schemas/_types.aggregations:TermsInclude"},"min_doc_count":{"description":"Only return values that are found in more than `min_doc_count` hits.","type":"number"},"missing":{"$ref":"#/components/schemas/_types.aggregations:Missing"},"missing_order":{"$ref":"#/components/schemas/_types.aggregations:MissingOrder"},"missing_bucket":{"type":"boolean"},"value_type":{"description":"Coerced unmapped fields into the specified type.","type":"string"},"order":{"$ref":"#/components/schemas/_types.aggregations:AggregateOrder"},"script":{"$ref":"#/components/schemas/_types:Script"},"shard_size":{"description":"The number of candidate terms produced by each shard.\\nBy default, `shard_size` will be automatically estimated based on the number of shards and the `size` parameter.","type":"number"},"show_term_doc_count_error":{"description":"Set to `true` to return the `doc_count_error_upper_bound`, which is an upper bound to the error on the `doc_count` returned by each shard.","type":"boolean"},"size":{"description":"The number of buckets returned out of the overall terms list.","type":"number"},"format":{"type":"string"}}}]},"_types.aggregations:TopHitsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"docvalue_fields":{"description":"Fields for which to return doc values.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:FieldAndFormat"}},"explain":{"description":"If `true`, returns detailed information about score computation as part of a hit.","type":"boolean"},"fields":{"description":"Array of wildcard (*) patterns. The request returns values for field names\\nmatching these patterns in the hits.fields property of the response.","type":"array","items":{"$ref":"#/components/schemas/_types.query_dsl:FieldAndFormat"}},"from":{"description":"Starting document offset.","type":"number"},"highlight":{"$ref":"#/components/schemas/_global.search._types:Highlight"},"script_fields":{"description":"Returns the result of one or more script evaluations for each hit.","type":"object","additionalProperties":{"$ref":"#/components/schemas/_types:ScriptField"}},"size":{"description":"The maximum number of top matching hits to return per bucket.","type":"number"},"sort":{"$ref":"#/components/schemas/_types:Sort"},"_source":{"$ref":"#/components/schemas/_global.search._types:SourceConfig"},"stored_fields":{"$ref":"#/components/schemas/_types:Fields"},"track_scores":{"description":"If `true`, calculates and returns document scores, even if the scores are not used for sorting.","type":"boolean"},"version":{"description":"If `true`, returns document version as part of a hit.","type":"boolean"},"seq_no_primary_term":{"description":"If `true`, returns sequence number and primary term of the last modification of each hit.","type":"boolean"}}}]},"_types.aggregations:TTestAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object","properties":{"a":{"$ref":"#/components/schemas/_types.aggregations:TestPopulation"},"b":{"$ref":"#/components/schemas/_types.aggregations:TestPopulation"},"type":{"$ref":"#/components/schemas/_types.aggregations:TTestType"}}}]},"_types.aggregations:TestPopulation":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"script":{"$ref":"#/components/schemas/_types:Script"},"filter":{"$ref":"#/components/schemas/_types.query_dsl:QueryContainer"}},"required":["field"]},"_types.aggregations:TTestType":{"type":"string","enum":["paired","homoscedastic","heteroscedastic"]},"_types.aggregations:TopMetricsAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"metrics":{"description":"The fields of the top document to return.","oneOf":[{"$ref":"#/components/schemas/_types.aggregations:TopMetricsValue"},{"type":"array","items":{"$ref":"#/components/schemas/_types.aggregations:TopMetricsValue"}}]},"size":{"description":"The number of top documents from which to return metrics.","type":"number"},"sort":{"$ref":"#/components/schemas/_types:Sort"}}}]},"_types.aggregations:TopMetricsValue":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"}},"required":["field"]},"_types.aggregations:ValueCountAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:FormattableMetricAggregation"},{"type":"object"}]},"_types.aggregations:FormattableMetricAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:MetricAggregationBase"},{"type":"object","properties":{"format":{"type":"string"}}}]},"_types.aggregations:WeightedAverageAggregation":{"allOf":[{"$ref":"#/components/schemas/_types.aggregations:Aggregation"},{"type":"object","properties":{"format":{"description":"A numeric response formatter.","type":"string"},"value":{"$ref":"#/components/schemas/_types.aggregations:WeightedAverageValue"},"value_type":{"$ref":"#/components/schemas/_types.aggregations:ValueType"},"weight":{"$ref":"#/components/schemas/_types.aggregations:WeightedAverageValue"}}}]},"_types.aggregations:WeightedAverageValue":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"missing":{"description":"A value or weight to use if the field is missing.","type":"number"},"script":{"$ref":"#/components/schemas/_types:Script"}}},"_types.aggregations:VariableWidthHistogramAggregation":{"type":"object","properties":{"field":{"$ref":"#/components/schemas/_types:Field"},"buckets":{"description":"The target number of buckets.","type":"number"},"shard_size":{"description":"The number of buckets that the coordinating node will request from each shard.\\nDefaults to `buckets * 50`.","type":"number"},"initial_buffer":{"description":"Specifies the number of individual documents that will be stored in memory on a shard before the initial bucketing algorithm is run.\\nDefaults to `min(10 * shard_size, 50000)`.","type":"number"},"script":{"$ref":"#/components/schemas/_types:Script"}}},"transform._types:PivotGroupByContainer":{"type":"object","properties":{"date_histogram":{"$ref":"#/components/schemas/_types.aggregations:DateHistogramAggregation"},"geotile_grid":{"$ref":"#/components/schemas/_types.aggregations:GeoTileGridAggregation"},"histogram":{"$ref":"#/components/schemas/_types.aggregations:HistogramAggregation"},"terms":{"$ref":"#/components/schemas/_types.aggregations:TermsAggregation"}},"minProperties":1,"maxProperties":1}}}}')},121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25).__importDefault(n(122));t.default=function(e){r.default((function(){e()}))}},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=function(e){r.useEffect(e,[])}},123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),s=n(124),a=r.__importDefault(n(126));t.default=function(e,t){a.default(e,t,s.isDeepEqual)}},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=n(25).__importDefault(n(125));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},125:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!=s--;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;0!=s--;){var o=a[s];if(!("_owner"===o&&t.$$typeof||e(t[o],n[o])))return!1}return!0}return t!=t&&n!=n}},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=function(e,t,n){var s=r.useRef(void 0);s.current&&n(t,s.current)||(s.current=t),r.useEffect(e,s.current)}},173:function(e,t,n){"use strict";n.r(t),n.d(t,"mountManagementSection",(function(){return Bi}));var r=n(32),s=n(72),a=n.n(s);const{TextHighlightRules:o}=a.a.acequire("ace/mode/text_highlight_rules"),i=a.a.acequire("ace/lib/oop"),l=function(){const e=this.createKeywordMapper({keyword:["describe|between|in|like|not|and|or|desc|select|from|where|having|group|by|orderasc|desc|pivot|for|in|as|show|columns|include|frozen|tables|escape|limit|rlike|all|distinct|is","avg|count|first|first_value|last|last_value|max|min|sum|kurtosis|mad|percentile|percentile_rank|skewness|stddev_pop|sum_of_squares|var_pop|histogram|case|coalesce|greatest|ifnull|iif|isnull|least|nullif|nvl|curdate|current_date|current_time|current_timestamp|curtime|dateadd|datediff|datepart|datetrunc|date_add|date_diff|date_part|date_trunc|day|dayname|dayofmonth|dayofweek|dayofyear|day_name|day_of_month|day_of_week|day_of_year|dom|dow|doy|hour|hour_of_day|idow|isodayofweek|isodow|isoweek|isoweekofyear|iso_day_of_week|iso_week_of_year|iw|iwoy|minute|minute_of_day|minute_of_hour|month|monthname|month_name|month_of_year|now|quarter|second|second_of_minute|timestampadd|timestampdiff|timestamp_add|timestamp_diff|today|week|week_of_year|year|abs|acos|asin|atan|atan2|cbrt|ceil|ceiling|cos|cosh|cot|degrees|e|exp|expm1|floor|log|log10|mod|pi|power|radians|rand|random|round|sign|signum|sin|sinh|sqrt|tan|truncate|ascii|bit_length|char|character_length|char_length|concat|insert|lcase|left|length|locate|ltrim|octet_length|position|repeat|replace|right|rtrim|space|substring|ucase|cast|convert|database|user|st_astext|st_aswkt|st_distance|st_geometrytype|st_geomfromtext|st_wkttosql|st_x|st_y|st_z|score","true|false","null|boolean|byte|short|integer|long|double|float|half_float|scaled_float|keyword|text|binary|date|ip|object|nested|time|interval_year|interval_month|interval_day|interval_hour|interval_minute|interval_second|interval_year_to_monthinteval_day_to_hour|interval_day_to_minute|interval_day_to_second|interval_hour_to_minute|interval_hour_to_secondinterval_minute_to_second|geo_point|geo_shape|shape"].join("|")},"identifier",!0);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"constant",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"entity.name.function",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"⇐|<⇒|\\*|\\.|\\:\\:|\\+|\\-|\\/|\\/\\/|%|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]},this.normalizeRules()};i.inherits(l,o);const c=a.a.acequire("ace/lib/oop"),{TextHighlightRules:u}=a.a.acequire("ace/mode/text_highlight_rules"),p="def|int|long|byte|String|float|double|char|null|if|else|while|do|for|continue|break|new|try|catch|throw|this|instanceof|return|ctx";function d(){this.name="ScriptHighlightRules",this.$rules={start:[{token:"script.comment",regex:"\\/\\/.*$"},{token:"script.string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"script.string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"script.constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"script.constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"script.constant.language.boolean",regex:"(?:true|false)\\b"},{token:"script.keyword",regex:p},{token:"script.text",regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"script.keyword.operator",regex:"\\?\\.|\\*\\.|=~|==~|!|%|&|\\*|\\-\\-|\\-|\\+\\+|\\+|~|===|==|=|!=|!==|<=|>=|<<=|>>=|>>>=|<>|<|>|->|!|&&|\\|\\||\\?\\:|\\*=|%=|\\+=|\\-=|&=|\\^=|\\b(?:in|instanceof|new|typeof|void)"},{token:"script.lparen",regex:"[[({]"},{token:"script.rparen",regex:"[\\])}]"},{token:"script.text",regex:"\\s+"}]}}c.inherits(d,u);var m=n(21);n(111);const{JsonHighlightRules:g}=a.a.acequire("ace/mode/json_highlight_rules"),f=a.a.acequire("ace/lib/oop"),h=function(e){const t={},n=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("(?:[^"]*_)?script"|"inline"|"source")(\\s*?)(:)(\\s*?)(""")',next:"script-start",merge:!1,push:!0},{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"punctuation.start_triple_quote",regex:'"""',next:"string_literal",merge:!1,push:!0},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",merge:!1,regex:"{",next:e=e||"json",push:!0},{token:"paren.lparen",merge:!1,regex:"[[(]"},{token:"paren.rparen",merge:!1,regex:"[\\])]"},{token:"paren.rparen",regex:"}",merge:!1,next:"pop"},{token:"punctuation.comma",regex:","},{token:"punctuation.colon",regex:":"},{token:"whitespace",regex:"\\s+"},{token:"text",regex:".+?"}];return t[e]=n,t[e+"-sql"]=[{token:["variable","whitespace","ace.punctuation.colon","whitespace","punctuation.start_triple_quote"],regex:'("query")(\\s*?)(:)(\\s*?)(""")',next:"sql-start",merge:!1,push:!0}].concat(n),t.string_literal=[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"},{token:"multi_string",regex:"."}],t};function y(){this.$rules={...h("start")},this.embedRules(d,"script-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}]),this.embedRules(l,"sql-",[{token:"punctuation.end_triple_quote",regex:'"""',next:"pop"}])}f.inherits(y,g);const b={id:"ace/mode/json_worker",src:'/*\n * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n * or more contributor license agreements. Licensed under the Elastic License\n * 2.0 and the Server Side Public License, v 1; you may not use this file except\n * in compliance with, at your election, the Elastic License 2.0 or the Server\n * Side Public License, v 1.\n */\n\n/* @notice\n *\n * This product includes code that is based on Ace editor, which was available\n * under a "BSD" license.\n *\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n/* eslint-disable prettier/prettier,no-var,eqeqeq,no-use-before-define,block-scoped-var,no-undef,\n    guard-for-in,one-var,strict,no-redeclare,no-sequences,no-proto,new-cap,no-nested-ternary,no-unused-vars,\n    prefer-const,no-empty,no-extend-native,camelcase */\n/*\n  This file is loaded up as a blob by Brace to hand to Ace to load as Jsonp\n  (hence the redefining of everything).  It is based on the json\n  mode from the brace distro.\n\n  It is very likely that this file will be removed in future but for now it enables\n  extended JSON parsing, like e.g. """{}""" (triple quotes)\n*/\n// @internal\n// @ts-nocheck\n"no use strict";\n! function(window) {\n  function resolveModuleId(id, paths) {\n    for (var testPath = id, tail = ""; testPath;) {\n      var alias = paths[testPath];\n      if ("string" == typeof alias) return alias + tail;\n      if (alias) return alias.location.replace(/\\/*$/, "/") + (tail || alias.main || alias.name);\n      if (alias === !1) return "";\n      var i = testPath.lastIndexOf("/");\n      if (-1 === i) break;\n      tail = testPath.substr(i) + tail, testPath = testPath.slice(0, i)\n    }\n    return id\n  }\n  if (!(void 0 !== window.window && window.document || window.acequire && window.define)) {\n    window.console || (window.console = function() {\n      var msgs = Array.prototype.slice.call(arguments, 0);\n      postMessage({\n        type: "log",\n        data: msgs\n      })\n    }, window.console.error = window.console.warn = window.console.log = window.console.trace = window.console), window.window = window, window.ace = window, window.onerror = function(message, file, line, col, err) {\n      postMessage({\n        type: "error",\n        data: {\n          message: message,\n          data: err.data,\n          file: file,\n          line: line,\n          col: col,\n          stack: err.stack\n        }\n      })\n    }, window.normalizeModule = function(parentId, moduleName) {\n      if (-1 !== moduleName.indexOf("!")) {\n        var chunks = moduleName.split("!");\n        return window.normalizeModule(parentId, chunks[0]) + "!" + window.normalizeModule(parentId, chunks[1])\n      }\n      if ("." == moduleName.charAt(0)) {\n        var base = parentId.split("/").slice(0, -1).join("/");\n        for (moduleName = (base ? base + "/" : "") + moduleName; - 1 !== moduleName.indexOf(".") && previous != moduleName;) {\n          var previous = moduleName;\n          moduleName = moduleName.replace(/^\\.\\//, "").replace(/\\/\\.\\//, "/").replace(/[^\\/]+\\/\\.\\.\\//, "")\n        }\n      }\n      return moduleName\n    }, window.acequire = function acequire(parentId, id) {\n      if (id || (id = parentId, parentId = null), !id.charAt) throw Error("worker.js acequire() accepts only (parentId, id) as arguments");\n      id = window.normalizeModule(parentId, id);\n      var module = window.acequire.modules[id];\n      if (module) return module.initialized || (module.initialized = !0, module.exports = module.factory().exports), module.exports;\n      if (!window.acequire.tlns) return console.log("unable to load " + id);\n      var path = resolveModuleId(id, window.acequire.tlns);\n      return ".js" != path.slice(-3) && (path += ".js"), window.acequire.id = id, window.acequire.modules[id] = {}, importScripts(path), window.acequire(parentId, id)\n    }, window.acequire.modules = {}, window.acequire.tlns = {}, window.define = function(id, deps, factory) {\n      if (2 == arguments.length ? (factory = deps, "string" != typeof id && (deps = id, id = window.acequire.id)) : 1 == arguments.length && (factory = id, deps = [], id = window.acequire.id), "function" != typeof factory) return window.acequire.modules[id] = {\n        exports: factory,\n        initialized: !0\n      }, void 0;\n      deps.length || (deps = ["require", "exports", "module"]);\n      var req = function(childId) {\n        return window.acequire(id, childId)\n      };\n      window.acequire.modules[id] = {\n        exports: {},\n        factory: function() {\n          var module = this,\n            returnExports = factory.apply(this, deps.map(function(dep) {\n              switch (dep) {\n                case "require":\n                  return req;\n                case "exports":\n                  return module.exports;\n                case "module":\n                  return module;\n                default:\n                  return req(dep)\n              }\n            }));\n          return returnExports && (module.exports = returnExports), module\n        }\n      }\n    }, window.define.amd = {}, acequire.tlns = {}, window.initBaseUrls = function(topLevelNamespaces) {\n      for (var i in topLevelNamespaces) acequire.tlns[i] = topLevelNamespaces[i]\n    }, window.initSender = function() {\n      var EventEmitter = window.acequire("ace/lib/event_emitter").EventEmitter,\n        oop = window.acequire("ace/lib/oop"),\n        Sender = function() {};\n      return function() {\n        oop.implement(this, EventEmitter), this.callback = function(data, callbackId) {\n          postMessage({\n            type: "call",\n            id: callbackId,\n            data: data\n          })\n        }, this.emit = function(name, data) {\n          postMessage({\n            type: "event",\n            name: name,\n            data: data\n          })\n        }\n      }.call(Sender.prototype), new Sender\n    };\n    var main = window.main = null,\n      sender = window.sender = null;\n    window.onmessage = function(e) {\n      var msg = e.data;\n      if (msg.event && sender) sender._signal(msg.event, msg.data);\n      else if (msg.command)\n        if (main[msg.command]) main[msg.command].apply(main, msg.args);\n        else {\n          if (!window[msg.command]) throw Error("Unknown command:" + msg.command);\n          window[msg.command].apply(window, msg.args)\n        }\n      else if (msg.init) {\n        window.initBaseUrls(msg.tlns), acequire("ace/lib/es5-shim"), sender = window.sender = window.initSender();\n        var clazz = acequire(msg.module)[msg.classname];\n        main = window.main = new clazz(sender)\n      }\n    }\n  }\n}(this), ace.define("ace/lib/oop", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor, ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    })\n  }, exports.mixin = function(obj, mixin) {\n    for (var key in mixin) obj[key] = mixin[key];\n    return obj\n  }, exports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin)\n  }\n}), ace.define("ace/range", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var comparePoints = function(p1, p2) {\n      return p1.row - p2.row || p1.column - p2.column\n    },\n    Range = function(startRow, startColumn, endRow, endColumn) {\n      this.start = {\n        row: startRow,\n        column: startColumn\n      }, this.end = {\n        row: endRow,\n        column: endColumn\n      }\n    };\n  (function() {\n    this.isEqual = function(range) {\n      return this.start.row === range.start.row && this.end.row === range.end.row && this.start.column === range.start.column && this.end.column === range.end.column\n    }, this.toString = function() {\n      return "Range: [" + this.start.row + "/" + this.start.column + "] -> [" + this.end.row + "/" + this.end.column + "]"\n    }, this.contains = function(row, column) {\n      return 0 == this.compare(row, column)\n    }, this.compareRange = function(range) {\n      var cmp, end = range.end,\n        start = range.start;\n      return cmp = this.compare(end.row, end.column), 1 == cmp ? (cmp = this.compare(start.row, start.column), 1 == cmp ? 2 : 0 == cmp ? 1 : 0) : -1 == cmp ? -2 : (cmp = this.compare(start.row, start.column), -1 == cmp ? -1 : 1 == cmp ? 42 : 0)\n    }, this.comparePoint = function(p) {\n      return this.compare(p.row, p.column)\n    }, this.containsRange = function(range) {\n      return 0 == this.comparePoint(range.start) && 0 == this.comparePoint(range.end)\n    }, this.intersects = function(range) {\n      var cmp = this.compareRange(range);\n      return -1 == cmp || 0 == cmp || 1 == cmp\n    }, this.isEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column\n    }, this.isStart = function(row, column) {\n      return this.start.row == row && this.start.column == column\n    }, this.setStart = function(row, column) {\n      "object" == typeof row ? (this.start.column = row.column, this.start.row = row.row) : (this.start.row = row, this.start.column = column)\n    }, this.setEnd = function(row, column) {\n      "object" == typeof row ? (this.end.column = row.column, this.end.row = row.row) : (this.end.row = row, this.end.column = column)\n    }, this.inside = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) || this.isStart(row, column) ? !1 : !0 : !1\n    }, this.insideStart = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isEnd(row, column) ? !1 : !0 : !1\n    }, this.insideEnd = function(row, column) {\n      return 0 == this.compare(row, column) ? this.isStart(row, column) ? !1 : !0 : !1\n    }, this.compare = function(row, column) {\n      return this.isMultiLine() || row !== this.start.row ? this.start.row > row ? -1 : row > this.end.row ? 1 : this.start.row === row ? column >= this.start.column ? 0 : -1 : this.end.row === row ? this.end.column >= column ? 0 : 1 : 0 : this.start.column > column ? -1 : column > this.end.column ? 1 : 0\n    }, this.compareStart = function(row, column) {\n      return this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.compareEnd = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.compare(row, column)\n    }, this.compareInside = function(row, column) {\n      return this.end.row == row && this.end.column == column ? 1 : this.start.row == row && this.start.column == column ? -1 : this.compare(row, column)\n    }, this.clipRows = function(firstRow, lastRow) {\n      if (this.end.row > lastRow) var end = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.end.row) var end = {\n        row: firstRow,\n        column: 0\n      };\n      if (this.start.row > lastRow) var start = {\n        row: lastRow + 1,\n        column: 0\n      };\n      else if (firstRow > this.start.row) var start = {\n        row: firstRow,\n        column: 0\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.extend = function(row, column) {\n      var cmp = this.compare(row, column);\n      if (0 == cmp) return this;\n      if (-1 == cmp) var start = {\n        row: row,\n        column: column\n      };\n      else var end = {\n        row: row,\n        column: column\n      };\n      return Range.fromPoints(start || this.start, end || this.end)\n    }, this.isEmpty = function() {\n      return this.start.row === this.end.row && this.start.column === this.end.column\n    }, this.isMultiLine = function() {\n      return this.start.row !== this.end.row\n    }, this.clone = function() {\n      return Range.fromPoints(this.start, this.end)\n    }, this.collapseRows = function() {\n      return 0 == this.end.column ? new Range(this.start.row, 0, Math.max(this.start.row, this.end.row - 1), 0) : new Range(this.start.row, 0, this.end.row, 0)\n    }, this.toScreenRange = function(session) {\n      var screenPosStart = session.documentToScreenPosition(this.start),\n        screenPosEnd = session.documentToScreenPosition(this.end);\n      return new Range(screenPosStart.row, screenPosStart.column, screenPosEnd.row, screenPosEnd.column)\n    }, this.moveBy = function(row, column) {\n      this.start.row += row, this.start.column += column, this.end.row += row, this.end.column += column\n    }\n  }).call(Range.prototype), Range.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column)\n  }, Range.comparePoints = comparePoints, Range.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column\n  }, exports.Range = Range\n}), ace.define("ace/apply_delta", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.applyDelta = function(docLines, delta) {\n    var row = delta.start.row,\n      startColumn = delta.start.column,\n      line = docLines[row] || "";\n    switch (delta.action) {\n      case "insert":\n        var lines = delta.lines;\n        if (1 === lines.length) docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n        else {\n          var args = [row, 1].concat(delta.lines);\n          docLines.splice.apply(docLines, args), docLines[row] = line.substring(0, startColumn) + docLines[row], docLines[row + delta.lines.length - 1] += line.substring(startColumn)\n        }\n        break;\n      case "remove":\n        var endColumn = delta.end.column,\n          endRow = delta.end.row;\n        row === endRow ? docLines[row] = line.substring(0, startColumn) + line.substring(endColumn) : docLines.splice(row, endRow - row + 1, line.substring(0, startColumn) + docLines[endRow].substring(endColumn))\n    }\n  }\n}), ace.define("ace/lib/event_emitter", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  var EventEmitter = {},\n    stopPropagation = function() {\n      this.propagationStopped = !0\n    },\n    preventDefault = function() {\n      this.defaultPrevented = !0\n    };\n  EventEmitter._emit = EventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {}), this._defaultHandlers || (this._defaultHandlers = {});\n    var listeners = this._eventRegistry[eventName] || [],\n      defaultHandler = this._defaultHandlers[eventName];\n    if (listeners.length || defaultHandler) {\n      "object" == typeof e && e || (e = {}), e.type || (e.type = eventName), e.stopPropagation || (e.stopPropagation = stopPropagation), e.preventDefault || (e.preventDefault = preventDefault), listeners = listeners.slice();\n      for (var i = 0; listeners.length > i && (listeners[i](e, this), !e.propagationStopped); i++);\n      return defaultHandler && !e.defaultPrevented ? defaultHandler(e, this) : void 0\n    }\n  }, EventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (listeners) {\n      listeners = listeners.slice();\n      for (var i = 0; listeners.length > i; i++) listeners[i](e, this)\n    }\n  }, EventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    callback && this.addEventListener(eventName, function newCallback() {\n      _self.removeEventListener(eventName, newCallback), callback.apply(null, arguments)\n    })\n  }, EventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers || (handlers = this._defaultHandlers = {\n        _disabled_: {}\n      }), handlers[eventName]) {\n      var old = handlers[eventName],\n        disabled = handlers._disabled_[eventName];\n      disabled || (handlers._disabled_[eventName] = disabled = []), disabled.push(old);\n      var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n    }\n    handlers[eventName] = callback\n  }, EventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (handlers) {\n      var disabled = handlers._disabled_[eventName];\n      if (handlers[eventName] == callback) handlers[eventName], disabled && this.setDefaultHandler(eventName, disabled.pop());\n      else if (disabled) {\n        var i = disabled.indexOf(callback); - 1 != i && disabled.splice(i, 1)\n      }\n    }\n  }, EventEmitter.on = EventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    return listeners || (listeners = this._eventRegistry[eventName] = []), -1 == listeners.indexOf(callback) && listeners[capturing ? "unshift" : "push"](callback), callback\n  }, EventEmitter.off = EventEmitter.removeListener = EventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n    var listeners = this._eventRegistry[eventName];\n    if (listeners) {\n      var index = listeners.indexOf(callback); - 1 !== index && listeners.splice(index, 1)\n    }\n  }, EventEmitter.removeAllListeners = function(eventName) {\n    this._eventRegistry && (this._eventRegistry[eventName] = [])\n  }, exports.EventEmitter = EventEmitter\n}), ace.define("ace/anchor", ["require", "exports", "module", "ace/lib/oop", "ace/lib/event_emitter"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Anchor = exports.Anchor = function(doc, row, column) {\n      this.$onChange = this.onChange.bind(this), this.attach(doc), column === void 0 ? this.setPosition(row.row, row.column) : this.setPosition(row, column)\n    };\n  (function() {\n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n      var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n      return point1.row < point2.row || point1.row == point2.row && bColIsAfter\n    }\n\n    function $getTransformedPoint(delta, point, moveIfEqual) {\n      var deltaIsInsert = "insert" == delta.action,\n        deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row - delta.start.row),\n        deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column),\n        deltaStart = delta.start,\n        deltaEnd = deltaIsInsert ? deltaStart : delta.end;\n      return $pointsInOrder(point, deltaStart, moveIfEqual) ? {\n        row: point.row,\n        column: point.column\n      } : $pointsInOrder(deltaEnd, point, !moveIfEqual) ? {\n        row: point.row + deltaRowShift,\n        column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n      } : {\n        row: deltaStart.row,\n        column: deltaStart.column\n      }\n    }\n    oop.implement(this, EventEmitter), this.getPosition = function() {\n      return this.$clipPositionToDocument(this.row, this.column)\n    }, this.getDocument = function() {\n      return this.document\n    }, this.$insertRight = !1, this.onChange = function(delta) {\n      if (!(delta.start.row == delta.end.row && delta.start.row != this.row || delta.start.row > this.row)) {\n        var point = $getTransformedPoint(delta, {\n          row: this.row,\n          column: this.column\n        }, this.$insertRight);\n        this.setPosition(point.row, point.column, !0)\n      }\n    }, this.setPosition = function(row, column, noClip) {\n      var pos;\n      if (pos = noClip ? {\n          row: row,\n          column: column\n        } : this.$clipPositionToDocument(row, column), this.row != pos.row || this.column != pos.column) {\n        var old = {\n          row: this.row,\n          column: this.column\n        };\n        this.row = pos.row, this.column = pos.column, this._signal("change", {\n          old: old,\n          value: pos\n        })\n      }\n    }, this.detach = function() {\n      this.document.removeEventListener("change", this.$onChange)\n    }, this.attach = function(doc) {\n      this.document = doc || this.document, this.document.on("change", this.$onChange)\n    }, this.$clipPositionToDocument = function(row, column) {\n      var pos = {};\n      return row >= this.document.getLength() ? (pos.row = Math.max(0, this.document.getLength() - 1), pos.column = this.document.getLine(pos.row).length) : 0 > row ? (pos.row = 0, pos.column = 0) : (pos.row = row, pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column))), 0 > column && (pos.column = 0), pos\n    }\n  }).call(Anchor.prototype)\n}), ace.define("ace/document", ["require", "exports", "module", "ace/lib/oop", "ace/apply_delta", "ace/lib/event_emitter", "ace/range", "ace/anchor"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("./lib/oop"),\n    applyDelta = acequire("./apply_delta").applyDelta,\n    EventEmitter = acequire("./lib/event_emitter").EventEmitter,\n    Range = acequire("./range").Range,\n    Anchor = acequire("./anchor").Anchor,\n    Document = function(textOrLines) {\n      this.$lines = [""], 0 === textOrLines.length ? this.$lines = [""] : Array.isArray(textOrLines) ? this.insertMergedLines({\n        row: 0,\n        column: 0\n      }, textOrLines) : this.insert({\n        row: 0,\n        column: 0\n      }, textOrLines)\n    };\n  (function() {\n    oop.implement(this, EventEmitter), this.setValue = function(text) {\n      var len = this.getLength() - 1;\n      this.remove(new Range(0, 0, len, this.getLine(len).length)), this.insert({\n        row: 0,\n        column: 0\n      }, text)\n    }, this.getValue = function() {\n      return this.getAllLines().join(this.getNewLineCharacter())\n    }, this.createAnchor = function(row, column) {\n      return new Anchor(this, row, column)\n    }, this.$split = 0 === "aaa".split(/a/).length ? function(text) {\n      return text.replace(/\\r\\n|\\r/g, "\\n").split("\\n")\n    } : function(text) {\n      return text.split(/\\r\\n|\\r|\\n/)\n    }, this.$detectNewLine = function(text) {\n      var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n      this.$autoNewLine = match ? match[1] : "\\n", this._signal("changeNewLineMode")\n    }, this.getNewLineCharacter = function() {\n      switch (this.$newLineMode) {\n        case "windows":\n          return "\\r\\n";\n        case "unix":\n          return "\\n";\n        default:\n          return this.$autoNewLine || "\\n"\n      }\n    }, this.$autoNewLine = "", this.$newLineMode = "auto", this.setNewLineMode = function(newLineMode) {\n      this.$newLineMode !== newLineMode && (this.$newLineMode = newLineMode, this._signal("changeNewLineMode"))\n    }, this.getNewLineMode = function() {\n      return this.$newLineMode\n    }, this.isNewLine = function(text) {\n      return "\\r\\n" == text || "\\r" == text || "\\n" == text\n    }, this.getLine = function(row) {\n      return this.$lines[row] || ""\n    }, this.getLines = function(firstRow, lastRow) {\n      return this.$lines.slice(firstRow, lastRow + 1)\n    }, this.getAllLines = function() {\n      return this.getLines(0, this.getLength())\n    }, this.getLength = function() {\n      return this.$lines.length\n    }, this.getTextRange = function(range) {\n      return this.getLinesForRange(range).join(this.getNewLineCharacter())\n    }, this.getLinesForRange = function(range) {\n      var lines;\n      if (range.start.row === range.end.row) lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n      else {\n        lines = this.getLines(range.start.row, range.end.row), lines[0] = (lines[0] || "").substring(range.start.column);\n        var l = lines.length - 1;\n        range.end.row - range.start.row == l && (lines[l] = lines[l].substring(0, range.end.column))\n      }\n      return lines\n    }, this.insertLines = function(row, lines) {\n      return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."), this.insertFullLines(row, lines)\n    }, this.removeLines = function(firstRow, lastRow) {\n      return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."), this.removeFullLines(firstRow, lastRow)\n    }, this.insertNewLine = function(position) {\n      return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."), this.insertMergedLines(position, ["", ""])\n    }, this.insert = function(position, text) {\n      return 1 >= this.getLength() && this.$detectNewLine(text), this.insertMergedLines(position, this.$split(text))\n    }, this.insertInLine = function(position, text) {\n      var start = this.clippedPos(position.row, position.column),\n        end = this.pos(position.row, position.column + text.length);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: [text]\n      }, !0), this.clonePos(end)\n    }, this.clippedPos = function(row, column) {\n      var length = this.getLength();\n      void 0 === row ? row = length : 0 > row ? row = 0 : row >= length && (row = length - 1, column = void 0);\n      var line = this.getLine(row);\n      return void 0 == column && (column = line.length), column = Math.min(Math.max(column, 0), line.length), {\n        row: row,\n        column: column\n      }\n    }, this.clonePos = function(pos) {\n      return {\n        row: pos.row,\n        column: pos.column\n      }\n    }, this.pos = function(row, column) {\n      return {\n        row: row,\n        column: column\n      }\n    }, this.$clipPosition = function(position) {\n      var length = this.getLength();\n      return position.row >= length ? (position.row = Math.max(0, length - 1), position.column = this.getLine(length - 1).length) : (position.row = Math.max(0, position.row), position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length)), position\n    }, this.insertFullLines = function(row, lines) {\n      row = Math.min(Math.max(row, 0), this.getLength());\n      var column = 0;\n      this.getLength() > row ? (lines = lines.concat([""]), column = 0) : (lines = [""].concat(lines), row--, column = this.$lines[row].length), this.insertMergedLines({\n        row: row,\n        column: column\n      }, lines)\n    }, this.insertMergedLines = function(position, lines) {\n      var start = this.clippedPos(position.row, position.column),\n        end = {\n          row: start.row + lines.length - 1,\n          column: (1 == lines.length ? start.column : 0) + lines[lines.length - 1].length\n        };\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "insert",\n        lines: lines\n      }), this.clonePos(end)\n    }, this.remove = function(range) {\n      var start = this.clippedPos(range.start.row, range.start.column),\n        end = this.clippedPos(range.end.row, range.end.column);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }), this.clonePos(start)\n    }, this.removeInLine = function(row, startColumn, endColumn) {\n      var start = this.clippedPos(row, startColumn),\n        end = this.clippedPos(row, endColumn);\n      return this.applyDelta({\n        start: start,\n        end: end,\n        action: "remove",\n        lines: this.getLinesForRange({\n          start: start,\n          end: end\n        })\n      }, !0), this.clonePos(start)\n    }, this.removeFullLines = function(firstRow, lastRow) {\n      firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1), lastRow = Math.min(Math.max(0, lastRow), this.getLength() - 1);\n      var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0,\n        deleteLastNewLine = this.getLength() - 1 > lastRow,\n        startRow = deleteFirstNewLine ? firstRow - 1 : firstRow,\n        startCol = deleteFirstNewLine ? this.getLine(startRow).length : 0,\n        endRow = deleteLastNewLine ? lastRow + 1 : lastRow,\n        endCol = deleteLastNewLine ? 0 : this.getLine(endRow).length,\n        range = new Range(startRow, startCol, endRow, endCol),\n        deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n      return this.applyDelta({\n        start: range.start,\n        end: range.end,\n        action: "remove",\n        lines: this.getLinesForRange(range)\n      }), deletedLines\n    }, this.removeNewLine = function(row) {\n      this.getLength() - 1 > row && row >= 0 && this.applyDelta({\n        start: this.pos(row, this.getLine(row).length),\n        end: this.pos(row + 1, 0),\n        action: "remove",\n        lines: ["", ""]\n      })\n    }, this.replace = function(range, text) {\n      if (range instanceof Range || (range = Range.fromPoints(range.start, range.end)), 0 === text.length && range.isEmpty()) return range.start;\n      if (text == this.getTextRange(range)) return range.end;\n      this.remove(range);\n      var end;\n      return end = text ? this.insert(range.start, text) : range.start\n    }, this.applyDeltas = function(deltas) {\n      for (var i = 0; deltas.length > i; i++) this.applyDelta(deltas[i])\n    }, this.revertDeltas = function(deltas) {\n      for (var i = deltas.length - 1; i >= 0; i--) this.revertDelta(deltas[i])\n    }, this.applyDelta = function(delta, doNotValidate) {\n      var isInsert = "insert" == delta.action;\n      (isInsert ? 1 >= delta.lines.length && !delta.lines[0] : !Range.comparePoints(delta.start, delta.end)) || (isInsert && delta.lines.length > 2e4 && this.$splitAndapplyLargeDelta(delta, 2e4), applyDelta(this.$lines, delta, doNotValidate), this._signal("change", delta))\n    }, this.$splitAndapplyLargeDelta = function(delta, MAX) {\n      for (var lines = delta.lines, l = lines.length, row = delta.start.row, column = delta.start.column, from = 0, to = 0;;) {\n        from = to, to += MAX - 1;\n        var chunk = lines.slice(from, to);\n        if (to > l) {\n          delta.lines = chunk, delta.start.row = row + from, delta.start.column = column;\n          break\n        }\n        chunk.push(""), this.applyDelta({\n          start: this.pos(row + from, column),\n          end: this.pos(row + to, column = 0),\n          action: delta.action,\n          lines: chunk\n        }, !0)\n      }\n    }, this.revertDelta = function(delta) {\n      this.applyDelta({\n        start: this.clonePos(delta.start),\n        end: this.clonePos(delta.end),\n        action: "insert" == delta.action ? "remove" : "insert",\n        lines: delta.lines.slice()\n      })\n    }, this.indexToPosition = function(index, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, i = startRow || 0, l = lines.length; l > i; i++)\n        if (index -= lines[i].length + newlineLength, 0 > index) return {\n          row: i,\n          column: index + lines[i].length + newlineLength\n        };\n      return {\n        row: l - 1,\n        column: lines[l - 1].length\n      }\n    }, this.positionToIndex = function(pos, startRow) {\n      for (var lines = this.$lines || this.getAllLines(), newlineLength = this.getNewLineCharacter().length, index = 0, row = Math.min(pos.row, lines.length), i = startRow || 0; row > i; ++i) index += lines[i].length + newlineLength;\n      return index + pos.column\n    }\n  }).call(Document.prototype), exports.Document = Document\n}), ace.define("ace/lib/lang", ["require", "exports", "module"], function(acequire, exports) {\n  "use strict";\n  exports.last = function(a) {\n    return a[a.length - 1]\n  }, exports.stringReverse = function(string) {\n    return string.split("").reverse().join("")\n  }, exports.stringRepeat = function(string, count) {\n    for (var result = ""; count > 0;) 1 & count && (result += string), (count >>= 1) && (string += string);\n    return result\n  };\n  var trimBeginRegexp = /^\\s\\s*/,\n    trimEndRegexp = /\\s\\s*$/;\n  exports.stringTrimLeft = function(string) {\n    return string.replace(trimBeginRegexp, "")\n  }, exports.stringTrimRight = function(string) {\n    return string.replace(trimEndRegexp, "")\n  }, exports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) copy[key] = obj[key];\n    return copy\n  }, exports.copyArray = function(array) {\n    for (var copy = [], i = 0, l = array.length; l > i; i++) copy[i] = array[i] && "object" == typeof array[i] ? this.copyObject(array[i]) : array[i];\n    return copy\n  }, exports.deepCopy = function deepCopy(obj) {\n    if ("object" != typeof obj || !obj) return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n      copy = [];\n      for (var key = 0; obj.length > key; key++) copy[key] = deepCopy(obj[key]);\n      return copy\n    }\n    if ("[object Object]" !== Object.prototype.toString.call(obj)) return obj;\n    copy = {};\n    for (var key in obj) copy[key] = deepCopy(obj[key]);\n    return copy\n  }, exports.arrayToMap = function(arr) {\n    for (var map = {}, i = 0; arr.length > i; i++) map[arr[i]] = 1;\n    return map\n  }, exports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) map[i] = props[i];\n    return map\n  }, exports.arrayRemove = function(array, value) {\n    for (var i = 0; array.length >= i; i++) value === array[i] && array.splice(i, 1)\n  }, exports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, "\\\\$1")\n  }, exports.escapeHTML = function(str) {\n    return str.replace(/&/g, "&#38;").replace(/"/g, "&#34;").replace(/\'/g, "&#39;").replace(/</g, "&#60;")\n  }, exports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n    return string.replace(regExp, function(str) {\n      matches.push({\n        offset: arguments[arguments.length - 2],\n        length: str.length\n      })\n    }), matches\n  }, exports.deferredCall = function(fcn) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      deferred = function(timeout) {\n        return deferred.cancel(), timer = setTimeout(callback, timeout || 0), deferred\n      };\n    return deferred.schedule = deferred, deferred.call = function() {\n      return this.cancel(), fcn(), deferred\n    }, deferred.cancel = function() {\n      return clearTimeout(timer), timer = null, deferred\n    }, deferred.isPending = function() {\n      return timer\n    }, deferred\n  }, exports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null,\n      callback = function() {\n        timer = null, fcn()\n      },\n      _self = function(timeout) {\n        null == timer && (timer = setTimeout(callback, timeout || defaultTimeout))\n      };\n    return _self.delay = function(timeout) {\n      timer && clearTimeout(timer), timer = setTimeout(callback, timeout || defaultTimeout)\n    }, _self.schedule = _self, _self.call = function() {\n      this.cancel(), fcn()\n    }, _self.cancel = function() {\n      timer && clearTimeout(timer), timer = null\n    }, _self.isPending = function() {\n      return timer\n    }, _self\n  }\n}), ace.define("ace/worker/mirror", ["require", "exports", "module", "ace/range", "ace/document", "ace/lib/lang"], function(acequire, exports) {\n  "use strict";\n  acequire("../range").Range;\n  var Document = acequire("../document").Document,\n    lang = acequire("../lib/lang"),\n    Mirror = exports.Mirror = function(sender) {\n      this.sender = sender;\n      var doc = this.doc = new Document(""),\n        deferredUpdate = this.deferredUpdate = lang.delayedCall(this.onUpdate.bind(this)),\n        _self = this;\n      sender.on("change", function(e) {\n        var data = e.data;\n        if (data[0].start) doc.applyDeltas(data);\n        else\n          for (var i = 0; data.length > i; i += 2) {\n            if (Array.isArray(data[i + 1])) var d = {\n              action: "insert",\n              start: data[i],\n              lines: data[i + 1]\n            };\n            else var d = {\n              action: "remove",\n              start: data[i],\n              end: data[i + 1]\n            };\n            doc.applyDelta(d, !0)\n          }\n        return _self.$timeout ? deferredUpdate.schedule(_self.$timeout) : (_self.onUpdate(), void 0)\n      })\n    };\n  (function() {\n    this.$timeout = 500, this.setTimeout = function(timeout) {\n      this.$timeout = timeout\n    }, this.setValue = function(value) {\n      this.doc.setValue(value), this.deferredUpdate.schedule(this.$timeout)\n    }, this.getValue = function(callbackId) {\n      this.sender.callback(this.doc.getValue(), callbackId)\n    }, this.onUpdate = function() {}, this.isPending = function() {\n      return this.deferredUpdate.isPending()\n    }\n  }).call(Mirror.prototype)\n}), ace.define("ace/mode/json/json_parse", ["require", "exports", "module"], function() {\n  "use strict";\n  var at, ch, text, value, escapee = {\n      \'"\': \'"\',\n      "\\\\": "\\\\",\n      "/": "/",\n      b: "\\b",\n      f: "\\f",\n      n: "\\n",\n      r: "\\r",\n      t: "\t"\n    },\n    error = function(m) {\n      throw {\n        name: "SyntaxError",\n        message: m,\n        at: at,\n        text: text\n      }\n    },\n    reset = function (newAt) {\n      ch = text.charAt(newAt);\n      at = newAt + 1;\n    },\n    next = function(c) {\n      return c && c !== ch && error("Expected \'" + c + "\' instead of \'" + ch + "\'"), ch = text.charAt(at), at += 1, ch\n    },\n    nextUpTo = function (upTo, errorMessage) {\n      let currentAt = at,\n        i = text.indexOf(upTo, currentAt);\n      if (i < 0) {\n        error(errorMessage || \'Expected \\\'\' + upTo + \'\\\'\');\n      }\n      reset(i + upTo.length);\n      return text.substring(currentAt, i);\n    },\n    peek = function (c) {\n      return text.substr(at, c.length) === c; // nocommit - double check\n    },\n    number = function() {\n      var number, string = "";\n      for ("-" === ch && (string = "-", next("-")); ch >= "0" && "9" >= ch;) string += ch, next();\n      if ("." === ch)\n        for (string += "."; next() && ch >= "0" && "9" >= ch;) string += ch;\n      if ("e" === ch || "E" === ch)\n        for (string += ch, next(), ("-" === ch || "+" === ch) && (string += ch, next()); ch >= "0" && "9" >= ch;) string += ch, next();\n      return number = +string, isNaN(number) ? (error("Bad number"), void 0) : number\n    },\n    string = function() {\n      var hex, i, uffff, string = "";\n      if (\'"\' === ch) {\n        if (peek(\'""\')) {\n          // literal\n          next(\'"\');\n          next(\'"\');\n          return nextUpTo(\'"""\', \'failed to find closing \\\'"""\\\'\');\n        } else {\n          for (; next();) {\n            if (\'"\' === ch) return next(), string;\n            if ("\\\\" === ch)\n              if (next(), "u" === ch) {\n                for (uffff = 0, i = 0; 4 > i && (hex = parseInt(next(), 16), isFinite(hex)); i += 1) uffff = 16 * uffff + hex;\n                string += String.fromCharCode(uffff)\n              } else {\n                if ("string" != typeof escapee[ch]) break;\n                string += escapee[ch]\n              }\n            else string += ch\n          }\n        }\n      }\n      error("Bad string")\n    },\n    white = function() {\n      for (; ch && " " >= ch;) next()\n    },\n    word = function() {\n      switch (ch) {\n        case "t":\n          return next("t"), next("r"), next("u"), next("e"), !0;\n        case "f":\n          return next("f"), next("a"), next("l"), next("s"), next("e"), !1;\n        case "n":\n          return next("n"), next("u"), next("l"), next("l"), null\n      }\n      error("Unexpected \'" + ch + "\'")\n    },\n    array = function() {\n      var array = [];\n      if ("[" === ch) {\n        if (next("["), white(), "]" === ch) return next("]"), array;\n        for (; ch;) {\n          if (array.push(value()), white(), "]" === ch) return next("]"), array;\n          next(","), white()\n        }\n      }\n      error("Bad array")\n    },\n    object = function() {\n      var key, object = {};\n      if ("{" === ch) {\n        if (next("{"), white(), "}" === ch) return next("}"), object;\n        for (; ch;) {\n          if (key = string(), white(), next(":"), Object.hasOwnProperty.call(object, key) && error(\'Duplicate key "\' + key + \'"\'), object[key] = value(), white(), "}" === ch) return next("}"), object;\n          next(","), white()\n        }\n      }\n      error("Bad object")\n    };\n  return value = function() {\n      switch (white(), ch) {\n        case "{":\n          return object();\n        case "[":\n          return array();\n        case \'"\':\n          return string();\n        case "-":\n          return number();\n        default:\n          return ch >= "0" && "9" >= ch ? number() : word()\n      }\n    },\n    function(source, reviver) {\n      var result;\n      return text = source, at = 0, ch = " ", result = value(), white(), ch && error("Syntax error"), "function" == typeof reviver ? function walk(holder, key) {\n        var k, v, value = holder[key];\n        if (value && "object" == typeof value)\n          for (k in value) Object.hasOwnProperty.call(value, k) && (v = walk(value, k), void 0 !== v ? value[k] = v : delete value[k]);\n        return reviver.call(holder, key, value)\n      }({\n        "": result\n      }, "") : result\n    }\n}), ace.define("ace/mode/json_worker", ["require", "exports", "module", "ace/lib/oop", "ace/worker/mirror", "ace/mode/json/json_parse"], function(acequire, exports) {\n  "use strict";\n  var oop = acequire("../lib/oop"),\n    Mirror = acequire("../worker/mirror").Mirror,\n    parse = acequire("./json/json_parse"),\n    JsonWorker = exports.JsonWorker = function(sender) {\n      Mirror.call(this, sender), this.setTimeout(200)\n    };\n  oop.inherits(JsonWorker, Mirror),\n    function() {\n      this.onUpdate = function() {\n        var value = this.doc.getValue(),\n          errors = [];\n        try {\n          value && parse(value)\n        } catch (e) {\n          var pos = this.doc.indexToPosition(e.at - 1);\n          errors.push({\n            row: pos.row,\n            column: pos.column,\n            text: e.message,\n            type: "error"\n          })\n        }\n        this.sender.emit("annotate", errors)\n      }\n    }.call(JsonWorker.prototype)\n}), ace.define("ace/lib/es5-shim", ["require", "exports", "module"], function() {\n  function Empty() {}\n\n  function doesDefinePropertyWork(object) {\n    try {\n      return Object.defineProperty(object, "sentinel", {}), "sentinel" in object\n    } catch (exception) {}\n  }\n\n  function toInteger(n) {\n    return n = +n, n !== n ? n = 0 : 0 !== n && n !== 1 / 0 && n !== -(1 / 0) && (n = (n > 0 || -1) * Math.floor(Math.abs(n))), n\n  }\n  Function.prototype.bind || (Function.prototype.bind = function(that) {\n    var target = this;\n    if ("function" != typeof target) throw new TypeError("Function.prototype.bind called on incompatible " + target);\n    var args = slice.call(arguments, 1),\n      bound = function() {\n        if (this instanceof bound) {\n          var result = target.apply(this, args.concat(slice.call(arguments)));\n          return Object(result) === result ? result : this\n        }\n        return target.apply(that, args.concat(slice.call(arguments)))\n      };\n    return target.prototype && (Empty.prototype = target.prototype, bound.prototype = new Empty, Empty.prototype = null), bound\n  });\n  var defineGetter, defineSetter, lookupGetter, lookupSetter, supportsAccessors, call = Function.prototype.call,\n    prototypeOfArray = Array.prototype,\n    prototypeOfObject = Object.prototype,\n    slice = prototypeOfArray.slice,\n    _toString = call.bind(prototypeOfObject.toString),\n    owns = call.bind(prototypeOfObject.hasOwnProperty);\n  if ((supportsAccessors = owns(prototypeOfObject, "__defineGetter__")) && (defineGetter = call.bind(prototypeOfObject.__defineGetter__), defineSetter = call.bind(prototypeOfObject.__defineSetter__), lookupGetter = call.bind(prototypeOfObject.__lookupGetter__), lookupSetter = call.bind(prototypeOfObject.__lookupSetter__)), 2 != [1, 2].splice(0).length)\n    if (function() {\n        function makeArray(l) {\n          var a = Array(l + 2);\n          return a[0] = a[1] = 0, a\n        }\n        var lengthBefore, array = [];\n        return array.splice.apply(array, makeArray(20)), array.splice.apply(array, makeArray(26)), lengthBefore = array.length, array.splice(5, 0, "XXX"), lengthBefore + 1 == array.length, lengthBefore + 1 == array.length ? !0 : void 0\n      }()) {\n      var array_splice = Array.prototype.splice;\n      Array.prototype.splice = function(start, deleteCount) {\n        return arguments.length ? array_splice.apply(this, [void 0 === start ? 0 : start, void 0 === deleteCount ? this.length - start : deleteCount].concat(slice.call(arguments, 2))) : []\n      }\n    } else Array.prototype.splice = function(pos, removeCount) {\n      var length = this.length;\n      pos > 0 ? pos > length && (pos = length) : void 0 == pos ? pos = 0 : 0 > pos && (pos = Math.max(length + pos, 0)), length > pos + removeCount || (removeCount = length - pos);\n      var removed = this.slice(pos, pos + removeCount),\n        insert = slice.call(arguments, 2),\n        add = insert.length;\n      if (pos === length) add && this.push.apply(this, insert);\n      else {\n        var remove = Math.min(removeCount, length - pos),\n          tailOldPos = pos + remove,\n          tailNewPos = tailOldPos + add - remove,\n          tailCount = length - tailOldPos,\n          lengthAfterRemove = length - remove;\n        if (tailOldPos > tailNewPos)\n          for (var i = 0; tailCount > i; ++i) this[tailNewPos + i] = this[tailOldPos + i];\n        else if (tailNewPos > tailOldPos)\n          for (i = tailCount; i--;) this[tailNewPos + i] = this[tailOldPos + i];\n        if (add && pos === lengthAfterRemove) this.length = lengthAfterRemove, this.push.apply(this, insert);\n        else\n          for (this.length = lengthAfterRemove + add, i = 0; add > i; ++i) this[pos + i] = insert[i]\n      }\n      return removed\n    };\n  Array.isArray || (Array.isArray = function(obj) {\n    return "[object Array]" == _toString(obj)\n  });\n  var boxedString = Object("a"),\n    splitString = "a" != boxedString[0] || !(0 in boxedString);\n  if (Array.prototype.forEach || (Array.prototype.forEach = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        thisp = arguments[1],\n        i = -1,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError;\n      for (; length > ++i;) i in self && fun.call(thisp, self[i], i, object)\n    }), Array.prototype.map || (Array.prototype.map = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = Array(length),\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (result[i] = fun.call(thisp, self[i], i, object));\n      return result\n    }), Array.prototype.filter || (Array.prototype.filter = function(fun) {\n      var value, object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        result = [],\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++) i in self && (value = self[i], fun.call(thisp, value, i, object) && result.push(value));\n      return result\n    }), Array.prototype.every || (Array.prototype.every = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && !fun.call(thisp, self[i], i, object)) return !1;\n      return !0\n    }), Array.prototype.some || (Array.prototype.some = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0,\n        thisp = arguments[1];\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      for (var i = 0; length > i; i++)\n        if (i in self && fun.call(thisp, self[i], i, object)) return !0;\n      return !1\n    }), Array.prototype.reduce || (Array.prototype.reduce = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduce of empty array with no initial value");\n      var result, i = 0;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i++];\n            break\n          }\n          if (++i >= length) throw new TypeError("reduce of empty array with no initial value")\n        }\n      for (; length > i; i++) i in self && (result = fun.call(void 0, result, self[i], i, object));\n      return result\n    }), Array.prototype.reduceRight || (Array.prototype.reduceRight = function(fun) {\n      var object = toObject(this),\n        self = splitString && "[object String]" == _toString(this) ? this.split("") : object,\n        length = self.length >>> 0;\n      if ("[object Function]" != _toString(fun)) throw new TypeError(fun + " is not a function");\n      if (!length && 1 == arguments.length) throw new TypeError("reduceRight of empty array with no initial value");\n      var result, i = length - 1;\n      if (arguments.length >= 2) result = arguments[1];\n      else\n        for (;;) {\n          if (i in self) {\n            result = self[i--];\n            break\n          }\n          if (0 > --i) throw new TypeError("reduceRight of empty array with no initial value")\n        }\n      do i in this && (result = fun.call(void 0, result, self[i], i, object)); while (i--);\n      return result\n    }), Array.prototype.indexOf && -1 == [0, 1].indexOf(1, 2) || (Array.prototype.indexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = 0;\n      for (arguments.length > 1 && (i = toInteger(arguments[1])), i = i >= 0 ? i : Math.max(0, length + i); length > i; i++)\n        if (i in self && self[i] === sought) return i;\n      return -1\n    }), Array.prototype.lastIndexOf && -1 == [0, 1].lastIndexOf(0, -3) || (Array.prototype.lastIndexOf = function(sought) {\n      var self = splitString && "[object String]" == _toString(this) ? this.split("") : toObject(this),\n        length = self.length >>> 0;\n      if (!length) return -1;\n      var i = length - 1;\n      for (arguments.length > 1 && (i = Math.min(i, toInteger(arguments[1]))), i = i >= 0 ? i : length - Math.abs(i); i >= 0; i--)\n        if (i in self && sought === self[i]) return i;\n      return -1\n    }), Object.getPrototypeOf || (Object.getPrototypeOf = function(object) {\n      return object.__proto__ || (object.constructor ? object.constructor.prototype : prototypeOfObject)\n    }), !Object.getOwnPropertyDescriptor) {\n    var ERR_NON_OBJECT = "Object.getOwnPropertyDescriptor called on a non-object: ";\n    Object.getOwnPropertyDescriptor = function(object, property) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT + object);\n      if (owns(object, property)) {\n        var descriptor, getter, setter;\n        if (descriptor = {\n            enumerable: !0,\n            configurable: !0\n          }, supportsAccessors) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject;\n          var getter = lookupGetter(object, property),\n            setter = lookupSetter(object, property);\n          if (object.__proto__ = prototype, getter || setter) return getter && (descriptor.get = getter), setter && (descriptor.set = setter), descriptor\n        }\n        return descriptor.value = object[property], descriptor\n      }\n    }\n  }\n  if (Object.getOwnPropertyNames || (Object.getOwnPropertyNames = function(object) {\n      return Object.keys(object)\n    }), !Object.create) {\n    var createEmpty;\n    createEmpty = null === Object.prototype.__proto__ ? function() {\n      return {\n        __proto__: null\n      }\n    } : function() {\n      var empty = {};\n      for (var i in empty) empty[i] = null;\n      return empty.constructor = empty.hasOwnProperty = empty.propertyIsEnumerable = empty.isPrototypeOf = empty.toLocaleString = empty.toString = empty.valueOf = empty.__proto__ = null, empty\n    }, Object.create = function(prototype, properties) {\n      var object;\n      if (null === prototype) object = createEmpty();\n      else {\n        if ("object" != typeof prototype) throw new TypeError("typeof prototype[" + typeof prototype + "] != \'object\'");\n        var Type = function() {};\n        Type.prototype = prototype, object = new Type, object.__proto__ = prototype\n      }\n      return void 0 !== properties && Object.defineProperties(object, properties), object\n    }\n  }\n  if (Object.defineProperty) {\n    var definePropertyWorksOnObject = doesDefinePropertyWork({}),\n      definePropertyWorksOnDom = "undefined" == typeof document || doesDefinePropertyWork(document.createElement("div"));\n    if (!definePropertyWorksOnObject || !definePropertyWorksOnDom) var definePropertyFallback = Object.defineProperty\n  }\n  if (!Object.defineProperty || definePropertyFallback) {\n    var ERR_NON_OBJECT_DESCRIPTOR = "Property description must be an object: ",\n      ERR_NON_OBJECT_TARGET = "Object.defineProperty called on non-object: ",\n      ERR_ACCESSORS_NOT_SUPPORTED = "getters & setters can not be defined on this javascript engine";\n    Object.defineProperty = function(object, property, descriptor) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError(ERR_NON_OBJECT_TARGET + object);\n      if ("object" != typeof descriptor && "function" != typeof descriptor || null === descriptor) throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR + descriptor);\n      if (definePropertyFallback) try {\n        return definePropertyFallback.call(Object, object, property, descriptor)\n      } catch (exception) {}\n      if (owns(descriptor, "value"))\n        if (supportsAccessors && (lookupGetter(object, property) || lookupSetter(object, property))) {\n          var prototype = object.__proto__;\n          object.__proto__ = prototypeOfObject, delete object[property], object[property] = descriptor.value, object.__proto__ = prototype\n        } else object[property] = descriptor.value;\n      else {\n        if (!supportsAccessors) throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);\n        owns(descriptor, "get") && defineGetter(object, property, descriptor.get), owns(descriptor, "set") && defineSetter(object, property, descriptor.set)\n      }\n      return object\n    }\n  }\n  Object.defineProperties || (Object.defineProperties = function(object, properties) {\n    for (var property in properties) owns(properties, property) && Object.defineProperty(object, property, properties[property]);\n    return object\n  }), Object.seal || (Object.seal = function(object) {\n    return object\n  }), Object.freeze || (Object.freeze = function(object) {\n    return object\n  });\n  try {\n    Object.freeze(function() {})\n  } catch (exception) {\n    Object.freeze = function(freezeObject) {\n      return function(object) {\n        return "function" == typeof object ? object : freezeObject(object)\n      }\n    }(Object.freeze)\n  }\n  if (Object.preventExtensions || (Object.preventExtensions = function(object) {\n      return object\n    }), Object.isSealed || (Object.isSealed = function() {\n      return !1\n    }), Object.isFrozen || (Object.isFrozen = function() {\n      return !1\n    }), Object.isExtensible || (Object.isExtensible = function(object) {\n      if (Object(object) === object) throw new TypeError;\n      for (var name = ""; owns(object, name);) name += "?";\n      object[name] = !0;\n      var returnValue = owns(object, name);\n      return delete object[name], returnValue\n    }), !Object.keys) {\n    var hasDontEnumBug = !0,\n      dontEnums = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],\n      dontEnumsLength = dontEnums.length;\n    for (var key in {\n        toString: null\n      }) hasDontEnumBug = !1;\n    Object.keys = function(object) {\n      if ("object" != typeof object && "function" != typeof object || null === object) throw new TypeError("Object.keys called on a non-object");\n      var keys = [];\n      for (var name in object) owns(object, name) && keys.push(name);\n      if (hasDontEnumBug)\n        for (var i = 0, ii = dontEnumsLength; ii > i; i++) {\n          var dontEnum = dontEnums[i];\n          owns(object, dontEnum) && keys.push(dontEnum)\n        }\n      return keys\n    }\n  }\n  Date.now || (Date.now = function() {\n    return (new Date).getTime()\n  });\n  var ws = "\t\\n\v\\f\\r   ᠎             　\\u2028\\u2029\ufeff";\n  if (!String.prototype.trim || ws.trim()) {\n    ws = "[" + ws + "]";\n    var trimBeginRegexp = RegExp("^" + ws + ws + "*"),\n      trimEndRegexp = RegExp(ws + ws + "*$");\n    String.prototype.trim = function() {\n      return (this + "").replace(trimBeginRegexp, "").replace(trimEndRegexp, "")\n    }\n  }\n  var toObject = function(o) {\n    if (null == o) throw new TypeError("can\'t convert " + o + " to object");\n    return Object(o)\n  }\n});\n'},{WorkerClient:j}=a.a.acequire("ace/worker/worker_client"),_=a.a.acequire("ace/lib/oop"),{Mode:x}=a.a.acequire("ace/mode/json"),{Tokenizer:v}=a.a.acequire("ace/tokenizer"),{MatchingBraceOutdent:O}=a.a.acequire("ace/mode/matching_brace_outdent"),{CstyleBehaviour:w}=a.a.acequire("ace/mode/behaviour/cstyle"),{FoldMode:E}=a.a.acequire("ace/mode/folding/cstyle"),S=function(){const e=new y;e.normalizeRules(),this.$tokenizer=new v(e.getRules()),this.$outdent=new O,this.$behaviour=new w,this.foldingRules=new E};_.inherits(S,x),S.prototype.createWorker=function(e){const t=new j(["ace"],b,"JsonWorker");return t.attachToDocument(e.getDocument()),t.on("annotate",(function(t){e.setAnnotations(t.data)})),t.on("terminate",(function(){e.clearAnnotations()})),t};var T=n(33),k=n(29);const{expandLiteralStrings:A,collapseLiteralStrings:M}=k.XJson;var C=n(1),F=n.n(C),R=n(0);const I=new class text_TextService{constructor(){F()(this,"breadcrumbs",{})}init(){this.breadcrumbs={home:R.i18n.translate("xpack.transform.home.breadcrumbTitle",{defaultMessage:"Transforms"}),cloneTransform:R.i18n.translate("xpack.transform.cloneTransform.breadcrumbTitle",{defaultMessage:"Clone transform"}),createTransform:R.i18n.translate("xpack.transform.createTransform.breadcrumbTitle",{defaultMessage:"Create transform"})}}getSizeNotationHelpText(){return R.i18n.translate("xpack.transform.transformForm.sizeNotationPlaceholder",{defaultMessage:"Examples: {example1}, {example2}, {example3}, {example4}",values:{example1:"1g",example2:"10mb",example3:"5k",example4:"1024B"}})}};let D=function(e){return e.HOME="home",e.CLONE_TRANSFORM="cloneTransform",e.CREATE_TRANSFORM="createTransform",e}({});const q=new class breadcrumb_BreadcrumbService{constructor(){F()(this,"breadcrumbs",{home:[],cloneTransform:[],createTransform:[]}),F()(this,"setBreadcrumbsHandler",void 0)}setup(e){this.setBreadcrumbsHandler=e,this.breadcrumbs.home=[{text:I.breadcrumbs.home,href:"/"}],this.breadcrumbs.cloneTransform=[...this.breadcrumbs.home,{text:I.breadcrumbs.cloneTransform}],this.breadcrumbs.createTransform=[...this.breadcrumbs.home,{text:I.breadcrumbs.createTransform}]}setBreadcrumbs(e){if(!this.setBreadcrumbsHandler)throw new Error("BreadcrumbService#setup() must be called first!");const t=this.breadcrumbs[e]?[...this.breadcrumbs[e]]:[...this.breadcrumbs.home],n=t.pop();t.push({...n,href:void 0}),this.setBreadcrumbsHandler(t)}},$=new class doc_title_DocTitleService{constructor(){F()(this,"changeDocTitle",(()=>{}))}init(e){this.changeDocTitle=e}setTitle(e){e&&"home"!==e?I.breadcrumbs[e]&&this.changeDocTitle(`${I.breadcrumbs[e]} - ${I.breadcrumbs.home}`):this.changeDocTitle(`${I.breadcrumbs.home}`)}};var L=n(3),P=n.n(L),N=n(30),B=n(20),z=n(24),V=n(40),G=n(17);const Q=({children:e,...t})=>Object(G.jsx)(z.Router,t,Object(G.jsx)(V.CompatRouter,null,e));var U=n(73),H=n.n(U);const W={services:{}},J=Object(L.createContext)(W);var K=n(123),Y=n.n(K);const X=({children:e,component:t,render:n,...r})=>{const s=Object(L.useMemo)((()=>{if(t)return e=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Z,null),Object(G.jsx)(t,e))}),[t]);if(s)return Object(G.jsx)(z.Route,H()({},r,{component:s}));if(n||"function"==typeof e){const t="function"==typeof e?e:n;return Object(G.jsx)(z.Route,H()({},r,{render:e=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Z,null),t(e))}))}return Object(G.jsx)(z.Route,r,Object(G.jsx)(Z,null),e)},Z=()=>{const{executionContext:e}=Object(L.useContext)(J).services,t=Object(z.useRouteMatch)();return function(e,t){Y()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},ee=({legacySwitch:e=!0,children:t})=>{const n=Object(z.useRouteMatch)();return e?Object(G.jsx)(z.Switch,null,t):Object(G.jsx)(V.Routes,null,L.Children.map(t,(e=>{if(P.a.isValidElement(e)&&e.type===X){var r;const s=Object(m.replace)(null==e?void 0:e.props.path,n.url+"/",""),a="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(G.jsx)(V.Route,{path:s,element:Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Z,null),(null==e||null===(r=e.props)||void 0===r?void 0:r.component)&&Object(G.jsx)(e.props.component,null)||a&&a()||t)})}return e})))};var te=n(34),ne=n(109);let re=function(e){return e.HOME="transform_management",e.CLONE_TRANSFORM="clone_transform",e.CREATE_TRANSFORM="create_transform",e}({});var se=n(94),ae=n(19),oe=n(18),ie=n(54),le=n(64),ce=n(77);const ue=({title:e,message:t})=>Object(G.jsx)(oe.EuiEmptyPrompt,{iconType:"securityApp",title:Object(G.jsx)("h2",null,e),body:Object(G.jsx)("p",null,t)}),pe=()=>Object(G.jsx)(oe.EuiFlexGroup,{justifyContent:"spaceAround"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiPageTemplate.EmptyPrompt,{color:"danger"},Object(G.jsx)(ue,{title:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.app.missingCapabilitiesTitle",defaultMessage:"Missing permission"}),message:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.app.missingCapabilitiesDescription",defaultMessage:"You're missing permissions to use this section of Transforms."})})))),de=({children:e,requiredCapabilities:t})=>{const n=Object(ie.t)();var r;return(r=t,Array.isArray(r)?r:[r]).every((e=>n[e]))?Object(G.jsx)(P.a.Fragment,null,e):Object(G.jsx)(pe,null)},me=Object(L.createContext)(void 0),ge=()=>{const e=Object(L.useContext)(me);if(void 0===e)throw new Error("datePickerContext was used outside of its Provider");return e},fe=e=>{const{children:t,...n}=e;return Object(G.jsx)(me.Provider,{value:n},t)};var he=n(171);const ye=P.a.createContext({value:null,setValue(){throw new Error("MlStorageContext set method is not implemented")},removeValue(){throw new Error("MlStorageContext remove method is not implemented")}});function be({children:e,storage:t,storageKeys:n}){const r=Object(L.useMemo)((()=>n.reduce(((e,n)=>(e[n]=t.get(n),e)),{})),[t,n]),[s,a]=Object(L.useState)(r),o=Object(L.useCallback)(((e,n)=>{t.set(e,n),a((t=>({...t,[e]:n})))}),[t]),i=Object(L.useCallback)((e=>{t.remove(e),a((t=>Object(m.omit)(t,e)))}),[t]);Object(L.useEffect)((function(){const e=e=>{(function(e,t){return t.includes(e)})(e.key,n)&&(Object(he.a)(e.newValue)?a((t=>({...t,[e.key]:"string"==typeof e.newValue?JSON.parse(e.newValue):e.newValue}))):a((t=>Object(m.omit)(t,e.key))))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[n]);const l=Object(L.useMemo)((()=>({value:s,setValue:o,removeValue:i})),[s,o,i]);return Object(G.jsx)(ye.Provider,{value:l},e)}function je(e,t,n){const r=t.split(".");let s=e;for(let e=0;e<r.length;e++){var a;const t=r[e];if(s=null===(a=s)||void 0===a?void 0:a[t],Array.isArray(s)){s=s.map((t=>"object"==typeof t?je(t,r.slice(e+1,r.length).join(".")):t));break}}return void 0===s?n:s}var _e=n(49),xe=n(22),ve=n(170);const Oe=new Set(["_a","_g"]);function we(e){return Oe.has(e)}function Ee(e){const t={},n=Object(se.parse)(e,{sort:!1});try{Object.keys(n).forEach((e=>{we(e)?t[e]=Object(_e.decode)(n[e]):t[e]=n[e]}))}catch(e){console.error("Could not read url state",e)}return t}const Se=Object(L.createContext)({searchString:"",setUrlState:()=>{}}),{Provider:Te}=Se,ke=({children:e})=>{const t=Object(z.useHistory)(),{search:n}=Object(z.useLocation)(),r=Object(L.useRef)(n);Object(L.useEffect)((()=>{r.current=n}),[n]);const s=Object(L.useCallback)(((e,n,s,a)=>{const o=r.current,i=Ee(o),l=Object(se.parse)(o,{sort:!1});if(Object.prototype.hasOwnProperty.call(i,e)||(i[e]={}),"string"==typeof n){if(Object(m.isEqual)(je(i,`${e}.${n}`),s))return o;i[e][n]=s}else{const t=n;Object.keys(t).forEach((n=>{i[e][n]=t[n]}))}try{const e=Object(se.stringify)(l,{sort:!1,encode:!1});if(Object.keys(i).forEach((e=>{we(e)?l[e]=Object(_e.encode)(i[e]):l[e]=i[e]})),e!==Object(se.stringify)(l,{sort:!1,encode:!1})){const e=Object(se.stringify)(l,{sort:!1});r.current=e,a?t.replace({search:e}):t.push({search:e})}}catch(e){console.error("Could not save url state",e)}}),[]);return Object(G.jsx)(Te,{value:{searchString:n,setUrlState:s}},e)},Ae=e=>{const{searchString:t,setUrlState:n}=Object(L.useContext)(Se);return[Object(L.useMemo)((()=>{const n=Ee(t);if("object"==typeof n)return n[e]}),[t]),Object(L.useCallback)(((t,r,s)=>{n(e,t,r,s)}),[e,n])]};var Me=n(36);const Ce=Object(L.createContext)({showNodeInfo:!0}),Fe=e=>{const{children:t,enabledFeatures:n}=e;return Object(G.jsx)(Ce.Provider,{value:n},t)},Re=Object(L.createContext)({ruleFormV2Enabled:!1}),Ie=e=>{const{children:t,experimentalFeatures:n}=e;return Object(G.jsx)(Re.Provider,{value:n},t)};function De(){const e=Object(L.useContext)(Ce);return Object(L.useMemo)((()=>e),[e])}var qe=n(31);function $e(e){return null===Object(qe.composeValidators)(Object(qe.patternValidator)(/^[^\s]/),Object(qe.patternValidator)(/[^\s]$/),Object(qe.patternValidator)(/^[^\[\]>]+$/))(e)}const Le=e=>`POST _transform/_preview\n${JSON.stringify(e,null,2)}\n`;var Pe=n(75);let Ne=function(e){return e.DESCRIPTION="config.description",e.ID="id",e}({});function Be(e){return void 0!==e.stats}function ze(e){return e.some((e=>!Be(e)))}var Ve=n(4);function Ge(e){var t,n,r,s;if(Qe(e))return 100;const a=null==e||null===(t=e.stats)||void 0===t||null===(n=t.checkpointing)||void 0===n||null===(r=n.next)||void 0===r||null===(s=r.checkpoint_progress)||void 0===s?void 0:s.percent_complete;return void 0!==a?Math.round(a):void 0}function Qe(e){var t;return e.stats&&e.config&&1===(null===(t=e.stats.checkpointing)||void 0===t?void 0:t.last.checkpoint)&&void 0===e.config.sync&&e.stats.state===Ve.t.STOPPED}let Ue=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),He=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class kbn_field_type_KbnFieldType{constructor(e={}){F()(this,"name",void 0),F()(this,"sortable",void 0),F()(this,"filterable",void 0),F()(this,"esTypes",void 0),this.name=e.name||He.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}new kbn_field_type_KbnFieldType({name:He.UNKNOWN});new kbn_field_type_KbnFieldType({name:He.STRING,sortable:!0,filterable:!0,esTypes:[Ue.STRING,Ue.TEXT,Ue.MATCH_ONLY_TEXT,Ue.KEYWORD,Ue.VERSION,Ue._TYPE,Ue._ID]}),new kbn_field_type_KbnFieldType({name:He.NUMBER,sortable:!0,filterable:!0,esTypes:[Ue.FLOAT,Ue.HALF_FLOAT,Ue.SCALED_FLOAT,Ue.DOUBLE,Ue.INTEGER,Ue.LONG,Ue.UNSIGNED_LONG,Ue.SHORT,Ue.BYTE,Ue.TOKEN_COUNT,Ue.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:He.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[Ue.FLOAT_RANGE,Ue.DOUBLE_RANGE,Ue.INTEGER_RANGE,Ue.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:He.DATE,sortable:!0,filterable:!0,esTypes:[Ue.DATE,Ue.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:He.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[Ue.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:He.IP,sortable:!0,filterable:!0,esTypes:[Ue.IP]}),new kbn_field_type_KbnFieldType({name:He.IP_RANGE,sortable:!0,filterable:!0,esTypes:[Ue.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:He.BOOLEAN,sortable:!0,filterable:!0,esTypes:[Ue.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:He.OBJECT,esTypes:[Ue.OBJECT]}),new kbn_field_type_KbnFieldType({name:He.NESTED,esTypes:[Ue.NESTED]}),new kbn_field_type_KbnFieldType({name:He.GEO_POINT,esTypes:[Ue.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:He.GEO_SHAPE,esTypes:[Ue.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:He.ATTACHMENT,esTypes:[Ue.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:He.MURMUR3,esTypes:[Ue.MURMUR3]}),new kbn_field_type_KbnFieldType({name:He._SOURCE,esTypes:[Ue._SOURCE]}),new kbn_field_type_KbnFieldType({name:He.HISTOGRAM,filterable:!0,esTypes:[Ue.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:He.CONFLICT});let We=function(e){return e.HISTOGRAM="histogram",e.COUNTER="counter",e.GAUGE="gauge",e.SUMMARY="summary",e}({});const Je=e=>(null==e?void 0:e.timeSeriesMetric)===We.COUNTER,Ke={AVG:"avg",CARDINALITY:"cardinality",MAX:"max",MIN:"min",PERCENTILES:"percentiles",SUM:"sum",VALUE_COUNT:"value_count",FILTER:"filter",TOP_METRICS:"top_metrics",TERMS:"terms"},Ye=({aggConfig:e,onChange:t,isValid:n})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.agg.popoverForm.sizeLabel",{defaultMessage:"Size"}),error:!n&&[R.i18n.translate("xpack.transform.groupBy.popoverForm.invalidSizeErrorMessage",{defaultMessage:"Enter a valid positive number"})],isInvalid:!n},Object(G.jsx)(oe.EuiFieldNumber,{value:e.size,onChange:e=>{t({size:Number(e.target.value)})}})));function Xe(e){const t=En(e)?e.field:null;return{...e,isSubAggsSupported:!1,isMultiField:!1,AggFormComponent:Ye,field:t,aggConfig:{size:dn},setUiConfigFromEs(e){const{field:t,size:n}=e;this.field=t,this.aggConfig.size=n},getEsAggConfig(){return this.isValid()?{field:this.field,size:this.aggConfig.size}:null},isValid(){return"number"==typeof this.aggConfig.size&&this.aggConfig.size>0}}}const Ze=({aggConfig:e,onChange:t,isValid:n})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.agg.popoverForm.percentsLabel",{defaultMessage:"Percents"}),error:!n&&[R.i18n.translate("xpack.transform.groupBy.popoverForm.intervalPercents",{defaultMessage:"Enter a comma-separated list of percentiles"})],isInvalid:!n},Object(G.jsx)(oe.EuiFieldText,{value:e.percents,onChange:e=>{t({percents:e.target.value})}})));function et(e){if(void 0!==e){const t=e.split(","),n=[];for(const e of t)if(e.trim().length>0&&!1===isNaN(e)){const t=Number(e);if(!(t>=0&&t<=100))return[];n.push(t)}return n}return[]}function tt(e){const t=En(e)?e.field:null;return{...e,isSubAggsSupported:!1,isMultiField:!1,AggFormComponent:Ze,field:t,aggConfig:{percents:pn.toString()},setUiConfigFromEs(e){const{field:t,percents:n}=e;this.field=t,this.aggConfig.percents=n.join(",")},getEsAggConfig(){return this.isValid()?{field:this.field,percents:et(this.aggConfig.percents)}:null},isValid(){return"string"==typeof this.aggConfig.percents&&(e=this.aggConfig.percents,/^[0-9]+(,[0-9]+)*$/.test(e));var e}}}const nt=R.i18n.translate("xpack.transform.transformSettingValidations.retentionPolicyMaxAgeInvalidMessage",{defaultMessage:"Invalid max age format. Minimum of 60s required."}),rt=R.i18n.translate("xpack.transform.transformList.editFlyoutFormRequiredErrorMessage",{defaultMessage:"Required field."}),st=R.i18n.translate("xpack.transform.transformList.editFlyoutFormStringNotValidErrorMessage",{defaultMessage:"Value needs to be of type string."}),at=R.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyNotValidErrorMessage",{defaultMessage:"The frequency value is not valid."}),ot=["nanos","micros","ms","s","m","h","d"];function it(e){if("string"!=typeof e||null===e)return[st];const t=e.match(/[a-z]+|[^a-z]+/gi);if(null===t||Array.isArray(t)&&2!==t.length)return[at];const n=+t[0],r=t[1];return isNaN(n)||!Number.isInteger(n)||0===n?[at]:ot.includes(r)?{number:n,timeUnit:r}:[at]}function lt(e){if(!Object(ve.a)(e,["number","timeUnit"]))return!1;const{number:t,timeUnit:n}=e;return"number"==typeof t&&"string"==typeof n&&("s"===n&&t<=3600||"m"===n&&t<=60||"h"===n&&1===t)}function ct(e){if(void 0!==(null==e?void 0:e.min)&&void 0!==e.max&&e.min>e.max)throw new Error("Invalid validator conditions");return Object(m.memoize)((t=>{const n={};return void 0!==(null==e?void 0:e.min)&&t<e.min&&(n.min=!0),void 0!==(null==e?void 0:e.max)&&t>e.max&&(n.max=!0),null!=e&&e.integerOnly&&!Number.isInteger(t)&&(n.integerOnly=!0),Object(ve.a)(n)?n:null}))}const ut=R.i18n.translate("xpack.transform.transformSettingValidations.numberGreaterThanOrEqualToNegativeOneNotValidErrorMessage",{defaultMessage:"Number of retries needs to be between 0 and 100, or -1 for infinite retries."}),pt=ct({min:-1,max:100,integerOnly:!0}),dt=R.i18n.translate("xpack.transform.transformList.editFlyoutFormNumberAboveZeroNotValidErrorMessage",{defaultMessage:"Value needs to be an integer above zero."}),mt=ct({min:1,integerOnly:!0});function gt(e){if("string"!=typeof e)return!1;try{return!!JSON.parse(e)}catch(e){return!1}}function ft(e){const t=it(e);if(!Object(ve.a)(t,["number","timeUnit"]))return!1;const{number:n,timeUnit:r}=t;return"number"==typeof n&&"string"==typeof r&&("nanos"===r&&n>=6e10||"micros"===r&&n>=6e7||"ms"===r&&n>=6e4||"s"===r&&n>=60||("m"===r||"h"===r||"d"===r)&&n>=1)}const ht=R.i18n.translate("xpack.transform.transformSettingsValidations.numberOfRetriesInvalidErrorMessage",{defaultMessage:"Number of retries needs to be between 0 and 100, or -1 for infinite retries."}),yt=ct({min:-1,max:100,integerOnly:!0}),bt=R.i18n.translate("xpack.transform.transformSettingValidations.maxPageSearchSizeInvalidMessage",{defaultMessage:"Maximum page search size needs to be an integer between 10 and 65536."}),jt=ct({min:10,max:65536,integerOnly:!0}),_t=e=>null===jt(+e)?[]:[bt],xt={CUSTOM:"custom",PHRASES:"phrases",PHRASE:"phrase",EXISTS:"exists",MATCH_ALL:"match_all",MISSING:"missing",QUERY_STRING:"query_string",RANGE:"range",GEO_BOUNDING_BOX:"geo_bounding_box",GEO_POLYGON:"geo_polygon",SPATIAL_FILTER:"spatial_filter",TERM:"term",TERMS:"terms",BOOL:"bool"},vt={[He.ATTACHMENT]:[],[He.BOOLEAN]:[],[He.DATE]:[xt.RANGE],[He.GEO_POINT]:[xt.GEO_BOUNDING_BOX,xt.GEO_POLYGON],[He.GEO_SHAPE]:[xt.GEO_BOUNDING_BOX,xt.GEO_POLYGON],[He.IP]:[xt.RANGE],[He.MURMUR3]:[],[He.NUMBER]:[xt.RANGE],[He.STRING]:[xt.TERM],[He._SOURCE]:[],[He.UNKNOWN]:[],[He.CONFLICT]:[]},Ot=[xt.BOOL,xt.EXISTS];var wt=n(26);const Et=({config:e,onChange:t,isValid:n})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(wt.CodeEditor,{height:300,languageId:"json",onChange:e=>{t({config:e})},options:{automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:e||""}),!1===n?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiCallOut,{color:"danger",iconType:"warning",size:"s"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.filterEditorForm.jsonInvalidErrorMessage",defaultMessage:"JSON is invalid."}))):null);var St=n(83),Tt=n.n(St);function kt(e){return Object(ve.a)(e)&&Object.values(e).every((e=>function(e){return(Object(ve.a)(e,["type"])&&1===Object.keys(e).length||Object(ve.a)(e,["type","script"])&&("string"==typeof e.script||Object(ve.a)(e.script,["source"])&&"string"==typeof e.script.source||Object(ve.a)(e.script,["id"])&&"string"==typeof e.script.id))&&Me.RUNTIME_FIELD_TYPES.includes(e.type)}(e)))}const At=".keyword",Mt=e=>e.replace(new RegExp(`${At}$`),"");var Ct=n(53);function Ft(e){return Object.keys(e).map((t=>e[t]))}var Rt={name:"18ji2p4",styles:"width:300px"},It={name:"nm8ipk",styles:"width:100%;height:200px"};const Dt=({defaultData:e,otherAggNames:t,onChange:n,options:r})=>{const[s,a]=Object(L.useState)(Object(m.cloneDeep)(e)),[o,i]=Object(L.useState)(e.aggName),[l,c]=Object(L.useState)(e.agg),[u,p]=Object(L.useState)(En(e)?e.field:""),d=!En(e);Object(L.useEffect)((()=>{if(l===s.agg)return;const e=un(l,{parentAgg:s.parentAgg,subAggs:s.subAggs,agg:l,aggName:o,dropDownName:o,field:u});a(e)}),[l,s]),Tt()((()=>{if(Sn(s)){const e=s.getAggName?s.getAggName():void 0;void 0!==e&&i(e)}}),[s]);const g=[],f=[];if(!d){const t=Ft(r);t.filter((t=>t.agg===e.agg)).forEach((e=>{g.push({text:e.field})})),t.filter((t=>En(e)&&(Array.isArray(e.field)?e.field.includes(t.field):t.field===e.field))).forEach((e=>{f.push({text:e.agg})}))}let h="",y=$e(o);y||(h=R.i18n.translate("xpack.transform.agg.popoverForm.aggNameInvalidCharError",{defaultMessage:'Invalid name. The characters "[", "]", and ">" are not allowed and the name must not start or end with a space character.'})),y&&(y=!t.includes(o),h=R.i18n.translate("xpack.transform.agg.popoverForm.aggNameAlreadyUsedError",{defaultMessage:"Another aggregation already uses that name."}));let b=y;return Sn(s)&&(b=y&&s.isValid()),Object(G.jsx)(oe.EuiForm,{css:Rt,"data-test-subj":"transformAggPopoverForm_"+o},Object(G.jsx)(oe.EuiFormRow,{error:!y&&[h],isInvalid:!y,helpText:d?R.i18n.translate("xpack.transform.agg.popoverForm.unsupportedAggregationHelpText",{defaultMessage:"Only the aggregation name can be edited in this form. Please use the advanced editor to edit the other parts of the aggregation."}):"",label:R.i18n.translate("xpack.transform.agg.popoverForm.nameLabel",{defaultMessage:"Aggregation name"})},Object(G.jsx)(oe.EuiFieldText,{value:o,isInvalid:!y,onChange:e=>i(e.target.value),"data-test-subj":"transformAggName"})),g.length>0?s.isMultiField?Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.agg.popoverForm.fieldsLabel",{defaultMessage:"Fields"})},Object(G.jsx)(oe.EuiComboBox,{fullWidth:!0,options:g.map((e=>({value:e.text,label:e.text}))),selectedOptions:u?("string"==typeof u?[u]:u).map((e=>({value:e,label:e}))):[],onChange:e=>{const t=e.map((e=>e.value));p(t)},isClearable:!1,"data-test-subj":"transformAggFields"})):Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.agg.popoverForm.fieldLabel",{defaultMessage:"Field"})},Object(G.jsx)(oe.EuiSelect,{options:g,value:u,onChange:e=>p(e.target.value),"data-test-subj":"transformAggField"})):null,f.length>0&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.agg.popoverForm.aggLabel",{defaultMessage:"Aggregation"})},Object(G.jsx)(oe.EuiSelect,{options:f,value:l,onChange:e=>{return t=e.target.value,void c(t);var t},"data-test-subj":"transformAggType"})),Sn(s)?Object(G.jsx)(s.AggFormComponent,{aggConfig:s.aggConfig,selectedField:u,onChange:e=>{a({...s,aggConfig:e})},isValid:s.isValid()}):null,d&&Object(G.jsx)(oe.EuiCodeBlock,{"aria-label":R.i18n.translate("xpack.transform.agg.popoverForm.codeBlock",{defaultMessage:"JSON of transform aggregation"}),fontSize:"s",language:"json",paddingSize:"s",css:It},JSON.stringify(Tn(e),null,2)),Object(G.jsx)(oe.EuiFormRow,{hasEmptyLabelSpace:!0},Object(G.jsx)(oe.EuiButton,{isDisabled:!b,onClick:()=>n(function(){let t=u;return En(s)&&!s.isMultiField&&Array.isArray(u)&&(t=u[0]),{...s,agg:l,aggName:o,dropDownName:e.dropDownName,...d?{}:{field:t}}}()),"data-test-subj":"transformApplyAggChanges"},R.i18n.translate("xpack.transform.agg.popoverForm.submitButtonLabel",{defaultMessage:"Apply"}))))},qt=({renderOption:e,changeHandler:t,options:n,placeholder:r="Search ...",testSubj:s,isDisabled:a})=>Object(G.jsx)(oe.EuiComboBox,{fullWidth:!0,placeholder:r,singleSelection:{asPlainText:!0},options:n,selectedOptions:[],onChange:t,isClearable:!1,"data-test-subj":s,isDisabled:a,renderOption:e}),$t=({item:e})=>{const{state:t,actions:n}=Object(L.useContext)(Yt),r=Object(L.useCallback)((t=>{n.addSubAggregation(e,t)}),[n,e]),s=Object(L.useCallback)(((e,t)=>{n.updateSubAggregation(e,t)}),[n]),a=Object(L.useCallback)((t=>{n.deleteSubAggregation(e,t)}),[n,e]),o=Object(L.useMemo)((()=>{let t=1,n=e.parentAgg;for(;void 0!==n;)t++,n=n.parentAgg;return t<=On}),[e]),i=Object(G.jsx)(qt,{changeHandler:r,options:t.aggOptions,placeholder:R.i18n.translate("xpack.transform.stepDefineForm.addSubAggregationPlaceholder",{defaultMessage:"Add a sub-aggregation ..."}),testSubj:"transformSubAggregationSelection",isDisabled:!o});return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),e.subAggs&&Object(G.jsx)(Pt,{onChange:s,deleteHandler:a,list:e.subAggs,options:t.aggOptionsData}),o?i:Object(G.jsx)(oe.EuiToolTip,{anchorClassName:"eui-displayBlock",content:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.maxSubAggsLevelsLimitMessage",defaultMessage:"You have reached the maximum number of levels of sub-aggregations that can be added in the form. Please edit the JSON config if you want to add another level."})},i))},Lt=({deleteHandler:e,item:t,otherAggNames:n,onChange:r,options:s})=>{const[a,o]=Object(L.useState)(Sn(t)&&!t.isValid()),i=Sn(t)&&t.helperText&&t.helperText(),l=En(t)&&t.isSubAggsSupported&&(!Sn(t)||t.isValid());return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(G.jsx)(oe.EuiFlexItem,{className:"transform__AggregationLabel--text"},Object(G.jsx)("span",{className:"eui-textTruncate","data-test-subj":"transformAggregationEntryLabel"},t.aggName)),i&&Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiTextColor,{color:"subdued",className:"eui-textTruncate","data-test-subj":"transformAggHelperText",style:{lineHeight:"20px"}},i)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(G.jsx)(oe.EuiPopover,{id:"transformFormPopover",ownFocus:!0,button:Object(G.jsx)(oe.EuiButtonIcon,{"aria-label":R.i18n.translate("xpack.transform.aggLabelForm.editAggAriaLabel",{defaultMessage:"Edit aggregation"}),size:"s",iconType:"pencil",onClick:()=>o(!a),"data-test-subj":`transformAggregationEntryEditButton_${t.aggName}`}),isOpen:a,closePopover:()=>o(!1)},Object(G.jsx)(Dt,{defaultData:t,onChange:function(e){r({...e}),o(!1)},otherAggNames:n,options:s}))),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(G.jsx)(oe.EuiButtonIcon,{"aria-label":R.i18n.translate("xpack.transform.aggLabelForm.deleteItemAriaLabel",{defaultMessage:"Delete item"}),size:"s",iconType:"cross",onClick:()=>e(t.aggName),"data-test-subj":"transformAggregationEntryDeleteButton"}))),l&&Object(G.jsx)($t,{item:t}))},Pt=({deleteHandler:e,list:t,onChange:n,options:r})=>{const s=Object.keys(t);return Object(G.jsx)(P.a.Fragment,null,s.map(((a,o)=>{const i=s.filter((e=>e!==a));return Object(G.jsx)(L.Fragment,{key:a},Object(G.jsx)(oe.EuiPanel,{paddingSize:"s","data-test-subj":`transformAggregationEntry_${o}`},Object(G.jsx)(Lt,{deleteHandler:e,item:t[a],onChange:e=>n(a,e),otherAggNames:i,options:r})),s.length>0&&Object(G.jsx)(oe.EuiSpacer,{size:"s"}))})))},Nt=({list:e})=>{const t=Object.keys(e);return Object(G.jsx)(oe.EuiForm,null,t.map((e=>Object(G.jsx)(L.Fragment,{key:e},Object(G.jsx)(oe.EuiPanel,{paddingSize:"s"},Object(G.jsx)("div",{className:"eui-textTruncate"},e)),t.length>0&&Object(G.jsx)(oe.EuiSpacer,{size:"s"})))))};var Bt=n(27),zt=n.n(Bt);const Vt=new Set([...zt.a.tz.names().filter((e=>!["America/Nuuk","EST","HST","ROC","MST"].includes(e)))]),Gt=e=>Object(he.a)(e)&&"string"==typeof e&&Vt.has(e);function Qt(e,t){if(""!==e&&void 0!==e){if(t===kn.HISTOGRAM)return!!Mn.test(e)&&(0!==parseFloat(e)||0!==parseInt(e,10));if(t===kn.DATE_HISTOGRAM){if(!Cn.test(e))return!1;const t=e.match(Cn);if(null!==t&&Array.isArray(t)&&2===t.length){const n=t[1],r=parseInt(e.replace(n,""),10);if(("w"===n||"M"===n||"y"===n)&&r>1)return!1}return!0}}return!1}const Ut=({defaultData:e,otherAggNames:t,onChange:n,options:r})=>{const{esAggsCompositeMissingBucket:s}=Object(le.a)(),a=!Dn(e),[o,i]=Object(L.useState)(e.agg),[l,c]=Object(L.useState)(e.aggName),[u,p]=Object(L.useState)(Dn(e)?e.field:""),[d,m]=Object(L.useState)(function(e){return Fn(e)?e.calendar_interval:Rn(e)?e.interval:void 0}(e)),g=Object(L.useMemo)((()=>[...Vt].map((e=>({value:e,label:e})))),[]),[f,h]=Object(L.useState)(Fn(e)&&Gt(e.time_zone)?[g.find((t=>t.value===e.time_zone))]:[]),y=Object(L.useMemo)((()=>{var e;return null===(e=f[0])||void 0===e?void 0:e.value}),[f]),[b,j]=Object(L.useState)(Dn(e)&&e.missing_bucket),_=Object(L.useMemo)((()=>Object(oe.htmlIdGenerator)()()),[]),x=[],v=[];if(!a){const t=Ft(r);t.filter((t=>t.agg===e.agg)).forEach((e=>{x.push({text:e.field})})),t.filter((t=>Dn(e)&&t.field===e.field)).forEach((e=>{v.push({text:e.agg})}))}let O="",w=$e(l);w||(O=R.i18n.translate("xpack.transform.groupBy.popoverForm.aggNameInvalidCharError",{defaultMessage:'Invalid name. The characters "[", "]", and ">" are not allowed and the name must not start or end with a space character.'})),w&&(w=!t.includes(l),O=R.i18n.translate("xpack.transform.groupBy.popoverForm.aggNameAlreadyUsedError",{defaultMessage:"Another group by configuration already uses that name."}));const E=(Fn(e)||Rn(e))&&Qt(d,e.agg),S=Fn(e)&&Gt(y);let T=w;return T&&(Fn(e)||Rn(e))&&(T=Qt(d,e.agg),Fn(e)&&Object(he.a)(e.time_zone)&&(T=S)),Object(G.jsx)(oe.EuiForm,{style:{width:"300px"}},Object(G.jsx)(oe.EuiFormRow,{error:!w&&[O],isInvalid:!w,helpText:a?R.i18n.translate("xpack.transform.groupBy.popoverForm.unsupportedGroupByHelpText",{defaultMessage:"Only the group_by name can be edited in this form. Please use the advanced editor to edit the other parts of the group_by configuration."}):"",label:R.i18n.translate("xpack.transform.groupBy.popoverForm.nameLabel",{defaultMessage:"Group by name"})},Object(G.jsx)(oe.EuiFieldText,{defaultValue:l,isInvalid:!w,onChange:e=>c(e.target.value)})),v.length>0&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.groupby.popoverForm.aggLabel",{defaultMessage:"Aggregation"})},Object(G.jsx)(oe.EuiSelect,{options:v,value:o,onChange:e=>i(e.target.value)})),x.length>0&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.groupBy.popoverForm.fieldLabel",{defaultMessage:"Field"})},Object(G.jsx)(oe.EuiSelect,{options:x,value:u,onChange:e=>p(e.target.value)})),(Fn(e)||Rn(e))&&Object(G.jsx)(oe.EuiFormRow,{error:[R.i18n.translate("xpack.transform.groupBy.popoverForm.intervalError",{defaultMessage:"Invalid interval."})],isInvalid:!E,label:R.i18n.translate("xpack.transform.groupBy.popoverForm.intervalLabel",{defaultMessage:"Interval"})},Object(G.jsx)(P.a.Fragment,null,Rn(e)&&Object(G.jsx)(oe.EuiFieldText,{defaultValue:d,isInvalid:!E,onChange:e=>m(e.target.value)}),Fn(e)&&Object(G.jsx)(oe.EuiSelect,{options:[{value:"1m",text:"1m"},{value:"1h",text:"1h"},{value:"1d",text:"1d"},{value:"1w",text:"1w"},{value:"1M",text:"1M"},{value:"1q",text:"1q"},{value:"1y",text:"1y"}],value:d,onChange:e=>m(e.target.value)}))),Fn(e)&&Object(he.a)(e.time_zone)?Object(G.jsx)(oe.EuiFormRow,{error:R.i18n.translate("xpack.transform.groupBy.popoverForm.timeZoneError",{defaultMessage:"Invalid time zone."}),isInvalid:!S,label:R.i18n.translate("xpack.transform.groupBy.popoverForm.timeZoneLabel",{defaultMessage:"Time zone"})},Object(G.jsx)(oe.EuiComboBox,{options:g,onChange:e=>h(e),selectedOptions:f,"aria-label":R.i18n.translate("xpack.transform.groupBy.popoverForm.timeZoneAriaLabel",{defaultMessage:"Time zone"}),singleSelection:{asPlainText:!0}})):null,!a&&Object(G.jsx)(oe.EuiFormRow,{helpText:Object(G.jsx)(P.a.Fragment,null,R.i18n.translate("xpack.transform.groupBy.popoverForm.missingBucketCheckboxHelpText",{defaultMessage:"Select to include documents without a value."}),Object(G.jsx)("br",null),Object(G.jsx)(oe.EuiLink,{href:s,target:"_blank"},R.i18n.translate("xpack.transform.stepDetailsForm.missingBucketCheckboxHelpTextLink",{defaultMessage:"Learn more"})))},Object(G.jsx)(oe.EuiCheckbox,{id:_,label:R.i18n.translate("xpack.transform.groupby.popoverForm.missingBucketCheckboxLabel",{defaultMessage:"Include missing buckets"}),checked:b,onChange:()=>j(!b)})),a&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiCodeBlock,{"aria-label":R.i18n.translate("xpack.transform.agg.popoverForm.codeBlock",{defaultMessage:"JSON of transform aggregation"}),fontSize:"s",language:"json",paddingSize:"s",style:{width:"100%",height:"200px"}},JSON.stringify(qn(e),null,2))),Object(G.jsx)(oe.EuiFormRow,{hasEmptyLabelSpace:!0},Object(G.jsx)(oe.EuiButton,{isDisabled:!T,onClick:()=>n(function(){const t={...e,agg:o,aggName:l,field:u,missing_bucket:b};return Rn(t)&&void 0!==d?t.interval=d:Fn(t)&&void 0!==d&&(t.calendar_interval=d,Gt(y)&&(t.time_zone=y)),t}())},R.i18n.translate("xpack.transform.groupBy.popoverForm.submitButtonLabel",{defaultMessage:"Apply"}))))},Ht=({deleteHandler:e,item:t,otherAggNames:n,onChange:r,options:s})=>{const[a,o]=Object(L.useState)(!1);let i;return Fn(t)?i=t.calendar_interval:Rn(t)&&(i=t.interval),Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(G.jsx)(oe.EuiFlexItem,{className:"transform__GroupByLabel--text"},Object(G.jsx)("span",{className:"eui-textTruncate","data-test-subj":"transformGroupByEntryLabel"},t.aggName)),void 0!==i&&Object(G.jsx)(oe.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--text transform__GroupByLabel--interval"},Object(G.jsx)(oe.EuiTextColor,{color:"subdued",className:"eui-textTruncate","data-test-subj":"transformGroupByEntryIntervalLabel"},i)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(G.jsx)(oe.EuiPopover,{id:"transformIntervalFormPopover",ownFocus:!0,button:Object(G.jsx)(oe.EuiButtonIcon,{"aria-label":R.i18n.translate("xpack.transform.groupByLabelForm.editIntervalAriaLabel",{defaultMessage:"Edit interval"}),size:"s",iconType:"pencil",onClick:()=>o(!a),"data-test-subj":"transformGroupByEntryEditButton"}),isOpen:a,closePopover:()=>o(!1)},Object(G.jsx)(Ut,{defaultData:t,onChange:function(e){r({...e}),o(!1)},otherAggNames:n,options:s}))),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--button"},Object(G.jsx)(oe.EuiButtonIcon,{"aria-label":R.i18n.translate("xpack.transform.groupByLabelForm.deleteItemAriaLabel",{defaultMessage:"Delete item"}),size:"s",iconType:"cross",onClick:()=>e(t.aggName),"data-test-subj":"transformGroupByEntryDeleteButton"})))},Wt=({deleteHandler:e,list:t,onChange:n,options:r})=>{const s=Object.keys(t);return Object(G.jsx)(P.a.Fragment,null,s.map(((a,o)=>{const i=s.filter((e=>e!==a));return Object(G.jsx)(L.Fragment,{key:a},Object(G.jsx)(oe.EuiPanel,{paddingSize:"s","data-test-subj":`transformGroupByEntry ${o}`},Object(G.jsx)(Ht,{deleteHandler:e,item:t[a],otherAggNames:i,onChange:e=>n(a,e),options:r})),s.length>0&&Object(G.jsx)(oe.EuiSpacer,{size:"s"}))})))},Jt=({item:e,optionsDataId:t})=>{let n;return Fn(e)?n=e.calendar_interval:Rn(e)&&(n=e.interval),Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(G.jsx)(oe.EuiFlexItem,{className:"transform__GroupByLabel--text"},Object(G.jsx)("span",{className:"eui-textTruncate"},t)),void 0!==n&&Object(G.jsx)(oe.EuiFlexItem,{grow:!1,className:"transform__GroupByLabel--text transform__GroupByLabel--interval"},Object(G.jsx)(oe.EuiTextColor,{color:"subdued",className:"eui-textTruncate"},n)))},Kt=({list:e})=>{const t=Object.keys(e);return Object(G.jsx)(P.a.Fragment,null,t.map((n=>Object(G.jsx)(L.Fragment,{key:n},Object(G.jsx)(oe.EuiPanel,{paddingSize:"s"},Object(G.jsx)(Jt,{item:e[n],optionsDataId:n})),t.length>0&&Object(G.jsx)(oe.EuiSpacer,{size:"s"})))))},Yt=Object(L.createContext)(void 0),Xt=Object(L.memo)((({actions:e,state:t})=>{const{ml:{useFieldStatsTrigger:n,FieldStatsInfoButton:r}}=Object(Ct.a)(),{handleFieldStatsButtonClick:s,closeFlyout:a,renderOption:o,populatedFields:i}=n(),{addAggregation:l,addGroupBy:c,deleteAggregation:u,deleteGroupBy:p,updateAggregation:d,updateGroupBy:m}=e,{aggList:g,aggOptions:f,aggOptionsData:h,groupByList:y,groupByOptions:b,groupByOptionsData:j}=t,_=Object(L.useMemo)((()=>f.map((({label:e,field:t,options:n})=>({isGroupLabelOption:!0,key:t.id,label:Object(G.jsx)(r,{isEmpty:i&&!i.has(t.id),field:t,label:e,onButtonClick:s}),options:null!=n?n:[]})))),[f,r,s,i]);return Object(G.jsx)(Yt.Provider,{value:{actions:e,state:t}},Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:R.i18n.translate("xpack.transform.stepDefineForm.groupByLabel",{defaultMessage:"Group by"})},Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Wt,{list:y,options:j,onChange:m,deleteHandler:p}),Object(G.jsx)(qt,{changeHandler:c,options:b,placeholder:R.i18n.translate("xpack.transform.stepDefineForm.groupByPlaceholder",{defaultMessage:"Add a group by field ..."}),testSubj:"transformGroupBySelection",renderOption:o}))),Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:R.i18n.translate("xpack.transform.stepDefineForm.aggregationsLabel",{defaultMessage:"Aggregations"})},Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Pt,{list:g,options:h,onChange:(e,t)=>{d(e,t),a()},deleteHandler:u}),Object(G.jsx)(qt,{changeHandler:e=>{l(e),a()},options:_,placeholder:R.i18n.translate("xpack.transform.stepDefineForm.aggregationsPlaceholder",{defaultMessage:"Add an aggregation ..."}),testSubj:"transformAggregationSelection"}))))})),Zt=({onChange:e,aggConfig:t})=>{var n,r;const{state:{fields:s}}=Object(L.useContext)(Yt),a=s.filter((e=>gn.includes(e.type))).map((({name:e})=>({text:e,value:e})));Object.values(bn).forEach((e=>{a.unshift({text:e,value:e})})),a.unshift({text:"",value:""});const o=jn(t.sortField),i=Object.values(fn).map((e=>({id:e,label:e}))),l=null!==(n=t.sortSettings)&&void 0!==n?n:{},c=Object(L.useCallback)((n=>{var r;e({...t,sortSettings:{...null!==(r=t.sortSettings)&&void 0!==r?r:{},...n}})}),[t,e]);return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.sortFieldTopMetricsLabel",defaultMessage:"Sort field"})},Object(G.jsx)(oe.EuiSelect,{options:a,value:t.sortField,onChange:n=>{e({...t,sortField:n.target.value})},"data-test-subj":"transformSortFieldTopMetricsLabel"})),t.sortField?Object(G.jsx)(P.a.Fragment,null,o?null:Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.sortDirectionTopMetricsLabel",defaultMessage:"Sort direction"})},Object(G.jsx)(oe.EuiButtonGroup,{type:"single",legend:R.i18n.translate("xpack.transform.agg.popoverForm.sortDirectionTopMetricsLabel",{defaultMessage:"Sort direction"}),options:i,idSelected:null!==(r=l.order)&&void 0!==r?r:"",onChange:e=>{c({order:e})},color:"text"})),Object(G.jsx)(oe.EuiSpacer,{size:"s"}))):null)};function en(e){return{...e,isSubAggsSupported:!1,isMultiField:!0,field:En(e)?e.field:"",AggFormComponent:Zt,aggConfig:{},getEsAggConfig(){if(!this.isValid())return null;const{sortField:e,sortSettings:t={},...n}=this.aggConfig;let r=null;if(jn(e))r=e;else{const{mode:n,numericType:s,order:a,...o}=t;r=n||s||Object(ve.a)(o)?{[e]:{...o,order:a,...n?{mode:n}:{},...s?{numeric_type:s}:{}}}:{[e]:t.order}}return{metrics:(Array.isArray(this.field)?this.field:[this.field]).map((e=>({field:e}))),sort:r,...null!=n?n:{}}},setUiConfigFromEs(e){var t;const{metrics:n,sort:r,...s}=e;if(this.field=(Array.isArray(n)?n:[n]).map((e=>e.field)),jn(r))return void(this.aggConfig.sortField=r);if(!r)return void(this.aggConfig={...this.aggConfig,...null!=s?s:{}});const a=Object.keys(r)[0];this.aggConfig.sortField=a;const o=r[a];if(this.aggConfig.sortSettings=null!==(t=this.aggConfig.sortSettings)&&void 0!==t?t:{},_n(o)&&(this.aggConfig.sortSettings.order=o),Object(ve.a)(o)){const{order:e,mode:t,numeric_type:n,...r}=o;this.aggConfig.sortSettings=r,_n(e)&&(this.aggConfig.sortSettings.order=e),xn(t)&&(this.aggConfig.sortSettings.mode=t),vn(n)&&(this.aggConfig.sortSettings.numericType=n)}this.aggConfig={...this.aggConfig,...null!=s?s:{}}},isValid(){var e;return!(!this.aggConfig.sortField||!jn(this.aggConfig.sortField)&&(null===(e=this.aggConfig.sortSettings)||void 0===e||!e.order))}}}const tn=/[[\]>]/g;function nn(e){switch(e){case Ue.FLOAT:case Ue.HALF_FLOAT:case Ue.SCALED_FLOAT:case Ue.DOUBLE:case Ue.INTEGER:case Ue.LONG:case Ue.SHORT:case Ue.UNSIGNED_LONG:return He.NUMBER;case Ue.DATE:case Ue.DATE_NANOS:return He.DATE;case Ue.KEYWORD:case Ue.STRING:return He.STRING;default:return e}}const rn=({aggConfig:e,onChange:t,selectedField:n})=>{var r;const{dataView:s,runtimeMappings:a}=Object(L.useContext)(ja),o=Object(L.useMemo)((()=>function(e,t,n){const r=t.fields.getByName(e);if(void 0!==r)return[...Ot,...vt[r.type]];if(Object(ve.a)(n)&&n.hasOwnProperty(e)){const t=n[e];return[...Ot,...vt[nn(t.type)]]}console.error(`The field ${e} does not exist in the index or runtime fields`)}(n,s,a)),[s,n,a]);Tt()((function(){t({})}),[n]);const i=null==e?void 0:e.aggTypeConfig,l=null!==(r=null==e?void 0:e.filterAgg)&&void 0!==r?r:"",c=null!=i&&i.isValid?null==i?void 0:i.isValid():void 0;return Object(G.jsx)(P.a.Fragment,null,void 0!==o?Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAggLabel",defaultMessage:"Filter query"}),Object(G.jsx)(oe.EuiToolTip,{content:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerQueryAdvancedSuggestionTooltip",defaultMessage:"To add other filter query aggregations, edit the JSON config."})},Object(G.jsx)(oe.EuiIcon,{size:"s",color:"subdued",type:"questionInCircle",className:"eui-alignTop"})))},Object(G.jsx)(oe.EuiSelect,{options:[{text:"",value:""}].concat(o.map((e=>({text:e,value:e})))),value:l,onChange:e=>{const r=e.target.value;t({filterAgg:r,aggTypeConfig:cn(r,n)})},"data-test-subj":"transformFilterAggTypeSelector"})):null,""!==l&&(null==i?void 0:i.FilterAggFormComponent)&&Object(G.jsx)(i.FilterAggFormComponent,{config:null==i?void 0:i.filterAggConfig,onChange:n=>{t({...e,aggTypeConfig:{...i,filterAggConfig:n.config}})},selectedField:n,isValid:c}))},sn=(e,t)=>{const{data:n}=Object(Ct.a)();return Object(B.useQuery)([Ve.r.DATA_SEARCH,e],(async({signal:t})=>{const{rawResponse:r}=await Object(xe.lastValueFrom)(n.search.search({params:e},{abortSignal:t}));return r}),{enabled:t})},an=({config:e,onChange:t,selectedField:n})=>{var r,s;const{dataView:a,runtimeMappings:o}=Object(L.useContext)(ja),i=Object(Ct.b)(),[l,c]=Object(L.useState)(""),u=Object(L.useMemo)((()=>Object(m.debounce)((e=>c(e)),600)),[]);Object(L.useEffect)((()=>(u(""),()=>u.cancel())),[]);const p=Object(L.useCallback)((n=>{t({config:{...e,...n}})}),[e,t]),{data:d,isError:g,isLoading:f}=sn({index:a.title,body:{...void 0!==o?{runtime_mappings:o}:{},query:{wildcard:{[n]:{value:`*${l}*`}}},aggs:{field_values:{terms:{field:n,size:10}}},size:0}},void 0!==n);Object(L.useEffect)((()=>{g&&i.addWarning(R.i18n.translate("xpack.transform.agg.popoverForm.filerAgg.term.errorFetchSuggestions",{defaultMessage:"Unable to fetch suggestions"}))}),[g]);const h=(y=null==d||null===(r=d.aggregations)||void 0===r?void 0:r.field_values,Object(ve.a)(y,["buckets"])?(null==d||null===(s=d.aggregations)||void 0===s?void 0:s.field_values.buckets).map((e=>({label:e.key+""}))):[]);var y;Tt()((()=>{n&&t({config:{value:void 0}})}),[n]);const b=null!=e&&e.value?[{label:e.value}]:void 0;return void 0===n?null:Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAgg.term.valueLabel",defaultMessage:"Value"})},Object(G.jsx)(oe.EuiComboBox,{async:!0,isLoading:f,fullWidth:!0,singleSelection:{asPlainText:!0},options:h,selectedOptions:b,isClearable:!1,onChange:e=>{p({value:e.length>0?e[0].label:void 0})},onCreateOption:e=>{p({value:e})},onSearchChange:u,"data-test-subj":"transformFilterTermValueSelector"}))},on=({config:e,onChange:t})=>{var n,r,s,a;const o=null!==(n=null==e?void 0:e.from)&&void 0!==n?n:"",i=null!==(r=null==e?void 0:e.to)&&void 0!==r?r:"",l=null!==(s=null==e?void 0:e.includeFrom)&&void 0!==s&&s,c=null!==(a=null==e?void 0:e.includeTo)&&void 0!==a&&a,u=Object(L.useCallback)((n=>{t({config:{...e,...n}})}),[e]);return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiFlexGroup,{direction:"row"},Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAgg.range.greaterThanLabel",defaultMessage:"Greater than"})},Object(G.jsx)(oe.EuiFieldNumber,{value:o,max:""!==i?i:void 0,onChange:e=>{u({from:""===e.target.value?void 0:Number(e.target.value)})},step:"any",prepend:Object(G.jsx)(oe.EuiButton,{minWidth:40,style:{maxWidth:40},onChange:e=>{u({includeFrom:e.target.checked})},fill:l},l?"≥":">")}))),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.agg.popoverForm.filerAgg.range.lessThanLabel",defaultMessage:"Less than"})},Object(G.jsx)(oe.EuiFieldNumber,{value:i,min:""!==o?o:void 0,onChange:e=>{u({to:""===e.target.value?void 0:Number(e.target.value)})},step:"any",append:Object(G.jsx)(oe.EuiButton,{minWidth:40,style:{maxWidth:40},onClick:()=>{u({includeTo:!c})},fill:c},c?"≤":"<")})))))};function ln(e){const t=En(e)?e.field:null;return{...e,isSubAggsSupported:!0,field:t,AggFormComponent:rn,aggConfig:{},getEsAggConfig(){var e;if(!this.isValid())return null;const t=null===(e=this.aggConfig.aggTypeConfig)||void 0===e?void 0:e.getEsAggConfig(this.field);return{[this.aggConfig.filterAgg]:t}},setUiConfigFromEs(e){var n;const r=Object.keys(e)[0],s=e[r],a=cn(r,t,s);this.field=null!==(n=null!=t?t:a.fieldName)&&void 0!==n?n:null,this.aggConfig={filterAgg:r,aggTypeConfig:a}},isValid(){var e,t;return void 0!==(null===(e=this.aggConfig)||void 0===e?void 0:e.filterAgg)&&(null===(t=this.aggConfig.aggTypeConfig)||void 0===t||!t.isValid||this.aggConfig.aggTypeConfig.isValid())},getAggName(){var e,t;return null!==(e=this.aggConfig)&&void 0!==e&&null!==(t=e.aggTypeConfig)&&void 0!==t&&t.getAggName?this.aggConfig.aggTypeConfig.getAggName():void 0},helperText(){var e,t;return null!==(e=this.aggConfig)&&void 0!==e&&null!==(t=e.aggTypeConfig)&&void 0!==t&&t.helperText?this.aggConfig.aggTypeConfig.helperText():void 0}}}function cn(e,t,n){var r,s;let a=t;switch(e){case xt.TERM:const e="object"==typeof n?Object.values(n)[0]:void 0;return a=n?Object.keys(n)[0]:a,{FilterAggFormComponent:an,filterAggConfig:{value:e},getEsAggConfig(){if(void 0===this.fieldName||!this.filterAggConfig)throw new Error(`Config ${xt.TERM} is not completed`);return{[this.fieldName]:this.filterAggConfig.value}},isValid(){var e;return void 0!==(null===(e=this.filterAggConfig)||void 0===e?void 0:e.value)},getAggName(){var e;return null!==(e=this.filterAggConfig)&&void 0!==e&&e.value?this.filterAggConfig.value:void 0},fieldName:a};case xt.RANGE:a=n?Object.keys(n)[0]:a;const o="object"==typeof n?Object.values(n)[0]:void 0;return{fieldName:a,FilterAggFormComponent:on,filterAggConfig:"object"==typeof o?{from:null!==(r=o.gte)&&void 0!==r?r:o.gt,to:null!==(s=o.lte)&&void 0!==s?s:o.lt,includeFrom:void 0!==o.gte,includeTo:void 0!==o.lte}:void 0,getEsAggConfig(){if(void 0===this.fieldName||!this.filterAggConfig)throw new Error(`Config ${xt.RANGE} is not completed`);const{from:e,includeFrom:t,to:n,includeTo:r}=this.filterAggConfig,s={};return e&&(s[t?"gte":"gt"]=e),n&&(s[r?"lte":"lt"]=n),{[this.fieldName]:s}},isValid(){return"object"==typeof this.filterAggConfig&&(void 0!==this.filterAggConfig.from||void 0!==this.filterAggConfig.to)&&(void 0===this.filterAggConfig.from||void 0===this.filterAggConfig.to||this.filterAggConfig.from<=this.filterAggConfig.to)},helperText(){if(!this.isValid())return;const{from:e,to:t,includeFrom:n,includeTo:r}=this.filterAggConfig;return`range: ${`${void 0!==e?`${n?"≥":">"} ${e}`:""} ${void 0!==e&&void 0!==t?"&":""} ${void 0!==t?`${r?"≤":"<"} ${t}`:""}`.trim()}`}};case xt.EXISTS:return a=n?n.field:a,{fieldName:a,getEsAggConfig(){if(void 0===this.fieldName)throw new Error(`Config ${xt.EXISTS} is not completed`);return{field:this.fieldName}},isValid(){return"string"==typeof this.fieldName}};case xt.BOOL:return{FilterAggFormComponent:Et,filterAggConfig:JSON.stringify({must:[],must_not:[],should:[]},null,2),isValid(){return gt(this.filterAggConfig)},getEsAggConfig(){return JSON.parse(this.filterAggConfig)}};default:return{fieldName:t,FilterAggFormComponent:Et,filterAggConfig:"",getEsAggConfig(){return void 0!==this.filterAggConfig?JSON.parse(this.filterAggConfig):{}},isValid(){return gt(this.filterAggConfig)}}}}function un(e,t){switch(e){case Ke.FILTER:return ln(t);case Ke.TOP_METRICS:return en(t);case Ke.PERCENTILES:return tt(t);case Ke.TERMS:return Xe(t);default:return t}}const pn=[1,5,25,50,75,95,99],dn=10,mn={[He.ATTACHMENT]:[Ke.VALUE_COUNT,Ke.FILTER],[He.BOOLEAN]:[Ke.VALUE_COUNT,Ke.FILTER,Ke.TERMS],[He.DATE]:[Ke.MAX,Ke.MIN,Ke.VALUE_COUNT,Ke.FILTER],[He.GEO_POINT]:[Ke.VALUE_COUNT,Ke.FILTER],[He.GEO_SHAPE]:[Ke.VALUE_COUNT,Ke.FILTER],[He.IP]:[Ke.CARDINALITY,Ke.VALUE_COUNT,Ke.FILTER,Ke.TOP_METRICS,Ke.TERMS],[He.MURMUR3]:[Ke.VALUE_COUNT,Ke.FILTER],[He.NUMBER]:[Ke.AVG,Ke.CARDINALITY,Ke.MAX,Ke.MIN,Ke.PERCENTILES,Ke.SUM,Ke.VALUE_COUNT,Ke.FILTER,Ke.TERMS,Ke.TOP_METRICS],[He.STRING]:[Ke.CARDINALITY,Ke.VALUE_COUNT,Ke.FILTER,Ke.TOP_METRICS,Ke.TERMS],[He._SOURCE]:[Ke.VALUE_COUNT,Ke.FILTER],[He.UNKNOWN]:[Ke.VALUE_COUNT,Ke.FILTER],[He.CONFLICT]:[Ke.VALUE_COUNT,Ke.FILTER],[We.COUNTER]:[Ke.MAX,Ke.MIN,Ke.TOP_METRICS]},gn=[He.NUMBER,He.DATE,He.GEO_POINT,We.COUNTER],fn={ASC:"asc",DESC:"desc"},hn={MIN:"min",MAX:"max",AVG:"avg",SUM:"sum",MEDIAN:"median"},yn=(He.NUMBER,Ue.DOUBLE,Ue.LONG,He.DATE,Ue.DATE,Ue.DATE_NANOS,[Ue.DOUBLE,Ue.LONG,Ue.DATE,Ue.DATE_NANOS]),bn={_SCORE:"_score"},jn=e=>Object.values(bn).some((t=>t===e)),_n=e=>Object.values(fn).some((t=>t===e)),xn=e=>Object.values(hn).some((t=>t===e)),vn=e=>yn.some((t=>t===e)),On=10;function wn(e,t,n){const r=Object.keys(e),s=r.find((e=>"aggs"!==e));if(void 0===s)throw new Error("Aggregation key is required");const a=un(s,{...e[s],agg:s,aggName:t,dropDownName:t});if(n&&(a.parentAgg=n),Sn(a)&&a.setUiConfigFromEs(e[s]),r.includes("aggs")){a.subAggs={};for(const[t,n]of Object.entries(e.aggs))a.subAggs[t]=wn(n,t,a)}return a}function En(e){return Object(ve.a)(e,["agg","aggName","dropDownName","field"])&&function(e){return"string"==typeof e&&Object.values(Ke).includes(e)}(e.agg)}function Sn(e){return Object(ve.a)(e,["setUiConfigFromEs"])||Object(ve.a)(e,["AggFormComponent"])}function Tn(e){let t={...e};if(delete t.agg,delete t.aggName,delete t.dropDownName,delete t.parentAgg,Sn(e)&&(t=e.getEsAggConfig(),null===t))return null;const n={[e.agg]:t};if(En(e)&&void 0!==e.subAggs&&Object.keys(e.subAggs).length>0){n.aggs={};for(const t of Object.values(e.subAggs))n.aggs[t.aggName]=Tn(t)}return n}let kn=function(e){return e.DATE_HISTOGRAM="date_histogram",e.HISTOGRAM="histogram",e.TERMS="terms",e}({});const An={[He.ATTACHMENT]:[],[He.BOOLEAN]:[kn.TERMS],[He.DATE]:[kn.DATE_HISTOGRAM],[He.GEO_POINT]:[],[He.GEO_SHAPE]:[],[He.IP]:[kn.TERMS],[He.MURMUR3]:[],[He.NUMBER]:[kn.HISTOGRAM,kn.TERMS],[He.STRING]:[kn.TERMS],[He._SOURCE]:[],[He.UNKNOWN]:[],[He.CONFLICT]:[]},Mn=/^([1-9][0-9]*((\.)([0-9]+))?|([0](\.)([0-9]+)))$/,Cn=/^[1-9][0-9]*(ms|s|m|h|d|w|M|q|y)$/;function Fn(e){return Object(ve.a)(e,["agg","field","calendar_interval"])&&e.agg===kn.DATE_HISTOGRAM}function Rn(e){return Object(ve.a)(e,["agg","field","interval"])&&e.agg===kn.HISTOGRAM}function In(e){return Object(ve.a)(e,["agg","field"])&&e.agg===kn.TERMS}function Dn(e){return Fn(e)||Rn(e)||In(e)}function qn(e){const{agg:t,aggName:n,dropDownName:r,...s}=e;return{[t]:s}}function $n(e){return Object(ve.a)(e,["agg","field"])}function Ln(e){return Object(ve.a)(e,["query_string"])}var Pn=n(118);function Nn(e){return Object(Pn.a)(e)||Ln(t=e)&&"*"===t.query_string.query||function(e){return Object(ve.a)(e,["bool"])&&Object(ve.a)(e.bool,["filter"])&&Array.isArray(e.bool.filter)&&1===e.bool.filter.length&&Ln(e.bool.filter[0])}(e)&&("*"===e.bool.filter[0].query_string.query||Object(Pn.a)(e.bool.filter[0]));var t}const Bn=["filter","must","must_not"];function zn(e,t,n,r,s="epoch_millis"){const a=[];var o;return e&&t&&n&&a.push({range:{[e]:{gte:t,lte:n,format:s}}}),!r||"object"!=typeof r||Nn(r)||(o=r,Object(ve.a)(o,["bool"])&&Object(ve.a)(o.bool,Bn)&&Object.values(o.bool).every((e=>Array.isArray(e)&&(0===e.length||1===e.length&&Nn(e[0])))))||a.push(r),a}function Vn(e){return"string"==typeof e?{query_string:{query:e,default_operator:"AND"}}:e}const Gn=e=>void 0!==e.missing_bucket?{missing_bucket:e.missing_bucket}:{};function Qn(e,t,n,r,s){const a=e.getIndexPattern().split(",").map((e=>e.trim())),o=void 0!==e.timeFieldName&&""!==e.timeFieldName,i=zn(e.timeFieldName,null==s?void 0:s.from,null==s?void 0:s.to,t),l={bool:{filter:i}},c=o&&i.length>0?l:t;return{source:{index:a,...Nn(c)?{}:{query:c},...Object(ve.a)(r)?{runtime_mappings:r}:{}},...null!=n?n:{}}}const Un=e=>{const t={...e.transformSettingsMaxPageSearchSize&&e.transformSettingsMaxPageSearchSize!==Ve.g?{max_page_search_size:e.transformSettingsMaxPageSearchSize}:{},...e.transformSettingsDocsPerSecond&&e.transformSettingsDocsPerSecond!==Ve.f?{docs_per_second:e.transformSettingsDocsPerSecond}:{},..."number"==typeof e.transformSettingsNumFailureRetries?{num_failure_retries:e.transformSettingsNumFailureRetries}:{}};return Object.keys(t).length>0?{settings:t}:{}},Hn="kuery";function Wn(e){return Object(ve.a)(e,["pivot"])}function Jn(e){return Object(ve.a)(e,["latest"])}function Kn(e){return Object(ve.a)(e,["sync"])}const Yn={toAPIConfig(e){var t,n;return{unique_key:null!==(t=e.unique_key)&&void 0!==t&&t.length?e.unique_key.map((e=>e.value)):[],sort:void 0!==(null===(n=e.sort)||void 0===n?void 0:n.value)?e.sort.value:""}},toUIConfig(){}};function Xn(e){var t;const n=!(null==e||null===(t=e.unique_key)||void 0===t||!t.length)&&"string"==typeof(null==e?void 0:e.sort)&&(null==e?void 0:e.sort.length)>0;return{isValid:n,...n?{}:{errorMessage:R.i18n.translate("xpack.transform.latestPreview.latestPreviewIncompleteConfigCalloutBody",{defaultMessage:"Please choose at least one unique key and sort field."})}}}function Zn(e,t){const n={...e};if(void 0!==t&&(n.parentAgg=t),void 0!==n.subAggs){const e={};for(const[t,r]of Object.entries(n.subAggs))e[t]=Zn(r,n);n.subAggs=e}return n}function er(e){return e.some((e=>Sn(e)&&!e.isValid()||e.subAggs&&er(Object.values(e.subAggs))))}function tr(e){const t=Object.values(e.aggregations).length>0&&Object.values(e.group_by).length>0&&!er(Ft(e.aggregations));return{isValid:t,...t?{}:{errorMessage:R.i18n.translate("xpack.transform.pivotPreview.PivotPreviewIncompleteConfigCalloutBody",{defaultMessage:"Please choose at least one group-by field and aggregation."})}}}function nr(e){let t=e;for(;void 0!==t.parentAgg;)t=t.parentAgg;return t}const rr=(e,t)=>{const n=Object(Ct.b)(),{aggOptions:r,aggOptionsData:s,groupByOptions:a,groupByOptionsData:o,fields:i}=Object(L.useMemo)((()=>function(e,t){const n=[],r={},s=[],a={},o=["_id","_index","_type","_ignored"],i=e.fields.filter((e=>!0===e.aggregatable&&!o.includes(e.name)&&!e.runtimeField&&void 0!==e.type)).map((e=>({name:e.name,type:Je(e)?We.COUNTER:e.type})));let l=[];kt(t)&&(l=Object.keys(t).map((e=>({name:e,type:nn(t[e].type)}))));const c=[...i,...l].sort(((e,t)=>e.name.localeCompare(t.name)));return c.forEach((e=>{const t=e.name,o=Mt(t),i=je(An,e.type);void 0!==i&&i.forEach((s=>{const a=o.replace(tn,"").trim(),i=`${s}(${o})`,l={label:i,field:{id:t,type:e.type}};n.push(l),r[i]=function(e,t,n,r){switch(r){case kn.TERMS:return{agg:r,aggName:e,dropDownName:t,field:n};case kn.HISTOGRAM:return{agg:r,aggName:e,dropDownName:t,field:n,interval:"10"};case kn.DATE_HISTOGRAM:return{agg:r,aggName:e,dropDownName:t,field:n,calendar_interval:"1m"}}}(a,i,t,s)}));const l={label:o,options:[],field:{id:t,type:e.type}},c=je(mn,e.type);void 0!==c&&c.forEach((e=>{const n=`${o.replace(tn,"").trim()}.${e}`,r=`${e}(${o})`;l.options.push({label:r}),a[r]=function(e,t,n,r){const s={agg:r,aggName:e,dropDownName:t,field:n};switch(r){case Ke.PERCENTILES:return tt(s);case Ke.FILTER:return ln(s);case Ke.TOP_METRICS:return en({...s,aggName:Ke.TOP_METRICS});case Ke.TERMS:return Xe(s);default:return s}}(n,r,t,e)})),s.push(l)})),{fields:c,groupByOptions:n,groupByOptionsData:r,aggOptions:s,aggOptionsData:a}}(t,e.runtimeMappings)),[e.runtimeMappings,t]),[l,c]=Object(L.useState)(e.aggList),[u,p]=Object(L.useState)(e.groupByList),d=Object(L.useCallback)((e=>{const t=e[0].label,r=o[t],s=r.aggName,a=ar(s,l,u);a.length>0?a.forEach((e=>n.addDanger(e))):(u[s]=r,p({...u}))}),[l,u,o,n]),m=Object(L.useCallback)(((e,t)=>{const r={...u};delete r[e];const s=ar(t.aggName,l,r);s.length>0?s.forEach((e=>n.addDanger(e))):(r[t.aggName]=t,p(r))}),[l,u,n]),g=Object(L.useCallback)((e=>{delete u[e],p({...u})}),[u]),f=Object(L.useCallback)((e=>{const t=e[0].label,r=s[t];let a=r.aggName;if(Sn(o=r)&&o.agg===Ke.TOP_METRICS){let e=[...new Set(Object.values(u).map((e=>Dn(e)?e.field:void 0)))].find((e=>{var t;return(null===(t=i.find((t=>t.name===e)))||void 0===t?void 0:t.type)===He.DATE}));e||(e=[...new Set(Object.values(l).map((e=>$n(e)?e.field:void 0)).flat().filter(he.a))].find((e=>{var t;return(null===(t=i.find((t=>t.name===e)))||void 0===t?void 0:t.type)===He.DATE}))),e&&(r.aggConfig.sortField=e,r.aggConfig.sortSettings={},r.aggConfig.sortSettings.order="desc")}var o;if(l[a]&&a===Ke.TOP_METRICS){const e=new RegExp(`^${Ke.TOP_METRICS}(\\d)*$`),t=Object.keys(l).reduce(((t,n)=>{const r=n.match(e);if(!r||!r[1])return t;const s=Number(r[1]);return s>t?s:t}),0);a=`${Ke.TOP_METRICS}${t+1}`,r.aggName=a}const p=ar(a,l,u);p.length>0?p.forEach((e=>n.addDanger(e))):(l[a]=r,c({...l}))}),[l,s,u,n,i]),h=Object(L.useCallback)(((e,t)=>{const r={...l};delete r[e];const s=ar(t.aggName,r,u);s.length>0?s.forEach((e=>n.addDanger(e))):(r[t.aggName]=t,c(r))}),[l,u,n]),y=Object(L.useCallback)(((e,t)=>{var r;if(!e.isSubAggsSupported)throw new Error(`Aggregation "${e.agg}" does not support sub-aggregations`);const a=t[0].label,o=s[a];e.subAggs=null!==(r=e.subAggs)&&void 0!==r?r:{};const i=ar(o.aggName,e.subAggs,{});if(i.length>0)return void i.forEach((e=>n.addDanger(e)));e.subAggs[o.aggName]=o;const l=Zn(nr(e));h(l.aggName,l)}),[s,n,h]),b=Object(L.useCallback)(((e,t)=>{const r=t.parentAgg;if(!r||!r.subAggs)throw new Error("No parent aggregation reference found");const{[e]:s,...a}=r.subAggs,o=ar(t.aggName,a,{});if(o.length>0)return void o.forEach((e=>n.addDanger(e)));r.subAggs={...a,[t.aggName]:t};const i=Zn(nr(t));h(i.aggName,i)}),[n,h]),j=Object(L.useCallback)(((e,t)=>{if(!e.subAggs||!e.subAggs[t])throw new Error("Unable to delete a sub-agg");delete e.subAggs[t];const n=Zn(nr(e));h(n.aggName,n)}),[h]),_=Object(L.useCallback)((e=>{delete l[e],c({...l})}),[l]),x=Object(L.useMemo)((()=>Ft(l)),[l]),v=Object(L.useMemo)((()=>Ft(u)),[u]),O=Object(L.useMemo)((()=>((e,t)=>{const n={pivot:{group_by:{},aggregations:{}}};return t.forEach((e=>{if(In(e)){const t={terms:{field:e.field,...Gn(e)}};n.pivot.group_by[e.aggName]=t}else if(Rn(e)){const t={histogram:{field:e.field,interval:e.interval,...Gn(e)}};n.pivot.group_by[e.aggName]=t}else if(Fn(e)){const t={date_histogram:{field:e.field,calendar_interval:e.calendar_interval,time_zone:e.time_zone,...Gn(e)}};n.pivot.group_by[e.aggName]=t}else n.pivot.group_by[e.aggName]=qn(e)})),e.forEach((e=>{const t=Tn(e);null!==t&&(n.pivot.aggregations[e.aggName]=t)})),n})(x,v)),[x,v]),w=Object(L.useMemo)((()=>tr(O.pivot)),[O]),E=Object(L.useMemo)((()=>({addAggregation:f,addGroupBy:d,addSubAggregation:y,updateSubAggregation:b,deleteSubAggregation:j,deleteAggregation:_,deleteGroupBy:g,setAggList:c,setGroupByList:p,updateAggregation:h,updateGroupBy:m})),[f,d,y,_,g,j,h,m,b]);return Object(L.useMemo)((()=>({actions:E,state:{aggList:l,aggOptions:r,aggOptionsData:s,groupByList:u,groupByOptions:a,groupByOptionsData:o,pivotAggsArr:x,pivotGroupByArr:v,validationStatus:w,requestPayload:O,fields:i}})),[E,l,r,s,u,a,o,x,v,w,O,i])};function sr(e,t,n){var r,s,a;if(e.runtimeMappings=function(e,t){let n={};if(e){const t=null==e?void 0:e.getComputedFields();if(void 0!==(null==t?void 0:t.runtimeFields)){const e=t.runtimeFields;kt(e)&&(n={...n,...e})}}if(kt(t)&&(n={...n,...t}),kt(n))return n}(n,null==t||null===(r=t.source)||void 0===r?void 0:r.runtime_mappings),void 0===t)return e;Wn(t)&&(e.transformFunction=Ve.k.PIVOT,e.aggList=Object.keys(t.pivot.aggregations).reduce(((e,n)=>{const r=t.pivot.aggregations[n];return e[n]=wn(r,n),e}),{}),e.groupByList=Object.keys(t.pivot.group_by).reduce(((e,n)=>{const r=t.pivot.group_by[n],s=Object.keys(r)[0];return e[n]={agg:s,aggName:n,dropDownName:n,...r[s]},e}),{}),e.previewRequest={pivot:t.pivot},e.validationStatus=tr(t.pivot)),Jn(t)&&(e.transformFunction=Ve.k.LATEST,e.latestConfig={unique_key:t.latest.unique_key.map((e=>{var t,r;return{value:e,label:n&&null!==(t=null===(r=n.fields.find((t=>t.name===e)))||void 0===r?void 0:r.displayName)&&void 0!==t?t:e}})),sort:{value:t.latest.sort,label:n&&null!==(s=null===(a=n.fields.find((e=>e.name===t.latest.sort)))||void 0===a?void 0:a.displayName)&&void 0!==s?s:t.latest.sort}},e.previewRequest={latest:t.latest},e.validationStatus=Xn(t.latest));const o=t.source.query;return void 0===o||Object(m.isEqual)(o,Pn.b)||(e.isAdvancedSourceEditorEnabled=!0,e.searchQuery=o,e.sourceConfigUpdated=!0),e.valid=!0,e}function ar(e,t,n){if(void 0!==t[e])return[R.i18n.translate("xpack.transform.stepDefineForm.aggExistsErrorMessage",{defaultMessage:"An aggregation configuration with the name ''{aggName}'' already exists.",values:{aggName:e}})];if(void 0!==n[e])return[R.i18n.translate("xpack.transform.stepDefineForm.groupByExistsErrorMessage",{defaultMessage:"A group by configuration with the name ''{aggName}'' already exists.",values:{aggName:e}})];const r=[];let s;if(e.split(".").forEach((a=>{s=void 0===s?a:`${s}.${a}`,void 0===t[s]&&void 0===n[s]||r.push(R.i18n.translate("xpack.transform.stepDefineForm.nestedConflictErrorMessage",{defaultMessage:"Couldn't add configuration ''{aggName}'' because of a nesting conflict with ''{aggNameCheck}''.",values:{aggName:e,aggNameCheck:s}}))})),r.length>0)return r;e:for(const n of Object.keys(t)){const t=n.split(".");let s;for(const a of t)if(s=void 0===s?a:`${s}.${a}`,s===e){r.push(R.i18n.translate("xpack.transform.stepDefineForm.nestedAggListConflictErrorMessage",{defaultMessage:"Couldn't add configuration ''{aggName}'' because of a nesting conflict with ''{aggListName}''.",values:{aggName:e,aggListName:n}}));break e}}if(r.length>0)return r;e:for(const t of Object.keys(n)){const n=t.split(".");let s;for(const a of n)if(s=void 0===s?a:`${s}.${a}`,s===e){r.push(R.i18n.translate("xpack.transform.stepDefineForm.nestedGroupByListConflictErrorMessage",{defaultMessage:"Couldn't add configuration ''{aggName}'' because of a nesting conflict with ''{groupByListName}''.",values:{aggName:e,groupByListName:t}}));break e}}return r}function or(e){return{transformFunction:Ve.k.PIVOT,latestConfig:{},aggList:{},groupByList:{},isAdvancedPivotEditorEnabled:!1,isAdvancedSourceEditorEnabled:!1,isDatePickerApplyEnabled:!1,searchLanguage:Hn,searchString:void 0,searchQuery:void 0!==e.savedSearch?e.combinedQuery:"*",sourceConfigUpdated:!1,valid:!1,validationStatus:{isValid:!1},previewRequest:void 0,runtimeMappings:void 0,runtimeMappingsUpdated:!1,isRuntimeMappingsEditorEnabled:!1}}function ir(e){return Object(oe.formatDate)(e,"MMMM Do YYYY, HH:mm:ss")}n(37),new Set([Ue.UNSIGNED_LONG,Ue.LONG,Ue.INTEGER,Ue.SHORT,Ue.BYTE]),new Set([Ue.DOUBLE,Ue.FLOAT,Ue.HALF_FLOAT,Ue.SCALED_FLOAT]);var lr=n(175);let cr=function(e){return e[e.UNUSED=0]="UNUSED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e[e.ERROR=3]="ERROR",e}({});const ur={border:"all",fontSize:"s",cellPadding:"s",stripes:!1,rowHover:"none",header:"shade"},pr={showColumnSelector:!0,showDisplaySelector:!1,showSortSelector:!0,showFullScreenSelector:!1},dr="non-aggregatable",mr=e=>{let t;switch(e){case Ue.GEO_POINT:case Ue.GEO_SHAPE:t="json";break;case Ue.BOOLEAN:t="boolean";break;case Ue.DATE:case Ue.DATE_NANOS:t="datetime";break;case Ue.BYTE:case Ue.DOUBLE:case Ue.FLOAT:case Ue.HALF_FLOAT:case Ue.INTEGER:case Ue.LONG:case Ue.SCALED_FLOAT:case Ue.SHORT:case"number":t="numeric";case Ue.KEYWORD:case Ue.VERSION:case Ue.TEXT:}return t},gr=(e,t)=>t?"true"===e:e,fr=(e,t)=>{var n;if(Object(ve.a)(e,[t]))return null!==(n=je(e,t,null))&&void 0!==n?n:e[t]},hr=(e,t)=>{const n={...e};for(const e of Object.keys(n))void 0===t?Array.isArray(n[e])&&1===n[e].length&&(n[e]=n[e][0]):!1===t(e)&&Array.isArray(n[e])&&1===n[e].length&&(n[e]=n[e][0]);return n},yr={className:"cellHeaderWithHistogramChart"},br=({euiTheme:e})=>({".euiDataGridRowCell--boolean":{textTransform:"none"},".cellHeaderWithHistogramChart":{".euiDataGridHeaderCell__content":{width:"100%",textAlign:"left"},".euiDataGridHeaderCell__sortingArrow":{position:"absolute",bottom:0,right:e.size.base,"+ .euiPopover .euiDataGridHeaderCell__icon":{width:"auto",opacity:"1"}},".euiDataGridHeaderCell__button > .euiPopover":{position:"absolute",bottom:0,right:0},".histogramLabel":{transition:`margin ${e.animation.fast} ease-in`},"&:hover, &:focus-within, &:has(.euiPopover-isOpen)":{".histogramLabel":{marginRight:e.size.base}},"&:has(.euiDataGridHeaderCell__sortingArrow)":{".histogramLabel":{marginRight:Object(oe.mathWithUnits)([e.size.xl,e.size.xxs],((e,t)=>e+t))}}}}),jr=({title:e})=>Object(G.jsx)(oe.EuiTitle,{size:"xs"},Object(G.jsx)("span",null,e));function _r(e){return Object(ve.a)(e,["title"])&&"string"==typeof e.title&&""!==e.title}const xr=Object(L.memo)((e=>{const{chartsVisible:t,chartsButtonVisible:n,ccsWarning:r,columnsWithCharts:s,dataTestSubj:a,errorMessage:o,invalidSortingColumnns:i,noDataMessage:l,onChangeItemsPerPage:c,onChangePage:u,onSort:p,pagination:d,setVisibleColumns:m,renderCellPopover:g,renderCellValue:f,rowCount:h,sortingColumns:y,status:b,tableItems:j,toastNotifications:_,toggleChartVisibility:x,visibleColumns:v,trailingControlColumns:O}=e;Object(L.useEffect)((()=>{i.length>0&&i.forEach((e=>{_.addDanger(R.i18n.translate("xpack.ml.dataGrid.invalidSortingColumnError",{defaultMessage:"The column ''{columnId}'' cannot be used for sorting.",values:{columnId:e}}))}))}),[i,_]);const w=Object(L.useRef)(null);if(b===cr.LOADED&&0===j.length)return Object(G.jsx)("div",{"data-test-subj":`${a} empty`},_r(e)&&Object(G.jsx)(jr,{title:e.title}),Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutTitle",{defaultMessage:"Empty index query result."}),color:"primary"},Object(G.jsx)("p",null,R.i18n.translate("xpack.ml.dataGrid.IndexNoDataCalloutBody",{defaultMessage:"The query for the index returned no results. Please make sure you have sufficient permissions, the index contains documents and your query is not too restrictive."}))));if(""!==l)return Object(G.jsx)("div",{"data-test-subj":`${a} empty`},_r(e)&&Object(G.jsx)(jr,{title:e.title}),Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.ml.dataGrid.dataGridNoDataCalloutTitle",{defaultMessage:"Index preview not available"}),color:"primary"},Object(G.jsx)("p",null,l)));let E;return b===cr.ERROR&&(E=o&&!o.includes("failed to create query")?Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.ml.dataframe.analytics.exploration.querySyntaxError",{defaultMessage:"An error occurred loading the index data. Please ensure your query syntax is valid."}),color:"danger",iconType:"cross"},Object(G.jsx)("p",null,o)):Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.ml.dataGrid.indexDataError",{defaultMessage:"An error occurred loading the index data."}),color:"danger",iconType:"cross"},Object(G.jsx)(oe.EuiCodeBlock,{language:"json",fontSize:"s",paddingSize:"s",isCopyable:!0},o))),Object(G.jsx)("div",{"data-test-subj":`${a} ${b===cr.ERROR?"error":"loaded"}`,ref:w},_r(e)&&Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(jr,{title:e.title})),e.copyToClipboard&&e.copyToClipboardDescription&&Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiCopy,{beforeMessage:e.copyToClipboardDescription,textToCopy:e.copyToClipboard},(t=>Object(G.jsx)(oe.EuiButtonIcon,{onClick:t,iconType:"copyClipboard","aria-label":e.copyToClipboardDescription}))))),void 0!==E&&Object(G.jsx)("div",{"data-test-subj":`${a} error`},E,Object(G.jsx)(oe.EuiSpacer,{size:"m"})),r&&Object(G.jsx)("div",{"data-test-subj":`${a} ccsWarning`},Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutTitle",{defaultMessage:"Cross-cluster search returned no fields data."}),color:"warning"},Object(G.jsx)("p",null,R.i18n.translate("xpack.ml.dataGrid.CcsWarningCalloutBody",{defaultMessage:"There was an issue retrieving data for the data view. Source preview in combination with cross-cluster search is only supported for versions 7.10 and above. You may still configure and create the transform."}))),Object(G.jsx)(oe.EuiSpacer,{size:"m"})),h>0&&Object(G.jsx)(oe.EuiMutationObserver,{observerOptions:{subtree:!0,attributes:!0,childList:!0},onMutation:()=>{if(null!==w.current){const e=w.current.querySelectorAll(".euiDataGrid__virtualized");for(const t of Array.from(e))Object(ve.a)(t)&&Object(ve.a)(t.style)&&"auto"!==t.style.height&&(t.style.height="auto")}}},(r=>Object(G.jsx)("div",{css:br,ref:r},Object(G.jsx)(oe.EuiDataGrid,{"aria-label":_r(e)?e.title:"",columns:s.map((e=>(e.initialWidth=165,t&&(e.displayHeaderCellProps=yr),e))),columnVisibility:{visibleColumns:v,setVisibleColumns:m},trailingControlColumns:O,gridStyle:ur,rowCount:h,renderCellValue:f,renderCellPopover:g,sorting:{columns:y,onSort:p},toolbarVisibility:{...pr,...n?{additionalControls:Object(G.jsx)(oe.EuiToolTip,{content:R.i18n.translate("xpack.ml.dataGrid.histogramButtonToolTipContent",{defaultMessage:"Queries run to fetch histogram chart data will use a sample size per shard of {samplerShardSize} documents.",values:{samplerShardSize:5e3}})},Object(G.jsx)(oe.EuiButtonEmpty,{"aria-pressed":!0===t,className:"euiDataGrid__controlBtn"+(!0===t?" euiDataGrid__controlBtn--active":""),"data-test-subj":`${a}HistogramButton`,size:"xs",iconType:"visBarVertical",color:"text",onClick:x,disabled:void 0===t},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.dataGrid.histogramButtonText",defaultMessage:"Histogram charts"})))}:{}},pagination:{...d,pageSizeOptions:[5,10,25],onChangeItemsPerPage:c,onChangePage:u}})))))}),((e,t)=>Object(m.isEqual)(vr(e),vr(t))));function vr(e){return[e.columnsWithCharts,e.dataTestSubj,e.errorMessage,e.invalidSortingColumnns,e.noDataMessage,e.pagination,e.rowCount,e.sortingColumns,e.status,e.tableItems,e.visibleColumns,..._r(e)?[e.copyToClipboard,e.copyToClipboardDescription,e.title]:[]]}const Or="exclude-frozen";var wr=n(74),Er=n.n(wr);const Sr=new xe.Subject,Tr=(e={})=>{const{timeRangeSelector:t,autoRefreshSelector:n}=e,{data:{query:{timefilter:{timefilter:r}}}}=ge();return Object(L.useEffect)((()=>{!0!==t||r.isTimeRangeSelectorEnabled()?!1===t&&r.isTimeRangeSelectorEnabled()&&r.disableTimeRangeSelector():r.enableTimeRangeSelector(),!0!==n||r.isAutoRefreshSelectorEnabled()?!1===n&&r.isAutoRefreshSelectorEnabled()&&r.disableAutoRefreshSelector():r.enableAutoRefreshSelector()}),[t,n,r]),r};var kr=n(59);const Ar=5e3,Mr=e=>{var t,n,r;const{isAutoRefreshOnly:s,isLoading:a=!1,showRefresh:o,width:i,flexGroup:l=!0,isDisabled:c=!1,needsUpdate:u,onRefresh:p}=e,{data:d,notifications:{toasts:g},uiSettings:f,uiSettingsKeys:h,theme:y,i18n:b}=ge(),j=Object(oe.useIsWithinMaxBreakpoint)("l"),{timefilter:_,history:x}=d.query.timefilter,[v,O]=Ae("_g"),w=(E=x,function(){var e,t;return null!==(e=null===(t=E.get())||void 0===t?void 0:t.map((({from:e,to:t})=>({start:e,end:t}))))&&void 0!==e?e:[]});var E;const S=(()=>{const e=Tr(),t=Object(L.useMemo)((()=>e.getRefreshIntervalUpdate$().pipe(Object(xe.map)(e.getRefreshInterval))),[e]);return Er()(t,e.getRefreshInterval())})(),T=((e=!1)=>{const t=Tr(),n=Object(L.useMemo)((()=>e?t.getAbsoluteTime.bind(t):t.getTime.bind(t)),[e,t]),r=Object(L.useMemo)((()=>t.getTimeUpdate$().pipe(Object(xe.map)(n),Object(xe.distinctUntilChanged)(m.isEqual))),[t,n]);return Er()(r,n())})();Object(L.useEffect)((function(){void 0!==(null==v?void 0:v.time)&&_.setTime({from:v.time.from,to:v.time.to})}),[null==v||null===(t=v.time)||void 0===t?void 0:t.from,null==v||null===(n=v.time)||void 0===n?void 0:n.to,null==v||null===(r=v.time)||void 0===r?void 0:r.ts]),Object(L.useEffect)((function(){var e,t;void 0!==(null==v?void 0:v.refreshInterval)&&_.setRefreshInterval({pause:!(null==v||null===(e=v.refreshInterval)||void 0===e||!e.pause),value:null==v||null===(t=v.refreshInterval)||void 0===t?void 0:t.value})}),[null==v?void 0:v.refreshInterval]);const k=Object(L.useCallback)(Object(m.debounce)((e=>{O("refreshInterval",e,!0)}),200),[O]),[A,M]=Object(L.useState)(w()),[C,F]=Object(L.useState)(_.isAutoRefreshSelectorEnabled()),[I,D]=Object(L.useState)(_.isTimeRangeSelectorEnabled()),q=S;Object(L.useEffect)((function(){const e=!(null==v||!v.refreshInterval);q.value<Ar&&!q.pause&&g.addWarning({title:e?R.i18n.translate("xpack.ml.datePicker.shortRefreshIntervalURLWarningMessage",{defaultMessage:"The refresh interval in the URL is shorter than the minimum supported interval."}):R.i18n.translate("xpack.ml.datePicker.shortRefreshIntervalTimeFilterWarningMessage",{defaultMessage:"The refresh interval in Advanced Settings is shorter than the minimum supported interval."}),text:Object(kr.a)(Object(G.jsx)(oe.EuiButton,{onClick:k.bind(null,{pause:q.pause,value:Ar})},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.pageRefreshResetButton",defaultMessage:"Set to {defaultInterval}",values:{defaultInterval:"5s"}})),{theme:y,i18n:b})},{toastLifeTimeMs:3e4})}),[JSON.stringify(q),JSON.stringify(null==v?void 0:v.refreshInterval),k]);const $=f.get("dateFormat"),N=f.get(h.TIMEPICKER_QUICK_RANGES),B=Object(L.useMemo)((()=>N.map((({from:e,to:t,display:n})=>({start:e,end:t,label:n})))),[N]);Object(L.useEffect)((()=>{const e=new xe.Subscription,t=_.getEnabledUpdated$();return void 0!==t&&e.add(t.subscribe((e=>{F(_.isAutoRefreshSelectorEnabled()),D(_.isTimeRangeSelectorEnabled())}))),function(){e.unsubscribe()}}),[]);const z=Object(L.useCallback)((({start:e,end:t})=>{M(w()),O("time",{from:e,to:t,..."now"===e||"now"===t?{ts:Date.now()}:{}})}),[O]),V=Object(L.useCallback)((()=>{Sr.next({lastRefresh:Date.now()}),p&&p()}),[p]),Q=Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiSuperDatePicker,{isLoading:a,start:T.from,end:T.to,isPaused:q.pause,isAutoRefreshOnly:!I||s,refreshInterval:q.value||Ar,onTimeChange:z,onRefresh:V,onRefreshChange:function({isPaused:e,refreshInterval:t}){!1===e&&t<=0&&k({pause:e,value:5e3}),k({pause:e,value:t})},recentlyUsedRanges:A,dateFormat:$,commonlyUsedRanges:B,updateButtonProps:{iconOnly:j,fill:!1,...u?{needsUpdate:u}:{}},width:i,isDisabled:c})),!0!==o&&I?null:Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiButton,{fill:!1,color:u?"success":"primary",iconType:u?"kqlFunction":"refresh",onClick:V,"data-test-subj":"mlDatePickerRefreshPageButton"+(a?" loading":" loaded"),isLoading:a},u?Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.pageUpdateButton",defaultMessage:"Update"}):Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.pageRefreshButton",defaultMessage:"Refresh"})))),U=l?Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Q):Q;return C||I?U:null};var Cr=n(38),Fr=n.n(Cr);const Rr=e=>{const t={term:{_tier:{value:"data_frozen"}}};if(!e)return{bool:{must_not:[t]}};const n=Object(m.cloneDeep)(e);return delete n.match_all,Object(ve.a)(n.bool)?Array.isArray(n.bool.must_not)?n.bool.must_not.push(t):(Object(ve.a)(n.bool.must_not)&&(n.bool.must_not=[n.bool.must_not,t]),void 0===n.bool.must_not&&(n.bool.must_not=[t])):n.bool={must_not:[t]},n};const Ir=e=>{const{frozenDataPreference:t,setFrozenDataPreference:n,timefilter:r,dataView:s,query:a,disabled:o,callback:i,apiPath:l}=e,{http:c,notifications:{toasts:u},showFrozenDataTierChoice:p}=ge(),d=Object(L.useCallback)((async()=>{try{const e=await async function(e,t,n,r,s,a,o="/internal/file_upload/time_field_range"){try{const i=t.getRuntimeMappings(),l=await async function(e){const{http:t,path:n,signal:r,...s}=e;return await t.fetch({path:n,method:"POST",body:JSON.stringify(s),version:"1",...r?{signal:r}:{}})}({index:t.getIndexPattern(),timeFieldName:t.timeFieldName,query:a?Rr(s):s,...Object(ve.a)(i)?{runtimeMappings:i}:{},http:r,path:o});if(l.start.epoch&&l.end.epoch)return e.setTime({from:Fr()(l.start.epoch).toISOString(),to:Fr()(l.end.epoch).toISOString()}),l;if("number"==typeof l.start&&"number"==typeof l.end)return e.setTime({from:Fr()(l.start).toISOString(),to:Fr()(l.end).toISOString()}),{success:!0,start:{epoch:l.start,string:Fr()(l.start).toISOString()},end:{epoch:l.end,string:Fr()(l.end).toISOString()}};n.addWarning({title:R.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.noResults",{defaultMessage:"No results match your search criteria"})})}catch(e){n.addError(e,{title:R.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.errorSettingTimeRangeNotification",{defaultMessage:"An error occurred setting the time range. Please set the desired start and end times."})})}}(r,s,u,c,a,!1!==p&&t===Or,l);"function"==typeof i&&void 0!==e&&i(e)}catch(e){u.addError(e,{title:R.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.errorSettingTimeRangeNotification",{defaultMessage:"An error occurred setting the time range. Please set the desired start and end times."})})}}),[r,s,u,c,a,p,t,l,i]),[m,g]=Object(L.useState)(!1),f=Object(L.useCallback)((e=>{n(e),h()}),[n]),h=()=>{g(!1)},y=Object(L.useMemo)((()=>[{id:Or,label:R.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.useFullDataExcludingFrozenMenuLabel",{defaultMessage:"Exclude frozen data tier"})},{id:"include-frozen",label:R.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.useFullDataIncludingFrozenMenuLabel",{defaultMessage:"Include frozen data tier"})}]),[]),b=Object(L.useMemo)((()=>Object(G.jsx)(oe.EuiPanel,null,Object(G.jsx)(oe.EuiRadioGroup,{options:y,idSelected:t,onChange:f,compressed:!0}))),[y,t,f]),j=Object(L.useMemo)((()=>!1===p?Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullData",defaultMessage:"Use full range of data."}):t===Or?Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullDataExcludingFrozenButtonTooltip",defaultMessage:"Use full range of data excluding frozen data tier."}):Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullDataIncludingFrozenButtonTooltip",defaultMessage:"Use full range of data including frozen data tier, which might have slower search results."})),[t,p]);return Object(G.jsx)(oe.EuiFlexGroup,{responsive:!1,gutterSize:"xs"},Object(G.jsx)(oe.EuiToolTip,{content:j},Object(G.jsx)(oe.EuiButton,{isDisabled:o,onClick:()=>d(),"data-test-subj":"mlDatePickerButtonUseFullData"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.datePicker.fullTimeRangeSelector.useFullDataButtonLabel",defaultMessage:"Use full data"}))),!1===p?null:Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiPopover,{id:"mlFullTimeRangeSelectorOption",button:Object(G.jsx)(oe.EuiButtonIcon,{"data-test-subj":"mlDatePickerButtonDataTierOptions",display:"base",size:"m",iconType:"boxesVertical","aria-label":R.i18n.translate("xpack.ml.datePicker.fullTimeRangeSelector.moreOptionsButtonAriaLabel",{defaultMessage:"More options"}),onClick:()=>{g(!m)}}),isOpen:m,closePopover:h,panelPaddingSize:"none",anchorPosition:"downRight"},b)))};n(84),n(85);const Dr="eq";var qr=n(45);const $r=e=>Object(ve.a)(e,["data","id","interval","stats","type"])&&"numeric"===e.type,Lr=e=>Object(ve.a)(e,["data","cardinality","id","type"])&&("ordinal"===e.type||"boolean"===e.type);var Pr=n(46);const Nr=Object(G.css)({width:"100%",minWidth:`calc(${Pr.euiThemeVars.euiSize} * 7)`},"",""),Br={name:"1azakc",styles:"text-align:center"},zr=new xe.BehaviorSubject(null),Vr=Object(oe.euiPaletteColorBlind)()[0],Gr=Object(oe.euiPaletteColorBlind)({rotations:2})[10],Qr=e=>{if(e===dr)return;let t;switch(e){case"datetime":t=He.DATE;break;case"numeric":t=He.NUMBER;break;case"boolean":t=He.BOOLEAN;break;case"json":t=He.OBJECT;break;default:t=He.STRING}return t},Ur=(e,t=20)=>{if("unsupported"===e.type)return R.i18n.translate("xpack.ml.dataGridChart.histogramNotAvailable",{defaultMessage:"Chart not supported."});if(0===e.data.length)return R.i18n.translate("xpack.ml.dataGridChart.notEnoughData",{defaultMessage:"0 documents contain field."});if("boolean"===e.type)return Object(G.jsx)("table",{css:Nr},Object(G.jsx)("tbody",null,Object(G.jsx)("tr",null,void 0!==e.data[0]&&Object(G.jsx)("td",{css:Br},e.data[0].key_as_string),void 0!==e.data[1]&&Object(G.jsx)("td",{css:Br},e.data[1].key_as_string))));if(Lr(e)&&e.cardinality<=t)return R.i18n.translate("xpack.ml.dataGridChart.singleCategoryLegend",{defaultMessage:"{cardinality, plural, one {# category} other {# categories}}",values:{cardinality:e.cardinality}});if(Lr(e)&&e.cardinality>t)return R.i18n.translate("xpack.ml.dataGridChart.topCategoriesLegend",{defaultMessage:"top {maxChartColumns} of {cardinality} categories",values:{cardinality:e.cardinality,maxChartColumns:t}});if($r(e)){const t=Math.round(100*e.stats[0])/100,n=Math.round(100*e.stats[1])/100;return t!==n?`${t} - ${n}`:""+t}return""},Hr=({euiTheme:e})=>({width:"100%",height:Object(oe.mathWithUnits)([e.size.xl,e.size.xxl],((e,t)=>e+t))}),Wr=({euiTheme:e})=>({color:e.colors.mediumShade,marginTop:e.size.xs,fontStyle:"italic",fontWeight:"normal"}),Jr={background:{color:"transparent"},chartMargins:{left:0,right:0,top:0,bottom:1},chartPaddings:{left:0,right:0,top:0,bottom:0},scales:{barsPadding:.1}},Kr=({chartData:e,columnType:t,dataTestSubj:n,hideLabel:r,maxChartColumns:s})=>{const{data:a,legendText:o}=((e,t,n)=>{const r=Qr(t.schema),s=Er()(zr),a=(e=>{switch(e){case He.BOOLEAN:case He.IP:case He.STRING:return"ordinal";case He.DATE:return"time";case He.NUMBER:return"linear"}})(r),o=n=>null==s||Lr(e)&&"ordinal"===a&&s._source[t.id]===n.key||$r(e)&&"linear"===a&&s._source[t.id]>=+n.key&&s._source[t.id]<+n.key+e.interval||$r(e)&&"time"===a&&1e3*Fr()(s._source[t.id]).unix()>=+n.key&&1e3*Fr()(s._source[t.id]).unix()<+n.key+e.interval?Vr:Gr;let i=[];return Lr(e)?i=e.data.map((e=>{var t;return{...e,key_as_string:null!==(t=e.key_as_string)&&void 0!==t?t:e.key,color:o(e)}})):$r(e)&&(i=e.data.map((e=>({...e,key_as_string:e.key_as_string||e.key,color:o(e)})))),{data:i,legendText:Ur(e,n),xScaleType:a}})(e,t,s);return Object(G.jsx)("div",{"data-test-subj":n},(i=e,!(Object(ve.a)(i,["type"])&&"unsupported"===i.type)&&a.length>0&&Object(G.jsx)("div",{css:Hr,"data-test-subj":`${n}-histogram`},Object(G.jsx)(qr.Chart,null,Object(G.jsx)(qr.Settings,{theme:Jr,baseTheme:qr.LEGACY_LIGHT_THEME,locale:R.i18n.getLocale()}),Object(G.jsx)(qr.BarSeries,{id:"histogram",name:"count",xScaleType:qr.ScaleType.Ordinal,yScaleType:qr.ScaleType.Linear,xAccessor:"key_as_string",yAccessors:["doc_count"],styleAccessor:e=>e.datum.color,data:a})))),Object(G.jsx)("div",{className:"eui-textTruncate",css:Wr,"data-test-subj":`${n}-legend`},o),!r&&Object(G.jsx)("div",{"data-test-subj":`${n}-id`,className:"eui-textTruncate histogramLabel"},t.id));var i},Yr={rowCount:0,rowCountRelation:void 0},Xr=(e,t=5,n=10,r)=>{const s={pageIndex:0,pageSize:t},[a,o]=Object(L.useState)(!1),[i,l]=Object(L.useState)(""),[c,u]=Object(L.useState)(""),[p,d]=Object(L.useState)(cr.UNUSED),[m,g]=Object(L.useState)(Yr),[f,h]=Object(L.useState)([]),[y,b]=Object(L.useState)([]),[j,_]=Object(L.useState)(s),[x,v]=Object(L.useState)([]),[O,w]=Object(L.useState)(void 0),{rowCount:E,rowCountRelation:S}=m,T=Object(L.useCallback)((e=>{_((t=>({pageIndex:Math.floor(t.pageSize*t.pageIndex/e),pageSize:e})))}),[]),k=Object(L.useCallback)((e=>_((t=>({...t,pageIndex:e})))),[]),[A,M]=Object(L.useState)([]),C=e.map((e=>e.id)),F=(void 0!==r?C.filter(r):C).splice(0,n);Object(L.useEffect)((()=>{M(F)}),[F.join()]);const[R,I]=Object(L.useState)([]),D=Object(L.useCallback)((t=>{const n=t.reduce(((t,n)=>{const r=e.find((e=>e.id===n.id));return"json"===(null==r?void 0:r.schema)&&t.push(n.id),t}),[]);I(n),0===n.length&&v(t)}),[e]),q=Object(L.useMemo)((()=>e.map(((e,t)=>{const n=f.find((t=>t.id===e.id));return{...e,display:void 0!==n&&!0===O?Object(G.jsx)(Kr,{chartData:n,columnType:e,dataTestSubj:`mlDataGridChart-${e.id}`}):void 0}})).sort(((e,t)=>-1===A.indexOf(e.id)&&A.indexOf(t.id)>-1?1:-1===A.indexOf(t.id)&&A.indexOf(e.id)>-1?-1:-1===A.indexOf(e.id)&&-1===A.indexOf(t.id)?e.id.localeCompare(t.id):A.indexOf(e.id)-A.indexOf(t.id)))),[e,f,O,JSON.stringify(A)]);return Object(L.useEffect)((()=>{void 0===O&&E>0&&void 0!==S&&w(E<=1e4&&"gte"!==S)}),[O,E,S]),{ccsWarning:a,chartsVisible:O,chartsButtonVisible:!0,columnsWithCharts:q,errorMessage:c,invalidSortingColumnns:R,noDataMessage:i,onChangeItemsPerPage:T,onChangePage:k,onSort:D,pagination:j,resetPagination:()=>_(s),rowCount:E,rowCountRelation:S,setColumnCharts:h,setCcsWarning:o,setErrorMessage:u,setNoDataMessage:l,setPagination:_,setRowCountInfo:g,setSortingColumns:v,setStatus:d,setTableItems:b,setVisibleColumns:M,sortingColumns:x,status:p,tableItems:y,toggleChartVisibility:()=>{void 0!==O&&w(!O)},visibleColumns:A}};var Zr=n(58);const es=(e,t,n,r,s)=>{const{analytics:a}=Object(Ct.a)(),o=Object(L.useRef)(window.performance.now()),i=Object(L.useMemo)((()=>e.getIndexPattern()),[e]),l=Object(Ct.b)(),c=zn(e.timeFieldName,null==r?void 0:r.from,null==r?void 0:r.to,t),u=Object(L.useMemo)((()=>r&&e.timeFieldName?c[0]:Pn.b),[c,e,r]),p={bool:{filter:c}},{error:d,data:m,isError:g,isLoading:f}=sn({index:i,body:{fields:["*"],_source:!1,query:{function_score:{query:u,random_score:{}}},size:500}},!(Array.isArray(s)||void 0!==e.timeFieldName&&void 0===r));Object(L.useEffect)((()=>{if(f&&!g)w(""),S(cr.LOADING);else if(null!==d)w(Object(Zr.a)(d)),S(cr.ERROR);else if(!f&&!g&&void 0!==m){const e=i.includes(":"),t=m.hits.hits.every((e=>void 0===e.fields));O(e&&t),S(cr.LOADED)}}),[m,d,g,f]);const h=Object(L.useMemo)((()=>{let t=Array.isArray(s)?s:[];if(void 0===s&&m){const e=m.hits.hits.map((e=>{var t;return hr(null!==(t=e.fields)&&void 0!==t?t:{})}));t=[...new Set(e.map(Object.keys).flat(1))]}const n=(e=>{const t=e.fields.map((e=>e.name));return t.filter((n=>{if(e.metaFields.includes(n))return!1;const r=n.split(".");return"keyword"!==r.pop()||!t.includes(r.join("."))}))})(e);return t.filter((e=>n.includes(e))).sort()}),[m,s]),y=Object(L.useMemo)((()=>{if(void 0===h)return[];let t=[];return void 0!==n&&(t=Object.keys(n).map((e=>{const t=n[e];return{id:e,schema:mr(t.type)}}))),h.forEach((n=>{const r=e.fields.getByName(n);if(null==r||!r.runtimeField){const e=(e=>{var t;let n;if(e){switch(e.type){case He.BOOLEAN:n="boolean";break;case He.DATE:n="datetime";break;case He.GEO_POINT:case He.GEO_SHAPE:n="json";break;case He.NUMBER:n="numeric";break;case He.NESTED:n="json"}return void 0===n&&!1===e.aggregatable||Je(e)||"numeric"===n&&null!=e&&null!==(t=e.esTypes)&&void 0!==t&&t.some((e=>e===Ue.AGGREGATE_METRIC_DOUBLE))?dr:n}})(r);t.push({id:n,schema:e})}})),t.sort(((e,t)=>e.id.localeCompare(t.id)))}),[h,e.fields,n]),b=Xr(y),{chartsVisible:j,pagination:_,resetPagination:x,setColumnCharts:v,setCcsWarning:O,setErrorMessage:w,setRowCountInfo:E,setStatus:S,setTableItems:T,sortingColumns:k,tableItems:A}=b;Object(L.useEffect)((()=>{x()}),[JSON.stringify([t,r])]);const M=k.reduce(((e,t)=>(e[t.id]={order:t.direction},e)),{}),{error:C,data:F,isError:I,isLoading:D}=sn({index:i,body:{fields:["*"],_source:!1,query:Nn(t)?u:p,from:_.pageIndex*_.pageSize,size:_.pageSize,...Object.keys(M).length>0?{sort:M}:{},...kt(n)?{runtime_mappings:n}:{}}},void 0!==h);Object(L.useEffect)((()=>{if(D&&!I)w(""),S(cr.LOADING);else if(null!==C)w(Object(Zr.a)(C)),S(cr.ERROR);else if(!D&&!I&&void 0!==F){const e=i.includes(":"),t=F.hits.hits.every((e=>void 0===e.fields)),n=F.hits.hits.map((e=>{var t;return hr(null!==(t=e.fields)&&void 0!==t?t:{})}));O(e&&t),E({rowCount:"number"==typeof F.hits.total?F.hits.total:F.hits.total.value,rowCountRelation:"number"==typeof F.hits.total?"eq":F.hits.total.relation}),T(n),S(cr.LOADED)}}),[C,I,D]);const q=new Set(e.fields.map((e=>e.name))),{error:$,data:P}=((e,t,n,r,s,a=5e3)=>{const{http:o}=Object(Ct.a)();return Object(B.useQuery)([Ve.r.GET_HISTOGRAMS_FOR_FIELDS,{dataViewTitle:e,fields:t,query:n,runtimeMappings:r,samplerShardSize:a}],(({signal:s})=>o.post(Object(Ve.u)(`field_histograms/${e}`),{body:JSON.stringify({query:n,fields:t,samplerShardSize:a,...void 0!==r?{runtimeMappings:r}:{}}),version:"1",signal:s})),{enabled:s})})(i,y.filter((e=>b.visibleColumns.includes(e.id))).map((e=>{const t=e.id;return((e,t)=>t.has(`${e}${At}`))(t,q)?{fieldName:`${t}.keyword`,type:Qr(void 0)}:{fieldName:t,type:Qr(e.schema)}})),Nn(t)?u:p,n,j);Object(L.useEffect)((()=>{null!==$&&((e,t)=>{t.addDanger(R.i18n.translate("xpack.ml.dataGrid.columnChart.ErrorMessageToast",{defaultMessage:"An error occurred fetching the histogram charts data: {error}",values:{error:Object(lr.a)(e)}}))})($,l)}),[$]),Object(L.useEffect)((()=>{P&&v(P.map((e=>{return{...e,...(t=e.id,n=q,t.endsWith(At)&&n.has(Mt(t))?{id:Mt(e.id)}:{})};var t,n})))}),[P]);const N=((e,t,n,r,s)=>Object(L.useMemo)((()=>({rowIndex:a,columnId:o,setCellProps:i})=>{const l=a-t.pageIndex*t.pageSize,c=n[l];if(void 0===c)return null;if(void 0===e)return null;const u=e.fields.getByName(o);let p;void 0!==u&&(p=e.getFormatterForField(u));const d=function(e){if(n.hasOwnProperty(l)){const t=n[l];return t.hasOwnProperty(e)?t[e]:e===`${r}.feature_importance`?((e,t,n=!1)=>{const r=e[`${t}.feature_importance`];return void 0===r?[]:r.map((e=>({feature_name:Array.isArray(e.feature_name)?e.feature_name[0]:e.feature_name,classes:Array.isArray(e.classes)?e.classes.map((e=>{const t=hr(e);return{importance:t.importance,class_name:gr(t.class_name,n)}})):e.classes,importance:Array.isArray(e.importance)?e.importance[0]:e.importance})))})(c,null!=r?r:"ml"):e===`${r}.top_classes`?((e,t)=>{const n=e[`${t}.top_classes`];return void 0===n?[]:n.map((e=>hr(e)))})(c,null!=r?r:"ml"):je(n[l],e,null)}return null}(o);return"function"==typeof s&&s(o,d,c,i),"object"==typeof d&&null!==d?JSON.stringify(d):null==d?null:void 0!==p?p.convert(d,"text"):"string"==typeof d||null===d?d:(null==u?void 0:u.type)===He.DATE?ir(1e3*zt()(d).unix()):"boolean"==typeof d?d?"true":"false":d}),[null==e?void 0:e.fields,t.pageIndex,t.pageSize,n]))(e,_,A);if(b.status===cr.LOADED&&void 0!==h&&Array.isArray(P)&&P.length>0&&void 0!==o.current){const e=window.performance.now()-o.current;o.current=void 0,function(e,t){e.reportEvent("performance_metric",t)}(a,{eventName:"transformLoadIndexPreview",duration:e})}return{...b,renderCellValue:N}};var ts=n(47),ns=n(81);function rs(e){return Object(ve.a)(e,["latest"])}const ss=(e,t,n,r,s,a)=>{const[o,i]=Object(L.useState)({}),l=Object.keys(o).filter((e=>"object"!==o[e].type));if(u=r,Object(ve.a)(u,["pivot"])){const e=Object.keys(r.pivot.group_by);l.sort(function(e){return(t,n)=>e.some((e=>e===t))&&e.some((e=>e===n))?t.localeCompare(n):e.some((e=>e===t))?-1:e.some((e=>e===n))?1:t.localeCompare(n)}(e))}else rs(r)&&l.sort((c=r.latest.sort,(e,t)=>c===e&&c===t?e.localeCompare(t):c===e?-1:c===t?1:e.localeCompare(t)));var c,u;const p=l.map((e=>{const t=o[e];return{id:e,schema:mr(null==t?void 0:t.type)}})),d=Xr(p),{pagination:g,resetPagination:f,setErrorMessage:h,setNoDataMessage:y,setRowCountInfo:b,setStatus:j,setTableItems:_,sortingColumns:x,tableItems:v}=d,O=Object(L.useMemo)((()=>Qn(e,t,r,s,a)),[e,t,r,s,a]),{error:w,data:E,isError:S,isLoading:T}=Object(ns.a)(O,n.isValid);if(Object(L.useEffect)((()=>{if(T)h(""),y(""),j(cr.LOADING);else if(S)h(Object(Zr.a)(w)),_([]),b({rowCount:0,rowCountRelation:Dr}),i({}),j(cr.ERROR);else if(!T&&!S&&void 0!==E){const e=E.preview.map(ts.getFlattenedObject),t=[...new Set(e.map(Object.keys).flat(1))];let n=Object.entries(E.generated_dest_index.mappings.properties).filter((([e])=>t.includes(e))).reduce(((e,[t,n])=>({...e,[t]:n})),{});n=function(e,t){const n=Object(m.difference)([...new Set(t.flatMap(Object.keys))],Object.keys(e));return{...e,...n.reduce(((e,n)=>{var r;const s=null!==(r=t.find((e=>void 0!==e[n])))&&void 0!==r?r:{};return e[n]={type:typeof s[n]},e}),{})}}(n,e),_(e),b({rowCount:e.length,rowCountRelation:Dr}),i(n),j(cr.LOADED),0===e.length?y(R.i18n.translate("xpack.transform.pivotPreview.PivotPreviewNoDataCalloutBody",{defaultMessage:"The preview request did not return any data. Please ensure the optional query returns data and that values exist for the field used by group-by and aggregation fields."})):y("")}}),[S,T,E]),Object(L.useEffect)((()=>{n.isValid||(_([]),b({rowCount:0,rowCountRelation:Dr}),y(n.errorMessage))}),[n.isValid]),Object(L.useEffect)((()=>{f()}),[JSON.stringify(t)]),x.length>0){const e=x.map((e=>{const t=v.find((t=>void 0!==fr(t,e.id)));return{...e,type:typeof fr(t,e.id)}}));v.sort((e=>{const t=(n,r,s=0)=>{const a=e[s];let o=fr(n,a.id),i=fr(r,a.id);if("number"===a.type){var l,c;if(o=null!==(l=o)&&void 0!==l?l:0,i=null!==(c=i)&&void 0!==c?c:0,o<i)return"asc"===a.direction?-1:1;if(o>i)return"asc"===a.direction?1:-1}if("string"===a.type){var u,p;if(o=null!==(u=o)&&void 0!==u?u:"",i=null!==(p=i)&&void 0!==p?p:"",-1===o.localeCompare(i))return"asc"===a.direction?-1:1;if(1===o.localeCompare(i))return"asc"===a.direction?1:-1}return s+1<e.length?t(n,r,s+1):0};return t})(e))}const k=v.slice(g.pageIndex*g.pageSize,(g.pageIndex+1)*g.pageSize),A=Object(L.useMemo)((()=>({rowIndex:e,columnId:t})=>{var n;const r=e-g.pageIndex*g.pageSize,s=k.hasOwnProperty(r)&&null!==(n=k[r][t])&&void 0!==n?n:null;return"object"==typeof s&&null!==s?JSON.stringify(s):null==s?null:[Ue.DATE,Ue.DATE_NANOS].includes(o[t].type)?ir(1e3*zt()(s).unix()):o[t].type===Ue.BOOLEAN?s?"true":"false":s}),[k,g.pageIndex,g.pageSize,o]);return{...d,chartsButtonVisible:!1,renderCellValue:A}},as=R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalTitle",{defaultMessage:"Unapplied changes"}),os=R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalTitle",{defaultMessage:"Edits will be lost"}),is=R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalBodyText",{defaultMessage:"The changes in the advanced editor haven't been applied yet. By disabling the advanced editor you will lose your edits."}),ls=R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalBodyText",{defaultMessage:"By switching back to the query bar you will lose your edits."}),cs=R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalConfirmButtonText",{defaultMessage:"Disable advanced editor"}),us=R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorSwitchModalConfirmButtonText",{defaultMessage:"Switch to query bar"}),ps=R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchModalCancelButtonText",{defaultMessage:"Cancel"}),ds=({onCancel:e,onConfirm:t,type:n})=>Object(G.jsx)(oe.EuiConfirmModal,{title:"pivot"===n?as:os,onCancel:e,onConfirm:t,cancelButtonText:ps,confirmButtonText:"pivot"===n?cs:us,buttonColor:"danger",defaultFocusedButton:"confirm"},Object(G.jsx)("p",null,"pivot"===n?is:ls)),ms=({advancedSourceEditor:{actions:{setAdvancedSourceEditorSwitchModalVisible:e,setSourceConfigUpdated:t,toggleAdvancedSourceEditor:n},state:{isAdvancedSourceEditorEnabled:r,isAdvancedSourceEditorSwitchModalVisible:s,sourceConfigUpdated:a,advancedEditorSourceConfigLastApplied:o,advancedEditorSourceConfig:i}},searchBar:{actions:{setSearchQuery:l}}})=>{const c=(e=!1)=>{!0===e&&(l("*"),t(!1)),n(e)};return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSwitch,{label:R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSourceConfigSwitchLabel",{defaultMessage:"Edit JSON query"}),checked:r,onChange:()=>{!r||!a&&i===o?c():e(!0)},"data-test-subj":"transformAdvancedQueryEditorSwitch"}),s&&Object(G.jsx)(ds,{onCancel:()=>e(!1),onConfirm:()=>{e(!1),c(!0)},type:"source"}))},gs=({searchBar:{actions:{setSearchString:e}},advancedSourceEditor:{actions:{setAdvancedEditorSourceConfig:t,setAdvancedSourceEditorApplyButtonEnabled:n},state:{advancedEditorSourceConfig:r,advancedEditorSourceConfigLastApplied:s}}})=>Object(G.jsx)("div",{"data-test-subj":"transformAdvancedRuntimeMappingsEditor"},Object(G.jsx)(wt.CodeEditor,{height:250,languageId:"json",onChange:r=>{if(e(void 0),t(r),s!==r)try{JSON.parse(r),n(!0)}catch(e){n(!1)}else n(!1)},options:{ariaLabel:R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorAriaLabel",{defaultMessage:"Advanced query editor"}),automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:r})),fs=({dataView:e,searchBar:t})=>{const{actions:{searchChangeHandler:n,searchSubmitHandler:r,setQueryErrorMessage:s},state:{queryErrorMessage:a,searchInput:o}}=t,{unifiedSearch:{ui:{QueryStringInput:i}}}=Object(Ct.a)();return Object(G.jsx)(oe.EuiInputPopover,{style:{maxWidth:"100%"},closePopover:()=>s(void 0),input:Object(G.jsx)(i,{bubbleSubmitEvent:!0,query:o,indexPatterns:[e],onChange:n,onSubmit:r,placeholder:o.language===Hn?R.i18n.translate("xpack.transform.stepDefineForm.queryPlaceholderKql",{defaultMessage:"e.g. {example}",values:{example:'method : "GET" or status : "404"'}}):R.i18n.translate("xpack.transform.stepDefineForm.queryPlaceholderLucene",{defaultMessage:"e.g. {example}",values:{example:"method:GET OR status:404"}}),disableAutoFocus:!0,dataTestSubj:"transformQueryInput",languageSwitcherPopoverAnchorPosition:"rightDown",appName:Ve.h.getI18nName()}),isOpen:(null==a?void 0:a.query)===o.query&&""!==(null==a?void 0:a.message)},Object(G.jsx)(oe.EuiCode,null,R.i18n.translate("xpack.transform.stepDefineForm.invalidKuerySyntaxErrorMessageQueryBar",{defaultMessage:"Invalid query: {queryErrorMessage}",values:{queryErrorMessage:null==a?void 0:a.message.split("\n")[0]}})))},hs=Object(L.memo)((({actions:{convertToJson:e,setAdvancedRuntimeMappingsConfig:t,setRuntimeMappingsEditorApplyButtonEnabled:n},state:{advancedEditorRuntimeMappingsLastApplied:r,advancedRuntimeMappingsConfig:s,xJsonMode:a}})=>Object(G.jsx)("div",{"data-test-subj":"transformAdvancedRuntimeMappingsEditor"},Object(G.jsx)(wt.CodeEditor,{height:250,languageId:"json",onChange:s=>{if(t(s),r!==s)try{const t=""===s,r=t?{}:JSON.parse(e(s));n(t||kt(r))}catch(e){n(!1)}else n(!1)},options:{ariaLabel:R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorAriaLabel",{defaultMessage:"Advanced pivot editor"}),automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:s}))),((e,t)=>Object(m.isEqual)(ys(e),ys(t))));function ys(e){return[e.state.advancedEditorRuntimeMappingsLastApplied,e.state.advancedRuntimeMappingsConfig]}const bs=R.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalTitle",{defaultMessage:"Edits will be lost"}),js=R.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalCancelButtonText",{defaultMessage:"Cancel"}),_s=R.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalConfirmButtonText",{defaultMessage:"Close editor"}),xs=R.i18n.translate("xpack.transform.stepDefineForm.runtimeEditorSwitchModalBodyText",{defaultMessage:"The changes in the advanced editor haven't been applied yet. By closing the editor you will lose your edits."}),vs=({onCancel:e,onConfirm:t})=>Object(G.jsx)(oe.EuiConfirmModal,{title:bs,onCancel:e,onConfirm:t,cancelButtonText:js,confirmButtonText:_s,buttonColor:"danger",defaultFocusedButton:"confirm"},Object(G.jsx)("p",null,xs)),Os=e=>{const{actions:{toggleRuntimeMappingsEditor:t,setRuntimeMappingsEditorSwitchModalVisible:n},state:{isRuntimeMappingsEditorEnabled:r,isRuntimeMappingsEditorSwitchModalVisible:s,advancedEditorRuntimeMappingsLastApplied:a,advancedRuntimeMappingsConfig:o}}=e,i=(e=!1)=>{t(e)};return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSwitch,{label:R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorRuntimeFieldsSwitchLabel",{defaultMessage:"Edit runtime fields"}),checked:r,onChange:()=>{r&&o!==a?n(!0):i()},"data-test-subj":"transformAdvancedRuntimeMappingsEditorSwitch"}),s&&Object(G.jsx)(vs,{onCancel:()=>n(!1),onConfirm:()=>{n(!1),i(!0)}}))},ws="220px",Es=R.i18n.translate("xpack.transform.indexPreview.copyRuntimeFieldsClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the runtime fields to the clipboard."}),Ss=e=>{const{actions:{applyRuntimeMappingsEditorChanges:t},state:{runtimeMappings:n,advancedRuntimeMappingsConfig:r,isRuntimeMappingsEditorApplyButtonEnabled:s,isRuntimeMappingsEditorEnabled:a}}=e.runtimeMappingsEditor,{actions:{deleteAggregation:o,deleteGroupBy:i,updateAggregation:l},state:{groupByList:c,aggList:u}}=e.pivotConfig;return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:R.i18n.translate("xpack.transform.stepDefineForm.runtimeFieldsLabel",{defaultMessage:"Runtime fields"})},Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"baseline",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!0},void 0!==n&&Object.keys(n).length>0?Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.runtimeFieldsListLabel",defaultMessage:"{runtimeFields}",values:{runtimeFields:Object.keys(n).join(",")}}):Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.noRuntimeMappingsLabel",defaultMessage:"No runtime field"}),a&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(hs,e.runtimeMappingsEditor))),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:{width:ws}},Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"xs",direction:"column",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(Os,e.runtimeMappingsEditor)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiCopy,{beforeMessage:Es,textToCopy:null!=r?r:""},(e=>Object(G.jsx)(oe.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":Es})))))),a&&Object(G.jsx)(oe.EuiFlexItem,{style:{width:ws}},Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiText,{size:"xs"},R.i18n.translate("xpack.transform.stepDefineForm.advancedRuntimeFieldsEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the runtime fields of the transform configuration."})),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiButton,{style:{width:"fit-content"},size:"s",fill:!0,onClick:()=>{const e=""===r?{}:JSON.parse(r),s=n,a=t=>(null==s?void 0:s.hasOwnProperty(t))&&!e.hasOwnProperty(t);t(),Object.keys(c).forEach((t=>{const n=c[t];Dn(n)&&null!=s&&s.hasOwnProperty(n.field)&&!e.hasOwnProperty(n.field)&&i(t)})),Object.keys(u).forEach((e=>{const t=u[e];if($n(t))if(Array.isArray(t.field)){const n=t.field.filter((e=>!a(e)));l(e,{...t,field:n})}else Object(he.a)(t.field)&&a(t.field)&&o(e)}))},disabled:!s,"data-test-subj":"transformRuntimeMappingsApplyButton"},R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorApplyButtonText",{defaultMessage:"Apply changes"}))))))),Object(G.jsx)(oe.EuiSpacer,{size:"s"}))},{useXJsonMode:Ts}=k.XJson,ks=new S;var As=n(35);const{useXJsonMode:Ms}=k.XJson,Cs=new S,Fs=({overrides:e,onChange:t,searchItems:n})=>{const r={...or(n),...e},{dataView:s}=n,[a,o]=Object(L.useState)(r.transformFunction),i=((e,t)=>{const n=Object(L.useMemo)((()=>void 0!==t.timeFieldName&&""!==t.timeFieldName),[t.timeFieldName]),r=Tr({timeRangeSelector:n,autoRefreshSelector:!1}),[s,a]=Object(L.useState)(e.isDatePickerApplyEnabled),[o,i]=Object(L.useState)();return Object(L.useEffect)((()=>{const e=()=>i(r.getTime()),t=Object(xe.merge)(r.getAutoRefreshFetch$(),r.getTimeUpdate$(),Sr).subscribe(e),n=r.getEnabledUpdated$().subscribe(e);return()=>{t.unsubscribe(),n.unsubscribe()}}),[]),{actions:{setDatePickerApplyEnabled:a},state:{isDatePickerApplyEnabled:s,hasValidTimeField:n,timeRange:o,timeRangeMs:Object(L.useMemo)((()=>{const e=r.getActiveBounds();if(void 0!==e&&void 0!==e.min&&void 0!==e.max)return{from:e.min.valueOf(),to:e.max.valueOf()}}),[o])}}})(r,s),l=((e,t)=>{const[n,r]=Object(L.useState)({query:e.searchString||"",language:e.searchLanguage}),[s,a]=Object(L.useState)(e.searchLanguage),[o,i]=Object(L.useState)(e.searchString),[l,c]=Object(L.useState)(e.searchQuery),[u,p]=Object(L.useState)(void 0),d=Vn(l);return{actions:{searchChangeHandler:e=>r(e),searchSubmitHandler:e=>{a(e.language),i(""!==e.query?e.query:void 0);try{switch(e.language){case Hn:return void c(Object(As.toElasticsearchQuery)(Object(As.fromKueryExpression)(e.query),t));case"lucene":return void c(Object(As.luceneStringToDsl)(e.query))}}catch(t){p({query:e.query,message:t.message})}},setQueryErrorMessage:p,setSearchInput:r,setSearchLanguage:a,setSearchQuery:c,setSearchString:i},state:{queryErrorMessage:u,transformConfigQuery:d,searchInput:n,searchLanguage:s,searchQuery:l,searchString:o}}})(r,s),c=rr(r,s),u=function(e,t,n){const[r,s]=Object(L.useState)({unique_key:e.unique_key,sort:e.sort}),{data:a}=Object(Ct.a)(),{uniqueKeyOptions:o,sortFieldOptions:i}=Object(L.useMemo)((()=>{const e=a.search.aggs.createAggConfigs(t,[{type:"terms"}]);return function(e,t,n){const r=t.aggs[0],s=r.type.params.find((e=>"field"===e.type)),a=s?s.getAvailableFields(r).filter((e=>void 0===e.runtimeField)):[],o=new Set(["_source","_type","_index","_id","_version","_score","_ignored"]),i=n?Object.entries(n).map((([e,t])=>({label:e,value:e,field:{id:e,type:t.type}}))):[],l=a.filter((e=>!o.has(e.name)&&!Je(e))).map((e=>{var t;return{label:e.displayName,value:e.name,field:{id:e.name,type:Array.isArray(e.esTypes)&&(null===(t=e.esTypes)||void 0===t?void 0:t.length)>0?e.esTypes[0]:"keyword"}}})),c=n?Object.entries(n).filter((([e,t])=>"date"===t.type)).map((([e,t])=>({label:e,value:e,field:{id:e,type:t.type}}))):[],u=e.fields.filter((e=>!o.has(e.name)&&e.sortable&&"date"===e.type)).map((e=>{var t;return{label:e.displayName,value:e.name,field:{id:e.name,type:Array.isArray(e.esTypes)&&(null===(t=e.esTypes)||void 0===t?void 0:t.length)>0?e.esTypes[0]:"keyword"}}})),p=(e,t)=>e.label.localeCompare(t.label);return{uniqueKeyOptions:[...l,...i].sort(p),sortFieldOptions:[...u,...c].sort(p)}}(t,e,n)}),[t,a.search.aggs,n]),l=Object(L.useCallback)((e=>s({...r,...e})),[r]),c=Object(L.useMemo)((()=>{const e=Yn.toAPIConfig(r);return e?{latest:e}:void 0}),[r]),u=Object(L.useMemo)((()=>Xn(null==c?void 0:c.latest)),[null==c?void 0:c.latest]);return{config:r,uniqueKeyOptions:o,sortFieldOptions:i,updateLatestFunctionConfig:l,validationStatus:u,requestPayload:c}}(r.latestConfig,s,null==r?void 0:r.runtimeMappings),p=Qn(s,l.state.transformConfigQuery,c.state.requestPayload,null==r?void 0:r.runtimeMappings),d=((e,t)=>{const n=JSON.stringify(t.pivot,null,2),[r,s]=Object(L.useState)(!1),[a,o]=Object(L.useState)(!1),[i,l]=Object(L.useState)(e.isAdvancedPivotEditorEnabled),[c,u]=Object(L.useState)(n),{convertToJson:p,setXJson:d,xJson:m}=Ts(n);return Object(L.useEffect)((()=>{d(n)}),[d,n]),{actions:{convertToJson:p,setAdvancedEditorConfig:d,setAdvancedEditorConfigLastApplied:u,setAdvancedEditorSwitchModalVisible:s,setAdvancedPivotEditorApplyButtonEnabled:o,setAdvancedPivotEditorEnabled:l,toggleAdvancedEditor:()=>{d(m),l(!i),o(!1),!1===i&&u(m)}},state:{advancedEditorConfig:m,advancedEditorConfigLastApplied:c,isAdvancedEditorSwitchModalVisible:r,isAdvancedPivotEditorApplyButtonEnabled:a,isAdvancedPivotEditorEnabled:i,xJsonMode:ks}}})(r,p),m=((e,t)=>{const n=JSON.stringify(t.source.query,null,2),[r,s]=Object(L.useState)(e.sourceConfigUpdated),[a,o]=Object(L.useState)(!1),[i,l]=Object(L.useState)(e.isAdvancedSourceEditorEnabled),[c,u]=Object(L.useState)(!1),[p,d]=Object(L.useState)(n),[m,g]=Object(L.useState)(n);return{actions:{applyAdvancedSourceEditorChanges:()=>{const e=JSON.parse(m),t=JSON.stringify(e,null,2);s(!0),g(t),d(t),u(!1)},setAdvancedSourceEditorApplyButtonEnabled:u,setAdvancedSourceEditorEnabled:l,setAdvancedEditorSourceConfig:g,setAdvancedEditorSourceConfigLastApplied:d,setAdvancedSourceEditorSwitchModalVisible:o,setSourceConfigUpdated:s,toggleAdvancedSourceEditor:(e=!1)=>{!0===e&&s(!1),!1===i&&d(m),l(!i),u(!1)}},state:{advancedEditorSourceConfig:m,advancedEditorSourceConfigLastApplied:p,isAdvancedSourceEditorApplyButtonEnabled:c,isAdvancedSourceEditorEnabled:i,isAdvancedSourceEditorSwitchModalVisible:a,sourceConfigUpdated:r}}})(r,p),g=(e=>{const t=JSON.stringify(e.runtimeMappings,null,2),[n,r]=Object(L.useState)(e.runtimeMappingsUpdated),[s,a]=Object(L.useState)(e.runtimeMappings),[o,i]=Object(L.useState)(!1),[l,c]=Object(L.useState)(e.isRuntimeMappingsEditorEnabled),[u,p]=Object(L.useState)(!1),[d,m]=Object(L.useState)(t),{convertToJson:g,setXJson:f,xJson:h}=Ms(null!=t?t:"");return{actions:{applyRuntimeMappingsEditorChanges:()=>{const e=""===h?{}:JSON.parse(h),t=JSON.stringify(e,null,2);r(!0),a(e),f(t),m(t),p(!1)},setRuntimeMappingsEditorApplyButtonEnabled:p,setRuntimeMappingsEditorEnabled:c,setAdvancedEditorRuntimeMappingsLastApplied:m,setRuntimeMappingsEditorSwitchModalVisible:i,setRuntimeMappingsUpdated:r,toggleRuntimeMappingsEditor:(e=!1)=>{!0===e&&(r(!1),f(d)),c(!l),p(!1)},convertToJson:g,setAdvancedRuntimeMappingsConfig:f},state:{advancedEditorRuntimeMappingsLastApplied:d,isRuntimeMappingsEditorApplyButtonEnabled:u,isRuntimeMappingsEditorEnabled:l,isRuntimeMappingsEditorSwitchModalVisible:o,runtimeMappingsUpdated:n,advancedRuntimeMappingsConfig:h,xJsonMode:Cs,runtimeMappings:s}}})(r);return Object(L.useEffect)((()=>{const e=g.state.runtimeMappings;if(!m.state.isAdvancedSourceEditorEnabled){const t=Qn(s,l.state.transformConfigQuery,c.state.requestPayload,e),n=JSON.stringify(t.source.query,null,2);m.actions.setAdvancedEditorSourceConfig(n)}t({transformFunction:a,latestConfig:u.config,aggList:c.state.aggList,groupByList:c.state.groupByList,isAdvancedPivotEditorEnabled:d.state.isAdvancedPivotEditorEnabled,isAdvancedSourceEditorEnabled:m.state.isAdvancedSourceEditorEnabled,isDatePickerApplyEnabled:i.state.isDatePickerApplyEnabled,searchLanguage:l.state.searchLanguage,searchString:l.state.searchString,searchQuery:l.state.searchQuery,sourceConfigUpdated:m.state.sourceConfigUpdated,valid:a===Ve.k.PIVOT?c.state.validationStatus.isValid:u.validationStatus.isValid,validationStatus:a===Ve.k.PIVOT?c.state.validationStatus:u.validationStatus,previewRequest:a===Ve.k.PIVOT?c.state.requestPayload:u.requestPayload,runtimeMappings:e,runtimeMappingsUpdated:g.state.runtimeMappingsUpdated,isRuntimeMappingsEditorEnabled:g.state.isRuntimeMappingsEditorEnabled,timeRangeMs:i.state.timeRangeMs})}),[JSON.stringify(d.state),JSON.stringify(m.state),JSON.stringify(i.state),c.state,JSON.stringify(l.state),JSON.stringify([g.state.runtimeMappings,g.state.runtimeMappingsUpdated,g.state.isRuntimeMappingsEditorEnabled]),u.config,a]),{transformFunction:a,setTransformFunction:o,advancedPivotEditor:d,advancedSourceEditor:m,runtimeMappingsEditor:g,datePicker:i,pivotConfig:c,latestFunctionConfig:u,searchBar:l}},Rs=({selectedFunction:e,onChange:t})=>{const n=[{name:Ve.k.PIVOT,helpText:R.i18n.translate("xpack.transform.stepDefineForm.pivotHelperText",{defaultMessage:"Aggregate and group your data."}),icon:"aggregate",title:R.i18n.translate("xpack.transform.stepDefineForm.pivotLabel",{defaultMessage:"Pivot"})},{name:Ve.k.LATEST,helpText:R.i18n.translate("xpack.transform.stepDefineForm.latestHelperText",{defaultMessage:"Keep track of your most recent data."}),icon:"clock",title:R.i18n.translate("xpack.transform.stepDefineForm.latestLabel",{defaultMessage:"Latest"})}];return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"m","data-test-subj":"transformFunctionSelection"},n.map((({helpText:n,icon:r,name:s,title:a})=>Object(G.jsx)(oe.EuiFlexItem,{key:s,style:{width:320},grow:!1},Object(G.jsx)(oe.EuiCard,{icon:Object(G.jsx)(oe.EuiIcon,{size:"xl",type:r}),title:a,description:n,"data-test-subj":`transformCreation-${s}-option${e===s?" selectedFunction":""}`,selectable:{onClick:()=>{e!==s&&t(s)},isSelected:e===s}}))))),Object(G.jsx)(oe.EuiSpacer,{size:"m"}))},Is=({copyToClipboard:e,copyToClipboardDescription:t,latestFunctionService:n})=>{var r;const{ml:{useFieldStatsTrigger:s}}=Object(Ct.a)(),{renderOption:a,closeFlyout:o}=s();return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.uniqueKeysLabel",defaultMessage:"Unique keys"}),"data-test-subj":"transformLatestFunctionForm"},Object(G.jsx)(oe.EuiComboBox,{fullWidth:!0,placeholder:R.i18n.translate("xpack.transform.stepDefineForm.uniqueKeysPlaceholder",{defaultMessage:"Add unique keys ..."}),options:n.uniqueKeyOptions,selectedOptions:null!==(r=n.config.unique_key)&&void 0!==r?r:[],onChange:e=>{n.updateLatestFunctionConfig({unique_key:e}),o()},isClearable:!1,"data-test-subj":"transformWizardUniqueKeysSelector",renderOption:a})),Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.sortLabel",defaultMessage:"Sort field"}),helpText:n.sortFieldOptions.length>0?R.i18n.translate("xpack.transform.stepDefineForm.sortHelpText",{defaultMessage:"Select the date field to be used to identify the latest document."}):void 0},Object(G.jsx)(P.a.Fragment,null,n.sortFieldOptions.length>0&&Object(G.jsx)(oe.EuiComboBox,{fullWidth:!0,placeholder:R.i18n.translate("xpack.transform.stepDefineForm.sortPlaceholder",{defaultMessage:"Add a date field ..."}),singleSelection:{asPlainText:!0},options:n.sortFieldOptions,selectedOptions:n.config.sort?[n.config.sort]:[],onChange:e=>{n.updateLatestFunctionConfig({sort:{value:e[0].value,label:e[0].label}}),o()},isClearable:!1,"data-test-subj":"transformWizardSortFieldSelector",renderOption:a}),0===n.sortFieldOptions.length&&Object(G.jsx)(oe.EuiCallOut,{color:"danger",iconType:"warning",size:"m"},Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.sortFieldOptionsEmptyError",defaultMessage:"No date fields are available to sort on. To use another field type, copy the configuration to the clipboard and continue creating the transform in the Console."})," ",Object(G.jsx)(oe.EuiCopy,{beforeMessage:t,textToCopy:e},(e=>Object(G.jsx)(oe.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":t}))))))))};var Ds=n(48),qs=n(120);const $s=Object(L.memo)((({actions:{convertToJson:e,setAdvancedEditorConfig:t,setAdvancedPivotEditorApplyButtonEnabled:n},state:{advancedEditorConfigLastApplied:r,advancedEditorConfig:s,xJsonMode:a}})=>Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorLabel",{defaultMessage:"Pivot configuration object"}),"data-test-subj":"transformAdvancedPivotEditor"},Object(G.jsx)(wt.CodeEditor,{height:250,languageId:"json",onChange:s=>{if(t(s),r!==s)try{JSON.parse(e(s)),n(!0)}catch(e){n(!1)}else n(!1)},options:{ariaLabel:R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorAriaLabel",{defaultMessage:"Advanced pivot editor"}),automaticLayout:!0,fontSize:12,scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"},value:s,editorDidMount:e=>{var t,n;const r=null===(t=e.getModel())||void 0===t?void 0:t.uri.toString();Ds.monaco.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!1,schemaValidation:"error",schemas:[...null!==(n=Ds.monaco.languages.json.jsonDefaults.diagnosticsOptions.schemas)&&void 0!==n?n:[],{uri:r,fileMatch:[r],schema:qs}]})}}))),((e,t)=>Object(m.isEqual)(Ls(e),Ls(t))));function Ls(e){return[e.state.advancedEditorConfigLastApplied,e.state.advancedEditorConfig]}const Ps=({advancedPivotEditor:{actions:{setAdvancedEditorSwitchModalVisible:e,toggleAdvancedEditor:t},state:{advancedEditorConfig:n,advancedEditorConfigLastApplied:r,isAdvancedEditorSwitchModalVisible:s,isAdvancedPivotEditorEnabled:a,isAdvancedPivotEditorApplyButtonEnabled:o}}})=>Object(G.jsx)(oe.EuiFormRow,null,Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"none"},Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiSwitch,{label:R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorSwitchLabel",{defaultMessage:"Edit JSON config"}),checked:a,onChange:()=>{!a||!o&&n===r?t():e(!0)},"data-test-subj":"transformAdvancedPivotEditorSwitch"}),s&&Object(G.jsx)(ds,{onCancel:()=>e(!1),onConfirm:()=>{e(!1),t()},type:"pivot"})))),Ns="220px",Bs=({applyPivotChangesHandler:e,copyToClipboardPivot:t,copyToClipboardPivotDescription:n,stepDefineForm:r})=>{const{esTransformPivot:s}=Object(le.a)(),{isAdvancedPivotEditorEnabled:a,isAdvancedPivotEditorApplyButtonEnabled:o}=r.advancedPivotEditor.state;return Object(G.jsx)(oe.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,null,!a&&Object(G.jsx)(Xt,r.pivotConfig),a&&Object(G.jsx)($s,r.advancedPivotEditor)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:{width:Ns}},Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"xs",direction:"column",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiFormRow,{hasEmptyLabelSpace:!0},Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(Ps,r)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiCopy,{beforeMessage:n,textToCopy:t},(e=>Object(G.jsx)(oe.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":n}))))))),a&&Object(G.jsx)(oe.EuiFlexItem,{style:{width:Ns}},Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiText,{size:"xs"},Object(G.jsx)(P.a.Fragment,null,R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the pivot configuration of the transform."})," ",Object(G.jsx)(oe.EuiLink,{href:s,target:"_blank"},R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpTextLink",{defaultMessage:"Learn more about available options."})))),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiButton,{style:{width:"fit-content"},size:"s",fill:!0,onClick:e,disabled:!o},R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorApplyButtonText",{defaultMessage:"Apply changes"}))))))},zs="220px",Vs=({title:e})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiTitle,{size:"xs"},Object(G.jsx)("span",null,e)),Object(G.jsx)(oe.EuiSpacer,{size:"s"})),Gs=P.a.memo((e=>{var t,n;const[r,s]=Ae("_g"),{searchItems:a}=e,{dataView:o}=a,i=Object(L.useMemo)((()=>o.getIndexPattern()),[o]),[l,c]=function(e,t){const{value:n,setValue:r,removeValue:s}=Object(L.useContext)(ye);return[Object(L.useMemo)((()=>{var r;return null!==(r=null==n?void 0:n[e])&&void 0!==r?r:t}),[n,e,t]),Object(L.useCallback)((t=>{Object(he.a)(t)?r(e,t):s(e)}),[r,s,e])]}("transform.frozenDataTierPreference",Or),u=Object(Ct.b)(),p=Fs(e),{advancedEditorConfig:d}=p.advancedPivotEditor.state,{advancedEditorSourceConfig:m,isAdvancedSourceEditorEnabled:g,isAdvancedSourceEditorApplyButtonEnabled:f}=p.advancedSourceEditor.state,{isDatePickerApplyEnabled:h,timeRangeMs:y}=p.datePicker.state,{transformConfigQuery:b}=p.searchBar.state,{runtimeMappings:j}=p.runtimeMappingsEditor.state,_=Object(Ct.a)(),{ml:{useFieldStatsFlyoutContext:x}}=_,v=x(),O={...es(o,b,j,y,(w=null==v?void 0:v.populatedFields,w instanceof Set?[...v.populatedFields]:[])),dataTestSubj:"transformIndexPreview",toastNotifications:u};var w;const{requestPayload:E,validationStatus:S}=p.transformFunction===Ve.k.PIVOT?p.pivotConfig.state:p.latestFunctionConfig,T=(k=b,`GET ${i}/_search\n${JSON.stringify({query:k},null,2)}\n`);var k;const A=R.i18n.translate("xpack.transform.indexPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the index preview to the clipboard."}),M=Qn(o,b,E,j,h?y:void 0),C=Le(M),F=R.i18n.translate("xpack.transform.pivotPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the transform preview to the clipboard."}),I={...ss(o,b,S,E,j,y),dataTestSubj:"transformPivotPreview",toastNotifications:u,...p.transformFunction===Ve.k.LATEST?{copyToClipboard:C,copyToClipboardDescription:F}:{}},{esQueryDsl:D}=Object(le.a)(),q=Object(L.useMemo)((()=>void 0!==o.timeFieldName&&""!==o.timeFieldName),[o.timeFieldName]),$=Tr({timeRangeSelector:void 0!==(null==o?void 0:o.timeFieldName),autoRefreshSelector:!1});return Object(L.useEffect)((()=>{void 0!==(null==r?void 0:r.time)&&$.setTime({from:r.time.from,to:r.time.to})}),[JSON.stringify(null==r?void 0:r.time),$]),Object(L.useEffect)((()=>{void 0!==(null==r?void 0:r.refreshInterval)&&$.setRefreshInterval(r.refreshInterval)}),[JSON.stringify(null==r?void 0:r.refreshInterval),$]),Object(L.useEffect)((()=>{const e=Object(xe.merge)($.getAutoRefreshFetch$(),$.getTimeUpdate$(),Sr).subscribe((()=>{s&&s({time:$.getTime(),refreshInterval:$.getRefreshInterval()})}));return()=>{e.unsubscribe()}})),Object(G.jsx)("div",{"data-test-subj":"transformStepDefineForm"},Object(G.jsx)(oe.EuiForm,null,Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0},Object(G.jsx)(Rs,{selectedFunction:p.transformFunction,onChange:p.setTransformFunction})),Object(G.jsx)(Vs,{title:"Source data"}),void 0===a.savedSearch&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineForm.dataViewLabel",{defaultMessage:"Data view"})},Object(G.jsx)("span",null,i)),q&&Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:Object(G.jsx)(P.a.Fragment,null,R.i18n.translate("xpack.transform.stepDefineForm.datePickerLabel",{defaultMessage:"Time range"})," ",Object(G.jsx)(oe.EuiIconTip,{content:R.i18n.translate("xpack.transform.stepDefineForm.datePickerIconTipContent",{defaultMessage:"The time range is applied to previews only and will not be part of the final transform configuration."})}))},Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"flexStart",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(Mr,{isAutoRefreshOnly:!q,showRefresh:!q,width:"full"})),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:{width:zs}},!1,Object(G.jsx)(Ir,{frozenDataPreference:l,setFrozenDataPreference:c,dataView:o,query:void 0,disabled:!1,timefilter:$})))),Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:void 0!==(null==a||null===(t=a.savedSearch)||void 0===t?void 0:t.id)?R.i18n.translate("xpack.transform.stepDefineForm.savedSearchLabel",{defaultMessage:"Saved search"}):R.i18n.translate("xpack.transform.stepDefineForm.searchFilterLabel",{defaultMessage:"Search filter"})},Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"flexStart",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,null,void 0===a.savedSearch&&Object(G.jsx)(P.a.Fragment,null,!g&&Object(G.jsx)(fs,{dataView:o,searchBar:p.searchBar}),g&&Object(G.jsx)(gs,p)),void 0!==(null==a||null===(n=a.savedSearch)||void 0===n?void 0:n.id)&&Object(G.jsx)("span",null,a.savedSearch.title)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:{width:zs}},Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"xs",direction:"column",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},void 0===a.savedSearch&&Object(G.jsx)(ms,p)),Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiCopy,{beforeMessage:A,textToCopy:T},(e=>Object(G.jsx)(oe.EuiButtonIcon,{onClick:e,iconType:"copyClipboard","aria-label":A})))))),g&&Object(G.jsx)(oe.EuiFlexItem,{style:{width:zs}},Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiText,{size:"xs"},R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorHelpText",{defaultMessage:"The advanced editor allows you to edit the source query clause of the transform configuration."}),Object(G.jsx)(oe.EuiLink,{href:D,target:"_blank"},R.i18n.translate("xpack.transform.stepDefineForm.advancedEditorHelpTextLink",{defaultMessage:"Learn more about available options."}))),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiButton,{style:{width:"fit-content"},size:"s",fill:!0,onClick:()=>{const e=JSON.parse(m);p.searchBar.actions.setSearchQuery(e),p.advancedSourceEditor.actions.applyAdvancedSourceEditorChanges()},disabled:!f},R.i18n.translate("xpack.transform.stepDefineForm.advancedSourceEditorApplyButtonText",{defaultMessage:"Apply changes"})))))),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(Ss,p),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:R.i18n.translate("xpack.transform.stepDefineForm.dataGridLabel",{defaultMessage:"Source documents"})},Object(G.jsx)(xr,O))))),Object(G.jsx)(Vs,{title:"Transform configuration"}),Object(G.jsx)(oe.EuiForm,null,p.transformFunction===Ve.k.PIVOT?Object(G.jsx)(Bs,{applyPivotChangesHandler:()=>{const e=JSON.parse(p.advancedPivotEditor.actions.convertToJson(d)),t={};void 0!==e&&void 0!==e.group_by&&Object.entries(e.group_by).forEach((e=>{const n=e[0],r=e[1],s=Object.keys(r)[0];t[n]={...r[s],agg:s,aggName:n,dropDownName:""}})),p.pivotConfig.actions.setGroupByList(t);const n={};void 0!==e&&void 0!==e.aggregations&&Object.entries(e.aggregations).forEach((e=>{const t=e[0],r=e[1];n[t]=wn(r,t)})),p.pivotConfig.actions.setAggList(n),p.advancedPivotEditor.actions.setAdvancedEditorConfigLastApplied(d),p.advancedPivotEditor.actions.setAdvancedPivotEditorApplyButtonEnabled(!1)},copyToClipboardPivot:C,copyToClipboardPivotDescription:F,stepDefineForm:p}):null,p.transformFunction===Ve.k.LATEST?Object(G.jsx)(Is,{copyToClipboard:C,copyToClipboardDescription:F,latestFunctionService:p.latestFunctionConfig}):null),Object(G.jsx)(oe.EuiSpacer,{size:"m"}),(p.transformFunction!==Ve.k.LATEST||p.latestFunctionConfig.sortFieldOptions.length>0)&&Object(G.jsx)(oe.EuiFormRow,{fullWidth:!0,label:R.i18n.translate("xpack.transform.stepDefineForm.previewLabel",{defaultMessage:"Preview"})},Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(xr,I),Object(G.jsx)(oe.EuiSpacer,{size:"m"}))))})),Qs=({formState:{isDatePickerApplyEnabled:e,timeRangeMs:t,runtimeMappings:n,searchString:r,searchQuery:s,groupByList:a,aggList:o,transformFunction:i,previewRequest:l,validationStatus:c},searchItems:u})=>{const p=Object(Ct.b)(),d=Vn(s),m=Qn(u.dataView,d,l,n,e?t:void 0),g=ss(u.dataView,d,c,l,n,e?t:void 0),f=void 0===r&&!Nn(d)&&!Object(Pn.a)(d);let h=[],y="";return rs(m)&&(h=m.latest.unique_key,y=m.latest.sort),Object(G.jsx)("div",{"data-test-subj":"transformStepDefineSummary"},Object(G.jsx)(oe.EuiForm,null,void 0===u.savedSearch&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.dataViewLabel",{defaultMessage:"Data view"})},Object(G.jsx)("span",null,u.dataView.getIndexPattern())),e&&t&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.timeRangeLabel",{defaultMessage:"Time range"})},Object(G.jsx)("span",null,ir(t.from)," -"," ",ir(t.to))),"string"==typeof r&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.queryLabel",{defaultMessage:"Query"})},Object(G.jsx)("span",null,r)),f&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.queryCodeBlockLabel",{defaultMessage:"Query"})},Object(G.jsx)(oe.EuiCodeBlock,{language:"js",fontSize:"s",paddingSize:"s",color:"light",overflowHeight:300,isCopyable:!0},JSON.stringify(d,null,2)))),void 0!==u.savedSearch&&void 0!==u.savedSearch.id&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.savedSearchLabel",{defaultMessage:"Saved search"})},Object(G.jsx)("span",null,u.savedSearch.title)),i===Ve.k.PIVOT?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.groupByLabel",{defaultMessage:"Group by"})},Object(G.jsx)(Kt,{list:a})),Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDefineSummary.aggregationsLabel",{defaultMessage:"Aggregations"})},Object(G.jsx)(Nt,{list:o}))):Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.uniqueKeysLabel",defaultMessage:"Unique keys"})},Object(G.jsx)(P.a.Fragment,null,h.map((e=>Object(G.jsx)(oe.EuiBadge,{color:"hollow",key:e},e))))),Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDefineForm.sortLabel",defaultMessage:"Sort field"})},Object(G.jsx)(oe.EuiText,null,y))),Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(xr,H()({},g,{copyToClipboard:Le(m),copyToClipboardDescription:R.i18n.translate("xpack.transform.pivotPreview.copyClipboardTooltip",{defaultMessage:"Copy Dev Console statement of the transform preview to the clipboard."}),dataTestSubj:"transformPivotPreview",title:R.i18n.translate("xpack.transform.pivotPreview.transformPreviewTitle",{defaultMessage:"Transform preview"}),toastNotifications:p}))))};var Us=n(39);const Hs=()=>Object(G.jsx)(z.Redirect,{to:`/${re.HOME}`}),Ws=({savedObjectId:e})=>Object(G.jsx)(z.Redirect,{push:!0,to:`/${re.CREATE_TRANSFORM}/${e}`});var Js=n(61),Ks=n(2);const Ys=({initialAlert:e,ruleParams:t,onCloseFlyout:n,onSave:r})=>{const{triggersActionsUi:s}=Object(Ct.a)(),a=Object(L.useMemo)((()=>{if(!s)return;const a={onClose:()=>{n()},onSave:async()=>{r&&r()}};return e?s.getEditRuleFlyout({...a,initialRule:{...e,ruleTypeId:e.alertTypeId}}):s.getAddRuleFlyout({...a,consumer:"stackAlerts",canChangeTrigger:!1,ruleTypeId:Ks.TRANSFORM_RULE_TYPE.TRANSFORM_HEALTH,metadata:{},initialValues:{params:t}})}),[s,e,t,n,r]);return Object(G.jsx)(P.a.Fragment,null,a)},Xs=Object(m.memoize)((function(){const e=new xe.BehaviorSubject({editAlertRule:null,createAlertRule:null});return{editAlertRule$:e.pipe(Object(xe.pluck)("editAlertRule")),createAlertRule$:e.pipe(Object(xe.pluck)("createAlertRule")),setEditAlertRule:t=>{e.next({createAlertRule:null,editAlertRule:t})},setCreateAlertRule:t=>{e.next({createAlertRule:{includeTransforms:[t]},editAlertRule:null})},hideAlertFlyout:()=>{e.next({createAlertRule:null,editAlertRule:null})}}})),Zs=Object(L.createContext)(Xs());function ea(){return Object(L.useContext)(Zs)}const ta=()=>{const{editAlertRule$:e,createAlertRule$:t,hideAlertFlyout:n}=ea(),r=Er()(e),s=Er()(t);return r||s?Object(G.jsx)(Ys,{initialAlert:r,ruleParams:s,onCloseFlyout:n}):null};function na(){return{created:!1,started:!1,dataViewId:void 0}}const ra=P.a.memo((({createDataView:e,transformConfig:t,transformId:n,onChange:r,overrides:s,timeFieldName:a})=>{var o,i;const l={created:!1,started:!1,dataViewId:void 0,...s},[c,u]=Object(L.useState)(!1),[p,d]=Object(L.useState)(!1),[m,g]=Object(L.useState)(l.created),[f,h]=Object(L.useState)(l.started),[y,b]=Object(L.useState)(!1),[j,_]=Object(L.useState)(l.dataViewId),[x,v]=Object(L.useState)(void 0),[O,w]=Object(L.useState)(),E=Object(Ct.b)(),{application:S,share:T,...k}=Object(Ct.a)(),A=null!==(o=null===(i=S.capabilities.discover)||void 0===i?void 0:i.show)&&void 0!==o&&o;Object(L.useEffect)((()=>{let e=!1;return r({created:m,started:f,dataViewId:j}),!0===f&&void 0!==j&&A&&(async()=>{const t=T.url.locators.get(Us.DISCOVER_APP_LOCATOR);if(!t)return;const n=await t.getUrl({indexPatternId:j});e||w(n)})(),()=>{e=!0}}),[m,f,j]);const M=Object(ie.r)(),C=Object(ie.a)();function F(r=!1){d(!0),C({transformId:n,transformConfig:t,createDataView:e,timeFieldName:a},{onError:()=>g(!1),onSuccess:e=>{g(!0),1===e.dataViewsCreated.length&&_(e.dataViewsCreated[0].id),r&&I()},onSettled:()=>d(!1)})}function I(){d(!0),M([{id:n}],{onError:()=>h(!1),onSuccess:e=>{var t;return h(!0===(null===(t=e[n])||void 0===t?void 0:t.success))},onSettled:()=>d(!1)})}const D=void 0===t.sync;Object(L.useEffect)((()=>{!1===p&&!0===f&&void 0===x&&D&&v(0)}),[p,f,x,D]);const q=D&&"number"==typeof x&&x<100,$=!!q&&Ve.i,{data:N}=Object(ie.l)(n,!1,q,$);Object(L.useEffect)((()=>{if(void 0!==N)if(N&&Array.isArray(N.transforms)&&N.transforms.length>0){const e=Ge({id:n,config:{...t,id:n},stats:N.transforms[0]})||0;v(e)}else E.addDanger({title:R.i18n.translate("xpack.transform.stepCreateForm.progressErrorMessage",{defaultMessage:"An error occurred getting the progress percentage:"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(N)}),k)})}),[N,E,t,n,k]);const B={height:"90px",maxWidth:"800px"},z={width:"200px"},V={width:"300px"};return c?Object(G.jsx)(Hs,null):Object(G.jsx)("div",{"data-test-subj":"transformStepCreateForm"},Object(G.jsx)(oe.EuiForm,null,!m&&Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",style:B},Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:z},Object(G.jsx)(oe.EuiButton,{fill:!0,isDisabled:p||m&&f,onClick:()=>F(!0),"data-test-subj":"transformWizardCreateAndStartButton"},R.i18n.translate("xpack.transform.stepCreateForm.createAndStartTransformButton",{defaultMessage:"Create and start"}))),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiText,{color:"subdued",size:"s"},R.i18n.translate("xpack.transform.stepCreateForm.createAndStartTransformDescription",{defaultMessage:"Creates and starts the transform. A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. After the transform is started, you will be offered options to continue exploring the transform."})))),m&&Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",style:B},Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:z},Object(G.jsx)(oe.EuiButton,{fill:!0,isDisabled:p||m&&f,onClick:I,"data-test-subj":"transformWizardStartButton"},R.i18n.translate("xpack.transform.stepCreateForm.startTransformButton",{defaultMessage:"Start"}))),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiText,{color:"subdued",size:"s"},R.i18n.translate("xpack.transform.stepCreateForm.startTransformDescription",{defaultMessage:"Starts the transform. A transform will increase search and indexing load in your cluster. Please stop the transform if excessive load is experienced. After the transform is started, you will be offered options to continue exploring the transform."})))),Kn(t)&&m?Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",style:B},Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:z},Object(G.jsx)(oe.EuiButton,{fill:!0,isDisabled:p,onClick:b.bind(null,!0),"data-test-subj":"transformWizardCreateAlertButton"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepCreateForm.createAlertRuleButton",defaultMessage:"Create alert rule"}))),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiText,{color:"subdued",size:"s"},R.i18n.translate("xpack.transform.stepCreateForm.createAlertRuleDescription",{defaultMessage:"Opens a wizard to create an alert rule for monitoring transform health."})))):null,Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",style:B},Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:z},Object(G.jsx)(oe.EuiButton,{isDisabled:p||m,onClick:()=>F(),"data-test-subj":"transformWizardCreateButton"},R.i18n.translate("xpack.transform.stepCreateForm.createTransformButton",{defaultMessage:"Create"}))),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiText,{color:"subdued",size:"s"},R.i18n.translate("xpack.transform.stepCreateForm.createTransformDescription",{defaultMessage:"Creates the transform without starting it. You will be able to start the transform later by returning to the transforms list."})))),Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",style:B},Object(G.jsx)(oe.EuiFlexItem,{grow:!1,style:z},Object(G.jsx)(oe.EuiCopy,{textToCopy:`PUT _transform/${n}\n${JSON.stringify(t,null,2)}\n\n`},(e=>Object(G.jsx)(oe.EuiButton,{onClick:e,style:{width:"100%"},"data-test-subj":"transformWizardCopyToClipboardButton"},R.i18n.translate("xpack.transform.stepCreateForm.copyTransformConfigToClipboardButton",{defaultMessage:"Copy to clipboard"}))))),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiText,{color:"subdued",size:"s"},R.i18n.translate("xpack.transform.stepCreateForm.copyTransformConfigToClipboardDescription",{defaultMessage:"Copies to the clipboard the Kibana Dev Console command for creating the transform."})))),void 0!==x&&D&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiText,{size:"xs"},Object(G.jsx)("strong",null,R.i18n.translate("xpack.transform.stepCreateForm.progressTitle",{defaultMessage:"Progress"}))),Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"xs"},Object(G.jsx)(oe.EuiFlexItem,{style:{width:"400px"},grow:!1},Object(G.jsx)(oe.EuiProgress,{size:"l",color:"primary",value:x,max:100,"data-test-subj":"transformWizardProgressBar"})),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiText,{size:"xs"},x,"%")))),m&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiHorizontalRule,null),Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"l"},Object(G.jsx)(oe.EuiFlexItem,{style:V,grow:!1},Object(G.jsx)(oe.EuiCard,{icon:Object(G.jsx)(oe.EuiIcon,{size:"xxl",type:"list"}),title:R.i18n.translate("xpack.transform.stepCreateForm.transformListCardTitle",{defaultMessage:"Transforms"}),description:R.i18n.translate("xpack.transform.stepCreateForm.transformListCardDescription",{defaultMessage:"Return to the transform management page."}),onClick:()=>u(!0),"data-test-subj":"transformWizardCardManagement"})),!0===f&&!0===e&&void 0===j&&Object(G.jsx)(oe.EuiFlexItem,{style:V,grow:!1},Object(G.jsx)(oe.EuiPanel,{style:{position:"relative"}},Object(G.jsx)(oe.EuiProgress,{size:"xs",color:"primary",position:"absolute"}),Object(G.jsx)(oe.EuiText,{color:"subdued",size:"s"},Object(G.jsx)("p",null,R.i18n.translate("xpack.transform.stepCreateForm.creatingDataViewMessage",{defaultMessage:"Creating Kibana data view ..."}))))),A&&void 0!==O&&Object(G.jsx)(oe.EuiFlexItem,{style:V,grow:!1},Object(G.jsx)(oe.EuiCard,{icon:Object(G.jsx)(oe.EuiIcon,{size:"xxl",type:"discoverApp"}),title:R.i18n.translate("xpack.transform.stepCreateForm.discoverCardTitle",{defaultMessage:"Discover"}),description:R.i18n.translate("xpack.transform.stepCreateForm.discoverCardDescription",{defaultMessage:"Use Discover to explore the transform."}),href:O,"data-test-subj":"transformWizardCardDiscover"}))))),y?Object(G.jsx)(Ys,{ruleParams:{includeTransforms:[n]},onCloseFlyout:b.bind(null,!1)}):null)})),sa=P.a.memo((()=>null));function aa(){return{continuousModeDateField:"",continuousModeDelay:Ve.b,createDataView:!0,isContinuousModeEnabled:!1,isRetentionPolicyEnabled:!1,retentionPolicyDateField:"",retentionPolicyMaxAge:"",transformId:"",transformDescription:"",transformFrequency:Ve.e,transformSettingsMaxPageSearchSize:Ve.g,transformSettingsDocsPerSecond:Ve.f,transformSettingsNumFailureRetries:void 0,destinationIndex:"",destinationIngestPipeline:"",touched:!1,valid:!1,dataViewTimeField:void 0}}const oa=({canCreateDataView:e,createDataView:t,setCreateDataView:n})=>Object(G.jsx)(oe.EuiSwitch,{name:"mlCreateDataView",disabled:!1===e,label:R.i18n.translate("xpack.ml.dataViewUtils.createDataViewSwitchLabel",{defaultMessage:"Create data view"}),checked:!0===t,onChange:()=>n(!t),"data-test-subj":"mlCreateDataViewSwitch"}),ia=({dataViewAvailableTimeFields:e,dataViewTimeField:t,onTimeFieldChanged:n})=>{const r={text:R.i18n.translate("xpack.ml.dataViewUtils.noTimeFieldOptionLabel",{defaultMessage:"I don't want to use the time field option"}),value:void 0};return Object(G.jsx)(oe.EuiFormRow,{label:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.dataViewUtils.dataViewTimeFieldLabel",defaultMessage:"Time field for data view"}),helpText:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.ml.dataViewUtils.dataViewTimeFieldHelpText",defaultMessage:"Select a primary time field for use with the global time filter."})},Object(G.jsx)(oe.EuiSelect,{options:[...e.map((e=>({text:e}))),{disabled:!0,text:"───",value:""},r],value:t,onChange:n,"data-test-subj":"mlDataViewTimeFieldSelect"}))},la=({canCreateDataView:e,createDataView:t,dataViewTitleExists:n,setCreateDataView:r,dataViewAvailableTimeFields:s,dataViewTimeField:a,onTimeFieldChanged:o})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{isInvalid:t&&n||!1===e,error:[...!1===e?[Object(G.jsx)(oe.EuiText,{size:"xs",color:"warning"},R.i18n.translate("xpack.ml.dataViewUtils.dataViewPermissionWarning",{defaultMessage:"You need permission to create data views."}))]:[],...t&&n?[R.i18n.translate("xpack.ml.dataViewUtils.dataViewTitleError",{defaultMessage:"A data view with this title already exists."})]:[]]},Object(G.jsx)(oa,{canCreateDataView:e,createDataView:t,setCreateDataView:r})),t&&!n&&s.length>0&&Object(G.jsx)(ia,{dataViewAvailableTimeFields:s,dataViewTimeField:a,onTimeFieldChanged:o})),ca=({destIndexSameAsId:e,isJobCreated:t,setDestIndexSameAsId:n,label:r})=>Object(G.jsx)(oe.EuiSwitch,{disabled:t,name:"mlCreationWizardUtilsJobIdAsDestIndexName",label:r,checked:!0===e,onChange:()=>n(!e),"data-test-subj":"mlCreationWizardUtilsJobIdAsDestIndexNameSwitch"}),ua=({createIndexLink:e,destinationIndex:t,destinationIndexNameEmpty:n,destinationIndexNameExists:r,destinationIndexNameValid:s,destIndexSameAsId:a,fullWidth:o=!0,indexNameExistsMessage:i,isJobCreated:l,onDestinationIndexChange:c,setDestIndexSameAsId:u,switchLabel:p})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{fullWidth:o,helpText:!0===a&&r&&i},Object(G.jsx)(ca,{destIndexSameAsId:a,isJobCreated:l,setDestIndexSameAsId:u,label:p})),!1===a&&Object(G.jsx)(oe.EuiFormRow,{fullWidth:o,label:R.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexLabel",{defaultMessage:"Destination index"}),isInvalid:n||!n&&!s,helpText:r&&i,error:!n&&!s&&[Object(G.jsx)(P.a.Fragment,null,R.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexInvalidError",{defaultMessage:"Invalid destination index name."}),Object(G.jsx)("br",null),Object(G.jsx)(oe.EuiLink,{href:e,target:"_blank"},R.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexInvalidErrorLink",{defaultMessage:"Learn more about index name limitations."})))]},Object(G.jsx)(oe.EuiFieldText,{fullWidth:o,disabled:l,placeholder:"destination index",value:t,onChange:e=>c(e.target.value),"aria-label":R.i18n.translate("xpack.ml.creationWizardUtils.destinationIndexInputAriaLabel",{defaultMessage:"Choose a unique destination index name."}),isInvalid:!n&&!s,"data-test-subj":"mlCreationWizardUtilsDestinationIndexInput"}))),pa=window;const da=P.a.memo((({overrides:e={},onChange:t,searchItems:n,stepDefineState:r})=>{var s,a,o;const{application:i,...l}=Object(Ct.a)(),{capabilities:c}=i,u=Object(Ct.b)(),{esIndicesCreateIndex:p}=Object(ie.d)(),d={...aa(),...e},[m,g]=Object(L.useState)(d.transformId),[f,h]=Object(L.useState)(d.transformDescription),[y,b]=Object(L.useState)(d.destinationIndex),[j,_]=Object(L.useState)(void 0!==y&&y===m),[x,v]=Object(L.useState)(d.destinationIngestPipeline),O=Object(L.useMemo)((()=>{var e,t;return!0===(null===(e=c.savedObjectsManagement)||void 0===e?void 0:e.edit)||!0===(null===(t=c.indexPatterns)||void 0===t?void 0:t.save)}),[c]),[w,E]=Object(L.useState)(!1!==O&&d.createDataView),[S,T]=Object(L.useState)(),k=Object(L.useMemo)((()=>{const{searchQuery:e,previewRequest:t}=r,s=Vn(e);return Qn(n.dataView,s,t,r.runtimeMappings)}),[n.dataView,r]),{error:A,data:M}=Object(ie.n)(k),C=Object(L.useMemo)((()=>{if(!M)return[];const e=M.generated_dest_index.mappings.properties;return Object.keys(e).filter((t=>"date"===e[t].type))}),[M]);Object(L.useEffect)((function(){T(C[0])}),[C]);const F=P.a.useCallback((e=>{const t=e.target.value;if(""===t)return;const n=C.find((e=>e===t));T(n)}),[T,C]),{error:I,data:{transformIds:D}}=Object(ie.m)();Object(L.useEffect)((()=>{null!==I&&u.addDanger({title:R.i18n.translate("xpack.transform.stepDetailsForm.errorGettingTransformList",{defaultMessage:"An error occurred getting the existing transform IDs:"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(I)}),l)})}),[I]),Object(L.useEffect)((()=>{null!==A&&u.addDanger({title:R.i18n.translate("xpack.transform.stepDetailsForm.errorGettingTransformPreview",{defaultMessage:"An error occurred fetching the transform preview"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(A)}),l)})}),[A]);const{error:q,data:$}=Object(ie.g)(),N=null!==(s=null==$?void 0:$.map((e=>e.name)))&&void 0!==s?s:[];Object(L.useEffect)((()=>{null!==q&&u.addDanger({title:R.i18n.translate("xpack.transform.stepDetailsForm.errorGettingIndexNames",{defaultMessage:"An error occurred getting the existing index names:"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(q)}),l)})}),[q]);const{error:B,data:z}=Object(ie.h)(),V=null!==(a=null==z?void 0:z.map((({name:e})=>e)))&&void 0!==a?a:[];Object(L.useEffect)((()=>{null!==B&&u.addDanger({title:R.i18n.translate("xpack.transform.stepDetailsForm.errorGettingIngestPipelines",{defaultMessage:"An error occurred getting the existing ingest pipeline names:"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(B)}),l)})}),[B]);const{error:Q,data:U}=Object(ie.e)();Object(L.useEffect)((()=>{null!==Q&&u.addDanger({title:R.i18n.translate("xpack.transform.stepDetailsForm.errorGettingDataViewTitles",{defaultMessage:"An error occurred getting the existing data view titles:"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(Q)}),l)})}),[Q]);const H=n.dataView.fields.filter((e=>e.type===He.DATE)).map((e=>e.name)).sort(),W=H.length>0,[J,K]=Object(L.useState)(d.isContinuousModeEnabled),[Y,X]=Object(L.useState)(W?H[0]:""),[Z,ee]=Object(L.useState)(d.continuousModeDelay),te=null!==Z.match(/^(0|\d*(nanos|micros|ms|s|m|h|d))$/),ne=C.length>0,[re,se]=Object(L.useState)(d.isRetentionPolicyEnabled),[le,ce]=Object(L.useState)(ne?d.retentionPolicyDateField:""),[ue,pe]=Object(L.useState)(d.retentionPolicyMaxAge),de=""===ue,me=ft(ue);Object(L.useEffect)((()=>{if(re||(ce(ne?C[0]:""),pe("")),ne&&re&&""===le){const e=C.find((e=>"@timestamp"===e));ce(null!=e?e:C[0])}}),[re,ne,C]);const ge=D.some((e=>m===e)),fe=""===m,he=Object(Pe.b)(m),ye=N.some((e=>y===e)),be=""===y,je=(Ie=y)===Ie.toLowerCase()&&/^[^\*\\/\?"<>|\s,#:]+$/.test(Ie)&&/^[^-_\+]+$/.test(Ie.charAt(0))&&"."!==Ie&&".."!==Ie&&function(e){return!(pa.TextEncoder&&new pa.TextEncoder("utf-8").encode(e).length>255)&&e.length<=255}(Ie),_e=null!==(o=null==U?void 0:U.some((e=>y===e)))&&void 0!==o&&o,[xe,ve]=Object(L.useState)(d.transformFrequency),Oe=(e=>{if("string"!=typeof e||null===e)return!1;const t=e.match(/[a-z]+|[^a-z]+/gi);if(null===t||Array.isArray(t)&&2!==t.length)return!1;const n=+t[0],r=t[1];return!(isNaN(n)||!Number.isInteger(n)||0===n)&&lt({number:n,timeUnit:r})})(xe),[we,Ee]=Object(L.useState)(d.transformSettingsMaxPageSearchSize),[Se]=Object(L.useState)(d.transformSettingsDocsPerSecond),Te=_t(we),ke=0===Te.length,[Ae,Me]=Object(L.useState)(d.transformSettingsNumFailureRetries),Ce=void 0===Ae||"-"===Ae||0===(Re=Ae,null===pt(+Re)?[]:[ut]).length,Fe=!fe&&he&&!ge&&Oe&&ke&&!be&&je&&(!_e||!w)&&(!W||W&&te)&&(!ne||!re||ne&&re&&!de&&me);var Re,Ie;return Object(L.useEffect)((()=>{t({continuousModeDateField:Y,continuousModeDelay:Z,createDataView:w,isContinuousModeEnabled:J,isRetentionPolicyEnabled:re,retentionPolicyDateField:le,retentionPolicyMaxAge:ue,transformId:m,transformDescription:f,transformFrequency:xe,transformSettingsMaxPageSearchSize:we,transformSettingsDocsPerSecond:Se,transformSettingsNumFailureRetries:void 0===Ae||""===Ae?void 0:"number"==typeof Ae?Ae:parseInt(Ae,10),destinationIndex:y,destinationIngestPipeline:x,touched:!0,valid:Fe,dataViewTimeField:S,_meta:d._meta})}),[Y,Z,w,J,re,le,ue,m,f,xe,we,Ae,y,x,Fe,S]),Object(L.useEffect)((()=>{!0===j&&!fe&&he&&b(m)}),[j,m]),Object(G.jsx)("div",{"data-test-subj":"transformStepDetailsForm"},Object(G.jsx)(oe.EuiForm,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.transformIdLabel",{defaultMessage:"Transform ID"}),isInvalid:!fe&&!he||ge,error:[...fe||he?[]:[R.i18n.translate("xpack.transform.stepDetailsForm.transformIdInvalidError",{defaultMessage:"Must contain lowercase alphanumeric characters (a-z and 0-9), hyphens, and underscores only and must start and end with alphanumeric characters."})],...ge?[R.i18n.translate("xpack.transform.stepDetailsForm.transformIdExistsError",{defaultMessage:"A transform with this ID already exists."})]:[]]},Object(G.jsx)(oe.EuiFieldText,{value:m,onChange:e=>g(e.target.value),"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.transformIdInputAriaLabel",{defaultMessage:"Choose a unique transform ID."}),isInvalid:!fe&&!he||ge,"data-test-subj":"transformIdInput"})),Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionLabel",{defaultMessage:"Transform description"})},Object(G.jsx)(oe.EuiTextArea,{placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionPlaceholderText",{defaultMessage:"Description (optional)"}),value:f,onChange:e=>h(e.target.value),"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.transformDescriptionInputAriaLabel",{defaultMessage:"Choose an optional transform description."}),"data-test-subj":"transformDescriptionInput"})),Object(G.jsx)(ua,{createIndexLink:p,destinationIndex:y,destinationIndexNameEmpty:be,destinationIndexNameExists:ye,destinationIndexNameValid:je,destIndexSameAsId:j,fullWidth:!1,indexNameExistsMessage:R.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexHelpText",{defaultMessage:"An index with this name already exists. Be aware that running this transform will modify this destination index."}),isJobCreated:ge,onDestinationIndexChange:b,setDestIndexSameAsId:_,switchLabel:R.i18n.translate("xpack.transform.stepDetailsForm.destinationIndexFormSwitchLabel",{defaultMessage:"Use transform ID as destination index name"})}),V.length>0&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.destinationIngestPipelineLabel",{defaultMessage:"Destination ingest pipeline"})},Object(G.jsx)(oe.EuiComboBox,{"data-test-subj":"transformDestinationPipelineSelect","aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.destinationIngestPipelineAriaLabel",{defaultMessage:"Select an ingest pipeline (optional)"}),placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.destinationIngestPipelineComboBoxPlaceholder",{defaultMessage:"Select an ingest pipeline (optional)"}),singleSelection:{asPlainText:!0},options:V.map((e=>({label:e}))),selectedOptions:""!==x?[{label:x}]:[],onChange:e=>{var t,n;return v(null!==(t=null===(n=e[0])||void 0===n?void 0:n.label)&&void 0!==t?t:"")}})),r.transformFunction===Ve.k.LATEST?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiCallOut,{color:"warning",iconType:"warning",size:"m"},Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.stepDetailsForm.destinationIndexWarning",defaultMessage:"Before you start the transform, use index templates or the {docsLink} to ensure the mappings for your destination index match the source index. Otherwise, the destination index is created with dynamic mappings. If the transform fails, check the messages tab on the Stack Management page for errors.",values:{docsLink:Object(G.jsx)(oe.EuiLink,{href:p,target:"_blank"},R.i18n.translate("xpack.transform.stepDetailsForm.createIndexAPI",{defaultMessage:"Create index API"}))}}))),Object(G.jsx)(oe.EuiSpacer,{size:"m"})):null,Object(G.jsx)(la,{canCreateDataView:O,createDataView:w,dataViewTitleExists:_e,setCreateDataView:E,dataViewAvailableTimeFields:C,dataViewTimeField:S,onTimeFieldChanged:F}),Object(G.jsx)(oe.EuiFormRow,{helpText:!1===W?R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeError",{defaultMessage:"Continuous mode is not available for indices without date fields."}):""},Object(G.jsx)(oe.EuiSwitch,{name:"transformContinuousMode",label:R.i18n.translate("xpack.transform.stepCreateForm.continuousModeLabel",{defaultMessage:"Continuous mode"}),checked:!0===J,onChange:()=>K(!J),disabled:!1===W,"data-test-subj":"transformContinuousModeSwitch"})),J&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDateFieldLabel",{defaultMessage:"Date field for continuous mode"}),helpText:R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify new documents."})},Object(G.jsx)(oe.EuiSelect,{options:H.map((e=>({text:e,value:e}))),value:Y,onChange:e=>X(e.target.value),"data-test-subj":"transformContinuousDateFieldSelect"})),Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayLabel",{defaultMessage:"Delay"}),isInvalid:!te,error:!te&&[R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayError",{defaultMessage:"Invalid delay format"})],helpText:R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayHelpText",{defaultMessage:"Time delay between current time and latest input data time."})},Object(G.jsx)(oe.EuiFieldText,{placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeDelayPlaceholderText",{defaultMessage:"delay e.g. {exampleValue}",values:{exampleValue:"60s"}}),value:Z,onChange:e=>ee(e.target.value),"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.continuousModeAriaLabel",{defaultMessage:"Choose a delay."}),isInvalid:!te,"data-test-subj":"transformContinuousDelayInput"}))),Object(G.jsx)(oe.EuiFormRow,{helpText:!1===ne?R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyError",{defaultMessage:"Retention policy settings are not available for indices without date fields."}):""},Object(G.jsx)(oe.EuiSwitch,{name:"transformRetentionPolicy",label:R.i18n.translate("xpack.transform.stepCreateForm.retentionPolicyLabel",{defaultMessage:"Retention policy"}),checked:!0===re,onChange:()=>se(!re),disabled:!1===ne,"data-test-subj":"transformRetentionPolicySwitch"})),re&&ne&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyDateFieldLabel",{defaultMessage:"Date field for retention policy"}),helpText:R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify out of date documents in the destination index."})},Object(G.jsx)(oe.EuiSelect,{options:C.map((e=>({text:e}))),value:le,onChange:e=>ce(e.target.value),"data-test-subj":"transformRetentionPolicyDateFieldSelect"})),Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgeLabel",{defaultMessage:"Max age"}),isInvalid:!de&&!me,error:!de&&!me&&[nt],helpText:R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgeHelpText",{defaultMessage:"Documents that are older than the configured value will be removed from the destination index."})},Object(G.jsx)(oe.EuiFieldText,{placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgePlaceholderText",{defaultMessage:"max_age e.g. {exampleValue}",values:{exampleValue:"7d"}}),value:ue,onChange:e=>pe(e.target.value),"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.retentionPolicyMaxAgeAriaLabel",{defaultMessage:"Choose a max age."}),isInvalid:!de&&!me,"data-test-subj":"transformRetentionPolicyMaxAgeInput"}))),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(oe.EuiAccordion,{"data-test-subj":"transformWizardAccordionAdvancedSettings",id:"transformWizardAccordionAdvancedSettings",buttonContent:R.i18n.translate("xpack.transform.stepDetailsForm.advancedSettingsAccordionButtonContent",{defaultMessage:"Advanced settings"}),paddingSize:"s"},Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.frequencyLabel",{defaultMessage:"Frequency"}),isInvalid:!Oe,error:!Oe&&[R.i18n.translate("xpack.transform.stepDetailsForm.frequencyError",{defaultMessage:"Invalid frequency format"})],helpText:R.i18n.translate("xpack.transform.stepDetailsForm.frequencyHelpText",{defaultMessage:"The interval to check for changes in source indices when the transform runs continuously."})},Object(G.jsx)(oe.EuiFieldText,{placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormFrequencyPlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:Ve.e}}),value:xe,onChange:e=>ve(e.target.value),"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.frequencyAriaLabel",{defaultMessage:"Choose a frequency."}),isInvalid:!Oe,"data-test-subj":"transformFrequencyInput"})),Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsForm.maxPageSearchSizeLabel",{defaultMessage:"Maximum page search size"}),isInvalid:!ke,error:Te,helpText:R.i18n.translate("xpack.transform.stepDetailsForm.maxPageSearchSizeHelpText",{defaultMessage:"The initial page size to use for the composite aggregation for each checkpoint."})},Object(G.jsx)(oe.EuiFieldText,{placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormMaxPageSearchSizePlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:500}}),value:we?we.toString():we,onChange:e=>{if(""!==e.target.value){const t=parseInt(e.target.value,10);Ee(isFinite(t)?t:void 0)}else Ee(void 0)},"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.maxPageSearchSizeAriaLabel",{defaultMessage:"Choose a maximum page search size."}),isInvalid:!Oe,"data-test-subj":"transformMaxPageSearchSizeInput"})),Object(G.jsx)(oe.EuiFormRow,{"data-test-subj":"transformNumFailureRetriesFormRow",label:R.i18n.translate("xpack.transform.stepDetailsForm.transformNumFailureRetriesLabel",{defaultMessage:"Number of failure retries"}),isInvalid:!Ce,error:!Ce&&[R.i18n.translate("xpack.transform.stepDetailsForm.NumFailureRetriesError",{defaultMessage:"Number of retries needs to be between 0 and 100, or -1 for infinite retries."})],helpText:R.i18n.translate("xpack.transform.stepDetailsForm.transformNumRetriesHelpText",{defaultMessage:"The number of retries on a recoverable failure before the transform task is marked as failed. Set it to -1 for infinite retries."})},Object(G.jsx)(oe.EuiFieldText,{value:Ae||void 0!==Ae&&Ae>=-1?Ae.toString():"",onChange:e=>{""!==e.target.value?Me("-"===e.target.value?"-":parseInt(e.target.value,10)):Me(void 0)},"aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.numFailureRetriesAriaLabel",{defaultMessage:"Choose a maximum number of retries."}),isInvalid:!Ce,"data-test-subj":"transformNumFailureRetriesInput"})))))})),ma=P.a.memo((e=>{const{continuousModeDateField:t,createDataView:n,isContinuousModeEnabled:r,isRetentionPolicyEnabled:s,retentionPolicyDateField:a,retentionPolicyMaxAge:o,transformId:i,transformDescription:l,transformFrequency:c,transformSettingsMaxPageSearchSize:u,transformSettingsNumFailureRetries:p,destinationIndex:d,destinationIngestPipeline:m,touched:g,dataViewTimeField:f}=e;if(!1===g)return null;const h=n?R.i18n.translate("xpack.transform.stepDetailsSummary.createDataViewMessage",{defaultMessage:"A Kibana data view will be created for this transform."}):"";return Object(G.jsx)("div",{"data-test-subj":"transformStepDetailsSummary"},Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.transformIdLabel",{defaultMessage:"Transform ID"})},Object(G.jsx)("span",null,i)),""!==l&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.transformDescriptionLabel",{defaultMessage:"Transform description"})},Object(G.jsx)("span",null,l)),Object(G.jsx)(oe.EuiFormRow,{helpText:h,label:R.i18n.translate("xpack.transform.stepDetailsSummary.destinationIndexLabel",{defaultMessage:"Destination index"})},Object(G.jsx)("span",null,d)),n&&void 0!==f&&""!==f&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.dataViewTimeFieldLabel",{defaultMessage:"Kibana data view time field"})},Object(G.jsx)("span",null,f)),void 0!==m&&""!==m&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.destinationIngestPipelineLabel",{defaultMessage:"Destination ingest pipeline"})},Object(G.jsx)("span",null,m)),r&&Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.continuousModeDateFieldLabel",{defaultMessage:"Continuous mode date field"})},Object(G.jsx)("span",null,t)),s&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.retentionPolicyDateFieldLabel",{defaultMessage:"Retention policy date field"})},Object(G.jsx)("span",null,a)),Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.stepDetailsSummary.retentionPolicyMaxAgeLabel",{defaultMessage:"Retention policy max age"})},Object(G.jsx)("span",null,o))),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(oe.EuiAccordion,{"data-test-subj":"transformWizardAccordionAdvancedSettingsSummary",id:"transformWizardAccordionAdvancedSettingsSummary",buttonContent:R.i18n.translate("xpack.transform.stepDetailsSummary.advancedSettingsAccordionButtonContent",{defaultMessage:"Advanced settings"}),paddingSize:"s"},Object(G.jsx)(oe.EuiFormRow,{"data-test-subj":"transformWizardAdvancedSettingsFrequencyLabel",label:R.i18n.translate("xpack.transform.stepDetailsSummary.frequencyLabel",{defaultMessage:"Frequency"})},Object(G.jsx)("span",null,c)),Object(G.jsx)(oe.EuiFormRow,{"data-test-subj":"transformWizardAdvancedSettingsMaxPageSearchSizeLabel",label:R.i18n.translate("xpack.transform.stepDetailsSummary.maxPageSearchSizeLabel",{defaultMessage:"Maximum page search size"})},Object(G.jsx)("span",null,u)),"number"==typeof p?Object(G.jsx)(oe.EuiFormRow,{"data-test-subj":"transformWizardAdvancedSettingsNumFailureRetriesLabel",label:R.i18n.translate("xpack.transform.stepDetailsSummary.numFailureRetriesLabel",{defaultMessage:"Number of retries"})},Object(G.jsx)("span",null,p)):null))})),ga=({previous:e,previousActive:t=!0,next:n,nextActive:r=!0})=>Object(G.jsx)(oe.EuiFlexGroup,null,Object(G.jsx)(oe.EuiFlexItem,null),e&&Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiButton,{disabled:!t,onClick:e,iconType:"arrowLeft",size:"s","data-test-subj":"transformWizardNavButtonPrevious"},R.i18n.translate("xpack.transform.wizard.previousStepButton",{defaultMessage:"Previous"}))),n&&Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiButton,{disabled:!r,onClick:n,iconType:"arrowRight",size:"s","data-test-subj":"transformWizardNavButtonNext"},R.i18n.translate("xpack.transform.wizard.nextStepButton",{defaultMessage:"Next"})))),fa=["transform.frozenDataTierPreference"],ha=new r.Storage(window.localStorage);var ya=function(e){return e[e.DEFINE=0]="DEFINE",e[e.DETAILS=1]="DETAILS",e[e.CREATE=2]="CREATE",e}(ya||{});const ba=({isCurrentStep:e,stepDefineState:t,setCurrentStep:n,setStepDefineState:r,searchItems:s})=>{const a=Object(L.useRef)(null);return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)("div",{ref:a}),e&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Gs,{onChange:r,overrides:{...t},searchItems:s}),Object(G.jsx)(ga,{next:()=>n(ya.DETAILS),nextActive:t.valid})),!e&&Object(G.jsx)(Qs,{formState:{...t},searchItems:s}))},ja=Object(L.createContext)({dataView:null,runtimeMappings:void 0}),_a=P.a.memo((({cloneConfig:e,searchItems:t})=>{const{showNodeInfo:n}=De(),r=Object(Ct.a)(),{ml:{FieldStatsFlyoutProvider:s},uiSettings:a,data:o,fieldFormats:i,charts:l}=r,{dataView:c}=t,[u,p]=Object(L.useState)(ya.DEFINE),[d,g]=Object(L.useState)(sr(or(t),e,c)),[f,h]=Object(L.useState)(function(e,t){if(void 0!==t){var n,r;const l=null===(n=t.sync)||void 0===n?void 0:n.time;var s;void 0!==l&&(e.continuousModeDateField=l.field,e.continuousModeDelay=null!==(s=null==l?void 0:l.delay)&&void 0!==s?s:Ve.b,e.isContinuousModeEnabled=!0),void 0!==t.description&&(e.transformDescription=t.description),void 0!==t.dest.pipeline&&(e.destinationIngestPipeline=t.dest.pipeline),void 0!==t.frequency&&(e.transformFrequency=t.frequency);const c=null===(r=t.retention_policy)||void 0===r?void 0:r.time;var a,o,i;void 0!==c&&(e.retentionPolicyDateField=c.field,e.retentionPolicyMaxAge=c.max_age,e.isRetentionPolicyEnabled=!0),t.settings&&("number"==typeof(null===(a=t.settings)||void 0===a?void 0:a.max_page_search_size)&&(e.transformSettingsMaxPageSearchSize=t.settings.max_page_search_size),"number"==typeof(null===(o=t.settings)||void 0===o?void 0:o.docs_per_second)?e.transformSettingsDocsPerSecond=t.settings.docs_per_second:e.transformSettingsDocsPerSecond=null,"number"==typeof(null===(i=t.settings)||void 0===i?void 0:i.num_failure_retries)&&(e.transformSettingsNumFailureRetries=t.settings.num_failure_retries)),t._meta&&(e._meta=t._meta)}return e}(aa(),e)),[y,b]=Object(L.useState)(na),j=((e,t,n)=>({...Qn(e,Vn(t.searchQuery),t.previewRequest,t.runtimeMappings,t.isDatePickerApplyEnabled&&t.timeRangeMs?t.timeRangeMs:void 0),...""!==n.transformDescription?{description:n.transformDescription}:{},...""!==n.transformFrequency&&n.transformFrequency!==Ve.e?{frequency:n.transformFrequency}:{},dest:{index:n.destinationIndex,...""!==n.destinationIngestPipeline?{pipeline:n.destinationIngestPipeline}:{}},...n.isContinuousModeEnabled?{sync:{time:{...n.continuousModeDelay!==Ve.b?{delay:n.continuousModeDelay}:{},field:n.continuousModeDateField}}}:{},...n.isRetentionPolicyEnabled&&""!==n.retentionPolicyDateField&&""!==n.retentionPolicyMaxAge?{retention_policy:{time:{field:n.retentionPolicyDateField,max_age:n.retentionPolicyMaxAge}}}:{},...n._meta?{_meta:n._meta}:{},...Un(n)}))(c,d,f),_=[Object(L.useMemo)((()=>({title:R.i18n.translate("xpack.transform.transformsWizard.stepConfigurationTitle",{defaultMessage:"Configuration"}),children:Object(G.jsx)(ba,{isCurrentStep:u===ya.DEFINE,stepDefineState:d,setCurrentStep:p,setStepDefineState:g,searchItems:t})})),[u,d,p,g,t]),Object(L.useMemo)((()=>({title:R.i18n.translate("xpack.transform.transformsWizard.stepDetailsTitle",{defaultMessage:"Transform details"}),children:Object(G.jsx)(P.a.Fragment,null,u===ya.DETAILS?Object(G.jsx)(da,{onChange:h,overrides:f,searchItems:t,stepDefineState:d}):Object(G.jsx)(ma,f),u===ya.DETAILS&&Object(G.jsx)(ga,{previous:()=>{p(ya.DEFINE)},next:()=>p(ya.CREATE),nextActive:f.valid})),status:u>=ya.DETAILS?void 0:"incomplete"})),[u,h,f,t,d]),Object(L.useMemo)((()=>({title:R.i18n.translate("xpack.transform.transformsWizard.stepCreateTitle",{defaultMessage:"Create"}),children:Object(G.jsx)(P.a.Fragment,null,u===ya.CREATE?Object(G.jsx)(ra,{createDataView:f.createDataView,transformId:f.transformId,transformConfig:j,onChange:b,overrides:y,timeFieldName:f.dataViewTimeField}):Object(G.jsx)(sa,null),u===ya.CREATE&&!y.created&&Object(G.jsx)(ga,{previous:()=>p(ya.DETAILS)})),status:u>=ya.CREATE?void 0:"incomplete"})),[u,p,f.createDataView,f.transformId,j,b,y,f.dataViewTimeField])],x={...Object(m.pick)(r,["data","http","notifications","theme","uiSettings","i18n"]),uiSettingsKeys:Me.UI_SETTINGS,showFrozenDataTierChoice:n},v=Object(L.useMemo)((()=>({uiSettings:a,dataViews:o.dataViews,data:o,fieldFormats:i,charts:l})),[a,o,i,l]);return Object(G.jsx)(s,{dataView:c,fieldStatsServices:v,timeRangeMs:d.timeRangeMs,dslQuery:j.source.query},Object(G.jsx)(ja.Provider,{value:{dataView:c,runtimeMappings:d.runtimeMappings}},Object(G.jsx)(ke,null,Object(G.jsx)(be,{storage:ha,storageKeys:fa},Object(G.jsx)(fe,x,Object(G.jsx)(oe.EuiSteps,{className:"transform__steps",steps:_}))))))})),xa=({match:e,location:t})=>{const{dataViewId:n}=Object(se.parse)(t.search,{sort:!1});Object(L.useEffect)((()=>{q.setBreadcrumbs(D.CLONE_TRANSFORM),$.setTitle("createTransform")}),[]);const{esTransform:r}=Object(le.a)(),s=e.params.transformId,[a,o]=Object(L.useState)(),[i,l]=Object(L.useState)(),[c,u]=Object(L.useState)(!1),{error:p,searchItems:d,setSavedObjectId:m}=Object(ce.a)(void 0);Object(L.useEffect)((()=>{void 0===n?l(R.i18n.translate("xpack.transform.clone.fetchErrorPromptText",{defaultMessage:"Could not fetch the Kibana data view ID."})):m(n)}),[n,m]),Object(L.useEffect)((()=>{void 0!==p&&(o(void 0),l(p),u(!0))}),[p]);const{data:g,error:f}=Object(ie.i)(s,void 0===p);Object(L.useEffect)((()=>{if(null!==f&&f.message!==i)return o(void 0),l(f.message),void u(!0);if(void 0!==g)try{o(Object(Pe.c)(g.transforms[0])),l(void 0),u(!0)}catch(e){o(void 0),void 0!==e.message?l(e.message):l(JSON.stringify(e,null,2)),u(!0)}}),[f,i,g]);const h=Object(G.jsx)(oe.EuiButtonEmpty,{href:r,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformsWizard.transformDocsLinkText",defaultMessage:"Transform docs"}));return Object(G.jsx)(de,{requiredCapabilities:["canGetTransform","canPreviewTransform","canCreateTransform","canStartStopTransform"]},Object(G.jsx)(oe.EuiPageTemplate.Header,{pageTitle:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformsWizard.cloneTransformTitle",defaultMessage:"Clone transform"}),rightSideItems:[h],bottomBorder:!0,paddingSize:"none"}),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(oe.EuiPageTemplate.Section,{"data-test-subj":"transformPageCloneTransform",paddingSize:"none"},void 0!==i?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.transform.clone.errorPromptTitle",{defaultMessage:"An error occurred getting the transform configuration."}),color:"danger",iconType:"warning"},Object(G.jsx)("pre",null,JSON.stringify(i))),Object(G.jsx)(oe.EuiSpacer,{size:"l"})):null,void 0!==d&&!0===c&&void 0!==a&&Object(G.jsx)(_a,{cloneConfig:a,searchItems:d})))},va=({match:e})=>{Object(L.useEffect)((()=>{q.setBreadcrumbs(D.CREATE_TRANSFORM),$.setTitle("createTransform")}),[]);const{esTransform:t}=Object(le.a)(),{error:n,searchItems:r}=Object(ce.a)(e.params.savedObjectId),s=Object(G.jsx)(oe.EuiButtonEmpty,{href:t,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformsWizard.transformDocsLinkText",defaultMessage:"Transform docs"}));return Object(G.jsx)(de,{requiredCapabilities:["canGetTransform","canPreviewTransform","canCreateTransform","canStartStopTransform"]},Object(G.jsx)(oe.EuiPageTemplate.Header,{pageTitle:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformsWizard.createTransformTitle",defaultMessage:"Create transform"}),rightSideItems:[s],bottomBorder:!0,paddingSize:"none"}),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(oe.EuiPageTemplate.Section,{"data-test-subj":"transformPageCreateTransform",paddingSize:"none"},void 0!==n&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiCallOut,{title:n,color:"danger",iconType:"warning"}),Object(G.jsx)(oe.EuiSpacer,{size:"l"})),void 0!==r&&Object(G.jsx)(_a,{searchItems:r})))};function Oa(e){return Object(ve.a)(e,["state"])&&function(e){return"string"==typeof e&&Object.values(Ve.t).includes(e)}(e.state)}var wa=n(82);const Ea=e=>{var t,n;return Object(ve.a)(null===(t=e.config)||void 0===t?void 0:t.authorization,["api_key"])&&Object(ve.a)(e.stats)&&Object(ve.a)(e.stats.health)&&Object(Ve.v)(e.stats.health.status)===Ve.p.red&&void 0!==(null===(n=e.stats.health.issues)||void 0===n?void 0:n.find((e=>"Privileges check failed"===e.issue)))};var Sa=n(80),Ta=n(50);const ka=({onSearchSelected:e,createNewDataView:t,canEditDataView:n})=>{const{contentManagement:r,uiSettings:s}=Object(Ct.a)();return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiModalHeader,null,Object(G.jsx)(oe.EuiModalHeaderTitle,null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.newTransform.newTransformTitle",defaultMessage:"New transform"})," ","/"," ",Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.newTransform.chooseSourceTitle",defaultMessage:"Choose a source"}))),Object(G.jsx)(oe.EuiModalBody,null,Object(G.jsx)(Ta.SavedObjectFinder,{key:"searchSavedObjectFinder",onChoose:e,showFilter:!0,noItemsMessage:R.i18n.translate("xpack.transform.newTransform.searchSelection.notFoundLabel",{defaultMessage:"No matching indices or saved searches found."}),savedObjectMetaData:[{type:"search",getIconForSavedObject:()=>"search",name:R.i18n.translate("xpack.transform.newTransform.searchSelection.savedObjectType.search",{defaultMessage:"Saved search"})},{type:"index-pattern",getIconForSavedObject:()=>"indexPatternApp",name:R.i18n.translate("xpack.transform.newTransform.searchSelection.savedObjectType.dataView",{defaultMessage:"Data view"})}],fixedPageSize:8,services:{contentClient:r.client,uiSettings:s}},n?Object(G.jsx)(oe.EuiButton,{onClick:t,iconType:"plusInCircle","data-test-subj":"newDataViewButton",disabled:!n},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.newTransform.searchSelection.createADataView",defaultMessage:"Create a data view"})):Object(G.jsx)(L.Fragment,null))))};var Aa=n(62);function Ma(e){let t="";switch(e){case"canCreateTransform":t=R.i18n.translate("xpack.transform.capability.noPermission.createTransformTooltip",{defaultMessage:"You do not have permission to create transforms."});break;case"canCreateTransformAlerts":t=R.i18n.translate("xpack.transform.capability.noPermission.canCreateTransformAlertsTooltip",{defaultMessage:"You do not have permission to create transform alert rules."});break;case"canScheduleNowTransform":t=R.i18n.translate("xpack.transform.capability.noPermission.scheduleNowTransformTooltip",{defaultMessage:"You do not have permission to schedule transforms to process data instantly."});break;case"canStartStopTransform":t=R.i18n.translate("xpack.transform.capability.noPermission.startOrStopTransformTooltip",{defaultMessage:"You do not have permission to start or stop transforms."});break;case"canReauthorizeTransform":t=R.i18n.translate("xpack.transform.capability.noPermission.reauthorizeTransformTooltip",{defaultMessage:"You do not have permission to reauthorize transforms."});break;case"canDeleteTransform":t=R.i18n.translate("xpack.transform.capability.noPermission.deleteTransformTooltip",{defaultMessage:"You do not have permission to delete transforms."});break;case"canResetTransform":t=R.i18n.translate("xpack.transform.capability.noPermission.resetTransformTooltip",{defaultMessage:"You do not have permission to reset transforms."});break;case"noTransformNodes":t=R.i18n.translate("xpack.transform.capability.noPermission.noTransformNodesTooltip",{defaultMessage:"There are no transform nodes available."})}return R.i18n.translate("xpack.transform.capability.pleaseContactAdministratorTooltip",{defaultMessage:"{message} Please contact your administrator.",values:{message:t}})}const Ca=R.i18n.translate("xpack.transform.transformList.reauthorizeActionNameText",{defaultMessage:"Reauthorize"}),Fa=(e,t,n)=>!t||0===e.length||0===n||!e.some(Ea),Ra=({items:e,forceDisable:t,transformNodes:n})=>{const{canStartStopTransform:r}=Object(ie.t)(),s=e.some(Ea),a=Fa(e,r,n);let o;a&&e.length>0&&(!r&&s&&(o=Ma("canReauthorizeTransform")),s||(o=R.i18n.translate("xpack.transform.transformList.reauthorizeBulkActionDisabledToolTipContent",{defaultMessage:"One or more selected transforms must require reauthorization."})));const i=Object(G.jsx)(oe.EuiText,{size:"s"},Ca);return!0!==t&&!a||void 0===o?Object(G.jsx)(P.a.Fragment,null,i):Object(G.jsx)(oe.EuiToolTip,{position:"top",content:o},i)},Ia=(e,t)=>{const{canStartStopTransform:n}=Object(ie.t)(),r=(()=>{const{http:e,...t}=Object(Ct.a)(),n=Object(Aa.a)(),r=Object(Ct.b)();return Object(B.useMutation)({mutationFn:t=>e.post(Object(Ve.u)("reauthorize_transforms"),{body:JSON.stringify(t),version:"1"}),onError:e=>r.addDanger({title:R.i18n.translate("xpack.transform.stepCreateForm.reauthorizeTransformResponseSchemaErrorMessage",{defaultMessage:"An error occurred calling the reauthorize transforms request."}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(e)}),t)}),onSuccess:e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];n.success||r.addError(new Error(JSON.stringify(n.error.caused_by,null,2)),{title:R.i18n.translate("xpack.transform.transformList.reauthorizeTransformErrorMessage",{defaultMessage:"An error occurred reauthorizing the transform {transformId}",values:{transformId:t}}),toastMessage:n.error.reason})}n()}}).mutate})(),[s,a]=Object(L.useState)(!1),[o,i]=Object(L.useState)([]),l=e=>{Array.isArray(e)&&(i(e),a(!0))};return{action:Object(L.useMemo)((()=>({name:n=>Object(G.jsx)(Ra,{items:[n],forceDisable:e,transformNodes:t}),available:e=>Ea(e),enabled:e=>Be(e)&&!Fa([e],n,t),description:Ca,icon:"alert",type:"icon",color:"warning",onClick:e=>l([e]),"data-test-subj":"transformActionReauthorize"})),[n,e,t]),closeModal:()=>a(!1),isModalVisible:s,items:o,openModal:l,reauthorizeAndCloseModal:()=>{a(!1);const{transformIds:e}=(e=>{let t=!1;const n=e.map((e=>{var n;let r="",s=Number.MIN_VALUE;var a;return Object(ve.a)(null==e||null===(n=e.config)||void 0===n?void 0:n._meta,["order"])&&("number"==typeof e.config._meta.order&&(t=!0,s=null==e||null===(a=e.config)||void 0===a?void 0:a._meta.order),Object(ve.a)(e.config._meta.package,["name"])&&"string"==typeof e.config._meta.package.name&&(r=e.config._meta.package.name)),{id:e.id,order:s,packageName:r}}));return{transformIds:t?Object(m.sortBy)(n,["packageName","order"]).map((e=>({id:e.id}))):n.map((e=>({id:e.id}))),shouldInstallSequentially:t}})(o);r(e)}}},Da=({closeModal:e,items:t,reauthorizeAndCloseModal:n})=>{const r=t.length>1,s=R.i18n.translate("xpack.transform.transformList.bulkReauthorizeModalTitle",{defaultMessage:"Reauthorize {count} {count, plural, one {transform} other {transforms}}?",values:{count:t&&t.length}}),a=R.i18n.translate("xpack.transform.transformList.reauthorizeModalTitle",{defaultMessage:"Reauthorize {transformId}?",values:{transformId:t[0]&&t[0].config.id}});return Object(G.jsx)(oe.EuiConfirmModal,{"data-test-subj":"transformReauthorizeModal",title:!0===r?s:a,onCancel:e,onConfirm:n,cancelButtonText:R.i18n.translate("xpack.transform.transformList.reauthorizeModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:R.i18n.translate("xpack.transform.transformList.reauthorizeModalConfirmButton",{defaultMessage:"Reauthorize"}),defaultFocusedButton:oe.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},Object(G.jsx)("p",null,R.i18n.translate("xpack.transform.transformList.reauthorizeModalBody",{defaultMessage:"Your current roles are used to update and start the transform. Starting a transform increases search and indexing load in your cluster. If excessive load is experienced, stop the transform."})))},qa=({onClick:e,transformNodes:t})=>{const n=Object(ie.t)(),r=!n.canCreateTransform||!n.canPreviewTransform||!n.canStartStopTransform||0===t,s=Object(G.jsx)(oe.EuiButton,{disabled:r,fill:!0,onClick:e,iconType:"plusInCircle","data-test-subj":"transformButtonCreate"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.createTransformButton",defaultMessage:"Create a transform"}));return r?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:Ma(t>0?"canCreateTransform":"noTransformNodes")},s):s},$a=({onClick:e,isLoading:t})=>Object(G.jsx)(oe.EuiButton,{color:"success",iconType:"refresh","data-test-subj":"transformRefreshTransformListButton"+(t?" loading":" loaded"),onClick:e,isLoading:t},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.refreshButtonLabel",defaultMessage:"Reload"}));function La({actionName:e,count:t=1}){return R.i18n.translate("xpack.transform.transformList.actionDisabledNoStatsTooltipMessage",{defaultMessage:"{actionName} is disabled because the status for {count, plural, one {this transform} other {some transforms}} is unavailable.",values:{actionName:e,count:t}})}const Pa=R.i18n.translate("xpack.transform.transformList.deleteActionNameText",{defaultMessage:"Delete"}),Na=e=>e.stats&&![Ve.t.STOPPED,Ve.t.FAILED].includes(e.stats.state),Ba=(e,t)=>{const n=e.some(Na);return!0===t||n||ze(e)},za=({items:e,canDeleteTransform:t,disabled:n,isBulkAction:r,forceDisable:s})=>{const a=(({items:e,canDeleteTransform:t,forceDisable:n})=>{const r=e.length>1;return ze(e)?La({actionName:Pa,count:e.length}):t?e.some(Na)?!0===r?R.i18n.translate("xpack.transform.transformList.deleteBulkActionDisabledToolTipContent",{defaultMessage:"One or more selected transforms must be stopped in order to be deleted."}):R.i18n.translate("xpack.transform.transformList.deleteActionDisabledToolTipContent",{defaultMessage:"Stop the transform in order to delete it."}):void 0:Ma("canDeleteTransform")})({items:e,canDeleteTransform:t,forceDisable:s});return a?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:a},Object(G.jsx)(P.a.Fragment,null,Pa)):Object(G.jsx)(P.a.Fragment,null,Pa)},Va=e=>{const{canDeleteTransform:t}=Object(ie.t)(),n=Object(ie.c)(),[r,s]=Object(L.useState)(!1),[a,o]=Object(L.useState)([]),i=a.length>1,l=Object(L.useMemo)((()=>a.some((e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.state)===Ve.t.FAILED}))),[a]),{userCanDeleteIndex:c,userCanDeleteDataView:u,deleteDestIndex:p,dataViewExists:d,deleteDataView:m,toggleDeleteIndex:g,toggleDeleteDataView:f}=Object(ie.b)(a),h=e=>{Array.isArray(e)&&(o(e),s(!0))};return{action:Object(L.useMemo)((()=>({name:n=>Object(G.jsx)(za,{canDeleteTransform:t,disabled:Ba([n],e),isBulkAction:!1,items:[n],forceDisable:e}),enabled:n=>Be(n)&&!Ba([n],e)&&t,description:Pa,icon:"trash",type:"icon",onClick:e=>h([e]),"data-test-subj":"transformActionDelete"})),[t,e]),closeModal:()=>s(!1),deleteAndCloseModal:()=>{var e;s(!1);const t=c&&p,r=c&&u&&d&&m,o=i?l:a[0]&&a[0]&&(null===(e=a[0].stats)||void 0===e?void 0:e.state)===Ve.t.FAILED;n({transformsInfo:a.filter(Be).map((e=>({id:e.config.id,state:e.stats.state}))),deleteDestIndex:t,deleteDestDataView:r,forceDelete:o})},deleteDestIndex:p,deleteDataView:m,dataViewExists:d,isModalVisible:r,items:a,openModal:h,shouldForceDelete:l,toggleDeleteIndex:g,toggleDeleteDataView:f,userCanDeleteIndex:c,userCanDeleteDataView:u}},Ga=e=>{var t,n;return null===(t=e.config)||void 0===t||null===(n=t._meta)||void 0===n?void 0:n.managed},Qa=({count:e,action:t})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiCallOut,{color:"warning"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.managedTransformsWarningCallout",defaultMessage:"{count, plural, one {This transform} other {At least one of these transforms}} is preconfigured by Elastic; {action} {count, plural, one {it} other {them}} might impact other parts of the product.",values:{count:e,action:t}}))),Ua=({closeModal:e,deleteAndCloseModal:t,deleteDestIndex:n,deleteDataView:r,dataViewExists:s,items:a,shouldForceDelete:o,toggleDeleteIndex:i,toggleDeleteDataView:l,userCanDeleteIndex:c,userCanDeleteDataView:u})=>{const p=Object(L.useMemo)((()=>a.some((e=>Ga(e)))),[a]),d=a.length>1,m=R.i18n.translate("xpack.transform.transformList.bulkDeleteModalTitle",{defaultMessage:"Delete {count} {count, plural, one {transform} other {transforms}}?",values:{count:a.length}}),g=R.i18n.translate("xpack.transform.transformList.deleteModalTitle",{defaultMessage:"Delete {transformId}?",values:{transformId:a[0]&&a[0].config.id}}),f=Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{direction:"column",gutterSize:"none"},p?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Qa,{count:a.length,action:R.i18n.translate("xpack.transform.transformList.deleteManagedTransformDescription",{defaultMessage:"deleting"})}),Object(G.jsx)(oe.EuiSpacer,null)):null,Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiSwitch,{"data-test-subj":"transformBulkDeleteIndexSwitch",label:R.i18n.translate("xpack.transform.actionDeleteTransform.bulkDeleteDestinationIndexTitle",{defaultMessage:"Delete destination indices"}),checked:n,onChange:i})),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiSwitch,{"data-test-subj":"transformBulkDeleteDataViewSwitch",label:R.i18n.translate("xpack.transform.actionDeleteTransform.bulkDeleteDestDataViewTitle",{defaultMessage:"Delete destination data views"}),checked:r,onChange:l,disabled:!1===u})))),h=Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{direction:"column",gutterSize:"none"},p?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Qa,{count:1,action:R.i18n.translate("xpack.transform.transformList.deleteManagedTransformDescription",{defaultMessage:"deleting"})}),Object(G.jsx)(oe.EuiSpacer,null)):null,Object(G.jsx)(oe.EuiFlexItem,null,c&&Object(G.jsx)(oe.EuiSwitch,{"data-test-subj":"transformDeleteIndexSwitch",label:R.i18n.translate("xpack.transform.actionDeleteTransform.deleteDestinationIndexTitle",{defaultMessage:"Delete destination index {destinationIndex}",values:{destinationIndex:a[0]&&a[0].config.dest.index}}),checked:n,onChange:i})),c&&s&&Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiSwitch,{"data-test-subj":"transformDeleteDataViewSwitch",label:R.i18n.translate("xpack.transform.actionDeleteTransform.deleteDestDataViewTitle",{defaultMessage:"Delete data view {destinationIndex}",values:{destinationIndex:a[0]&&a[0].config.dest.index}}),checked:r,onChange:l,disabled:!1===u}))));return Object(G.jsx)(oe.EuiConfirmModal,{"data-test-subj":"transformDeleteModal",title:!0===d?m:g,onCancel:e,onConfirm:t,cancelButtonText:R.i18n.translate("xpack.transform.transformList.deleteModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:R.i18n.translate("xpack.transform.transformList.deleteModalDeleteButton",{defaultMessage:"Delete"}),defaultFocusedButton:oe.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"danger"},d?f:h)},Ha=R.i18n.translate("xpack.transform.transformList.resetActionNameText",{defaultMessage:"Reset"}),Wa=e=>e.stats&&![Ve.t.STOPPED,Ve.t.FAILED].includes(e.stats.state),Ja=(e,t)=>{const n=e.some(Wa);return!0===t||n||ze(e)},Ka=({items:e,canResetTransform:t,forceDisable:n})=>{const r=e.length>1;if(ze(e))return La({actionName:Ha,count:e.length});if(!t)return Ma("canResetTransform");if(Ja(e,n)){const e=R.i18n.translate("xpack.transform.transformList.resetBulkActionDisabledToolTipContent",{defaultMessage:"One or more selected transforms must be stopped to be reset."}),t=R.i18n.translate("xpack.transform.transformList.resetActionDisabledToolTipContent",{defaultMessage:"Stop the transform in order to reset it."});return r?e:t}},Ya=({items:e,canResetTransform:t,disabled:n})=>{const r=Ka({items:e,canResetTransform:t,forceDisable:n});return r?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:r},Object(G.jsx)(P.a.Fragment,null,Ha)):Object(G.jsx)(P.a.Fragment,null,Ha)},Xa=e=>{const{canResetTransform:t}=Object(ie.t)(),n=Object(ie.p)(),[r,s]=Object(L.useState)(!1),[a,o]=Object(L.useState)([]),i=Object(L.useMemo)((()=>a.some((e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.state)===Ve.t.FAILED}))),[a]),l=e=>{Array.isArray(e)&&(o(e),s(!0))};return{action:Object(L.useMemo)((()=>({name:n=>Object(G.jsx)(Ya,{canResetTransform:t,disabled:Ja([n],e),isBulkAction:!1,items:[n]}),enabled:n=>void 0===Ka({items:[n],canResetTransform:t,forceDisable:e}),description:Ha,icon:"refresh",type:"icon",onClick:e=>l([e]),"data-test-subj":"transformActionReset"})),[t,e]),closeModal:()=>s(!1),resetAndCloseModal:()=>{s(!1),n({transformsInfo:a.filter(Be).map((e=>({id:e.config.id,state:e.stats.state})))})},isModalVisible:r,items:a,openModal:l,shouldForceReset:i}},Za=({closeModal:e,resetAndCloseModal:t,items:n,shouldForceReset:r})=>{const s=Object(L.useMemo)((()=>n.some((e=>Ga(e)))),[n]),a=n.length>1,o=R.i18n.translate("xpack.transform.transformList.bulkResetModalTitle",{defaultMessage:"Reset {count} {count, plural, one {transform} other {transforms}}?",values:{count:n.length}}),i=R.i18n.translate("xpack.transform.transformList.resetModalTitle",{defaultMessage:"Reset {transformId}?",values:{transformId:n[0]&&n[0].config.id}}),l=Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{direction:"column",gutterSize:"none"},s?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Qa,{count:n.length,action:R.i18n.translate("xpack.transform.transformList.resetManagedTransformDescription",{defaultMessage:"resetting"})}),Object(G.jsx)(oe.EuiSpacer,null)):null)),c=Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexGroup,{direction:"column",gutterSize:"none"},s?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(Qa,{count:1,action:R.i18n.translate("xpack.transform.transformList.resetManagedTransformDescription",{defaultMessage:"resetting"})}),Object(G.jsx)(oe.EuiSpacer,null)):null));return Object(G.jsx)(oe.EuiConfirmModal,{"data-test-subj":"transformResetModal",title:!0===a?o:i,onCancel:e,onConfirm:t,cancelButtonText:R.i18n.translate("xpack.transform.transformList.resetModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:R.i18n.translate("xpack.transform.transformList.resetModalResetButton",{defaultMessage:"Reset"}),defaultFocusedButton:oe.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"danger"},a?l:c)},eo=R.i18n.translate("xpack.transform.transformList.startActionNameText",{defaultMessage:"Start"}),to=(e,t,n)=>{const r=e.some((e=>Qe(e))),s=e.some((e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.state)===Ve.t.STARTED}));return!t||r||s||0===e.length||0===n||ze(e)},no=({items:e,forceDisable:t,transformNodes:n})=>{const{canStartStopTransform:r}=Object(ie.t)(),s=e.length>1,a=e.some((e=>Qe(e))),o=e.some((e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.state)===Ve.t.STARTED}));let i,l;!0===s?(i=R.i18n.translate("xpack.transform.transformList.startedTransformBulkToolTip",{defaultMessage:"One or more transforms are already started."}),l=R.i18n.translate("xpack.transform.transformList.cannotRestartCompleteBatchTransformBulkActionToolTip",{defaultMessage:"One or more transforms are completed batch transforms and cannot be restarted."})):(i=R.i18n.translate("xpack.transform.transformList.startedTransformToolTip",{defaultMessage:"{transformId} is already started.",values:{transformId:e[0]&&e[0].config.id}}),l=R.i18n.translate("xpack.transform.transformList.cannotRestartCompleteBatchTransformToolTip",{defaultMessage:"{transformId} is a completed batch transform and cannot be restarted.",values:{transformId:e[0]&&e[0].config.id}}));const c=to(e,r,n);let u;return c&&e.length>0&&(r?a?u=l:o?u=i:ze(e)&&(u=La({actionName:eo,count:e.length})):u=Ma("canStartStopTransform")),!0!==t&&!c||void 0===u?Object(G.jsx)(P.a.Fragment,null,eo):Object(G.jsx)(oe.EuiToolTip,{position:"top",content:u},Object(G.jsx)(P.a.Fragment,null,eo))},ro=(e,t)=>{const{canStartStopTransform:n}=Object(ie.t)(),r=Object(ie.r)(),[s,a]=Object(L.useState)(!1),[o,i]=Object(L.useState)([]),l=e=>{Array.isArray(e)&&(i(e),a(!0))};return{action:Object(L.useMemo)((()=>({name:n=>Object(G.jsx)(no,{items:[n],forceDisable:e,transformNodes:t}),available:e=>!Be(e)||e.stats.state===Ve.t.STOPPED,enabled:e=>!to([e],n,t),description:eo,icon:"play",type:"icon",onClick:e=>l([e]),"data-test-subj":"transformActionStart"})),[n,e,t]),closeModal:()=>a(!1),isModalVisible:s,items:o,openModal:l,startAndCloseModal:()=>{a(!1),r(o.map((e=>({id:e.id}))))}}},so=({closeModal:e,items:t,startAndCloseModal:n})=>{const r=t.length>1,s=R.i18n.translate("xpack.transform.transformList.bulkStartModalTitle",{defaultMessage:"Start {count} {count, plural, one {transform} other {transforms}}?",values:{count:t&&t.length}}),a=R.i18n.translate("xpack.transform.transformList.startModalTitle",{defaultMessage:"Start {transformId}?",values:{transformId:t[0]&&t[0].config.id}});return Object(G.jsx)(oe.EuiConfirmModal,{"data-test-subj":"transformStartModal",title:!0===r?s:a,onCancel:e,onConfirm:n,cancelButtonText:R.i18n.translate("xpack.transform.transformList.startModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:R.i18n.translate("xpack.transform.transformList.startModalStartButton",{defaultMessage:"Start"}),defaultFocusedButton:oe.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},Object(G.jsx)("p",null,R.i18n.translate("xpack.transform.transformList.startModalBody",{defaultMessage:"A transform increases search and indexing load in your cluster. If excessive load is experienced, stop the transform."})))},ao=R.i18n.translate("xpack.transform.transformList.scheduleNowActionNameText",{defaultMessage:"Schedule now"}),oo=(e,t,n)=>{const r=e.some((e=>Qe(e)));return!t||r||0===e.length||0===n||ze(e)},io=({items:e,forceDisable:t,transformNodes:n})=>{const{canScheduleNowTransform:r}=Object(ie.t)(),s=e.length>1,a=e.some((e=>Qe(e)));let o;o=!0===s?R.i18n.translate("xpack.transform.transformList.cannotScheduleNowCompleteBatchTransformBulkActionToolTip",{defaultMessage:"One or more transforms are completed batch transforms and cannot be scheduled to process data instantly."}):R.i18n.translate("xpack.transform.transformList.cannotScheduleNowCompleteBatchTransformToolTip",{defaultMessage:"{transformId} is a completed batch transform and cannot be scheduled to process data instantly.",values:{transformId:e[0]&&e[0].config.id}});const i=oo(e,r,n);let l=R.i18n.translate("xpack.transform.transformList.scheduleNowToolTip",{defaultMessage:"Schedule the transform to instantly process data without waiting for the configured interval between checks for changes in the source indices."});return i&&e.length>0&&(r?a?l=o:ze(e)&&(l=La({actionName:ao,count:e.length})):l=Ma("canScheduleNowTransform")),Object(G.jsx)(oe.EuiToolTip,{position:"top",content:l},Object(G.jsx)(P.a.Fragment,null,ao))},lo=(e,t)=>{const{canScheduleNowTransform:n}=Object(ie.t)(),r=Object(ie.q)();return{action:Object(L.useMemo)((()=>({name:n=>Object(G.jsx)(io,{items:[n],forceDisable:e,transformNodes:t}),available:e=>!Be(e)||e.stats.state===Ve.t.STARTED,enabled:e=>Be(e)&&!oo([e],n,t),description:ao,icon:"play",type:"icon",onClick:e=>r([{id:e.id}]),"data-test-subj":"transformActionScheduleNow"})),[n,e,r,t]),scheduleNowTransforms:r}},co=R.i18n.translate("xpack.transform.transformList.stopActionNameText",{defaultMessage:"Stop"}),uo=(e,t,n)=>{const r=e.some((e=>{var t;return(null===(t=e.stats)||void 0===t?void 0:t.state)===Ve.t.STOPPED}));return!0===n||!t||!0===r||ze(e)},po=({items:e,forceDisable:t})=>{const n=(({items:e,capabilities:t})=>{const n=e.length>1,{canStartStopTransform:r}=t;if(ze(e))return La({actionName:co,count:e.length});const s=e.some((e=>Be(e)&&e.stats.state===Ve.t.STOPPED));return r?s?!0===n?R.i18n.translate("xpack.transform.transformList.stoppedTransformBulkToolTip",{defaultMessage:"One or more transforms are already stopped."}):R.i18n.translate("xpack.transform.transformList.stoppedTransformToolTip",{defaultMessage:"{transformId} is already stopped.",values:{transformId:e[0]&&e[0].config.id}}):void 0:Ma("canStartStopTransform")})({items:e,capabilities:Object(ie.t)()});return t||n?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:n},Object(G.jsx)(P.a.Fragment,null,co)):Object(G.jsx)(P.a.Fragment,null,co)},mo=e=>{const{canStartStopTransform:t}=Object(ie.t)(),n=Object(ie.s)(),[r,s]=Object(L.useState)(!1),[a,o]=Object(L.useState)([]),i=e=>{Array.isArray(e)&&(o(e),s(!0))},l=Object(L.useCallback)((e=>{s(!1),n(e.map((e=>({id:e.id,state:e.stats?e.stats.state:"waiting"}))))}),[n]),c=Object(L.useCallback)((e=>n([{id:e.id,state:e.stats?e.stats.state:"waiting"}])),[n]);return{action:Object(L.useMemo)((()=>({name:t=>Object(G.jsx)(po,{items:[t],forceDisable:e}),available:e=>!Be(e)||e.stats.state!==Ve.t.STOPPED,enabled:n=>Be(n)&&!uo([n],t,e),description:co,icon:"stop",type:"icon",onClick:e=>{Ga(e)?i([e]):c(e)},"data-test-subj":"transformActionStop"})),[t,c,e]),closeModal:()=>s(!1),openModal:i,isModalVisible:r,items:a,stopAndCloseModal:l}},go=R.i18n.translate("xpack.transform.transformList.cloneActionNameText",{defaultMessage:"Clone"}),fo=({disabled:e})=>e?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:Ma("canStartStopTransform")},Object(G.jsx)(P.a.Fragment,null,go)):Object(G.jsx)(P.a.Fragment,null,go),ho=R.i18n.translate("xpack.transform.transformList.discoverActionNameText",{defaultMessage:"View in Discover"}),yo=({dataViewExists:e,items:t})=>{var n;const r=t.length>1,s=t[0],a=(null===(n=s.stats)||void 0===n?void 0:n.state)===Ve.t.STOPPED,o=Ge(s),i=void 0===s.config.sync,l=a&&void 0===o&&!0===i;let c;return!0===r?c=R.i18n.translate("xpack.transform.transformList.discoverTransformBulkToolTip",{defaultMessage:"Links to Discover are not supported as a bulk action."}):e?l&&(c=R.i18n.translate("xpack.transform.transformList.discoverTransformToolTip",{defaultMessage:"The transform needs to be started before it's available in Discover."})):c=R.i18n.translate("xpack.transform.transformList.discoverTransformNoDataViewToolTip",{defaultMessage:"A Kibana data view is required for the destination index to be viewable in Discover"}),void 0!==c?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:c},Object(G.jsx)("span",{"data-test-subj":"transformDiscoverActionNameText disabled"},ho)):Object(G.jsx)("span",{"data-test-subj":"transformDiscoverActionNameText enabled"},ho)};var bo=n(28),jo=n(23),_o=n(51),xo=n(121),vo=n.n(xo);const Oo=(e,t,n,r)=>{const s=void 0!==(null==r?void 0:r.defaultValue)?r.defaultValue:"",a=je(null!=n?n:{},t,void 0);return{formFieldName:e,configFieldName:t,defaultValue:s,dependsOn:[],errorMessages:[],isNullable:!1,isOptional:!0,validator:"stringValidator",value:null!=a?a.toString():"",valueParser:"defaultParser",...void 0!==r?{...r}:{}}},wo=(e,t,n,r)=>{var s;const a=null!==(s=null==r?void 0:r.defaultEnabled)&&void 0!==s&&s,o=je(null!=n?n:{},t,void 0);return{formSectionName:e,configFieldName:t,defaultEnabled:a,enabled:Object(he.a)(o)}},Eo=e=>({formFields:{description:Oo("description","description",e),frequency:Oo("frequency","frequency",e,{defaultValue:Ve.e,validator:"frequencyValidator"}),destinationIndex:Oo("destinationIndex","dest.index",e,{dependsOn:["destinationIngestPipeline"],isOptional:!1}),destinationIngestPipeline:Oo("destinationIngestPipeline","dest.pipeline",e,{dependsOn:["destinationIndex"],isOptional:!0}),docsPerSecond:Oo("docsPerSecond","settings.docs_per_second",e,{isNullable:!0,isOptional:!0,validator:"integerAboveZeroValidator",valueParser:"nullableNumberParser"}),maxPageSearchSize:Oo("maxPageSearchSize","settings.max_page_search_size",e,{defaultValue:`${Ve.g}`,isNullable:!0,isOptional:!0,validator:"transformSettingsPageSearchSizeValidator",valueParser:"numberParser"}),numFailureRetries:Oo("numFailureRetries","settings.num_failure_retries",e,{defaultValue:void 0,isNullable:!0,isOptional:!0,validator:"transformSettingsNumberOfRetriesValidator",valueParser:"numberParser"}),retentionPolicyField:Oo("retentionPolicyField","retention_policy.time.field",e,{dependsOn:["retentionPolicyMaxAge"],isNullable:!1,isOptional:!0,isOptionalInSection:!1,section:"retentionPolicy"}),retentionPolicyMaxAge:Oo("retentionPolicyMaxAge","retention_policy.time.max_age",e,{dependsOn:["retentionPolicyField"],isNullable:!1,isOptional:!0,isOptionalInSection:!1,section:"retentionPolicy",validator:"retentionPolicyMaxAgeValidator"})},formSections:{retentionPolicy:wo("retentionPolicy","retention_policy",e)}}),So={frequencyValidator:e=>{const t=it(e);return Array.isArray(t)?t:lt(t)?[]:[at]},integerAboveZeroValidator:e=>null===mt(+e)?[]:[dt],transformSettingsNumberOfRetriesValidator:e=>null===yt(+e)?[]:[ht],transformSettingsPageSearchSizeValidator:_t,retentionPolicyMaxAgeValidator:e=>{const t=it(e);return Array.isArray(t)?t:ft(e)?[]:[nt]},stringValidator:(e,t=!0)=>"string"!=typeof e?[st]:0!==e.length||t?[]:[rt]};function To(e,t){const n=e.formFields[t];let r=n.isOptional;return n.section&&e.formSections[n.section].enabled&&!1===n.isOptionalInSection&&(r=!1),r}function ko(e,t,n){return t&&"string"==typeof e&&0===e.length?[]:So[n](e,t)}const Ao=Object(bo.createSlice)({name:"editTransformFlyout",initialState:Eo(),reducers:{initialize:(e,t)=>Eo(t.payload.config),setApiError:(e,t)=>{e.apiErrorMessage=t.payload},setFormField:(e,t)=>{const n=e.formFields[t.payload.field],r=To(e,t.payload.field);n.errorMessages=ko(t.payload.value,r,n.validator),n.value=t.payload.value},setFormSection:(e,t)=>{e.formSections[t.payload.section].enabled=t.payload.enabled,Object.entries(e.formFields).forEach((([t,n])=>{const r=To(e,t);n.errorMessages=ko(n.value,r,n.validator)}))}}}),Mo=()=>Object(bo.configureStore)({reducer:Ao.reducer}),Co=Object(L.createContext)(null),Fo=({children:e,...t})=>{const n=Object(L.useMemo)(Mo,[]);return vo()((()=>{n.dispatch(Ao.actions.initialize(t))})),Object(G.jsx)(Co.Provider,{value:t},Object(G.jsx)(jo.Provider,{store:n},e))},Ro=()=>{const e=Object(L.useContext)(Co);if(null===e)throw new Error("EditTransformFlyoutContext not set.");return e},Io=()=>{const e=Object(jo.useDispatch)();return Object(L.useMemo)((()=>Object(_o.bindActionCreators)(Ao.actions,e)),[e])},Do=e=>e.apiErrorMessage,qo=()=>{const e=Object(jo.useSelector)(Do);return void 0===e?null:Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)(oe.EuiCallOut,{title:R.i18n.translate("xpack.transform.transformList.editTransformGenericErrorMessage",{defaultMessage:"An error occurred calling the API endpoint to update transforms."}),color:"danger",iconType:"warning"},Object(G.jsx)("p",null,e)))},$o=()=>{const{esTransformUpdate:e}=Object(le.a)();return Object(G.jsx)(oe.EuiCallOut,null,Object(G.jsx)(oe.EuiFlexGroup,null,Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiIcon,{type:"help"})),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiTextColor,{color:"subdued"},R.i18n.translate("xpack.transform.transformList.editFlyoutCalloutText",{defaultMessage:"This form allows you to update a transform. The list of properties that you can update is a subset of the list that you can define when you create a transform."})),Object(G.jsx)(oe.EuiLink,{href:e,target:"_BLANK"},R.i18n.translate("xpack.transform.transformList.editFlyoutCalloutDocs",{defaultMessage:"View docs"})))))},Lo=e=>e.formFields,Po=e=>{const t=Object(L.useMemo)((()=>(e=>t=>t.formFields[e])(e)),[e]);return Object(jo.useSelector)(t)};function No(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Bo=({field:e,label:t,helpText:n,placeHolder:r=!1})=>{const{defaultValue:s,errorMessages:a,value:o}=Po(e),{setFormField:i}=Io(),l=No(e);return Object(G.jsx)(oe.EuiFormRow,{label:t,helpText:n,isInvalid:a.length>0,error:a},Object(G.jsx)(oe.EuiFieldText,{"data-test-subj":`transformEditFlyout${l}Input`,placeholder:r?R.i18n.translate("xpack.transform.transformList.editFlyoutFormPlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:s}}):void 0,isInvalid:a.length>0,value:o,onChange:t=>i({field:e,value:t.target.value}),"aria-label":t}))},zo=({field:e,label:t,helpText:n,placeHolder:r=!1})=>{const{defaultValue:s,errorMessages:a,value:o}=Po(e),{setFormField:i}=Io(),l=No(e);return Object(G.jsx)(oe.EuiFormRow,{label:t,helpText:n,isInvalid:a.length>0,error:a},Object(G.jsx)(oe.EuiTextArea,{"data-test-subj":`transformEditFlyout${l}Input`,placeholder:r?R.i18n.translate("xpack.transform.transformList.editFlyoutFormPlaceholderText",{defaultMessage:"Default: {defaultValue}",values:{defaultValue:s}}):void 0,isInvalid:a.length>0,value:o,onChange:t=>i({field:e,value:t.target.value}),"aria-label":t}))},Vo=e=>e.formSections,Go=e=>e.formFields.retentionPolicyField,Qo=()=>{const e=Object(Ct.a)(),t=Object(Ct.b)(),{config:n,dataViewId:r}=Ro(),s=Object(jo.useSelector)(Vo),a=Object(jo.useSelector)(Go),{setFormField:o,setFormSection:i}=Io(),l=Object(L.useMemo)((()=>({source:n.source,...Wn(n)?{pivot:n.pivot}:{},...Jn(n)?{latest:n.latest}:{}})),[n]),{error:c,data:u}=Object(ie.n)(l),p=Object(L.useMemo)((()=>{if(null!=u&&u.generated_dest_index){const e=u.generated_dest_index.mappings.properties;return Object.keys(e).filter((t=>"date"===e[t].type))}return[]}),[u]);Object(L.useEffect)((()=>{null!==c&&t.addDanger({title:R.i18n.translate("xpack.transform.transformList.errorGettingTransformPreview",{defaultMessage:"An error occurred fetching the transform preview"}),text:Object(kr.a)(Object(G.jsx)(Js.a,{text:Object(Zr.a)(c)}),e)})}),[c]);const d=p.length>0,m=Object(L.useMemo)((()=>Array.isArray(p)?p.map((e=>({text:e,value:e}))):[]),[p]);return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFormRow,{helpText:!1===d?R.i18n.translate("xpack.transform.transformList.editFlyoutFormEetentionPolicyError",{defaultMessage:"Retention policy settings are not available for indices without date fields."}):""},Object(G.jsx)(oe.EuiSwitch,{name:"transformEditRetentionPolicySwitch",label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicySwitchLabel",{defaultMessage:"Retention policy"}),checked:s.retentionPolicy.enabled,onChange:e=>i({section:"retentionPolicy",enabled:e.target.checked}),disabled:!d,"data-test-subj":"transformEditRetentionPolicySwitch"})),s.retentionPolicy.enabled&&Object(G.jsx)("div",{"data-test-subj":"transformEditRetentionPolicyContent"},Object(G.jsx)(oe.EuiSpacer,{size:"m"}),r?Object(G.jsx)(oe.EuiFormRow,{label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyFieldLabel",{defaultMessage:"Field"}),isInvalid:a.errorMessages.length>0,error:a.errorMessages,helpText:R.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyDateFieldHelpText",{defaultMessage:"Select the date field that can be used to identify out of date documents in the destination index."})},Object(G.jsx)(oe.EuiSelect,{"aria-label":R.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyFieldSelectAriaLabel",{defaultMessage:"Date field to set retention policy"}),"data-test-subj":"transformEditFlyoutRetentionPolicyFieldSelect",options:m,value:a.value,onChange:e=>o({field:"retentionPolicyField",value:e.target.value}),hasNoInitialSelection:!m.map((e=>e.text)).includes(a.value)})):Object(G.jsx)(Bo,{field:"retentionPolicyField",label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyFieldLabel",{defaultMessage:"Field"})}),Object(G.jsx)(Bo,{field:"retentionPolicyMaxAge",label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormRetentionPolicyMaxAgeLabel",{defaultMessage:"Max age"})})))},Uo=R.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationIngestPipelineLabel",{defaultMessage:"Ingest Pipeline"}),Ho=()=>{var e;const{euiTheme:t}=Object(oe.useEuiTheme)(),{errorMessages:n,value:r}=Po("destinationIngestPipeline"),{setFormField:s}=Io(),{data:a,isLoading:o}=Object(ie.h)(),i=null!==(e=null==a?void 0:a.map((({name:e})=>e)))&&void 0!==e?e:[];return Object(G.jsx)(P.a.Fragment,null,i.length>0||o?Object(G.jsx)(oe.EuiFormRow,{label:Uo,isInvalid:n.length>0,error:n},Object(G.jsx)(oe.EuiSkeletonRectangle,{width:"100%",height:t.size.xxl,isLoading:o,contentAriaLabel:Uo},Object(G.jsx)(oe.EuiComboBox,{"data-test-subj":"transformEditFlyoutDestinationIngestPipelineFieldSelect","aria-label":R.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormDestinationIngestPipelineFieldSelectAriaLabel",{defaultMessage:"Select an ingest pipeline"}),placeholder:R.i18n.translate("xpack.transform.stepDetailsForm.editFlyoutFormDestinationIngestPipelineFieldSelectPlaceholder",{defaultMessage:"Select an ingest pipeline"}),singleSelection:{asPlainText:!0},options:i.map((e=>({label:e}))),selectedOptions:[{label:r}],onChange:e=>{var t,n;return s({field:"destinationIngestPipeline",value:null!==(t=null===(n=e[0])||void 0===n?void 0:n.label)&&void 0!==t?t:""})}}))):Object(G.jsx)(Bo,{field:"destinationIngestPipeline",label:Uo}))},Wo=()=>Object(G.jsx)(oe.EuiForm,null,Object(G.jsx)(zo,{field:"description",label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormDescriptionLabel",{defaultMessage:"Description"})}),Object(G.jsx)(Bo,{field:"frequency",label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyLabel",{defaultMessage:"Frequency"}),helpText:R.i18n.translate("xpack.transform.transformList.editFlyoutFormFrequencyHelpText",{defaultMessage:"The interval to check for changes in source indices when the transform runs continuously."})}),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(Qo,null),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(oe.EuiAccordion,{"data-test-subj":"transformEditAccordionDestination",id:"transformEditAccordionDestination",buttonContent:R.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationButtonContent",{defaultMessage:"Destination configuration"}),paddingSize:"s"},Object(G.jsx)("div",{"data-test-subj":"transformEditAccordionDestinationContent"},Object(G.jsx)(Bo,{field:"destinationIndex",label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormDestinationIndexLabel",{defaultMessage:"Destination index"})}),Object(G.jsx)(oe.EuiSpacer,{size:"m"}),Object(G.jsx)("div",{"data-test-subj":"transformEditAccordionIngestPipelineContent"},Object(G.jsx)(Ho,null)))),Object(G.jsx)(oe.EuiSpacer,{size:"l"}),Object(G.jsx)(oe.EuiAccordion,{"data-test-subj":"transformEditAccordionAdvancedSettings",id:"transformEditAccordionAdvancedSettings",buttonContent:R.i18n.translate("xpack.transform.transformList.editFlyoutFormAdvancedSettingsButtonContent",{defaultMessage:"Advanced settings"}),paddingSize:"s"},Object(G.jsx)("div",{"data-test-subj":"transformEditAccordionAdvancedSettingsContent"},Object(G.jsx)(Bo,{field:"docsPerSecond",helpText:R.i18n.translate("xpack.transform.transformList.editFlyoutFormDocsPerSecondHelpText",{defaultMessage:"To enable throttling, set a limit of documents to input per second."}),label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormDocsPerSecondLabel",{defaultMessage:"Documents per second"})}),Object(G.jsx)(Bo,{field:"maxPageSearchSize",helpText:R.i18n.translate("xpack.transform.transformList.editFlyoutFormMaxPageSearchSizeHelpText",{defaultMessage:"The initial page size to use for the composite aggregation for each checkpoint."}),label:R.i18n.translate("xpack.transform.transformList.editFlyoutFormMaxPageSearchSizeLabel",{defaultMessage:"Maximum page search size"}),placeHolder:!0}),Object(G.jsx)(Bo,{field:"numFailureRetries",helpText:R.i18n.translate("xpack.transform.transformList.editFlyoutFormNumFailureRetriesHelpText",{defaultMessage:"The number of retries on a recoverable failure before the transform task is marked as failed. Set it to -1 for infinite retries."}),label:R.i18n.translate("xpack.transform.transformList.numFailureRetriesLabel",{defaultMessage:"Number of failure retries"})})))),Jo=e=>Object.values(e).map((e=>e.value)),Ko=e=>Object.values(e).map((e=>e.enabled)),Yo=Object(bo.createSelector)(Lo,(e=>Object.values(e).every((e=>0===e.errorMessages.length)))),Xo=(e,t,n)=>{let r=e;const s=t.split("."),a=s.length;for(let e=0;e<a-1;e++){const t=s[e];"object"!=typeof r[t]&&(r[t]={}),r=r[t]}return r[s[a-1]]=n,e},Zo={defaultParser:e=>e,nullableNumberParser:e=>""===e?null:+e,numberParser:e=>+e},ei=(e,t,n,r,s=!1)=>{const a=n[e],o=a.isNullable?null:a.defaultValue,i=void 0===a.section||r[a.section].enabled,l=""!==a.value?Zo[a.valueParser](a.value):o,c=je(t,a.configFieldName,o),u=!1===s?a.dependsOn.reduce(((e,s)=>Object(m.merge)({...e},ei(s,t,n,r,!0))),{}):{};return l===a.defaultValue&&l===c&&a.isOptional?{}:void 0===a.section||i?i&&(l!==c||s)?Xo(u,a.configFieldName,""===l&&a.isOptional?void 0:l):{}:Xo(u,r[a.section].configFieldName,null)},ti=({closeFlyout:e})=>{const{config:t}=Ro(),n=Object(jo.useSelector)(Yo),r=(()=>{const{config:e}=Ro(),t=Object(L.useMemo)((()=>{return t=e,Object(bo.createSelector)(Lo,Vo,((e,n)=>((e,t,n)=>{const r=Eo(e);return!Object(m.isEqual)(Jo(r.formFields),Jo(t))||!Object(m.isEqual)(Ko(r.formSections),Ko(n))})(t,e,n)));var t}),[e]);return Object(jo.useSelector)(t)})(),s=(()=>{const{config:e}=Ro(),t=Object(L.useMemo)((()=>{return t=e,Object(bo.createSelector)(Lo,Vo,((e,n)=>((e,t,n)=>Object.keys(t).reduce(((r,s)=>Object(m.merge)({...r},ei(s,e,t,n))),{}))(t,e,n)));var t}),[e]);return Object(jo.useSelector)(t)})(),a=!n||!r,{setApiError:o}=Io(),i=Object(ie.u)(t.id,s);return Object(G.jsx)(oe.EuiButton,{"data-test-subj":"transformEditFlyoutUpdateButton",onClick:async function(){o(void 0),i(void 0,{onError:e=>o(Object(Zr.a)(e)),onSuccess:()=>e()})},fill:!0,isDisabled:a},R.i18n.translate("xpack.transform.transformList.editFlyoutUpdateButtonText",{defaultMessage:"Update"}))},ni=({closeFlyout:e,config:t,dataViewId:n,isFlyoutVisible:r})=>t&&r?Object(G.jsx)(Fo,{config:t,dataViewId:n},Object(G.jsx)(oe.EuiFlyout,{onClose:e,hideCloseButton:!0,"aria-labelledby":"transformEditFlyoutTitle","data-test-subj":"transformEditFlyout"},Object(G.jsx)(oe.EuiFlyoutHeader,{hasBorder:!0},Object(G.jsx)(oe.EuiTitle,{size:"m"},Object(G.jsx)("h2",{id:"transformEditFlyoutTitle"},R.i18n.translate("xpack.transform.transformList.editFlyoutTitle",{defaultMessage:"Edit {transformId}",values:{transformId:t.id}})))),Ga({config:t})?Object(G.jsx)(Qa,{count:1,action:R.i18n.translate("xpack.transform.transformList.editManagedTransformsDescription",{defaultMessage:"editing"})}):null,Object(G.jsx)(oe.EuiFlyoutBody,{banner:Object(G.jsx)($o,null)},Object(G.jsx)(Wo,null),Object(G.jsx)(qo,null)),Object(G.jsx)(oe.EuiFlyoutFooter,null,Object(G.jsx)(oe.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(oe.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},R.i18n.translate("xpack.transform.transformList.editFlyoutCancelButtonText",{defaultMessage:"Cancel"}))),Object(G.jsx)(oe.EuiFlexItem,{grow:!1},Object(G.jsx)(ti,{closeFlyout:e})))))):null,ri=R.i18n.translate("xpack.transform.transformList.editActionNameText",{defaultMessage:"Edit"}),si=()=>{const{canCreateTransform:e}=Object(ie.t)();return e?Object(G.jsx)(P.a.Fragment,null,ri):Object(G.jsx)(oe.EuiToolTip,{position:"top",content:Ma("canStartStopTransform")},Object(G.jsx)(P.a.Fragment,null,ri))},ai=R.i18n.translate("xpack.transform.transformList.createAlertRuleNameText",{defaultMessage:"Create alert rule"}),oi=({disabled:e})=>e?Object(G.jsx)(oe.EuiToolTip,{position:"top",content:Ma("canCreateTransformAlerts")},Object(G.jsx)(P.a.Fragment,null,ai)):Object(G.jsx)(P.a.Fragment,null,ai),ii=({closeModal:e,items:t,stopAndCloseModal:n})=>{const r=Object(L.useMemo)((()=>t.some((e=>Ga(e)))),[t]),s=t.length>1,a=R.i18n.translate("xpack.transform.transformList.bulkStopModalTitle",{defaultMessage:"Stop {count} {count, plural, one {transform} other {transforms}}?",values:{count:t&&t.length}}),o=R.i18n.translate("xpack.transform.transformList.stopModalTitle",{defaultMessage:"Stop {transformId}?",values:{transformId:t[0]&&t[0].config.id}});return Object(G.jsx)(oe.EuiConfirmModal,{"data-test-subj":"transformStopModal",title:!0===s?a:o,onCancel:e,onConfirm:()=>n(t),cancelButtonText:R.i18n.translate("xpack.transform.transformList.startModalCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:R.i18n.translate("xpack.transform.transformList.startModalStopButton",{defaultMessage:"Stop"}),defaultFocusedButton:oe.EUI_MODAL_CONFIRM_BUTTON,buttonColor:"primary"},r?Object(G.jsx)(Qa,{count:t.length,action:R.i18n.translate("xpack.transform.transformList.stopManagedTransformsDescription",{defaultMessage:"stopping"})}):null)},li=({forceDisable:e,transformNodes:t})=>{const n=((e,t)=>{const n=Object(z.useHistory)(),r=Object(Ct.b)(),{data:s}=Object(ie.f)(),{canCreateTransform:a}=Object(ie.t)(),o=Object(L.useCallback)((async e=>{try{if(!s)return;const t=Array.isArray(e.config.source.index)?e.config.source.index.join(","):e.config.source.index,a=s[t];void 0===a?r.addDanger(R.i18n.translate("xpack.transform.clone.noDataViewErrorPromptText",{defaultMessage:"Unable to clone the transform {transformId}. No data view exists for {dataViewTitle}.",values:{dataViewTitle:t,transformId:e.id}})):n.push(`/${re.CLONE_TRANSFORM}/${e.id}?dataViewId=${a}`)}catch(e){r.addError(e,{title:R.i18n.translate("xpack.transform.clone.errorPromptText",{defaultMessage:"An error occurred checking if source data view exists"})})}}),[s,n,r]);return{action:Object(L.useMemo)((()=>({name:e=>Object(G.jsx)(fo,{disabled:!a}),enabled:()=>void 0!==s&&a&&!e&&t>0,description:go,icon:"copy",type:"icon",onClick:o,"data-test-subj":"transformActionClone"})),[a,s,e,o,t])}})(e,t),r=Va(e),s=(e=>{var t;const{share:n,application:{capabilities:r}}=Object(Ct.a)(),s=!(null===(t=r.discover)||void 0===t||!t.show),{data:a}=Object(ie.f)(),o=Object(L.useCallback)((e=>{const t=n.url.locators.get(Us.DISCOVER_APP_LOCATOR);if(!t||!a)return;const r=a[e.config.dest.index];r&&t.navigateSync({indexPatternId:r})}),[a,n]),i=Object(L.useCallback)((e=>!!a&&void 0!==a[e.config.dest.index]),[a]);return{action:Object(L.useMemo)((()=>({name:e=>Object(G.jsx)(yo,{items:[e],dataViewExists:i(e)}),available:()=>s,enabled:t=>!((e,t,n)=>{var r;if(1!==e.length)return!0;const s=e[0],a=(null===(r=s.stats)||void 0===r?void 0:r.state)===Ve.t.STOPPED,o=Ge(s),i=void 0===s.config.sync;return!0===t||!1===n||1==(!0===a&&void 0===o&&!0===i)})([t],e,i(t)),description:ho,icon:"visTable",type:"icon",onClick:o,"data-test-subj":"transformActionDiscover"})),[e,i,s,o])}})(e),a=((e,t)=>{const{data:n}=Object(ie.f)(),{canCreateTransform:r}=Object(ie.t)(),[s,a]=Object(L.useState)(),[o,i]=Object(L.useState)(!1),[l,c]=Object(L.useState)(),u=Object(Ct.b)(),p=Object(L.useCallback)((async e=>{try{if(!n)return;const t=Array.isArray(e.config.source.index)?e.config.source.index.join(","):e.config.source.index,r=n[t];void 0===r?u.addWarning(R.i18n.translate("xpack.transform.edit.noDataViewErrorPromptText",{defaultMessage:"Unable to get the data view for the transform {transformId}. No data view exists for {dataViewTitle}.",values:{dataViewTitle:t,transformId:e.id}})):c(r),a(e.config),i(!0)}catch(e){u.addError(e,{title:R.i18n.translate("xpack.transform.edit.errorPromptText",{defaultMessage:"An error occurred checking if source data view exists"})})}}),[n,u]);return{action:Object(L.useMemo)((()=>({name:()=>Object(G.jsx)(si,null),enabled:()=>r&&!e&&t>0,description:ri,icon:"pencil",type:"icon",onClick:e=>p(e),"data-test-subj":"transformActionEdit"})),[r,p,e,t]),config:s,closeFlyout:()=>i(!1),isFlyoutVisible:o,dataViewId:l}})(e,t),o=Ia(e,t),i=Xa(e),l=lo(e,t),c=ro(e,t),u=mo(e),p=(e=>{const{canCreateTransformAlerts:t}=Object(ie.t)(),{setCreateAlertRule:n}=ea(),r=Object(L.useCallback)((e=>{n(e.id)}),[n]);return{action:Object(L.useMemo)((()=>({name:e=>Object(G.jsx)(oi,{disabled:!t}),available:e=>Kn(e.config),enabled:()=>t&&!e,description:ai,type:"icon",icon:"bell",onClick:r,"data-test-subj":"transformActionCreateAlertRule"})),[t,e,r])}})(e);return{modals:Object(G.jsx)(P.a.Fragment,null,i.isModalVisible&&Object(G.jsx)(Za,i),c.isModalVisible&&Object(G.jsx)(so,c),u.isModalVisible&&Object(G.jsx)(ii,u),o.isModalVisible&&Object(G.jsx)(Da,o),Object(G.jsx)(ni,a),r.isModalVisible&&Object(G.jsx)(Ua,r)),actions:[s.action,p.action,l.action,c.action,u.action,a.action,n.action,r.action,o.action,i.action]}},ci=({healthStatus:e,compact:t=!0,showToolTip:n=!0})=>{const r=Ve.n[e],s=Ve.m[e],a=Ve.o[e],o=Object(G.jsx)(oe.EuiHealth,{color:s,textSize:t?"xs":void 0,"data-test-subj":"transformListHealth"},a,t?"":`: ${r}`);return n?Object(G.jsx)(oe.EuiToolTip,{content:r},o):o},ui={aborting:"warning",failed:"danger",indexing:"primary",started:"primary",stopped:"hollow",stopping:"hollow",waiting:"hollow"},pi=({state:e,reason:t})=>{const n=ui[e];return e===Ve.t.FAILED&&void 0!==t?Object(G.jsx)(oe.EuiToolTip,{content:t},Object(G.jsx)(oe.EuiBadge,{className:"transform__TaskStateBadge",color:n},e)):Object(G.jsx)(oe.EuiBadge,{className:"transform__TaskStateBadge",color:n},e)},di=R.i18n.translate("xpack.transform.transformList.needsReauthorizationBadge.insufficientPermissions",{defaultMessage:"This transform was created with insufficient permissions."}),mi=()=>Object(G.jsx)(oe.EuiText,{textAlign:"center",color:"subdued",size:"s"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.statsUnknown",defaultMessage:"Unknown"})),gi=({section:e})=>0===e.items.length?null:Object(G.jsx)(oe.EuiPanel,null,Object(G.jsx)(oe.EuiTitle,{size:"xs"},Object(G.jsx)("span",null,e.title)),Object(G.jsx)(oe.EuiDescriptionList,{compressed:!0,type:"column",listItems:e.items})),fi=({sections:e,showErrorCallout:t=!1,dataTestSubj:n})=>Object(G.jsx)("div",{"data-test-subj":null!=n?n:"transformDetailsTabContent"},t&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiCallOut,{color:"warning",iconType:"warning",size:"m"},Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.list.extendedStatsError",defaultMessage:"An error occurred fetching the extended stats for this transform. Basic stats are displayed instead."})))),Object(G.jsx)(oe.EuiFlexGroup,null,Object(G.jsx)(oe.EuiFlexItem,{style:{width:"50%"}},e.filter((e=>"left"===e.position)).map((e=>Object(G.jsx)(L.Fragment,{key:e.title},Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(gi,{section:e}))))),Object(G.jsx)(oe.EuiFlexItem,{style:{width:"50%"}},e.filter((e=>"right"===e.position)).map((e=>Object(G.jsx)(L.Fragment,{key:e.title},Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(gi,{section:e}))))))),hi=({item:e,onAlertEdit:t})=>{var n;const{data:r,isError:s,isLoading:a}=Object(ie.l)(e.id,!1,!0);let o={};void 0===r||a||s?Be(e)&&(o=e.stats):o=r.transforms[0];const{showNodeInfo:i}=De(),l=[{title:"ID",description:e.id}],c=Object(L.useMemo)((()=>{var t,n,r,s;const a=[{title:"transform_id",description:e.id},{title:"transform_version",description:null!==(t=e.config.version)&&void 0!==t?t:""},{title:"description",description:null!==(n=e.config.description)&&void 0!==n?n:""},{title:"create_time",description:null!==(r=ir(1e3*zt()(e.config.create_time).unix()))&&void 0!==r?r:""},{title:"source_index",description:Array.isArray(e.config.source.index)?e.config.source.index[0]:e.config.source.index},{title:"destination_index",description:e.config.dest.index},{title:"authorization",description:e.config.authorization?JSON.stringify(e.config.authorization):""}];var o,i;return Object(he.a)(null===(s=e.config.settings)||void 0===s?void 0:s.num_failure_retries)&&a.push({title:"num_failure_retries",description:null!==(o=null===(i=e.config.settings)||void 0===i?void 0:i.num_failure_retries)&&void 0!==o?o:""}),a}),[null==e?void 0:e.config]),u=[];Oa(o)&&(l.push({title:"state",description:o.state}),i&&void 0!==o.node&&l.push({title:"node.name",description:o.node.name}),void 0!==o.health&&l.push({title:"health",description:Object(G.jsx)(ci,{healthStatus:Object(Ve.v)(o.health.status)})}),void 0!==o.checkpointing.changes_last_detected_at&&u.push({title:"changes_last_detected_at",description:ir(o.checkpointing.changes_last_detected_at)}),void 0!==o.checkpointing.last&&(u.push({title:"last.checkpoint",description:o.checkpointing.last.checkpoint}),void 0!==o.checkpointing.last.timestamp_millis&&(u.push({title:"last.timestamp",description:ir(o.checkpointing.last.timestamp_millis)}),u.push({title:"last.timestamp_millis",description:o.checkpointing.last.timestamp_millis}))),void 0!==o.checkpointing.last_search_time&&u.push({title:"last_search_time",description:ir(o.checkpointing.last_search_time)}),void 0!==o.checkpointing.next&&(u.push({title:"next.checkpoint",description:o.checkpointing.next.checkpoint}),void 0!==o.checkpointing.next.checkpoint_progress&&(u.push({title:"next.checkpoint_progress.total_docs",description:o.checkpointing.next.checkpoint_progress.total_docs}),u.push({title:"next.checkpoint_progress.docs_remaining",description:o.checkpointing.next.checkpoint_progress.docs_remaining}),u.push({title:"next.checkpoint_progress.percent_complete",description:`${Math.round(o.checkpointing.next.checkpoint_progress.percent_complete)}%`}))),void 0!==o.checkpointing.operations_behind&&u.push({title:"operations_behind",description:o.checkpointing.operations_behind}));const p={title:R.i18n.translate("xpack.transform.transformList.transformDetails.stateTitle",{defaultMessage:"State"}),items:l,position:"right"},d={title:R.i18n.translate("xpack.transform.transformList.transformDetails.generalTitle",{defaultMessage:"General"}),items:c,position:"left"},m=null===(n=e.alerting_rules)||void 0===n?void 0:n.map((e=>({title:Object(G.jsx)(oe.EuiButtonEmpty,{iconType:"documentEdit",iconSide:"left",onClick:()=>{t(e)},flush:"left",size:"xs",iconSize:"s"},e.name),description:e.executionStatus.status}))),g={title:R.i18n.translate("xpack.transform.transformList.transformDetails.checkpointTitle",{defaultMessage:"Checkpointing"}),items:u,position:"right"},f={title:R.i18n.translate("xpack.transform.transformList.transformDetails.alertRulesTitle",{defaultMessage:"Alert rules"}),items:m,position:"right"};return Object(G.jsx)(fi,{sections:[d,p,g,...f.items?[f]:[]],showErrorCallout:s,dataTestSubj:"transformDetailsTabContent"})},yi=({json:e})=>Object(G.jsx)("div",{"data-test-subj":"transformJsonTabContent"},Object(G.jsx)(oe.EuiFlexGroup,null,Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiCodeBlock,{"aria-label":R.i18n.translate("xpack.transform.transformList.transformDetails.expandedRowJsonPane",{defaultMessage:"JSON of transform configuration"}),fontSize:"s",language:"json",paddingSize:"s",style:{width:"100%"},isCopyable:!0},JSON.stringify(e,null,2))),Object(G.jsx)(oe.EuiFlexItem,{grow:!1}," "))),[bi,ji,_i]=["info","warning","error"],xi=({message:e,showTooltip:t=!1})=>{if(void 0===e)return Object(G.jsx)("span",null);let n="primary",r="warning";return e.level===bi?r="iInCircle":e.level===ji?n="warning":e.level===_i&&(n="danger"),t?Object(G.jsx)(oe.EuiToolTip,{position:"bottom",content:e.text},Object(G.jsx)(oe.EuiIcon,{type:r,color:n})):Object(G.jsx)(oe.EuiIcon,{type:r,color:n})},vi=({transformId:e})=>{const{euiTheme:t}=Object(oe.useEuiTheme)(),{showNodeInfo:n}=De(),[r,s]=Object(L.useState)(0),[a,o]=Object(L.useState)(10),[i,l]=Object(L.useState)({sort:{field:"timestamp",direction:"desc"}}),{isLoading:c,error:u,data:p={messages:[],total:0}}=Object(ie.j)(e,i.sort.field,i.sort.direction),{messages:d,total:m}=p,g=null!==u?R.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.errorMessage",{defaultMessage:"Messages could not be loaded"}):"",f=Object(ie.o)(),h=[{name:f?Object(G.jsx)(oe.EuiToolTip,{content:R.i18n.translate("xpack.transform.transformList.refreshLabel",{defaultMessage:"Refresh"})},Object(G.jsx)(oe.EuiButtonIcon,{onClick:e=>{e.currentTarget.blur(),f()},iconType:"refresh","aria-label":R.i18n.translate("xpack.transform.transformList.refreshAriaLabel",{defaultMessage:"Refresh"})})):"",render:e=>Object(G.jsx)("div",{css:Object(G.css)({marginLeft:`-${1.75*t.base}px`},"","")},Object(G.jsx)(xi,{message:e})),width:t.size.xl},{field:"timestamp",name:R.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.timeLabel",{defaultMessage:"Time"}),render:e=>Object(oe.formatDate)(e,Ve.j),sortable:!0},...n?[{field:"node_name",name:R.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.nodeLabel",{defaultMessage:"Node"}),sortable:!0}]:[],{field:"message",name:R.i18n.translate("xpack.transform.transformList.transformDetails.messagesPane.messageLabel",{defaultMessage:"Message"}),width:n?"50%":"70%"}],{pageOfMessages:y,totalItemCount:b}=(({index:e,size:t})=>{let n=d;if(m<=Ve.c){var r;const e=null!==(r=i.sort.field)&&void 0!==r?r:"timestamp";n=d.sort(((t,n)=>{const r=t[e],s=n[e];return"asc"===i.sort.direction?r-s:s-r}))}const s=n.length,a=e*t;return{pageOfMessages:n.slice(a,a+t),totalItemCount:s}})({index:r,size:a}),j={pageIndex:r,pageSize:a,totalItemCount:b,pageSizeOptions:[10,20,50],showPerPageOptions:!0};return Object(G.jsx)(oe.EuiPanel,{color:"transparent",hasBorder:!1,paddingSize:"s","data-test-subj":"transformMessagesTabContent"},Object(G.jsx)(oe.EuiBasicTable,{className:"transform__TransformTable__messagesPaneTable",items:y,columns:h,compressed:!0,loading:c,error:g,pagination:j,onChange:({page:e={index:0,size:10},sort:t})=>{const{index:n,size:r}=e;s(n),o(r),t&&l({sort:t})},sorting:i}))},Oi=({transformConfig:e})=>{const t=Object(Ct.b)(),{searchQuery:n,validationStatus:r,previewRequest:s,runtimeMappings:a}=Object(L.useMemo)((()=>sr(or({}),e)),[e]),o=Object(L.useMemo)((()=>Vn(n)),[n]),i=Array.isArray(e.source.index)?e.source.index.join(","):e.source.index,l=ss({getIndexPattern:()=>i},o,r,s,a);return Object(G.jsx)(xr,H()({},l,{dataTestSubj:"transformPivotPreview",toastNotifications:t}))},wi=({health:e})=>{const t=Object(Ve.v)(null==e?void 0:e.status),n=null==e?void 0:e.issues,r=[{field:"first_occurrence",name:R.i18n.translate("xpack.transform.transformList.transformDetails.healthPane.firstOccurrenceLabel",{defaultMessage:"First occurrence"}),render:e=>Object(oe.formatDate)(e,Ve.j),sortable:!0},{field:"count",name:R.i18n.translate("xpack.transform.transformList.transformDetails.healthPane.countLabel",{defaultMessage:"count"}),sortable:!0,width:"60px"},{field:"issue",name:R.i18n.translate("xpack.transform.transformList.transformDetails.healthPane.issueLabel",{defaultMessage:"Issue"}),sortable:!0},{field:"details",name:R.i18n.translate("xpack.transform.transformList.transformDetails.healthPane.detailsLabel",{defaultMessage:"Details"}),width:"50%"}];return Object(G.jsx)(oe.EuiPanel,{color:"transparent",hasBorder:!1,paddingSize:"s","data-test-subj":"transformHealthTabContent"},Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(ci,{healthStatus:t,compact:!1}),Array.isArray(n)&&n.length>0&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiInMemoryTable,{"data-test-subj":"transformHealthTabContentIssueTable",items:n,columns:r,compressed:!0,pagination:n.length>10,sorting:{sort:{field:"first_occurrence",direction:"desc"}}})))},Ei=({transformsStatsLoading:e})=>{const{euiTheme:t}=Object(oe.useEuiTheme)(),n=e?Object(G.jsx)(oe.EuiLoadingSpinner,null):Object(G.jsx)(oe.EuiFlexItem,{grow:!0},Object(G.jsx)(oe.EuiCallOut,{size:"s",color:"warning",iconType:"iInCircle",title:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.noStatsAvailable",defaultMessage:"No stats available for this transform."})}));return Object(G.jsx)(oe.EuiFlexGroup,{justifyContent:"center",alignItems:"center",css:Object(G.css)({height:t.size.xxxxl},"","")},n)},Si=({item:e})=>{const{data:t,isError:n,isLoading:r}=Object(ie.l)(e.id,!1,!0);if(!Be(e)&&void 0===t)return Object(G.jsx)(Ei,{transformsStatsLoading:r});let s={};if(void 0===t||r||n){if(Be(e)){var a;s=null===(a=e.stats)||void 0===a?void 0:a.stats}}else s=t.transforms[0].stats;const o={title:R.i18n.translate("xpack.transform.transformList.transformDetails.statsTitle",{defaultMessage:"Stats"}),items:Object.entries(s).map((e=>{return{title:e[0].toString(),description:(t=e[1],"object"==typeof t?JSON.stringify(t):t.toString())};var t})),position:"left"};return Object(G.jsx)(fi,{sections:[o],showErrorCallout:n,dataTestSubj:"transformStatsTabContent"})},Ti=({item:e,onAlertEdit:t})=>{var n;const{euiTheme:r}=Object(oe.useEuiTheme)(),s=function(e){let t=0,n=0;if(0===e.length)return t;for(let r=0;r<e.length;r++)n=e.charCodeAt(r),t=(t<<5)-t+n,t|=0;return t<0?-2*t:t}(e.id),a=[{id:`transform-details-tab-${s}`,"data-test-subj":"transformDetailsTab",name:R.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformDetailsLabel",{defaultMessage:"Details"}),content:Object(G.jsx)(hi,{item:e,onAlertEdit:t})},{id:`transform-stats-tab-${s}`,"data-test-subj":"transformStatsTab",name:R.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformStatsLabel",{defaultMessage:"Stats"}),content:Object(G.jsx)(Si,{item:e})},{id:`transform-json-tab-${s}`,"data-test-subj":"transformJsonTab",name:"JSON",content:Object(G.jsx)(yi,{json:e.config})},...null!==(n=e.stats)&&void 0!==n&&n.health?[{id:`transform-health-tab-${s}`,"data-test-subj":"transformHealthTab",name:R.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformHealthLabel",{defaultMessage:"Health"}),content:Object(G.jsx)(wi,{health:e.stats.health})}]:[],{id:`transform-messages-tab-${s}`,"data-test-subj":"transformMessagesTab",name:R.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformMessagesLabel",{defaultMessage:"Messages"}),content:Object(G.jsx)(vi,{transformId:e.id})},{id:`transform-preview-tab-${s}`,"data-test-subj":"transformPreviewTab",name:R.i18n.translate("xpack.transform.transformList.transformDetails.tabs.transformPreviewLabel",{defaultMessage:"Preview"}),content:Object(G.jsx)(Oi,{transformConfig:e.config})}];return Object(G.jsx)(oe.EuiTabbedContent,{size:"s",tabs:a,initialSelectedTab:a[0],onTabClick:()=>{},expand:!1,css:Object(G.css)("margin-left:-",r.size.xl,";width:calce(100% + ",r.size.xl,");.euiTable{background-color:transparent;}",""),"data-test-subj":"transformExpandedRowTabbedContent"})},ki=[{type:"field_value_selection",field:"state.state",name:R.i18n.translate("xpack.transform.statusFilter",{defaultMessage:"Status"}),multiSelect:"or",options:Object.values(Ve.t).map((e=>({value:e,name:e,view:Object(G.jsx)(pi,{state:e})})))},{type:"field_value_selection",field:"mode",name:R.i18n.translate("xpack.transform.modeFilter",{defaultMessage:"Mode"}),multiSelect:!1,options:Object.values(Ve.q).map((e=>({value:e,name:e,view:Object(G.jsx)(oe.EuiBadge,{className:"transform__TaskModeBadge",color:"hollow"},e)})))},{type:"field_value_selection",field:"health",name:R.i18n.translate("xpack.transform.healthFilter",{defaultMessage:"Health"}),multiSelect:!1,options:Object.values(Ve.p).map((e=>({value:e,name:e,view:Object(G.jsx)(ci,{compact:!0,showToolTip:!1,healthStatus:e})})))}];function Ai(e,t){return"string"==typeof e&&"string"==typeof t&&null===e.toLowerCase().match(t.toLowerCase())==0}const Mi=[10,25,50],Ci=({isLoading:e,onCreateTransform:t,transformNodes:n,transforms:r,transformsLoading:s,transformsStatsLoading:a})=>{var o,i,l;const c=Object(ie.o)(),{setEditAlertRule:u}=ea(),[p,d]=Object(L.useState)(),[m,g]=Object(L.useState)([]),[f,h]=Object(L.useState)([]),[y,b]=Object(L.useState)(!1),j=ro(!1,n),_=Va(!1),x=Ia(!1,n),v=Xa(!1),O=mo(!1),w=lo(!1,n),E=Object(ie.t)(),S=!E.canCreateTransform||!E.canPreviewTransform||!E.canStartStopTransform,{sorting:T,pagination:k,onTableChange:A}=function(e,t){const[n,r]=Object(L.useState)({pageIndex:0,pageSize:10,totalItemCount:0,showPerPageOptions:!0,sortField:e,sortDirection:"asc"}),{pageIndex:s,pageSize:a,sortField:o,sortDirection:i}=n;return{onTableChange:({page:t={index:0,size:10},sort:s={field:e,direction:"asc"}})=>{const{index:a,size:o}=t,{field:i,direction:l}=s;r({...n,pageIndex:a,pageSize:o,sortField:i,sortDirection:l})},pagination:{pageIndex:s,pageSize:a,totalItemCount:t.length,pageSizeOptions:Mi},sorting:{sort:{field:o,direction:i}}}}(Ne.ID,r),{columns:M,modals:C}=((e,t,n,r,s)=>{const a=s?oe.EuiLoadingSpinner:mi,{canStartStopTransform:o}=Object(ie.t)(),{actions:i,modals:l}=li({forceDisable:r.length>0,transformNodes:n});return{columns:[{name:Object(G.jsx)(oe.EuiScreenReaderOnly,null,Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.showDetailsColumn.screenReaderDescription",defaultMessage:"This column contains clickable controls for showing more details on each transform"}))),align:oe.RIGHT_ALIGNMENT,width:"40px",isExpander:!0,render:n=>Object(G.jsx)(oe.EuiButtonIcon,{onClick:()=>function(n){const r=e.indexOf(n.config.id);-1!==r?(e.splice(r,1),t([...e])):e.push(n.config.id),t([...e])}(n),"aria-label":e.includes(n.config.id)?R.i18n.translate("xpack.transform.transformList.rowCollapse",{defaultMessage:"Hide details for {transformId}",values:{transformId:n.config.id}}):R.i18n.translate("xpack.transform.transformList.rowExpand",{defaultMessage:"Show details for {transformId}",values:{transformId:n.config.id}}),iconType:e.includes(n.config.id)?"arrowDown":"arrowRight","data-test-subj":"transformListRowDetailsToggle"})},{field:Ne.ID,"data-test-subj":"transformListColumnId",name:"ID",sortable:!0,truncateText:{lines:3},scope:"row",render:(e,t)=>Ga(t)?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)("span",{title:`${e} (${R.i18n.translate("xpack.transform.transformList.managedBadgeLabel",{defaultMessage:"Managed"})})`},e)," ",Object(G.jsx)(oe.EuiToolTip,{content:R.i18n.translate("xpack.transform.transformList.managedBadgeTooltip",{defaultMessage:"This transform is preconfigured and managed by Elastic; other parts of the product might have might have dependencies on its behavior."})},Object(G.jsx)(oe.EuiBadge,{color:"hollow","data-test-subj":"transformListRowIsManagedBadge"},R.i18n.translate("xpack.transform.transformList.managedBadgeLabel",{defaultMessage:"Managed"})))):Object(G.jsx)("span",{title:e},e)},{id:"alertRule",name:Object(G.jsx)(oe.EuiScreenReaderOnly,null,Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.alertingRules.screenReaderDescription",defaultMessage:"This column displays an icon when there are alert rules associated with a transform"}))),width:"30px",render:e=>{const t=Ea(e),n=o?R.i18n.translate("xpack.transform.transformList.needsReauthorizationBadge.reauthorizeTooltip",{defaultMessage:"Reauthorize to start transforms."}):R.i18n.translate("xpack.transform.transformList.needsReauthorizationBadge.contactAdminTooltip",{defaultMessage:"Contact your administrator to request the required permissions."}),r=t?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiToolTip,{content:`${di} ${n}`},Object(G.jsx)(oe.EuiIcon,{size:"s",color:"warning",type:"alert"}))," "):null,s=Array.isArray(e.alerting_rules)?Object(G.jsx)(oe.EuiToolTip,{position:"bottom",content:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.alertingRules.tooltipContent",defaultMessage:"Transform has {rulesCount} associated alert {rulesCount, plural, one { rule} other { rules}}",values:{rulesCount:e.alerting_rules.length}})},Object(G.jsx)(oe.EuiIcon,{type:"bell"})):Object(G.jsx)("span",null);return Object(G.jsx)(P.a.Fragment,null,r,s)}},{field:Ne.DESCRIPTION,"data-test-subj":"transformListColumnDescription",name:R.i18n.translate("xpack.transform.description",{defaultMessage:"Description"}),sortable:!0,truncateText:{lines:3},render:e=>Object(G.jsx)("span",{title:e},e)},{name:R.i18n.translate("xpack.transform.type",{defaultMessage:"Type"}),"data-test-subj":"transformListColumnType",sortable:e=>e.mode,truncateText:!0,render(e){let t=R.i18n.translate("xpack.transform.type.unknown",{defaultMessage:"unknown"});return!0===Wn(e.config)&&(t=R.i18n.translate("xpack.transform.type.pivot",{defaultMessage:"pivot"})),!0===Jn(e.config)&&(t=R.i18n.translate("xpack.transform.type.latest",{defaultMessage:"latest"})),Object(G.jsx)(oe.EuiBadge,{color:"hollow"},t)},width:"100px"},{name:R.i18n.translate("xpack.transform.status",{defaultMessage:"Status"}),"data-test-subj":"transformListColumnStatus",sortable:e=>{var t;return null===(t=e.stats)||void 0===t?void 0:t.state},truncateText:!0,render:e=>e.stats?Object(G.jsx)(pi,{state:e.stats.state,reason:e.stats.reason}):Object(G.jsx)(a,null),width:"100px"},{name:R.i18n.translate("xpack.transform.mode",{defaultMessage:"Mode"}),"data-test-subj":"transformListColumnMode",sortable:e=>e.mode,truncateText:!0,render(e){const t=e.mode;return Object(G.jsx)(oe.EuiBadge,{color:"hollow"},t)},width:"100px"},{name:R.i18n.translate("xpack.transform.progress",{defaultMessage:"Progress"}),"data-test-subj":"transformListColumnProgress",sortable:e=>Ge(e)||0,truncateText:!0,render(e){const t=Ge(e),n=void 0===e.config.sync;return void 0===t&&!0===n?null:e.stats?Object(G.jsx)(oe.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},n&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexItem,{style:{width:"40px"},grow:!1},Object(G.jsx)(oe.EuiProgress,{value:t,max:100,color:"primary",size:"m","data-test-subj":"transformListProgress"},t,"%")),Object(G.jsx)(oe.EuiFlexItem,{style:{width:"35px"},grow:!1},Object(G.jsx)(oe.EuiText,{size:"xs"},`${t}%`))),!n&&e.stats&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiFlexItem,{style:{width:"40px"},grow:!1},e.stats.state!==Ve.t.STOPPED&&e.stats.state!==Ve.t.WAITING&&e.stats.state!==Ve.t.FAILED&&Object(G.jsx)(oe.EuiProgress,{color:"primary",size:"m"}),(e.stats.state===Ve.t.STOPPED||e.stats.state===Ve.t.WAITING||e.stats.state===Ve.t.FAILED)&&Object(G.jsx)(oe.EuiProgress,{value:0,max:100,color:"primary",size:"m"})),Object(G.jsx)(oe.EuiFlexItem,{style:{width:"35px"},grow:!1}," "))):Object(G.jsx)(a,null)},width:"100px"},{name:R.i18n.translate("xpack.transform.health",{defaultMessage:"Health"}),"data-test-subj":"transformListColumnHealth",sortable:e=>{var t,n;return null===(t=e.stats)||void 0===t||null===(n=t.health)||void 0===n?void 0:n.status},truncateText:!0,render(e){var t;return null!==(t=e.stats)&&void 0!==t&&t.health?Object(G.jsx)(ci,{healthStatus:Object(Ve.v)(e.stats.health.status)}):Object(G.jsx)(a,null)},width:"100px"},{name:R.i18n.translate("xpack.transform.tableActionLabel",{defaultMessage:"Actions"}),actions:i,width:"80px"}],modals:l}})(m,g,n,f,a),F=null!=p&&p.error?null==p?void 0:p.error.message:void 0,I=null!==(o=null==p||null===(i=p.query)||void 0===i||null===(l=i.ast)||void 0===l?void 0:l.clauses)&&void 0!==o?o:[],D=I.length>0?((e,t)=>{const n=e.reduce(((e,t)=>(e[t.id]={transform:t,count:0},e)),{});return t.forEach((t=>{const r="must"===t.match;let s=[];s="term"===t.type?!0===r?e.filter((e=>Ai(e.id,t.value)===r||Ai(e.config.description,t.value)===r)):e.filter((e=>Ai(e.id,t.value)===r&&Ai(e.config.description,t.value)===r)):"is"!==t.type&&Array.isArray(t.value)?e.filter((e=>e.stats&&t.value.includes(e.stats.state))):e.filter((e=>{if(!e.stats)return!1;var n;if("field"===t.type&&"health"===t.field)return(null===(n=e.stats.health)||void 0===n?void 0:n.status)===t.value;if("field"===t.type&&"mode"===t.field)return e.mode===t.value;if("field"===t.type&&"type"===t.field){if(t.value===Ve.k.PIVOT)return Wn(e.config);if(t.value===Ve.k.LATEST)return Jn(e.config)}return!1})),s.forEach((e=>n[e.id].count++))})),Object.values(n).filter((e=>(e&&e.count)>=t.length)).map((e=>e.transform))})(r,I):r;if(0===r.length)return Object(G.jsx)(oe.EuiPageTemplate.EmptyPrompt,{color:"subdued",title:Object(G.jsx)("h2",null,R.i18n.translate("xpack.transform.list.emptyPromptTitle",{defaultMessage:"No transforms found"})),actions:[Object(G.jsx)(oe.EuiButton,{color:"primary",fill:!0,onClick:t,isDisabled:S,"data-test-subj":"transformCreateFirstButton"},R.i18n.translate("xpack.transform.list.emptyPromptButtonText",{defaultMessage:"Create your first transform"}))],"data-test-subj":"transformNoTransformsFound"});const q=function(e,t,n,r){return e.reduce(((e,r)=>{const s=t.find((e=>e.config.id===r));return void 0!==s&&(e[r]=Object(G.jsx)(Ti,{item:s,onAlertEdit:n})),e}),{})}(m,r,u),$=[Object(G.jsx)("div",{key:"startAction",className:"transform__BulkActionItem"},Object(G.jsx)(oe.EuiButtonEmpty,{onClick:()=>j.openModal(f),disabled:to(f,E.canStartStopTransform,n)},Object(G.jsx)(no,{items:f,transformNodes:n}))),Object(G.jsx)("div",{key:"scheduleNowAction",className:"transform__BulkActionItem"},Object(G.jsx)(oe.EuiButtonEmpty,{onClick:()=>w.scheduleNowTransforms(f.map((e=>({id:e.id})))),disabled:oo(f,E.canScheduleNowTransform,n)},Object(G.jsx)(io,{items:f,transformNodes:n}))),Object(G.jsx)("div",{key:"stopAction",className:"transform__BulkActionItem"},Object(G.jsx)(oe.EuiButtonEmpty,{onClick:()=>{O.openModal(f)},disabled:uo(f,E.canStartStopTransform,!1)},Object(G.jsx)(po,{items:f}))),Object(G.jsx)("div",{key:"reauthorizeAction",className:"transform__BulkActionItem"},Object(G.jsx)(oe.EuiButtonEmpty,{onClick:()=>{x.openModal(f)},disabled:Fa(f,E.canStartStopTransform,n)},Object(G.jsx)(Ra,{items:f,transformNodes:n}))),Object(G.jsx)("div",{key:"resetAction",className:"transform__BulkActionItem"},Object(G.jsx)(oe.EuiButtonEmpty,{onClick:()=>{v.openModal(f)},disabled:Ja(f,!1)},Object(G.jsx)(Ya,{canResetTransform:E.canResetTransform,disabled:Ja(f,!1),isBulkAction:!0,items:f}))),Object(G.jsx)("div",{key:"deleteAction",className:"transform__BulkActionItem"},Object(G.jsx)(oe.EuiButtonEmpty,{onClick:()=>_.openModal(f),disabled:Ba(f,!1)},Object(G.jsx)(za,{canDeleteTransform:E.canDeleteTransform,disabled:Ba(f,!1),isBulkAction:!0,items:f,forceDisable:!1})))],N=Object(G.jsx)(oe.EuiFlexGroup,{gutterSize:"m",justifyContent:"spaceAround"},Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)($a,{onClick:c,isLoading:e})),Object(G.jsx)(oe.EuiFlexItem,null,Object(G.jsx)(qa,{onClick:t,transformNodes:n}))),B={toolsLeft:f.length>0?(()=>{const e=Object(G.jsx)(oe.EuiButtonIcon,{size:"s",iconType:"gear",color:"text",onClick:()=>{b(!0)},"aria-label":R.i18n.translate("xpack.transform.multiTransformActionsMenu.managementActionsAriaLabel",{defaultMessage:"Management actions"})}),t=Object(G.jsx)(oe.EuiPopover,{key:"bulkActionIcon",id:"transformBulkActionsMenu",button:e,isOpen:y,closePopover:()=>b(!1),panelPaddingSize:"s",anchorPosition:"rightUp"},$);return[Object(G.jsx)(oe.EuiTitle,{key:"selectedText",size:"s"},Object(G.jsx)("h3",null,R.i18n.translate("xpack.transform.multiTransformActionsMenu.transformsCount",{defaultMessage:"{count} {count, plural, one {transform} other {transforms}} selected",values:{count:f.length}}))),Object(G.jsx)("div",{key:"bulkActionsBorder",className:"transform__BulkActionsBorder"}),t]})():void 0,toolsRight:N,onChange:d,box:{incremental:!0},filters:ki},z={onSelectionChange:e=>h(e)};return Object(G.jsx)("div",{"data-test-subj":"transformListTableContainer"},j.isModalVisible&&Object(G.jsx)(so,j),_.isModalVisible&&Object(G.jsx)(Ua,_),x.isModalVisible&&Object(G.jsx)(Da,x),v.isModalVisible&&Object(G.jsx)(Za,v),O.isModalVisible&&Object(G.jsx)(ii,O),C,Object(G.jsx)(oe.EuiInMemoryTable,{allowNeutralSort:!1,className:"transform__TransformTable",columns:M,error:F,items:D,itemId:Ne.ID,itemIdToExpandedRowMap:q,loading:e||s,onTableChange:A,pagination:k,rowProps:e=>({"data-test-subj":`transformListRow row-${e.id}`}),selection:z,sorting:T,search:B,"data-test-subj":"transformListTable "+(e||s?"loading":"loaded")}))},Fi=({stat:e})=>Object(G.jsx)("span",{className:"transformStat"},Object(G.jsx)("span",null,e.label),": ",Object(G.jsx)("strong",null,e.value)),Ri=({stats:e,dataTestSub:t})=>{const n=Object(L.useMemo)((()=>Object.values(e)),[e]);return Object(G.jsx)("div",{className:"transformStatsBar","data-test-subj":t},n.filter((e=>e.show)).map((e=>Object(G.jsx)(Fi,{key:e.label,stat:e}))))},Ii=({transformNodes:e,transformsList:t})=>{const{showNodeInfo:n}=De(),r=Object(ie.o)(),{esNodeRoles:s}=Object(ie.d)(),a=function(e,t,n){const r={total:{label:R.i18n.translate("xpack.transform.statsBar.totalTransformsLabel",{defaultMessage:"Total transforms"}),value:0,show:!0},batch:{label:R.i18n.translate("xpack.transform.statsBar.batchTransformsLabel",{defaultMessage:"Batch"}),value:0,show:!0},continuous:{label:R.i18n.translate("xpack.transform.statsBar.continuousTransformsLabel",{defaultMessage:"Continuous"}),value:0,show:!0},failed:{label:R.i18n.translate("xpack.transform.statsBar.failedTransformsLabel",{defaultMessage:"Failed"}),value:0,show:!1},started:{label:R.i18n.translate("xpack.transform.statsBar.startedTransformsLabel",{defaultMessage:"Started"}),value:0,show:!0}};if(n&&(r.nodes={label:R.i18n.translate("xpack.transform.statsBar.transformNodesLabel",{defaultMessage:"Nodes"}),value:e,show:!0}),void 0===t)return r;let s=0,a=0;return t.forEach((e=>{e.mode===Ve.q.CONTINUOUS&&"number"==typeof r.continuous.value?r.continuous.value++:e.mode===Ve.q.BATCH&&"number"==typeof r.batch.value&&r.batch.value++,e.stats&&(e.stats.state===Ve.t.FAILED?s++:e.stats.state===Ve.t.STARTED&&a++)})),r.total.value=t.length,r.started.value=a,0!==s?(r.failed.value=s,r.failed.show=!0):r.failed.show=!1,r}(e,t,n);return Object(G.jsx)(P.a.Fragment,null,n&&0===e&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiCallOut,{title:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesCallOutTitle",defaultMessage:"There are no transform nodes available."}),color:"warning",iconType:"warning"},Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesCallOutBody",defaultMessage:"You will not be able to create or run transforms. {learnMoreLink}",values:{learnMoreLink:Object(G.jsx)(oe.EuiLink,{href:s,target:"_blank"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesLearnMoreLinkText",defaultMessage:"Learn more"}))}})),Object(G.jsx)(oe.EuiButton,{onClick:()=>r(),size:"s"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformNodes.noTransformNodesRetryButtonText",defaultMessage:"Retry"}))),Object(G.jsx)(oe.EuiSpacer,{size:"s"})),Object(G.jsx)(Ri,{stats:a,dataTestSub:"transformStatsBar"}))},Di=({text:e,errorMessage:t})=>Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiCallOut,{size:"s",title:Object(G.jsx)(P.a.Fragment,null,e," ",null!==t&&Object(G.jsx)(Sa.a,{inline:!0,forceModal:!0,text:t})),color:"danger",iconType:"error"})),qi=()=>{const{esTransform:e}=Object(ie.d)(),{showNodeInfo:t}=De(),{dataViewEditor:n}=Object(Ct.a)(),r=Object(ie.c)(),{isInitialLoading:s,error:a,data:o=0}=Object(ie.k)({enabled:!0}),i=null===a?o:0,{isInitialLoading:l,isLoading:c,error:u,data:{transforms:p,transformIdsWithoutConfig:d}}=Object(ie.m)({enabled:!s&&i>0}),{isLoading:m,error:g,data:f}=Object(wa.b)({basic:!0,enabled:!s&&i>0}),h=Object(L.useMemo)((()=>f?p.map((e=>{const t=f.transforms.find((t=>e.config.id===t.id));return Oa(t)?{...e,stats:t}:e})):p),[f,p]),y=s||l,{canStartStopTransform:b}=Object(ie.t)(),j=Object(L.useMemo)((()=>{const e=h.filter((e=>Ea(e))).length;if(!e)return null;const t=R.i18n.translate("xpack.transform.transformList.unauthorizedTransformsCallout.insufficientPermissionsMsg",{defaultMessage:"{unauthorizedCnt, plural, one {A transform was created with insufficient permissions.} other {# transforms were created with insufficient permissions.}}",values:{unauthorizedCnt:e}}),n=b?R.i18n.translate("xpack.transform.transformList.unauthorizedTransformsCallout.reauthorizeMsg",{defaultMessage:"Reauthorize to start {unauthorizedCnt, plural, one {transform} other {# transforms}}.",values:{unauthorizedCnt:e}}):R.i18n.translate("xpack.transform.transformList.unauthorizedTransformsCallout.contactAdminMsg",{defaultMessage:"Contact your administrator to request the required permissions."});return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiCallOut,{iconType:"alert",color:"warning","data-test-subj":"transformPageReauthorizeCallout",title:`${t} ${n}`}),Object(G.jsx)(oe.EuiSpacer,{size:"s"}))}),[h,b]),[_,x]=Object(L.useState)(!1),[v,O]=Object(L.useState)(null),w=Object(L.useCallback)((()=>x(!1)),[]),E=Object(L.useCallback)(((e,t)=>{O(e)}),[]),S=Boolean(null==n?void 0:n.userPermissions.editDataView()),T=Object(L.useRef)(),k=Object(L.useCallback)((()=>{w(),T.current=null==n?void 0:n.openEditor({onSave:async e=>{e.id&&E(e.id,"index-pattern")},allowAdHocDataView:!0})}),[n,w,E]);if(Object(L.useEffect)((function(){return()=>{T.current&&T.current()}}),[]),null!==v)return Object(G.jsx)(Ws,{savedObjectId:v});const A=Object(G.jsx)(oe.EuiButtonEmpty,{href:e,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.transformDocsLinkText",defaultMessage:"Transform docs"}));return Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiPageTemplate.Header,{pageTitle:Object(G.jsx)("span",{"data-test-subj":"transformAppTitle"},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.transformTitle",defaultMessage:"Transforms"})),description:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.transformList.transformDescription",defaultMessage:"Use transforms to pivot existing Elasticsearch indices into summarized entity-centric indices or to create an indexed view of the latest documents for fast access."}),rightSideItems:[A],bottomBorder:!0,paddingSize:"none"}),Object(G.jsx)(oe.EuiPageTemplate.Section,{paddingSize:"none","data-test-subj":"transformPageTransformList"},y&&Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(oe.EuiSkeletonText,{lines:2})),!y&&Object(G.jsx)(P.a.Fragment,null,j,t&&null!==a&&Object(G.jsx)(Di,{text:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.list.transformNodesErrorPromptTitle",defaultMessage:"An error occurred getting the number of transform nodes."}),errorMessage:a}),null!==u&&Object(G.jsx)(Di,{text:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.list.transformListErrorPromptTitle",defaultMessage:"An error occurred getting the transform list."}),errorMessage:u}),null!==g?Object(G.jsx)(Di,{text:Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.list.transformStatsErrorPromptTitle",defaultMessage:"An error occurred getting the transform stats."}),errorMessage:g}):null,Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(Ii,{transformNodes:i,transformsList:h}),Object(G.jsx)(oe.EuiSpacer,{size:"s"}),Object(G.jsx)(Zs.Provider,{value:Xs()},d?Object(G.jsx)(P.a.Fragment,null,Object(G.jsx)(oe.EuiCallOut,{color:"warning"},Object(G.jsx)("p",null,Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.danglingTasksError",defaultMessage:"{count} {count, plural, one {transform is} other {transforms are}} missing configuration details: [{transformIds}] {count, plural, one {It} other {They}} cannot be recovered and should be deleted.",values:{count:d.length,transformIds:d.join(", ")}})),Object(G.jsx)(oe.EuiButton,{color:"warning",size:"s",onClick:()=>r({transformsInfo:d.map((e=>({id:e,state:Ve.t.FAILED}))),deleteDestIndex:!1,deleteDestDataView:!1,forceDelete:!0})},Object(G.jsx)(ae.FormattedMessage,{id:"xpack.transform.forceDeleteTransformMessage",defaultMessage:"Delete {count} {count, plural, one {transform} other {transforms}}",values:{count:d.length}}))),Object(G.jsx)(oe.EuiSpacer,null)):null,(i>0||h.length>0)&&Object(G.jsx)(Ci,{isLoading:c,onCreateTransform:()=>x(!0),transformNodes:i,transforms:h,transformsLoading:c,transformsStatsLoading:m}),Object(G.jsx)(ta,null)))),_&&Object(G.jsx)(oe.EuiModal,{onClose:w,className:"transformCreateTransformSearchDialog","data-test-subj":"transformSelectSourceModal"},Object(G.jsx)(ka,{onSearchSelected:E,canEditDataView:S,createNewDataView:k})))},$i=()=>(Object(L.useEffect)((()=>{q.setBreadcrumbs(D.HOME),$.setTitle("home")}),[]),Object(G.jsx)(de,{requiredCapabilities:"canGetTransform"},Object(G.jsx)(qi,null))),Li=({history:e})=>Object(G.jsx)(Q,{history:e},Object(G.jsx)(ee,null,Object(G.jsx)(X,{path:`/${re.CLONE_TRANSFORM}/:transformId`,component:xa}),Object(G.jsx)(X,{path:`/${re.CREATE_TRANSFORM}/:savedObjectId`,component:va}),Object(G.jsx)(X,{path:"/",component:$i}))),Pi=(e,t,n,r)=>{const s=new B.QueryClient({defaultOptions:{queries:{staleTime:1/0,retry:!1}}});return Object(N.render)(Object(G.jsx)(ne.a,t,Object(G.jsx)(B.QueryClientProvider,{client:s},Object(G.jsx)(te.KibanaContextProvider,{services:t},Object(G.jsx)(Fe,{enabledFeatures:n},Object(G.jsx)(Ie,{experimentalFeatures:r},Object(G.jsx)(Li,{history:t.history})))))),e),()=>{Object(N.unmountComponentAtNode)(e)}},Ni=new r.Storage(window.localStorage);async function Bi(e,t,n,r){const{element:s,setBreadcrumbs:a,history:o}=t,{http:i,getStartServices:l}=e,c=await l(),[u,p]=c,{analytics:d,application:m,chrome:g,docLinks:f,i18n:h,overlays:y,theme:b,savedObjects:j,uiSettings:_,settings:x,notifications:v}=u,{data:O,dataViews:w,dataViewEditor:E,share:S,spaces:k,triggersActionsUi:A,unifiedSearch:M,charts:C,fieldFormats:F,savedObjectsManagement:R,savedSearch:D,contentManagement:L}=p,{docTitle:P}=g;I.init(),$.init(P.change),q.setup(a);const N={analytics:d,application:m,chrome:g,data:O,dataViewEditor:E,dataViews:w,docLinks:f,http:i,i18n:h,notifications:v,overlays:y,theme:b,savedObjects:j,storage:Ni,uiSettings:_,settings:x,history:o,savedObjectsPlugin:p.savedObjects,share:S,spaces:k,ml:await Object(T.getMlSharedImports)(),triggersActionsUi:A,unifiedSearch:M,charts:C,fieldFormats:F,savedObjectsManagement:R,savedSearch:D,contentManagement:L},B=Pi(s,N,{showNodeInfo:!n},r);return()=>{P.reset(),B()}}},72:function(e,t,n){e.exports=n(8)(1783)},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),s=n(119);t.default=function(e,t){var n=s.useFirstMountState();r.useEffect((function(){if(!n)return e()}),t)}},84:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3);const s=Object(r.createContext)(void 0)},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={startPageChange:"start::pageChange",endPageReady:"end::pageReady"}},94:function(e,t,n){"use strict";const r=n(115),s=n(116),a=n(117);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function l(e,t){return t.decode?s(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function m(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const s="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=s};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const s of e.split("&")){let[e,o]=a(t.decode?s.replace(/\+/g," "):s,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:l(o,t),n(l(e,t),o,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=d(n[e],t);else r[e]=d(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}t.extract=p,t.parse=m,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const s=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[i(t,e),"[",s,"]"].join("")]:[...n,[i(t,e),"[",i(s,e),"]=",i(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[i(t,e),"[]"].join("")]:[...n,[i(t,e),"[]=",i(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[i(t,e),"=",i(r,e)].join("")]:[[n,i(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,i(t,e)]:[...n,[i(t,e),"=",i(r,e)].join("")]}}(t),s={};for(const t of Object.keys(e))n(t)||(s[t]=e[t]);const a=Object.keys(s);return!1!==t.sort&&a.sort(t.sort),a.map((n=>{const s=e[n];return void 0===s?"":null===s?i(n,t):Array.isArray(s)?s.reduce(r(n),[]).join("&"):i(n,t)+"="+i(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=a(e,"#");return Object.assign({url:n.split("?")[0]||"",query:m(p(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:l(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=u(e.url).split("?")[0]||"",s=t.extract(e.url),a=t.parse(s,{sort:!1}),o=Object.assign(a,e.query);let l=t.stringify(o,n);l&&(l=`?${l}`);let c=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(c=`#${i(e.fragmentIdentifier,n)}`),`${r}${l}${c}`}}}]);