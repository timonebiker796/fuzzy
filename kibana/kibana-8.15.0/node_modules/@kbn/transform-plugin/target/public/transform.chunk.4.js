/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.transform_bundle_jsonpfunction=window.transform_bundle_jsonpfunction||[]).push([[4],{174:function(e,l,t){"use strict";t.r(l);var s=t(18),n=t(3),r=t.n(n),a=t(19),o=t(0),i=t(7),u=t(4),c=t(17);const d=new Set(["errorMessages"]),b=r.a.memo((({config:e,onChange:l,errors:t})=>{const o=Object(i.a)(e),b=Object(n.useMemo)((()=>o),[]),m=Object(n.useCallback)((t=>{l({...null!=e?e:{},...t})}),[l,e]);return Object(c.jsx)(r.a.Fragment,null,Object(c.jsx)(s.EuiForm,{component:"div",isInvalid:!(null==t||!t.length),error:t},Object.entries(o).filter((([e])=>!d.has(e)||b[e].enabled)).map((([e,l],t)=>{var n,r;return Object(c.jsx)(s.EuiDescribedFormGroup,{key:e,title:Object(c.jsx)("h4",null,null===(n=u.l[e])||void 0===n?void 0:n.name),description:null===(r=u.l[e])||void 0===r?void 0:r.description,fullWidth:!0,gutterSize:"s"},Object(c.jsx)(s.EuiFormRow,null,Object(c.jsx)(s.EuiSwitch,{label:Object(c.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.testsSelection.enableTestLabel",defaultMessage:"Enable"}),onChange:m.bind(null,{[e]:{...o[e],enabled:!o[e].enabled}}),checked:o[e].enabled})))}))),Object(c.jsx)(s.EuiSpacer,{size:"l"}))}));var m=t(171);function j(e){return e.map((e=>({value:e,label:e})))}const f=({label:e,errors:l,onChange:t,selectedOptions:r,options:a,allowSelectAll:o=!1})=>{const i=Object(n.useMemo)((()=>j(r)),[r]),d=Object(n.useMemo)((()=>j(o?[u.a,...a]:a)),[a,o]);return Object(c.jsx)(s.EuiFormRow,{fullWidth:!0,label:e,isInvalid:!(null==l||!l.length),error:l},Object(c.jsx)(s.EuiComboBox,{singleSelection:!1,selectedOptions:i,options:d,onChange:e=>{null!=e&&e.length?e[e.length-1].value!==u.a?t(e.slice(e[0].value===u.a?1:0).map((e=>e.value)).filter(m.a)):t([u.a]):t([])},fullWidth:!0,"data-test-subj":"transformSelection",isInvalid:!(null==l||!l.length)}))};var g=t(54),O=t(53);l.default=({ruleParams:e,setRuleParams:l,errors:t})=>{var i,d,m;const j=Object.values(t).flat(),h=j.length>0,p=Object(O.b)(),{error:x,data:v}=Object(g.m)(),C=Object(n.useMemo)((()=>{var e;return null!==(e=null==v?void 0:v.transforms.filter((e=>e.config.sync)).map((e=>e.id)))&&void 0!==e?e:[]}),[v]),E=Object(n.useCallback)((e=>t=>{l(e,t)}),[l]);Object(n.useEffect)((()=>{null!==x&&p.addError(x,{title:o.i18n.translate("xpack.transform.alertingRuleTypes.transformHealth.fetchErrorMessage",{defaultMessage:"Unable to fetch transforms"})})}),[x,p]);const T=Object(n.useMemo)((()=>{var l;return null!==(l=e.includeTransforms)&&void 0!==l&&l.some((e=>e===u.a))?C:null}),[C,e.includeTransforms]);return Object(c.jsx)(s.EuiForm,{"data-test-subj":"transformHealthAlertingRuleForm",invalidCallout:"none",error:j,isInvalid:h},Object(c.jsx)(f,{label:Object(c.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.includeTransformsLabel",defaultMessage:"Include transforms"}),options:C,selectedOptions:null!==(i=e.includeTransforms)&&void 0!==i?i:[],onChange:E("includeTransforms"),allowSelectAll:!0,errors:t.includeTransforms}),Object(c.jsx)(s.EuiSpacer,{size:"m"}),null!=T&&T.length||null!==(d=e.excludeTransforms)&&void 0!==d&&d.length?Object(c.jsx)(r.a.Fragment,null,Object(c.jsx)(f,{label:Object(c.jsx)(a.FormattedMessage,{id:"xpack.transform.alertTypes.transformHealth.excludeTransformsLabel",defaultMessage:"Exclude transforms"}),options:null!=T?T:[],selectedOptions:null!==(m=e.excludeTransforms)&&void 0!==m?m:[],onChange:E("excludeTransforms")}),Object(c.jsx)(s.EuiSpacer,{size:"m"})):null,Object(c.jsx)(b,{config:e.testsConfig,onChange:E("testsConfig"),errors:Array.isArray(t.testsConfig)?t.testsConfig:[]}))}}}]);