(window.presentationUtil_bundle_jsonpfunction=window.presentationUtil_bundle_jsonpfunction||[]).push([[5,12],{40:function(e,n,t){"use strict";t.r(n),t.d(n,"registerExpressionsLanguage",(function(){return i}));var r=t(34),o=t(3);const a={keywords:[],deprecated:[],symbols:/[=|]/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,boolean:["true","false"],null:["null"],tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*=/,"identifier"],[/[a-z_$][\w$]*/,{cases:{"@keywords":{cases:{"@deprecated":"keyword.deprecated","@default":"keyword"}},"@null":"keyword","@boolean":"keyword","@default":"identifier"}}],[/(@digits)/,"number"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/@symbols/,"delimiter"],[/\/\*/,"comment","@multiline_comment"],[/\/\/.*$/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}],multiline_comment:[[/[^\/*]+/,"comment"],["\\*/","comment","@pop"],[/[\/*]/,"comment"]]}};function i(e){a.keywords=e.map((e=>e.name)),a.deprecated=e.filter((e=>e.deprecated)).map((e=>e.name)),r.monaco.languages.onLanguage(o.EXPRESSIONS_LANGUAGE_ID,(()=>{r.monaco.languages.setMonarchTokensProvider(o.EXPRESSIONS_LANGUAGE_ID,a)})),r.monaco.languages.register({id:o.EXPRESSIONS_LANGUAGE_ID})}},58:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1);n.default=function(e){var n=r.useRef();return r.useEffect((function(){n.current=e})),n.current}},63:function(e,n,t){"use strict";t.r(n),t.d(n,"ExpressionInput",(function(){return N})),t.d(n,"registerExpressionsLanguage",(function(){return T.registerExpressionsLanguage}));var r=t(1),o=t(13),a=t(58),i=t.n(a),u=t(38),s=t(3);const c={autoClosingPairs:[{open:"{",close:"}"}]},l={scrollBeyondLastLine:!1,quickSuggestions:!0,minimap:{enabled:!1},wordWrap:"on",wrappingIndent:"indent"};var f=t(34);function d(e){return"object"==typeof(null==e?void 0:e.node)}function g(e,n,t,r){var o=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(o,g.prototype),o.expected=n,o.found=t,o.location=r,o.name="SyntaxError",o}function p(e,n,t){return t=t||" ",e.length>n?e:(n-=e.length,e+(t+=t.repeat(n)).slice(0,n))}!function(e,n){function t(){this.constructor=e}t.prototype=n.prototype,e.prototype=new t}(g,Error),g.prototype.format=function(e){var n="Error: "+this.message;if(this.location){var t,r=null;for(t=0;t<e.length;t++)if(e[t].source===this.location.source){r=e[t].text.split(/\r\n|\n|\r/g);break}var o=this.location.start,a=this.location.source+":"+o.line+":"+o.column;if(r){var i=this.location.end,u=p("",o.line.toString().length),s=r[o.line-1],c=o.line===i.line?i.column:s.length+1;n+="\n --\x3e "+a+"\n"+u+" |\n"+o.line+" | "+s+"\n"+u+" | "+p("",o.column-1)+p("",c-o.column,"^")}else n+="\n at "+a}return n},g.buildMessage=function(e,n){var t={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var n=e.parts.map((function(e){return Array.isArray(e)?a(e[0])+"-"+a(e[1]):a(e)}));return"["+(e.inverted?"^":"")+n+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function i(e){return t[e.type](e)}return"Expected "+function(e){var n,t,r=e.map(i);if(r.sort(),r.length>0){for(n=1,t=1;n<r.length;n++)r[n-1]!==r[n]&&(r[t]=r[n],t++);r.length=t}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(n)+" found."};const m=function(e,n){var t,r={},o=(n=void 0!==n?n:{}).grammarSource,a={expression:Ae,argument:xe},i=Ae,u="|",s="=",c="$",l="{",f="}",d='"',p="'",m="//",h="/*",v="*/",y="\\",b=/^[a-zA-Z0-9_\-]/,A=/^[ \t\r\n]/,O=/^[^\n]/,_=/^["'(){}<>[\]$`|= \t\n\r]/,x=/^[^"'(){}<>[\]$`|= \t\n\r]/,D=/^[^"]/,E=/^[^']/,C=pe("|",!1),N=he("function"),T=pe("=",!1),S=pe("$",!1),M=pe("{",!1),j=pe("}",!1),L=me([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),I=he("literal"),B=pe('"',!1),R=pe("'",!1),w=me([" ","\t","\r","\n"],!1,!1),K=pe("//",!1),$=me(["\n"],!0,!1),k=pe("/*",!1),F=pe("*/",!1),P={type:"any"},U=pe("\\",!1),G=me(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],!1,!1),V=me(['"',"'","(",")","{","}","<",">","[","]","$","`","|","="," ","\t","\n","\r"],!0,!1),q=me(['"'],!0,!1),z=me(["'"],!0,!1),X=function(e,n){return n},W=function(e,n){return je({type:"expression",chain:e?[e].concat(n):[]},de(),ge())},Z=function(e,n){return je({type:"function",function:e,arguments:n},de(),ge())},H=function(e,n){return{name:e,value:n}},J=function(e){return{name:"_",value:e}},Q=function(e){return e},Y=function(e){return je(e,de(),ge())},ee=function(e){return e},ne=function(e){return e.reduce(((e,{name:n,value:t})=>({...e,[n]:(e[n]||[]).concat(t)})),{})},te=function(e){return e.join("")},re=function(e){return e.join("")},oe=function(e){var n=e.join("");return"null"===n?null:"true"===n||"false"!==n&&(isNaN(Number(n))?n:Number(n))},ae=function(e){return e},ie=0,ue=0,se=[{line:1,column:1}],ce=0,le=[],fe=0;if("startRule"in n){if(!(n.startRule in a))throw new Error("Can't start parsing from rule \""+n.startRule+'".');i=a[n.startRule]}function de(){return e.substring(ue,ie)}function ge(){return ye(ue,ie)}function pe(e,n){return{type:"literal",text:e,ignoreCase:n}}function me(e,n,t){return{type:"class",parts:e,inverted:n,ignoreCase:t}}function he(e){return{type:"other",description:e}}function ve(n){var t,r=se[n];if(r)return r;for(t=n-1;!se[t];)t--;for(r={line:(r=se[t]).line,column:r.column};t<n;)10===e.charCodeAt(t)?(r.line++,r.column=1):r.column++,t++;return se[n]=r,r}function ye(e,n){var t=ve(e),r=ve(n);return{source:o,start:{offset:e,line:t.line,column:t.column},end:{offset:n,line:r.line,column:r.column}}}function be(e){ie<ce||(ie>ce&&(ce=ie,le=[]),le.push(e))}function Ae(){var n,t,o,a,i,s;for(n=ie,Ee(),(t=Oe())===r&&(t=null),o=[],a=ie,124===e.charCodeAt(ie)?(i=u,ie++):(i=r,0===fe&&be(C)),i!==r?(Ee(),(s=Oe())!==r?(ue=a,a=X(t,s)):(ie=a,a=r)):(ie=a,a=r);a!==r;)o.push(a),a=ie,124===e.charCodeAt(ie)?(i=u,ie++):(i=r,0===fe&&be(C)),i!==r?(Ee(),(s=Oe())!==r?(ue=a,a=X(t,s)):(ie=a,a=r)):(ie=a,a=r);return ue=n,W(t,o)}function Oe(){var e,n,t;return fe++,e=ie,(n=De())!==r?(t=function(){var e,n,t,o;for(e=ie,n=[],t=ie,Ee()!==r&&(o=_e())!==r?(ue=t,t=ee(o)):(ie=t,t=r);t!==r;)n.push(t),t=ie,Ee()!==r&&(o=_e())!==r?(ue=t,t=ee(o)):(ie=t,t=r);return(t=Ee())===r&&(t=null),ue=e,e=ne(n)}(),ue=e,e=Z(n,t)):(ie=e,e=r),fe--,e===r&&(n=r,0===fe&&be(N)),e}function _e(){var n,t,o,a;return n=ie,(t=De())!==r?(Ee(),61===e.charCodeAt(ie)?(o=s,ie++):(o=r,0===fe&&be(T)),o!==r?(Ee(),(a=xe())!==r?(ue=n,n=H(t,a)):(ie=n,n=r)):(ie=n,n=r)):(ie=n,n=r),n===r&&(n=ie,(t=xe())!==r&&(ue=n,t=J(t)),n=t),n}function xe(){var n,t,o,a,i;return n=ie,36===e.charCodeAt(ie)?(t=c,ie++):(t=r,0===fe&&be(S)),t===r&&(t=null),123===e.charCodeAt(ie)?(o=l,ie++):(o=r,0===fe&&be(M)),o!==r&&(a=Ae())!==r?(125===e.charCodeAt(ie)?(i=f,ie++):(i=r,0===fe&&be(j)),i!==r?(ue=n,n=Q(a)):(ie=n,n=r)):(ie=n,n=r),n===r&&(n=ie,t=function(){var n;return fe++,n=function(){var n,t,o,a;if(n=ie,34===e.charCodeAt(ie)?(t=d,ie++):(t=r,0===fe&&be(B)),t!==r){for(o=[],a=Se();a!==r;)o.push(a),a=Se();34===e.charCodeAt(ie)?(a=d,ie++):(a=r,0===fe&&be(B)),a!==r?(ue=n,n=re(o)):(ie=n,n=r)}else ie=n,n=r;if(n===r)if(n=ie,39===e.charCodeAt(ie)?(t=p,ie++):(t=r,0===fe&&be(R)),t!==r){for(o=[],a=Me();a!==r;)o.push(a),a=Me();39===e.charCodeAt(ie)?(a=p,ie++):(a=r,0===fe&&be(R)),a!==r?(ue=n,n=re(o)):(ie=n,n=r)}else ie=n,n=r;return n}(),n===r&&(n=function(){var e,n,t,o;if(e=ie,n=ie,fe++,t=Ne(),fe--,t===r?n=void 0:(ie=n,n=r),n!==r){if(t=[],(o=Te())!==r)for(;o!==r;)t.push(o),o=Te();else t=r;t!==r?(ue=e,e=oe(t)):(ie=e,e=r)}else ie=e,e=r;return e}()),fe--,n===r&&0===fe&&be(I),n}(),t!==r&&(ue=n,t=Y(t)),n=t),n}function De(){var n,t,o;if(n=ie,t=[],b.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=r,0===fe&&be(L)),o!==r)for(;o!==r;)t.push(o),b.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=r,0===fe&&be(L));else t=r;return t!==r&&(ue=n,t=te(t)),t}function Ee(){var e,n;if(e=[],(n=Ce())===r&&(n=Ne()),n!==r)for(;n!==r;)e.push(n),(n=Ce())===r&&(n=Ne());else e=r;return e}function Ce(){var n;return A.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===fe&&be(w)),n}function Ne(){var n;return(n=function(){var n,t,o,a;if(n=ie,e.substr(ie,2)===m?(t=m,ie+=2):(t=r,0===fe&&be(K)),t!==r){for(o=[],O.test(e.charAt(ie))?(a=e.charAt(ie),ie++):(a=r,0===fe&&be($));a!==r;)o.push(a),O.test(e.charAt(ie))?(a=e.charAt(ie),ie++):(a=r,0===fe&&be($));n=t=[t,o]}else ie=n,n=r;return n}())===r&&(n=function(){var n,t,o,a,i,u;if(n=ie,e.substr(ie,2)===h?(t=h,ie+=2):(t=r,0===fe&&be(k)),t!==r){for(o=[],a=ie,i=ie,fe++,e.substr(ie,2)===v?(u=v,ie+=2):(u=r,0===fe&&be(F)),fe--,u===r?i=void 0:(ie=i,i=r),i!==r?(e.length>ie?(u=e.charAt(ie),ie++):(u=r,0===fe&&be(P)),u!==r?a=i=[i,u]:(ie=a,a=r)):(ie=a,a=r);a!==r;)o.push(a),a=ie,i=ie,fe++,e.substr(ie,2)===v?(u=v,ie+=2):(u=r,0===fe&&be(F)),fe--,u===r?i=void 0:(ie=i,i=r),i!==r?(e.length>ie?(u=e.charAt(ie),ie++):(u=r,0===fe&&be(P)),u!==r?a=i=[i,u]:(ie=a,a=r)):(ie=a,a=r);e.substr(ie,2)===v?(a=v,ie+=2):(a=r,0===fe&&be(F)),a===r&&(a=null),n=t=[t,o,a]}else ie=n,n=r;return n}()),n}function Te(){var n,t,o;return n=ie,92===e.charCodeAt(ie)?(t=y,ie++):(t=r,0===fe&&be(U)),t!==r?(_.test(e.charAt(ie))?(o=e.charAt(ie),ie++):(o=r,0===fe&&be(G)),o===r&&(92===e.charCodeAt(ie)?(o=y,ie++):(o=r,0===fe&&be(U))),o!==r?(ue=n,n=ae(o)):(ie=n,n=r)):(ie=n,n=r),n===r&&(x.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===fe&&be(V))),n}function Se(){var n,t,o;return n=ie,92===e.charCodeAt(ie)?(t=y,ie++):(t=r,0===fe&&be(U)),t!==r?(34===e.charCodeAt(ie)?(o=d,ie++):(o=r,0===fe&&be(B)),o===r&&(92===e.charCodeAt(ie)?(o=y,ie++):(o=r,0===fe&&be(U))),o!==r?(ue=n,n=ae(o)):(ie=n,n=r)):(ie=n,n=r),n===r&&(D.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===fe&&be(q))),n}function Me(){var n,t,o;return n=ie,92===e.charCodeAt(ie)?(t=y,ie++):(t=r,0===fe&&be(U)),t!==r?(39===e.charCodeAt(ie)?(o=p,ie++):(o=r,0===fe&&be(R)),o===r&&(92===e.charCodeAt(ie)?(o=y,ie++):(o=r,0===fe&&be(U))),o!==r?(ue=n,n=ae(o)):(ie=n,n=r)):(ie=n,n=r),n===r&&(E.test(e.charAt(ie))?(n=e.charAt(ie),ie++):(n=r,0===fe&&be(z))),n}function je(e,t,{start:{offset:r},end:{offset:o}}){return n.addMeta?{node:e,text:t,start:r,end:o}:e}if((t=i())!==r&&ie===e.length)return t;throw t!==r&&ie<e.length&&be({type:"end"}),function(e,n,t){return new g(g.buildMessage(e,n),e,n,t)}(le,ce<e.length?e.charAt(ce):null,ce<e.length?ye(ce,ce+1):ye(ce,ce))};t(4);var h=t(39);const v="EXPRESSIONS_SUGGESTION_MARKER";function y(e,n,t){const r=n.substr(0,t)+v+n.substr(t);try{const n=m(r,{addMeta:!0}),{ast:a,fnIndex:i,argName:u,argIndex:s,parentFn:c,contextFn:l}=b(n,t),f=a.node.chain[i].node;if(c&&f.function.includes(v)&&u)return function(e,n,t,r,o,a){const{start:i,end:u,node:s}=n.node.chain[t],c=s.function.replace(v,""),l=e.filter((({name:e})=>function(e,n){return e.toLowerCase().includes(n.toLowerCase().trim())}(e,c))),f=Object(h.getByAlias)(e,r),d=Object(h.getByAlias)(f.args,o);if(!d)return[];const g=a?Object(h.getByAlias)(e,a):null,p=g&&g.type,m=d.types;return l.sort(((e,n)=>{const t=A(e,p,m,!0),r=A(n,p,m,!0);return t===r?e.name<n.name?-1:1:t>r?-1:1})).map((e=>({type:"function",text:e.name+" ",start:i,end:u-29,fnDef:e})))}(e,a,i,c,u,l);if(f.function.includes(v))return function(e,n,t){const{start:r,end:o}=n.node.chain[t],a=n.node.chain[t-1],i=n.node.chain.length>t+1?n.node.chain[t+1]:null,u=a&&Object(h.getByAlias)(e,a.node.function),s=u&&u.type,c=i&&Object(h.getByAlias)(e,i.node.function),l=c&&c.inputTypes;return e.sort(((e,n)=>{const t=A(e,s,l,!1),r=A(n,s,l,!1);return t===r?e.name<n.name?-1:1:t>r?-1:1})).map((e=>({type:"function",text:`${e.name} `,start:r,end:o-29,fnDef:e})))}(e,a,i);if("_"===u&&void 0!==s)return function(e,n,t,r,o){const a=n.node.chain[t].node,i=Object(h.getByAlias)(e,a.function);if(!i)return[];const{start:u,end:s}=a.arguments[r][o],c=Object.entries(a.arguments).map((([e,n])=>[e,n.filter((e=>!e.text.includes(v)))]));return Object.entries(i.args).filter((([e,n])=>!!n.multi||!c.some((([t,r])=>r.length>0&&(t===e||(n.aliases||[]).includes(t)))))).map((([e,n])=>n)).sort(O).map((e=>({type:"argument",text:e.name+"=",start:u,end:s-29,argDef:e})))}(e,a,i,u,s);if(u&&void 0!==s)return function(e,n,t,r,a){const i=n.node.chain[t].node,u=Object(h.getByAlias)(e,i.function);if(!u)return[];const s=Object(h.getByAlias)(u.args,r);if(!s)return[];const{start:c,end:l,node:f}=i.arguments[r][a];if("string"!=typeof f)return[];const d=[...s.options?s.options:[]];return void 0!==s.default&&d.push(s.default),Object(o.uniq)(d).map((e=>{const n=function(e){return"string"==typeof e?e.match(/^\{.*\}$/)?e:`"${e.replace(/"/g,'\\"')}"`:e}(e)+" ";return{start:c,end:l-29,type:"value",text:n}}))}(e,a,i,u,s)}catch(e){}return[]}function b(e,n){const t=e.node.chain.findIndex((e=>e.start<=n&&n<=e.end)),r=e.node.chain[t];for(const[o,a]of Object.entries(r.node.arguments))for(let i=0;i<a.length;i++){const u=a[i];let s=u.start,c=u.end;if("_"!==o&&(s-=o.length+1,null!==u.node&&d(u)&&(s--,c++)),s<=n&&n<=c){if(null!==u.node&&d(u)&&("_"===o||!(s<=n&&n<=s+o.length+1))){const a=b(u,n);if(!a.argName){const n=0===a.fnIndex?t>0?e.node.chain[t-1].node.function:null:a.ast.node.chain[a.fnIndex-1].node.function;return{...a,argName:o,argIndex:i,argStart:s,argEnd:c,parentFn:r.node.function,contextFn:n}}return a}return{ast:e,fnIndex:t,argName:o,argIndex:i,argStart:s,argEnd:c}}}return{ast:e,fnIndex:t}}function A(e,n,t,r){let o=0;n||(n="null");const a=e.inputTypes||[];if(r)t&&e.type&&t.length&&t.includes(e.type)&&(o++,a.includes(n)&&o++);else if(e.inputTypes){const t=a.includes("null");t||"null"===n?t&&"null"===n&&(o++,e.type&&"null"!==e.type&&o++):(o++,e.inputTypes.includes(n)&&o++)}return o}function O(e,n){return(n.aliases&&n.aliases.includes("_")?1:0)-(e.aliases&&e.aliases.includes("_")?1:0)}var _=t(8);const x="**";function D(e){const{help:n,type:t,inputTypes:r}=e,o=t||"null";return`${(e=>_.i18n.translate("presentationUtil.expressionInput.functionReferenceAccepts",{defaultMessage:"{BOLD_MD_TOKEN}Accepts{BOLD_MD_TOKEN}: {acceptTypes}",values:{BOLD_MD_TOKEN:x,acceptTypes:e}}))(r?r.join(" | "):"null")} ${(e=>_.i18n.translate("presentationUtil.expressionInput.functionReferenceReturns",{defaultMessage:"{BOLD_MD_TOKEN}Returns{BOLD_MD_TOKEN}: {returnType}",values:{BOLD_MD_TOKEN:x,returnType:e}}))(o)}\n\n\n${n}`}function E(e){const{aliases:n,types:t,default:r,required:o,help:a}=e,i=[];var u;null!=r&&i.push((u=String(r),_.i18n.translate("presentationUtil.expressionInput.argReferenceDefaultDetail",{defaultMessage:"{BOLD_MD_TOKEN}Default{BOLD_MD_TOKEN}: {defaultVal}",values:{BOLD_MD_TOKEN:x,defaultVal:u}}))),n&&n.length&&i.push((e=>_.i18n.translate("presentationUtil.expressionInput.argReferenceAliasesDetail",{defaultMessage:"{BOLD_MD_TOKEN}Aliases{BOLD_MD_TOKEN}: {aliases}",values:{BOLD_MD_TOKEN:x,aliases:e}}))(n.join(" | ")));const s=t&&t.length?t.join(" | "):"null",c=String(Boolean(o));return`${(e=>_.i18n.translate("presentationUtil.expressionInput.argReferenceTypesDetail",{defaultMessage:"{BOLD_MD_TOKEN}Types{BOLD_MD_TOKEN}: {types}",values:{BOLD_MD_TOKEN:x,types:e}}))(s)} ${(e=>_.i18n.translate("presentationUtil.expressionInput.argReferenceRequiredDetail",{defaultMessage:"{BOLD_MD_TOKEN}Required{BOLD_MD_TOKEN}: {required}",values:{BOLD_MD_TOKEN:x,required:e}}))(c)}\n  \n\n${i.join(" ")}\n  \n\n${a}`}var C=t(2);const N=e=>{const{expressionFunctions:n,expression:t,onChange:a,isCompact:d,height:g,style:p,editorRef:v,onEditorDidMount:A,...O}=e,[_,x]=Object(r.useState)(t),N=i()(t);Object(r.useEffect)((()=>{N!==t&&x(t)}),[N,t]);const T=Object(r.useMemo)((()=>(e=>({triggerCharacters:[" ","{"],provideCompletionItems:(n,t,r)=>{const o=n.getValue(),a=n.getFullModelRange(),i=n.getValueLengthInRange({startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:a.endLineNumber,endColumn:a.endColumn});let u,s;if("{"===r.triggerCharacter)n.getWordAtPosition(t.delta(0,-3))&&(u=new f.monaco.Range(t.lineNumber,t.column,t.lineNumber,t.column),s=y(e,o.substring(0,o.length-i)+"}",o.length-i));else{const r=n.getWordUntilPosition(t);u=new f.monaco.Range(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn),s=y(e,o,o.length-i)}return s?{suggestions:s.map(((e,n)=>{const t=String.fromCharCode(n);return"argument"===e.type?{label:e.argDef.name,kind:f.monaco.languages.CompletionItemKind.Variable,documentation:{value:E(e.argDef),isTrusted:!0},insertText:e.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:u,sortText:t}:"value"===e.type?{label:e.text,kind:f.monaco.languages.CompletionItemKind.Value,insertText:e.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:u,sortText:t}:{label:e.fnDef.name,kind:f.monaco.languages.CompletionItemKind.Function,documentation:{value:D(e.fnDef),isTrusted:!0},insertText:e.text,command:{title:"Trigger Suggestion Dialog",id:"editor.action.triggerSuggest"},range:u,sortText:t}}))}:{suggestions:[]}}}))(n)),[n]),S=Object(r.useMemo)((()=>(e=>({provideHover:(n,t)=>{const r=n.getValue(),o=n.getWordAtPosition(t);if(!o)return{contents:[]};const a=n.getValueLengthInRange({startLineNumber:0,startColumn:0,endLineNumber:t.lineNumber,endColumn:o.endColumn}),{fnDef:i,argDef:u,argStart:s,argEnd:c}=function(e,n,t){try{const r=m(n,{addMeta:!0}),{ast:o,fnIndex:a,argName:i,argStart:u,argEnd:s}=b(r,t),c=o.node.chain[a].node,l=Object(h.getByAlias)(e,c.function);return l&&i?{fnDef:l,argDef:Object(h.getByAlias)(l.args,i),argStart:u,argEnd:s}:{fnDef:l}}catch(e){}return{}}(e,r,a);if(u&&s&&c){const e=n.getPositionAt(s),t=n.getPositionAt(c),r=new f.monaco.Range(e.lineNumber,e.column,t.lineNumber,t.column);return{contents:[{value:E(u),isTrusted:!0}],range:r}}return i?{contents:[{value:D(i),isTrusted:!0}]}:{contents:[]}}}))(n)),[n]),M=Object(o.debounce)((e=>x(e)),500,{leading:!0,trailing:!1});return Object(C.jsx)("div",{style:{height:g,...p},rest:O},Object(C.jsx)(u.CodeEditor,{languageId:s.EXPRESSIONS_LANGUAGE_ID,languageConfiguration:c,value:_,onChange:e=>{M(e),a(e)},suggestionProvider:T,hoverProvider:S,options:{...l,fontSize:d?12:16},editorDidMount:e=>{const n=e.getModel();null==n||n.updateOptions({tabSize:2}),null==A||A(e),v&&(v.current=e)}}))};var T=t(40);n.default=N}}]);