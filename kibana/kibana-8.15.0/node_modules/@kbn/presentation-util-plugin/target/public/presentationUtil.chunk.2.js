(window.presentationUtil_bundle_jsonpfunction=window.presentationUtil_bundle_jsonpfunction||[]).push([[2],{53:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(54);case"v8light":return a(56)}},54:function(e,t,a){var n=a(15),i=a(55);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},55:function(e,t,a){(t=a(16)(!1)).push([e.i,".fieldPickerSelectable{height:360px}.fieldPickerSelectable .presFieldPicker__fieldButton[aria-checked=true]{background-color:#36a2ef1a}.fieldPickerSelectable .euiSelectableMessage{height:100%}",""]),e.exports=t},56:function(e,t,a){var n=a(15),i=a(57);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},57:function(e,t,a){(t=a(16)(!1)).push([e.i,".fieldPickerSelectable{height:360px}.fieldPickerSelectable .presFieldPicker__fieldButton[aria-checked=true]{background-color:#0077cc1a}.fieldPickerSelectable .euiSelectableMessage{height:100%}",""]),e.exports=t},64:function(e,t,a){"use strict";a.r(t),a.d(t,"FieldPicker",(function(){return k}));var n=a(14),i=a.n(n),l=a(17),s=a.n(l),r=a(13);const o=Object(r.memoize)((function(e){const t=e.trim();let a=t.split(/[* ]+/).map(r.escapeRegExp).join(".*");return t.includes(" ")&&(a=".*"+a+".*"),new RegExp(a.includes("*")?`^${a}$`:a,"i")})),d=({option:{name:e,label:t},searchValue:a})=>((e,t)=>{if(null==t||!t.trim())return!1;const a=o(t);return!!e.displayName&&a.test(e.displayName)||a.test(e.name)})({name:e||t,displayName:t},a);var c=a(1),u=a.n(c),f=a(8),p=a(10),T=a(2);const _={iconType:"questionInCircle",color:"gray"},b={binary:{iconType:"tokenBinary"},boolean:{iconType:"tokenBoolean"},conflict:{iconType:"warning",color:"euiColorVis9",shape:"square"},date:{iconType:"tokenDate"},date_range:{iconType:"tokenDate"},dense_vector:{iconType:"tokenVectorDense"},geo_point:{iconType:"tokenGeo"},geo_shape:{iconType:"tokenGeo"},ip:{iconType:"tokenIP"},ip_range:{iconType:"tokenIP"},flattened:{iconType:"tokenFlattened"},match_only_text:{iconType:"tokenString"},murmur3:{iconType:"tokenSearchType"},number:{iconType:"tokenNumber"},number_range:{iconType:"tokenNumber"},rank_feature:{iconType:"tokenRankFeature"},rank_features:{iconType:"tokenRankFeatures"},histogram:{iconType:"tokenHistogram"},_source:{iconType:"editorCodeBlock",color:"gray"},point:{iconType:"tokenShape"},shape:{iconType:"tokenShape"},sparse_vector:{iconType:"tokenVectorSparse"},string:{iconType:"tokenString"},text:{iconType:"tokenString"},keyword:{iconType:"tokenKeyword"},gauge:{iconType:"tokenMetricGauge"},counter:{iconType:"tokenMetricCounter"},nested:{iconType:"tokenNested"},version:{iconType:"tokenTag"}};function E({type:e,label:t,size:a="s",scripted:n,className:l,...r}){const o=b[e]||_;return Object(T.jsx)(p.EuiToken,i()({},o,{className:s()("kbnFieldIcon",l),"aria-label":t||e,title:t||e,size:a,fill:n?"dark":void 0},r))}var N=a(4),g=a.n(N);let m=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),y=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class kbn_field_type_KbnFieldType{constructor(e={}){g()(this,"name",void 0),g()(this,"sortable",void 0),g()(this,"filterable",void 0),g()(this,"esTypes",void 0),this.name=e.name||y.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}new kbn_field_type_KbnFieldType({name:y.UNKNOWN});new kbn_field_type_KbnFieldType({name:y.STRING,sortable:!0,filterable:!0,esTypes:[m.STRING,m.TEXT,m.MATCH_ONLY_TEXT,m.KEYWORD,m.VERSION,m._TYPE,m._ID]}),new kbn_field_type_KbnFieldType({name:y.NUMBER,sortable:!0,filterable:!0,esTypes:[m.FLOAT,m.HALF_FLOAT,m.SCALED_FLOAT,m.DOUBLE,m.INTEGER,m.LONG,m.UNSIGNED_LONG,m.SHORT,m.BYTE,m.TOKEN_COUNT,m.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:y.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[m.FLOAT_RANGE,m.DOUBLE_RANGE,m.INTEGER_RANGE,m.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:y.DATE,sortable:!0,filterable:!0,esTypes:[m.DATE,m.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:y.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[m.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:y.IP,sortable:!0,filterable:!0,esTypes:[m.IP]}),new kbn_field_type_KbnFieldType({name:y.IP_RANGE,sortable:!0,filterable:!0,esTypes:[m.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:y.BOOLEAN,sortable:!0,filterable:!0,esTypes:[m.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:y.OBJECT,esTypes:[m.OBJECT]}),new kbn_field_type_KbnFieldType({name:y.NESTED,esTypes:[m.NESTED]}),new kbn_field_type_KbnFieldType({name:y.GEO_POINT,esTypes:[m.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:y.GEO_SHAPE,esTypes:[m.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:y.ATTACHMENT,esTypes:[m.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:y.MURMUR3,esTypes:[m.MURMUR3]}),new kbn_field_type_KbnFieldType({name:y._SOURCE,esTypes:[m._SOURCE]}),new kbn_field_type_KbnFieldType({name:y.HISTOGRAM,filterable:!0,esTypes:[m.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:y.CONFLICT});let A=function(e){return e.DOCUMENT="document",e.BINARY="binary",e.BOOLEAN="boolean",e.CONFLICT="conflict",e.COUNTER="counter",e.DATE="date",e.DATE_RANGE="date_range",e.DENSE_VECTOR="dense_vector",e.GAUGE="gauge",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.HISTOGRAM="histogram",e.IP="ip",e.IP_RANGE="ip_range",e.FLATTENED="flattened",e.KEYWORD="keyword",e.MURMUR3="murmur3",e.NUMBER="number",e.NESTED="nested",e.RANK_FEATURE="rank_feature",e.RANK_FEATURES="rank_features",e.POINT="point",e.SHAPE="shape",e.SPARSE_VECTOR="sparse_vector",e.SEMANTIC_TEXT="semantic_text",e.STRING="string",e.TEXT="text",e.VERSION="version",e}({});Object.values(A);const O=f.i18n.translate("fieldUtils.fieldNameIcons.unknownFieldAriaLabel",{defaultMessage:"Unknown field"});var F=a(33);function R({availableFieldTypes:e,onFieldTypesChange:t,setFocusToSearch:a,fieldTypesValue:n,buttonProps:l}){const[s,r]=Object(c.useState)(!1),o=Object(T.jsx)(p.EuiFilterButton,i()({},l,{"data-test-subj":"toggleFieldFilterButton",iconType:"arrowDown",isSelected:n.length>0,numFilters:0,hasActiveFilters:n.length>0,numActiveFilters:n.length,onClick:()=>{r(!s)}}),Object(T.jsx)(F.FormattedMessage,{id:"presentationUtil.fieldSearch.fieldFilterButtonLabel",defaultMessage:"Filter by type"}));return Object(T.jsx)(p.EuiFilterGroup,{fullWidth:!0},Object(T.jsx)(p.EuiInputPopover,{panelPaddingSize:"none",display:"block",isOpen:s,closePopover:()=>{r(!1)},fullWidth:!0,input:o,focusTrapProps:{returnFocus:!1,onDeactivation:a}},Object(T.jsx)(p.EuiContextMenuPanel,{items:e.map((e=>Object(T.jsx)(p.EuiContextMenuItem,{key:e,icon:n.includes(e)?"check":"empty","data-test-subj":`typeFilter-${e}`,onClick:()=>{n.includes(e)?t(n.filter((t=>t!==e))):t([...n,e])}},Object(T.jsx)(p.EuiFlexGroup,{gutterSize:"xs",responsive:!1},Object(T.jsx)(p.EuiFlexItem,{grow:!1},Object(T.jsx)(E,{type:e,label:e})),Object(T.jsx)(p.EuiFlexItem,null,function(e){if(!e||e===y.UNKNOWN)return O;if("source"===e)return f.i18n.translate("fieldUtils.fieldNameIcons.sourceFieldAriaLabel",{defaultMessage:"Source field"});const t=e;switch(t){case A.DOCUMENT:return f.i18n.translate("fieldUtils.fieldNameIcons.recordAriaLabel",{defaultMessage:"Records"});case A.BINARY:return f.i18n.translate("fieldUtils.fieldNameIcons.binaryAriaLabel",{defaultMessage:"Binary"});case A.BOOLEAN:return f.i18n.translate("fieldUtils.fieldNameIcons.booleanAriaLabel",{defaultMessage:"Boolean"});case A.CONFLICT:return f.i18n.translate("fieldUtils.fieldNameIcons.conflictFieldAriaLabel",{defaultMessage:"Conflict"});case A.COUNTER:return f.i18n.translate("fieldUtils.fieldNameIcons.counterFieldAriaLabel",{defaultMessage:"Counter metric"});case A.DATE:return f.i18n.translate("fieldUtils.fieldNameIcons.dateFieldAriaLabel",{defaultMessage:"Date"});case A.DATE_RANGE:return f.i18n.translate("fieldUtils.fieldNameIcons.dateRangeFieldAriaLabel",{defaultMessage:"Date range"});case A.DENSE_VECTOR:return f.i18n.translate("fieldUtils.fieldNameIcons.denseVectorFieldAriaLabel",{defaultMessage:"Dense vector"});case A.GAUGE:return f.i18n.translate("fieldUtils.fieldNameIcons.gaugeFieldAriaLabel",{defaultMessage:"Gauge metric"});case A.GEO_POINT:return f.i18n.translate("fieldUtils.fieldNameIcons.geoPointFieldAriaLabel",{defaultMessage:"Geo point"});case A.GEO_SHAPE:return f.i18n.translate("fieldUtils.fieldNameIcons.geoShapeFieldAriaLabel",{defaultMessage:"Geo shape"});case A.HISTOGRAM:return f.i18n.translate("fieldUtils.fieldNameIcons.histogramFieldAriaLabel",{defaultMessage:"Histogram"});case A.IP:return f.i18n.translate("fieldUtils.fieldNameIcons.ipAddressFieldAriaLabel",{defaultMessage:"IP address"});case A.IP_RANGE:return f.i18n.translate("fieldUtils.fieldNameIcons.ipRangeFieldAriaLabel",{defaultMessage:"IP range"});case A.FLATTENED:return f.i18n.translate("fieldUtils.fieldNameIcons.flattenedFieldAriaLabel",{defaultMessage:"Flattened"});case A.MURMUR3:return f.i18n.translate("fieldUtils.fieldNameIcons.murmur3FieldAriaLabel",{defaultMessage:"Murmur3"});case A.NUMBER:return f.i18n.translate("fieldUtils.fieldNameIcons.numberFieldAriaLabel",{defaultMessage:"Number"});case A.RANK_FEATURE:return f.i18n.translate("fieldUtils.fieldNameIcons.rankFeatureFieldAriaLabel",{defaultMessage:"Rank feature"});case A.RANK_FEATURES:return f.i18n.translate("fieldUtils.fieldNameIcons.rankFeaturesFieldAriaLabel",{defaultMessage:"Rank features"});case A.POINT:return f.i18n.translate("fieldUtils.fieldNameIcons.pointFieldAriaLabel",{defaultMessage:"Point"});case A.SHAPE:return f.i18n.translate("fieldUtils.fieldNameIcons.shapeFieldAriaLabel",{defaultMessage:"Shape"});case A.SPARSE_VECTOR:return f.i18n.translate("fieldUtils.fieldNameIcons.sparseVectorFieldAriaLabel",{defaultMessage:"Sparse vector"});case A.SEMANTIC_TEXT:return f.i18n.translate("fieldUtils.fieldNameIcons.semanticTextFieldAriaLabel",{defaultMessage:"Semantic text"});case A.STRING:return f.i18n.translate("fieldUtils.fieldNameIcons.stringFieldAriaLabel",{defaultMessage:"String"});case A.TEXT:return f.i18n.translate("fieldUtils.fieldNameIcons.textFieldAriaLabel",{defaultMessage:"Text"});case A.KEYWORD:return f.i18n.translate("fieldUtils.fieldNameIcons.keywordFieldAriaLabel",{defaultMessage:"Keyword"});case A.NESTED:return f.i18n.translate("fieldUtils.fieldNameIcons.nestedFieldAriaLabel",{defaultMessage:"Nested"});case A.VERSION:return f.i18n.translate("fieldUtils.fieldNameIcons.versionFieldAriaLabel",{defaultMessage:"Version"});default:return t||t}}(e))))))})))}a(53);const k=({dataView:e,onSelectField:t,filterPredicate:a,selectedFieldName:n,selectableProps:l,...o})=>{const _=Object(c.useRef)(n),[b,N]=Object(c.useState)([]),[g,m]=Object(c.useState)(null),[y,A]=Object(c.useState)([]),O=Object(c.useMemo)((()=>{var t;return Object(r.sortBy)((null!==(t=null==e?void 0:e.fields)&&void 0!==t?t:[]).filter((e=>0===b.length||b.includes(e.type))).filter((e=>!a||a(e))),["name"]).sort((e=>e.name===_.current?-1:1))}),[e,a,b]);Object(c.useEffect)((()=>{if(!e)return;const t=(null!=O?O:[]).map((e=>{var t;return{key:e.name,name:e.name,label:null!==(t=e.displayName)&&void 0!==t?t:e.name,className:"presFieldPicker__fieldButton",checked:e.name===n?"on":void 0,"data-test-subj":`field-picker-select-${e.name}`,prepend:Object(T.jsx)(E,{type:e.type,label:e.name,scripted:e.scripted,className:"eui-alignMiddle"})}}));A(t)}),[O,e,a,n,b]);const F=Object(c.useMemo)((()=>e?Object(r.uniq)(e.fields.filter((e=>!a||a(e))).map((e=>e.type))):[]),[e,a]),k=Object(c.useCallback)((()=>{null==g||g.focus()}),[g]),I=Object(T.jsx)(p.EuiFormRow,{fullWidth:!0},Object(T.jsx)(R,{setFocusToSearch:k,onFieldTypesChange:e=>N(e),fieldTypesValue:b,availableFieldTypes:F,buttonProps:{disabled:Boolean(null==l?void 0:l.isLoading)}}));return Object(T.jsx)(p.EuiSelectable,i()({},o,l,{className:s()("fieldPickerSelectable",{fieldPickerSelectableLoading:null==l?void 0:l.isLoading}),emptyMessage:f.i18n.translate("presentationUtil.fieldPicker.noFieldsLabel",{defaultMessage:"No matching fields"}),"aria-label":f.i18n.translate("presentationUtil.fieldPicker.selectableAriaLabel",{defaultMessage:"Select a field"}),searchable:!0,options:y,onChange:(a,n,i)=>{if(A(a),!e||!i.key)return;const l=e.getFieldByName(i.key);l&&(null==t||t(l))},optionMatcher:d,searchProps:{"data-test-subj":"field-search-input",placeholder:f.i18n.translate("presentationUtil.fieldSearch.searchPlaceHolder",{defaultMessage:"Search field names"}),disabled:Boolean(null==l?void 0:l.isLoading),inputRef:m},listProps:{isVirtualized:!0,showIcons:!1,bordered:!0,truncationProps:{truncation:"middle"}},height:"full"}),((e,t)=>Object(T.jsx)(u.a.Fragment,null,t,Object(T.jsx)(p.EuiSpacer,{size:"s"}),I,Object(T.jsx)(p.EuiSpacer,{size:"s"}),e)))};t.default=k}}]);