(window.presentationUtil_bundle_jsonpfunction=window.presentationUtil_bundle_jsonpfunction||[]).push([[4,6],{47:function(e,t,a){"use strict";a.r(t),a.d(t,"DashboardPicker",(function(){return b}));var s=a(13),o=a(2),i=a(1),n=a(10),r=a(8),d=a(50),l=a(9);function b({isDisabled:e,onChange:t,idsToOmit:a}){var b;const{euiTheme:c}=Object(n.useEuiTheme)(),[u,h]=Object(i.useState)(!0),[p,j]=Object(i.useState)(!1),[O,g]=Object(i.useState)([]),[v,x]=Object(i.useState)([]),[m,S]=Object(i.useState)(""),[f,y]=Object(i.useState)(""),[D,E]=Object(i.useState)(null),{contentManagement:{client:M}}=l.a.getServices(),T=Object(i.useMemo)((()=>Object(s.debounce)((e=>y(e)),150)),[]);return Object(i.useEffect)((()=>{T(m)}),[T,m]),Object(i.useEffect)((()=>{let e=!1;return(async()=>{h(!0);const t=await M.mSearch({contentTypes:[{contentTypeId:"dashboard"}],query:{text:f?`${f}*`:void 0,limit:30}});e||(t&&t.hits&&g(t.hits),h(!1))})(),()=>{e=!0}}),[f,M]),Object(i.useEffect)((()=>{x(O.filter((e=>!e.managed&&!(null!=a?a:[]).includes(e.id))).map((e=>({value:e.id,label:e.attributes.title,checked:e.id===(null==D?void 0:D.value)?"on":void 0,"data-test-subj":`dashboard-picker-option-${e.attributes.title.replaceAll(" ","-")}`}))))}),[O,a,D]),Object(o.jsx)(n.EuiInputPopover,{panelPaddingSize:"none",input:Object(o.jsx)(d.a,{isDisabled:e,fullWidth:!0,isLoading:u,"data-test-subj":"open-dashboard-picker",onClick:()=>j(!p),label:Object(o.jsx)(n.EuiText,{size:"s",css:Object(o.css)("color:",D?c.colors.text:c.colors.disabledText,";","")},null!==(b=null==D?void 0:D.label)&&void 0!==b?b:r.i18n.translate("presentationUtil.dashboardPicker.noDashboardOptionLabel",{defaultMessage:"Select dashboard"}))}),isOpen:p,closePopover:()=>j(!1)},Object(o.jsx)(n.EuiPopoverTitle,{paddingSize:"s"},Object(o.jsx)(n.EuiFieldSearch,{compressed:!0,fullWidth:!0,onChange:e=>S(e.target.value),value:m,"data-test-subj":"dashboard-picker-search",placeholder:r.i18n.translate("presentationUtil.dashboardPicker.searchDashboardPlaceholder",{defaultMessage:"Search dashboards..."})})),Object(o.jsx)(n.EuiSelectable,{singleSelection:!0,options:v,onChange:(e,a,s)=>{j(!1),s&&s.value!==(null==D?void 0:D.value)&&(E(s),t({name:s.label,id:s.value}))},renderOption:e=>Object(o.jsx)(n.EuiHighlight,{search:m},e.label)},(e=>Object(o.jsx)("div",null,e))))}t.default=b},50:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(14),o=a.n(s),i=(a(1),a(10));const n=e=>({bold:e.font.weight.bold,normal:e.font.weight.regular});var r=a(2);const d=e=>"iconButton"===e.as,l=(e,{type:t,isDisabled:a,groupPosition:s})=>{const o=(({euiTheme:e})=>({default:{borderStyle:"solid",border:e.border.thin,borderColor:e.border.color},emptyButton:{backgroundColor:e.colors.emptyShade,border:`${e.border.thin}`,color:`${e.colors.text}`},buttonPositions:{left:{borderTopRightRadius:0,borderBottomRightRadius:0},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"},center:{borderRadius:0,borderLeft:"none"}}}))(e),i=s&&"none"!==s?o.buttonPositions[s]:{},n={...o.default,...i};return a?n:{...n,..."primary"===t?{}:o.emptyButton}},b=({hasArrow:e=!0,fontWeight:t="normal",type:a,label:s,iconSide:d,iconType:b,fullWidth:c,isDisabled:u,groupPosition:h,...p})=>{const j=Object(i.useEuiTheme)(),O={...l(j,{type:a,isDisabled:u,groupPosition:h}),fontWeight:n(j.euiTheme)[t]},g=u?{}:"primary"===a?{color:"primary",fill:!0}:{color:"text"},v=null!=b?b:e?"arrowDown":"";return Object(r.jsx)(i.EuiButton,o()({size:p.size,isDisabled:u,css:O,iconType:v,iconSide:b?d:"right",fullWidth:c,contentProps:c?{style:{justifyContent:"space-between"}}:{}},g,p),s)},c=({size:e,type:t,label:a,isDisabled:s,groupPosition:n,...d})=>{const b=Object(i.useEuiTheme)(),c=l(b,{type:t,isDisabled:s,groupPosition:n});return Object(r.jsx)(i.EuiButtonIcon,o()({},d,{disabled:s,"aria-label":null!=a?a:d["aria-label"],size:e,iconSize:e,css:c,display:"primary"===t?"fill":"base",color:"primary"===t?"primary":"text"}))};function u(e){const{type:t="empty",size:a="m"}=e;return d(e)?Object(r.jsx)(c,o()({},e,{size:a,type:t})):Object(r.jsx)(b,o()({},e,{size:a,type:t}))}},66:function(e,t,a){"use strict";a.r(t);var s=a(1),o=a.n(s),i=a(8),n=a(37),r=a(9),d=a(33),l=a(10),b=a(47),c=a(2);function u(e){const{documentId:t,onSelectDashboard:a,canSaveByReference:s,setAddToLibrary:n,isAddToLibrarySelected:r,dashboardOption:u,onChange:h,copyOnSave:p,hasAttemptedSubmit:j,hasSelectedDashboard:O}=e,g=!p&&!!t;return Object(c.jsx)(o.a.Fragment,null,Object(c.jsx)(l.EuiFormRow,{label:Object(c.jsx)(d.FormattedMessage,{id:"presentationUtil.saveModalDashboard.addToDashboardLabel",defaultMessage:"Add to dashboard"}),hasChildLabel:!1},Object(c.jsx)(o.a.Fragment,null,Object(c.jsx)(l.EuiPanel,{color:"subdued",hasShadow:!1,"data-test-subj":"add-to-dashboard-options"},Object(c.jsx)("div",null,Object(c.jsx)(o.a.Fragment,null,Object(c.jsx)(l.EuiRadio,{checked:"existing"===u,id:"existing-dashboard-option",name:"dashboard-option",label:i.i18n.translate("presentationUtil.saveModalDashboard.existingDashboardOptionLabel",{defaultMessage:"Existing"}),onChange:()=>h("existing"),disabled:g}),Object(c.jsx)("div",{className:"savAddDashboard__searchDashboards"},Object(c.jsx)(b.default,{isDisabled:"existing"!==u,onChange:a}),j&&"existing"===u&&!O?Object(c.jsx)("div",{className:"euiFormErrorText euiFormRow__text"},i.i18n.translate("presentationUtil.saveModalDashboard.existingDashboardRequiredMessage",{defaultMessage:"Dashboard is required"})):null),Object(c.jsx)(l.EuiSpacer,{size:"s"})),Object(c.jsx)(o.a.Fragment,null,Object(c.jsx)(l.EuiRadio,{checked:"new"===u,id:"new-dashboard-option",name:"dashboard-option",label:i.i18n.translate("presentationUtil.saveModalDashboard.newDashboardOptionLabel",{defaultMessage:"New"}),onChange:()=>h("new"),disabled:g}),Object(c.jsx)(l.EuiSpacer,{size:"s"})),Object(c.jsx)(l.EuiRadio,{checked:null===u,id:"add-to-library-option",name:"dashboard-option",label:i.i18n.translate("presentationUtil.saveModalDashboard.noDashboardOptionLabel",{defaultMessage:"None"}),onChange:()=>{n(!0),h(null)},disabled:g||!s}))),Object(c.jsx)(l.EuiSpacer,{size:"s"}),Object(c.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(c.jsx)(l.EuiFlexItem,{grow:!1,"data-test-subj":"add-to-library-checkbox"},Object(c.jsx)(l.EuiCheckbox,{id:"add-to-library-checkbox",label:i.i18n.translate("presentationUtil.saveModalDashboard.libraryOptionLabel",{defaultMessage:"Add to library"}),checked:r,disabled:null===u||g||!s,onChange:e=>n(e.target.checked)})),Object(c.jsx)(l.EuiFlexItem,{grow:!1},Object(c.jsx)(l.EuiIconTip,{type:"iInCircle",content:Object(c.jsx)(d.FormattedMessage,{id:"presentationUtil.saveModalDashboard.dashboardInfoTooltip",defaultMessage:"Items added to the Visualize Library are available to all dashboards. Edits to a library item appear everywhere it is used."})}))))))}t.default=function(e){const{documentInfo:t,tagOptions:a,objectType:o,onClose:d,canSaveByReference:l}=e,{id:b}=t,h=!Boolean(b),{capabilities:p}=r.a.getHooks(),{canAccessDashboards:j,canCreateNewDashboards:O}=p.useService(),g=!j()||!O(),[v,x]=Object(s.useState)(b||g?null:"existing"),[m,S]=Object(s.useState)(l&&(!h||g)),[f,y]=Object(s.useState)(null),[D,E]=Object(s.useState)(h),M=g?null:({hasAttemptedSubmit:e})=>Object(c.jsx)(u,{onSelectDashboard:e=>{y(e)},onChange:e=>{x(e)},canSaveByReference:l,copyOnSave:D,documentId:b,dashboardOption:v,setAddToLibrary:S,isAddToLibrarySelected:m,hasAttemptedSubmit:e,hasSelectedDashboard:Boolean(f)}),T=!D&&b?i.i18n.translate("presentationUtil.saveModalDashboard.saveLabel",{defaultMessage:"Save"}):i.i18n.translate("presentationUtil.saveModalDashboard.saveToLibraryLabel",{defaultMessage:"Save and add to library"}),C=i.i18n.translate("presentationUtil.saveModalDashboard.saveAndGoToDashboardLabel",{defaultMessage:"Save and go to Dashboard"}),w=null===v?T:C,L=!("existing"===v&&null===f);return Object(c.jsx)(n.SavedObjectSaveModal,{onSave:t=>{let a=null;!t.newCopyOnSave&&b||(a="existing"===v?(null==f?void 0:f.id)||null:v),e.onSave({...t,dashboardId:a,addToLibrary:m})},title:t.title,showCopyOnSave:!!b,options:m?a:void 0,description:t.description,showDescription:!0,mustCopyOnSaveMessage:e.mustCopyOnSaveMessage,confirmButtonLabel:w,initialCopyOnSave:h,isValid:L,objectType:o,onClose:d,onCopyOnSaveChange:e=>{l&&S(!0),x(null),E(e)},rightOptions:M})}}}]);