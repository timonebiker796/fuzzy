(window.savedObjectsManagement_bundle_jsonpfunction=window.savedObjectsManagement_bundle_jsonpfunction||[]).push([[2],{38:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(39);case"v8light":return s(41)}},39:function(e,t,s){var a=s(24),i=s(40);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},40:function(e,t,s){(t=s(25)(!1)).push([e.i,".savedObjectsManagementObjectView{height:100%}",""]),e.exports=t},41:function(e,t,s){var a=s(24),i=s(42);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},42:function(e,t,s){(t=s(25)(!1)).push([e.i,".savedObjectsManagementObjectView{height:100%}",""]),e.exports=t},43:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(44);case"v8light":return s(46)}},44:function(e,t,s){var a=s(24),i=s(45);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},45:function(e,t,s){(t=s(25)(!1)).push([e.i,".savedObjectsManagementEditionPage{height:100%}",""]),e.exports=t},46:function(e,t,s){var a=s(24),i=s(47);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},47:function(e,t,s){(t=s(25)(!1)).push([e.i,".savedObjectsManagementEditionPage{height:100%}",""]),e.exports=t},60:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return w}));var a=s(4),i=s(13),n=s(27),o=s(1),c=s(61),l=s(6),d=s(7),r=s(21),u=s(12),b=s(2);const j=({canDelete:e,canViewInApp:t,viewUrl:s,onDeleteClick:a,title:i})=>Object(b.jsx)(l.EuiPageHeader,{bottomBorder:!0,pageTitle:o.i18n.translate("savedObjectsManagement.view.inspectItemTitle",{defaultMessage:"Inspect {title}",values:{title:i||"saved object"}}),rightSideItems:[t&&Object(b.jsx)(l.EuiButton,{size:"s",href:s,iconType:"eye","data-test-subj":"savedObjectEditViewInApp"},Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.viewItemButtonLabel",defaultMessage:"View {title}",values:{title:i||"saved object"}})),e&&Object(b.jsx)(l.EuiButton,{color:"danger",size:"s",iconType:"trash",onClick:()=>a(),"data-test-subj":"savedObjectEditDelete"},Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.deleteItemButtonLabel",defaultMessage:"Delete"}))]});var v=s(22),p=s(23);const g=e=>o.i18n.translate("savedObjectsManagement.view.inspectCodeEditorAriaLabel",{defaultMessage:"inspect { title }",values:{title:e}}),m=o.i18n.translate("savedObjectsManagement.view.copyToClipboardLabel",{defaultMessage:"Copy to clipboard"}),O=({object:e})=>{const t=e.meta.title||"saved object",s=Object(a.useMemo)((()=>JSON.stringify(Object(d.omit)(e,"meta"),null,2)),[e]);return Object(b.jsx)(l.EuiFlexGroup,{direction:"column",gutterSize:"s"},Object(b.jsx)(l.EuiFlexItem,null,Object(b.jsx)("div",{className:"eui-textRight"},Object(b.jsx)(l.EuiCopy,{textToCopy:s},(e=>Object(b.jsx)(l.EuiButtonEmpty,{"aria-label":m,size:"s",flush:"right",iconType:"copyClipboard",onClick:e},m))),Object(b.jsx)(l.EuiSpacer,{size:"s"})),Object(b.jsx)(p.CodeEditor,{languageId:v.XJsonLang.ID,value:s,"aria-label":g(t),options:{automaticLayout:!1,fontSize:12,lineNumbers:"on",minimap:{enabled:!1},overviewRulerBorder:!1,readOnly:!0,scrollbar:{alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",guides:{indentation:!1}}})))},h=o.i18n.translate("savedObjectsManagement.view.howToFixErrorDescriptionLinkText",{defaultMessage:"Saved objects APIs"}),f=({type:e,docLinks:t})=>Object(b.jsx)(l.EuiCallOut,{title:Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.savedObjectProblemErrorMessage",defaultMessage:"There is a problem with this saved object"}),iconType:"warning",color:"danger"},Object(b.jsx)("div",null,(()=>{switch(e){case"search":return Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.savedSearchDoesNotExistErrorMessage",defaultMessage:"The saved search associated with this object no longer exists."});case"index-pattern":return Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.indexPatternDoesNotExistErrorMessage",defaultMessage:"The data view associated with this object no longer exists."});case"index-pattern-field":return Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.fieldDoesNotExistErrorMessage",defaultMessage:"A field associated with this object no longer exists in the data view."});default:return null}})()),Object(b.jsx)("div",null,Object(b.jsx)(u.FormattedMessage,{id:"savedObjectsManagement.view.howToFixErrorDescription",defaultMessage:"If you know what this error means, you can use the {savedObjectsApis} to fix it â€” otherwise click the delete button above.",values:{savedObjectsApis:Object(b.jsx)(l.EuiLink,{"aria-label":h,href:`${t.management.savedObjectsApiList}`,target:"_blank"},h)}})));var x=s(3);s(38);const M=o.i18n.translate("savedObjectsManagement.objectView.unableFindSavedObjectNotificationMessage",{defaultMessage:"Unable to find saved object"});class saved_object_view_SavedObjectEdition extends a.Component{constructor(e){super(e);const{savedObjectType:t}=e;this.state={object:void 0,type:t}}componentDidMount(){const{http:e,id:t,notifications:s}=this.props,{type:a}=this.state;Object(x.bulkGetObjects)(e,[{type:a,id:t}]).then((([e])=>{if(e.error){const{message:t}=e.error;s.toasts.addDanger({title:M,text:t})}else this.setState({object:e})})).catch((e=>{var t;s.toasts.addDanger({title:M,text:null!==(t=e.message)&&void 0!==t?t:"Unknown error"})}))}canViewInApp(e,t){var s,a;return!(!t||!t.meta.inAppUrl)&&Object(d.get)(e,null==t||null===(s=t.meta.inAppUrl)||void 0===s?void 0:s.uiCapabilitiesPath,!1)&&Boolean(null==t||null===(a=t.meta.inAppUrl)||void 0===a?void 0:a.path)}render(){var e;const{capabilities:t,notFoundType:s,http:a,uiSettings:i,docLinks:n,settings:o,theme:c}=this.props,{object:d}=this.state,{delete:u}=t.savedObjectsManagement,v=this.canViewInApp(t,d);return Object(b.jsx)(r.KibanaContextProvider,{services:{uiSettings:i,settings:o,theme:c}},Object(b.jsx)(l.EuiFlexGroup,{direction:"column","data-test-subject":"savedObjectsEdit",className:"savedObjectsManagementObjectView"},Object(b.jsx)(l.EuiFlexItem,{grow:!1},Object(b.jsx)(j,{canDelete:u&&!(null!=d&&d.meta.hiddenType),canViewInApp:v,onDeleteClick:()=>this.delete(),viewUrl:a.basePath.prepend((null==d||null===(e=d.meta.inAppUrl)||void 0===e?void 0:e.path)||""),title:null==d?void 0:d.meta.title})),s&&Object(b.jsx)(l.EuiFlexItem,{grow:!1},Object(b.jsx)(f,{type:s,docLinks:n})),d&&Object(b.jsx)(l.EuiFlexItem,{grow:!0},Object(b.jsx)(O,{object:d}))))}async delete(){var e,t;const{http:s,id:a,overlays:i,notifications:n}=this.props,{type:c,object:l}=this.state;if(!await i.openConfirm(o.i18n.translate("savedObjectsManagement.deleteConfirm.modalDescription",{defaultMessage:"This action permanently removes the object from Kibana."}),{confirmButtonText:o.i18n.translate("savedObjectsManagement.deleteConfirm.modalDeleteButtonLabel",{defaultMessage:"Delete"}),title:o.i18n.translate("savedObjectsManagement.deleteConfirm.modalTitle",{defaultMessage:"Delete ''{title}''?",values:{title:(null==l||null===(e=l.meta)||void 0===e?void 0:e.title)||"saved Kibana object"}}),buttonColor:"danger"}))return;const[{success:d,error:r}]=await Object(x.bulkDeleteObjects)(s,[{id:a,type:c}]);var u;d?(n.toasts.addSuccess(o.i18n.translate("savedObjectsManagement.objectView.deleteSavedObjectNotificationMessage",{defaultMessage:"Deleted ''{title}'' {type} object",values:{type:c,title:null==l||null===(t=l.meta)||void 0===t?void 0:t.title}})),this.redirectToListing()):n.toasts.addDanger({title:o.i18n.translate("savedObjectsManagement.objectView.unableDeleteSavedObjectNotificationMessage",{defaultMessage:"Failed to delete ''{title}'' {type} object",values:{type:c,title:null==l||null===(u=l.meta)||void 0===u?void 0:u.title}}),text:null==r?void 0:r.message})}redirectToListing(){this.props.history.push("/")}}s(43);const w=({coreStart:e,setBreadcrumbs:t,history:s})=>{const{type:l,id:d}=Object(i.useParams)(),r=e.application.capabilities,u=e.docLinks.links,{search:j}=Object(i.useLocation)(),v=Object(n.parse)(j);return Object(a.useEffect)((()=>{t([{text:o.i18n.translate("savedObjectsManagement.breadcrumb.index",{defaultMessage:"Saved objects"}),href:"/"},{text:o.i18n.translate("savedObjectsManagement.breadcrumb.inspect",{defaultMessage:"Inspect {savedObjectType}",values:{savedObjectType:l}})}])}),[t,l]),Object(b.jsx)("div",{className:"savedObjectsManagementEditionPage"},Object(b.jsx)(c.a,{coreStart:{application:e.application}},Object(b.jsx)(saved_object_view_SavedObjectEdition,{id:d,savedObjectType:l,http:e.http,overlays:e.overlays,notifications:e.notifications,capabilities:r,notFoundType:v.notFound,uiSettings:e.uiSettings,history:s,docLinks:u,settings:e.settings,theme:e.theme})))}}}]);