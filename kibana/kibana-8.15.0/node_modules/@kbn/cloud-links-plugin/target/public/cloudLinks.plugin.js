/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=19)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){e.exports=n(12)(2)},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){e.exports=n(12)(4)},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),o=n(2),s=i.__importDefault(n(22));t.default=function(e,t){var n=o.useState(t),i=n[0],a=n[1];return s.default((function(){var t=e.subscribe(a);return function(){return t.unsubscribe()}}),[e]),i}},function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));const i="ConnectionDetailsGlobalDependencies",o=t=>{e[i]=t},s=()=>{const t=e[i];if(void 0===t)throw new Error("ConnectionDetailsGlobalDependencies not set");return t}}).call(this,n(23))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},function(e,t){e.exports=__kbnSharedDeps__.Lodash},,function(e,t,n){n(20),__kbnBundles__.define("plugin/cloudLinks/public",n,24)},function(e,t,n){n.p=window.__kbnPublicPath__.cloudLinks},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=o},function(e,t,n){e.exports=n(12)(188)},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return me}));var i=n(2),o=n.n(i),s=n(10),a=n(4),l=n.n(a),r=n(5),c=n(3);class service_ConnectionDetailsService{constructor(e){var t;l()(this,"tabId$",new r.BehaviorSubject("endpoints")),l()(this,"showCloudId$",new r.BehaviorSubject(!1)),l()(this,"apiKeyName$",new r.BehaviorSubject("")),l()(this,"apiKeyStatus$",new r.BehaviorSubject("configuring")),l()(this,"apiKeyError$",new r.BehaviorSubject(void 0)),l()(this,"apiKey$",new r.BehaviorSubject(null)),l()(this,"apiKeyFormat$",new r.BehaviorSubject("encoded")),l()(this,"apiKeyHasAccess$",new r.BehaviorSubject(null)),l()(this,"setTab",(e=>{this.tabId$.next(e)})),l()(this,"toggleShowCloudId",(()=>{this.emitTelemetryEvent(["show_cloud_id_toggled"]),this.showCloudId$.next(!this.showCloudId$.getValue())})),l()(this,"setApiKeyName",(e=>{this.apiKeyName$.next(e),this.apiKeyError$.next(void 0)})),l()(this,"setApiKeyFormat",(e=>{this.emitTelemetryEvent(["key_encoding_changed",{format:e}]),this.apiKeyFormat$.next(e)})),l()(this,"validateName",(()=>{if(!this.apiKeyName$.getValue()){const e=c.i18n.translate("cloud.connectionDetails.tab.apiKeys.nameField.missingError",{defaultMessage:"API key name is required."});throw new Error(e)}})),l()(this,"createKeyAsync",(async()=>{var e;const t=null===(e=this.opts.apiKeys)||void 0===e?void 0:e.createKey;if(!t)throw new Error("createKey() is not implemented");this.apiKeyStatus$.next("creating");try{this.validateName();const{apiKey:e}=await t({name:this.apiKeyName$.getValue()});this.apiKey$.next(e),this.emitTelemetryEvent(["new_api_key_created"])}catch(e){this.apiKeyError$.next(e)}finally{this.apiKeyStatus$.next("configuring")}})),l()(this,"createKey",(()=>{this.createKeyAsync().catch((e=>{this.apiKeyError$.next(e)}))})),l()(this,"emitTelemetryEvent",(e=>{try{var t,n;null===(t=(n=this.opts).onTelemetryEvent)||void 0===t||t.call(n,e)}catch(e){console.error("Error emitting telemetry event",e)}})),this.opts=e,null===(t=e.apiKeys)||void 0===t||t.hasPermission().then((e=>{this.apiKeyHasAccess$.next(e)})).catch((e=>{console.error("Error checking API key creation permissions",e)}))}}const u=i.createContext(null),d=()=>{const e=i.useContext(u);if(!e||0===Object.keys(e).length)throw new Error("ConnectionDetailsServiceProvider is not set up.");return e};var p=n(0);const b=i.createContext({}),y=({children:e,...t})=>{const n=i.useMemo((()=>new service_ConnectionDetailsService(t)),[t]);return Object(p.jsx)(b.Provider,{value:t},Object(p.jsx)(u.Provider,{value:n},e))},g=()=>{const e=i.useContext(b);if(!e||0===Object.keys(e).length)throw new Error("ConnectionDetailsOptsContextValue is not set up.");return e};var j=n(1),f=n(8),h=n.n(f);const m=e=>h()(e,e.getValue()),x=({value:e,onCopyClick:t})=>{const n=i.useRef(null);return Object(p.jsx)(j.EuiPanel,{borderRadius:"none",hasShadow:!1,color:"subdued",grow:!1},Object(p.jsx)(j.EuiFlexGroup,{gutterSize:"s"},Object(p.jsx)(j.EuiFlexItem,null,Object(p.jsx)(j.EuiText,{size:"s",color:"subdued",style:{wordBreak:"break-all"},"data-test-subj":"copyInputValue"},Object(p.jsx)("span",{ref:n,onMouseDown:e=>{const t=n.current;if(t&&window.getSelection&&document.createRange){const n=window.getSelection();if(!n)return;e.preventDefault();const i=document.createRange();i.selectNodeContents(t),n.removeAllRanges(),n.addRange(i)}},"data-test-subj":"copyText"},e))),Object(p.jsx)(j.EuiFlexItem,{grow:!1},Object(p.jsx)(j.EuiCopy,{textToCopy:e},(e=>Object(p.jsx)(j.EuiButtonIcon,{onClick:n=>{null==t||t(n),e()},iconType:"copyClipboard",size:"m",color:"text","aria-label":c.i18n.translate("cloud.connectionDetails.components.copyInput.copyBtn.label",{defaultMessage:"Copy to clipboard"})}))))))};var k={name:"z5y8xy",styles:"min-width:200px;height:16px"},_={name:"16ceglb",styles:"font-weight:600"};const v=({learnMoreUrl:e})=>{const[t,n]=i.useState(!1),o=c.i18n.translate("cloud.connectionDetails.tab.endpoints.cloudIdField.label",{defaultMessage:"Cloud ID"});return e?Object(p.jsx)(j.EuiFlexGroup,{css:k,alignItems:"center",gutterSize:"xs"},Object(p.jsx)(j.EuiFlexItem,{grow:!1},Object(p.jsx)(j.EuiText,{size:"xs",css:_},o)),Object(p.jsx)(j.EuiFlexItem,null,Object(p.jsx)(j.EuiPopover,{button:Object(p.jsx)(j.EuiButtonIcon,{iconType:"questionInCircle",onClick:()=>{n((e=>!e))}}),isOpen:t,closePopover:()=>{n(!1)},anchorPosition:"upLeft",hasArrow:!1},Object(p.jsx)("p",{style:{width:270}},Object(p.jsx)(s.FormattedMessage,{id:"cloud.connectionDetails.tab.endpoints.cloudIdField.label.tooltip",defaultMessage:"Get started with Elastic Agent or Logstash quickly. The Cloud ID simplifies sending data to Elastic. {link}",values:{link:Object(p.jsx)(j.EuiLink,{href:e,external:!0},c.i18n.translate("cloud.connectionDetails.tab.endpoints.cloudIdField.learnMore",{defaultMessage:"Learn more"}))}}))))):Object(p.jsx)(i.Fragment,null,o)},O=({value:e,showCloudId:t,learnMoreUrl:n,onShowCloudIdToggle:o,onCopyClick:s})=>Object(p.jsx)(i.Fragment,null,Object(p.jsx)(j.EuiSpacer,{size:"l"}),Object(p.jsx)(j.EuiSwitch,{label:c.i18n.translate("cloud.connectionDetails.tab.endpoints.cloudIdField.toggle",{defaultMessage:"Show Cloud ID"}),checked:t,onChange:()=>o(),"data-test-subj":"connectionDetailsCloudIdSwitch"}),t&&Object(p.jsx)(j.EuiSpacer,{size:"l"}),t&&Object(p.jsx)(j.EuiFormRow,{label:Object(p.jsx)(v,{learnMoreUrl:n,"aria-label":c.i18n.translate("cloud.connectionDetails.cloudId.learnMore",{defaultMessage:"Learn more about Cloud ID"})}),helpText:c.i18n.translate("cloud.connectionDetails.tab.endpoints.cloudIdField.helpText",{defaultMessage:"Specific client libraries and connectors can use this unique identifier specific to Elastic Cloud."}),fullWidth:!0,"data-test-subj":"connectionDetailsCloudId"},Object(p.jsx)(x,{value:e,onCopyClick:()=>null==s?void 0:s(),"aria-label":c.i18n.translate("cloud.connectionDetails.tab.cloudId.label",{defaultMessage:"Copy Cloud ID to clipboard"})}))),E=({url:e,onCopyClick:t})=>Object(p.jsx)(j.EuiFormRow,{label:c.i18n.translate("cloud.connectionDetails.tab.endpoints.endpointField.label",{defaultMessage:"Elasticsearch endpoint"}),helpText:c.i18n.translate("cloud.connectionDetails.tab.endpoints.endpointField.helpText",{defaultMessage:"The most common method for establishing an Elasticsearch connection."}),fullWidth:!0,"data-test-subj":"connectionDetailsEsUrl"},Object(p.jsx)(x,{value:e,onCopyClick:()=>null==t?void 0:t(),"aria-label":c.i18n.translate("cloud.connectionDetails.tab.endpoints.endpointField.copy",{defaultMessage:"Copy Elasticsearch endpoint to clipboard"})})),C=()=>{var e;const{endpoints:t}=g(),n=d(),i=m(n.showCloudId$);return t?Object(p.jsx)(j.EuiForm,{component:"div"},!(null==t||!t.url)&&Object(p.jsx)(E,{url:t.url,onCopyClick:()=>n.emitTelemetryEvent(["copy_endpoint_url_clicked"])}),!(null==t||!t.id)&&Object(p.jsx)(O,{value:t.id,showCloudId:i,learnMoreUrl:null===(e=n.opts.endpoints)||void 0===e?void 0:e.cloudIdLearMoreLink,onShowCloudIdToggle:n.toggleShowCloudId,onCopyClick:()=>n.emitTelemetryEvent(["copy_cloud_id_clicked"])})):null};var M=n(6),S=n.n(M);const w=({url:e,go:t,onClick:n,children:i,...o})=>Object(p.jsx)(j.EuiLink,S()({},o,{href:e,onClick:i=>{var o;t&&((o=i).metaKey||o.altKey||o.ctrlKey||o.shiftKey||(i.preventDefault(),t(e)),null==n||n(i))}}),i),T=()=>{var e;const t=d(),n=null===(e=t.opts.apiKeys)||void 0===e?void 0:e.manageKeysLink;return n?Object(p.jsx)(w,{url:n,go:()=>{var e,i;t.emitTelemetryEvent(["manage_api_keys_clicked"]),null===(e=t.opts)||void 0===e||null===(i=e.navigateToUrl)||void 0===i||i.call(e,n)},"data-test-subj":"connectionDetailsManageApiKeysLink"},c.i18n.translate("cloud.connectionDetails.apiKeys.managerLinkLabel",{defaultMessage:"Manage API keys"})):null},D=({name:e,loading:t,error:n,onNameChange:o,onSubmit:s})=>{const a=Object(p.jsx)(i.Fragment,null,!!n&&Object(p.jsx)(i.Fragment,null,Object(p.jsx)(j.EuiCallOut,{color:"danger",iconType:"error",title:c.i18n.translate("cloud.connectionDetails.tab.apiKeys.error.title",{defaultMessage:"Error"})},n instanceof Error?n.message:String(n)),Object(p.jsx)(j.EuiSpacer,null)),Object(p.jsx)(j.EuiFormRow,{label:c.i18n.translate("cloud.connectionDetails.tab.apiKeys.nameField.label",{defaultMessage:"API key name"}),helpText:c.i18n.translate("cloud.connectionDetails.tab.apiKeys.nameField.helpText",{defaultMessage:"A good name makes it clear what your API key does."}),error:"test",isDisabled:t,fullWidth:!0},Object(p.jsx)(j.EuiFieldText,{name:"api-key-name",disabled:t,isLoading:t,value:e,onChange:o,"data-test-subj":"connectionDetailsApiKeyNameInput"}))),l=Object(p.jsx)(j.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(p.jsx)(j.EuiFlexItem,{grow:!1},Object(p.jsx)(T,null)),Object(p.jsx)(j.EuiFlexItem,{grow:!1},Object(p.jsx)(j.EuiButton,{fill:!0,type:"submit",isLoading:t,"data-test-subj":"connectionDetailsApiKeySubmitBtn"},c.i18n.translate("cloud.connectionDetails.tab.apiKeys.nameField.createButton.label",{defaultMessage:"Create API key"}))));return Object(p.jsx)(j.EuiForm,{component:"form",fullWidth:!0,onSubmit:s,"data-test-subj":"connectionDetailsApiKeyConfigForm"},a,Object(p.jsx)(j.EuiSpacer,null),l)},P=()=>{const e=d(),t=m(e.apiKeyName$),n=m(e.apiKeyStatus$),i=m(e.apiKeyError$),o=null===m(e.apiKeyHasAccess$);return Object(p.jsx)(j.EuiSkeletonText,{isLoading:o},Object(p.jsx)(D,{name:t,error:i,loading:"creating"===n,onNameChange:t=>{e.setApiKeyName(t.target.value)},onSubmit:t=>{t.preventDefault(),e.createKey()}}))},K=()=>Object(p.jsx)(i.Fragment,null,Object(p.jsx)(j.EuiCallOut,{color:"warning",iconType:"iInCircle",title:c.i18n.translate("cloud.connectionDetails.tabs.apiKeys.missingPermPanel.title",{defaultMessage:"Missing permissions"})},Object(p.jsx)("p",null,c.i18n.translate("cloud.connectionDetails.tabs.apiKeys.missingPermPanel.description",{defaultMessage:"Your assigned role does not have the necessary permissions to create an API key. Please contact your administrator."}))),Object(p.jsx)(j.EuiSpacer,{size:"m"}),Object(p.jsx)(T,null)),L=({value:e,options:t,onChange:n})=>Object(p.jsx)(j.EuiSuperSelect,{valueOfSelected:e,options:t.map((e=>({value:e.id,icon:e.icon,layoutAlign:"center",inputDisplay:Object(p.jsx)(j.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",gutterSize:"s"},Object(p.jsx)(j.EuiFlexItem,{grow:!1},Object(p.jsx)(j.EuiIcon,{type:e.icon})),Object(p.jsx)(j.EuiFlexItem,{grow:!0},Object(p.jsx)(j.EuiText,{size:"s",textAlign:"left"},e.title))),dropdownDisplay:Object(p.jsx)(j.EuiText,{size:"s"},Object(p.jsx)("strong",null,e.title),Object(p.jsx)(j.EuiText,{size:"s",color:"subdued"},Object(p.jsx)("p",null,e.description)))}))),onChange:n}),I=({value:e,onChange:t})=>Object(p.jsx)(L,{value:e,options:[{id:"encoded",icon:"key",title:c.i18n.translate("cloud.connectionDetails.apiKeyFormat.encoded.title",{defaultMessage:"Encoded"}),description:c.i18n.translate("cloud.connectionDetails.apiKeyFormat.encoded.description",{defaultMessage:"Use to make requests to Elasticsearch REST API"})},{id:"beats",icon:"logoBeats",title:c.i18n.translate("cloud.connectionDetails.apiKeyFormat.beats.title",{defaultMessage:"Beats"}),description:c.i18n.translate("cloud.connectionDetails.apiKeyFormat.beats.description",{defaultMessage:"Use to configure Beats"})},{id:"logstash",icon:"logoLogstash",title:c.i18n.translate("cloud.connectionDetails.apiKeyFormat.logstash.title",{defaultMessage:"Logstash"}),description:c.i18n.translate("cloud.connectionDetails.apiKeyFormat.logstash.description",{defaultMessage:"Use to configure Logstash"})}],onChange:e=>t(e)}),F=({apiKey:e,format:t,onFormatChange:n,onCopyClick:o})=>{const s="encoded"===t?e.encoded:`${e.id}:${e.key}`;return Object(p.jsx)(i.Fragment,null,Object(p.jsx)(j.EuiCallOut,{color:"success",iconType:"check",title:c.i18n.translate("cloud.connectionDetails.apiKeys.successForm.title",{defaultMessage:'Created API key "{name}"',values:{name:e.name}}),"data-test-subj":"connectionDetailsApiKeySuccessForm"},Object(p.jsx)("p",null,c.i18n.translate("cloud.connectionDetails.apiKeys.successForm.message",{defaultMessage:"Copy your API key below now. It will not be available after you close this dialogue. The API key will expire in 90 days."})),Object(p.jsx)(j.EuiFormRow,{label:c.i18n.translate("cloud.connectionDetails.apiKeys.successForm.keyFormatTitle",{defaultMessage:"API key format"}),fullWidth:!0},Object(p.jsx)(I,{value:t,onChange:n})),Object(p.jsx)(j.EuiFormRow,{label:c.i18n.translate("cloud.connectionDetails.apiKeys.successForm.keyValueTitle",{defaultMessage:"API key value"}),fullWidth:!0,"data-test-subj":"connectionDetailsApiKeyValueRow"},Object(p.jsx)(x,{value:s,onCopyClick:o}))),Object(p.jsx)(j.EuiSpacer,{size:"m"}),Object(p.jsx)(T,null))},A=()=>{const e=d(),t=m(e.apiKey$),n=m(e.apiKeyFormat$);return t?Object(p.jsx)(F,{apiKey:t,format:n,onFormatChange:e.setApiKeyFormat,onCopyClick:()=>e.emitTelemetryEvent(["copy_api_key_clicked",{format:n}])}):null},R=()=>{const e=d(),{apiKeys:t}=e.opts,n=m(e.apiKey$),i=m(e.apiKeyHasAccess$);return t?!1===i?Object(p.jsx)(K,null):n?Object(p.jsx)(A,null):Object(p.jsx)(P,null):null},$=()=>{const e=d();switch(m(e.tabId$)){case"endpoints":return Object(p.jsx)(C,null);case"apiKeys":return Object(p.jsx)(R,null);default:return null}},B=()=>{const e=g(),t=d(),n=m(t.tabId$),i=[];return e.endpoints&&i.push(["endpoints",c.i18n.translate("cloud.connectionDetails.tab.endpoints",{defaultMessage:"Endpoints"})]),e.apiKeys&&i.push(["apiKeys",c.i18n.translate("cloud.connectionDetails.tab.apiKeys",{defaultMessage:"API key"})]),0===i.length?null:Object(p.jsx)(j.EuiTabs,null,i.map((([e,i])=>Object(p.jsx)(j.EuiTab,{key:e,onClick:()=>t.setTab(e),isSelected:n===e,"data-test-subj":`connectionDetailsTabBtn-${e}`},i))))},U=()=>{var e;const t=g(),n=d(),o=Object(p.jsx)(j.EuiFlyoutHeader,{hasBorder:!0},Object(p.jsx)(j.EuiTitle,{size:"m","data-test-subj":"connectionDetailsModalTitle"},Object(p.jsx)("h2",null,c.i18n.translate("cloud.connectionDetails.flyout.title",{defaultMessage:"Connection details"}))),Object(p.jsx)(j.EuiSpacer,{size:"s"}),Object(p.jsx)(j.EuiText,{color:"subdued",size:"s"},Object(p.jsx)("p",null,c.i18n.translate("cloud.connectionDetails.flyout.subtitle",{defaultMessage:"Connect to the Elasticsearch API by using the following details."})," ",!(null===(e=t.links)||void 0===e||!e.learnMore)&&Object(p.jsx)(j.EuiLink,{external:!0,href:t.links.learnMore,target:"_blank",onClick:()=>n.emitTelemetryEvent(["learn_more_clicked"])},c.i18n.translate("cloud.connectionDetails.learnMoreButtonLabel",{defaultMessage:"Learn more"})))),Object(p.jsx)("div",{style:{marginBottom:"-25px"}},Object(p.jsx)(B,null))),s=Object(p.jsx)(j.EuiFlyoutBody,{"data-test-subj":"connectionDetailsModalBody"},Object(p.jsx)($,null));return Object(p.jsx)(i.Fragment,null,o,s)},N=e=>{const t=((t,n)=>{const[o,s]=i.useState(void 0);return i.useLayoutEffect((()=>{let t=!0;return(async e=>{var t,n,i,o,s,a,l,r,c;const{options:u,start:d}=e,{http:p,docLinks:b,analytics:y}=d.core,g=null===(t=d.plugins)||void 0===t||null===(n=t.share)||void 0===n||null===(i=n.url)||void 0===i?void 0:i.locators.get("MANAGEMENT_APP_LOCATOR"),j=await(null==g?void 0:g.getUrl({sectionId:"security",appId:"api_keys"}));return{...u,navigateToUrl:d.core.application?t=>{var n,i,o;null===(n=e.onNavigation)||void 0===n||n.call(e),null===(i=d.core.application)||void 0===i||null===(o=i.navigateToUrl)||void 0===o||o.call(i,t)}:void 0,links:{learnMore:b.links.fleet.apiKeysLearnMore,...null==u?void 0:u.links},endpoints:{id:null===(o=d.plugins)||void 0===o||null===(s=o.cloud)||void 0===s?void 0:s.cloudId,url:null===(a=d.plugins)||void 0===a||null===(l=a.cloud)||void 0===l?void 0:l.elasticsearchUrl,cloudIdLearMoreLink:null==b||null===(r=b.links)||void 0===r||null===(c=r.cloud)||void 0===c?void 0:c.beatsAndLogstashConfiguration,...null==u?void 0:u.endpoints},apiKeys:{manageKeysLink:j,createKey:async({name:e})=>{if(!p)throw new Error("HTTP service is not available");const t={name:e,expiration:"90d",metadata:{},role_descriptors:{}},n=await p.post("/internal/security/api_key",{body:JSON.stringify(t)});return{apiKey:{id:n.id,name:n.name,key:n.api_key,encoded:n.encoded}}},hasPermission:async()=>!0,...null==u?void 0:u.apiKeys},onTelemetryEvent:e=>{if(y)switch(e[0]){case"learn_more_clicked":y.reportEvent("connection_details_learn_more_clicked",{});break;case"tab_switched":y.reportEvent("connection_details_tab_switched",{tab:e[1].tab});break;case"copy_endpoint_url_clicked":y.reportEvent("connection_details_copy_endpoint_url_clicked",{});break;case"show_cloud_id_toggled":y.reportEvent("connection_details_show_cloud_id_toggled",{});break;case"copy_cloud_id_clicked":y.reportEvent("connection_details_copy_cloud_id_clicked",{});break;case"new_api_key_created":y.reportEvent("connection_details_new_api_key_created",{});break;case"manage_api_keys_clicked":y.reportEvent("connection_details_manage_api_keys_clicked",{});break;case"key_encoding_changed":y.reportEvent("connection_details_key_encoding_changed",{format:e[1].format});break;case"copy_api_key_clicked":y.reportEvent("connection_details_copy_api_key_clicked",{format:e[1].format})}}}})(e).then((e=>{t&&s(e)})),()=>{t=!1}}),n),o})(0,[e.onNavigation,e.options,e.start]);return t?Object(p.jsx)(y,t,e.children):null};var z=n(9),G=n(7),q=n.n(G),W=n(14),H=n(15),V=n(11),J=n.n(V);const Y="eui-global",Q="eui-utilities",X={darkMode:!1},Z=[j.euiStylisPrefixer],ee=J()({key:"css",stylisPlugins:Z,container:document.querySelector('meta[name="emotion"]')}),te=J()({key:Y,stylisPlugins:Z,container:document.querySelector(`meta[name="${Y}"]`)}),ne=J()({key:Q,stylisPlugins:Z,container:document.querySelector(`meta[name="${Q}"]`)});ee.compat=!0,te.compat=!0,ne.compat=!0;const ie={default:ee,global:te,utility:ne},oe=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:o,children:s})=>{const a=h()(e,X),l=Object(i.useMemo)((()=>(e=>e.darkMode?j.COLOR_MODES_STANDARD.dark:j.COLOR_MODES_STANDARD.light)(a)),[a]),r=n||l,c=!1!==t&&void 0;return Object(p.jsx)(j.EuiProvider,{cache:ie,modify:o,colorMode:r,globalStyles:c,utilityClasses:c},s)},se=({children:e,i18n:t,...n})=>Object(W.useIsNestedEuiProvider)()?(Object(H.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(p.jsx)(t.Context,null,e)):Object(p.jsx)(oe,n,Object(p.jsx)(t.Context,null,e));var ae=n(13);const le=({children:e,...t})=>Object(p.jsx)(se,S()({globalStyles:!1},t),Object(p.jsx)(ae.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(p.jsx)(ae.KibanaErrorBoundary,null,e))),re=o.a.createContext(null),ce=({children:e,...t})=>Object(p.jsx)(re.Provider,{value:t},e),ue=({children:e,...t})=>{const{core:{notifications:n,i18n:i,theme:o},security:{userProfiles:s},toMountPoint:a}=t;return Object(p.jsx)(ce,{userProfileApiClient:s,notifySuccess:({title:e,text:t},s)=>{const l={};null!=s&&s.durationMs&&(l.toastLifeTimeMs=s.durationMs),n.toasts.addSuccess({title:e,text:t?a(t,{i18n:i,theme:o}):void 0},l)}},e)},de=(e,t)=>n=>(q.a.render(Object(p.jsx)(le,t,e),n),()=>q.a.unmountComponentAtNode(n));i.Component;var pe=n(17);const be={notificationSuccess:{title:c.i18n.translate("userProfileComponents.updateUserProfile.notification.submitSuccessTitle",{defaultMessage:"Profile updated"}),pageReloadText:c.i18n.translate("userProfileComponents.updateUserProfile.notification.requiresPageReloadDescription",{defaultMessage:"One or more settings require you to reload the page to take effect."})}};var ye=n(16),ge=n.n(ye);const je=({security:e,core:t})=>Object(p.jsx)(ue,{core:t,security:e,toMountPoint:de},Object(p.jsx)(fe,{uiSettingsClient:t.uiSettings}));function fe({uiSettingsClient:e}){const t=Object(j.useGeneratedHtmlId)({prefix:"toggleTextSwitch"}),{euiTheme:n}=Object(j.useEuiTheme)(),{isVisible:o,toggle:s,isDarkModeOn:a,colorScheme:l}=(({uiSettingsClient:e})=>{const[t,n]=Object(i.useState)(!1),o=ge()(),s=e.isOverridden("theme:darkMode"),{userProfileData:a,isLoading:l,update:r}=(({notificationSuccess:e={},pageReloadChecker:t}={})=>{const{userProfileApiClient:n,notifySuccess:o}=function(){const e=Object(i.useContext)(re);if(!e)throw new Error("UserProfilesContext is missing. Ensure your component or React root is wrapped with <UserProfilesProvider /> or <UserProfilesKibanaProvider />.");return e}(),{userProfile$:s,enabled$:a}=n,{enabled:l=!0,title:r=be.notificationSuccess.title,pageReloadText:u=be.notificationSuccess.pageReloadText}=e,[d,b]=Object(i.useState)(!1),y=h()(s),g=h()(a),f=Object(i.useRef)(),m=Object(i.useRef)(!1),x=Object(i.useCallback)((({isRefreshRequired:e=!1}={})=>{e?o({title:r,text:Object(p.jsx)(j.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(p.jsx)(j.EuiFlexItem,{grow:!1},Object(p.jsx)("p",null,u),Object(p.jsx)(j.EuiButton,{size:"s",onClick:()=>window.location.reload(),"data-test-subj":"windowReloadButton"},c.i18n.translate("userProfileComponents.updateUserProfile.notification.requiresPageReloadButtonLabel",{defaultMessage:"Reload page"}))))},{durationMs:3e5}):o({title:r})}),[r,o,u]),k=Object(i.useCallback)((e=>{if(m.current&&b(!1),l){const n=null==t?void 0:t(f.current,e);x({isRefreshRequired:n})}}),[l,x,t]),_=Object(i.useCallback)((e=>(f.current=Object(pe.merge)({},y),b(!0),n.partialUpdate(e).then((()=>k(e))))),[n,k,y]);return Object(i.useEffect)((()=>(m.current=!0,()=>{m.current=!1})),[]),{update:_,showSuccessNotification:x,userProfileData:y,isLoading:d,userProfileEnabled:g}})({notificationSuccess:{title:c.i18n.translate("xpack.cloudLinks.userMenuLinks.darkMode.successNotificationTitle",{defaultMessage:"Color theme updated"}),pageReloadText:c.i18n.translate("xpack.cloudLinks.userMenuLinks.darkMode.successNotificationText",{defaultMessage:"Reload the page to see the changes"})},pageReloadChecker:(e,t)=>{var n,i;return(null==e||null===(n=e.userSettings)||void 0===n?void 0:n.darkMode)!==(null===(i=t.userSettings)||void 0===i?void 0:i.darkMode)}}),{userSettings:{darkMode:u=(!0===e.get("theme:darkMode")?"dark":"light")}={}}=null!=a?a:{userSettings:{}},d=Object(i.useCallback)((e=>{l||(n(e),r({userSettings:{darkMode:e?"dark":"light"}}))}),[l,r]);return Object(i.useEffect)((()=>{o()&&n("dark"===u)}),[o,u]),{isVisible:!s&&Boolean(a),toggle:d,isDarkModeOn:t,colorScheme:u}})({uiSettingsClient:e});return o?Object(p.jsx)(j.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"xs"},Object(p.jsx)(j.EuiFlexItem,null,Object(p.jsx)(j.EuiContextMenuItem,{icon:"dark"===l?"moon":"sun",size:"s",onClick:()=>{s("light"===l)},"data-test-subj":"darkModeToggle"},c.i18n.translate("xpack.cloudLinks.userMenuLinks.darkModeToggle",{defaultMessage:"Dark mode"}))),Object(p.jsx)(j.EuiFlexItem,{grow:!1,css:Object(p.css)({paddingRight:n.size.m},"","")},Object(p.jsx)(j.EuiSwitch,{label:a?c.i18n.translate("xpack.cloudLinks.userMenuLinks.darkModeOnLabel",{defaultMessage:"on"}):c.i18n.translate("xpack.cloudLinks.userMenuLinks.darkModeOffLabel",{defaultMessage:"off"}),showLabel:!1,checked:a,onChange:e=>{s(e.target.checked)},"aria-describedby":t,"data-test-subj":"darkModeToggleSwitch",compressed:!0}))):null}function he({core:e,security:t,cloud:n}){const i=Object(r.defer)((()=>t.authc.getCurrentUser())).pipe(Object(r.map)((e=>e.elastic_cloud_user)),Object(r.catchError)((()=>Object(r.of)(!0))),Object(r.filter)((e=>!0===e)),Object(r.map)((()=>{n.deploymentUrl&&e.chrome.setCustomNavLink({title:c.i18n.translate("xpack.cloudLinks.deploymentLinkLabel",{defaultMessage:"Manage this deployment"}),euiIconType:"logoCloud",href:n.deploymentUrl});const i=(({core:e,cloud:t,security:n})=>{const{profileUrl:i,billingUrl:o,organizationUrl:s}=t,a=[];return i&&a.push({label:c.i18n.translate("xpack.cloudLinks.userMenuLinks.profileLinkText",{defaultMessage:"Profile"}),iconType:"user",href:i,order:100,setAsProfile:!0}),o&&a.push({label:c.i18n.translate("xpack.cloudLinks.userMenuLinks.billingLinkText",{defaultMessage:"Billing"}),iconType:"visGauge",href:o,order:200}),s&&a.push({label:c.i18n.translate("xpack.cloudLinks.userMenuLinks.organizationLinkText",{defaultMessage:"Organization"}),iconType:"gear",href:s,order:300}),a.push({content:Object(p.jsx)(je,{core:e,security:n}),order:400,label:"",iconType:"",href:""}),a})({core:e,cloud:n,security:t});t.navControlService.addUserMenuLinks(i)}))),o=e.chrome.getHelpSupportUrl$();n.isCloudEnabled&&Object(r.combineLatest)({user:i,helpSupportUrl:o}).subscribe((({helpSupportUrl:t})=>{const n=(({docLinks:e,helpSupportUrl:t})=>[{title:c.i18n.translate("xpack.cloudLinks.helpMenuLinks.documentation",{defaultMessage:"Documentation"}),href:e.links.elasticStackGetStarted},{title:c.i18n.translate("xpack.cloudLinks.helpMenuLinks.support",{defaultMessage:"Support"}),href:t},{title:c.i18n.translate("xpack.cloudLinks.helpMenuLinks.giveFeedback",{defaultMessage:"Give feedback"}),href:e.links.kibana.feedback},{title:c.i18n.translate("xpack.cloudLinks.helpMenuLinks.connectionDetails",{defaultMessage:"Connection details"}),dataTestSubj:"connectionDetailsHelpLink",onClick:()=>{(async(e={})=>{const t=Object(z.a)().start;(async({props:e,start:t})=>{const n=t.core.overlays.openFlyout((i=>{const o=Object(p.jsx)(le,t.core,Object(p.jsx)(N,S()({},e,{onNavigation:()=>{null==n||n.close()}}),Object(p.jsx)(U,null)));return q.a.render(o,i),()=>q.a.unmountComponentAtNode(i)}),{size:"s"})})({...e,props:{...e.props,start:t},start:t})})()}}])({docLinks:e.docLinks,helpSupportUrl:t});e.chrome.setHelpMenuLinks(n)}))}class plugin_CloudLinksPlugin{setup({analytics:e}){e.registerEventType({eventType:"connection_details_learn_more_clicked",schema:{}}),e.registerEventType({eventType:"connection_details_tab_switched",schema:{tab:{type:"keyword",_meta:{description:"Connection details tab that was switched to.",optional:!1}}}}),e.registerEventType({eventType:"connection_details_copy_endpoint_url_clicked",schema:{}}),e.registerEventType({eventType:"connection_details_show_cloud_id_toggled",schema:{}}),e.registerEventType({eventType:"connection_details_copy_cloud_id_clicked",schema:{}}),e.registerEventType({eventType:"connection_details_new_api_key_created",schema:{}}),e.registerEventType({eventType:"connection_details_manage_api_keys_clicked",schema:{}}),e.registerEventType({eventType:"connection_details_key_encoding_changed",schema:{format:{type:"keyword",_meta:{description:"The format of the API key that was changed to.",optional:!1}}}}),e.registerEventType({eventType:"connection_details_copy_api_key_clicked",schema:{format:{type:"keyword",_meta:{description:"The format of the API key that was copied.",optional:!1}}}})}start(e,t){const{cloud:n,security:i,guidedOnboarding:o,share:a}=t;var l;null!=n&&n.isCloudEnabled&&!e.http.anonymousPaths.isAnonymous(window.location.pathname)&&(null!=o&&null!==(l=o.guidedOnboardingApi)&&void 0!==l&&l.isEnabled&&e.chrome.registerGlobalHelpExtensionMenuLink({linkType:"custom",href:e.http.basePath.prepend("/app/home#/getting_started"),content:Object(p.jsx)(s.FormattedMessage,{id:"xpack.cloudLinks.setupGuide",defaultMessage:"Setup guides"}),"data-test-subj":"cloudOnboardingSetupGuideLink",priority:1e3}),i&&he({core:e,security:i,cloud:n,share:a})),z.b({start:{core:e,plugins:t}})}stop(){}}function me(){return new plugin_CloudLinksPlugin}}]);