/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.ux_bundle_jsonpfunction=window.ux_bundle_jsonpfunction||[]).push([[2],{43:function(e,t,n){e.exports=n(22)(4)},44:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var r=n(66),a=n(67);function i(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=i,t.parseJSON=function(e,t){return i((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return i((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(r){return e(r)?t.right(r):t.left(n(r))}},t.fold=function(e,n){return function(r){return t.isLeft(r)?e(r.left):n(r.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(r){return e(r)?t.right(r):t.left(n(r))}))};var o=function(e,n){return a.pipe(e,t.map(n))},l=function(e,n){return a.pipe(e,t.ap(n))},u=function(e,n){return a.pipe(e,t.chain(n))},s=function(e,n,r){return a.pipe(e,t.reduce(n,r))},c=function(e){return function(n,r){var i=t.foldMap(e);return a.pipe(n,i(r))}},d=function(e,n,r){return a.pipe(e,t.reduceRight(n,r))},p=function(e){var n=t.traverse(e);return function(e,t){return a.pipe(e,n(t))}},f=function(e,n,r){return a.pipe(e,t.bimap(n,r))},m=function(e,n){return a.pipe(e,t.mapLeft(n))},g=function(e,n){return a.pipe(e,t.alt(n))},h=function(e,n){return a.pipe(e,t.extend(n))},v=function(e,n){return r.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function y(e){return{concat:function(n,r){return t.isLeft(n)?n:t.isLeft(r)?r:t.right(e.concat(n.right,r.right))}}}function b(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:o,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,r){return t.isLeft(e)||r(e.right)?e:n},filterMap:function(e,r){if(t.isLeft(e))return e;var a=r(e.right);return"None"===a._tag?n:t.right(a.value)},partition:function(e,r){return t.isLeft(e)?{left:e,right:e}:r(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,r){if(t.isLeft(e))return{left:e,right:e};var a=r(e.right);return t.isLeft(a)?{left:t.right(a.left),right:n}:{left:n,right:t.right(a.right)}}}}function E(e){return{URI:t.URI,_E:void 0,map:o,ap:function(n,r){return t.isLeft(n)?t.isLeft(r)?t.left(e.concat(n.left,r.left)):n:t.isLeft(r)?r:t.right(n.right(r.right))},of:t.of}}function x(e){return{URI:t.URI,_E:void 0,map:o,alt:function(n,r){if(t.isRight(n))return n;var a=r();return t.isLeft(a)?t.left(e.concat(n.left,a.left)):a}}}function T(e,n){return{concat:function(r,a){return t.isLeft(r)?t.isLeft(a)?t.left(e.concat(r.left,a.left)):r:t.isLeft(a)?a:t.right(n.concat(r.right,a.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(r){return t.isLeft(r)?t.left(e(r.left)):t.right(n(r.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return a.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return a.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return a.pipe(n,t.chainW((function(n){return a.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(a.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(a.identity),t.reduce=function(e,n){return function(r){return t.isLeft(r)?e:n(e,r.right)}},t.foldMap=function(e){return function(n){return function(r){return t.isLeft(r)?e.empty:n(r.right)}}},t.reduceRight=function(e,n){return function(r){return t.isLeft(r)?e:n(r.right,e)}},t.traverse=function(e){return function(n){return function(r){return t.isLeft(r)?e.of(t.left(r.left)):e.map(n(r.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(r){return t.isLeft(r)?"left("+e.show(r.left)+")":"right("+n.show(r.right)+")"}}},t.getEq=function(e,n){return{equals:function(r,a){return r===a||(t.isLeft(r)?t.isLeft(a)&&e.equals(r.left,a.left):t.isRight(a)&&n.equals(r.right,a.right))}}},t.getSemigroup=function(e){return{concat:function(n,r){return t.isLeft(r)?n:t.isLeft(n)?r:t.right(e.concat(n.right,r.right))}}},t.getApplySemigroup=y,t.getApplyMonoid=function(e){return{concat:y(e).concat,empty:t.right(e.empty)}},t.getFilterable=b,t.getWitherable=function(e){var n=b(e);return{URI:t.URI,_E:void 0,map:o,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:p,sequence:t.sequence,reduce:s,foldMap:c,reduceRight:d,wither:function(e){var t=p(e);return function(r,a){return e.map(t(r,a),n.compact)}},wilt:function(e){var t=p(e);return function(r,a){return e.map(t(r,a),n.separate)}}}},t.getApplicativeValidation=E,t.getAltValidation=x,t.getValidation=function(e){var n=E(e),r=x(e);return{URI:t.URI,_E:void 0,map:o,of:t.of,chain:u,bimap:f,mapLeft:m,reduce:s,foldMap:c,reduceRight:d,extend:h,traverse:p,sequence:t.sequence,chainRec:v,throwError:t.throwError,ap:n.ap,alt:r.alt}},t.getValidationSemigroup=T,t.Functor={URI:t.URI,map:o},t.Applicative={URI:t.URI,map:o,ap:l,of:t.of},t.Monad={URI:t.URI,map:o,ap:l,of:t.of,chain:u},t.Foldable={URI:t.URI,reduce:s,foldMap:c,reduceRight:d},t.Traversable={URI:t.URI,map:o,reduce:s,foldMap:c,reduceRight:d,traverse:p,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:f,mapLeft:m},t.Alt={URI:t.URI,map:o,alt:g},t.Extend={URI:t.URI,map:o,extend:h},t.ChainRec={URI:t.URI,map:o,ap:l,chain:u,chainRec:v},t.MonadThrow={URI:t.URI,map:o,ap:l,of:t.of,chain:u,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:T(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:o,of:t.of,ap:l,chain:u,reduce:s,foldMap:c,reduceRight:d,traverse:p,sequence:t.sequence,bimap:f,mapLeft:m,alt:g,extend:h,chainRec:v,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,r){return!t.isLeft(r)&&e.equals(n,r.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(a.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(r){return a.pipe(n(r),t.map((function(t){return a.bind_(r,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return a.flow(t.map((function(t){return function(n){return a.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(6),i=r.__importDefault(n(70));t.default=function(e,t){var n=a.useState(t),r=n[0],o=n[1];return i.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),r}},52:function(e,t,n){"use strict";const r=n(61),a=n(62),i=n(63);function o(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function u(e,t){return t.decode?a(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function f(e,t){o((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{const a="string"==typeof n&&n.split("").indexOf(e.arrayFormatSeparator)>-1?n.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===n?n:u(n,e);r[t]=a};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),r=Object.create(null);if("string"!=typeof e)return r;if(!(e=e.trim().replace(/^[?#&]/,"")))return r;for(const a of e.split("&")){let[e,o]=i(t.decode?a.replace(/\+/g," "):a,"=");o=void 0===o?null:["comma","separator"].includes(t.arrayFormat)?o:u(o,t),n(u(e,t),o,r)}for(const e of Object.keys(r)){const n=r[e];if("object"==typeof n&&null!==n)for(const e of Object.keys(n))n[e]=p(n[e],t);else r[e]=p(n,t)}return!1===t.sort?r:(!0===t.sort?Object.keys(r).sort():Object.keys(r).sort(t.sort)).reduce(((e,t)=>{const n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=s(n):e[t]=n,e}),Object.create(null))}t.extract=d,t.parse=f,t.stringify=(e,t)=>{if(!e)return"";o((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const n=n=>t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{const a=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[",a,"]"].join("")]:[...n,[l(t,e),"[",l(a,e),"]=",l(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[l(t,e),"[]"].join("")]:[...n,[l(t,e),"[]=",l(r,e)].join("")];case"comma":case"separator":return t=>(n,r)=>null==r||0===r.length?n:0===n.length?[[l(t,e),"=",l(r,e)].join("")]:[[n,l(r,e)].join(e.arrayFormatSeparator)];default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,l(t,e)]:[...n,[l(t,e),"=",l(r,e)].join("")]}}(t),a={};for(const t of Object.keys(e))n(t)||(a[t]=e[t]);const i=Object.keys(a);return!1!==t.sort&&i.sort(t.sort),i.map((n=>{const a=e[n];return void 0===a?"":null===a?l(n,t):Array.isArray(a)?a.reduce(r(n),[]).join("&"):l(n,t)+"="+l(a,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[n,r]=i(e,"#");return Object.assign({url:n.split("?")[0]||"",query:f(d(e),t)},t&&t.parseFragmentIdentifier&&r?{fragmentIdentifier:u(r,t)}:{})},t.stringifyUrl=(e,n)=>{n=Object.assign({encode:!0,strict:!0},n);const r=c(e.url).split("?")[0]||"",a=t.extract(e.url),i=t.parse(a,{sort:!1}),o=Object.assign(i,e.query);let u=t.stringify(o,n);u&&(u=`?${u}`);let s=function(e){let t="";const n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(s=`#${l(e.fragmentIdentifier,n)}`),`${r}${u}${s}`}},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var r=void 0;t.setEuiDevProviderWarning=function(e){return r=e},t.getEuiDevProviderWarning=function(){return r},t.emitEuiProviderWarning=function(e){if("function"==typeof r)return r(e);switch(r){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},54:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),a=n(71),i=function(){};t.default=function(e,t,n){if(!a.isClient)return[t,i,i];if(!e)throw new Error("useLocalStorage key may not be falsy");var o=n?n.raw?function(e){return e}:n.deserializer:JSON.parse,l=r.useState((function(){try{var r=n?n.raw?String:n.serializer:JSON.stringify,a=localStorage.getItem(e);return null!==a?o(a):(t&&localStorage.setItem(e,r(t)),t)}catch(e){return t}})),u=l[0],s=l[1],c=r.useCallback((function(t){try{var r="function"==typeof t?t(u):t;if(void 0===r)return;var a;a=n?n.raw?"string"==typeof r?r:JSON.stringify(r):n.serializer?n.serializer(r):JSON.stringify(r):JSON.stringify(r),localStorage.setItem(e,a),s(o(a))}catch(e){}}),[e,s]),d=r.useCallback((function(){try{localStorage.removeItem(e),s(void 0)}catch(e){}}),[e,s]);return[u,c,d]}},61:function(e,t,n){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},62:function(e,t,n){"use strict";var r="%[a-f0-9]{2}",a=new RegExp("("+r+")|([^%]+?)","gi"),i=new RegExp("("+r+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function l(e){try{return decodeURIComponent(e)}catch(r){for(var t=e.match(a)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(a)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=l(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),o=0;o<a.length;o++){var u=a[o];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},63:function(e,t,n){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},64:function(e,t,n){"use strict";e.exports=n(65)},65:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(27),i=(r=n(6))&&"object"==typeof r&&"default"in r?r.default:r;function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.matchRoutes=function e(t,n,r){return void 0===r&&(r=[]),t.some((function(t){var i=t.path?a.matchPath(n,t):r.length?r[r.length-1].match:a.Router.computeRootMatch(n);return i&&(r.push({route:t,match:i}),t.routes&&e(t.routes,n,r)),i})),r},t.renderRoutes=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e?i.createElement(a.Switch,n,e.map((function(e,n){return i.createElement(a.Route,{key:e.key||n,path:e.path,exact:e.exact,strict:e.strict,render:function(n){return e.render?e.render(o({},n,{},t,{route:e})):i.createElement(e.component,o({},n,t,{route:e}))}})}))):null}},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},67:function(e,t,n){"use strict";function r(e){return e}function a(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=r,t.unsafeCoerce=r,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,r,a,i,o,l,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return a(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return i(a(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(a(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return l(o(i(a(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return u(l(o(i(a(r(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=a,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,r,a,i,o,l,u,s,c,d,p,f,m,g,h,v,y,b){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return i(a(r(n(t(e)))));case 7:return o(i(a(r(n(t(e))))));case 8:return l(o(i(a(r(n(t(e)))))));case 9:return u(l(o(i(a(r(n(t(e))))))));case 10:return s(u(l(o(i(a(r(n(t(e)))))))));case 11:return c(s(u(l(o(i(a(r(n(t(e))))))))));case 12:return d(c(s(u(l(o(i(a(r(n(t(e)))))))))));case 13:return p(d(c(s(u(l(o(i(a(r(n(t(e))))))))))));case 14:return f(p(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))));case 15:return m(f(p(d(c(s(u(l(o(i(a(r(n(t(e))))))))))))));case 16:return g(m(f(p(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))))));case 17:return h(g(m(f(p(d(c(s(u(l(o(i(a(r(n(t(e))))))))))))))));case 18:return v(h(g(m(f(p(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))))))));case 19:return y(v(h(g(m(f(p(d(c(s(u(l(o(i(a(r(n(t(e))))))))))))))))));case 20:return b(y(v(h(g(m(f(p(d(c(s(u(l(o(i(a(r(n(t(e)))))))))))))))))))}},t.hole=a,t.bind_=function(e,t,n){var r;return Object.assign({},e,((r={})[t]=n,r))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(69),a=n(44);function i(e){return void 0!==e.message?e.message:"Invalid value "+("function"==typeof(t=e.value)?r.getFunctionName(t):"number"!=typeof t||isFinite(t)?JSON.stringify(t):isNaN(t)?"NaN":t>0?"Infinity":"-Infinity")+" supplied to "+e.context.map((function(e){return e.key+": "+e.type.name})).join("/");var t}function o(e){return e.map(i)}function l(){return["No errors!"]}t.failure=o,t.success=l,t.PathReporter={report:a.fold(o,l)}},69:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(44),l=o.either.map,u=o.either.chain,s=function(){function e(e,t,n,r){this.name=e,this.is=t,this.validate=n,this.encode=r,this.decode=this.decode.bind(this)}return e.prototype.pipe=function(n,r){var a=this;return void 0===r&&(r="pipe("+this.name+", "+n.name+")"),new e(r,n.is,(function(e,t){return u(a.validate(e,t),(function(e){return n.validate(e,t)}))}),this.encode===t.identity&&n.encode===t.identity?t.identity:function(e){return a.encode(n.encode(e))})},e.prototype.asDecoder=function(){return this},e.prototype.asEncoder=function(){return this},e.prototype.decode=function(e){return this.validate(e,[{key:"",type:this,actual:e}])},e}();t.Type=s,t.identity=function(e){return e},t.getFunctionName=function(e){return e.displayName||e.name||"<function"+e.length+">"},t.getContextEntry=function(e,t){return{key:e,type:t}},t.appendContext=function(e,t,n,r){for(var a=e.length,i=Array(a+1),o=0;o<a;o++)i[o]=e[o];return i[a]={key:t,type:n,actual:r},i},t.failures=o.left,t.failure=function(e,n,r){return t.failures([{value:e,context:n,message:r}])},t.success=o.right;var c=function(e,t){for(var n=t.length,r=0;r<n;r++)e.push(t[r])},d=function(e){return function(t){return t._tag===e}},p=d("AnyType"),f=d("InterfaceType"),m=d("PartialType"),g=function(e){function n(){var n=e.call(this,"null",(function(e){return null===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NullType",n}return a(n,e),n}(s);t.NullType=g,t.nullType=new g,t.null=t.nullType;var h=function(e){function n(){var n=e.call(this,"undefined",(function(e){return void 0===e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="UndefinedType",n}return a(n,e),n}(s);t.UndefinedType=h;var v=new h;t.undefined=v;var y=function(e){function n(){var n=e.call(this,"void",v.is,v.validate,t.identity)||this;return n._tag="VoidType",n}return a(n,e),n}(s);t.VoidType=y,t.voidType=new y,t.void=t.voidType;var b=function(e){function n(){var n=e.call(this,"unknown",(function(e){return!0}),t.success,t.identity)||this;return n._tag="UnknownType",n}return a(n,e),n}(s);t.UnknownType=b,t.unknown=new b;var E=function(e){function n(){var n=e.call(this,"string",(function(e){return"string"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="StringType",n}return a(n,e),n}(s);t.StringType=E,t.string=new E;var x=function(e){function n(){var n=e.call(this,"number",(function(e){return"number"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="NumberType",n}return a(n,e),n}(s);t.NumberType=x,t.number=new x;var T=function(e){function n(){var n=e.call(this,"boolean",(function(e){return"boolean"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="BooleanType",n}return a(n,e),n}(s);t.BooleanType=T,t.boolean=new T;var O=function(e){function n(){var n=e.call(this,"UnknownArray",Array.isArray,(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyArrayType",n}return a(n,e),n}(s);t.AnyArrayType=O,t.UnknownArray=new O,t.Array=t.UnknownArray;var j=function(e){function n(){var n=e.call(this,"UnknownRecord",(function(e){return"[object Object]"===Object.prototype.toString.call(e)}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="AnyDictionaryType",n}return a(n,e),n}(s);t.AnyDictionaryType=j,t.UnknownRecord=new j;var w=function(e){function n(){var n=e.call(this,"Function",(function(e){return"function"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="FunctionType",n}return a(n,e),n}(s);t.FunctionType=w,t.Function=new w;var k=function(e){function t(t,n,r,a,i,o){var l=e.call(this,t,n,r,a)||this;return l.type=i,l.predicate=o,l._tag="RefinementType",l}return a(t,e),t}(s);t.RefinementType=k,t.brand=function(e,t,n){return X(e,t,n)},t.Int=t.brand(t.number,(function(e){return Number.isInteger(e)}),"Int");var S=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.value=i,o._tag="LiteralType",o}return a(t,e),t}(s);t.LiteralType=S,t.literal=function(e,n){void 0===n&&(n=JSON.stringify(e));var r=function(t){return t===e};return new S(n,r,(function(n,a){return r(n)?t.success(e):t.failure(n,a)}),t.identity,e)};var F=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.keys=i,o._tag="KeyofType",o}return a(t,e),t}(s);t.KeyofType=F;var I=Object.prototype.hasOwnProperty;t.keyof=function(e,n){void 0===n&&(n=Object.keys(e).map((function(e){return JSON.stringify(e)})).join(" | "));var r=function(n){return t.string.is(n)&&I.call(e,n)};return new F(n,r,(function(e,n){return r(e)?t.success(e):t.failure(e,n)}),t.identity,e)};var P=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.runDefinition=i,o._tag="RecursiveType",o}return a(t,e),t}(s);t.RecursiveType=P,Object.defineProperty(P.prototype,"type",{get:function(){return this.runDefinition()},enumerable:!0,configurable:!0}),t.recursion=function(e,t){var n,r=function(){return n||((n=t(a)).name=e),n},a=new P(e,(function(e){return r().is(e)}),(function(e,t){return r().validate(e,t)}),(function(e){return r().encode(e)}),r);return a};var _=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ArrayType",o}return a(t,e),t}(s);t.ArrayType=_,t.array=function(e,n){return void 0===n&&(n="Array<"+e.name+">"),new _(n,(function(n){return t.UnknownArray.is(n)&&n.every(e.is)}),(function(n,r){return u(t.UnknownArray.validate(n,r),(function(n){for(var a=n.length,i=n,l=[],u=0;u<a;u++){var s=n[u],d=e.validate(s,t.appendContext(r,String(u),e,s));if(o.isLeft(d))c(l,d.left);else{var p=d.right;p!==s&&(i===n&&(i=n.slice()),i[u]=p)}}return l.length>0?t.failures(l):t.success(i)}))}),e.encode===t.identity?t.identity:function(t){return t.map(e.encode)},e)};var L=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.props=i,o._tag="InterfaceType",o}return a(t,e),t}(s);t.InterfaceType=L;var M=function(e){return Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")},R=function(e){for(var n=0;n<e.length;n++)if(e[n].encode!==t.identity)return!1;return!0},C=function(e){return"{ "+M(e)+" }"};t.type=function(e,n){void 0===n&&(n=C(e));var r=Object.keys(e),a=r.map((function(t){return e[t]})),l=r.length;return new L(n,(function(e){if(t.UnknownRecord.is(e)){for(var n=0;n<l;n++){var i=r[n];if(!I.call(e,i)||!a[n].is(e[i]))return!1}return!0}return!1}),(function(e,n){return u(t.UnknownRecord.validate(e,n),(function(e){for(var u=e,s=[],d=0;d<l;d++){var p=r[d];I.call(u,p)||(u===e&&(u=i({},e)),u[p]=u[p]);var f=u[p],m=a[d],g=m.validate(f,t.appendContext(n,p,m,f));if(o.isLeft(g))c(s,g.left);else{var h=g.right;h!==f&&(u===e&&(u=i({},e)),u[p]=h)}}return s.length>0?t.failures(s):t.success(u)}))}),R(a)?t.identity:function(e){for(var n=i({},e),o=0;o<l;o++){var u=r[o],s=a[o].encode;s!==t.identity&&(n[u]=s(e[u]))}return n},e)},t.interface=t.type;var N=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.props=i,o._tag="PartialType",o}return a(t,e),t}(s);t.PartialType=N;var A=function(e){return"Partial<"+e+">"};t.partial=function(e,n){void 0===n&&(n=A(C(e)));var r=Object.keys(e),a=r.map((function(t){return e[t]})),l=r.length;return new N(n,(function(n){if(t.UnknownRecord.is(n)){for(var a=0;a<l;a++){var i=r[a],o=n[i];if(void 0!==o&&!e[i].is(o))return!1}return!0}return!1}),(function(n,a){return u(t.UnknownRecord.validate(n,a),(function(n){for(var u=n,s=[],d=0;d<l;d++){var p=r[d],f=u[p],m=e[p],g=m.validate(f,t.appendContext(a,p,m,f));if(o.isLeft(g))void 0!==f&&c(s,g.left);else{var h=g.right;h!==f&&(u===n&&(u=i({},n)),u[p]=h)}}return s.length>0?t.failures(s):t.success(u)}))}),R(a)?t.identity:function(e){for(var t=i({},e),n=0;n<l;n++){var o=r[n],u=e[o];void 0!==u&&(t[o]=a[n].encode(u))}return t},e)};var U=function(e){function t(t,n,r,a,i,o){var l=e.call(this,t,n,r,a)||this;return l.domain=i,l.codomain=o,l._tag="DictionaryType",l}return a(t,e),t}(s);t.DictionaryType=U,t.record=function(e,n,r){return void 0===r&&(r="{ [K in "+e.name+"]: "+n.name+" }"),new U(r,(function(r){return t.UnknownRecord.is(r)?Object.keys(r).every((function(t){return e.is(t)&&n.is(r[t])})):p(n)&&Array.isArray(r)}),(function(r,a){if(t.UnknownRecord.is(r)){for(var i={},l=[],u=Object.keys(r),s=u.length,d=!1,f=0;f<s;f++){var m=u[f],g=r[m],h=e.validate(m,t.appendContext(a,m,e,m));if(o.isLeft(h))c(l,h.left);else{var v=h.right;d=d||v!==m,m=v;var y=n.validate(g,t.appendContext(a,m,n,g));if(o.isLeft(y))c(l,y.left);else{var b=y.right;d=d||b!==g,i[m]=b}}}return l.length>0?t.failures(l):t.success(d?i:r)}return p(n)&&Array.isArray(r)?t.success(r):t.failure(r,a)}),e.encode===t.identity&&n.encode===t.identity?t.identity:function(t){for(var r={},a=Object.keys(t),i=a.length,o=0;o<i;o++){var l=a[o];r[String(e.encode(l))]=n.encode(t[l])}return r},e,n)};var D=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.types=i,o._tag="UnionType",o}return a(t,e),t}(s);t.UnionType=D;var V=function(e){return"("+e.map((function(e){return e.name})).join(" | ")+")"};t.union=function(e,n){void 0===n&&(n=V(e));var r=oe(e);if(void 0!==r&&e.length>0){var a=r[0],i=r[1],l=i.length,s=function(e){for(var t=0;t<l;t++)if(-1!==i[t].indexOf(e))return t};return new $(n,(function(n){if(t.UnknownRecord.is(n)){var r=s(n[a]);return void 0!==r&&e[r].is(n)}return!1}),(function(n,r){return u(t.UnknownRecord.validate(n,r),(function(i){var o=s(i[a]);if(void 0===o)return t.failure(n,r);var l=e[o];return l.validate(i,t.appendContext(r,String(o),l,i))}))}),R(e)?t.identity:function(t){var r=s(t[a]);if(void 0===r)throw new Error("no codec found to encode value in union codec "+n);return e[r].encode(t)},e,a)}return new D(n,(function(t){return e.some((function(e){return e.is(t)}))}),(function(n,r){for(var a=[],i=0;i<e.length;i++){var l=e[i],u=l.validate(n,t.appendContext(r,String(i),l,n));if(!o.isLeft(u))return t.success(u.right);c(a,u.left)}return t.failures(a)}),R(e)?t.identity:function(t){for(var r=0,a=e;r<a.length;r++){var i=a[r];if(i.is(t))return i.encode(t)}throw new Error("no codec found to encode value in union type "+n)},e)};var B=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.types=i,o._tag="IntersectionType",o}return a(t,e),t}(s);t.IntersectionType=B;var z=function(e,n){for(var r=!0,a=!0,i=0,o=n;i<o.length;i++)(c=o[i])!==e&&(r=!1),t.UnknownRecord.is(c)&&(a=!1);if(r)return e;if(a)return n[n.length-1];for(var l={},u=0,s=n;u<s.length;u++){var c=s[u];for(var d in c)c[d]===e[d]&&l.hasOwnProperty(d)||(l[d]=c[d])}return l};t.intersection=function(e,n){void 0===n&&(n="("+e.map((function(e){return e.name})).join(" & ")+")");var r=e.length;return new B(n,(function(t){return e.every((function(e){return e.is(t)}))}),0===e.length?t.success:function(n,a){for(var i=[],l=[],u=0;u<r;u++){var s=e[u],d=s.validate(n,t.appendContext(a,String(u),s,n));o.isLeft(d)?c(l,d.left):i.push(d.right)}return l.length>0?t.failures(l):t.success(z(n,i))},0===e.length?t.identity:function(t){return z(t,e.map((function(e){return e.encode(t)})))},e)};var W=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.types=i,o._tag="TupleType",o}return a(t,e),t}(s);t.TupleType=W,t.tuple=function(e,n){void 0===n&&(n="["+e.map((function(e){return e.name})).join(", ")+"]");var r=e.length;return new W(n,(function(n){return t.UnknownArray.is(n)&&n.length===r&&e.every((function(e,t){return e.is(n[t])}))}),(function(n,a){return u(t.UnknownArray.validate(n,a),(function(n){for(var i=n.length>r?n.slice(0,r):n,l=[],u=0;u<r;u++){var s=n[u],d=e[u],p=d.validate(s,t.appendContext(a,String(u),d,s));if(o.isLeft(p))c(l,p.left);else{var f=p.right;f!==s&&(i===n&&(i=n.slice()),i[u]=f)}}return l.length>0?t.failures(l):t.success(i)}))}),R(e)?t.identity:function(t){return e.map((function(e,n){return e.encode(t[n])}))},e)};var q=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ReadonlyType",o}return a(t,e),t}(s);t.ReadonlyType=q,t.readonly=function(e,n){return void 0===n&&(n="Readonly<"+e.name+">"),new q(n,e.is,(function(t,n){return l(e.validate(t,n),(function(e){return e}))}),e.encode===t.identity?t.identity:e.encode,e)};var G=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ReadonlyArrayType",o}return a(t,e),t}(s);t.ReadonlyArrayType=G,t.readonlyArray=function(e,n){void 0===n&&(n="ReadonlyArray<"+e.name+">");var r=t.array(e);return new G(n,r.is,(function(e,t){return l(r.validate(e,t),(function(e){return e}))}),r.encode,e)},t.strict=function(e,n){return t.exact(t.type(e),n)};var $=function(e){function t(t,n,r,a,i,o){var l=e.call(this,t,n,r,a,i)||this;return l.tag=o,l}return a(t,e),t}(D);t.TaggedUnionType=$,t.taggedUnion=function(e,n,r){void 0===r&&(r=V(n));var a=t.union(n,r);return a instanceof $?a:(console.warn("[io-ts] Cannot build a tagged union for "+r+", returning a de-optimized union"),new $(r,a.is,a.validate,a.encode,n,e))};var Q=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.type=i,o._tag="ExactType",o}return a(t,e),t}(s);t.ExactType=Q;var H=function(e){switch(e._tag){case"RefinementType":case"ReadonlyType":return H(e.type);case"InterfaceType":case"StrictType":case"PartialType":return e.props;case"IntersectionType":return e.types.reduce((function(e,t){return Object.assign(e,H(t))}),{})}},Y=function(e,t){for(var n=Object.getOwnPropertyNames(e),r=!1,a={},i=0;i<n.length;i++){var o=n[i];I.call(t,o)?a[o]=e[o]:r=!0}return r?a:e};t.exact=function(e,n){void 0===n&&(n=function(e){return f(e)?"{| "+M(e.props)+" |}":m(e)?A("{| "+M(e.props)+" |}"):"Exact<"+e.name+">"}(e));var r=H(e);return new Q(n,e.is,(function(n,a){return u(t.UnknownRecord.validate(n,a),(function(){return l(e.validate(n,a),(function(e){return Y(e,r)}))}))}),(function(t){return e.encode(Y(t,r))}),e)},t.getValidationError=function(e,t){return{value:e,context:t}},t.getDefaultContext=function(e){return[{key:"",type:e}]};var K=function(e){function n(){var n=e.call(this,"never",(function(e){return!1}),(function(e,n){return t.failure(e,n)}),(function(){throw new Error("cannot encode never")}))||this;return n._tag="NeverType",n}return a(n,e),n}(s);t.NeverType=K,t.never=new K;var J=function(e){function n(){var n=e.call(this,"any",(function(e){return!0}),t.success,t.identity)||this;return n._tag="AnyType",n}return a(n,e),n}(s);t.AnyType=J,t.any=new J,t.Dictionary=t.UnknownRecord;var Z=function(e){function n(){var n=e.call(this,"object",(function(e){return null!==e&&"object"==typeof e}),(function(e,r){return n.is(e)?t.success(e):t.failure(e,r)}),t.identity)||this;return n._tag="ObjectType",n}return a(n,e),n}(s);function X(e,n,r){return void 0===r&&(r="("+e.name+" | "+t.getFunctionName(n)+")"),new k(r,(function(t){return e.is(t)&&n(t)}),(function(r,a){return u(e.validate(r,a),(function(e){return n(e)?t.success(e):t.failure(e,a)}))}),e.encode,e,n)}t.ObjectType=Z,t.object=new Z,t.refinement=X,t.Integer=X(t.number,Number.isInteger,"Integer"),t.dictionary=t.record;var ee=function(e){function t(t,n,r,a,i){var o=e.call(this,t,n,r,a)||this;return o.props=i,o._tag="StrictType",o}return a(t,e),t}(s);t.StrictType=ee,t.clean=function(e){return e},t.alias=function(e){return function(){return e}};var te=function(e){return e.length>0};function ne(e,t){for(var n=[],r=0,a=e;r<a.length;r++){var i=a[r];-1!==t.indexOf(i)&&n.push(i)}return n}function re(e){return"LiteralType"===e._tag}t.emptyTags={};var ae=[];function ie(e){if(-1!==ae.indexOf(e))return t.emptyTags;if(function(e){return"InterfaceType"===e._tag}(e)||function(e){return"StrictType"===e._tag}(e)){var n=t.emptyTags;for(var r in e.props){var a=e.props[r];re(a)&&(n===t.emptyTags&&(n={}),n[r]=[a.value])}return n}if(function(e){return"ExactType"===e._tag}(e)||function(e){return"RefinementType"===e._tag}(e))return ie(e.type);if(function(e){return"IntersectionType"===e._tag}(e))return e.types.reduce((function(e,n){return function(e,n){if(e===t.emptyTags)return n;if(n===t.emptyTags)return e;var r=Object.assign({},e);for(var a in n)if(e.hasOwnProperty(a)){var i=ne(e[a],n[a]);if(!te(i)){r=t.emptyTags;break}r[a]=i}else r[a]=n[a];return r}(e,ie(n))}),t.emptyTags);if(function(e){return"UnionType"===e._tag}(e))return e.types.slice(1).reduce((function(e,n){return function(e,n){if(e===t.emptyTags||n===t.emptyTags)return t.emptyTags;var r=t.emptyTags;for(var a in e)n.hasOwnProperty(a)&&0===ne(e[a],n[a]).length&&(r===t.emptyTags&&(r={}),r[a]=e[a].concat(n[a]));return r}(e,ie(n))}),ie(e.types[0]));if(function(e){return"RecursiveType"===e._tag}(e)){ae.push(e);var i=ie(e.type);return ae.pop(),i}return t.emptyTags}function oe(e){for(var t=ie(e[0]),n=Object.keys(t),r=e.length,a=function(n){for(var a=t[n].slice(),i=[t[n]],o=1;o<r;o++){var l=ie(e[o])[n];if(void 0===l)return"continue-keys";if(l.some((function(e){return-1!==a.indexOf(e)})))return"continue-keys";a.push.apply(a,l),i.push(l)}return{value:[n,i]}},i=0,o=n;i<o.length;i++){var l=a(o[i]);if("object"==typeof l)return l.value}}t.getTags=ie,t.getIndex=oe},70:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=a},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=n(17).__importDefault(n(72));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},72:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;0!=a--;){var o=i[a];if(!("_owner"===o&&t.$$typeof||e(t[o],n[o])))return!1}return!0}return t!=t&&n!=n}},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),a=n(6),i=r.__importDefault(n(74));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=i.default(e,t),o=r[0],l=r[1],u=r[2];return a.useEffect(u,n),[o,l]}},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.default=function(e,t){void 0===t&&(t=0);var n=r.useRef(!1),a=r.useRef(),i=r.useRef(e),o=r.useCallback((function(){return n.current}),[]),l=r.useCallback((function(){n.current=!1,a.current&&clearTimeout(a.current),a.current=setTimeout((function(){n.current=!0,i.current()}),t)}),[t]),u=r.useCallback((function(){n.current=null,a.current&&clearTimeout(a.current)}),[]);return r.useEffect((function(){i.current=e}),[e]),r.useEffect((function(){return l(),u}),[t]),[o,u,l]}},80:function(e,t,n){"use strict";n.r(t),n.d(t,"uxRoutes",(function(){return dr})),n.d(t,"uxRouter",(function(){return fr})),n.d(t,"UXAppRoot",(function(){return mr})),n.d(t,"renderApp",(function(){return gr}));var r=n(23),a=n(7),i=n(6),o=n.n(i),l=n(26),u=n.n(l),s=n(12),c=n(13),d=n.n(c),p=n(24),f=n(10),m=n(44);function g(...e){return{...new p.Type("merge",(t=>e.every((e=>e.is(t)))),((t,n)=>{const r=[],a=[];e.map(((e,r)=>e.validate(t,n.concat({key:String(r),type:e,actual:t})))).forEach((e=>{Object(m.isLeft)(e)?r.push(...e.left):a.push(e.right)}));const i=Object(f.merge)({},...a);return r.length>0?p.failures(r):p.success(i)}),(t=>e.reduce(((e,t)=>t.encode(e)),t))),_tag:"MergeType",types:e}}const h=["StringType","NumberType","BooleanType","ArrayType","DictionaryType","InterfaceType","PartialType","UnionType","IntersectionType","MergeType"];function v(e){if(!(e=>"_tag"in e&&h.includes(e._tag))(e))return e;switch(e._tag){case"ArrayType":return p.array(v(e.type));case"DictionaryType":return p.dictionary(e.domain,v(e.codomain));case"InterfaceType":return p.exact(p.interface(Object(f.mapValues)(e.props,v)));case"PartialType":return p.exact(p.partial(Object(f.mapValues)(e.props,v)));case"IntersectionType":return p.intersection(e.types.map(v));case"UnionType":return p.union(e.types.map(v));case"MergeType":return g(v(e.types[0]),v(e.types[1]));default:return e}}var y=n(68),b=n(52),E=n.n(b),x=n(64);function T(e){return e.replace(/(?:{([^\/]+)})/g,":$1")}class NotFoundRouteException extends Error{constructor(e){super(e)}}var O=n(9);const j=Object(i.createContext)(void 0),w=({router:e,children:t})=>Object(O.jsx)(j.Provider,{value:e},t);var k=n(28);const S=({children:e,...t})=>Object(O.jsx)(s.Router,t,Object(O.jsx)(k.CompatRouter,null,e));function F({children:e,router:t,history:n}){return Object(O.jsx)(S,{history:n},Object(O.jsx)(w,{router:t},e))}var I=n(1),P=n(2),_=n(43),L=n.n(_),M=n(25),R=n(53),C=n(45),N=n.n(C),A=n(29),U=n.n(A);const D="eui-global",V="eui-utilities",B=e=>e.darkMode?a.COLOR_MODES_STANDARD.dark:a.COLOR_MODES_STANDARD.light,z={darkMode:!1},W=[a.euiStylisPrefixer],q=U()({key:"css",stylisPlugins:W,container:document.querySelector('meta[name="emotion"]')}),G=U()({key:D,stylisPlugins:W,container:document.querySelector(`meta[name="${D}"]`)}),$=U()({key:V,stylisPlugins:W,container:document.querySelector(`meta[name="${V}"]`)});q.compat=!0,G.compat=!0,$.compat=!0;const Q={default:q,global:G,utility:$},H=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:r,children:o})=>{const l=N()(e,z),u=Object(i.useMemo)((()=>B(l)),[l]),s=n||u,c=!1!==t&&void 0;return Object(O.jsx)(a.EuiProvider,{cache:Q,modify:r,colorMode:s,globalStyles:c,utilityClasses:c},o)},Y=({children:e,i18n:t,...n})=>Object(M.useIsNestedEuiProvider)()?(Object(R.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(O.jsx)(t.Context,null,e)):Object(O.jsx)(H,n,Object(O.jsx)(t.Context,null,e));var K=n(30);const J=({children:e,...t})=>Object(O.jsx)(Y,L()({globalStyles:!1},t),Object(O.jsx)(K.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(O.jsx)(K.KibanaErrorBoundary,null,e))),Z=({theme:{theme$:e},euiTheme:t,children:n,...r})=>{const o=N()(e,z),l=Object(i.useMemo)((()=>B(o)),[o]);return Object(O.jsx)(a.EuiThemeProvider,L()({colorMode:l,theme:t},r),n)},X=({theme:e,children:t,...n})=>Object(M.useIsNestedEuiProvider)()?Object(O.jsx)(Z,L()({theme:e},n),t):(Object(R.emitEuiProviderWarning)("KibanaThemeProvider requires a parent KibanaRenderContextProvider.  Check your React tree and ensure that they are wrapped in a KibanaRenderContextProvider."),Object(O.jsx)(H,{theme:e,globalStyles:!1},t));var ee=n(15);const te=o.a.createContext(null),ne=({children:e,...t})=>{const{navigateToUrl:n,currentAppId:r}=t;return Object(O.jsx)(te.Provider,{value:{navigateToUrl:n,currentAppId:r}},e)},re=({children:e,coreStart:t})=>{const{navigateToUrl:n,currentAppId$:r}=t.application,a=N()(r,void 0);return Object(O.jsx)(te.Provider,{value:{navigateToUrl:n,currentAppId:a}},e)},ae={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},ie=({children:e,navigateToUrl:t,currentAppId:n,...r})=>{const a=Object(i.useRef)(null),o=Object(i.useCallback)((e=>(({event:e,container:t,navigateToUrl:n,currentAppId:r})=>{if(!t||!r)return;const a=((e,t)=>{let n=e;do{var r,a;if("a"===(null===(r=n)||void 0===r?void 0:r.tagName.toLowerCase()))return n;const e=null===(a=n)||void 0===a?void 0:a.parentElement;if(!e||e===document.body||e===t)break;n=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!a)return;const i=a.href,o=""===a.target||"_self"===a.target,l=0===e.button;i&&o&&l&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),n(a.href))})({event:e,currentAppId:n,navigateToUrl:t,container:a.current})),[n,t]);return Object(O.jsx)("div",L()({onClick:o,ref:a,css:ae,"data-test-subj":"kbnRedirectAppLink"},r),e)},oe=({children:e,...t})=>Object(O.jsx)(ie,L()({},function(){const e=Object(i.useContext)(te);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),le=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:n,...r}=t,a=Object(O.jsx)(oe,r,e);return Object(O.jsx)(re,{coreStart:n},a)}const{navigateToUrl:n,currentAppId:r,...a}=t,i=Object(O.jsx)(oe,a,e);return Object(O.jsx)(ne,{currentAppId:r,navigateToUrl:n},i)};var ue=n(11),se=n(8),ce=n(41);const de=e=>(t,n)=>Object(ce.a)(t,{...n,signal:e});function pe(e,t,n={}){const{notifications:r}=Object(ee.useKibana)(),{preservePreviousData:a=!0,showToastOnError:l=!0}=n,[u,s]=Object(i.useState)({data:void 0,status:se.FETCH_STATUS.NOT_INITIATED}),[c,d]=Object(i.useState)(0),{addInspectorRequest:p}=Object(se.useInspectorContext)();return Object(i.useEffect)((()=>{let t=new AbortController;return async function(){t.abort(),t=new AbortController;const n=t.signal,i=e(de(n));if(i){s((e=>({data:a?e.data:void 0,status:se.FETCH_STATUS.LOADING,error:void 0})));try{const e=await i;n.aborted||s({data:e,status:se.FETCH_STATUS.SUCCESS,error:void 0})}catch(e){const t=e;if(!n.aborted){const n="response"in t?function(e){var t,n,r,a,i;const l=null!==(t=null===(n=e.body)||void 0===n?void 0:n.message)&&void 0!==t?t:null===(r=e.response)||void 0===r?void 0:r.statusText;return o.a.createElement(o.a.Fragment,null,l," (",null===(a=e.response)||void 0===a?void 0:a.status,")",o.a.createElement("h5",null,I.i18n.translate("xpack.ux.fetcher.error.url",{defaultMessage:"URL"})),null===(i=e.response)||void 0===i?void 0:i.url)}(t):t.message;l&&r.toasts.danger({title:I.i18n.translate("xpack.ux.fetcher.error.title",{defaultMessage:"Error while fetching resource"}),body:o.a.createElement("div",null,o.a.createElement("h5",null,I.i18n.translate("xpack.ux.fetcher.error.status",{defaultMessage:"Error"})),n)}),s({data:void 0,status:se.FETCH_STATUS.FAILURE,error:e})}}}}(),()=>{t.abort()}}),[c,a,l,...t]),Object(i.useEffect)((()=>{var e;u.error?p({...u,data:null===(e=u.error.body)||void 0===e?void 0:e.attributes}):p(u)}),[p,u]),Object(i.useMemo)((()=>({...u,refetch:()=>{d((e=>e+1))}})),[u])}const fe={sharedData:{totalPageViews:0},setSharedData:e=>{throw new Error("setSharedData was not initialized, set it when you invoke the context")}},me=Object(i.createContext)(fe);function ge({children:e}){const[t,n]=Object(i.useState)({totalPageViews:0}),[r,a]=Object(i.useState)(),l=o.a.useCallback((e=>{n(e)}),[]),{services:{dataViews:u}}=Object(ee.useKibana)(),{dataViewTitle:s}=function(){const{data:e,status:t}=pe((e=>e("GET /internal/apm/data_view/index_pattern",{isCachable:!0})),[]);return{dataViewTitle:null==e?void 0:e.apmDataViewIndexPattern,status:t}}(),{data:c}=pe((async()=>{if(s)return u.create({title:s,timeFieldName:"@timestamp"})}),[s,u]);Object(i.useEffect)((()=>{a(c)}),[c]);const d=Object(i.useMemo)((()=>({sharedData:t,setSharedData:l,dataView:r})),[t,l,r]);return o.a.createElement(me.Provider,{value:d,children:e})}var he=n(35),ve=n(37),ye=n(38);function be(e,t,n){const r={uiFilters:n||{}},a=Object(ye.c)({setup:r,start:e,end:t});return Object(ve.a)(a,{body:{size:0,query:{bool:a.body.query.bool},aggs:{services:{terms:{field:he.l,size:1e3}}}}})}var Ee=n(40);function xe(e,...t){return Object(f.pick)(e,t)}var Te=n(18),Oe=n.n(Te),je=n(16),we=n.n(je);function ke(e,t={}){if(e){const n=Oe.a.parse(e,t);if(n&&n.isValid())return n.toDate()}}function Se(e){return e.startsWith("now")?ke(e.replace(/\/([smhdw])$/,"")):ke(e)}function Fe({state:e={},rangeFrom:t,rangeTo:n}){if(e.rangeFrom===t&&e.rangeTo===n)return{start:e.start,end:e.end,exactStart:e.exactStart,exactEnd:e.exactEnd};const r=ke(t),a=ke(n,{roundUp:!0}),i=t?Se(t):void 0,o=n?Se(n):void 0;return r&&a?{start:we()(r).startOf("minute").toISOString(),end:a.toISOString(),exactStart:null==i?void 0:i.toISOString(),exactEnd:null==o?void 0:o.toISOString()}:{start:e.start,end:e.end,exactStart:e.exactStart,exactEnd:e.exactEnd}}function Ie(e){if(void 0!==e)return parseInt(e,10)}function Pe(e){if(""!==e&&"null"!==e&&"undefined"!==e)return e}function _e(e){return Object(f.pickBy)(e,(e=>void 0!==e))}var Le=n(36);function Me(e,t){const n=Object(ue.toQuery)(e.search),{page:r,pageSize:a,sortDirection:i,sortField:o,refreshPaused:l,refreshInterval:u,rangeFrom:s,rangeTo:c,environment:d,searchTerm:p,percentile:f}=n,m=xe(n,...Ee.b);return _e({...Fe({state:t,rangeFrom:s,rangeTo:c}),rangeFrom:s,rangeTo:c,refreshPaused:l?(g=l,"true"===g):void 0,refreshInterval:u?Ie(u):void 0,environment:Pe(d)||Le.a.value,sortDirection:i,sortField:o,page:Ie(r)||0,pageSize:a?Ie(a):void 0,searchTerm:Pe(p),percentile:Ie(f),...m});var g}const Re=Object(i.createContext)({rangeId:0,refreshTimeRange:e=>{},uxUiFilters:{},urlParams:{}}),Ce=Object(s.withRouter)((({location:e,children:t})=>{const n=Object(i.useRef)(Me(e,{})),{start:r,end:a,rangeFrom:l,rangeTo:u,exactStart:s,exactEnd:c}=n.current,[d,p]=Object(i.useState)(0),m=Object(i.useMemo)((()=>Me(e,{start:r,end:a,rangeFrom:l,rangeTo:u,exactStart:s,exactEnd:c})),[e,r,a,l,u,s,c]);n.current=m;const g=Object(i.useCallback)((e=>{n.current={...n.current,...Fe({state:{},...e})},p((e=>e+1))}),[]),h=function(e){const t=Object(f.mapValues)(xe(e,...Ee.b),(e=>e?e.split(","):[]));return function(e){const t=Object(i.useRef)(e);return Object(f.isEqual)(t.current,e)||(t.current=e),t.current}({environment:e.environment,...t})}(m),v=Object(i.useMemo)((()=>({rangeId:d,refreshTimeRange:g,urlParams:m,uxUiFilters:h})),[d,g,h,m]);return o.a.createElement(Re.Provider,{children:t,value:v})}));function Ne(){const e=Object(i.useContext)(Re);return Object(i.useMemo)((()=>({...e,urlParams:Object(f.omit)(e.urlParams,["environment","kuery"])})),[e])}function Ae({loading:e,serviceNames:t}){const n=Object(s.useHistory)(),{urlParams:{serviceName:r}}=Ne(),l=(null!=t?t:[]).map((e=>({text:e,value:e}))),u=Object(i.useCallback)(((e,t)=>{const r={...n.location,search:Object(ue.fromQuery)({...Object(ue.toQuery)(n.location.search),serviceName:e})};t?n.replace(r):n.push(r)}),[n]);return Object(i.useEffect)((()=>{t&&(null==t?void 0:t.length)>0&&(r||u(t[0],!0),r&&!t.includes(r)&&u(t[0],!0)),r&&0===(null==t?void 0:t.length)&&!e&&u("")}),[t,r,u,e]),o.a.createElement(a.EuiSelect,{"data-test-subj":"uxServiceNameFilterSelect",fullWidth:!0,prepend:I.i18n.translate("xpack.ux.localFilters.titles.webApplication",{defaultMessage:"Web application"}),isLoading:e,"data-cy":"serviceNameFilter",options:l,value:r,onChange:e=>{u(e.target.value)}})}var Ue=n(54),De=n.n(Ue);function Ve(){const{dataView:e}=Object(i.useContext)(me),[t,n]=De()("uxAppDataViewTitle",""),r=null==e?void 0:e.title;return Object(i.useEffect)((()=>{n(r)}),[n,r]),{dataViewTitle:t,dataView:e}}function Be(e){var t,n;return"string"==typeof e&&null!==(t=null===(n=Oe.a.parse(e))||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0}function ze(){var e,t,n;const{rangeId:r,urlParams:{start:a,end:i}}=Ne(),{dataViewTitle:l}=Ve(),{data:u,loading:s}=Object(se.useEsSearch)({index:l,...be(Be(a),Be(i))},[a,i,r,l],{name:"UxApplicationServices"}),c=null!==(e=null==u||null===(t=u.aggregations)||void 0===t||null===(n=t.services)||void 0===n?void 0:n.buckets.map((({key:e})=>e)))&&void 0!==e?e:[];return o.a.createElement(Ae,{loading:null==s||s,serviceNames:c})}const We={dataMissing:I.i18n.translate("xpack.ux.dashboard.dataMissing",{defaultMessage:"N/A"}),totalPageLoad:I.i18n.translate("xpack.ux.dashboard.totalPageLoad",{defaultMessage:"Total"}),backEnd:I.i18n.translate("xpack.ux.dashboard.backend",{defaultMessage:"Backend"}),frontEnd:I.i18n.translate("xpack.ux.dashboard.frontend",{defaultMessage:"Frontend"}),pageViews:I.i18n.translate("xpack.ux.dashboard.pageViews",{defaultMessage:"Total page views"}),percPageLoaded:I.i18n.translate("xpack.ux.dashboard.pagesLoaded.label",{defaultMessage:"Pages loaded"}),pageLoadTime:I.i18n.translate("xpack.ux.dashboard.pageLoadTime.label",{defaultMessage:"Page load time (seconds)"}),pageLoadTimes:I.i18n.translate("xpack.ux.dashboard.pageLoadTimes.label",{defaultMessage:"Page load times"}),pageLoadDuration:I.i18n.translate("xpack.ux.dashboard.pageLoadDuration.label",{defaultMessage:"Page load duration"}),pageLoad:I.i18n.translate("xpack.ux.dashboard.pageLoad.label",{defaultMessage:"Page load"}),pageLoadDistribution:I.i18n.translate("xpack.ux.dashboard.pageLoadDistribution.label",{defaultMessage:"Page load distribution"}),jsErrors:I.i18n.translate("xpack.ux.dashboard.impactfulMetrics.jsErrors",{defaultMessage:"JavaScript errors"}),highTrafficPages:I.i18n.translate("xpack.ux.dashboard.impactfulMetrics.highTrafficPages",{defaultMessage:"High traffic pages"}),resetZoom:I.i18n.translate("xpack.ux.dashboard.resetZoom.label",{defaultMessage:"Reset zoom"}),overall:I.i18n.translate("xpack.ux.dashboard.overall.label",{defaultMessage:"Overall"}),selectBreakdown:I.i18n.translate("xpack.ux.filterGroup.selectBreakdown",{defaultMessage:"Select breakdown"}),breakdown:I.i18n.translate("xpack.ux.filterGroup.breakdown",{defaultMessage:"Breakdown"}),seconds:I.i18n.translate("xpack.ux.filterGroup.seconds",{defaultMessage:"seconds"}),coreWebVitals:I.i18n.translate("xpack.ux.filterGroup.coreWebVitals",{defaultMessage:"Core web vitals"}),browser:I.i18n.translate("xpack.ux.visitorBreakdown.browser",{defaultMessage:"Browser"}),operatingSystem:I.i18n.translate("xpack.ux.visitorBreakdown.operatingSystem",{defaultMessage:"Operating system"}),metrics:I.i18n.translate("xpack.ux.metrics",{defaultMessage:"Metrics"}),median:I.i18n.translate("xpack.ux.median",{defaultMessage:"median"}),avgPageLoadDuration:I.i18n.translate("xpack.ux.visitorBreakdownMap.avgPageLoadDuration",{defaultMessage:"Average page load duration"}),pageLoadDurationByRegion:I.i18n.translate("xpack.ux.visitorBreakdownMap.pageLoadDurationByRegion",{defaultMessage:"Page load duration by region (avg.)"}),filterByUrl:I.i18n.translate("xpack.ux.filters.filterByUrl",{defaultMessage:"Filter by URL"}),getSearchResultsLabel:e=>I.i18n.translate("xpack.ux.filters.searchResults",{defaultMessage:"{total} Search results",values:{total:e}}),topPages:I.i18n.translate("xpack.ux.filters.topPages",{defaultMessage:"Top pages"}),select:I.i18n.translate("xpack.ux.filters.select",{defaultMessage:"Select"}),url:I.i18n.translate("xpack.ux.filters.url",{defaultMessage:"Url"}),loadingResults:I.i18n.translate("xpack.ux.filters.url.loadingResults",{defaultMessage:"Loading results"}),noResults:I.i18n.translate("xpack.ux.filters.url.noResults",{defaultMessage:"No results available"}),totalErrors:I.i18n.translate("xpack.ux.jsErrors.totalErrors",{defaultMessage:"Total errors"}),errorRate:I.i18n.translate("xpack.ux.jsErrors.errorRate",{defaultMessage:"Error rate"}),errorMessage:I.i18n.translate("xpack.ux.jsErrors.errorMessage",{defaultMessage:"Error message"}),impactedPageLoads:I.i18n.translate("xpack.ux.jsErrors.impactedPageLoads",{defaultMessage:"Impacted page loads"}),percentile:I.i18n.translate("xpack.ux.percentile.label",{defaultMessage:"Percentile"}),percentile50thMedian:I.i18n.translate("xpack.ux.percentile.50thMedian",{defaultMessage:"50th (Median)"}),percentile75th:I.i18n.translate("xpack.ux.percentile.75th",{defaultMessage:"75th"}),percentile90th:I.i18n.translate("xpack.ux.percentile.90th",{defaultMessage:"90th"}),percentile95th:I.i18n.translate("xpack.ux.percentile.95th",{defaultMessage:"95th"}),percentile99th:I.i18n.translate("xpack.ux.percentile.99th",{defaultMessage:"99th"}),noData:I.i18n.translate("xpack.ux.visitorBreakdown.noData",{defaultMessage:"No data."}),totalPageLoadTooltip:I.i18n.translate("xpack.ux.dashboard.tooltips.totalPageLoad",{defaultMessage:"Total represents the full page load duration"}),frontEndTooltip:I.i18n.translate("xpack.ux.dashboard.tooltips.frontEnd",{defaultMessage:"Frontend time represents the total page load duration minus the backend time"}),backEndTooltip:I.i18n.translate("xpack.ux.dashboard.tooltips.backEnd",{defaultMessage:"Backend time represents time to first byte (TTFB), which is when the first response packet is received after the request has been made"})},qe=I.i18n.translate("xpack.ux.visitorBreakdown",{defaultMessage:"Visitor breakdown"}),Ge=50;function $e(){const e=Object(s.useHistory)(),{urlParams:{percentile:t}}=Ne(),n=Object(i.useCallback)(((t,n)=>{const r={...e.location,search:Object(ue.fromQuery)({...Object(ue.toQuery)(e.location.search),percentile:t})};n?e.replace(r):e.push(r)}),[e]);Object(i.useEffect)((()=>{t||n(Ge,!0)}));const r=[{value:"50",text:We.percentile50thMedian,"data-test-subj":"p50Percentile"},{value:"75",text:We.percentile75th,"data-test-subj":"p75Percentile"},{value:"90",text:We.percentile90th,"data-test-subj":"p90Percentile"},{value:"95",text:We.percentile95th,"data-test-subj":"p95Percentile"},{value:"99",text:We.percentile99th,"data-test-subj":"p99Percentile"}];return o.a.createElement(a.EuiSelect,{fullWidth:!0,prepend:We.percentile,"data-test-subj":"uxPercentileSelect",options:r,onChange:e=>{return t=e.target.value,void n(Number(t));var t}})}function Qe(){return{isXSmall:Object(a.useIsWithinMaxBreakpoint)("xs"),isSmall:Object(a.useIsWithinMaxBreakpoint)("s"),isMedium:Object(a.useIsWithinMaxBreakpoint)("m"),isLarge:Object(a.useIsWithinMaxBreakpoint)("l"),isXl:Object(a.useIsWithinMaxBreakpoint)("xl"),isXXL:Object(a.useIsWithinMaxBreakpoint)("xxl"),isXXXL:Object(a.useIsWithinMinBreakpoint)("xxxl")}}var He=n(51);function Ye(){return Object(i.useContext)(Re)}var Ke=n(20);function Je(){return Object(ee.useKibana)().services}var Ze=n(50);function Xe(){const{urlParams:{rangeFrom:e,rangeTo:t,refreshPaused:n,refreshInterval:r},refreshTimeRange:a}=Ye(),{redirect:i,isDateRangeSet:l}=function(){const e=Object(s.useHistory)(),t=Object(s.useLocation)(),n=E.a.parse(t.search),{data:r,uiSettings:a}=Je(),i=a.get(Ke.UI_SETTINGS.TIMEPICKER_TIME_DEFAULTS),o=r.query.timefilter.timefilter.getTime();return{isDateRangeSet:"rangeFrom"in n&&"rangeTo"in n,redirect:()=>{var r,a;const l={rangeFrom:null!==(r=o.from)&&void 0!==r?r:i.from,rangeTo:null!==(a=o.to)&&void 0!==a?a:i.to,...n};e.replace({...t,search:E.a.stringify(l)})}}}();return l||i(),o.a.createElement(ue.DatePicker,{rangeFrom:e,rangeTo:t,refreshPaused:n,refreshInterval:r,onTimeRangeRefresh:({start:e,end:t})=>{Object(Ze.b)(),a({rangeFrom:e,rangeTo:t})}})}function et(){return o.a.createElement(a.EuiEmptyPrompt,{body:o.a.createElement(i.Fragment,null,o.a.createElement(a.EuiLoadingSpinner,{size:"xl"}),o.a.createElement(a.EuiSpacer,null),o.a.createElement(a.EuiTitle,{size:"l"},o.a.createElement("h2",null,I.i18n.translate("xpack.ux.emptyState.loadingMessage",{defaultMessage:"Loading…"}))))})}var tt=n(39);function nt({serviceName:e,size:t,start:n,end:r}){return{body:{size:0,query:{bool:{filter:[{range:{"@timestamp":{gte:n,lte:r,format:"epoch_millis"}}},{term:{[he.q]:tt.b}},{term:{[he.j]:"transaction"}},...null==e?[]:[{term:{[he.l]:e}}]]}},aggs:{environments:{terms:{field:he.k,missing:Le.b.value,size:t}}}}}}const rt={text:`- ${I.i18n.translate("xpack.ux.filter.environment.selectEnvironmentLabel",{defaultMessage:"Select environment"})} -`,disabled:!0};function at({start:e,end:t,environment:n,serviceName:r}){const l=Object(s.useHistory)(),u=Object(s.useLocation)(),{environments:c,loading:d}=function({serviceName:e,start:t,end:n}){var r,a,o,l;const{dataViewTitle:u}=Ve(),s=null!==(r=null===(a=Je().uiSettings)||void 0===a||null===(o=a.defaults)||void 0===o||null===(l=o["observability:maxSuggestions"])||void 0===l?void 0:l.value)&&void 0!==r?r:100,{data:c,loading:d}=Object(se.useEsSearch)({index:u,...nt({serviceName:e,start:Be(t),end:Be(n),size:s})},[u,e,t,n,s],{name:"UxEnvironments"}),p=Object(i.useMemo)((()=>{var e;return null!==(e=function(e){if(!e)return e;const t=e.aggregations;return((null==t?void 0:t.environments.buckets)||[]).map((e=>e.key))}(c))&&void 0!==e?e:[]}),[c]),f=Object(i.useMemo)((()=>function(e){const t=e.filter((e=>e!==Le.b.value)).map((e=>({value:e,text:e})));return[Le.a,...t]}(p)),[p]);return{environments:p,loading:d,environmentOptions:f}}({serviceName:r,start:e,end:t}),p=function(e){const t=e.filter((e=>e!==Le.b.value)).map((e=>({value:e,text:e})));return[Le.a,...e.includes(Le.b.value)?[Le.b]:[],...t.length>0?[rt]:[],...t]}(c);return o.a.createElement(a.EuiSelect,{"data-test-subj":"uxEnvironmentFilterSelect",fullWidth:!0,prepend:I.i18n.translate("xpack.ux.filter.environment.label",{defaultMessage:"Environment"}),options:p,value:n,onChange:e=>{!function(e,t,n){e.push({...t,search:Object(ue.fromQuery)({...Object(ue.toQuery)(t.search),environment:n})})}(l,u,e.target.value)},isLoading:d,style:{minWidth:200}})}function it(){const{urlParams:{start:e,end:t,environment:n,serviceName:r}}=Ye();return o.a.createElement(at,{start:e,end:t,environment:n,serviceName:r})}function ot({filterNames:e}){const t=Object(s.useHistory)(),{uxUiFilters:n}=Ne(),r=Object(i.useCallback)(((e,n)=>{const r=Object(f.omit)(Object(ue.toQuery)(t.location.search),e);t.push({...t.location,search:Object(ue.fromQuery)(_e({...r,[e]:n.length?n.join(","):void 0}))})}),[t]),a=Object(i.useCallback)(((e,t,a)=>{if(a){var i;const a=e.split("Excluded")[0];r(e,(null==n?void 0:n[e]).filter((e=>e!==t))),r(a,[...null!==(i=null==n?void 0:n[a])&&void 0!==i?i:[],t])}else{var o;r(e,(null==n?void 0:n[e]).filter((e=>e!==t)));const a=Kt(e);r(a,[...null!==(o=null==n?void 0:n[a])&&void 0!==o?o:[],t])}}),[r,n]),o=Object(i.useCallback)((()=>{const n=Object(f.omit)(Object(ue.toQuery)(t.location.search),[...e,"searchTerm","transactionUrl"]);t.push({...t.location,search:Object(ue.fromQuery)(n)})}),[e,t]);return{filters:Object(i.useMemo)((()=>e.map((e=>{var t;return{value:null!==(t=n[e])&&void 0!==t?t:[],...Ee.a[e],name:e}}))),[e,n]),setFilterValue:r,clearValues:o,invertFilter:a}}var lt=n(14),ut=n(19),st=n.n(ut),ct=n(42);const dt="transaction.experience.longtask.sum",pt="transaction.experience.longtask.count",ft="transaction.experience.longtask.max";function mt(e,t,n=ct.b,r,a){const i={uiFilters:a||{}},o=Object(ye.c)({setup:i,urlQuery:r,start:e,end:t});return Object(ve.a)(o,{body:{size:0,aggs:{longTaskSum:{percentiles:{field:dt,percents:[n],hdr:{number_of_significant_value_digits:3}}},longTaskCount:{percentiles:{field:pt,percents:[n],hdr:{number_of_significant_value_digits:3}}},longTaskMax:{percentiles:{field:ft,percents:[n],hdr:{number_of_significant_value_digits:3}}}}}})}const gt=I.i18n.translate("xpack.ux.coreVitals.dataUndefined",{defaultMessage:"N/A"}),ht=I.i18n.translate("xpack.ux.coreVitals.fcp",{defaultMessage:"First contentful paint"}),vt=I.i18n.translate("xpack.ux.coreVitals.fcpTooltip",{defaultMessage:"First contentful paint (FCP) focusses on the initial rendering and measures the time from when the page starts loading to when any part of the page’s content is displayed on the screen."}),yt=I.i18n.translate("xpack.ux.coreVitals.tbt",{defaultMessage:"Total blocking time"}),bt=I.i18n.translate("xpack.ux.coreVitals.tbtTooltip",{defaultMessage:"Total blocking time (TBT) is the sum of the blocking time (duration above 50 ms) for each long task that occurs between the First contentful paint and the time when the transaction is completed."}),Et=I.i18n.translate("xpack.ux.uxMetrics.noOfLongTasks",{defaultMessage:"No. of long tasks"}),xt=I.i18n.translate("xpack.ux.uxMetrics.noOfLongTasksTooltip",{defaultMessage:"The number of long tasks, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."}),Tt=I.i18n.translate("xpack.ux.uxMetrics.longestLongTasks",{defaultMessage:"Longest long task duration"}),Ot=I.i18n.translate("xpack.ux.uxMetrics.longestLongTasksTooltip",{defaultMessage:"The duration of the longest long task, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."}),jt=I.i18n.translate("xpack.ux.uxMetrics.sumLongTasks",{defaultMessage:"Total long tasks duration"}),wt=I.i18n.translate("xpack.ux.uxMetrics.sumLongTasksTooltip",{defaultMessage:"The total duration of long tasks, a long task is defined as any user activity or browser task that monopolizes the UI thread for extended periods (greater than 50 milliseconds) and blocks other critical tasks (frame rate or input latency) from being executed."}),kt=e=>50===e?We.median:I.i18n.translate("xpack.ux.percentiles.label",{defaultMessage:"{value}th Perc.",values:{value:e}});function St(e,t="MicroSec"){const n=Number(null!=e?e:0)/("MicroSec"===t?1e3:1);return n<1e3?n.toFixed(0)+" ms":(n/1e3).toFixed(2)+" s"}const Ft={width:"200px"};function It(e,t){return null==t?gt:St(t,e)}function Pt({data:e,loading:t}){const{data:n,loading:r}=function(){const{rangeId:e,urlParams:{start:t,end:n,searchTerm:r,percentile:a},uxUiFilters:o}=Ne(),{dataViewTitle:l}=Ve(),{data:u,loading:s}=Object(se.useEsSearch)({index:l,...mt(Be(t),Be(n),a,r,o)},[t,n,a,r,o,e,l],{name:"UxLongTaskMetrics"});return{data:Object(i.useMemo)((()=>{var e,t,n,r;if(!u)return{};const i=Number(a).toFixed(1),{longTaskSum:o,longTaskCount:l,longTaskMax:s}=null!==(e=u.aggregations)&&void 0!==e?e:{};return{noOfLongTasks:null!==(t=null==l?void 0:l.values[i])&&void 0!==t?t:0,sumOfLongTasks:null!==(n=null==o?void 0:o.values[i])&&void 0!==n?n:0,longestLongTask:null!==(r=null==s?void 0:s.values[i])&&void 0!==r?r:0}}),[u,a]),loading:s}}();return o.a.createElement(a.EuiFlexGroup,{wrap:!0,responsive:!1},o.a.createElement(a.EuiFlexItem,{grow:!1,style:Ft},o.a.createElement(a.EuiStat,{titleSize:"s",title:It("ms",null==e?void 0:e.fcp),description:o.a.createElement(o.a.Fragment,null,ht,o.a.createElement(a.EuiIconTip,{content:vt,type:"questionInCircle"})),isLoading:t})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:Ft},o.a.createElement(a.EuiStat,{titleSize:"s",title:It("ms",null==e?void 0:e.tbt),description:o.a.createElement(o.a.Fragment,null,yt,o.a.createElement(a.EuiIconTip,{content:bt,type:"questionInCircle"})),isLoading:t})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:Ft},o.a.createElement(a.EuiStat,{"data-test-subj":"uxLongTaskCount",titleSize:"s",title:void 0!==(null==n?void 0:n.noOfLongTasks)?st()(null==n?void 0:n.noOfLongTasks).format("0,0"):gt,description:o.a.createElement(o.a.Fragment,null,Et,o.a.createElement(a.EuiIconTip,{content:xt,type:"questionInCircle"})),isLoading:!!r})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:Ft},o.a.createElement(a.EuiStat,{"data-test-subj":"uxLongestTask",titleSize:"s",title:It("ms",null==n?void 0:n.longestLongTask),description:o.a.createElement(o.a.Fragment,null,Tt,o.a.createElement(a.EuiIconTip,{content:Ot,type:"questionInCircle"})),isLoading:!!r})),o.a.createElement(a.EuiFlexItem,{grow:!1,style:Ft},o.a.createElement(a.EuiStat,{"data-test-subj":"uxSumLongTask",titleSize:"s",title:It("ms",null==n?void 0:n.sumOfLongTasks),description:o.a.createElement(o.a.Fragment,null,jt,o.a.createElement(a.EuiIconTip,{content:wt,type:"questionInCircle"})),isLoading:!!r})))}const _t=d.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-f96598-0"})(["color:",";font-weight:500;:not(:last-of-type)::after{content:'•';margin:0 4px;}"],r.euiLightVars.euiColorSuccessText),Lt=d.a.span.withConfig({displayName:"StyledListSpan",componentId:"sc-f96598-1"})(["display:block;margin-top:4px;font-size:12px;"]);function Mt(e,t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiHighlight,{className:"euiSelectableTemplateSitewide__listItemTitle",search:t},e.label),function(e){if(e&&!(e.length<1))return o.a.createElement(Lt,null,e.map((e=>o.a.createElement(_t,{key:e},e))))}(e.meta))}var Rt=n(73),Ct=n.n(Rt);function Nt(){const{rangeId:e,urlParams:t,uxUiFilters:n}=Ne(),{start:r,end:a,searchTerm:o,percentile:l}=t;return Object(i.useMemo)((()=>{const{serviceName:e}=n;return r&&a&&e&&l?{start:r,end:a,percentile:String(l),urlQuery:o||void 0,uiFilters:JSON.stringify(n)}:null}),[r,a,o,l,n,e])}function At(e,t,n){const r={uiFilters:e||{}},a=Object(ye.c)({setup:r,urlQuery:n,...t,start:Be(null==t?void 0:t.start),end:Be(null==t?void 0:t.end)});return Object(ve.a)(a,{body:{size:0,aggs:{totalUrls:{cardinality:{field:he.r}},urls:{terms:{field:he.r,size:10},aggs:{medianPLD:{percentiles:{field:he.n,percents:[Number(null==t?void 0:t.percentile)]}}}}}}})}const Ut=({popoverIsOpen:e,query:t})=>{const n=Nt(),{uxUiFilters:r}=Ne(),{transactionUrl:a,transactionUrlExcluded:o,...l}=r,[u,s]=Object(i.useState)(null!=t?t:"");Ct()((()=>{s(t)}),250,[t]);const{dataViewTitle:c}=Ve(),{data:d,loading:p}=Object(se.useEsSearch)({index:n&&e?c:void 0,...At(l,n,u)},[c,e,n,u],{name:"UX_URL_SEARCH"});return{data:Object(i.useMemo)((()=>{var e,t,r;if(!d)return d;const{urls:a,totalUrls:i}=null!==(e=d.aggregations)&&void 0!==e?e:{},o=Number(null!==(t=null==n?void 0:n.percentile)&&void 0!==t?t:0).toFixed(1);return{total:(null==i?void 0:i.value)||0,items:(null!==(r=null==a?void 0:a.buckets)&&void 0!==r?r:[]).map((e=>{var t;return{url:e.key,count:e.doc_count,pld:null!==(t=e.medianPLD.values[o])&&void 0!==t?t:0}}))}}),[d,null==n?void 0:n.percentile]),loading:p}},Dt=(e,t,n,r)=>{const a=kt(r);return e.map((e=>({label:e.url,title:e.url,key:e.url,meta:[We.pageViews+": "+e.count,We.pageLoadDuration+": "+St(e.pld)+` (${a})`],url:e.url,checked:null!=t&&t.includes(e.url)?"on":null!=n&&n.includes(e.url)?"off":void 0})))},Vt=e=>({includedItems:Object(f.map)(e.filter((({checked:e,isWildcard:t})=>"on"===e&&!t)),"label"),excludedItems:Object(f.map)(e.filter((({checked:e,isWildcard:t})=>"off"===e&&!t)),"label"),includedWildcards:Object(f.map)(e.filter((({checked:e,isWildcard:t})=>"on"===e&&t)),"title"),excludedWildcards:Object(f.map)(e.filter((({checked:e,isWildcard:t})=>"off"===e&&t)),"title")}),Bt=e=>I.i18n.translate("xpack.ux.urlFilter.wildcard",{defaultMessage:"Use wildcard *{wildcard}*",values:{wildcard:e}});function zt({onChange:e,updateSearchTerm:t}){var n;const{uxUiFilters:{transactionUrl:r,transactionUrlExcluded:a},urlParams:l}=Ne(),{searchTerm:u,percentile:s}=l,[c,d]=Object(i.useState)(!1),[p,m]=Object(i.useState)(""),[g,h]=Object(i.useState)([]),{data:v,loading:y}=Ut({query:p,popoverIsOpen:c});return Object(i.useEffect)((()=>{var e;const t=Dt(null!==(e=null==v?void 0:v.items)&&void 0!==e?e:[],r,a,s),n=p||u;n&&t.unshift({label:Bt(n),title:n,isWildcard:!0,checked:u?"on":void 0}),h(t)}),[v,s,u,p,r,a]),o.a.createElement(lt.SelectableUrlList,{loading:null==y||y,onInputChange:e=>{m(e)},data:{items:g,total:null!==(n=null==v?void 0:v.total)&&void 0!==n?n:0},onSelectionChange:e=>{h(e.map((e=>{const{isWildcard:t,checked:n}=e;return t&&"off"===n?{...e,checked:void 0}:e})))},searchValue:p,popoverIsOpen:Boolean(c),setPopoverIsOpen:d,onSelectionApply:()=>{const{includedItems:n,excludedItems:r}=Vt(g);e(n,r),t(p),m("")},renderOption:Mt,rowHeight:64,hasChanged:()=>Boolean((()=>{const{includedItems:e,excludedItems:t,includedWildcards:n}=Vt(g);let i=n.length>0&&!u||0===n.length&&u;return n.length>0&&(i=n[0]!==u),i||!Object(f.isEqual)(e.sort(),(null!=r?r:[]).sort())||!Object(f.isEqual)(t.sort(),(null!=a?a:[]).sort())})())})}function Wt(){const e=Object(s.useHistory)(),t=Object(i.useCallback)(((t,n)=>{const r="transactionUrl",a="transactionUrlExcluded",i=Object(f.omit)(Object(ue.toQuery)(e.location.search),r);e.push({...e.location,search:Object(ue.fromQuery)(_e({...i,[r]:null!=t&&t.length?t.join(","):void 0,[a]:null!=n&&n.length?n.join(","):void 0}))})}),[e]),n=Object(i.useCallback)((t=>{const n={...Object(ue.toQuery)(e.location.search),searchTerm:t||void 0};t||delete n.searchTerm;const r={...e.location,search:Object(ue.fromQuery)(n)};e.push(r)}),[e]);return o.a.createElement("span",{"data-cy":"csmUrlFilter"},o.a.createElement(zt,{onChange:t,updateSearchTerm:n}))}function qt({indexPattern:e}){const t=Object(s.useHistory)(),{urlParams:{searchTerm:n}}=Ne(),r=Object(i.useCallback)((e=>{const n={...Object(ue.toQuery)(t.location.search),searchTerm:e||void 0};e||delete n.searchTerm;const r={...t.location,search:Object(ue.fromQuery)(n)};t.push(r)}),[t]);return n?i.createElement(lt.FilterValueLabel,{dataView:e,removeFilter:()=>{r("")},invertFilter:({negate:e})=>{},field:he.r,value:n,negate:!1,label:"URL wildcard"}):null}const Gt=d()(a.EuiFlexItem).withConfig({displayName:"FilterItem",componentId:"sc-7f4i8u-0"})(["max-width:300px;"]);function $t({indexPattern:e,onChange:t,filters:n,invertFilter:r,clearValues:l}){const{uxUiFilters:u,urlParams:{searchTerm:s}}=Ne(),{transactionUrl:c}=u,d=null!=c?c:[],p=n.some((e=>{var t;return(null===(t=e.value)||void 0===t?void 0:t.length)>0}));return e&&(p||d.length>0||s)?o.a.createElement(a.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},o.a.createElement(qt,{indexPattern:e}),(null!=n?n:[]).map((({name:n,title:a,fieldName:l,excluded:s})=>{var c;return o.a.createElement(i.Fragment,{key:n},(null!==(c=null==u?void 0:u[n])&&void 0!==c?c:[]).map((i=>o.a.createElement(Gt,{key:n+i,grow:!1},o.a.createElement(lt.FilterValueLabel,{dataView:e,removeFilter:()=>{t(n,(null==u?void 0:u[n]).filter((e=>e!==i)))},invertFilter:({negate:e})=>{r(n,i,e)},field:l,value:"transactionUrl"===n?Qt(i):i,negate:!!s,label:a})))))})),o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiButtonEmpty,{"data-test-subj":"uxSelectedFiltersClearFiltersButton",size:"xs",iconType:"cross",onClick:l,"data-cy":"clearFilters"},I.i18n.translate("xpack.ux.clearFilters",{defaultMessage:"Clear filters"})))):null}function Qt(e){const t=e.length;if(t<30)return e;const n=new URL(e);if("/"===n.pathname)return e;const r=n.hostname,a=t-30,i=r.substring(0,a);return n.pathname.length+7>30?e.replace(r,".."):e.replace(i,"..")}var Ht=n(48);const Yt=["location","device","os","browser"],Kt=e=>`${e}Excluded`,Jt=[{term:{[he.q]:tt.b}}];function Zt(){const{dataViewTitle:e,dataView:t}=Ve(),{filters:n=[],setFilterValue:r,invertFilter:l,clearValues:u}=ot({filterNames:Ee.b.filter((e=>!["serviceName"].includes(e)))}),{urlParams:{start:s,end:c,serviceName:d,environment:p}}=Ye(),f=Object(i.useMemo)((()=>{const e=[...Jt,...Object(Ht.a)(p||Le.a.value)];return d&&e.push({term:{[he.l]:d}}),e}),[p,d]),{isSmall:m}=Qe(),g=o.a.createElement(a.EuiTitle,{size:"s"},o.a.createElement("h3",null,I.i18n.translate("xpack.ux.localFiltersTitle",{defaultMessage:"Filters"}))),h=o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(Wt,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiFilterGroup,{fullWidth:!0},Yt.map((t=>{var a,i;return o.a.createElement(se.FieldValueSuggestions,{key:t,sourceField:Ee.a[t].fieldName,dataViewTitle:e,label:Ee.a[t].title,asCombobox:!1,selectedValue:null===(a=n.find((e=>e.name===t&&!e.excluded)))||void 0===a?void 0:a.value,excludedValue:null===(i=n.find((e=>e.name===Kt(t)&&e.excluded)))||void 0===i?void 0:i.value,asFilterButton:!0,onChange:(e,n)=>{r(t,e||[]),r(Kt(t),n||[])},filters:f,time:{from:s,to:c}})}))))),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement($t,{filters:n,onChange:(e,t)=>{r(e,t)},clearValues:u,invertFilter:l,indexPattern:t}));return m?o.a.createElement(a.EuiAccordion,{id:"uxFilterAccordion",buttonContent:g},h):o.a.createElement(o.a.Fragment,null,h)}var Xt=n(46);function en(){const{urlParams:{percentile:e}}=Ne(),t=Nt(),{data:n,loading:r}=function(e){const{dataViewTitle:t}=Ve(),{data:n,loading:r}=Object(se.useEsSearch)({index:e?t:void 0,...Object(ct.c)(Be(null==e?void 0:e.start),Be(null==e?void 0:e.end),null==e?void 0:e.urlQuery,null!=e&&e.uiFilters?JSON.parse(e.uiFilters):{},null!=e&&e.percentile?Number(e.percentile):void 0)},[e,t],{name:"UxCoreWebVitals"});return{data:Object(i.useMemo)((()=>Object(ct.e)(n,null!=e&&e.percentile?Number(null==e?void 0:e.percentile):ct.b)),[n,null==e?void 0:e.percentile]),loading:r}}(t),{data:l,loading:u}=function(e){const{dataViewTitle:t}=Ve(),{data:n,loading:r}=Object(se.useEsSearch)({index:e?t:void 0,...Object(Xt.a)(Be(null==e?void 0:e.start),Be(null==e?void 0:e.end),null==e?void 0:e.urlQuery,null!=e&&e.uiFilters?JSON.parse(e.uiFilters):{},null!=e&&e.percentile?Number(e.percentile):void 0)},[e,t],{name:"UxINPMetrics"});return{data:Object(i.useMemo)((()=>Object(Xt.b)(n,null!=e&&e.percentile?Number(null==e?void 0:e.percentile):ct.b)),[n,null==e?void 0:e.percentile]),loading:r}}(t),s=null==r||r||u,{sharedData:{totalPageViews:c}}=Object(i.useContext)(me),d=Object(i.useMemo)((()=>Object(ue.getCoreVitalsComponent)({data:{...n,inp:null==l?void 0:l.inp,inpRanks:null==l?void 0:l.inpRanks,hasINP:null==l?void 0:l.hasINP},totalPageViews:c,loading:s,displayTrafficMetric:!0})),[s,u]);return o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(a.EuiFlexGroup,{justifyContent:"spaceBetween",wrap:!0,responsive:!1},o.a.createElement(a.EuiFlexItem,{grow:1,"data-cy":"client-metrics"},o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,We.metrics," (",kt(e),")")),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(Pt,{data:n,loading:s}))),o.a.createElement(a.EuiSpacer,{size:"xs"}),o.a.createElement(a.EuiHorizontalRule,{margin:"xs"}),o.a.createElement(a.EuiFlexGroup,{justifyContent:"spaceBetween",wrap:!0},o.a.createElement(a.EuiFlexItem,{grow:1,"data-cy":"client-metrics",style:{minHeight:150}},o.a.createElement(a.EuiSpacer,{size:"s"}),d)))}var tn=n(31);function nn(e,t,n,r,a,i){const o={uiFilters:i||{}},l=Object(ye.a)({setup:o,urlQuery:a,start:e,end:t});return Object(ve.a)(l,{body:{size:0,track_total_hits:!0,aggs:{totalErrorGroups:{cardinality:{field:he.f}},totalErrorPages:{cardinality:{field:he.o}},errors:{terms:{field:he.f,size:500},aggs:{bucket_truncate:{bucket_sort:{size:n,from:r*n}},impactedPages:{filter:{term:{[he.q]:tt.b}},aggs:{pageCount:{cardinality:{field:he.o}}}},sample:{top_hits:{_source:[he.d,he.e,he.f,"@timestamp"],sort:[{"@timestamp":"desc"}],size:1}}}}}}})}function rn(e){var t,n;return"string"==typeof e&&null!==(t=null===(n=Oe.a.parse(e))||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0}function an(){var e,t,n;const{http:r}=Je(),l=r.basePath.get(),{urlParams:{serviceName:u}}=Ne(),[s,c]=Object(i.useState)({pageIndex:0,pageSize:5}),{data:d,loading:p}=function(e){const{rangeId:t,urlParams:{start:n,end:r,searchTerm:a},uxUiFilters:o}=Ne(),{dataViewTitle:l}=Ve(),{data:u,loading:s}=Object(se.useEsSearch)({index:l,...nn(rn(n),rn(r),e.pageSize,e.pageIndex,a,o)},[n,r,a,o,l,e.pageSize,e.pageIndex,t],{name:"UxJsErrors"});return{data:Object(i.useMemo)((()=>{var e,t,n,r;if(!u)return{};const{totalErrorGroups:a,totalErrorPages:i,errors:o}=null!==(e=null==u?void 0:u.aggregations)&&void 0!==e?e:{};return{totalErrorPages:null!==(t=null==i?void 0:i.value)&&void 0!==t?t:0,totalErrors:null!==(n=u.hits.total.value)&&void 0!==n?n:0,totalErrorGroups:null!==(r=null==a?void 0:a.value)&&void 0!==r?r:0,items:null==o?void 0:o.buckets.map((({sample:e,key:t,impactedPages:n})=>{var r;return{count:n.pageCount.value,errorGroupId:t,errorMessage:null===(r=e.hits.hits[0]._source.error.exception)||void 0===r?void 0:r[0].message}}))}}),[u]),loading:s}}(s),{sharedData:{totalPageViews:f}}=Object(i.useContext)(me),m=[{field:"errorMessage",name:We.errorMessage,render:(e,t)=>o.a.createElement(a.EuiLink,{"data-test-subj":"uxColsLink",href:`${l}/app/apm/services/${u}/errors/${t.errorGroupId}`},e)},{name:We.impactedPageLoads,field:"count",align:"right",render:e=>o.a.createElement(tn.FormattedMessage,{id:"xpack.ux.jsErrors.percent",defaultMessage:"{pageLoadPercent} %",values:{pageLoadPercent:(e/f*100).toFixed(1)}})}],g=null!==(e=null==d?void 0:d.totalErrors)&&void 0!==e?e:0;return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,We.jsErrors)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(a.EuiFlexGroup,null,o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiStat,{"data-test-subj":"uxJsErrorsTotal",titleSize:"s",title:g<1e3?g:o.a.createElement(a.EuiToolTip,{content:g},o.a.createElement(o.a.Fragment,null,st()(g).format("0 a"))),description:We.totalErrors,isLoading:!!p}))),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(a.EuiBasicTable,{"data-test-subj":"uxJsErrorTable",loading:!!p,error:p||d?"":I.i18n.translate("xpack.ux.jsErrorsTable.errorMessage",{defaultMessage:"Failed to fetch"}),responsiveBreakpoint:!1,compressed:!0,columns:m,items:null!==(t=null==d?void 0:d.items)&&void 0!==t?t:[],onChange:({page:e})=>{c({pageIndex:e.index,pageSize:e.size})},pagination:{...s,totalItemCount:null!==(n=null==d?void 0:d.totalErrorGroups)&&void 0!==n?n:0}}))}function on(){return o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(a.EuiSpacer,{size:"xs"}),o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(an,null))))}function ln({selectedBreakdown:e,onBreakdownChange:t,dataTestSubj:n}){var r;const i="noBreakdown",l=[{name:I.i18n.translate("xpack.ux.breakDownFilter.noBreakdown",{defaultMessage:"No breakdown"}),fieldName:i,type:"category"},{name:I.i18n.translate("xpack.ux.breakdownFilter.browser",{defaultMessage:"Browser"}),fieldName:he.t,type:"category"},{name:I.i18n.translate("xpack.ux.breakdownFilter.os",{defaultMessage:"OS"}),fieldName:he.u,type:"category"},{name:I.i18n.translate("xpack.ux.breakdownFilter.device",{defaultMessage:"Device"}),fieldName:he.s,type:"category"},{name:I.i18n.translate("xpack.ux.breakdownFilter.location",{defaultMessage:"Location"}),fieldName:he.b,type:"category"}],u=l.map((({name:e,fieldName:t})=>({inputDisplay:t===i?e:o.a.createElement("strong",null,e),value:t,dropdownDisplay:e})));return o.a.createElement(a.EuiSuperSelect,{compressed:!0,options:u,valueOfSelected:null!==(r=null==e?void 0:e.fieldName)&&void 0!==r?r:i,onChange:e=>(e=>{t(e===i?null:l.find((({fieldName:t})=>t===e)))})(e),"data-test-subj":n})}function un(e,t){const{searchTerm:n}=t,r=Ee.b.filter((t=>t in e&&"serviceName"!==t)),a={};if(r.forEach((t=>{var n;const r=Ee.c[t],i=e[t];let o=null!==(n=a[r.fieldName])&&void 0!==n?n:{field:r.fieldName};o=t.includes("Excluded")?{...o,notValues:i?[...i]:i}:{...o,values:i?[...i]:i},a[r.fieldName]=o})),n){const e={field:he.r};n&&(e.wildcards=[n]),a[he.r]={...e,...a[he.r]}}return Object.values(a)}const sn=()=>{var e;const{urlParams:t,uxUiFilters:n}=Ne(),{start:r,end:a}=t;return{reportDefinitions:{[he.k]:null!=n&&n.environment&&n.environment!==Le.a.value?[n.environment]:[lt.ALL_VALUES_SELECTED],[he.l]:null!==(e=null==n?void 0:n.serviceName)&&void 0!==e?e:[lt.ALL_VALUES_SELECTED]},time:{from:null!=r?r:"",to:null!=a?a:""}}};function cn({onPercentileChange:e,breakdown:t}){const{dataViewTitle:n}=Ve(),{uxUiFilters:r,urlParams:a}=Ne(),l=Je(),{ExploratoryViewEmbeddable:u}=l.exploratoryView,s=Object(i.useCallback)((({range:t})=>{if(!t)return;const[n,r]=t;e(n,r)}),[e]),{reportDefinitions:c,time:d}=sn(),p=[{time:d,reportDefinitions:c,dataType:"ux",name:"page-load-distribution",selectedMetricField:he.n,breakdown:null==t?void 0:t.fieldName,filters:un(r,a)}];return n?o.a.createElement(u,{customHeight:"300px",attributes:p,onBrushEnd:s,reportType:"data-distribution",dataTypesIndexPatterns:{ux:n},legendIsVisible:Boolean(t),axisTitlesVisibility:{x:!0,yLeft:!0,yRight:!1}}):null}function dn({percentileRange:e,setPercentileRange:t}){const n=()=>{t({min:null,max:null})};return null===e.min&&null===e.max?null:o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiShowFor,{sizes:["xs"]},o.a.createElement(a.EuiButtonIcon,{"data-test-subj":"uxResetPercentileZoomButton",iconType:"inspect",size:"s","aria-label":We.resetZoom,onClick:n})),o.a.createElement(a.EuiHideFor,{sizes:["xs"]},o.a.createElement(a.EuiButtonEmpty,{"data-test-subj":"uxResetPercentileZoomButton",iconType:"inspect",size:"s",onClick:n},We.resetZoom)))}function pn(){const[e,t]=Object(i.useState)({min:null,max:null}),[n,r]=Object(i.useState)(null),l=Object(i.useCallback)(((e,n)=>{t({min:e,max:n})}),[]);return o.a.createElement("div",{"data-cy":"pageLoadDist"},o.a.createElement(a.EuiFlexGroup,{responsive:!1},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,We.pageLoadDistribution))),o.a.createElement(dn,{percentileRange:e,setPercentileRange:t}),o.a.createElement(a.EuiFlexItem,{grow:!1,style:{width:170}},o.a.createElement(ln,{selectedBreakdown:n,onBreakdownChange:r,dataTestSubj:"pldBreakdownFilter"}))),o.a.createElement(cn,{onPercentileChange:l,breakdown:n}))}function fn({breakdown:e}){const{dataViewTitle:t}=Ve(),n=Object(s.useHistory)(),r=Je(),{ExploratoryViewEmbeddable:a}=r.exploratoryView,{uxUiFilters:l,urlParams:u}=Ne(),c=Object(se.useTheme)(),{reportDefinitions:d,time:p}=sn(),f=[{time:p,reportDefinitions:d,dataType:"ux",name:"ux-series-1",selectedMetricField:lt.RECORDS_FIELD,breakdown:null==e?void 0:e.fieldName,color:c.eui.euiColorVis1,filters:un(l,u)}],m=Object(i.useCallback)((({range:e})=>{if(!e)return;const[t,r]=e,a=we()(t).toISOString(),i=we()(r).toISOString();n.push({...n.location,search:Object(ue.fromQuery)({...Object(ue.toQuery)(n.location.search),rangeFrom:a,rangeTo:i})})}),[n]);return t?o.a.createElement(a,{customHeight:"300px",attributes:f,onBrushEnd:m,reportType:"kpi-over-time",isSingleMetric:!0,axisTitlesVisibility:{x:!1,yRight:!0,yLeft:!0},legendIsVisible:Boolean(e)}):null}function mn(){const[e,t]=Object(i.useState)(null);return o.a.createElement("div",{className:"pageViewsChart"},o.a.createElement(a.EuiFlexGroup,{responsive:!1},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,We.pageViews))),o.a.createElement(a.EuiFlexItem,{grow:!1,style:{width:170}},o.a.createElement(ln,{selectedBreakdown:e,onBreakdownChange:t,dataTestSubj:"pvBreakdownFilter"}))),o.a.createElement(fn,{breakdown:e}))}function gn(){return o.a.createElement(a.EuiFlexGroup,{gutterSize:"s",wrap:!0},o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0,style:{paddingBottom:0}},o.a.createElement(pn,null))),o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0,style:{paddingBottom:0}},o.a.createElement(mn,null))))}var hn=n(32),vn=n(21),yn=n(33),bn=n(47);const En=9;let xn=function(e){return e.OS_BREAKDOWN="user_agent.os.name",e.UA_BREAKDOWN="user_agent.name",e}({});function Tn({start:e,end:t,onFilter:n,uiFilters:r,urlQuery:l,metric:u,dataView:s}){const c=Je().lens.EmbeddableComponent,[d]=Object(i.useState)(Object(yn.v4)()),p=Object(i.useMemo)((()=>function({uiFilters:e,urlQuery:t,metric:n,dataView:r,localDataViewId:a}){const i=r.toSpec(!1);i.id=a;const o={incompleteColumns:{},columnOrder:["col1","col2"],columns:{col1:{label:`Top ${En} values of ${n}`,dataType:"string",operationType:"terms",scale:"ordinal",sourceField:n,isBucketed:!0,params:{size:En,orderBy:{type:"column",columnId:"col2"},orderDirection:"desc",otherBucket:!0,parentFormat:{id:"terms"}}},col2:{label:"Count of records",dataType:"number",operationType:"count",isBucketed:!1,scale:"ratio",sourceField:"___records___",params:{emptyAsNull:!0}}}};return{visualizationType:"lnsPie",title:`ux-visitor-breakdown-${n}`,references:[],state:{internalReferences:[{id:i.id,name:"indexpattern-datasource-current-indexpattern",type:"index-pattern"},{id:i.id,name:"indexpattern-datasource-layer-layer1",type:"index-pattern"}],adHocDataViews:{[i.id]:i},datasourceStates:{formBased:{layers:{layer1:o}}},filters:[{meta:{},query:{bool:{filter:[{term:{[he.q]:tt.b}},{terms:{[he.j]:[vn.ProcessorEvent.transaction]}},{exists:{field:"transaction.marks.navigationTiming.fetchStart"}},...Object(bn.a)(e),...t?[{wildcard:{"url.full":`*${t}*`}}]:[]],must_not:[...Object(bn.a)(e,!0)]}}}],query:{language:"kuery",query:""},visualization:On}}}({uiFilters:r,urlQuery:l,metric:u,dataView:s,localDataViewId:d})),[r,l,u,s,d]),f=Object(i.useCallback)((e=>{n(u,e)}),[n,u]);return c?o.a.createElement(c,{id:`ux-visitor-breakdown-${u.replaceAll(".","-")}`,hidePanelTitles:!0,withDefaultActions:!0,style:{minHeight:"250px",height:"100%"},attributes:p,timeRange:{from:null!=e?e:"",to:null!=t?t:""},viewMode:hn.ViewMode.VIEW,onFilter:f}):o.a.createElement(a.EuiText,null,I.i18n.translate("xpack.ux.visitorBreakdownChart.noLensComponentTextLabel",{defaultMessage:"No lens component"}))}const On={layers:[{layerId:"layer1",primaryGroups:["col1"],metrics:["col2"],categoryDisplay:"default",legendDisplay:"hide",numberDisplay:"percent",legendStats:["value"],nestedLegend:!1,layerType:"data"}],shape:"pie"},jn={[xn.OS_BREAKDOWN]:"os",[xn.UA_BREAKDOWN]:"browser"},wn=d()(a.EuiFlexGroup).withConfig({displayName:"EuiLoadingEmbeddable",componentId:"sc-b7pe21-0"})(["&{min-height:100%;min-width:100%;}"]),kn={filterNames:Ee.b.filter((e=>["browser","browserExcluded","os","osExcluded"].includes(e)))},Sn=(e,t)=>t?e:Kt(e);function Fn(){const{urlParams:e,uxUiFilters:t}=Ne(),{start:n,end:r,searchTerm:l}=e,{dataView:u}=Ve(),{filters:s,setFilterValue:c}=ot(kn),d=Object(i.useCallback)(((e,t)=>{var n,r,a,i;if(!jn[e])return;const o=null==t||null===(n=t.data)||void 0===n?void 0:n.map((e=>e.value)),l=Sn(jn[e],null!==(r=null==t?void 0:t.negate)&&void 0!==r&&r),u=null!==(a=null==s||null===(i=s.find((e=>e.name===l)))||void 0===i?void 0:i.value)&&void 0!==a?a:[];c(l,u.filter((e=>!o.includes(e)))),c(null!=t&&t.negate?Kt(jn[e]):jn[e],o)}),[s,c]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiTitle,{size:"s"},o.a.createElement("h3",null,qe)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement(a.EuiFlexGroup,{style:{height:"calc(100% - 32px)"}},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h4",null,We.browser)),o.a.createElement(a.EuiSpacer,{size:"s"}),null!=u&&u.id?o.a.createElement(Tn,{dataView:u,start:null!=n?n:"",end:null!=r?r:"",uiFilters:t,urlQuery:l,metric:xn.UA_BREAKDOWN,onFilter:d}):o.a.createElement(wn,{justifyContent:"spaceAround",alignItems:"center"},o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiLoadingChart,{size:"l",mono:!0})))),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h4",null,We.operatingSystem)),o.a.createElement(a.EuiSpacer,{size:"s"}),null!=u&&u.id?o.a.createElement(Tn,{dataView:u,start:null!=n?n:"",end:null!=r?r:"",uiFilters:t,urlQuery:l,metric:xn.OS_BREAKDOWN,onFilter:d}):o.a.createElement(wn,{justifyContent:"spaceAround",alignItems:"center"},o.a.createElement(a.EuiFlexItem,{grow:!1},o.a.createElement(a.EuiLoadingChart,{size:"l",mono:!0}))))))}const In="apm_static_data_view_id";function Pn(e){return`${In}_${e}`}var _n=n(34);const Ln=Object(i.createContext)({});function Mn(){return Object(i.useContext)(Ln)}const Rn=e=>({query:`${he.q} : "${tt.b}" and ${he.l} : "${e}"`,language:"kuery"}),Cn="region_name",Nn="name",An="__kbnjoin__avg_of_transaction.duration.us__e62a1b9c-d7ff-4fd4-a0f6-0fdc44bb9e41",Un="__kbnjoin__avg_of_transaction.duration.us__3657625d-17b0-41ef-99ba-3a2b2938655c",Dn=d()(a.EuiDescriptionListDescription).withConfig({displayName:"DescriptionItem",componentId:"sc-1f91lax-0"})(["&&&{width:25%;}"]),Vn=d()(a.EuiDescriptionListTitle).withConfig({displayName:"TitleItem",componentId:"sc-1f91lax-1"})(["&&&{width:75%;}"]);function Bn({closeTooltip:e,features:t=[],loadFeatureProperties:n}){var r;const{id:l,layerId:u,mbProperties:s}=null!==(r=t[0])&&void 0!==r?r:{},[c,d]=Object(i.useState)(l),[p,f]=Object(i.useState)("");return Object(i.useEffect)((()=>{(async()=>{n&&(await n({layerId:u,properties:s})).forEach((e=>{e.getPropertyKey()!==Nn&&e.getPropertyKey()!==Cn||d(e.getRawValue()),e.getPropertyKey()!==An&&e.getPropertyKey()!==Un||f((e=>{const t=e/1e3;return t>1e3?(t/1e3).toFixed(2)+" sec":(t/1e3).toFixed(0)+" ms"})(+e.getRawValue()))}))})()})),o.a.createElement(a.EuiOutsideClickDetector,{onOutsideClick:()=>{null!=e&&e()}},o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiPopoverTitle,null,c),o.a.createElement(a.EuiDescriptionList,{type:"column",textStyle:"reverse",compressed:!0,style:{width:300}},o.a.createElement(Vn,{className:"eui-textNoWrap"},We.avgPageLoadDuration),o.a.createElement(Dn,null,p))))}const zn=o.a.memo(Bn),Wn=(e,t,n,r=!1)=>({meta:{index:Pn(n),type:"phrases",key:e,value:t.join(", "),params:t,alias:null,negate:r,disabled:!1},query:{bool:{should:t.map((t=>({match_phrase:{[e]:t}}))),minimum_should_match:1}}});function qn(e){return{meta:{index:Pn(e),alias:null,negate:!1,disabled:!1,type:"exists",key:"transaction.marks.navigationTiming.fetchStart",value:"exists"},query:{exists:{field:"transaction.marks.navigationTiming.fetchStart"}}}}const Gn=d.a.div.withConfig({displayName:"EmbeddedPanel",componentId:"sc-1eq7rb8-0"})(["z-index:auto;flex:1;display:flex;flex-direction:column;height:100%;position:relative;.embPanel__content{display:flex;flex:1 1 100%;z-index:1;min-height:0;}&&& .maplibregl-canvas{animation:none !important;}"]);function $n(){const{urlParams:e}=Ne(),{start:t,end:n,serviceName:r}=e,a=(()=>{const{urlParams:e,uxUiFilters:t}=Ne(),{spaceId:n}=Mn(),{serviceName:r,searchTerm:a}=e,{browser:o,device:l,os:u,location:s,transactionUrl:c,browserExcluded:d,deviceExcluded:p,osExcluded:f,locationExcluded:m,transactionUrlExcluded:g}=t;return Object(i.useMemo)((()=>{const e=[qn(n)];return r&&e.push(((e,t,n)=>({meta:{index:Pn(n),alias:null,negate:!1,disabled:!1,type:"phrase",key:e,params:{query:t}},query:{term:{[e]:t}}}))(he.l,r,n)),o&&e.push(Wn(he.t,o,n)),l&&e.push(Wn(he.s,l,n)),u&&e.push(Wn(he.u,u,n)),s&&e.push(Wn(he.b,s,n)),c&&e.push(Wn(he.r,c,n)),d&&e.push(Wn(he.t,d,n,!0)),p&&e.push(Wn(he.s,p,n,!0)),f&&e.push(Wn(he.u,f,n,!0)),m&&e.push(Wn(he.b,m,n,!0)),g&&e.push(Wn(he.r,g,n,!0)),a&&e.push(((e,t,n)=>({meta:{index:Pn(n),alias:null,negate:!1,disabled:!1,type:"term",key:e,params:{query:t}},query:{wildcard:{[e]:{value:`*${t}*`}}}}))(he.r,a,n)),e}),[r,o,l,u,s,c,d,p,f,m,g,a,n])})(),l=function(){const{urlParams:e}=Ne(),{spaceId:t}=Mn(),{esTermSourceCountry:n,esTermSourceRegion:r}=Object(i.useMemo)((()=>({esTermSourceCountry:{type:_n.SOURCE_TYPES.ES_TERM_SOURCE,id:"3657625d-17b0-41ef-99ba-3a2b2938655c",term:"client.geo.country_iso_code",metrics:[{type:_n.AGG_TYPE.AVG,field:"transaction.duration.us",label:"Page load duration"}],indexPatternId:Pn(t),applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0},esTermSourceRegion:{type:_n.SOURCE_TYPES.ES_TERM_SOURCE,id:"e62a1b9c-d7ff-4fd4-a0f6-0fdc44bb9e41",term:"client.geo.region_iso_code",metrics:[{type:_n.AGG_TYPE.AVG,field:"transaction.duration.us"}],whereQuery:{query:'transaction.type : "page-load"',language:"kuery"},indexPatternId:Pn(t),applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0}})),[t]),{serviceName:a}=e;n.whereQuery=Rn(a);const o=e=>({type:"VECTOR",properties:{icon:{type:_n.STYLE_TYPE.STATIC,options:{value:"marker"}},fillColor:{type:_n.STYLE_TYPE.DYNAMIC,options:{color:"Blue to Red",colorCategory:"palette_0",fieldMetaOptions:{isEnabled:!0,sigma:3},type:_n.COLOR_MAP_TYPE.ORDINAL,field:{name:e,origin:_n.FIELD_ORIGIN.JOIN},useCustomColorRamp:!1}},lineColor:{type:_n.STYLE_TYPE.DYNAMIC,options:{color:"#3d3d3d",fieldMetaOptions:{isEnabled:!0}}},lineWidth:{type:_n.STYLE_TYPE.STATIC,options:{size:1}},iconSize:{type:_n.STYLE_TYPE.STATIC,options:{size:6}},iconOrientation:{type:_n.STYLE_TYPE.STATIC,options:{orientation:0}},labelText:{type:_n.STYLE_TYPE.STATIC,options:{value:""}},labelPosition:{options:{position:_n.LABEL_POSITIONS.CENTER}},labelZoomRange:{options:{useLayerZoomRange:!0,minZoom:0,maxZoom:24}},labelColor:{type:_n.STYLE_TYPE.STATIC,options:{color:"#000000"}},labelSize:{type:_n.STYLE_TYPE.STATIC,options:{size:14}},labelBorderColor:{type:_n.STYLE_TYPE.STATIC,options:{color:"#FFFFFF"}},symbolizeAs:{options:{value:_n.SYMBOLIZE_AS_TYPES.CIRCLE}},labelBorderSize:{options:{size:_n.LABEL_BORDER_SIZES.SMALL}}},isTimeAware:!0}),l={joins:[{leftField:"iso2",right:n}],sourceDescriptor:{type:"EMS_FILE",id:"world_countries",tooltipProperties:[Nn]},style:o(Un),id:"e8d1d974-eed8-462f-be2c-f0004b7619b2",label:null,minZoom:0,maxZoom:24,alpha:.75,visible:!0,type:_n.LAYER_TYPE.GEOJSON_VECTOR};return r.whereQuery=Rn(a),[l,{joins:[{leftField:"region_iso_code",right:r}],sourceDescriptor:{type:"EMS_FILE",id:"administrative_regions_lvl2",tooltipProperties:["region_iso_code",Cn]},style:o(An),id:"0e936d41-8765-41c9-97f0-05e166391366",label:null,minZoom:3,maxZoom:24,alpha:.75,visible:!0,type:_n.LAYER_TYPE.GEOJSON_VECTOR}]}(),{maps:u}=Je();function s({addFilters:e,closeTooltip:t,features:n,isLocked:r,getLayerName:a,loadFeatureProperties:i}){const l={addFilters:e,closeTooltip:t,isLocked:r,getLayerName:a,loadFeatureProperties:i};return o.a.createElement(zn,L()({},l,{features:n}))}return o.a.createElement(Gn,null,o.a.createElement("div",{"data-test-subj":"xpack.ux.regionMap.embeddedPanel",className:"embPanel__content"},r&&u&&u.Map({title:"Visitors by region",filters:a,isLayerTOCOpen:!1,query:{query:'transaction.type : "page-load"',language:"kuery"},...t&&{timeRange:{from:new Date(t).toISOString(),to:new Date(n).toISOString()}},hideFilterActions:!0,layerList:l,getTooltipRenderer:()=>s})))}$n.displayName="EmbeddedMap";const Qn=o.a.memo($n);function Hn(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(a.EuiTitle,{size:"xs"},o.a.createElement("h3",null,We.pageLoadDurationByRegion)),o.a.createElement(a.EuiSpacer,{size:"s"}),o.a.createElement("div",{style:{height:400}},o.a.createElement(Qn,null)))}function Yn(){return o.a.createElement(a.EuiFlexGroup,{gutterSize:"s",wrap:!0},o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(Hn,null))),o.a.createElement(a.EuiFlexItem,{style:{flexBasis:650}},o.a.createElement(a.EuiPanel,{hasBorder:!0},o.a.createElement(Fn,null))))}function Kn(e,t,n=50,r,a){const i={uiFilters:a||{}},o=Object(ye.c)({setup:i,urlQuery:r,checkFetchStartFieldExists:!1,start:e,end:t});return Object(ve.a)(o,{body:{size:0,track_total_hits:!0,aggs:{hasFetchStartField:{filter:{exists:{field:"transaction.marks.navigationTiming.fetchStart"}},aggs:{totalPageLoadDuration:{percentiles:{field:he.n,percents:[n],hdr:{number_of_significant_value_digits:3}}},backEnd:{percentiles:{field:he.p,percents:[n],hdr:{number_of_significant_value_digits:3}}}}}}}})}const Jn=d()(a.EuiFlexGroup).withConfig({displayName:"ClFlexGroup",componentId:"sc-1emjgmj-0"})(["flex-direction:row;@media only screen and (max-width:768px){flex-direction:row;justify-content:space-between;}"]);function Zn(e,t){return void 0===t?We.dataMissing:St(t,e)}function Xn({pageViews:e}){return void 0===e?i.createElement(i.Fragment,null,We.dataMissing):e<1e4?i.createElement(i.Fragment,null,st()(e).format("0,0")):i.createElement(a.EuiToolTip,{content:st()(e).format("0,0")},i.createElement(i.Fragment,null,st()(e).format("0 a")))}function er(){var e,t,n,r;const{data:o,loading:l}=function(){const{rangeId:e,urlParams:{start:t,end:n,percentile:r=50,searchTerm:a},uxUiFilters:o}=Ne(),{dataViewTitle:l}=Ve(),{data:u,loading:s}=Object(se.useEsSearch)({index:l,...Kn(Be(t),Be(n),r,a,o)},[t,n,r,a,o,l,e],{name:"UxClientMetrics"});return{data:Object(i.useMemo)((()=>{var e,t,n;if(null==u||!u.aggregations)return{};const{hasFetchStartField:{backEnd:a,totalPageLoadDuration:i}}=u.aggregations,o=r.toFixed(1),l=(null!==(e=i.values[o])&&void 0!==e?e:0)/1e3,s=null!==(t=a.values[o])&&void 0!==t?t:0;return{pageViews:{value:null!==(n=u.hits.total.value)&&void 0!==n?n:0},totalPageLoadDuration:{value:l},backEnd:{value:s},frontEnd:{value:l-s}}}),[u,r]),loading:s}}(),{setSharedData:u}=Object(i.useContext)(me);Object(i.useEffect)((()=>{var e,t;u({totalPageViews:null!==(e=null==o||null===(t=o.pageViews)||void 0===t?void 0:t.value)&&void 0!==e?e:0})}),[o,u]);const s={minWidth:"150px",maxWidth:"250px"};return i.createElement(Jn,{wrap:!0,responsive:!1},i.createElement(a.EuiFlexItem,{style:s},i.createElement(a.EuiStat,{"data-test-subj":"uxClientMetrics-totalPageLoad",titleSize:"l",title:Zn("ms",null==o||null===(e=o.totalPageLoadDuration)||void 0===e?void 0:e.value),description:i.createElement(i.Fragment,null,We.totalPageLoad,i.createElement(a.EuiIconTip,{content:We.totalPageLoadTooltip,type:"questionInCircle"})),isLoading:!!l})),i.createElement(a.EuiFlexItem,{style:s},i.createElement(a.EuiStat,{"data-test-subj":"uxClientMetrics-backend",titleSize:"l",title:Zn("ms",null==o||null===(t=o.backEnd)||void 0===t?void 0:t.value),description:i.createElement(i.Fragment,null,We.backEnd,i.createElement(a.EuiIconTip,{content:We.backEndTooltip,type:"questionInCircle"})),isLoading:!!l})),i.createElement(a.EuiFlexItem,{style:s},i.createElement(a.EuiStat,{"data-test-subj":"uxClientMetrics-frontend",titleSize:"l",title:Zn("ms",null==o||null===(n=o.frontEnd)||void 0===n?void 0:n.value),description:i.createElement(i.Fragment,null,We.frontEnd,i.createElement(a.EuiIconTip,{content:We.frontEndTooltip,type:"questionInCircle"})),isLoading:!!l})),i.createElement(a.EuiFlexItem,{style:s},i.createElement(a.EuiStat,{"data-test-subj":"uxClientMetrics-pageViews",titleSize:"l",title:i.createElement(Xn,{pageViews:null==o||null===(r=o.pageViews)||void 0===r?void 0:r.value}),description:We.pageViews,isLoading:!!l})))}function tr(){const{urlParams:{percentile:e}}=Ne();return i.createElement(a.EuiPanel,{hasBorder:!0},i.createElement(a.EuiFlexGroup,{justifyContent:"spaceBetween"},i.createElement(a.EuiFlexItem,{grow:1,"data-cy":"client-metrics"},i.createElement(a.EuiTitle,{size:"xs"},i.createElement("h3",null,We.pageLoad," (",kt(e),")")),i.createElement(a.EuiSpacer,{size:"s"}),i.createElement(er,null))))}function nr(){const{isSmall:e}=Qe();return o.a.createElement(a.EuiFlexGroup,{direction:e?"row":"column",gutterSize:"s"},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(tr,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(en,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(gn,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(se.LoadWhenInView,{initialHeight:300,placeholderTitle:We.pageLoadDurationByRegion},o.a.createElement(Yn,null))),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(se.LoadWhenInView,{initialHeight:300,placeholderTitle:We.jsErrors},o.a.createElement(on,null))))}function rr(){return Object(se.useTrackPageview)({app:"ux",path:"home"}),Object(se.useTrackPageview)({app:"ux",path:"home",delay:15e3}),o.a.createElement(o.a.Fragment,null,o.a.createElement(Zt,null),o.a.createElement(a.EuiSpacer,{size:"m"}),o.a.createElement(nr,null))}const ar=I.i18n.translate("xpack.ux.title",{defaultMessage:"Dashboard"});function ir(){const{docLinks:e,http:t,observabilityShared:n,observabilityAIAssistant:r}=Je(),a=n.navigation.PageTemplate,{hasData:l,loading:u,dataViewTitle:s}=function(){const[e,t]=De()("uxAppHasDataBoolean",!1),{dataViewTitle:n}=Ve(),{data:r,loading:a}=Object(se.useEsSearch)({index:n,...Object(He.b)({})},[n],{name:"UXHasRumData"});return Object(i.useEffect)((()=>{if(r){const{hasData:e}=Object(He.a)(r,n);t(e)}}),[n,r,t]),r?{hasData:Object(He.a)(r,n).hasData,loading:a,dataViewTitle:n}:{loading:a,hasData:e}}(),c=l?void 0:{solution:I.i18n.translate("xpack.ux.overview.solutionName",{defaultMessage:"Observability"}),action:{elasticAgent:{title:I.i18n.translate("xpack.ux.overview.beatsCard.title",{defaultMessage:"Add RUM data"}),description:I.i18n.translate("xpack.ux.overview.beatsCard.description",{defaultMessage:"Enable RUM with the APM agent to collect user experience data."}),href:t.basePath.prepend("/app/apm/tutorial")}},docsLink:e.links.observability.guide};let d="";return l||(d="The user is looking at a Getting Started screen that is displayed because no data could be retrieved."),d=s?`${d} The index that was used to query the system is called ${s}.`:`${d} The index that was used to query the system is undefined, so it is not configured yet.`,Object(i.useEffect)((()=>null==r?void 0:r.service.setScreenContext({screenDescription:d,starterPrompts:[...l?[]:[{title:I.i18n.translate("xpack.ux.aiAssistant.starterPrompts.explainNoData.title",{defaultMessage:"Explain"}),prompt:I.i18n.translate("xpack.ux.aiAssistant.starterPrompts.explainNoData.prompt",{defaultMessage:"Why don't I see any data?"}),icon:"sparkles"}]]})),[l,null==r?void 0:r.service,d]),o.a.createElement(a,{noDataConfig:u?void 0:c,pageHeader:{children:o.a.createElement(or,null)},isPageDataLoaded:!1===u,isEmptyState:u},u&&o.a.createElement(et,null),o.a.createElement("div",{style:{visibility:u?"hidden":"initial"}},o.a.createElement(rr,null)))}function or(){const e=Qe().isMedium?{}:{maxWidth:"70%"};return o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiTitle,null,o.a.createElement("h1",{className:"eui-textNoWrap"},ar))),o.a.createElement(a.EuiFlexItem,{style:{alignItems:"flex-end",...e}},o.a.createElement(Xe,null))),o.a.createElement(a.EuiSpacer,{size:"m"}),o.a.createElement(a.EuiFlexGroup,{wrap:!0},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(ze,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement($e,null)),o.a.createElement(a.EuiFlexItem,null,o.a.createElement(it,null))))}function lr({isDev:e}){const{inspectorAdapters:t}=Object(se.useInspectorContext)(),{uiSettings:n,inspector:r}=Je();return n.get(ue.enableInspectEsQueries)||e?o.a.createElement(a.EuiHeaderLink,{color:"primary",onClick:()=>{r.open(t)}},I.i18n.translate("xpack.ux.inspectButtonText",{defaultMessage:"Inspect"})):null}const ur=I.i18n.translate("xpack.ux.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),sr=I.i18n.translate("xpack.ux.analyzeDataButtonLabel.message",{defaultMessage:"Go to Explore Data, where you can select and filter result data in any dimension and look for the cause or impact of performance problems."});function cr({appMountParameters:e,isDev:t}){const{http:n,application:r}=Je(),{urlParams:i}=Ne(),{rangeTo:l,rangeFrom:u,serviceName:s}=i,c=Object(lt.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"ux",name:`${s}-page-views`,time:{from:u,to:l},reportDefinitions:{[he.l]:s?[s]:[]},selectedMetricField:lt.RECORDS_FIELD}]},n.basePath.get());return o.a.createElement(se.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},o.a.createElement(a.EuiFlexGroup,{responsive:!1,gutterSize:"s"},o.a.createElement(a.EuiFlexItem,null,o.a.createElement(a.EuiHeaderLinks,{gutterSize:"xs"},o.a.createElement(a.EuiToolTip,{position:"top",content:o.a.createElement("p",null,sr)},o.a.createElement(a.EuiHeaderLink,{"data-test-subj":"uxAnalyzeBtn",color:"text",href:c,iconType:"visBarVerticalStacked"},ur)),o.a.createElement(a.EuiHeaderLink,{color:"primary",iconType:"indexOpen",iconSide:"left",href:r.getUrlForApp("/apm/tutorial")},I.i18n.translate("xpack.ux.addDataButtonLabel",{defaultMessage:"Add data"})),o.a.createElement(lr,{isDev:t})))))}const dr=[{exact:!0,path:"/",render:()=>o.a.createElement(s.Redirect,{to:"/ux"}),breadcrumb:ar}];function pr(){const{http:e}=Je(),t=e.basePath.get(),n=Object(ee.useDarkMode)(!1);return Object(se.useBreadcrumbs)([{text:I.i18n.translate("xpack.ux.breadcrumbs.root",{defaultMessage:"User Experience"}),href:t+"/app/ux"},{text:I.i18n.translate("xpack.ux.breadcrumbs.dashboard",{defaultMessage:"Dashboard"})}]),o.a.createElement(c.ThemeProvider,{theme:e=>({...e,eui:n?r.euiDarkVars:r.euiLightVars,darkMode:n})},o.a.createElement("div",{className:P.APP_WRAPPER_CLASS,"data-test-subj":"csmMainContainer"},o.a.createElement(ir,null)))}const fr=function(e){const t=new Map,n=new Map,r=Object.entries({}).map((([e,t])=>a({...t,path:e})));function a(e){var r,i,o;const l={component:()=>e.element,routes:null!==(r=null===(i=Object.entries(null!==(o=e.children)&&void 0!==o?o:{}))||void 0===i?void 0:i.map((([e,t])=>a({...t,path:e}))))&&void 0!==r?r:[],exact:!e.children||0===Object.values(e.children).length,path:T(e.path)};return t.set(l,e),n.set(e,l),l}function i(e){const n=Object(x.matchRoutes)(r,T(e));if(!n.length)throw new Error(`No matching route found for ${e}`);return n.map((e=>t.get(e.route)))}const o=(...e)=>{let n=!1;"boolean"==typeof e[e.length-1]&&(n=e[e.length-1],e.pop());const a=e[e.length-1];e.pop();let i=e;0===i.length&&(i=[a.pathname||"/"]);let o=[],l=-1;const u=i.map((t=>{const n=t.endsWith("/*")||0===e.length?1:0;return{length:t.length,greedy:n,path:t}})),s=Object(f.orderBy)(u,["greedy","length"],["desc","desc"]);for(const{path:e,greedy:t}of s){if(o=Object(x.matchRoutes)(r,T(a.pathname)),l=t?o.length-1:Object(f.findLastIndex)(o,(t=>t.route.path===T(e))),-1!==l)break;l=-1}if(-1===l){if(n)return[];let e;throw e=1===i.length?`${i[0]} does not match current path ${a.pathname}`:`None of ${i.join(", ")} match current path ${a.pathname}`,new Error(e)}if(!o.some((e=>e.match.isExact)))throw new NotFoundRouteException("No route was matched");return o.slice(0,l+1).map((e=>{const n=t.get(e.route);if(null!=n&&n.params){var r;const t=v(n.params).decode(Object(f.merge)({},null!==(r=n.defaults)&&void 0!==r?r:{},{path:e.match.params,query:E.a.parse(a.search,{decode:!0})}));if(Object(m.isLeft)(t))throw new Error(y.PathReporter.report(t).join("\n"));return{match:{...e.match,params:t.right},route:n}}return{match:{...e.match,params:{path:{},query:{}}},route:n}}))};return{link:(e,...t)=>((e,...t)=>{const n=t[0],r=Object(f.merge)({path:{},query:{}},n),a=i(e=e.split("/").map((e=>{const t=e.match(/(?:{([a-zA-Z]+)})/);return t?r.path[t[1]]:e})).join("/")),o=g(...Object(f.compact)(a.map((e=>e.params)))),l=Object(f.merge)({},...a.map((e=>{var t;return null!==(t=e.defaults)&&void 0!==t?t:{}})),r),u=o.decode(l);if(Object(m.isLeft)(u))throw new Error(y.PathReporter.report(u).join("\n"));return E.a.stringifyUrl({url:e,query:l.query},{encode:!0})})(e,...t),getParams:(...e)=>{const t=o(...e);return t.length?Object(f.merge)({path:{},query:{}},...t.map((e=>{var t,n;return Object(f.merge)({},null!==(t=null===(n=e.route)||void 0===n?void 0:n.defaults)&&void 0!==t?t:{},e.match.params)}))):void 0},matchRoutes:(...e)=>o(...e),getRoutePath:e=>e.path,getRoutesToMatch:e=>i(e)}}();function mr({appMountParameters:e,core:t,deps:n,corePlugins:{embeddable:r,inspector:i,maps:l,observability:u,observabilityShared:s,observabilityAIAssistant:c,exploratoryView:d,data:p,dataViews:f,lens:m},isDev:g,spaceId:h}){const{history:v}=e,y={...n,maps:l};return Object(ce.b)(t),o.a.createElement(J,t,o.a.createElement("div",{className:P.APP_WRAPPER_CLASS},o.a.createElement(le,{coreStart:{application:t.application}},o.a.createElement(ee.KibanaContextProvider,{services:{...t,...y,inspector:i,observability:u,observabilityShared:s,observabilityAIAssistant:c,embeddable:r,exploratoryView:d,data:p,dataViews:f,lens:m}},o.a.createElement(X,{theme:t.theme,modify:{breakpoint:{xxl:1600,xxxl:2e3}}},o.a.createElement(Ln.Provider,{value:{appMountParameters:e,exploratoryView:d,observabilityShared:s,spaceId:h}},o.a.createElement(F,{history:v,router:fr},o.a.createElement(ue.DatePickerContextProvider,null,o.a.createElement(se.InspectorContextProvider,null,o.a.createElement(Ce,null,o.a.createElement(a.EuiErrorBoundary,null,o.a.createElement(ge,null,o.a.createElement(pr,null))),o.a.createElement(cr,{appMountParameters:e,isDev:g})))))))))))}const gr=({core:e,deps:t,appMountParameters:n,corePlugins:r,isDev:a,spaceId:i})=>{const{element:l}=n;return Object(ce.b)(e),(async()=>await Object(ce.a)("POST /internal/apm/data_view/static",{signal:null}))().catch((e=>{console.log("Error creating static data view",e)})),u.a.render(o.a.createElement(mr,{appMountParameters:n,core:e,deps:t,corePlugins:r,isDev:a,spaceId:i}),l),()=>{r.data.search.session.clear(),u.a.unmountComponentAtNode(l)}}}}]);