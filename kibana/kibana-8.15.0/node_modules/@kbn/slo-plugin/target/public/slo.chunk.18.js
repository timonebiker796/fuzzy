/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[18],{142:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(7),r=a(1),n=a(33),s=a(0),l=a(74),o=a(81),u=a(79),c=a(15);function d({page:e=1,perPage:t=c.c,groupBy:a="ungrouped",groupsFilter:d=[],kqlQuery:g="",tagsFilter:f,statusFilter:p,filters:m=[],lastRefresh:y}={}){const{http:h,notifications:{toasts:v}}=Object(l.a)().services,{dataView:x}=Object(o.a)({indexPatternString:c.n}),M=Object(s.useMemo)((()=>{try{return JSON.stringify(Object(n.buildQueryFromFilters)([...m,...f?[f]:[],...p?[p]:[]],x,{ignoreFilterIfFieldNotInIndex:!0}))}catch(e){return""}}),[m,f,p,x]),{data:b,isLoading:k,isSuccess:w,isError:E,isRefetching:F,refetch:q}=Object(i.useQuery)({queryKey:u.a.group({page:e,perPage:t,groupBy:a,groupsFilter:d,kqlQuery:g,filters:M,lastRefresh:y}),queryFn:async({signal:i})=>await h.get("/internal/api/observability/slos/_groups",{query:{...e&&{page:e},...t&&{perPage:t},...a&&{groupBy:a},...d&&{groupsFilter:d},...g&&{kqlQuery:g},...M&&{filters:M}},signal:i}),cacheTime:0,refetchOnWindowFocus:!1,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onError:e=>{v.addError(e,{title:r.i18n.translate("xpack.slo.groups.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLO Groups"})})}});return{data:b,isLoading:k,isSuccess:w,isError:E,isRefetching:F,refetch:q}}},76:function(e,t,a){e.exports=a(24)(4)},81:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(34),r=a(74);function n({indexPatternString:e,dataViewId:t}){const{dataViews:a}=Object(r.a)().services,{data:n,loading:s}=Object(i.useFetcher)((async()=>{if(t)try{return await a.get(t)}catch(t){return a.create({id:`${e}-id`,title:e,allowNoIndex:!0})}else if(e)return a.create({id:`${e}-id`,title:e,allowNoIndex:!0})}),[t,a,e]);return{dataView:n,loading:Boolean(s)}}},85:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var i=a(33),r=a(1),n=a(7),s=a(0),l=a(15),o=a(74),u=a(81),c=a(79);function d({kqlQuery:e="",page:t=1,sortBy:a="status",sortDirection:d="desc",perPage:g=l.d,filters:f=[],lastRefresh:p,tagsFilter:m,statusFilter:y,disabled:h=!1}={}){const{http:v,notifications:{toasts:x}}=Object(o.a)().services,M=Object(n.useQueryClient)(),{dataView:b}=Object(u.a)({indexPatternString:l.n}),k=Object(s.useMemo)((()=>{try{return JSON.stringify(Object(i.buildQueryFromFilters)([...f,...y?[y]:[],...m?[m]:[]],b,{ignoreFilterIfFieldNotInIndex:!0}))}catch(e){return""}}),[f,b,m,y]),{isInitialLoading:w,isLoading:E,isError:F,isSuccess:q,isRefetching:j,data:O}=Object(n.useQuery)({queryKey:c.a.list({kqlQuery:e,page:t,perPage:g,sortBy:a,sortDirection:d,filters:k,lastRefresh:p}),queryFn:async({signal:i})=>await v.get("/api/observability/slos",{query:{...e&&{kqlQuery:e},...a&&{sortBy:a},...d&&{sortDirection:d},...void 0!==t&&{page:t},...void 0!==g&&{perPage:g},...k&&{filters:k},hideStale:!0},signal:i}),enabled:!h,cacheTime:0,refetchOnWindowFocus:!1,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onSuccess:({results:e})=>{M.invalidateQueries({queryKey:c.a.historicalSummaries(),exact:!1}),M.invalidateQueries({queryKey:c.a.activeAlerts(),exact:!1}),M.invalidateQueries({queryKey:c.a.rules(),exact:!1})},onError:e=>{x.addError(e,{title:r.i18n.translate("xpack.slo.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLOs"})})}});return{data:O,isInitialLoading:w,isLoading:E,isRefetching:j,isSuccess:q,isError:F}}},87:function(e,t,a){"use strict";a.d(t,"k",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"p",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"j",(function(){return d})),a.d(t,"g",(function(){return g})),a.d(t,"h",(function(){return f})),a.d(t,"o",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return h})),a.d(t,"n",(function(){return v})),a.d(t,"l",(function(){return x})),a.d(t,"m",(function(){return M})),a.d(t,"e",(function(){return F})),a.d(t,"f",(function(){return q}));var i=a(1),r=a(75),n=a(91),s=a(15);const l=[{value:"sli.kql.custom",text:n.e},{value:"sli.metric.custom",text:n.f},{value:"sli.metric.timeslice",text:n.i},{value:"sli.histogram.custom",text:n.g},{value:"sli.apm.transactionDuration",text:n.d},{value:"sli.apm.transactionErrorRate",text:n.c},{value:"sli.synthetics.availability",text:n.h}],o=[{value:"occurrences",text:n.a},{value:"timeslices",text:n.b}],u=[{value:"rolling",text:i.i18n.translate("xpack.slo.sloEdit.timeWindow.rolling",{defaultMessage:"Rolling"})},{value:"calendarAligned",text:i.i18n.translate("xpack.slo.sloEdit.timeWindow.calendarAligned",{defaultMessage:"Calendar aligned"})}],c=[{value:"1w",text:i.i18n.translate("xpack.slo.sloEdit.calendarTimeWindow.weekly",{defaultMessage:"Weekly"})},{value:"1M",text:i.i18n.translate("xpack.slo.sloEdit.calendarTimeWindow.monthly",{defaultMessage:"Monthly"})}],d=[90,30,7].map((e=>({value:`${e}d`,text:i.i18n.translate("xpack.slo.sloEdit.rollingTimeWindow.days",{defaultMessage:"{number} days",values:{number:e}})}))),g={type:"sli.kql.custom",params:{index:"",filter:"",good:"",total:"",timestampField:""}},f={type:"sli.metric.custom",params:{index:"",filter:"",good:{metrics:[{name:"A",aggregation:"sum",field:""}],equation:"A"},total:{metrics:[{name:"A",aggregation:"sum",field:""}],equation:"A"},timestampField:""}},p={type:"sli.metric.timeslice",params:{index:"",filter:"",metric:{metrics:[{name:"A",aggregation:"avg",field:""}],equation:"A",comparator:"GT",threshold:0},timestampField:""}},m={type:"sli.histogram.custom",params:{index:"",timestampField:"",filter:"",good:{field:"",aggregation:"value_count"},total:{field:"",aggregation:"value_count"}}},y={type:"sli.apm.transactionDuration",params:{service:"",environment:"",transactionType:"",transactionName:"",threshold:250,filter:"",index:""}},h={type:"sli.apm.transactionErrorRate",params:{service:"",environment:"",transactionType:"",transactionName:"",filter:"",index:""}},v={type:"sli.synthetics.availability",params:{projects:[],tags:[],monitorIds:[],index:s.p}},x={name:"",description:"",indicator:g,timeWindow:{duration:d[1].value,type:"rolling"},tags:[],budgetingMethod:o[0].value,objective:{target:99},groupBy:r.a,settings:{preventInitialBackfill:!1}},M=(d[1].value,o[0].value,r.a,{name:"",description:"",indicator:v,timeWindow:{duration:d[1].value,type:"rolling"},tags:[],budgetingMethod:o[0].value,objective:{target:99},groupBy:s.o,settings:{preventInitialBackfill:!1}}),b=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.gtLabel",{defaultMessage:"Greater than"}),k=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.gteLabel",{defaultMessage:"Greater than or equal to"}),w=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.ltLabel",{defaultMessage:"Less than"}),E=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.lteLabel",{defaultMessage:"Less than or equal to"}),F={GT:b,GTE:k,LT:w,LTE:E},q=[{text:b,value:"GT"},{text:k,value:"GTE"},{text:w,value:"LT"},{text:E,value:"LTE"}]},91:function(e,t,a){"use strict";a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return g})),a.d(t,"l",(function(){return f})),a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"k",(function(){return y})),a.d(t,"j",(function(){return h}));var i=a(1),r=a(18),n=a(11);const s=i.i18n.translate("xpack.slo.indicators.customKql",{defaultMessage:"Custom Query"}),l=i.i18n.translate("xpack.slo.indicators.customMetric",{defaultMessage:"Custom Metric"}),o=i.i18n.translate("xpack.slo.indicators.timesliceMetric",{defaultMessage:"Timeslice Metric"}),u=i.i18n.translate("xpack.slo.indicators.histogram",{defaultMessage:"Histogram Metric"}),c=i.i18n.translate("xpack.slo.indicators.apmLatency",{defaultMessage:"APM latency"}),d=i.i18n.translate("xpack.slo.indicators.apmAvailability",{defaultMessage:"APM availability"}),g=i.i18n.translate("xpack.slo.indicators.syntheticsAvailability",{defaultMessage:"Synthetics availability"});function f(e){switch(e){case"sli.kql.custom":return s;case"sli.apm.transactionDuration":return c;case"sli.apm.transactionErrorRate":return d;case"sli.synthetics.availability":return g;case"sli.metric.custom":return l;case"sli.histogram.custom":return u;case"sli.metric.timeslice":return o;default:Object(r.assertNever)(e)}}const p=i.i18n.translate("xpack.slo.budgetingMethod.occurrences",{defaultMessage:"Occurrences"}),m=i.i18n.translate("xpack.slo.budgetingMethod.timeslices",{defaultMessage:"Timeslices"});function y(e){const t=Object(n.c)(e);switch(t.unit){case"m":return i.i18n.translate("xpack.slo.duration.minute",{defaultMessage:"{duration, plural, one {1 minute} other {# minutes}}",values:{duration:t.value}});case"h":return i.i18n.translate("xpack.slo.duration.hour",{defaultMessage:"{duration, plural, one {1 hour} other {# hours}}",values:{duration:t.value}});case"d":return i.i18n.translate("xpack.slo.duration.day",{defaultMessage:"{duration, plural, one {1 day} other {# days}}",values:{duration:t.value}});case"w":return i.i18n.translate("xpack.slo.duration.week",{defaultMessage:"{duration, plural, one {1 week} other {# weeks}}",values:{duration:t.value}});case"M":return i.i18n.translate("xpack.slo.duration.month",{defaultMessage:"{duration, plural, one {1 month} other {# months}}",values:{duration:t.value}})}}function h(e){switch(Object(n.c)(e).unit){case"m":return i.i18n.translate("xpack.slo.duration.minutely",{defaultMessage:"Minutely"});case"h":return i.i18n.translate("xpack.slo.duration.hourly",{defaultMessage:"Hourly"});case"d":return i.i18n.translate("xpack.slo.duration.daily",{defaultMessage:"Daily"});case"w":return i.i18n.translate("xpack.slo.duration.weekly",{defaultMessage:"Weekly"});case"M":return i.i18n.translate("xpack.slo.duration.monthly",{defaultMessage:"Monthly"})}}}}]);