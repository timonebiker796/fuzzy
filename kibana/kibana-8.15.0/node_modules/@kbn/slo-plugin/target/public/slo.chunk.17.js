/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[17],{100:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(75),l=a(7),r=a(74),o=a(99),i=a(79);function s({sloId:e,instanceId:t,remoteName:a,shouldRefetch:s}){const{http:u}=Object(r.a)().services,{isInitialLoading:d,isLoading:c,isError:m,isSuccess:h,isRefetching:p,data:g,refetch:b}=Object(l.useQuery)({queryKey:i.a.detail(e),queryFn:async({signal:l})=>{try{return await u.get(`/api/observability/slos/${e}`,{query:{...!!t&&t!==n.a&&{instanceId:t},...a&&{remoteName:a}},signal:l})}catch(e){}},keepPreviousData:!0,enabled:Boolean(e),refetchInterval:s?o.a:void 0,refetchOnWindowFocus:!1});return{data:g,isLoading:c,isInitialLoading:d,isRefetching:p,isSuccess:h,isError:m,refetch:b}}},129:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(7),l=a(74),r=a(79);function o({name:e="",includeOutdatedOnly:t=!1,page:a=1,perPage:o=100}){const{http:i}=Object(l.a)().services,s=e.endsWith("*")?e:`${e}*`,{isLoading:u,isError:d,isSuccess:c,data:m,refetch:h}=Object(n.useQuery)({queryKey:r.a.definitions(s,a,o,t),queryFn:async({signal:e})=>{try{return await i.get("/api/observability/slos/_definitions",{query:{search:s,includeOutdatedOnly:t,page:a,perPage:o},signal:e})}catch(e){throw new Error(`Something went wrong. Error: ${e}`)}},retry:!1,refetchOnWindowFocus:!1});return{isLoading:u,isError:d,isSuccess:c,data:m,refetch:h}}},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(15);const l=[{burnRateThreshold:3.36,longWindow:{value:1,unit:"h"},shortWindow:{value:5,unit:"m"},actionGroup:n.a.id},{burnRateThreshold:1.4,longWindow:{value:6,unit:"h"},shortWindow:{value:30,unit:"m"},actionGroup:n.f.id},{burnRateThreshold:.7,longWindow:{value:24,unit:"h"},shortWindow:{value:120,unit:"m"},actionGroup:n.j.id},{burnRateThreshold:.234,longWindow:{value:72,unit:"h"},shortWindow:{value:360,unit:"m"},actionGroup:n.h.id}],r=[{burnRateThreshold:14.4,longWindow:{value:1,unit:"h"},shortWindow:{value:5,unit:"m"},actionGroup:n.a.id},{burnRateThreshold:6,longWindow:{value:6,unit:"h"},shortWindow:{value:30,unit:"m"},actionGroup:n.f.id},{burnRateThreshold:3,longWindow:{value:24,unit:"h"},shortWindow:{value:120,unit:"m"},actionGroup:n.j.id},{burnRateThreshold:1,longWindow:{value:72,unit:"h"},shortWindow:{value:360,unit:"m"},actionGroup:n.h.id}],o={"1M":r,"1w":l,"90d":[{burnRateThreshold:43.2,longWindow:{value:1,unit:"h"},shortWindow:{value:5,unit:"m"},actionGroup:n.a.id},{burnRateThreshold:18,longWindow:{value:6,unit:"h"},shortWindow:{value:30,unit:"m"},actionGroup:n.f.id},{burnRateThreshold:9,longWindow:{value:24,unit:"h"},shortWindow:{value:120,unit:"m"},actionGroup:n.j.id},{burnRateThreshold:3,longWindow:{value:72,unit:"h"},shortWindow:{value:360,unit:"m"},actionGroup:n.h.id}],"30d":r,"7d":l}},157:function(e,t,a){"use strict";function n(e){const t=[e].flat().map((e=>`"${e}"`));return t.length>1?`${t.slice(0,t.length-1).join(", ")} and ${t.slice(-1)}`:t[0]}a.d(t,"a",(function(){return n}))},168:function(e,t,a){"use strict";a.d(t,"b",(function(){return T})),a.d(t,"a",(function(){return S}));var n=a(76),l=a.n(n),r=a(0),o=a.n(r),i=a(6),s=a(1),u=a(35),d=a.n(u),c=a(41),m=a(29);function h({onChange:e,initialBurnRate:t=1,maxBurnRate:a,errors:n}){const[l,u]=Object(r.useState)(t),d=void 0!==n&&n.length>0,[c,m]=Object(r.useState)(l.toFixed(2));return o.a.createElement(i.EuiFormRow,{label:o.a.createElement(o.a.Fragment,null,s.i18n.translate("xpack.slo.rules.burnRate.rowLabel",{defaultMessage:"Burn rate threshold"})," ",o.a.createElement(i.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.burnRate.tooltip",{defaultMessage:"The burn rate is how fast the service consumes the error budget over the lookback period."})})),fullWidth:!0,isInvalid:d},o.a.createElement(i.EuiFieldNumber,{fullWidth:!0,step:.01,min:.01,max:a,value:c,onChange:t=>{(t=>{const a=Number(t.target.value);u(a),e(a)})(t),m(t.target.value)},onBlur:e=>{const t=e.target.value;m(Number(t).toFixed(2))},"data-test-subj":"burnRate"}))}function p({initialDuration:e,onChange:t,errors:a}){var n;const[l,u]=Object(r.useState)(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:1),d=void 0!==a&&a.length>0;return o.a.createElement(i.EuiFormRow,{label:g(),fullWidth:!0,isInvalid:d},o.a.createElement(i.EuiFieldNumber,{isInvalid:d,min:1,max:72,step:1,value:String(l),onChange:e=>{const a=Number(e.target.value);u(a),t({value:a,unit:"h"})},"aria-label":s.i18n.translate("xpack.slo.rules.longWindow.valueLabel",{defaultMessage:"Long lookback period in hours"}),"data-test-subj":"durationValueInput"}))}const g=()=>o.a.createElement(o.a.Fragment,null,s.i18n.translate("xpack.slo.rules.longWindow.rowLabel",{defaultMessage:"Long lookback (hours)"})," ",o.a.createElement(i.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.longWindowDuration.tooltip",{defaultMessage:"Long lookback period over which the burn rate is computed."})}));var b=a(11),f=a(15);function E({onChange:e,initialBurnRate:t=1,longLookbackWindowInHours:a,sloTimeWindowInHours:n,errors:l}){const[u,d]=Object(r.useState)(t*a/n*100),[c,m]=Object(r.useState)(u.toFixed(2)),h=void 0!==l&&l.length>0;return o.a.createElement(i.EuiFormRow,{label:o.a.createElement(o.a.Fragment,null,s.i18n.translate("xpack.slo.rules.budgetConsumed.rowLabel",{defaultMessage:"% Budget consumed"})," ",o.a.createElement(i.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.budgetConsumed.tooltip",{defaultMessage:"How much budget is consumed before the first alert is fired."})})),fullWidth:!0,isInvalid:h},o.a.createElement(i.EuiFieldNumber,{fullWidth:!0,step:.01,min:.01,max:100,value:c,onChange:t=>{(t=>{const l=Number(t.target.value);d(l),e(n*(l/100/a))})(t),m(t.target.value)},onBlur:e=>{const t=e.target.value;m(Number(t).toFixed(2))},"data-test-subj":"budgetConsumed"}))}function v({longWindowDuration:e,initialDuration:t,onChange:a,errors:n}){var l;const[u,d]=Object(r.useState)(null!==(l=null==t?void 0:t.value)&&void 0!==l?l:1),c=void 0!==n&&n.length>0,m=Object(b.d)(e);return o.a.createElement(i.EuiFormRow,{label:w(),fullWidth:!0,isInvalid:c},o.a.createElement(i.EuiFieldNumber,{isInvalid:c,min:1,max:m,step:1,value:String(u),onChange:e=>{const t=Number(e.target.value);d(t),a({value:t,unit:"m"})},"aria-label":s.i18n.translate("xpack.slo.rules.shortWindow.valueLabel",{defaultMessage:"short lookback period in minutes"}),"data-test-subj":"durationValueInput"}))}const w=()=>o.a.createElement(o.a.Fragment,null,s.i18n.translate("xpack.slo.rules.shortWindow.rowLabel",{defaultMessage:"Short lookback (min)"})," ",o.a.createElement(i.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.shortWindowDuration.tooltip",{defaultMessage:"Short lookback period over which the burn rate is computed. Used for faster recovery, a good default value is 1/12th of the long lookback period."})})),x=[{value:f.a.id,text:f.a.name},{value:f.f.id,text:f.f.name},{value:f.j.id,text:f.j.name},{value:f.h.id,text:f.h.name}],y=(e,t)=>t?Math.floor(Object(b.d)(Object(b.c)(t.timeWindow.duration))/Object(b.d)(e)):1/0;function W({slo:e,id:t,burnRateThreshold:a,maxBurnRateThreshold:n,longWindow:l,shortWindow:r,actionGroup:u,onChange:c,onDelete:m,errors:g,disableDelete:f,budgetMode:w=!0}){var W;const T=a=>{c({id:t,burnRateThreshold:a,maxBurnRateThreshold:y(l,e),longWindow:l,shortWindow:r,actionGroup:u})},S=Math.round(Object(b.d)(Object(b.c)(null!==(W=null==e?void 0:e.timeWindow.duration)&&void 0!==W?W:"30d"))/60),k=[...g.longWindow,...g.burnRateThreshold];return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.EuiFlexGroup,{direction:"row",alignItems:"flexEnd"},o.a.createElement(i.EuiFlexItem,null,o.a.createElement(p,{initialDuration:l,onChange:e=>{c({id:t,burnRateThreshold:a,maxBurnRateThreshold:n,longWindow:e,shortWindow:r,actionGroup:u})},errors:g.longWindow})),o.a.createElement(i.EuiFlexItem,null,o.a.createElement(v,{longWindowDuration:l,initialDuration:r,onChange:e=>{c({id:t,burnRateThreshold:a,maxBurnRateThreshold:n,longWindow:l,shortWindow:e,actionGroup:u})},errors:g.shortWindow})),!w&&o.a.createElement(i.EuiFlexItem,null,o.a.createElement(h,{initialBurnRate:a,maxBurnRate:n,onChange:T,errors:g.burnRateThreshold})),w&&o.a.createElement(i.EuiFlexItem,null,o.a.createElement(E,{initialBurnRate:a,onChange:T,errors:g.burnRateThreshold,sloTimeWindowInHours:S,longLookbackWindowInHours:l.value})),o.a.createElement(i.EuiFlexItem,null,o.a.createElement(i.EuiFormRow,{label:s.i18n.translate("xpack.slo.rules.actionGroupSelectorLabel",{defaultMessage:"Action Group"})},o.a.createElement(i.EuiSelect,{"data-test-subj":"sloBurnRateActionGroupSelctor",options:x,value:u,onChange:e=>{c({id:t,burnRateThreshold:a,maxBurnRateThreshold:n,longWindow:l,shortWindow:r,actionGroup:e.currentTarget.value})},"aria-label":s.i18n.translate("xpack.slo.rules.actionGroupSelectorLabel",{defaultMessage:"Action Group"})}))),o.a.createElement(i.EuiFlexItem,{grow:0},o.a.createElement(i.EuiButtonIcon,{"data-test-subj":"sloBurnRateRuleDeleteWindowButton",iconType:"trash",color:"danger",style:{marginBottom:"-1em"},onClick:()=>m(t),disabled:f,title:s.i18n.translate("xpack.slo.rules.deleteWindowLabel",{defaultMessage:"Delete window"}),"aria-label":s.i18n.translate("xpack.slo.rules.deleteWindowLabel",{defaultMessage:"Delete window"})}))),o.a.createElement(i.EuiSpacer,{size:"xs"}),k.length>0&&o.a.createElement(i.EuiText,{color:"danger",size:"xs"},k.map((e=>o.a.createElement("p",{key:e},e)))),o.a.createElement(i.EuiText,{color:"subdued",size:"xs"},o.a.createElement("p",null,R(e&&(null==l?void 0:l.value)>0&&a>=1?d()(l.value/(a*Object(b.d)(l)/Object(b.d)(Object(b.c)(e.timeWindow.duration)))).format("0a"):"N/A",e&&l.value>0&&a>0?a*l.value/S:0,a,w))),o.a.createElement(i.EuiSpacer,{size:"s"}))}const R=(e,t,a,n=!1)=>n?s.i18n.translate("xpack.slo.rules.errorBudgetExhaustion.budgetMode.text",{defaultMessage:"{formatedHours} hours until error budget exhaustion. The burn rate threshold is {burnRateThreshold}x.",values:{formatedHours:e,burnRateThreshold:d()(a).format("0[.0]")}}):s.i18n.translate("xpack.slo.rules.errorBudgetExhaustion.burnRateMode.text",{defaultMessage:"{formatedHours} hours until error budget exhaustion. {budgetConsumed} budget consumed before first alert.",values:{formatedHours:e,budgetConsumed:d()(t).format("0.00%")}}),T=(e,t={})=>{const a=t.longWindow||{value:1,unit:"h"};return{id:Object(c.v4)(),burnRateThreshold:1,maxBurnRateThreshold:y(a,e),longWindow:a,shortWindow:{value:5,unit:"m"},actionGroup:f.a.id,...t}};function S({slo:e,windows:t,errors:a,onChange:n,totalNumberOfWindows:u}){const[d,c]=Object(r.useState)(!0),h=e=>{n(t.map((t=>e.id===t.id?e:t)))},p=e=>{n(t.length>1?t.filter((t=>t.id!==e)):t)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(i.EuiTitle,{size:"xs"},o.a.createElement("h5",null,s.i18n.translate("xpack.slo.burnRateRuleEditor.h5.defineMultipleBurnRateLabel",{defaultMessage:"Define multiple burn rate windows"}))),o.a.createElement(i.EuiSpacer,{size:"s"}),t.map(((n,r)=>{const i=a[r]||{longWindow:new Array,shortWindow:new Array,burnRateThreshold:new Array};return o.a.createElement(W,l()({},n,{key:n.id,slo:e,errors:i,onChange:h,onDelete:p,disableDelete:1===t.length,budgetMode:d}))})),o.a.createElement(i.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},o.a.createElement(i.EuiFlexItem,{grow:0},o.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"sloBurnRateRuleAddWindowButton",color:"primary",size:"s",iconType:"plusInCircleFilled",onClick:()=>{n([...t,T()])},isDisabled:t.length===(u||4),"aria-label":s.i18n.translate("xpack.slo.rules.addWindowAriaLabel",{defaultMessage:"Add window"})},o.a.createElement(m.FormattedMessage,{id:"xpack.slo.slo.rules.addWIndowLabel",defaultMessage:"Add window"}))),o.a.createElement(i.EuiFlexItem,{grow:0},o.a.createElement(i.EuiSwitch,{compressed:!0,onChange:()=>{c((e=>!e))},checked:!d,label:s.i18n.translate("xpack.slo.rules.useBurnRateModeLabel",{defaultMessage:"Burn rate mode"})}))),o.a.createElement(i.EuiSpacer,{size:"m"}))}},364:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return C}));var n=a(0),l=a.n(n),r=a(75),o=a(6),i=a(1),s=a(100),u=a(30),d=a(129);function c({initialSlo:e,onSelected:t,errors:a}){const[r,s]=Object(n.useState)([]),[c,h]=Object(n.useState)(),[p,g]=Object(n.useState)(""),{isLoading:b,data:f}=Object(d.a)({name:p}),E=void 0!==a&&a.length>0;Object(n.useEffect)((()=>{h(e?[{value:e.id,label:e.name}]:[])}),[e]),Object(n.useEffect)((()=>{var e;const t=!b&&null!=f&&f.results?null==f||null===(e=f.results)||void 0===e?void 0:e.map((e=>({value:e.id,label:e.name}))):[];s(t)}),[b,f]);const v=Object(n.useMemo)((()=>Object(u.debounce)((e=>g(e)),300)),[]);return l.a.createElement(o.EuiFormRow,{label:m,fullWidth:!0,isInvalid:E,error:E?a[0]:void 0},l.a.createElement(o.EuiComboBox,{"aria-label":i.i18n.translate("xpack.slo.rules.sloSelector.ariaLabel",{defaultMessage:"SLO"}),placeholder:i.i18n.translate("xpack.slo.rules.sloSelector.placeholder",{defaultMessage:"Select a SLO"}),"data-test-subj":"sloSelector",singleSelection:{asPlainText:!0},options:r,selectedOptions:c,async:!0,isLoading:b,onChange:e=>{var a;h(e);const n=1===e.length?null==f||null===(a=f.results)||void 0===a?void 0:a.find((t=>t.id===e[0].value)):void 0;t(n)},fullWidth:!0,onSearchChange:v,isInvalid:E}))}const m=i.i18n.translate("xpack.slo.rules.sloSelector.rowLabel",{defaultMessage:"SLO"});var h=a(168),p=a(156),g=a(35),b=a.n(g),f=a(11);const E=[.01,.1,.2,.5,1];function v({windows:e,slo:t}){const a=E.map((a=>{const n=e.reduce(((e,n,l)=>{const r=Object(f.d)(Object(f.c)(`${n.longWindow.value}${n.longWindow.unit}`)),o=Math.round((1-t.objective.target)/a*r*n.burnRateThreshold);return{...e,[`column_${l+1}`]:o<r?o:null}}),{});return{rate:a,...n}})),n=[{field:"rate",name:i.i18n.translate("xpack.slo.rules.timeTable.rateColumnLabel",{defaultMessage:"Error rate"}),render:e=>b()(e).format("0%")},...e.map(((e,t)=>({field:`column_${t+1}`,name:`${e.longWindow.value}h @ ${b()(e.burnRateThreshold).format("0[.0]")}x`,align:"right",render:e=>e?function(e){if(e>59){const t=e%60,a=(e-t)/60;return i.i18n.translate("xpack.slo.rules.timeTable.minuteHoursLabel",{defaultMessage:"{hours}h {mins}m",values:{hours:a,mins:t}})}return i.i18n.translate("xpack.slo.rules.timeTable.minuteLabel",{defaultMessage:"{minutes}m",values:{minutes:e}})}(e):"-"})))];return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.EuiTitle,{size:"xs"},l.a.createElement("h5",null,i.i18n.translate("xpack.slo.rules.timeTable.title",{defaultMessage:"How long will it take for the alert to fire?"}))),l.a.createElement(o.EuiSpacer,{size:"s"}),l.a.createElement(o.EuiText,{size:"s"},l.a.createElement("p",null,i.i18n.translate("xpack.slo.rules.timeTable.description",{defaultMessage:"The table below lists the error rates and approximately how long it would take to receive your first alert with the current configuration."}))),l.a.createElement(o.EuiSpacer,{size:"m"}),l.a.createElement(o.EuiBasicTable,{tableCaption:i.i18n.translate("xpack.slo.rules.tableCaption",{defaultMessage:"Alerting time table"}),items:a,columns:n}),l.a.createElement(o.EuiSpacer,{size:"l"}))}var w=a(157),x=a(7),y=a(59),W=a(74),R=a(79);var T=a(15),S=a(29),k=a(95),O=a(31);const j=O.type({ruleId:O.string,actionGroupsToSuppressOn:O.array(O.string)}),I=(O.array(j),[{value:T.a.id,label:T.a.name},{value:T.f.id,label:T.f.name},{value:T.j.id,label:T.j.name},{value:T.h.id,label:T.h.name}]);function M({isLoading:e,onSubmit:t,dependency:a,rules:r}){var s;const u=null!=a,[d,c]=Object(n.useState)(!1),[m,h]=Object(n.useState)(a||{}),p=()=>c(!0),g=null!==(s=null==r?void 0:r.map((e=>({label:e.name,value:e.id}))))&&void 0!==s?s:[],b=null==g?void 0:g.filter((e=>e.value===m.ruleId)),f=null==r?void 0:r.find((e=>e.id===m.ruleId)),E=f&&f.params.windows.map((e=>e.actionGroup))||[],v=I.filter((e=>E.includes(e.value))),w=I.filter((e=>{var t;return null===(t=m.actionGroupsToSuppressOn)||void 0===t?void 0:t.includes(e.value)})),x=u?l.a.createElement(o.EuiButtonIcon,{isDisabled:e,"data-test-subj":"sloBurnRateRuleEditDependencyButton",color:"primary",size:"s",iconType:"pencil",onClick:p,"aria-label":i.i18n.translate("xpack.slo.rules.editDependencyAriaLabel",{defaultMessage:"Edit dependency"})}):l.a.createElement(o.EuiButtonEmpty,{isDisabled:e||0===(null==r?void 0:r.length),"data-test-subj":"sloBurnRateRuleAddDependencyButton",color:"primary",size:"s",iconType:"plusInCircleFilled",onClick:p,"aria-label":i.i18n.translate("xpack.slo.rules.addDependencyAriaLabel",{defaultMessage:"Add dependency"})},l.a.createElement(S.FormattedMessage,{id:"xpack.slo.rules.addDependencyLabel",defaultMessage:"Add dependency"}));return l.a.createElement(o.EuiPopover,{button:x,isOpen:d,closePopover:()=>{const e=j.decode(m);Object(k.isRight)(e)&&t(e.right),u||h({}),c(!1)}},l.a.createElement("div",{style:{width:400}},l.a.createElement(o.EuiForm,{component:"form"},l.a.createElement(o.EuiFormRow,{label:i.i18n.translate("xpack.slo.rules.addDependencyForm.ruleLabel",{defaultMessage:"Rule (required)"})},l.a.createElement(o.EuiComboBox,{compressed:!0,fullWidth:!0,options:g,singleSelection:{asPlainText:!0},isLoading:e,onChange:e=>{e.length>0&&e[0].value&&h((t=>({...t,ruleId:e[0].value})))},selectedOptions:b})),l.a.createElement(o.EuiFormRow,{label:i.i18n.translate("xpack.slo.rules.addDependencyForm.suppressOnLabel",{defaultMessage:"Suppress on (required)"})},l.a.createElement(o.EuiComboBox,{compressed:!0,fullWidth:!0,isDisabled:!m.ruleId,options:v,onChange:e=>{if(e.length>0&&e.every((e=>!!e.value))){const t=e.map((e=>e.value));h((e=>({...e,actionGroupsToSuppressOn:t})))}},selectedOptions:w})))))}function F(){return l.a.createElement(o.EuiBetaBadge,{label:i.i18n.translate("xpack.slo.technicalPreviewBadgeTitle",{defaultMessage:"Technical Preview"}),size:"s",tooltipPosition:"bottom",tooltipContent:i.i18n.translate("xpack.slo.technicalPreviewBadgeDescription",{defaultMessage:"This functionality is in technical preview and is subject to change or may be removed in future versions. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Technical preview features are not subject to the support service level agreement of official generally available features."})})}const B=[{value:T.a.id,label:T.a.name},{value:T.f.id,label:T.f.name},{value:T.j.id,label:T.j.name},{value:T.h.id,label:T.h.name}];function L({currentRuleId:e,dependencies:t,onChange:a}){const{isLoading:n,data:r}=function({search:e=""}){const{http:t}=Object(W.a)().services,{isInitialLoading:a,isLoading:n,isError:l,isSuccess:r,isRefetching:o,data:i,refetch:s}=Object(x.useQuery)({queryKey:R.a.burnRateRules(e),queryFn:async({signal:a})=>{try{return async function({search:e,http:t,signal:a}){const n={search:e,filter:"alert.attributes.alertTypeId:slo.rules.burnRate",fields:["id","params.windows","name"],per_page:1e3};return(await t.get(`${y.BASE_ALERTING_API_PATH}/rules/_find`,{query:n,signal:a})).data}({search:e,http:t,signal:a})}catch(e){}},refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:i,isLoading:n,isInitialLoading:a,isRefetching:o,isSuccess:r,isError:l,refetch:s}}({}),s=t.map((e=>e.ruleId)),u=e?null==r?void 0:r.filter((t=>t.id!==e&&!s.includes(t.id))):r,d=t.map(((e,t)=>{const a=null==r?void 0:r.find((({id:t})=>t===e.ruleId));return{index:t,name:null==a?void 0:a.name,actionGroupsToSuppressOn:e.actionGroupsToSuppressOn,dependency:e}})),c=[{field:"name",truncateText:!0,name:i.i18n.translate("xpack.slo.rules.dependencies.ruleColumn",{defaultMessage:"Rule"})},{field:"actionGroupsToSuppressOn",name:i.i18n.translate("xpack.slo.rules.dependencies.supressOnColumn",{defaultMessage:"Suppress on"}),render:e=>e.map((e=>{const t=B.find((t=>t.value===e));return l.a.createElement(o.EuiBadge,{color:"hollow"},null==t?void 0:t.label)}))},{width:"50px",actions:[{render:e=>{const o=null==r?void 0:r.find((({id:t})=>t===e.dependency.ruleId));return l.a.createElement(M,{isLoading:n,onSubmit:n=>{var l,r;l=e.index,r=n,a(t.map(((e,t)=>t===l?r:e)))},dependency:e.dependency,rules:u&&o?[...u,o]:u})}},{icon:"trash",type:"icon",color:"danger",name:"Delete",description:"Delete dependency",onClick:e=>{var n;n=e.index,a(t.filter(((e,t)=>t!==n)))}}]}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.EuiFlexGroup,null,l.a.createElement(o.EuiFlexItem,{grow:1},l.a.createElement(o.EuiTitle,{size:"xs"},l.a.createElement("h5",null,i.i18n.translate("xpack.slo.rules.dependencies.title",{defaultMessage:"Rule dependencies"})))),l.a.createElement(o.EuiFlexItem,{grow:0},l.a.createElement(F,null))),l.a.createElement(o.EuiSpacer,{size:"s"}),l.a.createElement(o.EuiText,{size:"s"},l.a.createElement("p",null,i.i18n.translate("xpack.slo.rules.dependencies.description",{defaultMessage:'Configure rule dependencies and designate the serverity action groups you want to use to suppress the current rule. For instance, if you choose to suppress on the "Critical" and "High" action groups, the current rule will abstain from executing any actions of its severity groups when the associated rule dependency breaches its threshold. Instead, it will execute a "Suppressed" action group in response to the dependency trigger.'}))),l.a.createElement(o.EuiSpacer,{size:"s"}),l.a.createElement(o.EuiBasicTable,{columns:c,items:d}),l.a.createElement(o.EuiSpacer,{size:"s"}),l.a.createElement(M,{rules:u,isLoading:n,onSubmit:e=>{a([...t,e])}}),l.a.createElement(o.EuiSpacer,{size:"m"}))}function C(e){const{setRuleParams:t,ruleParams:a,errors:u}=e,{data:d}=Object(s.a)({sloId:null==a?void 0:a.sloId}),[m,p]=Object(n.useState)(void 0),[g,b]=Object(n.useState)((null==a?void 0:a.windows)||[]),[f,E]=Object(n.useState)((null==a?void 0:a.dependencies)||[]);return Object(n.useEffect)((()=>{p(d),b((e=>e.length>0?e:G(d)))}),[d]),Object(n.useEffect)((()=>{t("windows",g)}),[g,t]),Object(n.useEffect)((()=>{t("dependencies",f)}),[f,t]),l.a.createElement(l.a.Fragment,null,l.a.createElement(o.EuiTitle,{size:"xs"},l.a.createElement("h5",null,i.i18n.translate("xpack.slo.burnRateRuleEditor.h5.chooseASLOToMonitorLabel",{defaultMessage:"Choose a SLO to monitor"}))),l.a.createElement(o.EuiSpacer,{size:"s"}),l.a.createElement(c,{initialSlo:m,onSelected:e=>{p(e),b((()=>G(e))),t("sloId",null==e?void 0:e.id)},errors:u.sloId}),(null==m?void 0:m.groupBy)&&![m.groupBy].flat().includes(r.a)&&l.a.createElement(l.a.Fragment,null,l.a.createElement(o.EuiSpacer,{size:"l"}),l.a.createElement(o.EuiCallOut,{color:"warning",size:"s",title:i.i18n.translate("xpack.slo.rules.groupByMessage",{defaultMessage:"The SLO you selected has been created with a group-by on {groupByField}. This rule will monitor and generate an alert for every instance found in the group-by field.",values:{groupByField:Object(w.a)(m.groupBy)}})})),l.a.createElement(o.EuiSpacer,{size:"l"}),m&&l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{slo:m,windows:g,onChange:b,errors:u.windows}),l.a.createElement(v,{slo:m,windows:g})),m&&l.a.createElement(L,{currentRuleId:e.id,dependencies:f,onChange:E}))}function G(e){return(e?p.a[e.timeWindow.duration]:[]).map((t=>Object(h.b)(e,t)))}},76:function(e,t,a){e.exports=a(24)(4)},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=6e4}}]);