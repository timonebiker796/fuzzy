/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[25],{135:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var l=a(1),n=a(6),i=a(0),s=a.n(i),o=a(74),r=a(155),c=a(152),u=a(104),d=a(126);function E({slo:e,setSelectedSlo:t}){const{application:{navigateToUrl:a},http:{basePath:E},uiSettings:b}=Object(o.a)().services,m=()=>{t(null)},[f,p]=Object(i.useState)(d.c),{tabs:g}=Object(r.a)({slo:e,isAutoRefreshing:!1,selectedTabId:f,setSelectedTabId:p});return e?s.a.createElement(n.EuiFlyout,{onClose:m},s.a.createElement(n.EuiFlyoutHeader,null,s.a.createElement(n.EuiTitle,null,s.a.createElement("h2",null,l.i18n.translate("xpack.slo.sloOverviewDetails.h2.detailsLabel",{defaultMessage:"{sloName}",values:{sloName:e.name}})))),s.a.createElement(n.EuiFlyoutBody,null,s.a.createElement(c.a,{slo:e,isLoading:!1}),s.a.createElement(n.EuiTabs,null,g.map(((e,t)=>s.a.createElement(n.EuiTab,{key:t,onClick:"onClick"in e?e.onClick:void 0,isSelected:e.id===f,append:"append"in e?e.append:null},e.label)))),s.a.createElement(n.EuiSpacer,{size:"m"}),s.a.createElement(d.d,{slo:e,isAutoRefreshing:!1,selectedTabId:f})),s.a.createElement(n.EuiFlyoutFooter,null,s.a.createElement(n.EuiFlexGroup,{justifyContent:"spaceBetween"},s.a.createElement(n.EuiFlexItem,{grow:!1},s.a.createElement(n.EuiButton,{"data-test-subj":"o11ySloOverviewDetailsCloseButton",onClick:m},l.i18n.translate("xpack.slo.sloOverviewDetails.button.closeLabel",{defaultMessage:"Close"}))),s.a.createElement(n.EuiFlexItem,{grow:!1},s.a.createElement(n.EuiButton,{fill:!0,onClick:()=>{const{sloDetailsUrl:t}=Object(u.a)(e,b,E);a(t)},"data-test-subj":"o11ySloOverviewDetailsDetailsButton"},l.i18n.translate("xpack.slo.sloOverviewDetails.button.detailsLabel",{defaultMessage:"Details"})))))):null}},371:function(e,t,a){"use strict";a.r(t),a.d(t,"getErrorBudgetPanelTitle",(function(){return F})),a.d(t,"getErrorBudgetEmbeddableFactory",(function(){return T}));var l=a(1),n=a(0),i=a.n(n),s=a(245),o=a(56),r=a(139),c=a(10),u=a(17),d=a(7),E=a(20),b=a(32),m=a.n(b),f=a(6),p=a(48),g=a(75),v=a(85),j=a(107),S=a(105),h=a(100),w=a(186),I=a(135),y=a(211),O=a(120);function x({sloId:e,sloInstanceId:t,onRenderComplete:a,reloadSubject:s}){var o;const r=Object(n.useRef)(null),[c,u]=Object(n.useState)(null),[d,E]=Object(n.useState)(void 0);Object(n.useEffect)((()=>(null==s||s.subscribe((()=>{E(Date.now())})),()=>{null==s||s.unsubscribe()})),[s]);const b=`slo.id:"${e}" and slo.instanceId:"${t}"`,{data:m}=Object(v.a)({kqlQuery:b}),{isLoading:p,data:x=[]}=Object(S.a)({sloList:null!==(o=null==m?void 0:m.results)&&void 0!==o?o:[],shouldRefetch:!1}),F=x.find((a=>a.sloId===e&&a.instanceId===(null!=t?t:g.a))),L=Object(j.a)(null==F?void 0:F.data,"error_budget_remaining"),{isLoading:T,data:D,refetch:z,isRefetching:R}=Object(h.a)({sloId:e,instanceId:t});Object(n.useEffect)((()=>{z()}),[d,z]),Object(n.useEffect)((()=>{a&&(T||a())}),[T,a]);const _=!T&&void 0===D;if(R||T||!D)return i.a.createElement(C,null,i.a.createElement(k,null,i.a.createElement(f.EuiLoadingChart,null)));if(_)return i.a.createElement(C,null,i.a.createElement(k,null,l.i18n.translate("xpack.slo.sloEmbeddable.overview.sloNotFoundText",{defaultMessage:"The SLO has been deleted. You can safely delete the widget from the dashboard."})));const M=D.instanceId!==g.a;return i.a.createElement("div",{"data-shared-item":"",ref:r,style:{width:"100%",padding:10}},i.a.createElement(f.EuiFlexGroup,{direction:"column",gutterSize:"xs"},i.a.createElement(f.EuiFlexItem,null,i.a.createElement(B,{"data-test-subj":"o11ySloErrorBudgetLink",onClick:()=>{u(D)}},i.a.createElement("h4",null,D.name))),M&&i.a.createElement(f.EuiFlexItem,{grow:!1},i.a.createElement(O.a,{slo:D}))),i.a.createElement(f.EuiFlexGroup,{direction:"column",gutterSize:"l"},i.a.createElement(y.a,{showTitle:!1,slo:D}),i.a.createElement(w.a,{data:L,isLoading:p,slo:D})),i.a.createElement(I.a,{slo:c,setSelectedSlo:u}))}const C=p.euiStyled.div`
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  width: 100%;
  height: 100%;
`,k=p.euiStyled.div`
  flex: 0 0 auto;
  align-self: center;
  text-align: center;
`;var B=m()(f.EuiLink).withConfig({displayName:"_StyledEuiLink",componentId:"sc-11vp8e7-0"})({fontSize:"16px"});const F=()=>l.i18n.translate("xpack.slo.errorBudgetEmbeddable.title",{defaultMessage:"SLO Error Budget burn down"}),L=new d.QueryClient,T=e=>({type:E.b,deserializeState:e=>e.rawState,buildEmbeddable:async(t,a,l,E)=>{const{titlesApi:b,titleComparators:m,serializeTitles:f}=Object(r.d)(t),p=new c.BehaviorSubject(F()),g=new c.BehaviorSubject(t.sloId),v=new c.BehaviorSubject(t.sloInstanceId),j=new c.Subject,S=a({...b,defaultPanelTitle:p,serializeState:()=>({rawState:{...f(),sloId:g.getValue(),sloInstanceId:v.getValue()}})},{sloId:[g,e=>g.next(e)],sloInstanceId:[v,e=>v.next(e)],...m}),h=Object(r.c)(S).pipe().subscribe((e=>{j.next(e.isReload)}));return{api:S,Component:()=>{const[t,a]=Object(r.e)(g,v),l=e.i18n.Context;return Object(n.useEffect)((()=>()=>{h.unsubscribe()}),[]),i.a.createElement(l,null,i.a.createElement(s.a,{history:Object(o.createBrowserHistory)()},i.a.createElement(u.KibanaContextProvider,{services:e},i.a.createElement(d.QueryClientProvider,{client:L},i.a.createElement(x,{sloId:t,sloInstanceId:a,reloadSubject:j})))))}}}})}}]);