/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[12,15],{108:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(0),a=n.n(i),r=n(6),o=n(1),l=n(30),s=n(75),c=n(85);const u=o.i18n.translate("xpack.slo.sloEmbeddable.config.errors.sloRequired",{defaultMessage:"SLO is required."});function d({initialSlos:e,onSelected:t,hasError:n,singleSelection:d}){const f=e=>{var t;return null!==(t=null==e?void 0:e.map((e=>({label:e.instanceId!==s.a?`${e.name} (${e.instanceId})`:e.name,value:`${e.id}-${e.instanceId}`}))))&&void 0!==t?t:[]},[b,g]=Object(i.useState)([]),[y,m]=Object(i.useState)(f(e)),[v,E]=Object(i.useState)(""),h=`${v}*`,{isLoading:p,data:S}=Object(c.a)({kqlQuery:`slo.name: (${h}) or slo.instanceId.text: (${h})`,perPage:100});Object(i.useEffect)((()=>{const e=p||void 0===(null==S?void 0:S.results)?[]:f(null==S?void 0:S.results);g(e)}),[p,S]);const j=Object(i.useMemo)((()=>Object(l.debounce)((e=>{E(e)}),300)),[]);return a.a.createElement(r.EuiFormRow,{fullWidth:!0,isInvalid:n,error:n?u:void 0,label:o.i18n.translate("xpack.slo.embeddable.sloSelectorLabel",{defaultMessage:"SLO"})},a.a.createElement(r.EuiComboBox,{"aria-label":o.i18n.translate("xpack.slo.sloEmbeddable.config.sloSelector.ariaLabel",{defaultMessage:"SLO"}),placeholder:o.i18n.translate("xpack.slo.sloEmbeddable.config.sloSelector.placeholder",{defaultMessage:"Select a SLO"}),"data-test-subj":"sloSelector",options:b,selectedOptions:y,async:!0,isLoading:p,onChange:e=>{var n;m(e);const i=e.length>=1?null===(n=S.results)||void 0===n?void 0:n.filter((t=>e.find((e=>e.value===`${t.id}-${t.instanceId}`)))):void 0;t(d?null==i?void 0:i[0]:i)},fullWidth:!0,onSearchChange:j,isInvalid:n,singleSelection:d?{asPlainText:!0}:void 0}))}},335:function(e,t,n){"use strict";n.r(t),n.d(t,"openSloConfiguration",(function(){return v}));var i=n(0),a=n.n(i),r=n(7),o=n(98),l=n(17),s=n(32),c=n.n(s),u=n(6),d=n(29),f=n(1),b=n(75),g=n(108);function y({initialInput:e,onCreate:t,onCancel:n}){var r,o;const[l,s]=Object(i.useState)(null!==(r=null==e?void 0:e.showAllGroupByInstances)&&void 0!==r&&r),[c,y]=Object(i.useState)(null!==(o=null==e?void 0:e.slos)&&void 0!==o?o:[]),[v,E]=Object(i.useState)(!1),h=null==c?void 0:c.some((e=>e.instanceId!==b.a));return a.a.createElement(m,{onClose:n},a.a.createElement(u.EuiFlyoutHeader,null,a.a.createElement(u.EuiTitle,null,a.a.createElement("h2",null,f.i18n.translate("xpack.slo.sloEmbeddable.config.sloSelector.headerTitle",{defaultMessage:"Alerts configuration"})))),a.a.createElement(u.EuiFlyoutBody,null,a.a.createElement(u.EuiFlexGroup,null,a.a.createElement(u.EuiFlexItem,{grow:!0},a.a.createElement(g.a,{initialSlos:c,hasError:v,singleSelection:!1,onSelected:e=>{E(void 0===e),Array.isArray(e)&&y(null==e?void 0:e.map((e=>({id:null==e?void 0:e.id,instanceId:null==e?void 0:e.instanceId,name:null==e?void 0:e.name,groupBy:null==e?void 0:e.groupBy}))))}}))),h&&a.a.createElement(a.a.Fragment,null,a.a.createElement(u.EuiSpacer,null),a.a.createElement(u.EuiSwitch,{label:f.i18n.translate("xpack.slo.sloConfiguration.euiSwitch.showAllGroupByLabel",{defaultMessage:"Show all related group-by instances"}),checked:l,onChange:e=>{s(e.target.checked)}}))),a.a.createElement(u.EuiFlyoutFooter,null,a.a.createElement(u.EuiFlexGroup,{justifyContent:"spaceBetween"},a.a.createElement(u.EuiButtonEmpty,{onClick:n,"data-test-subj":"sloCancelButton"},a.a.createElement(d.FormattedMessage,{id:"xpack.slo.Embeddable.config.cancelButtonLabel",defaultMessage:"Cancel"})),a.a.createElement(u.EuiButton,{"data-test-subj":"sloConfirmButton",isDisabled:!c||0===c.length||v,onClick:()=>t({slos:c,showAllGroupByInstances:l}),fill:!0},a.a.createElement(d.FormattedMessage,{id:"xpack.slo.embeddableSlo.config.confirmButtonLabel",defaultMessage:"Confirm configurations"})))))}var m=c()(u.EuiFlyout).withConfig({displayName:"_StyledEuiFlyout",componentId:"sc-1rdwff9-0"})(["min-width:550px;"]);async function v(e,t,n){const{overlays:i}=e,s=new r.QueryClient;return new Promise((async(c,u)=>{try{const d=i.openFlyout(Object(o.a)(a.a.createElement(l.KibanaContextProvider,{services:{...e,...t}},a.a.createElement(r.QueryClientProvider,{client:s},a.a.createElement(y,{initialInput:n,onCreate:e=>{d.close(),c(e)},onCancel:()=>{d.close(),u()}}))),e))}catch(e){u(e)}}))}},76:function(e,t,n){e.exports=n(24)(4)},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(34),a=n(74);function r({indexPatternString:e,dataViewId:t}){const{dataViews:n}=Object(a.a)().services,{data:r,loading:o}=Object(i.useFetcher)((async()=>{if(t)try{return await n.get(t)}catch(t){return n.create({id:`${e}-id`,title:e,allowNoIndex:!0})}else if(e)return n.create({id:`${e}-id`,title:e,allowNoIndex:!0})}),[t,n,e]);return{dataView:r,loading:Boolean(o)}}},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),a=n(0),r=i.__importDefault(n(89));t.default=function(e,t){var n=a.useState(t),i=n[0],o=n[1];return r.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),i}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n(33),a=n(1),r=n(7),o=n(0),l=n(15),s=n(74),c=n(81),u=n(79);function d({kqlQuery:e="",page:t=1,sortBy:n="status",sortDirection:d="desc",perPage:f=l.d,filters:b=[],lastRefresh:g,tagsFilter:y,statusFilter:m,disabled:v=!1}={}){const{http:E,notifications:{toasts:h}}=Object(s.a)().services,p=Object(r.useQueryClient)(),{dataView:S}=Object(c.a)({indexPatternString:l.n}),j=Object(o.useMemo)((()=>{try{return JSON.stringify(Object(i.buildQueryFromFilters)([...b,...m?[m]:[],...y?[y]:[]],S,{ignoreFilterIfFieldNotInIndex:!0}))}catch(e){return""}}),[b,S,y,m]),{isInitialLoading:O,isLoading:x,isError:w,isSuccess:C,isRefetching:P,data:k}=Object(r.useQuery)({queryKey:u.a.list({kqlQuery:e,page:t,perPage:f,sortBy:n,sortDirection:d,filters:j,lastRefresh:g}),queryFn:async({signal:i})=>await E.get("/api/observability/slos",{query:{...e&&{kqlQuery:e},...n&&{sortBy:n},...d&&{sortDirection:d},...void 0!==t&&{page:t},...void 0!==f&&{perPage:f},...j&&{filters:j},hideStale:!0},signal:i}),enabled:!v,cacheTime:0,refetchOnWindowFocus:!1,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onSuccess:({results:e})=>{p.invalidateQueries({queryKey:u.a.historicalSummaries(),exact:!1}),p.invalidateQueries({queryKey:u.a.activeAlerts(),exact:!1}),p.invalidateQueries({queryKey:u.a.rules(),exact:!1})},onError:e=>{h.addError(e,{title:a.i18n.translate("xpack.slo.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLOs"})})}});return{data:k,isInitialLoading:O,isLoading:x,isRefetching:P,isSuccess:C,isError:w}}},88:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var i=n(6);const a=e=>e.darkMode?i.COLOR_MODES_STANDARD.dark:i.COLOR_MODES_STANDARD.light,r={darkMode:!1}},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),a="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=a},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},92:function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"a",(function(){return p}));var i=n(0),a=n(43),r=n(90),o=n(84),l=n.n(o),s=n(46),c=n.n(s),u=n(6);const d="eui-global",f="eui-utilities";var b=n(88),g=n(28);const y=[u.euiStylisPrefixer],m=c()({key:"css",stylisPlugins:y,container:document.querySelector('meta[name="emotion"]')}),v=c()({key:d,stylisPlugins:y,container:document.querySelector(`meta[name="${d}"]`)}),E=c()({key:f,stylisPlugins:y,container:document.querySelector(`meta[name="${f}"]`)});m.compat=!0,v.compat=!0,E.compat=!0;const h={default:m,global:v,utility:E},p=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:a,children:r})=>{const o=l()(e,b.a),s=Object(i.useMemo)((()=>Object(b.b)(o)),[o]),c=n||s,d=!1!==t&&void 0;return Object(g.jsx)(u.EuiProvider,{cache:h,modify:a,colorMode:c,globalStyles:d,utilityClasses:d},r)},S=({children:e,i18n:t,...n})=>Object(a.useIsNestedEuiProvider)()?(Object(r.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(g.jsx)(t.Context,null,e)):Object(g.jsx)(p,n,Object(g.jsx)(t.Context,null,e))},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(76),a=n.n(i),r=(n(0),n(92)),o=n(44),l=n(28);const s=({children:e,...t})=>Object(l.jsx)(r.b,a()({globalStyles:!1},t),Object(l.jsx)(o.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(l.jsx)(o.KibanaErrorBoundary,null,e)))},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(0),a=n(37),r=n.n(a),o=n(94),l=n(28);const s=(e,t)=>n=>(r.a.render(Object(l.jsx)(o.a,t,e),n),()=>r.a.unmountComponentAtNode(n));n(2),n(1),i.Component}}]);