/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[3],{121:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0);const n={},l=a.n(i).a.createContext(n)},134:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return l}));let i=function(e){return e.DOCUMENT="document",e.BINARY="binary",e.BOOLEAN="boolean",e.CONFLICT="conflict",e.COUNTER="counter",e.DATE="date",e.DATE_RANGE="date_range",e.DENSE_VECTOR="dense_vector",e.GAUGE="gauge",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.HISTOGRAM="histogram",e.IP="ip",e.IP_RANGE="ip_range",e.FLATTENED="flattened",e.KEYWORD="keyword",e.MURMUR3="murmur3",e.NUMBER="number",e.NESTED="nested",e.RANK_FEATURE="rank_feature",e.RANK_FEATURES="rank_features",e.POINT="point",e.SHAPE="shape",e.SPARSE_VECTOR="sparse_vector",e.SEMANTIC_TEXT="semantic_text",e.STRING="string",e.TEXT="text",e.VERSION="version",e}({});const n=Object.values(i),l=e=>!!e&&n.includes(e)},156:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(15);const n=[{burnRateThreshold:3.36,longWindow:{value:1,unit:"h"},shortWindow:{value:5,unit:"m"},actionGroup:i.a.id},{burnRateThreshold:1.4,longWindow:{value:6,unit:"h"},shortWindow:{value:30,unit:"m"},actionGroup:i.f.id},{burnRateThreshold:.7,longWindow:{value:24,unit:"h"},shortWindow:{value:120,unit:"m"},actionGroup:i.j.id},{burnRateThreshold:.234,longWindow:{value:72,unit:"h"},shortWindow:{value:360,unit:"m"},actionGroup:i.h.id}],l=[{burnRateThreshold:14.4,longWindow:{value:1,unit:"h"},shortWindow:{value:5,unit:"m"},actionGroup:i.a.id},{burnRateThreshold:6,longWindow:{value:6,unit:"h"},shortWindow:{value:30,unit:"m"},actionGroup:i.f.id},{burnRateThreshold:3,longWindow:{value:24,unit:"h"},shortWindow:{value:120,unit:"m"},actionGroup:i.j.id},{burnRateThreshold:1,longWindow:{value:72,unit:"h"},shortWindow:{value:360,unit:"m"},actionGroup:i.h.id}],r={"1M":l,"1w":n,"90d":[{burnRateThreshold:43.2,longWindow:{value:1,unit:"h"},shortWindow:{value:5,unit:"m"},actionGroup:i.a.id},{burnRateThreshold:18,longWindow:{value:6,unit:"h"},shortWindow:{value:30,unit:"m"},actionGroup:i.f.id},{burnRateThreshold:9,longWindow:{value:24,unit:"h"},shortWindow:{value:120,unit:"m"},actionGroup:i.j.id},{burnRateThreshold:3,longWindow:{value:72,unit:"h"},shortWindow:{value:360,unit:"m"},actionGroup:i.h.id}],"30d":l,"7d":n}},157:function(e,t,a){"use strict";function i(e){const t=[e].flat().map((e=>`"${e}"`));return t.length>1?`${t.slice(0,t.length-1).join(", ")} and ${t.slice(-1)}`:t[0]}a.d(t,"a",(function(){return i}))},158:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l}));const i=["_source"];function n(e=[],t){return e&&e.length>0&&(1!==e.length||e[0]!==t.timeFieldName)?e:i}function l(e,t){return Object.fromEntries(Object.entries(e).filter((([e])=>e.startsWith(`${t}.`))))}},166:function(e,t,a){"use strict";a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return S}));var i=a(0),n=a(1),l=a(6),r=a(238),o=a(121);const s=new WeakMap;var u=a(39),c=a.n(u),d=a(158),m=a(28);function p({useTopLevelObjectColumns:e,row:t,columnId:a,dataView:o,shouldShowFieldHandler:u,maxEntries:p,isPlainRecord:f,fieldFormats:g,dataTestSubj:b="discoverCellDescriptionList",className:h}){const E=e?function(e,t,a,i){var n;const l=Object(d.b)(e.fields,t),r=null!==(n=e.highlight)&&void 0!==n?n:{},o=[],s=[];return Object.entries(l).forEach((([t,n])=>{var l;const u=a.getFieldByName(t),c=a.fields.getByName?null===(l=a.fields.getByName(t))||void 0===l?void 0:l.displayName:void 0,d=u?a.getFormatterForField(u):{convert:(e,...t)=>String(e)},m=n.map((t=>d.convert(t,"html",{field:u,hit:e}))).join(", "),p=r[t]?o:s;c?i(c)&&p.push([c,m,t]):p.push([t,m,t])})),[...o,...s]}(t.raw,a,o,u).slice(0,p):function(e,t,a,i,l){var o;const u=s.get(e.raw);if(u&&u.maxEntries===i)return u.formattedHit;const c=null!==(o=e.raw.highlight)&&void 0!==o?o:{},d=e.flattened,m=[],p=[];Object.entries(d).forEach((([i,n])=>{const o=t.fields.getByName(i),s=null==o?void 0:o.displayName,u=c[i]?m:p,d=Object(r.a)(n,e.raw,l,t,o);s?a(i)&&u.push([s,d,i]):u.push([i,d,i])}));const f=[...m,...p],g=f.length<=i?f:[...f.slice(0,i),[n.i18n.translate("discover.formatHit.moreFields",{defaultMessage:"and {count} more {count, plural, one {field} other {fields}}",values:{count:f.length-i}}),"",null]];return s.set(e.raw,{formattedHit:g,maxEntries:i}),g}(t,o,u,p,g);return Object(m.jsx)(l.EuiDescriptionList,{type:"inline",compressed:!0,className:c()("unifiedDataTable__descriptionList","unifiedDataTable__cellValue",h),"data-test-subj":b},E.map((([e,a,n])=>{var r;return f&&n&&null===(null!==(r=t.flattened[n])&&void 0!==r?r:null)?null:Object(m.jsx)(i.Fragment,{key:e},Object(m.jsx)(l.EuiDescriptionListTitle,{className:"unifiedDataTable__descriptionListTitle"},e),Object(m.jsx)(l.EuiDescriptionListDescription,{className:"unifiedDataTable__descriptionListDescription",dangerouslySetInnerHTML:{__html:a}}))})))}a(189);var f=a(60),g=a(61);const b=n.i18n.translate("unifiedDataTable.json.codeEditorAriaLabel",{defaultMessage:"Read only JSON view of an elasticsearch document"}),h=n.i18n.translate("unifiedDataTable.json.copyToClipboardLabel",{defaultMessage:"Copy to clipboard"}),E=({jsonValue:e,width:t,height:a,hasLineNumbers:i,onEditorDidMount:n,hideCopyButton:r})=>{if(""===e)return null;const o=Object(m.jsx)(g.CodeEditor,{languageId:f.XJsonLang.ID,width:t,height:a,value:e||"",editorDidMount:n,"aria-label":b,options:{automaticLayout:!0,fontSize:12,lineNumbers:i?"on":"off",minimap:{enabled:!1},overviewRulerBorder:!1,readOnly:!0,scrollbar:{alwaysConsumeMouseWheel:!1},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent"}});return r?o:Object(m.jsx)(l.EuiFlexGroup,{className:"unifiedDataTableJsonEditor",direction:"column",gutterSize:"s"},Object(m.jsx)(l.EuiFlexItem,null,Object(m.jsx)(l.EuiSpacer,{size:"s"}),Object(m.jsx)("div",{className:"eui-textRight"},Object(m.jsx)(l.EuiCopy,{textToCopy:e},(e=>Object(m.jsx)(l.EuiButtonEmpty,{size:"xs",flush:"right",iconType:"copyClipboard",onClick:e},h))))),Object(m.jsx)(l.EuiFlexItem,null,o))};function v({json:e,width:t,height:a,hasLineNumbers:i}){const n=JSON.stringify(e,null,2);return Object(m.jsx)(E,{jsonValue:n,width:t,height:a,hasLineNumbers:i,onEditorDidMount:()=>{},hideCopyButton:!0})}var y=a(96);function x(e,t,a){return a?Object(d.b)(t.raw.fields,e):t.raw}var w=({closeButton:e,columnId:t,row:a,useTopLevelObjectColumns:i,dataTestSubj:n="dataTableExpandCellActionJsonPopover"})=>Object(m.jsx)(l.EuiFlexGroup,{gutterSize:"none",direction:"column",justifyContent:"flexEnd",className:"unifiedDataTable__cellPopover","data-test-subj":n},Object(m.jsx)(l.EuiFlexItem,{grow:!1},Object(m.jsx)(l.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"none",responsive:!1},Object(m.jsx)(l.EuiFlexItem,{grow:!1},e))),Object(m.jsx)(l.EuiFlexItem,null,Object(m.jsx)(v,{json:x(t,a,i),width:y.f,height:200})));const j=({children:e})=>Object(m.jsx)("span",{className:"unifiedDataTable__cellPopoverValue eui-textBreakWord"},e),T="unifiedDataTable__cellValue",S=({dataView:e,rows:t,useNewFieldsApi:a,shouldShowFieldHandler:s,closePopover:u,fieldFormats:c,maxEntries:d,externalCustomRenderers:f,isPlainRecord:g})=>function({rowIndex:b,columnId:h,isDetails:E,setCellProps:v,colIndex:y,isExpandable:x,isExpanded:S}){const O=t?t[b]:void 0,C=e.fields.getByName(h),F=Object(i.useContext)(o.a);if(Object(i.useEffect)((()=>{null!=O&&O.isAnchor?v({className:"unifiedDataTable__cell--highlight"}):F.expanded&&O&&F.expanded.id===O.id?v({className:"unifiedDataTable__cell--expanded"}):v({style:void 0})}),[F,O,v]),void 0===O)return Object(m.jsx)("span",{className:T},"-");if(f&&f[h])return Object(m.jsx)("span",{className:T},f[h]({rowIndex:b,columnId:h,isDetails:E,setCellProps:v,isExpandable:x,isExpanded:S,colIndex:y,row:O,dataView:e,fieldFormats:c,closePopover:u}));const _=Boolean(a&&!C&&(null==O?void 0:O.raw.fields)&&!O.raw.fields[h]);return E?function({row:e,field:t,columnId:a,dataView:i,useTopLevelObjectColumns:o,fieldFormats:s,closePopover:u}){const c=Object(m.jsx)(l.EuiButtonIcon,{"aria-label":n.i18n.translate("unifiedDataTable.grid.closePopover",{defaultMessage:"Close popover"}),"data-test-subj":"docTableClosePopover",iconSize:"s",iconType:"cross",size:"xs",onClick:u});return o||"_source"===(null==t?void 0:t.type)?Object(m.jsx)(w,{row:e,columnId:a,useTopLevelObjectColumns:o,closeButton:c}):Object(m.jsx)(l.EuiFlexGroup,{gutterSize:"none",direction:"row",responsive:!1,"data-test-subj":"dataTableExpandCellActionPopover"},Object(m.jsx)(l.EuiFlexItem,null,Object(m.jsx)(j,null,Object(m.jsx)("span",{dangerouslySetInnerHTML:{__html:Object(r.a)(e.flattened[a],e.raw,s,i,t)}}))),Object(m.jsx)(l.EuiFlexItem,{grow:!1},c))}({row:O,field:C,columnId:h,dataView:e,useTopLevelObjectColumns:_,fieldFormats:c,closePopover:u}):"_source"===(null==C?void 0:C.type)||_?Object(m.jsx)(p,{useTopLevelObjectColumns:_,row:O,dataView:e,columnId:h,fieldFormats:c,shouldShowFieldHandler:s,maxEntries:d,isPlainRecord:g}):Object(m.jsx)("span",{className:T,dangerouslySetInnerHTML:{__html:Object(r.a)(O.flattened[h],O.raw,c,e,C)}})}},168:function(e,t,a){"use strict";a.d(t,"b",(function(){return S})),a.d(t,"a",(function(){return O}));var i=a(76),n=a.n(i),l=a(0),r=a.n(l),o=a(6),s=a(1),u=a(35),c=a.n(u),d=a(41),m=a(29);function p({onChange:e,initialBurnRate:t=1,maxBurnRate:a,errors:i}){const[n,u]=Object(l.useState)(t),c=void 0!==i&&i.length>0,[d,m]=Object(l.useState)(n.toFixed(2));return r.a.createElement(o.EuiFormRow,{label:r.a.createElement(r.a.Fragment,null,s.i18n.translate("xpack.slo.rules.burnRate.rowLabel",{defaultMessage:"Burn rate threshold"})," ",r.a.createElement(o.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.burnRate.tooltip",{defaultMessage:"The burn rate is how fast the service consumes the error budget over the lookback period."})})),fullWidth:!0,isInvalid:c},r.a.createElement(o.EuiFieldNumber,{fullWidth:!0,step:.01,min:.01,max:a,value:d,onChange:t=>{(t=>{const a=Number(t.target.value);u(a),e(a)})(t),m(t.target.value)},onBlur:e=>{const t=e.target.value;m(Number(t).toFixed(2))},"data-test-subj":"burnRate"}))}function f({initialDuration:e,onChange:t,errors:a}){var i;const[n,u]=Object(l.useState)(null!==(i=null==e?void 0:e.value)&&void 0!==i?i:1),c=void 0!==a&&a.length>0;return r.a.createElement(o.EuiFormRow,{label:g(),fullWidth:!0,isInvalid:c},r.a.createElement(o.EuiFieldNumber,{isInvalid:c,min:1,max:72,step:1,value:String(n),onChange:e=>{const a=Number(e.target.value);u(a),t({value:a,unit:"h"})},"aria-label":s.i18n.translate("xpack.slo.rules.longWindow.valueLabel",{defaultMessage:"Long lookback period in hours"}),"data-test-subj":"durationValueInput"}))}const g=()=>r.a.createElement(r.a.Fragment,null,s.i18n.translate("xpack.slo.rules.longWindow.rowLabel",{defaultMessage:"Long lookback (hours)"})," ",r.a.createElement(o.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.longWindowDuration.tooltip",{defaultMessage:"Long lookback period over which the burn rate is computed."})}));var b=a(11),h=a(15);function E({onChange:e,initialBurnRate:t=1,longLookbackWindowInHours:a,sloTimeWindowInHours:i,errors:n}){const[u,c]=Object(l.useState)(t*a/i*100),[d,m]=Object(l.useState)(u.toFixed(2)),p=void 0!==n&&n.length>0;return r.a.createElement(o.EuiFormRow,{label:r.a.createElement(r.a.Fragment,null,s.i18n.translate("xpack.slo.rules.budgetConsumed.rowLabel",{defaultMessage:"% Budget consumed"})," ",r.a.createElement(o.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.budgetConsumed.tooltip",{defaultMessage:"How much budget is consumed before the first alert is fired."})})),fullWidth:!0,isInvalid:p},r.a.createElement(o.EuiFieldNumber,{fullWidth:!0,step:.01,min:.01,max:100,value:d,onChange:t=>{(t=>{const n=Number(t.target.value);c(n),e(i*(n/100/a))})(t),m(t.target.value)},onBlur:e=>{const t=e.target.value;m(Number(t).toFixed(2))},"data-test-subj":"budgetConsumed"}))}function v({longWindowDuration:e,initialDuration:t,onChange:a,errors:i}){var n;const[u,c]=Object(l.useState)(null!==(n=null==t?void 0:t.value)&&void 0!==n?n:1),d=void 0!==i&&i.length>0,m=Object(b.d)(e);return r.a.createElement(o.EuiFormRow,{label:y(),fullWidth:!0,isInvalid:d},r.a.createElement(o.EuiFieldNumber,{isInvalid:d,min:1,max:m,step:1,value:String(u),onChange:e=>{const t=Number(e.target.value);c(t),a({value:t,unit:"m"})},"aria-label":s.i18n.translate("xpack.slo.rules.shortWindow.valueLabel",{defaultMessage:"short lookback period in minutes"}),"data-test-subj":"durationValueInput"}))}const y=()=>r.a.createElement(r.a.Fragment,null,s.i18n.translate("xpack.slo.rules.shortWindow.rowLabel",{defaultMessage:"Short lookback (min)"})," ",r.a.createElement(o.EuiIconTip,{position:"top",content:s.i18n.translate("xpack.slo.rules.shortWindowDuration.tooltip",{defaultMessage:"Short lookback period over which the burn rate is computed. Used for faster recovery, a good default value is 1/12th of the long lookback period."})})),x=[{value:h.a.id,text:h.a.name},{value:h.f.id,text:h.f.name},{value:h.j.id,text:h.j.name},{value:h.h.id,text:h.h.name}],w=(e,t)=>t?Math.floor(Object(b.d)(Object(b.c)(t.timeWindow.duration))/Object(b.d)(e)):1/0;function j({slo:e,id:t,burnRateThreshold:a,maxBurnRateThreshold:i,longWindow:n,shortWindow:l,actionGroup:u,onChange:d,onDelete:m,errors:g,disableDelete:h,budgetMode:y=!0}){var j;const S=a=>{d({id:t,burnRateThreshold:a,maxBurnRateThreshold:w(n,e),longWindow:n,shortWindow:l,actionGroup:u})},O=Math.round(Object(b.d)(Object(b.c)(null!==(j=null==e?void 0:e.timeWindow.duration)&&void 0!==j?j:"30d"))/60),C=[...g.longWindow,...g.burnRateThreshold];return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.EuiFlexGroup,{direction:"row",alignItems:"flexEnd"},r.a.createElement(o.EuiFlexItem,null,r.a.createElement(f,{initialDuration:n,onChange:e=>{d({id:t,burnRateThreshold:a,maxBurnRateThreshold:i,longWindow:e,shortWindow:l,actionGroup:u})},errors:g.longWindow})),r.a.createElement(o.EuiFlexItem,null,r.a.createElement(v,{longWindowDuration:n,initialDuration:l,onChange:e=>{d({id:t,burnRateThreshold:a,maxBurnRateThreshold:i,longWindow:n,shortWindow:e,actionGroup:u})},errors:g.shortWindow})),!y&&r.a.createElement(o.EuiFlexItem,null,r.a.createElement(p,{initialBurnRate:a,maxBurnRate:i,onChange:S,errors:g.burnRateThreshold})),y&&r.a.createElement(o.EuiFlexItem,null,r.a.createElement(E,{initialBurnRate:a,onChange:S,errors:g.burnRateThreshold,sloTimeWindowInHours:O,longLookbackWindowInHours:n.value})),r.a.createElement(o.EuiFlexItem,null,r.a.createElement(o.EuiFormRow,{label:s.i18n.translate("xpack.slo.rules.actionGroupSelectorLabel",{defaultMessage:"Action Group"})},r.a.createElement(o.EuiSelect,{"data-test-subj":"sloBurnRateActionGroupSelctor",options:x,value:u,onChange:e=>{d({id:t,burnRateThreshold:a,maxBurnRateThreshold:i,longWindow:n,shortWindow:l,actionGroup:e.currentTarget.value})},"aria-label":s.i18n.translate("xpack.slo.rules.actionGroupSelectorLabel",{defaultMessage:"Action Group"})}))),r.a.createElement(o.EuiFlexItem,{grow:0},r.a.createElement(o.EuiButtonIcon,{"data-test-subj":"sloBurnRateRuleDeleteWindowButton",iconType:"trash",color:"danger",style:{marginBottom:"-1em"},onClick:()=>m(t),disabled:h,title:s.i18n.translate("xpack.slo.rules.deleteWindowLabel",{defaultMessage:"Delete window"}),"aria-label":s.i18n.translate("xpack.slo.rules.deleteWindowLabel",{defaultMessage:"Delete window"})}))),r.a.createElement(o.EuiSpacer,{size:"xs"}),C.length>0&&r.a.createElement(o.EuiText,{color:"danger",size:"xs"},C.map((e=>r.a.createElement("p",{key:e},e)))),r.a.createElement(o.EuiText,{color:"subdued",size:"xs"},r.a.createElement("p",null,T(e&&(null==n?void 0:n.value)>0&&a>=1?c()(n.value/(a*Object(b.d)(n)/Object(b.d)(Object(b.c)(e.timeWindow.duration)))).format("0a"):"N/A",e&&n.value>0&&a>0?a*n.value/O:0,a,y))),r.a.createElement(o.EuiSpacer,{size:"s"}))}const T=(e,t,a,i=!1)=>i?s.i18n.translate("xpack.slo.rules.errorBudgetExhaustion.budgetMode.text",{defaultMessage:"{formatedHours} hours until error budget exhaustion. The burn rate threshold is {burnRateThreshold}x.",values:{formatedHours:e,burnRateThreshold:c()(a).format("0[.0]")}}):s.i18n.translate("xpack.slo.rules.errorBudgetExhaustion.burnRateMode.text",{defaultMessage:"{formatedHours} hours until error budget exhaustion. {budgetConsumed} budget consumed before first alert.",values:{formatedHours:e,budgetConsumed:c()(t).format("0.00%")}}),S=(e,t={})=>{const a=t.longWindow||{value:1,unit:"h"};return{id:Object(d.v4)(),burnRateThreshold:1,maxBurnRateThreshold:w(a,e),longWindow:a,shortWindow:{value:5,unit:"m"},actionGroup:h.a.id,...t}};function O({slo:e,windows:t,errors:a,onChange:i,totalNumberOfWindows:u}){const[c,d]=Object(l.useState)(!0),p=e=>{i(t.map((t=>e.id===t.id?e:t)))},f=e=>{i(t.length>1?t.filter((t=>t.id!==e)):t)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.EuiTitle,{size:"xs"},r.a.createElement("h5",null,s.i18n.translate("xpack.slo.burnRateRuleEditor.h5.defineMultipleBurnRateLabel",{defaultMessage:"Define multiple burn rate windows"}))),r.a.createElement(o.EuiSpacer,{size:"s"}),t.map(((i,l)=>{const o=a[l]||{longWindow:new Array,shortWindow:new Array,burnRateThreshold:new Array};return r.a.createElement(j,n()({},i,{key:i.id,slo:e,errors:o,onChange:p,onDelete:f,disableDelete:1===t.length,budgetMode:c}))})),r.a.createElement(o.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},r.a.createElement(o.EuiFlexItem,{grow:0},r.a.createElement(o.EuiButtonEmpty,{"data-test-subj":"sloBurnRateRuleAddWindowButton",color:"primary",size:"s",iconType:"plusInCircleFilled",onClick:()=>{i([...t,S()])},isDisabled:t.length===(u||4),"aria-label":s.i18n.translate("xpack.slo.rules.addWindowAriaLabel",{defaultMessage:"Add window"})},r.a.createElement(m.FormattedMessage,{id:"xpack.slo.slo.rules.addWIndowLabel",defaultMessage:"Add window"}))),r.a.createElement(o.EuiFlexItem,{grow:0},r.a.createElement(o.EuiSwitch,{compressed:!0,onChange:()=>{d((e=>!e))},checked:!c,label:s.i18n.translate("xpack.slo.rules.useBurnRateModeLabel",{defaultMessage:"Burn rate mode"})}))),r.a.createElement(o.EuiSpacer,{size:"m"}))}},187:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var i,n=a(0),l=a(37),r=(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},i(e,t)},function(e,t){function a(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o="html",s="svg",u=function(e,t){var a,i,n,l={};if(e===o)n=document.createElement("div");else{if(e!==s)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');n=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var r=0,u=Object.entries(t.attributes);r<u.length;r++){var c=u[r],d=c[0],m=c[1];n.setAttribute(d,m)}var p={element:n,elementType:e,setPortalProps:function(e){l=e},getInitialPortalProps:function(){return l},mount:function(t,n){if(n!==i){if(p.unmount(),t!==a&&!function(e,t){if(t===o)return e instanceof HTMLElement;if(t===s)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(p.element,n),a=t,i=n}},unmount:function(e){e&&e!==i||a&&i&&(a.replaceChild(i,p.element),a=void 0,i=void 0)}};return p},c=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return r(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,i=t.node;return l.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),i.element)},t}(n.PureComponent),d=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return r(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),m=u.bind(null,o);u.bind(null,s)},188:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(36),n=a(0),l=i.__importDefault(a(232));t.default=function(e,t,a){void 0===t&&(t=[]),void 0===a&&(a={loading:!1});var r=n.useRef(0),o=l.default(),s=n.useState(a),u=s[0],c=s[1],d=n.useCallback((function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var n=++r.current;return c((function(e){return i.__assign(i.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return o()&&n===r.current&&c({value:e,loading:!1}),e}),(function(e){return o()&&n===r.current&&c({error:e,loading:!1}),e}))}),t);return[u,d]}},189:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(239);case"v8light":return a(241)}},190:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(213);function n(e){return{type:Object(i.a)(e),scripted:e.scripted}}},208:function(e,t,a){"use strict";a.d(t,"b",(function(){return Ri})),a.d(t,"a",(function(){return Li}));var i=a(6),n=a(1),l=a(0),r=a.n(l),o=a(77),s=a(187),u=a(7),c=a(59),d=a(41),m=a(74),p=a(229),f=a(4),g=a(47),b=a(98),h=a(29),E=a(365),v=a(79),y=a(156),x=a(168);function w(e){return(e?y.a[null==e?void 0:e.timeWindow.duration]:y.a["30d"]).map((t=>Object(x.b)(e,t)))}function j(e){return{params:{sloId:e.id,windows:w(e)},consumer:"slo",schedule:{interval:"1m"},tags:[],name:n.i18n.translate("xpack.slo.burnRateRule.name",{defaultMessage:"{name} Burn Rate rule",values:{name:e.name}}),rule_type_id:"slo.rules.burnRate",actions:[],enabled:!0}}var T=a(18),S=a(30),O=a(11),C=a(87);function F(e){var t,a;return{name:e.name,description:e.description,indicator:e.indicator,budgetingMethod:e.budgetingMethod,timeWindow:{duration:e.timeWindow.duration,type:e.timeWindow.type},objective:{target:e.objective.target/100,..."timeslices"===e.budgetingMethod&&e.objective.timesliceTarget&&{timesliceTarget:e.objective.timesliceTarget/100},..."timeslices"===e.budgetingMethod&&e.objective.timesliceWindow&&{timesliceWindow:`${e.objective.timesliceWindow}m`}},tags:e.tags,groupBy:[e.groupBy].flat(),settings:{preventInitialBackfill:null!==(t=null===(a=e.settings)||void 0===a?void 0:a.preventInitialBackfill)&&void 0!==t&&t}}}function _({disabled:e,isEditMode:t,slo:a}){const[s,u]=Object(l.useState)(!1),{getValues:c,trigger:d}=Object(o.useFormContext)(),[m,p]=Object(l.useState)();let f;return Object(l.useEffect)((()=>{s&&d().then((e=>{e&&p(F(c()))}))}),[c,d,s]),s&&(f=r.a.createElement(i.EuiFlyout,{ownFocus:!0,onClose:()=>u(!1)},r.a.createElement(i.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(i.EuiTitle,{size:"m"},r.a.createElement("h2",null,n.i18n.translate("xpack.slo.equivalentApiRequest.h2.equivalentAPIRequestToLabel",{defaultMessage:"Equivalent API request"})))),r.a.createElement(i.EuiFlyoutBody,null,r.a.createElement(i.EuiText,null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.equivalentApiRequest.p.useTheRESTAPILabel",defaultMessage:"Use the REST API"})),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiCodeBlock,{language:"javascript",isCopyable:!0,paddingSize:"s"},t?`PUT /api/observability/slos/${a.id}`:"POST /api/observability/slos"),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiText,null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.equivalentApiRequest.p.withTheFollowingBodyLabel",defaultMessage:"with the following body:"})),m?r.a.createElement(i.EuiCodeBlock,{language:"json",isCopyable:!0,paddingSize:"s"},JSON.stringify(m,null,2)):r.a.createElement(i.EuiCodeBlock,{language:"javascript",isCopyable:!0,paddingSize:"s"},n.i18n.translate("xpack.slo.equivalentApiRequest.formIsNotValidCodeBlockLabel",{defaultMessage:"Form is not valid"}))),r.a.createElement(i.EuiFlyoutFooter,null,r.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"o11yEquivalentApiRequestCloseButton",iconType:"cross",onClick:()=>u(!1),flush:"left"},n.i18n.translate("xpack.slo.equivalentApiRequest.closeButtonEmptyLabel",{defaultMessage:"Close"}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiButtonEmpty,{color:"primary",iconType:"copyClipboard","data-test-subj":"sloFormCopyJsonButton",disabled:e,onClick:()=>u(!0)},n.i18n.translate("xpack.slo.sloEdit.equivalentApiRequest",{defaultMessage:"Equivalent API request"})),f)}var M=a(67),k=a(34),I=a(5),D=a(86);function A({id:e,label:t,json:a,extraAction:n,children:l}){return r.a.createElement(i.EuiAccordion,{id:e,extraAction:n,buttonContent:r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,t))},null!=l?l:r.a.createElement(i.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"m",isCopyable:!0},JSON.stringify(a,null,2)))}function R(){return r.a.createElement(i.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"100%"}},r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiLoadingSpinner,{size:"xl"})))}var L=a(32),N=a.n(L),V=a(60),P=a(61),B=a(230);const G=n.i18n.translate("xpack.slo.requests.copyToClipboardLabel",{defaultMessage:"Copy to clipboard"});function H({value:e}){var t;const{application:{navigateToUrl:a},share:{url:{locators:n}}}=Object(m.a)().services,o=Object(B.compressToEncodedURIComponent)(e),s=null===(t=n.get("CONSOLE_APP_LOCATOR"))||void 0===t?void 0:t.useUrl({loadFrom:`data:text/plain,${o}`}),u=Object(l.useCallback)((()=>s&&a&&a(s)),[s,a]),c=[];return c.push({name:"openInConsole",action:r.a.createElement(i.EuiButtonEmpty,{size:"xs",flush:"right",iconType:"wrench",href:s,onClick:u,"data-test-subj":"inspectorRequestOpenInConsoleButton"},W)}),r.a.createElement(z,{direction:"column",gutterSize:"s",wrap:!1,responsive:!1},r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"m",wrap:!0},r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement("div",null,r.a.createElement(i.EuiCopy,{textToCopy:e},(e=>r.a.createElement(i.EuiButtonEmpty,{size:"xs",flush:"right",iconType:"copyClipboard",onClick:e,"data-test-subj":"inspectorRequestCopyClipboardButton"},G))))),!!c&&c.map((e=>r.a.createElement(i.EuiFlexItem,{grow:!1,key:e.name},r.a.createElement("div",null,e.action)))))),r.a.createElement(i.EuiFlexItem,{grow:!0,"data-test-subj":"inspectorRequestCodeViewerContainer"},r.a.createElement(P.CodeEditor,{languageId:V.XJsonLang.ID,value:e,options:{readOnly:!0,lineNumbers:"off",fontSize:12,minimap:{enabled:!1},folding:!0,scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",automaticLayout:!0}})))}const W=n.i18n.translate("xpack.slo.requests.openInConsoleLabel",{defaultMessage:"Open in Console"});var z=N()(i.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-1xzh9yg-0"})({height:800});function q({slo:e,disabled:t}){const{services:{uiSettings:a}}=Object(m.a)(),{isDev:i}=Object(D.a)(),n=null==a?void 0:a.get(I.enableInspectEsQueries);return i||n?r.a.createElement(U,{slo:e,disabled:t}):null}function U({slo:e,disabled:t}){var a;const{share:s,http:c}=Object(m.a)().services,{trigger:d,getValues:p}=Object(o.useFormContext)(),[f,g]=Object(l.useState)(!1),[b,h]=Object(l.useState)(!1),E=F(p()),{data:v,isLoading:y}=function(e,t){const{http:a}=Object(m.a)().services,{isLoading:i,isError:n,isSuccess:l,data:r}=Object(u.useQuery)({queryKey:["slo","inspect"],queryFn:async({signal:t})=>{try{const i=JSON.stringify(e);return await a.post("/internal/api/observability/slos/_inspect",{body:i,signal:t})}catch(e){}},enabled:t,refetchOnWindowFocus:!1,keepPreviousData:!0});return{data:r,isLoading:i,isSuccess:l,isError:n}}({...E,id:null==e?void 0:e.id,revision:null==e?void 0:e.revision},f&&b),{data:x}=Object(k.useFetcher)((async()=>{var e;const t=s.url.locators.get(M.INGEST_PIPELINES_APP_LOCATOR),a=null==v||null===(e=v.pipeline)||void 0===e?void 0:e.id;return null==t?void 0:t.getUrl({pipelineId:a,page:M.INGEST_PIPELINES_PAGES.LIST})}),[null==v||null===(a=v.pipeline)||void 0===a?void 0:a.id,s.url.locators]),w=()=>{g(!1),h(!1)};let j;return f&&(j=r.a.createElement(i.EuiFlyout,{ownFocus:!0,onClose:w,"aria-labelledby":"flyoutTitle"},r.a.createElement(i.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(i.EuiTitle,{size:"m"},r.a.createElement("h2",{id:"flyoutTitle"},n.i18n.translate("xpack.slo.monitorInspect.configLabel",{defaultMessage:"SLO Configurations"})))),r.a.createElement(i.EuiFlyoutBody,null,y&&r.a.createElement(R,null),r.a.createElement(i.EuiSpacer,{size:"m"}),v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{id:"slo",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.sloConfigurationLabel",{defaultMessage:"SLO configuration"}),json:v.slo}),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(A,{id:"rollUpTransform",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.rollupTransformLabel",{defaultMessage:"Rollup transform"}),json:v.rollUpTransform,extraAction:r.a.createElement(i.EuiButtonIcon,{iconType:"link","data-test-subj":"o11ySLOInspectDetailsButton",href:null==c?void 0:c.basePath.prepend("/app/management/data/transform")})}),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(A,{id:"summaryTransform",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.summaryTransformLabel",{defaultMessage:"Summary transform"}),json:v.summaryTransform,extraAction:r.a.createElement(i.EuiButtonIcon,{iconType:"link","data-test-subj":"o11ySLOInspectDetailsButton",href:null==c?void 0:c.basePath.prepend("/app/management/data/transform")})}),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(A,{id:"pipeline",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.ingestPipelineLabel",{defaultMessage:"SLO Ingest pipeline"}),extraAction:r.a.createElement(i.EuiButtonIcon,{iconType:"link","data-test-subj":"o11ySLOInspectDetailsButton",href:x}),json:v.pipeline}),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(A,{id:"temporaryDoc",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.temporaryDocumentLabel",{defaultMessage:"Temporary document"}),json:v.temporaryDoc}),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(A,{id:"rollupTransformQuery",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.transformQueryLabel",{defaultMessage:"Rollup Transform query composite"})},r.a.createElement(H,{value:v.rollUpTransformCompositeQuery})),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(A,{id:"summmaryTransformQuery",label:n.i18n.translate("xpack.slo.sLOInspect.codeBlockAccordion.summaryTransformQueryLabel",{defaultMessage:"Summary Transform query composite"})},r.a.createElement(H,{value:v.summaryTransformCompositeQuery})))),r.a.createElement(i.EuiFlyoutFooter,null,r.a.createElement(i.EuiButton,{"data-test-subj":"syntheticsMonitorInspectCloseButton",onClick:w,fill:!0},n.i18n.translate("xpack.slo.sLOInspect.closeButtonLabel",{defaultMessage:"Close"}))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiToolTip,{content:b?n.i18n.translate("xpack.slo.viewFormattedResourcesConfigsButtonLabel",{defaultMessage:"View formatted resources configs for SLO"}):n.i18n.translate("xpack.slo.formattedConfigLabel.valid",{defaultMessage:"Only valid form configurations can be inspected."}),repositionOnScroll:!0},r.a.createElement(i.EuiButtonEmpty,{color:"primary","data-test-subj":"syntheticsMonitorInspectShowFlyoutExampleButton",onClick:async()=>{await d()?(h(!0),g(!0)):h(!1)},disabled:t,iconType:"inspect",iconSide:"left"},n.i18n.translate("xpack.slo.sLOInspect.sLOInspectButtonLabel",{defaultMessage:"SLO Inspect"}))),j)}function $({slo:e,onSave:t}){const{application:{navigateToUrl:a},http:{basePath:y}}=Object(m.a)().services,x=void 0!==e,{getValues:w,trigger:T}=Object(o.useFormContext)(),{mutateAsync:S,isLoading:O}=function(){const{i18n:e,theme:t,application:{navigateToUrl:a},http:l,notifications:{toasts:o}}=Object(m.a)().services,s=Object(m.a)().services,c=Object(u.useQueryClient)();return Object(u.useMutation)(["createSlo"],(({slo:e})=>{const t=JSON.stringify(e);return l.post("/api/observability/slos",{body:t})}),{onSuccess:(a,{slo:u})=>{c.invalidateQueries({queryKey:v.a.lists(),exact:!1});const d=l.basePath.prepend(f.i.sloEdit(a.id));o.addSuccess({title:Object(b.a)(r.a.createElement(E.a,{coreStart:s,"data-test-subj":"observabilityMainContainer"},r.a.createElement(h.FormattedMessage,{id:"xpack.slo.slo.create.successNotification",defaultMessage:"Successfully created {name}. {editSLO}",values:{name:u.name,editSLO:r.a.createElement(i.EuiLink,{"data-test-subj":"o11yUseCreateSloEditSloLink",href:d},n.i18n.translate("xpack.slo.useCreateSlo.editSLOLinkLabel",{defaultMessage:"Edit SLO"}))}})),{i18n:e,theme:t})},{toastLifeTimeMs:3e4})},onError:(e,{slo:t},i)=>{var r,s;o.addError(new Error(null!==(r=null===(s=e.body)||void 0===s?void 0:s.message)&&void 0!==r?r:e.message),{title:n.i18n.translate("xpack.slo.create.errorNotification",{defaultMessage:"Something went wrong while creating {name}",values:{name:t.name}})}),a(l.basePath.prepend(f.i.sloCreateWithEncodedForm(Object(g.encode)(t))))}})}(),{mutateAsync:C,isLoading:M}=function(){const{application:{navigateToUrl:e},http:t,notifications:{toasts:a}}=Object(m.a)().services,i=Object(u.useQueryClient)();return Object(u.useMutation)(["updateSlo"],(({sloId:e,slo:a})=>{const i=JSON.stringify(a);return t.put(`/api/observability/slos/${e}`,{body:i})}),{onSuccess:(e,{slo:{name:t}})=>{i.invalidateQueries({queryKey:v.a.lists(),exact:!1}),a.addSuccess(n.i18n.translate("xpack.slo.update.successNotification",{defaultMessage:"Successfully updated {name}",values:{name:t}}))},onError:(i,{slo:l,sloId:r},o)=>{var s,u;a.addError(new Error(null!==(s=null===(u=i.body)||void 0===u?void 0:u.message)&&void 0!==s?s:i.message),{title:n.i18n.translate("xpack.slo.update.errorNotification",{defaultMessage:"Something went wrong when updating {name}",values:{name:l.name}})}),e(t.basePath.prepend(f.i.sloEditWithEncodedForm(r,Object(g.encode)(l))))}})}(),{mutateAsync:k,isLoading:I}=function(){const{http:e,notifications:{toasts:t}}=Object(m.a)().services;return Object(u.useMutation)(["createRule"],(({rule:t})=>{try{const a=Object(d.v4)(),i=JSON.stringify(t);return e.post(`${c.BASE_ALERTING_API_PATH}/rule/${a}`,{body:i})}catch(e){throw new Error(`Unable to create rule: ${e}`)}}),{onError:e=>{t.addDanger(n.i18n.translate("xpack.slo.rules.createRule.errorNotification.descriptionText",{defaultMessage:"Failed to create rule"}))},onSuccess:()=>{t.addSuccess(n.i18n.translate("xpack.slo.rules.createRule.successNotification.descriptionText",{defaultMessage:"Rule created"}))}})}(),D=Object(l.useCallback)((e=>setTimeout((()=>a(e)))),[a]),A=Boolean(t),R=Object(l.useCallback)((async()=>{if(!await T())return;const a=w();if(x){const t=function(e){var t,a;return{name:e.name,description:e.description,indicator:e.indicator,budgetingMethod:e.budgetingMethod,timeWindow:{duration:e.timeWindow.duration,type:e.timeWindow.type},objective:{target:e.objective.target/100,..."timeslices"===e.budgetingMethod&&e.objective.timesliceTarget&&{timesliceTarget:e.objective.timesliceTarget/100},..."timeslices"===e.budgetingMethod&&e.objective.timesliceWindow&&{timesliceWindow:`${e.objective.timesliceWindow}m`}},tags:e.tags,groupBy:[e.groupBy].flat(),settings:{preventInitialBackfill:null!==(t=null===(a=e.settings)||void 0===a?void 0:a.preventInitialBackfill)&&void 0!==t&&t}}}(a);await C({sloId:e.id,slo:t}),D(y.prepend(f.i.slos))}else{const e=F(a),i=await S({slo:e});await k({rule:j({...e,id:i.id})}),t?t():D(y.prepend(f.i.slos))}}),[y,k,S,w,x,D,t,null==e?void 0:e.id,T,C]),L=Object(l.useMemo)((()=>r.a.createElement(i.EuiFlexGroup,{gutterSize:"s"},r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiButton,{color:"primary","data-test-subj":"sloFormSubmitButton",fill:!0,isLoading:O||M||I,onClick:R},x?n.i18n.translate("xpack.slo.sloEdit.editSloButton",{defaultMessage:"Update SLO"}):n.i18n.translate("xpack.slo.sloEdit.createSloButton",{defaultMessage:"Create SLO"}))),r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiButtonEmpty,{color:"primary","data-test-subj":"sloFormCancelButton",disabled:O||M||I,onClick:t?()=>t():()=>a(y.prepend(f.i.slos))},n.i18n.translate("xpack.slo.sloEdit.cancelButton",{defaultMessage:"Cancel"}))),!A&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(_,{slo:e,disabled:O||M||I,isEditMode:x})),r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(q,{slo:e,disabled:O||M||I}))))),[O,M,I,R,x,t,A,e,a,y]);return A?r.a.createElement(s.a,{node:p.sloEditFormFooterPortal},L):L}var K=a(3),Q=a(16),J=a(75);function X({getFieldState:e,getValues:t,formState:a,watch:i}){let n=!1;switch(i("indicator.type")){case"sli.metric.custom":const i=()=>{var a;const i=t("indicator.params.good"),n=!e("indicator.params.good.equation").invalid,l=Object(S.isObject)(i)&&(null!==(a=i.metrics)&&void 0!==a?a:[]).every((e=>!!J.h.is(e)||!(!J.g.is(e)||null==e.field)));return n&&l},l=()=>{var a;const i=t("indicator.params.total"),n=!e("indicator.params.total.equation").invalid,l=Object(S.isObject)(i)&&(null!==(a=i.metrics)&&void 0!==a?a:[]).every((e=>!!J.h.is(e)||!(!J.g.is(e)||null==e.field)));return n&&l};n=["indicator.params.index","indicator.params.filter","indicator.params.timestampField"].every((t=>!e(t).invalid))&&["indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)))&&i()&&l();break;case"sli.metric.timeslice":const r=()=>{var a;const i=t("indicator.params.metric"),n=!e("indicator.params.metric.equation").invalid,l=Object(S.isObject)(i)&&(null!==(a=i.metrics)&&void 0!==a?a:[]).every((e=>J.m.is(e)?Boolean(e.field):!J.n.is(e)||Boolean(e.field)&&Boolean(e.percentile)));return n&&l};n=["indicator.params.index","indicator.params.filter","indicator.params.timestampField"].every((t=>!e(t).invalid))&&["indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)))&&r();break;case"sli.histogram.custom":const o=e=>{if("value_count"===t(`indicator.params.${e}.aggregation`))return!0;const a=t(`indicator.params.${e}.from`),i=t(`indicator.params.${e}.to`);return null!=a&&null!=i&&a<i};n=["indicator.params.index","indicator.params.filter","indicator.params.timestampField","indicator.params.good.aggregation","indicator.params.total.aggregation","indicator.params.good.field","indicator.params.total.field","indicator.params.good.filter","indicator.params.total.filter"].every((t=>!e(t).invalid))&&["indicator.params.good.aggregation","indicator.params.total.aggregation","indicator.params.good.field","indicator.params.total.field","indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)))&&o("good")&&o("total");break;case"sli.kql.custom":n=["indicator.params.index","indicator.params.filter","indicator.params.total","indicator.params.timestampField"].every((t=>!e(t).invalid))&&["indicator.params.good","indicator.params.index","indicator.params.timestampField"].every((e=>!!t(e)));break;case"sli.apm.transactionDuration":n=["indicator.params.service","indicator.params.environment","indicator.params.transactionType","indicator.params.transactionName","indicator.params.threshold"].every((i=>!e(i,a).invalid&&""!==t(i)))&&!e("indicator.params.index",a).invalid;break;case"sli.apm.transactionErrorRate":n=["indicator.params.service","indicator.params.environment","indicator.params.transactionType","indicator.params.transactionName"].every((i=>!e(i,a).invalid&&""!==t(i)))&&["indicator.params.index"].every((t=>!e(t,a).invalid));break;case"sli.synthetics.availability":n=["indicator.params.monitorIds"].every((i=>{var n;return!e(i,a).invalid&&(null===(n=t(i))||void 0===n?void 0:n.length)}))&&["indicator.params.index","indicator.params.tags","indicator.params.projects"].every((t=>!e(t,a).invalid));break;default:n=!1}return{isIndicatorSectionValid:n,isObjectiveSectionValid:["budgetingMethod","timeWindow.duration","objective.target","objective.timesliceTarget","objective.timesliceWindow"].every((t=>void 0===e(t).error)),isDescriptionSectionValid:!e("name").invalid&&""!==t("name")&&!e("description").invalid}}var Y=a(76),Z=a.n(Y);function ee(){return r.a.createElement(i.EuiText,{size:"xs",color:"subdued"},n.i18n.translate("xpack.slo.sloEdit.optionalLabel",{defaultMessage:"Optional"}))}function te(){const{control:e,getFieldState:t}=Object(o.useFormContext)(),a=Object(i.useGeneratedHtmlId)({prefix:"sloName"}),l=Object(i.useGeneratedHtmlId)({prefix:"sloDescription"}),s=Object(i.useGeneratedHtmlId)({prefix:"tags"}),{suggestions:c}=function(){const{http:e}=Object(m.a)().services,{isLoading:t,isError:a,isSuccess:i,data:n}=Object(u.useQuery)({queryKey:["fetchSLOSuggestions"],queryFn:async({signal:t})=>{try{return await e.get("/internal/api/observability/slos/suggestions",{signal:t})}catch(e){}},refetchOnWindowFocus:!1,keepPreviousData:!0});return{suggestions:n,isLoading:t,isSuccess:i,isError:a}}();return r.a.createElement(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:Ri},"data-test-subj":"sloEditFormDescriptionSection"},r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:t("name").invalid,label:n.i18n.translate("xpack.slo.sloEdit.description.sloName",{defaultMessage:"SLO Name"})},r.a.createElement(o.Controller,{name:"name",control:e,rules:{required:!0},render:({field:{ref:e,...t},fieldState:l})=>r.a.createElement(i.EuiFieldText,Z()({},t,{fullWidth:!0,isInvalid:l.invalid,id:a,"data-test-subj":"sloFormNameInput",placeholder:n.i18n.translate("xpack.slo.sloEdit.description.sloNamePlaceholder",{defaultMessage:"Name for the SLO"})}))}))),r.a.createElement(i.EuiFlexItem,{grow:!0},r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:n.i18n.translate("xpack.slo.sloEdit.description.sloDescription",{defaultMessage:"Description"}),labelAppend:r.a.createElement(ee,null)},r.a.createElement(o.Controller,{name:"description",defaultValue:"",control:e,rules:{required:!1},render:({field:{ref:e,...t}})=>r.a.createElement(i.EuiTextArea,Z()({},t,{fullWidth:!0,id:l,"data-test-subj":"sloFormDescriptionTextArea",placeholder:n.i18n.translate("xpack.slo.sloEdit.description.sloDescriptionPlaceholder",{defaultMessage:"A short description of the SLO"})}))}))),r.a.createElement(i.EuiFlexItem,{grow:!0},r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:n.i18n.translate("xpack.slo.sloEdit.tags.label",{defaultMessage:"Tags"})},r.a.createElement(o.Controller,{name:"tags",control:e,defaultValue:[],rules:{required:!1},render:({field:{ref:e,...t},fieldState:a})=>{var l;return r.a.createElement(i.EuiComboBox,Z()({},t,{id:s,fullWidth:!0,"aria-label":n.i18n.translate("xpack.slo.sloEdit.tags.placeholder",{defaultMessage:"Add tags"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.tags.placeholder",{defaultMessage:"Add tags"}),isInvalid:a.invalid,options:null!==(l=null==c?void 0:c.tags)&&void 0!==l?l:[],selectedOptions:ae(t.value),onChange:e=>{if(e.length)return t.onChange(e.map((e=>e.value)));t.onChange([])},onCreateOption:(e,a=[])=>{var i;const n=e.trim().toLowerCase();if(!n)return;const l=null!==(i=t.value)&&void 0!==i?i:[];-1===l.findIndex((e=>e.trim().toLowerCase()===n))&&t.onChange([...l,e])},isClearable:!0,"data-test-subj":"sloEditTagsSelector"}))}})))))}function ae(e=[]){return e.map((e=>({label:e,value:e,"data-test-subj":`${e}Option`})))}var ie=a(8),ne=a.n(ie);function le(){const{http:e}=Object(m.a)().services,{isInitialLoading:t,isLoading:a,isError:i,isSuccess:n,isRefetching:l,data:r}=Object(u.useQuery)({queryKey:["fetchApmIndices"],queryFn:async({signal:t})=>{try{const i=(await e.get("/internal/apm/settings/apm-index-settings",{signal:t})).apmIndexSettings.find((e=>"metric"===e.configurationName));let n="";var a;return i&&(n=null!==(a=i.savedValue)&&void 0!==a?a:i.defaultValue),n}catch(e){}},refetchOnWindowFocus:!1});return{data:t?"":null!=r?r:"",isLoading:t||a||l,isSuccess:n,isError:i}}var re=a(58),oe=a(38);const se=({byId:e,byPatten:t,dataViewsList:a,adHocDataViews:i})=>{const n=[...null!=a?a:[],...i.map((e=>({id:e.id,title:e.getIndexPattern()})))];var l,r;return e?null===(l=n.find((t=>t.id===e)))||void 0===l?void 0:l.title:t?null===(r=n.find((e=>e.title===t)))||void 0===r?void 0:r.id:void 0},ue=({currentIndexPattern:e})=>{const{isLoading:t,data:a=[],refetch:i}=Object(oe.useFetchDataViews)(),{dataViews:n}=Object(m.a)().services,[r,o]=Object(l.useState)([]);return Object(l.useEffect)((()=>{if(!t&&!se({byPatten:e,dataViewsList:a,adHocDataViews:r})&&e){async function i(){const t=await n.create({title:e,allowNoIndex:!0},!0);t.getIndexPattern()===e&&o((e=>[...e,t]))}i()}}),[r,e,a,n,t]),{adHocDataViews:r,setAdHocDataViews:o,dataViewsList:a,isDataViewsLoading:t,refetch:i}},ce="indicator.params.dataViewId",de="indicator.params.index",me="indicator.params.timestampField";function pe({selectedDataView:e}){const{control:t,getFieldState:a,setValue:n,watch:s}=Object(o.useFormContext)(),{dataViews:u,dataViewFieldEditor:c}=Object(m.a)().services,{dataViewEditor:d}=Object(m.a)().services,p=s(de),f=s(ce),{dataViewsList:g,isDataViewsLoading:b,adHocDataViews:h,setAdHocDataViews:E,refetch:v}=ue({currentIndexPattern:p});return Object(l.useEffect)((()=>{const e=se({byPatten:p,dataViewsList:g,adHocDataViews:h});!f&&p&&!b&&e&&n(ce,e)}),[h,f,p,g,b,n]),r.a.createElement(i.EuiFormRow,{label:ge,isInvalid:a(de).invalid},r.a.createElement(o.Controller,{defaultValue:"",name:ce,control:t,rules:{required:!Boolean(p)},render:({field:t,fieldState:a})=>{var i;return r.a.createElement(re.DataViewPicker,{adHocDataViews:h,trigger:{label:p||fe,fullWidth:!0,color:a.invalid?"danger":"text",isLoading:b,"data-test-subj":"indexSelection"},onChangeDataView:e=>{n(de,se({byId:e,adHocDataViews:h,dataViewsList:g})),t.onChange(e),u.get(e).then((e=>{e.timeFieldName&&n(me,e.timeFieldName)}))},onAddField:f&&e?()=>{c.openEditor({ctx:{dataView:e},onSave:()=>{}})}:void 0,currentDataViewId:null!==(i=t.value)&&void 0!==i?i:se({byPatten:p,dataViewsList:g,adHocDataViews:h}),onDataViewCreated:()=>{d.openEditor({allowAdHocDataView:!0,onSave:e=>{e.isPersisted()?(v(),t.onChange(e.id),n(de,e.getIndexPattern())):(E([...h,e]),t.onChange(e.id),n(de,e.getIndexPattern())),e.timeFieldName&&n(me,e.timeFieldName)}})}})}}))}const fe=n.i18n.translate("xpack.slo.sloEdit.customKql.dataViewSelection.label",{defaultMessage:"Select a Data view"}),ge=n.i18n.translate("xpack.slo.sloEdit.customKql.indexSelection.label",{defaultMessage:"Index"});var be=a(81);function he(e,t){const a=e.map((e=>({label:e.name,value:e.name}))).sort(((e,t)=>String(e.label).localeCompare(t.label)));return t?a.filter(t):a}function Ee({indexFields:e,name:t,label:a,labelAppend:n,placeholder:s,isDisabled:u,isLoading:c,isRequired:d=!1,defaultValue:m=""}){const{control:p,getFieldState:f}=Object(o.useFormContext)(),[g,b]=Object(l.useState)(he(e));Object(l.useEffect)((()=>{b(he(e))}),[e]);const h=(e,t)=>{const a=[e].flat(),i=[];return t.forEach((e=>{a.includes(e.name)&&i.push({value:e.name,label:e.name})})),i};return r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:a,isInvalid:f(t).invalid,labelAppend:n},r.a.createElement(o.Controller,{defaultValue:[m].flat(),name:t,control:p,rules:{required:d&&!u},render:({field:t,fieldState:a})=>r.a.createElement(i.EuiComboBox,Z()({},t,{async:!0,placeholder:s,"aria-label":s,isClearable:!0,isDisabled:c||u,isInvalid:a.invalid,isLoading:c,onChange:e=>{if(e.length)return t.onChange(e.map((e=>e.value)));t.onChange(m)},options:g,onSearchChange:t=>{b(he(e,(({value:e})=>e.includes(t))))},selectedOptions:e&&t.value?h(t.value,e):[]}))})))}var ve=a(10),ye=a(33);function xe(e=""){try{return J.e.is(e)?Object(ye.toElasticsearchQuery)(Object(ye.fromKueryExpression)(e)):Object(ye.buildEsQuery)(void 0,{query:null==e?void 0:e.kqlQuery,language:"kuery"},null==e?void 0:e.filters)}catch(e){return[]}}const we=1e3,je=e=>{const t=[e].flat().filter((e=>!!e)),a=t.map((e=>`'${e}:'+doc['${e}'].value`)).join("+'|'+");return`if (${t.map((e=>`doc['${e}'].size() > 0`)).join(" && ")}) { emit(${a}) }`};var Te=a(157);function Se({titleAppend:e,customFilters:t}){const{watch:a}=Object(o.useFormContext)(),s=a("indicator.params.index"),c=a("indicator.params.filter"),d=a("indicator.params.timestampField"),p=a("groupBy"),{isLoading:f,data:g}=function(e,t="@timestamp",a,i){const{data:n}=Object(m.a)().services,r=JSON.stringify(i),[o,s]=Object(l.useState)(r),c=Object(l.useCallback)(Object(S.debounce)((e=>s(e)),800),[]);Object(l.useEffect)((()=>{o!==r&&c(r)}),[o,r,c]);const{isLoading:d,isError:p,isSuccess:f,data:g}=Object(u.useQuery)({queryKey:["fetchGroupByCardinality",e,t,a,i],queryFn:async({signal:l})=>{try{var r,o,s,u;const l=null!==(r=null===(o=(await Object(ve.lastValueFrom)(n.search.search({params:{index:e,body:{query:{bool:{filter:[{range:{[t]:{gte:"now-24h"}}},xe(i)]}},runtime_mappings:{group_combinations:{type:"keyword",script:je(a)}},aggs:{groupByCardinality:{cardinality:{field:"group_combinations"}}}}}}))).rawResponse)||void 0===o||null===(s=o.aggregations)||void 0===s||null===(u=s.groupByCardinality)||void 0===u?void 0:u.value)&&void 0!==r?r:0;return{cardinality:l,isHighCardinality:l>we}}catch(e){throw new Error(`Something went wrong. Error: ${e}`)}},retry:!1,refetchOnWindowFocus:!1,enabled:Boolean(e)&&Boolean(t)&&Boolean(a)&&![a].flat().includes(J.a)});return{isLoading:d,isError:p,isSuccess:f,data:g}}(s,d,p,t||c),b=[p].flat().filter((e=>!!e));if(b.includes(J.a)||!b.length)return null;if(f&&!g)return r.a.createElement(i.EuiCallOut,{size:"s",title:r.a.createElement(i.EuiLoadingSpinner,null)});if(!g)return null;const h=n.i18n.translate("xpack.slo.sloEdit.groupBy.cardinalityInfo",{defaultMessage:"Selected group by field {groupBy} will generate at least {card} SLO instances based on the last 24h sample data.",values:{card:g.cardinality,groupBy:Object(Te.a)(p)}});return r.a.createElement(i.EuiCallOut,{size:"s",iconType:g.isHighCardinality?"warning":"",color:g.isHighCardinality?"warning":"primary",title:e?r.a.createElement(r.a.Fragment,null,e," ",h):h})}function Oe({dataView:e,isLoading:t,filters:a}){var l,s;const{watch:u}=Object(o.useFormContext)(),c=null!==(l=null==e||null===(s=e.fields)||void 0===s?void 0:s.filter((e=>Ce(e))))&&void 0!==l?l:[],d=u("indicator.params.index");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,{indexFields:c,name:"groupBy",defaultValue:J.a,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.groupBy.label",{defaultMessage:"Group by"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.groupBy.tooltip",{defaultMessage:"Create individual SLOs for each value of the selected field."}),position:"top"})),labelAppend:r.a.createElement(ee,null),placeholder:n.i18n.translate("xpack.slo.sloEdit.groupBy.placeholder",{defaultMessage:"Select an optional field to group by"}),isLoading:!!d&&t,isDisabled:!d}),r.a.createElement(Se,{customFilters:a}))}const Ce=e=>{var t;const a=e.aggregatable,i="date"!==e.type,n=1===(null===(t=e.esTypes)||void 0===t?void 0:t.length)&&"keyword"===e.esTypes[0];return a&&i&&n};var Fe=a(9),_e=a.n(Fe);const Me=[];function ke({allowAllOption:e=!0,dataTestSubj:t,fieldName:a,label:s,name:c,placeholder:d,tooltip:p}){const{control:f,watch:g,getFieldState:b}=Object(o.useFormContext)(),h=g("indicator.params.service"),[E,v]=Object(l.useState)(""),{suggestions:y,isLoading:x}=function({fieldName:e,search:t="",serviceName:a=""}){const{http:i}=Object(m.a)().services,{isInitialLoading:n,isLoading:l,isError:r,isSuccess:o,isRefetching:s,data:c}=Object(u.useQuery)({queryKey:["fetchApmSuggestions",e,t,a],queryFn:async({signal:n})=>{try{const{terms:l=[]}=await i.get("/internal/apm/suggestions",{query:{fieldName:e,start:_e()().subtract(2,"days").toISOString(),end:_e()().toISOString(),fieldValue:t,...!!a&&"service.name"!==e&&{serviceName:a}},signal:n});return l}catch(e){}},refetchOnWindowFocus:!1,keepPreviousData:!0});return{suggestions:n?Me:null!=c?c:Me,isLoading:n||l||s,isSuccess:o,isError:r}}({fieldName:a,search:E,serviceName:h}),w=Object(S.debounce)((e=>v(e)),200),j=(e?[{value:J.a,label:n.i18n.translate("xpack.slo.sloEdit.fieldSelector.all",{defaultMessage:"All"})}]:[]).concat(function(e){return e.map((e=>({label:e,value:e}))).sort(((e,t)=>String(e.label).localeCompare(t.label)))}(y)),T="indicator.params.service"!==c&&!h;return r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:p?r.a.createElement("span",null,s," ",p):s,isInvalid:b(c).invalid},r.a.createElement(o.Controller,{defaultValue:"",name:c,control:f,rules:{required:!T},render:({field:e,fieldState:a})=>r.a.createElement(i.EuiComboBox,Z()({},e,{"aria-label":d,async:!0,"data-test-subj":t,isClearable:!0,isDisabled:T,isInvalid:a.invalid,isLoading:x,onChange:t=>{if(t.length)return e.onChange(t[0].value);e.onChange("")},onSearchChange:e=>w(e),options:j,placeholder:d,selectedOptions:e.value&&"string"==typeof e.value?[{value:e.value,label:e.value,"data-test-subj":`${t}SelectedValue`}]:[],singleSelection:!0}))})))}var Ie=a(40),De=a(35),Ae=a.n(De),Re=a(154),Le=a(153);function Ne({formatPattern:e,threshold:t,thresholdDirection:a,thresholdColor:s,thresholdMessage:u,ignoreMoreThan100:c,label:d,useGoodBadEventsChart:p,range:f}){const{watch:g,getFieldState:b,formState:E,getValues:v}=Object(o.useFormContext)(),{charts:y,uiSettings:x}=Object(m.a)().services,{isIndicatorSectionValid:w}=X({getFieldState:b,getValues:v,formState:E,watch:g}),[j,T]=Object(l.useState)({from:_e()().subtract(1,"hour").toDate(),to:new Date}),O=g("indicator"),{data:C,isLoading:F,isSuccess:_,isError:M}=function(e,t,a){const i=JSON.stringify(t),[n,r]=Object(l.useState)(i),o=Object(l.useCallback)(Object(S.debounce)((e=>r(e)),800),[]);return Object(l.useEffect)((()=>{n!==i&&o(i)}),[n,i,o]),Object(Le.a)({isValid:e,indicator:JSON.parse(n),range:a})}(w,O,null!=f?f:j),k=!c&&null!=(null==C?void 0:C.find((e=>e.sliValue&&e.sliValue>1))),I=y.theme.useChartsBaseTheme(),D=x.get("dateFormat"),A=null!=e?e:x.get("format:percent:defaultPattern"),R=(C||[]).map((e=>e.sliValue)),L=Object(S.max)(R),N=Object(S.min)(R),V={fit:!0,min:null!=t&&null!=N&&t<N?t:N||NaN,max:null!=t&&null!=L&&t>L?t:L||NaN},P=r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.dataPreviewChart.panelLabel",defaultMessage:"SLI preview"}))),r.a.createElement(i.EuiSpacer,{size:"s"}));if(!w)return r.a.createElement(i.EuiFlexItem,null,P,r.a.createElement(i.EuiFormRow,{fullWidth:!0},r.a.createElement(i.EuiPanel,{hasBorder:!0,hasShadow:!1,style:{minHeight:194}},r.a.createElement(i.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{minHeight:160}},r.a.createElement(i.EuiFlexItem,{grow:!1},n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.explanationMessage",{defaultMessage:"Fill the indicator fields to see visualisation of the current metrics"}))))));const B=null!=t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie.LineAnnotation,{id:"thresholdAnnotation",domainType:Ie.AnnotationDomainType.YDomain,dataValues:[{dataValue:t}],style:{line:{strokeWidth:2,stroke:s||"#000",opacity:1}}}),r.a.createElement(Ie.RectAnnotation,{dataValues:[{coordinates:"above"===a?{y0:t,y1:L}:{y0:N,y1:t},details:u}],id:"thresholdShade",style:{fill:s||"#000",opacity:.1}})),G=[{id:"color",type:"color"},{id:"label",type:"custom",truncate:!0,cell:({label:e})=>r.a.createElement("span",{className:"echTooltip__label"},e),style:{textAlign:"left"}},{id:"value",type:"custom",cell:({formattedValue:e})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"echTooltip__value",dir:"ltr"},e)),style:{textAlign:"right"}}];return r.a.createElement(i.EuiFlexItem,null,P,k&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiSpacer,{size:"xs"}),r.a.createElement(i.EuiCallOut,{size:"s",color:"warning",title:n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.moreThan100",{defaultMessage:"Some of the SLI values are more than 100%. That means good query is returning more results than total query."}),iconType:"warning"}),r.a.createElement(i.EuiSpacer,{size:"xs"})),r.a.createElement(i.EuiFormRow,{fullWidth:!0},r.a.createElement(i.EuiPanel,{hasBorder:!0,hasShadow:!1,style:{minHeight:194}},(F||M)&&r.a.createElement(i.EuiFlexGroup,{justifyContent:"center",alignItems:"center",style:{height:160}},r.a.createElement(i.EuiFlexItem,{grow:!1},F&&r.a.createElement(i.EuiLoadingChart,{size:"m",mono:!0}),M&&r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.errorMessage",{defaultMessage:"The current indicator settings are invalid"})))),_&&p&&r.a.createElement(Re.a,{data:C||[],bottomTitle:d||Ve,isLoading:F,annotation:B}),_&&!p&&r.a.createElement(Ie.Chart,{size:{height:160,width:"100%"}},r.a.createElement(Ie.Tooltip,{type:"vertical",body:({items:e})=>{const t=e[0],a=t.datum.events,i=[e[0]];return a&&(i.push({...t,formattedValue:a.good,value:a.good,label:n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.goodEvents",{defaultMessage:"Good events"})}),i.push({...t,value:a.total,formattedValue:a.total,label:n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.badEvents",{defaultMessage:"Total events"})})),r.a.createElement(Ie.TooltipTable,{columns:G,items:i})}}),r.a.createElement(Ie.Settings,{baseTheme:I,showLegend:!1,theme:[{lineSeriesStyle:{point:{visible:!1}}}],noResults:r.a.createElement(i.EuiIcon,{type:"visualizeApp",size:"l",color:"subdued",title:"no results"}),locale:n.i18n.getLocale()}),B,r.a.createElement(Ie.Axis,{id:"y-axis",title:n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.yTitle",{defaultMessage:"SLI"}),ticks:5,position:Ie.Position.Left,tickFormat:e=>Ae()(e).format(A),domain:V}),r.a.createElement(Ie.Axis,{id:"time",title:d||Ve,tickFormat:e=>_e()(e).format(D),position:Ie.Position.Bottom,timeAxisLayerCount:2,gridLine:{visible:!0},style:{tickLine:{size:0,padding:4,visible:!0},tickLabel:{alignment:{horizontal:Ie.Position.Left,vertical:Ie.Position.Bottom},padding:0,offset:{x:0,y:0}}}}),r.a.createElement(Ie.AreaSeries,{id:"SLI",xScaleType:Ie.ScaleType.Time,yScaleType:Ie.ScaleType.Linear,xAccessor:"date",yAccessors:["value"],data:(null!=C?C:[]).map((e=>({date:new Date(e.date).getTime(),value:e.sliValue&&e.sliValue>=0?e.sliValue:null,events:e.events})))})))))}const Ve=n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.xTitle",{defaultMessage:"Last hour"}),Pe=(e,t)=>{const{watch:a}=Object(o.useFormContext)(),i=a(e);if(!t||!i)return[];const n=t.getRuntimeMappings(),l=J.j.is(i)?i:void 0,r=Object.keys(n).filter((e=>((e,t)=>{if(!t)return!1;const a=t=>{const a=t.replace(/\s{2,}/g," ").trim();return a.includes(`${e} :`)||a.includes(`${e}:`)};if("string"==typeof t)return a(t);{const i=t.kqlQuery,n=i&&a(i),l=t.filters&&t.filters.some((t=>t.meta.field===e||t.meta.key===e));return n||l}})(e,l)));return null!=r?r:[]};function Be({dataView:e,name:t}){const a=Pe(t,e);return 0===a.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiCallOut,{title:n.i18n.translate("xpack.slo.runTimeFieldUsed.euiCallOut.runtimeFieldsBeingUsedLabel",{defaultMessage:"Runtime fields being used"}),color:"warning",iconType:"warning"},r.a.createElement("p",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.runTimeFieldUsed.p.theRuntimeFieldLabel",defaultMessage:"The runtime field(s) {fields} from kibana dataview are being used in the query. If you update the runtime field, the query will not be updated automatically. You must save the slo definition again to update the underlying transform query.",values:{fields:r.a.createElement("strong",null,a.join(", "))}}))))}var Ge=a(53);const He=Object(l.memo)((({isFlyoutOpen:e,name:t,label:a,dataView:n,required:l,tooltip:s,dataTestSubj:u,placeholder:c,range:d,setRange:p})=>{const{SearchBar:f}=Object(m.a)().services.unifiedSearch.ui,{control:g}=Object(o.useFormContext)();return r.a.createElement(o.Controller,{defaultValue:"",name:t,control:g,rules:{required:Boolean(l)&&Boolean(n),validate:e=>{try{if(!n)return;if("string"==typeof e){const t=Object(ye.fromKueryExpression)(e);Object(ye.toElasticsearchQuery)(t,n)}else if(J.f.is(e)){const t=Object(ye.fromKueryExpression)(e.kqlQuery);Object(ye.toElasticsearchQuery)(t,n)}}catch(e){return e.message}}},render:({field:t,fieldState:o})=>{var m,g,b;const h=(a,i)=>{var n;e&&i&&p(i),J.e.is(t.value)?t.onChange(String(null==a?void 0:a.query)):t.onChange({...null!==(n=t.value)&&void 0!==n?n:{},kqlQuery:String(null==a?void 0:a.query)})};return r.a.createElement(i.EuiFormRow,{label:s?r.a.createElement("span",null,a," ",s):a,labelAppend:l?void 0:r.a.createElement(ee,null),isInvalid:o.invalid,error:null===(m=o.error)||void 0===m?void 0:m.message,fullWidth:!0},r.a.createElement(We,null,r.a.createElement(f,{appName:Ge.observabilityAppId,dataTestSubj:u,indexPatterns:n?[n]:[],isDisabled:!n,placeholder:c,query:{query:J.e.is(t.value)?String(t.value):t.value.kqlQuery,language:"kuery"},onQueryChange:e?void 0:e=>h(e.query,e.dateRange),onQuerySubmit:e=>h(e.query,e.dateRange),onFiltersUpdated:e=>{var a;J.e.is(t.value)?t.onChange({filters:e,kqlQuery:t.value}):t.onChange({...null!==(a=t.value)&&void 0!==a?a:{},filters:e})},onSavedQueryUpdated:e=>{t.onChange({filters:e.attributes.filters,kqlQuery:String(e.attributes.query.query)})},dateRangeFrom:d.from,dateRangeTo:d.to,onTimeRangeChange:e=>{p(e.dateRange)},showDatePicker:e,showSubmitButton:e,showQueryInput:!0,disableQueryLanguageSwitcher:!0,onClearSavedQuery:()=>{},filters:J.e.is(t.value)?[]:null!==(g=null===(b=t.value)||void 0===b?void 0:b.filters)&&void 0!==g?g:[]})))}})})),We=N.a.div.withConfig({displayName:"Container",componentId:"sc-1bks2hq-0"})([".uniSearchBar{padding:0;}"]);var ze=a(39),qe=a.n(ze),Ue=a(84),$e=a.n(Ue),Ke=(a(233),a(54)),Qe=a(28);const Je=Object(l.createContext)(null),Xe=({children:e,getTriggerCompatibleActions:t})=>{const a=Object(l.useMemo)((()=>({getActions:e=>t(e.trigger.id,e).then((e=>Object(Ke.orderBy)(["order","id"],["asc","asc"],e)))})),[t]);return Object(Qe.jsx)(Je.Provider,{value:a},e)};var Ye=a(42);n.i18n.translate("cellActions.extraActionsAriaLabel",{defaultMessage:"Extra actions"}),n.i18n.translate("cellActions.showMoreActionsLabel",{defaultMessage:"More actions"}),n.i18n.translate("cellActions.actionsAriaLabel",{defaultMessage:"Actions"}),Ye.euiThemeVars.euiColorPrimaryText;var Ze=a(231),et=a.n(Ze);a(188);Ye.euiThemeVars.euiSizeS;const tt=[],at=({fields:e,getCellValue:t,triggerId:a,metadata:i,dataGridRef:n,disabledActionTypes:r=[]})=>{const[o,s]=Object(l.useState)(tt),u=Object(l.useMemo)((()=>{if(a&&null!=e&&e.length)return e.map((e=>({data:[{field:e}],trigger:{id:a},metadata:i})))}),[e,a,i]),{loading:c,value:d}=((e,t={})=>{const{getActions:a}=(()=>{const e=Object(l.useContext)(Je);if(!e)throw new Error("No CellActionsContext found. Please wrap the application with CellActionsProvider");return e})(),{error:i,...n}=et()((()=>{var i;return Promise.all(null!==(i=null==e?void 0:e.map((e=>a(e).then((e=>{var a;return null!==(a=((e,t=[])=>e?e.filter((({type:e})=>!(null!=t&&t.includes(e)))):void 0)(e,t.disabledActionTypes))&&void 0!==a?a:[]})))))&&void 0!==i?i:[])}),[e]);return(e=>{if(e)throw e})(i),n})(u,{disabledActionTypes:r});return Object(l.useEffect)((()=>{!c&&a&&null!=d&&d.length&&null!=e&&e.length&&d.length===e.length&&s(d.map(((l,r)=>l.map((l=>it({action:l,field:e[r],getCellValue:t,metadata:i,triggerId:a,dataGridRef:n}))))))}),[d,e,t,c,i,a,n]),o},it=({action:e,field:t,getCellValue:a,metadata:i,triggerId:n,dataGridRef:r})=>function({Component:o,rowIndex:s,isExpanded:u}){var c;const d=Object(l.useRef)(null),m=Object(l.useRef)(null),p=Object(l.useMemo)((()=>{const{name:e}=t,l=a(e,s);return{data:[{field:t,value:l}],trigger:{id:n},nodeRef:d,metadata:i}}),[s]),f=Object(l.useCallback)((async()=>{p.nodeRef.current=await nt({dataGrid:r.current,isExpanded:u,buttonRef:m}),e.execute(p)}),[p,u]);return Object(Qe.jsx)(o,{buttonRef:m,"aria-label":e.getDisplayName(p),title:e.getDisplayName(p),"data-test-subj":`dataGridColumnCellAction-${e.id}`,iconType:null!==(c=e.getIconType(p))&&void 0!==c?c:"",onClick:f},e.getDisplayName(p))},nt=({dataGrid:e,isExpanded:t,buttonRef:a})=>new Promise((i=>{const n=t?document.querySelector('div[role="gridcell"].euiDataGridRowCell--open'):lt(a.current);null==e||e.closeCellPopover(),setTimeout((()=>{var e;i(null!==(e=null==n?void 0:n.firstElementChild)&&void 0!==e?e:null)}))})),lt=e=>null==e?null:"DIV"===e.nodeName&&"gridcell"===e.getAttribute("role")?e:lt(e.parentElement);var rt=a(158),ot=a(68),st=a(238);const ut=(e,t)=>t?JSON.stringify(e):JSON.stringify(e,null,2),ct=Object(ot.createEscapeValue)({separator:",",quoteValues:!0,escapeFormulaValues:!0}),dt=e=>ct(e);var mt=a(96),pt=a(166),ft=a(62),gt=a(121);const bt=({children:e})=>Object(Qe.jsx)("span",{className:"unifiedDataTable__rowControl"},e),ht=n.i18n.translate("unifiedDataTable.copyEscapedValueWithFormulasToClipboardWarningText",{defaultMessage:"Values may contain formulas that are escaped."}),Et=n.i18n.translate("unifiedDataTable.copyFailedErrorText",{defaultMessage:"Unable to copy to clipboard in this browser"}),vt=({rowIndex:e,columnId:t,toastNotifications:a,valueToStringConverter:l})=>{const r=l(e,t),o=r.formattedString;if(!Object(i.copyToClipboard)(o))return a.addWarning({title:Et}),null;const s=n.i18n.translate("unifiedDataTable.copyValueToClipboard.toastTitle",{defaultMessage:"Copied to clipboard"});return r.withFormula?a.addWarning({title:s,text:ht}):a.addInfo({title:s}),o},yt=async({columnId:e,columnDisplayName:t,toastNotifications:a,valueToStringConverter:l,rowsCount:r})=>{const o={formattedString:dt(s=t),withFormula:Object(ot.cellHasFormulas)(s)};var s;let u=o.withFormula;const c=[...Array(r)].map(((t,a)=>{const i=l(a,e,{compatibleWithCSV:!0});return u=u||i.withFormula,i.formattedString})),d=`${o.formattedString}\n${c.join("\n")}`;let m;try{var p,f;await(null===(p=window.navigator)||void 0===p||null===(f=p.clipboard)||void 0===f?void 0:f.writeText(d)),m=!0}catch(e){m=Object(i.copyToClipboard)(d)}if(!m)return a.addWarning({title:Et}),null;const g=n.i18n.translate("unifiedDataTable.copyColumnValuesToClipboard.toastTitle",{defaultMessage:'Values of "{column}" column copied to clipboard',values:{column:t}});return u?a.addWarning({title:g,text:ht}):a.addInfo({title:g}),d},xt=({columnDisplayName:e,toastNotifications:t})=>{if(!Object(i.copyToClipboard)(e))return t.addWarning({title:Et}),null;const a=n.i18n.translate("unifiedDataTable.copyColumnNameToClipboard.toastTitle",{defaultMessage:"Copied to clipboard"});return t.addInfo({title:a}),e};function wt(e,t,a,i,n){const l=e.rows[t].flattened[a];n&&e.onFilter&&e.onFilter(n,l,i)}const jt=({Component:e,rowIndex:t,columnId:a},i)=>{const r=Object(l.useContext)(gt.a),o=n.i18n.translate("unifiedDataTable.grid.filterForAria",{defaultMessage:"Filter for this {value}",values:{value:a}});return Object(Qe.jsx)(e,{onClick:()=>{wt(r,t,a,"+",i)},iconType:"plusInCircle","aria-label":o,title:o,"data-test-subj":"filterForButton"},n.i18n.translate("unifiedDataTable.grid.filterFor",{defaultMessage:"Filter for"}))},Tt=({Component:e,rowIndex:t,columnId:a},i)=>{const r=Object(l.useContext)(gt.a),o=n.i18n.translate("unifiedDataTable.grid.filterOutAria",{defaultMessage:"Filter out this {value}",values:{value:a}});return Object(Qe.jsx)(e,{onClick:()=>{wt(r,t,a,"-",i)},iconType:"minusInCircle","aria-label":o,title:o,"data-test-subj":"filterOutButton"},n.i18n.translate("unifiedDataTable.grid.filterOut",{defaultMessage:"Filter out"}))};var St=a(97);function Ot(e){switch(e){case St.b.IP:case St.b.GEO_SHAPE:case St.b.NUMBER:return"numeric";case St.b.BOOLEAN:return"boolean";case St.b.STRING:return"string";case St.b.DATE:return"datetime";default:return mt.i}}function Ct({isPlainRecord:e,isFilterActive:t,rows:a,selectedDocs:n,setIsFilterActive:r,setSelectedDocs:o}){const[s,u]=Object(l.useState)(!1),c=Object(l.useCallback)((()=>[t?Object(Qe.jsx)(i.EuiContextMenuItem,{"data-test-subj":"dscGridShowAllDocuments",key:"showAllDocuments",icon:"eye",onClick:()=>{u(!1),r(!1)}},e?Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.showAllResults",defaultMessage:"Show all results"}):Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.showAllDocuments",defaultMessage:"Show all documents"})):Object(Qe.jsx)(i.EuiContextMenuItem,{"data-test-subj":"dscGridShowSelectedDocuments",key:"showSelectedDocuments",icon:"eye",onClick:()=>{u(!1),r(!0)}},e?Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.showSelectedResultsOnly",defaultMessage:"Show selected results only"}):Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.showSelectedDocumentsOnly",defaultMessage:"Show selected documents only"})),Object(Qe.jsx)(i.EuiCopy,{key:"copyJsonWrapper","data-test-subj":"dscGridCopySelectedDocumentsJSON",textToCopy:a?JSON.stringify(a.filter((e=>n.includes(e.id))).map((e=>e.raw))):""},(t=>Object(Qe.jsx)(i.EuiContextMenuItem,{key:"copyJSON",icon:"copyClipboard",onClick:t},e?Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.copyResultsToClipboardJSON",defaultMessage:"Copy results to clipboard (JSON)"}):Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.copyToClipboardJSON",defaultMessage:"Copy documents to clipboard (JSON)"})))),Object(Qe.jsx)(i.EuiContextMenuItem,{"data-test-subj":"dscGridClearSelectedDocuments",key:"clearSelection",icon:"cross",onClick:()=>{u(!1),o([]),r(!1)}},Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.clearSelection",defaultMessage:"Clear selection"}))]),[t,e,a,n,r,o]),d=Object(l.useCallback)((()=>u((e=>!e))),[]);return Object(Qe.jsx)(i.EuiPopover,{closePopover:()=>u(!1),isOpen:s,panelPaddingSize:"none",button:Object(Qe.jsx)(i.EuiDataGridToolbarControl,{iconType:"documents",onClick:d,"data-selected-documents":n.length,"data-test-subj":"unifiedDataTableSelectionBtn",isSelected:t,badgeContent:n.length},e?Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.selectedResultsButtonLabel",defaultMessage:"Selected",description:"Selected results"}):Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.selectedRowsButtonLabel",defaultMessage:"Selected",description:"Selected documents"}))},s&&Object(Qe.jsx)(i.EuiContextMenuPanel,{items:c(),"data-test-subj":"unifiedDataTableSelectionMenu"}))}const Ft=({selectedDocs:e,setIsCompareActive:t})=>Object(Qe.jsx)(i.EuiDataGridToolbarControl,{iconType:"diff",badgeContent:e.length,"data-test-subj":"unifiedDataTableCompareSelectedDocuments",onClick:()=>{t(!0)}},Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.compareSelectedRowsButtonLabel",defaultMessage:"Compare"}));function _t({label:e,onCopy:t,dataTestSubj:a}){return{size:"xs",label:e,iconType:"copyClipboard",iconProps:{size:"m"},onClick:t,"data-test-subj":a}}function Mt({columnDisplayName:e,toastNotifications:t}){return _t({label:Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.grid.copyColumnNameToClipBoardButton",defaultMessage:"Copy name"}),onCopy:()=>xt({columnDisplayName:e,toastNotifications:t}),dataTestSubj:"gridCopyColumnNameToClipBoardButton"})}function kt({columnId:e,columnDisplayName:t,toastNotifications:a,rowsCount:i,valueToStringConverter:n}){return _t({label:Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.grid.copyColumnValuesToClipBoardButton",defaultMessage:"Copy column"}),onCopy:()=>yt({columnId:e,columnDisplayName:t,toastNotifications:a,rowsCount:i,valueToStringConverter:n}),dataTestSubj:"gridCopyColumnValuesToClipBoardButton"})}var It=a(213),Dt=a(351),At=a(190),Rt=({headerRowHeight:e,children:t})=>{const a=Object(Qe.css)("overflow-wrap:anywhere;white-space:normal;word-break:break-all;line-height:",Ye.euiThemeVars.euiSize,";text-align:left;.euiDataGridHeaderCell--numeric &{float:right;}","");return e?Object(Qe.jsx)(i.EuiTextBlockTruncate,{lines:e,css:a},t):Object(Qe.jsx)("div",{css:a},t)};const Lt=({columnDisplayName:e,showColumnTokens:t,columnName:a,columnsMeta:i,dataView:n,headerRowHeight:l})=>Object(Qe.jsx)(Rt,{headerRowHeight:l},t&&Object(Qe.jsx)(Nt,{columnName:a,columnsMeta:i,dataView:n}),Object(Qe.jsx)(Vt,{columnDisplayName:e})),Nt=e=>{const{columnName:t,columnsMeta:a,dataView:i}=e,n=Object(l.useMemo)((()=>function({dataView:e,columnName:t,columnsMeta:a}){if(!t||"_source"===t)return null;if(a){const e=(i=a[t])&&i.type?Object(It.a)({name:"",type:i.type,esTypes:i.esType?[i.esType]:[]}):null;return e&&"unknown"!==e?Object(Qe.jsx)(Dt.a,{type:e,css:Pt}):null}var i;const n=e.getFieldByName(t);return n?Object(Qe.jsx)(Dt.a,Z()({},Object(At.a)(n),{css:Pt})):function(e,t){const a=new RegExp(Object(Ke.escapeRegExp)(e)+"(\\.|$)");return!t.fields.getByName(e)&&!!t.fields.getAll().find((e=>{var t;const i=Object(ye.getDataViewFieldSubtypeNested)(e);return!!i&&a.test(null!==(t=null==i?void 0:i.nested.path)&&void 0!==t?t:"")}))}(t,e)?Object(Qe.jsx)(Dt.a,{type:"nested",css:Pt}):null}({columnName:t,columnsMeta:a,dataView:i})),[t,a,i]);return n?Object(Qe.jsx)("span",{css:Object(Qe.css)({paddingRight:Ye.euiThemeVars.euiSizeXS},"","")},n):null},Vt=({columnDisplayName:e})=>Object(Qe.jsx)("span",{"data-test-subj":"unifiedDataTableColumnTitle"},e),Pt={verticalAlign:"bottom"};var Bt={name:"1flj9lk",styles:"text-align:left"};const Gt=({dataView:e,dataViewField:t,headerRowHeight:a=1,columnLabel:l})=>{var r;const o=l||(null!==(r=null==t?void 0:t.customLabel)&&void 0!==r?r:e.timeFieldName),s=n.i18n.translate("unifiedDataTable.tableHeader.timeFieldIconTooltipAriaLabel",{defaultMessage:"{timeFieldName} - this field represents the time that events occurred.",values:{timeFieldName:o}}),u=n.i18n.translate("unifiedDataTable.tableHeader.timeFieldIconTooltip",{defaultMessage:"This field represents the time that events occurred."});return Object(Qe.jsx)("div",{"aria-label":s,css:Bt},Object(Qe.jsx)(Rt,{headerRowHeight:a},o," ",Object(Qe.jsx)(i.EuiIconTip,{type:"clock",content:u})))},Ht=r.a.memo(Lt),Wt=r.a.memo(Gt),zt="openDetails",qt="select",Ut={id:zt,width:26,headerCellRender:()=>Object(Qe.jsx)(i.EuiScreenReaderOnly,null,Object(Qe.jsx)("span",null,n.i18n.translate("unifiedDataTable.controlColumnHeader",{defaultMessage:"Control column"}))),rowCellRender:({rowIndex:e,setCellProps:t})=>{const a=Object(l.useRef)(null),[r,o]=Object(l.useState)(!1),{expanded:s,setExpanded:u,rows:c,isDarkMode:d,componentsTourSteps:m}=Object(l.useContext)(gt.a),p=c[e],f=m?m.expandButton:void 0;Object(l.useEffect)((()=>{p.isAnchor?t({className:"unifiedDataTable__cell--highlight"}):s&&p&&s.id===p.id?t({className:"unifiedDataTable__cell--expanded"}):t({style:void 0})}),[s,p,t,d]);const g=p===s,b=n.i18n.translate("unifiedDataTable.grid.viewDoc",{defaultMessage:"Toggle dialog with details"}),h=p.isAnchor?"docTableExpandToggleColumnAnchor":"docTableExpandToggleColumn";return Object(l.useEffect)((()=>{!g&&r&&(o(!1),setTimeout((()=>{var e;null===(e=a.current)||void 0===e||e.hideToolTip()}),100))}),[g,o,r]),u?Object(Qe.jsx)(bt,null,Object(Qe.jsx)(i.EuiToolTip,{content:b,delay:"long",ref:a},Object(Qe.jsx)(i.EuiButtonIcon,{id:0===e?f:void 0,size:"xs",iconSize:"s","aria-label":b,"data-test-subj":h,onClick:()=>{var e;const t=g?void 0:p;null===(e=a.current)||void 0===e||e.hideToolTip(),o(Boolean(t)),null==u||u(t)},color:g?"primary":"text",iconType:g?"minimize":"expand",isSelected:g}))):null}},$t={id:qt,width:24,rowCellRender:({rowIndex:e,setCellProps:t})=>{const{euiTheme:a}=Object(i.useEuiTheme)(),{selectedDocs:r,expanded:o,rows:s,isDarkMode:u,setSelectedDocs:c}=Object(l.useContext)(gt.a),d=Object(l.useMemo)((()=>s[e]),[s,e]),m=Object(l.useMemo)((()=>r.includes(d.id)),[r,d.id]),p=n.i18n.translate("unifiedDataTable.grid.selectDoc",{defaultMessage:"Select document ''{rowNumber}''",values:{rowNumber:e+1}});return Object(l.useEffect)((()=>{o&&d&&o.id===d.id?t({className:"unifiedDataTable__cell--selected"}):t({style:void 0})}),[o,d,t,u]),Object(Qe.jsx)(i.EuiFlexGroup,{responsive:!1,direction:"column",justifyContent:"center",className:"unifiedDataTable__rowControl",css:Object(Qe.css)("padding-block:",a.size.xs,";padding-left:",a.size.xs,";","")},Object(Qe.jsx)(i.EuiFlexItem,{grow:!1},Object(Qe.jsx)(i.EuiCheckbox,{id:d.id,"aria-label":p,checked:m,"data-test-subj":`dscGridSelectDoc-${d.id}`,onChange:()=>{if(m){const e=r.filter((e=>e!==d.id));c(e)}else c([...r,d.id])}})))},headerCellRender:()=>Object(Qe.jsx)(i.EuiScreenReaderOnly,null,Object(Qe.jsx)("span",null,n.i18n.translate("unifiedDataTable.selectColumnHeader",{defaultMessage:"Select column"})))};function Kt({columns:e,columnsCellActions:t,rowsCount:a,settings:i,dataView:l,defaultColumns:r,isSortEnabled:o,isPlainRecord:s,services:u,hasEditDataViewPermission:c,valueToStringConverter:d,onFilter:m,editField:p,visibleCellActions:f,columnsMeta:g,showColumnTokens:b,headerRowHeightLines:E,customGridColumnsConfiguration:v}){const y=e=>{var t,a,n;return null!==(t=null==i||null===(a=i.columns)||void 0===a||null===(n=a[e])||void 0===n?void 0:n.width)&&void 0!==t?t:0},x=(e=>{if(e!==mt.d.auto)return e===mt.d.single?1:e})(E),w=e.length;return e.map(((e,E)=>{var j,T;return function({numberOfColumns:e,columnName:t,columnWidth:a=0,dataView:i,defaultColumns:l,isSortEnabled:r,isPlainRecord:o,toastNotifications:s,hasEditDataViewPermission:u,valueToStringConverter:c,rowsCount:d,onFilter:m,editField:p,columnCellActions:f,visibleCellActions:g,columnsMeta:b,showColumnTokens:E,headerRowHeight:v,customGridColumnsConfiguration:y,columnDisplay:x}){var w,j,T,S,O;const C=o?new ft.DataViewField({name:t,type:null!==(w=null==b||null===(j=b[t])||void 0===j?void 0:j.type)&&void 0!==w?w:"unknown",esTypes:null!=b&&null!==(T=b[t])&&void 0!==T&&T.esType?[b[t].esType]:void 0,searchable:!0,aggregatable:!1}):i.getFieldByName(t),F=p&&C&&(({hasEditDataViewPermission:e,dataView:t,field:a,editField:i})=>{if("_source"===a.name)return null;const{canEdit:n}=((e,t)=>{var a;const i=Boolean(null===(a=e.getFieldByName(t.name))||void 0===a?void 0:a.runtimeField);return{canEdit:!("unknown"===t.type||"unknown_selected"===t.type)||i,canDelete:i}})(t,a),l=e()||!t.isPersisted();return n&&l?{size:"xs",label:Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.grid.editFieldButton",defaultMessage:"Edit data view field"}),iconType:"pencil",iconProps:{size:"m"},onClick:()=>{i(a.name)},"data-test-subj":"gridEditFieldButton"}:null})({hasEditDataViewPermission:u,dataView:i,field:C,editField:p}),_=((e,t,a)=>a||("_source"===e?n.i18n.translate("unifiedDataTable.grid.documentHeader",{defaultMessage:"Document"}):t||e))(t,null==C?void 0:C.displayName,x);let M;M=null!=f&&f.length?f:C?function(e,t,a,i){return[...i&&e.filterable?[({Component:t,rowIndex:a,columnId:i})=>jt({Component:t,rowIndex:a,columnId:i},e),({Component:t,rowIndex:a,columnId:i})=>Tt({Component:t,rowIndex:a,columnId:i},e)]:[],({Component:e,rowIndex:i,columnId:l})=>function({Component:e,rowIndex:t,columnId:a},i,l){const r=n.i18n.translate("unifiedDataTable.grid.copyClipboardButtonTitle",{defaultMessage:"Copy value of {column}",values:{column:a}});return Object(Qe.jsx)(e,{onClick:()=>{vt({rowIndex:t,columnId:a,valueToStringConverter:l,toastNotifications:i})},iconType:"copyClipboard","aria-label":r,title:r,"data-test-subj":"copyClipboardButton"},n.i18n.translate("unifiedDataTable.grid.copyCellValueButton",{defaultMessage:"Copy value"}))}({Component:e,rowIndex:i,columnId:l},t,a)]}(C,s,c,m):[];const k={id:t,schema:Ot(null!==(S=null==b||null===(O=b[t])||void 0===O?void 0:O.type)&&void 0!==S?S:null==C?void 0:C.type),isSortable:r&&(o&&"_source"!==t||!0===(null==C?void 0:C.sortable)),display:E||1!==v?Object(Qe.jsx)(Ht,{dataView:i,columnName:t,columnDisplayName:_,columnsMeta:b,showColumnTokens:E,headerRowHeight:v}):void 0,displayAsText:_,actions:{showHide:!l&&t!==i.timeFieldName&&{label:n.i18n.translate("unifiedDataTable.removeColumnLabel",{defaultMessage:"Remove column"}),iconType:"cross"},showMoveLeft:!l,showMoveRight:!l,additional:[..."__source"===t?[]:[Mt({columnDisplayName:_,toastNotifications:s})],kt({columnId:t,columnDisplayName:_,toastNotifications:s,rowsCount:d,valueToStringConverter:c}),...F?[F]:[]]},cellActions:M,visibleCellActions:g};return k.id===i.timeFieldName&&(k.display=Object(Qe.jsx)(Wt,{dataView:i,dataViewField:C,headerRowHeight:v,columnLabel:x}),e>1&&(k.initialWidth=mt.h)),a>0&&(k.initialWidth=Number(a)),y&&y[k.id]?y[k.id]({column:k,headerRowHeight:v}):k}({numberOfColumns:w,columnName:e,columnCellActions:null==t?void 0:t[E],columnWidth:y(e),dataView:l,defaultColumns:r,isSortEnabled:o,isPlainRecord:s,toastNotifications:u.toastNotifications,hasEditDataViewPermission:c,valueToStringConverter:d,rowsCount:a,onFilter:m,editField:p,visibleCellActions:f,columnsMeta:g,showColumnTokens:b,headerRowHeight:x,customGridColumnsConfiguration:v,columnDisplay:null==i||null===(j=i.columns)||void 0===j||null===(T=j[e])||void 0===T?void 0:T.display})}))}const Qt=e=>{const{isLoadingMore:t,rowCount:a,sampleSize:r,pageIndex:o,pageCount:s,totalHits:u=0,onFetchMoreRecords:c,data:d}=e,m=d.query.timefilter.timefilter,[p,f]=Object(l.useState)(m.getRefreshInterval());Object(l.useEffect)((()=>{const e=m.getRefreshIntervalUpdate$().subscribe((()=>{f(m.getRefreshInterval())}));return()=>e.unsubscribe()}),[m,f]);const g=Boolean(p&&!1===p.pause&&p.value>0),{euiTheme:b}=Object(i.useEuiTheme)();return o===s-1&&a<u?c&&"boolean"==typeof t?a<=mt.c-r?Object(Qe.jsx)(Jt,Z()({hasButton:!0},e),Object(Qe.jsx)(i.EuiToolTip,{content:g?n.i18n.translate("unifiedDataTable.gridSampleSize.fetchMoreLinkDisabledTooltip",{defaultMessage:"To load more the refresh interval needs to be disabled first"}):void 0},Object(Qe.jsx)(i.EuiButtonEmpty,{disabled:g,isLoading:t,flush:"both","data-test-subj":"dscGridSampleSizeFetchMoreLink",onClick:c,css:Object(Qe.css)("margin-left:",b.size.xs,";","")},Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.gridSampleSize.fetchMoreLinkLabel",defaultMessage:"Load more"})))):Object(Qe.jsx)(Jt,Z()({hasButton:!1},e)):a<u?Object(Qe.jsx)(Jt,Z()({hasButton:!1},e)):null:null},Jt=({hasButton:e,rowCount:t,children:a,fieldFormats:n})=>{const{euiTheme:l}=Object(i.useEuiTheme)(),r=n.getDefaultInstance(St.b.NUMBER,[St.a.INTEGER]).convert(t);return Object(Qe.jsx)("p",{"data-test-subj":"unifiedDataTableFooter",css:Object(Qe.css)("display:flex;flex-direction:row;align-items:center;justify-content:center;flex-shrink:0;background-color:",l.colors.lightestShade,";padding:",e?`0 ${l.size.base}`:`${l.size.s} ${l.size.base}`,";margin-top:",l.size.xs,";text-align:center;","")},Object(Qe.jsx)("span",null,e?Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.gridSampleSize.lastPageDescription",defaultMessage:"Search results are limited to {rowCount} documents.",values:{rowCount:r}}):Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.gridSampleSize.limitDescription",defaultMessage:"Search results are limited to {sampleSize} documents. Add more search terms to narrow your search.",values:{sampleSize:r}})),a)};let Xt=function(e){return e.auto="auto",e.single="single",e.custom="custom",e}({});const Yt=Object(i.htmlIdGenerator)()();function Zt({label:e,rowHeight:t,rowHeightLines:a,compressed:l,onChangeRowHeight:o,onChangeRowHeightLines:s,maxRowHeight:u,"data-test-subj":c}){const d=[{id:`${Yt}${Xt.single}`,label:n.i18n.translate("unifiedDataTable.rowHeight.single",{defaultMessage:"Single"}),"data-test-subj":`${c}_rowHeight_${Xt.single}`},{id:`${Yt}${Xt.auto}`,label:n.i18n.translate("unifiedDataTable.rowHeight.auto",{defaultMessage:"Auto fit"}),"data-test-subj":`${c}_rowHeight_${Xt.auto}`},{id:`${Yt}${Xt.custom}`,label:n.i18n.translate("unifiedDataTable.rowHeight.custom",{defaultMessage:"Custom"}),"data-test-subj":`${c}_rowHeight_${Xt.custom}`}];return Object(Qe.jsx)(r.a.Fragment,null,Object(Qe.jsx)(i.EuiFormRow,{label:e,display:"columnCompressed","data-test-subj":c},Object(Qe.jsx)(r.a.Fragment,null,Object(Qe.jsx)(i.EuiButtonGroup,{isFullWidth:!0,legend:e,buttonSize:"compressed",options:d,idSelected:`${Yt}${null!=t?t:Xt.single}`,onChange:e=>{const t=e.replace(Yt,"");o(t)},"data-test-subj":`${c}_rowHeightButtonGroup`}),t===Xt.custom?Object(Qe.jsx)(i.EuiRange,{compressed:!0,fullWidth:!0,showInput:!0,min:1,max:null!=u?u:20,step:1,value:null!=a?a:2,onChange:e=>{const t=Number(e.currentTarget.value);s(t)},"data-test-subj":`${c}_lineCountNumber`,css:Object(Qe.css)({marginTop:l?Ye.euiThemeVars.euiSizeXS:Ye.euiThemeVars.euiSizeM},"","")}):null)))}const ea=()=>{},ta=({rowHeight:e,rowHeightLines:t,onChangeRowHeight:a,onChangeRowHeightLines:o,headerRowHeight:s,headerRowHeightLines:u,onChangeHeaderRowHeight:c,onChangeHeaderRowHeightLines:d,maxAllowedSampleSize:m=1e3,sampleSize:p,onChangeSampleSize:f})=>{const[g,b]=Object(l.useState)(p),h=Math.max(Math.min(10,p),1),E=Object(l.useMemo)((()=>Object(S.debounce)(null!=f?f:ea,300,{leading:!1,trailing:!0})),[f]),v=Object(l.useCallback)((e=>{var t;if(!e.target.value)return void b("");const a=null!==(t=parseInt(e.target.value,10))&&void 0!==t?t:10;a>=1&&(b(a),a<=m&&E(a))}),[m,b,E]),y=n.i18n.translate("unifiedDataTable.sampleSizeSettings.sampleSizeLabel",{defaultMessage:"Sample size"});Object(l.useEffect)((()=>{b(p)}),[p,b]);const x=[];return c&&d&&x.push(Object(Qe.jsx)(Zt,{rowHeight:s,rowHeightLines:u,label:n.i18n.translate("unifiedDataTable.headerRowHeightLabel",{defaultMessage:"Header row height"}),onChangeRowHeight:c,onChangeRowHeightLines:d,"data-test-subj":"unifiedDataTableHeaderRowHeightSettings",maxRowHeight:5})),a&&o&&x.push(Object(Qe.jsx)(Zt,{rowHeight:e,rowHeightLines:t,label:n.i18n.translate("unifiedDataTable.rowHeightLabel",{defaultMessage:"Cell row height"}),onChangeRowHeight:a,onChangeRowHeightLines:o,"data-test-subj":"unifiedDataTableRowHeightSettings"})),f&&x.push(Object(Qe.jsx)(i.EuiFormRow,{label:y,display:"columnCompressed"},Object(Qe.jsx)(i.EuiRange,{compressed:!0,fullWidth:!0,min:h,max:m,step:10===h?10:1,showInput:!0,value:g,onChange:v,"data-test-subj":"unifiedDataTableSampleSizeInput"}))),Object(Qe.jsx)(r.a.Fragment,null,x.map(((e,t)=>Object(Qe.jsx)(r.a.Fragment,{key:`setting-${t}`},t>0&&Object(Qe.jsx)(i.EuiHorizontalRule,{margin:"s"}),e))))},aa=e=>"number"==typeof e&&!Number.isNaN(e)&&Math.floor(e)===e&&e>=-1&&e<=20,ia=(e,t)=>`${e}:${t}`,na=(e,t,a,i,n)=>{a.set(ia(i,n),{previousRowHeight:e,previousConfigRowHeight:t})},la=({storage:e,consumer:t,key:a,configRowHeight:i,rowHeightState:n,onUpdateRowHeight:r})=>{const o=Object(l.useMemo)((()=>{const l=((e,t,a)=>{const i=e.get(ia(t,a));return"object"==typeof i&&null!==i&&aa(i.previousRowHeight)&&aa(i.previousConfigRowHeight)?i:null})(e,t,a);let r;var o;return r=aa(n)?n:null!==(o=l)&&i===o.previousConfigRowHeight?l.previousRowHeight:i,r}),[i,t,a,n,e]),s=Object(l.useMemo)((()=>{switch(o){case mt.d.auto:return Xt.auto;case mt.d.single:return Xt.single;default:return Xt.custom}}),[o]),u=Object(l.useCallback)((n=>{let l;switch(n){case Xt.auto:l=mt.d.auto;break;case Xt.single:l=mt.d.single;break;default:l=i}na(l,i,e,t,a),null==r||r(l)}),[i,t,a,r,e]),c=Object(l.useCallback)((n=>{na(n,i,e,t,a),null==r||r(n)}),[i,t,a,r,e]);return{rowHeight:s,rowHeightLines:o,onChangeRowHeight:r?u:void 0,onChangeRowHeightLines:r?c:void 0}};var ra=a(44),oa={name:"1azakc",styles:"text-align:center"};const sa=()=>{const e=oa;return Object(Qe.jsx)("div",{css:e},Object(Qe.jsx)(i.EuiLoadingSpinner,null))},ua=(e,t=Object(Qe.jsx)(sa,null))=>r.a.forwardRef(((a,i)=>Object(Qe.jsx)(ra.KibanaErrorBoundaryProvider,{analytics:a.analytics},Object(Qe.jsx)(ra.KibanaErrorBoundary,null,Object(Qe.jsx)(l.Suspense,{fallback:t},Object(Qe.jsx)(e,Z()({},a,{ref:i}))))))),ca=ua(Object(l.lazy)((()=>a.e(14).then(a.bind(null,362))))),da="unifiedDataTable__fullScreen";let ma=function(e){return e.loading="loading",e.loadingMore="loadingMore",e.loaded="loaded",e}({});const pa={darkMode:!1},fa=r.a.memo(i.EuiDataGrid),ga=["openDetails","select"],ba=({ariaLabelledBy:e,columns:t,columnsMeta:a,showColumnTokens:n,configHeaderRowHeight:o,headerRowHeightState:s,onUpdateHeaderRowHeight:u,controlColumnIds:c=ga,dataView:d,loadingState:m,onFilter:p,onResize:f,onSetColumns:g,onSort:b,rows:E,searchDescription:v,searchTitle:y,settings:x,showTimeCol:w,showFullScreenButton:j=!0,sort:T,useNewFieldsApi:O,isSortEnabled:C=!0,isPaginationEnabled:F=!0,cellActionsTriggerId:_,className:M,rowHeightState:k,onUpdateRowHeight:I,maxAllowedSampleSize:D,sampleSizeState:A,onUpdateSampleSize:R,isPlainRecord:L=!1,rowsPerPageState:N,onUpdateRowsPerPage:V,onFieldEdited:P,services:B,renderCustomGridBody:G,renderCustomToolbar:H,trailingControlColumns:W,totalHits:z,onFetchMoreRecords:q,renderDocumentView:U,setExpandedDoc:$,expandedDoc:K,configRowHeight:Q,showMultiFields:J=!0,maxDocFieldsDisplayed:X=50,externalControlColumns:Y,externalAdditionalControls:Z,rowsPerPageOptions:ee,visibleCellActions:te,externalCustomRenderers:ae,additionalFieldGroups:ie,consumer:ne="discover",componentsTourSteps:le,gridStyleOverride:re,rowLineHeightOverride:oe,cellActionsMetadata:se,customGridColumnsConfiguration:ue,customControlColumnsConfiguration:ce,enableComparisonMode:de,cellContext:me,renderCellPopover:pe})=>{var fe,ge,be,he;const{fieldFormats:Ee,toastNotifications:xe,dataViewFieldEditor:we,uiSettings:je,storage:Te,data:Se}=B,{darkMode:Oe}=$e()(null!==(fe=null===(ge=B.theme)||void 0===ge?void 0:ge.theme$)&&void 0!==fe?fe:Object(ve.of)(pa),pa),Ce=Object(l.useRef)(null),[Fe,_e]=Object(l.useState)([]),[Me,ke]=Object(l.useState)(!1),[Ie,De]=Object(l.useState)(!1),Ae=Object(rt.a)(t,d),Re=Ae.includes("_source"),Le=Object(l.useMemo)((()=>{var e;return new Map(null!==(e=null==E?void 0:E.map((e=>[e.id,e])))&&void 0!==e?e:[])}),[E]),Ne=Object(l.useCallback)((e=>Le.get(e)),[Le]),Ve=Object(l.useMemo)((()=>{if(!Fe.length||null==E||!E.length)return[];const e=Fe.filter((e=>!!Ne(e)));return 0===e.length&&Me&&ke(!1),e}),[Fe,null==E?void 0:E.length,Me,Ne]),Pe=Object(l.useMemo)((()=>{if(!E)return[];if(!Me||0===Ve.length)return E;const e=E.filter((e=>Ve.includes(e.id)));return e.length?e:E}),[E,Ve,Me]),Be=Object(l.useCallback)(((e,t,a)=>(({rowIndex:e,rows:t,columnId:a,dataView:i,fieldFormats:n,options:l})=>{var r,o;if(!t[e])return{formattedString:"",withFormula:!1};const s=t[e].flattened,u=null==s?void 0:s[a],c=i.fields.getByName(a),d=Array.isArray(u)?u:[u],m=null!==(r=null==l?void 0:l.compatibleWithCSV)&&void 0!==r&&r,p=null!==(o=null==l?void 0:l.compatibleWithCSV)&&void 0!==o&&o;if("_source"===(null==c?void 0:c.type))return{formattedString:ut(s,m),withFormula:!1};let f=!1;return{formattedString:d.map((a=>{const l=Object(st.a)(a,t[e].raw,n,i,c,"text",{skipFormattingInStringifiedJSON:m});return"string"==typeof l?(f=f||Object(ot.cellHasFormulas)(l),p?dt(l):l):ut(l,m)||""})).join(", "),withFormula:f}})({rowIndex:e,rows:Pe,dataView:d,columnId:t,fieldFormats:Ee,options:a})),[Pe,d,Ee]),Ge=Object(l.useMemo)((()=>({expanded:K,setExpanded:$,rows:Pe,onFilter:p,dataView:d,isDarkMode:Oe,selectedDocs:Ve,setSelectedDocs:e=>{_e(e),Me&&0===e.length&&ke(!1)},valueToStringConverter:Be,componentsTourSteps:le,isPlainRecord:L})),[le,Oe,d,L,Pe,K,Me,p,$,Ve,Be]),He="number"==typeof N&&N>0?N:mt.a,[We,ze]=Object(l.useState)({pageIndex:0,pageSize:He}),Ue=Object(l.useMemo)((()=>Pe?Pe.length:0),[Pe]),Ke=Object(l.useMemo)((()=>Math.ceil(Ue/We.pageSize)),[Ue,We]),Je=Object(l.useMemo)((()=>{return F?{onChangeItemsPerPage:e=>{null==V||V(e)},onChangePage:e=>ze((t=>({...t,pageIndex:e}))),pageIndex:We.pageIndex>Ke-1?0:We.pageIndex,pageSize:We.pageSize,pageSizeOptions:null!=ee?ee:(e=We.pageSize,Object(S.sortBy)(Object(S.uniq)("number"==typeof e&&e>0?[...mt.e,e]:mt.e)))}:void 0;var e}),[F,We.pageIndex,We.pageSize,Ke,ee,V]);Object(l.useEffect)((()=>{ze((e=>e.pageSize===He?e:{...e,pageSize:He}))}),[He,ze]);const Xe=Object(l.useMemo)((()=>((e,t,a)=>{if(a)return()=>!0;const i=new Map;return e.forEach((e=>{i.set(e,((e,t)=>{var a;const i=t.fields.getByName(e);if(!i)return{show:!0};const n=Object(ye.getDataViewFieldSubtypeMulti)(i.spec);return{show:!Boolean(null==n?void 0:n.multi),parentName:null==n||null===(a=n.multi)||void 0===a?void 0:a.parent}})(e,t))})),e=>{const t=i.get(e);return!t||t.show||!!t.parentName&&!i.has(t.parentName)}})(d.fields.getAll().map((e=>e.name)),d,J)),[d,J]),Ye=Object(l.useMemo)((()=>Object(pt.b)({dataView:d,rows:Pe,useNewFieldsApi:O,shouldShowFieldHandler:Xe,closePopover:()=>{var e;return null===(e=Ce.current)||void 0===e?void 0:e.closeCellPopover()},fieldFormats:Ee,maxEntries:X,externalCustomRenderers:ae,isPlainRecord:L})),[d,Pe,O,Xe,X,Ee,ae,L]),Ze=Object(l.useMemo)((()=>null!=pe?pe:(()=>{const e=Object(l.memo)((function(e){const{setCellPopoverProps:t,DefaultCellPopover:a}=e;return Object(l.useEffect)((()=>{t({panelClassName:"unifiedDataTable__cellPopover"})}),[t]),Object(Qe.jsx)(a,e)}));return t=>Object(Qe.jsx)(e,t)})()),[pe]),et=Object(l.useMemo)((()=>Object(i.htmlIdGenerator)()()),[]),tt=Object(l.useRef)();Object(l.useEffect)((()=>()=>{null!=tt&&tt.current&&(null==tt||tt.current())}),[]);const it=Object(l.useMemo)((()=>P?async e=>{var t;tt.current=P&&await(null==B||null===(t=B.dataViewFieldEditor)||void 0===t?void 0:t.openEditor({ctx:{dataView:d},fieldName:e,onSave:async()=>{await P()}}))}:void 0),[d,P,null==B?void 0:B.dataViewFieldEditor]),nt=d.timeFieldName,lt=Object(l.useCallback)((e=>function(e,t,a,i,n){return!(!i||!t)&&(!n||!!a&&t in a&&e.includes("_source"))}(e,nt,a,w,L)),[nt,L,w,a]),ct=Object(l.useMemo)((()=>function(e,t,a){const i=t.timeFieldName;return a&&i&&!e.find((e=>e===i))?[i,...e]:e}(Ae,d,lt(Ae))),[d,Ae,lt]),ft=Object(l.useCallback)(((e,t)=>Pe[t%Pe.length].flattened[e]),[Pe]),bt=Object(l.useMemo)((()=>_&&!L?ct.map((e=>{var t,a;return null!==(t=null===(a=d.getFieldByName(e))||void 0===a?void 0:a.toSpec())&&void 0!==t?t:{name:"",type:"",aggregatable:!1,searchable:!1}})):void 0),[_,L,ct,d]),ht=Object(l.useMemo)((()=>({dataViewId:d.id,...null!=se?se:{}})),[d,se]),Et=at({fields:bt,getCellValue:ft,triggerId:_,dataGridRef:Ce,metadata:ht}),{rowHeight:vt,rowHeightLines:yt,onChangeRowHeight:xt,onChangeRowHeightLines:wt}=la({storage:Te,consumer:ne,key:"dataGridHeaderRowHeight",configRowHeight:null!=o?o:1,rowHeightState:s,onUpdateRowHeight:u}),{rowHeight:jt,rowHeightLines:Tt,onChangeRowHeight:St,onChangeRowHeightLines:Ot}=la({storage:Te,consumer:ne,key:"dataGridRowHeight",configRowHeight:null!=Q?Q:mt.d.default,rowHeightState:k,onUpdateRowHeight:I}),_t=Object(l.useMemo)((()=>Kt({columns:ct,columnsCellActions:Et,rowsCount:Pe.length,settings:x,dataView:d,defaultColumns:Re,isSortEnabled:C,isPlainRecord:L,services:{uiSettings:je,toastNotifications:xe},hasEditDataViewPermission:()=>{var e;return Boolean(null==we||null===(e=we.userPermissions)||void 0===e?void 0:e.editIndexPattern())},valueToStringConverter:Be,onFilter:p,editField:it,visibleCellActions:te,columnsMeta:a,showColumnTokens:n,headerRowHeightLines:yt,customGridColumnsConfiguration:ue})),[a,Et,ue,d,we,Re,Pe.length,it,yt,L,C,p,x,n,xe,je,Be,te,ct]),Mt=Object(l.useMemo)((()=>[{type:mt.i,detector:()=>0,sortTextAsc:"",sortTextDesc:"",icon:"",color:""}]),[]),kt=Object(l.useMemo)((()=>({visibleColumns:ct,setVisibleColumns:e=>{const t=!lt(e);g(e,t)}})),[ct,g,lt]),It=Object(l.useMemo)((()=>T.map((([e,t])=>({id:e,direction:t}))).filter((({id:e})=>ct.includes(e)))),[T,ct]),Dt=Object(l.useCallback)((e=>{C&&b&&b(e.map((({id:e,direction:t})=>[e,t])))}),[b,C]),At=Object(l.useMemo)((()=>{if(C){if(L&&!t.length)return;return{columns:It,onSort:Dt}}return{columns:It,onSort:()=>{}}}),[C,It,L,t.length,Dt]),Rt=Boolean($&&!!U),Lt=Object(l.useMemo)((()=>{const e=function(e){return e?[Ut,$t]:[$t]}(Rt).filter((({id:e})=>c.includes(e)));return Y?[...e,...Y]:e}),[Rt,c,Y]),Nt=null==ce?void 0:ce({controlColumns:{[qt]:$t,[zt]:Ut}}),Vt=null!==(be=null==Nt?void 0:Nt.leadingControlColumns)&&void 0!==be?be:Lt,Pt=null!==(he=null==Nt?void 0:Nt.trailingControlColumns)&&void 0!==he?he:W,Bt=Object(l.useMemo)((()=>Z||Ve.length?Object(Qe.jsx)(r.a.Fragment,null,Boolean(Ve.length)&&Object(Qe.jsx)(i.EuiFlexGroup,{gutterSize:"s",responsive:!1},de&&Ve.length>1&&Object(Qe.jsx)(i.EuiFlexItem,{grow:!1},Object(Qe.jsx)(Ft,{selectedDocs:Ve,setIsCompareActive:De})),Object(Qe.jsx)(i.EuiFlexItem,{grow:!1},Object(Qe.jsx)(Ct,{isPlainRecord:L,isFilterActive:Me,rows:E,selectedDocs:Ve,setSelectedDocs:_e,setIsFilterActive:ke}))),Z):null),[Z,Ve,L,Me,de,E]),Gt=Object(l.useMemo)((()=>H?e=>H({toolbarProps:e,gridProps:{additionalControls:Bt}}):void 0),[H,Bt]),Ht=Object(l.useMemo)((()=>{const e={};return I&&(e.allowDensity=!1),(I||u||R)&&(e.allowRowHeight=!1,e.allowResetButton=!1,e.additionalDisplaySettings=Object(Qe.jsx)(ta,{rowHeight:jt,rowHeightLines:Tt,onChangeRowHeight:St,onChangeRowHeightLines:Ot,headerRowHeight:vt,headerRowHeightLines:yt,onChangeHeaderRowHeight:xt,onChangeHeaderRowHeightLines:wt,maxAllowedSampleSize:D,sampleSize:A,onChangeSampleSize:R})),Object.keys(e).length?e:void 0}),[vt,yt,D,xt,wt,St,Ot,u,I,R,jt,Tt,A]),Wt=Object(l.useMemo)((()=>L&&t.length?{level:"sorting"}:void 0),[t.length,L]),Jt=Object(l.useMemo)((()=>Re?{...mt.j,showColumnSelector:!1,showSortSelector:C,additionalControls:Bt,showDisplaySelector:Ht,showFullScreenSelector:j}:{...mt.j,showSortSelector:C,additionalControls:Bt,showDisplaySelector:Ht,showFullScreenSelector:j}),[Re,C,Bt,Ht,j]),Xt=(({rowHeightLines:e,rowLineHeight:t=mt.g})=>Object(l.useMemo)((()=>{var a;return{defaultHeight:(a=e)===mt.d.auto?"auto":a!==mt.d.single?{lineCount:a}:void 0,lineHeight:t}}),[e,t]))({rowHeightLines:Tt,rowLineHeight:oe}),{dataGridId:Yt,dataGridWrapper:Zt,setDataGridWrapper:ea}=(()=>{const e=Object(i.useGeneratedHtmlId)({prefix:"unifiedDataTable"}),[t,a]=Object(l.useState)(null),[n,r]=Object(l.useState)(null),o=Object(l.useCallback)(((t,a)=>{const i=document.getElementById(e);i&&(r(i),a.disconnect())}),[e]),s=Object(l.useCallback)((()=>{n&&(e=>{e.classList.contains("euiDataGrid--fullScreen")?document.body.classList.add(da):document.body.classList.remove(da)})(n)}),[n]);return Object(i.useMutationObserver)(t,o,{childList:!0,subtree:!0}),Object(i.useMutationObserver)(n,s,{attributes:!0,attributeFilter:["class"]}),{dataGridId:e,dataGridWrapper:t,setDataGridWrapper:a}})(),aa=m!==ma.loading;return Ue||m!==ma.loading?Ue?Object(Qe.jsx)(gt.a.Provider,{value:Ge},Object(Qe.jsx)("span",{className:"unifiedDataTable__inner"},Object(Qe.jsx)("div",{ref:ea,key:Ie?"comparisonTable":"docTable","data-test-subj":"discoverDocTable","data-render-complete":aa,"data-shared-item":"","data-title":y,"data-description":v,"data-document-number":Pe.length,className:qe()(M,"unifiedDataTable__table")},Ie?Object(Qe.jsx)(ca,{id:Yt,wrapper:Zt,consumer:ne,ariaDescribedBy:et,ariaLabelledBy:e,dataView:d,isPlainRecord:L,selectedFieldNames:ct,additionalFieldGroups:ie,selectedDocs:Fe,schemaDetectors:Mt,forceShowAllFields:Re,showFullScreenButton:j,fieldFormats:Ee,getDocById:Ne,setSelectedDocs:_e,setIsCompareActive:De}):Object(Qe.jsx)(fa,{id:Yt,"aria-describedby":et,"aria-labelledby":e,columns:_t,columnVisibility:kt,"data-test-subj":"docTable",leadingControlColumns:Vt,onColumnResize:f,pagination:Je,renderCellValue:Ye,ref:Ce,rowCount:Ue,schemaDetectors:Mt,sorting:At,toolbarVisibility:Jt,rowHeightsOptions:Xt,inMemory:Wt,gridStyle:null!=re?re:mt.b,renderCustomGridBody:G,renderCustomToolbar:Gt,trailingControlColumns:Pt,cellContext:me,renderCellPopover:Ze})),m!==ma.loading&&!Ve.length&&F&&!Ie&&Object(Qe.jsx)(Qt,{isLoadingMore:m===ma.loadingMore,rowCount:Ue,sampleSize:A,pageCount:Ke,pageIndex:null==Je?void 0:Je.pageIndex,totalHits:z,onFetchMoreRecords:q,data:Se,fieldFormats:Ee}),y&&Object(Qe.jsx)(i.EuiScreenReaderOnly,null,Object(Qe.jsx)("p",{id:String(et)},v?Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.searchGenerationWithDescriptionGrid",defaultMessage:"Table generated by search {searchTitle} ({searchDescription})",values:{searchTitle:y,searchDescription:v}}):Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.searchGenerationWithDescription",defaultMessage:"Table generated by search {searchTitle}",values:{searchTitle:y}}))),Rt&&K&&U(K,Pe,Ae,a))):Object(Qe.jsx)("div",{className:"euiDataGrid__noResults","data-render-complete":aa,"data-shared-item":"","data-title":y,"data-description":v,"data-document-number":0},Object(Qe.jsx)(i.EuiText,{size:"xs",color:"subdued"},Object(Qe.jsx)(i.EuiIcon,{type:"discoverApp",size:"m",color:"subdued"}),Object(Qe.jsx)(i.EuiSpacer,{size:"s"}),Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.noResultsFound",defaultMessage:"No results found"}))):Object(Qe.jsx)("div",{className:"euiDataGrid__loading","data-test-subj":"unifiedDataTableLoading"},Object(Qe.jsx)(i.EuiText,{size:"xs",color:"subdued"},Object(Qe.jsx)(i.EuiLoadingSpinner,null),Object(Qe.jsx)(i.EuiSpacer,{size:"s"}),Object(Qe.jsx)(h.FormattedMessage,{id:"unifiedDataTable.loadingResults",defaultMessage:"Loading results"})))};var ha=a(352);const Ea=e=>{const t=e._routing?e._routing:"";return[e._index,e._id,t].join("::")};function va({records:e,dataView:t,processRecord:a}){return e.map((e=>{const i=function(e,t,a){return{id:Ea(e),raw:e,flattened:Object(ha.a)(e,t,{includeIgnoredValues:!0}),isAnchor:void 0}}(e,t);return a?a(i):i}))}const ya=ua(r.a.lazy((()=>a.e(9).then(a.bind(null,359)))),Object(Qe.jsx)(i.EuiDelayRender,{delay:300},Object(Qe.jsx)(i.EuiPanel,{color:"transparent",paddingSize:"s"},Object(Qe.jsx)(i.EuiLoadingSpinner,{size:"m"})))),xa=({dataView:e,columns:t,setColumns:a})=>{const i=Object(m.a)().services;return Object(l.useMemo)((()=>r.a.createElement(ya,{services:{core:i,...i},dataView:e,workspaceSelectedFieldNames:t,allFields:e.fields,onAddFieldToWorkspace:e=>{a((t=>[...0===t.length?["@timestamp"]:t,e.name]))},onRemoveFieldFromWorkspace:e=>{a((t=>t.filter((t=>t!==e.name))))},getCreationOptions:()=>({originatingApp:"observability"})})),[t,e,i,a])},wa=({sampleSize:e,name:t,dataView:a,range:i})=>{var n;const{getFieldState:l,watch:r}=Object(o.useFormContext)(),s=null===(n=l(t).error)||void 0===n?void 0:n.message,u=r(t),c=xe(u),{data:d,loading:m,error:p}=Object(k.useEsSearch)({index:s?"":a.getIndexPattern(),size:e,query:{bool:{filter:[{range:{"@timestamp":{gte:i.from,lte:i.to}}},c]}}},[i.from,i.to,a,JSON.stringify(u),e,s],{name:"slo-edit-documents-table"});return{data:d,loading:m,error:p}};function ja({dataView:e,range:t,name:a,searchBarProps:s,setRange:u}){const{setValue:c,watch:d}=Object(o.useFormContext)(),p=d(a),[f,g]=Object(l.useState)(100),[b,h]=Object(l.useState)([]),E=Object(m.a)().services,[v,y]=Object(l.useState)({fieldsPanel:180,documentsPanel:500}),x=Object(l.useCallback)((e=>{y((t=>({...t,...e})))}),[]),{data:w,loading:j,error:T}=wa({dataView:e,range:t,sampleSize:f,name:a}),S=xa({dataView:e,columns:b,setColumns:h});return r.a.createElement(r.a.Fragment,null,r.a.createElement(He,Z()({},s,{range:t,setRange:u,isFlyoutOpen:!0})),T&&!j&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiSpacer,{size:"xs"}),r.a.createElement(i.EuiCallOut,{color:"danger"},null==T?void 0:T.message)),r.a.createElement(i.EuiResizableContainer,{style:{height:"calc(100vh - 300px)"},onPanelWidthChange:x},((t,l)=>{var o,s;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{id:"fieldsPanel",size:v.fieldsPanel,minSize:"10%",tabIndex:0,style:{paddingLeft:0,paddingRight:0}},S),r.a.createElement(l,{indicator:"border"}),r.a.createElement(t,{id:"documentsPanel",size:v.documentsPanel,minSize:"200px",tabIndex:0},r.a.createElement(Xe,{getTriggerCompatibleActions:E.uiActions.getTriggerCompatibleActions},j&&r.a.createElement(i.EuiProgress,{size:"xs",color:"accent"}),r.a.createElement(ba,{rows:va({records:null!==(o=null==w||null===(s=w.hits)||void 0===s?void 0:s.hits)&&void 0!==o?o:[],dataView:e}),showColumnTokens:!0,dataView:e,onFilter:(t,i,n)=>{if(t&&"string"!=typeof t&&"name"in t){const l=e.getFieldByName(null==t?void 0:t.name);if(!l)return;const r=Object(ye.buildFilter)(e,l,ye.FILTERS.PHRASE,"-"===n,!1,i,null);J.e.is(p)?c(a,{filters:[r],kqlQuery:p}):c(a,{...null!=p?p:{},filters:[r]})}},services:E,ariaLabelledBy:n.i18n.translate("xpack.slo.edit.documentsTableAriaLabel",{defaultMessage:"Documents table"}),loadingState:j?ma.loading:ma.loaded,columns:b,onSetColumns:h,showTimeCol:!0,sampleSizeState:f,onUpdateSampleSize:e=>{g(e)},sort:[],useNewFieldsApi:!0,showFullScreenButton:!1}))))})))}function Ta({setRange:e,name:t,range:a,dataView:l,searchBarProps:o,setIsFlyoutOpen:s}){return r.a.createElement(i.EuiFlyoutResizable,{onClose:()=>s(!1),size:"1050px",minWidth:500,maxWidth:1200},r.a.createElement(i.EuiFlyoutHeader,null,r.a.createElement(i.EuiTitle,{size:"m"},r.a.createElement("h2",null,n.i18n.translate("xpack.slo.queryBuilder.h2.documentsLabel",{defaultMessage:"Documents for {indexPattern}",values:{indexPattern:l.getIndexPattern()}})))),r.a.createElement(i.EuiFlyoutBody,null,l&&r.a.createElement(ja,{dataView:l,searchBarProps:o,range:a,setRange:e,name:t})),r.a.createElement(i.EuiFlyoutFooter,null,r.a.createElement(i.EuiButton,{"data-test-subj":"o11yQueryBuilderCloseButton",onClick:()=>s(!1)},n.i18n.translate("xpack.slo.queryBuilder.closeButtonLabel",{defaultMessage:"Close"}))))}function Sa(e){const{dataView:t,name:a}=e,[o,s]=Object(l.useState)(!1),[u,c]=Object(l.useState)({from:"now-15m",to:"now"});return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexGroup,{gutterSize:"s",responsive:!1},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(He,Z()({},e,{setRange:c,range:u,isFlyoutOpen:o}))),r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(Oa,{isDisabled:!Boolean(t),"data-test-subj":"o11yQueryBuilderButton",iconType:"documents",onClick:()=>s(!0),"aria-label":n.i18n.translate("xpack.slo.queryBuilder.documentsButtonLabel",{defaultMessage:"View documents"})}))),o&&t&&r.a.createElement(Ta,{range:u,setRange:c,setIsFlyoutOpen:s,dataView:t,name:a,searchBarProps:e}),r.a.createElement(Be,{dataView:t,name:a}))}var Oa=N()(i.EuiButtonIcon).withConfig({displayName:"_StyledEuiButtonIcon",componentId:"sc-1cl5bsz-0"})({marginTop:27});const Ca=(e="",t)=>J.e.is(e)?{kqlQuery:e,filters:t}:J.f.is(e)?{kqlQuery:e.kqlQuery,filters:[...e.filters,...t]}:{kqlQuery:"",filters:t},Fa=({serviceName:e,environment:t,transactionType:a,transactionName:i})=>[e&&e!==J.a?{meta:{disabled:!1,negate:!1,alias:null,key:"service.name",params:e,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:{match_phrase:{"service.name":e}}}}}:null,t&&t!==J.a?{meta:{disabled:!1,negate:!1,alias:null,key:"service.environment",params:t,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:{match_phrase:{"service.environment":t}}}}}:null,a&&a!==J.a?{meta:{disabled:!1,negate:!1,alias:null,key:"transaction.type",params:a,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:{match_phrase:{"transaction.type":a}}}}}:null,i&&i!==J.a?{meta:{disabled:!1,negate:!1,alias:null,key:"transaction.name",params:i,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:{match_phrase:{"transaction.name":i}}}}}:null].filter((e=>!!e));function _a(){const{watch:e,setValue:t}=Object(o.useFormContext)(),{data:a}=le(),s=e(ce),[u="",c="",d="",m="",p]=e(["indicator.params.service","indicator.params.environment","indicator.params.transactionType","indicator.params.transactionName","indicator.params.filter"]),f=Fa({serviceName:u,environment:c,transactionType:d,transactionName:m}),g=Ca(p,f);Object(l.useEffect)((()=>{""!==a&&t("indicator.params.index",a)}),[t,a]);const{dataView:b,loading:h}=Object(be.a)({indexPatternString:a,dataViewId:s});return r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(ke,{allowAllOption:!1,label:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.serviceName",{defaultMessage:"Service name"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.serviceName.placeholder",{defaultMessage:"Select the APM service"}),fieldName:"service.name",name:"indicator.params.service",dataTestSubj:"apmAvailabilityServiceSelector",tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.apm.serviceName.tooltip",{defaultMessage:"This is the APM service monitored by this SLO."}),position:"top"})}),r.a.createElement(ke,{label:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.serviceEnvironment",{defaultMessage:"Service environment"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.serviceEnvironment.placeholder",{defaultMessage:"Select the environment"}),fieldName:"service.environment",name:"indicator.params.environment",dataTestSubj:"apmAvailabilityEnvironmentSelector"})),r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(ke,{label:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.transactionType",{defaultMessage:"Transaction type"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.transactionType.placeholder",{defaultMessage:"Select the transaction type"}),fieldName:"transaction.type",name:"indicator.params.transactionType",dataTestSubj:"apmAvailabilityTransactionTypeSelector"}),r.a.createElement(ke,{label:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.transactionName",{defaultMessage:"Transaction name"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmAvailability.transactionName.placeholder",{defaultMessage:"Select the transaction name"}),fieldName:"transaction.name",name:"indicator.params.transactionName",dataTestSubj:"apmAvailabilityTransactionNameSelector"})),r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"apmLatencyFilterInput",dataView:b,label:n.i18n.translate("xpack.slo.sloEdit.apmLatency.filter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.apmLatency.filter.placeholder",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.apm.filter.tooltip",{defaultMessage:"This KQL query is used to filter the APM metrics on some relevant criteria for this SLO."}),position:"top"})}))),r.a.createElement(Oe,{dataView:b,isLoading:h,filters:g}),r.a.createElement(Ne,null))}function Ma(){const{control:e,watch:t,getFieldState:a,setValue:s}=Object(o.useFormContext)(),{data:u}=le(),[c="",d="",m="",p="",f]=t(["indicator.params.service","indicator.params.environment","indicator.params.transactionType","indicator.params.transactionName","indicator.params.filter"]),g=Fa({serviceName:c,environment:d,transactionType:m,transactionName:p}),b=Ca(f,g);Object(l.useEffect)((()=>{""!==u&&s("indicator.params.index",u)}),[s,u]);const h=t(ce),{dataView:E,loading:v}=Object(be.a)({indexPatternString:u,dataViewId:h});return r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(ke,{allowAllOption:!1,label:n.i18n.translate("xpack.slo.sloEdit.apmLatency.serviceName",{defaultMessage:"Service name"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmLatency.serviceName.placeholder",{defaultMessage:"Select the APM service"}),fieldName:"service.name",name:"indicator.params.service",dataTestSubj:"apmLatencyServiceSelector",tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.apm.serviceName.tooltip",{defaultMessage:"This is the APM service monitored by this SLO."}),position:"top"})}),r.a.createElement(ke,{label:n.i18n.translate("xpack.slo.sloEdit.apmLatency.serviceEnvironment",{defaultMessage:"Service environment"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmLatency.serviceEnvironment.placeholder",{defaultMessage:"Select the environment"}),fieldName:"service.environment",name:"indicator.params.environment",dataTestSubj:"apmLatencyEnvironmentSelector"})),r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(ke,{label:n.i18n.translate("xpack.slo.sloEdit.apmLatency.transactionType",{defaultMessage:"Transaction type"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmLatency.transactionType.placeholder",{defaultMessage:"Select the transaction type"}),fieldName:"transaction.type",name:"indicator.params.transactionType",dataTestSubj:"apmLatencyTransactionTypeSelector"}),r.a.createElement(ke,{label:n.i18n.translate("xpack.slo.sloEdit.apmLatency.transactionName",{defaultMessage:"Transaction name"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.apmLatency.transactionName.placeholder",{defaultMessage:"Select the transaction name"}),fieldName:"transaction.name",name:"indicator.params.transactionName",dataTestSubj:"apmLatencyTransactionNameSelector"})),r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.apmLatency.threshold.placeholder",{defaultMessage:"Threshold (ms)"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.apmLatency.threshold.tooltip",{defaultMessage:'Configure the threshold in milliseconds defining the "good" or "successful" requests for the SLO.'}),position:"top"})),isInvalid:a("indicator.params.threshold").invalid},r.a.createElement(o.Controller,{name:"indicator.params.threshold",control:e,defaultValue:250,rules:{required:!0,min:0},render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFieldNumber,Z()({},t,{required:!0,isInvalid:a.invalid,value:String(t.value),"data-test-subj":"apmLatencyThresholdInput",min:0,onChange:e=>t.onChange(Number(e.target.value))}))}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"apmLatencyFilterInput",dataView:E,label:n.i18n.translate("xpack.slo.sloEdit.apmLatency.filter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.apmLatency.filter.placeholder",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.apm.filter.tooltip",{defaultMessage:"This KQL query is used to filter the APM metrics on some relevant criteria for this SLO."}),position:"top"})}))),r.a.createElement(Oe,{dataView:E,isLoading:v,filters:b}),r.a.createElement(Ne,null))}function ka({allowAllOption:e=!0,dataTestSubj:t,fieldName:a,label:s,name:c,placeholder:d,tooltip:p,required:f,filters:g}){const{control:b,getFieldState:h}=Object(o.useFormContext)(),[E,v]=Object(l.useState)(""),{suggestions:y=[],isLoading:x}=function({filters:e,fieldName:t,search:a}){var i;const{http:n}=Object(m.a)().services,{locations:l,monitorIds:r,tags:o,projects:s}=e||{},{isInitialLoading:c,isLoading:d,isError:p,isSuccess:f,isRefetching:g,data:b}=Object(u.useQuery)({queryKey:["fetchSyntheticsSuggestions",l,r,o,s,a],queryFn:async({signal:e})=>{try{return await n.get("/internal/synthetics/suggestions",{query:{locations:l||[],monitorQueryIds:r||[],tags:o||[],projects:s||[],query:a},signal:e})}catch(e){}},refetchOnWindowFocus:!1,keepPreviousData:!0});return{suggestions:c?[]:null!==(i=null==b?void 0:b[t])&&void 0!==i?i:[],isLoading:c||d||g,isSuccess:f,isError:p}}({filters:Object(S.omit)(g,a),search:E,fieldName:a}),w=Object(S.debounce)((e=>v(e)),200),j={value:J.a,label:n.i18n.translate("xpack.slo.fieldSelector.all",{defaultMessage:"All"})},T=(e?[j]:[]).concat(function(e=[]){return e.map((e=>({label:e.label,value:e.value}))).sort(((e,t)=>String(e.label).localeCompare(t.label)))}(y));return r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:p?r.a.createElement("span",null,s," ",p):s,isInvalid:h(c).invalid,fullWidth:!0,labelAppend:f?void 0:r.a.createElement(ee,null)},r.a.createElement(o.Controller,{defaultValue:"",name:c,control:b,rules:{required:f},render:({field:e,fieldState:a})=>r.a.createElement(i.EuiComboBox,Z()({},e,{"aria-label":d,async:!0,"data-test-subj":t,isClearable:!0,fullWidth:!0,isInvalid:a.invalid,isLoading:x,onChange:t=>{var a,i;t.length&&(null===(a=t.at(-1))||void 0===a?void 0:a.value)!==J.a?e.onChange(t.filter((e=>e.value!==J.a))):t.length&&(null===(i=t.at(-1))||void 0===i?void 0:i.value)===J.a?e.onChange([j]):e.onChange([])},onSearchChange:e=>w(e),options:T,placeholder:d,selectedOptions:Array.isArray(e.value)&&e.value.length?e.value.map((e=>({value:e.value,label:e.label,"data-test-subj":`${t}SelectedValue`}))):[]}))})))}function Ia(){const{watch:e}=Object(o.useFormContext)(),t=e(ce),[a=[],s=[],u=[],c,d]=e(["indicator.params.monitorIds","indicator.params.projects","indicator.params.tags","indicator.params.index","indicator.params.filter"]),{dataView:m}=Object(be.a)({indexPatternString:c,dataViewId:t}),[p,f]=Object(l.useState)({from:_e()().subtract(1,"day").toDate(),to:new Date}),g={monitorIds:a.map((e=>e.value)).filter((e=>e!==J.a)),projects:s.map((e=>e.value)).filter((e=>e!==J.a)),tags:u.map((e=>e.value)).filter((e=>e!==J.a))},b=Aa(g.monitorIds,g.projects,g.tags),h=Ca(d,b);return r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(ka,{required:!0,allowAllOption:!0,label:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.monitor",{defaultMessage:"Monitor name"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.monitor.placeholder",{defaultMessage:"Select the Synthetics monitor or choose all"}),fieldName:"monitorIds",name:"indicator.params.monitorIds",filters:g,dataTestSubj:"syntheticsAvailabilityMonitorSelector",tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.monitor.tooltip",{defaultMessage:'This is the monitor or monitors part of this SLO. Select "*" to group by project, tag, or location'}),position:"top"})}),r.a.createElement(ka,{allowAllOption:!0,label:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.project",{defaultMessage:"Project"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.project.placeholder",{defaultMessage:"Select the project"}),fieldName:"projects",name:"indicator.params.projects",filters:g,dataTestSubj:"syntheticsAvailabilityProjectSelector"}),r.a.createElement(ka,{label:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.tags",{defaultMessage:"Tags"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.tags.placeholder",{defaultMessage:"Select tags"}),fieldName:"tags",name:"indicator.params.tags",filters:g,dataTestSubj:"syntheticsAvailabilityTagsSelector"})),r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"syntheticsAvailabilityFilterInput",dataView:m,label:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.filter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.filter.placeholder",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.synthetics.filter.tooltip",{defaultMessage:"This KQL query is used to filter the Synthetics checks on some relevant criteria for this SLO."}),position:"top"})}))),r.a.createElement(Se,{titleAppend:n.i18n.translate("xpack.slo.sloEdit.syntheticsAvailability.warning",{defaultMessage:"Synthetics availability SLIs are automatically grouped by monitor and location."}),customFilters:h}),r.a.createElement(Ne,{range:p,label:Da,useGoodBadEventsChart:!0}))}const Da=n.i18n.translate("xpack.slo.sloEdit.dataPreviewChart.syntheticsAvailability.xTitle",{defaultMessage:"Last 24 hours"}),Aa=(e,t,a)=>[e.length?{meta:{disabled:!1,negate:!1,alias:null,key:"monitor.id",params:e,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:e.map((e=>({match_phrase:{"monitor.id":e}})))}}}:null,t.length?{meta:{disabled:!1,negate:!1,alias:null,key:"monitor.project.id",params:t,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:t.map((e=>({match_phrase:{"monitor.project.id":e}})))}}}:null,a.length?{meta:{disabled:!1,negate:!1,alias:null,key:"tags",params:a,type:"phrases"},$state:{store:ye.FilterStateStore.APP_STATE},query:{bool:{minimum_should_match:1,should:a.map((e=>({match_phrase:{tags:e}})))}}}:null].filter((e=>!!e));function Ra(){var e,t;const{watch:a}=Object(o.useFormContext)(),l=a("indicator.params.index"),s=a(ce),{dataView:u,loading:c}=Object(be.a)({indexPatternString:l,dataViewId:s}),d=null!==(e=null==u||null===(t=u.fields)||void 0===t?void 0:t.filter((e=>"date"===e.type)))&&void 0!==e?e:[];return r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(pe,{selectedDataView:u})),r.a.createElement(Ee,{indexFields:d,name:"indicator.params.timestampField",label:n.i18n.translate("xpack.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!l&&c,isDisabled:!l,isRequired:!0})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"customKqlIndicatorFormQueryFilterInput",dataView:u,label:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"customKqlIndicatorFormGoodQueryInput",dataView:u,label:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.goodQuery",{defaultMessage:"Good query"}),name:"indicator.params.good",placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.goodQueryPlaceholder",{defaultMessage:"Define the good events"}),required:!0,tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.goodQuery.tooltip",{defaultMessage:'This KQL query should return a subset of events that are considered "good" or "successful" for the purpose of calculating the SLO. The query should filter events based on some relevant criteria, such as status codes, error messages, or other relevant fields.'}),position:"top"})})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"customKqlIndicatorFormTotalQueryInput",dataView:u,label:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.totalQuery",{defaultMessage:"Total query"}),name:"indicator.params.total",placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.totalQueryPlaceholder",{defaultMessage:"Define the total events"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customKql.totalQuery.tooltip",{defaultMessage:"This KQL query should return all events that are relevant to the SLO calculation, including both good and bad events."}),position:"top"})})),r.a.createElement(Oe,{dataView:u,isLoading:c}),r.a.createElement(Ne,null))}const La=[{value:"avg",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.average",{defaultMessage:"Average"})},{value:"max",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.max",{defaultMessage:"Max"})},{value:"min",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.min",{defaultMessage:"Min"})},{value:"sum",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.sum",{defaultMessage:"Sum"})},{value:"cardinality",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.cardinality",{defaultMessage:"Cardinality"})},{value:"last_value",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.last_value",{defaultMessage:"Last value"})},{value:"std_deviation",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.std_deviation",{defaultMessage:"Std. Deviation"})},{value:"doc_count",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.doc_count",{defaultMessage:"Doc count"})},{value:"percentile",label:n.i18n.translate("xpack.slo.sloEdit.timesliceMetric.aggregation.percentile",{defaultMessage:"Percentile"})}],Na=La.filter((e=>["doc_count","sum"].includes(e.value)));function Va(e){const t=La.find((t=>t.value===e));return t?t.label:e}const Pa={name:"A",aggregation:"sum",field:""},Ba=26,Ga=65+Ba,Ha=Object(S.range)(65,Ga).map((e=>String.fromCharCode(e))),Wa=/[^A-Z|+|\-|\s|\d+|\.|\(|\)|\/|\*|>|<|=|\?|\:|&|\!|\|]+/,za=e=>null===e.match(Wa);function qa(e){return e.join(" + ")}const Ua=n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.metricLabel",{defaultMessage:"Metric"}),$a=n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.filterLabel",{defaultMessage:"Filter"}),Ka=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.totalMetric.tooltip",{defaultMessage:'This data from this field will be aggregated with the "sum" aggregation or document count.'}),position:"top"}),Qa=n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.equationLabel",{defaultMessage:"Equation"}),Ja=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.totalEquation.tooltip",{defaultMessage:"This supports basic math (A + B / C) and boolean logic (A < B ? A : B)."}),position:"top"});function Xa({type:e,metricFields:t,isLoadingIndex:a,dataView:s}){const{control:u,watch:c,setValue:d,register:m,getFieldState:p}=Object(o.useFormContext)(),[f,g]=Object(l.useState)(he(t)),[b,E]=Object(l.useState)(Na);Object(l.useEffect)((()=>{g(he(t))}),[t]);const{fields:v,append:y,remove:x}=Object(o.useFieldArray)({control:u,name:`indicator.params.${e}.metrics`}),w=c(`indicator.params.${e}.equation`),j=c("indicator.params.index"),T=(null==v?void 0:v.length)===Ba||!j,O=1===(null==v?void 0:v.length)||!j,C=(t,a)=>{qa(t)===w&&d(`indicator.params.${e}.equation`,qa(a))},F=e=>()=>{var t;const a=null!==(t=v.map((e=>e.name)))&&void 0!==t?t:["A"],i=a[e];C(a,Object(S.xor)(a,[i])),x(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,null,null==v?void 0:v.map(((l,d,h)=>r.a.createElement("div",{key:l.id},r.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",key:l.id},r.a.createElement("input",Z()({hidden:!0},m(`indicator.params.${e}.metrics.${d}.name`))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:p(`indicator.params.${e}.metrics.${d}.aggregation`).invalid,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.customMetric.aggregationLabel",{defaultMessage:"Aggregation"})," ",l.name)},r.a.createElement(o.Controller,{name:`indicator.params.${e}.metrics.${d}.aggregation`,defaultValue:"sum",rules:{required:!0},control:u,render:({field:{ref:e,...t},fieldState:l})=>r.a.createElement(i.EuiComboBox,Z()({},t,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),isClearable:!0,isInvalid:l.invalid,isDisabled:a||!j,isLoading:!!j&&a,onChange:e=>{if(e.length)return t.onChange(e[0].value);t.onChange("")},selectedOptions:j&&t.value&&Na.some((e=>e.value===t.value))?[{value:t.value,label:Va(t.value)}]:[],onSearchChange:e=>{E(Na.filter((({value:t})=>t.includes(e))))},options:b}))}))),"doc_count"!==c(`indicator.params.${e}.metrics.${d}.aggregation`)&&r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:p(`indicator.params.${e}.metrics.${d}.field`).invalid,label:r.a.createElement("span",null,Ua," ",l.name," ",Ka)},r.a.createElement(o.Controller,{name:`indicator.params.${e}.metrics.${d}.field`,defaultValue:"",rules:{required:!0},shouldUnregister:!0,control:u,render:({field:{ref:e,...l},fieldState:o})=>r.a.createElement(i.EuiComboBox,Z()({},l,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),isClearable:!0,isInvalid:o.invalid,isDisabled:a||!j,isLoading:!!j&&a,onChange:e=>{if(e.length)return l.onChange(e[0].value);l.onChange("")},selectedOptions:j&&l.value&&t.some((e=>e.name===l.value))?[{value:l.value,label:l.value}]:[],onSearchChange:e=>{g(he(t,(({value:t})=>t.includes(e))))},options:f}))}))),r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(i.EuiButtonIcon,{"data-test-subj":"o11yMetricIndicatorButton",iconType:"trash",color:"danger",style:{marginTop:"1.5em"},onClick:F(d),disabled:O,title:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.deleteLabel",{defaultMessage:"Delete metric"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.deleteLabel",{defaultMessage:"Delete metric"})}))),r.a.createElement(Sa,{dataTestSubj:"customKqlIndicatorFormGoodQueryInput",dataView:s,label:`${$a} ${l.name}`,name:`indicator.params.${e}.metrics.${d}.filter`,placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.placeholder",{defaultMessage:"KQL filter"}),required:!1,tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.tooltip",{defaultMessage:"This KQL query should return a subset of events."}),position:"top"})}),d!==h.length-1&&r.a.createElement(i.EuiHorizontalRule,{size:"quarter"})))),r.a.createElement(i.EuiFlexGroup,null,r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(i.EuiSpacer,{size:"xs"}),r.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"customMetricIndicatorAddMetricButton",color:"primary",size:"xs",iconType:"plusInCircleFilled",onClick:()=>{var e;const t=null!==(e=v.map((e=>e.name)))&&void 0!==e?e:["A"],a=Object(S.first)(Object(S.xor)(Ha,t));C(t,[...t,a]),y({...Pa,name:a})},isDisabled:T,"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.addMetricAriaLabel",{defaultMessage:"Add metric"})},r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.customMetric.addMetricLabel",defaultMessage:"Add metric"})),r.a.createElement(i.EuiSpacer,{size:"m"})))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(o.Controller,{name:`indicator.params.${e}.equation`,defaultValue:"",rules:{required:!0,validate:{validateEquation:za}},control:u,render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:r.a.createElement("span",null,Qa," ",Ja),helpText:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.equationHelpText",{defaultMessage:"Supports basic math equations, valid charaters are: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="}),isInvalid:a.invalid,error:[n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.equation.invalidCharacters",{defaultMessage:"The equation field only supports the following characters: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="})]},r.a.createElement(i.EuiFieldText,Z()({},t,{isInvalid:a.invalid,fullWidth:!0,"data-test-subj":"o11yCustomMetricEquation"})))})))}const Ya=["number","histogram"];function Za(){const{watch:e}=Object(o.useFormContext)(),t=e("indicator.params.index"),a=e(ce),{dataView:l,loading:s}=Object(be.a)({indexPatternString:t,dataViewId:a}),u=null==l?void 0:l.fields.filter((e=>"date"===e.type)),c=null==l?void 0:l.fields.filter((e=>Ya.includes(e.type)));return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.histogram.sourceTitle",defaultMessage:"Source"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(pe,null)),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Ee,{indexFields:null!=u?u:[],name:"indicator.params.timestampField",label:n.i18n.translate("xpack.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!t&&s,isDisabled:!t,isRequired:!0}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"customMetricIndicatorFormQueryFilterInput",dataView:l,label:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.customMetric.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.customMetric.goodTitle",defaultMessage:"Good events"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(Xa,{type:"good",metricFields:null!=c?c:[],isLoadingIndex:s,dataView:l})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.customMetric.totalTitle",defaultMessage:"Total events"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(Xa,{type:"total",metricFields:null!=c?c:[],isLoadingIndex:s,dataView:l})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(Oe,{dataView:l,isLoading:s}),r.a.createElement(Ne,null)))}const ei={value_count:{value:"value_count",label:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.valueCountLabel",{defaultMessage:"Value count"})},range:{value:"range",label:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.rangeLabel",{defaultMessage:"Range"})}},ti=Object.values(ei),ai=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.aggregationTooltip",{defaultMessage:'The "value count" aggregation will return the total count for the histogram field. Range will return the count from the histogram field that is within the range defined below.'}),position:"top"}),ii=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.fromTooltip",{defaultMessage:'The "from" value is inclusive.'}),position:"top"}),ni=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.toTooltip",{defaultMessage:'The "to" value is NOT inclusive.'}),position:"top"}),li=n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.aggregationLabel",{defaultMessage:"Aggregation"}),ri=n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.metricLabel",{defaultMessage:"Field"}),oi=n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.toLabel",{defaultMessage:"To"}),si=n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.fromLabel",{defaultMessage:"From"});function ui({type:e,histogramFields:t,isLoadingIndex:a,dataView:s}){const{control:u,watch:c,getFieldState:d}=Object(o.useFormContext)(),[m,p]=Object(l.useState)(he(t));Object(l.useEffect)((()=>{p(he(t))}),[t]);const f=c("indicator.params.index"),g=c(`indicator.params.${e}.aggregation`);return r.a.createElement(l.Fragment,null,r.a.createElement(i.EuiFlexGroup,null,r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:r.a.createElement("span",null,li," ",ai)},r.a.createElement(o.Controller,{name:`indicator.params.${e}.aggregation`,rules:{required:!0},control:u,render:({field:{ref:e,...t},fieldState:l})=>r.a.createElement(i.EuiComboBox,Z()({},t,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.aggregation.placeholder",{defaultMessage:"Select an aggregation"}),isInvalid:l.invalid,isDisabled:!f,isLoading:!!f&&a,onChange:e=>{if(e.length)return t.onChange(e[0].value);t.onChange("")},selectedOptions:t.value?[ei[t.value]]:[],options:ti}))}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:d(`indicator.params.${e}.field`).invalid,label:r.a.createElement("span",null,ri)},r.a.createElement(o.Controller,{name:`indicator.params.${e}.field`,defaultValue:"",rules:{required:!0},control:u,render:({field:{ref:e,...l},fieldState:o})=>r.a.createElement(i.EuiComboBox,Z()({},l,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.metricField.placeholder",{defaultMessage:"Select a histogram field"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.metricField.placeholder",{defaultMessage:"Select a histogram field"}),isInvalid:o.invalid,isDisabled:a||!f,isLoading:!!f&&a,onChange:e=>{if(e.length)return l.onChange(e[0].value);l.onChange("")},selectedOptions:f&&l.value&&t.some((e=>e.name===l.value))?[{value:l.value,label:l.value}]:[],onSearchChange:e=>{p(he(t,(({value:t})=>t.includes(e))))},options:m}))})))),r.a.createElement(i.EuiSpacer,{size:"m"}),r.a.createElement(i.EuiFlexGroup,null,"range"===g&&r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFlexGroup,null,r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:r.a.createElement("span",null,si," ",ii)},r.a.createElement(o.Controller,{name:`indicator.params.${e}.from`,defaultValue:NaN,control:u,rules:{required:!0},shouldUnregister:!0,render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFieldNumber,Z()({},t,{required:!0,fullWidth:!0,isInvalid:a.invalid,value:String(t.value),"data-test-subj":"histogramRangeFrom",min:0,onChange:e=>t.onChange(Number(e.target.value))}))}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:r.a.createElement("span",null,oi," ",ni)},r.a.createElement(o.Controller,{name:`indicator.params.${e}.to`,defaultValue:NaN,rules:{required:!0},shouldUnregister:!0,control:u,render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFieldNumber,Z()({},t,{required:!0,fullWidth:!0,isInvalid:a.invalid,value:String(t.value),"data-test-subj":"histogramRangeTo",min:0,onChange:e=>t.onChange(Number(e.target.value))}))}))))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:`histogramIndicatorForm${e}QueryInput`,dataView:s,label:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.kqlFilterLabel",{defaultMessage:"KQL filter"}),name:`indicator.params.${e}.filter`,placeholder:"",required:!1,tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.query.tooltip",{defaultMessage:"This KQL query should return a subset of events for this indicator."}),position:"top"})}))))}function ci(){const{watch:e}=Object(o.useFormContext)(),t=e("indicator.params.index"),a=e(ce),{dataView:l,loading:s}=Object(be.a)({indexPatternString:t,dataViewId:a}),u=null==l?void 0:l.fields.filter((e=>"histogram"===e.type)),c=null==l?void 0:l.fields.filter((e=>"date"===e.type));return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.histogram.sourceTitle",defaultMessage:"Source"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(pe,null)),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Ee,{indexFields:null!=c?c:[],name:"indicator.params.timestampField",label:n.i18n.translate("xpack.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!t&&s,isDisabled:!t,isRequired:!0}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"histogramIndicatorFormQueryFilterInput",dataView:l,label:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.histogram.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.histogram.goodTitle",defaultMessage:"Good events"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(ui,{type:"good",histogramFields:null!=u?u:[],isLoadingIndex:s})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.histogram.totalTitle",defaultMessage:"Total events"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(ui,{type:"total",histogramFields:null!=u?u:[],isLoadingIndex:s})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(Oe,{dataView:l,isLoading:s}),r.a.createElement(Ne,null)))}const di=n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.fieldLabel",{defaultMessage:"Field"}),mi=n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.aggregationLabel",{defaultMessage:"Aggregation"}),pi=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.totalMetric.tooltip",{defaultMessage:"This is the field used in the aggregation."}),position:"top"}),fi=["number","histogram"],gi=["number","string"];function bi({metricIndex:e,indexPattern:t,isLoadingIndex:a,indexFields:s}){const{control:u,watch:c}=Object(o.useFormContext)(),d=c(`indicator.params.metric.metrics.${e}`),m=c(`indicator.params.metric.metrics.${e}.aggregation`),[p,f]=Object(l.useState)(s.filter((e=>fi.includes(e.type)))),[g,b]=Object(l.useState)(La),[h,E]=Object(l.useState)(he(p));return Object(l.useEffect)((()=>{f(s.filter((e=>"cardinality"===m?gi.includes(e.type):fi.includes(e.type))))}),[m,f,s]),Object(l.useEffect)((()=>{E(he(p))}),[p,E]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,null,r.a.createElement(o.Controller,{name:`indicator.params.metric.metrics.${e}.aggregation`,defaultValue:"avg",rules:{required:!0},control:u,render:({field:{ref:e,...l},fieldState:o})=>r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:r.a.createElement("span",null,mi," ",d.name),isInvalid:o.invalid},r.a.createElement(i.EuiComboBox,Z()({},l,{async:!0,fullWidth:!0,isClearable:!1,singleSelection:{asPlainText:!0},placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.aggregationField.placeholder",{defaultMessage:"Select an aggregation"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.aggregationField.placeholder",{defaultMessage:"Select an aggregation"}),isInvalid:o.invalid,isDisabled:!t,isLoading:!!t&&a,onChange:e=>{if(e.length)return l.onChange(e[0].value);l.onChange("")},selectedOptions:t&&l.value&&La.some((e=>e.value===l.value))?[{value:l.value,label:Va(l.value)}]:[],onSearchChange:e=>{b(La.filter((({value:t})=>t.includes(e))))},options:g})))})),"percentile"===m&&r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(o.Controller,{name:`indicator.params.metric.metrics.${e}.percentile`,defaultValue:95,rules:{required:!0,min:.001,max:99.999},shouldUnregister:!0,control:u,render:({field:{ref:e,onChange:l,...o},fieldState:s})=>r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:s.invalid,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.percentileLabel",{defaultMessage:"Percentile"})," ",d.name)},r.a.createElement(i.EuiFieldNumber,Z()({},o,{style:{width:80},"data-test-subj":"timesliceMetricPercentileNumber",required:!0,min:.1,max:99.999,step:.1,value:o.value,isInvalid:s.invalid,disabled:!t,isLoading:!!t&&a,onChange:e=>l(Number(e.target.value))})))})),"doc_count"!==m&&r.a.createElement(i.EuiFlexItem,null,r.a.createElement(o.Controller,{name:`indicator.params.metric.metrics.${e}.field`,defaultValue:"",rules:{required:!0},shouldUnregister:!0,control:u,render:({field:{ref:e,...l},fieldState:o})=>r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:o.invalid,label:r.a.createElement("span",null,di," ",d.name," ",pi)},r.a.createElement(i.EuiComboBox,Z()({},l,{async:!0,fullWidth:!0,singleSelection:{asPlainText:!0},placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.metricField.placeholder",{defaultMessage:"Select a metric field"}),isInvalid:o.invalid,isDisabled:!t,isLoading:!!t&&a,onChange:e=>{if(e.length)return l.onChange(e[0].value);l.onChange("")},selectedOptions:t&&l.value&&p.some((e=>e.name===l.value))?[{value:l.value,label:l.value}]:[],onSearchChange:e=>{E(he(p,(({value:t})=>t.includes(e))))},options:h})))})))}const hi={name:"A",aggregation:"avg",field:""},Ei=26,vi=65+Ei,yi=Object(S.range)(65,vi).map((e=>String.fromCharCode(e))),xi=/[^A-Z|+|\-|\s|\d+|\.|\(|\)|\/|\*|>|<|=|\?|\:|&|\!|\|]+/,wi=e=>null===e.match(xi);function ji(e){return e.join(" + ")}const Ti=n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.equationLabel",{defaultMessage:"Equation"}),Si=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.totalEquation.tooltip",{defaultMessage:"This supports basic math (A + B / C) and boolean logic (A < B ? A : B)."}),position:"top"}),Oi=n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.thresholdLabel",{defaultMessage:"Threshold"}),Ci=r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.threshold.tooltip",{defaultMessage:'This value combined with the comparator will determine if the slice is "good" or "bad".'}),position:"top"});function Fi({indexFields:e,isLoadingIndex:t,dataView:a}){const{control:l,watch:s,setValue:u,register:c,getFieldState:d}=Object(o.useFormContext)(),{fields:m,append:p,remove:f}=Object(o.useFieldArray)({control:l,name:"indicator.params.metric.metrics"}),g=s("indicator.params.metric.equation"),b=s("indicator.params.index"),E=(null==m?void 0:m.length)===Ei||!b,v=1===(null==m?void 0:m.length)||!b,y=(e,t)=>{ji(e)===g&&u("indicator.params.metric.equation",ji(t))},x=e=>()=>{var t;const a=null!==(t=m.map((e=>e.name)))&&void 0!==t?t:["A"],i=a[e];y(a,Object(S.xor)(a,[i])),f(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,null,null==m?void 0:m.map(((l,o,s)=>r.a.createElement(r.a.Fragment,{key:l.id},r.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},r.a.createElement("input",Z()({hidden:!0},c(`indicator.params.metric.metrics.${o}.name`))),r.a.createElement(bi,{isLoadingIndex:t,metricIndex:o,indexPattern:b,indexFields:e}),r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(i.EuiButtonIcon,{"data-test-subj":"o11yMetricIndicatorButton",iconType:"trash",color:"danger",style:{marginTop:"1.5em"},onClick:x(o),disabled:v,title:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.deleteLabel",{defaultMessage:"Delete metric"}),"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.deleteLabel",{defaultMessage:"Delete metric"})}))),r.a.createElement(Sa,{dataTestSubj:"timesliceMetricIndicatorFormMetricQueryInput",dataView:a,label:`${_i} ${l.name}`,name:`indicator.params.metric.metrics.${o}.filter`,placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.goodQuery.placeholder",{defaultMessage:"KQL filter"}),required:!1,tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.goodQuery.tooltip",{defaultMessage:"This KQL query should return a subset of events."}),position:"top"})}),o!==s.length-1&&r.a.createElement(i.EuiHorizontalRule,{size:"quarter"})))),r.a.createElement(i.EuiFlexGroup,null,r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(i.EuiSpacer,{size:"xs"}),r.a.createElement(i.EuiButtonEmpty,{"data-test-subj":"timesliceMetricIndicatorAddMetricButton",color:"primary",size:"xs",iconType:"plusInCircleFilled",onClick:()=>{var e;const t=null!==(e=m.map((e=>e.name)))&&void 0!==e?e:["A"],a=Object(S.first)(Object(S.xor)(yi,t));y(t,[...t,a]),p({...hi,name:a})},isDisabled:E,"aria-label":n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.addMetricAriaLabel",{defaultMessage:"Add metric"})},r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.timesliceMetric.addMetricLabel",defaultMessage:"Add metric"})),r.a.createElement(i.EuiSpacer,{size:"m"})))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFlexGroup,{gutterSize:"xs"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(o.Controller,{name:"indicator.params.metric.equation",defaultValue:"",rules:{required:!0,validate:{validateEquation:wi}},control:l,render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFormRow,{fullWidth:!0,label:r.a.createElement("span",null,Ti," ",Si),isInvalid:a.invalid,error:[n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.equation.invalidCharacters",{defaultMessage:"The equation field only supports the following characters: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="})]},r.a.createElement(i.EuiFieldText,Z()({},t,{isInvalid:a.invalid,disabled:!b,fullWidth:!0,value:t.value,"data-test-subj":"timesliceMetricEquation",onChange:e=>t.onChange(e.target.value)})))})),r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(o.Controller,{name:"indicator.params.metric.comparator",rules:{required:!0},control:l,render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:a.invalid,label:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.comparatorLabel",{defaultMessage:"Comparator"})},r.a.createElement(i.EuiSelect,Z()({},t,{"data-test-subj":"timesliceMetricComparatorSelection",disabled:!b,value:t.value,options:C.f,onChange:e=>t.onChange(e.target.value)})))})),r.a.createElement(i.EuiFlexItem,{grow:0},r.a.createElement(i.EuiFormRow,{fullWidth:!0,isInvalid:d("indicator.params.metric.threshold").invalid,label:r.a.createElement("span",null,Oi," ",Ci)},r.a.createElement(o.Controller,{name:"indicator.params.metric.threshold",control:l,rules:{required:!0},defaultValue:0,render:({field:{ref:e,...t},fieldState:a})=>r.a.createElement(i.EuiFieldNumber,Z()({},t,{"data-test-subj":"timesliceMetricThreshold",required:!0,isInvalid:a.invalid,value:String(t.value),style:{width:80},disabled:!b,onChange:e=>t.onChange(Number(e.target.value))}))})))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiSpacer,{size:"xs"}),r.a.createElement(i.EuiText,{size:"xs",color:"subdued"},r.a.createElement("p",null,n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.equationHelpText",{defaultMessage:"Supports basic math equations, valid charaters are: A-Z, +, -, /, *, (, ), ?, !, &, :, |, >, <, ="}))))))}const _i=n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.filterLabel",{defaultMessage:"Filter"});function Mi(){var e;const{watch:t}=Object(o.useFormContext)(),a=t("indicator.params.index"),l=t(ce),{dataView:s,loading:u}=Object(be.a)({indexPatternString:a,dataViewId:l}),c=null==s?void 0:s.fields.filter((e=>"date"===e.type)),{uiSettings:d}=Object(m.a)().services,p=t("indicator.params.metric.threshold"),f=t("indicator.params.metric.comparator"),{euiTheme:g}=Object(i.useEuiTheme)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.sourceTitle",defaultMessage:"Source"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"l"},r.a.createElement(i.EuiFlexGroup,{direction:"row",gutterSize:"l"},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(pe,null)),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Ee,{indexFields:null!=c?c:[],name:"indicator.params.timestampField",label:n.i18n.translate("xpack.slo.sloEdit.timestampField.label",{defaultMessage:"Timestamp field"}),placeholder:n.i18n.translate("xpack.slo.sloEdit.timestampField.placeholder",{defaultMessage:"Select a timestamp field"}),isLoading:!!a&&u,isDisabled:!a,isRequired:!0}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(Sa,{dataTestSubj:"timesliceMetricIndicatorFormQueryFilterInput",dataView:s,label:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.customFilter",{defaultMessage:"Custom filter to apply on the index"}),tooltip:r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.customFilter.tooltip",{defaultMessage:"This KQL query can be used to filter the documents with some relevant criteria."}),position:"top"})})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.timesliceMetric.metricTitle",defaultMessage:"Metric definition"}))),r.a.createElement(i.EuiSpacer,{size:"s"}),r.a.createElement(Fi,{indexFields:null!==(e=null==s?void 0:s.fields)&&void 0!==e?e:[],isLoadingIndex:u,dataView:s})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiHorizontalRule,{margin:"none"})),r.a.createElement(Oe,{dataView:s,isLoading:u}),r.a.createElement(Ne,{formatPattern:d.get("format:number:defaultPattern"),threshold:p,thresholdDirection:["GT","GTE"].includes(f)?"above":"below",thresholdColor:g.colors.warning,thresholdMessage:`${C.e[f]} ${p}`,ignoreMoreThan100:!0})))}function ki({isEditMode:e}){const{control:t,watch:a}=Object(o.useFormContext)();!function({isEditMode:e}){const{data:t}=le(),{watch:a,unregister:i,reset:n,resetField:r}=Object(o.useFormContext)(),[s,u]=Object(l.useState)(a("indicator.type")),c=a("indicator.type");Object(l.useEffect)((()=>{if(c!==s&&!e)switch(u(c),i("indicator.params"),c){case"sli.metric.custom":n(Object.assign({},C.l,{indicator:C.h}),{keepDefaultValues:!0});break;case"sli.metric.timeslice":n(Object.assign({},C.l,{budgetingMethod:C.c[1].value,objective:{target:99,timesliceTarget:95,timesliceWindow:1},indicator:C.o}),{keepDefaultValues:!0});break;case"sli.kql.custom":n(Object.assign({},C.l,{indicator:C.g}),{keepDefaultValues:!0});break;case"sli.histogram.custom":n(Object.assign({},C.l,{indicator:C.i}),{keepDefaultValues:!0});break;case"sli.apm.transactionDuration":n(Object.assign({},C.l,{indicator:ne()(C.b,{params:{index:t}})}),{keepDefaultValues:!0});break;case"sli.apm.transactionErrorRate":n(Object.assign({},C.l,{indicator:ne()(C.a,{params:{index:t}})}),{keepDefaultValues:!0});break;case"sli.synthetics.availability":n(Object.assign({},C.m),{keepDefaultValues:!0});break;default:Object(T.assertNever)(c)}}),[e,c,s,i,n,r,t])}({isEditMode:e});const n=a("indicator.type"),s=Object(l.useMemo)((()=>{switch(n){case"sli.kql.custom":return r.a.createElement(Ra,null);case"sli.apm.transactionDuration":return r.a.createElement(Ma,null);case"sli.apm.transactionErrorRate":return r.a.createElement(_a,null);case"sli.synthetics.availability":return r.a.createElement(Ia,null);case"sli.metric.custom":return r.a.createElement(Za,null);case"sli.histogram.custom":return r.a.createElement(ci,null);case"sli.metric.timeslice":return r.a.createElement(Mi,null);default:return null}}),[n]);return r.a.createElement(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:Ri},"data-test-subj":"sloEditFormIndicatorSection"},!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFormRow,{label:Ii},r.a.createElement(o.Controller,{name:"indicator.type",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>r.a.createElement(i.EuiSelect,Z()({},t,{required:!0,"data-test-subj":"sloFormIndicatorTypeSelect",options:C.k,"aria-label":Ii}))})),r.a.createElement(i.EuiSpacer,{size:"xxl"})),s)}const Ii=n.i18n.translate("xpack.slo.sloEdit.definition.sliType",{defaultMessage:"Choose the SLI type"});function Di(){const{control:e,getFieldState:t,watch:a}=Object(o.useFormContext)(),l=a("indicator.type");return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{isInvalid:t("objective.timesliceTarget").invalid,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.timeSliceTarget.label",{defaultMessage:"Timeslice target (%)"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.timeSliceTarget.tooltip",{defaultMessage:"The individual time slices target used to determine whether the slice is good or bad."}),position:"top"}))},r.a.createElement(o.Controller,{name:"objective.timesliceTarget",control:e,defaultValue:95,rules:{required:!0,min:0,max:100},render:({field:{ref:e,onChange:t,...a},fieldState:n})=>r.a.createElement(i.EuiFieldNumber,Z()({},a,{required:!0,disabled:"sli.metric.timeslice"===l,isInvalid:n.invalid,value:a.value,"data-test-subj":"sloFormObjectiveTimesliceTargetInput",min:0,max:100,step:.001,onChange:e=>t(e.target.value)}))}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{isInvalid:t("objective.timesliceWindow").invalid,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.timesliceWindow.label",{defaultMessage:"Timeslice window (in minutes)"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.timesliceWindow.tooltip",{defaultMessage:"The time slice window size used to evaluate the data from."}),position:"top"}))},r.a.createElement(o.Controller,{name:"objective.timesliceWindow",defaultValue:"1",control:e,rules:{required:!0,min:1,max:120},render:({field:{ref:e,onChange:t,...a},fieldState:n})=>r.a.createElement(i.EuiFieldNumber,Z()({},a,{isInvalid:n.invalid,required:!0,"data-test-subj":"sloFormObjectiveTimesliceWindowInput",value:a.value,min:1,max:120,step:1,onChange:e=>t(String(parseInt(e.target.value,10)))}))}))))}function Ai(){var e;const{control:t,watch:a,getFieldState:s,setValue:u,formState:{defaultValues:c}}=Object(o.useFormContext)(),d=Object(i.useGeneratedHtmlId)({prefix:"budgetingSelect"}),m=Object(i.useGeneratedHtmlId)({prefix:"timeWindowTypeSelect"}),p=Object(i.useGeneratedHtmlId)({prefix:"timeWindowSelect"}),f=Object(i.useGeneratedHtmlId)({prefix:"preventBackfill"}),g=a("timeWindow.type"),b=a("indicator.type"),[E,v]=Object(l.useState)(null==c||null===(e=c.timeWindow)||void 0===e?void 0:e.type);return Object(l.useEffect)((()=>{if("calendarAligned"===g&&E!==g){var e,t,a;v(g);const i=C.d.map((e=>e.value)).includes(null!==(e=null==c||null===(t=c.timeWindow)||void 0===t?void 0:t.duration)&&void 0!==e?e:"");u("timeWindow.duration",i?null==c||null===(a=c.timeWindow)||void 0===a?void 0:a.duration:C.d[1].value)}else if("rolling"===g&&E!==g){var i,n,l;const e=C.j.map((e=>e.value)).includes(null!==(i=null==c||null===(n=c.timeWindow)||void 0===n?void 0:n.duration)&&void 0!==i?i:"");v(g),u("timeWindow.duration",e?null==c||null===(l=c.timeWindow)||void 0===l?void 0:l.duration:C.j[1].value)}}),[g,u,c,E]),r.a.createElement(i.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:Ri},"data-test-subj":"sloEditFormObjectiveSection"},r.a.createElement(i.EuiFlexGrid,{columns:3},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.timeWindowType.label",{defaultMessage:"Time window"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.timeWindowType.tooltip",{defaultMessage:"Choose between a rolling or a calendar aligned window."}),position:"top"}))},r.a.createElement(o.Controller,{name:"timeWindow.type",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>r.a.createElement(i.EuiSelect,Z()({},t,{required:!0,id:m,"data-test-subj":"sloFormTimeWindowTypeSelect",options:C.p,value:t.value}))}))),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.timeWindowDuration.label",{defaultMessage:"Duration"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.timeWindowDuration.tooltip",{defaultMessage:"The time window duration used to compute the SLO over."}),position:"top"}))},r.a.createElement(o.Controller,{name:"timeWindow.duration",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>r.a.createElement(i.EuiSelect,Z()({},t,{required:!0,id:p,"data-test-subj":"sloFormTimeWindowDurationSelect",options:"calendarAligned"===g?C.d:C.j,value:t.value}))})))),r.a.createElement(i.EuiSpacer,{size:"l"}),"sli.metric.timeslice"===b&&r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiCallOut,{color:"warning"},r.a.createElement("p",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.timesliceMetric.objectiveMessage",defaultMessage:"The timeslice metric requires the budgeting method to be set to 'Timeslices' due to the nature of the statistical aggregations. The 'timeslice target' is also ignored in favor of the 'threshold' set in the metric definition above. The 'timeslice window' will set the size of the window the aggregation is performed on."}))),r.a.createElement(i.EuiSpacer,{size:"l"})),"sli.synthetics.availability"===b&&r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiCallOut,{color:"warning"},r.a.createElement("p",null,r.a.createElement(h.FormattedMessage,{id:"xpack.slo.sloEdit.sliType.syntheticAvailability.objectiveMessage",defaultMessage:"The Synthetics availability indicator requires the budgeting method to be set to 'Occurrences'."}))),r.a.createElement(i.EuiSpacer,{size:"l"})),r.a.createElement(i.EuiFlexGrid,{columns:3},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.budgetingMethod.label",{defaultMessage:"Budgeting method"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.budgetingMethod.tooltip",{defaultMessage:"Occurrences-based SLO uses the ratio of good events over the total events during the time window. Timeslices-based SLO uses the ratio of good time slices over the total time slices during the time window."}),position:"top"}))},r.a.createElement(o.Controller,{name:"budgetingMethod",control:t,rules:{required:!0},render:({field:{ref:e,...t}})=>r.a.createElement(i.EuiSelect,Z()({},t,{disabled:"sli.metric.timeslice"===b||"sli.synthetics.availability"===b,required:!0,id:d,"data-test-subj":"sloFormBudgetingMethodSelect",options:C.c}))}))),"timeslices"===a("budgetingMethod")?r.a.createElement(Di,null):null),r.a.createElement(i.EuiSpacer,{size:"l"}),r.a.createElement(i.EuiFlexGrid,{columns:3},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{isInvalid:s("objective.target").invalid,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.targetSlo.label",{defaultMessage:"Target / SLO (%)"})," ",r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.targetSlo.tooltip",{defaultMessage:"The target objective in percentage for the SLO."}),position:"top"}))},r.a.createElement(o.Controller,{name:"objective.target",control:t,rules:{required:!0,min:.001,max:99.999},render:({field:{ref:e,onChange:t,...a},fieldState:n})=>r.a.createElement(i.EuiFieldNumber,Z()({},a,{required:!0,isInvalid:n.invalid,"data-test-subj":"sloFormObjectiveTargetInput",value:a.value,min:.001,max:99.999,step:.001,onChange:e=>t(e.target.value)}))})))),r.a.createElement(i.EuiSpacer,{size:"l"}),r.a.createElement(i.EuiFlexGrid,{columns:3},r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFormRow,{isInvalid:s("settings.preventInitialBackfill").invalid},r.a.createElement(o.Controller,{name:"settings.preventInitialBackfill",control:t,render:({field:{ref:e,onChange:t,...a}})=>r.a.createElement(i.EuiCheckbox,{id:f,label:r.a.createElement("span",null,n.i18n.translate("xpack.slo.sloEdit.settings.preventInitialBackfill.label",{defaultMessage:"Prevent initial backfill of data"}),r.a.createElement(i.EuiIconTip,{content:n.i18n.translate("xpack.slo.sloEdit.settings.preventInitialBackfill.tooltip",{defaultMessage:"Start aggregating data from the time the SLO is created, instead of backfilling data from the beginning of the time window."}),position:"top"})),checked:Boolean(a.value),onChange:e=>t(e.target.checked)})})))))}const Ri=775;function Li({slo:e,initialValues:t,onSave:a}){var s;const u=void 0!==e,c=null!==(s=function(){const e=Object(Q.useHistory)();return Object(l.useMemo)((()=>{const t=Object(K.createKbnUrlStateStorage)({history:e,useHash:!1,useHashQuery:!1}).get("_a");return t?function(e){var t,a,i;let n;const l=function(e){var t,a,i,n,l,r,o;if(void 0===e||void 0===e.type)return;const s=e.type;switch(s){case"sli.apm.transactionDuration":return{type:"sli.apm.transactionDuration",params:Object.assign({},C.b.params,null!==(t=e.params)&&void 0!==t?t:{})};case"sli.apm.transactionErrorRate":return{type:"sli.apm.transactionErrorRate",params:Object.assign({},C.a.params,null!==(a=e.params)&&void 0!==a?a:{})};case"sli.synthetics.availability":return{type:"sli.synthetics.availability",params:Object.assign({},C.n.params,null!==(i=e.params)&&void 0!==i?i:{})};case"sli.histogram.custom":return{type:"sli.histogram.custom",params:Object.assign({},C.i.params,null!==(n=e.params)&&void 0!==n?n:{})};case"sli.kql.custom":return{type:"sli.kql.custom",params:Object.assign({},C.g.params,null!==(l=e.params)&&void 0!==l?l:{})};case"sli.metric.custom":return{type:"sli.metric.custom",params:Object.assign({},C.h.params,null!==(r=e.params)&&void 0!==r?r:{})};case"sli.metric.timeslice":return{type:"sli.metric.timeslice",params:Object.assign({},C.o.params,null!==(o=e.params)&&void 0!==o?o:{})};default:Object(T.assertNever)(s)}}(e.indicator);return n="sli.synthetics.availability"===(null==l?void 0:l.type)?Object(S.cloneDeep)(C.m):Object(S.cloneDeep)(C.l),void 0!==l&&(n.indicator=l),e.name&&(n.name=e.name),e.description&&(n.description=e.description),e.tags&&(n.tags=e.tags),e.objective&&e.objective.target&&(n.objective={target:100*e.objective.target},e.objective.timesliceTarget&&e.objective.timesliceWindow&&(n.objective.timesliceTarget=100*e.objective.timesliceTarget,n.objective.timesliceWindow=String(Object(O.c)(e.objective.timesliceWindow).value))),e.budgetingMethod&&(n.budgetingMethod=e.budgetingMethod),e.groupBy&&(n.groupBy=[e.groupBy].flat().filter((e=>!!e))),null!==(t=e.timeWindow)&&void 0!==t&&t.duration&&null!==(a=e.timeWindow)&&void 0!==a&&a.type&&(n.timeWindow={duration:e.timeWindow.duration,type:e.timeWindow.type}),null!==(i=e.settings)&&void 0!==i&&i.preventInitialBackfill&&(n.settings={preventInitialBackfill:e.settings.preventInitialBackfill}),n}(t):void 0}),[e])}())&&void 0!==s?s:t,d=function(e){var t,a;if(e)return{name:e.name,description:e.description,indicator:e.indicator,budgetingMethod:e.budgetingMethod,timeWindow:{duration:e.timeWindow.duration,type:e.timeWindow.type},objective:{target:100*e.objective.target,..."timeslices"===e.budgetingMethod&&e.objective.timesliceTarget&&{timesliceTarget:100*e.objective.timesliceTarget},..."timeslices"===e.budgetingMethod&&e.objective.timesliceWindow&&{timesliceWindow:String(Object(O.c)(e.objective.timesliceWindow).value)}},groupBy:[e.groupBy].flat(),tags:e.tags,settings:{preventInitialBackfill:null!==(t=null===(a=e.settings)||void 0===a?void 0:a.preventInitialBackfill)&&void 0!==t&&t}}}(e),m=Object(o.useForm)({defaultValues:null!=c?c:C.l,values:c||d,mode:"all"}),{watch:p,getFieldState:f,getValues:g,formState:b}=m,{isIndicatorSectionValid:h,isObjectiveSectionValid:E,isDescriptionSectionValid:v}=X({getFieldState:f,getValues:g,formState:b,watch:p}),{showDescriptionSection:y,showObjectiveSection:x}=function(e,t,a,i){const[n,r]=Object(l.useState)(e),[o,s]=Object(l.useState)(e);return Object(l.useEffect)((()=>{t||o||!a||s(!0)}),[o,a,t]),Object(l.useEffect)((()=>{!t&&!n&&a&&i&&r(!0)}),[n,a,i,t]),{showDescriptionSection:n,showObjectiveSection:o}}(u,b.isValidating,h,E);return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.FormProvider,m,r.a.createElement(i.EuiFlexGroup,{direction:"column",gutterSize:"s","data-test-subj":"sloForm"},r.a.createElement(i.EuiSteps,{steps:[{title:n.i18n.translate("xpack.slo.sloEdit.definition.title",{defaultMessage:"Define SLI"}),children:r.a.createElement(ki,{isEditMode:u}),status:h?"complete":"incomplete"},{title:n.i18n.translate("xpack.slo.sloEdit.objectives.title",{defaultMessage:"Set objectives"}),children:x?r.a.createElement(Ai,null):null,status:x&&E?"complete":"incomplete"},{title:n.i18n.translate("xpack.slo.sloEdit.description.title",{defaultMessage:"Describe SLO"}),children:y?r.a.createElement(te,null):null,status:y&&v?"complete":"incomplete"}]}),r.a.createElement(i.EuiSpacer,{size:"m"}),r.a.createElement($,{slo:e,onSave:a}))))}},213:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(134);function n(e,t){var a;const n=t?t(e):function(e){var t;return e.timeSeriesMetric||(null!==(t=e.type)&&void 0!==t?t:"string")}(e),l=(null===(a=e.esTypes)||void 0===a?void 0:a[0])||null;return l&&["_id","_index","_ignored"].includes(l)&&"string"===n?"keyword":"unknown"===n&&l&&Object(i.c)(l)||"string"===n&&l?l:n}},229:function(e,t,a){"use strict";a.r(t),a.d(t,"sloEditFormFooterPortal",(function(){return c}));var i=a(29),n=a(0),l=a.n(n),r=a(6),o=a(30),s=a(187),u=a(208);const c=Object(s.c)();t.default=function({onClose:e,initialValues:t}){return l.a.createElement(r.EuiFlyout,{onClose:e,"aria-labelledby":"flyoutSLOAddTitle",size:"l",maxWidth:620,ownFocus:!0},l.a.createElement(r.EuiFlyoutHeader,{hasBorder:!0},l.a.createElement(r.EuiTitle,{size:"s","data-test-subj":"addSLOFlyoutTitle"},l.a.createElement("h3",{id:"flyoutTitle"},l.a.createElement(i.FormattedMessage,{defaultMessage:"Create SLO",id:"xpack.slo.add.flyoutTitle"})))),l.a.createElement(r.EuiFlyoutBody,null,l.a.createElement(u.a,{onSave:e,initialValues:t?Object(o.merge)({indicator:{type:"sli.kql.custom"},objective:{target:99},timeWindow:{duration:"30d",type:"rolling"},budgetingMethod:"occurrences"},{...t}):void 0})),l.a.createElement(r.EuiFlyoutFooter,null,l.a.createElement(s.b,{node:c})))}},230:function(e,t,a){var i,n=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",i={};function n(e,t){if(!i[e]){i[e]={};for(var a=0;a<e.length;a++)i[e][e.charAt(a)]=a}return i[e][t]}var l={compressToBase64:function(e){if(null==e)return"";var a=l._compress(e,6,(function(e){return t.charAt(e)}));switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:l._decompress(e.length,32,(function(a){return n(t,e.charAt(a))}))},compressToUTF16:function(t){return null==t?"":l._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:l._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=l.compress(e),a=new Uint8Array(2*t.length),i=0,n=t.length;i<n;i++){var r=t.charCodeAt(i);a[2*i]=r>>>8,a[2*i+1]=r%256}return a},decompressFromUint8Array:function(t){if(null==t)return l.decompress(t);for(var a=new Array(t.length/2),i=0,n=a.length;i<n;i++)a[i]=256*t[2*i]+t[2*i+1];var r=[];return a.forEach((function(t){r.push(e(t))})),l.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":l._compress(e,6,(function(e){return a.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),l._decompress(e.length,32,(function(t){return n(a,e.charAt(t))})))},compress:function(t){return l._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,a){if(null==e)return"";var i,n,l,r={},o={},s="",u="",c="",d=2,m=3,p=2,f=[],g=0,b=0;for(l=0;l<e.length;l+=1)if(s=e.charAt(l),Object.prototype.hasOwnProperty.call(r,s)||(r[s]=m++,o[s]=!0),u=c+s,Object.prototype.hasOwnProperty.call(r,u))c=u;else{if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(i=0;i<p;i++)g<<=1,b==t-1?(b=0,f.push(a(g)),g=0):b++;for(n=c.charCodeAt(0),i=0;i<8;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1}else{for(n=1,i=0;i<p;i++)g=g<<1|n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n=0;for(n=c.charCodeAt(0),i=0;i<16;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1}0==--d&&(d=Math.pow(2,p),p++),delete o[c]}else for(n=r[c],i=0;i<p;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1;0==--d&&(d=Math.pow(2,p),p++),r[u]=m++,c=String(s)}if(""!==c){if(Object.prototype.hasOwnProperty.call(o,c)){if(c.charCodeAt(0)<256){for(i=0;i<p;i++)g<<=1,b==t-1?(b=0,f.push(a(g)),g=0):b++;for(n=c.charCodeAt(0),i=0;i<8;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1}else{for(n=1,i=0;i<p;i++)g=g<<1|n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n=0;for(n=c.charCodeAt(0),i=0;i<16;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1}0==--d&&(d=Math.pow(2,p),p++),delete o[c]}else for(n=r[c],i=0;i<p;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1;0==--d&&(d=Math.pow(2,p),p++)}for(n=2,i=0;i<p;i++)g=g<<1|1&n,b==t-1?(b=0,f.push(a(g)),g=0):b++,n>>=1;for(;;){if(g<<=1,b==t-1){f.push(a(g));break}b++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:l._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,a,i){var n,l,r,o,s,u,c,d=[],m=4,p=4,f=3,g="",b=[],h={val:i(0),position:a,index:1};for(n=0;n<3;n+=1)d[n]=n;for(r=0,s=Math.pow(2,2),u=1;u!=s;)o=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=i(h.index++)),r|=(o>0?1:0)*u,u<<=1;switch(r){case 0:for(r=0,s=Math.pow(2,8),u=1;u!=s;)o=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=i(h.index++)),r|=(o>0?1:0)*u,u<<=1;c=e(r);break;case 1:for(r=0,s=Math.pow(2,16),u=1;u!=s;)o=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=i(h.index++)),r|=(o>0?1:0)*u,u<<=1;c=e(r);break;case 2:return""}for(d[3]=c,l=c,b.push(c);;){if(h.index>t)return"";for(r=0,s=Math.pow(2,f),u=1;u!=s;)o=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=i(h.index++)),r|=(o>0?1:0)*u,u<<=1;switch(c=r){case 0:for(r=0,s=Math.pow(2,8),u=1;u!=s;)o=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=i(h.index++)),r|=(o>0?1:0)*u,u<<=1;d[p++]=e(r),c=p-1,m--;break;case 1:for(r=0,s=Math.pow(2,16),u=1;u!=s;)o=h.val&h.position,h.position>>=1,0==h.position&&(h.position=a,h.val=i(h.index++)),r|=(o>0?1:0)*u,u<<=1;d[p++]=e(r),c=p-1,m--;break;case 2:return b.join("")}if(0==m&&(m=Math.pow(2,f),f++),d[c])g=d[c];else{if(c!==p)return null;g=l+l.charAt(0)}b.push(g),d[p++]=l+g.charAt(0),l=g,0==--m&&(m=Math.pow(2,f),f++)}}};return l}();void 0===(i=function(){return n}.call(t,a,t,e))||(e.exports=i)},231:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(36),n=a(0),l=i.__importDefault(a(188));t.default=function(e,t){void 0===t&&(t=[]);var a=l.default(e,t,{loading:!0}),i=a[0],r=a[1];return n.useEffect((function(){r()}),[r]),i}},232:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},233:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(234);case"v8light":return a(236)}},234:function(e,t,a){var i=a(82),n=a(235);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},235:function(e,t,a){(t=a(83)(!1)).push([e.i,".unifiedDataTable{height:100%;max-width:100%;overflow:hidden;width:100%}.unifiedDataTable__cellValue{font-family:Roboto Mono,Menlo,Courier,monospace}.unifiedDataTable__cell--expanded,.unifiedDataTable__cell--selected{background-color:#2e2d25}.unifiedDataTable__cellPopover .lines-content.monaco-editor-background{contain:unset!important;overflow:unset!important}.unifiedDataTable__cellPopoverValue{font-family:Roboto Mono,Menlo,Courier,monospace;font-size:14px}.unifiedDataTable__inner{display:flex;flex-direction:column;flex-wrap:nowrap;height:100%}.unifiedDataTable__inner .euiDataGrid__content{background:#0000}.unifiedDataTable__inner .euiDataGridHeaderCell{align-items:start}.unifiedDataTable__inner .euiDataGridHeaderCell:not(.euiDataGridHeaderCell--controlColumn) .euiDataGridHeaderCell__button{align-items:flex-start;height:100%}.unifiedDataTable__inner .euiDataGrid--headerUnderline .euiDataGridHeaderCell{border-bottom:1px solid #343741}.unifiedDataTable__inner .euiDataGridRowCell--controlColumn .euiDataGridRowCell__content,.unifiedDataTable__inner .euiDataGridRowCell.euiDataGridRowCell--controlColumn[data-gridcell-column-id=openDetails],.unifiedDataTable__inner .euiDataGridRowCell.euiDataGridRowCell--controlColumn[data-gridcell-column-id=select]{padding-left:0;padding-right:0}.unifiedDataTable__inner .euiDataGrid--rowHoverHighlight .euiDataGridRow:hover{background-color:#343741}.unifiedDataTable__inner .euiDataGrid__scrollOverlay .euiDataGrid__scrollBarOverlayRight{background-color:#0000}.unifiedDataTable__inner .euiDataGridRowCell__content--autoHeight,.unifiedDataTable__inner .euiDataGridRowCell__content--lineCountHeight{white-space:pre-wrap}.unifiedDataTable__table{flex-grow:1;flex-shrink:1;min-height:0}.euiDataGridHeader .euiDataGridHeaderCell__content{white-space:pre-wrap}.euiDataGridHeader .euiDataGridHeaderCell__popover{flex-basis:auto;flex-grow:0;padding-left:4px;width:auto}.euiDataGridRowCell--numeric{text-align:right}.euiDataGrid__loading,.euiDataGrid__noResults{display:flex;flex:1 0 100%;flex-direction:column;height:100%;justify-content:center;text-align:center;width:100%}.unifiedDataTableFormatSource{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.unifiedDataTable__rowControl{margin-top:-4px}.euiDataGridRowCell__content--defaultHeight .unifiedDataTable__rowControl{margin-top:0}.euiDataGridRowCell__content--defaultHeight .unifiedDataTable__descriptionList{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;height:100%;overflow:hidden}.unifiedDataTable__descriptionListTitle{background:#0000;font-weight:700;line-height:inherit;margin-inline:0 0;padding-inline:0}.unifiedDataTable__descriptionListDescription{line-height:inherit;margin-inline:8px 8px;padding-inline:0;white-space:normal;word-break:break-all}.unifiedDataTable__descriptionListDescription img{max-height:1.1428571429rem!important;max-width:500px!important;vertical-align:middle}@media only screen and (max-width:574px){.unifiedDataTable__flyoutDocumentNavigation .euiPagination__compressedText{display:none}}@media only screen and (min-width:575px)and (max-width:767px){.unifiedDataTable__flyoutDocumentNavigation .euiPagination__compressedText{display:none}}@media only screen and (min-width:768px)and (max-width:991px){.unifiedDataTable__flyoutDocumentNavigation .euiPagination__compressedText{display:none}}.unifiedDataTable__fullScreen :not(.euiDataGrid--fullScreen,.euiDataGrid--fullScreen *,[data-euiportal=true],[data-euiportal=true] *){z-index:unset!important}",""]),e.exports=t},236:function(e,t,a){var i=a(82),n=a(237);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},237:function(e,t,a){(t=a(83)(!1)).push([e.i,".unifiedDataTable{height:100%;max-width:100%;overflow:hidden;width:100%}.unifiedDataTable__cellValue{font-family:Roboto Mono,Menlo,Courier,monospace}.unifiedDataTable__cell--expanded,.unifiedDataTable__cell--selected{background-color:#fff9e8}.unifiedDataTable__cellPopover .lines-content.monaco-editor-background{contain:unset!important;overflow:unset!important}.unifiedDataTable__cellPopoverValue{font-family:Roboto Mono,Menlo,Courier,monospace;font-size:14px}.unifiedDataTable__inner{display:flex;flex-direction:column;flex-wrap:nowrap;height:100%}.unifiedDataTable__inner .euiDataGrid__content{background:#0000}.unifiedDataTable__inner .euiDataGridHeaderCell{align-items:start}.unifiedDataTable__inner .euiDataGridHeaderCell:not(.euiDataGridHeaderCell--controlColumn) .euiDataGridHeaderCell__button{align-items:flex-start;height:100%}.unifiedDataTable__inner .euiDataGrid--headerUnderline .euiDataGridHeaderCell{border-bottom:1px solid #d3dae6}.unifiedDataTable__inner .euiDataGridRowCell--controlColumn .euiDataGridRowCell__content,.unifiedDataTable__inner .euiDataGridRowCell.euiDataGridRowCell--controlColumn[data-gridcell-column-id=openDetails],.unifiedDataTable__inner .euiDataGridRowCell.euiDataGridRowCell--controlColumn[data-gridcell-column-id=select]{padding-left:0;padding-right:0}.unifiedDataTable__inner .euiDataGrid--rowHoverHighlight .euiDataGridRow:hover{background-color:#e9edf3}.unifiedDataTable__inner .euiDataGrid__scrollOverlay .euiDataGrid__scrollBarOverlayRight{background-color:#0000}.unifiedDataTable__inner .euiDataGridRowCell__content--autoHeight,.unifiedDataTable__inner .euiDataGridRowCell__content--lineCountHeight{white-space:pre-wrap}.unifiedDataTable__table{flex-grow:1;flex-shrink:1;min-height:0}.euiDataGridHeader .euiDataGridHeaderCell__content{white-space:pre-wrap}.euiDataGridHeader .euiDataGridHeaderCell__popover{flex-basis:auto;flex-grow:0;padding-left:4px;width:auto}.euiDataGridRowCell--numeric{text-align:right}.euiDataGrid__loading,.euiDataGrid__noResults{display:flex;flex:1 0 100%;flex-direction:column;height:100%;justify-content:center;text-align:center;width:100%}.unifiedDataTableFormatSource{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}.unifiedDataTable__rowControl{margin-top:-4px}.euiDataGridRowCell__content--defaultHeight .unifiedDataTable__rowControl{margin-top:0}.euiDataGridRowCell__content--defaultHeight .unifiedDataTable__descriptionList{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;height:100%;overflow:hidden}.unifiedDataTable__descriptionListTitle{background:#0000;font-weight:700;line-height:inherit;margin-inline:0 0;padding-inline:0}.unifiedDataTable__descriptionListDescription{line-height:inherit;margin-inline:8px 8px;padding-inline:0;white-space:normal;word-break:break-all}.unifiedDataTable__descriptionListDescription img{max-height:1.1428571429rem!important;max-width:500px!important;vertical-align:middle}@media only screen and (max-width:574px){.unifiedDataTable__flyoutDocumentNavigation .euiPagination__compressedText{display:none}}@media only screen and (min-width:575px)and (max-width:767px){.unifiedDataTable__flyoutDocumentNavigation .euiPagination__compressedText{display:none}}@media only screen and (min-width:768px)and (max-width:991px){.unifiedDataTable__flyoutDocumentNavigation .euiPagination__compressedText{display:none}}.unifiedDataTable__fullScreen :not(.euiDataGrid--fullScreen,.euiDataGrid--fullScreen *,[data-euiportal=true],[data-euiportal=true] *){z-index:unset!important}",""]),e.exports=t},238:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var i=a(97);function n(e,t,a,n,l,r,o){const s=null!=r?r:"html",u={hit:t,field:l,...o};return n&&l?n.getFormatterForField(l).convert(e,s,u):a.getDefaultInstance(i.b.STRING).convert(e,s,u)}},239:function(e,t,a){var i=a(82),n=a(240);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},240:function(e,t,a){(t=a(83)(!1)).push([e.i,".unifiedDataTableJsonEditor{width:100%}",""]),e.exports=t},241:function(e,t,a){var i=a(82),n=a(242);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);i(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},242:function(e,t,a){(t=a(83)(!1)).push([e.i,".unifiedDataTableJsonEditor{width:100%}",""]),e.exports=t},351:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(0),n=a.n(i),l=a(28);const r=()=>Object(l.jsx)(i.Fragment,null),o=n.a.lazy((()=>a.e(22).then(a.bind(null,311)))),s=function(e){return Object(l.jsx)(n.a.Suspense,{fallback:Object(l.jsx)(r,null)},Object(l.jsx)(o,e))}},352:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(30);const n=["_type","_source"];function l(e,t,a,n,r){for(const o in t){if(!t.hasOwnProperty(o))continue;const s=t[o],u=a+o,c=null==n?void 0:n.fields.getByName(u);if(!1===(null==r?void 0:r.shallow)){const t="nested"===(null==c?void 0:c.type);if(Array.isArray(s)&&!t){for(let t=0;t<s.length;t++){const a=s[t];Object(i.isPlainObject)(a)&&l(e,a,u+".",n,r)}continue}}else if(void 0!==e[u])continue;const d=c&&"conflict"!==c.type,m=!Object(i.isPlainObject)(s);d||m?e[u]?Array.isArray(e[u])?e[u].push(s):e[u]=[e[u],s]:e[u]=s:l(e,s,u+".",n,r)}}function r(e,t,a){const i={};if(l(i,e.fields||{},"",t,a),!1!==(null==a?void 0:a.source)&&e._source)l(i,e._source,"",t,a);else if(null!=a&&a.includeIgnoredValues&&e.ignored_field_values)for(const t in e.ignored_field_values){if(!e.ignored_field_values.hasOwnProperty(t))continue;const a=e.ignored_field_values[t];i[t]?Array.isArray(i[t])?i[t]=[...i[t],...a]:i[t]=[i[t],...a]:i[t]=a}if(null!=t&&t.metaFields)for(let a=0;a<(null==t?void 0:t.metaFields.length);a++){const l=null==t?void 0:t.metaFields[a];n.includes(l)||"_"!==l.charAt(0)||(i[l]=e[l])}return function(e,t){function a(e,a){var i,n;const l=null==t||null===(i=t.metaFields)||void 0===i?void 0:i.includes(String(e)),r=null==t||null===(n=t.metaFields)||void 0===n?void 0:n.includes(String(a));return l&&r?String(e).localeCompare(String(a)):l?1:r?-1:String(e).localeCompare(String(a))}return new Proxy(e,{ownKeys:e=>Reflect.ownKeys(e).sort(a)})}(i,t)}},365:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var i=a(0),n=a.n(i),l=a(76),r=a.n(l),o=a(84),s=a.n(o),u=a(28);const c=n.a.createContext(null),d=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:i}=t;return Object(u.jsx)(c.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)},m=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:i}=t.application,n=s()(i,void 0);return Object(u.jsx)(c.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},p={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},f=({children:e,navigateToUrl:t,currentAppId:a,...n})=>{const l=Object(i.useRef)(null),o=Object(i.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:i})=>{if(!t||!i)return;const n=((e,t)=>{let a=e;do{var i,n;if("a"===(null===(i=a)||void 0===i?void 0:i.tagName.toLowerCase()))return a;const e=null===(n=a)||void 0===n?void 0:n.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!n)return;const l=n.href,r=""===n.target||"_self"===n.target,o=0===e.button;l&&r&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(n.href))})({event:e,currentAppId:a,navigateToUrl:t,container:l.current})),[a,t]);return Object(u.jsx)("div",r()({onClick:o,ref:l,css:p,"data-test-subj":"kbnRedirectAppLink"},n),e)},g=({children:e,...t})=>Object(u.jsx)(f,r()({},function(){const e=Object(i.useContext)(c);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),b=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...i}=t,n=Object(u.jsx)(g,i,e);return Object(u.jsx)(m,{coreStart:a},n)}const{navigateToUrl:a,currentAppId:i,...n}=t,l=Object(u.jsx)(g,n,e);return Object(u.jsx)(d,{currentAppId:i,navigateToUrl:a},l)}},76:function(e,t,a){e.exports=a(24)(4)},77:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=(i=a(0))&&"object"==typeof i&&"default"in i?i:{default:i},l=e=>"checkbox"===e.type,r=e=>e instanceof Date,o=e=>null==e;const s=e=>"object"==typeof e;var u=e=>!o(e)&&!Array.isArray(e)&&s(e)&&!r(e),c=e=>u(e)&&e.target?l(e.target)?e.target.checked:e.target.value:e,d=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),m="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;const a=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(m&&(e instanceof Blob||e instanceof FileList)||!a&&!u(e))return e;if(t=a?[]:{},a||(e=>{const t=e.constructor&&e.constructor.prototype;return u(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=p(e[a]));else t=e}return t}var f=e=>Array.isArray(e)?e.filter(Boolean):[],g=e=>void 0===e,b=(e,t,a)=>{if(!t||!u(e))return a;const i=f(t.split(/[,[\].]+?/)).reduce(((e,t)=>o(e)?e:e[t]),e);return g(i)||i===e?g(e[t])?a:e[t]:i};const h="blur",E="onChange",v="onSubmit",y="all",x="pattern",w="required",j=n.default.createContext(null),T=()=>n.default.useContext(j);var S=(e,t,a,i=!0)=>{const n={defaultValues:t._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const n=l;return t._proxyFormState[n]!==y&&(t._proxyFormState[n]=!i||y),a&&(a[n]=!0),e[n]}});return n},O=e=>u(e)&&!Object.keys(e).length,C=(e,t,a,i)=>{a(e);const{name:n,...l}=e;return O(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find((e=>t[e]===(!i||y)))},F=e=>Array.isArray(e)?e:[e],_=(e,t,a)=>a&&t?e===t:!e||!t||e===t||F(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function M(e){const t=n.default.useRef(e);t.current=e,n.default.useEffect((()=>{const a=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{a&&a.unsubscribe()}}),[e.disabled])}function k(e){const t=T(),{control:a=t.control,disabled:i,name:l,exact:r}=e||{},[o,s]=n.default.useState(a._formState),u=n.default.useRef(!0),c=n.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=n.default.useRef(l);return d.current=l,M({disabled:i,next:e=>u.current&&_(d.current,e.name,r)&&C(e,c.current,a._updateFormState)&&s({...a._formState,...e}),subject:a._subjects.state}),n.default.useEffect((()=>(u.current=!0,c.current.isValid&&a._updateValid(!0),()=>{u.current=!1})),[a]),S(o,a,c.current,!1)}var I=e=>"string"==typeof e,D=(e,t,a,i,n)=>I(e)?(i&&t.watch.add(e),b(a,e,n)):Array.isArray(e)?e.map((e=>(i&&t.watch.add(e),b(a,e)))):(i&&(t.watchAll=!0),a);function A(e){const t=T(),{control:a=t.control,name:i,defaultValue:l,disabled:r,exact:o}=e||{},s=n.default.useRef(i);s.current=i,M({disabled:r,subject:a._subjects.values,next:e=>{_(s.current,e.name,o)&&c(p(D(s.current,a._names,e.values||a._formValues,!1,l)))}});const[u,c]=n.default.useState(a._getWatch(i,l));return n.default.useEffect((()=>a._removeUnmounted())),u}var R=e=>/^\w*$/.test(e),L=e=>f(e.replace(/["|']|\]/g,"").split(/\.|\[/));function N(e,t,a){let i=-1;const n=R(t)?[t]:L(t),l=n.length,r=l-1;for(;++i<l;){const t=n[i];let l=a;if(i!==r){const a=e[t];l=u(a)||Array.isArray(a)?a:isNaN(+n[i+1])?{}:[]}e[t]=l,e=e[t]}return e}function V(e){const t=T(),{name:a,control:i=t.control,shouldUnregister:l}=e,r=d(i._names.array,a),o=A({control:i,name:a,defaultValue:b(i._formValues,a,b(i._defaultValues,a,e.defaultValue)),exact:!0}),s=k({control:i,name:a}),u=n.default.useRef(i.register(a,{...e.rules,value:o}));return u.current=i.register(a,e.rules),n.default.useEffect((()=>{const e=i._options.shouldUnregister||l,t=(e,t)=>{const a=b(i._fields,e);a&&(a._f.mount=t)};if(t(a,!0),e){const e=p(b(i._options.defaultValues,a));N(i._defaultValues,a,e),g(b(i._formValues,a))&&N(i._formValues,a,e)}return()=>{(r?e&&!i._state.action:e)?i.unregister(a):t(a,!1)}}),[a,i,r,l]),{field:{name:a,value:o,onChange:n.default.useCallback((e=>u.current.onChange({target:{value:c(e),name:a},type:"change"})),[a]),onBlur:n.default.useCallback((()=>u.current.onBlur({target:{value:b(i._formValues,a),name:a},type:h})),[a,i]),ref:e=>{const t=b(i._fields,a);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:s,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!b(s.errors,a)},isDirty:{enumerable:!0,get:()=>!!b(s.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!b(s.touchedFields,a)},error:{enumerable:!0,get:()=>b(s.errors,a)}})}}const P="post";var B=(e,t,a,i,n)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[i]:n||!0}}:{};const G=(e,t,a)=>{for(const i of a||Object.keys(e)){const a=b(e,i);if(a){const{_f:e,...i}=a;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else u(i)&&G(i,t)}}};var H=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const a=(16*Math.random()+e)%16|0;return("x"==t?a:3&a|8).toString(16)}))},W=(e,t,a={})=>a.shouldFocus||g(a.shouldFocus)?a.focusName||`${e}.${g(a.focusIndex)?t:a.focusIndex}.`:"",z=e=>({isOnSubmit:!e||e===v,isOnBlur:"onBlur"===e,isOnChange:e===E,isOnAll:e===y,isOnTouch:"onTouched"===e}),q=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),U=(e,t,a)=>{const i=f(b(e,a));return N(i,"root",t[a]),N(e,a,i),e},$=e=>"boolean"==typeof e,K=e=>"file"===e.type,Q=e=>"function"==typeof e,J=e=>{if(!m)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},X=e=>I(e),Y=e=>"radio"===e.type,Z=e=>e instanceof RegExp;const ee={value:!1,isValid:!1},te={value:!0,isValid:!0};var ae=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!g(e[0].attributes.value)?g(e[0].value)||""===e[0].value?te:{value:e[0].value,isValid:!0}:te:ee}return ee};const ie={isValid:!1,value:null};var ne=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),ie):ie;function le(e,t,a="validate"){if(X(e)||Array.isArray(e)&&e.every(X)||$(e)&&!e)return{type:a,message:X(e)?e:"",ref:t}}var re=e=>u(e)&&!Z(e)?e:{value:e,message:""},oe=async(e,t,a,i,n)=>{const{ref:r,refs:s,required:c,maxLength:d,minLength:m,min:p,max:f,pattern:h,validate:E,name:v,valueAsNumber:y,mount:j,disabled:T}=e._f,S=b(t,v);if(!j||T)return{};const C=s?s[0]:r,F=e=>{i&&C.reportValidity&&(C.setCustomValidity($(e)?"":e||""),C.reportValidity())},_={},M=Y(r),k=l(r),D=M||k,A=(y||K(r))&&g(r.value)&&g(S)||J(r)&&""===r.value||""===S||Array.isArray(S)&&!S.length,R=B.bind(null,v,a,_),L=(e,t,a,i="maxLength",n="minLength")=>{const l=e?t:a;_[v]={type:e?i:n,message:l,ref:r,...R(e?i:n,l)}};if(n?!Array.isArray(S)||!S.length:c&&(!D&&(A||o(S))||$(S)&&!S||k&&!ae(s).isValid||M&&!ne(s).isValid)){const{value:e,message:t}=X(c)?{value:!!c,message:c}:re(c);if(e&&(_[v]={type:w,message:t,ref:C,...R(w,t)},!a))return F(t),_}if(!(A||o(p)&&o(f))){let e,t;const i=re(f),n=re(p);if(o(S)||isNaN(S)){const a=r.valueAsDate||new Date(S),l=e=>new Date((new Date).toDateString()+" "+e),o="time"==r.type,s="week"==r.type;I(i.value)&&S&&(e=o?l(S)>l(i.value):s?S>i.value:a>new Date(i.value)),I(n.value)&&S&&(t=o?l(S)<l(n.value):s?S<n.value:a<new Date(n.value))}else{const a=r.valueAsNumber||(S?+S:S);o(i.value)||(e=a>i.value),o(n.value)||(t=a<n.value)}if((e||t)&&(L(!!e,i.message,n.message,"max","min"),!a))return F(_[v].message),_}if((d||m)&&!A&&(I(S)||n&&Array.isArray(S))){const e=re(d),t=re(m),i=!o(e.value)&&S.length>+e.value,n=!o(t.value)&&S.length<+t.value;if((i||n)&&(L(i,e.message,t.message),!a))return F(_[v].message),_}if(h&&!A&&I(S)){const{value:e,message:t}=re(h);if(Z(e)&&!S.match(e)&&(_[v]={type:x,message:t,ref:r,...R(x,t)},!a))return F(t),_}if(E)if(Q(E)){const e=le(await E(S,t),C);if(e&&(_[v]={...e,...R("validate",e.message)},!a))return F(e.message),_}else if(u(E)){let e={};for(const i in E){if(!O(e)&&!a)break;const n=le(await E[i](S,t),C,i);n&&(e={...n,...R(i,n.message)},F(n.message),a&&(_[v]=e))}if(!O(e)&&(_[v]={ref:C,...e},!a))return _}return F(!0),_};function se(e,t){return[...e,...F(t)]}var ue=e=>Array.isArray(e)?e.map((()=>{})):void 0;function ce(e,t,a){return[...e.slice(0,t),...F(a),...e.slice(t)]}var de=(e,t,a)=>Array.isArray(e)?(g(e[a])&&(e[a]=void 0),e.splice(a,0,e.splice(t,1)[0]),e):[];function me(e,t){return[...F(t),...F(e)]}var pe=(e,t)=>g(t)?[]:function(e,t){let a=0;const i=[...e];for(const e of t)i.splice(e-a,1),a++;return f(i).length?i:[]}(e,F(t).sort(((e,t)=>e-t))),fe=(e,t,a)=>{e[t]=[e[a],e[a]=e[t]][0]};function ge(e,t){const a=Array.isArray(t)?t:R(t)?[t]:L(t),i=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let i=0;for(;i<a;)e=g(e)?i++:e[t[i++]];return e}(e,a),n=a.length-1,l=a[n];return i&&delete i[l],0!==n&&(u(i)&&O(i)||Array.isArray(i)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!g(e[t]))return!1;return!0}(i))&&ge(e,a.slice(0,-1)),e}var be=(e,t,a)=>(e[t]=a,e);function he(){let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Ee=e=>o(e)||!s(e);function ve(e,t){if(Ee(e)||Ee(t))return e===t;if(r(e)&&r(t))return e.getTime()===t.getTime();const a=Object.keys(e),i=Object.keys(t);if(a.length!==i.length)return!1;for(const n of a){const a=e[n];if(!i.includes(n))return!1;if("ref"!==n){const e=t[n];if(r(a)&&r(e)||u(a)&&u(e)||Array.isArray(a)&&Array.isArray(e)?!ve(a,e):a!==e)return!1}}return!0}var ye=e=>"select-multiple"===e.type,xe=e=>J(e)&&e.isConnected,we=e=>{for(const t in e)if(Q(e[t]))return!0;return!1};function je(e,t={}){const a=Array.isArray(e);if(u(e)||a)for(const a in e)Array.isArray(e[a])||u(e[a])&&!we(e[a])?(t[a]=Array.isArray(e[a])?[]:{},je(e[a],t[a])):o(e[a])||(t[a]=!0);return t}function Te(e,t,a){const i=Array.isArray(e);if(u(e)||i)for(const i in e)Array.isArray(e[i])||u(e[i])&&!we(e[i])?g(t)||Ee(a[i])?a[i]=Array.isArray(e[i])?je(e[i],[]):{...je(e[i])}:Te(e[i],o(t)?{}:t[i],a[i]):a[i]=!ve(e[i],t[i]);return a}var Se=(e,t)=>Te(e,t,je(t)),Oe=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:i})=>g(e)?e:t?""===e?NaN:e?+e:e:a&&I(e)?new Date(e):i?i(e):e;function Ce(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return K(t)?t.files:Y(t)?ne(e.refs).value:ye(t)?[...t.selectedOptions].map((({value:e})=>e)):l(t)?ae(e.refs).value:Oe(g(t.value)?e.ref.value:t.value,e)}var Fe=e=>g(e)?e:Z(e)?e.source:u(e)?Z(e.value)?e.value.source:e.value:e;function _e(e,t,a){const i=b(e,a);if(i||R(a))return{error:i,name:a};const n=a.split(".");for(;n.length;){const i=n.join("."),l=b(t,i),r=b(e,i);if(l&&!Array.isArray(l)&&a!==i)return{name:a};if(r&&r.type)return{name:i,error:r};n.pop()}return{name:a}}const Me={mode:v,reValidateMode:E,shouldFocusError:!0};function ke(e={},t){let a,i={...Me,...e},n={submitCount:0,isDirty:!1,isLoading:Q(i.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},s={},E=(u(i.defaultValues)||u(i.values))&&p(i.defaultValues||i.values)||{},v=i.shouldUnregister?{}:p(E),x={action:!1,mount:!1,watch:!1},w={mount:new Set,unMount:new Set,array:new Set,watch:new Set},j=0;const T={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},S={values:he(),array:he(),state:he()},C=e.resetOptions&&e.resetOptions.keepDirtyValues,_=z(i.mode),M=z(i.reValidateMode),k=i.criteriaMode===y,A=async e=>{if(T.isValid||e){const e=i.resolver?O((await B()).errors):await H(s,!0);e!==n.isValid&&S.state.next({isValid:e})}},R=e=>T.isValidating&&S.state.next({isValidating:e}),L=(e,t,a,i)=>{const n=b(s,e);if(n){const l=b(v,e,g(a)?b(E,e):a);g(l)||i&&i.defaultChecked||t?N(v,e,t?l:Ce(n._f)):Z(e,l),x.mount&&A()}},V=(e,t,a,i,l)=>{let r=!1,o=!1;const s={name:e};if(!a||i){T.isDirty&&(o=n.isDirty,n.isDirty=s.isDirty=W(),r=o!==s.isDirty);const a=ve(b(E,e),t);o=b(n.dirtyFields,e),a?ge(n.dirtyFields,e):N(n.dirtyFields,e,!0),s.dirtyFields=n.dirtyFields,r=r||T.dirtyFields&&o!==!a}if(a){const t=b(n.touchedFields,e);t||(N(n.touchedFields,e,a),s.touchedFields=n.touchedFields,r=r||T.touchedFields&&t!==a)}return r&&l&&S.state.next(s),r?s:{}},P=(t,i,l,r)=>{const o=b(n.errors,t),s=T.isValid&&$(i)&&n.isValid!==i;var u;if(e.delayError&&l?(u=()=>((e,t)=>{N(n.errors,e,t),S.state.next({errors:n.errors})})(t,l),a=e=>{clearTimeout(j),j=setTimeout(u,e)},a(e.delayError)):(clearTimeout(j),a=null,l?N(n.errors,t,l):ge(n.errors,t)),(l?!ve(o,l):o)||!O(r)||s){const e={...r,...s&&$(i)?{isValid:i}:{},errors:n.errors,name:t};n={...n,...e},S.state.next(e)}R(!1)},B=async e=>i.resolver(v,i.context,((e,t,a,i)=>{const n={};for(const a of e){const e=b(t,a);e&&N(n,a,e._f)}return{criteriaMode:a,names:[...e],fields:n,shouldUseNativeValidation:i}})(e||w.mount,s,i.criteriaMode,i.shouldUseNativeValidation)),H=async(e,t,a={valid:!0})=>{for(const l in e){const r=e[l];if(r){const{_f:e,...l}=r;if(e){const l=w.array.has(e.name),o=await oe(r,v,k,i.shouldUseNativeValidation&&!t,l);if(o[e.name]&&(a.valid=!1,t))break;!t&&(b(o,e.name)?l?U(n.errors,o,e.name):N(n.errors,e.name,o[e.name]):ge(n.errors,e.name))}l&&await H(l,t,a)}}return a.valid},W=(e,t)=>(e&&t&&N(v,e,t),!ve(ne(),E)),X=(e,t,a)=>D(e,w,{...x.mount?v:g(t)?E:I(e)?{[e]:t}:t},a,t),Z=(e,t,a={})=>{const i=b(s,e);let n=t;if(i){const a=i._f;a&&(!a.disabled&&N(v,e,Oe(t,a)),n=J(a.ref)&&o(t)?"":t,ye(a.ref)?[...a.ref.options].forEach((e=>e.selected=n.includes(e.value))):a.refs?l(a.ref)?a.refs.length>1?a.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(n)?!!n.find((t=>t===e.value)):n===e.value))):a.refs[0]&&(a.refs[0].checked=!!n):a.refs.forEach((e=>e.checked=e.value===n)):K(a.ref)?a.ref.value="":(a.ref.value=n,a.ref.type||S.values.next({name:e,values:{...v}})))}(a.shouldDirty||a.shouldTouch)&&V(e,n,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ie(e)},ee=(e,t,a)=>{for(const i in t){const n=t[i],l=`${e}.${i}`,o=b(s,l);!w.array.has(e)&&Ee(n)&&(!o||o._f)||r(n)?Z(l,n,a):ee(l,n,a)}},te=(e,a,i={})=>{const l=b(s,e),r=w.array.has(e),u=p(a);N(v,e,u),r?(S.array.next({name:e,values:{...v}}),(T.isDirty||T.dirtyFields)&&i.shouldDirty&&S.state.next({name:e,dirtyFields:Se(E,v),isDirty:W(e,u)})):!l||l._f||o(u)?Z(e,u,i):ee(e,u,i),q(e,w)&&S.state.next({...n}),S.values.next({name:e,values:{...v}}),!x.mount&&t()},ae=async e=>{const t=e.target;let l=t.name,r=!0;const o=b(s,l);if(o){let d,m;const p=t.type?Ce(o._f):c(e),f=e.type===h||"focusout"===e.type,g=!((u=o._f).mount&&(u.required||u.min||u.max||u.maxLength||u.minLength||u.pattern||u.validate)||i.resolver||b(n.errors,l)||o._f.deps)||((e,t,a,i,n)=>!n.isOnAll&&(!a&&n.isOnTouch?!(t||e):(a?i.isOnBlur:n.isOnBlur)?!e:!(a?i.isOnChange:n.isOnChange)||e))(f,b(n.touchedFields,l),n.isSubmitted,M,_),E=q(l,w,f);N(v,l,p),f?(o._f.onBlur&&o._f.onBlur(e),a&&a(0)):o._f.onChange&&o._f.onChange(e);const y=V(l,p,f,!1),x=!O(y)||E;if(!f&&S.values.next({name:l,type:e.type,values:{...v}}),g)return T.isValid&&A(),x&&S.state.next({name:l,...E?{}:y});if(!f&&E&&S.state.next({...n}),R(!0),i.resolver){const{errors:e}=await B([l]),t=_e(n.errors,s,l),a=_e(e,s,t.name||l);d=a.error,l=a.name,m=O(e)}else d=(await oe(o,v,k,i.shouldUseNativeValidation))[l],r=isNaN(p)||p===b(v,l,p),r&&(d?m=!1:T.isValid&&(m=await H(s,!0)));r&&(o._f.deps&&ie(o._f.deps),P(l,m,d,y))}var u},ie=async(e,t={})=>{let a,l;const r=F(e);if(R(!0),i.resolver){const t=await(async e=>{const{errors:t}=await B();if(e)for(const a of e){const e=b(t,a);e?N(n.errors,a,e):ge(n.errors,a)}else n.errors=t;return t})(g(e)?e:r);a=O(t),l=e?!r.some((e=>b(t,e))):a}else e?(l=(await Promise.all(r.map((async e=>{const t=b(s,e);return await H(t&&t._f?{[e]:t}:t)})))).every(Boolean),(l||n.isValid)&&A()):l=a=await H(s);return S.state.next({...!I(e)||T.isValid&&a!==n.isValid?{}:{name:e},...i.resolver||!e?{isValid:a}:{},errors:n.errors,isValidating:!1}),t.shouldFocus&&!l&&G(s,(e=>e&&b(n.errors,e)),e?r:w.mount),l},ne=e=>{const t={...E,...x.mount?v:{}};return g(e)?t:I(e)?b(t,e):e.map((e=>b(t,e)))},le=(e,t)=>({invalid:!!b((t||n).errors,e),isDirty:!!b((t||n).dirtyFields,e),isTouched:!!b((t||n).touchedFields,e),error:b((t||n).errors,e)}),re=(e,t,a)=>{const i=(b(s,e,{_f:{}})._f||{}).ref;N(n.errors,e,{...t,ref:i}),S.state.next({name:e,errors:n.errors,isValid:!1}),a&&a.shouldFocus&&i&&i.focus&&i.focus()},se=(e,t={})=>{for(const a of e?F(e):w.mount)w.mount.delete(a),w.array.delete(a),t.keepValue||(ge(s,a),ge(v,a)),!t.keepError&&ge(n.errors,a),!t.keepDirty&&ge(n.dirtyFields,a),!t.keepTouched&&ge(n.touchedFields,a),!i.shouldUnregister&&!t.keepDefaultValue&&ge(E,a);S.values.next({values:{...v}}),S.state.next({...n,...t.keepDirty?{isDirty:W()}:{}}),!t.keepIsValid&&A()},ue=(e,t={})=>{let a=b(s,e);const n=$(t.disabled);return N(s,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),w.mount.add(e),a?n&&N(v,e,t.disabled?void 0:b(v,e,Ce(a._f))):L(e,!0,t.value),{...n?{disabled:t.disabled}:{},...i.progressive?{required:!!t.required,min:Fe(t.min),max:Fe(t.max),minLength:Fe(t.minLength),maxLength:Fe(t.maxLength),pattern:Fe(t.pattern)}:{},name:e,onChange:ae,onBlur:ae,ref:n=>{if(n){ue(e,t),a=b(s,e);const i=g(n.value)&&n.querySelectorAll&&n.querySelectorAll("input,select,textarea")[0]||n,r=(e=>Y(e)||l(e))(i),o=a._f.refs||[];if(r?o.find((e=>e===i)):i===a._f.ref)return;N(s,e,{_f:{...a._f,...r?{refs:[...o.filter(xe),i,...Array.isArray(b(E,e))?[{}]:[]],ref:{type:i.type,name:e}}:{ref:i}}}),L(e,!1,void 0,i)}else a=b(s,e,{}),a._f&&(a._f.mount=!1),(i.shouldUnregister||t.shouldUnregister)&&(!d(w.array,e)||!x.action)&&w.unMount.add(e)}}},ce=()=>i.shouldFocusError&&G(s,(e=>e&&b(n.errors,e)),w.mount),de=(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let l=p(v);if(S.state.next({isSubmitting:!0}),i.resolver){const{errors:e,values:t}=await B();n.errors=e,l=t}else await H(s);ge(n.errors,"root"),O(n.errors)?(S.state.next({errors:{}}),await e(l,a)):(t&&await t({...n.errors},a),ce(),setTimeout(ce)),S.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:O(n.errors),submitCount:n.submitCount+1,errors:n.errors})},me=(a,i={})=>{const l=a||E,r=p(l),o=a&&!O(a)?r:E;if(i.keepDefaultValues||(E=l),!i.keepValues){if(i.keepDirtyValues||C)for(const e of w.mount)b(n.dirtyFields,e)?N(o,e,b(v,e)):te(e,b(o,e));else{if(m&&g(a))for(const e of w.mount){const t=b(s,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(J(e)){const t=e.closest("form");if(t){t.reset();break}}}}s={}}v=e.shouldUnregister?i.keepDefaultValues?p(E):{}:p(o),S.array.next({values:{...o}}),S.values.next({values:{...o}})}w={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&t(),x.mount=!T.isValid||!!i.keepIsValid,x.watch=!!e.shouldUnregister,S.state.next({submitCount:i.keepSubmitCount?n.submitCount:0,isDirty:i.keepDirty?n.isDirty:!(!i.keepDefaultValues||ve(a,E)),isSubmitted:!!i.keepIsSubmitted&&n.isSubmitted,dirtyFields:i.keepDirtyValues?n.dirtyFields:i.keepDefaultValues&&a?Se(E,a):{},touchedFields:i.keepTouched?n.touchedFields:{},errors:i.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},pe=(e,t)=>me(Q(e)?e(v):e,t);return{control:{register:ue,unregister:se,getFieldState:le,handleSubmit:de,setError:re,_executeSchema:B,_getWatch:X,_getDirty:W,_updateValid:A,_removeUnmounted:()=>{for(const e of w.unMount){const t=b(s,e);t&&(t._f.refs?t._f.refs.every((e=>!xe(e))):!xe(t._f.ref))&&se(e)}w.unMount=new Set},_updateFieldArray:(e,t=[],a,i,l=!0,r=!0)=>{if(i&&a){if(x.action=!0,r&&Array.isArray(b(s,e))){const t=a(b(s,e),i.argA,i.argB);l&&N(s,e,t)}if(r&&Array.isArray(b(n.errors,e))){const t=a(b(n.errors,e),i.argA,i.argB);l&&N(n.errors,e,t),((e,t)=>{!f(b(e,t)).length&&ge(e,t)})(n.errors,e)}if(T.touchedFields&&r&&Array.isArray(b(n.touchedFields,e))){const t=a(b(n.touchedFields,e),i.argA,i.argB);l&&N(n.touchedFields,e,t)}T.dirtyFields&&(n.dirtyFields=Se(E,v)),S.state.next({name:e,isDirty:W(e,t),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else N(v,e,t)},_getFieldArray:t=>f(b(x.mount?v:E,t,e.shouldUnregister?b(E,t,[]):[])),_reset:me,_resetDefaultValues:()=>Q(i.defaultValues)&&i.defaultValues().then((e=>{pe(e,i.resetOptions),S.state.next({isLoading:!1})})),_updateFormState:e=>{n={...n,...e}},_subjects:S,_proxyFormState:T,get _fields(){return s},get _formValues(){return v},get _state(){return x},set _state(e){x=e},get _defaultValues(){return E},get _names(){return w},set _names(e){w=e},get _formState(){return n},set _formState(e){n=e},get _options(){return i},set _options(e){i={...i,...e}}},trigger:ie,register:ue,handleSubmit:de,watch:(e,t)=>Q(e)?S.values.subscribe({next:a=>e(X(void 0,t),a)}):X(e,t,!0),setValue:te,getValues:ne,reset:pe,resetField:(e,t={})=>{b(s,e)&&(g(t.defaultValue)?te(e,b(E,e)):(te(e,t.defaultValue),N(E,e,t.defaultValue)),t.keepTouched||ge(n.touchedFields,e),t.keepDirty||(ge(n.dirtyFields,e),n.isDirty=t.defaultValue?W(e,b(E,e)):W()),t.keepError||(ge(n.errors,e),T.isValid&&A()),S.state.next({...n}))},clearErrors:e=>{e&&F(e).forEach((e=>ge(n.errors,e))),S.state.next({errors:e?n.errors:{}})},unregister:se,setError:re,setFocus:(e,t={})=>{const a=b(s,e),i=a&&a._f;if(i){const e=i.refs?i.refs[0]:i.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:le}}t.Controller=e=>e.render(V(e)),t.Form=function(e){const t=T(),[a,i]=n.default.useState(!1),{control:l=t.control,onSubmit:r,children:o,action:s,method:u=P,headers:c,encType:d,onError:m,render:p,onSuccess:f,validateStatus:g,...h}=e,E=async t=>{let a=!1,i="";await l.handleSubmit((async e=>{const n=new FormData;let o="";try{o=JSON.stringify(e)}catch(e){}for(const t of l._names.mount)n.append(t,b(e,t));if(r&&r({data:e,event:t,method:u,formData:n,formDataJson:o}),s)try{const e=[c&&c["Content-Type"],d].some((e=>e&&e.includes("json"))),t=await fetch(s,{method:u,headers:{...c,...d?{"Content-Type":d}:{}},body:e?o:n});t&&(g?!g(t.status):t.status<200||t.status>=300)?(a=!0,m&&m({response:t}),i=String(t.status)):f&&f({response:t})}catch(e){a=!0,m&&m({error:e})}}))(t),a&&e.control&&(e.control._subjects.state.next({isSubmitSuccessful:!1}),e.control.setError("root.server",{type:i}))};return n.default.useEffect((()=>{i(!0)}),[]),p?n.default.createElement(n.default.Fragment,null,p({submit:E})):n.default.createElement("form",{noValidate:a,action:s,method:u,encType:d,onSubmit:E,...h},o)},t.FormProvider=e=>{const{children:t,...a}=e;return n.default.createElement(j.Provider,{value:a},t)},t.appendErrors=B,t.get=b,t.set=N,t.useController=V,t.useFieldArray=function(e){const t=T(),{control:a=t.control,name:i,keyName:l="id",shouldUnregister:r}=e,[o,s]=n.default.useState(a._getFieldArray(i)),u=n.default.useRef(a._getFieldArray(i).map(H)),c=n.default.useRef(o),d=n.default.useRef(i),m=n.default.useRef(!1);d.current=i,c.current=o,a._names.array.add(i),e.rules&&a.register(i,e.rules),M({next:({values:e,name:t})=>{if(t===d.current||!t){const t=b(e,d.current);Array.isArray(t)&&(s(t),u.current=t.map(H))}},subject:a._subjects.array});const f=n.default.useCallback((e=>{m.current=!0,a._updateFieldArray(i,e)}),[a,i]);return n.default.useEffect((()=>{if(a._state.action=!1,q(i,a._names)&&a._subjects.state.next({...a._formState}),m.current&&(!z(a._options.mode).isOnSubmit||a._formState.isSubmitted))if(a._options.resolver)a._executeSchema([i]).then((e=>{const t=b(e.errors,i),n=b(a._formState.errors,i);(n?!t&&n.type||t&&(n.type!==t.type||n.message!==t.message):t&&t.type)&&(t?N(a._formState.errors,i,t):ge(a._formState.errors,i),a._subjects.state.next({errors:a._formState.errors}))}));else{const e=b(a._fields,i);e&&e._f&&oe(e,a._formValues,a._options.criteriaMode===y,a._options.shouldUseNativeValidation,!0).then((e=>!O(e)&&a._subjects.state.next({errors:U(a._formState.errors,e,i)})))}a._subjects.values.next({name:i,values:{...a._formValues}}),a._names.focus&&G(a._fields,(e=>!!e&&e.startsWith(a._names.focus||""))),a._names.focus="",a._updateValid()}),[o,i,a]),n.default.useEffect((()=>(!b(a._formValues,i)&&a._updateFieldArray(i),()=>{(a._options.shouldUnregister||r)&&a.unregister(i)})),[i,a,l,r]),{swap:n.default.useCallback(((e,t)=>{const n=a._getFieldArray(i);fe(n,e,t),fe(u.current,e,t),f(n),s(n),a._updateFieldArray(i,n,fe,{argA:e,argB:t},!1)}),[f,i,a]),move:n.default.useCallback(((e,t)=>{const n=a._getFieldArray(i);de(n,e,t),de(u.current,e,t),f(n),s(n),a._updateFieldArray(i,n,de,{argA:e,argB:t},!1)}),[f,i,a]),prepend:n.default.useCallback(((e,t)=>{const n=F(p(e)),l=me(a._getFieldArray(i),n);a._names.focus=W(i,0,t),u.current=me(u.current,n.map(H)),f(l),s(l),a._updateFieldArray(i,l,me,{argA:ue(e)})}),[f,i,a]),append:n.default.useCallback(((e,t)=>{const n=F(p(e)),l=se(a._getFieldArray(i),n);a._names.focus=W(i,l.length-1,t),u.current=se(u.current,n.map(H)),f(l),s(l),a._updateFieldArray(i,l,se,{argA:ue(e)})}),[f,i,a]),remove:n.default.useCallback((e=>{const t=pe(a._getFieldArray(i),e);u.current=pe(u.current,e),f(t),s(t),a._updateFieldArray(i,t,pe,{argA:e})}),[f,i,a]),insert:n.default.useCallback(((e,t,n)=>{const l=F(p(t)),r=ce(a._getFieldArray(i),e,l);a._names.focus=W(i,e,n),u.current=ce(u.current,e,l.map(H)),f(r),s(r),a._updateFieldArray(i,r,ce,{argA:e,argB:ue(t)})}),[f,i,a]),update:n.default.useCallback(((e,t)=>{const n=p(t),l=be(a._getFieldArray(i),e,n);u.current=[...l].map(((t,a)=>t&&a!==e?u.current[a]:H())),f(l),s([...l]),a._updateFieldArray(i,l,be,{argA:e,argB:n},!0,!1)}),[f,i,a]),replace:n.default.useCallback((e=>{const t=F(p(e));u.current=t.map(H),f([...t]),s([...t]),a._updateFieldArray(i,[...t],(e=>e),{},!0,!1)}),[f,i,a]),fields:n.default.useMemo((()=>o.map(((e,t)=>({...e,[l]:u.current[t]||H()})))),[o,l])}},t.useForm=function(e={}){const t=n.default.useRef(),[a,i]=n.default.useState({isDirty:!1,isValidating:!1,isLoading:Q(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Q(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...ke(e,(()=>i((e=>({...e}))))),formState:a});const l=t.current.control;return l._options=e,M({subject:l._subjects.state,next:e=>{C(e,l._proxyFormState,l._updateFormState,!0)&&i({...l._formState})}}),n.default.useEffect((()=>{e.values&&!ve(e.values,l._defaultValues)?l._reset(e.values,l._options.resetOptions):l._resetDefaultValues()}),[e.values,l]),n.default.useEffect((()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()})),t.current.formState=S(a,l),t.current},t.useFormContext=T,t.useFormState=k,t.useWatch=A},82:function(e,t,a){"use strict";var i,n=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),l=[];function r(e){for(var t=-1,a=0;a<l.length;a++)if(l[a].identifier===e){t=a;break}return t}function o(e,t){for(var a={},i=[],n=0;n<e.length;n++){var o=e[n],s=t.base?o[0]+t.base:o[0],u=a[s]||0,c="".concat(s," ").concat(u);a[s]=u+1;var d=r(c),m={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(l[d].references++,l[d].updater(m)):l.push({identifier:c,updater:g(m,t),references:1}),i.push(c)}return i}function s(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var l=a.nc;l&&(i.nonce=l)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var r=n(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var u,c=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function d(e,t,a,i){var n=a?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,n);else{var l=document.createTextNode(n),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(l,r[t]):e.appendChild(l)}}function m(e,t,a){var i=a.css,n=a.media,l=a.sourceMap;if(n?e.setAttribute("media",n):e.removeAttribute("media"),l&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var p=null,f=0;function g(e,t){var a,i,n;if(t.singleton){var l=f++;a=p||(p=s(t)),i=d.bind(null,a,l,!1),n=d.bind(null,a,l,!0)}else a=s(t),i=m.bind(null,a,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var a=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<a.length;i++){var n=r(a[i]);l[n].references--}for(var s=o(e,t),u=0;u<a.length;u++){var c=r(a[u]);0===l[c].references&&(l[c].updater(),l.splice(c,1))}a=s}}}},83:function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,i,n,l=e[1]||"",r=e[3];if(!r)return l;if(t&&"function"==typeof btoa){var o=(a=r,i=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(n," */")),s=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[l].concat(s).concat([o]).join("\n")}return[l].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,i){"string"==typeof e&&(e=[[null,e,""]]);var n={};if(i)for(var l=0;l<this.length;l++){var r=this[l][0];null!=r&&(n[r]=!0)}for(var o=0;o<e.length;o++){var s=[].concat(e[o]);i&&n[s[0]]||(a&&(s[2]?s[2]="".concat(a," and ").concat(s[2]):s[2]=a),t.push(s))}},t}},84:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(36),n=a(0),l=i.__importDefault(a(89));t.default=function(e,t){var a=n.useState(t),i=a[0],r=a[1];return l.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),i}},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var i=a(0),n=a(19);function l(){const e=Object(i.useContext)(n.a);if(!e)throw new Error("Plugin context value is missing!");return e}},88:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return l}));var i=a(6);const n=e=>e.darkMode?i.COLOR_MODES_STANDARD.dark:i.COLOR_MODES_STANDARD.light,l={darkMode:!1}},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(0),n="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=n},90:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},92:function(e,t,a){"use strict";a.d(t,"b",(function(){return x})),a.d(t,"a",(function(){return y}));var i=a(0),n=a(43),l=a(90),r=a(84),o=a.n(r),s=a(46),u=a.n(s),c=a(6);const d="eui-global",m="eui-utilities";var p=a(88),f=a(28);const g=[c.euiStylisPrefixer],b=u()({key:"css",stylisPlugins:g,container:document.querySelector('meta[name="emotion"]')}),h=u()({key:d,stylisPlugins:g,container:document.querySelector(`meta[name="${d}"]`)}),E=u()({key:m,stylisPlugins:g,container:document.querySelector(`meta[name="${m}"]`)});b.compat=!0,h.compat=!0,E.compat=!0;const v={default:b,global:h,utility:E},y=({theme:{theme$:e},globalStyles:t,colorMode:a,modify:n,children:l})=>{const r=o()(e,p.a),s=Object(i.useMemo)((()=>Object(p.b)(r)),[r]),u=a||s,d=!1!==t&&void 0;return Object(f.jsx)(c.EuiProvider,{cache:v,modify:n,colorMode:u,globalStyles:d,utilityClasses:d},l)},x=({children:e,i18n:t,...a})=>Object(n.useIsNestedEuiProvider)()?(Object(l.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(f.jsx)(t.Context,null,e)):Object(f.jsx)(y,a,Object(f.jsx)(t.Context,null,e))},94:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(76),n=a.n(i),l=(a(0),a(92)),r=a(44),o=a(28);const s=({children:e,...t})=>Object(o.jsx)(l.b,n()({globalStyles:!1},t),Object(o.jsx)(r.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(o.jsx)(r.KibanaErrorBoundary,null,e)))},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return r})),a.d(t,"g",(function(){return o})),a.d(t,"f",(function(){return s})),a.d(t,"h",(function(){return u})),a.d(t,"i",(function(){return c})),a.d(t,"b",(function(){return d})),a.d(t,"j",(function(){return m}));const i=100,n=1e4,l=[10,25,50,i,250,500],r={auto:-1,single:0,default:3},o="1.6em",s=370,u=212,c="kibana-json",d={border:"horizontal",fontSize:"s",cellPadding:"l",rowHover:"highlight",header:"underline",stripes:!0},m={showColumnSelector:{allowHide:!1,allowReorder:!0}}},97:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return l}));var i=a(2),n=a.n(i);let l=function(e){return e._ID="_id",e._INDEX="_index",e._SOURCE="_source",e._TYPE="_type",e.STRING="string",e.TEXT="text",e.MATCH_ONLY_TEXT="match_only_text",e.KEYWORD="keyword",e.VERSION="version",e.BOOLEAN="boolean",e.OBJECT="object",e.DATE="date",e.DATE_NANOS="date_nanos",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.FLOAT="float",e.HALF_FLOAT="half_float",e.SCALED_FLOAT="scaled_float",e.DOUBLE="double",e.INTEGER="integer",e.LONG="long",e.SHORT="short",e.UNSIGNED_LONG="unsigned_long",e.AGGREGATE_METRIC_DOUBLE="aggregate_metric_double",e.FLOAT_RANGE="float_range",e.DOUBLE_RANGE="double_range",e.INTEGER_RANGE="integer_range",e.LONG_RANGE="long_range",e.NESTED="nested",e.BYTE="byte",e.IP="ip",e.IP_RANGE="ip_range",e.ATTACHMENT="attachment",e.TOKEN_COUNT="token_count",e.MURMUR3="murmur3",e.HISTOGRAM="histogram",e}({}),r=function(e){return e._SOURCE="_source",e.ATTACHMENT="attachment",e.BOOLEAN="boolean",e.DATE="date",e.DATE_RANGE="date_range",e.GEO_POINT="geo_point",e.GEO_SHAPE="geo_shape",e.IP="ip",e.IP_RANGE="ip_range",e.MURMUR3="murmur3",e.NUMBER="number",e.NUMBER_RANGE="number_range",e.STRING="string",e.UNKNOWN="unknown",e.CONFLICT="conflict",e.OBJECT="object",e.NESTED="nested",e.HISTOGRAM="histogram",e.MISSING="missing",e}({});class kbn_field_type_KbnFieldType{constructor(e={}){n()(this,"name",void 0),n()(this,"sortable",void 0),n()(this,"filterable",void 0),n()(this,"esTypes",void 0),this.name=e.name||r.UNKNOWN,this.sortable=e.sortable||!1,this.filterable=e.filterable||!1,this.esTypes=Object.freeze((e.esTypes||[]).slice())}}const o=new kbn_field_type_KbnFieldType({name:r.UNKNOWN}),s=[new kbn_field_type_KbnFieldType({name:r.STRING,sortable:!0,filterable:!0,esTypes:[l.STRING,l.TEXT,l.MATCH_ONLY_TEXT,l.KEYWORD,l.VERSION,l._TYPE,l._ID]}),new kbn_field_type_KbnFieldType({name:r.NUMBER,sortable:!0,filterable:!0,esTypes:[l.FLOAT,l.HALF_FLOAT,l.SCALED_FLOAT,l.DOUBLE,l.INTEGER,l.LONG,l.UNSIGNED_LONG,l.SHORT,l.BYTE,l.TOKEN_COUNT,l.AGGREGATE_METRIC_DOUBLE]}),new kbn_field_type_KbnFieldType({name:r.NUMBER_RANGE,sortable:!0,filterable:!0,esTypes:[l.FLOAT_RANGE,l.DOUBLE_RANGE,l.INTEGER_RANGE,l.LONG_RANGE]}),new kbn_field_type_KbnFieldType({name:r.DATE,sortable:!0,filterable:!0,esTypes:[l.DATE,l.DATE_NANOS]}),new kbn_field_type_KbnFieldType({name:r.DATE_RANGE,sortable:!0,filterable:!0,esTypes:[l.DATE_RANGE]}),new kbn_field_type_KbnFieldType({name:r.IP,sortable:!0,filterable:!0,esTypes:[l.IP]}),new kbn_field_type_KbnFieldType({name:r.IP_RANGE,sortable:!0,filterable:!0,esTypes:[l.IP_RANGE]}),new kbn_field_type_KbnFieldType({name:r.BOOLEAN,sortable:!0,filterable:!0,esTypes:[l.BOOLEAN]}),new kbn_field_type_KbnFieldType({name:r.OBJECT,esTypes:[l.OBJECT]}),new kbn_field_type_KbnFieldType({name:r.NESTED,esTypes:[l.NESTED]}),new kbn_field_type_KbnFieldType({name:r.GEO_POINT,esTypes:[l.GEO_POINT]}),new kbn_field_type_KbnFieldType({name:r.GEO_SHAPE,esTypes:[l.GEO_SHAPE]}),new kbn_field_type_KbnFieldType({name:r.ATTACHMENT,esTypes:[l.ATTACHMENT]}),new kbn_field_type_KbnFieldType({name:r.MURMUR3,esTypes:[l.MURMUR3]}),new kbn_field_type_KbnFieldType({name:r._SOURCE,esTypes:[l._SOURCE]}),new kbn_field_type_KbnFieldType({name:r.HISTOGRAM,filterable:!0,esTypes:[l.HISTOGRAM]}),new kbn_field_type_KbnFieldType({name:r.CONFLICT}),o],u=e=>{const t=s.find((t=>t.esTypes.includes(e)));return t&&t.name?t.name:r.UNKNOWN};function c(e){switch(e){case l._INDEX:return r.STRING;case"_version":return r.NUMBER;case"datetime":return r.DATE;default:return u(e)}}},98:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(0),n=a(37),l=a.n(n),r=a(94),o=a(28);const s=(e,t)=>a=>(l.a.render(Object(o.jsx)(r.a,t,e),a),()=>l.a.unmountComponentAtNode(a));a(2),a(1),i.Component}}]);