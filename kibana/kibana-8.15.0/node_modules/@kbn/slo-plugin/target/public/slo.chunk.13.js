/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[13],{108:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),i=n.n(r),a=n(6),o=n(1),s=n(30),l=n(75),c=n(85);const u=o.i18n.translate("xpack.slo.sloEmbeddable.config.errors.sloRequired",{defaultMessage:"SLO is required."});function d({initialSlos:e,onSelected:t,hasError:n,singleSelection:d}){const f=e=>{var t;return null!==(t=null==e?void 0:e.map((e=>({label:e.instanceId!==l.a?`${e.name} (${e.instanceId})`:e.name,value:`${e.id}-${e.instanceId}`}))))&&void 0!==t?t:[]},[b,g]=Object(r.useState)([]),[y,m]=Object(r.useState)(f(e)),[v,E]=Object(r.useState)(""),h=`${v}*`,{isLoading:j,data:O}=Object(c.a)({kqlQuery:`slo.name: (${h}) or slo.instanceId.text: (${h})`,perPage:100});Object(r.useEffect)((()=>{const e=j||void 0===(null==O?void 0:O.results)?[]:f(null==O?void 0:O.results);g(e)}),[j,O]);const S=Object(r.useMemo)((()=>Object(s.debounce)((e=>{E(e)}),300)),[]);return i.a.createElement(a.EuiFormRow,{fullWidth:!0,isInvalid:n,error:n?u:void 0,label:o.i18n.translate("xpack.slo.embeddable.sloSelectorLabel",{defaultMessage:"SLO"})},i.a.createElement(a.EuiComboBox,{"aria-label":o.i18n.translate("xpack.slo.sloEmbeddable.config.sloSelector.ariaLabel",{defaultMessage:"SLO"}),placeholder:o.i18n.translate("xpack.slo.sloEmbeddable.config.sloSelector.placeholder",{defaultMessage:"Select a SLO"}),"data-test-subj":"sloSelector",options:b,selectedOptions:y,async:!0,isLoading:j,onChange:e=>{var n;m(e);const r=e.length>=1?null===(n=O.results)||void 0===n?void 0:n.filter((t=>e.find((e=>e.value===`${t.id}-${t.instanceId}`)))):void 0;t(d?null==r?void 0:r[0]:r)},fullWidth:!0,onSearchChange:S,isInvalid:n,singleSelection:d?{asPlainText:!0}:void 0}))}},372:function(e,t,n){"use strict";n.r(t),n.d(t,"openSloConfiguration",(function(){return b}));var r=n(0),i=n.n(r),a=n(7),o=n(98),s=n(17),l=n(6),c=n(29),u=n(1),d=n(108);function f({onCreate:e,onCancel:t}){const[n,a]=Object(r.useState)(),[o,s]=Object(r.useState)(!1);return i.a.createElement(l.EuiFlyout,{onClose:t,style:{minWidth:550}},i.a.createElement(l.EuiFlyoutHeader,null,i.a.createElement(l.EuiTitle,null,i.a.createElement("h2",null,u.i18n.translate("xpack.slo.errorBudgetEmbeddable.config.sloSelector.headerTitle",{defaultMessage:"Error budget burn down configuration"})))),i.a.createElement(l.EuiFlyoutBody,null,i.a.createElement(l.EuiFlexGroup,null,i.a.createElement(l.EuiFlexItem,{grow:!0},i.a.createElement(d.a,{singleSelection:!0,hasError:o,onSelected:e=>{s(void 0===e),e&&"id"in e&&a({sloId:e.id,sloInstanceId:e.instanceId})}})))),i.a.createElement(l.EuiFlyoutFooter,null,i.a.createElement(l.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(l.EuiButtonEmpty,{onClick:t,"data-test-subj":"sloCancelButton"},i.a.createElement(c.FormattedMessage,{id:"xpack.slo.sloEmbeddable.config.cancelButtonLabel",defaultMessage:"Cancel"})),i.a.createElement(l.EuiButton,{"data-test-subj":"sloConfirmButton",isDisabled:!n||o,onClick:()=>e({sloId:null==n?void 0:n.sloId,sloInstanceId:null==n?void 0:n.sloInstanceId}),fill:!0},i.a.createElement(c.FormattedMessage,{id:"xpack.slo.embeddableSlo.config.confirmButtonLabel",defaultMessage:"Confirm configurations"})))))}async function b(e,t,n){const{overlays:r}=e,l=new a.QueryClient;return new Promise((async(n,c)=>{try{const u=r.openFlyout(Object(o.a)(i.a.createElement(s.KibanaContextProvider,{services:{...e,...t}},i.a.createElement(a.QueryClientProvider,{client:l},i.a.createElement(f,{onCreate:e=>{u.close(),n(e)},onCancel:()=>{u.close(),c()}}))),e))}catch(e){c(e)}}))}},76:function(e,t,n){e.exports=n(24)(4)},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(34),i=n(74);function a({indexPatternString:e,dataViewId:t}){const{dataViews:n}=Object(i.a)().services,{data:a,loading:o}=Object(r.useFetcher)((async()=>{if(t)try{return await n.get(t)}catch(t){return n.create({id:`${e}-id`,title:e,allowNoIndex:!0})}else if(e)return n.create({id:`${e}-id`,title:e,allowNoIndex:!0})}),[t,n,e]);return{dataView:a,loading:Boolean(o)}}},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),i=n(0),a=r.__importDefault(n(89));t.default=function(e,t){var n=i.useState(t),r=n[0],o=n[1];return a.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),r}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(33),i=n(1),a=n(7),o=n(0),s=n(15),l=n(74),c=n(81),u=n(79);function d({kqlQuery:e="",page:t=1,sortBy:n="status",sortDirection:d="desc",perPage:f=s.d,filters:b=[],lastRefresh:g,tagsFilter:y,statusFilter:m,disabled:v=!1}={}){const{http:E,notifications:{toasts:h}}=Object(l.a)().services,j=Object(a.useQueryClient)(),{dataView:O}=Object(c.a)({indexPatternString:s.n}),S=Object(o.useMemo)((()=>{try{return JSON.stringify(Object(r.buildQueryFromFilters)([...b,...m?[m]:[],...y?[y]:[]],O,{ignoreFilterIfFieldNotInIndex:!0}))}catch(e){return""}}),[b,O,y,m]),{isInitialLoading:p,isLoading:x,isError:w,isSuccess:C,isRefetching:P,data:I}=Object(a.useQuery)({queryKey:u.a.list({kqlQuery:e,page:t,perPage:f,sortBy:n,sortDirection:d,filters:S,lastRefresh:g}),queryFn:async({signal:r})=>await E.get("/api/observability/slos",{query:{...e&&{kqlQuery:e},...n&&{sortBy:n},...d&&{sortDirection:d},...void 0!==t&&{page:t},...void 0!==f&&{perPage:f},...S&&{filters:S},hideStale:!0},signal:r}),enabled:!v,cacheTime:0,refetchOnWindowFocus:!1,retry:(e,t)=>"Error: Forbidden"!==String(t)&&e<4,onSuccess:({results:e})=>{j.invalidateQueries({queryKey:u.a.historicalSummaries(),exact:!1}),j.invalidateQueries({queryKey:u.a.activeAlerts(),exact:!1}),j.invalidateQueries({queryKey:u.a.rules(),exact:!1})},onError:e=>{h.addError(e,{title:i.i18n.translate("xpack.slo.list.errorNotification",{defaultMessage:"Something went wrong while fetching SLOs"})})}});return{data:I,isInitialLoading:p,isLoading:x,isRefetching:P,isSuccess:C,isError:w}}},88:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));var r=n(6);const i=e=>e.darkMode?r.COLOR_MODES_STANDARD.dark:r.COLOR_MODES_STANDARD.light,a={darkMode:!1}},89:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=i},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var r=void 0;t.setEuiDevProviderWarning=function(e){return r=e},t.getEuiDevProviderWarning=function(){return r},t.emitEuiProviderWarning=function(e){if("function"==typeof r)return r(e);switch(r){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},92:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return j}));var r=n(0),i=n(43),a=n(90),o=n(84),s=n.n(o),l=n(46),c=n.n(l),u=n(6);const d="eui-global",f="eui-utilities";var b=n(88),g=n(28);const y=[u.euiStylisPrefixer],m=c()({key:"css",stylisPlugins:y,container:document.querySelector('meta[name="emotion"]')}),v=c()({key:d,stylisPlugins:y,container:document.querySelector(`meta[name="${d}"]`)}),E=c()({key:f,stylisPlugins:y,container:document.querySelector(`meta[name="${f}"]`)});m.compat=!0,v.compat=!0,E.compat=!0;const h={default:m,global:v,utility:E},j=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:i,children:a})=>{const o=s()(e,b.a),l=Object(r.useMemo)((()=>Object(b.b)(o)),[o]),c=n||l,d=!1!==t&&void 0;return Object(g.jsx)(u.EuiProvider,{cache:h,modify:i,colorMode:c,globalStyles:d,utilityClasses:d},a)},O=({children:e,i18n:t,...n})=>Object(i.useIsNestedEuiProvider)()?(Object(a.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(g.jsx)(t.Context,null,e)):Object(g.jsx)(j,n,Object(g.jsx)(t.Context,null,e))},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(76),i=n.n(r),a=(n(0),n(92)),o=n(44),s=n(28);const l=({children:e,...t})=>Object(s.jsx)(a.b,i()({globalStyles:!1},t),Object(s.jsx)(o.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(s.jsx)(o.KibanaErrorBoundary,null,e)))},98:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),i=n(37),a=n.n(i),o=n(94),s=n(28);const l=(e,t)=>n=>(a.a.render(Object(s.jsx)(o.a,t,e),n),()=>a.a.unmountComponentAtNode(n));n(2),n(1),r.Component}}]);