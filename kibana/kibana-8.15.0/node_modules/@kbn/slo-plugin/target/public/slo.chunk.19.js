/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.slo_bundle_jsonpfunction=window.slo_bundle_jsonpfunction||[]).push([[19],{133:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return d}));var i=a(75),n=a(33),s=a(1),r=a(38),l=a(41),o=a(30);function u(e,t=!1,a=!1,u){const c=Object(l.v4)(),d=[];i.f.is(e.indicator.params.filter)&&e.indicator.params.filter.filters.forEach((e=>d.push(e)));const m=i.f.is(e.indicator.params.filter)?e.indicator.params.filter.kqlQuery:e.indicator.params.filter;if("sli.kql.custom"===e.indicator.type){const l=i.f.is(e.indicator.params.good)?e.indicator.params.good.kqlQuery:e.indicator.params.good,o=i.f.is(e.indicator.params.good)?e.indicator.params.good.filters:[],u=i.f.is(e.indicator.params.total)?e.indicator.params.total.kqlQuery:e.indicator.params.total,m=i.f.is(e.indicator.params.total)?e.indicator.params.total.filters:[],p=Object(r.buildEsQuery)({kuery:l,filters:o}),g=Object(r.buildEsQuery)({kuery:u,filters:m}),f={bool:{filter:g,must_not:p}};d.push({$state:{store:n.FilterStateStore.APP_STATE},meta:{type:"custom",alias:s.i18n.translate("xpack.slo.sloDetails.goodFilterLabel",{defaultMessage:"Good events"}),disabled:!a,value:JSON.stringify(p),index:c},query:p}),d.push({$state:{store:n.FilterStateStore.APP_STATE},meta:{type:"custom",alias:s.i18n.translate("xpack.slo.sloDetails.badFilterLabel",{defaultMessage:"Bad events"}),disabled:!t,value:JSON.stringify(f),index:c},query:f}),d.push({$state:{store:n.FilterStateStore.APP_STATE},meta:{type:"custom",alias:s.i18n.translate("xpack.slo.sloDetails.totalFilterLabel",{defaultMessage:"Total events"}),value:JSON.stringify(g),index:c},query:g})}const p=[e.groupBy].flat();!Object(o.isEmpty)(e.groupings)&&p.length>0&&!1===p.every((e=>e===i.a))&&p.forEach((t=>{d.push({meta:{disabled:!1,negate:!1,alias:null,key:t,params:{query:e.groupings[t]},type:"phrase",index:c},$state:{store:n.FilterStateStore.APP_STATE},query:{match_phrase:{[t]:e.groupings[t]}}})}));const g="sli.apm.transactionDuration"!==e.indicator.type&&"sli.apm.transactionErrorRate"!==e.indicator.type&&"sli.synthetics.availability"!==e.indicator.type?e.indicator.params.timestampField:"@timestamp";return{timeRange:u,query:{query:m||"",language:"kuery"},filters:d,dataViewSpec:{id:c,title:e.remote?`${e.remote.remoteName}:${e.indicator.params.index}`:e.indicator.params.index,timeFieldName:g}}}function c(e,t,a){var i;const n=u(t,!1,!1,a);return null==e||null===(i=e.locator)||void 0===i?void 0:i.getRedirectUrl(n)}function d(e,t,a=!1,i=!1,n){var s;const r=u(t,a,i,n);null==e||null===(s=e.locator)||void 0===s||s.navigate(r)}},153:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(7),n=a(74),s=a(79);function r({isValid:e,range:t,indicator:a,objective:r,groupBy:l,groupings:o,instanceId:u,remoteName:c}){const{http:d}=Object(n.a)().services,{isInitialLoading:m,isLoading:p,isError:g,isSuccess:f,data:y}=Object(i.useQuery)({queryKey:s.a.preview(a,t,o),queryFn:async({signal:e})=>{const i=await d.post("/internal/observability/slos/_preview",{body:JSON.stringify({indicator:a,range:t,groupBy:l,instanceId:u,groupings:o,remoteName:c,...r?{objective:r}:null}),signal:e});return Array.isArray(i)?i:[]},retry:!1,refetchOnWindowFocus:!1,enabled:e});return{data:y,isLoading:p,isInitialLoading:m,isSuccess:f,isError:g}}},154:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var i=a(40),n=a(6),s=a(35),r=a.n(s),l=a(49),o=a(1),u=a(9),c=a.n(u),d=a(0),m=a.n(d),p=a(11),g=a(74),f=a(133);function y({annotation:e,bottomTitle:t,data:a,slo:s,onBrushed:u,isLoading:y=!1}){var v,h;const{charts:x,uiSettings:b,discover:k}=Object(g.a)().services,{euiTheme:M}=Object(n.useEuiTheme)(),T=x.theme.useChartsBaseTheme(),E=Object(d.useRef)(null),S=Object(l.useActiveCursor)(x.activeCursor,E,{isDateHistogram:!0}),w=b.get("dateFormat"),A=a&&a.length>2?c()(a[1].date).valueOf()-c()(a[0].date).valueOf():6e5,L=o.i18n.translate("xpack.slo.sloDetails.eventsChartPanel.goodEventsLabel",{defaultMessage:"Good events"}),O=o.i18n.translate("xpack.slo.sloDetails.eventsChartPanel.badEventsLabel",{defaultMessage:"Bad events"});return m.a.createElement(m.a.Fragment,null,y&&m.a.createElement(n.EuiLoadingChart,{size:"m",mono:!0,"data-test-subj":"sliEventsChartLoading"}),!y&&m.a.createElement(i.Chart,{size:{height:150,width:"100%"},ref:E},m.a.createElement(i.Tooltip,{type:i.TooltipType.VerticalCursor}),m.a.createElement(i.Settings,{baseTheme:T,showLegend:!0,legendPosition:i.Position.Left,noResults:m.a.createElement(n.EuiIcon,{type:"visualizeApp",size:"l",color:"subdued",title:o.i18n.translate("xpack.slo.goodBadEventsChart.euiIcon.noResultsLabel",{defaultMessage:"no results"})}),onPointerUpdate:S,externalPointerEvents:{tooltip:{visible:!0}},pointerUpdateDebounce:0,pointerUpdateTrigger:"x",locale:o.i18n.getLocale(),onElementClick:e=>{var t;if("sli.kql.custom"===(null==s||null===(t=s.indicator)||void 0===t?void 0:t.type)){const[t,a]=e[0],i=a.specId===O,n={from:c()(t.x).toISOString(),to:c()(t.x).add(A,"ms").toISOString(),mode:"absolute"};Object(f.b)(k,s,i,!i,n)}},onBrushEnd:e=>{null==u||u(Object(p.a)(e))}}),e,m.a.createElement(i.Axis,{id:"bottom",title:t,position:i.Position.Bottom,showOverlappingTicks:!0,tickFormat:e=>c()(e).format(w)}),m.a.createElement(i.Axis,{id:"left",position:i.Position.Left,tickFormat:e=>r()(e).format("0,0"),domain:{fit:!0,min:NaN,max:NaN}}),m.a.createElement(m.a.Fragment,null,m.a.createElement(i.BarSeries,{id:L,color:M.colors.success,barSeriesStyle:{rect:{fill:M.colors.success},displayValue:{fill:M.colors.success}},xScaleType:i.ScaleType.Time,yScaleType:i.ScaleType.Linear,xAccessor:"key",yAccessors:["value"],stackAccessors:[0],data:null!==(v=null==a?void 0:a.map((e=>{var t;return{key:new Date(e.date).getTime(),value:null===(t=e.events)||void 0===t?void 0:t.good}})))&&void 0!==v?v:[]}),m.a.createElement(i.BarSeries,{id:O,color:M.colors.danger,barSeriesStyle:{rect:{fill:M.colors.danger},displayValue:{fill:M.colors.danger}},xScaleType:i.ScaleType.Time,yScaleType:i.ScaleType.Linear,xAccessor:"key",yAccessors:["value"],stackAccessors:[0],data:null!==(h=null==a?void 0:a.map((e=>{var t;return{key:new Date(e.date).getTime(),value:null===(t=e.events)||void 0===t?void 0:t.bad}})))&&void 0!==h?h:[]}))))}},81:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(34),n=a(74);function s({indexPatternString:e,dataViewId:t}){const{dataViews:a}=Object(n.a)().services,{data:s,loading:r}=Object(i.useFetcher)((async()=>{if(t)try{return await a.get(t)}catch(t){return a.create({id:`${e}-id`,title:e,allowNoIndex:!0})}else if(e)return a.create({id:`${e}-id`,title:e,allowNoIndex:!0})}),[t,a,e]);return{dataView:s,loading:Boolean(r)}}},87:function(e,t,a){"use strict";a.d(t,"k",(function(){return l})),a.d(t,"c",(function(){return o})),a.d(t,"p",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"j",(function(){return d})),a.d(t,"g",(function(){return m})),a.d(t,"h",(function(){return p})),a.d(t,"o",(function(){return g})),a.d(t,"i",(function(){return f})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return v})),a.d(t,"n",(function(){return h})),a.d(t,"l",(function(){return x})),a.d(t,"m",(function(){return b})),a.d(t,"e",(function(){return S})),a.d(t,"f",(function(){return w}));var i=a(1),n=a(75),s=a(91),r=a(15);const l=[{value:"sli.kql.custom",text:s.e},{value:"sli.metric.custom",text:s.f},{value:"sli.metric.timeslice",text:s.i},{value:"sli.histogram.custom",text:s.g},{value:"sli.apm.transactionDuration",text:s.d},{value:"sli.apm.transactionErrorRate",text:s.c},{value:"sli.synthetics.availability",text:s.h}],o=[{value:"occurrences",text:s.a},{value:"timeslices",text:s.b}],u=[{value:"rolling",text:i.i18n.translate("xpack.slo.sloEdit.timeWindow.rolling",{defaultMessage:"Rolling"})},{value:"calendarAligned",text:i.i18n.translate("xpack.slo.sloEdit.timeWindow.calendarAligned",{defaultMessage:"Calendar aligned"})}],c=[{value:"1w",text:i.i18n.translate("xpack.slo.sloEdit.calendarTimeWindow.weekly",{defaultMessage:"Weekly"})},{value:"1M",text:i.i18n.translate("xpack.slo.sloEdit.calendarTimeWindow.monthly",{defaultMessage:"Monthly"})}],d=[90,30,7].map((e=>({value:`${e}d`,text:i.i18n.translate("xpack.slo.sloEdit.rollingTimeWindow.days",{defaultMessage:"{number} days",values:{number:e}})}))),m={type:"sli.kql.custom",params:{index:"",filter:"",good:"",total:"",timestampField:""}},p={type:"sli.metric.custom",params:{index:"",filter:"",good:{metrics:[{name:"A",aggregation:"sum",field:""}],equation:"A"},total:{metrics:[{name:"A",aggregation:"sum",field:""}],equation:"A"},timestampField:""}},g={type:"sli.metric.timeslice",params:{index:"",filter:"",metric:{metrics:[{name:"A",aggregation:"avg",field:""}],equation:"A",comparator:"GT",threshold:0},timestampField:""}},f={type:"sli.histogram.custom",params:{index:"",timestampField:"",filter:"",good:{field:"",aggregation:"value_count"},total:{field:"",aggregation:"value_count"}}},y={type:"sli.apm.transactionDuration",params:{service:"",environment:"",transactionType:"",transactionName:"",threshold:250,filter:"",index:""}},v={type:"sli.apm.transactionErrorRate",params:{service:"",environment:"",transactionType:"",transactionName:"",filter:"",index:""}},h={type:"sli.synthetics.availability",params:{projects:[],tags:[],monitorIds:[],index:r.p}},x={name:"",description:"",indicator:m,timeWindow:{duration:d[1].value,type:"rolling"},tags:[],budgetingMethod:o[0].value,objective:{target:99},groupBy:n.a,settings:{preventInitialBackfill:!1}},b=(d[1].value,o[0].value,n.a,{name:"",description:"",indicator:h,timeWindow:{duration:d[1].value,type:"rolling"},tags:[],budgetingMethod:o[0].value,objective:{target:99},groupBy:r.o,settings:{preventInitialBackfill:!1}}),k=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.gtLabel",{defaultMessage:"Greater than"}),M=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.gteLabel",{defaultMessage:"Greater than or equal to"}),T=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.ltLabel",{defaultMessage:"Less than"}),E=i.i18n.translate("xpack.slo.sloEdit.sliType.timesliceMetric.lteLabel",{defaultMessage:"Less than or equal to"}),S={GT:k,GTE:M,LT:T,LTE:E},w=[{text:k,value:"GT"},{text:M,value:"GTE"},{text:T,value:"LT"},{text:E,value:"LTE"}]},91:function(e,t,a){"use strict";a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return l})),a.d(t,"i",(function(){return o})),a.d(t,"g",(function(){return u})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"l",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"b",(function(){return f})),a.d(t,"k",(function(){return y})),a.d(t,"j",(function(){return v}));var i=a(1),n=a(18),s=a(11);const r=i.i18n.translate("xpack.slo.indicators.customKql",{defaultMessage:"Custom Query"}),l=i.i18n.translate("xpack.slo.indicators.customMetric",{defaultMessage:"Custom Metric"}),o=i.i18n.translate("xpack.slo.indicators.timesliceMetric",{defaultMessage:"Timeslice Metric"}),u=i.i18n.translate("xpack.slo.indicators.histogram",{defaultMessage:"Histogram Metric"}),c=i.i18n.translate("xpack.slo.indicators.apmLatency",{defaultMessage:"APM latency"}),d=i.i18n.translate("xpack.slo.indicators.apmAvailability",{defaultMessage:"APM availability"}),m=i.i18n.translate("xpack.slo.indicators.syntheticsAvailability",{defaultMessage:"Synthetics availability"});function p(e){switch(e){case"sli.kql.custom":return r;case"sli.apm.transactionDuration":return c;case"sli.apm.transactionErrorRate":return d;case"sli.synthetics.availability":return m;case"sli.metric.custom":return l;case"sli.histogram.custom":return u;case"sli.metric.timeslice":return o;default:Object(n.assertNever)(e)}}const g=i.i18n.translate("xpack.slo.budgetingMethod.occurrences",{defaultMessage:"Occurrences"}),f=i.i18n.translate("xpack.slo.budgetingMethod.timeslices",{defaultMessage:"Timeslices"});function y(e){const t=Object(s.c)(e);switch(t.unit){case"m":return i.i18n.translate("xpack.slo.duration.minute",{defaultMessage:"{duration, plural, one {1 minute} other {# minutes}}",values:{duration:t.value}});case"h":return i.i18n.translate("xpack.slo.duration.hour",{defaultMessage:"{duration, plural, one {1 hour} other {# hours}}",values:{duration:t.value}});case"d":return i.i18n.translate("xpack.slo.duration.day",{defaultMessage:"{duration, plural, one {1 day} other {# days}}",values:{duration:t.value}});case"w":return i.i18n.translate("xpack.slo.duration.week",{defaultMessage:"{duration, plural, one {1 week} other {# weeks}}",values:{duration:t.value}});case"M":return i.i18n.translate("xpack.slo.duration.month",{defaultMessage:"{duration, plural, one {1 month} other {# months}}",values:{duration:t.value}})}}function v(e){switch(Object(s.c)(e).unit){case"m":return i.i18n.translate("xpack.slo.duration.minutely",{defaultMessage:"Minutely"});case"h":return i.i18n.translate("xpack.slo.duration.hourly",{defaultMessage:"Hourly"});case"d":return i.i18n.translate("xpack.slo.duration.daily",{defaultMessage:"Daily"});case"w":return i.i18n.translate("xpack.slo.duration.weekly",{defaultMessage:"Weekly"});case"M":return i.i18n.translate("xpack.slo.duration.monthly",{defaultMessage:"Monthly"})}}}}]);