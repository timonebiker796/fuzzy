/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[3],{142:function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return j})),s.d(t,"b",(function(){return m}));var a=s(5),n=s(4),i=s.n(n),o=s(34),l=s(1);const c=e=>l.i18n.translate("xpack.cases.caseTable.caseDetailsLinkAria",{values:{detailName:e},defaultMessage:"click to visit case with title {detailName}"});var r=s(3);const u=({children:e,...t})=>Object(r.jsx)(a.EuiButton,t,e),d=({children:e,...t})=>Object(r.jsx)(a.EuiLink,t,e),b=({children:e,detailName:t,title:s})=>{const{getCaseViewUrl:a,navigateToCaseView:i}=Object(o.j)(),l=Object(n.useCallback)((e=>{e.preventDefault(),i({detailName:t})}),[i,t]);return Object(r.jsx)(d,{onClick:l,href:a({detailName:t}),"data-test-subj":"case-details-link","aria-label":c(null!=s?s:t)},e||t)},j=i.a.memo(b);j.displayName="CaseDetailsLink";const p=({label:e,msgTooltip:t,showToolTip:s,titleTooltip:l})=>{const{getConfigureCasesUrl:c,navigateToConfigureCases:d}=Object(o.l)(),b=Object(n.useCallback)((e=>{e.preventDefault(),d()}),[d]),j=Object(n.useMemo)((()=>Object(r.jsx)(u,{onClick:b,href:c(),iconType:"controlsHorizontal",isDisabled:!1,"aria-label":e,"data-test-subj":"configure-case-button"},e)),[e,b,c]);return s?Object(r.jsx)(a.EuiToolTip,{position:"top",title:l,content:Object(r.jsx)("p",null,t),"data-test-subj":"configure-case-tooltip"},j):Object(r.jsx)(i.a.Fragment,null,j)},m=i.a.memo(p);m.displayName="ConfigureCaseButton"},149:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s(4),n=s(5),i=s(174),o=s(3);const l=Object(i.a)(),c=({status:e,dataTestSubj:t})=>{var s,a;return Object(o.jsx)(n.EuiBadge,{"data-test-subj":t||`case-status-badge-${e}`,color:null===(s=l[e])||void 0===s?void 0:s.color},null===(a=l[e])||void 0===a?void 0:a.label)};c.displayName="Status";const r=Object(a.memo)(c)},155:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(57),n=s(222),i=s(180);const o=()=>{const{owner:e}=Object(a.a)();return Object(n.a)({select:t=>Object(i.a)({configurations:t,owner:e[0]})})}},156:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var a=s(4),n=s.n(a),i=s(5),o=s(216),l=s(196),c=s(80),r=s(3);const u=n.a.memo((({userInfo:e})=>{var t;return null!=e&&null!==(t=e.user)&&void 0!==t&&t.full_name?Object(r.jsx)(i.EuiText,{size:"s",className:"eui-textBreakWord"},Object(r.jsx)("strong",{"data-test-subj":"user-profile-tooltip-full-name"},e.user.full_name)):Object(r.jsx)(i.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-tooltip-single-name"},Object(r.jsx)("strong",null,d(null==e?void 0:e.user)))})),d=e=>e?Object(l.a)(e):c.f;u.displayName="UserFullInformation";const b=({userInfo:e})=>Object(r.jsx)(o.a,{size:"m",userInfo:e});b.displayName="UserToolTipAvatar";const j=({userInfo:e})=>Object(r.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(r.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"user-profile-tooltip-avatar"},Object(r.jsx)(b,{userInfo:e})),Object(r.jsx)(i.EuiFlexItem,{grow:!1},Object(r.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(r.jsx)(i.EuiFlexItem,null,Object(r.jsx)(u,{userInfo:e})),(null==e?void 0:e.user)&&p(e)&&Object(r.jsx)(i.EuiFlexItem,{grow:!1},Object(r.jsx)(i.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-tooltip-email"},e.user.email)))));j.displayName="UserFullRepresentation";const p=e=>{var t,s;return(null==e||null===(t=e.user)||void 0===t?void 0:t.full_name)&&(null==e||null===(s=e.user)||void 0===s?void 0:s.email)},m=({children:e,userInfo:t})=>Object(r.jsx)(i.EuiToolTip,{display:"inlineBlock",position:"top",content:Object(r.jsx)(j,{userInfo:t}),"data-test-subj":"user-profile-tooltip"},e);m.displayName="UserToolTip";const g=n.a.memo(m)},163:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(174),n=s(6),i=s(220);const o=Object(a.a)(),l={[n.g.open]:{...o[n.g.open],actions:{single:{title:i.h}},actionBar:{title:i.c},button:{label:i.j},stats:{title:i.i}},[n.g["in-progress"]]:{...o[n.g["in-progress"]],actions:{single:{title:i.g}},actionBar:{title:i.b},button:{label:i.g},stats:{title:i.f}},[n.g.closed]:{...o[n.g.closed],actions:{single:{title:i.e}},actionBar:{title:i.a},button:{label:i.e},stats:{title:i.d}}}},173:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return i.a}));var a=s(4),n=s(5),i=s(163),o=s(220),l=s(3);const c=({status:e,disabled:t=!1,onClick:s})=>Object(l.jsx)(n.EuiBadge,{iconType:"arrowDown",iconSide:"right",iconOnClick:s,iconOnClickAriaLabel:o.k,"data-test-subj":`case-status-badge-popover-button-${e}`,isDisabled:t,color:i.a[e].color},i.a[e].label);c.displayName="StatusPopoverButton";const r=Object(a.memo)(c);s(187)},174:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(61),n=s(48);const i=()=>({[n.a.open]:{color:"primary",label:a.c,icon:"folderOpen"},[n.a["in-progress"]]:{color:"warning",label:a.b,icon:"folderExclamation"},[n.a.closed]:{color:"default",label:a.a,icon:"folderCheck"}})},175:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(5),n=s(90),i=s.n(n),o=s(4),l=s.n(o),c=s(8),r=s(3);const u=l.a.memo((({children:e,date:t,fieldName:s,className:n=""})=>Object(r.jsx)(a.EuiToolTip,{"data-test-subj":"localized-date-tool-tip",anchorClassName:n,content:Object(r.jsx)(a.EuiFlexGroup,{"data-test-subj":"dates-container",direction:"column",gutterSize:"none"},null!=s?Object(r.jsx)(a.EuiFlexItem,{grow:!1},Object(r.jsx)("span",{"data-test-subj":"field-name"},s)):null,Object(r.jsx)(a.EuiFlexItem,{"data-test-subj":"with-day-of-week",grow:!1},i.a.tz(t,Object(c.i)()).format("llll")))},Object(r.jsx)(l.a.Fragment,null,e))));u.displayName="LocalizedDateTooltip"},185:function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return u})),s(39);var a=s(4),n=s.n(a),i=s(3),o=s(117);const l=s(1).i18n.translate("xpack.cases.emptyString.emptyStringDescription",{defaultMessage:"Empty String"}),c=Object(i.css)("color:",o.euiThemeVars.euiColorMediumShade,";",""),r=()=>Object(i.jsx)("span",{css:c},"â€”"),u=e=>null==e?r():""===e?Object(i.jsx)("span",{css:c},`(${l})`):Object(i.jsx)(n.a.Fragment,null,e)},186:function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var a=s(90),n=s.n(a),i=s(4),o=s.n(i),l=s(113),c=s(8),r=s(185),u=s(175),d=s(218),b=s(3);const j=o.a.memo((({value:e,dateFormat:t,stripMs:s=!1})=>{const a=Object(c.e)(),i=t||a,l=i&&s?i.replace(/\.?SSS/,""):i;return Object(b.jsx)(o.a.Fragment,null,n.a.tz(e,Object(c.i)()).format(l))}));j.displayName="PreferenceFormattedDate";const p=e=>Array.isArray(e)&&"P1DT"===e[0]&&2===e.length;o.a.memo((({value:e})=>{const[t]=Object(c.k)("dateFormat:scaled"),s=Array.isArray(t)?t.find(p):null,a=Array.isArray(s)&&2===s.length?s[1]:"YYYY-MM-DD";return Object(b.jsx)(j,{dateFormat:a,value:e})})).displayName="PreferenceFormattedP1DTDate",o.a.memo((({value:e,fieldName:t,className:s=""})=>{if(null==e)return Object(r.b)(e);const a=Object(d.a)(e);return a.isValid()?Object(b.jsx)(u.a,{date:a.toDate(),fieldName:t,className:s},Object(b.jsx)(j,{value:a.toDate()})):Object(r.b)(e)})).displayName="FormattedDate";const m=({value:e,stripMs:t=!1})=>{if(null==e)return Object(r.b)(e);const s=Object(d.a)(e);if(!s.isValid())return Object(r.b)(e);const a=s.toDate();return Object(b.jsx)(u.a,{date:a},n()(a).add(1,"hours").isBefore(new Date)?Object(b.jsx)(j,{"data-test-subj":"preference-time",value:a,stripMs:t}):Object(b.jsx)(l.FormattedRelative,{"data-test-subj":"relative-time",value:a}))};m.displayName="FormattedRelativePreferenceDate"},187:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var a=s(4),n=s(5),i=s(163),o=s(3);const l=({caseCount:e,caseStatus:t,isLoading:s,dataTestSubj:l})=>{const c=Object(a.useMemo)((()=>[{title:i.a[t].stats.title,description:s?Object(o.jsx)(n.EuiLoadingSpinner,{"data-test-subj":`${l}-loading-spinner`}):null!=e?e:"-"}]),[e,t,l,s]);return Object(o.jsx)(n.EuiDescriptionList,{"data-test-subj":l,textStyle:"reverse",listItems:c})};l.displayName="StatusStats";const c=Object(a.memo)(l)},193:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var a=s(4),n=s.n(a),i=s(216),o=s(3);const l=({userInfo:e})=>Object(o.jsx)(i.a,{size:"s",userInfo:e});l.displayName="SmallUserAvatar";const c=n.a.memo(l)},196:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(221),n=s(12),i=s(80);const o=e=>{if(!e)return i.l;const t=Object(a.e)(e);return Object(n.isEmpty)(t)?i.l:t}},198:function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return b}));var a=s(44),n=s(76),i=s(8),o=s(46),l=s(77),c=s(57),r=s(144),u=s(145);const d={cases:[],countClosedCases:0,countInProgressCases:0,countOpenCases:0,page:0,perPage:0,total:0},b=(e={})=>{var t;const s=Object(i.j)(),{owner:d}=Object(c.a)(),b=Object(r.a)(Object(u.b)("delete")),j=d.length?d:b,p=null!=(null===(t=e.filterOptions)||void 0===t?void 0:t.owner)&&e.filterOptions.owner.length>0?{owner:e.filterOptions.owner}:{owner:j};return Object(a.useQuery)(n.e.cases(e),(({signal:t})=>{var s,a;return Object(l.j)({filterOptions:{...n.b,...null!==(s=e.filterOptions)&&void 0!==s?s:{},...p},queryParams:{...n.c,...null!==(a=e.queryParams)&&void 0!==a?a:{}},signal:t})}),{keepPreviousData:!0,onError:e=>{"AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:o.e})}})}},215:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(4),n=s.n(a),i=s(5),o=s(1),l=s(20),c=s(3);const r=({totalCasesToBeDeleted:e,onCancel:t,onConfirm:s})=>{return Object(c.jsx)(i.EuiConfirmModal,{buttonColor:"danger",cancelButtonText:l.l,confirmButtonText:l.E(e),"data-test-subj":"confirm-delete-case-modal",defaultFocusedButton:"confirm",onCancel:t,onConfirm:s,title:l.E(e)},(a=e,o.i18n.translate("xpack.cases.confirmDeleteCase.confirmQuestion",{values:{quantity:a},defaultMessage:"By deleting {quantity, plural, =1 {this case} other {these cases}}, all related case data will be permanently removed and you will no longer be able to push data to an external incident management system. Are you sure you wish to proceed?"})));var a};r.displayName="ConfirmDeleteCaseModalComp";const u=n.a.memo(r)},216:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(4),n=s.n(a),i=s(264),o=s(3);const l=({size:e})=>Object(o.jsx)(i.a,{"data-test-subj":"case-user-profile-avatar-unknown-user",size:e});l.displayName="UnknownUserAvatar";const c=n.a.memo(l),r=({size:e,userInfo:t})=>{var s,a;const n=null==t||null===(s=t.user)||void 0===s?void 0:s.username;return void 0!==(null==t?void 0:t.user)?Object(o.jsx)(i.a,{user:null==t?void 0:t.user,avatar:null==t||null===(a=t.data)||void 0===a?void 0:a.avatar,"data-test-subj":`case-user-profile-avatar-${n}`,size:e}):Object(o.jsx)(c,{size:e})};r.displayName="CaseUserAvatar";const u=n.a.memo(r)},217:function(e,t,s){"use strict";var a=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty,o="undefined"!=typeof Element;function l(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var s,c,r,u=a(e),d=a(t);if(u&&d){if((c=e.length)!=t.length)return!1;for(s=c;0!=s--;)if(!l(e[s],t[s]))return!1;return!0}if(u!=d)return!1;var b=e instanceof Date,j=t instanceof Date;if(b!=j)return!1;if(b&&j)return e.getTime()==t.getTime();var p=e instanceof RegExp,m=t instanceof RegExp;if(p!=m)return!1;if(p&&m)return e.toString()==t.toString();var g=n(e);if((c=g.length)!==n(t).length)return!1;for(s=c;0!=s--;)if(!i.call(t,g[s]))return!1;if(o&&e instanceof Element&&t instanceof Element)return e===t;for(s=c;0!=s--;)if(!("_owner"===(r=g[s])&&e.$$typeof||l(e[r],t[r])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return l(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},218:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var a=s(39),n=s(124),i=s.n(n);const o=e=>{if(Object(a.isString)(e)&&""!==e.trim()){const t=i()(new Date(e));return t.isValid()||isNaN(+e)?t:i()(new Date(+e))}return i()(new Date(e))}},219:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var a=s(44),n=s(46),i=s(77),o=s(76),l=s(45);const c=()=>{const e=Object(a.useQueryClient)(),{showErrorToast:t,showSuccessToast:s}=Object(l.a)();return Object(a.useMutation)((({caseIds:e})=>Object(i.b)({caseIds:e})),{mutationKey:o.d.deleteCases,onSuccess:(t,{successToasterTitle:a})=>{e.invalidateQueries(o.e.casesList()),e.invalidateQueries(o.e.tags()),e.invalidateQueries(o.e.categories()),e.invalidateQueries(o.e.userProfiles()),s(a)},onError:e=>{t(e,{title:n.c})}})}},220:function(e,t,s){"use strict";s.d(t,"k",(function(){return i})),s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return c}));var a=s(1),n=s(20);s.d(t,"d",(function(){return n.s})),s.d(t,"e",(function(){return n.u})),s.d(t,"f",(function(){return n.K})),s.d(t,"g",(function(){return n.N})),s.d(t,"h",(function(){return n.U})),s.d(t,"i",(function(){return n.V})),s.d(t,"j",(function(){return n.bb})),a.i18n.translate("xpack.cases.status.all",{defaultMessage:"All status"});const i=a.i18n.translate("xpack.cases.status.iconAria",{defaultMessage:"Change status"}),o=a.i18n.translate("xpack.cases.caseView.caseOpened",{defaultMessage:"Case opened"}),l=a.i18n.translate("xpack.cases.caseView.caseInProgress",{defaultMessage:"Case in progress"}),c=a.i18n.translate("xpack.cases.caseView.caseClosed",{defaultMessage:"Case closed"})},223:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var a=s(4),n=s(167);const i=({caseAssignees:e,userProfiles:t})=>{const{assigneesWithProfiles:s,assigneesWithoutProfiles:i}=Object(a.useMemo)((()=>{const{usersWithProfiles:s,usersWithoutProfiles:a}=e.reduce(((e,s)=>{const a=t.get(s.uid);return a?e.usersWithProfiles.push(a):e.usersWithoutProfiles.push({uid:s.uid}),e}),{usersWithProfiles:[],usersWithoutProfiles:[]}),i=Object(n.d)(s),o=null==i?void 0:i.map((e=>({uid:e.uid,profile:e})));return{assigneesWithProfiles:null!=o?o:[],assigneesWithoutProfiles:a}}),[e,t]),o=Object(a.useMemo)((()=>[...s,...i]),[s,i]);return{assigneesWithProfiles:s,assigneesWithoutProfiles:i,allAssignees:o}}},225:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a=e=>{var t,s;return null!==(t=null===(s=e.profile)||void 0===s?void 0:s.user.username)&&void 0!==t?t:e.uid}},226:function(e,t,s){"use strict";const a=s(266);e.exports=(e,t={})=>{if(!Number.isFinite(e))throw new TypeError("Expected a finite number");t.colonNotation&&(t.compact=!1,t.formatSubMilliseconds=!1,t.separateMilliseconds=!1,t.verbose=!1),t.compact&&(t.secondsDecimalDigits=0,t.millisecondsDecimalDigits=0);const s=[],n=(e,a,n,i)=>{if(!(0!==s.length&&t.colonNotation||0!==e||t.colonNotation&&"m"===n))return;let o,l;if(i=(i||e||"0").toString(),t.colonNotation){o=s.length>0?":":"",l="";const e=i.includes(".")?i.split(".")[0].length:i.length,t=s.length>0?2:1;i="0".repeat(Math.max(0,t-e))+i}else o="",l=t.verbose?" "+(c=a,1===e?c:`${c}s`):n;var c;s.push(o+i+l)};if(("number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1)<1){const t=1e3-e%1e3;t<500&&(e+=t)}if(e>=59950&&!t.separateMilliseconds&&!t.formatSubMilliseconds){const t=60-e%60;t<=50&&(e+=t)}const i=a(e);if(n(Math.trunc(i.days/365),"year","y"),n(i.days%365,"day","d"),n(i.hours,"hour","h"),n(i.minutes,"minute","m"),t.separateMilliseconds||t.formatSubMilliseconds||e<1e3)if(n(i.seconds,"second","s"),t.formatSubMilliseconds)n(i.milliseconds,"millisecond","ms"),n(i.microseconds,"microsecond","Âµs"),n(i.nanoseconds,"nanosecond","ns");else{const e=i.milliseconds+i.microseconds/1e3+i.nanoseconds/1e6,s="number"==typeof t.millisecondsDecimalDigits?t.millisecondsDecimalDigits:0,a=e>=1?Math.round(e):Math.ceil(e),o=s?e.toFixed(s):a;n(parseFloat(o,10),"millisecond","ms",o)}else{const s=e/1e3%60,a="number"==typeof t.secondsDecimalDigits?t.secondsDecimalDigits:1,i=s.toFixed(a),o=t.keepDecimalsOnWholeSeconds?i:i.replace(/\.0+$/,"");n(parseFloat(o,10),"second","s",o)}return 0===s.length?"0"+(t.verbose?" milliseconds":"ms"):t.compact?s[0]:"number"==typeof t.unitCount?s.slice(0,Math.max(t.unitCount,1)).join(" "):t.colonNotation?s.join(""):s.join(" ")}},253:function(e,t,s){"use strict";s.d(t,"a",(function(){return _s}));var a=s(4),n=s.n(a),i=s(5),o=s(3),l=s(217),c=s.n(l),r=s(62),u=s(149),d=s(6),b=s(185),j=s(186),p=s(142),m=s(78),g=s(113),O=s(219),f=s(1),x=s(20);const y=f.i18n.translate("xpack.cases.actions.deleteMultipleCases",{defaultMessage:"Delete cases"}),C=f.i18n.translate("xpack.cases.actions.deleteSingleCase",{defaultMessage:"Delete case"});var h=s(57);const v=({onAction:e,onActionSuccess:t,isDisabled:s})=>{const n=Object(i.useEuiTheme)(),{permissions:l}=Object(h.a)(),[c,r]=Object(a.useState)(!1),[u,d]=Object(a.useState)([]),b=l.delete,j=s||!b,p=Object(a.useCallback)((()=>r(!1)),[]),m=Object(a.useCallback)((t=>{e(),r(!0),d(t)}),[e]),{mutate:g}=Object(O.a)(),f=Object(a.useCallback)((()=>{p(),g({caseIds:u.map((({id:e})=>e)),successToasterTitle:x.D(u.length)},{onSuccess:t})}),[g,t,p,u]),v=j?n.euiTheme.colors.disabled:"danger";return{getAction:e=>{return{name:Object(o.jsx)(i.EuiTextColor,{color:v},(t=e.length,t>1?y:C)),onClick:()=>m(e),disabled:j,"data-test-subj":"cases-bulk-action-delete",icon:Object(o.jsx)(i.EuiIcon,{type:"trash",size:"m",color:v}),key:"cases-bulk-action-delete"};var t},isModalVisible:c,onConfirmDeletion:f,onCloseModal:p,canDelete:b}};var E=s(215),k=s(44),S=s(46),F=s(77),w=s(45),T=s(76);const I=()=>{const e=Object(k.useQueryClient)(),{showErrorToast:t,showSuccessToast:s}=Object(w.a)();return Object(k.useMutation)((({cases:e})=>Object(F.u)({cases:e})),{mutationKey:T.d.updateCases,onSuccess:(t,{successToasterTitle:a})=>{e.invalidateQueries(T.e.casesList()),e.invalidateQueries(T.e.tags()),e.invalidateQueries(T.e.userProfiles()),s(a)},onError:e=>{t(e,{title:S.f})}})};f.i18n.translate("xpack.cases.actions.status.close",{defaultMessage:"Close selected"}),f.i18n.translate("xpack.cases.actions.status.open",{defaultMessage:"Open selected"}),f.i18n.translate("xpack.cases.actions.status.inProgress",{defaultMessage:"Mark in progress"});var A=s(173);const D=(e,t)=>{const s=t.length,a=1===s?t[0].title:"";return e===d.g.open?(({totalCases:e,caseTitle:t})=>f.i18n.translate("xpack.cases.actions.reopenedCases",{values:{caseTitle:t,totalCases:e},defaultMessage:'Opened {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}))({totalCases:s,caseTitle:a}):e===d.g["in-progress"]?(({totalCases:e,caseTitle:t})=>f.i18n.translate("xpack.cases.actions.markInProgressCases",{values:{caseTitle:t,totalCases:e},defaultMessage:'Marked {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}} as in progress'}))({totalCases:s,caseTitle:a}):e===d.g.closed?(({totalCases:e,caseTitle:t})=>f.i18n.translate("xpack.cases.actions.closedCases",{values:{caseTitle:t,totalCases:e},defaultMessage:'Closed {totalCases, plural, =1 {"{caseTitle}"} other {{totalCases} cases}}'}))({totalCases:s,caseTitle:a}):""},P=(e,t)=>e.every((e=>e.status===t)),M=({onAction:e,onActionSuccess:t,isDisabled:s,selectedStatus:n})=>{const{mutate:i}=I(),{permissions:o}=Object(h.a)(),l=o.update,c=s||!l,r=Object(a.useCallback)(((s,a)=>{e();const n=s.map((e=>({status:a,id:e.id,version:e.version})));i({cases:n,successToasterTitle:D(a,s)},{onSuccess:t})}),[e,i,t]),u=e=>n&&n===e?"check":"empty";return{getActions:e=>[{name:A.b[d.g.open].label,icon:u(d.g.open),onClick:()=>r(e,d.g.open),disabled:c||P(e,d.g.open),"data-test-subj":"cases-bulk-action-status-open",key:"cases-bulk-action-status-open"},{name:A.b[d.g["in-progress"]].label,icon:u(d.g["in-progress"]),onClick:()=>r(e,d.g["in-progress"]),disabled:c||P(e,d.g["in-progress"]),"data-test-subj":"cases-bulk-action-status-in-progress",key:"cases-bulk-action-status-in-progress"},{name:A.b[d.g.closed].label,icon:u(d.g.closed),onClick:()=>r(e,d.g.closed),disabled:c||P(e,d.g.closed),"data-test-subj":"cases-bulk-action-status-closed",key:"cases-bulk-status-action"}],canUpdateStatus:l}};var z=s(188),N=s(150);const L=({totalCases:e,severity:t,caseTitle:s})=>f.i18n.translate("xpack.cases.actions.severity",{values:{caseTitle:s,totalCases:e,severity:t},defaultMessage:'{totalCases, plural, =1 {Case "{caseTitle}" was} other {{totalCases} cases were}} set to {severity}'}),B=(e,t)=>{const s=t.length,a=1===s?t[0].title:"";switch(e){case d.d.LOW:return(({totalCases:e,caseTitle:t})=>L({totalCases:e,caseTitle:t,severity:N.a[d.d.LOW].label}))({totalCases:s,caseTitle:a});case d.d.MEDIUM:return(({totalCases:e,caseTitle:t})=>L({totalCases:e,caseTitle:t,severity:N.a[d.d.MEDIUM].label}))({totalCases:s,caseTitle:a});case d.d.HIGH:return(({totalCases:e,caseTitle:t})=>L({totalCases:e,caseTitle:t,severity:N.a[d.d.HIGH].label}))({totalCases:s,caseTitle:a});case d.d.CRITICAL:return(({totalCases:e,caseTitle:t})=>L({totalCases:e,caseTitle:t,severity:N.a[d.d.CRITICAL].label}))({totalCases:s,caseTitle:a});default:return""}},H=(e,t)=>e.every((e=>e.severity===t)),U=({onAction:e,onActionSuccess:t,isDisabled:s,selectedSeverity:n})=>{const{mutate:i}=I(),{permissions:o}=Object(h.a)(),l=o.update,c=s||!l,r=Object(a.useCallback)(((s,a)=>{e();const n=s.map((e=>({severity:a,id:e.id,version:e.version})));i({cases:n,successToasterTitle:B(a,s)},{onSuccess:t})}),[e,i,t]),u=e=>n&&n===e?"check":"empty";return{getActions:e=>[{name:N.a[d.d.LOW].label,icon:u(d.d.LOW),onClick:()=>r(e,d.d.LOW),disabled:c||H(e,d.d.LOW),"data-test-subj":"cases-bulk-action-severity-low",key:"cases-bulk-action-severity-low"},{name:N.a[d.d.MEDIUM].label,icon:u(d.d.MEDIUM),onClick:()=>r(e,d.d.MEDIUM),disabled:c||H(e,d.d.MEDIUM),"data-test-subj":"cases-bulk-action-severity-medium",key:"cases-bulk-action-severity-medium"},{name:N.a[d.d.HIGH].label,icon:u(d.d.HIGH),onClick:()=>r(e,d.d.HIGH),disabled:c||H(e,d.d.HIGH),"data-test-subj":"cases-bulk-action-severity-high",key:"cases-bulk-action-severity-high"},{name:N.a[d.d.CRITICAL].label,icon:u(d.d.CRITICAL),onClick:()=>r(e,d.d.CRITICAL),disabled:c||H(e,d.d.CRITICAL),"data-test-subj":"cases-bulk-action-severity-critical",key:"cases-bulk-action-severity-critical"}],canUpdateSeverity:l}};var R=s(12);const K=({isDisabled:e,fieldKey:t,onAction:s,onActionSuccess:n,successToasterTitle:i,fieldSelector:o,itemsTransformer:l})=>{const{mutate:c}=I(),{permissions:r}=Object(h.a)(),[u,d]=Object(a.useState)(!1),[b,j]=Object(a.useState)([]),p=r.update,m=e||!p,g=Object(a.useCallback)((()=>d(!1)),[]),O=Object(a.useCallback)((e=>{s(),d(!0),j(e)}),[s]),f=Object(a.useCallback)((e=>{s(),g();const a=b.reduce(((s,a)=>{const n=o(a),i=Object(R.difference)(n,e.unSelectedItems),c=new Set([...i,...e.selectedItems]);return r=new Set([...n]),u=c,Object(R.isEqual)(r,u)?s:[...s,{[t]:l(Array.from(c.values())),id:a.id,version:a.version}];var r,u}),[]);c({cases:a,successToasterTitle:i(b.length)},{onSuccess:n})}),[t,o,l,s,n,g,b,i,c]);return{isFlyoutOpen:u,onFlyoutClosed:g,onSaveItems:f,openFlyout:O,isActionDisabled:m}},$=e=>f.i18n.translate("xpack.cases.containers.editedCases",{values:{totalCases:e},defaultMessage:"Edited {totalCases, plural, =1 {case} other {{totalCases} cases}}"}),G=e=>f.i18n.translate("xpack.cases.actions.headerSubtitle",{values:{totalCases:e},defaultMessage:"Selected cases: {totalCases}"}),q=f.i18n.translate("xpack.cases.actions.saveSelection",{defaultMessage:"Save selection"}),_=f.i18n.translate("xpack.cases.actions.searchPlaceholder",{defaultMessage:"Search"}),V=f.i18n.translate("xpack.cases.actions.tags.edit",{defaultMessage:"Edit tags"}),W=f.i18n.translate("xpack.cases.actions.tags.selectAll",{defaultMessage:"Select all"}),Q=f.i18n.translate("xpack.cases.actions.tags.selectNone",{defaultMessage:"Select none"}),Y=f.i18n.translate("xpack.cases.actions.tags.noTagsAvailable",{defaultMessage:"No tags available. To add a tag, enter it in the query bar"}),J=f.i18n.translate("xpack.cases.actions.tags.noTagsMatch",{defaultMessage:"No tags match your search"}),X=({onAction:e,onActionSuccess:t,isDisabled:s})=>{const{isFlyoutOpen:a,onFlyoutClosed:n,onSaveItems:l,openFlyout:c,isActionDisabled:r}=K({fieldKey:"tags",isDisabled:s,onAction:e,onActionSuccess:t,successToasterTitle:$,fieldSelector:e=>e.tags,itemsTransformer:e=>e});return{getAction:e=>({name:V,onClick:()=>c(e),disabled:r,"data-test-subj":"cases-bulk-action-tags",icon:Object(o.jsx)(i.EuiIcon,{type:"tag",size:"m"}),key:"cases-bulk-action-tags"}),isFlyoutOpen:a,onFlyoutClosed:n,onSaveTags:l}};var Z=s(177),ee=function(e){return e.CHECKED="checked",e.PARTIAL="partial",e.UNCHECKED="unchecked",e}(ee||{});let te=function(e){return e[e.CHECK_ITEM=0]="CHECK_ITEM",e[e.UNCHECK_ITEM=1]="UNCHECK_ITEM",e[e.SET_NEW_STATE=2]="SET_NEW_STATE",e}({});var se=function(e){return e.CHECKED="check",e.PARTIAL="asterisk",e.UNCHECKED="empty",e}(se||{});const ae={[ee.CHECKED]:se.CHECKED,[ee.PARTIAL]:se.PARTIAL,[ee.UNCHECKED]:se.UNCHECKED},ne=(e,t)=>{switch(t.type){case te.CHECK_ITEM:const s={};for(const e of t.payload)s[e.key]={key:e.key,itemState:ee.CHECKED,dirty:!0,icon:se.CHECKED,data:e.data};return{...e,items:{...e.items,...s}};case te.UNCHECK_ITEM:const a={};for(const e of t.payload)a[e.key]={key:e.key,itemState:ee.UNCHECKED,dirty:!0,icon:se.UNCHECKED,data:e.data};return{...e,items:{...e.items,...a}};case te.SET_NEW_STATE:return{...t.payload};default:Object(i.assertNever)(t)}},ie=({items:e,selectedCases:t,fieldSelector:s})=>{const a=oe({selectedCases:t,fieldSelector:s}),n=t.length,i={},o={items:i,itemCounterMap:a};for(const t of e){var l;const e=null!==(l=a.get(t))&&void 0!==l?l:0,s=e===n,o=e<n&&0!==e,c=s?ee.CHECKED:o?ee.PARTIAL:ee.UNCHECKED,r=le(c);i[t]={key:t,itemState:c,dirty:s,icon:r,data:{}}}return o},oe=({selectedCases:e,fieldSelector:t})=>{const s=new Map;for(const n of e){const e=t(n);for(const t of e){var a;s.set(t,(null!==(a=s.get(t))&&void 0!==a?a:0)+1)}}return s},le=e=>ae[e],ce=e=>e.map((e=>e.key)),re=e=>Object.keys(e).map((t=>({key:t,data:e[t].data}))),ue=({items:e,selectedCases:t,fieldSelector:s,itemToSelectableOption:n,onChangeItems:i})=>{const[o,l]=Object(a.useReducer)(ne,{items:e,selectedCases:t,fieldSelector:s},ie),c=Object(a.useCallback)((()=>Object.keys(o.items).map((e=>{var t;const s=n({key:e,data:o.items[e].data});return{key:e,...o.items[e].itemState===ee.CHECKED?{checked:"on"}:{},"data-test-subj":`cases-actions-items-edit-selectable-item-${e}`,...s,label:null!==(t=s.label)&&void 0!==t?t:e,data:{...null==s?void 0:s.data,itemIcon:o.items[e].icon}}}))),[o.items,n]),r=Object(a.useCallback)((e=>{const t=e.map((e=>{var t,s;return null!==(t=e.data)&&void 0!==t&&t.newItem?{...e,label:null!==(s=e.key)&&void 0!==s?s:""}:e})),{selectedItems:s,unSelectedItems:a}=((e,t)=>{const s=[],a=[];for(const l of e){var n,i,o;"on"===l.checked&&s.push({key:l.key,data:null!==(i=l.data)&&void 0!==i?i:{}}),null!==(n=l.data)&&void 0!==n&&n.newItem||l.checked||!t[l.key]||!t[l.key].dirty||a.push({key:l.key,data:null!==(o=l.data)&&void 0!==o?o:{}})}return{selectedItems:s,unSelectedItems:a}})(t,o.items);l({type:te.CHECK_ITEM,payload:s}),l({type:te.UNCHECK_ITEM,payload:a}),i({selectedItems:ce(s),unSelectedItems:ce(a)})}),[i,o.items]),u=Object(a.useCallback)((()=>{l({type:te.CHECK_ITEM,payload:re(o.items)}),i({selectedItems:Object.keys(o.items),unSelectedItems:[]})}),[i,o.items]),d=Object(a.useCallback)((()=>{const e=[];for(const[t,s]of Object.entries(o.items))s.itemState!==ee.CHECKED&&s.itemState!==ee.PARTIAL||e.push({key:t,data:s.data});l({type:te.UNCHECK_ITEM,payload:e}),i({selectedItems:[],unSelectedItems:ce(e)})}),[o.items,i]),b=Object(a.useMemo)((()=>c()),[c]),j=Object.values(o.items).filter((e=>e.itemState===ee.CHECKED||e.itemState===ee.PARTIAL)).length,p=Object(a.useCallback)((e=>{const a=ie({items:e,selectedCases:t,fieldSelector:s});l({type:te.SET_NEW_STATE,payload:a})}),[s,t]);return Object(a.useMemo)((()=>({state:o,options:b,totalSelectedItems:j,onChange:r,onSelectAll:u,onSelectNone:d,resetItems:p})),[r,u,d,b,p,o,j])},de=e=>({key:e.key,label:e.key,"data-test-subj":`cases-actions-tags-edit-selectable-tag-${e.key}`});var be={name:"y6n6nb",styles:"flex-grow:0"},je={name:"1o3nkn",styles:"margin-left:auto"};const pe=({selectedCases:e,tags:t,isLoading:s,onChangeTags:l})=>{const{state:c,options:r,totalSelectedItems:u,onChange:d,onSelectAll:b,onSelectNone:j}=ue({items:t,selectedCases:e,itemToSelectableOption:de,fieldSelector:e=>e.tags,onChangeItems:l}),[p,m]=Object(a.useState)(""),{euiTheme:g}=Object(i.useEuiTheme)(),O=Object(a.useCallback)(((e,t)=>{const s=e.newItem?"cases-actions-tags-edit-selectable-add-new-tag-icon":`cases-actions-tags-edit-selectable-tag-${e.label}-icon-${e.itemIcon}`;return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiIcon,{type:e.itemIcon,"data-test-subj":s,className:"euiSelectableListItem__icon euiSelectableListItem__prepend"}),Object(o.jsx)(i.EuiHighlight,{search:t},e.label))}),[]),y=Object(a.useMemo)((()=>Object(R.isEmpty)(p)||((e,t)=>t.some((t=>t.key===e)))(p,r)?r:[{key:p,label:x.f(p),"data-test-subj":"cases-actions-tags-edit-selectable-add-new-tag",data:{itemIcon:"empty",newItem:!0}},...r]),[r,p]),C=Object(a.useMemo)((()=>!((e,t)=>t.some((t=>{var s;return null===(s=t.key)||void 0===s?void 0:s.includes(e)})))(p,r)&&Object.keys(c.items).length>0),[r,p,c.items]),h=Object(a.useCallback)((e=>{m(e)}),[]);return Object(o.jsx)(i.EuiSelectable,{options:y,searchable:!0,searchProps:{placeholder:_,isLoading:s,isClearable:!s,onChange:h,value:p,"data-test-subj":"cases-actions-tags-edit-selectable-search-input"},renderOption:O,listProps:{showIcons:!1},onChange:d,noMatchesMessage:J,emptyMessage:Y,"data-test-subj":"cases-actions-tags-edit-selectable",height:"full"},((e,s)=>{return Object(o.jsx)(n.a.Fragment,null,s,Object(o.jsx)(i.EuiSpacer,{size:"s"}),Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",responsive:!1,direction:"row",css:be,gutterSize:"none"},Object(o.jsx)(i.EuiFlexItem,{grow:!1,css:Object(o.css)({borderRight:g.border.thin,paddingRight:g.size.s},"","")},Object(o.jsx)(i.EuiText,{size:"xs",color:"subdued"},(l=t.length,f.i18n.translate("xpack.cases.actions.tags.totalTags",{defaultMessage:"Total tags: {totalTags}",values:{totalTags:l}})))),Object(o.jsx)(i.EuiFlexItem,{grow:!1,css:Object(o.css)({paddingLeft:g.size.s},"","")},Object(o.jsx)(i.EuiText,{size:"xs",color:"subdued"},(a=u,f.i18n.translate("xpack.cases.actions.tags.selectedTags",{defaultMessage:"Selected: {selectedTags}",values:{selectedTags:a}})))),Object(o.jsx)(i.EuiFlexItem,{grow:!1,css:je},Object(o.jsx)(i.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",justifyContent:"flexEnd",gutterSize:"xs"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"xs",flush:"right",onClick:b},W)),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"xs",flush:"right",onClick:j},Q))))),Object(o.jsx)(i.EuiHorizontalRule,{margin:"m"}),C?Object(o.jsx)(i.EuiText,{size:"xs",color:"subdued",textAlign:"center",css:Object(o.css)({marginBottom:g.size.s},"",""),"data-test-subj":"cases-actions-tags-edit-selectable-no-match-label"},J):null,e);var a,l}))};pe.displayName="EditTagsSelectable";const me=n.a.memo(pe),ge=Object(o.css)(Object(i.euiFullHeight)()," .euiFlyoutBody__overflowContent{",Object(i.euiFullHeight)(),";}",""),Oe=({selectedCases:e,onClose:t,onSaveTags:s})=>{const{data:n,isLoading:l}=Object(Z.a)(),[c,r]=Object(a.useState)({selectedItems:[],unSelectedItems:[]}),u=Object(a.useCallback)((()=>s(c)),[s,c]),d=e.length>1?G(e.length):e[0].title;return Object(o.jsx)(i.EuiFlyout,{ownFocus:!0,onClose:t,"aria-labelledby":"cases-edit-tags-flyout","data-test-subj":"cases-edit-tags-flyout",size:"s",paddingSize:"m"},Object(o.jsx)(i.EuiFlyoutHeader,{hasBorder:!0},Object(o.jsx)(i.EuiTitle,{size:"m"},Object(o.jsx)("h2",{"data-test-subj":"cases-edit-tags-flyout-title"},V)),Object(o.jsx)(i.EuiText,{color:"subdued"},Object(o.jsx)("p",null,d))),Object(o.jsx)(i.EuiFlyoutBody,{css:ge},l?Object(o.jsx)(i.EuiLoadingSpinner,null):Object(o.jsx)(me,{selectedCases:e,isLoading:l,tags:null!=n?n:[],onChangeTags:r})),Object(o.jsx)(i.EuiFlyoutFooter,null,Object(o.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{onClick:t,flush:"left","data-test-subj":"cases-edit-tags-flyout-cancel"},x.l)),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButton,{onClick:u,fill:!0,"data-test-subj":"cases-edit-tags-flyout-submit"},q)))))};Oe.displayName="EditTagsFlyout";const fe=n.a.memo(Oe);var xe=s(80);const ye=f.i18n.translate("xpack.cases.actions.assignees.edit",{defaultMessage:"Edit assignees"}),Ce=f.i18n.translate("xpack.cases.actions.assignees.searchPlaceholder",{defaultMessage:"Find a user"}),he=f.i18n.translate("xpack.cases.actions.assignees.noSelectedAssigneesHelpText",{defaultMessage:"Search to assign users."}),ve=({onAction:e,onActionSuccess:t,isDisabled:s})=>{const{isFlyoutOpen:a,onFlyoutClosed:n,onSaveItems:l,openFlyout:c,isActionDisabled:r}=K({fieldKey:"assignees",isDisabled:s,onAction:e,onActionSuccess:t,successToasterTitle:$,fieldSelector:e=>e.assignees.map((({uid:e})=>e)),itemsTransformer:e=>e.map((e=>({uid:e})))});return{getAction:e=>({name:ye,onClick:()=>c(e),disabled:r,"data-test-subj":"cases-bulk-action-assignees",icon:Object(o.jsx)(i.EuiIcon,{type:"userAvatar",size:"m"}),key:"cases-bulk-action-assignees"}),isFlyoutOpen:a,onFlyoutClosed:n,onSaveAssignees:l}};var Ee=s(221),ke=s(189),Se=s(165),Fe=s(178),we=s(191),Te=s(192),Ie=s(193);const Ae=({totalSelectedCases:e})=>{return Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"none",direction:"column",justifyContent:"spaceAround","data-test-subj":"case-user-profiles-assignees-no-selected-assignees"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiIcon,{type:"userAvatar",size:"xl"}),Object(o.jsx)(i.EuiSpacer,{size:"xs"})),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiTextAlign,{textAlign:"center"},Object(o.jsx)(i.EuiText,{size:"s",color:"default"},Object(o.jsx)("strong",null,(t=e,f.i18n.translate("xpack.cases.actions.assignees.noSelectedAssigneesTitle",{values:{totalCases:t},defaultMessage:"The selected {totalCases, plural, =1 {case does} other {cases do}} not have any assigned users"}))),Object(o.jsx)("br",null)),Object(o.jsx)(i.EuiText,{size:"s",color:"subdued"},he))));var t};Ae.displayName="NoSelectedAssignees";const De=n.a.memo(Ae);var Pe={name:"y6n6nb",styles:"flex-grow:0"},Me={name:"1o3nkn",styles:"margin-left:auto"};const ze=({selectedCases:e,onChangeAssignees:t})=>{const{owner:s}=Object(h.a)(),{euiTheme:l}=Object(i.useEuiTheme)(),{isUserTyping:c,onContentChange:r,onDebounce:u}=Object(Se.a)(),d=Object(a.useRef)(!1),b=Object(a.useMemo)((()=>new Set(e.map((e=>e.assignees.map((({uid:e})=>e)))).flat())),[e]),{data:j,isLoading:p}=Object(ke.a)({uids:Array.from(b.values())}),m=Object(a.useMemo)((()=>null!=j?j:new Map),[j]),g=((e,t)=>{const s=[];if(!t)return s;for(const a of e)t.has(a)||s.push(a);return s})(b,m),O=[...m.keys(),...g],[y,C]=Object(a.useState)(""),{data:v,isLoading:E}=Object(Fe.a)({name:y,owners:s,onDebounce:u}),k=Object(a.useCallback)((e=>{const t=e.data,s=Object(R.isEmpty)(t)?m.get(e.key):t;if(Re(s))return He(s);const a=null==v?void 0:v.find((t=>t.uid===e.data.uid));return a?He(a):{key:e.key,label:x.pb,data:{unknownUser:!0},"data-test-subj":`cases-actions-assignees-edit-selectable-assignee-${e.key}`}}),[v,m]),{options:S,totalSelectedItems:F,onChange:w,onSelectNone:T,resetItems:I}=ue({items:O,selectedCases:e,fieldSelector:e=>e.assignees.map((({uid:e})=>e)),onChangeItems:t,itemToSelectableOption:k});j&&!d.current&&(d.current=!0,I(O));const A=Le({searchResultUserProfiles:null!=v?v:[],options:S,searchValue:y,initialUserProfiles:m}),D=p||E||c,P=Object(a.useCallback)(((e,t)=>{var s,a,n;const l=null!==(s=e.itemIcon)&&void 0!==s?s:"empty",c=`cases-actions-assignees-edit-selectable-assignee-${e.key}-icon-${l}`,r=e.user?{user:e.user,data:e.data}:void 0;return Object(o.jsx)(i.EuiFlexGroup,null,Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center",justifyContent:"center",responsive:!1},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiIcon,{type:l,"data-test-subj":c})),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(Ie.a,{userInfo:r})))),Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1},Object(o.jsx)(i.EuiFlexItem,null,Object(o.jsx)(i.EuiHighlight,{search:y},e.label)),null!==(a=e.user)&&void 0!==a&&a.email&&(null===(n=e.user)||void 0===n?void 0:n.email)!==e.label?Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiTextColor,{color:e.disabled?"disabled":"subdued"},y?Object(o.jsx)(i.EuiHighlight,{search:y},e.user.email):e.user.email)):void 0))}),[y]),M=Object(a.useCallback)((e=>{C(e),r(e)}),[r]);return p?Object(o.jsx)(i.EuiLoadingSpinner,null):Object(o.jsx)(i.EuiSelectable,{options:A,searchable:!0,searchProps:{placeholder:Ce,isLoading:D,isClearable:!D,onChange:M,value:y,"data-test-subj":"cases-actions-assignees-edit-selectable-search-input"},renderOption:P,listProps:{showIcons:!1},onChange:w,noMatchesMessage:D?Object(o.jsx)(we.a,null):Object(o.jsx)(Te.a,null),emptyMessage:Object(o.jsx)(De,{totalSelectedCases:e.length}),"data-test-subj":"cases-actions-assignees-edit-selectable",height:"full"},((e,t)=>{return Object(o.jsx)(n.a.Fragment,null,t,Object(o.jsx)(i.EuiSpacer,{size:"s"}),Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",responsive:!1,direction:"row",css:Pe,gutterSize:"none"},Object(o.jsx)(i.EuiFlexItem,{grow:!1,css:Object(o.css)({paddingLeft:l.size.s},"","")},Object(o.jsx)(i.EuiText,{size:"xs",color:"subdued"},(s=F,f.i18n.translate("xpack.cases.actions.assignees.selectedAssignees",{defaultMessage:"Selected: {selectedAssignees}",values:{selectedAssignees:s}})))),Object(o.jsx)(i.EuiFlexItem,{grow:!1,css:Me},Object(o.jsx)(i.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",justifyContent:"flexEnd",gutterSize:"xs"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"xs",flush:"right",onClick:T},xe.i))))),Object(o.jsx)(i.EuiHorizontalRule,{margin:"m"}),e);var s}))};ze.displayName="EditAssigneesSelectable";const Ne=n.a.memo(ze),Le=({searchResultUserProfiles:e,options:t,searchValue:s,initialUserProfiles:a})=>{var n,i;const o=Object(R.isEmpty)(s)?[]:null!==(n=null==e||null===(i=e.filter((e=>!t.find((t=>Ue(t,e))))))||void 0===i?void 0:i.map((e=>He(e))))&&void 0!==n?n:[],l=Object(R.isEmpty)(s)?t.filter((e=>{var t,s,n;return a.has(null==e||null===(t=e.data)||void 0===t?void 0:t.uid)||"empty"!==(null==e||null===(s=e.data)||void 0===s?void 0:s.itemIcon)||(null===(n=e.data)||void 0===n?void 0:n.unknownUser)})):[...t];return Be([...o,...l])},Be=e=>Object(R.sortBy)(e,(e=>e.label)),He=e=>({key:e.uid,label:Object(Ee.e)(e.user),data:e,"data-test-subj":`cases-actions-assignees-edit-selectable-assignee-${e.uid}`}),Ue=(e,t)=>e.key===t.uid,Re=e=>!!e&&!!e.uid&&!!e.user,Ke=Object(o.css)(Object(i.euiFullHeight)()," .euiFlyoutBody__overflowContent{",Object(i.euiFullHeight)(),";}",""),$e=({selectedCases:e,onClose:t,onSaveAssignees:s})=>{const[n,l]=Object(a.useState)({selectedItems:[],unSelectedItems:[]}),c=Object(a.useCallback)((()=>s(n)),[s,n]),r=e.length>1?G(e.length):e[0].title;return Object(o.jsx)(i.EuiFlyout,{ownFocus:!0,onClose:t,"aria-labelledby":"cases-edit-assignees-flyout","data-test-subj":"cases-edit-assignees-flyout",size:"s",paddingSize:"m"},Object(o.jsx)(i.EuiFlyoutHeader,{hasBorder:!0},Object(o.jsx)(i.EuiTitle,{size:"m"},Object(o.jsx)("h2",{"data-test-subj":"cases-edit-assignees-flyout-title"},ye)),Object(o.jsx)(i.EuiText,{color:"subdued"},Object(o.jsx)("p",null,r))),Object(o.jsx)(i.EuiFlyoutBody,{css:Ke},Object(o.jsx)(Ne,{selectedCases:e,onChangeAssignees:l})),Object(o.jsx)(i.EuiFlyoutFooter,null,Object(o.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{onClick:t,flush:"left","data-test-subj":"cases-edit-assignees-flyout-cancel"},x.l)),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButton,{onClick:c,fill:!0,"data-test-subj":"cases-edit-assignees-flyout-submit"},q)))))};$e.displayName="EditAssigneesFlyout";const Ge=n.a.memo($e),qe=({theCase:e,disableActions:t})=>{const[s,l]=Object(a.useState)(!1),c=Object(a.useCallback)((()=>l(!s)),[s]),r=Object(a.useCallback)((()=>l(!1)),[]),u=Object(z.a)(),d=v({isDisabled:!1,onAction:r,onActionSuccess:u}),b=(({onActionSuccess:e})=>{const{showSuccessToast:t}=Object(w.a)();return{getAction:s=>({name:Object(o.jsx)(i.EuiTextColor,null,x.y),onClick:()=>{navigator.clipboard.writeText(s.id).then((()=>{e(),t(x.z)}))},"data-test-subj":"cases-action-copy-id",icon:Object(o.jsx)(i.EuiIcon,{type:"copyClipboard",size:"m"}),key:"cases-action-copy-id"})}})({onActionSuccess:r}),j=M({isDisabled:!1,onAction:r,onActionSuccess:u,selectedStatus:e.status}),p=U({isDisabled:!1,onAction:r,onActionSuccess:u,selectedSeverity:e.severity}),O=X({isDisabled:!1,onAction:r,onActionSuccess:u}),f=ve({isDisabled:!1,onAction:r,onActionSuccess:u}),y=d.canDelete,C=j.canUpdateStatus,h=Object(a.useMemo)((()=>{const t=[],s=[{id:0,items:t,title:m.a}];var a,n,i,l;return C&&(t.push({name:Object(o.jsx)(g.FormattedMessage,{defaultMessage:"Status: {status}",id:"xpack.cases.allCasesView.statusWithValue",values:{status:Object(o.jsx)("b",null,null!==(a=null===(n=A.b[e.status])||void 0===n?void 0:n.label)&&void 0!==a?a:"-")}}),panel:1,disabled:!C,key:`case-action-status-panel-${e.id}`,"data-test-subj":`case-action-status-panel-${e.id}`}),t.push({name:Object(o.jsx)(g.FormattedMessage,{defaultMessage:"Severity: {severity}",id:"xpack.cases.allCasesView.severityWithValue",values:{severity:Object(o.jsx)("b",null,null!==(i=null===(l=N.a[e.severity])||void 0===l?void 0:l.label)&&void 0!==i?i:"-")}}),panel:2,disabled:!C,key:`case-action-severity-panel-${e.id}`,"data-test-subj":`case-action-severity-panel-${e.id}`})),C&&y&&t.push({isSeparator:!0,key:`actions-separator-${e.id}`,"data-test-subj":`actions-separator-${e.id}`}),C&&(t.push(O.getAction([e])),t.push(f.getAction([e]))),t.push(b.getAction(e)),y&&t.push(d.getAction([e])),C&&(s.push({id:1,title:m.Y,items:j.getActions([e])}),s.push({id:2,title:m.R,items:p.getActions([e])})),s}),[f,y,C,b,d,p,j,O,e]);return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiPopover,{id:`case-action-popover-${e.id}`,key:`case-action-popover-${e.id}`,"data-test-subj":`case-action-popover-${e.id}`,button:Object(o.jsx)(i.EuiButtonIcon,{onClick:c,iconType:"boxesHorizontal","aria-label":m.a,color:"text",key:`case-action-popover-button-${e.id}`,"data-test-subj":`case-action-popover-button-${e.id}`,disabled:t}),isOpen:s,closePopover:r,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(o.jsx)(i.EuiContextMenu,{initialPanelId:0,panels:h,key:`case-action-menu-${e.id}`,"data-test-subj":`case-action-menu-${e.id}`})),d.isModalVisible?Object(o.jsx)(E.a,{totalCasesToBeDeleted:1,onCancel:d.onCloseModal,onConfirm:d.onConfirmDeletion}):null,O.isFlyoutOpen?Object(o.jsx)(fe,{onClose:O.onFlyoutClosed,selectedCases:[e],onSaveTags:O.onSaveTags}):null,f.isFlyoutOpen?Object(o.jsx)(Ge,{onClose:f.onFlyoutClosed,selectedCases:[e],onSaveAssignees:f.onSaveAssignees}):null)};qe.displayName="ActionColumnComponent";const _e=n.a.memo(qe);var Ve=s(143),We=s(155);const Qe=e=>{const{isAlertsEnabled:t,caseAssignmentAuthorized:s}=Object(Ve.a)(),{data:{customFields:a}}=Object(We.a)(),n=!0,i={title:{field:"title",name:m.y,canDisplay:n,isCheckedDefault:!0},assignees:{field:"assignees",name:m.b,canDisplay:s&&!e,isCheckedDefault:!0},tags:{field:"tags",name:m.cb,canDisplay:!e,isCheckedDefault:!0},totalAlerts:{field:"totalAlerts",name:x.h,canDisplay:t&&!e,isCheckedDefault:!0},totalComment:{field:"totalComment",name:m.l,canDisplay:!e,isCheckedDefault:!0},category:{field:"category",name:m.g,canDisplay:n,isCheckedDefault:!0},closedAt:{field:"closedAt",name:m.j,canDisplay:!e,isCheckedDefault:!1},createdAt:{field:"createdAt",name:m.n,canDisplay:n,isCheckedDefault:!0},updatedAt:{field:"updatedAt",name:m.eb,canDisplay:!e,isCheckedDefault:!0},externalIncident:{field:"externalIncident",name:m.s,canDisplay:!e,isCheckedDefault:!0},status:{field:"status",name:m.Y,canDisplay:!e,isCheckedDefault:!0},severity:{field:"severity",name:m.R,canDisplay:n,isCheckedDefault:!0}};return a.forEach((({key:t,label:s})=>{i[t]={field:t,name:s,canDisplay:!e,isCheckedDefault:!1}})),i};var Ye=s(8),Je=s(89),Xe=s(58),Ze=s(156),et=s(223),tt=s(225);const st=({assignees:e,userProfiles:t,compressedDisplayLimit:s=3})=>{const[n,l]=Object(a.useState)(!1),{allAssignees:c}=Object(et.a)({caseAssignees:e,userProfiles:t}),r=Object(a.useCallback)((()=>l((e=>!e))),[]),u=c.length-s,d=u>0,j=Object(a.useMemo)((()=>c.slice(0,s)),[c,s]),p=Object(a.useMemo)((()=>n||!d?c:j),[c,n,j,d]);return c.length<=0?Object(b.a)():Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"xs","data-test-subj":"case-table-column-assignee",wrap:!0},p.map((e=>{const t=Object(tt.a)(e);return Object(o.jsx)(i.EuiFlexItem,{grow:!1,key:e.uid,"data-test-subj":`case-table-column-assignee-${t}`},Object(o.jsx)(Ze.a,{userInfo:e.profile},Object(o.jsx)(Ie.a,{userInfo:e.profile})))})),d?Object(o.jsx)(i.EuiButtonEmpty,{size:"xs","data-test-subj":"case-table-column-expand-button",onClick:r,style:{alignSelf:"center"}},n?m.V:m.W(u)):null)};st.displayName="AssigneesColumn";const at=n.a.memo(st);var nt=s(71);const it=Object(o.css)("text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:",3,";-webkit-box-orient:vertical;overflow:hidden;word-break:normal;",""),ot=(e,t)=>null!=e?Object(o.jsx)("span",{"data-test-subj":t},e):Object(b.a)();var lt={name:"3s4lj9",styles:"max-width:100px"};const ct={name:"f1mmt5",styles:"svg{height:20px!important;position:relative;top:3px;width:20px!important;}"},rt=({theCase:e,connectors:t})=>{var s,a,n,l,c,r,u;const{triggersActionsUi:d}=Object(Ye.g)().services,{actions:b}=Object(Ye.c)();if(null==e.externalService)return ot(m.z,"case-table-column-external-notPushed");const j=t.find((t=>{var s;return t.id===(null===(s=e.externalService)||void 0===s?void 0:s.connectorId)})),p=null!=e.updatedAt?new Date(e.updatedAt):null,g=null!=(null===(s=e.externalService)||void 0===s?void 0:s.pushedAt)?new Date(null===(a=e.externalService)||void 0===a?void 0:a.pushedAt):null,O=null===g||null!=p&&g.getTime()<(null==p?void 0:p.getTime());return Object(o.jsx)("p",null,b.read&&Object(o.jsx)("span",{css:ct},Object(o.jsx)(i.EuiIcon,{size:"original",title:null===(n=e.externalService)||void 0===n?void 0:n.connectorName,type:Object(Xe.f)(d,null==j?void 0:j.actionTypeId),"data-test-subj":"cases-table-connector-icon"})),Object(o.jsx)(i.EuiLink,{"data-test-subj":"case-table-column-external",title:null===(l=e.externalService)||void 0===l?void 0:l.connectorName,href:null===(c=e.externalService)||void 0===c?void 0:c.externalUrl,target:"_blank","aria-label":m.I(null===(r=e.externalService)||void 0===r?void 0:r.connectorName)},null===(u=e.externalService)||void 0===u?void 0:u.externalTitle),O?ot(m.K,"case-table-column-external-requiresUpdate"):ot(m.fb,"case-table-column-external-upToDate"))};rt.displayName="ExternalServiceColumn";var ut=s(39);const dt=e=>e.map((e=>({key:e,label:e}))),bt=e=>e.map((e=>e.key));var jt={name:"3s4yqf",styles:"width:400px"},pt={name:"asmvhr",styles:"max-width:186px"};const mt=({buttonLabel:e,buttonIconType:t,hideActiveOptionsNumber:s,id:l,limit:c,limitReachedMessage:r,onChange:u,options:d,selectedOptionKeys:b=[],renderOption:j,transparentBackground:p,isLoading:g})=>{const{euiTheme:O}=Object(i.useEuiTheme)(),[f,x]=Object(a.useState)(!1),y=!s,C=Boolean(c&&r&&b.length>=c),h=((e,t)=>e.map((({key:e,label:s})=>{const a={label:s,key:e};return t.includes(e)&&(a.checked="on"),a["data-test-subj"]=`options-filter-popover-item-${e.split(" ").join("-")}`,a})))(d,b);return Object(a.useEffect)((()=>{const e=b.filter((e=>d.some((({key:t})=>t===e))));Object(ut.isEqual)(e,b)||g||u({filterId:l,selectedOptionKeys:e})}),[b,d,l,u,g]),Object(o.jsx)(i.EuiFilterGroup,{css:Object(o.css)(p&&"background-color: transparent;",";","")},Object(o.jsx)(i.EuiPopover,{ownFocus:!0,button:Object(o.jsx)(i.EuiFilterButton,{css:pt,"data-test-subj":`options-filter-popover-button-${l}`,iconType:t||"arrowDown",onClick:()=>x((e=>!e)),isSelected:f,numFilters:y?h.length:void 0,hasActiveFilters:y?b.length>0:void 0,numActiveFilters:y?b.length:void 0,"aria-label":e},Object(o.jsx)(i.EuiText,{size:"s",className:"eui-textTruncate"},e)),isOpen:f,closePopover:()=>x(!1),panelPaddingSize:"none",repositionOnScroll:!0,panelProps:{"data-test-subj":`options-filter-popover-panel-${l}`},"data-test-subj":`options-filter-popover-${l}`},C&&Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiHorizontalRule,{margin:"none"}),Object(o.jsx)(i.EuiCallOut,{title:r,color:"warning",size:"s","data-test-subj":"maximum-length-warning"}),Object(o.jsx)(i.EuiHorizontalRule,{margin:"none"})),Object(o.jsx)(i.EuiSelectable,{options:h,searchable:!0,searchProps:{placeholder:e,compressed:!1,"data-test-subj":`${l}-search-input`},emptyMessage:m.r,onChange:e=>{const t=(e=>e.filter((e=>"on"===e.checked)))(e);C&&c&&t.length>=c||u({filterId:l,selectedOptionKeys:bt(t)})},singleSelection:!1,renderOption:j},((e,t)=>Object(o.jsx)("div",{css:jt},Object(o.jsx)(i.EuiPopoverTitle,{paddingSize:"s"},t),Object(o.jsx)("div",{css:Object(o.css)("line-height:",O.size.xl,";padding-left:",O.size.m,";border-bottom:",O.border.thin,";","")},Object(o.jsx)(i.EuiTextColor,{color:"subdued"},m.G(h.length))),Object(o.jsx)(i.EuiSpacer,{size:"xs"}),e)))))};mt.displayName="MultiSelectFilter";const gt=({options:e,activeFilters:t,onChange:s,isLoading:a})=>Object(o.jsx)(mt,{buttonLabel:m.x,buttonIconType:"plus",hideActiveOptionsNumber:!0,id:"filters",onChange:s,options:e,selectedOptionKeys:t,transparentBackground:!0,isLoading:a});gt.displayName="MoreFiltersSelectable";var Ot=s(197),ft=s(2);const xt=({onChange:e,selectedOptionKeys:t,availableSolutions:s})=>{const{owner:a}=Object(h.a)(),n=Boolean(a.length),l=dt(n?a:s),c=s.map((e=>(e=>(e=>Object.keys(ft.Tb).includes(e))(e)?ft.Tb[e]:{id:e,label:e,iconType:""})(e)));return Object(o.jsx)(mt,{buttonLabel:m.X,id:"owner",onChange:e,options:l,renderOption:e=>{const t=c.find((t=>t.id===e.label));return Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiIcon,{size:"m",type:t.iconType,title:t.label})),Object(o.jsx)(i.EuiFlexItem,{grow:!1},t.label))},selectedOptionKeys:t,isLoading:!1})};xt.displayName="SolutionFilterComponent";const yt=n.a.memo(xt);yt.displayName="SolutionFilter";const Ct=[{key:d.g.open,label:m.bb},{key:d.g["in-progress"],label:m.ab},{key:d.g.closed,label:m.Z}],ht=({countClosedCases:e,countInProgressCases:t,countOpenCases:s,hiddenStatuses:n=[],onChange:l,selectedOptionKeys:c})=>{const r=Object(a.useMemo)((()=>({[d.g.open]:null!=s?s:0,[d.g["in-progress"]]:null!=t?t:0,[d.g.closed]:null!=e?e:0})),[e,t,s]),b=Object(a.useMemo)((()=>[...Ct].filter((e=>!n.includes(e.key)))),[n]);return Object(o.jsx)(mt,{buttonLabel:m.Y,id:"status",onChange:l,options:b,renderOption:e=>{const t=e.key;return Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},Object(o.jsx)(i.EuiFlexItem,{grow:1},Object(o.jsx)("span",null,Object(o.jsx)(u.a,{status:t}))),Object(o.jsx)(i.EuiFlexItem,{grow:!1},` (${r[t]})`))},selectedOptionKeys:c,isLoading:!1})};ht.displayName="StatusFilterComponent";const vt=n.a.memo(ht),Et=dt(Object.keys(N.a)),kt=({selectedOptionKeys:e,onChange:t})=>Object(o.jsx)(mt,{buttonLabel:m.R,id:"severity",onChange:t,options:Et,renderOption:e=>{const t=N.a[e.label];return Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",responsive:!1},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiHealth,{color:t.color},t.label)))},selectedOptionKeys:e,isLoading:!1});kt.displayName="SeverityFilter";var St=s(224);var Ft=s(265),wt=s.n(Ft),Tt=s(40);const It=(e,t)=>{const s=Object(a.useRef)(!1),{appId:n}=Object(Tt.a)(),{owner:i}=Object(h.a)(),o=i.length>0?i.join("."):n,l=Pt(e,o),[c,r]=Object(a.useState)((()=>At(l,t))),u=Object(a.useCallback)((e=>{r(e),Dt(l,e)}),[l]);return o?(null==o||s.current||(s.current=!0,u(At(l,t))),[c,u]):[t,u]},At=(e,t)=>{try{const s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(e){return t}},Dt=(e,t)=>{try{const s=JSON.stringify(t);localStorage.setItem(e,s)}catch(e){}},Pt=(e,t)=>[t,e].filter(Boolean).join("."),Mt="cf_",zt="cases",Nt=["status","severity","page","perPage","sortField","sortOrder"],Lt=e=>e.replace(Mt,""),Bt=(e,t)=>{const s=(e=>{const t=Number(e);if(!isNaN(t))return t})(e);return s&&s>0?s:t},Ht=({buttonLabel:e,customFieldOptions:t,fieldKey:s,onFilterOptionsChange:a,type:n,isLoading:i})=>{return{key:(l=s,`${Mt}${l}`),isActive:!1,isAvailable:!0,label:e,getEmptyOptions:()=>({customFields:{[s]:{type:n,options:[]}}}),render:({filterOptions:l})=>{var c;return Object(o.jsx)(mt,{buttonLabel:e,id:s,onChange:({filterId:e,selectedOptionKeys:t})=>{a({customFields:{[Lt(e)]:{options:t,type:n}}})},options:t.map((e=>({key:e.key,label:e.label}))),selectedOptionKeys:(null===(c=l.customFields[s])||void 0===c?void 0:c.options)||[],isLoading:i})}};var l},Ut=({isSelectorView:e,onFilterOptionsChange:t,systemFilterConfig:s,filterOptions:a,customFields:n,isLoading:i})=>{var o;const[l,c]=(({filterOptions:e})=>{const[t,s]=It(ft.hb.casesTableFiltersConfig,[]),a=[...t||[]];return a.forEach((t=>{if((({filter:e,filterOptions:t})=>{var s;return e.key.startsWith(Mt)?!e.isActive&&!Object(R.isEmpty)(null===(s=t.customFields[Lt(e.key)])||void 0===s?void 0:s.options):!e.isActive&&!Object(R.isEmpty)(t[e.key])})({filter:t,filterOptions:e})){const e=a.findIndex((e=>t.key===e.key));a.splice(e,1),a.push({key:t.key,isActive:!0})}})),Object(R.isEqual)(a,t)||s(a),[a,s]})({filterOptions:a}),{customFieldsFilterConfig:r}=(({isSelectorView:e,customFields:t,isLoading:s,onFilterOptionsChange:a})=>{const n=[];if(e)return{customFieldsFilterConfig:[]};for(const{key:e,type:i,label:o}of null!=t?t:[])if(nt.a[i]){const{filterOptions:t}=nt.a[i]();t&&n.push(Ht({buttonLabel:o,customFieldOptions:t,fieldKey:e,onFilterOptionsChange:a,type:i,isLoading:s}))}return{customFieldsFilterConfig:n}})({isSelectorView:e,customFields:n,isLoading:i,onFilterOptionsChange:t}),u=(({systemFilterConfig:e,customFieldsFilterConfig:t})=>new Map([...e,...t].filter((e=>e.isAvailable)).map((e=>[e.key,e]))))({systemFilterConfig:s,customFieldsFilterConfig:r.map((e=>({...e,isActive:!!Object.entries(a.customFields).find((([t,s])=>t===Lt(e.key)))||e.isActive})))});(({prevFilterConfigs:e,currentFilterConfigs:t,onFilterOptionsChange:s})=>{var a;const n=[];[...null!==(a=null==e?void 0:e.entries())&&void 0!==a?a:[]].forEach((([e,s])=>{t.has(e)||n.push(s.getEmptyOptions())})),n.length>0&&s(Object(R.merge)({},...n))})({prevFilterConfigs:null!==(o=wt()(u))&&void 0!==o?o:new Map,currentFilterConfigs:u,onFilterOptionsChange:t});const d=Array.from(u.values()),b=d.map((({key:e,label:t})=>({key:e,label:t}))).sort(((e,t)=>e.label>t.label?1:e.label<t.label?-1:e.key>t.key?1:-1)),j=(l&&l.length>0?l:d).filter((e=>e.isActive&&u.has(e.key))).map((e=>u.get(e.key)));return{activeSelectableOptionKeys:j.map((e=>e.key)),filters:j,onFilterConfigChange:({selectedOptionKeys:e})=>{const s=[...l||[]],a=[];(l||[]).forEach((({key:t,isActive:n})=>{const i=s.findIndex((e=>e.key===t));if(u.has(t)){const o=e.find((e=>e===t));o&&!n?(s.splice(i,1),s.push({key:t,isActive:!0})):!o&&n&&(a.push(t),s[i]={key:t,isActive:!1})}else s.splice(i,1)})),u.forEach((({key:t})=>{if(!s.find((({key:e})=>e===t))){const n=e.find((e=>e===t));n||a.push(t),s.push({key:t,isActive:Boolean(n)})}}));const n=a.filter((e=>u.has(e))).map((e=>u.get(e).getEmptyOptions()));if(n.length>0){const e=Object(R.merge)({},...n);t(e)}c(s)},selectableOptions:b}},Rt=({filterOptionsSearch:e,onFilterOptionsChange:t})=>{const[s,n]=Object(a.useState)(e),l=Object(a.useCallback)((e=>{const s=e.trim();n(s),t({search:s})}),[t]);return Object(o.jsx)(i.EuiFieldSearch,{"aria-label":m.M,"data-test-subj":"search-cases",fullWidth:!0,incremental:!1,placeholder:m.O,onChange:e=>n(e.target.value),onSearch:l,value:s})};Rt.displayName="TableSearchComponent";const Kt=n.a.memo(Rt),$t=(e,t,s)=>{if(Array.isArray(e))return t},Gt=({countClosedCases:e,countOpenCases:t,countInProgressCases:s,onFilterChanged:n,hiddenStatuses:l,availableSolutions:c,isSelectorView:r=!1,onCreateCasePressed:u,isLoading:d,currentUserProfile:b,filterOptions:j})=>{const{data:p=[],isLoading:g}=Object(Z.a)(),{data:O=[],isLoading:f}=Object(Ot.a)(),{caseAssignmentAuthorized:x}=Object(Ve.a)(),{data:{customFields:y},isFetching:C}=Object(We.a)(),h=Object(a.useCallback)((e=>{const t=Object(R.mergeWith)({},j,e,$t);Object(R.isEqual)(t,j)||n(t)}),[j,n]),v=d||g||f||C,{systemFilterConfig:E}=(({availableSolutions:e,caseAssignmentAuthorized:t,categories:s,countClosedCases:a,countInProgressCases:n,countOpenCases:i,currentUserProfile:l,hiddenStatuses:c,isLoading:r,isSelectorView:u,onFilterOptionsChange:d,tags:b})=>{const j=(({availableSolutions:e,caseAssignmentAuthorized:t,categories:s,countClosedCases:a,countInProgressCases:n,countOpenCases:i,currentUserProfile:l,hiddenStatuses:c,isLoading:r,isSelectorView:u,onFilterOptionsChange:d,tags:b})=>{const j=({filterId:e,selectedOptionKeys:t})=>{d({[e]:t})};return[{key:"severity",label:m.R,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({severity:[]}),render:({filterOptions:e})=>Object(o.jsx)(kt,{selectedOptionKeys:e.severity,onChange:j})},{key:"status",label:m.Y,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({status:[]}),render:({filterOptions:e})=>Object(o.jsx)(vt,{selectedOptionKeys:null==e?void 0:e.status,onChange:j,hiddenStatuses:c,countClosedCases:a,countInProgressCases:n,countOpenCases:i})},{key:"assignees",label:m.b,isActive:!0,isAvailable:t&&!u,getEmptyOptions:()=>({assignees:[]}),render:({filterOptions:e})=>Object(o.jsx)(St.a,{selectedAssignees:null==e?void 0:e.assignees,currentUserProfile:l,isLoading:r,onSelectionChange:j})},{key:"tags",label:m.cb,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({tags:[]}),render:({filterOptions:e})=>Object(o.jsx)(mt,{buttonLabel:m.cb,id:"tags",limit:ft.Fb,limitReachedMessage:m.w(ft.Fb,"tags"),onChange:j,options:dt(b),selectedOptionKeys:null==e?void 0:e.tags,isLoading:r})},{key:"category",label:m.f,isActive:!0,isAvailable:!0,getEmptyOptions:()=>({category:[]}),render:({filterOptions:e})=>Object(o.jsx)(mt,{buttonLabel:m.f,id:"category",limit:ft.pb,limitReachedMessage:m.w(ft.pb,"categories"),onChange:j,options:dt(s),selectedOptionKeys:null==e?void 0:e.category,isLoading:r})},{key:"owner",label:m.X,isActive:!0,isAvailable:e.length>1,getEmptyOptions:()=>({owner:[]}),render:({filterOptions:t})=>Object(o.jsx)(yt,{onChange:j,selectedOptionKeys:null==t?void 0:t.owner,availableSolutions:e})}]})({availableSolutions:e,caseAssignmentAuthorized:t,categories:s,countClosedCases:a,countInProgressCases:n,countOpenCases:i,currentUserProfile:l,hiddenStatuses:c,isLoading:r,isSelectorView:u,onFilterOptionsChange:d,tags:b});return{systemFilterConfig:j}})({availableSolutions:c,caseAssignmentAuthorized:x,categories:O,countClosedCases:e,countInProgressCases:s,countOpenCases:t,currentUserProfile:b,hiddenStatuses:l,isLoading:v,isSelectorView:r,onFilterOptionsChange:h,tags:p}),{filters:k,selectableOptions:S,activeSelectableOptionKeys:F,onFilterConfigChange:w}=Ut({systemFilterConfig:E,onFilterOptionsChange:h,isSelectorView:r,filterOptions:j,customFields:y,isLoading:v}),T=Object(a.useCallback)((()=>{u&&u()}),[u]);return Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexStart",wrap:!0,"data-test-subj":"cases-table-filters"},r&&u?Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButton,{fill:!0,onClick:T,iconType:"plusInCircle","data-test-subj":"cases-table-add-case-filter-bar"},m.o)):null,Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(Kt,{filterOptionsSearch:j.search,key:j.search,onFilterOptionsChange:h})),k.map((e=>Object(o.jsx)(i.EuiFlexItem,{grow:!1,key:e.key},e.render({filterOptions:j})))),r||Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(gt,{options:S,activeFilters:F,onChange:w,isLoading:v})))};Gt.displayName="CasesTableFiltersComponent";const qt=n.a.memo(Gt);qt.displayName="CasesTableFilters";const _t=[10,25,50,100];var Vt=s(118),Wt=s.n(Vt),Qt=s(34);const Yt=({columns:e,data:t,goToCreateCase:s,isCasesLoading:l,isCommentUpdating:c,isDataEmpty:r,isSelectorView:u,onChange:d,pagination:b,selection:j,sorting:g,tableRef:O,tableRowProps:f,isLoadingColumns:x,rowHeader:y})=>{const{permissions:C}=Object(h.a)(),{getCreateCaseUrl:v,navigateToCreateCase:E}=Object(Qt.m)(),{euiTheme:k}=Object(i.useEuiTheme)(),S=Object(a.useCallback)((e=>{e.preventDefault(),null!=s?s():E()}),[s,E]);return l&&r||x?Object(o.jsx)("div",{css:Object(o.css)("margin-top:",k.size.m,";","")},Object(o.jsx)(i.EuiSkeletonText,{"data-test-subj":"initialLoadingPanelAllCases",lines:10})):Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiBasicTable,{className:Wt()({isSelectorView:u}),columns:e,rowHeader:y,"data-test-subj":"cases-table",itemId:"id",items:t.cases,loading:c,noItemsMessage:Object(o.jsx)(i.EuiEmptyPrompt,{title:Object(o.jsx)("h3",null,m.D),titleSize:"xs",body:C.create?m.E:m.F,actions:C.create&&Object(o.jsx)(p.d,{isDisabled:!C.create,fill:!0,size:"s",onClick:S,href:v(),iconType:"plusInCircle","data-test-subj":"cases-table-add-case"},m.o)}),onChange:d,pagination:b,ref:O,rowProps:f,selection:u?void 0:j,sorting:g}))};Yt.displayName="CasesTable";var Jt=s(226),Xt=s.n(Jt),Zt=s(54),es=s(187),ts=s(28);const ss=()=>{const{data:{countOpenCases:e,countInProgressCases:t,countClosedCases:s}={countOpenCases:0,countInProgressCases:0,countClosedCases:0},isLoading:l}=(()=>{const e=Object(Ye.f)(),{owner:t}=Object(h.a)(),{showErrorToast:s}=Object(w.a)();return Object(k.useQuery)(T.e.casesStatuses(),(({signal:s})=>Object(Zt.d)({http:e,query:{owner:t},signal:s})),{onError:e=>{s(e,{title:S.e})}})})(),{data:{mttr:c}={mttr:0},isLoading:r}=(()=>{const e=Object(Ye.f)(),{owner:t}=Object(h.a)(),{showErrorToast:s}=Object(w.a)();return Object(k.useQuery)(T.e.casesMetrics(),(({signal:s})=>Object(Zt.c)({http:e,query:{owner:t,features:[ts.a.MTTR]},signal:s})),{onError:e=>{s(e,{title:S.e})}})})(),u=Object(a.useMemo)((()=>null!=c?Xt()(1e3*c,{compact:!0,verbose:!1}):"-"),[c]);return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiPanel,{hasBorder:!0,paddingSize:"m",grow:!1},Object(o.jsx)(i.EuiFlexGroup,{responsive:!0,"data-test-subj":"cases-metrics-stats"},Object(o.jsx)(i.EuiFlexItem,{grow:!0},Object(o.jsx)(es.a,{dataTestSubj:"openStatsHeader",caseCount:e,caseStatus:d.g.open,isLoading:l})),Object(o.jsx)(i.EuiFlexItem,{grow:!0},Object(o.jsx)(es.a,{dataTestSubj:"inProgressStatsHeader",caseCount:t,caseStatus:d.g["in-progress"],isLoading:l})),Object(o.jsx)(i.EuiFlexItem,{grow:!0},Object(o.jsx)(es.a,{dataTestSubj:"closedStatsHeader",caseCount:s,caseStatus:d.g.closed,isLoading:l})),Object(o.jsx)(i.EuiFlexItem,{grow:!0},Object(o.jsx)(i.EuiDescriptionList,{"data-test-subj":"mttrStatsHeader",textStyle:"reverse",listItems:[{title:Object(o.jsx)(n.a.Fragment,null,m.d," ",Object(o.jsx)(i.EuiIconTip,{content:m.c,position:"right"})),description:r?Object(o.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"mttr-stat-loading-spinner"}):u}]})))),Object(o.jsx)(i.EuiSpacer,{size:"l"}))};ss.displayName="CasesMetrics";var as=s(168),ns=s(198),is=s(169),os=s(145),ls=s(27),cs=s(122);var rs=s(48);s(174);var us={name:"1uc4sf3",styles:"margin-left:auto;flex-grow:0"},ds={name:"qamjgr",styles:"margin-right:4px"};const bs=n.a.memo((({count:e,icon:t})=>Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"none",css:us},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiIcon,{css:ds,size:"s",type:t,"data-test-subj":"comment-count-icon"})),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiText,{size:"xs"},e)))));bs.displayName="IconWithCount";const js=(e,t)=>t<=0||e.length<=t?e:e.slice(0,t).trim().concat("..."),ps=f.i18n.translate("cases.components.tooltip.opened",{defaultMessage:"Opened"}),ms=f.i18n.translate("cases.components.tooltip.closed",{defaultMessage:"Closed"}),gs=f.i18n.translate("cases.components.tooltip.by",{defaultMessage:"by"}),Os=n.a.memo((({title:e,description:t,status:s,totalComments:a,createdAt:l,createdBy:c})=>{var r,d;return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"xs",direction:"column"},Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"xs",responsive:!1},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(u.a,{status:s})),Object(o.jsx)(bs,{count:a,icon:"editorComment"})),Object(o.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(o.jsx)(i.EuiFlexItem,null,Object(o.jsx)(i.EuiText,{size:"relative"},Object(o.jsx)("strong",null,js(e,35)))),Object(o.jsx)(i.EuiFlexItem,null,Object(o.jsx)(i.EuiText,{size:"relative"},js(t,80))))),Object(o.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(o.jsx)(i.EuiText,{size:"relative"},s===rs.a.closed?ms:ps," ",Object(o.jsx)(g.FormattedRelative,{value:l})," ",c.username||c.fullName?Object(o.jsx)(n.a.Fragment,null,gs," ",Object(o.jsx)("strong",{"data-test-subj":"tooltip-username"},js(null!==(r=null!==(d=c.username)&&void 0!==d?d:c.fullName)&&void 0!==r?r:"",15))):null))}));Os.displayName="TooltipContent";const fs=Object(a.memo)(Os);var xs={name:"1tpdvqq",styles:"width:240px"},ys={name:"1o3679e",styles:"width:70px;margin-bottom:12px"};const Cs=()=>Object(o.jsx)(i.EuiFlexItem,{css:xs,"data-test-subj":"tooltip-loading-content"},Object(o.jsx)(i.EuiSkeletonTitle,{size:"xxxs",css:ys}),Object(o.jsx)(i.EuiSkeletonText,{lines:3}),Object(o.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(o.jsx)(i.EuiSpacer,{size:"s"}));Cs.displayName="Skeleton";const hs=Cs;n.a.memo((e=>{const{dataTestSubj:t,children:s,loading:a=!1,className:l="",content:c}=e;return Object(o.jsx)(i.EuiToolTip,{"data-test-subj":t||"cases-components-tooltip",anchorClassName:l,content:a?Object(o.jsx)(hs,null):Object(o.jsx)(fs,c)},Object(o.jsx)(n.a.Fragment,null,s))})).displayName="Tooltip";var vs=s(36),Es=s(92);const ks=(e={})=>{var t,s;return{queryParams:null!==(t=Ss(e.queryParams))&&void 0!==t?t:{},filterOptions:null!==(s=Fs(e.filterOptions))&&void 0!==s?s:{}}},Ss=(e={})=>{const{perPage:t,sortOrder:s,...a}=e,n={...a};return t&&(n.perPage=Math.min(t,_t[_t.length-1])),s&&(n.sortOrder=Es.a.includes(s)?s:T.c.sortOrder),n},Fs=(e={})=>{const{status:t,severity:s,...a}=e,n={...a};return t&&(n.status=ws(t,rs.a)),s&&(n.severity=ws(s,vs.CaseSeverity)),n},ws=(e,t)=>e.filter((e=>Object.values(t).includes(e)));var Ts=s(15),Is=s(0);const As=Is.exact(Is.partial({search:Is.string,severity:Is.array(d.e),status:Is.array(d.f),tags:Is.array(Is.string),category:Is.array(Is.string),assignees:Is.array(Is.union([Is.string,Is.null])),customFields:Is.record(Is.string,Is.array(Is.string)),sortOrder:Is.union([Is.literal("asc"),Is.literal("desc")]),sortField:Is.union([Is.literal("closedAt"),Is.literal("createdAt"),Is.literal("updatedAt"),Is.literal("severity"),Is.literal("status"),Is.literal("title"),Is.literal("category")]),page:Is.number,perPage:Is.number})),Ds=(e,t)=>{const s=t.decode(e);return Object(Ts.isLeft)(s)?null:s.right},Ps={page:1,perPage:10,sortField:Es.b.createdAt,sortOrder:"desc",status:[],severity:[]},Ms=(e,t)=>{var s;const a=Array.from(e.values());return Array.isArray(t)?a:null!==(s=a[0])&&void 0!==s?s:""},zs=e=>"all"!==e,Ns=()=>{const e=Object(ls.useHistory)(),t=Object(ls.useLocation)(),{data:{customFields:s}}=Object(We.a)(),n=((e,t=[])=>{const s={},a={};for(const[t,n]of Object.entries(e))Object.hasOwn(T.a.queryParams,t)&&(s[t]=n),Object.hasOwn(T.a.filterOptions,t)&&(a[t]=n);const{page:n,perPage:i,...o}=s,{assignees:l,customFields:c,...r}=a,u={...o},d={...r};n&&(u.page=Bt(n,T.a.queryParams.page)),i&&(u.perPage=Bt(i,T.a.queryParams.perPage)),l&&(d.assignees=l.map((e=>e===ft.Qb?null:e)));const b=Object.entries(null!=c?c:{}).reduce(((e,[s,a])=>{const n=t.find((e=>e.key===s));return n?{...e,[s]:{type:n.type,options:a}}:e}),{}),j={queryParams:u,filterOptions:{...d,...!Object(R.isEmpty)(b)&&{customFields:b}}};return ks(j)})(function(e){const t=e.get(zt);if(!t)return(e=>{const t=Ds((e=>{const t=new Map;e.forEach(((e,s)=>{if(Nt.includes(s)){var a;const n=null!==(a=t.get(s))&&void 0!==a?a:new Set;e.split(",").filter(Boolean).forEach((e=>n.add(e))),t.set(s,n)}}));const s=new Map([...t].map((([e,t])=>[e,Ms(t,Ps[e])]))),a=Object.fromEntries(s.entries()),n={...a};if(a.page&&(n.page=Bt(Array.isArray(a.page)?a.page[0]:a.page,T.a.queryParams.page)),a.perPage&&(n.perPage=Bt(Array.isArray(a.perPage)?a.perPage[0]:a.perPage,T.a.queryParams.perPage)),a.status){const e=Array.isArray(a.status)?a.status:[a.status];n.status=e.filter(zs).filter(Boolean)}if(a.severity){const e=Array.isArray(a.severity)?a.severity:[a.severity];n.severity=e.filter(zs).filter(Boolean)}return n})(e),As);return t||{}})(e);const s=Object(cs.safeDecode)(t);return s&&Object(R.isPlainObject)(s)&&Ds(s,As)||{}}(new URLSearchParams(decodeURIComponent(t.search))),s);return[n,Object(a.useCallback)(((s,a="push")=>{const n=function(e,t=""){const s=Object(cs.encode)({...e}),a=(e=>{const t=new URLSearchParams(e);return Nt.forEach((e=>t.delete(e))),t})(new URLSearchParams(decodeURIComponent(t)));a.delete(zt);const n=`${zt}=${s}`;return a.size>0?`${n}&${a.toString()}`:n}((e=>{const t=Object(R.pick)(e.filterOptions,["search","severity","status","tags","assignees","category"]),s=Object.entries(e.filterOptions.customFields).reduce(((e,[t,s])=>Object(R.isEmpty)(s.options)?e:{...e,[t]:s.options}),{}),a={...e.queryParams,page:e.queryParams.page,perPage:e.queryParams.perPage,...t,assignees:t.assignees.map((e=>null===e?ft.Qb:e)),customFields:s};return Object.entries(a).reduce(((e,[t,s])=>Object(R.isEmpty)(s)&&!Object(R.isNumber)(s)?e:Object.assign(e,{[t]:s})),{})})(s),t.search);e[a]({...t,search:n})}),[e,t])]},Ls=e=>!!Object(R.isEmpty)(e)||!(!Object(R.isEmpty)(e.filterOptions)||!Object(R.isEmpty)(e.queryParams));var Bs=s(144);const Hs=({selectedColumns:e,casesColumnsConfig:t})=>{const s=e.reduce(((e,{field:s,isChecked:a})=>(s in t&&""!==t[s].field&&t[s].canDisplay&&e.push({field:t[s].field,name:t[s].name,isChecked:a}),e)),[]);return Object(R.difference)(Object.keys(t),e.map((({field:e})=>e))).forEach((e=>{t[e].field&&t[e].canDisplay&&s.push({field:t[e].field,name:t[e].name,isChecked:t[e].isCheckedDefault})})),s};var Us=s(59),Rs=s.n(Us),Ks={name:"1f3ehab",styles:"width:300px;height:40vh"};const $s=({selectedColumns:e,onSelectedColumnsChange:t})=>{const{euiTheme:s}=Object(i.useEuiTheme)(),[n,l]=Object(a.useState)(!1),c=Object(a.useCallback)((()=>l((e=>!e))),[]),r=Object(a.useCallback)((()=>l(!1)),[]),[u,d]=Object(a.useState)(""),b=0===u.length,j=Object(a.useCallback)((({isChecked:s,field:a})=>{const n=e.map((e=>e.field!==a&&a?e:{...e,isChecked:s}));t(n)}),[e,t]),p=Object(a.useCallback)((()=>j({isChecked:!0})),[j]),g=Object(a.useCallback)((()=>j({isChecked:!1})),[j]),O=Object(a.useMemo)((()=>e.filter((({name:e})=>-1!==e.toLowerCase().indexOf(u.toLowerCase())))),[e,u]);return Object(o.jsx)(i.EuiPopover,{isOpen:n,closePopover:r,panelPaddingSize:"s",anchorPosition:"leftUp",hasDragDrop:!0,zIndex:0,"data-test-subj":"column-selection-popover",button:Object(o.jsx)(i.EuiButtonEmpty,{"aria-label":m.k,className:"columns","data-test-subj":"column-selection-popover-button",iconType:"indexOpen",iconSide:"left",onClick:c,size:"xs"},m.k)},Object(o.jsx)(i.EuiPopoverTitle,null,Object(o.jsx)(i.EuiFieldSearch,{compressed:!0,placeholder:m.L,"aria-label":m.N,value:u,onChange:e=>d(e.currentTarget.value),"data-test-subj":"column-selection-popover-search"})),Object(o.jsx)(i.EuiDragDropContext,{onDragEnd:({source:s,destination:a})=>{if(s&&a){const n=Object(i.euiDragDropReorder)(e,s.index,a.index);t(n)}}},Object(o.jsx)(i.EuiFlexGroup,{css:Ks,className:"eui-yScrollWithShadows","data-test-subj":"column-selection-popover-drag-drop-context"},Object(o.jsx)(i.EuiFlexItem,null,Object(o.jsx)(i.EuiDroppable,{droppableId:"casesColumnDroppableArea",css:b?{paddingBottom:s.size.base}:{paddingTop:s.size.base}},O.map((({field:e,name:t,isChecked:a},n)=>Object(o.jsx)(i.EuiDraggable,{key:e,index:n,draggableId:e,isDragDisabled:!b,css:Object(o.css)({height:s.size.xl,paddingLeft:s.size.base},"",""),customDragHandle:!0,hasInteractiveChildren:!0},(s=>Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"m",justifyContent:"spaceBetween"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiSwitch,{label:Object(o.jsx)(i.EuiHighlight,{search:u,title:t},t),checked:a,"data-test-subj":`column-selection-switch-${e}`,onChange:t=>j({field:e,isChecked:t.target.checked}),compressed:!0,labelProps:{style:{textOverflow:"ellipsis",whiteSpace:"nowrap",width:"190px",overflow:"hidden"}}})),b&&Object(o.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"column-selection-popover-draggable-icon"},Object(o.jsx)(i.EuiPanel,Rs()({color:"transparent"},s.dragHandleProps,{"aria-label":m.q,grow:!1}),Object(o.jsx)(i.EuiIcon,{type:"grab",color:"subdued"})))))))))))),Object(o.jsx)(i.EuiPopoverFooter,null,Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"s",responsive:!1,justifyContent:"spaceBetween"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"xs",flush:"left",onClick:p,"data-test-subj":"column-selection-popover-show-all-button",disabled:!b},m.U)),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"xs",flush:"right",onClick:g,"data-test-subj":"column-selection-popover-hide-all-button",disabled:!b},m.u)))))};$s.displayName="ColumnsPopover";const Gs=n.a.memo((({isSelectorView:e,totalCases:t,selectedCases:s,deselectCases:l,pagination:c,selectedColumns:r,onSelectedColumnsChange:u,onClearFilters:d,showClearFiltersButton:b})=>{const{euiTheme:j}=Object(i.useEuiTheme)(),p=Object(z.a)(),{permissions:g}=Object(h.a)(),[O,f]=Object(a.useState)(!1),[x,y]=Object(a.useState)(!1),[C,k]=It("cases.utilityBar.hideMaxLimitWarning",!1),S=Object(a.useCallback)((()=>f(!O)),[O]),F=Object(a.useCallback)((()=>f(!1)),[]),w=Object(a.useCallback)((()=>y(!x)),[x]),T=Object(a.useCallback)((()=>{l(),p()}),[l,p]),{panels:I,modals:A,flyouts:D}=(({selectedCases:e,onAction:t,onActionSuccess:s})=>{const i=0===e.length,l=v({isDisabled:i,onAction:t,onActionSuccess:s}),c=M({isDisabled:i,onAction:t,onActionSuccess:s}),r=U({isDisabled:i,onAction:t,onActionSuccess:s}),u=X({isDisabled:i,onAction:t,onActionSuccess:s}),d=ve({isDisabled:!1,onAction:t,onActionSuccess:s}),b=l.canDelete,j=c.canUpdateStatus,p=Object(a.useMemo)((()=>{const t=[],s=[{id:0,items:t,title:m.a}];return j&&(t.push({name:m.Y,panel:1,disabled:i,"data-test-subj":"case-bulk-action-status",key:"case-bulk-action-status"}),t.push({name:m.R,panel:2,disabled:i,"data-test-subj":"case-bulk-action-severity",key:"case-bulk-action-severity"})),j&&b&&t.push({isSeparator:!0,key:"bulk-actions-separator","data-test-subj":"bulk-actions-separator"}),j&&(t.push(u.getAction(e)),t.push(d.getAction(e))),b&&t.push(l.getAction(e)),j&&(s.push({id:1,title:m.Y,items:c.getActions(e)}),s.push({id:2,title:m.R,items:r.getActions(e)})),s}),[b,j,l,i,e,r,c,u,d]);return{modals:Object(o.jsx)(n.a.Fragment,null,l.isModalVisible?Object(o.jsx)(E.a,{totalCasesToBeDeleted:e.length,onCancel:l.onCloseModal,onConfirm:l.onConfirmDeletion}):null),flyouts:Object(o.jsx)(n.a.Fragment,null,u.isFlyoutOpen?Object(o.jsx)(fe,{onClose:u.onFlyoutClosed,selectedCases:e,onSaveTags:u.onSaveTags}):null,d.isFlyoutOpen?Object(o.jsx)(Ge,{onClose:d.onFlyoutClosed,selectedCases:e,onSaveAssignees:d.onSaveAssignees}):null),panels:p}})({selectedCases:s,onAction:F,onActionSuccess:T}),P=(g.update||g.delete)&&s.length>0,N=null!=c&&c.pageSize&&t>c.pageSize?c.pageSize:t,L=c.pageSize&&t>=ft.Ab&&c.pageSize*(c.pageIndex+1)>=ft.Ab;return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",gutterSize:"s",css:Object(o.css)("border-bottom:",j.border.thin,";padding-top:",j.size.s,";padding-bottom:",j.size.s,";","")},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"s",alignItems:"center"},Object(o.jsx)(i.EuiFlexItem,{"data-test-subj":"case-table-case-count",grow:!1,css:Object(o.css)("border-right:",j.border.thin,";padding-right:",j.size.s,";","")},Object(o.jsx)(i.EuiText,{size:"xs",color:"subdued"},m.S(t,N))),Object(o.jsx)(i.EuiFlexItem,{"data-test-subj":"case-table-utility-bar-actions",grow:!1},Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},!e&&P&&Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiFlexItem,{"data-test-subj":"case-table-selected-case-count",grow:!1},Object(o.jsx)(i.EuiText,{size:"xs",color:"subdued"},m.T(s.length))),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiPopover,{isOpen:O,closePopover:F,panelPaddingSize:"none","data-test-subj":"case-table-bulk-actions-popover",button:Object(o.jsx)(i.EuiButtonEmpty,{onClick:S,size:"xs",iconSide:"right",iconType:"arrowDown",flush:"left","data-test-subj":"case-table-bulk-actions-link-icon"},m.e)},Object(o.jsx)(i.EuiContextMenu,{panels:I,initialPanelId:0,"data-test-subj":"case-table-bulk-actions-context-menu"})))),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{onClick:T,size:"xs",iconSide:"left",iconType:"refresh",flush:"left","data-test-subj":"all-cases-refresh-link-icon"},m.J)),b?Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{onClick:d,size:"xs",iconSide:"left",iconType:"cross",flush:"left","data-test-subj":"all-cases-clear-filters-link-icon"},m.i)):null)))),!e&&Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)($s,{selectedColumns:r,onSelectedColumnsChange:u}))),A,D,L&&!x&&!C&&Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiSpacer,{size:"m"}),Object(o.jsx)(i.EuiFlexGroup,null,Object(o.jsx)(i.EuiFlexItem,null,Object(o.jsx)(i.EuiCallOut,{title:Object(o.jsx)(i.EuiFlexGroup,{gutterSize:"m"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiText,{color:"default",size:"m",css:Object(o.css)("margin-top:",j.size.xs,";","")},m.v(ft.Ab))),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"s",color:"warning","data-test-subj":"dismiss-warning",onClick:w},m.p)),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiButtonEmpty,{size:"s",color:"warning","data-test-subj":"do-not-show-warning",onClick:()=>{k(!0)}},m.A))),color:"warning",size:"s","data-test-subj":"all-cases-maximum-limit-warning"}))),Object(o.jsx)(i.EuiSpacer,{size:"m"})))}));Gs.displayName="CasesTableUtilityBar";var qs={name:"eivff4",styles:"display:none"};const _s=n.a.memo((({hiddenStatuses:e=[],isSelectorView:t=!1,onRowClick:s})=>{var l,g;const{owner:O,permissions:f}=Object(h.a)(),x=Object(Bs.a)(Object(os.b)("delete")),y=(()=>{const e=Object(k.useIsMutating)(T.d.deleteCases),t=Object(k.useIsMutating)(T.d.updateCases);return Boolean(e)||Boolean(t)})(),{euiTheme:C}=Object(i.useEuiTheme)(),v=!!O.length,{queryParams:E,setQueryParams:S,filterOptions:F,setFilterOptions:w}=function(e=!1){const t=Object(a.useRef)(!1),s=Object(a.useRef)(!1),[n,i]=Object(a.useState)(T.a),[o,l]=Ns(),[r,u]=(()=>{const[e,t]=It(ft.hb.casesTableState,{queryParams:T.c,filterOptions:T.b}),s=ks(e);return[{queryParams:{...T.a.queryParams,...s.queryParams},filterOptions:{...T.a.filterOptions,...s.filterOptions}},t]})(),{isFetching:d}=Object(We.a)(),b=Object(a.useMemo)((()=>e?n:((e,t)=>Ls(e)?{queryParams:{...T.a.queryParams,...null==t?void 0:t.queryParams},filterOptions:{...T.a.filterOptions,...null==t?void 0:t.filterOptions}}:{queryParams:{...T.a.queryParams,...e.queryParams},filterOptions:{...T.a.filterOptions,...e.filterOptions}})(o,r)),[e,n,o,r]),j=Object(a.useCallback)((t=>{e?i(t):(c()(t,o)||l(t),c()(t,r)||u(t))}),[r,o,e,u,l]);return Object(a.useEffect)((()=>{!t.current&&Ls(o)&&r&&!e&&(l(r,"replace"),t.current=!0)}),[r,l,o,e]),s.current||Ls(o)||!r||c()(b,r)||d||e||(u(b),s.current=!0),{...b,setQueryParams:e=>{j({filterOptions:b.filterOptions,queryParams:{...b.queryParams,...e}})},setFilterOptions:e=>{j({filterOptions:{...b.filterOptions,...e},queryParams:b.queryParams})}}}(t),[I,A]=Object(a.useState)([]),{data:D=ns.a,isFetching:P}=Object(ns.b)({filterOptions:F,queryParams:E}),M=Object(a.useMemo)((()=>D.cases.reduce(((e,t)=>{if(!t)return e;for(const s of t.assignees)e.add(s.uid);return e}),new Set)),[D.cases]),{data:z}=Object(ke.a)({uids:Array.from(M)}),{data:L,isLoading:B}=Object(is.a)(),{data:H=[]}=Object(as.a)(),U=Object(a.useMemo)((()=>({sort:{field:E.sortField,direction:E.sortOrder}})),[E.sortField,E.sortOrder]),R=Object(a.useCallback)((()=>{A([])}),[A]),K=Object(a.useCallback)((({page:e,sort:t})=>{let s=E;var a,n;t&&(s={...s,sortField:(a=t.field,null!==(n=r.b[a])&&void 0!==n?n:r.b.title),sortOrder:t.direction}),e&&(s={...s,page:e.index+1,perPage:e.size}),S(s),R()}),[E,R,S]),$=Object(a.useCallback)((e=>{R(),w(e)}),[R,w]),{selectedColumns:G,setSelectedColumns:q}=function(){const e=Qe(),[t,s]=It(ft.hb.casesTableColumns,[]);return{selectedColumns:Hs({selectedColumns:t||[],casesColumnsConfig:e}),setSelectedColumns:s}}(),{columns:_,isLoadingColumns:V,rowHeader:W}=(({userProfiles:e,isSelectorView:t,connectors:s=[],onRowClick:n,disableActions:l=!1,selectedColumns:c})=>{const r=Qe(t),{actions:g}=(({disableActions:e})=>{const{permissions:t}=Object(h.a)();return{actions:t.update||t.delete?{name:m.a,align:"right",render:t=>Object(o.jsx)(_e,{theCase:t,key:t.id,disableActions:e}),width:"100px"}:null}})({disableActions:l}),{data:{customFields:O},isFetching:f}=Object(We.a)(),x=Object(a.useCallback)((async e=>{n&&n(e)}),[n]),y=Object(a.useMemo)((()=>({title:{field:r.title.field,name:r.title.name,sortable:!0,render:(e,s)=>null!=s.id&&null!=s.title?t?s.title:Object(o.jsx)(p.a,{detailName:s.id,title:s.title},Object(o.jsx)(Je.a,{text:s.title})):Object(b.a)(),width:t?"55%":"20%"},assignees:{field:r.assignees.field,name:r.assignees.name,render:t=>Object(o.jsx)(at,{assignees:t,userProfiles:e})},tags:{field:r.tags.field,name:r.tags.name,render:e=>{if(null!=e&&e.length>0){const t=Object(o.jsx)(i.EuiBadgeGroup,{"data-test-subj":"case-table-column-tags",css:it,gutterSize:"xs"},e.map(((e,t)=>Object(o.jsx)(i.EuiBadge,{css:lt,color:"hollow",key:`${e}-${t}`,"data-test-subj":`case-table-column-tags-${e}`},e)))),s=Object(o.jsx)(i.EuiBadgeGroup,{"data-test-subj":"case-table-column-tags"},e.map(((e,t)=>Object(o.jsx)(i.EuiBadge,{color:"hollow",key:`${e}-${t}`,"data-test-subj":`case-table-column-tags-${e}`},e))));return Object(o.jsx)(i.EuiToolTip,{"data-test-subj":"case-table-column-tags-tooltip",position:"left",content:s},t)}return Object(b.a)()},width:"12%"},totalAlerts:{field:r.totalAlerts.field,name:r.totalAlerts.name,align:i.RIGHT_ALIGNMENT,render:e=>null!=e?ot(`${e}`,"case-table-column-alertsCount"):Object(b.a)(),width:t?"55px":"80px"},totalComment:{field:r.totalComment.field,name:r.totalComment.name,align:i.RIGHT_ALIGNMENT,render:e=>null!=e?ot(`${e}`,"case-table-column-commentCount"):Object(b.a)(),width:"90px"},category:{field:r.category.field,name:r.category.name,sortable:!0,render:e=>null!=e?Object(o.jsx)("span",{"data-test-subj":`case-table-column-category-${e}`},e):Object(b.a)(),width:"120px"},closedAt:{field:r.closedAt.field,name:r.closedAt.name,sortable:!0,render:e=>null!=e?Object(o.jsx)("span",{"data-test-subj":"case-table-column-closedAt"},Object(o.jsx)(j.a,{value:e})):Object(b.a)()},createdAt:{field:r.createdAt.field,name:r.createdAt.name,sortable:!0,render:e=>null!=e?Object(o.jsx)("span",{"data-test-subj":"case-table-column-createdAt"},Object(o.jsx)(j.a,{value:e,stripMs:!0})):Object(b.a)()},updatedAt:{field:r.updatedAt.field,name:r.updatedAt.name,sortable:!0,render:e=>null!=e?Object(o.jsx)("span",{"data-test-subj":"case-table-column-updatedAt"},Object(o.jsx)(j.a,{value:e,stripMs:!0})):Object(b.a)()},externalIncident:{name:r.externalIncident.name,render:e=>null!=e.id?Object(o.jsx)(rt,{theCase:e,connectors:s}):Object(b.a)()},status:{field:r.status.field,name:r.status.name,sortable:!0,render:e=>null!=e?Object(o.jsx)(u.a,{status:e}):Object(b.a)(),width:"110px"},severity:{field:r.severity.field,name:r.severity.name,sortable:!0,render:e=>{if(null!=e){const t=N.a[null!=e?e:d.d.LOW];return Object(o.jsx)(i.EuiHealth,{"data-test-subj":`case-table-column-severity-${e}`,color:t.color},t.label)}return Object(b.a)()},width:"90px"},assignCaseAction:{align:i.RIGHT_ALIGNMENT,render:e=>null!=e.id?Object(o.jsx)(i.EuiButton,{"data-test-subj":`cases-table-row-select-${e.id}`,onClick:()=>{x(e)},size:"s"},m.Q):Object(b.a)()}})),[x,r,s,t,e]);O.forEach((({key:e,type:t,label:s})=>{if(t in nt.a){const a=nt.a[t]().getEuiTableColumn({label:s});y[e]={...a,render:t=>{const s=t.customFields.find((t=>t.key===e&&null!==t.value));return s?a.render(s):Object(b.a)()}}}}));const C=[];return c.forEach((({field:e,isChecked:s})=>{e in y&&(s||t)&&r[e].canDisplay&&C.push(y[e])})),t?C.push(y.assignCaseAction):g&&C.push(g),{columns:C,isLoadingColumns:f,rowHeader:r.title.field}})({filterStatus:null!==(l=F.status)&&void 0!==l?l:[],userProfiles:null!=z?z:new Map,isSelectorView:t,connectors:H,onRowClick:s,disableActions:I.length>0,selectedColumns:G}),Q=Object(a.useMemo)((()=>{var e;return{pageIndex:E.page-1,pageSize:E.perPage,totalItemCount:null!==(e=D.total)&&void 0!==e?e:0,pageSizeOptions:_t}}),[D,E]),Y=Object(a.useMemo)((()=>({onSelectionChange:A,selected:I,selectable:()=>!Object(os.c)(f)})),[f,I]),J=Object(a.useMemo)((()=>0===D.total),[D]),X=Object(a.useCallback)((e=>({"data-test-subj":`cases-table-row-${e.id}`})),[]),Z=Object(a.useCallback)((()=>{null==s||s(void 0,!0)}),[s]),ee=Object(a.useCallback)((()=>{w(T.a.filterOptions)}),[w]),te=!c()(T.a.filterOptions,F);return Object(o.jsx)(n.a.Fragment,null,Object(o.jsx)(i.EuiProgress,{size:"xs",color:"accent",className:"essentialAnimation",css:y||P||V?Object(o.css)("top:",C.size.xxs,";border-radius:",C.border.radius,";z-index:",C.levels.header,";",""):qs}),t?null:Object(o.jsx)(ss,null),Object(o.jsx)(qt,{countClosedCases:D.countClosedCases,countOpenCases:D.countOpenCases,countInProgressCases:D.countInProgressCases,onFilterChanged:$,availableSolutions:v?[]:x,hiddenStatuses:e,onCreateCasePressed:Z,isSelectorView:t,isLoading:B,currentUserProfile:L,filterOptions:F}),Object(o.jsx)(Gs,{pagination:Q,isSelectorView:t,totalCases:null!==(g=D.total)&&void 0!==g?g:0,selectedCases:I,deselectCases:R,selectedColumns:G,onSelectedColumnsChange:q,onClearFilters:ee,showClearFiltersButton:te}),Object(o.jsx)(Yt,{columns:_,rowHeader:W,data:D,goToCreateCase:s?Z:void 0,isCasesLoading:P,isLoadingColumns:V,isCommentUpdating:P,isDataEmpty:J,isSelectorView:t,onChange:K,pagination:Q,selection:Y,sorting:U,tableRowProps:X}))}));_s.displayName="AllCasesList"},265:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(4);t.default=function(e){var t=a.useRef();return a.useEffect((function(){t.current=e})),t.current}},266:function(e,t,s){"use strict";e.exports=e=>{if("number"!=typeof e)throw new TypeError("Expected a number");const t=e>0?Math.floor:Math.ceil;return{days:t(e/864e5),hours:t(e/36e5)%24,minutes:t(e/6e4)%60,seconds:t(e/1e3)%60,milliseconds:t(e)%1e3,microseconds:t(1e3*e)%1e3,nanoseconds:t(1e6*e)%1e3}}}}]);