/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[0],{143:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(4),r=s(57),i=s(194);const a=()=>{const{features:e}=Object(r.a)(),{isAtLeastPlatinum:t}=Object(i.a)(),s=t();return Object(n.useMemo)((()=>({isAlertsEnabled:e.alerts.enabled,isSyncAlertsEnabled:!!e.alerts.enabled&&e.alerts.sync,metricsFeatures:e.metrics,caseAssignmentAuthorized:s,pushToServiceAuthorized:s})),[e.alerts.enabled,e.alerts.sync,e.metrics,s])}},150:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(117),r=s(6),i=s(176);const a={[r.d.LOW]:{color:n.euiLightVars.euiColorVis0,label:i.c},[r.d.MEDIUM]:{color:n.euiLightVars.euiColorVis5,label:i.d},[r.d.HIGH]:{color:n.euiLightVars.euiColorVis7,label:i.b},[r.d.CRITICAL]:{color:n.euiLightVars.euiColorVis9,label:i.a}}},165:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(12),r=s(4);const i=()=>{const[e,t]=Object(r.useState)(!1),s=Object(r.useCallback)((()=>t(!1)),[]),i=Object(r.useCallback)((e=>{Object(n.isEmpty)(e)||t(!0)}),[]);return{isUserTyping:e,setIsUserTyping:t,onDebounce:s,onContentChange:i}}},167:function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return u}));var n=s(12),r=s(224),i=s(80);const a=e=>{var t,s,n,r,a,o,c,u;return null!==(t=null!==(s=null!==(n=null===(r=e.user)||void 0===r||null===(a=r.full_name)||void 0===a?void 0:a.toLowerCase())&&void 0!==n?n:null===(o=e.user)||void 0===o||null===(c=o.email)||void 0===c?void 0:c.toLowerCase())&&void 0!==s?s:null===(u=e.user)||void 0===u?void 0:u.username.toLowerCase())&&void 0!==t?t:i.l},o=(e,t)=>((e,t)=>{if(!t)return;if(!e)return t;if(!t.find((t=>t.uid===e.uid)))return t;const s=t.filter((t=>t.uid!==e.uid));return[e,...s]})(e,c(t)),c=e=>{if(e)return Object(n.sortBy)(e,a)},u=(e,t)=>{var s;const n=l(t),i=null!==(s=o(e,n))&&void 0!==s?s:[];return void 0!==t.find((e=>e===r.b))?[r.b,...i]:i},l=e=>e.filter((e=>e!==r.b))},168:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(44),r=s(179),i=s(8),a=s(195),o=s(76),c=s(57);function u(){const e=Object(i.j)(),{actions:t}=Object(i.c)(),{permissions:s}=Object(c.a)();return Object(n.useQuery)(o.e.connectorsList(),(async({signal:e})=>t.read&&s.connectors?Object(r.c)({signal:e}):[]),{staleTime:6e4,onError:t=>{"AbortError"!==t.name&&e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:a.a})}})}},176:function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o})),s.d(t,"e",(function(){return c}));var n=s(1);const r=n.i18n.translate("xpack.cases.severity.low",{defaultMessage:"Low"}),i=n.i18n.translate("xpack.cases.severity.medium",{defaultMessage:"Medium"}),a=n.i18n.translate("xpack.cases.severity.high",{defaultMessage:"High"}),o=n.i18n.translate("xpack.cases.severity.critical",{defaultMessage:"Critical"}),c=n.i18n.translate("xpack.cases.severity.title",{defaultMessage:"Severity"})},177:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(44),r=s(8),i=s(57),a=s(77),o=s(76),c=s(46);const u=()=>{const e=Object(r.j)(),{owner:t}=Object(i.a)();return Object(n.useQuery)(o.e.tags(),(({signal:e})=>Object(a.n)({owner:t,signal:e})),{onError:t=>{"AbortError"!==t.name&&e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:c.e})}})}},178:function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s(4),r=s(44),i=s(166),a=s.n(i),o=s(12),c=s(2),u=s(46),l=s(8),d=s(76),b=s(164);const j=({name:e,owners:t,size:s=c.O,onDebounce:i=o.noop})=>{const{http:j}=Object(l.g)().services,[g,f]=Object(n.useState)(e);a()((()=>{f(e),i()}),c.Xb,[e]);const O=Object(l.j)();return Object(r.useQuery)(d.e.suggestUsers({name:g,owners:t,size:s}),(({signal:e})=>Object(b.c)({http:j,name:g,owners:t,size:s,signal:e})),{retry:!1,keepPreviousData:!0,staleTime:6e4,onError:e=>{"AbortError"!==e.name&&O.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:u.e})}})}},179:function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return b})),s.d(t,"e",(function(){return j})),s.d(t,"d",(function(){return g})),s.d(t,"a",(function(){return f}));var n=s(39),r=s(121),i=s(81),a=s(11),o=s(2),c=s(8),u=s(16),l=s(18);const d=async({signal:e})=>await c.b.get().http.fetch(`${o.u}/_find`,{method:"GET",signal:e}),b=async({signal:e})=>{const t=await c.b.get().http.fetch(o.w,{method:"GET",signal:e});if(!Object(n.isEmpty)(t)){const e=Object(l.f)(t);if(Array.isArray(e)&&e.length>0)return e.map((e=>{const t=Object(u.f)(e);return O(t)}))}return null},j=async e=>{const t=await c.b.get().http.fetch(o.w,{method:"POST",body:JSON.stringify(e)}),s=Object(u.f)(Object(l.g)(t));return O(s)},g=async(e,t)=>{const s=await c.b.get().http.fetch(Object(a.c)(e),{method:"PATCH",body:JSON.stringify(t)}),n=Object(u.f)(Object(l.g)(s));return O(n)},f=async({signal:e})=>{const t=await c.b.get().http.fetch(Object(i.a)(),{method:"GET",signal:e,query:{feature_id:r.CasesConnectorFeatureId}});return Object(u.b)(t)},O=e=>{const{id:t,version:s,mappings:n,customFields:r,templates:i,closureType:a,connector:o,owner:c}=e;return{id:t,version:s,mappings:n,customFields:r,templates:i,closureType:a,connector:o,owner:c}}},180:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return r}));const n={closureType:"close-by-user",connector:{fields:null,id:"none",name:"none",type:s(36).ConnectorTypes.none},customFields:[],templates:[],mappings:[],version:"",id:"",owner:""},r=({configurations:e,owner:t})=>{var s;return e&&e.length&&t&&null!==(s=e.find((e=>e.owner===t)))&&void 0!==s?s:n}},188:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(4),r=s(44),i=s(76);const a=()=>{const e=Object(r.useQueryClient)();return Object(n.useCallback)((()=>{e.invalidateQueries(i.e.casesList()),e.invalidateQueries(i.e.tags()),e.invalidateQueries(i.e.categories()),e.invalidateQueries(i.e.userProfiles())}),[e])}},189:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(44),r=s(46),i=s(8),a=s(76),o=s(164);const c=e=>e.reduce(((e,t)=>(e.set(t.uid,t),e)),new Map),u=({uids:e})=>{const{security:t}=Object(i.g)().services,s=Object(i.j)();return Object(n.useQuery)(a.e.userProfilesList(e),(()=>Object(o.a)({security:t,uids:e})),{select:c,retry:!1,keepPreviousData:!0,staleTime:6e4,onError:e=>{"AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:r.e})},enabled:e.length>0})}},191:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s(4),r=s.n(n);const i=()=>null;i.displayName="EmptyMessage";const a=r.a.memo(i)},192:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(5),r=s(4),i=s.n(r),a=s(80),o=s(3);const c=()=>Object(o.jsx)(n.EuiFlexGroup,{alignItems:"center",gutterSize:"none",direction:"column",justifyContent:"spaceAround","data-test-subj":"case-user-profiles-assignees-popover-no-matches"},Object(o.jsx)(n.EuiFlexItem,{grow:!1},Object(o.jsx)(n.EuiIcon,{type:"userAvatar",size:"xl"}),Object(o.jsx)(n.EuiSpacer,{size:"xs"})),Object(o.jsx)(n.EuiFlexItem,{grow:!1},Object(o.jsx)(n.EuiTextAlign,{textAlign:"center"},Object(o.jsx)(n.EuiText,{size:"s",color:"default"},Object(o.jsx)("strong",null,a.m),Object(o.jsx)("br",null)),Object(o.jsx)(n.EuiText,{size:"s",color:"subdued"},a.g,Object(o.jsx)("br",null),Object(o.jsx)(n.EuiLink,{href:"https://www.elastic.co/guide/en/security/current/case-permissions.html",target:"_blank"},a.d)))));c.displayName="NoMatches";const u=i.a.memo(c)},194:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s(4),r=s(60),i=s.n(r),a=s(115),o=s(8);const c=()=>{var e;const{licensing:t}=Object(o.g)().services,s=i()(null!==(e=null==t?void 0:t.license$)&&void 0!==e?e:new a.Observable,null),r=Object(n.useCallback)((e=>!!s&&s.isAvailable&&s.isActive&&s.hasAtLeast(e)),[s]),c=Object(n.useCallback)((()=>r("platinum")),[r]),u=Object(n.useCallback)((()=>r("gold")),[r]),l=Object(n.useCallback)((()=>r("enterprise")),[r]);return{isAtLeast:r,isAtLeastPlatinum:c,isAtLeastGold:u,isAtLeastEnterprise:l,getLicense:()=>s}}},195:function(e,t,s){"use strict";s.d(t,"b",(function(){return i}));var n=s(1),r=s(46);s.d(t,"a",(function(){return r.e}));const i=n.i18n.translate("xpack.cases.configure.successSaveToast",{defaultMessage:"Settings successfully updated"})},197:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(44),r=s(45),i=s(57),a=s(77),o=s(76),c=s(46);const u=()=>{const{showErrorToast:e}=Object(r.a)(),{owner:t}=Object(i.a)();return Object(n.useQuery)(o.e.categories(),(({signal:e})=>Object(a.k)({owner:t,signal:e})),{onError:t=>{e(t,{title:c.a})},staleTime:6e4})}},221:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return u}));var n=s(5);const r=97,i=2;function a(e,t){if(t&&t.color)return t.color;const s=c(e).codePointAt(0)||r;return n.VISUALIZATION_COLORS[s%n.VISUALIZATION_COLORS.length]}function o(e,t){if(t&&t.initials)return t.initials;const s=c(e).split(" "),n=Math.min(i,s.length);return s.splice(n,s.length),s.map((e=>e.substring(0,1))).join("")}function c(e){return e.full_name||e.email||e.username}function u(e){const t=c(e);return e.email&&e.email!==t?`${t} (${e.email})`:t}},222:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(44),r=s(195),i=s(179),a=s(76),o=s(45),c=s(180);const u=({select:e})=>{const{showErrorToast:t}=Object(o.a)();return Object(n.useQuery)(a.e.configuration({}),(({signal:e})=>Object(i.b)({signal:e})),{select:e,onError:e=>{t(e,{title:r.a})},initialData:[c.b]})}},224:function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return v}));var n=s(5),r=s(356),i=s(12),a=s(4),o=s.n(a),c=s(165),u=s(178),l=s(144),d=s(57),b=s(191),j=s(192),g=s(167),f=s(78),O=s(2),m=s(3);const p=null,h=({selectedAssignees:e,currentUserProfile:t,isLoading:s,onSelectionChange:o})=>{const{owner:p}=Object(d.a)(),h=p.length>0,v=Object(l.a)(["read"]),[y,x]=Object(a.useState)(""),[E,w]=Object(a.useState)(!1),{isUserTyping:C,onContentChange:S,onDebounce:M}=Object(c.a)(),L=Object(a.useCallback)((()=>w((e=>!e))),[]),P=Object(a.useCallback)((e=>{const s=Object(g.c)(t,e);o({filterId:"assignees",selectedOptionKeys:s.map((e=>{var t;return null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:null}))})}),[t,o]),A=Object(a.useCallback)((e=>f.db(e)),[]),k=Object(a.useCallback)((e=>{x(e),S(e)}),[S]),{data:T,isLoading:I}=Object(u.a)({name:y,owners:h?p:v,onDebounce:M}),F=Object(a.useCallback)((e=>f.w(e,"assignees")),[]),z=Object(a.useMemo)((()=>{var e;const s=null!==(e=Object(g.a)(t,T))&&void 0!==e?e:[];return Object(i.isEmpty)(y)?[null,...s]:s}),[t,T,y]),G=e.map((e=>null===e?null:z.find((t=>(null==t?void 0:t.uid)===e)))).filter((e=>void 0!==e)),H=s||I;return Object(m.jsx)(n.EuiFilterGroup,null,Object(m.jsx)(r.a,{isOpen:E,closePopover:L,panelStyle:{width:400},button:Object(m.jsx)(n.EuiFilterButton,{"data-test-subj":"options-filter-popover-button-assignees",iconType:"arrowDown",onClick:L,isLoading:H,isSelected:E,hasActiveFilters:G.length>0,numActiveFilters:G.length,"aria-label":f.t},f.b),selectableProps:{onChange:P,onSearchChange:k,selectedStatusMessage:A,options:z,selectedOptions:G,isLoading:H||C,height:"full",searchPlaceholder:f.P,clearButtonLabel:f.i,emptyMessage:Object(m.jsx)(b.a,null),noMatchesMessage:C||H?Object(m.jsx)(b.a,null):Object(m.jsx)(j.a,null),limit:O.ib,limitReachedMessage:F,singleSelection:!1,nullOptionLabel:f.B}}))};h.displayName="AssigneesFilterPopover";const v=o.a.memo(h)},264:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s(59),r=s.n(n),i=s(5),a=(s(4),s(221)),o=s(3);const c=({user:e,avatar:t,...s})=>{const{euiTheme:n}=Object(i.useEuiTheme)();if(!e)return Object(o.jsx)(i.EuiAvatar,r()({name:"",color:n.colors.lightestShade,initials:"?"},s));const c=Object(a.d)(e);return null!=t&&t.imageUrl?Object(o.jsx)(i.EuiAvatar,r()({name:c,imageUrl:t.imageUrl,color:"plain"},s)):Object(o.jsx)(i.EuiAvatar,r()({name:c,initials:Object(a.c)(e,t),initialsLength:a.a,color:Object(a.b)(e,t)},s))}},356:function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s(59),r=s.n(n),i=s(4),a=s.n(i),o=s(5),c=s(1),u=s(113),l=s(221),d=s(264),b=s(3);const j="null",g=({selectedOptions:e,defaultOptions:t,options:s,onChange:n,onSearchChange:r,isLoading:g=!1,singleSelection:m=!1,limit:p,height:h,loadingMessage:v,noMatchesMessage:y,emptyMessage:x,errorMessage:E,searchPlaceholder:w,searchInputId:C,selectedStatusMessage:S,limitReachedMessage:M,nullOptionLabel:L,nullOptionProps:P,defaultOptionsLabel:A,clearButtonLabel:k,...T})=>{const[I,F]=Object(i.useState)([]),[z,G]=Object(i.useState)(""),H=e?e.length:0,N=!!p&&H>=p,Q=()=>{s||F((s=>{const n=[...s],r=e?e.filter((e=>!n.find((t=>O(t,e))))).map((e=>f(e,L,P))):[],i=t?t.filter((e=>!n.find((t=>O(t,e)))&&!r.find((t=>O(t,e))))).map((e=>f(e,L,P))):[];if(i.length){const e=(e=>{let t=e.findIndex((e=>e.isGroupLabel));return-1===t&&(t=e.push({label:null!=A?A:c.i18n.translate("userProfileComponents.userProfilesSelectable.defaultOptionsLabel",{defaultMessage:"Suggested"}),isGroupLabel:!0})-1),t})(n);n.splice(e,0,...r),n.push(...i)}else n.push(...r);return n}))};return Object(i.useEffect)((()=>{s?F(s.map((e=>f(e,L,P)))):(F([]),Q())}),[s]),Object(i.useEffect)(Q,[t,e]),Object(i.useEffect)((()=>{F((t=>t.map((t=>{if(e){var s;const n=void 0===e.find((e=>O(t,e)))?void 0:"on",r=!n&&N;return{...t,checked:n,disabled:r,prepend:t.data?Object(b.jsx)(d.a,{user:t.data.user,avatar:null===(s=t.data.data)||void 0===s?void 0:s.avatar,size:"s",isDisabled:r}):void 0}}return{...t,checked:void 0,disabled:void 0}}))))}),[s,t,e]),Object(b.jsx)(o.EuiSelectable,{"data-test-subj":T["data-test-subj"],options:I,onChange:t=>{if(!n)return;const s=t.filter((t=>!(t.isGroupLabel||"on"!==t.checked||e&&void 0!==e.find((e=>O(t,e)))))).map((e=>e.key===j?null:e.data));e&&!m&&e.forEach((e=>{const n=t.find((t=>O(t,e)));void 0!==n&&"on"!==n.checked||(n&&n.key===j?s.unshift(e):s.push(e))})),n(s)},style:{maxHeight:h},singleSelection:m,searchable:!0,searchProps:{placeholder:null!=w?w:c.i18n.translate("userProfileComponents.userProfilesSelectable.searchPlaceholder",{defaultMessage:"Search"}),value:z,onChange:e=>{G(e),null==r||r(e)},isLoading:g,isClearable:!g,id:C},isPreFiltered:!0,listProps:{onFocusBadge:!1,rowHeight:48},loadingMessage:v,noMatchesMessage:y,emptyMessage:x,errorMessage:E,renderOption:(e,t)=>{if(e.user){const s=Object(l.e)(e.user);return Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)("div",{className:"eui-textTruncate"},Object(b.jsx)(o.EuiHighlight,{search:t},s)),e.user.email&&e.user.email!==s?Object(b.jsx)(o.EuiText,{size:"xs",color:e.disabled?"disabled":"subdued",className:"eui-textTruncate"},t?Object(b.jsx)(o.EuiHighlight,{search:t},e.user.email):e.user.email):void 0)}return Object(b.jsx)(o.EuiHighlight,{search:t},e.label)}},((e,t)=>Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(o.EuiPanel,{hasShadow:!1,paddingSize:"s"},t,m?void 0:Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(o.EuiSpacer,{size:"s"}),Object(b.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1},Object(b.jsx)(o.EuiFlexItem,{grow:!1},Object(b.jsx)(o.EuiText,{size:"xs",color:"subdued"},S?S(H):Object(b.jsx)(u.FormattedMessage,{id:"userProfileComponents.userProfilesSelectable.selectedStatusMessage",defaultMessage:"{count, plural, one {# user selected} other {# users selected}}",values:{count:H}}))),Object(b.jsx)(o.EuiFlexItem,{grow:!1},H?Object(b.jsx)(o.EuiButtonEmpty,{size:"xs",flush:"right",onClick:()=>null==n?void 0:n([]),style:{height:"1rem"}},null!=k?k:Object(b.jsx)(u.FormattedMessage,{id:"userProfileComponents.userProfilesSelectable.clearButtonLabel",defaultMessage:"Remove all users"})):void 0)))),p&&H>=p?Object(b.jsx)(a.a.Fragment,null,Object(b.jsx)(o.EuiHorizontalRule,{margin:"none"}),Object(b.jsx)(o.EuiCallOut,{title:M?M(p):Object(b.jsx)(u.FormattedMessage,{id:"userProfileComponents.userProfilesSelectable.limitReachedMessage",defaultMessage:"You've selected the maximum of {count, plural, one {# user} other {# users}}",values:{count:p}}),color:"warning",size:"s"})):void 0,Object(b.jsx)(o.EuiHorizontalRule,{margin:"none"}),e)))};function f(e,t,s){return e?{key:e.uid,label:Object(l.d)(e.user),data:e,"data-test-subj":`userProfileSelectableOption-${e.user.username}`}:{key:j,label:null!=t?t:c.i18n.translate("userProfileComponents.userProfilesSelectable.nullOptionLabel",{defaultMessage:"No users"}),"data-test-subj":"userProfileSelectableOption-null",...s}}function O(e,t){return e.key===(t?t.uid:j)}const m=({title:e,selectableProps:t,...s})=>{const n=Object(o.useGeneratedHtmlId)({prefix:"searchInput",conditionalId:t.searchInputId});return Object(b.jsx)(o.EuiPopover,r()({panelPaddingSize:"none",initialFocus:`#${n}`},s),Object(b.jsx)(o.EuiContextMenuPanel,{title:e},Object(b.jsx)(g,r()({},t,{searchInputId:n}))))}}}]);