/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[9],{133:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={jira:["jira"],resilient:["resilient"],servicenow:["servicenow"],jiraGetFieldsByIssueType:(e,t)=>[...s.jira,e,"getFields",t],jiraGetIssueTypes:e=>[...s.jira,e,"getIssueType"],jiraGetIssues:(e,t)=>[...s.jira,e,"getIssues",t],jiraGetIssue:(e,t)=>[...s.jira,e,"getIssue",t],resilientGetIncidentTypes:e=>[...s.resilient,e,"getIncidentTypes"],resilientGetSeverity:e=>[...s.resilient,e,"getSeverity"],servicenowGetChoices:(e,t)=>[...s.servicenow,e,"getChoices",t]}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=({connector_id:e,service_message:t,...n})=>({...n,actionId:e,...t&&{serviceMessage:t}})},138:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(4),i=n(5),c=n(8),r=n(58),o=n(3);const l=({connectorType:e,title:t,listItems:n,isLoading:s})=>{const{triggersActionsUi:l}=Object(c.g)().services;return Object(o.jsx)(i.EuiSkeletonText,{lines:3,size:"m",isLoading:s,"data-test-subj":"connector-card-loading"},Object(o.jsx)(i.EuiFlexGroup,{direction:"column",alignItems:"stretch","data-test-subj":"connector-card"},Object(o.jsx)(i.EuiFlexGroup,{direction:"row",justifyContent:"spaceBetween",alignItems:"center"},Object(o.jsx)(i.EuiFlexItem,null,Object(o.jsx)(i.EuiText,{size:"s","data-test-subj":"connector-card-title"},Object(o.jsx)("strong",null,t))),Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiIcon,{size:"xl",type:Object(r.f)(l,e)}))),Object(o.jsx)(i.EuiFlexItem,{"data-test-subj":"connector-card-details"},n.length>0&&n.map(((e,t)=>Object(o.jsx)(i.EuiText,{size:"xs","data-test-subj":"card-list-item",key:`${e.title}-${t}`},Object(o.jsx)("strong",null,`${e.title}: `),`${e.description}`))))))};l.displayName="ConnectorCardDisplay";const a=Object(s.memo)(l)},141:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(4),i=n.n(s),c=n(5),r=n(1),o=n(3);const l=r.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),a=r.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),u=({type:e="warning"})=>Object(o.jsx)(c.EuiCallOut,{title:l,color:e,iconType:"warning","data-test-subj":"deprecated-connector-warning-callout"},a);u.displayName="DeprecatedCallout";const d=i.a.memo(u)},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=e=>e.map((e=>({value:e.value,text:e.label})))},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(44),i=n(45),c=n(133),r=n(81),o=n(135),l=n(140);const a=({http:e,connector:t,fields:n})=>{var a;const{showErrorToast:u}=Object(i.a)();return Object(s.useQuery)(c.a.servicenowGetChoices(null!==(a=null==t?void 0:t.id)&&void 0!==a?a:"",n),(({signal:s})=>{var i;return async function({http:e,connectorId:t,fields:n,signal:s}){const i=await e.post(Object(r.b)(t),{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:n}}}),signal:s});return Object(o.a)(i)}({http:e,signal:s,connectorId:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:"",fields:n})}),{enabled:Boolean(t),staleTime:6e4,onSuccess:e=>{var t;e.status&&"error"===e.status&&u(new Error(l.d),{title:l.d,toastMessage:`${null!==(t=e.serviceMessage)&&void 0!==t?t:e.message}`})},onError:e=>{u(e,{title:l.d})}})}},346:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return p}));var s=n(4),i=n.n(s),c=n(5),r=n(140),o=n(6),l=n(8),a=n(138),u=n(153),d=n(152),j=n(141),g=n(3);const v=["urgency","severity","impact","category","subcategory"],b={urgency:[],severity:[],impact:[],category:[],subcategory:[]},p=({connector:e,fields:t})=>{var n;const{severity:p=null,urgency:y=null,impact:m=null,category:x=null,subcategory:O=null}=null!=t?t:{},{http:f}=Object(l.g)().services,w=e.isDeprecated,{isLoading:I,isFetching:h,data:E}=Object(u.a)({http:f,connector:e,fields:v}),T=I||h,F=(null!==(n=null==E?void 0:E.data)&&void 0!==n?n:[]).reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),b),M=Object(s.useMemo)((()=>Object(d.a)(F.category)),[F.category]),G=Object(s.useMemo)((()=>Object(d.a)(F.urgency)),[F.urgency]),C=Object(s.useMemo)((()=>Object(d.a)(F.severity)),[F.severity]),$=Object(s.useMemo)((()=>Object(d.a)(F.impact)),[F.impact]),N=Object(s.useMemo)((()=>Object(d.a)(F.subcategory.filter((e=>e.dependent_value===x)))),[F.subcategory,x]),S=Object(s.useMemo)((()=>{var e,t,n,s,i,c,o,l,a,u;return[...null!=y&&y.length>0?[{title:r.m,description:null!==(e=null===(t=G.find((e=>`${e.value}`===y)))||void 0===t?void 0:t.text)&&void 0!==e?e:""}]:[],...null!=p&&p.length>0?[{title:r.j,description:null!==(n=null===(s=C.find((e=>`${e.value}`===p)))||void 0===s?void 0:s.text)&&void 0!==n?n:""}]:[],...null!=m&&m.length>0?[{title:r.f,description:null!==(i=null===(c=$.find((e=>`${e.value}`===m)))||void 0===c?void 0:c.text)&&void 0!==i?i:""}]:[],...null!=x&&x.length>0?[{title:r.c,description:null!==(o=null===(l=M.find((e=>`${e.value}`===x)))||void 0===l?void 0:l.text)&&void 0!==o?o:""}]:[],...null!=O&&O.length>0?[{title:r.l,description:null!==(a=null===(u=N.find((e=>`${e.value}`===O)))||void 0===u?void 0:u.text)&&void 0!==a?a:""}]:[]]}),[x,M,m,$,p,C,O,N,y,G]);return Object(g.jsx)(i.a.Fragment,null,w&&Object(g.jsx)(c.EuiFlexGroup,null,Object(g.jsx)(c.EuiFlexItem,null,Object(g.jsx)(j.a,null))),Object(g.jsx)(c.EuiFlexGroup,null,Object(g.jsx)(c.EuiFlexItem,null,Object(g.jsx)(a.a,{connectorType:o.k.serviceNowITSM,title:e.name,listItems:S,isLoading:T}))))};p.displayName="ServiceNowITSMFieldsPreview"}}]);