/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[14],{133:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={jira:["jira"],resilient:["resilient"],servicenow:["servicenow"],jiraGetFieldsByIssueType:(e,t)=>[...n.jira,e,"getFields",t],jiraGetIssueTypes:e=>[...n.jira,e,"getIssueType"],jiraGetIssues:(e,t)=>[...n.jira,e,"getIssues",t],jiraGetIssue:(e,t)=>[...n.jira,e,"getIssue",t],resilientGetIncidentTypes:e=>[...n.resilient,e,"getIncidentTypes"],resilientGetSeverity:e=>[...n.resilient,e,"getSeverity"],servicenowGetChoices:(e,t)=>[...n.servicenow,e,"getChoices",t]}},135:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({connector_id:e,service_message:t,...s})=>({...s,actionId:e,...t&&{serviceMessage:t}})},141:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(4),i=s.n(n),o=s(5),l=s(1),c=s(3);const a=l.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),r=l.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),u=({type:e="warning"})=>Object(c.jsx)(o.EuiCallOut,{title:a,color:e,iconType:"warning","data-test-subj":"deprecated-connector-warning-callout"},r);u.displayName="DeprecatedCallout";const d=i.a.memo(u)},152:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.map((e=>({value:e.value,text:e.label})))},153:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(44),i=s(45),o=s(133),l=s(81),c=s(135),a=s(140);const r=({http:e,connector:t,fields:s})=>{var r;const{showErrorToast:u}=Object(i.a)();return Object(n.useQuery)(o.a.servicenowGetChoices(null!==(r=null==t?void 0:t.id)&&void 0!==r?r:"",s),(({signal:n})=>{var i;return async function({http:e,connectorId:t,fields:s,signal:n}){const i=await e.post(Object(l.b)(t),{body:JSON.stringify({params:{subAction:"getChoices",subActionParams:{fields:s}}}),signal:n});return Object(c.a)(i)}({http:e,signal:n,connectorId:null!==(i=null==t?void 0:t.id)&&void 0!==i?i:"",fields:s})}),{enabled:Boolean(t),staleTime:6e4,onSuccess:e=>{var t;e.status&&"error"===e.status&&u(new Error(a.d),{title:a.d,toastMessage:`${null!==(t=e.serviceMessage)&&void 0!==t?t:e.message}`})},onError:e=>{u(e,{title:a.d})}})}},347:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return x}));var n=s(4),i=s.n(n),o=s(5),l=s(21),c=s(24),a=s(8),r=s(153),u=s(152),d=s(140),j=s(141),p=s(3);const b=["category","subcategory","priority"],g={category:[],subcategory:[],priority:[]},x=({connector:e})=>{var t;const s=Object(l.useFormContext)(),[{fields:x}]=Object(l.useFormData)(),{category:m=null}=null!=x?x:{},{http:f}=Object(a.g)().services,F=e.isDeprecated,{isLoading:O,isFetching:h,data:y}=Object(r.a)({http:f,connector:e,fields:b}),v=O||h,I=(null!==(t=null==y?void 0:y.data)&&void 0!==t?t:[]).reduce(((e,t)=>({...e,[t.element]:[...null!=e[t.element]?e[t.element]:[],t]})),g),w=Object(n.useMemo)((()=>Object(u.a)(I.category)),[I.category]),E=Object(n.useMemo)((()=>Object(u.a)(I.priority)),[I.priority]),C=Object(n.useMemo)((()=>Object(u.a)(I.subcategory.filter((e=>e.dependent_value===m)))),[I.subcategory,m]);return Object(p.jsx)(i.a.Fragment,null,F&&Object(p.jsx)(o.EuiFlexGroup,null,Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(j.a,null))),Object(p.jsx)(o.EuiFlexGroup,{"data-test-subj":"connector-fields-sn-sir",direction:"column",gutterSize:"s"},Object(p.jsx)(o.EuiFlexGroup,null,Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(o.EuiFormRow,{fullWidth:!0,label:d.a},Object(p.jsx)(i.a.Fragment,null,Object(p.jsx)(o.EuiFlexGroup,null,Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.destIp",config:{defaultValue:!0},component:c.CheckBoxField,componentProps:{euiFieldProps:{"data-test-subj":"destIpCheckbox",label:d.e,compressed:!0}}})),Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.sourceIp",config:{defaultValue:!0},component:c.CheckBoxField,componentProps:{euiFieldProps:{"data-test-subj":"sourceIpCheckbox",label:d.k,compressed:!0}}}))),Object(p.jsx)(o.EuiFlexGroup,null,Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.malwareUrl",config:{defaultValue:!0},component:c.CheckBoxField,componentProps:{euiFieldProps:{"data-test-subj":"malwareUrlCheckbox",label:d.h,compressed:!0}}})),Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.malwareHash",config:{defaultValue:!0},component:c.CheckBoxField,componentProps:{euiFieldProps:{"data-test-subj":"malwareHashCheckbox",label:d.g,compressed:!0}}}))))))),Object(p.jsx)(o.EuiFlexGroup,null,Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.priority",component:c.SelectField,config:{label:d.i},componentProps:{euiFieldProps:{"data-test-subj":"prioritySelect",options:E,hasNoInitialSelection:!0,fullWidth:!0,disabled:v,isLoading:v}}}))),Object(p.jsx)(o.EuiFlexGroup,null,Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.category",component:c.SelectField,config:{label:d.c},onChange:()=>{s.setFieldValue("fields.subcategory",null)},componentProps:{euiFieldProps:{"data-test-subj":"categorySelect",options:w,hasNoInitialSelection:!0,fullWidth:!0,disabled:v,isLoading:v}}})),Object(p.jsx)(o.EuiFlexItem,null,Object(p.jsx)(l.UseField,{path:"fields.subcategory",component:c.SelectField,config:{label:d.l},componentProps:{euiFieldProps:{"data-test-subj":"subcategorySelect",options:C,hasNoInitialSelection:!0,fullWidth:!0,disabled:v,isLoading:v}}})))))};x.displayName="ServiceNowSIRFieldsComponent"}}]);