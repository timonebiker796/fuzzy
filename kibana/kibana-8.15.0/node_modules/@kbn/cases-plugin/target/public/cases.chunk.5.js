/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[5],Array(82).concat([function(e,t,s){"use strict";var a=s(120);s.d(t,"a",(function(){return a.a}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"P",(function(){return o})),s.d(t,"r",(function(){return r})),s.d(t,"G",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"H",(function(){return u})),s.d(t,"U",(function(){return d})),s.d(t,"T",(function(){return b})),s.d(t,"eb",(function(){return m})),s.d(t,"E",(function(){return j})),s.d(t,"L",(function(){return p})),s.d(t,"I",(function(){return g})),s.d(t,"h",(function(){return h})),s.d(t,"u",(function(){return f})),s.d(t,"f",(function(){return O})),s.d(t,"cb",(function(){return x})),s.d(t,"Z",(function(){return v})),s.d(t,"e",(function(){return y})),s.d(t,"fb",(function(){return E})),s.d(t,"V",(function(){return C})),s.d(t,"s",(function(){return A})),s.d(t,"j",(function(){return S})),s.d(t,"i",(function(){return w})),s.d(t,"S",(function(){return I})),s.d(t,"ab",(function(){return k})),s.d(t,"R",(function(){return T})),s.d(t,"t",(function(){return F})),s.d(t,"hb",(function(){return R}));var a=s(1),n=s(134);s.d(t,"a",(function(){return n.b})),s.d(t,"b",(function(){return n.c})),s.d(t,"g",(function(){return n.f})),s.d(t,"k",(function(){return n.k})),s.d(t,"l",(function(){return n.n})),s.d(t,"m",(function(){return n.o})),s.d(t,"n",(function(){return n.p})),s.d(t,"o",(function(){return n.q})),s.d(t,"p",(function(){return n.r})),s.d(t,"q",(function(){return n.s})),s.d(t,"v",(function(){return n.x})),s.d(t,"w",(function(){return n.y})),s.d(t,"x",(function(){return n.z})),s.d(t,"y",(function(){return n.A})),s.d(t,"z",(function(){return n.E})),s.d(t,"A",(function(){return n.H})),s.d(t,"B",(function(){return n.I})),s.d(t,"C",(function(){return n.L})),s.d(t,"D",(function(){return n.M})),s.d(t,"F",(function(){return n.O})),s.d(t,"J",(function(){return n.S})),s.d(t,"K",(function(){return n.T})),s.d(t,"M",(function(){return n.U})),s.d(t,"N",(function(){return n.V})),s.d(t,"O",(function(){return n.X})),s.d(t,"Q",(function(){return n.bb})),s.d(t,"W",(function(){return n.eb})),s.d(t,"X",(function(){return n.hb})),s.d(t,"Y",(function(){return n.ib})),s.d(t,"bb",(function(){return n.jb})),s.d(t,"db",(function(){return n.lb})),s.d(t,"gb",(function(){return n.mb}));const i=e=>a.i18n.translate("xpack.cases.caseView.alreadyPushedToExternalService",{values:{externalService:e},defaultMessage:"Already pushed to { externalService } incident"}),o=e=>a.i18n.translate("xpack.cases.caseView.requiredUpdateToExternalService",{values:{externalService:e},defaultMessage:"Requires update to { externalService } incident"}),r=a.i18n.translate("xpack.cases.caseView.copyCommentLinkAria",{defaultMessage:"Copy reference link"}),c=a.i18n.translate("xpack.cases.caseView.moveToCommentAria",{defaultMessage:"Highlight the referenced comment"}),l=a.i18n.translate("xpack.cases.caseView.alertCommentLabelTitle",{defaultMessage:"added an alert from"}),u=e=>a.i18n.translate("xpack.cases.caseView.generatedAlertCommentLabelTitle",{values:{totalAlerts:e},defaultMessage:"added {totalAlerts} alerts from"}),d=a.i18n.translate("xpack.cases.caseView.showAlertTooltip",{defaultMessage:"Show alert details"}),b=a.i18n.translate("xpack.cases.caseView.showAlertTableTooltip",{defaultMessage:"Show alerts"}),m=a.i18n.translate("xpack.cases.caseView.unknownRule.label",{defaultMessage:"Unknown rule"}),j=a.i18n.translate("xpack.cases.caseView.isolatedHost",{defaultMessage:"submitted isolate request on host"}),p=a.i18n.translate("xpack.cases.caseView.releasedHost",{defaultMessage:"submitted release request on host"}),g=e=>a.i18n.translate("xpack.cases.caseView.otherEndpoints",{values:{endpoints:e},defaultMessage:" and {endpoints} {endpoints, plural, =1 {other} other {others}}"}),h=a.i18n.translate("xpack.cases.caseView.delete.cancel",{defaultMessage:"Cancel"}),f=a.i18n.translate("xpack.cases.caseView.delete.confirm",{defaultMessage:"Delete"}),O=a.i18n.translate("xpack.cases.caseView.assigned",{defaultMessage:"assigned"}),x=a.i18n.translate("xpack.cases.caseView.unAssigned",{defaultMessage:"unassigned"}),v=a.i18n.translate("xpack.cases.caseView.assignee.themselves",{defaultMessage:"themselves"}),y=a.i18n.translate("xpack.cases.caseView.assignee.and",{defaultMessage:"and"}),E=a.i18n.translate("xpack.cases.caseView.description.unsavedDraftDescription",{defaultMessage:"You have unsaved edits for the description"}),C=a.i18n.translate("xpack.cases.caseView.userActions.showMore",{defaultMessage:"Show more"}),A=a.i18n.translate("xpack.cases.caseView.userActions.createCase",{defaultMessage:"Created case"}),S=a.i18n.translate("xpack.cases.caseView.userActions.caseInitiated",{defaultMessage:"Case initiated"}),w=a.i18n.translate("xpack.cases.caseView.userActions.caseDeleted",{defaultMessage:"Case deleted"}),I=a.i18n.translate("xpack.cases.caseView.userActions.severity",{defaultMessage:"Severity"}),k=a.i18n.translate("xpack.cases.caseView.userActions..title",{defaultMessage:"Title"}),T=a.i18n.translate("xpack.cases.caseView.userActions..settings",{defaultMessage:"Settings"}),F=a.i18n.translate("xpack.cases.caseView.userActions.customFields",{defaultMessage:"Custom Fields"}),R=e=>a.i18n.translate("xpack.cases.caseView.userActions.edited",{values:{type:e},defaultMessage:'Edited "{type}"'})},,,,,,,,,,,,,,,,function(e,t,s){e.exports=s(79)(1226)},,,,,,,,,function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(4);const n=({onDelete:e})=>{const[t,s]=Object(a.useState)(!1);return{showDeletionModal:t,onModalOpen:Object(a.useCallback)((()=>{s(!0)}),[]),onConfirm:Object(a.useCallback)((()=>{s(!1),e()}),[e]),onCancel:Object(a.useCallback)((()=>{s(!1)}),[])}}},function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(4),n=s.n(a),i=s(5),o=s(159),r=s(3);const c=({title:e,confirmButtonText:t,onConfirm:s,onCancel:a})=>Object(r.jsx)(i.EuiConfirmModal,{title:e,onCancel:a,onConfirm:s,cancelButtonText:o.a,confirmButtonText:t,buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"property-actions-confirm-modal"});c.displayName="DeleteAttachmentConfirmationModal";const l=n.a.memo(c)},function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"i",(function(){return o})),s.d(t,"h",(function(){return r}));var a=s(1),n=s(132);s.d(t,"a",(function(){return n.h})),s.d(t,"b",(function(){return n.u})),s.d(t,"d",(function(){return n.v})),s.d(t,"e",(function(){return n.w})),s.d(t,"f",(function(){return n.A})),s.d(t,"g",(function(){return n.K}));const i=a.i18n.translate("xpack.cases.userActions.deleteAttachment",{defaultMessage:"Delete attachment"}),o=e=>a.i18n.translate("xpack.cases.caseView.alerts.removeAlerts",{values:{totalAlerts:e},defaultMessage:"Remove {totalAlerts, plural, =1 {alert} other {alerts}}"}),r=a.i18n.translate("xpack.cases.caseView.alerts.remove",{defaultMessage:"Remove"})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(4),n=s.n(a),i=s(5),o=s(31),r=s(72),c=s(3);const l=({file:e,showPreview:t})=>{let s=e.name;return void 0!==e.extension&&(s+=`.${e.extension}`),Object(r.a)(e)?Object(c.jsx)(i.EuiLink,{onClick:t,"data-test-subj":"cases-files-name-link"},s):Object(c.jsx)("span",{title:o.r,"data-test-subj":"cases-files-name-text"},s)};l.displayName="FileNameLink";const u=n.a.memo(l)},function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(4),n=s(3),i=s(5),o=s(130),r=s(35),c=s(57);const l={name:"v9y85p",styles:"padding-block-end:0vh!important;img{max-height:85vh;max-width:85vw;object-fit:contain;}"},u=({closePreview:e,selectedFile:t})=>{const{client:s}=Object(o.b)(),{owner:u}=Object(c.a)();return Object(a.useEffect)((()=>{const t=t=>{t.key!==i.keys.ESCAPE&&"Escape"!==t.code||e()};return window.addEventListener("keyup",t),()=>{window.removeEventListener("keyup",t)}}),[e]),Object(n.jsx)(i.EuiOverlayMask,null,Object(n.jsx)("div",{css:l},Object(n.jsx)(i.EuiFocusTrap,{onClickOutside:e},Object(n.jsx)(i.EuiImage,{alt:t.name,size:"original",src:s.getDownloadHref({id:t.id,fileKind:Object(r.a)(u[0])}),"data-test-subj":"cases-files-image-preview"}))))};u.displayName="FilePreview"},function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(4);const n=()=>{const[e,t]=Object(a.useState)(!1);return{isPreviewVisible:e,showPreview:()=>t(!0),closePreview:()=>t(!1)}}},function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var a=s(44),n=s(76),i=s(137),o=s(45),r=s(77),c=s(46);const l=()=>{const{showErrorToast:e,showSuccessToast:t}=Object(o.a)(),s=Object(i.a)();return Object(a.useMutation)((({caseId:e,fileId:t})=>Object(r.d)({caseId:e,fileIds:[t]})),{mutationKey:n.d.deleteFileAttachment,onSuccess:()=>{t(c.g),s()},onError:t=>{e(t,{title:c.d})}})}},,,,function(e,t,s){e.exports=s(79)(469)},function(e,t,s){"use strict";var a=s(321);e.exports=function(e,t){return t||0===e.length||c.test(e)||a(e,n)!==a(e,i)?o+e+r:e};var n="(",i=")",o="<",r=">",c=/\s/},function(e,t,s){"use strict";e.exports=function(e){var t=-1===e.indexOf(a)?a:n;return t+e+t};var a='"',n="'"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";e.exports=function(e){return e}},function(e,t,s){"use strict";e.exports={gfm:!0,commonmark:!1,pedantic:!1,entities:"false",setext:!1,closeAtx:!1,tableCellPadding:!0,tablePipeAlign:!0,stringLength:function(e){return e.length},incrementListMarker:!0,tightDefinitions:!1,fences:!1,fence:"`",bullet:"-",listItemIndent:"tab",rule:"*",ruleSpaces:!0,ruleRepetition:3,strong:"*",emphasis:"_"}},function(e,t,s){e.exports=s(79)(546)},function(e,t,s){"use strict";var a=s(296);e.exports=function(e){var t;return e.charAt(0)!==n?0:(t=e.split(n,2).join(n)).length-a(t).length};var n="&"},function(e,t,s){"use strict";var a=s(148);e.exports=function(e,t){for(var s=e.split(n),r=s.length,c=a(i,t*o);r--;)0!==s[r].length&&(s[r]=c+s[r]);return s.join(n)};var n="\n",i=" ",o=4},function(e,t,s){"use strict";e.exports=function(e,t){var s,a,n=0,i=0;if("string"!=typeof t||1!==t.length)throw new Error("Expected character");for(s=a=(e=String(e)).indexOf(t);-1!==a;)n++,a===s?n>i&&(i=n):n=1,s=a+1,a=e.indexOf(t,s);return i}},function(e,t,s){"use strict";e.exports=function(e){var t=e.referenceType;return t===i?"":a+(t===o?"":e.label||e.identifier)+n};var a="[",n="]",i="shortcut",o="collapsed"},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){(function(process,global){var __WEBPACK_AMD_DEFINE_RESULT__;
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(){"use strict";var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD=__webpack_require__(276),ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];!root.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(s){return new Sha256(t,!0).update(s)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(e){return t.create().update(e)};for(var s=0;s<OUTPUT_TYPES.length;++s){var a=OUTPUT_TYPES[s];t[a]=createOutputMethod(a,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if("string"==typeof e)return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(null==e)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(s,a){return new HmacSha256(s,t,!0).update(a)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(t){return new HmacSha256(t,e)},t.update=function(e,s){return t.create(e).update(s)};for(var s=0;s<OUTPUT_TYPES.length;++s){var a=OUTPUT_TYPES[s];t[a]=createHmacOutputMethod(a,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function HmacSha256(e,t,s){var a,n=typeof e;if("string"===n){var i,o=[],r=e.length,c=0;for(a=0;a<r;++a)(i=e.charCodeAt(a))<128?o[c++]=i:i<2048?(o[c++]=192|i>>6,o[c++]=128|63&i):i<55296||i>=57344?(o[c++]=224|i>>12,o[c++]=128|i>>6&63,o[c++]=128|63&i):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++a)),o[c++]=240|i>>18,o[c++]=128|i>>12&63,o[c++]=128|i>>6&63,o[c++]=128|63&i);e=o}else{if("object"!==n)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR)}e.length>64&&(e=new Sha256(t,!0).update(e).array());var l=[],u=[];for(a=0;a<64;++a){var d=e[a]||0;l[a]=92^d,u[a]=54^d}Sha256.call(this,t,s),this.update(u),this.oKeyPad=l,this.inner=!0,this.sharedMemory=s}Sha256.prototype.update=function(e){if(!this.finalized){var t,s=typeof e;if("string"!==s){if("object"!==s)throw new Error(ERROR);if(null===e)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw new Error(ERROR);t=!0}for(var a,n,i=0,o=e.length,r=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),t)for(n=this.start;i<o&&n<64;++i)r[n>>2]|=e[i]<<SHIFT[3&n++];else for(n=this.start;i<o&&n<64;++i)(a=e.charCodeAt(i))<128?r[n>>2]|=a<<SHIFT[3&n++]:a<2048?(r[n>>2]|=(192|a>>6)<<SHIFT[3&n++],r[n>>2]|=(128|63&a)<<SHIFT[3&n++]):a<55296||a>=57344?(r[n>>2]|=(224|a>>12)<<SHIFT[3&n++],r[n>>2]|=(128|a>>6&63)<<SHIFT[3&n++],r[n>>2]|=(128|63&a)<<SHIFT[3&n++]):(a=65536+((1023&a)<<10|1023&e.charCodeAt(++i)),r[n>>2]|=(240|a>>18)<<SHIFT[3&n++],r[n>>2]|=(128|a>>12&63)<<SHIFT[3&n++],r[n>>2]|=(128|a>>6&63)<<SHIFT[3&n++],r[n>>2]|=(128|63&a)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=r[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e,t,s,a,n,i,o,r,c,l=this.h0,u=this.h1,d=this.h2,b=this.h3,m=this.h4,j=this.h5,p=this.h6,g=this.h7,h=this.blocks;for(e=16;e<64;++e)t=((n=h[e-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,s=((n=h[e-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,h[e]=h[e-16]+t+h[e-7]+s|0;for(c=u&d,e=0;e<64;e+=4)this.first?(this.is224?(i=300032,g=(n=h[0]-1413257819)-150054599|0,b=n+24177077|0):(i=704751109,g=(n=h[0]-210244248)-1521486534|0,b=n+143694565|0),this.first=!1):(t=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=(i=l&u)^l&d^c,g=b+(n=g+(s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&j^~m&p)+K[e]+h[e])|0,b=n+(t+a)|0),t=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),a=(o=b&l)^b&u^i,p=d+(n=p+(s=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&m^~g&j)+K[e+1]+h[e+1])|0,t=((d=n+(t+a)|0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),a=(r=d&b)^d&l^o,j=u+(n=j+(s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&g^~p&m)+K[e+2]+h[e+2])|0,t=((u=n+(t+a)|0)>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),a=(c=u&d)^u&b^r,m=l+(n=m+(s=(j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&p^~j&g)+K[e+3]+h[e+3])|0,l=n+(t+a)|0;this.h0=this.h0+l|0,this.h1=this.h1+u|0,this.h2=this.h2+d|0,this.h3=this.h3+b|0,this.h4=this.h4+m|0,this.h5=this.h5+j|0,this.h6=this.h6+p|0,this.h7=this.h7+g|0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,a=this.h3,n=this.h4,i=this.h5,o=this.h6,r=this.h7,c=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[15&s]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[15&i]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o];return this.is224||(c+=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]),c},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,s=this.h2,a=this.h3,n=this.h4,i=this.h5,o=this.h6,r=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,s>>24&255,s>>16&255,s>>8&255,255&s,a>>24&255,a>>16&255,a>>8&255,255&a,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o];return this.is224||c.push(r>>24&255,r>>16&255,r>>8&255,255&r),c},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&(__WEBPACK_AMD_DEFINE_RESULT__=function(){return exports}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))})()}).call(this,__webpack_require__(274),__webpack_require__(275))},function(e,t,s){e.exports=s(79)(675)},function(e,t,s){e.exports=s(79)(188)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,s){"use strict";var a=s(278),n={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var s,i,o,r,c,l,u=!1;t||(t={}),s=t.debug||!1;try{if(o=a(),r=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),void 0===a.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=n[t.format]||n.default;window.clipboardData.setData(i,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(l),r.selectNodeContents(l),c.addRange(r),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){s&&console.error("unable to copy using execCommand: ",a),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(a){s&&console.error("unable to copy using clipboardData: ",a),s&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(r):c.removeAllRanges()),l&&document.body.removeChild(l),o()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,s=[],a=0;a<e.rangeCount;a++)s.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||s.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,s){e.exports=s(79)(2134)},function(e,t,s){"use strict";var a=s(281),n=s(212),i=s(282);function o(e){var t=a(i);t.prototype.options=n(t.prototype.options,this.data("settings"),e),this.Compiler=t}e.exports=o,o.Compiler=i},function(e,t,s){e.exports=s(79)(3851)},function(e,t,s){"use strict";var a=s(212),n=s(283);function i(e,t){this.inLink=!1,this.inTable=!1,this.tree=e,this.file=t,this.options=a(this.options),this.setOptions({})}e.exports=i;var o=i.prototype;o.enterLink=n("inLink",!1),o.enterTable=n("inTable",!1),o.enterLinkReference=s(284),o.options=s(247),o.setOptions=s(285),o.compile=s(297),o.visit=s(300),o.all=s(301),o.block=s(302),o.visitOrderedItems=s(303),o.visitUnorderedItems=s(304),o.visitors={root:s(305),text:s(306),heading:s(307),paragraph:s(308),blockquote:s(309),list:s(310),listItem:s(311),inlineCode:s(312),code:s(313),html:s(314),thematicBreak:s(315),strong:s(316),emphasis:s(317),break:s(318),delete:s(319),link:s(320),linkReference:s(322),imageReference:s(324),definition:s(325),image:s(326),table:s(327),tableCell:s(329)}},function(e,t,s){e.exports=s(79)(3854)},function(e,t,s){"use strict";var a=s(246);e.exports=function(e,t){var s=e.encode,n=e.escape,i=e.enterLink();return"shortcut"!==t.referenceType&&"collapsed"!==t.referenceType?i:(e.escape=a,e.encode=a,function(){e.encode=s,e.escape=n,i()})}},function(e,t,s){"use strict";var a=s(212),n=s(286),i=s(247),o=s(292),r=s(246);e.exports=function(e){var t,s,d=this,b=d.options;if(null==e)e={};else{if("object"!=typeof e)throw new Error("Invalid value `"+e+"` for setting `options`");e=a(e)}for(s in i)l[typeof i[s]](e,s,b[s],c[s]);return(t=e.ruleRepetition)&&t<3&&u(t,"options.ruleRepetition"),d.encode=function(e){var t={};return"false"===e?r:("true"===e&&(t.useNamedReferences=!0),"escape"===e&&(t.escapeOnly=!0,t.useNamedReferences=!0),function(e){return n(e,t)})}(String(e.entities)),d.escape=o(e),d.options=e,d};var c={entities:{true:!0,false:!0,numbers:!0,escape:!0},bullet:{"*":!0,"-":!0,"+":!0},rule:{"-":!0,_:!0,"*":!0},listItemIndent:{tab:!0,mixed:!0,1:!0},emphasis:{_:!0,"*":!0},strong:{_:!0,"*":!0},fence:{"`":!0,"~":!0}},l={boolean:function(e,t,s){var a=e[t];null==a&&(a=s),"boolean"!=typeof a&&u(a,"options."+t),e[t]=a},string:function(e,t,s,a){var n=e[t];null==n&&(n=s),(n=String(n))in a||u(n,"options."+t),e[t]=n},number:function(e,t,s){var a=e[t];null==a&&(a=s),isNaN(a)&&u(a,"options."+t),e[t]=a},function:function(e,t,s){var a=e[t];null==a&&(a=s),"function"!=typeof a&&u(a,"options."+t),e[t]=a}};function u(e,t){throw new Error("Invalid value `"+e+"` for setting `"+t+"`")}},function(e,t,s){"use strict";var a=s(287),n=s(288),i=s(289),o=s(248),r=s(290),c=s(291);e.exports=p,p.escape=function(e){return p(e,{escapeOnly:!0,useNamedReferences:!0})};var l={}.hasOwnProperty,u=61,d=function(){var e,t={};for(e in a)t[a[e]]=e;return t}(),b=f(['"',"'","<",">","&","`"]),m=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,j=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g;function p(e,t){var s=t||{},a=s.subset,i=a?f(a):b,o=s.escapeOnly,p=s.omitOptionalSemicolons;return e=e.replace(i,O),a||o?e:e.replace(m,(function(e,t,s){return g(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536,s.charCodeAt(t+2),p)})).replace(j,O);function O(e,t,a){return function(e,t,s){var a,i,o,b,m=s.useShortestReferences,j=s.omitOptionalSemicolons;return(m||s.useNamedReferences)&&l.call(d,e)&&(a=function(e,t,s,a){var i="&"+e;return s&&l.call(n,e)&&-1===c.indexOf(e)&&(!a||t&&t!==u&&!r(t))?i:i+";"}(d[e],t,j,s.attribute)),!m&&a||(o=g(i=e.charCodeAt(0),t,j),m&&(b=h(i,t,j)).length<o.length&&(o=b)),a&&(!m||a.length<o.length)?a:o}(e,a.charCodeAt(t+1),s)}}function g(e,t,s){var a="&#x"+e.toString(16).toUpperCase();return s&&t&&!i(t)?a:a+";"}function h(e,t,s){var a="&#"+String(e);return s&&t&&!o(t)?a:a+";"}function f(e){return new RegExp("["+e.join("")+"]","g")}},function(e){e.exports=JSON.parse('{"nbsp":" ","iexcl":"¡","cent":"¢","pound":"£","curren":"¤","yen":"¥","brvbar":"¦","sect":"§","uml":"¨","copy":"©","ordf":"ª","laquo":"«","not":"¬","shy":"­","reg":"®","macr":"¯","deg":"°","plusmn":"±","sup2":"²","sup3":"³","acute":"´","micro":"µ","para":"¶","middot":"·","cedil":"¸","sup1":"¹","ordm":"º","raquo":"»","frac14":"¼","frac12":"½","frac34":"¾","iquest":"¿","Agrave":"À","Aacute":"Á","Acirc":"Â","Atilde":"Ã","Auml":"Ä","Aring":"Å","AElig":"Æ","Ccedil":"Ç","Egrave":"È","Eacute":"É","Ecirc":"Ê","Euml":"Ë","Igrave":"Ì","Iacute":"Í","Icirc":"Î","Iuml":"Ï","ETH":"Ð","Ntilde":"Ñ","Ograve":"Ò","Oacute":"Ó","Ocirc":"Ô","Otilde":"Õ","Ouml":"Ö","times":"×","Oslash":"Ø","Ugrave":"Ù","Uacute":"Ú","Ucirc":"Û","Uuml":"Ü","Yacute":"Ý","THORN":"Þ","szlig":"ß","agrave":"à","aacute":"á","acirc":"â","atilde":"ã","auml":"ä","aring":"å","aelig":"æ","ccedil":"ç","egrave":"è","eacute":"é","ecirc":"ê","euml":"ë","igrave":"ì","iacute":"í","icirc":"î","iuml":"ï","eth":"ð","ntilde":"ñ","ograve":"ò","oacute":"ó","ocirc":"ô","otilde":"õ","ouml":"ö","divide":"÷","oslash":"ø","ugrave":"ù","uacute":"ú","ucirc":"û","uuml":"ü","yacute":"ý","thorn":"þ","yuml":"ÿ","fnof":"ƒ","Alpha":"Α","Beta":"Β","Gamma":"Γ","Delta":"Δ","Epsilon":"Ε","Zeta":"Ζ","Eta":"Η","Theta":"Θ","Iota":"Ι","Kappa":"Κ","Lambda":"Λ","Mu":"Μ","Nu":"Ν","Xi":"Ξ","Omicron":"Ο","Pi":"Π","Rho":"Ρ","Sigma":"Σ","Tau":"Τ","Upsilon":"Υ","Phi":"Φ","Chi":"Χ","Psi":"Ψ","Omega":"Ω","alpha":"α","beta":"β","gamma":"γ","delta":"δ","epsilon":"ε","zeta":"ζ","eta":"η","theta":"θ","iota":"ι","kappa":"κ","lambda":"λ","mu":"μ","nu":"ν","xi":"ξ","omicron":"ο","pi":"π","rho":"ρ","sigmaf":"ς","sigma":"σ","tau":"τ","upsilon":"υ","phi":"φ","chi":"χ","psi":"ψ","omega":"ω","thetasym":"ϑ","upsih":"ϒ","piv":"ϖ","bull":"•","hellip":"…","prime":"′","Prime":"″","oline":"‾","frasl":"⁄","weierp":"℘","image":"ℑ","real":"ℜ","trade":"™","alefsym":"ℵ","larr":"←","uarr":"↑","rarr":"→","darr":"↓","harr":"↔","crarr":"↵","lArr":"⇐","uArr":"⇑","rArr":"⇒","dArr":"⇓","hArr":"⇔","forall":"∀","part":"∂","exist":"∃","empty":"∅","nabla":"∇","isin":"∈","notin":"∉","ni":"∋","prod":"∏","sum":"∑","minus":"−","lowast":"∗","radic":"√","prop":"∝","infin":"∞","ang":"∠","and":"∧","or":"∨","cap":"∩","cup":"∪","int":"∫","there4":"∴","sim":"∼","cong":"≅","asymp":"≈","ne":"≠","equiv":"≡","le":"≤","ge":"≥","sub":"⊂","sup":"⊃","nsub":"⊄","sube":"⊆","supe":"⊇","oplus":"⊕","otimes":"⊗","perp":"⊥","sdot":"⋅","lceil":"⌈","rceil":"⌉","lfloor":"⌊","rfloor":"⌋","lang":"〈","rang":"〉","loz":"◊","spades":"♠","clubs":"♣","hearts":"♥","diams":"♦","quot":"\\"","amp":"&","lt":"<","gt":">","OElig":"Œ","oelig":"œ","Scaron":"Š","scaron":"š","Yuml":"Ÿ","circ":"ˆ","tilde":"˜","ensp":" ","emsp":" ","thinsp":" ","zwnj":"‌","zwj":"‍","lrm":"‎","rlm":"‏","ndash":"–","mdash":"—","lsquo":"‘","rsquo":"’","sbquo":"‚","ldquo":"“","rdquo":"”","bdquo":"„","dagger":"†","Dagger":"‡","permil":"‰","lsaquo":"‹","rsaquo":"›","euro":"€"}')},function(e,t,s){e.exports=s(79)(3556)},function(e,t,s){e.exports=s(79)(3558)},function(e,t,s){e.exports=s(79)(3559)},function(e){e.exports=JSON.parse('["cent","copy","divide","gt","lt","not","para","times"]')},function(e,t,s){"use strict";var a=s(248),n=s(293),i=s(294),o=s(295),r=s(249);e.exports=function(e){return function(t,s,R){var D,P,_,z,B,U,$=this,V=e.gfm,X=e.commonmark,G=e.pedantic,W=X?[f,j]:[f],q=R&&R.children,Q=q&&q.indexOf(s),Y=q&&q[Q-1],J=q&&q[Q+1],Z=t.length,ee=o(e),te=-1,se=[],ae=se;for(D=Y?N(Y)&&M.test(Y.value):!R||"root"===R.type||"paragraph"===R.type;++te<Z;){if(U=!1,"\n"===(P=t.charAt(te)))D=!0;else if(P===E||P===S||P===p||P===y||P===x||P===b&&r(t.slice(te))>0||P===C&&$.inLink||V&&P===I&&t.charAt(te+1)===I||V&&P===w&&($.inTable||L(t,te))||P===A&&te>0&&te<Z-1&&(G||!n(t.charAt(te-1))||!n(t.charAt(te+1)))||V&&!$.inLink&&P===O&&H(se.join("")))U=!0;else if(D)if(P===v||P===d||P===p||P===h||P===g)U=!0;else if(a(P)){for(B=te+1;B<Z&&a(t.charAt(B));)B++;-1!==W.indexOf(t.charAt(B))&&((J=t.charAt(B+1))&&J!==u&&J!==c&&J!==l||(se.push(t.slice(te,B)),te=B,P=t.charAt(te),U=!0))}D&&!i(P)&&(D=!1),se.push(U?ne(P):P)}if(q&&N(s)){if(Y&&Y.referenceType===F){for(te=-1,Z=ae.length;++te<Z;)if((P=ae[te])!==u&&P!==c){P!==m&&P!==O||(ae[te]=ne(P));break}N(J)&&te===Z&&J.value.charAt(0)===m&&ae.push(E)}V&&!$.inLink&&N(Y)&&t.charAt(0)===O&&H(Y.value.slice(-6))&&(ae[0]=ne(O)),N(J)&&t.charAt(Z-1)===b&&0!==r(b+J.value)&&(ae[ae.length-1]=ne(b)),J&&"link"===J.type&&t.charAt(Z-1)===k&&(ae[ae.length-1]=ne(k)),V&&N(J)&&t.charAt(Z-1)===I&&J.value.charAt(0)===I&&ae.splice(-1,0,E),_=N(Y)&&n(Y.value.slice(-1)),z=N(J)&&n(J.value.charAt(0)),1===Z?t!==A||!G&&_&&z||ae.unshift(E):(t.charAt(0)!==A||!G&&_&&n(t.charAt(1))||ae.unshift(E),t.charAt(Z-1)!==A||!G&&z&&n(t.charAt(Z-2))||ae.splice(-1,0,E))}return ae.join("");function ne(e){return-1===ee.indexOf(e)?T[e]:E+e}}};var c="\t",l="\n",u=" ",d="#",b="&",m="(",j=")",p="*",g="+",h="-",f=".",O=":",x="<",v=">",y="[",E="\\",C="]",A="_",S="`",w="|",I="~",k="!",T={"<":"&lt;",":":"&#x3A;","&":"&amp;","|":"&#x7C;","~":"&#x7E;"},F="shortcut",R="mailto",D="https",P="http",M=/\n\s*$/;function L(e,t){var s,a=e.lastIndexOf(l,t),n=e.indexOf(l,t);for(n=-1===n?e.length:n;++a<n;)if((s=e.charAt(a))!==O&&s!==h&&s!==u&&s!==w)return!1;return!0}function N(e){return e&&"text"===e.type}function H(e){var t=e.slice(-6).toLowerCase();return t===R||t.slice(-5)===D||t.slice(-4)===P}},function(e,t,s){"use strict";e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return!/[^0-9a-z\xDF-\xFF]/.test(e.toLowerCase())}},function(e,t,s){e.exports=s(79)(358)},function(e,t,s){e.exports=s(79)(3860)},function(e,t,s){e.exports=s(79)(693)},function(e,t,s){"use strict";var a=s(298);e.exports=function(){return this.visit(a(this.tree,this.options.commonmark))}},function(e,t,s){"use strict";var a=s(299);function n(e,t){var s,a;return"text"===e.type?!e.position||(s=e.position.start,a=e.position.end,s.line!==a.line||a.column-s.column===e.value.length):t&&"blockquote"===e.type}e.exports=function(e,t){return a(e,(function(e,s,a){var i=a?a.children:[],o=s&&i[s-1];if(o&&e.type===o.type&&n(o,t)&&n(e,t))return e.value&&(o.value+=e.value),e.children&&(o.children=o.children.concat(e.children)),i.splice(s,1),o.position&&e.position&&(o.position.end=e.position.end),s})),e}},function(e,t,s){e.exports=s(79)(363)},function(e,t,s){"use strict";e.exports=function(e,t){var s=this,a=s.visitors;return"function"!=typeof a[e.type]&&s.file.fail(new Error("Missing compiler for node of type `"+e.type+"`: `"+e+"`"),e),a[e.type].call(s,e,t)}},function(e,t,s){"use strict";e.exports=function(e){for(var t=e.children,s=t.length,a=[],n=-1;++n<s;)a[n]=this.visit(t[n],e);return a}},function(e,t,s){"use strict";e.exports=function(e){for(var t,s,r=this.options,c=r.fences,l=r.commonmark?o:i,u=r.tightDefinitions?a:n,d=[],b=e.children,m=b.length,j=-1;++j<m;)t=s,s=b[j],t&&("list"===t.type&&("list"===s.type&&t.ordered===s.ordered||"code"===s.type&&!s.lang&&!c)?d.push(l):"definition"===t.type&&"definition"===s.type?d.push(u):d.push(n)),d.push(this.visit(s,e));return d.join("")};var a="\n",n=a+a,i=n+a,o=n+"\x3c!----\x3e"+n},function(e,t,s){"use strict";e.exports=function(e){var t,s=this,o=s.visitors.listItem,r=s.options.incrementListMarker,c=[],l=e.start,u=e.children,d=u.length,b=-1;for(l=null==l?1:l;++b<d;)t=(r?l+b:l)+n,c[b]=o.call(s,u[b],e,b,t);return c.join(e.spread?i:a)};var a="\n",n=".",i=a+a},function(e,t,s){"use strict";e.exports=function(e){for(var t=this,s=t.options.bullet,i=t.visitors.listItem,o=e.children,r=o.length,c=-1,l=[];++c<r;)l[c]=i.call(t,o[c],e,c,s);return l.join(e.spread?n:a)};var a="\n",n=a+a},function(e,t,s){"use strict";e.exports=function(e){var t=this.block(e);return t.charAt(t.length-1)!==a&&(t+=a),t};var a="\n"},function(e,t,s){"use strict";e.exports=function(e,t){return this.encode(this.escape(e.value,e,t),e)}},function(e,t,s){"use strict";var a=s(148);e.exports=function(e){var t,s=this,l=e.depth,u=s.options.setext,d=s.options.closeAtx,b=s.all(e).join("");return u&&l<3?b+n+a(1===l?c:r,b.length):(t=a(o,e.depth))+i+b+(d?i+t:"")};var n="\n",i=" ",o="#",r="-",c="="},function(e,t,s){"use strict";e.exports=function(e){return this.all(e).join("")}},function(e,t,s){"use strict";e.exports=function(e){for(var t,s=this.block(e).split(a),o=[],r=s.length,c=-1;++c<r;)t=s[c],o[c]=(t?n:"")+t;return i+o.join(a+i)};var a="\n",n=" ",i=">"},function(e,t,s){"use strict";e.exports=function(e){return(e.ordered?this.visitOrderedItems:this.visitUnorderedItems).call(this,e)}},function(e,t,s){"use strict";var a=s(148),n=s(250);e.exports=function(e,t,s,m){for(var j,p,g,h=this,f=h.options.listItemIndent,O=m||h.options.bullet,x=null==e.spread||e.spread,v=e.checked,y=e.children,E=y.length,C=[],A=-1;++A<E;)C[A]=h.visit(y[A],e);return j=C.join(x?d:i),"boolean"==typeof v&&(j=r+(v?l:o)+c+o+j),"1"===f||"mixed"===f&&-1===j.indexOf(i)?(p=O.length+1,g=o):(p=u((O.length+1)/b)*b,g=a(o,p-O.length)),j?O+g+n(j,p/b).slice(p):O};var i="\n",o=" ",r="[",c="]",l="x",u=Math.ceil,d=i+i,b=4},function(e,t,s){"use strict";var a=s(251),n=s(148);e.exports=function(e){var t,s,o=e.value,r=n(i,a(o,i)+1),u=r,d=r,b=o.charCodeAt(0),m=o.charCodeAt(o.length-1),j=!1;if(b===c||m===c)j=!0;else if(o.length>2&&l(b)&&l(m))for(t=1,s=o.length-1;++t<s;)if(!l(o.charCodeAt(t))){j=!0;break}return j&&(u+=" ",d=" "+d),u+o+d};var i="`",o=10,r=32,c=96;function l(e){return e===o||e===r}},function(e,t,s){"use strict";var a=s(251),n=s(148),i=s(250);e.exports=function(e,t){var s,u=this,d=e.value,b=u.options,m=b.fence,j=e.lang||"";return j&&e.meta&&(j+=r+e.meta),(j=u.encode(u.escape(j,e)))||b.fences||!d||d.charAt(0)===o||d.charAt(d.length-1)===o?(m===l&&-1!==j.indexOf(l)&&(m=c),(s=n(m,Math.max(a(d,m)+1,3)))+j+o+d+o+s):(t&&"listItem"===t.type&&"tab"!==b.listItemIndent&&b.pedantic&&u.file.fail("Cannot indent code properly. See https://git.io/fxKR8",e.position),i(d,1))};var o="\n",r=" ",c="~",l="`"},function(e,t,s){"use strict";e.exports=function(e){return e.value}},function(e,t,s){"use strict";var a=s(148);e.exports=function(){var e=this.options,t=a(e.rule,e.ruleRepetition);return e.ruleSpaces?t.split("").join(n):t};var n=" "},function(e,t,s){"use strict";var a=s(148);e.exports=function(e){var t=a(this.options.strong,2);return t+this.all(e).join("")+t}},function(e,t,s){"use strict";e.exports=function(e){var t=this.options.emphasis,s=this.all(e).join("");return this.options.pedantic&&t===a&&-1!==s.indexOf(t)&&(t=n),t+s+t};var a="_",n="*"},function(e,t,s){"use strict";e.exports=function(){return this.options.commonmark?a:n};var a="\\\n",n="  \n"},function(e,t,s){"use strict";e.exports=function(e){return a+this.all(e).join("")+a};var a="~~"},function(e,t,s){"use strict";var a=s(213),n=s(214);e.exports=function(e){var t=this,s=t.encode(e.url||"",e),d=t.enterLink(),b=t.encode(t.escape(e.url||"",e)),m=t.all(e).join("");return d(),null==e.title&&u.test(s)&&b===m?a(t.encode(e.url),!0):(s=a(s),e.title&&(s+=i+n(t.encode(t.escape(e.title,e),e))),o+m+r+c+s+l)};var i=" ",o="[",r="]",c="(",l=")",u=/^[a-z][a-z+.-]+:\/?/i},function(e,t,s){e.exports=s(79)(3884)},function(e,t,s){"use strict";var a=s(323),n=s(252);e.exports=function(e){var t=this,s=e.referenceType,l=t.enterLinkReference(t,e),u=t.all(e).join("");return l(),(s===r||s===c)&&(u=a(u,e.label||e.identifier)),i+u+o+n(e)};var i="[",o="]",r="shortcut",c="collapsed"},function(e,t,s){"use strict";var a=s(249);e.exports=function(e,t){for(var s,o=e.length,r=t.length,c=[],l=0,u=0;u<o;){for(s=u;u<o&&!i.test(e.charAt(u));)u+=1;for(c.push(e.slice(s,u));l<r&&!i.test(t.charAt(l));)l+=1;for(s=l;l<r&&i.test(t.charAt(l));)t.charAt(l)===n&&(l+=a(t.slice(l))),l+=1;for(c.push(t.slice(s,l));u<o&&i.test(e.charAt(u));)u+=1}return c.join("")};var n="&",i=/[-!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~_]/},function(e,t,s){"use strict";var a=s(252);e.exports=function(e){return o+n+(this.encode(e.alt,e)||"")+i+a(e)};var n="[",i="]",o="!"},function(e,t,s){"use strict";var a=s(213),n=s(214);e.exports=function(e){var t=a(e.url);return e.title&&(t+=i+n(e.title)),r+(e.label||e.identifier)+c+o+i+t};var i=" ",o=":",r="[",c="]"},function(e,t,s){"use strict";var a=s(213),n=s(214);e.exports=function(e){var t=this,s=a(t.encode(e.url||"",e)),d=t.enterLink(),b=t.encode(t.escape(e.alt||"",e));return d(),e.title&&(s+=i+n(t.encode(e.title,e))),u+c+b+l+o+s+r};var i=" ",o="(",r=")",c="[",l="]",u="!"},function(e,t,s){"use strict";var a=s(328);e.exports=function(e){for(var t=this,s=t.options,n=s.tableCellPadding,i=s.tablePipeAlign,o=s.stringLength,r=e.children,c=r.length,l=t.enterTable(),u=[];c--;)u[c]=t.all(r[c]);return l(),a(u,{align:e.align,alignDelimiters:i,padding:n,stringLength:o})}},function(e,t,s){"use strict";var a=s(148);e.exports=function(e,t){for(var s,u,d,b,m,O,x,v,y,E,C,A,S=t||{},w=!1!==S.padding,I=!1!==S.delimiterStart,k=!1!==S.delimiterEnd,T=(S.align||[]).concat(),F=!1!==S.alignDelimiters,R=[],D=S.stringLength||h,P=-1,M=e.length,L=[],N=[],H=[],_=[],z=[],B=0;++P<M;){for(u=-1,H=[],_=[],(d=(s=e[P]).length)>B&&(B=d);++u<d;)O=null==(A=s[u])?"":String(A),!0===F&&(m=D(O),_[u]=m,(void 0===(b=z[u])||m>b)&&(z[u]=m)),H.push(O);L[P]=H,N[P]=_}if(u=-1,d=B,"object"==typeof T&&"length"in T)for(;++u<d;)R[u]=f(T[u]);else for(C=f(T);++u<d;)R[u]=C;for(u=-1,d=B,H=[],_=[];++u<d;)y="",E="",(C=R[u])===p?y=c:C===g?E=c:C===j&&(y=c,E=c),m=F?Math.max(1,z[u]-y.length-E.length):1,O=y+a(r,m)+E,!0===F&&((m=y.length+m+E.length)>z[u]&&(z[u]=m),_[u]=m),H[u]=O;for(L.splice(1,0,H),N.splice(1,0,_),P=-1,M=L.length,x=[];++P<M;){for(H=L[P],_=N[P],u=-1,d=B,v=[];++u<d;)O=H[u]||"",y="",E="",!0===F&&(m=z[u]-(_[u]||0),(C=R[u])===g?y=a(i,m):C===j?m%2==0?E=y=a(i,m/2):(y=a(i,m/2+.5),E=a(i,m/2-.5)):E=a(i,m)),!0===I&&0===u&&v.push(l),!0!==w||!1===F&&""===O||!0!==I&&0===u||v.push(i),!0===F&&v.push(y),v.push(O),!0===F&&v.push(E),!0===w&&v.push(i),!0!==k&&u===d-1||v.push(l);v=v.join(""),!1===k&&(v=v.replace(n,"")),x.push(v)}return x.join(o)};var n=/ +$/,i=" ",o="\n",r="-",c=":",l="|",u=0,d=67,b=76,m=82,j=99,p=108,g=114;function h(e){return e.length}function f(e){var t="string"==typeof e?e.charCodeAt(0):u;return t===b||t===p?p:t===m||t===g?g:t===d||t===j?j:u}},function(e,t,s){"use strict";e.exports=function(e){return this.all(e).join("").replace(a," ")};var a=/\r?\n/g},function(e,t,s){e.exports=s(79)(1029)},,,,,,,,,,,,,,,,,,,function(e,t,s){"use strict";s.r(t),s.d(t,"CaseViewLoading",(function(){return Ri})),s.d(t,"CaseView",(function(){return Di})),s.d(t,"default",(function(){return Di}));var a=s(4),n=s.n(a),i=s(5),o=s(44),r=s(46),c=s(8),l=s(77),u=s(76),d=s(134),b=s(200),m=s(34),j=s(3);const p=n.a.memo((({caseId:e})=>{const{navigateToAllCases:t}=Object(m.i)();return Object(j.jsx)(i.EuiEmptyPrompt,{"data-test-subj":"case-view-does-not-exist",iconColor:"default",iconType:"casesApp",title:Object(j.jsx)("h2",null,d.D),titleSize:"xs",body:Object(j.jsx)("p",null,d.C(e)),actions:Object(j.jsx)(i.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},d.B)})}));p.displayName="DoesNotExist";var g=s(57),h=s(84),f=s(28);const O=({title:e,children:t})=>Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiTitle,{size:"xxs"},Object(j.jsx)("strong",null,e)),t);O.displayName="ActionBarStatusItem";const x=Object(a.memo)(O);var v=s(39),y=s(219),E=s(215),C=s(47),A=s(1);const S=A.i18n.translate("xpack.cases.caseView.editActionsLinkAria",{defaultMessage:"click to see all actions"}),w="property-actions",I=n.a.memo((({disabled:e=!1,onClick:t,iconType:s,label:a,color:n,customDataTestSubj:o})=>{const r=T(o);return Object(j.jsx)(i.EuiButtonEmpty,{"aria-label":a,color:n||"text","data-test-subj":`${r}-${s}`,iconSide:"left",iconType:s,isDisabled:e,onClick:t},a)}));I.displayName="PropertyActionButton";const k=n.a.memo((({propertyActions:e,customDataTestSubj:t})=>{const[s,n]=Object(a.useState)(!1),o=Object(a.useCallback)((()=>{n((e=>!e))}),[]),r=Object(a.useCallback)((e=>{n(!1),null!=e&&e()}),[]),c=T(t);return Object(j.jsx)(i.EuiPopover,{anchorPosition:"downRight","data-test-subj":c,ownFocus:!0,button:Object(j.jsx)(i.EuiButtonIcon,{"data-test-subj":`${c}-ellipses`,"aria-label":S,iconType:"boxesHorizontal",onClick:o}),id:"settingsPopover",isOpen:s,closePopover:r,repositionOnScroll:!0},Object(j.jsx)(i.EuiFlexGroup,{alignItems:"flexStart","data-test-subj":`${c}-group`,direction:"column",gutterSize:"none"},e.map(((e,s)=>Object(j.jsx)(i.EuiFlexItem,{grow:!1,key:`${e.type}-${s}`},Object(j.jsx)("span",null,e.type===C.a.BUTTON&&Object(j.jsx)(I,{disabled:e.disabled,iconType:e.iconType,label:e.label,color:e.color,onClick:()=>r(e.onClick),customDataTestSubj:t})||e.type===C.a.CUSTOM&&Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(i.EuiLoadingSpinner,null)},e.render())))))))}));k.displayName="PropertyActions";const T=e=>null==e?w:`${w}-${e}`;var F=s(45);const R=({caseData:e,currentExternalIncident:t})=>{const{mutate:s}=Object(y.a)(),{navigateToAllCases:n}=Object(m.i)(),{permissions:o}=Object(g.a)(),{showSuccessToast:r}=Object(F.a)(),[c,l]=Object(a.useState)(!1),u=Object(a.useCallback)((()=>{l(!0)}),[]),b=Object(a.useCallback)((()=>{l(!1)}),[]),p=Object(a.useMemo)((()=>{var s;return[{type:C.a.BUTTON,iconType:"copyClipboard",label:d.t,onClick:()=>{navigator.clipboard.writeText(e.id),r(d.u)}},...null==t||Object(v.isEmpty)(null==t?void 0:t.externalUrl)?[]:[{type:C.a.BUTTON,iconType:"popout",label:d.nb(null!==(s=null==t?void 0:t.externalTitle)&&void 0!==s?s:""),onClick:()=>window.open(null==t?void 0:t.externalUrl,"_blank")}],...o.delete?[{type:C.a.BUTTON,iconType:"trash",label:d.w(),color:"danger",onClick:u}]:[]]}),[o.delete,u,t,e.id,r]),h=Object(a.useCallback)((()=>{l(!1),s({caseIds:[e.id],successToasterTitle:d.v(1)},{onSuccess:n})}),[e.id,s,n]);return 0===p.length?null:Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-actions"},Object(j.jsx)(k,{propertyActions:p,customDataTestSubj:"case"}),c?Object(j.jsx)(E.a,{totalCasesToBeDeleted:1,onCancel:b,onConfirm:h}):null)};R.displayName="Actions";const D=n.a.memo(R);var P=s(149),M=s(6),L=s(173),N=s(78);const H=({currentStatus:e,disabled:t=!1,isLoading:s=!1,onStatusChanged:n})=>{const[o,r]=Object(a.useState)(!1),c=Object(a.useCallback)((()=>r((e=>!e))),[]),l=Object(a.useCallback)((()=>r(!1)),[]),u=Object(a.useMemo)((()=>Object(j.jsx)(L.a,{disabled:t||s,status:e,onClick:c})),[t,e,c,s]),d=Object(a.useCallback)((t=>{l(),e!==t&&n(t)}),[l,e,n]),b=Object(a.useMemo)((()=>M.u.map((t=>Object(j.jsx)(i.EuiContextMenuItem,{"data-test-subj":`case-view-status-dropdown-${t}`,icon:t===e?"check":"empty",key:t,onClick:()=>d(t)},Object(j.jsx)(P.a,{status:t}))))),[e,d]);return t?Object(j.jsx)(P.a,{status:e}):Object(j.jsx)(i.EuiPopover,{anchorPosition:"downLeft",button:u,closePopover:l,"data-test-subj":"case-view-status-dropdown",id:"caseStatusPopover",isOpen:o,panelPaddingSize:"none"},Object(j.jsx)(i.EuiContextMenuPanel,{title:N.h,items:b}))};H.displayName="StatusContextMenu";const _=Object(a.memo)(H);var z=s(20);const B=({disabled:e,isSynced:t=!0,showLabel:s=!1,onSwitchChange:n})=>{const[o,r]=Object(a.useState)(t),c=Object(a.useCallback)((()=>{n&&n(!o),r(!o)}),[o,n]);return Object(j.jsx)(i.EuiSwitch,{label:o?z.jb:z.ib,showLabel:s,checked:o,onChange:c,disabled:e,"data-test-subj":"sync-alerts-switch"})};B.displayName="SyncAlertsSwitchComponent";const U=Object(a.memo)(B);var $=s(186),V=s(137),X=s(143);const G=e=>{const{showErrorToast:t}=Object(F.a)();return Object(o.useQuery)(u.e.caseConnectors(e),(({signal:t})=>Object(l.g)(e,t)),{staleTime:3e4,onError:e=>{t(e,{title:r.e})}})},W=({caseData:e,isLoading:t,onUpdateField:s})=>{var n,o,r;const{permissions:c}=Object(g.a)(),{isSyncAlertsEnabled:l,metricsFeatures:u}=Object(X.a)(),{euiTheme:b}=Object(i.useEuiTheme)(),{data:m}=G(e.id),p=(h=e).status===M.g.open?h.createdAt:h.status===M.g["in-progress"]?h.updatedAt:h.status===M.g.closed?h.closedAt:null;var h;const O=(v=e.status,L.b[v].actionBar.title);var v;const y=Object(V.a)(),E=Object(a.useCallback)((e=>s({key:"status",value:e})),[s]),C=null!==(n=null==m||null===(o=m[e.connector.id])||void 0===o||null===(r=o.push.details)||void 0===r?void 0:r.externalService)&&void 0!==n?n:null,A=Object(a.useCallback)((t=>s({key:"settings",value:{...e.settings,syncAlerts:t}})),[e.settings,s]);return Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"l",justifyContent:"flexEnd","data-test-subj":"case-action-bar-wrapper"},Object(j.jsx)(i.EuiFlexItem,{grow:!1,css:Object(j.css)("padding-right:",b.size.l,";border-right:",b.border.thin,";@media only screen and (max-width: ",b.breakpoint.m,"){padding-right:0;border-right:0;}","")},Object(j.jsx)(x,{title:d.eb,"data-test-subj":"case-view-status"},Object(j.jsx)(_,{currentStatus:e.status,disabled:!c.update,isLoading:t,onStatusChanged:E}))),Object(j.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",responsive:!1},u.includes(f.a.LIFESPAN)?null:Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(x,{title:O,"data-test-subj":"case-action-bar-status-date"},Object(j.jsx)($.a,{value:p}))),c.update&&l?Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(x,{title:Object(j.jsx)(i.EuiFlexGroup,{component:"span",alignItems:"center",gutterSize:"xs",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)("span",null,d.fb)),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiIconTip,{content:d.gb}))),"data-test-subj":"case-view-sync-alerts"},Object(j.jsx)(U,{disabled:t,isSynced:e.settings.syncAlerts,onSwitchChange:A}))):null,Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonEmpty,{"data-test-subj":"case-refresh",flush:"left",iconType:"refresh",onClick:y},d.l)),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(D,{caseData:e,currentExternalIncident:C}))))};W.displayName="CaseActionBar";const q=n.a.memo(W);var Q=s(184),Y=s(2),J=s(183),Z=s(244),ee={name:"d3v9zr",styles:"overflow:hidden"};const te=({onSubmit:e,isLoading:t,title:s})=>{const{releasePhase:n,permissions:o}=Object(g.a)(),[r,c]=Object(a.useState)(!1),[l,u]=Object(a.useState)([]),d=Object(a.useCallback)((t=>t.trim().length?t.trim().length>Y.Nb?(u([J.f("title",Y.Nb)]),!1):(t!==s&&e(t.trim()),c(!1),u([]),!0):(u([J.g]),!1)),[e,s]),b=l.length>0;return Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,{grow:!0,css:n&&ee},Object(j.jsx)(i.EuiInlineEditTitle,{defaultValue:s,readModeProps:{onClick:()=>c(!0),"data-test-subj":"editable-title-header-value"},editModeProps:{formRowProps:{error:l},inputProps:{"data-test-subj":"editable-title-input-field",onChange:()=>{u([])}},saveButtonProps:{"data-test-subj":"editable-title-submit-btn",isDisabled:b},cancelButtonProps:{onClick:()=>(u([]),void c(!1)),"data-test-subj":"editable-title-cancel-btn"}},inputAriaLabel:"Editable title input field",heading:"h1",size:"s",isInvalid:b,isLoading:t,isReadOnly:!o.update,onSave:e=>d(e),startWithEditOpen:r,"data-test-subj":"header-page-title"})),Object(j.jsx)(i.EuiFlexItem,{grow:!1},"experimental"===n&&Object(j.jsx)(Z.c,null),"beta"===n&&Object(j.jsx)(Z.b,null)))};te.displayName="EditableTitle";const se=n.a.memo(te);var ae=s(199),ne=s(182),ie=s(12),oe=s(155),re=s(169),ce=s(168),le=s(147);const ue=A.i18n.translate("xpack.cases.editConnector.editConnectorLinkAria",{defaultMessage:"click to edit connector"});var de=s(58),be=s(233),me=s(242),je=s(241);const pe=({disabled:e,errorsMsg:t,isLoading:s,hasBeenPushed:a,connectorName:o,showTooltip:r,pushToService:c})=>{const l=Object(j.jsx)(i.EuiButtonEmpty,{"data-test-subj":"push-to-external-service",iconType:"importAction",onClick:c,disabled:e,isLoading:s},a?le.j(o):le.g(o));return r?Object(j.jsx)(i.EuiToolTip,{position:"top",title:t.length>0?t[0].title:le.i(o),content:Object(j.jsx)("p",null,t.length>0?t[0].description:le.h),"data-test-subj":"push-button-tooltip"},l):Object(j.jsx)(n.a.Fragment,null,l)};pe.displayName="PushButton";const ge=n.a.memo(pe);var he=s(243);const fe=A.i18n.translate("xpack.cases.addConnector.title",{defaultMessage:"Add connector"}),Oe=A.i18n.translate("xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedTitle",{defaultMessage:"Reopen the case"}),xe=A.i18n.translate("xpack.cases.caseView.errorsPushServiceCallOutTitle",{defaultMessage:"Select an external connector"}),ve=({handleButtonClick:e,id:t,messages:s,type:n,hasLicenseError:o})=>{const{permissions:r}=Object(g.a)(),c=Object(a.useCallback)((s=>e(s,t,n)),[e,t,n]),l=Object(a.useMemo)((()=>s.map((e=>e.id)).includes(he.a)),[s]);return Object(v.isEmpty)(s)?null:Object(j.jsx)(i.EuiCallOut,{title:l?Oe:o?le.f:xe,color:n,iconType:"gear","data-test-subj":`case-callout-${t}`,size:"s"},Object(j.jsx)(i.EuiDescriptionList,{"data-test-subj":`callout-messages-${t}`,listItems:s}),!l&&!o&&r.settings&&Object(j.jsx)(i.EuiButton,{"data-test-subj":`callout-onclick-${t}`,color:"success"===n?"success":n,onClick:c},fe))};ve.displayName="CallOut";const ye=Object(a.memo)(ve);var Ee=s(273);const Ce=({hasConnectors:e,hasLicenseError:t,onEditClick:s,messages:o=[]})=>{const{navigateToConfigureCases:r}=Object(m.l)(),c=Object(a.useCallback)((t=>{t.preventDefault(),e?s():r()}),[e,s,r]),l=Object(a.useMemo)((()=>o.reduce(((e,t)=>{var s,a,n,i;const o=null==t.errorType?"primary":t.errorType;return{...e,[o]:{messagesId:[...null!==(s=null===(a=e[o])||void 0===a?void 0:a.messagesId)&&void 0!==s?s:[],t.id],messages:[...null!==(n=null===(i=e[o])||void 0===i?void 0:i.messages)&&void 0!==n?n:[],t]}}}),{})),[o]),u=Object.keys(l);return Object(j.jsx)(n.a.Fragment,null,u.map(((e,s)=>{const a=((e,t="|")=>Object(Ee.sha256)(e.join(t)))(l[e].messagesId);return Object(j.jsx)(n.a.Fragment,{key:a},Object(j.jsx)(ye,{handleButtonClick:c,id:a,messages:l[e].messages,type:e,hasLicenseError:t}),s!==u.length-1?Object(j.jsx)(i.EuiSpacer,null):null)})))};Ce.displayName="CaseCallOut";const Ae=Object(a.memo)(Ce),Se=({hasConnectors:e,hasLicenseError:t,errorsMsg:s,onEditClick:a})=>Object(j.jsx)(Ae,{hasConnectors:e,hasLicenseError:t,messages:s,onEditClick:a});Se.displayName="PushCalloutsComponent";const we=n.a.memo(Se);var Ie=s(95),ke=s.n(Ie),Te=s(21),Fe=s(237),Re=s(235),De=s(181);const Pe=({caseData:e,caseConnectors:t,supportedActionConnectors:s,isLoading:n,onSubmit:o,onCancel:r})=>{const c=e.connector.id,l=e.connector.fields,{form:u}=Object(Te.useForm)({defaultValue:{connectorId:c,fields:l},options:{stripEmptyFields:!1},serializer:de.h,deserializer:de.g}),[{connectorId:d,fields:b}]=Object(Te.useFormData)({form:u}),m=Object(a.useMemo)((()=>Object(de.b)(b)),[b]),{submit:p}=u,g=Object(de.e)(d,s),h=!(null===g&&c===Y.Pb)&&(null==g?void 0:g.id)!==c||!ke()(m,l),f=Object(de.i)({config:{},connectors:s}),O=Object(a.useCallback)((async()=>{const{isValid:e,data:t}=await p();if(e&&t.connectorId){var a;const e=Object(de.e)(t.connectorId,s),n={...e?Object(De.b)(e):Object(De.a)(),fields:null!==(a=t.fields)&&void 0!==a?a:null};o(n)}}),[o,p,s]);return Object(j.jsx)(Te.Form,{form:u},Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"m"},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"none",direction:"row"},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(Te.UseField,{path:"connectorId",config:f,component:Re.a,componentProps:{connectors:s,dataTestSubj:"caseConnectors",defaultValue:c,idAria:"caseConnectors",isLoading:n,handleChange:e=>{var s;const a=null===(s=t[e])||void 0===s?void 0:s.fields;u.reset({resetValues:!0,defaultValue:{connectorId:e,fields:a}})}}})))),Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"edit-connector-fields-form-flex-item"},Object(j.jsx)(Fe.a,{connector:g,key:d})),Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButton,{disabled:!h,color:"success","data-test-subj":"edit-connectors-submit",fill:!0,iconType:"save",onClick:O,size:"s"},z.db)),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonEmpty,{"data-test-subj":"edit-connectors-cancel",iconType:"cross",onClick:r,size:"s"},z.l))))))};Pe.displayName="ConnectorsForm";const Me=n.a.memo(Pe);var Le=s(255);const Ne=({connector:e,fields:t})=>{const{caseConnectorsRegistry:s}=Object(Le.a)();if(null==e||null==e.actionTypeId||".none"===e.actionTypeId)return null;const{previewComponent:o}=s.get(e.actionTypeId);return Object(j.jsx)(n.a.Fragment,null,null!=o?Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(i.EuiFlexGroup,{justifyContent:"center"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiLoadingSpinner,{size:"m"})))},Object(j.jsx)("div",{"data-test-subj":"connector-fields-preview"},Object(j.jsx)(o,{connector:e,fields:t,key:e.id}))):null)};Ne.displayName="ConnectorFieldsFormPreview";const He=Object(a.memo)(Ne),_e=n.a.memo((({caseData:e,caseConnectors:t,supportedActionConnectors:s,isLoading:n,onSubmit:o})=>{var r;const l=e.connector.fields,u=Object(de.e)(e.connector.id,s),d=!!u,[b,m]=Object(a.useState)(!1),{actions:p}=Object(c.c)(),{permissions:h}=Object(g.a)(),f=h.connectors&&p.read,O=Object(a.useCallback)((()=>m(!0)),[]),x=Object(a.useCallback)((()=>m(!1)),[]),y=Object(a.useCallback)((e=>{o(e),m(!1)}),[o]),E={...e.connector,name:Object(v.isEmpty)(null==u?void 0:u.name)?e.connector.name:null!==(r=null==u?void 0:u.name)&&void 0!==r?r:""},{errorsMsg:C,needsToBePushed:A,hasBeenPushed:S,isLoading:w,hasPushPermissions:I,hasErrorMessages:k,hasLicenseError:T,handlePushToService:F}=(({caseId:e,caseStatus:t,caseConnectors:s,connector:n,isValidConnector:i})=>{var o,r;const{permissions:c}=Object(g.a)(),{isLoading:l,mutateAsync:u}=Object(be.a)(),d=Object(V.a)(),{isLoading:b,data:m=null}=Object(je.a)(),j=null!=m&&!m.enabledInLicense,p=!(null===(o=s[n.id])||void 0===o||!o.push.needsToBePushed),h=!(null===(r=s[n.id])||void 0===r||!r.push.hasBeenPushed),f=Object(a.useCallback)((async()=>{null!=n.id&&"none"!==n.id&&null!=await u({caseId:e,connector:n})&&d()}),[e,n,u,d]),O=Object(a.useMemo)((()=>{const e=[];return c.update?j?[Object(me.f)()]:null==m||m.enabledInConfig?"none"!==n.id||b||j?i||b||j?t===M.g.closed?[Object(me.b)()]:e:[Object(me.d)()]:[Object(me.c)()]:[Object(me.e)()]:e}),[m,t,n.id,j,i,b,c.update]);return{errorsMsg:O,hasErrorMessages:O.length>0,needsToBePushed:p,hasBeenPushed:h,isLoading:l||b,hasPushPermissions:c.push,hasLicenseError:j,handlePushToService:f}})({connector:E,caseConnectors:t,caseId:e.id,caseStatus:e.status,isValidConnector:d}),R=w||C.length>0||!I||!d||!A;return Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"sidebar-connectors"},Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1,"data-test-subj":"case-view-edit-connector"},Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"connector-edit-header"},Object(j.jsx)(i.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,z.x))),!n&&!b&&I&&f?Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"connector-edit",grow:!1},Object(j.jsx)(i.EuiButtonIcon,{"data-test-subj":"connector-edit-button","aria-label":ue,iconType:"pencil",onClick:O})):null),Object(j.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(j.jsx)(i.EuiFlexGroup,{"data-test-subj":"edit-connectors",direction:"column",alignItems:"stretch"},!n&&!b&&k&&f&&Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"push-callouts"},Object(j.jsx)(we,{errorsMsg:C,hasLicenseError:T,hasConnectors:s.length>0,onEditClick:O})),!f&&Object(j.jsx)(i.EuiText,{"data-test-subj":"edit-connector-permissions-error-msg",size:"s"},Object(j.jsx)("span",null,z.Z)),f&&!b&&Object(j.jsx)(He,{connector:u,fields:l}),f&&b&&Object(j.jsx)(Me,{caseData:e,caseConnectors:t,supportedActionConnectors:s,isLoading:n,onCancel:x,onSubmit:y}),!k&&!n&&!b&&I&&f&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)("span",null,Object(j.jsx)(ge,{hasBeenPushed:S,disabled:R,isLoading:w,pushToService:F,errorsMsg:C,showTooltip:C.length>0||!A||!I,connectorName:E.name})))))}));_e.displayName="EditConnector";var ze=s(163);const Be=({status:e,onStatusChanged:t,isLoading:s})=>{const n=Object(a.useMemo)((()=>M.u.findIndex((t=>t===e))),[e]),o=Object(a.useMemo)((()=>(n+1)%M.u.length),[n]),r=Object(a.useCallback)((()=>{t(M.u[o])}),[o,t]);return Object(j.jsx)(i.EuiButton,{"data-test-subj":"case-view-status-action-button",iconType:ze.a[M.u[o]].icon,isLoading:s,onClick:r},ze.a[M.u[o]].button.label)};Be.displayName="StatusActionButton";const Ue=Object(a.memo)(Be);var $e=s(24);const Ve=A.i18n.translate("xpack.cases.caseView.editTagsLinkAria",{defaultMessage:"click to edit tags"});var Xe=s(177),Ge={name:"1ww443i",styles:"max-width:200px"};const We=({tags:e,color:t="default",gutterSize:s})=>Object(j.jsx)(n.a.Fragment,null,e.length>0&&Object(j.jsx)(i.EuiBadgeGroup,{gutterSize:s},e.map((e=>Object(j.jsx)(i.EuiBadge,{"data-test-subj":`tag-${e}`,color:t,key:e,css:Ge},e)))));We.displayName="Tags";const qe=Object(a.memo)(We),Qe={tags:s(230).a.tags},Ye=n.a.memo((({isLoading:e,onSubmit:t,tags:s})=>{const{permissions:n}=Object(g.a)(),o={tags:s},{form:r}=Object(Te.useForm)({defaultValue:o,options:{stripEmptyFields:!1},schema:Qe}),{submit:c}=r,[l,u]=Object(a.useState)(!1),{euiTheme:d}=Object(i.useEuiTheme)(),b=Object(a.useCallback)((async()=>{const{isValid:e,data:s}=await c();if(e&&s.tags){const e=s.tags.map((e=>e.trim()));t(e),r.reset({defaultValue:s}),u(!1)}}),[t,c]),{data:m=[]}=Object(Xe.a)(),p=m.map((e=>({label:e})));return Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1,"data-test-subj":"case-view-tag-list"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,z.kb))),e&&Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"tag-list-loading"}),!e&&n.update&&Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"tag-list-edit",grow:!1},Object(j.jsx)(i.EuiButtonIcon,{"data-test-subj":"tag-list-edit-button","aria-label":Ve,iconType:"pencil",onClick:()=>u(!0)}))),Object(j.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(j.jsx)(i.EuiFlexGroup,{css:Object(j.css)("width:100%;p{font-size:",d.size.m,";margin-block-end:unset;}",""),gutterSize:"none","data-test-subj":"case-tags"},0===s.length&&!l&&Object(j.jsx)("p",{"data-test-subj":"no-tags"},z.T),!l&&Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(qe,{tags:s,color:"hollow"})),l&&Object(j.jsx)(i.EuiFlexGroup,{css:Object(j.css)("&{max-width:100%;@media only screen and (max-width: ",d.breakpoint.m,"){flex-direction:row;}}",""),"data-test-subj":"edit-tags",direction:"column"},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(Te.Form,{form:r},Object(j.jsx)(Te.UseField,{path:"tags",component:$e.ComboBoxField,componentProps:{idAria:"caseTags","data-test-subj":"caseTags",euiFieldProps:{fullWidth:!0,placeholder:"",options:p,noSuggestions:!1,customOptionText:z.g}}}))),Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButton,{color:"success","data-test-subj":"edit-tags-submit",fill:!0,iconType:"save",onClick:b,size:"s"},z.db)),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonEmpty,{"data-test-subj":"edit-tags-cancel",iconType:"cross",onClick:()=>u(!1),size:"s"},z.l)))))))}));Ye.displayName="EditTags";var Ke=s(59),Je=s.n(Ke),Ze=s(91),et=s(160),tt=s(171),st=s(83);const{emptyField:at,maxLengthField:nt}=st.fieldValidators,it={comment:{type:Te.FIELD_TYPES.TEXTAREA,validations:[{validator:at(z.H)},{validator:nt({length:Y.sb,message:z.O("comment",Y.sb)})}]}};var ot=s(229);const rt={comment:""};var ct={name:"1qms9jn",styles:"position:absolute;top:50%;left:50%"};const lt=n.a.memo(Object(a.forwardRef)((({id:e,caseId:t,onCommentPosted:s,onCommentSaving:n,showLoading:o=!0,statusActionButton:r},c)=>{const l=Object(a.useRef)(null),[u,d]=Object(a.useState)(!1),{permissions:b,owner:m}=Object(g.a)(),{isLoading:p,mutate:h}=Object(Ze.a)(),f=Object(tt.a)({appId:m[0],caseId:t,commentId:e}),{form:O}=Object(Te.useForm)({defaultValue:rt,options:{stripEmptyFields:!1},schema:it}),x="comment",{setFieldValue:v,reset:y,submit:E}=O,[{comment:C}]=Object(Te.useFormData)({form:O,watch:[x]}),A=Object(a.useCallback)((e=>{const t=`> ${e.replace(new RegExp("\r?\n","g"),"\n> ")} \n\n`;v(x,`${C}${C.length>0?"\n\n":""}${t}`),d(!0)}),[C,v]),S=Object(a.useCallback)((e=>{v(x,e)}),[v]);Object(a.useImperativeHandle)(c,(()=>({addQuote:A,setComment:S,editor:l.current})));const w=Object(a.useCallback)((async()=>{const{isValid:e,data:a}=await E();e&&(null!=n&&n(),h({caseId:t,caseOwner:m[0],attachments:[{...a,type:M.a.user}]},{onSuccess:e=>{s(e)}}),y({defaultValue:{}})),Object(de.n)(f)}),[E,n,h,t,m,s,y,f]);Object(a.useEffect)((()=>{var e,t;Object(ie.isEmpty)(C)||null===(e=l.current)||void 0===e||null===(t=e.textarea)||void 0===t||t.focus(),u&&d(!1)}),[u]);const I=p||!(null!=C&&C.trim().length)||C.trim().length>Y.sb;return Object(j.jsx)("span",{id:"add-comment-permLink"},p&&o&&Object(j.jsx)(i.EuiLoadingSpinner,{css:ct,"data-test-subj":"loading-spinner",size:"xl"}),b.create&&Object(j.jsx)(Te.Form,{form:O},Object(j.jsx)(Te.UseField,{path:x,component:et.b,componentProps:{ref:l,id:e,draftStorageKey:f,idAria:"caseComment",isDisabled:p,dataTestSubj:"add-comment",placeholder:z.e,bottomRightContent:Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"flexEnd",responsive:!1,wrap:!0},r&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},r),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButton,{"data-test-subj":"submit-comment",fill:!0,iconType:"plusInCircle",isDisabled:I,isLoading:p,onClick:w},z.d)))}}),Object(j.jsx)(ot.a,{fieldName:"comment"})))})));lt.displayName="AddComment";const ut=Object.keys(Object(ie.omit)(M.s,["delete_case"])),dt="newComment";var bt=s(201);const mt=()=>{const{detailName:e}=Object(m.k)(),{clearDraftComment:t,draftComment:s,hasIncomingLensState:n,openLensModal:i}=Object(bt.a)(),c=Object(a.useRef)(0),{mutate:d}=(()=>{const{showErrorToast:e}=Object(F.a)(),t=Object(V.a)(),s=Object(g.a)().owner[0];return Object(o.useMutation)((({caseId:e,commentId:t,commentUpdate:a,version:n})=>Object(l.p)({caseId:e,commentId:t,commentUpdate:a,version:n,owner:s})),{mutationKey:u.d.updateComment,onSuccess:()=>{t()},onError:t=>{e(t,{title:r.e})}})})(),{mutate:b}=(()=>{const{showErrorToast:e,showSuccessToast:t}=Object(F.a)(),s=Object(V.a)();return Object(o.useMutation)((({caseId:e,commentId:t})=>Object(l.c)({caseId:e,commentId:t})),{mutationKey:u.d.deleteComment,onSuccess:(e,{successToasterTitle:a})=>{t(a),s()},onError:t=>{e(t,{title:r.e})}})})(),[j,p]=Object(a.useState)(""),[h,f]=Object(a.useState)([]),[O,x]=Object(a.useState)([]),v=Object(V.a)(),y=Object(a.useRef)({}),E=Object(a.useCallback)((e=>{t(),x((t=>t.includes(e)?t.filter((t=>e!==t)):t.concat(e)))}),[t]),C=e=>{f((t=>t.filter((t=>t!==e))))},A=Object(a.useCallback)((({id:t,version:s},a)=>{var n;n=t,f((e=>[...e,n])),d({caseId:e,commentId:t,commentUpdate:a,version:s},{onSuccess:()=>{C(t)},onError:()=>{C(t)}})}),[e,d]),S=Object(a.useCallback)(((t,s)=>{b({caseId:e,commentId:t,successToasterTitle:s})}),[e,b]),w=Object(a.useCallback)((e=>{const t=document.getElementById(`${e}-permLink`);if(null!=t){const s=-120,a=t.getBoundingClientRect().top+window.pageYOffset+s;window.scrollTo({top:a,behavior:"smooth"}),"add-comment"===e&&t.getElementsByTagName("textarea")[0].focus()}window.clearTimeout(c.current),p(e),c.current=window.setTimeout((()=>{p(""),window.clearTimeout(c.current)}),2400)}),[c]),I=Object(a.useCallback)((e=>{const t=null==y?void 0:y.current[dt];(e=>null!=(null==e?void 0:e.addQuote))(t)&&t.addQuote(e),w("add-comment")}),[w]);return Object(a.useEffect)((()=>{if(null!=s&&s.commentId&&"description"!==(null==s?void 0:s.commentId)){var e,a;x((e=>dt===(null==s?void 0:s.commentId)||e.includes(null==s?void 0:s.commentId)?e:[null==s?void 0:s.commentId]));const o=null==y||null===(e=y.current)||void 0===e?void 0:e[s.commentId];(e=>null!=(null==e?void 0:e.setComment))(o)&&null!==(a=o.editor)&&void 0!==a&&a.textarea&&(o.setComment(s.comment),n?i({editorRef:o.editor}):t())}}),[t,s,n,i]),{loadingCommentIds:h,selectedOutlineCommentId:j,manageMarkdownEditIds:O,commentRefs:y,handleManageMarkdownEditId:E,handleOutlineComment:w,handleSaveComment:A,handleDeleteComment:S,handleManageQuote:I,handleUpdate:v}};var jt=s(156),pt=s(196);const gt=({userInfo:e,boldName:t=!1})=>{const s=Object(pt.a)(null==e?void 0:e.user);return Object(j.jsx)(i.EuiText,{size:"s",className:"eui-textBreakWord","data-test-subj":"user-profile-username"},t?Object(j.jsx)("strong",{"data-test-subj":"user-profile-username-bolded"},s):Object(j.jsx)(n.a.Fragment,null,s))};gt.displayName="Username";const ht=n.a.memo(gt);var ft=s(216);const Ot=({userInfo:e})=>Object(j.jsx)(jt.a,{userInfo:e},Object(j.jsx)(ft.a,{size:"m",userInfo:e}));Ot.displayName="HoverableAvatar";const xt=n.a.memo(Ot);var vt=s(113),yt=s(175),Et=s(132);const Ct=({createdAt:e,updatedAt:t})=>Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(yt.a,{date:new Date(e)},Object(j.jsx)(vt.FormattedRelative,{"data-test-subj":"user-action-title-creation-relative-time",value:e})),t&&Object(j.jsx)(i.EuiTextColor,{color:"subdued"}," (",Et.z," ",Object(j.jsx)(yt.a,{date:new Date(t)},Object(j.jsx)(vt.FormattedRelative,{"data-test-subj":"user-action-title-edited-relative-time",value:t})),")"));Ct.displayName="UserActionTimestamp";const At=Object(a.memo)(Ct);var St=s(277),wt=s.n(St);const It=({id:e})=>{const{getCaseViewUrl:t}=Object(m.j)(),{detailName:s}=Object(m.k)(),n=Object(a.useCallback)((()=>{wt()(t({detailName:s,commentId:e},!0))}),[s,e,t]);return Object(j.jsx)(i.EuiToolTip,{position:"top",content:Object(j.jsx)("p",null,Et.r)},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":Et.r,"data-test-subj":`copy-link-${e}`,onClick:n,iconType:"link",id:`${e}-permLink`}))};It.displayName="UserActionCopyLink";const kt=Object(a.memo)(It),Tt=({id:e,outlineComment:t})=>{const s=Object(a.useCallback)((()=>{t(e)}),[e,t]);return Object(j.jsx)(i.EuiToolTip,{position:"top",content:Object(j.jsx)("p",null,Et.G)},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":Et.G,"data-test-subj":`move-to-link-${e}`,onClick:s,iconType:"arrowUp"}))};Tt.displayName="UserActionMoveToReference";const Ft=Object(a.memo)(Tt);var Rt=s(193);const Dt=({userInfo:e,boldName:t})=>Object(j.jsx)(jt.a,{userInfo:e},Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Rt.a,{userInfo:e})),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(ht,{userInfo:e,boldName:t}))))));Dt.displayName="HoverableUserWithAvatar";const Pt=n.a.memo(Dt);var Mt=s(88);const Lt=({user:e,userProfiles:t,boldName:s=!0})=>{var a;const{userInfo:n}=null!==(a=Object(Mt.b)(e,t))&&void 0!==a?a:{userInfo:void 0};return Object(j.jsx)(Pt,{userInfo:n,boldName:s})};Lt.displayName="HoverableUserResolver";const Nt=n.a.memo(Lt),Ht=e=>{const t={assignees:Et.g,comment:Et.p,connector:Et.q,description:Et.x,pushed:Et.J,tags:Et.Y,title:Et.ab,status:Et.W,settings:Et.R,severity:Et.S,create_case:Et.j,delete_case:Et.i,category:Et.l,customFields:Et.t};switch(e){case"create_case":case"delete_case":case"pushed":return t[e];default:return Et.hb(t[e])}},_t=(e,t)=>e===M.r.update&&null!=t;n.a.memo((({userAction:e,handleOutlineComment:t})=>Object(j.jsx)(i.EuiFlexGroup,{responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(kt,{id:e.id})),_t(e.action,e.commentId)&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Ft,{id:e.commentId,outlineComment:t}))))).displayName="CommentListActions";const zt=({userProfiles:e,userAction:t,label:s,icon:a,handleOutlineComment:n})=>({build:()=>[{username:Object(j.jsx)(Nt,{user:t.createdBy,userProfiles:e}),event:s,"data-test-subj":`${t.type}-${t.action}-action-${t.id}`,timestamp:Object(j.jsx)(At,{createdAt:t.createdAt}),timelineAvatar:a,timelineAvatarAriaLabel:Ht(t.type),actions:Object(j.jsx)(i.EuiFlexGroup,{responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(kt,{id:t.id})),_t(t.action,t.commentId)&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Ft,{id:t.commentId,outlineComment:n})))}]});var Bt=s(225);const Ut=({children:e,index:t,listSize:s})=>Vt(t,s)?Object(j.jsx)(n.a.Fragment,null,Et.e," ",e):$t(t,s)?Object(j.jsx)(n.a.Fragment,null,e,","):e;Ut.displayName="FormatListItem";const $t=(e,t)=>t>2&&e!==t-1,Vt=(e,t)=>t>1&&e===t-1,Xt=({index:e,numOfAssigness:t})=>Object(j.jsx)(Ut,{index:e,listSize:t},Object(j.jsx)(n.a.Fragment,null,Et.Z));Xt.displayName="Themselves";const Gt=({assignee:e,index:t,numOfAssigness:s})=>{var a;return Object(j.jsx)(Ut,{index:t,listSize:s},Object(j.jsx)(jt.a,{userInfo:e.profile},Object(j.jsx)("strong",null,Object(pt.a)(null===(a=e.profile)||void 0===a?void 0:a.user))))};Gt.displayName="Assignee";const Wt=({assignees:e,createdByUser:t})=>Object(j.jsx)(n.a.Fragment,null,e.length>0&&Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",wrap:!0},e.map(((s,a)=>{const n=Object(Bt.a)(s);return Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":`ua-assignee-${n}`,grow:!1,key:s.uid},Object(j.jsx)(i.EuiText,{size:"s",className:"eui-textBreakWord"},Qt(s,t)?Object(j.jsx)(Xt,{index:a,numOfAssigness:e.length}):Object(j.jsx)(Gt,{assignee:s,index:a,numOfAssigness:e.length})))}))));Wt.displayName="Assignees";const qt=Object(a.memo)(Wt),Qt=(e,t)=>{var s;return e.uid===(null==t?void 0:t.profileUid)||(null==e||null===(s=e.profile)||void 0===s?void 0:s.user.username)===t.username},Yt=A.i18n.translate("xpack.cases.userActions.attachmentNotRegisteredErrorMsg",{defaultMessage:"Attachment type is not registered"}),Kt=A.i18n.translate("xpack.cases.userActions.defaultEventAttachmentTitle",{defaultMessage:"added an attachment of type"}),Jt=A.i18n.translate("xpack.cases.userActions.attachment",{defaultMessage:"Attachment"}),Zt=A.i18n.translate("xpack.cases.userActions.comment.unsavedDraftComment",{defaultMessage:"You have unsaved edits for this comment"}),es=e=>A.i18n.translate("xpack.cases.userActions.attachments.alerts.successToasterTitle",{defaultMessage:"Deleted {totalAlerts, plural, =1 {one} other {{totalAlerts}}} {totalAlerts, plural, =1 {alert} other {alerts}}",values:{totalAlerts:e}}),ts=A.i18n.translate("xpack.cases.userActions.attachments.comment.successToasterTitle",{defaultMessage:"Deleted comment"}),ss=A.i18n.translate("xpack.cases.userActions.attachments.registeredAttachment.successToasterTitle",{defaultMessage:"Deleted attachment"});var as=s(118),ns=s.n(as);const{emptyField:is,maxLengthField:os}=st.fieldValidators,rs={content:{type:Te.FIELD_TYPES.TEXTAREA,validations:[{validator:is(z.H)},{validator:os({length:Y.sb,message:z.O("comment",Y.sb)})}]}},cs=Object(a.forwardRef)((({id:e,content:t,caseId:s,isEditable:n,onChangeEditable:i,onSaveContent:o},r)=>{const c=Object(a.useRef)();return n?Object(j.jsx)(et.a,{id:e,content:t,caseId:s,editorRef:c,onChangeEditable:i,onSaveContent:o,ref:r,fieldName:"content",formSchema:rs}):Object(j.jsx)(et.d,{content:t})}));cs.displayName="UserActionMarkdownComponent";const ls=n.a.memo(cs),us=({id:e,withCopyLinkAction:t=!0,children:s})=>Object(j.jsx)(i.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"m"},t?Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(kt,{id:e})):null,s);us.displayName="UserActionContentToolbar";const ds=Object(a.memo)(us),bs=({user:e,userProfiles:t,boldName:s=!0})=>{var a;const{userInfo:n}=null!==(a=Object(Mt.b)(e,t))&&void 0!==a?a:{userInfo:void 0};return Object(j.jsx)(jt.a,{userInfo:n},Object(j.jsx)(ht,{userInfo:n,boldName:s}))};bs.displayName="HoverableUsernameResolver";const ms=n.a.memo(bs),js=({user:e,userProfiles:t})=>{var s;const{userInfo:a}=null!==(s=Object(Mt.b)(e,t))&&void 0!==s?s:{userInfo:void 0};return Object(j.jsx)(xt,{userInfo:a})};js.displayName="HoverableUserResolver";const ps=n.a.memo(js);var gs=s(98),hs=s(279),fs=s.n(hs),Os=(s(280),s(330)),xs=s.n(Os);const vs="lens",ys=function(){const e=this.Parser,t=e.prototype.blockTokenizers,s=e.prototype.blockMethods;t.lens=function(e,t,s){if(!1===t.startsWith(`!{${vs}`))return!0;const a=t[6];if("{"!==a&&"}"!==a)return!1;if(s)return!0;let n=`!{${vs}`,i={};if("{"===a){let s="",a=0;for(let e=6;e<t.length;e++){const n=t[e];if("{"===n)a++,s+=n;else if("}"===n){if(a--,-1===a)break;s+=n}else s+=n}n+=s;try{i=JSON.parse(s)}catch(t){const s=e.now();this.file.fail(`Unable to parse lens JSON configuration: ${t}`,{line:s.line,column:s.column+6})}}return n+="}",e(n)({type:vs,...i})},s.splice(s.indexOf("text"),0,vs)},Es=A.i18n.translate("xpack.cases.markdownEditor.plugins.timeline.noParenthesesErrorMsg",{defaultMessage:"Expected left parentheses"}),Cs="timeline",As="[",Ss=function(){const e=this.Parser,t=e.prototype.blockTokenizers,s=e.prototype.blockMethods,a=function(e,t,s){if(!1===t.startsWith(As)||!0===t.startsWith(As)&&!t.includes("timelines?timeline=(id"))return!1;let a=0;if(t[a]!==As)return!1;if(s)return!0;function n(e,s){if(t[a]!==e)throw new Error(Es);a++;let n="",i=0;for(;a<t.length;a++){const o=t[a];if(o===s&&0===i)return a++,n;o===s?i--:o===e&&i++,n+=o}return""}const i=`[${n(As,"]")}](${n("(",")")})`;return e(i)({type:Cs,match:i})};a.locator=(e,t)=>e.indexOf(As,t),t.timeline=a,s.splice(s.indexOf("url"),0,Cs)};var ws=s(52);var Is=s(159);const ks=({isLoading:e,propertyActions:t,customDataTestSubj:s="user-action"})=>0===t.length?null:Object(j.jsx)(i.EuiFlexItem,{grow:!1},e?Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"user-action-title-loading"}):Object(j.jsx)(k,{propertyActions:t,customDataTestSubj:s}));ks.displayName="UserActionPropertyActions";const Ts=n.a.memo(ks);var Fs=s(158),Rs=s(157);const Ds=({isLoading:e,commentContent:t,onEdit:s,onDelete:i,onQuote:o})=>{const{permissions:r}=Object(g.a)(),{showDeletionModal:l,onModalOpen:u,onConfirm:d,onCancel:b}=Object(Rs.a)({onDelete:i}),{canUseEditor:m,actionConfig:p}=(({comment:e})=>{var t,s;const n=(e=>xs()().use([[fs.a,{}],ys,Ss]).parse(e))(e),i=(e=>null!=e&&e.length?Object(ie.filter)(e,{type:vs}):[])(null!==(t=null==n?void 0:n.children)&&void 0!==t?t:[]),{lens:{navigateToPrefilledEditor:o,canUseEditor:r}}=Object(c.g)().services,l=r(),u=Object(a.useCallback)((()=>{o({id:"",timeRange:i[0].timeRange,attributes:i[0].attributes},{openInNewTab:!0})}),[i,o]);if(!i.length||null==(null==i||null===(s=i[0])||void 0===s?void 0:s.attributes))return{canUseEditor:l,actionConfig:null};const d=i[0].attributes;return Object(gs.isOfAggregateQueryType)(d.state.query)?{canUseEditor:l,actionConfig:null}:{canUseEditor:l,actionConfig:{type:C.a.BUTTON,iconType:"lensApp",label:ws.b,onClick:u}}})({comment:null!=t?t:""}),h=Object(a.useMemo)((()=>{const e=r.update,t=r.delete,a=r.create,n=r.update&&m&&p;return[...e?[{type:C.a.BUTTON,iconType:"pencil",label:Is.f,onClick:s}]:[],...a?[{type:C.a.BUTTON,iconType:"quote",label:Is.g,onClick:o}]:[],...t?[{type:C.a.BUTTON,iconType:"trash",color:"danger",label:Is.d,onClick:u}]:[],...n?[p]:[]]}),[r.update,r.delete,r.create,m,p,s,u,o]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(Ts,{isLoading:e,propertyActions:h}),l?Object(j.jsx)(Fs.a,{title:Is.e,confirmButtonText:Is.b,onCancel:b,onConfirm:d}):null)};Ds.displayName="UserCommentPropertyActions";const Ps=n.a.memo(Ds),Ms=e=>e?Object(j.css)("border-top:",e.border.thin,";padding:",e.size.s,";",""):Object(j.css)("",""),Ls=(e="",t,s,a)=>{const n=Object(tt.a)({appId:e,caseId:t,commentId:s}),i=sessionStorage.getItem(n);return Boolean(i&&i!==a)};var Ns=s(73),Hs=s(142);const _s=Object(a.memo)((({onRuleDetailsClick:e,getRuleDetailsHref:t,ruleId:s,ruleName:o,loadingAlertData:r,actionId:c})=>{const l=Object(a.useCallback)((t=>{t.preventDefault(),e&&e(s,t)}),[s,e]),u=null==t?void 0:t(s),d=null!=o?o:Et.eb;return r?Object(j.jsx)(i.EuiLoadingSpinner,{size:"m","data-test-subj":`alert-loading-spinner-${c}`}):Object(ie.isEmpty)(s)||null==u?Object(j.jsx)(n.a.Fragment,null,d):Object(j.jsx)(Hs.c,{onClick:l,href:u,"data-test-subj":`alert-rule-link-${c}`},d)}));_s.displayName="RuleLink";const zs=({actionId:e,getRuleDetailsHref:t,loadingAlertData:s=!1,onRuleDetailsClick:a,ruleId:n,ruleName:i})=>Object(j.jsx)("span",{"data-test-subj":`single-alert-user-action-${e}`},`${Et.c} `,Object(j.jsx)(_s,{actionId:e,ruleId:n,ruleName:i,getRuleDetailsHref:t,onRuleDetailsClick:a,loadingAlertData:s}));zs.displayName="SingleAlertCommentEvent";const Bs=Object(a.memo)(zs),Us=({actionId:e,getRuleDetailsHref:t,loadingAlertData:s=!1,onRuleDetailsClick:a,ruleId:n,ruleName:i,totalAlerts:o})=>Object(j.jsx)("span",{"data-test-subj":`multiple-alerts-user-action-${e}`},`${Et.H(o)}`," ",Object(j.jsx)(_s,{actionId:e,ruleId:n,ruleName:i,getRuleDetailsHref:t,onRuleDetailsClick:a,loadingAlertData:s}));Us.displayName="MultipleAlertsCommentEvent";const $s=Object(a.memo)(Us),Vs=({id:e,alertId:t,index:s,onShowAlertDetails:n})=>{const{navigateToCaseView:o}=Object(m.j)(),{detailName:r}=Object(m.k)(),c=Object(a.useCallback)((()=>{n?n(t,s):o({detailName:r,tabId:h.a.ALERTS})}),[t,r,s,o,n]);return Object(j.jsx)(i.EuiToolTip,{position:"top",content:Object(j.jsx)("p",null,Et.U)},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":Et.U,"data-test-subj":`comment-action-show-alert-${e}`,onClick:c,iconType:"arrowRight",id:`${e}-show-alert`}))};Vs.displayName="UserActionShowAlert";const Xs=Object(a.memo)(Vs),Gs=()=>{const{navigateToCaseView:e}=Object(m.j)(),{detailName:t}=Object(m.k)(),s=Object(a.useCallback)((()=>{e({detailName:t,tabId:h.a.ALERTS})}),[e,t]);return Object(j.jsx)(i.EuiToolTip,{position:"top",content:Object(j.jsx)("p",null,Et.T)},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":Et.T,"data-test-subj":`comment-action-show-alerts-${t}`,onClick:s,iconType:"inspect",id:`${t}-show-alerts`}))};Gs.displayName="ShowAlertTableLink";const Ws=({isLoading:e,totalAlerts:t,onDelete:s})=>{const{permissions:i}=Object(g.a)(),{showDeletionModal:o,onModalOpen:r,onConfirm:c,onCancel:l}=Object(Rs.a)({onDelete:s}),u=Object(a.useMemo)((()=>[...i.delete?[{type:C.a.BUTTON,color:"danger",disabled:!1,iconType:"minusInCircle",label:Is.i(t),onClick:r}]:[]]),[i.delete,t,r]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(Ts,{isLoading:e,propertyActions:u}),o?Object(j.jsx)(Fs.a,{title:Is.i(t),confirmButtonText:Is.h,onCancel:l,onConfirm:c}):null)};Ws.displayName="AlertPropertyActions";const qs=n.a.memo(Ws),Qs=e=>({build:()=>{const{comment:t}=e;return 1===(Array.isArray(t.alertId)?t.alertId:[t.alertId]).length?(({userAction:e,userProfiles:t,comment:s,alertData:a,loadingAlertData:n,loadingCommentIds:o,getRuleDetailsHref:r,onRuleDetailsClick:c,onShowAlertDetails:l,handleDeleteComment:u})=>{const d=ea(s.alertId),b=ea(s.index);if(!d||!b)return[];const m=a[d],p=Ks(s,m),g=Js(s,m);return[{username:Object(j.jsx)(Nt,{user:e.createdBy,userProfiles:t}),eventColor:"subdued",event:Object(j.jsx)(Bs,{actionId:e.id,getRuleDetailsHref:r,loadingAlertData:n,onRuleDetailsClick:c,ruleId:p,ruleName:g}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.id}`,timestamp:Object(j.jsx)(At,{createdAt:e.createdAt}),timelineAvatar:"bell",actions:Object(j.jsx)(ds,{id:s.id},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Xs,{id:e.id,alertId:d,index:b,onShowAlertDetails:l})),Object(j.jsx)(qs,{onDelete:()=>u(s.id,es(1)),isLoading:o.includes(s.id),totalAlerts:1}))}]})(e):(({userAction:e,userProfiles:t,comment:s,alertData:a,loadingAlertData:n,loadingCommentIds:o,getRuleDetailsHref:r,onRuleDetailsClick:c,handleDeleteComment:l})=>{if(!Array.isArray(s.alertId))return[];const u=s.alertId.length,{ruleId:d,ruleName:b}=function(e,t){const s=ea(e.alertId);if(!s)return{ruleId:null,ruleName:null};const a=t[s];return{ruleId:Ks(e,a),ruleName:Js(e,a)}}(s,a);return[{username:Object(j.jsx)(Nt,{user:e.createdBy,userProfiles:t}),eventColor:"subdued",event:Object(j.jsx)($s,{actionId:e.id,loadingAlertData:n,totalAlerts:u,ruleId:d,ruleName:b,getRuleDetailsHref:r,onRuleDetailsClick:c}),"data-test-subj":`user-action-alert-${e.type}-${e.action}-action-${e.id}`,timestamp:Object(j.jsx)(At,{createdAt:e.createdAt}),timelineAvatar:"bell",actions:Object(j.jsx)(ds,{id:s.id},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Gs,null)),Object(j.jsx)(qs,{onDelete:()=>l(s.id,es(u)),isLoading:o.includes(s.id),totalAlerts:u}))}]})(e)}}),Ys=e=>Array.isArray(e)?e[0]:null!=e?e:null,Ks=(e,t)=>{var s;return Zs({commentRuleField:null==e||null===(s=e.rule)||void 0===s?void 0:s.id,alertData:t,signalRuleFieldPath:"signal.rule.id",kibanaAlertFieldPath:Ns.y})},Js=(e,t)=>{var s;return Zs({commentRuleField:null==e||null===(s=e.rule)||void 0===s?void 0:s.name,alertData:t,signalRuleFieldPath:"signal.rule.name",kibanaAlertFieldPath:Ns.r})},Zs=({commentRuleField:e,alertData:t,signalRuleFieldPath:s,kibanaAlertFieldPath:a})=>{var n,i;return null!==(n=null!==(i=ea(e))&&void 0!==i?i:ea(Object(ie.get)(t,s)))&&void 0!==n?n:ea(Object(ie.get)(t,a))};function ea(e){const t=Ys(e);return null==t||Object(ie.isEmpty)(t)?null:t}const ta=({type:e,endpoints:t,href:s,onClick:i})=>{const o=s?s(t[0].endpointId):"",r=Object(a.useCallback)((e=>{e.preventDefault(),i&&i(t[0].endpointId,e)}),[i,t]);return Object(j.jsx)(n.a.Fragment,null,"isolate"===e?`${Et.E} `:`${Et.L} `,Object(j.jsx)(Hs.c,{onClick:r,href:o,"data-test-subj":`actions-link-${t[0].endpointId}`},t[0].hostname),t.length>1&&Et.I(t.length-1))};ta.displayName="HostIsolationCommentEvent";const sa=Object(a.memo)(ta),aa=({isLoading:e,registeredAttachmentActions:t,onDelete:s,hideDefaultActions:i})=>{const{permissions:o}=Object(g.a)(),{showDeletionModal:r,onModalOpen:c,onConfirm:l,onCancel:u}=Object(Rs.a)({onDelete:s}),d=Object(a.useMemo)((()=>[...o.delete&&!i?[{type:C.a.BUTTON,disabled:!1,iconType:"trash",color:"danger",label:Is.c,onClick:c}]:[],...t]),[o.delete,i,c,t]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(Ts,{isLoading:e,propertyActions:d}),r?Object(j.jsx)(Fs.a,{title:Is.c,confirmButtonText:Is.b,onCancel:u,onConfirm:l}):null)};aa.displayName="RegisteredAttachmentsPropertyActions";const na=n.a.memo(aa),ia=Object(ie.memoize)((e=>{let t;return(e,s)=>{if(e.children)return t=t?n.a.cloneElement(t,s):n.a.createElement(e.children,s),Object(j.jsx)(a.Suspense,{fallback:Object(j.jsx)(i.EuiLoadingSpinner,null)},t)}})),oa=({userAction:e,userProfiles:t,comment:s,registry:a,caseData:o,isLoading:r,getId:c,getAttachmentViewProps:l,handleDeleteComment:u})=>({build:()=>{var d,b;const m=c();if(!a.has(m))return[{username:Object(j.jsx)(Nt,{user:s.createdBy,userProfiles:t}),event:Object(j.jsx)(n.a.Fragment,null,`${Kt} `,Object(j.jsx)(i.EuiCode,null,m)),className:`comment-${s.type}-not-found`,"data-test-subj":`comment-${s.type}-not-found`,timestamp:Object(j.jsx)(At,{createdAt:e.createdAt}),children:Object(j.jsx)(i.EuiCallOut,{title:Yt,color:"danger",iconType:"warning"})}];const p=a.get(m),g={...l(),attachmentId:s.id,caseData:{id:o.id,title:o.title}},h=p.getAttachmentViewObject(g),f=ia(e.id),O=null!==(d=null===(b=h.getActions)||void 0===b?void 0:b.call(h,g))&&void 0!==d?d:[],[x,v]=Object(ie.partition)(O,"isPrimary"),y=x.slice(0,2),E=x.slice(2,x.length);return[{username:Object(j.jsx)(Nt,{user:s.createdBy,userProfiles:t}),className:`comment-${s.type}-attachment-${m}`,event:h.event,"data-test-subj":`comment-${s.type}-${m}`,timestamp:Object(j.jsx)(At,{createdAt:e.createdAt}),timelineAvatar:h.timelineAvatar,actions:Object(j.jsx)(ds,{id:s.id},y.map((e=>{var t;return e.type===C.a.BUTTON&&Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":`attachment-${m}-${s.id}`,key:`attachment-${m}-${s.id}`},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":e.label,iconType:e.iconType,color:null!==(t=e.color)&&void 0!==t?t:"text",onClick:e.onClick,"data-test-subj":`attachment-${m}-${s.id}-${e.iconType}`,key:`attachment-${m}-${s.id}-${e.iconType}`}))||e.type===C.a.CUSTOM&&e.render()})),Object(j.jsx)(na,{isLoading:r,onDelete:()=>u(s.id,ss),registeredAttachmentActions:[...E,...v],hideDefaultActions:!!h.hideDefaultActions})),children:f(h,g)}]}}),ra=({caseData:e,registry:t,getId:s,getAttachmentProps:a})=>{var n,i;const o=`${Et.M} ${Jt.toLowerCase()}`,r=s();if(!t.has(r))return o;const c={...a(),caseData:{id:e.id,title:e.title}},l=t.get(r),u=null!==(n=null===(i=l.getAttachmentRemovalObject)||void 0===i?void 0:i.call(l,c).event)&&void 0!==n?n:null;return null!=u?u:o},ca=(e,t)=>{if(!t)return;const s=new Date(e),a=new Date(t);return isNaN(s.getTime())||isNaN(a.getTime())?void 0:{userActionDate:s,connectorDate:a}};function la(e){return e.payload.settings.syncAlerts?`${Et.C} ${Et.X}`:`${Et.y} ${Et.X}`}var ua=s(136),da=s(150);const ba={create_case:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>`${Et.s.toLowerCase()} "${e.payload.title}"`)(e);return zt({userAction:e,userProfiles:t,handleOutlineComment:s,label:a,icon:"dot"}).build()}}),connector:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>{const t=e.payload.connector;return null==t?"":t.id===Y.Pb?Et.N:Et.Q(t.name)})(e);return zt({userProfiles:t,userAction:e,handleOutlineComment:s,label:a,icon:"dot"}).build()}}),tags:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>{var t;const s=null!==(t=e.payload.tags)&&void 0!==t?t:[];return Object(j.jsx)(i.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"ua-tags-label",grow:!1},e.action===M.r.add&&Et.a,e.action===M.r.delete&&Et.M," ",Et.Y.toLowerCase()),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(qe,{tags:s,gutterSize:"xs",color:"hollow"})))})(e);return zt({userAction:e,userProfiles:t,handleOutlineComment:s,label:a,icon:"tag"}).build()}}),title:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>`${Et.m.toLowerCase()} ${Et.k.toLowerCase()} ${Et.bb} "${e.payload.title}"`)(e);return zt({userAction:e,userProfiles:t,handleOutlineComment:s,label:a,icon:"dot"}).build()}}),status:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>{var t;const s=null!==(t=e.payload.status)&&void 0!==t?t:"";return(e=>Object.prototype.hasOwnProperty.call(L.b,e))(s)?Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.id}-user-action-status-title`,responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Et.F),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(P.a,{status:s}))):Object(j.jsx)(n.a.Fragment,null)})(e);return zt({userAction:e,userProfiles:t,handleOutlineComment:s,label:a,icon:"folderClosed"}).build()}}),severity:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>{const t=e.payload.severity,s=da.a[t];return void 0===s?null:Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.id}-user-action-severity-title`,responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},ua.l),Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":`${e.id}-user-action-severity-title-${t}`},Object(j.jsx)(i.EuiHealth,{color:s.color},s.label)))})(e);return zt({userProfiles:t,userAction:e,handleOutlineComment:s,label:a,icon:"dot"}).build()}}),pushed:({userAction:e,userProfiles:t,caseConnectors:s,handleOutlineComment:a})=>({build:()=>{var n;const o=e,r=o.payload.externalService.connectorId,c=s[r];if(!c)return[];const l=((e,t)=>{const s=ca(e,t);return!s||s.userActionDate.getTime()<=s.connectorDate.getTime()})(e.createdAt,null===(n=c.push.details)||void 0===n?void 0:n.oldestUserActionPushDate),u=(({userAction:e,connectorInfo:t})=>{var s;const a=[],n=((e,t)=>{const s=ca(e,t);return!!s&&s.userActionDate.getTime()>=s.connectorDate.getTime()})(e.createdAt,null===(s=t.push.details)||void 0===s?void 0:s.latestUserActionPushDate),i=e.action===M.r.push_to_service&&n,o=i&&t.push.needsToBePushed;return i&&a.push({username:"",event:Et.d(`${t.name}`),timelineAvatar:"sortUp","data-test-subj":"top-footer"}),o&&a.push({username:"",event:Et.P(`${t.name}`),timelineAvatar:"sortDown","data-test-subj":"bottom-footer"}),a})({userAction:o,connectorInfo:c}),d=((e,t)=>{const s=e.payload.externalService;return Object(j.jsx)(i.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs","data-test-subj":"pushed-service-label-title",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"pushed-label"},`${t?Et.J:Et.gb} ${null==s?void 0:s.connectorName}`),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiLink,{"data-test-subj":"pushed-value",href:null==s?void 0:s.externalUrl,target:"_blank"},null==s?void 0:s.externalTitle)))})(o,l);return[...zt({userProfiles:t,userAction:e,handleOutlineComment:a,label:d,icon:"dot"}).build(),...u]}}),comment:({appId:e,caseData:t,casesConfiguration:s,userProfiles:a,externalReferenceAttachmentTypeRegistry:o,persistableStateAttachmentTypeRegistry:r,userAction:c,commentRefs:l,manageMarkdownEditIds:u,selectedOutlineCommentId:d,loadingCommentIds:b,loadingAlertData:m,alertData:p,euiTheme:g,getRuleDetailsHref:h,onRuleDetailsClick:f,onShowAlertDetails:O,handleManageMarkdownEditId:x,handleSaveComment:v,handleDeleteComment:y,handleManageQuote:E,handleOutlineComment:C,actionsNavigation:S,caseConnectors:w})=>({build:()=>{const I=c;if(I.action===M.r.delete)return(({userAction:e,userProfiles:t,caseData:s,externalReferenceAttachmentTypeRegistry:a,persistableStateAttachmentTypeRegistry:n,handleOutlineComment:i})=>{const o=(({userAction:e,caseData:t,externalReferenceAttachmentTypeRegistry:s,persistableStateAttachmentTypeRegistry:a})=>{const{comment:n}=e.payload;if(n.type===M.a.alert){const e=(i=Array.isArray(n.alertId)?n.alertId.length:1,A.i18n.translate("xpack.cases.caseView.alerts.multipleAlerts",{values:{totalAlerts:i},defaultMessage:"{totalAlerts, plural, =1 {one} other {{totalAlerts}}} {totalAlerts, plural, =1 {alert} other {alerts}}"}));return`${Et.M} ${e}`}var i;return n.type===M.a.externalReference?ra({caseData:t,registry:s,getId:()=>n.externalReferenceAttachmentTypeId,getAttachmentProps:()=>({externalReferenceId:n.externalReferenceId,externalReferenceMetadata:n.externalReferenceMetadata})}):n.type===M.a.persistableState?ra({caseData:t,registry:a,getId:()=>n.persistableStateAttachmentTypeId,getAttachmentProps:()=>({persistableStateAttachmentTypeId:n.persistableStateAttachmentTypeId,persistableStateAttachmentState:n.persistableStateAttachmentState})}):`${Et.M} ${Et.p.toLowerCase()}`})({userAction:e,caseData:s,externalReferenceAttachmentTypeRegistry:a,persistableStateAttachmentTypeRegistry:n});return zt({userAction:e,userProfiles:t,handleOutlineComment:i,label:o,icon:"cross"}).build()})({userAction:I,caseData:t,handleOutlineComment:C,userProfiles:a,externalReferenceAttachmentTypeRegistry:o,persistableStateAttachmentTypeRegistry:r});const k=t.comments.find((e=>e.id===I.commentId));if(null==k)return[];if(I.action===M.r.create)return(({appId:e,userAction:t,userProfiles:s,caseData:a,externalReferenceAttachmentTypeRegistry:o,persistableStateAttachmentTypeRegistry:r,comment:c,commentRefs:l,manageMarkdownEditIds:u,selectedOutlineCommentId:d,loadingCommentIds:b,euiTheme:m,handleManageMarkdownEditId:p,handleSaveComment:g,handleManageQuote:h,handleDeleteComment:f,getRuleDetailsHref:O,loadingAlertData:x,onRuleDetailsClick:v,alertData:y,onShowAlertDetails:E,actionsNavigation:C})=>{switch(c.type){case M.a.user:const A=(({appId:e,comment:t,userProfiles:s,outlined:a,isEdit:o,isLoading:r,commentRefs:c,caseId:l,euiTheme:u,handleManageMarkdownEditId:d,handleSaveComment:b,handleManageQuote:m,handleDeleteComment:p})=>({build:()=>[{username:Object(j.jsx)(ms,{user:t.createdBy,userProfiles:s}),"data-test-subj":`comment-create-action-${t.id}`,timestamp:Object(j.jsx)(At,{createdAt:t.createdAt,updatedAt:t.updatedAt}),className:ns()("userAction__comment",{outlined:a,isEdit:o,draftFooter:!o&&!r&&Ls(e,l,t.id,t.comment)}),children:Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(ls,{key:o?t.id:void 0,ref:e=>c.current[t.id]=e,id:t.id,content:t.comment,isEditable:o,caseId:l,onChangeEditable:d,onSaveContent:b.bind(null,{id:t.id,version:t.version})}),o||r||!Ls(e,l,t.id,t.comment)?"":Object(j.jsx)(i.EuiText,{css:Ms(u)},Object(j.jsx)(i.EuiText,{color:"subdued",size:"xs","data-test-subj":"user-action-comment-unsaved-draft"},Zt))),timelineAvatar:Object(j.jsx)(ps,{user:t.createdBy,userProfiles:s}),actions:Object(j.jsx)(ds,{id:t.id},Object(j.jsx)(Ps,{isLoading:r,commentContent:t.comment,onEdit:()=>d(t.id),onDelete:()=>p(t.id,ts),onQuote:()=>m(t.comment)}))}]}))({appId:e,userProfiles:s,comment:c,outlined:c.id===d,isEdit:u.includes(c.id),commentRefs:l,isLoading:b.includes(c.id),caseId:a.id,euiTheme:m,handleManageMarkdownEditId:p,handleSaveComment:g,handleManageQuote:h,handleDeleteComment:f});return A.build();case M.a.alert:return Qs({userProfiles:s,alertData:y,comment:c,userAction:t,getRuleDetailsHref:O,loadingAlertData:x,onRuleDetailsClick:v,onShowAlertDetails:E,handleDeleteComment:f,loadingCommentIds:b}).build();case M.a.actions:const S=(({userAction:e,userProfiles:t,comment:s,actionsNavigation:a})=>({build:()=>{const n="isolate"===s.actions.type?"lock":"lockOpen";return[{username:Object(j.jsx)(Nt,{user:s.createdBy,userProfiles:t}),className:ns()("comment-action",{"empty-comment":0===s.comment.trim().length}),event:Object(j.jsx)(sa,{type:s.actions.type,endpoints:s.actions.targets,href:null==a?void 0:a.href,onClick:null==a?void 0:a.onClick}),"data-test-subj":"endpoint-action",timestamp:Object(j.jsx)(At,{createdAt:e.createdAt}),timelineAvatar:n,timelineAvatarAriaLabel:n,actions:Object(j.jsx)(kt,{id:s.id}),children:s.comment.trim().length>0&&Object(j.jsx)(et.d,{content:s.comment})}]}}))({userProfiles:s,userAction:t,comment:c,actionsNavigation:C});return S.build();case M.a.externalReference:const w=(({userAction:e,userProfiles:t,comment:s,externalReferenceAttachmentTypeRegistry:a,caseData:n,isLoading:i,handleDeleteComment:o})=>oa({userAction:e,userProfiles:t,comment:s,registry:a,caseData:n,handleDeleteComment:o,isLoading:i,getId:()=>s.externalReferenceAttachmentTypeId,getAttachmentViewProps:()=>({externalReferenceId:s.externalReferenceId,externalReferenceMetadata:s.externalReferenceMetadata})}))({userAction:t,userProfiles:s,comment:c,externalReferenceAttachmentTypeRegistry:o,caseData:a,isLoading:b.includes(c.id),handleDeleteComment:f});return w.build();case M.a.persistableState:const I=(({userAction:e,userProfiles:t,comment:s,persistableStateAttachmentTypeRegistry:a,caseData:n,isLoading:i,handleDeleteComment:o})=>oa({userAction:e,userProfiles:t,comment:s,registry:a,caseData:n,handleDeleteComment:o,isLoading:i,getId:()=>s.persistableStateAttachmentTypeId,getAttachmentViewProps:()=>({persistableStateAttachmentTypeId:s.persistableStateAttachmentTypeId,persistableStateAttachmentState:s.persistableStateAttachmentState})}))({userAction:t,userProfiles:s,comment:c,persistableStateAttachmentTypeRegistry:r,caseData:a,isLoading:b.includes(c.id),handleDeleteComment:f});return I.build();default:return[]}})({appId:e,caseData:t,casesConfiguration:s,userProfiles:a,userAction:I,externalReferenceAttachmentTypeRegistry:o,persistableStateAttachmentTypeRegistry:r,comment:k,commentRefs:l,manageMarkdownEditIds:u,selectedOutlineCommentId:d,loadingCommentIds:b,loadingAlertData:m,alertData:p,euiTheme:g,getRuleDetailsHref:h,onRuleDetailsClick:f,onShowAlertDetails:O,handleManageMarkdownEditId:x,handleSaveComment:v,handleDeleteComment:y,handleManageQuote:E,actionsNavigation:S,caseConnectors:w});const T=`${Et.z} ${Et.p.toLowerCase()}`;return zt({userAction:c,userProfiles:a,handleOutlineComment:C,label:T,icon:"dot"}).build()}}),description:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=`${Et.z} ${Et.x.toLowerCase()}`;return zt({userAction:e,userProfiles:t,handleOutlineComment:s,label:a,icon:"dot"}).build()}}),settings:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{var a,n;const i=e;return void 0!==(null==i||null===(a=i.payload)||void 0===a||null===(n=a.settings)||void 0===n?void 0:n.syncAlerts)?zt({userProfiles:t,userAction:e,handleOutlineComment:s,label:la(i),icon:"gear"}).build():[]}}),assignees:({userAction:e,handleOutlineComment:t,userProfiles:s})=>({build:()=>{const a=((e,t)=>{const s=e.payload.assignees.map((e=>{const s=null==t?void 0:t.get(e.uid);return{uid:e.uid,profile:s}}));return Object(j.jsx)(i.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs",component:"span",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"ua-assignees-label",grow:!1},e.action===M.r.add&&Et.f,e.action===M.r.delete&&Et.cb),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(qt,{createdByUser:e.createdBy,assignees:s})))})(e,s);return zt({userAction:e,userProfiles:s,handleOutlineComment:t,label:a,icon:"userAvatar"}).build()}}),category:({userAction:e,userProfiles:t,handleOutlineComment:s})=>({build:()=>{const a=(e=>{var t;const s=null!==(t=e.payload.category)&&void 0!==t?t:"";return Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center","data-test-subj":`${e.id}-category-user-action-title`,responsive:!1},e.action===M.r.update?Object(j.jsx)(i.EuiFlexItem,{grow:!1},`${Et.b} "${s}"`):Object(j.jsx)(i.EuiFlexItem,{grow:!1},Et.O))})(e);return zt({userAction:e,userProfiles:t,handleOutlineComment:s,label:a,icon:"dot"}).build()}}),customFields:({userAction:e,handleOutlineComment:t,userProfiles:s,casesConfiguration:a})=>({build:()=>{const n=e;if(0===n.payload.customFields.length)return[];const i=n.payload.customFields[0],o=a.customFields.find((e=>e.key===i.key)),r=((e,t)=>{var s,a;const n=e.value,i=null!==(s=null!==(a=null==t?void 0:t.label)&&void 0!==a?a:null==t?void 0:t.key)&&void 0!==s?s:Et.db;if(null==n||Array.isArray(n)&&0===n.length)return Et.n(i);const o=Array.isArray(n)?n[0]:n;return`${Et.m.toLowerCase()} ${i} ${Et.bb} "${o}"`})(i,o);return zt({userAction:e,userProfiles:s,handleOutlineComment:t,label:r,icon:"dot"}).build()}})},ma=e=>Object(j.css)("& .userAction__comment.outlined .euiCommentEvent{outline:solid 5px ",e.colors.lightShade,";margin:0.5em;transition:0.8s;}& .draftFooter{& .euiCommentEvent__body{padding:0;}}& .euiComment.isEdit{& .euiCommentEvent{border:none;box-shadow:none;}& .euiCommentEvent__body{padding:0;}& .euiCommentEvent__header{display:none;}}& .comment-action.empty-comment [class*='euiCommentEvent-regular']{box-shadow:none;.euiCommentEvent__header{padding:",e.size.m," ",e.size.s,";border-bottom:0;}}",""),ja=n.a.memo((({caseUserActions:e,caseConnectors:t,userProfiles:s,currentUserProfile:n,data:o,casesConfiguration:r,getRuleDetailsHref:c,actionsNavigation:l,onRuleDetailsClick:u,onShowAlertDetails:d,loadingAlertData:b,manualAlertsData:p,commentRefs:h,handleManageQuote:f,bottomActions:O=[],isExpandable:x=!1})=>{const{externalReferenceAttachmentTypeRegistry:v,persistableStateAttachmentTypeRegistry:y}=Object(g.a)(),{owner:E}=Object(g.a)(),{commentId:C}=Object(m.k)(),[A,S]=Object(a.useState)(!0),{euiTheme:w}=Object(i.useEuiTheme)(),{loadingCommentIds:I,selectedOutlineCommentId:k,manageMarkdownEditIds:T,handleManageMarkdownEditId:F,handleOutlineComment:R,handleSaveComment:D,handleDeleteComment:P}=mt(),M=Object(a.useMemo)((()=>e?e.reduce(((e,a,i)=>{if(m=a.type,!ut.includes(m))return e;var m;const j=ba[a.type];if(null==j)return e;const g=j({appId:E[0],caseData:o,casesConfiguration:r,caseConnectors:t,externalReferenceAttachmentTypeRegistry:v,persistableStateAttachmentTypeRegistry:y,userAction:a,userProfiles:s,currentUserProfile:n,comments:null==o?void 0:o.comments,index:i,commentRefs:h,manageMarkdownEditIds:T,selectedOutlineCommentId:k,loadingCommentIds:I,loadingAlertData:b,alertData:p,euiTheme:w,handleOutlineComment:R,handleManageMarkdownEditId:F,handleDeleteComment:P,handleSaveComment:D,handleManageQuote:f,onShowAlertDetails:d,actionsNavigation:l,getRuleDetailsHref:c,onRuleDetailsClick:u});return[...e,...g.build()]}),[]):[]),[e,E,o,r,t,v,y,s,n,h,T,k,I,b,p,w,R,F,P,D,f,d,l,c,u]),L=null!=O&&O.length?[...M,...O]:[...M];return Object(a.useEffect)((()=>{null!=C&&A&&(S(!1),R(C))}),[C,A,R]),Object(j.jsx)(i.EuiCommentList,{className:x?"commentList--hasShowMore":"",css:ma(w),comments:L,"data-test-subj":"user-actions-list"})}));ja.displayName="UserActionsList";const pa=n.a.memo((({onShowMoreClick:e,isLoading:t=!1})=>{const{euiTheme:s}=Object(i.useEuiTheme)();return Object(j.jsx)(i.EuiPanel,{color:"subdued",css:Object(j.css)("display:flex;justify-content:center;position:relative;margin-block:",s.size.base,";z-index:",s.levels.menu,";border-top:",s.size.base," solid ",s.colors.emptyShade,";border-bottom:",s.size.base," solid ",s.colors.emptyShade,";border-radius:",s.size.base,";","")},Object(j.jsx)(i.EuiButton,{fill:!0,color:"text",size:"s",onClick:()=>{e()},"data-test-subj":"cases-show-more-user-actions",isLoading:t},Et.V))}));pa.displayName="ShowMoreButton";const ga=(e,t)=>{const s=e?{showMoreSectionSize:t.size.xxxl,marginTopShowMoreSectionSize:t.size.xxxl,marginBottomShowMoreSectionSize:t.size.xxxl}:{showMoreSectionSize:t.size.m,marginTopShowMoreSectionSize:t.size.m,marginBottomShowMoreSectionSize:t.size.m},a=`${s.showMoreSectionSize} + ${s.marginTopShowMoreSectionSize} +\n  ${s.marginBottomShowMoreSectionSize}`;return`\n          .commentList--hasShowMore\n            [class*='euiTimelineItem-center']:last-child:not(:only-child)\n            > [class*='euiTimelineItemIcon-']::before {\n            block-size: calc(\n              100% + ${a}\n            );\n          }\n          .commentList--hasShowMore\n            [class*='euiTimelineItem-center']:first-child\n            > [class*='euiTimelineItemIcon-']::before {\n            inset-block-start: 0%;\n            block-size: calc(\n              100% + ${a}\n            );\n          }\n          .commentList--hasShowMore\n              [class*='euiTimelineItem-']\n              > [class*='euiTimelineItemIcon-']::before {\n              block-size: calc(\n                100% + ${a}\n              );\n              }\n        `},ha=n.a.memo((e=>{const{currentUserProfile:t,data:s,statusActionButton:n,useFetchAlertData:c,userActivityQueryParams:d,userActionsStats:b}=e,{detailName:p}=Object(m.k)(),{lastPage:h}=(({userActivityQueryParams:e,userActionsStats:t})=>({lastPage:Object(a.useMemo)((()=>{if(!t)return 1;const s=e.perPage;let a=1;switch(e.type){case"action":a=Math.ceil(t.totalOtherActions/s);break;case"user":a=Math.ceil(t.totalComments/s);break;case"all":a=Math.ceil(t.total/s);break;default:return Object(i.assertNever)(e.type)}return Math.max(a,1)}),[t,e])}))({userActivityQueryParams:d,userActionsStats:b}),{infiniteCaseUserActions:f,isLoadingInfiniteUserActions:O,hasNextPage:x,fetchNextPage:v,showBottomList:y,isFetchingNextPage:E}=(({userActivityQueryParams:e,caseId:t,lastPage:s})=>{const{data:n,isLoading:i,hasNextPage:c,fetchNextPage:d,isFetchingNextPage:b}=((e,t,s)=>{const{showErrorToast:a}=Object(F.a)(),n=new AbortController;return Object(o.useInfiniteQuery)(u.e.caseUserActions(e,t),(async({pageParam:s=1})=>Object(l.e)(e,{...t,page:s},n.signal)),{enabled:!0,onError:e=>{a(e,{title:r.e})},getNextPageParam:(e,t)=>{const s=Math.ceil(e.total/e.perPage);if(e.page<s-1)return e.page+1}})})(t,e),m=s>1,j=Object(a.useMemo)((()=>{var e;if(null==n||null===(e=n.pages)||void 0===e||!e.length||i)return[];const t=[];return n.pages.forEach((e=>t.push(...e.userActions))),t}),[n,i]);return{lastPage:s,showBottomList:m,isLoadingInfiniteUserActions:i,infiniteCaseUserActions:j,hasNextPage:c,fetchNextPage:d,isFetchingNextPage:b}})({userActivityQueryParams:d,caseId:s.id,lastPage:h}),{euiTheme:C}=Object(i.useEuiTheme)(),{isLoadingLastPageUserActions:A,lastPageUserActions:S}=(({userActivityQueryParams:e,caseId:t,lastPage:s})=>{const{data:n,isLoading:i}=((e,t,s)=>{const{showErrorToast:a}=Object(F.a)();return Object(o.useQuery)(u.e.caseUserActions(e,t),(async({signal:s})=>Object(l.e)(e,t,s)),{enabled:s,onError:e=>{a(e,{title:r.e})}})})(t,{...e,page:s},s>1),c=Object(a.useMemo)((()=>i||!n?[]:n.userActions),[n,i]);return{isLoadingLastPageUserActions:i,lastPageUserActions:c}})({userActivityQueryParams:d,caseId:s.id,lastPage:h}),w=Object(a.useMemo)((()=>(e=>{const t=e.reduce(((e,t)=>t.type===M.a.alert&&Object(ie.isEmpty)(t.rule.id)?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set);return Array.from(t)})(s.comments)),[s.comments]),[I,k]=c(w),{permissions:T}=Object(g.a)(),R=T.create&&"action"!==d.type,{commentRefs:D,handleManageMarkdownEditId:P,handleManageQuote:L,handleUpdate:N,loadingCommentIds:H}=mt(),_=Object(a.useMemo)((()=>Object(j.jsx)(lt,{id:dt,caseId:p,ref:e=>D.current[dt]=e,onCommentPosted:N,onCommentSaving:P.bind(null,dt),showLoading:!1,statusActionButton:n})),[p,N,P,n,D]),z=R?[{username:Object(j.jsx)(jt.a,{userInfo:t},Object(j.jsx)(ht,{userInfo:t})),"data-test-subj":"add-comment",timelineAvatar:Object(j.jsx)(xt,{userInfo:t}),className:"isEdit",children:_}]:[],B=Object(a.useCallback)((()=>{v&&v()}),[v]);return Object(j.jsx)(i.EuiSkeletonText,{lines:8,"data-test-subj":"user-actions-loading",isLoading:A||H.includes(dt)||O},Object(j.jsx)(i.EuiFlexItem,y?{css:Object(j.css)(ga(x,C),";","")}:{},Object(j.jsx)(ja,Je()({},e,{caseUserActions:f,loadingAlertData:I,manualAlertsData:k,commentRefs:D,handleManageQuote:L,bottomActions:h<=1?z:[],isExpandable:!0})),x&&Object(j.jsx)(pa,{onShowMoreClick:B,isLoading:E}),null!=S&&S.length?Object(j.jsx)(i.EuiFlexItem,x?{}:{css:Object(j.css)("margin-top:",C.size.l,";","")},Object(j.jsx)(ja,Je()({},e,{caseUserActions:S,loadingAlertData:I,manualAlertsData:k,bottomActions:z,commentRefs:D,handleManageQuote:L}))):null))}));ha.displayName="UserActions";var fa=s(167);const Oa=n.a.memo((({theCase:e,userProfiles:t,headline:s,loading:n,users:o,dataTestSubj:r})=>{const{getCaseViewUrl:c}=Object(m.j)(),{euiTheme:l}=Object(i.useEuiTheme)(),u=c({detailName:e.id}),b=(({caseTitle:e,caseUrl:t})=>({subject:d.K(e),body:d.J(t)}))({caseTitle:e.title,caseUrl:u}),p=Object(a.useCallback)((e=>{e&&null!=e&&window.open(`mailto:${e}?subject=${b.subject}&body=${b.body}`,"_blank")}),[b.body,b.subject]),g=xa(o,null!=t?t:new Map),h=Object(ie.sortBy)(g,fa.b);return 0===h.length?null:Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":r},Object(j.jsx)(i.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,s)),Object(j.jsx)(i.EuiHorizontalRule,{margin:"xs"}),n&&Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"users-list-loading-spinner"}))),((e,t,s)=>e.map(((e,a)=>{var n,o,r,c,l,u;return Object(j.jsx)(i.EuiFlexGroup,{css:Object(j.css)("margin-top:",s.size.m,";",""),key:a,justifyContent:"spaceBetween",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Pt,{userInfo:e})),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonIcon,{"data-test-subj":"user-list-email-button",onClick:t.bind(null,null===(n=e.user)||void 0===n?void 0:n.email),iconType:"email","aria-label":d.cb(null!==(o=e.user)&&void 0!==o&&o.full_name?null===(r=e.user)||void 0===r?void 0:r.full_name:null!==(c=null===(l=e.user)||void 0===l?void 0:l.username)&&void 0!==c?c:""),isDisabled:Object(v.isEmpty)(null===(u=e.user)||void 0===u?void 0:u.email)})))})))(h,p,l))}));Oa.displayName="UserList";const xa=(e,t)=>{const s=e.reduce(((e,s)=>{const a={email:s.user.email,fullName:s.user.full_name,username:s.user.username,profileUid:s.uid},n=Object(Mt.b)(a,t);return null!=n&&e.set(n.key,n.userInfo),e}),new Map);return Array.from(s.values())};var va=s(18);const ya=({caseData:e})=>{const{isLoading:t,mutate:s}=(()=>{const e=Object(c.j)(),{showErrorToast:t}=Object(F.a)(),s=Object(V.a)();return Object(o.useMutation)((e=>Object(l.o)({caseId:e.caseData.id,updatedCase:{[e.updateKey]:e.updateValue},version:e.caseData.version})),{mutationKey:u.d.updateCase,onSuccess:(t,a)=>{s();const n=Object(va.e)(a.caseData,t[0],a.updateKey,a.updateValue);e.addSuccess(n)},onError:e=>{t(e,{title:r.e})}})})(),[n,i]=Object(a.useState)(null);return{onUpdateField:Object(a.useCallback)((({key:t,value:a,onSuccess:n,onError:o})=>{const r=(t,a)=>{i(t),s({updateKey:t,updateValue:a,caseData:e},{onSuccess:()=>{null==n||n(),i(null)},onError:()=>{null==o||o(),i(null)}})};switch(t){case"title":const t=Object(va.n)(a);t.length>0&&r("title",t);break;case"connector":const s=Object(va.n)(a);null!=s&&r("connector",s);break;case"description":const n=Object(va.n)(a);n.length>0&&r("description",n);break;case"tags":r("tags",Object(va.n)(a));break;case"category":r("category",Object(va.n)(a));break;case"status":const i=Object(va.n)(a);e.status!==a&&r("status",i);break;case"settings":const o=Object(va.n)(a);e.settings!==a&&r("settings",o);break;case"severity":const c=Object(va.n)(a);e.severity!==a&&r("severity",c);break;case"assignees":const l=Object(va.n)(a);ke()(e.assignees,a)||r("assignees",l);break;case"customFields":const u=Object(va.n)(a);ke()(e.customFields,a)||r("customFields",u);break;default:return null}}),[s,e]),isLoading:t,loadingKey:n}};var Ea=s(240),Ca=s(176);const Aa=({selectedSeverity:e,onSeverityChange:t,isLoading:s,isDisabled:a})=>Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"sidebar-severity"},Object(j.jsx)(i.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,Ca.e)),Object(j.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(j.jsx)(Ea.a,{isLoading:s,selectedSeverity:e,onSeverityChange:t,isDisabled:a}));Aa.displayName="SeveritySidebarSelector";var Sa=s(223);const wa=({title:e})=>Object(j.jsx)(i.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,e));wa.displayName="SidebarTitle";const Ia=n.a.memo(wa);var ka=s(80);const Ta=({children:e,tooltipContent:t,buttonAriaLabel:s,onRemoveItem:n,dataTestSubjPrefix:o=""})=>{const{permissions:r}=Object(g.a)(),[c,l]=Object(a.useState)(!1),u=()=>l(!0),d=()=>l(!1),b=o.length>0?`${o}-remove-`:"remove-";return Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"spaceBetween",onMouseEnter:u,onMouseLeave:d,"data-test-subj":`${b}group`},Object(j.jsx)(i.EuiFlexItem,{grow:!1},e),r.update&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiToolTip,{position:"left",content:t,"data-test-subj":`${b}tooltip`},Object(j.jsx)(i.EuiButtonIcon,{css:Object(j.css)({opacity:c?1:0},"",""),onFocus:u,onBlur:d,"data-test-subj":`${b}button`,"aria-label":s,iconType:"cross",color:"danger",iconSize:"m",onClick:n}))))};Ta.displayName="RemovableItem";const Fa=n.a.memo(Ta),Ra=({assignee:e,onRemoveAssignee:t})=>{var s,n;const i=Object(a.useCallback)((()=>t(e.uid)),[t,e.uid]),o=null!==(s=null===(n=e.profile)||void 0===n?void 0:n.user.username)&&void 0!==s?s:e.uid;return Object(j.jsx)(Fa,{onRemoveItem:i,tooltipContent:ka.h,buttonAriaLabel:ka.j,dataTestSubjPrefix:`user-profile-assigned-user-${o}`},Object(j.jsx)(Pt,{userInfo:e.profile}))};Ra.displayName="RemovableUser";const Da=n.a.memo(Ra);var Pa=s(356),Ma=s(165),La=s(178),Na=s(191),Ha=s(192);const _a=({togglePopover:e,isDisabled:t})=>Object(j.jsx)(i.EuiToolTip,{position:"left",content:d.F},Object(j.jsx)(i.EuiButtonIcon,{"data-test-subj":"case-view-assignees-edit-button","aria-label":d.G,iconType:"pencil",onClick:e,disabled:t}));_a.displayName="PopoverButton";const za=({assignedUsersWithProfiles:e,currentUserProfile:t,isLoading:s,isPopoverOpen:n,onUsersChange:i,togglePopover:o,onClosePopover:r})=>{const{owner:c}=Object(g.a)(),[l,u]=Object(a.useState)(""),{isUserTyping:b,onContentChange:m,onDebounce:p}=Object(Ma.a)(),h=Object(a.useMemo)((()=>Object(fa.a)(t,e.map((e=>({...e.profile}))))),[e,t]),[f,O]=Object(a.useState)(),x=Object(a.useCallback)((e=>{const s=Object(fa.a)(t,e);O(s),i(null!=s?s:[])}),[t,i]),v=Object(a.useCallback)((e=>d.kb(e)),[]),y=Object(a.useCallback)((e=>d.P(e)),[]),{data:E,isLoading:C,isFetching:A}=Object(La.a)({name:l,owners:c,onDebounce:p}),S=C||s||A||b,w=s,I=Object(a.useMemo)((()=>Object(fa.a)(t,E)),[t,E]);return Object(j.jsx)(Pa.a,{title:d.F,button:Object(j.jsx)(_a,{togglePopover:o,isDisabled:w}),isOpen:n,closePopover:r,panelStyle:{width:400},selectableProps:{onChange:x,onSearchChange:e=>{u(e),m(e)},selectedStatusMessage:v,options:I,selectedOptions:null!=f?f:h,isLoading:S,height:"full",limit:Y.jb,limitReachedMessage:y,searchPlaceholder:d.ab,clearButtonLabel:d.W,emptyMessage:Object(j.jsx)(Na.a,null),noMatchesMessage:S?Object(j.jsx)(Na.a,null):Object(j.jsx)(Ha.a,null)}})};za.displayName="SuggestUsersPopover";const Ba=n.a.memo(za),Ua=({assignees:e,currentUserProfile:t,permissions:s,assignSelf:a,togglePopOver:o,onAssigneeRemoved:r})=>Object(j.jsx)(n.a.Fragment,null,0===e.length?Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiText,{size:"s",color:"subdued"},Object(j.jsx)("p",null,d.Q,s.update&&Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)("br",null),Object(j.jsx)(i.EuiLink,{"data-test-subj":"case-view-assign-users-link",onClick:o},d.g)),t&&s.update&&Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)("span",null,d.db),Object(j.jsx)(i.EuiLink,{"data-test-subj":"case-view-assign-yourself-link",onClick:a},d.h)))))):Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.map((e=>Object(j.jsx)(i.EuiFlexItem,{key:e.uid,grow:!1},Object(j.jsx)(Da,{assignee:e,onRemoveAssignee:r}))))));Ua.displayName="AssigneesList";const $a=({caseAssignees:e,userProfiles:t,currentUserProfile:s,onAssigneesChanged:n,isLoading:o})=>{const{assigneesWithProfiles:r,assigneesWithoutProfiles:c,allAssignees:l}=Object(Sa.a)({caseAssignees:e,userProfiles:t}),[u,b]=Object(a.useState)(),[m,p]=Object(a.useState)(!1),[h,f]=Object(a.useState)(!1),O=Object(a.useCallback)((()=>{f((e=>!e)),p(!0)}),[]),x=Object(a.useCallback)((()=>{p(!0),f(!1)}),[]),v=Object(a.useCallback)((e=>{const t=l.filter((t=>t.uid!==e));b(t),p(!0)}),[l]),y=Object(a.useCallback)((e=>{e.length>0?b([...e,...c]):b([])}),[c]),E=Object(a.useCallback)((()=>{if(!s)return;const e=[s,...l];b(e),p(!0)}),[s,l]),{permissions:C}=Object(g.a)();return Object(a.useEffect)((()=>{!1===h&&m&&u&&(p(!1),n(u))}),[h,m,n,u]),Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":"case-view-assignees"},Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"spaceBetween",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(Ia,{title:d.f})),o&&Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"case-view-assignees-button-loading"}),!o&&C.update&&Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"case-view-assignees-edit",grow:!1},Object(j.jsx)(Ba,{assignedUsersWithProfiles:r,currentUserProfile:s,isLoading:o,isPopoverOpen:h,onUsersChange:y,onClosePopover:x,togglePopover:O}))),Object(j.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(j.jsx)(Ua,{assignees:l,currentUserProfile:s,permissions:C,assignSelf:E,togglePopOver:O,onAssigneeRemoved:v}))};$a.displayName="AssignUsers";const Va=n.a.memo($a),Xa=A.i18n.translate("xpack.cases.userActionsActivity.filter.all",{defaultMessage:"All"}),Ga=A.i18n.translate("xpack.cases.userActionsActivity.filter.comments",{defaultMessage:"Comments"}),Wa=A.i18n.translate("xpack.cases.userActionsActivity.filter.history",{defaultMessage:"History"}),qa=A.i18n.translate("xpack.cases.userActionsActivity.sort.oldest",{defaultMessage:"Oldest first"}),Qa=A.i18n.translate("xpack.cases.userActionsActivity.sort.newest",{defaultMessage:"Newest first"}),Ya=A.i18n.translate("xpack.cases.userActionsActivity.sort.sortBy",{defaultMessage:"Sort by"}),Ka=A.i18n.translate("xpack.cases.userActionsActivity.sort.sortBy.ariaLabel",{defaultMessage:'"Sort by" list'});var Ja={name:"fcx1qb",styles:"&,& .euiFilterButton__text{min-width:28px;}"},Za={name:"1vwhyor",styles:">.euiFilterButton-hasNotification{min-width:68px;}"};const en=n.a.memo((({type:e,onFilterChange:t,userActionsStats:s,isLoading:n=!1})=>{const o=Object(a.useCallback)((s=>{s!==e&&t(s)}),[t,e]);return Object(j.jsx)(i.EuiFilterGroup,{"data-test-subj":"user-actions-filter-activity-group",css:Za},Object(j.jsx)(i.EuiFilterButton,{withNext:!0,css:Ja,grow:!1,onClick:()=>o("all"),hasActiveFilters:"all"===e,numFilters:s&&s.total>0?s.total:0,isLoading:n,isDisabled:n,"data-test-subj":"user-actions-filter-activity-button-all",iconSize:"s"},Xa),Object(j.jsx)(i.EuiFilterButton,{withNext:!0,grow:!1,hasActiveFilters:"user"===e,numFilters:s&&s.totalComments>0?s.totalComments:0,isLoading:n,isDisabled:n,onClick:()=>o("user"),"data-test-subj":"user-actions-filter-activity-button-comments"},Ga),Object(j.jsx)(i.EuiFilterButton,{hasActiveFilters:"action"===e,numFilters:s&&s.totalOtherActions>0?s.totalOtherActions:0,onClick:()=>o("action"),isLoading:n,isDisabled:n,"data-test-subj":"user-actions-filter-activity-button-history"},Wa))}));en.displayName="FilterActivity";const tn=[{value:"desc",text:Qa},{value:"asc",text:qa}],sn=n.a.memo((({sortOrder:e,onOrderChange:t,isLoading:s=!1})=>{const n=Object(a.useCallback)((e=>{t(e.target.value)}),[t]);return Object(j.jsx)(i.EuiSelect,{prepend:Ya,"data-test-subj":"user-actions-sort-select",isLoading:s,onChange:n,options:tn,value:e,"aria-label":Ka})}));sn.displayName="SortActivity";const an=n.a.memo((({params:e,onUserActionsActivityChanged:t,userActionsStats:s,isLoading:a})=>Object(j.jsx)(i.EuiFlexGroup,{wrap:!0,responsive:!1,justifyContent:"spaceBetween","data-test-subj":"user-actions-activity-bar"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(en,{type:e.type,onFilterChange:s=>{t({...e,type:s})},userActionsStats:s,isLoading:a})),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(sn,{sortOrder:e.sortOrder,onOrderChange:s=>{t({...e,sortOrder:s})},isLoading:a})))));an.displayName="UserActionsActivityBar";var nn=s(130),on=s(35);const rn=e=>({total:e.total}),cn=({title:e})=>Object(j.jsx)(i.EuiTitle,{size:"xxs"},Object(j.jsx)("h2",{className:"eui-displayInline"},e));cn.displayName="TabTitle";const ln=({activeTab:e,fileStatsData:t,isLoading:s,euiTheme:a})=>Object(j.jsx)(n.a.Fragment,null,!s&&t&&Object(j.jsx)(i.EuiNotificationBadge,{css:Object(j.css)("margin-left:",a.size.xs,";",""),"data-test-subj":"case-view-files-stats-badge",color:e===h.a.FILES?"accent":"subdued"},t.total>0?t.total:0));ln.displayName="FilesBadge";const un=({activeTab:e,totalAlerts:t,isExperimental:s,euiTheme:a})=>Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiNotificationBadge,{css:Object(j.css)("margin-left:",a.size.xs,";",""),"data-test-subj":"case-view-alerts-stats-badge",color:e===h.a.ALERTS?"accent":"subdued"},t||0),s&&Object(j.jsx)(i.EuiBetaBadge,{label:J.e,size:"s",iconType:"beaker",tooltipContent:J.d,tooltipPosition:"bottom",css:Object(j.css)("margin-left:",a.size.xs,";",""),"data-test-subj":"case-view-alerts-table-experimental-badge"}));un.displayName="AlertsBadge";const dn=n.a.memo((({caseData:e,activeTab:t})=>{const{features:s}=Object(g.a)(),{navigateToCaseView:c}=Object(m.j)(),{euiTheme:l}=Object(i.useEuiTheme)(),{data:b,isLoading:p}=(({caseId:e})=>{const{owner:t}=Object(g.a)(),{showErrorToast:s}=Object(F.a)(),{client:a}=Object(nn.b)();return Object(o.useQuery)(u.e.caseFileStats(e),(()=>a.list({kind:Object(on.a)(t[0]),page:1,perPage:1,meta:{caseIds:[e]}})),{select:rn,keepPreviousData:!0,onError:e=>{s(e,{title:r.e})}})})({caseId:e.id}),f=Object(a.useMemo)((()=>[{id:h.a.ACTIVITY,name:d.a},...s.alerts.enabled?[{id:h.a.ALERTS,name:d.e,badge:Object(j.jsx)(un,{isExperimental:s.alerts.isExperimental,totalAlerts:e.totalAlerts,activeTab:t,euiTheme:l})}]:[],{id:h.a.FILES,name:d.N,badge:Object(j.jsx)(ln,{isLoading:p,fileStatsData:b,activeTab:t,euiTheme:l})}]),[s.alerts.enabled,s.alerts.isExperimental,e.totalAlerts,t,p,b,l]),O=Object(a.useCallback)((()=>f.map(((s,a)=>{var n;return Object(j.jsx)(i.EuiTab,{"data-test-subj":`case-view-tab-title-${s.id}`,key:a,onClick:()=>c({detailName:e.id,tabId:s.id}),isSelected:s.id===t},Object(j.jsx)(cn,{title:s.name}),null!==(n=s.badge)&&void 0!==n?n:null)}))),[t,e.id,c,f]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiTabs,{"data-test-subj":"case-view-tabs"},O()),Object(j.jsx)(i.EuiSpacer,{size:"l"}))}));dn.displayName="CaseViewTabs";const{emptyField:bn,maxLengthField:mn}=st.fieldValidators,jn={content:{type:Te.FIELD_TYPES.TEXTAREA,validations:[{validator:bn(z.G)},{validator:mn({length:Y.zb,message:z.O("description",Y.zb)})}]}},pn="description";var gn={name:"13y804q",styles:"border-bottom-left-radius:0;border-bottom-right-radius:0"};const hn=({euiTheme:e,isCollapsed:t,hasUnsavedChanges:s})=>Object(j.css)("padding:",e.size.s,";align-items:center;",t?Object(j.css)("background:",e.colors.lightestShade,";border-radius:",e.border.radius.medium,";",s?gn:Object(j.css)("",""),";",""):Object(j.css)("border-bottom:",e.border.thin,";border-radius:none;",""),";",""),fn=({caseData:e,onUpdateField:t,isLoadingDescription:s})=>{const[n,o]=Object(a.useState)(!1),[r,c]=Object(a.useState)(!1),l=Object(a.useRef)(null),u=Object(a.useRef)(null),{euiTheme:d}=Object(i.useEuiTheme)(),{permissions:b,owner:m}=Object(g.a)(),{clearDraftComment:p,draftComment:h,hasIncomingLensState:f,openLensModal:O}=Object(bt.a)(),x=Object(a.useCallback)((()=>{p(),c(!1)}),[c,p]),v=Object(a.useCallback)((e=>{t({key:pn,value:e.trim()}),c(!1)}),[t,c]),y=((e="",t,s)=>{const a=Object(tt.a)({appId:e,caseId:t,commentId:s});return sessionStorage.getItem(a)})(m[0],e.id,pn);f&&null!==h&&(null==h?void 0:h.commentId)===pn&&!r&&c(!0),Object(a.useEffect)((()=>{var e,t;null!=(null==(t=u.current)?void 0:t.setComment)&&null!==(e=u.current.editor)&&void 0!==e&&e.textarea&&h&&h.commentId===pn&&(u.current.setComment(h.comment),f?O({editorRef:u.current.editor}):p())}),[p,h,f,O]);const E=Boolean(y&&y!==e.description&&!s);return r?Object(j.jsx)(et.a,{id:"description","data-test-subj":"description",caseId:e.id,content:e.description,onChangeEditable:x,onSaveContent:v,editorRef:l,fieldName:"content",formSchema:jn,ref:u}):Object(j.jsx)(i.EuiPanel,{paddingSize:"none",hasBorder:!0,"data-test-subj":"description"},Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:n?"none":"m"},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",gutterSize:"s",css:hn({euiTheme:d,isCollapsed:n,hasUnsavedChanges:E})},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiText,{"data-test-subj":"description-title",size:"s"},Et.x)),Object(j.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},b.update?Object(j.jsx)(i.EuiButtonIcon,{"aria-label":Et.B,iconType:"pencil",onClick:()=>c(!0),"data-test-subj":"description-edit-icon"}):null),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonIcon,{"aria-label":n?Et.D:Et.o,iconType:n?"unfold":"fold",onClick:()=>o((e=>!e)),"data-test-subj":"description-collapse-icon"}))))),n?null:Object(j.jsx)(i.EuiFlexItem,{css:Object(j.css)("padding:",d.size.s,";padding-top:0;>div{padding:0;}","")},Object(j.jsx)(et.d,{content:e.description})),E?Object(j.jsx)(i.EuiFlexItem,{css:Object(j.css)("border-top:",d.border.thin,";padding:",d.size.s,";","")},Object(j.jsx)(i.EuiText,{color:"subdued",size:"xs","data-test-subj":"description-unsaved-draft"},Et.fb)):null))};fn.displayName="Description";var On=s(197),xn=s(204);const vn=({category:e})=>Object(j.jsx)(i.EuiText,{"data-test-subj":`category-viewer-${e}`,key:e,size:"s"},e);vn.displayName="CategoryViewer";const yn=Object(a.memo)(vn);var En=s(257);const Cn=({category:e,availableCategories:t,isLoading:s,onChange:n})=>{const{form:i}=Object(Te.useForm)({defaultValue:{category:e}}),{submit:o,isValid:r}=i;return Object(a.useEffect)((()=>{n&&n({isValid:r,submit:o})}),[r,n,o]),Object(j.jsx)(Te.Form,{form:i},Object(j.jsx)(En.a,{isLoading:s,availableCategories:t}))};Cn.displayName="CategoryFormWrapper";const An=n.a.memo((({isLoading:e,onSubmit:t,category:s})=>{const{permissions:n}=Object(g.a)(),[o,r]=Object(a.useState)(!1),{data:c=[],isLoading:l}=Object(On.a)(),[u,d]=Object(a.useState)({isValid:void 0,submit:async()=>({isValid:!1,data:{}})}),b=e||l,m=u.isValid;return Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween",responsive:!1,"data-test-subj":"cases-categories"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiTitle,{size:"xs"},Object(j.jsx)("h3",null,xn.c))),b&&Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"category-loading"}),!b&&n.update&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonIcon,{"data-test-subj":"category-edit-button","aria-label":xn.d,iconType:"pencil",onClick:()=>{r(!0)}}))),Object(j.jsx)(i.EuiHorizontalRule,{margin:"xs"}),Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"none","data-test-subj":"case-category"},!o&&Object(j.jsx)(i.EuiFlexItem,null,s?Object(j.jsx)(Fa,{onRemoveItem:()=>{t(null),r(!1)},tooltipContent:xn.h,buttonAriaLabel:xn.i,dataTestSubjPrefix:"category"},Object(j.jsx)(yn,{category:s})):Object(j.jsx)(i.EuiText,{size:"xs","data-test-subj":"no-categories"},xn.g)),o&&Object(j.jsx)(i.EuiFlexGroup,{"data-test-subj":"edit-category",direction:"column"},Object(j.jsx)(Cn,{onChange:d,category:s,availableCategories:c,isLoading:b}),Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButton,{color:"success","data-test-subj":"edit-category-submit",fill:!0,iconType:"save",onClick:async()=>{const{isValid:e,data:s}=await u.submit();var a,n;e&&t(null!==(a=null===(n=s.category)||void 0===n?void 0:n.trim())&&void 0!==a?a:null),r(!1)},size:"s",disabled:!m||b},xn.j)),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButtonEmpty,{"data-test-subj":"edit-category-cancel",iconType:"cross",onClick:()=>{r(!1)},size:"s"},xn.b)))))))}));An.displayName="EditCategory";var Sn=s(71);const wn=({isLoading:e,customFields:t,customFieldsConfiguration:s,onSubmit:o})=>{const{permissions:r}=Object(g.a)(),c=Object(a.useMemo)((()=>kn(s)),[s]),l=Object(a.useCallback)((e=>{o(e)}),[o]),u=c.map((s=>{const a=(0,Sn.a[s.type])().build(),n=t.find((e=>e.key===s.key)),o=a.Edit;return Object(j.jsx)(i.EuiFlexItem,{grow:!1,"data-test-subj":`case-custom-field-wrapper-${s.key}`,key:s.key},Object(j.jsx)(o,{isLoading:e,canUpdate:r.update,customFieldConfiguration:s,customField:n,onSubmit:l}))}));return Object(j.jsx)(n.a.Fragment,null,u)};wn.displayName="CustomFields";const In=n.a.memo(wn),kn=e=>Object(ie.sortBy)(e,(e=>e.label)),Tn=({ruleDetailsNavigation:e,caseData:t,actionsNavigation:s,showAlertDetails:c,useFetchAlertData:b})=>{const[m,p]=Object(a.useState)({type:"all",sortOrder:"asc",page:1,perPage:10}),{permissions:f}=Object(g.a)(),{caseAssignmentAuthorized:O,pushToServiceAuthorized:x}=Object(X.a)(),{data:v,isLoading:y}=G(t.id),{data:E,isLoading:C}=(e=>{const{showErrorToast:t}=Object(F.a)();return Object(o.useQuery)(u.e.caseUserActionsStats(e),(({signal:t})=>Object(l.h)(e,t)),{onError:e=>{t(e,{title:r.e})}})})(t.id),{data:A,isLoading:S}=(e=>{const{showErrorToast:t}=Object(F.a)();return Object(o.useQuery)(u.e.caseUsers(e),(({signal:t})=>Object(l.i)({caseId:e,signal:t})),{onError:e=>{t(e,{title:r.e})}})})(t.id),{data:w}=Object(oe.a)(),{userProfiles:I,reporterAsArray:k}=Object(de.k)({caseUsers:A,createdBy:t.createdBy}),T=Object(a.useMemo)((()=>t.assignees.map((e=>e.uid))),[t.assignees]),{data:R,isFetching:D}=Object(re.a)(),{onUpdateField:P,isLoading:M,loadingKey:L}=ya({caseData:t}),{isLoading:N,mutate:H}=(()=>{const{showErrorToast:e}=Object(F.a)(),t=Object(V.a)();return Object(o.useMutation)((({caseId:e,customFieldId:t,customFieldValue:s,caseVersion:a})=>Object(l.s)({caseId:e,customFieldId:t,request:{value:s,caseVersion:a}})),{mutationKey:u.d.replaceCustomField,onSuccess:()=>{t()},onError:t=>{e(t,{title:r.e})}})})(),_=M&&"assignees"===L||S||D,z=Object(a.useCallback)((e=>P({key:"status",value:e})),[P]),B=Object(a.useCallback)((e=>P({key:"tags",value:e})),[P]),U=Object(a.useCallback)((e=>P({key:"category",value:e})),[P]),$=Object(a.useCallback)((e=>P({key:"severity",value:e})),[P]),W=Object(a.useCallback)((e=>{const t=e.map((e=>({uid:e.uid})));Object(ie.isEqual)(t.sort(),T.sort())||P({key:"assignees",value:t})}),[T,P]),{isLoading:q,data:Q}=Object(ce.a)(),Y=Object(a.useCallback)((e=>{P({key:"connector",value:e})}),[P]),J=Object(a.useCallback)((e=>{H({caseId:t.id,customFieldId:e.key,customFieldValue:e.value,caseVersion:t.version})}),[H,t]),Z=Object(a.useCallback)((e=>{p((t=>({...t,page:1,type:e.type,sortOrder:e.sortOrder})))}),[p]),ee=!C&&!y&&!S&&v&&A&&E,te=x&&v&&Q,se=M&&"description"===L;return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiFlexItem,{grow:6},Object(j.jsx)(dn,{caseData:t,activeTab:h.a.ACTIVITY}),Object(j.jsx)(fn,{isLoadingDescription:se,caseData:t,onUpdateField:P}),Object(j.jsx)(i.EuiSpacer,{size:"l"}),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(an,{onUserActionsActivityChanged:Z,params:m,userActionsStats:E,isLoading:C})),Object(j.jsx)(i.EuiSpacer,{size:"l"}),(C||y||S)&&Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"case-view-loading-content",size:"l"}),ee?Object(j.jsx)(i.EuiFlexGroup,{direction:"column",responsive:!1,"data-test-subj":"case-view-activity"},Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(ha,{userProfiles:I,currentUserProfile:R,getRuleDetailsHref:null==e?void 0:e.href,onRuleDetailsClick:null==e?void 0:e.onClick,caseConnectors:v,data:t,casesConfiguration:w,actionsNavigation:s,onShowAlertDetails:c,onUpdateField:P,statusActionButton:f.update?Object(j.jsx)(Ue,{status:t.status,onStatusChanged:z,isLoading:M&&"status"===L}):null,useFetchAlertData:b,userActivityQueryParams:m,userActionsStats:E}))):null),Object(j.jsx)(i.EuiFlexItem,{grow:2,"data-test-subj":"case-view-page-sidebar"},Object(j.jsx)(i.EuiScreenReaderOnly,null,Object(j.jsx)("h2",null,d.m)),Object(j.jsx)(i.EuiFlexGroup,{direction:"column",responsive:!1,gutterSize:"xl"},O?Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(Va,{caseAssignees:t.assignees,currentUserProfile:R,onAssigneesChanged:W,isLoading:_,userProfiles:null!=I?I:new Map})):null,Object(j.jsx)(Aa,{isDisabled:!f.update,isLoading:M&&"severity"===L,selectedSeverity:t.severity,onSeverityChange:$}),Object(j.jsx)(Oa,{dataTestSubj:"case-view-user-list-reporter",theCase:t,headline:d.Y,users:k,userProfiles:I}),null!=A?Object(j.jsx)(Oa,{dataTestSubj:"case-view-user-list-participants",theCase:t,headline:d.R,loading:S,users:[...A.participants,...A.assignees],userProfiles:I}):null,Object(j.jsx)(Ye,{tags:t.tags,onSubmit:B,isLoading:M&&"tags"===L}),Object(j.jsx)(An,{category:t.category,onSubmit:U,isLoading:M&&"category"===L}),te?Object(j.jsx)(_e,{caseData:t,caseConnectors:v,supportedActionConnectors:Q,isLoading:q||M&&"connector"===L,onSubmit:Y,key:t.connector.id}):null,Object(j.jsx)(In,{isLoading:M&&"customFields"===L||N,customFields:t.customFields,customFieldsConfiguration:w.customFields,onSubmit:J}))))};Tn.displayName="CaseViewActivity";var Fn=s(82),Rn=s(120);const Dn=e=>{var t,s,a,n,i,o,r,c,l,u;const d=new Set;null==e||null===(t=e.aggregations)||void 0===t||null===(s=t.consumer)||void 0===s||null===(a=s.buckets)||void 0===a||a.forEach((({key:e,doc_count:t})=>{t>0&&Object(Rn.b)(e)&&d.add(e)})),null==e||null===(n=e.aggregations)||void 0===n||null===(i=n.producer)||void 0===i||null===(o=i.buckets)||void 0===o||o.forEach((({key:e,doc_count:t})=>{t>0&&Object(Rn.b)(e)&&d.add(e)}));const b=null!==(r=null==e||null===(c=e.aggregations)||void 0===c||null===(l=c.ruleTypeIds)||void 0===l||null===(u=l.buckets)||void 0===u?void 0:u.filter((({doc_count:e})=>e>0)).map((({key:e})=>e)))&&void 0!==r?r:[];return{featureIds:[...d],ruleTypeIds:b}},Pn=()=>Object(j.jsx)(i.EuiEmptyPrompt,{"data-test-subj":"caseViewAlertsEmpty",iconType:"casesApp",iconColor:"default",titleSize:"xs",body:Object(j.jsx)("p",null,d.d)});Pn.displayName="CaseViewAlertsEmpty";const Mn=({caseData:e,onAlertsTableLoaded:t})=>{var s;const{triggersActionsUi:n}=Object(c.g)().services,d=(e=>{const t=e.reduce(((e,t)=>t.type===M.a.alert?((Array.isArray(t.alertId)?t.alertId:[t.alertId]).forEach((t=>e.add(t))),e):e),new Set);return Array.from(t)})(e.comments),b=Object(a.useMemo)((()=>({ids:{values:d}})),[d]),{isLoading:m,data:p}=((e,t)=>{const{showErrorToast:s}=Object(F.a)(),{data:n,isInitialLoading:i,isLoading:c}=Object(o.useQuery)(u.e.alertFeatureIds(e),(({signal:t})=>Object(l.l)({query:{ids:{values:e}},signal:t})),{select:Dn,enabled:t,onError:e=>{s(e,{title:r.e})}});return Object(a.useMemo)((()=>({data:n,isLoading:(i||c)&&t})),[n,t,i,c])})(d,e.owner!==Y.Yb),g=e.owner===Y.Yb?`${e.owner}-case`:m?"":n.alertsTableConfigurationRegistry.getAlertConfigIdPerRuleTypes(null!==(s=null==p?void 0:p.ruleTypeIds)&&void 0!==s?s:[]),f=Object(a.useMemo)((()=>{var s;return{alertsTableConfigurationRegistry:n.alertsTableConfigurationRegistry,configurationId:g,id:`case-details-alerts-${e.owner}`,featureIds:e.owner===Y.Yb?[Fn.a.SIEM]:null!==(s=null==p?void 0:p.featureIds)&&void 0!==s?s:[],query:b,showAlertStatusWithFlapping:e.owner!==Y.Yb,onLoaded:t}}),[n.alertsTableConfigurationRegistry,g,e.owner,null==p?void 0:p.featureIds,b,t]);return 0===b.ids.values.length?Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(dn,{caseData:e,activeTab:h.a.ALERTS}),Object(j.jsx)(Pn,null))):m?Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiProgress,{size:"xs",color:"primary"}))):Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"case-view-alerts"},Object(j.jsx)(dn,{caseData:e,activeTab:h.a.ALERTS}),n.getAlertsStateTable(f))};Mn.displayName="CaseViewAlerts";var Ln=s(31),Nn=s(72),Hn=s(205),_n=s(208);const zn=({caseId:e,theFile:t})=>{const[s,o]=Object(a.useState)(!1),{owner:r,permissions:c}=Object(g.a)(),{client:l}=Object(nn.b)(),{showSuccessToast:u}=Object(F.a)(),{isLoading:d,mutate:b}=Object(_n.a)(),{showDeletionModal:m,onModalOpen:p,onConfirm:h,onCancel:f}=Object(Rs.a)({onDelete:()=>b({caseId:e,fileId:t.id})}),O=Object(a.useCallback)((()=>o(!s)),[s]),x=Object(a.useCallback)((()=>o(!1)),[]),v=Object(a.useMemo)((()=>{var e,s,a,n,o,b;const m=(null===(e=t.hash)||void 0===e?void 0:e.md5)||(null===(s=t.hash)||void 0===s?void 0:s.sha1)||(null===(a=t.hash)||void 0===a?void 0:a.sha256),g=[{name:Ln.l,icon:"download",href:l.getDownloadHref({fileKind:Object(on.a)(r[0]),id:t.id}),onClick:x,"data-test-subj":"cases-files-download-button"}],h=[{id:0,title:Ln.a,items:g},{id:1,title:Ln.f,items:[{name:"MD5",icon:"copyClipboard",disabled:!(null!==(n=t.hash)&&void 0!==n&&n.md5),onClick:()=>{var e;null!==(e=t.hash)&&void 0!==e&&e.md5&&navigator.clipboard.writeText(t.hash.md5).then((()=>{x(),u(Ln.g("md5"))}))},"data-test-subj":"cases-files-copy-md5-hash-button"},{name:"SHA1",icon:"copyClipboard",disabled:!(null!==(o=t.hash)&&void 0!==o&&o.sha1),onClick:()=>{var e;null!==(e=t.hash)&&void 0!==e&&e.sha1&&navigator.clipboard.writeText(t.hash.sha1).then((()=>{x(),u(Ln.g("sha1"))}))},"data-test-subj":"cases-files-copy-sha1-hash-button"},{name:"SHA256",icon:"copyClipboard",disabled:!(null!==(b=t.hash)&&void 0!==b&&b.sha256),onClick:()=>{var e;null!==(e=t.hash)&&void 0!==e&&e.sha256&&navigator.clipboard.writeText(t.hash.sha256).then((()=>{x(),u(Ln.g("sha256"))}))},"data-test-subj":"cases-files-copy-sha256-hash-button"}]}];return m&&g.push({name:Ln.f,icon:"copyClipboard",panel:1,"data-test-subj":"cases-files-copy-hash-button"}),c.delete&&g.push({name:Object(j.jsx)(i.EuiTextColor,{color:"danger"},Ln.j),icon:Object(j.jsx)(i.EuiIcon,{type:"trash",size:"m",color:"danger"}),onClick:()=>{x(),p()},disabled:d,"data-test-subj":"cases-files-delete-button"}),h}),[x,l,d,p,r,c,u,t]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiPopover,{id:`cases-files-popover-${t.id}`,key:`cases-files-popover-${t.id}`,"data-test-subj":`cases-files-popover-${t.id}`,button:Object(j.jsx)(i.EuiButtonIcon,{onClick:O,iconType:"boxesHorizontal","aria-label":Ln.a,color:"text",key:`cases-files-actions-popover-button-${t.id}`,"data-test-subj":`cases-files-actions-popover-button-${t.id}`}),isOpen:s,closePopover:x,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(j.jsx)(i.EuiContextMenu,{initialPanelId:0,panels:v,"data-test-subj":"cases-files-popover-context-menu"})),m&&Object(j.jsx)(Fs.a,{title:Ln.k,confirmButtonText:Ln.i,onCancel:f,onConfirm:h}))};zn.displayName="FileActionsPopoverButton";var Bn=s(206),Un=s(127);const $n=Object(a.lazy)((()=>s.e(20).then(s.bind(null,351)))),Vn=e=>{var t;return Object(j.jsx)(a.Suspense,{fallback:null!==(t=e.lazyLoadFallback)&&void 0!==t?t:Object(j.jsx)(i.EuiLoadingSpinner,{size:"xl"})},Object(j.jsx)($n,e))};var Xn=s(36);const Gn=({caseId:e})=>{const{owner:t,permissions:s}=Object(g.a)(),{showDangerToast:n,showErrorToast:o,showSuccessToast:r}=Object(F.a)(),{isLoading:c,mutateAsync:u}=Object(Ze.a)(),d=Object(V.a)(),[b,m]=Object(a.useState)(!1),p=()=>m(!1),h=Object(a.useCallback)((e=>{o(e,{title:Ln.m})}),[o]),f=Object(a.useCallback)((async s=>{if(0===s.length)return void n(Ln.m);const a=s[0];try{var i,o;await u({caseId:e,caseOwner:t[0],attachments:[{type:Xn.AttachmentType.externalReference,externalReferenceId:a.id,externalReferenceStorage:{type:Xn.ExternalReferenceStorageType.savedObject,soType:Un.FILE_SO_TYPE},externalReferenceAttachmentTypeId:Y.R,externalReferenceMetadata:{files:[{name:a.fileJSON.name,extension:null!==(i=a.fileJSON.extension)&&void 0!==i?i:"",mimeType:null!==(o=a.fileJSON.mimeType)&&void 0!==o?o:"",created:a.fileJSON.created}]}}]}),d(),r(Ln.w(a.fileJSON.name))}catch(t){return Object(l.d)({caseId:e,fileIds:[a.id]})}p()}),[e,u,t,d,n,r]);return s.create&&s.update?Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiButton,{"data-test-subj":"cases-files-add",iconType:"plusInCircle",isDisabled:c,isLoading:c,onClick:()=>m(!0)},Ln.d),b&&Object(j.jsx)(i.EuiModal,{"data-test-subj":"cases-files-add-modal",onClose:p},Object(j.jsx)(i.EuiModalHeader,null,Object(j.jsx)(i.EuiModalHeaderTitle,null,Ln.d)),Object(j.jsx)(i.EuiModalBody,null,Object(j.jsx)(Vn,{kind:Object(on.a)(t[0]),onDone:f,onError:h,meta:{caseIds:[e],owner:[t[0]]}})))):null};Gn.displayName="AddFile";const Wn=n.a.memo(Gn);var qn=s(207);const Qn=({caseId:e})=>Object(j.jsx)(i.EuiEmptyPrompt,{title:Object(j.jsx)("h3",null,Ln.q),"data-test-subj":"cases-files-table-empty",titleSize:"xs",actions:Object(j.jsx)(Wn,{caseId:e})});Qn.displayName="EmptyFilesTable";const Yn=({caseId:e,items:t,pagination:s,onChange:o,isLoading:r})=>{const{isPreviewVisible:c,showPreview:l,closePreview:u}=Object(qn.a)(),[d,b]=Object(a.useState)(),m=Object(a.useCallback)((e=>({"data-test-subj":`cases-files-table-row-${e.id}`})),[]),p=(({caseId:e,showPreview:t})=>[{name:Ln.p,field:"name","data-test-subj":"cases-files-table-filename",render:(e,s)=>Object(j.jsx)(Hn.a,{file:s,showPreview:()=>t(s)}),width:"60%"},{name:Ln.y,"data-test-subj":"cases-files-table-filetype",render:e=>Object(j.jsx)("span",null,Object(Nn.c)(e.mimeType))},{name:Ln.h,field:"created","data-test-subj":"cases-files-table-date-added",dataType:"date"},{name:Ln.a,width:"120px",actions:[{name:Ln.a,render:t=>Object(j.jsx)(zn,{caseId:e,theFile:t})}]}])({caseId:e,showPreview:e=>{b(e),l()}});return r?Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiSpacer,{size:"l"}),Object(j.jsx)(i.EuiSkeletonText,{"data-test-subj":"cases-files-table-loading",lines:10})):Object(j.jsx)(n.a.Fragment,null,s.totalItemCount>0&&Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(i.EuiSpacer,{size:"xl"}),Object(j.jsx)(i.EuiText,{size:"xs",color:"subdued","data-test-subj":"cases-files-table-results-count"},Ln.v(t.length))),Object(j.jsx)(i.EuiSpacer,{size:"s"}),Object(j.jsx)(i.EuiBasicTable,{tableCaption:Ln.n,items:t,rowHeader:"name",columns:p,pagination:s,onChange:o,"data-test-subj":"cases-files-table",noItemsMessage:Object(j.jsx)(Qn,{caseId:e}),rowProps:m}),c&&void 0!==d&&Object(j.jsx)(Bn.a,{closePreview:u,selectedFile:d}))};Yn.displayName="FilesTable";const Kn=({caseId:e,onSearch:t})=>Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center"},Object(j.jsx)(Wn,{caseId:e}),Object(j.jsx)(i.EuiFlexItem,{grow:!1,style:{minWidth:400}},Object(j.jsx)(i.EuiFieldSearch,{fullWidth:!0,placeholder:Ln.u,onSearch:t,incremental:!1,"data-test-subj":"cases-files-search"})));Kn.displayName="FilesUtilityBar";const Jn={page:0,perPage:10},Zn=({caseData:e})=>{var t;const[s,n]=Object(a.useState)(Jn),{data:c,isLoading:l,isPreviousData:d}=(({caseId:e,page:t,perPage:s,searchTerm:a})=>{const{owner:n}=Object(g.a)(),{showErrorToast:i}=Object(F.a)(),{client:c}=Object(nn.b)();return Object(o.useQuery)(u.e.caseFiles(e,{page:t,perPage:s,searchTerm:a}),(()=>c.list({kind:Object(on.a)(n[0]),page:t+1,...a&&{name:`*${a}*`},perPage:s,meta:{caseIds:[e]}})),{keepPreviousData:!0,onError:e=>{i(e,{title:r.e})}})})({...s,caseId:e.id}),b=Object(a.useCallback)((({page:e})=>{e&&!d&&n({...s,page:e.index,perPage:e.size})}),[s,d]),m=Object(a.useCallback)((e=>{const t=e.trim();Object(v.isEqual)(t,s.searchTerm)||n({...s,searchTerm:t})}),[s]),p=Object(a.useMemo)((()=>{var e;return{pageIndex:s.page,pageSize:s.perPage,totalItemCount:null!==(e=null==c?void 0:c.total)&&void 0!==e?e:0,pageSizeOptions:[10,25,50],showPerPageOptions:!0}}),[s.page,s.perPage,null==c?void 0:c.total]);return Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(dn,{caseData:e,activeTab:h.a.FILES}),Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(Kn,{caseId:e.id,onSearch:m}),Object(j.jsx)(Yn,{caseId:e.id,isLoading:l,items:null!==(t=null==c?void 0:c.files)&&void 0!==t?t:[],onChange:b,pagination:p})))))};Zn.displayName="CaseViewFiles";const ei=A.i18n.translate("xpack.cases.caseView.metrics.totalAlerts",{defaultMessage:"Total alerts"}),ti=A.i18n.translate("xpack.cases.caseView.metrics.associatedUsers",{defaultMessage:"Associated users"}),si=A.i18n.translate("xpack.cases.caseView.metrics.associatedHosts",{defaultMessage:"Associated hosts"}),ai=A.i18n.translate("xpack.cases.caseView.metrics.isolatedHosts",{defaultMessage:"Isolated hosts"}),ni=A.i18n.translate("xpack.cases.caseView.metrics.totalConnectors",{defaultMessage:"Total connectors"}),ii=A.i18n.translate("xpack.cases.caseView.metrics.lifespan.caseCreated",{defaultMessage:"Case created"}),oi=A.i18n.translate("xpack.cases.caseView.metrics.lifespan.inProgressDuration",{defaultMessage:"In progress duration"}),ri=A.i18n.translate("xpack.cases.caseView.metrics.lifespan.openDuration",{defaultMessage:"Open duration"}),ci=A.i18n.translate("xpack.cases.caseView.metrics.lifespan.openToCloseDuration",{defaultMessage:"Duration from creation to close"}),li=A.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopened",{defaultMessage:"(reopened)"}),ui=A.i18n.translate("xpack.cases.caseView.metrics.lifespan.reopenedOn",{defaultMessage:"Reopened "}),di=n.a.memo((({metrics:e,features:t})=>{const s=bi(e,t),{euiTheme:a}=Object(i.useEuiTheme)();return Object(j.jsx)(n.a.Fragment,null,s.map((({id:e,title:t,value:s})=>Object(j.jsx)(i.EuiFlexItem,{key:t,"data-test-subj":`case-metrics-totals-${e}`},Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},Object(j.jsx)(i.EuiFlexItem,null,t),Object(j.jsx)(i.EuiFlexItem,{css:Object(j.css)("font-size:",a.size.l,";font-weight:bold;","")},s))))))}));di.displayName="CaseViewMetricItems";const bi=(e,t)=>{var s,n,i,o,r,c;const{alerts:l,actions:u,connectors:d}=null!=e?e:{},b=null!==(s=null==d?void 0:d.total)&&void 0!==s?s:0,m=null!==(n=null==l?void 0:l.count)&&void 0!==n?n:0,j=null!==(i=null==l||null===(o=l.users)||void 0===o?void 0:o.total)&&void 0!==i?i:0,p=null!==(r=null==l||null===(c=l.hosts)||void 0===c?void 0:c.total)&&void 0!==r?r:0,g=mi(u);return Object(a.useMemo)((()=>[[f.a.ALERTS_COUNT,{title:ei,value:m}],[f.a.ALERTS_USERS,{title:ti,value:j}],[f.a.ALERTS_HOSTS,{title:si,value:p}],[f.a.ACTIONS_ISOLATE_HOST,{title:ai,value:g}],[f.a.CONNECTORS,{title:ni,value:b}]].reduce(((e,[s,a])=>[...e,...t.includes(s)?[{id:s,...a}]:[]]),[])),[t,m,j,p,g,b])},mi=e=>null!=e&&e.isolateHost?Math.max(e.isolateHost.isolate.total-e.isolateHost.unisolate.total,0):0;var ji=s(226),pi=s.n(ji),gi=s(218),hi=s(185);const fi=n.a.memo((({metrics:e,features:t})=>{const s=Oi(e,t),{euiTheme:a}=Object(i.useEuiTheme)();if(!s)return null;const n=[{key:"case-created",component:Object(j.jsx)(Ci,{title:ii,value:Object(j.jsx)(xi,{date:s.creationDate}),euiTheme:a}),dataTestSubject:"case-metrics-lifespan-item-creation-date"},{key:"in-progress-duration",component:Object(j.jsx)(Ci,{title:oi,value:vi(s.statusInfo.inProgressDuration),euiTheme:a}),dataTestSubject:"case-metrics-lifespan-item-inProgress-duration"},{key:"open-duration",component:Object(j.jsx)(Ci,{title:ri,value:yi(s.statusInfo.openDuration),euiTheme:a}),dataTestSubject:"case-metrics-lifespan-item-open-duration"},{key:"duration-from-creation-to-close",component:Object(j.jsx)(Ai,{title:ci,value:Ei(s.creationDate,s.closeDate),reopens:s.statusInfo.reopenDates,euiTheme:a}),dataTestSubject:"case-metrics-lifespan-item-open-to-close-duration"}];return Object(j.jsx)(i.EuiFlexItem,{grow:3},Object(j.jsx)(i.EuiFlexGrid,{columns:2,gutterSize:"s",responsive:!1},n.map((({component:e,dataTestSubject:t,key:s})=>Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":t,key:s},e)))))}));fi.displayName="CaseStatusMetrics";const Oi=(e,t)=>Object(a.useMemo)((()=>{var s;const a=null!==(s=null==e?void 0:e.lifespan)&&void 0!==s?s:{closeDate:"",creationDate:"",statusInfo:{inProgressDuration:0,reopenDates:[],openDuration:0}};if(t.includes(f.a.LIFESPAN))return a}),[t,e]),xi=n.a.memo((({date:e})=>Object(gi.a)(e).isValid()?Object(j.jsx)($.a,{"data-test-subj":"case-metrics-lifespan-creation-date",value:e,stripMs:!0}):Object(hi.a)()));xi.displayName="CreationDate";const vi=e=>e<=0?Object(hi.a)():yi(e),yi=e=>pi()(e,{compact:!0,verbose:!0}),Ei=(e,t)=>{if(null==t)return;const s=Object(gi.a)(e),a=Object(gi.a)(t);return s.isValid()&&a.isValid()?yi(a.diff(s)):void 0},Ci=n.a.memo((({title:e,value:t,euiTheme:s})=>Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{css:Object(j.css)("font-size:",s.size.m,";font-weight:bold;","")},e),Object(j.jsx)(i.EuiFlexItem,null,t))));Ci.displayName="CaseStatusMetricsItem";const Ai=n.a.memo((({title:e,value:t,reopens:s,euiTheme:a})=>{const n=Si(t,s);return Object(j.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"s",responsive:!1},Object(j.jsx)(i.EuiFlexItem,{css:Object(j.css)("font-size:",a.size.m,";font-weight:bold;","")},e),null!=t&&wi(s)?Object(j.jsx)(Ii,{value:n,explanationValues:s}):Object(j.jsx)(i.EuiFlexItem,null,n))}));Ai.displayName="OpenCloseDuration";const Si=(e,t)=>null==e?Object(hi.a)():t.length>0?`${e} ${li}`:e,wi=e=>e.length>0,Ii=n.a.memo((({value:e,explanationValues:t})=>{const s=Object(j.jsx)(n.a.Fragment,null,ui,t.map(((e,s)=>Object(j.jsx)(n.a.Fragment,{key:`explanation-value-${s}`},Object(j.jsx)($.a,{"data-test-subj":`case-metrics-lifespan-reopen-${s}`,value:e,stripMs:!0}),ki(s,t.length)?Object(j.jsx)(i.EuiSpacer,{size:"xs"}):null))));return Object(j.jsx)(i.EuiFlexItem,{"data-test-subj":"case-metrics-lifespan-reopen-icon"},Object(j.jsx)(i.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},e),Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiIconTip,{content:s,position:"right"}))))}));Ii.displayName="ValueWithExplanationIcon";const ki=(e,t)=>e+1<t,Ti=n.a.memo((({caseId:e})=>{const{metricsFeatures:t}=Object(X.a)(),{data:s,isLoading:a}=((e,t)=>{const s=Object(c.j)();return Object(o.useQuery)(u.e.caseMetrics(e,t),(async({signal:s})=>({metrics:await Object(l.m)(e,t,s)})),{onError:e=>{"AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:r.e})}})})(e,t);return 0===t.length?null:Object(j.jsx)(i.EuiPanel,{"data-test-subj":"case-view-metrics-panel",hasShadow:!1,hasBorder:!0},Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"xl",wrap:!0,responsive:!1,alignItems:"center"},a||!s?Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"case-view-metrics-spinner",size:"l"})):Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(di,{metrics:s.metrics,features:t}),Object(j.jsx)(fi,{metrics:s.metrics,features:t}))))}));Ti.displayName="CaseViewMetrics";const Fi=n.a.memo((({caseData:e,refreshRef:t,ruleDetailsNavigation:s,actionsNavigation:o,showAlertDetails:r,useFetchAlertData:c,onAlertsTableLoaded:l})=>{var u;const{features:d}=Object(g.a)(),{urlParams:b}=Object(m.n)(),p=Object(V.a)();Object(ne.b)(e.title);const f=(O=null==b?void 0:b.tabId)&&Object.values(h.a).includes(O)?O:h.a.ACTIVITY;var O;const x=null===(u=Object(ae.a)())||void 0===u?void 0:u.ui,{onUpdateField:v,isLoading:y,loadingKey:E}=ya({caseData:e});Object(a.useEffect)((()=>{let e=!1;if(t)return t.current={refreshCase:async()=>{e||y||p()}},()=>{e=!0,t.current=null}}),[y,t,p]);const C=Object(a.useCallback)((e=>v({key:"title",value:e})),[v]);return Object(j.jsx)(n.a.Fragment,null,Object(j.jsx)(Q.a,{border:!1,showBackButton:!0,"data-test-subj":"case-view-title",titleNode:Object(j.jsx)(se,{isLoading:y&&"title"===E,title:e.title,onSubmit:C}),title:e.title},Object(j.jsx)(q,{caseData:e,isLoading:y&&("status"===E||"settings"===E),onUpdateField:v})),Object(j.jsx)(i.EuiFlexGroup,null,Object(j.jsx)(i.EuiFlexItem,null,Object(j.jsx)(Ti,{"data-test-subj":"case-view-metrics",caseId:e.id}))),Object(j.jsx)(i.EuiSpacer,{size:"l"}),Object(j.jsx)(i.EuiFlexGroup,{"data-test-subj":`case-view-tab-content-${f}`,alignItems:"baseline"},f===h.a.ACTIVITY&&Object(j.jsx)(Tn,{ruleDetailsNavigation:s,caseData:e,actionsNavigation:o,showAlertDetails:r,useFetchAlertData:c}),f===h.a.ALERTS&&d.alerts.enabled&&Object(j.jsx)(Mn,{caseData:e,onAlertsTableLoaded:l}),f===h.a.FILES&&Object(j.jsx)(Zn,{caseData:e})),null!=x&&x.renderTimelineDetailsPanel?x.renderTimelineDetailsPanel():null)}));Fi.displayName="CaseViewPage";const Ri=()=>Object(j.jsx)(i.EuiFlexGroup,{gutterSize:"none",justifyContent:"center",alignItems:"center"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiLoadingSpinner,{"data-test-subj":"case-view-loading",size:"xl"}))),Di=n.a.memo((({actionsNavigation:e,ruleDetailsNavigation:t,showAlertDetails:s,timelineIntegration:n,useFetchAlertData:i,onAlertsTableLoaded:h,refreshRef:f})=>{const{spaces:O}=Object(c.g)().services,{detailName:x}=Object(m.k)(),{basePath:v}=Object(g.a)(),{data:y,isLoading:E,isError:C,refetch:A}=(e=>{const t=Object(c.j)();return Object(o.useQuery)(u.e.case(e),(({signal:t})=>Object(l.t)({caseId:e,includeComments:!0,signal:t})),{onError:e=>{"AbortError"!==e.name&&t.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:r.e})}})})(x);Object(a.useEffect)((()=>{if(O&&"aliasMatch"===(null==y?void 0:y.outcome)&&null!=y.aliasTargetId){const e=`${v}${Object(m.c)({detailName:y.aliasTargetId})}`;O.ui.redirectLegacyUrl({path:`${e}${window.location.search}${window.location.hash}`,aliasPurpose:y.aliasPurpose,objectNoun:d.j})}}),[v,y,O]);const S=Object(a.useCallback)((()=>{if(y&&O&&"conflict"===y.outcome&&null!=y.aliasTargetId){const e=`${v}${Object(m.c)({detailName:y.aliasTargetId})}${window.location.search}${window.location.hash}`;return O.ui.components.getLegacyUrlConflict({objectNoun:d.j,currentObjectId:y.case.id,otherObjectId:y.aliasTargetId,otherObjectPath:e})}return null}),[v,y,O]);return C?Object(j.jsx)(p,{caseId:x}):E?Object(j.jsx)(Ri,null):y?Object(j.jsx)(b.b,{timelineIntegration:n},S(),Object(j.jsx)(Fi,{caseData:y.case,fetchCase:A,actionsNavigation:e,ruleDetailsNavigation:t,showAlertDetails:s,useFetchAlertData:i,onAlertsTableLoaded:h,refreshRef:f})):null}));Ri.displayName="CaseViewLoading",Di.displayName="CaseView"}])]);