/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[15],{133:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s={jira:["jira"],resilient:["resilient"],servicenow:["servicenow"],jiraGetFieldsByIssueType:(e,t)=>[...s.jira,e,"getFields",t],jiraGetIssueTypes:e=>[...s.jira,e,"getIssueType"],jiraGetIssues:(e,t)=>[...s.jira,e,"getIssues",t],jiraGetIssue:(e,t)=>[...s.jira,e,"getIssue",t],resilientGetIncidentTypes:e=>[...s.resilient,e,"getIncidentTypes"],resilientGetSeverity:e=>[...s.resilient,e,"getSeverity"],servicenowGetChoices:(e,t)=>[...s.servicenow,e,"getChoices",t]}},135:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=({connector_id:e,service_message:t,...n})=>({...n,actionId:e,...t&&{serviceMessage:t}})},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var s=n(81),i=n(135);async function r({http:e,connectorId:t,signal:n}){const r=await e.post(Object(s.b)(t),{body:JSON.stringify({params:{subAction:"incidentTypes",subActionParams:{}}}),signal:n});return Object(i.a)(r)}async function o({http:e,connectorId:t,signal:n}){const r=await e.post(Object(s.b)(t),{body:JSON.stringify({params:{subAction:"severity",subActionParams:{}}}),signal:n});return Object(i.a)(r)}},210:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n(44),i=n(45),r=n(133),o=n(172),a=n(151);const c=({http:e,connector:t})=>{var n;const{showErrorToast:c}=Object(i.a)();return Object(s.useQuery)(r.a.resilientGetIncidentTypes(null!==(n=null==t?void 0:t.id)&&void 0!==n?n:""),(({signal:n})=>{var s;return Object(o.a)({http:e,signal:n,connectorId:null!==(s=null==t?void 0:t.id)&&void 0!==s?s:""})}),{enabled:Boolean(t),staleTime:6e4,onSuccess:e=>{var t;e.status&&"error"===e.status&&c(new Error(a.a),{title:a.a,toastMessage:`${null!==(t=e.serviceMessage)&&void 0!==t?t:e.message}`})},onError:e=>{c(e,{title:a.a})}})}},211:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n(44),i=n(45),r=n(133),o=n(172),a=n(151);const c=({http:e,connector:t})=>{var n;const{showErrorToast:c}=Object(i.a)();return Object(s.useQuery)(r.a.resilientGetSeverity(null!==(n=null==t?void 0:t.id)&&void 0!==n?n:""),(({signal:n})=>{var s;return Object(o.b)({http:e,signal:n,connectorId:null!==(s=null==t?void 0:t.id)&&void 0!==s?s:""})}),{enabled:Boolean(t),staleTime:6e4,onSuccess:e=>{var t;e.status&&"error"===e.status&&c(new Error(a.d),{title:a.d,toastMessage:`${null!==(t=e.serviceMessage)&&void 0!==t?t:e.message}`})},onError:e=>{c(e,{title:a.d})}})}},342:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return b}));var s=n(4),i=n(5),r=n(21),o=n(24),a=n(8),c=n(210),l=n(211),u=n(151),d=n(3);const b=({connector:e})=>{const{http:t}=Object(a.g)().services,{isLoading:n,isFetching:b,data:v}=Object(c.a)({http:t,connector:e}),{isLoading:j,isFetching:p,data:g}=Object(l.a)({http:t,connector:e}),f=null==v?void 0:v.data,h=null==g?void 0:g.data,m=n||b,y=j||p,O=Object(s.useMemo)((()=>(null!=h?h:[]).map((e=>({value:e.id.toString(),text:e.name})))),[h]),I=Object(s.useMemo)((()=>f?f.map((e=>({label:e.name,value:e.id.toString()}))):[]),[f]);return Object(d.jsx)("span",{"data-test-subj":"connector-fields-resilient"},Object(d.jsx)(r.UseField,{path:"fields.incidentTypes",config:{defaultValue:[]}},(e=>{const{isInvalid:t,errorMessage:n}=Object(r.getFieldValidityAndErrorMessage)(e),s=e.value&&null!=f&&f.length?e.value.map((e=>{var t,n;return{value:e,label:null!==(t=null===(n=f.find((t=>e===t.id.toString())))||void 0===n?void 0:n.name)&&void 0!==t?t:""}})):[];return Object(d.jsx)(i.EuiFormRow,{id:"indexConnectorSelectSearchBox",fullWidth:!0,label:u.b,isInvalid:t,error:n},Object(d.jsx)(i.EuiComboBox,{"data-test-subj":"incidentTypeComboBox",fullWidth:!0,isClearable:!0,isDisabled:m,isLoading:m,onChange:t=>{e.setValue(t.map((e=>e.value)))},options:I,placeholder:u.c,selectedOptions:s}))})),Object(d.jsx)(i.EuiSpacer,{size:"m"}),Object(d.jsx)(r.UseField,{path:"fields.severityCode",component:o.SelectField,config:{label:u.e},componentProps:{euiFieldProps:{"data-test-subj":"severitySelect",options:O,hasNoInitialSelection:!0,fullWidth:!0,disabled:y,isLoading:y}}}),Object(d.jsx)(i.EuiSpacer,{size:"m"}))};b.displayName="ResilientFields"}}]);