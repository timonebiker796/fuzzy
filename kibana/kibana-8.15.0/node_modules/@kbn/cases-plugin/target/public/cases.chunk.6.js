/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[6],{128:function(e,t,s){"use strict";s.r(t),s.d(t,"CasesRoutes",(function(){return Qt})),s.d(t,"default",(function(){return Qt}));var a=s(4),n=s.n(a),i=s(27),l=s(12),c=s(55),o=s(59),r=s.n(o);const u={services:{}},d=Object(a.createContext)(u);var j=s(269),b=s.n(j),p=s(3);const m=({children:e,component:t,render:s,...l})=>{const c=Object(a.useMemo)((()=>{if(t)return e=>Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(x,null),Object(p.jsx)(t,e))}),[t]);if(c)return Object(p.jsx)(i.Route,r()({},l,{component:c}));if(s||"function"==typeof e){const t="function"==typeof e?e:s;return Object(p.jsx)(i.Route,r()({},l,{render:e=>Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(x,null),t(e))}))}return Object(p.jsx)(i.Route,l,Object(p.jsx)(x,null),e)},x=()=>{const{executionContext:e}=Object(a.useContext)(d).services,t=Object(i.useRouteMatch)();return function(e,t){b()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},O=({legacySwitch:e=!0,children:t})=>{const s=Object(i.useRouteMatch)();return e?Object(p.jsx)(i.Switch,null,t):Object(p.jsx)(c.Routes,null,a.Children.map(t,(e=>{if(n.a.isValidElement(e)&&e.type===m){var a;const i=Object(l.replace)(null==e?void 0:e.props.path,s.url+"/",""),o="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(p.jsx)(c.Route,{path:i,element:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(x,null),(null==e||null===(a=e.props)||void 0===a?void 0:a.component)&&Object(p.jsx)(e.props.component,null)||o&&o()||t)})}return e})))};var g=s(116),f=s(5),y=s(34),h=s(241),F=s(194),v=s(113),E=s(1);const C=E.i18n.translate("xpack.cases.callout.updateToPlatinumTitle",{defaultMessage:"Upgrade to an appropriate license"}),k=E.i18n.translate("xpack.cases.callout.appropriateLicense",{defaultMessage:"appropriate license"}),T=E.i18n.translate("xpack.cases.callout.cloudDeploymentLink",{defaultMessage:"cloud deployment"}),w=()=>Object(p.jsx)(f.EuiCallOut,{title:C,id:"case-callout-license-info",iconType:"gear","data-test-subj":"case-callout-license-info"},Object(p.jsx)(v.FormattedMessage,{defaultMessage:"Assigning users to cases or opening cases in external systems is available when you have the {appropriateLicense}, are using a {cloud}, or are testing out a Free Trial.",id:"xpack.cases.platinumLicenseCalloutMessage",values:{appropriateLicense:Object(p.jsx)(f.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},k),cloud:Object(p.jsx)(f.EuiLink,{href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank"},T)}}));w.displayName="PlatinumLicenseCalloutComponent";const I=n.a.memo(w),S=()=>{const{euiTheme:e}=Object(f.useEuiTheme)(),{isAtLeastPlatinum:t}=Object(F.a)();return t()?null:Object(p.jsx)(f.EuiFlexGroup,{gutterSize:"none",css:Object(p.css)({marginBottom:e.size.l},"",""),"data-test-subj":"case-callouts"},Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(I,null)))};S.displayName="CaseCalloutsComponent";const M=n.a.memo(S);var L=s(182),N=s(242),z=s(253),B=s(184),D=s(78),P=s(39),A=s(142),G=s(57);const V=({actionsErrors:e})=>{const{permissions:t}=Object(G.a)(),{getCreateCaseUrl:s,navigateToCreateCase:i}=Object(y.m)(),{euiTheme:l}=Object(f.useEuiTheme)(),c=Object(a.useCallback)((e=>{e.preventDefault(),i()}),[i]);return t.create||t.settings?Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiFlexGroup,{responsive:!1,css:Object(p.css)("&{@media only screen and (max-width: ",l.breakpoint.s,"){flex-direction:column;}}","")},t.settings&&Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(A.b,{label:D.m,showToolTip:!Object(P.isEmpty)(e),msgTooltip:Object(P.isEmpty)(e)?Object(p.jsx)(n.a.Fragment,null):Object(p.jsx)(n.a.Fragment,null,e[0].description),titleTooltip:Object(P.isEmpty)(e)?"":e[0].title})),t.create&&Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(A.d,{fill:!0,onClick:c,href:s(),iconType:"plusInCircle","data-test-subj":"createNewCaseBtn"},D.o)))):null};V.displayName="NavButtons";const _=({actionsErrors:e})=>Object(p.jsx)(B.a,{title:D.H,border:!0,"data-test-subj":"cases-all-title"},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"m",wrap:!0,"data-test-subj":"all-cases-header"},Object(p.jsx)(V,{actionsErrors:e})));_.displayName="CasesTableHeader";const R=()=>{Object(L.a)(y.a.cases);const{data:e=null}=Object(h.a)(),t=Object(a.useMemo)((()=>Object(N.a)(e)),[e]);return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(M,null),Object(p.jsx)(_,{actionsErrors:t}),Object(p.jsx)(z.a,null))};R.displayName="AllCases";var U=s(24),W=s(21),$=s(136),H=s(254);Object(W.getUseField)({component:U.Field});const q=n.a.memo((({afterCaseCreated:e,onCancel:t,onSuccess:s,timelineIntegration:a,withSteps:n})=>(Object(L.a)(y.a.casesCreate),Object(p.jsx)(f.EuiPageSection,{restrictWidth:!0},Object(p.jsx)(B.a,{showBackButton:!0,"data-test-subj":"case-create-title",title:$.h}),Object(p.jsx)(H.a,{afterCaseCreated:e,onCancel:t,onSuccess:s,timelineIntegration:a,withSteps:n})))));q.displayName="CreateCase";var Q=s(121),Y=s(8),J=s(44),K=s(46),X=s(179),Z=s(76),ee=s(155),te=s(236),se=s(146),ae=s(6);const ne=({isLoading:e,casesField:t,selectedActionType:s,selectedThirdParty:n})=>{const i=Object(a.useMemo)((()=>Object(P.capitalize)(s)),[s]);return Object(p.jsx)(f.EuiFlexGroup,{"data-test-subj":"static-mappings",alignItems:"center",responsive:!1},Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},Object(p.jsx)(f.EuiFlexItem,{component:"span",grow:!1},Object(p.jsx)(f.EuiCode,{"data-test-subj":"field-mapping-source"},t)),Object(p.jsx)(f.EuiFlexItem,{component:"span",grow:!1},Object(p.jsx)(f.EuiIcon,{type:"sortRight"})))),Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)(f.EuiFlexGroup,{component:"span",justifyContent:"spaceBetween",responsive:!1},Object(p.jsx)(f.EuiFlexItem,{component:"span",grow:!1},e?Object(p.jsx)(f.EuiLoadingSpinner,{size:"m"}):Object(p.jsx)(f.EuiCode,{"data-test-subj":"field-mapping-target"},n)))),Object(p.jsx)(f.EuiFlexItem,null,e?Object(p.jsx)(f.EuiLoadingSpinner,{size:"m"}):i))};ne.displayName="FieldMappingRow";const ie=n.a.memo(ne),le=({actionTypeName:e,isLoading:t,mappings:s})=>{const a=Object(f.useEuiFontSize)("s").fontSize;return s.length?Object(p.jsx)(f.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(p.jsx)(f.EuiFlexItem,null," ",Object(p.jsx)(f.EuiFlexGroup,{responsive:!1},Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)("span",{className:"euiFormLabel"},se.p)),Object(p.jsx)(f.EuiFlexItem,{"data-test-subj":"case-configure-field-mappings-second-col-label"},Object(p.jsx)("span",{className:"euiFormLabel"},se.q(e))),Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)("span",{className:"euiFormLabel"},se.r)))),Object(p.jsx)(f.EuiFlexItem,null,Object(p.jsx)("div",{"data-test-subj":"case-configure-field-mappings-row-wrapper",css:Object(p.css)("margin:10px 0;font-size:",a,";","")},s.map((e=>{var s;return Object(p.jsx)(ie,{key:`${e.source}`,casesField:e.source,isLoading:t,selectedActionType:e.actionType,selectedThirdParty:null!==(s=e.target)&&void 0!==s?s:"not_mapped"})}))))):null};le.displayName="FieldMapping";const ce=n.a.memo(le),oe=({actionTypeName:e,connectorType:t,isLoading:s,mappings:n})=>{const i=Object(a.useMemo)((()=>n.length>0||s?{desc:se.n(e),color:"subdued"}:t===ae.k.casesWebhook?{desc:se.d,color:"subdued"}:{desc:se.o(e),color:"danger"}),[n.length,s,e,t]);return Object(p.jsx)(f.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiText,{size:"xs","data-test-subj":"field-mapping-text"},Object(p.jsx)("h4",null,se.s(e)),Object(p.jsx)(f.EuiTextColor,{"data-test-subj":"field-mapping-desc",color:i.color},i.desc))),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(ce,{actionTypeName:e,"data-test-subj":"case-mappings-field",isLoading:s,mappings:n})))};oe.displayName="Mapping";const re=n.a.memo(oe);var ue=s(141),de=s(58),je={name:"qxc5j0",styles:"label{width:100%;}"};const be=({actionTypes:e,connectors:t,disabled:s,handleShowEditFlyout:i,isLoading:l,mappings:c,onChangeConnector:o,selectedConnector:r,updateConnectorDisabled:u})=>{var d;const{actions:j}=Object(Y.c)(),b=Object(a.useMemo)((()=>t.find((e=>e.id===r.id))),[t,r.id]),{permissions:m}=Object(G.a)(),x=m.connectors&&j.read,O=null!==(d=null==b?void 0:b.name)&&void 0!==d?d:"none",g=Object(a.useMemo)((()=>{var t,s;return null!==(t=null===(s=e.find((e=>e.id===r.type)))||void 0===s?void 0:s.name)&&void 0!==t?t:se.A}),[e,r.type]),y=Object(a.useMemo)((()=>Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},se.u),Object(p.jsx)(f.EuiFlexItem,{grow:!1},"none"!==O&&Object(p.jsx)(f.EuiLink,{disabled:u,onClick:i,"data-test-subj":"case-configure-update-selected-connector-button"},se.B(O))))),[O,i,u]);return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(f.EuiDescribedFormGroup,{fullWidth:!0,title:Object(p.jsx)("h3",null,se.v),description:se.t,"data-test-subj":"case-connectors-form-group"},Object(p.jsx)(f.EuiFormRow,{fullWidth:!0,css:je,label:y,"data-test-subj":"case-connectors-form-row"},Object(p.jsx)(f.EuiFlexGroup,{direction:"column"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},x?Object(p.jsx)(te.a,{connectors:t,disabled:s,selectedConnector:r.id,isLoading:l,onChange:o,"data-test-subj":"case-connectors-dropdown",appendAddConnectorButton:!0}):Object(p.jsx)(f.EuiText,{"data-test-subj":"configure-case-connector-permissions-error-msg",size:"s"},Object(p.jsx)("span",null,se.y))),r.type!==ae.k.none&&Object(de.j)(b)&&Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(ue.a,null)),r.type!==ae.k.none?Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(re,{actionTypeName:g,connectorType:r.type,isLoading:l,mappings:c})):null))))};be.displayName="Connectors";const pe=n.a.memo(be),me=[{id:"close-by-user",label:se.g},{id:"close-by-pushing",label:se.h}],xe=({closureTypeSelected:e,disabled:t,onChangeClosureType:s})=>{const n=Object(a.useCallback)((e=>{s(e)}),[s]);return Object(p.jsx)(f.EuiRadioGroup,{disabled:t,options:me,idSelected:e,onChange:n,name:"closure_options","data-test-subj":"closure-options-radio-group"})};xe.displayName="ClosureOptionsRadio";const Oe=n.a.memo(xe),ge=({closureTypeSelected:e,disabled:t,onChangeClosureType:s})=>Object(p.jsx)(f.EuiDescribedFormGroup,{fullWidth:!0,title:Object(p.jsx)("h3",null,se.i),description:Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)("p",null,se.e)),"data-test-subj":"case-closure-options-form-group"},Object(p.jsx)(f.EuiFormRow,{fullWidth:!0,label:se.f,"data-test-subj":"case-closure-options-form-row"},Object(p.jsx)(Oe,{closureTypeSelected:e,disabled:t,onChangeClosureType:s,"data-test-subj":"case-closure-options-radio"})));ge.displayName="ClosureOptions";const fe=n.a.memo(ge);var ye=s(181),he=s(14),Fe=s(2),ve=s(71);const Ee=({title:e,message:t,onCancel:s,onConfirm:a})=>Object(p.jsx)(f.EuiConfirmModal,{buttonColor:"danger",cancelButtonText:he.b,"data-test-subj":"confirm-delete-modal",defaultFocusedButton:"confirm",onCancel:s,onConfirm:a,title:e,confirmButtonText:he.d},t);Ee.displayName="DeleteConfirmationModal";const Ce=n.a.memo(Ee),ke=e=>{const{customFields:t,onDeleteCustomField:s,onEditCustomField:i}=e,[l,c]=Object(a.useState)(null),{euiTheme:o}=Object(f.useEuiTheme)(),r=Object(a.useCallback)((()=>{l&&s(l.key),c(null)}),[s,c,l]),u=Object(a.useCallback)((()=>{c(null)}),[]),d=Boolean(l);return t.length?Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(f.EuiSpacer,{size:"s"}),Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"flexStart","data-test-subj":"custom-fields-list"},Object(p.jsx)(f.EuiFlexItem,null,t.map((e=>Object(p.jsx)(n.a.Fragment,{key:e.key},Object(p.jsx)(f.EuiPanel,{paddingSize:"s","data-test-subj":`custom-field-${e.key}-${e.type}`,hasShadow:!1},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,{grow:!0},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiText,null,Object(p.jsx)("h4",null,e.label))),Object(p.jsx)(f.EuiBadge,{color:o.colors.body},(e=>{const t=e&&ve.a[e];return t&&t().label})(e.type)),e.required&&Object(p.jsx)(f.EuiBadge,{color:o.colors.body},he.r))),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonIcon,{"data-test-subj":`${e.key}-custom-field-edit`,"aria-label":`${e.key}-custom-field-edit`,iconType:"pencil",color:"primary",onClick:()=>i(e.key)})),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonIcon,{"data-test-subj":`${e.key}-custom-field-delete`,"aria-label":`${e.key}-custom-field-delete`,iconType:"minusInCircle",color:"danger",onClick:()=>c(e)})))))),Object(p.jsx)(f.EuiSpacer,{size:"s"}))))),d&&l?Object(p.jsx)(Ce,{title:he.f(l.label),message:he.e,onCancel:u,onConfirm:r}):null)):null};ke.displayName="CustomFieldsList";const Te=n.a.memo(ke),we=({disabled:e,isLoading:t,handleAddCustomField:s,handleDeleteCustomField:i,handleEditCustomField:l,customFields:c})=>{const{permissions:o}=Object(G.a)(),r=o.create&&o.update,[u,d]=Object(a.useState)(!1),j=Object(a.useCallback)((()=>{c.length!==Fe.tb||u?(s(),d(!1)):d(!0)}),[s,d,c,u]),b=Object(a.useCallback)((e=>{d(!1),l(e)}),[d,l]);return c.length<Fe.tb&&u&&d(!1),r?Object(p.jsx)(f.EuiDescribedFormGroup,{fullWidth:!0,title:Object(p.jsx)("h3",null,he.v),description:Object(p.jsx)("p",null,he.g),"data-test-subj":"custom-fields-form-group"},Object(p.jsx)(f.EuiPanel,{paddingSize:"s",color:"subdued",hasBorder:!1,hasShadow:!1},c.length?Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(Te,{customFields:c,onDeleteCustomField:i,onEditCustomField:b}),u?Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiText,{color:"danger"},he.m(Fe.tb)))):null):null,Object(p.jsx)(f.EuiSpacer,{size:"m"}),c.length?null:Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"empty-custom-fields"},he.o,Object(p.jsx)(f.EuiSpacer,{size:"m"}))),Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonEmpty,{isLoading:t,isDisabled:e||u,size:"s",onClick:j,iconType:"plusInCircle","data-test-subj":"add-custom-field"},he.a))))):null};we.displayName="CustomFields";const Ie=n.a.memo(we),Se=({onCloseFlyout:e,onSaveField:t,isLoading:s,disabled:n,renderHeader:i,children:l})=>{const[c,o]=Object(a.useState)({isValid:void 0,submit:async()=>({isValid:!1,data:{}})}),{submit:r}=c,u=Object(a.useCallback)((async()=>{const{isValid:e,data:s}=await r();e&&t(s)}),[t,r]),d=Object(a.useMemo)((()=>l({onChange:o})),[l]);return Object(p.jsx)(f.EuiFlyout,{onClose:e,"data-test-subj":"common-flyout"},Object(p.jsx)(f.EuiFlyoutHeader,{hasBorder:!0,"data-test-subj":"common-flyout-header"},Object(p.jsx)(f.EuiTitle,{size:"s"},Object(p.jsx)("h3",{id:"flyoutTitle"},i()))),Object(p.jsx)(f.EuiFlyoutBody,null,d),Object(p.jsx)(f.EuiFlyoutFooter,{"data-test-subj":"common-flyout-footer"},Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"flexStart"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonEmpty,{onClick:e,"data-test-subj":"common-flyout-cancel",disabled:n,isLoading:s},se.c)),Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"flexEnd"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButton,{fill:!0,onClick:u,"data-test-subj":"common-flyout-save",disabled:n,isLoading:s},se.z))))))};Se.displayName="CommonFlyout";var Me=s(168),Le=s(195),Ne=s(45),ze=s(239),Be=s(20);const De=E.i18n.translate("xpack.cases.templates.title",{defaultMessage:"Templates"}),Pe=E.i18n.translate("xpack.cases.templates.description",{defaultMessage:"Create templates that automatically populate values in new cases."}),Ae=E.i18n.translate("xpack.cases.templates.noTemplates",{defaultMessage:"You do not have any templates yet"}),Ge=E.i18n.translate("xpack.cases.templates.addTemplate",{defaultMessage:"Add template"}),Ve=(E.i18n.translate("xpack.cases.templates.createTemplate",{defaultMessage:"Create template"}),E.i18n.translate("xpack.cases.templates.required",{defaultMessage:"Required"}),e=>E.i18n.translate("xpack.cases.templates.requiredField",{values:{fieldName:e},defaultMessage:"{fieldName} is required."})),_e=E.i18n.translate("xpack.cases.templates.templateName",{defaultMessage:"Template name"}),Re=E.i18n.translate("xpack.cases.templates.templateTagsHelp",{defaultMessage:"Separate tags with a line break."}),Ue=E.i18n.translate("xpack.cases.templates.templateFields",{defaultMessage:"Template fields"}),We=E.i18n.translate("xpack.cases.templates.caseFields",{defaultMessage:"Case fields"}),$e=E.i18n.translate("xpack.cases.templates.caseSettings",{defaultMessage:"Case settings"}),He=E.i18n.translate("xpack.cases.templates.connectorFields",{defaultMessage:"External Connector Fields"}),qe=e=>E.i18n.translate("xpack.cases.configuration.deleteMessage",{values:{name:e},defaultMessage:"This action will permanently delete {name}."});var Qe=s(89),Ye={name:"3s4lj9",styles:"max-width:100px"};const Je=e=>{const{templates:t,onEditTemplate:s,onDeleteTemplate:i}=e,{euiTheme:l}=Object(f.useEuiTheme)(),[c,o]=Object(a.useState)(null),r=Object(a.useCallback)((()=>{c&&i(c.key),o(null)}),[i,o,c]),u=Object(a.useCallback)((()=>{o(null)}),[]),d=Boolean(c);return t.length?Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(f.EuiSpacer,{size:"s"}),Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"flexStart","data-test-subj":"templates-list"},Object(p.jsx)(f.EuiFlexItem,null,t.map((e=>{var t;return Object(p.jsx)(n.a.Fragment,{key:e.key},Object(p.jsx)(f.EuiPanel,{paddingSize:"s","data-test-subj":`template-${e.key}`,hasShadow:!1},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,{grow:!0},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiText,null,Object(p.jsx)("h4",null,Object(p.jsx)(Qe.a,{text:e.name})))),Object(p.jsx)(f.EuiBadgeGroup,{gutterSize:"s"},null!==(t=e.tags)&&void 0!==t&&t.length?e.tags.map(((t,s)=>Object(p.jsx)(f.EuiBadge,{css:Ye,key:`${e.key}-tag-${s}`,"data-test-subj":`${e.key}-tag-${s}`,color:l.colors.body},t))):null))),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiFlexGroup,{alignItems:"flexEnd",gutterSize:"s"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonIcon,{"data-test-subj":`${e.key}-template-edit`,"aria-label":`${e.key}-template-edit`,iconType:"pencil",color:"primary",onClick:()=>s(e.key)})),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonIcon,{"data-test-subj":`${e.key}-template-delete`,"aria-label":`${e.key}-template-delete`,iconType:"minusInCircle",color:"danger",onClick:()=>o(e)})))))),Object(p.jsx)(f.EuiSpacer,{size:"s"}))}))),d&&c?Object(p.jsx)(Ce,{title:(j=c.name,E.i18n.translate("xpack.cases.configuration.deleteTitle",{values:{name:j},defaultMessage:"Delete {name}?"})),message:qe(c.name),onCancel:u,onConfirm:r}):null)):null;var j};Je.displayName="TemplatesList";const Ke=n.a.memo(Je),Xe=({disabled:e,isLoading:t,templates:s,onAddTemplate:i,onEditTemplate:l,onDeleteTemplate:c})=>{const{permissions:o}=Object(G.a)(),r=o.create&&o.update,[u,d]=Object(a.useState)(!1),j=Object(a.useCallback)((()=>{s.length!==Fe.Ib||u?(i(),d(!1)):d(!0)}),[i,u,s]),b=Object(a.useCallback)((e=>{d(!1),l(e)}),[d,l]),m=Object(a.useCallback)((e=>{d(!1),c(e)}),[d,c]);return Object(p.jsx)(f.EuiDescribedFormGroup,{fullWidth:!0,title:Object(p.jsx)(f.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},De),Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(ze.a,null))),description:Object(p.jsx)("p",null,Pe),"data-test-subj":"templates-form-group"},Object(p.jsx)(f.EuiPanel,{paddingSize:"s",color:"subdued",hasBorder:!1,hasShadow:!1},s.length?Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(Ke,{templates:s,onEditTemplate:b,onDeleteTemplate:m}),u?Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiText,{color:"danger"},(x=Fe.Ib,E.i18n.translate("xpack.cases.templates.maxTemplateLimit",{values:{maxTemplates:x},defaultMessage:"Maximum number of {maxTemplates} templates reached."}))))):null):null,Object(p.jsx)(f.EuiSpacer,{size:"m"}),s.length?null:Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1,"data-test-subj":"empty-templates"},Ae,Object(p.jsx)(f.EuiSpacer,{size:"m"}))),r?Object(p.jsx)(f.EuiFlexGroup,{justifyContent:"center"},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(f.EuiButtonEmpty,{isLoading:t,isDisabled:e||u,size:"s",onClick:j,iconType:"plusInCircle","data-test-subj":"add-template"},Ge))):null));var x};Xe.displayName="Templates";const Ze=n.a.memo(Xe);var et=s(123),tt=s(83);const{emptyField:st,maxLengthField:at}=tt.fieldValidators,nt={key:{validations:[{validator:st(he.s(he.i))}]},label:{label:he.i,validations:[{validator:st(he.s(he.i.toLocaleLowerCase()))},{validator:at({length:Fe.vb,message:he.n(he.i.toLocaleLowerCase(),Fe.vb)})}]},type:{label:he.l,validations:[{validator:st(he.s(he.i))}]},defaultValue:{label:he.c,validations:[]}},it=({isSubmitting:e,isEditMode:t})=>{const[{type:s}]=Object(W.useFormData)(),i=Object(a.useMemo)((()=>{const e=ve.a[s];return null==e?null:e().build()}),[s]),l=null==i?void 0:i.Configure,c=(()=>{const e=[];for(const[t,s]of Object.entries(ve.a)){const a=s();e.push({value:t,text:a.label})}return e})();return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(W.UseField,{path:"key",component:U.HiddenField}),Object(p.jsx)(W.UseField,{path:"label",component:U.TextField,componentProps:{euiFieldProps:{"data-test-subj":"custom-field-label-input",fullWidth:!0,autoFocus:!0,isLoading:e}}}),Object(p.jsx)(W.UseField,{component:U.SelectField,path:"type",componentProps:{euiFieldProps:{options:c,"data-test-subj":"custom-field-type-selector",isLoading:e,disabled:t}}}),l?Object(p.jsx)(l,null):null)};it.displayName="FormFields";const lt=Object(a.memo)(it);var ct=s(126);const ot=e=>{const{defaultValue:t,...s}=e;return void 0===t||Object(l.isString)(t)&&Object(ct.isEmptyString)(t)?s:e},rt=({onChange:e,initialValue:t})=>{const s=Object(a.useMemo)((()=>Object(et.v4)()),[]),{form:n}=Object(W.useForm)({defaultValue:null!=t?t:{key:s,label:"",type:ae.n.TEXT,required:!1},options:{stripEmptyFields:!1},schema:nt,serializer:ot}),{submit:i,isValid:l,isSubmitting:c}=n;return Object(a.useEffect)((()=>{e&&e({isValid:l,submit:i})}),[e,l,i]),Object(p.jsx)(W.Form,{form:n},Object(p.jsx)(lt,{isSubmitting:c,isEditMode:Boolean(t)}))};rt.displayName="CustomFieldsForm";const ut=n.a.memo(rt);var dt=s(86),jt=s(232),bt=s(202);const{emptyField:pt,maxLengthField:mt}=tt.fieldValidators,xt=["connectorId","fields","severity","customFields"],Ot=Object.fromEntries(Object.entries(bt.a).map((([e,t])=>"object"!=typeof t||xt.includes(e)?[e,t]:[e,{...t,labelAppend:dt.a}]))),gt={key:{validations:[{validator:pt(Ve("key"))}]},name:{label:_e,validations:[{validator:pt(Ve(_e))},{validator:mt({length:Fe.Lb,message:Be.O("template name",Fe.Lb)})}]},templateDescription:{label:Be.F,labelAppend:dt.a,validations:[{validator:mt({length:Fe.Jb,message:Be.O("template description",Fe.Jb)})}]},templateTags:{label:Be.kb,helpText:Re,labelAppend:dt.a,validations:[{validator:({value:e})=>Object(jt.a)({value:e,message:Be.lb}),type:W.VALIDATION_TYPES.ARRAY_ITEM,isBlocking:!1},{validator:({value:e})=>Object(jt.b)({value:e,message:Be.O("tag",Fe.Mb),limit:Fe.Mb}),type:W.VALIDATION_TYPES.ARRAY_ITEM,isBlocking:!1},{validator:({value:e})=>Object(jt.c)({value:e,message:Be.P(Fe.Hb),limit:Fe.Hb})}]},...Ot};var ft=s(256);const yt=({isLoading:e,tagOptions:t})=>{const s=t.map((e=>({label:e})));return Object(p.jsx)(W.UseField,{path:"templateTags",component:U.ComboBoxField,componentProps:{idAria:"template-tags","data-test-subj":"template-tags",euiFieldProps:{placeholder:"",fullWidth:!0,disabled:e,isLoading:e,options:s,noSuggestions:!1,customOptionText:Be.g}}})};yt.displayName="TemplateTagsComponent";const ht=Object(a.memo)(yt),Ft=({isLoading:e=!1,configurationTemplateTags:t})=>Object(p.jsx)(f.EuiFlexGroup,{"data-test-subj":"template-fields",direction:"column",gutterSize:"none"},Object(p.jsx)(W.UseField,{path:"name",component:U.TextField,componentProps:{euiFieldProps:{"data-test-subj":"template-name-input",fullWidth:!0,autoFocus:!0,isLoading:e}}}),Object(p.jsx)(ht,{isLoading:e,tagOptions:t}),Object(p.jsx)(W.UseField,{path:"templateDescription",component:U.TextAreaField,componentProps:{labelAppend:dt.a,euiFieldProps:{"data-test-subj":"template-description-input",fullWidth:!0,isLoading:e}}}));Ft.displayName="TemplateFields";const vt=Object(a.memo)(Ft);var Et=s(143),Ct=s(238),kt=s(234);const Tt=({isSubmitting:e=!1,connectors:t,currentConfiguration:s,isEditMode:i})=>{const{isSyncAlertsEnabled:l}=Object(Et.a)(),{customFields:c,templates:o}=s,r=o.map((e=>{var t;return null!=e&&null!==(t=e.tags)&&void 0!==t&&t.length?e.tags:[]})).flat(),u=Object(a.useMemo)((()=>({title:Ue,children:Object(p.jsx)(vt,{isLoading:e,configurationTemplateTags:r})})),[e,r]),d=Object(a.useMemo)((()=>({title:We,children:Object(p.jsx)(ft.a,{configurationCustomFields:c,isLoading:e,setCustomFieldsOptional:!0,isEditMode:i})})),[e,c,i]),j=Object(a.useMemo)((()=>({title:$e,children:Object(p.jsx)(Ct.a,{isLoading:e})})),[e]),b=Object(a.useMemo)((()=>({title:He,children:Object(p.jsx)(kt.a,{connectors:t,isLoading:e,isLoadingConnectors:!1})})),[t,e]),m=Object(a.useMemo)((()=>[u,d,...l?[j]:[],b]),[u,d,j,b,l]);return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(W.UseField,{path:"key",component:U.HiddenField}),Object(p.jsx)(f.EuiSteps,{headingElement:"h2",steps:m,"data-test-subj":"template-creation-form-steps"}))};Tt.displayName="FormFields";const wt=Object(a.memo)(Tt);function It(e){return Object.fromEntries(Object.entries(e).filter((([e,t])=>!Object(l.isEmpty)(t)||"boolean"==typeof t)).map((([e,t])=>[e,t!==Object(t)||Array.isArray(t)?t:It(t)])))}const St=e=>{var t,s,a;if(null==e)return e;const{key:n,name:i,description:l,tags:c,caseFields:o}=e,{connector:r,customFields:u,settings:d,tags:j,...b}=null!=o?o:{},p=Object(de.g)({fields:null!==(t=null==r?void 0:r.fields)&&void 0!==t?t:null}),m=Object(de.c)(u);return{key:n,name:i,templateDescription:null!=l?l:"",templateTags:null!=c?c:[],connectorId:null!==(s=null==r?void 0:r.id)&&void 0!==s?s:"none",fields:null!==(a=p.fields)&&void 0!==a?a:null,customFields:null!=m?m:{},tags:null!=j?j:[],...b}},Mt=(e,t,s)=>{if(null==s)return s;const{fields:a=null,key:n,name:i,customFields:l,...c}=s,o=Object(de.h)({fields:a}),r=It({...c}),{connectorId:u,syncAlerts:d=!1,templateTags:j,templateDescription:b,...p}=r,m=l?Object(de.d)(l,t.customFields):[],x=u?Object(de.e)(u,e):null;return{key:n,name:i,description:b,tags:null!=j?j:[],caseFields:{...p,connector:x?Object(ye.b)(x,o.fields):Object(ye.a)(),customFields:m,settings:{syncAlerts:d}}}},Lt=({onChange:e,initialValue:t,connectors:s,currentConfiguration:n,isEditMode:i=!1})=>{const l=Object(a.useMemo)((()=>Object(et.v4)()),[]),{form:c}=Object(W.useForm)({defaultValue:null!=t?t:{key:l,name:"",description:"",tags:[],caseFields:{connector:n.connector}},options:{stripEmptyFields:!1},schema:gt,deserializer:St,serializer:e=>Mt(s,n,e)}),{submit:o,isValid:r,isSubmitting:u}=c;return Object(a.useEffect)((()=>{e&&e({isValid:r,submit:o})}),[e,r,o]),Object(p.jsx)(W.Form,{form:c},Object(p.jsx)(wt,{isSubmitting:u,connectors:s,currentConfiguration:n,isEditMode:i}))};Lt.displayName="TemplateForm";const Nt=n.a.memo(Lt),zt={name:"1jxy0pw",styles:"box-sizing:content-box;max-width:1175px;width:100%"},Bt=e=>Object(p.css)("padding-top:",e.size.xl,";padding-bottom:",e.size.xl,";.euiFlyout{z-index:",Number(e.levels.navigation)+1,";}",""),Dt=n.a.memo((()=>{const{permissions:e}=Object(G.a)(),{triggersActionsUi:t}=Object(Y.g)().services;Object(L.a)(y.a.casesConfigure);const s=Object(F.a)().isAtLeastGold(),[i,c]=Object(a.useState)(!0),[o,r]=Object(a.useState)(null),[u,d]=Object(a.useState)(null),[j,b]=Object(a.useState)(null),[m,x]=Object(a.useState)(null),{euiTheme:O}=Object(f.useEuiTheme)(),{data:g,isLoading:h,refetch:E}=Object(ee.a)(),{id:C,version:k,closureType:T,connector:w,mappings:I,customFields:S,templates:M}=g,{mutate:N,mutateAsync:z,isLoading:D}=(()=>{const e=Object(J.useQueryClient)(),{owner:t}=Object(G.a)(),{showErrorToast:s,showSuccessToast:a}=Object(Ne.a)();return Object(J.useMutation)((({id:e,version:s,closureType:a,customFields:n,templates:i,connector:c})=>Object(l.isEmpty)(e)||Object(l.isEmpty)(s)?Object(X.e)({closure_type:a,connector:c,customFields:null!=n?n:[],templates:null!=i?i:[],owner:t[0]}):Object(X.d)(e,{version:s,closure_type:a,connector:c,customFields:null!=n?n:[],templates:null!=i?i:[]})),{mutationKey:Z.d.persistCaseConfiguration,onSuccess:()=>{e.invalidateQueries(Z.e.configuration({})),a(Le.b)},onError:e=>{s(e,{title:Le.a})}})})(),P=h||D,{isLoading:A,data:V=[],refetch:_}=Object(Me.a)(),{isLoading:R,data:U=[],refetch:W}=(()=>{const e=Object(Y.j)();return Object(J.useQuery)(Z.e.connectorTypes(),(({signal:e})=>Object(X.a)({signal:e})),{initialData:[],onError:t=>{e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:K.e})}})})(),$=Object(a.useCallback)((async e=>{d(e),_(),W(),E()}),[W,E,_,d]),H=Object(a.useCallback)((async e=>{const t=Object(ye.b)(e);await z({connector:t,closureType:T,customFields:S,templates:M,id:C,version:k}),$(e)}),[z,T,S,M,C,k,$]),q=A||D||h||R,te=q||!i||"none"===w.id,ae=Object(a.useCallback)((()=>{r({type:"editConnector",visible:!0})}),[]),ne=Object(a.useCallback)((()=>r({type:"addConnector",visible:!1})),[r]),ie=Object(a.useCallback)((()=>r({type:"editConnector",visible:!1})),[]),le=Object(a.useCallback)((e=>{if("add-connector"===e)return void r({type:"addConnector",visible:!0});const t=Object(de.e)(e,V),s=null!=t?Object(ye.b)(t):Object(ye.a)();N({connector:s,closureType:T,customFields:S,templates:M,id:C,version:k})}),[V,N,T,S,M,C,k]),ce=Object(a.useCallback)((e=>{N({connector:w,customFields:S,templates:M,id:C,version:k,closureType:e})}),[C,k,w,S,M,N]);Object(a.useEffect)((()=>{A||"none"===w.id||V.some((e=>e.id===w.id))?A||"none"!==w.id&&!V.some((e=>e.id===w.id))||c(!0):c(!1)}),[V,w,A]),Object(a.useEffect)((()=>{A||"none"===w.id||d(Object(ye.c)(V,w))}),[V,w,A]);const oe=Object(a.useMemo)((()=>"addConnector"===(null==o?void 0:o.type)&&null!=o&&o.visible?t.getAddConnectorFlyout({onClose:ne,featureId:Q.CasesConnectorFeatureId,onConnectorCreated:H}):null),[o]),re=Object(a.useMemo)((()=>u&&"editConnector"===(null==o?void 0:o.type)&&null!=o&&o.visible?t.getEditConnectorFlyout({connector:u,onClose:ie,onConnectorUpdated:$}):null),[w.id,u,o]),ue=Object(a.useCallback)((e=>{const t=S.filter((t=>t.key!==e)),s=M.map((t=>{var s,a,n;const i=null!==(s=null===(a=t.caseFields)||void 0===a||null===(n=a.customFields)||void 0===n?void 0:n.filter((t=>t.key!==e)))&&void 0!==s?s:[];return{...t,caseFields:{...t.caseFields,customFields:[...i]}}}));N({connector:w,customFields:[...t],templates:[...s],id:C,version:k,closureType:T})}),[T,C,k,w,S,M,N]),je=Object(a.useCallback)((e=>{const t=S.find((t=>t.key===e));t&&b(t),r({type:"customField",visible:!0})}),[r,b,S]),be=Object(a.useCallback)((()=>{r({type:"customField",visible:!1}),b(null)}),[r,b]),me=Object(a.useCallback)((e=>{const t=Object(de.a)(S,e),s=(({templates:e,customFields:t})=>e.map((e=>{var s,a;const n=null!==(s=null===(a=e.caseFields)||void 0===a?void 0:a.customFields)&&void 0!==s?s:[];return t.forEach((e=>{if(!n.length||!n.find((t=>t.key===e.key))){var t,s;const a=ve.a[e.type],{getDefaultValue:i}=a(),l=null!==(t=null==i?void 0:i())&&void 0!==t?t:null;n.push({key:e.key,type:e.type,value:null!==(s=e.defaultValue)&&void 0!==s?s:l})}})),{...e,caseFields:{...e.caseFields,customFields:[...n]}}})))({templates:M,customFields:t});N({connector:w,customFields:t,templates:s,id:C,version:k,closureType:T}),r({type:"customField",visible:!1}),b(null)}),[T,C,k,w,S,M,N]),xe=Object(a.useCallback)((e=>{const t=M.filter((t=>t.key!==e));N({connector:w,customFields:S,templates:[...t],id:C,version:k,closureType:T})}),[T,C,k,w,S,M,N]),Oe=Object(a.useCallback)((e=>{const t=M.find((t=>t.key===e));t&&x(t),r({type:"template",visible:!0})}),[r,x,M]),ge=Object(a.useCallback)((()=>{r({type:"template",visible:!1}),x(null)}),[r,x]),he=Object(a.useCallback)((e=>{const t=Object(de.a)(M,e);N({connector:w,customFields:S,templates:t,id:C,version:k,closureType:T}),r({type:"template",visible:!1}),x(null)}),[T,C,k,w,S,M,N]),Fe="customField"===(null==o?void 0:o.type)&&null!=o&&o.visible?Object(p.jsx)(Se,{isLoading:h||D,disabled:!e.create||!e.update||h||D,onCloseFlyout:be,onSaveField:me,renderHeader:()=>Object(p.jsx)("span",null,se.a)},(({onChange:e})=>Object(p.jsx)(ut,{onChange:e,initialValue:j}))):null,Ee="template"===(null==o?void 0:o.type)&&null!=o&&o.visible?Object(p.jsx)(Se,{isLoading:h||D,disabled:!e.create||!e.update||h||D,onCloseFlyout:ge,onSaveField:he,renderHeader:()=>Object(p.jsx)("span",null,se.k)},(({onChange:e})=>Object(p.jsx)(Nt,{initialValue:m,connectors:null!=V?V:[],currentConfiguration:g,isEditMode:Boolean(m),onChange:e}))):null;return Object(p.jsx)(f.EuiPageSection,{restrictWidth:!0},Object(p.jsx)(B.a,{showBackButton:!0,"data-test-subj":"case-configure-title",title:se.j}),Object(p.jsx)(f.EuiPageBody,{restrictWidth:!0},Object(p.jsx)("div",{css:Bt(O)},s&&Object(p.jsx)(n.a.Fragment,null,!i&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)("div",{css:zt},Object(p.jsx)(f.EuiCallOut,{title:se.C,color:"warning",iconType:"help","data-test-subj":"configure-cases-warning-callout"},Object(p.jsx)(v.FormattedMessage,{defaultMessage:"The selected connector has been deleted or you do not have the {appropriateLicense} to use it. Either select a different connector or create a new one.",id:"xpack.cases.configure.connectorDeletedOrLicenseWarning",values:{appropriateLicense:Object(p.jsx)(f.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},se.w)}}))),Object(p.jsx)(f.EuiSpacer,{size:"xl"})),Object(p.jsx)("div",{css:zt},Object(p.jsx)(fe,{closureTypeSelected:T,disabled:D||A||!e.update,onChangeClosureType:ce})),Object(p.jsx)(f.EuiSpacer,{size:"xl"}),Object(p.jsx)("div",{css:zt},Object(p.jsx)(pe,{actionTypes:U,connectors:null!=V?V:[],disabled:D||A||!e.update,handleShowEditFlyout:ae,isLoading:q,mappings:I,onChangeConnector:le,selectedConnector:w,updateConnectorDisabled:te||!e.update})),Object(p.jsx)(f.EuiSpacer,{size:"xl"})),Object(p.jsx)("div",{css:zt},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(Ie,{customFields:S,isLoading:P,disabled:P,handleAddCustomField:()=>r({type:"customField",visible:!0}),handleDeleteCustomField:ue,handleEditCustomField:je}))),Object(p.jsx)(f.EuiSpacer,{size:"xl"}),Object(p.jsx)("div",{css:zt},Object(p.jsx)(f.EuiFlexItem,{grow:!1},Object(p.jsx)(Ze,{templates:M,isLoading:P,disabled:P,onAddTemplate:()=>r({type:"template",visible:!0}),onEditTemplate:Oe,onDeleteTemplate:xe}))),Object(p.jsx)(f.EuiSpacer,{size:"xl"}),oe,re,Fe,Ee)))}));Dt.displayName="ConfigureCases";const Pt=e=>E.i18n.translate("xpack.cases.noPrivileges.message",{values:{pageName:e},defaultMessage:"To view {pageName} page, you must update privileges. For more information, contact your Kibana administrator."}),At=E.i18n.translate("xpack.cases.noPrivileges.title",{defaultMessage:"Privileges required"}),Gt=E.i18n.translate("xpack.cases.noPrivileges.button",{defaultMessage:"Back to Cases"}),Vt=n.a.memo((({pageName:e})=>{const{navigateToAllCases:t}=Object(y.i)();return Object(p.jsx)(f.EuiEmptyPrompt,{iconColor:"default",iconType:"casesApp",title:Object(p.jsx)("h2",null,At),titleSize:"xs",body:Object(p.jsx)("p",null,Pt(e)),actions:Object(p.jsx)(f.EuiButton,{onClick:t,size:"s",color:"primary",fill:!0},Gt)})}));Vt.displayName="NoPrivilegesPage";const _t=E.i18n.translate("xpack.cases.createCase",{defaultMessage:"Create Case"}),Rt=E.i18n.translate("xpack.cases.configureCases",{defaultMessage:"Configure Cases"}),Ut=E.i18n.translate("xpack.cases.badge.readOnly.text",{defaultMessage:"Read only"}),Wt=E.i18n.translate("xpack.cases.badge.readOnly.tooltip",{defaultMessage:"Unable to create or edit cases"});var $t=s(145);const Ht=Object(a.lazy)((()=>s.e(5).then(s.bind(null,349)))),qt=({actionsNavigation:e,ruleDetailsNavigation:t,showAlertDetails:s,useFetchAlertData:l,onAlertsTableLoaded:c,refreshRef:o,timelineIntegration:r})=>{const{basePath:u,permissions:d}=Object(G.a)(),{navigateToAllCases:j}=Object(y.i)(),{navigateToCaseView:b}=Object(y.j)();!function(){const{permissions:e}=Object(G.a)(),t=Object(Y.g)().services.chrome,s=Object(a.useCallback)((()=>{Object($t.c)(e)&&t.setBadge({text:Ut,tooltip:Wt,iconType:"glasses"})}),[t,e]);Object(a.useEffect)((()=>(s(),()=>{t.setBadge()})),[s,t])}();const x=Object(a.useCallback)((async({id:e})=>b({detailName:e})),[b]);return Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(g.ReactQueryDevtools,{initialIsOpen:!1}),Object(p.jsx)(O,null,Object(p.jsx)(m,{strict:!0,exact:!0,path:u},Object(p.jsx)(R,null)),Object(p.jsx)(m,{path:Object(y.h)(u)},d.create?Object(p.jsx)(q,{onSuccess:x,onCancel:j,timelineIntegration:r}):Object(p.jsx)(Vt,{pageName:_t})),Object(p.jsx)(m,{path:Object(y.f)(u)},d.settings?Object(p.jsx)(Dt,null):Object(p.jsx)(Vt,{pageName:Rt})),Object(p.jsx)(m,{exact:!0,path:[Object(y.e)(u),Object(y.d)(u)]},Object(p.jsx)(a.Suspense,{fallback:Object(p.jsx)(f.EuiLoadingSpinner,null)},Object(p.jsx)(Ht,{actionsNavigation:e,ruleDetailsNavigation:t,showAlertDetails:s,useFetchAlertData:l,onAlertsTableLoaded:c,refreshRef:o,timelineIntegration:r}))),Object(p.jsx)(m,{path:u},Object(p.jsx)(i.Redirect,{to:u}))))};qt.displayName="CasesRoutes";const Qt=n.a.memo(qt)},141:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var a=s(4),n=s.n(a),i=s(5),l=s(1),c=s(3);const o=l.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningTitle",{defaultMessage:"This connector type is deprecated"}),r=l.i18n.translate("xpack.cases.connectors.serviceNow.deprecatedConnectorWarningDesc",{defaultMessage:"Update this connector, or create a new one."}),u=({type:e="warning"})=>Object(c.jsx)(i.EuiCallOut,{title:o,color:e,iconType:"warning","data-test-subj":"deprecated-connector-warning-callout"},r);u.displayName="DeprecatedCallout";const d=n.a.memo(u)},147:function(e,t,s){"use strict";s.d(t,"g",(function(){return i})),s.d(t,"j",(function(){return l})),s.d(t,"i",(function(){return c})),s.d(t,"h",(function(){return o})),s.d(t,"a",(function(){return r})),s.d(t,"e",(function(){return u})),s.d(t,"f",(function(){return d})),s.d(t,"d",(function(){return j})),s.d(t,"b",(function(){return b}));var a=s(1),n=s(20);s.d(t,"c",(function(){return n.L}));const i=e=>"none"===e?a.i18n.translate("xpack.cases.caseView.pushThirdPartyIncident",{defaultMessage:"Push as external incident"}):a.i18n.translate("xpack.cases.caseView.pushNamedIncident",{values:{thirdParty:e},defaultMessage:"Push as { thirdParty } incident"}),l=e=>"none"===e?a.i18n.translate("xpack.cases.caseView.updateThirdPartyIncident",{defaultMessage:"Update external incident"}):a.i18n.translate("xpack.cases.caseView.updateNamedIncident",{values:{thirdParty:e},defaultMessage:"Update { thirdParty } incident"}),c=e=>"none"===e?a.i18n.translate("xpack.cases.caseView.lockedIncidentTitleNone",{defaultMessage:"External incident is up to date"}):a.i18n.translate("xpack.cases.caseView.lockedIncidentTitle",{values:{thirdParty:e},defaultMessage:"{ thirdParty } incident is up to date"}),o=a.i18n.translate("xpack.cases.caseView.lockedIncidentDesc",{defaultMessage:"No update is required"}),r=a.i18n.translate("xpack.cases.caseView.pushToService.configureConnector",{defaultMessage:"To create and update a case in an external system, select a connector."}),u=a.i18n.translate("xpack.cases.caseView.pushToServiceDisableByConfigTitle",{defaultMessage:"Enable external service in Kibana configuration file"}),d=a.i18n.translate("xpack.cases.caseView.pushToServiceDisableByLicenseTitle",{defaultMessage:"Upgrade to an appropriate license"}),j=a.i18n.translate("xpack.cases.caseView.cloudDeploymentLink",{defaultMessage:"cloud deployment"}),b=a.i18n.translate("xpack.cases.caseView.actionsConfigurationLink",{defaultMessage:"Alerting and action settings in Kibana"})},182:function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var a=s(1),n=s(4),i=s(8),l=s(34),c=s(40);const o={[l.a.cases]:a.i18n.translate("xpack.cases.breadcrumbs.all_cases",{defaultMessage:"Cases"}),[l.a.casesCreate]:a.i18n.translate("xpack.cases.breadcrumbs.create_case",{defaultMessage:"Create"}),[l.a.casesConfigure]:a.i18n.translate("xpack.cases.breadcrumbs.settings",{defaultMessage:"Settings"})},r=()=>{const{chrome:{docTitle:e,setBreadcrumbs:t},application:{navigateToUrl:s}}=Object(i.g)().services;return Object(n.useCallback)((a=>{e.change(function(e){return e.map((({text:e})=>{var t;return null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:""})).reverse()}(a)),t(a.map((e=>{const{href:t,onClick:a}=e;return{...e,...t&&!a?{onClick:e=>{e&&e.preventDefault(),s(t)}}:{}}})))}),[e,t,s])},u=e=>{const{appId:t,appTitle:s}=Object(c.a)(),{getAppUrl:a}=Object(i.h)(t),u=r();Object(n.useEffect)((()=>{var t;u([{text:s,href:a()},{text:o[l.a.cases],...e!==l.a.cases?{href:a({deepLinkId:l.a.cases})}:{}},...e!==l.a.cases?[{text:o[e]}]:[]]),null===(t=i.b.get().serverless)||void 0===t||t.setBreadcrumbs([])}),[e,s,a,u])},d=e=>{const{appId:t,appTitle:s}=Object(c.a)(),{getAppUrl:a}=Object(i.h)(t),u=r();Object(n.useEffect)((()=>{var t;const n={text:e},c=[{text:s,href:a()},{text:o[l.a.cases],href:a({deepLinkId:l.a.cases})},n];u(c),null===(t=i.b.get().serverless)||void 0===t||t.setBreadcrumbs([n])}),[e,s,a,u])}},183:function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return l}));var a=s(1),n=s(20);s.d(t,"a",(function(){return n.k})),s.d(t,"d",(function(){return n.I})),s.d(t,"e",(function(){return n.J})),s.d(t,"f",(function(){return n.O})),s.d(t,"g",(function(){return n.nb})),a.i18n.translate("xpack.cases.header.editableTitle.save",{defaultMessage:"Save"}),a.i18n.translate("xpack.cases.header.editableTitle.cancel",{defaultMessage:"Cancel"});const i=a.i18n.translate("xpack.cases.header.badge.betaLabel",{defaultMessage:"Beta"}),l=a.i18n.translate("xpack.cases.header.badge.betaDesc",{defaultMessage:"This feature is currently in beta. If you encounter any bugs or have feedback, please open an issue or visit our discussion forum."})},184:function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var a=s(4),n=s.n(a),i=s(5),l=s(3),c=s(34);const o=({euiTheme:e,iconSide:t})=>Object(l.css)("align-items:center;display:inline-flex;vertical-align:top;white-space:nowrap;","left"===t&&Object(l.css)(".euiIcon{margin-right:",e.size.xs,";}","")," ","right"===t&&Object(l.css)("flex-direction:row-reverse;.euiIcon{margin-left:",e.size.xs,";}",""),";",""),r=n.a.memo((({ariaLabel:e,children:t,color:s,dataTestSubj:n,disabled:c,href:r,iconSide:u="left",iconSize:d="s",iconType:j,onClick:b})=>{const{euiTheme:p}=Object(i.useEuiTheme)(),m=Object(a.useCallback)((e=>"object"==typeof e&&null!=e&&"props"in e&&e.props&&e.props.children?m(e.props.children):null!=e&&Object.keys(e).length>0?e:""),[]),x=Object(a.useMemo)((()=>e||m(t)),[e,t,m]);return Object(l.jsx)(i.EuiLink,{className:"casesLinkIcon",color:s,"data-test-subj":n,disabled:c,css:o({euiTheme:p,iconSide:u}),onClick:b,"aria-label":x},Object(l.jsx)(i.EuiIcon,{size:d,type:j}),Object(l.jsx)("span",{className:"casesLinkIcon__label"},t))}));r.displayName="LinkIcon";var u=s(244),d=s(183),j=s(57);const b=(e,t)=>Object(l.css)("margin-bottom:",e.size.l,";",t&&Object(l.css)("border-bottom:",e.border.thin,";padding-bottom:",e.size.l,";.euiProgress{top:",e.size.l,";}",""),";","");var p={name:"4zleql",styles:"display:block"},m={name:"s4f3cd",styles:"overflow:hidden;display:block"};const x=({showBackButton:e=!1,border:t,children:s,isLoading:n,title:o,titleNode:x,"data-test-subj":O})=>{const{releasePhase:g}=Object(j.a)(),{navigateToAllCases:f}=Object(c.i)(),{euiTheme:y}=Object(i.useEuiTheme)(),h=Object(i.useEuiFontSize)("xs").fontSize,F=Object(a.useCallback)((e=>{e&&e.preventDefault(),f()}),[f]);return Object(l.jsx)("header",{css:b(y,t),"data-test-subj":O},Object(l.jsx)(i.EuiFlexGroup,{alignItems:"center"},Object(l.jsx)(i.EuiFlexItem,{css:m},e&&Object(l.jsx)("div",{className:"casesHeaderPage__linkBack",css:Object(l.css)("font-size:",h,";margin-bottom:",y.size.s,";","")},Object(l.jsx)(r,{dataTestSubj:"backToCases",onClick:F,iconType:"arrowLeft"},d.a)),x||Object(l.jsx)(u.a,{title:o,releasePhase:g}),t&&n&&Object(l.jsx)(i.EuiProgress,{size:"xs",color:"accent"})),s&&Object(l.jsx)(i.EuiFlexItem,{"data-test-subj":"header-page-supplements",css:p,grow:!1},s)))};x.displayName="HeaderPage";const O=n.a.memo(x)},241:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(44),n=s(8),i=s(77),l=s(46),c=s(6),o=s(76);const r=c.k.jira,u=()=>{const e=Object(n.j)();return Object(a.useQuery)(o.e.license(),(async({signal:e})=>{var t;return null!==(t=(await Object(i.f)(e)).find((e=>e.id===r)))&&void 0!==t?t:null}),{onError:t=>{"AbortError"!==t.name&&e.addError(t.body&&t.body.message?new Error(t.body.message):t,{title:l.e})}})}},242:function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"d",(function(){return j})),s.d(t,"b",(function(){return b}));var a=s(5),n=s(113),i=(s(4),s(147)),l=s(243),c=s(3);const o=()=>({id:"license-error",title:"",description:Object(c.jsx)(n.FormattedMessage,{defaultMessage:"Opening cases in external systems is available when you have the {appropriateLicense}, are using a {cloud}, or are testing out a Free Trial.",id:"xpack.cases.caseView.pushToServiceDisableByLicenseDescription",values:{appropriateLicense:Object(c.jsx)(a.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},i.c),cloud:Object(c.jsx)(a.EuiLink,{href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank"},i.d)}})}),r=()=>({id:"kibana-config-error",title:i.e,description:Object(c.jsx)(n.FormattedMessage,{defaultMessage:"The kibana.yml file is configured to only allow specific connectors. To enable opening a case in external systems, add .[actionTypeId] (ex: .servicenow | .jira) to the xpack.actions.enabledActiontypes setting. For more information, see {link}.",id:"xpack.cases.caseView.pushToServiceDisableByConfigDescription",values:{link:Object(c.jsx)(a.EuiLink,{href:"https://www.elastic.co/guide/en/kibana/current/alert-action-settings-kb.html",target:"_blank"},i.b)}})}),u=e=>{let t=[];return null==e||e.enabledInLicense||(t=[...t,o()]),null==e||e.enabledInConfig||(t=[...t,r()]),t},d=()=>({id:"connector-missing-error",title:"",description:i.a}),j=()=>({id:"connector-deleted-error",title:"",description:Object(c.jsx)(n.FormattedMessage,{defaultMessage:"The connector used to send updates to the external service has been deleted or you do not have the {appropriateLicense} to use it. To update cases in external systems, select a different connector or create a new one.",id:"xpack.cases.configureCases.warningMessage",values:{appropriateLicense:Object(c.jsx)(a.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},i.c)}}),errorType:"danger"}),b=()=>({id:l.a,title:"",description:Object(c.jsx)(n.FormattedMessage,{defaultMessage:"Closed cases cannot be sent to external systems. Reopen the case if you want to open or update it in an external system.",id:"xpack.cases.caseView.pushToServiceDisableBecauseCaseClosedDescription"})})},243:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const a="closed-case-push-error"},244:function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return m}));var a=s(4),n=s.n(a),i=s(12),l=s(5),c=s(89),o=s(183),r=s(3);const u=()=>Object(r.jsx)(l.EuiBetaBadge,{label:o.e,tooltipContent:o.d,tooltipPosition:"bottom"});u.displayName="ExperimentalBadge";const d=n.a.memo(u),j=()=>Object(r.jsx)(l.EuiBetaBadge,{label:o.c,tooltipContent:o.b,tooltipPosition:"bottom"});j.displayName="BetaBadge";const b=n.a.memo(j),p=({title:e,releasePhase:t,children:s})=>Object(r.jsx)(l.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s",responsive:!1},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"none",responsive:!1},Object(r.jsx)(l.EuiFlexItem,{grow:!1},Object(r.jsx)(l.EuiTitle,{size:"l"},Object(r.jsx)("h1",{"data-test-subj":"header-page-title"},Object(i.isString)(e)?Object(r.jsx)(c.a,{text:e}):e))),Object(r.jsx)(l.EuiFlexItem,{grow:!1},s))),Object(r.jsx)(l.EuiFlexItem,{grow:!1},"experimental"===t&&Object(r.jsx)(u,null),"beta"===t&&Object(r.jsx)(j,null)));p.displayName="Title";const m=n.a.memo(p)},269:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(107),n=s(228),i=a.__importDefault(s(270));t.default=function(e,t){i.default(e,t,n.isDeepEqual)}},270:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(4);t.default=function(e,t,s){var n=a.useRef(void 0);n.current&&s(t,n.current)||(n.current=t),a.useEffect(e,n.current)}}}]);