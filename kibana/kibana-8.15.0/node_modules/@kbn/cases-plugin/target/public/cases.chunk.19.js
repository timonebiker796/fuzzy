/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cases_bundle_jsonpfunction=window.cases_bundle_jsonpfunction||[]).push([[19],{142:function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return j})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return x}));var a=s(5),n=s(4),r=s.n(n),i=s(34),l=s(1);const c=e=>l.i18n.translate("xpack.cases.caseTable.caseDetailsLinkAria",{values:{detailName:e},defaultMessage:"click to visit case with title {detailName}"});var o=s(3);const u=({children:e,...t})=>Object(o.jsx)(a.EuiButton,t,e),j=({children:e,...t})=>Object(o.jsx)(a.EuiLink,t,e),d=({children:e,detailName:t,title:s})=>{const{getCaseViewUrl:a,navigateToCaseView:r}=Object(i.j)(),l=Object(n.useCallback)((e=>{e.preventDefault(),r({detailName:t})}),[r,t]);return Object(o.jsx)(j,{onClick:l,href:a({detailName:t}),"data-test-subj":"case-details-link","aria-label":c(null!=s?s:t)},e||t)},b=r.a.memo(d);b.displayName="CaseDetailsLink";const m=({label:e,msgTooltip:t,showToolTip:s,titleTooltip:l})=>{const{getConfigureCasesUrl:c,navigateToConfigureCases:j}=Object(i.l)(),d=Object(n.useCallback)((e=>{e.preventDefault(),j()}),[j]),b=Object(n.useMemo)((()=>Object(o.jsx)(u,{onClick:d,href:c(),iconType:"controlsHorizontal",isDisabled:!1,"aria-label":e,"data-test-subj":"configure-case-button"},e)),[e,d,c]);return s?Object(o.jsx)(a.EuiToolTip,{position:"top",title:l,content:Object(o.jsx)("p",null,t),"data-test-subj":"configure-case-tooltip"},b):Object(o.jsx)(r.a.Fragment,null,b)},x=r.a.memo(m);x.displayName="ConfigureCaseButton"},175:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var a=s(5),n=s(90),r=s.n(n),i=s(4),l=s.n(i),c=s(8),o=s(3);const u=l.a.memo((({children:e,date:t,fieldName:s,className:n=""})=>Object(o.jsx)(a.EuiToolTip,{"data-test-subj":"localized-date-tool-tip",anchorClassName:n,content:Object(o.jsx)(a.EuiFlexGroup,{"data-test-subj":"dates-container",direction:"column",gutterSize:"none"},null!=s?Object(o.jsx)(a.EuiFlexItem,{grow:!1},Object(o.jsx)("span",{"data-test-subj":"field-name"},s)):null,Object(o.jsx)(a.EuiFlexItem,{"data-test-subj":"with-day-of-week",grow:!1},r.a.tz(t,Object(c.i)()).format("llll")))},Object(o.jsx)(l.a.Fragment,null,e))));u.displayName="LocalizedDateTooltip"},198:function(e,t,s){"use strict";s.d(t,"a",(function(){return j})),s.d(t,"b",(function(){return d}));var a=s(44),n=s(76),r=s(8),i=s(46),l=s(77),c=s(57),o=s(144),u=s(145);const j={cases:[],countClosedCases:0,countInProgressCases:0,countOpenCases:0,page:0,perPage:0,total:0},d=(e={})=>{var t;const s=Object(r.j)(),{owner:j}=Object(c.a)(),d=Object(o.a)(Object(u.b)("delete")),b=j.length?j:d,m=null!=(null===(t=e.filterOptions)||void 0===t?void 0:t.owner)&&e.filterOptions.owner.length>0?{owner:e.filterOptions.owner}:{owner:b};return Object(a.useQuery)(n.e.cases(e),(({signal:t})=>{var s,a;return Object(l.j)({filterOptions:{...n.b,...null!==(s=e.filterOptions)&&void 0!==s?s:{},...m},queryParams:{...n.c,...null!==(a=e.queryParams)&&void 0!==a?a:{}},signal:t})}),{keepPreviousData:!0,onError:e=>{"AbortError"!==e.name&&s.addError(e.body&&e.body.message?new Error(e.body.message):e,{title:i.e})}})}},352:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return _}));var a=s(5),n=s(4),r=s.n(n),i=s(116),l=s(1);const c=l.i18n.translate("xpack.cases.recentCases.commentsTooltip",{defaultMessage:"Comments"}),o=l.i18n.translate("xpack.cases.recentCases.myRecentlyReportedCasesLabel",{defaultMessage:"Created by me"}),u=l.i18n.translate("xpack.cases.recentCases.myRecentlyAssignedCasesLabel",{defaultMessage:"Assigned to me"}),j=l.i18n.translate("xpack.cases.recentCases.noCasesMessage",{defaultMessage:"No cases have been created yet. Put your detective hat on and"}),d=l.i18n.translate("xpack.cases.recentCases.noCasesMessageReadOnly",{defaultMessage:"No cases have been created yet."}),b=l.i18n.translate("xpack.cases.recentCases.noCasesMessageAssignedToMe",{defaultMessage:"No cases have been recently assigned to you."}),m=l.i18n.translate("xpack.cases.recentCases.recentCasesSidebarTitle",{defaultMessage:"Recent cases"}),x=l.i18n.translate("xpack.cases.recentCases.recentlyCreatedCasesLabel",{defaultMessage:"Created by anyone"}),O=l.i18n.translate("xpack.cases.recentCases.startNewCaseLink",{defaultMessage:"start a new case"}),p=l.i18n.translate("xpack.cases.recentCases.viewAllCasesLink",{defaultMessage:"View all cases"});l.i18n.translate("xpack.cases.recentCases.controlLegend",{defaultMessage:"Cases filter"});var g=s(142),C=s(3);const f=[{id:"recentlyCreated",label:x},{id:"myRecentlyReported",label:o},{id:"myRecentlyAssigned",label:u}],y=r.a.memo((({filterBy:e,setFilterBy:t,hasCurrentUserInfo:s,isLoading:r=!1})=>{const i=f.map((e=>({value:e.id,text:e.label}))),l=Object(n.useCallback)((e=>{t(e.target.value)}),[t]);return Object(C.jsx)(a.EuiSelect,{"data-test-subj":"recent-cases-filter",disabled:!s,fullWidth:!0,hasNoInitialSelection:!0,isLoading:r,onChange:l,options:i,value:e,"aria-label":m})}));y.displayName="RecentCasesFilters";var h=s(113),v=s(175),w={name:"1tjylrs",styles:"width:fit-content"};const k=r.a.memo((({count:e,icon:t,tooltip:s})=>{const{euiTheme:n}=Object(a.useEuiTheme)();return Object(C.jsx)("span",{css:w},Object(C.jsx)(a.EuiToolTip,{content:s},Object(C.jsx)(a.EuiFlexGroup,{alignItems:"center",gutterSize:"none",css:Object(C.css)("margin-right:",n.size.base,";","")},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiIcon,{css:Object(C.css)("margin-right:",n.size.xs,";",""),color:"default",size:"s",type:t})),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiText,{color:"default",size:"xs"},e)))))}));k.displayName="IconWithCount";const E=({lines:e,placeholders:t})=>Object(C.jsx)(r.a.Fragment,null,[...Array(t).keys()].map(((s,n)=>Object(C.jsx)(r.a.Fragment,{key:n},Object(C.jsx)(a.EuiSkeletonText,{lines:e,"data-test-subj":"loadingPlaceholders"}),n!==t-1&&Object(C.jsx)(a.EuiSpacer,{size:"l"})))));E.displayName="LoadingPlaceholdersComponent";const T=r.a.memo(E);var F=s(57),N=s(34);const z=({recentCasesFilterBy:e})=>{const{permissions:t}=Object(F.a)(),{getCreateCaseUrl:s,navigateToCreateCase:a}=Object(N.m)(),i=Object(n.useCallback)((e=>{e.preventDefault(),a()}),[a]);return"myRecentlyAssigned"===e?Object(C.jsx)("span",{"data-test-subj":"no-cases-assigned-to-me"},b):t.create?Object(C.jsx)(r.a.Fragment,null,Object(C.jsx)("span",null,j),Object(C.jsx)(g.c,{"data-test-subj":"no-cases-create-case",onClick:i,href:s()},` ${O}`),"!"):Object(C.jsx)("span",{"data-test-subj":"no-cases-readonly"},d)};z.displayName="NoCasesComponent";const L=r.a.memo(z);var R=s(89),M=s(160),P=s(198),S=s(144);const I=e=>Object(C.css)("max-height:150px;overflow-y:auto;color:",e.colors.subduedText,";",""),U={name:"h9h6gr",styles:"& .euiMarkdownFormat{text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;word-break:break-word;}"},A=r.a.memo((({filterOptions:e,maxCasesToShow:t,recentCasesFilterBy:s})=>{const{owner:n}=Object(F.a)(),{euiTheme:i}=Object(a.useEuiTheme)(),l=Object(S.a)(["read"]),o=!!n.length,{data:u=P.a,isLoading:j}=Object(P.b)({queryParams:{perPage:t},filterOptions:{...e,owner:o?n:l}});return j?Object(C.jsx)(T,{lines:2,placeholders:3}):j||0!==u.cases.length?Object(C.jsx)(r.a.Fragment,null,u.cases.map(((e,t)=>Object(C.jsx)(a.EuiFlexGroup,{key:e.id,gutterSize:"none"},Object(C.jsx)(a.EuiFlexItem,null,Object(C.jsx)(a.EuiText,{size:"s"},Object(C.jsx)(g.a,{detailName:e.id,title:e.title},Object(C.jsx)(R.a,{text:e.title}))),Object(C.jsx)(a.EuiSpacer,{size:"xs"}),e.description&&e.description.length&&Object(C.jsx)("div",{css:I(i)},Object(C.jsx)("div",{css:U},Object(C.jsx)(M.c,{disableLinks:!0,textSize:"relative"},e.description))),Object(C.jsx)(a.EuiSpacer,{size:"xs"}),Object(C.jsx)(a.EuiFlexGroup,{gutterSize:"s"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiText,{size:"xs",color:"default","data-test-subj":"recent-cases-creation-relative-time"},Object(C.jsx)(v.a,{date:new Date(e.createdAt)},Object(C.jsx)(h.FormattedRelative,{value:e.createdAt})))),Object(C.jsx)(k,{count:e.totalComment,icon:"editorComment",tooltip:c})),t!==u.cases.length-1&&Object(C.jsx)(a.EuiSpacer,{size:"l"})))))):Object(C.jsx)(L,{recentCasesFilterBy:s})}));A.displayName="RecentCasesComp";var B=s(8),D=s(169);const _=r.a.memo((e=>Object(C.jsx)(r.a.Fragment,null,Object(C.jsx)(i.ReactQueryDevtools,{initialIsOpen:!1}),Object(C.jsx)(G,e))));_.displayName="RecentCases";const G=r.a.memo((({maxCasesToShow:e})=>{const t=Object(B.d)(),{data:s,isLoading:i}=Object(D.a)(),{getAllCasesUrl:l,navigateToAllCases:c}=Object(N.i)(),[o,u]=Object(n.useState)("recentlyCreated"),j=Object(n.useCallback)((e=>{e.preventDefault(),c()}),[c]),d=Object(n.useMemo)((()=>"myRecentlyAssigned"===o?(({currentUserProfile:e,isLoadingCurrentUserProfile:t})=>null==e||t?{assignees:[]}:{assignees:[e.uid]})({isLoadingCurrentUserProfile:i,currentUserProfile:s}):(({currentUserProfile:e,currentUser:t,isLoadingCurrentUserProfile:s,recentCasesFilterBy:a})=>{const n={reporters:[]};return"myRecentlyReported"!==a?n:null==e||s?null!=t?{reporters:[{email:t.email,full_name:t.fullName,username:t.username}]}:n:{reporters:[{email:e.user.email,full_name:e.user.full_name,username:e.user.username,profile_uid:e.uid}]}})({currentUser:t,isLoadingCurrentUserProfile:i,recentCasesFilterBy:o,currentUserProfile:s})),[t,s,i,o]),b=null!=s||null!=t;return Object(C.jsx)(r.a.Fragment,null,Object(C.jsx)(a.EuiFlexGroup,{alignItems:"center",gutterSize:"none",justifyContent:"spaceBetween"},Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(a.EuiTitle,{size:"xs"},Object(C.jsx)("h2",null,m))),Object(C.jsx)(a.EuiFlexItem,{grow:!1},Object(C.jsx)(y,{filterBy:o,setFilterBy:u,hasCurrentUserInfo:b,isLoading:i}))),Object(C.jsx)(a.EuiHorizontalRule,{margin:"s"}),Object(C.jsx)(a.EuiText,{color:"subdued",size:"s"},Object(C.jsx)(A,{filterOptions:d,maxCasesToShow:e,recentCasesFilterBy:o}),Object(C.jsx)(a.EuiHorizontalRule,{margin:"s"}),Object(C.jsx)(a.EuiText,{size:"xs"},Object(C.jsx)(g.c,{onClick:j,href:l()}," ",p))))}));G.displayName="RecentCasesComponent"}}]);