/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.aiops_bundle_jsonpfunction=window.aiops_bundle_jsonpfunction||[]).push([[15],{138:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const i={META_FIELDS:"metaFields",DOC_HIGHLIGHT:"doc_table:highlight",QUERY_STRING_OPTIONS:"query:queryString:options",QUERY_ALLOW_LEADING_WILDCARDS:"query:allowLeadingWildcards",SEARCH_QUERY_LANGUAGE:"search:queryLanguage",SORT_OPTIONS:"sort:options",COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX:"courier:ignoreFilterIfFieldNotInIndex",COURIER_SET_REQUEST_PREFERENCE:"courier:setRequestPreference",COURIER_CUSTOM_REQUEST_PREFERENCE:"courier:customRequestPreference",COURIER_MAX_CONCURRENT_SHARD_REQUESTS:"courier:maxConcurrentShardRequests",SEARCH_INCLUDE_FROZEN:"search:includeFrozen",SEARCH_TIMEOUT:"search:timeout",HISTOGRAM_BAR_TARGET:"histogram:barTarget",HISTOGRAM_MAX_BARS:"histogram:maxBars",HISTORY_LIMIT:"history:limit",TIMEPICKER_REFRESH_INTERVAL_DEFAULTS:"timepicker:refreshIntervalDefaults",TIMEPICKER_QUICK_RANGES:"timepicker:quickRanges",TIMEPICKER_TIME_DEFAULTS:"timepicker:timeDefaults",FILTERS_PINNED_BY_DEFAULT:"filters:pinnedByDefault",FILTERS_EDITOR_SUGGEST_VALUES:"filterEditor:suggestValues",AUTOCOMPLETE_USE_TIMERANGE:"autocomplete:useTimeRange",AUTOCOMPLETE_VALUE_SUGGESTION_METHOD:"autocomplete:valueSuggestionMethod",DATE_FORMAT:"dateFormat",DATEFORMAT_TZ:"dateFormat:tz"}},42:function(e,t,r){"use strict";r.r(t);var i=r(0),n=r(54),o=r(138),a=r(100),s=r(85),l=r(13),u=r(1),c=r(3),d=r(49),b=r(57),g=r(134),m=r(67),E=r(45),f=r(43),O=r(50),v=r(137),j=r(157),y=r(135);const R="p_value";var _={name:"1yghct1",styles:"overflow:auto;width:100%"};const S=({viewType:e=b.c.CHARTS,fn:t,metricField:r,maxSeriesToPlot:n,splitField:o,partitions:a,onError:s,onLoading:l,onRenderComplete:c,onChange:d,emptyState:S})=>{const{filters:h,query:T,searchBounds:p,interval:A}=Object(m.b)(),F=Object(u.useMemo)((()=>({fn:t,metricField:r,splitField:o})),[t,r,o]),{dataView:I}=Object(E.c)(),{uiSettings:C}=Object(f.b)(),P=Object(u.useMemo)((()=>{var e,t,r;const i=Object(O.a)(T,h,I,C);var n;return Array.isArray(null===(e=i.bool)||void 0===e?void 0:e.filter)||(i.bool||(i.bool={}),i.bool.filter=[]),i.bool.filter.push({range:{[I.timeFieldName]:{from:null===(t=p.min)||void 0===t?void 0:t.valueOf(),to:null===(r=p.max)||void 0===r?void 0:r.valueOf(),format:"epoch_millis"}}}),Array.isArray(a)&&a.length>0&&F.splitField&&(null===(n=i.bool)||void 0===n||n.filter.push({terms:{[F.splitField]:a}})),i}),[I,F.splitField,h,a,T,p,C]),x=Object(u.useMemo)((()=>({interval:A})),[A]),{results:M,isLoading:L}=Object(v.a)(F,x,P,1e4);Object(u.useEffect)((()=>{l(L)}),[l,L]);const D=Object(u.useMemo)((()=>{let e=M.sort(((e,t)=>e[R]-t[R]));return n&&(e=e.slice(0,n)),d&&d(e),e}),[M,n,d]);return Object(i.jsx)("div",{css:_},D.length>0?e===b.c.CHARTS?Object(i.jsx)(j.a,{changePoints:D.map((e=>({...e,...F}))),interval:x.interval,onRenderComplete:c}):e===b.c.TABLE?Object(i.jsx)(g.a,{isLoading:!1,annotations:D,fieldConfig:F,onRenderComplete:c}):null:L?null:S||Object(i.jsx)(y.a,{onRenderComplete:c}))};var h=r(72),T={name:"1d3w5wq",styles:"width:100%"};t.default=({coreStart:e,pluginStart:t,viewType:r,dataViewId:b,fn:g,metricField:O,splitField:v,partitions:j,maxSeriesToPlot:y,timeRange:R,onLoading:_,onError:p,onRenderComplete:A,embeddingOrigin:F,lastReloadRequestTime:I})=>{const C=Object(u.useMemo)((()=>{const{http:r,uiSettings:i,notifications:n,...o}=e,{lens:a,data:s,usageCollection:l,fieldFormats:u}=t;return{http:r,uiSettings:i,data:s,notifications:n,lens:a,usageCollection:l,fieldFormats:u,...o}}),[e,t]),P={...Object(l.pick)(C,["data","http","notifications","theme","uiSettings","i18n"]),uiSettingsKeys:o.a},x=Object(u.useMemo)((()=>({embeddingOrigin:null!=F?F:n.d,...C})),[C,F]),[M]=Object(u.useState)(new c.BehaviorSubject(null!=I?I:Date.now()));Object(u.useEffect)((function(){I&&M.next(I)}),[I,M]);const L=Object(u.useMemo)((()=>Object(c.combineLatest)([M]).pipe(Object(c.map)((([e])=>Math.max(e))),Object(c.distinctUntilChanged)())),[M]);return Object(i.jsx)("div",{"data-shared-item":"","data-test-subj":"aiopsEmbeddableChangePointChart",css:T},Object(i.jsx)(s.a,e,Object(i.jsx)(f.a.Provider,{value:x},Object(i.jsx)(a.a,P,Object(i.jsx)(h.a,{reload$:L},Object(i.jsx)(E.b,{dataViewId:b},Object(i.jsx)(m.a,{timeRange:R},Object(i.jsx)(d.b,null,Object(i.jsx)(S,{viewType:r,timeRange:R,fn:g,metricField:O,splitField:v,maxSeriesToPlot:y,dataViewId:b,partitions:j,onLoading:_,onRenderComplete:A,onError:p})))))))))}},50:function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return d}));var i=r(13),n=r(16),o=r(18),a=r(15);r(167);const s={bool:{must:[{match_all:{}}]}};function l(){return Object(i.cloneDeep)(s)}var u=r(260);function c(e,t,r,i){let s=l();if(Object(o.isQuery)(e)&&e.language===u.a.KUERY){const i=Object(a.fromKueryExpression)(e.query);if(""!==e.query&&(s=Object(a.toElasticsearchQuery)(i,r)),void 0!==s.bool){const e=Object(a.buildQueryFromFilters)(t,r);Array.isArray(s.bool.filter)||(s.bool.filter=void 0===s.bool.filter?[]:[s.bool.filter]),Array.isArray(s.bool.must_not)||(s.bool.must_not=void 0===s.bool.must_not?[]:[s.bool.must_not]),s.bool.filter=[...s.bool.filter,...e.filter],s.bool.must_not=[...s.bool.must_not,...e.must_not]}}else s=Object(a.buildEsQuery)(r,e?[e]:[],t||[],i?Object(n.getEsQueryConfig)(i):void 0);return s}function d({dataView:e,uiSettings:t,savedSearch:r,query:a,filters:s,filterManager:u}){if(!e||!r)return;const d=a,b=s,g=function(e){return e&&"searchSource"in e&&(null==e?void 0:e.searchSource)instanceof n.SearchSource?e.searchSource:void 0}(r);if(g&&void 0!==g.getParent()&&d){var m,E,f;const e=null!==(m=Object(i.cloneDeep)(null===(E=r.searchSource.getSearchRequestBody())||void 0===E?void 0:E.query))&&void 0!==m?m:l(),t=null===(f=r.searchSource.getField("index"))||void 0===f?void 0:f.timeFieldName;return Array.isArray(e.bool.filter)&&void 0!==t&&(e.bool.filter=e.bool.filter.filter((e=>{var r;return!(e.hasOwnProperty("range")&&null!==(r=e.range)&&void 0!==r&&r.hasOwnProperty(t))}))),{searchQuery:e,searchString:d.query,queryLanguage:d.language}}if(!r&&d)return u&&b&&u.addFilters(b),{searchQuery:c(d,Array.isArray(b)?b:[],e,t),searchString:d.query,queryLanguage:d.language};if(g){const r=null==u?void 0:u.getGlobalFilters(),i=null!=d?d:g.getField("query"),n=null!=b?b:Object(o.mapAndFlattenFilters)(g.getField("filter"));return u&&u.setFilters(n),r&&(null==u||u.addFilters(r)),{searchQuery:c(i,u?null==u?void 0:u.getFilters():n,e,t),searchString:i.query,queryLanguage:i.language}}}},64:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return o}));var i=r(2);const n=e=>e.darkMode?i.COLOR_MODES_STANDARD.dark:i.COLOR_MODES_STANDARD.light,o={darkMode:!1}},71:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},76:function(e,t,r){"use strict";r.d(t,"b",(function(){return R})),r.d(t,"a",(function(){return y}));var i=r(1),n=r(25),o=r(71),a=r(51),s=r.n(a),l=r(27),u=r.n(l),c=r(2);const d="eui-global",b="eui-utilities";var g=r(64),m=r(0);const E=[c.euiStylisPrefixer],f=u()({key:"css",stylisPlugins:E,container:document.querySelector('meta[name="emotion"]')}),O=u()({key:d,stylisPlugins:E,container:document.querySelector(`meta[name="${d}"]`)}),v=u()({key:b,stylisPlugins:E,container:document.querySelector(`meta[name="${b}"]`)});f.compat=!0,O.compat=!0,v.compat=!0;const j={default:f,global:O,utility:v},y=({theme:{theme$:e},globalStyles:t,colorMode:r,modify:n,children:o})=>{const a=s()(e,g.a),l=Object(i.useMemo)((()=>Object(g.b)(a)),[a]),u=r||l,d=!1!==t&&void 0;return Object(m.jsx)(c.EuiProvider,{cache:j,modify:n,colorMode:u,globalStyles:d,utilityClasses:d},o)},R=({children:e,i18n:t,...r})=>Object(n.useIsNestedEuiProvider)()?(Object(o.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(m.jsx)(t.Context,null,e)):Object(m.jsx)(y,r,Object(m.jsx)(t.Context,null,e))},85:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var i=r(4),n=r.n(i),o=(r(1),r(76)),a=r(28),s=r(0);const l=({children:e,...t})=>Object(s.jsx)(o.b,n()({globalStyles:!1},t),Object(s.jsx)(a.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(s.jsx)(a.KibanaErrorBoundary,null,e)))}}]);