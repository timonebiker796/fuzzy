/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.aiops_bundle_jsonpfunction=window.aiops_bundle_jsonpfunction||[]).push([[7,26],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n(2),a=n(12),l=n(1),o=n.n(l),s=n(60),r=n(0);const u=o.a.memo((({value:e,onChange:t})=>{const n=Object.keys(s.h).map((e=>({id:e,label:e})));return Object(r.jsx)(i.EuiButtonGroup,{legend:a.i18n.translate("xpack.aiops.changePointDetection.selectFunctionLabel",{defaultMessage:"Function"}),options:n,idSelected:e,onChange:e=>t(e),isFullWidth:!0,buttonSize:"compressed"})}))},108:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(1),a=n.n(i),l=n(12),o=n(2),s=n(49),r=n(43),u=n(0);const c=a.a.memo((({value:e,onChange:t,inline:n=!0})=>{var c;const{fieldStats:d}=Object(r.b)(),{metricFieldOptions:b}=Object(s.d)(),{renderOption:p,closeFlyout:j}=null!==(c=null==d?void 0:d.useFieldStatsTrigger())&&void 0!==c?c:{},f=Object(i.useMemo)((()=>b.map((e=>({value:e.name,label:e.displayName,field:{id:e.name,type:e.type}})))),[b]),g=f.filter((t=>t.value===e)),O=Object(i.useCallback)((e=>{const n=e[0];void 0!==n&&t(n.value),j&&j()}),[t,j]),m=l.i18n.translate("xpack.aiops.changePointDetection.selectMetricFieldLabel",{defaultMessage:"Metric field"});return Object(u.jsx)(a.a.Fragment,null,Object(u.jsx)(o.EuiFormRow,{fullWidth:!0,label:n?void 0:m},Object(u.jsx)(o.EuiComboBox,{fullWidth:!0,compressed:!0,prepend:n?m:void 0,singleSelection:{asPlainText:!0},options:f,selectedOptions:g,onChange:O,isClearable:!1,"data-test-subj":"aiopsChangePointMetricField",renderOption:p})))}))},109:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(1),a=n.n(i),l=n(12),o=n(2),s=n(43),r=n(49),u=n(0);const c=a.a.memo((({value:e,onChange:t,inline:n=!0})=>{var a;const{fieldStats:c}=Object(s.b)(),{renderOption:d,closeFlyout:b}=null!==(a=null==c?void 0:c.useFieldStatsTrigger())&&void 0!==a?a:{},{splitFieldsOptions:p}=Object(r.d)(),j=Object(i.useMemo)((()=>[{value:void 0,label:l.i18n.translate("xpack.aiops.changePointDetection.notSelectedSplitFieldLabel",{defaultMessage:"--- Not selected ---"})},...p.map((e=>({value:e.name,label:e.displayName,...e.name?{field:{id:e.name,type:null==e?void 0:e.type}}:{}})))]),[p]),f=j.filter((t=>t.value===e)),g=Object(i.useCallback)((e=>{const n=e[0],i=null==n?void 0:n.value;t(i),b&&b()}),[t,b]),O=l.i18n.translate("xpack.aiops.changePointDetection.selectSpitFieldLabel",{defaultMessage:"Split field"});return Object(u.jsx)(o.EuiFormRow,{fullWidth:!0,label:n?void 0:O},Object(u.jsx)(o.EuiComboBox,{fullWidth:!0,compressed:!0,prepend:n?O:void 0,singleSelection:{asPlainText:!0},options:j,selectedOptions:f,onChange:g,isClearable:!0,"data-test-subj":"aiopsChangePointSplitField",renderOption:d}))}))},110:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n(1);var i=n(14),a=n(2),l=n(12),o=n(0);const s=[{id:"charts",label:Object(o.jsx)(i.FormattedMessage,{id:"xpack.aiops.embeddableChangePointChart.viewTypeSelector.chartsLabel",defaultMessage:"Charts"}),iconType:"visLine"},{id:"table",label:Object(o.jsx)(i.FormattedMessage,{id:"xpack.aiops.embeddableChangePointChart.viewTypeSelector.tableLabel",defaultMessage:"Table"}),iconType:"visTable"}],r=({value:e,onChange:t})=>Object(o.jsx)(a.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("xpack.aiops.embeddableChangePointChart.viewTypeLabel",{defaultMessage:"View type"})},Object(o.jsx)(a.EuiButtonGroup,{isFullWidth:!0,legend:"This is a basic group",options:s,idSelected:e,onChange:t}))},125:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n(1);var i=n(14),a=n(2),l=n(12),o=n(13),s=n(167),r=n(92),u=n(0);const c=function(e){if(void 0!==(null==e?void 0:e.min)&&void 0!==e.max&&e.min>e.max)throw new Error("Invalid validator conditions");return Object(o.memoize)((t=>{const n={};return void 0!==(null==e?void 0:e.min)&&t<e.min&&(n.min=!0),void 0!==(null==e?void 0:e.max)&&t>e.max&&(n.max=!0),null!=e&&e.integerOnly&&!Number.isInteger(t)&&(n.integerOnly=!0),Object(s.a)(n)?n:null}))}({min:1,max:r.b,integerOnly:!0}),d=({value:e,onChange:t,onValidationChange:n,disabled:o,inline:s=!0})=>{const d=null!==c(e),b=l.i18n.translate("xpack.aiops.changePointDetection.maxSeriesToPlotLabel",{defaultMessage:"Max series"});return Object(u.jsx)(a.EuiFormRow,{fullWidth:!0,isInvalid:d,error:Object(u.jsx)(i.FormattedMessage,{id:"xpack.aiops.changePointDetection.maxSeriesToPlotError",defaultMessage:"Max series value must be between {minValue} and {maxValue}",values:{minValue:1,maxValue:r.b}}),label:s?void 0:b},Object(u.jsx)(a.EuiFieldNumber,{"data-test-subj":"aiopsMaxSeriesControlFieldNumber",disabled:o,prepend:s?b:void 0,append:Object(u.jsx)(a.EuiToolTip,{content:l.i18n.translate("xpack.aiops.changePointDetection.maxSeriesToPlotDescription",{defaultMessage:"The maximum number of change points to visualize."})},Object(u.jsx)(a.EuiIcon,{type:"questionInCircle"})),compressed:!0,fullWidth:!0,isInvalid:d,value:e,onChange:e=>{const i=Number(e.target.value);t(i),n&&n(c(i))},min:1,max:r.b}))}},154:function(e,t,n){"use strict";n.r(t),n.d(t,"apiCanAddNewPanel",(function(){return i})),n.d(t,"apiHasRuntimeChildState",(function(){return l})),n.d(t,"apiHasSerializedChildState",(function(){return a})),n.d(t,"apiHasSaveNotification",(function(){return o})),n.d(t,"apiCanDuplicatePanels",(function(){return s})),n.d(t,"apiCanExpandPanels",(function(){return r})),n.d(t,"apiIsPresentationContainer",(function(){return d})),n.d(t,"getContainerParentFromAPI",(function(){return b})),n.d(t,"listenForCompatibleApi",(function(){return p})),n.d(t,"combineCompatibleChildrenApis",(function(){return j})),n.d(t,"apiHasSerializableState",(function(){return f})),n.d(t,"tracksOverlays",(function(){return g})),n.d(t,"canTrackContentfulRender",(function(){return O}));const i=e=>"function"==typeof(null==e?void 0:e.addNewPanel),a=e=>Boolean(e&&e.getSerializedStateForChild),l=e=>Boolean(e&&e.getRuntimeStateForChild),o=e=>Boolean(e&&e.saveNotification$),s=e=>Boolean(void 0!==(null==e?void 0:e.duplicatePanel)),r=e=>Boolean(void 0!==(null==e?void 0:e.expandPanel));var u=n(83),c=n(3);const d=e=>Boolean(i(e)&&"function"==typeof(null==e?void 0:e.removePanel)&&"function"==typeof(null==e?void 0:e.replacePanel)&&"function"==typeof(null==e?void 0:e.addNewPanel)&&(null==e?void 0:e.children$)),b=e=>{const t=Object(u.b)(e)?e.parentApi:null;if(t)return d(t)?t:void 0},p=(e,t,n)=>{if(!e||!d(e))return()=>{};let i,a;const l=e.children$.subscribe((l=>{var o,s;null===(o=i)||void 0===o||o();const r=(()=>{for(const e of Object.keys(l)){const n=l[e];if(t(n))return n}if(t(e))return e})(),c=Object(u.c)(r)?r.uuid:null;c!==a&&(a=c,i=null!==(s=n(r))&&void 0!==s?s:void 0)}));return()=>{var e;l.unsubscribe(),null===(e=i)||void 0===e||e()}},j=(e,t,n,i,a)=>e&&d(e)?e.children$.pipe(Object(c.switchMap)((e=>{const l=[];for(const i of Object.values(e))n(i)&&Object(c.isObservable)(i[t])&&l.push(i[t]);return 0===l.length?Object(c.of)(i):Object(c.combineLatest)(l).pipe(Object(c.map)(a||(e=>e.flat().filter((e=>Boolean(e))))))}))):Object(c.of)(),f=e=>Boolean(null==e?void 0:e.serializeState),g=e=>Boolean(e&&e.openOverlay&&e.clearOverlays),O=e=>null!==e&&"object"==typeof e&&"trackContentfulRender"in e},275:function(e,t,n){"use strict";n.r(t),n.d(t,"resolveEmbeddableChangePointUserInput",(function(){return T}));var i=n(154),a=n(96),l=n(1),o=n.n(l),s=n(43),r=n(2),u=n(55),c=n(12),d=n(14),b=n(167),p=n(13),j=n(73),f=n.n(j),g=n(49),O=n(60),m=n(107),v=n(125),h=n(108),x=n(91),C=n(45),F=n(0);const y=({value:e,onChange:t,splitField:n,enableSearch:i=!0})=>{const{dataView:a}=Object(C.c)(),{notifications:{toasts:o}}=Object(s.b)(),u=f()(n),[d,b]=Object(l.useState)([]),[j,g]=Object(l.useState)(i),{runRequest:O,cancelRequest:m}=Object(x.a)(),v=Object(l.useCallback)((async t=>{if(i){m(),g(!0);try{const i=function(e,t,n="",i){return{params:{index:e,size:0,...null!=i&&i.length?{query:{bool:{must_not:[{terms:{[t]:i}}]}}}:{},aggs:{aggResults:{filter:{bool:{must:{wildcard:{[t]:{value:`*${n}*`}}}}},aggs:{partitionValues:{terms:{field:t}}}}}}}}(a.getIndexPattern(),n,t,e),l=await O(i);if(null===l)return void b([]);b(l.rawResponse.aggregations.aggResults.partitionValues.buckets.map((e=>({value:e.key,label:e.key}))))}catch(e){o.addError(e,{title:c.i18n.translate("xpack.aiops.changePointDetection.fetchPartitionsErrorTitle",{defaultMessage:"Failed to fetch partitions"})})}g(!1)}}),[i,m,a,n,e,O,o]);Object(l.useEffect)((function(){v(""),void 0!==u&&n!==u&&t([])}),[n,u,v,t]);const h=Object(l.useMemo)((()=>e.map((e=>({value:e,label:e})))),[e]),y=Object(l.useCallback)((e=>{t(e.map((e=>e.value)))}),[t]),P=Object(l.useMemo)((()=>Object(p.debounce)(v,500)),[v]),S=Object(l.useCallback)((n=>{t([...e,n])}),[t,e]);return Object(F.jsx)(r.EuiFormRow,{fullWidth:!0,label:Object(F.jsx)(r.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(F.jsx)(r.EuiFlexItem,{grow:!1},c.i18n.translate("xpack.aiops.changePointDetection.partitionsLabel",{defaultMessage:"Partitions"})),Object(F.jsx)(r.EuiFlexItem,{grow:!1},Object(F.jsx)(r.EuiToolTip,{content:c.i18n.translate("xpack.aiops.changePointDetection.partitionsDescription",{defaultMessage:"If not supplied, the largest change points across all split field values will be displayed."}),position:"right"},Object(F.jsx)(r.EuiIcon,{size:"s",type:"questionInCircle"}))))},Object(F.jsx)(r.EuiComboBox,{isLoading:j,fullWidth:!0,compressed:!0,options:d,selectedOptions:h,onChange:y,onSearchChange:i?P:void 0,onCreateOption:i?void 0:S,isClearable:!0,"data-test-subj":"aiopsChangePointPartitions"}))};var P=n(109),S=n(110),E=n(92);const w=({initialInput:e,onCreate:t,onCancel:n})=>{var i,a;const{unifiedSearch:{ui:{IndexPatternSelect:u}}}=Object(s.b)(),[j,f]=Object(l.useState)(null!==(i=null==e?void 0:e.dataViewId)&&void 0!==i?i:""),[O,m]=Object(l.useState)(null!==(a=null==e?void 0:e.viewType)&&void 0!==a?a:"charts"),[v,h]=Object(l.useState)(Object(p.pick)(null!=e?e:{},["fn","metricField","splitField","maxSeriesToPlot","partitions"])),[x,y]=Object(l.useState)(!0),P=Object(l.useMemo)((()=>({...v,viewType:O,title:Object(b.a)(v)?c.i18n.translate("xpack.aiops.changePointDetection.attachmentTitle",{defaultMessage:"Change point: {function}({metric}){splitBy}",values:{function:v.fn,metric:null==v?void 0:v.metricField,splitBy:null!=v&&v.splitField?c.i18n.translate("xpack.aiops.changePointDetection.splitByTitle",{defaultMessage:' split by "{splitField}"',values:{splitField:v.splitField}}):""}}):"",dataViewId:j})),[v,j,O]);return Object(F.jsx)(o.a.Fragment,null,Object(F.jsx)(r.EuiFlyoutHeader,null,Object(F.jsx)(r.EuiTitle,null,Object(F.jsx)("h2",{id:"changePointConfig"},Object(F.jsx)(d.FormattedMessage,{id:"xpack.aiops.embeddableChangePointChart.modalTitle",defaultMessage:"Change point detection configuration"})))),Object(F.jsx)(r.EuiFlyoutBody,null,Object(F.jsx)(r.EuiForm,null,Object(F.jsx)(S.a,{value:O,onChange:m}),Object(F.jsx)(r.EuiFormRow,{fullWidth:!0,label:c.i18n.translate("xpack.aiops.embeddableChangePointChart.dataViewLabel",{defaultMessage:"Data view"})},Object(F.jsx)(u,{autoFocus:!j,fullWidth:!0,compressed:!0,indexPatternId:j,placeholder:c.i18n.translate("xpack.aiops.embeddableChangePointChart.dataViewSelectorPlaceholder",{defaultMessage:"Select data view"}),onChange:e=>{f(null!=e?e:"")}})),Object(F.jsx)(C.b,{dataViewId:j},Object(F.jsx)(r.EuiHorizontalRule,{margin:"s"}),Object(F.jsx)(g.b,null,Object(F.jsx)(M,{formInput:v,onChange:h,onValidationChange:y}))))),Object(F.jsx)(r.EuiFlyoutFooter,null,Object(F.jsx)(r.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(F.jsx)(r.EuiFlexItem,{grow:!1},Object(F.jsx)(r.EuiButtonEmpty,{onClick:n,"data-test-subj":"aiopsChangePointChartsInitializerCancelButton"},Object(F.jsx)(d.FormattedMessage,{id:"xpack.aiops.embeddableChangePointChart.setupModal.cancelButtonLabel",defaultMessage:"Cancel"}))),Object(F.jsx)(r.EuiFlexItem,{grow:!1},Object(F.jsx)(r.EuiButton,{"data-test-subj":"aiopsChangePointChartsInitializerConfirmButton",isDisabled:!x||!j,onClick:t.bind(null,P),fill:!0},Object(F.jsx)(d.FormattedMessage,{id:"xpack.aiops.embeddableChangePointChart.setupModal.confirmButtonLabel",defaultMessage:"Confirm configurations"}))))))},M=({formInput:e,onChange:t,onValidationChange:n})=>{var i,a;const{metricFieldOptions:s,splitFieldsOptions:c}=Object(g.d)(),p=f()(s),j=Object(l.useMemo)((()=>{const t=c.find((t=>t.name===(null==e?void 0:e.splitField)));var n;return!(!t||!t.esTypes)&&(null===(n=t.esTypes)||void 0===n?void 0:n.some((e=>e===u.a.KEYWORD)))}),[c,null==e?void 0:e.splitField]);Object(l.useEffect)((function(){var n,i;Object(b.a)(e)?p&&s!==p&&t({fn:e.fn,metricField:null===(n=s[0])||void 0===n?void 0:n.name,splitField:void 0,partitions:void 0,maxSeriesToPlot:e.maxSeriesToPlot}):t({fn:O.d,metricField:null===(i=s[0])||void 0===i?void 0:i.name,splitField:void 0,partitions:void 0,maxSeriesToPlot:E.a})}),[s,p,e,t]);const x=Object(l.useCallback)((n=>{t({...e,...n})}),[e,t]);return Object(b.a)(e)?Object(F.jsx)(o.a.Fragment,null,Object(F.jsx)(r.EuiFormRow,{fullWidth:!0,label:Object(F.jsx)(d.FormattedMessage,{id:"xpack.aiops.embeddableChangePointChart.functionLabel",defaultMessage:"Function"})},Object(F.jsx)(m.a,{value:e.fn,onChange:e=>x({fn:e})})),Object(F.jsx)(h.a,{inline:!1,value:e.metricField,onChange:e=>x({metricField:e})}),Object(F.jsx)(P.a,{inline:!1,value:e.splitField,onChange:e=>x({splitField:e})}),e.splitField?Object(F.jsx)(y,{value:null!==(i=e.partitions)&&void 0!==i?i:[],onChange:e=>x({partitions:e}),splitField:e.splitField,enableSearch:j}):null,Object(F.jsx)(v.a,{inline:!1,disabled:!(null==e||null===(a=e.partitions)||void 0===a||!a.length),value:e.maxSeriesToPlot,onChange:e=>x({maxSeriesToPlot:e}),onValidationChange:e=>n(null===e)})):null};async function T(e,t,n,l,o){const{overlays:r}=e,u=Object(i.tracksOverlays)(n)?n:void 0;return new Promise((async(c,d)=>{try{const b=r.openFlyout(Object(a.a)(Object(F.jsx)(s.a.Provider,{value:{...e,...t}},Object(F.jsx)(w,{initialInput:o,onCreate:e=>{c(e),b.close(),null==u||u.clearOverlays()},onCancel:()=>{d(),b.close(),null==u||u.clearOverlays()}})),e),{ownFocus:!0,size:"s",type:"push","data-test-subj":"aiopsChangePointChartEmbeddableInitializer","aria-labelledby":"changePointConfig",onClose:()=>{d(),b.close(),null==u||u.clearOverlays()}});Object(i.tracksOverlays)(n)&&n.openOverlay(b,{focusedPanelId:l})}catch(e){d(e)}}))}},49:function(e,t,n){"use strict";n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h}));var i=n(1),a=n(3),l=n(277),o=n(171),s=n(55),r=n(259),u=n(67),c=n(60),d=n(50),b=n(43),p=n(45),j=n(0);const f=Object(i.createContext)({splitFieldsOptions:[],metricFieldOptions:[],requestParams:{},timeBuckets:{},bucketInterval:{},updateRequestParams:()=>{},resultFilters:[],updateFilters:()=>{},resultQuery:{query:"",language:"kuery"},combinedQuery:{},selectedChangePoints:{},setSelectedChangePoints:()=>{}}),g=Object(i.createContext)({splitFieldsOptions:[],metricFieldOptions:[]}),O=()=>Object(i.useContext)(g),m=({children:e})=>{const{dataView:t}=Object(p.c)(),n={metricFieldOptions:Object(i.useMemo)((()=>t.fields.filter((({aggregatable:e,type:t})=>e&&"number"===t))),[t]),splitFieldsOptions:Object(i.useMemo)((()=>t.fields.filter((({aggregatable:e,esTypes:t,displayName:n})=>e&&t&&t.some((e=>[s.a.KEYWORD,s.a.IP].includes(e)))&&!["_id","_index"].includes(n)))),[t])};return Object(j.jsx)(g.Provider,{value:n},e)},v=({children:e})=>{const{dataView:t,savedSearch:n}=Object(p.c)(),{uiSettings:g,data:{query:{filterManager:O,queryString:m}}}=Object(b.b)(),v=Object(i.useMemo)((()=>Object(d.b)({dataView:t,uiSettings:g,savedSearch:n,filterManager:O})),[t,n,g,O]),h=Object(o.c)(),x=Object(r.a)(g),{searchBounds:C}=Object(u.b)(),[F,y]=Object(i.useState)([]),[P,S]=Object(i.useState)({}),[E,w]=Object(i.useState)();Object(i.useEffect)((function(){const e=h.getTimeUpdate$().pipe(Object(a.startWith)(h.getTime())).subscribe((()=>{const e=h.getActiveBounds();if(!e)throw new Error("Time bound not available");x.setInterval("auto"),x.setBounds(e),w(x.getInterval())}));return()=>{e.unsubscribe()}}),[]);const M=Object(i.useMemo)((()=>t.fields.filter((({aggregatable:e,type:t})=>e&&"number"===t))),[t]),T=Object(i.useMemo)((()=>t.fields.filter((({aggregatable:e,esTypes:t,displayName:n})=>e&&t&&t.some((e=>[s.a.KEYWORD,s.a.IP].includes(e)))&&!["_id","_index"].includes(n)))),[t]),[I,k]=Object(l.b)("changePoint"),R=Object(i.useMemo)((()=>{var e,t,n;return null!==(e=I.query)&&void 0!==e?e:{query:null!==(t=null==v?void 0:v.searchString)&&void 0!==t?t:"",language:null!==(n=null==v?void 0:v.queryLanguage)&&void 0!==n?n:"kuery"}}),[v,I.query]),B=Object(i.useMemo)((()=>{const e={...I};var t;return e.fieldConfigs||(e.fieldConfigs=[{fn:c.d,metricField:null===(t=M[0])||void 0===t?void 0:t.name}]),e.interval=null==E?void 0:E.expression,e}),[I,M,E]),N=Object(i.useCallback)((e=>{O.setFilters(e)}),[O]);Object(i.useEffect)((()=>{y(O.getFilters());const e=O.getUpdates$().subscribe((()=>{y(O.getFilters())}));return()=>{e.unsubscribe()}}),[]),Object(i.useEffect)((function(){const e=null==O?void 0:O.getGlobalFilters();return I.filters&&O.setFilters(I.filters),I.query&&m.setQuery(I.query),e&&(null==O||O.addFilters(e)),()=>{null==O||O.removeAll(),m.clearQuery()}}),[I.filters,I.query,O,m]);const _=Object(i.useMemo)((()=>{var e,n,i;const a=Object(d.a)(R,F,t,g);return Array.isArray(null===(e=a.bool)||void 0===e?void 0:e.filter)||(a.bool||(a.bool={}),a.bool.filter=[]),a.bool.filter.push({range:{[t.timeFieldName]:{from:null===(n=C.min)||void 0===n?void 0:n.valueOf(),to:null===(i=C.max)||void 0===i?void 0:i.valueOf()}}}),a}),[F,R,g,t,C]);if(!E)return null;const D={timeBuckets:x,requestParams:B,updateRequestParams:k,metricFieldOptions:M,splitFieldsOptions:T,bucketInterval:E,resultFilters:F,updateFilters:N,resultQuery:R,combinedQuery:_,selectedChangePoints:P,setSelectedChangePoints:S};return Object(j.jsx)(f.Provider,{value:D},e)};function h(){return Object(i.useContext)(f)}},60:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return c}));const i={avg:"average",max:"max",min:"min",sum:"sum"},a="avg",l=1e4,o=500,s={DIP:"dip",SPIKE:"spike",DISTRIBUTION_CHANGE:"distribution_change",STEP_CHANGE:"step_change",TREND_CHANGE:"trend_change",STATIONARY:"stationary",NON_STATIONARY:"non_stationary",INDETERMINABLE:"indeterminable"},r=new Set([s.STATIONARY,s.NON_STATIONARY,s.INDETERMINABLE]),u=6,c={RUN:"ran_aiops_change_point_detection",SUCCESS:"aiops_change_point_detection_success",ERROR:"aiops_change_point_detection_error"}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var i=n(1),a=n(171),l=n(259),o=n(243),s=n(43),r=n(72),u=n(0);const c=Object(i.createContext)({get filters(){throw new Error("FilterQueryContext is not initialized")},get query(){throw new Error("FilterQueryContext is not initialized")},get timeRange(){throw new Error("FilterQueryContext is not initialized")},get searchBounds(){throw new Error("FilterQueryContext is not initialized")},get interval(){throw new Error("FilterQueryContext is not initialized")}}),d=({children:e,timeRange:t})=>{const{data:{query:{filterManager:n,queryString:d,timefilter:b}},uiSettings:p}=Object(s.b)(),j=Object(l.a)(p),f=Object(r.b)(),[g,O]=Object(i.useState)(n.getFilters()),[m,v]=Object(i.useState)(d.getQuery()),h=Object(a.b)(!1);Object(i.useEffect)((()=>{const e=n.getUpdates$().subscribe((()=>{O(n.getFilters())}));return()=>{e.unsubscribe()}}),[n]),Object(i.useEffect)((()=>{const e=d.getUpdates$().subscribe((()=>{v(d.getQuery())}));return()=>{e.unsubscribe()}}),[d]);const x=Object(i.useMemo)((()=>null!=t?t:h),[h,t]),C=Object(i.useMemo)((()=>b.timefilter.calculateBounds(x)),[x,b,f.refreshTimestamp]),F=Object(i.useMemo)((()=>(j.setInterval("auto"),j.setBounds(C),j.getInterval())),[C,j]),y=Object(i.useMemo)((()=>Object(o.b)(C,F,!1)),[C,F]);return Object(u.jsx)(c.Provider,{value:{filters:g,query:m,timeRange:x,searchBounds:y,interval:F.expression}},e)},b=()=>Object(i.useContext)(c)},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return c}));var i=n(1),a=n.n(i),l=n(51),o=n.n(l),s=n(0);const r=a.a.createContext({refreshTimestamp:Date.now()}),u=({reload$:e,children:t})=>{const n=o()(e,Date.now());return Object(s.jsx)(r.Provider,{value:{refreshTimestamp:n}},t)},c=()=>Object(i.useContext)(r)},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.default=function(e){var t=i.useRef();return i.useEffect((function(){t.current=e})),t.current}},91:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n(1),a=n(16),l=n(3),o=n(43);function s(){const{data:e}=Object(o.b)(),t=Object(i.useRef)(new AbortController),[n,s]=Object(i.useState)(!1);return{runRequest:Object(i.useCallback)((n=>new Promise(((i,o)=>{e.search.search(n,{abortSignal:t.current.signal}).pipe(Object(l.tap)((()=>{s(!0)}))).subscribe({next:e=>{Object(a.isRunningResponse)(e)||(s(!1),i(e))},error:e=>{if("AbortError"===e.name)return i(null);s(!1),o(e)}})}))),[e.search]),cancelRequest:Object(i.useCallback)((()=>{t.current.abort(),t.current=new AbortController}),[]),isLoading:n}}},92:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a}));const i=50,a=6}}]);