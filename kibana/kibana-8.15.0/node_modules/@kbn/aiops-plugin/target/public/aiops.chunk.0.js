/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.aiops_bundle_jsonpfunction=window.aiops_bundle_jsonpfunction||[]).push([[0],{100:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return a}));var n=r(1),o=r(0);const s=Object(n.createContext)(void 0),i=()=>{const t=Object(n.useContext)(s);if(void 0===t)throw new Error("datePickerContext was used outside of its Provider");return t},a=t=>{const{children:e,...r}=t;return Object(o.jsx)(s.Provider,{value:r},e)}},127:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=new(r(3).Subject)},167:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n=(t,e=[])=>"object"==typeof t&&null!==t&&Object.keys(t).length>0&&(0===e.length||e.every((e=>({}.hasOwnProperty.call(t,e)))))},171:function(t,e,r){"use strict";r.d(e,"c",(function(){return u})),r.d(e,"a",(function(){return l})),r.d(e,"b",(function(){return f}));var n=r(1),o=r(51),s=r.n(o),i=r(3),a=r(13),c=r(100);r(127);const u=(t={})=>{const{timeRangeSelector:e,autoRefreshSelector:r}=t,{data:{query:{timefilter:{timefilter:o}}}}=Object(c.b)();return Object(n.useEffect)((()=>{!0!==e||o.isTimeRangeSelectorEnabled()?!1===e&&o.isTimeRangeSelectorEnabled()&&o.disableTimeRangeSelector():o.enableTimeRangeSelector(),!0!==r||o.isAutoRefreshSelectorEnabled()?!1===r&&o.isAutoRefreshSelectorEnabled()&&o.disableAutoRefreshSelector():o.enableAutoRefreshSelector()}),[e,r,o]),o},l=()=>{const t=u(),e=Object(n.useMemo)((()=>t.getRefreshIntervalUpdate$().pipe(Object(i.map)(t.getRefreshInterval))),[t]);return s()(e,t.getRefreshInterval())},f=(t=!1)=>{const e=u(),r=Object(n.useMemo)((()=>t?e.getAbsoluteTime.bind(e):e.getTime.bind(e)),[t,e]),o=Object(n.useMemo)((()=>e.getTimeUpdate$().pipe(Object(i.map)(r),Object(i.distinctUntilChanged)(a.isEqual))),[e,r]);return s()(o,r())}},172:function(t,e,r){"use strict";const n=r(173),o=r(174),s=r(175);function i(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function c(t,e){return e.decode?o(t):t}function u(t){return Array.isArray(t)?t.sort():"object"==typeof t?u(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function l(t){const e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function f(t){const e=(t=l(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function d(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function p(t,e){i((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return(t,r,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"comma":case"separator":return(e,r,n)=>{const o="string"==typeof r&&r.split("").indexOf(t.arrayFormatSeparator)>-1?r.split(t.arrayFormatSeparator).map((e=>c(e,t))):null===r?r:c(r,t);n[e]=o};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const o of t.split("&")){let[t,i]=s(e.decode?o.replace(/\+/g," "):o,"=");i=void 0===i?null:["comma","separator"].includes(e.arrayFormat)?i:c(i,e),r(c(t,e),i,n)}for(const t of Object.keys(n)){const r=n[t];if("object"==typeof r&&null!==r)for(const t of Object.keys(r))r[t]=d(r[t],e);else n[t]=d(r,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(((t,e)=>{const r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=u(r):t[e]=r,t}),Object.create(null))}e.extract=f,e.parse=p,e.stringify=(t,e)=>{if(!t)return"";i((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);const r=r=>e.skipNull&&null==t[r]||e.skipEmptyString&&""===t[r],n=function(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const o=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[a(e,t),"[",o,"]"].join("")]:[...r,[a(e,t),"[",a(o,t),"]=",a(n,t)].join("")]};case"bracket":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[a(e,t),"[]"].join("")]:[...r,[a(e,t),"[]=",a(n,t)].join("")];case"comma":case"separator":return e=>(r,n)=>null==n||0===n.length?r:0===r.length?[[a(e,t),"=",a(n,t)].join("")]:[[r,a(n,t)].join(t.arrayFormatSeparator)];default:return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,a(e,t)]:[...r,[a(e,t),"=",a(n,t)].join("")]}}(e),o={};for(const e of Object.keys(t))r(e)||(o[e]=t[e]);const s=Object.keys(o);return!1!==e.sort&&s.sort(e.sort),s.map((r=>{const o=t[r];return void 0===o?"":null===o?a(r,e):Array.isArray(o)?o.reduce(n(r),[]).join("&"):a(r,e)+"="+a(o,e)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[r,n]=s(t,"#");return Object.assign({url:r.split("?")[0]||"",query:p(f(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:c(n,e)}:{})},e.stringifyUrl=(t,r)=>{r=Object.assign({encode:!0,strict:!0},r);const n=l(t.url).split("?")[0]||"",o=e.extract(t.url),s=e.parse(o,{sort:!1}),i=Object.assign(s,t.query);let c=e.stringify(i,r);c&&(c=`?${c}`);let u=function(t){let e="";const r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(t.url);return t.fragmentIdentifier&&(u=`#${a(t.fragmentIdentifier,r)}`),`${n}${c}${u}`}},173:function(t,e,r){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},174:function(t,e,r){"use strict";var n="%[a-f0-9]{2}",o=new RegExp("("+n+")|([^%]+?)","gi"),s=new RegExp("("+n+")+","gi");function i(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],i(r),i(n))}function a(t){try{return decodeURIComponent(t)}catch(n){for(var e=t.match(o)||[],r=1;r<e.length;r++)e=(t=i(e,r).join("")).match(o)||[];return t}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=s.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch(t){var n=a(r[0]);n!==r[0]&&(e[r[0]]=n)}r=s.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),i=0;i<o.length;i++){var c=o[i];t=t.replace(new RegExp(c,"g"),e[c])}return t}(t)}}},175:function(t,e,r){"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]}},243:function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return O}));var n=r(31),o=r(16),s=r(13),i=r(17),a=r.n(i),c=r(21),u=r.n(c);const l=new RegExp("^([0-9]*)\\s*("+u.a.units.join("|")+")$"),f=["ms","s","m","h"],d=["ms","s","m","h","d"],{duration:p}=a.a,h=u.a.unitsDesc,b=h.indexOf("w"),g=function(){const t=[[p(500,"ms"),p(100,"ms")],[p(5,"second"),p(1,"second")],[p(10,"second"),p(5,"second")],[p(15,"second"),p(10,"second")],[p(30,"second"),p(15,"second")],[p(1,"minute"),p(30,"second")],[p(5,"minute"),p(1,"minute")],[p(10,"minute"),p(5,"minute")],[p(15,"minute"),p(10,"minute")],[p(30,"minute"),p(10,"minute")],[p(1,"hour"),p(30,"minute")],[p(2,"hour"),p(1,"hour")],[p(4,"hour"),p(2,"hour")],[p(6,"hour"),p(4,"hour")],[p(8,"hour"),p(6,"hour")],[p(12,"hour"),p(8,"hour")],[p(24,"hour"),p(12,"hour")],[p(2,"d"),p(1,"d")],[p(4,"d"),p(2,"d")],[p(1,"week"),p(4,"d")],[p(1,"month"),p(1,"week")],[p(1,"year"),p(1,"month")],[1/0,p(1,"year")]].slice(0).reverse();function e(t,e,r){return function(n,o){const s=function(n,o){const s=o/n;let i;for(let n=0;n<t.length;n++){const o=t[n],a=e(o[0],o[1],s);if(null==a){if(!r)continue;if(i)return i;break}if(!r)return a;i=a}const c=Math.max(Math.floor(s),1);return a.a.duration(c,"ms")}(n,o);if(s)return a.a.duration(s._data)}}return{near:e(t,(function(t,e,r){if(t>r){if(t===1/0)return e;const n=t.asMilliseconds(),o=e.asMilliseconds();return Math.abs(n-r)<=Math.abs(o)?t:e}}),!0),lessThan:e(t,(function(t,e,r){if(e<r)return t!==1/0?t:e})),atLeast:e(t,(function(t,e,r){if(e<=r)return e}))}}();function m(t,e){this._timeBucketsConfig=t,this._fieldFormats=e,this.barTarget=this._timeBucketsConfig[o.UI_SETTINGS.HISTOGRAM_BAR_TARGET],this.maxBars=this._timeBucketsConfig[o.UI_SETTINGS.HISTOGRAM_MAX_BARS]}function y(t,e){const r=function(t){for(let e=0;e<h.length;e++){const r=h[e],n=t.as(r);if(n>=1&&Math.floor(n)===n){if(e<=b)continue;return{value:n,unit:r,expression:n+r}}}const e=t.as("ms");return{value:e,unit:"ms",expression:e+"ms"}}(t);t.esValue=r.value,t.esUnit=r.unit,t.expression=r.expression,t.overflow=e>t&&a.a.duration(t-e);const n=a.a.normalizeUnits(r.unit);return 1===r.value?t.description=n:t.description=`${r.value} ${n}s`,t}function j(t){return t&&"isValid"in t&&t.isValid()}function O(t,e,r=!1){const n=e.asMilliseconds(),o=Math.floor(t.min.valueOf()/n)*n;let s=Math.ceil(t.max.valueOf()/n)*n;return!1===r&&(s-=1),{min:a()(o),max:a()(s)}}m.prototype.setBarTarget=function(t){this.barTarget=t},m.prototype.setMaxBars=function(t){this.maxBars=t},m.prototype.setBounds=function(t){if(!t)return this.clearBounds();let e;e=Object(s.isPlainObject)(t)?[t.min,t.max]:Array.isArray(t)?t:[];const r=Object(s.sortBy)(e.map(Object(s.ary)(a.a,1)),Number);if(2!==r.length||!r.every(j))throw this.clearBounds(),new Error("invalid bounds set: "+t);if(this._lb=r.shift(),this._ub=r.pop(),this.getDuration().asSeconds()<0)throw new TypeError("Intervals must be positive")},m.prototype.clearBounds=function(){this._lb=this._ub=null},m.prototype.hasBounds=function(){return j(this._ub)&&j(this._lb)},m.prototype.getBounds=function(){if(this.hasBounds())return{min:this._lb,max:this._ub}},m.prototype.getDuration=function(){if(this.hasBounds())return a.a.duration(this._ub-this._lb,"ms")},m.prototype.setInterval=function(t){this.originalInterval=t;let e=t;if(e&&"auto"!==e){if(Object(s.isString)(e)&&(t=e,e=function(t,e=!1){const r=String(t).trim().match(l);if(!Array.isArray(r)||r.length<3)return null;try{const t=parseInt(r[1],10),n=r[2];return isNaN(t)||t<1&&-1===f.indexOf(n)||!0===e&&-1===d.indexOf(n)?null:Object(i.duration)(t,n)}catch(t){return null}}(e),0==+e&&(e=null)),!a.a.isDuration(e))throw new TypeError('"'+t+'" is not a valid interval.');this._i=e}else this._i="auto"},m.prototype.getInterval=function(){const t=this,e=t.getDuration();return y(function(r){if(!t.hasBounds())return r;const n=t.maxBars;let o;return e/r>n?(o=g.lessThan(n,e),+o==+r?r:(y(r,e),Object(s.assign)(o,{preScaled:r,scale:r/o,scaled:!0}))):r}(function(){const r=t._i;return a.a.isDuration(r)?r:g.near(t.barTarget,e)}()),e)},m.prototype.getIntervalToNearestMultiple=function(t){const e=this.getInterval(),r=e.asSeconds(),n=r%t;if(0===n)return e;let o=n>t/2?r+t-n:r-n;o=0===o?t:o;const s=a.a.duration(o,"seconds");y(s,this.getDuration());const i=e.preScaled;return void 0!==i&&i<s&&(s.preScaled=i,s.scale=i/s,s.scaled=!0),s},m.prototype.getIntervalToNearestMultiple=function(t){const e=this.getInterval(),r=e.asSeconds(),n=r%t;if(0===n)return e;let o=n>t/2?r+t-n:r-n;o=0===o?t:o;const s=a.a.duration(o,"seconds");y(s,this.getDuration());const i=e.preScaled;return void 0!==i&&i<s&&(s.preScaled=i,s.scale=i/s,s.scaled=!0),s},m.prototype.getScaledDateFormat=function(){const t=this.getInterval(),e=this._timeBucketsConfig["dateFormat:scaled"];for(let r=e.length-1;r>=0;r--){const n=e[r];if(!n[0]||t>=a.a.duration(n[0]))return n[1]}return this._timeBucketsConfig.dateFormat},m.prototype.getScaledDateFormatter=function(){return new(this._fieldFormats.getType(n.FIELD_FORMAT_IDS.DATE))({pattern:this.getScaledDateFormat()},this._timeBucketsConfig)}},259:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(1),o=r(16),s=r(243);const i=t=>Object(n.useMemo)((()=>new s.a({[o.UI_SETTINGS.HISTOGRAM_MAX_BARS]:t.get(o.UI_SETTINGS.HISTOGRAM_MAX_BARS),[o.UI_SETTINGS.HISTOGRAM_BAR_TARGET]:t.get(o.UI_SETTINGS.HISTOGRAM_BAR_TARGET),dateFormat:t.get("dateFormat"),"dateFormat:scaled":t.get("dateFormat:scaled")})),[t])},260:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));const n={KUERY:"kuery",LUCENE:"lucene"}},277:function(t,e,r){"use strict";r.d(e,"a",(function(){return j})),r.d(e,"c",(function(){return O})),r.d(e,"b",(function(){return S}));var n=r(59),o=r.n(n),s=r(172),i=r(1),a=r(32),c=r(13);function u(t,e,r){const n=e.split(".");let o=t;for(let t=0;t<n.length;t++){var s;const e=n[t];if(o=null===(s=o)||void 0===s?void 0:s[e],Array.isArray(o)){o=o.map((e=>"object"==typeof e?u(e,n.slice(t+1,n.length).join(".")):e));break}}return void 0===o?r:o}var l=r(33),f=r(3),d=r(167),p=r(0);const h=new Set(["_a","_g"]);function b(t){return h.has(t)}function g(t){const e={},r=Object(s.parse)(t,{sort:!1});try{Object.keys(r).forEach((t=>{b(t)?e[t]=Object(l.decode)(r[t]):e[t]=r[t]}))}catch(t){console.error("Could not read url state",t)}return e}const m=Object(i.createContext)({searchString:"",setUrlState:()=>{}}),{Provider:y}=m,j=({children:t})=>{const e=Object(a.useHistory)(),{search:r}=Object(a.useLocation)(),n=Object(i.useRef)(r);Object(i.useEffect)((()=>{n.current=r}),[r]);const o=Object(i.useCallback)(((t,r,o,i)=>{const a=n.current,f=g(a),d=Object(s.parse)(a,{sort:!1});if(Object.prototype.hasOwnProperty.call(f,t)||(f[t]={}),"string"==typeof r){if(Object(c.isEqual)(u(f,`${t}.${r}`),o))return a;f[t][r]=o}else{const e=r;Object.keys(e).forEach((r=>{f[t][r]=e[r]}))}try{const t=Object(s.stringify)(d,{sort:!1,encode:!1});if(Object.keys(f).forEach((t=>{b(t)?d[t]=Object(l.encode)(f[t]):d[t]=f[t]})),t!==Object(s.stringify)(d,{sort:!1,encode:!1})){const t=Object(s.stringify)(d,{sort:!1});n.current=t,i?e.replace({search:t}):e.push({search:t})}}catch(t){console.error("Could not save url state",t)}}),[]);return Object(p.jsx)(y,{value:{searchString:r,setUrlState:o}},t)},O=t=>{const{searchString:e,setUrlState:r}=Object(i.useContext)(m);return[Object(i.useMemo)((()=>{const r=g(e);if("object"==typeof r)return r[t]}),[e]),Object(i.useCallback)(((e,n,o)=>{r(t,e,n,o)}),[t,r])]};class url_state_PageUrlStateService{constructor(){o()(this,"_pageUrlState$",new f.BehaviorSubject(null)),o()(this,"_pageUrlStateCallback",null)}getPageUrlState$(){return this._pageUrlState$.pipe(Object(f.distinctUntilChanged)(c.isEqual))}getPageUrlState(){return this._pageUrlState$.getValue()}updateUrlState(t,e){if(!this._pageUrlStateCallback)throw new Error("Callback has not been initialized.");this._pageUrlStateCallback(t,e)}setCurrentState(t){this._pageUrlState$.next(t)}setUpdateCallback(t){this._pageUrlStateCallback=t}}const S=(t,e)=>{const[r,n]=O("_a"),o=null==r?void 0:r[t],s=Object(i.useRef)();Object(i.useEffect)((()=>{s.current=n}),[n]);const a=Object(i.useRef)(),u=Object(i.useMemo)((()=>{const t={...null!=e?e:{},...null!=o?o:{}};if(Object(c.isEqual)(t,a.current))return a.current;if(Object(d.a)(a.current))for(const e in t)Object(c.isEqual)(t[e],a.current[e])&&(t[e]=a.current[e]);return a.current=t,t}),[o]),l=Object(i.useCallback)(((e,r)=>{if(null==s||!s.current)throw new Error("Callback for URL state update has not been initialized.");s.current(t,{...u,...e},r)}),[t,u]),f=Object(i.useMemo)((()=>new url_state_PageUrlStateService),[]);return Object(i.useEffect)((function(){f.setCurrentState(u),f.setUpdateCallback(l)}),[f,l,u]),Object(i.useMemo)((()=>[u,l,f]),[u,l,f])}},43:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return s}));var n=r(1);const o=Object(n.createContext)(void 0),s=()=>{const t=Object(n.useContext)(o);if(void 0===t)throw new Error("useAiopsAppContext was used outside of its Provider");return t}},59:function(t,e,r){t.exports=r(6)(2)}}]);