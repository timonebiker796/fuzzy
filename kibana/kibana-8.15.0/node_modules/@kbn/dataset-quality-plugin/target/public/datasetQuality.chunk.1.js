/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.datasetQuality_bundle_jsonpfunction=window.datasetQuality_bundle_jsonpfunction||[]).push([[1],{111:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNSAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxnIGlkPSJpY29uLWxvZ2dpbmctMzItY29sb3IiIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yNzYyXzIwMjIyKSI+CiAgICAgICAgPGcgaWQ9Ikdyb3VwIDYiPgogICAgICAgICAgICA8cGF0aCBpZD0iRmlsbCAxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuNSAxNUgxNi41VjEzLjVINy41VjE1WiIgZmlsbD0iIzFBMUMyMSIvPgogICAgICAgICAgICA8cGF0aCBpZD0iRmlsbCAyIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuNSAxMS4yNUgxNi41VjkuNzVINy41VjExLjI1WiIgZmlsbD0iIzFBMUMyMSIvPgogICAgICAgICAgICA8cGF0aCBpZD0iRmlsbCAzIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuNSA3LjVIMTYuNVY2SDcuNVY3LjVaIiBmaWxsPSIjMUExQzIxIi8+CiAgICAgICAgICAgIDxwYXRoIGlkPSJGaWxsIDQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjMuMjUgNC41SDIwLjI1VjMuNzVDMjAuMjUgMi45MjI3NSAyMC45MjI4IDIuMjUgMjEuNzUgMi4yNUMyMi41NzcyIDIuMjUgMjMuMjUgMi45MjI3NSAyMy4yNSAzLjc1VjQuNVpNMTcuMjUgMjEuNzVDMTYuNDIyNyAyMS43NSAxNS43NSAyMS4wNzcyIDE1Ljc1IDIwLjI1VjE4SDUuMjVWMy43NUM1LjI1IDIuOTIyNzUgNS45MjI3NSAyLjI1IDYuNzUgMi4yNUgxOS4xNjdDMTguOTA5IDIuNjkzMjUgMTguNzUgMy4yMDE3NSAxOC43NSAzLjc1VjIwLjI1QzE4Ljc1IDIxLjA3NzIgMTguMDc3MiAyMS43NSAxNy4yNSAyMS43NVpNMy43NSAyMS43NUMyLjkyMjc1IDIxLjc1IDIuMjUgMjEuMDc3MiAyLjI1IDIwLjI1VjE5LjVIMTQuMjVWMjAuMjVDMTQuMjUgMjAuNzk2IDE0LjM5NjMgMjEuMzA4MyAxNC42NTI4IDIxLjc1SDMuNzVaTTIxLjc1IDAuNzVINi43NUM1LjA5NTUgMC43NSAzLjc1IDIuMDk1NSAzLjc1IDMuNzVWMThIMC43NVYyMC4yNUMwLjc1IDIxLjkwNDUgMi4wOTU1IDIzLjI1IDMuNzUgMjMuMjVIMTcuMjVDMTguOTA0NSAyMy4yNSAyMC4yNSAyMS45MDQ1IDIwLjI1IDIwLjI1VjZIMjQuNzVWMy43NUMyNC43NSAyLjA5NTUgMjMuNDA0NSAwLjc1IDIxLjc1IDAuNzVaIiBmaWxsPSIjMUExQzIxIi8+CiAgICAgICAgPC9nPgogICAgPC9nPgogICAgPGRlZnM+CiAgICAgICAgPGNsaXBQYXRoIGlkPSJjbGlwMF8yNzYyXzIwMjIyIj4KICAgICAgICAgICAgPHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC43NSkiLz4KICAgICAgICA8L2NsaXBQYXRoPgogICAgPC9kZWZzPgo8L3N2Zz4K"},50:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return u},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.isInterpreterStateEqual=t.isService=t.shallowEqual=t.getServiceSnapshot=t.partition=void 0;var a=n(49);function u(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.partition=function(e,t){var n,a,u=r([[],[]],2),o=u[0],c=u[1];try{for(var s=i(e),l=s.next();!l.done;l=s.next()){var d=l.value;t(d)?o.push(d):c.push(d)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return[o,c]},t.getServiceSnapshot=function(e){return 0!==e.status?e.getSnapshot():e.machine.initialState},t.shallowEqual=function(e,t){if(u(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!u(e[n[i]],t[n[i]]))return!1;return!0},t.isService=function(e){return"state"in e&&"machine"in e},t.isInterpreterStateEqual=function(e,t,n){if(e.status===a.InterpreterStatus.NotStarted)return!0;var r=void 0===n.changed&&(Object.keys(n.children).length>0||"boolean"==typeof t.changed);return!(n.changed||r)}},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActorContext=t.shallowEqual=t.useSpawn=t.useSelector=t.useInterpret=t.useActor=t.useMachine=void 0;var r=n(68);Object.defineProperty(t,"useMachine",{enumerable:!0,get:function(){return r.useMachine}});var i=n(57);Object.defineProperty(t,"useActor",{enumerable:!0,get:function(){return i.useActor}});var a=n(55);Object.defineProperty(t,"useInterpret",{enumerable:!0,get:function(){return a.useInterpret}});var u=n(61);Object.defineProperty(t,"useSelector",{enumerable:!0,get:function(){return u.useSelector}});var o=n(71);Object.defineProperty(t,"useSpawn",{enumerable:!0,get:function(){return o.useSpawn}});var c=n(50);Object.defineProperty(t,"shallowEqual",{enumerable:!0,get:function(){return c.shallowEqual}});var s=n(72);Object.defineProperty(t,"createActorContext",{enumerable:!0,get:function(){return s.createActorContext}})},53:function(e,t,n){e.exports=n(27)(1268)},55:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.useInterpret=t.useIdleInterpreter=void 0;var u=n(4),o=n(60),c=n(49),s=n(56);function l(e,t){var n=(0,s.default)((function(){return"function"==typeof e?e():e})),a=t.context,u=t.guards,l=t.actions,d=t.activities,f=t.services,I=t.delays,g=(t.state,i(t,["context","guards","actions","activities","services","delays","state"])),j=(0,s.default)((function(){var e={context:a,guards:u,actions:l,activities:d,services:f,delays:I},t=n.withConfig(e,(function(){return r(r({},n.context),a)}));return(0,c.interpret)(t,g)}));return(0,o.default)((function(){Object.assign(j.machine.options.actions,l),Object.assign(j.machine.options.guards,u),Object.assign(j.machine.options.activities,d),Object.assign(j.machine.options.services,f),Object.assign(j.machine.options.delays,I)}),[l,u,d,f,I]),j}t.useIdleInterpreter=l,t.useInterpret=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=a(t,2),i=r[0],o=void 0===i?{}:i,s=r[1],d=l(e,o);return(0,u.useEffect)((function(){if(s){var e=d.subscribe((0,c.toObserver)(s));return function(){e.unsubscribe()}}}),[s]),(0,u.useEffect)((function(){var e=o.state;return d.start(e?c.State.create(e):void 0),function(){d.stop(),d.status=c.InterpreterStatus.NotStarted}}),[]),d}},56:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.default=function(e){var t=r.useRef();return t.current||(t.current={v:e()}),t.current.v}},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActor=t.isActorWithState=void 0;var r=n(4),i=n(60),a=n(56),u=n(53),o=n(50);function c(e){return e}function s(e){return"state"in e}function l(e){return"getSnapshot"in e?(0,o.isService)(e)?(0,o.getServiceSnapshot)(e):e.getSnapshot():s(e)?e.state:void 0}t.isActorWithState=s,t.useActor=function(e,t){void 0===t&&(t=l);var n=(0,r.useRef)(e),s=(0,r.useRef)([]),d=(0,r.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),f=(0,r.useCallback)((function(){return t(e)}),[e,t]),I=(0,r.useCallback)((function(t,n){return(0,o.isService)(e)?(0,o.isInterpreterStateEqual)(e,t,n):t===n}),[e]),g=(0,u.useSyncExternalStoreWithSelector)(d,f,f,c,I),j=(0,a.default)((function(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=n.current;(function(e){return"deferred"in e})(i)&&i.deferred?s.current.push(r):i.send(r)}}));return(0,i.default)((function(){for(n.current=e;s.current.length>0;){var t=s.current.shift();e.send(t)}}),[e]),[g,j]}},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4).useLayoutEffect;t.default=r},61:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelector=void 0;var r=n(4),i=n(53),a=n(57),u=n(50),o=function(e,t){return e===t};t.useSelector=function(e,t,n,c){void 0===n&&(n=o);var s=(0,r.useRef)(null),l=(0,r.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),d=(0,r.useCallback)((function(){return c?c(e):function(e,t){if((0,u.isService)(e)){if(0===e.status&&t.current)return t.current;var n=(0,u.getServiceSnapshot)(e);return t.current=0===e.status?n:null,n}return(0,a.isActorWithState)(e)?e.state:void 0}(e,s)}),[e,c]);return(0,i.useSyncExternalStoreWithSelector)(l,d,d,t,n)}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return b}));var r=n(6),i=n(38),a=n(4),u=n.n(a),o=n(5),c=n(111),s=n.n(c),l=n(3);const d=({integration:e})=>e&&e.name!==o.m?Object(l.jsx)(i.PackageIcon,{packageName:e.name,version:e.version,icons:e.icons,size:"m",tryApi:!0}):Object(l.jsx)(r.EuiIcon,{type:s.a,size:"m"});var f=n(90),I=n.n(f),g=n(1);n(34);const j=g.i18n.translate("xpack.datasetQuality.insufficientPrivilegesMessage",{defaultMessage:"You don't have sufficient privileges to access this information."}),b=({hasPrivileges:e,title:t,mode:n="popover",iconColor:i="warning",popoverCss:o,children:c})=>{const[s,d]=I()(!1),f=Object(a.useCallback)((()=>d(!0)),[d]);return e?Object(l.jsx)(u.a.Fragment,null,c):"popover"===n?Object(l.jsx)(r.EuiPopover,{css:o,attachToAnchor:!0,anchorPosition:"downCenter",button:Object(l.jsx)(r.EuiButtonIcon,{"data-test-subj":`datasetQualityInsufficientPrivileges-${t}`,"aria-label":j,title:j,iconType:"warning",color:i,onClick:f}),isOpen:s,closePopover:d},j," "):Object(l.jsx)(r.EuiToolTip,{content:j},Object(l.jsx)(r.EuiFlexGroup,{alignItems:"center"},Object(l.jsx)(r.EuiIcon,{"data-test-subj":`datasetQualityInsufficientPrivileges-${t}`,"aria-label":j,title:j,type:"warning",color:i}),c))}},68:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),u=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)u.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return u};Object.defineProperty(t,"__esModule",{value:!0}),t.useMachine=void 0;var i=n(4),a=n(53),u=n(49),o=n(55),c=n(50);function s(e){return e}t.useMachine=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var l=r(t,1)[0],d=void 0===l?{}:l,f=(0,o.useIdleInterpreter)(e,d),I=(0,i.useCallback)((function(){return f.status===u.InterpreterStatus.NotStarted?d.state?u.State.create(d.state):f.machine.initialState:f.getSnapshot()}),[f]),g=(0,i.useCallback)((function(e,t){return(0,c.isInterpreterStateEqual)(f,e,t)}),[f]),j=(0,i.useCallback)((function(e){return f.subscribe(e).unsubscribe}),[f]),b=(0,a.useSyncExternalStoreWithSelector)(j,I,I,s,g);return(0,i.useEffect)((function(){var e=d.state;return f.start(e?u.State.create(e):void 0),function(){f.stop(),f.status=u.InterpreterStatus.NotStarted}}),[]),[b,f.send,f]}},71:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSpawn=void 0;var r=n(49),i=n(56);t.useSpawn=function(e){return(0,i.default)((function(){return(0,r.spawnBehavior)(e)}))}},72:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createActorContext=void 0;var i=n(4),a=n(55),u=n(57),o=n(61);t.createActorContext=function(e,t,n){var c=i.createContext(null),s=c.Provider;function l(u){var o=u.children,c=u.machine,l=void 0===c?e:c,d=u.options,f=(0,a.useInterpret)(l,r(r({},t),d),n);return i.createElement(s,{value:f},o)}function d(){var e=i.useContext(c);if(!e)throw new Error('You used a hook from "'.concat(l.displayName,"\" but it's not inside a <").concat(l.displayName,"> component."));return e}return l.displayName="ActorProvider(".concat(e.id,")"),{Provider:l,useActorRef:d,useActor:function(){var e=d();return(0,u.useActor)(e)},useSelector:function(e,t){var n=d();return(0,o.useSelector)(n,e,t)}}}},79:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return g})),n.d(t,"a",(function(){return j}));var r=n(6),i=(n(4),n(3));function a({quality:e,description:t,isColoredDescription:n}){const a={poor:"danger",degraded:"warning",good:"success"};return Object(i.jsx)(r.EuiHealth,{color:a[e]},Object(i.jsx)(r.EuiText,{size:"s",color:n?a[e]:"white"},t))}var u=n(1),o=n(34);const c=5e-4;function s({percentage:e,degradedDocsCount:t}){return e&&e<c?Object(i.jsx)(l,{degradedDocsCount:t}):Object(i.jsx)(d,{percentage:e})}const l=({degradedDocsCount:e})=>Object(i.jsx)(r.EuiText,{size:"s"},"~0%"," ",Object(i.jsx)(r.EuiToolTip,{content:u.i18n.translate("xpack.datasetQuality.fewDegradedDocsTooltip",{defaultMessage:"{degradedDocsCount} degraded docs in this data set.",values:{degradedDocsCount:e}})},Object(i.jsx)(r.EuiIcon,{type:"warning",color:"warning",size:"s"}))),d=({percentage:e})=>Object(i.jsx)(r.EuiText,{size:"s"},Object(i.jsx)(o.FormattedNumber,{value:e}),"%");var f=n(15),I=n(7);const g=e=>Object(f.countBy)(e.map(I.c)),j=({isLoading:e,dataStreamStat:t})=>{const{degradedDocs:{quality:n}}=t,o=u.i18n.translate("xpack.datasetQuality.datasetQualityIdicator",{defaultMessage:"{quality}",values:{quality:Object(f.capitalize)(n)}});return Object(i.jsx)(r.EuiSkeletonRectangle,{width:"50px",height:"20px",borderRadius:"m",isLoading:e},Object(i.jsx)(r.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(i.jsx)(a,{quality:n,description:o,isColoredDescription:!0})))}},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=function(e,t){return"boolean"==typeof t?t:!e};t.default=function(e){return r.useReducer(i,e)}},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(52),i=n(4),a=n(22),u=n(13);const o=()=>{const{service:e}=Object(u.b)(),t=Object(r.useSelector)(e,(e=>e.matches("integrations.fetching")&&(e.matches("datasets.fetching")||e.matches("degradedDocs.fetching")))),{timeRange:n,integrations:o,namespaces:c,qualities:s,query:l}=Object(r.useSelector)(e,(e=>e.context.filters)),d=Object(r.useSelector)(e,(e=>e.context.datasets)),f=Object(r.useSelector)(e,(e=>e.context.integrations)),{namespaces:I,qualities:g,filteredIntegrations:j}=Object(i.useMemo)((()=>d.reduce(((e,t)=>{var n,r;return{namespaces:[...new Set([...e.namespaces,t.namespace])],qualities:[...new Set([...e.qualities,t.degradedDocs.quality])],filteredIntegrations:[...new Set([...e.filteredIntegrations,null!==(n=null===(r=t.integration)||void 0===r?void 0:r.name)&&void 0!==n?n:"none"])]}}),{namespaces:[],qualities:[],filteredIntegrations:[]})),[d]),b=Object(i.useCallback)((t=>{t.isInvalid||e.send({type:"UPDATE_TIME_RANGE",timeRange:{...n,from:t.start,to:t.end}})}),[e,n]),p=Object(i.useCallback)((()=>{e.send({type:"REFRESH_DATA"})}),[e]),v=Object(i.useCallback)((({refreshInterval:t,isPaused:r})=>{e.send({type:"UPDATE_TIME_RANGE",timeRange:{...n,refresh:{pause:r,value:t}}})}),[e,n]),y=Object(i.useMemo)((()=>{var e;const t=null!==(e=null==f?void 0:f.reduce(((e,t)=>({...e,[t.name]:t})),{}))&&void 0!==e?e:{};return t.none=a.a.create({name:"none",title:"None"}),j.map((e=>{var n;return{...t[e],label:null===(n=t[e])||void 0===n?void 0:n.title,checked:o.includes(e)?"on":void 0}}))}),[f,j,o]),M=Object(i.useCallback)((t=>{e.send({type:"UPDATE_INTEGRATIONS",integrations:t.filter((e=>"on"===e.checked)).map((e=>e.name))})}),[e]),S=Object(i.useMemo)((()=>[...new Set(I)].map((e=>({label:e,checked:c.includes(e)?"on":void 0})))),[I,c]),h=Object(i.useCallback)((t=>{e.send({type:"UPDATE_NAMESPACES",namespaces:t.filter((e=>"on"===e.checked)).map((e=>e.label))})}),[e]),A=Object(i.useMemo)((()=>[...new Set(g)].map((e=>({label:e,checked:s.includes(e)?"on":void 0})))),[g,s]),m=Object(i.useCallback)((t=>{e.send({type:"UPDATE_QUALITIES",qualities:t.filter((e=>"on"===e.checked)).map((e=>e.label))})}),[e]),N=Object(i.useCallback)((t=>{e.send({type:"UPDATE_QUERY",query:t})}),[e]);return{timeRange:n,onTimeChange:b,onRefresh:p,onRefreshChange:v,integrations:y,namespaces:S,qualities:A,onIntegrationsChange:M,onNamespacesChange:h,onQualitiesChange:m,isLoading:t,selectedQuery:l,onQueryChange:N}}}}]);