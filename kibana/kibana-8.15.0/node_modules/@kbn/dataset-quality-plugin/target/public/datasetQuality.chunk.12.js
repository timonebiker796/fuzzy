/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.datasetQuality_bundle_jsonpfunction=window.datasetQuality_bundle_jsonpfunction||[]).push([[12],{166:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return fe}));var s=a(4),i=a.n(s),n=a(3),o=a(6),l=a(12),r=a(51),u=a(88);function c({title:e,fields:t,actionsMenu:a,dataTestSubj:i=`datasetQualityFlyoutFieldsList-${e.toLowerCase().split(" ").join("_")}`}){return Object(n.jsx)(o.EuiPanel,{hasBorder:!0,grow:!1,"data-test-subj":i},Object(n.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(n.jsx)(o.EuiTitle,{size:"s"},Object(n.jsx)("span",null,e)),Object(n.jsx)(o.EuiFlexItem,{grow:!1},a)),Object(n.jsx)(o.EuiSpacer,null),Object(n.jsx)(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},t.map((({fieldTitle:a,fieldValue:i,isLoading:l},r)=>Object(n.jsx)(s.Fragment,{key:r+a},Object(n.jsx)(o.EuiFlexGroup,null,Object(n.jsx)(o.EuiFlexItem,{grow:1},Object(n.jsx)(o.EuiTitle,{size:"xxs"},Object(n.jsx)("span",null,a))),Object(n.jsx)(o.EuiSkeletonRectangle,{width:260,isLoading:l,title:e},Object(n.jsx)(o.EuiFlexItem,{grow:4,"data-test-subj":"datasetQualityFlyoutFieldValue"},i))),r<t.length-1?Object(n.jsx)(o.EuiHorizontalRule,{margin:"s"}):null)))))}function d(){return Object(n.jsx)(o.EuiPanel,{hasBorder:!0,grow:!1},Object(n.jsx)(o.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(n.jsx)(o.EuiFlexGroup,null,Object(n.jsx)(o.EuiFlexItem,{grow:1},Object(n.jsx)(o.EuiSkeletonTitle,{size:"s"}))),Object(n.jsx)(o.EuiHorizontalRule,{margin:"s"}),Object(n.jsx)(o.EuiFlexGroup,null,Object(n.jsx)(o.EuiFlexItem,{grow:1},Object(n.jsx)(o.EuiSkeletonText,{size:"m",lines:1})),Object(n.jsx)(o.EuiFlexItem,{grow:2},Object(n.jsx)(o.EuiSkeletonText,{lines:1}))),Object(n.jsx)(o.EuiFlexGroup,null,Object(n.jsx)(o.EuiFlexItem,{grow:1},Object(n.jsx)(o.EuiSkeletonText,{size:"m",lines:1})),Object(n.jsx)(o.EuiFlexItem,{grow:2},Object(n.jsx)(o.EuiSkeletonText,{lines:1})))))}function j({dataStreamSettings:e,dataStreamSettingsLoading:t,dataStreamDetails:a,dataStreamDetailsLoading:s,fieldFormats:i}){const o=i.getDefaultInstance(u.b.DATE,[u.a.DATE]),r=null!=a&&a.lastActivity?o.convert(null==a?void 0:a.lastActivity):"-",d=null!=e&&e.createdOn?o.convert(e.createdOn):"-";return Object(n.jsx)(c,{title:l.d,fields:[{fieldTitle:l.e,fieldValue:r,isLoading:s},{fieldTitle:l.c,fieldValue:d,isLoading:t}]})}function g(){return Object(n.jsx)(d,null)}var b=a(63),x=a.n(b),m=a(16),O=a(67);function p({dataStreamStat:e}){const{integration:t,title:a}=e,s=Object(o.useEuiShadow)("s"),{euiTheme:i}=Object(o.useEuiTheme)(),u=Object(r.f)({dataStreamStat:e,telemetry:{page:"details",navigationSource:m.a.Header}});return Object(n.jsx)(o.EuiFlyoutHeader,{hasBorder:!0},Object(n.jsx)(o.EuiFlexGroup,{justifyContent:"flexStart"},Object(n.jsx)(o.EuiFlexItem,{grow:!0},Object(n.jsx)(o.EuiFlexGroup,{gutterSize:"m",justifyContent:"flexStart",alignItems:"center"},Object(n.jsx)(o.EuiTitle,{"data-test-subj":"datasetQualityFlyoutTitle"},Object(n.jsx)("h3",null,a)),Object(n.jsx)("div",{css:Object(n.css)(s,";padding:",i.size.xs,";border-radius:",i.size.xxs,";","")},Object(n.jsx)(O.a,{integration:t})))),Object(n.jsx)(o.EuiFlexItem,{grow:!1},Object(n.jsx)(o.EuiFlexGroup,{css:Object(n.css)("margin-right:",i.size.l,";",""),gutterSize:"s",justifyContent:"flexEnd",alignItems:"center"},Object(n.jsx)(o.EuiButton,x()({"data-test-subj":"datasetQualityHeaderButton",size:"s"},u.linkProps,{iconType:u.isLogsExplorerAvailable?"logoObservability":"discoverApp"}),u.isLogsExplorerAvailable?l.s:l.r)))))}var y=a(1),f=a(96),h=a(90),E=a.n(h),S=a(14),v=a(73);const F=()=>{const{services:{application:{navigateToUrl:e},http:{basePath:t},share:a}}=Object(S.c)(),{wrapLinkPropsForTelemetry:i,navigationSources:n,navigationTargets:o}=Object(v.a)(),[l,r]=E()(!1),u=Object(s.useMemo)((()=>a.url.locators.get("DASHBOARD_APP_LOCATOR")),[a.url.locators]),c=Object(s.useMemo)((()=>a.url.locators.get("MANAGEMENT_APP_LOCATOR")),[a.url.locators]);return{isOpen:l,handleCloseMenu:Object(s.useCallback)((()=>{r()}),[r]),handleToggleMenu:Object(s.useCallback)((()=>{r()}),[r]),getIntegrationOverviewLinkProps:Object(s.useCallback)(((a,s)=>{const l=t.prepend(`/app/integrations/detail/${a}-${s}/overview`);return i(Object(f.a)({href:l,onClick:()=>e(l)}),o.Integration,n.ActionMenu)}),[t,e,n,o,i]),getIndexManagementLinkProps:Object(s.useCallback)((e=>i(Object(f.a)({href:null==c?void 0:c.getRedirectUrl(e),onClick:()=>null==c?void 0:c.navigate(e)}),o.IndexTemplate,n.ActionMenu)),[c,n.ActionMenu,o.IndexTemplate,i]),getDashboardLinkProps:Object(s.useCallback)((e=>i(Object(f.a)({href:null==u?void 0:u.getRedirectUrl({dashboardId:null==e?void 0:e.id}||""),onClick:()=>null==u?void 0:u.navigate({dashboardId:null==e?void 0:e.id}||"")}),o.Dashboard,n.ActionMenu)),[u,n,o,i])}},T=y.i18n.translate("xpack.datasetQuality.flyoutIntegrationActionsText",{defaultMessage:"Integration actions"}),w=y.i18n.translate("xpack.datasetQuality.flyoutSeeIntegrationActionText",{defaultMessage:"See integration"}),k=y.i18n.translate("xpack.datasetQuality.flyoutIndexTemplateActionText",{defaultMessage:"Index template"}),I=y.i18n.translate("xpack.datasetQuality.flyoutViewDashboardsActionText",{defaultMessage:"View dashboards"});var L={name:"lugakg",styles:"font-weight:normal"};function C({integration:e,dashboardsLoading:t}){const{dataStreamStat:a,canUserAccessDashboards:i,canUserViewIntegrations:l}=Object(r.c)(),{type:u,name:c}=a,{dashboards:d=[],version:j,name:g}=e,{isOpen:b,handleCloseMenu:m,handleToggleMenu:O,getIntegrationOverviewLinkProps:p,getIndexManagementLinkProps:y,getDashboardLinkProps:f}=F(),h=Object(n.jsx)(o.EuiButtonIcon,{title:T,"aria-label":T,iconType:"boxesHorizontal",onClick:O,"data-test-subj":"datasetQualityFlyoutIntegrationActionsButton"}),E=({dataTestSubject:e,buttonText:t,routerLinkProps:a,iconType:s,disabled:i=!1})=>Object(n.jsx)(o.EuiButtonEmpty,x()({},a,{size:"s",css:L,color:"text",iconType:s,"data-test-subj":e,disabled:i}),t),S=Object(s.useMemo)((()=>{const e=[...l?[{renderItem:()=>Object(n.jsx)(E,{buttonText:w,dataTestSubject:"datasetQualityFlyoutIntegrationActionOverview",routerLinkProps:p(g,j),iconType:"package",disabled:!l})}]:[],{renderItem:()=>Object(n.jsx)(E,{buttonText:k,dataTestSubject:"datasetQualityFlyoutIntegrationActionTemplate",routerLinkProps:y({sectionId:"data",appId:`index_management/templates/${u}-${c}`}),iconType:"indexPatternApp"})},{isSeparator:!0,key:"sep"}];return d.length&&i?e.push({icon:"dashboardApp",panel:1,name:I,"data-test-subj":"datasetQualityFlyoutIntegrationActionViewDashboards",disabled:!1}):t&&e.push({icon:"dashboardApp",name:Object(n.jsx)(o.EuiSkeletonRectangle,{width:120,title:I}),"data-test-subj":"datasetQualityFlyoutIntegrationActionDashboardsLoading",disabled:!0}),[{id:0,items:e},{id:1,title:I,items:d.map((e=>({renderItem:()=>Object(n.jsx)(E,{buttonText:e.title,dataTestSubject:"datasetQualityFlyoutIntegrationActionDashboard",routerLinkProps:f(e),iconType:"dashboardApp"})})))}]}),[d,f,y,p,g,c,u,j,t,i,l]);return Object(n.jsx)(o.EuiPopover,{anchorPosition:"downRight",panelPaddingSize:"none",button:h,isOpen:b,closePopover:m},Object(n.jsx)(o.EuiContextMenu,{size:"s",panels:S,initialPanelId:0}))}var A={name:"1tjylrs",styles:"width:fit-content"};function D({integration:e,dashboardsLoading:t}){const{name:a,version:s}=e,i=Object(n.jsx)(C,{integration:e,dashboardsLoading:t});return Object(n.jsx)(c,{title:l.o,actionsMenu:i,fields:[{fieldTitle:l.p,fieldValue:Object(n.jsx)(o.EuiBadge,{color:"hollow",css:A},Object(n.jsx)(o.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(n.jsx)(O.a,{integration:e}),Object(n.jsx)(o.EuiText,{size:"s"},a))),isLoading:!1},{fieldTitle:l.q,fieldValue:s,isLoading:!1}]})}var P=a(34),R=a(35),z=a(5),M=a(43),Q=a(44);const B=180,N=["ACTION_CUSTOMIZE_PANEL","ACTION_CONFIGURE_IN_LENS","ACTION_OPEN_IN_DISCOVER","create-ml-ad-job-action"];function G({attributes:e,isChartLoading:t,onChartLoading:a,extraActions:r,timeRange:u,lastReloadTime:c,onTimeRangeChange:d}){const{services:{lens:j}}=Object(S.c)(),g=Object(s.useCallback)((({range:[e,t]})=>{d({start:new Date(e).toISOString(),end:new Date(t).toISOString()})}),[d]);return Object(n.jsx)(i.a.Fragment,null,Object(n.jsx)(Q.KibanaErrorBoundary,null,Object(n.jsx)(o.EuiFlexGroup,{css:Object(n.css)({minHeight:B},"",""),direction:"column",justifyContent:"center",alignItems:void 0===t?"center":void 0},e?Object(n.jsx)(j.EmbeddableComponent,{id:"datasetQualityFlyoutDegradedDocsTrend",css:_,style:{height:B},overrides:{settings:{legendAction:"ignore"}},viewMode:M.ViewMode.VIEW,hidePanelTitles:!0,disabledActions:N,timeRange:u,attributes:e,withDefaultActions:!0,extraActions:r,disableTriggers:!1,lastReloadRequestTime:c,onLoad:a,onBrushEnd:g}):Object(n.jsx)(o.EuiLoadingChart,{title:l.h,size:"l",mono:!0}))))}const _={name:"1bszdid",styles:".lnsExpressionRenderer__component{margin-left:-16px;.expExpressionRenderer__expression{padding:0!important;}}"};var H={name:"uwk7sp",styles:"flex-direction:row;justify-content:flex-start;align-items:flex-start;gap:4px"};function V({dataStream:e,timeRange:t={...z.j,refresh:z.c},lastReloadTime:a,onTimeRangeChange:i}){const{dataView:u,breakdown:c,...d}=Object(r.e)({dataStream:e}),[j,g]=Object(s.useState)(void 0);return Object(s.useEffect)((()=>{c.dataViewField&&c.fieldSupportsBreakdown?g(c.dataViewField):g(void 0),c.dataViewField&&c.fieldSupportsBreakdown}),[g,c.dataViewField,c.fieldSupportsBreakdown]),Object(n.jsx)(o.EuiPanel,{hasBorder:!0,grow:!1},Object(n.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(n.jsx)(o.EuiFlexItem,{css:H},Object(n.jsx)(o.EuiTitle,{size:"xxxs"},Object(n.jsx)("h6",null,l.g)),Object(n.jsx)(o.EuiToolTip,{content:$},Object(n.jsx)(o.EuiIcon,{size:"m",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),Object(n.jsx)(o.EuiSkeletonRectangle,{width:160,height:32,isLoading:!u},Object(n.jsx)(R.UnifiedBreakdownFieldSelector,{dataView:u,breakdown:{field:j},onBreakdownFieldChange:c.onChange}))),Object(n.jsx)(o.EuiSpacer,{size:"m"}),Object(n.jsx)(G,x()({},d,{timeRange:t,lastReloadTime:a,onTimeRangeChange:i})))}const $=Object(n.jsx)(P.FormattedMessage,{id:"xpack.datasetQuality.flyoutDegradedDocsTooltip",defaultMessage:"The percentage of degraded documents —documents with the {ignoredProperty} property— in your data set.",values:{ignoredProperty:Object(n.jsx)(o.EuiCode,{language:"json",transparentBackground:!0},"_ignored")}});var U=a(13),q={name:"y6n6nb",styles:"flex-grow:0"},K={name:"1ff36h2",styles:"flex-grow:1"};function W({timeRange:e,onTimeChange:t,onRefresh:a}){return Object(n.jsx)(o.EuiFlexGroup,{alignItems:"center",wrap:!0},Object(n.jsx)(o.EuiFlexGroup,{css:K,justifyContent:"flexStart",alignItems:"center",gutterSize:"xs"},Object(n.jsx)(o.EuiTitle,{size:"s"},Object(n.jsx)("span",null,l.w)),Object(n.jsx)(o.EuiToolTip,{content:Y},Object(n.jsx)(o.EuiIcon,{size:"m",color:"subdued",type:"questionInCircle",className:"eui-alignTop"}))),Object(n.jsx)(o.EuiFlexGroup,{css:q},Object(n.jsx)(o.EuiSuperDatePicker,{width:"auto",compressed:!0,isLoading:!1,start:e.from,end:e.to,onTimeChange:t,onRefresh:a,isQuickSelectOnly:!1,showUpdateButton:"iconOnly",updateButtonProps:{fill:!1}})))}const Y=Object(n.jsx)(P.FormattedMessage,{id:"xpack.datasetQuality.flyoutSummaryTooltip",defaultMessage:"Stats of the data set within the selected time range."});var Z=a(91),J={name:"1ut9bp4",styles:"min-width:152px;height:130px;display:flex;align-items:stretch"},X={name:"ptv4t3",styles:"display:flex;align-items:center;width:fit-content"};function ee({title:e,value:t,link:a,isLoading:s,userHasPrivilege:r}){const{euiTheme:u}=Object(o.useEuiTheme)();return Object(n.jsx)(o.EuiPanel,{"data-test-subj":`datasetQualityFlyoutKpi-${e}${s?"--loading":""}`,css:J,hasBorder:!0,grow:!1,paddingSize:"s"},Object(n.jsx)(o.EuiFlexGroup,{alignItems:"stretch",direction:"column",wrap:!1},Object(n.jsx)(o.EuiFlexItem,{css:Object(n.css)({gap:u.size.xs},"","")},Object(n.jsx)(o.EuiFlexGroup,null,Object(n.jsx)(o.EuiTitle,{"data-test-subj":`datasetQualityFlyoutKpiTitle-${e}`,size:"xxxs"},Object(n.jsx)("h6",null,e)),Object(n.jsx)(O.b,{hasPrivileges:r,title:e,mode:"popover",popoverCss:{marginLeft:"auto"}},Object(n.jsx)(i.a.Fragment,null))),a?Object(n.jsx)(o.EuiLink,x()({"data-test-subj":`datasetQualityFlyoutKpiLink-${e}`,css:X},a.props),Object(n.jsx)(o.EuiText,{css:Object(n.css)({fontWeight:u.font.weight.semiBold,whiteSpace:"nowrap"},"",""),size:"xs"},a.label)):null),Object(n.jsx)(o.EuiFlexItem,{css:Object(n.css)({alignItems:s?"stretch":"flex-end",justifyContent:"flex-end"},"","")},Object(n.jsx)(o.EuiSkeletonTitle,{style:{width:"50%",marginLeft:"auto"},size:"m",isLoading:s},Object(n.jsx)(o.EuiTitle,{"data-test-subj":`datasetQualityFlyoutKpiValue-${e}`,size:"s"},Object(n.jsx)("h3",{className:"eui-textNoWrap"},r?t:l.D))))))}var te={name:"1ky41i8",styles:"min-width:152px"};function ae({title:e}){return Object(n.jsx)(o.EuiSkeletonRectangle,{"data-test-subj":`datasetQualityFlyoutKpi-${e}--loading`,css:te,width:"100%",height:130})}var se=a(81);function ie({dataStreamDetails:e,timeRange:t={...z.j,refresh:z.c},degradedDocsLinkProps:a,hostsLocator:s,telemetry:i}){var n,r,u,c,d,j;const g=null!==(n=null==e?void 0:e.services)&&void 0!==n?n:{},b=Object.keys(g).map((e=>g[e].length)).reduce(((e,t)=>e+t),0);return l.u,Object(se.a)({href:void 0,onClick:()=>{i.trackDetailsNavigated(m.b.Services,m.a.Summary)}}),[{title:l.k,value:Object(o.formatNumber)(null!==(r=null==e?void 0:e.docsCount)&&void 0!==r?r:0,z.n),userHasPrivilege:!0},...null!==(null==e?void 0:e.sizeBytes)?[{title:l.v,value:Object(o.formatNumber)(null!==(u=null==e?void 0:e.sizeBytes)&&void 0!==u?u:0,z.a),userHasPrivilege:null===(c=null==e||null===(d=e.userPrivileges)||void 0===d?void 0:d.canMonitor)||void 0===c||c}]:[],{title:l.t,value:oe(b,z.l,z.n),link:void 0,userHasPrivilege:!0},ne(null==e?void 0:e.hosts,t,i,s),{title:l.g,value:Object(o.formatNumber)(null!==(j=null==e?void 0:e.degradedDocsCount)&&void 0!==j?j:0,z.n),link:a&&a.linkProps.href?{label:l.u,props:a.linkProps}:void 0,userHasPrivilege:!0}]}function ne(e,t,a,s){const i=null!=e?e:{},n=Object.keys(i),o=n.map((e=>i[e].length)).reduce((({count:e,anyHostExceedsMax:t},a)=>({count:e+a,anyHostExceedsMax:t||a>z.l})),{count:0,anyHostExceedsMax:!1}),r=n.filter((e=>i[e].length>0)).map((e=>i[e].map((t=>`${e}: "${t}"`)).join(" OR "))).join(" OR "),u=null==s?void 0:s.getRedirectUrl({query:{language:"kuery",query:r},dateRange:{from:t.from,to:t.to},limit:o.count});return l.u,Object(se.a)({href:u,onClick:()=>{a.trackDetailsNavigated(m.b.Hosts,m.a.Summary)}}),{title:l.l,value:oe(o.anyHostExceedsMax?o.count+1:o.count,o.count,z.n),link:void 0,userHasPrivilege:!0}}function oe(e,t,a){const s=e>t,i=s?t:e;return`${Object(o.formatNumber)(i,a)}${s?"+":""}`}function le({dataStreamStat:e,dataStreamDetails:t,isLoading:a,timeRange:i}){const{services:{observabilityShared:l}}=Object(S.c)(),u=Object(r.a)(),c=l.locators.infra.hostsLocator,d=Object(r.f)({dataStreamStat:e,query:{language:"kuery",query:`${Z.a}: *`},timeRangeConfig:i,telemetry:{page:"details",navigationSource:m.a.Summary}}),j=Object(s.useMemo)((()=>ie({dataStreamDetails:t,timeRange:i,degradedDocsLinkProps:d,hostsLocator:c,telemetry:u})),[t,d,c,u,i]);return Object(n.jsx)(o.EuiFlexGroup,{direction:"column"},Object(n.jsx)(o.EuiFlexGroup,{wrap:!0,gutterSize:"m"},j.map((e=>Object(n.jsx)(o.EuiFlexItem,{key:e.title},Object(n.jsx)(ee,x()({},e,{isLoading:a})))))))}function re(){const e=Object(r.a)();return Object(n.jsx)(o.EuiFlexGroup,{direction:"column"},Object(n.jsx)(o.EuiFlexGroup,{wrap:!0,gutterSize:"m"},ie({telemetry:e}).map((({title:e})=>Object(n.jsx)(o.EuiFlexItem,{key:e},Object(n.jsx)(ae,{title:e}))))))}var ue=a(45);function ce({valueLabel:e,isLoading:t,series:a}){return Object(n.jsx)(o.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"s",responsive:!1,alignItems:"center"},Object(n.jsx)(o.EuiFlexItem,{grow:!1},Object(n.jsx)(de,{isLoading:t,series:a})),Object(n.jsx)(o.EuiFlexItem,{grow:!1},e))}function de({isLoading:e,series:t}){const{euiTheme:a}=Object(o.useEuiTheme)(),s={height:a.size.l,width:"80px"},i={...s,display:"flex",alignItems:"center",justifyContent:"center"},l=Object(o.euiPaletteColorBlind)({rotations:2});return e?Object(n.jsx)("div",{style:i},Object(n.jsx)(o.EuiLoadingChart,{mono:!0})):function(e){return!(null==e||!e.some((e=>0!==e.y)))}(t)?Object(n.jsx)("div",{style:{backgroundColor:`${l[0]}`,padding:1,height:"100%"},"data-test-subj":"datasetQualitySparkPlot"},Object(n.jsx)(ue.Chart,{size:s},Object(n.jsx)(ue.Settings,{showLegend:!1,locale:y.i18n.getLocale()}),Object(n.jsx)(ue.Tooltip,{type:"none"}),Object(n.jsx)(ue.BarSeries,{id:"barseries",xScaleType:ue.ScaleType.Linear,yScaleType:ue.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],data:t,color:l[1]}))):Object(n.jsx)("div",{style:i},Object(n.jsx)(o.EuiIcon,{type:"visLine",color:a.colors.mediumShade}))}const je=y.i18n.translate("xpack.datasetQuality.flyout.degradedField.field",{defaultMessage:"Field"}),ge=y.i18n.translate("xpack.datasetQuality.flyout.degradedField.count",{defaultMessage:"Docs count"}),be=y.i18n.translate("xpack.datasetQuality.flyout.degradedField.lastOccurrence",{defaultMessage:"Last occurrence"}),xe=()=>{const{isLoading:e,pagination:t,renderedItems:a,onTableChange:s,sort:i,fieldFormats:c}=Object(r.b)(),d=(({dateFormatter:e,isLoading:t})=>[{name:je,field:"name"},{name:ge,sortable:!0,field:"count",render:(e,{count:a,timeSeries:s})=>{const i=Object(o.formatNumber)(a,z.n);return Object(n.jsx)(ce,{series:s,valueLabel:i,isLoading:t})}},{name:be,sortable:!0,field:"lastOccurrence",render:t=>e.convert(t)}])({dateFormatter:c.getDefaultInstance(u.b.DATE,[u.a.DATE]),isLoading:e});return Object(n.jsx)(o.EuiBasicTable,{tableLayout:"fixed",columns:d,items:null!=a?a:[],loading:e,sorting:i,onChange:s,pagination:t,"data-test-subj":"datasetQualityFlyoutDegradedFieldTable",rowProps:{"data-test-subj":"datasetQualityFlyoutDegradedTableRow"},noItemsMessage:e?l.i:Object(n.jsx)(o.EuiEmptyPrompt,{"data-test-subj":"datasetQualityFlyoutDegradedTableNoData",layout:"vertical",title:Object(n.jsx)("h2",null,l.j),hasBorder:!1,titleSize:"m"})})};function me(){return Object(n.jsx)(o.EuiPanel,{hasBorder:!0,grow:!1},Object(n.jsx)(o.EuiFlexGroup,{responsive:!1,alignItems:"center",gutterSize:"xs"},Object(n.jsx)(o.EuiTitle,{size:"xxxs"},Object(n.jsx)("h6",null,l.m)),Object(n.jsx)(o.EuiIconTip,{content:l.n,color:"subdued",size:"m"})),Object(n.jsx)(xe,null))}const Oe=y.i18n.translate("xpack.datasetQuality.nonAggregatable.title",{defaultMessage:"Your request may take longer to complete"}),pe=e=>Object(n.jsx)(P.FormattedMessage,{id:"xpack.datasetQuality.flyout.nonAggregatable.description",defaultMessage:"{description}",values:{description:Object(n.jsx)(P.FormattedMessage,{id:"xpack.datasetQuality.flyout.nonAggregatable.warning",defaultMessage:"{dataset}does not support _ignored aggregation and may cause delays when querying data. {howToFixIt}",values:{dataset:Object(n.jsx)(o.EuiCode,{language:"json",transparentBackground:!0},e),howToFixIt:Object(n.jsx)(P.FormattedMessage,{id:"xpack.datasetQuality.flyout.nonAggregatable.howToFixIt",defaultMessage:"Manually {rolloverLink} this data set to prevent future delays.",values:{rolloverLink:Object(n.jsx)(o.EuiLink,{external:!0,target:"_blank","data-test-subj":"datasetQualityFlyoutNonAggregatableHowToFixItLink",href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-rollover-index.html"},y.i18n.translate("xpack.datasetQuality.flyout.nonAggregatableDatasets.link.title",{defaultMessage:"rollover"}))}})}})}});function ye({dataStream:e,dataStreamStat:t,dataStreamDetails:a,isNonAggregatable:l,dataStreamDetailsLoading:r,timeRange:u={...z.j,refresh:z.c}}){const{service:c}=Object(U.b)(),[d,j]=Object(s.useState)(Date.now()),g=Object(s.useCallback)((({start:e,end:t,refreshInterval:a})=>{c.send({type:"UPDATE_INSIGHTS_TIME_RANGE",timeRange:{from:e,to:t,refresh:{...z.c,value:a}}})}),[c]),b=Object(s.useCallback)((({isInvalid:e,...t})=>{e||g({refreshInterval:u.refresh.value,...t})}),[g,u.refresh]),x=Object(s.useCallback)((({start:e,end:t})=>{g({start:e,end:t,refreshInterval:u.refresh.value})}),[g,u.refresh]),m=Object(s.useCallback)((e=>{g(e),j(Date.now())}),[g]);return Object(n.jsx)(i.a.Fragment,null,l&&Object(n.jsx)(o.EuiFlexGroup,{"data-test-subj":"datasetQualityFlyoutNonAggregatableWarning",style:{marginBottom:"24px"}},Object(n.jsx)(o.EuiFlexItem,null,Object(n.jsx)(o.EuiCallOut,{title:Oe,color:"warning",iconType:"warning"},Object(n.jsx)("p",null,pe(e))))),Object(n.jsx)(W,{timeRange:u,onTimeChange:b,onRefresh:m}),Object(n.jsx)(o.EuiSpacer,{size:"m"}),t?Object(n.jsx)(le,{dataStreamStat:t,dataStreamDetails:a,isLoading:r,timeRange:u}):Object(n.jsx)(re,null),Object(n.jsx)(o.EuiSpacer,null),Object(n.jsx)(V,{dataStream:e,timeRange:u,lastReloadTime:d,onTimeRangeChange:x}),Object(n.jsx)(o.EuiSpacer,null),Object(n.jsx)(me,null))}function fe({dataset:e,closeFlyout:t}){const{dataStreamStat:a,dataStreamSettings:u,dataStreamDetails:c,isNonAggregatable:d,fieldFormats:b,timeRange:x,loadingState:m,flyoutLoading:O}=Object(r.c)(),{startTracking:y}=Object(r.a)();return Object(s.useEffect)((()=>{y()}),[y]),Object(n.jsx)(o.EuiFlyout,{onClose:t,ownFocus:!0,"data-component-name":"datasetQualityFlyout","data-test-subj":"datasetQualityFlyout"},O?Object(n.jsx)(o.EuiSkeletonRectangle,{width:"100%",height:80}):Object(n.jsx)(i.a.Fragment,null,Object(n.jsx)(p,{dataStreamStat:e}),Object(n.jsx)(o.EuiFlyoutBody,{css:he,"data-test-subj":"datasetQualityFlyoutBody"},Object(n.jsx)(o.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l"},Object(n.jsx)(ye,{dataStream:e.rawName,dataStreamStat:a,dataStreamDetails:c,dataStreamDetailsLoading:m.dataStreamDetailsLoading,timeRange:x,isNonAggregatable:d})),Object(n.jsx)(o.EuiHorizontalRule,{margin:"none"}),Object(n.jsx)(o.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l"},m.dataStreamDetailsLoading&&m.dataStreamSettingsLoading?Object(n.jsx)(g,null):a?Object(n.jsx)(s.Fragment,null,Object(n.jsx)(j,{dataStreamSettings:u,dataStreamSettingsLoading:m.dataStreamSettingsLoading,dataStreamDetails:c,dataStreamDetailsLoading:m.dataStreamDetailsLoading,fieldFormats:b}),a.integration&&Object(n.jsx)(i.a.Fragment,null,Object(n.jsx)(o.EuiSpacer,null),Object(n.jsx)(D,{integration:a.integration,dashboardsLoading:m.datasetIntegrationsLoading}))):null)),Object(n.jsx)(o.EuiFlyoutFooter,null,Object(n.jsx)(o.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(n.jsx)(o.EuiFlexItem,{grow:!1},Object(n.jsx)(o.EuiButtonEmpty,{"data-test-subj":"datasetQualityFlyoutButton",iconType:"cross",onClick:t,flush:"left"},l.b))))))}const he={name:"19z0jbz",styles:".euiFlyoutBody__overflowContent{padding:0;}"}}}]);