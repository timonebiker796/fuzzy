/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.licenseManagement_bundle_jsonpfunction=window.licenseManagement_bundle_jsonpfunction||[]).push([[1],Array(35).concat([function(e,t,n){"use strict";t.__esModule=!0;var s=l(n(57));t.combineActions=s.default;var a=l(n(42));t.createAction=a.default;var i=l(n(60));t.createActions=i.default;var r=l(n(69));t.createCurriedAction=r.default;var o=l(n(52));t.handleAction=o.default;var c=l(n(72));function l(e){return e&&e.__esModule?e:{default:e}}t.handleActions=c.default},function(e,t,n){e.exports=n(7)(4)},function(e,t,n){"use strict";e.exports=function(e,t,n,s,a,i,r,o){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,s,a,i,r,o],u=0;(c=new Error(t.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";t.__esModule=!0,t.ACTION_TYPE_DELIMITER=t.DEFAULT_NAMESPACE=void 0,t.DEFAULT_NAMESPACE="/",t.ACTION_TYPE_DELIMITER="||"},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return"function"==typeof e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return"undefined"!=typeof Map&&e instanceof Map}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){void 0===t&&(t=i.default),(0,s.default)((0,a.default)(t)||(0,r.default)(t),"Expected payloadCreator to be a function, undefined or null");var o=(0,r.default)(t)||t===i.default?i.default:function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return e instanceof Error?e:t.apply(void 0,[e].concat(s))},c=(0,a.default)(n),l=e.toString(),u=function(){var t=o.apply(void 0,arguments),s={type:e};return t instanceof Error&&(s.error=!0),void 0!==t&&(s.payload=t),c&&(s.meta=n.apply(void 0,arguments)),s};return u.toString=function(){return l},u};var s=o(n(37)),a=o(n(40)),i=o(n(43)),r=o(n(59));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){if((0,a.default)(e))return Array.from(e.keys());if("undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);return"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t};var s,a=(s=n(41))&&s.__esModule?s:{default:s}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return 0===e.length}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return e.toString()}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return"string"==typeof e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return null==e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var s,a=(s=n(63))&&s.__esModule?s:{default:s};t.default=function(e){return-1===e.indexOf("/")?(0,a.default)(e):e.split("/").map(a.default).join("/")}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var s=n(38),a=r(n(44)),i=r(n(51));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return function t(n,r,o,c){var l=void 0===r?{}:r,u=l.namespace,d=void 0===u?s.DEFAULT_NAMESPACE:u,p=l.prefix;return void 0===o&&(o={}),void 0===c&&(c=""),(0,a.default)(n).forEach((function(a){var r=function(e){return c||!p||p&&new RegExp("^"+p+d).test(e)?e:""+p+d+e}(function(e){var t;if(!c)return e;var n=e.toString().split(s.ACTION_TYPE_DELIMITER),a=c.split(s.ACTION_TYPE_DELIMITER);return(t=[]).concat.apply(t,a.map((function(e){return n.map((function(t){return""+e+d+t}))}))).join(s.ACTION_TYPE_DELIMITER)}(a)),l=(0,i.default)(a,n);e(l)?t(l,{namespace:d,prefix:p},o,r):o[r]=l})),o}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){return(0,a.default)(t)?t.get(e):t[e]};var s,a=(s=n(41))&&s.__esModule?s:{default:s}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){void 0===t&&(t=r.default);var d=(0,l.default)(e).split(u.ACTION_TYPE_DELIMITER);(0,s.default)(!(0,c.default)(n),"defaultState for reducer handling "+d.join(", ")+" should be defined"),(0,s.default)((0,a.default)(t)||(0,i.default)(t),"Expected reducer to be a function or object with next and throw reducers");var p=(0,a.default)(t)?[t,t]:[t.next,t.throw].map((function(e){return(0,o.default)(e)?r.default:e})),f=p[0],j=p[1];return function(e,t){void 0===e&&(e=n);var s=t.type;return s&&-1!==d.indexOf((0,l.default)(s))?(!0===t.error?j:f)(e,t):e}};var s=d(n(37)),a=d(n(40)),i=d(n(39)),r=d(n(43)),o=d(n(48)),c=d(n(71)),l=d(n(46)),u=n(38);function d(e){return e&&e.__esModule?e:{default:e}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),a=n(16),i=s.__importDefault(n(55));t.default=function(e,t){var n=a.useState(t),s=n[0],r=n[1];return i.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(16),a="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var s=void 0;t.setEuiDevProviderWarning=function(e){return s=e},t.getEuiDevProviderWarning=function(){return s},t.emitEuiProviderWarning=function(e){if("function"==typeof s)return s(e);switch(s){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a;(0,s.default)((a=t,!(0,r.default)(a)&&a.every(d)),"Expected action types to be strings, symbols, or action creators");var i=t.map(o.default).join(l.ACTION_TYPE_DELIMITER);return{toString:function(){return i}}};var s=u(n(37)),a=u(n(40)),i=u(n(58)),r=u(n(45)),o=u(n(46)),c=u(n(47)),l=n(38);function u(e){return e&&e.__esModule?e:{default:e}}function d(e){return(0,c.default)(e)||(0,a.default)(e)||(0,i.default)(e)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return"symbol"==typeof e||"object"==typeof e&&"[object Symbol]"===Object.prototype.toString.call(e)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return null===e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=(0,a.default)((0,u.default)(n))?n.pop():{};return(0,s.default)(n.every(c.default)&&((0,c.default)(e)||(0,a.default)(e)),"Expected optional object followed by string action types"),(0,c.default)(e)?h([e].concat(n),r):x({},function(e,t){var n=M((0,f.default)(e,t));return(0,j.default)(n,t)}(e,r),h(n,r))};var s=m(n(37)),a=m(n(39)),i=m(n(40)),r=m(n(43)),o=m(n(61)),c=m(n(47)),l=m(n(48)),u=m(n(62)),d=m(n(49)),p=m(n(66)),f=m(n(67)),j=m(n(68)),b=m(n(42)),g=n(38);function m(e){return e&&e.__esModule?e:{default:e}}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},s=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),s.forEach((function(t){O(e,t,n[t])}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=void 0===t?{}:t,a=n.prefix,c=n.namespace,u=void 0===c?g.DEFAULT_NAMESPACE:c;return(0,p.default)(Object.keys(e),(function(t,n){var c,d=e[n];(0,s.default)(function(e){if((0,i.default)(e)||(0,l.default)(e))return!0;if((0,o.default)(e)){var t=e[0],n=void 0===t?r.default:t,s=e[1];return(0,i.default)(n)&&(0,i.default)(s)}return!1}(d),"Expected function, undefined, null, or array with payload and meta functions for "+n);var p=a?""+a+u+n:n,f=(0,o.default)(d)?b.default.apply(void 0,[p].concat(d)):(0,b.default)(p,d);return x({},t,((c={})[n]=f,c))}))}function h(e,t){var n=M((0,p.default)(e,(function(e,t){var n;return x({},e,((n={})[t]=r.default,n))})),t);return(0,p.default)(Object.keys(n),(function(e,t){var s;return x({},e,((s={})[(0,d.default)(t)]=n[t],s))}))}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return Array.isArray(e)}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return e[e.length-1]}},function(e,t,n){var s=n(64);e.exports=function(e){return s(e).replace(/\s(\w)/g,(function(e,t){return t.toUpperCase()}))}},function(e,t,n){var s=n(65);e.exports=function(e){return s(e).replace(/[\W_]+(.|$)/g,(function(e,t){return t?" "+t:""})).trim()}},function(e,t){e.exports=function(e){return n.test(e)?e.toLowerCase():s.test(e)?(function(e){return e.replace(i,(function(e,t){return t?" "+t:""}))}(e)||e).toLowerCase():a.test(e)?function(e){return e.replace(r,(function(e,t,n){return t+" "+n.toLowerCase().split("").join(" ")}))}(e).toLowerCase():e.toLowerCase()};var n=/\s/,s=/(_|-|\.|:)/,a=/([a-z][A-Z]|[A-Z][a-z])/,i=/[\W_]+(.|$)/g,r=/(.)([A-Z]+)/g},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e,t){return e.reduce((function(e,n){return t(e,n)}),{})}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var s=a(n(39));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,a(n(50)).default)(s.default);t.default=i},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n=void 0===t?{}:t,r=n.namespace,o=void 0===r?s.DEFAULT_NAMESPACE:r,c=n.prefix;function l(t,n,s){var r=(0,i.default)(s.shift());(0,a.default)(s)?n[r]=e[t]:(n[r]||(n[r]={}),l(t,n[r],s))}var u={};return Object.getOwnPropertyNames(e).forEach((function(e){var t=c?e.replace(""+c+o,""):e;return l(e,u,t.split(o))})),u};var s=n(38),a=r(n(45)),i=r(n(49));function r(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var s=i(n(70)),a=i(n(42));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return(0,s.default)((0,a.default)(e,t),t.length)}},function(e,t){e.exports=function(e,t){return function n(){null==t&&(t=e.length);var s=[].slice.call(arguments);return s.length>=t?e.apply(this,s):function(){return n.apply(this,s.concat([].slice.call(arguments)))}}}},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0,t.default=function(e){return void 0===e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t,n){void 0===n&&(n={}),(0,a.default)((0,i.default)(e)||(0,r.default)(e),"Expected handlers to be a plain object.");var d=(0,c.default)(e,n),p=(0,o.default)(d).map((function(e){return(0,l.default)(e,(0,u.default)(e,d),t)})),f=s.default.apply(void 0,p.concat([t]));return function(e,n){return void 0===e&&(e=t),f(e,n)}};var s=d(n(73)),a=d(n(37)),i=d(n(39)),r=d(n(41)),o=d(n(44)),c=d(n(74)),l=d(n(52)),u=d(n(51));function d(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s="function"!=typeof t[t.length-1]&&t.pop(),a=t;if(void 0===s)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var o=void 0===e,c=void 0===t;return o&&c&&s?s:a.reduce((function(e,n){return n.apply(void 0,[e,t].concat(i))}),o&&!c&&s?s:e)}},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var s=r(n(39)),a=r(n(41)),i=r(n(75));function r(e){return e&&e.__esModule?e:{default:e}}var o=(0,r(n(50)).default)((function(e){return((0,s.default)(e)||(0,a.default)(e))&&!(0,i.default)(e)}));t.default=o},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=(0,a.default)(e),n=t.every((function(e){return"next"===e||"throw"===e}));return t.length&&t.length<=2&&n};var s,a=(s=n(44))&&s.__esModule?s:{default:s}},function(e,t,n){"use strict";function s(e){return function(t){var n=t.dispatch,s=t.getState;return function(t){return function(a){return"function"==typeof a?a(n,s,e):t(a)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=s();a.withExtraArgument=s;var i=a;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(23),a=n(78),i=s.__importDefault(n(80));t.default=function(e,t){i.default(e,t,a.isDeepEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var s=n(23).__importDefault(n(79));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=s.default},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var s,a,i;if(Array.isArray(t)){if((s=t.length)!=n.length)return!1;for(a=s;0!=a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((s=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=s;0!=a--;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=s;0!=a--;){var r=i[a];if(!("_owner"===r&&t.$$typeof||e(t[r],n[r])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(16);t.default=function(e,t,n){var a=s.useRef(void 0);a.current&&n(t,a.current)||(a.current=t),s.useEffect(e,a.current)}},function(e,t,n){"use strict";n.r(t),n.d(t,"renderApp",(function(){return rt}));var s=n(16),a=n.n(s),i=n(28),r=n(22),o=n(27),c=n(17);const l=({children:e,...t})=>Object(c.jsx)(r.Router,t,Object(c.jsx)(o.CompatRouter,null,e));var u=n(19),d=n(24),p=n(21),f=n(36),j=n.n(f),b=n(29),g=n(56),m=n(54),x=n.n(m),O=n(30),M=n.n(O),h=n(18);const y="eui-global",v="eui-utilities",E={darkMode:!1},T=[h.euiStylisPrefixer],_=M()({key:"css",stylisPlugins:T,container:document.querySelector('meta[name="emotion"]')}),S=M()({key:y,stylisPlugins:T,container:document.querySelector(`meta[name="${y}"]`)}),L=M()({key:v,stylisPlugins:T,container:document.querySelector(`meta[name="${v}"]`)});_.compat=!0,S.compat=!0,L.compat=!0;const k={default:_,global:S,utility:L},w=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:a,children:i})=>{const r=x()(e,E),o=Object(s.useMemo)((()=>(e=>e.darkMode?h.COLOR_MODES_STANDARD.dark:h.COLOR_MODES_STANDARD.light)(r)),[r]),l=n||o,u=!1!==t&&void 0;return Object(c.jsx)(h.EuiProvider,{cache:k,modify:a,colorMode:l,globalStyles:u,utilityClasses:u},i)},A=({children:e,i18n:t,...n})=>Object(b.useIsNestedEuiProvider)()?(Object(g.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(c.jsx)(t.Context,null,e)):Object(c.jsx)(w,n,Object(c.jsx)(t.Context,null,e));var C=n(31);const I=({children:e,...t})=>Object(c.jsx)(A,j()({globalStyles:!1},t),Object(c.jsx)(C.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(c.jsx)(C.KibanaErrorBoundary,null,e))),D=Object(s.createContext)(void 0),F=({children:e,value:t})=>Object(c.jsx)(D.Provider,{value:t},e),P=D.Consumer;var B=n(25),N=n(76),R=n.n(N),U=n(2),q=n(26),Y=n(32),G=n(35);const W=Object(G.createAction)("LICENSE_MANAGEMENT_ADD_LICENSE"),$=Object(G.handleActions)({[W]:(e,{payload:t})=>t},{});var z=n(1);const K=Object(G.createAction)("LICENSE_MANAGEMENT_ADD_UPLOAD_ERROR_MESSAGE"),H=Object(G.createAction)("LICENSE_MANAGEMENT_UPLOAD_LICENSE_STATUS"),X=U.i18n.translate("xpack.licenseMgmt.uploadLicense.genericUploadErrorMessage",{defaultMessage:"Error encountered uploading license:"}),J=Object(G.handleActions)({[H]:(e,{payload:t})=>t},{}),V=Object(G.createAction)("LICENSE_MANAGEMENT_START_BASIC_LICENSE_STATUS"),Z=Object(G.createAction)("LICENSE_MANAGEMENT_CANCEL_START_BASIC_LICENSE"),Q=Object(G.handleActions)({[V]:(e,{payload:t})=>t,[Z]:()=>({})},{}),ee=Object(G.handleActions)({[K]:(e,{payload:t})=>t},""),te=Object(G.createAction)("LICENSE_MANAGEMENT_TRIAL_STATUS_LOADED"),ne=Object(G.handleActions)({[te]:(e,{payload:t})=>({canStartTrial:t})},{}),se=Object(G.createAction)("LICENSE_MANAGEMENT_PERMISSIONS_LOADING"),ae=Object(G.createAction)("LICENSE_MANAGEMENT_PERMISSIONS_SUCCESS"),ie=Object(G.createAction)("LICENSE_MANAGEMENT_PERMISSIONS_ERROR"),re=Object(G.handleActions)({[se]:(e,{payload:t})=>({loading:t}),[ae]:(e,{payload:t})=>({hasPermission:t}),[ie]:(e,{payload:t})=>({error:t})},{});var oe=n(33),ce=n.n(oe);const le=Object(B.combineReducers)({license:$,uploadStatus:J,uploadErrorMessage:ee,trialStatus:ne,startBasicStatus:Q,permissions:re}),ue=e=>e.permissions.hasPermission,de=e=>e.permissions.loading,pe=e=>e.permissions.error,fe=e=>e.license,je=e=>fe(e).type,be=e=>fe(e).expiryDateInMillis,ge=e=>"basic"===je(e)?null:be(e)?ce.a.tz(be(e),ce.a.tz.guess()):null,me=e=>(new Date).getTime()>be(e),xe=e=>{const{type:t}=fe(e);return"trial"===t||(e=>{const t=new Date,n=ge(e);return n&&n.isAfter(t)&&n.diff(t,"days")<=25})(e)||me(e)},Oe=e=>!!e.uploadStatus.acknowledge,Me=e=>!!e.uploadStatus.applying,he=e=>e.uploadStatus.messages,ye=e=>!!e.uploadStatus.invalid,ve=e=>e.uploadErrorMessage,Ee=e=>{const t=je(e);return e.trialStatus.canStartTrial&&"trial"!==t&&("platinum"!==t&&"enterprise"!==t||me(e))},Te=e=>{if(e.trialStatus.canStartTrial)return!1;const{type:t}=fe(e);return"platinum"!==t&&"enterprise"!==t||me(e)},_e=e=>!!e.startBasicStatus.acknowledge,Se=e=>e.startBasicStatus.messages,Le=Object(Y.createSelector)(fe,(e=>{const t=ge(e);return t?t.format("LLL z"):null}),me,((e,t,n)=>{const{isActive:s,type:a}=e;return{type:Object(q.capitalize)(a),isExpired:n,expirationDate:t,status:s?U.i18n.translate("xpack.licenseMgmt.licenseDashboard.licenseStatus.activeLicenseStatusText",{defaultMessage:"active"}):U.i18n.translate("xpack.licenseMgmt.licenseDashboard.licenseStatus.inactiveLicenseStatusText",{defaultMessage:"inactive"})}})),ke=({appDependencies:e,children:t})=>{const{core:n,plugins:s,services:a,store:{initialLicense:i}}=e,{http:r,notifications:{toasts:o}}=n,l=((e={},t={})=>{const n=[Object(B.applyMiddleware)(R.a.withExtraArgument(t))];return window.__REDUX_DEVTOOLS_EXTENSION__&&n.push(window.__REDUX_DEVTOOLS_EXTENSION__()),Object(B.createStore)(le,e,Object(B.compose)(...n))})({license:i},{history:e.services.history,toasts:o,http:r,telemetry:s.telemetry,licensing:s.licensing,breadcrumbService:a.breadcrumbService});return Object(c.jsx)(I,n,Object(c.jsx)(u.Provider,{store:l},Object(c.jsx)(F,{value:e},t)))};var we=n(20),Ae=n(0),Ce=n.n(Ae),Ie=n(34);class telemetry_opt_in_TelemetryOptIn extends a.a.Component{constructor(...e){super(...e),Ce()(this,"state",{showMoreTelemetryInfo:!1,showExample:!1}),Ce()(this,"closeReadMorePopover",(()=>{this.setState({showMoreTelemetryInfo:!1})})),Ce()(this,"onClickReadMore",(()=>{const{showMoreTelemetryInfo:e}=this.state;this.setState({showMoreTelemetryInfo:!e})})),Ce()(this,"onClickExample",(()=>{this.setState({showExample:!0}),this.closeReadMorePopover()})),Ce()(this,"onChangeOptIn",(e=>{const t=e.target.checked,{onOptInChange:n}=this.props;n(t)}))}render(){const{showMoreTelemetryInfo:e,showExample:t}=this.state,{isStartTrial:n,isOptingInToTelemetry:i,telemetry:r}=this.props;let o,l=null;t&&(l=Object(c.jsx)(a.a.Suspense,{fallback:Object(c.jsx)(h.EuiLoadingSpinner,null)},Object(c.jsx)(Ie.LazyOptInExampleFlyout,{onClose:()=>this.setState({showExample:!1}),fetchExample:r.telemetryService.fetchExample}))),n||(o=Object(c.jsx)(s.Fragment,null,Object(c.jsx)(h.EuiSpacer,{size:"s"}),Object(c.jsx)(h.EuiTitle,{size:"s"},Object(c.jsx)("h4",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.customersHelpSupportDescription",defaultMessage:"Help Elastic support provide better service"}))),Object(c.jsx)(h.EuiSpacer,{size:"s"})));const u=Object(c.jsx)(h.EuiLink,{onClick:this.onClickReadMore},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.readMoreLinkText",defaultMessage:"Read more"})),d=Object(c.jsx)(h.EuiPopover,{ownFocus:!0,id:"readMorePopover",button:u,isOpen:e,closePopover:this.closeReadMorePopover,className:"eui-AlignBaseline"},Object(c.jsx)(h.EuiText,{className:"licManagement__narrowText"},Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.featureUsageWarningMessage",defaultMessage:"This feature periodically sends basic feature usage statistics. This information will not be shared outside of Elastic. See an {exampleLink} or read our {telemetryPrivacyStatementLink}. You can disable this feature any time.",values:{exampleLink:Object(c.jsx)(h.EuiLink,{onClick:this.onClickExample},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.exampleLinkText",defaultMessage:"example"})),telemetryPrivacyStatementLink:Object(c.jsx)(h.EuiLink,{href:r.telemetryConstants.getPrivacyStatementUrl(),target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.telemetryPrivacyStatementLinkText",defaultMessage:"telemetry privacy statement"}))}}))));return Object(c.jsx)(s.Fragment,null,l,o,Object(c.jsx)(h.EuiCheckbox,{label:Object(c.jsx)("span",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.telemetryOptIn.sendBasicFeatureStatisticsLabel",defaultMessage:"Send basic feature usage statistics to Elastic periodically. {popover}",values:{popover:d}})),id:"isOptingInToTelemetry",checked:i,onChange:this.onChangeOptIn}))}}function De(e){if(e){const{telemetryService:t}=e,n=t.getIsOptedIn();return t.getCanChangeOptInStatus()&&!n}return!1}class start_trial_StartTrial extends s.Component{constructor(...e){super(...e),Ce()(this,"cancelRef",void 0),Ce()(this,"confirmRef",void 0),Ce()(this,"state",{showConfirmation:!1,isOptingInToTelemetry:!1}),Ce()(this,"onOptInChange",(e=>{this.setState({isOptingInToTelemetry:e})})),Ce()(this,"onStartLicenseTrial",(()=>{const{telemetry:e,startLicenseTrial:t}=this.props;this.state.isOptingInToTelemetry&&e&&e.telemetryService.setOptIn(!0),t()})),Ce()(this,"cancel",(()=>{this.setState({showConfirmation:!1})}))}UNSAFE_componentWillMount(){this.props.loadTrialStatus()}acknowledgeModal(e){const{showConfirmation:t,isOptingInToTelemetry:n}=this.state,{telemetry:s}=this.props;return t?Object(c.jsx)(h.EuiModal,{className:"licManagement__modal",onClose:this.cancel},Object(c.jsx)(h.EuiModalHeader,null,Object(c.jsx)(h.EuiModalHeaderTitle,{"data-test-subj":"confirmModalTitleText"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalTitle",defaultMessage:"Start your free 30-day trial"}))),Object(c.jsx)(h.EuiModalBody,null,Object(c.jsx)(h.EuiText,{"data-test-subj":"confirmModalBodyText"},Object(c.jsx)("div",null,Object(c.jsx)(h.EuiText,null,Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription",defaultMessage:"This trial is for the full set of {subscriptionFeaturesLinkText} of the Elastic Stack. You'll get immediate access to:",values:{subscriptionFeaturesLinkText:Object(c.jsx)(h.EuiLink,{href:z.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.subscriptionFeaturesLinkText",defaultMessage:"subscription features"}))}})),Object(c.jsx)("ul",null,Object(c.jsx)("li",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.mashingLearningFeatureTitle",defaultMessage:"Machine learning"})),Object(c.jsx)("li",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.alertingFeatureTitle",defaultMessage:"Alerting"})),Object(c.jsx)("li",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.graphCapabilitiesFeatureTitle",defaultMessage:"Graph capabilities"})),Object(c.jsx)("li",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.dataBaseConnectivityFeatureTitle",defaultMessage:"{jdbcStandard} and {odbcStandard} connectivity for {sqlDataBase}",values:{jdbcStandard:"JDBC",odbcStandard:"ODBC",sqlDataBase:"SQL"}}))),Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.securityFeaturesConfigurationDescription",defaultMessage:"Advanced security features, such as authentication ({authenticationTypeList}), field- and document-level security, and auditing, require configuration. See the {securityDocumentationLinkText} for instructions.",values:{authenticationTypeList:"AD/LDAP, SAML, PKI, SAML/SSO",securityDocumentationLinkText:Object(c.jsx)(h.EuiLink,{href:e.security,target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.securityDocumentationLinkText",defaultMessage:"documentation"}))}})),Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.termsAndConditionsDescription",defaultMessage:"By starting this trial, you agree that it is subject to these {termsAndConditionsLinkText}.",values:{termsAndConditionsLinkText:Object(c.jsx)(h.EuiLink,{href:z.EXTERNAL_LINKS.TRIAL_LICENSE,target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModalDescription.termsAndConditionsLinkText",defaultMessage:"terms and conditions"}))}})))))),Object(c.jsx)(h.EuiModalFooter,null,Object(c.jsx)(h.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(c.jsx)(h.EuiFlexItem,{grow:!1},De(s)&&Object(c.jsx)(telemetry_opt_in_TelemetryOptIn,{telemetry:s,isStartTrial:!0,onOptInChange:this.onOptInChange,isOptingInToTelemetry:n})),Object(c.jsx)(h.EuiFlexItem,{grow:!1,className:"licManagement__ieFlex"},Object(c.jsx)(h.EuiFlexGroup,{responsive:!1},Object(c.jsx)(h.EuiFlexItem,{grow:!1,className:"licManagement__ieFlex"},Object(c.jsx)(h.EuiButtonEmpty,{"data-test-subj":"confirmModalCancelButton",onClick:this.cancel,buttonRef:this.cancelRef},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}))),Object(c.jsx)(h.EuiFlexItem,{grow:!1,className:"licManagement__ieFlex"},Object(c.jsx)(h.EuiButton,{"data-test-subj":"confirmModalConfirmButton",onClick:this.onStartLicenseTrial,fill:!0,buttonRef:this.confirmRef,color:"primary"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.confirmModal.startTrialButtonLabel",defaultMessage:"Start my trial"})))))))):null}render(){const{shouldShowStartTrial:e}=this.props;if(!e)return null;const t=Object(c.jsx)("span",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.subscriptionFeaturesExperienceDescription",defaultMessage:"Experience what machine learning, advanced security, and all our other {subscriptionFeaturesLinkText} have to offer.",values:{subscriptionFeaturesLinkText:Object(c.jsx)(h.EuiLink,{href:z.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.subscriptionFeaturesLinkText",defaultMessage:"subscription features"}))}})),n=Object(c.jsx)(h.EuiButton,{"data-test-subj":"startTrialButton",onClick:()=>this.setState({showConfirmation:!0})},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrial.startTrialButtonLabel",defaultMessage:"Start trial"}));return Object(c.jsx)(P,null,(e=>Object(c.jsx)(h.EuiFlexItem,null,this.acknowledgeModal(e.docLinks),Object(c.jsx)(h.EuiCard,{hasBorder:!0,title:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.startTrialTitle",defaultMessage:"Start a 30-day trial"}),description:t,footer:n}))))}}const Fe={loadTrialStatus:()=>async(e,t,{http:n})=>{const s=await function(e){return e.get(`${z.API_BASE_PATH}/start_trial`,{headers:{contentType:"application/json"},cache:"no-cache"})}(n);e(te(s))},startLicenseTrial:()=>async(e,t,{licensing:n,toasts:s,http:a})=>{const{trial_was_started:i,error_message:r}=await function(e){return e.post(`${z.API_BASE_PATH}/start_trial`,{headers:{contentType:"application/json"},cache:"no-cache"})}(a);if(!i)return s.addDanger(r);await n.refresh(),window.location.reload()}},Pe=Object(u.connect)((e=>({shouldShowStartTrial:Ee(e)})),Fe)(start_trial_StartTrial),Be=({license:e,...t})=>Object(c.jsx)(h.EuiPageHeader,j()({},t,{pageTitle:Object(c.jsx)("span",{"data-test-subj":"licenseText"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.activeLicenseStatusTitle",defaultMessage:"Your {licenseType} license is {status}",values:{licenseType:e.type,status:e.status}})),description:Object(c.jsx)("span",{"data-test-subj":"licenseSubText"},e.expirationDate?Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {licenseExpirationDate}",values:{licenseExpirationDate:Object(c.jsx)("strong",null,e.expirationDate)}}):Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."}))})),Ne=({license:e,...t})=>Object(c.jsx)(h.EuiPageHeader,j()({},t,{pageTitle:Object(c.jsx)("span",{"data-test-subj":"licenseText"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.expiredLicenseStatusTitle",defaultMessage:"Your {licenseType} license has expired",values:{licenseType:e.type}})),description:Object(c.jsx)("span",{"data-test-subj":"licenseSubText"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.licenseStatus.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {licenseExpirationDate}",values:{licenseExpirationDate:Object(c.jsx)("strong",null,e.expirationDate)}}))})),Re=()=>{const e=Object(u.useSelector)(Le);return Object(c.jsx)(a.a.Fragment,null,e.isExpired?Object(c.jsx)(Ne,{license:e,bottomBorder:!0,iconType:"warning",iconProps:{color:"danger"}}):Object(c.jsx)(Be,{license:e,bottomBorder:!0,iconType:"checkInCircleFilled",iconProps:{color:"success"}}),Object(c.jsx)(h.EuiSpacer,{size:"l"}))},Ue=({uploadPath:e="/upload_license"})=>{const{services:t}=(()=>{const e=Object(s.useContext)(D);if(!e)throw new Error('"useAppContext" can only be called inside of AppContext.Provider!');return e})();return Object(c.jsx)(h.EuiCard,{hasBorder:!0,title:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.addLicense.updateLicenseTitle",defaultMessage:"Update your license"}),description:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.addLicense.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:Object(c.jsx)(h.EuiButton,j()({"data-test-subj":"updateLicenseButton"},Object(p.reactRouterNavigate)(t.history,e)),Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.addLicense.updateLicenseButtonLabel",defaultMessage:"Update license"}))})};class revert_to_basic_RevertToBasic extends a.a.PureComponent{constructor(...e){super(...e),Ce()(this,"cancel",(()=>{this.props.uploadLicenseStatus({})}))}acknowledgeModal(){const{needsAcknowledgement:e,messages:[t,...n]=[],startBasicLicense:s,cancelStartBasicLicense:a,licenseType:i}=this.props;return e?Object(c.jsx)(h.EuiConfirmModal,{title:U.i18n.translate("xpack.licenseMgmt.licenseDashboard.revertToBasic.confirmModalTitle",{defaultMessage:"Confirm Revert to Basic License"}),onCancel:a,onConfirm:()=>s(i,!0),cancelButtonText:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.confirmModal.confirmButtonLabel",defaultMessage:"Confirm"})},Object(c.jsx)("div",null,Object(c.jsx)(h.EuiText,null,t),Object(c.jsx)(h.EuiText,null,Object(c.jsx)("ul",null,n.map((e=>Object(c.jsx)("li",{key:e},e))))))):null}render(){const{licenseType:e,shouldShowRevertToBasicLicense:t,startBasicLicense:n}=this.props;if(!t)return null;const s=Object(c.jsx)("span",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.revertToFreeFeaturesDescription",defaultMessage:"You’ll revert to our free features and lose access to machine learning, advanced security, and other {subscriptionFeaturesLinkText}.",values:{subscriptionFeaturesLinkText:Object(c.jsx)(h.EuiLink,{href:z.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.subscriptionFeaturesLinkText",defaultMessage:"subscription features"}))}}));return Object(c.jsx)(h.EuiFlexItem,null,this.acknowledgeModal(),Object(c.jsx)(h.EuiCard,{hasBorder:!0,title:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.acknowledgeModalTitle",defaultMessage:"Revert to Basic license"}),description:s,footer:Object(c.jsx)(h.EuiButton,{"data-test-subj":"revertToBasicButton",onClick:()=>n(e)},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.revertToBasic.acknowledgeModal.revertToBasicButtonLabel",defaultMessage:"Revert to Basic"}))}))}}const qe={startBasicLicense:(e,t)=>async(n,s,{licensing:a,toasts:i,http:r})=>{const{acknowledged:o,basic_was_started:c,error_message:l,acknowledge:u}=await function(e,t){return e.post(`${z.API_BASE_PATH}/start_basic`,{query:{acknowledge:t?"true":""},headers:{contentType:"application/json"},body:null,cache:"no-cache"})}(r,t);if(o){if(!c)return i.addDanger(l);await a.refresh(),window.location.reload()}else{const t=Object.values(u).slice(1).reduce(((e,t)=>(t.forEach((t=>{e.push(t)})),e)),[]),s=U.i18n.translate("xpack.licenseMgmt.replacingCurrentLicenseWithBasicLicenseWarningMessage",{defaultMessage:"Some functionality will be lost if you replace your {currentLicenseType} license with a BASIC license. Review the list of features below.",values:{currentLicenseType:e.toUpperCase()}});n(V({acknowledge:!0,messages:[s,...t]}))}},cancelStartBasicLicense:Z},Ye=Object(u.connect)((e=>({shouldShowRevertToBasicLicense:xe(e),licenseType:je(e),needsAcknowledgement:_e(e),messages:Se(e)})),qe)(revert_to_basic_RevertToBasic),Ge=Object(u.connect)((e=>({shouldShowRequestTrialExtension:Te(e)})))((({shouldShowRequestTrialExtension:e})=>{if(!e)return null;const t=Object(c.jsx)("span",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.howToContinueUsingPluginsDescription",defaultMessage:"If you’d like to continue using machine learning, advanced security, and our other awesome {subscriptionFeaturesLinkText}, request an extension now.",values:{subscriptionFeaturesLinkText:Object(c.jsx)(h.EuiLink,{href:z.EXTERNAL_LINKS.SUBSCRIPTIONS,target:"_blank"},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.subscriptionFeaturesLinkText",defaultMessage:"subscription features"}))}}));return Object(c.jsx)(h.EuiFlexItem,null,Object(c.jsx)(h.EuiCard,{hasBorder:!0,title:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.extendYourTrialTitle",defaultMessage:"Extend your trial"}),description:t,footer:Object(c.jsx)(h.EuiButton,{"data-test-subj":"extendTrialButton",target:"_blank",href:z.EXTERNAL_LINKS.TRIAL_EXTENSION},Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.licenseDashboard.requestTrialExtension.extendTrialButtonLabel",defaultMessage:"Extend trial"}))}))})),We=e=>(t,n,{breadcrumbService:s})=>{s.setBreadcrumbs(e)},$e={setBreadcrumb:We},ze=Object(u.connect)(null,$e)((({setBreadcrumb:e,telemetry:t}={setBreadcrumb:()=>{}})=>(Object(s.useEffect)((()=>{e("dashboard")})),Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(Re,null),Object(c.jsx)(h.EuiPageSection,null,Object(c.jsx)(h.EuiFlexGroup,{justifyContent:"spaceAround"},Object(c.jsx)(h.EuiFlexItem,null,Object(c.jsx)(Ue,null)),Object(c.jsx)(Pe,{telemetry:t}),Object(c.jsx)(Ge,null),Object(c.jsx)(Ye,null)))))));class upload_license_UploadLicense extends a.a.PureComponent{constructor(...e){super(...e),Ce()(this,"state",{isOptingInToTelemetry:!1}),Ce()(this,"onOptInChange",(e=>{this.setState({isOptingInToTelemetry:e})})),Ce()(this,"send",(e=>{const t=this.file,n=new FileReader;n.onload=({target:{result:t}})=>{var n;this.state.isOptingInToTelemetry&&(null===(n=this.props.telemetry)||void 0===n||n.telemetryService.setOptIn(!0)),this.props.uploadLicense(t,this.props.currentLicenseType,e)},n.readAsText(t)})),Ce()(this,"cancel",(()=>{this.props.uploadLicenseStatus({})})),Ce()(this,"handleFile",(([e])=>{e&&this.props.addUploadErrorMessage(""),this.file=e})),Ce()(this,"submit",(e=>{e.preventDefault(),this.file?this.send():this.props.addUploadErrorMessage(Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.licenseFileNotSelectedErrorMessage",defaultMessage:"You must select a license file."}))}))}componentDidMount(){this.props.setBreadcrumb("upload"),this.props.addUploadErrorMessage("")}acknowledgeModal(){const{needsAcknowledgement:e,messages:[t,...n]=[]}=this.props;return e?Object(c.jsx)(h.EuiConfirmModal,{title:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.confirmModalTitle",defaultMessage:"Confirm License Upload"}),onCancel:this.cancel,onConfirm:()=>this.send(!0),cancelButtonText:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.confirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.confirmModal.confirmButtonLabel",defaultMessage:"Confirm"})},Object(c.jsx)("div",null,Object(c.jsx)(h.EuiText,null,t),Object(c.jsx)(h.EuiText,null,Object(c.jsx)("ul",null,n.map((e=>Object(c.jsx)("li",{key:e},e))))))):null}errorMessage(){const{errorMessage:e}=this.props;return e?[e]:null}render(){const{currentLicenseType:e,applying:t,telemetry:n,history:s}=this.props;return Object(c.jsx)(h.EuiPageSection,{alignment:"center",grow:!0},Object(c.jsx)(h.EuiPanel,{color:"subdued",paddingSize:"l"},Object(c.jsx)(h.EuiTitle,{size:"m"},Object(c.jsx)("h1",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.uploadLicenseTitle",defaultMessage:"Upload your license"}))),Object(c.jsx)(h.EuiSpacer,null),this.acknowledgeModal(),Object(c.jsx)(h.EuiText,null,Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.licenseKeyTypeDescription",defaultMessage:"Your license key is a JSON file with a signature attached."})),Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.replacingCurrentLicenseWarningMessage",defaultMessage:"Uploading a license will replace your current {currentLicenseType} license.",values:{currentLicenseType:Object(c.jsx)("strong",null,e.toUpperCase())}}))),Object(c.jsx)(h.EuiSpacer,null),Object(c.jsx)(h.EuiForm,{isInvalid:!!this.errorMessage(),error:this.errorMessage()},Object(c.jsx)(h.EuiFilePicker,{fullWidth:!0,id:"licenseFile",initialPromptText:Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.selectLicenseFileDescription",defaultMessage:"Select or drag your license file"}),onChange:this.handleFile}),Object(c.jsx)(h.EuiSpacer,{size:"m"}),De(n)&&Object(c.jsx)(telemetry_opt_in_TelemetryOptIn,{isOptingInToTelemetry:this.state.isOptingInToTelemetry,onOptInChange:this.onOptInChange,telemetry:n}),Object(c.jsx)(h.EuiSpacer,{size:"m"}),Object(c.jsx)(h.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(c.jsx)(h.EuiFlexItem,{grow:!1},Object(c.jsx)(h.EuiButtonEmpty,j()({"data-test-subj":"cancelUploadButton"},Object(p.reactRouterNavigate)(s,"/home")),Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.cancelButtonLabel",defaultMessage:"Cancel"}))),Object(c.jsx)(h.EuiFlexItem,{grow:!1},Object(c.jsx)(h.EuiButton,{"data-test-subj":"uploadLicenseButton",fill:!0,isLoading:t,onClick:this.submit},t?Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.uploadingButtonLabel",defaultMessage:"Uploading…"}):Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.uploadLicense.uploadButtonLabel",defaultMessage:"Upload"})))))))}}const Ke={addUploadErrorMessage:K,uploadLicense:(e,t,n)=>async(s,a,i)=>{s(H({applying:!0}));let r=null;try{({type:r}=JSON.parse(e).license)}catch(e){return s(H({})),s(K(U.i18n.translate("xpack.licenseMgmt.uploadLicense.checkLicenseFileErrorMessage",{defaultMessage:"{genericUploadError} Check your license file.",values:{genericUploadError:X}})))}try{const a=await function(e,t,n){return e.put(z.API_BASE_PATH,{query:{acknowledge:n?"true":""},body:t,headers:{contentType:"application/json"},cache:"no-cache"})}(i.http,e,n);await(async(e,t,n,s,{history:a,licensing:i})=>{const{error:r,acknowledged:o,license_status:c,acknowledge:l}=e;if(r)t(H({})),t(K(`${X} ${r.reason}`));else if(o)if("invalid"===c)t(H({})),t(K(U.i18n.translate("xpack.licenseMgmt.uploadLicense.invalidLicenseErrorMessage",{defaultMessage:"The supplied license is not valid for this product."})));else if("expired"===c)t(H({})),t(K(U.i18n.translate("xpack.licenseMgmt.uploadLicense.expiredLicenseErrorMessage",{defaultMessage:"The supplied license has expired."})));else{const e=await i.refresh();t(W(e)),t(H({})),a.replace("/home"),window.location.reload()}else{const e=Object.values(l).slice(1),a=U.i18n.translate("xpack.licenseMgmt.uploadLicense.problemWithUploadedLicenseDescription",{defaultMessage:"Some functionality will be lost if you replace your {currentLicenseType} license with a {newLicenseType} license. Review the list of features below.",values:{currentLicenseType:n.toUpperCase(),newLicenseType:s.toUpperCase()}});t(H({acknowledge:!0,messages:[a,...e]}))}})(a,s,t,r,i)}catch(e){const t=e.responseJSON&&e.responseJSON.error.reason?e.responseJSON.error.reason:U.i18n.translate("xpack.licenseMgmt.uploadLicense.unknownErrorErrorMessage",{defaultMessage:"Unknown error."});s(H({})),s(K(`${X} ${t}`))}},uploadLicenseStatus:H,setBreadcrumb:We},He=Object(u.connect)((e=>({isInvalid:ye(e),needsAcknowledgement:Oe(e),messages:he(e),errorMessage:ve(e),applying:Me(e),currentLicenseType:je(e)||""})),Ke)(upload_license_UploadLicense),Xe={services:{}},Je=Object(s.createContext)(Xe);var Ve=n(77),Ze=n.n(Ve);const Qe=({children:e,component:t,render:n,...i})=>{const o=Object(s.useMemo)((()=>{if(t)return e=>Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(et,null),Object(c.jsx)(t,e))}),[t]);if(o)return Object(c.jsx)(r.Route,j()({},i,{component:o}));if(n||"function"==typeof e){const t="function"==typeof e?e:n;return Object(c.jsx)(r.Route,j()({},i,{render:e=>Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(et,null),t(e))}))}return Object(c.jsx)(r.Route,i,Object(c.jsx)(et,null),e)},et=()=>{const{executionContext:e}=Object(s.useContext)(Je).services,t=Object(r.useRouteMatch)();return function(e,t){Ze()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},tt=({legacySwitch:e=!0,children:t})=>{const n=Object(r.useRouteMatch)();return e?Object(c.jsx)(r.Switch,null,t):Object(c.jsx)(o.Routes,null,s.Children.map(t,(e=>{if(a.a.isValidElement(e)&&e.type===Qe){var s;const i=Object(q.replace)(null==e?void 0:e.props.path,n.url+"/",""),r="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(c.jsx)(o.Route,{path:i,element:Object(c.jsx)(a.a.Fragment,null,Object(c.jsx)(et,null),(null==e||null===(s=e.props)||void 0===s?void 0:s.component)&&Object(c.jsx)(e.props.component,null)||r&&r()||t)})}return e})))};var nt=n(3);const st={loadPermissions:()=>async(e,t,{http:n})=>{e(se(!0));try{const t=await function(e){return e.post(`${z.API_BASE_PATH}/permissions`,{headers:{contentType:"application/json"},cache:"no-cache"})}(n);e(se(!1)),e(ae(t.hasPermission))}catch(t){e(se(!1)),e(ie(t))}}},at=Object(r.withRouter)(Object(u.connect)((e=>({hasPermission:ue(e),permissionsLoading:de(e),permissionsError:pe(e)})),st)((({hasPermission:e,permissionsLoading:t,permissionsError:n,telemetry:a,loadPermissions:i,executionContext:r})=>{if(Object(p.useExecutionContext)(r,{type:"application",page:"licenseManagement"}),Object(s.useEffect)((()=>{i()}),[i]),t)return Object(c.jsx)(h.EuiPageSection,{alignment:"center",grow:!0},Object(c.jsx)(d.SectionLoading,null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.app.loadingPermissionsDescription",defaultMessage:"Checking permissions…"})));if(n){var o;const e=null==n||null===(o=n.data)||void 0===o?void 0:o.message;return Object(c.jsx)(h.EuiPageSection,{alignment:"center",grow:!0},Object(c.jsx)(h.EuiEmptyPrompt,{color:"danger",iconType:"warning",title:Object(c.jsx)("h1",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.app.checkingPermissionsErrorMessage",defaultMessage:"Error checking permissions"})),body:e?Object(c.jsx)("p",null,e):null}))}if(!e)return Object(c.jsx)(h.EuiPageSection,{alignment:"center",grow:!0},Object(c.jsx)(h.EuiEmptyPrompt,{color:"subdued",iconType:"securityApp",title:Object(c.jsx)("h1",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.app.deniedPermissionTitle",defaultMessage:"Cluster privileges required"})),body:Object(c.jsx)("p",null,Object(c.jsx)(we.FormattedMessage,{id:"xpack.licenseMgmt.app.deniedPermissionDescription",defaultMessage:"To use License Management, you must have {permissionType} privileges.",values:{permissionType:Object(c.jsx)("strong",null,z.APP_PERMISSION)}}))}));const l=e=>t=>Object(c.jsx)(e,j()({},t,{telemetry:a}));return Object(c.jsx)(h.EuiPageBody,null,Object(c.jsx)(tt,null,Object(c.jsx)(Qe,{path:`/${nt.b}`,component:l(He)}),Object(c.jsx)(Qe,{path:["/"],component:l(ze)})))}))),it=e=>Object(c.jsx)(l,{history:e.history},Object(c.jsx)(at,e)),rt=(e,t)=>(Object(i.render)(Object(c.jsx)(ke,{appDependencies:t},Object(c.jsx)(it,{telemetry:t.plugins.telemetry,history:t.services.history,executionContext:t.core.executionContext})),e),()=>{Object(i.unmountComponentAtNode)(e)})}])]);