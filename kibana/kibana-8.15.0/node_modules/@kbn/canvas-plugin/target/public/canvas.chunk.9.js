/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.canvas_bundle_jsonpfunction=window.canvas_bundle_jsonpfunction||[]).push([[9],Array(78).concat([function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"c",(function(){return i}));var n=a(19);function s(e){return Object(n.get)(e,"transient.canUserWrite",!0)}function o(e){return Object(n.get)(e,"transient.fullscreen",!1)}function r(e){return Object(n.get)(e,"transient.zoomScale",1)}function i(e){return e.app.serverFunctions}},,,,,,function(e,t,a){"use strict";var n=Array.isArray,s=Object.keys,o=Object.prototype.hasOwnProperty,r="undefined"!=typeof Element;function i(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var a,l,c,u=n(e),d=n(t);if(u&&d){if((l=e.length)!=t.length)return!1;for(a=l;0!=a--;)if(!i(e[a],t[a]))return!1;return!0}if(u!=d)return!1;var p=e instanceof Date,b=t instanceof Date;if(p!=b)return!1;if(p&&b)return e.getTime()==t.getTime();var g=e instanceof RegExp,m=t instanceof RegExp;if(g!=m)return!1;if(g&&m)return e.toString()==t.toString();var h=s(e);if((l=h.length)!==s(t).length)return!1;for(a=l;0!=a--;)if(!o.call(t,h[a]))return!1;if(r&&e instanceof Element&&t instanceof Element)return e===t;for(a=l;0!=a--;)if(!("_owner"===(c=h[a])&&e.$$typeof||i(e[c],t[c])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return i(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},,,function(e,t,a){"use strict";var n,s=function(){var e={};return function(t){if(void 0===e[t]){var a=document.querySelector(t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}e[t]=a}return e[t]}}(),o=[];function r(e){for(var t=-1,a=0;a<o.length;a++)if(o[a].identifier===e){t=a;break}return t}function i(e,t){for(var a={},n=[],s=0;s<e.length;s++){var i=e[s],l=t.base?i[0]+t.base:i[0],c=a[l]||0,u="".concat(l," ").concat(c);a[l]=c+1;var d=r(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:u,updater:m(p,t),references:1}),n.push(u)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=a.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=s(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,a,n){var s=a?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,s);else{var o=document.createTextNode(s),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(o,r[t]):e.appendChild(o)}}function p(e,t,a){var n=a.css,s=a.media,o=a.sourceMap;if(s?e.setAttribute("media",s):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var b=null,g=0;function m(e,t){var a,n,s;if(t.singleton){var o=g++;a=b||(b=l(t)),n=d.bind(null,a,o,!1),s=d.bind(null,a,o,!0)}else a=l(t),n=p.bind(null,a,t),s=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(a)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else s()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var a=i(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<a.length;n++){var s=r(a[n]);o[s].references--}for(var l=i(e,t),c=0;c<a.length;c++){var u=r(a[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}a=l}}}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a=function(e,t){var a,n,s,o=e[1]||"",r=e[3];if(!r)return o;if(t&&"function"==typeof btoa){var i=(a=r,n=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),"/*# ".concat(s," */")),l=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[o].concat(l).concat([i]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(a,"}"):a})).join("")},t.i=function(e,a,n){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(n)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(s[r]=!0)}for(var i=0;i<e.length;i++){var l=[].concat(e[i]);n&&s[l[0]]||(a&&(l[2]?l[2]="".concat(a," and ").concat(l[2]):l[2]=a),t.push(l))}},t}},,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16);t.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return g})),a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return O})),a.d(t,"b",(function(){return k}));var n=a(16),s=a(21),o=a(1),r=a(66),i=a(82);const l=()=>{const e=Object(r.useWorkpadService)(),t=Object(r.useNotifyService)(),a=Object(s.useHistory)();return Object(n.useCallback)((async n=>{try{let t=await e.get(n);t={...t,name:c.getClonedWorkpadName(t.name),id:Object(i.a)("workpad")},await e.create(t),a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:u.getCloneFailureErrorMessage()})}}),[t,e,a])},c={getClonedWorkpadName:e=>o.i18n.translate("xpack.canvas.useCloneWorkpad.clonedWorkpadName",{defaultMessage:"Copy of {workpadName}",values:{workpadName:e},description:'This suffix is added to the end of the name of a cloned workpad to indicate that this new workpad is a copy of the original workpad. Example: "Copy of Sales Pitch"'})},u={getCloneFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useCloneWorkpad.cloneFailureErrorMessage",{defaultMessage:"Couldn't clone workpad"})};var d=a(100);const p=()=>{const e=Object(r.useWorkpadService)(),t=Object(r.useNotifyService)(),a=Object(s.useHistory)();return Object(n.useCallback)((async n=>{const s=n||Object(d.e)();try{await e.create(s),a.push(`/workpad/${s.id}/page/1`)}catch(e){t.error(e,{title:b.getCreateFailureErrorMessage()})}}),[t,a,e])},b={getCreateFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useCreateWorkpad.createFailureErrorMessage",{defaultMessage:"Couldn't create workpad"})},g=()=>{const e=Object(r.useWorkpadService)(),t=Object(r.useNotifyService)();return Object(n.useCallback)((async a=>{const n=a.map((async t=>{try{return await e.remove(t),{id:t,err:null}}catch(e){return{id:t,err:e}}}));return Promise.all(n).then((e=>{const[n,s]=e.reduce((([e,t],a)=>(a.err?t.push(a.id):e.push(a.id),[e,t])),[[],[]]),o=a.filter((e=>n.includes(e)));return s.length>0&&t.error(m.getDeleteFailureErrorMessage()),{removedIds:o,errored:s}}))}),[e,t])},m={getDeleteFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useDeleteWorkpads.deleteFailureErrorMessage",{defaultMessage:"Couldn't delete all workpads"})},h=()=>{const e=Object(r.useWorkpadService)();return Object(n.useCallback)((async()=>await e.findTemplates()),[e])},f=()=>{const e=Object(r.useWorkpadService)(),t=Object(r.useNotifyService)();return Object(n.useCallback)((async(a="")=>{try{return await e.find(a)}catch(e){t.error(e,{title:v.getFindFailureErrorMessage()})}}),[t,e])},v={getFindFailureErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useFindWorkpads.findFailureErrorMessage",{defaultMessage:"Couldn't find workpad"})};var x=a(19),j=a(65);const y=()=>o.i18n.translate("xpack.canvas.error.useUploadWorkpad.uploadFailureErrorMessage",{defaultMessage:"Couldn't upload workpad"}),O=()=>{const e=Object(r.useNotifyService)(),t=(()=>{const e=Object(r.useWorkpadService)(),t=Object(r.useNotifyService)(),a=Object(s.useHistory)();return Object(n.useCallback)((async n=>{try{const t=await e.import(n);a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:y()})}}),[t,a,e])})();return Object(n.useCallback)(((a,n=(()=>{}))=>{if(!a)return void n();"application/json"!==Object(x.get)(a,"type")&&(e.warning(w.getAcceptJSONOnlyErrorMessage(),{title:a.name?w.getFileUploadFailureWithFileNameErrorMessage(a.name):w.getFileUploadFailureWithoutFileNameErrorMessage()}),n());const s=new FileReader;s.onload=async()=>{try{const e=JSON.parse(s.result);if(e.id=Object(i.a)("workpad"),(e=>!Array.isArray(e.pages)||0===e.pages.length||!e.assets)(e))throw n(),new Error(w.getMissingPropertiesErrorMessage());await t(e),n(e)}catch(t){e.error(t,{title:a.name?w.getFileUploadFailureWithFileNameErrorMessage(a.name):w.getFileUploadFailureWithoutFileNameErrorMessage()}),n()}},s.readAsText(a)}),[e,t])},w={getFileUploadFailureWithoutFileNameErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useImportWorkpad.fileUploadFailureWithoutFileNameErrorMessage",{defaultMessage:"Couldn't upload file"}),getFileUploadFailureWithFileNameErrorMessage:e=>o.i18n.translate("xpack.canvas.errors.useImportWorkpad.fileUploadFileWithFileNameErrorMessage",{defaultMessage:"Couldn't upload ''{fileName}''",values:{fileName:e}}),getMissingPropertiesErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useImportWorkpad.missingPropertiesErrorMessage",{defaultMessage:"Some properties required for a {CANVAS} workpad are missing.  Edit your {JSON} file to provide the correct property values, and try again.",values:{CANVAS:j.c,JSON:j.r}}),getAcceptJSONOnlyErrorMessage:()=>o.i18n.translate("xpack.canvas.error.useImportWorkpad.acceptJSONOnlyErrorMessage",{defaultMessage:"Only {JSON} files are accepted",values:{JSON:j.r}})},k=()=>{const e=Object(r.useWorkpadService)(),t=Object(r.useNotifyService)(),a=Object(s.useHistory)();return Object(n.useCallback)((async n=>{try{const t=await e.createFromTemplate(n.id);a.push(`/workpad/${t.id}/page/1`)}catch(e){t.error(e,{title:"Couldn't create workpad from template"})}}),[e,t,a])}},,,,,function(e,t,a){"use strict";e.exports={ShortcutManager:a(298),Shortcuts:a(304)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16);t.default=function(e){n.useEffect(e,[])}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return O}));var n=a(16),s=a(153),o=a.n(s),r=a(1),i=a(66);const l=()=>{const e=Object(i.useNotifyService)(),t=Object(i.useWorkpadService)(),a=u();return Object(n.useCallback)((async n=>{try{const e=await t.get(n);a(e,`canvas-workpad-${e.name}-${e.id}`)}catch(t){e.error(t,{title:r.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadFailureErrorMessage",{defaultMessage:"Couldn't download workpad"})})}}),[t,e,a])},c=()=>{const e=Object(i.useNotifyService)(),t=u();return Object(n.useCallback)((async a=>{try{t(a,`canvas-embed-workpad-${a.name}-${a.id}`)}catch(t){e.error(t,{title:r.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadRenderedWorkpadFailureErrorMessage",{defaultMessage:"Couldn't download rendered workpad"})})}}),[e,t])},u=()=>Object(n.useCallback)(((e,t)=>{const a=new Blob([JSON.stringify(e)],{type:"application/json"});o.a.saveAs(a,`${t}.json`)}),[]);var d=a(20),p=a(68),b=a(63),g=a(86),m=a(137),h=a(70),f=a(83),v=a(149),x=a(99),j=a(113);const{actionsElements:y}=b.f,O=e=>{const t=Object(i.useEmbeddablesService)(),a=Object(i.useLabsService)(),s=Object(d.useDispatch)(),o=Object(i.useNotifyService)(),r=a.isProjectEnabled("labs:canvas:byValueEmbeddable"),l=t.getStateTransfer().getIncomingEmbeddablePackage(g.CANVAS_APP,!0);Object(n.useEffect)((()=>{if(r&&l){const{embeddableId:t,input:a,type:n}=l,r=e.elements.find((({id:e})=>e===t));if(r){const e=Object(p.d)(r.expression),i=e.chain.findIndex((({function:e})=>["embeddable","savedVisualization"].includes(e)));if(-1===i)return void s(Object(h.e)());if("savedVisualization"===e.chain[i].function)return o.error(y.getConvertToLensUnsupportedSavedVisualization()),void s(Object(h.e)());const l=Object(m.a)(e.chain[i].arguments.config[0]),c=e.chain[i].arguments.type[0],u=[t,"expressionRenderable"];let d;s(Object(x.a)({path:u})),d=c!==n?a:{...l,...a};const b=Object(j.a)(d,n,void 0,!0);s(Object(v.c)({elementId:r.id,embeddableExpression:b})),s(Object(v.b)(r.id)),s(Object(f.a)([t]))}else{const t=Object(j.a)(a,n,void 0,!0);s(Object(h.b)(e.id,{expression:t}))}}}),[s,o,e,l,r])}},,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a(16);var n=a(18),s=a(119),o=a(17);const r=({animated:e=!1,text:t="",backgroundColor:a="#000000"})=>{if(e)return Object(o.jsx)("div",{className:"canvasLoading"},t&&Object(o.jsx)("span",null,t," "),Object(o.jsx)(n.EuiLoadingSpinner,{size:"m"}));const r=Object(s.a)(a);let i="text";return r&&Object(n.isColorDark)(r[0],r[1],r[2])&&(i="ghost"),Object(o.jsx)("div",{className:"canvasLoading"},t&&Object(o.jsx)("span",null,t," "),Object(o.jsx)(n.EuiIcon,{color:i,type:"clock"}))};r.defaultProps={animated:!1,backgroundColor:"#000000",text:""}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(68),s=a(2),o=a.n(s);class tag_Tag{constructor(e){o()(this,"name",void 0),o()(this,"color",void 0),this.name=e.name,this.color=e.color}}class tags_registry_TagRegistry extends n.a{wrapper(e){return new tag_Tag(e)}}const r=new tags_registry_TagRegistry},function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return d}));var n=a(16),s=a(18),o=a(21),r=a(17);const i=e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey),l=e=>0===e.button,c=e=>{const t=e.target.getAttribute("target");return t&&"_self"!==t},u=({to:e,...t})=>{const a=Object(o.useHistory)(),u=Object(n.useCallback)((t=>{t.defaultPrevented||i(t)||!l(t)||c(t)||(t.preventDefault(),a.push(e))}),[a,e]),d={...t,href:a.createHref({pathname:e}),onClick:u};return Object(r.jsx)(s.EuiLink,d)},d=({to:e,...t})=>{const a=Object(o.useHistory)(),u=Object(n.useCallback)((t=>{t.defaultPrevented||i(t)||!l(t)||c(t)||(t.preventDefault(),a.push(e))}),[a,e]),d={...t,href:a.createHref({pathname:e}),onClick:u};return Object(r.jsx)(s.EuiButtonIcon,d)}},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";e.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));const n=a(212).a},function(e,t,a){var n,s=s||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,a=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in n,o=/constructor/i.test(e.HTMLElement)||e.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},l=function(e){setTimeout((function(){"string"==typeof e?a().revokeObjectURL(e):e.remove()}),4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(t,u,d){d||(t=c(t));var p,b=this,g="application/octet-stream"===t.type,m=function(){!function(e,t,a){for(var n=(t=[].concat(t)).length;n--;){var s=e["on"+t[n]];if("function"==typeof s)try{s.call(e,e)}catch(e){i(e)}}}(b,"writestart progress write writeend".split(" "))};if(b.readyState=b.INIT,s)return p=a().createObjectURL(t),void setTimeout((function(){var e,t;n.href=p,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),m(),l(p),b.readyState=b.DONE}));!function(){if((r||g&&o)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=r?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,b.readyState=b.DONE,m()},n.readAsDataURL(t),void(b.readyState=b.INIT)}p||(p=a().createObjectURL(t)),g?e.location.href=p:e.open(p,"_blank")||(e.location.href=p),b.readyState=b.DONE,m(),l(p)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,a){return t=t||e.name||"download",a||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(e,t,a){return new u(e,t||e.name||"download",a)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */e.exports?e.exports.saveAs=s:null!==a(372)&&null!==a(373)&&(void 0===(n=function(){return s}.call(t,a,t,e))||(e.exports=n))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=(n=a(302))&&n.__esModule?n:{default:n};t.default={getPlatformName:function(){var e=s.default.os.family||"";return e=e.toLowerCase().replace(/ /g,""),/\bwin/.test(e)?"windows":/darwin|osx/.test(e)?"osx":/linux|freebsd|sunos|ubuntu|debian|fedora|redhat|suse/.test(e)?"linux":"other"},getCharacter:function(e){return null==e.which?String.fromCharCode(e.keyCode):0!==e.which&&0!==e.charCode?String.fromCharCode(e.which):null}},e.exports=t.default},function(e,t){function a(e,t,a,n){return!e.addEventListener&&(t="on"+t),(e.addEventListener||e.attachEvent).call(e,t,a,n),a}e.exports=a,e.exports.on=a,e.exports.off=function(e,t,a,n){return!e.removeEventListener&&(t="on"+t),(e.removeEventListener||e.detachEvent).call(e,t,a,n),a}},function(e,t,a){"use strict";e.exports=function(e){var t,n;if(t=a(206),n=a(316),"keypress"===e.type){var s=String.fromCharCode(e.which);return e.shiftKey||(s=s.toLowerCase()),s}return void 0!==t[e.which]?t[e.which]:void 0!==n[e.which]?n[e.which]:String.fromCharCode(e.which).toLowerCase()}},function(e,t,a){"use strict";e.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",173:"minus",187:"plus",189:"minus",224:"meta"};for(var n=1;n<20;++n)e.exports[111+n]="f"+n;for(n=0;n<=9;++n)e.exports[n+96]=n},function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,a){e.exports=a.p+"1cbd62546f764080f7071e03889e9de3.svg"},function(e,t,a){"use strict";e.exports=a(348)},function(e,t,a){"use strict";e.exports=a(355)},function(e,t,a){"use strict";var n=a(371),s={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,o,r,i,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(r=n(),i=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=s[t.format]||s.default;window.clipboardData.setData(o,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),i.selectNodeContents(c),l.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),o=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(i):l.removeAllRanges()),c&&document.body.removeChild(c),r()}return u}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(64),s=a.n(n),o=a(18),r=(a(16),a(17));const i=e=>{const{isOpen:t,title:a,message:n,onConfirm:i,onCancel:l,confirmButtonText:c,cancelButtonText:u,className:d,...p}=e;return t?Object(r.jsx)(o.EuiConfirmModal,s()({},p,{className:`canvasConfirmModal ${d||""}`,title:a,onCancel:l,onConfirm:i,confirmButtonText:c,cancelButtonText:u,defaultFocusedButton:"confirm",buttonColor:"danger","data-test-subj":"canvasConfirmModal"}),n):null};i.defaultProps={title:"Confirm",confirmButtonText:"Confirm",cancelButtonText:"Cancel"}},,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(73),s=a(128),o=a(16),r=a(82),i=a(64),l=a.n(i),c=a(18),u=a(17);const d=({name:e,color:t="#666666",type:a="health",...n})=>{switch(a){case"health":return Object(u.jsx)(c.EuiHealth,l()({color:t},n),e);case"badge":return Object(u.jsx)(c.EuiBadge,l()({color:t},n),e)}},p=Object(n.compose)(Object(n.withProps)((()=>({getTag:e=>s.a.get(e)||{name:e,color:void 0}}))))((({tags:e=[],tagType:t="health",getTag:a})=>Object(u.jsx)(o.Fragment,null,e.length?e.map((e=>{const{color:n,name:s}=a(e),o=Object(r.a)("tag");return Object(u.jsx)(d,{key:o,color:n,name:s,type:t})})):null)))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){!function(e){e.color={},e.color.make=function(t,a,n,s){var o={};return o.r=t||0,o.g=a||0,o.b=n||0,o.a=null!=s?s:1,o.add=function(e,t){for(var a=0;a<e.length;++a)o[e.charAt(a)]+=t;return o.normalize()},o.scale=function(e,t){for(var a=0;a<e.length;++a)o[e.charAt(a)]*=t;return o.normalize()},o.toString=function(){return o.a>=1?"rgb("+[o.r,o.g,o.b].join(",")+")":"rgba("+[o.r,o.g,o.b,o.a].join(",")+")"},o.normalize=function(){function e(e,t,a){return t<e?e:t>a?a:t}return o.r=e(0,parseInt(o.r),255),o.g=e(0,parseInt(o.g),255),o.b=e(0,parseInt(o.b),255),o.a=e(0,o.a,1),o},o.clone=function(){return e.color.make(o.r,o.b,o.g,o.a)},o.normalize()},e.color.extract=function(t,a){var n;do{if(""!=(n=t.css(a).toLowerCase())&&"transparent"!=n)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),e.color.parse(n)},e.color.parse=function(a){var n,s=e.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return s(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return s(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return s(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return s(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return s(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return s(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var o=e.trim(a).toLowerCase();return"transparent"==o?s(255,255,255,0):s((n=t[o]||[0,0,0])[0],n[1],n[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function a(t,a){var n=a.children("."+t)[0];if(null==n&&((n=document.createElement("canvas")).className=t,e(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(a),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var s=this.context=n.getContext("2d"),o=window.devicePixelRatio||1,r=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1;this.pixelRatio=o/r,this.resize(a.width(),a.height()),this.textContainer=null,this.text={},this._textCache={}}function n(t,n,s,o){var r=[],i={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,u=null,d=null,p=null,b=[],g=[],m={left:0,right:0,top:0,bottom:0},h=0,f=0,v={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},x=this;function j(e,t){t=[x].concat(t);for(var a=0;a<e.length;++a)e[a].apply(this,t)}function y(t){r=function(t){for(var a=[],n=0;n<t.length;++n){var s=e.extend(!0,{},i.series);null!=t[n].data?(s.data=t[n].data,delete t[n].data,e.extend(!0,s,t[n]),t[n].data=s.data):s.data=t[n],a.push(s)}return a}(t),function(){var t,a=r.length,n=-1;for(t=0;t<r.length;++t){var s=r[t].color;null!=s&&(a--,"number"==typeof s&&s>n&&(n=s))}a<=n&&(a=n+1);var o,l=[],c=i.colors,u=c.length,d=0;for(t=0;t<a;t++)o=e.color.parse(c[t%u]||"#666"),t%u==0&&t&&(d=d>=0?d<.5?-d-.2:0:-d),l[t]=o.scale("rgb",1+d);var p,m=0;for(t=0;t<r.length;++t){if(null==(p=r[t]).color?(p.color=l[m].toString(),++m):"number"==typeof p.color&&(p.color=l[p.color].toString()),null==p.lines.show){var h,f=!0;for(h in p)if(p[h]&&p[h].show){f=!1;break}f&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=_(b,O(p,"x")),p.yaxis=_(g,O(p,"y"))}}(),function(){var t,a,n,s,o,i,l,c,u,d,p,b,g=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,h=Number.MAX_VALUE;function f(e,t,a){t<e.datamin&&t!=-h&&(e.datamin=t),a>e.datamax&&a!=h&&(e.datamax=a)}for(e.each(w(),(function(e,t){t.datamin=g,t.datamax=m,t.used=!1})),t=0;t<r.length;++t)(o=r[t]).datapoints={points:[]},j(v.processRawData,[o,o.data,o.datapoints]);for(t=0;t<r.length;++t){if(p=(o=r[t]).data,!(b=o.datapoints.format)){if((b=[]).push({x:!0,number:!0,required:!0}),b.push({y:!0,number:!0,required:!0}),o.bars.show||o.lines.show&&o.lines.fill){var x=!!(o.bars.show&&o.bars.zero||o.lines.show&&o.lines.zero);b.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:x}),o.bars.horizontal&&(delete b[b.length-1].y,b[b.length-1].x=!0)}o.datapoints.format=b}if(null==o.datapoints.pointsize){o.datapoints.pointsize=b.length,l=o.datapoints.pointsize,i=o.datapoints.points;var y=o.lines.show&&o.lines.steps;for(o.xaxis.used=o.yaxis.used=!0,a=n=0;a<p.length;++a,n+=l){var O=null==(d=p[a]);if(!O)for(s=0;s<l;++s)c=d[s],(u=b[s])&&(u.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=h:c==-1/0&&(c=-h)),null==c&&(u.required&&(O=!0),null!=u.defaultValue&&(c=u.defaultValue))),i[n+s]=c;if(O)for(s=0;s<l;++s)null!=(c=i[n+s])&&!1!==(u=b[s]).autoscale&&(u.x&&f(o.xaxis,c,c),u.y&&f(o.yaxis,c,c)),i[n+s]=null;else if(y&&n>0&&null!=i[n-l]&&i[n-l]!=i[n]&&i[n-l+1]!=i[n+1]){for(s=0;s<l;++s)i[n+l+s]=i[n+s];i[n+1]=i[n-l+1],n+=l}}}}for(t=0;t<r.length;++t)o=r[t],j(v.processDatapoints,[o,o.datapoints]);for(t=0;t<r.length;++t){i=(o=r[t]).datapoints.points,l=o.datapoints.pointsize,b=o.datapoints.format;var k=g,_=g,S=m,E=m;for(a=0;a<i.length;a+=l)if(null!=i[a])for(s=0;s<l;++s)c=i[a+s],(u=b[s])&&!1!==u.autoscale&&c!=h&&c!=-h&&(u.x&&(c<k&&(k=c),c>S&&(S=c)),u.y&&(c<_&&(_=c),c>E&&(E=c)));if(o.bars.show){var M;switch(o.bars.align){case"left":M=0;break;case"right":M=-o.bars.barWidth;break;default:M=-o.bars.barWidth/2}o.bars.horizontal?(_+=M,E+=M+o.bars.barWidth):(k+=M,S+=M+o.bars.barWidth)}f(o.xaxis,k,S),f(o.yaxis,_,E)}e.each(w(),(function(e,t){t.datamin==g&&(t.datamin=null),t.datamax==m&&(t.datamax=null)}))}()}function O(e,t){var a=e[t+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function w(){return e.grep(b.concat(g),(function(e){return e}))}function k(e){var t,a,n={};for(t=0;t<b.length;++t)(a=b[t])&&a.used&&(n["x"+a.n]=a.c2p(e.left));for(t=0;t<g.length;++t)(a=g[t])&&a.used&&(n["y"+a.n]=a.c2p(e.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function _(t,a){return t[a-1]||(t[a-1]={n:a,direction:t==b?"x":"y",options:e.extend(!0,{},t==b?i.xaxis:i.yaxis)}),t[a-1]}function S(){L&&clearTimeout(L),u.unbind("mousemove",D),u.unbind("mouseleave",z),u.unbind("click",R),j(v.shutdown,[u])}function E(t){var a=t.labelWidth,n=t.labelHeight,s=t.options.position,o="x"===t.direction,r=t.options.tickLength,c=i.grid.axisMargin,u=i.grid.labelMargin,d=!0,p=!0,h=!0,f=!1;e.each(o?b:g,(function(e,a){a&&(a.show||a.reserveSpace)&&(a===t?f=!0:a.options.position===s&&(f?p=!1:d=!1),f||(h=!1))})),p&&(c=0),null==r&&(r=h?"full":5),isNaN(+r)||(u+=+r),o?(n+=u,"bottom"==s?(m.bottom+=n+c,t.box={top:l.height-m.bottom,height:n}):(t.box={top:m.top+c,height:n},m.top+=n+c)):(a+=u,"left"==s?(t.box={left:m.left+c,width:a},m.left+=a+c):(m.right+=a+c,t.box={left:l.width-m.right,width:a})),t.position=s,t.tickLength=r,t.box.padding=u,t.innermost=d}function M(){var a,n=w(),s=i.grid.show;for(var o in m){var c=i.grid.margin||0;m[o]="number"==typeof c?c:c[o]||0}for(var o in j(v.processOffset,[m]),m)"object"==typeof i.grid.borderWidth?m[o]+=s?i.grid.borderWidth[o]:0:m[o]+=s?i.grid.borderWidth:0;if(e.each(n,(function(e,t){var a=t.options;t.show=null==a.show?t.used:a.show,t.reserveSpace=null==a.reserveSpace?t.show:a.reserveSpace,function(e){var t=e.options,a=+(null!=t.min?t.min:e.datamin),n=+(null!=t.max?t.max:e.datamax),s=n-a;if(0==s){var o=0==n?1:.01;null==t.min&&(a-=o),null!=t.max&&null==t.min||(n+=o)}else{var r=t.autoscaleMargin;null!=r&&(null==t.min&&(a-=s*r)<0&&null!=e.datamin&&e.datamin>=0&&(a=0),null==t.max&&(n+=s*r)>0&&null!=e.datamax&&e.datamax<=0&&(n=0))}e.min=a,e.max=n}(t)})),s){var u=e.grep(n,(function(e){return e.show||e.reserveSpace}));for(e.each(u,(function(t,a){!function(t){var a,n=t.options;a="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var s=(t.max-t.min)/a,o=-Math.floor(Math.log(s)/Math.LN10),r=n.tickDecimals;null!=r&&o>r&&(o=r);var i,c=Math.pow(10,-o),u=s/c;if(u<1.5?i=1:u<3?(i=2,u>2.25&&(null==r||o+1<=r)&&(i=2.5,++o)):i=u<7.5?5:10,i*=c,null!=n.minTickSize&&i<n.minTickSize&&(i=n.minTickSize),t.delta=s,t.tickDecimals=Math.max(0,null!=r?r:o),t.tickSize=n.tickSize||i,"time"==n.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,a,n,s=[],o=(a=e.min,(n=e.tickSize)*Math.floor(a/n)),r=0,i=Number.NaN;do{t=i,i=o+r*e.tickSize,s.push(i),++r}while(i<e.max&&i!=t);return s},t.tickFormatter=function(e,t){var a=t.tickDecimals?Math.pow(10,t.tickDecimals):1,n=""+Math.round(e*a)/a;if(null!=t.tickDecimals){var s=n.indexOf("."),o=-1==s?0:n.length-s-1;if(o<t.tickDecimals)return(o?n:n+".")+(""+a).substr(1,t.tickDecimals-o)}return n}),e.isFunction(n.tickFormatter)&&(t.tickFormatter=function(e,t){return""+n.tickFormatter(e,t)}),null!=n.alignTicksWithAxis){var d=("x"==t.direction?b:g)[n.alignTicksWithAxis-1];if(d&&d.used&&d!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==n.min&&(t.min=Math.min(t.min,p[0])),null==n.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,a,n=[];for(a=0;a<d.ticks.length;++a)t=(d.ticks[a].v-d.min)/(d.max-d.min),t=e.min+t*(e.max-e.min),n.push(t);return n},!t.mode&&null==n.tickDecimals){var m=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),h=t.tickGenerator(t);h.length>1&&/\..*0$/.test((h[1]-h[0]).toFixed(m))||(t.tickDecimals=m)}}}}(a),function(t){var a,n,s=t.options.ticks,o=[];for(null==s||"number"==typeof s&&s>0?o=t.tickGenerator(t):s&&(o=e.isFunction(s)?s(t):s),t.ticks=[],a=0;a<o.length;++a){var r=null,i=o[a];"object"==typeof i?(n=+i[0],i.length>1&&(r=i[1])):n=+i,null==r&&(r=t.tickFormatter(n,t)),isNaN(n)||t.ticks.push({v:n,label:r})}}(a),function(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}(a,a.ticks),function(e){for(var t=e.options,a=e.ticks||[],n=t.labelWidth||0,s=t.labelHeight||0,o=n||("x"==e.direction?Math.floor(l.width/(a.length||1)):null),r=e.direction+"Axis "+e.direction+e.n+"Axis",i="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+r,c=t.font||"flot-tick-label tickLabel",u=0;u<a.length;++u){var d=a[u];if(d.label){var p=l.getTextInfo(i,d.label,c,null,o);n=Math.max(n,p.width),s=Math.max(s,p.height)}}e.labelWidth=t.labelWidth||n,e.labelHeight=t.labelHeight||s}(a)})),a=u.length-1;a>=0;--a)E(u[a]);!function(){var t,a=i.grid.minBorderMargin;if(null==a)for(a=0,t=0;t<r.length;++t)a=Math.max(a,2*(r[t].points.radius+r[t].points.lineWidth/2));var n={left:a,right:a,top:a,bottom:a};e.each(w(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(n.left=Math.max(n.left,t.labelWidth/2),n.right=Math.max(n.right,t.labelWidth/2)):(n.bottom=Math.max(n.bottom,t.labelHeight/2),n.top=Math.max(n.top,t.labelHeight/2)))})),m.left=Math.ceil(Math.max(n.left,m.left)),m.right=Math.ceil(Math.max(n.right,m.right)),m.top=Math.ceil(Math.max(n.top,m.top)),m.bottom=Math.ceil(Math.max(n.bottom,m.bottom))}(),e.each(u,(function(e,t){!function(e){"x"==e.direction?(e.box.left=m.left-e.labelWidth/2,e.box.width=l.width-m.left-m.right+e.labelWidth):(e.box.top=m.top-e.labelHeight/2,e.box.height=l.height-m.bottom-m.top+e.labelHeight)}(t)}))}h=l.width-m.left-m.right,f=l.height-m.bottom-m.top,e.each(n,(function(e,t){!function(e){function t(e){return e}var a,n,s=e.options.transform||t,o=e.options.inverseTransform;"x"==e.direction?(a=e.scale=h/Math.abs(s(e.max)-s(e.min)),n=Math.min(s(e.max),s(e.min))):(a=-(a=e.scale=f/Math.abs(s(e.max)-s(e.min))),n=Math.max(s(e.max),s(e.min))),e.p2c=s==t?function(e){return(e-n)*a}:function(e){return(s(e)-n)*a},e.c2p=o?function(e){return o(n+e/a)}:function(e){return n+e/a}}(t)})),s&&e.each(w(),(function(e,t){var a,n,s,o,r,i=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",u="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,d=t.options.font||"flot-tick-label tickLabel";if(l.removeText(u),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(a=t.ticks[p]).label||a.v<t.min||a.v>t.max||("x"==t.direction?(o="center",n=m.left+t.p2c(a.v),"bottom"==t.position?s=i.top+i.padding:(s=i.top+i.height-i.padding,r="bottom")):(r="middle",s=m.top+t.p2c(a.v),"left"==t.position?(n=i.left+i.width-i.padding,o="right"):n=i.left+i.padding),l.addText(u,n,s,a.label,d,null,null,o,r))})),function(){if(null!=i.legend.container?e(i.legend.container).html(""):t.find(".legend").remove(),i.legend.show){for(var a,n,s=[],o=[],l=!1,c=i.legend.labelFormatter,u=0;u<r.length;++u)(a=r[u]).label&&(n=c?c(a.label,a):a.label)&&o.push({label:n,color:a.color});if(i.legend.sorted)if(e.isFunction(i.legend.sorted))o.sort(i.legend.sorted);else if("reverse"==i.legend.sorted)o.reverse();else{var d="descending"!=i.legend.sorted;o.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=d?1:-1}))}for(u=0;u<o.length;++u){var p=o[u];u%i.legend.noColumns==0&&(l&&s.push("</tr>"),s.push("<tr>"),l=!0),s.push('<td class="legendColorBox"><div style="border:1px solid '+i.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel" data-test-subj="flotLegendLabel">'+p.label+"</td>")}if(l&&s.push("</tr>"),0!=s.length){var b='<table style="font-size:smaller;color:'+i.grid.color+'">'+s.join("")+"</table>";if(null!=i.legend.container)e(i.legend.container).html(b);else{var g="",h=i.legend.position,f=i.legend.margin;null==f[0]&&(f=[f,f]),"n"==h.charAt(0)?g+="top:"+(f[1]+m.top)+"px;":"s"==h.charAt(0)&&(g+="bottom:"+(f[1]+m.bottom)+"px;"),"e"==h.charAt(1)?g+="right:"+(f[0]+m.right)+"px;":"w"==h.charAt(1)&&(g+="left:"+(f[0]+m.left)+"px;");var v=e('<div class="legend">'+b.replace('style="','style="position:absolute;'+g+";")+"</div>").appendTo(t);if(0!=i.legend.backgroundOpacity){var x=i.legend.backgroundColor;null==x&&((x=(x=i.grid.backgroundColor)&&"string"==typeof x?e.color.parse(x):e.color.extract(v,"background-color")).a=1,x=x.toString());var j=v.children();e('<div style="position:absolute;width:'+j.width()+"px;height:"+j.height()+"px;"+g+"background-color:"+x+';"> </div>').prependTo(v).css("opacity",i.legend.backgroundOpacity)}}}}}()}function C(){l.clear(),j(v.drawBackground,[d]);var e=i.grid;e.show&&e.backgroundColor&&(d.save(),d.translate(m.left,m.top),d.fillStyle=K(i.grid.backgroundColor,f,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,h,f),d.restore()),e.show&&!e.aboveData&&P();for(var t=0;t<r.length;++t)j(v.drawSeries,[d,r[t]]),N(r[t]);j(v.draw,[d]),e.show&&e.aboveData&&P(),l.render(),H()}function T(e,t){for(var a,n,s,o,r=w(),i=0;i<r.length;++i)if((a=r[i]).direction==t&&(e[o=t+a.n+"axis"]||1!=a.n||(o=t+"axis"),e[o])){n=e[o].from,s=e[o].to;break}if(e[o]||(a="x"==t?b[0]:g[0],n=e[t+"1"],s=e[t+"2"]),null!=n&&null!=s&&n>s){var l=n;n=s,s=l}return{from:n,to:s,axis:a}}function P(){var t,a,n,s;d.save(),d.translate(m.left,m.top);var o=i.grid.markings;if(o)for(e.isFunction(o)&&((a=x.getAxes()).xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,o=o(a)),t=0;t<o.length;++t){var r=o[t],l=T(r,"x"),c=T(r,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var u=l.from===l.to,p=c.from===c.to;if(!u||!p)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),u||p){var b=r.lineWidth||i.grid.markingsLineWidth,g=b%2?.5:0;d.beginPath(),d.strokeStyle=r.color||i.grid.markingsColor,d.lineWidth=b,u?(d.moveTo(l.to+g,c.from),d.lineTo(l.to+g,c.to)):(d.moveTo(l.from,c.to+g),d.lineTo(l.to,c.to+g)),d.stroke()}else d.fillStyle=r.color||i.grid.markingsColor,d.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}a=w(),n=i.grid.borderWidth;for(var v=0;v<a.length;++v){var j,y,O,k,_=a[v],S=_.box,E=_.tickLength;if(_.show&&0!=_.ticks.length){for(d.lineWidth=1,"x"==_.direction?(j=0,y="full"==E?"top"==_.position?0:f:S.top-m.top+("top"==_.position?S.height:0)):(y=0,j="full"==E?"left"==_.position?0:h:S.left-m.left+("left"==_.position?S.width:0)),_.innermost||(d.strokeStyle=_.options.color,d.beginPath(),O=k=0,"x"==_.direction?O=h+1:k=f+1,1==d.lineWidth&&("x"==_.direction?y=Math.floor(y)+.5:j=Math.floor(j)+.5),d.moveTo(j,y),d.lineTo(j+O,y+k),d.stroke()),d.strokeStyle=_.options.tickColor,d.beginPath(),t=0;t<_.ticks.length;++t){var M=_.ticks[t].v;O=k=0,isNaN(M)||M<_.min||M>_.max||"full"==E&&("object"==typeof n&&n[_.position]>0||n>0)&&(M==_.min||M==_.max)||("x"==_.direction?(j=_.p2c(M),k="full"==E?-f:E,"top"==_.position&&(k=-k)):(y=_.p2c(M),O="full"==E?-h:E,"left"==_.position&&(O=-O)),1==d.lineWidth&&("x"==_.direction?j=Math.floor(j)+.5:y=Math.floor(y)+.5),d.moveTo(j,y),d.lineTo(j+O,y+k))}d.stroke()}}n&&(s=i.grid.borderColor,"object"==typeof n||"object"==typeof s?("object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!=typeof s&&(s={top:s,right:s,bottom:s,left:s}),n.top>0&&(d.strokeStyle=s.top,d.lineWidth=n.top,d.beginPath(),d.moveTo(0-n.left,0-n.top/2),d.lineTo(h,0-n.top/2),d.stroke()),n.right>0&&(d.strokeStyle=s.right,d.lineWidth=n.right,d.beginPath(),d.moveTo(h+n.right/2,0-n.top),d.lineTo(h+n.right/2,f),d.stroke()),n.bottom>0&&(d.strokeStyle=s.bottom,d.lineWidth=n.bottom,d.beginPath(),d.moveTo(h+n.right,f+n.bottom/2),d.lineTo(0,f+n.bottom/2),d.stroke()),n.left>0&&(d.strokeStyle=s.left,d.lineWidth=n.left,d.beginPath(),d.moveTo(0-n.left/2,f+n.bottom),d.lineTo(0-n.left/2,0),d.stroke())):(d.lineWidth=n,d.strokeStyle=i.grid.borderColor,d.strokeRect(-n/2,-n/2,h+n,f+n))),d.restore()}function N(e){e.lines.show&&function(e){function t(e,t,a,n,s){var o=e.points,r=e.pointsize,i=null,l=null;d.beginPath();for(var c=r;c<o.length;c+=r){var u=o[c-r],p=o[c-r+1],b=o[c],g=o[c+1];if(null!=u&&null!=b){if(p<=g&&p<s.min){if(g<s.min)continue;u=(s.min-p)/(g-p)*(b-u)+u,p=s.min}else if(g<=p&&g<s.min){if(p<s.min)continue;b=(s.min-p)/(g-p)*(b-u)+u,g=s.min}if(p>=g&&p>s.max){if(g>s.max)continue;u=(s.max-p)/(g-p)*(b-u)+u,p=s.max}else if(g>=p&&g>s.max){if(p>s.max)continue;b=(s.max-p)/(g-p)*(b-u)+u,g=s.max}if(u<=b&&u<n.min){if(b<n.min)continue;p=(n.min-u)/(b-u)*(g-p)+p,u=n.min}else if(b<=u&&b<n.min){if(u<n.min)continue;g=(n.min-u)/(b-u)*(g-p)+p,b=n.min}if(u>=b&&u>n.max){if(b>n.max)continue;p=(n.max-u)/(b-u)*(g-p)+p,u=n.max}else if(b>=u&&b>n.max){if(u>n.max)continue;g=(n.max-u)/(b-u)*(g-p)+p,b=n.max}u==i&&p==l||d.moveTo(n.p2c(u)+t,s.p2c(p)+a),i=b,l=g,d.lineTo(n.p2c(b)+t,s.p2c(g)+a)}}d.stroke()}d.save(),d.translate(m.left,m.top),d.lineJoin="round";var a=e.lines.lineWidth,n=e.shadowSize;if(a>0&&n>0){d.lineWidth=n,d.strokeStyle="rgba(0,0,0,0.1)";var s=Math.PI/18;t(e.datapoints,Math.sin(s)*(a/2+n/2),Math.cos(s)*(a/2+n/2),e.xaxis,e.yaxis),d.lineWidth=n/2,t(e.datapoints,Math.sin(s)*(a/2+n/4),Math.cos(s)*(a/2+n/4),e.xaxis,e.yaxis)}d.lineWidth=a,d.strokeStyle=e.color;var o=I(e.lines,e.color,0,f);o&&(d.fillStyle=o,function(e,t,a){for(var n=e.points,s=e.pointsize,o=Math.min(Math.max(0,a.min),a.max),r=0,i=!1,l=1,c=0,u=0;!(s>0&&r>n.length+s);){var p=n[(r+=s)-s],b=n[r-s+l],g=n[r],m=n[r+l];if(i){if(s>0&&null!=p&&null==g){u=r,s=-s,l=2;continue}if(s<0&&r==c+s){d.fill(),i=!1,l=1,r=c=u+(s=-s);continue}}if(null!=p&&null!=g){if(p<=g&&p<t.min){if(g<t.min)continue;b=(t.min-p)/(g-p)*(m-b)+b,p=t.min}else if(g<=p&&g<t.min){if(p<t.min)continue;m=(t.min-p)/(g-p)*(m-b)+b,g=t.min}if(p>=g&&p>t.max){if(g>t.max)continue;b=(t.max-p)/(g-p)*(m-b)+b,p=t.max}else if(g>=p&&g>t.max){if(p>t.max)continue;m=(t.max-p)/(g-p)*(m-b)+b,g=t.max}if(i||(d.beginPath(),d.moveTo(t.p2c(p),a.p2c(o)),i=!0),b>=a.max&&m>=a.max)d.lineTo(t.p2c(p),a.p2c(a.max)),d.lineTo(t.p2c(g),a.p2c(a.max));else if(b<=a.min&&m<=a.min)d.lineTo(t.p2c(p),a.p2c(a.min)),d.lineTo(t.p2c(g),a.p2c(a.min));else{var h=p,f=g;b<=m&&b<a.min&&m>=a.min?(p=(a.min-b)/(m-b)*(g-p)+p,b=a.min):m<=b&&m<a.min&&b>=a.min&&(g=(a.min-b)/(m-b)*(g-p)+p,m=a.min),b>=m&&b>a.max&&m<=a.max?(p=(a.max-b)/(m-b)*(g-p)+p,b=a.max):m>=b&&m>a.max&&b<=a.max&&(g=(a.max-b)/(m-b)*(g-p)+p,m=a.max),p!=h&&d.lineTo(t.p2c(h),a.p2c(b)),d.lineTo(t.p2c(p),a.p2c(b)),d.lineTo(t.p2c(g),a.p2c(m)),g!=f&&(d.lineTo(t.p2c(g),a.p2c(m)),d.lineTo(t.p2c(f),a.p2c(m)))}}}}(e.datapoints,e.xaxis,e.yaxis)),a>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis),d.restore()}(e),e.bars.show&&function(e){var t;switch(d.save(),d.translate(m.left,m.top),d.lineWidth=e.bars.lineWidth,d.strokeStyle=e.color,e.bars.align){case"left":t=0;break;case"right":t=-e.bars.barWidth;break;default:t=-e.bars.barWidth/2}var a=e.bars.fill?function(t,a){return I(e.bars,e.color,t,a)}:null;(function(t,a,n,s,o,r){for(var i=t.points,l=t.pointsize,c=0;c<i.length;c+=l)null!=i[c]&&A(i[c],i[c+1],i[c+2],a,n,s,o,r,d,e.bars.horizontal,e.bars.lineWidth)})(e.datapoints,t,t+e.bars.barWidth,a,e.xaxis,e.yaxis),d.restore()}(e),e.points.show&&function(e){function t(e,t,a,n,s,o,r,i){for(var l=e.points,c=e.pointsize,u=0;u<l.length;u+=c){var p=l[u],b=l[u+1];null==p||p<o.min||p>o.max||b<r.min||b>r.max||(d.beginPath(),p=o.p2c(p),b=r.p2c(b)+n,"circle"==i?d.arc(p,b,t,0,s?Math.PI:2*Math.PI,!1):i(d,p,b,t,s),d.closePath(),a&&(d.fillStyle=a,d.fill()),d.stroke())}}d.save(),d.translate(m.left,m.top);var a=e.points.lineWidth,n=e.shadowSize,s=e.points.radius,o=e.points.symbol;if(0==a&&(a=1e-4),a>0&&n>0){var r=n/2;d.lineWidth=r,d.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,s,null,r+r/2,!0,e.xaxis,e.yaxis,o),d.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,s,null,r/2,!0,e.xaxis,e.yaxis,o)}d.lineWidth=a,d.strokeStyle=e.color,t(e.datapoints,s,I(e.points,e.color),0,!1,e.xaxis,e.yaxis,o),d.restore()}(e)}function A(e,t,a,n,s,o,r,i,l,c,u){var d,p,b,g,m,h,f,v,x;c?(v=h=f=!0,m=!1,g=t+n,b=t+s,(p=e)<(d=a)&&(x=p,p=d,d=x,m=!0,h=!1)):(m=h=f=!0,v=!1,d=e+n,p=e+s,(g=t)<(b=a)&&(x=g,g=b,b=x,v=!0,f=!1)),p<r.min||d>r.max||g<i.min||b>i.max||(d<r.min&&(d=r.min,m=!1),p>r.max&&(p=r.max,h=!1),b<i.min&&(b=i.min,v=!1),g>i.max&&(g=i.max,f=!1),d=r.p2c(d),b=i.p2c(b),p=r.p2c(p),g=i.p2c(g),o&&(l.fillStyle=o(b,g),l.fillRect(d,g,p-d,b-g)),u>0&&(m||h||f||v)&&(l.beginPath(),l.moveTo(d,b),m?l.lineTo(d,g):l.moveTo(d,g),f?l.lineTo(p,g):l.moveTo(p,g),h?l.lineTo(p,b):l.moveTo(p,b),v?l.lineTo(d,b):l.moveTo(d,b),l.stroke()))}function I(t,a,n,s){var o=t.fill;if(!o)return null;if(t.fillColor)return K(t.fillColor,n,s,a);var r=e.color.parse(a);return r.a="number"==typeof o?o:.4,r.normalize(),r.toString()}x.setData=y,x.setupGrid=M,x.draw=C,x.getPlaceholder=function(){return t},x.getCanvas=function(){return l.element},x.getPlotOffset=function(){return m},x.width=function(){return h},x.height=function(){return f},x.offset=function(){var e=u.offset();return e.left+=m.left,e.top+=m.top,e},x.getData=function(){return r},x.getAxes=function(){var t={};return e.each(b.concat(g),(function(e,a){a&&(t[a.direction+(1!=a.n?a.n:"")+"axis"]=a)})),t},x.getXAxes=function(){return b},x.getYAxes=function(){return g},x.c2p=k,x.p2c=function(e){var t,a,n,s={};for(t=0;t<b.length;++t)if((a=b[t])&&a.used&&(null==e[n="x"+a.n]&&1==a.n&&(n="x"),null!=e[n])){s.left=a.p2c(e[n]);break}for(t=0;t<g.length;++t)if((a=g[t])&&a.used&&(null==e[n="y"+a.n]&&1==a.n&&(n="y"),null!=e[n])){s.top=a.p2c(e[n]);break}return s},x.getOptions=function(){return i},x.highlight=V,x.unhighlight=G,x.triggerRedrawOverlay=H,x.pointOffset=function(e){return{left:parseInt(b[O(e,"x")-1].p2c(+e.x)+m.left,10),top:parseInt(g[O(e,"y")-1].p2c(+e.y)+m.top,10)}},x.shutdown=S,x.destroy=function(){S(),t.removeData("plot").empty(),r=[],i=null,l=null,c=null,u=null,d=null,p=null,b=[],g=[],v=null,F=[],x=null},x.resize=function(){var e=t.width(),a=t.height();l.resize(e,a),c.resize(e,a)},x.hooks=v,function(){for(var t={Canvas:a},n=0;n<o.length;++n){var s=o[n];s.init(x,t),s.options&&e.extend(!0,i,s.options)}}(),function(a){e.extend(!0,i,a),a&&a.colors&&(i.colors=a.colors),null==i.xaxis.color&&(i.xaxis.color=e.color.parse(i.grid.color).scale("a",.22).toString()),null==i.yaxis.color&&(i.yaxis.color=e.color.parse(i.grid.color).scale("a",.22).toString()),null==i.xaxis.tickColor&&(i.xaxis.tickColor=i.grid.tickColor||i.xaxis.color),null==i.yaxis.tickColor&&(i.yaxis.tickColor=i.grid.tickColor||i.yaxis.color),null==i.grid.borderColor&&(i.grid.borderColor=i.grid.color),null==i.grid.tickColor&&(i.grid.tickColor=e.color.parse(i.grid.color).scale("a",.22).toString());var n,s,o,r=t.css("font-size"),l=r?+r.replace("px",""):13,c={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(o=i.xaxes.length||1,n=0;n<o;++n)(s=i.xaxes[n])&&!s.tickColor&&(s.tickColor=s.color),s=e.extend(!0,{},i.xaxis,s),i.xaxes[n]=s,s.font&&(s.font=e.extend({},c,s.font),s.font.color||(s.font.color=s.color),s.font.lineHeight||(s.font.lineHeight=Math.round(1.15*s.font.size)));for(o=i.yaxes.length||1,n=0;n<o;++n)(s=i.yaxes[n])&&!s.tickColor&&(s.tickColor=s.color),s=e.extend(!0,{},i.yaxis,s),i.yaxes[n]=s,s.font&&(s.font=e.extend({},c,s.font),s.font.color||(s.font.color=s.color),s.font.lineHeight||(s.font.lineHeight=Math.round(1.15*s.font.size)));for(i.xaxis.noTicks&&null==i.xaxis.ticks&&(i.xaxis.ticks=i.xaxis.noTicks),i.yaxis.noTicks&&null==i.yaxis.ticks&&(i.yaxis.ticks=i.yaxis.noTicks),i.x2axis&&(i.xaxes[1]=e.extend(!0,{},i.xaxis,i.x2axis),i.xaxes[1].position="top",null==i.x2axis.min&&(i.xaxes[1].min=null),null==i.x2axis.max&&(i.xaxes[1].max=null)),i.y2axis&&(i.yaxes[1]=e.extend(!0,{},i.yaxis,i.y2axis),i.yaxes[1].position="right",null==i.y2axis.min&&(i.yaxes[1].min=null),null==i.y2axis.max&&(i.yaxes[1].max=null)),i.grid.coloredAreas&&(i.grid.markings=i.grid.coloredAreas),i.grid.coloredAreasColor&&(i.grid.markingsColor=i.grid.coloredAreasColor),i.lines&&e.extend(!0,i.series.lines,i.lines),i.points&&e.extend(!0,i.series.points,i.points),i.bars&&e.extend(!0,i.series.bars,i.bars),null!=i.shadowSize&&(i.series.shadowSize=i.shadowSize),null!=i.highlightColor&&(i.series.highlightColor=i.highlightColor),n=0;n<i.xaxes.length;++n)_(b,n+1).options=i.xaxes[n];for(n=0;n<i.yaxes.length;++n)_(g,n+1).options=i.yaxes[n];for(var u in v)i.hooks[u]&&i.hooks[u].length&&(v[u]=v[u].concat(i.hooks[u]));j(v.processOptions,[i])}(s),function(){t.css("padding",0).children().filter((function(){return!e(this).hasClass("flot-overlay")&&!e(this).hasClass("flot-base")})).remove(),"static"==t.css("position")&&t.css("position","relative"),l=new a("flot-base",t),c=new a("flot-overlay",t),d=l.context,p=c.context,u=e(c.element).unbind();var n=t.data("plot");n&&(n.shutdown(),c.clear()),t.data("plot",x)}(),y(n),M(),C(),i.grid.hoverable&&(u.mousemove(D),u.bind("mouseleave",z)),i.grid.clickable&&u.click(R),j(v.bindEvents,[u]);var F=[],L=null;function D(e){i.grid.hoverable&&B("plothover",e,(function(e){return 0!=e.hoverable}))}function z(e){i.grid.hoverable&&B("plothover",e,(function(e){return!1}))}function R(e){B("plotclick",e,(function(e){return 0!=e.clickable}))}function B(e,a,n){var s=u.offset(),o=a.pageX-s.left-m.left,l=a.pageY-s.top-m.top,c=k({left:o,top:l});c.pageX=a.pageX,c.pageY=a.pageY;var d=function(e,t,a){var n,s,o,l=i.grid.mouseActiveRadius,c=l*l+1,u=null;for(n=r.length-1;n>=0;--n)if(a(r[n])){var d=r[n],p=d.xaxis,b=d.yaxis,g=d.datapoints.points,m=p.c2p(e),h=b.c2p(t),f=l/p.scale,v=l/b.scale;if(o=d.datapoints.pointsize,p.options.inverseTransform&&(f=Number.MAX_VALUE),b.options.inverseTransform&&(v=Number.MAX_VALUE),d.lines.show||d.points.show)for(s=0;s<g.length;s+=o){var x=g[s],j=g[s+1];if(null!=x&&!(x-m>f||x-m<-f||j-h>v||j-h<-v)){var y=Math.abs(p.p2c(x)-e),O=Math.abs(b.p2c(j)-t),w=y*y+O*O;w<c&&(c=w,u=[n,s/o])}}if(d.bars.show&&!u){var k,_;switch(d.bars.align){case"left":k=0;break;case"right":k=-d.bars.barWidth;break;default:k=-d.bars.barWidth/2}for(_=k+d.bars.barWidth,s=0;s<g.length;s+=o){x=g[s],j=g[s+1];var S=g[s+2];null!=x&&(r[n].bars.horizontal?m<=Math.max(S,x)&&m>=Math.min(S,x)&&h>=j+k&&h<=j+_:m>=x+k&&m<=x+_&&h>=Math.min(S,j)&&h<=Math.max(S,j))&&(u=[n,s/o])}}}return u?(n=u[0],s=u[1],o=r[n].datapoints.pointsize,{datapoint:r[n].datapoints.points.slice(s*o,(s+1)*o),dataIndex:s,series:r[n],seriesIndex:n}):null}(o,l,n);if(d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+s.left+m.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+s.top+m.top,10)),i.grid.autoHighlight){for(var p=0;p<F.length;++p){var b=F[p];b.auto!=e||d&&b.series==d.series&&b.point[0]==d.datapoint[0]&&b.point[1]==d.datapoint[1]||G(b.series,b.point)}d&&V(d.series,d.datapoint,e)}t.trigger(e,[c,d])}function H(){var e=i.interaction.redrawOverlayInterval;-1!=e?L||(L=setTimeout(W,e)):W()}function W(){var e,t;for(L=null,p.save(),c.clear(),p.translate(m.left,m.top),e=0;e<F.length;++e)(t=F[e]).series.bars.show?q(t.series,t.point):$(t.series,t.point);p.restore(),j(v.drawOverlay,[p])}function V(e,t,a){if("number"==typeof e&&(e=r[e]),"number"==typeof t){var n=e.datapoints.pointsize;t=e.datapoints.points.slice(n*t,n*(t+1))}var s=U(e,t);-1==s?(F.push({series:e,point:t,auto:a}),H()):a||(F[s].auto=!1)}function G(e,t){if(null==e&&null==t)return F=[],void H();if("number"==typeof e&&(e=r[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var n=U(e,t);-1!=n&&(F.splice(n,1),H())}function U(e,t){for(var a=0;a<F.length;++a){var n=F[a];if(n.series==e&&n.point[0]==t[0]&&n.point[1]==t[1])return a}return-1}function $(t,a){var n=a[0],s=a[1],o=t.xaxis,r=t.yaxis,i="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(n<o.min||n>o.max||s<r.min||s>r.max)){var l=t.points.radius+t.points.lineWidth/2;p.lineWidth=l,p.strokeStyle=i;var c=1.5*l;n=o.p2c(n),s=r.p2c(s),p.beginPath(),"circle"==t.points.symbol?p.arc(n,s,c,0,2*Math.PI,!1):t.points.symbol(p,n,s,c,!1),p.closePath(),p.stroke()}}function q(t,a){var n,s="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),o=s;switch(t.bars.align){case"left":n=0;break;case"right":n=-t.bars.barWidth;break;default:n=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=s,A(a[0],a[1],a[2]||0,n,n+t.bars.barWidth,(function(){return o}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function K(t,a,n,s){if("string"==typeof t)return t;for(var o=d.createLinearGradient(0,n,0,a),r=0,i=t.colors.length;r<i;++r){var l=t.colors[r];if("string"!=typeof l){var c=e.color.parse(s);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}o.addColorStop(r/(i-1),l)}return o}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),a.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var a=this.element,n=this.context,s=this.pixelRatio;this.width!=e&&(a.width=e*s,a.style.width=e+"px",this.width=e),this.height!=t&&(a.height=t*s,a.style.height=t+"px",this.height=t),n.restore(),n.save(),n.scale(s,s)},a.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},a.prototype.render=function(){var e=this._textCache;for(var a in e)if(t.call(e,a)){var n=this.getTextLayer(a),s=e[a];for(var o in n.hide(),s)if(t.call(s,o)){var r=s[o];for(var i in r)if(t.call(r,i)){for(var l,c=r[i].positions,u=0;l=c[u];u++)l.active?l.rendered||(n.append(l.element),l.rendered=!0):(c.splice(u--,1),l.rendered&&l.element.detach());0==c.length&&delete r[i]}}n.show()}},a.prototype.getTextLayer=function(t){var a=this.text[t];return null==a&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),a=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),a},a.prototype.getTextInfo=function(t,a,n,s,o){var r,i,l,c;if(a=""+a,r="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,null==(i=this._textCache[t])&&(i=this._textCache[t]={}),null==(l=i[r])&&(l=i[r]={}),null==(c=l[a])){var u=e("<div></div>").text(a).css({position:"absolute","max-width":o,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof n?u.css({font:r,color:n.color}):"string"==typeof n&&u.addClass(n),c=l[a]={width:u.outerWidth(!0),height:u.outerHeight(!0),element:u,positions:[]},u.detach()}return c},a.prototype.addText=function(e,t,a,n,s,o,r,i,l){var c=this.getTextInfo(e,n,s,o,r),u=c.positions;"center"==i?t-=c.width/2:"right"==i&&(t-=c.width),"middle"==l?a-=c.height/2:"bottom"==l&&(a-=c.height);for(var d,p=0;d=u[p];p++)if(d.x==t&&d.y==a)return void(d.active=!0);d={active:!0,rendered:!1,element:u.length?c.element.clone():c.element,x:t,y:a},u.push(d),d.element.css({top:Math.round(a),left:Math.round(t),"text-align":i})},a.prototype.removeText=function(e,a,n,s,o,r){if(null==s){var i=this._textCache[e];if(null!=i)for(var l in i)if(t.call(i,l)){var c=i[l];for(var u in c)if(t.call(c,u))for(var d=c[u].positions,p=0;b=d[p];p++)b.active=!1}}else{var b;for(d=this.getTextInfo(e,s,o,r).positions,p=0;b=d[p];p++)b.x==a&&b.y==n&&(b.active=!1)}},e.plot=function(t,a,s){return new n(e(t),a,s,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,a){return this.each((function(){e.plot(this,t,a)}))}}(jQuery)},function(e,t){!function(e){var t,a,n,s=Object.prototype.hasOwnProperty;e.plot.plugins.push({init:function(o,r){var i=r.Canvas;null==t&&(a=i.prototype.getTextInfo,n=i.prototype.addText,t=i.prototype.render),i.prototype.render=function(){if(!o.getOptions().canvas)return t.call(this);var e=this.context,a=this._textCache;for(var n in e.save(),e.textBaseline="middle",a)if(s.call(a,n)){var r=a[n];for(var i in r)if(s.call(r,i)){var l=r[i],c=!0;for(var u in l)if(s.call(l,u)){var d=l[u],p=d.positions,b=d.lines;c&&(e.fillStyle=d.font.color,e.font=d.font.definition,c=!1);for(var g,m=0;g=p[m];m++)if(g.active)for(var h,f=0;h=g.lines[f];f++)e.fillText(b[f].text,h[0],h[1]);else p.splice(m--,1);0==p.length&&delete l[u]}}}e.restore()},i.prototype.getTextInfo=function(t,n,s,r,i){if(!o.getOptions().canvas)return a.call(this,t,n,s,r,i);var l,c,u,d;if(n=""+n,l="object"==typeof s?s.style+" "+s.variant+" "+s.weight+" "+s.size+"px "+s.family:s,null==(c=this._textCache[t])&&(c=this._textCache[t]={}),null==(u=c[l])&&(u=c[l]={}),null==(d=u[n])){var p=this.context;if("object"!=typeof s){var b=e("<div>&nbsp;</div>").css("position","absolute").addClass("string"==typeof s?s:null).appendTo(this.getTextLayer(t));(s={lineHeight:b.height(),style:b.css("font-style"),variant:b.css("font-variant"),weight:b.css("font-weight"),family:b.css("font-family"),color:b.css("color")}).size=b.css("line-height",1).height(),b.remove()}l=s.style+" "+s.variant+" "+s.weight+" "+s.size+"px "+s.family,d=u[n]={width:0,height:0,positions:[],lines:[],font:{definition:l,color:s.color}},p.save(),p.font=l;for(var g=(n+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n"),m=0;m<g.length;++m){var h=g[m],f=p.measureText(h);d.width=Math.max(f.width,d.width),d.height+=s.lineHeight,d.lines.push({text:h,width:f.width,height:s.lineHeight})}p.restore()}return d},i.prototype.addText=function(e,t,a,s,r,i,l,c,u){if(!o.getOptions().canvas)return n.call(this,e,t,a,s,r,i,l,c,u);var d,p=this.getTextInfo(e,s,r,i,l),b=p.positions,g=p.lines;a+=p.height/g.length/2,a="middle"==u?Math.round(a-p.height/2):"bottom"==u?Math.round(a-p.height):Math.round(a),window.opera&&window.opera.version().split(".")[0]<12&&(a-=2);for(var m,h=0;m=b[h];h++)if(m.x==t&&m.y==a)return void(m.active=!0);for(m={active:!0,lines:[],x:t,y:a},b.push(m),h=0;d=g[h];h++)"center"==c?m.lines.push([Math.round(t-d.width/2),a]):"right"==c?m.lines.push([Math.round(t-d.width),a]):m.lines.push([Math.round(t),a]),a+=d.height}},options:{canvas:!0},name:"canvas",version:"1.0"})}(jQuery)},function(e,t){!function(e){function t(e,t,a){var n={square:function(e,t,a,n,s){var o=n*Math.sqrt(Math.PI)/2;e.rect(t-o,a-o,o+o,o+o)},diamond:function(e,t,a,n,s){var o=n*Math.sqrt(Math.PI/2);e.moveTo(t-o,a),e.lineTo(t,a-o),e.lineTo(t+o,a),e.lineTo(t,a+o),e.lineTo(t-o,a)},triangle:function(e,t,a,n,s){var o=n*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3)),r=o*Math.sin(Math.PI/3);e.moveTo(t-o/2,a+r/2),e.lineTo(t+o/2,a+r/2),s||(e.lineTo(t,a-r/2),e.lineTo(t-o/2,a+r/2))},cross:function(e,t,a,n,s){var o=n*Math.sqrt(Math.PI)/2;e.moveTo(t-o,a-o),e.lineTo(t+o,a+o),e.moveTo(t-o,a+o),e.lineTo(t+o,a-o)}},s=t.points.symbol;n[s]&&(t.points.symbol=n[s])}jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push(t)},name:"symbols",version:"1.0"})}()},function(e,t){jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function a(a){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function n(a){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var n=e.offset();t.x=Math.max(0,Math.min(a.pageX-n.left,e.width())),t.y=Math.max(0,Math.min(a.pageY-n.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(a){if(a){var n=e.p2c(a);t.x=Math.max(0,Math.min(n.left,e.width())),t.y=Math.max(0,Math.min(n.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(a){a&&e.setCrosshair(a),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(a),t.mousemove(n))})),e.hooks.drawOverlay.push((function(e,a){var n=e.getOptions().crosshair;if(n.mode){var s=e.getPlotOffset();if(a.save(),a.translate(s.left,s.top),-1!=t.x){var o=e.getOptions().crosshair.lineWidth%2?.5:0;if(a.strokeStyle=n.color,a.lineWidth=n.lineWidth,a.lineJoin="round",a.beginPath(),-1!=n.mode.indexOf("x")){var r=Math.floor(t.x)+o;a.moveTo(r,0),a.lineTo(r,e.height())}if(-1!=n.mode.indexOf("y")){var i=Math.floor(t.y)+o;a.moveTo(0,i),a.lineTo(e.width(),i)}a.stroke()}a.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",a),t.unbind("mousemove",n)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},function(e,t){!function(e){e.plot.plugins.push({init:function(t){var a={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},s=null;function o(e){a.active&&(d(e),t.getPlaceholder().trigger("plotselecting",[i()]))}function r(o){1==o.which&&(document.body.focus(),void 0!==document.onselectstart&&null==n.onselectstart&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==n.ondrag&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),u(a.first,o),a.active=!0,s=function(e){!function(e){s=null,void 0!==document.onselectstart&&(document.onselectstart=n.onselectstart),void 0!==document.ondrag&&(document.ondrag=n.ondrag),a.active=!1,d(e),g()?l():(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null]))}(e)},e(document).one("mouseup",s))}function i(){if(!g())return null;if(!a.show)return null;var n={},s=a.first,o=a.second;return e.each(t.getAxes(),(function(e,t){if(t.used){var a=t.c2p(s[t.direction]),r=t.c2p(o[t.direction]);n[e]={from:Math.min(a,r),to:Math.max(a,r)}}})),n}function l(){var e=i();t.getPlaceholder().trigger("plotselected",[e]),e.xaxis&&e.yaxis&&t.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}function c(e,t,a){return t<e?e:t>a?a:t}function u(e,n){var s=t.getOptions(),o=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=c(0,n.pageX-o.left-r.left,t.width()),e.y=c(0,n.pageY-o.top-r.top,t.height()),"y"==s.selection.mode&&(e.x=e==a.first?0:t.width()),"x"==s.selection.mode&&(e.y=e==a.first?0:t.height())}function d(e){null!=e.pageX&&(u(a.second,e),g()?(a.show=!0,t.triggerRedrawOverlay()):p(!0))}function p(e){a.show&&(a.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function b(e,a){var n,s,o,r,i=t.getAxes();for(var l in i)if((n=i[l]).direction==a&&(e[r=a+n.n+"axis"]||1!=n.n||(r=a+"axis"),e[r])){s=e[r].from,o=e[r].to;break}if(e[r]||(n="x"==a?t.getXAxes()[0]:t.getYAxes()[0],s=e[a+"1"],o=e[a+"2"]),null!=s&&null!=o&&s>o){var c=s;s=o,o=c}return{from:s,to:o,axis:n}}function g(){var e=t.getOptions().selection.minSize;return Math.abs(a.second.x-a.first.x)>=e&&Math.abs(a.second.y-a.first.y)>=e}t.clearSelection=p,t.setSelection=function(e,n){var s,o=t.getOptions();"y"==o.selection.mode?(a.first.x=0,a.second.x=t.width()):(s=b(e,"x"),a.first.x=s.axis.p2c(s.from),a.second.x=s.axis.p2c(s.to)),"x"==o.selection.mode?(a.first.y=0,a.second.y=t.height()):(s=b(e,"y"),a.first.y=s.axis.p2c(s.from),a.second.y=s.axis.p2c(s.to)),a.show=!0,t.triggerRedrawOverlay(),!n&&g()&&l()},t.getSelection=i,t.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(o),t.mousedown(r))})),t.hooks.drawOverlay.push((function(t,n){if(a.show&&g()){var s=t.getPlotOffset(),o=t.getOptions();n.save(),n.translate(s.left,s.top);var r=e.color.parse(o.selection.color);n.strokeStyle=r.scale("a",.8).toString(),n.lineWidth=1,n.lineJoin=o.selection.shape,n.fillStyle=r.scale("a",.4).toString();var i=Math.min(a.first.x,a.second.x)+.5,l=Math.min(a.first.y,a.second.y)+.5,c=Math.abs(a.second.x-a.first.x)-1,u=Math.abs(a.second.y-a.first.y)-1;n.fillRect(i,l,c,u),n.strokeRect(i,l,c,u),n.restore()}})),t.hooks.shutdown.push((function(t,a){a.unbind("mousemove",o),a.unbind("mousedown",r),s&&e(document).unbind("mouseup",s)}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})}(jQuery)},function(e,t){jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,a){if(null!=t.stack&&!1!==t.stack){var n=function(e,t){for(var a=null,n=0;n<t.length&&e!=t[n];++n)t[n].stack==e.stack&&(a=t[n]);return a}(t,e.getData());if(n){for(var s,o,r,i,l,c,u,d,p=a.pointsize,b=a.points,g=n.datapoints.pointsize,m=n.datapoints.points,h=[],f=t.lines.show,v=t.bars.horizontal,x=p>2&&(v?a.format[2].x:a.format[2].y),j=f&&t.lines.steps,y=!0,O=v?1:0,w=v?0:1,k=0,_=0;!(k>=b.length);){if(u=h.length,null==b[k]){for(d=0;d<p;++d)h.push(b[k+d]);k+=p}else if(_>=m.length){if(!f)for(d=0;d<p;++d)h.push(b[k+d]);k+=p}else if(null==m[_]){for(d=0;d<p;++d)h.push(null);y=!0,_+=g}else{if(s=b[k+O],o=b[k+w],i=m[_+O],l=m[_+w],c=0,s==i){for(d=0;d<p;++d)h.push(b[k+d]);h[u+w]+=l,c=l,k+=p,_+=g}else if(s>i){if(f&&k>0&&null!=b[k-p]){for(r=o+(b[k-p+w]-o)*(i-s)/(b[k-p+O]-s),h.push(i),h.push(r+l),d=2;d<p;++d)h.push(b[k+d]);c=l}_+=g}else{if(y&&f){k+=p;continue}for(d=0;d<p;++d)h.push(b[k+d]);f&&_>0&&null!=m[_-g]&&(c=l+(m[_-g+w]-l)*(s-i)/(m[_-g+O]-i)),h[u+w]+=c,k+=p}y=!1,u!=h.length&&x&&(h[u+2]+=c)}if(j&&u!=h.length&&u>0&&null!=h[u]&&h[u]!=h[u-p]&&h[u+1]!=h[u-p+1]){for(d=0;d<p;++d)h[u+p+d]=h[u+d];h[u+1]=h[u-p+1]}}a.points=h}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},function(e,t){!function(e){e.plot.plugins.push({init:function(t){function a(t,a,n,s,o){var r,i,l,c,u,d=n.pointsize,p=e.extend({},a);p.datapoints={points:[],pointsize:d,format:n.format},p.label=null,p.color=o,p.threshold=null,p.originSeries=a,p.data=[];var b,g=n.points,m=a.lines.show,h=[],f=[];for(r=0;r<g.length;r+=d){if(i=g[r],u=c,c=(l=g[r+1])<s?h:f,m&&u!=c&&null!=i&&r>0&&null!=g[r-d]){var v=i+(s-l)*(i-g[r-d])/(l-g[r-d+1]);for(u.push(v),u.push(s),b=2;b<d;++b)u.push(g[r+b]);for(c.push(null),c.push(null),b=2;b<d;++b)c.push(g[r+b]);for(c.push(v),c.push(s),b=2;b<d;++b)c.push(g[r+b])}for(c.push(i),c.push(l),b=2;b<d;++b)c.push(g[r+b])}if(n.points=f,p.datapoints.points=h,p.datapoints.points.length>0){var x=e.inArray(a,t.getData());t.getData().splice(x+1,0,p)}}t.hooks.processDatapoints.push((function(t,n,s){n.threshold&&(n.threshold instanceof Array?(n.threshold.sort((function(e,t){return e.below-t.below})),e(n.threshold).each((function(e,o){a(t,n,s,o.below,o.color)}))):a(t,n,s,n.threshold.below,n.threshold.color))}))},options:{series:{threshold:null}},name:"threshold",version:"1.2"})}(jQuery)},function(e,t){jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,a){if(null!=t.fillBetween){var n=function(e,t){var a;for(a=0;a<t.length;++a)if(t[a].id===e.fillBetween)return t[a];return"number"==typeof e.fillBetween?e.fillBetween<0||e.fillBetween>=t.length?null:t[e.fillBetween]:null}(t,e.getData());if(n){for(var s,o,r,i,l,c,u,d,p=a.pointsize,b=a.points,g=n.datapoints.pointsize,m=n.datapoints.points,h=[],f=t.lines.show,v=p>2&&a.format[2].y,x=f&&t.lines.steps,j=!0,y=0,O=0;!(y>=b.length);){if(u=h.length,null==b[y]){for(d=0;d<p;++d)h.push(b[y+d]);y+=p}else if(O>=m.length){if(!f)for(d=0;d<p;++d)h.push(b[y+d]);y+=p}else if(null==m[O]){for(d=0;d<p;++d)h.push(null);j=!0,O+=g}else{if(s=b[y],o=b[y+1],i=m[O],l=m[O+1],c=0,s===i){for(d=0;d<p;++d)h.push(b[y+d]);c=l,y+=p,O+=g}else if(s>i){if(f&&y>0&&null!=b[y-p]){for(r=o+(b[y-p+1]-o)*(i-s)/(b[y-p]-s),h.push(i),h.push(r),d=2;d<p;++d)h.push(b[y+d]);c=l}O+=g}else{if(j&&f){y+=p;continue}for(d=0;d<p;++d)h.push(b[y+d]);f&&O>0&&null!=m[O-g]&&(c=l+(m[O-g+1]-l)*(s-i)/(m[O-g]-i)),y+=p}j=!1,u!==h.length&&v&&(h[u+2]=c)}if(x&&u!==h.length&&u>0&&null!==h[u]&&h[u]!==h[u-p]&&h[u+1]!==h[u-p+1]){for(d=0;d<p;++d)h[u+p+d]=h[u+d];h[u+1]=h[u-p+1]}}a.points=h}}}))},options:{series:{fillBetween:null}},name:"fillbetween",version:"1.0"})},function(e,t){!function(e){function t(e){return Math.log(e)/Math.LN10}e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(a){e.each(a.getAxes(),(function(e,a){"log"===a.options.mode&&(a.tickGenerator=function(e){var a,n,s,o=[],r=(a=e.max,Math.ceil(t(a))),i=function(e){return Math.floor(t(e))}(e.min),l=Number.NaN,c=0;if((null===e.min||e.min<=0)&&(i=0,e.min=.6),r<=i)o=[1e-6,1e-5,1e-4,.001,.01,.1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];else if(t(e.max)-t(e.datamin)<1){var u;n=e.min,i=(s=e.tickSize)*Math.floor(n/s);do{u=l,l=i+c*e.tickSize,o.push(l),++c}while(l<e.max&&l!==u)}else{for(;c<=r-i;c++)l=Math.pow(10,i+c),o.push(l);var d=o.length;if(r-i<6)for(var p=1;p<2*d-1;p+=2)l=5*o[p-1],o.splice(p,0,l)}return o},a.tickFormatter=function(e,a){var n;if(t(a.max)-t(a.datamin)<1){var s=a.tickDecimals?Math.pow(10,a.tickDecimals):1;if(n=""+Math.round(e*s)/s,null!==a.tickDecimals){var o=n.indexOf("."),r=-1===o?0:n.length-o-1;if(r<a.tickDecimals)return(r?n:n+".")+(""+s).substr(1,a.tickDecimals-r)}}else{var i="",l=parseFloat(e).toExponential(0),c=function(e){for(var t=["⁰","¹","²","³","⁴","⁵","⁶","⁷","⁸","⁹"],a="",n=""+e,s=0;s<n.length;s++)"+"===n[s]||(a+="-"===n[s]?"⁻":t[n[s]]);return a}(l.slice(2));"1"!==l[0]&&(i=l[0]+"x"),n=i+"10"+c}return n})}))}))},name:"log",version:"0.9"})}(jQuery)},function(e,t){!function(e){function t(){var e=document.createElement("div");return void 0!==e.style.MozTransition||void 0!==e.style.OTransition||void 0!==e.style.webkitTransition||void 0!==e.style.transition}function a(e,t,a,n,s){this.axisName=e,this.position=t,this.padding=a,this.plot=n,this.opts=s,this.width=0,this.height=0}function n(e,t,n,s,o){a.prototype.constructor.call(this,e,t,n,s,o)}function s(e,t,n,s,o){a.prototype.constructor.call(this,e,t,n,s,o),this.elem=null}function o(e,t,a,n,o){s.prototype.constructor.call(this,e,t,a,n,o)}function r(e,t,a,n,s){o.prototype.constructor.call(this,e,t,a,n,s),this.requiresResize=!1}a.prototype.cleanup=function(){},n.prototype=new a,n.prototype.constructor=n,n.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif"),this.opts.axisLabelFontSizePixels,this.padding,this.opts.axisLabelFontSizePixels,this.padding,"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},n.prototype.draw=function(e){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var t=this.plot.getCanvas().getContext("2d");t.save(),t.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,t.fillStyle=this.opts.axisLabelColour;var a,n,s=t.measureText(this.opts.axisLabel).width,o=this.opts.axisLabelFontSizePixels,r=0;"top"==this.position?(a=e.left+e.width/2-s/2,n=e.top+.72*o):"bottom"==this.position?(a=e.left+e.width/2-s/2,n=e.top+e.height-.72*o):"left"==this.position?(a=e.left+.72*o,n=e.height/2+e.top+s/2,r=-Math.PI/2):"right"==this.position&&(a=e.left+e.width-.72*o,n=e.height/2+e.top-s/2,r=Math.PI/2),t.translate(a,n),t.rotate(r),t.fillText(this.opts.axisLabel,0,0),t.restore()},s.prototype=new a,s.prototype.constructor=s,s.prototype.calculateSize=function(){var t=e('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(t),this.labelWidth=t.outerWidth(!0),this.labelHeight=t.outerHeight(!0),t.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},s.prototype.cleanup=function(){this.elem&&this.elem.remove()},s.prototype.draw=function(t){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=e('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",t.left+t.width/2-this.labelWidth/2+"px"),this.elem.css("top",t.top+"px")):"bottom"==this.position?(this.elem.css("left",t.left+t.width/2-this.labelWidth/2+"px"),this.elem.css("top",t.top+t.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",t.top+t.height/2-this.labelHeight/2+"px"),this.elem.css("left",t.left+"px")):"right"==this.position&&(this.elem.css("top",t.top+t.height/2-this.labelHeight/2+"px"),this.elem.css("left",t.left+t.width-this.labelWidth+"px"))},o.prototype=new s,o.prototype.constructor=o,o.prototype.calculateSize=function(){s.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},o.prototype.transforms=function(e,t,a){var n={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=t||0!=a){var s=" translate("+t+"px, "+a+"px)";n["-moz-transform"]+=s,n["-webkit-transform"]+=s,n["-o-transform"]+=s,n["-ms-transform"]+=s}if(0!=e){var o=" rotate("+e+"deg)";n["-moz-transform"]+=o,n["-webkit-transform"]+=o,n["-o-transform"]+=o,n["-ms-transform"]+=o}var r="top: 0; left: 0; ";for(var i in n)n[i]&&(r+=i+":"+n[i]+";");return r+";"},o.prototype.calculateOffsets=function(e){var t={x:0,y:0,degrees:0};return"bottom"==this.position?(t.x=e.left+e.width/2-this.labelWidth/2,t.y=e.top+e.height-this.labelHeight):"top"==this.position?(t.x=e.left+e.width/2-this.labelWidth/2,t.y=e.top):"left"==this.position?(t.degrees=-90,t.x=e.left-this.labelWidth/2+this.labelHeight/2,t.y=e.height/2+e.top):"right"==this.position&&(t.degrees=90,t.x=e.left+e.width-this.labelWidth/2-this.labelHeight/2,t.y=e.height/2+e.top),t.x=Math.round(t.x),t.y=Math.round(t.y),t},o.prototype.draw=function(t){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var a=this.calculateOffsets(t);this.elem=e('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(a.degrees,a.x,a.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},r.prototype=new o,r.prototype.constructor=r,r.prototype.transforms=function(e,t,a){var n="";if(0!=e){for(var s=e/90;s<0;)s+=4;n+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+s+"); ",this.requiresResize="right"==this.position}return 0!=t&&(n+="left: "+t+"px; "),0!=a&&(n+="top: "+a+"px; "),n},r.prototype.calculateOffsets=function(e){var t=o.prototype.calculateOffsets.call(this,e);return"top"==this.position?t.y=e.top+1:"left"==this.position?(t.x=e.left,t.y=e.height/2+e.top-this.labelWidth/2):"right"==this.position&&(t.x=e.left+e.width-this.labelHeight,t.y=e.height/2+e.top-this.labelWidth/2),t},r.prototype.draw=function(e){o.prototype.draw.call(this,e),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(a,i){if(i.axisLabels.show){var l=!1,c={};a.hooks.draw.push((function(a,i){var u=!1;l?(l=!1,e.each(a.getAxes(),(function(e,t){var n=t.options||a.getOptions()[e];n&&n.axisLabel&&t.show&&c[e].draw(t.box)}))):(e.each(a.getAxes(),(function(e,i){var l=i.options||a.getOptions()[e];if(e in c&&(i.labelHeight=i.labelHeight-c[e].height,i.labelWidth=i.labelWidth-c[e].width,l.labelHeight=i.labelHeight,l.labelWidth=i.labelWidth,c[e].cleanup(),delete c[e]),l&&l.axisLabel&&i.show){u=!0;var d=null;if(l.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)d=!l.axisLabelUseHtml&&(t()||document.createElement("canvas").getContext&&"function"==typeof document.createElement("canvas").getContext("2d").fillText||l.axisLabelUseCanvas)?l.axisLabelUseCanvas||!t()?n:o:s;else{var p=navigator.userAgent;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(p)&&(rv=parseFloat(RegExp.$1)),d=rv>=9&&!l.axisLabelUseCanvas&&!l.axisLabelUseHtml?o:l.axisLabelUseCanvas||l.axisLabelUseHtml?l.axisLabelUseCanvas?n:s:r}var b=void 0===l.axisLabelPadding?2:l.axisLabelPadding;c[e]=new d(e,i.position,b,a,l),c[e].calculateSize(),l.labelHeight=i.labelHeight+c[e].height,l.labelWidth=i.labelWidth+c[e].width}})),u&&(l=!0,a.setupGrid(),a.draw()))}))}}))},options:{axisLabels:{show:!0}},name:"axisLabels",version:"2.0"})}(jQuery)},function(e,t,a){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=u(a(300)),r=u(a(94)),i=a(301),l=u(a(203)),c=a(303);function u(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._platformName=l.default.getPlatformName(),a._parseShortcutDescriptor=function(e){return(0,c.isPlainObject)(e)?e[a._platformName]:e},a._keymap=e,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"addUpdateListener",value:function(e){(0,r.default)(e,"addUpdateListener: callback argument is not defined or falsy"),this.on(t.CHANGE_EVENT,e)}},{key:"removeUpdateListener",value:function(e){this.removeListener(t.CHANGE_EVENT,e)}},{key:"setKeymap",value:function(e){(0,r.default)(e,"setKeymap: keymap argument is not defined or falsy."),this._keymap=e,this.emit(t.CHANGE_EVENT)}},{key:"extendKeymap",value:function(e){(0,r.default)(e,"extendKeymap: keymap argument is not defined or falsy."),this._keymap=Object.assign({},this._keymap,e),this.emit(t.CHANGE_EVENT)}},{key:"getAllShortcuts",value:function(){return this._keymap}},{key:"getAllShortcutsForPlatform",value:function(e){return function t(a){return(0,o.default)(a,(function(a,n,s){if((0,c.isPlainObject)(s)){if(!s[e])return a[n]=t(s),a;s=s[e]}return a[n]=s,a}),{})}(this._keymap)}},{key:"getAllShortcutsForCurrentPlatform",value:function(){return this.getAllShortcutsForPlatform(this._platformName)}},{key:"getShortcuts",value:function(e){(0,r.default)(e,"getShortcuts: name argument is not defined or falsy.");var t=this._keymap[e];if(t)return(0,c.compact)((0,c.flatten)((0,c.map)(t,this._parseShortcutDescriptor)))}},{key:"_parseShortcutKeyName",value:function(e,t){var a=this;return(0,c.findKey)(e,(function(e){if((0,c.isPlainObject)(e)&&(e=e[a._platformName]),(0,c.isArray)(e)){var n=e.indexOf(t);n>=0&&(e=e[n])}return e===t}))}},{key:"findShortcutName",value:function(e,t){(0,r.default)(e,"findShortcutName: keyName argument is not defined or falsy."),(0,r.default)(t,"findShortcutName: componentName argument is not defined or falsy.");var a=this._keymap[t];return this._parseShortcutKeyName(a,e)}}]),t}(i.EventEmitter);d.CHANGE_EVENT="shortcuts:update",t.default=d,e.exports=t.default}).call(this,a(299))},function(e,t,a){e.exports=a(12)(675)},function(e,t){e.exports=function(e,t){var a=[function(a,s,o,r){return n||(a=e[r[0]],n=!0),t(a,s,e[s],o,r)}],n=2 in arguments;return n&&a.push(arguments[2]),Array.prototype.reduce.apply(Object.keys(e),a)}},function(e,t,a){"use strict";var n,s="object"==typeof Reflect?Reflect:null,o=s&&"function"==typeof s.apply?s.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};n=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(a,n){function s(a){e.removeListener(t,o),n(a)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",s),a([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,a){"function"==typeof e.on&&f(e,"error",t,{once:!0})}(e,s)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function d(e,t,a,n){var s,o,r,i;if(c(a),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),o=e._events),r=o[t]),void 0===r)r=o[t]=a,++e._eventsCount;else if("function"==typeof r?r=o[t]=n?[a,r]:[r,a]:n?r.unshift(a):r.push(a),(s=u(e))>0&&r.length>s&&!r.warned){r.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+r.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=r.length,i=l,console&&console.warn&&console.warn(i)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(e,t,a){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},s=p.bind(n);return s.listener=a,n.wrapFn=s,s}function g(e,t,a){var n=e._events;if(void 0===n)return[];var s=n[t];return void 0===s?[]:"function"==typeof s?a?[s.listener||s]:[s]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(s):h(s,s.length)}function m(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function h(e,t){for(var a=new Array(t),n=0;n<t;++n)a[n]=e[n];return a}function f(e,t,a,n){if("function"==typeof e.on)n.once?e.once(t,a):e.on(t,a);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function s(o){n.once&&e.removeEventListener(t,s),a(o)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var r;if(t.length>0&&(r=t[0]),r instanceof Error)throw r;var i=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw i.context=r,i}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=h(l,c);for(a=0;a<c;++a)o(u[a],this,t)}return!0},i.prototype.addListener=function(e,t){return d(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return d(this,e,t,!0)},i.prototype.once=function(e,t){return c(t),this.on(e,b(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,b(this,e,t)),this},i.prototype.removeListener=function(e,t){var a,n,s,o,r;if(c(t),void 0===(n=this._events))return this;if(void 0===(a=n[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(s=-1,o=a.length-1;o>=0;o--)if(a[o]===t||a[o].listener===t){r=a[o].listener,s=o;break}if(s<0)return this;0===s?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,s),1===a.length&&(n[e]=a[0]),void 0!==n.removeListener&&this.emit("removeListener",e,r||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,a,n;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var s,o=Object.keys(a);for(n=0;n<o.length;++n)"removeListener"!==(s=o[n])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},i.prototype.listeners=function(e){return g(this,e,!0)},i.prototype.rawListeners=function(e){return g(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},i.prototype.listenerCount=m,i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,a){(function(e,n){var s;
/*!
 * Platform.js <https://mths.be/platform>
 * Copyright 2014-2018 Benjamin Tan <https://bnjmnt4n.now.sh/>
 * Copyright 2011-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <https://mths.be/mit>
 */(function(){"use strict";var o={function:!0,object:!0},r=o[typeof window]&&window||this,i=o[typeof t]&&t,l=o[typeof e]&&e&&!e.nodeType&&e,c=i&&l&&"object"==typeof n&&n;!c||c.global!==c&&c.window!==c&&c.self!==c||(r=c);var u=Math.pow(2,53)-1,d=/\bOpera/,p=Object.prototype,b=p.hasOwnProperty,g=p.toString;function m(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function h(e){return e=y(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:m(e)}function f(e,t){for(var a in e)b.call(e,a)&&t(e[a],a,e)}function v(e){return null==e?m(e):g.call(e).slice(8,-1)}function x(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function j(e,t){var a=null;return function(e,t){var a=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=u)for(;++a<n;)t(e[a],a);else f(e,t)}(e,(function(n,s){a=t(a,n,s,e)})),a}function y(e){return String(e).replace(/^ +| +$/g,"")}var O=function e(t){var a=r,n=t&&"object"==typeof t&&"String"!=v(t);n&&(a=t,t=null);var s=a.navigator||{},o=s.userAgent||"";t||(t=o);var i,l,c,u,p,b=n?!!s.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(g.toString()),m="Object",O=n?m:"ScriptBridgingProxyObject",w=n?m:"Environment",k=n&&a.java?"JavaPackage":v(a.java),_=n?m:"RuntimeObject",S=/\bJava/.test(k)&&a.java,E=S&&v(a.environment)==w,M=S?"a":"α",C=S?"b":"β",T=a.document||{},P=a.operamini||a.opera,N=d.test(N=n&&P?P["[[Class]]"]:v(P))?N:P=null,A=t,I=[],F=null,L=t==o,D=L&&P&&"function"==typeof P.version&&P.version(),z=j([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,a){return e||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(t)&&(a.label||a)})),R=j(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,a){return e||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(t)&&(a.label||a)})),B=V([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),H=j({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,a,n){return e||(a[B]||a[/^[a-z]+(?: +[a-z]+\b)*/i.exec(B)]||RegExp("\\b"+x(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n})),W=j(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,a){var n=a.pattern||x(a);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,a){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&a&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&a&&(e=e.replace(RegExp(t,"i"),a)),h(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,a.label||a)),e}));function V(e){return j(e,(function(e,a){var n=a.pattern||x(a);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(a.label&&!RegExp(n,"i").test(a.label)?a.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),a=a.label||a,e=h(e[0].replace(RegExp(n,"i"),a).replace(RegExp("; *(?:"+a+"[_-])?","i")," ").replace(RegExp("("+a+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(z&&(z=[z]),H&&!B&&(B=V([H])),(i=/\bGoogle TV\b/.exec(B))&&(B=i[0]),/\bSimulator\b/i.test(t)&&(B=(B?B+" ":"")+"Simulator"),"Opera Mini"==R&&/\bOPiOS\b/.test(t)&&I.push("running in Turbo/Uncompressed mode"),"IE"==R&&/\blike iPhone OS\b/.test(t)?(H=(i=e(t.replace(/like iPhone OS/,""))).manufacturer,B=i.product):/^iP/.test(B)?(R||(R="Safari"),W="iOS"+((i=/ OS ([\d_]+)/i.exec(t))?" "+i[1].replace(/_/g,"."):"")):"Konqueror"!=R||/buntu/i.test(W)?H&&"Google"!=H&&(/Chrome/.test(R)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(B))||/\bAndroid\b/.test(W)&&/^Chrome/.test(R)&&/\bVersion\//i.test(t)?(R="Android Browser",W=/\bAndroid\b/.test(W)?W:"Android"):"Silk"==R?(/\bMobi/i.test(t)||(W="Android",I.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&I.unshift("accelerated")):"PaleMoon"==R&&(i=/\bFirefox\/([\d.]+)\b/.exec(t))?I.push("identifying as Firefox "+i[1]):"Firefox"==R&&(i=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(W||(W="Firefox OS"),B||(B=i[1])):!R||(i=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(R))?(R&&!B&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(i+"/")+8))&&(R=null),(i=B||H||W)&&(B||H||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(W))&&(R=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(W)?W:i)+" Browser")):"Electron"==R&&(i=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&I.push("Chromium "+i):W="Kubuntu",D||(D=j(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",x(R),"(?:Firefox|Minefield|NetFront)"],(function(e,a){return e||(RegExp(a+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))),(i=("iCab"==z&&parseFloat(D)>3?"WebKit":/\bOpera\b/.test(R)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(z)&&"WebKit"||!z&&/\bMSIE\b/i.test(t)&&("Mac OS"==W?"Tasman":"Trident")||"WebKit"==z&&/\bPlayStation\b(?! Vita\b)/i.test(R)&&"NetFront")&&(z=[i]),"IE"==R&&(i=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(R+=" Mobile",W="Windows Phone "+(/\+$/.test(i)?i:i+".x"),I.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(R="IE Mobile",W="Windows Phone 8.x",I.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=R&&"Trident"==z&&(i=/\brv:([\d.]+)/.exec(t))&&(R&&I.push("identifying as "+R+(D?" "+D:"")),R="IE",D=i[1]),L){if(u="global",p=null!=(c=a)?typeof c[u]:"number",/^(?:boolean|number|string|undefined)$/.test(p)||"object"==p&&!c[u])v(i=a.runtime)==O?(R="Adobe AIR",W=i.flash.system.Capabilities.os):v(i=a.phantom)==_?(R="PhantomJS",D=(i=i.version||null)&&i.major+"."+i.minor+"."+i.patch):"number"==typeof T.documentMode&&(i=/\bTrident\/(\d+)/i.exec(t))?(D=[D,T.documentMode],(i=+i[1]+4)!=D[1]&&(I.push("IE "+D[1]+" mode"),z&&(z[1]=""),D[1]=i),D="IE"==R?String(D[1].toFixed(1)):D[0]):"number"==typeof T.documentMode&&/^(?:Chrome|Firefox)\b/.test(R)&&(I.push("masking as "+R+" "+D),R="IE",D="11.0",z=["Trident"],W="Windows");else if(S&&(A=(i=S.lang.System).getProperty("os.arch"),W=W||i.getProperty("os.name")+" "+i.getProperty("os.version")),E){try{D=a.require("ringo/engine").version.join("."),R="RingoJS"}catch(e){(i=a.system)&&i.global.system==a.system&&(R="Narwhal",W||(W=i[0].os||null))}R||(R="Rhino")}else"object"==typeof a.process&&!a.process.browser&&(i=a.process)&&("object"==typeof i.versions&&("string"==typeof i.versions.electron?(I.push("Node "+i.versions.node),R="Electron",D=i.versions.electron):"string"==typeof i.versions.nw&&(I.push("Chromium "+D,"Node "+i.versions.node),R="NW.js",D=i.versions.nw)),R||(R="Node.js",A=i.arch,W=i.platform,D=(D=/[\d.]+/.exec(i.version))?D[0]:null));W=W&&h(W)}if(D&&(i=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(L&&s.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(F=/b/i.test(i)?"beta":"alpha",D=D.replace(RegExp(i+"\\+?$"),"")+("beta"==F?C:M)+(/\d+\+?/.exec(i)||"")),"Fennec"==R||"Firefox"==R&&/\b(?:Android|Firefox OS)\b/.test(W))R="Firefox Mobile";else if("Maxthon"==R&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(B))"Xbox 360"==B&&(W=null),"Xbox 360"==B&&/\bIEMobile\b/.test(t)&&I.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(R)&&(!R||B||/Browser|Mobi/.test(R))||"Windows CE"!=W&&!/Mobi/i.test(t))if("IE"==R&&L)try{null===a.external&&I.unshift("platform preview")}catch(e){I.unshift("embedded")}else(/\bBlackBerry\b/.test(B)||/\bBB10\b/.test(t))&&(i=(RegExp(B.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||D)?(W=((i=[i,/BB10/.test(t)])[1]?(B=null,H="BlackBerry"):"Device Software")+" "+i[0],D=null):this!=f&&"Wii"!=B&&(L&&P||/Opera/.test(R)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==R&&/\bOS X (?:\d+\.){2,}/.test(W)||"IE"==R&&(W&&!/^Win/.test(W)&&D>5.5||/\bWindows XP\b/.test(W)&&D>8||8==D&&!/\bTrident\b/.test(t)))&&!d.test(i=e.call(f,t.replace(d,"")+";"))&&i.name&&(i="ing as "+i.name+((i=i.version)?" "+i:""),d.test(R)?(/\bIE\b/.test(i)&&"Mac OS"==W&&(W=null),i="identify"+i):(i="mask"+i,R=N?h(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(i)&&(W=null),L||(D=null)),z=["Presto"],I.push(i));else R+=" Mobile";(i=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(i=[parseFloat(i.replace(/\.(\d)$/,".0$1")),i],"Safari"==R&&"+"==i[1].slice(-1)?(R="WebKit Nightly",F="alpha",D=i[1].slice(0,-1)):D!=i[1]&&D!=(i[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(D=null),i[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==i[0]&&537.36==i[2]&&parseFloat(i[1])>=28&&"WebKit"==z&&(z=["Blink"]),L&&(b||i[1])?(z&&(z[1]="like Chrome"),i=i[1]||((i=i[0])<530?1:i<532?2:i<532.05?3:i<533?4:i<534.03?5:i<534.07?6:i<534.1?7:i<534.13?8:i<534.16?9:i<534.24?10:i<534.3?11:i<535.01?12:i<535.02?"13+":i<535.07?15:i<535.11?16:i<535.19?17:i<536.05?18:i<536.1?19:i<537.01?20:i<537.11?"21+":i<537.13?23:i<537.18?24:i<537.24?25:i<537.36?26:"Blink"!=z?"27":"28")):(z&&(z[1]="like Safari"),i=(i=i[0])<400?1:i<500?2:i<526?3:i<533?4:i<534?"4+":i<535?5:i<537?6:i<538?7:i<601?8:"8"),z&&(z[1]+=" "+(i+="number"==typeof i?".x":/[.+]/.test(i)?"":"+")),"Safari"==R&&(!D||parseInt(D)>45)&&(D=i)),"Opera"==R&&(i=/\bzbov|zvav$/.exec(W))?(R+=" ",I.unshift("desktop mode"),"zvav"==i?(R+="Mini",D=null):R+="Mobile",W=W.replace(RegExp(" *"+i+"$"),"")):"Safari"==R&&/\bChrome\b/.exec(z&&z[1])&&(I.unshift("desktop mode"),R="Chrome Mobile",D=null,/\bOS X\b/.test(W)?(H="Apple",W="iOS 4.3+"):W=null),D&&0==D.indexOf(i=/[\d.]+$/.exec(W))&&t.indexOf("/"+i+"-")>-1&&(W=y(W.replace(i,""))),z&&!/\b(?:Avant|Nook)\b/.test(R)&&(/Browser|Lunascape|Maxthon/.test(R)||"Safari"!=R&&/^iOS/.test(W)&&/\bSafari\b/.test(z[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(R)&&z[1])&&(i=z[z.length-1])&&I.push(i),I.length&&(I=["("+I.join("; ")+")"]),H&&B&&B.indexOf(H)<0&&I.push("on "+H),B&&I.push((/^on /.test(I[I.length-1])?"":"on ")+B),W&&(i=/ ([\d.+]+)$/.exec(W),l=i&&"/"==W.charAt(W.length-i[0].length-1),W={architecture:32,family:i&&!l?W.replace(i[0],""):W,version:i?i[1]:null,toString:function(){var e=this.version;return this.family+(e&&!l?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(i=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(A))&&!/\bi686\b/i.test(A)?(W&&(W.architecture=64,W.family=W.family.replace(RegExp(" *"+i),"")),R&&(/\bWOW64\b/i.test(t)||L&&/\w(?:86|32)$/.test(s.cpuClass||s.platform)&&!/\bWin64; x64\b/i.test(t))&&I.unshift("32-bit")):W&&/^OS X/.test(W.family)&&"Chrome"==R&&parseFloat(D)>=39&&(W.architecture=64),t||(t=null);var G={};return G.description=t,G.layout=z&&z[0],G.manufacturer=H,G.name=R,G.prerelease=F,G.product=B,G.ua=t,G.version=R&&D,G.os=W||{architecture:null,family:null,version:null,toString:function(){return"null"}},G.parse=e,G.toString=function(){return this.description||""},G.version&&I.unshift(D),G.name&&I.unshift(R),W&&R&&(W!=String(W).split(" ")[0]||W!=R.split(" ")[0]&&!B)&&I.push(B?"("+W+")":"on "+W),I.length&&(G.description=I.join(" ")),G}();r.platform=O,void 0===(s=function(){return O}.call(t,a,t,e))||(e.exports=s)}).call(this)}).call(this,a(185)(e),a(139))},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=t.isArray=function(e){return Array.isArray(e)},o=t.isPlainObject=function(e){if("object"!==(void 0===e?"undefined":n(e))||null===e||s(e)||e.toString&&"[object Object]"!==e.toString())return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var a=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&Function.prototype.toString.call(a)===Function.prototype.toString.call(Object)},r=(t.findKey=function(e,t){if(o(e)||s(e))return Object.keys(e).find((function(a){return t(e[a])}))},t.compact=function(e){return e.filter(Boolean)},function e(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.reduce((function(t,n){return s(n)&&a?t.concat(e(n,!1)):(t.push(n),t)}),[])});t.flatten=function(e){if(!s(e))throw new Error("flatten expects an array");return r(e)},t.map=function(e,t){if(s(e))return e.map(t);for(var a=[],n=Object.keys(e),o=n.length,r=0;r<o;r+=1){var i=n[r];a.push(t(e[i],i))}return a}},function(e,t,a){"use strict";e.exports=a(305)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=c(a(16)),o=c(a(94)),r=c(a(306)),i=c(a(79)),l=c(a(203));function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,a,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,i=Array(s),c=0;c<s;c++)i[c]=arguments[c];return a=n=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),n._combokeys=null,n._lastEvent=null,n._bindShortcuts=function(e){var t=n._getElementToBind();t.setAttribute("tabindex",n.props.tabIndex),n._combokeys=new r.default(t,{storeInstancesGlobally:!1}),n._decorateCombokeys(),n._combokeys.bind(e,n._handleShortcuts,n.props.eventType),n.props.global&&t.addEventListener("shortcuts:global",n._customGlobalHandler)},n._customGlobalHandler=function(e){var t=e.detail,a=t.character,s=t.modifiers,o=t.event,r=null;n.props.targetNodeSelector&&(r=document.querySelector(n.props.targetNodeSelector)),e.target!==n._domNode&&e.target!==r&&n._combokeys.handleKey(a,s,o,!0)},n._decorateCombokeys=function(){var e=n._getElementToBind(),t=n._combokeys.handleKey.bind(n._combokeys);n._combokeys.stopCallback=function(e,t,a){var s,o="INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.contentEditable&&"true"===t.contentEditable;return s=e.key?1===e.key.length:Boolean(l.default.getCharacter(e)),!(!o||!s||n.props.alwaysFireHandler)},n._combokeys.handleKey=function(a,s,o,r){if(!n._lastEvent||o.timeStamp!==n._lastEvent.timeStamp||o.type!==n._lastEvent.type){n._lastEvent=o;var i=!1;if(n.props.isolate&&!o.__isolateShortcuts&&(o.__isolateShortcuts=!0,i=!0),r||e.dispatchEvent(new CustomEvent("shortcuts:global",{detail:{character:a,modifiers:s,event:o},bubbles:!0,cancelable:!0})),!o.__isolateShortcuts)return n.props.preventDefault&&o.preventDefault(),n.props.stopPropagation&&!r&&o.stopPropagation(),void t(a,s,o);(n.props.global||i)&&t(a,s,o)}}},n._getElementToBind=function(){var e=null;return n.props.targetNodeSelector?(e=document.querySelector(n.props.targetNodeSelector),(0,o.default)(e,"Node selector '"+n.props.targetNodeSelector+"'  was not found.")):e=n._domNode,e},n._unbindShortcuts=function(){n._combokeys&&(n._combokeys.detach(),n._combokeys.reset())},n._onUpdate=function(){var e=n.props.name&&n.context.shortcuts.getShortcuts(n.props.name);n._unbindShortcuts(),n._bindShortcuts(e||[])},n._handleShortcuts=function(e,t){if(n.props.name){var a=n.context.shortcuts.findShortcutName(t,n.props.name);n.props.handler&&n.props.handler(a,e)}},u(n,a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this._onUpdate(),this.props.name&&this.context.shortcuts.addUpdateListener(this._onUpdate)}},{key:"componentWillUnmount",value:function(){this._unbindShortcuts(),this.props.name&&this.context.shortcuts.removeUpdateListener(this._onUpdate),this.props.global&&this._getElementToBind().removeEventListener("shortcuts:global",this._customGlobalHandler)}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{ref:function(t){e._domNode=t},tabIndex:this.props.tabIndex,className:this.props.className},this.props.children)}}]),t}(s.default.Component);d.displayName="Shortcuts",d.contextTypes={shortcuts:i.default.object.isRequired},d.propTypes={children:i.default.node,handler:i.default.func,name:i.default.string,tabIndex:i.default.number,className:i.default.string,eventType:i.default.string,stopPropagation:i.default.bool,preventDefault:i.default.bool,targetNodeSelector:i.default.string,global:i.default.bool,isolate:i.default.bool,alwaysFireHandler:i.default.bool},d.defaultProps={tabIndex:-1,className:null,eventType:null,stopPropagation:!0,preventDefault:!1,targetNodeSelector:null,global:!1,isolate:!1,alwaysFireHandler:!1},t.default=d,e.exports=t.default},function(e,t,a){"use strict";e.exports=function(e,t){var a=this,n=a.constructor;return a.options=Object.assign({storeInstancesGlobally:!0},t||{}),a.callbacks={},a.directMap={},a.sequenceLevels={},a.resetTimer=null,a.ignoreNextKeyup=!1,a.ignoreNextKeypress=!1,a.nextExpectedAction=!1,a.element=e,a.addEvents(),a.options.storeInstancesGlobally&&n.instances.push(a),a},e.exports.prototype.bind=a(307),e.exports.prototype.bindMultiple=a(308),e.exports.prototype.unbind=a(309),e.exports.prototype.trigger=a(310),e.exports.prototype.reset=a(311),e.exports.prototype.stopCallback=a(312),e.exports.prototype.handleKey=a(313),e.exports.prototype.addEvents=a(314),e.exports.prototype.bindSingle=a(318),e.exports.prototype.getKeyInfo=a(319),e.exports.prototype.pickBestAction=a(323),e.exports.prototype.getReverseMap=a(324),e.exports.prototype.getMatches=a(325),e.exports.prototype.resetSequences=a(327),e.exports.prototype.fireCallback=a(328),e.exports.prototype.bindSequence=a(331),e.exports.prototype.resetSequenceTimer=a(332),e.exports.prototype.detach=a(333),e.exports.instances=[],e.exports.reset=a(334),e.exports.REVERSE_MAP=null},function(e,t,a){"use strict";e.exports=function(e,t,a){return e=e instanceof Array?e:[e],this.bindMultiple(e,t,a),this}},function(e,t,a){"use strict";e.exports=function(e,t,a){for(var n=0;n<e.length;++n)this.bindSingle(e[n],t,a)}},function(e,t,a){"use strict";e.exports=function(e,t){return this.bind(e,(function(){}),t)}},function(e,t,a){"use strict";e.exports=function(e,t){return this.directMap[e+":"+t]&&this.directMap[e+":"+t]({},e),this}},function(e,t,a){"use strict";e.exports=function(){return this.callbacks={},this.directMap={},this}},function(e,t,a){"use strict";e.exports=function(e,t){if((" "+t.className+" ").indexOf(" combokeys ")>-1)return!1;var a=t.tagName.toLowerCase();return"input"===a||"select"===a||"textarea"===a||t.isContentEditable}},function(e,t,a){"use strict";e.exports=function(e,t,n){var s,o,r,i,l=this,c={},u=0,d=!1;for(s=l.getMatches(e,t,n),o=0;o<s.length;++o)s[o].seq&&(u=Math.max(u,s[o].level));for(o=0;o<s.length;++o)if(s[o].seq){if(s[o].level!==u)continue;d=!0,c[s[o].seq]=1,l.fireCallback(s[o].callback,n,s[o].combo,s[o].seq)}else d||l.fireCallback(s[o].callback,n,s[o].combo);i="keypress"===n.type&&l.ignoreNextKeypress,r=a(151),n.type!==l.nextExpectedAction||r(e)||i||l.resetSequences(c),l.ignoreNextKeypress=d&&"keydown"===n.type}},function(e,t,a){"use strict";e.exports=function(){var e=this,t=a(204),n=e.element;e.eventHandler=a(315).bind(e),t(n,"keypress",e.eventHandler),t(n,"keydown",e.eventHandler),t(n,"keyup",e.eventHandler)}},function(e,t,a){"use strict";e.exports=function(e){var t,n=this;"number"!=typeof e.which&&(e.which=e.keyCode);var s=a(205)(e);void 0!==s&&("keyup"!==e.type||n.ignoreNextKeyup!==s?(t=a(317),n.handleKey(s,t(e),e)):n.ignoreNextKeyup=!1)}},function(e,t,a){"use strict";e.exports={106:"*",107:"plus",109:"minus",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},function(e,t,a){"use strict";e.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},function(e,t,a){"use strict";e.exports=function(e,t,a,n,s){var o=this;o.directMap[e+":"+a]=t;var r,i=(e=e.replace(/\s+/g," ")).split(" ");i.length>1?o.bindSequence(e,i,t,a):(r=o.getKeyInfo(e,a),o.callbacks[r.key]=o.callbacks[r.key]||[],o.getMatches(r.key,r.modifiers,{type:r.action},n,e,s),o.callbacks[r.key][n?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:n,level:s,combo:e}))}},function(e,t,a){"use strict";e.exports=function(e,t){var n,s,o,r,i,l,c=[];for(n=a(320)(e),r=a(321),i=a(322),l=a(151),o=0;o<n.length;++o)r[s=n[o]]&&(s=r[s]),t&&"keypress"!==t&&i[s]&&(s=i[s],c.push("shift")),l(s)&&c.push(s);return{key:s,modifiers:c,action:t=this.pickBestAction(s,c,t)}}},function(e,t,a){"use strict";e.exports=function(e){return"+"===e?["+"]:e.split("+")}},function(e,t,a){"use strict";e.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},function(e,t,a){"use strict";e.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},function(e,t,a){"use strict";e.exports=function(e,t,a){return a||(a=this.getReverseMap()[e]?"keydown":"keypress"),"keypress"===a&&t.length&&(a="keydown"),a}},function(e,t,a){"use strict";e.exports=function(){var e,t=this.constructor;if(!t.REVERSE_MAP)for(var n in t.REVERSE_MAP={},e=a(206))n>95&&n<112||e.hasOwnProperty(n)&&(t.REVERSE_MAP[e[n]]=n);return t.REVERSE_MAP}},function(e,t,a){"use strict";e.exports=function(e,t,n,s,o,r){var i,l,c,u,d=this,p=[],b=n.type;if("keypress"!==b||n.code&&"Arrow"===n.code.slice(0,5)||(d.callbacks["any-character"]||[]).forEach((function(e){p.push(e)})),!d.callbacks[e])return p;for(c=a(151),"keyup"===b&&c(e)&&(t=[e]),i=0;i<d.callbacks[e].length;++i)if(l=d.callbacks[e][i],(s||!l.seq||d.sequenceLevels[l.seq]===l.level)&&b===l.action&&(u=a(326),"keypress"===b&&!n.metaKey&&!n.ctrlKey||u(t,l.modifiers))){var g=!s&&l.combo===o,m=s&&l.seq===s&&l.level===r;(g||m)&&d.callbacks[e].splice(i,1),p.push(l)}return p}},function(e,t,a){"use strict";e.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},function(e,t,a){"use strict";e.exports=function(e){var t=this;e=e||{};var a,n=!1;for(a in t.sequenceLevels)e[a]?n=!0:t.sequenceLevels[a]=0;n||(t.nextExpectedAction=!1)}},function(e,t,a){"use strict";e.exports=function(e,t,n,s){this.stopCallback(t,t.target||t.srcElement,n,s)||!1===e(t,n)&&(a(329)(t),a(330)(t))}},function(e,t,a){"use strict";e.exports=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}},function(e,t,a){"use strict";e.exports=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},function(e,t,a){"use strict";e.exports=function(e,t,n,s){var o=this;function r(t){return function(){o.nextExpectedAction=t,++o.sequenceLevels[e],o.resetSequenceTimer()}}function i(t){var r;o.fireCallback(n,t,e),"keyup"!==s&&(r=a(205),o.ignoreNextKeyup=r(t)),setTimeout((function(){o.resetSequences()}),10)}o.sequenceLevels[e]=0;for(var l=0;l<t.length;++l){var c=l+1===t.length?i:r(s||o.getKeyInfo(t[l+1]).action);o.bindSingle(t[l],c,s,e,l)}}},function(e,t,a){"use strict";e.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout((function(){e.resetSequences()}),1e3)}},function(e,t,a){var n=a(204).off;e.exports=function(){var e=this,t=e.element;n(t,"keypress",e.eventHandler),n(t,"keydown",e.eventHandler),n(t,"keyup",e.eventHandler)}},function(e,t,a){"use strict";e.exports=function(){this.instances.forEach((function(e){e.reset()}))}},function(e,t,a){"use strict";const n=a(336),s=a(337),o=a(338);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function l(e,t){return t.decode?s(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function b(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=a):n[e]=a};case"bracket":return(e,a,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=[a]:n[e]=a};case"comma":case"separator":return(t,a,n)=>{const s="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);n[t]=s};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const s of e.split("&")){let[e,r]=o(t.decode?s.replace(/\+/g," "):s,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),a(l(e,t),r,n)}for(const e of Object.keys(n)){const a=n[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=p(a[e],t);else n[e]=p(a,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const a=n[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=d,t.parse=b,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],n=function(e){switch(e.arrayFormat){case"index":return t=>(a,n)=>{const s=a.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[i(t,e),"[",s,"]"].join("")]:[...a,[i(t,e),"[",i(s,e),"]=",i(n,e)].join("")]};case"bracket":return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[i(t,e),"[]"].join("")]:[...a,[i(t,e),"[]=",i(n,e)].join("")];case"comma":case"separator":return t=>(a,n)=>null==n||0===n.length?a:0===a.length?[[i(t,e),"=",i(n,e)].join("")]:[[a,i(n,e)].join(e.arrayFormatSeparator)];default:return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,i(t,e)]:[...a,[i(t,e),"=",i(n,e)].join("")]}}(t),s={};for(const t of Object.keys(e))a(t)||(s[t]=e[t]);const o=Object.keys(s);return!1!==t.sort&&o.sort(t.sort),o.map((a=>{const s=e[a];return void 0===s?"":null===s?i(a,t):Array.isArray(s)?s.reduce(n(a),[]).join("&"):i(a,t)+"="+i(s,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,n]=o(e,"#");return Object.assign({url:a.split("?")[0]||"",query:b(d(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:l(n,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const n=u(e.url).split("?")[0]||"",s=t.extract(e.url),o=t.parse(s,{sort:!1}),r=Object.assign(o,e.query);let l=t.stringify(r,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${i(e.fragmentIdentifier,a)}`),`${n}${l}${c}`}},function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,a){"use strict";var n="%[a-f0-9]{2}",s=new RegExp("("+n+")|([^%]+?)","gi"),o=new RegExp("("+n+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],r(a),r(n))}function i(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(s)||[],a=1;a<t.length;a++)t=(e=r(t,a).join("")).match(s)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},a=o.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=i(a[0]);n!==a[0]&&(t[a[0]]=n)}a=o.exec(e)}t["%C2"]="�";for(var s=Object.keys(t),r=0;r<s.length;r++){var l=s[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(340);case"v8light":return a(342)}},function(e,t,a){var n=a(87),s=a(341);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){var n=a(88),s=a(207),o=a(208);t=n(!1);var r=s(o);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125)}.kbnSolutionAvatar--xxl{background:#1d1e24 url("+r+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},function(e,t,a){var n=a(87),s=a(343);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){var n=a(88),s=a(207),o=a(208);t=n(!1);var r=s(o);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d}.kbnSolutionAvatar--xxl{background:#fff url("+r+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},function(e,t,a){e.exports=a.p+"baad30acfe492601d08a0e839c9bb3f5.svg"},function(e,t,a){"use strict";e.exports=a(346)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(347);a(31),a(209),a(210);var s=n.default({key:"css"}),o=s.flush,r=s.hydrate,i=s.cx,l=s.merge,c=s.getRegisteredStyles,u=s.injectGlobal,d=s.keyframes,p=s.css,b=s.sheet,g=s.cache;t.cache=g,t.css=p,t.cx=i,t.flush=o,t.getRegisteredStyles=c,t.hydrate=r,t.injectGlobal=u,t.keyframes=d,t.merge=l,t.sheet=b},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(31),s=a(209),o=a(210);function r(e){return e&&e.__esModule?e:{default:e}}var i=r(n);function l(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function c(e,t,a){var n=[],s=o.getRegisteredStyles(e,n,a);return n.length<2?a:s+t(n)}var u=function e(t){for(var a="",n=0;n<t.length;n++){var s=t[n];if(null!=s){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=e(s);else for(var r in o="",s)s[r]&&r&&(o&&(o+=" "),o+=r);break;default:o=s}o&&(a&&(a+=" "),a+=o)}}return a};t.default=function(e){var t=i.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var a=function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var r=s.serializeStyles(a,t.registered,void 0);return o.insertStyles(t,r,!1),t.key+"-"+r.name};return{css:a,cx:function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return c(t.registered,a,u(n))},injectGlobal:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var o=s.serializeStyles(a,t.registered);l(t,o)},keyframes:function(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];var o=s.serializeStyles(a,t.registered),r="animation-"+o.name;return l(t,{name:o.name,styles:"@keyframes "+r+"{"+o.styles+"}"}),r},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:o.getRegisteredStyles.bind(null,t.registered),merge:c.bind(null,t.registered,a)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(349),s=a(351),o=a(353);function r(e){return e&&e.__esModule?e:{default:e}}var i=r(n),l=r(s),c=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},p=function(e){return null!=e&&"boolean"!=typeof e},b=r(o).default((function(e){return d(e)?e:e.replace(c,"-$&").toLowerCase()})),g=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,a){return h={name:t,styles:a,next:h},t}))}return 1===l.default[e]||d(e)||"number"!=typeof t||0===t?t:t+"px"};function m(e,t,a){if(null==a)return"";if(void 0!==a.__emotion_styles)return a;switch(typeof a){case"boolean":return"";case"object":if(1===a.anim)return h={name:a.name,styles:a.styles,next:h},a.name;if(void 0!==a.styles){var n=a.next;if(void 0!==n)for(;void 0!==n;)h={name:n.name,styles:n.styles,next:h},n=n.next;return a.styles+";"}return function(e,t,a){var n="";if(Array.isArray(a))for(var s=0;s<a.length;s++)n+=m(e,t,a[s])+";";else for(var o in a){var r=a[o];if("object"!=typeof r)null!=t&&void 0!==t[r]?n+=o+"{"+t[r]+"}":p(r)&&(n+=b(o)+":"+g(o,r)+";");else if(!Array.isArray(r)||"string"!=typeof r[0]||null!=t&&void 0!==t[r[0]]){var i=m(e,t,r);switch(o){case"animation":case"animationName":n+=b(o)+":"+i+";";break;default:n+=o+"{"+i+"}"}}else for(var l=0;l<r.length;l++)p(r[l])&&(n+=b(o)+":"+g(o,r[l])+";")}return n}(e,t,a);case"function":if(void 0!==e){var s=h,o=a(e);return h=s,m(e,t,o)}}if(null==t)return a;var r=t[a];return void 0!==r?r:a}var h,f=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,a){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,s="";h=void 0;var o=e[0];null==o||void 0===o.raw?(n=!1,s+=m(a,t,o)):s+=o[0];for(var r=1;r<e.length;r++)s+=m(a,t,e[r]),n&&(s+=o[r]);f.lastIndex=0;for(var l,c="";null!==(l=f.exec(s));)c+="-"+l[1];return{name:i.default(s)+c,styles:s,next:h}}},function(e,t,a){"use strict";e.exports=a(350)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,a=0,n=0,s=e.length;s>=4;++n,s-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),a=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&a)+(59797*(a>>>16)<<16);switch(s){case 3:a^=(255&e.charCodeAt(n+2))<<16;case 2:a^=(255&e.charCodeAt(n+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(n)))+(59797*(a>>>16)<<16)}return(((a=1540483477*(65535&(a^=a>>>13))+(59797*(a>>>16)<<16))^a>>>15)>>>0).toString(36)}},function(e,t,a){"use strict";e.exports=a(352)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,a){"use strict";e.exports=a(354)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(a){return void 0===t[a]&&(t[a]=e(a)),t[a]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof document,s=function(e,t,a){var s=e.key+"-"+t.name;(!1===a||!1===n&&void 0!==e.compat)&&void 0===e.registered[s]&&(e.registered[s]=t.styles)};t.getRegisteredStyles=function(e,t,a){var n="";return a.split(" ").forEach((function(a){void 0!==e[a]?t.push(e[a]+";"):n+=a+" "})),n},t.insertStyles=function(e,t,a){s(e,t,a);var o=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var r="",i=t;do{var l=e.insert(t===i?"."+o:"",i,e.sheet,!0);n||void 0===l||(r+=l),i=i.next}while(void 0!==i);if(!n&&0!==r.length)return r}},t.registerStyles=s},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(357);case"v8light":return a(359)}},function(e,t,a){var n=a(87),s=a(358);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(88)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#141519}.kbnSolutionNav__flyout .kbnSolutionNav{flex:auto}.kbnSolutionNav{display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px)and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},function(e,t,a){var n=a(87),s=a(360);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(88)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#fafbfd}.kbnSolutionNav__flyout .kbnSolutionNav{flex:auto}.kbnSolutionNav{display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px)and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(362);case"v8light":return a(364)}},function(e,t,a){var n=a(87),s=a(363);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(88)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#1d1e24!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},function(e,t,a){var n=a(87),s=a(365);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(88)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#fff!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(30),s=a(367),o=n.__importDefault(a(369));t.default=function(e,t){o.default(e,t,s.isDeepEqual)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(30).__importDefault(a(368));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,s,o;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(s=n;0!=s--;)if(!e(t[s],a[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(s=n;0!=s--;)if(!Object.prototype.hasOwnProperty.call(a,o[s]))return!1;for(s=n;0!=s--;){var r=o[s];if(!("_owner"===r&&t.$$typeof||e(t[r],a[r])))return!1}return!0}return t!=t&&a!=a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(16);t.default=function(e,t,a){var s=n.useRef(void 0);s.current&&a(t,s.current)||(s.current=t),n.useEffect(e,s.current)}},,function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){e.exports=a(12)(1784)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,a){e.exports=a(12)(3086)},function(e,t,a){var n,s=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function s(e,t){if(!n[e]){n[e]={};for(var a=0;a<e.length;a++)n[e][e.charAt(a)]=a}return n[e][t]}var o={compressToBase64:function(e){if(null==e)return"";var a=o._compress(e,6,(function(e){return t.charAt(e)}));switch(a.length%4){default:case 0:return a;case 1:return a+"===";case 2:return a+"==";case 3:return a+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:o._decompress(e.length,32,(function(a){return s(t,e.charAt(a))}))},compressToUTF16:function(t){return null==t?"":o._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=o.compress(e),a=new Uint8Array(2*t.length),n=0,s=t.length;n<s;n++){var r=t.charCodeAt(n);a[2*n]=r>>>8,a[2*n+1]=r%256}return a},decompressFromUint8Array:function(t){if(null==t)return o.decompress(t);for(var a=new Array(t.length/2),n=0,s=a.length;n<s;n++)a[n]=256*t[2*n]+t[2*n+1];var r=[];return a.forEach((function(t){r.push(e(t))})),o.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,(function(e){return a.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),o._decompress(e.length,32,(function(t){return s(a,e.charAt(t))})))},compress:function(t){return o._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,a){if(null==e)return"";var n,s,o,r={},i={},l="",c="",u="",d=2,p=3,b=2,g=[],m=0,h=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(r,l)||(r[l]=p++,i[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(r,c))u=c;else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(n=0;n<b;n++)m<<=1,h==t-1?(h=0,g.push(a(m)),m=0):h++;for(s=u.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1}else{for(s=1,n=0;n<b;n++)m=m<<1|s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s=0;for(s=u.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1}0==--d&&(d=Math.pow(2,b),b++),delete i[u]}else for(s=r[u],n=0;n<b;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1;0==--d&&(d=Math.pow(2,b),b++),r[c]=p++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(n=0;n<b;n++)m<<=1,h==t-1?(h=0,g.push(a(m)),m=0):h++;for(s=u.charCodeAt(0),n=0;n<8;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1}else{for(s=1,n=0;n<b;n++)m=m<<1|s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s=0;for(s=u.charCodeAt(0),n=0;n<16;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1}0==--d&&(d=Math.pow(2,b),b++),delete i[u]}else for(s=r[u],n=0;n<b;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1;0==--d&&(d=Math.pow(2,b),b++)}for(s=2,n=0;n<b;n++)m=m<<1|1&s,h==t-1?(h=0,g.push(a(m)),m=0):h++,s>>=1;for(;;){if(m<<=1,h==t-1){g.push(a(m));break}h++}return g.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,a,n){var s,o,r,i,l,c,u,d=[],p=4,b=4,g=3,m="",h=[],f={val:n(0),position:a,index:1};for(s=0;s<3;s+=1)d[s]=s;for(r=0,l=Math.pow(2,2),c=1;c!=l;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=a,f.val=n(f.index++)),r|=(i>0?1:0)*c,c<<=1;switch(r){case 0:for(r=0,l=Math.pow(2,8),c=1;c!=l;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=a,f.val=n(f.index++)),r|=(i>0?1:0)*c,c<<=1;u=e(r);break;case 1:for(r=0,l=Math.pow(2,16),c=1;c!=l;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=a,f.val=n(f.index++)),r|=(i>0?1:0)*c,c<<=1;u=e(r);break;case 2:return""}for(d[3]=u,o=u,h.push(u);;){if(f.index>t)return"";for(r=0,l=Math.pow(2,g),c=1;c!=l;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=a,f.val=n(f.index++)),r|=(i>0?1:0)*c,c<<=1;switch(u=r){case 0:for(r=0,l=Math.pow(2,8),c=1;c!=l;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=a,f.val=n(f.index++)),r|=(i>0?1:0)*c,c<<=1;d[b++]=e(r),u=b-1,p--;break;case 1:for(r=0,l=Math.pow(2,16),c=1;c!=l;)i=f.val&f.position,f.position>>=1,0==f.position&&(f.position=a,f.val=n(f.index++)),r|=(i>0?1:0)*c,c<<=1;d[b++]=e(r),u=b-1,p--;break;case 2:return h.join("")}if(0==p&&(p=Math.pow(2,g),g++),d[u])m=d[u];else{if(u!==b)return null;m=o+o.charAt(0)}h.push(m),d[b++]=o+m.charAt(0),o=m,0==--p&&(p=Math.pow(2,g),g++)}}};return o}();void 0===(n=function(){return s}.call(t,a,t,e))||(e.exports=n)},function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(377);case"v8light":return a(379)}},function(e,t,a){var n=a(87),s=a(378);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(88)(!1)).push([e.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover,.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreenWrapper{min-width:100px}@media only screen and (min-width:768px)and (max-width:991px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:992px)and (max-width:1199px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:1200px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}.canvas.canvasContainer,.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{background-color:#141519;flex-direction:column}.canvasContainer--loading{left:50%;position:fixed;text-align:center;top:50%;transform:translateY(-50%)}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg,#343741 25%,#0000 0),linear-gradient(-45deg,#343741 25%,#0000 0),linear-gradient(45deg,#0000 75%,#343741 0),linear-gradient(-45deg,#0000 75%,#343741 0);background-size:8px 8px;position:relative}.canvasTextArea__code{font-family:Roboto Mono,Menlo,Courier,monospace;font-size:14px;max-width:100%;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:100%}.canvasTextArea__code::-webkit-scrollbar{height:16px;width:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:#0000}.canvasContextMenu--topBorder{border-top:1px solid #343741}#canvas-app{overflow-y:hidden}#canvas-app .window-error{background-color:#f86b63;bottom:10px;color:#fff;display:block;max-width:500px;padding:10px;position:absolute;right:10px;z-index:2000}#canvas-app .window-error a{color:#fff;font-weight:700}.canvasHomeApp,.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalBody,.canvasHomeApp .canvasHomeApp__modalHeader{width:auto}@media only screen and (max-width:574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width:575px)and (max-width:767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{background:#141519;display:flex;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{align-items:stretch;display:flex;flex-grow:1}.canvasLayout__stage{display:flex;flex-basis:auto;flex-direction:column;flex-grow:1}.canvasLayout__stageHeader{background:#25262e;border-bottom:1px solid #343741;flex-basis:auto;flex-grow:0;font-size:14px;padding:8px 16px;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-basis:auto;flex-grow:1;position:relative}.canvasLayout__stageContentOverflow{align-items:center;bottom:0;display:flex;left:0;overflow:scroll;position:absolute;right:0;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;top:0}.canvasLayout__stageContentOverflow::-webkit-scrollbar{height:16px;width:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:#0000}.canvasLayout__sidebar{background:#25262e;border-left:1px solid #343741;display:flex;flex-basis:auto;flex-grow:0;position:relative;width:350px}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{background-color:#141519;flex-basis:auto;flex-grow:0;font-size:14px;width:100%;z-index:6000}.canvasExport .canvasPage{box-shadow:none;overflow:hidden;position:relative}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #343741}.canvasArg__add:hover{background-color:#25262e}.canvasArg__add:hover label{color:#d4dae5}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{max-height:500px;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:250px}.canvasArg__addPopover::-webkit-scrollbar{height:16px;width:16px}.canvasArg__addPopover::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasArg__addPopover::-webkit-scrollbar-corner,.canvasArg__addPopover::-webkit-scrollbar-track{background-color:#0000}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:6px}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}@media only screen and (min-width:575px)and (max-width:767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}.canvasAssetManager .canvasAssetManager__meterWrapper{align-items:center;flex-grow:0;min-width:40%}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width:575px)and (max-width:767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{margin:32px auto 0;max-width:400px}.canvasAsset{overflow:hidden;text-align:center}.canvasAsset .canvasAsset__thumb{font-size:0;height:164px;margin:-8px -8px 0}.canvasAsset .canvasAsset__img{align-items:center;display:flex;height:100%;justify-content:center}.canvasAsset .canvasAsset__img img{max-height:164px;max-width:100%;width:auto}.canvasAssetPicker{max-height:120px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.canvasAssetPicker::-webkit-scrollbar{height:16px;width:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:#0000}.canvasAssetPicker .canvasAssetPicker__link{height:100%;position:relative;text-align:center;width:100%}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:4px solid #36a2ef1a}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;right:4px;top:4px}.canvasAssetPicker .euiImage{height:40px;width:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;height:32px;position:relative;width:32px}.canvasColorDot .canvasColorDot__background{border-radius:6px;height:32px;left:0;position:absolute;top:0;width:32px}.canvasColorDot .canvasColorDot__foreground{align-items:center;border:1px solid #343741;border-radius:6px;display:flex;height:32px;justify-content:center;left:0;position:absolute;top:0;width:32px}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#98a2b3}.canvasDataSource{background-color:#1d1e24;border-radius:1px solid #343741;color:#dfe5ef;margin:8px;padding:0 8px}.canvasDataSource__list,.canvasDataSource__section{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#dfe5ef;font-size:16px;font-size:1.1428571429rem;font-weight:700;line-height:1.7142857143rem;line-height:40px;overflow-wrap:break-word!important;word-break:break-word}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0!important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#7dded8}.canvasDatasourcePreview{height:100%;max-height:60vh;max-width:1000px}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 48px)}.canvasDataTable{display:flex;flex-direction:column;height:100%;justify-content:space-between;width:100%}.canvasDataTable .canvasDataTable__tableWrapper{height:100%;overflow:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;width:100%}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{height:16px;width:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:#0000}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:#0000}.canvasDataTable .canvasDataTable__footer{border-top:1px solid #343741;display:flex;justify-content:space-around;padding:8px;width:100%}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__td,.canvasDataTable .canvasDataTable__th{border-bottom:1px solid #343741;padding:8px 4px}.canvasDataTable .canvasDataTable__th{font-weight:700;white-space:nowrap}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:focus .canvasElementCard__controls,.canvasElementCard__wrapper:hover .canvasElementCard__controls{opacity:1;visibility:visible}.canvasElementCard__wrapper .canvasElementCard__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}.canvasElementCard .euiCard__top{height:85px;margin:-16px -16px 0;text-align:center;width:calc(100% + 32px)}.canvasElementCard .euiCard__image{left:0;max-height:100%;max-width:100%;top:0;width:auto}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{overflow:hidden}.canvasElement,.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{flex-grow:1;height:256px;padding-top:16px}.canvasExpression--fullSize{bottom:0;display:flex;flex-direction:column;left:0;position:fixed;right:0;top:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{display:flex;flex-direction:column;flex-grow:1}.canvasExpression--fullSize .canvasExpressionInput__editor{bottom:57px;height:auto;left:0;position:absolute;right:0;top:0}.canvasExpression--fullSize .canvasExpressionInput__inner{display:flex;flex-grow:1}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{background-color:#1d1e24;border-top:1px solid #343741;padding:12px 16px}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0!important}body.canvas-isFullscreen #globalBannerList,body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasGrid,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__stageHeader{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{bottom:auto;display:block;left:auto;overflow:visible;position:static;right:auto;top:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{margin:0;padding:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__cols,body.canvas-isFullscreen .canvasLayout__rows{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{background:none;display:flex}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{font-size:20px;text-align:center}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{border-left:1px dashed #343741;border-top:1px dashed #343741;height:100%;pointer-events:none;position:absolute;top:0;width:100%}.canvasBorderResizeHandle{background-color:#1d1e24;border:1px solid #98a2b3;box-shadow:0 .8px .8px #0000001a,0 2.3px 2px rgba(0,0,0,.075);display:block;height:8px;margin-left:-4px;margin-top:-4px;width:8px}.canvasBorderResizeHandle,.canvasDragBoxAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasDragBoxAnnotation{background:none;outline:1px dashed #98a2b3;pointer-events:none}.canvasHoverAnnotation{background:none;outline:1px solid #54b399;pointer-events:none}.canvasHoverAnnotation,.canvasRotationHandle{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasRotationHandle{border-left:1px dashed #343741;border-top:1px dashed #343741;display:block;height:24px;margin-left:-1px;margin-top:-12px;width:0}.canvasRotationHandle__handle{background-color:#535966;border-radius:50%;display:block;height:9px;margin-left:-5px;margin-top:-6px;width:9px}.canvasRotationHandle__handle,.tooltipAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.tooltipAnnotation{background-color:#000;border-radius:6px;box-shadow:0 1px 5px #00000040,0 3.6px 13px rgba(0,0,0,.175),0 8.4px 23px #00000026,0 23px 35px rgba(0,0,0,.125);color:#fff;max-width:256px;outline:none;overflow-wrap:break-word;padding:8px;pointer-events:none;z-index:9000}.tooltipAnnotation .euiHorizontalRule{background-color:#333}.canvasLoading{align-items:center;color:#343741;display:flex}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__addPage,.canvasPageManager .canvasPageManager__pages{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;opacity:0}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{bottom:0;display:flex;left:0;overflow-x:auto;overflow-y:hidden;position:absolute;right:0;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;top:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{height:16px;width:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:#0000}.canvasPageManager .canvasPageManager__addPage{animation:buttonPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;background:#7dded8;color:#fff;opacity:0;width:56px}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page-isActive,.canvasPageManager .canvasPageManager__page:focus{background-color:#00000080;outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54b399}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page:hover{text-decoration:none}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls{opacity:1;visibility:visible}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;outline:2px solid #343741;outline-color:#98a2b3}.canvasPageManager .canvasPageManager__pageNumber{color:#98a2b3}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125);color:#dfe5ef;overflow:hidden;position:relative}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{height:40px;width:40px}.canvasShapePreview svg{height:100%;width:100%}.canvasShapePicker{width:192px}.canvasSidebar{bottom:0;max-height:100vh;overflow-x:hidden;overflow-y:auto;position:absolute;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;top:0;width:100%}.canvasSidebar::-webkit-scrollbar{height:16px;width:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:#0000}.canvasSidebar__pop{animation:sidebarPop .15s cubic-bezier(.694,.0482,.335,1)}.canvasSidebarFlyout{min-width:350px;width:350px}.canvasSidebar__elementButtons{background:#1a1a20;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #343741;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable{width:100%}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:1px}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{background:#25262e;margin:0 -12px;padding:12px;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:#0000}.canvasSidebar__accordion:after,.canvasSidebar__accordion:before{background:#343741;content:"";height:1px;left:0;position:absolute;width:100%}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordion.filtersSidebar__accordion{margin:auto}.canvasSidebar__accordionContent{padding-left:28px;padding-top:16px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}to{opacity:1}}.canvasLayout__sidebarHeader{padding:14px 8px}.canvasLayout__sidebarHeaderWorkpad{padding:6px 0}.canvasToolbar{position:relative}.canvasTray__toggle{background-color:#16171c;border-radius:6px 6px 0 0;left:50%;margin:0;position:absolute;top:-20px}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{box-shadow:0 -2px 1px #ffffff1a;padding:4px 12px}.canvasToolbar__home{height:100%;padding:12px 0 12px 24px}.canvasToolbar__controls{height:100%;padding:12px}.canvasToolbar__container{background-color:#1a1a20;height:64px;position:relative;width:100%;z-index:200}.canvasTray{box-shadow:0 0 .8px #00000026,0 0 2px #0000001a,0 0 5px #0000001a,0 0 17px rgba(0,0,0,.075);flex-direction:column}.canvasTray__panel{background-color:#16171c;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{margin:auto;padding:16px}.canvasGrid{background-image:linear-gradient(90deg,#535966 1px,#0000 0),linear-gradient(180deg,#535966 1px,#0000 0);background-size:50px 50px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{overflow-x:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{height:16px;width:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:#0000}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{background-color:#1d1e24;box-shadow:0 0 .8px #00000026,0 0 2px #0000001a,0 0 5px #0000001a,0 0 17px rgba(0,0,0,.075);position:absolute;top:0;transform-style:preserve-3d!important;z-index:auto}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{opacity:0;visibility:hidden}.canvasEditVar__typeOption{align-items:center;display:flex}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{position:relative;width:100%}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:#0000}.canvasVarConfig__list tbody tr td,.canvasVarConfig__list thead tr td,.canvasVarConfig__list thead tr th{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr:hover{background-color:#0000}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{align-content:stretch;display:flex;flex-direction:row;position:relative;width:calc(200% + 48px)}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{flex-shrink:0;height:100%;width:50%}.canvasVarConfig__listView{flex-shrink:0;width:50%}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{animation-name:"fadeIn"}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut{animation-name:"fadeOut"}@keyframes rotateIn{0%{opacity:0;transform:rotate(45deg);transform-origin:left bottom}to{opacity:1;transform:translateZ(0);transform-origin:left bottom}}.rotateIn{animation-name:"rotateIn"}@keyframes rotateOut{0%{opacity:1;transform-origin:left bottom}to{opacity:0;transform:rotate(-45deg);transform-origin:left bottom}}.rotateOut{animation-name:"rotateOut"}@keyframes slideIn{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}.slideIn{animation-name:"slideIn"}@keyframes slideOut{0%{transform:translateZ(0)}to{transform:translate3d(-100%,0,0);visibility:hidden}}.slideOut{animation-name:"slideOut"}@keyframes zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{animation-name:"zoomIn"}@keyframes zoomOut{0%{opacity:1}50%{opacity:0;transform:scale3d(.3,.3,.3)}to{opacity:0}}.zoomOut{animation-name:"zoomOut"}.canvasAdvancedFilter{font-size:inherit;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#1d1e24;border:1px solid #343741;border-radius:6px;font-family:monospace;font-size:inherit;line-height:19px;padding:4px 16px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{background-color:#1d1e24;border:1px solid #343741;border-radius:6px;font-size:inherit;padding:4px 8px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#25262e}.canvasDropdownFilter{position:relative}.canvasEmbeddable .embPanel{background:none;border-radius:0!important;outline:none!important}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#dfe5ef}.legendColorBox>div>div{border-radius:16px}.canvasArgImage .canvasArgImage--preview{border:1px solid #343741;max-height:100px;overflow:hidden}',""]),e.exports=t},function(e,t,a){var n=a(87),s=a(380);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);n(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},function(e,t,a){(t=a(88)(!1)).push([e.i,'.canvasContainerWrapper .euiAccordion__childWrapper{overflow-x:hidden}.canvasContainerWrapper .clickable{cursor:pointer}.canvasContainerWrapper .canvasPalettePicker__swatchesPopover,.canvasContainerWrapper .canvasPalettePicker__swatchesPopover .canvasPalettePicker__swatchesPopoverAnchor{display:block}.canvasContainerWrapper .euiImageFullScreenWrapper{min-width:100px}@media only screen and (min-width:768px)and (max-width:991px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:992px)and (max-width:1199px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}@media only screen and (min-width:1200px){.canvasModal--fixedSize{height:75vh;max-height:680px;width:75vw}}.canvas.canvasContainer,.canvas.canvasContainerWrapper{display:flex;flex-grow:1}.canvas.canvasContainer{background-color:#fafbfd;flex-direction:column}.canvasContainer--loading{left:50%;position:fixed;text-align:center;top:50%;transform:translateY(-50%)}.canvasCheckered{background-color:#fff;background-image:linear-gradient(45deg,#d3dae6 25%,#0000 0),linear-gradient(-45deg,#d3dae6 25%,#0000 0),linear-gradient(45deg,#0000 75%,#d3dae6 0),linear-gradient(-45deg,#0000 75%,#d3dae6 0);background-size:8px 8px;position:relative}.canvasTextArea__code{font-family:Roboto Mono,Menlo,Courier,monospace;font-size:14px;max-width:100%;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:100%}.canvasTextArea__code::-webkit-scrollbar{height:16px;width:16px}.canvasTextArea__code::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasTextArea__code::-webkit-scrollbar-corner,.canvasTextArea__code::-webkit-scrollbar-track{background-color:#0000}.canvasContextMenu--topBorder{border-top:1px solid #d3dae6}#canvas-app{overflow-y:hidden}#canvas-app .window-error{background-color:#bd271e;bottom:10px;color:#fff;display:block;max-width:500px;padding:10px;position:absolute;right:10px;z-index:2000}#canvas-app .window-error a{color:#fff;font-weight:700}.canvasHomeApp,.canvasHomeApp .canvasHomeApp__content{width:100%}.canvasHomeApp .canvasHomeApp__modalHeader{padding-right:24px}.canvasHomeApp .canvasHomeApp__modalBody,.canvasHomeApp .canvasHomeApp__modalHeader{width:auto}@media only screen and (max-width:574px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}@media only screen and (min-width:575px)and (max-width:767px){.canvasHomeApp .euiModalBody__overflow{max-height:80vh}}.canvasLayout{background:#fafbfd;display:flex;flex-grow:1;overflow:hidden}.canvasLayout__rows{display:flex;flex-direction:column;flex-grow:1;max-height:100vh;max-width:100%}.canvasLayout__cols{align-items:stretch;display:flex;flex-grow:1}.canvasLayout__stage{display:flex;flex-basis:auto;flex-direction:column;flex-grow:1}.canvasLayout__stageHeader{background:#f5f7fa;border-bottom:1px solid #d3dae6;flex-basis:auto;flex-grow:0;font-size:14px;padding:8px 16px;-webkit-user-select:none;user-select:none}.canvasLayout__stageHeaderInner{height:48px}.canvasLayout__stageContent{flex-basis:auto;flex-grow:1;position:relative}.canvasLayout__stageContentOverflow{align-items:center;bottom:0;display:flex;left:0;overflow:scroll;position:absolute;right:0;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;top:0}.canvasLayout__stageContentOverflow::-webkit-scrollbar{height:16px;width:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasLayout__stageContentOverflow::-webkit-scrollbar-corner,.canvasLayout__stageContentOverflow::-webkit-scrollbar-track{background-color:#0000}.canvasLayout__sidebar{background:#f5f7fa;border-left:1px solid #d3dae6;display:flex;flex-basis:auto;flex-grow:0;position:relative;width:350px}.canvasLayout__sidebar .euiPanel{margin-bottom:8px}.canvasLayout__sidebar .euiPanel.euiSplitPanel__inner{margin-bottom:0}.canvasLayout__footer{background-color:#fafbfd;flex-basis:auto;flex-grow:0;font-size:14px;width:100%;z-index:6000}.canvasExport .canvasPage{box-shadow:none;overflow:hidden;position:relative}.canvasArg__add{padding:12px;text-align:left;width:100%}.canvasArg__add:not(:last-child){border-bottom:1px solid #d3dae6}.canvasArg__add:hover{background-color:#f5f7fa}.canvasArg__add:hover label{color:#343741}.canvasArg__addArg{margin-right:-8px}.canvasArg__addPopover{max-height:500px;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:250px}.canvasArg__addPopover::-webkit-scrollbar{height:16px;width:16px}.canvasArg__addPopover::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasArg__addPopover::-webkit-scrollbar-corner,.canvasArg__addPopover::-webkit-scrollbar-track{background-color:#0000}.canvasArg{margin-top:8px}.canvasArg__remove{min-width:16px;padding:4px 0}.canvasArg__form{position:relative}.canvasArg__tooltip{margin-left:-32px}.canvasSidebar__accordion .canvasArg__form{position:static}.canvasArg__switch{padding-top:6px}.canvasAssetManager .canvasAssetManager__modalHeader{flex-wrap:wrap}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}@media only screen and (min-width:575px)and (max-width:767px){.canvasAssetManager .canvasAssetManager__modalHeaderTitle{padding-bottom:16px;width:100%}}.canvasAssetManager .canvasAssetManager__meterWrapper{align-items:center;flex-grow:0;min-width:40%}@media only screen and (max-width:574px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}@media only screen and (min-width:575px)and (max-width:767px){.canvasAssetManager .canvasAssetManager__meterWrapper{flex-grow:1}}.canvasAssetManager .canvasAssetManager__meterLabel{margin:0}.canvasAssetManager .canvasAssetManager__fileUploadWrapper{justify-content:flex-end;padding-right:16px}.canvasAssetManager .canvasAssetManager__modalFooter{justify-content:space-between}.canvasAssetManager .canvasAssetManager__emptyPanel{margin:32px auto 0;max-width:400px}.canvasAsset{overflow:hidden;text-align:center}.canvasAsset .canvasAsset__thumb{font-size:0;height:164px;margin:-8px -8px 0}.canvasAsset .canvasAsset__img{align-items:center;display:flex;height:100%;justify-content:center}.canvasAsset .canvasAsset__img img{max-height:164px;max-width:100%;width:auto}.canvasAssetPicker{max-height:120px;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.canvasAssetPicker::-webkit-scrollbar{height:16px;width:16px}.canvasAssetPicker::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasAssetPicker::-webkit-scrollbar-corner,.canvasAssetPicker::-webkit-scrollbar-track{background-color:#0000}.canvasAssetPicker .canvasAssetPicker__link{height:100%;position:relative;text-align:center;width:100%}.canvasAssetPicker .canvasAssetPicker__link:hover{outline:4px solid #0077cc1a}.canvasAssetPicker .canvasAssetPicker__selected{position:absolute;right:4px;top:4px}.canvasAssetPicker .euiImage{height:40px;width:40px}.canvasClipboard{cursor:pointer}.canvasColorDot{display:inline-block;height:32px;position:relative;width:32px}.canvasColorDot .canvasColorDot__background{border-radius:6px;height:32px;left:0;position:absolute;top:0;width:32px}.canvasColorDot .canvasColorDot__foreground{align-items:center;border:1px solid #d3dae6;border-radius:6px;display:flex;height:32px;justify-content:center;left:0;position:absolute;top:0;width:32px}.canvasColorPalette .canvasColorPalette__dot{display:inline-block;margin:0 4px 4px 0}.canvasColorPickerPopover__popover{width:256px}.canvasCustomElementForm{min-width:400px}.canvasCustomElementForm__preview{max-width:210px;min-height:210px}.canvasCustomElementForm__thumbnail{padding-bottom:0}.canvasCustomElementForm__thumbnailHelp{color:#69707d}.canvasDataSource{background-color:#fff;border-radius:1px solid #d3dae6;color:#343741;margin:8px;padding:0 8px}.canvasDataSource__list,.canvasDataSource__section{padding:12px 12px 0}.canvasDataSource__sectionFooter{padding:0 12px}.canvasDataSource__triggerButton{color:#1a1c21;font-size:16px;font-size:1.1428571429rem;font-weight:700;line-height:1.7142857143rem;line-height:40px;overflow-wrap:break-word!important;word-break:break-word}.canvasDataSource__triggerButtonIcon{margin-right:8px}.canvasDataSource__card .euiCard__content{padding-top:0!important}.canvasDataSource__card+.canvasDataSource__card{margin-top:8px}.canvasDataSource__card--isCurrent{border-color:#00bfb3}.canvasDatasourcePreview{height:100%;max-height:60vh;max-width:1000px}.canvasDatasourcePreview .canvasDatasourcePreview__panel{height:calc(100% - 48px)}.canvasDataTable{display:flex;flex-direction:column;height:100%;justify-content:space-between;width:100%}.canvasDataTable .canvasDataTable__tableWrapper{height:100%;overflow:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;width:100%}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar{height:16px;width:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner,.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-track{background-color:#0000}.canvasDataTable .canvasDataTable__tableWrapper::-webkit-scrollbar-corner{background:#0000}.canvasDataTable .canvasDataTable__footer{border-top:1px solid #d3dae6;display:flex;justify-content:space-around;padding:8px;width:100%}.canvasDataTable .canvasDataTable__table{min-width:100%}.canvasDataTable .canvasDataTable__td,.canvasDataTable .canvasDataTable__th{border-bottom:1px solid #d3dae6;padding:8px 4px}.canvasDataTable .canvasDataTable__th{font-weight:700;white-space:nowrap}.dom-preview{pointer-events:none}.dom-preview .canvasLayoutAnnotation{display:none}.canvasElementCard__wrapper{position:relative}.canvasElementCard__wrapper:focus .canvasElementCard__controls,.canvasElementCard__wrapper:hover .canvasElementCard__controls{opacity:1;visibility:visible}.canvasElementCard__wrapper .canvasElementCard__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}.canvasElementCard .euiCard__top{height:85px;margin:-16px -16px 0;text-align:center;width:calc(100% + 32px)}.canvasElementCard .euiCard__image{left:0;max-height:100%;max-width:100%;top:0;width:auto}.canvasElementCard.canvasElementCard--hasIcon .euiCard__top{min-width:210px;padding-top:16px}.canvasElement{overflow:hidden}.canvasElement,.canvasElement__content{height:100%;width:100%}.canvasExpressionInput .euiFormErrorText{padding-left:16px}.canvasExpression--compactSize{max-height:480px}.canvasExpressionInput__editor{flex-grow:1;height:256px;padding-top:16px}.canvasExpression--fullSize{bottom:0;display:flex;flex-direction:column;left:0;position:fixed;right:0;top:0;z-index:5999}.canvasExpression--fullSize .canvasExpressionInput{display:flex;flex-direction:column;flex-grow:1}.canvasExpression--fullSize .canvasExpressionInput__editor{bottom:57px;height:auto;left:0;position:absolute;right:0;top:0}.canvasExpression--fullSize .canvasExpressionInput__inner{display:flex;flex-grow:1}.canvasExpression--fullSize .canvasTextArea__code{flex-grow:1;padding-right:40px}.canvasExpression__settings{background-color:#fff;border-top:1px solid #d3dae6;padding:12px 16px}body.canvas-isFullscreen.euiBody--headerIsFixed{padding-top:0}body.canvas-isFullscreen.euiBody--collapsibleNavIsDocked{padding-left:0!important}body.canvas-isFullscreen #globalBannerList,body.canvas-isFullscreen .kbnLoadingIndicator{display:none}body.canvas-isFullscreen .canvasLayout{background:#000}body.canvas-isFullscreen .canvasGrid,body.canvas-isFullscreen .canvasLayout__footer,body.canvas-isFullscreen .canvasLayout__sidebar,body.canvas-isFullscreen .canvasLayout__stageHeader{display:none}body.canvas-isFullscreen .canvasLayout__stageContentOverflow{bottom:auto;display:block;left:auto;overflow:visible;position:static;right:auto;top:auto}body.canvas-isFullscreen .canvasLayout__stageContentOverflow .canvasWorkpad__buffer{margin:0;padding:0}body.canvas-isFullscreen .canvasLayout__rows{max-width:none}body.canvas-isFullscreen .canvasLayout__cols,body.canvas-isFullscreen .canvasLayout__rows{align-items:center;justify-content:center}body.canvas-isFullscreen .canvasCheckered{background:none;display:flex}body.canvas-isFullscreen .canvasPage{box-shadow:none;overflow:hidden}body.canvas-isFullscreen .canvasContainer>.euiCallOut{display:none}.canvasFunctionForm>.canvasLoading{font-size:20px;text-align:center}.canvasAlignmentGuide{transform-origin:center center;transform-style:preserve-3d}.canvasBorderConnection{border-left:1px dashed #d3dae6;border-top:1px dashed #d3dae6;height:100%;pointer-events:none;position:absolute;top:0;width:100%}.canvasBorderResizeHandle{background-color:#fff;border:1px solid #69707d;box-shadow:0 .8px .8px #0000000a,0 2.3px 2px #00000008;display:block;height:8px;margin-left:-4px;margin-top:-4px;width:8px}.canvasBorderResizeHandle,.canvasDragBoxAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasDragBoxAnnotation{background:none;outline:1px dashed #69707d;pointer-events:none}.canvasHoverAnnotation{background:none;outline:1px solid #54b399;pointer-events:none}.canvasHoverAnnotation,.canvasRotationHandle{position:absolute;transform-origin:center center;transform-style:preserve-3d}.canvasRotationHandle{border-left:1px dashed #d3dae6;border-top:1px dashed #d3dae6;display:block;height:24px;margin-left:-1px;margin-top:-12px;width:0}.canvasRotationHandle__handle{background-color:#98a2b3;border-radius:50%;display:block;height:9px;margin-left:-5px;margin-top:-6px;width:9px}.canvasRotationHandle__handle,.tooltipAnnotation{position:absolute;transform-origin:center center;transform-style:preserve-3d}.tooltipAnnotation{background-color:#404040;border-radius:6px;box-shadow:0 1px 5px #0000001a,0 3.6px 13px #00000012,0 8.4px 23px #0000000f,0 23px 35px #0000000d;color:#fff;max-width:256px;outline:none;overflow-wrap:break-word;padding:8px;pointer-events:none;z-index:9000}.tooltipAnnotation .euiHorizontalRule{background-color:#595959}.canvasLoading{align-items:center;color:#d3dae6;display:flex}.canvasPageManager .canvasPageManager__pages{position:relative}.canvasPageManager .canvasPageManager__addPage,.canvasPageManager .canvasPageManager__pages{height:144px}.canvasPageManager .canvasPageManager--trayPop>div{animation:trayPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;opacity:0}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(1n){animation-delay:.05s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(2n){animation-delay:.1s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(3n){animation-delay:.15s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(4n){animation-delay:.2s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(5n){animation-delay:.25s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(6n){animation-delay:.3s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(7n){animation-delay:.35s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(8n){animation-delay:.4s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(9n){animation-delay:.45s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(10n){animation-delay:.5s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(11n){animation-delay:.55s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(12n){animation-delay:.6s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(13n){animation-delay:.65s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(14n){animation-delay:.7s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(15n){animation-delay:.75s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(16n){animation-delay:.8s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(17n){animation-delay:.85s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(18n){animation-delay:.9s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(19n){animation-delay:.95s}.canvasPageManager .canvasPageManager--trayPop>div:nth-child(20n){animation-delay:1s}.canvasPageManager .canvasPageManager__pageList{bottom:0;display:flex;left:0;overflow-x:auto;overflow-y:hidden;position:absolute;right:0;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;top:0}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar{height:16px;width:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-corner,.canvasPageManager .canvasPageManager__pageList::-webkit-scrollbar-track{background-color:#0000}.canvasPageManager .canvasPageManager__addPage{animation:buttonPop .25s cubic-bezier(.694,.0482,.335,1);animation-fill-mode:forwards;background:#00bfb3;color:#fff;opacity:0;width:56px}.canvasPageManager .canvasPageManager__addPageTip{display:block;height:100%}.canvasPageManager .canvasPageManager__page{padding:16px 16px 16px 8px}.canvasPageManager .canvasPageManager__page-isActive,.canvasPageManager .canvasPageManager__page:focus{background-color:#8fa5c780;outline:none;text-decoration:none}.canvasPageManager .canvasPageManager__page-isActive:focus .canvasPageManager__pagePreview{outline-color:#54b399}.canvasPageManager .canvasPageManager__page:focus,.canvasPageManager .canvasPageManager__page:hover{text-decoration:none}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__pagePreview,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a}.canvasPageManager .canvasPageManager__page:focus .canvasPageManager__controls,.canvasPageManager .canvasPageManager__page:hover .canvasPageManager__controls{opacity:1;visibility:visible}.canvasPageManager .canvasPageManager__page-isActive .canvasPageManager__pagePreview{box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;outline:2px solid #d3dae6;outline-color:#69707d}.canvasPageManager .canvasPageManager__pageNumber{color:#69707d}.canvasPageManager .canvasPageManager__pagePreview{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d;color:#343741;overflow:hidden;position:relative}.canvasPageManager .canvasPageManager__pagePreview .canvasPositionable{position:absolute}.canvasPageManager .canvasPageManager__controls{background:#ffffff80;border-radius:6px;opacity:0;position:absolute;right:8px;top:8px;transition:opacity .15s cubic-bezier(.694,.0482,.335,1);transition-delay:.25s;visibility:hidden}@keyframes buttonPop{0%{opacity:0;transform:translateX(100%)}1%{opacity:0;transform:translateX(100%)}to{opacity:1;transform:translateY(0)}}@keyframes trayPop{0%{opacity:0;transform:translateY(100%)}1%{opacity:0;transform:translateY(100%)}to{opacity:1;transform:translateY(0)}}.canvasPositionable{transform-origin:center center}.canvasShapePreview{height:40px;width:40px}.canvasShapePreview svg{height:100%;width:100%}.canvasShapePicker{width:192px}.canvasSidebar{bottom:0;max-height:100vh;overflow-x:hidden;overflow-y:auto;position:absolute;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;top:0;width:100%}.canvasSidebar::-webkit-scrollbar{height:16px;width:16px}.canvasSidebar::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasSidebar::-webkit-scrollbar-corner,.canvasSidebar::-webkit-scrollbar-track{background-color:#0000}.canvasSidebar__pop{animation:sidebarPop .15s cubic-bezier(.694,.0482,.335,1)}.canvasSidebarFlyout{min-width:350px;width:350px}.canvasSidebar__elementButtons{background:#e4e9f2;margin-bottom:8px}.canvasSidebar__panel{border-bottom:1px solid #d3dae6;padding:8px 12px}.canvasSidebar__panel--isEmpty{border-bottom:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion{margin-bottom:-8px}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion:after{content:none}.canvasSidebar__panel .canvasSidebar__expandable:last-child .canvasSidebar__accordion.euiAccordion-isOpen:after{display:none}.canvasSidebar__panel-noMinWidth .euiButton{min-width:0}.canvasSidebar__expandable{width:100%}.canvasSidebar__expandable+.canvasSidebar__expandable{margin-top:1px}.canvasSidebar__expandable+.canvasSidebar__expandable .canvasSidebar__accordion:before{display:none}.canvasSidebar__accordion{background:#f5f7fa;margin:0 -12px;padding:12px;position:relative}.canvasSidebar__accordion.euiAccordion-isOpen{background:#0000}.canvasSidebar__accordion:after,.canvasSidebar__accordion:before{background:#d3dae6;content:"";height:1px;left:0;position:absolute;width:100%}.canvasSidebar__accordion:before{top:0}.canvasSidebar__accordion:after{bottom:0}.canvasSidebar__accordion.filtersSidebar__accordion{margin:auto}.canvasSidebar__accordionContent{padding-left:28px;padding-top:16px}@keyframes sidebarPop{0%{opacity:0}1%{opacity:0}to{opacity:1}}.canvasLayout__sidebarHeader{padding:14px 8px}.canvasLayout__sidebarHeaderWorkpad{padding:6px 0}.canvasToolbar{position:relative}.canvasTray__toggle{background-color:#fbfcfd;border-radius:6px 6px 0 0;left:50%;margin:0;position:absolute;top:-20px}.canvasTray__toggle>.euiFlexItem{margin:0}.canvasTray__toggle button{box-shadow:0 -2px 1px #0000001a;padding:4px 12px}.canvasToolbar__home{height:100%;padding:12px 0 12px 24px}.canvasToolbar__controls{height:100%;padding:12px}.canvasToolbar__container{background-color:#e4e9f2;height:64px;position:relative;width:100%;z-index:200}.canvasTray{box-shadow:0 0 .8px #0000000f,0 0 2px #0000000a,0 0 5px #0000000a,0 0 17px #00000008;flex-direction:column}.canvasTray__panel{background-color:#fbfcfd;border-radius:0}.canvasWorkpad{position:relative}.canvasWorkpad__buffer{margin:auto;padding:16px}.canvasGrid{background-image:linear-gradient(90deg,#98a2b3 1px,#0000 0),linear-gradient(180deg,#98a2b3 1px,#0000 0);background-size:50px 50px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none}.canvasShareMenu__panelContent{padding:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre{overflow-x:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin;white-space:pre}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar{height:16px;width:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-corner,.canvasShareMenu__reportingConfig .euiCodeBlock__pre::-webkit-scrollbar-track{background-color:#0000}.canvasViewMenu__kioskSettings,.canvasViewMenu__refreshSettings{padding:16px}.canvasPage{background-color:#fff;box-shadow:0 0 .8px #0000000f,0 0 2px #0000000a,0 0 5px #0000000a,0 0 17px #00000008;position:absolute;top:0;transform-style:preserve-3d!important;z-index:auto}.canvasInteractivePage{-webkit-user-select:none;user-select:none}.canvasLayout__stage .canvasStaticPage.isInactive{opacity:0;visibility:hidden}.canvasEditVar__typeOption{align-items:center;display:flex}.canvasEditVar__typeOption .canvasEditVar__tokenIcon{margin-right:15px}.canvasVarConfig__container{position:relative;width:100%}.canvasVarConfig__container.canvasVarConfig-isEditMode .canvasVarConfig__innerContainer{transform:translateX(-50%)}.canvasVarConfig__list table{background-color:#0000}.canvasVarConfig__list tbody tr td,.canvasVarConfig__list thead tr td,.canvasVarConfig__list thead tr th{border-bottom:none;border-top:none}.canvasVarConfig__list tbody tr:hover{background-color:#0000}.canvasVarConfig__list tbody tr:last-child td{border-bottom:none}.canvasVarConfig__innerContainer{align-content:stretch;display:flex;flex-direction:row;position:relative;width:calc(200% + 48px)}.canvasVarConfig__innerContainer .canvasVarConfig__editView{margin-left:0}.canvasVarConfig__innerContainer .canvasVarConfig__listView{margin-right:0}.canvasVarConfig__editView{flex-shrink:0;height:100%;width:50%}.canvasVarConfig__listView{flex-shrink:0;width:50%}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn{animation-name:"fadeIn"}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}.fadeOut{animation-name:"fadeOut"}@keyframes rotateIn{0%{opacity:0;transform:rotate(45deg);transform-origin:left bottom}to{opacity:1;transform:translateZ(0);transform-origin:left bottom}}.rotateIn{animation-name:"rotateIn"}@keyframes rotateOut{0%{opacity:1;transform-origin:left bottom}to{opacity:0;transform:rotate(-45deg);transform-origin:left bottom}}.rotateOut{animation-name:"rotateOut"}@keyframes slideIn{0%{transform:translate3d(100%,0,0);visibility:visible}to{transform:translateZ(0)}}.slideIn{animation-name:"slideIn"}@keyframes slideOut{0%{transform:translateZ(0)}to{transform:translate3d(-100%,0,0);visibility:hidden}}.slideOut{animation-name:"slideOut"}@keyframes zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}.zoomIn{animation-name:"zoomIn"}@keyframes zoomOut{0%{opacity:1}50%{opacity:0;transform:scale3d(.3,.3,.3)}to{opacity:0}}.zoomOut{animation-name:"zoomOut"}.canvasAdvancedFilter{font-size:inherit;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input{background-color:#fff;border:1px solid #d3dae6;border-radius:6px;font-family:monospace;font-size:inherit;line-height:19px;padding:4px 16px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__input:focus{box-shadow:none}.canvasAdvancedFilter .canvasAdvancedFilter__button{background-color:#fff;border:1px solid #d3dae6;border-radius:6px;font-size:inherit;padding:4px 8px;width:100%}.canvasAdvancedFilter .canvasAdvancedFilter__button:hover{background-color:#f5f7fa}.canvasDropdownFilter{position:relative}.canvasEmbeddable .embPanel{background:none;border-radius:0!important;outline:none!important}.canvasEmbeddable .embPanel .embPanel__title{margin-bottom:4px}.canvasEmbeddable .embPanel .embPanel__optionsMenuButton{border-radius:6px}.canvas-isFullscreen .canvasEmbeddable .embPanel .embPanel__optionsMenuButton{opacity:0}.canvas-isFullscreen .canvasEmbeddable .embPanel:focus .embPanel__optionsMenuButton,.canvas-isFullscreen .canvasEmbeddable .embPanel:hover .embPanel__optionsMenuButton{opacity:1}.canvasEmbeddable .euiTable{background:none}.legendLabel{color:#343741}.legendColorBox>div>div{border-radius:16px}.canvasArgImage .canvasArgImage--preview{border:1px solid #d3dae6;max-height:100px;overflow:hidden}',""]),e.exports=t},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return gd})),a.d(t,"initializeCanvas",(function(){return md})),a.d(t,"teardownCanvas",(function(){return hd}));var n=a(16),s=a.n(n),o=a(22),r=a.n(o),i=a(1),l=a(20);a(288),a(289),function(e){function t(e,t){return t*Math.floor(e/t)}function a(e,t,a,n){if("function"==typeof e.strftime)return e.strftime(t);var s,o=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},r=[],l=!1,c=e.getHours(),u=c<12;null==a&&(a=[i.i18n.translate("flot.time.janLabel",{defaultMessage:"Jan"}),i.i18n.translate("flot.time.febLabel",{defaultMessage:"Feb"}),i.i18n.translate("flot.time.marLabel",{defaultMessage:"Mar"}),i.i18n.translate("flot.time.aprLabel",{defaultMessage:"Apr"}),i.i18n.translate("flot.time.mayLabel",{defaultMessage:"May"}),i.i18n.translate("flot.time.junLabel",{defaultMessage:"Jun"}),i.i18n.translate("flot.time.julLabel",{defaultMessage:"Jul"}),i.i18n.translate("flot.time.augLabel",{defaultMessage:"Aug"}),i.i18n.translate("flot.time.sepLabel",{defaultMessage:"Sep"}),i.i18n.translate("flot.time.octLabel",{defaultMessage:"Oct"}),i.i18n.translate("flot.time.novLabel",{defaultMessage:"Nov"}),i.i18n.translate("flot.time.decLabel",{defaultMessage:"Dec"})]),null==n&&(n=[i.i18n.translate("flot.time.sunLabel",{defaultMessage:"Sun"}),i.i18n.translate("flot.time.monLabel",{defaultMessage:"Mon"}),i.i18n.translate("flot.time.tueLabel",{defaultMessage:"Tue"}),i.i18n.translate("flot.time.wedLabel",{defaultMessage:"Wed"}),i.i18n.translate("flot.time.thuLabel",{defaultMessage:"Thu"}),i.i18n.translate("flot.time.friLabel",{defaultMessage:"Fri"}),i.i18n.translate("flot.time.satLabel",{defaultMessage:"Sat"})]),s=c>12?c-12:0==c?12:c;for(var d=0;d<t.length;++d){var p=t.charAt(d);if(l){switch(p){case"a":p=""+n[e.getDay()];break;case"b":p=""+a[e.getMonth()];break;case"d":p=o(e.getDate());break;case"e":p=o(e.getDate()," ");break;case"h":case"H":p=o(c);break;case"I":p=o(s);break;case"l":p=o(s," ");break;case"m":p=o(e.getMonth()+1);break;case"M":p=o(e.getMinutes());break;case"q":p=""+(Math.floor(e.getMonth()/3)+1);break;case"S":p=o(e.getSeconds());break;case"y":p=o(e.getFullYear()%100);break;case"Y":p=""+e.getFullYear();break;case"p":p=u?"am":"pm";break;case"P":p=u?"AM":"PM";break;case"w":p=""+e.getDay()}r.push(p),l=!1}else"%"==p?l=!0:r.push(p)}return r.join("")}function n(e){function t(e,t,a,n){e[t]=function(){return a[n].apply(a,arguments)}}var a={date:e};null!=e.strftime&&t(a,"strftime",e,"strftime"),t(a,"getTime",e,"getTime"),t(a,"setTime",e,"setTime");for(var n=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],s=0;s<n.length;s++)t(a,"get"+n[s],e,"getUTC"+n[s]),t(a,"set"+n[s],e,"setUTC"+n[s]);return a}function s(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var a=new timezoneJS.Date;return a.setTimezone(t.timezone),a.setTime(e),a}return n(new Date(e))}return n(new Date(e))}var o={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},r=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],l=r.concat([[3,"month"],[6,"month"],[1,"year"]]),c=r.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(n){n.hooks.processOptions.push((function(n,r){e.each(n.getAxes(),(function(e,n){var r=n.options;"time"==r.mode&&(n.tickGenerator=function(e){var a=[],n=s(e.min,r),i=0,u=r.tickSize&&"quarter"===r.tickSize[1]||r.minTickSize&&"quarter"===r.minTickSize[1]?c:l;null!=r.minTickSize&&(i="number"==typeof r.tickSize?r.tickSize:r.minTickSize[0]*o[r.minTickSize[1]]);for(var d=0;d<u.length-1&&!(e.delta<(u[d][0]*o[u[d][1]]+u[d+1][0]*o[u[d+1][1]])/2&&u[d][0]*o[u[d][1]]>=i);++d);var p=u[d][0],b=u[d][1];if("year"==b){if(null!=r.minTickSize&&"year"==r.minTickSize[1])p=Math.floor(r.minTickSize[0]);else{var g=Math.pow(10,Math.floor(Math.log(e.delta/o.year)/Math.LN10)),m=e.delta/o.year/g;p=m<1.5?1:m<3?2:m<7.5?5:10,p*=g}p<1&&(p=1)}e.tickSize=r.tickSize||[p,b];var h=e.tickSize[0];b=e.tickSize[1];var f=h*o[b];"second"==b?n.setSeconds(t(n.getSeconds(),h)):"minute"==b?n.setMinutes(t(n.getMinutes(),h)):"hour"==b?n.setHours(t(n.getHours(),h)):"month"==b?n.setMonth(t(n.getMonth(),h)):"quarter"==b?n.setMonth(3*t(n.getMonth()/3,h)):"year"==b&&n.setFullYear(t(n.getFullYear(),h)),n.setMilliseconds(0),f>=o.minute&&n.setSeconds(0),f>=o.hour&&n.setMinutes(0),f>=o.day&&n.setHours(0),f>=4*o.day&&n.setDate(1),f>=2*o.month&&n.setMonth(t(n.getMonth(),3)),f>=2*o.quarter&&n.setMonth(t(n.getMonth(),6)),f>=o.year&&n.setMonth(0);var v,x=0,j=Number.NaN;do{if(v=j,j=n.getTime(),a.push(j),"month"==b||"quarter"==b)if(h<1){n.setDate(1);var y=n.getTime();n.setMonth(n.getMonth()+("quarter"==b?3:1));var O=n.getTime();n.setTime(j+x*o.hour+(O-y)*h),x=n.getHours(),n.setHours(0)}else n.setMonth(n.getMonth()+h*("quarter"==b?3:1));else"year"==b?n.setFullYear(n.getFullYear()+h):n.setTime(j+f)}while(j<e.max&&j!=v);return a},n.tickFormatter=function(e,t){var n=s(e,t.options);if(null!=r.timeformat)return a(n,r.timeformat,r.monthNames,r.dayNames);var i=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*o[t.tickSize[1]],c=t.max-t.min,u=r.twelveHourClock?" %p":"",d=r.twelveHourClock?"%I":"%H";return a(n,l<o.minute?d+":%M:%S"+u:l<o.day?c<2*o.day?d+":%M"+u:"%b %d "+d+":%M"+u:l<o.month?"%b %d":i&&l<o.quarter||!i&&l<o.year?c<o.year?"%b":"%b %Y":i&&l<o.year?c<o.year?"Q%q":"Q%q %Y":"%Y",r.monthNames,r.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=a,e.plot.dateGenerator=s}(jQuery),a(290),a(291),a(292),function(e){const t={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:function(t){let a=null,n=null,s=null,o=null,r=null,l=null,c=!1,u=null,d=[];function p(e){if(s.series.pie.innerRadius>0){e.save();const t=s.series.pie.innerRadius>1?s.series.pie.innerRadius:o*s.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=s.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),s.series.pie.stroke.width>0&&(e.save(),e.beginPath(),e.strokeStyle=s.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore())}}function b(e,t){let a=!1;const n=e.length;let s=n-1;for(let o=-1;++o<n;s=o)(e[o][1]<=t[1]&&t[1]<e[s][1]||e[s][1]<=t[1]&&t[1]<e[o][1])&&t[0]<(e[s][0]-e[o][0])*(t[1]-e[o][1])/(e[s][1]-e[o][1])+e[o][0]&&(a=!a);return a}function g(e){h("plothover",e)}function m(e){h("plotclick",e)}function h(e,a){const i=t.offset(),c=function(e,a){const n=t.getData(),s=t.getOptions(),i=s.series.pie.radius>1?s.series.pie.radius:o*s.series.pie.radius;let c,d;for(let t=0;t<n.length;++t){const s=n[t];if(s.pie.show){if(u.save(),u.beginPath(),u.moveTo(0,0),u.arc(0,0,i,s.startAngle,s.startAngle+s.angle/2,!1),u.arc(0,0,i,s.startAngle+s.angle/2,s.startAngle+s.angle,!1),u.closePath(),c=e-r,d=a-l,u.isPointInPath){if(u.isPointInPath(e-r,a-l))return u.restore(),{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:t}}else if(b([[0,0],[i*Math.cos(s.startAngle),i*Math.sin(s.startAngle)],[i*Math.cos(s.startAngle+s.angle/4),i*Math.sin(s.startAngle+s.angle/4)],[i*Math.cos(s.startAngle+s.angle/2),i*Math.sin(s.startAngle+s.angle/2)],[i*Math.cos(s.startAngle+s.angle/1.5),i*Math.sin(s.startAngle+s.angle/1.5)],[i*Math.cos(s.startAngle+s.angle),i*Math.sin(s.startAngle+s.angle)]],[c,d]))return u.restore(),{datapoint:[s.percent,s.data],dataIndex:0,series:s,seriesIndex:t};u.restore()}}return null}(parseInt(a.pageX-i.left,10),parseInt(a.pageY-i.top,10));if(s.grid.autoHighlight)for(let t=0;t<d.length;++t){const a=d[t];a.auto!==e||c&&a.series===c.series||f(a.series)}c&&function(e,a){const n=v(e);-1===n?(d.push({series:e,auto:a}),t.triggerRedrawOverlay()):a||(d[n].auto=!1)}(c.series,e);const p={pageX:a.pageX,pageY:a.pageY};n.trigger(e,[p,c])}function f(e){null==e&&(d=[],t.triggerRedrawOverlay());const a=v(e);-1!==a&&(d.splice(a,1),t.triggerRedrawOverlay())}function v(e){for(let t=0;t<d.length;++t)if(d[t].series===e)return t;return-1}t.hooks.processOptions.push((function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"===t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"===t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=3/4:t.series.pie.radius=1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))})),t.hooks.bindEvents.push((function(e,t){const a=e.getOptions();a.series.pie.show&&(a.grid.hoverable&&t.unbind("mousemove").mousemove(g),a.grid.clickable&&t.unbind("click").click(m))})),t.hooks.processDatapoints.push((function(t,o,r,i){t.getOptions().series.pie.show&&function(t){c||(c=!0,a=t.getCanvas(),n=e(a).parent(),s=t.getOptions(),t.setData(function(t){let a=0,n=0,o=0,r=s.series.pie.combine.color;const i=[];for(let e=0;e<t.length;++e){let a=t[e].data;Array.isArray(a)&&1===a.length&&(a=a[0]),Array.isArray(a)?!isNaN(parseFloat(a[1]))&&isFinite(a[1])?a[1]=+a[1]:a[1]=0:a=!isNaN(parseFloat(a))&&isFinite(a)?[1,+a]:[1,0],t[e].data=[a]}for(let e=0;e<t.length;++e)a+=t[e].data[0][1];for(let e=0;e<t.length;++e){const i=t[e].data[0][1];i/a<=s.series.pie.combine.threshold&&(n+=i,o++,r||(r=t[e].color))}for(let n=0;n<t.length;++n){const r=t[n].data[0][1];(o<2||r/a>s.series.pie.combine.threshold)&&i.push(e.extend(t[n],{data:[[1,r]],color:t[n].color,label:t[n].label,angle:r*Math.PI*2/a,percent:r/(a/100)}))}return o>1&&i.push({data:[[1,n]],color:r,label:s.series.pie.combine.label,angle:n*Math.PI*2/a,percent:n/(a/100)}),i}(t.getData())))}(t)})),t.hooks.drawOverlay.push((function(e,t){e.getOptions().series.pie.show&&function(e,t){const a=e.getOptions(),n=a.series.pie.radius>1?a.series.pie.radius:o*a.series.pie.radius;t.save(),t.translate(r,l),t.scale(1,a.series.pie.tilt);for(let e=0;e<d.length;++e)(s=d[e].series).angle<=0||isNaN(s.angle)||(t.fillStyle="rgba(255, 255, 255, "+a.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(s.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,n,s.startAngle,s.startAngle+s.angle/2,!1),t.arc(0,0,n,s.startAngle+s.angle/2,s.startAngle+s.angle,!1),t.closePath(),t.fill());var s;p(t),t.restore()}(e,t)})),t.hooks.draw.push((function(t,a){t.getOptions().series.pie.show&&function(t,a){if(!n)return;const d=t.getPlaceholder().width(),b=t.getPlaceholder().height(),g=n.children().filter(".legend").children().width()||0;u=a,c=!1,o=Math.min(d,b/s.series.pie.tilt)/2,l=b/2+s.series.pie.offset.top,r=d/2,"auto"===s.series.pie.offset.left?(s.legend.position.match("w")?r+=g/2:r-=g/2,r<o?r=o:r>d-o&&(r=d-o)):r+=s.series.pie.offset.left;const m=t.getData();let h=0;do{h>0&&(o*=.95),h+=1,f(),s.series.pie.tilt<=.8&&v()}while(!x()&&h<10);if(h>=10){f();const e=i.i18n.translate("flot.pie.unableToDrawLabelsInsideCanvasErrorMessage",{defaultMessage:"Could not draw pie with labels contained inside canvas"});n.prepend(`<div class='error'>${e}</div>`)}function f(){u.clearRect(0,0,d,b),n.children().filter(".pieLabel, .pieLabelBackground").remove()}function v(){const e=s.series.pie.shadow.left,t=s.series.pie.shadow.top,a=s.series.pie.shadow.alpha;let n=s.series.pie.radius>1?s.series.pie.radius:o*s.series.pie.radius;if(!(n>=d/2-e||n*s.series.pie.tilt>=b/2-t||n<=10)){u.save(),u.translate(e,t),u.globalAlpha=a,u.fillStyle="#000",u.translate(r,l),u.scale(1,s.series.pie.tilt);for(let e=1;e<=10;e++)u.beginPath(),u.arc(0,0,n,0,2*Math.PI,!1),u.fill(),n-=e;u.restore()}}function x(){const t=Math.PI*s.series.pie.startAngle,a=s.series.pie.radius>1?s.series.pie.radius:o*s.series.pie.radius;u.save(),u.translate(r,l),u.scale(1,s.series.pie.tilt),u.save();let i=t;for(let e=0;e<m.length;++e)m[e].startAngle=i,c(m[e].angle,m[e].color,!0);if(u.restore(),s.series.pie.stroke.width>0){u.save(),u.lineWidth=s.series.pie.stroke.width,i=t;for(let e=0;e<m.length;++e)c(m[e].angle,s.series.pie.stroke.color,!1);u.restore()}return p(u),u.restore(),!s.series.pie.label.show||function(){let a=t;const i=s.series.pie.label.radius>1?s.series.pie.label.radius:o*s.series.pie.label.radius;for(let e=0;e<m.length;++e){if(m[e].percent>=100*s.series.pie.label.threshold&&!c(m[e],a,e))return!1;a+=m[e].angle}return!0;function c(t,a,o){if(0===t.data[0][1])return!0;const c=s.legend.labelFormatter;let u;const p=s.series.pie.label.formatter;u=c?c(t.label,t):t.label,p&&(u=p(u,t));const g=(a+t.angle+a)/2,m=r+Math.round(Math.cos(g)*i),h=l+Math.round(Math.sin(g)*i)*s.series.pie.tilt,f="<span class='pieLabel' id='pieLabel"+o+"' style='position:absolute;top:"+h+"px;left:"+m+"px;'>"+u+"</span>";n.append(f);const v=n.children("#pieLabel"+o),x=h-v.height()/2,j=m-v.width()/2;if(v.css("top",x),v.css("left",j),0-x>0||0-j>0||b-(x+v.height())<0||d-(j+v.width())<0)return!1;if(0!==s.series.pie.label.background.opacity){let a=s.series.pie.label.background.color;null==a&&(a=t.color);const n="top:"+x+"px;left:"+j+"px;";e("<div class='pieLabelBackground' style='position:absolute;width:"+v.width()+"px;height:"+v.height()+"px;"+n+"background-color:"+a+";'></div>").css("opacity",s.series.pie.label.background.opacity).insertBefore(v)}return!0}}();function c(e,t,n){e<=0||isNaN(e)||(n?u.fillStyle=t:(u.strokeStyle=t,u.lineJoin="round"),u.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&u.moveTo(0,0),u.arc(0,0,a,i,i+e/2,!1),u.arc(0,0,a,i+e/2,i+e,!1),u.closePath(),i+=e,n?u.fill():u.stroke())}}t.setSeries&&t.insertLegend&&(t.setSeries(m),t.insertLegend())}(t,a)}))},options:t,name:"pie",version:"1.1"})}(jQuery),a(293),a(294),a(295),a(296),a(297);var c=a(19),u=a(92),d=a(44),p=a(2),b=a.n(p),g=a(79),m=a.n(g),h=a(66),f=a(101),v=a(104);const x=v.a.getShortcutHelp(),j=v.a.getNamespaceDisplayNames(),y=(e,{modifiers:t=[],help:a})=>{Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);let n=[...e];return t.includes("shift")&&(n=n.map((e=>`shift+${e}`)),e=e.map((e=>`shift+${e}`))),(t.includes("alt")||t.includes("option"))&&(n=n.map((e=>`option+${e}`)),e=e.map((e=>`alt+${e}`))),(t.includes("ctrl")||t.includes("command"))&&(n=n.map((e=>`command+${e}`)),e=e.map((e=>`ctrl+${e}`))),{osx:n,windows:e,linux:e,other:e,help:a}},O=y("r",{modifiers:"alt",help:x.REFRESH}),w=y("[",{modifiers:"alt",help:x.PREV}),k=y("]",{modifiers:"alt",help:x.NEXT}),_=y(["f","p"],{modifiers:"alt",help:x.FULLSCREEN}),S={ELEMENT:{displayName:j.ELEMENT,CUT:y("x",{modifiers:"ctrl",help:x.CUT}),COPY:y("c",{modifiers:"ctrl",help:x.COPY}),PASTE:y("v",{modifiers:"ctrl",help:x.PASTE}),CLONE:y("d",{modifiers:"ctrl",help:x.CLONE}),DELETE:y(["del","backspace"],{help:x.DELETE}),BRING_FORWARD:y("up",{modifiers:"ctrl",help:x.BRING_TO_FRONT}),BRING_TO_FRONT:y("up",{modifiers:["ctrl","shift"],help:x.BRING_FORWARD}),SEND_BACKWARD:y("down",{modifiers:"ctrl",help:x.SEND_BACKWARD}),SEND_TO_BACK:y("down",{modifiers:["ctrl","shift"],help:x.SEND_TO_BACK}),GROUP:y("g",{help:x.GROUP}),UNGROUP:y("u",{help:x.UNGROUP}),SHIFT_UP:y("up",{help:x.SHIFT_UP}),SHIFT_DOWN:y("down",{help:x.SHIFT_DOWN}),SHIFT_LEFT:y("left",{help:x.SHIFT_LEFT}),SHIFT_RIGHT:y("right",{help:x.SHIFT_RIGHT}),NUDGE_UP:y("up",{modifiers:["shift"],help:x.NUDGE_UP}),NUDGE_DOWN:y("down",{modifiers:["shift"],help:x.NUDGE_DOWN}),NUDGE_LEFT:y("left",{modifiers:["shift"],help:x.NUDGE_LEFT}),NUDGE_RIGHT:y("right",{modifiers:["shift"],help:x.NUDGE_RIGHT})},EXPRESSION:{displayName:j.EXPRESSION,RUN:y("enter",{modifiers:"ctrl",help:x.RUN})},EDITOR:{displayName:j.EDITOR,MULTISELECT:y("click",{modifiers:"shift",help:x.MULTISELECT}),RESIZE_FROM_CENTER:y("drag",{modifiers:"alt",help:x.RESIZE_FROM_CENTER}),IGNORE_SNAP:y("drag",{modifiers:"ctrl",help:x.IGNORE_SNAP}),SELECT_BEHIND:y("click",{modifiers:"ctrl",help:x.SELECT_BEHIND}),UNDO:y("z",{modifiers:"ctrl",help:x.UNDO}),REDO:y("z",{modifiers:["ctrl","shift"],help:x.REDO}),PREV:w,NEXT:k,EDITING:y("e",{modifiers:"alt",help:x.EDITING}),GRID:y("g",{modifiers:"alt",help:x.GRID}),REFRESH:O,ZOOM_IN:y("plus",{modifiers:["ctrl","alt"],help:x.ZOOM_IN}),ZOOM_OUT:y("minus",{modifiers:["ctrl","alt"],help:x.ZOOM_OUT}),ZOOM_RESET:y("[",{modifiers:["ctrl","alt"],help:x.ZOOM_RESET}),FULLSCREEN:_},PRESENTATION:{displayName:j.PRESENTATION,FULLSCREEN:_,FULLSCREEN_EXIT:y("esc",{help:x.FULLSCREEN_EXIT}),PREV:Object(c.mapValues)(w,((e,t)=>"help"===t?e:e.concat(["backspace","left"]))),NEXT:Object(c.mapValues)(k,((e,t)=>"help"===t?e:e.concat(["space","right"]))),REFRESH:O,PAGE_CYCLE_TOGGLE:y("p",{help:x.PAGE_CYCLE_TOGGLE})}},E=new f.ShortcutManager(S);var M=a(21),C=a(47),T=a(17);const P=({children:e,...t})=>Object(T.jsx)(M.Router,t,Object(T.jsx)(C.CompatRouter,null,e));var N=a(64),A=a.n(N);const I={services:{}},F=Object(n.createContext)(I);var L=a(366),D=a.n(L);const z=({children:e,component:t,render:a,...o})=>{const r=Object(n.useMemo)((()=>{if(t)return e=>Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(R,null),Object(T.jsx)(t,e))}),[t]);if(r)return Object(T.jsx)(M.Route,A()({},o,{component:r}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(T.jsx)(M.Route,A()({},o,{render:e=>Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(R,null),t(e))}))}return Object(T.jsx)(M.Route,o,Object(T.jsx)(R,null),e)},R=()=>{const{executionContext:e}=Object(n.useContext)(F).services,t=Object(M.useRouteMatch)();return function(e,t){D()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},B=({legacySwitch:e=!0,children:t})=>{const a=Object(M.useRouteMatch)();return e?Object(T.jsx)(M.Switch,null,t):Object(T.jsx)(C.Routes,null,n.Children.map(t,(e=>{if(s.a.isValidElement(e)&&e.type===z){var n;const o=Object(c.replace)(null==e?void 0:e.props.path,a.url+"/",""),r="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(T.jsx)(C.Route,{path:o,element:Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(R,null),(null==e||null===(n=e.props)||void 0===n?void 0:n.component)&&Object(T.jsx)(e.props.component,null)||r&&r()||t)})}return e})))};var H=a(335),W=a(110);const V=e=>({text:"Canvas",href:e.createHref({pathname:"/"}),onClick:t=>{t.defaultPrevented||(e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(t)||!(e=>0===e.button)(t)||(e=>{const t=e.target.getAttribute("target");return t&&"_self"!==t})(t)||(t.preventDefault(),e.push("/"))}}),G=({name:e})=>({text:e||Object(W.a)()});var U=a(80),q=a(18),K=a(26),X=a.n(K),Y=(a(356),a(27));a(339);const Z=e=>{const{className:t,size:a,...n}=e,s={};return(e=>void 0===e.iconType)(e)&&(s.iconType=`logo${e.name.replace(/\s+/g,"")}`),Object(T.jsx)(q.EuiAvatar,A()({className:X()("kbnSolutionAvatar",{[`kbnSolutionAvatar--${a}`]:a},t),size:"xxl"===a?"xl":a,iconSize:a,color:"plain"},n,s))};a(361);const J=i.i18n.translate("sharedUXPackages.solutionNav.collapsibleLabel",{defaultMessage:"Collapse side navigation"}),Q=i.i18n.translate("sharedUXPackages.solutionNav.openLabel",{defaultMessage:"Open side navigation"}),ee=({className:e,isCollapsed:t,...a})=>{const n=X()("kbnSolutionNavCollapseButton",{"kbnSolutionNavCollapseButton-isCollapsed":t},e);return Object(T.jsx)(q.EuiButtonIcon,A()({className:n,size:"s",color:"text",iconType:t?"menuRight":"menuLeft","aria-label":t?Q:J,title:t?Q:J},a))},te="248px",ae=(e,t)=>e.map((e=>(e.tabIndex=t?-1:void 0,e.items=e.items&&ae(e.items,t),e))),ne=Object(q.htmlIdGenerator)("SolutionNav"),se=({children:e,headingProps:t,icon:a,isOpenOnDesktop:o=!1,items:r,mobileBreakpoints:l=["xs","s"],closeFlyoutButtonPosition:c="outside",name:u,onCollapse:d,canBeCollapsed:p=!0,...b})=>{const g=Object(q.useIsWithinBreakpoints)(l),m=Object(q.useIsWithinBreakpoints)(["m"]),h=Object(q.useIsWithinMinBreakpoint)("l"),[f,v]=Object(n.useState)(!1),x=h&&!o&&p,j=!!e,y=X()("kbnSolutionNav",{"kbnSolutionNav--hidden":x}),O=(null==t?void 0:t.id)||ne("heading"),w=(null==t?void 0:t.element)||"h2",k=Object(T.jsx)(q.EuiTitle,{size:"xs",id:O,"data-test-subj":null==t?void 0:t["data-test-subj"],className:"kbnSolutionNav__title"},Object(T.jsx)(w,null,a&&Object(T.jsx)(Z,{className:"kbnSolutionNav__titleAvatar",iconType:a,name:u}),Object(T.jsx)("strong",null,Object(T.jsx)(Y.FormattedMessage,{id:"sharedUXPackages.solutionNav.mobileTitleText",defaultMessage:"{solutionName} {menuText}",values:{solutionName:u||"Navigation",menuText:g?i.i18n.translate("sharedUXPackages.solutionNav.menuText",{defaultMessage:"menu"}):""}})))),_=Object(n.useMemo)((()=>j?e:r?Object(T.jsx)(q.EuiSideNav,A()({"aria-labelledby":O,"aria-hidden":x,items:ae(r,x),mobileBreakpoints:[]},b)):null),[e,O,j,x,r,b]),{euiTheme:S}=Object(q.useEuiTheme)(),E=Object(n.useMemo)((()=>h?o?te:S.size.xxl:m?f||!p?te:S.size.xxl:"0"),[S,o,f,p,m,h]),{setGlobalCSSVariables:M}=Object(q.useEuiThemeCSSVariables)();return Object(n.useEffect)((()=>{M({"--kbnSolutionNavOffset":E})}),[E,M]),Object(T.jsx)(s.a.Fragment,null,g&&Object(T.jsx)(q.EuiCollapsibleNavGroup,{className:y,paddingSize:"none",background:"none",title:k,titleElement:"span",isCollapsible:p,initialIsOpen:!1},Object(T.jsx)(q.EuiPanel,{color:"transparent",paddingSize:"s"},_)),m&&Object(T.jsx)(s.a.Fragment,null,(f||!p)&&Object(T.jsx)(q.EuiFlyout,{ownFocus:!1,outsideClickCloses:!0,onClose:()=>v(!1),side:"left",size:248,closeButtonPosition:c,className:"kbnSolutionNav__flyout",hideCloseButton:!p},Object(T.jsx)(q.EuiPageSidebar,{className:y,hasEmbellish:!0},k,Object(T.jsx)(q.EuiSpacer,{size:"l"}),_)),p&&Object(T.jsx)(ee,{isCollapsed:!0,onClick:()=>{v(!f)}})),h&&Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)("div",{className:y},k,Object(T.jsx)(q.EuiSpacer,{size:"l"}),_),p&&Object(T.jsx)(ee,{isCollapsed:!o,onClick:d})))};var oe=a(345);const re="solutionNavIsCollapsed",ie=e=>{const t=t=>{var a;const s=Object(q.useIsWithinBreakpoints)(["m"]),o=Object(q.useIsWithinMinBreakpoint)("l"),[r,i]=Object(n.useState)(!JSON.parse(String(localStorage.getItem(re)))),{solutionNav:l,children:c,...u}=t,{euiTheme:d}=Object(q.useEuiTheme)(),{canBeCollapsed:p=!0}=l,b=s||p&&o&&!r,g=(e=>Object(oe.css)("flex:0 1 0;overflow:hidden;",q.euiCanAnimate,"{transition:min-width ",e.animation.fast," ",e.animation.resistance,";}",""))(d),m=X()("kbnSolutionNav__sidebar",{"kbnSolutionNav__sidebar--shrink":b},null===(a=t.pageSideBarProps)||void 0===a?void 0:a.className,g),h=Object(T.jsx)(se,A()({isOpenOnDesktop:r,onCollapse:()=>{i(!r),localStorage.setItem(re,JSON.stringify(r))}},l)),f={paddingSize:"none",...t.pageSideBarProps,minWidth:b?d.size.xxl:void 0,className:m,hasEmbellish:!b};return Object(T.jsx)(e,A()({},u,{pageSideBar:h,pageSideBarProps:f}),c)};var a;return t.displayName=`WithSolutionNavBar(${a=e,a.displayName||a.name||"UnnamedComponent"})`,t};var le=a(115),ce=a.n(le);const ue=s.a.createContext(null),de={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},pe=({children:e,navigateToUrl:t,currentAppId:a,...s})=>{const o=Object(n.useRef)(null),r=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const s=((e,t)=>{let a=e;do{var n,s;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(s=a)||void 0===s?void 0:s.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!s)return;const o=s.href,r=""===s.target||"_self"===s.target,i=0===e.button;o&&r&&i&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(s.href))})({event:e,currentAppId:a,navigateToUrl:t,container:o.current})),[a,t]);return Object(T.jsx)("div",A()({onClick:r,ref:o,css:de,"data-test-subj":"kbnRedirectAppLink"},s),e)},be=({children:e,...t})=>Object(T.jsx)(pe,A()({},function(){const e=Object(n.useContext)(ue);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e);var ge=a(344),me=a.n(ge);const he=i.i18n.translate("sharedUXPackages.card.noData.noPermission.title",{defaultMessage:"Contact your administrator"}),fe=i.i18n.translate("sharedUXPackages.card.noData.noPermission.description",{defaultMessage:"This integration is not yet enabled. Your administrator has the required permissions to turn it on."}),ve=i.i18n.translate("sharedUXPackages.card.noData.title",{defaultMessage:"Add Elastic Agent"}),xe=i.i18n.translate("sharedUXPackages.card.noData.description",{defaultMessage:"Use Elastic Agent for a simple, unified way to collect data from your machines."}),je=()=>Object(T.jsx)(q.EuiImage,{size:"fullWidth",style:{width:"max(100%, 360px)",height:240,objectFit:"cover",background:"aliceblue"},url:me.a,alt:""}),ye=({title:e,description:t,canAccessFleet:a,button:n,href:s,...o})=>Object(T.jsx)(q.EuiCard,A()({css:{maxWidth:400,marginInline:"auto"},paddingSize:"l",title:a?Object(T.jsx)(q.EuiScreenReaderOnly,null,Object(T.jsx)("span",null,e||ve)):Object(T.jsx)(q.EuiTextColor,{color:"default"},he),description:a?t||xe:Object(T.jsx)(q.EuiTextColor,{color:"default"},fe),footer:(()=>{if(a)return n&&"string"!=typeof n?n:Object(T.jsx)(q.EuiButton,{fill:!0,href:s,"data-test-subj":"noDataDefaultFooterAction"},n||e||ve)})(),isDisabled:!a,href:s,image:Object(T.jsx)(je,null)},o)),Oe=s.a.createContext(null),we=({href:e,category:t,description:a,...s})=>{var o;const{canAccessFleet:r,addBasePath:i}=function(){const e=Object(n.useContext)(Oe);if(!e)throw new Error("NoDataCard Context is missing.  Ensure your component or React root is wrapped with NoDataCardContext.");return e}(),l=Object(n.useMemo)((()=>{if(e)return e;const a="/app/integrations/browse";return i(t?`${a}/${t}`:a)}),[i,e,t]);return Object(T.jsx)(be,null,Object(T.jsx)(ye,A()({},s,{href:l,canAccessFleet:null!==(o=s.canAccessFleet)&&void 0!==o?o:r,description:a})))},ke=({action:e})=>{const t=Object.keys(e);if(1!==t.length)return null;const a=t[0],n="elasticAgent"===a?"empty-page-agent-action":`empty-page-${a}-action`;return Object(T.jsx)(we,A()({key:n},e[a]))},_e=({solution:e,logo:t,action:a,docsLink:n,pageTitle:s,pageDescription:o,className:r})=>{const l=s||i.i18n.translate("sharedUXPackages.noDataPage.welcomeTitle",{defaultMessage:"Welcome to Elastic {solution}!",values:{solution:e}}),c=n?Object(T.jsx)(q.EuiLink,{href:n,target:"_blank"},Object(T.jsx)(Y.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro.link",defaultMessage:"learn more"})):null,u=null!=o?o:c?Object(T.jsx)(Y.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro",defaultMessage:"Add your data to get started, or {link} about {solution}.",values:{solution:e,link:c}}):Object(T.jsx)(Y.FormattedMessage,{id:"sharedUXPackages.noDataPage.introNoDocLink",defaultMessage:"Add your data to get started."});return Object(T.jsx)(q.EuiPageTemplate.Section,{alignment:"center",grow:!0,className:X()("kbnNoDataPageContents",r),"data-test-subj":"kbnNoDataPage"},Object(T.jsx)(q.EuiText,{textAlign:"center"},Object(T.jsx)(Z,{name:e,iconType:t||`logo${e}`,size:"xxl"}),Object(T.jsx)(q.EuiSpacer,{size:"l"}),Object(T.jsx)("h1",null,l),Object(T.jsx)(q.EuiTextColor,{color:"subdued"},Object(T.jsx)("p",null,u))),Object(T.jsx)(q.EuiSpacer,{size:"xxl"}),Object(T.jsx)(ke,{action:a}))},Se=e=>{const{className:t,noDataConfig:a,pageSideBar:n,pageSideBarProps:s,...o}=e;if(!a)return null;let r;n&&(r=Object(T.jsx)(q.EuiPageTemplate.Sidebar,s,n));const i=((e,t)=>X()("kbnPageTemplate","",t||""))(0,t);return Object(T.jsx)(q.EuiPageTemplate,A()({className:i,restrictWidth:950,panelled:!1,offset:0,minHeight:0},o),r,Object(T.jsx)(_e,a))},Ee=ie(Se),Me=({className:e,pageHeader:t,children:a,isEmptyState:n,pageSideBar:s,pageSideBarProps:o,emptyPageBody:r,...i})=>{let l,c;if(n&&t&&!a){const{iconType:e,pageTitle:n,description:s,rightSideItems:o}=t,r=n?Object(T.jsx)("h1",null,n):void 0,i=s?Object(T.jsx)("p",null,s):void 0;a=Object(T.jsx)(q.EuiPageTemplate.EmptyPrompt,{iconType:e,iconColor:"",title:r,body:i,actions:o})}else t&&(l=Object(T.jsx)(q.EuiPageTemplate.Header,t));if(n&&r&&(a=r),s){const e={...o};e.sticky=!0,c=Object(T.jsx)(q.EuiPageTemplate.Sidebar,e,s)}const u=((e,t)=>X()("kbnPageTemplate","",t||""))(0,e);return Object(T.jsx)(q.EuiPageTemplate,A()({className:u,offset:0,minHeight:l?"calc(100vh - var(--kbnAppHeadersOffset, var(--euiFixedHeadersOffset, 0)))":0,grow:!l&&void 0},i),c,l,a)},Ce=ie(Me),Te=Object.assign((({className:e,children:t,solutionNav:a,noDataConfig:n,...s})=>n&&a?Object(T.jsx)(Ee,{"data-test-subj":s["data-test-subj"],className:e,noDataConfig:n,solutionNav:a}):n?Object(T.jsx)(Se,{"data-test-subj":s["data-test-subj"],className:e,noDataConfig:n}):a?Object(T.jsx)(Ce,A()({className:e,solutionNav:a,children:t},s)):Object(T.jsx)(Me,A()({className:e,children:t},s))),{Sidebar:q.EuiPageTemplate.Sidebar,Header:q.EuiPageTemplate.Header,Section:q.EuiPageTemplate.Section,BottomBar:q.EuiPageTemplate.BottomBar,EmptyPrompt:q.EuiPageTemplate.EmptyPrompt});var Pe=a(25),Ne=a(78),Ae=a(96);const Ie=({canUserWrite:e,disabled:t,...a})=>Object(T.jsx)(q.EuiButton,A()({},a,{iconType:"plusInCircleFilled",fill:!0,disabled:!e&&!t,"data-test-subj":"create-workpad-button"}),Fe.getWorkpadCreateButtonLabel()),Fe={getWorkpadCreateButtonLabel:()=>i.i18n.translate("xpack.canvas.workpadCreate.createButtonLabel",{defaultMessage:"Create workpad"})},Le=e=>{const t=Object(Ae.c)(),{canUserWrite:a}=Object(l.useSelector)((e=>({canUserWrite:Object(Ne.a)(e)})));return Object(T.jsx)(Ie,A()({},e,{onClick:async()=>{await t()},canUserWrite:a}))},De=s.a.lazy((()=>a.e(14).then(a.bind(null,445)))),ze=s.a.lazy((()=>a.e(11).then(a.bind(null,443)))),Re=Object(Pe.withSuspense)(De),Be=Object(Pe.withSuspense)(ze),He=({activeTab:e="workpads"})=>{const[t,a]=Object(n.useState)(e);return Object(T.jsx)(Te,{pageHeader:{pageTitle:"Canvas",rightSideItems:[Object(T.jsx)(Le,null)],tabs:[{label:We.getMyWorkpadsTabLabel(),id:"myWorkpads","data-test-subj":"workpadListing",isSelected:"workpads"===t,onClick:()=>a("workpads")},{label:We.getWorkpadTemplatesTabLabel(),id:"workpadTemplates","data-test-subj":"workpadTemplates",isSelected:"templates"===t,onClick:()=>a("templates")}]}},Object(T.jsx)(Te.Section,null,"workpads"===t?Object(T.jsx)(Be,null):Object(T.jsx)(Re,null)))},We={getMyWorkpadsTabLabel:()=>i.i18n.translate("xpack.canvas.home.myWorkpadsTabLabel",{defaultMessage:"My workpads"}),getWorkpadTemplatesTabLabel:()=>i.i18n.translate("xpack.canvas.home.workpadTemplatesTabLabel",{defaultMessage:"Templates",description:"The label for the tab that displays a list of designed workpad templates."})},Ve=()=>{const[e,t]=Object(n.useState)(!1),a=Object(l.useDispatch)();return Object(n.useEffect)((()=>{e||(a(Object(U.e)()),t(!0))}),[a,e,t]),Object(T.jsx)(He,null)},Ge=({onLoad:e=(()=>{})})=>(e(),Object(W.b)("Canvas"),Object(T.jsx)(Ve,null)),Ue=()=>{const{setBreadcrumbs:e}=Object(h.usePlatformService)(),t=Object(l.useDispatch)(),a=Object(M.useHistory)();return Object(n.useEffect)((()=>{e([V(a)])}),[e,a]),Object(T.jsx)(Ge,{onLoad:()=>t(Object(U.e)())})};var $e=a(67),qe=a(63),Ke=a(84),Xe=a.n(Ke),Ye=a(70),Ze=a(90),Je=a(0),Qe=a(7);const et=e=>{Object(Qe.a)().set(Je.x,JSON.stringify(e))},tt=()=>Object(Qe.a)().get(Je.x);var at=a(148),nt=a(82);const st=e=>e.id,ot={cloneNodes:({insertNodes:e,pageId:t,selectToplevelNodes:a,selectedNodes:n})=>()=>{const s=n&&Object(at.a)(n);s&&(e(s,t),a(s))},deleteNodes:({pageId:e,removeNodes:t,selectedNodes:a})=>()=>{a.length&&t(a.map(st),e)},createCustomElement:({selectedNodes:e})=>(t="",a="",n="")=>{const s=h.pluginServices.getServices().notify,o=h.pluginServices.getServices().customElement;if(e.length){const r=JSON.stringify({selectedNodes:e}),i={id:Object(nt.a)("custom-element"),name:Object(c.camelCase)(t),displayName:t,help:a,image:n,content:r};o.create(i).then((()=>s.success(`Custom element '${i.displayName||i.id}' was saved`,{"data-test-subj":"canvasCustomElementCreate-success"}))).catch((e=>s.warning(e,{title:`Custom element '${i.displayName||i.id}' was not saved`})))}}},rt=Object.assign({},...["alignLeft","alignCenter","alignRight","alignTop","alignMiddle","alignBottom","distributeHorizontally","distributeVertically"].map((e=>({[e]:({commit:t})=>()=>{t("actionEvent",{event:e})}})))),it={groupNodes:({commit:e})=>()=>{e("actionEvent",{event:"group"})},ungroupNodes:({commit:e})=>()=>{e("actionEvent",{event:"ungroup"})}},lt={cutNodes:({pageId:e,removeNodes:t,selectedNodes:a})=>()=>{const n=h.pluginServices.getServices().notify;a.length&&(et({selectedNodes:a}),t(a.map(st),e),n.success("Cut element to clipboard"))},copyNodes:({selectedNodes:e})=>()=>{const t=h.pluginServices.getServices().notify;e.length&&(et({selectedNodes:e}),t.success("Copied element to clipboard"))},pasteNodes:({insertNodes:e,pageId:t,selectToplevelNodes:a})=>()=>{const{selectedNodes:n=[]}=JSON.parse(tt())||{},s=n&&Object(at.a)(n);s&&(e(s,t),a(s))}},ct={bringToFront:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,1/0)},bringForward:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,1)},sendBackward:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,-1)},sendToBack:({elementLayer:e,pageId:t,selectedNodes:a})=>()=>{1===a.length&&e(t,a[0].id,-1/0)}},ut={shiftUp:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top-=Je.t,e))))},shiftDown:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top+=Je.t,e))))},shiftLeft:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left-=Je.t,e))))},shiftRight:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left+=Je.t,e))))},nudgeUp:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top-=Je.s,e))))},nudgeDown:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.top+=Je.s,e))))},nudgeLeft:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left-=Je.s,e))))},nudgeRight:({selectedNodes:e,setMultiplePositions:t})=>()=>{t(e.map((e=>(e.position.left+=Je.s,e))))}};var dt=a(73),pt=a(83);const bt=[NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN,NaN],gt=[0,0,0,1],mt=[1,0,0,1],ht=[0,1,0,1],ft=[-1,1,0,1],vt=[1,1,0,1],xt=[-1,-1,0,1],jt=[1,-1,0,1],yt=(e,t,a)=>[1,0,0,0,0,1,0,0,0,0,1,0,e,t,a,1],Ot=(e,t,a)=>[e,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1],wt=e=>{const t=Math.sin(e),a=Math.cos(e);return[a,-t,0,0,t,a,0,0,0,0,1,0,0,0,0,1]},kt=(e,...t)=>t.reduce(((e,t)=>(([e,t,a,n,s,o,r,i,l,c,u,d,p,b,g,m],[h,f,v,x,j,y,O,w,k,_,S,E,M,C,T,P])=>[e*h+s*f+l*v+p*x,t*h+o*f+c*v+b*x,a*h+r*f+u*v+g*x,n*h+i*f+d*v+m*x,e*j+s*y+l*O+p*w,t*j+o*y+c*O+b*w,a*j+r*y+u*O+g*w,n*j+i*y+d*O+m*w,e*k+s*_+l*S+p*E,t*k+o*_+c*S+b*E,a*k+r*_+u*S+g*E,n*k+i*_+d*S+m*E,e*M+s*C+l*T+p*P,t*M+o*C+c*T+b*P,a*M+r*C+u*T+g*P,n*M+i*C+d*T+m*P])(e,t)),e),_t=([e,t,a,n,s,o,r,i,l,c,u,d,p,b,g,m],[h,f,v,x])=>[e*h+s*f+l*v+p*x,t*h+o*f+c*v+b*x,a*h+r*f+u*v+g*x,n*h+i*f+d*v+m*x],St=([e,t,a,n])=>1===n?[e,t,a,n]:[e/n,t/n,a/n,1],Et=([e,t,a,n,s,o,r,i,l,c,u,d,p,b,g,m])=>{const h=[o*u*m-o*d*g-c*r*m+c*i*g+b*r*d-b*i*u,-t*u*m+t*d*g+c*a*m-c*n*g-b*a*d+b*n*u,t*r*m-t*i*g-o*a*m+o*n*g+b*a*i-b*n*r,-t*r*d+t*i*u+o*a*d-o*n*u-c*a*i+c*n*r,-s*u*m+s*d*g+l*r*m-l*i*g-p*r*d+p*i*u,e*u*m-e*d*g-l*a*m+l*n*g+p*a*d-p*n*u,-e*r*m+e*i*g+s*a*m-s*n*g-p*a*i+p*n*r,e*r*d-e*i*u-s*a*d+s*n*u+l*a*i-l*n*r,s*c*m-s*d*b-l*o*m+l*i*b+p*o*d-p*i*c,-e*c*m+e*d*b+l*t*m-l*n*b-p*t*d+p*n*c,e*o*m-e*i*b-s*t*m+s*n*b+p*t*i-p*n*o,-e*o*d+e*i*c+s*t*d-s*n*c-l*t*i+l*n*o,-s*c*g+s*u*b+l*o*g-l*r*b-p*o*u+p*r*c,e*c*g-e*u*b-l*t*g+l*a*b+p*t*u-p*a*c,-e*o*g+e*r*b+s*t*g-s*a*b-p*t*r+p*a*o,e*o*u-e*r*c-s*t*u+s*a*c+l*t*r-l*a*o],f=e*h[0]+t*h[4]+a*h[8]+n*h[12];if(0===f)return bt;{const e=1/f;for(let t=0;t<16;t++)h[t]*=e;return h}},Mt=e=>[1,0,0,0,0,1,0,0,0,0,1,0,e[12],e[13],e[14],1],Ct=([e,t,a,n,s,o,r,i,l,c,u,d,p,b,g,m])=>[e,t,a,n,s,o,r,i,l,c,u,d,0,0,0,m],Tt=e=>1===e.length?e[0]:e.slice(1).reduce(((e,t)=>kt(e,t)),e[0]),Pt=(e,t,a)=>Math.min(t,Math.max(e,a)),Nt=e=>{const t=Math.acos(Pt(-1,1,e[0]));return Math.asin(Pt(-1,1,e[1]))>0?t:-t},At=[1,0,0,0,1,0,0,0,1],It=(e,t)=>[1,0,0,0,1,0,e,t,1],Ft=(e,...t)=>t.reduce(((e,t)=>(([e,t,a,n,s,o,r,i,l],[c,u,d,p,b,g,m,h,f])=>[e*c+n*u+r*d,t*c+s*u+i*d,a*c+o*u+l*d,e*p+n*b+r*g,t*p+s*b+i*g,a*p+o*b+l*g,e*m+n*h+r*f,t*m+s*h+i*f,a*m+o*h+l*f])(e,t)),e),Lt=([e,t,a],[n,s,o])=>[e*n,t*s,a*o],Dt=({transformMatrix:e,a:t,b:a},n,s)=>{const{inverseProjection:o,planeVector:r}=((e,t,a)=>{const n=St(_t(e,gt)),s=St(_t(e,mt)),o=St(_t(e,ht)),r=s[0]-n[0],i=s[1]-n[1],l=o[0]-n[0],c=o[1]-n[1]||1e-11,u=c?s[2]-n[2]:0,d=c?o[2]-n[2]:0,p=Et(e),b=1/(r-i/c*l),g=-b*l/c,m=-b*n[0]-g*n[1],h=-1/c,f=n[2]+u*m+d*h*(n[1]+m*i),v=b*(u+d*i*h),x=-d*h+g*(u+d*i*h);return{inverseProjection:p,planeVector:0===c?[t,a,n[2],1]:[v,x,f]}})(e,n,s),i=(([e,t,a],[n,s,o])=>e*n+t*s+a*o)(r,[n,s,1]),l=St(_t(o,[n,s,i,1])),[c,u]=l;return{z:i,intersection:l,inside:Math.abs(c)<=t&&Math.abs(u)<=a}},zt=(e,t,a,n,s)=>((e,t,a)=>St(_t(e,[t,a,0,1])))(a,n*e,s*t),Rt={},Bt=[[-1,-1,315],[1,-1,45],[1,1,135],[-1,1,225],[0,-1,0],[1,0,90],[0,1,180],[-1,0,270]],Ht=[[[-1,-1],[0,-1]],[[0,-1],[1,-1]],[[1,-1],[1,0]],[[1,0],[1,1]],[[1,1],[0,1]],[[0,1],[-1,1]],[[-1,1],[-1,0]],[[-1,0],[-1,-1]]],Wt=[[-1,-1],[1,-1],[-1,1],[1,1]],Vt={left:-1,center:0,right:1},Gt={top:-1,center:0,bottom:1},Ut={"-1":"left",0:"center",1:"right"},$t={"-1":"top",0:"center",1:"bottom"},qt={0:"ns-resize",45:"nesw-resize",90:"ew-resize",135:"nwse-resize",180:"ns-resize",225:"nesw-resize",270:"ew-resize",315:"nwse-resize"},Kt=([[e,t],[a,n]],[s,o],[r,i])=>[[Math.min(e,s,r),Math.min(t,o,i)],[Math.max(a,s,r),Math.max(n,o,i)]],Xt=(e,t)=>Wt.reduce(((t,a)=>{const n=St(_t(e.transformMatrix,[e.a*a[0],e.b*a[1],0,1]));return Kt(t,n,n)}),t),Yt={deltaX:0,deltaY:0,transform:null,cumulativeTransform:null},Zt=e=>t=>"annotation"===t.type?Zt(e)(e.find((e=>e.id===t.parent))):t,Jt=e=>"annotation"===e.type?e.parent:e.id,Qt=(e,{a:t,b:a,baseAB:n},s)=>[Math.max(n?e-n[0]:e-t,s[0]),Math.max(n?e-n[1]:e-a,s[1])],ea=e=>({gesture:t,shape:a,directShape:n})=>{const s=t.cumulativeTransform;if(!a||!n)return{transforms:[],shapes:[]};const o=_t(kt(Et(Ct(a.localTransformMatrix)),s),gt),r=[Vt[n.horizontalPosition],Gt[n.verticalPosition],0],i=Lt(o,r),l=Qt(e.minimumElementSize,a,i);return{cumulativeTransforms:[],cumulativeSizes:[t.sizes||It(...l)],shapes:[a.id]}},ta=e=>({gesture:t,shape:a,directShape:n})=>{const s=t.cumulativeTransform;if(!a||!n)return{transforms:[],shapes:[]};const o=Ct(a.localTransformMatrix),r=Et(o),i=_t(kt(r,s),gt),l=[Vt[n.horizontalPosition]/2,Gt[n.verticalPosition]/2,0],c=Lt(i,l),u=Qt(e.minimumElementSize,a,c),d=_t(kt(o,Ot(Vt[n.horizontalPosition],Gt[n.verticalPosition],1),yt(u[0],u[1],0)),gt),p=t.sizes||It(...u);return{cumulativeTransforms:[yt(d[0],d[1],0)],cumulativeSizes:[p],shapes:[a.id]}},aa=(e,t)=>[{cumulativeTransforms:e,shapes:t.map((e=>"annotation"!==e.type&&e.id)).filter(Ze.d)}],na=(e,t,a,n,s,o)=>{const r=a.map((t=>"annotation"===t.type&&t.subtype===e.rotationHandleName&&t.parent)).map((e=>e&&n.find((t=>t.id===e))));return Object(Ze.c)(r.map(((e,n)=>t.map((t=>({transform:t,shape:e,directShape:a[n],cursorPosition:s,alterSnapGesture:o})))))).map((e=>({shape:t,directShape:a,cursorPosition:{x:n,y:s},alterSnapGesture:o})=>{if(!t||!a)return{transforms:[],shapes:[]};const r=t.transformMatrix,i=_t(r,gt),l=_t(kt(r,a.localTransformMatrix),gt),c=Math.atan2(i[1]-l[1],i[0]-l[0]),u=Math.atan2(i[1]-s,i[0]-n),d=Math.round(u/(Math.PI/12))*Math.PI/12,p=Math.sqrt(Math.pow(i[0]-n,2)+Math.pow(i[1]-s,2)),b=[Math.cos(d)*p,Math.sin(d)*p],g=Math.sqrt(Math.pow(b[0]-(i[0]-n),2)+Math.pow(b[1]-(i[1]-s),2)),m=-1!==o.indexOf("relax"),h=g<e.rotateSnapInPixels&&!m?d:u;return{transforms:[wt(c-h)],shapes:[t.id]}})(e))},sa=(e,t,a,n,s)=>{const o=a.map((t=>"annotation"===t.type&&t.subtype===e.resizeHandleName&&t.parent)).map((e=>e&&n.find((t=>t.id===e))));return Object(Ze.c)(o.map(((e,n)=>t.map((t=>({gesture:t,shape:e,directShape:a[n]})))))).map(s)},oa=e=>t=>{if(0!==t[12]||0!==t[13]){const a=Ct(e),n=Et(a);return Mt(kt(n,t))}return t},ra=e=>e?0:1,ia=(e,t,a)=>{const n=ra(a);return 0===t?(e[0][n]+e[1][n])/2:e[(t+1)/2][n]},la=(e,t)=>t.parent?la(e,e.find((e=>e.id===t.parent))).concat([t]):[t],ca=e=>e.a+(e.snapResizeVector?e.snapResizeVector[0]:0),ua=e=>e.b+(e.snapResizeVector?e.snapResizeVector[1]:0),da=(e,t)=>{if(!t.parent)return t.localTransformMatrix;const a=la(e,t).map((e=>e.localTransformMatrix));return Tt(a)},pa=(e,t)=>{const a=e=>e.snapDeltaMatrix?kt(e.localTransformMatrix,e.snapDeltaMatrix):e.localTransformMatrix;if(!t.parent)return a(t);const n=la(e,t).map(a);return Tt(n)},ba=e=>"horizontal"===e.dimension,ga=e=>"vertical"===e.dimension,ma=(e={distance:1/0},t)=>t.distance<e.distance?{constraint:t,distance:t.distance}:e,ha=(e,t)=>{const a=e.filter(t).reduce(ma,void 0);return a&&a.constraint},fa=(e,t,a,n,s)=>{const o=t.find((e=>n.id===e.id));if(!o)return!1;if("annotation"===o.type)return fa(e,t,a,t.find((e=>o.parent===e.id)),s);const r=ua(o),i=yt(0,-r,0),l=yt(0,-e.rotateAnnotationOffset,e.atopZ),c=kt(i,l);return{id:e.rotationHandleName+"_"+s,type:"annotation",subtype:e.rotationHandleName,interactive:!0,parent:o.id,localTransformMatrix:c,a:e.rotationHandleSize,b:e.rotationHandleSize}},va=(e,t,a,n)=>([s,o,r])=>{const i=yt(s*a,o*n,e.resizeAnnotationOffsetZ),l=yt(-s*e.resizeAnnotationOffset,-o*e.resizeAnnotationOffset,e.atopZ+10),c=kt(i,l),u=Ut[s],d=$t[o];return{id:[e.resizeHandleName,u,d,t.id].join("_"),type:"annotation",subtype:e.resizeHandleName,horizontalPosition:u,verticalPosition:d,cursorAngle:r,interactive:!0,parent:t.id,localTransformMatrix:c,backgroundColor:"rgb(0,255,0,1)",a:e.resizeAnnotationSize,b:e.resizeAnnotationSize}},xa=(e,t,a,n)=>([[s,o],[r,i]])=>{const l=a*Object(Ze.e)(s,r),c=n*Object(Ze.e)(o,i),u=yt(l,c,e.atopZ-10),d=o===i,p=d?a*Math.abs(r-s):n*Math.abs(i-o),b=Math.max(0,p/2-e.resizeAnnotationConnectorOffset);return{id:[e.resizeConnectorName,Ut[s],$t[o],Ut[r],$t[i],t].join("_"),type:"annotation",subtype:e.resizeConnectorName,interactive:!0,parent:t.id,localTransformMatrix:u,backgroundColor:e.devColor,a:d?b:.5,b:d?.5:b}},ja=(e,t,a)=>{const n=e.rotationEpsilon,s=2*Math.PI,o=e=>{const t=Nt(e.localTransformMatrix)/s;return Math.abs(Math.round(t)-t)<n};function r(e){return a.filter((t=e,e=>e.parent===t.id)).every(i);var t}function i(e){return o(e)&&r(e)}return r(t)};function ya(e,t,a,n){const s=t.find((e=>n.id===e.id)),o=s&&(s.subtype===e.resizeHandleName?t.find((e=>n.parent===e.id)):s);if(!s)return[];if(s.subtype===e.resizeHandleName)return s.interactive?Oa(e,{shapes:t,selectedShapes:[t.find((e=>n.parent===e.id))]}):[];if("annotation"===s.type)return ya(e,t,a,t.find((e=>s.parent===e.id)));const r=ca(o),i=ua(o);return[...("group"!==o.type||e.groupResize&&ja(e,o,t.filter((e=>"annotation"!==e.type)))?Bt:[]).map(va(e,n,r,i)),...Ht.map(xa(e,n,r,i))]}function Oa(e,{shapes:t,selectedShapes:a}){const n=a;return Object(Ze.c)(n.map((n=>ya(e,t,a,n))).filter(Ze.d))}const wa=e=>{const t={...e};return e.snapDeltaMatrix&&(t.localTransformMatrix=kt(e.localTransformMatrix,e.snapDeltaMatrix),t.snapDeltaMatrix=null),e.snapResizeVector&&(t.a=ca(e),t.b=ua(e),t.snapResizeVector=null),t},ka=(e,t,a)=>({shapes:t.filter((t=>!e.find((e=>t.id===e.id)))).map((a=>{const n=e.find((e=>e.id===a.parent));return n?{...a,parent:null,localTransformMatrix:kt(t.find((e=>e.id===n.id)).localTransformMatrix,a.localTransformMatrix)}:a})),selectedShapes:a.filter((t=>!e.find((e=>e.id===t.id))))}),_a=(e,t)=>{return t.filter((a=e,e=>!a.some((t=>e.parent===t.id))));var a},Sa=e=>{e.childBaseAB&&(e.childBaseAB=null,e.baseLocalTransformMatrix=null)},Ea=({a:e,b:t},a)=>{const n=1e-6,s=Math.max(e/a[0],n),o=Math.max(t/a[1],n);return Ot(s,o,1)},Ma=e=>t=>{const a=t.childBaseAB||[t.a,t.b],n=Ot(...a,1),s=Et(n),o=t.baseLocalTransformMatrix||t.localTransformMatrix,r=kt(o,n),i=kt(e,r),l=e.map((e=>Math.abs(e))),c=Et(l),u=_t(kt(l,n),[1,1,1,1]);t.localTransformMatrix=kt(i,kt(s,c)),t.a=u[0],t.b=u[1],t.childBaseAB=a,t.baseLocalTransformMatrix=o},Ca=(e,t)=>{const a={};for(const t of e)a[t.id]=t;const n={},s=e=>e.parent?s(a[e.parent])+1:0;for(const t of e)n[t.id]=s(t);const o={[t.id]:t},r=e.slice().sort(((e,t)=>n[e.id]-n[t.id]));for(const e of r){const t=o[e.parent];t&&(o[e.id]=e,i=t,Boolean(i.childBaseAB||i.baseAB)?Ma(Ea(t,t.childBaseAB||t.baseAB))(e):Sa(e))}var i;return r},Ta=(e,t)=>({shapes:e,selectedShapes:t}),Pa=(e,t,a,n,s,o,r)=>{const i=!t.depthSelect||!n||a.length&&"annotation"===a[0].type?0:(e.depthIndex+(e.down?0:1))%a.length;return{shapes:a.length?[a[i]]:[],uid:s,depthIndex:a.length?i:0,down:!0,boxHighlightedShapes:r}},Na=(e,t,a,n,s,o,r)=>({shapes:a.length>0?Object(Ze.b)((e=>e.id),o,a.slice(0,1)):[],uid:s,depthIndex:0,down:!1,boxHighlightedShapes:r}),Aa=(e,t)=>a=>({...a,id:e+"_"+a.id,type:"annotation",subtype:e,interactive:!1,localTransformMatrix:kt(a.localTransformMatrix,yt(0,0,t)),parent:a.parent}),Ia={alignLeft:{type:"alignLeftAction",horizontal:!0,controlledAnchor:-1,controllingAnchor:-1},alignCenter:{type:"alignCenterAction",horizontal:!0,controlledAnchor:0,controllingAnchor:0},alignRight:{type:"alignRightAction",horizontal:!0,controlledAnchor:1,controllingAnchor:1},alignTop:{type:"alignTopAction",horizontal:!1,controlledAnchor:-1,controllingAnchor:-1},alignMiddle:{type:"alignMiddleAction",horizontal:!1,controlledAnchor:0,controllingAnchor:0},alignBottom:{type:"alignBottomAction",horizontal:!1,controlledAnchor:1,controllingAnchor:1}},Fa={distributeHorizontally:{type:"distributeHorizontallyAction",horizontal:!0},distributeVertically:{type:"distributeVerticallyAction",horizontal:!1}};var La=a(107);const Da=e=>Object(La.a)(e)?{id:e,type:"group",subtype:"persistentGroup"}:{id:e,type:"rectangleElement",subtype:""},za=({top:e,left:t,width:a,height:n,angle:s},o)=>kt(yt(t+a/2,e+n/2,o),wt(-s/180*Math.PI)),Ra=({id:e,position:t,filter:a},n)=>({...Da(e),width:t.width,height:t.height,transformMatrix:za(t,n),filter:a}),Ba=({elements:e})=>({elements:e.map(Ra)}),Ha=e=>({left:e.transformMatrix[12]-e.a,top:e.transformMatrix[13]-e.b,width:2*e.a,height:2*e.b,angle:Math.round(180*Nt(e.transformMatrix)/Math.PI),parent:e.parent||null,type:"group"===e.type?"group":"element"}),Wa=(e,t,a)=>a.findIndex((t=>t.id===e.id))===t,Va=(e,t)=>a=>{const n=a.currentScene,s=Object($e.r)(t),o=Object($e.j)(t,s),r=n.shapes,i=r.filter((e=>"persistentGroup"===e.subtype)).filter(Wa),l=o.filter((e=>Object(La.a)(e.id))).filter(Wa);i.forEach((t=>{if(!l.find((e=>{if(!e.id)throw new Error("Element has no id");return e.id===t.id}))){const a={id:t.id,filter:void 0,expression:'shape fill="rgba(255,255,255,0)" | render',position:{...Ha(t)}};e(Object(Ye.b)(s,a))}}));const c=l.filter((e=>!i.find((t=>e.id===t.id))||!o.find((t=>t.position.parent===e.id))));((e,t,a)=>{const n=((e,{shapes:t,gestureEnd:a},n)=>{const s=(e,t)=>e.id<t.id?-1:1,o=e=>"annotation"!==e.type&&"adHocGroup"!==e.subtype,r=n.filter(o).sort(s);return t.filter(o).sort(s).map(((e,t)=>{const n=r[t],s=n&&n.position;if(s&&a){const t={left:s.left,top:s.top,width:s.width,height:s.height,angle:Math.round(s.angle),type:s.type,parent:s.parent||null},a=Ha(e);return 1/a.angle==-1/0&&(a.angle=0),Object(dt.shallowEqual)(t,a)?null:{position:a,elementId:e.id}}})).filter(Ze.d)})(0,t,a);n.length&&e(n)})((t=>e(Object(Ye.p)(t.map((e=>({...e,pageId:s})))))),n,o),c.length&&e(Object(Ye.k)(c.map((e=>e.id)),s));const u=n.selectedPrimaryShapes;Object(dt.shallowEqual)(u,t.transient.selectedToplevelNodes)||e(Object(pt.a)(Object(Ze.c)(u.map((e=>e.startsWith("group")&&"adHocGroup"===(r.find((t=>t.id===e))||{}).subtype?r.filter((t=>"annotation"!==t.type&&t.parent===e)).map((e=>e.id)):[e])))))},Ga=e=>t=>{const a=t=>[t,...Object(Ze.c)(e.filter((e=>e.position.parent===t)).map((e=>a(e.id))))];return a(t)},Ua=()=>{const e=navigator.platform.toLowerCase();return e.indexOf("mac")>=0?"osx":e.indexOf("win")>=0?"windows":e.indexOf("linux")>=0?"linux":"other"},$a=e=>{if(!e)return"";let t=e.toUpperCase();return t=t.replace(/command/i,"⌘"),t=t.replace(/option/i,"⌥"),t=t.replace(/left/i,"←"),t=t.replace(/right/i,"→"),t=t.replace(/up/i,"↑"),t=t.replace(/down/i,"↓"),t=t.replace(/plus/i,"+"),t=t.replace(/minus/i,"-"),t},qa=Ua(),Ka=Object(dt.compose)(Object(dt.mapProps)((({namespace:e,action:t})=>{const a=S[e][t];if("string"==typeof a)return{shortcut:""};const n=a[qa]||[];return{shortcut:$a(n[0])}})))((({shortcut:e})=>Object(T.jsx)(q.EuiText,{size:"xs",textAlign:"center",color:"ghost"},e.replace(/\+/g," + ")))),Xa=v.a.getShortcutHelp(),Ya=({title:e,showLayerControls:t=!1,bringToFront:a,bringForward:n,sendBackward:s,sendToBack:o})=>Object(T.jsx)(q.EuiFlexGroup,{className:"canvasLayout__sidebarHeader",gutterSize:"none",alignItems:"center",justifyContent:"spaceBetween"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiTitle,{size:"xs"},Object(T.jsx)("h3",null,e))),t?Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Object(T.jsx)("span",null,Xa.BRING_TO_FRONT,Object(T.jsx)(Ka,{namespace:"ELEMENT",action:"BRING_TO_FRONT"}))},Object(T.jsx)(q.EuiButtonIcon,{color:"text",iconType:"sortUp",onClick:a,"aria-label":i.i18n.translate("xpack.canvas.sidebarHeader.bringToFrontArialLabel",{defaultMessage:"Move element to top layer"})}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Object(T.jsx)("span",null,Xa.BRING_FORWARD,Object(T.jsx)(Ka,{namespace:"ELEMENT",action:"BRING_FORWARD"}))},Object(T.jsx)(q.EuiButtonIcon,{color:"text",iconType:"arrowUp",onClick:n,"aria-label":i.i18n.translate("xpack.canvas.sidebarHeader.bringForwardArialLabel",{defaultMessage:"Move element up one layer"})}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Object(T.jsx)("span",null,Xa.SEND_BACKWARD,Object(T.jsx)(Ka,{namespace:"ELEMENT",action:"SEND_BACKWARD"}))},Object(T.jsx)(q.EuiButtonIcon,{color:"text",iconType:"arrowDown",onClick:s,"aria-label":i.i18n.translate("xpack.canvas.sidebarHeader.sendBackwardArialLabel",{defaultMessage:"Move element down one layer"})}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Object(T.jsx)("span",null,Xa.SEND_TO_BACK,Object(T.jsx)(Ka,{namespace:"ELEMENT",action:"SEND_TO_BACK"}))},Object(T.jsx)(q.EuiButtonIcon,{color:"text",iconType:"sortDown",onClick:o,"aria-label":i.i18n.translate("xpack.canvas.sidebarHeader.sendToBackArialLabel",{defaultMessage:"Move element to bottom layer"})}))))):null),Za=e=>{const t=Object(l.useSelector)((e=>Object($e.r)(e))),a=Object(l.useSelector)((e=>((e,t)=>{const a=Object($e.j)(e,t),n=Object($e.t)(e).map((e=>a.find((t=>t.id===e)))).filter((e=>e)),s=Object(Ze.c)(n.map((e=>a.find((t=>t.id===(null==e?void 0:e.id)))?[null==e?void 0:e.id]:a.filter((t=>{var a;return(null===(a=t.position)||void 0===a?void 0:a.parent)===(null==e?void 0:e.id)})).map((e=>e.id)))));return Object(Ze.c)(s.map(Ga(a))).map((e=>a.find((t=>t.id===e))))})(e,t)),Xe.a),n=Object(l.useDispatch)(),s={...e,pageId:t,selectedNodes:a,elementLayer:(e,t,a)=>{n(Object(Ye.d)({pageId:e,elementId:t,movement:a}))}},o=(r=ct,i=s,Object.keys(r).reduce(((e,t)=>(e[t]=r[t](i),e)),{}));var r,i;return Object(T.jsx)(Ya,A()({},e,o))},Ja=()=>Object(T.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.groupSettings.multipleElementsDescription",{defaultMessage:"Multiple elements are currently selected."})),Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.groupSettings.multipleElementsActionsDescription",{defaultMessage:"Deselect these elements to edit their individual settings, press ({gKey}) to group them, or save this selection as a new element to re-use it throughout your workpad.",values:{gKey:"G"}})))),Qa=()=>Object(T.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__panel--isEmpty"},Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.groupSettings.ungroupDescription",{defaultMessage:"Ungroup ({uKey}) to edit individual element settings.",values:{uKey:"U"}})),Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.groupSettings.saveGroupDescription",{defaultMessage:"Save this group as a new element to re-use it throughout your workpad."})))),en=Object(l.connect)((e=>({elementStats:Object($e.e)(e)})))((({elementStats:e})=>{if(!e)return null;const{total:t,ready:a,error:n}=e,s=t>0?Math.round((a+n)/t*100):100;return Object(T.jsx)("div",{className:"canvasSidebar__expandable"},Object(T.jsx)(q.EuiAccordion,{id:"canvas-element-stats",buttonContent:i.i18n.translate("xpack.canvas.elementConfig.title",{defaultMessage:"Element status",description:'"Elements" refers to the individual text, images, or visualizations that you can add to a Canvas workpad'}),initialIsOpen:!1,className:"canvasSidebar__accordion"},Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"none"},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiStat,{title:t,description:i.i18n.translate("xpack.canvas.elementConfig.totalLabel",{defaultMessage:"Total",description:"The label for the total number of elements in a workpad"}),titleSize:"xs"})),Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiStat,{title:a,description:i.i18n.translate("xpack.canvas.elementConfig.loadedLabel",{defaultMessage:"Loaded",description:"The label for the number of elements in a workpad that have loaded"}),titleSize:"xs"})),Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiStat,{title:n,description:i.i18n.translate("xpack.canvas.elementConfig.failedLabel",{defaultMessage:"Failed",description:"The label for the total number of elements in a workpad that have thrown an error or failed to load"}),titleSize:"xs"})),Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiStat,{title:s+"%",description:i.i18n.translate("xpack.canvas.elementConfig.progressLabel",{defaultMessage:"Progress",description:"The label for the percentage of elements that have finished loading"}),titleSize:"xs"}))))))}));var tn=a(68);function an(e){this.name=e.name,this.displayName=e.displayName||this.name,this.help=e.help||"",this.enter=e.enter||"",this.exit=e.exit||""}class transitions_registry_TransitionsRegistry extends tn.a{wrapper(e){return new an(e)}}const nn=new transitions_registry_TransitionsRegistry;var sn=a(95),on=a(103);const rn=e=>{const t=Object(l.useDispatch)(),a=Object(n.useCallback)((e=>t(Object(U.a)(e))),[t]),s=Object(n.useCallback)((e=>t(Object(U.d)(e))),[t]),o=Object(l.useSelector)($e.w);return Object(T.jsx)(on.a,A()({},e,{onAddColor:a,onRemoveColor:s,colors:o,hasButtons:!0,ariaLabel:i.i18n.translate("xpack.canvas.workpadConfig.backgroundColorLabel",{defaultMessage:"Background color"})}))},ln={stylePage:sn.g,setPageTransition:sn.f},cn=Object(l.connect)((e=>{const t=Object($e.s)(e);return{page:Object($e.l)(e)[t],pageIndex:t}}),ln,((e,t)=>({pageIndex:e.pageIndex,setBackground:a=>{const n={...e.page.style,background:a};t.stylePage(e.page.id,n)},background:Object(c.get)(e,"page.style.background"),transition:nn.get(Object(c.get)(e,"page.transition.name")),transitions:[{value:"",text:i.i18n.translate("xpack.canvas.pageConfig.transitions.noneDropDownOptionLabel",{defaultMessage:"None",description:"This is the option the user should choose if they do not want any page transition (i.e. fade in, fade out, etc) to be applied to the current page."})}].concat(nn.toArray().map((({name:e,displayName:t})=>({value:e,text:t})))),setTransition:a=>{t.setPageTransition(e.page.id,{name:a})}})))((({pageIndex:e,setBackground:t,background:a,transition:s,transitions:o,setTransition:r})=>Object(T.jsx)(n.Fragment,null,Object(T.jsx)(q.EuiTitle,{size:"xs",className:"canvasSidebar__panelTitleHeading"},Object(T.jsx)("h4",null,i.i18n.translate("xpack.canvas.pageConfig.title",{defaultMessage:"Page settings"}))),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiFormRow,{display:"columnCompressed",label:Object(T.jsx)(q.EuiToolTip,{content:i.i18n.translate("xpack.canvas.pageConfig.backgroundColorDescription",{defaultMessage:"Accepts HEX, RGB or HTML color names"})},Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.pageConfig.backgroundColorLabel",{defaultMessage:"Background"})," ",Object(T.jsx)(q.EuiIcon,{type:"questionInCircle",color:"subdued"})))},Object(T.jsx)(rn,{onChange:t,value:a})),e>0?Object(T.jsx)(n.Fragment,null,Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.pageConfig.transitionLabel",{defaultMessage:"Transition",description:"This refers to the transition effect, such as fade in or rotate,  applied to a page in presentation mode."}),display:"rowCompressed"},Object(T.jsx)(q.EuiSelect,{value:s?s.name:"",options:o,compressed:!0,onChange:e=>r(e.target.value)})),s?Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.pageConfig.transitionPreviewLabel",{defaultMessage:"Preview",description:"This is the label for a preview of the transition effect selected."}),display:"rowCompressed"},Object(T.jsx)(q.EuiCard,{title:"",description:"",className:s.enter,style:{height:"72px",width:"128px",background:a,animationDuration:"1s"}})):""):"")));var un=a(211),dn=a.n(un);const pn=({type:e,value:t,onChange:a})=>{const s=Object(q.htmlIdGenerator)()(),o=[{id:`${s}-true`,label:i.i18n.translate("xpack.canvas.varConfigVarValueField.trueOption",{defaultMessage:"True"})},{id:`${s}-false`,label:i.i18n.translate("xpack.canvas.varConfigVarValueField.falseOption",{defaultMessage:"False"})}],r=Object(n.useCallback)((e=>{const t=parseFloat(e.target.value),n=isNaN(t)?"":t;a(n)}),[a]);return"number"===e?Object(T.jsx)(q.EuiFieldNumber,{compressed:!0,name:"value",value:t,onChange:r}):"boolean"===e?Object(T.jsx)(q.EuiButtonGroup,{name:"value",options:o,idSelected:`${s}-${t}`,onChange:e=>{const t="true"===e.replace(`${s}-`,"");a(t)},buttonSize:"compressed",isFullWidth:!0,legend:i.i18n.translate("xpack.canvas.varConfigVarValueField.booleanOptionsLegend",{defaultMessage:"Boolean value"})}):Object(T.jsx)(q.EuiFieldText,{compressed:!0,name:"value",value:String(t),onChange:e=>a(e.target.value)})},bn=({variables:e,selectedVar:t,onCancel:a,onSave:o})=>{const r=null===t,[l,c]=Object(n.useState)(r?"string":t.type),[u,d]=Object(n.useState)(r?"":t.name),[p,b]=Object(n.useState)(r?"":t.value),g=((e,t,a)=>!!a.find((a=>e===a.name&&(!t||a.name!==t))))(u,t&&t.name,e),m=""===p.toString().trim(),h=!u,f=[{value:"string",inputDisplay:Object(T.jsx)("div",{className:"canvasEditVar__typeOption"},Object(T.jsx)(q.EuiToken,{iconType:"tokenString",className:"canvasEditVar__tokenIcon"})," ",Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.varConfigEditVar.typeStringLabel",{defaultMessage:"String"})))},{value:"number",inputDisplay:Object(T.jsx)("div",{className:"canvasEditVar__typeOption"},Object(T.jsx)(q.EuiToken,{iconType:"tokenNumber",className:"canvasEditVar__tokenIcon"})," ",Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.varConfigEditVar.typeNumberLabel",{defaultMessage:"Number"})))},{value:"boolean",inputDisplay:Object(T.jsx)("div",{className:"canvasEditVar__typeOption"},Object(T.jsx)(q.EuiToken,{iconType:"tokenBoolean",className:"canvasEditVar__tokenIcon"})," ",Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.varConfigEditVar.typeBooleanLabel",{defaultMessage:"Boolean"})))}];return Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)("div",{className:"canvasVarHeader__triggerWrapper"},Object(T.jsx)("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>a()},Object(T.jsx)("span",{className:"canvasVarHeader__iconWrapper"},Object(T.jsx)(q.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),Object(T.jsx)("span",null,Object(T.jsx)("span",{className:"canvasVarHeader__anchor"},r?i.i18n.translate("xpack.canvas.varConfigEditVar.addTitleLabel",{defaultMessage:"Add variable"}):i.i18n.translate("xpack.canvas.varConfigEditVar.editTitleLabel",{defaultMessage:"Edit variable"}))))),Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},!r&&Object(T.jsx)("div",null,Object(T.jsx)(q.EuiCallOut,{title:i.i18n.translate("xpack.canvas.varConfigEditVar.editWarning",{defaultMessage:"Editing a variable in use may adversely affect your workpad"}),color:"warning",iconType:"warning",size:"s"}),Object(T.jsx)(q.EuiSpacer,{size:"m"})),Object(T.jsx)(q.EuiForm,{component:"form"},Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.varConfigEditVar.typeFieldLabel",{defaultMessage:"Type"}),display:"rowCompressed"},Object(T.jsx)(q.EuiSuperSelect,{options:f,valueOfSelected:l,onChange:e=>{c(e),b("boolean"===e||("number"===e?0:""))},compressed:!0})),Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.varConfigEditVar.nameFieldLabel",{defaultMessage:"Name"}),display:"rowCompressed",isInvalid:g,error:g&&i.i18n.translate("xpack.canvas.varConfigEditVar.duplicateNameError",{defaultMessage:"Variable name already in use"})},Object(T.jsx)(q.EuiFieldText,{name:"name",value:u,compressed:!0,onChange:e=>d(e.target.value),isInvalid:g})),Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.varConfigEditVar.valueFieldLabel",{defaultMessage:"Value"}),display:"rowCompressed"},Object(T.jsx)(pn,{type:l,value:p,onChange:e=>b(e)})),Object(T.jsx)(q.EuiSpacer,{size:"m"}),Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButton,{color:"success",size:"s",fill:!0,onClick:()=>o({name:u,value:p,type:l}),disabled:g||m||h,iconType:"save"},i.i18n.translate("xpack.canvas.varConfigEditVar.saveButtonLabel",{defaultMessage:"Save changes"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{size:"s",onClick:()=>a()},i.i18n.translate("xpack.canvas.varConfigEditVar.cancelButtonLabel",{defaultMessage:"Cancel"})))))))},gn=({selectedVar:e,onCancel:t,onDelete:a})=>Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)("div",{className:"canvasVarHeader__triggerWrapper"},Object(T.jsx)("button",{className:"canvasVarHeader__button",type:"button",onClick:()=>t()},Object(T.jsx)("span",{className:"canvasVarHeader__iconWrapper"},Object(T.jsx)(q.EuiIcon,{type:"sortLeft",style:{verticalAlign:"top"}})),Object(T.jsx)("span",null,Object(T.jsx)("span",{className:"canvasVarHeader__anchor"},i.i18n.translate("xpack.canvas.varConfigDeleteVar.titleLabel",{defaultMessage:"Delete variable?"}))))),Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(T.jsx)("div",null,Object(T.jsx)(q.EuiFlexGroup,null,Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiText,{color:"subdued",size:"s"},i.i18n.translate("xpack.canvas.varConfigDeleteVar.warningDescription",{defaultMessage:"Deleting this variable may adversely affect the workpad. Are you sure you wish to continue?"})))),Object(T.jsx)(q.EuiSpacer,{size:"m"}),Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButton,{color:"danger",size:"s",fill:!0,onClick:()=>a(e),iconType:"trash"},i.i18n.translate("xpack.canvas.varConfigDeleteVar.deleteButtonLabel",{defaultMessage:"Delete variable"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{size:"s",onClick:()=>t()},i.i18n.translate("xpack.canvas.varConfigDeleteVar.cancelButtonLabel",{defaultMessage:"Cancel"})))))));var mn=function(e){return e[e.List=0]="List",e[e.Edit=1]="Edit",e[e.Delete=2]="Delete",e}(mn||{});const hn={number:"tokenNumber",boolean:"tokenBoolean",string:"tokenString"},fn=()=>i.i18n.translate("xpack.canvas.varConfig.addTooltipLabel",{defaultMessage:"Add a variable"}),vn=({variables:e,onCopyVar:t,onDeleteVar:a,onAddVar:s,onEditVar:o})=>{const[r,l]=Object(n.useState)(mn.List),[c,u]=Object(n.useState)(null),d=[{type:"icon",name:i.i18n.translate("xpack.canvas.varConfig.copyActionButtonLabel",{defaultMessage:"Copy snippet"}),description:i.i18n.translate("xpack.canvas.varConfig.copyActionTooltipLabel",{defaultMessage:"Copy variable syntax to clipboard"}),icon:"copyClipboard",onClick:t,isPrimary:!0},{type:"icon",name:i.i18n.translate("xpack.canvas.varConfig.editActionButtonLabel",{defaultMessage:"Edit variable"}),description:"",icon:"pencil",onClick:e=>{u(e),l(mn.Edit)}},{type:"icon",name:i.i18n.translate("xpack.canvas.varConfig.deleteActionButtonLabel",{defaultMessage:"Delete variable"}),description:"",icon:"trash",color:"danger",onClick:e=>{u(e),l(mn.Delete)}}],p=[{field:"type",name:i.i18n.translate("xpack.canvas.varConfig.tableTypeLabel",{defaultMessage:"Type"}),sortable:!0,render:(e,t)=>Object(T.jsx)(q.EuiToken,{iconType:hn[e]}),width:"50px"},{field:"name",name:i.i18n.translate("xpack.canvas.varConfig.tableNameLabel",{defaultMessage:"Name"}),sortable:!0},{field:"value",name:i.i18n.translate("xpack.canvas.varConfig.tableValueLabel",{defaultMessage:"Value"}),sortable:!0,truncateText:!0,render:(e,t)=>""+e},{actions:d,width:"60px"}];return Object(T.jsx)("div",{className:"canvasSidebar__expandable canvasVarConfig__container "+(r!==mn.List?"canvasVarConfig-isEditMode":"")},Object(T.jsx)("div",{className:"canvasVarConfig__innerContainer"},Object(T.jsx)(q.EuiAccordion,{id:"accordion-variables",className:"canvasVarConfig__listView canvasSidebar__accordion",buttonContent:Object(T.jsx)(q.EuiToolTip,{content:i.i18n.translate("xpack.canvas.varConfig.titleTooltip",{defaultMessage:"Add variables to store and edit common values"}),position:"left",className:"canvasArg__tooltip"},Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.varConfig.titleLabel",{defaultMessage:"Variables"}))),extraAction:Object(T.jsx)(q.EuiToolTip,{position:"top",content:fn()},Object(T.jsx)(q.EuiButtonIcon,{color:"primary",iconType:"plusInCircle","aria-label":fn(),onClick:()=>{u(null),l(mn.Edit)}}))},0!==e.length&&Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(T.jsx)(q.EuiInMemoryTable,{className:"canvasVarConfig__list",items:e,columns:p,pagination:!1,sorting:!0,compressed:!0})),0===e.length&&Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(T.jsx)(q.EuiText,{color:"subdued",size:"s"},i.i18n.translate("xpack.canvas.varConfig.emptyDescription",{defaultMessage:"This workpad has no variables currently. You may add variables to store and edit common values. These variables can then be used in elements or within the expression editor."})),Object(T.jsx)(q.EuiSpacer,{size:"m"}),Object(T.jsx)(q.EuiButton,{size:"s",iconType:"plusInCircle",onClick:()=>l(mn.Edit)},i.i18n.translate("xpack.canvas.varConfig.addButtonLabel",{defaultMessage:"Add a variable"})))),Object(T.jsx)("div",{className:"canvasVarConfig__editView canvasSidebar__accordion"},r===mn.Edit&&Object(T.jsx)(bn,{variables:e,selectedVar:c,onSave:e=>{c?o(c,e):s(e),u(null),l(mn.List)},onCancel:()=>{u(null),l(mn.List)}}),r===mn.Delete&&c&&Object(T.jsx)(gn,{selectedVar:c,onDelete:e=>{a(e),u(null),l(mn.List)},onCancel:()=>{u(null),l(mn.List)}}))))},xn=({variables:e,setVariables:t})=>{const{success:a}=Object(h.useNotifyService)();return Object(T.jsx)(vn,{variables:e,onCopyVar:e=>{const t=`{var "${e.name}"}`;dn()(t,{debug:!0}),a(i.i18n.translate("xpack.canvas.varConfig.copyNotificationDescription",{defaultMessage:"Variable syntax copied to clipboard"}))},onDeleteVar:n=>{const s=e.findIndex((e=>e.name===n.name));if(-1!==s){const n=[...e];n.splice(s,1),t(n),a(i.i18n.translate("xpack.canvas.varConfig.deleteNotificationDescription",{defaultMessage:"Variable successfully deleted"}))}},onAddVar:a=>{t([...e,a])},onEditVar:(a,n)=>{const s=e.findIndex((e=>a.name===e.name)),o=[...e];o[s]=n,t(o)}})},jn=()=>i.i18n.translate("xpack.canvas.workpadConfig.globalCSSTooltip",{defaultMessage:"Apply styles to all pages in this workpad"}),yn=e=>i.i18n.translate("xpack.canvas.workpadConfig.pageSizeBadgeOnClickAriaLabel",{defaultMessage:"Set page size to {sizeName}",values:{sizeName:e}}),On={setSize:U.n,setName:U.h,setWorkpadCSS:U.k,setWorkpadVariables:e=>Object(U.o)(e)},wn=Object(l.connect)((e=>{const t=Object($e.u)(e);return{name:Object(c.get)(t,"name"),size:{width:Object(c.get)(t,"width"),height:Object(c.get)(t,"height")},css:Object(c.get)(t,"css",Je.r),variables:Object(c.get)(t,"variables",[])}}),On)((e=>{const[t,a]=Object(n.useState)(e.css),{size:s,name:o,setSize:r,setName:l,setWorkpadCSS:c,variables:u,setWorkpadVariables:d}=e,p=[{name:"1080p",size:{height:1080,width:1920}},{name:"720p",size:{height:720,width:1280}},{name:"A4",size:{height:842,width:590}},{name:i.i18n.translate("xpack.canvas.workpadConfig.USLetterButtonLabel",{defaultMessage:"US Letter",description:"This is referring to the dimensions of U.S. standard letter paper."}),size:{height:792,width:612}}];return Object(T.jsx)("div",null,Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.workpadConfig.nameLabel",{defaultMessage:"Name"}),display:"rowCompressed"},Object(T.jsx)(q.EuiFieldText,{compressed:!0,value:o,onChange:e=>l(e.target.value),"data-test-subj":"canvas-workpad-name-text-field"})),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.workpadConfig.widthLabel",{defaultMessage:"Width"}),display:"rowCompressed"},Object(T.jsx)(q.EuiFieldNumber,{compressed:!0,onChange:e=>r({width:Number(e.target.value),height:s.height}),value:s.width}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFormRow,{display:"rowCompressed",hasEmptyLabelSpace:!0},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:i.i18n.translate("xpack.canvas.workpadConfig.swapDimensionsTooltip",{defaultMessage:"Swap the width and height"})},Object(T.jsx)(q.EuiButtonIcon,{iconType:"merge",color:"text",onClick:()=>r({width:s.height,height:s.width}),"aria-label":i.i18n.translate("xpack.canvas.workpadConfig.swapDimensionsAriaLabel",{defaultMessage:"Swap the page's width and height"})})))),Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.workpadConfig.heightLabel",{defaultMessage:"Height"}),display:"rowCompressed"},Object(T.jsx)(q.EuiFieldNumber,{compressed:!0,onChange:e=>r({height:Number(e.target.value),width:s.width}),value:s.height})))),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)("div",null,p.map(((e,t)=>{return Object(T.jsx)(q.EuiBadge,{key:`page-size-badge-${t}`,color:"hollow",onClick:()=>r(e.size),"aria-label":(a=e.name,i.i18n.translate("xpack.canvas.workpadConfig.pageSizeBadgeAriaLabel",{defaultMessage:"Preset page size: {sizeName}",values:{sizeName:a}})),onClickAriaLabel:yn(e.name)},e.name);var a}))),Object(T.jsx)(q.EuiSpacer,{size:"m"}),Object(T.jsx)(xn,{variables:u,setVariables:d}),Object(T.jsx)("div",{className:"canvasSidebar__expandable"},Object(T.jsx)(q.EuiAccordion,{id:"accordion-global-css",className:"canvasSidebar__accordion",style:{marginBottom:0},buttonContent:Object(T.jsx)(q.EuiToolTip,{content:jn(),position:"left",className:"canvasArg__tooltip"},Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.workpadConfig.globalCSSLabel",{defaultMessage:"Global CSS overrides"})))},Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},Object(T.jsx)(q.EuiTextArea,{"aria-label":jn(),value:t,compressed:!0,onChange:e=>a(e.target.value),rows:10}),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiButton,{size:"s",onClick:()=>c(t||Je.r)},i.i18n.translate("xpack.canvas.workpadConfig.applyStylesheetButtonLabel",{defaultMessage:"Apply stylesheet",description:'"stylesheet" refers to the collection of CSS style rules entered by the user.'})),Object(T.jsx)(q.EuiSpacer,{size:"xs"})))))})),kn=({children:e})=>Object(T.jsx)("div",{className:"canvasSidebar__panel"},e),_n=()=>Object(T.jsx)(n.Fragment,null,Object(T.jsx)(kn,null,Object(T.jsx)(wn,null),Object(T.jsx)(en,null)),Object(T.jsx)(kn,null,Object(T.jsx)(cn,null)));var Sn=a(109),En=a(202),Mn=a(86),Cn=a(74);const Tn={timefilter:Cn.FilterType.time,exactly:Cn.FilterType.exactly},Pn=e=>e.toString(),Nn=(e,t=Pn)=>null!=e&&e[0]?t(e[0]):null,An=e=>{var t;return null!==(t=Tn[e])&&void 0!==t?t:Cn.FilterType.exactly},In=e=>{const t=Object.keys(e);return t.length?t.reduce(((t,a)=>({...t,[a]:Nn(e[a],c.identity)})),{}):null};function Fn(e){var t;const{function:a,arguments:n}=e,{column:s,filterGroup:o,value:r,type:i,...l}=null!=n?n:{};return{type:An(a),column:Nn(s),filterGroup:Nn(o),value:null!==(t=Nn(r))&&void 0!==t?t:In(l)}}const Ln=({filter:e,...t})=>{const a=Object.values(e).map((e=>{const a=e.component?((e,{updateFilter:t,...a})=>Object(T.jsx)(e,A()({},a,{onChange:t})))(e.component,{value:e.formattedValue,...t}):e.formattedValue;return{title:Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("h4",null,e.label)),description:Object(T.jsx)(q.EuiText,{size:"s"},a)}}));return Object(T.jsx)(q.EuiPanel,{grow:!1,hasShadow:!1,paddingSize:"m"},Object(T.jsx)(q.EuiDescriptionList,{type:"column",columnWidths:[3,7],className:"workpadFilter",compressed:!0,listItems:a,titleProps:{className:"eui-textBreakWord"},descriptionProps:{className:"eui-textBreakWord"}}))},Dn={type:e=>{var t;const a={exactly:i.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.typeLabel",{defaultMessage:"Dropdown"}),time:i.i18n.translate("xpack.canvas.workpadFilters.timeFilter.typeLabel",{defaultMessage:"Time"})};return"string"==typeof e?null!==(t=a[e])&&void 0!==t?t:e:null}},zn=e=>Dn[e],Rn={name:"default",view:{column:{label:i.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.column",{defaultMessage:"Column"})},value:{label:i.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.value",{defaultMessage:"Value"})},type:{label:i.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.type",{defaultMessage:"Type"}),formatter:zn("type")},filterGroup:{label:i.i18n.translate("xpack.canvas.workpadFilters.defaultFilter.filterGroup",{defaultMessage:"Filter group"})}}};var Bn=a(29),Hn=a.n(Bn);const{column:Wn,type:Vn,filterGroup:Gn}=Rn.view,Un=(e,t)=>{const a=Hn.a.parse(e,{roundUp:t});return a&&a.isValid()?a.format("YYYY-MM-DD HH:mm:ss"):(n=e,i.i18n.translate("xpack.canvas.workpadFilters.timeFilter.invalidDate",{defaultMessage:"Invalid date: {date}",values:{date:n}}));var n},$n={name:Cn.FilterType.time,view:{column:Wn,value:({to:e,from:t})=>({from:{label:i.i18n.translate("xpack.canvas.workpadFilters.timeFilter.from",{defaultMessage:"From"}),formatter:()=>Un(t,!1)},to:{label:i.i18n.translate("xpack.canvas.workpadFilters.timeFilter.to",{defaultMessage:"To"}),formatter:()=>Un(e,!0)}}),type:{label:Vn.label,formatter:zn("type")},filterGroup:Gn}},qn={[Rn.name]:Rn,[$n.name]:$n},Kn={paddingTop:"15px"},Xn=({filtersGroup:e,id:t})=>{const{name:a,filters:n}=e,s=n.map((e=>{var t;const a=null!==(t=qn[e.type])&&void 0!==t?t:qn.default;return Object(Sn.a)(a.view,e)})).map(((e,t)=>Object(T.jsx)(Ln,{key:`filter-${a}-${t}`,filter:e})));return Object(T.jsx)("div",{className:"canvasSidebar__expandable"},Object(T.jsx)(q.EuiAccordion,{id:`canvas-filter-group-${t}`,buttonContent:a,initialIsOpen:!0,className:"canvasSidebar__accordion filtersSidebar__accordion",style:{marginLeft:"0px"}},Object(T.jsx)("div",{style:Kn},s)))},Yn=[{value:"filterGroup",text:i.i18n.translate("xpack.canvas.workpadFilters.groupByFilterGroup",{defaultMessage:"Filter group"})},{value:"type",text:i.i18n.translate("xpack.canvas.workpadFilters.groupByFilterType",{defaultMessage:"Filter type"})},{value:"column",text:i.i18n.translate("xpack.canvas.workpadFilters.groupByColumn",{defaultMessage:"Column"})}],Zn=({filtersGroups:e,onGroupByChange:t,groupFiltersByField:a})=>{var s;const o="filterGroup"===a,r=a&&null!==(s=zn(a))&&void 0!==s?s:c.identity,l=e.map((e=>{var t;return{...e,name:null!==(t=r(e.name))&&void 0!==t?t:o?i.i18n.translate("xpack.canvas.workpadFilters.filters_group.withoutGroup",{defaultMessage:"Without group"}):i.i18n.translate("xpack.canvas.workpadFilters.filters_group.blankValue",{defaultMessage:"(Blank)"})}})),u=l.map(((e,t)=>Object(T.jsx)(Xn,{key:`filter-group-${t}`,id:t,filtersGroup:e})));return Object(T.jsx)(n.Fragment,null,Object(T.jsx)("div",{className:"canvasSidebar__panel canvasSidebar__expandable"},Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"l",alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiText,null,Object(T.jsx)("h5",null,i.i18n.translate("xpack.canvas.workpadFilters.groupBySelect",{defaultMessage:"Group by"})))),Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiSelect,{compressed:!0,options:Yn,value:a,onChange:e=>t(e.target.value),"aria-label":"Use aria labels when no actual label is in use"})))),u)},Jn=({element:e})=>{const t=Object(l.useSelector)((e=>(e=>{var t;return null!==(t=e.transient.sidebar.groupFiltersByOption)&&void 0!==t?t:Mn.DEFAULT_GROUP_BY_FIELD})(e))),a=Object(l.useDispatch)(),s=Object(n.useCallback)((e=>{a(Object(En.b)(e))}),[a]),o=function(e=[]){const t=Object(h.useFiltersService)(),a=Object(l.useSelector)((e=>t.getFilters(e)),l.shallowEqual);var n;return(n=Object(Sn.b)(a,e),Object(tn.d)(n.join(" | "))).chain.map(Fn)}(e?Object(Sn.c)(e.expression):[]),r=t?Object(Sn.d)(o,t):[];return Object(T.jsx)(Zn,{filtersGroups:r,onGroupByChange:s,groupFiltersByField:t})},Qn=()=>Object(T.jsx)(Jn,null),es=()=>{const e=[{id:"general",name:i.i18n.translate("xpack.canvas.globalConfig.general",{defaultMessage:"General"}),content:Object(T.jsx)("div",{className:"canvasSidebar__pop"},Object(T.jsx)(q.EuiSpacer,{size:"m"}),Object(T.jsx)(_n,null))},{id:"filter",name:i.i18n.translate("xpack.canvas.globalConfig.filter",{defaultMessage:"Filter"}),content:Object(T.jsx)("div",{className:"canvasSidebar__pop"},Object(T.jsx)(Qn,null))}];return Object(T.jsx)(n.Fragment,null,Object(T.jsx)("div",{className:"canvasLayout__sidebarHeader"},Object(T.jsx)(q.EuiTitle,{size:"xs"},Object(T.jsx)("h4",null,i.i18n.translate("xpack.canvas.globalConfig.title",{defaultMessage:"Workpad settings"})))),Object(T.jsx)(q.EuiTabbedContent,{tabs:e,initialSelectedTab:e[0],size:"s"}))};var ts=a(102),as=a.n(ts),ns=a(91),ss=a.n(ns);class base_form_BaseForm{constructor(e){if(b()(this,"name",void 0),b()(this,"displayName",void 0),b()(this,"help",void 0),!e.name)throw new Error("Expression specs require a name property");this.name=e.name,this.displayName=e.displayName||this.name,this.help=e.help||""}}const os=e=>Object(o.createPortal)(Object(T.jsx)("div",null,Object(T.jsx)("p",null,"This datasource has no interface. Use the expression editor to make changes.")),e),rs=e=>{const t=Object(n.useRef)(null),a=Object(n.useRef)(),[s,o]=Object(n.useState)(),{spec:r,datasourceProps:i,handlers:l}=e,c=ss()(r),u=Object(n.useCallback)((e=>{a.current=null!=e?e:void 0}),[]),d=Object(n.useCallback)((e=>{const{template:t}=r;return t?t(e,i,l,u):null}),[i,l,u,r]);return Object(n.useEffect)((()=>{if(!s&&t.current){const e=d(t.current);e&&o(e)}}),[s,d]),Object(n.useEffect)((()=>{s&&(null==c?void 0:c.name)!==(null==r?void 0:r.name)&&(o(void 0),a.current=void 0)}),[s,null==c?void 0:c.name,null==r?void 0:r.name]),Object(n.useEffect)((()=>{a.current&&a.current.updateProps(i)}),[i]),as()((()=>(a.current=void 0,()=>{a.current=void 0,l.destroy()}))),Object(T.jsx)("div",{className:"render_to_dom",ref:t},s)},is=Object(n.memo)(rs,((e,t)=>Xe()(e,t)));class datasource_Datasource extends base_form_BaseForm{constructor(e){var t;super(e),b()(this,"template",void 0),b()(this,"image",void 0),b()(this,"requiresContext",void 0),this.template=null!==(t=e.template)&&void 0!==t?t:os,this.image=e.image,this.requiresContext=e.requiresContext}render(e){const t=new Mn.ExpressionFormHandlers;return Object(T.jsx)(is,{spec:this,handlers:t,datasourceProps:e})}}class datasource_registry_DatasourceRegistry extends tn.a{wrapper(e){return new datasource_Datasource(e)}}const ls=new datasource_registry_DatasourceRegistry;var cs=a(97);const us=({onValueAdd:e=(()=>{}),displayName:t,help:a})=>Object(T.jsx)("button",{className:"canvasArg__add",onClick:e},Object(T.jsx)(q.EuiDescriptionList,{compressed:!0},Object(T.jsx)(q.EuiDescriptionListTitle,null,t),Object(T.jsx)(q.EuiDescriptionListDescription,null,Object(T.jsx)("small",null,a)))),ds=({options:e})=>Object(T.jsx)(cs.a,{id:"arg-add-popover",panelClassName:"canvasArg__addPopover",panelPaddingSize:"none",button:e=>Object(T.jsx)(q.EuiButtonIcon,{iconType:"plusInCircle","aria-label":i.i18n.translate("xpack.canvas.argAddPopover.addAriaLabel",{defaultMessage:"Add argument"}),onClick:e,className:"canvasArg__addArg"})},(({closePopover:t})=>e.map((e=>{var a,n;return Object(T.jsx)(us,{key:`${e.name}-add`,displayName:null!==(a=e.displayName)&&void 0!==a?a:"",help:null!==(n=e.help)&&void 0!==n?n:"",onValueAdd:()=>{e.onValueAdd(),t()}})})))),ps=({title:e,tip:t,children:a})=>{const n=Object(T.jsx)(q.EuiTitle,{size:"xxxs",className:"canvasSidebar__panelTitleHeading"},Object(T.jsx)("h4",null,e));return Object(T.jsx)(q.EuiFlexGroup,{className:"canvasSidebar__panelTitle",gutterSize:"xs",alignItems:"center",justifyContent:"spaceBetween"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},t?Object(T.jsx)(q.EuiToolTip,{position:"left",content:t},n):n),Object(T.jsx)(q.EuiFlexItem,{grow:!1},a))};var bs=a(108),gs=a(124),ms=a(161);const hs=()=>i.i18n.translate("xpack.canvas.argFormArgSimpleForm.removeAriaLabel",{defaultMessage:"Remove"}),fs=({children:e,required:t,valueMissing:a,onRemove:n})=>Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",gutterSize:"s",className:"canvasArg__form"},Object(T.jsx)(q.EuiFlexItem,null,e),a&&Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(ms.b,{position:"left",icon:ms.a.error,content:i.i18n.translate("xpack.canvas.argFormArgSimpleForm.requiredTooltip",{defaultMessage:"This argument is required, you should specify a value."})})),!t&&Object(T.jsx)(q.EuiToolTip,{position:"top",content:hs()},Object(T.jsx)(q.EuiButtonIcon,{color:"text",onClick:n,iconType:"cross",iconSize:"s","aria-label":hs(),className:"canvasArg__remove"})));var vs=a(138);const xs=e=>Object.assign(new vs.a,e),js=({template:e,argumentProps:t,handlers:a,error:o,errorTemplate:r})=>{const[i,l]=Object(n.useState)(xs(a)),c=ss()(o),[u,d]=Object(n.useState)(),p=Object(n.useRef)(),b=Object(n.useRef)(null);as()((()=>()=>{p.current=void 0}));const g=Object(n.useCallback)((e=>{!p.current&&e&&(p.current=e)}),[]),m=Object(n.useCallback)((a=>e&&e(a,t,i,g)),[t,g,e,i]),h=Object(n.useCallback)((()=>s.a.createElement(r,t)),[r,t]);return Object(n.useEffect)((()=>{if(!u&&b.current){const e=m(b.current);e&&d(e)}}),[u,m]),Object(n.useEffect)((()=>{l(xs(a))}),[a]),Object(n.useEffect)((()=>{var e;p.current&&(null===(e=p.current)||void 0===e||e.updateProps(t))}),[t]),Object(n.useEffect)((()=>{!c&&o&&i.destroy()}),[c,o,i]),o?(p.current=void 0,h()):(e||(p.current=void 0),Object(T.jsx)("div",{className:"render_to_dom",ref:b},u))},ys=Object(n.memo)(js,((e,t)=>Xe()(e,t))),Os=()=>Object(T.jsx)("div",{className:"canvasArg--error canvasArg--error-simple"},Object(T.jsx)(ms.b,{position:"left",icon:ms.a.warning,content:i.i18n.translate("xpack.canvas.argFormSimpleFailure.failureTooltip",{defaultMessage:"The interface for this argument could not parse the value, so a fallback input is being used"})})),ws=e=>{try{return Object(tn.d)(e,"argument"),!0}catch(e){return!1}},ks=e=>{const{onValueChange:t,defaultValue:a,argValue:s,resetErrorState:o,argId:r}=e,[l,c]=Object(n.useState)(Object(tn.h)(s,"argument")),[u,d]=Object(n.useState)(ws(l));return Object(n.useEffect)((()=>{const e=Object(tn.h)(s,"argument");c(e),d(ws(e))}),[s]),Object(T.jsx)("div",null,Object(T.jsx)(q.EuiFormRow,{display:"rowCompressed",id:r,isInvalid:!u,error:i.i18n.translate("xpack.canvas.argFormAdvancedFailure.rowErrorMessage",{defaultMessage:"Invalid Expression"})},Object(T.jsx)(q.EuiTextArea,{id:r,isInvalid:!u,value:l,compressed:!0,onChange:e=>c(e.target.value),rows:3})),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)("div",null,Object(T.jsx)(q.EuiButton,{disabled:!u,onClick:e=>(e=>{if(e.preventDefault(),o(),u)return t(Object(tn.d)(l.trim(),"argument"))})(e),size:"s",type:"submit"},i.i18n.translate("xpack.canvas.argFormAdvancedFailure.applyButtonLabel",{defaultMessage:"Apply"})),a&&a.length&&Object(T.jsx)(q.EuiButtonEmpty,{size:"s",color:"danger",onClick:e=>{e.preventDefault(),o(),t(Object(tn.d)(a,"argument"))}},i.i18n.translate("xpack.canvas.argFormAdvancedFailure.resetButtonLabel",{defaultMessage:"Reset"}))),Object(T.jsx)(q.EuiSpacer,{size:"s"}))},_s=e=>{const{argId:t,className:a,label:n,help:s,expandable:o,children:r,simpleArg:i,initialIsOpen:l}=e;return Object(T.jsx)("div",{className:`canvasArg--header${a&&` ${a}`}`},o?Object(T.jsx)(q.EuiAccordion,{id:`accordion-${t}`,className:"canvasSidebar__accordion",buttonContent:Object(T.jsx)(q.EuiToolTip,{content:s,position:"left",className:"canvasArg__tooltip"},Object(T.jsx)("span",null,n)),extraAction:i,initialIsOpen:l},Object(T.jsx)("div",{className:"canvasSidebar__accordionContent"},r)):Object(T.jsx)(q.EuiFormRow,{display:"columnCompressed",label:Object(T.jsx)(q.EuiToolTip,{content:s},Object(T.jsx)("span",null,n," ",Object(T.jsx)(q.EuiIcon,{type:"iInCircle",color:"subdued"}))),id:t},i||r))};var Ss=a(125);class pending_arg_value_PendingArgValue extends s.a.PureComponent{componentDidMount(){const{setResolvedArgValue:e,templateProps:t}=this.props,{argResolver:a,argValue:n}=t;null==n?e(null):a(n).then((t=>e(null!=t?t:null))).catch((()=>e(null)))}render(){const{label:e,argTypeInstance:t}=this.props;return Object(T.jsx)("div",{className:"canvasArg"},Object(T.jsx)(_s,{className:"resolve-pending",label:e,help:t.help,expandable:!1},Object(T.jsx)("div",{className:"canvasArg--pending"},Object(T.jsx)(Ss.a,{animated:!0,text:i.i18n.translate("xpack.canvas.argFormPendingArgValue.loadingMessage",{defaultMessage:"Loading"})}))))}}const Es=e=>{const{argId:t,argTypeInstance:a,templateProps:s,valueMissing:o,label:r,setLabel:i,onValueRemove:l,workpad:c,assets:u,resolvedArgValue:d}=e,[p,b]=Object(n.useState)(!1),g=Object(n.useRef)();return Object(n.useEffect)((()=>(g.current=!0,()=>{g.current=!1})),[]),((e,t)=>{const{argType:a}=e;return!!a.resolveArgValue&&void 0===t})(a,d)?Object(T.jsx)(pending_arg_value_PendingArgValue,e):Object(T.jsx)(gs.a,null,(({error:e,resetErrorState:n})=>{const{template:m,simpleTemplate:h}=a.argType,f=Boolean(e)||p,v={...s,resolvedArgValue:d,defaultValue:a.default,renderError:()=>{g.current&&b(!0)},error:f,setLabel:e=>g.current&&i(e),resetErrorState:()=>{n(),g.current&&b(!1)},label:r,workpad:c,argId:t,assets:u},x=Boolean(f||m),j=Object(T.jsx)(fs,{required:a.required,valueMissing:o,onRemove:l},Object(T.jsx)(ys,{template:h,errorTemplate:Os,error:f,argumentProps:v})),y=Object(T.jsx)("div",{className:"canvasArg--controls"},Object(T.jsx)(ys,{template:m,errorTemplate:ks,error:f,argumentProps:v}));return Object(T.jsx)("div",{className:`canvasArg ${x?"canvasSidebar__expandable":null}`},Object(T.jsx)(_s,{className:"resolved",argId:t,label:r,help:a.help,expandable:x,simpleArg:j,initialIsOpen:!h},y))}))},Ms=e=>{const{argTypeInstance:t,label:a,templateProps:s}=e,[o,r]=Object(n.useState)(((e,t)=>e||t.displayName||t.name)(a,t)),[i,c]=Object(n.useState)(null),u=Object(l.useSelector)($e.y),d=Object(l.useSelector)(bs.b);return Object(n.useEffect)((()=>{c()}),[null==s?void 0:s.argValue]),Object(T.jsx)(Es,A()({},e,{workpad:u,assets:d,label:o,setLabel:r,resolvedArgValue:i,setResolvedArgValue:c}))};class arg_type_ArgType extends base_form_BaseForm{constructor(e){super(e),b()(this,"simpleTemplate",void 0),b()(this,"template",void 0),b()(this,"default",void 0),b()(this,"resolveArgValue",void 0),this.simpleTemplate=e.simpleTemplate,this.template=e.template,this.default=e.default,this.resolveArgValue=Boolean(e.resolveArgValue)}}class arg_type_registry_ArgTypeRegistry extends tn.a{wrapper(e){return new arg_type_ArgType(e)}}const Cs=new arg_type_registry_ArgTypeRegistry;class arg_Arg{constructor(e){b()(this,"argType",void 0),b()(this,"multi",void 0),b()(this,"required",void 0),b()(this,"types",void 0),b()(this,"default",void 0),b()(this,"resolve",void 0),b()(this,"options",void 0),b()(this,"name",""),b()(this,"displayName",void 0),b()(this,"help",void 0);const t=Cs.get(e.argType);if(!t)throw new Error(`Invalid arg type: ${e.argType}`);if(!e.name)throw new Error("Args must have a name property");const a={multi:!1,required:!1,types:[],default:null!=t.default?t.default:null,options:{},resolve:()=>({})},{name:n,displayName:s,help:o,multi:r,types:i,options:l}=e;Object(c.merge)(this,a,t,{argType:t,name:n,displayName:s,help:o,multi:r,types:i,default:e.default,resolve:e.resolve,required:e.required,options:l})}render(e){var t;const{onValueChange:a,onValueRemove:s,key:o,label:r,...i}=e,l=null===(t=this.resolve)||void 0===t?void 0:t.call(this,i),{argValue:c,onAssetAdd:u,resolved:d,filterGroups:p,argResolver:b}=i,g=o,m={argValue:c,argId:g,onAssetAdd:u,onValueChange:a,typeInstance:this,resolved:{...d,...l},argResolver:b,filterGroups:p},h={key:o,argTypeInstance:this,valueMissing:this.required&&null==e.argValue,label:r,onValueChange:a,onValueRemove:s,templateProps:m,argId:g,options:this.options};return Object(n.createElement)(Ms,h)}}function Ts(e){return Rs.get(e)||Bs.get(e)||Ls.get(e)}const Ps=(e,t)=>`${e.name}=${Ns(t)}`,Ns=e=>{if(Is(e)){const t=As(e);return Object(tn.h)(Object(tn.d)(t))}return e},As=e=>Is(e)?e.substring(1,e.length-1):e,Is=e=>"{"===e[0]&&"}"===e[e.length-1];function Fs(e){const t=Ts(e.argType);if(e.default)return Ps(e,e.default);if(!t)return;const a=t.args.map((e=>{const t=Ts(e.argType);return e.default&&t&&Array.isArray(t.args)?Ps(e,e.default):Fs(e)})).filter((e=>void 0!==e));return a.length?`{${e.argType} ${a.join(" ")}}`:`{${e.argType}}`}class function_form_FunctionForm extends base_form_BaseForm{constructor(e){super({...e}),b()(this,"args",void 0),b()(this,"resolve",void 0),this.args=e.args||[],this.resolve=e.resolve||(()=>({}))}renderArg(e,t){const{onValueRemove:a,onValueChange:n,onContainerRemove:s,id:o,...r}=t,{arg:i,argValues:l}=e;if(!i)return null;const c=(e,t)=>i.render({key:`${o}.${i.name}.${t}`,...r,valueIndex:t,onValueChange:n(i.name,t),onValueRemove:a(i.name,t),argValue:null!=e?e:null});return!l&&i.required?c(null,0):l&&l.map(c)}getArgDescription({name:e,displayName:t,help:a},n){var s,o,r,i;return{name:null!==(s=null!==(o=n.name)&&void 0!==o?o:e)&&void 0!==s?s:"",displayName:null!==(r=n.displayName)&&void 0!==r?r:t,help:null!==(i=n.help)&&void 0!==i?i:a}}getAddableArgComplex(e,t,a){if(t&&!e.multi)return null;const n=Fs(e),s=Ts(e.argType);if(!s||void 0===n)return null;const o=null===n?null:Object(tn.d)(n,"argument");return{...this.getArgDescription(s,e),onValueAdd:a(e.name,o)}}getAddableArgSimple(e,t,a){const n=new arg_Arg(e);if(!n||n.required)return null;if(t&&!n.multi)return null;const s=null===n.default||void 0===n.default?null:Object(tn.d)(n.default,"argument");return{...this.getArgDescription(n,e),onValueAdd:a(n.name,s)}}getAddableArgs(e={},t={},a){const n=null===e?{}:e,s=null===t?{}:t;return this.args.reduce(((e,t)=>{if(!t.type||"argument"===t.type){const s=this.getAddableArgSimple(t,n[t.name],a);return s?[...e,s]:e}const o=this.getAddableArgComplex(t,s[t.name],a);return o?[...e,o]:e}),[])}getArgsWithValues(e,t){let a=[];if(this.isExpressionFunctionForm(t)){const e=t.args.map((({name:e})=>e));a=this.args.filter((t=>e.includes(t.name))).map((e=>new arg_Arg(e)))}else a=this.args.map((e=>new arg_Arg(e)));if(null===e||!Object(c.isPlainObject)(e))throw new Error(`Form "${this.name}" expects "args" object`);return Object(c.uniq)(this.args.map((e=>e.name)).concat(Object.keys(e))).map((t=>{var n;const s=a.find((e=>e.name===t)),o=s&&s.multi;return{arg:s,argValues:e[t]&&!o?[null!==(n=Object(c.last)(e[t]))&&void 0!==n?n:null]:e[t]}}))}resolveArg(...e){return{}}isExpressionFunctionForm(e){return!!e&&(e instanceof view_View||e instanceof model_Model||e instanceof transform_Transform)}render(e={args:null,argTypeDef:void 0}){const{args:t,argTypeDef:a,nestedFunctionsArgs:n={},removable:s}=e,o=this.getArgsWithValues(t,a);try{const r={...e,resolved:this.resolve(e),typeInstance:this},i=o.map((e=>({...e,...this.resolveArg(e,r)}))),l=Object(c.compact)(i.map((e=>this.renderArg(e,r)))),u=this.getAddableArgs(t,n,r.onValueAdd);return u.length||l.length?Object(T.jsx)(kn,null,Object(T.jsx)(ps,{title:null==a?void 0:a.displayName,tip:null==a?void 0:a.help},Object(T.jsx)(q.EuiFormRow,null,Object(T.jsx)(q.EuiFlexGroup,{direction:"row",gutterSize:"s"},s&&Object(T.jsx)(q.EuiToolTip,{position:"top",content:"Remove"},Object(T.jsx)(q.EuiButtonIcon,{color:"text",onClick:()=>{r.onContainerRemove()},iconType:"cross",iconSize:"s","aria-label":"Remove",className:"canvasArg__remove"})),0===u.length?null:Object(T.jsx)(ds,{options:u})))),l):null}catch(e){return Object(T.jsx)(q.EuiCallOut,{color:"danger",iconType:"cross",title:"Expression rendering error"},Object(T.jsx)("p",null,e.message))}}}class transform_Transform extends function_form_FunctionForm{constructor(e){super(e),b()(this,"requiresContext",void 0);const{requiresContext:t}=e;Object(c.merge)(this,{requiresContext:!0},{requiresContext:t})}}class transform_registry_TransformRegistry extends tn.a{wrapper(e){return new transform_Transform(e)}}const Ls=new transform_registry_TransformRegistry,Ds="no next expression",zs="missing model args";class model_Model extends function_form_FunctionForm{constructor(e){super(e),b()(this,"requiresContext",void 0);const{requiresContext:t}=e;Object(c.merge)(this,{requiresContext:!0},{requiresContext:t})}resolveArg(e,t){var a,n;const{nextExpressionType:s}=t,o=(r=s)?null!=r&&r.modelArgs&&(null==r?void 0:r.modelArgs.length)>0?null==r?void 0:r.modelArgs:zs:Ds;var r;if(o===Ds||o===zs)return{skipRender:!1};const i=null==e||null===(a=e.arg)||void 0===a?void 0:a.name,l="string"!=typeof o&&o.find((e=>Array.isArray(e)?e[0]===i:e===i));return{label:Array.isArray(l)?null===(n=l[1])||void 0===n?void 0:n.label:null,skipRender:!l}}}class model_registry_ModelRegistry extends tn.a{wrapper(e){return new model_Model(e)}}const Rs=new model_registry_ModelRegistry;class view_View extends function_form_FunctionForm{constructor(e){super(e),b()(this,"modelArgs",[]),b()(this,"requiresContext",void 0);const{help:t,modelArgs:a,requiresContext:n}=e,s={help:`Element: ${e.name}`,requiresContext:!0};if(Object(c.merge)(this,s,{help:t,modelArgs:a||[],requiresContext:n}),!Array.isArray(this.modelArgs))throw new Error(`${this.name} element is invalid, modelArgs must be an array`)}}class view_registry_ViewRegistry extends tn.a{wrapper(e){return new view_View(e)}}const Bs=new view_registry_ViewRegistry,Hs=()=>Object(T.jsx)("div",{className:"canvasDataSource__section"},Object(T.jsx)(q.EuiCallOut,{title:i.i18n.translate("xpack.canvas.datasourceNoDatasource.panelTitle",{defaultMessage:"No data source present"}),iconType:"iInCircle"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.datasourceNoDatasource.panelDescription",{defaultMessage:"This element does not have an attached data source. This is usually because the element is an image or other static asset. If that's not the case you might want to check your expression to make sure it is not malformed."})))),Ws=({onSelect:e,datasources:t,current:a})=>Object(T.jsx)("div",{className:"canvasDataSource__list"},t.map((t=>Object(T.jsx)(q.EuiCard,{key:t.name,title:t.displayName,titleElement:"h5",titleSize:"xs",icon:Object(T.jsx)(q.EuiIcon,{type:t.image,size:"l"}),description:t.help,layout:"horizontal",className:"canvasDataSource__card",selectable:{isSelected:t.name===a,onClick:()=>e(t.name)},"data-test-subj":`canvasDatasourceCard__${t.name}`}))));var Vs=a(32),Gs=a(226);const Us=Object(Pe.withSuspense)(Vs.LazyErrorComponent),$s=({done:e,datatable:t})=>Object(T.jsx)(q.EuiModal,{onClose:e,maxWidth:"1000px",className:"canvasModal--fixedSize"},Object(T.jsx)(q.EuiModalHeader,null,Object(T.jsx)(q.EuiModalHeaderTitle,null,i.i18n.translate("xpack.canvas.datasourceDatasourcePreview.modalTitle",{defaultMessage:"Datasource preview"}))),Object(T.jsx)(q.EuiModalBody,{className:"canvasDatasourcePreview"},Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,Object(T.jsx)(Y.FormattedMessage,{id:"xpack.canvas.datasourceDatasourcePreview.modalDescription",defaultMessage:"The following data will be available to the selected element upon clicking {saveLabel} in the sidebar.",values:{saveLabel:Object(T.jsx)("strong",null,i.i18n.translate("xpack.canvas.datasourceDatasourcePreview.saveButtonLabel",{defaultMessage:"Save"}))}}))),Object(T.jsx)(q.EuiSpacer,null),"error"===t.type?Object(T.jsx)(Us,{payload:t}):Object(T.jsx)(q.EuiPanel,{className:"canvasDatasourcePreview__panel",paddingSize:"none"},t.rows.length>0?Object(T.jsx)(Gs.a,{datatable:t,showHeader:!0,paginate:!0}):Object(T.jsx)(q.EuiEmptyPrompt,{title:Object(T.jsx)("h2",null,i.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptyTitle",{defaultMessage:"No documents found"})),titleSize:"s",body:Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptyFirstLineDescription",{defaultMessage:"We couldn't find any documents matching your search criteria."}),Object(T.jsx)("br",null),i.i18n.translate("xpack.canvas.datasourceDatasourcePreview.emptySecondLineDescription",{defaultMessage:"Check your datasource settings and try again."}))})))),qs=e=>{const[t,a]=Object(n.useState)(),s=Object(h.useExpressionsService)();return Object(n.useEffect)((()=>{s.interpretAst({type:"expression",chain:[e.function]},{}).then(a)}),[s,e.function,a]),t?Object(T.jsx)($s,A()({},e,{datatable:t,setDatatable:a})):Object(T.jsx)(Ss.a,e)};class datasource_component_DatasourceComponent extends n.PureComponent{constructor(...e){super(...e),b()(this,"state",{defaultIndex:""}),b()(this,"getDatasourceFunctionNode",((e,t)=>({arguments:t,function:e,type:"function"}))),b()(this,"setSelectedDatasource",(e=>{const{datasource:t,resetArgs:a,updateArgs:n,selectDatasource:s,datasources:o,setSelecting:r}=this.props;t.name===e?a&&a():n&&n({}),s&&s(o.find((t=>t.name===e))),r(!1)})),b()(this,"save",(()=>{const{stateDatasource:e,stateArgs:t,setDatasourceAst:a}=this.props,n=this.getDatasourceFunctionNode(e.name,t);a&&a(n)}))}componentDidMount(){h.pluginServices.getServices().dataViews.getDefaultDataView().then((e=>{this.setState({defaultIndex:e.title})}))}componentDidUpdate(e){const{args:t,resetArgs:a,datasource:n,selectDatasource:s}=this.props;Object(c.isEqual)(e.args,t)||a(),Object(c.isEqual)(e.datasource,n)||s(n)}render(){const{datasources:e,datasourceDef:t,stateDatasource:a,stateArgs:o,updateArgs:r,selecting:l,setSelecting:c,previewing:u,setPreviewing:d,isInvalid:p,setInvalid:b,renderError:g}=this.props,{defaultIndex:m}=this.state;if(l)return Object(T.jsx)(Ws,{datasources:e,onSelect:this.setSelectedDatasource,current:a.name});const h=u?Object(T.jsx)(qs,{show:u,done:()=>d(!1),function:this.getDatasourceFunctionNode(a.name,o)}):null,f=Object.values(o).some((e=>e&&"object"==typeof e[0]));return Object(T.jsx)(n.Fragment,null,Object(T.jsx)("div",{className:"canvasDataSource__section"},Object(T.jsx)(q.EuiButtonEmpty,{iconSide:"right",iconType:"arrowRight",onClick:()=>c(!l),className:"canvasDataSource__triggerButton",flush:"left",size:"s","data-test-subj":"canvasChangeDatasourceButton"},Object(T.jsx)(q.EuiIcon,{type:a.image,className:"canvasDataSource__triggerButtonIcon"}),a.displayName),Object(T.jsx)(q.EuiSpacer,{size:"s"}),f?Object(T.jsx)(q.EuiCallOut,{color:"warning"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.datasourceDatasourceComponent.expressionArgDescription",{defaultMessage:"The datasource has an argument controlled by an expression. Use the expression editor to modify the datasource."}))):Object(T.jsx)(s.a.Fragment,null,a.render({args:o,updateArgs:r,datasourceDef:t,isInvalid:p,setInvalid:b,defaultIndex:m,renderError:g}),Object(T.jsx)(q.EuiHorizontalRule,{margin:"m"}),Object(T.jsx)(q.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{size:"s",onClick:()=>d(!0)},i.i18n.translate("xpack.canvas.datasourceDatasourceComponent.previewButtonLabel",{defaultMessage:"Preview data"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButton,{disabled:p,size:"s",onClick:this.save,fill:!0,color:"success","data-test-subj":"canvasSaveDatasourceButton"},i.i18n.translate("xpack.canvas.datasourceDatasourceComponent.saveButtonLabel",{defaultMessage:"Save"})))))),h)}}const Ks=e=>{const{datasource:t,stateDatasource:a}=e;return t&&a?Object(T.jsx)(datasource_component_DatasourceComponent,e):Object(T.jsx)(Hs,e)},Xs=Object(l.connect)((e=>({element:Object($e.p)(e),pageId:Object($e.r)(e),functionDefinitions:Object(Ne.c)(e)})),(e=>({dispatchAstAtIndex:({index:t,element:a,pageId:n})=>s=>{e(Object(Ye.h)(a.id)),e(Object(Ye.m)(t,s,a,n))}})),((e,t,a)=>{const{element:n,pageId:s,functionDefinitions:o}=e,{dispatchAstAtIndex:r}=t,i=Object(c.get)(n,"ast.chain",[]).map(((e,t)=>{if("function"!==e.type)return;const a=e.arguments,n=ls.get(e.function);var s;return n?{datasource:n,datasourceDef:(s=n.name,o.find((e=>e.name===s&&"datatable"===e.type))),args:a,expressionIndex:t}:void 0})).filter(Boolean)[0];return{...a,...e,...t,...i,datasources:ls.toArray(),setDatasourceAst:r({pageId:s,element:n,index:i&&i.expressionIndex})}}))((e=>{const{args:t,datasource:a}=e,[s,o]=Object(n.useState)(t),[r,i]=Object(n.useState)(!1),[l,c]=Object(n.useState)(!1),[u,d]=Object(n.useState)(!1),[p,b]=Object(n.useState)(a),g=Object(n.useCallback)((()=>{o(t)}),[o,t]);return Object(T.jsx)(Ks,A()({},e,{stateArgs:s,updateArgs:o,selecting:r,setSelecting:i,previewing:l,setPreviewing:c,isInvalid:u,setInvalid:d,stateDatasource:p,selectDatasource:b,resetArgs:g}))}));Xs.propTypes={done:g.PropTypes.func};const Ys=["view","model","transform","datasource"];function Zs(e,t){const a=Ys.filter((e=>null==t||e===t)).reduce(((t,a)=>{let n;switch(a){case"view":return n=Bs.get(e),n?t.concat(n):t;case"model":return n=Rs.get(e),n?t.concat(n):t;case"transform":return n=Ls.get(e),n?t.concat(n):t;default:return t}}),[]);if(a.length>1)throw new Error(`Found multiple expressions with name "${e}"`);return a[0]||null}var Js=a(111);const Qs=(e,t,a)=>Object.keys(a).find((n=>a[n].type===e&&a[n].value===t)),eo=e=>{const t={name:e.name,removable:e.removable,argResolver:e.argResolver,args:e.args,id:e.id,nestedFunctionsArgs:e.nestedFunctionsArgs,argType:e.argType,argTypeDef:e.argTypeDef,filterGroups:e.filterGroups,context:e.context,expressionType:e.expressionType,nextArgType:e.nextArgType,nextExpressionType:e.nextExpressionType,onAssetAdd:e.onAssetAdd,onValueAdd:e.onValueAdd,onValueChange:e.onValueChange,onValueRemove:e.onValueRemove,onContainerRemove:e.onContainerRemove,updateContext:e.updateContext};return Object(T.jsx)("div",{className:"canvasFunctionForm"},e.expressionType.render(t))},to=({argType:e})=>{return Object(T.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--unknown-expression"},(t=e,i.i18n.translate("xpack.canvas.functionForm.functionUnknown.unknownArgumentTypeError",{defaultMessage:'Unknown expression type "{expressionType}"',values:{expressionType:t}})));var t},ao=e=>{const{contextExpression:t,expressionType:a,context:s,updateContext:o}=e,r=ss()(t),i=Object(n.useCallback)(((e=!1)=>{(e||null==s&&a.requiresContext)&&o()}),[s,a.requiresContext,o]);return Object(n.useEffect)((()=>{const e=a.requiresContext&&r!==t;i(e)}),[t,a,i,r]),Object(T.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--loading"},Object(T.jsx)(Ss.a,null))},no=({context:e})=>Object(T.jsx)("div",{className:"canvasFunctionForm canvasFunctionForm--error"},((e="")=>i.i18n.translate("xpack.canvas.functionForm.contextError",{defaultMessage:"ERROR: {errorMessage}",values:{errorMessage:e}}))(e.error));function so(e,t,a){const n=!a||a.state===e;return t&&t.requiresContext&&n}const oo=e=>{const{expressionType:t,context:a}=e;return t?so("pending",t,a)?Object(T.jsx)(ao,{context:e.context,expressionType:e.expressionType,updateContext:e.updateContext}):so("error",t,a)?Object(T.jsx)(no,{context:null!=a?a:{state:"error",error:"Error occured",value:t}}):Object(T.jsx)(eo,e):Object(T.jsx)(to,{argType:e.argType})},ro=()=>i.i18n.translate("xpack.canvas.error.esPersist.saveFailureTitle",{defaultMessage:"Couldn't save your changes to Elasticsearch"}),io=(e,t)=>({id:Object(nt.a)("asset"),type:e,value:t,"@created":(new Date).toISOString()}),lo=(e,t)=>{switch(e.response&&e.response.status){case 400:return t(e.response,{title:ro()});case 413:return t(i.i18n.translate("xpack.canvas.error.esPersist.tooLargeErrorMessage",{defaultMessage:"The server gave a response that the workpad data was too large. This usually means uploaded image assets that are too large for Kibana or a proxy. Try removing some assets in the asset manager."}),{title:ro()});default:return t(e,{title:i.i18n.translate("xpack.canvas.error.esPersist.updateFailureTitle",{defaultMessage:"Couldn't update workpad"})})}},co=e=>{const{expressionIndex:t,...a}=e,{nextArgType:s,path:o,parentPath:r,argType:i}=a,c=Object(h.useWorkpadService)(),u=Object(h.useNotifyService)(),d=Object(l.useDispatch)(),p=Object(l.useSelector)((e=>Object($e.b)(e,r,t)),Xe.a),b=Object(l.useSelector)((e=>Object($e.p)(e)),Xe.a),g=Object(l.useSelector)((e=>Object($e.r)(e)),l.shallowEqual),m=Object(l.useSelector)((e=>Object(bs.b)(e)),l.shallowEqual),f=Object(l.useSelector)((e=>Object($e.g)(e)),l.shallowEqual),v=Object(l.useSelector)((e=>Object($e.f)(e))),x=Object(n.useCallback)(((e,t)=>()=>{d(Object(Ye.a)({elementId:null==b?void 0:b.id,pageId:g,argName:e,value:t,path:o}))}),[d,null==b?void 0:b.id,g,o]),j=Object(n.useCallback)((()=>d(Object(Ye.f)(t,b,!1,r))),[d,b,t,r]),y=Object(n.useCallback)(((e,t)=>a=>{d(Object(Ye.l)({elementId:null==b?void 0:b.id,pageId:g,argName:e,value:a,valueIndex:t,path:o}))}),[d,null==b?void 0:b.id,g,o]),O=Object(n.useCallback)(((e,t)=>()=>{d(Object(Ye.c)({element:b,pageId:g,argName:e,argIndex:t,path:o}))}),[d,b,g,o]),w=Object(n.useCallback)((()=>{d(Object(Ye.c)({element:b,pageId:g,path:r}))}),[d,b,g,r]),k=Object(n.useCallback)(((e,t)=>{const a=io(e,t);return c.updateAssets(v.id,{...v.assets,[a.id]:a}).then((e=>(d(Object(Js.c)(a)),a.id))).catch((e=>lo(e,u.error)))}),[d,u,c,v.assets,v.id]),_=Object(n.useCallback)(((e,t)=>Qs(e,t,m)||k(e,t)),[m,k]);return Object(T.jsx)(oo,A()({},a,{id:o,context:p,filterGroups:f,expressionType:Zs(i),nextExpressionType:s?Zs(s):void 0,onValueAdd:x,updateContext:j,onValueChange:y,onValueRemove:O,onContainerRemove:w,onAssetAdd:_}))},uo=e=>!e.type||"argument"===e.type,po=(e,t)=>Object.keys(e).reduce(((a,n)=>t(n)?{...a,[n]:e[n]}:a),{}),bo=({context:e=[],mapped:t=[]},{context:a=[],mapped:n=[]})=>({mapped:[...t,...n],context:[...e,...a]}),go=(e="",t,a,n=!1)=>{const s=void 0===a?t:`${t}.${a}`;return{path:e.length?`${e}.${s}`:s,removable:n}};function mo(e,{path:t,removable:a},n){const s=t,o=t?`${t}.chain`:"chain";return e.reduce(((t,r,i)=>{const l=`${o}.${i}.arguments`,c=Ts(r.function);if(t.context=t.context.concat(r),!c)return t;const{argumentsView:u,args:d}=((e,t)=>{const a=e.args.filter((e=>uo(e))),n=a.map((e=>e.name));return{args:po(t,(e=>n.includes(e))),argumentsView:a}})(c,r.arguments),{argumentsView:p,args:b}=((e,t)=>{const a=e.args.filter((e=>!uo(e))),n=a.map((e=>e.name));return{args:po(t,(e=>n.includes(e))),argumentsView:a}})(c,r.arguments),g=(({args:e,argsWithExprFunctions:t,argType:a,argTypeDef:n,argumentsView:s,argUiConfig:o,prevContext:r,expressionIndex:i,nextArg:l,path:c,parentPath:u,removable:d})=>{var p,b,g;const{expressions:m}=h.pluginServices.getServices();return{args:e,nestedFunctionsArgs:t,argType:a.function,argTypeDef:Object.assign(n,{args:s,name:null!==(p=null==o?void 0:o.name)&&void 0!==p?p:n.name,displayName:null!==(b=null==o?void 0:o.displayName)&&void 0!==b?b:n.displayName,help:null!==(g=null==o?void 0:o.help)&&void 0!==g?g:n.name}),argResolver:e=>m.interpretAst(e,r),contextExpression:(f=r,null!=f&&"expression"===f.type?Object(tn.h)(f):f),expressionIndex:i,nextArgType:l&&l.function,path:c,parentPath:u,removable:d};var f})({args:d,argsWithExprFunctions:b,argType:r,argTypeDef:c,argumentsView:u,argUiConfig:n,prevContext:(m=t.context,Array.isArray(m)&&m.length?{type:"expression",chain:m}:null),expressionIndex:i,nextArg:e[i+1]||null,path:l,parentPath:s,removable:a});var m;const f=((e,t,a)=>Object.keys(e).reduce(((n,s)=>{const o=e[s].map((({chain:e},n)=>mo(e,go(a,s,n,!0),null==t?void 0:t.find((e=>e.name===s))))).reduce(((e,t)=>bo(e,t)),{mapped:[],context:[]});return bo(n,o)}),{mapped:[],context:[]}))(b,p,l);return bo(t,{...f,mapped:[g,...f.mapped]})}),{mapped:[],context:[]})}const ho=Object(dt.withProps)((e=>{const t=e.element;return{functionFormItems:mo(Object(c.get)(t,"ast.chain",[]),go("","ast")).mapped}})),fo=Object(dt.compose)(ho)((({functionFormItems:e})=>{const t=e.map((e=>Object(T.jsx)(co,A()({},e,{key:`${e.argType}-${e.expressionIndex}`}))));return Object(T.jsx)("div",null,t)})),vo=({element:e})=>{const t=Object(n.useMemo)((()=>{const t=Object(Sn.e)(e.expression)&&{id:"filters",name:i.i18n.translate("xpack.canvas.elementSettings.filtersTabLabel",{defaultMessage:"Filters",description:"This tab contains information about filters related to a Canvas element"}),content:Object(T.jsx)("div",{className:"canvasSidebar__pop"},Object(T.jsx)(Jn,{element:e})),"data-test-subj":"canvasSidebarFiltersTab"};return[{id:"edit",name:i.i18n.translate("xpack.canvas.elementSettings.displayTabLabel",{defaultMessage:"Display",description:"This tab contains the settings for how data is displayed in a Canvas element"}),content:Object(T.jsx)("div",{className:"canvasSidebar__pop"},Object(T.jsx)("div",{className:"canvasSidebar--args"},Object(T.jsx)(fo,{element:e}))),"data-test-subj":"canvasSidebarDisplayTab"},{id:"data",name:i.i18n.translate("xpack.canvas.elementSettings.dataTabLabel",{defaultMessage:"Data",description:"This tab contains the settings for the data (i.e. Elasticsearch query) used as the source for a Canvas element"}),content:Object(T.jsx)("div",{className:"canvasSidebar__pop"},Object(T.jsx)(Xs,null)),"data-test-subj":"canvasSidebarDataTab"},...t?[t]:[]]}),[e]),[a,o]=Object(n.useState)(t[0].id),r=t.map((e=>Object(T.jsx)(q.EuiTab,{key:e.id,onClick:()=>{return t=e.id,void o(t);var t},isSelected:e.id===a,"data-test-subj":e["data-test-subj"]},e.name))),l=Object(n.useMemo)((()=>t.map((({id:e,content:t})=>e===a?t:Object(T.jsx)("div",{style:{display:"none"}},t)))),[a,t]);return Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(q.EuiTabs,{size:"s"},r),l)},xo=({selectedElementId:e})=>{const t=Object(l.useSelector)((t=>Object($e.c)(t,e,Object($e.r)(t))),Xe.a);return t?Object(T.jsx)(vo,{element:t}):null},jo=()=>Object(T.jsx)(n.Fragment,null,Object(T.jsx)(Za,{title:i.i18n.translate("xpack.canvas.sidebarContent.multiElementSidebarTitle",{defaultMessage:"Multiple elements",description:'The title displayed when multiple elements are selected. "elements" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad.'})}),Object(T.jsx)(q.EuiSpacer,null),Object(T.jsx)(Ja,null)),yo=()=>Object(T.jsx)(n.Fragment,null,Object(T.jsx)(Za,{title:i.i18n.translate("xpack.canvas.sidebarContent.groupedElementSidebarTitle",{defaultMessage:"Grouped element",description:'The title displayed when a grouped element is selected. "elements" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad. These elements can be grouped into a larger "grouped element" that contains multiple individual elements.'})}),Object(T.jsx)(q.EuiSpacer,null),Object(T.jsx)(Qa,null)),Oo=({selectedElementId:e})=>Object(T.jsx)(n.Fragment,null,Object(T.jsx)(Za,{title:i.i18n.translate("xpack.canvas.sidebarContent.singleElementSidebarTitle",{defaultMessage:"Selected element",description:'The title displayed when a single element are selected. "element" refer to the different visualizations, images, text, etc that can be added in a Canvas workpad.'}),showLayerControls:!0}),Object(T.jsx)(xo,{selectedElementId:e})),wo=({selectedToplevelNodes:e,selectedElementId:t})=>e.length>1?Object(T.jsx)(jo,null):1===e.length&&e[0].includes("group")?Object(T.jsx)(yo,null):1===e.length?Object(T.jsx)(Oo,{selectedElementId:t}):Object(T.jsx)(es,null),ko=({commit:e})=>{const t=Object(l.useSelector)((e=>Object($e.t)(e)),l.shallowEqual),a=Object(l.useSelector)((e=>Object($e.q)(e)),l.shallowEqual);return Object(T.jsx)(wo,{commit:e,selectedToplevelNodes:t,selectedElementId:a})},_o=({commit:e})=>Object(T.jsx)("div",{className:"canvasSidebar"},Object(T.jsx)(ko,{commit:e}));var So=a(152),Eo=a(129);class dom_preview_DomPreview extends n.PureComponent{constructor(...e){super(...e),b()(this,"_container",null),b()(this,"_content",null),b()(this,"_observer",null),b()(this,"_original",null),b()(this,"_updateTimeout",0),b()(this,"update",(()=>{if(!this._content||!this._container)return;const e=document.querySelector(`#${this.props.elementId}`);if(e!==this._original){if(this._observer&&this._observer.disconnect(),this._original=e,!this._original)return clearTimeout(this._updateTimeout),void(this._updateTimeout=window.setTimeout(this.update,30));{const e=Object(c.debounce)(this.update,100);this._observer=new MutationObserver(e);const t={attributes:!0,childList:!0,subtree:!0};this._observer.observe(this._original,t)}}if(!this._original)return;const t=this._original.cloneNode(!0);t.id+="-thumb";const a=window.getComputedStyle(this._original,null),n=parseInt(a.getPropertyValue("width"),10),s=parseInt(a.getPropertyValue("height"),10);let o=0,r=0,i=1;this.props.height?(o=this.props.height,i=o/s,r=n*i):this.props.width&&(r=this.props.width,i=r/n,o=s*i),this._content.firstChild&&this._content.removeChild(this._content.firstChild),this._content.appendChild(t),this._content.style.cssText=`transform: scale(${i}); transform-origin: top left;`,this._container.style.cssText=`width: ${r}px; height: ${o}px;`;const l=this._original.querySelectorAll("canvas"),u=t.querySelectorAll("canvas");l.length>0&&Array.from(l).map(((e,t)=>{const a=u[t].getContext("2d");a&&a.drawImage(e,0,0)}))}))}componentDidMount(){this.update()}componentWillUnmount(){clearTimeout(this._updateTimeout),this._observer&&this._observer.disconnect()}render(){return Object(T.jsx)("div",{ref:e=>{this._container=e},className:"dom-preview"},Object(T.jsx)("div",{ref:e=>{this._content=e}}))}}const Mo=({pageId:e,onRemove:t,onDuplicate:a})=>Object(T.jsx)(q.EuiFlexGroup,{className:"canvasPageManager__controls",gutterSize:"xs",justifyContent:"spaceBetween"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:i.i18n.translate("xpack.canvas.pagePreviewPageControls.clonePageTooltip",{defaultMessage:"Clone"})},Object(T.jsx)(q.EuiButtonIcon,{iconType:"copy","aria-label":i.i18n.translate("xpack.canvas.pagePreviewPageControls.clonePageAriaLabel",{defaultMessage:"Clone page"}),onClick:t=>{t.preventDefault(),a(e)}}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:i.i18n.translate("xpack.canvas.pagePreviewPageControls.deletePageTooltip",{defaultMessage:"Delete"})},Object(T.jsx)(q.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":i.i18n.translate("xpack.canvas.pagePreviewPageControls.deletePageAriaLabel",{defaultMessage:"Delete page"}),onClick:a=>{a.preventDefault(),t(e)}})))),Co=({isWriteable:e,page:t,height:a,onDuplicate:n,onRemove:s})=>Object(T.jsx)("div",{className:"canvasPageManager__pagePreview",style:{backgroundColor:t.style.background}},Object(T.jsx)(dom_preview_DomPreview,{elementId:t.id,height:a}),e&&Object(T.jsx)(Mo,{pageId:t.id,onDuplicate:n,onRemove:s})),To=e=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)((e=>({isWriteable:Object($e.C)(e)&&Object(Ne.a)(e)}))),{gotoPage:s}=Object(n.useContext)(xl),o=Object(n.useCallback)((e=>{t(sn.b({id:e,gotoPage:s}))}),[t,s]);return Object(T.jsx)(Co,A()({},e,{onDuplicate:o,isWriteable:a.isWriteable}))};class page_manager_component_PageManager extends n.Component{constructor(e){super(e),b()(this,"_isMounted",!1),b()(this,"_activePageRef",null),b()(this,"_pageListRef",null),b()(this,"scrollToActivePage",(()=>{if(this._activePageRef&&this._pageListRef){if(!this._pageListRef.scrollTo)return;const e=this._activePageRef.offsetLeft,{left:t,right:a,width:n}=this._activePageRef.getBoundingClientRect(),{left:s,right:o,width:r}=this._pageListRef.getBoundingClientRect();t<s&&this._pageListRef.scrollTo({left:e,behavior:"smooth"}),a>o&&this._pageListRef.scrollTo({left:e-r+n,behavior:"smooth"})}})),b()(this,"onConfirmRemove",(e=>{this._isMounted&&this.setState({removeId:e})})),b()(this,"resetRemove",(()=>this._isMounted&&this.setState({removeId:null}))),b()(this,"doRemove",(()=>{const{onRemovePage:e}=this.props,{removeId:t}=this.state;this.resetRemove(),null!==t&&e(t)})),b()(this,"onDragEnd",(({draggableId:e,source:t,destination:a})=>{if(!a)return;const n=a.index-t.index;this.props.onMovePage(e,n)})),b()(this,"renderPage",((e,t)=>{const{isWriteable:a,selectedPage:n}=this.props,s=t+1;return Object(T.jsx)(q.EuiDraggable,{key:e.id,draggableId:e.id,index:t,isDragDisabled:!a,className:"canvasPageManager__page "+(e.id===n?"canvasPageManager__page-isActive":"")},Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"s"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiText,{size:"xs",className:"canvasPageManager__pageNumber"},s)),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(xl.Consumer,null,(({getUrl:t})=>Object(T.jsx)(Eo.b,{to:t(s)},Object(T.jsx)("div",null,Object(T.jsx)(To,{height:100,page:e,onRemove:this.onConfirmRemove}))))))))})),this.state={showTrayPop:!0,removeId:null}}componentDidMount(){this._isMounted=!0,setTimeout((()=>{this.scrollToActivePage(),this._isMounted&&this.setState({showTrayPop:!1})}),1e3)}componentDidUpdate(e){e.selectedPage!==this.props.selectedPage&&setTimeout(this.scrollToActivePage,0)}componentWillUnmount(){this._isMounted=!1}render(){const{pages:e,onAddPage:t,isWriteable:a}=this.props,{showTrayPop:s,removeId:o}=this.state;return Object(T.jsx)(n.Fragment,null,Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"none",className:"canvasPageManager"},Object(T.jsx)(q.EuiFlexItem,{className:"canvasPageManager__pages"},Object(T.jsx)(q.EuiDragDropContext,{onDragEnd:this.onDragEnd},Object(T.jsx)(q.EuiDroppable,{droppableId:"droppable-page-manager",grow:!0,direction:"horizontal"},Object(T.jsx)("div",{className:"canvasPageManager__pageList "+(s?"canvasPageManager--trayPop":"")},e.map(this.renderPage))))),a&&Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{anchorClassName:"canvasPageManager__addPageTip",content:i.i18n.translate("xpack.canvas.pageManager.addPageTooltip",{defaultMessage:"Add a new page to this workpad"}),position:"left"},Object(T.jsx)("button",{onClick:t,className:"canvasPageManager__addPage kbn-resetFocusState","data-test-subj":"canvasAddPageButton"},Object(T.jsx)(q.EuiIcon,{color:"ghost",type:"plusInCircle",size:"l"}))))),Object(T.jsx)(So.a,{isOpen:null!==o,title:i.i18n.translate("xpack.canvas.pageManager.confirmRemoveTitle",{defaultMessage:"Remove Page"}),message:i.i18n.translate("xpack.canvas.pageManager.confirmRemoveDescription",{defaultMessage:"Are you sure you want to remove this page?"}),confirmButtonText:i.i18n.translate("xpack.canvas.pageManager.removeButtonLabel",{defaultMessage:"Remove"}),onConfirm:this.doRemove,onCancel:this.resetRemove}))}}const Po=({onPreviousPage:e})=>{const t=Object(l.useDispatch)(),a=Object(l.useSelector)((e=>({isWriteable:Object($e.C)(e)&&Object(Ne.a)(e),pages:Object($e.l)(e),selectedPage:Object($e.r)(e),workpadId:Object($e.u)(e).id,workpadCSS:Object($e.u)(e).css||Je.r}))),{gotoPage:s}=Object(n.useContext)(xl),o=Object(n.useCallback)((()=>t(sn.a({gotoPage:s}))),[t,s]),r=Object(n.useCallback)(((e,a)=>t(sn.c(e,a,s))),[t,s]),i=Object(n.useCallback)((e=>t(sn.d({id:e,gotoPage:s}))),[t,s]);return Object(T.jsx)(page_manager_component_PageManager,A()({onPreviousPage:e,onAddPage:o,onMovePage:r,onRemovePage:i},a))},No=({done:e})=>Object(T.jsx)("div",null,Object(T.jsx)("div",null,i.i18n.translate("xpack.canvas.expressionElementNotSelected.selectDescription",{defaultMessage:"Select an element to show expression input"})),e&&Object(T.jsx)(q.EuiButton,{size:"s",onClick:e}," ",i.i18n.translate("xpack.canvas.expressionElementNotSelected.closeButtonLabel",{defaultMessage:"Close"})));var Ao=a(45);const Io=Object(Pe.withSuspense)(Pe.LazyExpressionInput),Fo=({error:e,...t})=>Object(T.jsx)("div",{className:"canvasExpressionInput","data-test-subj":"canvasExpressionInput"},Object(T.jsx)(q.EuiFormRow,{className:"canvasExpressionInput__inner",fullWidth:!0,isInvalid:Boolean(e),error:e},Object(T.jsx)("div",{className:"canvasExpressionInput__editor"},Object(T.jsx)(Io,A()({height:"100%"},t))))),Lo=({functionDefinitions:e,formState:t,updateValue:a,setExpression:s,done:o,error:r,isCompact:l,toggleCompactView:c})=>{const u=Object(n.useRef)(null),d=Object(T.jsx)(q.EuiPanel,{className:"canvasTray__panel canvasTray__panel--holdingExpression canvasExpression--"+(l?"compactSize":"fullSize"),paddingSize:"none"},(p=u,b=()=>{r||s(t.expression)},Object(T.jsx)(f.Shortcuts,{name:"EXPRESSION",handler:e=>{p.current&&p.current&&p.current.hasTextFocus()&&"RUN"===e&&b()},targetNodeSelector:"body",global:!0,stopPropagation:!0})),Object(T.jsx)(Fo,{isCompact:l,expressionFunctions:e,error:r||" ",expression:t.expression,onChange:a,onEditorDidMount:e=>{null==e||e._standaloneKeybindingService.addDynamicKeybinding("-editor.action.insertLineAfter",Ao.monaco.KeyMod.CtrlCmd|Ao.monaco.KeyCode.Enter,(()=>{}))},editorRef:u}),Object(T.jsx)("div",{className:"canvasExpression__settings"},Object(T.jsx)(q.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.expression.runTooltip",{defaultMessage:"Run the expression"})," ",Object(T.jsx)(Ka,{namespace:"EXPRESSION",action:"RUN"}))},Object(T.jsx)(q.EuiButton,{fill:!0,disabled:!!r,onClick:()=>{s(t.expression),l||r||c()},size:"s"},i.i18n.translate("xpack.canvas.expression.runButtonLabel",{defaultMessage:"Run"})))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{size:"s",color:t.dirty?"danger":"primary",onClick:o},t.dirty?i.i18n.translate("xpack.canvas.expression.cancelButtonLabel",{defaultMessage:"Cancel"}):i.i18n.translate("xpack.canvas.expression.closeButtonLabel",{defaultMessage:"Close"}))))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiLink,{href:"https://www.elastic.co/guide/en/kibana/current/canvas-function-reference.html",target:"_blank"},i.i18n.translate("xpack.canvas.expression.learnLinkText",{defaultMessage:"Learn expression syntax"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{iconType:"fullScreen",onClick:c,size:"s"},l?i.i18n.translate("xpack.canvas.expression.maximizeButtonLabel",{defaultMessage:"Maximize editor"}):i.i18n.translate("xpack.canvas.expression.minimizeButtonLabel",{defaultMessage:"Minimize Editor"}))))))));var p,b;return l?d:Object(T.jsx)(q.EuiPortal,null,d)},Do=({done:e})=>{const{element:t,pageId:a}=Object(l.useSelector)((e=>({pageId:Object($e.r)(e),element:Object($e.p)(e)})));return t?Object(T.jsx)(zo,{key:t.id,done:e,element:t,pageId:a}):Object(T.jsx)(No,{done:e})},zo=({done:e,element:t,pageId:a})=>{const s=Object(h.useExpressionsService)(),o=Object(l.useDispatch)(),[r,i]=Object(n.useState)(!0),c=Object(n.useCallback)((()=>{i(!r)}),[r,i]),u=Object(n.useCallback)((e=>{o(Object(Ye.h)(t.id)),o(Object(Ye.n)(e,t.id,a))}),[o,t,a]),[d,p]=Object(n.useState)({dirty:!1,expression:t.expression}),b=Object(n.useCallback)(((e="")=>{p({expression:e,dirty:!0})}),[p]),g=Object(n.useCallback)((e=>{p({...d,dirty:!1}),u(e)}),[p,u,d]),m=d.expression,f=Object(n.useMemo)((()=>{try{return Object(tn.d)(m),null}catch(e){return e.message}}),[m]);Object(n.useEffect)((()=>{t.expression===d.expression||d.dirty||p({dirty:!1,expression:t.expression})}),[t,p,d]);const v=Object(n.useMemo)((()=>Object.values(s.getFunctions())),[s]);return Object(T.jsx)(Lo,{done:e,isCompact:r,functionDefinitions:v,formState:d,setExpression:g,toggleCompactView:c,updateValue:b,error:f})},Ro=({children:e,done:t})=>Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(q.EuiFlexGroup,{className:"canvasTray__toggle",justifyContent:"spaceAround"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonIcon,{size:"s",onClick:t,"aria-label":i.i18n.translate("xpack.canvas.toolbarTray.closeTrayAriaLabel",{defaultMessage:"Close tray"}),iconType:"arrowDown"}))),Object(T.jsx)("div",{className:"canvasTray"},e)),Bo=Object(l.connect)((e=>({workpadName:Object($e.z)(e),workpadId:Object($e.u)(e).id,totalPages:Object($e.u)(e).pages.length,selectedPageNumber:Object($e.s)(e)+1,selectedElement:Object($e.p)(e),isWriteable:Object($e.C)(e)&&Object(Ne.a)(e)})))((({isWriteable:e,selectedElement:t,selectedPageNumber:a,totalPages:s,workpadName:o})=>{const[r,l]=Object(n.useState)(null),{getUrl:c,previousPage:u}=Object(n.useContext)(xl);Object(n.useEffect)((()=>{e||"expression"!==r||l(null)}),[e,r]);const d=Boolean(t),p=t=>{if(r===t)l(null);else{if(!e&&"expression"===t)return;l(t)}},b={pageManager:Object(T.jsx)(Po,{onPreviousPage:u}),expression:d?Object(T.jsx)(Do,{done:()=>l(null)}):null};return Object(T.jsx)("div",{className:"canvasToolbar hide-for-sharing"},null!==r&&Object(T.jsx)(Ro,{done:()=>l(null)},b[r]),Object(T.jsx)("div",{className:"canvasToolbar__container"},Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(T.jsx)(q.EuiFlexItem,{grow:!1,className:"canvasToolbar__home"},o),Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",gutterSize:"none",className:"canvasToolbar__controls"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Eo.a,{color:"text",to:c(a-1),iconType:"arrowLeft",isDisabled:a<=1,"aria-label":i.i18n.translate("xpack.canvas.toolbar.previousPageAriaLabel",{defaultMessage:"Previous Page"}),"data-test-subj":"previousPageButton"})),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{color:"text",onClick:()=>p("pageManager"),"data-test-subj":"canvasPageManagerButton"},((e,t)=>i.i18n.translate("xpack.canvas.toolbar.pageButtonLabel",{defaultMessage:"Page {pageNum}{rest}",values:{pageNum:e,rest:t>1?` of ${t}`:""}}))(a,s))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Eo.a,{color:"text",to:c(a+1),iconType:"arrowRight",isDisabled:a>=s,"aria-label":i.i18n.translate("xpack.canvas.toolbar.nextPageAriaLabel",{defaultMessage:"Next Page"}),"data-test-subj":"nextPageButton"})),Object(T.jsx)(q.EuiFlexItem,null),d&&e&&Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{color:"text",iconType:"editorCodeBlock",onClick:()=>p("expression"),"data-test-subj":"canvasExpressionEditorButton"},i.i18n.translate("xpack.canvas.toolbar.editorButtonLabel",{defaultMessage:"Expression editor"}))))))))})),Ho={zoomIn:({zoomScale:e,setZoomScale:t})=>()=>{const a=Je.D.find((t=>e<t))||Je.y;t(a)},zoomOut:({zoomScale:e,setZoomScale:t})=>()=>{const a=Je.D.slice().reverse().find((t=>e>t))||Je.z;t(a)},resetZoom:({setZoomScale:e})=>()=>{e(1)}};var Wo=a(46);let Vo;function Go(e,t){Vo&&Vo("canvas",e,t)}var Uo=a(77),$o=a(149),qo=a(99);const Ko=(e=(()=>({done(){},reload(){},update(){},event(){},onDestroy(){},getRenderMode:()=>"view",isSyncColorsEnabled:()=>!1,isSyncTooltipsEnabled:()=>!1,isSyncCursorEnabled:()=>!0,isInteractive:()=>!0,getExecutionContext:()=>{}}))())=>({...e,destroy(){},getElementId:()=>"",getFilter:()=>"",onComplete(e){this.done=e},onDestroy(e){this.destroy=e},onEmbeddableDestroyed(){},onEmbeddableInputChange(){},onResize(e){this.resize=e},resize(e){}}),Xo=e=>{let t,a=!1,n=()=>{};return s=>{Object(c.isEqual)(t,s)||(a=!1,t=s);const{filters:o}=h.pluginServices.getServices();return{...Ko(),event(e){switch(e.name){case"embeddableInputChange":this.onEmbeddableInputChange(e.data);break;case"applyFilterAction":o.updateFilter(s.id,e.data);break;case"onComplete":this.onComplete(e.data);break;case"embeddableDestroyed":this.onEmbeddableDestroyed();break;case"resize":this.resize(e.data);break;case"onResize":this.onResize(e.data)}},getFilter:()=>s.filter||"",onComplete(e){n=e},getElementId:()=>s.id,onEmbeddableInputChange(t){e(Object($o.c)({elementId:s.id,embeddableExpression:t}))},onEmbeddableDestroyed(){const t=[s.id,"expressionRenderable"];e(Object(qo.a)({path:t})),e(Object($o.b)(s.id))},done(){a||(a=!0,n())}}}},Yo=e=>e?"matrix3d("+e.join(",")+")":"translate3d(0,0,0)",Zo=({children:e,transformMatrix:t,width:a,height:n})=>{const o=s.a.Children.only(e),r=t.map(((e,t)=>t<12?e:Math.round(e))),i={width:a,height:n,marginLeft:-a/2,marginTop:-n/2,position:"absolute",transform:Yo(r)};return Object(T.jsx)("div",{className:"canvasPositionable canvasInteractable",style:i},o)},Jo=({render:e,style:t})=>{const a=Object(n.useCallback)((t=>{null!==t&&e(t)}),[e]);return Object(T.jsx)("div",{className:"render_to_dom",ref:a,style:t})};var Qo=a(3),er=a(113);const tr=()=>{const e=Object(l.useSelector)($e.r),t=Object(l.useDispatch)(),a=Object(n.useCallback)(((a,n)=>{if(Go&&Go(Wo.METRIC_TYPE.CLICK,a),n){const s=Object(er.a)(n,a,void 0,!0);t(Object(Ye.b)(e,{expression:s}))}}),[e,t]),s=Object(n.useCallback)((()=>({viewMode:new Qo.BehaviorSubject("edit"),addNewPanel:async({panelType:e,initialState:t})=>{a(e,t)},disableTriggers:!0})),[a]);return Object(n.useMemo)((()=>s()),[s])},{RenderWithFn:ar}=qe.f,nr={height:"100%",width:"100%"},sr=({name:e,renderFn:t,reuseNode:a=!1,handlers:s,config:o,width:r,height:i})=>{const l=tr(),{error:u}=Object(h.useNotifyService)(),[d,p]=Object(n.useState)(null),b=Object(n.useRef)(!0),g=Object(n.useRef)(null),m=Object(n.useRef)(s),f=Object(n.useCallback)((()=>{if(!d)return;for(b.current||m.current.destroy();d.firstChild;)d.removeChild(d.firstChild);const e=document.createElement("div");e.style.width="100%",e.style.height="100%",d.appendChild(e),g.current=e,b.current=!0}),[d]);Object(n.useEffect)((()=>m.current.resize({height:i,width:r})),[i,r]),Object(n.useEffect)((()=>()=>{m.current.destroy()}),[]);const v=Object(n.useCallback)((async()=>{Object(c.isEqual)(m.current,s)||(m.current=s),await t(g.current,{...o,canvasApi:l},m.current)}),[g,o,t,s,l]);return Object(n.useEffect)((()=>{d&&(a&&g.current||f(),v().then((()=>{b.current=!1})).catch((t=>{u(t,{title:ar.getRenderErrorMessage(e)})})))}),[d,e,u,v,f,a]),Object(T.jsx)("div",{className:"canvasWorkpad--element_render canvasRenderEl",style:nr},Object(T.jsx)(Jo,{style:nr,render:e=>{p(e)}}))};class element_share_container_ElementShareContainer extends s.a.PureComponent{constructor(...e){super(...e),b()(this,"state",{renderComplete:!1}),b()(this,"createDoneChecker",(()=>{})),b()(this,"clearDoneChecker",(()=>{clearTimeout(this.timeout)}))}componentDidMount(){const{onComplete:e}=this.props;this.createDoneChecker(),e((()=>{if(this.clearDoneChecker(),!this.sharedItemRef)return;const e=new CustomEvent("renderComplete");this.sharedItemRef.dispatchEvent(e),this.setState({renderComplete:!0})}))}getSnapshotBeforeUpdate(e){return{functionName:e.functionName}}componentDidUpdate(e,t,a){a.functionName!==this.props.functionName&&(this.clearDoneChecker(),this.createDoneChecker())}componentWillUnmount(){this.clearDoneChecker()}render(){const e="embeddable"!==this.props.functionName;return Object(T.jsx)("div",{"data-shared-item":e?this.state.renderComplete:void 0,"data-render-complete":e?this.state.renderComplete:void 0,className:this.props.className,ref:e=>this.sharedItemRef=e},this.props.children)}}const or=({selectElement:e})=>Object(T.jsx)("h3",{onClick:e},"Invalid expression"),rr=({renderableType:e,selectElement:t})=>Object(T.jsx)("h3",{onClick:t},"Element not found: ",e),ir=e=>{const{renderable:t,renderFunction:a,width:n,height:s,handlers:o,backgroundColor:r,state:i}=e,{onComplete:l}=o;if(!i||!t)return Object(T.jsx)(Ss.a,{backgroundColor:r});if(t&&"render"!==Object(tn.e)(t)&&!a)return Object(T.jsx)(rr,A()({},e,{renderableType:null==t?void 0:t.as}));if("error"===i||"render"!==Object(tn.e)(t)||!a)return Object(T.jsx)(or,e);const u=Object(c.omitBy)(t.containerStyle,c.isNil);return Object(T.jsx)("div",{css:Object(T.css)(t.css,"",""),className:"canvas__element canvasElement",style:{...u,width:n,height:s},"data-test-subj":"canvasWorkpadPageElementContent"},Object(T.jsx)(element_share_container_ElementShareContainer,{className:"canvasElement__content",onComplete:l,functionName:a.name},Object(T.jsx)(sr,{name:a.name,renderFn:a.render,reuseNode:a.reuseDomNode,config:t.value,width:n,height:s,handlers:o})))},lr=e=>{const t=Object(h.useExpressionsService)(),a=Object(l.useSelector)($e.r),n=Object(l.useSelector)((e=>{var t;return null===(t=Object($e.k)(e,a))||void 0===t?void 0:t.style.background}))||"",{renderable:s}=e,o=s?t.getRenderer(s.as):null;return Object(T.jsx)(ir,A()({},e,{renderFunction:o,backgroundColor:n}))},cr=Object(dt.compose)(Object(l.connectAdvanced)((function(e){let t={};const a=Xo(e);return(e,n)=>{const{element:s,...o}=n,{transformMatrix:r,width:i,height:l}=s,c=Object($e.o)(e,s.id,"expressionRenderable"),u={...o,selectedPage:Object($e.r)(e),state:Object(Uo.b)(c),renderable:Object(Uo.c)(c),createHandlers:a,transformMatrix:r,width:i,height:l,element:{id:s.id,filter:s.filter,expression:s.expression}};return Xe()(t,u)||(t=u),t}})),Object(dt.withPropsOnChange)(((e,t)=>!Xe()(e.element,t.element)),(e=>{const{element:t,createHandlers:a}=e;return{handlers:a(t)}})),Object(dt.mapProps)((e=>{const{element:t,createHandlers:a,selectedPage:n,...s}=e;return s})))((e=>{const{renderable:t,transformMatrix:a,width:n,height:s,state:o,handlers:r}=e;return Object(T.jsx)(Zo,{transformMatrix:a,width:n,height:s},Object(T.jsx)(lr,{renderable:t,state:o,handlers:r,width:n,height:s}))}));cr.propTypes={element:m.a.shape({id:m.a.string.isRequired,transformMatrix:m.a.arrayOf(m.a.number).isRequired,width:m.a.number.isRequired,height:m.a.number.isRequired,expression:m.a.string,filter:m.a.string}).isRequired},m.a.string.isRequired,m.a.object,m.a.string.isRequired,m.a.object.isRequired,m.a.arrayOf(m.a.shape({id:m.a.string.isRequired,transformMatrix:m.a.arrayOf(m.a.number).isRequired,width:m.a.number.isRequired,height:m.a.number.isRequired,type:m.a.string})).isRequired,m.a.number.isRequired,m.a.number.isRequired,m.a.func,m.a.string,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func,m.a.func.isRequired,m.a.func.isRequired,m.a.func.isRequired,m.a.number.isRequired;class static_workpad_page_StaticWorkpadPage extends n.PureComponent{render(){const{pageId:e,pageStyle:t,className:a,animationStyle:n,elements:s,height:o,width:r}=this.props;return Object(T.jsx)("div",{key:e,id:e,"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasStaticPage ${a}`,"data-shared-items-container":!0,style:{...t,...n,height:o,width:r}},s.filter((e=>!Object(La.a)(e.id))).map((e=>Object(T.jsx)(cr,{key:e.id,element:e}))))}}let ur=0;const dr=e=>(...t)=>{let a=NaN,n=null;return s=>a===(a=s.primaryUpdate.payload.uid)?n:n=e(...t.map((e=>e(s))))},pr=e=>e,br=dr((e=>e.currentScene))(pr),gr=dr((e=>e.primaryUpdate))(pr),mr=Boolean(window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.match("Macintosh|iPhone|iPad")),hr=e=>e.primaryUpdate,fr=dr((e=>e.gestureState))(br),vr=dr((e=>"cursorPosition"===e.type?e.payload:null))(hr),xr=dr((e=>"mouseEvent"===e.type?e.payload:null))(hr),jr=dr((({type:e,payload:{altKey:t,metaKey:a,shiftKey:n,ctrlKey:s}})=>"cursorPosition"===e||"mouseEvent"===e?{altKey:t,metaKey:a,shiftKey:n,ctrlKey:s}:{}))(hr),yr=dr(mr?e=>e.metaKey:e=>e.altKey)(jr),Or=dr(mr?e=>e.altKey:e=>e.ctrlKey)(jr),wr=dr((e=>e.shiftKey))(jr),kr=dr((({cursor:e},t)=>t||e))(fr,vr),_r=dr((e=>{if(!e)return{down:!1,up:!1,uid:null};const{event:t,uid:a}=e;return"mouseDown"===t?{down:!0,up:!1,uid:a}:"mouseUp"===t?{down:!1,up:!0,uid:a}:{down:!1,up:!1,uid:null}}))(xr),Sr=dr((({mouseIsDown:e},t)=>t?"mouseDown"===t.event:e))(fr,xr),Er=dr((e=>e&&("actionEvent"===e.type||"mouseEvent"===e.type&&"mouseUp"===e.payload.event)))(hr),Mr=dr((({mouseButtonState:{buttonState:e,downX:t,downY:a}},n,{x:s,y:o})=>{const r=((e,t,a)=>{switch(e){case"up":return t?"downed":"up";case"downed":return t?a?"dragging":"downed":"up";case"dragging":return t?"dragging":"up"}})(e,n,s!==t||o!==a);return{buttonState:r,downX:"downed"===r?s:t,downY:"downed"===r?o:a}}))(fr,Sr,kr),Cr=dr((e=>"downed"===e.buttonState))(Mr),Tr=dr((e=>"dragging"===e.buttonState))(Mr),Pr=dr((({buttonState:e,downX:t,downY:a},{x:n,y:s})=>({down:"up"!==e,x0:t,y0:a,x1:n,y1:s})))(Mr,kr),Nr=dr((e=>"actionEvent"===e.type?e.payload:null))(hr),Ar=dr(((e,t,a)=>({cursor:e,mouseIsDown:t,mouseButtonState:a})))(kr,Sr,Mr),Ir=dr((e=>e.shapes))(br),Fr=dr((e=>e.configuration))(br),Lr=dr(((e,t,a)=>((e,{x:t,y:a})=>((e,t,a)=>e.map(((e,n)=>({...Dt(e,t,a),shape:e,index:n}))))(e,t,a).filter((e=>e.inside)).sort(((e,t)=>t.z-e.z||t.index-e.index)).map((e=>e.shape)))(t.filter((t=>("annotation"!==t.type||t.interactive)&&(e.intraGroupManipulation||!t.parent||"annotation"===t.type))),a)))(Fr,Ir,kr),Dr=dr((e=>e.length?e[0]:null))(Lr),zr=dr((({draggedShape:e,shapes:t},a,n,s)=>n&&t.reduce(((t,a)=>t||e&&a.id===e.id),!1)&&e||n&&s&&a))(br,Dr,Sr,Cr),Rr=dr(((e,t)=>e||t))(zr,Dr),Br=dr((e=>e?["relax"]:[]))(yr),Hr=wr,Wr=dr((({mouseTransformState:e})=>e||Yt))(br),Vr=dr(((e,t,{x0:a,y0:n,x1:s,y1:o})=>{if(!t||isNaN(a)||isNaN(n)||isNaN(s)||isNaN(o))return Yt;{const t=s-a,r=o-n;return{deltaX:t,deltaY:r,transform:yt(t-e.deltaX,r-e.deltaY,0),cumulativeTransform:yt(t,r,0)}}}))(Wr,Tr,Pr),Gr=dr((e=>[e].filter((e=>e.transform)).map((({transform:e,cumulativeTransform:t})=>({transform:e,cumulativeTransform:t})))))(Vr),Ur=dr(((e,t,{x0:a,y0:n,x1:s,y1:o})=>e&&!t&&{x:(a+s)/2,y:(n+o)/2,a:Math.abs(s-a)/2,b:Math.abs(o-n)/2}))(Tr,zr,Pr),$r=dr(((e,t)=>(e.selectedShapes||[]).map((e=>t.find((t=>t.id===e))))))(br,Ir),qr=dr((e=>e.selectionState))(br),Kr=dr(((e,t)=>{if(!e)return[];const a=(({x:e,y:t,a:a,b:n})=>(s,o,r)=>{const i=((e,t,a)=>[ft,vt,jt,xt].map((n=>_t(e,(([e,t,a,n],[s,o,r,i])=>[e*s,t*o,a*r,n*i])(n,[t,a,0,1])))))(s,o,r);return i.every((([s,o])=>e-a<=s&&s<=e+a&&t-n<=o&&o<=t+n))})(e);return t.filter((e=>"annotation"!==e.type&&!e.parent&&a(e.transformMatrix,e.a,e.b)))}))(Ur,Ir),Xr=dr(((e,t,a,n,{up:s,down:o,uid:r},i,l,c)=>{const u=r===e.uid,d=!o;return a&&(e.shapes=a.slice()),d||u?{...e,shapes:s&&e.boxHighlightedShapes.length?e.shapes.concat(e.boxHighlightedShapes).filter(((e,t,a)=>a.findIndex((t=>t.id===e.id))===t)):e.shapes,down:o,uid:r,metaHeld:i,boxHighlightedShapes:c}:(t.singleSelect||!l?Pa:Na)(e,t,n,i,r,a,c)}))(qr,Fr,$r,Lr,_r,yr,Hr,Kr),Yr=dr((({uid:e,depthIndex:t,down:a,metaHeld:n,boxHighlightedShapes:s})=>({uid:e,depthIndex:t,down:a,metaHeld:n,boxHighlightedShapes:s})))(Xr),Zr=dr((e=>e.shapes))(Xr),Jr=dr((e=>e.map(Jt)))(Zr),Qr=Or,ei=dr(((e,t)=>(t?ea:ta)(e)))(Fr,Qr),ti=dr(((e,t,a,n,s,o,r)=>[...aa(t.map((e=>e.cumulativeTransform)),a),...na(e,t.map((e=>e.transform)),a,n,s,o),...sa(e,t,a,n,r)]))(Fr,Gr,Zr,Ir,kr,Br,ei),ai=dr((e=>Ia[e&&e.event]||null))(Nr),ni=dr((e=>Fa[e&&e.event]||null))(Nr),si=dr(((e,t,a,n)=>{if(1!==n.length||"adHocGroup"!==n[0].subtype)return[];const s=n[0],o=a.filter((e=>e.parent===s.id&&"annotation"!==e.type));if(e&&o.length>1){const{controlledAnchor:t,horizontal:a}=e,n=Xt(s,[[1/0,1/0],[-1/0,-1/0]]),r=ia(n,t,a);return o.map((e=>{const n=Xt(e,[[1/0,1/0],[-1/0,-1/0]]),s=ia(n,t,a),o=r-s;return{cumulativeTransforms:[yt(a?o:0,a?0:o,0)],shapes:[e.id]}}))}if(t&&o.length>2){const{horizontal:e}=t,{a:a,b:n}=s,r=Xt(s,[[1/0,1/0],[-1/0,-1/0]]),i=ia(r,-1,e),l=ra(e),c=o.map((e=>Xt(e,[[1/0,1/0],[-1/0,-1/0]]))),u=c.map((t=>ia(t,-1,e))),d=c.map((e=>[e[0][l],e[1][l]])),p=d.map((e=>(e[1]+e[0])/2)),b=d.map((e=>e[1]-e[0])),g=b.reduce(((e,t)=>e+t),0),m=((e?2*a:2*n)-g)/(o.length-1),h=[...Array(o.length)].map(((e,t)=>t)).sort(((e,t)=>p[e]-p[t]));return h.reduce((({cursor:e,deltas:t},a)=>{const n=b[a],s=u[a];return{cursor:e+n+m,deltas:[...t,e-s]}}),{cursor:i,deltas:[]}).deltas.map(((t,a)=>{const n=h[a];return{cumulativeTransforms:[yt(e?t:0,e?0:t,0)],shapes:[o[n].id]}}))}return[]}))(ai,ni,Ir,Zr),oi=dr(((e,t)=>e.concat(t)))(ti,si),ri=dr(((e,t)=>{return e.map((a=t,e=>{const t=Object(Ze.c)(a.map((t=>t.transforms&&t.transforms.length&&t.shapes.find((t=>t===e.id))&&t.transforms.map(oa(e.localTransformMatrix)))).filter(Ze.d)),n=Object(Ze.c)(a.map((t=>t.sizes&&t.sizes.length&&t.shapes.find((t=>t===e.id))&&t.sizes)).filter(Ze.d)),s=Object(Ze.c)(a.map((t=>t.cumulativeTransforms&&t.cumulativeTransforms.length&&t.shapes.find((t=>t===e.id))&&t.cumulativeTransforms.map(oa(e.localTransformMatrix)))).filter(Ze.d)),o=Object(Ze.c)(a.map((t=>t.cumulativeSizes&&t.cumulativeSizes.length&&t.shapes.find((t=>t===e.id))&&t.cumulativeSizes)).filter(Ze.d)),r=kt(e.baselineLocalTransformMatrix||e.localTransformMatrix,...t),i=kt(...s),l=Ft(...n)||At,c=s.length?kt(r,i):r,u=Ft(...o),d=(([e,t,a,n,s,o,r,i,l],[c,u,d])=>[e*c+n*u+r*d,t*c+s*u+i*d,a*c+o*u+l*d])(o.length?Ft(l,u):l,e.baseAB?[...e.baseAB,1]:[e.a,e.b,1]),p=!(t.length||n.length||s.length||o.length);return{...e,baselineLocalTransformMatrix:p?null:r,baselineSizeMatrix:p?null:l,localTransformMatrix:p?e.localTransformMatrix:c,a:p?e.a:d[0],b:p?e.b:d[1],baseAB:p?null:e.baseAB||[e.a,e.b]}}));var a}))(Ir,oi),ii=dr(((e,t)=>t&&e.find((e=>e.id===Jt(t)))))(Ir,zr),li=dr(((e,t,a,n)=>{const s=a?[t.find((e=>e.id===a.id))].filter(Ze.d):[];return s.length?((e,t,a,n)=>{const s={};let o=0;const r=Vt[n.horizontalPosition],i=Gt[n.verticalPosition];for(const l of a){if("annotation"===l.type)continue;const a=e.pageWidth/2+1,c=e.pageHeight/2+1,u=[{a:a,b:c,localTransformMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,a-1,c-1,0,1]}];for(const a of t.concat(u)){if("annotation"===a.type)continue;if(!e.intraGroupManipulation&&a.parent)continue;if(e.intraGroupSnapOnly&&l.parent!==a.parent&&l.parent!==a.id)continue;const c=l.id===a.id?{...l,localTransformMatrix:l.baselineLocalTransformMatrix||l.localTransformMatrix,a:l.baseAB?l.baseAB[0]:l.a,b:l.baseAB?l.baseAB[1]:l.b}:a;for(let a=-1;a<2;a++)for(let u=-1;u<2;u++){if(a&&!u||!a&&u)continue;if(n.subtype===e.resizeHandleName&&!(r===a&&i===u||0===r&&0!==a&&i===u||0===i&&0!==u&&r===a))continue;const d=zt(l.a,l.b,da(t,l),a,u);for(let n=-1;n<2;n++)for(let r=-1;r<2;r++){if(n&&!r||!n&&r)continue;const i=zt(c.a,c.b,da(t,c),n,r);for(let t=0;t<2;t++){const n=1-t,r=d[t],p=i[t],b=a+"|"+u+"|"+t,g=r-p,m=Math.abs(g),h=s[b];if(Math.round(m)<=e.guideDistance&&(!h||m<=h.distance)){const a=[d[n],i[n],...h?[h.lowPoint,h.highPoint]:[]],r=Math.min(...a),u=Math.max(...a),f=(r+u)/2,v=f-r;s[b]={id:o++,localTransformMatrix:yt(t?f:p,t?p:f,e.atopZ),a:t?v:.5,b:t?.5:v,lowPoint:r,highPoint:u,distance:m,signedDistance:g,dimension:t?"vertical":"horizontal",constrained:l.id,constrainer:c.id}}}}}}}return Object.values(s)})(e,t,s,n).map((t=>({...t,id:e.alignmentGuideName+"_"+t.id,type:"annotation",subtype:e.alignmentGuideName,interactive:!1,backgroundColor:"magenta",parent:null}))):[]}))(Fr,ri,ii,zr),ci=dr(((e,t,a)=>e?a:t.slice(0,1)))(Ur,Lr,Kr),ui=dr(((e,t,a,n)=>t.filter((e=>e&&"annotation"!==e.type&&-1===a.indexOf(e.id)&&!n)).map(Aa(e.hoverAnnotationName,e.hoverLift))))(Fr,ci,Jr,zr),di=dr(((e,t,a,n,s,o,r)=>{const i=t.filter((e=>"annotation"!==e.type)),l=a&&a.subtype;if(l&&-1===[e.resizeHandleName,e.adHocGroupName,e.persistentGroupName].indexOf(l))return i;const c=s,u=-1!==o.indexOf("relax"),d=e.snapConstraint&&!u,p=d&&ha(c,ba),b=d&&ha(c,ga),g=l===e.resizeHandleName?((e,t,a,n,s,o)=>r=>{const i=a&&r.id===a.id,l=e&&e.constrained===r.id,c=t&&t.constrained===r.id,u=l?e.signedDistance:0,d=c?-t.signedDistance:0;if(l||c){const e=n?1:.5,t=Nt(a.localTransformMatrix),i=-Vt[s],l=Gt[o],c=Math.sin(t),p=Math.cos(t),b=i*(p*u-c*d),g=l*(c*u+p*d),m=Mt(kt(wt(t),yt((1-e)*-u,(1-e)*d,0))),h=[e*b,e*g];return{...r,snapDeltaMatrix:m,snapResizeVector:h}}return i?{...r,snapDeltaMatrix:null,snapResizeVector:null}:wa(r)})(p,b,n,r,a.horizontalPosition,a.verticalPosition):((e,t,a)=>n=>{const s=e&&e.constrained===n.id,o=t&&t.constrained===n.id,r=s?-e.signedDistance:0,i=o?-t.signedDistance:0;if(s||o){if(!r&&!i)return n;const e=Mt(kt(wt(Nt(a.localTransformMatrix)),yt(r,i,0)));return{...n,snapDeltaMatrix:e}}return n.snapDeltaMatrix||n.snapResizeVector?wa(n):n})(p,b,n);return i.map(g)}))(Fr,ri,zr,ii,li,Br,Qr),pi=dr(((e,t)=>e.concat(t.filter((e=>"annotation"===e.type)))))(di,ri),bi=dr(((e,t,a,n,s)=>a&&a.subtype===e.rotationHandleName?[{id:e.rotationTooltipName+"_"+t.id,type:"annotation",subtype:e.rotationTooltipName,interactive:!1,parent:null,localTransformMatrix:yt(s.x,s.y,e.tooltipZ),a:0,b:0,text:String(Math.round(Nt(t.transformMatrix)/Math.PI*180))}]:[]))(Fr,ii,zr,oi,kr),gi=dr(((e,t)=>{const a=e&&e.event;return t||"group"!==a&&"ungroup"!==a?null:a}))(Nr,Sr),mi=dr(((e,t,a)=>{const n=t.filter((t=>t.type===e.groupName&&t.subtype===e.adHocGroupName)),s=(e=>t=>e.find((e=>t=>t.id===e.id)(t)))(a),o=e=>s(e)&&"annotation"!==e.type,r=t.filter(o),i=t.filter(Object(Ze.f)(o));return{selectionOutsideGroup:!a.some((t=>(t=>t.type===e.groupName)(t)||(t=>t.parent&&t.parent.startsWith(e.groupName))(t))),freshSelectedShapes:r,freshNonSelectedShapes:i,preexistingAdHocGroups:n}}))(Fr,pi,Zr),hi=dr(((e,t,a,n,s)=>{const{selectionOutsideGroup:o,freshSelectedShapes:r,freshNonSelectedShapes:i,preexistingAdHocGroups:l}=s;if("group"===n){const n=a.filter((t=>t.subtype===e.adHocGroupName));return{shapes:t.map((t=>t.subtype===e.adHocGroupName?{...t,subtype:e.persistentGroupName}:t)),selectedShapes:a.filter((t=>t.subtype!==e.adHocGroupName)).concat(n.map((t=>({...t,subtype:e.persistentGroupName}))))}}if("ungroup"===n)return ka(a.filter((t=>t.subtype===e.persistentGroupName)),t,_a(l,r));if(l.length&&o)return ka(l,t,_a(l,r));const c=((e,t)=>{const a=Object(Ze.a)(e.map((e=>e.id)));return t.filter((e=>a[e.id])).map(Zt(e))})(t,a);if(1===c.length&&"group"===c[0].type)return e.groupResize?{shapes:[...Ca(t.filter((e=>"annotation"!==e.type)),c[0]),...t.filter((e=>"annotation"===e.type))],selectedShapes:a}:Ta(t,a);if(a.length<2)return Ta(t,a);{const a=((e,t)=>{const a=t.reduce(((e,t)=>Kt(e,...Xt(t,e))),[[1/0,1/0],[-1/0,-1/0]]),{a:n,b:s,localTransformMatrix:o,rigTransform:r}=(([[e,t],[a,n]])=>{const s=(a-e)/2,o=(n-t)/2,r=e+s,i=t+o;return{a:s,b:o,localTransformMatrix:yt(r,i,0),rigTransform:yt(-r,-i,-0)}})(a);return{id:((e,t)=>{const a=e+"|"+t;return Rt[a]||(Rt[a]=Object(nt.a)(e))})(e.groupName,t.map((e=>e.id)).join("|")),type:e.groupName,subtype:e.adHocGroupName,a:n,b:s,localTransformMatrix:o,rigTransform:r,parent:null}})(e,r),n=((t,a,n)=>Object(Ze.g)((e=>e.id),Object(Ze.c)(n.map((t=>(t=>t.subtype===e.adHocGroupName)(t)?a.filter((e=>e.parent===t.id)):t)))))(0,t,r),s=n.map((e=>({...e,parent:a.id,localTransformMatrix:kt(a.rigTransform,e.transformMatrix)}))),o=t=>t.subtype!==e.adHocGroupName&&!s.find((e=>t.id===e.id)),c=t=>t.parent&&t.parent.startsWith(e.groupName)&&l.find((e=>e.id===t.parent))?{...t,parent:null}:t;return{shapes:s.concat(i.filter(o).map(c)).concat([a]),selectedShapes:[a]}}}))(Fr,pi,Zr,gi,mi),fi=dr((({selectedShapes:e})=>e))(hi),vi=dr((e=>e.map((e=>e.id))))(fi),xi=dr((e=>e.map(Jt)))(fi),ji=dr(((e,{shapes:t})=>{const a=t.filter((t=>t.subtype===e.adHocGroupName));return t.filter((e=>"annotation"!==e.type&&e.parent&&a.find((t=>t.id===e.parent)))).map(Aa(e.getAdHocChildAnnotationName,e.hoverLift))}))(Fr,hi),yi=dr(Oa)(Fr,hi),Oi=dr(((e,{shapes:t,selectedShapes:a})=>a.map(((n,s)=>fa(e,t,a,n,s))).filter(Ze.d)))(Fr,hi),wi=dr(((e,t)=>t?[{id:e.dragBoxAnnotationName,type:"annotation",subtype:e.dragBoxAnnotationName,interactive:!1,parent:null,localTransformMatrix:yt(t.x,t.y,e.dragBoxZ),a:t.a,b:t.b}]:[]))(Fr,Ur),ki=dr((({shapes:e},t,a,n,s,o,r,i)=>{const l=[].concat(t,a,n,s,o,r,i);return e.filter((e=>"annotation"!==e.type)).concat(l)}))(hi,li,ui,Oi,yi,bi,ji,wi),_i=dr((e=>e.map((e=>t=>({...t,transformMatrix:pa(e,t),width:2*ca(t),height:2*ua(t)}))(e))))(ki),Si=dr(((e,t,a)=>{if(!t)return"auto";switch(t.subtype){case e.rotationHandleName:return"crosshair";case e.resizeHandleName:const n=(180*Nt(t.transformMatrix)/Math.PI+360)%360+t.cursorAngle,s=(45*Math.round(n/45)+360)%360;return qt[s];default:return a?"grabbing":"grab"}}))(Fr,Rr,ii),Ei=dr(((e,t,a,n,s,o,r,i,l,c,u)=>({configuration:e,hoveredShape:t,selectedShapes:a,selectedPrimaryShapes:n,shapes:s,gestureEnd:o,draggedShape:r,cursor:i,selectionState:l,mouseTransformState:c,gestureState:u})))(Fr,Dr,vi,xi,_i,Er,zr,Si,Yr,Vr,Ar),Mi=dr(((e,t)=>({primaryUpdate:t,currentScene:e})))(Ei,gr),Ci=({transformMatrix:e,width:t,height:a})=>Object(T.jsx)("div",{className:"canvasAlignmentGuide canvasInteractable canvasLayoutAnnotation",style:{background:"magenta",height:a,marginLeft:-t/2,marginTop:-a/2,position:"absolute",transform:Yo(e),width:t}}),Ti=({transformMatrix:e,width:t,height:a})=>Object(T.jsx)("div",{className:"canvasDragBoxAnnotation canvasLayoutAnnotation",style:{height:a,marginLeft:-t/2,marginTop:-a/2,transform:Yo(e),width:t}}),Pi=({transformMatrix:e,width:t,height:a})=>Object(T.jsx)("div",{className:"canvasHoverAnnotation canvasLayoutAnnotation",style:{width:t,height:a,marginLeft:-t/2,marginTop:-a/2,transform:Yo(e)}}),Ni=({transformMatrix:e,text:t})=>{const a={transform:`${Yo(e)} translate(1em, -1em)`};return Object(T.jsx)("div",{className:"tooltipAnnotation canvasLayoutAnnotation",style:a},Object(T.jsx)("p",null,t,"°"))},Ai=({transformMatrix:e,zoomScale:t=1})=>Object(T.jsx)("div",{className:"canvasRotationHandle canvasLayoutAnnotation",style:{transform:Yo(e)}},Object(T.jsx)("div",{className:"canvasRotationHandle__handle",style:{transform:`scale3d(${1/t},${1/t},1)`}})),Ii=({transformMatrix:e,width:t,height:a})=>Object(T.jsx)("div",{className:"canvasBorderConnection canvasLayoutAnnotation",style:{height:a,marginLeft:-t/2,marginTop:-a/2,position:"absolute",transform:Yo(e),width:t}}),Fi=({transformMatrix:e,zoomScale:t=1})=>Object(T.jsx)("div",{className:"canvasBorderResizeHandle canvasLayoutAnnotation",style:{transform:`${Yo(e)} scale3d(${1/t},${1/t}, 1)`}}),Li=["button","checkbox","color","file","image","radio","range","reset","submit"],Di=({tagName:e,type:t})=>{switch(e.toLowerCase()){case"input":return!Li.includes(t);case"textarea":return!0;default:return!1}};class workpad_shortcuts_WorkpadShortcuts extends n.Component{constructor(...e){super(...e),b()(this,"_keyMap",{CUT:this.props.cutNodes,COPY:this.props.copyNodes,PASTE:this.props.pasteNodes,CLONE:this.props.cloneNodes,DELETE:this.props.deleteNodes,BRING_TO_FRONT:this.props.bringToFront,BRING_FORWARD:this.props.bringForward,SEND_BACKWARD:this.props.sendBackward,SEND_TO_BACK:this.props.sendToBack,GROUP:this.props.groupNodes,UNGROUP:this.props.ungroupNodes,SHIFT_UP:this.props.shiftUp,SHIFT_DOWN:this.props.shiftDown,SHIFT_LEFT:this.props.shiftLeft,SHIFT_RIGHT:this.props.shiftRight,NUDGE_UP:this.props.nudgeUp,NUDGE_DOWN:this.props.nudgeDown,NUDGE_LEFT:this.props.nudgeLeft,NUDGE_RIGHT:this.props.nudgeRight})}render(){return Object(T.jsx)(f.Shortcuts,{name:"ELEMENT",handler:(e,t)=>{Di(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())},targetNodeSelector:"body",global:!0})}shouldComponentUpdate(e){return!Xe()(e,this.props)}}const zi=Object(dt.compose)(Object(dt.withHandlers)(it),Object(dt.withHandlers)(ct),Object(dt.withHandlers)(ot),Object(dt.withHandlers)(lt),Object(dt.withHandlers)(ut))(workpad_shortcuts_WorkpadShortcuts);zi.propTypes={pageId:m.a.string.isRequired,selectedNodes:m.a.arrayOf(m.a.object),elementLayer:m.a.func.isRequired,insertNodes:m.a.func.isRequired,removeNodes:m.a.func.isRequired,selectToplevelNodes:m.a.func.isRequired,commit:m.a.func.isRequired};class interaction_boundary_InteractionBoundary extends n.PureComponent{constructor(){super(),this.state={height:"0",width:"0",marginLeft:"0",marginTop:"0"}}componentDidMount(){const e=$("#"+cu),t=e.height(),a=e.width();t&&a&&this.setState({height:t-24+"px",width:a-24+"px",marginLeft:-(a-24)/2+"px",marginTop:-(t-24)/2+"px"})}render(){const e={top:"50%",left:"50%",position:"absolute",...this.state};return Object(T.jsx)("div",{id:"canvasInteractionBoundary",style:e})}}class interactive_workpad_page_InteractiveWorkpadPage extends n.PureComponent{componentWillUnmount(){this.props.resetHandler()}render(){const{pageId:e,pageStyle:t,className:a,elements:n,cursor:s="auto",height:o,width:r,onDoubleClick:i,onKeyDown:l,onMouseDown:c,onMouseLeave:u,onMouseMove:d,onMouseUp:p,onAnimationEnd:b,onWheel:g,selectedNodes:m,selectToplevelNodes:h,insertNodes:f,removeNodes:v,elementLayer:x,canvasOrigin:j,saveCanvasOrigin:y,commit:O,setMultiplePositions:w,zoomScale:k}=this.props;let _=null;const S={elementLayer:x,insertNodes:f,pageId:e,removeNodes:v,selectedNodes:m,selectToplevelNodes:h,commit:O,setMultiplePositions:w};return _=Object(T.jsx)(zi,S),Object(T.jsx)("div",{key:e,id:e,ref:e=>{!j&&e&&e.getBoundingClientRect&&y((()=>()=>e.getBoundingClientRect()))},"data-test-subj":"canvasWorkpadPage",className:`canvasPage kbn-resetFocusState canvasInteractivePage ${a}`,"data-shared-items-container":!0,style:{...t,height:o,width:r,cursor:s},onKeyDown:l,onMouseMove:d,onMouseUp:p,onMouseDown:c,onMouseLeave:u,onDoubleClick:i,onAnimationEnd:b,onWheel:g},Object(T.jsx)(interaction_boundary_InteractionBoundary,null),_,n.map((e=>{if("annotation"===e.type){const t={key:e.id,type:e.type,transformMatrix:e.transformMatrix,width:e.width,height:e.height,text:e.text,zoomScale:k};switch(e.subtype){case"alignmentGuide":return Object(T.jsx)(Ci,t);case"adHocChildAnnotation":case"hoverAnnotation":return Object(T.jsx)(Pi,t);case"dragBoxAnnotation":return Object(T.jsx)(Ti,t);case"rotationHandle":return Object(T.jsx)(Ai,t);case"resizeHandle":return Object(T.jsx)(Fi,t);case"resizeConnector":return Object(T.jsx)(Ii,t);case"rotationTooltip":return Object(T.jsx)(Ni,t);default:return[]}}else if("group"!==e.type)return Object(T.jsx)(cr,{key:e.id,element:e})})).filter((e=>!!e)))}}const Ri=e=>e instanceof Element&&e.closest(`#${cu}`),Bi=(e,t,a,n=1)=>{const{left:s,top:o}=e();return{x:(t-s)/n,y:(a-o)/n}},Hi=()=>{window.onmousemove=null,window.onmouseup=null},Wi=(e,{clientX:t,clientY:a,altKey:n,metaKey:s,shiftKey:o,ctrlKey:r,target:i},l,c)=>{if(!Ri(i))return;const{x:u,y:d}=Bi(l,t,a,c);e&&e("cursorPosition",{x:u,y:d,altKey:n,metaKey:s,shiftKey:o,ctrlKey:r})},Vi={onMouseDown:e=>t=>((e,t,a,n,s=!0)=>{const{clientX:o,clientY:r,buttons:i,altKey:l,metaKey:c,shiftKey:u,ctrlKey:d,target:p}=t;if(!Ri(p))return;if(1!==i||!e)return void Hi();s&&((e,t,a)=>{window.onmousemove=({buttons:n,clientX:s,clientY:o,altKey:r,metaKey:i,shiftKey:l,ctrlKey:c,target:u})=>{if(!Ri(u))return;const{x:d,y:p}=Bi(t,s,o,a);e("cursorPosition",1===n||void 0!==t?{x:d,y:p,altKey:r,metaKey:i,shiftKey:l,ctrlKey:c}:{})},window.onmouseup=n=>{const{clientX:s,clientY:o,altKey:r,metaKey:i,shiftKey:l,ctrlKey:c,target:u}=n;if(!Ri(u))return;const{x:d,y:p}=Bi(t,s,o,a);e("mouseEvent",{event:"mouseUp",x:d,y:p,altKey:r,metaKey:i,shiftKey:l,ctrlKey:c}),Hi()}})(e,a,n);const{x:b,y:g}=Bi(a,o,r,n);e("mouseEvent",{event:"mouseDown",x:b,y:g,altKey:l,metaKey:c,shiftKey:u,ctrlKey:d}),s||e("mouseEvent",{event:"mouseUp",x:b,y:g,altKey:l,metaKey:c,shiftKey:u,ctrlKey:d})})(e.commit,t,e.canvasOrigin,e.zoomScale,e.canDragElement(t.target)),onMouseMove:e=>t=>Wi(e.commit,t,e.canvasOrigin,e.zoomScale),onMouseLeave:e=>t=>((e,{buttons:t,target:a})=>{Ri(a)&&1!==t&&e&&e("cursorPosition",{})})(e.commit,t),onWheel:e=>t=>Wi(e.commit,t,e.canvasOrigin),resetHandler:()=>()=>Hi()},Gi={getAdHocChildAnnotationName:"adHocChildAnnotation",adHocGroupName:"adHocGroup",alignmentGuideName:"alignmentGuide",atopZ:1e3,depthSelect:!0,devColor:"magenta",dragBoxAnnotationName:"dragBoxAnnotation",dragBoxZ:1050,groupName:"group",groupResize:!0,guideDistance:3,hoverAnnotationName:"hoverAnnotation",hoverLift:100,intraGroupManipulation:!1,intraGroupSnapOnly:!1,minimumElementSize:2,persistentGroupName:"persistentGroup",resizeAnnotationConnectorOffset:0,resizeAnnotationOffset:0,resizeAnnotationOffsetZ:.1,resizeAnnotationSize:10,resizeConnectorName:"resizeConnector",resizeHandleName:"resizeHandle",rotateAnnotationOffset:12,rotateSnapInPixels:10,rotationEpsilon:.001,rotationHandleName:"rotationHandle",rotationHandleSize:14,rotationTooltipName:"rotationTooltip",shortcuts:!1,singleSelect:!1,snapConstraint:!0,tooltipZ:1100};function Ui(e){let t=this;const a=t.matches?"matches":"msMatchesSelector";do{if(t[a](e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}const $i=Object(dt.compose)(Object(l.connect)(((e,t)=>{const a=e.transient.selectedToplevelNodes,n=Object($e.j)(e,t.pageId),s=a.map((e=>n.find((t=>t.id===e)))).filter((e=>e)),o=Object(Ze.c)(s.map((e=>n.find((t=>t.id===e.id))?[e.id]:n.filter((t=>t.parent===e.id)).map((e=>e.id))))),r=Object(Ze.c)(o.map(Ga(n)));return{state:e,isEditable:!Object(Ne.b)(e)&&Object($e.C)(e)&&Object(Ne.a)(e),elements:n,selectedToplevelNodes:a,selectedNodes:r.map((e=>n.find((t=>t.id===e)))),pageStyle:Object($e.k)(e,t.pageId).style,zoomScale:Object(Ne.d)(e)}}),(e=>({dispatch:e,insertNodes:(t,a)=>e(Object(Ye.j)(t,a)),removeNodes:(t,a)=>e(Object(Ye.k)(t,a)),selectToplevelNodes:t=>e(Object(pt.a)(t.filter((e=>!e.position.parent)).map((e=>e.id)))),elementLayer:(t,a,n)=>e(Object(Ye.d)({pageId:t,elementId:a,movement:n})),setMultiplePositions:t=>a=>e(Object(Ye.p)(a.map((e=>({...e,pageId:t,elementId:e.id})))))})),(({state:e,...t},{dispatch:a,...n},s)=>({...s,...n,...t,updateGlobalState:Va(a,e),setMultiplePositions:n.setMultiplePositions(s.pageId)}))),Object(dt.withState)("aeroStore","setAeroStore"),Object(dt.withProps)((({aeroStore:e,setAeroStore:t,elements:a,selectedToplevelNodes:n,height:s,width:o})=>{const r=(e=>{const t=e.map((()=>null)),a=n=>{if(t[n])return t[n];const s=e[n].id,o=e.map(((e,t)=>[e,t])).filter((([e])=>e.position.parent===s)).map((([,e])=>e));if(0===o.length)t[n]=n;else{const e=Math.max(...o.map(a));t[n]=e}return t[n]},n=e.map(((e,t)=>(({id:e,position:t},a)=>({...Da(e),parent:t&&t.parent||null,transformMatrix:za(t,a),a:t.width/2,b:t.height/2}))(e,a(t)))).filter(((e,t,a)=>!Object(La.a)(e.id)||a.find((t=>t.parent===e.id)))).filter(Wa);(e=>{const t=Object(Ze.a)(e.map((e=>e.id)));e.forEach((e=>{e.parent&&!t[e.parent]&&(e.parent=null)}))})(n);const s=(o=n,e=>e.parent?kt(Et(o.find((t=>t.id===e.parent)).transformMatrix),e.transformMatrix):e.transformMatrix);var o;return n.map((e=>({...e,localTransformMatrix:s(e)})))})(a),i=n.filter((e=>r.find((t=>t.id===e)))),l={primaryUpdate:null,currentScene:{shapes:r,configuration:{...Gi,pageHeight:s,pageWidth:o},selectedShapes:i,selectionState:e?e.getCurrentState().currentScene.selectionState:{uid:0,depthIndex:0,down:!1},gestureState:e?e.getCurrentState().currentScene.gestureState:{cursor:{x:1/0,y:1/0},mouseIsDown:!1,mouseButtonState:{buttonState:"up",downX:null,downY:null}}}};return e?e.setCurrentState(l):t(e=((e,t)=>{let a=e;const n=(e,n)=>a=t({...a,primaryUpdate:{type:e,payload:{...n,uid:ur++}}});return{getCurrentState:()=>a,setCurrentState:e=>{a=e,n("flush",{})},commit:n}})(l,Mi)),{aeroStore:e}})),Object(dt.withProps)((({aeroStore:e,updateGlobalState:t})=>({commit:(a,n)=>{const s=e.commit(a,n);s.currentScene.gestureEnd&&t(s)}}))),Object(dt.lifecycle)({componentWillUnmount(){this.props.unregisterLayout(this.props.aeroStore)}}),Object(dt.withState)("canvasOrigin","saveCanvasOrigin"),Object(dt.withState)("_forceRerender","forceRerender"),Object(dt.withProps)((({registerLayout:e,aeroStore:t,updateGlobalState:a,forceRerender:n})=>(e(((e,s)=>{const o=t.commit(e,s);return o.currentScene.gestureEnd&&a(o),n(o),o})),{cursor:t.getCurrentState().currentScene.cursor}))),Object(dt.withProps)((({aeroStore:e,elements:t})=>{const a=new Map(t.map((e=>[e.id,e])));return{elements:e.getCurrentState().currentScene.shapes.map((e=>{const t=a.get(e.id);return t?{...e,width:2*e.a,height:2*e.b,filter:t.filter}:e}))}})),Object(dt.withProps)((({commit:e,forceRerender:t})=>({commit:(...a)=>t(e(...a))}))),Object(dt.withProps)(((...e)=>({...e,canDragElement:e=>!(e=>"function"==typeof e.closest?e.closest(`.${Mn.CANVAS_EMBEDDABLE_CLASSNAME}`)&&!e.closest(".embPanel__header"):Ui.call(e,`.${Mn.CANVAS_EMBEDDABLE_CLASSNAME}`)&&!Ui.call(e,".embPanel__header"))(e)&&!(e=>"function"==typeof e.closest?e.closest(".euiSelect"):Ui.call(e,".euiSelect"))(e)&&(e=>{const t=".canvasWorkpadContainer";return"function"==typeof e.closest?!!e.closest(t):!!Ui.call(e,t)})(e)}))),Object(dt.withHandlers)(Vi),(()=>interactive_workpad_page_InteractiveWorkpadPage)),qi=Object(dt.compose)(Object(dt.shouldUpdate)(Object(Ze.f)(Xe.a)),Object(dt.withProps)((({animation:e,isSelected:t})=>e?{className:e.name+" "+(t?"isActive":"isInactive"),animationStyle:{animationDirection:e.direction,animationDuration:"1s"}}:{className:t?"isActive":"isInactive",animationStyle:{}})),Object(l.connect)(((e,{isSelected:t,pageId:a,isFullscreen:n})=>({isInteractive:t&&!n&&Object($e.C)(e)&&Object(Ne.a)(e),elements:Object($e.j)(e,a),pageStyle:Object($e.k)(e,a).style}))),Object(dt.branch)((({isInteractive:e})=>e),$i,(()=>Object(dt.withProps)(Ba)(static_workpad_page_StaticWorkpadPage))))(),Ki=e=>{const{isFullscreen:t}=Object(n.useContext)(xl);return Object(T.jsx)(qi,A()({},e,{isFullscreen:t}))};var Xi=a(6);const Yi=({isFullscreen:e=!1,children:t})=>{const[a,s]=Object(n.useState)(Object(Xi.a)().innerWidth),[o,r]=Object(n.useState)(Object(Xi.a)().innerHeight),i=Object(c.debounce)((({target:e})=>{const{innerWidth:t,innerHeight:a}=e;s(t),r(a)}),100);return Object(n.useEffect)((()=>{const e=Object(Xi.a)();return e.addEventListener("resize",i),()=>e.removeEventListener("resize",i)})),t({isFullscreen:e,windowSize:{width:a,height:o}})},Zi=({children:e})=>{const{isFullscreen:t}=Object(n.useContext)(xl);return Object(T.jsx)(Yi,{isFullscreen:t,children:e})};class workpad_shortcuts_component_WorkpadShortcuts extends s.a.Component{constructor(...e){super(...e),b()(this,"_toggleFullscreen",(()=>{const{setFullscreen:e,isFullscreen:t}=this.props;e(!t)})),b()(this,"nextPage",(()=>{this.props.nextPage()})),b()(this,"previousPage",(()=>{this.props.previousPage()})),b()(this,"zoomIn",(()=>{this.props.zoomIn()})),b()(this,"zoomOut",(()=>{this.props.zoomOut()})),b()(this,"resetZoom",(()=>{this.props.resetZoom()})),b()(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,UNDO:this.props.undoHistory,REDO:this.props.redoHistory,GRID:()=>this.props.setGrid(!this.props.grid),ZOOM_IN:this.zoomIn,ZOOM_OUT:this.zoomOut,ZOOM_RESET:this.resetZoom,PREV:this.previousPage,NEXT:this.nextPage,FULLSCREEN:this._toggleFullscreen}),b()(this,"_keyHandler",((e,t)=>{Di(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())}))}render(){return Object(T.jsx)(f.Shortcuts,{name:"EDITOR",handler:this._keyHandler,targetNodeSelector:"body",global:!0})}}const Ji=({fetchAllRenderables:e,getAnimation:t,grid:a,hasHeaderBanner:s,height:o,isFullscreen:r,nextPage:i,onTransitionEnd:l,pages:c,previousPage:u,redoHistory:d,registerLayout:p,resetZoom:b,selectedPageNumber:g,setFullscreen:m,setGrid:h,totalElementCount:f,width:v,workpadCss:x,undoHistory:j,unregisterLayout:y,zoomIn:O,zoomOut:w,zoomScale:k})=>{const _=Object(n.useMemo)((()=>{if(!s)return 0;if("undefined"==typeof document)return 0;const e=getComputedStyle(document.documentElement).getPropertyValue("--kbnHeaderBannerHeight");return parseInt(e,10)}),[s]),S={height:r?o:(o+2*Je.C)*k,width:r?v:(v+2*Je.C)*k};return Object(T.jsx)("div",{className:"canvasWorkpad__buffer",style:S},Object(T.jsx)("div",{className:"canvasCheckered",style:{height:o,width:v,transformOrigin:"0 0",transform:r?void 0:`scale3d(${k}, ${k}, 1)`}},!r&&Object(T.jsx)(workpad_shortcuts_component_WorkpadShortcuts,{fetchAllRenderables:e,grid:a,isFullscreen:r,nextPage:i,previousPage:u,redoHistory:d,resetZoom:b,setFullscreen:m,setGrid:h,undoHistory:j,zoomIn:O,zoomOut:w}),Object(T.jsx)(Zi,null,(({isFullscreen:e,windowSize:n})=>{const r=Math.min((n.height-_)/o,n.width/v),i=e?{transform:`scale3d(${r}, ${r}, 1)`,WebkitTransform:`scale3d(${r}, ${r}, 1)`,msTransform:`scale3d(${r}, ${r}, 1)`,height:n.height<o?"auto":o,width:n.width<v?"auto":v,top:s?_/2+"px":void 0}:{};return Object(T.jsx)("div",{css:Object(T.css)(x||Je.r,"",""),className:"canvasWorkpad "+(e?"fullscreen":""),style:i,"data-shared-items-count":f},c.map(((e,a)=>Object(T.jsx)(Ki,{key:e.id,pageId:e.id,height:o,width:v,isSelected:a+1===g,animation:t(a+1),onAnimationEnd:l,registerLayout:p,unregisterLayout:y}))),Object(T.jsx)("div",{className:"canvasGrid",style:{height:o,width:v,display:a?"block":"none"}}))}))))};var Qi=a(114);const el=e=>{const t=Object(l.useDispatch)(),[a,s]=Object(n.useState)(!1),[o,r]=Object(n.useState)(null),[i]=Object(n.useState)(0),{isFullscreen:c,setFullscreen:u,undo:d,redo:p,autoplayInterval:b,nextPage:g,previousPage:m}=Object(n.useContext)(xl),f=Object(h.usePlatformService)(),v=ce()(f.hasHeaderBanner$()),x=Object(l.useSelector)((e=>{const{width:t,height:a,id:n,css:s}=Object($e.u)(e);return{pages:Object($e.l)(e),selectedPageNumber:Object($e.s)(e)+1,totalElementCount:Object($e.a)(e).length,width:t,height:a,workpadCss:s,workpadId:n,isFullscreen:Object(Ne.b)(e),zoomScale:Object(Ne.d)(e)}})),j=x.pages[x.selectedPageNumber-1];Object(Qi.c)(j);const y=Object(n.useCallback)((()=>{t(Object(Ye.e)())}),[t]),O=Object(n.useCallback)((e=>{t(Object(pt.e)(e))}),[t]),w=Object(n.useCallback)((e=>{if(!o||!o.name)return null;if(![x.selectedPageNumber,i].includes(e))return null;const{enter:t,exit:a}=nn.get(o.name);return{name:e===Math.max(x.selectedPageNumber,i)?t:a,direction:i>x.selectedPageNumber?"reverse":"normal"}}),[x.selectedPageNumber,o,i]),k=Object(n.useCallback)((()=>r(null)),[r]),_=Object(n.useCallback)((e=>{u(e),!0===e&&Go(Wo.METRIC_TYPE.COUNT,b>0?[Je.v,Je.w]:Je.v)}),[u,b]),S=(({zoomScale:e,setZoomScale:t})=>({zoomIn:Object(n.useCallback)((()=>{const a=Je.D.find((t=>e<t))||Je.y;t(a)}),[e,t]),zoomOut:Object(n.useCallback)((()=>{const a=Je.D.slice().reverse().find((t=>e>t))||Je.z;t(a)}),[e,t]),resetZoom:Object(n.useCallback)((()=>{t(1)}),[t])}))({setZoomScale:O,zoomScale:x.zoomScale});return Object(T.jsx)(Ji,A()({},e,x,{setFullscreen:_,isFullscreen:c,undoHistory:d,redoHistory:p,hasHeaderBanner:v,grid:a,setGrid:s,nextPage:g,previousPage:m,fetchAllRenderables:y,getAnimation:w,onTransitionEnd:k},S))};class element_Element{constructor(e){b()(this,"name",void 0),b()(this,"displayName",void 0),b()(this,"type",void 0),b()(this,"icon",void 0),b()(this,"help",void 0),b()(this,"expression",void 0),b()(this,"filter",void 0),b()(this,"width",void 0),b()(this,"height",void 0);const{name:t,icon:a,displayName:n,type:s,expression:o,filter:r,help:i,width:l,height:c}=e;if(this.name=t,this.displayName=n||t,this.icon=a||"empty",this.help=i||"",!e.expression)throw new Error("Element types must have a default expression");this.type=s,this.expression=o,this.filter=r,this.width=l||500,this.height=c||300}}class elements_registry_ElementsRegistry extends tn.a{wrapper(e){return new element_Element(e)}}const tl=new elements_registry_ElementsRegistry,al=i.i18n.translate("sharedUXPackages.buttonToolbar.toolbar.errorToolbarText",{defaultMessage:"There are over 120 extra buttons. Please consider limiting the number of buttons."}),nl=({children:e})=>{const{primaryButton:t,iconButtonGroup:a,extraButtons:n=[]}=e;if(n.length>120)throw new Error(al);const s=n.map(((e,t)=>e?Object(T.jsx)(q.EuiFlexItem,{grow:!1,key:`button-${t}`},e):null));return Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"s"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},t),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{wrap:!0,responsive:!1,alignItems:"center",gutterSize:"s"},a?Object(T.jsx)(q.EuiFlexItem,{grow:!1},a):null,s)))},sl=({buttons:e,legend:t,buttonSize:a="m","data-test-subj":n})=>{const s=(({euiTheme:e})=>({button:{"&.euiButtonGroupButton":{backgroundColor:e.colors.emptyShade,border:`${e.border.thin} !important`,borderRight:"none !important","&:first-of-type":{borderTopLeftRadius:`${e.border.radius.medium} !important`,borderBottomLeftRadius:`${e.border.radius.medium} !important`},"&:last-of-type":{borderRight:`${e.border.thin} !important`,borderTopRightRadius:`${e.border.radius.medium} !important`,borderBottomRightRadius:`${e.border.radius.medium} !important`},":not(:first-child):not(.euiButtonGroupButton-isSelected):not(:disabled)":{boxShadow:"unset"}}},buttonGroup:{".euiButtonGroup__buttons":{borderRadius:`${e.border.radius.medium}`}}}))(Object(q.useEuiTheme)()),o=e.map(((e,t)=>{const{label:a,title:n=a,...o}=e;return{...o,"aria-label":null!=n?n:a,id:`${Object(q.htmlIdGenerator)()()}${t}`,label:a,title:n,css:[s.button]}}));return Object(T.jsx)(q.EuiButtonGroup,{"data-test-subj":n,buttonSize:a,legend:t,options:o,onChange:e=>{var t;null===(t=o.find((t=>t.id===e)))||void 0===t||t.onClick()},type:"multi",isIconOnly:!0,css:s.buttonGroup})},ol=e=>({bold:e.font.weight.bold,normal:e.font.weight.regular}),rl=(e,{type:t,isDisabled:a,groupPosition:n})=>{const s=(({euiTheme:e})=>({default:{borderStyle:"solid",border:e.border.thin,borderColor:e.border.color},emptyButton:{backgroundColor:e.colors.emptyShade,border:`${e.border.thin}`,color:`${e.colors.text}`},buttonPositions:{left:{borderTopRightRadius:0,borderBottomRightRadius:0},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"},center:{borderRadius:0,borderLeft:"none"}}}))(e),o=n&&"none"!==n?s.buttonPositions[n]:{},r={...s.default,...o};return a?r:{...r,..."primary"===t?{}:s.emptyButton}},il=({hasArrow:e=!0,fontWeight:t="normal",type:a,label:n,iconSide:s,iconType:o,fullWidth:r,isDisabled:i,groupPosition:l,...c})=>{const u=Object(q.useEuiTheme)(),d={...rl(u,{type:a,isDisabled:i,groupPosition:l}),fontWeight:ol(u.euiTheme)[t]},p=i?{}:"primary"===a?{color:"primary",fill:!0}:{color:"text"},b=null!=o?o:e?"arrowDown":"";return Object(T.jsx)(q.EuiButton,A()({size:c.size,isDisabled:i,css:d,iconType:b,iconSide:o?s:"right",fullWidth:r,contentProps:r?{style:{justifyContent:"space-between"}}:{}},p,c),n)},ll=({size:e,type:t,label:a,isDisabled:n,groupPosition:s,...o})=>{const r=Object(q.useEuiTheme)(),i=rl(r,{type:t,isDisabled:n,groupPosition:s});return Object(T.jsx)(q.EuiButtonIcon,A()({},o,{disabled:n,"aria-label":null!=a?a:o["aria-label"],size:e,iconSize:e,css:i,display:"primary"===t?"fill":"base",color:"primary"===t?"primary":"text"}))};function cl(e){const{type:t="empty",size:a="m"}=e;return(e=>"iconButton"===e.as)(e)?Object(T.jsx)(ll,A()({},e,{size:a,type:t})):Object(T.jsx)(il,A()({},e,{size:a,type:t}))}const ul=({onClick:e,size:t="m",...a})=>Object(T.jsx)(cl,A()({},a,{type:"empty",onClick:e,iconType:"folderOpen",size:t,label:i.i18n.translate("sharedUXPackages.buttonToolbar.buttons.addFromLibrary.libraryButtonLabel",{defaultMessage:"Add from library"})}));var dl=a(123);const pl=()=>{const e=Object(l.useDispatch)(),t=Object(l.useSelector)(dl.b),a=Object(n.useCallback)((()=>e(Object(Ye.e)())),[e]);return Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.workpadHeaderRefreshControlSettings.refreshTooltip",{defaultMessage:"Refresh data"}),Object(T.jsx)(Ka,{namespace:"EDITOR",action:"REFRESH"}))},Object(T.jsx)(q.EuiButtonIcon,{disabled:t,iconType:"refresh","aria-label":i.i18n.translate("xpack.canvas.workpadHeaderRefreshControlSettings.refreshAriaLabel",{defaultMessage:"Refresh Elements"}),onClick:a,"data-test-subj":"canvas-refresh-control"}))};var bl=function(e){return e.SECONDS="s",e.MINUTES="m",e.HOURS="h",e.DAYS="d",e}(bl||{});const gl={[bl.SECONDS]:1e3,[bl.MINUTES]:6e4,[bl.HOURS]:36e5,[bl.DAYS]:864e5},ml=(e="")=>!!String(e).match(/^([0-9]{1,})([hmsd])$/),hl=(e="")=>{if(!isNaN(Number(e)))return;const t=String(e).match(/^([0-9]{1,})([hmsd])$/);if(!t)return;const a=parseInt(t[1],10),n=t[2],s=function(e){return void 0!==e}(n)?gl[n]:null;return a&&s?a*s:void 0},fl=e=>e<gl[bl.MINUTES]?e/gl[bl.SECONDS]+bl.SECONDS:e<gl[bl.HOURS]?e/gl[bl.MINUTES]+bl.MINUTES:e<gl[bl.DAYS]?e/gl[bl.HOURS]+bl.HOURS:e/gl[bl.DAYS]+bl.DAYS,vl={gotoPage:e=>{},getUrl:e=>"",isFullscreen:!1,setFullscreen:e=>{},autoplayInterval:0,setAutoplayInterval:e=>{},isAutoplayPaused:!0,setIsAutoplayPaused:e=>{},nextPage:()=>{},previousPage:()=>{},refreshInterval:0,setRefreshInterval:e=>{},undo:()=>{},redo:()=>{}},xl=Object(n.createContext)(vl),jl=({children:e})=>{const t=(()=>{const[e,t]=Object(n.useState)(!1),a=Object(M.useHistory)(),{search:s}=a.location,o=Object(M.useParams)(),r=Object(l.useSelector)($e.u),i=new URLSearchParams(s),c=parseInt(o.pageNumber,10),u=isNaN(c)?r.page+1:c,d=r.pages.length,p=Object(n.useCallback)((e=>`/workpad/${o.id}/page/${e}${a.location.search}`),[o.id,a.location.search]),b=Object(n.useCallback)((e=>{a.push(p(e))}),[p,a]),g=Object(n.useCallback)((()=>{let e=u+1;e>d&&(e=1),b(e)}),[u,d,b]),m=Object(n.useCallback)((()=>{let e=u-1;e<1&&(e=d),b(e)}),[u,d,b]),h="true"===i.get("__fullScreen"),f=i.get("__autoplayInterval"),v=f&&ml(f)&&hl(f)||0,x=i.get("__refreshInterval"),j=x&&ml(x)&&hl(x)||0,y=Object(n.useCallback)((e=>{const n=new URLSearchParams(a.location.search);e?n.set("__fullScreen","true"):(t(!1),n.delete("__fullScreen")),a.push(`${a.location.pathname}?${n.toString()}`)}),[a,t]),O=Object(n.useCallback)((e=>{const t=new URLSearchParams(a.location.search);e>0?t.set("__autoplayInterval",fl(e)):t.delete("__autoplayInterval"),a.push(`${a.location.pathname}?${t.toString()}`)}),[a]),w=Object(n.useCallback)((e=>{const t=new URLSearchParams(a.location.search);e>0?t.set("__refreshInterval",fl(e)):t.delete("__refreshInterval"),a.push(`${a.location.pathname}?${t.toString()}`)}),[a]),k=Object(n.useCallback)((()=>{a.goBack()}),[a]),_=Object(n.useCallback)((()=>{a.goForward()}),[a]),S=Object(n.useCallback)((()=>({gotoPage:b,getUrl:p,isFullscreen:h,setFullscreen:y,autoplayInterval:v,setAutoplayInterval:O,nextPage:g,previousPage:m,refreshInterval:j,setRefreshInterval:w,isAutoplayPaused:e,setIsAutoplayPaused:t,undo:k,redo:_})),[b,p,h,y,v,O,g,m,j,w,e,t,k,_]);return Object(n.useMemo)((()=>S()),[S])})();return Object(T.jsx)(xl.Provider,{value:t},e)};class fullscreen_control_FullscreenControl extends s.a.PureComponent{constructor(...e){super(...e),b()(this,"_toggleFullscreen",(()=>{const{setFullscreen:e,isFullscreen:t}=this.props;e(!t)})),b()(this,"toggleAutoplay",(()=>{this.props.toggleAutoplay()})),b()(this,"nextPage",(()=>{this.props.nextPage()})),b()(this,"previousPage",(()=>{this.props.previousPage()})),b()(this,"_keyMap",{REFRESH:this.props.fetchAllRenderables,PREV:this.previousPage,NEXT:this.nextPage,FULLSCREEN:this._toggleFullscreen,FULLSCREEN_EXIT:this._toggleFullscreen,PAGE_CYCLE_TOGGLE:this.toggleAutoplay}),b()(this,"_keyHandler",((e,t)=>{Object.keys(this._keyMap).indexOf(e)<0||Di(t.target)||"function"!=typeof this._keyMap[e]||(t.preventDefault(),this._keyMap[e]())}))}render(){const{children:e,isFullscreen:t}=this.props;return Object(T.jsx)("span",null,t&&Object(T.jsx)(f.Shortcuts,{name:"PRESENTATION",handler:this._keyHandler,targetNodeSelector:"body",global:!0,isolate:!0}),e({isFullscreen:t,toggleFullscreen:this._toggleFullscreen}))}}const yl=Object(dt.compose)(Object(dt.getContext)({router:m.a.object}),Object(l.connect)((e=>({workpadId:Object($e.u)(e).id,pages:Object($e.l)(e),selectedPageNumber:Object($e.s)(e)+1})),(e=>({fetchAllRenderables:()=>e(Object(Ye.e)())}))),Object(dt.withState)("transition","setTransition",null),Object(dt.withState)("prevSelectedPageNumber","setPrevSelectedPageNumber",0),Object(dt.withProps)((({selectedPageNumber:e,prevSelectedPageNumber:t,transition:a})=>({getAnimation:function(n){if(!a||!a.name)return null;if(![e,t].includes(n))return null;const{enter:s,exit:o}=nn.get(a.name);return{name:n===Math.max(e,t)?s:o,direction:t>e?"reverse":"normal"}}}))),Object(dt.withHandlers)({onTransitionEnd:({setTransition:e})=>()=>e(null)}))((e=>{const{isFullscreen:t,autoplayInterval:a,nextPage:s,previousPage:o,setFullscreen:r,setIsAutoplayPaused:i,isAutoplayPaused:c}=Object(n.useContext)(xl),u=a>0,d=Object(l.useDispatch)(),p=Object(n.useCallback)((e=>{e&&d(Object(pt.a)([])),r(e),!0===e&&Go(Wo.METRIC_TYPE.COUNT,u?[Je.v,Je.w]:Je.v)}),[d,r,u]),b=Object(n.useCallback)((()=>{i(!c)}),[i,c]);return Object(T.jsx)(fullscreen_control_FullscreenControl,A()({isFullscreen:t,nextPage:s,previousPage:o,autoplayEnabled:u,setFullscreen:p,toggleAutoplay:b},e))})),Ol=(e,t=[])=>(t.push(e),e.items&&e.items.forEach((e=>{const{panel:a}=e;a&&(Ol(a,t),e.panel=a.id)})),t);var wl=a(24),kl=a(227);const _l=({title:e,description:t,image:a,tags:n=[],onClick:s,...o})=>Object(T.jsx)(q.EuiCard,A()({className:a?"canvasElementCard":"canvasElementCard canvasElementCard--hasIcon",textAlign:"left",title:e,description:t,footer:Object(T.jsx)(kl.a,{tags:n,tagType:"badge"}),image:a,icon:a?void 0:Object(T.jsx)(q.EuiIcon,{type:"canvasApp",size:"xxl"}),onClick:s},o)),Sl=e=>i.i18n.translate("xpack.canvas.customElementModal.remainingCharactersDescription",{defaultMessage:"{numberOfRemainingCharacter} characters remaining",values:{numberOfRemainingCharacter:e}});class custom_element_modal_CustomElementModal extends n.PureComponent{constructor(...e){super(...e),b()(this,"state",{name:this.props.name||"",description:this.props.description||"",image:this.props.image||""}),b()(this,"_handleChange",((e,t)=>{this.setState({[e]:t})})),b()(this,"_handleUpload",(e=>{if(null==e)return;const t=e[0],[a,n]=Object(c.get)(t,"type","").split("/");"image"===a&&Je.B.indexOf(n)>=0&&Object(wl.encode)(t).then((e=>this._handleChange("image",e)))}))}render(){const{onSave:e,onCancel:t,title:a,...n}=this.props,{name:s,description:o,image:r}=this.state;return Object(T.jsx)(q.EuiModal,A()({},n,{className:"canvasCustomElementModal",maxWidth:700,onClose:t,initialFocus:".canvasCustomElementForm__name"}),Object(T.jsx)(q.EuiModalHeader,null,Object(T.jsx)(q.EuiModalHeaderTitle,{component:"h3"},a)),Object(T.jsx)(q.EuiModalBody,null,Object(T.jsx)(q.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexStart"},Object(T.jsx)(q.EuiFlexItem,{className:"canvasCustomElementForm",grow:2},Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.customElementModal.nameInputLabel",{defaultMessage:"Name"}),helpText:Sl(40-s.length),display:"rowCompressed"},Object(T.jsx)(q.EuiFieldText,{value:s,className:"canvasCustomElementForm__name",onChange:e=>e.target.value.length<=40&&this._handleChange("name",e.target.value),required:!0,"data-test-subj":"canvasCustomElementForm-name"})),Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.customElementModal.descriptionInputLabel",{defaultMessage:"Description"}),helpText:Sl(100-o.length)},Object(T.jsx)(q.EuiTextArea,{value:o,rows:2,onChange:e=>e.target.value.length<=100&&this._handleChange("description",e.target.value),"data-test-subj":"canvasCustomElementForm-description"})),Object(T.jsx)(q.EuiFormRow,{className:"canvasCustomElementForm__thumbnail",label:i.i18n.translate("xpack.canvas.customElementModal.imageInputLabel",{defaultMessage:"Thumbnail image"}),display:"rowCompressed"},Object(T.jsx)(q.EuiFilePicker,{initialPromptText:i.i18n.translate("xpack.canvas.customElementModal.imageFilePickerPlaceholder",{defaultMessage:"Select or drag and drop an image"}),onChange:this._handleUpload,className:"canvasImageUpload",accept:"image/*"})),Object(T.jsx)(q.EuiText,{className:"canvasCustomElementForm__thumbnailHelp",size:"xs"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.customElementModal.imageInputDescription",{defaultMessage:"Take a screenshot of your element and upload it here. This can also be done after saving."})))),Object(T.jsx)(q.EuiFlexItem,{className:"canvasElementCard__wrapper canvasCustomElementForm__preview",grow:1},Object(T.jsx)(q.EuiTitle,{size:"xxxs"},Object(T.jsx)("h4",null,i.i18n.translate("xpack.canvas.customElementModal.elementPreviewTitle",{defaultMessage:"Element preview"}))),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(_l,{title:s,description:o,image:r})))),Object(T.jsx)(q.EuiModalFooter,null,Object(T.jsx)(q.EuiFlexGroup,{justifyContent:"flexEnd"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButtonEmpty,{onClick:t},i.i18n.translate("xpack.canvas.customElementModal.cancelButtonLabel",{defaultMessage:"Cancel"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiButton,{fill:!0,onClick:()=>{e(s,o,r)},"data-test-subj":"canvasCustomElementForm-submit"},i.i18n.translate("xpack.canvas.customElementModal.saveButtonLabel",{defaultMessage:"Save"}))))))}}const El=v.a.getShortcutHelp(),Ml=()=>i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.alignmentMenuItemLabel",{defaultMessage:"Alignment",description:"This refers to the vertical (i.e. left, center, right) and horizontal (i.e. top, middle, bottom) alignment options of the selected elements"}),Cl=()=>i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.orderMenuItemLabel",{defaultMessage:"Order",description:"Refers to the order of the elements displayed on the page from front to back"}),Tl=({cutNodes:e,copyNodes:t,pasteNodes:a,deleteNodes:s,cloneNodes:o,bringToFront:r,bringForward:l,sendBackward:c,sendToBack:u,alignLeft:d,alignCenter:p,alignRight:b,alignTop:g,alignMiddle:m,alignBottom:h,distributeHorizontally:f,distributeVertically:v,createCustomElement:x,selectedNodes:j,groupIsSelected:y,groupNodes:O,ungroupNodes:w,undoHistory:k,redoHistory:_,hasPasteData:S})=>{const[E,M]=Object(n.useState)(!1),C=()=>M(!1),P=n=>{const x=y?{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.ungroupMenuItemLabel",{defaultMessage:"Ungroup",description:"This refers to ungrouping a grouped element"}),className:Je.n,icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{w(),n()}}:{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.groupMenuItemLabel",{defaultMessage:"Group",description:"This refers to grouping multiple selected elements."}),className:Je.n,icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),disabled:j.length<2,onClick:()=>{O(),n()}},E={name:Cl(),disabled:1!==j.length,icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),panel:{id:1,title:Cl(),items:[{name:El.BRING_TO_FRONT,icon:"sortUp",onClick:r},{name:El.BRING_FORWARD,icon:"arrowUp",onClick:l},{name:El.SEND_BACKWARD,icon:"arrowDown",onClick:c},{name:El.SEND_TO_BACK,icon:"sortDown",onClick:u}]}},C={name:Ml(),className:"canvasContextMenu",disabled:y||j.length<2,icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),panel:{id:2,title:Ml(),items:[{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.leftAlignMenuItemLabel",{defaultMessage:"Left"}),icon:"editorItemAlignLeft",onClick:()=>{d(),n()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.centerAlignMenuItemLabel",{defaultMessage:"Center",description:"This refers to alignment centered horizontally."}),icon:"editorItemAlignCenter",onClick:()=>{p(),n()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.rightAlignMenuItemLabel",{defaultMessage:"Right"}),icon:"editorItemAlignRight",onClick:()=>{b(),n()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.topAlignMenuItemLabel",{defaultMessage:"Top"}),icon:"editorItemAlignTop",onClick:()=>{g(),n()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.middleAlignMenuItemLabel",{defaultMessage:"Middle",description:"This refers to alignment centered vertically."}),icon:"editorItemAlignMiddle",onClick:()=>{m(),n()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.bottomAlignMenuItemLabel",{defaultMessage:"Bottom"}),icon:"editorItemAlignBottom",onClick:()=>{h(),n()}}]}},P={name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.distributionMenutItemLabel",{defaultMessage:"Distribution",description:"This refers to the options to evenly spacing the selected elements horizontall or vertically."}),className:"canvasContextMenu",disabled:y||j.length<3,icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),panel:{id:3,title:Ml(),items:[{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.horizontalDistributionMenutItemLabel",{defaultMessage:"Horizontal"}),icon:"editorDistributeHorizontal",onClick:()=>{f(),n()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.verticalDistributionMenutItemLabel",{defaultMessage:"Vertical"}),icon:"editorDistributeVertical",onClick:()=>{v(),n()}}]}},N={name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.savedElementMenuItemLabel",{defaultMessage:"Save as new element"}),icon:Object(T.jsx)(q.EuiIcon,{type:"indexOpen",size:"m"}),disabled:j.length<1,className:Je.n,"data-test-subj":"canvasWorkpadEditMenu__saveElementButton",onClick:()=>{M(!0),n()}};return{id:0,items:[{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.undoMenuItemLabel",{defaultMessage:"Undo"}),icon:Object(T.jsx)(q.EuiIcon,{type:"editorUndo",size:"m"}),onClick:()=>{k()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.redoMenuItemLabel",{defaultMessage:"Redo"}),icon:Object(T.jsx)(q.EuiIcon,{type:"editorRedo",size:"m"}),onClick:()=>{_()}},{name:El.CUT,icon:Object(T.jsx)(q.EuiIcon,{type:"cut",size:"m"}),className:Je.n,disabled:j.length<1,onClick:()=>{e(),n()}},{name:El.COPY,disabled:j.length<1,icon:Object(T.jsx)(q.EuiIcon,{type:"copy",size:"m"}),onClick:()=>{t()}},{name:El.PASTE,icon:Object(T.jsx)(q.EuiIcon,{type:"copyClipboard",size:"m"}),disabled:!S,onClick:()=>{a(),n()}},{name:El.DELETE,icon:Object(T.jsx)(q.EuiIcon,{type:"trash",size:"m"}),disabled:j.length<1,onClick:()=>{s(),n()},"data-test-subj":"canvasEditMenuDeleteButton"},{name:El.CLONE,icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),disabled:j.length<1,onClick:()=>{o(),n()}},x,E,C,P,N]}};return Object(T.jsx)(n.Fragment,null,Object(T.jsx)(cs.a,{button:e=>Object(T.jsx)(q.EuiButtonEmpty,{size:"s","aria-label":i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.editMenuLabel",{defaultMessage:"Edit options"}),onClick:e,"data-test-subj":"canvasWorkpadEditMenuButton"},i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.editMenuButtonLabel",{defaultMessage:"Edit"})),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(T.jsx)(q.EuiContextMenu,{initialPanelId:0,panels:Ol(P(e))}))),E?Object(T.jsx)(custom_element_modal_CustomElementModal,{title:i.i18n.translate("xpack.canvas.workpadHeaderEditMenu.createElementModalTitle",{defaultMessage:"Create new element"}),onSave:(e,t,a)=>{x(e,t,a),C()},onCancel:C}):null)},Pl=(e,t)=>(a,n)=>{const s=e(a,n);s.currentScene.gestureEnd&&t(s)},Nl=Object(dt.compose)(Object(l.connect)((e=>{const t=Object($e.r)(e),a=Object($e.j)(e,t),n=Object($e.t)(e),s=n.map((e=>a.find((t=>t.id===e)))).filter((e=>e)),o=Object(Ze.c)(s.map((e=>a.find((t=>t.id===e.id))?[e.id]:a.filter((t=>t.position.parent===e.id)).map((e=>e.id)))));return{pageId:t,selectedToplevelNodes:n,selectedNodes:Object(Ze.c)(o.map(Ga(a))).map((e=>a.find((t=>t.id===e)))).filter((e=>!!e)),state:e}}),(e=>({insertNodes:(t,a)=>e(Object(Ye.j)(t,a)),removeNodes:(t,a)=>e(Object(Ye.k)(t,a)),selectToplevelNodes:t=>e(Object(pt.a)(t.filter((e=>!e.position.parent)).map((e=>e.id)))),elementLayer:(t,a,n)=>{e(Object(Ye.d)({pageId:t,elementId:a,movement:n}))},dispatch:e})),(({state:e,selectedToplevelNodes:t,...a},{dispatch:n,...s},{commit:o})=>{const r=Va(n,e);return{...s,...a,commit:Pl(o,r),groupIsSelected:1===t.length&&t[0].includes("group")}})),Object(dt.withProps)((()=>({hasPasteData:Boolean(tt())}))),Object(dt.withHandlers)(ot),Object(dt.withHandlers)(lt),Object(dt.withHandlers)(ct),Object(dt.withHandlers)(it),Object(dt.withHandlers)(rt))((e=>{const{undo:t,redo:a}=Object(n.useContext)(xl);return Object(T.jsx)(Tl,A()({},e,{undoHistory:t,redoHistory:a}))})),Al=({type:e,label:t,iconType:a,size:s="m",children:o,isDisabled:r,...i})=>{const[l,c]=Object(n.useState)(!1),u=()=>c(!1),d=Object(T.jsx)(cl,{onClick:()=>c((e=>!e)),size:s,isDisabled:r,type:e,label:t,iconType:a||"arrowDown",iconSide:a?"left":"right"});return Object(T.jsx)(q.EuiPopover,A()({isOpen:l,button:d,closePopover:u},i),o({closePopover:u}))};var Il=a(28);class clipboard_Clipboard extends s.a.PureComponent{constructor(...e){super(...e),b()(this,"onClick",(e=>{const{content:t,onCopy:a}=this.props;e.preventDefault(),a(dn()(t.toString(),{debug:!0}))}))}render(){return Object(T.jsx)("div",{className:"canvasClipboard",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},this.props.children)}}const Fl=clipboard_Clipboard;var Ll=a(374),Dl=a(153),zl=a.n(Dl);class download_Download extends s.a.PureComponent{constructor(...e){super(...e),b()(this,"onClick",(()=>{const{fileName:e,content:t}=this.props,a=Object(wl.parseDataUrl)(t,!0);if(a&&a.data){const t=new Blob([Object(Ll.toByteArray)(a.data)],{type:a.mimetype}),n=a.extension?`.${a.extension}`:"";zl.a.saveAs(t,`canvas-${e}${n}`)}}))}render(){return Object(T.jsx)("div",{className:"canvasDownload",onClick:this.onClick,onKeyPress:this.onClick,tabIndex:0,role:"button"},this.props.children)}}const Rl=download_Download,Bl=()=>i.i18n.translate("xpack.canvas.asset.copyAssetTooltip",{defaultMessage:"Copy id to clipboard"}),Hl=()=>i.i18n.translate("xpack.canvas.asset.createImageTooltip",{defaultMessage:"Create image element"}),Wl=()=>i.i18n.translate("xpack.canvas.asset.deleteAssetTooltip",{defaultMessage:"Delete"}),Vl=()=>i.i18n.translate("xpack.canvas.asset.downloadAssetTooltip",{defaultMessage:"Download"}),Gl=Object(l.connect)((e=>({selectedPage:Object($e.r)(e)})),(e=>({onCreate:t=>a=>{const n=tl.get("image"),s=Object(tn.d)(n.expression),o=[{type:"expression",chain:[{type:"function",function:"asset",arguments:{_:[a]}}]}],r=Object(Il.set)(s,["chain","0","arguments","dataurl"],o);n.expression=Object(tn.h)(r),e(Object(Ye.b)(t,n))},onDelete:t=>e(Object(Js.a)(t.id))})),((e,t,a)=>{const{onCreate:n,onDelete:s}=t;return{...a,onCreate:n(e.selectedPage),onDelete:s}}))((({asset:e,onCreate:t,onDelete:a})=>{const{success:s}=Object(h.useNotifyService)(),[o,r]=Object(n.useState)(!1),l=Object(T.jsx)(So.a,{isOpen:o,title:i.i18n.translate("xpack.canvas.asset.confirmModalTitle",{defaultMessage:"Remove Asset"}),message:i.i18n.translate("xpack.canvas.asset.confirmModalDetail",{defaultMessage:"Are you sure you want to remove this asset?"}),confirmButtonText:i.i18n.translate("xpack.canvas.asset.confirmModalButtonLabel",{defaultMessage:"Remove"}),onConfirm:()=>{r(!1),a(e)},onCancel:()=>r(!1)}),c=Object(T.jsx)(q.EuiFlexItem,{className:"asset-create-image",grow:!1},Object(T.jsx)(q.EuiToolTip,{content:Hl()},Object(T.jsx)(q.EuiButtonIcon,{iconType:"vector","aria-label":Hl(),onClick:()=>t(e.id)}))),u=Object(T.jsx)(q.EuiFlexItem,{className:"asset-download",grow:!1},Object(T.jsx)(q.EuiToolTip,{content:Vl()},Object(T.jsx)(Rl,{fileName:e.id,content:e.value},Object(T.jsx)(q.EuiButtonIcon,{iconType:"sortDown","aria-label":Vl()})))),d=Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:Bl()},Object(T.jsx)(Fl,{content:e.id,onCopy:t=>t&&s(`Copied '${e.id}' to clipboard`)},Object(T.jsx)(q.EuiButtonIcon,{iconType:"copyClipboard","aria-label":Bl()})))),p=Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:Wl()},Object(T.jsx)(q.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":Wl(),onClick:()=>r(!0)}))),b=Object(T.jsx)("div",{className:"canvasAsset__thumb canvasCheckered"},Object(T.jsx)(q.EuiImage,{className:"canvasAsset__img",size:"original",url:e.value,fullScreenIconColor:"dark",alt:i.i18n.translate("xpack.canvas.asset.thumbnailAltText",{defaultMessage:"Asset thumbnail"})})),g=Object(T.jsx)(q.EuiText,{size:"xs",className:"eui-textBreakAll"},Object(T.jsx)("p",{className:"eui-textBreakAll"},Object(T.jsx)("strong",null,e.id),Object(T.jsx)("br",null),Object(T.jsx)(q.EuiTextColor,{color:"subdued"},Object(T.jsx)("small",null,"(",Math.round(e.value.length/1024)," kb)"))));return Object(T.jsx)(q.EuiFlexItem,{key:e.id},Object(T.jsx)(q.EuiPanel,{className:"canvasAsset",paddingSize:"s"},b,Object(T.jsx)(q.EuiSpacer,{size:"s"}),g,Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiFlexGroup,{alignItems:"baseline",justifyContent:"center",responsive:!1},c,u,d,p)),o?l:null)})),Ul=Object(l.connect)((e=>({assets:Object(bs.b)(e),workpad:Object($e.f)(e)})),(e=>({onAddAsset:(t,a,n)=>{const s=io(a,n),{notify:o,workpad:r}=h.pluginServices.getServices();return r.updateAssets(t.id,{...t.assets,[s.id]:s}).then((t=>(e(Object(Js.c)(s)),s.id))).catch((e=>lo(e,o.error)))}})),((e,t,a)=>{const{assets:n,workpad:s}=e,{onAddAsset:o}=t,r=Object.values(n).filter((e=>!!e));return{...a,assets:r,onAddAsset:async e=>{const[t,a]=Object(c.get)(e,"type","").split("/");if("image"===t&&Je.B.indexOf(a)>=0)return await Object(wl.encode)(e).then((e=>{const t="dataurl";return Qs(t,e,r)||o(s,t,e)}))}}}))((e=>{const{assets:t,onClose:a,onAddAsset:s}=e,[o,r]=Object(n.useState)(!1),l=Math.round(t.reduce(((e,{value:t})=>e+t.length),0)/1024),c=Math.round(l/Je.j*100),u=Object(T.jsx)(q.EuiPanel,{className:"canvasAssetManager__emptyPanel"},Object(T.jsx)(q.EuiEmptyPrompt,{iconType:"importAction",title:Object(T.jsx)("h2",null,i.i18n.translate("xpack.canvas.assetModal.emptyAssetsDescription",{defaultMessage:"Import your assets to get started"})),titleSize:"xs"}));return Object(T.jsx)(q.EuiModal,{onClose:()=>a(),className:"canvasAssetManager canvasModal--fixedSize",maxWidth:"1000px"},Object(T.jsx)(q.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},Object(T.jsx)(q.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},i.i18n.translate("xpack.canvas.assetModal.modalTitle",{defaultMessage:"Manage workpad assets"})),Object(T.jsx)(q.EuiFlexGroup,{className:"canvasAssetManager__fileUploadWrapper"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},o?Object(T.jsx)(Ss.a,{animated:!0,text:i.i18n.translate("xpack.canvas.assetModal.loadingText",{defaultMessage:"Uploading images"})}):Object(T.jsx)(q.EuiFilePicker,{initialPromptText:i.i18n.translate("xpack.canvas.assetModal.filePickerPromptText",{defaultMessage:"Select or drag and drop images"}),compressed:!0,display:"default",multiple:!0,onChange:e=>{null!==e&&(r(!0),Promise.all(Array.from(e).map((e=>s(e)))).finally((()=>{r(!1)})))},accept:"image/*"})))),Object(T.jsx)(q.EuiModalBody,null,Object(T.jsx)(q.EuiText,{size:"s",color:"subdued"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.assetModal.modalDescription",{defaultMessage:"Below are the image assets in this workpad. Any assets that are currently in use cannot be determined at this time. To reclaim space, delete assets."}))),Object(T.jsx)(q.EuiSpacer,null),t.length?Object(T.jsx)(q.EuiFlexGrid,{columns:4},t.map((e=>Object(T.jsx)(Gl,{asset:e,key:e.id})))):u),Object(T.jsx)(q.EuiModalFooter,{className:"canvasAssetManager__modalFooter"},Object(T.jsx)(q.EuiFlexGroup,{className:"canvasAssetManager__meterWrapper",responsive:!1},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiProgress,{value:l,max:Je.j,color:c<90?"success":"danger",size:"s","aria-labelledby":"CanvasAssetManagerLabel"})),Object(T.jsx)(q.EuiFlexItem,{grow:!1,className:"eui-textNoWrap"},Object(T.jsx)(q.EuiText,{id:"CanvasAssetManagerLabel"},(e=>i.i18n.translate("xpack.canvas.assetModal.spacedUsedText",{defaultMessage:"{percentageUsed}% space used",values:{percentageUsed:e}}))(c)))),Object(T.jsx)(q.EuiButton,{size:"s",onClick:()=>a()},i.i18n.translate("xpack.canvas.assetModal.modalCloseButtonLabel",{defaultMessage:"Close"}))))}));var $l=a(212);const ql=({onDelete:e,onEdit:t})=>Object(T.jsx)(q.EuiFlexGroup,{className:"canvasElementCard__controls",gutterSize:"xs",justifyContent:"spaceBetween"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:i.i18n.translate("xpack.canvas.elementControls.editToolTip",{defaultMessage:"Edit"})},Object(T.jsx)(q.EuiButtonIcon,{iconType:"pencil","aria-label":i.i18n.translate("xpack.canvas.elementControls.editAriaLabel",{defaultMessage:"Edit element"}),onClick:t,"data-test-subj":"canvasElementCard__editButton"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{content:i.i18n.translate("xpack.canvas.elementControls.deleteToolTip",{defaultMessage:"Delete"})},Object(T.jsx)(q.EuiButtonIcon,{color:"danger",iconType:"trash","aria-label":i.i18n.translate("xpack.canvas.elementControls.deleteAriaLabel",{defaultMessage:"Delete element"}),onClick:e,"data-test-subj":"canvasElementCard__deleteButton"})))),Kl=({elements:e,filterText:t,onClick:a,onEdit:n,onDelete:s})=>(t=t.toLowerCase(),Object(T.jsx)(q.EuiFlexGrid,{gutterSize:"l",columns:4},Object(c.map)(e,((e,o)=>{const{name:r,displayName:i="",help:l="",image:c}=e;return!t.length||r.toLowerCase().includes(t)||i.toLowerCase().includes(t)||l.toLowerCase().includes(t)?Object(T.jsx)(q.EuiFlexItem,{key:o,className:"canvasElementCard__wrapper"},Object(T.jsx)(_l,{title:i||r,description:l,image:c,onClick:()=>a(e)}),Object(T.jsx)(ql,{onEdit:()=>n(e),onDelete:()=>s(e)})):null}))));Kl.defaultProps={filterText:""};const Xl=({customElements:e,onAddCustomElement:t,onClose:a,onRemoveCustomElement:s,onUpdateCustomElement:o,onSearch:r,initialSearch:l=""})=>{const u=Object(n.useRef)(!1),[d,p]=Object(n.useState)(null),[b,g]=Object(n.useState)(null),[m,h]=Object(n.useState)(l);Object(n.useEffect)((()=>{u.current||(u.current=!0,r(""))}),[r,u]);const f=()=>g(null),v=()=>p(null);let x=Object(T.jsx)(q.EuiEmptyPrompt,{iconType:"vector",title:Object(T.jsx)("h2",null,i.i18n.translate("xpack.canvas.savedElementsModal.addNewElementTitle",{defaultMessage:"Add new elements"})),body:Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.savedElementsModal.addNewElementDescription",{defaultMessage:"Group and save workpad elements to create new elements"})),titleSize:"s"});var j,y;return e.length&&(x=Object(T.jsx)(Kl,{elements:(j=e,Object(c.sortBy)(j,"displayName")),filterText:m,onClick:t,onEdit:e=>g(e),onDelete:e=>p(e)})),Object(T.jsx)(n.Fragment,null,Object(T.jsx)(q.EuiModal,{onClose:a,className:"canvasModal--fixedSize",maxWidth:"1000px",initialFocus:".canvasElements__filter input"},Object(T.jsx)(q.EuiModalHeader,{className:"canvasAssetManager__modalHeader"},Object(T.jsx)(q.EuiModalHeaderTitle,{className:"canvasAssetManager__modalHeaderTitle"},i.i18n.translate("xpack.canvas.savedElementsModal.modalTitle",{defaultMessage:"My elements"}))),Object(T.jsx)(q.EuiModalBody,{style:{paddingRight:"1px"}},Object(T.jsx)(q.EuiFieldSearch,{fullWidth:!0,value:m,placeholder:i.i18n.translate("xpack.canvas.savedElementsModal.findElementPlaceholder",{defaultMessage:"Find element"}),onChange:e=>h(e.target.value)}),Object(T.jsx)(q.EuiSpacer,null),x),Object(T.jsx)(q.EuiModalFooter,null,Object(T.jsx)(q.EuiButton,{size:"s",onClick:a,"data-test-subj":"saved-elements-modal-close-button"},i.i18n.translate("xpack.canvas.workpadHeader.addElementModalCloseButtonLabel",{defaultMessage:"Close"})))),d?Object(T.jsx)($l.a,{isOpen:!0,title:(y=d.displayName,i.i18n.translate("xpack.canvas.savedElementsModal.deleteElementTitle",{defaultMessage:"Delete element ''{elementName}''?",values:{elementName:y}})),message:i.i18n.translate("xpack.canvas.savedElementsModal.deleteElementDescription",{defaultMessage:"Are you sure you want to delete this element?"}),confirmButtonText:i.i18n.translate("xpack.canvas.savedElementsModal.deleteButtonLabel",{defaultMessage:"Delete"}),cancelButtonText:i.i18n.translate("xpack.canvas.savedElementsModal.cancelButtonLabel",{defaultMessage:"Cancel"}),onConfirm:async()=>{d&&s(d.id),v()},onCancel:v}):null,b?Object(T.jsx)(custom_element_modal_CustomElementModal,{title:i.i18n.translate("xpack.canvas.savedElementsModal.editElementTitle",{defaultMessage:"Edit element"}),name:b.displayName,description:b.help,image:b.image,onSave:async(e,t,a)=>{b&&o(b.id,e,t,a),f()},onCancel:f}):null)},Yl=({onClose:e})=>{const t=Object(h.useNotifyService)(),a=Object(h.useCustomElementService)(),s=Object(l.useDispatch)(),o=Object(l.useSelector)($e.r),[r,i]=Object(n.useState)([]),u=async(e="")=>{try{const{customElements:t}=await a.find(e);i(t)}catch(e){t.error(e,{title:"Couldn't find custom elements"})}};return Object(T.jsx)(Xl,{onAddCustomElement:t=>{const{selectedNodes:a=[]}=JSON.parse(t.content)||{},n=a&&Object(at.a)(a);n&&(s(Object(Ye.j)(n,o)),s(Object(pt.a)(n.filter((e=>!e.position.parent)).map((e=>e.id))))),e(),Go(Wo.METRIC_TYPE.LOADED,"elements-custom-added")},onClose:e,onRemoveCustomElement:async e=>{try{await a.remove(e),await u()}catch(e){t.error(e,{title:"Couldn't delete custom elements"})}},onSearch:u,onUpdateCustomElement:async(e,n,s,o)=>{try{await a.update(e,{name:Object(c.camelCase)(n),displayName:n,image:o,help:s}),await u()}catch(e){t.error(e,{title:"Couldn't update custom elements"})}},customElements:r})},Zl={chart:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.chartMenuItemLabel",{defaultMessage:"Chart"}),icon:"visArea"},filter:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.filterMenuItemLabel",{defaultMessage:"Filter"}),icon:"filter"},image:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.imageMenuItemLabel",{defaultMessage:"Image"}),icon:"image"},other:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.otherMenuItemLabel",{defaultMessage:"Other"}),icon:"empty"},progress:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.progressMenuItemLabel",{defaultMessage:"Progress"}),icon:"visGoal"},shape:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.shapeMenuItemLabel",{defaultMessage:"Shape"}),icon:"node"},text:{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.textMenuItemLabel",{defaultMessage:"Text"}),icon:"visText"}},Jl=e=>e&&e.type&&Object.keys(Zl).includes(e.type)?e.type:"other",Ql=({elements:e,addElement:t})=>{const[a,o]=Object(n.useState)(!1),[r,l]=Object(n.useState)(!1),{chart:u,filter:d,image:p,other:b,progress:g,shape:m,text:h}=(e=>{e=Object(c.sortBy)(e,"displayName");const t={other:[]};return e.forEach((e=>{const a=Jl(e);t[a]?t[a].push(e):t[a]=[e]})),t})(Object.values(e)),f=e=>{const a=a=>({name:a.displayName||a.name,icon:a.icon,onClick:()=>{t(a),e()},"data-test-subj":`canvasAddElementMenu__${a.name}`}),n=e=>{const t=Jl(e[0]),{name:n,icon:s}=Zl[t]||Zl.other;return e.length>1?{name:n,icon:Object(T.jsx)(q.EuiIcon,{type:s,size:"m"}),panel:{id:Object(nt.a)("element-type"),title:n,items:e.map(a)},"data-test-subj":`canvasAddElementMenu__${n}`}:a(e[0])};return{id:0,items:[n(h),n(m),n(u),n(p),n(d),n(g),n(b),{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.myElementsMenuItemLabel",{defaultMessage:"My elements"}),className:Mn.CONTEXT_MENU_TOP_BORDER_CLASSNAME,"data-test-subj":"saved-elements-menu-option",icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{l(!0),e()}},{name:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.manageAssetsMenuItemLabel",{defaultMessage:"Manage assets"}),icon:Object(T.jsx)(q.EuiIcon,{type:"empty",size:"m"}),onClick:()=>{o(!0),e()}}]}};return Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(Al,{type:"primary",panelPaddingSize:"none",label:i.i18n.translate("xpack.canvas.workpadHeaderElementMenu.elementMenuButtonLabel",{defaultMessage:"Add element"}),iconType:"plusInCircle","data-test-subj":"add-element-button"},(({closePopover:e})=>Object(T.jsx)(q.EuiContextMenu,{initialPanelId:0,panels:Ol(f(e))}))),a?Object(T.jsx)(Ul,{onClose:()=>o(!1)}):null,r?Object(T.jsx)(Yl,{onClose:()=>l(!1)}):null)};var ec=a(65);const tc=({onDownload:e})=>Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.workpadStep.description",{defaultMessage:"The workpad will be exported as a single {JSON} file for sharing in another site.",values:{JSON:ec.r}})),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiButton,{onClick:()=>{e("share")},size:"s"},i.i18n.translate("xpack.canvas.shareWebsiteFlyout.workpadStep.downloadLabel",{defaultMessage:"Download workpad"}))),ac=({onDownload:e})=>Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.runtimeStep.description",{defaultMessage:"In order to render a Shareable Workpad, you also need to include the {CANVAS} Shareable Workpad Runtime. You can skip this step if the runtime is already included on your website.",values:{CANVAS:ec.c}})),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiButton,{onClick:()=>{e("shareRuntime")},size:"s"},i.i18n.translate("xpack.canvas.shareWebsiteFlyout.runtimeStep.downloadLabel",{defaultMessage:"Download runtime"}))),nc=()=>i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.requiredLabel",{defaultMessage:"required"}),sc=`\x3c!-- ${i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.includeRuntimeLabel",{defaultMessage:"Include Runtime"})} --\x3e\n<script src="kbn_canvas.js"><\/script>\n\n\x3c!-- ${i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.placeholderLabel",{defaultMessage:"Placeholder"})} --\x3e\n<div kbn-canvas-shareable="canvas" kbn-canvas-url="workpad.json" />\n\n\x3c!-- ${i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.callRuntimeLabel",{defaultMessage:"Call Runtime"})} --\x3e\n<script type="text/javascript">\n  KbnCanvas.share();\n<\/script>`,oc=({onCopy:e})=>Object(T.jsx)("div",null,Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.description",{defaultMessage:"The Workpad is placed within the {HTML} of the site by using an {HTML} placeholder. Parameters for the runtime are included inline. See the full list of parameters below. You can include more than one workpad on the page.",values:{HTML:sc}}))),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(Fl,{content:sc,onCopy:e},Object(T.jsx)(q.EuiCodeBlock,{className:"canvasShareMenu__reportingConfig",paddingSize:"s",fontSize:"s",language:"html"},sc)),Object(T.jsx)(q.EuiSpacer,null),Object(T.jsx)(q.EuiText,null,Object(T.jsx)("h4",null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.parametersLabel",{defaultMessage:"Parameters"})),Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.parametersDescription",{defaultMessage:"There are a number of inline parameters to configure the Shareable Workpad."}))),Object(T.jsx)(q.EuiHorizontalRule,null),Object(T.jsx)(q.EuiDescriptionList,null,Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,'kbn-canvas-shareable="canvas"')," (",nc(),")"),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.shareableParameterDescription",{defaultMessage:"The type of shareable. In this case, a {CANVAS} Workpad.",values:{CANVAS:ec.c}})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-url")," (",nc(),")"),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.urlParameterDescription",{defaultMessage:"The {URL} of the Shareable Workpad {JSON} file.",values:{URL:ec.K,JSON:ec.r}})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-height")),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.heightParameterDescription",{defaultMessage:"The height of the Workpad. Defaults to the Workpad height."})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-width")),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.widthParameterDescription",{defaultMessage:"The width of the Workpad. Defaults to the Workpad width."})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-page")),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.pageParameterDescription",{defaultMessage:"The page to display. Defaults to the page specified by the Workpad."})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-autoplay")),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.autoplayParameterDescription",{defaultMessage:"Should the runtime automatically move through the pages of the workpad?"})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-interval")),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.intervalParameterDescription",{defaultMessage:"The interval upon which the pages will advance in time format, (e.g. {twoSeconds}, {oneMinute})",values:{twoSeconds:"2s",oneMinute:"1m"}})),Object(T.jsx)(q.EuiDescriptionListTitle,null,Object(T.jsx)(q.EuiCode,null,"kbn-canvas-toolbar")),Object(T.jsx)(q.EuiDescriptionListDescription,null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.toolbarParameterDescription",{defaultMessage:"Should the toolbar be hidden?"})))),rc=(e,t)=>[{title:i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.downloadWorkpadTitle",{defaultMessage:"Download workpad"}),children:Object(T.jsx)(tc,{onDownload:e})},{title:i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.downloadRuntimeTitle",{defaultMessage:"Download runtime"}),children:Object(T.jsx)(ac,{onDownload:e})},{title:i.i18n.translate("xpack.canvas.shareWebsiteFlyout.snippetsStep.addSnippetsTitle",{defaultMessage:"Add snippets to website"}),children:Object(T.jsx)(oc,{onCopy:t})}],ic=({onClose:e,unsupportedRenderers:t,renderedWorkpad:a})=>{const s=Object(h.useNotifyService)(),o=Object(n.useCallback)((()=>s.info(i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.copyShareConfigMessage",{defaultMessage:"Copied share markup to clipboard"}))),[s]),r=Object(Qi.a)(),l=(()=>{const e=Object(h.usePlatformService)(),t=Object(h.useNotifyService)();return Object(n.useCallback)((()=>{try{const t=`${e.getBasePath()}${Je.c}`;return void window.open(t)}catch(e){t.error(e,{title:i.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadRuntimeFailureErrorMessage",{defaultMessage:"Couldn't download Shareable Runtime"})})}}),[e,t])})(),c=(()=>{const e=Object(h.useWorkpadService)(),t=Object(h.useNotifyService)();return Object(n.useCallback)((a=>{(async()=>{try{let s;try{s=await e.getRuntimeZip(a)}catch(e){t.error(e,{title:(n=a.name,i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWebsiteErrorTitle",{defaultMessage:"Failed to create {ZIP} file for ''{workpadName}''. The workpad may be too large. You'll need to download the files separately.",values:{ZIP:ec.L,workpadName:n}}))})}s&&zl.a.saveAs(s,"canvas-workpad-embed.zip")}catch(e){t.error(e,{title:i.i18n.translate("xpack.canvas.error.downloadWorkpad.downloadZippedRuntimeFailureErrorMessage",{defaultMessage:"Couldn't download ZIP file"})})}var n})()}),[t,e])})(),u=Object(n.useCallback)((e=>{switch(e){case"share":return void r(a);case"shareRuntime":return void l();case"shareZip":return void c(a);default:throw new Error((e=>i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unknownExportErrorMessage",{defaultMessage:"Unknown export type: {type}",values:{type:e}}))(e))}}),[r,l,c,a]),d=Object(T.jsx)(q.EuiLink,{style:{textDecoration:"underline"},onClick:()=>{u("shareZip")}},Object(T.jsx)(Y.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.zipDownloadLinkLabel",defaultMessage:"download an example {ZIP} file",values:{ZIP:ec.L}})),p=Object(T.jsx)("div",null,Object(T.jsx)(Y.FormattedMessage,{id:"xpack.canvas.shareWebsiteFlyout.flyoutCalloutDescription",defaultMessage:"To try sharing, you can {link} containing this workpad, the {CANVAS} Shareable Workpad runtime, and a sample {HTML} file.",values:{CANVAS:ec.c,HTML:ec.n,link:d}}));let b=null;if(t&&t.length>0){const e=[Object(T.jsx)(q.EuiText,{size:"s",key:"text"},Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unsupportedRendererWarning",{defaultMessage:"This workpad contains render functions that are not supported by the {CANVAS} Shareable Workpad Runtime. These elements will not be rendered:",values:{CANVAS:ec.c}})),t.map(((e,a)=>[Object(T.jsx)(q.EuiCode,{key:`item-${a}`},e),a<t.length-1?", ":""]))),Object(T.jsx)(q.EuiSpacer,{size:"xs",key:"spacer"})];b=[Object(T.jsx)(q.EuiCallOut,{title:e,color:"warning",size:"s",iconType:"warning",key:"callout"}),Object(T.jsx)(q.EuiSpacer,{key:"spacer"})]}return Object(T.jsx)(q.EuiFlyout,{onClose:()=>e("share"),maxWidth:!0},Object(T.jsx)(q.EuiFlyoutHeader,{hasBorder:!0},Object(T.jsx)(q.EuiTitle,{size:"m"},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center"},Object(T.jsx)("h2",{id:"flyoutTitle"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},i.i18n.translate("xpack.canvas.shareWebsiteFlyout.flyoutTitle",{defaultMessage:"Share on a website"}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiBetaBadge,{label:"Beta",color:"accent"}))))),Object(T.jsx)(q.EuiFlyoutBody,null,Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.shareWebsiteFlyout.description",{defaultMessage:"Follow these steps to share a static version of this workpad on an external website. It will be a visual snapshot of the current workpad, and will not have access to live data."}))),Object(T.jsx)(q.EuiSpacer,null),Object(T.jsx)(q.EuiCallOut,{size:"s",title:p,iconType:"iInCircle"}),Object(T.jsx)(q.EuiSpacer,null),b,Object(T.jsx)(q.EuiSteps,{steps:rc(u,o)})))};var lc=a(40),cc=a(42),uc=a(43),dc=a(33),pc=a(41),bc=a(191),gc=a(192),mc=a(188),hc=a(187);const fc=[a(186).a,bc.a,gc.a,Vs.getErrorRenderer,Vs.getDebugRenderer,lc.getImageRenderer,dc.getShapeRenderer,dc.getProgressRenderer,cc.getRevealImageRenderer,uc.getRepeatImageRenderer,pc.getMetricRenderer],vc=[...[hc.a,mc.a,...fc.map((e=>e()))].map((e=>e().name))],xc=e=>{const t=[];return Object($e.n)(e).forEach((e=>{vc.includes(e)||t.push(e)})),t},jc=({onClose:e})=>{const{renderedWorkpad:t,unsupportedRenderers:a}=Object(l.useSelector)((e=>({renderedWorkpad:Object($e.m)(e),unsupportedRenderers:xc(e),workpad:Object($e.u)(e)})));return Object(T.jsx)(ic,{onClose:e,unsupportedRenderers:a,renderedWorkpad:t})},yc=()=>i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareDownloadPDFTitle",{defaultMessage:"{PDF} reports",values:{PDF:ec.y}}),Oc=({ReportingComponent:e,onExport:t})=>{const[a,s]=Object(n.useState)(!1),o=a=>({id:0,items:[{name:i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareDownloadJSONTitle",{defaultMessage:"Download as {JSON}",values:{JSON:ec.r}}),icon:Object(T.jsx)(q.EuiIcon,{type:"exportAction",size:"m"}),onClick:()=>{t("json"),a()}},null!==e&&{name:yc(),icon:"document",panel:{id:1,title:yc(),content:Object(T.jsx)(e,{onClose:a})},"data-test-subj":"sharePanel-PDFReports"},{name:i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWebsiteTitle",{defaultMessage:"Share on a website"}),icon:Object(T.jsx)(q.EuiIcon,{type:"globe",size:"m"}),onClick:()=>{s(!0),a()}}].filter(Boolean)}),r=a?Object(T.jsx)(jc,{onClose:()=>{s(!1)}}):null;return Object(T.jsx)("div",null,Object(T.jsx)(cs.a,{button:e=>Object(T.jsx)(q.EuiButtonEmpty,{size:"s","aria-label":i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareWorkpadMessage",{defaultMessage:"Share this workpad"}),onClick:e,"data-test-subj":"shareTopNavButton"},i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.shareMenuButtonLabel",{defaultMessage:"Share"})),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(T.jsx)(q.EuiContextMenu,{initialPanelId:0,panels:Ol(o(e))}))),r)};var wc=a(5);const kc=()=>{const e=Object(Qi.b)(),t=Object(h.useReportingService)(),a=Object(h.usePlatformService)(),{workpad:s,pageCount:o}=Object(l.useSelector)((e=>({workpad:Object($e.u)(e),pageCount:Object($e.l)(e).length}))),r=t.getReportingPanelPDFComponent(),c={workpad:s,pageCount:o},u=null!==r?({onClose:e})=>Object(T.jsx)(r,{getJobParams:()=>function({workpad:{id:e,name:t,width:a,height:n},pageCount:s},o){const r=[];for(let t=1;t<=s;t++)r.push({id:wc.a,version:o,params:{view:"workpadPDF",id:e,page:t}});return{layout:{dimensions:{width:a,height:n},id:"canvas"},objectType:"canvas workpad",locatorParams:r,title:t}}(c,a.getKibanaVersion()),layoutOption:"canvas",onClose:e,objectId:s.id}):null,d=Object(n.useCallback)((t=>{switch(t){case"pdf":break;case"json":return void e(s.id);default:throw new Error((e=>i.i18n.translate("xpack.canvas.workpadHeaderShareMenu.unknownExportErrorMessage",{defaultMessage:"Unknown export type: {type}",values:{type:e}}))(t))}}),[e,s]);return Object(T.jsx)(Oc,{ReportingComponent:u,onExport:d})},_c=(e,t)=>{const a=e/1e3,n=a/60,s=n/60,o=s/24;return"days"===t||o>=1?{length:o,format:"days"}:"hours"===t||s>=1?{length:s,format:"hours"}:"minutes"===t||n>=1?{length:a/60,format:"minutes"}:{length:a,format:"seconds"}},Sc=({gutterSize:e,buttonSize:t,onSubmit:a,defaultValue:s})=>{const[o,r]=Object(n.useState)(s),l=hl(o),c=Boolean(o.length&&!l);return Object(T.jsx)("form",{onSubmit:e=>{e.preventDefault(),!c&&l&&a(l)}},Object(T.jsx)(q.EuiFlexGroup,{gutterSize:e},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiFormRow,{label:i.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.formLabel",{defaultMessage:"Set a custom interval"}),helpText:i.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.formDescription",{defaultMessage:"Use shorthand notation, like {secondsExample}, {minutesExample}, or {hoursExample}",values:{secondsExample:"30s",minutesExample:"10m",hoursExample:"1h"}}),display:"rowCompressed"},Object(T.jsx)(q.EuiFieldText,{isInvalid:c,value:o,onChange:e=>r(e.target.value),compressed:!0}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFormRow,{hasEmptyLabelSpace:!0,display:"rowCompressed"},Object(T.jsx)(q.EuiButton,{disabled:c,size:t,type:"submit",minWidth:"auto"},i.i18n.translate("xpack.canvas.workpadHeaderCustomInterval.confirmButtonLabel",{defaultMessage:"Set"}))))))};Sc.defaultProps={buttonSize:"s",gutterSize:"s",defaultValue:""};const{time:Ec}=qe.q,{getSecondsText:Mc,getMinutesText:Cc,getHoursText:Tc}=Ec,Pc=()=>i.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.disableTooltip",{defaultMessage:"Disable auto-refresh"}),Nc=({children:e,...t})=>Object(T.jsx)("ul",A()({style:{listStyle:"none",margin:0}},t),[e]),Ac=Object(q.htmlIdGenerator)(),Ic=({refreshInterval:e,setRefresh:t,disableInterval:a})=>{const n=({duration:e,label:a,descriptionId:n})=>Object(T.jsx)("li",null,Object(T.jsx)(q.EuiLink,{onClick:()=>t(e),"aria-describedby":n},a)),o=_c(e),r=Ac();return Object(T.jsx)(q.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiDescriptionList,{textStyle:"reverse"},Object(T.jsx)(q.EuiDescriptionListTitle,null,i.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.refreshListTitle",{defaultMessage:"Refresh elements"})),Object(T.jsx)(q.EuiDescriptionListDescription,null,e>0?Object(T.jsx)(s.a.Fragment,null,Ec.getCycleTimeText(o.length,o.format)):Object(T.jsx)(s.a.Fragment,null,i.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.refreshListDurationManualText",{defaultMessage:"Manually"}))))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e>0?Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Pc()},Object(T.jsx)(q.EuiButtonIcon,{iconType:"cross",onClick:a,"aria-label":Pc()}))):null))),Object(T.jsx)(q.EuiHorizontalRule,{margin:"m"}),Object(T.jsx)(q.EuiTitle,{size:"xxxs",id:r},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.workpadHeaderAutoRefreshControls.intervalFormLabel",{defaultMessage:"Change auto-refresh interval"}))),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)(Nc,{"aria-labelledby":r,className:"canvasControlSettings__list"},Object(T.jsx)(n,{duration:3e4,label:Mc(30),descriptionId:r}),Object(T.jsx)(n,{duration:6e4,label:Cc(1),descriptionId:r}),Object(T.jsx)(n,{duration:3e5,label:Cc(5),descriptionId:r}),Object(T.jsx)(n,{duration:18e5,label:Cc(30),descriptionId:r}),Object(T.jsx)(n,{duration:36e5,label:Tc(1),descriptionId:r}),Object(T.jsx)(n,{duration:432e5,label:Tc(12),descriptionId:r}),Object(T.jsx)(n,{duration:864e5,label:Tc(24),descriptionId:r})))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Sc,{onSubmit:e=>t(e)})))},{time:Fc}=qe.q,{getSecondsText:Lc,getMinutesText:Dc}=Fc,zc=()=>i.i18n.translate("xpack.canvas.workpadHeaderKioskControl.disableTooltip",{defaultMessage:"Disable auto-play"}),Rc=({children:e,...t})=>Object(T.jsx)("ul",A()({style:{listStyle:"none",margin:0}},t),[e]),Bc=Object(q.htmlIdGenerator)(),Hc=({autoplayInterval:e,onSetInterval:t})=>{const a=Object(n.useCallback)((()=>{t(0)}),[t]),o=({duration:e,label:a,descriptionId:n})=>Object(T.jsx)("li",null,Object(T.jsx)(q.EuiLink,{onClick:()=>t(e),"aria-describedby":n},a)),r=_c(e),l=Bc();return Object(T.jsx)(q.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",className:"canvasViewMenu__kioskSettings"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"xs"},Object(T.jsx)(q.EuiFlexItem,null,Object(T.jsx)(q.EuiDescriptionList,{textStyle:"reverse"},Object(T.jsx)(q.EuiDescriptionListTitle,null,i.i18n.translate("xpack.canvas.workpadHeaderKioskControl.controlTitle",{defaultMessage:"Cycle fullscreen pages"})),Object(T.jsx)(q.EuiDescriptionListDescription,null,e>0?Object(T.jsx)(s.a.Fragment,null,Fc.getCycleTimeText(r.length,r.format)):Object(T.jsx)(s.a.Fragment,null,i.i18n.translate("xpack.canvas.workpadHeaderKioskControl.autoplayListDurationManual",{defaultMessage:"Manually"}))))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e>0?Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:zc()},Object(T.jsx)(q.EuiButtonIcon,{iconType:"cross",onClick:a,"aria-label":zc()}))):null))),Object(T.jsx)(q.EuiHorizontalRule,{margin:"m"}),Object(T.jsx)(q.EuiTitle,{size:"xxxs",id:l},Object(T.jsx)("p",null,i.i18n.translate("xpack.canvas.workpadHeaderKioskControl.cycleFormLabel",{defaultMessage:"Change cycling interval"}))),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiText,{size:"s"},Object(T.jsx)(Rc,{"aria-labelledby":l,className:"canvasControlSettings__list"},Object(T.jsx)(o,{duration:5e3,label:Lc(5),descriptionId:l}),Object(T.jsx)(o,{duration:1e4,label:Lc(10),descriptionId:l}),Object(T.jsx)(o,{duration:3e4,label:Lc(30),descriptionId:l}),Object(T.jsx)(o,{duration:6e4,label:Dc(1),descriptionId:l}),Object(T.jsx)(o,{duration:3e5,label:Dc(5),descriptionId:l}),Object(T.jsx)(o,{duration:9e5,label:Dc(15),descriptionId:l})))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Sc,{onSubmit:e=>t(e)})))},Wc=()=>i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.autoplaySettingsMenuItemLabel",{defaultMessage:"Autoplay settings"}),Vc=()=>i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.refreshSettingsMenuItemLabel",{defaultMessage:"Auto refresh settings"}),Gc=()=>i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomMenuItemLabel",{defaultMessage:"Zoom"}),Uc=e=>i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomResetText",{defaultMessage:"{scalePercentage}%",values:{scalePercentage:100*e}}),$c=[.5,1,2],qc=({enterFullscreen:e,fitToWindow:t,isWriteable:a,resetZoom:n,setZoomScale:s,toggleWriteable:o,zoomIn:r,zoomOut:l,zoomScale:c,doRefresh:u,refreshInterval:d,setRefreshInterval:p,autoplayEnabled:b,autoplayInterval:g,setAutoplayInterval:m})=>{const h=e=>p(e),f=p=>({id:0,items:[{name:i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.refreshMenuItemLabel",{defaultMessage:"Refresh data"}),icon:"refresh",onClick:()=>{u()}},{name:Vc(),icon:"empty",panel:{id:1,title:Vc(),content:Object(T.jsx)(Ic,{refreshInterval:d,setRefresh:e=>h(e),disableInterval:()=>{h(0)}})}},{name:i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.fullscreenMenuLabel",{defaultMessage:"Enter fullscreen mode"}),icon:Object(T.jsx)(q.EuiIcon,{type:"fullScreen",size:"m"}),className:Je.n,onClick:()=>{e(),p()}},{name:Wc(),icon:"empty",panel:{id:2,title:Wc(),content:Object(T.jsx)(Hc,{autoplayInterval:g,onSetInterval:m})}},{name:a?i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.hideEditModeLabel",{defaultMessage:"Hide editing controls"}):i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.showEditModeLabel",{defaultMessage:"Show editing controls"}),icon:Object(T.jsx)(q.EuiIcon,{type:a?"eyeClosed":"eye",size:"m"}),className:Je.n,onClick:()=>{o(),p()}},{name:Gc(),icon:"magnifyWithPlus",panel:{id:3,title:Gc(),items:[{name:i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomFitToWindowText",{defaultMessage:"Fit to window"}),icon:"empty",onClick:t,disabled:c===Je.y},...$c.map((e=>({name:Uc(e),icon:"empty",onClick:()=>s(e)}))),{name:i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomInText",{defaultMessage:"Zoom in"}),icon:"magnifyWithPlus",onClick:r,disabled:c===Je.y,className:"canvasContextMenu--topBorder"},{name:i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomOutText",{defaultMessage:"Zoom out"}),icon:"magnifyWithMinus",onClick:l,disabled:c<=Je.z},{name:i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.zoomPrecentageValue",{defaultMessage:"Reset"}),icon:"empty",onClick:n,disabled:c>=Je.y,className:"canvasContextMenu--topBorder"}]}}]});return Object(T.jsx)(cs.a,{button:e=>Object(T.jsx)(q.EuiButtonEmpty,{size:"s","aria-label":i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.viewMenuLabel",{defaultMessage:"View options"}),onClick:e},i.i18n.translate("xpack.canvas.workpadHeaderViewMenu.viewMenuButtonLabel",{defaultMessage:"View"})),panelPaddingSize:"none",anchorPosition:"downLeft"},(({closePopover:e})=>Object(T.jsx)(q.EuiContextMenu,{initialPanelId:0,panels:Ol(f(e)),className:"canvasViewMenu"})))},Kc=Object(dt.compose)(Object(l.connect)((e=>({zoomScale:Object(Ne.d)(e),boundingBox:Object($e.v)(e),workpadWidth:Object($e.B)(e),workpadHeight:Object($e.x)(e),isWriteable:Object($e.C)(e)&&Object(Ne.a)(e)})),(e=>({setZoomScale:t=>e(Object(pt.e)(t)),setWriteable:t=>e(Object(U.m)(t)),doRefresh:()=>e(Object(Ye.e)())})),((e,t,a)=>{const{boundingBox:n,workpadWidth:s,workpadHeight:o,...r}=e;return{...r,...t,...a,toggleWriteable:()=>t.setWriteable(!e.isWriteable),fitToWindow:()=>t.setZoomScale(((e,t,a)=>{const n=document.querySelector(`#${Mn.CANVAS_LAYOUT_STAGE_CONTENT_SELECTOR}`),s=n.clientWidth,o=n.clientHeight,r=e.left,i=e.top,l=e.right-t,c=e.bottom-a,u=s/(t+2*Math.max(Math.abs(r),Math.abs(l))+Mn.WORKPAD_CANVAS_BUFFER),d=o/(a+2*Math.max(Math.abs(i),Math.abs(c))+Mn.WORKPAD_CANVAS_BUFFER);return Math.min(u,d)})(n,s,o))}})),Object(dt.withHandlers)(Ho))((e=>{const t=Object(l.useDispatch)(),{autoplayInterval:a,setAutoplayInterval:s,setFullscreen:o,setRefreshInterval:r,refreshInterval:i}=Object(n.useContext)(xl),c=Object(n.useCallback)((()=>{t(Object(pt.a)([])),o(!0)}),[t,o]);return Object(T.jsx)(qc,A()({},e,{enterFullscreen:c,setAutoplayInterval:s,autoplayEnabled:!0,autoplayInterval:a,setRefreshInterval:r,refreshInterval:i}))})),Xc=Object(Pe.withSuspense)(Pe.LazyLabsFlyout,null),Yc=()=>{const{isLabsEnabled:e,getProjects:t}=Object(h.useLabsService)(),[a,o]=Object(n.useState)(!1);if(!e())return null;const r=t(["canvas"]),l=Object.values(r).filter((e=>e.status.isOverride)).length;return Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(q.EuiButtonEmpty,{onClick:()=>o(!a),size:"xs"},i.i18n.translate("xpack.canvas.workpadHeaderLabsControlSettings.labsButtonLabel",{defaultMessage:"Labs"}),l>0?Object(T.jsx)(q.EuiNotificationBadge,{color:"subdued",style:{marginLeft:4}},l):null),a?Object(T.jsx)(Xc,{solutions:["canvas"],onClose:()=>o(!1)}):null)};var Zc=a(59),Jc=a(8);const Qc=({factories:e,addPanelActions:t,promotedVisTypes:a,visTypeAliases:s,createNewVisType:o,createNewEmbeddableFromAction:r,createNewEmbeddableFromFactory:l})=>{const c={},u=[],d=tr();let p=1;e.forEach(((e,t)=>{const{grouping:a}=e;a?a.forEach((t=>{c[t.id]?c[t.id].factories.push(e):(c[t.id]={id:t.id,appName:t.getDisplayName?t.getDisplayName({}):t.id,icon:t.getIconType?t.getIconType({}):"empty",factories:[e],panelId:p},p++)})):u.push(e)}));const b=e=>{const{name:t,title:a,titleInWizard:n,description:s,icon:r="empty"}=e;return{name:n||a,icon:r,onClick:o(e),"data-test-subj":`visType-${t}`,toolTipContent:s}},g=e=>{const{name:t,title:a,description:n,icon:s="empty"}=e;return{name:a,icon:s,onClick:o(e),"data-test-subj":`visType-${t}`,toolTipContent:n}},m=e=>{const t=null!=e&&e.getIconType?e.getIconType():"empty",a=null!=e&&e.getDescription?e.getDescription():void 0;return{name:e.getDisplayName(),icon:t,toolTipContent:a,onClick:l(e),"data-test-subj":`createNew-${e.type}`}},h=Object(n.useCallback)((e=>t.map((t=>{var a;const n={embeddable:d,trigger:Jc.b},s=t.getDisplayName(n);return{name:s,icon:t.getIconType(n),onClick:r(t,n,e),"data-test-subj":`create-action-${s}`,toolTipContent:null==t||null===(a=t.getDisplayNameTooltip)||void 0===a?void 0:a.call(t,n)}}))),[t,r,d]),f=e=>[{id:0,items:[...s.map(g),...h(e),...u.map(m),...a.map(b),...Object.values(c).map((({id:e,appName:t,icon:a,panelId:n})=>({name:t,icon:a,panel:n,"data-test-subj":`canvasEditorMenu-${e}Group`})))]},...Object.values(c).map((({appName:e,panelId:t,factories:a})=>({id:t,title:e,items:a.map(m)})))];return Object(T.jsx)(Al,{ownFocus:!0,label:i.i18n.translate("xpack.canvas.solutionToolbar.editorMenuButtonLabel",{defaultMessage:"Select type"}),panelPaddingSize:"none","data-test-subj":"canvasEditorMenuButton"},(({closePopover:e})=>Object(T.jsx)(q.EuiContextMenu,{initialPanelId:0,panels:f(e),"data-test-subj":"canvasEditorContextMenu"})))},eu=({addElement:e})=>{const t=Object(h.useEmbeddablesService)(),{pathname:a,search:s,hash:o}=Object(M.useLocation)(),r=t.getStateTransfer(),i=Object(h.useVisualizationsService)(),l=Object(h.useUiActionsService)(),c=tr(),[u,d]=Object(n.useState)([]),p=Object(n.useMemo)((()=>t?Array.from(t.getEmbeddableFactories()):[]),[t]),[b,g]=Object(n.useState)([]);Object(n.useEffect)((()=>{Promise.all(p.map((async e=>({factory:e,isEditable:await e.isEditable()})))).then((e=>{g(e)}))}),[p]),Object(n.useEffect)((()=>{let e=!0;return async function(){var t;const a=await(null==l||null===(t=l.getTriggerCompatibleActions)||void 0===t?void 0:t.call(l,Jc.a,{embeddable:c}));e&&d(a)}(),()=>{e=!1}}),[l,c]);const m=Object(n.useCallback)((e=>()=>{let t="",n="";e?(Go&&Go(Wo.METRIC_TYPE.CLICK,`${e.name}:create`),"alias"in e?e.alias&&"path"in e.alias&&(n=e.alias.app,t=e.alias.path):(n="visualize",t=`#/create?type=${encodeURIComponent(e.name)}`)):(n="visualize",t="#/create?"),r.navigateToEditor(n,{path:t,state:{originatingApp:Mn.CANVAS_APP,originatingPath:`${a}${s}${o}`}})}),[r,a,s,o]),f=Object(n.useCallback)((t=>async()=>{let a;if(Go&&Go(Wo.METRIC_TYPE.CLICK,t.type),t.getExplicitInput)a=await t.getExplicitInput();else{const e=await t.create({});a=null==e?void 0:e.getInput()}if(a){const n=Object(er.a)(a,t.type,void 0,!0);e({expression:n})}}),[e]),v=Object(n.useCallback)(((e,t,a)=>n=>{a(),n.currentTarget instanceof HTMLAnchorElement?n.defaultPrevented||0!==n.button||n.currentTarget.target&&"_self"!==n.currentTarget.target||n.metaKey||n.altKey||n.ctrlKey||n.shiftKey||(n.preventDefault(),e.execute(t)):e.execute(t)}),[]),x=e=>i.getByGroup(e).sort((({name:e},{name:t})=>e<t?-1:e>t?1:0)).filter((({disableCreate:e})=>!e)),j=i.getAliases().sort((({promotion:e=!1},{promotion:t=!1})=>e===t?0:e?-1:1)).filter((({disableCreate:e})=>!e)),y=b.filter((({isEditable:e,factory:{type:t,canCreateNew:a,isContainerType:n}})=>e&&!n&&a()&&!["visualization","ml","links"].some((e=>t.includes(e))))).map((({factory:e})=>e)),O=x(Zc.VisGroups.PROMOTED),w=x(Zc.VisGroups.LEGACY);return Object(T.jsx)(Qc,{createNewVisType:m,createNewEmbeddableFromFactory:f,createNewEmbeddableFromAction:v,promotedVisTypes:[].concat(O,w),factories:y,addPanelActions:u,visTypeAliases:j})},tu=Object(qe.s)();var au=a(60);const nu=({onSelect:e,availableEmbeddables:t,onClose:a,isByValueEnabled:s})=>{const o=Object(h.useEmbeddablesService)(),r=Object(h.usePlatformService)(),{getEmbeddableFactories:l,getReactEmbeddableSavedObjects:c}=o,{getContentManagement:u,getUISettings:d}=r,p=Object(n.useMemo)((()=>[...l()].filter((e=>{var t;return Boolean(null===(t=e.savedObjectMetaData)||void 0===t?void 0:t.type)&&!e.isContainerType})).reduce(((e,t)=>(e[t.savedObjectMetaData.type]=t,e)),{})),[l]),b=Object(n.useMemo)((()=>[...c()].filter((([e,t])=>{var a;return Boolean(null===(a=t.savedObjectMetaData)||void 0===a?void 0:a.type)})).reduce(((e,[t,a])=>(e[a.savedObjectMetaData.type]={...a,type:t},e)),{})),[c]),g=Object(n.useMemo)((()=>[...Object.values(b),...Object.values(p)].filter((e=>Boolean("links"!==e.type&&(s||t.includes(e.type))))).map((e=>e.savedObjectMetaData)).filter((function(e){return void 0!==e})).sort(((e,t)=>e.type.localeCompare(t.type)))),[t,b,s,p]),m=Object(n.useCallback)(((t,a)=>{if(b[a]){const n=b[a],{type:o}=n;return void e(t,o,s)}const n=l(),o=Array.from(n).find((e=>Boolean(e.savedObjectMetaData&&e.savedObjectMetaData.type===a))),r=o?o.type:"unknown";e(t,r,s)}),[s,l,e,b]);return Object(T.jsx)(q.EuiFlyout,{ownFocus:!0,onClose:a,"data-test-subj":"dashboardAddPanel"},Object(T.jsx)(q.EuiFlyoutHeader,{hasBorder:!0},Object(T.jsx)(q.EuiTitle,{size:"m"},Object(T.jsx)("h2",null,i.i18n.translate("xpack.canvas.embedObject.titleText",{defaultMessage:"Add from library"})))),Object(T.jsx)(q.EuiFlyoutBody,null,Object(T.jsx)(au.SavedObjectFinder,{onChoose:m,savedObjectMetaData:g,showFilter:!0,noItemsMessage:i.i18n.translate("xpack.canvas.embedObject.noMatchingObjectsMessage",{defaultMessage:"No matching objects found."}),services:{contentClient:u().client,uiSettings:d()}})))};var su=a(127);const ou={[su.b.map]:e=>`savedMap id="${e}" | render`,[su.b.lens]:e=>`savedLens id="${e}" | render`,[su.b.visualization]:e=>`savedVisualization id="${e}" | render`},ru=e=>{const t=Object(n.useMemo)((()=>document.createElement("div")),[]);return Object(n.useEffect)((()=>{let e=document.querySelector("body");return e&&t&&e.appendChild(t),()=>{e=document.querySelector("body"),e&&t&&e.removeChild(t)}}),[t]),t?Object(o.createPortal)(Object(T.jsx)(nu,A()({},e,{availableEmbeddables:Object.keys(ou)})),t):null},iu=({availableEmbeddables:e,...t})=>{const a=Object(h.useLabsService)().isProjectEnabled("labs:canvas:byValueEmbeddable"),s=Object(l.useDispatch)(),o=Object(l.useSelector)((e=>Object($e.r)(e))),r=Object(n.useCallback)(((e,t)=>s(Object(Ye.b)(e,t))),[s]),i=Object(n.useCallback)(((e,n)=>{const s={expression:`markdown "Could not find embeddable for type ${n}" | render`};a?s.expression=Object(er.a)({savedObjectId:e},n,void 0,!0):ou[n]&&(s.expression=ou[n](e)),r(o,s),t.onClose()}),[r,o,t,a]);return Object(T.jsx)(ru,A()({},t,{availableEmbeddables:e||[],onSelect:i,isByValueEnabled:a}))},lu=Object(l.connect)((e=>({isWriteable:Object($e.C)(e)&&Object(Ne.a)(e),canUserWrite:Object(Ne.a)(e),selectedPage:Object($e.r)(e),pageId:Object($e.r)(e)})),(e=>({onSetWriteable:t=>e(Object(U.m)(t)),addElement:t=>a=>e(Object(Ye.b)(t,a))})),((e,t,a)=>({...e,...t,...a,renderEmbedPanel:e=>Object(T.jsx)(iu,{onClose:e}),addElement:t.addElement(e.pageId),elements:tl.toJS()})))((({isWriteable:e,canUserWrite:t,commit:a,onSetWriteable:o=(()=>{}),renderEmbedPanel:r,elements:l,addElement:c})=>{const[u,d]=Object(n.useState)(!1),p=()=>o(!e),b=()=>t?e?i.i18n.translate("xpack.canvas.workpadHeader.hideEditControlTooltip",{defaultMessage:"Hide editing controls"}):i.i18n.translate("xpack.canvas.workpadHeader.showEditControlTooltip",{defaultMessage:"Show editing controls"}):i.i18n.translate("xpack.canvas.workpadHeader.noWritePermissionTooltip",{defaultMessage:"You don't have permission to edit this workpad"}),g=Object(n.useCallback)((e=>()=>{l[e]&&c(l[e])}),[c,l]),m=[{iconType:"visText",label:tu.markdown.displayName,onClick:g("markdown")},{iconType:"node",label:tu.shape.displayName,onClick:g("shape")},{iconType:"image",label:tu.image.displayName,onClick:g("image")}];return Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(q.EuiFlexGroup,{gutterSize:"m",alignItems:"center",className:"canvasLayout__stageHeaderInner"},e&&Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(nl,null,{primaryButton:Object(T.jsx)(Ql,{addElement:c,elements:l}),iconButtonGroup:Object(T.jsx)(sl,{buttons:m,legend:i.i18n.translate("xpack.canvas.workpadHeader.quickCreateButtonGroupLegend",{defaultMessage:"Shortcuts to popular element types"})}),extraButtons:[Object(T.jsx)(ul,{onClick:()=>d(!0),"data-test-subj":"canvas-add-from-library-button"}),Object(T.jsx)(eu,{addElement:c})]})),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",gutterSize:"none"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Kc,null)),e&&Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Nl,{commit:a})),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(kc,null)),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(Yc,null)))),Object(T.jsx)(q.EuiFlexItem,null),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(q.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(T.jsx)(q.EuiFlexItem,{grow:!1},t&&Object(T.jsx)(f.Shortcuts,{name:"EDITOR",handler:e=>{"EDITING"===e&&p()},targetNodeSelector:"body",global:!0,isolate:!0}),Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:(({textOnly:e}={textOnly:!1})=>{const t=b();return e?t:Object(T.jsx)("span",null,t," ",Object(T.jsx)(Ka,{namespace:"EDITOR",action:"EDITING"}))})()},Object(T.jsx)(q.EuiButtonIcon,{iconType:e?"eyeClosed":"eye",onClick:p,size:"s","aria-label":b(),isDisabled:!t}))),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(pl,null)),Object(T.jsx)(q.EuiFlexItem,{grow:!1},Object(T.jsx)(yl,null,(({toggleFullscreen:e})=>Object(T.jsx)(q.EuiToolTip,{position:"bottom",content:Object(T.jsx)("span",null,i.i18n.translate("xpack.canvas.workpadHeader.fullscreenTooltip",{defaultMessage:"Enter fullscreen mode"})," ",Object(T.jsx)(Ka,{namespace:"PRESENTATION",action:"FULLSCREEN"}))},Object(T.jsx)(q.EuiButtonIcon,{iconType:"fullScreen","aria-label":i.i18n.translate("xpack.canvas.workpadHeader.fullscreenButtonAriaLabel",{defaultMessage:"View fullscreen"}),onClick:e})))))))),u?r((()=>d(!1))):null)})),cu="canvasWorkpadContainer",uu="workpad-loaded",du=((e,t=Go)=>function(a){const{workpad:s}=a,[o,r]=Object(n.useState)(void 0),[i,c]=Object(n.useState)(!1),u=Object(l.useSelector)((e=>Object($e.d)(e)),l.shallowEqual),d=Object(l.useSelector)((e=>Object(dl.a)(e)),Xe.a),p=function(e,t){const a=Object.keys(t);return e.pages.reduce(((e,t)=>[...e,...t.elements.map((e=>e.id))]),[]).every((e=>a.includes(e)))}(s,d),{error:b,pending:g}=u,m=p&&0===g;return Object(n.useEffect)((()=>{if(s.id!==o){const e=s.pages.reduce(((e,t)=>e+t.elements.length),0);r(s.id),c(0===e||m)}else!i&&m&&(t(Wo.METRIC_TYPE.LOADED,b>0?[uu,"workpad-loaded-with-errors"]:uu),c(!0))}),[o,i,b,s.id,m,s.pages]),Object(T.jsx)(e,a)})((({deselectElement:e,isWriteable:t,workpad:a})=>{const s=Object(n.useRef)(null),o=Object(n.useRef)(null);Object(n.useEffect)((()=>{var e;null===(e=o.current)||void 0===e||e.focus()}),[o]);const r=Object(n.useCallback)((e=>{s.current!==e&&(s.current=e)}),[]),i=Object(n.useCallback)((e=>{s.current===e&&(s.current=null)}),[]),l=s.current||(()=>{}),c=Object(n.useMemo)((()=>Object(W.a)()),[]);return Object(T.jsx)("div",{className:"canvasLayout"},Object(T.jsx)("div",{className:"canvasLayout__rows"},Object(T.jsx)("div",{className:"canvasLayout__cols"},Object(T.jsx)("div",{className:"canvasLayout__stage"},Object(T.jsx)("div",{className:"canvasLayout__stageHeader"},Object(T.jsx)("h1",{id:"canvasWorkpadTitle",className:"euiScreenReaderOnly",ref:o,tabIndex:-1},`${qe.c} - ${a.name||c}`),Object(T.jsx)(lu,{commit:l})),Object(T.jsx)("div",{id:Je.m,className:Je.m},Object(T.jsx)("div",{id:cu,className:"canvasWorkpadContainer canvasLayout__stageContentOverflow"},Object(T.jsx)(el,{registerLayout:r,unregisterLayout:i})))),t&&Object(T.jsx)("div",{className:"canvasLayout__sidebar hide-for-sharing"},Object(T.jsx)(_o,{commit:l}))),Object(T.jsx)("div",{className:"canvasLayout__footer hide-for-sharing"},Object(T.jsx)(Bo,null))))})),pu=Object(l.connect)((e=>({isWriteable:Object($e.C)(e)&&Object(Ne.a)(e),workpad:Object($e.u)(e)})))(du),bu=Object(l.connect)((e=>({workpad:Object($e.u)(e),selectedPageIndex:Object($e.s)(e)})),(e=>({initializeWorkpad:()=>e(Object(U.c)())})))((({workpad:e,selectedPageIndex:t,initializeWorkpad:a})=>{const{id:s,pages:o,height:r,width:i}=e,l=o[t],c=l.elements.length;return Object(n.useEffect)((()=>a())),Object(T.jsx)("div",{className:"canvasExport","data-shared-page":t+1},Object(T.jsx)("div",{className:"canvasExport__stage"},Object(T.jsx)("div",{className:"canvasLayout__stageHeader"},Object(T.jsx)(Eo.b,{to:`/workpad/${s}`},"Edit Workpad")),Object(T.jsx)("div",{css:Object(T.css)(e.css,"",""),className:"canvasExport__stageContent","data-shared-items-count":c},Object(T.jsx)(Ki,{isSelected:!0,key:l.id,pageId:l.id,height:r,width:i,registerLayout:()=>{},unregisterLayout:()=>{}}))))})),gu=()=>i.i18n.translate("xpack.canvas.canvasLoading.loadingMessage",{defaultMessage:"Loading"}),mu=({msg:e=`${gu()}...`})=>Object(T.jsx)("div",{className:"canvasContainer--loading"},Object(T.jsx)(q.EuiPanel,null,Object(T.jsx)(q.EuiLoadingChart,{size:"m"}),Object(T.jsx)(q.EuiSpacer,{size:"s"}),Object(T.jsx)(q.EuiText,{color:"default",size:"s"},Object(T.jsx)("p",null,e))));var hu=a(147),fu=a(375),vu=a.n(fu);const xu=e=>{try{const t=JSON.stringify(e);return vu.a.compress(t)}catch(e){throw new Error(`Could not encode state: ${e.message}`)}},ju=e=>{try{var t;const a=null!==(t=vu.a.decompress(e))&&void 0!==t?t:"null";return JSON.parse(a)}catch(e){return null}};var yu=a(61);const Ou=()=>{const e=Object(M.useParams)(),t=Object(l.useSelector)($e.u),a=Object(l.useDispatch)(),s=parseInt(e.pageNumber,10);let o=t.page;isNaN(s)||(o=s-1),Object(n.useEffect)((()=>{o!==t.page&&a(Object(sn.e)(o))}),[o,t.page,a])},wu="canvas-isFullscreen",ku=({children:e})=>{var t;const a=Object(h.usePlatformService)(),o=Object(l.useSelector)($e.u);(()=>{const{isFullscreen:e}=Object(n.useContext)(xl),{setFullscreen:t}=Object(h.usePlatformService)();Object(n.useEffect)((()=>{const a=document.querySelector("body").classList,n=a.contains(wu);e&&!n?(t(!1),a.add(wu)):!e&&n&&(a.remove(wu),t(!0))}),[e,t]),as()((()=>()=>{var e;t(!0),null===(e=document.querySelector("body"))||void 0===e||e.classList.remove(wu)}))})(),(()=>{const{nextPage:e,isFullscreen:t,autoplayInterval:a,isAutoplayPaused:s}=Object(n.useContext)(xl),o=Object(n.useRef)(void 0);Object(n.useEffect)((()=>((o.current||!t||s)&&clearTimeout(o.current),t&&!s&&a>0&&(o.current=window.setTimeout((()=>{e()}),a)),()=>clearTimeout(o.current))),[t,e,a,s])})(),(()=>{const e=Object(l.useDispatch)(),{refreshInterval:t}=Object(n.useContext)(xl),a=Object(n.useRef)(void 0),s=Object(l.useSelector)(dl.b);Object(n.useEffect)((()=>(clearTimeout(a.current),t>0&&!s&&(a.current=window.setTimeout((()=>{e(Object(Ye.e)())}),t)),()=>{clearTimeout(a.current)})),[s,e,t])})();const r=Object(M.useHistory)();Object(n.useEffect)((()=>{a.setBreadcrumbs([V(r),G({name:o.name})])}),[o.name,a,r]),Object(n.useEffect)((()=>{Object(W.b)(o.name||Object(W.a)())}),[o.name,o.id]);const c=o.aliasId?null===(t=a.getLegacyUrlConflict)||void 0===t?void 0:t.call(a,{objectNoun:i.i18n.translate("xpack.canvas.workpadConflict.redirectLabel",{defaultMessage:"Workpad"}),currentObjectId:o.id,otherObjectId:o.aliasId,otherObjectPath:`/workpad/${o.aliasId}`}):null;return Object(T.jsx)(s.a.Fragment,null,c,e)},{workpadRoutes:_u}=qe.f,Su=({route:e})=>{const t=Object(n.useCallback)((t=>`/workpad/${t}${e.match.params.pageNumber?`/page/${e.match.params.pageNumber}`:""}`),[e.match.params.pageNumber]);return Object(T.jsx)(Tu,{params:e.match.params,key:"workpad-loader",getRedirectPath:t},(t=>Object(T.jsx)(B,null,Object(T.jsx)(z,{path:"/workpad/:id/page/:pageNumber",children:e=>Object(T.jsx)(Cu,null,Object(T.jsx)(jl,null,Object(T.jsx)(ku,null,Object(T.jsx)(pu,null))))}),Object(T.jsx)(z,{path:"/workpad/:id",strict:!1,exact:!0},Object(T.jsx)(M.Redirect,{to:`/workpad/${e.match.params.id}/page/${t.page+1}`})))))},Eu=({route:{match:e}})=>{const t=Object(n.useCallback)((t=>`/export/workpad/pdf/${t}/page/${e.params.pageNumber}`),[e.params.pageNumber]);return Object(T.jsx)(Tu,{loadPages:!1,params:e.params,getRedirectPath:t},(()=>Object(T.jsx)(Mu,null,Object(T.jsx)(bu,null))))},Mu=({children:e})=>{const t=Object(M.useParams)();Ou();const a=Object(l.useDispatch)();return Object(n.useEffect)((()=>{a(Object(Ye.e)({onlyActivePage:!0}))}),[a,t.pageNumber]),Object(T.jsx)(s.a.Fragment,null,e)},Cu=({children:e})=>((()=>{const e=Object(M.useHistory)(),t=Object(M.useLocation)(),a=Object(l.useDispatch)(),{state:s}=t,o=Object(n.useRef)(s),r=e.action.toLowerCase();Object(n.useEffect)((()=>{"pop"===r&&null!=s&&s!==o.current&&(o.current=s,a(Object(hu.a)(ju(s))),a(Object(U.c)())),o.current=s}),[a,r,s])})(),(()=>{const e=Object(M.useHistory)(),t=Object(l.useSelector)((e=>e.persistent)),a=Object(n.useRef)(!1);Object(n.useEffect)((()=>{const n=!a.current,s=e.location.state,o=s?ju(s):{},r=Object(c.isEqual)(t,o),i=Object(yu.createPath)(e.location);a.current=!0,void 0===s?e.replace(i,xu(t)):n||r||e.push(i,xu(t))}),[e,t,e.location.search])})(),Ou(),(()=>{const e=Object(h.useWorkpadService)(),t=Object(h.useNotifyService)(),[a,s]=Object(l.useSelector)((e=>[Object($e.u)(e),Object(Ne.a)(e)])),o=ss()(a),r=o&&a!==o;Object(n.useEffect)((()=>{s&&r&&e.updateWorkpad(a.id,a).catch((e=>{lo(e,t.error)}))}),[e,a,r,s,t.error])})(),Object(T.jsx)(s.a.Fragment,null,e)),Tu=({params:e,children:t,loadPages:a,getRedirectPath:s})=>{const[o,r]=((e,t=!0,a)=>{const s=Object(h.useWorkpadService)().resolve,o=Object(h.usePlatformService)(),r=Object(l.useDispatch)(),c=Object(l.useSelector)($e.u),[u,d]=Object(n.useState)(void 0),[p,b]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{(async()=>{try{const{workpad:{assets:a,...n},...o}=await s(e);b({id:e,...o}),c.id!==e&&"aliasMatch"!==o.outcome&&(n.aliasId=o.aliasId,r(Object(Js.e)(a)),r(Object(U.j)(n,{loadPages:t})),r(Object(pt.e)(1)))}catch(e){d(e)}})()}),[e,r,d,t,s,c.id]),Object(n.useEffect)((()=>{p&&p.id!==e||(async()=>{if(!p)return;const{aliasId:e,outcome:t,aliasPurpose:n}=p;if("aliasMatch"===t&&o.redirectLegacyUrl&&e){const t=a(e);await o.redirectLegacyUrl({path:`#${t}`,aliasPurpose:n,objectNoun:i.i18n.translate("xpack.canvas.workpadResolve.redirectLabel",{defaultMessage:"Workpad"})})}})()}),[e,p,a,o]),[c.id===e?c:void 0,u]})(e.id,a,s),c=Object(h.useNotifyService)();return Object(n.useEffect)((()=>{r&&c.error(r,{title:_u.getLoadFailureErrorMessage()})}),[r,c]),r?Object(T.jsx)(M.Redirect,{to:"/"}):o?t(o):Object(T.jsx)(mu,null)},Pu=({history:e})=>Object(T.jsx)(P,{history:e},Object(T.jsx)(z,{path:"/",children:e=>{if(0===e.location.hash.indexOf("#/")&&!e.location.pathname){const[t,a]=e.location.hash.split("?");let n=e.location.search||"?";return void 0!==a&&(n=((e,t)=>{const a=Object(H.parse)(e),n=Object(H.parse)(t);return Object(H.stringify)({...a,...n})})(n,`?${a}`)),Object(T.jsx)(M.Redirect,{push:!0,to:{pathname:`${t.substring(1)}`,search:n}})}return Object(T.jsx)(B,null,Object(T.jsx)(z,{path:"/export/workpad/pdf/:id/page/:pageNumber",children:e=>Object(T.jsx)(Eu,{route:e})}),Object(T.jsx)(z,{path:["/workpad/:id/page/:pageNumber","/workpad/:id"],exact:!1,children:e=>Object(T.jsx)(Su,{route:e})}),Object(T.jsx)(z,{path:"/"},Object(T.jsx)(Ue,null)))}})),Nu=Ua(),Au=e=>e.map((e=>{const t=e[Nu];return{title:e.help,description:t.reduce(((e,t,a)=>(t=t.replace(/\+/g," "),0!==a&&e.push(Object(T.jsx)("span",{key:Object(nt.a)("span")}," ",i.i18n.translate("xpack.canvas.keyboardShortcutsDoc.shortcutListSeparator",{defaultMessage:"or",description:'Separates which keyboard shortcuts can be used for a single action. Example: "{shortcut1} or {shortcut2} or {shortcut3}"'})," ")),e.push(Object(T.jsx)("span",{key:Object(nt.a)("span")},$a(t).split(/( )/g).map((e=>" "===e?e:Object(T.jsx)(q.EuiCode,{key:Object(nt.a)("shortcut")},e))))),e)),[])}})),Iu=({onClose:e})=>Object(T.jsx)(q.EuiFlyout,{closeButtonProps:{"aria-label":i.i18n.translate("xpack.canvas.keyboardShortcutsDoc.flyout.closeButtonAriaLabel",{defaultMessage:"Closes keyboard shortcuts reference"})},size:"s",onClose:e},Object(T.jsx)(q.EuiFlyoutHeader,{hasBorder:!0},Object(T.jsx)(q.EuiTitle,{size:"s"},Object(T.jsx)("h2",null,i.i18n.translate("xpack.canvas.keyboardShortcutsDoc.flyoutHeaderTitle",{defaultMessage:"Keyboard shortcuts"})))),Object(T.jsx)(q.EuiFlyoutBody,null,Object.values(S).map((e=>{const{displayName:t,...a}=e;return Object(T.jsx)("div",{key:Object(nt.a)("shortcuts"),className:"canvasKeyboardShortcut"},Object(T.jsx)(q.EuiTitle,{size:"xs"},Object(T.jsx)("h4",null,t)),Object(T.jsx)(q.EuiHorizontalRule,{margin:"s"}),Object(T.jsx)(q.EuiDescriptionList,{textStyle:"reverse",type:"column",listItems:Au(Object.values(a)),compressed:!0}),Object(T.jsx)(q.EuiSpacer,null))})))),Fu=({isVisible:e,hidePanel:t})=>Object(T.jsx)(s.a.Fragment,null,e&&Object(T.jsx)(q.EuiPortal,null,Object(T.jsx)(Iu,{onClose:t})));var Lu=a(150);const Du=()=>{const e=Object(l.useDispatch)(),t=Object(l.useSelector)((e=>(e=>e.transient.flyouts.keyboardShortcutsDoc.isVisible)(e))),a=Object(n.useCallback)((()=>e(Object(Lu.b)(!1))),[e]);return Object(T.jsx)(Fu,{isVisible:t,hidePanel:a})},zu=()=>Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(Du,null));class app_ShortcutManagerContextWrapper extends s.a.Component{getChildContext(){return{shortcuts:E}}render(){return Object(T.jsx)(s.a.Fragment,null,this.props.children)}}b()(app_ShortcutManagerContextWrapper,"childContextTypes",{shortcuts:m.a.object.isRequired});const Ru=({history:e})=>{const{updatePath:t}=Object(h.useNavLinkService)();return Object(n.useEffect)((()=>e.listen((({pathname:e,search:a})=>{t(e+a)})))),Object(T.jsx)(app_ShortcutManagerContextWrapper,null,Object(T.jsx)("div",{className:"canvas canvasContainer"},Object(T.jsx)(Pu,{history:e}),Object(T.jsx)(zu,null)))};var Bu=a(100),Hu=a(128);const Wu=Object(Bu.e)();function Vu(e){this.name=e.name,this.displayName=e.displayName||this.name,this.id=e.id||Object(nt.a)("workpad"),this.help=e.help||"",this.tags=e.tags||[],this.tags.forEach((e=>{Hu.a.get(e)||Hu.a.register((()=>({name:e,color:"#666666"})))})),this.width=e.width||Wu.width,this.height=e.height||Wu.height,this.page=e.page||Wu.page,this.pages=e.pages||Wu.pages,this.colors=e.colors||Wu.colors,this["@timestamp"]=e["@timestamp"]||Wu["@timestamp"],this["@created"]=e["@created"]||Wu["@created"],this.assets=e.assets||{},this.css=e.css||Wu.css}class templates_registry_TemplateRegistry extends tn.a{wrapper(e){return new Vu(e)}}const Gu=new templates_registry_TemplateRegistry;let Uu={};const $u=({hideHelpMenu:e,showKeyboardShortcutsDocFlyout:t})=>{const a=Object(n.useCallback)((()=>{e(),t()}),[e,t]);return Object(T.jsx)(s.a.Fragment,null,Object(T.jsx)(q.EuiButtonEmpty,{size:"s",flush:"left",iconType:"keyboard",onClick:a},i.i18n.translate("xpack.canvas.helpMenu.keyboardShortcutsLinkLabel",{defaultMessage:"Keyboard shortcuts"})))},qu=e=>{const t=Object(l.useDispatch)(),a=Object(n.useCallback)((()=>t(Object(Lu.b)(!0))),[t]);return Object(T.jsx)($u,A()({},e,{showKeyboardShortcutsDocFlyout:a}))};var Ku=a(158);async function Xu(e){return Object(Ku.e)()?Object(Ku.a)():async function(e){const t=(e=>{const t=h.pluginServices.getServices().platform,{getHasWriteAccess:a}=t,n={app:{},assets:{},transient:{canUserWrite:a(),zoomScale:1,elementStats:{total:0,ready:0,pending:0,error:0},fullscreen:!1,selectedToplevelNodes:[],resolvedArgs:{},refresh:{interval:0},autoplay:{enabled:!1,interval:1e4},sidebar:Object(Bu.d)(),flyouts:Object(Bu.b)()},persistent:{schemaVersion:2,workpad:Object(Bu.e)()}};return e?Object(c.get)(n,e):n})(),a=e.http.basePath.get(),n=await e.http.get(Je.b,{version:"1"}),s=Object.values(n);return t.app={basePath:a,serverFunctions:s,ready:!1},Object(Ku.b)(t)}(e)}function Yu(){const{help:e,args:t}=Object(qe.u)().asset,a=Object(qe.t)().asset;return{name:"asset",aliases:[],type:"string",inputTypes:["null"],help:e,args:{id:{aliases:["_"],types:["string"],help:t.id,required:!0}},fn:(e,t)=>{const n=t.id,s=Object(bs.a)(Object(Ku.d)(),n);if(void 0!==s)return s.value;throw a.invalidAssetId(n)}}}function Zu(e){return t=(t,{group:a,ungrouped:n})=>{const{expressions:s,filters:o}=h.pluginServices.getServices(),r=function(e,t,a=!1){return t&&0!==t.length?e.filter((e=>{const a=Object(tn.d)(e),n=Object(c.get)(a,"chain[0].arguments.filterGroup",[]);return n.length>0&&n.every((e=>t.includes(e)))})):a?e.filter((e=>{const t=Object(tn.d)(e);return 0===Object(c.get)(t,"chain[0].arguments.filterGroup",[]).length})):e}(o.getFilters(),a,n);if(r&&r.length){const e=r.join(" | "),t=Object(tn.d)(e),{variables:a}=o.getFiltersContext();return s.interpretAst(t,a)}{const t=e.types.filter;return null==t?void 0:t.from(null,{})}},function(){const{help:e,args:a}=Object(qe.u)().filters;return{name:"filters",type:"filter",help:e,context:{types:["null"]},deprecated:!0,args:{group:{aliases:["_"],types:["string"],help:a.group,multi:!0},ungrouped:{aliases:["nogroup","nogroups"],types:["boolean"],help:a.ungrouped,default:!1}},fn:t,migrations:void 0}};var t}var Ju=a(62),Qu=a.n(Ju),ed=a(157),td=a(160);const ad=()=>new Error(i.i18n.translate("xpack.canvas.functions.timelion.executionError",{defaultMessage:"There was an error executing the Timelion query.  Check your syntax and try again."}));function nd(e){return()=>{const{help:t,args:a}=Object(qe.u)().timelion;return{name:"timelion",type:"datatable",inputTypes:["filter"],help:t,args:{query:{types:["string"],aliases:["_","q"],help:a.query,default:'".es(*)"'},interval:{types:["string"],help:a.interval,default:"auto"},from:{types:["string"],help:a.from,default:"now-1y"},to:{types:["string"],help:a.to,default:"now"},timezone:{types:["string"],help:a.timezone,default:"UTC"}},fn:async(t,a)=>{const n=t.and.find((e=>"time"===e.filterType)),s=n?{min:n.from,max:n.to}:function(e,t,a){const n=Qu()().zoneName();Qu.a.tz.setDefault(t);const s=a.calculateBounds(e);return Qu.a.tz.setDefault(n),s}({from:a.from,to:a.to},a.timezone,e.timefilter),o={extended:{es:{filter:{bool:{must:Object(td.a)(t.and)}}}},sheet:[a.query],time:{from:s.min,to:s.max,interval:a.interval,timezone:a.timezone}};let r;try{r=await Object(ed.a)(e.prependBasePath("/internal/timelion/run"),{method:"POST",responseType:"json",data:o})}catch(e){throw ad()}const i=r.data.sheet[0].list;return{type:"datatable",meta:{source:"timelion"},columns:[{id:"@timestamp",name:"@timestamp",meta:{type:"date"}},{id:"value",name:"value",meta:{type:"number"}},{id:"label",name:"label",meta:{type:"string"}}],rows:Object(c.flatten)(i.map((e=>e.data.map((t=>({"@timestamp":t[0],value:t[1],label:e.label}))))))}}}}}function sd(e){return function(){const{help:t,args:a}=Object(qe.u)().to,n=Object(qe.t)().to;return{name:"to",aliases:[],help:t,args:{type:{types:["string"],help:a.type,aliases:["_"],multi:!0}},fn:(t,a)=>{if(!a.type)throw n.missingType();return Object(tn.c)(e.types)(t,a.type)}}}}var od=a(118);const rd=(e,t,{columns:a,ticks:n,font:s}={})=>{if(!t||Object(Cn.isAxisConfig)(t)&&!1===t.show)return{show:!1};const o={show:!0},r=Object(c.get)(a,`${e}.type`);if(Object(Cn.isAxisConfig)(t)){const{position:a,min:n,max:s,tickSize:i}=t,l="x"===e?["bottom","top"]:["left","right"];o.position=a&&l.includes(a)?a:l[0],"number"!==r&&"date"!==r||(null!=n&&(o.min=n),null!=s&&(o.max=s)),i&&"number"===r&&(o.tickSize=i)}if("string"===r&&n){const t=n[e];t&&(o.ticks=Object(c.map)(t.hash,((e,t)=>[e,t])))}return"date"===r&&(o.mode="time"),"object"==typeof s&&(o.font=s),o},id={size:14,lHeight:21,style:"normal",weight:"normal",family:a(76).openSans.value,color:"#000"},ld=e=>{if(!e)return{};const t=Object(c.get)(e,"lines"),a=Object(c.get)(e,"bars"),n=Object(c.get)(e,"fill"),s=Object(c.get)(e,"color"),o=Object(c.get)(e,"stack"),r={numbers:{show:!0},lines:{show:t>0,lineWidth:t,fillColor:s,fill:n/10},bars:{show:a>0,barWidth:a,fill:1,align:"center",horizontal:Object(c.get)(e,"horizontalBars",!1)},points:{show:!1},bubbles:{show:!0,fill:n}};return null!=o&&(r.stack=o),s&&(r.color=s),r};function cd(e){return()=>{const{help:t,args:a}=Object(qe.u)().plot;return{name:"plot",aliases:[],type:"render",inputTypes:["pointseries"],help:t,args:{defaultStyle:{multi:!1,types:["seriesStyle"],help:a.defaultStyle,default:"{seriesStyle points=5}"},font:{types:["style"],help:a.font,default:"{font}"},legend:{types:["string","boolean"],help:a.legend,default:"ne",options:[...Object.values(Cn.Legend),!1]},palette:{types:["palette"],help:a.palette,default:"{palette}"},seriesStyle:{multi:!0,types:["seriesStyle"],help:a.seriesStyle},xaxis:{types:["boolean","axisConfig"],help:a.xaxis,default:!0},yaxis:{types:["boolean","axisConfig"],help:a.yaxis,default:!0}},fn:(t,a)=>{const n=Object(c.keyBy)(a.seriesStyle||[],"label")||{},s=t.rows,o=((e,t)=>{const a={x:{hash:{},counter:0},y:{hash:{},counter:0}};return"string"===Object(c.get)(e,"x.type")&&t.forEach((e=>{a.x.hash[e.x]||(a.x.hash[e.x]=a.x.counter++)})),"string"===Object(c.get)(e,"y.type")&&t.reverse().forEach((e=>{a.y.hash[e.y]||(a.y.hash[e.y]=a.y.counter++)})),a})(t.columns,s),r=a.font?(e=>{if(!e||!e.spec)return id;const{fontSize:t,lineHeight:a,fontStyle:n,fontWeight:s,fontFamily:o,color:r}=e.spec,i=t&&Number(t.replace("px","")),l="string"==typeof a&&Number(a.replace("px",""));return{size:i&&!isNaN(i)?i:id.size,lHeight:i&&!isNaN(i)?l:id.lHeight,style:n||id.style,weight:s||id.weight,family:o||id.family,color:r||id.color}})(a.font):{},i=Object(c.map)(Object(c.groupBy)(s,"color"),((e,s)=>{const r={...a.defaultStyle,...n[s]},i=r?ld(r):{};return{...i,label:s,data:e.map((e=>{const a={},n="string"===Object(c.get)(t.columns,"x.type")?o.x.hash[e.x]:e.x,s="string"===Object(c.get)(t.columns,"y.type")?o.y.hash[e.y]:e.y;return null!=e.size?a.size=e.size:Object(c.get)(r,"points")&&(a.size=r.points,Object(Il.set)(i,"bubbles.size.min",r.points)),null!=e.text&&(a.text=e.text),[n,s,a]}))}})),l={type:"render",as:"plot",value:{font:a.font,data:Object(c.sortBy)(i,"label"),options:{canvas:!1,colors:e.get(a.palette.name||"custom").getCategoricalColors(i.length,a.palette.params),legend:Object(od.a)(a.legend,i.length),grid:{borderWidth:0,borderColor:null,color:"rgba(0,0,0,0)",labelMargin:30,margin:{right:30,top:20,bottom:0,left:0}},xaxis:rd("x",a.xaxis,{columns:t.columns,ticks:o,font:r}),yaxis:rd("y",a.yaxis,{columns:t.columns,ticks:o,font:r}),series:{shadowSize:0,...ld(a.defaultStyle)}}}};return JSON.parse(JSON.stringify(l))}}}}var ud=a(201),dd=a(189),pd=a(190);a(376);const{ReadOnlyBadge:bd}=qe.d,gd=({coreStart:e,startPlugins:t,params:a,canvasStore:n,pluginServices:s})=>{const{presentationUtil:o}=t,{element:i}=a;i.classList.add("canvas"),i.classList.add("canvasContainerWrapper");const c=s.getContextProvider();return r.a.render(Object(T.jsx)(u.a,e,Object(T.jsx)(d.KibanaContextProvider,{services:{...t,...e}},Object(T.jsx)(c,null,Object(T.jsx)(h.LegacyServicesProvider,{providers:h.services},Object(T.jsx)(o.ContextProvider,null,Object(T.jsx)(l.Provider,{store:n},Object(T.jsx)(Ru,{history:a.history}))))))),i),()=>{r.a.unmountComponentAtNode(i),n.dispatch(Object(ud.c)())}},md=async(e,t,a,n,s,o)=>{await Object(h.startLegacyServices)(e,t,a,n,o);const{expressions:d}=a,p=[Yu,Zu(b={timefilter:a.data.query.timefilter.timefilter,prependBasePath:t.http.basePath.prepend,types:a.expressions.getTypes(),paletteService:await a.charts.palettes.getPalettes()}),nd(b),sd(b),(g=b.paletteService,()=>{const{help:e,args:t}=Object(qe.u)().pie;return{name:"pie",aliases:[],type:"render",inputTypes:["pointseries"],help:e,args:{font:{types:["style"],help:t.font,default:"{font}"},hole:{types:["number"],default:0,help:t.hole},labelRadius:{types:["number"],default:100,help:t.labelRadius},labels:{types:["boolean"],default:!0,help:t.labels},legend:{types:["string","boolean"],help:t.legend,default:!1,options:[...Object.values(Cn.Legend),!1]},palette:{types:["palette"],help:t.palette,default:"{palette}"},radius:{types:["string","number"],help:t.radius,default:"auto"},seriesStyle:{multi:!0,types:["seriesStyle"],help:t.seriesStyle},tilt:{types:["number"],default:1,help:t.tilt}},fn:(e,t)=>{const{tilt:a,radius:n,labelRadius:s,labels:o,hole:r,legend:i,palette:l,font:u,seriesStyle:d}=t,p=Object(c.keyBy)(d||[],"label")||{},b=Object(c.map)(Object(c.groupBy)(e.rows,"color"),((e,t="")=>{const a={label:t,data:e.map((e=>e.size||1))},n=p[t];return n&&(a.color=Object(c.get)(n,"color")),a}));return{type:"render",as:"pie",value:{font:u,data:b,options:{canvas:!1,colors:g.get(l.name||"custom").getCategoricalColors(b.length,l.params),legend:Object(od.a)(i,b.length),grid:{show:!1},series:{pie:{show:!0,innerRadius:Math.max(r,0)/100,stroke:{width:0},label:{show:o,radius:(s>=0?s:100)/100},tilt:a,radius:n},bubbles:{show:!1},shadowSize:0}}}}}}}),cd(b.paletteService)];var b,g;for(const e of p)d.registerFunction(e);const m=await Xu(e);Object(tn.b)(Uu,{elements:tl,transformUIs:Ls,datasourceUIs:ls,modelUIs:Rs,viewUIs:Bs,argumentUIs:Cs,templates:Gu,tagUIs:Hu.a,transitions:nn}),await async function(e){const t={},a=Object.entries(e).map((async([e,a])=>{const n=await(await Promise.all(a.map((e=>"function"==typeof e?e():e)))).flat();t[e]=n}));await Promise.all(a),Object(tn.f)(Uu,t)}(s),t.chrome.setBadge(t.application.capabilities.canvas&&t.application.capabilities.canvas.save?void 0:{text:bd.getText(),tooltip:bd.getTooltip(),iconType:"glasses"});const{docLinks:f}=t;var v;return t.chrome.setHelpExtension({appName:i.i18n.translate("xpack.canvas.helpMenu.appName",{defaultMessage:"Canvas"}),links:[{linkType:"documentation",href:f.links.canvas.guide}],content:(e,{hideHelpMenu:a})=>(r.a.render(Object(T.jsx)(u.a,t,Object(T.jsx)(l.Provider,{store:m},Object(T.jsx)(qu,{hideHelpMenu:a}))),e),()=>r.a.unmountComponentAtNode(e))}),a.usageCollection&&(v=a.usageCollection.reportUiCounter,Vo=v),m},hd=e=>{Uu={},Object(c.includes)($.plot.plugins,dd.a)&&Object(c.remove)($.plot.plugins,dd.a),Object(c.includes)($.plot.plugins,pd.a)&&Object(c.remove)($.plot.plugins,pd.a),e.chrome.setBadge(void 0),e.chrome.setHelpExtension(void 0)}}])]);