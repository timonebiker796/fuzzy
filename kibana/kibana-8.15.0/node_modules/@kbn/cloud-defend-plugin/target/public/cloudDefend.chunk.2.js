/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloudDefend_bundle_jsonpfunction=window.cloudDefend_bundle_jsonpfunction||[]).push([[2],{34:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(8);const o=()=>Object(a.useKibana)()},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=n(16).__importDefault(n(73));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},71:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzIyNF8yMTIzMTkpIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yLjU0ODA4IDIzLjgyOTlDMi4yMTE4OCAyMy42NTk1IDIgMjMuMzE0NyAyIDIyLjkzNzhWMTAuMDA5N0MyIDkuMjYzOTggMi43ODY3MyA4Ljc4MDYyIDMuNDUxOTIgOS4xMTc2MUwxNC4xNzkyIDE0LjU1MjFDMTQuNTE1NCAxNC43MjI1IDE0LjcyNzMgMTUuMDY3MyAxNC43MjczIDE1LjQ0NDJWMjguMzcyM0MxNC43MjczIDI5LjExOCAxMy45NDA1IDI5LjYwMTQgMTMuMjc1MyAyOS4yNjQ0TDIuNTQ4MDggMjMuODI5OVoiIGZpbGw9IiMwMEJGQjMiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yOS40NTE5IDIzLjgyOTlDMjkuNzg4MSAyMy42NTk1IDMwIDIzLjMxNDcgMzAgMjIuOTM3OFYxMC4wMDk3QzMwIDkuMjYzOTggMjkuMjEzMyA4Ljc4MDYyIDI4LjU0ODEgOS4xMTc2MUwxNy44MjA4IDE0LjU1MjFDMTcuNDg0NiAxNC43MjI1IDE3LjI3MjcgMTUuMDY3MyAxNy4yNzI3IDE1LjQ0NDJWMjguMzcyM0MxNy4yNzI3IDI5LjExOCAxOC4wNTk1IDI5LjYwMTQgMTguNzI0NyAyOS4yNjQ0TDI5LjQ1MTkgMjMuODI5OVoiIGZpbGw9IiMzNDM3NDEiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNi40NTE5IDEyLjM2MjFDMTYuMTY3OCAxMi41MDYgMTUuODMyMiAxMi41MDYgMTUuNTQ4MSAxMi4zNjIxTDUuMzM0MDMgNy4xODc1OEM0LjYwMzI2IDYuODE3MzcgNC42MDMyNiA1Ljc3MzY4IDUuMzM0MDMgNS40MDM0N0wxNS41NDgxIDAuMjI4OTQ1QzE1LjgzMjIgMC4wODUwMjEgMTYuMTY3OCAwLjA4NTAyMTMgMTYuNDUxOSAwLjIyODk0NkwyNi42NjYgNS40MDM0N0MyNy4zOTY4IDUuNzczNjggMjcuMzk2NyA2LjgxNzM3IDI2LjY2NiA3LjE4NzU4TDE2LjQ1MTkgMTIuMzYyMVoiIGZpbGw9IiMxQkE5RjUiLz4KPHBhdGggZD0iTTIwLjU3MTQgMTguMjg1N0gzMlYyNi4zMDY3QzMyIDI3LjcxMTcgMzEuMjYyOCAyOS4wMTM3IDMwLjA1OCAyOS43MzY2TDI2LjI4NTcgMzJMMjIuNTEzNCAyOS43MzY2QzIxLjMwODYgMjkuMDEzNyAyMC41NzE0IDI3LjcxMTcgMjAuNTcxNCAyNi4zMDY3VjE4LjI4NTdaIiBmaWxsPSIjRkE3NDRFIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMjI0XzIxMjMxOSI+CjxyZWN0IHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K"},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(45),i=function(){};t.default=function(e,t,n){if(!o.isClient)return[t,i,i];if(!e)throw new Error("useLocalStorage key may not be falsy");var r=n?n.raw?function(e){return e}:n.deserializer:JSON.parse,s=a.useState((function(){try{var a=n?n.raw?String:n.serializer:JSON.stringify,o=localStorage.getItem(e);return null!==o?r(o):(t&&localStorage.setItem(e,a(t)),t)}catch(e){return t}})),c=s[0],l=s[1],u=a.useCallback((function(t){try{var a="function"==typeof t?t(c):t;if(void 0===a)return;var o;o=n?n.raw?"string"==typeof a?a:JSON.stringify(a):n.serializer?n.serializer(a):JSON.stringify(a):JSON.stringify(a),localStorage.setItem(e,o),l(r(o))}catch(e){}}),[e,l]),d=a.useCallback((function(){try{localStorage.removeItem(e),l(void 0)}catch(e){}}),[e,l]);return[c,u,d]}},73:function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var a,o,i;if(Array.isArray(t)){if((a=t.length)!=n.length)return!1;for(o=a;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((a=(i=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=a;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=a;0!=o--;){var r=i[o];if(!("_owner"===r&&t.$$typeof||e(t[r],n[r])))return!1}return!0}return t!=t&&n!=n}},74:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),o=n(1),i=a.__importDefault(n(75));t.default=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var a=i.default(e,t),r=a[0],s=a[1],c=a[2];return o.useEffect(c,n),[r,s]}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=function(e,t){void 0===t&&(t=0);var n=a.useRef(!1),o=a.useRef(),i=a.useRef(e),r=a.useCallback((function(){return n.current}),[]),s=a.useCallback((function(){n.current=!1,o.current&&clearTimeout(o.current),o.current=setTimeout((function(){n.current=!0,i.current()}),t)}),[t]),c=a.useCallback((function(){n.current=null,o.current&&clearTimeout(o.current)}),[]);return a.useEffect((function(){i.current=e}),[e]),a.useEffect((function(){return s(),c}),[t]),[r,c,s]}},76:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),o=n(45),i=a.__importDefault(n(77));t.default=function(e,t){i.default(e,t,o.isDeepEqual)}},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=function(e,t,n){var o=a.useRef(void 0);o.current&&n(t,o.current)||(o.current=t),a.useEffect(e,o.current)}},79:function(e,t,n){"use strict";n.r(t),n.d(t,"CloudDefendRouter",(function(){return ue})),n.d(t,"default",(function(){return ue}));var a=n(3),o=n.n(a),i=n(1),r=n.n(i),s=n(21),c=n(24),l=n(22),u=n(30);const d={services:{}},j=Object(i.createContext)(d);var g=n(76),p=n.n(g),b=n(0);const f=({children:e,component:t,render:n,...a})=>{const s=Object(i.useMemo)((()=>{if(t)return e=>Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(M,null),Object(b.jsx)(t,e))}),[t]);if(s)return Object(b.jsx)(c.Route,o()({},a,{component:s}));if(n||"function"==typeof e){const t="function"==typeof e?e:n;return Object(b.jsx)(c.Route,o()({},a,{render:e=>Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(M,null),t(e))}))}return Object(b.jsx)(c.Route,a,Object(b.jsx)(M,null),e)},M=()=>{const{executionContext:e}=Object(i.useContext)(j).services,t=Object(c.useRouteMatch)();return function(e,t){p()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},x=({legacySwitch:e=!0,children:t})=>{const n=Object(c.useRouteMatch)();return e?Object(b.jsx)(c.Switch,null,t):Object(b.jsx)(u.Routes,null,i.Children.map(t,(e=>{if(r.a.isValidElement(e)&&e.type===f){var a;const o=Object(l.replace)(null==e?void 0:e.props.path,n.url+"/",""),i="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(b.jsx)(u.Route,{path:o,element:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(M,null),(null==e||null===(a=e.props)||void 0===a?void 0:a.component)&&Object(b.jsx)(e.props.component,null)||i&&i()||t)})}return e})))};var O=n(2);const y=r.a.createContext(void 0);var m=n(4),I=n(25),D=n(74),v=n.n(D),k=n(7);const N=({title:e})=>Object(b.jsx)(m.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(b.jsx)(m.EuiFlexItem,{grow:!1},Object(b.jsx)(m.EuiTitle,null,Object(b.jsx)("h1",null,e))));var T=n(8),h=n(34);const z=()=>{const{application:e}=Object(h.a)().services;return Object(b.jsx)(m.EuiPageSection,{color:"danger",alignment:"center"},Object(b.jsx)(m.EuiEmptyPrompt,{iconType:"warning",title:Object(b.jsx)("h2",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.subscriptionNotAllowed.promptTitle",defaultMessage:"Upgrade for subscription features"})),body:Object(b.jsx)("p",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.subscriptionNotAllowed.promptDescription",defaultMessage:"To use these cloud security features, you must {link}.",values:{link:Object(b.jsx)(m.EuiLink,{href:e.getUrlForApp("management",{path:"stack/license_management/home"})},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.subscriptionNotAllowed.promptLinkText",defaultMessage:"start a trial or upgrade your subscription"}))}}))}))};var C=n(13),E=n(5);var _=n(12),L=n(11),S=n(23),w=n(10);const P=()=>{const{http:e}=Object(h.a)().services,t=(()=>{const{http:e}=Object(h.a)().services;return Object(s.useQuery)(["integrations"],(()=>e.get(w.epmRouteService.getInfoPath(E.c))))})();if(!t.isSuccess)return{addIntegrationLink:void 0,docsLink:"https://www.elastic.co/guide/index.html"};const n=S.pagePathGetters.add_integration_to_policy({integration:E.c,pkgkey:Object(S.pkgKeyFromPackageInfo)({name:t.data.item.name,version:t.data.item.version})}).join(""),a=S.pagePathGetters.integration_details_overview({integration:E.c,pkgkey:Object(S.pkgKeyFromPackageInfo)({name:t.data.item.name,version:t.data.item.version})}).join("");return{addIntegrationLink:e.basePath.prepend(n),docsLink:e.basePath.prepend(a)}};var A=n(71),F=n.n(A);const G=e=>{var t,n,a;return!!(null!=e&&e.body&&null!=e&&null!==(t=e.body)&&void 0!==t&&t.error&&null!=e&&null!==(n=e.body)&&void 0!==n&&n.message&&null!=e&&null!==(a=e.body)&&void 0!==a&&a.statusCode)},R=()=>Object(b.jsx)(L.a,{"data-test-subj":"cloud_defend_page_loading"},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.loadingDescription",defaultMessage:"Loading..."})),Y=e=>Object(b.jsx)(_.a,null,Object(b.jsx)(m.EuiEmptyPrompt,{color:"danger",iconType:"warning","data-test-subj":"cloud_defend_page_error",title:Object(b.jsx)("h2",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.errorRenderer.errorTitle",defaultMessage:"We couldn't fetch your cloud defend data"})),body:G(e)?Object(b.jsx)("p",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.errorRenderer.errorDescription",defaultMessage:"{error} {statusCode}: {body}",values:{error:e.body.error,statusCode:e.body.statusCode,body:e.body.message}})):void 0})),Q=e=>Object(b.jsx)(_.a,null,Object(b.jsx)(T.NoDataPage,{"data-test-subj":"cloud_defend_page_no_data",pageTitle:k.i18n.translate("xpack.cloudDefend.cloudDefendPage.defaultNoDataConfig.pageTitle",{defaultMessage:"No data found"}),solution:k.i18n.translate("xpack.cloudDefend.cloudDefendPage.defaultNoDataConfig.solutionNameLabel",{defaultMessage:"Defend for containers"}),docsLink:e,logo:"logoSecurity",actions:{}})),Z=({children:e,query:t,loadingRender:n=R,errorRender:a=Y,noDataRenderer:o=Q})=>{const c=(()=>{const{licensing:e}=Object(h.a)().services,{isCloudEnabled:t}=Object(i.useContext)(C.a);return Object(s.useQuery)(["cloud_defend_subscription_query_key"],(async()=>{const n=await e.refresh();return((e,t)=>!!e||!!t&&"valid"===t.check(E.d,"enterprise").state)(t,n)}))})(),l=(()=>{const{http:e}=Object(h.a)().services;return Object(s.useQuery)(["cloud_defend_status_key"],(()=>e.get(E.f,{version:E.a})))})(),{addIntegrationLink:u,docsLink:d}=P();return Object(b.jsx)(r.a.Fragment,null,c.isError?Y(c.error):c.isLoading?R():c.data?l.isError?Y(l.error):l.isLoading?R():"not-installed"===l.data.status?(({addIntegrationLink:e,docsLink:t})=>Object(b.jsx)(_.a,null,Object(b.jsx)(m.EuiEmptyPrompt,{"data-test-subj":"cloud_defend_page_package_not_installed",icon:Object(b.jsx)(m.EuiImage,{size:"m",margin:"m",src:F.a,alt:"",role:"presentation"}),title:Object(b.jsx)("h2",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.packageNotInstalledRenderer.promptTitle",defaultMessage:"Detect container drift and block malicious behavior at the source!"})),layout:"horizontal",color:"plain",body:Object(b.jsx)("p",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.packageNotInstalledRenderer.promptDescription",defaultMessage:"Add the Defend for containers (D4C) integration to begin. {learnMore}.",values:{learnMore:Object(b.jsx)(m.EuiLink,{href:t},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.packageNotInstalledRenderer.learnMoreTitle",defaultMessage:"Learn more about Defend for containers (D4C)"}))}})),actions:Object(b.jsx)(m.EuiFlexGroup,null,Object(b.jsx)(m.EuiFlexItem,{grow:!1},Object(b.jsx)(m.EuiButton,{color:"primary",fill:!0,href:e},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.cloudDefendPage.packageNotInstalledRenderer.addCloudDefendmIntegrationButtonTitle",defaultMessage:"Add D4C Integration"}))))})))({addIntegrationLink:u,docsLink:d}):t?t.isError?a(t.error):t.isLoading?n():t.data?e:o(d):e:Object(b.jsx)(_.a,{"data-test-subj":"cloud_defend_page_subscription_not_allowed"},Object(b.jsx)(z,null)))};var U=n(28),W=n.n(U);const B=({timestamp:e})=>{const t=Object(T.useUiSetting)("dateFormat"),n=Object(m.formatDate)(e,t);return Object(b.jsx)(m.EuiToolTip,{position:"top",content:n},Object(b.jsx)("span",null,W()(e).fromNow()))},J=({name:e,id:t})=>{const{http:n}=Object(h.a)().services,[a,o]=S.pagePathGetters.policy_details({policyId:t});return Object(b.jsx)(m.EuiLink,{href:n.basePath.prepend([a,o].join(""))},e)},V=({packageName:e,policyId:t,packagePolicyId:n})=>{const a=S.pagePathGetters.edit_integration({packagePolicyId:n,policyId:t}).join("");return Object(b.jsx)(m.EuiLink,{href:a},e)},H=[{field:"package_policy.name",name:k.i18n.translate("xpack.cloudDefend.policies.policiesTable.integrationNameColumnTitle",{defaultMessage:"Integration Name"}),render:(e,t)=>Object(b.jsx)(V,{packageName:e,packagePolicyId:t.package_policy.id,policyId:t.package_policy.policy_ids[0]}),truncateText:!0,sortable:!0,"data-test-subj":"policies-table-column-integration-name"},{field:"agent_policy.name",name:k.i18n.translate("xpack.cloudDefend.policies.policiesTable.agentPolicyColumnTitle",{defaultMessage:"Agent Policy"}),render:(e,t)=>Object(b.jsx)(J,{name:e,id:t.agent_policy.id}),truncateText:!0,"data-test-subj":"policies-table-column-agent-policy"},{field:"agent_policy.agents",name:k.i18n.translate("xpack.cloudDefend.policies.policiesTable.numberOfAgentsColumnTitle",{defaultMessage:"Number of Agents"}),truncateText:!0,"data-test-subj":"policies-table-column-number-of-agents"},{field:"package_policy.created_by",name:k.i18n.translate("xpack.cloudDefend.policies.policiesTable.createdByColumnTitle",{defaultMessage:"Created by"}),dataType:"string",truncateText:!0,sortable:!0,"data-test-subj":"policies-table-column-created-by"},{field:"package_policy.created_at",name:k.i18n.translate("xpack.cloudDefend.policies.policiesTable.createdAtColumnTitle",{defaultMessage:"Created at"}),dataType:"date",truncateText:!0,render:e=>Object(b.jsx)(B,{timestamp:e}),sortable:!0,"data-test-subj":"policies-table-column-created-at"}],K=({policies:e,pageIndex:t,pageSize:n,totalItemCount:a,loading:o,error:i,setQuery:r,noItemsMessage:s,sorting:c,...l})=>{const u={pageIndex:Math.max(t-1,0),pageSize:n,totalItemCount:a};return Object(b.jsx)(m.EuiBasicTable,{"data-test-subj":l["data-test-subj"],items:e,columns:H,itemId:e=>[e.agent_policy.id,e.package_policy.id].join("/"),pagination:u,onChange:({page:e,sort:t})=>{r({page:{...e,index:e.index+1},sort:t})},tableLayout:"fixed",loading:o,noItemsMessage:s,error:i,sorting:c})};var X=n(37),q=n(40),$=n(72),ee=n.n($);const te=()=>{const{addIntegrationLink:e}=P();return Object(b.jsx)(m.EuiButton,{"data-test-subj":"cloud_defend_add_integration",fill:!0,iconType:"plusInCircle",href:e},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.policies.policiesPageHeader.addIntegrationButtonLabel",defaultMessage:"Add Integration"}))},ne=({name:e})=>Object(b.jsx)("div",null,Object(b.jsx)(m.EuiSpacer,{size:"l"}),Object(b.jsx)(m.EuiText,null,Object(b.jsx)("strong",null,Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.policies.policyEmptyState.integrationsNotFoundTitle",defaultMessage:"No policies found"}),e&&Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.policies.policyEmptyState.integrationsNotFoundForNameTitle",defaultMessage:' for "{name}"',values:{name:e}}))),Object(b.jsx)(m.EuiSpacer,{size:"s"}),Object(b.jsx)(m.EuiText,null,Object(b.jsx)(m.EuiTextColor,{color:"subdued"},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.policies.policyEmptyState.integrationsNotFoundWithFiltersTitle",defaultMessage:"We weren't able to find any policies with the above filters."}))),Object(b.jsx)(m.EuiSpacer,{size:"l"})),ae=({pageCount:e,totalCount:t})=>Object(b.jsx)(m.EuiText,{size:"xs",style:{marginLeft:8}},Object(b.jsx)(m.EuiTextColor,{color:"subdued"},Object(b.jsx)(I.FormattedMessage,{id:"xpack.cloudDefend.policies.totalIntegrationsCountMessage",defaultMessage:"Showing {pageCount} of {totalCount, plural, one {# integration} other {# integrations}}",values:{pageCount:e,totalCount:t}}))),oe=({onSearch:e,isLoading:t})=>{const[n,a]=Object(i.useState)("");return v()((()=>e(n)),300,[n]),Object(b.jsx)(m.EuiFlexGroup,null,Object(b.jsx)(m.EuiFlexItem,{grow:!0,style:{alignItems:"flex-end"}},Object(b.jsx)(m.EuiFieldSearch,{fullWidth:!0,onSearch:a,isLoading:t,placeholder:k.i18n.translate("xpack.cloudDefend.policies.policySearchField.searchPlaceholder",{defaultMessage:"Search integration name"}),incremental:!0})))},ie=()=>{var e,t,n;const{pageSize:a,setPageSize:o}=(e=>{const[t,n]=ee()(e,q.a);let a=q.a;return t&&(a=t),{pageSize:a,setPageSize:n}})(q.c),[r,c]=Object(i.useState)({name:"",page:1,perPage:a,sortField:"package_policy.name",sortOrder:"asc"}),l=(({name:e,perPage:t,page:n,sortField:a,sortOrder:o})=>{const{http:i}=Object(h.a)().services,r={policy_name:e,per_page:t,page:n,sort_field:a,sort_order:o};return Object(s.useQuery)(["cloud_defend_policies",r],(()=>i.get(E.e,{version:E.a,query:r})),{keepPreviousData:!0})})(r),u=(null===(e=l.data)||void 0===e?void 0:e.total)||0;return Object(b.jsx)(Z,null,Object(b.jsx)(m.EuiPageHeader,{"data-test-subj":"policies-page-header",pageTitle:Object(b.jsx)(N,{title:k.i18n.translate("xpack.cloudDefend.policies.policiesPageHeader",{defaultMessage:"Defend for containers (D4C)"})}),rightSideItems:[Object(b.jsx)(te,null)],bottomBorder:!0}),Object(b.jsx)(m.EuiSpacer,null),Object(b.jsx)(oe,{isLoading:l.isFetching,onSearch:e=>c((t=>({...t,name:e})))}),Object(b.jsx)(m.EuiSpacer,null),Object(b.jsx)(ae,{pageCount:((null===(t=l.data)||void 0===t?void 0:t.items)||[]).length,totalCount:u}),Object(b.jsx)(m.EuiSpacer,{size:"s"}),Object(b.jsx)(K,{policies:(null===(n=l.data)||void 0===n?void 0:n.items)||[],"data-test-subj":"cloud_defend_policies_table",error:l.error?Object(X.a)(l.error):void 0,loading:l.isFetching,pageIndex:r.page,pageSize:a||r.perPage,sorting:{sort:{field:r.sortField,direction:r.sortOrder},allowNeutralSort:!1},totalItemCount:u,setQuery:({page:e,sort:t})=>{o(e.size),c((n=>({...n,page:e.index,perPage:e.size,sortField:(null==t?void 0:t.field)||n.sortField,sortOrder:(null==t?void 0:t.direction)||n.sortOrder})))},noItemsMessage:l.isSuccess&&!l.data.total?Object(b.jsx)(ne,{name:r.name}):void 0}))};var re=n(29);const se=Object.fromEntries(Object.values(O.b).map((({id:e})=>[e,!0]))),ce=({id:e,children:t,component:n,disabled:a=!1,...o})=>{var r;const s=null===(r=Object(i.useContext)(y))||void 0===r?void 0:r.getSpyRouteComponent();if(a)return null;const c={...o,...n&&{render:t=>Object(b.jsx)(re.TrackApplicationView,{viewId:e},se[e]&&s&&Object(b.jsx)(s,{pageName:e}),Object(b.jsx)(n,t))}};return Object(b.jsx)(f,c,t)},le=new s.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),ue=({securitySolutionContext:e})=>{const t=Object(b.jsx)(s.QueryClientProvider,{client:le},Object(b.jsx)(x,null,Object(b.jsx)(ce,o()({},O.b.policies,{component:ie})),Object(b.jsx)(f,null,Object(b.jsx)(c.Redirect,{to:O.b.policies.path}))));return e?Object(b.jsx)(y.Provider,{value:e},t):Object(b.jsx)(r.a.Fragment,null,t)}}}]);