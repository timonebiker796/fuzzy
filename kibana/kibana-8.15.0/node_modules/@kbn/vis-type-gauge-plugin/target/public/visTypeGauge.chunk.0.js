(window.visTypeGauge_bundle_jsonpfunction=window.visTypeGauge_bundle_jsonpfunction||[]).push([[0],{25:function(e,t,n){"use strict";n.r(t),n.d(t,"convertGaugeToLens",(function(){return u})),n.d(t,"convertGoalToLens",(function(){return d}));var r=n(23),a=n(7),o=n(24),s=n(13),c=n(8);const l=(e,t,n,{metricAccessor:r,minAccessor:a,maxAccessor:o})=>({...Object(c.a)(t.gauge),layerId:e,layerType:"data",palette:n,metricAccessor:r,minAccessor:a,maxAccessor:o,colorMode:n?"palette":"none"}),u=async(e,t)=>{var n;if(!t)return null;const c=Object(s.a)(),u=await Object(a.getDataViewByIndexPatternId)(null===(n=e.data.indexPattern)||void 0===n?void 0:n.id,c);if(!u)return null;const{getColumnsFromVis:i,createStaticValueColumn:d,getPalette:m,getPercentageModeConfig:g}=await a.convertToLensModule,p=g(e.params.gauge,!1),y=i(e,t,u,{unsupported:["group"]},{dropEmptyRowsInDateHistogram:!0,...p});if(null===y)return null;const[f]=y;if(f.metrics.length>1||f.buckets.all.length)return null;if(f.metrics[0]){const e=f.columns.find((({columnId:e})=>e===f.metrics[0]));if("number"!==(null==e?void 0:e.dataType))return null}const b=Object(r.v4)(),x=u.id,v=f.metrics[0],{min:I,max:w,isPercentageMode:A}=p,P=d(A?0:I),T=d(A?1:w);return{type:"lnsGauge",layers:[{indexPatternId:x,layerId:b,columns:[...f.columns,P,T].map(o.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:l(b,e.params,m(e.params.gauge,p,!0),{metricAccessor:v,minAccessor:P.columnId,maxAccessor:T.columnId}),indexPatternIds:[x]}},i=(e,{gauge:t},n,{metrics:r,buckets:a,maxAccessor:o,columnsWithoutReferenced:s,bucketCollapseFn:c})=>{const[l]=r,[u]=a.all,i=c?Object.keys(c).find((e=>c[e].includes(u))):void 0;return{layerId:e,layerType:"data",palette:n,metricAccessor:l,breakdownByAccessor:u,maxAccessor:o,showBar:Boolean(o),collapseFn:i,subtitle:t.labels.show&&t.style.subText?t.style.subText:void 0}},d=async(e,t)=>{var n;if(!t)return null;const c=Object(s.a)(),l=await Object(a.getDataViewByIndexPatternId)(null===(n=e.data.indexPattern)||void 0===n?void 0:n.id,c);if(!l)return null;const{getColumnsFromVis:u,getPalette:d,getPercentageModeConfig:m,createStaticValueColumn:g}=await a.convertToLensModule,p=m(e.params.gauge,!1),y=u(e,t,l,{splits:["group"]},{dropEmptyRowsInDateHistogram:!0,...p});if(null===y)return null;const[f]=y;if(f.metrics.length>1||f.buckets.all.length>1)return null;if(f.metrics[0]){const e=f.columns.find((({columnId:e})=>e===f.metrics[0]));if("number"!==(null==e?void 0:e.dataType))return null}const{isPercentageMode:b,max:x}=p,v=g(b?1:x),I=[...f.columns,v],w=Object(r.v4)(),A=l.id;return{type:"lnsMetric",layers:[{indexPatternId:A,layerId:w,columns:I.map(o.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:i(w,e.params,d(e.params.gauge,p,!0),{...f,maxAccessor:v.columnId}),indexPatternIds:[A]}}}}]);