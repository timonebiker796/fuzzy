/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[11],{119:function(e,t,a){"use strict";a.r(t),a.d(t,"ObservabilityAlertSearchBar",(function(){return m}));var r=a(39),l=a(2),n=a.n(l),u=a(1),s=a(11),i=a(44);const o=[{id:i.c.status,label:i.c.label,value:i.c.query,"data-test-subj":"alert-status-filter-show-all-button"},{id:i.a.status,label:i.a.label,value:i.a.query,"data-test-subj":"alert-status-filter-active-button"},{id:i.f.status,label:i.f.label,value:i.f.query,"data-test-subj":"alert-status-filter-recovered-button"},{id:i.g.status,label:i.g.label,value:i.g.query,"data-test-subj":"alert-status-filter-untracked-button"}];function c({status:e,onChange:t}){return n.a.createElement(r.EuiButtonGroup,{legend:u.i18n.translate("xpack.observability.alerts.alertStatusFilter.legend",{defaultMessage:"Filter by"}),color:"primary",options:o,idSelected:e,onChange:e=>t(e)})}var b=a(19),d=a(46);const g=e=>i.b[e]?[{query:i.b[e],language:"kuery"}]:[],f=u.i18n.translate("xpack.observability.alerts.searchBar.invalidQueryTitle",{defaultMessage:"Invalid query string"}),y=[];function m({appName:e,defaultSearchQueries:t=i.d,onEsQueryChange:a,onKueryChange:u,onRangeFromChange:o,onRangeToChange:m,onStatusChange:v,onFiltersChange:E,showFilterBar:h=!1,filters:j=y,savedQuery:p,setSavedQuery:C,kuery:F,rangeFrom:S,rangeTo:k,services:{AlertsSearchBar:O,timeFilterService:Q,useToasts:q,uiSettings:w},status:x}){const B=q(),I=Object(l.useCallback)((()=>C?C(void 0):null),[C]),T=Object(l.useCallback)((e=>{try{a(Object(d.a)({timeRange:{to:k,from:S},kuery:F,queries:[...g(e),...t],config:Object(s.getEsQueryConfig)(w)}))}catch(e){B.addError(e,{title:f}),u(i.e)}}),[a,k,S,F,t,w,B,u]);Object(l.useEffect)((()=>{T(x)}),[T,x]);const R=Object(l.useCallback)((()=>{try{a(Object(d.a)({timeRange:{to:k,from:S},kuery:F,queries:[...g(x),...t],filters:j,config:Object(s.getEsQueryConfig)(w)}))}catch(e){B.addError(e,{title:f}),u(i.e)}}),[t,j,F,a,u,S,k,x,w,B]);Object(l.useEffect)((()=>{R()}),[R]);const _=Object(l.useCallback)((e=>{I(),null==E||E(e)}),[I,E]);return n.a.createElement(r.EuiFlexGroup,{direction:"column",gutterSize:"s"},n.a.createElement(r.EuiFlexItem,null,n.a.createElement(O,{appName:e,featureIds:b.d,rangeFrom:S,rangeTo:k,showFilterBar:h,filters:j,onFiltersUpdated:_,savedQuery:p,onSavedQueryUpdated:C,onClearSavedQuery:I,query:F,onQuerySubmit:({dateRange:e,query:t},a)=>{a?(I(),u(null!=t?t:""),Q.setTime(e),o(e.from),m(e.to)):R()}})),n.a.createElement(r.EuiFlexItem,null,n.a.createElement(r.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(c,{status:x,onChange:v})))))}t.default=m}}]);