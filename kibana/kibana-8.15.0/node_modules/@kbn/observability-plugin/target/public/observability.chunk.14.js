/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[14],{146:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return A}));var s=a(2),l=a.n(s),i=a(39),r=a(1);const n=r.i18n.translate("xpack.observability.ux.coreVitals.noData",{defaultMessage:"No data is available."}),o=r.i18n.translate("xpack.observability.ux.coreVitals.lcp",{defaultMessage:"Largest contentful paint"}),c=r.i18n.translate("xpack.observability.ux.coreVitals.inp",{defaultMessage:"Interaction to next paint"}),u=r.i18n.translate("xpack.observability.ux.coreVitals.cls",{defaultMessage:"Cumulative layout shift"}),d=r.i18n.translate("xpack.observability.ux.coreVitals.poor",{defaultMessage:"a poor"}),p=r.i18n.translate("xpack.observability.ux.coreVitals.good",{defaultMessage:"a good"}),b=r.i18n.translate("xpack.observability.ux.coreVitals.average",{defaultMessage:"an average"}),m=r.i18n.translate("xpack.observability.ux.coreVitals.legends.poor",{defaultMessage:"Poor"}),g=r.i18n.translate("xpack.observability.ux.coreVitals.legends.good",{defaultMessage:"Good"}),x=r.i18n.translate("xpack.observability.ux.coreVitals.legends.needsImprovement",{defaultMessage:"Needs improvement"}),v=r.i18n.translate("xpack.observability.ux.coreVitals.more",{defaultMessage:"more"}),E=r.i18n.translate("xpack.observability.ux.coreVitals.less",{defaultMessage:"less"}),h=r.i18n.translate("xpack.observability.ux.coreVitals.is",{defaultMessage:"is"}),f=r.i18n.translate("xpack.observability.ux.coreVitals.takes",{defaultMessage:"takes"}),y=r.i18n.translate("xpack.observability.ux.coreVitals.lcp.help",{defaultMessage:"Largest contentful paint measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading."}),k=r.i18n.translate("xpack.observability.ux.coreVitals.inp.help",{defaultMessage:"INP assesses responsiveness using data from the Event Timing API. When an interaction causes a page to become unresponsive, that is a poor user experience. INP observes the latency of all interactions a user has made with the page, and reports a single value which all (or nearly all) interactions were below. A low INP means the page was consistently able to respond quickly to all—or the vast majority—of user interactions."}),M=r.i18n.translate("xpack.observability.ux.coreVitals.cls.help",{defaultMessage:"Cumulative Layout Shift (CLS): measures visual stability. To provide a good user experience, pages should maintain a CLS of less than 0.1."});var w=a(69),C=a.n(w),V=a(40),S=a(74),I=a(18);const L=C()(i.EuiHealth).withConfig({displayName:"PaletteLegend",componentId:"sc-qpt2wj-0"})(["&:hover{cursor:pointer;text-decoration:underline;}"]),T=C.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-qpt2wj-1"})(["&:hover{background-color:",";}"],(e=>e.darkMode?S.euiDarkVars.euiColorLightestShade:S.euiLightVars.euiColorLightestShade));function F({ranks:e,title:t,onItemHover:a,thresholds:s,isCls:r}){const n=Object(I.useDarkMode)(!1),o=Object(i.euiPaletteForStatus)(3),c=[g,x,m];return l.a.createElement(i.EuiFlexGroup,{responsive:!1,gutterSize:"s"},o.map(((o,u)=>l.a.createElement(i.EuiFlexItem,{key:u,grow:!1,onMouseEnter:()=>{a(u)},onMouseLeave:()=>{a(null)}},l.a.createElement(i.EuiToolTip,{content:N(s,u,t,e[u],r),position:"bottom"},l.a.createElement(T,{darkMode:n},l.a.createElement(L,{color:o},l.a.createElement(i.EuiText,{size:"xs","data-test-subj":`${c[u]}-${null==e?void 0:e[u]}`},l.a.createElement(V.FormattedMessage,{id:"xpack.observability.ux.coreVitals.paletteLegend.rankPercentage",defaultMessage:"{labelsInd} ({ranksInd}%)",values:{labelsInd:c[u],ranksInd:null==e?void 0:e[u]}})))))))))}const P=C.a.div.withConfig({displayName:"ColoredSpan",componentId:"sc-bzugtk-0"})(["height:16px;width:100%;cursor:pointer;"]),j=(e,t,a,s)=>{let l=0===e||100===s,i=2===e||100===s;100===s&&(l=!0,i=!0);const r={backgroundColor:a,opacity:t?.3:1};let n="";return l&&(n="4px 0 0 4px"),i&&(n="0 4px 4px 0"),l&&i&&(n="4px"),r.borderRadius=n,r};function z({hexCode:e,inFocus:t,percentage:a,tooltip:s,position:r}){const n=j(r,t,e,a);return l.a.createElement(i.EuiFlexItem,{key:e,grow:!1,style:{width:a+"%"}},l.a.createElement(i.EuiToolTip,{content:s},l.a.createElement(P,{style:n})))}function N(e,t,a,s,l){const i=0===t,n=2===t,o=!i&&!n;return r.i18n.translate("xpack.observability.ux.dashboard.webVitals.palette.tooltip",{defaultMessage:"{percentage} % of users have {exp} experience because the {title} {isOrTakes} {moreOrLess} than {value}{averageMessage}.",values:{percentage:s,isOrTakes:l?h:f,title:null==a?void 0:a.toLowerCase(),exp:i?p:n?d:b,moreOrLess:n||o?v:E,value:i||o?e.good:e.bad,averageMessage:o?r.i18n.translate("xpack.observability.ux.coreVitals.averageMessage",{defaultMessage:" and less than {bad}",values:{bad:e.bad}}):""}})}function O({loading:e,title:t,value:a,thresholds:r,ranks:o=[100,0,0],isCls:c,helpLabel:u,dataTestSubj:d}){const p=Object(i.euiPaletteForStatus)(3),[b,m]=Object(s.useState)(null),g=o.indexOf(Math.max(...o));return a||e?l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiStat,{"data-test-subj":d,"aria-label":`${t} ${a}`,titleSize:"s",title:null!=a?a:"",description:l.a.createElement(l.a.Fragment,null,t,l.a.createElement(i.EuiIconTip,{content:u,type:"questionInCircle"})),titleColor:p[g],isLoading:e}),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(i.EuiFlexGroup,{gutterSize:"none",alignItems:"flexStart",style:{maxWidth:350},responsive:!1},p.map(((e,a)=>l.a.createElement(z,{hexCode:e,key:e,position:a,inFocus:b!==a&&null!==b,percentage:o[a],tooltip:N(r,a,t,o[a],c)})))),l.a.createElement(i.EuiSpacer,{size:"s"}),l.a.createElement(F,{ranks:o,thresholds:r,title:t,onItemHover:e=>{m(e)},isCls:c})):l.a.createElement(i.EuiCard,{title:t,isDisabled:!0,description:n})}const W=r.i18n.translate("xpack.observability.ux.coreWebVitals",{defaultMessage:"Core web vitals"}),B=r.i18n.translate("xpack.observability.ux.coreWebVitals.browser.support",{defaultMessage:"browser support for core web vitals"});function q({loading:e,coreVitalPages:t,totalPageViews:a=0,displayTrafficMetric:n}){const[o,c]=Object(s.useState)(!1),[u,d]=Object(s.useState)(!1),p=r.i18n.translate("xpack.observability.ux.dashboard.webCoreVitals.helpAriaLabel",{defaultMessage:"help"});return l.a.createElement(i.EuiFlexGroup,{gutterSize:"none"},l.a.createElement(i.EuiFlexItem,null,l.a.createElement(i.EuiTitle,{size:"xs"},l.a.createElement("h3",null,W,l.a.createElement(i.EuiPopover,{isOpen:o,button:l.a.createElement(i.EuiButtonIcon,{"data-test-subj":"o11yWebCoreVitalsTitleButton","aria-label":p,onClick:()=>c(!0),color:"text",iconType:"questionInCircle"}),closePopover:()=>c(!1)},l.a.createElement("div",null,l.a.createElement(i.EuiText,null,l.a.createElement(V.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.help",defaultMessage:"Learn more about"})," ",l.a.createElement(i.EuiLink,{"data-test-subj":"o11yWebCoreVitalsTitleLink",href:"https://web.dev/vitals/",external:!0,target:"_blank"},W))))))),n&&a>0&&l.a.createElement(i.EuiFlexItem,{grow:!1},e?l.a.createElement(i.EuiLoadingSpinner,null):l.a.createElement(i.EuiText,{size:"s"},l.a.createElement(V.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.traffic",defaultMessage:"{trafficPerc} of the traffic represented",values:{trafficPerc:l.a.createElement("strong",null," ",((t||0)/a*100).toFixed(0),"%")}}),l.a.createElement(i.EuiPopover,{isOpen:u,button:l.a.createElement(i.EuiButtonIcon,{"data-test-subj":"o11yWebCoreVitalsTitleButton","aria-label":p,onClick:()=>d(!0),color:"text",iconType:"questionInCircle"}),closePopover:()=>d(!1)},l.a.createElement("div",null,l.a.createElement(i.EuiText,null,l.a.createElement(V.FormattedMessage,{id:"xpack.observability.ux.dashboard.webCoreVitals.browser.help",defaultMessage:"Learn more about"})," ",l.a.createElement(i.EuiLink,{"data-test-subj":"o11yWebCoreVitalsTitleLink",href:"https://github.com/GoogleChrome/web-vitals#browser-support",external:!0,target:"_blank"},B)))))))}const G=r.i18n.translate("xpack.observability.ux.coreWebVitals.service",{defaultMessage:"Service"}),_=r.i18n.translate("xpack.observability.ux.service.help",{defaultMessage:"The RUM service with the most traffic is selected"});function R({name:e}){return l.a.createElement(l.a.Fragment,null,l.a.createElement(i.EuiText,{size:"s"},G,l.a.createElement(i.EuiIconTip,{color:"text","aria-label":_,type:"questionInCircle",content:_})),l.a.createElement(i.EuiTitle,{size:"s"},l.a.createElement("h3",null,e)))}function D(e){return null==e?null:function(e,t="MicroSec"){const a=Number(null!=e?e:0)/("MicroSec"===t?1e3:1);return a<1e3?a.toFixed(0)+" ms":(a/1e3).toFixed(2)+" s"}(e,"ms")}const $={LCP:{good:"2.5s",bad:"4.0s"},INP:{good:"200ms",bad:"500ms"},CLS:{good:"0.1",bad:"0.25"}};function A({data:e,loading:t,displayServiceName:a,serviceName:l,totalPageViews:r,displayTrafficMetric:n=!1}){var d;const{lcp:p,lcpRanks:b,inp:m,inpRanks:g,cls:x,clsRanks:v,coreVitalPages:E}=e||{};return s.createElement(s.Fragment,null,s.createElement(q,{loading:t,coreVitalPages:E,totalPageViews:r,displayTrafficMetric:n}),s.createElement(i.EuiSpacer,{size:"s"}),a&&s.createElement(R,{name:l}),s.createElement(i.EuiSpacer,{size:"s"}),s.createElement(i.EuiFlexGroup,{gutterSize:"xl",justifyContent:"spaceBetween",wrap:!0},s.createElement(i.EuiFlexItem,{style:{flexBasis:380}},s.createElement(O,{title:o,value:D(p),ranks:b,loading:t,thresholds:$.LCP,helpLabel:y,dataTestSubj:"lcp-core-vital"})),s.createElement(i.EuiFlexItem,{style:{flexBasis:380}},s.createElement(O,{title:c,value:D(m),ranks:g,loading:t,thresholds:$.INP,helpLabel:k,dataTestSubj:"inp-core-vital"})),s.createElement(i.EuiFlexItem,{style:{flexBasis:380}},s.createElement(O,{title:u,value:null!==(d=null==x?void 0:x.toFixed(3))&&void 0!==d?d:null,ranks:v,loading:t,thresholds:$.CLS,isCls:!0,helpLabel:M,dataTestSubj:"cls-core-vital"}))))}}}]);