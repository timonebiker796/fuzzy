/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[3,7],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var l=a(2),n=a.n(l),r=a(0),s=a(39);function i({alert:e}){return n.a.createElement(n.a.Fragment,null,n.a.createElement(s.EuiSpacer,{size:"s"}),n.a.createElement(s.EuiTitle,{size:"m","data-test-subj":"alertsFlyoutTitle"},n.a.createElement("h2",null,e.fields[r.r])))}},103:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var l=a(2),n=a.n(l),r=a(39),s=a(1),i=a(99),o=a(116);function u({alert:e,rawAlert:t,id:a}){const u=Object(l.useMemo)((()=>({id:"overview","data-test-subj":"overviewTab",name:s.i18n.translate("xpack.observability.alertFlyout.overview",{defaultMessage:"Overview"}),content:n.a.createElement(r.EuiPanel,{hasShadow:!1,"data-test-subj":"overviewTabPanel"},n.a.createElement(o.a,{alert:e,pageId:a}))})),[e,a]),c=Object(l.useMemo)((()=>({id:"metadata","data-test-subj":"metadataTab",name:s.i18n.translate("xpack.observability.alertsFlyout.metadata",{defaultMessage:"Metadata"}),content:n.a.createElement(r.EuiPanel,{hasShadow:!1,"data-test-subj":"metadataTabPanel"},n.a.createElement(i.a,{alert:t}))})),[t]),d=Object(l.useMemo)((()=>[u,c]),[u,c]),[b,m]=Object(l.useState)("overview"),p=Object(l.useCallback)((e=>m(e.id)),[]),y=Object(l.useMemo)((()=>{var e;return null!==(e=d.find((e=>e.id===b)))&&void 0!==e?e:d[0]}),[d,b]);return n.a.createElement(i.d,{tabs:d,selectedTab:y,onTabClick:p,expand:!0,"data-test-subj":"defaultAlertFlyoutTabs"})}},106:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var l=a(2),n=a.n(l),r=a(39),s=a(1),i=a(28),o=a(8);function u({alert:e,isInApp:t}){const{http:{basePath:{prepend:a}}}=Object(i.a)().services,[u,c]=Object(l.useState)();return Object(l.useEffect)((()=>{var t;e.hasBasePath?c(e.link):c(a(null!==(t=e.link)&&void 0!==t?t:""))}),[e.hasBasePath,e.link,a]),n.a.createElement(r.EuiFlyoutFooter,null,n.a.createElement(r.EuiFlexGroup,{justifyContent:"flexEnd"},!e.link||t?null:n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(r.EuiButton,{"data-test-subj":"alertsFlyoutViewInAppButton",fill:!0,href:u},s.i18n.translate("xpack.observability.alertsFlyout.viewInAppButtonText",{defaultMessage:"View in app"}))),n.a.createElement(r.EuiFlexItem,{grow:!1},n.a.createElement(r.EuiButton,{"data-test-subj":"alertsFlyoutAlertDetailsButton",fill:!0,href:a&&a(o.r.observability.alertDetails(e.fields["kibana.alert.uuid"]))},s.i18n.translate("xpack.observability.alertsFlyout.alertsDetailsButtonText",{defaultMessage:"Alert details"})))))}},111:function(e,t,a){"use strict";a.r(t),a.d(t,"AlertsFlyout",(function(){return d}));var l=a(2),n=a.n(l),r=a(39),s=a(0),i=a(102),o=a(103),u=a(106),c=a(101);function d({alert:e,rawAlert:t,alerts:a,isInApp:d=!1,observabilityRuleTypeRegistry:b,onClose:m,selectedAlertId:p}){const y=Object(l.useMemo)((()=>{const e=Object(c.a)(b);return(null!=a?a:[]).map(e)}),[a,b]);let f=e;return f||(f=null==y?void 0:y.find((e=>e.fields[s.E]===p))),f&&t?n.a.createElement(r.EuiFlyout,{className:"oblt__flyout",onClose:m,size:"m","data-test-subj":"alertsFlyout"},n.a.createElement(r.EuiFlyoutHeader,{hasBorder:!0},n.a.createElement(i.a,{alert:f})),n.a.createElement(o.a,{alert:f,rawAlert:t}),n.a.createElement(u.a,{alert:f,isInApp:d})):null}t.default=d},195:function(e,t,a){"use strict";a.r(t),a.d(t,"registerAlertsTableConfiguration",(function(){return Y}));var l=a(91),n=a.n(l),r=a(2),s=a.n(r),i=a(0),o=a(6),u=a(69),c=a.n(u),d=a(39),b=a(1),m=a(79),p=a(37),y=a(73),f=a(31),E=a(8),v=a(28),T=a(101),g=a(33),A=a(117);function x({config:e,observabilityRuleTypeRegistry:t,...a}){const{alert:l,refresh:n,id:i}=a,o=Object(p.useRouteMatch)(E.q),u=Boolean(i===y.SLO_ALERTS_TABLE_ID&&o),{cases:{helpers:{getRuleIdFromEvent:c,canUseCases:x},hooks:{useCasesAddToNewCaseFlyout:j,useCasesAddToExistingCaseModal:C}},http:{basePath:{prepend:k}},triggersActionsUi:w}=Object(v.a)().services,M=Object(r.useMemo)((()=>Object.entries(null!=l?l:{}).reduce(((e,[t,a])=>[...e,{field:t,value:a}]),[])),[l]),I=Object(r.useMemo)((()=>({_id:l._id,_index:l._index})),[l._id,l._index]),O=x([g.observabilityFeatureId]),[F,R]=Object(r.useState)(),_=Object(r.useMemo)((()=>Object(T.a)(t)),[t])(l);Object(r.useEffect)((()=>{const e=_.link;!_.hasBasePath&&k?R(k(null!=e?e:"")):R(e)}),[]);const D=Object(r.useCallback)((()=>{const e=_.link;_.hasBasePath?R(e):R(k(null!=e?e:""))}),[_.link,_.hasBasePath,k]),[S,B]=Object(r.useState)(!1),G=Object(r.useMemo)((()=>{var e,t;return null!=I&&I._id?[{alertId:null!==(e=null==I?void 0:I._id)&&void 0!==e?e:"",index:null!==(t=null==I?void 0:I._index)&&void 0!==t?t:"",type:m.AttachmentType.alert,rule:c({ecs:I,data:null!=M?M:[]})}]:[]}),[I,c,M]),L=Object(r.useCallback)((()=>{n()}),[n]),H=j({onSuccess:L}),P=C({onSuccess:L}),N=()=>{B(!1)},z=Object(r.useMemo)((()=>w.getAlertsTableDefaultAlertActions({key:"defaultRowActions",onActionExecuted:N,isAlertDetailsEnabled:!0,resolveRulePagePath:(e,t)=>t!==f.d?E.r.observability.ruleDetails(e):null,resolveAlertPagePath:(e,t)=>t!==A.a?E.r.observability.alertDetails(e):null,...a})),[a,w]),W=[...O.create&&O.read?[s.a.createElement(d.EuiContextMenuItem,{"data-test-subj":"add-to-existing-case-action",key:"addToExistingCase",onClick:()=>{P.open({getAttachments:()=>G}),N()},size:"s"},b.i18n.translate("xpack.observability.alerts.actions.addToCase",{defaultMessage:"Add to existing case"})),s.a.createElement(d.EuiContextMenuItem,{"data-test-subj":"add-to-new-case-action",key:"addToNewCase",onClick:()=>{H.open({attachments:G}),N()},size:"s"},b.i18n.translate("xpack.observability.alerts.actions.addToNewCase",{defaultMessage:"Add to new case"}))]:[],z],V=W.length<=0?b.i18n.translate("xpack.observability.alertsTable.notEnoughPermissions",{defaultMessage:"Additional privileges required"}):b.i18n.translate("xpack.observability.alertsTable.moreActionsTextLabel",{defaultMessage:"More actions"});return s.a.createElement(s.a.Fragment,null,F&&!u?s.a.createElement(d.EuiFlexItem,null,s.a.createElement(d.EuiToolTip,{content:b.i18n.translate("xpack.observability.alertsTable.viewInAppTextLabel",{defaultMessage:"View in app"})},s.a.createElement(d.EuiButtonIcon,{"data-test-subj":"o11yAlertActionsButton","aria-label":b.i18n.translate("xpack.observability.alertsTable.viewInAppTextLabel",{defaultMessage:"View in app"}),color:"text",onMouseOver:D,href:F,iconType:"eye",size:"s"}))):null,s.a.createElement(h,null,s.a.createElement(d.EuiPopover,{anchorPosition:"downLeft",button:s.a.createElement(d.EuiToolTip,{content:V},s.a.createElement(d.EuiButtonIcon,{"aria-label":V,color:"text","data-test-subj":"alertsTableRowActionMore",display:"empty",iconType:"boxesHorizontal",onClick:()=>{B(!S)},size:"s"})),closePopover:N,isOpen:S,panelPaddingSize:"none"},s.a.createElement(d.EuiContextMenuPanel,{size:"s",items:W,"data-test-subj":"alertsTableActionsMenu"}))))}var h=c()(d.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-14l9tb5-0"})({textAlign:"center"}),j=a(102),C=a(103),k=a(106);a(111);const w=e=>{const t=Object(p.useRouteMatch)(E.q),a=Object(r.useCallback)((t=>{const a=Object(T.a)(e)(t.alert);return s.a.createElement(C.a,{alert:a,rawAlert:t.alert,id:t.id})}),[e]),l=Object(r.useCallback)((t=>{const a=Object(T.a)(e)(t.alert);return s.a.createElement(j.a,{alert:a})}),[e]),n=Object(r.useCallback)((a=>{const l=Boolean(y.SLO_ALERTS_TABLE_ID===a.id&&t),n=Object(T.a)(e)(a.alert);return s.a.createElement(k.a,{isInApp:l,alert:n})}),[t,e]);return Object(r.useMemo)((()=>({body:a,header:l,footer:n})),[a,l,n])};var M=a(23),I=a(4),O=a(90),F=a(13),R=a(10);const _={critical:"danger",warning:"warning"};function D({severityLevel:e}){return e?s.a.createElement(d.EuiBadge,{color:e?_[e]:"default"},e):null}var S=a(70);function B({alertStatus:e,textSize:t="xs"}){return e===M.a?s.a.createElement(d.EuiHealth,{color:S.LEGACY_LIGHT_THEME.colors.vizColors[2],textSize:t},b.i18n.translate("xpack.observability.alertsTGrid.statusActiveDescription",{defaultMessage:"Active"})):s.a.createElement(d.EuiHealth,{color:S.LEGACY_LIGHT_THEME.colors.vizColors[1],textSize:t},s.a.createElement(d.EuiText,{color:"subdued",size:"relative"},b.i18n.translate("xpack.observability.alertsTGrid.statusRecoveredDescription",{defaultMessage:"Recovered"})))}function G({value:e,tooltipContent:t}){return s.a.createElement(d.EuiToolTip,{content:t,"data-test-subj":"cell-tooltip"},s.a.createElement(s.a.Fragment,null,e))}var L=a(52);function H({time:e,timeUnit:t="milliseconds"}){const a=Object(L.a)(e,t);return s.a.createElement(d.EuiToolTip,{content:a},s.a.createElement(s.a.Fragment,null,a))}const P=({data:e,fieldName:t})=>{const a=e.find((e=>e.field===t));if(null!=a&&null!=a.value)return a.value},N=e=>{const t=Array.isArray(e)?e.join():e;if(!Object(F.isEmpty)(t)){if("object"==typeof t)try{return JSON.stringify(t)}catch(e){return"Error: Unable to parse JSON value."}return t}return"--"},z=({columnId:e,data:t,setFlyoutAlert:a,observabilityRuleTypeRegistry:l})=>{if(!t)return null;const n=P({data:t,fieldName:e}),r=N(n);switch(e){case i.B:return r!==M.a&&r!==M.b?null:s.a.createElement(B,{alertStatus:r});case i.K:case i.A:case i.p:return s.a.createElement(H,{time:new Date(null!=r?r:"").getTime(),timeUnit:"milliseconds"});case i.d:return Object(R.b)(Number(r));case I.s:return s.a.createElement(D,{severityLevel:null!=r?r:void 0});case O.c:const e=P({data:t,fieldName:O.d}),n=N(e);return e?n:r;case i.m:const o=t.reduce(((e,t)=>({...e,[t.field]:t.value})),{});if(!l)return s.a.createElement(s.a.Fragment,null,r);const u=Object(T.a)(l)(o);return s.a.createElement(W,{"data-test-subj":"o11yGetRenderCellValueLink",onClick:()=>a&&a(u.fields[i.E])},u.reason);case i.r:const c=P({data:t,fieldName:i.n}),d=N(c);return s.a.createElement(G,{value:r,tooltipContent:d});default:return s.a.createElement(s.a.Fragment,null,r)}};var W=c()(d.EuiLink).withConfig({displayName:"_StyledEuiLink",componentId:"sc-1ixgtwb-0"})({":hover":{textDecoration:"none"}});const V=({showRuleName:e}={showRuleName:!1})=>{const t=e?[{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.ruleNameColumnDescription",{defaultMessage:"Rule name"}),id:i.r,initialWidth:150}]:[];return[{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.statusColumnDescription",{defaultMessage:"Alert Status"}),id:i.B,initialWidth:120},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.triggeredColumnDescription",{defaultMessage:"Triggered"}),id:i.A,initialWidth:190,schema:"datetime"},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.durationColumnDescription",{defaultMessage:"Duration"}),id:i.d,initialWidth:70},...t,{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.sourceColumnDescription",{defaultMessage:"Group"}),id:i.h,initialWidth:100},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.observedValueColumnDescription",{defaultMessage:"Observed value"}),id:O.c,initialWidth:100},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.thresholdColumnDescription",{defaultMessage:"Threshold"}),id:O.b,initialWidth:100},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.tagsColumnDescription",{defaultMessage:"Tags"}),id:I.G,initialWidth:150},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.alertsTGrid.reasonColumnDescription",{defaultMessage:"Reason"}),id:i.m,linkField:"*"}]};var U=a(26),q=a(41);const J=[{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.slo.sloAlertsEmbeddable.alertsTGrid.statusColumnDescription",{defaultMessage:"Status"}),id:i.B,initialWidth:110},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.slo.sloAlertsEmbeddable.alertsTGrid.durationColumnDescription",{defaultMessage:"Duration"}),id:i.d,initialWidth:116},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.slo.sloAlertsEmbeddable.alertsTGrid.sloColumnDescription",{defaultMessage:"Rule name"}),id:i.r,initialWidth:110},{columnHeaderType:"not-filtered",displayAsText:b.i18n.translate("xpack.observability.slo.sloAlertsEmbeddable.alertsTGrid.reasonColumnDescription",{defaultMessage:"Reason"}),id:i.m,linkField:"*"}],Y=(e,t,a)=>{const l=((e,t)=>{const a=a=>s.a.createElement(x,n()({},a,{config:t,observabilityRuleTypeRegistry:e}));return{id:o.observabilityFeatureId,cases:{featureId:o.casesFeatureId,owner:[o.observabilityFeatureId]},columns:V({showRuleName:!0}),getRenderCellValue:z,sort:[{[i.A]:{order:"desc"}}],useActionsColumn:()=>({renderCustomActionsRow:a}),useInternalFlyout:()=>{const{header:t,body:a,footer:l}=w(e);return{header:t,body:a,footer:l}},ruleTypeIds:e.list(),showInspectButton:!0}})(t,a);e.register(l);const r=((e,t)=>{const a=a=>s.a.createElement(x,n()({},a,{config:t,observabilityRuleTypeRegistry:e}));return{id:U.c,cases:{featureId:o.casesFeatureId,owner:[o.observabilityFeatureId]},columns:V(),getRenderCellValue:z,sort:[{[i.A]:{order:"desc"}}],useActionsColumn:()=>({renderCustomActionsRow:a}),useInternalFlyout:()=>{const{header:t,body:a,footer:l}=w(e);return{header:t,body:a,footer:l}},ruleTypeIds:e.list()}})(t,a);e.register(r);const u=(e=>({id:q.SLO_ALERTS_TABLE_CONFIG_ID,cases:{featureId:q.casesFeatureId,owner:[q.observabilityFeatureId]},columns:J,getRenderCellValue:z,sort:[{[i.d]:{order:"desc"}}],useInternalFlyout:()=>{const{header:t,body:a,footer:l}=w(e);return{header:t,body:a,footer:l}}}))(t);e.register(u)}}}]);