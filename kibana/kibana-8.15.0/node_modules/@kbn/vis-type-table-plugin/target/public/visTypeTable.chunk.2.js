(window.visTypeTable_bundle_jsonpfunction=window.visTypeTable_bundle_jsonpfunction||[]).push([[2],{35:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var o=n(0),a=n(3);const r=[{value:a.a.SUM,text:o.i18n.translate("visTypeTable.totalAggregations.sumText",{defaultMessage:"Sum"})},{value:a.a.AVG,text:o.i18n.translate("visTypeTable.totalAggregations.averageText",{defaultMessage:"Average"})},{value:a.a.MIN,text:o.i18n.translate("visTypeTable.totalAggregations.minText",{defaultMessage:"Min"})},{value:a.a.MAX,text:o.i18n.translate("visTypeTable.totalAggregations.maxText",{defaultMessage:"Max"})},{value:a.a.COUNT,text:o.i18n.translate("visTypeTable.totalAggregations.countText",{defaultMessage:"Count"})}],i=(e,t,n)=>e.sort(((e,o)=>{const a=e[n],r=o[n];return null===a?1:null===r?-1:a===r?0:"desc"===t?a<r?1:-1:a<r?-1:1}))},36:function(e,t,n){"use strict";var o,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),r=[];function i(e){for(var t=-1,n=0;n<r.length;n++)if(r[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},o=[],a=0;a<e.length;a++){var l=e[a],s=t.base?l[0]+t.base:l[0],c=n[s]||0,u="".concat(s," ").concat(c);n[s]=c+1;var d=i(u),b={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(r[d].references++,r[d].updater(b)):r.push({identifier:u,updater:p(b,t),references:1}),o.push(u)}return o}function s(e){var t=document.createElement("style"),o=e.attributes||{};if(void 0===o.nonce){var r=n.nc;r&&(o.nonce=r)}if(Object.keys(o).forEach((function(e){t.setAttribute(e,o[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,n,o){var a=n?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var r=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(r,i[t]):e.appendChild(r)}}function b(e,t,n){var o=n.css,a=n.media,r=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var v=null,f=0;function p(e,t){var n,o,a;if(t.singleton){var r=f++;n=v||(v=s(t)),o=d.bind(null,n,r,!1),a=d.bind(null,n,r,!0)}else n=s(t),o=b.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var o=0;o<n.length;o++){var a=i(n[o]);r[a].references--}for(var s=l(e,t),c=0;c<n.length;c++){var u=i(n[c]);0===r[u].references&&(r[u].updater(),r.splice(u,1))}n=s}}}},37:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,o,a,r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var l=(n=i,o=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(a," */")),s=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[r].concat(s).concat([l]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,o){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(o)for(var r=0;r<this.length;r++){var i=this[r][0];null!=i&&(a[i]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);o&&a[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},38:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(39);case"v8light":return n(41)}},39:function(e,t,n){var o=n(36),a=n(40);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);o(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},40:function(e,t,n){(t=n(37)(!1)).push([e.i,".tbvChart{display:flex;flex:1 0 0;flex-direction:column;overflow:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.tbvChart::-webkit-scrollbar{height:16px;width:16px}.tbvChart::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:#0000}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{display:flex;flex:1 0 0;flex-direction:column;margin-bottom:24px;padding:8px}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{align-items:flex-start;flex-direction:row}.tbvChartCellContent{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},41:function(e,t,n){var o=n(36),a=n(42);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);o(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},42:function(e,t,n){(t=n(37)(!1)).push([e.i,".tbvChart{display:flex;flex:1 0 0;flex-direction:column;overflow:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.tbvChart::-webkit-scrollbar{height:16px;width:16px}.tbvChart::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:#0000}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{display:flex;flex:1 0 0;flex-direction:column;margin-bottom:24px;padding:8px}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{align-items:flex-start;flex-direction:row}.tbvChartCellContent{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},44:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j})),n(38);var o=n(1),a=n.n(o),r=n(29),i=n.n(r),l=n(27),s=n(6),c=n(0),u=n(2),d=n(14),b=n(28),v=n(9),f=n(30),p=n(4);const m=Object(o.memo)((({dataGridAriaLabel:e,filename:t,columns:n,rows:a})=>{const[r,i]=Object(o.useState)(!1),d=Object(o.useCallback)((()=>i((e=>!e))),[]),m=Object(o.useCallback)((()=>i(!1)),[]),{services:{uiSettings:h}}=Object(l.useKibana)(),x=v.exporters.tableHasFormulas(n,a),C=Object(o.useCallback)((e=>{const o=h.get(f.CSV_SEPARATOR_SETTING),r=h.get(f.CSV_QUOTE_VALUES_SETTING),i=v.exporters.datatableToCSV({type:"datatable",columns:n,rows:a},{csvSeparator:o,quoteValues:r,formatFactory:Object(p.b)().deserialize,raw:!e,escapeFormulaValues:!1});Object(f.downloadFileAs)(`${t||"unsaved"}.csv`,{content:i,type:v.exporters.CSV_MIME_TYPE})}),[n,a,t,h]),g=c.i18n.translate("visTypeTable.vis.controls.exportButtonAriaLabel",{defaultMessage:"Export {dataGridAriaLabel} as CSV",values:{dataGridAriaLabel:e}}),j=Object(u.jsx)(s.EuiButtonEmpty,{"aria-label":g,size:"xs",iconType:"exportAction",color:"text",className:"euiDataGrid__controlBtn",onClick:d},Object(u.jsx)(b.FormattedMessage,{id:"visTypeTable.vis.controls.exportButtonLabel",defaultMessage:"Export"})),T=x?Object(u.jsx)(s.EuiToolTip,{position:"top",content:c.i18n.translate("visTypeTable.vis.controls.exportButtonFormulasWarning",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})},j):j,w=[Object(u.jsx)(s.EuiContextMenuItem,{key:"rawCsv",onClick:()=>C(!1)},Object(u.jsx)(b.FormattedMessage,{id:"visTypeTable.vis.controls.rawCSVButtonLabel",defaultMessage:"Raw"})),Object(u.jsx)(s.EuiContextMenuItem,{key:"csv",onClick:()=>C(!0)},Object(u.jsx)(b.FormattedMessage,{id:"visTypeTable.vis.controls.formattedCSVButtonLabel",defaultMessage:"Formatted"}))];return Object(u.jsx)(s.EuiPopover,{id:"dataTableExportData",button:T,isOpen:r,closePopover:m,panelPaddingSize:"none",repositionOnScroll:!0},Object(u.jsx)(s.EuiContextMenuPanel,{className:"eui-textNoWrap",items:w}))}));var h=n(35);const x=Object(o.memo)((({fireEvent:e,table:t,visConfig:n,title:r,uiStateProps:{columnsWidth:i,sort:l,setColumnsWidth:b,setSort:v}})=>{var f;const p=Object(o.useRef)(null),{columns:x,rows:C,formattedColumns:g}=t,j=Object(o.useMemo)((()=>{if(null!==l.columnIndex&&l.direction){var e;const t=null===(e=x[l.columnIndex])||void 0===e?void 0:e.id;return Object(h.a)(C,l.direction,t)}return C}),[x,C,l.columnIndex,l.direction]),T=Object(o.useMemo)((()=>((e,t,n)=>({rowIndex:o,columnId:a})=>{var r;const i=null===(r=e[o])||void 0===r?void 0:r[a],l=t[a],s=null==l?void 0:l.formatter.convert(i,"html");return Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:s},"data-test-subj":"tbvChartCellContent",className:n?"":"tbvChartCellContent"})})(j,g,n.autoFitRowToContent)),[g,j,n.autoFitRowToContent]),w=Object(o.useMemo)((()=>n.autoFitRowToContent?{defaultHeight:"auto"}:void 0),[n.autoFitRowToContent]),y=((e,t,n,o,a,r)=>{const i=(n,o)=>{a({name:"filter",data:{data:[{table:{columns:e,rows:t},...n,column:n.column}],negate:o}})};return e.map(((e,a)=>{const l=n[e.id],s=l.filterable?[({rowIndex:e,columnId:n,Component:o})=>{var s;const d=null===(s=t[e])||void 0===s?void 0:s[n];if(null==d)return null;const b=l.formatter.convert(d),v=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueText",{defaultMessage:"Filter for"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueAriaLabel",{defaultMessage:"Filter for: {cellContent}",values:{cellContent:b}});return Object(u.jsx)(o,{"aria-label":f,"data-test-subj":"tbvChartCell__filterForCellValue",onClick:()=>{i({row:e,column:a,value:d},!1),null==r||r()},iconType:"plusInCircle"},v)},({rowIndex:e,columnId:n,Component:o})=>{var s;const d=null===(s=t[e])||void 0===s?void 0:s[n];if(null==d)return null;const b=l.formatter.convert(d),v=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueText",{defaultMessage:"Filter out"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueAriaLabel",{defaultMessage:"Filter out: {cellContent}",values:{cellContent:b}});return Object(u.jsx)(o,{"aria-label":f,onClick:()=>{i({row:e,column:a,value:d},!0),null==r||r()},iconType:"minusInCircle"},v)}]:void 0,d=o.find((e=>e.colIndex===a)),b={id:e.id,display:e.name,displayAsText:e.name,actions:{showHide:!1,showMoveLeft:!1,showMoveRight:!1,showSortAsc:{label:c.i18n.translate("visTypeTable.sort.ascLabel",{defaultMessage:"Sort asc"})},showSortDesc:{label:c.i18n.translate("visTypeTable.sort.descLabel",{defaultMessage:"Sort desc"})}},cellActions:s};return d&&(b.initialWidth=d.width),b}))})(x,j,g,i,e,null===(f=p.current)||void 0===f?void 0:f.closeCellPopover),O=Object(d.b)(n,C.length),S=Object(o.useMemo)((()=>{var e;return null!==l.columnIndex&&l.direction?[{id:null===(e=x[l.columnIndex])||void 0===e?void 0:e.id,direction:l.direction}]:[]}),[x,l]),M=Object(o.useCallback)((e=>{const t=e.length<=1?e[0]:e[1];v(t&&{columnIndex:x.findIndex((e=>e.id===t.id)),direction:t.direction})}),[x,v]),_=r||n.title||c.i18n.translate("visTypeTable.defaultAriaLabel",{defaultMessage:"Data table visualization"}),k=Object(o.useCallback)((({columnId:e,width:t})=>{const n=x.findIndex((t=>t.id===e));b({colIndex:n,width:t})}),[x,b]);return Object(u.jsx)(a.a.Fragment,null,r&&Object(u.jsx)(s.EuiTitle,{size:"xs"},Object(u.jsx)("h3",null,r)),Object(u.jsx)(s.EuiDataGrid,{"aria-label":_,columns:y,gridStyle:{border:"horizontal",header:"underline"},rowHeightsOptions:w,rowCount:C.length,columnVisibility:{visibleColumns:x.map((({id:e})=>e)),setVisibleColumns:()=>{}},toolbarVisibility:n.showToolbar&&{showColumnSelector:!1,showFullScreenSelector:!1,showSortSelector:!1,showDisplaySelector:!1,additionalControls:Object(u.jsx)(m,{dataGridAriaLabel:_,columns:x,rows:j,filename:n.title})},renderCellValue:T,renderFooterCellValue:n.showTotal?({columnId:e})=>g[e].formattedTotal||null:void 0,pagination:O,sorting:{columns:S,onSort:M},onColumnResize:k,minSizeForControls:1,ref:p}))}));var C=n(31);const g=Object(o.memo)((({fireEvent:e,tables:t,visConfig:n,uiStateProps:o,enforceMinWidth:r})=>Object(u.jsx)(a.a.Fragment,null,t.map((({table:t,title:a})=>{const i=t.columns.reduce(((e,t,n)=>{var a,r;return e+(null!==(a=null===(r=o.columnsWidth.find((e=>e.colIndex===n)))||void 0===r?void 0:r.width)&&void 0!==a?a:25)}),0);return Object(u.jsx)("div",{key:a,className:"tbvChart__split",css:r?{minWidth:`calc(${i}px + 2 * ${C.euiThemeVars.euiSizeS})`}:{}},Object(u.jsx)(x,{fireEvent:e,table:t,visConfig:n,title:a,uiStateProps:o}))}))))),j=({core:e,handlers:t,visData:{direction:n,table:a,tables:r},visConfig:s,renderComplete:c})=>{Object(o.useLayoutEffect)((()=>{setTimeout((()=>{c()}),300)}),[c]);const b=Object(d.c)(t.uiState),v=i()("tbvChart",{tbvChart__splitColumns:"column"===n});return Object(u.jsx)(e.i18n.Context,null,Object(u.jsx)(l.KibanaContextProvider,{services:e},Object(u.jsx)("div",{className:v,"data-test-subj":"tbvChart"},a?Object(u.jsx)(x,{fireEvent:t.event,table:a,visConfig:s,uiStateProps:b}):Object(u.jsx)(g,{fireEvent:t.event,tables:r,visConfig:s,uiStateProps:b,enforceMinWidth:"column"===n}))))}}}]);