/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var i,a,r=t[0],n=t[1],d=0,l=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&l.push(s[a][0]),s[a]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);for(o&&o(t);l.length;)l.shift()()}var i={},s={1:0};function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.e=function(e){var t=[],i=s[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,a){i=s[e]=[t,a]}));t.push(i[2]=r);var n,d=document.createElement("script");d.charset="utf-8",d.timeout=120,a.nc&&d.setAttribute("nonce",a.nc),d.src=function(e){return a.p+"metricsDataAccess.chunk."+e+".js"}(e);var o=new Error;n=function(t){d.onerror=d.onload=null,clearTimeout(l);var i=s[e];if(0!==i){if(i){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;o.message="Loading chunk "+e+" failed.\n("+a+": "+r+")",o.name="ChunkLoadError",o.type=a,o.request=r,i[1](o)}s[e]=void 0}};var l=setTimeout((function(){n({type:"timeout",target:d})}),12e4);d.onerror=d.onload=n,document.head.appendChild(d)}return Promise.all(t)},a.m=e,a.c=i,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(i,s,function(t){return e[t]}.bind(null,s));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var r=window.metricsDataAccess_bundle_jsonpfunction=window.metricsDataAccess_bundle_jsonpfunction||[],n=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var o=n;a(a.s=6)}([function(e,t){e.exports=__kbnSharedDeps__.IoTs},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,i){e.exports=i(5)(2)},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,i){i(7),__kbnBundles__.define("plugin/metricsDataAccess/public",i,9),__kbnBundles__.define("plugin/metricsDataAccess/common",i,8)},function(e,t,i){i.p=window.__kbnPublicPath__.metricsDataAccess},function(e,t,i){"use strict";i.r(t),i.d(t,"inventoryModels",(function(){return re})),i.d(t,"findInventoryModel",(function(){return ne})),i.d(t,"getFieldByType",(function(){return oe})),i.d(t,"findInventoryFields",(function(){return le})),i.d(t,"metrics",(function(){return se})),i.d(t,"podSnapshotMetricTypes",(function(){return y})),i.d(t,"containerSnapshotMetricTypes",(function(){return ee})),i.d(t,"awsS3SnapshotMetricTypes",(function(){return R})),i.d(t,"hostSnapshotMetricTypes",(function(){return o})),i.d(t,"awsEC2SnapshotMetricTypes",(function(){return x})),i.d(t,"awsRDSSnapshotMetricTypes",(function(){return Q})),i.d(t,"awsSQSSnapshotMetricTypes",(function(){return X})),i.d(t,"InventoryMetricRT",(function(){return ye})),i.d(t,"InventoryFormatterTypeRT",(function(){return ue})),i.d(t,"InventoryVisTypeRT",(function(){return me})),i.d(t,"ItemTypeRT",(function(){return pe})),i.d(t,"SnapshotMetricTypeRT",(function(){return Ke})),i.d(t,"ESSumBucketAggRT",(function(){return Be})),i.d(t,"ESTermsWithAggregationRT",(function(){return Ue})),i.d(t,"ESDerivativeAggRT",(function(){return Re})),i.d(t,"MetricsUIAggregationRT",(function(){return Ie})),i.d(t,"ESBasicMetricAggRT",(function(){return De})),i.d(t,"SnapshotMetricTypeKeys",(function(){return Pe})),i.d(t,"networkTraffic",(function(){return m})),i.d(t,"METRICS_EXPLORER_API_MAX_METRICS",(function(){return a}));var s=i(1);const a=20,r={cpu:{cpu_user:{avg:{field:"system.cpu.user.pct"}},cpu_system:{avg:{field:"system.cpu.system.pct"}},cpu_cores:{max:{field:"system.cpu.cores"}},cpu:{bucket_script:{buckets_path:{user:"cpu_user",system:"cpu_system",cores:"cpu_cores"},script:{source:"(params.user + params.system) / params.cores",lang:"painless"},gap_policy:"skip"}}},diskLatency:{diskio_read_time:{avg:{field:"system.diskio.read.time"}},diskio_write_time:{avg:{field:"system.diskio.write.time"}},diskio_read_count:{avg:{field:"system.diskio.read.count"}},diskio_write_count:{avg:{field:"system.diskio.write.count"}},diskLatency:{bucket_script:{buckets_path:{read_time:"diskio_read_time",write_time:"diskio_write_time",read_count:"diskio_read_count",write_count:"diskio_write_count"},script:{source:"(params.write_time + params.read_time) / (params.read_count + params.write_count)",lang:"painless"},gap_policy:"skip"}}},diskSpaceUsage:{diskSpaceUsage:{max:{field:"system.filesystem.used.pct"}}},count:{count:{bucket_script:{buckets_path:{count:"_count"},script:{source:"count * 1",lang:"expression"},gap_policy:"skip"}}},load:{load:{avg:{field:"system.load.5"}}},logRate:{count:{bucket_script:{buckets_path:{count:"_count"},script:{source:"count * 1",lang:"expression"},gap_policy:"skip"}},cumsum:{cumulative_sum:{buckets_path:"count"}},logRate:{derivative:{buckets_path:"cumsum",gap_policy:"skip",unit:"1s"}}},memory:{memory:{avg:{field:"system.memory.actual.used.pct"}}},memoryFree:{memory_total:{max:{field:"system.memory.total"}},used_bytes:{avg:{field:"system.memory.actual.used.bytes"}},memoryFree:{bucket_script:{buckets_path:{memoryTotal:"memory_total",usedBytes:"used_bytes"},script:{source:"params.memoryTotal - params.usedBytes",lang:"painless"},gap_policy:"skip"}}},memoryTotal:{memory_total:{avg:{field:"system.memory.total"}},memoryTotal:{bucket_script:{buckets_path:{memoryTotal:"memory_total"},script:{source:"params.memoryTotal",lang:"painless"},gap_policy:"skip"}}},normalizedLoad1m:{load_1m:{avg:{field:"system.load.1"}},max_cores:{max:{field:"system.load.cores"}},normalizedLoad1m:{bucket_script:{buckets_path:{load1m:"load_1m",maxCores:"max_cores"},script:{source:"params.load1m / params.maxCores",lang:"painless"},gap_policy:"skip"}}},rx:{rx_avg:{avg:{field:"host.network.ingress.bytes"}},rx_period:{filter:{exists:{field:"host.network.ingress.bytes"}},aggs:{period:{max:{field:"metricset.period"}}}},rx:{bucket_script:{buckets_path:{value:"rx_avg",period:"rx_period>period"},script:{source:"params.value / (params.period / 1000)",lang:"painless"},gap_policy:"skip"}}},tx:{tx_avg:{avg:{field:"host.network.egress.bytes"}},tx_period:{filter:{exists:{field:"host.network.egress.bytes"}},aggs:{period:{max:{field:"metricset.period"}}}},tx:{bucket_script:{buckets_path:{value:"tx_avg",period:"tx_period>period"},script:{source:"params.value / (params.period / 1000)",lang:"painless"},gap_policy:"skip"}}}},{count:n,...d}=r,o=Object.keys(d),l={tsvb:{hostSystemOverview:(e,t,i)=>({id:"hostSystemOverview",requires:["system.cpu","system.memory","system.load","system.network"],index_pattern:t,interval:i,time_field:e,type:"top_n",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"system.cpu.total.norm.pct",id:"avg-cpu-total",type:"avg"}]},{id:"load",split_mode:"everything",metrics:[{field:"system.load.5",id:"avg-load-5m",type:"avg"}]},{id:"memory",split_mode:"everything",metrics:[{field:"system.memory.actual.used.pct",id:"avg-memory-actual-used",type:"avg"}]},{id:"rx",metrics:[{field:"host.network.ingress.bytes",id:"avg-net-in",type:"avg"},{id:"max-period",type:"max",field:"metricset.period"},{id:"3216b170-f192-11ec-a8e3-dd984b7213e2",type:"calculation",variables:[{id:"34e64c30-f192-11ec-a8e3-dd984b7213e2",name:"value",field:"avg-net-in"},{id:"3886cb80-f192-11ec-a8e3-dd984b7213e2",name:"period",field:"max-period"}],script:"params.value / (params.period / 1000)"}],filter:{language:"kuery",query:"host.network.ingress.bytes : * "},split_mode:"everything"},{id:"tx",metrics:[{field:"host.network.egress.bytes",id:"avg-net-out",type:"avg"},{id:"max-period",type:"max",field:"metricset.period"},{id:"3216b170-f192-11ec-a8e3-dd984b7213e2",type:"calculation",variables:[{id:"34e64c30-f192-11ec-a8e3-dd984b7213e2",name:"value",field:"avg-net-out"},{id:"3886cb80-f192-11ec-a8e3-dd984b7213e2",name:"period",field:"max-period"}],script:"params.value / (params.period / 1000)"}],filter:{language:"kuery",query:"host.network.egress.bytes : * "},split_mode:"everything"}]}),hostCpuUsage:(e,t,i)=>({id:"hostCpuUsage",requires:["system.cpu"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"user",metrics:[{field:"system.cpu.user.pct",id:"avg-cpu-user",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"max-cpu-cores",id:"var-cores",name:"cores"},{field:"avg-cpu-user",id:"var-avg",name:"avg"}]}],split_mode:"everything"},{id:"system",metrics:[{field:"system.cpu.system.pct",id:"avg-cpu-system",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"max-cpu-cores",id:"var-cores",name:"cores"},{field:"avg-cpu-system",id:"var-avg",name:"avg"}]}],split_mode:"everything"},{id:"steal",metrics:[{field:"system.cpu.steal.pct",id:"avg-cpu-steal",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"avg-cpu-steal",id:"var-avg",name:"avg"},{field:"max-cpu-cores",id:"var-cores",name:"cores"}]}],split_mode:"everything"},{id:"irq",metrics:[{field:"system.cpu.irq.pct",id:"avg-cpu-irq",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"max-cpu-cores",id:"var-cores",name:"cores"},{field:"avg-cpu-irq",id:"var-avg",name:"avg"}]}],split_mode:"everything"},{id:"softirq",metrics:[{field:"system.cpu.softirq.pct",id:"avg-cpu-softirq",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"max-cpu-cores",id:"var-cores",name:"cores"},{field:"avg-cpu-softirq",id:"var-avg",name:"avg"}]}],split_mode:"everything"},{id:"iowait",metrics:[{field:"system.cpu.iowait.pct",id:"avg-cpu-iowait",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"max-cpu-cores",id:"var-cores",name:"cores"},{field:"avg-cpu-iowait",id:"var-avg",name:"avg"}]}],split_mode:"everything"},{id:"nice",metrics:[{field:"system.cpu.nice.pct",id:"avg-cpu-nice",type:"avg"},{field:"system.cpu.cores",id:"max-cpu-cores",type:"max"},{id:"calc-avg-cores",script:"params.avg / params.cores",type:"calculation",variables:[{field:"max-cpu-cores",id:"var-cores",name:"cores"},{field:"avg-cpu-nice",id:"var-avg",name:"avg"}]}],split_mode:"everything"}]}),hostLoad:(e,t,i)=>({id:"hostLoad",requires:["system.cpu"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"load_1m",metrics:[{field:"system.load.1",id:"avg-load-1m",type:"avg"}],split_mode:"everything"},{id:"load_5m",metrics:[{field:"system.load.5",id:"avg-load-5m",type:"avg"}],split_mode:"everything"},{id:"load_15m",metrics:[{field:"system.load.15",id:"avg-load-15m",type:"avg"}],split_mode:"everything"}]}),hostMemoryUsage:(e,t,i)=>({id:"hostMemoryUsage",requires:["system.memory"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"free",metrics:[{field:"system.memory.free",id:"avg-memory-free",type:"avg"}],split_mode:"everything"},{id:"used",metrics:[{field:"system.memory.actual.used.bytes",id:"avg-memory-used",type:"avg"}],split_mode:"everything"},{id:"cache",metrics:[{field:"system.memory.actual.used.bytes",id:"avg-memory-actual-used",type:"avg"},{field:"system.memory.used.bytes",id:"avg-memory-used",type:"avg"},{id:"calc-used-actual",script:"params.used - params.actual",type:"calculation",variables:[{field:"avg-memory-actual-used",id:"var-actual",name:"actual"},{field:"avg-memory-used",id:"var-used",name:"used"}]}],split_mode:"everything"}]}),hostNetworkTraffic:(e,t,i)=>({id:"hostNetworkTraffic",requires:["system.network"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"tx",metrics:[{field:"host.network.egress.bytes",id:"avg-net-out",type:"avg"},{id:"max-period",type:"max",field:"metricset.period"},{id:"3216b170-f192-11ec-a8e3-dd984b7213e2",type:"calculation",variables:[{id:"34e64c30-f192-11ec-a8e3-dd984b7213e2",name:"value",field:"avg-net-out"},{id:"3886cb80-f192-11ec-a8e3-dd984b7213e2",name:"period",field:"max-period"}],script:"params.value / (params.period / 1000)"}],filter:{language:"kuery",query:"host.network.egress.bytes : * "},split_mode:"everything"},{id:"rx",metrics:[{field:"host.network.ingress.bytes",id:"avg-net-in",type:"avg"},{id:"calc-invert-rate",script:"params.rate * -1",type:"calculation",variables:[{field:"avg-net-in",id:"var-rate",name:"rate"}]},{id:"max-period",type:"max",field:"metricset.period"},{id:"3216b170-f192-11ec-a8e3-dd984b7213e2",type:"calculation",variables:[{id:"34e64c30-f192-11ec-a8e3-dd984b7213e2",name:"value",field:"calc-invert-rate"},{id:"3886cb80-f192-11ec-a8e3-dd984b7213e2",name:"period",field:"max-period"}],script:"params.value / (params.period / 1000)"}],filter:{language:"kuery",query:"host.network.ingress.bytes : * "},split_mode:"everything"}]}),hostFilesystem:(e,t,i)=>({id:"hostFilesystem",requires:["system.filesystem"],filter:"system.filesystem.device_name:\\/*",index_pattern:t,time_field:e,interval:i,type:"timeseries",series:[{id:"used",metrics:[{field:"system.filesystem.used.pct",id:"avg-filesystem-used",type:"avg"}],split_mode:"terms",terms_field:"system.filesystem.device_name",terms_order_by:"used",terms_size:5}]}),hostK8sOverview:(e,t,i)=>({id:"hostK8sOverview",requires:["kubernetes"],index_pattern:t,interval:i,time_field:e,type:"top_n",series:[{id:"cpucap",split_mode:"everything",metrics:[{field:"kubernetes.node.cpu.allocatable.cores",id:"max-cpu-cap",type:"max"},{field:"kubernetes.node.cpu.usage.nanocores",id:"avg-cpu-usage",type:"avg"},{id:"calc-used-cap",script:"params.used / (params.cap * 1000000000)",type:"calculation",variables:[{field:"max-cpu-cap",id:"var-cap",name:"cap"},{field:"avg-cpu-usage",id:"var-used",name:"used"}]}]},{id:"diskcap",metrics:[{field:"kubernetes.node.fs.capacity.bytes",id:"max-fs-cap",type:"max"},{field:"kubernetes.node.fs.used.bytes",id:"avg-fs-used",type:"avg"},{id:"calc-used-cap",script:"params.used / params.cap",type:"calculation",variables:[{field:"max-fs-cap",id:"var-cap",name:"cap"},{field:"avg-fs-used",id:"var-used",name:"used"}]}],split_mode:"everything"},{id:"memorycap",metrics:[{field:"kubernetes.node.memory.allocatable.bytes",id:"max-memory-cap",type:"max"},{field:"kubernetes.node.memory.usage.bytes",id:"avg-memory-usage",type:"avg"},{id:"calc-used-cap",script:"params.used / params.cap",type:"calculation",variables:[{field:"max-memory-cap",id:"var-cap",name:"cap"},{field:"avg-memory-usage",id:"var-used",name:"used"}]}],split_mode:"everything"},{id:"podcap",metrics:[{field:"kubernetes.node.pod.capacity.total",id:"max-pod-cap",type:"max"},{field:"kubernetes.pod.uid",id:"card-pod-name",type:"cardinality"},{id:"calc-used-cap",script:"params.used / params.cap",type:"calculation",variables:[{field:"max-pod-cap",id:"var-cap",name:"cap"},{field:"card-pod-name",id:"var-used",name:"used"}]}],split_mode:"everything"}]}),hostK8sCpuCap:(e,t,i)=>({id:"hostK8sCpuCap",map_field_to:"kubernetes.node.name",requires:["kubernetes.node"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"capacity",metrics:[{field:"kubernetes.node.cpu.allocatable.cores",id:"max-cpu-cap",type:"max"},{id:"calc-nanocores",type:"calculation",variables:[{id:"var-cores",field:"max-cpu-cap",name:"cores"}],script:"params.cores * 1000000000"}],split_mode:"everything"},{id:"used",metrics:[{field:"kubernetes.node.cpu.usage.nanocores",id:"avg-cpu-usage",type:"avg"}],split_mode:"everything"}]}),hostK8sPodCap:(e,t,i)=>({id:"hostK8sPodCap",requires:["kubernetes.node"],map_field_to:"kubernetes.node.name",index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"capacity",metrics:[{field:"kubernetes.node.pod.allocatable.total",id:"max-pod-cap",type:"max"}],split_mode:"everything"},{id:"used",metrics:[{field:"kubernetes.pod.uid",id:"avg-pod",type:"cardinality"}],split_mode:"everything"}]}),hostK8sDiskCap:(e,t,i)=>({id:"hostK8sDiskCap",map_field_to:"kubernetes.node.name",requires:["kubernetes.node"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"capacity",metrics:[{field:"kubernetes.node.fs.capacity.bytes",id:"max-fs-cap",type:"max"}],split_mode:"everything"},{id:"used",metrics:[{field:"kubernetes.node.fs.used.bytes",id:"avg-fs-used",type:"avg"}],split_mode:"everything"}]}),hostK8sMemoryCap:(e,t,i)=>({id:"hostK8sMemoryCap",map_field_to:"kubernetes.node.name",requires:["kubernetes.node"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"capacity",metrics:[{field:"kubernetes.node.memory.allocatable.bytes",id:"max-memory-cap",type:"max"}],split_mode:"everything"},{id:"used",metrics:[{field:"kubernetes.node.memory.usage.bytes",id:"avg-memory-usage",type:"avg"}],split_mode:"everything"}]}),hostDockerOverview:(e,t,i)=>({id:"hostDockerOverview",requires:["docker.info"],index_pattern:t,interval:i,time_field:e,type:"top_n",series:[{id:"total",metrics:[{field:"docker.info.containers.total",id:"max-total",type:"max"}],split_mode:"everything"},{id:"running",metrics:[{field:"docker.info.containers.running",id:"max-running",type:"max"}],split_mode:"everything"},{id:"paused",metrics:[{field:"docker.info.containers.paused",id:"max-paused",type:"max"}],split_mode:"everything"},{id:"stopped",metrics:[{field:"docker.info.containers.stopped",id:"max-stopped",type:"max"}],split_mode:"everything"}]}),hostDockerInfo:(e,t,i)=>({id:"hostDockerInfo",requires:["docker.info"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"running",metrics:[{field:"docker.info.containers.running",id:"max-running",type:"max"}],split_mode:"everything"},{id:"paused",metrics:[{field:"docker.info.containers.paused",id:"max-paused",type:"max"}],split_mode:"everything"},{id:"stopped",metrics:[{field:"docker.info.containers.stopped",id:"max-stopped",type:"max"}],split_mode:"everything"}]}),hostDockerTop5ByMemory:(e,t,i)=>({id:"hostDockerTop5ByMemory",requires:["docker.memory"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"avg-memory",metrics:[{field:"docker.memory.usage.pct",id:"avg-memory-metric",type:"avg"}],split_mode:"terms",terms_field:"container.name",terms_order_by:"avg-memory",terms_size:5}]}),hostDockerTop5ByCpu:(e,t,i)=>({id:"hostDockerTop5ByCpu",requires:["docker.cpu"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"avg-cpu",metrics:[{field:"docker.cpu.total.pct",id:"avg-cpu-metric",type:"avg"}],split_mode:"terms",terms_field:"container.name",terms_order_by:"avg-cpu",terms_size:5}]})},snapshot:r,getFormulas:async()=>await i.e(5).then(i.bind(null,27)).then((({formulas:e})=>e)),getCharts:async()=>await i.e(3).then(i.bind(null,82)).then((({charts:e})=>e)),defaultSnapshot:"cpu",defaultTimeRangeInSeconds:3600},c=["nginxHits","nginxRequestRate","nginxActiveConnections","nginxRequestsPerConnection"],p={id:"host",displayName:s.i18n.translate("xpack.metricsData.inventoryModel.host.displayName",{defaultMessage:"Hosts"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModels.host.singularDisplayName",{defaultMessage:"Host"}),requiredModule:"system",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},fields:{id:"host.name",name:"host.name",os:"host.os.name",ip:"host.ip",cloudProvider:"cloud.provider"},metrics:l,requiredMetrics:["hostSystemOverview","hostCpuUsage","hostLoad","hostMemoryUsage","hostNetworkTraffic","hostK8sOverview","hostK8sCpuCap","hostK8sMemoryCap","hostK8sDiskCap","hostK8sPodCap","awsOverview","awsCpuUtilization","awsNetworkBytes","awsNetworkPackets","awsDiskioOps","awsDiskioBytes",...c],tooltipMetrics:["cpu","memory","tx","rx"]},m=(e,t)=>({[`${e}_max`]:{max:{field:t}},[`${e}_deriv`]:{derivative:{buckets_path:`${e}_max`,gap_policy:"skip",unit:"1s"}},[e]:{bucket_script:{buckets_path:{value:`${e}_deriv[normalized_value]`},script:{source:"params.value > 0.0 ? params.value : 0.0",lang:"painless"},gap_policy:"skip"}}}),u={cpu:{cpu_with_limit:{avg:{field:"kubernetes.pod.cpu.usage.limit.pct"}},cpu_without_limit:{avg:{field:"kubernetes.pod.cpu.usage.node.pct"}},cpu:{bucket_script:{buckets_path:{with_limit:"cpu_with_limit",without_limit:"cpu_without_limit"},script:{source:"params.with_limit > 0.0 ? params.with_limit : params.without_limit",lang:"painless"},gap_policy:"skip"}}},memory:{memory_with_limit:{avg:{field:"kubernetes.pod.memory.usage.limit.pct"}},memory_without_limit:{avg:{field:"kubernetes.pod.memory.usage.node.pct"}},memory:{bucket_script:{buckets_path:{with_limit:"memory_with_limit",without_limit:"memory_without_limit"},script:{source:"params.with_limit > 0.0 ? params.with_limit : params.without_limit",lang:"painless"},gap_policy:"skip"}}},rx:m("rx","kubernetes.pod.network.rx.bytes"),tx:m("tx","kubernetes.pod.network.tx.bytes")},y=Object.keys(u),v={tsvb:{podOverview:(e,t,i)=>({id:"podOverview",requires:["kubernetes.pod"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"kubernetes.pod.cpu.usage.node.pct",id:"avg-cpu-without",type:"avg"},{field:"kubernetes.pod.cpu.usage.limit.pct",id:"avg-cpu-with",type:"avg"},{id:"cpu-usage",type:"calculation",variables:[{id:"cpu_with",name:"with_limit",field:"avg-cpu-with"},{id:"cpu_without",name:"without_limit",field:"avg-cpu-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]},{id:"memory",split_mode:"everything",metrics:[{field:"kubernetes.pod.memory.usage.node.pct",id:"avg-memory-without",type:"avg"},{field:"kubernetes.pod.memory.usage.limit.pct",id:"avg-memory-with",type:"avg"},{id:"memory-usage",type:"calculation",variables:[{id:"memory_with",name:"with_limit",field:"avg-memory-with"},{id:"memory_without",name:"without_limit",field:"avg-memory-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]},{id:"rx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.rx.bytes",id:"max-network-rx",type:"max"},{field:"max-network-rx",id:"deriv-max-network-rx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-network-rx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-rx"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]},{id:"tx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.tx.bytes",id:"max-network-tx",type:"max"},{field:"max-network-tx",id:"deriv-max-network-tx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-network-tx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-tx"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]}]}),podCpuUsage:(e,t,i)=>({id:"podCpuUsage",requires:["kubernetes.pod"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"kubernetes.pod.cpu.usage.node.pct",id:"avg-cpu-without",type:"avg"},{field:"kubernetes.pod.cpu.usage.limit.pct",id:"avg-cpu-with",type:"avg"},{id:"cpu-usage",type:"calculation",variables:[{id:"cpu_with",name:"with_limit",field:"avg-cpu-with"},{id:"cpu_without",name:"without_limit",field:"avg-cpu-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]}]}),podLogUsage:(e,t,i)=>({id:"podLogUsage",requires:["kubernetes.pod"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"logs",split_mode:"everything",metrics:[{field:"kubernetes.container.logs.used.bytes",id:"avg-log-used",type:"avg"},{field:"kubernetes.container.logs.capacity.bytes",id:"max-log-cap",type:"max"},{id:"calc-usage-limit",script:"params.usage / params.limit",type:"calculation",variables:[{field:"avg-log-userd",id:"var-usage",name:"usage"},{field:"max-log-cap",id:"var-limit",name:"limit"}]}]}]}),podNetworkTraffic:(e,t,i)=>({id:"podNetworkTraffic",requires:["kubernetes.pod"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"tx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.tx.bytes",id:"max-network-tx",type:"max"},{field:"max-network-tx",id:"deriv-max-network-tx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-net-tx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-tx"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]},{id:"rx",split_mode:"everything",metrics:[{field:"kubernetes.pod.network.rx.bytes",id:"max-network-rx",type:"max"},{field:"max-network-rx",id:"deriv-max-network-rx",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-net-rx",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-network-rx"}],script:"params.rate > 0.0 ? params.rate : 0.0"},{id:"invert-posonly-deriv-max-network-rx",script:"params.rate * -1",type:"calculation",variables:[{field:"posonly-deriv-max-net-rx",id:"var-rate",name:"rate"}]}]}]}),podMemoryUsage:(e,t,i)=>({id:"podMemoryUsage",requires:["kubernetes.pod"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"memory",split_mode:"everything",metrics:[{field:"kubernetes.pod.memory.usage.node.pct",id:"avg-memory-without",type:"avg"},{field:"kubernetes.pod.memory.usage.limit.pct",id:"avg-memory-with",type:"avg"},{id:"memory-usage",type:"calculation",variables:[{id:"memory_with",name:"with_limit",field:"avg-memory-with"},{id:"memory_without",name:"without_limit",field:"avg-memory-without"}],script:"params.with_limit > 0.0 ? params.with_limit : params.without_limit"}]}]})},snapshot:u,defaultSnapshot:"cpu",defaultTimeRangeInSeconds:3600},g={id:"pod",displayName:s.i18n.translate("xpack.metricsData.inventoryModel.pod.displayName",{defaultMessage:"Kubernetes Pods"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModels.pod.singularDisplayName",{defaultMessage:"Kubernetes Pod"}),requiredModule:"kubernetes",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},fields:{id:"kubernetes.pod.uid",name:"kubernetes.pod.name",ip:"kubernetes.pod.ip"},metrics:v,requiredMetrics:["podOverview","podCpuUsage","podMemoryUsage","podNetworkTraffic",...c],tooltipMetrics:["cpu","memory","rx","tx"]},f=(e,t,i,s=">=300s",a=!0)=>(r,n)=>({id:e,requires:t,drop_last_bucket:a,index_pattern:n,interval:s,time_field:r,type:"timeseries",series:i}),_=f("awsEC2CpuUtilization",["aws.ec2"],[{id:"total",split_mode:"everything",metrics:[{field:"aws.ec2.cpu.total.pct",id:"avg-cpu",type:"avg"},{id:"convert-to-percent",script:"params.avg",type:"calculation",variables:[{field:"avg-cpu",id:"var-avg",name:"avg"}]}]}]),k=f("awsEC2NetworkTraffic",["aws.ec2"],[{id:"tx",split_mode:"everything",metrics:[{field:"aws.ec2.network.out.bytes_per_sec",id:"avg-tx",type:"avg"}]},{id:"rx",split_mode:"everything",metrics:[{field:"aws.ec2.network.in.bytes_per_sec",id:"avg-rx",type:"avg"},{id:"calculation-rate",type:"calculation",variables:[{id:"rate-var",name:"rate",field:"avg-rx"}],script:"params.rate * -1"}]}]),w=f("awsEC2DiskIOBytes",["aws.ec2"],[{id:"write",split_mode:"everything",metrics:[{field:"aws.ec2.diskio.write.bytes_per_sec",id:"avg-write",type:"avg"}]},{id:"read",split_mode:"everything",metrics:[{field:"aws.ec2.diskio.read.bytes_per_sec",id:"avg-read",type:"avg"},{id:"calculation-rate",type:"calculation",variables:[{id:"rate-var",name:"rate",field:"avg-read"}],script:"params.rate * -1"}]}]),b={cpu:{cpu_avg:{avg:{field:"aws.ec2.cpu.total.pct"}},cpu:{bucket_script:{buckets_path:{cpu:"cpu_avg"},script:{source:"params.cpu",lang:"painless"},gap_policy:"skip"}}},rx:{rx:{avg:{field:"aws.ec2.network.in.bytes_per_sec"}}},tx:{tx:{avg:{field:"aws.ec2.network.in.bytes_per_sec"}}},diskIOReadBytes:{diskIOReadBytes:{avg:{field:"aws.ec2.diskio.read.bytes_per_sec"}}},diskIOWriteBytes:{diskIOWriteBytes:{avg:{field:"aws.ec2.diskio.write.bytes_per_sec"}}}},x=Object.keys(b),h={tsvb:{awsEC2CpuUtilization:_,awsEC2NetworkTraffic:k,awsEC2DiskIOBytes:w},snapshot:b,defaultSnapshot:"cpu",defaultTimeRangeInSeconds:14400},S={id:"awsEC2",displayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsEC2.displayName",{defaultMessage:"EC2 Instances"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsEC2.singularDisplayName",{defaultMessage:"EC2 Instance"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},metrics:h,fields:{id:"cloud.instance.id",name:"cloud.instance.name",ip:"aws.ec2.instance.public.ip"},requiredMetrics:["awsEC2CpuUtilization","awsEC2NetworkTraffic","awsEC2DiskIOBytes"],tooltipMetrics:["cpu","rx","tx"],nodeFilter:[{term:{"event.dataset":"aws.ec2"}}]},q=f("awsS3BucketSize",["aws.s3_daily_storage"],[{id:"bytes",split_mode:"everything",metrics:[{field:"aws.s3_daily_storage.bucket.size.bytes",id:"max-bytes",type:"max"}]}],">=86400s",!1),D=f("awsS3TotalRequests",["aws.s3_request"],[{id:"total",split_mode:"everything",metrics:[{field:"aws.s3_request.requests.total",id:"max-size",type:"max"}]}],">=300s"),M=f("awsS3NumberOfObjects",["aws.s3_daily_storage"],[{id:"objects",split_mode:"everything",metrics:[{field:"aws.s3_daily_storage.number_of_objects",id:"max-size",type:"max"}]}],">=86400s",!1),O=f("awsS3DownloadBytes",["aws.s3_request"],[{id:"bytes",split_mode:"everything",metrics:[{field:"aws.s3_request.downloaded.bytes",id:"max-bytes",type:"max"}]}],">=300s"),C=f("awsS3UploadBytes",["aws.s3_request"],[{id:"bytes",split_mode:"everything",metrics:[{field:"aws.s3_request.uploaded.bytes",id:"max-bytes",type:"max"}]}],">=300s"),T={s3BucketSize:{s3BucketSize:{max:{field:"aws.s3_daily_storage.bucket.size.bytes"}}},s3NumberOfObjects:{s3NumberOfObjects:{max:{field:"aws.s3_daily_storage.number_of_objects"}}},s3TotalRequests:{s3TotalRequests:{max:{field:"aws.s3_request.requests.total"}}},s3UploadBytes:{s3UploadBytes:{max:{field:"aws.s3_request.uploaded.bytes"}}},s3DownloadBytes:{s3DownloadBytes:{max:{field:"aws.s3_request.downloaded.bytes"}}}},R=Object.keys(T),B={tsvb:{awsS3BucketSize:q,awsS3TotalRequests:D,awsS3NumberOfObjects:M,awsS3DownloadBytes:O,awsS3UploadBytes:C},snapshot:T,defaultSnapshot:"s3BucketSize",defaultTimeRangeInSeconds:604800},N={id:"awsS3",displayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsS3.displayName",{defaultMessage:"S3 Buckets"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsS3.singularDisplayName",{defaultMessage:"S3 Bucket"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!1,uptime:!1},metrics:B,fields:{id:"aws.s3.bucket.name",name:"aws.s3.bucket.name"},requiredMetrics:["awsS3BucketSize","awsS3NumberOfObjects","awsS3TotalRequests","awsS3DownloadBytes","awsS3UploadBytes"],tooltipMetrics:["s3BucketSize","s3NumberOfObjects","s3TotalRequests","s3UploadBytes","s3DownloadBytes"]},E=f("awsRDSLatency",["aws.rds"],[{id:"read",split_mode:"everything",metrics:[{field:"aws.rds.latency.read",id:"avg",type:"avg"}]},{id:"write",split_mode:"everything",metrics:[{field:"aws.rds.latency.write",id:"avg",type:"avg"}]},{id:"insert",split_mode:"everything",metrics:[{field:"aws.rds.latency.insert",id:"avg",type:"avg"}]},{id:"update",split_mode:"everything",metrics:[{field:"aws.rds.latency.update",id:"avg",type:"avg"}]},{id:"commit",split_mode:"everything",metrics:[{field:"aws.rds.latency.commit",id:"avg",type:"avg"}]}]),U=f("awsRDSConnections",["aws.rds"],[{id:"connections",split_mode:"everything",metrics:[{field:"aws.rds.database_connections",id:"avg-conns",type:"avg"}]}]),j=f("awsRDSCpuTotal",["aws.rds"],[{id:"cpu",split_mode:"everything",metrics:[{field:"aws.rds.cpu.total.pct",id:"avg-cpu",type:"avg"},{id:"convert-to-percent",script:"params.avg",type:"calculation",variables:[{field:"avg-cpu",id:"var-avg",name:"avg"}]}]}]),I=f("awsRDSQueriesExecuted",["aws.rds"],[{id:"queries",split_mode:"everything",metrics:[{field:"aws.rds.queries",id:"avg-queries",type:"avg"}]}]),P=f("awsRDSActiveTransactions",["aws.rds"],[{id:"active",split_mode:"everything",metrics:[{field:"aws.rds.transactions.active",id:"avg",type:"avg"}]},{id:"blocked",split_mode:"everything",metrics:[{field:"aws.rds.transactions.blocked",id:"avg",type:"avg"}]}]),K={cpu:{cpu_avg:{avg:{field:"aws.rds.cpu.total.pct"}},cpu:{bucket_script:{buckets_path:{cpu:"cpu_avg"},script:{source:"params.cpu",lang:"painless"},gap_policy:"skip"}}},rdsLatency:{rdsLatency:{avg:{field:"aws.rds.latency.dml"}}},rdsConnections:{rdsConnections:{avg:{field:"aws.rds.database_connections"}}},rdsQueriesExecuted:{rdsQueriesExecuted:{avg:{field:"aws.rds.queries"}}},rdsActiveTransactions:{rdsActiveTransactions:{avg:{field:"aws.rds.transactions.active"}}}},Q=Object.keys(K),z={tsvb:{awsRDSLatency:E,awsRDSConnections:U,awsRDSCpuTotal:j,awsRDSQueriesExecuted:I,awsRDSActiveTransactions:P},snapshot:K,defaultSnapshot:"cpu",defaultTimeRangeInSeconds:14400},A={id:"awsRDS",displayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsRDS.displayName",{defaultMessage:"RDS Databases"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsRDS.singularDisplayName",{defaultMessage:"RDS Database"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!1,uptime:!1},metrics:z,fields:{id:"aws.rds.db_instance.arn",name:"aws.rds.db_instance.identifier"},requiredMetrics:["awsRDSCpuTotal","awsRDSConnections","awsRDSQueriesExecuted","awsRDSActiveTransactions","awsRDSLatency"],tooltipMetrics:["cpu","rdsLatency","rdsConnections","rdsQueriesExecuted","rdsActiveTransactions"]},L=f("awsSQSMessagesVisible",["aws.sqs"],[{id:"visible",split_mode:"everything",metrics:[{field:"aws.sqs.messages.visible",id:"avg-visible",type:"avg"}]}],">=300s"),F=f("awsSQSMessagesDelayed",["aws.sqs"],[{id:"delayed",split_mode:"everything",metrics:[{field:"aws.sqs.messages.delayed",id:"avg-delayed",type:"avg"}]}],">=300s"),$=f("awsSQSMessagesSent",["aws.sqs"],[{id:"sent",split_mode:"everything",metrics:[{field:"aws.sqs.messages.sent",id:"avg-sent",type:"avg"}]}],">=300s"),V=f("awsSQSMessagesEmpty",["aws.sqs"],[{id:"empty",split_mode:"everything",metrics:[{field:"aws.sqs.messages.not_visible",id:"avg-empty",type:"avg"}]}],">=300s"),H=f("awsSQSOldestMessage",["aws.sqs"],[{id:"oldest",split_mode:"everything",metrics:[{field:"aws.sqs.oldest_message_age.sec",id:"max-oldest",type:"max"}]}],">=300s"),W={sqsMessagesVisible:{sqsMessagesVisible:{avg:{field:"aws.sqs.messages.visible"}}},sqsMessagesDelayed:{sqsMessagesDelayed:{max:{field:"aws.sqs.messages.delayed"}}},sqsMessagesEmpty:{sqsMessagesEmpty:{max:{field:"aws.sqs.messages.not_visible"}}},sqsMessagesSent:{sqsMessagesSent:{max:{field:"aws.sqs.messages.sent"}}},sqsOldestMessage:{sqsOldestMessage:{max:{field:"aws.sqs.oldest_message_age.sec"}}}},X=Object.keys(W),J={tsvb:{awsSQSMessagesVisible:L,awsSQSMessagesDelayed:F,awsSQSMessagesSent:$,awsSQSMessagesEmpty:V,awsSQSOldestMessage:H},snapshot:W,defaultSnapshot:"sqsMessagesVisible",defaultTimeRangeInSeconds:14400},G={id:"awsSQS",displayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsSQS.displayName",{defaultMessage:"SQS Queues"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModels.awsSQS.singularDisplayName",{defaultMessage:"SQS Queue"}),requiredModule:"aws",crosslinkSupport:{details:!0,logs:!0,apm:!1,uptime:!1},metrics:J,fields:{id:"aws.sqs.queue.name",name:"aws.sqs.queue.name"},requiredMetrics:["awsSQSMessagesVisible","awsSQSMessagesDelayed","awsSQSMessagesSent","awsSQSMessagesEmpty","awsSQSOldestMessage"],tooltipMetrics:["sqsMessagesVisible","sqsMessagesDelayed","sqsMessagesEmpty","sqsMessagesSent","sqsOldestMessage"]},Y=(e,t,i)=>({[`${e}_interfaces`]:{terms:{field:i},aggregations:{[`${e}_interface_max`]:{max:{field:t}}}},[`${e}_sum_of_interfaces`]:{sum_bucket:{buckets_path:`${e}_interfaces>${e}_interface_max`}},[`${e}_deriv`]:{derivative:{buckets_path:`${e}_sum_of_interfaces`,gap_policy:"skip",unit:"1s"}},[e]:{bucket_script:{buckets_path:{value:`${e}_deriv[normalized_value]`},script:{source:"params.value > 0.0 ? params.value : 0.0",lang:"painless"},gap_policy:"skip"}}}),Z={cpu:{cpu:{avg:{field:"docker.cpu.total.pct"}}},memory:{memory:{avg:{field:"docker.memory.usage.pct"}}},rx:Y("rx","docker.network.inbound.bytes","docker.network.interface"),tx:Y("tx","docker.network.outbound.bytes","docker.network.interface")},ee=Object.keys(Z),te={tsvb:{containerOverview:(e,t,i)=>({id:"containerOverview",requires:["docker"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"docker.cpu.total.pct",id:"avg-cpu-total",type:"avg"}]},{id:"memory",split_mode:"everything",metrics:[{field:"docker.memory.usage.pct",id:"avg-memory",type:"avg"}]},{id:"tx",split_mode:"everything",metrics:[{field:"docker.network.out.bytes",id:"avg-network-out",type:"avg"}]},{id:"rx",split_mode:"everything",metrics:[{field:"docker.network.in.bytes",id:"avg-network-in",type:"avg"}]}]}),containerCpuUsage:(e,t,i)=>({id:"containerCpuUsage",requires:["docker.cpu"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"docker.cpu.total.pct",id:"avg-cpu-total",type:"avg"}]}]}),containerCpuKernel:(e,t,i)=>({id:"containerCpuKernel",requires:["docker.cpu"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"kernel",split_mode:"everything",metrics:[{field:"docker.cpu.kernel.pct",id:"avg-cpu-kernel",type:"avg"}]}]}),containerDiskIOOps:(e,t,i)=>({id:"containerDiskIOOps",requires:["docker.diskio"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"read",split_mode:"everything",metrics:[{field:"docker.diskio.read.ops",id:"max-diskio-read-ops",type:"max"},{field:"max-diskio-read-ops",id:"deriv-max-diskio-read-ops",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-diskio-read-ops",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-diskio-read-ops"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]},{id:"write",split_mode:"everything",metrics:[{field:"docker.diskio.write.ops",id:"max-diskio-write-ops",type:"max"},{field:"max-diskio-write-ops",id:"deriv-max-diskio-write-ops",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-diskio-write-ops",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-diskio-write-ops"}],script:"params.rate > 0.0 ? params.rate : 0.0"},{id:"calc-invert-rate",script:"params.rate * -1",type:"calculation",variables:[{field:"posonly-deriv-max-diskio-write-ops",id:"var-rate",name:"rate"}]}]}]}),containerDiskIOBytes:(e,t,i)=>({id:"containerDiskIOBytes",requires:["docker.diskio"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"read",split_mode:"everything",metrics:[{field:"docker.diskio.read.bytes",id:"max-diskio-read-bytes",type:"max"},{field:"max-diskio-read-bytes",id:"deriv-max-diskio-read-bytes",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-diskio-read-bytes",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-diskio-read-bytes"}],script:"params.rate > 0.0 ? params.rate : 0.0"}]},{id:"write",split_mode:"everything",metrics:[{field:"docker.diskio.write.bytes",id:"max-diskio-write-bytes",type:"max"},{field:"max-diskio-write-bytes",id:"deriv-max-diskio-write-bytes",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-diskio-write-bytes",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-diskio-write-bytes"}],script:"params.rate > 0.0 ? params.rate : 0.0"},{id:"calc-invert-rate",script:"params.rate * -1",type:"calculation",variables:[{field:"posonly-deriv-max-diskio-write-bytes",id:"var-rate",name:"rate"}]}]}]}),containerNetworkTraffic:(e,t,i)=>({id:"containerNetworkTraffic",requires:["docker.network"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"tx",metrics:[{field:"docker.network.outbound.bytes",id:"max-net-out",type:"max"},{field:"max-net-out",id:"deriv-max-net-out",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-net-out",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-net-out"}],script:"params.rate > 0.0 ? params.rate : 0.0"},{function:"sum",id:"seriesagg-sum",type:"series_agg"}],split_mode:"terms",terms_field:"docker.network.interface"},{id:"rx",metrics:[{field:"docker.network.inbound.bytes",id:"max-net-in",type:"max"},{field:"max-net-in",id:"deriv-max-net-in",type:"derivative",unit:"1s"},{id:"posonly-deriv-max-net-in",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"deriv-max-net-in"}],script:"params.rate > 0.0 ? params.rate : 0.0"},{id:"calc-invert-rate",script:"params.rate * -1",type:"calculation",variables:[{field:"posonly-deriv-max-net-in",id:"var-rate",name:"rate"}]},{function:"sum",id:"seriesagg-sum",type:"series_agg"}],split_mode:"terms",terms_field:"docker.network.interface"}]}),containerMemory:(e,t,i)=>({id:"containerMemory",requires:["docker.memory"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"memory",split_mode:"everything",metrics:[{field:"docker.memory.usage.pct",id:"avg-memory",type:"avg"}]}]}),containerK8sCpuUsage:(e,t,i)=>({id:"containerK8sCpuUsage",requires:["kubernetes.container"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"kubernetes.container.cpu.usage.limit.pct",id:"avg-cpu",type:"avg"}]}]}),containerK8sOverview:(e,t,i)=>({id:"containerK8sOverview",requires:["kubernetes.container"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"cpu",split_mode:"everything",metrics:[{field:"kubernetes.container.cpu.usage.limit.pct",id:"avg-cpu-total",type:"avg"}]},{id:"memory",split_mode:"everything",metrics:[{field:"kubernetes.container.memory.usage.limit.pct",id:"avg-memory-total",type:"avg"}]}]}),containerK8sMemoryUsage:(e,t,i)=>({id:"containerK8sMemoryUsage",requires:["kubernetes.container"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"memory",split_mode:"everything",metrics:[{field:"kubernetes.container.memory.usage.limit.pct",id:"avg-memory",type:"avg"}]}]})},snapshot:Z,getFormulas:async()=>await i.e(4).then(i.bind(null,28)).then((({formulas:e})=>e)),getCharts:async()=>await i.e(2).then(i.bind(null,83)).then((({charts:e})=>e)),defaultSnapshot:"cpu",defaultTimeRangeInSeconds:3600},ie={id:"container",displayName:s.i18n.translate("xpack.metricsData.inventoryModel.container.displayName",{defaultMessage:"Docker Containers"}),singularDisplayName:s.i18n.translate("xpack.metricsData.inventoryModel.container.singularDisplayName",{defaultMessage:"Docker Container"}),requiredModule:"docker",crosslinkSupport:{details:!0,logs:!0,apm:!0,uptime:!0},fields:{id:"container.id",name:"container.name",ip:"container.ip_address"},metrics:te,requiredMetrics:["containerOverview","containerCpuUsage","containerMemory","containerNetworkTraffic","containerDiskIOBytes","containerDiskIOOps","containerK8sOverview","containerK8sCpuUsage","containerK8sMemoryUsage"],tooltipMetrics:["cpu","memory","rx","tx"]},se={tsvb:{...l.tsvb,nginxActiveConnections:(e,t,i)=>({id:"nginxActiveConnections",requires:["nginx.stubstatus"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"connections",metrics:[{field:"nginx.stubstatus.active",id:"avg-active",type:"avg"}],split_mode:"everything"}]}),nginxHits:(e,t,i)=>({id:"nginxHits",requires:["nginx.access"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"200s",metrics:[{id:"count-200",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[200 TO 299]",language:"lucene"}},{id:"300s",metrics:[{id:"count-300",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[300 TO 399]",language:"lucene"}},{id:"400s",metrics:[{id:"count-400",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[400 TO 499]",language:"lucene"}},{id:"500s",metrics:[{id:"count-500",type:"count"}],split_mode:"filter",filter:{query:"http.response.status_code:[500 TO 599]",language:"lucene"}}]}),nginxRequestRate:(e,t,i)=>({id:"nginxRequestRate",requires:["nginx.stubstatus"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"rate",metrics:[{field:"nginx.stubstatus.requests",id:"max-requests",type:"max"},{field:"max-requests",id:"derv-max-requests",type:"derivative",unit:"1s"},{id:"posonly-derv-max-requests",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"derv-max-requests"}],script:"params.rate > 0.0 ? params.rate : 0.0"}],split_mode:"everything"}]}),nginxRequestsPerConnection:(e,t,i)=>({id:"nginxRequestsPerConnection",requires:["nginx.stubstatus"],index_pattern:t,interval:i,time_field:e,type:"timeseries",series:[{id:"reqPerConns",metrics:[{field:"nginx.stubstatus.handled",id:"max-handled",type:"max"},{field:"nginx.stubstatus.requests",id:"max-requests",type:"max"},{id:"reqs-per-connection",type:"calculation",variables:[{id:"var-handled",name:"handled",field:"max-handled"},{id:"var-requests",name:"requests",field:"max-requests"}],script:"params.handled > 0.0 && params.requests > 0.0 ? params.handled / params.requests : 0.0"}],split_mode:"everything"}]}),awsCpuUtilization:(e,t)=>({id:"awsCpuUtilization",requires:["aws.ec2"],map_field_to:"cloud.instance.id",id_type:"cloud",index_pattern:t,interval:">=5m",time_field:e,type:"timeseries",series:[{id:"cpu-util",metrics:[{field:"aws.ec2.cpu.total.pct",id:"avg-cpu-util",type:"avg"}],split_mode:"everything"}]}),awsDiskioBytes:(e,t)=>({id:"awsDiskioBytes",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"writes",metrics:[{field:"aws.ec2.diskio.write.bytes",id:"sum-diskio-out",type:"sum"},{id:"csum-sum-diskio-out",field:"sum-diskio-out",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-out",unit:"1s",type:"derivative",field:"csum-sum-diskio-out"},{id:"posonly-deriv-csum-sum-diskio-out",field:"deriv-csum-sum-diskio-out",type:"positive_only"}],split_mode:"everything"},{id:"reads",metrics:[{field:"aws.ec2.diskio.read.bytes",id:"sum-diskio-in",type:"sum"},{id:"csum-sum-diskio-in",field:"sum-diskio-in",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-in",unit:"1s",type:"derivative",field:"csum-sum-diskio-in"},{id:"posonly-deriv-csum-sum-diskio-in",field:"deriv-csum-sum-diskio-in",type:"positive_only"},{id:"inverted-posonly-deriv-csum-sum-diskio-in",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"posonly-deriv-csum-sum-diskio-in"}],script:"params.rate * -1"}],split_mode:"everything"}]}),awsDiskioOps:(e,t)=>({id:"awsDiskioOps",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"writes",metrics:[{field:"aws.ec2.diskio.write.count",id:"sum-diskio-writes",type:"sum"},{id:"csum-sum-diskio-writes",field:"sum-diskio-writes",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-writes",unit:"1s",type:"derivative",field:"csum-sum-diskio-writes"},{id:"posonly-deriv-csum-sum-diskio-writes",field:"deriv-csum-sum-diskio-writes",type:"positive_only"}],split_mode:"everything"},{id:"reads",metrics:[{field:"aws.ec2.diskio.read.count",id:"sum-diskio-reads",type:"sum"},{id:"csum-sum-diskio-reads",field:"sum-diskio-reads",type:"cumulative_sum"},{id:"deriv-csum-sum-diskio-reads",unit:"1s",type:"derivative",field:"csum-sum-diskio-reads"},{id:"posonly-deriv-csum-sum-diskio-reads",field:"deriv-csum-sum-diskio-reads",type:"positive_only"},{id:"inverted-posonly-deriv-csum-sum-diskio-reads",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"posonly-deriv-csum-sum-diskio-reads"}],script:"params.rate * -1"}],split_mode:"everything"}]}),awsNetworkBytes:(e,t)=>({id:"awsNetworkBytes",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"tx",metrics:[{field:"aws.ec2.network.out.bytes",id:"sum-net-out",type:"sum"},{id:"csum-sum-net-out",field:"sum-net-out",type:"cumulative_sum"},{id:"deriv-csum-sum-net-out",unit:"1s",type:"derivative",field:"csum-sum-net-out"},{id:"posonly-deriv-csum-sum-net-out",field:"deriv-csum-sum-net-out",type:"positive_only"}],split_mode:"everything"},{id:"rx",metrics:[{field:"aws.ec2.network.in.bytes",id:"sum-net-in",type:"sum"},{id:"csum-sum-net-in",field:"sum-net-in",type:"cumulative_sum"},{id:"deriv-csum-sum-net-in",unit:"1s",type:"derivative",field:"csum-sum-net-in"},{id:"posonly-deriv-csum-sum-net-in",field:"deriv-csum-sum-net-in",type:"positive_only"},{id:"inverted-posonly-deriv-csum-sum-net-in",type:"calculation",variables:[{id:"var-rate",name:"rate",field:"posonly-deriv-csum-sum-net-in"}],script:"params.rate * -1"}],split_mode:"everything"}]}),awsNetworkPackets:(e,t)=>({id:"awsNetworkPackets",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"timeseries",series:[{id:"packets-out",metrics:[{field:"aws.ec2.network.out.packets",id:"avg-net-out",type:"avg"}],split_mode:"everything"},{id:"packets-in",metrics:[{field:"aws.ec2.network.in.packets",id:"avg-net-in",type:"avg"},{id:"inverted-avg-net-in",type:"calculation",variables:[{id:"var-avg",name:"avg",field:"avg-net-in"}],script:"params.avg * -1"}],split_mode:"everything"}]}),awsOverview:(e,t)=>({id:"awsOverview",requires:["aws.ec2"],index_pattern:t,map_field_to:"cloud.instance.id",id_type:"cloud",interval:">=5m",time_field:e,type:"top_n",series:[{id:"cpu-util",split_mode:"everything",metrics:[{field:"aws.ec2.cpu.total.pct",id:"cpu-total-pct",type:"max"}]},{id:"status-check-failed",split_mode:"everything",metrics:[{field:"aws.ec2.status.check_failed",id:"status-check-failed",type:"max"}]},{id:"packets-out",split_mode:"everything",metrics:[{field:"aws.ec2.network.out.packets",id:"network-out-packets",type:"avg"}]},{id:"packets-in",split_mode:"everything",metrics:[{field:"aws.ec2.network.in.packets",id:"network-in-packets",type:"avg"}]}]}),...v.tsvb,...te.tsvb,...h.tsvb,...B.tsvb,...z.tsvb,...J.tsvb}},ae={host:p,pod:g,container:ie,awsEC2:S,awsS3:N,awsRDS:A,awsSQS:G},re=Object.values(ae),ne=e=>{const t=re.find((t=>t.id===e));if(!t)throw new Error(s.i18n.translate("xpack.metricsData.inventoryModels.findInventoryModel.error",{defaultMessage:"The inventory model you've attempted to find does not exist"}));return t},de=["host","pod","container"],oe=e=>{switch(e){case"pod":return"kubernetes.pod.uid";case"host":return"host.name";case"container":return"container.id"}},le=e=>{const t=ne(e);if(de.includes(e)){const i=oe(e)||t.fields.id;return{...t.fields,id:i}}return t.fields};var ce=i(0);const pe=ce.keyof({host:null,pod:null,container:null,awsEC2:null,awsS3:null,awsSQS:null,awsRDS:null}),me=ce.keyof({line:null,area:null,bar:null}),ue=ce.keyof({abbreviatedNumber:null,bits:null,bytes:null,number:null,percent:null,highPrecision:null}),ye=ce.keyof({hostSystemOverview:null,hostCpuUsage:null,hostFilesystem:null,hostK8sOverview:null,hostK8sCpuCap:null,hostK8sDiskCap:null,hostK8sMemoryCap:null,hostK8sPodCap:null,hostLoad:null,hostMemoryUsage:null,hostNetworkTraffic:null,hostDockerOverview:null,hostDockerInfo:null,hostDockerTop5ByCpu:null,hostDockerTop5ByMemory:null,podOverview:null,podCpuUsage:null,podMemoryUsage:null,podLogUsage:null,podNetworkTraffic:null,containerOverview:null,containerCpuKernel:null,containerCpuUsage:null,containerDiskIOOps:null,containerDiskIOBytes:null,containerMemory:null,containerNetworkTraffic:null,containerK8sOverview:null,containerK8sCpuUsage:null,containerK8sMemoryUsage:null,nginxHits:null,nginxRequestRate:null,nginxActiveConnections:null,nginxRequestsPerConnection:null,awsOverview:null,awsCpuUtilization:null,awsNetworkBytes:null,awsNetworkPackets:null,awsDiskioBytes:null,awsDiskioOps:null,awsEC2CpuUtilization:null,awsEC2NetworkTraffic:null,awsEC2DiskIOBytes:null,awsS3TotalRequests:null,awsS3NumberOfObjects:null,awsS3BucketSize:null,awsS3DownloadBytes:null,awsS3UploadBytes:null,awsRDSCpuTotal:null,awsRDSConnections:null,awsRDSQueriesExecuted:null,awsRDSActiveTransactions:null,awsRDSLatency:null,awsSQSMessagesVisible:null,awsSQSMessagesDelayed:null,awsSQSMessagesSent:null,awsSQSMessagesEmpty:null,awsSQSOldestMessage:null,custom:null}),ve=ce.keyof({avg:null,max:null,min:null,calculation:null,cardinality:null,series_agg:null,positive_only:null,derivative:null,count:null,sum:null,cumulative_sum:null}),ge=ce.type({id:ce.string,type:ce.literal("count")}),fe=ce.intersection([ce.type({id:ce.string,type:ve}),ce.partial({field:ce.string})]),_e=ce.type({field:ce.string,id:ce.string,name:ce.string}),ke=ce.type({id:ce.string,script:ce.string,type:ce.literal("calculation"),variables:ce.array(_e)}),we=ce.type({id:ce.string,field:ce.string,unit:ce.string,type:ce.literal("derivative")}),be=ce.type({id:ce.string,function:ce.string,type:ce.literal("series_agg")}),xe=ce.type({id:ce.string,value:ce.number}),he=ce.intersection([ce.type({id:ce.string,type:ce.literal("percentile"),percentiles:ce.array(xe)}),ce.partial({field:ce.string})]),Se=ce.union([ge,fe,ke,we,he,be]),qe=ce.intersection([ce.type({id:ce.string,metrics:ce.array(Se),split_mode:ce.string}),ce.partial({terms_field:ce.string,terms_size:ce.number,terms_order_by:ce.string,filter:ce.type({query:ce.string,language:ce.keyof({lucene:null,kuery:null})})})]),De=(ce.intersection([ce.type({id:ye,requires:ce.array(ce.string),index_pattern:ce.union([ce.string,ce.array(ce.string)]),interval:ce.string,time_field:ce.string,type:ce.string,series:ce.array(qe)}),ce.partial({filter:ce.string,map_field_to:ce.string,id_type:ce.keyof({cloud:null,node:null}),drop_last_bucket:ce.boolean})]),ce.record(ce.string,ce.union([ce[void 0],ce.type({field:ce.string})]))),Me=ce.type({percentiles:ce.type({field:ce.string,percents:ce.array(ce.number)})}),Oe=ce.type({cardinality:ce.partial({field:ce.string})}),Ce=ce.type({bucket_script:ce.intersection([ce.type({buckets_path:ce.record(ce.string,ce.string),script:ce.type({source:ce.string,lang:ce.keyof({painless:null,expression:null})})}),ce.partial({gap_policy:ce.keyof({skip:null,insert_zeros:null})})])}),Te=ce.type({cumulative_sum:ce.type({buckets_path:ce.string})}),Re=ce.type({derivative:ce.type({buckets_path:ce.string,gap_policy:ce.keyof({skip:null,insert_zeros:null}),unit:ce.string})}),Be=ce.type({sum_bucket:ce.type({buckets_path:ce.string})}),Ne=ce.type({top_metrics:ce.intersection([ce.type({metrics:ce.union([ce.array(ce.type({field:ce.string})),ce.type({field:ce.string})])}),ce.partial({size:ce.number,sort:ce.record(ce.string,ce.union([ce.literal("desc"),ce.literal("asc")]))})])}),Ee=ce.type({filter:ce.type({exists:ce.type({field:ce.string})}),aggs:ce.type({period:ce.type({max:ce.type({field:ce.string})})})}),Ue=ce.recursion("SnapshotModelRT",(()=>ce.type({terms:ce.type({field:ce.string}),aggregations:Ie}))),je=ce.union([De,Me,Ce,Te,Re,Be,Ue,Oe,Ne,Ee]),Ie=ce.record(ce.string,je),Pe={count:null,cpu:null,diskLatency:null,diskSpaceUsage:null,load:null,memory:null,memoryFree:null,memoryTotal:null,normalizedLoad1m:null,tx:null,rx:null,logRate:null,diskIOReadBytes:null,diskIOWriteBytes:null,s3TotalRequests:null,s3NumberOfObjects:null,s3BucketSize:null,s3DownloadBytes:null,s3UploadBytes:null,rdsConnections:null,rdsQueriesExecuted:null,rdsActiveTransactions:null,rdsLatency:null,sqsMessagesVisible:null,sqsMessagesDelayed:null,sqsMessagesSent:null,sqsMessagesEmpty:null,sqsOldestMessage:null,custom:null},Ke=ce.keyof(Pe)},function(e,t,i){"use strict";i.r(t),i.d(t,"plugin",(function(){return u}));var s=i(4),a=i.n(s);class MetricsDataClient{constructor(e){this.http=e}async metricsExplorer(e){return this.http.post("/api/infra/metrics_explorer",{body:JSON.stringify(e)})}async metricsIndices(){return this.http.get("/api/metrics/indices")}}var r=i(2),n=i(3);const d=Object(r.lazy)((()=>Promise.all([i.e(0),i.e(6)]).then(i.bind(null,84))));function o(e,t){return({timerange:i,filterClauseDsl:s,sourceId:a})=>Object(n.jsx)(r.Suspense,{fallback:null},Object(n.jsx)(d,{core:e,metricsClient:t,sourceId:a||"default",timerange:i,filterClauseDsl:s}))}const l=Object(r.lazy)((()=>Promise.all([i.e(0),i.e(7)]).then(i.bind(null,85))));function c(e,t){return({timerange:i,filterClauseDsl:s,sourceId:a})=>Object(n.jsx)(r.Suspense,{fallback:null},Object(n.jsx)(l,{core:e,metricsClient:t,sourceId:a||"default",timerange:i,filterClauseDsl:s}))}const p=Object(r.lazy)((()=>Promise.all([i.e(0),i.e(8)]).then(i.bind(null,86))));function m(e,t){return({timerange:i,filterClauseDsl:s,sourceId:a})=>Object(n.jsx)(r.Suspense,{fallback:null},Object(n.jsx)(p,{core:e,metricsClient:t,sourceId:a||"default",timerange:i,filterClauseDsl:s}))}class plugin_Plugin{constructor(e){a()(this,"logger",void 0),this.logger=e.logger.get()}setup(e){return{metricsClient:new MetricsDataClient(e.http)}}start(e){const t=new MetricsDataClient(e.http);return{metricsClient:t,ContainerMetricsTable:o(e,t),HostMetricsTable:c(e,t),PodMetricsTable:m(e,t)}}stop(){}}const u=e=>new plugin_Plugin(e)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,i){i.r(t);var s=__kbnBundles__.get("plugin/observabilityShared/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(s))},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t,i){i.r(t);var s=__kbnBundles__.get("plugin/kibanaReact/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(s))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t,i){i.r(t);var s=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(s))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom}]);