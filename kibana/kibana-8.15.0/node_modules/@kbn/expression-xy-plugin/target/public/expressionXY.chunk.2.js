(window.expressionXY_bundle_jsonpfunction=window.expressionXY_bundle_jsonpfunction||[]).push([[2],{35:function(r,e,o){"use strict";o.d(e,"a",(function(){return s})),o.d(e,"c",(function(){return l})),o.d(e,"b",(function(){return d})),o.d(e,"d",(function(){return a})),o.d(e,"e",(function(){return c})),o.d(e,"f",(function(){return v}));var t=o(30),n=o(2);const i=(r,e)=>`${r}-${e}`;function s(r,e){return r.filter((r=>void 0!==r)).map(((r,o)=>{return{...r,layerId:(t=r,t.layerId?r.layerId:i(e,o))};var t}))}const a=r=>{var e;return null!==(e=r.showLines)&&void 0!==e?e:r.seriesType===n.v.LINE||r.seriesType!==n.v.AREA};function l(r){return r.filter((r=>r.layerType===n.q.DATA||!r.layerType))}function d(r,e){var o;let n=r.splitAccessors,i=r.xAccessor,s=null!==(o=r.accessors)&&void 0!==o?o:[],a=r.markSizeAccessor;if(!(n&&n.length||i||s&&s.length||a)){var l,d,u,c;const r=null===(l=e.columns.find((r=>r.id===t.PointSeriesColumnNames.Y)))||void 0===l?void 0:l.id,o=null===(d=e.columns.find((r=>r.id===t.PointSeriesColumnNames.COLOR)))||void 0===d?void 0:d.id;i=null===(u=e.columns.find((r=>r.id===t.PointSeriesColumnNames.X)))||void 0===u?void 0:u.id,n=o?[o]:[],s=r?[r]:[],a=null===(c=e.columns.find((r=>r.id===t.PointSeriesColumnNames.SIZE)))||void 0===c?void 0:c.id}return{splitAccessors:n,xAccessor:i,accessors:s,markSizeAccessor:a}}var u=o(10);function c(r){return r.every((r=>{var e;return!(!r.xAccessor||"date"!==(null===(e=Object(u.getColumnByAccessor)(r.xAccessor,r.table.columns))||void 0===e?void 0:e.meta.type)||r.xScaleType&&r.xScaleType!==n.x.TIME)}))}var p=o(14),f=o.n(p);function v(r,e){const o=e&&Object(u.getColumnByAccessor)(e,r.columns);if(o&&"date"===(null==o?void 0:o.meta.type)){const e=o.id;if(!r.rows.some((r=>"string"==typeof r[e]&&"__other__"!==r[e])))return r;const t=r.rows.map((r=>"string"!=typeof r[e]?r:{...r,[e]:f()(r[e]).valueOf()}));return{...r,rows:t}}return r}},39:function(r,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"c",(function(){return l})),o.d(e,"b",(function(){return d})),o.d(e,"f",(function(){return u})),o.d(e,"e",(function(){return c})),o.d(e,"g",(function(){return p})),o.d(e,"q",(function(){return f})),o.d(e,"d",(function(){return h})),o.d(e,"j",(function(){return b})),o.d(e,"k",(function(){return m})),o.d(e,"h",(function(){return y})),o.d(e,"p",(function(){return x})),o.d(e,"o",(function(){return E})),o.d(e,"i",(function(){return A})),o.d(e,"l",(function(){return g})),o.d(e,"n",(function(){return w})),o.d(e,"m",(function(){return N}));var t=o(0),n=o(15),i=o(2),s=o(35);const a={markSizeAccessorForNonLineOrAreaChartsError:()=>t.i18n.translate("expressionXY.reusable.function.dataLayer.errors.markSizeAccessorForNonLineOrAreaChartsError",{defaultMessage:"`markSizeAccessor` can't be used. Dots are applied only for line or area charts"}),markSizeRatioLimitsError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.markSizeLimitsError",{defaultMessage:"Mark size ratio must be greater or equal to 1 and less or equal to 100"}),lineWidthForNonLineOrAreaChartError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.lineWidthForNonLineOrAreaChartError",{defaultMessage:"`lineWidth` can be applied only for line or area charts"}),showPointsForNonLineOrAreaChartError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.showPointsForNonLineOrAreaChartError",{defaultMessage:"`showPoints` can be applied only for line or area charts"}),pointsRadiusForNonLineOrAreaChartError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.pointsRadiusForNonLineOrAreaChartError",{defaultMessage:"`pointsRadius` can be applied only for line or area charts"}),linesVisibilityForNonLineChartError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.linesVisibilityForNonLineChartError",{defaultMessage:"Lines visibility can be controlled only at line charts"}),markSizeRatioWithoutAccessor:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.markSizeRatioWithoutAccessor",{defaultMessage:"Mark size ratio can be applied only with `markSizeAccessor`"}),extendBoundsAreInvalidError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.extendBoundsAreInvalidError",{defaultMessage:"For area and bar modes, and custom extent mode, the lower bound should be less or greater than 0 and the upper bound - be greater or equal than 0"}),notUsedFillOpacityError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.notUsedFillOpacityError",{defaultMessage:"`fillOpacity` argument is applicable only for area charts."}),valueLabelsForNotBarsChartsError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.valueLabelsForNotBarChartsError",{defaultMessage:"`valueLabels` argument is applicable only for bar charts."}),dataBoundsForNotLineChartError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.dataBoundsForNotLineChartError",{defaultMessage:"Only line charts can be fit to the data bounds"}),extentFullModeIsInvalidError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.extentFullModeIsInvalid",{defaultMessage:"For x axis extent, the full mode is not supported."}),extentModeNotSupportedError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.extentModeNotSupportedError",{defaultMessage:"X axis extent is only supported for numeric histograms."}),timeMarkerForNotTimeChartsError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.timeMarkerForNotTimeChartsError",{defaultMessage:"Only time charts can have current time marker"}),isInvalidIntervalError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.isInvalidIntervalError",{defaultMessage:"Provided x-axis interval is invalid. The interval should include quantity and unit names. Examples: 1d, 24h, 1w."}),minTimeBarIntervalNotForTimeBarChartError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.minTimeBarIntervalNotForTimeBarChartError",{defaultMessage:"`minTimeBarInterval` argument is applicable only for time bar charts."}),invalidMinBarHeightError:()=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.invalidMinBarHeightError",{defaultMessage:"The min bar height should be a positive integer, representing pixel height of the bar."}),axisIsNotAssignedError:r=>t.i18n.translate("expressionXY.reusable.function.xyVis.errors.axisIsNotAssignedError",{defaultMessage:'Axis with id: "{axisId}" is not assigned to any accessor. Please assign axis using the following construction: `decorations=\'{dataDecorationConfig forAccessor="your-accessor" axisId="{axisId}"}\'`',values:{axisId:r}})},l=r=>r.some((({seriesType:r})=>r===i.v.BAR)),d=r=>r.some((({seriesType:r})=>r===i.v.AREA)),u=(r,e,o,t)=>{null==o||o.forEach((o=>{var t;if(o.extent&&!o.extent.enforce){if(e&&(null===(t=o.extent)||void 0===t?void 0:t.mode)===i.d.CUSTOM&&!(r=>{const e=void 0===r.lowerBound||void 0!==r.lowerBound&&r.lowerBound<=0,o=void 0===r.upperBound||void 0!==r.upperBound&&r.upperBound>=0;return e&&o})(o.extent))throw new Error(a.extendBoundsAreInvalidError());((r,e)=>{if(!e.some((({seriesType:r})=>r===i.v.LINE))&&r.mode===i.d.DATA_BOUNDS)throw new Error(a.dataBoundsForNotLineChartError())})(o.extent,r)}})),((r,e)=>{if(r){if(r.mode===i.d.FULL)throw new Error(a.extentFullModeIsInvalidError());if(Object(s.e)(e)||e.every((({isHistogram:r})=>!r)))throw new Error(a.extentModeNotSupportedError())}})(null==t?void 0:t.extent,r)},c=(r,e)=>{null==e||e.forEach((e=>{if(e.id&&r.every((r=>{var o;return!r.decorations||(null===(o=r.decorations)||void 0===o?void 0:o.every((r=>r.axisId!==e.id)))})))throw new Error(a.axisIsNotAssignedError(e.id))}))},p=(r,e)=>{if(void 0!==r&&!e)throw new Error(a.notUsedFillOpacityError())},f=(r,e)=>{if(!e&&r!==i.w.HIDE)throw new Error(a.valueLabelsForNotBarsChartsError())},v=r=>r===i.v.LINE||r===i.v.AREA,h=(r,e)=>{if(e&&!Object(s.e)(r))throw new Error(a.timeMarkerForNotTimeChartsError())},b=(r,e)=>{if(r&&!v(e))throw new Error(a.markSizeAccessorForNonLineOrAreaChartsError())},m=r=>{if(void 0!==r&&(r<1||r>100))throw new Error(a.markSizeRatioLimitsError())},y=(r,e)=>{if(void 0!==r&&!v(e))throw new Error(a.lineWidthForNonLineOrAreaChartError())},x=(r,e)=>{if(void 0!==r&&!v(e))throw new Error(a.showPointsForNonLineOrAreaChartError())},E=(r,e)=>{if(void 0!==r&&!v(e))throw new Error(a.pointsRadiusForNonLineOrAreaChartError())},A=(r,e)=>{if(r&&!v(e))throw new Error(a.linesVisibilityForNonLineChartError())},g=(r,e)=>{if(void 0!==r&&!e)throw new Error(a.markSizeRatioWithoutAccessor())},w=(r,e,o)=>{if(o){if(!Object(n.isValidInterval)(o))throw new Error(a.isInvalidIntervalError());if(!e||!Object(s.e)(r))throw new Error(a.minTimeBarIntervalNotForTimeBarChartError())}},N=r=>{if(void 0!==r&&r<0)throw new Error(a.invalidMinBarHeightError())}},44:function(r,e,o){"use strict";o.d(e,"b",(function(){return s})),o.d(e,"a",(function(){return l}));var t=o(10),n=o(2),i=o(1);const s=(r,e,o,s,l)=>{var u;null!=e&&null!==(u=e.inspectorAdapters)&&void 0!==u&&u.tables&&(e.inspectorAdapters.tables.reset(),e.inspectorAdapters.tables.allowCsvExport=!0,r.forEach((r=>{if(r.layerType===n.q.ANNOTATIONS||r.type===n.s)return;const a=d(r);a.push([o?[o]:void 0,i.a.getSplitColumnHelp()]),a.push([s?[s]:void 0,i.a.getSplitRowHelp()]);const l=Object(t.prepareLogTable)(r.table,a,!0);e.inspectorAdapters.tables.logDatatable(r.layerId,l)})),l&&l.layers.forEach((r=>{const o=a(l.datatable,r);e.inspectorAdapters.tables.logDatatable(r.layerId,o)})))},a=(r,e)=>{const o=[[["label"],i.a.getLabelLabel()],[["time"],i.a.getTimeLabel()]],n=new Set(e.annotations.map((r=>r.id)));return e.annotations.filter((r=>"query_point_event_annotation"===r.type)).forEach((r=>{const e=[...r.extraFields?r.extraFields:[],...r.textField?[r.textField]:[]].map((r=>[[`field:${r}`],r]));o.push(...e)})),Object(t.prepareLogTable)({...r,rows:r.rows.filter((r=>n.has(r.id)))},o,!0)},l=(r,e,o,s,a)=>{if(o.inspectorAdapters.tables){o.inspectorAdapters.tables.reset(),o.inspectorAdapters.tables.allowCsvExport=!0;const l=e.reduce(((r,e)=>e.layerType===n.q.ANNOTATIONS||e.type===n.s?r:[...r,...d(e)]),[]);l.push([s?[s]:void 0,i.a.getSplitColumnHelp()]),l.push([a?[a]:void 0,i.a.getSplitRowHelp()]);const u=Object(t.prepareLogTable)(r,l,!0);o.inspectorAdapters.tables.logDatatable("default",u)}},d=r=>{let e,o,t;r.layerType===n.q.DATA&&(e=r.xAccessor,o=r.splitAccessors,t=r.markSizeAccessor);const{accessors:s,layerType:a}=r;return[[s||void 0,a===n.q.DATA?i.a.getMetricHelp():i.a.getReferenceLineHelp()],[e?[e]:void 0,i.a.getXAxisHelp()],[o||void 0,i.a.getBreakdownHelp()],[t?[t]:void 0,i.a.getMarkSizeHelp()]]}},84:function(r,e,o){"use strict";o.r(e),o.d(e,"layeredXyVisFn",(function(){return a}));var t=o(2),n=o(44),i=o(39),s=o(35);const a=async(r,e,o)=>{var a,l,d,u,c,p,f,v,h,b,m,y,x,E;const A=Object(s.a)(null!==(a=e.layers)&&void 0!==a?a:[],"layers"),g=Object(s.c)(A);e.singleTable?Object(n.a)(r,A,o,e.splitColumnAccessor,e.splitRowAccessor):Object(n.b)(A,o,e.splitColumnAccessor,e.splitRowAccessor,e.annotations);const w=Object(i.c)(g);Object(i.d)(g,e.addTimeMarker),Object(i.k)(e.markSizeRatio),Object(i.n)(g,w,e.minTimeBarInterval);const N=g.filter((r=>void 0!==r.markSizeAccessor)).length>0;if(!N&&void 0!==e.markSizeRatio)throw new Error(i.a.markSizeRatioWithoutAccessor());return Object(i.e)(g,e.yAxisConfigs),{type:"render",as:t.A,value:{args:{...e,layers:A,minBarHeight:null!==(l=e.minBarHeight)&&void 0!==l?l:1,markSizeRatio:N&&!e.markSizeRatio?10:e.markSizeRatio,ariaLabel:null!==(d=null!==(u=e.ariaLabel)&&void 0!==u?u:null===(c=o.variables)||void 0===c?void 0:c.embeddableTitle)&&void 0!==d?d:null===(p=o.getExecutionContext)||void 0===p||null===(f=p.call(o))||void 0===f?void 0:f.description},canNavigateToLens:Boolean(o.variables.canNavigateToLens),syncColors:null!==(v=null==o||null===(h=o.isSyncColorsEnabled)||void 0===h?void 0:h.call(o))&&void 0!==v&&v,syncTooltips:null!==(b=null==o||null===(m=o.isSyncTooltipsEnabled)||void 0===m?void 0:m.call(o))&&void 0!==b&&b,syncCursor:null===(y=null==o||null===(x=o.isSyncCursorEnabled)||void 0===x?void 0:x.call(o))||void 0===y||y,overrides:null===(E=o.variables)||void 0===E?void 0:E.overrides}}}}}]);