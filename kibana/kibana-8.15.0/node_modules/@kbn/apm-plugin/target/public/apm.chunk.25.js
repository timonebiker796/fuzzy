/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.apm_bundle_jsonpfunction=window.apm_bundle_jsonpfunction||[]).push([[25],{1253:function(e,t,a){"use strict";a.r(t),a.d(t,"APM_ALERTING_THROUGHPUT_CHART_EMBEDDABLE",(function(){return v})),a.d(t,"getApmAlertingThroughputChartEmbeddableFactory",(function(){return g}));var n=a(1),r=a.n(n),i=a(263),o=a(12),s=a(252),c=a(10),u=a(251),l=a(253),m=a(254),p=a(255);function T({rule:e,rangeFrom:t="now-15m",rangeTo:a="now",transactionName:n,kuery:i,filters:o,serviceName:s,transactionType:T,environment:v=c.a.value}){const{comparisonChartTheme:g,setTransactionType:E,transactionType:h,transactionTypes:d,timeZone:y}=Object(l.a)({rule:e,rangeTo:a,rangeFrom:t,defaultTransactionType:T,serviceName:s});return t&&a?s&&h?r.a.createElement(u.a,{transactionType:h,transactionTypes:d,setTransactionType:E,transactionName:n,serviceName:s,environment:v,start:t,end:a,comparisonChartTheme:g,timeZone:y,comparisonEnabled:!1,offset:"",kuery:i,filters:o}):r.a.createElement(p.a,null):r.a.createElement(m.a,null)}const v="APM_ALERTING_THROUGHPUT_CHART_EMBEDDABLE",g=e=>({type:v,deserializeState:e=>e.rawState,buildEmbeddable:async(t,a,n,c)=>{const{titlesApi:u,titleComparators:l,serializeTitles:m}=Object(i.a)(t),p=new o.BehaviorSubject(t.serviceName),v=new o.BehaviorSubject(t.transactionType),g=new o.BehaviorSubject(t.transactionName),E=new o.BehaviorSubject(t.environment),h=new o.BehaviorSubject(t.rangeFrom),d=new o.BehaviorSubject(t.rangeTo),y=new o.BehaviorSubject(t.rule),f=new o.BehaviorSubject(t.alert),b=new o.BehaviorSubject(t.kuery),w=new o.BehaviorSubject(t.filters);return{api:a({...u,serializeState:()=>({rawState:{...m(),serviceName:p.getValue(),transactionType:v.getValue(),transactionName:g.getValue(),environment:E.getValue(),rangeFrom:h.getValue(),rangeTo:d.getValue(),rule:y.getValue(),alert:f.getValue(),kuery:b.getValue(),filters:w.getValue()}})},{serviceName:[p,e=>p.next(e)],transactionType:[v,e=>v.next(e)],transactionName:[g,e=>g.next(e)],environment:[E,e=>E.next(e)],rangeFrom:[h,e=>h.next(e)],rangeTo:[d,e=>d.next(e)],rule:[y,e=>y.next(e)],alert:[f,e=>f.next(e)],kuery:[b,e=>b.next(e)],filters:[w,e=>w.next(e)],...l}),Component:()=>{const[t,a,n,o,c,u,l,m,x,N]=Object(i.b)(p,v,g,E,h,d,y,f,b,w);return r.a.createElement(s.a,{deps:e,rangeFrom:c,rangeTo:u},r.a.createElement(T,{rule:l,alert:m,serviceName:t,transactionType:a,environment:o,rangeFrom:c,rangeTo:u,transactionName:n,kuery:x,filters:N}))}}}})},251:function(e,t,a){"use strict";var n=a(1),r=a.n(n),i=a(11),o=a(0),s=a(86),c=a(74),u=a(142),l=a(108),m=a(98),p=a(9),T=a(152),v=a(153);const g={currentPeriod:[],previousPeriod:[]};t.a=function({transactionType:e,transactionTypes:t,setTransactionType:a,transactionName:n,serviceName:E,environment:h,start:d,end:y,comparisonChartTheme:f,comparisonEnabled:b,offset:w,timeZone:x,kuery:N="",filters:S}){const j=Object(l.a)({start:d,end:y,numBuckets:100,kuery:N,type:n?m.a.TransactionMetric:m.a.ServiceTransactionMetric}),{data:k=g,status:F}=Object(c.d)((t=>{if(E&&e&&d&&y&&j)return t("GET /internal/apm/services/{serviceName}/throughput",{params:{path:{serviceName:E},query:{environment:h,kuery:N,filters:S?JSON.stringify(S):void 0,start:d,end:y,transactionType:e,transactionName:n,documentType:j.source.documentType,rollupInterval:j.source.rollupInterval,bucketSizeInSeconds:j.bucketSizeInSeconds}}})}),[h,E,d,y,e,n,j,N,S]),{currentPeriodColor:B,previousPeriodColor:C}=Object(s.b)(s.a.THROUGHPUT),I=[{data:k.currentPeriod,type:"linemark",color:B,title:o.i18n.translate("xpack.apm.serviceOverview.throughtputChartTitle",{defaultMessage:"Throughput"})},...b?[{data:k.previousPeriod,type:"area",color:C,title:""}]:[]],O=a&&t;return r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiPanel,{hasBorder:!0},r.a.createElement(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiTitle,{size:"xs"},r.a.createElement("h2",null,o.i18n.translate("xpack.apm.serviceOverview.throughtputChartTitle",{defaultMessage:"Throughput"})))),r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(i.EuiIconTip,{content:o.i18n.translate("xpack.apm.serviceOverview.tpmHelp",{defaultMessage:"Throughput is measured in transactions per minute (tpm)."}),position:"right"})),O&&r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(T.a,{transactionType:e,transactionTypes:t,onChange:a})),r.a.createElement(i.EuiFlexItem,null,r.a.createElement(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},r.a.createElement(i.EuiFlexItem,{grow:!1},r.a.createElement(v.a,{serviceName:E,environment:h,from:d,to:y,kuery:N,transactionName:n,transactionType:e}))))),r.a.createElement(u.a,{id:"throughput",height:200,comparisonEnabled:b,offset:w,fetchStatus:F,customTheme:f,timeseries:I,yLabelFormat:p.g,timeZone:x})))}}}]);