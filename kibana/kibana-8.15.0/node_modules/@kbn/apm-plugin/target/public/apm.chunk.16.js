/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.apm_bundle_jsonpfunction=window.apm_bundle_jsonpfunction||[]).push([[16],{103:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a(17),i=a(1),l=a(85);function o(){const{services:e,notifications:t}=Object(r.useKibana)(),[a,o]=Object(i.useState)();return Object(i.useEffect)((()=>{(async function(){const a=await async function(){return(await Object(l.callApmApi)("GET /internal/apm/data_view/index_pattern",{signal:null})).apmDataViewIndexPattern}();try{const t=!1;return await e.dataViews.create({title:a,timeFieldName:"@timestamp"},void 0,t)}catch(e){if(e.message.includes("No matching indices found"))return;throw t.toasts.danger({title:n.i18n.translate("xpack.apm.data_view.creation_failed",{defaultMessage:"An error occurred while creating the data view"}),body:e.message}),e}})().then(o)}),[t.toasts,e.dataViews]),{dataView:a}}},113:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));let n=function(e){return e.CRITICAL="critical",e.MAJOR="major",e.MINOR="minor",e.WARNING="warning",e.LOW="low",e.UNKNOWN="unknown",e}({})},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(11),r=a(6),i=a(1),l=a.n(i),o=a(74);function s({customOptions:e,customOptionText:t,defaultValue:a,fieldName:s,start:u,end:c,onChange:m,placeholder:d,isInvalid:p,dataTestSubj:g,isClearable:f=!0,prepend:h,serviceName:v}){var y;let b;a&&(b={label:a,value:a});const[x,E]=Object(i.useState)(b?[b]:[]),[w,S]=Object(i.useState)(""),{data:T,status:M}=Object(o.d)((e=>e("GET /internal/apm/suggestions",{params:{query:{fieldName:s,fieldValue:w,start:u,end:c,serviceName:v}}})),[s,w,u,c,v],{preservePreviousData:!1}),O=Object(i.useCallback)((e=>{E(e),0===e.length&&m(""),1===e.length&&m(e[0].value?e[0].value.trim():e[0].value)}),[m]),k=Object(i.useCallback)((e=>{O([{label:e,value:e}])}),[O]),N=[...e||[],...(null!==(y=null==T?void 0:T.terms)&&void 0!==y?y:[]).map((e=>({label:e,value:e})))];return l.a.createElement(n.EuiComboBox,{async:!0,customOptionText:t,isClearable:f,isLoading:M===o.a.LOADING,onChange:O,onSearchChange:Object(r.throttle)(S,500),options:N,placeholder:d,selectedOptions:x,singleSelection:{asPlainText:!0},isInvalid:p,style:{minWidth:"256px"},onCreateOption:k,"data-test-subj":g,prepend:h})}},123:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return i}));var n=a(3);function r(e){return t=>e(t).formatted}function i(e){const t=null==e?void 0:e.flatMap((e=>e.data)).map((e=>e.y)).filter(n.a);return null!=t&&t.length?Math.max(...t,0):0}},1234:function(e,t,a){"use strict";a.r(t),a.d(t,"TransactionDurationRuleType",(function(){return O}));var n=a(11),r=a(0),i=a(6),l=a(1),o=a.n(l),s=a(17),u=a(41),c=a(138),m=a(10),d=a(9),p=a(74),g=a(85),f=a(123),h=a(181),v=a(149),y=a(140),b=a(150),x=a(128),E=a(182),w=a(14),S=a(139),T=a(188);const M={[c.d.Avg]:r.i18n.translate("xpack.apm.transactionDurationAlert.aggregationType.avg",{defaultMessage:"Average"}),[c.d.P95]:r.i18n.translate("xpack.apm.transactionDurationAlert.aggregationType.95th",{defaultMessage:"95th percentile"}),[c.d.P99]:r.i18n.translate("xpack.apm.transactionDurationAlert.aggregationType.99th",{defaultMessage:"99th percentile"})};function O(e){var t,a;const{services:O}=Object(s.useKibana)(),{ruleParams:k,metadata:N,setRuleParams:C,setRuleProperty:A}=e;Object(l.useEffect)((()=>{Object(g.createCallApmApi)(O)}),[O]);const j=Object(i.defaults)({...Object(i.omit)(N,["start","end"]),...k},{aggregationType:c.d.Avg,threshold:1500,windowSize:5,windowUnit:u.TIME_UNITS.MINUTE,environment:m.a.value}),{data:F,status:I}=Object(p.d)((e=>{const{interval:t,start:a,end:n}=Object(y.b)({windowSize:j.windowSize,windowUnit:j.windowUnit});var r,i;if(j.windowSize&&a&&n)return e("GET /internal/apm/rule_types/transaction_duration/chart_preview",{params:{query:{aggregationType:j.aggregationType,environment:j.environment,serviceName:j.serviceName,transactionType:j.transactionType,transactionName:j.transactionName,interval:t,start:a,end:n,groupBy:j.groupBy,searchConfiguration:null!==(r=j.searchConfiguration)&&void 0!==r&&null!==(i=r.query)&&void 0!==i&&i.query?JSON.stringify(j.searchConfiguration):void 0}}})}),[j.aggregationType,j.environment,j.serviceName,j.transactionType,j.transactionName,j.windowSize,j.windowUnit,j.groupBy,j.searchConfiguration]),R=null==F?void 0:F.latencyChartPreview,L=null!==(t=null==R?void 0:R.series)&&void 0!==t?t:[],P=L.length>0,z=null!==(a=null==R?void 0:R.totalGroups)&&void 0!==a?a:0,G=Object(f.a)(L),V=Object(d.o)(G),D=Object(f.b)(V),U=1e3*j.threshold,W=Object(p.c)(I)?o.a.createElement(S.b,null):P?I===p.a.SUCCESS?o.a.createElement(h.a,{series:L,threshold:U,yTickFormat:D,uiSettings:O.uiSettings,timeSize:j.windowSize,timeUnit:j.windowUnit,totalGroups:z}):o.a.createElement(S.a,null):o.a.createElement(S.c,null),_=Object(l.useCallback)((e=>{C("groupBy",null!=e?e:[])}),[C]),q=[o.a.createElement(v.d,{allowAll:!1,currentValue:j.serviceName,onChange:e=>{e!==j.serviceName&&(C("serviceName",e),C("transactionType",void 0),C("transactionName",void 0),C("environment",m.a.value))}}),o.a.createElement(v.f,{currentValue:j.transactionType,onChange:e=>C("transactionType",e),serviceName:j.serviceName}),o.a.createElement(v.a,{currentValue:j.environment,onChange:e=>C("environment",""!==e?e:m.a.value),serviceName:j.serviceName}),o.a.createElement(v.e,{currentValue:j.transactionName,onChange:e=>C("transactionName",e),serviceName:j.serviceName})],B=[o.a.createElement(x.a,{value:j.aggregationType,title:r.i18n.translate("xpack.apm.transactionDurationRuleType.when",{defaultMessage:"When"})},o.a.createElement(n.EuiSelect,{"data-test-subj":"apmTransactionDurationRuleTypeSelect",value:j.aggregationType,options:Object(i.map)(M,((e,t)=>({text:e,value:t}))),onChange:e=>C("aggregationType",e.target.value),compressed:!0})),o.a.createElement(v.c,{value:j.threshold,unit:r.i18n.translate("xpack.apm.transactionDurationRuleType.ms",{defaultMessage:"ms"}),onChange:e=>C("threshold",e||0)}),o.a.createElement(u.ForLastExpression,{onChangeWindowSize:e=>C("windowSize",e||""),onChangeWindowUnit:e=>C("windowUnit",e),timeWindowSize:j.windowSize,timeWindowUnit:j.windowUnit,errors:{timeWindowSize:[],timeWindowUnit:[]}})],K=[...k.useKqlFilter?[]:q,...B],J=o.a.createElement(o.a.Fragment,null,o.a.createElement(n.EuiFormRow,{label:r.i18n.translate("xpack.apm.ruleFlyout.transactionDuration.createAlertPerText",{defaultMessage:"Group alerts by"}),helpText:r.i18n.translate("xpack.apm.ruleFlyout.transactionDuration.createAlertPerHelpText",{defaultMessage:'Create an alert for every unique value. For example: "transaction.name". By default, alert is created for every unique service.name, service.environment and transaction.type.'}),fullWidth:!0,display:"rowCompressed"},o.a.createElement(E.a,{onChange:_,options:{groupBy:k.groupBy},fields:[w.L],preSelectedOptions:[w.x,w.v,w.M]})),o.a.createElement(n.EuiSpacer,{size:"m"})),Q=o.a.createElement(o.a.Fragment,null,o.a.createElement(T.a,{ruleParams:k,setRuleParams:C,onToggleKqlFilter:e=>{C("serviceName",void 0),C("transactionType",void 0),C("transactionName",void 0),C("environment",m.a.value),C("searchConfiguration",{query:{query:"",language:"kuery"}}),C("useKqlFilter",e.target.checked)}}));return o.a.createElement(b.a,{minimumWindowSize:{value:5,unit:u.TIME_UNITS.MINUTE},chartPreview:W,defaultParams:j,fields:K,groupAlertsBy:J,kqlFilter:Q,setRuleParams:C,setRuleProperty:A})}t.default=O},126:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));let n=function(e){return e[e.CRITICAL=75]="CRITICAL",e[e.MAJOR=50]="MAJOR",e[e.MINOR=25]="MINOR",e[e.WARNING=3]="WARNING",e[e.LOW=0]="LOW",e}({})},128:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1),r=a.n(n),i=a(11);function l(e){const{title:t,value:a,children:l,color:o,dataTestSubj:s}=e,[u,c]=Object(n.useState)(!1);return r.a.createElement(i.EuiPopover,{isOpen:u,anchorPosition:"downLeft",closePopover:()=>c(!1),button:r.a.createElement(i.EuiExpression,{"data-test-subj":s,description:t,value:a,isActive:u,color:o,onClick:()=>c((e=>!e))}),repositionOnScroll:!0},l)}},136:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));let n=function(e){return e.txLatency="txLatency",e.txThroughput="txThroughput",e.txFailureRate="txFailureRate",e}({});n.txLatency,n.txThroughput,n.txFailureRate},138:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return g})),a.d(t,"b",(function(){return f}));var n=a(0),r=(a(15),a(113)),i=a(126),l=a(73),o=(a(14),a(10),a(136));const s="apm";let u=function(e){return e.Avg="avg",e.P95="95th",e.P99="99th",e}({});const c="threshold_met",m={id:c,name:n.i18n.translate("xpack.apm.a.thresholdMet",{defaultMessage:"Threshold met"})},d={[l.a.ErrorCount]:{name:n.i18n.translate("xpack.apm.errorCountAlert.name",{defaultMessage:"Error count threshold"}),actionGroups:[m],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:s,isExportable:!0},[l.a.TransactionDuration]:{name:n.i18n.translate("xpack.apm.transactionDurationAlert.name",{defaultMessage:"Latency threshold"}),actionGroups:[m],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:s,isExportable:!0},[l.a.Anomaly]:{name:n.i18n.translate("xpack.apm.anomalyAlert.name",{defaultMessage:"APM Anomaly"}),actionGroups:[m],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:s,isExportable:!0},[l.a.TransactionErrorRate]:{name:n.i18n.translate("xpack.apm.transactionErrorRateAlert.name",{defaultMessage:"Failed transaction rate threshold"}),actionGroups:[m],defaultActionGroupId:c,minimumLicenseRequired:"basic",producer:s,isExportable:!0}},p=[{type:r.a.CRITICAL,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.criticalLabel",{defaultMessage:"critical"}),threshold:i.a.CRITICAL},{type:r.a.MAJOR,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.majorLabel",{defaultMessage:"major"}),threshold:i.a.MAJOR},{type:r.a.MINOR,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.minor",{defaultMessage:"minor"}),threshold:i.a.MINOR},{type:r.a.WARNING,label:n.i18n.translate("xpack.apm.alerts.anomalySeverity.warningLabel",{defaultMessage:"warning"}),threshold:i.a.WARNING}];function g(e){switch(e){case o.a.txLatency:return n.i18n.translate("xpack.apm.alerts.anomalyDetector.latencyLabel",{defaultMessage:"latency"});case o.a.txThroughput:return n.i18n.translate("xpack.apm.alerts.anomalyDetector.throughputLabel",{defaultMessage:"throughput"});case o.a.txFailureRate:return n.i18n.translate("xpack.apm.alerts.anomalyDetector.failedTransactionRateLabel",{defaultMessage:"failed transaction rate"})}}const f=[o.a.txLatency,o.a.txThroughput,o.a.txFailureRate].map((e=>({type:e,label:g(e)})))},139:function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"e",(function(){return g}));var n=a(1),r=a.n(n),i=a(11),l=a(33),o=a(0);const s={s:o.i18n.translate("xpack.apm.alerts.timeLabels.seconds",{defaultMessage:"seconds"}),m:o.i18n.translate("xpack.apm.alerts.timeLabels.minutes",{defaultMessage:"minutes"}),h:o.i18n.translate("xpack.apm.alerts.timeLabels.hours",{defaultMessage:"hours"}),d:o.i18n.translate("xpack.apm.alerts.timeLabels.days",{defaultMessage:"days"})},u=e=>{const t=e.flatMap((e=>e.data.map((e=>e.x)))),a=e.flatMap((e=>e.data.map((e=>e.y||0))));return{xMax:Math.max(...t),xMin:Math.min(...t),yMax:Math.max(...a),yMin:Math.min(...a)}},c=({children:e})=>r.a.createElement("div",{style:{width:"100%",height:150,display:"flex",justifyContent:"center",alignItems:"center"}},e);function m(){return r.a.createElement(c,null,r.a.createElement(i.EuiText,{color:"subdued","data-test-subj":"noChartData"},r.a.createElement(l.FormattedMessage,{id:"xpack.apm.alerts.charts.noDataMessage",defaultMessage:"No chart data available"})))}function d(){return r.a.createElement(c,null,r.a.createElement(i.EuiText,{color:"subdued","data-test-subj":"loadingData"},r.a.createElement(i.EuiLoadingChart,{size:"m"})))}function p(){return r.a.createElement(c,null,r.a.createElement(i.EuiText,{color:"subdued","data-test-subj":"chartErrorState"},r.a.createElement(l.FormattedMessage,{id:"xpack.apm.alerts.charts.errorMessage",defaultMessage:"Uh oh, something went wrong"})))}function g({lookback:e,timeLabel:t,displayedGroups:a,totalGroups:n}){return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(i.EuiText,{size:"xs",color:"subdued"},r.a.createElement(l.FormattedMessage,{id:"xpack.apm.alerts.timeLabelForData",defaultMessage:"Last {lookback} {timeLabel} of data, showing {displayedGroups}/{totalGroups} groups",values:{lookback:e,timeLabel:t,displayedGroups:a,totalGroups:n}})))}},140:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return l}));var n=a(7),r=a.n(n);const i=5;function l({windowSize:e,windowUnit:t}){const a=Date.now(),n=a-r.a.duration(e,t).asMilliseconds()*i;return{interval:`${e}${t}`,start:new Date(n).toISOString(),end:new Date(a).toISOString()}}},149:function(e,t,a){"use strict";a.d(t,"d",(function(){return p})),a.d(t,"a",(function(){return g})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return h})),a.d(t,"b",(function(){return v})),a.d(t,"c",(function(){return b}));var n=a(7),r=a.n(n),i=a(11),l=a(0),o=a(1),s=a.n(o),u=a(14),c=a(10),m=a(121),d=a(128);function p({allowAll:e=!0,currentValue:t,onChange:a}){return s.a.createElement(d.a,{dataTestSubj:"apmServiceField",value:t||c.c,title:l.i18n.translate("xpack.apm.alerting.fields.service",{defaultMessage:"Service"})},s.a.createElement(m.a,{customOptions:e?[{label:c.c,value:void 0}]:void 0,customOptionText:l.i18n.translate("xpack.apm.serviceNamesSelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new service name"}),defaultValue:t,fieldName:u.x,onChange:a,placeholder:l.i18n.translate("xpack.apm.serviceNamesSelectPlaceholder",{defaultMessage:"Select service name"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString()}))}function g({currentValue:e,onChange:t,serviceName:a}){return s.a.createElement(d.a,{dataTestSubj:"apmEnvironmentField",value:Object(c.e)(e),title:l.i18n.translate("xpack.apm.alerting.fields.environment",{defaultMessage:"Environment"})},s.a.createElement(m.a,{customOptions:[c.a],customOptionText:l.i18n.translate("xpack.apm.environmentsSelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new environment"}),defaultValue:Object(c.e)(e),fieldName:u.v,onChange:t,placeholder:l.i18n.translate("xpack.apm.environmentsSelectPlaceholder",{defaultMessage:"Select environment"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString(),serviceName:a}))}function f({currentValue:e,onChange:t,serviceName:a}){const n=l.i18n.translate("xpack.apm.alerting.fields.transaction.name",{defaultMessage:"Name"});return s.a.createElement(d.a,{dataTestSubj:"apmTransactionNameField",value:e||c.c,title:n},s.a.createElement(m.a,{customOptions:[{label:c.c,value:void 0}],customOptionText:l.i18n.translate("xpack.apm.alerting.transaction.name.custom.text",{defaultMessage:"Add \\{searchValue\\} as a new transaction name"}),defaultValue:e,fieldName:u.L,onChange:t,placeholder:l.i18n.translate("xpack.apm.transactionNamesSelectPlaceholder",{defaultMessage:"Select transaction name"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString(),serviceName:a}))}function h({currentValue:e,onChange:t,serviceName:a}){const n=l.i18n.translate("xpack.apm.alerting.fields.type",{defaultMessage:"Type"});return s.a.createElement(d.a,{dataTestSubj:"apmTransactionTypeField",value:e||c.c,title:n},s.a.createElement(m.a,{customOptions:[{label:c.c,value:void 0}],customOptionText:l.i18n.translate("xpack.apm.transactionTypesSelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new transaction type"}),defaultValue:e,fieldName:u.M,onChange:t,placeholder:l.i18n.translate("xpack.apm.transactionTypesSelectPlaceholder",{defaultMessage:"Select transaction type"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString(),serviceName:a}))}function v({currentValue:e,onChange:t,serviceName:a}){const n=l.i18n.translate("xpack.apm.alerting.fields.error.group.id",{defaultMessage:"Error grouping key"});return s.a.createElement(d.a,{dataTestSubj:"apmErrorGroupingKeyField",value:e||c.c,title:n},s.a.createElement(m.a,{customOptions:[{label:c.c,value:void 0}],customOptionText:l.i18n.translate("xpack.apm.errorKeySelectCustomOptionText",{defaultMessage:"Add \\{searchValue\\} as a new error grouping key"}),defaultValue:e,fieldName:u.l,onChange:t,placeholder:l.i18n.translate("xpack.apm.errorGroupingKeySelectPlaceholder",{defaultMessage:"Select error grouping key"}),start:r()().subtract(24,"h").toISOString(),end:r()().toISOString(),serviceName:a}))}function y(e){return!isNaN(Number(e))&&""!==e.trim()}function b({value:e,unit:t,onChange:a,step:n}){const[r,u]=Object(o.useState)(!1),[c,m]=Object(o.useState)(String(e));return s.a.createElement(i.EuiPopover,{isOpen:r,anchorPosition:"downLeft",ownFocus:!0,closePopover:()=>{u(!1)},button:s.a.createElement(i.EuiExpression,{value:`${e}${t}`,description:l.i18n.translate("xpack.apm.transactionErrorRateRuleType.isAbove",{defaultMessage:"is above"}),isInvalid:!y(c),isActive:r,onClick:()=>{u(!0)}})},s.a.createElement(i.EuiFormRow,{isInvalid:!y(c),error:l.i18n.translate("xpack.apm.transactionErrorRateRuleType.error.validThreshold",{defaultMessage:"Thresholds must contain a valid number."})},s.a.createElement(i.EuiFieldNumber,{"data-test-subj":"apmIsAboveFieldFieldNumber",min:0,value:c,onChange:e=>{const t=e.target.value;m(t),isNaN(Number(t))||a(Number(t))},append:t,isInvalid:!y(c),compressed:!0,step:n})))}},150:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(11),r=a(1),i=a.n(r),l=a(0),o=a(7),s=a.n(o),u=a(41);function c(e){const{fields:t,groupAlertsBy:a,kqlFilter:l,setRuleParams:o,defaultParams:u,chartPreview:c,minimumWindowSize:d}=e,p={...u},g=function({windowSize:e,windowUnit:t,minimumWindowSize:a}){const[n,i]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{if(void 0===e||void 0===a)return;const n=s.a.duration(e,t).asMilliseconds(),r=s.a.duration(a.value,a.unit).asMilliseconds();i(n<r)}),[e,t,a]),n}({windowSize:p.windowSize,windowUnit:p.windowUnit,minimumWindowSize:d});return Object(r.useEffect)((()=>{Object.keys(p).forEach((e=>{o(e,p[e])}))}),[]),i.a.createElement(i.a.Fragment,null,g&&d&&i.a.createElement(m,{minimumWindowSize:d}),l,i.a.createElement(n.EuiFlexGrid,{gutterSize:"l",direction:"row",columns:2},t.map(((e,t)=>i.a.createElement(n.EuiFlexItem,{grow:!1,key:t},e)))),c,i.a.createElement(n.EuiSpacer,{size:"m"}),a)}function m({minimumWindowSize:e}){const t=l.i18n.translate("xpack.apm.alertTypes.minimumWindowSize.description",{defaultMessage:"The recommended minimum value is {sizeValue} {sizeUnit}. This is to ensure that the alert has enough data to evaluate. If you choose a value that is too low, the alert may not fire as expected.",values:{sizeValue:e.value,sizeUnit:Object(u.getTimeUnitLabel)(e.unit)}});return i.a.createElement(n.EuiCallOut,{title:`Please increase "For the last" to at least ${e.value} ${Object(u.getTimeUnitLabel)(e.unit)}`,color:"warning",iconType:"warning"},i.a.createElement("p",null,t))}},181:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(36),r=a(11),i=a(1),l=a.n(i),o=a(19),s=a(7),u=a.n(s),c=a(0),m=a(83),d=a(130),p=a(139),g=a(140);function f({yTickFormat:e,threshold:t,uiSettings:a,series:s,timeSize:f=5,timeUnit:h="m",totalGroups:v}){const y=Object(m.a)(),b={fill:y.eui.euiColorVis2,line:{strokeWidth:2,stroke:y.eui.euiColorVis2,opacity:1},opacity:.3},x=Object(i.useMemo)((()=>s.flatMap((e=>e.data.map((t=>({...t,groupBy:e.name})))))),[s]),E=Object(d.a)(a),w=s.length>1?30*Math.ceil(s.length/2):35*s.length,{yMin:S,yMax:T,xMin:M,xMax:O}=Object(p.f)(s),k={max:1.1*Math.max(0===T?1:T,t),min:.9*Math.min(S,t)},N=Object(i.useMemo)((()=>Object(n.niceTimeFormatter)([M,O])),[M,O]),C=f*g.a,A=p.d[h],j=[{coordinates:{x0:M,x1:O,y0:t,y1:k.max}}];return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.EuiSpacer,{size:"m"}),l.a.createElement(n.Chart,{size:{height:150+w},"data-test-subj":"ChartPreview"},l.a.createElement(n.Tooltip,{headerFormatter:({value:e})=>{const t=a&&a.get(o.UI_SETTINGS.DATE_FORMAT)||"Y-MM-DD HH:mm:ss";return u()(e).format(t)}}),l.a.createElement(n.Settings,{showLegend:!0,legendPosition:"bottom",legendSize:w,locale:c.i18n.getLocale()}),l.a.createElement(n.LineAnnotation,{dataValues:[{dataValue:t}],domainType:n.AnnotationDomainType.YDomain,id:"chart_preview_line_annotation",markerPosition:"left",style:b}),l.a.createElement(n.RectAnnotation,{dataValues:j,hideTooltips:!0,id:"chart_preview_rect_annotation",style:b}),l.a.createElement(n.Axis,{id:"chart_preview_x_axis",position:n.Position.Bottom,showOverlappingTicks:!0,tickFormat:N}),l.a.createElement(n.Axis,{id:"chart_preview_y_axis",position:n.Position.Left,tickFormat:e,ticks:5,domain:k}),l.a.createElement(n.BarSeries,{id:"apm-chart-preview",xScaleType:n.ScaleType.Time,yScaleType:n.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],splitSeriesAccessors:["groupBy"],data:x,barSeriesStyle:{rectBorder:{strokeWidth:1,visible:!0},rect:{opacity:1}},timeZone:E})),s.length>0&&l.a.createElement(p.e,{lookback:C,timeLabel:A,displayedGroups:s.length,totalGroups:v}))}},182:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(11),r=a(0),i=a(1),l=a.n(i);function o({options:e,fields:t,preSelectedOptions:a,onChange:o,errorOptions:s}){const u=Object(i.useCallback)((e=>{const t=e.map((e=>e.label));o([...new Set(a.concat(t))])}),[o,a]),c=[...a.map((e=>({label:e,color:"lightgray",disabled:!0}))),...(m=e.groupBy,(null!=m?m:[]).filter((e=>!a.includes(e))).map((e=>({label:e,color:null!=s&&s.includes(e)?"danger":void 0}))))];var m;return l.a.createElement(n.EuiComboBox,{"data-test-subj":"apmRule-groupBy",placeholder:r.i18n.translate("xpack.apm.ruleFlyout.groupByLabel",{defaultMessage:"Everything"}),"aria-label":r.i18n.translate("xpack.apm.ruleFlyout.groupByAriaLabel",{defaultMessage:"Group by"}),fullWidth:!0,singleSelection:!1,selectedOptions:c,options:t.map((e=>({label:e}))),onChange:u,isClearable:!1})}},188:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),r=a(1),i=a.n(r),l=a(11),o=a(17),s=a(103);function u({placeholder:e,ruleParams:t,setRuleParams:a}){var r;const{services:l}=Object(o.useKibana)(),{unifiedSearch:{ui:{SearchBar:u}}}=l,{dataView:c}=Object(s.a)(),m=e=>{const{query:t}=e;a("searchConfiguration",{query:t})};return i.a.createElement(u,{appName:n.i18n.translate("xpack.apm.appName",{defaultMessage:"APM"}),iconType:"search",placeholder:e||"Search for APM dataâ€¦ (e.g. service.name: service-1)",indexPatterns:c?[c]:void 0,showQueryInput:!0,showQueryMenu:!1,showFilterBar:!1,showDatePicker:!1,showSubmitButton:!1,displayStyle:"inPage",onQueryChange:m,onQuerySubmit:m,dataTestSubj:"apmRuleUnifiedSearchBar",query:null===(r=t.searchConfiguration)||void 0===r?void 0:r.query})}function c({ruleParams:e,setRuleParams:t,onToggleKqlFilter:a}){var r;const o=i.a.createElement(i.a.Fragment,null,i.a.createElement(l.EuiSwitch,{label:n.i18n.translate("xpack.apm.rules.transactionDuration.kqlFilterToggle",{defaultMessage:"Use KQL Filter"}),checked:null!==(r=e.useKqlFilter)&&void 0!==r&&r,onChange:a}),i.a.createElement(l.EuiSpacer,{size:"m"})),s=e.useKqlFilter?i.a.createElement(i.a.Fragment,null,i.a.createElement(l.EuiFormRow,{label:n.i18n.translate("xpack.apm.rules.ruleFlyout.filterLabel",{defaultMessage:"Filter"}),helpText:n.i18n.translate("xpack.apm.rules.ruleFlyout.filterHelpText",{defaultMessage:"Use a KQL expression to limit the scope of your alert trigger."}),fullWidth:!0,display:"rowCompressed"},i.a.createElement(u,{ruleParams:e,setRuleParams:t})),i.a.createElement(l.EuiSpacer,{size:"m"})):null;return i.a.createElement(i.a.Fragment,null,o,s)}}}]);