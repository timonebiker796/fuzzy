/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[3,10],{121:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var n=r(3),i=r(5);function o(){const t=Object(i.m)();return t.isIncludeElasticMapsService()?t.isEMSUrlSet()?t.hasOnPremLicense()?n.i18n.translate("xpack.maps.source.ems.noOnPremConnectionDescription",{defaultMessage:"Cannot connect to {host}.",values:{host:t.getEMSRoot()}}):n.i18n.translate("xpack.maps.source.ems.noOnPremLicenseDescription",{defaultMessage:"An enterprise license is required to connect to local Elastic Maps Server installations."}):n.i18n.translate("xpack.maps.source.ems.noAccessDescription",{defaultMessage:"Kibana is unable to access Elastic Maps Service. Contact your system administrator."}):n.i18n.translate("xpack.maps.source.ems.disabledDescription",{defaultMessage:'Access to Elastic Maps Service has been disabled. Ask your system administrator to set "map.includeElasticMapsService" in kibana.yml.'})}},157:function(t,e,r){"use strict";r.r(e),r.d(e,"createBasemapLayerDescriptor",(function(){return p}));var n=r(53),i=r.n(n),o=r(95),a=r(5),s=r(331),c=r(176),u=r(250),l=r(251),h=r(0);function p(){const t=Object(o.getKibanaTileMap)();return i.a.get(t,"url")?c.a.createDescriptor({sourceDescriptor:s.a.createDescriptor()}):Object(a.m)().isEMSEnabled()?u.a.createDescriptor({locale:h.g,sourceDescriptor:l.a.createDescriptor({isAutoSelect:!0})}):null}},176:function(t,e,r){"use strict";r.d(e,"a",(function(){return raster_tile_layer_RasterTileLayer}));var n=r(6),i=r.n(n),o=r(53),a=r.n(o),s=r(132),c=r(0);class tile_style_TileStyle{constructor(){i()(this,"_descriptor",void 0),this._descriptor={type:c.Y.TILE}}getType(){return c.Y.TILE}renderEditor(){return null}}class raster_tile_layer_RasterTileLayer extends s.a{static createDescriptor(t){const e=super.createDescriptor(t);return e.type=c.Z.RASTER_TILE,e.alpha=a.a.get(t,"alpha",1),e.style={type:c.Y.TILE},e}constructor({source:t,layerDescriptor:e}){super({source:t,layerDescriptor:e}),i()(this,"_style",void 0),this._style=new tile_style_TileStyle}_isTiled(){return!0}getSource(){return super.getSource()}async hasLegendDetails(){const t=this.getSource();return await t.hasLegendDetails()}renderLegendDetails(){const t=this.getSourceDataRequest();return this.getSource().renderLegendDetails(t)}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}async syncData({startLoading:t,stopLoading:e,onLoadError:r,dataFilters:n,isForceRefresh:i}){const o=this.getSource(),a={...n,applyGlobalQuery:o.getApplyGlobalQuery(),applyGlobalTime:o.getApplyGlobalTime(),applyForceRefresh:o.getApplyForceRefresh(),sourceQuery:this.getQuery()||void 0,isForceRefresh:i},s=this.getSourceDataRequest();if(s&&await o.canSkipSourceUpdate(s,a))return;const u=Symbol(`layer-source-refresh:${this.getId()} - source`);try{t(c.zb,u,a);const r={url:await o.getUrlTemplate(a)};e(c.zb,u,r,{})}catch(t){r(c.zb,u,t)}}_getMbLayerId(){return this.makeMbLayerId("raster")}getMbLayerIds(){return[this._getMbLayerId()]}ownsMbLayerId(t){return this._getMbLayerId()===t}ownsMbSourceId(t){return this.getId()===t}_requiresPrevSourceCleanup(t){const e=this.getSource(),r=t.getSource(this.getMbSourceId());if(!r)return!1;const n=this.getSourceDataRequest();if(n){const t=n.getData();if(t)return e.isSourceStale(r,t)}return!1}syncLayerWithMB(t){this._removeStaleMbSourcesAndLayers(t);const e=t.getSource(this.getId()),r=this._getMbLayerId();if(!e){const e=this.getSourceDataRequest();if(!e)return;const n=e.getData();if(!n||!n.url)return;const i=this.getMbSourceId();t.addSource(i,{type:"raster",tiles:[n.url],tileSize:256,scheme:"xyz"}),t.addLayer({id:r,type:"raster",source:i,minzoom:this._descriptor.minZoom,maxzoom:this._descriptor.maxZoom})}this._setTileLayerProperties(t,r)}_setTileLayerProperties(t,e){this.syncVisibilityWithMb(t,e),t.setLayerZoomRange(e,this.getMinZoom(),this.getMaxZoom()),t.setPaintProperty(e,"raster-opacity",this.getAlpha())}getLayerTypeIconName(){return"grid"}isBasemap(t){return 0===t}async isFilteredByGlobalTime(){return this.getSource().getApplyGlobalTime()&&await this.getSource().isTimeAware()}}},183:function(t,e,r){const n=r(301),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=r(302),{safeRe:a,t:s}=r(303),c=r(491),{compareIdentifiers:u}=r(492);class SemVer{constructor(t,e){if(e=c(e),t instanceof SemVer){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>i)throw new TypeError(`version is longer than ${i} characters`);n("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const r=t.trim().match(e.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<o)return e}return t})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(n("SemVer.compare",this.version,this.options,t),!(t instanceof SemVer)){if("string"==typeof t&&t===this.version)return 0;t=new SemVer(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof SemVer||(t=new SemVer(t,this.options)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)}comparePre(t){if(t instanceof SemVer||(t=new SemVer(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const r=this.prerelease[e],i=t.prerelease[e];if(n("prerelease compare",e,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++e)}compareBuild(t){t instanceof SemVer||(t=new SemVer(t,this.options));let e=0;do{const r=this.build[e],i=t.build[e];if(n("build compare",e,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return u(r,i)}while(++e)}inc(t,e,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,r),this.inc("pre",e,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e,r),this.inc("pre",e,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const t=Number(r)?1:0;if(!e&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[t];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(e===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(t)}}if(e){let n=[e,t];!1===r&&(n=[e]),0===u(this.prerelease[0],e)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}t.exports=SemVer},219:function(t,e,r){"use strict";var n=r(484),i=r(485);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=b(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),h=["%","/","?",";","#"].concat(l),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,y=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},d={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=r(486);function b(t,e,r){if(t&&i.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,r),n}o.prototype.parse=function(t,e,r){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(s);u[0]=u[0].replace(/\\/g,"/");var b=t=u.join(s);if(b=b.trim(),!r&&1===t.split("#").length){var E=c.exec(b);if(E)return this.path=b,this.href=b,this.pathname=E[1],E[2]?(this.search=E[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var S=a.exec(b);if(S){var _=(S=S[0]).toLowerCase();this.protocol=_,b=b.substr(S.length)}if(r||S||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||S&&g[S]||(b=b.substr(2),this.slashes=!0)}if(!g[S]&&(w||S&&!d[S])){for(var I,x,O=-1,L=0;L<p.length;L++)-1!==(T=b.indexOf(p[L]))&&(-1===O||T<O)&&(O=T);for(-1!==(x=-1===O?b.lastIndexOf("@"):b.lastIndexOf("@",O))&&(I=b.slice(0,x),b=b.slice(x+1),this.auth=decodeURIComponent(I)),O=-1,L=0;L<h.length;L++){var T;-1!==(T=b.indexOf(h[L]))&&(-1===O||T<O)&&(O=T)}-1===O&&(O=b.length),this.host=b.slice(0,O),b=b.slice(O),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var A=this.hostname.split(/\./),M=(L=0,A.length);L<M;L++){var R=A[L];if(R&&!R.match(f)){for(var j="",P=0,N=R.length;P<N;P++)R.charCodeAt(P)>127?j+="x":j+=R[P];if(!j.match(f)){var D=A.slice(0,L),C=A.slice(L+1),$=R.match(y);$&&(D.push($[1]),C.unshift($[2])),C.length&&(b="/"+C.join(".")+b),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+U,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!m[_])for(L=0,M=l.length;L<M;L++){var G=l[L];if(-1!==b.indexOf(G)){var B=encodeURIComponent(G);B===G&&(B=escape(G)),b=b.split(G).join(B)}}var V=b.indexOf("#");-1!==V&&(this.hash=b.substr(V),b=b.slice(0,V));var q=b.indexOf("?");if(-1!==q?(this.search=b.substr(q),this.query=b.substr(q+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,q)):e&&(this.search="",this.query={}),b&&(this.pathname=b),d[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=v.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||d[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,n=Object.keys(this),a=0;a<n.length;a++){var s=n[a];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var c=Object.keys(t),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(r[l]=t[l])}return d[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!d[t.protocol]){for(var h=Object.keys(t),p=0;p<h.length;p++){var f=h[p];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var y=(t.pathname||"").split("/");y.length&&!(t.host=y.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==y[0]&&y.unshift(""),y.length<2&&y.unshift(""),r.pathname=y.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),E=t.host||t.pathname&&"/"===t.pathname.charAt(0),S=E||b||r.host&&t.pathname,_=S,w=r.pathname&&r.pathname.split("/")||[],I=(y=t.pathname&&t.pathname.split("/")||[],r.protocol&&!d[r.protocol]);if(I&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===y[0]?y[0]=t.host:y.unshift(t.host)),t.host=null),S=S&&(""===y[0]||""===w[0])),E)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,w=y;else if(y.length)w||(w=[]),w.pop(),w=w.concat(y),r.search=t.search,r.query=t.query;else if(!i.isNullOrUndefined(t.search))return I&&(r.hostname=r.host=w.shift(),(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift())),r.search=t.search,r.query=t.query,i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=w.slice(-1)[0],O=(r.host||t.host||w.length>1)&&("."===x||".."===x)||""===x,L=0,T=w.length;T>=0;T--)"."===(x=w[T])?w.splice(T,1):".."===x?(w.splice(T,1),L++):L&&(w.splice(T,1),L--);if(!S&&!_)for(;L--;L)w.unshift("..");!S||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),O&&"/"!==w.join("/").substr(-1)&&w.push("");var k,A=""===w[0]||w[0]&&"/"===w[0].charAt(0);return I&&(r.hostname=r.host=A?"":w.length?w.shift():"",(k=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=k.shift(),r.host=r.hostname=k.shift())),(S=S||r.host&&w.length)&&!A&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),i.isNull(r.pathname)&&i.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},250:function(t,e,r){"use strict";r.d(e,"a",(function(){return ems_vector_tile_layer_EmsVectorTileLayer}));var n=r(6),i=r.n(n),o=(r(2),r(53)),a=r.n(o),s=r(147),c=r.n(s);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){if("string"==typeof t){var r=e(t);return"rgba(".concat(r.rgba().join(","),")")}if("object"==u(t)&&"stops"in t&&Array.isArray(null==t?void 0:t.stops)){var n=t.stops.map((function(t){var r=l(t[1],e);return[t[0],r]}));return Object.assign({},t,{stops:n})}return t}function h(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"screen",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return l(t,(function(t){return"mix"!==r?c.a.blend(c()(t),e,r):c.a.mix(c()(t),e,n)}))}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function y(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m(t){var e=function(t,e){if("object"!=p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function d(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||b(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=b(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function b(t,e){if(t){if("string"==typeof t)return E(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function S(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?S(Object(r),!0).forEach((function(e){M(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */w=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof v?e:v,a=Object.create(o.prototype),s=new R(n||[]);return i(a,"_invoke",{value:T(t,r,s)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",f="suspendedYield",y="executing",m="completed",d={};function v(){}function b(){}function E(){}var S={};u(S,a,(function(){return this}));var _=Object.getPrototypeOf,I=_&&_(_(j([])));I&&I!==r&&n.call(I,a)&&(S=I);var x=E.prototype=v.prototype=Object.create(S);function O(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function L(t,e){function r(i,o,a,s){var c=h(t[i],t,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==g(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,i){r(t,n,e,i)}))}return o=o?o.then(i,i):i()}})}function T(e,r,n){var i=p;return function(o,a){if(i===y)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var c=k(s,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===p)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=y;var u=h(e,r,n);if("normal"===u.type){if(i=n.done?m:f,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i=m,n.method="throw",n.arg=u.arg)}}}function k(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,k(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=h(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,d;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(n.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(g(e)+" is not iterable")}return b.prototype=E,i(x,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:b,configurable:!0}),b.displayName=u(E,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(L.prototype),u(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,i,o){void 0===o&&(o=Promise);var a=new L(l(t,r,n,i),o);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=j,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;M(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),d}},e}function I(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){I(o,n,i,a,s,"next",t)}function s(t){I(o,n,i,a,s,"throw",t)}a(void 0)}))}}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,R(n.key),n)}}function L(t,e,r){return e=k(e),function(t,e){if(e&&("object"==g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,T()?Reflect.construct(e,r||[],k(t).constructor):e.apply(t,r))}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(T=function(){return!!t})()}function k(t){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},k(t)}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function M(t,e,r){return(e=R(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}var j=function(t){function e(t,r,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),M(i=L(this,e,[t,r,n]),"_config",void 0),M(i,"_getRasterStyleJson",a.a.once(x(w().mark((function t(){var e,r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=i._getStyleUrlForLocale("raster"))){t.next=6;break}return r=i._proxyPath+i._getAbsoluteUrl(e),t.abrupt("return",i._emsClient.getManifest(i._emsClient.extendUrlWithParams(r)));case 6:return t.abrupt("return");case 7:case"end":return t.stop()}}),t)}))))),M(i,"_getVectorStyleJsonRaw",a.a.once(x(w().mark((function t(){var e,r,n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=i._getStyleUrlForLocale("vector"))){t.next=9;break}return r=i._proxyPath+i._getAbsoluteUrl(e),t.next=5,i._emsClient.getManifest(i._emsClient.extendUrlWithParams(r));case 5:return n=t.sent,t.abrupt("return",_({},n));case 9:return t.abrupt("return");case 10:case"end":return t.stop()}}),t)}))))),M(i,"_getVectorStyleJsonInlined",a.a.once(x(w().mark((function t(){var e,r,n,o,a,s,c,u,l,h,p,f;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i._getVectorStyleJsonRaw();case 2:if(!(e=t.sent)){t.next=44;break}r={},n=e.sources,o=v(Object.getOwnPropertyNames(n)),t.prev=7,o.s();case 9:if((a=o.n()).done){t.next=22;break}if(s=a.value,!(c=n[s].url)){t.next=20;break}return l=i._proxyPath+i._getAbsoluteUrl(c),h=i._emsClient.extendUrlWithParams(l),t.next=17,i._emsClient.getManifest(h);case 17:p=t.sent,f=null==p||null===(u=p.tiles)||void 0===u?void 0:u.map((function(t){var e=i._proxyPath+i._getAbsoluteUrl(t);return i._emsClient.extendUrlWithParams(e)})),r[s]=_(_({},p),{},{type:"vector",tiles:f});case 20:t.next=9;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(7),o.e(t.t0);case 27:return t.prev=27,o.f(),t.finish(27);case 30:return t.t1=_,t.t2=_({},e),t.t3={},t.t4=r,t.next=36,i._getSpriteSheetRootPath();case 36:return t.t5=t.sent,t.next=39,i._getUrlTemplateForGlyphs();case 39:return t.t6=t.sent,t.t7={sources:t.t4,sprite:t.t5,glyphs:t.t6},t.abrupt("return",(0,t.t1)(t.t2,t.t3,t.t7));case 44:return t.abrupt("return");case 45:case"end":return t.stop()}}),t,null,[[7,24,27,30]])}))))),i._config=t,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(e,t),r=e,n=[{key:"getDefaultRasterStyle",value:(E=x(w().mark((function t(){var e,r,n=this;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getRasterStyleJson();case 2:if(!(e=t.sent)){t.next=8;break}return r=e.tiles.map((function(t){return n._proxyPath+n._getAbsoluteUrl(t)})),t.abrupt("return",_(_({},e),{tiles:r}));case 8:return t.abrupt("return");case 9:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"getUrlTemplate",value:(b=x(w().mark((function t(){var e,r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getRasterStyleJson();case 2:if(!(e=t.sent)){t.next=8;break}return r=this._proxyPath+this._getAbsoluteUrl(e.tiles[0]),t.abrupt("return",this._emsClient.extendUrlWithParams(r));case 8:return t.abrupt("return","");case 9:case"end":return t.stop()}}),t,this)}))),function(){return b.apply(this,arguments)})},{key:"getUrlTemplateForVector",value:(g=x(w().mark((function t(e){var r,n,i,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonInlined();case 2:if(n=t.sent,!(i=null==n||null===(r=n.sources[e])||void 0===r||null===(r=r.tiles)||void 0===r?void 0:r.pop())){t.next=9;break}return o=this._proxyPath+this._getAbsoluteUrl(i),t.abrupt("return",this._emsClient.extendUrlWithParams(o));case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"getVectorStyleSheet",value:(m=x(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonInlined();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"getVectorStyleSheetRaw",value:(y=x(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonRaw();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"getSpriteSheetMeta",value:(f=x(w().mark((function t(){var e,r,n,i,o,a=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]&&a[0],t.next=3,this.getSpriteSheetJsonPath(e);case 3:return r=t.sent,t.next=6,this.getSpriteSheetPngPath(e);case 6:if(n=t.sent,!r||!n){t.next=15;break}return i=this._emsClient.extendUrlWithParams(r),t.next=11,this._emsClient.getManifest(i);case 11:return o=t.sent,t.abrupt("return",{png:n,json:o});case 15:return t.abrupt("return");case 16:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"getSpriteSheetJsonPath",value:(p=x(w().mark((function t(){var e,r,n,i=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],t.next=3,this._getSpriteSheetRootPath();case 3:if(!(r=t.sent)){t.next=9;break}return n=e?"@2x":"",t.abrupt("return",r+n+".json");case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"getSpriteSheetPngPath",value:(l=x(w().mark((function t(){var e,r,n,i=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]&&i[0],t.next=3,this._getSpriteSheetRootPath();case 3:if(!(r=t.sent)){t.next=9;break}return n=e?"@2x":"",t.abrupt("return",r+n+".png");case 9:return t.abrupt("return","");case 10:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getDisplayName",value:function(){return this._emsClient.getValueInLanguage(this._config.name)}},{key:"getMinZoom",value:(u=x(w().mark((function t(){var e,r,n,i,o,a=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:"vector",t.t0=e,t.next="vector"===t.t0?4:"raster"===t.t0?12:20;break;case 4:return t.next=6,this._getVectorStyleJsonInlined();case 6:if(t.t1=t.sent,t.t1){t.next=9;break}t.t1={sources:{}};case 9:return r=t.t1,n=r.sources,t.abrupt("return",Math.min.apply(Math,d(Object.values(n).map((function(t){return t&&t instanceof Object&&"minzoom"in t?t.minzoom:null})).filter((function(t){return Number.isFinite(t)})))));case 12:return t.next=14,this._getRasterStyleJson();case 14:if(t.t2=t.sent,t.t2){t.next=17;break}t.t2={};case 17:return i=t.t2,o=i.minzoom,t.abrupt("return",o);case 20:return t.abrupt("return");case 21:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getMaxZoom",value:(c=x(w().mark((function t(){var e,r,n,i,o,a=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:"vector",t.t0=e,t.next="vector"===t.t0?4:"raster"===t.t0?12:20;break;case 4:return t.next=6,this._getVectorStyleJsonInlined();case 6:if(t.t1=t.sent,t.t1){t.next=9;break}t.t1={sources:{}};case 9:return r=t.t1,n=r.sources,t.abrupt("return",Math.max.apply(Math,d(Object.values(n).map((function(t){return t&&t instanceof Object&&"maxzoom"in t?t.maxzoom:null})).filter((function(t){return Number.isFinite(t)})))));case 12:return t.next=14,this._getRasterStyleJson();case 14:if(t.t2=t.sent,t.t2){t.next=17;break}t.t2={};case 17:return i=t.t2,o=i.maxzoom,t.abrupt("return",o);case 20:return t.abrupt("return");case 21:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getId",value:function(){return this._config.id}},{key:"hasId",value:function(t){return this._config.id===t}},{key:"getApiUrl",value:function(){return this._emsClient.getTileApiUrl()}},{key:"_getStyleUrlForLocale",value:function(t){var e=this._getFormats(t,this._emsClient.getLocale());if(e.length||(e=this._getFormats(t,this._emsClient.getDefaultLocale())),!e.length)throw new Error("Cannot find ".concat(t," tile layer for locale ").concat(this._emsClient.getLocale()," or ").concat(this._emsClient.getDefaultLocale()));var r=e[0];if(r&&Object.prototype.hasOwnProperty.call(r,"url"))return r.url}},{key:"_getFormats",value:function(t,e){return this._config.formats.filter((function(r){return r.locale===e&&r.format===t}))}},{key:"_getSpriteSheetRootPath",value:(s=x(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonRaw();case 2:if(null==(e=t.sent)||!e.sprite){t.next=7;break}return t.abrupt("return",this._proxyPath+this._getAbsoluteUrl(e.sprite.toString()));case 7:return t.abrupt("return","");case 8:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_getUrlTemplateForGlyphs",value:(o=x(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._getVectorStyleJsonRaw();case 2:if(null==(e=t.sent)||!e.glyphs){t.next=7;break}return t.abrupt("return",this._proxyPath+this._getAbsoluteUrl(e.glyphs));case 7:return t.abrupt("return","");case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],i=[{key:"transformLanguageProperty",value:function(t,r){var n=this.SupportedLanguages.find((function(t){return t.key===r}));if("symbol"===t.type&&void 0!==t.layout&&void 0!==n){var i=n.omt,o=t.layout["text-field"];if(o&&"string"==typeof o)return e._getTextField(o,i)}}},{key:"transformColorProperties",value:function(t,e,r,n){if(-1!==["background","fill","line","symbol"].indexOf(t.type)&&t.paint){var i=t.paint;return"symbol"===t.type&&0===Object.keys(i).length&&(i["text-color"]="rgb(0,0,0)"),Object.keys(i).filter((function(t){return-1!==["background-color","circle-color","circle-stroke-color","fill-color","fill-extrusion-color","fill-outline-color","icon-color","icon-halo-color","line-color","text-color","text-halo-color"].indexOf(t)})).map((function(t){var o=i[t];return{property:t,color:o&&e?h(o,e,r,n):o}}))}return[]}},{key:"_getTextField",value:function(t,e){var r=t.match(/\{name([:_])(.{2})\}/);return r&&r[1]!=e?["coalesce",["get","name:".concat(e)],["get","name".concat(r[1]).concat(r[2])]]:t.includes("latin")&&t.includes("nonlatin")?["coalesce",["get","name:".concat(e)],["concat",["get","name:latin"],"\n",["get","name:nonlatin"]]]:t}}],n&&O(r.prototype,n),i&&O(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i,o,s,c,u,l,p,f,y,m,g,b,E}(function(){return t=function t(e,r,n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,"_emsClient",void 0),y(this,"_config",void 0),y(this,"_proxyPath",void 0),y(this,"_getAbsoluteUrl",(function(t){return/^https?:\/\//.test(t)?t:function(t,e){if(!t)return e;var r="/"===t[t.length-1],n="/"===e[0];return!0===r&&!0===n?t+e.slice(1):r!==n?t+e:t+"/"+e}(i.getApiUrl(),t)})),this._config=e,this._emsClient=r,this._proxyPath=n},(e=[{key:"getAttributions",value:function(){var t=this;return this._config.attribution.map((function(e){return{url:t._emsClient.getValueInLanguage(e.url),label:t._emsClient.getValueInLanguage(e.label)}}))}},{key:"getMarkdownAttribution",value:function(){var t=this;return this._config.attribution.map((function(e){var r=t._emsClient.getValueInLanguage(e.url),n=t._emsClient.getValueInLanguage(e.label);return"[".concat(n,"](").concat(r,")")})).join("|")}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}());M(j,"SupportedLanguages",[{key:"ar",omt:"ar"},{key:"az",omt:"az"},{key:"be",omt:"be"},{key:"bg",omt:"bg"},{key:"br",omt:"br"},{key:"bs",omt:"bs"},{key:"ca",omt:"ca"},{key:"cs",omt:"cs"},{key:"cy",omt:"cy"},{key:"da",omt:"da"},{key:"de",omt:"de"},{key:"el",omt:"el"},{key:"en",omt:"en"},{key:"eo",omt:"eo"},{key:"es",omt:"es"},{key:"et",omt:"et"},{key:"fi",omt:"fi"},{key:"fr-fr",omt:"fr"},{key:"fy",omt:"fy"},{key:"ga",omt:"ga"},{key:"gd",omt:"gd"},{key:"he",omt:"he"},{key:"hi-in",omt:"hi"},{key:"hr",omt:"hr"},{key:"hu",omt:"hu"},{key:"hy",omt:"hy"},{key:"is",omt:"is"},{key:"it",omt:"it"},{key:"ja_kana",omt:"ja_kana"},{key:"ja_rm",omt:"ja_rm"},{key:"ja-jp",omt:"ja"},{key:"ka",omt:"ka"},{key:"kk",omt:"kk"},{key:"kn",omt:"kn"},{key:"ko_rm",omt:"ko_rm"},{key:"ko",omt:"ko"},{key:"la",omt:"la"},{key:"lb",omt:"lb"},{key:"lt",omt:"lt"},{key:"lv",omt:"lv"},{key:"mk",omt:"mk"},{key:"mt",omt:"mt"},{key:"nl",omt:"nl"},{key:"no",omt:"no"},{key:"pl",omt:"pl"},{key:"pt-pt",omt:"pt"},{key:"rm",omt:"rm"},{key:"ro",omt:"ro"},{key:"ru-ru",omt:"ru"},{key:"sk",omt:"sk"},{key:"sl",omt:"sl"},{key:"sq",omt:"sq"},{key:"sr-Ltn",omt:"sr-Ltn"},{key:"sr",omt:"sr"},{key:"sv",omt:"sv"},{key:"th",omt:"th"},{key:"tr",omt:"tr"},{key:"uk",omt:"uk"},{key:"zh-cn",omt:"zh"}]),M(j,"colorOperationDefaults",[{style:"road_map",operation:"mix",percentage:.25},{style:"road_map_desaturated",operation:"screen",percentage:.25},{style:"dark_map",operation:"dodge",percentage:.25}]),r(219),r(489),r(490),r(493),r(494),r(495),r(496);var P=r(3),N=r(14),D=r(500),C=r.n(D);function $(t,{width:e,height:r},n,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==e*r*n)throw new RangeError("mismatched image size")}else i=new Uint8Array(e*r*n);return t.width=e,t.height=r,t.data=i,t}function U(t,e,r,n,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=t.data,s=e.data;C()(a!==s);for(let c=0;c<i.height;c++){const u=((r.y+c)*t.width+r.x)*o,l=((n.y+c)*e.width+n.x)*o;for(let t=0;t<i.width*o;t++)s[l+t]=a[u+t]}return e}class RGBAImage{constructor(t,e){$(this,t,4,e)}resize(t){!function(t,{width:e,height:r},n){if(e===t.width&&r===t.height)return;const i=$({},{width:e,height:r},n);U(t,i,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,e),height:Math.min(t.height,r)},n),t.width=e,t.height=r,t.data=i.data}(this,t,4)}replace(t,e){e?this.data.set(t):t instanceof Uint8ClampedArray?this.data=new Uint8Array(t.buffer):this.data=t}clone(){return new RGBAImage({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,e,r,n,i){U(t,e,r,n,i,4)}}var F=r(132),G=r(0),B=r(95),V=r(4);function q({color:t,onColorChange:e}){const r=P.i18n.translate("xpack.maps.emsVectorTileStyleEditor.colorBlendPickerLabel",{defaultMessage:"Color blend"}),n=P.i18n.translate("xpack.maps.emsVectorTileStyleEditor.colorBlendPickerPlaceholder",{defaultMessage:"No color"});return Object(V.jsx)(N.EuiFormRow,{display:"columnCompressed",label:r},Object(V.jsx)(N.EuiColorPicker,{compressed:!0,"aria-label":r,color:t,onChange:t=>{e({color:t})},secondaryInputDisplay:"top",isClearable:!0,format:"hex",placeholder:n,"aria-placeholder":n}))}class ems_vector_tile_style_EMSVectorTileStyle{constructor(t={color:""}){i()(this,"_descriptor",void 0),this._descriptor=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor(t.color)}static createDescriptor(t){return{type:G.Y.EMS_VECTOR_TILE,color:null!=t?t:""}}getType(){return G.Y.EMS_VECTOR_TILE}getColor(){return this._descriptor.color}renderEditor(t){return Object(V.jsx)(q,{color:this._descriptor.color,onColorChange:({color:e})=>{const r=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor(e);t(r)}})}}class ems_vector_tile_layer_EmsVectorTileLayer extends F.a{static createDescriptor(t){const e=super.createDescriptor(t);return e.type=G.Z.EMS_VECTOR_TILE,e.alpha=a.a.get(t,"alpha",1),e.locale=a.a.get(t,"locale",G.g),e.style=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor(),e}constructor({source:t,layerDescriptor:e}){if(super({source:t,layerDescriptor:e}),i()(this,"_style",void 0),e.style)this._style=new ems_vector_tile_style_EMSVectorTileStyle(e.style);else{const t=ems_vector_tile_style_EMSVectorTileStyle.createDescriptor();this._style=new ems_vector_tile_style_EMSVectorTileStyle(t)}}_isTiled(){return!0}getSource(){return super.getSource()}getStyleForEditing(){return this._style}getStyle(){return this._style}getCurrentStyle(){return this._style}getLocale(){var t;return null!==(t=this._descriptor.locale)&&void 0!==t?t:G.qb}_canSkipSync({prevDataRequest:t,nextMeta:e}){if(!t)return!1;const r=t.getMeta();return!!r&&r.tileLayerId===e.tileLayerId}async syncData({startLoading:t,stopLoading:e,onLoadError:r}){const n={tileLayerId:this.getSource().getTileLayerId()};if(this._canSkipSync({prevDataRequest:this.getSourceDataRequest(),nextMeta:n}))return;const i=Symbol(`layer-source-refresh:${this.getId()} - source`);try{t(G.zb,i,n);const r=await this.getSource().getVectorStyleSheetAndSpriteMeta(Object(B.isRetina)()),o=r.spriteMeta?await this._loadSpriteSheetImageData(r.spriteMeta.png):void 0,a={...r,spriteSheetImageData:o};e(G.zb,i,a)}catch(t){r(G.zb,i,t)}}_generateMbId(t){return`${this.getId()}_${t}`}_generateMbSourceIdPrefix(){return`${this.getId()}___${this.getSource().getTileLayerId()}___`}_generateMbSourceId(t){return`${this._generateMbSourceIdPrefix()}${t}`}_getVectorStyle(){var t;const e=this.getSourceDataRequest();return e?null===(t=e.getData())||void 0===t?void 0:t.vectorStyleSheet:null}_getSpriteMeta(){var t;const e=this.getSourceDataRequest();return e?null===(t=e.getData())||void 0===t?void 0:t.spriteMeta:null}_getSpriteImageData(){var t;const e=this.getSourceDataRequest();return e?null===(t=e.getData())||void 0===t?void 0:t.spriteSheetImageData:null}getMbLayerIds(){const t=this._getVectorStyle();return t&&t.layers?t.layers.map((t=>this._generateMbId(t.id))):[]}getMbSourceIds(){const t=this._getVectorStyle();return t&&t.sources?Object.keys(t.sources).map((t=>this._generateMbSourceId(t))):[]}ownsMbLayerId(t){return t.startsWith(this.getId())}ownsMbSourceId(t){return t.startsWith(this.getId())}_makeNamespacedImageId(t){return this.getSource().getSpriteNamespacePrefix()+"/"+t}_requiresPrevSourceCleanup(t){const e=this._generateMbSourceIdPrefix(),r=t.getStyle();return!!r.sources&&Object.keys(r.sources).some((t=>{const r=this.ownsMbSourceId(t),n=t.startsWith(e);return r&&!n}))}_getImageData(t){const e=window.document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)}_isCrossOriginUrl(t){const e=window.document.createElement("a");return e.href=t,e.protocol!==window.document.location.protocol||e.host!==window.document.location.host||e.port!==window.document.location.port}_loadSpriteSheetImageData(t){return new Promise(((e,r)=>{const n=new Image;this._isCrossOriginUrl(t)&&(n.crossOrigin="Anonymous"),n.onload=t=>{e(this._getImageData(n))},n.onerror=t=>{r(t)},n.src=t}))}_addSpriteSheetToMapFromImageData(t,e,r){for(const n in t){if(!t.hasOwnProperty(n)||r.hasImage(n))continue;const{width:i,height:o,x:a,y:s,sdf:c,pixelRatio:u}=t[n];if("number"!=typeof i||"number"!=typeof o)continue;const l=new RGBAImage({width:i,height:o});RGBAImage.copy(e,l,{x:a,y:s},{x:0,y:0},{width:i,height:o}),r.addImage(n,l,{pixelRatio:u,sdf:c})}}syncLayerWithMB(t){const e=this._getVectorStyle();if(!e)return;this._removeStaleMbSourcesAndLayers(t);let r=!1;if((e.sources?Object.keys(e.sources):[]).forEach((n=>{if(r)return;const i=this._generateMbSourceId(n);t.getSource(i)?r=!0:t.addSource(i,e.sources[n])})),!r){const r=this._getSpriteMeta();if(!r)return;const n={};for(const t in r.json)r.json.hasOwnProperty(t)&&(n[this._makeNamespacedImageId(t)]=r.json[t]);const i=this._getSpriteImageData();if(!i)return;this._addSpriteSheetToMapFromImageData(n,i,t),(e.layers?e.layers:[]).forEach((e=>{const r=this._generateMbId(e.id);if(t.getLayer(r))return;const n={...e,source:this._generateMbSourceId("source"in e&&"string"==typeof e.source?e.source:void 0),id:r};"symbol"===n.type&&n.layout&&"string"==typeof n.layout["icon-image"]&&(n.layout["icon-image"]=this._makeNamespacedImageId(n.layout["icon-image"])),"fill"===n.type&&n.paint&&"string"==typeof n.paint["fill-pattern"]&&(n.paint["fill-pattern"]=this._makeNamespacedImageId(n.paint["fill-pattern"])),t.addLayer(n)}))}this._setTileLayerProperties(t)}_getOpacityProps(t){return"fill"===t?["fill-opacity"]:"line"===t?["line-opacity"]:"circle"===t?["circle-opacity"]:"background"===t?["background-opacity"]:"symbol"===t?["icon-opacity","text-opacity"]:[]}_setColorFilter(t,e,r){const n=this.getCurrentStyle().getColor(),i=j.colorOperationDefaults.find((({style:t})=>t===this.getSource().getTileLayerId()));if(!i)return;const{operation:o,percentage:a}=i,s=j.transformColorProperties(e,n,o,a);for(const{property:e,color:n}of s)t.setPaintProperty(r,e,n)}_setOpacityForType(t,e,r){this._getOpacityProps(e.type).forEach((n=>{const i=e.paint;if(i&&"number"==typeof i[n]){const e=i[n]*this.getAlpha();t.setPaintProperty(r,n,e)}else t.setPaintProperty(r,n,this.getAlpha())}))}_setLanguage(t,e,r){const n=this.getLocale();if(null===n||n===G.qb){var i;if("symbol"!==e.type)return;const n=null===(i=e.layout)||void 0===i?void 0:i["text-field"];return void(e.layout&&n&&t.setLayoutProperty(r,"text-field",n))}const o=n===G.g?j.transformLanguageProperty(e,P.i18n.getLocale()):j.transformLanguageProperty(e,n);void 0!==o&&t.setLayoutProperty(r,"text-field",o)}_setLayerZoomRange(t,e,r){let n=this.getMinZoom();"number"==typeof e.minzoom&&(n=Math.max(n,e.minzoom));let i=this.getMaxZoom();"number"==typeof e.maxzoom&&(i=Math.min(i,e.maxzoom)),t.setLayerZoomRange(r,n,i)}_setTileLayerProperties(t){const e=this._getVectorStyle();e&&e.layers&&e.layers.forEach((e=>{const r=this._generateMbId(e.id);this.syncVisibilityWithMb(t,r),this._setLayerZoomRange(t,e,r),this._setOpacityForType(t,e,r),this._setColorFilter(t,e,r),this._setLanguage(t,e,r)}))}areLabelsOnTop(){return!!this._descriptor.areLabelsOnTop}supportsLabelsOnTop(){return!0}supportsLabelLocales(){return!0}async getLicensedFeatures(){return this._source.getLicensedFeatures()}getLayerTypeIconName(){return"grid"}getLayerIcon(){return{icon:Object(V.jsx)(N.EuiIcon,{size:"m",type:"grid"}),tooltipContent:P.i18n.translate("xpack.maps.emsVectorTileLayer.layerDescription",{defaultMessage:"Reference map provided by Elastic Maps Service (EMS)."})}}isBasemap(t){return 0===t}}},251:function(t,e,r){"use strict";r.d(e,"b",(function(){return w})),r.d(e,"a",(function(){return ems_tms_source_EMSTMSSource}));var n=r(2),i=r(3),o=r(6),a=r.n(o),s=r(135),c=r(95),u=r(14),l=r(54),h=r(121),p=r(4);const f="auto_select";class tile_service_select_TileServiceSelect extends n.Component{constructor(...t){super(...t),a()(this,"_isMounted",!1),a()(this,"state",{emsTmsOptions:[],hasLoaded:!1}),a()(this,"_loadTmsOptions",(async()=>{try{const t=await Object(c.getEmsTmsServices)();if(!this._isMounted)return;const e=t.map((t=>({value:t.getId(),text:t.getDisplayName()?t.getDisplayName():t.getId()})));e.unshift({value:f,text:i.i18n.translate("xpack.maps.source.emsTile.autoLabel",{defaultMessage:"Autoselect based on Kibana theme"})}),this.setState({emsTmsOptions:e,hasLoaded:!0})}catch(t){this._isMounted&&this.setState({emsTmsOptions:[],hasLoaded:!0})}})),a()(this,"_onChange",(t=>{const e=t.target.value,r=e===f;this.props.onTileSelect({id:r?void 0:e,isAutoSelect:r})}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0,this._loadTmsOptions()}render(){const t=0===this.state.emsTmsOptions.length?Object(h.a)():null;let e;return this.props.config&&(e=this.props.config.isAutoSelect?f:this.props.config.id),Object(p.jsx)(u.EuiFormRow,{label:i.i18n.translate("xpack.maps.source.emsTile.label",{defaultMessage:"Tile service"}),helpText:t,display:"columnCompressed"},Object(p.jsx)(u.EuiSelect,{hasNoInitialSelection:!e,value:e,options:this.state.emsTmsOptions,onChange:this._onChange,isLoading:!this.state.hasLoaded,disabled:this.state.hasLoaded&&0===this.state.emsTmsOptions.length,compressed:!0}))}}function y({onChange:t,config:e}){return Object(p.jsx)(n.Fragment,null,Object(p.jsx)(u.EuiPanel,null,Object(p.jsx)(u.EuiTitle,{size:"xs"},Object(p.jsx)("h5",null,Object(p.jsx)(l.FormattedMessage,{id:"xpack.maps.source.emsTile.settingsTitle",defaultMessage:"Basemap"}))),Object(p.jsx)(u.EuiSpacer,{size:"m"}),Object(p.jsx)(tile_service_select_TileServiceSelect,{onTileSelect:({id:e,isAutoSelect:r})=>{t({propName:"id",value:e}),t({propName:"isAutoSelect",value:r})},config:e})),Object(p.jsx)(u.EuiSpacer,{size:"s"}))}var m=r(92),g=r(0),d=r(5),v=r(24);function b(t){return i.i18n.translate("xpack.maps.source.emsTile.unableToFindTileIdErrorMessage",{defaultMessage:"Unable to find EMS tile configuration for id: {id}. {info}",values:{id:t,info:Object(h.a)()}})}function E(){return Object(d.m)().isEMSUrlSet()?i.i18n.translate("xpack.maps.source.emsOnPremTileTitle",{defaultMessage:"Elastic Maps Server Basemaps"}):i.i18n.translate("xpack.maps.source.emsTileTitle",{defaultMessage:"EMS Basemaps"})}class ems_tms_source_EMSTMSSource extends s.a{static createDescriptor(t){return{type:g.Cb.EMS_TMS,id:t.id,isAutoSelect:void 0!==t.isAutoSelect&&t.isAutoSelect,lightModeDefault:void 0!==t.lightModeDefault?t.lightModeDefault:Object(d.p)().desaturated}}constructor(t){const e=ems_tms_source_EMSTMSSource.createDescriptor(t);super(e),a()(this,"_descriptor",void 0),this._descriptor=e}renderSourceSettingsEditor({onChange:t}){return Object(p.jsx)(y,{onChange:t,config:this._descriptor})}async getImmutableProperties(){const t=await this._getTileServiceName(),e=i.i18n.translate("xpack.maps.source.emsTile.isAutoSelectLabel",{defaultMessage:"autoselect based on Kibana theme"}),r=[{label:Object(m.a)(),value:E()},{label:i.i18n.translate("xpack.maps.source.emsTile.serviceId",{defaultMessage:"Tile service"}),value:this._descriptor.isAutoSelect?`${t} - ${e}`:t}],n=Object(d.m)();return n.isEMSUrlSet()&&r.push({label:i.i18n.translate("xpack.maps.source.emsTile.emsOnPremLabel",{defaultMessage:"Elastic Maps Server"}),value:n.getEMSRoot()}),r}async _getEMSTMSService(){let t;const e=this.getTileLayerId();try{t=await Object(c.getEmsTmsServices)()}catch(t){throw new Error(`${b(e)} - ${t.message}`)}const r=t.find((t=>t.getId()===e));if(!r)throw new Error(b(e));return r}async getDisplayName(){return i.i18n.translate("xpack.maps.source.emsTile.basemapLabel",{defaultMessage:"Basemap"})}async _getTileServiceName(){try{return(await this._getEMSTMSService()).getDisplayName()}catch(t){return this.getTileLayerId()}}getAttributionProvider(){return async()=>(await this._getEMSTMSService()).getAttributions()}async getUrlTemplate(){const t=await this._getEMSTMSService();return await t.getUrlTemplate()}getSpriteNamespacePrefix(){return"ems/"+this.getTileLayerId()}async getVectorStyleSheetAndSpriteMeta(t){const e=await this._getEMSTMSService();return{vectorStyleSheet:await e.getVectorStyleSheet(),spriteMeta:await e.getSpriteSheetMeta(t)}}getTileLayerId(){return!this._descriptor.isAutoSelect&&this._descriptor.id?this._descriptor.id:Object(d.z)()?Object(d.p)().dark:this._descriptor.lightModeDefault}async getLicensedFeatures(){return Object(d.m)().isEMSUrlSet()?[v.a.ON_PREM_EMS]:[]}}var S=r(250);class create_source_editor_CreateSourceEditor extends n.Component{constructor(...t){super(...t),a()(this,"state",{}),a()(this,"_onTileSelect",(t=>{this.setState({config:t}),this.props.onTileSelect(t)}))}componentDidMount(){this._onTileSelect({isAutoSelect:!0})}render(){return Object(p.jsx)(u.EuiPanel,null,Object(p.jsx)(tile_service_select_TileServiceSelect,{onTileSelect:this._onTileSelect,config:this.state.config}))}}var _=r(327);const w={id:g.Jb.EMS_BASEMAP,order:10,categories:[g.ab.REFERENCE],checkVisibility:async()=>Object(d.m)().isIncludeElasticMapsService(),description:function(){const t=Object(d.m)();return i.i18n.translate("xpack.maps.source.emsTileSourceDescription",{defaultMessage:"Basemap service from {host}",values:{host:t.isEMSUrlSet()?t.getEMSRoot():"Elastic Maps Service"}})}(),disabledReason:i.i18n.translate("xpack.maps.source.emsTileDisabledReason",{defaultMessage:"Elastic Maps Server requires an Enterprise license"}),getIsDisabled:()=>{const t=Object(d.m)();return t.isEMSUrlSet()&&!t.hasOnPremLicense()},icon:_.a,renderWizard:({previewLayers:t})=>Object(p.jsx)(create_source_editor_CreateSourceEditor,{onTileSelect:e=>{const r=S.a.createDescriptor({sourceDescriptor:ems_tms_source_EMSTMSSource.createDescriptor(e)});t([r])}}),title:E()}},255:function(t,e,r){"use strict";r.d(e,"a",(function(){return p}));var n=r(2),i=r(3),o=r(14),a=r(95),s=r(4);function c({onSourceConfigChange:t}){const e=Object(a.getKibanaTileMap)();return Object(n.useEffect)((()=>{e.url&&t()}),[]),Object(s.jsx)(o.EuiPanel,null,Object(s.jsx)(o.EuiFormRow,{label:i.i18n.translate("xpack.maps.source.kbnTMS.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),helpText:e.url?null:i.i18n.translate("xpack.maps.source.kbnTMS.noLayerAvailableHelptext",{defaultMessage:'No tilemap layer is available. Ask your system administrator to set "map.tilemap.url" in kibana.yml.'})},Object(s.jsx)(o.EuiFieldText,{readOnly:!0,value:e.url?e.url:""})))}var u=r(256),l=r(176),h=r(0);const p={id:h.Jb.KIBANA_BASEMAP,order:10,categories:[h.ab.REFERENCE],checkVisibility:async()=>!!Object(a.getKibanaTileMap)().url,description:i.i18n.translate("xpack.maps.source.kbnTMSDescription",{defaultMessage:"Tile map service configured in kibana.yml"}),icon:"logoKibana",renderWizard:({previewLayers:t})=>Object(s.jsx)(c,{onSourceConfigChange:()=>{const e=l.a.createDescriptor({sourceDescriptor:u.a.createDescriptor()});t([e])}}),title:u.b}},256:function(t,e,r){"use strict";r.d(e,"b",(function(){return p})),r.d(e,"a",(function(){return kibana_tilemap_source_KibanaTilemapSource}));var n=r(6),i=r.n(n),o=r(135),a=r(95),s=r(3),c=r(92),u=r(53),l=r.n(u),h=r(0);const p=s.i18n.translate("xpack.maps.source.kbnTMSTitle",{defaultMessage:"Configured Tile Map Service"});class kibana_tilemap_source_KibanaTilemapSource extends o.a{static createDescriptor(){return{type:kibana_tilemap_source_KibanaTilemapSource.type}}async getImmutableProperties(){return[{label:Object(c.a)(),value:p},{label:s.i18n.translate("xpack.maps.source.kbnTMS.urlLabel",{defaultMessage:"Tilemap url"}),value:await this.getUrlTemplate()}]}async hasLegendDetails(){return!1}renderLegendDetails(){return null}isSourceStale(t,e){var r;return!!e.url&&(null===(r=t.tiles)||void 0===r?void 0:r[0])!==e.url}async canSkipSourceUpdate(){return!1}async getUrlTemplate(){const t=Object(a.getKibanaTileMap)();if(!t.url)throw new Error(s.i18n.translate("xpack.maps.source.kbnTMS.noConfigErrorMessage",{defaultMessage:"Unable to find map.tilemap.url configuration in the kibana.yml"}));return t.url}getAttributionProvider(){return async()=>{const t=Object(a.getKibanaTileMap)();return function(t){const e=[];return t.split("|").forEach((t=>{t=t.trim();const r=/\[(.*)\]\((.*)\)/.exec(t);r&&(null==r?void 0:r.length)>=3&&r[1]&&r[2]&&e.push({label:r[1],url:r[2]})})),e}(l.a.get(t,"options.attribution",""))}}async getDisplayName(){try{return await this.getUrlTemplate()}catch(t){return""}}}i()(kibana_tilemap_source_KibanaTilemapSource,"type",h.Cb.KIBANA_TILEMAP)},301:function(t,e,r){(function(e){const r="object"==typeof e&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=r}).call(this,r(127))},302:function(t,e){const r=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},303:function(t,e,r){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=r(302),a=r(301),s=(e=t.exports={}).re=[],c=e.safeRe=[],u=e.src=[],l=e.t={};let h=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[p,i]],y=(t,e,r)=>{const n=(t=>{for(const[e,r]of f)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t})(e),i=h++;a(t,i,e),l[t]=i,u[i]=e,s[i]=new RegExp(e,r?"g":void 0),c[i]=new RegExp(n,r?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),y("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${p}+`),y("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),y("FULL",`^${u[l.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),y("LOOSE",`^${u[l.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),y("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?`+`(?:${u[l.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",u[l.COERCE],!0),y("COERCERTLFULL",u[l.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",y("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",y("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},304:function(t,e,r){const n=r(183);t.exports=(t,e,r=!1)=>{if(t instanceof n)return t;try{return new n(t,e)}catch(t){if(!r)return null;throw t}}},305:function(t,e,r){t.exports=r(27)(3090)},327:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r(2);var n=r(4);const i=()=>Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(n.jsx)("path",{className:"mapLayersWizardIcon__highlight",d:"M13.175 15.71s-1.357 1.258.523 2.987c1.88 1.73-.379 3.912 1.096 5.712.782-.248-.418-.63 2.454-3.616 2.872-2.987 1.045-3.72-.574-4.454-1.619-.733-2.245-2.096-3.499-.629zm-2.506-2.987s.209-.68 1.305-.157c1.097.524 1.306-2.253 3.29-2.986 1.985-.734 2.037-1.625.783-2.306-1.253-.681-.888-1.205-2.088.472-1.202 1.676-2.007-1.516-.157-2.096.835-.262 1.044-1.468 0-1.834-1.045-.367-3.238.104-4.334-1.153C8.37 1.405 6.596.148 5.028 2.82c-1.566 2.672-.626 2.62 0 2.882.628.262 1.358-.42 2.09.943.73 1.363-.21 3.93.73 4.873.94.943-.068 2.841 3.604 3.302.418.052.835.157 1.044.366.21.21.992-.995-.679-1.362-1.67-.367-1.357-.786-1.148-1.1zm5.84-9.941c.495.332 1.462.157.992 1.258-.47 1.1-.627 2.882.313 3.51.94.63.836-1.938 2.559-1.938 1.723 0 2.872-6.13-.784-5.083-3.655 1.048-3.55 1.939-3.08 2.253zM44.716 1.3c.575-1.152-1.514-.89-2.715-.157-1.201.734-2.611.629-3.394.157-.784-.471-.418.734-1.619.891-1.201.157-2.559.262-2.298-.733.261-.996-1.096-.525-1.096-.525-1.15.367-1.985 1.677-1.724 2.83.261 1.153-1.514 1.834-3.133 1.153s-3.551.105-4.125 2.148c-.575 2.044-.992 2.463-1.723 3.197-.732.733.94 1.677 2.036-.053 1.097-1.729 1.828-.366 2.506.367.285.308.68 1.048.68 1.048s.115.258.317.618a2.081 2.081 0 00-.644-.103h-.258a2.028 2.028 0 00-1.518-.681h-2.297a2.04 2.04 0 00-2.037 2.043 2.04 2.04 0 002.037 2.044h1.712l.055.066c-.102.34-.272 1.214.457 1.701.919.615-.51.974.357 2.51.868 1.537 1.736 1.178 2.246.359.51-.82.306-1.025.97-1.537.664-.512.766-1.383.102-2.1-.29-.313-.287-.684-.193-1.003.163-.205.289-.442.366-.7l.031-.039-.02.003a2.106 2.106 0 00.07-.74c.27.209.56.355.857.389 1.32.147.948-1.129 1.836-1.121.51.233.796.626.984 1.435.366 1.572.575.262 1.62-.786 1.044-1.048 1.357-.173 2.819 1.153s.888-.524.731-1.467c-.157-.944 1.88-.01 1.306-2.146-.575-2.135 1.149-.422 1.514-2.098.366-1.677-1.201-1.94-.731-3.25.47-1.31 1.785-2.061 2.037-.209.275 2.031 2.287 1.773 1.817-.218-.47-1.991-.13-1.981.654-2.505.783-.525-1.166-.788-.592-1.94zM39.39 20.007c-1.134.27-.731 2.205.627 2.046 1.357-.16 2.245-.055 2.82 1.203.574 1.258 2.558-1.467 1.514-2.83-1.044-1.362-.835-1.467-1.358-2.358-.522-.89-2.507 1.677-3.603 1.94zm2.432-4.866h-.108a.792.792 0 010-1.583h.108a.792.792 0 110 1.583zm-4.302 3.486a.798.798 0 01-.56-.233.8.8 0 01-.231-.56.8.8 0 01.231-.56.8.8 0 01.56-.23.8.8 0 01.56.23.797.797 0 01.233.56.796.796 0 01-.792.793zm-7.133 3.593a.793.793 0 01-.56-1.35.793.793 0 011.12 0 .795.795 0 01.232.559.797.797 0 01-.792.792zm9.693-4.574a.797.797 0 01-.56-.231.794.794 0 01.56-1.352.793.793 0 010 1.583zm2.288-4.574a.792.792 0 01-.345-1.505c.597-.288.968-.88.968-1.544a.792.792 0 111.584 0 3.316 3.316 0 01-1.863 2.97.79.79 0 01-.344.08z"}))},331:function(t,e,r){"use strict";r(255);var n=r(256);r.d(e,"a",(function(){return n.a}))},484:function(t,e,r){t.exports=r(27)(3089)},485:function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},486:function(t,e,r){"use strict";e.decode=e.parse=r(487),e.encode=e.stringify=r(488)},487:function(t,e,r){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=t.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var h,p,f,y,m=t[l].replace(s,"%20"),g=m.indexOf(r);g>=0?(h=m.substr(0,g),p=m.substr(g+1)):(h=m,p=""),f=decodeURIComponent(h),y=decodeURIComponent(p),n(a,f)?i(a[f])?a[f].push(y):a[f]=[a[f],y]:a[f]=y}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},488:function(t,e,r){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var s=encodeURIComponent(n(a))+r;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(n(t))})).join(e):s+encodeURIComponent(n(t[a]))})).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var a=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},489:function(t,e,r){!function(t){"use strict";function e(t){return t}function r(t){if(null==t)return e;var r,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(r=n=0);var c=2,u=t.length,l=new Array(u);for(l[0]=(r+=t[0])*i+a,l[1]=(n+=t[1])*o+s;c<u;)l[c]=t[c],++c;return l}}function n(t){var e,n=r(t.transform),i=1/0,o=i,a=-i,s=-i;function c(t){(t=n(t))[0]<i&&(i=t[0]),t[0]>a&&(a=t[0]),t[1]<o&&(o=t[1]),t[1]>s&&(s=t[1])}function u(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"Point":c(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(c)}}for(e in t.arcs.forEach((function(t){for(var e,r=-1,c=t.length;++r<c;)(e=n(t[r],r))[0]<i&&(i=e[0]),e[0]>a&&(a=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1])})),t.objects)u(t.objects[e]);return[i,o,a,s]}function i(t,e){var r=e.id,n=e.bbox,i=null==e.properties?{}:e.properties,a=o(t,e);return null==r&&null==n?{type:"Feature",properties:i,geometry:a}:null==n?{type:"Feature",id:r,properties:i,geometry:a}:{type:"Feature",id:r,bbox:n,properties:i,geometry:a}}function o(t,e){var n=r(t.transform),i=t.arcs;function o(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],o=0,a=r.length;o<a;++o)e.push(n(r[o],o));t<0&&function(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}(e,a)}function a(t){return n(t)}function s(t){for(var e=[],r=0,n=t.length;r<n;++r)o(t[r],e);return e.length<2&&e.push(e[0]),e}function c(t){for(var e=s(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(c)}return function t(e){var r,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(t)};case"Point":r=a(e.coordinates);break;case"MultiPoint":r=e.coordinates.map(a);break;case"LineString":r=s(e.arcs);break;case"MultiLineString":r=e.arcs.map(s);break;case"Polygon":r=u(e.arcs);break;case"MultiPolygon":r=e.arcs.map(u);break;default:return null}return{type:n,coordinates:r}}(e)}function a(t,e){var r={},n={},i={},o=[],a=-1;function s(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){r[t<0?~t:t]=1})),o.push(i)}}return e.forEach((function(r,n){var i,o=t.arcs[r<0?~r:r];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=r,e[n]=i)})),e.forEach((function(e){var r,o,a=function(e){var r,n=t.arcs[e<0?~e:e],i=n[0];return t.transform?(r=[0,0],n.forEach((function(t){r[0]+=t[0],r[1]+=t[1]}))):r=n[n.length-1],e<0?[r,i]:[i,r]}(e),s=a[0],c=a[1];if(r=i[s])if(delete i[r.end],r.push(e),r.end=c,o=n[c]){delete n[o.start];var u=o===r?r:r.concat(o);n[u.start=r.start]=i[u.end=o.end]=u}else n[r.start]=i[r.end]=r;else if(r=n[c])if(delete n[r.start],r.unshift(e),r.start=s,o=i[s]){delete i[o.end];var l=o===r?r:o.concat(r);n[l.start=o.start]=i[l.end=r.end]=l}else n[r.start]=i[r.end]=r;else n[(r=[e]).start=s]=i[r.end=c]=r})),s(i,n),s(n,i),e.forEach((function(t){r[t<0?~t:t]||o.push([t])})),o}function s(t,e,r){var n,i,o;if(arguments.length>1)n=function(t,e,r){var n,i=[],o=[];function a(t){var e=t<0?~t:t;(o[e]||(o[e]=[])).push({i:t,g:n})}function s(t){t.forEach(a)}function c(t){t.forEach(s)}function u(t){t.forEach(c)}function l(t){switch(n=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":c(t.arcs);break;case"MultiPolygon":u(t.arcs)}}return l(e),o.forEach(null==r?function(t){i.push(t[0].i)}:function(t){r(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,r);else for(i=0,n=new Array(o=t.arcs.length);i<o;++i)n[i]=i;return{type:"MultiLineString",arcs:a(t,n)}}function c(t,e){var r={},n=[],i=[];function s(t){t.forEach((function(e){e.forEach((function(e){(r[e=e<0?~e:e]||(r[e]=[])).push(t)}))})),n.push(t)}function c(e){return function(t){for(var e,r=-1,n=t.length,i=t[n-1],o=0;++r<n;)e=i,i=t[r],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}(o(t,{type:"Polygon",arcs:[e]}).coordinates[0])}return e.forEach((function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":s(e.arcs);break;case"MultiPolygon":e.arcs.forEach(s)}})),n.forEach((function(t){if(!t._){var e=[],n=[t];for(t._=1,i.push(e);t=n.pop();)e.push(t),t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].forEach((function(t){t._||(t._=1,n.push(t))}))}))}))}})),n.forEach((function(t){delete t._})),{type:"MultiPolygon",arcs:i.map((function(e){var n,i=[];if(e.forEach((function(t){t.forEach((function(t){t.forEach((function(t){r[t<0?~t:t].length<2&&i.push(t)}))}))})),(n=(i=a(t,i)).length)>1)for(var o,s,u=1,l=c(i[0]);u<n;++u)(o=c(i[u]))>l&&(s=i[0],i[0]=i[u],i[u]=s,l=o);return i})).filter((function(t){return t.length>0}))}}function u(t,e){for(var r=0,n=t.length;r<n;){var i=r+n>>>1;t[i]<e?r=i+1:n=i}return r}function l(t){if(null==t)return e;var r,n,i=t.scale[0],o=t.scale[1],a=t.translate[0],s=t.translate[1];return function(t,e){e||(r=n=0);var c=2,u=t.length,l=new Array(u),h=Math.round((t[0]-a)/i),p=Math.round((t[1]-s)/o);for(l[0]=h-r,r=h,l[1]=p-n,n=p;c<u;)l[c]=t[c],++c;return l}}t.bbox=n,t.feature=function(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return i(t,e)}))}:i(t,e)},t.merge=function(t){return o(t,c.apply(this,arguments))},t.mergeArcs=c,t.mesh=function(t){return o(t,s.apply(this,arguments))},t.meshArcs=s,t.neighbors=function(t){var e={},r=t.map((function(){return[]}));function n(t,r){t.forEach((function(t){t<0&&(t=~t);var n=e[t];n?n.push(r):e[t]=[r]}))}function i(t,e){t.forEach((function(t){n(t,e)}))}var o={LineString:n,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach((function(t){i(t,e)}))}};for(var a in t.forEach((function t(e,r){"GeometryCollection"===e.type?e.geometries.forEach((function(e){t(e,r)})):e.type in o&&o[e.type](e.arcs,r)})),e)for(var s=e[a],c=s.length,l=0;l<c;++l)for(var h=l+1;h<c;++h){var p,f=s[l],y=s[h];(p=r[f])[a=u(p,y)]!==y&&p.splice(a,0,y),(p=r[y])[a=u(p,f)]!==f&&p.splice(a,0,f)}return r},t.quantize=function(t,e){if(t.transform)throw new Error("already quantized");if(e&&e.scale)c=t.bbox;else{if(!((r=Math.floor(e))>=2))throw new Error("n must be 2");var r,i=(c=t.bbox||n(t))[0],o=c[1],a=c[2],s=c[3];e={scale:[a-i?(a-i)/(r-1):1,s-o?(s-o)/(r-1):1],translate:[i,o]}}var c,u,h=l(e),p=t.objects,f={};function y(t){return h(t)}function m(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(m)};break;case"Point":e={type:"Point",coordinates:y(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(y)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}for(u in p)f[u]=m(p[u]);return{type:"Topology",bbox:c,transform:e,objects:f,arcs:t.arcs.map((function(t){var e,r=0,n=1,i=t.length,o=new Array(i);for(o[0]=h(t[0],0);++r<i;)((e=h(t[r],r))[0]||e[1])&&(o[n++]=e);return 1===n&&(o[n++]=[0,0]),o.length=n,o}))}},t.transform=r,t.untransform=l,Object.defineProperty(t,"__esModule",{value:!0})}(e)},490:function(t,e,r){const n=r(183),i=r(304),{safeRe:o,t:a}=r(303);t.exports=(t,e)=>{if(t instanceof n)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let r=null;if((e=e||{}).rtl){const n=e.includePrerelease?o[a.COERCERTLFULL]:o[a.COERCERTL];let i;for(;(i=n.exec(t))&&(!r||r.index+r[0].length!==t.length);)r&&i.index+i[0].length===r.index+r[0].length||(r=i),n.lastIndex=i.index+i[1].length+i[2].length;n.lastIndex=-1}else r=t.match(e.includePrerelease?o[a.COERCEFULL]:o[a.COERCE]);if(null===r)return null;const s=r[2],c=r[3]||"0",u=r[4]||"0",l=e.includePrerelease&&r[5]?`-${r[5]}`:"",h=e.includePrerelease&&r[6]?`+${r[6]}`:"";return i(`${s}.${c}.${u}${l}${h}`,e)}},491:function(t,e){const r=Object.freeze({loose:!0}),n=Object.freeze({});t.exports=t=>t?"object"!=typeof t?r:t:n},492:function(t,e){const r=/^[0-9]+$/,n=(t,e)=>{const n=r.test(t),i=r.test(e);return n&&i&&(t=+t,e=+e),t===e?0:n&&!i?-1:i&&!n?1:t<e?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(t,e)=>n(e,t)}},493:function(t,e,r){const n=r(304);t.exports=(t,e)=>{const r=n(t,e);return r?r.version:null}},494:function(t,e,r){const n=r(183);t.exports=(t,e)=>new n(t,e).major},495:function(t,e,r){const n=r(183);t.exports=(t,e)=>new n(t,e).minor},496:function(t,e,r){"use strict";t.exports=d;var n,i=r(497),o=r(305),a=r(499),s=(n="function"==typeof Symbol&&"1"!==Object({IS_KIBANA_DISTRIBUTABLE:"true"})._nodeLRUCacheForceNoSymbol?function(t){return Symbol(t)}:function(t){return"_"+t})("max"),c=n("length"),u=n("lengthCalculator"),l=n("allowStale"),h=n("maxAge"),p=n("dispose"),f=n("noDisposeOnSet"),y=n("lruList"),m=n("cache");function g(){return 1}function d(t){if(!(this instanceof d))return new d(t);"number"==typeof t&&(t={max:t}),t||(t={});var e=this[s]=t.max;(!e||"number"!=typeof e||e<=0)&&(this[s]=1/0);var r=t.length||g;"function"!=typeof r&&(r=g),this[u]=r,this[l]=t.stale||!1,this[h]=t.maxAge||0,this[p]=t.dispose,this[f]=t.noDisposeOnSet||!1,this.reset()}function v(t,e,r,n){var i=r.value;E(t,i)&&(_(t,r),t[l]||(i=void 0)),i&&e.call(n,i.value,i.key,t)}function b(t,e,r){var n=t[m].get(e);if(n){var i=n.value;E(t,i)?(_(t,n),t[l]||(i=void 0)):r&&t[y].unshiftNode(n),i&&(i=i.value)}return i}function E(t,e){if(!e||!e.maxAge&&!t[h])return!1;var r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[h]&&r>t[h]}function S(t){if(t[c]>t[s])for(var e=t[y].tail;t[c]>t[s]&&null!==e;){var r=e.prev;_(t,e),e=r}}function _(t,e){if(e){var r=e.value;t[p]&&t[p](r.key,r.value),t[c]-=r.length,t[m].delete(r.key),t[y].removeNode(e)}}function w(t,e,r,n,i){this.key=t,this.value=e,this.length=r,this.now=n,this.maxAge=i||0}Object.defineProperty(d.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this[s]=t,S(this)},get:function(){return this[s]},enumerable:!0}),Object.defineProperty(d.prototype,"allowStale",{set:function(t){this[l]=!!t},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(d.prototype,"maxAge",{set:function(t){(!t||"number"!=typeof t||t<0)&&(t=0),this[h]=t,S(this)},get:function(){return this[h]},enumerable:!0}),Object.defineProperty(d.prototype,"lengthCalculator",{set:function(t){"function"!=typeof t&&(t=g),t!==this[u]&&(this[u]=t,this[c]=0,this[y].forEach((function(t){t.length=this[u](t.value,t.key),this[c]+=t.length}),this)),S(this)},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this[c]},enumerable:!0}),Object.defineProperty(d.prototype,"itemCount",{get:function(){return this[y].length},enumerable:!0}),d.prototype.rforEach=function(t,e){e=e||this;for(var r=this[y].tail;null!==r;){var n=r.prev;v(this,t,r,e),r=n}},d.prototype.forEach=function(t,e){e=e||this;for(var r=this[y].head;null!==r;){var n=r.next;v(this,t,r,e),r=n}},d.prototype.keys=function(){return this[y].toArray().map((function(t){return t.key}),this)},d.prototype.values=function(){return this[y].toArray().map((function(t){return t.value}),this)},d.prototype.reset=function(){this[p]&&this[y]&&this[y].length&&this[y].forEach((function(t){this[p](t.key,t.value)}),this),this[m]=new i,this[y]=new a,this[c]=0},d.prototype.dump=function(){return this[y].map((function(t){if(!E(this,t))return{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}}),this).toArray().filter((function(t){return t}))},d.prototype.dumpLru=function(){return this[y]},d.prototype.inspect=function(t,e){var r="LRUCache {",n=!1;this[l]&&(r+="\n  allowStale: true",n=!0);var i=this[s];i&&i!==1/0&&(n&&(r+=","),r+="\n  max: "+o.inspect(i,e),n=!0);var a=this[h];a&&(n&&(r+=","),r+="\n  maxAge: "+o.inspect(a,e),n=!0);var p=this[u];p&&p!==g&&(n&&(r+=","),r+="\n  length: "+o.inspect(this[c],e),n=!0);var f=!1;return this[y].forEach((function(t){f?r+=",\n  ":(n&&(r+=",\n"),f=!0,r+="\n  ");var i=o.inspect(t.key).split("\n").join("\n  "),s={value:t.value};t.maxAge!==a&&(s.maxAge=t.maxAge),p!==g&&(s.length=t.length),E(this,t)&&(s.stale=!0),s=o.inspect(s,e).split("\n").join("\n  "),r+=i+" => "+s})),(f||n)&&(r+="\n"),r+="}"},d.prototype.set=function(t,e,r){var n=(r=r||this[h])?Date.now():0,i=this[u](e,t);if(this[m].has(t)){if(i>this[s])return _(this,this[m].get(t)),!1;var o=this[m].get(t).value;return this[p]&&(this[f]||this[p](t,o.value)),o.now=n,o.maxAge=r,o.value=e,this[c]+=i-o.length,o.length=i,this.get(t),S(this),!0}var a=new w(t,e,i,n,r);return a.length>this[s]?(this[p]&&this[p](t,e),!1):(this[c]+=a.length,this[y].unshift(a),this[m].set(t,this[y].head),S(this),!0)},d.prototype.has=function(t){return!!this[m].has(t)&&!E(this,this[m].get(t).value)},d.prototype.get=function(t){return b(this,t,!0)},d.prototype.peek=function(t){return b(this,t,!1)},d.prototype.pop=function(){var t=this[y].tail;return t?(_(this,t),t.value):null},d.prototype.del=function(t){_(this,this[m].get(t))},d.prototype.load=function(t){this.reset();for(var e=Date.now(),r=t.length-1;r>=0;r--){var n=t[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{var o=i-e;o>0&&this.set(n.k,n.v,o)}}},d.prototype.prune=function(){var t=this;this[m].forEach((function(e,r){b(t,r,!1)}))}},497:function(t,e,r){"pseudomap"===Object({IS_KIBANA_DISTRIBUTABLE:"true"}).npm_package_name&&"test"===Object({IS_KIBANA_DISTRIBUTABLE:"true"}).npm_lifecycle_script&&(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).TEST_PSEUDOMAP="true"),"function"!=typeof Map||Object({IS_KIBANA_DISTRIBUTABLE:"true"}).TEST_PSEUDOMAP?t.exports=r(498):t.exports=Map},498:function(t,e){var r=Object.prototype.hasOwnProperty;function n(t){if(!(this instanceof n))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),t)if(t instanceof n||"function"==typeof Map&&t instanceof Map)t.forEach((function(t,e){this.set(e,t)}),this);else{if(!Array.isArray(t))throw new TypeError("invalid argument");t.forEach((function(t){this.set(t[0],t[1])}),this)}}function i(t,e){return t===e||t!=t&&e!=e}function o(t,e,r){this.key=t,this.value=e,this._index=r}function a(t,e){for(var n=0,o="_"+e,a=o;r.call(t,a);a=o+n++)if(i(t[a].key,e))return t[a]}t.exports=n,n.prototype.forEach=function(t,e){e=e||this,Object.keys(this._data).forEach((function(r){"size"!==r&&t.call(e,this._data[r].value,this._data[r].key)}),this)},n.prototype.has=function(t){return!!a(this._data,t)},n.prototype.get=function(t){var e=a(this._data,t);return e&&e.value},n.prototype.set=function(t,e){!function(t,e,n){for(var a=0,s="_"+e,c=s;r.call(t,c);c=s+a++)if(i(t[c].key,e))return void(t[c].value=n);t.size++,t[c]=new o(e,n,c)}(this._data,t,e)},n.prototype.delete=function(t){var e=a(this._data,t);e&&(delete this._data[e._index],this._data.size--)},n.prototype.clear=function(){var t=Object.create(null);t.size=0,Object.defineProperty(this,"_data",{value:t,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(n.prototype,"size",{get:function(){return this._data.size},set:function(t){},enumerable:!0,configurable:!0}),n.prototype.values=n.prototype.keys=n.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},499:function(t,e){function r(t){var e=this;if(e instanceof r||(e=new r),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach((function(t){e.push(t)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)e.push(arguments[n]);return e}function n(t,e,r,i){if(!(this instanceof n))return new n(t,e,r,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}t.exports=r,r.Node=n,r.create=r,r.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null},r.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},r.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},r.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)i=arguments[t],(r=this).tail=new n(i,r.tail,null,r),r.head||(r.head=r.tail),r.length++;var r,i;return this.length},r.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)i=arguments[t],(r=this).head=new n(i,null,r.head,r),r.tail||(r.tail=r.head),r.length++;var r,i;return this.length},r.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},r.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},r.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;null!==r;n++)t.call(e,r.value,n,this),r=r.next},r.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;null!==r;n--)t.call(e,r.value,n,this),r=r.prev},r.prototype.get=function(t){for(var e=0,r=this.head;null!==r&&e<t;e++)r=r.next;if(e===t&&null!==r)return r.value},r.prototype.getReverse=function(t){for(var e=0,r=this.tail;null!==r&&e<t;e++)r=r.prev;if(e===t&&null!==r)return r.value},r.prototype.map=function(t,e){e=e||this;for(var n=new r,i=this.head;null!==i;)n.push(t.call(e,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(t,e){e=e||this;for(var n=new r,i=this.tail;null!==i;)n.push(t.call(e,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var i=0;null!==n;i++)r=t(r,n.value,i),n=n.next;return r},r.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var i=this.length-1;null!==n;i--)r=t(r,n.value,i),n=n.prev;return r},r.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;null!==r;e++)t[e]=r.value,r=r.next;return t},r.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;null!==r;e++)t[e]=r.value,r=r.prev;return t},r.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,o=this.head;null!==o&&i<t;i++)o=o.next;for(;null!==o&&i<e;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new r;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,o=this.tail;null!==o&&i>e;i--)o=o.prev;for(;null!==o&&i>t;i--,o=o.prev)n.push(o.value);return n},r.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this}},500:function(t,e,r){"use strict";(function(e){var n=r(501);
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function i(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function o(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=r(305),s=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function h(t){return!o(t)&&"function"==typeof e.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)))}var p=t.exports=v,f=/\s*function\s+([^\(\s]*)\s*/;function y(t){if(a.isFunction(t)){if(u)return t.name;var e=t.toString().match(f);return e&&e[1]}}function m(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function g(t){if(u||!a.isFunction(t))return a.inspect(t);var e=y(t);return"[Function"+(e?": "+e:"")+"]"}function d(t,e,r,n,i){throw new p.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function v(t,e){t||d(t,!0,e,"==",p.ok)}function b(t,e,r,n){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(h(t)&&h(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var s=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null==t||null==e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=E(t),o=E(e);if(i&&!o||!i&&o)return!1;if(i)return b(t=c.call(t),e=c.call(e),r);var s,u,l=w(t),h=w(e);if(l.length!==h.length)return!1;for(l.sort(),h.sort(),u=l.length-1;u>=0;u--)if(l[u]!==h[u])return!1;for(u=l.length-1;u>=0;u--)if(!b(t[s=l[u]],e[s],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function E(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function S(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function _(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&d(i,r,"Missing expected exception"+n);var o="string"==typeof n,s=!t&&i&&!r;if((!t&&a.isError(i)&&o&&S(i,r)||s)&&d(i,r,"Got unwanted exception"+n),t&&i&&r&&!S(i,r)||!t&&i)throw i}p.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=m(g(this.actual),128)+" "+this.operator+" "+m(g(this.expected),128),this.generatedMessage=!0);var e=t.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=y(e),o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},a.inherits(p.AssertionError,Error),p.fail=d,p.ok=v,p.equal=function(t,e,r){t!=e&&d(t,e,r,"==",p.equal)},p.notEqual=function(t,e,r){t==e&&d(t,e,r,"!=",p.notEqual)},p.deepEqual=function(t,e,r){b(t,e,!1)||d(t,e,r,"deepEqual",p.deepEqual)},p.deepStrictEqual=function(t,e,r){b(t,e,!0)||d(t,e,r,"deepStrictEqual",p.deepStrictEqual)},p.notDeepEqual=function(t,e,r){b(t,e,!1)&&d(t,e,r,"notDeepEqual",p.notDeepEqual)},p.notDeepStrictEqual=function t(e,r,n){b(e,r,!0)&&d(e,r,n,"notDeepStrictEqual",t)},p.strictEqual=function(t,e,r){t!==e&&d(t,e,r,"===",p.strictEqual)},p.notStrictEqual=function(t,e,r){t===e&&d(t,e,r,"!==",p.notStrictEqual)},p.throws=function(t,e,r){_(!0,t,e,r)},p.doesNotThrow=function(t,e,r){_(!1,t,e,r)},p.ifError=function(t){if(t)throw t},p.strict=n((function t(e,r){e||d(e,!0,r,"==",t)}),p,{equal:p.strictEqual,deepEqual:p.deepStrictEqual,notEqual:p.notStrictEqual,notDeepEqual:p.notDeepStrictEqual}),p.strict.strict=p.strict;var w=Object.keys||function(t){var e=[];for(var r in t)s.call(t,r)&&e.push(r);return e}}).call(this,r(118))},501:function(t,e,r){t.exports=r(27)(1128)},95:function(t,e,r){"use strict";r.r(e),r.d(e,"getKibanaTileMap",(function(){return o})),r.d(e,"getEmsFileLayers",(function(){return a})),r.d(e,"getEmsTmsServices",(function(){return s})),r.d(e,"isRetina",(function(){return h}));var n=r(5),i=r(24);function o(){const t=Object(n.B)();return t.config.tilemap?t.config.tilemap:{}}async function a(){return Object(n.m)().isEMSEnabled()?(await l()).getFileLayers():[]}async function s(){return Object(n.m)().isEMSEnabled()?(await l()).getTMSServices():[]}let c,u=null;async function l(){u||(u=new Promise((async(t,e)=>{try{t(await Object(n.B)().createEMSClient())}catch(t){e(t)}})));const t=await u,e=Object(i.c)();return c!==e&&(c=e,t.addQueryParams({license:e||""})),t}function h(){return 2===window.devicePixelRatio}}}]);