/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.maps_bundle_jsonpfunction=window.maps_bundle_jsonpfunction||[]).push([[12],{173:function(e,t,a){"use strict";a.d(t,"d",(function(){return C})),a.d(t,"c",(function(){return M})),a.d(t,"b",(function(){return E})),a.d(t,"a",(function(){return L})),a.d(t,"g",(function(){return v})),a.d(t,"h",(function(){return y})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return j})),a.d(t,"i",(function(){return x}));var n=a(2),i=a.n(n),s=a(18),r=a.n(s),o=a(197),l=a(14),c=a(198),d=a(4);const u=({user:e,avatar:t,...a})=>{const n=Object(c.e)(e);return Object(d.jsx)(l.EuiToolTip,r()({content:Object(d.jsx)(l.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(o.a,{user:e,avatar:t,size:"l"})),Object(d.jsx)(l.EuiFlexItem,{grow:!0,style:{minWidth:0}},Object(d.jsx)("div",null,n),e.email&&e.email!==n?Object(d.jsx)(l.EuiText,{size:"xs"},e.email):void 0))},a))},p=({user:e,avatar:t,...a})=>e?Object(d.jsx)(u,{user:e,avatar:t,position:"top",delay:"regular"},Object(d.jsx)(o.a,r()({user:e,avatar:t},a))):Object(d.jsx)(o.a,a);var b=a(67);const g=()=>{let e,t;const a=new Promise(((a,n)=>{e=a,t=n}));return{resolve:e,reject:t,value:a}},m=new b.QueryClient({defaultOptions:{queries:{retry:!1,staleTime:18e5}}}),h=i.a.createContext(null),j=({children:e,...t})=>Object(d.jsx)(b.QueryClientProvider,{client:m},Object(d.jsx)(h.Provider,{value:t},e)),f=({children:e,core:t})=>{const a=Object(n.useCallback)((async e=>0===e.length?[]:t.userProfile.bulkGet({uids:new Set(e),dataPath:"avatar"})),[t.userProfile]),i=Object(n.useMemo)((()=>(e=>{const t={batch:new Set,currentRequest:g(),timer:void 0,start:null,latest:null};return{fetch:a=>(t.start||(t.start=Date.now()),t.latest=Date.now(),t.batch.add(a),clearTimeout(t.timer),t.timer=setTimeout((()=>{const a=e.fetcher([...t.batch]),n=t.currentRequest;return t.batch=new Set,t.currentRequest=g(),t.timer=void 0,t.start=null,t.latest=null,a.then((e=>{n.resolve(e)})).catch((e=>{n.reject(e)})),a}),50-(t.latest-t.start)),t.currentRequest.value.then((t=>e.resolver(t,a))))}})({fetcher:a,resolver:(e,t)=>e.find((e=>e.uid===t))}).fetch),[a]);return Object(d.jsx)(j,{getUserProfile:i,bulkGetUserProfiles:a},e)};function x(){const e=Object(n.useContext)(h);if(!e)throw new Error("UserProfilesContext is missing. Ensure your component or React root is wrapped with <UserProfilesProvider />");return e}const O=e=>["user-profile",{uids:e}],v=e=>{const{getUserProfile:t}=x();return Object(b.useQuery)((e=>["user-profile",e])(e),(async()=>t(e)),{staleTime:1/0})},y=(e,t)=>{var a;const{bulkGetUserProfiles:n}=x();return Object(b.useQuery)({queryKey:O(e),queryFn:()=>n(e),enabled:null===(a=null==t?void 0:t.enabled)||void 0===a||a})};function C(e){const t=v(e.uid);return t.data?Object(d.jsx)(p,{user:t.data.user,avatar:t.data.data.avatar,size:"s","data-test-subj":`userAvatarTip-${t.data.user.username}`}):null}var S=a(54);const E=e=>Object(d.jsx)(I,r()({content:Object(d.jsx)(S.FormattedMessage,{id:"contentManagement.userProfiles.noCreatorTip",defaultMessage:"Creators are assigned when objects are created (after version 8.14)"})},e)),M=e=>Object(d.jsx)(I,r()({content:Object(d.jsx)(S.FormattedMessage,{id:"contentManagement.userProfiles.noUpdaterTip",defaultMessage:"Updated by is set when objects are updated (after version 8.14)"})},e));var T={name:"xnsfkl",styles:"text-wrap:balance"};const I=({iconType:e="questionInCircle",...t})=>Object(d.jsx)(l.EuiIconTip,r()({"aria-label":"Additional information",position:"top",color:"inherit",iconProps:{style:{verticalAlign:"text-bottom",marginLeft:2}},css:T,type:e},t));var F=a(3);function L({entityName:e=F.i18n.translate("contentManagement.userProfiles.managedAvatarTip.defaultEntityName",{defaultMessage:"object"})}){return Object(d.jsx)(l.EuiToolTip,{content:F.i18n.translate("contentManagement.userProfiles.managedAvatarTip.avatarTooltip",{defaultMessage:"This {entityName} is created and managed by Elastic. Clone it to make changes.",values:{entityName:e}})},Object(d.jsx)(l.EuiAvatar,{name:F.i18n.translate("contentManagement.userProfiles.managedAvatarTip.avatarLabel",{defaultMessage:"Managed"}),iconType:"logoElastic",iconSize:"l",color:"subdued",size:"s","data-test-subj":"managedAvatarTip"}))}},197:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(18),i=a.n(n),s=a(14),r=(a(2),a(198)),o=a(4);const l=({user:e,avatar:t,...a})=>{const{euiTheme:n}=Object(s.useEuiTheme)();if(!e)return Object(o.jsx)(s.EuiAvatar,i()({name:"",color:n.colors.lightestShade,initials:"?"},a));const l=Object(r.d)(e);return null!=t&&t.imageUrl?Object(o.jsx)(s.EuiAvatar,i()({name:l,imageUrl:t.imageUrl,color:"plain"},a)):Object(o.jsx)(s.EuiAvatar,i()({name:l,initials:Object(r.c)(e,t),initialsLength:r.a,color:Object(r.b)(e,t)},a))}},198:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return c}));var n=a(14);const i=97,s=2;function r(e,t){if(t&&t.color)return t.color;const a=l(e).codePointAt(0)||i;return n.VISUALIZATION_COLORS[a%n.VISUALIZATION_COLORS.length]}function o(e,t){if(t&&t.initials)return t.initials;const a=l(e).split(" "),n=Math.min(s,a.length);return a.splice(n,a.length),a.map((e=>e.substring(0,1))).join("")}function l(e){return e.full_name||e.email||e.username}function c(e){const t=l(e);return e.email&&e.email!==t?`${t} (${e.email})`:t}},200:function(e,t,a){"use strict";e.exports=a(201)},201:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(179);a(20),a(163),a(164);var i=n.default({key:"css"}),s=i.flush,r=i.hydrate,o=i.cx,l=i.merge,c=i.getRegisteredStyles,d=i.injectGlobal,u=i.keyframes,p=i.css,b=i.sheet,g=i.cache;t.cache=g,t.css=p,t.cx=o,t.flush=s,t.getRegisteredStyles=c,t.hydrate=r,t.injectGlobal=d,t.keyframes=u,t.merge=l,t.sheet=b},260:function(e,t,a){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},261:function(e,t,a){e.exports=a.p+"1cbd62546f764080f7071e03889e9de3.svg"},355:function(e,t,a){"use strict";const n=a(356),i=a(357),s=a(358);function r(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function l(e,t){return t.decode?i(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function b(e,t){r((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=a):n[e]=a};case"bracket":return(e,a,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=[a]:n[e]=a};case"comma":case"separator":return(t,a,n)=>{const i="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);n[t]=i};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const i of e.split("&")){let[e,r]=s(t.decode?i.replace(/\+/g," "):i,"=");r=void 0===r?null:["comma","separator"].includes(t.arrayFormat)?r:l(r,t),a(l(e,t),r,n)}for(const e of Object.keys(n)){const a=n[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=p(a[e],t);else n[e]=p(a,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const a=n[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=u,t.parse=b,t.stringify=(e,t)=>{if(!e)return"";r((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],n=function(e){switch(e.arrayFormat){case"index":return t=>(a,n)=>{const i=a.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[",i,"]"].join("")]:[...a,[o(t,e),"[",o(i,e),"]=",o(n,e)].join("")]};case"bracket":return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(n,e)].join("")];case"comma":case"separator":return t=>(a,n)=>null==n||0===n.length?a:0===a.length?[[o(t,e),"=",o(n,e)].join("")]:[[a,o(n,e)].join(e.arrayFormatSeparator)];default:return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,o(t,e)]:[...a,[o(t,e),"=",o(n,e)].join("")]}}(t),i={};for(const t of Object.keys(e))a(t)||(i[t]=e[t]);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map((a=>{const i=e[a];return void 0===i?"":null===i?o(a,t):Array.isArray(i)?i.reduce(n(a),[]).join("&"):o(a,t)+"="+o(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,n]=s(e,"#");return Object.assign({url:a.split("?")[0]||"",query:b(u(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:l(n,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const n=d(e.url).split("?")[0]||"",i=t.extract(e.url),s=t.parse(i,{sort:!1}),r=Object.assign(s,e.query);let l=t.stringify(r,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,a)}`),`${n}${l}${c}`}},356:function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},357:function(e,t,a){"use strict";var n="%[a-f0-9]{2}",i=new RegExp("("+n+")|([^%]+?)","gi"),s=new RegExp("("+n+")+","gi");function r(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],r(a),r(n))}function o(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(i)||[],a=1;a<t.length;a++)t=(e=r(t,a).join("")).match(i)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},a=s.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=o(a[0]);n!==a[0]&&(t[a[0]]=n)}a=s.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),r=0;r<i.length;r++){var l=i[r];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},358:function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},360:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(361);case"v8light":return a(363)}},361:function(e,t,a){var n=a(104),i=a(362);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},362:function(e,t,a){var n=a(105),i=a(260),s=a(261);t=n(!1);var r=i(s);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px rgba(0,0,0,.175),0 1.9px 4px rgba(0,0,0,.125),0 4.5px 10px rgba(0,0,0,.125)}.kbnSolutionAvatar--xxl{background:#1d1e24 url("+r+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},363:function(e,t,a){var n=a(104),i=a(364);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},364:function(e,t,a){var n=a(105),i=a(260),s=a(261);t=n(!1);var r=i(s);t.push([e.i,".kbnSolutionAvatar{box-shadow:0 .7px 1.4px #00000012,0 1.9px 4px #0000000d,0 4.5px 10px #0000000d}.kbnSolutionAvatar--xxl{background:#fff url("+r+") no-repeat;background-size:cover,125%;border-radius:100px;box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a;display:inline-block;height:100px;line-height:100px;text-align:center;width:100px}",""]),e.exports=t},365:function(e,t,a){e.exports=a.p+"baad30acfe492601d08a0e839c9bb3f5.svg"},366:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(367);case"v8light":return a(369)}},367:function(e,t,a){var n=a(104),i=a(368);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},368:function(e,t,a){(t=a(105)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#141519}.kbnSolutionNav__flyout .kbnSolutionNav{flex:auto}.kbnSolutionNav{display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#98a2b380 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#98a2b380;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px)and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},369:function(e,t,a){var n=a(104),i=a(370);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},370:function(e,t,a){(t=a(105)(!1)).push([e.i,'.kbnSolutionNav__flyout{background-color:#fafbfd}.kbnSolutionNav__flyout .kbnSolutionNav{flex:auto}.kbnSolutionNav{display:flex;flex-direction:column;height:100%;overflow-x:hidden;overflow-y:auto;scrollbar-color:#69707d80 #0000;scrollbar-width:thin}.kbnSolutionNav::-webkit-scrollbar{height:16px;width:16px}.kbnSolutionNav::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#69707d80;border:6px solid #0000;border-radius:16px}.kbnSolutionNav::-webkit-scrollbar-corner,.kbnSolutionNav::-webkit-scrollbar-track{background-color:#0000}.kbnSolutionNav:focus{outline:none}.kbnSolutionNav[tabindex="0"]:focus:focus-visible{outline-style:auto}@media only screen and (min-width:768px)and (max-width:991px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:992px)and (max-width:1199px){.kbnSolutionNav{padding:24px;width:248px}}@media only screen and (min-width:1200px){.kbnSolutionNav{padding:24px;width:248px}}.kbnSolutionNav__title{align-items:center;display:inline-flex}.kbnSolutionNav__titleAvatar{align-self:flex-start;margin-right:12px}.kbnSolutionNav--hidden{opacity:0;pointer-events:none}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNav--hidden{transition:opacity .15s cubic-bezier(.694,.0482,.335,1)}}',""]),e.exports=t},371:function(e,t,a){switch(window.__kbnThemeTag__){case"v8dark":return a(372);case"v8light":return a(374)}},372:function(e,t,a){var n=a(104),i=a(373);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},373:function(e,t,a){(t=a(105)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#1d1e24!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},374:function(e,t,a){var n=a(104),i=a(375);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);n(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},375:function(e,t,a){(t=a(105)(!1)).push([e.i,".kbnSolutionNavCollapseButton{left:232px;opacity:0;position:absolute;top:24px;z-index:2}@media screen and (prefers-reduced-motion:no-preference){.kbnSolutionNavCollapseButton{transition:opacity .15s,left .15s,background .15s}}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover{transition-delay:0s!important}.kbnSolutionNavCollapseButton:focus,.kbnSolutionNavCollapseButton:hover,.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{left:224px;opacity:1}.kbnSolutionNav__sidebar:hover .kbnSolutionNavCollapseButton{transition-delay:.7s}.kbnSolutionNavCollapseButton:not(.kbnSolutionNavCollapseButton-isCollapsed){background-color:#fff!important}.kbnSolutionNavCollapseButton-isCollapsed{align-items:flex-start;border-radius:0;bottom:0;height:100%;left:0!important;opacity:1!important;padding-top:32px;right:auto;top:0;transition-delay:0s!important;width:40px}",""]),e.exports=t},619:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(48),i=a(620),s=n.__importDefault(a(622));t.default=function(e,t){s.default(e,t,i.isDeepEqual)}},620:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(48).__importDefault(a(621));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},621:function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,i,s;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(i=n;0!=i--;)if(!e(t[i],a[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(a,s[i]))return!1;for(i=n;0!=i--;){var r=s[i];if(!("_owner"===r&&t.$$typeof||e(t[r],a[r])))return!1}return!0}return t!=t&&a!=a}},622:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2);t.default=function(e,t,a){var i=n.useRef(void 0);i.current&&a(t,i.current)||(i.current=t),n.useEffect(e,i.current)}},648:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Pa}));var n=a(2),i=a.n(n),s=a(9),r=a.n(s),o=a(61),l=a(71),c=a(4);const d=({children:e,...t})=>Object(c.jsx)(o.Router,t,Object(c.jsx)(l.CompatRouter,null,e));var u=a(53),p=a.n(u),b=a(18),g=a.n(b);const m={services:{}},h=Object(n.createContext)(m);var j=a(619),f=a.n(j);const x=({children:e,component:t,render:a,...s})=>{const r=Object(n.useMemo)((()=>{if(t)return e=>Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(O,null),Object(c.jsx)(t,e))}),[t]);if(r)return Object(c.jsx)(o.Route,g()({},s,{component:r}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(c.jsx)(o.Route,g()({},s,{render:e=>Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(O,null),t(e))}))}return Object(c.jsx)(o.Route,s,Object(c.jsx)(O,null),e)},O=()=>{const{executionContext:e}=Object(n.useContext)(h).services,t=Object(o.useRouteMatch)();return function(e,t){f()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},v=({legacySwitch:e=!0,children:t})=>{const a=Object(o.useRouteMatch)();return e?Object(c.jsx)(o.Switch,null,t):Object(c.jsx)(l.Routes,null,n.Children.map(t,(e=>{if(i.a.isValidElement(e)&&e.type===x){var n;const s=Object(u.replace)(null==e?void 0:e.props.path,a.url+"/",""),r="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(c.jsx)(l.Route,{path:s,element:Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(O,null),(null==e||null===(n=e.props)||void 0===n?void 0:n.component)&&Object(c.jsx)(e.props.component,null)||r&&r()||t)})}return e})))};var y=a(3),C=a(608),S=a(15),E=a(54),M=a(199),T=a.n(M),I=a(14),F=a(57),L=a.n(F);a(366),a(360);const k=e=>{const{className:t,size:a,...n}=e,i={};return(e=>void 0===e.iconType)(e)&&(i.iconType=`logo${e.name.replace(/\s+/g,"")}`),Object(c.jsx)(I.EuiAvatar,g()({className:L()("kbnSolutionAvatar",{[`kbnSolutionAvatar--${a}`]:a},t),size:"xxl"===a?"xl":a,iconSize:a,color:"plain"},n,i))};a(371);const N=y.i18n.translate("sharedUXPackages.solutionNav.collapsibleLabel",{defaultMessage:"Collapse side navigation"}),w=y.i18n.translate("sharedUXPackages.solutionNav.openLabel",{defaultMessage:"Open side navigation"}),P=({className:e,isCollapsed:t,...a})=>{const n=L()("kbnSolutionNavCollapseButton",{"kbnSolutionNavCollapseButton-isCollapsed":t},e);return Object(c.jsx)(I.EuiButtonIcon,g()({className:n,size:"s",color:"text",iconType:t?"menuRight":"menuLeft","aria-label":t?w:N,title:t?w:N},a))},_="248px",A=(e,t)=>e.map((e=>(e.tabIndex=t?-1:void 0,e.items=e.items&&A(e.items,t),e))),R=Object(I.htmlIdGenerator)("SolutionNav"),D=({children:e,headingProps:t,icon:a,isOpenOnDesktop:s=!1,items:r,mobileBreakpoints:o=["xs","s"],closeFlyoutButtonPosition:l="outside",name:d,onCollapse:u,canBeCollapsed:p=!0,...b})=>{const m=Object(I.useIsWithinBreakpoints)(o),h=Object(I.useIsWithinBreakpoints)(["m"]),j=Object(I.useIsWithinMinBreakpoint)("l"),[f,x]=Object(n.useState)(!1),O=j&&!s&&p,v=!!e,C=L()("kbnSolutionNav",{"kbnSolutionNav--hidden":O}),S=(null==t?void 0:t.id)||R("heading"),M=(null==t?void 0:t.element)||"h2",T=Object(c.jsx)(I.EuiTitle,{size:"xs",id:S,"data-test-subj":null==t?void 0:t["data-test-subj"],className:"kbnSolutionNav__title"},Object(c.jsx)(M,null,a&&Object(c.jsx)(k,{className:"kbnSolutionNav__titleAvatar",iconType:a,name:d}),Object(c.jsx)("strong",null,Object(c.jsx)(E.FormattedMessage,{id:"sharedUXPackages.solutionNav.mobileTitleText",defaultMessage:"{solutionName} {menuText}",values:{solutionName:d||"Navigation",menuText:m?y.i18n.translate("sharedUXPackages.solutionNav.menuText",{defaultMessage:"menu"}):""}})))),F=Object(n.useMemo)((()=>v?e:r?Object(c.jsx)(I.EuiSideNav,g()({"aria-labelledby":S,"aria-hidden":O,items:A(r,O),mobileBreakpoints:[]},b)):null),[e,S,v,O,r,b]),{euiTheme:N}=Object(I.useEuiTheme)(),w=Object(n.useMemo)((()=>j?s?_:N.size.xxl:h?f||!p?_:N.size.xxl:"0"),[N,s,f,p,h,j]),{setGlobalCSSVariables:D}=Object(I.useEuiThemeCSSVariables)();return Object(n.useEffect)((()=>{D({"--kbnSolutionNavOffset":w})}),[w,D]),Object(c.jsx)(i.a.Fragment,null,m&&Object(c.jsx)(I.EuiCollapsibleNavGroup,{className:C,paddingSize:"none",background:"none",title:T,titleElement:"span",isCollapsible:p,initialIsOpen:!1},Object(c.jsx)(I.EuiPanel,{color:"transparent",paddingSize:"s"},F)),h&&Object(c.jsx)(i.a.Fragment,null,(f||!p)&&Object(c.jsx)(I.EuiFlyout,{ownFocus:!1,outsideClickCloses:!0,onClose:()=>x(!1),side:"left",size:248,closeButtonPosition:l,className:"kbnSolutionNav__flyout",hideCloseButton:!p},Object(c.jsx)(I.EuiPageSidebar,{className:C,hasEmbellish:!0},T,Object(c.jsx)(I.EuiSpacer,{size:"l"}),F)),p&&Object(c.jsx)(P,{isCollapsed:!0,onClick:()=>{x(!f)}})),j&&Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)("div",{className:C},T,Object(c.jsx)(I.EuiSpacer,{size:"l"}),F),p&&Object(c.jsx)(P,{isCollapsed:!s,onClick:u})))};var U=a(200);const B="solutionNavIsCollapsed",z=e=>{const t=t=>{var a;const i=Object(I.useIsWithinBreakpoints)(["m"]),s=Object(I.useIsWithinMinBreakpoint)("l"),[r,o]=Object(n.useState)(!JSON.parse(String(localStorage.getItem(B)))),{solutionNav:l,children:d,...u}=t,{euiTheme:p}=Object(I.useEuiTheme)(),{canBeCollapsed:b=!0}=l,m=i||b&&s&&!r,h=(e=>Object(U.css)("flex:0 1 0;overflow:hidden;",I.euiCanAnimate,"{transition:min-width ",e.animation.fast," ",e.animation.resistance,";}",""))(p),j=L()("kbnSolutionNav__sidebar",{"kbnSolutionNav__sidebar--shrink":m},null===(a=t.pageSideBarProps)||void 0===a?void 0:a.className,h),f=Object(c.jsx)(D,g()({isOpenOnDesktop:r,onCollapse:()=>{o(!r),localStorage.setItem(B,JSON.stringify(r))}},l)),x={paddingSize:"none",...t.pageSideBarProps,minWidth:m?p.size.xxl:void 0,className:j,hasEmbellish:!m};return Object(c.jsx)(e,g()({},u,{pageSideBar:f,pageSideBarProps:x}),d)};var a;return t.displayName=`WithSolutionNavBar(${a=e,a.displayName||a.name||"UnnamedComponent"})`,t};var G=a(32),H=a.n(G);const W=i.a.createContext(null),V=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:n}=t;return Object(c.jsx)(W.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},q=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:n}=t.application,i=H()(n,void 0);return Object(c.jsx)(W.Provider,{value:{navigateToUrl:a,currentAppId:i}},e)},J={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},$=({children:e,navigateToUrl:t,currentAppId:a,...i})=>{const s=Object(n.useRef)(null),r=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const i=((e,t)=>{let a=e;do{var n,i;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(i=a)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const s=i.href,r=""===i.target||"_self"===i.target,o=0===e.button;s&&r&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(i.href))})({event:e,currentAppId:a,navigateToUrl:t,container:s.current})),[a,t]);return Object(c.jsx)("div",g()({onClick:r,ref:s,css:J,"data-test-subj":"kbnRedirectAppLink"},i),e)},Q=({children:e,...t})=>Object(c.jsx)($,g()({},function(){const e=Object(n.useContext)(W);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e);var K=a(365),Y=a.n(K);const X=y.i18n.translate("sharedUXPackages.card.noData.noPermission.title",{defaultMessage:"Contact your administrator"}),Z=y.i18n.translate("sharedUXPackages.card.noData.noPermission.description",{defaultMessage:"This integration is not yet enabled. Your administrator has the required permissions to turn it on."}),ee=y.i18n.translate("sharedUXPackages.card.noData.title",{defaultMessage:"Add Elastic Agent"}),te=y.i18n.translate("sharedUXPackages.card.noData.description",{defaultMessage:"Use Elastic Agent for a simple, unified way to collect data from your machines."}),ae=()=>Object(c.jsx)(I.EuiImage,{size:"fullWidth",style:{width:"max(100%, 360px)",height:240,objectFit:"cover",background:"aliceblue"},url:Y.a,alt:""}),ne=({title:e,description:t,canAccessFleet:a,button:n,href:i,...s})=>Object(c.jsx)(I.EuiCard,g()({css:{maxWidth:400,marginInline:"auto"},paddingSize:"l",title:a?Object(c.jsx)(I.EuiScreenReaderOnly,null,Object(c.jsx)("span",null,e||ee)):Object(c.jsx)(I.EuiTextColor,{color:"default"},X),description:a?t||te:Object(c.jsx)(I.EuiTextColor,{color:"default"},Z),footer:(()=>{if(a)return n&&"string"!=typeof n?n:Object(c.jsx)(I.EuiButton,{fill:!0,href:i,"data-test-subj":"noDataDefaultFooterAction"},n||e||ee)})(),isDisabled:!a,href:i,image:Object(c.jsx)(ae,null)},s)),ie=i.a.createContext(null),se=({href:e,category:t,description:a,...i})=>{var s;const{canAccessFleet:r,addBasePath:o}=function(){const e=Object(n.useContext)(ie);if(!e)throw new Error("NoDataCard Context is missing.  Ensure your component or React root is wrapped with NoDataCardContext.");return e}(),l=Object(n.useMemo)((()=>{if(e)return e;const a="/app/integrations/browse";return o(t?`${a}/${t}`:a)}),[o,e,t]);return Object(c.jsx)(Q,null,Object(c.jsx)(ne,g()({},i,{href:l,canAccessFleet:null!==(s=i.canAccessFleet)&&void 0!==s?s:r,description:a})))},re=({action:e})=>{const t=Object.keys(e);if(1!==t.length)return null;const a=t[0],n="elasticAgent"===a?"empty-page-agent-action":`empty-page-${a}-action`;return Object(c.jsx)(se,g()({key:n},e[a]))},oe=({solution:e,logo:t,action:a,docsLink:n,pageTitle:i,pageDescription:s,className:r})=>{const o=i||y.i18n.translate("sharedUXPackages.noDataPage.welcomeTitle",{defaultMessage:"Welcome to Elastic {solution}!",values:{solution:e}}),l=n?Object(c.jsx)(I.EuiLink,{href:n,target:"_blank"},Object(c.jsx)(E.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro.link",defaultMessage:"learn more"})):null,d=null!=s?s:l?Object(c.jsx)(E.FormattedMessage,{id:"sharedUXPackages.noDataPage.intro",defaultMessage:"Add your data to get started, or {link} about {solution}.",values:{solution:e,link:l}}):Object(c.jsx)(E.FormattedMessage,{id:"sharedUXPackages.noDataPage.introNoDocLink",defaultMessage:"Add your data to get started."});return Object(c.jsx)(I.EuiPageTemplate.Section,{alignment:"center",grow:!0,className:L()("kbnNoDataPageContents",r),"data-test-subj":"kbnNoDataPage"},Object(c.jsx)(I.EuiText,{textAlign:"center"},Object(c.jsx)(k,{name:e,iconType:t||`logo${e}`,size:"xxl"}),Object(c.jsx)(I.EuiSpacer,{size:"l"}),Object(c.jsx)("h1",null,o),Object(c.jsx)(I.EuiTextColor,{color:"subdued"},Object(c.jsx)("p",null,d))),Object(c.jsx)(I.EuiSpacer,{size:"xxl"}),Object(c.jsx)(re,{action:a}))},le=e=>{const{className:t,noDataConfig:a,pageSideBar:n,pageSideBarProps:i,...s}=e;if(!a)return null;let r;n&&(r=Object(c.jsx)(I.EuiPageTemplate.Sidebar,i,n));const o=((e,t)=>L()("kbnPageTemplate","",t||""))(0,t);return Object(c.jsx)(I.EuiPageTemplate,g()({className:o,restrictWidth:950,panelled:!1,offset:0,minHeight:0},s),r,Object(c.jsx)(oe,a))},ce=z(le),de=({className:e,pageHeader:t,children:a,isEmptyState:n,pageSideBar:i,pageSideBarProps:s,emptyPageBody:r,...o})=>{let l,d;if(n&&t&&!a){const{iconType:e,pageTitle:n,description:i,rightSideItems:s}=t,r=n?Object(c.jsx)("h1",null,n):void 0,o=i?Object(c.jsx)("p",null,i):void 0;a=Object(c.jsx)(I.EuiPageTemplate.EmptyPrompt,{iconType:e,iconColor:"",title:r,body:o,actions:s})}else t&&(l=Object(c.jsx)(I.EuiPageTemplate.Header,t));if(n&&r&&(a=r),i){const e={...s};e.sticky=!0,d=Object(c.jsx)(I.EuiPageTemplate.Sidebar,e,i)}const u=((e,t)=>L()("kbnPageTemplate","",t||""))(0,e);return Object(c.jsx)(I.EuiPageTemplate,g()({className:u,offset:0,minHeight:l?"calc(100vh - var(--kbnAppHeadersOffset, var(--euiFixedHeadersOffset, 0)))":0,grow:!l&&void 0},o),d,l,a)},ue=z(de),pe=Object.assign((({className:e,children:t,solutionNav:a,noDataConfig:n,...i})=>n&&a?Object(c.jsx)(ce,{"data-test-subj":i["data-test-subj"],className:e,noDataConfig:n,solutionNav:a}):n?Object(c.jsx)(le,{"data-test-subj":i["data-test-subj"],className:e,noDataConfig:n}):a?Object(c.jsx)(ue,g()({className:e,solutionNav:a,children:t},i)):Object(c.jsx)(de,g()({className:e,children:t},i))),{Sidebar:I.EuiPageTemplate.Sidebar,Header:I.EuiPageTemplate.Header,Section:I.EuiPageTemplate.Section,BottomBar:I.EuiPageTemplate.BottomBar,EmptyPrompt:I.EuiPageTemplate.EmptyPrompt});var be=a(173);const ge=(e,t)=>a=>(r.a.render(Object(c.jsx)(S.a,t,e),a),()=>r.a.unmountComponentAtNode(a));var me=a(6),he=a.n(me);n.Component;const je=i.a.createContext(null),fe=({children:e,...t})=>Object(c.jsx)(je.Provider,{value:t},e),xe=({children:e,...t})=>{const{core:a,savedObjectsTagging:i}=t,{overlays:s,notifications:r,...o}=a,{openFlyout:l}=s,d=Object(n.useMemo)((()=>({references:e})=>{if(null==i||!i.ui.components.TagList)return null;const t=i.ui.components.TagList;return Object(c.jsx)(t,{object:{references:e}})}),[null==i?void 0:i.ui.components.TagList]),u=Object(be.i)(),p=Object(n.useCallback)(((e,t)=>l(ge(Object(c.jsx)(be.f,u,e),o),t)),[l,o,u]);return Object(c.jsx)(fe,{openFlyout:p,notifyError:(e,t)=>{r.toasts.addDanger({title:ge(e,o),text:t})},TagList:d,TagSelector:null==i?void 0:i.ui.components.SavedObjectSaveModalTagSelector},e)},Oe=e=>{const[t,s]=Object(n.useState)(null),r=Object(n.useCallback)((async()=>{const{ContentEditorFlyoutContentContainer:e}=await a.e(28).then(a.bind(null,650));s((()=>e))}),[]);return Object(n.useEffect)((()=>{r()}),[r]),t?Object(c.jsx)(t,e):Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiFlyoutHeader,null),Object(c.jsx)(I.EuiFlyoutBody,null),Object(c.jsx)(I.EuiFlyoutFooter,null))};const ve=i.a.createContext(null),ye=({children:e,...t})=>Object(c.jsx)(ve.Provider,{value:t},e),Ce=({children:e,...t})=>{var a;const{core:i,savedObjectsTagging:s,FormattedRelative:r}=t,{application:o,http:l,notifications:d,...u}=i,p=Object(n.useMemo)((()=>{if(s)return async e=>{const t=await s.ui.parseSearchQuery(e,{useName:!0});return{searchQuery:t.searchTerm,references:t.tagReferences,referencesToExclude:t.tagReferencesToExclude}}}),[s]),b=Object(n.useMemo)((()=>({references:e,onClick:t,tagRender:a})=>{if(null==s||!s.ui.components.TagList)return null;const n=s.ui.components.TagList;return Object(c.jsx)(n,{object:{references:e},onClick:t,tagRender:a})}),[null==s?void 0:s.ui.components.TagList]),g=Object(n.useCallback)((e=>null!=s&&s.ui.getTagIdsFromReferences?s.ui.getTagIdsFromReferences(e):[]),[null==s?void 0:s.ui]),m=Object(n.useCallback)((()=>null!=s&&s.ui.getTagList?s.ui.getTagList():[]),[null==s?void 0:s.ui]),h=Object(n.useCallback)((e=>g(e).length>0),[g]);return Object(c.jsx)(q,{coreStart:i},Object(c.jsx)(be.e,{core:i},Object(c.jsx)(xe,{core:i,savedObjectsTagging:s},Object(c.jsx)(ye,{canEditAdvancedSettings:Boolean(null===(a=o.capabilities.advancedSettings)||void 0===a?void 0:a.save),getListingLimitSettingsUrl:()=>o.getUrlForApp("management",{path:"/kibana/settings?query=savedObjects:listingLimit"}),notifyError:(e,t)=>{d.toasts.addDanger({title:ge(e,u),text:t})},searchQueryParser:p,DateFormatterComp:e=>Object(c.jsx)(r,e),currentAppId$:o.currentAppId$,navigateToUrl:o.navigateToUrl,isTaggingEnabled:()=>Boolean(s),getTagList:m,TagList:b,itemHasTags:h,getTagIdsFromReferences:g,getTagManagementUrl:()=>i.http.basePath.prepend("/app/management/kibana/tags")},e))))};function Se(){const e=Object(n.useContext)(ve);if(!e)throw new Error("TableListViewContext is missing. Ensure your component or React root is wrapped with <TableListViewProvider /> or <TableListViewKibanaProvider />.");return e}const Ee={nameAscSort:y.i18n.translate("contentManagement.tableList.listing.tableSortSelect.nameAscLabel",{defaultMessage:"Name A-Z"}),nameDescSort:y.i18n.translate("contentManagement.tableList.listing.tableSortSelect.nameDescLabel",{defaultMessage:"Name Z-A"}),updatedAtAscSort:y.i18n.translate("contentManagement.tableList.listing.tableSortSelect.updatedAtAscLabel",{defaultMessage:"Least recently updated"}),updatedAtDescSort:y.i18n.translate("contentManagement.tableList.listing.tableSortSelect.updatedAtDescLabel",{defaultMessage:"Recently updated"}),headerSort:y.i18n.translate("contentManagement.tableList.listing.tableSortSelect.headerLabel",{defaultMessage:"Sort by"})};function Me({tableSort:e,hasUpdatedAtMetadata:t,onChange:a}){var s,r;const{euiTheme:o}=Object(I.useEuiTheme)(),[l,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)((()=>{let e=[{label:Ee.nameAscSort,column:"attributes.title",direction:"asc",append:Object(c.jsx)(I.EuiIcon,{type:"sortUp"})},{label:Ee.nameDescSort,column:"attributes.title",direction:"desc",append:Object(c.jsx)(I.EuiIcon,{type:"sortDown"})}];return t&&(e=e.concat([{label:Ee.updatedAtDescSort,column:"updatedAt",direction:"desc",append:Object(c.jsx)(I.EuiIcon,{type:"sortDown"})},{label:Ee.updatedAtAscSort,column:"updatedAt",direction:"asc",append:Object(c.jsx)(I.EuiIcon,{type:"sortUp"})}])),e})),b=null!==(s=null===(r=u.find((({checked:e})=>"on"===e)))||void 0===r?void 0:r.label)&&void 0!==s?s:"",g=Object(c.css)("border-bottom:",o.border.thin,";font-weight:",600,";padding:",o.size.s,";",""),m=Object(c.jsx)(I.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:()=>{d((e=>!e))},"data-test-subj":"tableSortSelectBtn",grow:!0},b);return Object(n.useEffect)((()=>{p((t=>t.map((t=>{const a=t.column===e.field&&t.direction===e.direction?"on":void 0;return{...t,checked:a}}))))}),[e]),Object(c.jsx)(I.EuiPopover,{button:m,isOpen:l,closePopover:()=>{d(!1)},panelPaddingSize:"none",anchorPosition:"downCenter",panelProps:{css:{width:18*o.base}}},Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiText,{css:g},Ee.headerSort),Object(c.jsx)(I.EuiSelectable,{singleSelection:!0,"aria-label":"some aria label",options:u,onChange:e=>{p(e);const t=e.find((({checked:e})=>"on"===e));t&&a&&a(t.column,t.direction)},"data-test-subj":"sortSelect"},(e=>e))))}const Te=e=>`tableSort:${e}`;function Ie(e,t){try{localStorage.setItem(Te(e),JSON.stringify(t))}catch(e){}}const Fe=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...n}=t,i=Object(c.jsx)(Q,n,e);return Object(c.jsx)(q,{coreStart:a},i)}const{navigateToUrl:a,currentAppId:n,...i}=t,s=Object(c.jsx)(Q,i,e);return Object(c.jsx)(V,{currentAppId:n,navigateToUrl:a},s)},Le=navigator.platform.toLowerCase().indexOf("mac")>=0?"⌘":"^",ke={name:"pit38s",styles:"height:auto"},Ne={name:"1d3w5wq",styles:"width:100%"},we=({isPopoverOpen:e,isInUse:t,options:a,totalActiveFilters:n,onFilterButtonClick:s,onSelectChange:r,closePopover:o,clearTagSelection:l})=>{const{euiTheme:d}=Object(I.useEuiTheme)(),{navigateToUrl:u,currentAppId$:p,getTagManagementUrl:b}=Se(),m=a.length>10,h=Object(c.css)("padding:",d.size.s,";border-bottom:",d.border.thin,";",""),j=Object(c.css)("height:",d.size.xxxl,";","");let f={searchable:!1};return m&&(f={searchable:!0,searchProps:{compressed:!0}}),Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiPopover,{button:Object(c.jsx)(I.EuiFilterButton,{iconType:"arrowDown",iconSide:"right",onClick:s,"data-test-subj":"tagFilterPopoverButton",hasActiveFilters:n>0,numActiveFilters:n,grow:!0},"Tags"),isOpen:e,closePopover:o,panelPaddingSize:"none",anchorPosition:"downCenter",panelProps:{css:{width:18*d.base}},panelStyle:t?{transition:"none"}:void 0},Object(c.jsx)(I.EuiPopoverTitle,{paddingSize:"m",css:j},Object(c.jsx)(I.EuiFlexGroup,null,Object(c.jsx)(I.EuiFlexItem,null,"Tags"),Object(c.jsx)(I.EuiFlexItem,{grow:!1},n>0&&Object(c.jsx)(I.EuiButtonEmpty,{flush:"both",onClick:l,css:ke},y.i18n.translate("contentManagement.tableList.tagFilterPanel.clearSelectionButtonLabelLabel",{defaultMessage:"Clear selection"}))))),Object(c.jsx)(I.EuiSelectable,g()({singleSelection:!1,"aria-label":"some aria label",options:a,renderOption:e=>e.view,emptyMessage:"There aren't any tags",noMatchesMessage:"No tag matches the search",onChange:r,"data-test-subj":"tagSelectableList"},f),((e,t)=>Object(c.jsx)(i.a.Fragment,null,m?Object(c.jsx)("div",{css:h},t):Object(c.jsx)(I.EuiSpacer,{size:"s"}),e))),Object(c.jsx)(I.EuiPopoverFooter,{paddingSize:"m"},Object(c.jsx)(I.EuiFlexGroup,{direction:"column",alignItems:"center",gutterSize:"s"},Object(c.jsx)(I.EuiFlexItem,null,Object(c.jsx)(I.EuiText,{size:"xs"},Object(c.jsx)(I.EuiTextColor,{color:"dimgrey"},y.i18n.translate("contentManagement.tableList.tagFilterPanel.modifierKeyHelpText",{defaultMessage:"{modifierKeyPrefix} + click exclude",values:{modifierKeyPrefix:Le}})))),Object(c.jsx)(I.EuiFlexItem,{css:Ne},Object(c.jsx)(I.EuiButton,{onClick:o},y.i18n.translate("contentManagement.tableList.tagFilterPanel.doneButtonLabel",{defaultMessage:"Done"}))),Object(c.jsx)(I.EuiFlexItem,null,Object(c.jsx)(Fe,{coreStart:{application:{navigateToUrl:u,currentAppId$:p}}},Object(c.jsx)(I.EuiLink,{href:b(),"data-test-subj":"manageAllTagsLink",external:!0},y.i18n.translate("contentManagement.tableList.tagFilterPanel.manageAllTagsLinkLabel",{defaultMessage:"Manage tags"}))))))))},Pe=navigator.platform.toLowerCase().indexOf("mac")>=0,_e=e=>Array.isArray(e)?e:[e],Ae=e=>e.replace(" ","_"),Re=({query:e,tagsToTableItemMap:t,getTagList:a,addOrRemoveExcludeTagFilter:i,addOrRemoveIncludeTagFilter:s})=>{const[r,o]=Object(n.useState)(!1),[l,d]=Object(n.useState)(!1),[u,p]=Object(n.useState)([]),[b,g]=Object(n.useState)({}),m=Object.keys(b).length,h=Object(n.useCallback)((e=>{const t=e.find(((e,t)=>e.checked!==u[t].checked));t&&s(t.tag)}),[u,s]),j=Object(n.useCallback)((e=>t=>{Pe&&t.metaKey||!Pe&&t.ctrlKey?i(e):s(e)}),[s,i]),f=Object(n.useCallback)((()=>{const e=a().map((e=>{var a,n;const{name:i,id:s,color:r}=e;let o;return b[i]&&(o="include"===b[i]?"on":"off"),{name:i,label:i,value:null!=s?s:"",tag:e,checked:o,view:Object(c.jsx)(I.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween"},Object(c.jsx)(I.EuiFlexItem,null,Object(c.jsx)(I.EuiHealth,{color:r,"data-test-subj":`tag-searchbar-option-${Ae(i)}`,onClick:j(e)},Object(c.jsx)(I.EuiText,null,i))),Object(c.jsx)(I.EuiFlexItem,{grow:!1},Object(c.jsx)(I.EuiBadge,{color:void 0!==o?"accent":void 0},null!==(a=null===(n=t[null!=s?s:""])||void 0===n?void 0:n.length)&&void 0!==a?a:0)))}}));p(e)}),[a,t,b,j]),x=Object(n.useCallback)((()=>{o((e=>!e))}),[]),O=Object(n.useCallback)((()=>{o(!1)}),[]);return Object(n.useEffect)((()=>{if(e){const t=e.ast.getOrFieldClause("tag",void 0,!0,"eq"),a=e.ast.getOrFieldClause("tag",void 0,!1,"eq"),n={};t&&_e(t.value).forEach((e=>{n[e]="include"})),a&&_e(a.value).forEach((e=>{n[e]="exclude"})),g(n)}}),[e]),Object(n.useEffect)((()=>{r?(f(),setTimeout((()=>{d(!0)}),250)):d(!1)}),[r,f]),{isPopoverOpen:r,isInUse:l,options:u,totalActiveFilters:m,onFilterButtonClick:x,onSelectChange:h,closePopover:O}};var De=a(198),Ue=a(197);const Be="null",ze=({selectedOptions:e,defaultOptions:t,options:a,onChange:s,onSearchChange:r,isLoading:o=!1,singleSelection:l=!1,limit:d,height:u,loadingMessage:p,noMatchesMessage:b,emptyMessage:g,errorMessage:m,searchPlaceholder:h,searchInputId:j,selectedStatusMessage:f,limitReachedMessage:x,nullOptionLabel:O,nullOptionProps:v,defaultOptionsLabel:C,clearButtonLabel:S,...M})=>{const[T,F]=Object(n.useState)([]),[L,k]=Object(n.useState)(""),N=e?e.length:0,w=!!d&&N>=d,P=()=>{a||F((a=>{const n=[...a],i=e?e.filter((e=>!n.find((t=>He(t,e))))).map((e=>Ge(e,O,v))):[],s=t?t.filter((e=>!n.find((t=>He(t,e)))&&!i.find((t=>He(t,e))))).map((e=>Ge(e,O,v))):[];if(s.length){const e=(e=>{let t=e.findIndex((e=>e.isGroupLabel));return-1===t&&(t=e.push({label:null!=C?C:y.i18n.translate("userProfileComponents.userProfilesSelectable.defaultOptionsLabel",{defaultMessage:"Suggested"}),isGroupLabel:!0})-1),t})(n);n.splice(e,0,...i),n.push(...s)}else n.push(...i);return n}))};return Object(n.useEffect)((()=>{a?F(a.map((e=>Ge(e,O,v)))):(F([]),P())}),[a]),Object(n.useEffect)(P,[t,e]),Object(n.useEffect)((()=>{F((t=>t.map((t=>{if(e){var a;const n=void 0===e.find((e=>He(t,e)))?void 0:"on",i=!n&&w;return{...t,checked:n,disabled:i,prepend:t.data?Object(c.jsx)(Ue.a,{user:t.data.user,avatar:null===(a=t.data.data)||void 0===a?void 0:a.avatar,size:"s",isDisabled:i}):void 0}}return{...t,checked:void 0,disabled:void 0}}))))}),[a,t,e]),Object(c.jsx)(I.EuiSelectable,{"data-test-subj":M["data-test-subj"],options:T,onChange:t=>{if(!s)return;const a=t.filter((t=>!(t.isGroupLabel||"on"!==t.checked||e&&void 0!==e.find((e=>He(t,e)))))).map((e=>e.key===Be?null:e.data));e&&!l&&e.forEach((e=>{const n=t.find((t=>He(t,e)));void 0!==n&&"on"!==n.checked||(n&&n.key===Be?a.unshift(e):a.push(e))})),s(a)},style:{maxHeight:u},singleSelection:l,searchable:!0,searchProps:{placeholder:null!=h?h:y.i18n.translate("userProfileComponents.userProfilesSelectable.searchPlaceholder",{defaultMessage:"Search"}),value:L,onChange:e=>{k(e),null==r||r(e)},isLoading:o,isClearable:!o,id:j},isPreFiltered:!0,listProps:{onFocusBadge:!1,rowHeight:48},loadingMessage:p,noMatchesMessage:b,emptyMessage:g,errorMessage:m,renderOption:(e,t)=>{if(e.user){const a=Object(De.e)(e.user);return Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)("div",{className:"eui-textTruncate"},Object(c.jsx)(I.EuiHighlight,{search:t},a)),e.user.email&&e.user.email!==a?Object(c.jsx)(I.EuiText,{size:"xs",color:e.disabled?"disabled":"subdued",className:"eui-textTruncate"},t?Object(c.jsx)(I.EuiHighlight,{search:t},e.user.email):e.user.email):void 0)}return Object(c.jsx)(I.EuiHighlight,{search:t},e.label)}},((e,t)=>Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiPanel,{hasShadow:!1,paddingSize:"s"},t,l?void 0:Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiSpacer,{size:"s"}),Object(c.jsx)(I.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween",gutterSize:"s",responsive:!1},Object(c.jsx)(I.EuiFlexItem,{grow:!1},Object(c.jsx)(I.EuiText,{size:"xs",color:"subdued"},f?f(N):Object(c.jsx)(E.FormattedMessage,{id:"userProfileComponents.userProfilesSelectable.selectedStatusMessage",defaultMessage:"{count, plural, one {# user selected} other {# users selected}}",values:{count:N}}))),Object(c.jsx)(I.EuiFlexItem,{grow:!1},N?Object(c.jsx)(I.EuiButtonEmpty,{size:"xs",flush:"right",onClick:()=>null==s?void 0:s([]),style:{height:"1rem"}},null!=S?S:Object(c.jsx)(E.FormattedMessage,{id:"userProfileComponents.userProfilesSelectable.clearButtonLabel",defaultMessage:"Remove all users"})):void 0)))),d&&N>=d?Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiHorizontalRule,{margin:"none"}),Object(c.jsx)(I.EuiCallOut,{title:x?x(d):Object(c.jsx)(E.FormattedMessage,{id:"userProfileComponents.userProfilesSelectable.limitReachedMessage",defaultMessage:"You've selected the maximum of {count, plural, one {# user} other {# users}}",values:{count:d}}),color:"warning",size:"s"})):void 0,Object(c.jsx)(I.EuiHorizontalRule,{margin:"none"}),e)))};function Ge(e,t,a){return e?{key:e.uid,label:Object(De.d)(e.user),data:e,"data-test-subj":`userProfileSelectableOption-${e.user.username}`}:{key:Be,label:null!=t?t:y.i18n.translate("userProfileComponents.userProfilesSelectable.nullOptionLabel",{defaultMessage:"No users"}),"data-test-subj":"userProfileSelectableOption-null",...a}}function He(e,t){return e.key===(t?t.uid:Be)}const We=({title:e,selectableProps:t,...a})=>{const n=Object(I.useGeneratedHtmlId)({prefix:"searchInput",conditionalId:t.searchInputId});return Object(c.jsx)(I.EuiPopover,g()({panelPaddingSize:"none",initialFocus:`#${n}`},a),Object(c.jsx)(I.EuiContextMenuPanel,{title:e},Object(c.jsx)(ze,g()({},t,{searchInputId:n}))))},Ve=i.a.createContext(null),qe=({children:e,...t})=>t.enabled?Object(c.jsx)(Ve.Provider,{value:t},e):Object(c.jsx)(i.a.Fragment,null,e),Je="no-user",$e=()=>{const{euiTheme:e}=Object(I.useEuiTheme)(),t=i.a.useContext(Ve);if(!t)throw new Error("UserFilterPanel must be used within a UserFilterContextProvider");const{onSelectedUsersChange:a,selectedUsers:n,showNoUserOption:s}=t,[r,o]=i.a.useState(!1),[l,d]=i.a.useState(""),u=Object(be.h)(t.allUsers,{enabled:r}),p=i.a.useMemo((()=>u.data?u.data.reduce(((e,t)=>(e[t.uid]=t,e)),{}):{}),[u.data]),b=i.a.useMemo((()=>{if(!u.data||0===u.data.length)return[];const e=s||n.includes(Je)?[...u.data,null]:u.data;return l?e.filter((e=>{var t,a;return e?!!n.includes(e.uid)||(e.uid+e.user.username+(null!==(t=e.user.email)&&void 0!==t?t:"")+(null!==(a=e.user.full_name)&&void 0!==a?a:"")).toLowerCase().includes(l.toLowerCase()):n.includes(Je)})):e}),[u.data,l,n,s]);return Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(We,{button:Object(c.jsx)(I.EuiFilterButton,{iconType:"arrowDown",iconSide:"right","data-test-subj":"userFilterPopoverButton",onClick:()=>o(!r),hasActiveFilters:n.length>0,numActiveFilters:n.length,grow:!0},Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.userFilter.filterLabel",defaultMessage:"Created by"})),isOpen:r,closePopover:()=>o(!1),selectableProps:{"data-test-subj":"userSelectableList",isLoading:u.isLoading,options:b,errorMessage:u.error?Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.userFilter.errorMessage",defaultMessage:"Failed to load users"}):void 0,emptyMessage:Object(c.jsx)("p",{"data-test-subj":"userFilterEmptyMessage"},Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.userFilter.emptyMessage",defaultMessage:"None of the dashboards have creators"}),Object(c.jsx)(be.b,null)),nullOptionLabel:y.i18n.translate("contentManagement.tableList.listing.userFilter.noCreators",{defaultMessage:"No creators"}),nullOptionProps:{append:Object(c.jsx)(be.b,null)},clearButtonLabel:Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.userFilter.clearFilterButtonLabel",defaultMessage:"Clear filter"}),selectedOptions:n.map((e=>{var t;return e===Je?null:null!==(t=p[e])&&void 0!==t?t:{uid:e,user:{username:e}}})),onChange:e=>{a(e.map((e=>e?e.uid:Je)))},onSearchChange:d},panelProps:{css:{minWidth:22*e.base}}}))};function Qe({dispatch:e,items:t,isFetchingItems:a,searchQuery:s,selectedIds:r,pagination:o,tableColumns:l,tableSort:d,tableFilter:u,hasUpdatedAtMetadata:p,entityName:b,entityNamePlural:g,tagsToTableItemMap:m,tableItemsRowActions:h,deleteItems:j,renderCreateButton:f,tableCaption:x,onTableChange:O,onTableSearchChange:v,onSortChange:C,onFilterChange:S,addOrRemoveExcludeTagFilter:M,addOrRemoveIncludeTagFilter:T,clearTagSelection:F,createdByEnabled:L}){const{getTagList:k,isTaggingEnabled:N}=Se(),w=Object(n.useCallback)((()=>{if(j&&0!==r.length)return Object(c.jsx)(I.EuiButton,{color:"danger",iconType:"trash",onClick:()=>e({type:"showConfirmDeleteItemsModal"}),"data-test-subj":"deleteSelectedItems"},Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.deleteButtonMessage",defaultMessage:"Delete {itemCount} {entityName}",values:{itemCount:r.length,entityName:1===r.length?b:g}}))}),[j,e,b,g,r.length]),P=Object(n.useMemo)((()=>{if(j)return{onSelectionChange:t=>{e({type:"onSelectionChange",data:t})},selectable:e=>{var t;const a=h[e.id];return!1!==(null==a||null===(t=a.delete)||void 0===t?void 0:t.enabled)},selectableMessage:(e,t)=>{if(!e){var a,n;const e=h[t.id];return null!==(a=null==e||null===(n=e.delete)||void 0===n?void 0:n.reason)&&void 0!==a?a:y.i18n.translate("contentManagement.tableList.actionsDisabledLabel",{defaultMessage:"Actions disabled for this item"})}return""},initialSelected:[]}}),[j,e,h]),{isPopoverOpen:_,isInUse:A,closePopover:R,onFilterButtonClick:D,onSelectChange:U,options:B,totalActiveFilters:z}=Re({query:s.query,getTagList:k,tagsToTableItemMap:m,addOrRemoveExcludeTagFilter:M,addOrRemoveIncludeTagFilter:T}),G=Object(n.useMemo)((()=>({type:"custom_component",component:()=>Object(c.jsx)(Me,{tableSort:d,hasUpdatedAtMetadata:p,onChange:C})})),[p,C,d]),H=Object(n.useMemo)((()=>N()?{type:"custom_component",component:()=>Object(c.jsx)(we,{isPopoverOpen:_,isInUse:A,closePopover:R,options:B,totalActiveFilters:z,onFilterButtonClick:D,onSelectChange:U,clearTagSelection:F})}:null),[_,A,N,R,B,z,D,U,F]),W=Object(n.useMemo)((()=>L?{type:"custom_component",component:$e}:null),[L]),V=Object(n.useMemo)((()=>[G,H,W].filter((e=>Boolean(e)))),[G,H,W]),q=Object(n.useMemo)((()=>{var e;return{onChange:v,toolsLeft:w(),toolsRight:f(),query:null!==(e=s.query)&&void 0!==e?e:void 0,box:{incremental:!0,"data-test-subj":"tableListSearchBox"},filters:V}}),[v,f,w,V,s.query]),J=Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.noMatchedItemsMessage",defaultMessage:"No {entityNamePlural} matched your search.",values:{entityNamePlural:g}}),$=i.a.useMemo((()=>{var e;return(null==u||null===(e=u.createdBy)||void 0===e?void 0:e.length)>0?t.filter((e=>e.createdBy?u.createdBy.includes(e.createdBy):!e.managed&&u.createdBy.includes(Je))):t}),[t,u]),{allUsers:Q,showNoUserOption:K}=Object(n.useMemo)((()=>{if(!L)return{allUsers:[],showNoUserOption:!1};let e=!1;const a=new Set;return t.forEach((t=>{t.createdBy?a.add(t.createdBy):t.managed||(e=!0)})),{allUsers:Array.from(a),showNoUserOption:e}}),[L,t]);return Object(c.jsx)(qe,{enabled:L,allUsers:Q,onSelectedUsersChange:e=>{S({createdBy:e})},selectedUsers:u.createdBy,showNoUserOption:K},Object(c.jsx)(I.EuiInMemoryTable,{itemId:"id",items:$,columns:l,pagination:o,loading:a,message:J,selection:P,search:q,executeQueryOptions:{enabled:!1},sorting:d?{sort:d}:void 0,onChange:O,"data-test-subj":"itemsInMemTable",rowHeader:"attributes.title",tableCaption:x}))}var Ke=a(66),Ye=a.n(Ke);const Xe=({value:e,children:t})=>t(new Date(e).toDateString()),Ze=({dateTime:e,DateFormatterComp:t=Xe})=>{if(!e)return Object(c.jsx)(I.EuiToolTip,{content:y.i18n.translate("contentManagement.tableList.updatedDateUnknownLabel",{defaultMessage:"Last updated unknown"})},Object(c.jsx)("span",null,"-"));const a=Ye()(e);return a.diff(Ye()(),"days")>-7?Object(c.jsx)(t,{value:new Date(e).getTime()},(e=>Object(c.jsx)(I.EuiToolTip,{content:a.format("LL LT")},Object(c.jsx)("span",null,e)))):Object(c.jsx)(I.EuiToolTip,{content:a.format("LL LT")},Object(c.jsx)("span",null,a.format("LL")))};function et({isDeletingItems:e,items:t,entityName:a,entityNamePlural:i,onCancel:s,onConfirm:r}){const{deleteBtnLabel:o,deletingBtnLabel:l,title:d,description:u,cancelBtnLabel:p}=Object(n.useMemo)((()=>function(e,t,a){return{deleteBtnLabel:y.i18n.translate("contentManagement.tableList.listing.deleteSelectedItemsConfirmModal.confirmButtonLabel",{defaultMessage:"Delete"}),deletingBtnLabel:y.i18n.translate("contentManagement.tableList.listing.deleteSelectedItemsConfirmModal.confirmButtonLabelDeleting",{defaultMessage:"Deleting"}),title:y.i18n.translate("contentManagement.tableList.listing.deleteSelectedConfirmModal.title",{defaultMessage:"Delete {itemCount} {entityName}?",values:{itemCount:e.length,entityName:1===e.length?t:a}}),description:y.i18n.translate("contentManagement.tableList.listing.deleteConfirmModalDescription",{defaultMessage:"You can't recover deleted {entityNamePlural}.",values:{entityNamePlural:a}}),cancelBtnLabel:y.i18n.translate("contentManagement.tableList.listing.deleteSelectedItemsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"})}}(t,a,i)),[a,i,t]);return Object(c.jsx)(I.EuiConfirmModal,{title:d,buttonColor:"danger",onCancel:s,onConfirm:r,cancelButtonText:p,confirmButtonText:e?l:o,defaultFocusedButton:"cancel"},Object(c.jsx)("p",null,u))}function tt({entityNamePlural:e,totalItems:t,listingLimit:a,canEditAdvancedSettings:n,advancedSettingsLink:s}){return Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiCallOut,{title:Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededTitle",defaultMessage:"Listing limit exceeded"}),color:"warning",iconType:"help"},Object(c.jsx)("p",null,Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededDescription",defaultMessage:"You have {totalItems} {entityNamePlural}, but your {listingLimitText} setting prevents the table below from displaying more than {listingLimitValue}.",values:{entityNamePlural:e,totalItems:t,listingLimitValue:a,listingLimitText:Object(c.jsx)("strong",null,"listingLimit")}})," ",n?Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededDescriptionPermissions",defaultMessage:"You can change this setting under {advancedSettingsLink}.",values:{advancedSettingsLink:Object(c.jsx)(I.EuiLink,{href:s},Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceeded.advancedSettingsLinkText",defaultMessage:"Advanced Settings"}))}}):Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.listingLimitExceededDescriptionNoPermissions",defaultMessage:"Contact your system administrator to change this setting."}))),Object(c.jsx)(I.EuiSpacer,{size:"m"}))}const at=navigator.platform.toLowerCase().indexOf("mac")>=0,nt=({tag:e,onClick:t})=>Object(c.jsx)(I.EuiBadge,{color:e.color,title:e.description,"data-test-subj":`tag-${e.id}`,onClick:a=>{const n=at&&a.metaKey||!at&&a.ctrlKey;t(e,n)},onClickAriaLabel:y.i18n.translate("contentManagement.tableList.tagBadge.buttonLabel",{defaultMessage:"{tagName} tag button.",values:{tagName:e.name}})},e.name),it=e=>e.replace(/[-\[\]{}()*+?.,\\^$|#\s]/g,"\\$&");function st({id:e,item:t,searchTerm:a="",getDetailViewLink:s,getOnClickTitle:r,onClickTag:o}){const{references:l,attributes:{title:d,description:u}}=t,{navigateToUrl:p,currentAppId$:b,TagList:g,itemHasTags:m}=Se(),h=Object(n.useMemo)((()=>({application:{navigateToUrl:p,currentAppId$:b}})),[b,p]),j=Object(n.useMemo)((()=>{const e=null==r?void 0:r(t);if(e&&(null==s||!s(t)))return t=>{t.preventDefault(),e()}}),[r,t,s]),f=Object(n.useCallback)((()=>(s?s(t):void 0)||null!=r&&r(t)?Object(c.jsx)(Fe,{coreStart:h},Object(c.jsx)(I.EuiLink,{href:null==s?void 0:s(t),onClick:j,"data-test-subj":`${e}ListingTitleLink-${t.attributes.title.split(" ").join("-")}`},Object(c.jsx)(I.EuiHighlight,{highlightAll:!0,search:it(a)},d))):Object(c.jsx)("span",null,d)),[s,r,e,t,j,h,a,d]),x=m(l);return Object(c.jsx)("div",null,Object(c.jsx)(I.EuiText,{size:"s"},f()),Boolean(u)&&Object(c.jsx)(I.EuiText,{size:"s",color:"subdued"},Object(c.jsx)("p",null,Object(c.jsx)(I.EuiHighlight,{highlightAll:!0,search:it(a)},u))),x&&Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiSpacer,{size:"s"}),Object(c.jsx)(g,{references:l,tagRender:e=>Object(c.jsx)(nt,{key:e.name,tag:e,onClick:o})})))}var rt=a(355),ot=a.n(rt);const lt=e=>{var t;const a={},n={...e};if(["s","title","sort","sortdir"].forEach((e=>{Array.isArray(n[e])&&(n[e]=n[e][0])})),a.s=null!==(t=n.s)&&void 0!==t?t:n.title,"title"===n.sort||"updatedAt"===n.sort){const e="title"===n.sort?"attributes.title":"updatedAt";a.sort={field:e,direction:"asc"},"desc"!==n.sortdir&&"asc"!==n.sortdir||(a.sort.direction=n.sortdir)}return n.created_by?a.filter={createdBy:Array.isArray(n.created_by)?n.created_by:[n.created_by]}:a.filter={createdBy:[]},a},ct=e=>{var t;const a={};return e.sort&&(a.sort=e.sort.field,a.sortdir=e.sort.direction),void 0!==e.s&&(a.s=e.s,a.title=void 0),"string"==typeof a.s&&""===a.s.trim()&&(a.s=void 0,a.title=void 0),null!==(t=e.filter)&&void 0!==t&&t.createdBy&&(a.created_by=e.filter.createdBy),a},dt="attributes.title",ut="Name, description, tags",pt="updatedAt",bt="Last updated",gt="createdBy";function mt({tableCaption:e,entityName:t,entityNamePlural:a,initialFilter:s,headingId:r,initialPageSize:l,listingLimit:d,urlStateEnabled:p=!0,customTableColumn:b,emptyPrompt:m,rowItemActions:h,findItems:j,createItem:f,editItem:x,deleteItems:O,getDetailViewLink:v,getOnClickTitle:C,id:S="userContent",contentEditor:M={enabled:!1},titleColumnName:F,withoutPageTemplateWrapper:L,onFetchSuccess:k,refreshListBouncer:N,setPageDataTestSubject:w,createdByEnabled:P=!1}){if(Object(n.useEffect)((()=>{w(`${t}LandingPage`)}),[t,w]),!v&&!C)throw new Error('[TableListView] One o["getDetailViewLink" or "getOnClickTitle"] prop must be provided.');if(!1===M.isReadonly&&void 0===M.onSave)throw new Error("[TableListView] A value for [contentEditor.onSave()] must be provided when [contentEditor.isReadonly] is false.");const _=Object(n.useRef)(!1),A=Object(n.useRef)(0),R=Object(n.useRef)(0),D=Object(n.useRef)(!1),{canEditAdvancedSettings:U,getListingLimitSettingsUrl:B,getTagIdsFromReferences:z,searchQueryParser:G,notifyError:H,DateFormatterComp:W,getTagList:V}=Se(),q=function(){const e=function(){const e=Object(n.useContext)(je);if(!e)throw new Error("ContentEditorContext is missing. Ensure your component or React root is wrapped with <ContentEditorProvider /> or <ContentEditorKibanaProvider />.");return e}(),{openFlyout:t}=e,a=Object(n.useRef)(null);return Object(n.useCallback)((n=>{if(!1===n.isReadonly&&void 0===n.onSave)throw new Error("A value for [onSave()] must be provided when [isReadonly] is false.");const i=()=>{var e;null===(e=a.current)||void 0===e||e.close()};return a.current=t(Object(c.jsx)(Oe,g()({},n,{onCancel:i,services:e})),{maxWidth:600,size:"m",ownFocus:!0,hideCloseButton:!0}),i}),[t,e])}();if(!function(){try{return Object(o.useLocation)(),!0}catch(e){return!1}}())throw new Error("<TableListView/> requires a React Router context. Ensure your component or React root is being rendered in the context of a <Router>.");const[J,$]=function({queryParamsDeserializer:e,queryParamsSerializer:t}){const a=Object(o.useHistory)(),i=function(){const{search:e}=Object(o.useLocation)();return Object(n.useMemo)((()=>ot.a.parse(e)),[e])}(),[s,r]=Object(n.useState)({}),l=Object(n.useCallback)((e=>{const n=t(e),s={...i,...n};a.replace({search:`?${ot.a.stringify(s,{encode:!1})}`})}),[a,i,t]);return Object(n.useEffect)((()=>{const t=e(i);r(t)}),[i,e]),[s,l]}({queryParamsDeserializer:lt,queryParamsSerializer:ct}),Q=Object(n.useMemo)((()=>(e,t)=>{switch(t.type){case"onFetchItems":return{...e,isFetchingItems:!0};case"onFetchItemsSuccess":{var a;const n=t.data.response.hits;let i,s=e.hasUpdatedAtMetadata,r=e.hasCreatedByMetadata;e.hasInitialFetchReturned||(s=Boolean(n.find((e=>Boolean(e.updatedAt)))),r=Boolean(n.find((e=>Boolean(e.createdBy)))),s&&!e.sortColumnChanged&&(i={field:"updatedAt",direction:"desc"}));let o=e.hasNoItems;return o=""!==e.searchQuery.text?void 0:0===n.length,{...e,hasInitialFetchReturned:!0,isFetchingItems:!1,items:n,hasNoItems:o,totalItems:t.data.response.total,hasUpdatedAtMetadata:s,hasCreatedByMetadata:r,tableSort:null!==(a=i)&&void 0!==a?a:e.tableSort,pagination:{...e.pagination,totalItemCount:n.length}}}case"onFetchItemsError":return{...e,isFetchingItems:!1,items:[],totalItems:0,fetchError:t.data};case"onSearchQueryChange":return t.data.text===e.searchQuery.text?e:{...e,searchQuery:t.data,isFetchingItems:!0};case"onTableChange":{var n,i,s,r,o;const a=null!==(n=t.data.sort)&&void 0!==n?n:e.tableSort,l=null!==(i=null===(s=t.data.page)||void 0===s?void 0:s.pageIndex)&&void 0!==i?i:e.pagination.pageIndex,c=null!==(r=null===(o=t.data.page)||void 0===o?void 0:o.pageSize)&&void 0!==r?r:e.pagination.pageSize,d=t.data.filter?{...e.tableFilter,...t.data.filter}:e.tableFilter;return{...e,pagination:{...e.pagination,pageIndex:l,pageSize:c},tableSort:a,tableFilter:d,sortColumnChanged:e.sortColumnChanged||Boolean(t.data.sort)}}case"showConfirmDeleteItemsModal":return{...e,showDeleteModal:!0};case"onDeleteItems":return{...e,isDeletingItems:!0};case"onCancelDeleteItems":return{...e,showDeleteModal:!1};case"onItemsDeleted":return{...e,isDeletingItems:!1,selectedIds:[],showDeleteModal:!1};case"onSelectionChange":return{...e,selectedIds:t.data.map((e=>null==e?void 0:e.id)).filter((e=>Boolean(e)))}}}),[]),K=Object(n.useMemo)((()=>{const e=function(e){try{const t=localStorage.getItem(Te(e));if(t)return{isDefault:!1,tableSort:JSON.parse(t)}}catch(e){}return{isDefault:!0,tableSort:{field:"attributes.title",direction:"asc"}}}(t);return{items:[],hasNoItems:void 0,totalItems:0,hasInitialFetchReturned:!1,isFetchingItems:!0,isDeletingItems:!1,showDeleteModal:!1,hasUpdatedAtMetadata:!1,hasCreatedByMetadata:!1,selectedIds:[],searchQuery:{text:"",query:new I.Query(I.Ast.create([]),void 0,"")},pagination:{pageIndex:0,totalItemCount:0,pageSize:l,pageSizeOptions:Object(u.uniq)([10,20,50,l]).sort()},tableSort:e.tableSort,sortColumnChanged:!e.isDefault,tableFilter:{createdBy:[]}}}),[l,t]),[Y,X]=Object(n.useReducer)(Q,K),{searchQuery:Z,hasInitialFetchReturned:ee,isFetchingItems:te,items:ae,hasNoItems:ne,fetchError:ie,showDeleteModal:se,isDeletingItems:re,selectedIds:oe,totalItems:le,hasUpdatedAtMetadata:ce,hasCreatedByMetadata:de,pagination:ue,tableSort:ge,tableFilter:me}=Y,he=Boolean(ie),fe=!he&&le>d,xe=Object(n.useCallback)((async()=>{X({type:"onFetchItems"});try{const e=++A.current,{searchQuery:t,references:a,referencesToExclude:n}=G?await G(Z.text):{searchQuery:Z.text,references:void 0,referencesToExclude:void 0},i=await j(t,{references:a,referencesToExclude:n});if(!_.current)return;e===A.current&&(X({type:"onFetchItemsSuccess",data:{response:i}}),k())}catch(e){X({type:"onFetchItemsError",data:e})}}),[G,Z.text,j,k]),ve=Object(n.useCallback)((e=>{p?$({s:e.text}):X({type:"onSearchQueryChange",data:{query:e,text:e.text}})}),[p,$]),{addOrRemoveIncludeTagFilter:ye,addOrRemoveExcludeTagFilter:Ce,clearTagSelection:Ee,tagsToTableItemMap:Me}=function({query:e,updateQuery:t,items:a}){const i=Object(n.useMemo)((()=>a.reduce(((e,t)=>{const a=t.references.filter((e=>"tag"===e.type));return a.length>0&&a.forEach((a=>{e[a.id]||(e[a.id]=[]),e[a.id].push(t.id)})),e}),{})),[a]),s=Object(n.useCallback)((a=>(n,i=e,s=!0)=>{const r=a(i,n);return s&&t(r),r}),[e,t]),r=Object(n.useCallback)((t=>(a,n)=>{const i=Boolean(n)?n:e;if(i.ast.getFieldClauses("tag")){var s;const e=null===(s=i.ast.getFieldClauses("tag").find((({match:e})=>e===t)))||void 0===s?void 0:s.value;if(e&&e.includes(a.name))return!0}return!1}),[e]),o=Object(n.useMemo)((()=>s(((e,t)=>e.addOrFieldValue("tag",t.name,!0,"eq")))),[s]),l=Object(n.useMemo)((()=>s(((e,t)=>e.removeOrFieldValue("tag",t.name)))),[s]),c=Object(n.useMemo)((()=>s(((e,t)=>e.addOrFieldValue("tag",t.name,!1,"eq")))),[s]),d=Object(n.useMemo)((()=>s(((e,t)=>e.removeOrFieldValue("tag",t.name)))),[s]),u=Object(n.useMemo)((()=>r("must")),[r]),p=Object(n.useMemo)((()=>r("must_not")),[r]);return{addOrRemoveIncludeTagFilter:Object(n.useCallback)((e=>{let t;if(p(e))t=d(e,void 0,!1);else if(u(e,t))return void l(e,t);o(e,t)}),[p,u,d,o,l]),addOrRemoveExcludeTagFilter:Object(n.useCallback)((e=>{let t;u(e)&&(t=l(e,void 0,!1)),p(e,t)?d(e,t):c(e,t)}),[u,p,l,c,d]),clearTagSelection:Object(n.useCallback)((()=>{const a=e.removeOrFieldClauses("tag");return t(a),t}),[e,t]),tagsToTableItemMap:i}}({query:Z.query,updateQuery:ve,items:ae}),Fe=Object(n.useMemo)((()=>ae.reduce(((e,t)=>{const a={...e,[t.id]:h?h(t):void 0};return t.managed&&(a[t.id]={edit:{enabled:!1,reason:y.i18n.translate("contentManagement.tableList.managedItemNoEdit",{defaultMessage:"Elastic manages this item. Clone it to make changes."})},...a[t.id]}),a}),{})),[ae,h]),Le=Object(n.useCallback)((e=>{var a,n,i,s;const r=z(e.references).map((t=>e.references.find((({id:e})=>e===t)))),o=q({item:{id:e.id,title:e.attributes.title,description:e.attributes.description,tags:r,createdAt:e.createdAt,createdBy:e.createdBy,updatedAt:e.updatedAt,updatedBy:e.updatedBy,managed:e.managed},entityName:t,...M,isReadonly:M.isReadonly||!1===(null===(a=Fe[e.id])||void 0===a||null===(n=a.edit)||void 0===n?void 0:n.enabled),readonlyReason:null===(i=Fe[e.id])||void 0===i||null===(s=i.edit)||void 0===s?void 0:s.reason,onSave:M.onSave&&(async e=>{await M.onSave(e),await xe(),o()})})}),[z,q,t,M,Fe,xe]),ke=Object(n.useMemo)((()=>{const e=[{field:dt,name:null!=F?F:y.i18n.translate("contentManagement.tableList.mainColumnName",{defaultMessage:"Name, description, tags"}),sortable:!0,render:(e,t)=>Object(c.jsx)(st,{id:S,item:t,getDetailViewLink:v,getOnClickTitle:C,onClickTag:(e,t)=>{t?Ce(e):ye(e)},searchTerm:Z.text})}];if(b&&e.push(b),de&&P&&e.push({field:gt,name:Object(c.jsx)(i.a.Fragment,null,y.i18n.translate("contentManagement.tableList.createdByColumnTitle",{defaultMessage:"Creator"})),render:(e,a)=>a.createdBy?Object(c.jsx)(be.d,{uid:a.createdBy}):a.managed?Object(c.jsx)(be.a,{entityName:t}):Object(c.jsx)(be.b,{iconType:"minus"}),sortable:!1,width:"100px",align:"center"}),ce&&e.push({field:pt,name:y.i18n.translate("contentManagement.tableList.lastUpdatedColumnTitle",{defaultMessage:"Last updated"}),render:(e,t)=>Object(c.jsx)(Ze,{dateTime:t.updatedAt,DateFormatterComp:W}),sortable:!0,width:"130px"}),x||!1!==M.enabled){const t=[];x&&t.push({name:e=>y.i18n.translate("contentManagement.tableList.listing.table.editActionName",{defaultMessage:"Edit {itemDescription}",values:{itemDescription:Object(u.get)(e,"attributes.title")}}),description:y.i18n.translate("contentManagement.tableList.listing.table.editActionDescription",{defaultMessage:"Edit"}),icon:"pencil",type:"icon",available:e=>{var t,a;return Boolean(null===(t=Fe[e.id])||void 0===t||null===(a=t.edit)||void 0===a?void 0:a.enabled)},enabled:e=>!(null!=e&&e.error),onClick:x,"data-test-subj":"edit-action"}),!1!==M.enabled&&t.push({name:e=>y.i18n.translate("contentManagement.tableList.listing.table.viewDetailsActionName",{defaultMessage:"View {itemTitle} details",values:{itemTitle:Object(u.get)(e,"attributes.title")}}),description:y.i18n.translate("contentManagement.tableList.listing.table.viewDetailsActionDescription",{defaultMessage:"View details"}),icon:"iInCircle",type:"icon",onClick:Le,"data-test-subj":"inspect-action"}),e.push({name:y.i18n.translate("contentManagement.tableList.listing.table.actionTitle",{defaultMessage:"Actions"}),width:32*t.length+"px",actions:t})}return e}),[F,b,ce,de,P,x,M.enabled,S,v,C,Z.text,Ce,ye,W,Fe,Le,t]),Ne=Object(n.useMemo)((()=>Object(u.keyBy)(ae,"id")),[ae]),we=Object(n.useMemo)((()=>oe.map((e=>Ne[e]))),[oe,Ne]),Pe=Object(n.useCallback)((async e=>{let t=I.Ast.create([]),a=e;if(G){const{references:n,referencesToExclude:i,searchQuery:s}=await G(e);if(a=s,null!=n&&n.length||null!=i&&i.length){const e=V();null!=n&&n.length&&n.forEach((({id:a})=>{const n=e.find((({id:e})=>e===a));n&&(t=t.addOrFieldValue("tag",n.name,!0,"eq"))})),null!=i&&i.length&&i.forEach((({id:a})=>{const n=e.find((({id:e})=>e===a));n&&(t=t.addOrFieldValue("tag",n.name,!1,"eq"))}))}}return""!==a.trim()&&(t=t.addClause({type:"term",value:a,match:"must"})),new I.Query(t,void 0,e)}),[V,G]),_e=Object(n.useCallback)((e=>{if(e.query)ve(e.query);else{const t=R.current+1;Pe(e.queryText).then((e=>{t===R.current&&ve(e)}))}}),[ve,Pe]),Ae=Object(n.useCallback)((e=>{e.sort&&p&&$({sort:{field:"attributes.title"===e.sort.field?"title":e.sort.field,direction:e.sort.direction}}),e.filter&&p&&$({filter:e.filter}),!e.page&&p||X({type:"onTableChange",data:e})}),[$,p]),Re=Object(n.useCallback)(((e,a)=>{const n={field:e,direction:a};Ie(t,n),Ae({sort:n})}),[t,Ae]),De=Object(n.useCallback)((e=>{Ae({filter:e})}),[Ae]),Ue=Object(n.useCallback)((e=>{const a={};if(e.sort){let n=e.sort.field;n===ut?n=dt:n===bt&&(n=pt),a.sort={field:n,direction:e.sort.direction},Ie(t,a.sort)}a.page={pageIndex:e.page.index,pageSize:e.page.size},Ae(a)}),[Ae,t]),Be=Object(n.useCallback)((async()=>{if(!re){X({type:"onDeleteItems"});try{await O(we)}catch(e){H(Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.unableToDeleteDangerMessage",defaultMessage:"Unable to delete {entityName}(s)",values:{entityName:t}}),e)}xe(),X({type:"onItemsDeleted"})}}),[O,t,xe,re,H,we]),ze=Object(n.useCallback)((()=>{if(f)return Object(c.jsx)(I.EuiButton,{onClick:f,"data-test-subj":"newItemButton",iconType:"plusInCircleFilled",fill:!0},Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.createNewItemButtonLabel",defaultMessage:"Create {entityName}",values:{entityName:t}}))}),[f,t]),Ge=Object(n.useCallback)((()=>m||Object(c.jsx)(I.EuiEmptyPrompt,{title:Object(c.jsx)("h1",null,Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.noAvailableItemsMessage",defaultMessage:"No {entityNamePlural} available.",values:{entityNamePlural:a}})),actions:ze()})),[m,a,ze]),He=Object(n.useCallback)((()=>{var e;return Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(I.EuiCallOut,{title:Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.fetchErrorTitle",defaultMessage:"Fetching listing failed"}),color:"danger",iconType:"warning"},Object(c.jsx)("p",null,Object(c.jsx)(E.FormattedMessage,{id:"contentManagement.tableList.listing.fetchErrorDescription",defaultMessage:"The {entityName} listing could not be fetched: {message}.",values:{entityName:t,message:(null===(e=ie.body)||void 0===e?void 0:e.message)||ie.message}}))),Object(c.jsx)(I.EuiSpacer,{size:"m"}))}),[t,ie]);T()(xe,300,[xe,N]),Object(n.useEffect)((()=>{var e,t,a;p&&((async(e="")=>{const t=await Pe(e);X({type:"onSearchQueryChange",data:{query:t,text:e}})})(J.s),(e=J.sort)&&X({type:"onTableChange",data:{sort:{field:e.field,direction:e.direction}}}),(t=J.filter)&&X({type:"onTableChange",data:{filter:{createdBy:null!==(a=t.createdBy)&&void 0!==a?a:[]}}}))}),[J,Pe,p]),Object(n.useEffect)((()=>(_.current=!0,()=>{_.current=!1})),[]),Object(n.useEffect)((()=>{s&&!D.current&&(D.current=!0,Pe(s).then(ve))}),[s,Pe,ve]);const We=Object(n.useMemo)((()=>L?({children:e,"data-test-subj":t})=>Object(c.jsx)("div",{"data-test-subj":t},e):pe),[L]);if(!ee)return null;if(!he&&ne)return Object(c.jsx)(We,{isEmptyState:!0},Object(c.jsx)(pe.Section,{"aria-labelledby":ee?r:void 0},Ge()));const Ve=re?"table-is-deleting":ee&&!te?"table-is-ready":"table-is-loading";return Object(c.jsx)(i.a.Fragment,null,fe&&Object(c.jsx)(tt,{canEditAdvancedSettings:U,advancedSettingsLink:B(),entityNamePlural:a,totalItems:le,listingLimit:d}),he&&He(),Object(c.jsx)("div",{"data-test-subj":Ve},Object(c.jsx)(Qe,{dispatch:X,items:ae,renderCreateButton:ze,isFetchingItems:te,searchQuery:Z,tableColumns:ke,hasUpdatedAtMetadata:ce,tableSort:ge,tableFilter:me,tableItemsRowActions:Fe,pagination:ue,selectedIds:oe,entityName:t,entityNamePlural:a,tagsToTableItemMap:Me,deleteItems:O,tableCaption:e,onTableChange:Ue,onTableSearchChange:_e,onSortChange:Re,onFilterChange:De,addOrRemoveIncludeTagFilter:ye,addOrRemoveExcludeTagFilter:Ce,clearTagSelection:Ee,createdByEnabled:P}),se&&Object(c.jsx)(et,{isDeletingItems:re,entityName:t,entityNamePlural:a,items:we,onConfirm:Be,onCancel:()=>X({type:"onCancelDeleteItems"})})))}const ht=i.a.memo(mt);var jt=a(5),ft=a(193),xt=a(19);const Ot=({title:e,description:t,entityName:a,entityNamePlural:s,initialFilter:r,headingId:o,initialPageSize:l,listingLimit:d,urlStateEnabled:u=!0,customTableColumn:p,emptyPrompt:b,findItems:g,createItem:m,editItem:h,deleteItems:j,getDetailViewLink:f,getOnClickTitle:x,rowItemActions:O,id:v,contentEditor:y,children:C,titleColumnName:S,additionalRightSideActions:E,withoutPageTemplateWrapper:M,createdByEnabled:T})=>{const I=M?i.a.Fragment:pe,[F,L]=Object(n.useState)(!1),[k,N]=Object(n.useState)(),w=Object(n.useCallback)((()=>{L(!0)}),[]);return Object(c.jsx)(I,{panelled:!0,"data-test-subj":k},Object(c.jsx)(pe.Header,{pageTitle:Object(c.jsx)("span",{id:o},e),description:t,rightSideItems:null==E?void 0:E.slice(0,2),"data-test-subj":"top-nav"}),Object(c.jsx)(pe.Section,{"aria-labelledby":F?o:void 0},C,Object(c.jsx)(ht,{tableCaption:e,entityName:a,entityNamePlural:s,initialFilter:r,headingId:o,initialPageSize:l,listingLimit:d,urlStateEnabled:u,customTableColumn:p,emptyPrompt:b,findItems:g,createItem:m,editItem:h,deleteItems:j,rowItemActions:O,getDetailViewLink:f,getOnClickTitle:x,id:v,contentEditor:y,titleColumnName:S,withoutPageTemplateWrapper:M,onFetchSuccess:w,setPageDataTestSubject:N,createdByEnabled:T})))};var vt=a(0),yt=a(29);const Ct="savedObjects:listingLimit";function St(){var e;const t=Object(jt.C)();null===(e=Object(jt.U)())||void 0===e||e.reportUiCounter(vt.e,xt.METRIC_TYPE.CLICK,"create_maps_vis_editor"),t(vt.e,{path:vt.eb})}const Et=e=>{var t;return{...e,updatedAt:e.updatedAt,attributes:{...e.attributes,title:null!==(t=e.attributes.title)&&void 0!==t?t:""}}};async function Mt(e){await Promise.all(e.map((({id:e})=>Object(yt.b)().delete(e))))}function Tt({history:e}){Object(jt.q)().set({type:"application",name:vt.e,page:"list"});const t=!Object(jt.A)().save,a=Object(jt.T)().get(Ct),i=Object(jt.T)().get("savedObjects:perPage");Object(n.useEffect)((()=>{Object(jt.g)().docTitle.change(vt.f),Object(jt.K)()?Object(jt.K)().setBreadcrumbs({text:vt.f}):Object(jt.g)().setBreadcrumbs([{text:vt.f}])}),[]);const s=Object(n.useCallback)((async(e,{references:t=[],referencesToExclude:a=[]}={})=>Object(yt.b)().search({text:e?`${e}*`:void 0,limit:Object(jt.T)().get(Ct),tags:{included:t.map((({id:e})=>e)),excluded:a.map((({id:e})=>e))}}).then((({hits:e,pagination:{total:t}})=>({total:t,hits:e.map(Et)}))).catch((e=>({total:0,hits:[]})))),[]);return Object(c.jsx)(Ot,{id:"map",headingId:"mapsListingPage",createItem:t?void 0:St,findItems:s,deleteItems:t?void 0:Mt,listingLimit:a,initialFilter:"",initialPageSize:i,entityName:y.i18n.translate("xpack.maps.mapListing.entityName",{defaultMessage:"map"}),entityNamePlural:y.i18n.translate("xpack.maps.mapListing.entityNamePlural",{defaultMessage:"maps"}),title:vt.f,getOnClickTitle:({id:t})=>()=>e.push(Object(vt.Mb)(t))})}const It=Object(n.memo)(Tt);function Ft(e){const[t,a]=Object(n.useState)(!1),[i,s]=Object(n.useState)(!0);return Object(n.useEffect)((()=>{e.stateTransfer.clearEditorState(vt.e);let t=!1;return Object(yt.b)().search({limit:1}).then((e=>{t||(s(e.hits.length>0),a(!0))})).catch((e=>{t||(a(!0),s(!1))})),()=>{t=!0}}),[]),t?i?Object(c.jsx)(It,{history:e.history}):Object(c.jsx)(o.Redirect,{to:"/map"}):null}var Lt=a(30),kt=a(257),Nt=a(91),wt=a(131);let Pt=function(e){return e.CONFIGURE_UPLOAD="CONFIGURE_UPLOAD",e.UPLOAD="UPLOAD",e.ADD_DOCUMENT_LAYER="ADD_DOCUMENT_LAYER",e}({});var _t=function(e){return e.CONFIGURE="CONFIGURE",e.TRIGGERED="TRIGGERED",e.SUCCESS="SUCCESS",e.ERROR="ERROR",e}(_t||{});class wizard_ClientFileCreateSourceEditor extends n.Component{constructor(...e){super(...e),he()(this,"_isMounted",!1),he()(this,"state",{indexingStage:_t.CONFIGURE}),he()(this,"_addDocumentLayer",p.a.once((e=>{const t={indexPatternId:e.indexPatternId,geoField:e.geoFieldName,scalingType:vt.wb.MVT};this.props.previewLayers([Object(wt.createDefaultLayerDescriptor)(t,this.props.mapColors)]),this.props.advanceToNextStep()}))),he()(this,"_onFileSelect",((e,t,a)=>{if(!this._isMounted)return;if(!e)return void this.props.previewLayers([]);const n=a<100,i=kt.a.createDescriptor({__featureCollection:e,areResultsTrimmed:n,tooltipContent:n?y.i18n.translate("xpack.maps.fileUpload.trimmedResultsMsg",{defaultMessage:"Results limited to {numFeatures} features, {previewCoverage}% of file.",values:{numFeatures:e.features.length.toLocaleString(),previewCoverage:a}}):null,name:t}),s=Nt.b.createDescriptor({sourceDescriptor:i},this.props.mapColors);this.props.previewLayers([s])})),he()(this,"_onFileClear",(()=>{this.props.previewLayers([])})),he()(this,"_onUploadComplete",(e=>{this._isMounted&&(this.setState({results:e}),this.setState({indexingStage:_t.SUCCESS}),this.props.advanceToNextStep(),this.props.enableNextBtn())})),he()(this,"_onUploadError",(()=>{this._isMounted&&(this.props.stopStepLoading(),this.props.disableNextBtn(),this.setState({indexingStage:_t.ERROR}))}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}componentDidUpdate(){if(this.props.currentStepId===Pt.UPLOAD&&this.state.indexingStage===_t.CONFIGURE)return this.setState({indexingStage:_t.TRIGGERED}),void this.props.startStepLoading();this.props.isOnFinalStep&&this.state.indexingStage===_t.SUCCESS&&this.state.results&&this._addDocumentLayer(this.state.results)}render(){const e=Object(jt.s)();return Object(c.jsx)(I.EuiPanel,null,Object(c.jsx)(e,{isIndexingTriggered:this.state.indexingStage===_t.TRIGGERED,onFileSelect:this._onFileSelect,onFileClear:this._onFileClear,enableImportBtn:this.props.enableNextBtn,disableImportBtn:this.props.disableNextBtn,onUploadComplete:this._onUploadComplete,onUploadError:this._onUploadError}))}}const At={id:vt.Jb.GEO_FILE,order:10,categories:[],description:y.i18n.translate("xpack.maps.fileUploadWizard.description",{defaultMessage:"Index GeoJSON and Shapefile data in Elasticsearch"}),disabledReason:y.i18n.translate("xpack.maps.fileUploadWizard.disabledDesc",{defaultMessage:'Unable to upload files, you are missing the Kibana privilege "Data View Management".'}),getIsDisabled:async()=>!await Object(jt.r)().hasImportPermission({checkCreateDataView:!0,checkHasManagePipeline:!1}),icon:"importAction",prerequisiteSteps:[{id:Pt.CONFIGURE_UPLOAD,label:y.i18n.translate("xpack.maps.fileUploadWizard.configureUploadLabel",{defaultMessage:"Import file"})},{id:Pt.UPLOAD,label:y.i18n.translate("xpack.maps.fileUploadWizard.uploadLabel",{defaultMessage:"Importing file"})},{id:Pt.ADD_DOCUMENT_LAYER,label:y.i18n.translate("xpack.maps.fileUploadWizard.configureDocumentLayerLabel",{defaultMessage:"Add as document layer"})}],renderWizard:e=>Object(c.jsx)(wizard_ClientFileCreateSourceEditor,e),title:y.i18n.translate("xpack.maps.fileUploadWizard.title",{defaultMessage:"Upload file"})};var Rt=a(102);class wizard_LayerGroupWizard extends n.Component{constructor(...e){super(...e),he()(this,"state",{label:Rt.a}),he()(this,"_onLabelChange",(e=>{this.setState({label:e.target.value},this._previewLayer)}))}componentDidMount(){this._previewLayer()}_previewLayer(){const e=Rt.b.createDescriptor({label:this.state.label});this.props.previewLayers([e])}render(){return Object(c.jsx)(I.EuiPanel,null,Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.layerPanel.settingsPanel.layerNameLabel",{defaultMessage:"Name"})},Object(c.jsx)(I.EuiFieldText,{value:this.state.label,onChange:this._onLabelChange})))}}const Dt={id:vt.Jb.LAYER_GROUP,order:10,categories:[],description:y.i18n.translate("xpack.maps.layerGroupWizard.description",{defaultMessage:"Organize related layers in a hierarchy"}),icon:"layers",renderWizard:e=>Object(c.jsx)(wizard_LayerGroupWizard,e),title:y.i18n.translate("xpack.maps.layerGroupWizard.title",{defaultMessage:"Layer group"})};var Ut=a(175),Bt=a(341),zt=a(161),Gt=a(340),Ht=a(159),Wt=a(251),Vt=a(255),qt=a(345),Jt=a(254),$t=a(343),Qt=a(247);let Kt=function(e){return e.APM_RUM_PERFORMANCE="APM_RUM_PERFORMANCE",e.APM_RUM_TRAFFIC="APM_RUM_TRAFFIC",e}({});const Yt=[{value:Kt.APM_RUM_PERFORMANCE,text:y.i18n.translate("xpack.maps.observability.apmRumPerformanceLabel",{defaultMessage:"APM RUM Performance"})},{value:Kt.APM_RUM_TRAFFIC,text:y.i18n.translate("xpack.maps.observability.apmRumTrafficLabel",{defaultMessage:"APM RUM Traffic"})}];function Xt(e){const t=e.value?Yt:[{value:"",text:""},...Yt];return Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.observability.layerLabel",{defaultMessage:"Layer"})},Object(c.jsx)(I.EuiSelect,{options:t,value:e.value?e.value:"",onChange:function(t){e.onChange(t.target.value)}}))}let Zt=function(e){return e.TRANSACTION_DURATION="TRANSACTION_DURATION",e.COUNT="COUNT",e.UNIQUE_COUNT="UNIQUE_COUNT",e}({});const ea=[{value:Zt.TRANSACTION_DURATION,text:y.i18n.translate("xpack.maps.observability.transactionDurationLabel",{defaultMessage:"Transaction duraction"})}],ta=[{value:Zt.COUNT,text:y.i18n.translate("xpack.maps.observability.countLabel",{defaultMessage:"Count"})},{value:Zt.UNIQUE_COUNT,text:y.i18n.translate("xpack.maps.observability.uniqueCountLabel",{defaultMessage:"Unique count"})}];function aa(e){return e===Kt.APM_RUM_PERFORMANCE?ea:e===Kt.APM_RUM_TRAFFIC?ta:[]}function na(e){return e.layer&&e.value?Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.observability.metricLabel",{defaultMessage:"Metric"})},Object(c.jsx)(I.EuiSelect,{options:aa(e.layer),value:e.value,onChange:function(t){e.onChange(t.target.value)}})):null}let ia=function(e){return e.CHOROPLETH="CHOROPLETH",e.CLUSTERS="CLUSTERS",e.GRIDS="GRIDS",e.HEATMAP="HEATMAP",e}({});const sa=[{value:ia.CHOROPLETH,text:y.i18n.translate("xpack.maps.observability.choroplethLabel",{defaultMessage:"World boundaries"})},{value:ia.CLUSTERS,text:y.i18n.translate("xpack.maps.observability.clustersLabel",{defaultMessage:"Clusters"})},{value:ia.GRIDS,text:y.i18n.translate("xpack.maps.observability.gridsLabel",{defaultMessage:"Grids"})},{value:ia.HEATMAP,text:y.i18n.translate("xpack.maps.observability.heatMapLabel",{defaultMessage:"Heat map"})}];function ra(e){return e.layer?Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.observability.displayLabel",{defaultMessage:"Display"})},Object(c.jsx)(I.EuiSelect,{options:sa,value:e.value,onChange:function(t){e.onChange(t.target.value)}})):null}var oa=a(56),la=a(120),ca=a(100),da=a(160),ua=a(98);const pa=Object(ua.i)();function ba(e,t){return{type:vt.Eb.DYNAMIC,options:{...pa[vt.Ib.FILL_COLOR].options,field:t,color:e===Kt.APM_RUM_PERFORMANCE?"Green to Red":"Yellow to Red",type:vt.j.ORDINAL}}}function ga(e){return e===ia.HEATMAP?vt.ub.HEATMAP:e===ia.GRIDS?vt.ub.GRID:vt.ub.POINT}class observability_layer_template_ObservabilityLayerTemplate extends n.Component{constructor(...e){super(...e),he()(this,"state",{layer:null,metric:null,display:ia.CHOROPLETH}),he()(this,"_onLayerChange",(e=>{const t={layer:e,metric:this.state.metric},a=aa(e);a.find((e=>e.value===this.state.metric))||(a.length?t.metric=a[0].value:t.metric=null),this.setState(t,this._previewLayer)})),he()(this,"_onMetricChange",(e=>{this.setState({metric:e},this._previewLayer)})),he()(this,"_onDisplayChange",(e=>{this.setState({display:e},this._previewLayer)}))}_previewLayer(){const e=function({layer:e,metric:t,display:a}){if(!e||!t||!a)return null;const n=function(e){let t;return e!==Kt.APM_RUM_PERFORMANCE&&e!==Kt.APM_RUM_TRAFFIC||(t='processor.event:"transaction"'),t?{language:"kuery",query:t}:void 0}(e),i=function(e,t){let a,n;return e===Kt.APM_RUM_PERFORMANCE?a=y.i18n.translate("xpack.maps.observability.apmRumPerformanceLayerName",{defaultMessage:"Performance"}):e===Kt.APM_RUM_TRAFFIC&&(a=y.i18n.translate("xpack.maps.observability.apmRumTrafficLayerName",{defaultMessage:"Traffic"})),t===Zt.TRANSACTION_DURATION?n=y.i18n.translate("xpack.maps.observability.durationMetricName",{defaultMessage:"Duration"}):t===Zt.COUNT?n=y.i18n.translate("xpack.maps.observability.countMetricName",{defaultMessage:"Total"}):t===Zt.UNIQUE_COUNT&&(n=y.i18n.translate("xpack.maps.observability.uniqueCountMetricName",{defaultMessage:"Unique count"})),`[${a}] ${n}`}(e,t),s=function(e){return e===Zt.TRANSACTION_DURATION?{type:vt.b.AVG,field:"transaction.duration.us"}:e===Zt.UNIQUE_COUNT?{type:vt.b.UNIQUE_COUNT,field:"transaction.id"}:{type:vt.b.COUNT}}(t),r=Object(Qt.a)(Object(jt.N)());if(a===ia.CHOROPLETH){const t=Object(oa.v4)(),a=Object(la.a)({aggType:s.type,aggFieldName:"field"in s?s.field:"",rightSourceId:t});return Nt.b.createDescriptor({label:i,joins:[{leftField:"iso2",right:{type:vt.Cb.ES_TERM_SOURCE,id:t,indexPatternId:r,term:"client.geo.country_iso_code",metrics:[s],whereQuery:n,applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0}}],sourceDescriptor:Ht.a.createDescriptor({id:vt.Lb,tooltipProperties:["name","iso2"]}),style:ca.a.createDescriptor({[vt.Ib.FILL_COLOR]:ba(e,{name:a,origin:vt.D.JOIN}),[vt.Ib.LINE_COLOR]:{type:vt.Eb.STATIC,options:{color:"#3d3d3d"}}})})}const o=Ut.a.createDescriptor({indexPatternId:r,geoField:"client.geo.location",metrics:[s],requestType:ga(a),resolution:vt.L.MOST_FINE});if(a===ia.HEATMAP)return da.a.createDescriptor({label:i,query:n,sourceDescriptor:o});const l={name:Object(la.b)({aggType:s.type,aggFieldName:"field"in s?s.field:void 0}),origin:vt.D.SOURCE},c={[vt.Ib.FILL_COLOR]:ba(e,l),[vt.Ib.ICON_SIZE]:{type:vt.Eb.DYNAMIC,options:{...pa[vt.Ib.ICON_SIZE].options,field:l}},[vt.Ib.LINE_COLOR]:{type:vt.Eb.STATIC,options:{color:"#3d3d3d"}}};return Nt.b.createDescriptor({label:i,query:n,sourceDescriptor:o,style:ca.a.createDescriptor(c)})}({layer:this.state.layer,metric:this.state.metric,display:this.state.display});this.props.previewLayers(e?[e]:[])}render(){return Object(c.jsx)(I.EuiPanel,null,Object(c.jsx)(Xt,{value:this.state.layer,onChange:this._onLayerChange}),Object(c.jsx)(na,{layer:this.state.layer,value:this.state.metric,onChange:this._onMetricChange}),Object(c.jsx)(ra,{layer:this.state.layer,value:this.state.display,onChange:this._onDisplayChange}))}}const ma={id:vt.Jb.OBSERVABILITY,order:20,categories:[vt.ab.ELASTICSEARCH,vt.ab.SOLUTIONS],getIsDisabled:async()=>{try{return await Object(jt.w)().get(Object(Qt.a)(Object(jt.N)())),!1}catch(e){return!0}},disabledReason:y.i18n.translate("xpack.maps.observability.disabledDesc",{defaultMessage:"Cannot find APM data view. To get started with Observably, go to Observability > Overview."}),description:y.i18n.translate("xpack.maps.observability.desc",{defaultMessage:"APM layers"}),icon:"logoObservability",renderWizard:e=>Object(c.jsx)(observability_layer_template_ObservabilityLayerTemplate,e),title:y.i18n.translate("xpack.maps.observability.title",{defaultMessage:"Observability"})};var ha=a(624),ja=a(92),fa=a(155),xa=a(116),Oa=a(108),va=a(97),ya=a(95);const Ca=Object(ua.i)();function Sa({sourceDescriptor:e,leftField:t,rightIndexPatternId:a,rightTermField:n,layerType:i}){const s={type:vt.b.COUNT},r=Object(oa.v4)(),o=Object(la.a)({aggType:s.type,aggFieldName:"",rightSourceId:r}),l={[vt.Ib.FILL_COLOR]:{type:vt.Eb.DYNAMIC,options:{...Ca[vt.Ib.FILL_COLOR].options,field:{name:o,origin:vt.D.JOIN},color:"Yellow to Red",type:vt.j.ORDINAL}},[vt.Ib.LINE_COLOR]:{type:vt.Eb.STATIC,options:{color:"#3d3d3d"}}};i===vt.Z.GEOJSON_VECTOR&&(l[vt.Ib.LABEL_TEXT]={type:vt.Eb.DYNAMIC,options:{...Ca[vt.Ib.LABEL_TEXT].options,field:{name:o,origin:vt.D.JOIN}}});const c=[{leftField:t,right:{type:vt.Cb.ES_TERM_SOURCE,id:r,indexPatternId:a,term:n,metrics:[s],applyGlobalQuery:!0,applyGlobalTime:!0,applyForceRefresh:!0}}];return i===vt.Z.MVT_VECTOR?Nt.c.createDescriptor({joins:c,sourceDescriptor:e,style:ca.a.createDescriptor(l)}):Nt.b.createDescriptor({joins:c,sourceDescriptor:e,style:ca.a.createDescriptor(l)})}var Ea=a(170);let Ma=function(e){return e.ELASTICSEARCH="ELASTICSEARCH",e.EMS="EMS",e}({});const Ta=[{id:Ma.EMS,label:y.i18n.translate("xpack.maps.choropleth.boundaries.ems",{defaultMessage:"Administrative boundaries from the Elastic Maps Service"})},{id:Ma.ELASTICSEARCH,label:y.i18n.translate("xpack.maps.choropleth.boundaries.elasticsearch",{defaultMessage:"Points, lines, and polygons from Elasticsearch"})}];class layer_template_LayerTemplate extends n.Component{constructor(...e){super(...e),he()(this,"_isMounted",!1),he()(this,"state",{leftSource:Ma.EMS,leftEmsFileId:null,leftEmsFields:[],leftIndexPattern:null,leftGeoFields:[],leftJoinFields:[],leftGeoField:null,leftEmsJoinField:null,leftElasticsearchJoinField:null,rightIndexPatternId:"",rightTermsFields:[],rightJoinField:null}),he()(this,"_loadRightFields",(async e=>{let t;this.setState({rightTermsFields:[]});try{t=await Object(jt.w)().get(e)}catch(e){return}this._isMounted&&e===this.state.rightIndexPatternId&&this.setState({rightTermsFields:Object(va.i)(t.fields)})})),he()(this,"_loadEmsFileFields",(async()=>{let e;try{e=(await Object(ya.getEmsFileLayers)()).find((e=>e.getId()===this.state.leftEmsFileId))}catch(e){}if(!this._isMounted||!e)return;const t=e.getFieldsInLanguage().filter((e=>"id"===e.type)).map((e=>({value:e.name,label:e.description})));this.setState({leftEmsFields:t,leftEmsJoinField:t.length?t[0].value:null},this._previewLayer)})),he()(this,"_onLeftSourceChange",(e=>{this.setState({leftSource:e,rightJoinField:null},this._previewLayer)})),he()(this,"_onLeftIndexPatternChange",(e=>{this.setState({leftIndexPattern:e,leftGeoFields:Object(va.b)(e.fields),leftJoinFields:Object(va.h)(e.fields),leftGeoField:null,leftElasticsearchJoinField:null,rightJoinField:null},(()=>{this.state.leftGeoFields.length&&this._onLeftGeoFieldSelect(this.state.leftGeoFields[0].name)}))})),he()(this,"_onLeftGeoFieldSelect",(e=>{e&&this.setState({leftGeoField:e},this._previewLayer)})),he()(this,"_onLeftJoinFieldSelect",(e=>{e&&this.setState({leftElasticsearchJoinField:e},this._previewLayer)})),he()(this,"_onLeftEmsFileChange",(e=>{this.setState({leftEmsFileId:e,leftEmsJoinField:null,rightJoinField:null},(()=>{this._previewLayer(),this._loadEmsFileFields()}))})),he()(this,"_onLeftEmsFieldChange",(e=>{0!==e.length&&this.setState({leftEmsJoinField:e[0].value},this._previewLayer)})),he()(this,"_onRightIndexPatternChange",(e=>{e&&this.setState({rightIndexPatternId:e,rightJoinField:null},(()=>{this._previewLayer(),this._loadRightFields(e)}))})),he()(this,"_onRightJoinFieldSelect",(e=>{e&&this.setState({rightJoinField:e},this._previewLayer)}))}componentWillUnmount(){this._isMounted=!1}componentDidMount(){this._isMounted=!0}_isLeftConfigComplete(){return this.state.leftSource===Ma.ELASTICSEARCH?!!this.state.leftIndexPattern&&!!this.state.leftGeoField&&!!this.state.leftElasticsearchJoinField:!!this.state.leftEmsFileId&&!!this.state.leftEmsJoinField}_isRightConfigComplete(){return!!this.state.rightIndexPatternId&&!!this.state.rightJoinField}_previewLayer(){if(!this._isLeftConfigComplete()||!this._isRightConfigComplete())return void this.props.previewLayers([]);const e=this.state.leftSource===Ma.ELASTICSEARCH?function({leftIndexPatternId:e,leftGeoField:t,leftJoinField:a,rightIndexPatternId:n,rightTermField:i}){return Sa({sourceDescriptor:wt.ESSearchSource.createDescriptor({indexPatternId:e,geoField:t,scalingType:vt.wb.MVT,tooltipProperties:[a],applyGlobalQuery:!1,applyGlobalTime:!1,applyForceRefresh:!1}),leftField:a,rightIndexPatternId:n,rightTermField:i,layerType:vt.Z.MVT_VECTOR})}({leftIndexPatternId:this.state.leftIndexPattern.id,leftGeoField:this.state.leftGeoField,leftJoinField:this.state.leftElasticsearchJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightTermField:this.state.rightJoinField}):function({leftEmsFileId:e,leftEmsField:t,rightIndexPatternId:a,rightTermField:n}){return Sa({sourceDescriptor:Ht.a.createDescriptor({id:e,tooltipProperties:[t]}),leftField:t,rightIndexPatternId:a,rightTermField:n,layerType:vt.Z.GEOJSON_VECTOR})}({leftEmsFileId:this.state.leftEmsFileId,leftEmsField:this.state.leftEmsJoinField,rightIndexPatternId:this.state.rightIndexPatternId,rightTermField:this.state.rightJoinField});this.props.previewLayers([e])}_renderLeftSourceForm(){if(this.state.leftSource===Ma.ELASTICSEARCH){let e,t;return this.state.leftGeoFields.length&&(e=Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.choropleth.geofieldLabel",{defaultMessage:"Geospatial field"})},Object(c.jsx)(Oa.a,{placeholder:y.i18n.translate("xpack.maps.choropleth.geofieldPlaceholder",{defaultMessage:"Select geo field"}),value:this.state.leftGeoField,onChange:this._onLeftGeoFieldSelect,fields:this.state.leftGeoFields,isClearable:!1}))),this.state.leftJoinFields.length&&(t=Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},Object(c.jsx)(Oa.a,{placeholder:Ea.a.fieldSelectPlaceholder,value:this.state.leftElasticsearchJoinField,onChange:this._onLeftJoinFieldSelect,fields:this.state.leftJoinFields,isClearable:!1}))),Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(xa.a,{dataView:this.state.leftIndexPattern,onChange:this._onLeftIndexPatternChange}),e,t)}{let e;if(this.state.leftEmsFields.length){let t;this.state.leftEmsJoinField&&(t=this.state.leftEmsFields.find((e=>this.state.leftEmsJoinField===e.value))),e=Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},Object(c.jsx)(I.EuiComboBox,{singleSelection:!0,isClearable:!1,options:this.state.leftEmsFields,selectedOptions:t?[t]:[],onChange:this._onLeftEmsFieldChange}))}return Object(c.jsx)(i.a.Fragment,null,Object(c.jsx)(fa.a,{value:this.state.leftEmsFileId,onChange:this._onLeftEmsFileChange}),e)}}_renderLeftPanel(){return Object(c.jsx)(I.EuiPanel,null,Object(c.jsx)(I.EuiTitle,{size:"xs"},Object(c.jsx)("h5",null,Object(c.jsx)(E.FormattedMessage,{id:"xpack.maps.choropleth.boundariesLabel",defaultMessage:"Boundaries source"}))),Object(c.jsx)(I.EuiSpacer,{size:"m"}),Object(c.jsx)(I.EuiFormRow,null,Object(c.jsx)(I.EuiRadioGroup,{options:Ta,idSelected:this.state.leftSource,onChange:this._onLeftSourceChange})),this._renderLeftSourceForm())}_renderRightPanel(){if(!this._isLeftConfigComplete())return null;const e=Object(jt.v)();let t;return this.state.rightTermsFields.length&&(t=Object(c.jsx)(I.EuiFormRow,{label:y.i18n.translate("xpack.maps.choropleth.joinFieldLabel",{defaultMessage:"Join field"})},Object(c.jsx)(Oa.a,{placeholder:Ea.a.fieldSelectPlaceholder,value:this.state.rightJoinField,onChange:this._onRightJoinFieldSelect,fields:this.state.rightTermsFields,isClearable:!1}))),Object(c.jsx)(I.EuiPanel,null,Object(c.jsx)(I.EuiTitle,{size:"xs"},Object(c.jsx)("h5",null,Object(c.jsx)(E.FormattedMessage,{id:"xpack.maps.choropleth.statisticsLabel",defaultMessage:"Statistics source"}))),Object(c.jsx)(I.EuiSpacer,{size:"m"}),Object(c.jsx)(I.EuiFormRow,{label:Object(ja.b)()},Object(c.jsx)(e,{placeholder:Object(ja.d)(),indexPatternId:this.state.rightIndexPatternId,onChange:this._onRightIndexPatternChange,isClearable:!1})),t)}render(){return Object(c.jsx)(i.a.Fragment,null,this._renderLeftPanel(),Object(c.jsx)(I.EuiSpacer,{size:"s"}),this._renderRightPanel())}}const Ia={id:vt.Jb.CHOROPLETH,order:10,categories:[vt.ab.ELASTICSEARCH],description:y.i18n.translate("xpack.maps.choropleth.desc",{defaultMessage:"Shade areas to compare statistics across boundaries"}),icon:()=>Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(c.jsx)("path",{fill:"#98A2B3",d:"M32.206 15.364V1.588l-1.492.204c-.743.254-1.768.38-2.702.45a41.39 41.39 0 01-1.258.07l-.093.005c-.312.014-.57.025-.72.042a1.895 1.895 0 00-.558.167c-.156.07-.316.156-.47.238l-.057.031c-.356.19-.687.357-1.025.4l-2.262.474v5.864c0 .698-.677 2.578-.818 3.852l.34 1.807 11.114.17z"}),Object(c.jsx)("path",{fill:"#69707D",d:"M22.36 3.558c-.178-.104-.416-.15-.664-.172a6.333 6.333 0 00-.885 0c-.657.04-1.452.144-2.264.261l-.703.103c-.583.087-1.16.172-1.692.238-.751.093-1.39.145-1.82.113-.593-.044-1.125.341-1.611.843-.453.467-.925 1.101-1.429 1.777l-.144.193c-1.132 1.517-2.452 3.218-4.22 4.102-.213.107-.346.312-.431.528a3.065 3.065 0 00-.173.78c-.064.586-.046 1.324.007 2.083.072 1.01.211 2.102.32 2.955.055.42.101.784.128 1.05.08.78-.128 1.77-.37 2.653-.088.319-.178.616-.258.882l-.086.285a9.67 9.67 0 00-.12.434 1.518 1.518 0 00-.053.334c0 .28.11.577.283.842a2.3 2.3 0 00.735.708l.067.04h.078c4.133-.069 11.445-.366 12.196-.45a.58.58 0 00.334-.17 1.41 1.41 0 00.224-.293c.134-.223.264-.524.388-.867.249-.69.495-1.6.72-2.52.162-.654.314-1.32.452-1.92l.16-.695c.088-.378.167-.707.235-.963.07-.267.123-.43.156-.494a1.57 1.57 0 00.1-.314c.03-.129.063-.291.096-.48.067-.38.14-.876.213-1.45.146-1.149.296-2.614.403-4.073.107-1.458.171-2.917.146-4.052a10.13 10.13 0 00-.112-1.438 2.469 2.469 0 00-.131-.495c-.053-.128-.135-.275-.276-.358z"}),Object(c.jsx)("path",{fill:"#D3DAE6",d:"M31.435 15.227c-.218.006-1.066-.01-1.445 0-.758.02-1.298-.026-2.353 0H22.15l-2.864 8.915c.2.067 1.938.445 2.242.447.62.005 1.478-.08 2.393-.197.88-.112 1.824-.257 2.679-.389l.112-.017c.888-.136 1.664-.254 2.166-.304.348-.035.996-.025 1.858-.007l.128.002c.827.017 1.818.037 2.868.023 2.199-.028 4.695-.203 6.5-.887 1.42-.538 2.1-.87 2.513-1.339.414-.469.558-.468.643-1.44.086-.972.086-2.063.086-2.063l-8.131-2.744h-3.907z"}),Object(c.jsx)("path",{className:"mapLayersWizardIcon__highlight",d:"M32.206 1.588s-2.046 13.417-1.603 13.639c.787.393 2.66.63 3.785 1.636 1.23 1.1 1.171 2.5 2.318 3.239.834.538 6.73-.874 6.73-.874l.228-7.956s-.174-4.5-.89-5.216c-.716-.715-2.489-1.125-3-2.08-1.115-2.08-3.068-2.351-3.068-2.351l-4.5-.037z"})),renderWizard:e=>Object(c.jsx)(layer_template_LayerTemplate,e),title:y.i18n.translate("xpack.maps.choropleth.title",{defaultMessage:"Choropleth"})};var Fa=a(344);const La={created:{properties:{"@timestamp":{type:"date"},user:{type:"keyword"}}}};class wizard_NewVectorLayerEditor extends n.Component{constructor(...e){super(...e),he()(this,"_isMounted",!1),he()(this,"state",{indexName:"",indexNameError:"",indexingTriggered:!1,createIndexError:"",userHasIndexWritePermissions:!0}),he()(this,"_createNewIndex",(async()=>{let e;try{const t=await this._checkIndexPermissions();if(!t)return void this._setCreateIndexError(y.i18n.translate("xpack.maps.layers.newVectorLayerWizard.indexPermissionsError",{defaultMessage:"You must have 'create' and 'create_index' index privileges to create and write data to \"{indexName}\".",values:{indexName:this.state.indexName}}),t);e=(await(async({indexName:e,defaultMappings:t={}})=>await Object(jt.t)().fetch({path:vt.Q,method:"POST",version:"1",body:JSON.stringify({index:e,mappings:{properties:{coordinates:{type:"geo_shape"},...t}}})}))({indexName:this.state.indexName,defaultMappings:La})).indexPatternId}catch(e){return void this._setCreateIndexError(e.message)}if(!e)return void this._setCreateIndexError(y.i18n.translate("xpack.maps.layers.newVectorLayerWizard.createIndexError",{defaultMessage:"Could not create index with name {message}",values:{message:this.state.indexName}}));if(!this._isMounted)return;const t=wt.ESSearchSource.createDescriptor({indexPatternId:e,geoField:"coordinates",filterByMapBounds:!1,applyGlobalQuery:!1}),a=Nt.b.createDescriptor({sourceDescriptor:t},this.props.mapColors);this.props.previewLayers([a]),this.props.advanceToNextStep()})),he()(this,"_onIndexChange",((e,t)=>{this.setState({indexName:e,indexNameError:t||""}),e&&!t?this.props.enableNextBtn():this.props.disableNextBtn()}))}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}async componentDidUpdate(){this.props.currentStepId!==Fa.a||this.state.indexingTriggered||(this.setState({indexingTriggered:!0}),await this._createNewIndex())}_setCreateIndexError(e,t=!0){this._isMounted&&this.setState({createIndexError:e,userHasIndexWritePermissions:t})}async _checkIndexPermissions(){return await Object(jt.r)().hasImportPermission({checkCreateDataView:!0,checkHasManagePipeline:!1,indexName:this.state.indexName})}render(){if(this.state.createIndexError)return this.state.userHasIndexWritePermissions?Object(c.jsx)(I.EuiCallOut,{title:y.i18n.translate("xpack.maps.layers.newVectorLayerWizard.createIndexErrorTitle",{defaultMessage:"Unable to create index"}),color:"danger",iconType:"warning"},Object(c.jsx)("p",null,this.state.createIndexError)):Object(c.jsx)(I.EuiCallOut,{title:y.i18n.translate("xpack.maps.layers.newVectorLayerWizard.indexPrivsErrorTitle",{defaultMessage:"Missing index privileges"}),color:"danger",iconType:"warning"},Object(c.jsx)("p",null,this.state.createIndexError));const e=Object(jt.u)();return Object(c.jsx)(I.EuiPanel,null,Object(c.jsx)(e,{indexName:this.state.indexName,indexNameError:this.state.indexNameError,onIndexNameChange:this._onIndexChange,onIndexNameValidationStart:()=>{},onIndexNameValidationEnd:()=>{}}))}}const ka={id:vt.Jb.NEW_VECTOR,order:10,categories:[vt.ab.ELASTICSEARCH],description:y.i18n.translate("xpack.maps.newVectorLayerWizard.description",{defaultMessage:"Draw shapes on the map and index in Elasticsearch"}),disabledReason:y.i18n.translate("xpack.maps.newVectorLayerWizard.disabledDesc",{defaultMessage:'Unable to create index, you are missing the Kibana privilege "Data View Management".'}),getIsDisabled:async()=>!await Object(jt.r)().hasImportPermission({checkCreateDataView:!0,checkHasManagePipeline:!1}),isBeta:!0,icon:()=>Object(c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"25",fill:"none",viewBox:"0 0 49 25",className:"mapLayersWizardIcon"},Object(c.jsx)("path",{className:"mapLayersWizardIcon__background",d:"M12.281 3l-6.625 7.625 1.657 8.938 35.218-.813v-13l-10.625-3.5-9.781 9.5L12.281 3z"}),Object(c.jsx)("path",{className:"mapLayersWizardIcon__highlight",fillRule:"evenodd",d:"M31.775 1.68l11.256 3.708v13.85l-36.133.834-1.777-9.593 7.114-8.189 9.875 8.778 9.665-9.388zm.262 1.14l-9.897 9.612-9.813-8.722-6.135 7.06 1.535 8.283 34.304-.792V6.111L32.037 2.82z",clipRule:"evenodd"}),Object(c.jsx)("circle",{cx:"7.281",cy:"19.5",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(c.jsx)("circle",{cx:"5.656",cy:"10.25",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(c.jsx)("circle",{cx:"12.156",cy:"3.625",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(c.jsx)("circle",{cx:"22",cy:"11.6",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(c.jsx)("circle",{cx:"31.969",cy:"2.5",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(c.jsx)("circle",{cx:"42.344",cy:"6.125",r:"2.5",className:"mapLayersWizardIcon__highlight"}),Object(c.jsx)("circle",{cx:"42.344",cy:"19",r:"2.5",className:"mapLayersWizardIcon__highlight"})),prerequisiteSteps:[{id:"ADD_VECTOR_DRAWING_LAYER",label:y.i18n.translate("xpack.maps.newVectorLayerWizard.indexNewLayer",{defaultMessage:"Create index"})}],renderWizard:e=>Object(c.jsx)(wizard_NewVectorLayerEditor,e),showFeatureEditTools:!0,title:y.i18n.translate("xpack.maps.newVectorLayerWizard.title",{defaultMessage:"Create index"})};var Na=a(342);let wa=!1;async function Pa({element:e,history:t,onAppLeave:a,setHeaderActionMenu:n,theme$:i},{coreStart:r,AppUsageTracker:l,savedObjectsTagging:u}){const p=Object(jt.o)().getStateTransfer();function b(e){const{embeddableId:i,originatingApp:s,valueInput:r,originatingPath:o}=p.getIncomingEditorState(vt.e)||{};let l;return e.match.params.savedMapId?l={savedObjectId:e.match.params.savedMapId}:r&&(l=r),Object(c.jsx)(C.a,{coreStart:Object(jt.f)()},Object(c.jsx)(ft.a,{mapSerializedState:l,embeddableId:i,onAppLeave:a,setHeaderActionMenu:n,stateTransfer:p,originatingApp:s,originatingPath:o,history:t,key:e.match.params.savedMapId?e.match.params.savedMapId:"new"}))}return wa||(Object(Lt.d)(At),Object(Lt.d)(Dt),Object(Lt.d)(wt.esDocumentsLayerWizardConfig),Object(Lt.d)(Gt.b),Object(Lt.d)(Ia),Object(Lt.d)(Na.b),Object(Lt.d)(Ut.b),Object(Lt.d)(Ut.c),Object(Lt.d)(wt.esTopHitsLayerWizardConfig),Object(Lt.d)(Bt.b),Object(Lt.d)(zt.a),Object(Lt.d)(ka),Object(Lt.d)(Ht.b),Object(Lt.d)(Wt.b),Object(Lt.d)(qt.b),Object(Lt.d)(Jt.a),Object(Lt.d)(Vt.a),Object(Lt.d)($t.b),Object(Lt.d)(ma),Object(Lt.d)(ha.SecurityLayerWizardConfig),wa=!0),function(){Object(jt.A)().save||Object(jt.g)().setBadge({text:y.i18n.translate("xpack.maps.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:y.i18n.translate("xpack.maps.badge.readOnly.tooltip",{defaultMessage:"Unable to save maps"}),iconType:"glasses"});const e=Object(jt.l)().links.maps.guide;Object(jt.g)().setHelpExtension({appName:"Maps",links:[{linkType:"documentation",href:`${e}`},{linkType:"github",title:"[Maps]",labels:["Team:Geo"]}]})}(),Object(s.render)(Object(c.jsx)(S.a,{analytics:Object(jt.a)(),i18n:Object(jt.h)(),theme:Object(jt.P)()},Object(c.jsx)(l,null,Object(c.jsx)(Ce,{core:r,savedObjectsTagging:u,FormattedRelative:E.FormattedRelative},Object(c.jsx)(d,{history:t},Object(c.jsx)(v,null,Object(c.jsx)(x,{path:"/map/:savedMapId",render:b}),Object(c.jsx)(x,{exact:!0,path:"/map",render:b}),"// Redirect other routes to list, or if hash-containing, their non-hash equivalents",Object(c.jsx)(x,{path:"",render:({location:{pathname:e,hash:a}})=>{if(a){const e=a.substr(1);return Object(c.jsx)(o.Redirect,{to:e})}return"/"===e||""===e?Object(c.jsx)(Ft,{history:t,stateTransfer:p}):Object(c.jsx)(o.Redirect,{to:"/"})}})))))),e),()=>{Object(s.unmountComponentAtNode)(e)}}}}]);