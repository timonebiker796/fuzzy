/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[8],{186:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={all:["triggersActionsUi"],alertsTable:()=>[...n.all,"alertsTable"],cases:()=>[...n.alertsTable(),"cases"],mutedAlerts:()=>[...n.alertsTable(),"mutedAlerts"],casesBulkGet:e=>[...n.cases(),"bulkGet",e],maintenanceWindows:()=>[...n.alertsTable(),"maintenanceWindows"],maintenanceWindowsBulkGet:e=>[...n.maintenanceWindows(),"bulkGet",e]}},203:function(e,t,s){"use strict";s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"g",(function(){return c})),s.d(t,"f",(function(){return u})),s.d(t,"e",(function(){return d}));var n=s(2),a=s(50);s.d(t,"h",(function(){return a.b})),s.d(t,"i",(function(){return a.f}));const l=n.i18n.translate("xpack.triggersActionsUI.alertsTable.configuration.errorTitle",{defaultMessage:"Unable to load alerts table"}),o=n.i18n.translate("xpack.triggersActionsUI.alertsTable.configuration.errorBody",{defaultMessage:"There was an error loading the alerts table. This table is missing the necessary configuration. Please contact your administrator for help"}),i=n.i18n.translate("xpack.triggersActionsUI.sections.alertsTable.column.actions",{defaultMessage:"Actions"}),r=n.i18n.translate("xpack.triggersActionsUI.sections.alertsTable.title",{defaultMessage:"Alerts table"}),c=(n.i18n.translate("xpack.triggersActionsUI.alertsTable.filters.errorTitle",{defaultMessage:"Unsupported alerts filters set"}),n.i18n.translate("xpack.triggersActionsUI.alertsTable.unknownErrorTitle",{defaultMessage:"Cannot display alerts"})),u=n.i18n.translate("xpack.triggersActionsUI.alertsTable.unknownErrorBody",{defaultMessage:"An error occurred while rendering the alerts table"}),d=n.i18n.translate("xpack.triggersActionsUI.alertsTable.unknownErrorCopyToClipboardLabel",{defaultMessage:"Copy error to clipboard"})},211:function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return o})),s.d(t,"g",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return u})),s.d(t,"h",(function(){return d}));var n=s(2);n.i18n.translate("xpack.triggersActionsUI.components.alertTable.useFetchAlerts.errorMessageText",{defaultMessage:"An error has occurred on alerts search"});const a=n.i18n.translate("xpack.triggersActionsUI.components.alertTable.useFetchBrowserFieldsCapabilities.errorMessageText",{defaultMessage:"An error has occurred loading browser fields"}),l=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.addToCase",{defaultMessage:"Add to existing case"}),o=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.addToNewCase",{defaultMessage:"Add to new case"}),i=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.noAlertsAddedToCaseTitle",{defaultMessage:"No alerts added to the case"}),r=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.alertsAlreadyAttachedToCase",{defaultMessage:"All selected alerts are already attached to the case"}),c=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.markAsUntracked",{defaultMessage:"Mark as untracked"}),u=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.mute",{defaultMessage:"Mute"}),d=n.i18n.translate("xpack.triggersActionsUI.alerts.table.actions.unmute",{defaultMessage:"Unmute"})},219:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=[{"@timestamp":{order:"desc"}}]},223:function(e,t,s){"use strict";s.d(t,"b",(function(){return E})),s.d(t,"a",(function(){return z}));var n=s(3),a=s(1),l=s.n(a),o=s(107),i=s(66),r=s(0);const c=o.euiStyled.div`
  width: 100%;
  display: flex;
  flex-grow: 1;

  > * {
    max-width: 100%;
  }

  ${({targetClassNames:e,theme:t})=>`\n      ${e.map((e=>`.${e}`)).join(", ")} {\n        pointer-events: none;\n        opacity: 0;\n        transition: opacity ${Object(i.getOr)(250,"eui.euiAnimSpeedNormal",t)} ease;\n        &:focus-visible {\n          pointer-events: auto;\n          opacity: 1;\n        }\n      }\n\n      ${e.map((e=>`&:hover .${e}`)).join(", ")} {\n        pointer-events: auto;\n        opacity: 1;\n      }\n    `}
`,u=l.a.memo((({hide:e,targetClassNames:t,children:s})=>e?Object(r.jsx)(l.a.Fragment,null,s):Object(r.jsx)(c,{"data-test-subj":"hoverVisibilityContainer",targetClassNames:t},s)));u.displayName="HoverVisibilityContainer";var d=s(39),b=s.n(d),g=s(10),p=s(2);const j=p.i18n.translate("xpack.triggersActionsUI.inspectDescription",{defaultMessage:"Inspect"}),m=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.closeTitle",{defaultMessage:"Close"}),x=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.somethingWentWrongDescription",{defaultMessage:"Sorry about that, something went wrong."}),O=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.indexPatternLabel",{defaultMessage:"Index pattern"}),f=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices. These indices can be configured in Kibana > Advanced Settings."}),h=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.queryTimeLabel",{defaultMessage:"Query time"}),v=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.queryTimeDescription",{defaultMessage:"The time it took to process the query. Does not include the time to send the request or parse it in the browser."}),C=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.reqTimestampLabel",{defaultMessage:"Request timestamp"}),A=p.i18n.translate("xpack.triggersActionsUI.inspect.modal.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"}),y=Object(o.euiStyled)(n.EuiModal)`
  width: min(768px, calc(100vw - 16px));
  min-height: 41vh;
  .euiModal__flex {
    width: 60vw;
  }
  .euiCodeBlock {
    height: auto !important;
    max-width: 718px;
  }
`;y.displayName="MyEuiModal";const w=function(e){try{return JSON.parse(e)}catch{return{}}},I=e=>{try{return JSON.stringify(e,null,2)}catch{return x}},k=({closeModal:e,getInspectQuery:t,title:s})=>{var a,o;const{request:i,response:c}=t(),u=w(i[0]),d=w(c[0]),p=I(u),k=I(d),S=[{title:Object(r.jsx)("span",{"data-test-subj":"index-pattern-title"},O," ",Object(r.jsx)(n.EuiIconTip,{color:"subdued",content:f,type:"iInCircle"})),description:Object(r.jsx)("span",{"data-test-subj":"index-pattern-description"},Object(r.jsx)("p",null,null!==(a=null===(o=u.index)||void 0===o?void 0:o.join(", "))&&void 0!==a?a:[]))},{title:Object(r.jsx)("span",{"data-test-subj":"query-time-title"},h," ",Object(r.jsx)(n.EuiIconTip,{color:"subdued",content:v,type:"iInCircle"})),description:Object(r.jsx)("span",{"data-test-subj":"query-time-description"},0===d.took?"0ms":d.took?`${b()(d.took).format("0,0")}ms`:x)},{title:Object(r.jsx)("span",{"data-test-subj":"request-timestamp-title"},C," ",Object(r.jsx)(n.EuiIconTip,{color:"subdued",content:A,type:"iInCircle"})),description:Object(r.jsx)("span",{"data-test-subj":"request-timestamp-description"},(new Date).toISOString())}],T=[{id:"statistics",name:"Statistics",content:Object(r.jsx)(l.a.Fragment,null,Object(r.jsx)(n.EuiSpacer,null),Object(r.jsx)(n.EuiDescriptionList,{listItems:S,type:"responsiveColumn",columnWidths:[3,7]}))},{id:"request",name:"Request",content:Object(r.jsx)(l.a.Fragment,null,Object(r.jsx)(n.EuiSpacer,null),Object(r.jsx)(n.EuiCodeBlock,{language:"js",fontSize:"m",paddingSize:"m",color:"dark",overflowHeight:300,isCopyable:!0},Object(g.isEmpty)(u)?x:p))},{id:"response",name:"Response",content:Object(r.jsx)(l.a.Fragment,null,Object(r.jsx)(n.EuiSpacer,null),Object(r.jsx)(n.EuiCodeBlock,{language:"js",fontSize:"m",paddingSize:"m",color:"dark",overflowHeight:300,isCopyable:!0},Object(g.isEmpty)(d)?x:k))}];return Object(r.jsx)(y,{onClose:e,"data-test-subj":"modal-inspect-euiModal"},Object(r.jsx)(n.EuiModalHeader,null,Object(r.jsx)(n.EuiModalHeaderTitle,null,j," ",s)),Object(r.jsx)(n.EuiModalBody,null,Object(r.jsx)(n.EuiTabbedContent,{tabs:T,initialSelectedTab:T[0],autoFocus:"selected"})),Object(r.jsx)(n.EuiModalFooter,null,Object(r.jsx)(n.EuiButton,{onClick:e,fill:!0,"data-test-subj":"modal-inspect-close"},m)))},S=l.a.memo(k),T="inspectButtonComponent",M=[T],E=Object(a.memo)((({children:e,hide:t})=>Object(r.jsx)(u,{hide:t,targetClassNames:M},e))),F=({getInspectQuery:e,inspectTitle:t})=>{const[s,o]=Object(a.useState)(!1),i=Object(a.useCallback)((()=>{o(!0)}),[]),c=Object(a.useCallback)((()=>{o(!1)}),[]);return Object(r.jsx)(l.a.Fragment,null,Object(r.jsx)(n.EuiButtonIcon,{className:T,"aria-label":j,"data-test-subj":"inspect-icon-button",iconSize:"m",iconType:"inspect",title:j,onClick:i}),s&&Object(r.jsx)(S,{closeModal:c,"data-test-subj":"inspect-modal",getInspectQuery:e,title:t}))};F.displayName="InspectButtonComponent";const z=l.a.memo(F)},225:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(1),a=s(71),l=s(80);const o=e=>{var t,s;const{mutedAlerts:o}=Object(n.useContext)(l.AlertsTableContext),i=e&&(null===(t=e[a.h])||void 0===t?void 0:t[0]),r=e&&(null===(s=e[a.y])||void 0===s?void 0:s[0]);return Object(n.useMemo)((()=>{const e=r?o[r]:[];return{isMuted:i?null==e?void 0:e.includes(i):null,ruleId:r,rule:e,alertInstanceId:i}}),[i,o,r])}},234:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s(28),a=s(63),l=s.n(a),o=s(10),i=s(1),r=s(103),c=s(113),u=s(29);const d={loading:!1,request:{featureIds:[],fields:[],query:{bool:{}},pagination:{pageIndex:0,pageSize:50},sort:s(219).a},response:{alerts:[],oldAlertsData:[],ecsAlertsData:[],totalAlerts:-1,isInitializing:!0}};function b(e,t){switch(t.type){case"loading":return{...e,loading:t.loading};case"response":return{...e,loading:!1,response:{isInitializing:!1,alerts:t.alerts,totalAlerts:t.totalAlerts,oldAlertsData:t.oldAlertsData,ecsAlertsData:t.ecsAlertsData}};case"resetPagination":return{...e,request:{...e.request,pagination:{...e.request.pagination,pageIndex:0}}};case"request":return{...e,request:t.request};default:throw new Error}}const g=({featureIds:e,fields:t,query:s,pagination:a,onLoaded:g,onPageChange:p,runtimeMappings:j,skip:m,sort:x})=>{const O=Object(i.useRef)(o.noop),f=Object(i.useRef)(new AbortController),h=Object(i.useRef)(new r.Subscription),[{loading:v,request:C,response:A},y]=Object(i.useReducer)(b,d),w=Object(i.useRef)(null),I=Object(i.useRef)({request:[],response:[]}),{data:k}=Object(u.b)().services,S=Object(i.useCallback)((()=>I.current),[]),T=Object(i.useCallback)((()=>{var e,t,s;0!==(null!==(e=null===(t=w.current)||void 0===t||null===(s=t.pagination)||void 0===s?void 0:s.pageIndex)&&void 0!==e?e:0)?y({type:"resetPagination"}):O.current()}),[]),M=Object(i.useCallback)((a=>{if(null==a||m)return;const l=async()=>{w.current=a,f.current=new AbortController,y({type:"loading",loading:!0}),k&&k.search&&(h.current=k.search.search({...a,featureIds:e,fields:t,query:s},{strategy:"privateRuleRegistryAlertsSearchStrategy",abortSignal:f.current.signal}).subscribe({next:e=>{if(!Object(c.isRunningResponse)(e)){var t,s,a;const{rawResponse:i}=e;I.current={request:null!==(t=null==e||null===(s=e.inspect)||void 0===s?void 0:s.dsl)&&void 0!==t?t:[],response:null!==(a=[JSON.stringify(i)])&&void 0!==a?a:[]};let r=0;if(i.hits.total&&"number"==typeof i.hits.total)r=i.hits.total;else if(i.hits.total&&"object"==typeof i.hits.total){var l,o;r=null!==(l=null===(o=i.hits.total)||void 0===o?void 0:o.value)&&void 0!==l?l:0}const c=i.hits.hits.reduce(((e,t)=>(t.fields&&e.push({...t.fields,_id:t._id,_index:t._index}),e)),[]),{oldAlertsData:u,ecsAlertsData:d}=c.reduce(((e,t)=>{const s=Object.entries(t).reduce(((e,[t,s])=>(e.push({field:t,value:s}),e)),[]),a=Object.entries(t).reduce(((e,[t,s])=>(Object(n.set)(e,t,null!=s?s:[]),e)),{});return e.oldAlertsData.push(s),e.ecsAlertsData.push(a),e}),{oldAlertsData:[],ecsAlertsData:[]});y({type:"response",alerts:c,oldAlertsData:u,ecsAlertsData:d,totalAlerts:r}),y({type:"loading",loading:!1}),null==g||g(c),h.current.unsubscribe()}},error:e=>{y({type:"loading",loading:!1}),null==g||g([]),k.search.showError(e),h.current.unsubscribe()}}))};h.current.unsubscribe(),f.current.abort(),l(),O.current=l}),[m,k,e,s,t,g]);return Object(i.useEffect)((()=>{var s,n;if(0===e.length)return;const o={featureIds:e,fields:t,pagination:a,query:null!==(s=null===(n=w.current)||void 0===n?void 0:n.query)&&void 0!==s?s:{},runtimeMappings:j,sort:x};o.fields.length>0&&!l()(o,w.current)&&y({type:"request",request:o})}),[e,t,a,x,j]),Object(i.useEffect)((()=>{var t,n,a,o;if(0===e.length||!w.current)return;const i={pageIndex:0,pageSize:null!==(t=null===(n=w.current)||void 0===n||null===(a=n.pagination)||void 0===a?void 0:a.pageSize)&&void 0!==t?t:50},r={...w.current,featureIds:e,pagination:i,query:s};(null!==(o=null==r?void 0:r.fields)&&void 0!==o?o:[]).length>0&&!l()(r.query,w.current.query)&&(y({type:"request",request:r}),p(i))}),[e,p,s]),Object(i.useEffect)((()=>{C.featureIds.length>0&&!l()(C,w.current)&&M(C)}),[C,M]),[v,Object(i.useMemo)((()=>({...A,getInspectQuery:S,refetch:T})),[A,S,T])]}},235:function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return r}));var n=s(2);const a=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.toolbar.bulkActions.selectedAlertsTitle",{values:{selectedAlertsFormatted:e,selectedAlerts:t},defaultMessage:"Selected {selectedAlertsFormatted} {selectedAlerts, plural, =1 {alert} other {alerts}}"}),l=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.toolbar.bulkActions.selectAllAlertsTitle",{values:{totalAlertsFormatted:e,totalAlerts:t},defaultMessage:"Select all {totalAlertsFormatted} {totalAlerts, plural, =1 {alert} other {alerts}}"}),o=n.i18n.translate("xpack.triggersActionsUI.toolbar.bulkActions.clearSelectionTitle",{defaultMessage:"Clear selection"}),i=n.i18n.translate("xpack.triggersActionsUI.bulkActions.columnHeader.AriaLabel",{defaultMessage:"Select all rows"}),r=e=>n.i18n.translate("xpack.triggersActionsUI.bulkActions.selectRowCheckbox.AriaLabel",{values:{displayedRowIndex:e},defaultMessage:"Select row {displayedRowIndex}"})},236:function(e,t,s){"use strict";var n=s(22);s.d(t,"a",(function(){return n.c}))},247:function(e,t,s){"use strict";s.d(t,"a",(function(){return x})),s.d(t,"b",(function(){return O}));var n=s(1),a=s.n(n),l=s(3),o=s(71),i=s(33),r=s.n(i),c=s(2),u=s(11),d=s(0);const b=c.i18n.translate("xpack.triggersActionsUI.alertsTable.maintenanceWindowTooltip.startTime",{defaultMessage:"Start"}),g=c.i18n.translate("xpack.triggersActionsUI.alertsTable.maintenanceWindowTooltip.endTime",{defaultMessage:"End"}),p={name:"19h62v5",styles:"text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;word-break:break-word"},j=Object(n.memo)((e=>{const{maintenanceWindow:t,timestamp:s}=e,{title:a,events:o,eventStartTime:i,eventEndTime:c}=t,j=Object(n.useMemo)((()=>({gte:i,lte:c})),[i,c]),m=Object(n.useMemo)((()=>s&&o.find((({gte:e,lte:t})=>r()(s).isBetween(e,t,void 0,"[]")))||j),[o,s,j]);return Object(d.jsx)(l.EuiFlexGroup,{"data-test-subj":"maintenance-window-tooltip-content",gutterSize:"xs",direction:"column"},Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiText,{size:"relative",css:p},Object(d.jsx)("strong",null,a))),Object(d.jsx)(l.EuiHorizontalRule,{margin:"none"}),Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiFlexGroup,{gutterSize:"xs",direction:"row"},Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiText,{size:"relative"},b,":")),Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiText,{size:"relative"},Object(l.formatDate)(m.gte,u.MAINTENANCE_WINDOW_DATE_FORMAT))))),Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiFlexGroup,{gutterSize:"xs",direction:"row"},Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiText,{size:"relative"},g,":")),Object(d.jsx)(l.EuiFlexItem,{grow:!1},Object(d.jsx)(l.EuiText,{size:"relative"},Object(l.formatDate)(m.lte,u.MAINTENANCE_WINDOW_DATE_FORMAT))))))})),m=e=>!!e,x=Object(n.memo)((e=>{const{maintenanceWindows:t,maintenanceWindowIds:s,isLoading:o,timestamp:i}=e,r=Object(n.useMemo)((()=>{const e=t.length+s.length;return Object(d.jsx)(a.a.Fragment,null,t.map(((t,s)=>Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)(l.EuiToolTip,{key:`${t.id}_tooltip`,content:Object(d.jsx)(j,{maintenanceWindow:t,timestamp:i})},Object(d.jsx)("span",{key:`${t.id}_title`},t.title,s!==e-1&&Object(d.jsx)(a.a.Fragment,null,",  ")))))),s.map(((s,n)=>Object(d.jsx)(a.a.Fragment,null,Object(d.jsx)("span",{key:`${s}_id`},s,n+t.length!==e-1&&Object(d.jsx)(a.a.Fragment,null,",  "))))))}),[t,s,i]);return Object(d.jsx)(l.EuiSkeletonText,{"data-test-subj":"maintenance-window-cell-loading",lines:1,isLoading:o,size:"s"},r)})),O=Object(n.memo)((e=>{var t;const{alert:s,maintenanceWindows:l,isLoading:i}=e,r=Object(n.useMemo)((()=>(s&&s[o.j]||[]).map((e=>l.get(e))).filter(m)),[s,l]),c=Object(n.useMemo)((()=>(s&&s[o.j]||[]).filter((e=>!l.get(e)))),[s,l]);return 0===r.length&&0===c.length?Object(d.jsx)(a.a.Fragment,null,"--"):Object(d.jsx)(x,{maintenanceWindows:r,maintenanceWindowIds:c,isLoading:i,timestamp:s&&(null===(t=s[o.K])||void 0===t?void 0:t[0])})}));O.displayName="maintenanceWindowCell"},281:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(282);case"v8light":return s(284)}},282:function(e,t,s){var n=s(54),a=s(283);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},283:function(e,t,s){(t=s(55)(!1)).push([e.i,".alertsTableHighlightedRow{background-color:#2e2d25}.alertsTableActiveRow{background-color:#343741}",""]),e.exports=t},284:function(e,t,s){var n=s(54),a=s(285);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},285:function(e,t,s){(t=s(55)(!1)).push([e.i,".alertsTableHighlightedRow{background-color:#fff9e8}.alertsTableActiveRow{background-color:#e9edf3}",""]),e.exports=t},359:function(e,t,s){"use strict";s.r(t),s.d(t,"AlertsTable",(function(){return Ve})),s.d(t,"default",(function(){return Ve}));var n=s(12),a=s.n(n),l=s(171),o=s.n(l),i=s(71),r=s(1),c=s.n(r),u=s(3),d=s(4),b=s(24),g=s(0),p=s(36),j=s(19),m=s(219);const x=e=>{const t=[];return e.forEach((e=>{Object.entries(e).forEach((([e,s])=>{t.push({id:e,direction:s.order})}))})),t};s(234);var O=s(31),f=s(235);const h=()=>{const{bulkActions:[{isAllSelected:e,areAllVisibleRowsSelected:t},s]}=Object(r.useContext)(p.a),n=Object(r.useCallback)((e=>{e.target.checked?s({action:j.f.selectCurrentPage}):s({action:j.f.clear})}),[s]);return Object(g.jsx)(u.EuiCheckbox,{id:"selection-toggle","aria-label":f.b,checked:e||t,onChange:n,"data-test-subj":"bulk-actions-header"})},v=c.a.memo(h),C=({rowIndex:e})=>{var t;const{bulkActions:[{rowSelection:s},n]}=Object(r.useContext)(p.a),a=s.has(e),l=a&&(null===(t=s.get(e))||void 0===t?void 0:t.isLoading),o=Object(r.useCallback)((t=>{t.target.checked?n({action:j.f.add,rowIndex:e}):n({action:j.f.delete,rowIndex:e})}),[e,n]);return l?Object(g.jsx)(u.EuiLoadingSpinner,{size:"m","data-test-subj":"row-loader"}):Object(g.jsx)(u.EuiCheckbox,{id:`bulk-actions-row-cell-${e}`,"aria-label":Object(f.e)(e+1),checked:a,onChange:o,"data-test-subj":"bulk-actions-row-cell"})},A=c.a.memo(C),y=Object(r.memo)((e=>{const{visibleRowIndex:t}=e;return Object(g.jsx)(A,{rowIndex:t})})),w=()=>({id:"bulkActions",width:30,headerCellRender:v,rowCellRender:y});var I=s(211),k=s(72),S=s(2),T=s(11),M=s(9);function E({alerts:e,casesConfig:t,query:s,refresh:n,useBulkActionsConfig:a=(()=>[]),featureIds:l,hideBulkActions:o}){const{bulkActions:[c,u]}=Object(r.useContext)(p.a),b=a(s,n),g=Object(r.useCallback)((()=>{u({action:j.f.clear})}),[u]),m=Object(r.useCallback)(((e=!0)=>{u({action:j.f.updateAllLoadingState,isLoading:e})}),[u]),x=(({casesConfig:e,refresh:t,clearSelection:s})=>{const{cases:n}=Object(O.useKibana)().services,a=Object(r.useMemo)((()=>{var t;return null==n?void 0:n.helpers.canUseCases(null!==(t=null==e?void 0:e.owner)&&void 0!==t?t:[])}),[null==e?void 0:e.owner,n]),l=Object(r.useMemo)((()=>null==n?void 0:n.ui.getCasesContext()),[n]),o=Boolean(n&&l),c=Object(r.useCallback)((()=>{t(),s()}),[s,t]),u=null==n?void 0:n.hooks.useCasesAddToNewCaseFlyout({onSuccess:c}),d=null==n?void 0:n.hooks.useCasesAddToExistingCaseModal({onSuccess:c,noAttachmentsToaster:{title:I.g,content:I.c}});return Object(r.useMemo)((()=>o&&u&&d&&null!=a&&a.create&&null!=a&&a.read?[{label:I.b,key:"attach-new-case","data-test-subj":"attach-new-case",disableOnQuery:!0,disabledLabel:I.b,onClick:e=>{var t;const s=e&&null!==(t=null==n?void 0:n.helpers.groupAlertsByRule(e))&&void 0!==t?t:[];u.open({attachments:s})}},{label:I.a,key:"attach-existing-case",disableOnQuery:!0,disabledLabel:I.a,"data-test-subj":"attach-existing-case",onClick:e=>{d.open({getAttachments:({theCase:t})=>{var s;return null==t?e&&null!==(s=null==n?void 0:n.helpers.groupAlertsByRule(e))&&void 0!==s?s:[]:(({alerts:e,caseId:t,groupAlertsByRule:s})=>{var n;const a=((e,t)=>e.filter((e=>!e.data.some((e=>{var s;return e.field===i.b&&(null===(s=e.value)||void 0===s?void 0:s.some((e=>e===t)))})))))(null!=e?e:[],t);return null!==(n=null==s?void 0:s(a))&&void 0!==n?n:[]})({alerts:e,caseId:t.id,groupAlertsByRule:null==n?void 0:n.helpers.groupAlertsByRule})}})}}]:[]),[null==n?void 0:n.helpers,u,o,d,null==a?void 0:a.create,null==a?void 0:a.read])})({casesConfig:t,refresh:n,clearSelection:g}),f=(({setIsBulkActionsLoading:e,refresh:t,clearSelection:s,query:n,featureIds:a=[],isAllSelected:l})=>{var o,i,c,u,b,g;const j=Object(r.useCallback)((()=>{t(),s()}),[s,t]),{application:m}=Object(O.useKibana)().services,{mutateAsync:x}=Object(k.a)(),{mutateAsync:f}=(()=>{const{http:e,notifications:{toasts:t}}=Object(M.useKibana)().services;return Object(d.useMutation)(["untrackAlerts"],(({query:t,featureIds:s})=>{try{const n=JSON.stringify({query:Array.isArray(t)?t:[t],feature_ids:s});return e.post(`${T.INTERNAL_BASE_ALERTING_API_PATH}/alerts/_bulk_untrack_by_query`,{body:n})}catch(e){throw new Error(`Unable to parse bulk untrack by query params: ${e}`)}}),{context:p.b,onError:()=>{t.addDanger(S.i18n.translate("xpack.triggersActionsUI.alertsTable.untrackByQuery.failedMessage",{defaultMessage:"Failed to untrack alerts by query"}))},onSuccess:()=>{t.addSuccess(S.i18n.translate("xpack.triggersActionsUI.alertsTable.untrackByQuery.successMessage",{defaultMessage:"Untracked alerts"}))}})})(),h=null==m||null===(o=m.capabilities.apm)||void 0===o?void 0:o["alerting:show"],v=null==m||null===(i=m.capabilities.infrastructure)||void 0===i?void 0:i.show,C=null==m||null===(c=m.capabilities.logs)||void 0===c?void 0:c.show,A=null==m||null===(u=m.capabilities.uptime)||void 0===u?void 0:u.show,y=null==m||null===(b=m.capabilities.slo)||void 0===b?void 0:b.show,w=null==m||null===(g=m.capabilities.observability)||void 0===g?void 0:g.show,E=Object(r.useCallback)((async t=>{if(!t)return;const s=t.map((e=>e._id)),o=t.map((e=>{var t;return null!==(t=e._index)&&void 0!==t?t:""}));try{e(!0),l?await f({query:n,featureIds:a}):await x({indices:o,alertUuids:s}),j()}finally{e(!1)}}),[n,a,l,j,e,x,f]);return Object(r.useMemo)((()=>null!=m&&m.capabilities&&(h||v||C||A||y||w)?[{label:I.e,key:"mark-as-untracked",disableOnQuery:!1,disabledLabel:I.e,"data-test-subj":"mark-as-untracked",onClick:E}]:[]),[null==m?void 0:m.capabilities,h,v,C,A,y,w,E])})({setIsBulkActionsLoading:m,refresh:n,clearSelection:g,query:s,featureIds:l,isAllSelected:c.isAllSelected}),h=Object(r.useMemo)((()=>[...x,...null!=l&&l.includes("siem")?[]:f]),[x,l,f]),v=Object(r.useMemo)((()=>o?[]:h.length?(({panels:e,items:t})=>e.length>0?(e[0].items&&(e[0].items=[...e[0].items,...t].filter(((e,t,s)=>t===s.findIndex((t=>t.key===e.key))))),e):[{id:0,items:t}])({panels:b,items:h}):b),[b,h,o]),C=0!==v.length;return Object(r.useEffect)((()=>{u({action:j.f.rowCountUpdate,rowCount:e.length})}),[e,u]),Object(r.useMemo)((()=>({isBulkActionsColumnActive:C,getBulkActionsLeadingControlColumn:w,bulkActionsState:c,bulkActions:v,setIsBulkActionsLoading:m,clearSelection:g,updateBulkActionsState:u})),[v,c,g,C,m,u])}const F=75;var z=s(203);s(281);const R=({count:e})=>{const{euiTheme:t}=Object(u.useEuiTheme)(),s=Object(r.useMemo)((()=>{return`${e.toLocaleString()} ${t=e,S.i18n.translate("xpack.triggersActionsUI.alertsTable.alertsCountUnit",{values:{totalCount:t},defaultMessage:"{totalCount, plural, =1 {alert} other {alerts}}"})}`;var t}),[e]);return Object(g.jsx)("span",{"data-test-subj":"toolbar-alerts-count",css:Object(g.css)("font-size:",t.size.m,";font-weight:",t.font.weight.semiBold,";border-right:",t.border.thin,";margin-right:",t.size.s,";padding-right:",t.size.m,";","")},s)},B=S.i18n.translate("xpack.triggersActionsUI.alertsTable.lastUpdated.updating",{defaultMessage:"Updating..."}),L=S.i18n.translate("xpack.triggersActionsUI.alertsTable.lastUpdated.updated",{defaultMessage:"Updated"}),U=c.a.memo((({date:e,prefix:t,updatedAt:s})=>Object(g.jsx)(c.a.Fragment,null,t,Object(g.jsx)(b.FormattedRelative,{"data-test-subj":"last-updated-at-date",key:`formatedRelative-${e}`,value:new Date(s)}))));U.displayName="Updated";const q=` ${L} `,D=c.a.memo((({compact:e=!1,updatedAt:t,showUpdating:s=!1})=>{const[n,a]=Object(r.useState)(Date.now());Object(r.useEffect)((()=>{const e=setInterval((()=>{a(Date.now())}),1e4);return()=>{clearInterval(e)}}),[]);const l=Object(r.useMemo)((()=>s?Object(g.jsx)("span",null," ",B):e?null:Object(g.jsx)(U,{date:n,prefix:q,updatedAt:t})),[e,n,s,t]);return Object(g.jsx)(u.EuiToolTip,{content:Object(g.jsx)(U,{date:n,prefix:q,updatedAt:t})},Object(g.jsx)(u.EuiText,{color:"subdued",size:"xs","data-test-subj":"toolbar-updated-at"},l))}));D.displayName="LastUpdatedAt";var N=s(361),_=s(223);const W=Object(r.lazy)((()=>s.e(58).then(s.bind(null,375)))),P=Object(r.memo)((({controls:e,getInspectQuery:t,showInspectButton:s})=>{const{bulkActions:[n]}=Object(r.useContext)(p.a);return Object(g.jsx)(c.a.Fragment,null,s&&Object(g.jsx)(_.a,{inspectTitle:z.d,getInspectQuery:t}),Object(g.jsx)(D,{updatedAt:n.updatedAt}),null==e?void 0:e.right)})),$=Object(r.memo)((({alertsCount:e,hasBrowserFields:t,columnIds:s,browserFields:n,onResetColumns:a,onToggleColumn:l,fieldBrowserOptions:o})=>Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(R,{count:e}),t&&Object(g.jsx)(N.FieldBrowser,{columnIds:s,browserFields:n,onResetColumns:a,onToggleColumn:l,options:o})))),Q=({columnId:e,alert:t})=>{var s;const n=null!==(s=t&&t[e])&&void 0!==s?s:[];return Array.isArray(n)?Object(g.jsx)(c.a.Fragment,null,n.length?n.join(", "):"--"):Object(g.jsx)(c.a.Fragment,null,n)};Q.displayName="DefaultCell";const G=Object(r.memo)(Q);var H=s(35),V=s(236),K=s(225);const J=Object(g.css)("padding-inline:",H.euiThemeVars.euiSizeXS,";",""),X=e=>{var t;const{alert:s,showAlertStatusWithFlapping:n}=e,{isMuted:a}=Object(K.a)(s);if(!n)return null;const l=null!==(t=s&&s[i.B])&&void 0!==t?t:[];if(Array.isArray(l)&&l.length){var o;const e=null!==(o=s&&s[i.f])&&void 0!==o?o:[];return Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"s"},Object(g.jsx)(V.a,{alertStatus:l.join(),flapping:e[0]}),a&&Object(g.jsx)(u.EuiToolTip,{content:S.i18n.translate("xpack.triggersActionsUI.sections.alertsTable.alertMuted",{defaultMessage:"Alert muted"})},Object(g.jsx)(u.EuiBadge,{iconType:"bellSlash",css:J})))}return Object(g.jsx)(G,e)};X.displayName="AlertLifecycleStatusCell";const Y=Object(r.memo)(X),Z=S.i18n.translate("cases.components.status.open",{defaultMessage:"Open"}),ee=S.i18n.translate("cases.components.status.inProgress",{defaultMessage:"In progress"}),te=S.i18n.translate("cases.components.status.closed",{defaultMessage:"Closed"});let se=function(e){return e.open="open",e["in-progress"]="in-progress",e.closed="closed",e}({});const ne={[se.open]:{color:"primary",label:Z,icon:"folderOpen"},[se["in-progress"]]:{color:"warning",label:ee,icon:"folderExclamation"},[se.closed]:{color:"default",label:te,icon:"folderCheck"}},ae=({status:e,dataTestSubj:t})=>{var s,n;return Object(g.jsx)(u.EuiBadge,{"data-test-subj":t||`case-status-badge-${e}`,color:null===(s=ne[e])||void 0===s?void 0:s.color},null===(n=ne[e])||void 0===n?void 0:n.label)};ae.displayName="Status";const le=Object(r.memo)(ae);var oe={name:"1uc4sf3",styles:"margin-left:auto;flex-grow:0"},ie={name:"qamjgr",styles:"margin-right:4px"};const re=c.a.memo((({count:e,icon:t})=>Object(g.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"none",css:oe},Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiIcon,{css:ie,size:"s",type:t,"data-test-subj":"comment-count-icon"})),Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiText,{size:"xs"},e)))));re.displayName="IconWithCount";const ce=(e,t)=>t<=0||e.length<=t?e:e.slice(0,t).trim().concat("..."),ue=S.i18n.translate("cases.components.tooltip.opened",{defaultMessage:"Opened"}),de=S.i18n.translate("cases.components.tooltip.closed",{defaultMessage:"Closed"}),be=S.i18n.translate("cases.components.tooltip.by",{defaultMessage:"by"}),ge=c.a.memo((({title:e,description:t,status:s,totalComments:n,createdAt:a,createdBy:l})=>{var o,i;return Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"xs",direction:"column"},Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"xs",responsive:!1},Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(le,{status:s})),Object(g.jsx)(re,{count:n,icon:"editorComment"})),Object(g.jsx)(u.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiText,{size:"relative"},Object(g.jsx)("strong",null,ce(e,35)))),Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiText,{size:"relative"},ce(t,80))))),Object(g.jsx)(u.EuiHorizontalRule,{margin:"xs"}),Object(g.jsx)(u.EuiText,{size:"relative"},s===se.closed?de:ue," ",Object(g.jsx)(b.FormattedRelative,{value:a})," ",l.username||l.fullName?Object(g.jsx)(c.a.Fragment,null,be," ",Object(g.jsx)("strong",{"data-test-subj":"tooltip-username"},ce(null!==(o=null!==(i=l.username)&&void 0!==i?i:l.fullName)&&void 0!==o?o:"",15))):null))}));ge.displayName="TooltipContent";const pe=Object(r.memo)(ge);var je={name:"1tpdvqq",styles:"width:240px"},me={name:"1o3679e",styles:"width:70px;margin-bottom:12px"};const xe=()=>Object(g.jsx)(u.EuiFlexItem,{css:je,"data-test-subj":"tooltip-loading-content"},Object(g.jsx)(u.EuiSkeletonTitle,{size:"xxxs",css:me}),Object(g.jsx)(u.EuiSkeletonText,{lines:3}),Object(g.jsx)(u.EuiHorizontalRule,{margin:"xs"}),Object(g.jsx)(u.EuiSpacer,{size:"s"}));xe.displayName="Skeleton";const Oe=xe,fe=c.a.memo((e=>{const{dataTestSubj:t,children:s,loading:n=!1,className:a="",content:l}=e;return Object(g.jsx)(u.EuiToolTip,{"data-test-subj":t||"cases-components-tooltip",anchorClassName:a,content:n?Object(g.jsx)(Oe,null):Object(g.jsx)(pe,l)},Object(g.jsx)(c.a.Fragment,null,s))}));fe.displayName="Tooltip";const he=Object(r.memo)(fe);var ve=s(93),Ce=s(134),Ae=s.n(Ce),ye=s(29);const we=e=>{var t,s;return{title:e.title,description:e.description,createdAt:e.created_at,createdBy:{username:null!==(t=e.created_by.username)&&void 0!==t?t:void 0,fullName:null!==(s=e.created_by.full_name)&&void 0!==s?s:void 0},status:e.status,totalComments:e.totalComment}},Ie=e=>{var t;const{isLoading:s,alert:n,cases:a,caseAppId:l}=e,{navigateToCaseView:o}=(e=>{var t;const{application:{navigateToApp:s,currentAppId$:n}}=Object(ye.b)().services,a=null!==(t=Ae()(n))&&void 0!==t?t:"";return{navigateToCaseView:Object(r.useCallback)((t=>{return s(null!=e?e:a,{deepLinkId:"cases",path:(n=t.caseId,Object(ve.generatePath)("/:caseId",{caseId:n}))});var n}),[s,e,a])}})(l),c=(null!==(t=n&&n[i.b])&&void 0!==t?t:[]).map((e=>a.get(e))).filter((e=>null!=e));return Object(g.jsx)(u.EuiSkeletonText,{lines:1,isLoading:s,size:"s","data-test-subj":"cases-cell-loading"},0!==c.length?c.map(((e,t)=>[t>0&&t<c.length&&", ",Object(g.jsx)(he,{loading:!1,content:we(e),key:e.id},Object(g.jsx)(u.EuiLink,{onClick:()=>o({caseId:e.id}),"data-test-subj":"cases-cell-link"},e.title))])):"--")};Ie.displayName="CasesCell";const ke=Object(r.memo)(Ie);var Se=s(247);const Te=[i.B,i.b,i.j],Me=e=>{const{columnId:t}=e,s=Object(r.useMemo)((()=>({[i.B]:Y,[i.b]:ke,[i.j]:Se.b})),[]);if(s[t]){const n=s[t];return Object(g.jsx)(n,e)}return Object(g.jsx)(G,e)};Me.displayName="SystemCellFactory";const Ee=Object(r.memo)(Me);var Fe=s(186);const ze=Object(r.lazy)((()=>s.e(57).then(s.bind(null,382)))),Re={border:"none",header:"underline",fontSize:"s"},Be={getCellActions:()=>null,visibleCellActions:void 0,disabledCellActions:[]},Le=()=>({}),Ue={},qe=Object(r.memo)((({data:e,columnId:t})=>{var s,n;const a=null!==(s=Array.isArray(e)&&(null===(n=e.find((e=>e.field===t)))||void 0===n?void 0:n.value))&&void 0!==s?s:[];return Array.isArray(a)?Object(g.jsx)(c.a.Fragment,null,a.length?a.join():"--"):Object(g.jsx)(c.a.Fragment,null,a)})),De=Object(r.memo)((e=>{const{columnId:t,cases:s,maintenanceWindows:n,showAlertStatusWithFlapping:l,isLoading:o,isLoadingCases:i,isLoadingMaintenanceWindows:r,casesConfig:c,rowIndex:d,pagination:b,RenderCell:p,ecsData:j,alerts:m}=e,x=d-b.pageSize*b.pageIndex,O=m[x];if(We(t))return Object(g.jsx)(Ee,{alert:O,columnId:t,isLoading:o||i||r,cases:s,maintenanceWindows:n,showAlertStatusWithFlapping:l,caseAppId:null==c?void 0:c.appId});if(O){const s=j[x],n=[];return Object.entries(null!=O?O:{}).forEach((([e,t])=>{n.push({field:e,value:t})})),p&&s?Object(g.jsx)(p,a()({},e,{data:n,ecsData:s})):Object(g.jsx)(qe,{data:n,columnId:t})}return o?Object(g.jsx)(u.EuiSkeletonText,{lines:1}):null})),Ne=Object(r.memo)((()=>Object(g.jsx)("span",{"data-test-subj":"expandColumnHeaderLabel"},z.c))),_e=Object(r.memo)((e=>{const{visibleRowIndex:t,alerts:s,ecsData:n,setFlyoutAlert:a,oldAlertsData:l,id:o,getSetIsActionLoadingCallback:i,refresh:r,clearSelection:c,renderCustomActionsRow:d}=e;return n[t]?Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"none",responsive:!1},d({alert:s[t],ecsAlert:n[t],nonEcsData:l[t],rowIndex:t,setFlyoutAlert:a,id:o,cveProps:e,setIsActionLoading:i(t),refresh:r,clearSelection:c})):null})),We=e=>Te.includes(e),Pe={name:"1q0m38q",styles:"height:1lh"};var $e={name:"1nn5iez",styles:"line-height:unset"};const Qe=({error:e})=>Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(u.EuiFlexGroup,{gutterSize:"s",alignItems:"center",css:Pe},Object(g.jsx)(u.EuiFlexItem,{grow:!1},Object(g.jsx)(u.EuiIcon,{type:"error",color:"danger"})),Object(g.jsx)(u.EuiFlexItem,null,Object(g.jsx)(u.EuiText,{color:"subdued",size:"xs",css:$e},Object(g.jsx)("strong",null,Object(g.jsx)(b.FormattedMessage,{id:"xpack.triggersActionsUI.sections.alertTable.viewError",defaultMessage:"An error occurred"}))))),Object(g.jsx)(u.EuiSpacer,null),Object(g.jsx)(u.EuiCodeBlock,{isCopyable:!0},e.stack)),Ge=o()("div",{target:"enrwa930"})({name:"u4fncx",styles:"display:flex;min-width:fit-content"}),He=Object(r.memo)((({alertsData:e,isLoading:t,pagination:s,actualGridStyle:n,visibleColumns:a,Cell:l,stripes:o})=>Object(g.jsx)(c.a.Fragment,null,e.concat(t?Array.from({length:s.pageSize-e.length}):[]).map(((e,t)=>{var i,r;return Object(g.jsx)(Ge,{role:"row",key:`${t},${s.pageIndex}`,className:`euiDataGridRow ${o&&t%2!=0?"euiDataGridRow--striped":""} ${null!==(i=null===(r=n.rowClasses)||void 0===r?void 0:r[t])&&void 0!==i?i:""}`},a.map(((e,s)=>Object(g.jsx)(l,{colIndex:s,visibleRowIndex:t,key:`${t},${s}`}))))}))))),Ve=Object(r.memo)((e=>{var t,s,n;const{visibleColumns:a,onToggleColumn:l,onResetColumns:o,browserFields:b,onChangeVisibleColumns:O,onColumnResize:f,showAlertStatusWithFlapping:h=!1,showInspectButton:v=!1,cellContext:C,leadingControlColumns:A,trailingControlColumns:y,alertsTableConfiguration:w,pagination:I,columns:k,alerts:S,alertsCount:T,isLoading:M,oldAlertsData:z,ecsAlertsData:B,onSortChange:L,onPageChange:U,sort:q,refetch:D,getInspectQuery:N,rowHeightsOptions:Q,dynamicRowHeight:G,query:H,featureIds:V,cases:{data:K,isLoading:J},maintenanceWindows:{data:X,isLoading:Y},controls:Z,toolbarVisibility:ee,shouldHighlightRow:te,fieldFormats:se}=e,ne=Object(r.useRef)(null),[ae,le]=Object(r.useState)({}),oe=Object(d.useQueryClient)({context:p.b}),{sortingColumns:ie,onSort:re}=function(e,t,s=m.a){const[n,a]=Object(r.useMemo)((()=>{const e=[],n=[];return s.forEach((s=>{t.includes(Object.keys(s)[0])?e.push(s):n.push(...x([s]))})),[e,n]}),[s,t]),[l,o]=Object(r.useState)(x(n));return{sortingColumns:l,onSort:Object(r.useCallback)((t=>{e([...t,...a]),o(t)}),[e,a])}}(L,a,q),{renderCustomActionsRow:ce,actionsColumnWidth:ue,getSetIsActionLoadingCallback:de}=(({options:e})=>{const{bulkActions:[,t]}=Object(r.useContext)(p.a),s=Object(r.useCallback)((()=>({renderCustomActionsRow:void 0,width:void 0})),[]),n=e||s,{renderCustomActionsRow:a,width:l=F}=n(),o=Object(r.useCallback)((e=>(s=!0)=>{t({action:j.f.updateRowLoadingState,rowIndex:e,isLoading:s})}),[t]);return Object(r.useMemo)((()=>({renderCustomActionsRow:a,actionsColumnWidth:l,getSetIsActionLoadingCallback:o})),[a,l,o])})({options:w.useActionsColumn}),be=null===(t=w.useFetchPageContext)||void 0===t?void 0:t.call(w,{alerts:S,columns:k}),ge=Object(r.useMemo)((()=>({alerts:S,casesConfig:w.cases,query:H,useBulkActionsConfig:w.useBulkActions,refresh:D,featureIds:V,hideBulkActions:Boolean(w.hideBulkActions)})),[S,w,H,D,V]),{isBulkActionsColumnActive:pe,getBulkActionsLeadingControlColumn:je,bulkActionsState:me,bulkActions:xe,setIsBulkActionsLoading:Oe,clearSelection:fe}=E(ge),he=Object(r.useCallback)((()=>{D(),oe.invalidateQueries(Fe.a.cases()),oe.invalidateQueries(Fe.a.mutedAlerts()),oe.invalidateQueries(Fe.a.maintenanceWindows())}),[D,oe]),ve=Object(r.useCallback)((()=>{he(),fe()}),[fe,he]),{pagination:Ce,onChangePageSize:Ae,onChangePageIndex:ye,onPaginateFlyout:we,flyoutAlertIndex:Ie,setFlyoutAlertIndex:ke}=function({onPageChange:e,pageIndex:t,pageSize:s}){const{bulkActions:[,n]}=Object(r.useContext)(p.a),[a,l]=Object(r.useState)({pageIndex:t,pageSize:s}),[o,i]=Object(r.useState)(-1),c=Object(r.useCallback)((t=>{l((e=>({...e,pageSize:t,pageIndex:0}))),n({action:j.f.clear}),e({pageIndex:0,pageSize:t})}),[n,e]),u=Object(r.useCallback)((t=>{l((e=>({...e,pageIndex:t}))),n({action:j.f.clear}),e({pageIndex:t,pageSize:a.pageSize})}),[n,e,a.pageSize]),d=Object(r.useCallback)((e=>{i((t=>{if(e<0)return u(0),0;const s=a.pageSize*a.pageIndex+t;if(e===s)return t;const n=Math.floor(e/a.pageSize),l=e>=a.pageSize*n?e-a.pageSize*n:e;return u(n),l}))}),[u,a.pageIndex,a.pageSize]);return Object(r.useEffect)((()=>{l((e=>{const n={...e};let a=!1;return e.pageIndex!==t&&(a=!0,n.pageIndex=t),e.pageSize!==s&&(a=!0,n.pageSize=s),!0===a?n:e}))}),[t,s]),{pagination:a,onChangePageSize:c,onChangePageIndex:u,onPaginateFlyout:d,flyoutAlertIndex:o,setFlyoutAlertIndex:i}}({onPageChange:U,pageIndex:I.pageIndex,pageSize:I.pageSize}),Se=Object(r.useCallback)((e=>{const t=S.findIndex((t=>t[i.E].includes(e)));ke(t)}),[S,ke]),Te=((e,t)=>e(Object(r.useMemo)((()=>({onToggleColumn:t})),[t])))(null!==(s=w.useFieldBrowserOptions)&&void 0!==s?s:Le,l),Me=(({bulkActions:e,alertsCount:t,rowSelection:s,alerts:n,isLoading:a,columnIds:l,onToggleColumn:o,onResetColumns:i,browserFields:u,setIsBulkActionsLoading:d,clearSelection:b,controls:p,refresh:j,fieldBrowserOptions:m,getInspectQuery:x,showInspectButton:O,toolbarVisibilityProp:f})=>{const h=s.size,v=(({alertsCount:e,columnIds:t,onToggleColumn:s,onResetColumns:n,browserFields:a,controls:l,fieldBrowserOptions:o,getInspectQuery:i,showInspectButton:c,toolbarVisibilityProp:u})=>Object(r.useMemo)((()=>{const r=Object.keys(a).length>0;return{additionalControls:{right:Object(g.jsx)(P,{controls:l,getInspectQuery:i,showInspectButton:c}),left:{append:Object(g.jsx)($,{alertsCount:e,hasBrowserFields:r,columnIds:t,browserFields:a,onResetColumns:n,onToggleColumn:s,fieldBrowserOptions:o})}},showColumnSelector:{allowHide:!1},showSortSelector:!0}}),[e,a,t,o,i,n,s,c,l]))(Object(r.useMemo)((()=>({alertsCount:t,columnIds:l,onToggleColumn:o,onResetColumns:i,browserFields:u,controls:p,fieldBrowserOptions:m,getInspectQuery:x,showInspectButton:O})),[t,l,o,i,u,p,m,x,O]));return Object(r.useMemo)((()=>0===h||void 0===h||0===e.length?{...v,...null!=f?f:{}}:{showColumnSelector:!1,showSortSelector:!1,additionalControls:{right:Object(g.jsx)(P,{controls:p,getInspectQuery:x,showInspectButton:O}),left:{append:Object(g.jsx)(c.a.Fragment,null,Object(g.jsx)(R,{count:t}),Object(g.jsx)(r.Suspense,{fallback:null},Object(g.jsx)(W,{totalItems:t,panels:e,alerts:n,setIsBulkActionsLoading:d,clearSelection:b,refresh:j})))}},...null!=f?f:{}}),[t,e,v,h,f,n,b,j,d,p,x,O])})(Object(r.useMemo)((()=>({bulkActions:xe,alertsCount:T,rowSelection:me.rowSelection,alerts:S,isLoading:M,columnIds:a,onToggleColumn:l,onResetColumns:o,browserFields:b,controls:Z,setIsBulkActionsLoading:Oe,clearSelection:fe,refresh:ve,fieldBrowserOptions:Te,getInspectQuery:N,showInspectButton:v,toolbarVisibilityProp:ee})),[xe,T,me,M,a,l,o,b,Oe,fe,ve,Te,N,v,ee,S,Z])),Ee=Object(r.useMemo)((()=>ce?{id:"expandColumn",width:ue,headerCellRender:Ne,rowCellRender:_e}:void 0),[ce,ue]),qe=Object(r.useMemo)((()=>pe?je():void 0),[pe,je]),We=Object(r.useMemo)((()=>{const e=[...null!=A?A:[],...qe?[qe]:[],...Ee?[Ee]:[]];return e.length?e:void 0}),[qe,Ee,A]),Pe=Ie+I.pageIndex*I.pageSize;Object(r.useEffect)((()=>{le({[Pe]:"alertsTableActiveRow"})}),[Pe]);const $e=Object(r.useCallback)((()=>ke(-1)),[ke]),Ge=Object(r.useMemo)((()=>{var t;return null!==(t=e.alertsTableConfiguration)&&void 0!==t&&t.getRenderCellValue?e.alertsTableConfiguration.getRenderCellValue:De}),[e.alertsTableConfiguration]),Ve=Object(r.useMemo)((()=>({...C||{},...w,ecsData:B,oldAlertsData:z,context:be,alerts:S,browserFields:b,pagination:Ce,isLoading:M,setFlyoutAlert:Se,RenderCell:Ge,isLoadingCases:J,isLoadingMaintenanceWindows:Y,getSetIsActionLoadingCallback:de,cases:K,maintenanceWindows:X,showAlertStatusWithFlapping:h,refresh:ve,clearSelection:fe,renderCustomActionsRow:ce,fieldFormats:se})),[C,w,B,z,ve,fe,ce,Se,Ge,b,M,Ce,S,J,Y,K,X,h,de,be,se]),Ke=Object(r.useMemo)((()=>{var t,s,n;return null!==(t=null===(s=e.alertsTableConfiguration)||void 0===s||null===(n=s.getRenderCellPopover)||void 0===n?void 0:n.call(s,{context:Ve}))&&void 0!==t?t:e.renderCellPopover}),[e.alertsTableConfiguration,e.renderCellPopover,Ve]),Je=Object(r.useMemo)((()=>Ke?e=>{try{const t=e.rowIndex-I.pageSize*I.pageIndex,s=S[t];return s?Ke({...e,alert:s}):null}catch(e){return Object(g.jsx)(Qe,{error:e})}}:void 0),[S,I.pageIndex,I.pageSize,Ke]),Xe=Object(r.useMemo)((()=>({pageIndex:Ce.pageIndex,pageSize:Ce.pageSize,pageSizeOptions:e.pageSizeOptions,onChangeItemsPerPage:Ae,onChangePage:ye})),[ye,Ae,Ce.pageIndex,Ce.pageSize,e.pageSizeOptions]),{getCellActions:Ye,visibleCellActions:Ze,disabledCellActions:et}=null!=w&&w.useCellActions?null==w?void 0:w.useCellActions({columns:k,data:z,ecsData:B,dataGridRef:ne,pageSize:I.pageSize,pageIndex:I.pageIndex}):Be,tt=Object(r.useMemo)((()=>Ye?k.map(((e,t)=>{var s;return{...e,...(null!=et?et:[]).includes(e.id)?{}:{cellActions:null!==(s=Ye(e.id,t))&&void 0!==s?s:[],visibleCellActions:Ze}}})):k),[Ye,et,k,Ze]),st=Object(r.useMemo)((()=>{if(te){const e={};return S.reduce(((e,t,s)=>(te(t)&&(e[s+I.pageIndex*I.pageSize]="alertsTableHighlightedRow"),e)),e)}return Ue}),[te,S,I.pageIndex,I.pageSize]),nt=Object(r.useMemo)((()=>{var t;const s=null!==(t=e.gridStyle)&&void 0!==t?t:{};return{...Re,...s,rowClasses:{...st,...ae}}}),[ae,st,e.gridStyle]),at=Object(r.useMemo)((()=>{var t;const s=null!==(t=e.gridStyle)&&void 0!==t?t:{};if(s.rowClasses){const e=[...Object.keys(nt.rowClasses||{}),...Object.keys(s.rowClasses||{})],t=Array.from(new Set(e)).reduce(((e,t)=>{var n,a;const l=parseInt(t,10);return e[l]=(null===(n=nt.rowClasses)||void 0===n?void 0:n[l])||(null===(a=s.rowClasses)||void 0===a?void 0:a[l])||"",e}),{});nt.rowClasses=t}return nt}),[e.gridStyle,nt]),lt=Object(r.useCallback)((({visibleColumns:t,Cell:s})=>{var n;return Object(g.jsx)(He,{visibleColumns:t,Cell:s,actualGridStyle:at,alertsData:z,pagination:I,isLoading:M,stripes:null===(n=e.gridStyle)||void 0===n?void 0:n.stripes})}),[at,z,I,M,null===(n=e.gridStyle)||void 0===n?void 0:n.stripes]),ot=Object(r.useMemo)((()=>({columns:ie,onSort:re})),[ie,re]),it=Object(r.useMemo)((()=>({visibleColumns:a,setVisibleColumns:O})),[a,O]);return Object(g.jsx)(_.b,null,Object(g.jsx)("section",{style:{width:"100%"},"data-test-subj":e["data-test-subj"]},Object(g.jsx)(r.Suspense,{fallback:null},Ie>-1&&Object(g.jsx)(ze,{alert:S[Ie],alertsCount:T,onClose:$e,alertsTableConfiguration:w,flyoutIndex:Ie+I.pageIndex*I.pageSize,onPaginate:we,isLoading:M,id:e.id})),T>0&&Object(g.jsx)(u.EuiDataGrid,{"aria-label":"Alerts table","data-test-subj":"alertsTable",columns:tt,columnVisibility:it,trailingControlColumns:y,leadingControlColumns:We,rowCount:T,renderCellValue:De,gridStyle:at,sorting:ot,toolbarVisibility:Me,cellContext:Ve,pagination:Xe,rowHeightsOptions:Q,onColumnResize:f,ref:ne,renderCustomGridBody:G?lt:void 0,renderCellPopover:Je})))}));Ve.displayName="AlertsTable"}}]);