/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[38],{108:function(e,t,n){"use strict";n.r(t),n.d(t,"RuleStatusDropdown",(function(){return m})),n.d(t,"futureTimeToInterval",(function(){return k})),n.d(t,"default",(function(){return m}));var s=n(1),a=n.n(s),o=n(33),i=n.n(o),r=n(2),c=n(145),l=n(11),u=n(3),d=n(29),b=n(169),j=n(17),g=n(160),f=n(188),x=n(0);const O="LL @ LT",m=({rule:e,onRuleChanged:t,disableRule:n,enableRule:o,snoozeRule:r,unsnoozeRule:b,isEditable:m,hideSnoozeOption:k=!1,direction:C="column"})=>{const{notifications:{toasts:w},i18n:z,theme:M}=Object(d.b)().services,[A,D]=Object(s.useState)(!1),[P,R]=Object(s.useState)(!1),[I,T]=Object(s.useState)(!1),L=!k&&Object(j.d)(e),U=Object(s.useCallback)((()=>R((e=>!e))),[R]),_=Object(s.useCallback)((()=>R(!1)),[R]),B=Object(s.useCallback)((async()=>{const{errors:e}=await o();if(!e.length)return;const t=Object(l.parseRuleCircuitBreakerErrorMessage)(e[0].message);throw w.addDanger({title:t.summary,...t.details&&{text:Object(c.a)(Object(x.jsx)(g.a,null,t.details),{i18n:z,theme:M})}}),new Error}),[z,M,o,w]),F=Object(s.useCallback)((async()=>{D(!0);try{await B(),t()}finally{D(!1)}}),[t,B]),W=Object(s.useCallback)((async e=>{D(!0);try{await n(e),t()}finally{D(!1)}}),[t,n]),N=Object(s.useCallback)((()=>{T(!0)}),[]),K=Object(s.useCallback)((()=>{T(!1)}),[]),$=Object(s.useCallback)((e=>{K(),W(e)}),[K,W]),q=Object(s.useCallback)((async t=>{e.enabled!==t&&(t?await F():N())}),[e.enabled,F,N]),G=Object(s.useCallback)((async e=>{try{await r(e),t()}finally{_()}}),[r,t,_]),H=Object(s.useCallback)((async e=>{try{await b(e),t()}finally{_()}}),[b,t,_]),J=e.enabled?L?"warning":"primary":"default",Q=e.enabled?L?S:h:y,V=e.enabled&&L?Object(x.jsx)(u.EuiToolTip,{content:e.muteAll?E:i()(new Date(e.isSnoozedUntil)).format(O)},Object(x.jsx)(u.EuiText,{color:"subdued",size:"xs"},e.muteAll?E:i()(new Date(e.isSnoozedUntil)).fromNow(!0))):null,X=Object(x.jsx)(u.EuiBadge,{color:J,"data-test-subj":"statusDropdownReadonly"},Q),Y=Object(x.jsx)(u.EuiBadge,{"data-test-subj":"ruleStatusDropdownBadge",color:J,iconSide:"right",iconType:!A&&m?"arrowDown":void 0,onClick:U,iconOnClick:U,onClickAriaLabel:v,iconOnClickAriaLabel:v,isDisabled:A},Q,A&&Object(x.jsx)(u.EuiLoadingSpinner,{style:{marginLeft:"4px",marginRight:"4px"},size:"s"}));return Object(x.jsx)(a.a.Fragment,null,Object(x.jsx)(u.EuiFlexGroup,{direction:C,alignItems:"row"===C?"center":"flexStart",justifyContent:"flexStart",gutterSize:"row"===C?"s":"xs",responsive:!1},Object(x.jsx)(u.EuiFlexItem,{grow:!1},m?Object(x.jsx)(u.EuiPopover,{button:Y,isOpen:P&&m,closePopover:_,panelPaddingSize:"s","data-test-subj":"statusDropdown",title:Q},Object(x.jsx)(p,{onClosePopover:_,onChangeEnabledStatus:q,isEnabled:e.enabled,isSnoozed:L,snoozeEndTime:e.isSnoozedUntil,hideSnoozeOption:k,snoozeRule:G,unsnoozeRule:H,scheduledSnoozes:e.snoozeSchedule,activeSnoozes:e.activeSnoozes})):X),Object(x.jsx)(u.EuiFlexItem,{"data-test-subj":"remainingSnoozeTime",grow:!1},V)),I&&Object(x.jsx)(f.a,{onConfirm:$,onCancel:K}))},p=({onChangeEnabledStatus:e,onClosePopover:t,isEnabled:n,isSnoozed:o,snoozeEndTime:r,hideSnoozeOption:c=!1,snoozeRule:l,unsnoozeRule:d,scheduledSnoozes:j=[],activeSnoozes:g=[]})=>{const f=Object(s.useCallback)((()=>{o?d():e(!0),t()}),[e,t,d,o]),m=Object(s.useCallback)((()=>{e(!1),t()}),[e,t]);let p=Object(x.jsx)(u.EuiText,{size:"s"},C);o&&r&&(p=Object(x.jsx)(a.a.Fragment,null,Object(x.jsx)(u.EuiText,{size:"s"},C)," ",Object(x.jsx)(u.EuiText,{size:"xs",color:"subdued"},i()(r).format(O))));const S=[{id:0,width:360,items:[{name:h,icon:n&&!o?"check":"empty",onClick:f,"data-test-subj":"statusDropdownEnabledItem"},{name:y,icon:n?"empty":"check",onClick:m,"data-test-subj":"statusDropdownDisabledItem"},...c?[]:[{name:p,icon:n&&o?"check":"empty",panel:1,disabled:!n,"data-test-subj":"statusDropdownSnoozeItem"}]]},...c?[]:[{id:1,width:400,title:C,content:Object(x.jsx)(u.EuiPanel,{paddingSize:"none",hasShadow:!1},Object(x.jsx)(b.a,{interval:k(r),showCancel:o,snoozeRule:l,unsnoozeRule:d,scheduledSnoozes:j,activeSnoozes:g,hasTitle:!1}))}]];return Object(x.jsx)(u.EuiContextMenu,{"data-test-subj":"ruleStatusMenu",initialPanelId:0,panels:S})},k=e=>{if(!e)return;const t=i()(e).locale("en").fromNow(!0),[n,s]=t.split(" ");let a,o="a"===n||"an"===n?1:parseInt(n,10);switch(s){case"year":case"years":a="M",o*=12;break;case"month":case"months":a="M";break;case"day":case"days":a="d";break;case"hour":case"hours":a="h";break;case"minute":case"minutes":a="m"}return a?`${o}${a}`:void 0},h=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.enabledRuleStatus",{defaultMessage:"Enabled"}),y=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.disabledRuleStatus",{defaultMessage:"Disabled"}),S=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozedRuleStatus",{defaultMessage:"Snoozed"}),C=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeMenuTitle",{defaultMessage:"Snooze"}),v=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusDropdownMenuLabel",{defaultMessage:"Change rule status or snooze"}),E=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.remainingSnoozeIndefinite",{defaultMessage:"Indefinitely"})},134:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(94),a=n(1),o=s.__importDefault(n(135));t.default=function(e,t){var n=a.useState(t),s=n[0],i=n[1];return o.default((function(){var t=e.subscribe(i);return function(){return t.unsubscribe()}}),[e]),s}},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;t.default=a},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var s=void 0;t.setEuiDevProviderWarning=function(e){return s=e},t.getEuiDevProviderWarning=function(){return s},t.emitEuiProviderWarning=function(e){if("function"==typeof s)return s(e);switch(s){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},144:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var s=n(12),a=n.n(s),o=n(1),i=n(99),r=n(142),c=n(134),l=n.n(c),u=n(97),d=n.n(u),b=n(3);const j="eui-global",g="eui-utilities",f={darkMode:!1};var x=n(0);const O=[b.euiStylisPrefixer],m=d()({key:"css",stylisPlugins:O,container:document.querySelector('meta[name="emotion"]')}),p=d()({key:j,stylisPlugins:O,container:document.querySelector(`meta[name="${j}"]`)}),k=d()({key:g,stylisPlugins:O,container:document.querySelector(`meta[name="${g}"]`)});m.compat=!0,p.compat=!0,k.compat=!0;const h={default:m,global:p,utility:k},y=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:s,children:a})=>{const i=l()(e,f),r=Object(o.useMemo)((()=>(e=>e.darkMode?b.COLOR_MODES_STANDARD.dark:b.COLOR_MODES_STANDARD.light)(i)),[i]),c=n||r,u=!1!==t&&void 0;return Object(x.jsx)(b.EuiProvider,{cache:h,modify:s,colorMode:c,globalStyles:u,utilityClasses:u},a)},S=({children:e,i18n:t,...n})=>Object(i.useIsNestedEuiProvider)()?(Object(r.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(x.jsx)(t.Context,null,e)):Object(x.jsx)(y,n,Object(x.jsx)(t.Context,null,e));var C=n(100);const v=({children:e,...t})=>Object(x.jsx)(S,a()({globalStyles:!1},t),Object(x.jsx)(C.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(x.jsx)(C.KibanaErrorBoundary,null,e)))},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var s=n(1),a=n(96),o=n.n(a),i=n(144),r=n(0);const c=(e,t)=>n=>(o.a.render(Object(r.jsx)(i.a,t,e),n),()=>o.a.unmountComponentAtNode(n));n(16),n(2),s.Component},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var s=n(2),a=n(1),o=n.n(a),i=n(3),r=n(0);const c=s.i18n.translate("xpack.triggersActionsUI.components.toastWithCircuitBreaker.seeFullError",{defaultMessage:"See full error"}),l=s.i18n.translate("xpack.triggersActionsUI.components.toastWithCircuitBreaker.hideFullError",{defaultMessage:"Hide full error"}),u=({children:e})=>{const[t,n]=Object(a.useState)(!1),s=Object(a.useCallback)((()=>{n((e=>!e))}),[]);return Object(r.jsx)(o.a.Fragment,null,t&&Object(r.jsx)(o.a.Fragment,null,Object(r.jsx)(i.EuiText,{size:"s"},e),Object(r.jsx)(i.EuiSpacer,null)),Object(r.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},Object(r.jsx)(i.EuiFlexItem,{grow:!1},Object(r.jsx)(i.EuiButton,{size:"s",color:"danger",onClick:s},t?l:c))))}},188:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var s=n(1),a=n(2),o=n(3),i=n(0);const r=a.i18n.translate("xpack.triggersActionsUI.sections.untrackAlertsModal.title",{defaultMessage:"Disable rule"}),c=a.i18n.translate("xpack.triggersActionsUI.sections.untrackAlertsModal.confirmButtonText",{defaultMessage:"Disable"}),l=a.i18n.translate("xpack.triggersActionsUI.sections.untrackAlertsModal.cancelButtonText",{defaultMessage:"Cancel"}),u=a.i18n.translate("xpack.triggersActionsUI.sections.untrackAlertsModal.toggleLabel",{defaultMessage:"Change alert statuses from active to untracked"}),d=e=>{const{onCancel:t,onConfirm:n}=e,[a,d]=Object(s.useState)(!1),b=Object(s.useCallback)((e=>{d(e.target.checked)}),[]);return Object(i.jsx)(o.EuiConfirmModal,{"data-test-subj":"untrackAlertsModal",title:r,onCancel:t,onConfirm:()=>n(a),confirmButtonText:c,cancelButtonText:l},Object(i.jsx)(o.EuiSwitch,{"data-test-subj":"untrackAlertsModalSwitch",label:u,checked:a,onChange:b}))}}}]);