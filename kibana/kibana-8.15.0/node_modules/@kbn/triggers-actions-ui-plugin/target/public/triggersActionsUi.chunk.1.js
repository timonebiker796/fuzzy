/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[1],{169:function(e,t,s){"use strict";s.d(t,"a",(function(){return E})),s.d(t,"b",(function(){return f}));var n=s(1),a=s.n(n),l=s(261),r=s(2),u=s(24),o=s(3),i=s(33),c=s.n(i),d=s(26);const b=[[1,"h"],[3,"h"],[8,"h"],[1,"d"]];var g=s(238);const j=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.minutesLabel",{defaultMessage:"minutes"}),h=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.hoursLabel",{defaultMessage:"hours"}),m=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.daysLabel",{defaultMessage:"days"}),x=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.weeksLabel",{defaultMessage:"weeks"}),O=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.monthsLabel",{defaultMessage:"months"}),S={m:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneMinute",{defaultMessage:"1 minute"}),h:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneHour",{defaultMessage:"1 hour"}),d:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneDay",{defaultMessage:"1 day"}),w:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneWeek",{defaultMessage:"1 week"}),M:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneMonth",{defaultMessage:"1 month"})},p="triggersActionsUi_previousSnoozeInterval",f=e=>{if(!e)return;const t=c()(e).locale("en").fromNow(!0),[s,n]=t.split(" ");let a,l="a"===s||"an"===s?1:parseInt(s,10);switch(n){case"year":case"years":a="M",l*=12;break;case"month":case"months":a="M";break;case"day":case"days":a="d";break;case"hour":case"hours":a="h";break;case"minute":case"minutes":a="m"}return a?`${l}${a}`:void 0},y=(e,t)=>1===e?S[t]:c.a.duration(e,t).humanize();var k=s(0);const v=({isLoading:e,interval:t="3d",snoozeRule:s,unsnoozeRule:l,showCancel:i,showAddSchedule:S=!0,scheduledSnoozes:f,activeSnoozes:v,navigateToScheduler:E,onRemoveAllSchedules:z,hasTitle:I,inPopover:M=!1})=>{const[A,C]=Object(n.useState)(Object(d.g)(t).value),[L,w]=Object(n.useState)(Object(d.g)(t).unit),[U,R]=Object(n.useState)(!1),[F,W]=Object(n.useState)(!1),[T,D]=(e=>{let t=localStorage.getItem(p);if(t)try{Object(d.g)(t)}catch(e){t=null,localStorage.removeItem(p)}const s=t,[a,l]=Object(n.useState)(s);return[a,e=>{localStorage.setItem(p,e),l(e)}]})(),{euiTheme:Y}=Object(o.useEuiTheme)(),N=Object(n.useCallback)((({target:e})=>C(e.value)),[C]),_=Object(n.useCallback)((({target:e})=>w(e.value)),[w]),B=Object(n.useCallback)(((e,t)=>{if(t){if(t.startsWith("-"))throw new Error("Cannot store a negative interval");D(t)}const n={id:null,duration:-1===e?-1:Date.parse(e)-Date.now(),rRule:{dtstart:(new Date).toISOString(),count:1,tzid:c.a.tz.guess()}};return s(n)}),[D,s]),P=Object(n.useCallback)((async(e,t)=>{if(-1===e)await B(-1,null);else if(0!==e){const s=c()().add(e,t).toISOString();await B(s,`${e}${t}`)}else await l()}),[B,l]),H=Object(n.useCallback)((()=>P(-1)),[P]),G=Object(n.useCallback)((()=>P(A,L)),[P,A,L]),q=Object(n.useCallback)((()=>{P(0,"m"),W(!1)}),[P,W]),$=Object(n.useCallback)((()=>{0===v.length?q():W(!0)}),[v,W,q]),K=Object(n.useCallback)((()=>E()),[E]),V=Object(n.useCallback)((e=>()=>E(e)),[E]),J=Object(n.useCallback)((()=>{R(!1),z(f.filter((e=>e.id)).map((e=>e.id)))}),[z,f]),Q=Object(n.useMemo)((()=>f?f.filter((e=>Boolean(e.id))).length:0),[f]),X=Object(n.useMemo)((()=>Q>0),[Q]),Z=T?Object(d.g)(T):null,ee=(null==Z?void 0:Z.value)===A&&(null==Z?void 0:Z.unit)===L,te=Z&&!ee&&Object(k.jsx)(a.a.Fragment,null,Object(k.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiButtonEmpty,{flush:"left",size:"s",iconType:"refresh","data-test-subj":"ruleSnoozePreviousButton",onClick:()=>P(Z.value,Z.unit)},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.previousSnooze",{defaultMessage:"Previous"}))),Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiText,{color:"subdued",size:"s","data-test-subj":"ruleSnoozePreviousText"},y(Z.value,Z.unit)))),Object(k.jsx)(o.EuiHorizontalRule,{margin:"s"}));return Object(k.jsx)(a.a.Fragment,null,I&&Object(k.jsx)(o.EuiPopoverTitle,{"data-test-subj":"snoozePanelTitle"},Object(k.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiIcon,{type:"bellSlash"})),Object(k.jsx)(o.EuiFlexItem,null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelTitle",{defaultMessage:"Snooze notifications"}))),Object(k.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(k.jsx)(o.EuiFlexItem,null,Object(k.jsx)(o.EuiText,{textAlign:"left",size:"xs",color:"subdued"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.addScheduleDescription",{defaultMessage:"Silence actions immediately or schedule downtimes."}))))),Object(k.jsx)(o.EuiFlexGroup,{"data-test-subj":"snoozePanel",gutterSize:"xs"},Object(k.jsx)(o.EuiFlexItem,null,Object(k.jsx)(o.EuiFieldNumber,{min:1,value:A,onChange:N,"aria-label":r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelIntervalValueLabel",{defaultMessage:"Snooze interval value"}),"data-test-subj":"ruleSnoozeIntervalValue"})),Object(k.jsx)(o.EuiFlexItem,{grow:2},Object(k.jsx)(o.EuiSelect,{id:Object(o.useGeneratedHtmlId)({prefix:"snoozeUnit"}),value:L,onChange:_,"aria-label":r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelIntervalUnitLabel",{defaultMessage:"Snooze interval unit"}),options:[{value:"m",text:j},{value:"h",text:h},{value:"d",text:m},{value:"w",text:x},{value:"M",text:O}],"data-test-subj":"ruleSnoozeIntervalUnit"})),Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiButton,{disabled:!A||A<1,isLoading:e,onClick:G,"data-test-subj":"ruleSnoozeApply",minWidth:0},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.applySnooze",{defaultMessage:"Apply"})))),Object(k.jsx)(o.EuiHorizontalRule,{margin:"s"}),te,Object(k.jsx)(o.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(k.jsx)(o.EuiFlexItem,null,Object(k.jsx)(o.EuiTitle,{size:"xxxs"},Object(k.jsx)("h5",null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeCommonlyUsed",{defaultMessage:"Commonly used"})))),Object(k.jsx)(o.EuiFlexItem,null),b.map((([e,t])=>Object(k.jsx)(o.EuiFlexItem,{key:`snooze-${e}${t}`},Object(k.jsx)(o.EuiLink,{"data-test-subj":`linkSnooze${e}${t}`,onClick:()=>P(e,t)},y(e,t)))))),Object(k.jsx)(o.EuiHorizontalRule,{margin:"s"}),Object(k.jsx)(o.EuiFlexGroup,null,Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiButtonEmpty,{flush:"left",size:"s",onClick:H,"data-test-subj":"ruleSnoozeIndefiniteApply"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeIndefinitely",{defaultMessage:"Snooze indefinitely"})))),S?Object(k.jsx)(a.a.Fragment,null,Object(k.jsx)(o.EuiHorizontalRule,{margin:"s"}),!X&&Object(k.jsx)(a.a.Fragment,null,Object(k.jsx)(o.EuiFlexGroup,null,Object(k.jsx)(o.EuiFlexItem,{grow:!0},Object(k.jsx)(o.EuiButton,{fill:!0,color:"primary",onClick:K,"data-test-subj":"ruleAddSchedule",iconType:"calendar"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.addSchedule",{defaultMessage:"Add schedule"}))))),X&&Object(k.jsx)(a.a.Fragment,null,Object(k.jsx)(o.EuiFlexGroup,{alignItems:"center"},Object(k.jsx)(o.EuiFlexItem,null,Object(k.jsx)(o.EuiTitle,{size:"xxxs"},Object(k.jsx)("h5",null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeSchedulesTitle",{defaultMessage:"Schedules"})))),Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiButtonEmpty,{color:"danger",size:"xs",onClick:()=>R(!0),"data-test-subj":"ruleRemoveAllSchedules"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.removeAllButton",{defaultMessage:"Remove all"})))),Object(k.jsx)(o.EuiFlexGroup,{direction:"column",gutterSize:"xs","data-test-subj":"ruleSchedulesList"},f.filter((e=>e.id)).map((e=>{const t=e.id&&v.includes(e.id);return Object(k.jsx)(o.EuiFlexItem,{key:`snooze-${e.id}`},Object(k.jsx)("button",{style:{paddingLeft:"9px",paddingRight:"9px",height:"36px",color:t?"#a8376a":Y.colors.subduedText,backgroundColor:t?"rgba(240,78,152,0.2)":Y.colors.body},className:"euiButton euiPanel euiPanel--borderRadiusMedium euiPanel--noShadow euiPanel--noBorder",onClick:V(e)},Object(k.jsx)(o.EuiFlexGroup,{alignItems:"center"},Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiIcon,{type:t?"bellSlash":"calendar"})),Object(k.jsx)(o.EuiFlexItem,{style:{textAlign:"left"}},(e=>{if(null==e.rRule.freq)return c()(e.rRule.dtstart).format("LLLL");const t=Object(g.e)(e.rRule);return t[0].toLocaleUpperCase()+t.slice(1)})(e)),Object(k.jsx)(o.EuiFlexItem,{grow:!1},Object(k.jsx)(o.EuiIcon,{type:"arrowRight"})))))}))),Object(k.jsx)(o.EuiFlexGroup,null,Object(k.jsx)(o.EuiFlexItem,null,Object(k.jsx)(o.EuiButtonEmpty,{isDisabled:Q>=5,"data-test-subj":"ruleSchedulesListAddButton",iconType:"plusInCircleFilled",onClick:K},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.addButton",{defaultMessage:"Add"})))))):null,i&&Object(k.jsx)(a.a.Fragment,null,!M&&Object(k.jsx)(o.EuiSpacer,{size:"s"}),Object(k.jsx)(o.EuiPopoverFooter,null,!M&&Object(k.jsx)(o.EuiSpacer,{size:"s"}),Object(k.jsx)(o.EuiFlexGroup,null,Object(k.jsx)(o.EuiFlexItem,{grow:!0},Object(k.jsx)(o.EuiButton,{isLoading:e,color:"danger",onClick:$,"data-test-subj":"ruleSnoozeCancel"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnooze",{defaultMessage:"Cancel snooze"})))))),Object(k.jsx)(o.EuiSpacer,{size:"s"}),U&&Object(k.jsx)(o.EuiConfirmModal,{title:Object(k.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.removeAllSnoozeSchedules",defaultMessage:"Remove {count, plural, one {schedule} other {# schedules}}?",values:{count:f.filter((e=>e.id)).length}}),onCancel:()=>R(!1),onConfirm:J,buttonColor:"danger",cancelButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.removeCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.removeConfirmButton",{defaultMessage:"Remove"})}),F&&Object(k.jsx)(o.EuiConfirmModal,{title:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnooze",{defaultMessage:"Cancel snooze"}),style:{maxWidth:"420px"},onCancel:()=>W(!1),onConfirm:q,cancelButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.dontApplyCancelSnoozeButton",{defaultMessage:"Don't apply"}),confirmButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.applyCancelSnoozeButton",{defaultMessage:"Apply"})},Object(k.jsx)(o.EuiText,null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnoozeConfirmText",{defaultMessage:"Resume notifying when alerts are generated as defined in the rule actions."})),Object(k.jsx)(o.EuiSpacer,{size:"s"}),Object(k.jsx)(o.EuiCallOut,{iconType:"iInCircle",size:"s",title:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnoozeConfirmCallout",{defaultMessage:"Only the current occurrence of a schedule will be cancelled."})})))},E=({interval:e,snoozeRule:t,unsnoozeRule:s,showCancel:a,scheduledSnoozes:r,activeSnoozes:u,hasTitle:o=!0,inPopover:i=!1,showAddSchedule:c})=>{const[d,b]=Object(n.useState)(!1),[g,j]=Object(n.useState)(null),[h,m]=Object(n.useState)(!1),x=Object(n.useCallback)((async e=>{m(!0);try{await t(e)}finally{i||m(!1)}}),[i,m,t]),O=Object(n.useCallback)((async e=>{m(!0);try{await s(e)}finally{i||m(!1)}}),[i,m,s]),S=Object(n.useCallback)((async e=>{m(!0);try{await t(e)}finally{i||m(!1)}}),[i,t,m]),p=Object(n.useCallback)((async e=>{m(!0);try{await s(e)}finally{i||m(!1)}}),[i,s,m]),f=Object(n.useCallback)((e=>{j(null!=e?e:null),b(!0)}),[j,b]),y=Object(n.useCallback)((()=>b(!1)),[b]);return d?Object(k.jsx)(l.a,{isLoading:h,initialSchedule:g,onClose:y,onSaveSchedule:S,onCancelSchedules:p,hasTitle:o,inPopover:i}):Object(k.jsx)(v,{isLoading:h,snoozeRule:x,unsnoozeRule:O,interval:e,showCancel:a,showAddSchedule:c,scheduledSnoozes:r,activeSnoozes:u,navigateToScheduler:f,onRemoveAllSchedules:p,hasTitle:o,inPopover:i})}},187:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>l(e,"LL"),a=e=>l(e,"ll"),l=(e,t)=>e.format(t).replace(new RegExp(`(${e.format("YYYY")}|,)`,"g"),"").trim()},237:function(e,t,s){"use strict";s.d(t,"e",(function(){return u})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i})),s.d(t,"d",(function(){return c})),s.d(t,"f",(function(){return d}));var n=s(2),a=s(10),l=s(19),r=s(14);s.d(t,"c",(function(){return r.I18N_WEEKDAY_OPTIONS})),s(11);const u=[{id:"never",label:"Never"},{id:"ondate",label:"On date"},{id:"afterx",label:"After {x}"}],o=[{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDaily",{defaultMessage:"Daily"}),value:l.k.DAILY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeekly",{defaultMessage:"Weekly"}),value:l.k.WEEKLY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurMonthly",{defaultMessage:"Monthly"}),value:l.k.MONTHLY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYearly",{defaultMessage:"Yearly"}),value:l.k.YEARLY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurCustom",{defaultMessage:"Custom"}),value:"CUSTOM"}],i={[l.k.DAILY]:{interval:1},[l.k.WEEKLY]:{interval:1},[l.k.MONTHLY]:{interval:1},[l.k.YEARLY]:{interval:1}},c={1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA",7:"SU"},d=Object(a.mapValues)(Object(a.invert)(c),(e=>Number(e)))},238:function(e,t,s){"use strict";s.d(t,"d",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"e",(function(){return j})),s.d(t,"a",(function(){return m}));var n=s(2),a=s(33),l=s.n(a),r=s(11),u=s(19),o=s(187),i=s(237),c=s(239);const d=(e,t="dddd")=>{const s=e.format(t),n=Math.ceil(e.date()/7);return{dayOfWeek:s,nthWeekdayOfMonth:n,isLastOfMonth:n>4||!e.isSame(l()(e).add(7,"d"),"month")}},b=(e,t)=>{const s=t?t.isoWeekday():1;return r.ISO_WEEKDAYS.reduce(((t,n)=>({...t,[n]:e&&e.length>0?e.map((e=>e.replace(/[0-9+\-]/g,""))).includes(i.d[n]):n===s})),{})},g=e=>{const{isLastOfMonth:t,nthWeekdayOfMonth:s}=d(e);return[`${t?"-1":"+"+s}${i.d[e.isoWeekday()]}`]},j=({freq:e,interval:t,until:s,count:a,byweekday:r,bymonthday:i,bymonth:d})=>{var b;const g=Object(c.b)(t)[e],j=r?r[0]:"",m=j?j.startsWith("+")?Number(j[1]):j.startsWith("-1")?0:null:null;let x=r&&r.length>0?null!==m?Object(c.d)(h(j))[m]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.byweekdaySummary",{defaultMessage:"on {weekdays}",values:{weekdays:r.map((e=>h(e))).join(", ")}}):null;x&&(x=x[0].toLocaleLowerCase()+x.slice(1));const O=i&&i.length>0?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.bymonthdaySummary",{defaultMessage:"on day {monthday}",values:{monthday:i.join(", ")}}):null,S=d&&d.length>0&&i&&i.length>0?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.bymonthSummary",{defaultMessage:"on {date}",values:{date:Object(o.b)(l()().month(d[0]).date(i[0]))}}):null,p=e===u.k.WEEKLY?x:e===u.k.MONTHLY?null!==(b=x)&&void 0!==b?b:O:e===u.k.YEARLY?S:null,f=s?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.untilDateSummary",{defaultMessage:"until {date}",values:{date:l()(s).format("LL")}}):a?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.occurrencesSummary",{defaultMessage:"for {count, plural, one {# occurrence} other {# occurrences}}",values:{count:a}}):null;return n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurrenceSummary",{defaultMessage:"every {frequencySummary}{on}{until}",values:{frequencySummary:g,on:p?` ${p}`:"",until:f?` ${f}`:""}})},h=e=>l()().isoWeekday(i.f[e.slice(-2)]).format("dddd"),m=({frequency:e,interval:t,byweekday:s,monthlyRecurDay:n,startDate:a})=>{const l=e===u.k.MONTHLY&&"day"===n,r=e===u.k.MONTHLY&&"weekday"===n,o=a&&(l||e===u.k.YEARLY);return{freq:e,interval:t,byweekday:e===u.k.WEEKLY?Object.keys(s).filter((e=>!0===s[e])).map((e=>i.d[Number(e)])):a&&r?g(a):[],bymonthday:o?[a.date()]:[],bymonth:a&&e===u.k.YEARLY?[a.month()]:[]}}},239:function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return o}));var n=s(2),a=s(19);const l=e=>[n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurLast",{defaultMessage:"Monthly on the last {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFirst",{defaultMessage:"Monthly on the first {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurSecond",{defaultMessage:"Monthly on the second {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurThird",{defaultMessage:"Monthly on the third {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFourth",{defaultMessage:"Monthly on the fourth {dayOfWeek}",values:{dayOfWeek:e}})],r=e=>[n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurLastShort",{defaultMessage:"On the last {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFirstShort",{defaultMessage:"On the 1st {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurSecondShort",{defaultMessage:"On the 2nd {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurThirdShort",{defaultMessage:"On the 3rd {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFourthShort",{defaultMessage:"On the 4th {dayOfWeek}",values:{dayOfWeek:e}})],u=e=>({[a.k.DAILY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDaySummary",{defaultMessage:"{interval, plural, one {day} other {# days}}",values:{interval:e}}),[a.k.WEEKLY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeekSummary",{defaultMessage:"{interval, plural, one {week} other {# weeks}}",values:{interval:e}}),[a.k.MONTHLY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurMonthSummary",{defaultMessage:"{interval, plural, one {month} other {# months}}",values:{interval:e}}),[a.k.YEARLY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYearSummary",{defaultMessage:"{interval, plural, one {year} other {# years}}",values:{interval:e}})}),o=e=>[{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDay",{defaultMessage:"{interval, plural, one {day} other {days}}",values:{interval:e}}),value:a.k.DAILY,"data-test-subj":"ruleSnoozeSchedulerRecurDay"},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeek",{defaultMessage:"{interval, plural, one {week} other {weeks}}",values:{interval:e}}),value:a.k.WEEKLY,"data-test-subj":"ruleSnoozeSchedulerRecurWeek"},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurMonth",{defaultMessage:"{interval, plural, one {month} other {months}}",values:{interval:e}}),value:a.k.MONTHLY,"data-test-subj":"ruleSnoozeSchedulerRecurMonth"},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYear",{defaultMessage:"{interval, plural, one {year} other {years}}",values:{interval:e}}),value:a.k.YEARLY,"data-test-subj":"ruleSnoozeSchedulerRecurYear"}]},261:function(e,t,s){"use strict";s.d(t,"a",(function(){return A}));var n=s(12),a=s.n(n),l=s(1),r=s.n(l),u=s(33),o=s.n(u),i=s(2),c=s(31),d=s(123);const b=[...s.n(d).a.tz.names().filter((e=>!["America/Nuuk","EST","HST","ROC","MST"].includes(e)))];var g=s(112),j=s(3),h=s(0);const m=e=>{const[t,s]=Object(l.useState)(e.value),n=void 0!==e.min?e.min:-1/0,r=void 0!==e.max?e.max:1/0,u=Object(l.useCallback)((t=>{const{value:a}=t.target,l=!isNaN(Number(a))&&a>=n&&a<=r;(l||""===a)&&s(a),l&&e.onChange&&e.onChange(a)}),[e,s,r,n]),o=Object(l.useCallback)((n=>{(isNaN(Number(t))||""===t)&&s(e.value),e.onBlur&&e.onBlur(n)}),[t,e,s]);return Object(h.jsx)(j.EuiFieldNumber,a()({},e,{value:t,onChange:u,onBlur:o}))};var x=s(19),O=s(187),S=s(237),p=s(63),f=s.n(p),y=s(238),k=s(239);const v=({startDate:e,onChange:t,initialState:s,minimumRecurrenceDays:n})=>{var a,u;const[o]=Object(l.useState)(e),[c,d]=Object(l.useState)(s.freq),[b,g]=Object(l.useState)(s.freq===x.k.DAILY?Math.max(n,s.interval):s.interval),[O,p]=Object(l.useState)(Object(y.c)(s.byweekday,e)),[v,E]=Object(l.useState)(s.freq===x.k.MONTHLY&&(null!==(a=null===(u=s.byweekday)||void 0===u?void 0:u.length)&&void 0!==a?a:0)>0?"weekday":"day"),z=Object(l.useMemo)((()=>{if(!e)return[];const{dayOfWeek:t,nthWeekdayOfMonth:s,isLastOfMonth:n}=Object(y.d)(e,"ddd");return[{id:"day",label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatOnMonthlyDayNumber",{defaultMessage:"On day {dayNumber}",values:{dayNumber:e.date()}})},{id:"weekday",label:Object(k.d)(t)[n?0:s]}]}),[e]);Object(l.useEffect)((()=>{c===x.k.DAILY&&b<n&&g(n)}),[n,c,b,g]),Object(l.useEffect)((()=>{o!==e&&p(Object(y.c)([],e))}),[e,o]);const I=Object(l.useRef)(null);Object(l.useEffect)((()=>{const s=Object(y.a)({frequency:c,interval:b,byweekday:O,monthlyRecurDay:v,startDate:e});f()(I.current,s)||(t(s),I.current=s)}),[c,b,O,v,e,t]);const M=Object(l.useCallback)((e=>{const t={...O,[e]:!O[e]};Object.values(t).every((e=>!1===e))||p(t)}),[O]),A=Object(l.useMemo)((()=>Object(k.a)(b)),[b]),C=Object(l.useMemo)((()=>c!==x.k.DAILY?1:Math.max(n,1)),[c,n]);return Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(j.EuiFormRow,{display:"columnCompressed","data-test-subj":"customRecurrenceScheduler",fullWidth:!0,label:" "},Object(h.jsx)(j.EuiFlexGroup,{gutterSize:"s"},Object(h.jsx)(j.EuiFlexItem,null,Object(h.jsx)(j.EuiFormControlLayout,{compressed:!0,prepend:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatIntervalLabel",{defaultMessage:"Every"})},Object(h.jsx)(m,{compressed:!0,"data-test-subj":"customRecurrenceSchedulerInterval",min:C,value:b,onChange:e=>g(Number(e))}))),Object(h.jsx)(j.EuiFlexItem,null,Object(h.jsx)(j.EuiSelect,{compressed:!0,className:"customRecurrenceSchedulerFrequency","data-test-subj":"customRecurrenceSchedulerFrequency",onChange:e=>d(Number(e.target.value)),value:c,options:A})))),c===x.k.WEEKLY&&Object(h.jsx)(j.EuiFormRow,{fullWidth:!0,display:"columnCompressed",label:" ","data-test-subj":"customRecurrenceSchedulerWeekly"},Object(h.jsx)(j.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,type:"multi",legend:"Repeat on weekday",idToSelectedMap:O,onChange:M,options:S.c})),c===x.k.MONTHLY&&e&&Object(h.jsx)(j.EuiFormRow,{fullWidth:!0,display:"columnCompressed","data-test-subj":"customRecurrenceSchedulerMonthly",label:" "},Object(h.jsx)(j.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,type:"single",legend:"Repeat on weekday or month day",idSelected:v,onChange:E,options:z})))};s(286);const E=({startDate:e,endDate:t,onChange:s,initialState:n})=>{const a=Object(l.useRef)(!1),[r,u]=Object(l.useState)(x.k.DAILY),[c,d]=Object(l.useState)("never"),[b,g]=Object(l.useState)({freq:x.k.WEEKLY,interval:1,byweekday:[],bymonthday:[],bymonth:[]}),[p,f]=Object(l.useState)(t),[E,I]=Object(l.useState)(1),M=Object(l.useMemo)((()=>e&&t?Math.abs(e.diff(t,"days")):0),[e,t]),A=Object(l.useMemo)((()=>M>0),[M]);Object(l.useEffect)((()=>{A&&r===x.k.DAILY&&u(x.k.WEEKLY)}),[A,r]),Object(l.useEffect)((()=>{if(n&&!a.current){var e;const t=n.interval>1||(null!==(e=n.byweekday)&&void 0!==e?e:[]).length>1;u(t?"CUSTOM":n.freq),t&&g(n),n.until&&(d("ondate"),f(n.until)),n.count&&(d("afterx"),I(n.count))}a.current=!0}),[n]);const{repeatOptions:C,rrulePresets:L}=Object(l.useMemo)((()=>{if(!e)return{repeatOptions:S.a,rrulePresets:S.b};const{dayOfWeek:t,nthWeekdayOfMonth:s,isLastOfMonth:n}=Object(y.d)(e);return{repeatOptions:[{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDaily",{defaultMessage:"Daily"}),value:x.k.DAILY,disabled:A},{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeeklyOnWeekday",{defaultMessage:"Weekly on {dayOfWeek}",values:{dayOfWeek:t}}),value:x.k.WEEKLY},{text:Object(k.c)(t)[n?0:s],value:x.k.MONTHLY},{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYearlyOnDay",{defaultMessage:"Yearly on {date}",values:{date:Object(O.b)(e)}}),value:x.k.YEARLY},{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurCustom",{defaultMessage:"Custom"}),value:"CUSTOM"}],rrulePresets:{[x.k.DAILY]:{interval:1},[x.k.WEEKLY]:{interval:1,byweekday:[S.d[e.isoWeekday()]]},[x.k.MONTHLY]:{interval:1,byweekday:Object(y.b)(e)},[x.k.YEARLY]:{interval:1,bymonth:[e.month()+1],bymonthday:[e.date()]}}}}),[e,A]),w=Object(l.useMemo)((()=>{const e="ondate"===c&&p?{until:p}:"afterx"===c?{count:E}:{};return"CUSTOM"===r?{...z(b),...e}:{freq:r,...L[r],...e}}),[r,L,c,b,p,E]);return Object(l.useEffect)((()=>{s(w)}),[w,s]),Object(h.jsx)(j.EuiSplitPanel.Outer,{hasShadow:!1,hasBorder:!0},Object(h.jsx)(j.EuiSplitPanel.Inner,{color:"subdued",className:"ramRecurrenceScheduler"},Object(h.jsx)(j.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},fullWidth:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatLabel",{defaultMessage:"Repeat"})},Object(h.jsx)(j.EuiSelect,{options:C,value:r,onChange:e=>u("CUSTOM"===e.target.value?"CUSTOM":Number(e.target.value)),compressed:!0})),"CUSTOM"===r&&Object(h.jsx)(v,{startDate:e,onChange:g,initialState:b,minimumRecurrenceDays:M+1}),Object(h.jsx)(j.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},fullWidth:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.endsLabel",{defaultMessage:"Ends"})},Object(h.jsx)(j.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,type:"single",legend:"Recurrence ends",idSelected:c,onChange:d,options:S.e})),"ondate"===c&&Object(h.jsx)(j.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},label:" ",fullWidth:!0},Object(h.jsx)(j.EuiDatePicker,{selected:p,onChange:f,minDate:null!=e?e:o()()})),"afterx"===c&&Object(h.jsx)(j.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},label:" ",fullWidth:!0},Object(h.jsx)(j.EuiFormControlLayout,{compressed:!0,prepend:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.afterOccurrencesLabel",{defaultMessage:"After"}),append:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.occurrencesLabel",{defaultMessage:"{occurrences, plural, one {occurrence} other {occurrences}}",values:{occurrences:E}})},Object(h.jsx)(m,{compressed:!0,min:1,value:E,onChange:e=>I(Number(e))})))),Object(h.jsx)(j.EuiHorizontalRule,{margin:"none"}),Object(h.jsx)(j.EuiSplitPanel.Inner,{style:{maxWidth:"400px"}},i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatsSummary",{defaultMessage:"Repeats {summary}",values:{summary:Object(y.e)(w)}})))},z=e=>{var t,s,n;const a={...e};return 0===(null===(t=a.byweekday)||void 0===t?void 0:t.length)&&delete a.byweekday,0===(null===(s=a.bymonth)||void 0===s?void 0:s.length)&&delete a.bymonth,0===(null===(n=a.bymonthday)||void 0===n?void 0:n.length)&&delete a.bymonthday,a};var I;s(291);const M=null!==(I=b.map((e=>({label:e}))))&&void 0!==I?I:[{label:"UTC"}],A=({onClose:e,initialSchedule:t,hasTitle:s=!0,...n})=>{const l=s&&(t?i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.editSchedule",{defaultMessage:"Edit schedule"}):i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.addSchedule",{defaultMessage:"Add schedule"}));return Object(h.jsx)(r.a.Fragment,null,l&&Object(h.jsx)(j.EuiPopoverTitle,null,Object(h.jsx)(j.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(h.jsx)(j.EuiFlexItem,{grow:!1},Object(h.jsx)(j.EuiIcon,{type:"arrowLeft"})),Object(h.jsx)(j.EuiFlexItem,null,Object(h.jsx)(j.EuiLink,{color:"text",style:{fontWeight:"bold"},onClick:e},l)))),Object(h.jsx)(C,a()({initialSchedule:t},n)))},C=({onSaveSchedule:e,initialSchedule:t,isLoading:s,onCancelSchedules:n,bulkSnoozeSchedule:a=!1,showDelete:u=!1,inPopover:d=!1})=>{const[b,m]=Object(l.useState)(!1),[x,O]=Object(l.useState)(!1),S=Object(l.useMemo)((()=>{var e;return o.a.min(o()(),o()(null!==(e=null==t?void 0:t.rRule.dtstart)&&void 0!==e?e:void 0)).hour(0).minute(0)}),[t]),p=(()=>{var e,t;const s=Object(c.useUiSetting)("dateFormat:tz");return s&&"Browser"!==s?s:null!==(e=null===(t=o.a.tz)||void 0===t?void 0:t.guess())&&void 0!==e?e:"UTC"})(),f=Object(l.useMemo)((()=>{var e;if(!t)return{startDT:o()().add("24","h"),endDT:o()().add("48","h"),isRecurring:!1,recurrenceSchedule:null,selectedTimezone:[{label:p}]};const s=null!=(null==t||null===(e=t.rRule)||void 0===e?void 0:e.freq),n=s?{...t.rRule,...t.rRule.until?{until:o()(t.rRule.until)}:{}}:null,a=o()(t.rRule.dtstart).tz(t.rRule.tzid),l=o()().tz(p).year(a.year()).month(a.month()).date(a.date()).hour(a.hour()).minute(a.minute()).second(a.second()).millisecond(a.millisecond()).toISOString();return{startDT:o()(l),endDT:o()(l).add(t.duration,"ms"),isRecurring:s,recurrenceSchedule:n,selectedTimezone:[{label:t.rRule.tzid}]}}),[t,p]),[y,k]=Object(l.useState)(f.startDT),[v,z]=Object(l.useState)(f.endDT),[I,A]=Object(l.useState)(f.isRecurring),[C,L]=Object(l.useState)(f.recurrenceSchedule),[w,U]=Object(l.useState)(f.selectedTimezone),R=Object(l.useCallback)((()=>{m(!1),O(!1)}),[m]),F=Object(l.useCallback)((()=>{m(!0),O(!0)}),[m]),W=Object(l.useCallback)(((e,t)=>{k(o.a.max(e,S)),t&&(z(null),m(!0),O(!1))}),[k,m,S]),T=Object(l.useCallback)((e=>{z(e.add(1,"minutes")),O(!0),m(!1)}),[z,m]),D=Object(l.useCallback)((e=>{const t=o()(e),s=!y||t.isSameOrAfter(y),n=t.isSame(v,"day")&&!t.isSame(v,"minute"),a=t.isSame(y,"day")&&!t.isSame(y,"minute")&&(!n||!x);!a&&(b||n&&x)&&s?T(e):W(e,!a)}),[b,x,y,v,T,W]),Y=Object(l.useCallback)((()=>{var s,n;if(!y||!v)return;const a=null!==(s=w[0].label)&&void 0!==s?s:p,l=o()().tz(a).year(y.year()).month(y.month()).date(y.date()).hour(y.hour()).minute(y.minute()).second(y.second()).toISOString(),r=I&&C?C:{count:1};e({id:null!==(n=null==t?void 0:t.id)&&void 0!==n?n:Object(g.v4)(),rRule:{dtstart:l,tzid:a,...r},duration:v.valueOf()-y.valueOf()})}),[e,v,y,w,I,C,t,p]),N=Object(l.useCallback)((()=>{a?n([]):null!=t&&t.id&&n([t.id])}),[t,n,a]);return Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(j.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",direction:"column","data-test-subj":"ruleSnoozeScheduler"},Object(h.jsx)(j.EuiFlexItem,null,Object(h.jsx)(j.EuiDatePickerRange,{startDateControl:Object(h.jsx)(j.EuiDatePicker,{calendarClassName:"hidden",preventOpenOnFocus:!0,showTimeSelect:!0,onFocus:R,selected:y,onChange:k,minDate:S,isInvalid:null==y?void 0:y.isBefore(S)}),endDateControl:Object(h.jsx)(j.EuiDatePicker,{calendarClassName:"hidden",preventOpenOnFocus:!0,showTimeSelect:!0,className:b&&!v?"RuleSnoozeScheduler__pseudofocus":"",onFocus:F,selected:v,onChange:z,minDate:null!=y?y:S,isInvalid:null==y?void 0:y.isSameOrAfter(v)})})),Object(h.jsx)(j.EuiFlexItem,null,Object(h.jsx)(j.EuiSplitPanel.Outer,{hasShadow:!1,hasBorder:!0,style:{width:"400px"}},Object(h.jsx)(j.EuiSplitPanel.Inner,{paddingSize:"s"},Object(h.jsx)(j.EuiDatePicker,{inline:!0,showTimeSelect:!0,shadow:!1,startDate:y,endDate:v,selected:x?v:y,onSelect:D,minDate:S,adjustDateOnChange:!1})),Object(h.jsx)(j.EuiHorizontalRule,{margin:"none"}),Object(h.jsx)(j.EuiSplitPanel.Inner,{paddingSize:"m"},Object(h.jsx)(j.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},fullWidth:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.timezoneLabel",{defaultMessage:"Timezone"})},Object(h.jsx)(j.EuiComboBox,{compressed:!0,singleSelection:{asPlainText:!0},options:M,selectedOptions:w,onChange:U,isClearable:!1})))))),Object(h.jsx)(j.EuiSpacer,{size:"m"}),Object(h.jsx)(j.EuiSwitch,{compressed:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatSwitch",{defaultMessage:"Repeat"}),onChange:()=>A(!I),checked:I}),I&&Object(h.jsx)(r.a.Fragment,null,Object(h.jsx)(j.EuiSpacer,{size:"m"}),Object(h.jsx)(E,{startDate:y,endDate:v,onChange:L,initialState:C})),Object(h.jsx)(j.EuiHorizontalRule,{margin:"m"}),Object(h.jsx)(j.EuiButton,{fill:!0,fullWidth:!0,disabled:!y||!v||y.isSameOrAfter(v)||y.isBefore(S),onClick:Y,isLoading:s,"data-test-subj":"scheduler-saveSchedule"},i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.saveSchedule",{defaultMessage:"Save schedule"})),(t||u)&&Object(h.jsx)(r.a.Fragment,null,!d&&Object(h.jsx)(j.EuiSpacer,{size:"s"}),Object(h.jsx)(j.EuiPopoverFooter,{paddingSize:"m",style:{marginBlock:"16px -16px",marginInline:"-16px"}},!d&&Object(h.jsx)(j.EuiSpacer,{size:"s"}),Object(h.jsx)(j.EuiFlexGroup,null,Object(h.jsx)(j.EuiFlexItem,{grow:!0},Object(h.jsx)(j.EuiButton,{isLoading:s,color:"danger",onClick:N},i.i18n.translate("xpack.triggersActionsUI.sections.rulesList.deleteSchedule",{defaultMessage:"Delete schedule"})))))))}},286:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(287);case"v8light":return s(289)}},287:function(e,t,s){var n=s(54),a=s(288);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},288:function(e,t,s){(t=s(55)(!1)).push([e.i,".ramRecurrenceScheduler .euiFormRow__labelWrapper{width:calc(20% - 8px)}.ramRecurrenceScheduler .euiFormRow__fieldWrapper{width:80%}",""]),e.exports=t},289:function(e,t,s){var n=s(54),a=s(290);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},290:function(e,t,s){(t=s(55)(!1)).push([e.i,".ramRecurrenceScheduler .euiFormRow__labelWrapper{width:calc(20% - 8px)}.ramRecurrenceScheduler .euiFormRow__fieldWrapper{width:80%}",""]),e.exports=t},291:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(292);case"v8light":return s(294)}},292:function(e,t,s){var n=s(54),a=s(293);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},293:function(e,t,s){(t=s(55)(!1)).push([e.i,".RuleSnoozeScheduler__pseudofocus:not(:focus){background-image:linear-gradient(0deg,#07c,#07c 2px,#0000 0,#0000);background-size:100% 100%;outline:none}",""]),e.exports=t},294:function(e,t,s){var n=s(54),a=s(295);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},295:function(e,t,s){(t=s(55)(!1)).push([e.i,".RuleSnoozeScheduler__pseudofocus:not(:focus){background-image:linear-gradient(0deg,#07c,#07c 2px,#0000 0,#0000);background-size:100% 100%;outline:none}",""]),e.exports=t}}]);