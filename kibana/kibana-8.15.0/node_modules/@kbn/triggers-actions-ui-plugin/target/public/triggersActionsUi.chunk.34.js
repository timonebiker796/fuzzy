/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[34,55],{138:function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return i}));var a=s(25);async function n({http:e}){const t=await e.get(`${a.b}/_health`),s=r(t.alerting_framework_health);return{...i(t),alertingFrameworkHealth:s}}const r=({decryption_health:e,execution_health:t,read_health:s,...a})=>({decryptionHealth:e,executionHealth:t,readHealth:s,...a}),i=({is_sufficiently_secure:e,has_permanent_encryption_key:t,alerting_framework_health:s,...a})=>({isSufficientlySecure:e,hasPermanentEncryptionKey:t,alertingFrameworkHealth:s,...a})},143:function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return o}));var a=s(1),n=s(0);const r={loadingHealthCheck:!1,setLoadingHealthCheck:e=>{throw new Error("setLoadingHealthCheck was not initialized, set it when you invoke the context")}},i=Object(a.createContext)(r),c=({children:e})=>{const[t,s]=Object(a.useState)(!1),r=Object(a.useCallback)((e=>{s(e)}),[]),c=Object(a.useMemo)((()=>({loadingHealthCheck:t,setLoadingHealthCheck:r})),[t,r]);return Object(n.jsx)(i.Provider,{value:c},e)},o=()=>{const e=Object(a.useContext)(i);if(!e)throw new Error("HealthContext has not been set.");return e}},172:function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var a=s(1),n=s.n(a),r=s(159),i=s(146),c=s(24),o=s(3),l=s(2),u=(s(198),s(178)),d=s(138),g=s(143),b=s(29),h=s(56),p=s(0);const j=({children:e,waitForCheck:t,inFlyout:s=!1})=>{const{http:a,docLinks:c}=Object(b.b)().services,{setLoadingHealthCheck:l}=Object(g.b)(),[j,k]=n.a.useState(r.none);n.a.useEffect((()=>{!async function(){l(!0);const e={...await Object(u.a)({http:a}),isSufficientlySecure:!1,hasPermanentEncryptionKey:!1};if(e.isRulesAvailable){const t=await async function(e){try{return Object(r.some)(await Object(d.a)({http:e}))}catch(e){return r.none}}(a);Object(r.isSome)(t)?(e.isSufficientlySecure=t.value.isSufficientlySecure,e.hasPermanentEncryptionKey=t.value.hasPermanentEncryptionKey):(e.isSufficientlySecure=!0,e.hasPermanentEncryptionKey=!0),k(Object(r.some)(e))}l(!1)}()}),[a,l]);const O=s?"alertingFlyoutHealthCheck":"alertingHealthCheck";return Object(i.pipe)(j,Object(r.fold)((()=>t?Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(o.EuiSpacer,{size:"m"}),Object(p.jsx)(h.a,null)):Object(p.jsx)(n.a.Fragment,null,e)),(t=>null!=t&&t.isSufficientlySecure&&null!=t&&t.hasPermanentEncryptionKey?Object(p.jsx)(n.a.Fragment,null,e):t.isRulesAvailable?t.isSufficientlySecure||t.hasPermanentEncryptionKey?t.hasPermanentEncryptionKey?Object(p.jsx)(x,{docLinks:c,className:O}):Object(p.jsx)(m,{docLinks:c,className:O}):Object(p.jsx)(y,{docLinks:c,className:O}):Object(p.jsx)(f,{docLinks:c,className:O}))))},m=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.encryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorBeforeKey",{defaultMessage:"You must configure an encryption key to use Alerting. "}),Object(p.jsx)(o.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.encryptionErrorAction",{defaultMessage:"Learn more."}))))}),x=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorTitle",defaultMessage:"Additional setup required"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledError",{defaultMessage:"You must enable API keys to use Alerting. "}),Object(p.jsx)(o.EuiLink,{href:e.links.security.elasticsearchEnableApiKeys,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysDisabledErrorAction",{defaultMessage:"Learn more."}))))}),f=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"alertsNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.alertsErrorTitle",defaultMessage:"You must enable Alerting and Actions"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsError",{defaultMessage:"To create a rule, you must enable the alerting and actions plugins. "}),Object(p.jsx)(o.EuiLink,{href:e.links.alerting.generalSettings,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.alertsErrorAction",{defaultMessage:"Learn how."}))))}),y=({docLinks:e,className:t})=>Object(p.jsx)(o.EuiEmptyPrompt,{iconType:"watchesApp","data-test-subj":"actionNeededEmptyPrompt",className:t,titleSize:"xs",title:Object(p.jsx)("h2",null,Object(p.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorTitle",defaultMessage:"Additional setup required"})),body:Object(p.jsx)("div",{className:`${t}__body`},Object(p.jsx)("p",{role:"banner"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionError",{defaultMessage:"You must enable API keys and configure an encryption key to use Alerting. "}),Object(p.jsx)(o.EuiLink,{href:e.links.alerting.setupPrerequisites,external:!0,target:"_blank"},l.i18n.translate("xpack.triggersActionsUI.components.healthCheck.apiKeysAndEncryptionErrorAction",{defaultMessage:"Learn more."}))))})},176:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s(2),n=s(6);const r=(e,t=!1)=>{switch(e){case"logs":return{text:a.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"}),...t?{href:`${n.z}`}:{}};case"connectors":return{text:a.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"}),...t?{href:`${n.x}`}:{}};case"rules":return{text:a.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${n.A}`}:{}};case"alerts":return{text:a.i18n.translate("xpack.triggersActionsUI.alerts.breadcrumbTitle",{defaultMessage:"Alerts"}),...t?{href:`${n.t}`}:{}};default:return{text:a.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"}),...t?{href:`${n.y}`}:{}}}}},177:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(2);const n=e=>{let t;switch(e){case"logs":t=a.i18n.translate("xpack.triggersActionsUI.logs.breadcrumbTitle",{defaultMessage:"Logs"});break;case"connectors":t=a.i18n.translate("xpack.triggersActionsUI.connectors.breadcrumbTitle",{defaultMessage:"Connectors"});break;case"rules":t=a.i18n.translate("xpack.triggersActionsUI.rules.breadcrumbTitle",{defaultMessage:"Rules"});break;case"alerts":t=a.i18n.translate("xpack.triggersActionsUI.alerts.breadcrumbTitle",{defaultMessage:"Alerts"});break;default:t=a.i18n.translate("xpack.triggersActionsUI.home.breadcrumbTitle",{defaultMessage:"Rules"})}return t}},178:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s(25);const n=async({http:e})=>{const t=await e.get(`${a.d}/_health`);return t?{isRulesAvailable:t.isAlertsAvailable}:t}},198:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(199);case"v8light":return s(201)}},199:function(e,t,s){var a=s(54),n=s(200);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},200:function(e,t,s){(t=s(55)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},201:function(e,t,s){var a=s(54),n=s(202);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);a(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},202:function(e,t,s){(t=s(55)(!1)).push([e.i,".alertingFlyoutHealthCheck__body,.alertingHealthCheck__body{padding-left:32px;padding-right:32px}.alertingFlyoutHealthCheck__body{margin-top:16px}",""]),e.exports=t},333:function(e,t,s){"use strict";s.r(t),s.d(t,"TriggersActionsUIHome",(function(){return y})),s.d(t,"default",(function(){return y}));var a=s(1),n=s.n(a),r=s(249),i=s(207),c=s(24),o=s(3),l=s(6),u=s(176),d=s(177),g=s(172),b=s(143),h=s(29),p=s(5),j=s(57),m=s(0);const x=Object(a.lazy)((()=>Promise.all([s.e(1),s.e(3),s.e(10),s.e(14)]).then(s.bind(null,116)))),f=Object(a.lazy)((()=>Promise.all([s.e(3),s.e(6),s.e(9),s.e(18)]).then(s.bind(null,114)))),y=({match:{params:{section:e}},history:t})=>{const[s,y]=Object(a.useState)(),{chrome:k,setBreadcrumbs:O}=Object(h.b)().services,{authorizedToReadAnyRules:A}=Object(j.a)({filteredRuleTypes:[]}),_=[];_.push({id:"rules",name:Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.rulesTabTitle",defaultMessage:"Rules"})}),A&&_.push({id:"logs",name:Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.logsTabTitle",defaultMessage:"Logs"})});const E=Object(a.useCallback)((()=>Object(p.a)(x,"xl")({showCreateRuleButtonInPrompt:!0,setHeaderActions:y})),[]),C=Object(a.useCallback)((()=>Object(m.jsx)(o.EuiPageTemplate.Section,{grow:!1,paddingSize:"none"},Object(p.a)(f,"xl")({setHeaderActions:y}))),[]);return Object(a.useEffect)((()=>{O([Object(u.a)(e||"home")]),k.docTitle.change(Object(d.a)(e||"home"))}),[e,k,O]),Object(m.jsx)(n.a.Fragment,null,Object(m.jsx)(o.EuiPageTemplate.Header,{paddingSize:"none",bottomBorder:!0,pageTitle:Object(m.jsx)("span",{"data-test-subj":"appTitle"},Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.appTitle",defaultMessage:"Rules"})),rightSideItems:s,description:Object(m.jsx)(c.FormattedMessage,{id:"xpack.triggersActionsUI.home.sectionDescription",defaultMessage:"Detect conditions using rules."}),tabs:_.map((s=>({label:s.name,onClick:()=>{return e=s.id,void t.push(`/${e}`);var e},isSelected:s.id===e,key:s.id,"data-test-subj":`${s.id}Tab`})))}),Object(m.jsx)(o.EuiSpacer,{size:"l"}),Object(m.jsx)(b.a,null,Object(m.jsx)(g.a,{waitForCheck:!0},Object(m.jsx)(r.a,null,Object(m.jsx)(i.b,{exact:!0,path:l.z,component:C}),Object(m.jsx)(i.b,{exact:!0,path:l.A,component:E})))))}}}]);