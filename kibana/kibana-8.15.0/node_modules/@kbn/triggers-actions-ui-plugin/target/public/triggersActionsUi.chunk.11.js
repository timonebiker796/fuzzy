/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[11],{194:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return b})),n(1);var s=n(10),i=n(2),a=n(24),c=n(3),o=n(14),r=(n(227),n(0));const l=e=>({isEnabled:!1,message:i.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByLicenseMessage",{defaultMessage:"This connector requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(s.upperFirst)(e.minimumLicenseRequired)}}),messageCard:Object(r.jsx)(c.EuiCard,{titleSize:"xs",title:i.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseMessageTitle",{defaultMessage:"This feature requires a {minimumLicenseRequired} license.",values:{minimumLicenseRequired:Object(s.upperFirst)(e.minimumLicenseRequired)}}),description:i.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseMessageDescription",{defaultMessage:"To re-enable this action, please upgrade your license."}),className:"actCheckActionTypeEnabled__disabledActionWarningCard",children:Object(r.jsx)(c.EuiLink,{href:o.VIEW_LICENSE_OPTIONS_LINK,target:"_blank"},Object(r.jsx)(a.FormattedMessage,{defaultMessage:"View license options",id:"xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByLicenseLinkTitle"}))})}),u={isEnabled:!1,message:i.i18n.translate("xpack.triggersActionsUI.checkActionTypeEnabled.actionTypeDisabledByConfigMessage",{defaultMessage:"This connector is disabled by the Kibana configuration."}),messageCard:Object(r.jsx)(c.EuiCard,{title:i.i18n.translate("xpack.triggersActionsUI.licenseCheck.actionTypeDisabledByConfigMessageTitle",{defaultMessage:"This feature is disabled by the Kibana configuration."}),description:"",className:"actCheckActionTypeEnabled__disabledActionWarningCard"})};function d(e){return!1===(null==e?void 0:e.enabledInLicense)?l(e):!1===(null==e?void 0:e.enabledInConfig)?u:{isEnabled:!0}}function b(e,t){return!1===(null==e?void 0:e.enabledInLicense)?l(e):!1!==(null==e?void 0:e.enabledInConfig)||t.find((t=>t.actionTypeId===e.id))?{isEnabled:!0}:u}},226:function(e,t,n){"use strict";function s(e,t,n){const s=i(e,n),a=i(t,n);return!0===s&&!1===a?-1:!1===s&&!0===a?1:e.name.localeCompare(t.name)}n.d(t,"a",(function(){return s}));const i=(e,t)=>{let n=e.enabled;return!e.enabledInConfig&&t&&t.length>0&&(n=void 0!==t.find((t=>t.actionTypeId===e.id))),n}},227:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(228);case"v8light":return n(230)}},228:function(e,t,n){var s=n(54),i=n(229);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);s(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},229:function(e,t,n){(t=n(55)(!1)).push([e.i,".actAccordionActionForm,.actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#25262e}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px 12px 12px 24px}.actAccordionActionForm .euiAccordion__arrow{transform:translateX(12px) rotate(0deg)!important}.actAccordionActionForm .euiAccordion__arrow[aria-expanded=true]{transform:translateX(12px) rotate(90deg)!important}",""]),e.exports=t},230:function(e,t,n){var s=n(54),i=n(231);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);s(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},231:function(e,t,n){(t=n(55)(!1)).push([e.i,".actAccordionActionForm,.actCheckActionTypeEnabled__disabledActionWarningCard{background-color:#f5f7fa}.actAccordionActionForm .euiCard{box-shadow:none}.actAccordionActionForm__button{padding:12px 12px 12px 24px}.actAccordionActionForm .euiAccordion__arrow{transform:translateX(12px) rotate(0deg)!important}.actAccordionActionForm .euiAccordion__arrow[aria-expanded=true]{transform:translateX(12px) rotate(90deg)!important}",""]),e.exports=t},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var s=n(1),i=n(2),a=n(21),c=n(29);const o=()=>{const{http:e,notifications:{toasts:t}}=Object(c.b)().services,[n,o]=Object(s.useState)(!1),r=Object(s.useRef)(new AbortController),l=Object(s.useRef)(!1);return Object(s.useEffect)((()=>(l.current=!0,()=>{l.current=!1,r.current.abort()})),[]),{isLoading:n,createConnector:async function(n){o(!0),l.current=!0,r.current.abort(),r.current=new AbortController;try{const s=await Object(a.a)({http:e,connector:n});return l.current&&(o(!1),t.addSuccess(i.i18n.translate("xpack.triggersActionsUI.sections.addConnectorForm.updateSuccessNotificationText",{defaultMessage:"Created ''{connectorName}''",values:{connectorName:s.name}}))),s}catch(e){var s,c;l.current&&(o(!1),"AbortError"!==e.name&&t.addDanger(null!==(s=null===(c=e.body)||void 0===c?void 0:c.message)&&void 0!==s?s:i.i18n.translate("xpack.triggersActionsUI.sections.useCreateConnector.updateErrorNotificationText",{defaultMessage:"Cannot create a connector."})))}}}}},83:function(e,t,n){"use strict";n.r(t),n.d(t,"CreateConnectorFlyout",(function(){return h})),n.d(t,"default",(function(){return h}));var s=n(1),i=n.n(s),a=n(3),c=n(15),o=n(24),r=n(131),l=n(29),u=n(2),d=n(50),b=n(21),j=n(226),g=n(194),p=n(59),m=n(0);const x=({onActionTypeChange:e,featureId:t,setHasActionsUpgradeableByTrial:n,setAllActionTypes:i,actionTypeRegistry:c})=>{const{http:r,notifications:{toasts:x}}=Object(l.b)().services,[f,y]=Object(s.useState)(!1),[O,C]=Object(s.useState)(void 0);Object(s.useEffect)((()=>{(async()=>{try{y(!0);const e=await Object(b.d)({http:r,featureId:t});y(!1);const s={};for(const t of e)s[t.id]=t;if(C(s),i&&i(s),n){const t=e.some((e=>!s[e.id].enabledInLicense&&"gold"===s[e.id].minimumLicenseRequired));n(t)}}catch(e){x&&x.addDanger({title:u.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}})()}),[]);const E=Object.entries(null!=O?O:[]).filter((([e,t])=>c.has(e)&&!0===t.enabledInConfig&&!c.get(e).hideInUi)).map((([e,t])=>{const n=c.get(e);return{iconClass:n?n.iconClass:"",selectMessage:n?n.selectMessage:"",actionType:t,name:t.name,isExperimental:n.isExperimental}})).sort(((e,t)=>Object(j.a)(e.actionType,t.actionType))).map(((t,n)=>{const s=Object(g.b)(t.actionType),i=Object(m.jsx)(a.EuiCard,{betaBadgeProps:t.isExperimental?{label:d.q,tooltipContent:d.p}:void 0,titleSize:"xs","data-test-subj":`${t.actionType.id}-card`,icon:Object(m.jsx)(a.EuiIcon,{size:"xl",type:t.iconClass}),title:t.name,description:t.selectMessage,isDisabled:!s.isEnabled,onClick:()=>{e(t.actionType)}});return Object(m.jsx)(a.EuiFlexItem,{key:n},s.isEnabled&&i,!1===s.isEnabled&&Object(m.jsx)(a.EuiToolTip,{position:"top",content:s.message},i))}));return f?Object(m.jsx)(p.a,null,Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.loadingConnectorTypesDescription",defaultMessage:"Loading connector typesâ€¦"})):Object(m.jsx)("div",{className:"actConnectorsListGrid"},Object(m.jsx)(a.EuiSpacer,{size:"s"}),Object(m.jsx)(a.EuiFlexGrid,{gutterSize:"xl",columns:3},E))};var f=n(232),y=n(206);const O=({icon:e,actionTypeName:t,actionTypeMessage:n,compatibility:s,isExperimental:c})=>Object(m.jsx)(a.EuiFlyoutHeader,{hasBorder:!0,"data-test-subj":"create-connector-flyout-header"},Object(m.jsx)(a.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},e?Object(m.jsx)(a.EuiFlexItem,{grow:!1,"data-test-subj":"create-connector-flyout-header-icon"},Object(m.jsx)(a.EuiIcon,{type:e,size:"xl"})):null,Object(m.jsx)(a.EuiFlexItem,{grow:!1},t&&n?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(a.EuiFlexGroup,{gutterSize:"s",justifyContent:"center",alignItems:"center"},Object(m.jsx)(a.EuiFlexItem,null,Object(m.jsx)(a.EuiTitle,{size:"s"},Object(m.jsx)("h3",{id:"flyoutTitle"},Object(m.jsx)(o.FormattedMessage,{defaultMessage:"{actionTypeName} connector",id:"xpack.triggersActionsUI.sections.addConnectorForm.flyoutTitle",values:{actionTypeName:t}})))),t&&c&&Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiBetaBadge,{label:d.q,tooltipContent:d.p}))),Object(m.jsx)(a.EuiText,{size:"s",color:"subdued"},n),s&&s.length>0&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(a.EuiSpacer,{size:"m"}),Object(m.jsx)(a.EuiFlexGroup,{"data-test-subj":"create-connector-flyout-header-compatibility",wrap:!0,responsive:!1,gutterSize:"xs",alignItems:"center"},Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.addConnectorForm.flyoutHeaderCompatibility",defaultMessage:"Compatibility:"})," ",s.map((e=>Object(m.jsx)(a.EuiFlexItem,{grow:!1,key:e},Object(m.jsx)(a.EuiBadge,{color:"default"},e))))))):Object(m.jsx)(a.EuiTitle,{size:"s"},Object(m.jsx)("h3",{id:"selectConnectorFlyoutTitle"},Object(m.jsx)(o.FormattedMessage,{defaultMessage:"Select a connector",id:"xpack.triggersActionsUI.sections.addConnectorForm.selectConnectorFlyoutTitle"})))))),C=Object(s.memo)(O),E=({hasConnectorTypeSelected:e,onCancel:t,onBack:n})=>Object(m.jsx)(a.EuiFlyoutFooter,{"data-test-subj":"create-connector-flyout-footer"},Object(m.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(a.EuiFlexItem,{grow:!1},e?Object(m.jsx)(a.EuiButtonEmpty,{onClick:n,"data-test-subj":"create-connector-flyout-back-btn"},u.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorAdd.backButtonLabel",{defaultMessage:"Back"})):Object(m.jsx)(a.EuiButtonEmpty,{"data-test-subj":"create-connector-flyout-close-btn",onClick:t},u.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorAdd.closeButtonLabel",{defaultMessage:"Close"}))))),A=Object(s.memo)(E);var T=n(14);const I=()=>{const{http:e}=Object(l.b)().services;return Object(m.jsx)(a.EuiCallOut,{title:u.i18n.translate("xpack.triggersActionsUI.sections.actionConnectorAdd.upgradeYourPlanBannerTitle",{defaultMessage:"Upgrade your license to access all connectors"}),"data-test-subj":"upgrade-your-license-callout"},Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.upgradeYourPlanBannerMessage",defaultMessage:"Upgrade your license or start a 30-day free trial for immediate access to all third-party connectors."}),Object(m.jsx)(a.EuiSpacer,{size:"s"}),Object(m.jsx)(a.EuiFlexGroup,{gutterSize:"s",wrap:!0},Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiButton,{href:`${e.basePath.get()}/app/management/stack/license_management`,iconType:"gear",target:"_blank"},Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.manageLicensePlanBannerLinkTitle",defaultMessage:"Manage license"}))),Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiButtonEmpty,{href:T.VIEW_LICENSE_OPTIONS_LINK,iconType:"popout",iconSide:"right",target:"_blank"},Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.upgradeYourPlanBannerLinkTitle",defaultMessage:"Subscription plans"})))))},F=Object(s.memo)(I),k=({actionTypeRegistry:e,featureId:t,onClose:n,onConnectorCreated:u,onTestConnector:d})=>{var b,j;const{application:{capabilities:g}}=Object(l.b)().services,{isLoading:p,createConnector:O}=Object(f.a)(),E=Object(s.useRef)(!1),[T,I]=Object(s.useState)(void 0),[k,h]=Object(s.useState)(null),[v,M]=Object(s.useState)(!1),_=Object(r.e)(g),[S,w]=Object(s.useState)(null),[B,L]=Object(s.useState)({isSubmitted:!1,isSubmitting:!1,isValid:void 0,submit:async()=>({isValid:!1,data:{}}),preSubmitValidator:null}),U={actionTypeId:null!==(b=null==k?void 0:k.id)&&void 0!==b?b:"",isDeprecated:!1,config:{},secrets:{},isMissingSecrets:!1},{preSubmitValidator:z,submit:N,isValid:R,isSubmitting:D}=B,q=!1===R,V=p||D,G=null!=k,P=null!=k?e.get(k.id):null,W=P&&P.subtype&&t!==c.UptimeConnectorFeatureId?(null!==(j=null==P?void 0:P.subtype)&&void 0!==j?j:[]).map((t=>({...e.get(t.id),name:t.name}))):[],H=W.map((e=>({id:e.id,label:e.name,"data-test-subj":`${e.id}Button`}))),K=Object(s.useRef)(),X=Object(s.useCallback)((async()=>{w(null);const{isValid:e,data:t}=await N();if(E.current&&e){if(z){const e=await z();if(e)return void w(e.message)}const{actionTypeId:e,name:n,config:s,secrets:i}=t,a={actionTypeId:e,name:null!=n?n:"",config:null!=s?s:{},secrets:null!=i?i:{}};return await O(a)}}),[N,z,O]),Y=Object(s.useCallback)((()=>h(null)),[]),$=Object(s.useCallback)((async()=>{const e=await X();e&&(u&&u(e),d&&d(e),n())}),[X,n,u,d]),J=Object(s.useCallback)((async()=>{const e=await X();e&&(u&&u(e),n())}),[X,n,u]);return Object(s.useEffect)((()=>(E.current=!0,()=>{E.current=!1})),[]),Object(m.jsx)(a.EuiFlyout,{onClose:n,"data-test-subj":"create-connector-flyout"},Object(m.jsx)(C,{icon:null==P?void 0:P.iconClass,actionTypeName:null==k?void 0:k.name,actionTypeMessage:null==P?void 0:P.selectMessage,compatibility:Object(c.getConnectorCompatibility)(null==k?void 0:k.supportedFeatureIds),isExperimental:null==P?void 0:P.isExperimental}),Object(m.jsx)(a.EuiFlyoutBody,{banner:!k&&v?Object(m.jsx)(F,null):null},G?Object(m.jsx)(i.a.Fragment,null,W&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(a.EuiButtonGroup,{isFullWidth:!0,buttonSize:"m",color:"primary",legend:"",options:H,idSelected:k.id,onChange:e=>{T&&T[e]&&(h(T[e]),K.current&&K.current({resetValues:!0,defaultValue:{actionTypeId:e,isDeprecated:!1,config:{},secrets:{}}}))},"data-test-subj":"slackTypeChangeButton"}),Object(m.jsx)(a.EuiSpacer,{size:"xs"})),Object(m.jsx)(y.a,{actionTypeModel:P,connector:U,isEdit:!1,onChange:L,setResetForm:e=>{K.current=e}}),!!S&&Object(m.jsx)("p",null,S),Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(m.jsx)(i.a.Fragment,null,d&&Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiButton,{color:"success","data-test-subj":"create-connector-flyout-save-test-btn",type:"submit",isLoading:V,disabled:q||!_,onClick:null!=d?$:void 0},Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.saveAndTestButtonLabel",defaultMessage:"Save & test"}))),Object(m.jsx)(a.EuiFlexItem,{grow:!1},Object(m.jsx)(a.EuiButton,{fill:!0,color:"success","data-test-subj":"create-connector-flyout-save-btn",type:"submit",isLoading:V,disabled:q||!_,onClick:J},Object(m.jsx)(o.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionConnectorAdd.saveButtonLabel",defaultMessage:"Save"}))),Object(m.jsx)(a.EuiFlexItem,null))))):Object(m.jsx)(x,{featureId:t,onActionTypeChange:h,setHasActionsUpgradeableByTrial:M,setAllActionTypes:I,actionTypeRegistry:e})),Object(m.jsx)(A,{hasConnectorTypeSelected:G,onBack:Y,onCancel:n}))},h=Object(s.memo)(k)}}]);