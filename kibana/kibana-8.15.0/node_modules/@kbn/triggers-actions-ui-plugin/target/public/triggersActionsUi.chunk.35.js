/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[35],{349:function(t,e,n){switch(window.__kbnThemeTag__){case"v8dark":return n(350);case"v8light":return n(352)}},350:function(t,e,n){var s=n(54),o=n(351);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},351:function(t,e,n){(e=n(55)(!1)).push([t.i,".actConnectorsList__tableRowDisabled{background-color:#25262e}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#98a2b3}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}",""]),t.exports=e},352:function(t,e,n){var s=n(54),o=n(353);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},353:function(t,e,n){(e=n(55)(!1)).push([t.i,".actConnectorsList__tableRowDisabled{background-color:#f5f7fa}.actConnectorsList__tableRowDisabled .actConnectorsList__tableCellDisabled{color:#69707d}.actConnectorsList__tableRowDisabled .euiLink+.euiToolTipAnchor{margin-left:4px}",""]),t.exports=e},354:function(t,e,n){switch(window.__kbnThemeTag__){case"v8dark":return n(355);case"v8light":return n(357)}},355:function(t,e,n){var s=n(54),o=n(356);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},356:function(t,e,n){(e=n(55)(!1)).push([t.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}",""]),t.exports=e},357:function(t,e,n){var s=n(54),o=n(358);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[t.i,o,""]]);s(o,{insert:"head",singleton:!1}),t.exports=o.locals||{}},358:function(t,e,n){(e=n(55)(!1)).push([t.i,".actEmptyConnectorsPrompt__logo+.actEmptyConnectorsPrompt__logo{margin-left:16px}",""]),t.exports=e},380:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return _}));var s=n(1),o=n.n(s),i=n(3),c=n(2),a=n(10),r=n(93),l=n(15),u=n(24),d=n(21),b=n(131),g=n(29),p=n(133),j=n(0);const m=({idsToDelete:t,apiDeleteCall:e,onDeleted:n,onCancel:c,onErrors:a,singleTitle:r,multipleTitle:l,showWarningText:u,warningText:d,setIsLoadingState:b})=>{const[m,x]=Object(s.useState)(!1);Object(s.useEffect)((()=>{x(t.length>0)}),[t]);const{http:f,notifications:{toasts:C}}=Object(g.b)().services,y=t.length;return m?Object(j.jsx)(i.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:Object(p.y)(y,r,l),onCancel:()=>{x(!1),c()},onConfirm:async()=>{x(!1),b(!0);const{successes:s,errors:o}=await e({ids:t,http:f});b(!1);const i=s.length,c=o.length;i>0&&C.addSuccess(Object(p.G)(i,r,l)),c>0&&(C.addDanger(Object(p.A)(c,r,l)),await a()),await n(s)},cancelButtonText:p.c,confirmButtonText:Object(p.y)(y,r,l)},Object(j.jsx)("p",null,Object(p.z)(y,r,l)),u&&Object(j.jsx)(i.EuiCallOut,{title:Object(j.jsx)(o.a.Fragment,null,d),color:"warning",iconType:"warning"})):null};var x=n(194),f=(n(349),n(19));n(354);const C=({onCTAClicked:t,docLinks:e})=>Object(j.jsx)(i.EuiPageTemplate.EmptyPrompt,{"data-test-subj":"createFirstConnectorEmptyPrompt",title:Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)(i.EuiIcon,{type:"logoSlack",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),Object(j.jsx)(i.EuiIcon,{type:"logoGmail",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),Object(j.jsx)(i.EuiIcon,{type:"logoWebhook",size:"xl",className:"actEmptyConnectorsPrompt__logo"}),Object(j.jsx)(i.EuiSpacer,{size:"s"}),Object(j.jsx)(i.EuiTitle,{size:"m"},Object(j.jsx)("h2",null,Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorEmptyTitle",defaultMessage:"Create your first connector"})))),body:Object(j.jsx)("p",null,Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorEmptyBody",defaultMessage:"Configure various third-party services to Kibana."})),actions:Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)(i.EuiButton,{"data-test-subj":"createFirstActionButton",key:"create-action",fill:!0,iconType:"plusInCircle",iconSide:"left",onClick:t},Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.components.emptyConnectorsPrompt.addConnectorButtonLabel",defaultMessage:"Create connector"})),Object(j.jsx)("br",null),Object(j.jsx)(i.EuiButtonEmpty,{"data-test-subj":"documentationButton",key:"documentation-button",target:"_blank",href:e.links.alerting.connectors,iconType:"help"},Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.documentationButtonLabel",defaultMessage:"Documentation"})))});var y=n(56),T=n(52),O=n(83),I=n(82),h=n(176),L=n(177),E=n(6);const k=()=>Object(j.jsx)(i.EuiIconTip,{"aria-label":"Warning",size:"m",type:"warning",color:"warning",content:T.a,position:"right",iconProps:{style:{verticalAlign:"text-top"}}}),_=()=>{const{http:t,notifications:{toasts:e},application:{capabilities:n},actionTypeRegistry:p,setBreadcrumbs:_,chrome:U,docLinks:v}=Object(g.b)().services,{connectorId:F}=Object(r.useParams)(),S=Object(r.useHistory)(),P=Object(r.useLocation)(),B=Object(b.b)(n),R=Object(b.e)(n),[z,N]=Object(s.useState)(void 0),[$,G]=Object(s.useState)([]),[W,H]=Object(s.useState)(0),[q,K]=Object(s.useState)([]),[J,Q]=Object(s.useState)(!1),[V,X]=Object(s.useState)(!0),[Y,Z]=Object(s.useState)(!1),[tt,et]=Object(s.useState)({}),[nt,st]=Object(s.useState)([]);Object(s.useEffect)((()=>{lt()}),[]);const[ot,it]=Object(s.useState)(!1);Object(s.useEffect)((()=>{_([Object(h.a)("connectors")]),U.docTitle.change(Object(L.a)("connectors"))}),[U,_]),Object(s.useEffect)((()=>{(async()=>{try{Q(!0);const e=await Object(d.d)({http:t}),n={};for(const t of e)n[t.id]=t;N(n)}catch(t){e.addDanger({title:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadConnectorTypesMessage",{defaultMessage:"Unable to load connector types"})})}finally{Q(!1)}})()}),[]);const ct=z?$.map((t=>({...t,actionType:z[t.actionTypeId]?z[t.actionTypeId].name:t.actionTypeId,compatibility:z[t.actionTypeId]?Object(l.getConnectorCompatibility)(z[t.actionTypeId].supportedFeatureIds):[]}))):[],at=z?Object.values(z).map((t=>({value:t.id,name:`${t.name} (${M($,t.id)})`}))).sort(((t,e)=>t.name.localeCompare(e.name))):[];function rt(t){const e=t.map((t=>t.id));st(e),function(t){const e=t.some((t=>{const e=$.find((e=>e.id===t));return(e&&e.referencedByCount?e.referencedByCount:0)>0}));it(e)}(e)}async function lt(){X(!0);try{const e=await Object(d.e)({http:t});G(e)}catch(t){e.addDanger({title:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.unableToLoadActionsMessage",{defaultMessage:"Unable to load connectors"})})}finally{X(!1)}}function ut(t,e,n){et({initialConnector:t,tab:e,isFix:null!=n&&n})}Object(s.useEffect)((()=>{if(F&&!V){const t=$.find((t=>t.id===F));t&&ut(t,f.h.Configuration);const e=S.createHref({pathname:E.x});window.history.replaceState(null,"",e)}}),[$,F,S,V,P]);const dt=[{field:"name","data-test-subj":"connectorsTableCell-name",name:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.nameTitle",{defaultMessage:"Name"}),sortable:!1,truncateText:!0,render:(t,e)=>{var n;const s=Object(x.b)(z&&z[e.actionTypeId]),a=e.isDeprecated,r=function(t,e){return e.isDeprecated?`${t} ${T.b}`:t}(t,e),l=Object(j.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiLink,{"data-test-subj":`edit${e.id}`,title:r,onClick:()=>ut(e,f.h.Configuration),key:e.id,disabled:!z||!(null!==(n=z[e.actionTypeId])&&void 0!==n&&n.enabled)},r)),e.isMissingSecrets?Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiIconTip,{iconProps:{"data-test-subj":`missingSecrets_${e.id}`,style:{verticalAlign:"text-top"}},type:"warning",color:"warning",content:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.missingSecretsDescription",{defaultMessage:"Sensitive information was not imported"}),position:"right"})):null,a&&Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(k,null)));return s.isEnabled?l:Object(j.jsx)(o.a.Fragment,null,l,Object(j.jsx)(i.EuiIconTip,{type:"questionInCircle",content:s.message,position:"right"}))}},{field:"actionType","data-test-subj":"connectorsTableCell-actionType",name:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actionTypeTitle",{defaultMessage:"Type"}),sortable:!1,truncateText:!0},{field:"compatibility","data-test-subj":"connectorsTableCell-compatibility",name:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.compatibility",{defaultMessage:"Compatibility"}),sortable:!1,truncateText:!0,render:t=>Object(j.jsx)(i.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs","data-test-subj":"compatibility-content"},t.map((t=>Object(j.jsx)(i.EuiFlexItem,{grow:!1,key:t},Object(j.jsx)(i.EuiBadge,{"data-test-subj":"connectorsTableCell-compatibility-badge",color:"default"},t)))))},{name:"",render:t=>{var e;return Object(j.jsx)(i.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},Object(j.jsx)(w,{canDelete:B,item:t,onDelete:()=>rt([t])}),t.isMissingSecrets?Object(j.jsx)(o.a.Fragment,null,z&&null!==(e=z[t.actionTypeId])&&void 0!==e&&e.enabled?Object(j.jsx)(i.EuiFlexItem,{grow:!1,style:{marginLeft:4}},Object(j.jsx)(i.EuiToolTip,{content:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.fixActionDescription",{defaultMessage:"Fix connector configuration"})},Object(j.jsx)(i.EuiButtonEmpty,{size:"xs","data-test-subj":"fixConnectorButton",onClick:()=>ut(t,f.h.Configuration,!0)},c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.fixButtonLabel",{defaultMessage:"Fix"})))):null):Object(j.jsx)(A,{canExecute:!!(Object(b.c)(n,t.actionTypeId)&&z&&z[t.actionTypeId]),item:t,onRun:()=>ut(t,f.h.Test)}))}}],bt=Object(j.jsx)(i.EuiInMemoryTable,{loading:V||J,items:ct,sorting:!0,itemId:"id",columns:dt,rowProps:t=>{var e;return{className:z&&null!==(e=z[t.actionTypeId])&&void 0!==e&&e.enabled?"":"actConnectorsList__tableRowDisabled","data-test-subj":"connectors-row"}},cellProps:t=>{var e;return{"data-test-subj":"cell",className:z&&null!==(e=z[t.actionTypeId])&&void 0!==e&&e.enabled?"":"actConnectorsList__tableCellDisabled"}},"data-test-subj":"actionsTable",pagination:{initialPageIndex:0,pageIndex:W},onTableChange:({page:t})=>{t&&H(t.index)},selection:B?{onSelectionChange(t){K(t)},selectable:({isPreconfigured:t})=>!t}:void 0,search:{filters:[{type:"field_value_selection",field:"actionTypeId",name:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.filters.actionTypeIdName",{defaultMessage:"Type"}),multiSelect:"or",options:at}],toolsLeft:(0!==q.length&&B?[Object(j.jsx)(i.EuiButton,{key:"delete",iconType:"trash",color:"danger","data-test-subj":"bulkDelete",onClick:()=>rt(q),title:B?void 0:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.buttons.deleteDisabledTitle",{defaultMessage:"Unable to delete connectors"})},Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.buttons.deleteLabel",defaultMessage:"Delete {count}",values:{count:q.length}}))]:[]).concat(R?[Object(j.jsx)(i.EuiButton,{"data-test-subj":"createActionButton",key:"create-action",fill:!0,onClick:()=>Z(!0)},Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.addActionButtonLabel",defaultMessage:"Create connector"}))]:[])}});return Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)(i.EuiPageTemplate.Section,{paddingSize:"none","data-test-subj":"actionsList",alignment:0===ct.length?"center":"top"},Object(j.jsx)(m,{"data-test-subj":"deleteConnectorsConfirmation",onDeleted:t=>{if(0===q.length||q.length===t.length){const t=$.filter((t=>t.id&&!nt.includes(t.id)));G(t),K([])}st([])},onErrors:async()=>{await lt(),st([])},onCancel:async()=>{st([])},apiDeleteCall:d.b,idsToDelete:nt,singleTitle:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.singleTitle",{defaultMessage:"connector"}),multipleTitle:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.multipleTitle",{defaultMessage:"connectors"}),showWarningText:ot,warningText:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.warningText",{defaultMessage:"{connectors, plural, one {This connector is} other {Some connectors are}} currently in use.",values:{connectors:nt.length}}),setIsLoadingState:t=>Q(t)}),(V||J)&&Object(j.jsx)(y.a,null),0!==ct.length&&bt,0===ct.length&&R&&!V&&!J&&Object(j.jsx)(C,{onCTAClicked:()=>Z(!0),docLinks:v}),0===ct.length&&!R&&Object(j.jsx)(D,null),Y?Object(j.jsx)(O.CreateConnectorFlyout,{onClose:()=>{Z(!1)},onTestConnector:t=>ut(t,f.h.Test),onConnectorCreated:lt,actionTypeRegistry:p}):null,tt.initialConnector?Object(j.jsx)(I.EditConnectorFlyout,{key:`${tt.initialConnector.id}${tt.tab?`:${tt.tab}`:""}`,connector:tt.initialConnector,tab:tt.tab,onClose:()=>{et(Object(a.omit)(tt,"initialConnector"))},onConnectorUpdated:t=>{et({...tt,initialConnector:t}),lt()},actionTypeRegistry:p}):null))};function M(t,e){return t.filter((t=>t.actionTypeId===e)).length}const w=({item:t,canDelete:e,onDelete:n})=>t.isPreconfigured?Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiBetaBadge,{"data-test-subj":"preConfiguredTitleMessage",label:c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.preconfiguredTitleMessage",{defaultMessage:"Preconfigured"}),tooltipContent:"This connector can't be deleted."})):Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiToolTip,{content:e?c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionDescription",{defaultMessage:"Delete this connector"}):c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionDisabledDescription",{defaultMessage:"Unable to delete connectors"})},Object(j.jsx)(i.EuiButtonIcon,{isDisabled:!e,"data-test-subj":"deleteConnector","aria-label":c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.deleteActionName",{defaultMessage:"Delete"}),onClick:n,iconType:"trash"}))),A=({item:t,canExecute:e,onRun:n})=>Object(j.jsx)(i.EuiFlexItem,{grow:!1},Object(j.jsx)(i.EuiToolTip,{content:e?c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorDescription",{defaultMessage:"Run this connector"}):c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorDisabledDescription",{defaultMessage:"Unable to run connectors"})},Object(j.jsx)(i.EuiButtonIcon,{isDisabled:!e,"data-test-subj":"runConnector","aria-label":c.i18n.translate("xpack.triggersActionsUI.sections.actionsConnectorsList.connectorsListTable.columns.actions.runConnectorName",{defaultMessage:"Run"}),onClick:n,iconType:"play"}))),D=()=>Object(j.jsx)(i.EuiEmptyPrompt,{iconType:"securityApp",title:Object(j.jsx)("h1",null,Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.noPermissionToCreateTitle",defaultMessage:"No permissions to create connectors"})),body:Object(j.jsx)("p",{"data-test-subj":"permissionDeniedMessage"},Object(j.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.actionsConnectorsList.noPermissionToCreateDescription",defaultMessage:"Contact your system administrator."}))})}}]);