/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[41],{106:function(e,t,n){"use strict";n.r(t),n.d(t,"AddConnectorInline",(function(){return p})),n.d(t,"default",(function(){return p}));var o=n(1),c=n.n(o),i=n(2),s=n(24),a=n(3),r=n(50),l=n(131),d=n(29),u=n(197),j=n(212),b=n(0);const p=({actionTypesIndex:e,actionItem:t,index:n,connectors:p,onAddConnector:m,onDeleteConnector:g,onSelectConnector:x,actionTypeRegistry:I,emptyActionsIds:O})=>{var v;const{application:{capabilities:A}}=Object(d.b)().services,C=Object(l.e)(A),[f,y]=Object(o.useState)(!1),[T,E]=Object(o.useState)(!1),M=e?e[t.actionTypeId].name:t.actionTypeId,F=I.get(t.actionTypeId),k=(null!==(v=null==F?void 0:F.subtype)&&void 0!==v?v:[]).map((e=>e.id)),w=Object(o.useMemo)((()=>[`Unable to load ${F.actionTypeTitle} connector`]),[F.actionTypeTitle]),S=Object(b.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.emptyConnectorsLabel",defaultMessage:"No {actionTypeName} connectors",values:{actionTypeName:M}}),U=Object(b.jsx)(a.EuiText,{color:"danger"},Object(b.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle",defaultMessage:"Unable to load connector"}));Object(o.useEffect)((()=>{Object(u.a)(p,t,e,k).length>0&&y(!0),E(!!O.find((e=>t.id===e)))}),[]);const h=Object(b.jsx)(a.EuiFormRow,{fullWidth:!0,label:Object(b.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.actionIdLabel",defaultMessage:"Use another {connectorInstance} connector",values:{connectorInstance:M}}),labelAppend:Object(b.jsx)(a.EuiButtonEmpty,{size:"xs","data-test-subj":`addNewActionConnectorButton-${t.actionTypeId}`,onClick:m},Object(b.jsx)(s.FormattedMessage,{defaultMessage:"Add connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.connectorAddInline.addNewConnectorEmptyButton"})),error:w,isInvalid:!0},Object(b.jsx)(j.a,{actionItem:t,accordionIndex:n,actionTypesIndex:e,actionTypeRegistered:F,connectors:p,onConnectorSelected:x,allowGroupConnector:k}));return Object(b.jsx)(c.a.Fragment,null,Object(b.jsx)(a.EuiAccordion,{key:n,initialIsOpen:!0,id:n.toString(),className:"actAccordionActionForm",buttonContentClassName:"actAccordionActionForm__button","data-test-subj":`alertActionAccordion-${n}`,buttonContent:Object(b.jsx)(a.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiIcon,{type:F.iconClass,size:"m"})),Object(b.jsx)(a.EuiFlexItem,null,Object(b.jsx)(a.EuiText,null,Object(b.jsx)("div",null,Object(b.jsx)(s.FormattedMessage,{defaultMessage:"{actionConnectorName}",id:"xpack.triggersActionsUI.sections.connectorAddInline.newRuleActionTypeEditTitle",values:{actionConnectorName:F.actionTypeTitle}})))),!T&&Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiIconTip,{type:"warning",size:"m",color:"danger","data-test-subj":"alertActionAccordionErrorTooltip",content:Object(b.jsx)(s.FormattedMessage,{defaultMessage:"Unable to load connector",id:"xpack.triggersActionsUI.sections.connectorAddInline.unableToLoadConnectorTitle'"})})),F&&F.isExperimental&&Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiBetaBadge,{label:r.q,tooltipContent:r.p}))),extraAction:Object(b.jsx)(a.EuiButtonIcon,{iconType:"minusInCircle",color:"danger",className:"actAccordionActionForm__extraAction","aria-label":i.i18n.translate("xpack.triggersActionsUI.sections.connectorAddInline.accordion.deleteIconAriaLabel",{defaultMessage:"Delete"}),onClick:g}),paddingSize:"l"},C?f?h:Object(b.jsx)(a.EuiEmptyPrompt,{title:T?S:U,actions:Object(b.jsx)(a.EuiButton,{color:"primary",fill:!0,size:"s","data-test-subj":`createActionConnectorButton-${n}`,onClick:m},Object(b.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.addConnectorButtonLabel",defaultMessage:"Create a connector"}))}):Object(b.jsx)(a.EuiCallOut,{title:S},Object(b.jsx)("p",null,Object(b.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.connectorAddInline.unauthorizedToCreateForEmptyConnectors",defaultMessage:"Only authorized users can configure a connector. Contact your administrator."})))),Object(b.jsx)(a.EuiSpacer,{size:"xs"}))}},131:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r}));const o=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},c=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},i=(e,t)=>{var n,o;return".sentinelone"===t?null==e||null===(n=e.actions)||void 0===n?void 0:n.save:null==e||null===(o=e.actions)||void 0===o?void 0:o.execute},s=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function a(e,t){var n,o;return null!==(n=null==t||null===(o=t.authorizedConsumers[e])||void 0===o?void 0:o.all)&&void 0!==n&&n}const r=e=>{var t,n;return null==e||null===(t=e.management)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.api_keys}},197:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));const o=(e,t,n,o=[])=>{const c=n[t.actionTypeId];return e.filter((e=>(o.includes(e.actionTypeId)||e.actionTypeId===t.actionTypeId)&&((null==c?void 0:c.enabledInConfig)||e.isPreconfigured)))}},212:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(3),c=n(1),i=n.n(c),s=n(2),a=n(197),r=n(0);const l=i.a.memo(d);function d({allowGroupConnector:e,actionItem:t,accordionIndex:n,actionTypesIndex:i,actionTypeRegistered:s,connectors:l,onConnectorSelected:d}){var b;const p=Object(c.useMemo)((()=>Object(a.a)(l,t,i,e)),[t,i,e,l]),g=Object(c.useMemo)((()=>u(t.id,p,s,e)),[t.id,p,s,e]),x=Object(c.useMemo)((()=>j(p,s)),[p,s]),[I,O]=Object(c.useState)(g.length>0?g[0]:void 0),v=Object(c.useCallback)((e=>{var t,n;O(e[0]),d(null!==(t=null===(n=e[0].value)||void 0===n?void 0:n.id)&&void 0!==t?t:"")}),[d]);return Object(r.jsx)(o.EuiComboBox,{"aria-label":m,"data-test-subj":`selectActionConnector-${t.actionTypeId}-${n}`,fullWidth:!0,singleSelection:{asPlainText:!0},id:`selectActionConnector-${t.id}`,isClearable:!1,onChange:v,options:x,selectedOptions:g,prepend:null==I||null===(b=I.value)||void 0===b?void 0:b.prependComponent})}const u=(e,t,n,o=[])=>{const c=t.find((t=>t.id===e));return c?[b(c,n)]:[]},j=(e,t)=>e.map((e=>b(e,t))),b=(e,t)=>{const n=p(e,t);let o;if(null!=t.customConnectorSelectItem){const n=t.customConnectorSelectItem.getComponent(e);n&&(o=Object(r.jsx)(n,{actionConnector:e}))}return{label:n,value:{title:n,id:e.id,prependComponent:o},key:e.id,"data-test-subj":`dropdown-connector-${e.id}`}},p=(e,t)=>null!=t.customConnectorSelectItem?t.customConnectorSelectItem.getText(e):e.name,m=s.i18n.translate("xpack.triggersActionsUI.sections.actionForm.incidentManagementSystemLabel",{defaultMessage:"Incident management system"})}}]);