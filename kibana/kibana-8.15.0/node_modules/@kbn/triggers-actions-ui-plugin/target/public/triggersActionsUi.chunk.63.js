/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[63],{209:function(e,t,s){"use strict";s.r(t),s.d(t,"NOTIFY_WHEN_OPTIONS",(function(){return g})),s.d(t,"RuleNotifyWhen",(function(){return b}));var n=s(1),o=s.n(n),r=s(2),i=s(24),l=s(3),a=s(159),c=s(146),u=s(51),j=s(0);const g=[{value:"onActionGroupChange",inputDisplay:r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActionGroupChange.display",{defaultMessage:"On status changes"}),"data-test-subj":"onActionGroupChange",dropdownDisplay:Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)("strong",null,Object(j.jsx)(i.FormattedMessage,{defaultMessage:"On status changes",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActionGroupChange.label"})),Object(j.jsx)(l.EuiText,{size:"s",color:"subdued"},Object(j.jsx)("p",null,Object(j.jsx)(i.FormattedMessage,{defaultMessage:"Actions run if the alert status changes.",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActionGroupChange.description"}))))},{value:"onActiveAlert",inputDisplay:r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActiveAlert.display",{defaultMessage:"On check intervals"}),"data-test-subj":"onActiveAlert",dropdownDisplay:Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)("strong",null,Object(j.jsx)(i.FormattedMessage,{defaultMessage:"On check intervals",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActiveAlert.label"})),Object(j.jsx)(l.EuiText,{size:"s",color:"subdued"},Object(j.jsx)("p",null,Object(j.jsx)(i.FormattedMessage,{defaultMessage:"Actions run if rule conditions are met.",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onActiveAlert.description"}))))},{value:"onThrottleInterval",inputDisplay:r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onThrottleInterval.display",{defaultMessage:"On custom action intervals"}),"data-test-subj":"onThrottleInterval",dropdownDisplay:Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)("strong",null,Object(j.jsx)(i.FormattedMessage,{defaultMessage:"On custom action intervals",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onThrottleInterval.label"})),Object(j.jsx)(l.EuiText,{size:"s",color:"subdued"},Object(j.jsx)("p",null,Object(j.jsx)(i.FormattedMessage,{defaultMessage:"Actions run if rule conditions are met.",id:"xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.onThrottleInterval.description"}))))}],b=({rule:e,throttle:t,throttleUnit:s,onNotifyWhenChange:b,onThrottleChange:d})=>{const[p,O]=Object(n.useState)(t||1),[h,x]=Object(n.useState)(!1),[f,m]=Object(n.useState)("onActionGroupChange");Object(n.useEffect)((()=>{e.notifyWhen?m(e.notifyWhen):m(e.throttle?"onThrottleInterval":"onActiveAlert")}),[e]),Object(n.useEffect)((()=>{x("onThrottleInterval"===f)}),[f]);const A=Object(n.useCallback)((e=>{d("onThrottleInterval"===e?p:null,s),b(e),m(e)}),[]),F=Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.renotifyFieldLabel",defaultMessage:"Notify"})," ",Object(j.jsx)(l.EuiIconTip,{position:"right",type:"questionInCircle",content:r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.renotifyWithTooltip",{defaultMessage:"Define how often alerts generate actions."})}));return Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)(l.EuiFormRow,{fullWidth:!0,label:F},Object(j.jsx)(l.EuiFlexGroup,{gutterSize:"s"},Object(j.jsx)(l.EuiFlexItem,null,Object(j.jsx)(l.EuiSuperSelect,{"data-test-subj":"notifyWhenSelect",options:g,valueOfSelected:f,onChange:A}),h&&Object(j.jsx)(o.a.Fragment,null,Object(j.jsx)(l.EuiSpacer,null),Object(j.jsx)(l.EuiFormRow,{fullWidth:!0},Object(j.jsx)(l.EuiFlexGroup,{gutterSize:"s"},Object(j.jsx)(l.EuiFlexItem,null,Object(j.jsx)(l.EuiFieldNumber,{fullWidth:!0,min:1,value:p,name:"throttle","data-test-subj":"throttleInput",prepend:r.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.ruleNotifyWhen.label",{defaultMessage:"Every"}),onChange:e=>{Object(c.pipe)(Object(a.some)(e.target.value.trim()),Object(a.filter)((e=>""!==e)),Object(a.map)((e=>parseInt(e,10))),Object(a.filter)((e=>!isNaN(e))),Object(a.map)((e=>{O(e),d(e,s)})))}})),Object(j.jsx)(l.EuiFlexItem,{grow:!1},Object(j.jsx)(l.EuiSelect,{"data-test-subj":"throttleUnitInput",value:s,options:Object(u.b)(null!=t?t:1),onChange:e=>{d(t,e.target.value)}})))))))))}}}]);