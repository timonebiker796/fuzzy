/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[51],{158:function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s(1);var i=s(2),o=s(3),n=s(0);const l=({children:e,onClose:t})=>Object(n.jsx)(o.EuiPopoverTitle,null,Object(n.jsx)(o.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(n.jsx)(o.EuiFlexItem,null,e),Object(n.jsx)(o.EuiFlexItem,{grow:!1},Object(n.jsx)(o.EuiButtonIcon,{iconType:"cross",color:"danger","aria-label":i.i18n.translate("xpack.triggersActionsUI.common.expressionItems.components.closablePopoverTitle.closeLabel",{defaultMessage:"Close"}),onClick:()=>t()}))))},369:function(e,t,s){"use strict";s.r(t),s.d(t,"GroupByExpression",(function(){return d})),s.d(t,"default",(function(){return d}));var i=s(1),o=s.n(i),n=s(24),l=s(0),r=s(2),a=s(3),u=s(14),c=s(158),p={name:"jixqcp",styles:"min-width:50px"};const d=({groupBy:e,errors:t,onChangeSelectedTermSize:s,onChangeSelectedTermField:d,onChangeSelectedGroupBy:m,display:j="inline",fields:g,termSize:b,termField:x,customGroupByTypes:v,popupPosition:O,canSelectMultiTerms:y})=>{const I=null!=v?v:u.builtInGroupByTypes,[f,E]=Object(i.useState)(!1),h=Object(i.useMemo)((()=>(null!=g?g:[]).reduce(((t,s)=>(I[e].validNormalizedTypes.includes(s.normalizedType)&&t.push({label:s.name}),t)),[])),[I,g,e]),F=Object(i.useMemo)((()=>{let e=[];return x&&(e=Array.isArray(x)?x:[x]),e.map((e=>({label:e})))}),[x]),[S,T]=Object(i.useState)(F);return Object(i.useEffect)((()=>{e===u.builtInGroupByTypes.all.value&&S.length>0&&(T([]),d(void 0))}),[S,e,d]),Object(i.useEffect)((()=>{g&&S.some((e=>!g.some((t=>t.name===e.label))))&&(T([]),d(void 0))}),[S,g,d]),Object(l.jsx)(a.EuiPopover,{button:Object(l.jsx)(a.EuiExpression,{description:`${I[e].sizeRequired?r.i18n.translate("xpack.triggersActionsUI.common.expressionItems.groupByType.groupedOverLabel",{defaultMessage:"grouped over"}):r.i18n.translate("xpack.triggersActionsUI.common.expressionItems.groupByType.overLabel",{defaultMessage:"over"})}`,"data-test-subj":"groupByExpression",value:`${I[e].text} ${I[e].sizeRequired?`${b} ${x?`'${x}'`:""}`:""}`,isActive:f||"top"===e&&!(b&&x),onClick:()=>{E(!0)},display:"inline"===j?"inline":"columns",isInvalid:!("all"===e||b&&x&&x.length>0)}),isOpen:f,closePopover:()=>{E(!1)},ownFocus:!0,display:"fullWidth"===j?"block":"inline-block",anchorPosition:null!=O?O:"downRight",repositionOnScroll:!0},Object(l.jsx)("div",null,Object(l.jsx)(c.a,{onClose:()=>E(!1)},Object(l.jsx)(n.FormattedMessage,{id:"xpack.triggersActionsUI.common.expressionItems.groupByType.overButtonLabel",defaultMessage:"over"})),Object(l.jsx)(a.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(l.jsx)(a.EuiFlexItem,{grow:1},Object(l.jsx)(a.EuiSelect,{"data-test-subj":"overExpressionSelect",value:e,onChange:e=>{I[e.target.value].sizeRequired?(s(1),d("")):(s(void 0),d(void 0)),m(e.target.value)},options:Object.values(I).map((({text:e,value:t})=>({text:e,value:t})))})),I[e].sizeRequired?Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(a.EuiFlexItem,{grow:1},Object(l.jsx)(a.EuiFormRow,{isInvalid:t.termSize.length>0,error:t.termSize},Object(l.jsx)(a.EuiFieldNumber,{"data-test-subj":"fieldsNumberSelect",css:p,isInvalid:t.termSize.length>0,value:b||"",onChange:e=>{const{value:t}=e.target,i=""!==t?parseFloat(t):void 0;s(i)},min:1,max:1e3}))),Object(l.jsx)(a.EuiFlexItem,{grow:2},Object(l.jsx)(a.EuiFormRow,{isInvalid:t.termField.length>0,error:t.termField},Object(l.jsx)(a.EuiComboBox,{singleSelection:!y&&{asPlainText:!0},placeholder:r.i18n.translate("xpack.triggersActionsUI.common.expressionItems.groupByType.timeFieldOptionLabel",{defaultMessage:"Select a field"}),"data-test-subj":"fieldsExpressionSelect",isInvalid:t.termField.length>0,selectedOptions:S,onChange:e=>{const t=e.map((e=>e.label)),s=Array.isArray(t)&&t.length>1?t:t[0];d(s),T(e)},options:h})))):null)))}}}]);