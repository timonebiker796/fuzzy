(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[2],{32:function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"f",(function(){return x})),s.d(t,"e",(function(){return d})),s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return p}));var a=s(1),i=s(2),l=s(7),n=s(0),o=s(5),r=s(17),u=s(16);s.d(t,"d",(function(){return u.a}));const c=()=>[{text:a.i18n.translate("visTypeXy.interpolationModes.straightText",{defaultMessage:"Straight"}),value:n.d.Linear},{text:a.i18n.translate("visTypeXy.interpolationModes.smoothedText",{defaultMessage:"Smoothed"}),value:n.d.Cardinal},{text:a.i18n.translate("visTypeXy.interpolationModes.steppedText",{defaultMessage:"Stepped"}),value:n.d.StepAfter}],x=()=>[{value:n.f.Full,text:a.i18n.translate("visTypeXy.thresholdLine.style.fullText",{defaultMessage:"Full"})},{value:n.f.Dashed,text:a.i18n.translate("visTypeXy.thresholdLine.style.dashedText",{defaultMessage:"Dashed"})},{value:n.f.DotDashed,text:a.i18n.translate("visTypeXy.thresholdLine.style.dotdashedText",{defaultMessage:"Dot-dashed"})}],d=()=>[{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.horizontalText",{defaultMessage:"Horizontal"}),value:l.LabelRotation.Horizontal},{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.verticalText",{defaultMessage:"Vertical"}),value:l.LabelRotation.Vertical},{text:a.i18n.translate("visTypeXy.categoryAxis.rotate.angledText",{defaultMessage:"Angled"}),value:l.LabelRotation.Angled}],b=()=>[{value:i.Fit.None,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.none",{defaultMessage:"Hide (Do not fill gaps)"})},{value:i.Fit.Zero,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.zero",{defaultMessage:"Zero (Fill gaps with zeros)"})},{value:i.Fit.Linear,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.linear",{defaultMessage:"Linear (Fill gaps with a line)"})},{value:i.Fit.Carry,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.carry",{defaultMessage:"Last (Fill gaps with the last value)"})},{value:i.Fit.Lookahead,text:a.i18n.translate("visTypeXy.fittingFunctionsTitle.lookahead",{defaultMessage:"Next (Fill gaps with the next value)"})}],p=()=>({legendPositions:Object(u.a)(),positions:Object(u.a)(),chartTypes:[{text:a.i18n.translate("visTypeXy.chartTypes.lineText",{defaultMessage:"Line"}),value:o.ChartType.Line},{text:a.i18n.translate("visTypeXy.chartTypes.areaText",{defaultMessage:"Area"}),value:o.ChartType.Area},{text:a.i18n.translate("visTypeXy.chartTypes.barText",{defaultMessage:"Bar"}),value:o.ChartType.Histogram}],axisModes:[{text:a.i18n.translate("visTypeXy.axisModes.normalText",{defaultMessage:"Normal"}),value:n.a.Normal},{text:a.i18n.translate("visTypeXy.axisModes.percentageText",{defaultMessage:"Percentage"}),value:n.a.Percentage},{text:a.i18n.translate("visTypeXy.axisModes.wiggleText",{defaultMessage:"Wiggle"}),value:n.a.Wiggle},{text:a.i18n.translate("visTypeXy.axisModes.silhouetteText",{defaultMessage:"Silhouette"}),value:n.a.Silhouette}],scaleTypes:Object(r.a)(),chartModes:[{text:a.i18n.translate("visTypeXy.chartModes.normalText",{defaultMessage:"Normal"}),value:n.c.Normal},{text:a.i18n.translate("visTypeXy.chartModes.stackedText",{defaultMessage:"Stacked"}),value:n.c.Stacked}],interpolationModes:c(),thresholdLineStyles:x(),fittingFunctions:b()})},33:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return H}));var a=s(10),i=s.n(a),l=s(29),n=s(8),o=s(2),r=s(3),u=s(30),c=s(13),x=s(11),d=s.n(x),b=s(1),p=s(27),j=s(26),y=s(32),m=s(9);const g=Object(y.c)();function v({chart:e,setChart:t}){const s=Object(a.useCallback)(((e,s)=>{t(e,""===s?void 0:s)}),[t]);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(j.SwitchOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.series.showLineLabel",{defaultMessage:"Show line"}),paramName:"drawLinesBetweenPoints",value:e.drawLinesBetweenPoints,setValue:t}),Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(j.SelectOption,{disabled:!e.drawLinesBetweenPoints,label:b.i18n.translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:g,paramName:"interpolate",value:e.interpolate,setValue:t})),Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(j.NumberInputOption,{disabled:!e.drawLinesBetweenPoints,label:b.i18n.translate("visTypeXy.controls.pointSeries.series.lineWidthLabel",{defaultMessage:"Line width"}),paramName:"lineWidth",step:.5,min:0,value:e.lineWidth,setValue:s}))))}function O({chart:e,setChart:t}){return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(j.SwitchOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.series.showDotsLabel",{defaultMessage:"Show dots"}),paramName:"showCircles",value:e.showCircles,setValue:t}),Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(n.EuiFormRow,{label:b.i18n.translate("visTypeXy.controls.pointSeries.series.circlesRadius",{defaultMessage:"Dots size"}),fullWidth:!0,display:"rowCompressed"},Object(m.jsx)(n.EuiRange,{"data-test-subj":"circlesRadius",value:e.circlesRadius,min:1,max:10,step:1,fullWidth:!0,disabled:!e.showCircles,showInput:!0,compressed:!0,onChange:e=>{t("circlesRadius",Number(e.currentTarget.value))}})))}var A=s(5);const T=Object(y.a)();function h({chart:e,index:t,valueAxes:s,changeValueAxis:l,setParamByIndex:o}){const r=Object(a.useCallback)(((e,s)=>{o("seriesParams",t,e,s)}),[o,t]),u=Object(a.useCallback)(((e,s)=>{l(t,e,s)}),[l,t]),c=Object(a.useMemo)((()=>[...s.map((({id:e,name:t})=>({text:t,value:e}))),{text:b.i18n.translate("visTypeXy.controls.pointSeries.series.newAxisLabel",{defaultMessage:"New axisâ€¦"}),value:"new"}]),[s]);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(j.SelectOption,{id:`seriesValueAxis${t}`,label:b.i18n.translate("visTypeXy.controls.pointSeries.series.valueAxisLabel",{defaultMessage:"Value axis"}),options:c,paramName:"valueAxis",value:e.valueAxis,setValue:u}),Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(j.SelectOption,{id:`seriesType${t}`,label:b.i18n.translate("visTypeXy.controls.pointSeries.series.chartTypeLabel",{defaultMessage:"Chart type"}),options:T.chartTypes,paramName:"type",value:e.type,setValue:r})),Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(j.SelectOption,{id:`seriesMode${t}`,label:b.i18n.translate("visTypeXy.controls.pointSeries.series.modeLabel",{defaultMessage:"Mode"}),options:T.chartModes,paramName:"mode",value:e.mode,setValue:r}))),e.type===A.ChartType.Area&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(j.SelectOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.series.lineModeLabel",{defaultMessage:"Line mode"}),options:T.interpolationModes,paramName:"interpolate",value:e.interpolate,setValue:r})),e.type===A.ChartType.Line&&Object(m.jsx)(v,{chart:e,setChart:r}),(e.type===A.ChartType.Area||e.type===A.ChartType.Line)&&Object(m.jsx)(O,{chart:e,setChart:r}))}function f({seriesParams:e,...t}){return Object(m.jsx)(n.EuiPanel,{paddingSize:"s"},Object(m.jsx)(n.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,Object(m.jsx)(p.FormattedMessage,{id:"visTypeXy.controls.pointSeries.series.metricsTitle",defaultMessage:"Metrics"}))),Object(m.jsx)(n.EuiSpacer,{size:"s"}),e.map(((e,s)=>Object(m.jsx)(n.EuiAccordion,{id:`visEditorSeriesAccordion${e.data.id}`,key:s,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:0===s,buttonContent:e.data.label,buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":b.i18n.translate("visTypeXy.controls.pointSeries.seriesAccordionAriaLabel",{defaultMessage:"Toggle {agg} options",values:{agg:e.data.label}})},Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(h,d()({index:s,chart:e},t)))))))}var S=s(18);function M({axisLabels:e,axisFilterCheckboxName:t,setAxisLabel:s,disableSingleLayerAxisControls:l}){const o=Object(a.useCallback)(((e,t)=>{const a=Number(t);s(e,a)}),[s]),r=Object(a.useMemo)(y.e,[]),u=l?b.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.axisLabelsOptionsMultilayer.disabled",{defaultMessage:"This option can be configured only with non-time-based axes"}):void 0,c=!e.show||l;return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(n.EuiTitle,{size:"xxs"},Object(m.jsx)("h3",null,Object(m.jsx)(p.FormattedMessage,{id:"visTypeXy.controls.pointSeries.categoryAxis.labelsTitle",defaultMessage:"Labels"}))),Object(m.jsx)(n.EuiSpacer,{size:"s"}),Object(m.jsx)(j.SwitchOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:e.show,setValue:s}),Object(m.jsx)(j.SwitchOption,{"data-test-subj":t,disabled:c,label:b.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.filterLabelsLabel",{defaultMessage:"Filter labels"}),paramName:"filter",value:e.filter,setValue:s,tooltip:u}),Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(n.EuiToolTip,{content:u,delay:"long",position:"right"},Object(m.jsx)(j.SelectOption,{disabled:c,label:b.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.alignLabel",{defaultMessage:"Align"}),options:r,paramName:"rotate",value:e.rotate,setValue:o}))),Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(n.EuiToolTip,{content:u,delay:"long",position:"right"},Object(m.jsx)(S.a,{disabled:c,value:e.truncate,setValue:s})))))}s(15);const E=Object(y.d)();function C({axis:e,onPositionChanged:t,setCategoryAxis:s,useMultiLayerAxis:i}){const l=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};s(i)}),[s,e]),o=Object(a.useCallback)(((e,s)=>{l(e,s),t(s)}),[l,t]),r=Object(a.useCallback)(((t,s)=>{const a={...e.labels,[t]:s};l("labels",a)}),[e.labels,l]);return Object(m.jsx)(n.EuiPanel,{paddingSize:"s"},Object(m.jsx)(n.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,Object(m.jsx)(p.FormattedMessage,{id:"visTypeXy.controls.pointSeries.categoryAxis.xAxisTitle",defaultMessage:"X-axis"}))),Object(m.jsx)(n.EuiSpacer,{size:"s"}),Object(m.jsx)(j.SelectOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.positionLabel",{defaultMessage:"Position"}),options:E,paramName:"position",value:e.position,setValue:o,"data-test-subj":"categoryAxisPosition"}),Object(m.jsx)(j.SwitchOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.categoryAxis.showLabel",{defaultMessage:"Show axis lines and labels"}),paramName:"show",value:e.show,setValue:l}),e.show&&Object(m.jsx)(M,{axisLabels:e.labels,axisFilterCheckboxName:`xAxisFilterLabelsCheckbox${e.id}`,setAxisLabel:r,disableSingleLayerAxisControls:i}))}var L=s(0);const w=b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minErrorMessage",{defaultMessage:"Min should be less than Max."}),X=b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minNeededScaleText",{defaultMessage:"Min must exceed 0 when a log scale is selected."});function P(e){return null==e}function F({scale:e,setScale:t,setMultipleValidity:s}){const{min:l,max:o,type:r}=e,u=[];(function(e=null,t=null){return null===e||null===t||t>e})(l,o)||u.push(w),r===L.e.Log&&(P(l)||l<=0)&&u.push(X);const c=!u.length,x=Object(a.useCallback)(((e,s)=>{t(e,""===s?null:s)}),[t]);return Object(a.useEffect)((()=>(s("yExtents",c),()=>s("yExtents",!0))),[c,s]),Object(m.jsx)(n.EuiFormRow,{error:u,isInvalid:!!u.length,fullWidth:!0,display:"rowCompressed"},Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiFlexGroup,{gutterSize:"s"},Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(j.NumberInputOption,{"data-test-subj":"yAxisYExtentsMin",isInvalid:!!u.length,label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.minLabel",{defaultMessage:"Min"}),step:.1,paramName:"min",value:P(l)?"":l,setValue:x})),Object(m.jsx)(n.EuiFlexItem,null,Object(m.jsx)(j.NumberInputOption,{"data-test-subj":"yAxisYExtentsMax",label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.maxLabel",{defaultMessage:"Max"}),step:.1,paramName:"max",value:P(o)?"":o,setValue:x})))))}function V({axisScale:e,setMultipleValidity:t,setValueAxis:s,setValueAxisScale:l,disableAxisExtents:n=!1}){const o=b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.minNeededBoundsMargin",{defaultMessage:"Bounds margin must be greater than or equal to 0."}),r=!e.defaultYExtents||!e.boundsMargin||e.boundsMargin>=0,u=Object(a.useCallback)(((e,t)=>l(e,""===t?void 0:t)),[l]),c=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};i.defaultYExtents||delete i.boundsMargin,s("scale",i)}),[e,s]),x=Object(a.useCallback)(((t,a)=>{const i={...e,[t]:a};i.setYExtents||(delete i.min,delete i.max),s("scale",i)}),[e,s]);return Object(a.useEffect)((()=>(t("boundsMargin",r),()=>t("boundsMargin",!0))),[r,t]),Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(j.SwitchOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBoundsLabel",{defaultMessage:"Scale to data bounds"}),paramName:"defaultYExtents",value:e.defaultYExtents,setValue:c}),e.defaultYExtents&&Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(j.NumberInputOption,{error:!r&&o,isInvalid:!r,label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleToDataBounds.boundsMargin",{defaultMessage:"Bounds margin"}),step:.1,min:0,paramName:"boundsMargin",value:e.boundsMargin,setValue:u})),Object(m.jsx)(j.SwitchOption,{"data-test-subj":"yAxisSetYExtents",label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.setAxisExtentsLabel",{defaultMessage:"Set axis extents"}),paramName:"setYExtents",value:e.setYExtents,setValue:x,disabled:n}),e.setYExtents&&!n&&Object(m.jsx)(F,{scale:e,setScale:l,setMultipleValidity:t}))}const N=Object(y.a)();function k({axis:e,index:t,valueAxis:s,onValueAxisPositionChanged:l,setParamByIndex:o,setMultipleValidity:r}){const u=Object(a.useCallback)(((e,s)=>o("valueAxes",t,e,s)),[o,t]),c=Object(a.useCallback)(((e,a)=>{const i={...s.title,[e]:a};o("valueAxes",t,"title",i)}),[s.title,o,t]),x=Object(a.useCallback)(((e,a)=>{const i={...s.scale,[e]:a};o("valueAxes",t,"scale",i)}),[s.scale,o,t]),d=Object(a.useCallback)(((e,a)=>{const i={...s.labels,[e]:a};o("valueAxes",t,"labels",i)}),[s.labels,o,t]),p=Object(a.useCallback)(((e,s)=>{l(t,s)}),[t,l]);return Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(j.SelectOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.positionLabel",{defaultMessage:"Position"}),"data-test-subj":`valueAxisPosition-${e.id}`,options:N.positions,paramName:"position",value:e.position,setValue:p}),Object(m.jsx)(j.SelectOption,{id:`valueAxisMode${t}`,label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.modeLabel",{defaultMessage:"Mode"}),options:N.axisModes,paramName:"mode",value:e.scale.mode,setValue:x}),Object(m.jsx)(j.SelectOption,{id:`scaleSelectYAxis-${e.id}`,label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.scaleTypeLabel",{defaultMessage:"Scale type"}),options:N.scaleTypes,paramName:"type",value:e.scale.type,setValue:x}),Object(m.jsx)(n.EuiHorizontalRule,{margin:"m"}),Object(m.jsx)(j.SwitchOption,{label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.showLabel",{defaultMessage:"Show axis lines and labels"}),"data-test-subj":`valueAxisShow-${e.id}`,paramName:"show",value:e.show,setValue:u}),e.show?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(j.TextInputOption,{"data-test-subj":`valueAxisTitle${t}`,label:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.titleLabel",{defaultMessage:"Title"}),paramName:"text",value:e.title.text,setValue:c}),Object(m.jsx)(M,{axisLabels:e.labels,axisFilterCheckboxName:`yAxisFilterLabelsCheckbox-${e.id}`,setAxisLabel:d})):Object(m.jsx)(n.EuiSpacer,{size:"xs"}),Object(m.jsx)(n.EuiHorizontalRule,{margin:"s"}),Object(m.jsx)(n.EuiAccordion,{id:`yAxisOptionsAccordion${e.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:!1,buttonContentClassName:"euiText euiText--small",buttonContent:b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.customExtentsLabel",{defaultMessage:"Custom extents"}),"aria-label":b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.toggleCustomExtendsAriaLabel",{defaultMessage:"Toggle custom extents"})},Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(V,{axisScale:e.scale,setMultipleValidity:r,setValueAxisScale:x,setValueAxis:u,disableAxisExtents:"percentage"===e.scale.mode}))))}function z(e){const{addValueAxis:t,removeValueAxis:s,seriesParams:l,valueAxes:o}=e,r=Object(a.useCallback)((e=>{const t=o[0].id===e.id;return l.filter((s=>s.valueAxis===e.id||t&&!s.valueAxis)).map((e=>e.data.label)).join(", ")}),[l,o]),u=Object(a.useMemo)((()=>b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.removeButtonTooltip",{defaultMessage:"Remove Y-axis"})),[]),c=Object(a.useCallback)((e=>Object(m.jsx)(n.EuiToolTip,{position:"bottom",content:u},Object(m.jsx)(n.EuiButtonIcon,{color:"danger",iconType:"cross",onClick:()=>s(e),"aria-label":u,"data-test-subj":"removeValueAxisBtn"}))),[s,u]),x=Object(a.useMemo)((()=>b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.addButtonTooltip",{defaultMessage:"Add Y-axis"})),[]),d=Object(a.useCallback)((e=>{const t=r(e);return Object(m.jsx)(i.a.Fragment,null,e.name," ",Object(m.jsx)(n.EuiToolTip,{content:t},Object(m.jsx)(i.a.Fragment,null,t)))}),[r]);return Object(m.jsx)(n.EuiPanel,{paddingSize:"s"},Object(m.jsx)(n.EuiFlexGroup,{gutterSize:"none",justifyContent:"spaceBetween",alignItems:"baseline"},Object(m.jsx)(n.EuiFlexItem,{grow:!1},Object(m.jsx)(n.EuiTitle,{size:"xs"},Object(m.jsx)("h3",null,Object(m.jsx)(p.FormattedMessage,{id:"visTypeXy.controls.pointSeries.valueAxes.yAxisTitle",defaultMessage:"Y-axes"})))),Object(m.jsx)(n.EuiFlexItem,{grow:!1},Object(m.jsx)(n.EuiToolTip,{position:"bottom",content:x},Object(m.jsx)(n.EuiButtonIcon,{iconType:"plusInCircleFilled",onClick:t,"aria-label":x,"data-test-subj":"visualizeAddYAxisButton"})))),Object(m.jsx)(n.EuiSpacer,{size:"s"}),o.map(((t,s)=>Object(m.jsx)(n.EuiAccordion,{id:`yAxisAccordion${t.id}`,key:t.id,"data-test-subj":`toggleYAxisOptions-${t.id}`,className:"visEditorSidebar__section visEditorSidebar__collapsible",initialIsOpen:!1,buttonContent:d(t),buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate","aria-label":b.i18n.translate("visTypeXy.controls.pointSeries.valueAxes.toggleOptionsAriaLabel",{defaultMessage:"Toggle {axisName} options",values:{axisName:t.name}}),extraAction:1===o.length?void 0:c(t)},Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(n.EuiSpacer,{size:"m"}),Object(m.jsx)(k,{axis:t,index:s,valueAxis:o[s],onValueAxisPositionChanged:e.onValueAxisPositionChanged,setParamByIndex:e.setParamByIndex,setMultipleValidity:e.setMultipleValidity}))))))}const I=e=>[o.Position.Top,o.Position.Bottom].includes(e),B=10;function _(e,t="id"){return(s,a)=>{const i=e.length;if(a[t].substr(0,i)===e){const e=parseInt(a[t].substr(i),B);e>=s&&(s=e+1)}return s}}const Y=(e,t)=>{const s=Object(l.upperFirst)(e)+"Axis-";return`${s}${t.reduce(_(s,"name"),1)}`};function R(e){switch(e){case o.Position.Bottom:return o.Position.Top;case o.Position.Top:return o.Position.Bottom;case o.Position.Left:return o.Position.Right;case o.Position.Right:return o.Position.Left;default:throw new Error("Invalid legend position.")}}function $(e,t,s){return e===t?s:R(s)}function D(e){switch(e){case o.Position.Bottom:return o.Position.Left;case o.Position.Top:return o.Position.Right;case o.Position.Left:return o.Position.Bottom;case o.Position.Right:return o.Position.Top}}var G=s(19);const W="ValueAxis-";function H(e){const{stateParams:t,setValue:s,aggs:x,vis:d,isTabSelected:b}=e,p=Object(a.useCallback)(((e,a,i,l)=>{const n=[...t[e]];n[a]={...n[a],[i]:l},s(e,n)}),[t,s]),j=Object(a.useCallback)((e=>{const a=[...t.categoryAxes];a[0]=e,s("categoryAxes",a)}),[s,t.categoryAxes]),[y,g]=Object(a.useState)({}),[v,O]=Object(a.useState)({}),A=Object(a.useCallback)((e=>{const a=e||t.seriesParams;let i=!1,n=!1;const o={...y},r={...v},u=t.valueAxes.map(((e,t)=>{let s,u="";const c=[];var d;if(a.forEach(((s,a)=>{if(0===t&&!s.valueAxis||s.valueAxis===e.id){const e=null==x?void 0:x.bySchemaName("metric")[a];c.push(e)}})),1===c.length&&(u=null===(d=c[0])||void 0===d?void 0:d.makeLabel()),y[e.id]!==u&&""!==u){const t=Object(l.get)(v,`${c[0].id}.type`),a=Object(l.get)(v,`${c[0].id}.field`),x=Object(l.get)(c,"[0]type.name",""),d=Object(l.get)(c,"[0]params.field.name",""),b=t!==x,p=a!==d;r[c[0].id]={type:x,field:d},o[e.id]=u,n=!0,0!==Object.keys(y).length&&(b||p||""===e.title.text||y[e.id]===e.title.text)&&u!==e.title.text&&(s={...e,title:{...e.title,text:u}},i=!0)}return s||e}));i&&s("valueAxes",u),n&&(O(r),g(o))}),[x,y,v,s,t.seriesParams,t.valueAxes]),T=Object(a.useCallback)(((e,a)=>{const i=I(a),l=[...t.valueAxes],n=Y(a,l),[o]=t.categoryAxes;if(I(o.position)===i){const t={...o,position:D(o.position)};s("categoryAxes",[t]);const i=l[e].position,n=l.map((({position:t,...s},l)=>({...s,position:l===e?a:$(t,i,a)})));s("valueAxes",n)}else l[e]={...l[e],name:n,position:a},s("valueAxes",l)}),[t.valueAxes,t.categoryAxes,s]),h=Object(a.useCallback)((e=>{const a=I(e);if(t.valueAxes.some((({position:e})=>I(e)===a))){const e=t.valueAxes.map((({position:e,...t})=>({...t,position:D(e)})));s("valueAxes",e)}}),[s,t.valueAxes]),S=Object(a.useCallback)((()=>{const e=t.valueAxes.reduce(_(W),1),a=Object(l.cloneDeep)(t.valueAxes[0]);return a.id=W+e,a.position=R(a.position),a.name=Y(a.position,t.valueAxes),s("valueAxes",[...t.valueAxes,a]),a}),[t.valueAxes,s]),M=Object(a.useCallback)((e=>{const a=t.valueAxes.filter((t=>t.id!==e.id));s("valueAxes",a);let i=!1;const l=t.seriesParams.map((t=>e.id===t.valueAxis?(i=!0,{...t,valueAxis:a[0].id}):t));i&&s("seriesParams",l),t.grid.valueAxis===e.id&&s("grid",{...t.grid,valueAxis:void 0})}),[t.seriesParams,t.valueAxes,s,t.grid]),E=Object(a.useCallback)(((e,t,s)=>{let a=s;"new"===s&&(a=S().id),p("seriesParams",e,t,a),A()}),[S,p,A]),L=d.type.schemas.metrics[0].name,w=t.valueAxes[0].id;Object(a.useEffect)((()=>{const e=Object(G.a)(x,t.seriesParams,L,w);e&&s("seriesParams",e),A(e)}),[w,s,t.seriesParams,A,x,L]);const X=null==x?void 0:x.aggs.some((e=>{var t;return"segment"===e.schema&&e.enabled&&(null===(t=e.type)||void 0===t?void 0:t.name)===r.BUCKET_TYPES.DATE_HISTOGRAM})),P=t.categoryAxes[0].position===o.Position.Bottom||t.categoryAxes[0].position===o.Position.Top,F=Object(c.c)().get(u.LEGACY_TIME_AXIS,!1),V=t.seriesParams.every((({mode:e,type:t})=>"histogram"!==t||"histogram"===t&&"stacked"===e)),N=P&&X&&!F&&V;return b?Object(m.jsx)(i.a.Fragment,null,Object(m.jsx)(f,{changeValueAxis:E,setParamByIndex:p,seriesParams:t.seriesParams,valueAxes:t.valueAxes,vis:d}),Object(m.jsx)(n.EuiSpacer,{size:"s"}),Object(m.jsx)(z,{addValueAxis:S,removeValueAxis:M,onValueAxisPositionChanged:T,setParamByIndex:p,setMultipleValidity:e.setMultipleValidity,seriesParams:t.seriesParams,valueAxes:t.valueAxes}),Object(m.jsx)(n.EuiSpacer,{size:"s"}),Object(m.jsx)(C,{axis:t.categoryAxes[0],onPositionChanged:h,setCategoryAxis:j,useMultiLayerAxis:N})):null}}}]);