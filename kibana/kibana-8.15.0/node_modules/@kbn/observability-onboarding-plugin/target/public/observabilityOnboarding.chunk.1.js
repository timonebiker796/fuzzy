/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observabilityOnboarding_bundle_jsonpfunction=window.observabilityOnboarding_bundle_jsonpfunction||[]).push([[1,3],Array(30).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
t.__assign=function(){return t.__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},t.__assign.apply(this,arguments)},t.__read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.__rest=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},t.__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},t.__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}},function(e,t,n){e.exports=n(5)(4)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(30),a=n(36),o=n(38),s=n(46),l=n(33);function c(e,t){try{return m(e)?e:e.toString().split(t)}catch(t){throw new Error("'".concat(e,"' is not a valid state path."))}}function u(e){return"object"==typeof e&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function d(e,t){return u(e)?e.value:m(e)?p(e):"string"!=typeof e?e:p(c(e,t))}function p(e){if(1===e.length)return e[0];for(var t={},n=t,i=0;i<e.length-1;i++)i===e.length-2?n[e[i]]=e[i+1]:(n[e[i]]={},n=n[e[i]]);return t}function f(e,t){for(var n={},i=Object.keys(e),r=0;r<i.length;r++){var a=i[r];n[a]=t(e[a],a,e,r)}return n}function g(e){var t;return(t=[]).concat.apply(t,r.__spreadArray([],r.__read(e),!1))}function b(e){return m(e)?e:[e]}function h(e){return void 0===e?[]:b(e)}function v(e,t){return f(e.states,(function(e,n){if(e){var i=(j(t)?void 0:t[n])||(e?e.current:void 0);if(i)return{current:i,states:v(e,i)}}}))}function m(e){return Array.isArray(e)}function y(e){return"function"==typeof e}function j(e){return"string"==typeof e}t.warn=function(){},l.IS_PRODUCTION||(t.warn=function(e,t){var n=e instanceof Error?e:void 0;if((n||!e)&&void 0!==console){var i=["Warning: ".concat(t)];n&&i.push(n),console.warn.apply(console,i)}});var x=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),O=((i={})[x]=function(){return this},i[Symbol.observable]=function(){return this},i);function _(e){return!!e&&"__xstatenode"in e}var E=function(){var e=0;return function(){return(++e).toString(16)}}();function S(e,t){return j(e)||"number"==typeof e?r.__assign({type:e},t):e}t.createInvokeId=function(e,t){return"".concat(e,":invocation[").concat(t,"]")},t.evaluateGuard=function(e,t,n,i,r){var a=e.options.guards,o={state:r,cond:t,_event:i};if(t.type===s.DEFAULT_GUARD_TYPE)return((null==a?void 0:a[t.name])||t.predicate)(n,i.data,o);var l=null==a?void 0:a[t.type];if(!l)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return l(n,i.data,o)},t.flatten=g,t.getActionType=function(e){try{return j(e)||"number"==typeof e?"".concat(e):y(e)?e.name:e.type}catch(e){throw new Error("Actions must be strings or objects with a string action.type property.")}},t.getEventType=function(e){try{return j(e)||"number"==typeof e?"".concat(e):e.type}catch(e){throw new Error("Events must be strings or objects with a string event.type property.")}},t.interopSymbols=O,t.isActor=function(e){return!!e&&"function"==typeof e.send},t.isArray=m,t.isBehavior=function(e){return null!==e&&"object"==typeof e&&"transition"in e&&"function"==typeof e.transition},t.isBuiltInEvent=function(e){return/^(done|error)\./.test(e)},t.isFunction=y,t.isMachine=_,t.isObservable=function(e){try{return"subscribe"in e&&y(e.subscribe)}catch(e){return!1}},t.isPromiseLike=function(e){return e instanceof Promise||!(null===e||!y(e)&&"object"!=typeof e||!y(e.then))},t.isRaisableAction=function(e){return(e.type===o.raise||e.type===o.send&&e.to===a.SpecialTargets.Internal)&&"number"!=typeof e.delay},t.isStateLike=u,t.isString=j,t.keys=function(e){return Object.keys(e)},t.mapContext=function(e,t,n){var i,a;if(y(e))return e(t,n.data);var o={};try{for(var s=r.__values(Object.keys(e)),l=s.next();!l.done;l=s.next()){var c=l.value,u=e[c];y(u)?o[c]=u(t,n.data):o[c]=u}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return o},t.mapFilterValues=function(e,t,n){var i,a,o={};try{for(var s=r.__values(Object.keys(e)),l=s.next();!l.done;l=s.next()){var c=l.value,u=e[c];n(u)&&(o[c]=t(u,c,e))}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return o},t.mapValues=f,t.matchesState=function e(t,n,i){void 0===i&&(i=s.STATE_DELIMITER);var r=d(t,i),a=d(n,i);return j(a)?!!j(r)&&a===r:j(r)?r in a:Object.keys(r).every((function(t){return t in a&&e(r[t],a[t])}))},t.nestedPath=function(e,t){return function(n){var i,a,o=n;try{for(var s=r.__values(e),l=s.next();!l.done;l=s.next()){var c=l.value;o=o[t][c]}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return o}},t.normalizeTarget=function(e){if(void 0!==e&&e!==s.TARGETLESS_KEY)return h(e)},t.partition=function(e,t){var n,i,a=r.__read([[],[]],2),o=a[0],s=a[1];try{for(var l=r.__values(e),c=l.next();!c.done;c=l.next()){var u=c.value;t(u)?o.push(u):s.push(u)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return[o,s]},t.path=function(e){return function(t){var n,i,a=t;try{for(var o=r.__values(e),s=o.next();!s.done;s=o.next())a=a[s.value]}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a}},t.pathToStateValue=p,t.pathsToStateValue=function(e){var t,n,i={};if(e&&1===e.length&&1===e[0].length)return e[0][0];try{for(var a=r.__values(e),o=a.next();!o.done;o=a.next())for(var s=o.value,l=i,c=0;c<s.length;c++){var u=s[c];if(c===s.length-2){l[u]=s[c+1];break}l[u]=l[u]||{},l=l[u]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},t.reportUnhandledExceptionOnInvocation=function(e,t,n){if(!l.IS_PRODUCTION){var i=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(n,"', error was '").concat(e,"'.").concat(i));else{var r=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(n,"'. ")+"Original error: '".concat(e,"'. ").concat(i," Current error is '").concat(t,"'.").concat(r))}}},t.symbolObservable=x,t.toArray=h,t.toArrayStrict=b,t.toEventObject=S,t.toGuard=function(e,t){if(e)return j(e)?{type:s.DEFAULT_GUARD_TYPE,name:e,predicate:t?t[e]:void 0}:y(e)?{type:s.DEFAULT_GUARD_TYPE,name:e.name,predicate:e}:e},t.toInvokeSource=function(e){return"string"==typeof e?{type:e}:e},t.toObserver=function(e,t,n){var i=function(){},r="object"==typeof e,a=r?e:null;return{next:((r?e.next:e)||i).bind(a),error:((r?e.error:t)||i).bind(a),complete:((r?e.complete:n)||i).bind(a)}},t.toSCXMLEvent=function(e,t){if(!j(e)&&"$$type"in e&&"scxml"===e.$$type)return e;var n=S(e);return r.__assign({name:n.type,data:n,$$type:"scxml",type:"external"},t)},t.toStatePath=c,t.toStatePaths=function e(t){return t?j(t)?[[t]]:g(Object.keys(t).map((function(n){var i=t[n];return"string"==typeof i||i&&Object.keys(i).length?e(t[n]).map((function(e){return[n].concat(e)})):[[n]]}))):[[]]},t.toStateValue=d,t.toTransitionConfigArray=function(e,t){return b(t).map((function(t){return void 0===t||"string"==typeof t||_(t)?{target:t,event:e}:r.__assign(r.__assign({},t),{event:e})}))},t.uniqueId=E,t.updateContext=function(e,n,i,a){l.IS_PRODUCTION||t.warn(!!e,"Attempting to update undefined context");var o=e?i.reduce((function(e,t){var i,o,s=t.assignment,l={state:a,action:t,_event:n},c={};if(y(s))c=s(e,n.data,l);else try{for(var u=r.__values(Object.keys(s)),d=u.next();!d.done;d=u.next()){var p=d.value,f=s[p];c[p]=y(f)?f(e,n.data,l):f}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}return Object.assign({},e,c)}),e):e;return o},t.updateHistoryStates=v,t.updateHistoryValue=function(e,t){return{current:t,states:v(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_PRODUCTION=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37),r=n(41),a=n(78),o=n(83),s=n(85),l=n(86),c=n(87),u=n(42),d=n(61),p=n(60),f=n(36),g=n(32),b=i.assign,h=i.cancel,v=i.send,m=i.sendTo,y=i.sendParent,j=i.sendUpdate,x=i.forwardTo,O=i.doneInvoke,_=i.raise,E=i.log,S=i.pure,w=i.choose,k=i.stop;t.actions=i,t.toActorRef=r.toActorRef,t.Interpreter=a.Interpreter,Object.defineProperty(t,"InterpreterStatus",{enumerable:!0,get:function(){return a.InterpreterStatus}}),t.interpret=a.interpret,t.spawn=a.spawn,t.Machine=o.Machine,t.createMachine=o.createMachine,t.mapState=s.mapState,t.matchState=l.matchState,t.createSchema=c.createSchema,t.t=c.t,t.State=u.State,t.StateNode=d.StateNode,t.spawnBehavior=p.spawnBehavior,Object.defineProperty(t,"ActionTypes",{enumerable:!0,get:function(){return f.ActionTypes}}),Object.defineProperty(t,"SpecialTargets",{enumerable:!0,get:function(){return f.SpecialTargets}}),t.matchesState=g.matchesState,t.toEventObject=g.toEventObject,t.toObserver=g.toObserver,t.toSCXMLEvent=g.toSCXMLEvent,t.assign=b,t.cancel=h,t.choose=w,t.doneInvoke=O,t.forwardTo=x,t.log=E,t.pure=S,t.raise=_,t.send=v,t.sendParent=y,t.sendTo=m,t.sendUpdate=j,t.stop=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActorContext=t.shallowEqual=t.useSpawn=t.useSelector=t.useInterpret=t.useActor=t.useMachine=void 0;var i=n(90);Object.defineProperty(t,"useMachine",{enumerable:!0,get:function(){return i.useMachine}});var r=n(51);Object.defineProperty(t,"useActor",{enumerable:!0,get:function(){return r.useActor}});var a=n(49);Object.defineProperty(t,"useInterpret",{enumerable:!0,get:function(){return a.useInterpret}});var o=n(64);Object.defineProperty(t,"useSelector",{enumerable:!0,get:function(){return o.useSelector}});var s=n(91);Object.defineProperty(t,"useSpawn",{enumerable:!0,get:function(){return s.useSpawn}});var l=n(43);Object.defineProperty(t,"shallowEqual",{enumerable:!0,get:function(){return l.shallowEqual}});var c=n(92);Object.defineProperty(t,"createActorContext",{enumerable:!0,get:function(){return c.createActorContext}})},function(e,t,n){"use strict";var i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(i=t.ActionTypes||(t.ActionTypes={})).Start="xstate.start",i.Stop="xstate.stop",i.Raise="xstate.raise",i.Send="xstate.send",i.Cancel="xstate.cancel",i.NullEvent="",i.Assign="xstate.assign",i.After="xstate.after",i.DoneState="done.state",i.DoneInvoke="done.invoke",i.Log="xstate.log",i.Init="xstate.init",i.Invoke="xstate.invoke",i.ErrorExecution="error.execution",i.ErrorCommunication="error.communication",i.ErrorPlatform="error.platform",i.ErrorCustom="xstate.error",i.Update="xstate.update",i.Pure="xstate.pure",i.Choose="xstate.choose",t.SpecialTargets=void 0,(r=t.SpecialTargets||(t.SpecialTargets={})).Parent="#_parent",r.Internal="#_internal"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(36),a=n(38),o=n(32),s=n(33),l=o.toSCXMLEvent({type:a.init});function c(e,t){return t&&t[e]||void 0}function u(e,t){var n;if(o.isString(e)||"number"==typeof e){var r=c(e,t);n=o.isFunction(r)?{type:e,exec:r}:r||{type:e,exec:void 0}}else if(o.isFunction(e))n={type:e.name||e.toString(),exec:e};else if(r=c(e.type,t),o.isFunction(r))n=i.__assign(i.__assign({},e),{exec:r});else if(r){var a=r.type||e.type;n=i.__assign(i.__assign(i.__assign({},r),e),{type:a})}else n=e;return n}var d=function(e,t){return e?(o.isArray(e)?e:[e]).map((function(e){return u(e,t)})):[]};function p(e){var t=u(e);return i.__assign(i.__assign({id:o.isString(e)?e:t.id},t),{type:t.type})}function f(e,t,n,r){var s,l={_event:n},c=o.toSCXMLEvent(o.isFunction(e.event)?e.event(t,n.data,l):e.event);if(o.isString(e.delay)){var u=r&&r[e.delay];s=o.isFunction(u)?u(t,n.data,l):u}else s=o.isFunction(e.delay)?e.delay(t,n.data,l):e.delay;return i.__assign(i.__assign({},e),{type:a.raise,_event:c,delay:s})}function g(e,t){return{to:t?t.to:void 0,type:a.send,event:o.isFunction(e)?e:o.toEventObject(e),delay:t?t.delay:void 0,id:t&&void 0!==t.id?t.id:o.isFunction(e)?e.name:o.getEventType(e)}}function b(e,t,n,r){var a,s={_event:n},l=o.toSCXMLEvent(o.isFunction(e.event)?e.event(t,n.data,s):e.event);if(o.isString(e.delay)){var c=r&&r[e.delay];a=o.isFunction(c)?c(t,n.data,s):c}else a=o.isFunction(e.delay)?e.delay(t,n.data,s):e.delay;var u=o.isFunction(e.to)?e.to(t,n.data,s):e.to;return i.__assign(i.__assign({},e),{to:u,_event:l,event:l.data,delay:a})}function h(e,t){return g(e,i.__assign(i.__assign({},t),{to:r.SpecialTargets.Parent}))}var v=function(e,t){return{context:e,event:t}},m=function(e,t,n){return i.__assign(i.__assign({},e),{value:o.isString(e.expr)?e.expr:e.expr(t,n.data,{_event:n})})};function y(e,t,n){var i=o.isFunction(e.activity)?e.activity(t,n.data):e.activity,a="string"==typeof i?{id:i}:i;return{type:r.ActionTypes.Stop,activity:a}}t.actionTypes=a,t.after=function(e,t){var n=t?"#".concat(t):"";return"".concat(r.ActionTypes.After,"(").concat(e,")").concat(n)},t.assign=function(e){return{type:a.assign,assignment:e}},t.cancel=function(e){return{type:a.cancel,sendId:e}},t.choose=function(e){return{type:r.ActionTypes.Choose,conds:e}},t.done=function(e,t){var n="".concat(r.ActionTypes.DoneState,".").concat(e);return{type:n,data:t,toString:function(){return n}}},t.doneInvoke=function(e,t){var n="".concat(r.ActionTypes.DoneInvoke,".").concat(e);return{type:n,data:t,toString:function(){return n}}},t.error=function(e,t){var n="".concat(r.ActionTypes.ErrorPlatform,".").concat(e);return{type:n,data:t,toString:function(){return n}}},t.escalate=function(e,t){return h((function(t,n,i){return{type:a.error,data:o.isFunction(e)?e(t,n,i):e}}),i.__assign(i.__assign({},t),{to:r.SpecialTargets.Parent}))},t.forwardTo=function(e,t){if(!(s.IS_PRODUCTION||e&&"function"!=typeof e)){var n=e;e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r="function"==typeof n?n.apply(void 0,i.__spreadArray([],i.__read(e),!1)):n;if(!r)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return r}}return g((function(e,t){return t}),i.__assign(i.__assign({},t),{to:e}))},t.getActionFunction=c,t.initEvent=l,t.isActionObject=function(e){return"object"==typeof e&&"type"in e},t.log=function(e,t){return void 0===e&&(e=v),{type:a.log,label:t,expr:e}},t.pure=function(e){return{type:r.ActionTypes.Pure,get:e}},t.raise=function(e,t){return{type:a.raise,event:"function"==typeof e?e:o.toEventObject(e),delay:t?t.delay:void 0,id:null==t?void 0:t.id}},t.resolveActions=function e(t,n,l,c,p,g,h){void 0===h&&(h=!1);var v=h?[]:function(e){var t,n,r=[];try{for(var o=i.__values(e),s=o.next();!s.done;s=o.next())for(var l=s.value,c=0;c<l.actions.length;)l.actions[c].type!==a.assign?c++:(r.push(l.actions[c]),l.actions.splice(c,1))}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(p),j=v.length?o.updateContext(l,c,v,n):l,x=h?[l]:void 0,O=[];function _(p,v){var _;switch(v.type){case a.raise:var E=f(v,j,c,t.options.delays);return g&&"number"==typeof E.delay&&g(E,j,c),E;case a.send:var S=b(v,j,c,t.options.delays);if(!s.IS_PRODUCTION){var w=v.delay;o.warn(!o.isString(w)||"number"==typeof S.delay,"No delay reference for delay expression '".concat(w,"' was found on machine '").concat(t.id,"'"))}return g&&S.to!==r.SpecialTargets.Internal&&("entry"===p?O.push(S):g(S,j,c)),S;case a.log:var k=m(v,j,c);return null==g||g(k,j,c),k;case a.choose:if(!(T=null===(_=v.conds.find((function(e){var i=o.toGuard(e.cond,t.options.guards);return!i||o.evaluateGuard(t,i,j,c,g?void 0:n)})))||void 0===_?void 0:_.actions))return[];var I=i.__read(e(t,n,j,c,[{type:p,actions:d(o.toArray(T),t.options.actions)}],g,h),2),C=I[0],A=I[1];return j=A,null==x||x.push(j),C;case a.pure:var T;if(!(T=v.get(j,c.data)))return[];var P=i.__read(e(t,n,j,c,[{type:p,actions:d(o.toArray(T),t.options.actions)}],g,h),2),M=P[0],L=P[1];return j=L,null==x||x.push(j),M;case a.stop:return k=y(v,j,c),null==g||g(k,l,c),k;case a.assign:j=o.updateContext(j,c,[v],g?void 0:n),null==x||x.push(j);break;default:var F=u(v,t.options.actions),N=F.exec;if(g)g(F,j,c);else if(N&&x){var R=x.length-1,D=i.__assign(i.__assign({},F),{exec:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];N.apply(void 0,i.__spreadArray([x[R]],i.__read(t),!1))}});F=D}return F}}return[o.flatten(p.map((function(e){var t,n,r=[];try{for(var a=i.__values(e.actions),o=a.next();!o.done;o=a.next()){var s=o.value,l=_(e.type,s);l&&(r=r.concat(l))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return O.forEach((function(e){g(e,j,c)})),O.length=0,r}))),j]},t.resolveLog=m,t.resolveRaise=f,t.resolveSend=b,t.resolveStop=y,t.respond=function(e,t){return g(e,i.__assign(i.__assign({},t),{to:function(e,t,n){return n._event.origin}}))},t.send=g,t.sendParent=h,t.sendTo=function(e,t,n){return g(t,i.__assign(i.__assign({},n),{to:e}))},t.sendUpdate=function(){return h(a.update)},t.start=function(e){var t=p(e);return{type:r.ActionTypes.Start,activity:t,exec:void 0}},t.stop=function(e){var t=o.isFunction(e)?e:p(e);return{type:r.ActionTypes.Stop,activity:t,exec:void 0}},t.toActionObject=u,t.toActionObjects=d,t.toActivityDefinition=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(36),r=i.ActionTypes.Start,a=i.ActionTypes.Stop,o=i.ActionTypes.Raise,s=i.ActionTypes.Send,l=i.ActionTypes.Cancel,c=i.ActionTypes.NullEvent,u=i.ActionTypes.Assign,d=i.ActionTypes.After,p=i.ActionTypes.DoneState,f=i.ActionTypes.Log,g=i.ActionTypes.Init,b=i.ActionTypes.Invoke,h=i.ActionTypes.ErrorExecution,v=i.ActionTypes.ErrorPlatform,m=i.ActionTypes.ErrorCustom,y=i.ActionTypes.Update,j=i.ActionTypes.Choose,x=i.ActionTypes.Pure;t.after=d,t.assign=u,t.cancel=l,t.choose=j,t.doneState=p,t.error=m,t.errorExecution=h,t.errorPlatform=v,t.init=g,t.invoke=b,t.log=f,t.nullEvent=c,t.pure=x,t.raise=o,t.send=s,t.start=r,t.stop=a,t.update=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),r=n(9),a=i.__importDefault(n(67));t.default=function(e,t){var n=r.useState(t),i=n[0],o=n[1];return a.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),i}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p}));var i=n(12),r=n(9),a=n.n(r),o=n(13),s=n(19),l=n(65),c=n(10);let u=function(e){return e.LOADING="loading",e.SUCCESS="success",e.FAILURE="failure",e.NOT_INITIATED="not_initiated",e}({});const d=(e,t)=>(n,i)=>Object(l.callObservabilityOnboardingApi)(n,{...i,signal:e}).catch((e=>{var n;throw t({status:u.FAILURE,data:null===(n=e.body)||void 0===n?void 0:n.attributes}),e})).then((e=>(t({data:e,status:u.SUCCESS}),e)));function p(e,t,n={}){const{notifications:l}=Object(o.useKibana)(),{preservePreviousData:p=!0,showToastOnError:f=!0}=n,[g,b]=Object(r.useState)({data:void 0,status:u.NOT_INITIATED}),[h,v]=Object(r.useState)(0),{addInspectorRequest:m}=Object(s.useInspectorContext)();return Object(r.useEffect)((()=>{let t=new AbortController;return async function(){t.abort(),t=new AbortController;const n=t.signal,r=e(d(n,m));if(r){b((e=>({data:p?e.data:void 0,status:u.LOADING,error:void 0})));try{const e=await r;n.aborted||b({data:e,status:u.SUCCESS,error:void 0})}catch(e){const t=e;if(!n.aborted){const n="response"in t?function(e){var t,n,r,o,s;const l=null!==(t=null===(n=e.body)||void 0===n?void 0:n.message)&&void 0!==t?t:null===(r=e.response)||void 0===r?void 0:r.statusText;return Object(c.jsx)(a.a.Fragment,null,l," (",null===(o=e.response)||void 0===o?void 0:o.status,")",Object(c.jsx)("h5",null,i.i18n.translate("xpack.observability_onboarding.fetcher.error.url",{defaultMessage:"URL"})),null===(s=e.response)||void 0===s?void 0:s.url)}(t):t.message;f&&l.toasts.danger({title:i.i18n.translate("xpack.observability_onboarding.fetcher.error.title",{defaultMessage:"Error while fetching resource"}),body:Object(c.jsx)("div",null,Object(c.jsx)("h5",null,i.i18n.translate("xpack.observability_onboarding.fetcher.error.status",{defaultMessage:"Error"})),n)}),b({data:void 0,status:u.FAILURE,error:e})}}}}(),()=>{t.abort()}}),[h,p,f,...t]),Object(r.useMemo)((()=>({...g,refetch:()=>{v((e=>e+1))}})),[g])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(32),a=n(58);function o(e){var t;return(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}})[r.symbolObservable]=function(){return this},t}function s(e,t,n){var i=o(t);if(i.deferred=!0,r.isMachine(e)){var s=i.state=a.provide(void 0,(function(){return(n?e.withContext(n):e).initialState}));i.getSnapshot=function(){return s}}return i}function l(e){try{return"function"==typeof e.send}catch(e){return!1}}t.createDeferredActor=s,t.createInvocableActor=function(e,t,n,i){var a,l=r.toInvokeSource(e.src),c=null===(a=null==t?void 0:t.options.services)||void 0===a?void 0:a[l.type],u=e.data?r.mapContext(e.data,n,i):void 0,d=c?s(c,e.id,u):o(e.id);return d.meta=e,d},t.createNullActor=o,t.isActor=l,t.isSpawnedActor=function(e){return l(e)&&"id"in e},t.toActorRef=function(e){var t;return i.__assign(((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}})[r.symbolObservable]=function(){return this},t),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(46),a=n(32),o=n(59),s=n(37),l=n(33);function c(e){return"object"==typeof e&&null!==e&&"value"in e&&"_event"in e}var u=c,d=function(){function e(e){var t,n=this;this.actions=[],this.activities=r.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||r.EMPTY_ACTIVITY_MAP,this.meta=o.getMeta(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=null!==(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)&&void 0!==t?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return o.nextEvents(n.configuration)}})}return e.from=function(t,n){return t instanceof e?t.context!==n?new e({value:t.value,context:n,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t:new e({value:t,context:n,_event:s.initEvent,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,n){if(t instanceof e){if(!t.actions.length)return t;var i=s.initEvent;return new e({value:t.value,context:n,_event:i,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,n)},e.prototype.toStrings=function(e,t){var n=this;if(void 0===e&&(e=this.value),void 0===t&&(t="."),a.isString(e))return[e];var r=Object.keys(e);return r.concat.apply(r,i.__spreadArray([],i.__read(r.map((function(i){return n.toStrings(e[i],t).map((function(e){return i+t+e}))}))),!1))},e.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var t=e.tags;e.machine;var n=i.__rest(e,["configuration","transitions","tags","machine"]);return i.__assign(i.__assign({},n),{tags:Array.from(t)})},e.prototype.matches=function(e){return a.matchesState(e,this.value)},e.prototype.hasTag=function(e){return this.tags.has(e)},e.prototype.can=function(e){var t;l.IS_PRODUCTION&&a.warn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=null===(t=this.machine)||void 0===t?void 0:t.getTransitionData(this,e);return!!(null==n?void 0:n.transitions.length)&&n.transitions.some((function(e){return void 0!==e.target||e.actions.length}))},e}();t.State=d,t.bindActionToState=function(e,t){var n=e.exec;return i.__assign(i.__assign({},e),{exec:void 0!==n?function(){return n(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0})},t.isState=u,t.isStateConfig=c,t.stateValuesEqual=function e(t,n){if(t===n)return!0;if(void 0===t||void 0===n)return!1;if(a.isString(t)||a.isString(n))return t===n;var i=Object.keys(t),r=Object.keys(n);return i.length===r.length&&i.every((function(i){return e(t[i],n[i])}))}},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.isInterpreterStateEqual=t.isService=t.shallowEqual=t.getServiceSnapshot=t.partition=void 0;var a=n(34);function o(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.partition=function(e,t){var n,a,o=i([[],[]],2),s=o[0],l=o[1];try{for(var c=r(e),u=c.next();!u.done;u=c.next()){var d=u.value;t(d)?s.push(d):l.push(d)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(n)throw n.error}}return[s,l]},t.getServiceSnapshot=function(e){return 0!==e.status?e.getSnapshot():e.machine.initialState},t.shallowEqual=function(e,t){if(o(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!o(e[n[r]],t[n[r]]))return!1;return!0},t.isService=function(e){return"state"in e&&"machine"in e},t.isInterpreterStateEqual=function(e,t,n){if(e.status===a.InterpreterStatus.NotStarted)return!0;var i=void 0===n.changed&&(Object.keys(n.children).length>0||"boolean"==typeof t.changed);return!(n.changed||i)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(11),r=n(12),a=n(19),o=(n(9),n(10)),s={name:"tbckbx",styles:"> svg.euiIcon{border-radius:0 !important;}"};function l({hasPrivileges:e=!0,status:t,payload:n,error:l}){var c,u;const d=Object(o.jsx)(i.EuiCallOut,{title:Object(o.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(o.jsx)(i.EuiFlexItem,{grow:!1},Object(o.jsx)(i.EuiLoadingSpinner,{size:"m"})),Object(o.jsx)(i.EuiFlexItem,null,r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.loading",{defaultMessage:"Creating API Key"}))),color:"primary","data-test-subj":"obltOnboardingLogsCreatingApiKey"}),p=Object(o.jsx)(i.EuiCallOut,{title:r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.created",{defaultMessage:"API Key created."}),color:"success",iconType:"check","data-test-subj":"obltOnboardingLogsApiKeyCreated"},Object(o.jsx)("p",null,r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.created.description",{defaultMessage:"Remember to store this information in a safe place. It wonâ€™t be displayed anymore after you continue."})),Object(o.jsx)(i.EuiFieldText,{"data-test-subj":"apmAgentKeyCallOutFieldText",readOnly:!0,value:null==n?void 0:n.apiKeyEncoded,"aria-label":r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.field.label",{defaultMessage:"Api Key"}),append:Object(o.jsx)(i.EuiCopy,{textToCopy:null!==(c=null==n?void 0:n.apiKeyEncoded)&&void 0!==c?c:""},(e=>Object(o.jsx)(i.EuiButtonIcon,{"data-test-subj":"observabilityOnboardingApiKeySuccessCalloutButton",iconType:"copyClipboard",onClick:e,color:"success",css:s,"aria-label":r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.field.copyButton",{defaultMessage:"Copy to clipboard"})})))})),f=Object(o.jsx)(i.EuiCallOut,{title:r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.failed",{defaultMessage:"Failed to create API key."}),color:"danger",iconType:"error","data-test-subj":"obltOnboardingLogsApiKeyCreationFailed"},Object(o.jsx)("p",null,r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.failed.description",{defaultMessage:"Something went wrong: {message}",values:{message:null==l||null===(u=l.body)||void 0===u?void 0:u.message}}))),g=Object(o.jsx)(i.EuiCallOut,{title:r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.noPermissions",{defaultMessage:"User does not have permissions to create API key."}),color:"warning",iconType:"warning","data-test-subj":"obltOnboardingLogsApiKeyCreationNoPrivileges"},Object(o.jsx)("p",null,r.i18n.translate("xpack.observability_onboarding.apiKeyBanner.noPermissions.description",{defaultMessage:"Required cluster privileges are {requiredClusterPrivileges} and required index privileges are {requiredIndexPrivileges} for indices {indices}, please add all required privileges to the role of the authenticated user.",values:{requiredClusterPrivileges:"['monitor', 'manage_own_api_key']",requiredIndexPrivileges:"['auto_configure', 'create_doc']",indices:"['logs-*-*', 'metrics-*-*']"}})));return e?t===a.FETCH_STATUS.SUCCESS?p:t===a.FETCH_STATUS.FAILURE?f:d:g}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_GUARD_TYPE="xstate.guard",t.EMPTY_ACTIVITY_MAP={},t.STATE_DELIMITER=".",t.TARGETLESS_KEY=""},function(e,t,n){"use strict";function i(e){return e}function r(e){throw new Error("Called `absurd` function which should be uncallable")}Object.defineProperty(t,"__esModule",{value:!0}),t.bindTo_=t.bind_=t.hole=t.pipe=t.untupled=t.tupled=t.absurd=t.decrement=t.increment=t.tuple=t.flow=t.flip=t.constVoid=t.constUndefined=t.constNull=t.constFalse=t.constTrue=t.constant=t.not=t.unsafeCoerce=t.identity=void 0,t.identity=i,t.unsafeCoerce=i,t.not=function(e){return function(t){return!e(t)}},t.constant=function(e){return function(){return e}},t.constTrue=function(){return!0},t.constFalse=function(){return!1},t.constNull=function(){return null},t.constUndefined=function(){},t.constVoid=function(){},t.flip=function(e){return function(t,n){return e(n,t)}},t.flow=function(e,t,n,i,r,a,o,s,l){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return i(n(t(e.apply(this,arguments))))};case 5:return function(){return r(i(n(t(e.apply(this,arguments)))))};case 6:return function(){return a(r(i(n(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(r(i(n(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(r(i(n(t(e.apply(this,arguments))))))))};case 9:return function(){return l(s(o(a(r(i(n(t(e.apply(this,arguments)))))))))}}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.increment=function(e){return e+1},t.decrement=function(e){return e-1},t.absurd=r,t.tupled=function(e){return function(t){return e.apply(void 0,t)}},t.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},t.pipe=function(e,t,n,i,r,a,o,s,l,c,u,d,p,f,g,b,h,v,m,y){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return i(n(t(e)));case 5:return r(i(n(t(e))));case 6:return a(r(i(n(t(e)))));case 7:return o(a(r(i(n(t(e))))));case 8:return s(o(a(r(i(n(t(e)))))));case 9:return l(s(o(a(r(i(n(t(e))))))));case 10:return c(l(s(o(a(r(i(n(t(e)))))))));case 11:return u(c(l(s(o(a(r(i(n(t(e))))))))));case 12:return d(u(c(l(s(o(a(r(i(n(t(e)))))))))));case 13:return p(d(u(c(l(s(o(a(r(i(n(t(e))))))))))));case 14:return f(p(d(u(c(l(s(o(a(r(i(n(t(e)))))))))))));case 15:return g(f(p(d(u(c(l(s(o(a(r(i(n(t(e))))))))))))));case 16:return b(g(f(p(d(u(c(l(s(o(a(r(i(n(t(e)))))))))))))));case 17:return h(b(g(f(p(d(u(c(l(s(o(a(r(i(n(t(e))))))))))))))));case 18:return v(h(b(g(f(p(d(u(c(l(s(o(a(r(i(n(t(e)))))))))))))))));case 19:return m(v(h(b(g(f(p(d(u(c(l(s(o(a(r(i(n(t(e))))))))))))))))));case 20:return y(m(v(h(b(g(f(p(d(u(c(l(s(o(a(r(i(n(t(e)))))))))))))))))))}},t.hole=r,t.bind_=function(e,t,n){var i;return Object.assign({},e,((i={})[t]=n,i))},t.bindTo_=function(e){return function(t){var n;return(n={})[e]=t,n}}},function(e,t,n){e.exports=n(5)(1268)},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__rest||function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.useInterpret=t.useIdleInterpreter=void 0;var o=n(9),s=n(63),l=n(34),c=n(50);function u(e,t){var n=(0,c.default)((function(){return"function"==typeof e?e():e})),a=t.context,o=t.guards,u=t.actions,d=t.activities,p=t.services,f=t.delays,g=(t.state,r(t,["context","guards","actions","activities","services","delays","state"])),b=(0,c.default)((function(){var e={context:a,guards:o,actions:u,activities:d,services:p,delays:f},t=n.withConfig(e,(function(){return i(i({},n.context),a)}));return(0,l.interpret)(t,g)}));return(0,s.default)((function(){Object.assign(b.machine.options.actions,u),Object.assign(b.machine.options.guards,o),Object.assign(b.machine.options.activities,d),Object.assign(b.machine.options.services,p),Object.assign(b.machine.options.delays,f)}),[u,o,d,p,f]),b}t.useIdleInterpreter=u,t.useInterpret=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=a(t,2),r=i[0],s=void 0===r?{}:r,c=i[1],d=u(e,s);return(0,o.useEffect)((function(){if(c){var e=d.subscribe((0,l.toObserver)(c));return function(){e.unsubscribe()}}}),[c]),(0,o.useEffect)((function(){var e=s.state;return d.start(e?l.State.create(e):void 0),function(){d.stop(),d.status=l.InterpreterStatus.NotStarted}}),[]),d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.default=function(e){var t=i.useRef();return t.current||(t.current={v:e()}),t.current.v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useActor=t.isActorWithState=void 0;var i=n(9),r=n(63),a=n(50),o=n(48),s=n(43);function l(e){return e}function c(e){return"state"in e}function u(e){return"getSnapshot"in e?(0,s.isService)(e)?(0,s.getServiceSnapshot)(e):e.getSnapshot():c(e)?e.state:void 0}t.isActorWithState=c,t.useActor=function(e,t){void 0===t&&(t=u);var n=(0,i.useRef)(e),c=(0,i.useRef)([]),d=(0,i.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),p=(0,i.useCallback)((function(){return t(e)}),[e,t]),f=(0,i.useCallback)((function(t,n){return(0,s.isService)(e)?(0,s.isInterpreterStateEqual)(e,t,n):t===n}),[e]),g=(0,o.useSyncExternalStoreWithSelector)(d,p,p,l,f),b=(0,a.default)((function(){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],r=n.current;(function(e){return"deferred"in e})(r)&&r.deferred?c.current.push(i):r.send(i)}}));return(0,r.default)((function(){for(n.current=e;c.current.length>0;){var t=c.current.shift();e.send(t)}}),[e]),[g,b]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var i=void 0;t.setEuiDevProviderWarning=function(e){return i=e},t.getEuiDevProviderWarning=function(){return i},t.emitEuiProviderWarning=function(e){if("function"==typeof i)return i(e);switch(i){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),r=n(9),a=i.__importDefault(n(54));t.default=function(e,t){void 0===t&&(t=[]);var n=a.default(e,t,{loading:!0}),i=n[0],o=n[1];return r.useEffect((function(){o()}),[o]),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),r=n(9),a=i.__importDefault(n(55));t.default=function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var o=r.useRef(0),s=a.default(),l=r.useState(n),c=l[0],u=l[1],d=r.useCallback((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=++o.current;return u((function(e){return i.__assign(i.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return s()&&r===o.current&&u({value:e,loading:!1}),e}),(function(e){return s()&&r===o.current&&u({error:e,loading:!1}),e}))}),t);return[c,d]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.default=function(){var e=i.useRef(!1),t=i.useCallback((function(){return e.current}),[]);return i.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},function(e,t,n){e.exports=n(5)(3085)},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(13);const r=()=>Object(i.useKibana)()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=[];t.consume=function(e){return e(i[i.length-1])},t.provide=function(e,t){i.push(e);var n=t(e);return i.pop(),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(32),a=function(e){return"atomic"===e.type||"final"===e.type};function o(e){return Object.keys(e.states).map((function(t){return e.states[t]}))}function s(e){return o(e).filter((function(e){return"history"!==e.type}))}function l(e,t){var n,r,a,o,l,c,d,p,f=u(new Set(e)),g=new Set(t);try{for(var b=i.__values(g),h=b.next();!h.done;h=b.next())for(var v=(w=h.value).parent;v&&!g.has(v);)g.add(v),v=v.parent}catch(e){n={error:e}}finally{try{h&&!h.done&&(r=b.return)&&r.call(b)}finally{if(n)throw n.error}}var m=u(g);try{for(var y=i.__values(g),j=y.next();!j.done;j=y.next())if("compound"!==(w=j.value).type||m.get(w)&&m.get(w).length){if("parallel"===w.type)try{for(var x=(l=void 0,i.__values(s(w))),O=x.next();!O.done;O=x.next()){var _=O.value;g.has(_)||(g.add(_),f.get(_)?f.get(_).forEach((function(e){return g.add(e)})):_.initialStateNodes.forEach((function(e){return g.add(e)})))}}catch(e){l={error:e}}finally{try{O&&!O.done&&(c=x.return)&&c.call(x)}finally{if(l)throw l.error}}}else f.get(w)?f.get(w).forEach((function(e){return g.add(e)})):w.initialStateNodes.forEach((function(e){return g.add(e)}))}catch(e){a={error:e}}finally{try{j&&!j.done&&(o=y.return)&&o.call(y)}finally{if(a)throw a.error}}try{for(var E=i.__values(g),S=E.next();!S.done;S=E.next()){var w;for(v=(w=S.value).parent;v&&!g.has(v);)g.add(v),v=v.parent}}catch(e){d={error:e}}finally{try{S&&!S.done&&(p=E.return)&&p.call(E)}finally{if(d)throw d.error}}return g}function c(e,t){var n=t.get(e);if(!n)return{};if("compound"===e.type){var i=n[0];if(!i)return{};if(a(i))return i.key}var r={};return n.forEach((function(e){r[e.key]=c(e,t)})),r}function u(e){var t,n,r=new Map;try{for(var a=i.__values(e),o=a.next();!o.done;o=a.next()){var s=o.value;r.has(s)||r.set(s,[]),s.parent&&(r.has(s.parent)||r.set(s.parent,[]),r.get(s.parent).push(s))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r}function d(e,t){return Array.isArray(e)?e.some((function(e){return e===t})):e instanceof Set&&e.has(t)}t.getAdjList=u,t.getAllChildren=o,t.getAllStateNodes=function e(t){var n=[t];return a(t)?n:n.concat(r.flatten(s(t).map(e)))},t.getChildren=s,t.getConfiguration=l,t.getMeta=function(e){return void 0===e&&(e=[]),e.reduce((function(e,t){return void 0!==t.meta&&(e[t.id]=t.meta),e}),{})},t.getTagsFromConfiguration=function(e){return new Set(r.flatten(e.map((function(e){return e.tags}))))},t.getValue=function(e,t){return c(e,u(l([e],t)))},t.has=d,t.isInFinalState=function e(t,n){return"compound"===n.type?s(n).some((function(e){return"final"===e.type&&d(t,e)})):"parallel"===n.type&&s(n).every((function(n){return e(t,n)}))},t.isLeafNode=a,t.nextEvents=function(e){return i.__spreadArray([],i.__read(new Set(r.flatten(i.__spreadArray([],i.__read(e.map((function(e){return e.ownEvents}))),!1)))),!1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37),r=n(41),a=n(32);t.fromPromise=function(e){var t={error:void 0,data:void 0,status:"pending"};return{transition:function(e,t,n){var r=n.parent,a=n.id,o=n.observers;switch(t.type){case"fulfill":return null==r||r.send(i.doneInvoke(a,t.data)),{error:void 0,data:t.data,status:"fulfilled"};case"reject":return null==r||r.send(i.error(a,t.error)),o.forEach((function(e){e.error(t.error)})),{error:t.error,data:void 0,status:"rejected"};default:return e}},initialState:t,start:function(n){var i=n.self;return e().then((function(e){i.send({type:"fulfill",data:e})}),(function(e){i.send({type:"reject",error:e})})),t}}},t.fromReducer=function(e,t){return{transition:e,initialState:t}},t.spawnBehavior=function(e,t){void 0===t&&(t={});var n=e.initialState,i=new Set,o=[],s=!1,l=r.toActorRef({id:t.id,send:function(t){o.push(t),function(){if(!s){for(s=!0;o.length>0;){var t=o.shift();n=e.transition(n,t,c),i.forEach((function(e){return e.next(n)}))}s=!1}}()},getSnapshot:function(){return n},subscribe:function(e,t,r){var o=a.toObserver(e,t,r);return i.add(o),o.next(n),{unsubscribe:function(){i.delete(o)}}}}),c={parent:t.parent,self:l,id:t.id||"anonymous",observers:i};return n=e.start?e.start(c):n,l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(32),a=n(42),o=n(38),s=n(37),l=n(33),c=n(46),u=n(59),d=n(41),p=n(84),f="",g="*",b={},h=function(e){return"#"===e[0]},v=function(){function e(t,n,a,o){void 0===a&&(a="context"in t?t.context:void 0);var d,g=this;this.config=t,this._context=a,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=null==o?void 0:o.parent,this.key=this.config.key||(null==o?void 0:o.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:c.STATE_DELIMITER),this.id=this.config.id||i.__spreadArray([this.machine.key],i.__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(d=this.config.schema)&&void 0!==d?d:{},this.description=this.config.description,l.IS_PRODUCTION||r.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?r.mapValues(this.config.states,(function(t,n){var r,a=new e(t,{},void 0,{parent:g,key:n});return Object.assign(g.idMap,i.__assign(((r={})[a.id]=a,r),a.idMap)),a})):b;var h=0;!function e(t){var n,r;t.order=h++;try{for(var a=i.__values(u.getAllChildren(t)),o=a.next();!o.done;o=a.next())e(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(e){return e.event===f})):f in this.config.on),this.strict=!!this.config.strict,this.onEntry=r.toArray(this.config.entry||this.config.onEntry).map((function(e){return s.toActionObject(e)})),this.onExit=r.toArray(this.config.exit||this.config.onExit).map((function(e){return s.toActionObject(e)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=r.toArray(this.config.invoke).map((function(e,t){var n,a;if(r.isMachine(e)){var o=r.createInvokeId(g.id,t);return g.machine.options.services=i.__assign(((n={})[o]=e,n),g.machine.options.services),p.toInvokeDefinition({src:o,id:o})}if(r.isString(e.src))return o=e.id||r.createInvokeId(g.id,t),p.toInvokeDefinition(i.__assign(i.__assign({},e),{id:o,src:e.src}));if(r.isMachine(e.src)||r.isFunction(e.src))return o=e.id||r.createInvokeId(g.id,t),g.machine.options.services=i.__assign(((a={})[o]=e.src,a),g.machine.options.services),p.toInvokeDefinition(i.__assign(i.__assign({id:o},e),{src:o}));var s=e.src;return p.toInvokeDefinition(i.__assign(i.__assign({id:r.createInvokeId(g.id,t)},e),{src:s}))})),this.activities=r.toArray(this.config.activities).concat(this.invoke).map((function(e){return s.toActivityDefinition(e)})),this.transition=this.transition.bind(this),this.tags=r.toArray(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||u.getAllStateNodes(this).forEach((function(e){return e.on}))},e.prototype.withConfig=function(t,n){var r=this.options,a=r.actions,o=r.activities,s=r.guards,l=r.services,c=r.delays;return new e(this.config,{actions:i.__assign(i.__assign({},a),t.actions),activities:i.__assign(i.__assign({},o),t.activities),guards:i.__assign(i.__assign({},s),t.guards),services:i.__assign(i.__assign({},l),t.services),delays:i.__assign(i.__assign({},c),t.delays)},null!=n?n:this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return r.isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:r.mapValues(this.states,(function(e){return e.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce((function(e,t){return e[t.eventType]=e[t.eventType]||[],e[t.eventType].push(t),e}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var t=e===f,n=this.transitions.filter((function(n){var i=n.eventType===e;return t?i:i||n.eventType===g}));return this.__cache.candidates[e]=n,n},e.prototype.getDelayedTransitions=function(){var e=this,t=this.config.after;if(!t)return[];var n=function(t,n){var i=r.isFunction(t)?"".concat(e.id,":delay[").concat(n,"]"):t,a=s.after(i,e.id);return e.onEntry.push(s.send(a,{delay:t})),e.onExit.push(s.cancel(a)),a};return(r.isArray(t)?t.map((function(e,t){var r=n(e.delay,t);return i.__assign(i.__assign({},e),{event:r})})):r.flatten(Object.keys(t).map((function(e,a){var o=t[e],s=r.isString(o)?{target:o}:o,l=isNaN(+e)?e:+e,c=n(l,a);return r.toArray(s).map((function(e){return i.__assign(i.__assign({},e),{event:c,delay:l})}))})))).map((function(t){var n=t.delay;return i.__assign(i.__assign({},e.formatTransition(t)),{delay:n})}))},e.prototype.getStateNodes=function(e){var t,n=this;if(!e)return[];var o=e instanceof a.State?e.value:r.toStateValue(e,this.delimiter);if(r.isString(o)){var s=this.getStateNode(o).initial;return void 0!==s?this.getStateNodes(((t={})[o]=s,t)):[this,this.states[o]]}var l=Object.keys(o),c=[this];return c.push.apply(c,i.__spreadArray([],i.__read(r.flatten(l.map((function(e){return n.getStateNode(e).getStateNodes(o[e])})))),!1)),c},e.prototype.handles=function(e){var t=r.getEventType(e);return this.events.includes(t)},e.prototype.resolveState=function(e){var t=e instanceof a.State?e:a.State.create(e),n=Array.from(u.getConfiguration([],this.getStateNodes(t.value)));return new a.State(i.__assign(i.__assign({},t),{value:this.resolve(t.value),configuration:n,done:u.isInFinalState(n,this),tags:u.getTagsFromConfiguration(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(e,t,n){var i=this.getStateNode(e).next(t,n);return i&&i.transitions.length?i:this.next(t,n)},e.prototype.transitionCompoundNode=function(e,t,n){var i=Object.keys(e),r=this.getStateNode(i[0])._transition(e[i[0]],t,n);return r&&r.transitions.length?r:this.next(t,n)},e.prototype.transitionParallelNode=function(e,t,n){var a,o,s={};try{for(var l=i.__values(Object.keys(e)),c=l.next();!c.done;c=l.next()){var u=c.value,d=e[u];if(d){var p=this.getStateNode(u)._transition(d,t,n);p&&(s[u]=p)}}}catch(e){a={error:e}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}var f=Object.keys(s).map((function(e){return s[e]})),g=r.flatten(f.map((function(e){return e.transitions})));if(!f.some((function(e){return e.transitions.length>0})))return this.next(t,n);var b=r.flatten(Object.keys(s).map((function(e){return s[e].configuration})));return{transitions:g,exitSet:r.flatten(f.map((function(e){return e.exitSet}))),configuration:b,source:t,actions:r.flatten(Object.keys(s).map((function(e){return s[e].actions})))}},e.prototype._transition=function(e,t,n){return r.isString(e)?this.transitionLeafNode(e,t,n):1===Object.keys(e).length?this.transitionCompoundNode(e,t,n):this.transitionParallelNode(e,t,n)},e.prototype.getTransitionData=function(e,t){return this._transition(e.value,e,r.toSCXMLEvent(t))},e.prototype.next=function(e,t){var n,a,o,s=this,l=t.name,c=[],u=[];try{for(var d=i.__values(this.getCandidates(l)),p=d.next();!p.done;p=d.next()){var f=p.value,g=f.cond,b=f.in,v=e.context,m=!b||(r.isString(b)&&h(b)?e.matches(r.toStateValue(this.getStateNodeById(b).path,this.delimiter)):r.matchesState(r.toStateValue(b,this.delimiter),r.path(this.path.slice(0,-2))(e.value))),y=!1;try{y=!g||r.evaluateGuard(this.machine,g,v,t,e)}catch(e){throw new Error("Unable to evaluate guard '".concat(g.name||g.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,"':\n").concat(e.message))}if(y&&m){void 0!==f.target&&(u=f.target),c.push.apply(c,i.__spreadArray([],i.__read(f.actions),!1)),o=f;break}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}if(o){if(!u.length)return{transitions:[o],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var j=r.flatten(u.map((function(t){return s.getRelativeStateNodes(t,e.historyValue)})));return{transitions:[o],exitSet:o.internal?[]:r.flatten(u.map((function(e){return s.getPotentiallyReenteringNodes(e)}))),configuration:j,source:e,actions:c}}},e.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var t=[],n=this,i=e;n&&n!==i;)t.push(n),n=n.parent;return n!==i?[]:(t.push(i),t)},e.prototype.getActions=function(e,t,n,a,o,l,c){var d,p,f,g,b=this,h=l?u.getConfiguration([],this.getStateNodes(l.value)):[],v=new Set;try{for(var m=i.__values(Array.from(e).sort((function(e,t){return e.order-t.order}))),y=m.next();!y.done;y=m.next()){var j=y.value;(!u.has(h,j)||u.has(n.exitSet,j)||j.parent&&v.has(j.parent))&&v.add(j)}}catch(e){d={error:e}}finally{try{y&&!y.done&&(p=m.return)&&p.call(m)}finally{if(d)throw d.error}}try{for(var x=i.__values(h),O=x.next();!O.done;O=x.next())j=O.value,u.has(e,j)&&!u.has(n.exitSet,j.parent)||n.exitSet.push(j)}catch(e){f={error:e}}finally{try{O&&!O.done&&(g=x.return)&&g.call(x)}finally{if(f)throw f.error}}n.exitSet.sort((function(e,t){return t.order-e.order}));var _=Array.from(v).sort((function(e,t){return e.order-t.order})),E=new Set(n.exitSet),S=r.flatten(_.map((function(e){var t=[];if("final"!==e.type)return t;var i=e.parent;if(!i.parent)return t;t.push(s.done(e.id,e.doneData),s.done(i.id,e.doneData?r.mapContext(e.doneData,a,o):void 0));var l=i.parent;return"parallel"===l.type&&u.getChildren(l).every((function(e){return u.isInFinalState(n.configuration,e)}))&&t.push(s.done(l.id)),t}))),w=_.map((function(e){var t=e.onEntry,n=e.activities.map((function(e){return s.start(e)}));return{type:"entry",actions:s.toActionObjects(c?i.__spreadArray(i.__spreadArray([],i.__read(t),!1),i.__read(n),!1):i.__spreadArray(i.__spreadArray([],i.__read(n),!1),i.__read(t),!1),b.machine.options.actions)}})).concat({type:"state_done",actions:S.map((function(e){return s.raise(e)}))}),k=Array.from(E).map((function(e){return{type:"exit",actions:s.toActionObjects(i.__spreadArray(i.__spreadArray([],i.__read(e.onExit),!1),i.__read(e.activities.map((function(e){return s.stop(e)}))),!1),b.machine.options.actions)}})).concat({type:"transition",actions:s.toActionObjects(n.actions,this.machine.options.actions)}).concat(w);if(t){var I=s.toActionObjects(r.flatten(i.__spreadArray([],i.__read(e),!1).sort((function(e,t){return t.order-e.order})).map((function(e){return e.onExit}))),this.machine.options.actions).filter((function(e){return!r.isRaisableAction(e)}));return k.concat({type:"stop",actions:I})}return k},e.prototype.transition=function(e,t,n,o){void 0===e&&(e=this.initialState);var s,c=r.toSCXMLEvent(t);if(e instanceof a.State)s=void 0===n?e:this.resolveState(a.State.from(e,n));else{var d=r.isString(e)?this.resolve(r.pathToStateValue(this.getResolvedPath(e))):this.resolve(e),p=null!=n?n:this.machine.context;s=this.resolveState(a.State.from(d,p))}if(!l.IS_PRODUCTION&&c.name===g)throw new Error("An event cannot have the wildcard type ('".concat(g,"')"));if(this.strict&&!this.events.includes(c.name)&&!r.isBuiltInEvent(c.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(c.name,"'"));var f=this._transition(s.value,s,c)||{transitions:[],configuration:[],exitSet:[],source:s,actions:[]},b=u.getConfiguration([],this.getStateNodes(s.value)),h=f.configuration.length?u.getConfiguration(b,f.configuration):b;return f.configuration=i.__spreadArray([],i.__read(h),!1),this.resolveTransition(f,s,s.context,o,c)},e.prototype.resolveRaisedTransition=function(e,t,n,r){var a,o=e.actions;return(e=this.transition(e,t,void 0,r))._event=n,e.event=n.data,(a=e.actions).unshift.apply(a,i.__spreadArray([],i.__read(o),!1)),e},e.prototype.resolveTransition=function(e,t,n,l,c){var p,g,b,h,v=this;void 0===c&&(c=s.initEvent);var m=e.configuration,y=!t||e.transitions.length>0,j=y?e.configuration:t?t.configuration:[],x=u.isInFinalState(j,this),O=y?u.getValue(this.machine,m):void 0,_=t?t.historyValue?t.historyValue:e.source?this.machine.historyValue(t.value):void 0:void 0,E=this.getActions(new Set(j),x,e,n,c,t,l),S=t?i.__assign({},t.activities):{};try{for(var w=i.__values(E),k=w.next();!k.done;k=w.next()){var I=k.value;try{for(var C=(b=void 0,i.__values(I.actions)),A=C.next();!A.done;A=C.next()){var T=A.value;T.type===o.start?S[T.activity.id||T.activity.type]=T:T.type===o.stop&&(S[T.activity.id||T.activity.type]=!1)}}catch(e){b={error:e}}finally{try{A&&!A.done&&(h=C.return)&&h.call(C)}finally{if(b)throw b.error}}}}catch(e){p={error:e}}finally{try{k&&!k.done&&(g=w.return)&&g.call(w)}finally{if(p)throw p.error}}var P=i.__read(s.resolveActions(this,t,n,c,E,l,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),M=P[0],L=P[1],F=i.__read(r.partition(M,r.isRaisableAction),2),N=F[0],R=F[1],D=M.filter((function(e){var t;return e.type===o.start&&(null===(t=e.activity)||void 0===t?void 0:t.type)===o.invoke})),z=D.reduce((function(e,t){return e[t.activity.id]=d.createInvocableActor(t.activity,v.machine,L,c),e}),t?i.__assign({},t.children):{}),U=new a.State({value:O||t.value,context:L,_event:c,_sessionid:t?t._sessionid:null,historyValue:O?_?r.updateHistoryValue(_,O):void 0:t?t.historyValue:void 0,history:!O||e.source?t:void 0,actions:O?R:[],activities:O?S:t?t.activities:{},events:[],configuration:j,transitions:e.transitions,children:z,done:x,tags:u.getTagsFromConfiguration(j),machine:this}),$=n!==L;U.changed=c.name===o.update||$;var B=U.history;B&&delete B.history;var G=!x&&(this._transient||m.some((function(e){return e._transient})));if(!(y||G&&c.name!==f))return U;var V=U;if(!x)for(G&&(V=this.resolveRaisedTransition(V,{type:o.nullEvent},c,l));N.length;){var W=N.shift();V=this.resolveRaisedTransition(V,W._event,c,l)}var K=V.changed||(B?!!V.actions.length||$||typeof B.value!=typeof V.value||!a.stateValuesEqual(V.value,B.value):void 0);return V.changed=K,V.history=B,V},e.prototype.getStateNode=function(e){if(h(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var t=this.states[e];if(!t)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return t},e.prototype.getStateNodeById=function(e){var t=h(e)?e.slice(1):e;if(t===this.id)return this;var n=this.machine.idMap[t];if(!n)throw new Error("Child state node '#".concat(t,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(e){if("string"==typeof e&&h(e))try{return this.getStateNodeById(e.slice(1))}catch(e){}for(var t=r.toStatePath(e,this.delimiter).slice(),n=this;t.length;){var i=t.shift();if(!i.length)break;n=n.getStateNode(i)}return n},e.prototype.resolve=function(e){var t,n=this;if(!e)return this.initialStateValue||b;switch(this.type){case"parallel":return r.mapValues(this.initialStateValue,(function(t,i){return t?n.getStateNode(i).resolve(e[i]||t):b}));case"compound":if(r.isString(e)){var i=this.getStateNode(e);return"parallel"===i.type||"compound"===i.type?((t={})[e]=i.initialStateValue,t):e}return Object.keys(e).length?r.mapValues(e,(function(e,t){return e?n.getStateNode(t).resolve(e):b})):this.initialStateValue||{};default:return e||b}},e.prototype.getResolvedPath=function(e){if(h(e)){var t=this.machine.idMap[e.slice(1)];if(!t)throw new Error("Unable to find state node '".concat(e,"'"));return t.path}return r.toStatePath(e,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var e,t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)t=r.mapFilterValues(this.states,(function(e){return e.initialStateValue||b}),(function(e){return!("history"===e.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));t=u.isLeafNode(this.states[this.initial])?this.initial:((e={})[this.initial]=this.states[this.initial].initialStateValue,e)}else t={};return this.__cache.initialStateValue=t,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(e,t){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=t?t:this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var e;if("history"===this.type){var t=this.config;e=r.isString(t.target)&&h(t.target)?r.pathToStateValue(this.machine.getStateNodeById(t.target).path.slice(this.path.length-1)):t.target}return e},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(e,t,n){return void 0===n&&(n=!0),n?"history"===e.type?e.resolveHistory(t):e.initialStateNodes:[e]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var e=this;if(u.isLeafNode(this))return[this];if("compound"===this.type&&!this.initial)return l.IS_PRODUCTION||r.warn(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var t=r.toStatePaths(this.initialStateValue);return r.flatten(t.map((function(t){return e.getFromRelativePath(t)})))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var t=i.__read(e),n=t[0],r=t.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var a=this.getStateNode(n);if("history"===a.type)return a.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(r)},e.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:r.mapFilterValues(this.states,(function(t,n){if(!e)return t.historyValue();var i=r.isString(e)?void 0:e[n];return t.historyValue(i||t.initialStateValue)}),(function(e){return!e.history}))}},e.prototype.resolveHistory=function(e){var t=this;if("history"!==this.type)return[this];var n=this.parent;if(!e){var i=this.target;return i?r.flatten(r.toStatePaths(i).map((function(e){return n.getFromRelativePath(e)}))):n.initialStateNodes}var a=r.nestedPath(n.path,"states")(e).current;return r.isString(a)?[n.getStateNode(a)]:r.flatten(r.toStatePaths(a).map((function(e){return"deep"===t.history?n.getFromRelativePath(e):[n.states[e[0]]]})))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var e=this,t=r.flatten(Object.keys(this.states).map((function(t){return e.states[t].stateIds})));return[this.id].concat(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var e,t,n,r;if(this.__cache.events)return this.__cache.events;var a=this.states,o=new Set(this.ownEvents);if(a)try{for(var s=i.__values(Object.keys(a)),l=s.next();!l.done;l=s.next()){var c=a[l.value];if(c.states)try{for(var u=(n=void 0,i.__values(c.events)),d=u.next();!d.done;d=u.next()){var p=d.value;o.add("".concat(p))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter((function(e){return!(!e.target&&!e.actions.length&&e.internal)})).map((function(e){return e.eventType})));return Array.from(e)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(e){var t=this;if(void 0!==e)return e.map((function(e){if(!r.isString(e))return e;var n=e[0]===t.delimiter;if(n&&!t.parent)return t.getStateNodeByPath(e.slice(1));var i=n?t.key+e:e;if(!t.parent)return t.getStateNodeByPath(i);try{return t.parent.getStateNodeByPath(i)}catch(e){throw new Error("Invalid transition definition for state node '".concat(t.id,"':\n").concat(e.message))}}))},e.prototype.formatTransition=function(e){var t=this,n=r.normalizeTarget(e.target),a="internal"in e?e.internal:!n||n.some((function(e){return r.isString(e)&&e[0]===t.delimiter})),o=this.machine.options.guards,l=this.resolveTarget(n),c=i.__assign(i.__assign({},e),{actions:s.toActionObjects(r.toArray(e.actions)),cond:r.toGuard(e.cond,o),target:l,source:this,internal:a,eventType:e.event,toJSON:function(){return i.__assign(i.__assign({},c),{target:c.target?c.target.map((function(e){return"#".concat(e.id)})):void 0,source:"#".concat(t.id)})}});return c},e.prototype.formatTransitions=function(){var e,t,n,a=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var o=this.config.on,c=o[g],u=void 0===c?[]:c,d=i.__rest(o,["*"]);n=r.flatten(Object.keys(d).map((function(e){l.IS_PRODUCTION||e!==f||r.warn(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(a.id,'".'));var t=r.toTransitionConfigArray(e,d[e]);return l.IS_PRODUCTION||function(e,t,n){var i=n.slice(0,-1).some((function(e){return!("cond"in e)&&!("in"in e)&&(r.isString(e.target)||r.isMachine(e.target))})),a=t===f?"the transient event":"event '".concat(t,"'");r.warn(!i,"One or more transitions for ".concat(a," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")}(a,e,t),t})).concat(r.toTransitionConfigArray(g,u)))}else n=[];var p=this.config.always?r.toTransitionConfigArray("",this.config.always):[],b=this.config.onDone?r.toTransitionConfigArray(String(s.done(this.id)),this.config.onDone):[];l.IS_PRODUCTION||r.warn(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var h=r.flatten(this.invoke.map((function(e){var t=[];return e.onDone&&t.push.apply(t,i.__spreadArray([],i.__read(r.toTransitionConfigArray(String(s.doneInvoke(e.id)),e.onDone)),!1)),e.onError&&t.push.apply(t,i.__spreadArray([],i.__read(r.toTransitionConfigArray(String(s.error(e.id)),e.onError)),!1)),t}))),v=this.after,m=r.flatten(i.__spreadArray(i.__spreadArray(i.__spreadArray(i.__spreadArray([],i.__read(b),!1),i.__read(h),!1),i.__read(n),!1),i.__read(p),!1).map((function(e){return r.toArray(e).map((function(e){return a.formatTransition(e)}))})));try{for(var y=i.__values(v),j=y.next();!j.done;j=y.next()){var x=j.value;m.push(x)}}catch(t){e={error:t}}finally{try{j&&!j.done&&(t=y.return)&&t.call(y)}finally{if(e)throw e.error}}return m},e}();t.StateNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pipeable=t.pipe=void 0;var i=n(47);t.pipe=i.pipe,t.pipeable=function(e){var t={};return function(e){return"function"==typeof e.map}(e)&&(t.map=function(t){return function(n){return e.map(n,t)}}),function(e){return"function"==typeof e.contramap}(e)&&(t.contramap=function(t){return function(n){return e.contramap(n,t)}}),function(e){return"function"==typeof e.mapWithIndex}(e)&&(t.mapWithIndex=function(t){return function(n){return e.mapWithIndex(n,t)}}),function(e){return"function"==typeof e.ap}(e)&&(t.ap=function(t){return function(n){return e.ap(n,t)}},t.apFirst=function(t){return function(n){return e.ap(e.map(n,(function(e){return function(){return e}})),t)}},t.apSecond=function(t){return function(n){return e.ap(e.map(n,(function(){return function(e){return e}})),t)}}),function(e){return"function"==typeof e.chain}(e)&&(t.chain=function(t){return function(n){return e.chain(n,t)}},t.chainFirst=function(t){return function(n){return e.chain(n,(function(n){return e.map(t(n),(function(){return n}))}))}},t.flatten=function(t){return e.chain(t,i.identity)}),function(e){return"function"==typeof e.bimap}(e)&&(t.bimap=function(t,n){return function(i){return e.bimap(i,t,n)}},t.mapLeft=function(t){return function(n){return e.mapLeft(n,t)}}),function(e){return"function"==typeof e.extend}(e)&&(t.extend=function(t){return function(n){return e.extend(n,t)}},t.duplicate=function(t){return e.extend(t,i.identity)}),function(e){return"function"==typeof e.reduce}(e)&&(t.reduce=function(t,n){return function(i){return e.reduce(i,t,n)}},t.foldMap=function(t){var n=e.foldMap(t);return function(e){return function(t){return n(t,e)}}},t.reduceRight=function(t,n){return function(i){return e.reduceRight(i,t,n)}}),function(e){return"function"==typeof e.reduceWithIndex}(e)&&(t.reduceWithIndex=function(t,n){return function(i){return e.reduceWithIndex(i,t,n)}},t.foldMapWithIndex=function(t){var n=e.foldMapWithIndex(t);return function(e){return function(t){return n(t,e)}}},t.reduceRightWithIndex=function(t,n){return function(i){return e.reduceRightWithIndex(i,t,n)}}),function(e){return"function"==typeof e.alt}(e)&&(t.alt=function(t){return function(n){return e.alt(n,t)}}),function(e){return"function"==typeof e.compact}(e)&&(t.compact=e.compact,t.separate=e.separate),function(e){return"function"==typeof e.filter}(e)&&(t.filter=function(t){return function(n){return e.filter(n,t)}},t.filterMap=function(t){return function(n){return e.filterMap(n,t)}},t.partition=function(t){return function(n){return e.partition(n,t)}},t.partitionMap=function(t){return function(n){return e.partitionMap(n,t)}}),function(e){return"function"==typeof e.filterWithIndex}(e)&&(t.filterWithIndex=function(t){return function(n){return e.filterWithIndex(n,t)}},t.filterMapWithIndex=function(t){return function(n){return e.filterMapWithIndex(n,t)}},t.partitionWithIndex=function(t){return function(n){return e.partitionWithIndex(n,t)}},t.partitionMapWithIndex=function(t){return function(n){return e.partitionMapWithIndex(n,t)}}),function(e){return"function"==typeof e.promap}(e)&&(t.promap=function(t,n){return function(i){return e.promap(i,t,n)}}),function(e){return"function"==typeof e.compose}(e)&&(t.compose=function(t){return function(n){return e.compose(n,t)}}),function(e){return"function"==typeof e.throwError}(e)&&(t.fromOption=function(t){return function(n){return"None"===n._tag?e.throwError(t()):e.of(n.value)}},t.fromEither=function(t){return"Left"===t._tag?e.throwError(t.left):e.of(t.right)},t.fromPredicate=function(t,n){return function(i){return t(i)?e.of(i):e.throwError(n(i))}},t.filterOrElse=function(t,n){return function(i){return e.chain(i,(function(i){return t(i)?e.of(i):e.throwError(n(i))}))}}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9).useLayoutEffect;t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelector=void 0;var i=n(9),r=n(48),a=n(51),o=n(43),s=function(e,t){return e===t};t.useSelector=function(e,t,n,l){void 0===n&&(n=s);var c=(0,i.useRef)(null),u=(0,i.useCallback)((function(t){return e.subscribe(t).unsubscribe}),[e]),d=(0,i.useCallback)((function(){return l?l(e):function(e,t){if((0,o.isService)(e)){if(0===e.status&&t.current)return t.current;var n=(0,o.getServiceSnapshot)(e);return t.current=0===e.status?n:null,n}return(0,a.isActorWithState)(e)?e.state:void 0}(e,c)}),[e,l]);return(0,r.useSyncExternalStoreWithSelector)(u,d,d,t,n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"callObservabilityOnboardingApi",(function(){return i})),n.d(t,"createCallApi",(function(){return r}));let i=()=>{throw new Error("callObservabilityOnboardingApi has to be initialized before used. Call createCallApi first.")};function r(e){i=(t,n)=>{const{params:i}=n,{method:r,pathname:a}=function(e,t={}){const{method:n,pathname:i,version:r}=function(e){var t;const n=e.split(" "),i=n[0].trim().toLowerCase(),r=n[1].trim(),a=null===(t=n[2])||void 0===t?void 0:t.trim();if(!["get","post","put","delete"].includes(i))throw new Error(`Endpoint ${e} was not prefixed with a valid HTTP method`);if(!a&&r.startsWith("/api"))throw new Error(`Missing version for public endpoint ${e}`);return{method:i,pathname:r,version:a}}(e);return{method:n,pathname:Object.keys(t).reduce(((e,n)=>e.replace(`{${n}}`,t[n])),i),version:r}}(t,null==i?void 0:i.path);return async function({http:e},t){const{pathname:n,method:i="get",...r}=function(e){const{body:t,...n}=e;return{...n,...void 0!==t?{body:JSON.stringify(t)}:{},query:{...e.query}}}(t),a=i.toLowerCase();return await e[a](n,r)}(e,{...n,method:r,pathname:a,body:null==i?void 0:i.body,query:null==i?void 0:i.query})}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n(9),r=n(0),a=n.n(r),o=n(55),s=n.n(o);class use_tracked_promise_CanceledPromiseError extends Error{constructor(e){super(e),a()(this,"isCanceled",!0),Object.setPrototypeOf(this,new.target.prototype)}}class SilentCanceledPromiseError extends use_tracked_promise_CanceledPromiseError{}const l=()=>{};var c=n(12),u=n(57);const d=c.i18n.translate("xpack.observability_onboarding.installIntegration.error.unauthorized",{defaultMessage:"Required kibana privilege {requiredKibanaPrivileges} is missing, please add the required privilege to the role of the authenticated user.",values:{requiredKibanaPrivileges:"['Fleet', 'Integrations']"}}),p=({onIntegrationCreationSuccess:e,onIntegrationCreationFailure:t,packages:n=["system"]})=>{const{services:{http:r}}=Object(u.a)(),[a,o]=(({createPromise:e,onResolve:t=l,onReject:n=l,cancelPreviousOn:r="never",triggerOrThrow:a="whenMounted"},o)=>{const c=s()(),u=Object(i.useCallback)((()=>{switch(a){case"always":return!0;case"whenMounted":return c()}}),[c,a]),d=Object(i.useRef)([]),[p,f]=Object(i.useState)({state:"uninitialized"}),g=Object(i.useCallback)((()=>{f({state:"uninitialized"})}),[]),b=Object(i.useMemo)((()=>(...i)=>{let a;const o=new Promise(((e,t)=>{a=t})),s=d.current,c=()=>{s.forEach((e=>e.cancel()))},p=e(...i),g=Promise.race([p,o]);f({state:"pending",promise:g}),"creation"===r&&c();const b={cancel:()=>{a(new use_tracked_promise_CanceledPromiseError)},cancelSilently:()=>{a(new SilentCanceledPromiseError)},promise:g.then((e=>(["settlement","resolution"].includes(r)&&c(),d.current=d.current.filter((e=>e.promise!==b.promise)),t&&u()&&t(e),f((t=>"pending"===t.state&&t.promise===g?{state:"resolved",promise:b.promise,value:e}:t)),e)),(e=>{if(!(e instanceof SilentCanceledPromiseError)){if(["settlement","rejection"].includes(r)&&c(),d.current=d.current.filter((e=>e.promise!==b.promise)),u()){if(!n)throw e;n(e)}f((t=>"pending"===t.state&&t.promise===g?{state:"rejected",promise:g,value:e}:t))}}))};return d.current=[...d.current,b],b.promise.catch(l),b.promise}),o);return Object(i.useEffect)((()=>()=>{d.current.forEach((e=>e.cancelSilently()))}),[]),[p,b,g]})({cancelPreviousOn:"creation",createPromise:async()=>{const e={headers:{"Elastic-Api-Version":"2023-10-31"}},t=[];for(const i of n){const{item:n}=await r.get(`/api/fleet/epm/packages/${i}`,e);"installed"!==n.status&&await r.post(`/api/fleet/epm/packages/${i}`,e),t.push(n)}return{versions:t.map((e=>e.version))}},onResolve:({versions:t})=>{null==e||e({versions:t})},onReject:e=>{var n,i;403===(null==e||null===(n=e.body)||void 0===n?void 0:n.statusCode)?t({type:"AuthorizationError",message:d}):t({type:"UnknownError",message:null==e||null===(i=e.body)||void 0===i?void 0:i.message})}},[e,t]);return{performRequest:Object(i.useCallback)((()=>{o()}),[o]),requestState:a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;t.default=r},function(e,t,n){e.exports=n.p+"f6e81f12b481097e638ef7c8c9667fd9.svg"},function(e,t,n){e.exports=n.p+"b34c8f46eb68407952323dc95ce08869.svg"},function(e,t,n){e.exports=n.p+"6f6a8409e649d08769456fa79d7a765d.svg"},function(e,t,n){e.exports=n.p+"5683e17338462c1de52f781e34cab16d.svg"},function(e,t,n){e.exports=n.p+"7280640b01bb645353932b652dce53a7.svg"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),r=n(9),a=i.__importDefault(n(53));t.default=function(e,t){void 0===t&&(t=[]);var n=r.useState(0),o=n[0],s=n[1],l=a.default(e,i.__spreadArrays(t,[o])),c=l.loading,u=r.useCallback((function(){c||s((function(e){return e+1}))}),i.__spreadArrays(t,[c]));return i.__assign(i.__assign({},l),{retry:u})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),r=n(75),a=i.__importDefault(n(77));t.default=function(e,t){a.default(e,t,r.isDeepEqual)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var i=n(15).__importDefault(n(76));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.removeEventListener.apply(e,t)},t.isDeepEqual=i.default},function(e,t,n){"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;0!=r--;){var o=a[r];if(!("_owner"===o&&t.$$typeof||e(t[o],n[o])))return!1}return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.default=function(e,t,n){var r=i.useRef(void 0);r.current&&n(t,r.current)||(r.current=t),i.useEffect(e,r.current)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(30),a=n(36),o=n(42),s=n(38),l=n(37),c=n(33),u=n(32),d=n(79),p=n(41),f=n(80),g=n(81),b=n(58),h=n(60),v={sync:!1,autoForward:!1};t.InterpreterStatus=void 0,(i=t.InterpreterStatus||(t.InterpreterStatus={}))[i.NotStarted=0]="NotStarted",i[i.Running=1]="Running",i[i.Stopped=2]="Stopped";var m=function(){function e(n,i){void 0===i&&(i=e.defaultOptions);var o=this;this.machine=n,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=t.InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(e,n){if(u.isArray(e))return o.batch(e),o.state;var i=u.toSCXMLEvent(u.toEventObject(e,n));if(o.status===t.InterpreterStatus.Stopped)return c.IS_PRODUCTION||u.warn(!1,'Event "'.concat(i.name,'" was sent to stopped service "').concat(o.machine.id,'". This service has already reached its final state, and will not transition.\nEvent: ').concat(JSON.stringify(i.data))),o.state;if(o.status!==t.InterpreterStatus.Running&&!o.options.deferEvents)throw new Error('Event "'.concat(i.name,'" was sent to uninitialized service "').concat(o.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: ').concat(JSON.stringify(i.data)));return o.scheduler.schedule((function(){o.forward(i);var e=o._nextState(i);o.update(e,i)})),o._state},this.sendTo=function(e,n,i){var d=o.parent&&(n===a.SpecialTargets.Parent||o.parent.id===n),p=d?o.parent:u.isString(n)?n===a.SpecialTargets.Internal?o:o.children.get(n)||f.registry.get(n):u.isActor(n)?n:void 0;if(p)if("machine"in p){if(o.status!==t.InterpreterStatus.Stopped||o.parent!==p||o.state.done){var g=r.__assign(r.__assign({},e),{name:e.name===s.error?"".concat(l.error(o.id)):e.name,origin:o.sessionId});!i&&o.machine.config.predictableActionArguments?o._outgoingQueue.push([p,g]):p.send(g)}}else!i&&o.machine.config.predictableActionArguments?o._outgoingQueue.push([p,e.data]):p.send(e.data);else{if(!d)throw new Error("Unable to send event to child '".concat(n,"' from service '").concat(o.id,"'."));c.IS_PRODUCTION||u.warn(!1,"Service '".concat(o.id,"' has no parent: unable to send event ").concat(e.type))}},this._exec=function(e,n,i,r){void 0===r&&(r=o.machine.options.actions);var d=e.exec||l.getActionFunction(e.type,r),p=u.isFunction(d)?d:d?d.exec:e.exec;if(p)try{return p(n,i.data,o.machine.config.predictableActionArguments?{action:e,_event:i}:{action:e,state:o.state,_event:i})}catch(e){throw o.parent&&o.parent.send({type:"xstate.error",data:e}),e}switch(e.type){case s.raise:var f=e;o.defer(f);break;case s.send:var g=e;if("number"==typeof g.delay)return void o.defer(g);g.to?o.sendTo(g._event,g.to,i===l.initEvent):o.send(g._event);break;case s.cancel:o.cancel(e.sendId);break;case s.start:if(o.status!==t.InterpreterStatus.Running)return;var b=e.activity;if(!o.machine.config.predictableActionArguments&&!o.state.activities[b.id||b.type])break;if(b.type===a.ActionTypes.Invoke){var h=u.toInvokeSource(b.src),v=o.machine.options.services?o.machine.options.services[h.type]:void 0,m=b.id,y=b.data;c.IS_PRODUCTION||u.warn(!("forward"in b),"`forward` property is deprecated (found in invocation of '".concat(b.src,"' in in machine '").concat(o.machine.id,"'). ")+"Please use `autoForward` instead.");var j="autoForward"in b?b.autoForward:!!b.forward;if(!v)return void(c.IS_PRODUCTION||u.warn(!1,"No service found for invocation '".concat(b.src,"' in machine '").concat(o.machine.id,"'.")));var x=y?u.mapContext(y,n,i):void 0;if("string"==typeof v)return;var O=u.isFunction(v)?v(n,i.data,{data:x,src:h,meta:b.meta}):v;if(!O)return;var _=void 0;u.isMachine(O)&&(O=x?O.withContext(x):O,_={autoForward:j}),o.spawn(O,m,_)}else o.spawnActivity(b);break;case s.stop:o.stopChild(e.activity.id);break;case s.log:var E=e,S=E.label,w=E.value;S?o.logger(S,w):o.logger(w);break;default:c.IS_PRODUCTION||u.warn(!1,"No implementation found for action type '".concat(e.type,"'"))}};var p=r.__assign(r.__assign({},e.defaultOptions),i),g=p.clock,b=p.logger,h=p.parent,v=p.id,m=void 0!==v?v:n.id;this.id=m,this.logger=b,this.clock=g,this.parent=h,this.options=p,this.scheduler=new d.Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=f.registry.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:b.provide(this,(function(){return e._initialState=e.machine.initialState,e._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return c.IS_PRODUCTION||u.warn(this.status!==t.InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(e,t){var n,i;try{for(var a=r.__values(e.actions),o=a.next();!o.done;o=a.next()){var s=o.value;this.exec(s,e,t)}}catch(e){n={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.update=function(e,t){var n,i,a,o,s,c,d,p,g=this;if(e._sessionid=this.sessionId,this._state=e,this.machine.config.predictableActionArguments&&t!==l.initEvent||!this.options.execute)for(var b=void 0;b=this._outgoingQueue.shift();)b[0].send(b[1]);else this.execute(this.state);if(this.children.forEach((function(e){g.state.children[e.id]=e})),this.devTools&&this.devTools.send(t.data,e),e.event)try{for(var h=r.__values(this.eventListeners),v=h.next();!v.done;v=h.next())(0,v.value)(e.event)}catch(e){n={error:e}}finally{try{v&&!v.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}try{for(var m=r.__values(this.listeners),y=m.next();!y.done;y=m.next())(0,y.value)(e,e.event)}catch(e){a={error:e}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(a)throw a.error}}try{for(var j=r.__values(this.contextListeners),x=j.next();!x.done;x=j.next())(0,x.value)(this.state.context,this.state.history?this.state.history.context:void 0)}catch(e){s={error:e}}finally{try{x&&!x.done&&(c=j.return)&&c.call(j)}finally{if(s)throw s.error}}if(this.state.done){var O=e.configuration.find((function(e){return"final"===e.type&&e.parent===g.machine})),_=O&&O.doneData?u.mapContext(O.doneData,e.context,t):void 0;this._doneEvent=l.doneInvoke(this.id,_);try{for(var E=r.__values(this.doneListeners),S=E.next();!S.done;S=E.next())(0,S.value)(this._doneEvent)}catch(e){d={error:e}}finally{try{S&&!S.done&&(p=E.return)&&p.call(E)}finally{if(d)throw d.error}}this._stop(),this._stopChildren(),f.registry.free(this.sessionId)}},e.prototype.onTransition=function(e){return this.listeners.add(e),this.status===t.InterpreterStatus.Running&&e(this.state,this.state.event),this},e.prototype.subscribe=function(e,n,i){var r=this,a=u.toObserver(e,n,i);this.listeners.add(a.next),this.status!==t.InterpreterStatus.NotStarted&&a.next(this.state);var o=function(){r.doneListeners.delete(o),r.stopListeners.delete(o),a.complete()};return this.status===t.InterpreterStatus.Stopped?a.complete():(this.onDone(o),this.onStop(o)),{unsubscribe:function(){r.listeners.delete(a.next),r.doneListeners.delete(o),r.stopListeners.delete(o)}}},e.prototype.onEvent=function(e){return this.eventListeners.add(e),this},e.prototype.onSend=function(e){return this.sendListeners.add(e),this},e.prototype.onChange=function(e){return this.contextListeners.add(e),this},e.prototype.onStop=function(e){return this.stopListeners.add(e),this},e.prototype.onDone=function(e){return this.status===t.InterpreterStatus.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},e.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},e.prototype.start=function(e){var n=this;if(this.status===t.InterpreterStatus.Running)return this;this.machine._init(),f.registry.register(this.sessionId,this),this.initialized=!0,this.status=t.InterpreterStatus.Running;var i=void 0===e?this.initialState:b.provide(this,(function(){return o.isStateConfig(e)?n.machine.resolveState(e):n.machine.resolveState(o.State.from(e,n.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){n.update(i,l.initEvent)})),this},e.prototype._stopChildren=function(){this.children.forEach((function(e){u.isFunction(e.stop)&&e.stop()})),this.children.clear()},e.prototype._stop=function(){var e,n,i,a,o,s,l,c,u,p;try{for(var f=r.__values(this.listeners),g=f.next();!g.done;g=f.next()){var b=g.value;this.listeners.delete(b)}}catch(t){e={error:t}}finally{try{g&&!g.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}try{for(var h=r.__values(this.stopListeners),v=h.next();!v.done;v=h.next())(b=v.value)(),this.stopListeners.delete(b)}catch(e){i={error:e}}finally{try{v&&!v.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}try{for(var m=r.__values(this.contextListeners),y=m.next();!y.done;y=m.next())b=y.value,this.contextListeners.delete(b)}catch(e){o={error:e}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}try{for(var j=r.__values(this.doneListeners),x=j.next();!x.done;x=j.next())b=x.value,this.doneListeners.delete(b)}catch(e){l={error:e}}finally{try{x&&!x.done&&(c=j.return)&&c.call(j)}finally{if(l)throw l.error}}if(!this.initialized)return this;this.initialized=!1,this.status=t.InterpreterStatus.Stopped,this._initialState=void 0;try{for(var O=r.__values(Object.keys(this.delayedEventsMap)),_=O.next();!_.done;_=O.next()){var E=_.value;this.clock.clearTimeout(this.delayedEventsMap[E])}}catch(e){u={error:e}}finally{try{_&&!_.done&&(p=O.return)&&p.call(O)}finally{if(u)throw u.error}}this.scheduler.clear(),this.scheduler=new d.Scheduler({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var e=this,t=this.scheduler;return this._stop(),t.schedule((function(){var t=u.toSCXMLEvent({type:"xstate.stop"}),n=b.provide(e,(function(){var n=u.flatten(r.__spreadArray([],r.__read(e.state.configuration),!1).sort((function(e,t){return t.order-e.order})).map((function(t){return l.toActionObjects(t.onExit,e.machine.options.actions)}))),i=r.__read(l.resolveActions(e.machine,e.state,e.state.context,t,[{type:"exit",actions:n}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),a=i[0],s=i[1],c=new o.State({value:e.state.value,context:s,_event:t,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:a.filter((function(e){return!u.isRaisableAction(e)})),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return c.changed=!0,c}));e.update(n,t),e._stopChildren(),f.registry.free(e.sessionId)})),this},e.prototype.batch=function(e){var n=this;if(this.status===t.InterpreterStatus.NotStarted&&this.options.deferEvents)c.IS_PRODUCTION||u.warn(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'" and are deferred. Make sure .start() is called for this service.\nEvent: ').concat(JSON.stringify(event)));else if(this.status!==t.InterpreterStatus.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(e.length){var i=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule((function(){var t,a,s=n.state,l=!1,c=[],d=function(e){var t=u.toSCXMLEvent(e);n.forward(t),s=b.provide(n,(function(){return n.machine.transition(s,t,void 0,i||void 0)})),c.push.apply(c,r.__spreadArray([],r.__read(n.machine.config.predictableActionArguments?s.actions:s.actions.map((function(e){return o.bindActionToState(e,s)}))),!1)),l=l||!!s.changed};try{for(var p=r.__values(e),f=p.next();!f.done;f=p.next())d(f.value)}catch(e){t={error:e}}finally{try{f&&!f.done&&(a=p.return)&&a.call(p)}finally{if(t)throw t.error}}s.changed=l,s.actions=c,n.update(s,u.toSCXMLEvent(e[e.length-1]))}))}},e.prototype.sender=function(e){return this.send.bind(this,e)},e.prototype._nextState=function(e,t){var n=this;void 0===t&&(t=!!this.machine.config.predictableActionArguments&&this._exec);var i=u.toSCXMLEvent(e);if(0===i.name.indexOf(s.errorPlatform)&&!this.state.nextEvents.some((function(e){return 0===e.indexOf(s.errorPlatform)})))throw i.data.data;return b.provide(this,(function(){return n.machine.transition(n.state,i,void 0,t||void 0)}))},e.prototype.nextState=function(e){return this._nextState(e,!1)},e.prototype.forward=function(e){var t,n;try{for(var i=r.__values(this.forwardTo),a=i.next();!a.done;a=i.next()){var o=a.value,s=this.children.get(o);if(!s)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));s.send(e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.defer=function(e){var t=this,n=this.clock.setTimeout((function(){"to"in e&&e.to?t.sendTo(e._event,e.to,!0):t.send(e._event)}),e.delay);e.id&&(this.delayedEventsMap[e.id]=n)},e.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},e.prototype.exec=function(e,t,n){void 0===n&&(n=this.machine.options.actions),this._exec(e,t.context,t._event,n)},e.prototype.removeChild=function(e){var t;this.children.delete(e),this.forwardTo.delete(e),null===(t=this.state)||void 0===t||delete t.children[e]},e.prototype.stopChild=function(e){var t=this.children.get(e);t&&(this.removeChild(e),u.isFunction(t.stop)&&t.stop())},e.prototype.spawn=function(e,n,i){if(this.status!==t.InterpreterStatus.Running)return p.createDeferredActor(e,n);if(u.isPromiseLike(e))return this.spawnPromise(Promise.resolve(e),n);if(u.isFunction(e))return this.spawnCallback(e,n);if(p.isSpawnedActor(e))return this.spawnActor(e,n);if(u.isObservable(e))return this.spawnObservable(e,n);if(u.isMachine(e))return this.spawnMachine(e,r.__assign(r.__assign({},i),{id:n}));if(u.isBehavior(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},e.prototype.spawnMachine=function(t,n){var i=this;void 0===n&&(n={});var a=new e(t,r.__assign(r.__assign({},this.options),{parent:this,id:n.id||t.id})),o=r.__assign(r.__assign({},v),n);o.sync&&a.onTransition((function(e){i.send(s.update,{state:e,id:a.id})}));var l=a;return this.children.set(a.id,l),o.autoForward&&this.forwardTo.add(a.id),a.onDone((function(e){i.removeChild(a.id),i.send(u.toSCXMLEvent(e,{origin:a.id}))})).start(),l},e.prototype.spawnBehavior=function(e,t){var n=h.spawnBehavior(e,{id:t,parent:this});return this.children.set(t,n),n},e.prototype.spawnPromise=function(e,t){var n,i,r=this,a=!1;e.then((function(e){a||(i=e,r.removeChild(t),r.send(u.toSCXMLEvent(l.doneInvoke(t,e),{origin:t})))}),(function(e){if(!a){r.removeChild(t);var n=l.error(t,e);try{r.send(u.toSCXMLEvent(n,{origin:t}))}catch(i){u.reportUnhandledExceptionOnInvocation(e,i,t),r.devTools&&r.devTools.send(n,r.state),r.machine.strict&&r.stop()}}}));var o=((n={id:t,send:function(){},subscribe:function(t,n,i){var r=u.toObserver(t,n,i),a=!1;return e.then((function(e){a||(r.next(e),a||r.complete())}),(function(e){a||r.error(e)})),{unsubscribe:function(){return a=!0}}},stop:function(){a=!0},toJSON:function(){return{id:t}},getSnapshot:function(){return i}})[u.symbolObservable]=function(){return this},n);return this.children.set(t,o),o},e.prototype.spawnCallback=function(e,t){var n,i,r,a=this,o=!1,s=new Set,c=new Set;try{r=e((function(e){i=e,c.forEach((function(t){return t(e)})),o||a.send(u.toSCXMLEvent(e,{origin:t}))}),(function(e){s.add(e)}))}catch(e){this.send(l.error(t,e))}if(u.isPromiseLike(r))return this.spawnPromise(r,t);var d=((n={id:t,send:function(e){return s.forEach((function(t){return t(e)}))},subscribe:function(e){var t=u.toObserver(e);return c.add(t.next),{unsubscribe:function(){c.delete(t.next)}}},stop:function(){o=!0,u.isFunction(r)&&r()},toJSON:function(){return{id:t}},getSnapshot:function(){return i}})[u.symbolObservable]=function(){return this},n);return this.children.set(t,d),d},e.prototype.spawnObservable=function(e,t){var n,i,r=this,a=e.subscribe((function(e){i=e,r.send(u.toSCXMLEvent(e,{origin:t}))}),(function(e){r.removeChild(t),r.send(u.toSCXMLEvent(l.error(t,e),{origin:t}))}),(function(){r.removeChild(t),r.send(u.toSCXMLEvent(l.doneInvoke(t),{origin:t}))})),o=((n={id:t,send:function(){},subscribe:function(t,n,i){return e.subscribe(t,n,i)},stop:function(){return a.unsubscribe()},getSnapshot:function(){return i},toJSON:function(){return{id:t}}})[u.symbolObservable]=function(){return this},n);return this.children.set(t,o),o},e.prototype.spawnActor=function(e,t){return this.children.set(t,e),e},e.prototype.spawnActivity=function(e){var t=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(t){var n=t(this.state.context,e);this.spawnEffect(e.id,n)}else c.IS_PRODUCTION||u.warn(!1,"No implementation found for activity '".concat(e.type,"'"))},e.prototype.spawnEffect=function(e,t){var n;this.children.set(e,((n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:t||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}})[u.symbolObservable]=function(){return this},n))},e.prototype.attachDev=function(){var e=g.getGlobal();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(r.__assign(r.__assign({name:this.id,autoPause:!0,stateSanitizer:function(e){return{value:e.value,context:e.context,actions:e.actions}}},t),{features:r.__assign({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}g.registerService(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[u.symbolObservable]=function(){return this},e.prototype.getSnapshot=function(){return this.status===t.InterpreterStatus.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},e.interpret=y,e}();function y(e,t){return new m(e,t)}t.Interpreter=m,t.interpret=y,t.spawn=function(e,t){var n=function(e){return u.isString(e)?r.__assign(r.__assign({},v),{name:e}):r.__assign(r.__assign(r.__assign({},v),{name:u.uniqueId()}),e)}(t);return b.consume((function(t){if(!c.IS_PRODUCTION){var i=u.isMachine(e)||u.isFunction(e);u.warn(!!t||i,'Attempted to spawn an Actor (ID: "'.concat(u.isMachine(e)?e.id:"undefined",'") outside of a service. This will have no effect.'))}return t?t.spawn(e,n.name,n):p.createDeferredActor(e,n.name)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r={deferEvents:!1},a=function(){function e(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=i.__assign(i.__assign({},r),e)}return e.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents)return void this.schedule(e);this.process(e)}this.flushEvents()},e.prototype.schedule=function(e){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()}else this.queue.push(e)},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},e.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(e){throw this.clear(),e}finally{this.processingEvent=!1}},e}();t.Scheduler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=new Map,r=0,a={bookId:function(){return"x:".concat(r++)},register:function(e,t){return i.set(e,t),e},get:function(e){return i.get(e)},free:function(e){i.delete(e)}};t.registry=a},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(33);function r(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:void(i.IS_PRODUCTION||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues"))}t.getGlobal=r,t.registerService=function(e){if(r()){var t=function(){var e=r();if(e&&"__xstate__"in e)return e.__xstate__}();t&&t.register(e)}}}).call(this,n(82))},function(e,t,n){e.exports=n(5)(188)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(61),r=n(33),a=!1;t.Machine=function(e,t,n){return void 0===n&&(n=e.context),new i.StateNode(e,t,n)},t.createMachine=function(e,t){return r.IS_PRODUCTION||"predictableActionArguments"in e||a||(a=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new i.StateNode(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30);n(36);var r=n(38);function a(e){return"string"==typeof e?{type:e,toString:function(){return e}}:e}n(32),n(33),t.toInvokeDefinition=function(e){return i.__assign(i.__assign({type:r.invoke},e),{toJSON:function(){e.onDone,e.onError;var t=i.__rest(e,["onDone","onError"]);return i.__assign(i.__assign({},t),{type:r.invoke,src:a(e.src)})}})},t.toInvokeSource=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(32);t.mapState=function(e,t){var n,a,o;try{for(var s=i.__values(Object.keys(e)),l=s.next();!l.done;l=s.next()){var c=l.value;r.matchesState(c,t)&&(!o||t.length>o.length)&&(o=c)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return e[o]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),r=n(42);t.matchState=function(e,t,n){var a,o,s=r.State.from(e,e instanceof r.State?e.context:void 0);try{for(var l=i.__values(t),c=l.next();!c.done;c=l.next()){var u=i.__read(c.value,2),d=u[0],p=u[1];if(s.matches(d))return p(s)}}catch(e){a={error:e}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}return n(s)}},function(e,t,n){"use strict";function i(e){return e}Object.defineProperty(t,"__esModule",{value:!0});var r=i;t.createSchema=i,t.t=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apS=t.apSW=t.bind=t.bindW=t.bindTo=t.exists=t.elem=t.toError=t.either=t.getValidationMonoid=t.MonadThrow=t.ChainRec=t.Extend=t.Alt=t.Bifunctor=t.Traversable=t.Foldable=t.Monad=t.Applicative=t.Functor=t.getValidationSemigroup=t.getValidation=t.getAltValidation=t.getApplicativeValidation=t.getWitherable=t.getFilterable=t.getApplyMonoid=t.getApplySemigroup=t.getSemigroup=t.getEq=t.getShow=t.URI=t.throwError=t.sequence=t.traverse=t.reduceRight=t.foldMap=t.reduce=t.duplicate=t.extend=t.alt=t.flatten=t.chainFirst=t.chainFirstW=t.chain=t.chainW=t.of=t.apSecond=t.apFirst=t.ap=t.apW=t.mapLeft=t.bimap=t.map=t.filterOrElse=t.orElse=t.swap=t.getOrElse=t.getOrElseW=t.fold=t.fromPredicate=t.fromOption=t.stringifyJSON=t.parseJSON=t.tryCatch=t.fromNullable=t.right=t.left=t.isRight=t.isLeft=void 0;var i=n(89),r=n(47);function a(e,n){try{return t.right(e())}catch(e){return t.left(n(e))}}t.isLeft=function(e){return"Left"===e._tag},t.isRight=function(e){return"Right"===e._tag},t.left=function(e){return{_tag:"Left",left:e}},t.right=function(e){return{_tag:"Right",right:e}},t.fromNullable=function(e){return function(n){return null==n?t.left(e):t.right(n)}},t.tryCatch=a,t.parseJSON=function(e,t){return a((function(){return JSON.parse(e)}),t)},t.stringifyJSON=function(e,t){return a((function(){return JSON.stringify(e)}),t)},t.fromOption=function(e){return function(n){return"None"===n._tag?t.left(e()):t.right(n.value)}},t.fromPredicate=function(e,n){return function(i){return e(i)?t.right(i):t.left(n(i))}},t.fold=function(e,n){return function(i){return t.isLeft(i)?e(i.left):n(i.right)}},t.getOrElseW=function(e){return function(n){return t.isLeft(n)?e(n.left):n.right}},t.getOrElse=t.getOrElseW,t.swap=function(e){return t.isLeft(e)?t.right(e.left):t.left(e.right)},t.orElse=function(e){return function(n){return t.isLeft(n)?e(n.left):n}},t.filterOrElse=function(e,n){return t.chain((function(i){return e(i)?t.right(i):t.left(n(i))}))};var o=function(e,n){return r.pipe(e,t.map(n))},s=function(e,n){return r.pipe(e,t.ap(n))},l=function(e,n){return r.pipe(e,t.chain(n))},c=function(e,n,i){return r.pipe(e,t.reduce(n,i))},u=function(e){return function(n,i){var a=t.foldMap(e);return r.pipe(n,a(i))}},d=function(e,n,i){return r.pipe(e,t.reduceRight(n,i))},p=function(e){var n=t.traverse(e);return function(e,t){return r.pipe(e,n(t))}},f=function(e,n,i){return r.pipe(e,t.bimap(n,i))},g=function(e,n){return r.pipe(e,t.mapLeft(n))},b=function(e,n){return r.pipe(e,t.alt(n))},h=function(e,n){return r.pipe(e,t.extend(n))},v=function(e,n){return i.tailRec(n(e),(function(e){return t.isLeft(e)?t.right(t.left(e.left)):t.isLeft(e.right)?t.left(n(e.right.left)):t.right(t.right(e.right.right))}))};function m(e){return{concat:function(n,i){return t.isLeft(n)?n:t.isLeft(i)?i:t.right(e.concat(n.right,i.right))}}}function y(e){var n=t.left(e.empty);return{URI:t.URI,_E:void 0,map:o,compact:function(e){return t.isLeft(e)?e:"None"===e.right._tag?n:t.right(e.right.value)},separate:function(e){return t.isLeft(e)?{left:e,right:e}:t.isLeft(e.right)?{left:t.right(e.right.left),right:n}:{left:n,right:t.right(e.right.right)}},filter:function(e,i){return t.isLeft(e)||i(e.right)?e:n},filterMap:function(e,i){if(t.isLeft(e))return e;var r=i(e.right);return"None"===r._tag?n:t.right(r.value)},partition:function(e,i){return t.isLeft(e)?{left:e,right:e}:i(e.right)?{left:n,right:t.right(e.right)}:{left:t.right(e.right),right:n}},partitionMap:function(e,i){if(t.isLeft(e))return{left:e,right:e};var r=i(e.right);return t.isLeft(r)?{left:t.right(r.left),right:n}:{left:n,right:t.right(r.right)}}}}function j(e){return{URI:t.URI,_E:void 0,map:o,ap:function(n,i){return t.isLeft(n)?t.isLeft(i)?t.left(e.concat(n.left,i.left)):n:t.isLeft(i)?i:t.right(n.right(i.right))},of:t.of}}function x(e){return{URI:t.URI,_E:void 0,map:o,alt:function(n,i){if(t.isRight(n))return n;var r=i();return t.isLeft(r)?t.left(e.concat(n.left,r.left)):r}}}function O(e,n){return{concat:function(i,r){return t.isLeft(i)?t.isLeft(r)?t.left(e.concat(i.left,r.left)):i:t.isLeft(r)?r:t.right(n.concat(i.right,r.right))}}}t.map=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n.right))}},t.bimap=function(e,n){return function(i){return t.isLeft(i)?t.left(e(i.left)):t.right(n(i.right))}},t.mapLeft=function(e){return function(n){return t.isLeft(n)?t.left(e(n.left)):n}},t.apW=function(e){return function(n){return t.isLeft(n)?n:t.isLeft(e)?e:t.right(n.right(e.right))}},t.ap=t.apW,t.apFirst=function(e){return r.flow(t.map((function(e){return function(){return e}})),t.ap(e))},t.apSecond=function(e){return r.flow(t.map((function(){return function(e){return e}})),t.ap(e))},t.of=t.right,t.chainW=function(e){return function(n){return t.isLeft(n)?n:e(n.right)}},t.chain=t.chainW,t.chainFirstW=function(e){return function(n){return r.pipe(n,t.chainW((function(n){return r.pipe(e(n),t.map((function(){return n})))})))}},t.chainFirst=t.chainFirstW,t.flatten=t.chain(r.identity),t.alt=function(e){return function(n){return t.isLeft(n)?e():n}},t.extend=function(e){return function(n){return t.isLeft(n)?n:t.right(e(n))}},t.duplicate=t.extend(r.identity),t.reduce=function(e,n){return function(i){return t.isLeft(i)?e:n(e,i.right)}},t.foldMap=function(e){return function(n){return function(i){return t.isLeft(i)?e.empty:n(i.right)}}},t.reduceRight=function(e,n){return function(i){return t.isLeft(i)?e:n(i.right,e)}},t.traverse=function(e){return function(n){return function(i){return t.isLeft(i)?e.of(t.left(i.left)):e.map(n(i.right),t.right)}}},t.sequence=function(e){return function(n){return t.isLeft(n)?e.of(t.left(n.left)):e.map(n.right,t.right)}},t.throwError=t.left,t.URI="Either",t.getShow=function(e,n){return{show:function(i){return t.isLeft(i)?"left("+e.show(i.left)+")":"right("+n.show(i.right)+")"}}},t.getEq=function(e,n){return{equals:function(i,r){return i===r||(t.isLeft(i)?t.isLeft(r)&&e.equals(i.left,r.left):t.isRight(r)&&n.equals(i.right,r.right))}}},t.getSemigroup=function(e){return{concat:function(n,i){return t.isLeft(i)?n:t.isLeft(n)?i:t.right(e.concat(n.right,i.right))}}},t.getApplySemigroup=m,t.getApplyMonoid=function(e){return{concat:m(e).concat,empty:t.right(e.empty)}},t.getFilterable=y,t.getWitherable=function(e){var n=y(e);return{URI:t.URI,_E:void 0,map:o,compact:n.compact,separate:n.separate,filter:n.filter,filterMap:n.filterMap,partition:n.partition,partitionMap:n.partitionMap,traverse:p,sequence:t.sequence,reduce:c,foldMap:u,reduceRight:d,wither:function(e){var t=p(e);return function(i,r){return e.map(t(i,r),n.compact)}},wilt:function(e){var t=p(e);return function(i,r){return e.map(t(i,r),n.separate)}}}},t.getApplicativeValidation=j,t.getAltValidation=x,t.getValidation=function(e){var n=j(e),i=x(e);return{URI:t.URI,_E:void 0,map:o,of:t.of,chain:l,bimap:f,mapLeft:g,reduce:c,foldMap:u,reduceRight:d,extend:h,traverse:p,sequence:t.sequence,chainRec:v,throwError:t.throwError,ap:n.ap,alt:i.alt}},t.getValidationSemigroup=O,t.Functor={URI:t.URI,map:o},t.Applicative={URI:t.URI,map:o,ap:s,of:t.of},t.Monad={URI:t.URI,map:o,ap:s,of:t.of,chain:l},t.Foldable={URI:t.URI,reduce:c,foldMap:u,reduceRight:d},t.Traversable={URI:t.URI,map:o,reduce:c,foldMap:u,reduceRight:d,traverse:p,sequence:t.sequence},t.Bifunctor={URI:t.URI,bimap:f,mapLeft:g},t.Alt={URI:t.URI,map:o,alt:b},t.Extend={URI:t.URI,map:o,extend:h},t.ChainRec={URI:t.URI,map:o,ap:s,chain:l,chainRec:v},t.MonadThrow={URI:t.URI,map:o,ap:s,of:t.of,chain:l,throwError:t.throwError},t.getValidationMonoid=function(e,n){return{concat:O(e,n).concat,empty:t.right(n.empty)}},t.either={URI:t.URI,map:o,of:t.of,ap:s,chain:l,reduce:c,foldMap:u,reduceRight:d,traverse:p,sequence:t.sequence,bimap:f,mapLeft:g,alt:b,extend:h,chainRec:v,throwError:t.throwError},t.toError=function(e){return e instanceof Error?e:new Error(String(e))},t.elem=function(e){return function(n,i){return!t.isLeft(i)&&e.equals(n,i.right)}},t.exists=function(e){return function(n){return!t.isLeft(n)&&e(n.right)}},t.bindTo=function(e){return t.map(r.bindTo_(e))},t.bindW=function(e,n){return t.chainW((function(i){return r.pipe(n(i),t.map((function(t){return r.bind_(i,e,t)})))}))},t.bind=t.bindW,t.apSW=function(e,n){return r.flow(t.map((function(t){return function(n){return r.bind_(t,e,n)}})),t.apW(n))},t.apS=t.apSW},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tailRec=void 0,t.tailRec=function(e,t){for(var n=t(e);"Left"===n._tag;)n=t(n.left);return n.right}},function(e,t,n){"use strict";var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.useMachine=void 0;var r=n(9),a=n(48),o=n(34),s=n(49),l=n(43);function c(e){return e}t.useMachine=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var u=i(t,1)[0],d=void 0===u?{}:u,p=(0,s.useIdleInterpreter)(e,d),f=(0,r.useCallback)((function(){return p.status===o.InterpreterStatus.NotStarted?d.state?o.State.create(d.state):p.machine.initialState:p.getSnapshot()}),[p]),g=(0,r.useCallback)((function(e,t){return(0,l.isInterpreterStateEqual)(p,e,t)}),[p]),b=(0,r.useCallback)((function(e){return p.subscribe(e).unsubscribe}),[p]),h=(0,a.useSyncExternalStoreWithSelector)(b,f,f,c,g);return(0,r.useEffect)((function(){var e=d.state;return p.start(e?o.State.create(e):void 0),function(){p.stop(),p.status=o.InterpreterStatus.NotStarted}}),[]),[h,p.send,p]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSpawn=void 0;var i=n(34),r=n(50);t.useSpawn=function(e){return(0,r.default)((function(){return(0,i.spawnBehavior)(e)}))}},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.createActorContext=void 0;var r=n(9),a=n(49),o=n(51),s=n(64);t.createActorContext=function(e,t,n){var l=r.createContext(null),c=l.Provider;function u(o){var s=o.children,l=o.machine,u=void 0===l?e:l,d=o.options,p=(0,a.useInterpret)(u,i(i({},t),d),n);return r.createElement(c,{value:p},s)}function d(){var e=r.useContext(l);if(!e)throw new Error('You used a hook from "'.concat(u.displayName,"\" but it's not inside a <").concat(u.displayName,"> component."));return e}return u.displayName="ActorProvider(".concat(e.id,")"),{Provider:u,useActorRef:d,useActor:function(){var e=d();return(0,o.useActor)(e)},useSelector:function(e,t){var n=d();return(0,s.useSelector)(n,e,t)}}}},function(e,t,n){"use strict";var i=Array.isArray,r=Object.keys,a=Object.prototype.hasOwnProperty,o="undefined"!=typeof Element;function s(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,l,c,u=i(e),d=i(t);if(u&&d){if((l=e.length)!=t.length)return!1;for(n=l;0!=n--;)if(!s(e[n],t[n]))return!1;return!0}if(u!=d)return!1;var p=e instanceof Date,f=t instanceof Date;if(p!=f)return!1;if(p&&f)return e.getTime()==t.getTime();var g=e instanceof RegExp,b=t instanceof RegExp;if(g!=b)return!1;if(g&&b)return e.toString()==t.toString();var h=r(e);if((l=h.length)!==r(t).length)return!1;for(n=l;0!=n--;)if(!a.call(t,h[n]))return!1;if(o&&e instanceof Element&&t instanceof Element)return e===t;for(n=l;0!=n--;)if(!("_owner"===(c=h[n])&&e.$$typeof||s(e[c],t[c])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return s(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r={};t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o=[],s=[],l=function(e){var t=i.createContext(r);o.push(t),s.push(function(e){return function(){var t=i.useContext(e);return t}}(t))};n.length?n.forEach((function(e){return l(e.name)})):l(e.name);var c=function(t){for(var r=t.children,a=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(t,["children"]),s=e(a),l=r,c=0;c<o.length;c+=1){var u=o[c],d=n[c]||function(e){return e};l=i.createElement(u.Provider,{value:d(s)},l)}return l};return[c].concat(s)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v}));var i=n(9),r=n.n(i),a=n(11),o=n(2),s=n(12),l=n(13),c=n(54),u=n.n(c),d=n(14),p=n(45),f=n(40),g=n(96),b=n(10);const h=s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.p.runTheCommandOnYourHostLabel",{defaultMessage:"Run the following command on your host to download and configure the collector."}),v=()=>{const{data:t,status:n,error:c}=Object(f.b)((e=>e("POST /internal/observability_onboarding/otel/api_key",{})),[]),{data:v}=Object(f.b)((e=>e("GET /internal/observability_onboarding/logs/setup/environment")),[]),{services:{share:y,http:j,context:{isServerless:x,stackVersion:O}}}=Object(l.useKibana)(),_=x?"snapshots.elastic.co/8.15.0-bc431a00/downloads/beats/elastic-agent":"artifacts.elastic.co/downloads/beats/elastic-agent",E=x?"8.15.0-SNAPSHOT":O,S=y.url.locators.get(o.a),w=y.url.locators.get("HOSTS_LOCATOR"),[{value:k},I]=u()((async()=>({logs:null==S?void 0:S.getRedirectUrl({type:"logs"}),metrics:null==w?void 0:w.getRedirectUrl({})})),[S]);Object(i.useEffect)((()=>{I()}),[I]);const C=[{id:"kubernetes",name:"Kubernetes",prompt:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(a.EuiText,null,Object(b.jsx)("p",null,s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.kubernetesApplyCommandPromptLabel",{defaultMessage:"From the directory where the manifest is downloaded, run the following command to install the collector on every node of your cluster:"}))),Object(b.jsx)(m,{content:`kubectl create secret generic elastic-secret-otel --from-literal=es_endpoint='${null==v?void 0:v.elasticsearchUrl}' --from-literal=es_api_key='${null==t?void 0:t.apiKeyEncoded}'\n\nkubectl apply -f otel-collector-k8s.yml`})),firstStepTitle:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.steps.downloadManifest",{defaultMessage:"Download the manifest:"}),content:`apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: elastic-otel-collector-agent\n  namespace: default\n  labels:\n    app.kubernetes.io/name: elastic-opentelemetry-collector\n    app.kubernetes.io/version: "${E}"\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: elastic-otel-collector-agent\n  labels:\n    app.kubernetes.io/name: elastic-opentelemetry-collector\n    app.kubernetes.io/version: "${E}"\nrules:\n  - apiGroups: [""]\n    resources: ["pods", "namespaces", "nodes"]\n    verbs: ["get", "watch", "list"]\n  - apiGroups: ["apps"]\n    resources: ["daemonsets", "deployments", "replicasets", "statefulsets"]\n    verbs: ["get", "list", "watch"]\n  - apiGroups: ["extensions"]\n    resources: ["daemonsets", "deployments", "replicasets"]\n    verbs: ["get", "list", "watch"]\n  - apiGroups: [ "" ]\n    resources: [ "nodes/stats" ]\n    verbs: [ "get", "watch", "list" ]\n  - apiGroups: [ "" ]\n    resources: [ "nodes/proxy" ]\n    verbs: [ "get" ]\n  - apiGroups: [ "" ]\n    resources: ["configmaps"]\n    verbs: ["get"]\n---\napiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRoleBinding\nmetadata:\n  name: elastic-otel-collector-agent\n  labels:\n    app.kubernetes.io/name: elastic-opentelemetry-collector\n    app.kubernetes.io/version: "${E}"\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: ClusterRole\n  name: elastic-otel-collector-agent\nsubjects:\n  - kind: ServiceAccount\n    name: elastic-otel-collector-agent\n    namespace: default\n---\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: elastic-otel-collector-agent\n  namespace: default\n  labels:\n    app.kubernetes.io/name: elastic-opentelemetry-collector\n    app.kubernetes.io/version: "${E}"\ndata:\n  otel.yaml: |\n    exporters:\n      debug:\n        verbosity: basic\n      elasticsearch:\n        endpoints: \n        - \${env:ES_ENDPOINT}\n        api_key: \${env:ES_API_KEY}\n        logs_dynamic_index:\n          enabled: true\n        mapping:\n          mode: ecs\n    processors:\n      elasticinframetrics:\n        add_system_metrics: true\n        add_k8s_metrics: true\n      resourcedetection/eks:\n        detectors: [env, eks]\n        timeout: 15s\n        override: true\n        eks:\n          resource_attributes:\n            k8s.cluster.name:\n              enabled: true\n      resourcedetection/gcp:\n        detectors: [env, gcp]\n        timeout: 2s\n        override: false\n      resource/k8s:\n        attributes:\n          - key: service.name\n            from_attribute: app.label.component\n            action: insert\n      attributes/k8s_logs_dataset:\n        actions:\n          - key: data_stream.dataset\n            value: "kubernetes.container_logs"\n            action: upsert\n      attributes/dataset:\n        actions:\n          - key: event.dataset\n            from_attribute: data_stream.dataset\n            action: upsert\n      resource/cloud:\n        attributes:\n          - key: cloud.instance.id\n            from_attribute: host.id\n            action: insert\n      resource/process:\n        attributes:\n          - key: process.executable.name\n            action: delete\n          - key: process.executable.path\n            action: delete\n      resourcedetection/system:\n        detectors: ["system", "ec2"]\n        system:\n          hostname_sources: [ "os" ]\n          resource_attributes:\n            host.name:\n              enabled: true\n            host.id:\n              enabled: false\n            host.arch:\n              enabled: true\n            host.ip:\n              enabled: true\n            host.mac:\n              enabled: true\n            host.cpu.vendor.id:\n              enabled: true\n            host.cpu.family:\n              enabled: true\n            host.cpu.model.id:\n              enabled: true\n            host.cpu.model.name:\n              enabled: true\n            host.cpu.stepping:\n              enabled: true\n            host.cpu.cache.l2.size:\n              enabled: true\n            os.description:\n              enabled: true\n            os.type:\n              enabled: true\n        ec2:\n          resource_attributes:\n            host.name:\n              enabled: false\n            host.id:\n              enabled: true\n      k8sattributes:\n        filter:\n          node_from_env_var: K8S_NODE_NAME\n        passthrough: false\n        pod_association:\n          - sources:\n              - from: resource_attribute\n                name: k8s.pod.ip\n          - sources:\n              - from: resource_attribute\n                name: k8s.pod.uid\n          - sources:\n              - from: connection\n        extract:\n          metadata:\n            - "k8s.namespace.name"\n            - "k8s.deployment.name"\n            - "k8s.statefulset.name"\n            - "k8s.daemonset.name"\n            - "k8s.cronjob.name"\n            - "k8s.job.name"\n            - "k8s.node.name"\n            - "k8s.pod.name"\n            - "k8s.pod.uid"\n            - "k8s.pod.start_time"\n          labels:\n            - tag_name: app.label.component\n              key: app.kubernetes.io/component\n              from: pod\n    extensions:\n      file_storage:\n        directory: /var/lib/otelcol\n    receivers:\n      filelog:\n        retry_on_failure:\n          enabled: true\n        start_at: end\n        exclude:\n        - /var/log/pods/default_elastic-otel-collector-agent*_*/elastic-opentelemetry-collector/*.log\n        include:\n        - /var/log/pods/*/*/*.log\n        include_file_name: false\n        include_file_path: true\n        storage: file_storage\n        operators:\n        - id: container-parser\n          type: container\n      hostmetrics:\n        collection_interval: 10s\n        root_path: /hostfs\n        scrapers:\n          cpu:\n            metrics:\n              system.cpu.utilization:\n                enabled: true\n              system.cpu.logical.count:\n                enabled: true\n          memory:\n            metrics:\n              system.memory.utilization:\n                enabled: true\n          process:\n            mute_process_exe_error: true\n            mute_process_io_error: true\n            mute_process_user_error: true\n            metrics:\n              process.threads:\n                enabled: true\n              process.open_file_descriptors:\n                enabled: true\n              process.memory.utilization:\n                enabled: true\n              process.disk.operations:\n                enabled: true\n          network:\n          processes:\n          load:\n          disk:\n          filesystem:\n            exclude_mount_points:\n              mount_points:\n                - /dev/*\n                - /proc/*\n                - /sys/*\n                - /run/k3s/containerd/*\n                - /var/lib/docker/*\n                - /var/lib/kubelet/*\n                - /snap/*\n              match_type: regexp\n            exclude_fs_types:\n              fs_types:\n                - autofs\n                - binfmt_misc\n                - bpf\n                - cgroup2\n                - configfs\n                - debugfs\n                - devpts\n                - devtmpfs\n                - fusectl\n                - hugetlbfs\n                - iso9660\n                - mqueue\n                - nsfs\n                - overlay\n                - proc\n                - procfs\n                - pstore\n                - rpc_pipefs\n                - securityfs\n                - selinuxfs\n                - squashfs\n                - sysfs\n                - tracefs\n              match_type: strict\n      kubeletstats:\n        auth_type: serviceAccount\n        collection_interval: 20s\n        endpoint: \${env:K8S_NODE_NAME}:10250\n        node: '\${env:K8S_NODE_NAME}'\n        # Required to work for all CSPs without an issue\n        insecure_skip_verify: true\n        k8s_api_config:\n          auth_type: serviceAccount\n        metrics:\n          k8s.pod.cpu.node.utilization:\n            enabled: true\n          k8s.container.cpu_limit_utilization:\n            enabled: true\n          k8s.pod.cpu_limit_utilization:\n            enabled: true\n          k8s.container.cpu_request_utilization:\n            enabled: true\n          k8s.container.memory_limit_utilization:\n            enabled: true\n          k8s.pod.memory_limit_utilization:\n            enabled: true\n          k8s.container.memory_request_utilization:\n            enabled: true\n          k8s.node.uptime:\n            enabled: true\n          k8s.node.cpu.usage:\n            enabled: true\n          k8s.pod.cpu.usage:\n            enabled: true\n        extra_metadata_labels:\n          - container.id\n\n    service:\n      extensions: [file_storage]\n      pipelines:\n        logs:\n          exporters:\n          - elasticsearch \n          - debug\n          processors:\n          - k8sattributes\n          - resourcedetection/system\n          - resourcedetection/eks\n          - resourcedetection/gcp\n          - resource/k8s\n          - resource/cloud\n          - attributes/k8s_logs_dataset\n          receivers:\n          - filelog\n        metrics:\n          exporters:\n          - debug\n          - elasticsearch\n          processors:\n          - k8sattributes\n          - elasticinframetrics\n          - resourcedetection/system\n          - resourcedetection/eks\n          - resourcedetection/gcp\n          - resource/k8s\n          - resource/cloud\n          - attributes/dataset\n          - resource/process\n          receivers:\n          - kubeletstats\n          - hostmetrics\n---\napiVersion: apps/v1\nkind: DaemonSet\nmetadata:\n  name: elastic-otel-collector-agent\n  namespace: default\n  labels:\n    app.kubernetes.io/name: elastic-opentelemetry-collector\n    app.kubernetes.io/version: "${E}"\nspec:\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: elastic-opentelemetry-collector\n      app.kubernetes.io/version: "${E}"\n  template:\n    metadata:\n      labels:\n        app.kubernetes.io/name: elastic-opentelemetry-collector\n        app.kubernetes.io/version: "${E}"\n    spec:\n      serviceAccountName: elastic-otel-collector-agent\n      securityContext:\n        runAsUser: 0\n        runAsGroup: 0\n      hostNetwork: true\n      dnsPolicy: ClusterFirstWithHostNet\n      containers:\n        - name: elastic-opentelemetry-collector\n          command: [/usr/share/elastic-agent/elastic-agent]\n          args: ["otel", "-c", "/etc/elastic-agent/otel.yaml"]\n          image: docker.elastic.co/beats/elastic-agent:${E}\n          imagePullPolicy: IfNotPresent\n          env:\n            - name: MY_POD_IP\n              valueFrom:\n                fieldRef:\n                  apiVersion: v1\n                  fieldPath: status.podIP\n            - name: K8S_NODE_NAME\n              valueFrom:\n                fieldRef:\n                  fieldPath: spec.nodeName\n            - name: ES_ENDPOINT\n              valueFrom:\n                secretKeyRef:\n                  key: es_endpoint\n                  name: elastic-secret-otel\n            - name: ES_API_KEY\n              valueFrom:\n                secretKeyRef:\n                  key: es_api_key\n                  name: elastic-secret-otel\n          volumeMounts:\n            - mountPath: /etc/elastic-agent/otel.yaml\n              name: opentelemetry-collector-configmap\n              readOnly: true\n              subPath: otel.yaml\n            - name: varlogpods\n              mountPath: /var/log/pods\n              readOnly: true\n            - name: varlibdockercontainers\n              mountPath: /var/lib/docker/containers\n              readOnly: true\n            - name: varlibotelcol\n              mountPath: /var/lib/otelcol\n            - name: hostfs\n              mountPath: /hostfs\n              readOnly: true\n              mountPropagation: HostToContainer\n\n      volumes:\n        - name: opentelemetry-collector-configmap\n          configMap:\n            name: elastic-otel-collector-agent\n            defaultMode: 0640\n        - name: varlogpods\n          hostPath:\n            path: /var/log/pods\n        - name: varlibdockercontainers\n          hostPath:\n            path: /var/lib/docker/containers\n        - name: varlibotelcol\n          hostPath:\n            path: /var/lib/otelcol\n            type: DirectoryOrCreate\n        - name: hostfs\n          hostPath:\n            path: /`,type:"download",fileName:"otel-collector-k8s.yml"},{id:"linux",name:"Linux",firstStepTitle:h,content:`arch=$(if ([[ $(arch) == "arm" || $(arch) == "aarch64" ]]); then echo "arm64"; else echo $(arch); fi)\n\ncurl --output elastic-distro-${E}-linux-$arch.tar.gz --url https://${_}/elastic-agent-${E}-linux-$arch.tar.gz --proto '=https' --tlsv1.2 -fOL && mkdir -p elastic-distro-${E}-linux-$arch && tar -xvf elastic-distro-${E}-linux-$arch.tar.gz -C "elastic-distro-${E}-linux-$arch" --strip-components=1 && cd elastic-distro-${E}-linux-$arch \n\nsudo setcap 'cap_dac_read_search=ep' ./data/elastic-agent-*/elastic-agent\n        \nrm ./otel.yml && cp ./otel_samples/platformlogs_hostmetrics.yml ./otel.yml && mkdir -p ./data/otelcol && sed -i 's#\\\${env:STORAGE_DIR}#'"$PWD"/data/otelcol'#g' ./otel.yml && sed -i 's#\\\${env:ELASTIC_ENDPOINT}#${null==v?void 0:v.elasticsearchUrl}#g' ./otel.yml && sed -i 's/\\\${env:ELASTIC_API_KEY}/${null==t?void 0:t.apiKeyEncoded}/g' ./otel.yml`,start:"./otelcol --config otel.yml",type:"copy"},{id:"mac",name:"Mac",firstStepTitle:h,content:`arch=$(if [[ $(arch) == "arm64" ]]; then echo "aarch64"; else echo $(arch); fi)\n\ncurl --output elastic-distro-${E}-darwin-$arch.tar.gz --url https://${_}/elastic-agent-${E}-darwin-$arch.tar.gz --proto '=https' --tlsv1.2 -fOL && mkdir -p "elastic-distro-${E}-darwin-$arch" && tar -xvf elastic-distro-${E}-darwin-$arch.tar.gz -C "elastic-distro-${E}-darwin-$arch" --strip-components=1 && cd elastic-distro-${E}-darwin-$arch \n      \nrm ./otel.yml && cp ./otel_samples/platformlogs_hostmetrics.yml ./otel.yml && mkdir -p ./data/otelcol  && sed -i '' 's#\\\${env:STORAGE_DIR}#'"$PWD"/data/otelcol'#g' ./otel.yml && sed -i '' 's#\\\${env:ELASTIC_ENDPOINT}#${null==v?void 0:v.elasticsearchUrl}#g' ./otel.yml && sed -i '' 's/\\\${env:ELASTIC_API_KEY}/${null==t?void 0:t.apiKeyEncoded}/g' ./otel.yml`,start:"./otelcol --config otel.yml",type:"copy"}],[A,T]=r.a.useState(C[0].id),P=C.find((e=>e.id===A));return Object(b.jsx)(a.EuiPanel,{hasBorder:!0},Object(b.jsx)(a.EuiModalHeader,null,Object(b.jsx)(a.EuiModalHeaderTitle,null,Object(b.jsx)(a.EuiFlexGroup,{gutterSize:"l",alignItems:"flexStart"},j&&Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiPanel,{paddingSize:"s"},Object(b.jsx)(a.EuiIcon,{type:null==j?void 0:j.staticAssets.getPluginAssetHref("opentelemetry.svg"),size:"xxl"}))),Object(b.jsx)(a.EuiFlexItem,{grow:!0},Object(b.jsx)(a.EuiFlexGroup,{gutterSize:"m",direction:"column"},Object(b.jsx)(a.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(b.jsx)(a.EuiFlexItem,{grow:!1},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.otelLogsModalHeaderTitleLabel",{defaultMessage:"OpenTelemetry"})),Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiBetaBadge,{label:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.techPreviewBadge.label",{defaultMessage:"Technical preview"}),size:"m",color:"hollow",tooltipContent:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.techPreviewBadge.tooltip",{defaultMessage:"This functionality is in technical preview and may be changed or removed completely in a future release. Elastic will work to fix any issues, but features in technical preview are not subject to the support SLA of official GA features."}),tooltipPosition:"right"}))),Object(b.jsx)(a.EuiText,{size:"s",color:"subdued"},Object(b.jsx)("p",null,s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.p.collectLogsWithOpenTelemetryLabel",{defaultMessage:"Collect logs and host metrics using the Elastic distribution of the OTel collector."})))))))),Object(b.jsx)(a.EuiModalBody,null,Object(b.jsx)(a.EuiFlexGroup,{direction:"column",gutterSize:"none"},Object(b.jsx)(g.a,null),c&&Object(b.jsx)(a.EuiFlexItem,null,Object(b.jsx)(p.a,{status:n,payload:t,error:c})),Object(b.jsx)(a.EuiSteps,{steps:[{title:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.steps.platform",{defaultMessage:"Select your platform"}),children:Object(b.jsx)(a.EuiFlexGroup,{direction:"column"},Object(b.jsx)(a.EuiButtonGroup,{legend:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.choosePlatform",{defaultMessage:"Choose platform"}),options:C.map((({id:e,name:t})=>({id:e,label:t}))),type:"single",idSelected:A,onChange:e=>{T(e)}}),Object(b.jsx)(a.EuiText,null,Object(b.jsx)("p",null,P.firstStepTitle)),Object(b.jsx)(a.EuiFlexItem,null,Object(b.jsx)(a.EuiCodeBlock,{language:"sh",isCopyable:!0,overflowHeight:300},P.content)),Object(b.jsx)(a.EuiFlexItem,{align:"left"},Object(b.jsx)(a.EuiFlexGroup,null,"download"===P.type?Object(b.jsx)(a.EuiButton,{iconType:"download",color:"primary",href:`data:application/yaml;base64,${e.from(P.content,"utf8").toString("base64")}`,download:P.fileName,target:"_blank","data-test-subj":"obltOnboardingOtelDownloadConfig"},s.i18n.translate("xpack.observability_onboarding.installOtelCollector.configStep.downloadConfigButton",{defaultMessage:"Download manifest"})):Object(b.jsx)(a.EuiCopy,{textToCopy:P.content},(e=>Object(b.jsx)(a.EuiButton,{"data-test-subj":"observabilityOnboardingOtelLogsPanelButton",iconType:"copyClipboard",onClick:e},s.i18n.translate("xpack.observability_onboarding.installOtelCollector.configStep.copyCommand",{defaultMessage:"Copy to clipboard"})))))))},{title:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.steps.start",{defaultMessage:"Start the collector"}),children:Object(b.jsx)(a.EuiFlexGroup,{direction:"column"},Object(b.jsx)(a.EuiCallOut,{title:s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.limitationTitle",{defaultMessage:"Configuration Information"}),color:"warning",iconType:"iInCircle"},Object(b.jsx)("p",null,s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.historicalDataDescription",{defaultMessage:"New log messages are collected from the setup onward."})),"kubernetes"!==A&&Object(b.jsx)("p",null,s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.historicalDataDescription2",{defaultMessage:"The default log path is /var/log/*. You can change this path in the otel.yml file if needed."}))),P.prompt,P.start&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(a.EuiText,null,Object(b.jsx)("p",null,s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.p.startTheCollectorLabel",{defaultMessage:"Run the following command to start the collector"}))),Object(b.jsx)(m,{content:P.start})))},{title:"Visualize your data",children:Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(a.EuiText,null,Object(b.jsx)("p",null,s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.waitForTheDataLabel",{defaultMessage:"After running the previous command, come back and view your data."}))),Object(b.jsx)(a.EuiSpacer,null),Object(b.jsx)(a.EuiFlexGroup,null,Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiImage,{src:null==j?void 0:j.staticAssets.getPluginAssetHref("waterfall_screen.svg"),width:160,alt:"Illustration",hasShadow:!0})),Object(b.jsx)(a.EuiFlexItem,{grow:!0},Object(b.jsx)(a.EuiFlexGroup,{direction:"column",gutterSize:"xs"},(null==k?void 0:k.logs)&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiText,{size:"s"},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.viewAndAnalyzeYourTextLabel",{defaultMessage:"View and analyze your logs"}))),Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiLink,{"data-test-subj":"obltOnboardingExploreLogs",href:k.logs},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.exploreLogs",{defaultMessage:"Open Logs Explorer"})))),Object(b.jsx)(a.EuiSpacer,{size:"s"}),(null==k?void 0:k.metrics)&&Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiText,{size:"s"},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.viewAndAnalyzeYourMetricsTextLabel",{defaultMessage:"View and analyze your metrics"}))),Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiLink,{"data-test-subj":"obltOnboardingExploreMetrics",href:k.metrics},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.exploreMetrics",{defaultMessage:"Open Hosts"}))))))),Object(b.jsx)(a.EuiSpacer,null),Object(b.jsx)(a.EuiText,{size:"xs",color:"subdued"},Object(b.jsx)(d.FormattedMessage,{id:"xpack.observability_onboarding.otelLogsPanel.troubleshooting",defaultMessage:"Find more details and troubleshooting solution in our documentation. {link}",values:{link:Object(b.jsx)(a.EuiLink,{"data-test-subj":"observabilityOnboardingOtelLogsPanelDocumentationLink",href:"https://ela.st/elastic-otel",target:"_blank",external:!0},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.documentationLink",{defaultMessage:"Open documentation"}))}})))}]}),Object(b.jsx)(a.EuiHorizontalRule,null),Object(b.jsx)(a.EuiFlexGroup,{responsive:!1,direction:"row",alignItems:"center",gutterSize:"s",wrap:!0},Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiText,{color:"subdued",size:"s"},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.feedbackButtons.label",{defaultMessage:"Was this helpful or were there any problems?"}))),Object(b.jsx)(a.EuiFlexItem,{grow:!1},Object(b.jsx)(a.EuiButton,{iconType:"editorComment","data-test-subj":"observabilityOnboardingOtelLogsPanelGiveFeedbackButton",href:"https://ela.st/otelcollector",color:"warning",target:"_blank"},s.i18n.translate("xpack.observability_onboarding.otelLogsPanel.feedbackButtons.title",{defaultMessage:"Give feedback"})))))))};function m({content:e}){return Object(b.jsx)(r.a.Fragment,null,Object(b.jsx)(a.EuiCodeBlock,{language:"yaml"},e),Object(b.jsx)(a.EuiCopy,{textToCopy:e},(e=>Object(b.jsx)(a.EuiButton,{"data-test-subj":"observabilityOnboardingCopyableCodeBlockCopyToClipboardButton",iconType:"copyClipboard",onClick:e},s.i18n.translate("xpack.observability_onboarding.installOtelCollector.configStep.copyCommand",{defaultMessage:"Copy to clipboard"})))))}}).call(this,n(56).Buffer)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n(11),r=n(12),a=n(9),o=n(66),s=n(10);function l(){const[e,t]=Object(a.useState)(),n=Object(a.useCallback)((e=>{t(e)}),[]),{performRequest:l,requestState:c}=Object(o.a)({onIntegrationCreationFailure:n,packages:["system","kubernetes"]});return Object(a.useEffect)((()=>{l()}),[l]),"rejected"===c.state?Object(s.jsx)(i.EuiFlexItem,null,Object(s.jsx)(i.EuiCallOut,{title:r.i18n.translate("xpack.observability_onboarding.otelLogs.status.failed",{defaultMessage:"Integration installation failed"}),color:"warning",iconType:"warning","data-test-subj":"obltOnboardingOtelLogsIntegrationInstallationFailed"},Object(s.jsx)(i.EuiFlexGroup,{direction:"column"},Object(s.jsx)(i.EuiFlexItem,null,r.i18n.translate("xpack.observability_onboarding.otelLogs.status.failedDetails",{defaultMessage:"Incoming data might not be indexed correctly. Details:"})),Object(s.jsx)(i.EuiCodeBlock,null,null==e?void 0:e.message)))):null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9);t.default=function(e,t){var n=i.useRef((function(){}));i.useEffect((function(){n.current=e})),i.useEffect((function(){if(null!==t){var e=setInterval((function(){return n.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"onBoardingTitle",(function(){return oi})),n.d(t,"breadcrumbsApp",(function(){return si})),n.d(t,"ObservabilityOnboardingAppRoot",(function(){return li})),n.d(t,"renderApp",(function(){return ci}));var i=n(11),r=n(4),a=n(12),o=n(13),s=n(31),l=n.n(s),c=n(9),u=n.n(c),d=n(21),p=n(52),f=n(39),g=n.n(f),b=n(22),h=n.n(b);const v="eui-global",m="eui-utilities",y=e=>e.darkMode?i.COLOR_MODES_STANDARD.dark:i.COLOR_MODES_STANDARD.light,j={darkMode:!1};var x=n(10);const O=[i.euiStylisPrefixer],_=h()({key:"css",stylisPlugins:O,container:document.querySelector('meta[name="emotion"]')}),E=h()({key:v,stylisPlugins:O,container:document.querySelector(`meta[name="${v}"]`)}),S=h()({key:m,stylisPlugins:O,container:document.querySelector(`meta[name="${m}"]`)});_.compat=!0,E.compat=!0,S.compat=!0;const w={default:_,global:E,utility:S},k=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:r,children:a})=>{const o=g()(e,j),s=Object(c.useMemo)((()=>y(o)),[o]),l=n||s,u=!1!==t&&void 0;return Object(x.jsx)(i.EuiProvider,{cache:w,modify:r,colorMode:l,globalStyles:u,utilityClasses:u},a)},I=({children:e,i18n:t,...n})=>Object(d.useIsNestedEuiProvider)()?(Object(p.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(x.jsx)(t.Context,null,e)):Object(x.jsx)(k,n,Object(x.jsx)(t.Context,null,e));var C=n(23);const A=({children:e,...t})=>Object(x.jsx)(I,l()({globalStyles:!1},t),Object(x.jsx)(C.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(x.jsx)(C.KibanaErrorBoundary,null,e))),T=({theme:{theme$:e},euiTheme:t,children:n,...r})=>{const a=g()(e,j),o=Object(c.useMemo)((()=>y(a)),[a]);return Object(x.jsx)(i.EuiThemeProvider,l()({colorMode:o,theme:t},r),n)},P=({theme:e,children:t,...n})=>Object(d.useIsNestedEuiProvider)()?Object(x.jsx)(T,l()({theme:e},n),t):(Object(p.emitEuiProviderWarning)("KibanaThemeProvider requires a parent KibanaRenderContextProvider.  Check your React tree and ensure that they are wrapped in a KibanaRenderContextProvider."),Object(x.jsx)(k,{theme:e,globalStyles:!1},t)),M=u.a.createContext(null),L=({children:e,...t})=>{const{navigateToUrl:n,currentAppId:i}=t;return Object(x.jsx)(M.Provider,{value:{navigateToUrl:n,currentAppId:i}},e)},F=({children:e,coreStart:t})=>{const{navigateToUrl:n,currentAppId$:i}=t.application,r=g()(i,void 0);return Object(x.jsx)(M.Provider,{value:{navigateToUrl:n,currentAppId:r}},e)},N={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},R=({children:e,navigateToUrl:t,currentAppId:n,...i})=>{const r=Object(c.useRef)(null),a=Object(c.useCallback)((e=>(({event:e,container:t,navigateToUrl:n,currentAppId:i})=>{if(!t||!i)return;const r=((e,t)=>{let n=e;do{var i,r;if("a"===(null===(i=n)||void 0===i?void 0:i.tagName.toLowerCase()))return n;const e=null===(r=n)||void 0===r?void 0:r.parentElement;if(!e||e===document.body||e===t)break;n=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!r)return;const a=r.href,o=""===r.target||"_self"===r.target,s=0===e.button;a&&o&&s&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),n(r.href))})({event:e,currentAppId:n,navigateToUrl:t,container:r.current})),[n,t]);return Object(x.jsx)("div",l()({onClick:a,ref:r,css:N,"data-test-subj":"kbnRedirectAppLink"},i),e)},D=({children:e,...t})=>Object(x.jsx)(R,l()({},function(){const e=Object(c.useContext)(M);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),z=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:n,...i}=t,r=Object(x.jsx)(D,i,e);return Object(x.jsx)(F,{coreStart:n},r)}const{navigateToUrl:n,currentAppId:i,...r}=t,a=Object(x.jsx)(D,r,e);return Object(x.jsx)(L,{currentAppId:i,navigateToUrl:n},a)};var U=n(19),$=n(16),B=n(17);const G=({children:e,...t})=>Object(x.jsx)($.Router,t,Object(x.jsx)(B.CompatRouter,null,e));var V=n(24),W=n.n(V),K=n(3),q=n(25);function H(){return""===Object($.useLocation)().pathname.replace(/\/$/,"")?Object(x.jsx)(u.a.Fragment,null):Object(x.jsx)(i.EuiButton,{"data-test-subj":"observabilityOnboardingPageGiveFeedback",href:q.LOGS_ONBOARDING_FEEDBACK_LINK,size:"s",target:"_blank",color:"warning",iconType:"editorComment"},a.i18n.translate("xpack.observability_onboarding.header.feedback",{defaultMessage:"Give feedback"}))}var Y=n(26),J=n(18);const X={services:{}},Q=Object(c.createContext)(X);var Z=n(74),ee=n.n(Z);const te=({children:e,component:t,render:n,...i})=>{const r=Object(c.useMemo)((()=>{if(t)return e=>Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(ne,null),Object(x.jsx)(t,e))}),[t]);if(r)return Object(x.jsx)($.Route,l()({},i,{component:r}));if(n||"function"==typeof e){const t="function"==typeof e?e:n;return Object(x.jsx)($.Route,l()({},i,{render:e=>Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(ne,null),t(e))}))}return Object(x.jsx)($.Route,i,Object(x.jsx)(ne,null),e)},ne=()=>{const{executionContext:e}=Object(c.useContext)(Q).services,t=Object($.useRouteMatch)();return function(e,t){ee()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},ie=({legacySwitch:e=!0,children:t})=>{const n=Object($.useRouteMatch)();return e?Object(x.jsx)($.Switch,null,t):Object(x.jsx)(B.Routes,null,c.Children.map(t,(e=>{if(u.a.isValidElement(e)&&e.type===te){var i;const r=Object(J.replace)(null==e?void 0:e.props.path,n.url+"/",""),a="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(x.jsx)(B.Route,{path:r,element:Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(ne,null),(null==e||null===(i=e.props)||void 0===i?void 0:i.component)&&Object(x.jsx)(e.props.component,null)||a&&a()||t)})}return e})))};var re=n(68),ae=n.n(re),oe=n(69),se=n.n(oe),le=n(70),ce=n.n(le),ue=n(71),de=n.n(ue),pe=n(72),fe=n.n(pe);const ge=()=>{const{services:{docLinks:e,chrome:t}}=Object(o.useKibana)(),n=g()(t.getHelpSupportUrl$()),r=[{iconUrl:ce.a,title:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.demoEnvironmentFlexItemLabel",{defaultMessage:"Demo environment"}),description:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.demoEnvironmentFlexItemDescription",{defaultMessage:"Explore our live demo environment"}),linkLabel:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.demoEnvironmentFlexItemLinkLabel",{defaultMessage:"Explore demo"}),link:"https://ela.st/demo"},{iconUrl:fe.a,title:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.exploreForumFlexItemLabel",{defaultMessage:"Explore forum"}),description:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.exploreForumFlexItemDescription",{defaultMessage:"Exchange thoughts about Elastic"}),linkLabel:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.exploreForumFlexItemLinkLabel",{defaultMessage:"Discuss forum"}),link:"https://discuss.elastic.co/"},{iconUrl:de.a,title:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.browseDocumentationFlexItemLabel",{defaultMessage:"Browse documentation"}),description:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.browseDocumentationFlexItemDescription",{defaultMessage:"In-depth guides on all Elastic features"}),linkLabel:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.browseDocumentationFlexItemLinkLabel",{defaultMessage:"Learn more"}),link:e.links.observability.guide},{iconUrl:se.a,title:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.supportHubFlexItemLabel",{defaultMessage:"Support Hub"}),description:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.supportHubFlexItemDescription",{defaultMessage:"Get help by opening a case"}),linkLabel:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.supportHubFlexItemLinkLabel",{defaultMessage:"Open Support Hub"}),link:n}];return Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"xl",justifyContent:"center",alignItems:"center"},r.map(((e,t)=>Object(x.jsx)(i.EuiFlexItem,{key:t,grow:!1},Object(x.jsx)(i.EuiAvatar,{size:"l",name:"",imageUrl:e.iconUrl,color:"subdued"}),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiText,{size:"s"},Object(x.jsx)("strong",null,e.title)),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiText,{size:"xs"},Object(x.jsx)("p",null,e.description)),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiText,{size:"xs"},Object(x.jsx)("p",null,Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityOnboardingFooterLearnMoreLink",href:e.link,target:"_blank",external:!0},e.linkLabel)))))))};var be=n(14),he=n(73),ve=n.n(he);const me=Object(c.lazy)((async()=>({default:await Promise.resolve().then(n.t.bind(null,29,7)).then((e=>e.PackageList())).then((e=>e.PackageListGrid))}))),ye=["system-logs-virtual"],je=e=>({...e,isQuickstart:ye.includes(e.name)});function xe(e,t){const n=encodeURIComponent(t);return e.indexOf("?")>=0?`${e}&observabilityOnboardingLink=${n}`:`${e}?observabilityOnboardingLink=${n}`}function Oe(e,t){const n={};return e.forEach((e=>{null!=t&&t.includes(e.name)&&(n[e.name]=e)})),n}function _e(e,t,n,i,r,a=!1){const s=function(e){var t;const n=null===(t=Object(o.useKibana)().services.http)||void 0===t?void 0:t.basePath.get(),i=Object(c.useMemo)((()=>function({basePath:e,category:t,search:n}){if("string"!=typeof e&&!e)return null;const i=`${e}/app/observabilityOnboarding`;if(!t&&!n)return i;const r=new URLSearchParams;return t&&r.append("category",t),n&&r.append("search",n),`${i}?${r.toString()}`}({basePath:n,...e})),[n,e]);return e=>({...e,url:e.url.indexOf("/app/integrations")>=0&&i?xe(e.url,i):e.url})}({category:i,search:r}),{featuredCards:l,integrationCards:u}=function(e,t,n,i){return Object(c.useMemo)((()=>{const r=t.filter((e=>e.categories.some((e=>n.includes(e))))).map(e).map(je);return i?{featuredCards:Oe(t,i.filter((e=>"featured"===e.type)).map((e=>e.name))),integrationCards:r}:{featuredCards:{},integrationCards:r}}),[t,i,n,e])}(s,e,t,n);if(n&&n.length>0){const e=function(e,t,n){const i=[];for(const r of t)"featured"===r.type&&n[r.name]?i.push(je(e(n[r.name]))):"virtual"===r.type&&i.push(je(e(r)));return i}(s,n,l);return a?[...e,...u]:e}return u}function Ee(){const{euiTheme:e}=Object(i.useEuiTheme)();return{margin:`calc(${e.size.xxl} / 2)`}}const Se=()=>Object(x.jsx)(i.EuiSkeletonText,{isLoading:!0,lines:10});var we={name:"xvginl",styles:"max-width:600px"};const ke=({selectedCategory:e=["observability","os_system"],useAvailablePackages:t,showSearchBar:n=!1,packageListRef:r,searchQuery:a,setSearchQuery:o,customCards:s,flowCategory:l,flowSearch:u,joinCardLists:d=!1,onLoaded:p})=>{const f=Ee(),{filteredCards:g,isLoading:b}=t({prereleaseIntegrationsEnabled:!1}),h=_e(g,e,s,l,u,d);if(Object(c.useEffect)((()=>{b||void 0===p||p()}),[b,p]),b)return Object(x.jsx)(Se,null);const v=n&&!!a||!1===n;return Object(x.jsx)(c.Suspense,{fallback:Object(x.jsx)(Se,null)},Object(x.jsx)("div",{css:f,ref:r},n&&Object(x.jsx)("div",{css:we},Object(x.jsx)(i.EuiSearchBar,{box:{incremental:!0},onChange:({queryText:e,error:t})=>{t||null==o||o(e)},query:null!=a?a:""})),v&&Object(x.jsx)(me,{list:h,searchTerm:null!=a?a:"",showControls:!1,showSearchTools:!1,selectedCategory:"",setSearchTerm:()=>{},setCategory:()=>{},categories:[],setUrlandReplaceHistory:()=>{},setUrlandPushHistory:()=>{},showCardLabels:!1})))},Ie=u.a.forwardRef(((e,t)=>{const r=Object(c.useRef)(null),{error:o,retry:s,loading:u}=ve()((async()=>{r.current=await Promise.resolve().then(n.t.bind(null,29,7)).then((e=>e.AvailablePackagesHook())).then((e=>e.useAvailablePackages))}));return o?Object(x.jsx)(i.EuiCallOut,{title:a.i18n.translate("xpack.observability_onboarding.asyncLoadFailureCallout.title",{defaultMessage:"Loading failure"}),color:"warning",iconType:"cross",size:"m"},Object(x.jsx)("p",null,Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.asyncLoadFailureCallout.copy",defaultMessage:"Some required elements failed to load."})),Object(x.jsx)(i.EuiButton,{color:"warning","data-test-subj":"xpack.observability_onboarding.asyncLoadFailureCallout.button",onClick:()=>{u||s()}},Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.asyncLoadFailureCallout.buttonContent",defaultMessage:"Retry"}))):u||null===r.current?Object(x.jsx)(Se,null):Object(x.jsx)(ke,l()({},e,{useAvailablePackages:r.current,packageListRef:t}))}));function Ce(e){return{type:"featured",name:e}}var Ae={name:"1efi8gv",styles:"font-weight:bold"};const Te=()=>{var e;const t=[{id:"logs",label:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.euiCheckableCard.collectAndAnalyzeMyLabel",{defaultMessage:"Collect and analyze logs"}),description:a.i18n.translate("xpack.observability_onboarding.onboardingFlowForm.detectPatternsAndOutliersLabel",{defaultMessage:"Detect patterns, gain insights from logs, get alerted when surpassing error thresholds"}),logos:["azure","aws","nginx","gcp"],showIntegrationsBadge:!0},{id:"apm",label:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.euiCheckableCard.monitorMyApplicationPerformanceLabel",{defaultMessage:"Monitor my application performance"}),description:a.i18n.translate("xpack.observability_onboarding.onboardingFlowForm.captureAndAnalyzeDistributedLabel",{defaultMessage:"Catch application problems, get alerted on performance issues or SLO breaches, expedite root cause analysis and remediation"}),logos:["opentelemetry","java","javascript","dotnet"]},{id:"infra",label:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.euiCheckableCard.monitorMyInfrastructureLabel",{defaultMessage:"Monitor infrastructure"}),description:a.i18n.translate("xpack.observability_onboarding.onboardingFlowForm.builtOnPowerfulElasticsearchLabel",{defaultMessage:"Check my systemâ€™s health, get alerted on performance issues or SLO breaches, expedite root cause analysis and remediation"}),logos:["kubernetes","prometheus","docker","opentelemetry"],showIntegrationsBadge:!0}],n=Ee(),r=Object(i.useGeneratedHtmlId)({prefix:"onboardingCategory"}),[s,l]=Object(B.useSearchParams)(),d=Object(c.useRef)(null),p=Object(c.useRef)(null),[f,g]=Object(c.useState)(null!==(e=s.get("search"))&&void 0!==e?e:""),{euiTheme:b}=Object(i.useEuiTheme)();Object(c.useEffect)((()=>{var e;const t=null!==(e=s.get("search"))&&void 0!==e?e:"";if(f===t)return;const n=Object.fromEntries(s.entries());f?n.search=f:delete n.search,l(n,{replace:!0})}),[f,s,l]);const h=function(e,t){var n,i,r,a,s,l;const c=Object($.useHistory)(),u=Object(B.useLocation)(),{services:{application:d,http:p,context:{isServerless:f}}}=Object(o.useKibana)(),g=null==d?void 0:d.getUrlForApp,{href:b}=Object(o.reactRouterNavigate)(c,`/systemLogs/${u.search}`),{href:h}=Object(o.reactRouterNavigate)(c,`/customLogs/${u.search}`),{href:v}=Object(o.reactRouterNavigate)(c,`/otel-logs/${u.search}`),m={id:"otel-logs",type:"virtual",release:"preview",title:"OpenTelemetry",description:"Collect Logs and host metrics using the Elastic distribution of the OpenTelemetry Collector",name:"custom-logs-virtual",categories:["observability"],icons:[{type:"svg",src:null!==(n=null==p?void 0:p.staticAssets.getPluginAssetHref("opentelemetry.svg"))&&void 0!==n?n:""}],url:v,version:"",integration:""};switch(t){case"apm":return[{id:"apm-virtual",type:"virtual",title:"Elastic APM",description:"Collect distributed traces from your applications with Elastic APM",name:"apm",categories:["observability"],icons:[{type:"eui",src:"apmApp"}],url:null!==(i=`${null==g?void 0:g("apm")}/onboarding`)&&void 0!==i?i:"",version:"",integration:""},{id:"otel-virtual",type:"virtual",title:"OpenTelemetry",description:"Collect distributed traces with OpenTelemetry",name:"otel",categories:["observability"],icons:[{type:"svg",src:null!==(r=null==p?void 0:p.staticAssets.getPluginAssetHref("opentelemetry.svg"))&&void 0!==r?r:""}],url:null!==(a=`${null==g?void 0:g("apm")}/onboarding?agent=openTelemetry`)&&void 0!==a?a:"",version:"",integration:""},{id:"synthetics-virtual",type:"virtual",title:"Synthetic monitor",description:"Monitor endpoints, pages, and user journeys",name:"synthetics",categories:["observability"],icons:[{type:"eui",src:"logoUptime"}],url:null!==(s=null==g?void 0:g("synthetics"))&&void 0!==s?s:"",version:"",integration:""}];case"infra":return[Ce("kubernetes"),Ce("docker"),f?Ce("prometheus"):m,{id:"azure-virtual",type:"virtual",title:"Azure",description:"Collect logs and metrics from Microsoft Azure",name:"azure",categories:["observability"],icons:[],url:"https://azure.com",version:"",integration:"",isCollectionCard:!0,onCardClick:e("azure")},{id:"aws-virtual",type:"virtual",title:"AWS",description:"Collect logs and metrics from Amazon Web Services (AWS)",name:"aws",categories:["observability"],icons:[],url:"https://aws.com",version:"",integration:"",isCollectionCard:!0,onCardClick:e("aws")},{id:"gcp-virtual",type:"virtual",title:"Google Cloud Platform",description:"Collect logs and metrics from Google Cloud Platform",name:"gcp",categories:["observability"],icons:[],url:"",version:"",integration:"",isCollectionCard:!0,onCardClick:e("gcp")}];case"logs":return[{id:"system-logs",type:"virtual",title:"Stream host system logs",description:"Collect system logs from your machine or server",name:"system-logs-virtual",categories:["observability"],icons:[{type:"svg",src:null!==(l=null==p?void 0:p.staticAssets.getPluginAssetHref("system.svg"))&&void 0!==l?l:""}],url:b,version:"",integration:""},{id:"custom-logs",type:"virtual",title:"Stream log files",description:"Stream any logs into Elastic in a simple way and explore their data",name:"custom-logs-virtual",categories:["observability"],icons:[{type:"eui",src:"filebeatApp"}],url:h,version:"",integration:""},f?Ce("nginx"):m,{id:"azure-logs-virtual",type:"virtual",title:"Azure",description:"Collect logs from Microsoft Azure",name:"azure",categories:["observability"],icons:[],url:"https://azure.com",version:"",integration:"",isCollectionCard:!0,onCardClick:e("azure")},{id:"aws-logs-virtual",type:"virtual",title:"AWS",description:"Collect logs from Amazon Web Services (AWS)",name:"aws",categories:["observability"],icons:[],url:"https://aws.com",version:"",integration:"",isCollectionCard:!0,onCardClick:e("aws")},{id:"gcp-logs-virtual",type:"virtual",title:"Google Cloud Platform",description:"Collect logs from Google Cloud Platform",name:"gcp",categories:["observability"],icons:[],url:"",version:"",integration:"",isCollectionCard:!0,onCardClick:e("gcp")}];default:return}}(Object(c.useCallback)((e=>()=>{g(e),p.current&&setTimeout(Me,40,p.current,parseInt(b.size.l,10))}),[]),s.get("category")),v=function(){const{services:{application:e}}=Object(o.useKibana)(),t=null==e?void 0:e.getUrlForApp;return[{id:"upload-file-virtual",type:"virtual",title:a.i18n.translate("xpack.observability_onboarding.packageList.uploadFileTitle",{defaultMessage:"Upload a file"}),description:a.i18n.translate("xpack.observability_onboarding.packageList.uploadFileDescription",{defaultMessage:"Upload data from a CSV, TSV, JSON or other log file to Elasticsearch for analysis."}),name:"upload-file",categories:[],icons:[{type:"eui",src:"addDataApp"}],url:`${null==t?void 0:t("home")}#/tutorial_directory/fileDataViz`,version:"",integration:"",isCollectionCard:!1}]}();let m=!1;return Object(x.jsx)(i.EuiPanel,{hasBorder:!0,paddingSize:"xl"},Object(x.jsx)(Pe,{iconType:"createSingleMetricJob",title:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.strong.startCollectingYourDataLabel",{defaultMessage:"What do you want to monitor?"})}),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiFlexGroup,{css:Object(x.css)({...n,maxWidth:"560px"},"",""),gutterSize:"l",direction:"column"},t.map((e=>{var t;return Object(x.jsx)(i.EuiFlexItem,{key:e.id,"data-test-subj":`observabilityOnboardingUseCaseCard-${e.id}`},Object(x.jsx)(i.EuiCheckableCard,{id:`${r}_${e.id}`,name:r,label:Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,{css:Ae},e.label),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiText,{color:"subdued",size:"s"},e.description),(e.logos||e.showIntegrationsBadge)&&Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s",responsive:!1},null===(t=e.logos)||void 0===t?void 0:t.map((e=>Object(x.jsx)(i.EuiFlexItem,{key:e,grow:!1},Object(x.jsx)(Le,{logo:e})))),e.showIntegrationsBadge&&Object(x.jsx)(i.EuiBadge,{color:"hollow"},Object(x.jsx)(be.FormattedMessage,{defaultMessage:"+ Integrations",id:"xpack.observability_onboarding.experimentalOnboardingFlow.form.addIntegrations",description:"A badge indicating that the user can add additional observability integrations to their deployment via this option"}))))),checked:e.id===s.get("category"),onKeyDown:()=>m=!0,onKeyUp:()=>m=!1,onChange:()=>{g(""),l({category:e.id},{replace:!0})},onClick:()=>{!m&&d.current&&setTimeout(Me,40,d.current,parseInt(b.size.l,10))}}))}))),Object(x.jsx)("div",{hidden:!s.get("category")||!h},Object(x.jsx)(i.EuiSpacer,null),Object(x.jsx)("div",{ref:d},Object(x.jsx)(Pe,{iconType:"savedObjectsApp",title:a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.whatTypeOfResourceLabel",{defaultMessage:"What type of resource are you monitoring?"})}),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(Ie,{customCards:h,flowSearch:f,flowCategory:s.get("category")})),Object(x.jsx)("div",{ref:p},Object(x.jsx)(i.EuiText,{css:n,size:"s",color:"subdued"},Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.experimentalOnboardingFlow.form.searchPromptText",defaultMessage:"Not seeing yours? Search through our 130 ways of ingesting data:"})),Object(x.jsx)(Ie,{showSearchBar:!0,searchQuery:f,flowSearch:f,setSearchQuery:g,flowCategory:s.get("category"),customCards:null==h?void 0:h.filter((e=>"virtual"===e.type&&!e.isCollectionCard)).concat(v),joinCardLists:!0}))))},Pe=({title:e,iconType:t})=>Object(x.jsx)(i.EuiFlexGroup,{responsive:!1,gutterSize:"m",alignItems:"center"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiAvatar,{size:"l",name:e,iconType:t,iconSize:"l",color:"subdued"})),Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiTitle,{size:"s"},Object(x.jsx)("strong",null,e))));function Me(e,t=0){document.querySelectorAll("#globalHeaderBars [data-fixed-header=true]").forEach((e=>{t+=e.getBoundingClientRect().height})),window.scrollTo({behavior:"smooth",top:e.getBoundingClientRect().top-document.body.getBoundingClientRect().top-t})}function Le({logo:e}){const t=function(e){const{services:{http:t}}=Object(o.useKibana)();switch(e){case"aws":return"logoAWS";case"azure":return"logoAzure";case"gcp":return"logoGCP";case"kubernetes":return"logoKubernetes";case"nginx":return"logoNginx";case"prometheus":return"logoPrometheus";case"docker":return"logoDocker";default:return null==t?void 0:t.staticAssets.getPluginAssetHref(`${e}.svg`)}}(e);return t?Object(x.jsx)(i.EuiIcon,{type:t}):null}const Fe=()=>Object(x.jsx)(i.EuiFlexGroup,null,Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiTitle,{size:"l","data-test-subj":"obltOnboardingHomeTitle"},Object(x.jsx)("h1",null,a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.addObservabilityDataTitleLabel",{defaultMessage:"Add Observability data"}))),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiText,{color:"subdued"},a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.startIngestingDataIntoTextLabel",{defaultMessage:"Start ingesting Observability data into Elastic. Return to this page at any time by clicking Add data."}))),Object(x.jsx)(i.EuiFlexItem,null)),Ne=({type:e,step:t,timestamp:n})=>({type:e,step:t,timestamp:null!=n?n:Date.now(),duration:0});function Re({initialState:e,initialStep:t,steps:n,basePath:i}){const r=Object(c.createContext)({setCurrentStep:()=>{},goToStep:()=>{},goBack:()=>{},getState:()=>e,setState:()=>{},getPath:()=>[],getUsage:()=>({timeSinceStart:0,navEvents:new Array})}),a=e=>e===t?i:`${i}/${e}`,o=Object.entries(n).reduce(((e,t)=>{const[n,i]=t;return{...e,[a(n)]:{exact:!0,handler:()=>function({step:e,Component:t}){const{setCurrentStep:n}=s();return Object(c.useEffect)((()=>{n(e)}),[e]),Object(x.jsx)(t,null)}({step:n,Component:i.component})}}}),{});function s(){return Object(c.useContext)(r)}return{context:r,Provider:function({children:t,onChangeStep:i,transitionDuration:o}){const s=Object($.useHistory)(),[l,u]=Object(c.useState)(),d=Object(c.useRef)([]),p=Object(c.useRef)({timeSinceStart:0,navEvents:new Array}),[f,g]=Object(c.useState)(e);return Object(x.jsx)(r.Provider,{value:{setCurrentStep(e){if(e===l)return;u(e);const t=d.current.find((t=>t===e));d.current=(({step:e,path:t})=>{const n=t.findIndex((t=>t===e));return-1!==n?t.slice(0,n+1):[...t,e]})({step:e,path:d.current}),p.current.navEvents=(({type:e,step:t,navEvents:n})=>{if(0===n.length)return[Ne({type:"inital",step:t})];const i=[...n],r=i[n.length-1],a=Date.now();return r.duration=a-r.timestamp,[...i,Ne({type:e,step:t,timestamp:a})]})({type:t?"back":"progress",step:e,navEvents:p.current.navEvents}),i&&i({direction:t?"back":"next",stepKey:e,stepTitle:n[e].title,StepComponent:n[e].component})},goToStep(e){if(e===l)return;const t=a(e);o?setTimeout((()=>{s.push(t)}),o):s.push(t)},goBack(){1!==s.length&&1!==d.current.length&&o||s.goBack(),setTimeout((()=>{s.goBack()}),o)},getState:()=>f,setState:e=>{g(e)},getPath:()=>[...d.current],getUsage:()=>{const e=Date.now(),t=p.current.navEvents,n=t[0],i=t[t.length-1];return i.duration=e-i.timestamp,{timeSinceStart:e-n.timestamp,navEvents:t}}}},t)},useWizard:s,routes:o}}var De=n(2),ze=n(40);function Ue({elasticAgentPlatform:e,apiKeyEncoded:t="$API_KEY",apiEndpoint:n="$API_ENDPOINT",scriptDownloadUrl:i="$SCRIPT_DOWNLOAD_URL",elasticAgentVersion:r="$ELASTIC_AGENT_VERSION",autoDownloadConfig:a=!1,onboardingId:o="$ONBOARDING_ID"}){const s="standalone_agent_setup.sh",l=$e`
      curl ${i} -o ${s} &&
      sudo bash ${s} ${t} ${n} ${r} ${o} ${a?"autoDownloadConfig=1":""}
    `;return{"linux-tar":l,macos:l,windows:$e`
      curl -O https://elastic.co/agent-setup.sh &&
      sudo bash agent-setup.sh -- service.name=my-service --url=https://elasticsearch:8220 --enrollment-token=SRSc2ozWUItWXNuWE5oZzdERFU6anJtY0FIzhSRGlzeTJYcUF5UklfUQ==
    `}[e]}function $e(e,...t){return Object(J.flatten)(Object(J.zip)(e,t)).join("").replace(/\s+/g," ").trim()}var Be=n(56);function Ge({status:e,title:t,message:n}){return"loading"===e?Object(x.jsx)(i.EuiFlexItem,{"data-test-subj":`obltOnboardingStepStatus-${e}`},Object(x.jsx)(i.EuiPanel,{color:"transparent"},Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiLoadingSpinner,{size:"m"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiText,{color:"subdued"},t))))):"complete"===e?Object(x.jsx)(i.EuiFlexItem,{"data-test-subj":`obltOnboardingStepStatus-${e}`},Object(x.jsx)(i.EuiCallOut,{title:t,color:"success",iconType:"check"},n)):"danger"===e?Object(x.jsx)(i.EuiFlexItem,{"data-test-subj":`obltOnboardingStepStatus-${e}`},Object(x.jsx)(i.EuiCallOut,{title:t,color:"danger",iconType:"warning"},n)):"warning"===e?Object(x.jsx)(i.EuiFlexItem,{"data-test-subj":`obltOnboardingStepStatus-${e}`},Object(x.jsx)(i.EuiCallOut,{title:t,color:"warning",iconType:"warning"},n)):null}function Ve({installAgentPlatformOptions:e,onSelectPlatform:t,selectedPlatform:n,installAgentCommand:r,autoDownloadConfig:o,onToggleAutoDownloadConfig:s,installAgentStatus:l,showInstallProgressSteps:c,installProgressSteps:d,configureAgentStatus:p,configureAgentYaml:f,appendedSteps:g=[]}){var b,h;const v="macos"===n?"/Library/Elastic/Agent/elastic-agent.yml":"/opt/Elastic/Agent/elastic-agent.yml",m=Object(J.intersection)(Object.keys(d),Object.keys(Ke(v))).length>0,y=We("ea-config",d,v),j=null===(b=e.find((e=>e.id===n)))||void 0===b?void 0:b.children,O=null===(h=e.find((e=>e.id===n)))||void 0===h?void 0:h.disableSteps,_=Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiCodeBlock,{language:"bash",isCopyable:!0},r),Object(x.jsx)(i.EuiSpacer,{size:"m"}),c&&Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"m"},["ea-download","ea-extract","ea-install","ea-status"].map((e=>{const{title:t,status:n,message:i}=We(e,d,v);return Object(x.jsx)(Ge,{status:n,title:t,message:i})}))))),E=Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,o?a.i18n.translate("xpack.observability_onboarding.installElasticAgent.configStep.auto.description",{defaultMessage:"The agent config below will be downloaded by the install script and written to ({configPath}). This will overwrite any existing agent configuration.",values:{configPath:v}}):a.i18n.translate("xpack.observability_onboarding.installElasticAgent.configStep.manual.description",{defaultMessage:"Add the following configuration to {configPath} on the host where you installed the Elastic Agent.",values:{configPath:v}}))),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiSkeletonRectangle,{isLoading:!1,contentAriaLabel:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.configStep.yamlCodeBlockdescription",{defaultMessage:"Elastic Agent yaml configuration"}),width:"100%",height:300,borderRadius:"s"},Object(x.jsx)(i.EuiCodeBlock,{language:"yaml",isCopyable:!0,style:{opacity:o?".5":"1"}},f)),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiButton,{iconType:"download",color:"primary",href:`data:application/yaml;base64,${Be.Buffer.from(f,"utf8").toString("base64")}`,download:"elastic-agent.yml",target:"_blank",isDisabled:o,"data-test-subj":"obltOnboardingConfigureElasticAgentStepDownloadConfig"},a.i18n.translate("xpack.observability_onboarding.installElasticAgent.configStep.downloadConfigButton",{defaultMessage:"Download config file"})),c&&o?Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiFlexGroup,{direction:"column"},Object(x.jsx)(Ge,{status:y.status,title:y.title,message:y.message}))):null);return Object(x.jsx)(i.EuiSteps,{steps:[{"data-test-subj":"obltOnboardingInstallElasticAgentStep",title:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.title",{defaultMessage:"Install the Elastic Agent"}),status:l,children:Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.installElasticAgent.installStep.description",defaultMessage:"Select your platform, and run the install command in your terminal to enroll and start the Elastic Agent. Do this for each host. Review {hostRequirementsLink} before installing.",values:{hostRequirementsLink:Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityOnboardingInstallElasticAgentStepsHostRequirementsAndOtherInstallationOptionsLink",external:!0,href:"https://www.elastic.co/guide/en/fleet/8.7/elastic-agent-installation.html"},a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.hostRequirements",{defaultMessage:"host requirements and other installation options"}))}}))),Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(i.EuiSwitch,{label:Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1},a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.autoDownloadConfig",{defaultMessage:"Automatically download the agent's config"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIconTip,{content:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.autoDownloadConfig.tooltip",{defaultMessage:"Turn on to add a string to the following code block that downloads the agent's standard configuration to your host during installation. Turn off to manually configure the agent in the next step."}),position:"right"}))),checked:o,onChange:s,disabled:O||m,"data-test-subj":"obltOnboardingInstallElasticAgentAutoDownloadConfig"}),Object(x.jsx)(i.EuiSpacer,{size:"l"}),o&&Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiCallOut,{title:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.autoDownloadConfig.overwriteWarning",{defaultMessage:"Automatically downloading the agent config will overwrite any existing agent config on your host."}),color:"warning",iconType:"warning","data-test-subj":"obltOnboardingInstallElasticAgentAutoDownloadConfigCallout"}),Object(x.jsx)(i.EuiSpacer,{size:"l"})),Object(x.jsx)(i.EuiButtonGroup,{isFullWidth:!0,legend:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform",{defaultMessage:"Choose platform"}),options:e.map((({id:e,label:t,isDisabled:n})=>({id:e,label:t,isDisabled:n}))),type:"single",idSelected:n,onChange:e=>{t(e)},isDisabled:m}),Object(x.jsx)(i.EuiSpacer,{size:"m"}),j||_)},{"data-test-subj":"obltOnboardingConfigureElasticAgentStep",title:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.configureStep.title",{defaultMessage:"Configure the Elastic Agent"}),status:O?"disabled":p,children:O?Object(x.jsx)(u.a.Fragment,null):E},...g.map((e=>({children:null,...e,status:O?"disabled":e.status,"data-test-subj":e["data-test-subj"]})))]})}function We(e,t,n){const{loadingTitle:i,completedTitle:r,incompleteTitle:a}=Ke(n)[e],o=t[e];if(o){const{status:e,message:t}=o;return{title:"loading"===e?i:"complete"===e?r:a,status:null!=e?e:"incomplete",message:t}}return{title:a,status:"incomplete"}}const Ke=e=>({"ea-download":{incompleteTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaDownload.incompleteTitle",{defaultMessage:"Download Elastic Agent"}),loadingTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaDownload.loadingTitle",{defaultMessage:"Downloading Elastic Agent"}),completedTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaDownload.completedTitle",{defaultMessage:"Elastic Agent downloaded"})},"ea-extract":{incompleteTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaExtract.incompleteTitle",{defaultMessage:"Extract Elastic Agent"}),loadingTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaExtract.loadingTitle",{defaultMessage:"Extracting Elastic Agent"}),completedTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaExtract.completedTitle",{defaultMessage:"Elastic Agent extracted"})},"ea-install":{incompleteTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaInstall.incompleteTitle",{defaultMessage:"Install Elastic Agent"}),loadingTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaInstall.loadingTitle",{defaultMessage:"Installing Elastic Agent"}),completedTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaInstall.completedTitle",{defaultMessage:"Elastic Agent installed"})},"ea-status":{incompleteTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaStatus.incompleteTitle",{defaultMessage:"Connect to the Elastic Agent"}),loadingTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaStatus.loadingTitle",{defaultMessage:"Connecting to the Elastic Agent"}),completedTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaStatus.completedTitle",{defaultMessage:"Connected to the Elastic Agent"})},"ea-config":{incompleteTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaConfig.incompleteTitle",{defaultMessage:"Configure the agent"}),loadingTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaConfig.loadingTitle",{defaultMessage:"Downloading Elastic Agent config"}),completedTitle:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.eaConfig.completedTitle",{defaultMessage:"Elastic Agent config written to {configPath}",values:{configPath:e}})}});function qe(e){const{title:t,children:n,panelFooter:r}=e;return Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiModalHeader,null,Object(x.jsx)(i.EuiModalHeaderTitle,null,t)),Object(x.jsx)(i.EuiModalBody,null,n),Object(x.jsx)(i.EuiModalFooter,null,r))}function He(){return Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",justifyContent:"center"},Object(x.jsx)(i.EuiButtonEmpty,{"data-test-subj":"observabilityOnboardingTroubleshootingLinkTroubleshootingButton",iconType:"help",color:"primary",href:"https://www.elastic.co/guide/en/observability/current/logs-troubleshooting.html",target:"_blank"},a.i18n.translate("xpack.observability_onboarding.installElasticAgent.troubleshooting",{defaultMessage:"Troubleshooting"})))}function Ye({docsLink:e="https://www.elastic.co/guide/en/fleet/current/install-standalone-elastic-agent.html"}){return Object(x.jsx)(i.EuiFlexGroup,{direction:"column"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.windows.installStep.description",{defaultMessage:"This onboarding is currently only available for Linux and MacOS systems. See our documentation for information on streaming log files to Elastic from a Windows system."})))),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiButton,{iconSide:"right",iconType:"popout",color:"primary",href:e,target:"_blank",style:{width:"fit-content"},"data-test-subj":"obltOnboardingInstallElasticAgentWindowsDocsLink"},a.i18n.translate("xpack.observability_onboarding.windows.installStep.link.label",{defaultMessage:"Read docs"}))))}var Je=n(45),Xe=n(66);function Qe({ariaLabel:e,iconType:t="iInCircle",title:n,children:r,dataTestSubj:a}){const[o,s]=Object(c.useState)(!1);return Object(x.jsx)(i.EuiPopover,{panelPaddingSize:"s",anchorPosition:"upCenter",isOpen:o,closePopover:()=>s(!1),style:{margin:"-5px 0 0 -5px"},button:Object(x.jsx)(i.EuiButtonIcon,{"data-test-subj":a,"aria-label":e,onClick:e=>{s(!o),e.stopPropagation()},size:"xs",color:"primary",iconType:t})},n&&Object(x.jsx)(i.EuiPopoverTitle,null,n),r)}function Ze({onStatusChange:e}){const{navigateToAppUrl:t}=function(){const{application:{navigateToUrl:e,navigateToApp:t},http:{basePath:n}}=Object(o.useKibana)().services;return{navigateToKibanaUrl:t=>{e(n.prepend(t),{})},navigateToAppUrl:e=>{t("",{path:e,openInNewTab:!0})}}}(),[n,r]=Object(c.useState)(),[s,l]=Object(c.useState)(),u=Object(c.useCallback)((({versions:t})=>{r(null==t?void 0:t[0]),null==e||e("resolved")}),[e]),d=Object(c.useCallback)((t=>{l(t),null==e||e("rejected")}),[e]),{performRequest:p,requestState:f}=Object(Xe.a)({onIntegrationCreationSuccess:u,onIntegrationCreationFailure:d});Object(c.useEffect)((()=>{p()}),[p]);const g="pending"===f.state,b="rejected"===f.state,h="resolved"===f.state;return g?Object(x.jsx)(i.EuiCallOut,{title:Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiLoadingSpinner,{size:"m"})),Object(x.jsx)(i.EuiFlexItem,null,a.i18n.translate("xpack.observability_onboarding.systemIntegration.installing",{defaultMessage:"Installing system integration"}))),color:"primary","data-test-subj":"obltOnboardingSystemLogsInstallingIntegration"}):b?Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiCallOut,{title:a.i18n.translate("xpack.observability_onboarding.systemIntegration.status.failed",{defaultMessage:"System integration installation failed"}),color:"warning",iconType:"warning","data-test-subj":"obltOnboardingSystemLogsIntegrationInstallationFailed"},null==s?void 0:s.message)):h?Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiCallOut,{title:Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.systemIntegration.installed",defaultMessage:"System integration installed. {systemIntegrationTooltip}",values:{systemIntegrationTooltip:Object(x.jsx)(Qe,{dataTestSubj:"obltOnboardingSystemLogsIntegrationInfo",ariaLabel:a.i18n.translate("xpack.observability_onboarding.systemIntegration.installed.tooltip.label",{defaultMessage:"Integration details"})},Object(x.jsx)(i.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(x.jsx)(i.EuiFlexItem,null,a.i18n.translate("xpack.observability_onboarding.systemIntegration.installed.tooltip.description",{defaultMessage:"Integrations streamline connecting your data to the Elastic Stack."})),Object(x.jsx)(i.EuiFlexItem,{style:{flexDirection:"row",alignItems:"center"}},Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.systemIntegration.installed.tooltip.link",defaultMessage:"{learnMoreLink} about the data you can collect using the Systems integration.",values:{learnMoreLink:Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityOnboardingSystemIntegrationLearnMore",target:"_blank",style:{marginRight:"3px"},onClick:e=>{e.preventDefault(),t(`/integrations/detail/system-${n}`)}},a.i18n.translate("xpack.observability_onboarding.systemIntegration.installed.tooltip.link.label",{defaultMessage:"Learn more"}))}}))))}}),color:"success",iconType:"check","data-test-subj":"obltOnboardingSystemLogsIntegrationInstalled"})):null}var et=n(57);const tt=["ea-download","ea-status","logs-ingest"],nt=["danger","warning","complete"];function it(e,t){const{services:{analytics:n}}=Object(et.a)(),[i]=Object(c.useState)(new Map);Object(c.useEffect)((()=>{e&&tt.forEach((r=>{const a=e[r];a&&nt.includes(a.status)&&i.get(r)!==a.status&&(n.reportEvent(K.a.eventType,{uses_legacy_onboarding_page:!1,flow:t,step:r,step_status:a.status,step_message:a.message}),i.set(r,a.status))}))}),[n,t,e,i])}const rt={incomplete:a.i18n.translate("xpack.observability_onboarding.systemLogs.installElasticAgent.progress.logsIngest.incompleteTitle",{defaultMessage:"Ship logs to Elastic Observability"}),loading:a.i18n.translate("xpack.observability_onboarding.systemLogs.installElasticAgent.progress.logsIngest.loadingTitle",{defaultMessage:"Waiting for logs to be shipped..."}),completed:a.i18n.translate("xpack.observability_onboarding.systemLogs.installElasticAgent.progress.logsIngest.completedTitle",{defaultMessage:"Logs are being shipped!"})},at={installElasticAgent:{component:function(){var e,t,n,r,s;const{services:{share:l}}=Object(o.useKibana)(),u=l.url.locators.get(De.c),d=l.url.locators.get(De.a),{getState:p,setState:f}=st(),g=p(),[b,h]=Object(c.useState)("linux-tar"),[v,m]=Object(c.useState)("pending"),y=Object(c.useCallback)((e=>{m(e)}),[]),{data:j,status:O}=Object(ze.b)((e=>e("GET /internal/observability_onboarding/logs/setup/privileges")),[]),{data:_}=Object(ze.b)((e=>e("GET /internal/observability_onboarding/logs/setup/environment")),[]),{data:E,status:S,error:w}=Object(ze.b)((e=>{if(null!=j&&j.hasPrivileges)return e("POST /internal/observability_onboarding/logs/flow",{params:{body:{name:"system-logs",type:"systemLogs"}}})}),[null==j?void 0:j.hasPrivileges]),{apiKeyEncoded:k,onboardingId:I}=null!=E?E:p(),C=S===ze.a.SUCCESS,{data:A="",status:T}=Object(ze.b)((e=>{if(k&&I)return e("GET /internal/observability_onboarding/elastic_agent/config",{headers:{authorization:`ApiKey ${k}`},params:{query:{onboardingId:I}}})}),[k,I,C]);Object(c.useEffect)((()=>{f((e=>({...e,onboardingId:I,apiKeyEncoded:k})))}),[I,k]);const{data:P,status:M,refetch:L}=Object(ze.b)((e=>{if(I)return e("GET /internal/observability_onboarding/flow/{onboardingId}/progress",{params:{path:{onboardingId:I}}})}),[I]),F=M===ze.a.SUCCESS;Object(c.useEffect)((()=>{F&&setTimeout((()=>{L()}),2e3)}),[F,L]),it(null==P?void 0:P.progress,"system_logs");const N=Object(c.useCallback)((()=>{const e=null==P?void 0:P.progress;if(e){var t;const n=null==e||null===(t=e["logs-ingest"])||void 0===t?void 0:t.status;return{title:"loading"===n?rt.loading:"complete"===n?rt.completed:rt.incomplete,status:n,"data-test-subj":"obltOnboardingCheckLogsStep"}}return{title:rt.incomplete,status:"incomplete"}}),[null==P?void 0:P.progress]),R=void 0!==(null==P?void 0:P.progress["ea-download"]),D="complete"===(null==P||null===(e=P.progress)||void 0===e||null===(t=e["ea-status"])||void 0===t?void 0:t.status),z=null==P||null===(n=P.progress)||void 0===n||null===(r=n["ea-config"])||void 0===r?void 0:r.status;return Object(x.jsx)(qe,{title:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.stepPanel.collectSystemLogsLabel",{defaultMessage:"Collect system logs"}),panelFooter:[Object(x.jsx)(i.EuiButton,{color:"success",fill:!0,iconType:"magnifyWithPlus",onClick:async function(){"rejected"!==v?await u.navigate({integration:"system",dataset:"system.syslog",origin:{id:"application-log-onboarding"}}):await d.navigate({origin:{id:"application-log-onboarding"}})},"data-test-subj":"obltOnboardingExploreLogs",disabled:"pending"===v},a.i18n.translate("xpack.observability_onboarding.steps.exploreLogs",{defaultMessage:"Explore logs"}))],panelProps:{hasBorder:!1,color:"transparent",paddingSize:"none"}},Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.systemLogs.installElasticAgent.description",{defaultMessage:"To collect the data from your system and stream it to Elastic, you first need to install a shipping tool on the machine generating the logs. In this case, the shipping tool is an agent developed by Elastic."}))),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(Ze,{onStatusChange:y}),Object(x.jsx)(i.EuiSpacer,{size:"m"}),k&&I?Object(x.jsx)(Je.a,{payload:{apiKeyEncoded:k,onboardingId:I},hasPrivileges:!0,status:ze.a.SUCCESS}):O!==ze.a.NOT_INITIATED&&O!==ze.a.LOADING&&Object(x.jsx)(Je.a,{payload:E,hasPrivileges:null==j?void 0:j.hasPrivileges,status:S,error:w}),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(Ve,{installAgentPlatformOptions:[{label:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform.linux",{defaultMessage:"Linux"}),id:"linux-tar"},{label:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform.macOS",{defaultMessage:"MacOS"}),id:"macos"},{label:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform.windows",{defaultMessage:"Windows"}),id:"windows",disableSteps:!0,children:Object(x.jsx)(Ye,{docsLink:"https://www.elastic.co/guide/en/welcome-to-elastic/current/getting-started-observability.html"})}],onSelectPlatform:e=>h(e),selectedPlatform:b,installAgentCommand:Ue({elasticAgentPlatform:b,apiKeyEncoded:k,apiEndpoint:null==_?void 0:_.apiEndpoint,scriptDownloadUrl:null==_?void 0:_.scriptDownloadUrl,elasticAgentVersion:null==_?void 0:_.elasticAgentVersion,autoDownloadConfig:g.autoDownloadConfig,onboardingId:I}),autoDownloadConfig:g.autoDownloadConfig,onToggleAutoDownloadConfig:function(){f((e=>({...e,autoDownloadConfig:!e.autoDownloadConfig})))},installAgentStatus:S===ze.a.LOADING?"loading":D?"complete":"current",showInstallProgressSteps:R,installProgressSteps:null!==(s=null==P?void 0:P.progress)&&void 0!==s?s:{},configureAgentStatus:T===ze.a.LOADING?"loading":z,configureAgentYaml:A,appendedSteps:[N()]}),Object(x.jsx)(i.EuiHorizontalRule,null),Object(x.jsx)(He,null))},title:a.i18n.translate("xpack.observability_onboarding.systemLogs.installShipper.title",{defaultMessage:"Install shipper to collect system logs"})}},{Provider:ot,useWizard:st,routes:lt}=Re({initialState:{elasticAgentPlatform:"linux-tar",autoDownloadConfig:!1,apiKeyEncoded:"",onboardingId:""},initialStep:"installElasticAgent",steps:at,basePath:"/systemLogs"}),ct=()=>Object(x.jsx)(ot,null,Object(x.jsx)(i.EuiPanel,{hasBorder:!0},Object.keys(lt).map((e=>{const t=e,{handler:n,exact:i}=lt[t];return Object(x.jsx)(te,{key:t,path:t,exact:i,component:n})}))));var ut=n(35),dt=n(94),pt=n.n(dt),ft=n(34);const gt=e=>(t,n)=>ft.actions.pure(((i,r)=>{const a=t(i,r);return null!=a&&void 0!==a?[ft.actions.sendTo(e,a,n)]:void 0}));var bt=n(27);const ht={mode:"create"},vt={options:{deletePrevious:!1,resetOnCreation:!0,errorOnFailedCleanup:!1},fields:{integrationName:"",datasets:[{type:"logs",name:""}]},touchedFields:{integrationName:!1,datasets:!1},errors:null};var mt=n(93),yt=n.n(mt),jt=n(20);const xt=jt.string,Ot=jt.keyof({logs:null,metrics:null}),_t=jt.exact(jt.type({name:jt.string,type:Ot}));jt.exact(jt.type({integrationName:xt,datasets:jt.array(_t)}));class IntegrationError extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class NamingCollisionError extends IntegrationError{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class AuthorizationError extends IntegrationError{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class UnknownError extends IntegrationError{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class DecodeError extends IntegrationError{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class IntegrationNotInstalledError extends IntegrationError{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class validation_FormattingError extends IntegrationError{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const Et=e=>t=>{const n=It(e,t.fields);return Object.keys(n).length>0?Promise.reject({errors:n}):Promise.resolve()},St=e=>t=>Object(J.isEmpty)(t)?new validation_FormattingError(e):null,wt=e=>t=>t.toLowerCase()!==t?new validation_FormattingError(e):null,kt=(e,t)=>n=>n.length>t?new validation_FormattingError(e):null,It=(e,t)=>Object.entries(e).reduce(((e,n)=>{const[i,r]=n;let a;return a=Array.isArray(r)?r.map((e=>e(t[i]))).filter((e=>null!==e)):r(t[i]),{...e,...Array.isArray(a)&&a.length>0||!Array.isArray(a)&&null!==a?{[i]:a}:{}}}),{}),Ct=(e,t)=>"data"in t&&"integrationName"in t.data&&"datasets"in t.data?{type:"INTEGRATION_CREATED",fields:{integrationName:t.data.integrationName,datasets:t.data.datasets}}:null,At=(e,t)=>"data"in t&&"integrationName"in t.data?{type:"INTEGRATION_CLEANUP",integrationName:t.data.integrationName}:null,Tt=(e,t)=>"data"in t&&t.data instanceof IntegrationError?{type:"INTEGRATION_CLEANUP_FAILED",error:t.data}:null,Pt=()=>({type:"CREATE_INITIALIZED"});var Mt=n(62);const Lt=e=>e.replaceAll(/[^a-zA-Z0-9_]/g,"_").replaceAll(/[\_]{2,}/g,"_"),Ft=(e,t)=>Object(Mt.pipe)([e,t],Nt(e),Rt(e),Dt(e),zt(e)),Nt=e=>e=>{const[t,n]=e;return[{...t,fields:{...t.fields,...n.fields}},n]},Rt=e=>e=>{const[t,n]=e;return[{...t,touchedFields:{...t.touchedFields,...Object.keys(n.fields).reduce(((e,t)=>({...e,[t]:!0})),{})}},n]},Dt=e=>e=>{const[t,n]=e;return t.touchedFields.integrationName&&!t.touchedFields.datasets?[{...t,fields:{...t.fields,datasets:t.fields.datasets.map(((e,n)=>({...e,name:0===n?t.fields.integrationName:e.name})))}},n]:[t,n]},zt=e=>e=>{const[t,n]=e;return[{...t,fields:{...t.fields,integrationName:Lt(t.fields.integrationName),datasets:t.fields.datasets.map((e=>({...e,name:Lt(e.name)})))}},n]},Ut=e=>`${e}.`,$t=(e,t)=>e!==t,Bt=(e,t)=>`${Ut(t)}${e}`,Gt=e=>({...e,...void 0!==e.datasets&&void 0!==e.integrationName?{datasets:e.datasets.map((t=>{return{...t,name:(n=t.name,i=e.integrationName,((e,t)=>e.startsWith(Ut(t)))(n,i)?n.split(Ut(i))[1]:n)};var n,i}))}:{}}),Vt=({initialContext:e,integrationsClient:t,customIntegrationsNotificationsChannel:n,initialState:i})=>((e=ht)=>Object(ft.createMachine)({context:e,preserveActionOrder:!0,predictableActionArguments:!0,id:"CustomIntegrations",initial:"uninitialized",states:{uninitialized:{always:"create"},create:{invoke:[{id:"createCustomIntegration",src:"createCustomIntegration"}],on:{CREATE_INITIALIZED:{target:".initialized"}},states:{initialized:{meta:{_DX_warning_:"These inner initialized states on the top level machine exist primarily so that 'connected' components can block the reading of the state of child machines whilst undefined on the first render cycle"},on:{INTEGRATION_CREATED:{actions:["notifyIntegrationCreated"]},INTEGRATION_CLEANUP:{actions:["notifyIntegrationCleanup"]},INTEGRATION_CLEANUP_FAILED:{actions:["notifyIntegrationCleanupFailed"]}}}}},update:{}}},{actions:{},guards:{}}))(e).withConfig({services:{createCustomIntegration:e=>(({initialContext:e,integrationsClient:t})=>{return((e=vt)=>Object(ft.createMachine)({context:e,preserveActionOrder:!0,predictableActionArguments:!0,id:"CreateCustomIntegration",initial:"uninitialized",on:{UPDATE_FIELDS:{target:"#validating",actions:"storeFields"}},states:{uninitialized:{always:[{target:"validating",cond:"shouldValidateInitialContext"},{target:"untouched"}],exit:["notifyInitialized"]},validating:{id:"validating",invoke:{src:"validateFields",onDone:{target:"valid"},onError:{target:"validationFailed",actions:["storeClientErrors"]}}},untouched:{},valid:{id:"valid",entry:["clearErrors"],on:{SAVE:[{target:"success",cond:"fieldsMatchPreviouslyCreated"},{target:"deletingPrevious",cond:"shouldCleanup"},{target:"#submitting"}]}},validationFailed:{id:"validationFailed"},deletingPrevious:{invoke:{src:"cleanup",onDone:{target:"#submitting",actions:["clearPreviouslyCreatedIntegration","notifyIntegrationCleanup"]},onError:[{target:"#failure",cond:"shouldErrorOnFailedCleanup",actions:["storeServerErrors","notifyIntegrationCleanupFailed"]},{target:"#submitting"}]}},submitting:{id:"submitting",invoke:{src:"save",onDone:{target:"success",actions:["storePreviouslyCreatedIntegration"]},onError:{target:"failure",actions:["storeServerErrors"]}}},success:{entry:["notifyIntegrationCreated"],always:[{target:"resetting",cond:"shouldReset"}]},failure:{id:"failure",on:{RETRY:[{target:"deletingPrevious",cond:"shouldCleanup"},{target:"submitting"}]}},resetting:{entry:["resetValues"],always:{target:"untouched"}}}},{actions:{storeClientErrors:ft.actions.assign(((e,t)=>"data"in t&&"errors"in t.data?{errors:{fields:t.data.errors,general:null}}:{})),storeServerErrors:ft.actions.assign(((e,t)=>"data"in t&&t.data instanceof IntegrationError?{errors:{...t.data instanceof NamingCollisionError?{fields:{integrationName:[t.data]}}:{fields:{}},...t.data instanceof NamingCollisionError?{general:null}:{general:t.data}}}:{})),clearErrors:ft.actions.assign(((e,t)=>({errors:null}))),storePreviouslyCreatedIntegration:ft.actions.assign(((e,t)=>!("data"in t)||t.data instanceof IntegrationError?{}:{previouslyCreatedIntegration:e.fields})),clearPreviouslyCreatedIntegration:ft.actions.assign(((e,t)=>"data"in t&&"previouslyCreatedIntegration"in e?{previouslyCreatedIntegration:void 0}:{})),storeFields:ft.actions.assign(((e,t)=>{if("UPDATE_FIELDS"===t.type){const[n]=Ft(e,t);return n}return{}})),resetValues:ft.actions.assign(((e,t)=>({fields:vt.fields,touchedFields:vt.touchedFields,errors:null})))},guards:{shouldValidateInitialContext:e=>!yt()(vt.fields,e.fields),fieldsMatchPreviouslyCreated:e=>yt()(e.fields,e.previouslyCreatedIntegration),shouldCleanup:e=>!0===e.options.deletePrevious&&void 0!==e.previouslyCreatedIntegration,shouldErrorOnFailedCleanup:e=>!0===e.options.errorOnFailedCleanup,shouldReset:e=>!0===e.options.resetOnCreation}}))(e).withConfig({services:{validateFields:Et({integrationName:[St(a.i18n.translate("customIntegrationsPackage.validations.integrationName.requiredError",{defaultMessage:"An integration name is required."})),wt(a.i18n.translate("customIntegrationsPackage.validations.integrationName.lowerCaseError",{defaultMessage:"An integration name should be lowercase."})),kt(a.i18n.translate("customIntegrationsPackage.validations.integrationName.characterLimitError",{defaultMessage:"An integration name should be less than 100 characters."}),100)],datasets:(n={name:[St(a.i18n.translate("customIntegrationsPackage.validations.datasets.requiredError",{defaultMessage:"A dataset name is required."})),wt(a.i18n.translate("customIntegrationsPackage.validations.datasets.lowerCaseError",{defaultMessage:"A dataset name should be lowercase."})),kt(a.i18n.translate("customIntegrationsPackage.validations.datasets.characterLimitError",{defaultMessage:"A dataset name should be less than 100 characters."}),100)]},e=>{const t=e.reduce(((e,t,i)=>{const r=It(n,t);return{...e,...Object.keys(r).length>0?{[i]:r}:{}}}),{});return Object.keys(t).length>0?t:null})}),save:e=>t.createCustomIntegration({...e.fields,datasets:e.fields.datasets.map((t=>({...t,name:$t(t.name,e.fields.integrationName)?Bt(t.name,e.fields.integrationName):t.name})))}),cleanup:e=>t.deleteCustomIntegration({integrationName:e.previouslyCreatedIntegration.integrationName,version:"1.0.0"})},actions:{notifyIntegrationCreated:gt(ft.SpecialTargets.Parent)(Ct),notifyIntegrationCleanup:gt(ft.SpecialTargets.Parent)(At),notifyIntegrationCleanupFailed:gt(ft.SpecialTargets.Parent)(Tt),notifyInitialized:gt(ft.SpecialTargets.Parent)(Pt)}});var n})({integrationsClient:t,initialContext:"create"===i.mode&&i.context?(e=>{const t={...vt,...e||{},options:{...vt.options,...null!=e&&e.options?e.options:{}}},n=e.fields?Ft(t,{type:"UPDATE_FIELDS",fields:Gt(e.fields)})[0]:{};return{...t,...n}})(i.context):vt})},actions:{notifyIntegrationCreated:n.notify(((e,t)=>t)),notifyIntegrationCleanup:n.notify(((e,t)=>t)),notifyIntegrationCleanupFailed:n.notify(((e,t)=>t))}});var Wt=n(28),Kt=n(88),qt=n(47);const Ht=([e,...t])=>{if(void 0===e)return[];if(e.type instanceof jt.IntersectionType){const[,...e]=t;return Ht(e)}if(e.type instanceof jt.UnionType){const[,...n]=t;return[e.key,...Ht(n)]}return[e.key,...Ht(t)]},Yt=e=>new Error(e),Jt=(e,t=Yt)=>n=>Object(Mt.pipe)(e.decode(n),Object(Kt.fold)((e=>t=>{throw e((e=>`Failed to validate: \n${e.map((e=>`  ${(e=>{var t;return null!==(t=e.message)&&void 0!==t?t:`in ${Ht(e.context).join("/")}: ${JSON.stringify(e.value)} does not match expected type ${(({context:e})=>{var t,n,i;return null!==(t=null===(n=e[e.length-1])||void 0===n||null===(i=n.type)||void 0===i?void 0:i.name)&&void 0!==t?t:"unknown"})(e)}`})(e)}`)).join("\n")}`)(t))})(t),qt.identity)),Xt=a.i18n.translate("customIntegrationsPackage.genericCreateError",{defaultMessage:"Unable to create an integration"}),Qt=a.i18n.translate("customIntegrationsPackage.genericDeleteError",{defaultMessage:"Unable to delete integration"}),Zt=Wt.EPM_API_ROUTES.CUSTOM_INTEGRATIONS_PATTERN,en=Wt.EPM_API_ROUTES.DELETE_PATTERN;class integrations_client_IntegrationsClient{constructor(e){this.http=e}async createCustomIntegration(e){try{const t=await this.http.post(Zt,{version:"2023-10-31",body:JSON.stringify(e)}),n=Jt(nn,(e=>new DecodeError(`Failed to decode create custom integration response: ${e}"`)))(t);return{integrationName:e.integrationName,datasets:e.datasets,installedAssets:n.items}}catch(e){var t,n,i,r,a,o,s,l;if(409===(null==e||null===(t=e.body)||void 0===t?void 0:t.statusCode))throw new NamingCollisionError(null!==(i=null===(r=e.body)||void 0===r?void 0:r.message)&&void 0!==i?i:Xt);if(403===(null==e||null===(n=e.body)||void 0===n?void 0:n.statusCode))throw new AuthorizationError(null!==(a=null==e||null===(o=e.body)||void 0===o?void 0:o.message)&&void 0!==a?a:Xt);if(e instanceof DecodeError)throw e;throw new UnknownError(null!==(s=null==e||null===(l=e.body)||void 0===l?void 0:l.message)&&void 0!==s?s:Xt)}}async deleteCustomIntegration(e){const{integrationName:t,version:n}=e;try{return await this.http.delete(en.replace("{pkgName}",t).replace("{pkgVersion}",n),{version:"2023-10-31"}),{integrationName:e.integrationName}}catch(e){var i,r,a;if(null!=e&&null!==(i=e.body)&&void 0!==i&&i.message&&e.body.message.includes("is not installed"))throw new IntegrationNotInstalledError(e.body.message);throw new UnknownError(null!==(r=null==e||null===(a=e.body)||void 0===a?void 0:a.message)&&void 0!==r?r:Qt)}}}const tn=jt.array(jt.type({id:jt.string,type:jt.string})),nn=jt.exact(jt.type({items:tn})),rn=(jt.type({integrationName:jt.string,version:jt.string}),jt.exact(jt.type({integrationName:xt})),()=>((e=!0)=>{const t=e?new bt.ReplaySubject(1):new bt.Subject;return{createService:()=>t.asObservable(),notify:e=>(n,i)=>{const r=e(n,i);null!=r&&t.next(r)}}})(!1)),[an,on]=pt()((({services:e,useDevTools:t=!1,onIntegrationCreation:n,onIntegrationCleanup:i,onIntegrationCleanupFailed:r,initialState:a})=>{const{http:o}=e;if(!o)throw new Error("Please ensure the HTTP service from Core is provided to the useCustomIntegrations Provider");const[s]=Object(c.useState)((()=>new integrations_client_IntegrationsClient(o))),[l]=Object(c.useState)((()=>rn())),[u]=Object(c.useState)((()=>l.createService()));return Object(c.useEffect)((()=>{const e=u.subscribe((e=>{"INTEGRATION_CREATED"===e.type&&n?n(e.fields):"INTEGRATION_CLEANUP"===e.type&&i?i(e.integrationName):"INTEGRATION_CLEANUP_FAILED"===e.type&&r&&r(e.error)}));return()=>e.unsubscribe()}),[u,i,r,n]),Object(ut.useInterpret)((()=>Vt({integrationsClient:s,customIntegrationsNotificationsChannel:l,initialState:a})),{devTools:t})})),sn=e=>e&&e.matches("valid"),ln=e=>e&&e.matches("submitting"),cn=e=>!e||e.matches("uninitialized"),un=e=>e&&e.matches("failure"),dn=()=>{const e=on(),[t,n]=Object(ut.useActor)(e);return{customIntegrationsState:t,customIntegrationsPageSend:n,customIntegrationsStateService:e}},pn=e=>e&&e.matches({create:"initialized"}),fn=a.i18n.translate("customIntegrationsPackage.create.button.submitting",{defaultMessage:"Creating integration..."}),gn=a.i18n.translate("customIntegrationsPackage.create.button.continue",{defaultMessage:"Continue"}),bn=({machine:e,isDisabled:t=!1,onClick:n,submittingText:i=fn,continueText:r=gn,testSubj:a})=>{const[,o]=Object(ut.useActor)(e),s=Object(c.useCallback)((()=>{n&&n(),o({type:"SAVE"})}),[n,o]),l=Object(ut.useSelector)(e,sn),u=Object(ut.useSelector)(e,ln);return Object(x.jsx)(hn,{onClick:s,isValid:l,isSubmitting:u,isDisabled:t,submittingText:i,continueText:r,testSubj:a})},hn=({onClick:e,isValid:t,isSubmitting:n,isDisabled:r,submittingText:a,continueText:o,testSubj:s})=>Object(x.jsx)(i.EuiButton,{"data-test-subj":s,color:"primary",fill:!0,onClick:e,isLoading:n,isDisabled:r||!t},n?a:o),vn=({isDisabled:e,onClick:t,testSubj:n="customIntegrationsPackageConnectedButton"})=>{const{customIntegrationsStateService:i,customIntegrationsState:r}=dn();return Object(ut.useSelector)(i,pn)?Object(x.jsx)(bn,{machine:r.children.createCustomIntegration,isDisabled:e,onClick:t,testSubj:n}):null},mn=a.i18n.translate("customIntegrationsPackage.create.errorCallout.title",{defaultMessage:"Sorry, there was an error"}),yn=a.i18n.translate("customIntegrationsPackage.create.errorCallout.retryText",{defaultMessage:"Retry"}),jn=({error:e,onRetry:t,testSubjects:n})=>{if(e instanceof AuthorizationError){const e=a.i18n.translate("customIntegrationsPackage.create.errorCallout.authorization.description",{defaultMessage:"This user does not have permissions to create an integration."});return Object(x.jsx)(xn,{message:e,onRetry:t,testSubjects:n})}return e instanceof UnknownError||e instanceof IntegrationNotInstalledError?Object(x.jsx)(xn,{message:e.message,onRetry:t,testSubjects:n}):null},xn=({message:e,onRetry:t,testSubjects:n})=>{var r,a;return Object(x.jsx)(i.EuiCallOut,{title:mn,color:"danger",iconType:"error","data-test-subj":null!==(r=null==n?void 0:n.callout)&&void 0!==r?r:"customIntegrationsPackageCreateFormErrorCallout"},Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)("p",null,e),t?Object(x.jsx)(i.EuiButton,{"data-test-subj":null!==(a=null==n?void 0:n.retryButton)&&void 0!==a?a:"customIntegrationsPackageCreateFormErrorCalloutRetryButton",color:"danger",size:"s",onClick:t},yn):null))},On=({machineRef:e,testSubjects:t})=>{const[n,i]=Object(ut.useActor)(e),r=Object(c.useCallback)((e=>{i({type:"UPDATE_FIELDS",fields:{integrationName:e}})}),[i]),a=Object(c.useCallback)((e=>{i({type:"UPDATE_FIELDS",fields:{datasets:[{type:"logs",name:e}]}})}),[i]),o=Object(c.useCallback)((()=>{i({type:"RETRY"})}),[i]),s=Object(ut.useSelector)(e,un);return Object(x.jsx)(_n,{integrationName:null==n?void 0:n.context.fields.integrationName,datasetName:null==n?void 0:n.context.fields.datasets[0].name,errors:n.context.errors,updateIntegrationName:r,updateDatasetName:a,touchedFields:null==n?void 0:n.context.touchedFields,hasFailed:s,onRetry:s?o:void 0,testSubjects:t})},_n=({integrationName:e,datasetName:t,errors:n,touchedFields:r,updateIntegrationName:o,updateDatasetName:s,onRetry:l,testSubjects:c})=>{var d,p,f,g,b,h,v,m,y,j,O,_,E;return Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,a.i18n.translate("customIntegrationsPackage.create.configureIntegrationDescription",{defaultMessage:"Configure integration"}),Object(x.jsx)(i.EuiSpacer,{size:"xs"}),Object(x.jsx)(i.EuiText,{size:"xs",color:"subdued"},a.i18n.translate("customIntegrationsPackage.create.configureIntegrationDescription.helper",{defaultMessage:"Elastic creates an integration to streamline connecting your log data to the Elastic Stack."})))),Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(i.EuiForm,{fullWidth:!0},Object(x.jsx)(i.EuiFormRow,{label:Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1},a.i18n.translate("customIntegrationsPackage.create.integration.name",{defaultMessage:"Integration name"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIconTip,{content:a.i18n.translate("customIntegrationsPackage.create.integration.name.tooltip",{defaultMessage:"The name of the integration that will be created to organize your custom logs."}),position:"right"}))),helpText:a.i18n.translate("customIntegrationsPackage.create.integration.helper",{defaultMessage:"All lowercase, max 100 chars, special characters will be replaced with '_'."}),isInvalid:En(null==n||null===(d=n.fields)||void 0===d?void 0:d.integrationName)&&r.integrationName,error:Sn(null==n||null===(p=n.fields)||void 0===p?void 0:p.integrationName)},Object(x.jsx)(i.EuiFieldText,{placeholder:a.i18n.translate("customIntegrationsPackage.create.integration.placeholder",{defaultMessage:"Give your integration a name"}),value:e,onChange:e=>o(e.target.value),isInvalid:En(null==n||null===(f=n.fields)||void 0===f?void 0:f.integrationName)&&r.integrationName,max:100,"data-test-subj":null!==(g=null==c?void 0:c.integrationName)&&void 0!==g?g:"customIntegrationsPackageCreateFormIntegrationNameInput"})),Object(x.jsx)(i.EuiFormRow,{label:Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1},a.i18n.translate("customIntegrationsPackage.create.dataset.name",{defaultMessage:"Dataset name"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIconTip,{content:a.i18n.translate("customIntegrationsPackage.create.dataset.name.tooltip",{defaultMessage:"The name of the dataset associated with this integration. This will be part of the Elasticsearch data stream name "}),position:"right"}))),helpText:[a.i18n.translate("customIntegrationsPackage.create.dataset.helper",{defaultMessage:"All lowercase, max 100 chars, special characters will be replaced with '_'."}),$t(t,e)?a.i18n.translate("customIntegrationsPackage.create.dataset.name.tooltipPrefixMessage",{defaultMessage:"This name will be prefixed with {prefixValue}, e.g. {prefixedDatasetName}",values:{prefixValue:Ut(e),prefixedDatasetName:Bt(t,e)}}):""].join(" "),isInvalid:En(null==n||null===(b=n.fields)||void 0===b||null===(h=b.datasets)||void 0===h||null===(v=h[0])||void 0===v?void 0:v.name)&&r.datasets,error:Sn(null==n||null===(m=n.fields)||void 0===m||null===(y=m.datasets)||void 0===y||null===(j=y[0])||void 0===j?void 0:j.name)},Object(x.jsx)(i.EuiFieldText,{placeholder:a.i18n.translate("customIntegrationsPackage.create.dataset.placeholder",{defaultMessage:"Give your integration's dataset a name"}),value:t,onChange:e=>s(e.target.value),isInvalid:En(null==n||null===(O=n.fields)||void 0===O||null===(_=O.datasets)||void 0===_?void 0:_[0].name)&&r.datasets,max:100,"data-test-subj":null!==(E=null==c?void 0:c.datasetName)&&void 0!==E?E:"customIntegrationsPackageCreateFormDatasetNameInput"}))),(null==n?void 0:n.general)&&Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(jn,{error:null==n?void 0:n.general,onRetry:l,testSubjects:null==c?void 0:c.errorCallout})))},En=e=>e&&e.length>0,Sn=e=>En(e)?Object(x.jsx)("ul",null,e.map(((e,t)=>Object(x.jsx)("li",{key:t},e.message)))):null,wn=({testSubjects:e})=>{const{customIntegrationsState:t,customIntegrationsStateService:n}=dn();return Object(ut.useSelector)(n,pn)?Object(x.jsx)(On,{machineRef:t.children.createCustomIntegration,testSubjects:null==e?void 0:e.create}):null};function kn(e){const{euiTheme:t}=Object(i.useEuiTheme)(),{label:n,children:r,helpText:o}=e;return Object(x.jsx)(i.EuiFormRow,{css:Object(x.css)({".euiFormLabel":{width:"100%"},".euiFormLabel > .euiFlexGroup > div:last-of-type":{fontWeight:"normal",color:t.colors.subduedText}},"",""),label:Object(x.jsx)(i.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},n),Object(x.jsx)(i.EuiFlexItem,{grow:!1},a.i18n.translate("xpack.observability_onboarding.form.optional",{defaultMessage:"Optional"}))),helpText:o},r)}const In=e=>{if(!e)return"";const t=e.replace(/^.*[\\\/](?!\d*$)/g,"").split(".");return Cn(t[0])},Cn=e=>e.replaceAll(/[^a-zA-Z0-9_]/g,"_"),An={create:{integrationName:"obltOnboardingCustomLogsIntegrationsName",datasetName:"obltOnboardingCustomLogsDatasetName",errorCallout:{callout:"obltOnboardingCustomIntegrationErrorCallout"}},button:"obltOnboardingCustomLogsContinue"};function Tn(){const{dispatchableEvents:{updateCreateFields:e}}=(()=>{const{customIntegrationsState:e}=dn(),t=(({machineRef:e})=>{const[,t]=Object(ut.useActor)(e),n=Object(ut.useSelector)(e,sn),i=Object(ut.useSelector)(e,cn);return Object(c.useMemo)((()=>({saveCreateFields:n?()=>t({type:"SAVE"}):void 0,updateCreateFields:i?void 0:e=>t({type:"UPDATE_FIELDS",fields:e})})),[i,n,t])})({machineRef:e.children.createCustomIntegration});return{mode:e.context.mode,dispatchableEvents:t}})(),{euiTheme:t}=Object(i.useEuiTheme)(),n=Object(i.useEuiFontSize)("xs").fontSize,{getState:r,setState:o}=Rn(),s=r(),[l,d]=Object(c.useState)(s.serviceName),[p,f]=Object(c.useState)(s.logFilePaths),[g,b]=Object(c.useState)(s.namespace),[h,v]=Object(c.useState)(s.customConfigurations),m=p.every((e=>!e)),y=Object(c.useCallback)((()=>{o((e=>({...e,serviceName:l,logFilePaths:p.filter((e=>!!e)),namespace:g,customConfigurations:h})))}),[h,p,g,l,o]);return Object(x.jsx)(qe,{title:a.i18n.translate("xpack.observability_onboarding.configureLogsContent.stepModal.collectCustomLogsLabel",{defaultMessage:"Collect custom logs"}),panelFooter:[Object(x.jsx)(vn,{isDisabled:m||!g,onClick:y,testSubj:An.button})]},Object(x.jsx)(i.EuiForm,{fullWidth:!0},Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.configureLogs.description",{defaultMessage:"Configure inputs"}))),Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(i.EuiFormRow,{label:a.i18n.translate("xpack.observability_onboarding.configureLogs.logFile.path",{defaultMessage:"Log file path"}),helpText:a.i18n.translate("xpack.observability_onboarding.configureLogs.logFile.helperText",{defaultMessage:"You can use a file path or pattern."})},Object(x.jsx)(u.a.Fragment,null,p.map(((t,n)=>Object(x.jsx)("div",{key:n,"data-test-subj":`obltOnboardingLogFilePath-${n}`},n>0&&Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiFieldText,{"data-test-subj":"observabilityOnboardingConfigureLogsFieldText",placeholder:a.i18n.translate("xpack.observability_onboarding.configureLogs.logFile.placeholder",{defaultMessage:"Example: /var/log/application.*"}),value:t,onChange:t=>function(t,n){var i;const r=null===(i=n.currentTarget)||void 0===i?void 0:i.value;f((e=>e.map(((e,n)=>n===t?r:e)))),0===t&&e&&e({integrationName:In(r).toLowerCase(),datasets:[{name:In(r).toLowerCase(),type:"logs"}]})}(n,t)})),n>0&&Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiButtonIcon,{iconType:"trash","aria-label":a.i18n.translate("xpack.observability_onboarding.configureLogsContent.euiButtonIcon.deleteLabel",{defaultMessage:"Delete"}),onClick:()=>function(e){f((t=>t.filter(((t,n)=>n!==e))))}(n),"data-test-subj":`obltOnboardingLogFilePathDelete-${n}`})))))))),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiFlexGroup,{alignItems:"flexStart",direction:"column",gutterSize:"xs"},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiButtonEmpty,{iconType:"plusInCircle",onClick:function(){f((e=>[...e,""]))},"data-test-subj":"obltOnboardingCustomLogsAddFilePath"},a.i18n.translate("xpack.observability_onboarding.configureLogs.logFile.addRow",{defaultMessage:"Add row"})))),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(kn,{label:Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1},a.i18n.translate("xpack.observability_onboarding.configureLogs.serviceName",{defaultMessage:"Service name"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIconTip,{content:a.i18n.translate("xpack.observability_onboarding.configureLogs.serviceName.tooltip",{defaultMessage:"Provide a service name to allow for distributed services running on multiple hosts to correlate the related instances."}),position:"right"}))),helpText:Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.configureLogs.serviceName.helper",defaultMessage:"Name the service your data is collected from."})},Object(x.jsx)(i.EuiFieldText,{placeholder:a.i18n.translate("xpack.observability_onboarding.configureLogs.serviceName.placeholder",{defaultMessage:"Give your service a name"}),value:l,onChange:e=>d(e.target.value),"data-test-subj":"obltOnboardingCustomLogsServiceName"})),Object(x.jsx)(i.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(i.EuiAccordion,{id:"advancedSettingsAccordion",css:Object(x.css)({".euiAccordion__buttonContent":{color:t.colors.primaryText,fontSize:n},".euiAccordion__arrow svg":{stroke:t.colors.primary,width:t.size.m,height:t.size.m}},"",""),buttonContent:a.i18n.translate("xpack.observability_onboarding.configureLogs.advancedSettings",{defaultMessage:"Advanced settings"}),"data-test-subj":"obltOnboardingCustomLogsAdvancedSettings"},Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(i.EuiFormRow,{label:Object(x.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1},a.i18n.translate("xpack.observability_onboarding.configureLogs.namespace",{defaultMessage:"Namespace"})),Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIconTip,{content:a.i18n.translate("xpack.observability_onboarding.configureLogs.namespace.tooltip",{defaultMessage:"Provide a namespace to customize the grouping of your logs. Defaults to the default namespace."}),position:"right"}))),helpText:Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.configureLogs.namespace.helper",defaultMessage:"This setting changes the name of the integration's data stream. {learnMoreLink}",values:{learnMoreLink:Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityOnboardingConfigureLogsLearnMoreLink",external:!0,target:"_blank",href:"https://www.elastic.co/guide/en/fleet/current/data-streams.html#data-streams-naming-scheme"},a.i18n.translate("xpack.observability_onboarding.configureLogs.learnMore",{defaultMessage:"Learn more"}))}})},Object(x.jsx)(i.EuiFieldText,{placeholder:a.i18n.translate("xpack.observability_onboarding.configureLogs.namespace.placeholder",{defaultMessage:"Namespace"}),value:g,onChange:e=>b(e.target.value),"data-test-subj":"obltOnboardingCustomLogsNamespace"})),Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(kn,{label:a.i18n.translate("xpack.observability_onboarding.configureLogs.customConfig",{defaultMessage:"Custom configurations"}),helpText:Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.configureLogs.customConfig.helper",defaultMessage:"Add YAML configuration options to your agent configuration. Be careful using this feature as it can break your configuration file. {learnMoreLink}",values:{learnMoreLink:Object(x.jsx)(i.EuiLink,{"data-test-subj":"observabilityOnboardingConfigureLogsLearnMoreLink",external:!0,target:"_blank",href:"https://www.elastic.co/guide/en/beats/filebeat/current/multiline-examples.html"},a.i18n.translate("xpack.observability_onboarding.configureLogs.learnMore",{defaultMessage:"Learn more"}))}})},Object(x.jsx)(i.EuiTextArea,{value:h,onChange:e=>v(e.target.value),"data-test-subj":"obltOnboardingCustomLogsCustomConfig"}))),Object(x.jsx)(i.EuiSpacer,{size:"l"}),Object(x.jsx)(wn,{testSubjects:An})))}const Pn=()=>{const e=Object(B.useNavigate)(),t=Object(B.useLocation)();return Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiButtonEmpty,{"data-test-subj":"observabilityOnboardingFlowBackToSelectionButton",iconType:"arrowLeft",flush:"left",onClick:()=>e(`../${t.search}`)},a.i18n.translate("xpack.observability_onboarding.experimentalOnboardingFlow.button.backToSelectionLabel",{defaultMessage:"Back to selection"})),Object(x.jsx)(i.EuiSpacer,{size:"m"}))};function Mn({apiKeyEncoded:e,onboardingId:t}){return Boolean(e&&t)}const Ln={incomplete:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.logsIngest.incompleteTitle",{defaultMessage:"Ship logs to Elastic Observability"}),loading:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.logsIngest.loadingTitle",{defaultMessage:"Waiting for logs to be shipped..."}),completed:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.progress.logsIngest.completedTitle",{defaultMessage:"Logs are being shipped!"})},Fn={configureLogs:{component:function(){const{services:{http:e}}=Object(o.useKibana)(),{goToStep:t,setState:n,getState:i}=Rn(),{integrationName:r,datasetName:a,lastCreatedIntegrationOptions:s}=i();return Object(x.jsx)(an,{services:{http:e},onIntegrationCreation:e=>{const{integrationName:i,datasets:r}=e;n((t=>({...t,integrationName:i,datasetName:r[0].name,lastCreatedIntegrationOptions:e}))),t("installElasticAgent")},initialState:{mode:"create",context:{options:{deletePrevious:!0,resetOnCreation:!1,errorOnFailedCleanup:!1},...void 0!==r&&void 0!==a?{fields:{integrationName:r,datasets:[{name:a,type:"logs"}]}}:{},previouslyCreatedIntegration:s}}},Object(x.jsx)(Tn,null))}},installElasticAgent:{component:function(){var e,t,n,r,s,l,d;const{services:{share:p}}=Object(o.useKibana)(),f=p.url.locators.get(De.c),{getState:g,setState:b}=Rn(),h=g(),{integrationName:v,datasetName:m,autoDownloadConfig:y}=h,[j,O]=Object(c.useState)("linux-tar"),_=null!==(e=v===m?m:`${v}.${m}`)&&void 0!==e?e:"",{data:E,status:S}=Object(ze.b)((e=>{if(!Mn(g()))return e("GET /internal/observability_onboarding/logs/setup/privileges")}),[]),{data:w}=Object(ze.b)((e=>e("GET /internal/observability_onboarding/logs/setup/environment")),[]),{data:k,status:I,error:C}=Object(ze.b)((e=>{const{datasetName:t,serviceName:n,namespace:i,customConfigurations:r,logFilePaths:a}=g();if(!Mn(g())&&null!=E&&E.hasPrivileges&&t)return e("POST /internal/observability_onboarding/logs/flow",{params:{body:{name:t,type:"logFiles",state:{datasetName:t,serviceName:n,namespace:i,customConfigurations:r,logFilePaths:a}}}})}),[null==E?void 0:E.hasPrivileges]),{status:A}=Object(ze.b)((e=>{const{onboardingId:t,datasetName:n,serviceName:i,namespace:r,customConfigurations:a,logFilePaths:o}=g();if(t)return e("PUT /internal/observability_onboarding/flow/{onboardingId}",{params:{path:{onboardingId:t},body:{state:{datasetName:n,serviceName:i,namespace:r,customConfigurations:a,logFilePaths:o}}}})}),[]),{apiKeyEncoded:T,onboardingId:P}=null!=k?k:g(),M=A===ze.a.SUCCESS,{data:L="",status:F}=Object(ze.b)((e=>{if(T&&P)return e("GET /internal/observability_onboarding/elastic_agent/config",{headers:{authorization:`ApiKey ${T}`},params:{query:{onboardingId:P}}})}),[T,P,M]);Object(c.useEffect)((()=>{b((e=>({...e,onboardingId:P,apiKeyEncoded:T})))}),[P,T]);const{data:N,status:R,refetch:D}=Object(ze.b)((e=>{if(P)return e("GET /internal/observability_onboarding/flow/{onboardingId}/progress",{params:{path:{onboardingId:P}}})}),[P]),z=R===ze.a.SUCCESS;Object(c.useEffect)((()=>{z&&setTimeout((()=>{D()}),2e3)}),[z,D]),it(null==N?void 0:N.progress,"custom_logs");const U=Object(c.useCallback)((()=>{const e=null==N?void 0:N.progress;if(e){var t;const n=null==e||null===(t=e["logs-ingest"])||void 0===t?void 0:t.status;return{title:"loading"===n?Ln.loading:"complete"===n?Ln.completed:Ln.incomplete,status:n,"data-test-subj":"obltOnboardingCheckLogsStep"}}return{title:Ln.incomplete,status:"incomplete"}}),[null==N?void 0:N.progress]),$=void 0!==(null==N?void 0:N.progress["ea-download"]),B="complete"===(null==N||null===(t=N.progress)||void 0===t||null===(n=t["ea-status"])||void 0===n?void 0:n.status),G=null!==(r=null==N||null===(s=N.progress)||void 0===s||null===(l=s["ea-config"])||void 0===l?void 0:l.status)&&void 0!==r?r:"incomplete";return Object(x.jsx)(qe,{panelFooter:[Object(x.jsx)(i.EuiButton,{"data-test-subj":"obltOnboardingExploreLogs",color:"success",fill:!0,iconType:"magnifyWithPlus",onClick:async function(){await f.navigate({integration:v,dataset:_,origin:{id:"application-log-onboarding"}})}},a.i18n.translate("xpack.observability_onboarding.steps.exploreLogs",{defaultMessage:"Explore logs"}))]},Object(x.jsx)(i.EuiText,{color:"subdued"},Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.installElasticAgent.description",{defaultMessage:"To collect the data from your system and stream it to Elastic, you first need to install a shipping tool on the machine generating the logs. In this case, the shipping tool is an agent developed by Elastic."}))),Object(x.jsx)(i.EuiSpacer,{size:"m"}),v&&Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiCallOut,{title:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.integrationSuccessCallout.title",{defaultMessage:"{integrationName} integration installed.",values:{integrationName:v}}),color:"success",iconType:"check","data-test-subj":"obltOnboardingCustomIntegrationInstalled"}),Object(x.jsx)(i.EuiSpacer,{size:"m"})),T&&P?Object(x.jsx)(Je.a,{payload:{apiKeyEncoded:T,onboardingId:P},hasPrivileges:!0,status:ze.a.SUCCESS}):S!==ze.a.NOT_INITIATED&&S!==ze.a.LOADING&&Object(x.jsx)(Je.a,{payload:k,hasPrivileges:null==E?void 0:E.hasPrivileges,status:I,error:C}),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(Ve,{installAgentPlatformOptions:[{label:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform.linux",{defaultMessage:"Linux"}),id:"linux-tar"},{label:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform.macOS",{defaultMessage:"MacOS"}),id:"macos"},{label:a.i18n.translate("xpack.observability_onboarding.installElasticAgent.installStep.choosePlatform.windows",{defaultMessage:"Windows"}),id:"windows",disableSteps:!0,children:Object(x.jsx)(Ye,{docsLink:"https://www.elastic.co/guide/en/observability/current/logs-stream.html"})}],onSelectPlatform:e=>O(e),selectedPlatform:j,installAgentCommand:Ue({elasticAgentPlatform:j,apiKeyEncoded:T,apiEndpoint:null==w?void 0:w.apiEndpoint,scriptDownloadUrl:null==w?void 0:w.scriptDownloadUrl,elasticAgentVersion:null==w?void 0:w.elasticAgentVersion,autoDownloadConfig:y,onboardingId:P}),autoDownloadConfig:y,onToggleAutoDownloadConfig:function(){b((e=>({...e,autoDownloadConfig:!e.autoDownloadConfig})))},installAgentStatus:I===ze.a.LOADING?"loading":B?"complete":"current",showInstallProgressSteps:$,installProgressSteps:null!==(d=null==N?void 0:N.progress)&&void 0!==d?d:{},configureAgentStatus:F===ze.a.LOADING?"loading":G,configureAgentYaml:L,appendedSteps:[U()]}),Object(x.jsx)(i.EuiHorizontalRule,null),Object(x.jsx)(He,null))},title:a.i18n.translate("xpack.observability_onboarding.customLogs.installShipper.title",{defaultMessage:"Install shipper to collect logs"})},inspect:{component:function(){const{getState:e,getPath:t,getUsage:n}=Rn();return Object(x.jsx)(qe,{title:a.i18n.translate("xpack.observability_onboarding.inspect.stepPanel.inspectWizardLabel",{defaultMessage:"Inspect wizard"}),panelFooter:[Object(x.jsx)(Pn,null)]},Object(x.jsx)(i.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,a.i18n.translate("xpack.observability_onboarding.inspect.h3.stateLabel",{defaultMessage:"State"}))),Object(x.jsx)("pre",null,JSON.stringify(e(),null,4)),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(be.FormattedMessage,{id:"xpack.observability_onboarding.inspect.h3.pathLabel",defaultMessage:"Path"}))),Object(x.jsx)("pre",null,JSON.stringify(t(),null,4)),Object(x.jsx)(i.EuiSpacer,{size:"m"}),Object(x.jsx)(i.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,a.i18n.translate("xpack.observability_onboarding.inspect.h3.usageLabel",{defaultMessage:"Usage"}))),Object(x.jsx)("pre",null,JSON.stringify(n(),null,4)))}}},{Provider:Nn,useWizard:Rn,routes:Dn}=Re({initialState:{integrationName:void 0,datasetName:void 0,serviceName:"",logFilePaths:[""],namespace:"default",customConfigurations:"",elasticAgentPlatform:"linux-tar",autoDownloadConfig:!1,apiKeyEncoded:"",onboardingId:""},initialStep:"configureLogs",steps:Fn,basePath:"/customLogs"}),zn=()=>Object(x.jsx)(Nn,null,Object(x.jsx)(i.EuiPanel,{hasBorder:!0},Object.keys(Dn).map((e=>{const t=e,{handler:n,exact:i}=Dn[t];return Object(x.jsx)(te,{key:t,path:t,exact:i,component:n})}))));var Un=n(95);function $n(e){const t="auto_detect.sh";return Bn`
    curl ${e.scriptDownloadUrl} -so ${t} &&
    sudo bash ${t}
      --id=${e.onboardingFlow.id}
      --kibana-url=${e.kibanaUrl}
      --install-key=${e.installApiKey}
      --ingest-key=${e.ingestApiKey}
      --ea-version=${e.elasticAgentVersion}
  `}function Bn(e,...t){return Object(J.flatten)(Object(J.zip)(e,t)).join("").replace(/\s+/g," ").trim()}var Gn=n(97),Vn=n.n(Gn),Wn=n(53),Kn=n.n(Wn);const qn=({iconType:e,isLoading:t=!0,title:n,color:r=(t?"primary":"success"),...a})=>Object(x.jsx)(i.EuiCallOut,l()({title:Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},t?Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiLoadingSpinner,{size:a.size})):e?Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIcon,{type:e,color:r,size:a.size})):null,Object(x.jsx)(i.EuiFlexItem,null,n)),color:r},a));var Hn={name:"1q4vxyr",styles:"margin-left:8px"},Yn={name:"16gw9zf",styles:"padding-left:36px;padding-bottom:24px"};const Jn=({title:e,iconType:t,children:n,...r})=>Object(x.jsx)(i.EuiAccordion,l()({},r,{buttonContent:Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1,css:Hn},Object(x.jsx)(i.EuiFlexItem,{grow:!1},Object(x.jsx)(i.EuiIcon,{type:t,size:"l"})),Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)(i.EuiTitle,{size:"xs",css:r.isDisabled?{color:"inherit"}:void 0},Object(x.jsx)("h3",null,e)))),buttonProps:{paddingSize:"l"},borders:"horizontal",paddingSize:"none"}),Object(x.jsx)("div",{css:Yn},n)),Xn=({error:e,onRetryClick:t})=>{var n;return 403===(null===(n=e.response)||void 0===n?void 0:n.status)?Object(x.jsx)(i.EuiEmptyPrompt,{color:"plain",iconType:"lock",title:Object(x.jsx)("h2",null,a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.h2.contactYourAdministratorForLabel",{defaultMessage:"Contact your administrator for access"})),body:Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.p.toInstallIntegrationsAndLabel",{defaultMessage:"To install integrations and ingest data, you need additional privileges."}))}):Object(x.jsx)(i.EuiEmptyPrompt,{color:"danger",iconType:"error",title:Object(x.jsx)("h2",null,a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.h2.unableToInitiateDataLabel",{defaultMessage:"Unable to load content"})),body:Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.p.thereWasAProblemLabel",{defaultMessage:"There was a problem loading the application. Retry or contact your administrator for help."})),actions:Object(x.jsx)(i.EuiButton,{color:"danger",iconType:"refresh",fill:!0,"data-test-subj":"observabilityOnboardingAutoDetectPanelGoBackButton",onClick:t},a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.backToSelectionButtonLabel",{defaultMessage:"Retry"}))})},Qn=({textToCopy:e,children:t,...n})=>Object(x.jsx)(i.EuiCopy,{textToCopy:e},(e=>Object(x.jsx)(i.EuiButton,l()({"data-test-subj":"observabilityOnboardingCopyToClipboardButton",iconType:"copyClipboard",onClick:e},n),null!=t?t:a.i18n.translate("xpack.observability_onboarding.copyToClipboardButton.copyToClipboardButtonLabel",{defaultMessage:"Copy to clipboard"})))),Zn=({locator:e,params:t,...n})=>{const{services:{share:r}}=Object(o.useKibana)(),a="string"==typeof e?r.url.locators.get(e):e;return Object(x.jsx)(i.EuiButtonEmpty,l()({"data-test-subj":"observabilityOnboardingLocatorButtonEmptyButton",href:null==a?void 0:a.useUrl(t)},n))},ei=()=>{const{services:{http:e}}=Object(o.useKibana)(),{status:t,data:n,error:r,refetch:s,installedIntegrations:l}=function(){var e;const{services:{fleet:t}}=Object(o.useKibana)(),{data:n,error:i,refetch:r}=Object(ze.b)((e=>e("POST /internal/observability_onboarding/flow",{params:{body:{name:"auto-detect"}}})),[],{showToastOnError:!1}),a=null==n?void 0:n.onboardingFlow.id,{data:s,status:l,refetch:c}=Object(ze.b)((e=>{if(a)return e("GET /internal/observability_onboarding/flow/{onboardingId}/progress",{params:{path:{onboardingId:a}}})}),[a]),u=function(e){var t,n;return e?"complete"===(null===(t=e.progress["logs-ingest"])||void 0===t?void 0:t.status)?"dataReceived":"loading"===(null===(n=e.progress["logs-ingest"])||void 0===n?void 0:n.status)?"awaitingData":Object.values(e.progress).some((e=>"incomplete"!==e.status))?"inProgress":"notStarted":"notStarted"}(s),d=function(e){var t,n;return null!==(t=null==e||null===(n=e.progress["install-integrations"])||void 0===n?void 0:n.payload)&&void 0!==t?t:[]}(s),p=Kn()((async()=>{if(0===d.length)return[];const e=await t.hooks.epm.getBulkAssets({assetIds:d.map((e=>e.kibanaAssets)).flat()});return d.map((t=>({...t,kibanaAssets:t.kibanaAssets.reduce(((t,n)=>{var i;const r=null===(i=e.data)||void 0===i?void 0:i.items.find((({id:e})=>e===n.id));return r&&t.push(r),t}),[])})))}),[d.length]);return Vn()(c,l===ze.a.SUCCESS&&"dataReceived"!==u?3e3:null),{data:n,error:i,refetch:r,status:u,installedIntegrations:null!==(e=p.value)&&void 0!==e?e:[]}}(),c=n?$n(n):void 0,d=Object(i.useGeneratedHtmlId)({prefix:"accordion"});if(r)return Object(x.jsx)(Xn,{error:r,onRetryClick:s});const p=l.filter((e=>"registry"===e.installSource)),f=l.filter((e=>"custom"===e.installSource));return Object(x.jsx)(i.EuiPanel,{hasBorder:!0,paddingSize:"xl"},Object(x.jsx)(i.EuiSteps,{steps:[{title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.runTheCommandOnLabel",{defaultMessage:"Run the command on your host"}),status:"notStarted"===t?"current":"complete",children:c?Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiText,null,Object(x.jsx)("p",null,a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.p.wellScanYourHostLabel",{defaultMessage:"We'll scan your host for logs and metrics, including:"}))),Object(x.jsx)(i.EuiSpacer,{size:"s"}),Object(x.jsx)(i.EuiFlexGroup,{gutterSize:"s"},["Apache","Docker","Nginx","System","Custom .log files"].map((e=>Object(x.jsx)(i.EuiFlexItem,{key:e,grow:!1},Object(x.jsx)(i.EuiBadge,{color:"hollow"},e))))),Object(x.jsx)(i.EuiSpacer,null),Object(x.jsx)(i.EuiCodeBlock,{paddingSize:"m",language:"text"},c),Object(x.jsx)(i.EuiSpacer,null),Object(x.jsx)(Qn,{textToCopy:c,fill:"notStarted"===t})):Object(x.jsx)(i.EuiSkeletonText,{lines:6})},{title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.visualizeYourDataLabel",{defaultMessage:"Visualize your data"}),status:"dataReceived"===t?"complete":"awaitingData"===t||"inProgress"===t?"current":"incomplete",children:Object(x.jsx)(u.a.Fragment,null,"dataReceived"===t?Object(x.jsx)(qn,{iconType:"cheer",title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.yourDataIsReadyToExploreLabel",{defaultMessage:"Your data is ready to explore!"}),isLoading:!1}):"awaitingData"===t?Object(x.jsx)(qn,{title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.installingElasticAgentFlexItemLabel",{defaultMessage:"Waiting for data to arrive..."})}):"inProgress"===t?Object(x.jsx)(qn,{title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.lookingForLogFilesFlexItemLabel",{defaultMessage:"Waiting for installation to complete..."})}):null,("awaitingData"===t||"dataReceived"===t)&&l.length>0?Object(x.jsx)(u.a.Fragment,null,Object(x.jsx)(i.EuiSpacer,null),p.map((n=>Object(x.jsx)(Jn,{key:n.pkgName,id:`${d}_${n.pkgName}`,iconType:"desktop",title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.h3.getStartedWithNginxLabel",{defaultMessage:"Get started with {title} logs",values:{title:n.title}}),isDisabled:"dataReceived"!==t,initialIsOpen:!0},Object(x.jsx)(i.EuiFlexGroup,{responsive:!1},Object(x.jsx)(i.EuiFlexItem,{grow:!1},"dataReceived"===t?Object(x.jsx)(i.EuiImage,{src:e.staticAssets.getPluginAssetHref("charts_screen.svg"),width:162,height:117,alt:"",hasShadow:!0}):Object(x.jsx)(i.EuiSkeletonRectangle,{width:162,height:117})),Object(x.jsx)(i.EuiFlexItem,null,Object(x.jsx)("ul",null,n.kibanaAssets.filter((e=>"dashboard"===e.type)).map((e=>Object(x.jsx)("li",{key:e.id},Object(x.jsx)(Zn,{locator:"DASHBOARD_APP_LOCATOR",params:{dashboardId:e.id},target:"_blank",iconType:"dashboardApp",isDisabled:"dataReceived"!==t,flush:"left",size:"s"},e.attributes.title)))))))))),f.length>0&&Object(x.jsx)(Jn,{id:`${d}_custom`,iconType:"documents",title:a.i18n.translate("xpack.observability_onboarding.autoDetectPanel.h3.getStartedWithlogLabel",{defaultMessage:"Get started with custom .log files"}),isDisabled:"dataReceived"!==t,initialIsOpen:!0},Object(x.jsx)("ul",null,f.map((e=>e.dataStreams.map((n=>Object(x.jsx)("li",{key:`${e.pkgName}/${n.dataset}`},Object(x.jsx)(Zn,{locator:De.c,params:{integration:e.pkgName,dataset:n.dataset},target:"_blank",iconType:"document",isDisabled:"dataReceived"!==t,flush:"left",size:"s"},e.pkgName))))))))):null)}]}))},ti=new Y.QueryClient;var ni={name:"vxd0go",styles:"border-radius:0px;border-left:none;border-bottom:none;border-right:none"},ii={name:"fa61i",styles:"padding-inline:0px"},ri={name:"12p9u5l",styles:"padding-top:0px!important"};function ai(){const{pathname:e}=Object(B.useLocation)();return Object(c.useEffect)((()=>{window.scrollTo(0,0)}),[e]),Object(x.jsx)(Y.QueryClientProvider,{client:ti},Object(x.jsx)(i.EuiPageTemplate,{css:ri},Object(x.jsx)(i.EuiPageTemplate.Section,{paddingSize:"xl",css:Object(x.css)("&>div{background-image:url(",ae.a,");background-position:right center;background-repeat:no-repeat;}",""),grow:!1,restrictWidth:!0},Object(x.jsx)(i.EuiSpacer,{size:"xl"}),Object(x.jsx)(Fe,null)),Object(x.jsx)(i.EuiPageTemplate.Section,{paddingSize:"xl",color:"subdued",restrictWidth:!0},Object(x.jsx)(ie,null,Object(x.jsx)(te,{path:"/auto-detect"},Object(x.jsx)(Pn,null),Object(x.jsx)(ei,null)),Object(x.jsx)(te,{path:"/systemLogs"},Object(x.jsx)(Pn,null),Object(x.jsx)(ct,null)),Object(x.jsx)(te,{path:"/customLogs"},Object(x.jsx)(Pn,null),Object(x.jsx)(zn,null)),Object(x.jsx)(te,{path:"/otel-logs"},Object(x.jsx)(Pn,null),Object(x.jsx)(Un.a,null)),Object(x.jsx)(te,null,Object(x.jsx)(Te,null))),Object(x.jsx)(i.EuiSpacer,{size:"xl"})),Object(x.jsx)(i.EuiPageTemplate.Section,{contentProps:{css:{paddingBlock:0}},css:ii},Object(x.jsx)(i.EuiPanel,{hasBorder:!0,css:ni},Object(x.jsx)(ge,null),Object(x.jsx)(i.EuiSpacer,{size:"xl"})))))}const oi=a.i18n.translate("xpack.observability_onboarding.breadcrumbs.onboarding",{defaultMessage:"Onboarding"}),si={id:"observabilityOnboarding",label:oi};function li({appMountParameters:e,core:t,corePlugins:n,config:a,context:s}){const{history:l,setHeaderActionMenu:c,theme$:u}=e,d={...t,...n,config:a,context:s},p=!a.serverless.enabled;return t.analytics.reportEvent(K.a.eventType,{uses_legacy_onboarding_page:!1}),Object(x.jsx)(A,t,Object(x.jsx)("div",{className:r.APP_WRAPPER_CLASS},Object(x.jsx)(z,{coreStart:{application:t.application}},Object(x.jsx)(o.KibanaContextProvider,{services:d},Object(x.jsx)(P,{theme:{theme$:u},modify:{breakpoint:{xxl:1600,xxxl:2e3}}},Object(x.jsx)(G,{history:l},Object(x.jsx)(i.EuiErrorBoundary,null,p&&Object(x.jsx)(U.HeaderMenuPortal,{setHeaderActionMenu:c,theme$:u},Object(x.jsx)(H,null)),Object(x.jsx)(ai,null))))))))}const ci=e=>{const{element:t}=e.appMountParameters;return W.a.render(Object(x.jsx)(li,e),t),()=>{e.corePlugins.data.search.session.clear(),W.a.unmountComponentAtNode(t)}}}])]);