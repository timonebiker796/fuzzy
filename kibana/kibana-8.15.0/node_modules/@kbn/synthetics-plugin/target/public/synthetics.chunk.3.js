/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.synthetics_bundle_jsonpfunction=window.synthetics_bundle_jsonpfunction||[]).push([[3],Array(62).concat([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var n=a(22).__importDefault(a(213));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];return e.removeEventListener.apply(e,t)},t.isDeepEqual=n.default},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=(n=a(1))&&"object"==typeof n&&"default"in n?n:{default:n},i=e=>"checkbox"===e.type,s=e=>e instanceof Date,o=e=>null==e;const l=e=>"object"==typeof e;var c=e=>!o(e)&&!Array.isArray(e)&&l(e)&&!s(e),u=e=>c(e)&&e.target?i(e.target)?e.target.checked:e.target.value:e,d=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),m="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function p(e){let t;const a=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(m&&(e instanceof Blob||e instanceof FileList)||!a&&!c(e))return e;if(t=a?[]:{},a||(e=>{const t=e.constructor&&e.constructor.prototype;return c(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=p(e[a]));else t=e}return t}var f=e=>Array.isArray(e)?e.filter(Boolean):[],g=e=>void 0===e,h=(e,t,a)=>{if(!t||!c(e))return a;const n=f(t.split(/[,[\].]+?/)).reduce(((e,t)=>o(e)?e:e[t]),e);return g(n)||n===e?g(e[t])?a:e[t]:n};const b="blur",E="onChange",v="onSubmit",y="all",x="pattern",S="required",k=r.default.createContext(null),M=()=>r.default.useContext(k);var w=(e,t,a,n=!0)=>{const r={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(r,i,{get:()=>{const r=i;return t._proxyFormState[r]!==y&&(t._proxyFormState[r]=!n||y),a&&(a[r]=!0),e[r]}});return r},T=e=>c(e)&&!Object.keys(e).length,O=(e,t,a,n)=>{a(e);const{name:r,...i}=e;return T(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((e=>t[e]===(!n||y)))},C=e=>Array.isArray(e)?e:[e],I=(e,t,a)=>a&&t?e===t:!e||!t||e===t||C(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function j(e){const t=r.default.useRef(e);t.current=e,r.default.useEffect((()=>{const a=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{a&&a.unsubscribe()}}),[e.disabled])}function _(e){const t=M(),{control:a=t.control,disabled:n,name:i,exact:s}=e||{},[o,l]=r.default.useState(a._formState),c=r.default.useRef(!0),u=r.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=r.default.useRef(i);return d.current=i,j({disabled:n,next:e=>c.current&&I(d.current,e.name,s)&&O(e,u.current,a._updateFormState)&&l({...a._formState,...e}),subject:a._subjects.state}),r.default.useEffect((()=>(c.current=!0,u.current.isValid&&a._updateValid(!0),()=>{c.current=!1})),[a]),w(o,a,u.current,!1)}var F=e=>"string"==typeof e,P=(e,t,a,n,r)=>F(e)?(n&&t.watch.add(e),h(a,e,r)):Array.isArray(e)?e.map((e=>(n&&t.watch.add(e),h(a,e)))):(n&&(t.watchAll=!0),a);function L(e){const t=M(),{control:a=t.control,name:n,defaultValue:i,disabled:s,exact:o}=e||{},l=r.default.useRef(n);l.current=n,j({disabled:s,subject:a._subjects.values,next:e=>{I(l.current,e.name,o)&&u(p(P(l.current,a._names,e.values||a._formValues,!1,i)))}});const[c,u]=r.default.useState(a._getWatch(n,i));return r.default.useEffect((()=>a._removeUnmounted())),c}var R=e=>/^\w*$/.test(e),D=e=>f(e.replace(/["|']|\]/g,"").split(/\.|\[/));function A(e,t,a){let n=-1;const r=R(t)?[t]:D(t),i=r.length,s=i-1;for(;++n<i;){const t=r[n];let i=a;if(n!==s){const a=e[t];i=c(a)||Array.isArray(a)?a:isNaN(+r[n+1])?{}:[]}e[t]=i,e=e[t]}return e}function N(e){const t=M(),{name:a,control:n=t.control,shouldUnregister:i}=e,s=d(n._names.array,a),o=L({control:n,name:a,defaultValue:h(n._formValues,a,h(n._defaultValues,a,e.defaultValue)),exact:!0}),l=_({control:n,name:a}),c=r.default.useRef(n.register(a,{...e.rules,value:o}));return c.current=n.register(a,e.rules),r.default.useEffect((()=>{const e=n._options.shouldUnregister||i,t=(e,t)=>{const a=h(n._fields,e);a&&(a._f.mount=t)};if(t(a,!0),e){const e=p(h(n._options.defaultValues,a));A(n._defaultValues,a,e),g(h(n._formValues,a))&&A(n._formValues,a,e)}return()=>{(s?e&&!n._state.action:e)?n.unregister(a):t(a,!1)}}),[a,n,s,i]),{field:{name:a,value:o,onChange:r.default.useCallback((e=>c.current.onChange({target:{value:u(e),name:a},type:"change"})),[a]),onBlur:r.default.useCallback((()=>c.current.onBlur({target:{value:h(n._formValues,a),name:a},type:b})),[a,n]),ref:e=>{const t=h(n._fields,a);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!h(l.errors,a)},isDirty:{enumerable:!0,get:()=>!!h(l.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!h(l.touchedFields,a)},error:{enumerable:!0,get:()=>h(l.errors,a)}})}}const z="post";var B=(e,t,a,n,r)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[n]:r||!0}}:{};const H=(e,t,a)=>{for(const n of a||Object.keys(e)){const a=h(e,n);if(a){const{_f:e,...n}=a;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else c(n)&&H(n,t)}}};var G=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const a=(16*Math.random()+e)%16|0;return("x"==t?a:3&a|8).toString(16)}))},V=(e,t,a={})=>a.shouldFocus||g(a.shouldFocus)?a.focusName||`${e}.${g(a.focusIndex)?t:a.focusIndex}.`:"",$=e=>({isOnSubmit:!e||e===v,isOnBlur:"onBlur"===e,isOnChange:e===E,isOnAll:e===y,isOnTouch:"onTouched"===e}),U=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),q=(e,t,a)=>{const n=f(h(e,a));return A(n,"root",t[a]),A(e,a,n),e},W=e=>"boolean"==typeof e,K=e=>"file"===e.type,Y=e=>"function"==typeof e,X=e=>{if(!m)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},J=e=>F(e),Q=e=>"radio"===e.type,Z=e=>e instanceof RegExp;const ee={value:!1,isValid:!1},te={value:!0,isValid:!0};var ae=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!g(e[0].attributes.value)?g(e[0].value)||""===e[0].value?te:{value:e[0].value,isValid:!0}:te:ee}return ee};const ne={isValid:!1,value:null};var re=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),ne):ne;function ie(e,t,a="validate"){if(J(e)||Array.isArray(e)&&e.every(J)||W(e)&&!e)return{type:a,message:J(e)?e:"",ref:t}}var se=e=>c(e)&&!Z(e)?e:{value:e,message:""},oe=async(e,t,a,n,r)=>{const{ref:s,refs:l,required:u,maxLength:d,minLength:m,min:p,max:f,pattern:b,validate:E,name:v,valueAsNumber:y,mount:k,disabled:M}=e._f,w=h(t,v);if(!k||M)return{};const O=l?l[0]:s,C=e=>{n&&O.reportValidity&&(O.setCustomValidity(W(e)?"":e||""),O.reportValidity())},I={},j=Q(s),_=i(s),P=j||_,L=(y||K(s))&&g(s.value)&&g(w)||X(s)&&""===s.value||""===w||Array.isArray(w)&&!w.length,R=B.bind(null,v,a,I),D=(e,t,a,n="maxLength",r="minLength")=>{const i=e?t:a;I[v]={type:e?n:r,message:i,ref:s,...R(e?n:r,i)}};if(r?!Array.isArray(w)||!w.length:u&&(!P&&(L||o(w))||W(w)&&!w||_&&!ae(l).isValid||j&&!re(l).isValid)){const{value:e,message:t}=J(u)?{value:!!u,message:u}:se(u);if(e&&(I[v]={type:S,message:t,ref:O,...R(S,t)},!a))return C(t),I}if(!(L||o(p)&&o(f))){let e,t;const n=se(f),r=se(p);if(o(w)||isNaN(w)){const a=s.valueAsDate||new Date(w),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==s.type,l="week"==s.type;F(n.value)&&w&&(e=o?i(w)>i(n.value):l?w>n.value:a>new Date(n.value)),F(r.value)&&w&&(t=o?i(w)<i(r.value):l?w<r.value:a<new Date(r.value))}else{const a=s.valueAsNumber||(w?+w:w);o(n.value)||(e=a>n.value),o(r.value)||(t=a<r.value)}if((e||t)&&(D(!!e,n.message,r.message,"max","min"),!a))return C(I[v].message),I}if((d||m)&&!L&&(F(w)||r&&Array.isArray(w))){const e=se(d),t=se(m),n=!o(e.value)&&w.length>+e.value,r=!o(t.value)&&w.length<+t.value;if((n||r)&&(D(n,e.message,t.message),!a))return C(I[v].message),I}if(b&&!L&&F(w)){const{value:e,message:t}=se(b);if(Z(e)&&!w.match(e)&&(I[v]={type:x,message:t,ref:s,...R(x,t)},!a))return C(t),I}if(E)if(Y(E)){const e=ie(await E(w,t),O);if(e&&(I[v]={...e,...R("validate",e.message)},!a))return C(e.message),I}else if(c(E)){let e={};for(const n in E){if(!T(e)&&!a)break;const r=ie(await E[n](w,t),O,n);r&&(e={...r,...R(n,r.message)},C(r.message),a&&(I[v]=e))}if(!T(e)&&(I[v]={ref:O,...e},!a))return I}return C(!0),I};function le(e,t){return[...e,...C(t)]}var ce=e=>Array.isArray(e)?e.map((()=>{})):void 0;function ue(e,t,a){return[...e.slice(0,t),...C(a),...e.slice(t)]}var de=(e,t,a)=>Array.isArray(e)?(g(e[a])&&(e[a]=void 0),e.splice(a,0,e.splice(t,1)[0]),e):[];function me(e,t){return[...C(t),...C(e)]}var pe=(e,t)=>g(t)?[]:function(e,t){let a=0;const n=[...e];for(const e of t)n.splice(e-a,1),a++;return f(n).length?n:[]}(e,C(t).sort(((e,t)=>e-t))),fe=(e,t,a)=>{e[t]=[e[a],e[a]=e[t]][0]};function ge(e,t){const a=Array.isArray(t)?t:R(t)?[t]:D(t),n=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let n=0;for(;n<a;)e=g(e)?n++:e[t[n++]];return e}(e,a),r=a.length-1,i=a[r];return n&&delete n[i],0!==r&&(c(n)&&T(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!g(e[t]))return!1;return!0}(n))&&ge(e,a.slice(0,-1)),e}var he=(e,t,a)=>(e[t]=a,e);function be(){let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Ee=e=>o(e)||!l(e);function ve(e,t){if(Ee(e)||Ee(t))return e===t;if(s(e)&&s(t))return e.getTime()===t.getTime();const a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(const r of a){const a=e[r];if(!n.includes(r))return!1;if("ref"!==r){const e=t[r];if(s(a)&&s(e)||c(a)&&c(e)||Array.isArray(a)&&Array.isArray(e)?!ve(a,e):a!==e)return!1}}return!0}var ye=e=>"select-multiple"===e.type,xe=e=>X(e)&&e.isConnected,Se=e=>{for(const t in e)if(Y(e[t]))return!0;return!1};function ke(e,t={}){const a=Array.isArray(e);if(c(e)||a)for(const a in e)Array.isArray(e[a])||c(e[a])&&!Se(e[a])?(t[a]=Array.isArray(e[a])?[]:{},ke(e[a],t[a])):o(e[a])||(t[a]=!0);return t}function Me(e,t,a){const n=Array.isArray(e);if(c(e)||n)for(const n in e)Array.isArray(e[n])||c(e[n])&&!Se(e[n])?g(t)||Ee(a[n])?a[n]=Array.isArray(e[n])?ke(e[n],[]):{...ke(e[n])}:Me(e[n],o(t)?{}:t[n],a[n]):a[n]=!ve(e[n],t[n]);return a}var we=(e,t)=>Me(e,t,ke(t)),Te=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:n})=>g(e)?e:t?""===e?NaN:e?+e:e:a&&F(e)?new Date(e):n?n(e):e;function Oe(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return K(t)?t.files:Q(t)?re(e.refs).value:ye(t)?[...t.selectedOptions].map((({value:e})=>e)):i(t)?ae(e.refs).value:Te(g(t.value)?e.ref.value:t.value,e)}var Ce=e=>g(e)?e:Z(e)?e.source:c(e)?Z(e.value)?e.value.source:e.value:e;function Ie(e,t,a){const n=h(e,a);if(n||R(a))return{error:n,name:a};const r=a.split(".");for(;r.length;){const n=r.join("."),i=h(t,n),s=h(e,n);if(i&&!Array.isArray(i)&&a!==n)return{name:a};if(s&&s.type)return{name:n,error:s};r.pop()}return{name:a}}const je={mode:v,reValidateMode:E,shouldFocusError:!0};function _e(e={},t){let a,n={...je,...e},r={submitCount:0,isDirty:!1,isLoading:Y(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},l={},E=(c(n.defaultValues)||c(n.values))&&p(n.defaultValues||n.values)||{},v=n.shouldUnregister?{}:p(E),x={action:!1,mount:!1,watch:!1},S={mount:new Set,unMount:new Set,array:new Set,watch:new Set},k=0;const M={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},w={values:be(),array:be(),state:be()},O=e.resetOptions&&e.resetOptions.keepDirtyValues,I=$(n.mode),j=$(n.reValidateMode),_=n.criteriaMode===y,L=async e=>{if(M.isValid||e){const e=n.resolver?T((await B()).errors):await G(l,!0);e!==r.isValid&&w.state.next({isValid:e})}},R=e=>M.isValidating&&w.state.next({isValidating:e}),D=(e,t,a,n)=>{const r=h(l,e);if(r){const i=h(v,e,g(a)?h(E,e):a);g(i)||n&&n.defaultChecked||t?A(v,e,t?i:Oe(r._f)):Z(e,i),x.mount&&L()}},N=(e,t,a,n,i)=>{let s=!1,o=!1;const l={name:e};if(!a||n){M.isDirty&&(o=r.isDirty,r.isDirty=l.isDirty=V(),s=o!==l.isDirty);const a=ve(h(E,e),t);o=h(r.dirtyFields,e),a?ge(r.dirtyFields,e):A(r.dirtyFields,e,!0),l.dirtyFields=r.dirtyFields,s=s||M.dirtyFields&&o!==!a}if(a){const t=h(r.touchedFields,e);t||(A(r.touchedFields,e,a),l.touchedFields=r.touchedFields,s=s||M.touchedFields&&t!==a)}return s&&i&&w.state.next(l),s?l:{}},z=(t,n,i,s)=>{const o=h(r.errors,t),l=M.isValid&&W(n)&&r.isValid!==n;var c;if(e.delayError&&i?(c=()=>((e,t)=>{A(r.errors,e,t),w.state.next({errors:r.errors})})(t,i),a=e=>{clearTimeout(k),k=setTimeout(c,e)},a(e.delayError)):(clearTimeout(k),a=null,i?A(r.errors,t,i):ge(r.errors,t)),(i?!ve(o,i):o)||!T(s)||l){const e={...s,...l&&W(n)?{isValid:n}:{},errors:r.errors,name:t};r={...r,...e},w.state.next(e)}R(!1)},B=async e=>n.resolver(v,n.context,((e,t,a,n)=>{const r={};for(const a of e){const e=h(t,a);e&&A(r,a,e._f)}return{criteriaMode:a,names:[...e],fields:r,shouldUseNativeValidation:n}})(e||S.mount,l,n.criteriaMode,n.shouldUseNativeValidation)),G=async(e,t,a={valid:!0})=>{for(const i in e){const s=e[i];if(s){const{_f:e,...i}=s;if(e){const i=S.array.has(e.name),o=await oe(s,v,_,n.shouldUseNativeValidation&&!t,i);if(o[e.name]&&(a.valid=!1,t))break;!t&&(h(o,e.name)?i?q(r.errors,o,e.name):A(r.errors,e.name,o[e.name]):ge(r.errors,e.name))}i&&await G(i,t,a)}}return a.valid},V=(e,t)=>(e&&t&&A(v,e,t),!ve(re(),E)),J=(e,t,a)=>P(e,S,{...x.mount?v:g(t)?E:F(e)?{[e]:t}:t},a,t),Z=(e,t,a={})=>{const n=h(l,e);let r=t;if(n){const a=n._f;a&&(!a.disabled&&A(v,e,Te(t,a)),r=X(a.ref)&&o(t)?"":t,ye(a.ref)?[...a.ref.options].forEach((e=>e.selected=r.includes(e.value))):a.refs?i(a.ref)?a.refs.length>1?a.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(r)?!!r.find((t=>t===e.value)):r===e.value))):a.refs[0]&&(a.refs[0].checked=!!r):a.refs.forEach((e=>e.checked=e.value===r)):K(a.ref)?a.ref.value="":(a.ref.value=r,a.ref.type||w.values.next({name:e,values:{...v}})))}(a.shouldDirty||a.shouldTouch)&&N(e,r,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&ne(e)},ee=(e,t,a)=>{for(const n in t){const r=t[n],i=`${e}.${n}`,o=h(l,i);!S.array.has(e)&&Ee(r)&&(!o||o._f)||s(r)?Z(i,r,a):ee(i,r,a)}},te=(e,a,n={})=>{const i=h(l,e),s=S.array.has(e),c=p(a);A(v,e,c),s?(w.array.next({name:e,values:{...v}}),(M.isDirty||M.dirtyFields)&&n.shouldDirty&&w.state.next({name:e,dirtyFields:we(E,v),isDirty:V(e,c)})):!i||i._f||o(c)?Z(e,c,n):ee(e,c,n),U(e,S)&&w.state.next({...r}),w.values.next({name:e,values:{...v}}),!x.mount&&t()},ae=async e=>{const t=e.target;let i=t.name,s=!0;const o=h(l,i);if(o){let d,m;const p=t.type?Oe(o._f):u(e),f=e.type===b||"focusout"===e.type,g=!((c=o._f).mount&&(c.required||c.min||c.max||c.maxLength||c.minLength||c.pattern||c.validate)||n.resolver||h(r.errors,i)||o._f.deps)||((e,t,a,n,r)=>!r.isOnAll&&(!a&&r.isOnTouch?!(t||e):(a?n.isOnBlur:r.isOnBlur)?!e:!(a?n.isOnChange:r.isOnChange)||e))(f,h(r.touchedFields,i),r.isSubmitted,j,I),E=U(i,S,f);A(v,i,p),f?(o._f.onBlur&&o._f.onBlur(e),a&&a(0)):o._f.onChange&&o._f.onChange(e);const y=N(i,p,f,!1),x=!T(y)||E;if(!f&&w.values.next({name:i,type:e.type,values:{...v}}),g)return M.isValid&&L(),x&&w.state.next({name:i,...E?{}:y});if(!f&&E&&w.state.next({...r}),R(!0),n.resolver){const{errors:e}=await B([i]),t=Ie(r.errors,l,i),a=Ie(e,l,t.name||i);d=a.error,i=a.name,m=T(e)}else d=(await oe(o,v,_,n.shouldUseNativeValidation))[i],s=isNaN(p)||p===h(v,i,p),s&&(d?m=!1:M.isValid&&(m=await G(l,!0)));s&&(o._f.deps&&ne(o._f.deps),z(i,m,d,y))}var c},ne=async(e,t={})=>{let a,i;const s=C(e);if(R(!0),n.resolver){const t=await(async e=>{const{errors:t}=await B();if(e)for(const a of e){const e=h(t,a);e?A(r.errors,a,e):ge(r.errors,a)}else r.errors=t;return t})(g(e)?e:s);a=T(t),i=e?!s.some((e=>h(t,e))):a}else e?(i=(await Promise.all(s.map((async e=>{const t=h(l,e);return await G(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||r.isValid)&&L()):i=a=await G(l);return w.state.next({...!F(e)||M.isValid&&a!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:a}:{},errors:r.errors,isValidating:!1}),t.shouldFocus&&!i&&H(l,(e=>e&&h(r.errors,e)),e?s:S.mount),i},re=e=>{const t={...E,...x.mount?v:{}};return g(e)?t:F(e)?h(t,e):e.map((e=>h(t,e)))},ie=(e,t)=>({invalid:!!h((t||r).errors,e),isDirty:!!h((t||r).dirtyFields,e),isTouched:!!h((t||r).touchedFields,e),error:h((t||r).errors,e)}),se=(e,t,a)=>{const n=(h(l,e,{_f:{}})._f||{}).ref;A(r.errors,e,{...t,ref:n}),w.state.next({name:e,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&n&&n.focus&&n.focus()},le=(e,t={})=>{for(const a of e?C(e):S.mount)S.mount.delete(a),S.array.delete(a),t.keepValue||(ge(l,a),ge(v,a)),!t.keepError&&ge(r.errors,a),!t.keepDirty&&ge(r.dirtyFields,a),!t.keepTouched&&ge(r.touchedFields,a),!n.shouldUnregister&&!t.keepDefaultValue&&ge(E,a);w.values.next({values:{...v}}),w.state.next({...r,...t.keepDirty?{isDirty:V()}:{}}),!t.keepIsValid&&L()},ce=(e,t={})=>{let a=h(l,e);const r=W(t.disabled);return A(l,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),S.mount.add(e),a?r&&A(v,e,t.disabled?void 0:h(v,e,Oe(a._f))):D(e,!0,t.value),{...r?{disabled:t.disabled}:{},...n.progressive?{required:!!t.required,min:Ce(t.min),max:Ce(t.max),minLength:Ce(t.minLength),maxLength:Ce(t.maxLength),pattern:Ce(t.pattern)}:{},name:e,onChange:ae,onBlur:ae,ref:r=>{if(r){ce(e,t),a=h(l,e);const n=g(r.value)&&r.querySelectorAll&&r.querySelectorAll("input,select,textarea")[0]||r,s=(e=>Q(e)||i(e))(n),o=a._f.refs||[];if(s?o.find((e=>e===n)):n===a._f.ref)return;A(l,e,{_f:{...a._f,...s?{refs:[...o.filter(xe),n,...Array.isArray(h(E,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),D(e,!1,void 0,n)}else a=h(l,e,{}),a._f&&(a._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!d(S.array,e)||!x.action)&&S.unMount.add(e)}}},ue=()=>n.shouldFocusError&&H(l,(e=>e&&h(r.errors,e)),S.mount),de=(e,t)=>async a=>{a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let i=p(v);if(w.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await B();r.errors=e,i=t}else await G(l);ge(r.errors,"root"),T(r.errors)?(w.state.next({errors:{}}),await e(i,a)):(t&&await t({...r.errors},a),ue(),setTimeout(ue)),w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:T(r.errors),submitCount:r.submitCount+1,errors:r.errors})},me=(a,n={})=>{const i=a||E,s=p(i),o=a&&!T(a)?s:E;if(n.keepDefaultValues||(E=i),!n.keepValues){if(n.keepDirtyValues||O)for(const e of S.mount)h(r.dirtyFields,e)?A(o,e,h(v,e)):te(e,h(o,e));else{if(m&&g(a))for(const e of S.mount){const t=h(l,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(X(e)){const t=e.closest("form");if(t){t.reset();break}}}}l={}}v=e.shouldUnregister?n.keepDefaultValues?p(E):{}:p(o),w.array.next({values:{...o}}),w.values.next({values:{...o}})}S={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!x.mount&&t(),x.mount=!M.isValid||!!n.keepIsValid,x.watch=!!e.shouldUnregister,w.state.next({submitCount:n.keepSubmitCount?r.submitCount:0,isDirty:n.keepDirty?r.isDirty:!(!n.keepDefaultValues||ve(a,E)),isSubmitted:!!n.keepIsSubmitted&&r.isSubmitted,dirtyFields:n.keepDirtyValues?r.dirtyFields:n.keepDefaultValues&&a?we(E,a):{},touchedFields:n.keepTouched?r.touchedFields:{},errors:n.keepErrors?r.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},pe=(e,t)=>me(Y(e)?e(v):e,t);return{control:{register:ce,unregister:le,getFieldState:ie,handleSubmit:de,setError:se,_executeSchema:B,_getWatch:J,_getDirty:V,_updateValid:L,_removeUnmounted:()=>{for(const e of S.unMount){const t=h(l,e);t&&(t._f.refs?t._f.refs.every((e=>!xe(e))):!xe(t._f.ref))&&le(e)}S.unMount=new Set},_updateFieldArray:(e,t=[],a,n,i=!0,s=!0)=>{if(n&&a){if(x.action=!0,s&&Array.isArray(h(l,e))){const t=a(h(l,e),n.argA,n.argB);i&&A(l,e,t)}if(s&&Array.isArray(h(r.errors,e))){const t=a(h(r.errors,e),n.argA,n.argB);i&&A(r.errors,e,t),((e,t)=>{!f(h(e,t)).length&&ge(e,t)})(r.errors,e)}if(M.touchedFields&&s&&Array.isArray(h(r.touchedFields,e))){const t=a(h(r.touchedFields,e),n.argA,n.argB);i&&A(r.touchedFields,e,t)}M.dirtyFields&&(r.dirtyFields=we(E,v)),w.state.next({name:e,isDirty:V(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else A(v,e,t)},_getFieldArray:t=>f(h(x.mount?v:E,t,e.shouldUnregister?h(E,t,[]):[])),_reset:me,_resetDefaultValues:()=>Y(n.defaultValues)&&n.defaultValues().then((e=>{pe(e,n.resetOptions),w.state.next({isLoading:!1})})),_updateFormState:e=>{r={...r,...e}},_subjects:w,_proxyFormState:M,get _fields(){return l},get _formValues(){return v},get _state(){return x},set _state(e){x=e},get _defaultValues(){return E},get _names(){return S},set _names(e){S=e},get _formState(){return r},set _formState(e){r=e},get _options(){return n},set _options(e){n={...n,...e}}},trigger:ne,register:ce,handleSubmit:de,watch:(e,t)=>Y(e)?w.values.subscribe({next:a=>e(J(void 0,t),a)}):J(e,t,!0),setValue:te,getValues:re,reset:pe,resetField:(e,t={})=>{h(l,e)&&(g(t.defaultValue)?te(e,h(E,e)):(te(e,t.defaultValue),A(E,e,t.defaultValue)),t.keepTouched||ge(r.touchedFields,e),t.keepDirty||(ge(r.dirtyFields,e),r.isDirty=t.defaultValue?V(e,h(E,e)):V()),t.keepError||(ge(r.errors,e),M.isValid&&L()),w.state.next({...r}))},clearErrors:e=>{e&&C(e).forEach((e=>ge(r.errors,e))),w.state.next({errors:e?r.errors:{}})},unregister:le,setError:se,setFocus:(e,t={})=>{const a=h(l,e),n=a&&a._f;if(n){const e=n.refs?n.refs[0]:n.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:ie}}t.Controller=e=>e.render(N(e)),t.Form=function(e){const t=M(),[a,n]=r.default.useState(!1),{control:i=t.control,onSubmit:s,children:o,action:l,method:c=z,headers:u,encType:d,onError:m,render:p,onSuccess:f,validateStatus:g,...b}=e,E=async t=>{let a=!1,n="";await i.handleSubmit((async e=>{const r=new FormData;let o="";try{o=JSON.stringify(e)}catch(e){}for(const t of i._names.mount)r.append(t,h(e,t));if(s&&s({data:e,event:t,method:c,formData:r,formDataJson:o}),l)try{const e=[u&&u["Content-Type"],d].some((e=>e&&e.includes("json"))),t=await fetch(l,{method:c,headers:{...u,...d?{"Content-Type":d}:{}},body:e?o:r});t&&(g?!g(t.status):t.status<200||t.status>=300)?(a=!0,m&&m({response:t}),n=String(t.status)):f&&f({response:t})}catch(e){a=!0,m&&m({error:e})}}))(t),a&&e.control&&(e.control._subjects.state.next({isSubmitSuccessful:!1}),e.control.setError("root.server",{type:n}))};return r.default.useEffect((()=>{n(!0)}),[]),p?r.default.createElement(r.default.Fragment,null,p({submit:E})):r.default.createElement("form",{noValidate:a,action:l,method:c,encType:d,onSubmit:E,...b},o)},t.FormProvider=e=>{const{children:t,...a}=e;return r.default.createElement(k.Provider,{value:a},t)},t.appendErrors=B,t.get=h,t.set=A,t.useController=N,t.useFieldArray=function(e){const t=M(),{control:a=t.control,name:n,keyName:i="id",shouldUnregister:s}=e,[o,l]=r.default.useState(a._getFieldArray(n)),c=r.default.useRef(a._getFieldArray(n).map(G)),u=r.default.useRef(o),d=r.default.useRef(n),m=r.default.useRef(!1);d.current=n,u.current=o,a._names.array.add(n),e.rules&&a.register(n,e.rules),j({next:({values:e,name:t})=>{if(t===d.current||!t){const t=h(e,d.current);Array.isArray(t)&&(l(t),c.current=t.map(G))}},subject:a._subjects.array});const f=r.default.useCallback((e=>{m.current=!0,a._updateFieldArray(n,e)}),[a,n]);return r.default.useEffect((()=>{if(a._state.action=!1,U(n,a._names)&&a._subjects.state.next({...a._formState}),m.current&&(!$(a._options.mode).isOnSubmit||a._formState.isSubmitted))if(a._options.resolver)a._executeSchema([n]).then((e=>{const t=h(e.errors,n),r=h(a._formState.errors,n);(r?!t&&r.type||t&&(r.type!==t.type||r.message!==t.message):t&&t.type)&&(t?A(a._formState.errors,n,t):ge(a._formState.errors,n),a._subjects.state.next({errors:a._formState.errors}))}));else{const e=h(a._fields,n);e&&e._f&&oe(e,a._formValues,a._options.criteriaMode===y,a._options.shouldUseNativeValidation,!0).then((e=>!T(e)&&a._subjects.state.next({errors:q(a._formState.errors,e,n)})))}a._subjects.values.next({name:n,values:{...a._formValues}}),a._names.focus&&H(a._fields,(e=>!!e&&e.startsWith(a._names.focus||""))),a._names.focus="",a._updateValid()}),[o,n,a]),r.default.useEffect((()=>(!h(a._formValues,n)&&a._updateFieldArray(n),()=>{(a._options.shouldUnregister||s)&&a.unregister(n)})),[n,a,i,s]),{swap:r.default.useCallback(((e,t)=>{const r=a._getFieldArray(n);fe(r,e,t),fe(c.current,e,t),f(r),l(r),a._updateFieldArray(n,r,fe,{argA:e,argB:t},!1)}),[f,n,a]),move:r.default.useCallback(((e,t)=>{const r=a._getFieldArray(n);de(r,e,t),de(c.current,e,t),f(r),l(r),a._updateFieldArray(n,r,de,{argA:e,argB:t},!1)}),[f,n,a]),prepend:r.default.useCallback(((e,t)=>{const r=C(p(e)),i=me(a._getFieldArray(n),r);a._names.focus=V(n,0,t),c.current=me(c.current,r.map(G)),f(i),l(i),a._updateFieldArray(n,i,me,{argA:ce(e)})}),[f,n,a]),append:r.default.useCallback(((e,t)=>{const r=C(p(e)),i=le(a._getFieldArray(n),r);a._names.focus=V(n,i.length-1,t),c.current=le(c.current,r.map(G)),f(i),l(i),a._updateFieldArray(n,i,le,{argA:ce(e)})}),[f,n,a]),remove:r.default.useCallback((e=>{const t=pe(a._getFieldArray(n),e);c.current=pe(c.current,e),f(t),l(t),a._updateFieldArray(n,t,pe,{argA:e})}),[f,n,a]),insert:r.default.useCallback(((e,t,r)=>{const i=C(p(t)),s=ue(a._getFieldArray(n),e,i);a._names.focus=V(n,e,r),c.current=ue(c.current,e,i.map(G)),f(s),l(s),a._updateFieldArray(n,s,ue,{argA:e,argB:ce(t)})}),[f,n,a]),update:r.default.useCallback(((e,t)=>{const r=p(t),i=he(a._getFieldArray(n),e,r);c.current=[...i].map(((t,a)=>t&&a!==e?c.current[a]:G())),f(i),l([...i]),a._updateFieldArray(n,i,he,{argA:e,argB:r},!0,!1)}),[f,n,a]),replace:r.default.useCallback((e=>{const t=C(p(e));c.current=t.map(G),f([...t]),l([...t]),a._updateFieldArray(n,[...t],(e=>e),{},!0,!1)}),[f,n,a]),fields:r.default.useMemo((()=>o.map(((e,t)=>({...e,[i]:c.current[t]||G()})))),[o,i])}},t.useForm=function(e={}){const t=r.default.useRef(),[a,n]=r.default.useState({isDirty:!1,isValidating:!1,isLoading:Y(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Y(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={..._e(e,(()=>n((e=>({...e}))))),formState:a});const i=t.current.control;return i._options=e,j({subject:i._subjects.state,next:e=>{O(e,i._proxyFormState,i._updateFormState,!0)&&n({...i._formState})}}),r.default.useEffect((()=>{e.values&&!ve(e.values,i._defaultValues)?i._reset(e.values,i._options.resetOptions):i._resetDefaultValues()}),[e.values,i]),r.default.useEffect((()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()})),t.current.formState=w(a,i),t.current},t.useFormContext=M,t.useFormState=_,t.useWatch=L},,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(205);Object.defineProperty(t,"createMemo",{enumerable:!0,get:function(){return n.default}});var r=a(206);Object.defineProperty(t,"createReducerContext",{enumerable:!0,get:function(){return r.default}});var i=a(207);Object.defineProperty(t,"createReducer",{enumerable:!0,get:function(){return i.default}});var s=a(208);Object.defineProperty(t,"createStateContext",{enumerable:!0,get:function(){return s.default}});var o=a(153);Object.defineProperty(t,"useAsync",{enumerable:!0,get:function(){return o.default}});var l=a(154);Object.defineProperty(t,"useAsyncFn",{enumerable:!0,get:function(){return l.default}});var c=a(209);Object.defineProperty(t,"useAsyncRetry",{enumerable:!0,get:function(){return c.default}});var u=a(210);Object.defineProperty(t,"useAudio",{enumerable:!0,get:function(){return u.default}});var d=a(212);Object.defineProperty(t,"useBattery",{enumerable:!0,get:function(){return d.default}});var m=a(214);Object.defineProperty(t,"useBeforeUnload",{enumerable:!0,get:function(){return m.default}});var p=a(215);Object.defineProperty(t,"useBoolean",{enumerable:!0,get:function(){return p.default}});var f=a(216);Object.defineProperty(t,"useClickAway",{enumerable:!0,get:function(){return f.default}});var g=a(217);Object.defineProperty(t,"useCookie",{enumerable:!0,get:function(){return g.default}});var h=a(219);Object.defineProperty(t,"useCopyToClipboard",{enumerable:!0,get:function(){return h.default}});var b=a(157);Object.defineProperty(t,"useCounter",{enumerable:!0,get:function(){return b.default}});var E=a(222);Object.defineProperty(t,"useCss",{enumerable:!0,get:function(){return E.default}});var v=a(130);Object.defineProperty(t,"useCustomCompareEffect",{enumerable:!0,get:function(){return v.default}});var y=a(99);Object.defineProperty(t,"useDebounce",{enumerable:!0,get:function(){return y.default}});var x=a(159);Object.defineProperty(t,"useDeepCompareEffect",{enumerable:!0,get:function(){return x.default}});var S=a(228);Object.defineProperty(t,"useDefault",{enumerable:!0,get:function(){return S.default}});var k=a(229);Object.defineProperty(t,"useDrop",{enumerable:!0,get:function(){return k.default}});var M=a(230);Object.defineProperty(t,"useDropArea",{enumerable:!0,get:function(){return M.default}});var w=a(100);Object.defineProperty(t,"useEffectOnce",{enumerable:!0,get:function(){return w.default}});var T=a(231);Object.defineProperty(t,"useEnsuredForwardedRef",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"ensuredForwardRef",{enumerable:!0,get:function(){return T.ensuredForwardRef}});var O=a(160);Object.defineProperty(t,"useEvent",{enumerable:!0,get:function(){return O.default}});var C=a(232);Object.defineProperty(t,"useError",{enumerable:!0,get:function(){return C.default}});var I=a(233);Object.defineProperty(t,"useFavicon",{enumerable:!0,get:function(){return I.default}});var j=a(234);Object.defineProperty(t,"useFullscreen",{enumerable:!0,get:function(){return j.default}});var _=a(236);Object.defineProperty(t,"useGeolocation",{enumerable:!0,get:function(){return _.default}});var F=a(158);Object.defineProperty(t,"useGetSet",{enumerable:!0,get:function(){return F.default}});var P=a(237);Object.defineProperty(t,"useGetSetState",{enumerable:!0,get:function(){return P.default}});var L=a(238);Object.defineProperty(t,"useHarmonicIntervalFn",{enumerable:!0,get:function(){return L.default}});var R=a(240);Object.defineProperty(t,"useHover",{enumerable:!0,get:function(){return R.default}});var D=a(161);Object.defineProperty(t,"useHoverDirty",{enumerable:!0,get:function(){return D.default}});var A=a(241);Object.defineProperty(t,"useIdle",{enumerable:!0,get:function(){return A.default}});var N=a(132);Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return N.default}});var z=a(243);Object.defineProperty(t,"useInterval",{enumerable:!0,get:function(){return z.default}});var B=a(76);Object.defineProperty(t,"useIsomorphicLayoutEffect",{enumerable:!0,get:function(){return B.default}});var H=a(162);Object.defineProperty(t,"useKey",{enumerable:!0,get:function(){return H.default}});var G=a(244);Object.defineProperty(t,"createBreakpoint",{enumerable:!0,get:function(){return G.default}});var V=a(163);Object.defineProperty(t,"useKeyPress",{enumerable:!0,get:function(){return V.default}});var $=a(245);Object.defineProperty(t,"useKeyPressEvent",{enumerable:!0,get:function(){return $.default}});var U=a(164);Object.defineProperty(t,"useLatest",{enumerable:!0,get:function(){return U.default}});var q=a(165);Object.defineProperty(t,"useLifecycles",{enumerable:!0,get:function(){return q.default}});var W=a(166);Object.defineProperty(t,"useList",{enumerable:!0,get:function(){return W.default}});var K=a(133);Object.defineProperty(t,"useLocalStorage",{enumerable:!0,get:function(){return K.default}});var Y=a(246);Object.defineProperty(t,"useLocation",{enumerable:!0,get:function(){return Y.default}});var X=a(247);Object.defineProperty(t,"useLockBodyScroll",{enumerable:!0,get:function(){return X.default}});var J=a(248);Object.defineProperty(t,"useLogger",{enumerable:!0,get:function(){return J.default}});var Q=a(249);Object.defineProperty(t,"useLongPress",{enumerable:!0,get:function(){return Q.default}});var Z=a(250);Object.defineProperty(t,"useMap",{enumerable:!0,get:function(){return Z.default}});var ee=a(251);Object.defineProperty(t,"useMedia",{enumerable:!0,get:function(){return ee.default}});var te=a(252);Object.defineProperty(t,"useMediaDevices",{enumerable:!0,get:function(){return te.default}});var ae=a(253);Object.defineProperty(t,"useMediatedState",{enumerable:!0,get:function(){return ae.useMediatedState}});var ne=a(254);Object.defineProperty(t,"useMethods",{enumerable:!0,get:function(){return ne.default}});var re=a(255);Object.defineProperty(t,"useMotion",{enumerable:!0,get:function(){return re.default}});var ie=a(167);Object.defineProperty(t,"useMount",{enumerable:!0,get:function(){return ie.default}});var se=a(82);Object.defineProperty(t,"useMountedState",{enumerable:!0,get:function(){return se.default}});var oe=a(168);Object.defineProperty(t,"useMouse",{enumerable:!0,get:function(){return oe.default}});var le=a(256);Object.defineProperty(t,"useMouseHovered",{enumerable:!0,get:function(){return le.default}});var ce=a(257);Object.defineProperty(t,"useMouseWheel",{enumerable:!0,get:function(){return ce.default}});var ue=a(258);Object.defineProperty(t,"useNetwork",{enumerable:!0,get:function(){return ue.default}});var de=a(259);Object.defineProperty(t,"useNumber",{enumerable:!0,get:function(){return de.default}});var me=a(104);Object.defineProperty(t,"useObservable",{enumerable:!0,get:function(){return me.default}});var pe=a(260);Object.defineProperty(t,"useOrientation",{enumerable:!0,get:function(){return pe.default}});var fe=a(261);Object.defineProperty(t,"usePageLeave",{enumerable:!0,get:function(){return fe.default}});var ge=a(262);Object.defineProperty(t,"usePermission",{enumerable:!0,get:function(){return ge.default}});var he=a(263);Object.defineProperty(t,"usePrevious",{enumerable:!0,get:function(){return he.default}});var be=a(264);Object.defineProperty(t,"usePreviousDistinct",{enumerable:!0,get:function(){return be.default}});var Ee=a(265);Object.defineProperty(t,"usePromise",{enumerable:!0,get:function(){return Ee.default}});var ve=a(266);Object.defineProperty(t,"useQueue",{enumerable:!0,get:function(){return ve.default}});var ye=a(169);Object.defineProperty(t,"useRaf",{enumerable:!0,get:function(){return ye.default}});var xe=a(267);Object.defineProperty(t,"useRafLoop",{enumerable:!0,get:function(){return xe.default}});var Se=a(101);Object.defineProperty(t,"useRafState",{enumerable:!0,get:function(){return Se.default}});var ke=a(268);Object.defineProperty(t,"useSearchParam",{enumerable:!0,get:function(){return ke.default}});var Me=a(269);Object.defineProperty(t,"useScratch",{enumerable:!0,get:function(){return Me.default}});var we=a(275);Object.defineProperty(t,"useScroll",{enumerable:!0,get:function(){return we.default}});var Te=a(276);Object.defineProperty(t,"useScrolling",{enumerable:!0,get:function(){return Te.default}});var Oe=a(277);Object.defineProperty(t,"useSessionStorage",{enumerable:!0,get:function(){return Oe.default}});var Ce=a(98);Object.defineProperty(t,"useSetState",{enumerable:!0,get:function(){return Ce.default}});var Ie=a(278);Object.defineProperty(t,"useShallowCompareEffect",{enumerable:!0,get:function(){return Ie.default}});var je=a(280);Object.defineProperty(t,"useSize",{enumerable:!0,get:function(){return je.default}});var _e=a(281);Object.defineProperty(t,"useSlider",{enumerable:!0,get:function(){return _e.default}});var Fe=a(282);Object.defineProperty(t,"useSpeech",{enumerable:!0,get:function(){return Fe.default}});var Pe=a(283);Object.defineProperty(t,"useStartTyping",{enumerable:!0,get:function(){return Pe.default}});var Le=a(284);Object.defineProperty(t,"useStateWithHistory",{enumerable:!0,get:function(){return Le.useStateWithHistory}});var Re=a(285);Object.defineProperty(t,"useStateList",{enumerable:!0,get:function(){return Re.default}});var De=a(134);Object.defineProperty(t,"useThrottle",{enumerable:!0,get:function(){return De.default}});var Ae=a(286);Object.defineProperty(t,"useThrottleFn",{enumerable:!0,get:function(){return Ae.default}});var Ne=a(287);Object.defineProperty(t,"useTimeout",{enumerable:!0,get:function(){return Ne.default}});var ze=a(131);Object.defineProperty(t,"useTimeoutFn",{enumerable:!0,get:function(){return ze.default}});var Be=a(288);Object.defineProperty(t,"useTitle",{enumerable:!0,get:function(){return Be.default}});var He=a(156);Object.defineProperty(t,"useToggle",{enumerable:!0,get:function(){return He.default}});var Ge=a(289);Object.defineProperty(t,"useTween",{enumerable:!0,get:function(){return Ge.default}});var Ve=a(116);Object.defineProperty(t,"useUnmount",{enumerable:!0,get:function(){return Ve.default}});var $e=a(291);Object.defineProperty(t,"useUnmountPromise",{enumerable:!0,get:function(){return $e.default}});var Ue=a(88);Object.defineProperty(t,"useUpdate",{enumerable:!0,get:function(){return Ue.default}});var qe=a(97);Object.defineProperty(t,"useUpdateEffect",{enumerable:!0,get:function(){return qe.default}});var We=a(292);Object.defineProperty(t,"useUpsert",{enumerable:!0,get:function(){return We.default}});var Ke=a(293);Object.defineProperty(t,"useVibrate",{enumerable:!0,get:function(){return Ke.default}});var Ye=a(294);Object.defineProperty(t,"useVideo",{enumerable:!0,get:function(){return Ye.default}});var Xe=a(295);Object.defineProperty(t,"useStateValidator",{enumerable:!0,get:function(){return Xe.default}});var Je=a(296);Object.defineProperty(t,"useScrollbarWidth",{enumerable:!0,get:function(){return Je.useScrollbarWidth}});var Qe=a(298);Object.defineProperty(t,"useMultiStateValidator",{enumerable:!0,get:function(){return Qe.useMultiStateValidator}});var Ze=a(299);Object.defineProperty(t,"useWindowScroll",{enumerable:!0,get:function(){return Ze.default}});var et=a(300);Object.defineProperty(t,"useWindowSize",{enumerable:!0,get:function(){return et.default}});var tt=a(301);Object.defineProperty(t,"useMeasure",{enumerable:!0,get:function(){return tt.default}});var at=a(302);Object.defineProperty(t,"useRendersCount",{enumerable:!0,get:function(){return at.useRendersCount}});var nt=a(114);Object.defineProperty(t,"useFirstMountState",{enumerable:!0,get:function(){return nt.useFirstMountState}});var rt=a(303);Object.defineProperty(t,"useSet",{enumerable:!0,get:function(){return rt.default}});var it=a(304);Object.defineProperty(t,"createGlobalState",{enumerable:!0,get:function(){return it.createGlobalState}});var st=a(305);Object.defineProperty(t,"useHash",{enumerable:!0,get:function(){return st.useHash}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(){var e=n.useRef(!1),t=n.useCallback((function(){return e.current}),[]);return n.useEffect((function(){return e.current=!0,function(){e.current=!1}})),t}},,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=function(e){return(e+1)%1e6};t.default=function(){return n.useReducer(r,0)[1]}},,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(114);t.default=function(e,t){var a=r.useFirstMountState();n.useEffect((function(){if(!a)return e()}),t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){void 0===e&&(e={});var t=n.useState(e),a=t[0],r=t[1];return[a,n.useCallback((function(e){r((function(t){return Object.assign({},t,e instanceof Function?e(t):e)}))}),[r])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(131));t.default=function(e,t,a){void 0===t&&(t=0),void 0===a&&(a=[]);var n=i.default(e,t),s=n[0],o=n[1],l=n[2];return r.useEffect(l,a),[s,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){n.useEffect(e,[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(116));t.default=function(e){var t=r.useRef(0),a=r.useState(e),n=a[0],s=a[1],o=r.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){s(e)}))}),[]);return i.default((function(){cancelAnimationFrame(t.current)})),[n,o]}},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useFirstMountState=void 0;var n=a(1);t.useFirstMountState=function(){var e=n.useRef(!0);return e.current?(e.current=!1,!0):e.current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveHookState=void 0,t.resolveHookState=function(e,t){return"function"==typeof e?e(t):e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(100));t.default=function(e){var t=r.useRef(e);t.current=e,i.default((function(){return function(){return t.current()}}))}},,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t,a){var r=n.useRef(void 0);r.current&&a(t,r.current)||(r.current=t),n.useEffect(e,r.current)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){void 0===t&&(t=0);var a=n.useRef(!1),r=n.useRef(),i=n.useRef(e),s=n.useCallback((function(){return a.current}),[]),o=n.useCallback((function(){a.current=!1,r.current&&clearTimeout(r.current),r.current=setTimeout((function(){a.current=!0,i.current()}),t)}),[t]),l=n.useCallback((function(){a.current=null,r.current&&clearTimeout(r.current)}),[]);return n.useEffect((function(){i.current=e}),[e]),n.useEffect((function(){return o(),l}),[t]),[s,l,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.useState(null),r=a[0],i=a[1];return n.useEffect((function(){if(e.current&&"function"==typeof IntersectionObserver){var a=new IntersectionObserver((function(e){i(e[0])}),t);return a.observe(e.current),function(){i(null),a.disconnect()}}return function(){}}),[e.current,t.threshold,t.root,t.rootMargin]),r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i=function(){};t.default=function(e,t,a){if(!r.isClient)return[t,i,i];if(!e)throw new Error("useLocalStorage key may not be falsy");var s=a?a.raw?function(e){return e}:a.deserializer:JSON.parse,o=n.useState((function(){try{var n=a?a.raw?String:a.serializer:JSON.stringify,r=localStorage.getItem(e);return null!==r?s(r):(t&&localStorage.setItem(e,n(t)),t)}catch(e){return t}})),l=o[0],c=o[1],u=n.useCallback((function(t){try{var n="function"==typeof t?t(l):t;if(void 0===n)return;var r;r=a?a.raw?"string"==typeof n?n:JSON.stringify(n):a.serializer?a.serializer(n):JSON.stringify(n):JSON.stringify(n),localStorage.setItem(e,r),c(s(r))}catch(e){}}),[e,c]),d=n.useCallback((function(){try{localStorage.removeItem(e),c(void 0)}catch(e){}}),[e,c]);return[l,u,d]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(116));t.default=function(e,t){void 0===t&&(t=200);var a=r.useState(e),n=a[0],s=a[1],o=r.useRef(),l=r.useRef(null),c=r.useRef(0);return r.useEffect((function(){if(o.current)l.current=e,c.current=!0;else{s(e);var a=function(){c.current?(c.current=!1,s(l.current),o.current=setTimeout(a,t)):o.current=void 0};o.current=setTimeout(a,t)}}),[e]),i.default((function(){o.current&&clearTimeout(o.current)})),n}},function(e,t,a){"use strict";const n=a(306),r=a(307),i=a(308);function s(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function l(e,t){return t.decode?r(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function d(e){const t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,t){s((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const a=function(e){let t;switch(e.arrayFormat){case"index":return(e,a,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=a):n[e]=a};case"bracket":return(e,a,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],a):n[e]=[a]:n[e]=a};case"comma":case"separator":return(t,a,n)=>{const r="string"==typeof a&&a.split("").indexOf(e.arrayFormatSeparator)>-1?a.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===a?a:l(a,e);n[t]=r};default:return(e,t,a)=>{void 0!==a[e]?a[e]=[].concat(a[e],t):a[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const r of e.split("&")){let[e,s]=i(t.decode?r.replace(/\+/g," "):r,"=");s=void 0===s?null:["comma","separator"].includes(t.arrayFormat)?s:l(s,t),a(l(e,t),s,n)}for(const e of Object.keys(n)){const a=n[e];if("object"==typeof a&&null!==a)for(const e of Object.keys(a))a[e]=m(a[e],t);else n[e]=m(a,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const a=n[t];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?e[t]=c(a):e[t]=a,e}),Object.create(null))}t.extract=d,t.parse=p,t.stringify=(e,t)=>{if(!e)return"";s((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const a=a=>t.skipNull&&null==e[a]||t.skipEmptyString&&""===e[a],n=function(e){switch(e.arrayFormat){case"index":return t=>(a,n)=>{const r=a.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[",r,"]"].join("")]:[...a,[o(t,e),"[",o(r,e),"]=",o(n,e)].join("")]};case"bracket":return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,[o(t,e),"[]"].join("")]:[...a,[o(t,e),"[]=",o(n,e)].join("")];case"comma":case"separator":return t=>(a,n)=>null==n||0===n.length?a:0===a.length?[[o(t,e),"=",o(n,e)].join("")]:[[a,o(n,e)].join(e.arrayFormatSeparator)];default:return t=>(a,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?a:null===n?[...a,o(t,e)]:[...a,[o(t,e),"=",o(n,e)].join("")]}}(t),r={};for(const t of Object.keys(e))a(t)||(r[t]=e[t]);const i=Object.keys(r);return!1!==t.sort&&i.sort(t.sort),i.map((a=>{const r=e[a];return void 0===r?"":null===r?o(a,t):Array.isArray(r)?r.reduce(n(a),[]).join("&"):o(a,t)+"="+o(r,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[a,n]=i(e,"#");return Object.assign({url:a.split("?")[0]||"",query:p(d(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:l(n,t)}:{})},t.stringifyUrl=(e,a)=>{a=Object.assign({encode:!0,strict:!0},a);const n=u(e.url).split("?")[0]||"",r=t.extract(e.url),i=t.parse(r,{sort:!1}),s=Object.assign(i,e.query);let l=t.stringify(s,a);l&&(l=`?${l}`);let c=function(e){let t="";const a=e.indexOf("#");return-1!==a&&(t=e.slice(a)),t}(e.url);return e.fragmentIdentifier&&(c=`#${o(e.fragmentIdentifier,a)}`),`${n}${l}${c}`}},,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(154));t.default=function(e,t){void 0===t&&(t=[]);var a=i.default(e,t,{loading:!0}),n=a[0],s=a[1];return r.useEffect((function(){s()}),[s]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(82));t.default=function(e,t,a){void 0===t&&(t=[]),void 0===a&&(a={loading:!1});var s=r.useRef(0),o=i.default(),l=r.useState(a),c=l[0],u=l[1],d=r.useCallback((function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];var r=++s.current;return u((function(e){return n.__assign(n.__assign({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return o()&&r===s.current&&u({value:e,loading:!1}),e}),(function(e){return o()&&r===s.current&&u({error:e,loading:!1}),e}))}),t);return[c,d]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importStar(a(1)),i=a(1),s=n.__importDefault(a(98)),o=n.__importDefault(a(211));t.default=function(e){return function(t){var a,l;l=r.isValidElement(t)?(a=t).props:t;var c=s.default({buffered:[],time:0,duration:0,paused:!0,muted:!1,volume:1}),u=c[0],d=c[1],m=i.useRef(null),p=function(e,t){return function(a){try{t&&t(a)}finally{e&&e(a)}}},f=function(){return d({paused:!1})},g=function(){return d({paused:!0})},h=function(){var e=m.current;e&&d({muted:e.muted,volume:e.volume})},b=function(){var e=m.current;if(e){var t=e.duration,a=e.buffered;d({duration:t,buffered:o.default(a)})}},E=function(){var e=m.current;e&&d({time:e.currentTime})},v=function(){var e=m.current;e&&d({buffered:o.default(e.buffered)})};a=a?r.cloneElement(a,n.__assign(n.__assign({controls:!1},l),{ref:m,onPlay:p(l.onPlay,f),onPause:p(l.onPause,g),onVolumeChange:p(l.onVolumeChange,h),onDurationChange:p(l.onDurationChange,b),onTimeUpdate:p(l.onTimeUpdate,E),onProgress:p(l.onProgress,v)})):r.createElement(e,n.__assign(n.__assign({controls:!1},l),{ref:m,onPlay:p(l.onPlay,f),onPause:p(l.onPause,g),onVolumeChange:p(l.onVolumeChange,h),onDurationChange:p(l.onDurationChange,b),onTimeUpdate:p(l.onTimeUpdate,E),onProgress:p(l.onProgress,v)}));var y=!1,x={play:function(){var e=m.current;if(e&&!y){var t=e.play();if("object"==typeof t){y=!0;var a=function(){y=!1};t.then(a,a)}return t}},pause:function(){var e=m.current;if(e&&!y)return e.pause()},seek:function(e){var t=m.current;t&&void 0!==u.duration&&(e=Math.min(u.duration,Math.max(0,e)),t.currentTime=e)},volume:function(e){var t=m.current;t&&(e=Math.min(1,Math.max(0,e)),t.volume=e,d({volume:e}))},mute:function(){var e=m.current;e&&(e.muted=!0)},unmute:function(){var e=m.current;e&&(e.muted=!1)}};return i.useEffect((function(){var e=m.current;e&&(d({volume:e.volume,muted:e.muted,paused:e.paused}),l.autoPlay&&e.paused&&x.play())}),[l.src]),[a,u,x,m]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=function(e,t){return"boolean"==typeof t?t:!e};t.default=function(e){return n.useReducer(r,e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(158)),s=a(115);t.default=function(e,t,a){void 0===e&&(e=0),void 0===t&&(t=null),void 0===a&&(a=null);var n=s.resolveHookState(e);"number"!=typeof n&&console.error("initialValue has to be a number, got "+typeof e),"number"==typeof a?n=Math.max(n,a):null!==a&&console.error("min has to be a number, got "+typeof a),"number"==typeof t?n=Math.min(n,t):null!==t&&console.error("max has to be a number, got "+typeof t);var o=i.default(n),l=o[0],c=o[1];return[l(),r.useMemo((function(){var e=function(e){var n=l(),r=s.resolveHookState(e,n);n!==r&&("number"==typeof a&&(r=Math.max(r,a)),"number"==typeof t&&(r=Math.min(r,t)),n!==r&&c(r))};return{get:l,set:e,inc:function(t){void 0===t&&(t=1);var a=s.resolveHookState(t,l());"number"!=typeof a&&console.error("delta has to be a number or function returning a number, got "+typeof a),e((function(e){return e+a}))},dec:function(t){void 0===t&&(t=1);var a=s.resolveHookState(t,l());"number"!=typeof a&&console.error("delta has to be a number or function returning a number, got "+typeof a),e((function(e){return e-a}))},reset:function(t){void 0===t&&(t=n);var a=s.resolveHookState(t,l());"number"!=typeof a&&console.error("value has to be a number or function returning a number, got "+typeof a),n=a,e(a)}}}),[n,a,t])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(88)),s=a(115);t.default=function(e){var t=r.useRef(s.resolveHookState(e)),a=i.default();return r.useMemo((function(){return[function(){return t.current},function(e){t.current=s.resolveHookState(e,t.current),a()}]}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(62),i=n.__importDefault(a(130));t.default=function(e,t){i.default(e,t,r.isDeepEqual)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62).isClient?window:null,i=function(e){return!!e.addEventListener},s=function(e){return!!e.on};t.default=function(e,t,a,o){void 0===a&&(a=r),n.useEffect((function(){if(t&&a)return i(a)?a.addEventListener(e,t,o):s(a)&&a.on(e,t,o),function(){i(a)?a.removeEventListener(e,t,o):s(a)&&a.off(e,t,o)}}),[e,t,a,JSON.stringify(o)])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){void 0===t&&(t=!0);var a=n.useState(!1),r=a[0],i=a[1];return n.useEffect((function(){var a=function(){return i(!0)},n=function(){return i(!1)};t&&e&&e.current&&(e.current.addEventListener("mouseover",a),e.current.addEventListener("mouseout",n));var r=e.current;return function(){t&&r&&(r.removeEventListener("mouseover",a),r.removeEventListener("mouseout",n))}}),[t,e]),r}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(160)),s=function(){};t.default=function(e,t,a,n){void 0===t&&(t=s),void 0===a&&(a={}),void 0===n&&(n=[e]);var o=a.event,l=void 0===o?"keydown":o,c=a.target,u=a.options,d=r.useMemo((function(){var a,n="function"==typeof(a=e)?a:"string"==typeof a?function(e){return e.key===a}:a?function(){return!0}:function(){return!1};return function(e){if(n(e))return t(e)}}),n);i.default(l,d,c,u)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(162));t.default=function(e){var t=r.useState([!1,null]),a=t[0],n=t[1];return i.default(e,(function(e){return n([!0,e])}),{event:"keydown"},[a]),i.default(e,(function(e){return n([!1,e])}),{event:"keyup"},[a]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){var t=n.useRef(e);return t.current=e,t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){n.useEffect((function(){return e&&e(),function(){t&&t()}}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(88)),s=a(115);t.default=function(e){void 0===e&&(e=[]);var t=r.useRef(s.resolveHookState(e)),a=i.default(),n=r.useMemo((function(){var r={set:function(e){t.current=s.resolveHookState(e,t.current),a()},push:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length&&n.set((function(t){return t.concat(e)}))},updateAt:function(e,t){n.set((function(a){var n=a.slice();return n[e]=t,n}))},insertAt:function(e,t){n.set((function(a){var n=a.slice();return e>n.length?n[e]=t:n.splice(e,0,t),n}))},update:function(e,t){n.set((function(a){return a.map((function(a){return e(a,t)?t:a}))}))},updateFirst:function(e,a){var r=t.current.findIndex((function(t){return e(t,a)}));r>=0&&n.updateAt(r,a)},upsert:function(e,a){var r=t.current.findIndex((function(t){return e(t,a)}));r>=0?n.updateAt(r,a):n.push(a)},sort:function(e){n.set((function(t){return t.slice().sort(e)}))},filter:function(e,t){n.set((function(a){return a.slice().filter(e,t)}))},removeAt:function(e){n.set((function(t){var a=t.slice();return a.splice(e,1),a}))},clear:function(){n.set([])},reset:function(){n.set(s.resolveHookState(e).slice())}};return r.remove=r.removeAt,r}),[]);return[t.current,n]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(100));t.default=function(e){n.default((function(){e()}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(101));t.default=function(e){var t=i.default({docX:0,docY:0,posX:0,posY:0,elX:0,elY:0,elH:0,elW:0}),a=t[0],n=t[1];return r.useEffect((function(){var t=function(t){if(e&&e.current){var a=e.current.getBoundingClientRect(),r=a.left,i=a.top,s=a.width,o=a.height,l=r+window.pageXOffset,c=i+window.pageYOffset,u=t.pageX-l,d=t.pageY-c;n({docX:t.pageX,docY:t.pageY,posX:l,posY:c,elX:u,elY:d,elH:o,elW:s})}};return document.addEventListener("mousemove",t),function(){document.removeEventListener("mousemove",t)}}),[e]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(76));t.default=function(e,t){void 0===e&&(e=1e12),void 0===t&&(t=0);var a=r.useState(0),n=a[0],s=a[1];return i.default((function(){var a,n,r,i=function(){var t=Math.min(1,(Date.now()-r)/e);s(t),o()},o=function(){a=requestAnimationFrame(i)},l=setTimeout((function(){n=setTimeout((function(){cancelAnimationFrame(a),s(1)}),e),r=Date.now(),o()}),t);return function(){clearTimeout(n),clearTimeout(l),cancelAnimationFrame(a)}}),[e,t]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=parseInt(r.version.substr(0,r.version.indexOf(".")))>15;t.default=function(e,t){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var o=e.render,l=e.children,c=void 0===l?o:l,u=e.component,d=e.comp,m=void 0===d?u:d;return"function"==typeof c?c.apply(void 0,n.__spreadArrays([t],a)):m?r.createElement(m,t):c instanceof Array?i?c:r.createElement.apply(void 0,n.__spreadArrays(["div",null],c)):c&&c instanceof Object?"string"==typeof c.type?c:r.cloneElement(c,Object.assign({},c.props,t)):c||null}},function(e,t,a){e.exports=a(11)(173)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){return function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];return n.useMemo((function(){return e.apply(void 0,t)}),t)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.createContext(void 0);return[function(){var e=n.useContext(a);if(null==e)throw new Error("useReducerContext must be used inside a ReducerProvider.");return e},function(r){var i=r.children,s=r.initialState;return function(e,t){return n.createElement(a.Provider,e,t)}({value:n.useReducer(e,void 0!==s?s:t)},i)},a]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(97));t.default=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var a,n=(a=e,function(e,t){return a.reduceRight((function(t,a){return a(e)(t)}),t)});return function(e,t,a){void 0===a&&(a=function(e){return e});var s=r.useRef(a(t)),o=r.useState(s.current)[1],l=r.useCallback((function(t){return s.current=e(s.current,t),o(s.current),t}),[e]),c=r.useRef(n({getState:function(){return s.current},dispatch:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.current.apply(c,e)}},l));return i.default((function(){c.current=n({getState:function(){return s.current},dispatch:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.current.apply(c,e)}},l)}),[l]),[s.current,c.current]}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){var t=n.createContext(void 0);return[function(){var e=n.useContext(t);if(null==e)throw new Error("useStateContext must be used inside a StateProvider.");return e},function(a){var r=a.children,i=a.initialValue;return function(e,a){return n.createElement(t.Provider,e,a)}({value:n.useState(void 0!==i?i:e)},r)},t]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(153));t.default=function(e,t){void 0===t&&(t=[]);var a=r.useState(0),s=a[0],o=a[1],l=i.default(e,n.__spreadArrays(t,[s])),c=l.loading,u=r.useCallback((function(){c||o((function(e){return e+1}))}),n.__spreadArrays(t,[c]));return n.__assign(n.__assign({},l),{retry:u})}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(155)).default("audio");t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],a=0;a<e.length;a++)t.push({start:e.start(a),end:e.end(a)});return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i="object"==typeof navigator?navigator:void 0,s=i&&"function"==typeof i.getBattery;t.default=s?function(){var e=n.useState({isSupported:!0,fetched:!1}),t=e[0],a=e[1];return n.useEffect((function(){var e=!0,n=null,s=function(){if(e&&n){var i={isSupported:!0,fetched:!0,level:n.level,charging:n.charging,dischargingTime:n.dischargingTime,chargingTime:n.chargingTime};!r.isDeepEqual(t,i)&&a(i)}};return i.getBattery().then((function(t){e&&(n=t,r.on(n,"chargingchange",s),r.on(n,"chargingtimechange",s),r.on(n,"dischargingtimechange",s),r.on(n,"levelchange",s),s())})),function(){e=!1,n&&(r.off(n,"chargingchange",s),r.off(n,"chargingtimechange",s),r.off(n,"dischargingtimechange",s),r.off(n,"levelchange",s))}}),[]),t}:function(){return{isSupported:!1}}},function(e,t,a){"use strict";e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){if(t.constructor!==a.constructor)return!1;var n,r,i;if(Array.isArray(t)){if((n=t.length)!=a.length)return!1;for(r=n;0!=r--;)if(!e(t[r],a[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(a).length)return!1;for(r=n;0!=r--;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=n;0!=r--;){var s=i[r];if(!("_owner"===s&&t.$$typeof||e(t[s],a[s])))return!1}return!0}return t!=t&&a!=a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){void 0===e&&(e=!0);var a=n.useCallback((function(a){if("function"!=typeof e||e())return a.preventDefault(),t&&(a.returnValue=t),t}),[e,t]);n.useEffect((function(){if(e)return window.addEventListener("beforeunload",a),function(){return window.removeEventListener("beforeunload",a)}}),[e,a])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(156));t.default=n.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i=["mousedown","touchstart"];t.default=function(e,t,a){void 0===a&&(a=i);var s=n.useRef(t);n.useEffect((function(){s.current=t}),[t]),n.useEffect((function(){for(var t=function(t){var a=e.current;a&&!a.contains(t.target)&&s.current(t)},n=0,i=a;n<i.length;n++){var o=i[n];r.on(document,o,t)}return function(){for(var e=0,n=a;e<n.length;e++){var i=n[e];r.off(document,i,t)}}}),[a,e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(218));t.default=function(e){var t=r.useState((function(){return i.default.get(e)||null})),a=t[0],n=t[1];return[a,r.useCallback((function(t,a){i.default.set(e,t,a),n(t)}),[e]),r.useCallback((function(){i.default.remove(e),n(null)}),[e])]}},function(e,t,a){var n,r,i;
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */i=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function a(n){function r(){}function i(t,a,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(a);/^[\{\[]/.test(s)&&(a=s)}catch(e){}a=n.write?n.write(a,t):encodeURIComponent(String(a)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in i)i[l]&&(o+="; "+l,!0!==i[l]&&(o+="="+i[l].split(";")[0]));return document.cookie=t+"="+a+o}}function s(e,a){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var o=i[s].split("="),l=o.slice(1).join("=");a||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(o[0]);if(l=(n.read||n)(l,c)||t(l),a)try{l=JSON.parse(l)}catch(e){}if(r[c]=l,e===c)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return s(e,!1)},r.getJSON=function(e){return s(e,!0)},r.remove=function(t,a){i(t,"",e(a,{expires:-1}))},r.defaults={},r.withConverter=a,r}((function(){}))},void 0===(r="function"==typeof(n=i)?n.call(t,a,t,e):n)||(e.exports=r),e.exports=i()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importDefault(a(220)),i=a(1),s=n.__importDefault(a(82)),o=n.__importDefault(a(98));t.default=function(){var e=s.default(),t=o.default({value:void 0,error:void 0,noUserInteraction:!0}),a=t[0],n=t[1];return[a,i.useCallback((function(t){var a,i;if(e())try{if("string"!=typeof t&&"number"!=typeof t){var s=new Error("Cannot copy typeof "+typeof t+" to clipboard, must be a string");return void n({value:t,error:s,noUserInteraction:!0})}if(""===t)return s=new Error("Cannot copy empty string to clipboard."),void n({value:t,error:s,noUserInteraction:!0});i=t.toString(),a=r.default(i),n({value:i,error:void 0,noUserInteraction:a})}catch(s){n({value:i,error:s,noUserInteraction:a})}}),[])]}},function(e,t,a){"use strict";var n=a(221),r={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var a,i,s,o,l,c,u=!1;t||(t={}),a=t.debug||!1;try{if(s=n(),o=document.createRange(),l=document.getSelection(),(c=document.createElement("span")).textContent=e,c.style.all="unset",c.style.position="fixed",c.style.top=0,c.style.clip="rect(0, 0, 0, 0)",c.style.whiteSpace="pre",c.style.webkitUserSelect="text",c.style.MozUserSelect="text",c.style.msUserSelect="text",c.style.userSelect="text",c.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=r[t.format]||r.default;window.clipboardData.setData(i,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(c),o.selectNodeContents(c),l.addRange(o),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),i=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(i,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(o):l.removeAllRanges()),c&&document.body.removeChild(c),s()}return u}},function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(223),i=a(224),s=a(225),o=a(227),l=a(1),c=n.__importDefault(a(76)),u=r.create();i.addon(u),s.addon(u);var d=0;t.default=function(e){var t=l.useMemo((function(){return"react-use-css-"+(d++).toString(36)}),[]),a=l.useMemo((function(){return new u.VSheet}),[]);return c.default((function(){var n={};return o.cssToTree(n,e,"."+t,""),a.diff(n),function(){a.diff({})}})),t}},function(e,t,a){"use strict";var n=/[A-Z]/g;t.create=function(e){var t=(e=e||{}).assign||Object.assign,a=t({raw:"",pfx:"_",client:"object"==typeof window,assign:t,stringify:JSON.stringify,kebab:function(e){return e.replace(n,"-$&").toLowerCase()},decl:function(e,t){return(e=a.kebab(e))+":"+t+";"},hash:function(e){return function(e){for(var t=5381,a=e.length;a;)t=33*t^e.charCodeAt(--a);return"_"+(t>>>0).toString(36)}(a.stringify(e))},selector:function(e,t){return e+(":"===t[0]?"":" ")+t},putRaw:function(e){a.raw+=e}},e);return a.client&&(a.sh||document.head.appendChild(a.sh=document.createElement("style")),a.putRaw=function(e){var t=a.sh.sheet;try{t.insertRule(e,t.cssRules.length)}catch(e){}}),a.put=function(e,t,n){var r,i,s="",o=[];for(r in t)(i=t[r])instanceof Object&&!(i instanceof Array)?o.push(r):s+=a.decl(r,i,e,n);s&&(s=e+"{"+s+"}",a.putRaw(n?n+"{"+s+"}":s));for(var l=0;l<o.length;l++)"@"===(r=o[l])[0]&&"@font-face"!==r?a.putAt(e,t[r],r):a.put(a.selector(e,r),t[r],n)},a.putAt=a.put,a}},function(e,t,a){"use strict";t.addon=function(e){e.client&&(document.head.appendChild(e.msh=document.createElement("style")),e.createRule=function(t,a){var n=t+"{}";a&&(n=a+"{"+n+"}");var r=a?e.msh.sheet:e.sh.sheet,i=r.insertRule(n,r.cssRules.length),s=(r.cssRules||r.rules)[i];if(s.index=i,a){var o=(s.cssRules||s.rules)[0];s.style=o.style,s.styleMap=o.styleMap}return s})}},function(e,t,a){"use strict";var n=a(226).removeRule;t.addon=function(e){if(e.client){var t=e.kebab;a.prototype.diff=function(e){var a,n=this.decl,r=this.rule.style;for(a in n)void 0===e[a]&&r.removeProperty(a);for(a in e)e[a]!==n[a]&&r.setProperty(t(a),e[a]);this.decl=e},a.prototype.del=function(){n(this.rule)},r.prototype.diff=function(e){var t=this.tree;for(var n in t)if(void 0===e[n]){var r=t[n];for(var i in r)r[i].del()}for(var n in e)if(void 0===t[n])for(var i in e[n])(l=new a(i,n)).diff(e[n][i]),e[n][i]=l;else{var s=t[n],o=e[n];for(var i in s)o[i]||s[i].del();for(var i in o){var l;(l=s[i])?(l.diff(o[i]),o[i]=l):((l=new a(i,n)).diff(o[i]),o[i]=l)}}this.tree=e},e.VRule=a,e.VSheet=r}function a(t,a){this.rule=e.createRule(t,a),this.decl={}}function r(){this.tree={}}}},function(e,t){t.removeRule=function(e){var t=e.index,a=e.parentStyleSheet,n=a.cssRules||a.rules;for(t=Math.max(t,n.length-1);t>=0;){if(n[t]===e){a.deleteRule(t);break}t--}}},function(e,t){t.cssToTree=function e(t,a,n,r){var i,s,o={},l=!1;for(i in a)"object"!=typeof(s=a[i])&&(l=!0,o[i]=s);for(i in l&&(t[r]||(t[r]={}),t[r][n]=o),a)if("object"==typeof(s=a[i]))if("@"===i[0])e(t,s,n,i);else{var c=i.indexOf("&")>-1,u=n.split(",");if(c)for(var d=0;d<u.length;d++)u[d]=i.replace(/&/g,u[d]);else for(d=0;d<u.length;d++)u[d]=u[d]+" "+i;e(t,s,u.join(","),r)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.useState(t),r=a[0],i=a[1];return null==r?[e,i]:[r,i]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=function(){};t.default=function(e,t){void 0===e&&(e={}),void 0===t&&(t=[]);var a=e.onFiles,s=e.onText,o=e.onUri,l=r.useState(!1),c=l[0],u=l[1],d=r.useCallback(u,[]),m=r.useMemo((function(){return function(e){return function(t,a){var n=t.getData("text/uri-list");if(n)(e.onUri||i)(n,a);else if(t.files&&t.files.length)(e.onFiles||i)(Array.from(t.files),a);else if(a.clipboardData){var r=a.clipboardData.getData("text");(e.onText||i)(r,a)}}}(e)}),[a,s,o]);return r.useEffect((function(){var e=function(e){e.preventDefault(),d(!0)},t=function(e){e.preventDefault(),d(!0)},a=function(){d(!1)},n=function(){d(!1)},r=function(e){e.preventDefault(),d(!1),m(e.dataTransfer,e)},i=function(e){m(e.clipboardData,e)};return document.addEventListener("dragover",e),document.addEventListener("dragenter",t),document.addEventListener("dragleave",a),document.addEventListener("dragexit",n),document.addEventListener("drop",r),s&&document.addEventListener("paste",i),function(){document.removeEventListener("dragover",e),document.removeEventListener("dragenter",t),document.removeEventListener("dragleave",a),document.removeEventListener("dragexit",n),document.removeEventListener("drop",r),document.removeEventListener("paste",i)}}),n.__spreadArrays([m],t)),{over:c}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(82)),s=function(){};t.default=function(e){void 0===e&&(e={});var t=e.onFiles,a=e.onText,n=e.onUri,o=i.default(),l=r.useState(!1),c=l[0],u=l[1],d=r.useMemo((function(){return function(e,t){return function(a,n){var r=a.getData("text/uri-list");r?(e.onUri||s)(r,n):a.files&&a.files.length?(e.onFiles||s)(Array.from(a.files),n):a.items&&a.items.length&&a.items[0].getAsString((function(a){t&&(e.onText||s)(a,n)}))}}(e,o())}),[t,a,n]),m=r.useMemo((function(){return function(e,t){return{onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault(),t(!0)},onDragLeave:function(){t(!1)},onDrop:function(a){a.preventDefault(),a.persist(),t(!1),e(a.dataTransfer,a)},onPaste:function(t){t.persist(),e(t.clipboardData,t)}}}(d,u)}),[d,u]);return[m,{over:c}]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ensuredForwardRef=void 0;var n=a(1);function r(e){var t=n.useRef(e&&e.current);return n.useEffect((function(){e&&(e.current=t.current)}),[e]),t}t.default=r,t.ensuredForwardRef=function(e){return n.forwardRef((function(t,a){var n=r(a);return e(t,n)}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(){var e=n.useState(null),t=e[0],a=e[1];return n.useEffect((function(){if(t)throw t}),[t]),n.useCallback((function(e){a(e)}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){n.useEffect((function(){var t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}),[e])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(235)),s=n.__importDefault(a(76)),o=function(){};t.default=function(e,t,a){void 0===a&&(a={});var n=a.video,l=a.onClose,c=void 0===l?o:l,u=r.useState(t),d=u[0],m=u[1];return s.default((function(){if(t&&e.current){var a=function(){n.current.removeEventListener("webkitendfullscreen",a),c()},r=function(){if(i.default.isEnabled){var e=i.default.isFullscreen;m(e),e||c()}};if(i.default.isEnabled){try{i.default.request(e.current),m(!0)}catch(e){c(e),m(!1)}i.default.on("change",r)}else n&&n.current&&n.current.webkitEnterFullscreen?(n.current.webkitEnterFullscreen(),n.current.addEventListener("webkitendfullscreen",a),m(!0)):(c(),m(!1));return function(){if(m(!1),i.default.isEnabled)try{i.default.off("change",r),i.default.exit()}catch(e){}else n&&n.current&&n.current.webkitExitFullscreen&&(n.current.removeEventListener("webkitendfullscreen",a),n.current.webkitExitFullscreen())}}}),[t,n,e]),d}},function(e,t,a){
/*!
* screenfull
* v5.0.0 - 2019-09-09
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},a=e.exports,n=function(){for(var e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=a.length,i={};n<r;n++)if((e=a[n])&&e[1]in t){for(n=0;n<e.length;n++)i[a[0][n]]=e[n];return i}return!1}(),r={change:n.fullscreenchange,error:n.fullscreenerror},i={request:function(e){return new Promise(function(a,r){var i=function(){this.off("change",i),a()}.bind(this);this.on("change",i),e=e||t.documentElement,Promise.resolve(e[n.requestFullscreen]()).catch(r)}.bind(this))},exit:function(){return new Promise(function(e,a){if(this.isFullscreen){var r=function(){this.off("change",r),e()}.bind(this);this.on("change",r),Promise.resolve(t[n.exitFullscreen]()).catch(a)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,a){var n=r[e];n&&t.addEventListener(n,a,!1)},off:function(e,a){var n=r[e];n&&t.removeEventListener(n,a,!1)},raw:n};n?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[n.fullscreenEnabled])}}}),a?e.exports=i:window.screenfull=i):a?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1);t.default=function(e){var t,a=r.useState({loading:!0,accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:Date.now()}),i=a[0],s=a[1],o=!0,l=function(e){o&&s({loading:!1,accuracy:e.coords.accuracy,altitude:e.coords.altitude,altitudeAccuracy:e.coords.altitudeAccuracy,heading:e.coords.heading,latitude:e.coords.latitude,longitude:e.coords.longitude,speed:e.coords.speed,timestamp:e.timestamp})},c=function(e){return o&&s((function(t){return n.__assign(n.__assign({},t),{loading:!1,error:e})}))};return r.useEffect((function(){return navigator.geolocation.getCurrentPosition(l,c,e),t=navigator.geolocation.watchPosition(l,c,e),function(){o=!1,navigator.geolocation.clearWatch(t)}}),[]),i}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(88));t.default=function(e){void 0===e&&(e={});var t=i.default(),a=r.useRef(n.__assign({},e));return[r.useCallback((function(){return a.current}),[]),r.useCallback((function(e){e&&(Object.assign(a.current,e),t())}),[])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(239);t.default=function(e,t){void 0===t&&(t=0);var a=n.useRef((function(){}));n.useEffect((function(){a.current=e})),n.useEffect((function(){if(null!==t){var e=r.setHarmonicInterval((function(){return a.current()}),t);return function(){return r.clearHarmonicInterval(e)}}}),[t])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0,r={};t.clearHarmonicInterval=function(e){var t=e.bucket,a=e.id;delete t.listeners[a];var n=!1;for(var i in t.listeners){n=!0;break}n||(clearInterval(t.timer),delete r[t.ms])},t.setHarmonicInterval=function(e,t){var a,i=n++;if(r[t])r[t].listeners[i]=e;else{var s=setInterval((function(){for(var e,a=r[t].listeners,n=!1,i=0,s=Object.values(a);i<s.length;i++){var o=s[i];try{o()}catch(t){n=!0,e=t}}if(n)throw e}),t);r[t]={ms:t,timer:s,listeners:(a={},a[i]=e,a)}}return{bucket:r[t],id:i}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importStar(a(1)),r=n.useState,i=function(){};t.default=function(e){var t,a,s=r(!1),o=s[0],l=s[1];return"function"==typeof e&&(e=e(o)),[n.cloneElement(e,{onMouseEnter:(a=e.props.onMouseEnter,function(e){(a||i)(e),l(!0)}),onMouseLeave:(t=e.props.onMouseLeave,function(e){(t||i)(e),l(!1)})}),o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(242),i=a(62),s=["mousemove","mousedown","resize","keydown","touchstart","wheel"];t.default=function(e,t,a){void 0===e&&(e=6e4),void 0===t&&(t=!1),void 0===a&&(a=s);var o=n.useState(t),l=o[0],c=o[1];return n.useEffect((function(){for(var t,n=!0,s=l,o=function(e){n&&(s=e,c(e))},u=r.throttle(50,(function(){s&&o(!1),clearTimeout(t),t=setTimeout((function(){return o(!0)}),e)})),d=function(){document.hidden||u()},m=0;m<a.length;m++)i.on(window,a[m],u);return i.on(document,"visibilitychange",d),t=setTimeout((function(){return o(!0)}),e),function(){n=!1;for(var e=0;e<a.length;e++)i.off(window,a[e],u);i.off(document,"visibilitychange",d)}}),[e,a]),l}},function(e,t,a){"use strict";function n(e,t,a,n){var r,i=!1,s=0;function o(){r&&clearTimeout(r)}function l(){var l=this,c=Date.now()-s,u=arguments;function d(){s=Date.now(),a.apply(l,u)}i||(n&&!r&&d(),o(),void 0===n&&c>e?d():!0!==t&&(r=setTimeout(n?function(){r=void 0}:d,void 0===n?e-c:e)))}return"boolean"!=typeof t&&(n=a,a=t,t=void 0),l.cancel=function(){o(),i=!0},l}Object.defineProperty(t,"__esModule",{value:!0}),t.throttle=n,t.debounce=function(e,t,a){return void 0===a?n(e,t,!1):n(e,a,!1!==t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.useRef((function(){}));n.useEffect((function(){a.current=e})),n.useEffect((function(){if(null!==t){var e=setInterval((function(){return a.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){return void 0===e&&(e={laptopL:1440,laptop:1024,tablet:768}),function(){var t=n.useState(0),a=t[0],r=t[1];n.useEffect((function(){var e=function(){r(window.innerWidth)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}));var i=n.useMemo((function(){return Object.entries(e).sort((function(e,t){return e[1]>=t[1]?1:-1}))}),[e]),s=i.reduce((function(e,t){var n=t[0],r=t[1];return a>=r?n:e}),i[0][0]);return s}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importDefault(a(163)),i=n.__importDefault(a(97));t.default=function(e,t,a,n){void 0===n&&(n=r.default);var s=n(e),o=s[0],l=s[1];i.default((function(){!o&&a?a(l):o&&t&&t(l)}),[o])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i=function(e){var t=window.history,a=t[e];t[e]=function(t){var n=a.apply(this,arguments),r=new Event(e.toLowerCase());return r.state=t,window.dispatchEvent(r),n}};r.isClient&&(i("pushState"),i("replaceState"));var s=function(e){var t=window.history,a=t.state,n=t.length,r=window.location;return{trigger:e,state:a,length:n,hash:r.hash,host:r.host,hostname:r.hostname,href:r.href,origin:r.origin,pathname:r.pathname,port:r.port,protocol:r.protocol,search:r.search}},o="function"==typeof Event;t.default=r.isClient&&o?function(){var e=n.useState(s("load")),t=e[0],a=e[1];return n.useEffect((function(){var e=function(){return a(s("popstate"))},t=function(){return a(s("pushstate"))},n=function(){return a(s("replacestate"))};return r.on(window,"popstate",e),r.on(window,"pushstate",t),r.on(window,"replacestate",n),function(){r.off(window,"popstate",e),r.off(window,"pushstate",t),r.off(window,"replacestate",n)}}),[]),t}:function(){return{trigger:"load",length:1}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClosestBody=void 0;var n=a(1);function r(e){if(!e)return null;if("BODY"===e.tagName)return e;if("IFRAME"===e.tagName){var t=e.contentDocument;return t?t.body:null}return e.offsetParent?r(e.offsetParent):null}function i(e){var t=e||window.event;return t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)}t.getClosestBody=r;var s="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),o=new Map,l="object"==typeof document?document:void 0,c=!1;t.default=l?function(e,t){void 0===e&&(e=!0);var a=n.useRef(l.body);t=t||a;var u=function(e){var t=o.get(e);t&&(1===t.counter?(o.delete(e),s?(e.ontouchmove=null,c&&(document.removeEventListener("touchmove",i),c=!1)):e.style.overflow=t.initialOverflow):o.set(e,{counter:t.counter-1,initialOverflow:t.initialOverflow}))};n.useEffect((function(){var a=r(t.current);a&&(e?function(e){var t=o.get(e);t?o.set(e,{counter:t.counter+1,initialOverflow:t.initialOverflow}):(o.set(e,{counter:1,initialOverflow:e.style.overflow}),s?c||(document.addEventListener("touchmove",i,{passive:!1}),c=!0):e.style.overflow="hidden")}(a):u(a))}),[e,t.current]),n.useEffect((function(){var e=r(t.current);if(e)return function(){u(e)}}),[])}:function(e,t){void 0===e&&(e=!0)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importDefault(a(100)),i=n.__importDefault(a(97));t.default=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];r.default((function(){return console.log.apply(console,n.__spreadArrays([e+" mounted"],t)),function(){return console.log(e+" unmounted")}})),i.default((function(){console.log.apply(console,n.__spreadArrays([e+" updated"],t))}))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=function(e){(function(e){return"touches"in e})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()};t.default=function(e,t){var a=void 0===t?{}:t,i=a.isPreventDefault,s=void 0===i||i,o=a.delay,l=void 0===o?300:o,c=n.useRef(),u=n.useRef(),d=n.useCallback((function(t){s&&t.target&&(t.target.addEventListener("touchend",r,{passive:!1}),u.current=t.target),c.current=setTimeout((function(){return e(t)}),l)}),[e,l,s]),m=n.useCallback((function(){c.current&&clearTimeout(c.current),s&&u.current&&u.current.removeEventListener("touchend",r)}),[s]);return{onMouseDown:function(e){return d(e)},onTouchStart:function(e){return d(e)},onMouseUp:m,onMouseLeave:m,onTouchEnd:m}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1);t.default=function(e){void 0===e&&(e={});var t=r.useState(e),a=t[0],i=t[1],s=r.useMemo((function(){return{set:function(e,t){i((function(a){var r;return n.__assign(n.__assign({},a),((r={})[e]=t,r))}))},setAll:function(e){i(e)},remove:function(e){i((function(t){var a=t,r=e;return a[r],n.__rest(a,["symbol"==typeof r?r:r+""])}))},reset:function(){return i(e)}}}),[i]),o=n.__assign({get:r.useCallback((function(e){return a[e]}),[a])},s);return[a,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62);t.default=function(e,t){void 0===t&&(t=!1);var a=n.useState(r.isClient?function(){return window.matchMedia(e).matches}:t),i=a[0],s=a[1];return n.useEffect((function(){var t=!0,a=window.matchMedia(e),n=function(){t&&s(!!a.matches)};return a.addListener(n),s(a.matches),function(){t=!1,a.removeListener(n)}}),[e]),i}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i=function(){};t.default="object"==typeof navigator&&navigator.mediaDevices?function(){var e=n.useState({}),t=e[0],a=e[1];return n.useEffect((function(){var e=!0,t=function(){navigator.mediaDevices.enumerateDevices().then((function(t){e&&a({devices:t.map((function(e){return{deviceId:e.deviceId,groupId:e.groupId,kind:e.kind,label:e.label}}))})})).catch(i)};return r.on(navigator.mediaDevices,"devicechange",t),t(),function(){e=!1,r.off(navigator.mediaDevices,"devicechange",t)}}),[]),t}:function(){return{}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMediatedState=void 0;var n=a(1);t.useMediatedState=function(e,t){var a=n.useRef(e),r=n.useState(t),i=r[0],s=r[1];return[i,n.useCallback((function(e){2===a.current.length?a.current(e,s):s(a.current(e))}),[i])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.useMemo((function(){return function(t,a){var n;return(n=e(t))[a.type].apply(n,a.payload)}}),[e]),r=n.useReducer(a,t),i=r[0],s=r[1],o=n.useMemo((function(){return Object.keys(e(t)).reduce((function(e,t){return e[t]=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return s({type:t,payload:e})},e}),{})}),[e,t]);return[i,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i={acceleration:{x:null,y:null,z:null},accelerationIncludingGravity:{x:null,y:null,z:null},rotationRate:{alpha:null,beta:null,gamma:null},interval:16};t.default=function(e){void 0===e&&(e=i);var t=n.useState(e),a=t[0],s=t[1];return n.useEffect((function(){var e=function(e){var t=e.acceleration,a=e.accelerationIncludingGravity,n=e.rotationRate,r=e.interval;s({acceleration:{x:t.x,y:t.y,z:t.z},accelerationIncludingGravity:{x:a.x,y:a.y,z:a.z},rotationRate:{alpha:n.alpha,beta:n.beta,gamma:n.gamma},interval:r})};return r.on(window,"devicemotion",e),function(){r.off(window,"devicemotion",e)}}),[]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importDefault(a(161)),i=n.__importDefault(a(168)),s={current:null};t.default=function(e,t){void 0===t&&(t={});var a=!!t.whenHovered,n=!!t.bound,o=r.default(e,a),l=i.default(a&&!o?s:e);return n&&(l.elX=Math.max(0,Math.min(l.elX,l.elW)),l.elY=Math.max(0,Math.min(l.elY,l.elH))),l}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(){var e=n.useState(0),t=e[0],a=e[1];return n.useEffect((function(){var e=function(e){a(e.deltaY+t)};return window.addEventListener("wheel",e,!1),function(){return window.removeEventListener("wheel",e)}})),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=a(62),s=function(){if("object"!=typeof navigator)return null;var e=navigator;return e.connection||e.mozConnection||e.webkitConnection},o=function(){var e=s();return e?{downlink:e.downlink,downlinkMax:e.downlinkMax,effectiveType:e.effectiveType,type:e.type,rtt:e.rtt}:{}};t.default=function(e){void 0===e&&(e={});var t=r.useState(e),a=t[0],l=t[1];return r.useEffect((function(){var e=a,t=function(t){e=n.__assign(n.__assign({},e),t),l(e)},r=s(),c=function(){t({online:!0,since:new Date})},u=function(){t({online:!1,since:new Date})},d=function(){t(o())};return i.on(window,"online",c),i.on(window,"offline",u),r&&(i.on(r,"change",d),t(n.__assign(n.__assign(n.__assign({},a),{online:navigator.onLine,since:void 0}),o()))),function(){i.off(window,"online",c),i.off(window,"offline",u),r&&i.off(r,"change",d)}}),[]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(157));t.default=n.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i={angle:0,type:"landscape-primary"};t.default=function(e){void 0===e&&(e=i);var t=window.screen,a=n.useState(e),s=a[0],o=a[1];return n.useEffect((function(){var a=!0,n=function(){if(a){var n=t.orientation;if(n){var r=n.angle,i=n.type;o({angle:r,type:i})}else window.orientation?o({angle:"number"==typeof window.orientation?window.orientation:0,type:""}):o(e)}};return r.on(window,"orientationchange",n),n(),function(){a=!1,r.off(window,"orientationchange",n)}}),[]),s}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){void 0===t&&(t=[]),n.useEffect((function(){if(e){var t=function(t){var a=(t=t||window.event).relatedTarget||t.toElement;a&&"HTML"!==a.nodeName||e()};return document.addEventListener("mouseout",t),function(){document.removeEventListener("mouseout",t)}}}),t)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62),i=function(){};t.default=function(e){var t=!0,a=null,s=n.useState(""),o=s[0],l=s[1],c=function(){t&&a&&l(a.state)};return n.useEffect((function(){return navigator.permissions.query(e).then((function(e){a=e,c(),r.on(a,"change",c)})).catch(i),function(){t=!1,a&&r.off(a,"change",c)}}),[]),o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){var t=n.useRef();return n.useEffect((function(){t.current=e})),t.current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(114),i=function(e,t){return e===t};t.default=function(e,t){void 0===t&&(t=i);var a=n.useRef(),s=n.useRef(e);return r.useFirstMountState()||t(s.current,e)||(a.current=s.current,s.current=e),a.current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(82));t.default=function(){var e=i.default();return r.useCallback((function(t){return new Promise((function(a,n){t.then((function(t){e()&&a(t)}),(function(t){e()&&n(t)}))}))}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1);t.default=function(e){void 0===e&&(e=[]);var t=r.useState(e),a=t[0],i=t[1];return{add:function(e){i((function(t){return n.__spreadArrays(t,[e])}))},remove:function(){var e;return i((function(t){var a=t[0],n=t.slice(1);return e=a,n})),e},get first(){return a[0]},get last(){return a[a.length-1]},get size(){return a.length}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){void 0===t&&(t=!0);var a=n.useRef(null),r=n.useRef(!1),i=n.useRef(e);i.current=e;var s=n.useCallback((function(e){r.current&&(i.current(e),a.current=requestAnimationFrame(s))}),[]),o=n.useMemo((function(){return[function(){r.current&&(r.current=!1,a.current&&cancelAnimationFrame(a.current))},function(){r.current||(r.current=!0,a.current=requestAnimationFrame(s))},function(){return r.current}]}),[]);return n.useEffect((function(){return t&&o[1](),o[0]}),[]),o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=function(e,t){return new URLSearchParams(e).get(t)};t.default="object"==typeof window?function(e){var t=window.location,a=n.useState((function(){return r(t.search,e)})),i=a[0],s=a[1];return n.useEffect((function(){var a=function(){s(r(t.search,e))};return window.addEventListener("popstate",a),window.addEventListener("pushstate",a),window.addEventListener("replacestate",a),function(){window.removeEventListener("popstate",a),window.removeEventListener("pushstate",a),window.removeEventListener("replacestate",a)}}),[]),i}:function(){return null}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScratchSensor=void 0;var n=a(22),r=a(1),i=a(270),s=n.__importDefault(a(164)),o=function(){},l=function(e){void 0===e&&(e={});var t=e.disabled,a=s.default(e),i=r.useState({isScratching:!1}),l=i[0],c=i[1],u=r.useRef(l),d=r.useRef(!1),m=r.useRef(null),p=r.useState(null),f=p[0],g=p[1];return r.useEffect((function(){if(!t&&f){var e,r,i=function(e,t){cancelAnimationFrame(m.current),m.current=requestAnimationFrame((function(){var r=f.getBoundingClientRect(),i=r.left,s=r.top,l=i+window.scrollX,d=s+window.scrollY,m=e-l,p=t-d;c((function(e){var t=n.__assign(n.__assign({},e),{dx:m-(e.x||0),dy:p-(e.y||0),end:Date.now(),isScratching:!0});return u.current=t,(a.current.onScratch||o)(t),t}))}))},s=function(e){i(e.pageX,e.pageY)},l=function(e){i(e.changedTouches[0].pageX,e.changedTouches[0].pageY)},p=function(){d.current&&(d.current=!1,u.current=n.__assign(n.__assign({},u.current),{isScratching:!1}),(a.current.onScratchEnd||o)(u.current),c({isScratching:!1}),window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",r))};e=p,r=p;var g=function(t,n){if(d.current){var i=f.getBoundingClientRect(),m=i.left,p=i.top,g=m+window.scrollX,h=p+window.scrollY,b=t-g,E=n-h,v=Date.now(),y={isScratching:!0,start:v,end:v,docX:t,docY:n,x:b,y:E,dx:0,dy:0,elH:f.offsetHeight,elW:f.offsetWidth,elX:g,elY:h};u.current=y,(a.current.onScratchStart||o)(y),c(y),window.addEventListener("mousemove",s),window.addEventListener("touchmove",l),window.addEventListener("mouseup",e),window.addEventListener("touchend",r)}},h=function(e){d.current=!0,g(e.pageX,e.pageY)},b=function(e){d.current=!0,g(e.changedTouches[0].pageX,e.changedTouches[0].pageY)};return f.addEventListener("mousedown",h),f.addEventListener("touchstart",b),function(){f.removeEventListener("mousedown",h),f.removeEventListener("touchstart",b),window.removeEventListener("mousemove",s),window.removeEventListener("touchmove",l),window.removeEventListener("mouseup",e),window.removeEventListener("touchend",r),m.current&&cancelAnimationFrame(m.current),m.current=null,d.current=!1,u.current={isScratching:!1},c(u.current)}}}),[f,t,a]),[g,l]};t.ScratchSensor=function(e){e.children;var t=n.__rest(e,["children"]),a=l(t),s=a[0],o=a[1],c=i.render(e,o);return r.cloneElement(c,n.__assign(n.__assign({},c.props),{ref:function(e){c.props.ref&&("object"==typeof c.props.ref&&(c.props.ref.current=e),"function"==typeof c.props.ref&&c.props.ref(e)),s(e)}}))},t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hookToRenderProp=t.createEnhancer=t.render=void 0;var n=a(22),r=n.__importDefault(a(170));t.render=r.default;var i=n.__importDefault(a(271));t.createEnhancer=i.default;var s=n.__importDefault(a(274));t.hookToRenderProp=s.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.divWrapper=void 0;var n=a(22),r=n.__importStar(a(1)),i=n.__importDefault(a(272)),s=r.createElement,o=function(e,t,a,r){var i;return s(e,t?n.__assign(((i={})[t]=r,i),a):n.__assign(n.__assign({},r),a))};t.divWrapper=function(e,t,a,n){return s("div",null,o(e,t,a,n))},t.default=function(e,t,a){void 0===a&&(a=o);var n=function(r,o,l){void 0===o&&(o=t),void 0===l&&(l=null);var c="string"==typeof r;if(c)return function(e){return n(e,r||t,o)};var u=function(t){return s(e,l,(function(e){return a(r,o,t,e)}))};return c?i.default(u):u};return n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(273));t.default=function(e){return e.prototype?e:n.default(e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importStar(a(1));t.default=function(e){var t=function(t){function a(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(a,t),a.prototype.render=function(){return e(this.props,this.context)},a}(r.Component);return t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(170)),r=function(e){return[e]};t.default=function(e,t){return void 0===t&&(t=r),function(a){return n.default(a,e.apply(void 0,t(a)))}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(101));t.default=function(e){var t=i.default({x:0,y:0}),a=t[0],n=t[1];return r.useEffect((function(){var t=function(){e.current&&n({x:e.current.scrollLeft,y:e.current.scrollTop})};return e.current&&e.current.addEventListener("scroll",t,{capture:!1,passive:!0}),function(){e.current&&e.current.removeEventListener("scroll",t)}}),[e]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){var t=n.useState(!1),a=t[0],r=t[1];return n.useEffect((function(){if(e.current){var t,a=function(){r(!0),clearTimeout(t),t=setTimeout((function(){r(!1)}),150)};return e.current.addEventListener("scroll",a,!1),function(){e.current&&e.current.removeEventListener("scroll",a,!1)}}return function(){}}),[e]),a}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=a(62);t.default=function(e,t,a){if(!r.isClient)return[t,function(){}];var i=n.useState((function(){try{var n=sessionStorage.getItem(e);return"string"!=typeof n?(sessionStorage.setItem(e,a?String(t):JSON.stringify(t)),t):a?n:JSON.parse(n||"null")}catch(e){return t}})),s=i[0],o=i[1];return n.useEffect((function(){try{var t=a?String(s):JSON.stringify(s);sessionStorage.setItem(e,t)}catch(e){}})),[s,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(279),i=n.__importDefault(a(130)),s=function(e,t){return e.every((function(e,a){return r.equal(e,t[a])}))};t.default=function(e,t){i.default(e,t,s)}},function(e,t){var a=Object.keys;t.equal=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var n=a(e),r=n.length,i=0;i<r;i++)if(!(n[i]in t))return!1;for(i=0;i<r;i++)if(e[n[i]]!==t[n[i]])return!1;return r===a(t).length}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importStar(a(1)),i=a(62),s=r.useState,o=r.useEffect,l=r.useRef;t.default=function(e,t){var a=void 0===t?{}:t,c=a.width,u=void 0===c?1/0:c,d=a.height,m=void 0===d?1/0:d;if(!i.isClient)return["function"==typeof e?e({width:u,height:m}):e,{width:u,height:m}];var p=s({width:u,height:m}),f=p[0],g=p[1];"function"==typeof e&&(e=e(f));var h=e.props.style||{},b=l(null),E=null,v=function(){var e=b.current,t=e?{width:e.offsetWidth,height:e.offsetHeight}:{width:u,height:m};g(t)},y=function(e){e.addEventListener("resize",v),setTimeout(v,35)};return o((function(){var e=b.current;if(e){if(e.contentWindow)E=e.contentWindow,y(E);else{var t=function(){e.removeEventListener("load",t),E=e.contentWindow,y(E)};e.addEventListener("load",t)}return function(){E&&E.removeEventListener&&E.removeEventListener("resize",v)}}}),[]),h.position="relative",[r.cloneElement.apply(r,n.__spreadArrays([e,{style:h}],n.__spreadArrays([r.createElement("iframe",{ref:b,style:{background:"transparent",border:"none",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:-1}})],r.Children.toArray(e.props.children)))),f]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=a(62),s=n.__importDefault(a(82)),o=n.__importDefault(a(98)),l=function(){};t.default=function(e,t){void 0===t&&(t={});var a=s.default(),n=r.useRef(!1),c=r.useRef(0),u=r.useRef(0),d=o.default({isSliding:!1,value:0}),m=d[0],p=d[1];return c.current=m.value,r.useEffect((function(){if(i.isClient){var r=void 0===t.styles||t.styles,s=void 0!==t.reverse&&t.reverse;e.current&&r&&(e.current.style.userSelect="none");var o=function(){!n.current&&a()&&((t.onScrubStart||l)(),n.current=!0,p({isSliding:!0}),b())},d=function(){n.current&&a()&&((t.onScrubStop||l)(c.current),n.current=!1,p({isSliding:!1}),E())},m=function(e){o(),f(e)},f=t.vertical?function(e){return v(e.clientY)}:function(e){return v(e.clientX)},g=function(e){o(),h(e)},h=t.vertical?function(e){return v(e.changedTouches[0].clientY)}:function(e){return v(e.changedTouches[0].clientX)},b=function(){i.on(document,"mousemove",f),i.on(document,"mouseup",d),i.on(document,"touchmove",h),i.on(document,"touchend",d)},E=function(){i.off(document,"mousemove",f),i.off(document,"mouseup",d),i.off(document,"touchmove",h),i.off(document,"touchend",d)},v=function(n){cancelAnimationFrame(u.current),u.current=requestAnimationFrame((function(){if(a()&&e.current){var r=e.current.getBoundingClientRect(),i=t.vertical?r.top:r.left,o=t.vertical?r.height:r.width;if(!o)return;var c=(n-i)/o;c>1?c=1:c<0&&(c=0),s&&(c=1-c),p({value:c}),(t.onScrub||l)(c)}}))};return i.on(e.current,"mousedown",m),i.on(e.current,"touchstart",g),function(){i.off(e.current,"mousedown",m),i.off(e.current,"touchstart",g)}}}),[e,t.vertical]),m}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(167)),s=n.__importDefault(a(98)),o="object"==typeof window&&"object"==typeof window.speechSynthesis?window.speechSynthesis.getVoices():[];t.default=function(e,t){void 0===t&&(t={});var a=s.default({isPlaying:!1,lang:t.lang||"default",voice:t.voice||o[0],rate:t.rate||1,pitch:t.pitch||1,volume:t.volume||1}),n=a[0],l=a[1],c=r.useRef(null);return i.default((function(){var a=new SpeechSynthesisUtterance(e);t.lang&&(a.lang=t.lang),t.voice&&(a.voice=t.voice),a.rate=t.rate||1,a.pitch=t.pitch||1,a.volume=t.volume||1,a.onstart=function(){return l({isPlaying:!0})},a.onresume=function(){return l({isPlaying:!0})},a.onend=function(){return l({isPlaying:!1})},a.onpause=function(){return l({isPlaying:!1})},c.current=a,window.speechSynthesis.speak(c.current)})),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(76));t.default=function(e){n.default((function(){var t=function(t){var a,n,r,i,s;!function(){var e=document.activeElement,t=document.body;if(!e)return!1;if(e===t)return!1;switch(e.tagName){case"INPUT":case"TEXTAREA":return!0}return e.hasAttribute("contenteditable")}()&&(n=(a=t).keyCode,r=a.metaKey,i=a.ctrlKey,s=a.altKey,!(r||i||s)&&(n>=48&&n<=57||n>=65&&n<=90))&&e(t)};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useStateWithHistory=void 0;var n=a(1),r=a(114),i=a(115);t.useStateWithHistory=function(e,t,a){if(void 0===t&&(t=10),t<1)throw new Error("Capacity has to be greater than 1, got '"+t+"'");var s=r.useFirstMountState(),o=n.useState(e),l=o[0],c=o[1],u=n.useRef(null!=a?a:[]),d=n.useRef(0);return s&&(u.current.length?(u.current[u.current.length-1]!==e&&u.current.push(e),u.current.length>t&&(u.current=u.current.slice(u.current.length-t))):u.current.push(e),d.current=u.current.length&&u.current.length-1),[l,n.useCallback((function(e){c((function(a){return(e=i.resolveHookState(e))!==a&&(d.current<u.current.length-1&&(u.current=u.current.slice(0,d.current+1)),d.current=u.current.push(e)-1,u.current.length>t&&(u.current=u.current.slice(u.current.length-t))),e}))}),[l,t]),n.useMemo((function(){return{history:u.current,position:d.current,capacity:t,back:function(e){void 0===e&&(e=1),d.current&&c((function(){return d.current-=Math.min(e,d.current),u.current[d.current]}))},forward:function(e){void 0===e&&(e=1),d.current!==u.current.length-1&&c((function(){return d.current=Math.min(d.current+e,u.current.length-1),u.current[d.current]}))},go:function(e){e!==d.current&&c((function(){return d.current=e<0?Math.max(u.current.length+e,0):Math.min(u.current.length-1,e),u.current[d.current]}))}}}),[l])]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(82)),s=n.__importDefault(a(88)),o=n.__importDefault(a(97));t.default=function(e){void 0===e&&(e=[]);var t=i.default(),a=s.default(),l=r.useRef(0);o.default((function(){e.length<=l.current&&(l.current=e.length-1,a())}),[e.length]);var c=r.useMemo((function(){return{next:function(){return c.setStateAt(l.current+1)},prev:function(){return c.setStateAt(l.current-1)},setStateAt:function(n){t()&&e.length&&n!==l.current&&(l.current=n>=0?n%e.length:e.length+n%e.length,a())},setState:function(n){if(t()){var r=e.length?e.indexOf(n):-1;if(-1===r)throw new Error("State '"+n+"' is not a valid state (does not exist in state list)");l.current=r,a()}}}}),[e]);return n.__assign({state:e[l.current],currentIndex:l.current},c)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(116));t.default=function(e,t,a){void 0===t&&(t=200);var n=r.useState(null),s=n[0],o=n[1],l=r.useRef(),c=r.useRef();return r.useEffect((function(){if(l.current)c.current=a;else{o(e.apply(void 0,a));var n=function(){c.current?(o(e.apply(void 0,c.current)),c.current=void 0,l.current=setTimeout(n,t)):l.current=void 0};l.current=setTimeout(n,t)}}),a),i.default((function(){l.current&&clearTimeout(l.current)})),s}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importDefault(a(131)),i=n.__importDefault(a(88));t.default=function(e){void 0===e&&(e=0);var t=i.default();return r.default(t,e)}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r={restoreOnUnmount:!1};t.default="undefined"!=typeof document?function(e,t){void 0===t&&(t=r);var a=n.useRef(document.title);document.title=e,n.useEffect((function(){return t&&t.restoreOnUnmount?function(){document.title=a.current}:void 0}),[])}:function(e){}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(290),i=n.__importDefault(a(169));t.default=function(e,t,a){return void 0===e&&(e="inCirc"),void 0===t&&(t=200),void 0===a&&(a=0),(0,r.easing[e])(i.default(t,a))}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.easing={linear:function(e){return e},quadratic:function(e){return e*(-e*e*e+4*e*e-6*e+4)},cubic:function(e){return e*(4*e*e-9*e+6)},elastic:function(e){return e*(33*e*e*e*e-106*e*e*e+126*e*e-67*e+15)},inQuad:function(e){return e*e},outQuad:function(e){return e*(2-e)},inOutQuad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},inCubic:function(e){return e*e*e},outCubic:function(e){return--e*e*e+1},inOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},inQuart:function(e){return e*e*e*e},outQuart:function(e){return 1- --e*e*e*e},inOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},inQuint:function(e){return e*e*e*e*e},outQuint:function(e){return 1+--e*e*e*e*e},inOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},inSine:function(e){return 1-Math.cos(e*(Math.PI/2))},outSine:function(e){return Math.sin(e*(Math.PI/2))},inOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},inExpo:function(e){return Math.pow(2,10*(e-1))},outExpo:function(e){return 1-Math.pow(2,-10*e)},inOutExpo:function(e){return(e/=.5)<1?Math.pow(2,10*(e-1))/2:(e--,(2-Math.pow(2,-10*e))/2)},inCirc:function(e){return 1-Math.sqrt(1-e*e)},outCirc:function(e){return Math.sqrt(1-(e-=1)*e)},inOutCirc:function(e){return(e/=.5)<1?-(Math.sqrt(1-e*e)-1)/2:(e-=2,(Math.sqrt(1-e*e)+1)/2)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(){var e=n.useRef(!1);return n.useEffect((function(){return function(){e.current=!0}})),n.useMemo((function(){return function(t,a){return new Promise((function(n,r){t.then((function(t){e.current||n(t)}),(function(t){e.current?a?a(t):console.error("useUnmountPromise",t):r(t)}))}))}}),[])}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=n.__importDefault(a(166));t.default=function(e,t){void 0===t&&(t=[]);var a=r.default(t),i=a[0],s=a[1];return[i,n.__assign(n.__assign({},s),{upsert:function(t){s.upsert(e,t)}})]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r="object"==typeof navigator&&"vibrate"in navigator;t.default=r?function(e,t,a){void 0===e&&(e=!0),void 0===t&&(t=[1e3,1e3]),void 0===a&&(a=!0),n.useEffect((function(){var n;if(e&&(navigator.vibrate(t),a)){var r=t instanceof Array?t.reduce((function(e,t){return e+t})):t;n=setInterval((function(){navigator.vibrate(t)}),r)}return function(){e&&(navigator.vibrate(0),a&&clearInterval(n))}}),[e])}:function(){}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22).__importDefault(a(155)).default("video");t.default=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t,a){void 0===a&&(a=[void 0]);var r=n.useRef(t),i=n.useRef(e);r.current=t,i.current=e;var s=n.useState(a),o=s[0],l=s[1],c=n.useCallback((function(){r.current.length>=2?r.current(i.current,l):l(r.current(i.current))}),[l]);return n.useEffect((function(){c()}),[e]),[o,c]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useScrollbarWidth=void 0;var n=a(297),r=a(1);t.useScrollbarWidth=function(){var e=r.useState(n.scrollbarWidth()),t=e[0],a=e[1];return r.useEffect((function(){if(void 0===t){var e=requestAnimationFrame((function(){a(n.scrollbarWidth())}));return function(){return cancelAnimationFrame(e)}}}),[]),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if("undefined"==typeof document)return 0;if(document.body&&(!document.readyState||"loading"!==document.readyState)){if(!0!==e&&"number"==typeof n.__cache)return n.__cache;var t=document.createElement("div"),a=t.style;a.display="block",a.position="absolute",a.width="100px",a.height="100px",a.left="-999px",a.top="-999px",a.overflow="scroll",document.body.insertBefore(t,null);var r=t.clientWidth;if(0!==r)return n.__cache=100-r,document.body.removeChild(t),n.__cache;document.body.removeChild(t)}};t.scrollbarWidth=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useMultiStateValidator=void 0;var n=a(1);t.useMultiStateValidator=function(e,t,a){if(void 0===a&&(a=[void 0]),"object"!=typeof e)throw new Error("states expected to be an object or array, got "+typeof e);var r=n.useRef(t),i=n.useRef(e);r.current=t,i.current=e;var s=n.useState(a),o=s[0],l=s[1],c=n.useCallback((function(){r.current.length>=2?r.current(i.current,l):l(r.current(i.current))}),[l]);return n.useEffect((function(){c()}),Object.values(e)),[o,c]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=a(62),s=n.__importDefault(a(101));t.default=function(){var e=s.default({x:i.isClient?window.pageXOffset:0,y:i.isClient?window.pageYOffset:0}),t=e[0],a=e[1];return r.useEffect((function(){var e=function(){a({x:window.pageXOffset,y:window.pageYOffset})};return window.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){window.removeEventListener("scroll",e)}}),[]),t}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(101)),s=a(62);t.default=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var a=i.default({width:s.isClient?window.innerWidth:e,height:s.isClient?window.innerHeight:t}),n=a[0],o=a[1];return r.useEffect((function(){if(s.isClient){var e=function(){o({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),n}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1),i=n.__importDefault(a(76)),s=a(62),o={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};t.default=s.isClient&&window.ResizeObserver?function(){var e=r.useState(null),t=e[0],a=e[1],n=r.useState(o),s=n[0],l=n[1],c=r.useMemo((function(){return new window.ResizeObserver((function(e){if(e[0]){var t=e[0].contentRect,a=t.x,n=t.y,r=t.width,i=t.height,s=t.top,o=t.left,c=t.bottom,u=t.right;l({x:a,y:n,width:r,height:i,top:s,left:o,bottom:c,right:u})}}))}),[]);return i.default((function(){if(t)return c.observe(t),function(){c.disconnect()}}),[t]),[a,s]}:function(){return[function(){},o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useRendersCount=void 0;var n=a(1);t.useRendersCount=function(){return++n.useRef(0).current}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=a(1);t.default=function(e){void 0===e&&(e=new Set);var t=r.useState(e),a=t[0],i=t[1],s=r.useMemo((function(){return{add:function(e){return i((function(t){return new Set(n.__spreadArrays(Array.from(t),[e]))}))},remove:function(e){return i((function(t){return new Set(Array.from(t).filter((function(t){return t!==e})))}))},toggle:function(e){return i((function(t){return t.has(e)?new Set(Array.from(t).filter((function(t){return t!==e}))):new Set(n.__spreadArrays(Array.from(t),[e]))}))},reset:function(){return i(e)}}}),[i]),o=n.__assign({has:r.useCallback((function(e){return a.has(e)}),[a])},s);return[a,o]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGlobalState=void 0;var n=a(22),r=a(1),i=n.__importDefault(a(100)),s=n.__importDefault(a(76));function o(e){var t={state:e,setState:function(e){t.state=e,t.setters.forEach((function(e){return e(t.state)}))},setters:[]};return function(){var e=r.useState(t.state),a=e[0],n=e[1];return i.default((function(){return function(){t.setters=t.setters.filter((function(e){return e!==n}))}})),s.default((function(){t.setters.includes(n)||t.setters.push(n)})),[a,t.setState]}}t.createGlobalState=o,t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useHash=void 0;var n=a(22),r=a(1),i=n.__importDefault(a(165));t.useHash=function(){var e=r.useState((function(){return window.location.hash})),t=e[0],a=e[1],n=r.useCallback((function(){a(window.location.hash)}),[]);i.default((function(){window.addEventListener("hashchange",n)}),(function(){window.removeEventListener("hashchange",n)}));var s=r.useCallback((function(e){e!==t&&(window.location.hash=e)}),[t]);return[t,s]}},function(e,t,a){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},function(e,t,a){"use strict";var n="%[a-f0-9]{2}",r=new RegExp("("+n+")|([^%]+?)","gi"),i=new RegExp("("+n+")+","gi");function s(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var a=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],s(a),s(n))}function o(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(r)||[],a=1;a<t.length;a++)t=(e=s(t,a).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"","%FF%FE":""},a=i.exec(e);a;){try{t[a[0]]=decodeURIComponent(a[0])}catch(e){var n=o(a[0]);n!==a[0]&&(t[a[0]]=n)}a=i.exec(e)}t["%C2"]="";for(var r=Object.keys(t),s=0;s<r.length;s++){var l=r[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},function(e,t,a){"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const a=e.indexOf(t);return-1===a?[e]:[e.slice(0,a),e.slice(a+t.length)]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(61),r=a(310),i=a(311),s=a(312),o=a(313);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=l(n),u=l(r),d=l(i),m=l(s),p=l(o);function f(){var e;return(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e]}var g={symbols:{"!":{postfix:{symbol:"!",f:function e(t){return t%1||!(+t>=0)?NaN:t>170?1/0:0===t?1:t*e(t-1)},notation:"postfix",precedence:6,rightToLeft:0,argCount:1},symbol:"!",regSymbol:"!"},"^":{infix:{symbol:"^",f:function(e,t){return Math.pow(e,t)},notation:"infix",precedence:5,rightToLeft:1,argCount:2},symbol:"^",regSymbol:"\\^"},"*":{infix:{symbol:"*",f:function(e,t){return e*t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"*",regSymbol:"\\*"},"/":{infix:{symbol:"/",f:function(e,t){return e/t},notation:"infix",precedence:4,rightToLeft:0,argCount:2},symbol:"/",regSymbol:"/"},"+":{infix:{symbol:"+",f:function(e,t){return e+t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"+",f:f,notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"+",regSymbol:"\\+"},"-":{infix:{symbol:"-",f:function(e,t){return e-t},notation:"infix",precedence:2,rightToLeft:0,argCount:2},prefix:{symbol:"-",f:function(e){return-e},notation:"prefix",precedence:3,rightToLeft:0,argCount:1},symbol:"-",regSymbol:"-"},",":{infix:{symbol:",",f:function(){return Array.of.apply(Array,arguments)},notation:"infix",precedence:1,rightToLeft:0,argCount:2},symbol:",",regSymbol:","},"(":{prefix:{symbol:"(",f:f,notation:"prefix",precedence:0,rightToLeft:0,argCount:1},symbol:"(",regSymbol:"\\("},")":{postfix:{symbol:")",f:void 0,notation:"postfix",precedence:0,rightToLeft:0,argCount:1},symbol:")",regSymbol:"\\)"},min:{func:{symbol:"min",f:function(){return Math.min.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"min",regSymbol:"min\\b"},max:{func:{symbol:"max",f:function(){return Math.max.apply(Math,arguments)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"max",regSymbol:"max\\b"},sqrt:{func:{symbol:"sqrt",f:function(e){return Math.sqrt(e)},notation:"func",precedence:0,rightToLeft:0,argCount:1},symbol:"sqrt",regSymbol:"sqrt\\b"}}},h=function(e){function t(t){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+t+" for more information.")||this,u.default(a)}return d.default(t,e),t}(m.default(Error)),b=/((?!\w)a|na|hc|mc|dg|me[r]?|xe|ni(?![a-zA-Z])|mm|cp|tp|xp|q(?!s)|hv|xamv|nimv|wv|sm|s(?!\D|$)|ged|darg?|nrut)/g;function E(e,t){var a,n=e.pop();return t.push(n.f.apply(n,(a=[]).concat.apply(a,t.splice(-n.argCount)))),n.precedence}function v(e){return e.split("").reverse().join("")}var y=/--[\S]*/g;function x(e){return e.charAt(0).toUpperCase()+e.slice(1)}var S=["Top","Right","Bottom","Left"];function k(e,t){if(!e)return t.toLowerCase();var a=e.split("-");if(a.length>1)return a.splice(1,0,t),a.reduce((function(e,t){return""+e+x(t)}));var n=e.replace(/([a-z])([A-Z])/g,"$1"+t+"$2");return e===n?""+e+t:n}function M(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r=a[0],i=a[1],s=void 0===i?r:i,o=a[2],l=void 0===o?r:o,c=a[3];return function(e,t){for(var a={},n=0;n<t.length;n+=1)(t[n]||0===t[n])&&(a[k(e,S[n])]=t[n]);return a}(e,[r,s,l,void 0===c?s:c])}function w(e,t){return e.substr(-t.length)===t}var T=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function O(e,t){if("string"!=typeof e)return t?[e,void 0]:e;var a=e.match(T);return t?(console.warn("stripUnit's unitReturn functionality has been marked for deprecation in polished 4.0. It's functionality has been been moved to getValueAndUnit."),a?[parseFloat(e),a[2]]:[e,void 0]):a?parseFloat(e):e}var C=function(e){return function(t,a){void 0===a&&(a="16px");var n=t,r=a;if("string"==typeof t){if(!w(t,"px"))throw new h(69,e,t);n=O(t)}if("string"==typeof a){if(!w(a,"px"))throw new h(70,e,a);r=O(a)}if("string"==typeof n)throw new h(71,t,e);if("string"==typeof r)throw new h(72,a,e);return""+n/r+e}},I=C("em"),j=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function _(e){if("string"!=typeof e)return[e,""];var t=e.match(j);return t?[parseFloat(e),t[2]]:[e,void 0]}var F={minorSecond:1.067,majorSecond:1.125,minorThird:1.2,majorThird:1.25,perfectFourth:1.333,augFourth:1.414,perfectFifth:1.5,minorSixth:1.6,goldenSection:1.618,majorSixth:1.667,minorSeventh:1.778,majorSeventh:1.875,octave:2,majorTenth:2.5,majorEleventh:2.667,majorTwelfth:3,doubleOctave:4},P=C("rem");function L(e,t,a,n){void 0===a&&(a="320px"),void 0===n&&(n="1200px");var r=_(e),i=r[0],s=r[1],o=_(t),l=o[0],c=o[1],u=_(a),d=u[0],m=u[1],p=_(n),f=p[0],g=p[1];if("number"!=typeof d||"number"!=typeof f||!m||!g||m!==g)throw new h(47);if("number"!=typeof i||"number"!=typeof l||s!==c)throw new h(48);if(s!==m||c!==g)throw new h(75);var b=(i-l)/(d-f);return"calc("+(l-b*f).toFixed(2)+(s||"")+" + "+(100*b).toFixed(2)+"vw)"}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var D,A,N=/^\s*data:([a-z]+\/[a-z-]+(;[a-z-]+=[a-z-]+)?)?(;charset=[a-z0-9-]+)?(;base64)?,[a-z0-9!$&',()*+,;=\-._~:@/?%\s]*\s*$/i,z={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function B(e,t){return t?' format("'+z[e]+'")':""}function H(e,t,a,n){var r=[];return t&&r.push(function(e){return e.map((function(e){return'local("'+e+'")'})).join(", ")}(t)),e&&r.push(function(e,t,a){return function(e){return!!e.replace(/\s+/g," ").match(N)}(e)?'url("'+e+'")'+B(t[0],a):t.map((function(t){return'url("'+e+"."+t+'")'+B(t,a)})).join(", ")}(e,a,n)),r.join(", ")}function G(e){return void 0===e&&(e=1.3),"\n    @media only screen and (-webkit-min-device-pixel-ratio: "+e+"),\n    only screen and (min--moz-device-pixel-ratio: "+e+"),\n    only screen and (-o-min-device-pixel-ratio: "+e+"/1),\n    only screen and (min-resolution: "+Math.round(96*e)+"dpi),\n    only screen and (min-resolution: "+e+"dppx)\n  "}function V(e){for(var t="",a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];for(var i=0;i<e.length;i+=1)if(t+=e[i],i===n.length-1&&n[i]){var s=n.filter((function(e){return!!e}));s.length>1?(t=t.slice(0,-1),t+=", "+n[i]):1===s.length&&(t+=""+n[i])}else n[i]&&(t+=n[i]+" ");return t.trim()}var $={easeInBack:"cubic-bezier(0.600, -0.280, 0.735, 0.045)",easeInCirc:"cubic-bezier(0.600,  0.040, 0.980, 0.335)",easeInCubic:"cubic-bezier(0.550,  0.055, 0.675, 0.190)",easeInExpo:"cubic-bezier(0.950,  0.050, 0.795, 0.035)",easeInQuad:"cubic-bezier(0.550,  0.085, 0.680, 0.530)",easeInQuart:"cubic-bezier(0.895,  0.030, 0.685, 0.220)",easeInQuint:"cubic-bezier(0.755,  0.050, 0.855, 0.060)",easeInSine:"cubic-bezier(0.470,  0.000, 0.745, 0.715)",easeOutBack:"cubic-bezier(0.175,  0.885, 0.320, 1.275)",easeOutCubic:"cubic-bezier(0.215,  0.610, 0.355, 1.000)",easeOutCirc:"cubic-bezier(0.075,  0.820, 0.165, 1.000)",easeOutExpo:"cubic-bezier(0.190,  1.000, 0.220, 1.000)",easeOutQuad:"cubic-bezier(0.250,  0.460, 0.450, 0.940)",easeOutQuart:"cubic-bezier(0.165,  0.840, 0.440, 1.000)",easeOutQuint:"cubic-bezier(0.230,  1.000, 0.320, 1.000)",easeOutSine:"cubic-bezier(0.390,  0.575, 0.565, 1.000)",easeInOutBack:"cubic-bezier(0.680, -0.550, 0.265, 1.550)",easeInOutCirc:"cubic-bezier(0.785,  0.135, 0.150, 0.860)",easeInOutCubic:"cubic-bezier(0.645,  0.045, 0.355, 1.000)",easeInOutExpo:"cubic-bezier(1.000,  0.000, 0.000, 1.000)",easeInOutQuad:"cubic-bezier(0.455,  0.030, 0.515, 0.955)",easeInOutQuart:"cubic-bezier(0.770,  0.000, 0.175, 1.000)",easeInOutQuint:"cubic-bezier(0.860,  0.000, 0.070, 1.000)",easeInOutSine:"cubic-bezier(0.445,  0.050, 0.550, 0.950)"},U=function(e,t,a){var n=""+a[0]+(a[1]||""),r=""+a[0]/2+(a[1]||""),i=""+t[0]+(t[1]||""),s=""+t[0]/2+(t[1]||"");switch(e){case"top":return"0 "+r+" "+i+" "+r;case"topLeft":return n+" "+i+" 0 0";case"left":return s+" "+n+" "+s+" 0";case"bottomLeft":return n+" 0 0 "+i;case"bottom":return i+" "+r+" 0 "+r;case"bottomRight":return"0 0 "+n+" "+i;case"right":return s+" 0 "+s+" "+n;default:return"0 "+n+" "+i+" 0"}};function q(e){return Math.round(255*e)}function W(e,t,a){return q(e)+","+q(t)+","+q(a)}function K(e,t,a,n){if(void 0===n&&(n=W),0===t)return n(a,a,a);var r=(e%360+360)%360/60,i=(1-Math.abs(2*a-1))*t,s=i*(1-Math.abs(r%2-1)),o=0,l=0,c=0;r>=0&&r<1?(o=i,l=s):r>=1&&r<2?(o=s,l=i):r>=2&&r<3?(l=i,c=s):r>=3&&r<4?(l=s,c=i):r>=4&&r<5?(o=s,c=i):r>=5&&r<6&&(o=i,c=s);var u=a-i/2;return n(o+u,l+u,c+u)}var Y={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},X=/^#[a-fA-F0-9]{6}$/,J=/^#[a-fA-F0-9]{8}$/,Q=/^#[a-fA-F0-9]{3}$/,Z=/^#[a-fA-F0-9]{4}$/,ee=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,te=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,ae=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,ne=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i;function re(e){if("string"!=typeof e)throw new h(3);var t=function(e){if("string"!=typeof e)return e;var t=e.toLowerCase();return Y[t]?"#"+Y[t]:e}(e);if(t.match(X))return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16)};if(t.match(J)){var a=parseFloat((parseInt(""+t[7]+t[8],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[2],16),green:parseInt(""+t[3]+t[4],16),blue:parseInt(""+t[5]+t[6],16),alpha:a}}if(t.match(Q))return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16)};if(t.match(Z)){var n=parseFloat((parseInt(""+t[4]+t[4],16)/255).toFixed(2));return{red:parseInt(""+t[1]+t[1],16),green:parseInt(""+t[2]+t[2],16),blue:parseInt(""+t[3]+t[3],16),alpha:n}}var r=ee.exec(t);if(r)return{red:parseInt(""+r[1],10),green:parseInt(""+r[2],10),blue:parseInt(""+r[3],10)};var i=te.exec(t.substring(0,50));if(i)return{red:parseInt(""+i[1],10),green:parseInt(""+i[2],10),blue:parseInt(""+i[3],10),alpha:parseFloat(""+i[4])};var s=ae.exec(t);if(s){var o="rgb("+K(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",l=ee.exec(o);if(!l)throw new h(4,t,o);return{red:parseInt(""+l[1],10),green:parseInt(""+l[2],10),blue:parseInt(""+l[3],10)}}var c=ne.exec(t.substring(0,50));if(c){var u="rgb("+K(parseInt(""+c[1],10),parseInt(""+c[2],10)/100,parseInt(""+c[3],10)/100)+")",d=ee.exec(u);if(!d)throw new h(4,t,u);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+c[4])}}throw new h(5)}function ie(e){return function(e){var t,a=e.red/255,n=e.green/255,r=e.blue/255,i=Math.max(a,n,r),s=Math.min(a,n,r),o=(i+s)/2;if(i===s)return void 0!==e.alpha?{hue:0,saturation:0,lightness:o,alpha:e.alpha}:{hue:0,saturation:0,lightness:o};var l=i-s,c=o>.5?l/(2-i-s):l/(i+s);switch(i){case a:t=(n-r)/l+(n<r?6:0);break;case n:t=(r-a)/l+2;break;default:t=(a-n)/l+4}return t*=60,void 0!==e.alpha?{hue:t,saturation:c,lightness:o,alpha:e.alpha}:{hue:t,saturation:c,lightness:o}}(re(e))}var se=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function oe(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function le(e){return oe(Math.round(255*e))}function ce(e,t,a){return se("#"+le(e)+le(t)+le(a))}function ue(e,t,a){return K(e,t,a,ce)}function de(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return ue(e,t,a);if("object"==typeof e&&void 0===t&&void 0===a)return ue(e.hue,e.saturation,e.lightness);throw new h(1)}function me(e,t,a,n){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof n)return n>=1?ue(e,t,a):"rgba("+K(e,t,a)+","+n+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===n)return e.alpha>=1?ue(e.hue,e.saturation,e.lightness):"rgba("+K(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new h(2)}function pe(e,t,a){if("number"==typeof e&&"number"==typeof t&&"number"==typeof a)return se("#"+oe(e)+oe(t)+oe(a));if("object"==typeof e&&void 0===t&&void 0===a)return se("#"+oe(e.red)+oe(e.green)+oe(e.blue));throw new h(6)}function fe(e,t,a,n){if("string"==typeof e&&"number"==typeof t){var r=re(e);return"rgba("+r.red+","+r.green+","+r.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof a&&"number"==typeof n)return n>=1?pe(e,t,a):"rgba("+e+","+t+","+a+","+n+")";if("object"==typeof e&&void 0===t&&void 0===a&&void 0===n)return e.alpha>=1?pe(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new h(7)}var ge=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha)},he=function(e){return"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha},be=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha)},Ee=function(e){return"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha};function ve(e){if("object"!=typeof e)throw new h(8);if(he(e))return fe(e);if(ge(e))return pe(e);if(Ee(e))return me(e);if(be(e))return de(e);throw new h(8)}function ye(e,t,a){return function(){var n=a.concat(Array.prototype.slice.call(arguments));return n.length>=t?e.apply(this,n):ye(e,t,n)}}function xe(e){return ye(e,e.length,[])}function Se(e,t){if("transparent"===t)return t;var a=ie(t);return ve(c.default({},a,{hue:a.hue+parseFloat(e)}))}var ke=xe(Se);function Me(e,t,a){return Math.max(e,Math.min(t,a))}function we(e,t){if("transparent"===t)return t;var a=ie(t);return ve(c.default({},a,{lightness:Me(0,1,a.lightness-parseFloat(e))}))}var Te=xe(we);function Oe(e,t){if("transparent"===t)return t;var a=ie(t);return ve(c.default({},a,{saturation:Me(0,1,a.saturation-parseFloat(e))}))}var Ce=xe(Oe);function Ie(e){if("transparent"===e)return 0;var t=re(e),a=Object.keys(t).map((function(e){var a=t[e]/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)})),n=a[0],r=a[1],i=a[2];return parseFloat((.2126*n+.7152*r+.0722*i).toFixed(3))}function je(e,t){var a=Ie(e),n=Ie(t);return parseFloat((a>n?(a+.05)/(n+.05):(n+.05)/(a+.05)).toFixed(2))}function _e(e,t){if("transparent"===t)return t;var a=ie(t);return ve(c.default({},a,{lightness:Me(0,1,a.lightness+parseFloat(e))}))}var Fe=xe(_e);function Pe(e,t,a){if("transparent"===t)return a;if("transparent"===a)return t;if(0===e)return a;var n=re(t),r=c.default({},n,{alpha:"number"==typeof n.alpha?n.alpha:1}),i=re(a),s=c.default({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),o=r.alpha-s.alpha,l=2*parseFloat(e)-1,u=((l*o==-1?l:l+o)/(1+l*o)+1)/2,d=1-u;return fe({red:Math.floor(r.red*u+s.red*d),green:Math.floor(r.green*u+s.green*d),blue:Math.floor(r.blue*u+s.blue*d),alpha:r.alpha*(parseFloat(e)/1)+s.alpha*(1-parseFloat(e)/1)})}var Le=xe(Pe);function Re(e,t){if("transparent"===t)return t;var a=re(t),n="number"==typeof a.alpha?a.alpha:1;return fe(c.default({},a,{alpha:Me(0,1,(100*n+100*parseFloat(e))/100)}))}var De=xe(Re),Ae="#000",Ne="#fff";function ze(e,t){if("transparent"===t)return t;var a=ie(t);return ve(c.default({},a,{saturation:Me(0,1,a.saturation+parseFloat(e))}))}var Be=xe(ze);function He(e,t){return"transparent"===t?t:ve(c.default({},ie(t),{hue:parseFloat(e)}))}var Ge=xe(He);function Ve(e,t){return"transparent"===t?t:ve(c.default({},ie(t),{lightness:parseFloat(e)}))}var $e=xe(Ve);function Ue(e,t){return"transparent"===t?t:ve(c.default({},ie(t),{saturation:parseFloat(e)}))}var qe=xe(Ue);function We(e,t){return"transparent"===t?t:Le(parseFloat(e),"rgb(0, 0, 0)",t)}var Ke=xe(We);function Ye(e,t){return"transparent"===t?t:Le(parseFloat(e),"rgb(255, 255, 255)",t)}var Xe=xe(Ye);function Je(e,t){if("transparent"===t)return t;var a=re(t),n="number"==typeof a.alpha?a.alpha:1;return fe(c.default({},a,{alpha:Me(0,1,+(100*n-100*parseFloat(e)).toFixed(2)/100)}))}var Qe=xe(Je),Ze=["top","right","bottom","left"];function et(e,t){return e(t?":"+t:"")}function tt(e,t,a){if(!t)throw new h(67);if(0===e.length)return et(t,null);for(var n=[],r=0;r<e.length;r+=1){if(a&&a.indexOf(e[r])<0)throw new h(68);n.push(et(t,e[r]))}return n.join(",")}var at=[void 0,null,"active","focus","hover"];function nt(e){return"button"+e+',\n  input[type="button"]'+e+',\n  input[type="reset"]'+e+',\n  input[type="submit"]'+e}var rt=["absolute","fixed","relative","static","sticky"],it=[void 0,null,"active","focus","hover"];function st(e){return'input[type="color"]'+e+',\n    input[type="date"]'+e+',\n    input[type="datetime"]'+e+',\n    input[type="datetime-local"]'+e+',\n    input[type="email"]'+e+',\n    input[type="month"]'+e+',\n    input[type="number"]'+e+',\n    input[type="password"]'+e+',\n    input[type="search"]'+e+',\n    input[type="tel"]'+e+',\n    input[type="text"]'+e+',\n    input[type="time"]'+e+',\n    input[type="url"]'+e+',\n    input[type="week"]'+e+",\n    input:not([type])"+e+",\n    textarea"+e}t.adjustHue=ke,t.animation=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=Array.isArray(t[0]);if(!n&&t.length>8)throw new h(64);return{animation:t.map((function(e){if(n&&!Array.isArray(e)||!n&&Array.isArray(e))throw new h(65);if(Array.isArray(e)&&e.length>8)throw new h(66);return Array.isArray(e)?e.join(" "):e})).join(", ")}},t.backgroundImages=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{backgroundImage:t.join(", ")}},t.backgrounds=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return{background:t.join(", ")}},t.between=L,t.border=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r;return"string"==typeof e&&Ze.indexOf(e)>=0?((r={})["border"+x(e)+"Width"]=a[0],r["border"+x(e)+"Style"]=a[1],r["border"+x(e)+"Color"]=a[2],r):(a.unshift(e),{borderWidth:a[0],borderStyle:a[1],borderColor:a[2]})},t.borderColor=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["borderColor"].concat(t))},t.borderRadius=function(e,t){var a,n,r=x(e);if(!t&&0!==t)throw new h(62);if("Top"===r||"Bottom"===r)return(a={})["border"+r+"RightRadius"]=t,a["border"+r+"LeftRadius"]=t,a;if("Left"===r||"Right"===r)return(n={})["borderTop"+r+"Radius"]=t,n["borderBottom"+r+"Radius"]=t,n;throw new h(63)},t.borderStyle=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["borderStyle"].concat(t))},t.borderWidth=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["borderWidth"].concat(t))},t.buttons=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return tt(t,nt,at)},t.clearFix=function(e){var t;return void 0===e&&(e="&"),(t={})[e+"::after"]={clear:"both",content:'""',display:"table"},t},t.complement=function(e){if("transparent"===e)return e;var t=ie(e);return ve(c.default({},t,{hue:(t.hue+180)%360}))},t.cover=function(e){return void 0===e&&(e=0),{position:"absolute",top:e,right:e,bottom:e,left:e}},t.cssVar=function(e,t){if(!e||!e.match(y)){if(t)return e;throw new h(73)}var a;if("undefined"!=typeof document&&null!==document.documentElement&&(a=getComputedStyle(document.documentElement).getPropertyValue(e)),a)return a.trim();throw new h(74)},t.darken=Te,t.desaturate=Ce,t.directionalProperty=M,t.ellipsis=function(e){return void 0===e&&(e="100%"),{display:"inline-block",maxWidth:e,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",wordWrap:"normal"}},t.em=I,t.fluidRange=function(e,t,a){if(void 0===t&&(t="320px"),void 0===a&&(a="1200px"),!Array.isArray(e)&&"object"!=typeof e||null===e)throw new h(49);if(Array.isArray(e)){for(var n,r={},i={},s=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return R(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?R(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(n=s()).done;){var o,l,u=n.value;if(!u.prop||!u.fromSize||!u.toSize)throw new h(50);i[u.prop]=u.fromSize,r["@media (min-width: "+t+")"]=c.default({},r["@media (min-width: "+t+")"],((o={})[u.prop]=L(u.fromSize,u.toSize,t,a),o)),r["@media (min-width: "+a+")"]=c.default({},r["@media (min-width: "+a+")"],((l={})[u.prop]=u.toSize,l))}return c.default({},i,r)}var d,m,p;if(!e.prop||!e.fromSize||!e.toSize)throw new h(51);return(p={})[e.prop]=e.fromSize,p["@media (min-width: "+t+")"]=((d={})[e.prop]=L(e.fromSize,e.toSize,t,a),d),p["@media (min-width: "+a+")"]=((m={})[e.prop]=e.toSize,m),p},t.fontFace=function(e){var t=e.fontFamily,a=e.fontFilePath,n=e.fontStretch,r=e.fontStyle,i=e.fontVariant,s=e.fontWeight,o=e.fileFormats,l=void 0===o?["eot","woff2","woff","ttf","svg"]:o,c=e.formatHint,u=void 0!==c&&c,d=e.localFonts,m=e.unicodeRange,p=e.fontDisplay,f=e.fontVariationSettings,g=e.fontFeatureSettings;if(!t)throw new h(55);if(!a&&!d)throw new h(52);if(d&&!Array.isArray(d))throw new h(53);if(!Array.isArray(l))throw new h(54);var b={"@font-face":{fontFamily:t,src:H(a,d,l,u),unicodeRange:m,fontStretch:n,fontStyle:r,fontVariant:i,fontWeight:s,fontDisplay:p,fontVariationSettings:f,fontFeatureSettings:g}};return JSON.parse(JSON.stringify(b))},t.getContrast=je,t.getLuminance=Ie,t.getValueAndUnit=_,t.grayscale=function(e){return"transparent"===e?e:ve(c.default({},ie(e),{saturation:0}))},t.hiDPI=G,t.hideText=function(){return{textIndent:"101%",overflow:"hidden",whiteSpace:"nowrap"}},t.hideVisually=function(){return{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",whiteSpace:"nowrap",width:"1px"}},t.hsl=de,t.hslToColorString=function(e){if("object"==typeof e&&"number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness)return e.alpha&&"number"==typeof e.alpha?me({hue:e.hue,saturation:e.saturation,lightness:e.lightness,alpha:e.alpha}):de({hue:e.hue,saturation:e.saturation,lightness:e.lightness});throw new h(45)},t.hsla=me,t.invert=function(e){if("transparent"===e)return e;var t=re(e);return ve(c.default({},t,{red:255-t.red,green:255-t.green,blue:255-t.blue}))},t.lighten=Fe,t.linearGradient=function(e){var t=e.colorStops,a=e.fallback,n=e.toDirection,r=void 0===n?"":n;if(!t||t.length<2)throw new h(56);return{backgroundColor:a||t[0].replace(/,\s+/g,",").split(" ")[0].replace(/,(?=\S)/g,", "),backgroundImage:V(D||(D=p.default(["linear-gradient(","",")"])),r,t.join(", ").replace(/,(?=\S)/g,", "))}},t.margin=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["margin"].concat(t))},t.math=function(e,t){var a=v(e),n=a.match(b);if(n&&!n.every((function(e){return e===n[0]})))throw new h(41);return""+function(e,t){var a,n=function(e){var t={};return t.symbols=e?c.default({},g.symbols,e.symbols):c.default({},g.symbols),t}(t),r=[n.symbols["("].prefix],i=[],s=new RegExp("\\d+(?:\\.\\d+)?|"+Object.keys(n.symbols).map((function(e){return n.symbols[e]})).sort((function(e,t){return t.symbol.length-e.symbol.length})).map((function(e){return e.regSymbol})).join("|")+"|(\\S)","g");s.lastIndex=0;var o=!1;do{var l=(a=s.exec(e))||[")",void 0],u=l[0],d=l[1],m=n.symbols[u],p=m&&!m.prefix&&!m.func,f=!m||!m.postfix&&!m.infix;if(d||(o?f:p))throw new h(37,a?a.index:e.length,e);if(o){var b=m.postfix||m.infix;do{var v=r[r.length-1];if((b.precedence-v.precedence||v.rightToLeft)>0)break}while(E(r,i));o="postfix"===b.notation,")"!==b.symbol&&(r.push(b),o&&E(r,i))}else if(m){if(r.push(m.prefix||m.func),m.func&&(!(a=s.exec(e))||"("!==a[0]))throw new h(38,a?a.index:e.length,e)}else i.push(+u),o=!0}while(a&&r.length);if(r.length)throw new h(39,a?a.index:e.length,e);if(a)throw new h(40,a?a.index:e.length,e);return i.pop()}(v(a.replace(b,"")),t)+(n?v(n[0]):"")},t.meetsContrastGuidelines=function(e,t){var a=je(e,t);return{AA:a>=4.5,AALarge:a>=3,AAA:a>=7,AAALarge:a>=4.5}},t.mix=Le,t.modularScale=function(e,t,a){if(void 0===t&&(t="1em"),void 0===a&&(a=1.333),"number"!=typeof e)throw new h(42);if("string"==typeof a&&!F[a])throw new h(43);var n="string"==typeof t?_(t):[t,""],r=n[0],i=n[1],s="string"==typeof a?F[a]:a;if("string"==typeof r)throw new h(44,t);return""+r*Math.pow(s,e)+(i||"")},t.normalize=function(){var e;return[(e={html:{lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:"0"},main:{display:"block"},h1:{fontSize:"2em",margin:"0.67em 0"},hr:{boxSizing:"content-box",height:"0",overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{backgroundColor:"transparent"},"abbr[title]":{borderBottom:"none",textDecoration:"underline"}},e["b,\n    strong"]={fontWeight:"bolder"},e["code,\n    kbd,\n    samp"]={fontFamily:"monospace, monospace",fontSize:"1em"},e.small={fontSize:"80%"},e["sub,\n    sup"]={fontSize:"75%",lineHeight:"0",position:"relative",verticalAlign:"baseline"},e.sub={bottom:"-0.25em"},e.sup={top:"-0.5em"},e.img={borderStyle:"none"},e["button,\n    input,\n    optgroup,\n    select,\n    textarea"]={fontFamily:"inherit",fontSize:"100%",lineHeight:"1.15",margin:"0"},e["button,\n    input"]={overflow:"visible"},e["button,\n    select"]={textTransform:"none"},e['button,\n    html [type="button"],\n    [type="reset"],\n    [type="submit"]']={WebkitAppearance:"button"},e['button::-moz-focus-inner,\n    [type="button"]::-moz-focus-inner,\n    [type="reset"]::-moz-focus-inner,\n    [type="submit"]::-moz-focus-inner']={borderStyle:"none",padding:"0"},e['button:-moz-focusring,\n    [type="button"]:-moz-focusring,\n    [type="reset"]:-moz-focusring,\n    [type="submit"]:-moz-focusring']={outline:"1px dotted ButtonText"},e.fieldset={padding:"0.35em 0.625em 0.75em"},e.legend={boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:"0",whiteSpace:"normal"},e.progress={verticalAlign:"baseline"},e.textarea={overflow:"auto"},e['[type="checkbox"],\n    [type="radio"]']={boxSizing:"border-box",padding:"0"},e['[type="number"]::-webkit-inner-spin-button,\n    [type="number"]::-webkit-outer-spin-button']={height:"auto"},e['[type="search"]']={WebkitAppearance:"textfield",outlineOffset:"-2px"},e['[type="search"]::-webkit-search-decoration']={WebkitAppearance:"none"},e["::-webkit-file-upload-button"]={WebkitAppearance:"button",font:"inherit"},e.details={display:"block"},e.summary={display:"list-item"},e.template={display:"none"},e["[hidden]"]={display:"none"},e),{"abbr[title]":{textDecoration:"underline dotted"}}]},t.opacify=De,t.padding=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return M.apply(void 0,["padding"].concat(t))},t.parseToHsl=ie,t.parseToRgb=re,t.position=function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return rt.indexOf(e)>=0&&e?c.default({},M.apply(void 0,[""].concat(a)),{position:e}):M.apply(void 0,["",e].concat(a))},t.radialGradient=function(e){var t=e.colorStops,a=e.extent,n=void 0===a?"":a,r=e.fallback,i=e.position,s=void 0===i?"":i,o=e.shape,l=void 0===o?"":o;if(!t||t.length<2)throw new h(57);return{backgroundColor:r||t[0].split(" ")[0],backgroundImage:V(A||(A=p.default(["radial-gradient(","","","",")"])),s,l,n,t.join(", "))}},t.readableColor=function(e,t,a,n){void 0===t&&(t=Ae),void 0===a&&(a=Ne),void 0===n&&(n=!0);var r=Ie(e)>.179,i=r?t:a;return!n||je(e,i)>=4.5?i:r?Ae:Ne},t.rem=P,t.retinaImage=function(e,t,a,n,r){var i;if(void 0===a&&(a="png"),void 0===r&&(r="_2x"),!e)throw new h(58);var s=a.replace(/^\./,""),o=n?n+"."+s:""+e+r+"."+s;return(i={backgroundImage:"url("+e+"."+s+")"})[G()]=c.default({backgroundImage:"url("+o+")"},t?{backgroundSize:t}:{}),i},t.rgb=pe,t.rgbToColorString=function(e){if("object"==typeof e&&"number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue)return"number"==typeof e.alpha?fe({red:e.red,green:e.green,blue:e.blue,alpha:e.alpha}):pe({red:e.red,green:e.green,blue:e.blue});throw new h(46)},t.rgba=fe,t.saturate=Be,t.setHue=Ge,t.setLightness=$e,t.setSaturation=qe,t.shade=Ke,t.size=function(e,t){return void 0===t&&(t=e),{height:e,width:t}},t.stripUnit=O,t.textInputs=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return tt(t,st,it)},t.timingFunctions=function(e){return $[e]},t.tint=Xe,t.toColorString=ve,t.transitions=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(Array.isArray(t[0])&&2===t.length){var n=t[1];if("string"!=typeof n)throw new h(61);return{transition:t[0].map((function(e){return e+" "+n})).join(", ")}}return{transition:t.join(", ")}},t.transparentize=Qe,t.triangle=function(e){var t=e.pointingDirection,a=e.height,n=e.width,r=e.foregroundColor,i=e.backgroundColor,s=void 0===i?"transparent":i,o=_(n),l=_(a);if(isNaN(l[0])||isNaN(o[0]))throw new h(60);return c.default({width:"0",height:"0",borderColor:s},function(e,t){switch(e){case"top":case"bottomRight":return{borderBottomColor:t};case"right":case"bottomLeft":return{borderLeftColor:t};case"bottom":case"topLeft":return{borderTopColor:t};case"left":case"topRight":return{borderRightColor:t};default:throw new h(59)}}(t,r),{borderStyle:"solid",borderWidth:U(t,l,o)})},t.wordWrap=function(e){return void 0===e&&(e="break-word"),{overflowWrap:e,wordWrap:e,wordBreak:"break-word"===e?"break-all":e}}},function(e,t,a){e.exports=a(11)(1453)},function(e,t,a){e.exports=a(11)(3099)},function(e,t,a){e.exports=a(11)(3101)},function(e,t,a){e.exports=a(11)(3100)},,,,,,,,,,function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return dw}));var n=a(1),r=a.n(n),i=a(35),s=a.n(i),o=a(0);const l=(e,t)=>t.reduce(((t,a)=>(t[a]=e[a]&&!0===e[a].show,t)),{});var c=a(58),u=a(19),d=a(8),m=a(30),p=a(21),f=a(20),g=a(173),h=a(61),b=a.n(h),E=a(104),v=a.n(E),y=a(18),x=a(38),S=a(139),k=a(172),M=a(117),w=a(29);const T=({theme:{theme$:e},euiTheme:t,children:a,...r})=>{const i=v()(e,M.a),s=Object(n.useMemo)((()=>Object(M.b)(i)),[i]);return Object(w.jsx)(y.EuiThemeProvider,b()({colorMode:s,theme:t},r),a)},O=({theme:e,children:t,...a})=>Object(x.useIsNestedEuiProvider)()?Object(w.jsx)(T,b()({theme:e},a),t):(Object(S.emitEuiProviderWarning)("KibanaThemeProvider requires a parent KibanaRenderContextProvider.  Check your React tree and ensure that they are wrapped in a KibanaRenderContextProvider."),Object(w.jsx)(k.a,{theme:e,globalStyles:!1},t)),C=r.a.createContext(null),I=({children:e,...t})=>{const{navigateToUrl:a,currentAppId:n}=t;return Object(w.jsx)(C.Provider,{value:{navigateToUrl:a,currentAppId:n}},e)},j=({children:e,coreStart:t})=>{const{navigateToUrl:a,currentAppId$:n}=t.application,r=v()(n,void 0);return Object(w.jsx)(C.Provider,{value:{navigateToUrl:a,currentAppId:r}},e)},_={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},F=({children:e,navigateToUrl:t,currentAppId:a,...r})=>{const i=Object(n.useRef)(null),s=Object(n.useCallback)((e=>(({event:e,container:t,navigateToUrl:a,currentAppId:n})=>{if(!t||!n)return;const r=((e,t)=>{let a=e;do{var n,r;if("a"===(null===(n=a)||void 0===n?void 0:n.tagName.toLowerCase()))return a;const e=null===(r=a)||void 0===r?void 0:r.parentElement;if(!e||e===document.body||e===t)break;a=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!r)return;const i=r.href,s=""===r.target||"_self"===r.target,o=0===e.button;i&&s&&o&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),a(r.href))})({event:e,currentAppId:a,navigateToUrl:t,container:i.current})),[a,t]);return Object(w.jsx)("div",b()({onClick:s,ref:i,css:_,"data-test-subj":"kbnRedirectAppLink"},r),e)},P=({children:e,...t})=>Object(w.jsx)(F,b()({},function(){const e=Object(n.useContext)(C);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),L=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:a,...n}=t,r=Object(w.jsx)(P,n,e);return Object(w.jsx)(j,{coreStart:a},r)}const{navigateToUrl:a,currentAppId:n,...r}=t,i=Object(w.jsx)(P,r,e);return Object(w.jsx)(I,{currentAppId:n,navigateToUrl:a},i)};var R=a(24),D=a(42);const A=({children:e,...t})=>Object(w.jsx)(R.Router,t,Object(w.jsx)(D.CompatRouter,null,e));var N=a(67),z=a(23),B=a(31),H=a(25),G=a.n(H),V=a(28),$=a.n(V),U=a(81),q=a(59);const W={lastRefresh:0,refreshApp:()=>{throw new Error("App refresh was not initialized, set it when you invoke the context")}},K=Object(n.createContext)(W),Y=({children:e})=>{const[t,a]=Object(n.useState)(Date.now()),i=Object(u.useSelector)(q.V),s=Object(u.useSelector)(q.U),o=Object(n.useCallback)((()=>{const e=Date.now();a(e)}),[a]);Object(n.useEffect)((()=>{i||o()}),[o,i]);const l=Object(n.useMemo)((()=>({lastRefresh:t,refreshApp:o})),[t,o]);return Object(U.useEvent)("visibilitychange",(()=>{const e=$()().diff(new Date(t),"seconds")>s;"hidden"!==document.visibilityState&&!i&&e&&o()}),document),Object(n.useEffect)((()=>{if(i)return;const e=setInterval((()=>{"hidden"!==document.visibilityState&&o()}),1e3*s);return()=>clearInterval(e)}),[i,o,s]),r.a.createElement(K.Provider,{value:l,children:e})},X=()=>Object(n.useContext)(K);var J=a(171),Q=a.n(J),Z=a(135),ee=a(113);const te=(e,t)=>{const a=parseInt(e||"",10);return isNaN(a)?t:a};var ae=a(39),ne=a.n(ae);const re=(e,t,a={})=>{const n=ne.a.parse(e,a);return n?n.valueOf():t},{ABSOLUTE_DATE_RANGE_START:ie,ABSOLUTE_DATE_RANGE_END:se,SEARCH:oe,FILTERS:le,STATUS_FILTER:ce}=c.c,{DATE_RANGE_START:ue,DATE_RANGE_END:de,AUTOREFRESH_INTERVAL_SECONDS:me,AUTOREFRESH_IS_PAUSED:pe}=ee.a,fe=e=>{if(!e)return[];try{return JSON.parse(e)}catch(t){return[e]}},{FOCUS_CONNECTOR_FIELD:ge}=c.c,{DATE_RANGE_START:he,DATE_RANGE_END:be,AUTOREFRESH_INTERVAL_SECONDS:Ee,AUTOREFRESH_IS_PAUSED:ve}=ee.a,ye=(e,t=!1)=>(t&&(delete e.absoluteDateRangeStart,delete e.absoluteDateRangeEnd,xe(e)),`?${Object(Z.stringify)(e,{sort:!1})}`),xe=e=>(Object.keys(e).forEach((t=>{const a=e[t];null!=a&&""!==a&&void 0!==a||delete e[t],"dateRangeStart"===t&&a===he&&delete e[t],"dateRangeEnd"===t&&a===be&&delete e[t],"refreshPaused"===t&&a===ve&&delete e[t],"refreshInterval"===t&&a===Ee&&delete e[t],"focusConnectorField"===t&&a===ge&&delete e[t]})),e);function Se(e){return e?Object(Z.parse)("?"===e[0]?e.slice(1):e,{sort:!1}):{}}const ke=()=>{const{search:e}=Object(R.useLocation)();return(e=>{const t={};Object.keys(e).forEach((a=>{let n;n=void 0===e[a]?void 0:Array.isArray(e[a])?e[a][0]:e[a],t[a]=n}));const{refreshInterval:a,refreshPaused:n,dateRangeStart:r,dateRangeEnd:i,filters:s,excludedFilters:o,search:l,statusFilter:c,pagination:u,focusConnectorField:d,query:m,tags:p,monitorTypes:f,locations:g,locationId:h,projects:b,schedules:E,groupBy:v,groupOrderBy:y,packagePolicyId:x}=t;return{packagePolicyId:x||void 0,groupBy:v,groupOrderBy:y,pagination:u,absoluteDateRangeStart:re(r||ue,ie),absoluteDateRangeEnd:re(i||de,se,{roundUp:!0}),refreshInterval:te(a,me),refreshPaused:(S=n,k=pe,"true"===S||"false"!==S&&k),dateRangeStart:r||ue,dateRangeEnd:i||de,filters:s||le,excludedFilters:o||"",search:l||oe,statusFilter:c||ce,focusConnectorField:!!d,query:m||"",tags:fe(p),monitorTypes:fe(f),locations:fe(g),projects:fe(b),schedules:fe(E),locationId:h||void 0,cloneId:t.cloneId};var S,k})(Se(e))},Me=()=>{const{pathname:e,search:t}=Object(R.useLocation)(),a=Object(R.useHistory)(),r=Object(n.useCallback)(((n,r=!1)=>{const i={...Se(t),...n},s=Object.keys(i),o=n?Object(Z.stringify)(s.reduce(((e,t)=>{const a=i[t];return void 0===a||""===a?e:{...e,[t]:a}}),{})):null;t!==o&&(r?a.replace({pathname:e,search:o||void 0}):a.push({pathname:e,search:o||void 0}))}),[a,e,t]);return[ke,r]};function we({from:e,to:t}){const{lastRefresh:a}=X();return Object(n.useMemo)((()=>{var a,n,r,i;return{from:null!==(a=null===(n=Q.a.parse(e))||void 0===n?void 0:n.toISOString())&&void 0!==a?a:e,to:null!==(r=null===(i=Q.a.parse(t,{roundUp:!0}))||void 0===i?void 0:i.toISOString())&&void 0!==r?r:t}}),[e,t,a])}function Te(e,t){const{lastRefresh:a}=X();return Object(n.useMemo)((()=>({from:$()(a).subtract(e,t).toISOString(),to:new Date(a).toISOString()})),[a,e,t])}function Oe(){const{dateRangeStart:e,dateRangeEnd:t}=ke(),a="now-24h"===e&&"now"===t;const n=we({from:e,to:t}),r=Te(24,"hours");return a?r:n}var Ce=a(6);const Ie=e=>{var t,a,r,i,s;const l=Me()[0](),c=Object(p.useKibana)(),{setBreadcrumbs:u,isServerless:d}=Object(n.useContext)(et),m=null!==(t=null===(a=c.services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",f=null!==(r=null===(i=c.services.application)||void 0===i?void 0:i.getUrlForApp("observability-overview"))&&void 0!==r?r:"",g=null===(s=c.services.application)||void 0===s?void 0:s.navigateToUrl;Object(n.useEffect)((()=>{var t,a;u&&u((t=((e,t,a,n)=>{if(a){const t={...a};delete t.statusFilter;const n=ye(t,!0);e+="?"===n?"":n}const r=[];return n||r.push({text:o.i18n.translate("xpack.synthetics.breadcrumbs.observabilityText",{defaultMessage:"Observability"}),href:t,"data-test-subj":"observabilityPathBreadcrumb"}),r.push({text:o.i18n.translate("xpack.synthetics.breadcrumbs.overviewBreadcrumbText",{defaultMessage:"Synthetics"}),href:e,"data-test-subj":"syntheticsPathBreadcrumb"}),r})(m,f,l,d).concat(e),a=g,t.map((e=>({...e,...e.href?{onClick:t=>{a&&e.href&&(t.preventDefault(),a(e.href))}}:{},...e["data-test-subj"]?{"data-test-subj":e["data-test-subj"]}:{"data-test-subj":e.href}})))))}),[m,f,e,g,l,u,d])};function je(){const e=Object(u.useDispatch)(),{application:t}=Object(p.useKibana)().services,{loading:a,error:r,enablement:i}=Object(u.useSelector)(q.Z);return Object(n.useEffect)((()=>{i||a||r||e(Object(q.v)())}),[e,i,r,a]),Object(n.useEffect)((()=>{null!=i&&i.canEnable||null!=i&&i.isEnabled||a||!i||null==t||t.navigateToApp("synthetics",{path:"/monitors"})}),[t,i,a]),{areApiKeysEnabled:null==i?void 0:i.areApiKeysEnabled,canManageApiKeys:null==i?void 0:i.canManageApiKeys,canEnable:null==i?void 0:i.canEnable,isEnabled:null==i?void 0:i.isEnabled,isServiceAllowed:Boolean(null==i?void 0:i.isServiceAllowed),invalidApiKeyError:!!i&&!Boolean(null==i?void 0:i.isValidApiKey),error:r,loading:a}}function _e(){const e=Object(u.useDispatch)(),{error:t,loading:a,locations:r,throttling:i,locationsLoaded:s}=Object(u.useSelector)(q.X);return Object(n.useEffect)((()=>{s||e(Object(q.u)())}),[e,r,s]),{error:t,loading:a,locations:r,throttling:i,getLocationByLabel:e=>r.find((t=>t.label===e))}}var Fe=a(137);const Pe=(e,t,a)=>{const{name:r,isRequestReady:i=!0}=null!=a?a:{},s=Object(u.useDispatch)(),o=Object(u.useSelector)(Fe.e),l=Object(u.useSelector)(Fe.f),c=Object(u.useSelector)(Fe.d);return Object(n.useEffect)((()=>{e.index&&i&&s(Fe.b.get({params:e,name:r}))}),[s,r,JSON.stringify(e),i,...t]),Object(n.useMemo)((()=>({data:l[r],loading:o[r],error:c[r]})),[c,o,r,l])};var Le=a(74);const Re=e=>{const t=50*Number(e);return{range:{"@timestamp":{gte:`now-${Math.ceil(t/60)}h`,lte:"now"}}}},De=["monitor.duration.us"];function Ae(e){const t=Object(u.useDispatch)(),{locationsLoaded:a,locations:r}=Object(u.useSelector)(q.X);Object(n.useEffect)((()=>{a||t(Object(q.u)())}));const i=null==e?void 0:e.location.id;return Object(n.useMemo)((()=>{var t;if(!a||e.location.label)return null!==(t=e.location.label)&&void 0!==t?t:e.location.id;{var n;const t=r.find((e=>e.id===i));return null!==(n=null==t?void 0:t.label)&&void 0!==n?n:e.location.label||e.location.id}}),[a,r,i,e])}function Ne({configId:e,monitorLocations:t}){var a;const r=Object(f.useTheme)(),{lastRefresh:i}=X(),{locations:s}=_e(),{data:o,loading:l}=Object(f.useEsSearch)({index:c.A,body:{size:0,query:{bool:{filter:[Le.c,Le.b,{term:{config_id:e}}]}},sort:[{"@timestamp":"desc"}],aggs:{locations:{terms:{field:"observer.geo.name",missing:c.E,size:1e3},aggs:{summary:{top_hits:{size:1}}}}}}},[i,e],{name:"getMonitorStatusByLocation"});return Object(n.useMemo)((()=>{var e,a;const n=e=>{switch(e){case"up":return r.eui.euiColorVis0;case"down":return r.eui.euiColorVis9;default:return"subdued"}},i=(null!==(e=null==o||null===(a=o.aggregations)||void 0===a?void 0:a.locations.buckets)&&void 0!==e?e:[]).map((e=>{var t;return null===(t=e.summary.hits.hits)||void 0===t?void 0:t[0]._source}));return{locations:(null!=t?t:[]).map((e=>{const t=s.find((t=>t.id===e.id));if(t){var a,r;const e=i.find((e=>{var a,n;return(null===(a=e.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name)===(null==t?void 0:t.label)})),s=e?null!==(a=null===(r=e.summary)||void 0===r?void 0:r.down)&&void 0!==a&&a?"down":"up":"unknown";return{status:s,id:null==t?void 0:t.id,label:null==t?void 0:t.label,color:n(s)}}})).filter(Boolean),loading:l}}),[s,null==o||null===(a=o.aggregations)||void 0===a?void 0:a.locations.buckets,l,t,r.eui.euiColorVis0,r.eui.euiColorVis9])}var ze=a(69);function Be({configId:e,locationId:t}){const{status:a}=Object(u.useSelector)(ze.f);return He(a,e,t)}const He=(e,t,a)=>{if(!e)return{status:"unknown"};const n=`${t}-${a}`,r=e.allConfigs[n];return{configIdByLocation:n,status:(null==r?void 0:r.status)||"unknown",timestamp:null==r?void 0:r.timestamp,ping:null==r?void 0:r.ping}};var Ge=a(60);function Ve(e,t){if(!e)return!1;const a=e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e));for(const e of a)if(t[e]&&Object(q.w)(t[e]))return!0;return!1}function $e(e,t){if(!e)return!1;const a=e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e));for(const e of a)if(!t[e]||Object(q.w)(t[e]))return!1;return!0}function Ue(){const[e,t]=Object(n.useState)(),a=Object(n.useRef)(),r=Object(n.useRef)(new ResizeObserver((e=>{e&&e[0]&&t({width:e[0].contentRect.width,height:e[0].contentRect.height})})));return Object(n.useEffect)((()=>{const e=a.current,t=r.current;return e&&t.observe(e),()=>{e&&t.unobserve(e)}}),[a.current,r.current]),{elementRef:a,...e}}function qe(){const{fleet:e}=Object(p.useKibana)().services,t=Boolean(null==e?void 0:e.authz.integrations.writeIntegrationPolicies);return{canReadAgentPolicies:Boolean(null==e?void 0:e.authz.fleet.readAgentPolicies),canSaveIntegrations:t,canCreateAgentPolicies:Boolean(null==e?void 0:e.authz.fleet.all)}}var We=a(77);function Ke({configId:e,reloadPage:t,labels:a}){var r;const i=Object(u.useDispatch)(),s=null===(r=Object(u.useSelector)(q.P)[e])||void 0===r?void 0:r.status,[o,l]=Object(n.useState)(null);return Object(n.useEffect)((()=>{s===f.FETCH_STATUS.FAILURE&&l(null)}),[l,s]),{isEnabled:o,updateMonitorEnabledState:Object(n.useCallback)((n=>{i(Object(q.m)({configId:e,monitor:{[We.c.ENABLED]:n},success:{message:n?a.enabledSuccessLabel:a.disabledSuccessLabel,lifetimeMs:3e3,testAttribute:"uptimeMonitorEnabledUpdateSuccess"},error:{message:{title:a.failureLabel},lifetimeMs:1e4,testAttribute:"uptimeMonitorEnabledUpdateFailure"}})),l(n),t&&t()}),[i,e,a.disabledSuccessLabel,a.enabledSuccessLabel,a.failureLabel,l,t]),status:s}}var Ye=a(2);const{BASE_PATH:Xe}=c.d,{DATE_RANGE_START:Je,DATE_RANGE_END:Qe}=c.c,Ze={basePath:Xe,dateRangeStart:Je,dateRangeEnd:Qe,isApmAvailable:!0,isInfraAvailable:!0,isLogsAvailable:!0,isDev:!1,canSave:!1},et=Object(n.createContext)(Ze),tt=({children:e,...t})=>{var a;const{basePath:i,isApmAvailable:s,isInfraAvailable:o,isLogsAvailable:l,commonlyUsedRanges:c,isDev:u,setBreadcrumbs:d,isServerless:m}=t,{dateRangeStart:f,dateRangeEnd:g}=ke(),{application:h}=Object(p.useKibana)().services,b=null!==(a=null==h?void 0:h.capabilities.uptime.save)&&void 0!==a&&a,E=Object(n.useMemo)((()=>({canSave:b,isDev:u,basePath:i,isApmAvailable:s,isInfraAvailable:o,isLogsAvailable:l,commonlyUsedRanges:c,dateRangeStart:null!=f?f:Je,dateRangeEnd:null!=g?g:Qe,setBreadcrumbs:d,isServerless:m})),[b,u,i,s,o,l,f,g,c,d,m]);return r.a.createElement(et.Provider,{value:E,children:e})},at=()=>Object(n.useContext)(et);var nt=a(49),rt=a(34);const it={colors:{danger:nt.euiLightVars.euiColorDanger,dangerBehindText:nt.euiDarkVars.euiColorVis9_behindText,mean:nt.euiLightVars.euiColorPrimary,range:nt.euiLightVars.euiFocusBackgroundColor,success:nt.euiLightVars.euiColorSuccess,warning:nt.euiLightVars.euiColorWarning,gray:nt.euiLightVars.euiColorLightShade,lightestShade:nt.euiLightVars.euiColorLightestShade},chartTheme:{baseTheme:rt.LIGHT_THEME}},st=Object(n.createContext)(it),ot=({darkMode:e,children:t})=>{let a;a=e?{danger:nt.euiDarkVars.euiColorVis9,dangerBehindText:nt.euiDarkVars.euiColorVis9_behindText,mean:nt.euiDarkVars.euiColorPrimary,gray:nt.euiDarkVars.euiColorLightShade,range:nt.euiDarkVars.euiFocusBackgroundColor,success:nt.euiDarkVars.euiColorSuccess,warning:nt.euiDarkVars.euiColorWarning,lightestShade:nt.euiDarkVars.euiColorLightestShade}:{danger:nt.euiLightVars.euiColorVis9,dangerBehindText:nt.euiLightVars.euiColorVis9_behindText,mean:nt.euiLightVars.euiColorPrimary,gray:nt.euiLightVars.euiColorLightShade,range:nt.euiLightVars.euiFocusBackgroundColor,success:nt.euiLightVars.euiColorSuccess,warning:nt.euiLightVars.euiColorWarning,lightestShade:nt.euiLightVars.euiColorLightestShade};const i=Object(n.useMemo)((()=>({colors:a,chartTheme:{baseTheme:e?rt.DARK_THEME:rt.LIGHT_THEME}})),[a,e]);return r.a.createElement(st.Provider,{value:i,children:t})},lt=Object(n.createContext)({}),ct=({children:e,...t})=>r.a.createElement(lt.Provider,{value:{...t},children:e}),ut=()=>Object(n.useContext)(lt);function dt(){const{lastRefresh:e}=X(),[t,a]=Object(n.useState)((()=>Date.now())),i=Object(u.useSelector)(q.V);if(Object(n.useEffect)((()=>{const e=setInterval((()=>{a(Date.now())}),5e3);return()=>{clearInterval(e)}}),[]),Object(n.useEffect)((()=>{a(Date.now())}),[e]),!e||i)return null;const s=$()().diff($()(e),"minutes")>1,o=$()().diff($()(e),"minutes")>5,l=$()(e).from(t);return r.a.createElement(mt,{color:o?"danger":s?"warning":"subdued",size:"s",$_css:s?"bold":void 0},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.lastUpdated.label",defaultMessage:"Updated {updatedDate}",values:{updatedDate:l}}))}var mt=G()(y.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-19nrpof-0"})((e=>({lineHeight:"40px",fontWeight:e.$_css})));const{AUTOREFRESH_INTERVAL_SECONDS:pt,AUTOREFRESH_IS_PAUSED:ft}=ee.a,gt=({refreshPaused:e,refreshInterval:t})=>({refreshInterval:t===pt?void 0:t,refreshPaused:e===ft?void 0:e}),ht=()=>{const e=Object(u.useDispatch)(),t=Object(u.useSelector)(q.V),a=Object(u.useSelector)(q.U),[i,s]=Me(),{refreshInterval:o,refreshPaused:l}=i(),c=Object(n.useRef)(!0);return Object(n.useEffect)((()=>{c.current?(e(Object(q.ib)(o)),e(Object(q.jb)(l)),c.current=!1):o===a&&l===t||s(gt({refreshInterval:a,refreshPaused:t}),!0)}),[s,a,t,o,l,e]),r.a.createElement(y.EuiAutoRefreshButton,{size:"m",isPaused:t,refreshInterval:1e3*a,onRefreshChange:t=>{e(Object(q.ib)(t.refreshInterval/1e3)),e(Object(q.jb)(t.isPaused)),s(gt({refreshInterval:t.refreshInterval/1e3,refreshPaused:t.isPaused}),!0)},shortHand:!0})};var bt=a(40);function Et(){const{services:{inspector:e,uiSettings:t}}=Object(p.useKibana)(),{isDev:a}=at(),{inspectorAdapters:n}=Object(f.useInspectorContext)();return(null==t?void 0:t.get(bt.enableInspectEsQueries))||a?r.a.createElement(y.EuiHeaderLink,{color:"primary",onClick:()=>{e.open(n)}},o.i18n.translate("xpack.synthetics.inspectButtonText",{defaultMessage:"Inspect"})):null}var vt=a(4);const yt={toggleButtonAriaLabel:o.i18n.translate("xpack.synthetics.alertsRulesPopover.toggleButton.ariaLabel",{defaultMessage:"Open alerts and rules menu"}),toggleMonitorStatusAriaLabel:o.i18n.translate("xpack.synthetics.toggleAlertFlyout.ariaLabel",{defaultMessage:"Open add rule flyout"}),toggleTlsAriaLabel:o.i18n.translate("xpack.synthetics.toggleAlertFlyout.tls.ariaLabel",{defaultMessage:"Open add tls rule flyout"}),toggleMonitorStatusContent:o.i18n.translate("xpack.synthetics.toggleAlertButton.content",{defaultMessage:"Monitor status rule"}),toggleTlsContent:o.i18n.translate("xpack.synthetics.toggleTlsAlertButton.label.content",{defaultMessage:"TLS certificate rule"}),navigateToAlertingUIAriaLabel:o.i18n.translate("xpack.synthetics.app.navigateToAlertingUi",{defaultMessage:"Leave Synthetics and go to Alerting Management page"}),navigateToAlertingButtonContent:o.i18n.translate("xpack.synthetics.app.navigateToAlertingButton.content",{defaultMessage:"Manage rules"}),alertsAndRules:o.i18n.translate("xpack.synthetics.alerts.toggleAlertFlyoutButtonText",{defaultMessage:"Alerts and rules"})},xt=()=>{const{observability:e}=Object(p.useKibana)().services,t=e.useRulesLink();return r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsManageRulesLinkLink",color:"text",href:t.href},yt.navigateToAlertingButtonContent)};var St=a(33);const kt=e=>e.defaultAlerting,Mt=Object(St.createSelector)(kt,(e=>e.data)),wt=Object(St.createSelector)(kt,(e=>e.loading)),Tt=Object(St.createSelector)(kt,(e=>e.success));var Ot=a(108);const Ct=()=>{var e,t;const a=Object(u.useDispatch)(),[i,s]=Object(n.useState)(!1),{application:o}=Object(p.useKibana)().services,l=null!==(e=null==o||null===(t=o.capabilities.uptime)||void 0===t?void 0:t.save)&&void 0!==e&&e,{EditAlertFlyout:c,loading:d}=(e=>{const t=Object(u.useDispatch)(),a=Object(u.useSelector)(Mt),r=Object(u.useSelector)(wt),i=Object(u.useSelector)(q.C),{canSave:s}=at(),{loaded:o,data:l}=Object(u.useSelector)(q.M),c=o&&l.absoluteTotal&&l.absoluteTotal>0,d=Object(n.useCallback)((()=>{t(s?Ot.c.get():Ot.d.get())}),[s,t]);Object(n.useEffect)((()=>{c&&(a?d():setTimeout((()=>{d()}),1e3))}),[t,e,c]);const{triggersActionsUi:m}=Object(p.useKibana)().services,f=Object(n.useMemo)((()=>a?m.getEditRuleFlyout({onClose:()=>t(Object(q.db)(null)),hideInterval:!0,initialRule:i===vt.c?a.tlsRule:a.statusRule}):null),[a,t,m,i]);return Object(n.useMemo)((()=>({loading:r,EditAlertFlyout:f})),[f,r])})(i),{loaded:m,data:f}=Object(u.useSelector)(q.M),g=m&&f.absoluteTotal&&f.absoluteTotal>0,h=[{id:0,items:[{"aria-label":yt.toggleMonitorStatusAriaLabel,"data-test-subj":"xpack.synthetics.toggleAlertFlyout",name:r.a.createElement(y.EuiFlexGroup,{alignItems:"center"},r.a.createElement(y.EuiFlexItem,null,yt.toggleMonitorStatusContent),d&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiLoadingSpinner,null))),onClick:()=>{a(Object(q.db)(vt.b)),s(!1)},toolTipContent:l?null:It,disabled:!l||d,icon:"bell"},{"aria-label":yt.toggleMonitorStatusAriaLabel,"data-test-subj":"xpack.synthetics.toggleAlertFlyout.tls",name:r.a.createElement(y.EuiFlexGroup,{alignItems:"center"},r.a.createElement(y.EuiFlexItem,null,yt.toggleTlsContent),d&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiLoadingSpinner,null))),onClick:()=>{a(Object(q.db)(vt.c)),s(!1)},toolTipContent:l?null:It,disabled:!l||d,icon:"bell"},{"aria-label":yt.navigateToAlertingUIAriaLabel,"data-test-subj":"xpack.synthetics.navigateToAlertingUi",name:r.a.createElement(xt,null),icon:"tableOfContents"}]}],b=Object(u.useSelector)(q.C);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiPopover,{button:r.a.createElement(y.EuiHeaderLink,{color:"text","aria-label":yt.toggleButtonAriaLabel,"data-test-subj":"xpack.synthetics.alertsPopover.toggleButton",iconType:"arrowDown",iconSide:"right",onClick:()=>s(!i),disabled:!g},yt.alertsAndRules),closePopover:()=>s(!1),isOpen:i,ownFocus:!0,panelPaddingSize:"none"},r.a.createElement(y.EuiContextMenu,{initialPanelId:0,panels:h})),b&&c)},It=o.i18n.translate("xpack.synthetics.alertDropdown.noPermissions",{defaultMessage:"You do not have sufficient permissions to perform this action."}),jt=o.i18n.translate("xpack.synthetics.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),_t=o.i18n.translate("xpack.synthetics.analyzeDataButtonLabel.message",{defaultMessage:"Go to Explore Data, where you can select and filter result data in any dimension and look for the cause or impact of performance problems."});function Ft(){var e,t,a;const{basePath:n}=at(),i=ke(),{dateRangeStart:s,dateRangeEnd:l}=i,u=Object(R.useHistory)(),d={monitor:{id:void 0,name:"test"}},m=Object(R.useRouteMatch)(c.t),p=null==d||null===(e=d.monitor)||void 0===e?void 0:e.id,f=Object(B.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"synthetics",seriesType:"area",selectedMetricField:"monitor.duration.us",time:{from:s,to:l},breakdown:p?"observer.geo.name":"monitor.type",reportDefinitions:{"monitor.name":null!=d&&null!==(t=d.monitor)&&void 0!==t&&t.name&&!0===(null==m?void 0:m.isExact)?[null==d||null===(a=d.monitor)||void 0===a?void 0:a.name]:[],"url.full":["ALL_VALUES"]},name:p?`${p}-response-duration`:"All monitors response duration"}]},n);return r.a.createElement(y.EuiHeaderLinks,{gutterSize:"xs"},r.a.createElement(dt,null),r.a.createElement(ht,null),r.a.createElement(Ct,null),r.a.createElement(y.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.settingsLink.label",{defaultMessage:"Navigate to the Uptime settings page"}),color:"text","data-test-subj":"settings-page-link",href:u.createHref({pathname:c.x,search:ye(i,!0)})},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.page_header.settingsLink",defaultMessage:"Settings"})),r.a.createElement(y.EuiToolTip,{position:"top",content:r.a.createElement("p",null,_t)},r.a.createElement(y.EuiHeaderLink,{"aria-label":o.i18n.translate("xpack.synthetics.page_header.analyzeData.label",{defaultMessage:'Navigate to the "Explore Data" view to visualize Synthetics/User data'}),href:f,color:"text",iconType:"visBarVerticalStacked","data-test-subj":"syntheticsExploreDataButton"},jt)),r.a.createElement(Et,null))}const Pt=({appMountParameters:e})=>r.a.createElement(f.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},r.a.createElement(y.EuiFlexGroup,{responsive:!1,gutterSize:"s"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Ft,null))));var Lt=a(84);const Rt=()=>{const e=Object(u.useSelector)(Lt.i),t=Object(R.useRouteMatch)({path:[c.v]}),a=Object(R.useRouteMatch)({path:[c.t]}),r=Object(u.useDispatch)(),i=Object(n.useMemo)((()=>Object.values(e).find((e=>e.isTestNowFlyoutOpen))),[e]),s=(null==i?void 0:i.configId)===(null==a?void 0:a.params.monitorId);return Object(n.useEffect)((()=>{null!=t&&t.isExact||!i||s||r(Object(Lt.b)())})),i},Dt=e=>o.i18n.translate("xpack.synthetics.tagsList.filter",{defaultMessage:"Click to filter list with tag {tag}",values:{tag:e}}),At=({tags:e,onClick:t})=>{const[a,i]=Object(n.useState)(3);if(!e||0===e.length)return r.a.createElement(y.EuiText,null,"--");const s=e.slice(0,a);return r.a.createElement(y.EuiFlexGroup,{wrap:!0,gutterSize:"xs",style:{maxWidth:400},alignItems:"baseline"},s.map((e=>r.a.createElement(y.EuiFlexItem,{key:e,grow:!1},t?r.a.createElement(y.EuiBadge,{key:e,title:Dt(e),onClick:()=>{t(e)},onClickAriaLabel:Dt(e),color:"hollow",className:"eui-textTruncate",style:{maxWidth:120}},e):r.a.createElement(y.EuiBadge,{key:e,color:"hollow",className:"eui-textTruncate",style:{maxWidth:120}},e)))),e.length>a&&r.a.createElement(y.EuiFlexItem,{key:e.length-a,grow:!1},r.a.createElement(y.EuiToolTip,{content:r.a.createElement(r.a.Fragment,null,e.slice(a,e.length).map((e=>r.a.createElement(y.EuiText,{key:e,size:"s"},e))))},r.a.createElement(y.EuiBadge,{color:"hollow",onClick:()=>{i(e.length)},onClickAriaLabel:Nt},"+",e.length-a))),a>3&&r.a.createElement(y.EuiFlexItem,{key:e.length-3,grow:!1},r.a.createElement(y.EuiToolTip,{content:zt,key:a},r.a.createElement(y.EuiBadge,{color:"hollow",onClick:()=>{i(3)},onClickAriaLabel:zt},"-",e.length-3))))},Nt=o.i18n.translate("xpack.synthetics.management.monitorList.tags.expand",{defaultMessage:"Click to view remaining tags"}),zt=o.i18n.translate("xpack.synthetics.management.monitorList.tags.collapse",{defaultMessage:"Click to collapse tags"}),Bt=({title:e,hasBorder:t=!0,hasShadow:a=!1,children:n,titleLeftAlign:i,margin:s,...o})=>{const{euiTheme:l}=Object(y.useEuiTheme)();return r.a.createElement(y.EuiPanel,b()({hasBorder:t,hasShadow:a},o),e&&r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement(Ht,{$_css:null!=s?s:l.size.s,$_css2:i?{marginLeft:0}:{}},e)),n)};var Ht=G()("h3").withConfig({displayName:"_StyledH",componentId:"sc-4bkv6n-0"})((e=>({margin:e.$_css,marginBottom:0,...e.$_css2})));const Gt=()=>{var e,t;return!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.save)},Vt=e=>{var t,a,n;const r=null===(t=null===(a=Object(p.useKibana)().services)||void 0===a||null===(n=a.application)||void 0===n?void 0:n.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===t||t;return!(null==e?void 0:e.some((e=>e.isServiceManaged)))||!!r},$t=o.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel",{defaultMessage:"Loading Synthetics App"}),Ut=o.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel.callout.learnMore",{defaultMessage:"Learn more."}),qt=o.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled",{defaultMessage:"Synthetics App is currently disabled"}),Wt=o.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled.adminContact",{defaultMessage:"Synthetics App will be enabled when an admin visits the Synthetics app."}),Kt=o.i18n.translate("xpack.synthetics.monitorManagement.callout.description.disabled",{defaultMessage:"Synthetics App requires a valid API key to run your monitors on Elastic's global managed testing locations. If you already had enabled Synthetics App previously, the API key may no longer be valid."}),Yt=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError.description",{defaultMessage:"Synthetics App settings could not be loaded. Please contact Support."}),Xt=(o.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel.management",{defaultMessage:"Enable Synthetics App"}),o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError",{defaultMessage:"Error loading Synthetics App"})),Jt=o.i18n.translate("xpack.synthetics.monitorManagement.summary.heading",{defaultMessage:"Summary"}),Qt=o.i18n.translate("xpack.synthetics.monitorManagement.configurations.label",{defaultMessage:"Configurations"}),Zt=o.i18n.translate("xpack.synthetics.monitorManagement.disabled.label",{defaultMessage:"Disabled"}),ea=o.i18n.translate("xpack.synthetics.monitorManagement.testRuns.label",{defaultMessage:"Test runs"}),ta=({total:e})=>{const{isEnabled:t,invalidApiKeyError:a,loading:n,isServiceAllowed:i,canEnable:s}=je(),o=!t&&e&&e>0;if(!o&&!(a&&e&&e>0)&&i||n)return null;const l=s||!o||n?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{title:qt,color:"warning"},r.a.createElement("p",null,Kt),r.a.createElement("p",null,Wt," ",r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorManagementPageLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started-ui.html#uptime-set-up-prereq",target:"_blank"},Ut))),r.a.createElement(y.EuiSpacer,{size:"m"})),c=i?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{title:na,color:"warning"},r.a.createElement("p",null,aa)),r.a.createElement(y.EuiSpacer,{size:"m"}));return r.a.createElement(r.a.Fragment,null,l,c)},aa=o.i18n.translate("xpack.synthetics.synthetics.serviceNotAllowed",{defaultMessage:"Account is blocked from using Elastic managed locations, please contact support. Your monitors have been paused."}),na=o.i18n.translate("xpack.synthetics.synthetics.accountBlocked",{defaultMessage:"Account is blocked."}),ra=()=>r.a.createElement(y.EuiCallOut,{title:sa,color:"warning",iconType:"help"},r.a.createElement("p",null,ca),r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.privateLocations.needFleetPermission.description",defaultMessage:"Once there is an agent policy available, you'll be able to manage private locations and monitors with the regular Synthetics app privileges."}))),ia=({canEditSynthetics:e=!0,canUsePublicLocations:t=!0,children:a})=>{const{isServiceAllowed:n}=je(),i=function(e=!0,t=!0){const a=e?void 0:ua;return a||(t?void 0:da)}(e,t);return n?i?r.a.createElement(y.EuiToolTip,{content:i},r.a.createElement("span",null,a)):r.a.createElement(r.a.Fragment,null,a):r.a.createElement(y.EuiToolTip,{content:aa},r.a.createElement("span",null,a))},sa=o.i18n.translate("xpack.synthetics.monitorManagement.privateLocations.needPermissions",{defaultMessage:"You're missing some Kibana privileges to manage private locations"}),oa=o.i18n.translate("xpack.synthetics.monitorManagement.privileges.all",{defaultMessage:"All"}),la=o.i18n.translate("xpack.synthetics.monitorManagement.privileges.read",{defaultMessage:"Read"}),ca=r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.privateLocations.needFleetPermission",defaultMessage:"In order to create private locations, you need an agent policy. You are not authorized to create Fleet agent policies. It requires the {all} for Fleet and at least {read} for Integerations kibana priviliges.",values:{all:r.a.createElement(y.EuiCode,null,`"${oa}"`),read:r.a.createElement(y.EuiCode,null,`"${la}"`)}}),ua=o.i18n.translate("xpack.synthetics.monitorManagement.noSyntheticsPermissions",{defaultMessage:"You do not have sufficient permissions to perform this action."}),da=o.i18n.translate("xpack.synthetics.monitorManagement.canUsePublicLocations",{defaultMessage:"You do not have sufficient permissions to use Elastic managed locations."}),ma=(o.i18n.translate("xpack.synthetics.management.monitorList.noItemForSelectedFiltersMessage",{defaultMessage:"No monitors found for selected filter criteria",description:"This message is shown if there are no monitors in the table and some filter or search criteria exists"}),o.i18n.translate("xpack.synthetics.management.monitorList.loading",{defaultMessage:"Loading...",description:"Shown when the monitor list is waiting for a server response"})),pa=o.i18n.translate("xpack.synthetics.management.monitorList.noItemMessage",{defaultMessage:"No monitors found",description:"This message is shown if the monitors table is rendered but has no items."}),fa=(o.i18n.translate("xpack.synthetics.management.monitorList.tags.expand",{defaultMessage:"Click to view remaining tags"}),o.i18n.translate("xpack.synthetics.management.editLabel",{defaultMessage:"Edit"})),ga=o.i18n.translate("xpack.synthetics.management.cloneLabel",{defaultMessage:"Clone"}),ha=o.i18n.translate("xpack.synthetics.management.enableStatusAlert",{defaultMessage:"Enable status alerts"}),ba=o.i18n.translate("xpack.synthetics.management.disableStatusAlert",{defaultMessage:"Disable status alerts"}),Ea=(o.i18n.translate("xpack.synthetics.management.duplicateLabel",{defaultMessage:"Duplicate"}),o.i18n.translate("xpack.synthetics.management.disableLabel",{defaultMessage:"Disable"}),o.i18n.translate("xpack.synthetics.management.enableLabel",{defaultMessage:"Enable"}),o.i18n.translate("xpack.synthetics.management.deleteLabel",{defaultMessage:"Delete"})),va=(o.i18n.translate("xpack.synthetics.management.confirmDescriptionLabel",{defaultMessage:"This action will delete the monitor but keep any data collected. This action cannot be undone."}),o.i18n.translate("xpack.synthetics.management.yesLabel",{defaultMessage:"Delete"})),ya=o.i18n.translate("xpack.synthetics.management.noLabel",{defaultMessage:"Cancel"}),xa=(o.i18n.translate("xpack.synthetics.management.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),o.i18n.translate("xpack.synthetics.management.monitorDeleteSuccessMessage",{defaultMessage:"Monitor deleted successfully."}),o.i18n.translate("xpack.synthetics.management.monitorDeleteFailureMessage",{defaultMessage:"Monitor was unable to be deleted. Please try again later."})),Sa=(o.i18n.translate("xpack.synthetics.management.monitorDeleteLoadingMessage",{defaultMessage:"Deleting monitor..."}),o.i18n.translate("xpack.synthetics.management.enableMonitorLabel",{defaultMessage:"Enable monitor"})),ka=o.i18n.translate("xpack.synthetics.management.disableMonitorLabel",{defaultMessage:"Disable monitor"}),Ma=e=>o.i18n.translate("xpack.synthetics.management.monitorEnabledSuccessMessage",{defaultMessage:"Monitor {name} enabled successfully.",values:{name:e}}),wa=e=>o.i18n.translate("xpack.synthetics.management.monitorDisabledSuccessMessage",{defaultMessage:"Monitor {name} disabled successfully.",values:{name:e}}),Ta=({configId:e,monitor:t,reloadPage:a,initialLoading:i=!1,isSwitchable:s=!0})=>{const l=Gt(),c=Vt(null==t?void 0:t[Ge.c.LOCATIONS]),{isServiceAllowed:u}=je(),d=t[Ge.c.NAME],m=Object(n.useMemo)((()=>{return{failureLabel:(e=d,o.i18n.translate("xpack.synthetics.management.monitorEnabledUpdateFailureMessage",{defaultMessage:"Unable to update monitor {name}.",values:{name:e}})),enabledSuccessLabel:Ma(d),disabledSuccessLabel:wa(d)};var e}),[d]),{isEnabled:p,updateMonitorEnabledState:g,status:h}=Ke({configId:e,isEnabled:t[Ge.c.ENABLED],reloadPage:a,labels:m}),b=null!=p?p:t[Ge.c.ENABLED],E=h===f.FETCH_STATUS.LOADING,v=b?ka:Sa;return r.a.createElement(r.a.Fragment,null,E||i?r.a.createElement(y.EuiLoadingSpinner,{size:"m"}):r.a.createElement(ia,{canEditSynthetics:l,canUsePublicLocations:c},r.a.createElement(Oa,{compressed:!0,checked:b,disabled:E||!l||!c||!u,showLabel:!1,label:v,title:v,"data-test-subj":"syntheticsIsMonitorEnabled","data-is-switchable":s,onChange:e=>{const t=e.target.checked;g(t)}})))},Oa=Object(m.euiStyled)(y.EuiSwitch)`
  & > button {
    cursor: ${({"data-is-switchable":e})=>e?void 0:"not-allowed"};
  }
`;function Ca({configId:e,locationId:t}){var a,r;const[i,s]=Object(n.useState)(void 0),o=null===(a=ut())||void 0===a||null===(r=a.share)||void 0===r?void 0:r.url.locators.get(Ye.syntheticsMonitorDetailLocatorID);return Object(n.useEffect)((()=>{!async function(){const a=await(null==o?void 0:o.getUrl({configId:e,locationId:t}));s(a)}()}),[o,e,t]),i}const Ia=({loading:e,locations:t,configId:a})=>{const[i,s]=Object(n.useState)(3);if(e&&!t)return r.a.createElement(y.EuiLoadingSpinner,null);const o=t.slice(0,i);return r.a.createElement(Pa,{gutterSize:"xs",wrap:!0,responsive:!1},o.map((e=>r.a.createElement(La,{key:e.id,grow:!1},r.a.createElement(ja,{configId:a,locationId:e.id,locationLabel:e.label,color:e.color})))),t.length>i&&r.a.createElement(y.EuiFlexItem,{key:t.length-i,grow:!1},r.a.createElement(y.EuiToolTip,{content:r.a.createElement(r.a.Fragment,null,t.slice(i,t.length).map((e=>r.a.createElement(y.EuiHealth,{color:e.color},e.label))))},r.a.createElement(y.EuiBadge,{color:"hollow",onClick:()=>{s(t.length)},onClickAriaLabel:_a},"+",t.length-i))),i>3&&r.a.createElement(Ra,{key:t.length-3,grow:!1},r.a.createElement(y.EuiToolTip,{content:Fa},r.a.createElement(y.EuiBadge,{color:"hollow",onClick:()=>{s(3)},onClickAriaLabel:Fa},"-",t.length-3))))},ja=({configId:e,locationId:t,locationLabel:a,color:n})=>{const i=Ca({configId:e,locationId:t});return r.a.createElement(y.EuiBadge,{iconType:()=>r.a.createElement(y.EuiIcon,{size:"m",type:"dot",color:n}),color:"hollow",href:null!=i?i:"/","aria-label":o.i18n.translate("xpack.synthetics.management.location.ariaLabel",{defaultMessage:"View details for {locationLabel} location",values:{locationLabel:a}})},a)},_a=o.i18n.translate("xpack.synthetics.management.monitorList.locations.expand",{defaultMessage:"Click to view remaining locations"}),Fa=o.i18n.translate("xpack.synthetics.management.monitorList.locations.collapse",{defaultMessage:"Click to collapse locations"});var Pa=G()(y.EuiFlexGroup)({maxWidth:450,overflow:"hidden"}),La=G()(y.EuiFlexItem)({overflow:"hidden",flexBasis:"fit-content"}),Ra=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-u9fwfd-0"})({overflow:"hidden"});const Da=({configId:e,monitorLocations:t})=>{const{locations:a,loading:n}=Ne({configId:e,monitorLocations:t});return r.a.createElement(Ia,{configId:e,locations:a,loading:n})};function Aa({monitor:e,ariaLabel:t,onClick:a,onKeyPress:n}){const i=r.a.createElement(za,{"data-is-clickable":!!a},r.a.createElement(y.EuiIcon,{size:"s",type:Na(e)})," ",function(e){var t,a;switch(e[Ge.c.FORM_MONITOR_TYPE]){case Ge.k.TCP:case Ge.k.HTTP:case Ge.k.ICMP:return null==e||null===(t=e.type)||void 0===t?void 0:t.toUpperCase();case Ge.k.SINGLE:return"Page";case Ge.k.MULTISTEP:return"Journey"}return(null==e?void 0:e.type)===Ge.q.BROWSER?"Journey":null==e||null===(a=e.type)||void 0===a?void 0:a.toUpperCase()}(e));return a?r.a.createElement("div",{title:t,"aria-label":t,onClick:a,onKeyPress:n},i):i}function Na(e){return"browser"===(null==e?void 0:e.type)?"videoPlayer":"online"}const za=Object(m.euiStyled)(y.EuiBadge)`
  ${({"data-is-clickable":e})=>e?"cursor: pointer;":""}
  &&& {
    .euiBadge__text {
      display: flex;
      align-items: center;
      gap: 4px;
    }
  }
`;function Ba(){const e=o.i18n.getLocale(),t=navigator.language;return Object(n.useEffect)((()=>{const a=null!=e?e:t;$.a.locale()!==a&&$.a.locale(a)}),[e,t]),e=>{if(!e)return"";const t=$()(e);return`${t.format("ll")} @ ${t.format("LTS")}`}}const Ha=({monitor:e,latestPing:t,loading:a,configId:n,hideEnabled:i=!1,hideLocations:s=!1,hasBorder:l=!0})=>{var c,d;const m=Object(u.useDispatch)();if(!e)return r.a.createElement(y.EuiSkeletonText,{lines:8});const p=null!==(c=null==t||null===(d=t.url)||void 0===d?void 0:d.full)&&void 0!==c?c:e[Ge.c.URLS];return r.a.createElement(Bt,{paddingSize:"m",margin:"none",title:Za,titleLeftAlign:!0,hasBorder:l},r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiDescriptionList,{type:"column",columnWidths:[2,3],compressed:!0,align:"left"},!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiDescriptionListTitle,null,Ja),r.a.createElement(y.EuiDescriptionListDescription,null,e&&r.a.createElement(Ta,{initialLoading:a,configId:n,monitor:e,reloadPage:()=>{m(q.p.get({monitorId:n}))}}))),r.a.createElement(y.EuiDescriptionListTitle,null,Ya),r.a.createElement(y.EuiDescriptionListDescription,{style:{wordBreak:"break-all"}},p?r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorDetailsPanelLink",href:p,external:!0},p):r.a.createElement(y.EuiText,{color:"subdued",size:"s"},rn)),r.a.createElement(y.EuiDescriptionListTitle,null,tn),r.a.createElement(y.EuiDescriptionListDescription,null,null!=t&&t.timestamp?r.a.createElement(qa,{timestamp:null==t?void 0:t.timestamp}):r.a.createElement(y.EuiText,{color:"subdued"},"--")),r.a.createElement(y.EuiDescriptionListTitle,null,en),r.a.createElement(y.EuiDescriptionListDescription,null,r.a.createElement(qa,{timestamp:e.updated_at})),e[Ge.c.PROJECT_ID]&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiDescriptionListTitle,null,an),r.a.createElement(y.EuiDescriptionListDescription,null,e[Ge.c.PROJECT_ID])),r.a.createElement(y.EuiDescriptionListTitle,null,nn),r.a.createElement(y.EuiDescriptionListDescription,null,e.id),r.a.createElement(y.EuiDescriptionListTitle,null,Qa),r.a.createElement(y.EuiDescriptionListDescription,null,r.a.createElement(Aa,{monitor:e})),r.a.createElement(y.EuiDescriptionListTitle,null,Wa),r.a.createElement(y.EuiDescriptionListDescription,null,(g=`${(f=e[Ge.c.SCHEDULE]).number} ${function(e,t){switch(e){case"s":return Ga(t);case"m":return Va(t);case"h":return $a(t);case"d":return Ua(t);default:return e}}(f.unit,parseInt(f.number,10))}`,o.i18n.translate("xpack.synthetics.monitorList.flyout.unitStr",{defaultMessage:"Every {unitMsg}",values:{unitMsg:g},description:'This displays a message like "Every 10 minutes" or "Every 30 seconds"'}))),!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiDescriptionListTitle,null,Ka),r.a.createElement(y.EuiDescriptionListDescription,null,r.a.createElement(Da,{configId:n,monitorLocations:e.locations}))),r.a.createElement(y.EuiDescriptionListTitle,null,Xa),r.a.createElement(y.EuiDescriptionListDescription,null,r.a.createElement(At,{tags:e[Ge.c.TAGS]}))));var f,g},Ga=e=>o.i18n.translate("xpack.synthetics.monitorDetail.seconds",{defaultMessage:"{n, plural, one {second} other {seconds}}",values:{n:e}}),Va=e=>o.i18n.translate("xpack.synthetics.monitorDetail.minutes",{defaultMessage:"{n, plural, one {minute} other {minutes}}",values:{n:e}}),$a=e=>o.i18n.translate("xpack.synthetics.monitorDetail.hours",{defaultMessage:"{n, plural, one {hour} other {hours}}",values:{n:e}}),Ua=e=>o.i18n.translate("xpack.synthetics.monitorDetail.days",{defaultMessage:"{n, plural, one {day} other {days}}",values:{n:e}}),qa=({timestamp:e})=>{const t=Ba()(e);return e?r.a.createElement("time",{dateTime:e},t):null},Wa=o.i18n.translate("xpack.synthetics.management.monitorList.frequency",{defaultMessage:"Frequency"}),Ka=o.i18n.translate("xpack.synthetics.management.monitorList.locations",{defaultMessage:"Locations"}),Ya=o.i18n.translate("xpack.synthetics.management.monitorList.url",{defaultMessage:"URL"}),Xa=o.i18n.translate("xpack.synthetics.management.monitorList.tags",{defaultMessage:"Tags"}),Ja=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails.enabled",{defaultMessage:"Enabled (all locations)"}),Qa=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails.monitorType",{defaultMessage:"Monitor type"}),Za=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDetails",{defaultMessage:"Monitor details"}),en=o.i18n.translate("xpack.synthetics.monitorList.lastModified",{defaultMessage:"Last modified"}),tn=o.i18n.translate("xpack.synthetics.monitorList.lastRunHeaderText",{defaultMessage:"Last run"}),an=o.i18n.translate("xpack.synthetics.monitorList.projectIdHeaderText",{defaultMessage:"Project ID"}),nn=o.i18n.translate("xpack.synthetics.monitorList.monitorIdItemText",{defaultMessage:"Monitor ID"}),rn=o.i18n.translate("xpack.synthetics.monitorList.unAvailable",{defaultMessage:"(unavailable)"});var sn=a(64),on=a(50),ln=a(32),cn=a(65),un=a(80);const dn=[cn.b.ENABLED,cn.b.ALERT_CONFIG],mn=(e,t=!1)=>{const a=(e=>{const t=e[cn.b.MONITOR_TYPE],a={},n=un.e[t];return Object.keys(n).map((t=>{var r,i;a[t]=null!==(r=null!==(i=Object(ln.get)(e,t.split(".")))&&void 0!==i?i:e[t])&&void 0!==r?r:n[t]})),a})(e),n=a[cn.b.TEXT_ASSERTION]?`\n          await page.getByText('${a[cn.b.TEXT_ASSERTION]}').first().waitFor();`:"",r=a[cn.b.SCHEDULE];r.number.endsWith("s")&&(a[cn.b.SCHEDULE]={number:`${r.number.slice(0,-1)}`,unit:"s"});const i={[cn.d.SINGLE]:{...a,[cn.b.SOURCE_INLINE]:`step('Go to ${a[cn.b.URLS]}', async () => {\n          await page.goto('${a[cn.b.URLS]}');${n}\n        });`,[cn.b.FORM_MONITOR_TYPE]:cn.d.SINGLE},[cn.d.MULTISTEP]:{...a,[cn.b.METADATA]:{script_source:{is_generated_script:"recorder"===Object(ln.get)(e,"source.inline.type"),file_name:Object(ln.get)(e,"source.inline.fileName")||""}},[cn.b.FORM_MONITOR_TYPE]:cn.d.MULTISTEP},[cn.d.HTTP]:{...a,[cn.b.METADATA]:{is_tls_enabled:e.isTLSEnabled},[cn.b.FORM_MONITOR_TYPE]:cn.d.HTTP},[cn.d.TCP]:{...a,[cn.b.METADATA]:{is_tls_enabled:e.isTLSEnabled},[cn.b.FORM_MONITOR_TYPE]:cn.d.TCP},[cn.d.ICMP]:{...a,[cn.b.FORM_MONITOR_TYPE]:cn.d.ICMP}}[e[cn.b.FORM_MONITOR_TYPE]];return t?Object(ln.pick)(i,dn):i};var pn=a(142);const fn=({canUsePublicLocations:e=!0,isServiceAllowed:t})=>{var a;const{formState:i,getValues:s,handleSubmit:o}=Object(sn.useFormContext)(),[l,c]=Object(n.useState)(!1),[u,d]=Object(n.useState)(),{data:m,loading:p,error:g}=Object(f.useFetcher)((()=>{if(null!=u&&u.id)return Object(pn.a)({monitor:u.monitor,id:u.id})}),[null==u?void 0:u.id,null==u?void 0:u.monitor]),{tooltipContent:h,isDisabled:b}=gn(i.isValid,l);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiToolTip,{key:h,content:h},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsRunTestBtn",color:"success",disabled:b||!e||!t,"aria-label":vn,iconType:"play",onClick:o((()=>{const e=s();e&&!Object.keys(i.errors).length&&(c(!0),d({id:Object(on.v4)(),name:e.name,monitor:mn(e)}))}))},yn)),u&&r.a.createElement(al,{serviceError:g,errors:null!==(a=null==m?void 0:m.errors)&&void 0!==a?a:[],isPushing:Boolean(p),testRun:u,name:u.name,inProgress:l,onClose:()=>{d(void 0),c(!1)},onDone:()=>{c(!1)}}))},gn=(e,t)=>{let a=e?hn:bn;return a=t?En:a,{tooltipContent:a,isDisabled:t||!e}},hn=o.i18n.translate("xpack.synthetics.testRun.description",{defaultMessage:"Test your monitor and verify the results before saving"}),bn=o.i18n.translate("xpack.synthetics.testRun.invalid",{defaultMessage:"Monitor has to be valid to run test, please fix above required fields."}),En=o.i18n.translate("xpack.synthetics.monitorList.testNow.scheduled",{defaultMessage:"Test is already scheduled"}),vn=o.i18n.translate("xpack.synthetics.monitorList.testNow.AriaLabel",{defaultMessage:"Click to run test now"}),yn=o.i18n.translate("xpack.synthetics.monitorList.runTest.label",{defaultMessage:"Run test"}),xn=e=>{var t,a,n;const{data:{monitors:r}}=Object(u.useSelector)(q.R),{isServiceAllowed:i}=je(),s=null==r?void 0:r.filter((t=>t.configId===e&&t.location.isServiceManaged)),o=null===(t=null===(a=Object(p.useKibana)().services)||void 0===a||null===(n=a.application)||void 0===n?void 0:n.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===t||t;return!(!i||s&&!o)};var Sn=a(78);function kn(){const e=Object(u.useDispatch)(),t=Object(u.useSelector)(q.P),a=Object(n.useCallback)((e=>{var a;return null===(a=t[e])||void 0===a?void 0:a.alertStatus}),[t]);return{updateAlertEnabledState:Object(n.useCallback)((({monitor:t,name:a,configId:n})=>{e(q.c.get({configId:n,monitor:t,success:{message:Object(Sn.b)(t[We.c.ALERT_CONFIG])?Mn(a):wn(a),lifetimeMs:3e3,testAttribute:"uptimeMonitorAlertUpdateSuccess"},error:{message:{title:Tn(a)},lifetimeMs:1e4,testAttribute:"uptimeMonitorAlertEnabledUpdateFailure"}}))}),[e]),alertStatus:a}}const Mn=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledSuccessLabel.alert",{defaultMessage:'Alerts are now enabled for the monitor "{name}".',values:{name:e}}),wn=e=>o.i18n.translate("xpack.synthetics.overview.actions.disabledSuccessLabel.alert",{defaultMessage:'Alerts are now disabled for the monitor "{name}".',values:{name:e}}),Tn=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledFailLabel.alert",{defaultMessage:'Unable to enable status alerts for monitor "{name}".',values:{name:e}});var On=a(87);const Cn=G.a.div.withConfig({displayName:"Container",componentId:"sc-qzppjg-0"})([""," border-radius:",";",""],(({position:e})=>"relative"===e?"\n  display: inline-block;\n  position: relative;\n  bottom: 42px;\n  left: 12px;\n  z-index: 1;\n":""),(({theme:e})=>e.eui.euiBorderRadius),(({boxShadow:e,position:t})=>"relative"===t?e:"")),In=G()(y.EuiPanel).withConfig({displayName:"CustomShadowPanel",componentId:"sc-qzppjg-1"})(["",""],(e=>e.shadow));function jn({children:e,hasPanel:t}){const a=Object(y.useEuiShadow)("s");return t?r.a.createElement(In,{color:"plain",element:"button",grow:!1,paddingSize:"none",hasShadow:!1,shadow:a},e):e}function _n({isPopoverOpen:e,isInspectView:t,setIsPopoverOpen:a,monitor:i,position:s,iconHasPanel:o=!0,iconSize:l="s",locationId:c}){const d=Object(y.useEuiShadow)("l"),m=Object(u.useDispatch)(),g=Ae(i),{http:h}=Object(p.useKibana)().services,b=Ca({configId:i.configId,locationId:null!=c?c:i.location.id}),E=function({configId:e,locators:t}){var a,r,i;const[s,o]=Object(n.useState)(void 0),l=null===(a=ut())||void 0===a||null===(r=a.share)||void 0===r?void 0:r.url.locators,c=null===(i=t||l)||void 0===i?void 0:i.get(Ye.syntheticsEditMonitorLocatorID);return Object(n.useEffect)((()=>{!async function(){const t=await(null==c?void 0:c.getUrl({configId:e}));o(t)}()}),[c,e]),s}({configId:i.configId}),v=Gt(),x=xn(i.configId),{isServiceAllowed:S}=je(),k=Object(n.useMemo)((()=>({enabledSuccessLabel:$n(i.name),disabledSuccessLabel:Un(i.name),failureLabel:qn(i.name)})),[i.name]),{status:M,isEnabled:w,updateMonitorEnabledState:T}=Ke({configId:i.configId,isEnabled:i.isEnabled,labels:k}),{alertStatus:O,updateAlertEnabledState:C}=kn(),[I,j]=Object(n.useState)(i.isEnabled?Hn:Bn),_=Object(u.useSelector)(Object(Lt.e)(i.configId));Object(n.useEffect)((()=>{M===f.FETCH_STATUS.LOADING?j(zn(i.isEnabled)):M===f.FETCH_STATUS.SUCCESS&&(j(w?Hn:Bn),e&&a(!1))}),[j,M,w,i.isEnabled,e,a]);const F={name:Fn,icon:"inspect",disabled:!g,onClick:()=>{g&&(m(Object(On.c)({configId:i.configId,location:g,id:i.id,locationId:i.location.id})),a(!1))}},P=O(i.configId)===f.FETCH_STATUS.LOADING;let L=[{name:Dn,icon:"sortRight",href:b,"data-test-subj":"actionsPopoverGoToMonitor"},F,{name:_?r.a.createElement(y.EuiToolTip,{content:En},r.a.createElement("span",null,Pn)):r.a.createElement(ia,{canUsePublicLocations:x},Pn),icon:"beaker",disabled:_||!x||!S,onClick:()=>{m(Lt.d.get({configId:i.configId,name:i.name})),m(Object(On.c)(null)),a(!1)}},{name:r.a.createElement(ia,{canEditSynthetics:v},An),icon:"pencil",disabled:!v||!S,href:E,"data-test-subj":"editMonitorLink"},{name:r.a.createElement(ia,{canEditSynthetics:v},Nn),icon:"copy",disabled:!v||!S,href:null==h?void 0:h.basePath.prepend(`synthetics/add-monitor?cloneId=${i.configId}`),"data-test-subj":"cloneMonitorLink"},{name:r.a.createElement(ia,{canEditSynthetics:v,canUsePublicLocations:x},I),icon:"invert",disabled:!v||!x,onClick:()=>{M!==f.FETCH_STATUS.LOADING&&T(!i.isEnabled)}},{name:r.a.createElement(ia,{canEditSynthetics:v,canUsePublicLocations:x},i.isStatusAlertEnabled?Gn:Vn),disabled:!v||!x||!S,icon:P?r.a.createElement(y.EuiLoadingSpinner,{size:"s"}):i.isStatusAlertEnabled?"bellSlash":"bell",onClick:()=>{P||C({monitor:{[Ge.c.ALERT_CONFIG]:Object(Sn.c)({status:{enabled:i.isStatusAlertEnabled}})},configId:i.configId,name:i.name})}}];return t&&(L=L.filter((e=>e!==F))),r.a.createElement(Cn,{boxShadow:d,position:s},r.a.createElement(y.EuiPopover,{button:r.a.createElement(jn,{hasPanel:o},r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsActionsPopoverButton","aria-label":Ln,iconType:"boxesHorizontal",color:"primary",size:l,display:"empty",onClick:()=>a((e=>!e)),title:Ln})),color:"lightestShade",isOpen:e,closePopover:()=>a(!1),anchorPosition:"rightUp",panelPaddingSize:"none"},r.a.createElement(y.EuiContextMenu,{initialPanelId:0,panels:[{id:"0",title:Rn,items:L}]})))}const Fn=o.i18n.translate("xpack.synthetics.overview.actions.quickInspect.title",{defaultMessage:"Quick inspect"}),Pn=o.i18n.translate("xpack.synthetics.overview.actions.runTestManually.title",{defaultMessage:"Run test manually"}),Ln=o.i18n.translate("xpack.synthetics.overview.actions.openPopover.ariaLabel",{defaultMessage:"Open actions menu"}),Rn=o.i18n.translate("xpack.synthetics.overview.actions.menu.title",{defaultMessage:"Actions",description:"This is the text in the heading of a menu containing a set of actions"}),Dn=o.i18n.translate("xpack.synthetics.overview.actions.goToMonitor.name",{defaultMessage:"Go to monitor",description:"This is the text for a menu item that will take the user to the monitor detail page"}),An=o.i18n.translate("xpack.synthetics.overview.actions.editMonitor.name",{defaultMessage:"Edit monitor",description:"This is the text for a menu item that will take the user to the monitor edit page"}),Nn=o.i18n.translate("xpack.synthetics.overview.actions.cloneMonitor.name",{defaultMessage:"Clone monitor"}),zn=e=>e?o.i18n.translate("xpack.synthetics.overview.actions.disablingLabel",{defaultMessage:"Disabling monitor"}):o.i18n.translate("xpack.synthetics.overview.actions.enablingLabel",{defaultMessage:"Enabling monitor"}),Bn=o.i18n.translate("xpack.synthetics.overview.actions.enableLabelEnableMonitor",{defaultMessage:"Enable monitor (all locations)"}),Hn=o.i18n.translate("xpack.synthetics.overview.actions.enableLabelDisableMonitor",{defaultMessage:"Disable monitor (all locations)"}),Gn=o.i18n.translate("xpack.synthetics.overview.actions.disableLabelDisableAlert",{defaultMessage:"Disable status alerts (all locations)"}),Vn=o.i18n.translate("xpack.synthetics.overview.actions.enableLabelDisableAlert",{defaultMessage:"Enable status alerts (all locations)"}),$n=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledSuccessLabel",{defaultMessage:'Monitor "{name}" enabled successfully',values:{name:e}}),Un=e=>o.i18n.translate("xpack.synthetics.overview.actions.disabledSuccessLabel",{defaultMessage:'Monitor "{name}" disabled successfully.',values:{name:e}}),qn=e=>o.i18n.translate("xpack.synthetics.overview.actions.enabledFailLabel",{defaultMessage:'Unable to update monitor "{name}".',values:{name:e}}),Wn=({status:e,isBrowserType:t})=>e&&"unknown"!==e?"up"===e?r.a.createElement(y.EuiBadge,{color:"success","data-test-subj":"monitorLatestStatusUp"},t?Qn:Zn):r.a.createElement(y.EuiBadge,{color:"danger","data-test-subj":"monitorLatestStatusDown"},t?Xn:er):r.a.createElement(y.EuiBadge,{color:"default","data-test-subj":"monitorLatestStatusPending"},Jn),Kn=({loading:e,monitor:t,status:a,compressed:n=!0})=>{const i="browser"===t.type,s=e&&!t;return r.a.createElement(y.EuiDescriptionList,{align:"left",compressed:n,listItems:[{title:Yn,description:s?r.a.createElement(y.EuiSkeletonText,{lines:1}):r.a.createElement(Wn,{status:a,isBrowserType:i})}]})},Yn=o.i18n.translate("xpack.synthetics.monitorStatus.statusLabel",{defaultMessage:"Status"}),Xn=o.i18n.translate("xpack.synthetics.monitorStatus.failedLabel",{defaultMessage:"Failed"}),Jn=o.i18n.translate("xpack.synthetics.monitorStatus.pendingLabel",{defaultMessage:"Pending"}),Qn=o.i18n.translate("xpack.synthetics.monitorStatus.succeededLabel",{defaultMessage:"Succeeded"}),Zn=o.i18n.translate("xpack.synthetics.monitorStatus.upLabel",{defaultMessage:"Up"}),er=o.i18n.translate("xpack.synthetics.monitorStatus.downLabel",{defaultMessage:"Down"}),tr=({monitorLocations:e,configId:t,selectedLocation:a,compressed:i,onChange:s,isDisabled:l})=>{const c=Object(y.useEuiTheme)(),{locations:u,loading:d}=Ne({configId:t,monitorLocations:e}),[m,p]=Object(n.useState)(!1),f=Object(n.useCallback)((()=>p(!0)),[]),g=Object(n.useCallback)((()=>p(!1)),[]),h=Object(n.useMemo)((()=>{if(!a||!e)return"";const t=1===e.length&&e[0].id!==(null==a?void 0:a.id);if(e.length>1||t){const e=r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsLocationListLink",onClick:f,disabled:l},a.label," ",l?null:r.a.createElement(y.EuiIcon,{type:"arrowDown"})),t=d&&!u?[r.a.createElement("span",{key:"loading"},"Loading...")]:u.map((e=>r.a.createElement(nr,{key:e.label,icon:r.a.createElement(y.EuiHealth,{color:e.color}),onClick:(null==a?void 0:a.id)!==e.id?()=>{g(),s(e.id,e.label)}:void 0,$_css:(null==a?void 0:a.id)===e.id?{textDecoration:"underline",backgroundColor:c.euiTheme.colors.lightShade,pointerEvents:"none"}:void 0},e.label))).filter((e=>void 0!==typeof e));return r.a.createElement(y.EuiPopover,{button:e,isOpen:m,closePopover:g,panelPaddingSize:"none"},r.a.createElement(y.EuiContextMenuPanel,{items:t,size:"s",title:o.i18n.translate("xpack.synthetics.monitorLocation.locationContextMenuTitleLabel",{defaultMessage:"Go to location"})}))}return a.label}),[g,l,m,d,u,e,s,f,a,c.euiTheme.colors.lightShade]);return a&&e?r.a.createElement(y.EuiDescriptionList,{compressed:i,listItems:[{title:ar,description:h}]}):a?r.a.createElement(y.EuiDescriptionList,{compressed:i,listItems:[{title:ar,description:null==a?void 0:a.label}]}):r.a.createElement(y.EuiDescriptionList,{compressed:i,listItems:[{title:ar,description:r.a.createElement(y.EuiSkeletonText,{lines:1})}]})},ar=o.i18n.translate("xpack.synthetics.monitorLocation.locationLabel",{defaultMessage:"Location"});var nr=G()(y.EuiContextMenuItem).withConfig({displayName:"_StyledEuiContextMenuItem",componentId:"sc-qn8fj2-0"})(["",""],(e=>e.$_css)),rr=a(144);const ir="now-12h",sr="now",or="now-24h",lr="now-12h";function cr({id:e,location:t,currentDurationChartFrom:a,currentDurationChartTo:n,previousDurationChartFrom:i,previousDurationChartTo:s}){var o,l;const c=Object(f.useTheme)(),{exploratoryView:{ExploratoryViewEmbeddable:u}}=Object(p.useKibana)().services;return r.a.createElement(y.EuiPageSection,{bottomBorder:"extended"},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,pr)),r.a.createElement(u,{customHeight:"200px",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!0,legendPosition:"bottom",attributes:[{seriesType:"area",color:null==c||null===(o=c.eui)||void 0===o?void 0:o.euiColorVis1,time:{from:null!=a?a:ir,to:null!=n?n:sr},reportDefinitions:{"monitor.id":[e],"observer.geo.name":[t]},filters:[{field:"observer.geo.name",values:[t]}],dataType:"synthetics",selectedMetricField:"monitor.duration.us",name:fr,operationType:"average"},{seriesType:"line",color:null==c||null===(l=c.eui)||void 0===l?void 0:l.euiColorVis7,time:{from:null!=i?i:or,to:null!=s?s:lr},reportDefinitions:{"monitor.id":[e],"observer.geo.name":[t]},filters:[{field:"observer.geo.name",values:[t]}],dataType:"synthetics",selectedMetricField:"monitor.duration.us",name:gr,operationType:"average"}]}))}function ur({locations:e,currentLocation:t,configId:a,setCurrentLocation:i,monitor:s,onEnabledChange:o}){var l;const c=null===(l=e.find((e=>e.label===t)))||void 0===l?void 0:l.status,{locations:d}=Object(u.useSelector)(q.X),m=d.find((e=>e.label===t));return r.a.createElement(y.EuiFlexGroup,{wrap:!0,responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Kn,{status:c,monitor:s})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(tr,{compressed:!0,monitorLocations:s.locations,configId:a,selectedLocation:m,onChange:Object(n.useCallback)(((e,a)=>{t!==a&&i(a,e)}),[t,i])})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiDescriptionList,{align:"left",compressed:!0},r.a.createElement(y.EuiDescriptionListTitle,null,hr),r.a.createElement(y.EuiDescriptionListDescription,null,r.a.createElement(Ta,{configId:a,monitor:s,reloadPage:o})))))}function dr(){return r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"100%"}},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiLoadingSpinner,{size:"xl"})))}function mr(e){const{id:t,configId:a,onLocationChange:i,locationId:s}=e,{data:{monitors:o}}=Object(u.useSelector)(q.R),l=Object(n.useMemo)((()=>{const e=o.filter((({id:e})=>e===t))[0];if(e)return e}),[t,o]),d=Object(n.useCallback)(((e,n)=>i({id:t,configId:a,location:e,locationId:n})),[t,a,i]),m=Ca({configId:a,locationId:s}),p=Object(u.useDispatch)();Object(n.useEffect)((()=>()=>{p(Object(q.fb)(null))}),[p]);const g=Object(u.useSelector)(Object(q.O)(a)),h="success"===(null==g?void 0:g.status),{data:E,error:v,status:x,loading:S}=Object(f.useFetcher)((()=>Object(rr.c)({monitorId:a})),[a,h]),[k,M]=Object(n.useState)(!1),w=((e,t)=>{const a={index:c.A,body:{size:1,query:{bool:{filter:[{term:{config_id:e}},{term:{"observer.geo.name":t}},{exists:{field:"summary"}}]}},sort:[{"@timestamp":"desc"}]}},{data:n,loading:r}=Object(f.useEsSearch)(a,[e,t],{name:"getMonitorStatusByLocation"});return n&&1===n.hits.hits.length?{data:{...n.hits.hits[0]._source,timestamp:n.hits.hits[0]._source["@timestamp"]},loading:r}:{data:void 0,loading:r}})(a,e.location),{locations:T}=Ne({configId:a,monitorLocations:null==E?void 0:E.locations}),O=Object(y.useIsWithinMaxBreakpoint)("xl");return r.a.createElement(y.EuiFlyout,{size:"600px",type:O?"overlay":"push",onClose:e.onClose,paddingSize:"none"},x===f.FETCH_STATUS.FAILURE&&r.a.createElement(y.EuiErrorBoundary,null,null==v?void 0:v.message),x===f.FETCH_STATUS.LOADING&&r.a.createElement(dr,null),x===f.FETCH_STATUS.SUCCESS&&E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(y.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l"},r.a.createElement(y.EuiFlexGroup,{responsive:!1,gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"s"},r.a.createElement("h2",null,null==E?void 0:E[We.c.NAME]))),r.a.createElement(y.EuiFlexItem,{grow:!1},l&&r.a.createElement(_n,{isPopoverOpen:k,isInspectView:!0,monitor:l,setIsPopoverOpen:M,position:"default",iconHasPanel:!1,iconSize:"xs",locationId:s}))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(ur,{currentLocation:e.location,locations:T,setCurrentLocation:d,configId:a,monitor:E,onEnabledChange:e.onEnabledChange}))),r.a.createElement(y.EuiFlyoutBody,null,r.a.createElement(cr,b()({},e,{location:e.location})),r.a.createElement(Ha,{hasBorder:!1,hideEnabled:!0,latestPing:w.data,configId:a,monitor:{...E,id:t},loading:Boolean(S)})),r.a.createElement(y.EuiFlyoutFooter,null,r.a.createElement(y.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"l",color:"transparent"},r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsMonitorDetailFlyoutButton",onClick:e.onClose},br)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsMonitorDetailFlyoutButton",isDisabled:!m,href:m,iconType:"sortRight",iconSide:"right",fill:!0},Er)))))))}const pr=o.i18n.translate("xpack.synthetics.monitorList.durationHeaderText",{defaultMessage:"Duration"}),fr=o.i18n.translate("xpack.synthetics.monitorList.durationChart.durationSeriesName",{defaultMessage:"Duration"}),gr=o.i18n.translate("xpack.synthetics.monitorList.durationChart.previousPeriodSeriesName",{defaultMessage:"Previous period"}),hr=o.i18n.translate("xpack.synthetics.monitorList.enabledItemText",{defaultMessage:"Enabled (all locations)"}),br=o.i18n.translate("xpack.synthetics.monitorList.closeFlyoutText",{defaultMessage:"Close"}),Er=o.i18n.translate("xpack.synthetics.monitorList.goToMonitorLinkText",{defaultMessage:"Go to monitor"});function vr({testRunId:e,serviceError:t,errors:a,locations:r}){var i;const[s,o]=Object(n.useState)([]),[l,c]=Object(n.useState)(null);Object(n.useEffect)((()=>{o([]),c(null)}),[e]),Object(n.useEffect)((()=>{(s.length||a.length)&&o(a)}),[a]),Object(n.useEffect)((()=>{(null==l?void 0:l.message)!==(null==t?void 0:t.message)&&c(t)}),[t]);const u=Object(n.useMemo)((()=>r.reduce(((e,t)=>({...e,[t.id]:t})),{})),[r]),d=r.length-(null!=s?s:[]).filter((({locationId:e})=>!!e)).length,m=Object(n.useMemo)((()=>(null!=s?s:[]).map((({error:e})=>null==e?void 0:e.reason)).filter((e=>!!e)).filter(((e,t,a)=>a.indexOf(e)===t))),[s]),p=!!l||(null==s?void 0:s.length)&&(null==s?void 0:s.length)===r.length,f=Object(n.useMemo)((()=>{var e;return p?1===m.length?[{name:"Error",message:null!==(e=m[0])&&void 0!==e?e:Sr,title:yr}]:[{name:"Error",message:Sr,title:yr}]:(null==s?void 0:s.length)>0?s.map((({locationId:e,error:t})=>({location:u[e],error:t}))).filter((e=>!!e.location)).map((({location:e,error:t})=>{var a;return{name:"Error",message:xr(e.label,null!==(a=null==t?void 0:t.reason)&&void 0!==a?a:""),title:yr}})):[]}),[u,s,m,p]);return{expectPings:d,hasBlockingError:p,blockingErrorTitle:p?yr:null,blockingErrorMessage:p?`${null===(i=f[0])||void 0===i?void 0:i.message}`:null,errorMessages:f}}const yr=o.i18n.translate("xpack.synthetics.testRun.runErrorLabel",{defaultMessage:"Can't run the test now"}),xr=(e,t)=>o.i18n.translate("xpack.synthetics.testRun.runErrorLocation.reason",{defaultMessage:"Failed to run test on location {locationName}. {reason}",values:{locationName:e,reason:t}}),Sr=o.i18n.translate("xpack.synthetics.testRun.pushError",{defaultMessage:"This test cannot be executed at this time. Try again later."});var kr=a(83);function Mr(e){const[t,a]=Object(n.useState)(Date.now()),[r]=Object(n.useState)((()=>setInterval((()=>{a(Date.now())}),null!=e?e:5e3))),i=Object(n.useCallback)((()=>{clearInterval(r)}),[r]);return Object(n.useEffect)((()=>()=>{i()}),[i]),{refreshTimer:r,lastRefresh:t,clearTicks:i}}const wr=({stepsList:e,step:t,loading:a})=>{var i;let s=[{id:"code",name:Tr},{id:"console",name:Cr}];const o="failed"===(null==t||null===(i=t.synthetics.step)||void 0===i?void 0:i.status);o&&(s=[{id:"stackTrace",name:Or},...s]);const[l,c]=Object(n.useState)("code");Object(n.useEffect)((()=>{c(o?"stackTrace":"code")}),[o]);const u=Object(n.useCallback)((t=>null==e?void 0:e.filter((e=>{var a,n,r;return"journey/browserconsole"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)&&(null===(n=e.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.index)===t})).map((e=>{var t,a;return null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.text}))),[e]);return a||0!==(null==e?void 0:e.length)?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiTabs,{size:"s"},s.map(((e,t)=>r.a.createElement(y.EuiTab,{key:t,onClick:()=>{return t=e.id,void c(t);var t},isSelected:e.id===l},e.name)))),(()=>{var e,n,i,s,o,c,d;if(a)return r.a.createElement(y.EuiSkeletonText,null);switch(l){case"code":return r.a.createElement(y.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null==t||null===(e=t.synthetics)||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.source);case"console":return r.a.createElement(y.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null===(i=u(1))||void 0===i?void 0:i.join("\n"));case"stackTrace":return r.a.createElement(y.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"html"},null==t||null===(s=t.synthetics)||void 0===s||null===(o=s.error)||void 0===o?void 0:o.stack);default:return r.a.createElement(y.EuiCodeBlock,{isCopyable:!0,overflowHeight:"200px",language:"javascript"},null==t||null===(c=t.synthetics)||void 0===c||null===(d=c.payload)||void 0===d?void 0:d.source)}})()):null},Tr=o.i18n.translate("xpack.synthetics.testDetails.codeExecuted",{defaultMessage:"Code executed"}),Or=o.i18n.translate("xpack.synthetics.testDetails.stackTrace",{defaultMessage:"Stacktrace"}),Cr=o.i18n.translate("xpack.synthetics.testDetails.console",{defaultMessage:"Console"}),Ir=(e,t,a)=>{var r,i;const{stepIndex:s,checkGroupId:o}=Object(R.useParams)(),l=null!=a?a:s,c=null!=e?e:o,d=Object(u.useSelector)(Object(q.D)(c)),m=Object(u.useSelector)(Object(q.E)(c)),p=Object(u.useDispatch)();Object(n.useEffect)((()=>{c&&p(q.g.get({checkGroup:c}))}),[c,p,t]);const f=(null!==(r=null==d?void 0:d.steps)&&void 0!==r?r:[]).filter(Rs),g=null==d?void 0:d.steps.find((e=>{var t,a;return"failed"===(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.status)})),h=f.map((e=>{var t,a,n;return null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name)&&void 0!==t?t:""})),b=l?f.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===Number(l)})):void 0;return{data:d,loading:null!=m&&m,stepEnds:f,stepLabels:h,currentStep:b,failedStep:g,isFailedStep:(null==g||null===(i=g.synthetics)||void 0===i?void 0:i.step)&&g.synthetics.step.index===Number(l),isFailed:!1}};let jr=function(e){return e.Blocked="blocked",e.Dns="dns",e.Connect="connect",e.Ssl="ssl",e.Send="send",e.Wait="wait",e.Receive="receive",e}({}),_r=function(e){return e.Status="status",e.ResourceSize="resourceSize",e.TransferSize="transferSize",e.CertificateIssuer="certificateIssuer",e.CertificateIssueDate="certificateIssueDate",e.CertificateExpiryDate="certificateExpiryDate",e.CertificateSubject="certificateSubject",e.IP="ip",e.MimeType="mimeType",e.RequestStart="requestStart",e}({});const Fr={[jr.Blocked]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.blocked",{defaultMessage:"Queued / Blocked"}),[jr.Dns]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.dns",{defaultMessage:"DNS"}),[jr.Connect]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.connect",{defaultMessage:"Connecting"}),[jr.Ssl]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.ssl",{defaultMessage:"TLS"}),[jr.Send]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.send",{defaultMessage:"Sending request"}),[jr.Wait]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.wait",{defaultMessage:"Waiting (TTFB)"}),[jr.Receive]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.receive",{defaultMessage:"Content downloading"})},Pr={[_r.Status]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.status",{defaultMessage:"Status"}),[_r.MimeType]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.contentType",{defaultMessage:"Content type"}),[_r.RequestStart]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.requestStart",{defaultMessage:"Request start"}),[_r.ResourceSize]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.resourceSize",{defaultMessage:"Resource size"}),[_r.TransferSize]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.transferSize",{defaultMessage:"Transfer size"}),[_r.CertificateIssuer]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssuer",{defaultMessage:"Issuer"}),[_r.CertificateIssueDate]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssueDate",{defaultMessage:"Valid from"}),[_r.CertificateExpiryDate]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateExpiryDate",{defaultMessage:"Valid until"}),[_r.CertificateSubject]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateSubject",{defaultMessage:"Common name"}),[_r.IP]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.ip",{defaultMessage:"IP"})},Lr=[jr.Blocked,jr.Dns,jr.Connect,jr.Ssl,jr.Send,jr.Wait,jr.Receive];_r.MimeType,jr.Dns,jr.Connect,jr.Ssl,jr.Wait,jr.Receive;let Rr=function(e){return e.Html="html",e.Script="script",e.Stylesheet="stylesheet",e.Media="media",e.Image="image",e.Font="font",e.XHR="xhr",e.Other="other",e}({});const Dr={[Rr.Html]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.html",{defaultMessage:"HTML"}),[Rr.Script]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.script",{defaultMessage:"JS"}),[Rr.Stylesheet]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.stylesheet",{defaultMessage:"CSS"}),[Rr.Image]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.image",{defaultMessage:"Image"}),[Rr.Media]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.media",{defaultMessage:"Media"}),[Rr.Font]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.font",{defaultMessage:"Font"}),[Rr.XHR]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.xhr",{defaultMessage:"XHR"}),[Rr.Other]:o.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.other",{defaultMessage:"Other"})},Ar={"text/html":Rr.Html,"application/javascript":Rr.Script,"application/x-javascript":Rr.Script,"text/javascript":Rr.Script,"text/css":Rr.Stylesheet,"image/apng":Rr.Image,"image/bmp":Rr.Image,"image/gif":Rr.Image,"image/x-icon":Rr.Image,"image/jpeg":Rr.Image,"image/png":Rr.Image,"image/svg+xml":Rr.Image,"image/tiff":Rr.Image,"image/webp":Rr.Image,"audio/wave":Rr.Media,"audio/wav":Rr.Media,"audio/x-wav":Rr.Media,"audio/x-pn-wav":Rr.Media,"audio/webm":Rr.Media,"video/webm":Rr.Media,"video/mp4":Rr.Media,"audio/ogg":Rr.Media,"video/ogg":Rr.Media,"application/ogg":Rr.Media,"font/otf":Rr.Font,"font/ttf":Rr.Font,"font/woff":Rr.Font,"font/woff2":Rr.Font,"application/x-font-opentype":Rr.Font,"application/font-woff":Rr.Font,"application/font-woff2":Rr.Font,"application/vnd.ms-fontobject":Rr.Font,"application/font-sfnt":Rr.Font,"application/json":Rr.XHR},Nr=[{label:Dr[Rr.Html],mimeType:Rr.Html},{label:Dr[Rr.Stylesheet],mimeType:Rr.Stylesheet},{label:Dr[Rr.Font],mimeType:Rr.Font},{label:Dr[Rr.Script],mimeType:Rr.Script},{label:Dr[Rr.Image],mimeType:Rr.Image},{label:Dr[Rr.Media],mimeType:Rr.Media},{label:Dr[Rr.XHR],mimeType:Rr.XHR},{label:Dr[Rr.Other],mimeType:Rr.Other}],zr=({networkEvents:e})=>e,Br=()=>{var e,t;const{checkGroupId:a,stepIndex:n}=Object(R.useParams)(),{mimeData:r}=(()=>{var e,t,a,n,r,i,s;const{monitorId:o,stepIndex:l,checkGroupId:u}=Object(R.useParams)(),{data:d}=Ir(),m=null==d||null===(e=d.details)||void 0===e?void 0:e.timestamp,{data:p}=Pe({index:c.A,body:{track_total_hits:!1,sort:[{"@timestamp":{order:"desc"}}],size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"long"}},query:{bool:{filter:[{range:{"@timestamp":{lte:null!=m?m:"now",gte:$()(m).subtract(1,"day").toISOString()}}},{term:{config_id:o}},{term:{"synthetics.type":"journey/network_info"}},{term:{"synthetics.step.index":l}},{range:{"@timestamp":{gte:"now-24h/h",lte:"now"}}}],must_not:[{term:{"monitor.check_group":{value:u}}}]}},aggs:{testRuns:{cardinality:{field:"monitor.check_group"}},objectCounts:{terms:{field:"http.response.mime_type",size:500},aggs:{weight:{sum:{field:"synthetics.payload.transfer_size"}}}}}}},[l,o,u],{name:`previousObjectMetrics/${o}/${u}/${l}/`,isRequestReady:!!m}),f={},g=null!==(t=null==p||null===(a=p.aggregations)||void 0===a||null===(n=a.testRuns)||void 0===n?void 0:n.value)&&void 0!==t?t:0;return null==p||null===(r=p.aggregations)||void 0===r||null===(i=r.objectCounts)||void 0===i||null===(s=i.buckets)||void 0===s||s.forEach((e=>{f[e.key]={weight:e.weight.value?e.weight.value/g:0,count:e.doc_count/g}})),{mimeData:f}})(),i=null===(e=Object(u.useSelector)(zr)[null!=a?a:""])||void 0===e?void 0:e[Number(n)],s={},o={};null==i||i.events.forEach((e=>{if(e.mimeType){var t;const a=null!==(t=Ar[e.mimeType])&&void 0!==t?t:Rr.Other;s[a]?s[a].value++:s[a]={value:1,prevValue:0},o[a]?o[a].value+=e.transferSize||0:o[a]={value:e.transferSize||0,prevValue:0}}}));const l=Object.values(s).reduce(((e,t)=>e+t.value),0),d=Object.values(o).reduce(((e,t)=>e+t.value),0);return Object.keys(r).forEach((e=>{var t;const a=null!==(t=Ar[e])&&void 0!==t?t:Rr.Other;s[a]&&(s[a].prevValue+=r[e].count),o[a]&&(o[a].prevValue+=r[e].weight)})),{loading:null===(t=null==i?void 0:i.loading)||void 0===t||t,totalObjects:l,totalObjectsWeight:Vr(d),items:Nr.map((({label:e,mimeType:t})=>{var a,n,r,i,c,u,m,p,f,g,h,b,E,v;return{label:e,mimeType:t,total:l,count:null!==(a=null==s||null===(n=s[t])||void 0===n?void 0:n.value)&&void 0!==a?a:0,percent:(null!==(r=null==s||null===(i=s[t])||void 0===i?void 0:i.value)&&void 0!==r?r:0)/l*100,weight:Vr(null!==(c=null===(u=o[t])||void 0===u?void 0:u.value)&&void 0!==c?c:0),weightPercent:(null!==(m=null===(p=o[t])||void 0===p?void 0:p.value)&&void 0!==m?m:0)/d*100,countDelta:Gr(null!==(f=null==s||null===(g=s[t])||void 0===g?void 0:g.value)&&void 0!==f?f:0,null!==(h=null==s||null===(b=s[t])||void 0===b?void 0:b.prevValue)&&void 0!==h?h:0),weightDelta:Hr(null==o||null===(E=o[t])||void 0===E?void 0:E.value,null==o||null===(v=o[t])||void 0===v?void 0:v.prevValue)}}))}},Hr=(e,t)=>0!==t&&t?((e-t)/t*100).toFixed(0):0,Gr=(e,t)=>0===t?0:((e-t)/t*100).toFixed(0),Vr=(e,t=0)=>{if(0===e)return"0 Bytes";const a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},$r=({description:e,helpText:t,loading:a,current:n,previous:i,previousFormatted:s,currentFormatted:l,asStat:c=!1})=>{if(a)return r.a.createElement(y.EuiSkeletonText,{lines:1});const u=((e,t)=>0===t||null==t?0:Number(((e-t)/t*100).toFixed(0)))(n,i),d=()=>Math.abs(u)<5?"default":u>5?"danger":"success",m=Math.abs(u)>0,p=null===i?r.a.createElement(y.EuiIcon,{type:"minus",size:c?"l":"m",color:"subdued"}):r.a.createElement(y.EuiToolTip,{content:o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip",{defaultMessage:"Value is {deltaLabel} compared to previous steps in last 24 hours.",values:{deltaLabel:0===Math.abs(u)?o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip.noChange",{defaultMessage:"same"}):u>0?o.i18n.translate("xpack.synthetics.stepDetails.palette.increased",{defaultMessage:"{delta}% higher",values:{delta:u}}):o.i18n.translate("xpack.synthetics.stepDetails.palette.decreased",{defaultMessage:"{delta}% lower",values:{delta:Math.abs(u)}})}}),title:o.i18n.translate("xpack.synthetics.stepDetails.palette.previous",{defaultMessage:"Median(24h): {previous}",values:{previous:s}})},m?r.a.createElement(y.EuiIcon,{type:u>0?"sortUp":"sortDown",size:c?"l":"m",color:d()}):r.a.createElement(y.EuiIcon,{type:"minus",size:c?"l":"m",color:"subdued"}));return c?r.a.createElement(y.EuiStat,{titleSize:"s",titleColor:d(),description:r.a.createElement("span",null,e," ",t&&r.a.createElement(y.EuiIconTip,{content:t,position:"right"})),title:r.a.createElement(r.a.Fragment,null,l,r.a.createElement("span",{style:{marginLeft:5}},p)),reverse:!0}):r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexEnd",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{color:d()},r.a.createElement("strong",null,l))),r.a.createElement(y.EuiFlexItem,{grow:!1},p))},Ur=o.i18n.translate("xpack.synthetics.coreVitals.lcp.help",{defaultMessage:"Largest contentful paint measures loading performance. To provide a good user experience, LCP should occur within 2.5 seconds of when the page first starts loading."}),qr=o.i18n.translate("xpack.synthetics.coreVitals.cls.help",{defaultMessage:"Cumulative Layout Shift (CLS): measures visual stability. To provide a good user experience, pages should maintain a CLS of less than 0.1."}),Wr=o.i18n.translate("xpack.synthetics.coreVitals.fcpTooltip",{defaultMessage:"First contentful paint (FCP) focuses on the initial rendering and measures the time from when the page starts loading to when any part of the pages content is displayed on the screen."}),Kr=o.i18n.translate("xpack.synthetics.coreVitals.dclTooltip",{defaultMessage:"Triggered when the browser completes parsing the document. Helpful when there are multiple listeners, or logic is executed: domContentLoadedEventEnd - domContentLoadedEventStart."}),Yr=o.i18n.translate("xpack.synthetics.fieldLabels.transferSize",{defaultMessage:"The transferSize property represents the size of the fetched resource. The size includes the response header fields plus the response payload body"}),Xr=o.i18n.translate("xpack.synthetics.fieldLabels.lcp",{defaultMessage:"Largest contentful paint (LCP)"}),Jr=o.i18n.translate("xpack.synthetics.fieldLabels.fcp",{defaultMessage:"First contentful paint (FCP)"}),Qr=o.i18n.translate("xpack.synthetics.fieldLabels.cls",{defaultMessage:"Cumulative layout shift (CLS)"}),Zr=o.i18n.translate("xpack.synthetics.fieldLabels.dcl",{defaultMessage:"DOMContentLoaded event (DCL)"}),ei=[{title:Jr,description:Wr},{title:Xr,description:Ur},{title:Qr,description:qr},{title:Zr,description:Kr}],ti=()=>{const[e,t]=Object(n.useState)(!1);return r.a.createElement(y.EuiPopover,{button:r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsDefinitionsPopoverButton",iconType:"list",iconSide:"right",onClick:()=>t((e=>!e))},ai),isOpen:e,closePopover:()=>t(!1),anchorPosition:"rightCenter"},r.a.createElement(y.EuiPopoverTitle,null,ai),r.a.createElement("div",{style:{width:"350px"}},r.a.createElement(y.EuiDescriptionList,{listItems:ei})))},ai=o.i18n.translate("xpack.synthetics.stepDetailsRoute.definition",{defaultMessage:"Definitions"});var ni=a(37);const ri=(e,t)=>[{term:{"monitor.check_group":e}},{term:{"synthetics.step.index":t}}],ii=(e,t)=>{var a,n,r,i,s,o,l;const u=Object(R.useParams)(),d=null!=e?e:u.checkGroupId,m=null!=t?t:Number(u.stepIndex),p=ni.NETWORK_TIMINGS_FIELDS.reduce(((e,t)=>({...e,[t]:{type:"double"}})),{}),{data:f}=Pe({index:c.A,body:{size:0,runtime_mappings:p,query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},...ri(d,m)]}},aggs:{dns:{sum:{field:ni.SYNTHETICS_DNS_TIMINGS}},tls:{sum:{field:ni.SYNTHETICS_SSL_TIMINGS}},blocked:{sum:{field:ni.SYNTHETICS_BLOCKED_TIMINGS}},connect:{sum:{field:ni.SYNTHETICS_CONNECT_TIMINGS}},receive:{sum:{field:ni.SYNTHETICS_RECEIVE_TIMINGS}},send:{sum:{field:ni.SYNTHETICS_SEND_TIMINGS}},wait:{sum:{field:ni.SYNTHETICS_WAIT_TIMINGS}},total:{sum:{field:ni.SYNTHETICS_TOTAL_TIMINGS}}}}},[],{name:`stepNetworkTimingsMetrics/${d}/${m}`}),g=null==f?void 0:f.aggregations,h={dns:null!==(a=null==g?void 0:g.dns.value)&&void 0!==a?a:0,connect:null!==(n=null==g?void 0:g.connect.value)&&void 0!==n?n:0,receive:null!==(r=null==g?void 0:g.receive.value)&&void 0!==r?r:0,send:null!==(i=null==g?void 0:g.send.value)&&void 0!==i?i:0,wait:null!==(s=null==g?void 0:g.wait.value)&&void 0!==s?s:0,blocked:null!==(o=null==g?void 0:g.blocked.value)&&void 0!==o?o:0,tls:null!==(l=null==g?void 0:g.tls.value)&&void 0!==l?l:0};return{timings:h,timingsWithLabels:si(h)}},si=e=>[{value:e.blocked,label:di},{value:e.dns,label:li},{value:e.connect,label:oi},{value:e.tls,label:ui},{value:e.wait,label:ci},{value:e.receive,label:pi},{value:e.send,label:mi}],oi=o.i18n.translate("xpack.synthetics.connect.label",{defaultMessage:"Connect"}),li=o.i18n.translate("xpack.synthetics.dns",{defaultMessage:"DNS"}),ci=o.i18n.translate("xpack.synthetics.wait",{defaultMessage:"Wait"}),ui=o.i18n.translate("xpack.synthetics.tls",{defaultMessage:"TLS"}),di=o.i18n.translate("xpack.synthetics.blocked",{defaultMessage:"Blocked"}),mi=o.i18n.translate("xpack.synthetics.send",{defaultMessage:"Send"}),pi=o.i18n.translate("xpack.synthetics.receive",{defaultMessage:"Receive"}),fi=(e,t,a)=>{const n=Object(R.useParams)(),r=n.monitorId,i=null!=a?a:n.checkGroupId,s=null!=e?e:Number(n.stepIndex),{currentStep:o}=Ir(),l=null!=t?t:null==o?void 0:o["@timestamp"],u=ni.NETWORK_TIMINGS_FIELDS.reduce(((e,t)=>({...e,[t]:{type:"double"}})),{}),{data:d,loading:m}=Pe({index:c.A,body:{size:0,runtime_mappings:u,query:{bool:{filter:[{range:{"@timestamp":{lte:$()(l).toISOString(),gte:$()(l).subtract(24,"hours").toISOString()}}},{term:{"synthetics.type":"journey/network_info"}},{term:{"synthetics.step.index":s}},{term:{config_id:r}}],must_not:[{term:{"monitor.check_group":i}}]}},aggs:{testRuns:{terms:{field:"monitor.check_group",size:1e4},aggs:{dns:{sum:{field:ni.SYNTHETICS_DNS_TIMINGS}},ssl:{sum:{field:ni.SYNTHETICS_SSL_TIMINGS}},blocked:{sum:{field:ni.SYNTHETICS_BLOCKED_TIMINGS}},connect:{sum:{field:ni.SYNTHETICS_CONNECT_TIMINGS}},receive:{sum:{field:ni.SYNTHETICS_RECEIVE_TIMINGS}},send:{sum:{field:ni.SYNTHETICS_SEND_TIMINGS}},wait:{sum:{field:ni.SYNTHETICS_WAIT_TIMINGS}},total:{sum:{field:ni.SYNTHETICS_TOTAL_TIMINGS}}}}}}},[],{name:`stepNetworkPreviousTimings/${r}/${i}/${s}`,isRequestReady:Boolean(l)}),p=null==d?void 0:d.aggregations,f=[],g=[],h=[],b=[],E=[],v=[],y=[];null==p||p.testRuns.buckets.forEach((e=>{var t,a,n,r,i,s,o;f.push(null!==(t=e.dns.value)&&void 0!==t?t:0),g.push(null!==(a=e.connect.value)&&void 0!==a?a:0),h.push(null!==(n=e.receive.value)&&void 0!==n?n:0),b.push(null!==(r=e.send.value)&&void 0!==r?r:0),E.push(null!==(i=e.wait.value)&&void 0!==i?i:0),v.push(null!==(s=e.blocked.value)&&void 0!==s?s:0),y.push(null!==(o=e.ssl.value)&&void 0!==o?o:0)}));const x={dns:gi(f),connect:gi(g),receive:gi(h),send:gi(b),wait:gi(E),blocked:gi(v),ssl:gi(y)};return{loading:m&&!d,timings:x,timingsWithLabels:si(x)}},gi=e=>{if(!e.length)return 0;const t=[...e].sort(((e,t)=>e-t)),a=Math.floor(t.length/2);return t.length%2==0?(t[a-1]+t[a])/2:t[a]},hi=(o.i18n.translate("xpack.synthetics.contentSize",{defaultMessage:"Content Size"}),e=>{var t,a,n,r;const i=Object(R.useParams)(),s=i.monitorId,o=null!==(t=null==e?void 0:e.monitor.check_group)&&void 0!==t?t:i.checkGroupId,l=null!==(a=null==e||null===(n=e.synthetics.step)||void 0===n?void 0:n.index)&&void 0!==a?a:i.stepIndex,{data:u,loading:d}=Pe({index:c.A,body:{size:0,query:{bool:{filter:[{terms:{"synthetics.type":["step/metrics","step/end"]}},{term:{"synthetics.step.index":Number(l)}},{term:{config_id:s}},{range:{"@timestamp":{lte:"now",gte:"now-24h/h"}}}]}},aggs:{testRuns:{terms:{field:"monitor.check_group",size:1e4},aggs:{fcp:{sum:{field:"browser.experience.fcp.us"}},lcp:{sum:{field:"browser.experience.lcp.us"}},cls:{sum:{field:"browser.experience.cls"}},dcl:{sum:{field:"browser.experience.dcl.us"}},stepDuration:{sum:{field:"synthetics.step.duration.us"}}}}}}},[],{name:`previousStepMetrics/${s}/${o}/${l}`}),{data:m}=Pe({index:c.A,body:{size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"double"},"synthetics.payload.resource_size":{type:"double"}},query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},{term:{"synthetics.step.index":Number(l)}},{term:{config_id:s}},{range:{"@timestamp":{lte:"now",gte:"now-24h/h"}}}]}},aggs:{testRuns:{terms:{field:"monitor.check_group",size:1e4},aggs:{transferSize:{sum:{field:"synthetics.payload.transfer_size"}}}}}}},[],{name:`previousStepMetricsFromNetworkInfos/${s}/${o}/${l}`}),p=null==u?void 0:u.aggregations,f=[];null==m||null===(r=m.aggregations)||void 0===r||r.testRuns.buckets.forEach((e=>{var t;f.push(null!==(t=e.transferSize.value)&&void 0!==t?t:0)}));const g=gi(f),h=[],b=[],E=[],v=[],y=[];null==p||p.testRuns.buckets.forEach((e=>{var t,a,n,r,i;h.push(null!==(t=e.lcp.value)&&void 0!==t?t:0),b.push(null!==(a=e.fcp.value)&&void 0!==a?a:0),E.push(null!==(n=e.cls.value)&&void 0!==n?n:0),v.push(null!==(r=e.dcl.value)&&void 0!==r?r:0),y.push(null!==(i=e.stepDuration.value)&&void 0!==i?i:0)}));const x=gi(h),S=gi(b),k=gi(E),M=gi(v),w=gi(y);return{loading:d&&!p,metrics:[{label:wi,value:w,formatted:bi(w/1e3)},{value:x,label:xi,formatted:bi(x/1e3)},{value:S,label:Si,formatted:bi(S/1e3)},{value:k,label:ki,formatted:k},{value:M,label:Mi,formatted:bi(M/1e3)},{value:g,label:Ti,formatted:Vr(g)}]}}),bi=e=>e<0?"- ms":e<1e3?`${e.toFixed(0)} ms`:`${(e/1e3).toFixed(1)} s`,Ei=()=>{const{metrics:e}=yi(),{metrics:t,loading:a}=hi();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,vi))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(ti,null))),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiFlexGrid,{gutterSize:"l",columns:3},e.map((({label:e,value:n,helpText:i,formatted:s})=>{var o;const l=t.find((t=>t.label===e));if(e)return r.a.createElement(y.EuiFlexItem,{key:e},r.a.createElement($r,{asStat:!0,loading:a,description:e,current:null!=n?n:0,previous:null!==(o=null==l?void 0:l.value)&&void 0!==o?o:0,helpText:i,currentFormatted:s,previousFormatted:null==l?void 0:l.formatted}))}))))},vi=o.i18n.translate("xpack.synthetics.stepDetailsRoute.metrics",{defaultMessage:"Metrics"}),yi=e=>{var t,a,n,r,i,s,o,l,u,d,m;const p=Object(R.useParams)(),f=null!==(t=null==e?void 0:e.monitor.check_group)&&void 0!==t?t:p.checkGroupId,g=null!==(a=null==e||null===(n=e.synthetics.step)||void 0===n?void 0:n.index)&&void 0!==a?a:p.stepIndex,{data:h}=Pe({index:c.A,body:{size:0,query:{bool:{filter:[{terms:{"synthetics.type":["step/metrics","step/end"]}},{term:{"monitor.check_group":f}},{term:{"synthetics.step.index":Number(g)}}]}},aggs:{fcp:{sum:{field:"browser.experience.fcp.us"}},lcp:{sum:{field:"browser.experience.lcp.us"}},cls:{sum:{field:"browser.experience.cls"}},dcl:{sum:{field:"browser.experience.dcl.us"}},totalDuration:{sum:{field:"synthetics.step.duration.us"}}}}},[],{name:`stepMetrics/${f}/${g}`}),{data:b}=Pe({index:c.A,body:{size:0,runtime_mappings:{"synthetics.payload.transfer_size":{type:"double"}},query:{bool:{filter:[{term:{"synthetics.type":"journey/network_info"}},{term:{"monitor.check_group":f}},{term:{"synthetics.step.index":Number(g)}}]}},aggs:{transferSize:{sum:{field:"synthetics.payload.transfer_size"}}}}},[],{name:`stepMetricsFromNetworkInfos/${f}/${g}`}),E=null==h?void 0:h.aggregations,v=null!==(r=null==b||null===(i=b.aggregations)||void 0===i||null===(s=i.transferSize)||void 0===s?void 0:s.value)&&void 0!==r?r:0;return{metrics:[{label:wi,value:null==E?void 0:E.totalDuration.value,formatted:bi((null!==(o=null==E?void 0:E.totalDuration.value)&&void 0!==o?o:0)/1e3)},{value:null==E?void 0:E.lcp.value,label:xi,helpText:Ur,formatted:bi((null!==(l=null==E?void 0:E.lcp.value)&&void 0!==l?l:0)/1e3)},{value:null==E?void 0:E.fcp.value,label:Si,helpText:Wr,formatted:bi((null!==(u=null==E?void 0:E.fcp.value)&&void 0!==u?u:0)/1e3)},{value:null==E?void 0:E.cls.value,label:ki,helpText:qr,formatted:null!==(d=null==E?void 0:E.cls.value)&&void 0!==d?d:0},{value:null==E?void 0:E.dcl.value,label:Mi,helpText:Kr,formatted:bi((null!==(m=null==E?void 0:E.dcl.value)&&void 0!==m?m:0)/1e3)},{value:v,label:Ti,helpText:Yr,formatted:Vr(null!=v?v:0)}]}},xi=o.i18n.translate("xpack.synthetics.lcp.label",{defaultMessage:"LCP"}),Si=o.i18n.translate("xpack.synthetics.fcp.label",{defaultMessage:"FCP"}),ki=o.i18n.translate("xpack.synthetics.cls.label",{defaultMessage:"CLS"}),Mi=o.i18n.translate("xpack.synthetics.dcl.label",{defaultMessage:"DCL"}),wi=o.i18n.translate("xpack.synthetics.totalDuration.metrics",{defaultMessage:"Step duration"}),Ti=o.i18n.translate("xpack.synthetics.totalDuration.transferSize",{defaultMessage:"Transfer size"});var Oi=a(132),Ci=a.n(Oi);const Ii=({timestamp:e,checkGroup:t,stepStatus:a,hasIntersected:r,imgPath:i,testNowMode:s,retryFetchOnRevisit:o})=>{var l,c;const[d,m]=Object(n.useState)({}),p="skipped"===a,f=function(e,t,a){var r,i;const[s,o]=Object(n.useState)(),l=Object(n.useMemo)((()=>{var t,n,r;return e?null===(t=Object.entries(a).find((([t,a])=>{var n;return t.includes(e)&&(null==a||null===(n=a.data)||void 0===n?void 0:n.maxSteps)})))||void 0===t||null===(n=t[1])||void 0===n||null===(r=n.data)||void 0===r?void 0:r.maxSteps:void 0}),[e,a]),c=Object(Ge.H)(null===(r=a[t])||void 0===r?void 0:r.data)?null===(i=a[t])||void 0===i?void 0:i.data:void 0,{isComposing:d,imgSrc:m}=(e=>{var t,a,r,i;const s=Object(u.useDispatch)(),{blocks:o}=Object(u.useSelector)(q.F),[l,c]=Object(n.useMemo)((()=>[Ve(e,o),$e(e,o)]),[e,o]);Object(n.useEffect)((()=>{e&&s(Object(q.d)(e.ref.screenshotRef.screenshot_ref.blocks.map((({hash:e})=>e))))}),[s,e]);const d=null!==(t=null!==(a=null==e?void 0:e.stepName)&&void 0!==a?a:null==e||null===(r=e.ref.screenshotRef.screenshot_ref.blocks[0])||void 0===r?void 0:r.hash)&&void 0!==t?t:"",m=`${null==e?void 0:e.ref.screenshotRef.monitor.check_group}/${d}`,[p,f]=Object(n.useState)({}),{isComposing:g,imgSrc:h}=null!==(i=p[m])&&void 0!==i?i:{isComposing:!1,imgSrc:void 0};return Object(n.useEffect)((()=>{if(e&&!g&&!h&&c){f((e=>({...e,[m]:{isComposing:!0,imgSrc:void 0}})));const t=document.createElement("canvas");(async function(e,t,a){const{ref:{screenshotRef:n}}=e,r=t.getContext("2d",{alpha:!1});t.width=n.screenshot_ref.width,t.height=n.screenshot_ref.height;const i=[];for(const{hash:e,top:t,left:s,width:o,height:l}of n.screenshot_ref.blocks)i.push(new Promise(((n,i)=>{const c=new Image,u=a[e];u&&Object(Ge.G)(u)?(c.onload=()=>{null==r||r.drawImage(c,s,t,o,l),n()},c.src=`data:image/jpg;base64,${u.synthetics.blob}`):i(Error(`Error processing image. Expected image data with hash ${e} is missing`))})));return Promise.all(i)})(e,t,o).then((()=>{var e;const a=t.toDataURL("image/jpg",1);f((e=>({...e,[m]:{isComposing:!1,imgSrc:a}}))),null===(e=t.parentElement)||void 0===e||e.removeChild(t)}))}}),[o,e,p,h,g,m,l,c]),{isComposing:g||l,imgSrc:h}})(c);return Object(n.useEffect)((()=>{var e,n,r,i,s;const u=c?m:null===(e=a[t])||void 0===e||null===(n=e.data)||void 0===n?void 0:n.src,p=null===(r=a[t])||void 0===r?void 0:r.stepName,f=null!==(i=null===(s=a[t])||void 0===s?void 0:s.loading)&&void 0!==i&&i||d;o((e=>ji({prevState:e,imgPath:t,maxSteps:l,url:u,stepName:p,loading:f})))}),[t,l,a,c,d,m]),s}(t,i,d),g=null!==(l=null==f||null===(c=f[i])||void 0===c?void 0:c.url)&&void 0!==l&&l,h=Object(n.useMemo)((()=>{var e,a;const n=o||!(null!==(e=null===(a=d[i])||void 0===a?void 0:a.attempts)&&void 0!==e&&e);return!p&&r&&!g&&n&&t}),[t,r,i,d,g,o,p]);return Object(n.useEffect)((()=>{!async function(){if(h){m((e=>ji({prevState:e,imgPath:i,increment:!0,loading:!0})));const e=s?void 0:{shouldBackoff:!1};try{Object(q.o)(i,e).then((e=>m((t=>ji({prevState:t,imgPath:i,increment:!1,data:e,loading:!1})))))}catch(e){m((e=>ji({prevState:e,imgPath:i,increment:!1,loading:!1})))}}}()}),[i,h,s]),f};function ji({prevState:e,imgPath:t,increment:a,url:n,stepName:r,maxSteps:i,data:s,loading:o}){var l,c,u,d,m,p,f,g,h,b,E,v;const y=(null!==(l=null==e||null===(c=e[t])||void 0===c?void 0:c.attempts)&&void 0!==l?l:0)+(a?1:0),x=null!==(u=null!=s?s:null==e||null===(d=e[t])||void 0===d?void 0:d.data)&&void 0!==u?u:null,S=null!==(m=null!=o?o:null==e||null===(p=e[t])||void 0===p?void 0:p.loading)&&void 0!==m&&m,k=null!=n?n:null==e||null===(f=e[t])||void 0===f?void 0:f.url,M=null!=i?i:null==e||null===(g=e[t])||void 0===g||null===(h=g.data)||void 0===h?void 0:h.maxSteps,w=null!==(b=null!==(E=null==s?void 0:s.stepName)&&void 0!==E?E:r)&&void 0!==b?b:null==e||null===(v=e[t])||void 0===v?void 0:v.stepName;return{...e,[t]:{attempts:y,data:x,url:k,stepName:w,maxSteps:M,loading:S}}}const _i=[96,64],Fi=[180,112],Pi=[640,360];function Li(e,t){const a="86vw",n="70vh",r=null!=t&&t[0]?`${t[0]}px`:a,i=null!=t&&t[1]?`${t[1]}px`:n;return{width:`min(${"full"===e?r:`${e[0]}px`}, ${a})`,height:`min(${"full"===e?i:`${e[1]}px`}, ${n})`}}const Ri={padding:0,margin:"auto",objectFit:"contain",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},Di=({isLoading:e=!1,animateLoading:t,size:a=_i,unavailableMessage:n,borderRadius:i})=>{const{euiTheme:s}=Object(y.useEuiTheme)(),{width:o,height:l}=Li(a),c=null!=n?n:Ni;return r.a.createElement("div",{"data-test-subj":"stepScreenshotPlaceholder",role:"img","aria-label":e?Ai:c,title:e?Ai:c,style:{...Ri,width:o,height:l,background:Object(y.useEuiBackgroundColor)("subdued"),border:s.border.thin,...i?{borderRadius:i}:{}},onClick:e=>{e.stopPropagation(),e.preventDefault()},onKeyDown:e=>{e.stopPropagation()}},e&&t?r.a.createElement(y.EuiSkeletonRectangle,{"data-test-subj":"stepScreenshotPlaceholderLoading",isLoading:e,height:l,width:o},r.a.createElement("span",null)):e?r.a.createElement("div",{"data-test-subj":"stepScreenshotPlaceholderLoading",style:{width:"100%"}}):r.a.createElement("div",{style:{border:"none",display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(y.EuiIcon,{"data-test-subj":"stepScreenshotNotAvailable",type:"eyeClosed",color:s.colors.disabledText}),n?r.a.createElement(y.EuiText,{color:s.colors.disabledText},n):null))},Ai=o.i18n.translate("xpack.synthetics.monitor.step.screenshot.ariaLabel",{defaultMessage:"Step screenshot is being loaded."}),Ni=o.i18n.translate("xpack.synthetics.monitor.step.screenshot.notAvailable",{defaultMessage:"Step screenshot is not available."}),zi=[512,512],Bi=({label:e,imgSrc:t,isLoading:a,animateLoading:i=!0,unavailableMessage:s,borderColor:o,borderRadius:l,hasBorder:c=!0,size:u=[100,64],onMouseEnter:d,onMouseLeave:m,onClick:p})=>{const{euiTheme:f}=Object(y.useEuiTheme)(),[g,h]=Object(n.useState)(zi),{width:b,height:E}=Li(u,g);return t?r.a.createElement(Hi,{src:t,alt:e,"data-test-subj":"stepScreenshotThumbnail",onLoad:e=>{var t,a,n,r;const i=[null!==(t=null==e||null===(a=e.target)||void 0===a?void 0:a.naturalWidth)&&void 0!==t?t:g[0],null!==(n=null==e||null===(r=e.target)||void 0===r?void 0:r.naturalHeight)&&void 0!==n?n:g[1]];h(i)},onMouseEnter:d,onMouseLeave:m,onClick:p,onKeyDown:void 0,$_css:b,$_css2:E,$_css3:f.border.thin,$_css4:o?{borderColor:o}:{},$_css5:l?{borderRadius:l}:{},$_css6:c?{}:{borderRadius:l},$_css7:o?{borderColor:o}:{}}):r.a.createElement(Di,{isLoading:a,size:"full"===u?g:u,unavailableMessage:s,borderRadius:l,animateLoading:i})};var Hi=G()("img").withConfig({displayName:"_StyledImg",componentId:"sc-inxdij-0"})((e=>({outline:0,objectFit:"contain",width:e.$_css,height:e.$_css2,cursor:"pointer",border:e.$_css3,...e.$_css4,...e.$_css5,...e.$_css6,...e.$_css7})));const Gi=({timestamp:e,checkGroup:t,initialImgSrc:a,initialStepNumber:i,isOpen:s,onClose:l})=>{var c;const{euiTheme:u}=Object(y.useEuiTheme)(),d=Object(y.useIsWithinMaxBreakpoint)("m"),[m,p]=Object(n.useState)(i),{basePath:f}=Object(n.useContext)(et),g=Ui({basePath:f,checkGroup:t,stepNumber:m}),h=Ii({hasIntersected:!0,stepStatus:"complete",imgPath:g,retryFetchOnRevisit:!1,checkGroup:t,timestamp:e}),{url:b,loading:E,stepName:v,maxSteps:x}=null!==(c=null==h?void 0:h[g])&&void 0!==c?c:{},S=m===i&&null!=a?a:b;Object(n.useEffect)((()=>{s&&p(i)}),[s,p]);const k=Object(n.useCallback)((e=>{if("Escape"===(null==e?void 0:e.key))return void l();if(!x)return;const t="ArrowLeft"===(null==e?void 0:e.key),a="ArrowRight"===(null==e?void 0:e.key);t&&m>1&&p((e=>e-1)),a&&m<x&&p((e=>e+1))}),[p,m,x,l]);return s?r.a.createElement(y.EuiOutsideClickDetector,{onOutsideClick:l},r.a.createElement(Ki,{onClose:e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),l()},onKeyDown:k},r.a.createElement($i,null,r.a.createElement(Bi,{label:o.i18n.translate("xpack.synthetics.monitor.screenshotImageLabel",{defaultMessage:'"{stepName}", {stepNumber} of {totalSteps}',values:{stepName:v,stepNumber:m,totalSteps:null!=x?x:m}}),imgSrc:S,isLoading:!!E,animateLoading:!1,hasBorder:!1,size:"full",onClick:e=>{e.stopPropagation()}})),r.a.createElement(Yi,{onClick:e=>{e.stopPropagation()},onKeyDown:e=>{},$_css:u.colors.lightShade},E?r.a.createElement(y.EuiProgress,{"data-test-subj":"screenshotImageLoadingProgress",size:"xs"}):null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(Xi,{"data-test-subj":"screenshotImagePreviousButton",disabled:E||!x||1===m,onClick:e=>{p((e=>e-1)),e.preventDefault()},iconType:"arrowLeft","aria-label":qi,$_css2:d?0:"auto"},qi)),r.a.createElement(Ji,{grow:!1},r.a.createElement(y.EuiText,{color:u.colors.text},o.i18n.translate("xpack.synthetics.monitor.stepOfSteps",{defaultMessage:"Step: {stepNumber} of {totalSteps}",values:{stepNumber:m,totalSteps:null!=x?x:m}}))),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(Qi,{"data-test-subj":"screenshotImageNextButton",disabled:E||!x||m===x,onClick:e=>{p((e=>e+1)),e.stopPropagation()},iconType:"arrowRight",iconSide:"right","aria-label":Wi,$_css3:d?0:"auto"},Wi))),r.a.createElement(Zi,{color:u.colors.text,className:"eui-textNoWrap",size:"s",$_css4:u.size.m},v)))):null},Vi=Object(m.euiStyled)(y.EuiModalBody)`
  &&& {
    & > div {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 24px;
    }
  }
`;var $i=G()(Vi)({display:"flex"});const Ui=({basePath:e,checkGroup:t,stepNumber:a})=>t?`${e}${c.z.JOURNEY_SCREENSHOT.replace("{checkGroup}",t).replace("{stepIndex}",a.toString())}`:"",qi=o.i18n.translate("xpack.synthetics.monitor.step.previousStep",{defaultMessage:"Previous step"}),Wi=o.i18n.translate("xpack.synthetics.monitor.step.nextStep",{defaultMessage:"Next step"});var Ki=G()(y.EuiModal)({outline:0,maxWidth:"calc(90vw)",maxHeight:"calc(90vh)",borderRadius:0,padding:0}),Yi=G()(y.EuiModalFooter)((e=>({outline:0,backgroundColor:e.$_css,display:"inline-block",width:"100%",textDecoration:"none",padding:0}))),Xi=G()(y.EuiButtonEmpty)((e=>({marginLeft:e.$_css2}))),Ji=G()(y.EuiFlexItem)({flexBasis:"fit-content"}),Qi=G()(y.EuiButtonEmpty)((e=>({marginRight:e.$_css3}))),Zi=G()(y.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1qr3gmp-0"})((e=>({outline:0,padding:e.$_css4,paddingTop:0,textAlign:"center",overflow:"hidden",textOverflow:"ellipsis"})));const es=({timestamp:e,checkGroup:t,stepName:a,stepNumber:i,imgSrc:s,maxSteps:l,isStepFailed:c,isLoading:u,size:d,unavailableMessage:m,borderRadius:p})=>{const{euiTheme:f}=Object(y.useEuiTheme)(),[g,h]=Object(n.useState)(!1),[b,E]=Object(n.useState)(!1),[v,x]=Object(n.useState)(!1),S=Object(n.useCallback)((e=>{h(!0)}),[h]),k=Object(n.useCallback)((e=>{h(!1)}),[h]),M=Object(n.useCallback)((e=>{e.stopPropagation(),x(!0),E(!0),h(!1)}),[h]),w=Object(n.useCallback)((()=>{E(!1)}),[E]),T=e=>r.a.createElement(Bi,{label:o.i18n.translate("xpack.synthetics.monitorTestResult.screenshotImageLabel",{defaultMessage:'"{stepName}", {stepNumber} of {totalSteps}',values:{stepName:a,stepNumber:i,totalSteps:null!=l?l:i}}),imgSrc:s,isLoading:u,size:e,unavailableMessage:m,borderColor:c?f.colors.danger:void 0,borderRadius:p,onMouseEnter:S,onMouseLeave:k,onClick:M});return r.a.createElement(r.a.Fragment,null,v?r.a.createElement(Gi,{checkGroup:t,initialImgSrc:s,initialStepNumber:i,maxSteps:l,isOpen:b,onClose:w,timestamp:e}):null,r.a.createElement(y.EuiPopover,{anchorPosition:"leftDown",button:T(d),isOpen:g},T(Pi)))},ts=({allStepsLoaded:e,timestamp:t,checkGroup:a,stepStatus:i,initialStepNumber:s=1,retryFetchOnRevisit:o=!1,testNowMode:l,size:c=_i,unavailableMessage:u,borderRadius:d})=>{var m;const p=r.a.useRef(null),{basePath:f}=Object(n.useContext)(et),g=a?Ui({basePath:f,checkGroup:a,stepNumber:s}):"",h=Ci()(p,{root:null,rootMargin:"0px",threshold:.1}),b=Ii({hasIntersected:Boolean(h&&h.intersectionRatio>0),stepStatus:i,imgPath:g,retryFetchOnRevisit:o,checkGroup:a,testNowMode:l,timestamp:t}),{url:E,loading:v,stepName:y,maxSteps:x}=null!==(m=null==b?void 0:b[g])&&void 0!==m?m:{};return r.a.createElement("div",{ref:p},r.a.createElement(es,{checkGroup:a,stepName:y,imgSrc:E,stepNumber:s,isStepFailed:"failed"===i,maxSteps:x,isLoading:Boolean(v||!e),size:c,unavailableMessage:u,borderRadius:d,timestamp:t}))},as=(e,t=3)=>Number(e).toFixed(t),ns=({value:e,timing:t,mimeType:a})=>{let n=Fr[t];return t===jr.Receive&&a&&(n+=` (${Dr[Ar[a]]||a})`),`${n}: ${as(e,e>1?0:1)}ms`},rs=(e,t,a)=>{var n,r;return!t&&!a||(null===(n=null==t?void 0:t(e))||void 0===n||n)&&(null===(r=null==a?void 0:a(e))||void 0===r||r)},is=({value:e,postFix:t})=>{if(void 0===e||-1===e)return;let a=as(e);return t&&(a=`${a} ${t}`),a},ss=(e,t)=>t&&e&&t>0?e-t:e,os=e=>{if(!e)return e=>!0;const t=new RegExp(e,"i");return e=>{var a,n;return(null!==(a=null===(n=e.url)||void 0===n?void 0:n.search(t))&&void 0!==a?a:-1)>-1}},ls=e=>{if(null==e||!e.length)return e=>!0;const t=e.reduce(((e,t)=>(e.set(t,!0),e)),new Map);return e=>{var a;const n=e.mimeType&&null!==(a=Ar[e.mimeType])&&void 0!==a?a:Rr.Other;return t.has(n)}},cs=e=>{if(void 0!==e)return Object.keys(e).map((t=>({name:t,value:`${e[t]}`})))},us=({item:e,index:t,requestStart:a,dateFormatter:n})=>{const{certificates:r,ip:i,mimeType:s,requestHeaders:o,responseHeaders:l,url:c,resourceSize:u,transferSize:d,status:m}=e,{dns:p,connect:f,ssl:g,wait:h,receive:b,total:E}=e.timings||{},v=b&&b>0?b:E;return{x:t,url:c,requestHeaders:cs(o),responseHeaders:cs(l),certificates:r?[{name:Pr[_r.CertificateIssuer],value:r.issuer},{name:Pr[_r.CertificateIssueDate],value:r.validFrom?n(r.validFrom):void 0},{name:Pr[_r.CertificateExpiryDate],value:r.validTo?n(r.validTo):void 0},{name:Pr[_r.CertificateSubject],value:r.subjectName}]:void 0,details:[{name:Pr[_r.Status],value:m?`${m}`:void 0},{name:Pr[_r.MimeType],value:s},{name:Pr[_r.RequestStart],value:is({value:a,postFix:"ms"})},{name:Fr[jr.Dns],value:is({value:p,postFix:"ms"})},{name:Fr[jr.Connect],value:is({value:ss(f,g),postFix:"ms"})},{name:Fr[jr.Ssl],value:is({value:g,postFix:"ms"})},{name:Fr[jr.Wait],value:is({value:h,postFix:"ms"})},{name:Fr[jr.Receive],value:is({value:v,postFix:"ms"})},{name:Pr[_r.ResourceSize],value:is({value:u?u/1e3:void 0,postFix:"KB"})},{name:Pr[_r.TransferSize],value:is({value:d?d/1e3:void 0,postFix:"KB"})},{name:Pr[_r.IP],value:i}]}},ds=Object(y.euiPaletteColorBlind)({rotations:2}),ms={...Object.values(jr).reduce(((e,t)=>{switch(t){case jr.Blocked:e[t]=ds[11];break;case jr.Dns:e[t]=ds[10];break;case jr.Connect:e[t]=ds[13];break;case jr.Ssl:e[t]=ds[14];break;case jr.Send:e[t]=ds[19];break;case jr.Wait:e[t]=ds[9];break;case jr.Receive:e[t]=ds[15]}return e}),{}),...Object.values(Rr).reduce(((e,t)=>{switch(t){case Rr.Html:e[t]=ds[1];break;case Rr.Script:e[t]=ds[7];break;case Rr.Stylesheet:e[t]=ds[3];break;case Rr.Image:e[t]=ds[4];break;case Rr.Media:e[t]=ds[5];break;case Rr.Font:e[t]=ds[2];break;case Rr.XHR:e[t]=ds[0];break;case Rr.Other:e[t]=ds[6]}return e}),{})},ps=(e,t)=>isNaN(e)?t:`${e}. ${t}`,fs=(e,{maxMillis:t=1e3,digits:a})=>e<0?"--":e<t?`${e.toFixed(null!=a?a:0)} ms`:`${(e/1e3).toFixed(null!=a?a:2)} s`,gs=({status:e})=>"unknown"===e?r.a.createElement(y.EuiSkeletonText,{lines:1}):r.a.createElement(Ss,{color:bs(e)},"succeeded"===e?vs:"failed"===e?ys:xs),hs=e=>{switch(e){case"succeeded":case"success":case"up":return"succeeded";case"fail":case"failed":case"down":return"failed";case"skip":case"skipped":return"skipped";default:return"unknown"}},bs=e=>"succeeded"===e?"success":"failed"===e?"danger":"default",Es=e=>"skipped"===e?"disabledText":"text",vs=o.i18n.translate("xpack.synthetics.monitorStatus.complete",{defaultMessage:"Complete"}),ys=o.i18n.translate("xpack.synthetics.monitorStatus.failed",{defaultMessage:"Failed"}),xs=o.i18n.translate("xpack.synthetics.monitorStatus.skipped",{defaultMessage:"Skipped"});var Ss=G()(y.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-134z2ov-0"})({maxWidth:"max-content"});const ks=({testNowMode:e,pingStatus:t,isExpanded:a,step:n})=>{var i,s,l,c,u,d;return r.a.createElement("div",null,r.a.createElement(y.EuiText,{className:"eui-textNoWrap",size:"s"},r.a.createElement(gs,{status:hs(t)})," ",e?"":o.i18n.translate("xpack.synthetics.step.duration.label",{defaultMessage:"after {value}",values:{value:fs((null!==(i=null===(s=n.synthetics)||void 0===s||null===(l=s.step)||void 0===l?void 0:l.duration.us)&&void 0!==i?i:0)/1e3,{})}})),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(ts,{checkGroup:n.monitor.check_group,initialStepNumber:null===(c=n.synthetics)||void 0===c||null===(u=c.step)||void 0===u?void 0:u.index,stepStatus:null===(d=n.synthetics.payload)||void 0===d?void 0:d.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,size:[260,160]}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Ms,{step:n}),r.a.createElement(y.EuiSpacer,{size:"xs"}),r.a.createElement(ws,{step:n})))},Ms=({step:e})=>{var t,a;const{timingsWithLabels:n}=ii(e.monitor.check_group,null===(t=e.synthetics.step)||void 0===t?void 0:t.index),{timingsWithLabels:i,loading:s}=fi(null===(a=e.synthetics.step)||void 0===a?void 0:a.index,e["@timestamp"],e.monitor.check_group),o=null==n?void 0:n.map((e=>{const t=null==i?void 0:i.find((t=>t.label===e.label)),a=null==t?void 0:t.value;return{title:e.label,description:r.a.createElement($r,{loading:s,currentFormatted:fs(e.value,{}),current:e.value,previous:a,previousFormatted:fs(null!=a?a:0,{})})}}));return r.a.createElement(y.EuiDescriptionList,{compressed:!0,type:"column",listItems:o,style:{maxWidth:265},textStyle:"reverse",descriptionProps:{style:{textAlign:"right"}}})},ws=({step:e})=>{const{metrics:t}=yi(e),{metrics:a,loading:n}=hi(e),i=null==t?void 0:t.map((e=>{var t;const i=null==a?void 0:a.find((t=>t.label===e.label)),s=null==i?void 0:i.value;return{title:e.label,description:r.a.createElement($r,{loading:n,currentFormatted:e.formatted,current:null!==(t=e.value)&&void 0!==t?t:0,previous:s,previousFormatted:null==i?void 0:i.formatted})}}));return r.a.createElement(y.EuiDescriptionList,{compressed:!0,type:"column",listItems:i,style:{maxWidth:265},textStyle:"reverse",descriptionProps:{style:{textAlign:"right"}}})},Ts=e=>{var t;let a=e;const{monitorId:r}=Object(R.useParams)();a||(a=r);const i=Object(u.useSelector)(q.G),{loading:s}=Object(u.useSelector)(q.M),o=Object(u.useSelector)(q.U),l=Object(n.useMemo)((()=>{var e;return null!==(e=i.find((e=>e[Ge.c.CONFIG_ID]===a)))&&void 0!==e?e:null}),[a,i]),c=Object(u.useSelector)(q.ab),{lastRefresh:d}=X(),{syntheticsMonitor:m,syntheticsMonitorLoading:p,syntheticsMonitorDispatchedAt:f}=Object(u.useSelector)(q.bb),g=Object(u.useDispatch)(),h=a&&l&&l[Ge.c.CONFIG_ID]===a,b=a&&m&&m[Ge.c.CONFIG_ID]===a?m:h?l:null,E=404===(null==c?void 0:c.body.statusCode)&&(null===(t=c.getPayload)||void 0===t?void 0:t.monitorId)===a;return Object(n.useEffect)((()=>{!a||b||p||E||g(q.p.get({monitorId:a}))}),[g,a,b,p,E]),Object(n.useEffect)((()=>{a&&!p&&!s&&f>0&&Date.now()-f>1e3*o&&g(q.p.get({monitorId:a}))}),[g,d,o,a,s,p,f]),{monitor:b,loading:p||s,error:c,isMonitorMissing:E}},Os=(e=!0)=>{const[t,a]=Me(),{locations:r}=_e(),{monitor:i}=Ts(),s=Object(u.useSelector)(q.W),o=Object(u.useDispatch)(),{locationId:l}=t();return Object(n.useEffect)((()=>{if(!l){var t,n;const r=null==i||null===(t=i.locations)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;r&&e&&a({locationId:r},!0)}l&&s!==l&&o(Object(q.gb)(l))}),[o,a,r,l,s,e,null==i?void 0:i.locations]),Object(n.useMemo)((()=>{var e;let t=null!==(e=r.find((e=>e.id===l)))&&void 0!==e?e:null;var a,n;return t||(t=null!==(a=null==i||null===(n=i.locations)||void 0===n?void 0:n.find((e=>e.id===l)))&&void 0!==a?a:null),t}),[r,l,null==i?void 0:i.locations])},Cs=({stepIndex:e,checkGroup:t,configId:a,asButton:n,label:i,target:s="_self",...o})=>{const{basePath:l}=at(),c=Os(),u=`${l}/app/synthetics/monitor/${a}/test-run/${t}/step/${e}?locationId=${null==c?void 0:c.id}`;return n?r.a.createElement(y.EuiButtonEmpty,b()({"data-test-subj":"syntheticsStepDetailsLinkIconButton"},o,{flush:"left",iconType:"apmTrace",href:u}),null!=i?i:Is):r.a.createElement(y.EuiButtonIcon,b()({"data-test-subj":"syntheticsStepDetailsLinkIconButton"},o,{"aria-label":Is,title:Is,size:"s",href:u,target:s,iconType:"apmTrace"}))},Is=o.i18n.translate("xpack.synthetics.monitor.step.viewStepDetails",{defaultMessage:"View step details"}),js=(e=0,t=!1)=>{const a=t?e/1e3:e/1e6,n=Math.floor(a/3600);return n>=1?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.hours",{defaultMessage:"{value} hours",values:{value:n}}):a>=60?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.minutes",{defaultMessage:"{value} mins",values:{value:parseFloat((a/60).toFixed(1))}}):a>=1?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.seconds",{defaultMessage:"{value} sec",values:{value:parseFloat(a.toFixed(1))}}):t?o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.milliseconds",{defaultMessage:"{value} ms",values:{value:e.toFixed(0)}}):o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.microseconds",{defaultMessage:"{value} ms",values:{value:(e/1e3).toFixed(0)}})},_s=({step:e})=>{var t,a,i,s;const{euiTheme:o}=Object(y.useEuiTheme)(),l=Object(n.useMemo)((()=>{var t,a,n,r;const i=hs(null!==(t=null===(a=e.synthetics.step)||void 0===a?void 0:a.status)&&void 0!==t?t:""),s=o.colors[Es(i)];return"skipped"===i?{text:"-",color:s}:{text:js(null===(n=e.synthetics.step)||void 0===n||null===(r=n.duration)||void 0===r?void 0:r.us),color:s}}),[o.colors,null===(t=e.synthetics.step)||void 0===t||null===(a=t.duration)||void 0===a?void 0:a.us,null===(i=e.synthetics.step)||void 0===i?void 0:i.status]);return r.a.createElement(y.EuiText,{size:"s",color:l.color,"data-test-subj":`stepDurationText${null===(s=e.synthetics.step)||void 0===s?void 0:s.index}`},l.text)},Fs=({step:e,stepIndex:t,size:a,borderRadius:n})=>{var i,s,o,l;const{stepIndex:c}=Object(R.useParams)(),{data:u,loading:d}=Object(f.useFetcher)((()=>{var a,n;return Object(q.h)({timestamp:e["@timestamp"],monitorId:e.monitor.id,stepIndex:Number(null!=c?c:t),location:null===(a=e.observer)||void 0===a||null===(n=a.geo)||void 0===n?void 0:n.name})}),[e._id,e["@timestamp"]]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ts,{checkGroup:null==u?void 0:u.monitor.check_group,initialStepNumber:null==u||null===(i=u.synthetics)||void 0===i||null===(s=i.step)||void 0===s?void 0:s.index,stepStatus:null==u||null===(o=u.synthetics)||void 0===o||null===(l=o.payload)||void 0===l?void 0:l.status,allStepsLoaded:!d,retryFetchOnRevisit:!1,size:a,unavailableMessage:Ps,borderRadius:n}),r.a.createElement(y.EuiSpacer,{size:"xs"}))},Ps=o.i18n.translate("xpack.synthetics.monitor.step.screenshot.unAvailable",{defaultMessage:"Image unavailable"}),Ls=({isExpanded:e,step:t})=>{var a,n,i,s,o,l,c,u,d,m,p;const{euiTheme:g}=Object(y.useEuiTheme)(),h=t["@timestamp"],b=t.monitor.id,E=Number(null===(a=t.synthetics.step)||void 0===a?void 0:a.index),v=null===(n=t.observer)||void 0===n||null===(i=n.geo)||void 0===i?void 0:i.name,{data:x,loading:S}=Object(f.useFetcher)((()=>Object(q.h)({timestamp:h,monitorId:b,stepIndex:E,location:v})),[h,b,E,v,t._id]),{currentStep:k}=Ir(null==x?void 0:x.monitor.check_group,0,Number(null===(s=t.synthetics.step)||void 0===s?void 0:s.index));return r.a.createElement("div",null,r.a.createElement(y.EuiText,{className:"eui-textNoWrap",size:"s"},fs((null!==(o=null==k||null===(l=k.synthetics)||void 0===l||null===(c=l.step)||void 0===c?void 0:c.duration.us)&&void 0!==o?o:0)/1e3,{})),e&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(ts,{checkGroup:null==x?void 0:x.monitor.check_group,initialStepNumber:null==x||null===(u=x.synthetics)||void 0===u||null===(d=u.step)||void 0===d?void 0:d.index,stepStatus:null==x||null===(m=x.synthetics)||void 0===m||null===(p=m.payload)||void 0===p?void 0:p.status,allStepsLoaded:!S,retryFetchOnRevisit:!1,size:[260,160],unavailableMessage:Ps,borderRadius:g.border.radius.small}),r.a.createElement(y.EuiSpacer,{size:"m"}),k&&r.a.createElement(Ms,{step:k}),r.a.createElement(y.EuiSpacer,{size:"xs"}),k&&r.a.createElement(ws,{step:k})))};function Rs(e){var t;return"step/end"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)}function Ds(e,t,a){return a?r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,null,r.a.createElement(wr,{step:e,loading:!1,stepsList:t}))):r.a.createElement(r.a.Fragment,null)}function As(e){return e.map((({_id:e})=>e)).toString()}const Ns=({steps:e,error:t,loading:a,screenshotImageSize:i=_i,showLastSuccessful:s=!0,showStepNumber:l=!1,compressed:c=!0,showExpand:u=!0,testNowMode:d=!1})=>{const m=e.filter(Rs),p=m.find((e=>{var t;return"failed"===(null===(t=e.synthetics.step)||void 0===t?void 0:t.status)})),f=Object(n.useMemo)((()=>p&&u?{[p._id]:Ds(p,e,d)}:{}),[p,u,e,d]),{euiTheme:g}=Object(y.useEuiTheme)(),[h,b]=Object(n.useState)(f),[E,v]=Object(n.useState)(As(m)),x=Object(y.useIsWithinMinBreakpoint)("s");Object(n.useEffect)((()=>{const t=As(m);t!==E&&(v(t),p&&u&&!h[p._id]&&b(Object.assign(h,{[p._id]:Ds(p,e,d)})))}),[h,p,u,m,E,e,d]);const S=Object(n.useCallback)((t=>{b((a=>{const n={...a};return n[t._id]?delete n[t._id]:n[t._id]=Ds(t,e,d),n}))}),[e,d]),k=[...u?[{align:"left",width:"40px",isExpander:!0,render:e=>r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsColumnsButton",onClick:()=>S(e),"aria-label":h[e._id]?"Collapse":"Expand",iconType:h[e._id]?"arrowDown":"arrowRight"})}]:[],...l?[{field:"synthetics.step.index",name:"#",render:(e,t)=>r.a.createElement(zs,{step:t,euiTheme:g},e),mobileOptions:{show:!1}}]:[],{align:"left",field:"timestamp",name:Vs,render:(e,t)=>{var n,s,o;return r.a.createElement(ts,{checkGroup:t.monitor.check_group,initialStepNumber:null===(n=t.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.index,stepStatus:null===(o=t.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!a,retryFetchOnRevisit:!0,size:i,testNowMode:d,timestamp:e})},mobileOptions:{render:e=>r.a.createElement(Bs,{journeyStep:e,stepsLoading:a,showStepNumber:l,showLastSuccessful:s,isExpanded:Boolean(h[e._id]),isTestNowMode:d,euiTheme:g}),header:!1,enlarge:!0,width:"100%"}},{field:"synthetics.step.name",name:$s,render:(e,t)=>{var a,n;const i=hs(null!==(a=null===(n=t.synthetics.step)||void 0===n?void 0:n.status)&&void 0!==a?a:""),s=g.colors[Es(i)];return r.a.createElement(y.EuiText,{color:s,size:"m"},e)},mobileOptions:{show:!1}},{field:"synthetics.step.status",name:Hs,render:(e,t)=>r.a.createElement(ks,{testNowMode:d,step:t,pingStatus:e,isExpanded:Boolean(h[t._id])&&!d}),mobileOptions:{show:!1}},...s?[{field:"synthetics.step.status",name:Gs,render:(e,t)=>r.a.createElement(Ls,{step:t,isExpanded:Boolean(h[t._id])}),mobileOptions:{show:!1}}]:[{align:"left",name:Us,render:e=>r.a.createElement(_s,{step:e}),mobileOptions:{header:Us,show:!0}}],{align:"right",field:"timestamp",name:"",render:(e,t)=>{var a,n;return r.a.createElement(Cs,{checkGroup:t.monitor.check_group,stepIndex:null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index,configId:t.config_id,target:d?"_blank":void 0})},mobileOptions:{show:!1}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(qs,{cellProps:e=>{if(h[e._id])return{style:{verticalAlign:"top"}}},compressed:c,loading:a,columns:k,error:null==t?void 0:t.message,items:m,noItemsMessage:a?o.i18n.translate("xpack.synthetics.monitor.step.loading",{defaultMessage:"Loading steps..."}):o.i18n.translate("xpack.synthetics.monitor.step.noDataFound",{defaultMessage:"No data found"}),tableLayout:"auto",itemId:"_id",itemIdToExpandedRowMap:d||u?h:void 0,$_css:x?"auto":void 0}))},zs=({step:e,textSize:t="s",euiTheme:a,children:n})=>{var i,s,o;const l=hs(null!==(i=null===(s=e.synthetics)||void 0===s||null===(o=s.step)||void 0===o?void 0:o.status)&&void 0!==i?i:"");return r.a.createElement(Ws,{size:t,color:a.colors[Es(l)],$_css2:a.font.weight.bold},n)},Bs=({journeyStep:e,showStepNumber:t,showLastSuccessful:a,stepsLoading:n,isExpanded:i,isTestNowMode:s,euiTheme:o})=>{var l,c,u,d,m,p,f,g,h,b,E,v;return r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"s"},r.a.createElement(y.EuiTitle,{size:"s"},r.a.createElement("h4",null,r.a.createElement(zs,{step:e,textSize:"relative",euiTheme:o},t&&null!==(l=e.synthetics)&&void 0!==l&&null!==(c=l.step)&&void 0!==c&&c.index?`${e.synthetics.step.index}. `:null," ",null===(u=e.synthetics)||void 0===u||null===(d=u.step)||void 0===d?void 0:d.name))),r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceEvenly",responsive:!1,wrap:!0,gutterSize:"xl"},r.a.createElement(ts,{checkGroup:e.monitor.check_group,initialStepNumber:null===(m=e.synthetics)||void 0===m||null===(p=m.step)||void 0===p?void 0:p.index,stepStatus:null===(f=e.synthetics.payload)||void 0===f?void 0:f.status,allStepsLoaded:!n,retryFetchOnRevisit:!0,size:Fi,timestamp:null==e?void 0:e["@timestamp"]}),r.a.createElement("div",null,r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"s"},[{title:Hs,description:r.a.createElement(ks,{testNowMode:s,step:e,pingStatus:null!==(g=null==e||null===(h=e.synthetics)||void 0===h||null===(b=h.step)||void 0===b?void 0:b.status)&&void 0!==g?g:"skipped",isExpanded:i&&!s})},a?{title:Gs,description:r.a.createElement(Ls,{step:e,isExpanded:i})}:{title:Us,description:r.a.createElement(_s,{step:e})}].map((({title:e,description:t})=>r.a.createElement(Ks,{key:e,direction:"row",alignItems:"baseline",gutterSize:"xs",responsive:!1,wrap:!0},r.a.createElement(y.EuiText,{size:"xs"},e),t)))))),r.a.createElement(Ys,{checkGroup:e.monitor.check_group,stepIndex:null===(E=e.synthetics)||void 0===E||null===(v=E.step)||void 0===v?void 0:v.index,configId:e.config_id,asButton:!0}))},Hs=o.i18n.translate("xpack.synthetics.monitor.result.label",{defaultMessage:"Result"}),Gs=o.i18n.translate("xpack.synthetics.monitor.result.lastSuccessful",{defaultMessage:"Last successful"}),Vs=o.i18n.translate("xpack.synthetics.monitor.screenshot.label",{defaultMessage:"Screenshot"}),$s=o.i18n.translate("xpack.synthetics.monitor.stepName.label",{defaultMessage:"Step name"}),Us=o.i18n.translate("xpack.synthetics.monitor.step.duration.label",{defaultMessage:"Duration"});var qs=G()(y.EuiBasicTable)((e=>({overflowX:e.$_css}))),Ws=G()(y.EuiText)((e=>({fontWeight:e.$_css2,whiteSpace:"nowrap"}))),Ks=G()(y.EuiFlexGroup)({maxWidth:"fit-content"}),Ys=G()(Cs).withConfig({displayName:"_StyledStepDetailsLinkIcon",componentId:"sc-1wvxbjk-0"})({marginLeft:"auto"});const Xs=({testRunId:e,skipDetails:t=!1,expectSummaryDocs:a})=>{const{refreshTimer:r,lastRefresh:i,clearTicks:s}=Mr(5e3),[o,l]=Object(n.useState)(0),[u,d]=Object(n.useState)((()=>new Array(a).fill({checkGroupId:"",journeyStarted:!1,steps:[],stepsLoading:!1,completedSteps:0}).map(((e,t)=>({...e,checkGroupId:`placeholder-check-group-${t}`}))))),m=Object(n.useRef)({checksum:"",time:Date.now()}),{data:p,loading:g}=(({testRunId:e,lastRefresh:t})=>Object(f.useEsSearch)(Object(f.createEsParams)({index:c.A,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[{terms:{"synthetics.type":["heartbeat/summary","journey/start"]}},{term:{test_run_id:e}}]}}},size:1e3}),[e,t],{name:"TestRunData"}))({testRunId:e,lastRefresh:i});Object(n.useEffect)((()=>{const e=null==p?void 0:p.hits.hits;if(e&&e.length>0){const t=(null!=e?e:[]).map((({_source:e})=>e)),n=t.filter((e=>{var t,a;return"journey/start"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)||"heartbeat/summary"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)})).reduce(((e,t)=>({...e,[t.monitor.check_group]:{checkGroupId:t.monitor.check_group,journeyStarted:!0,journeyDoc:t,summaryDoc:null,steps:[],stepsLoading:!1,completedSteps:0}})),{});t.forEach((e=>{var t;"heartbeat/summary"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)&&(n[e.monitor.check_group].summaryDoc=e)}));const i=Object.values(n);i.filter((e=>!!e.summaryDoc)).length>=a&&clearInterval(r),y(i)}else l((e=>{const t=e+1;return t>25&&s(),t}))}),[a,p,r]);const h=u.map((({checkGroupId:e})=>e)),b=h.reduce(((e,t)=>e+t),""),{loading:E}=Object(f.useFetcher)((()=>h.length&&!t?(d((e=>e.map((e=>({...e,stepsLoading:!0}))))),Promise.all(h.map((e=>Object(q.e)({checkGroup:e}).then((e=>(v(e.checkGroup,{steps:e.steps,completedSteps:e.steps.filter(Rs).length}),e))).finally((()=>{v(e,{stepsLoading:!1})})))))):Promise.resolve(null)),[b,d,i]);Object(n.useEffect)((()=>{const e=function(e){return e.reduce(((e,t)=>{var a,n,r,i,s;return null!==(a=null!==(n=e+(null==t||null===(r=t.journeyDoc)||void 0===r?void 0:r._id))&&void 0!==n?n:""+(null==t||null===(i=t.summaryDoc)||void 0===i?void 0:i._id))&&void 0!==a?a:""+(null!==(s=null==t?void 0:t.steps)&&void 0!==s?s:[]).reduce(((e,{_id:t})=>e+t),"")}),"")}(u);b!==m.current.checksum&&(m.current.checksum=e,m.current.time=Date.now())}),[u,b]);const v=(e,t)=>{d((a=>a.map((a=>e!==a.checkGroupId?a:Js(a,t)))))},y=e=>{const t=u.filter((e=>e.checkGroupId.startsWith("placeholder-check-group"))),n=e.length<a?[...e,...t.slice(-1*(a-e.length))]:e;d((e=>{const t=n.map((({checkGroupId:e})=>e)),a=n.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{}),r=e.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{});return t.map((e=>Js(r[e],a[e])))}))};return{data:p,retriesExceeded:o>25,summariesLoading:g,stepLoadingInProgress:E,expectedSummariesLoaded:u.filter((({summaryDoc:e})=>!!e)).length>=a,checkGroupResults:u,lastUpdated:m.current.time}};function Js(e,t){var a,n,r,i,s;const o=t.completedSteps?Math.max(null!==(a=null==e?void 0:e.completedSteps)&&void 0!==a?a:0,null!==(n=t.completedSteps)&&void 0!==n?n:0):null!==(r=null==e?void 0:e.completedSteps)&&void 0!==r?r:0;let l=null!==(i=t.steps)&&void 0!==i?i:[];return 0===l.length&&(null!==(s=null==e?void 0:e.steps)&&void 0!==s?s:[]).length>0&&(l=e.steps),{...null!=e?e:{},...t,steps:l,completedSteps:o}}const Qs=({name:e,expectPings:t,onDone:a,testRunId:i,onProgress:s})=>{const{summariesLoading:l,expectedSummariesLoaded:c,stepLoadingInProgress:u,checkGroupResults:d,retriesExceeded:m}=Xs({testRunId:i,expectSummaryDocs:t});return Object(n.useEffect)((()=>{const{core:t,toasts:n}=N.a;m&&(n.addDanger({text:eo,title:Object(kr.a)(r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.manualTestRun.failedTest.name",defaultMessage:"Manual test run failed for {name}",values:{name:e}}),t)},{toastLifeTimeMs:1e4}),a(i))}),[e,a,m,i]),Object(n.useEffect)((()=>{c&&a(i)}),[a,c,i]),r.a.createElement(r.a.Fragment,null,d.map((e=>{var t,a;const{checkGroupId:i,journeyStarted:c,summaryDoc:d,stepsLoading:m,steps:p,completedSteps:f}=e,g=!l&&c&&d&&m,h=d&&!l&&!u&&0===p.length;var b,E;return f>0&&s(o.i18n.translate("xpack.synthetics.monitorManagement.stepCompleted",{defaultMessage:"{stepCount, number} {stepCount, plural, one {step} other {steps}}  completed",values:{stepCount:null!=f?f:0}})),g&&s(to),h&&s(null!==(b=null==d||null===(E=d.error)||void 0===E?void 0:E.message)&&void 0!==b?b:Zs),h&&null!=d&&null!==(t=d.error)&&void 0!==t&&null!==(a=t.message)&&void 0!==a&&a.includes("journey did not finish executing"),r.a.createElement(n.Fragment,{key:"accordion-"+i})})))},Zs=o.i18n.translate("xpack.synthetics.monitorManagement.failedRun",{defaultMessage:"Failed to run steps"}),eo=o.i18n.translate("xpack.synthetics.monitorManagement.failedScheduling",{defaultMessage:"Failed to get any results back for manual test run."}),to=o.i18n.translate("xpack.synthetics.monitorManagement.loadingSteps",{defaultMessage:"Loading steps..."}),ao=({isBrowserMonitor:e,timestamp:t,ping:a})=>{var n;const{euiTheme:i}=Object(y.useEuiTheme)(),{basePath:s}=at(),o=Os(),l=Ba(),c=r.a.createElement(io,{size:"s",$_css:i.font.weight.medium},l(t));return e?r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsTestDetailsLinkLink",href:no({basePath:s,checkGroup:a.monitor.check_group,monitorId:null!==(n=null==a?void 0:a.config_id)&&void 0!==n?n:"",locationId:null==o?void 0:o.id})},c):c},no=({monitorId:e,basePath:t,checkGroup:a,locationId:n})=>`${t}/app/synthetics/monitor/${e}/test-run/${a}?locationId=${n}`,ro=({monitorId:e,checkGroup:t,locationId:a})=>`/monitor/${e}/test-run/${t}?locationId=${a}`;var io=G()(y.EuiText).withConfig({displayName:"_StyledEuiText",componentId:"sc-1jbe5jp-0"})((e=>({fontWeight:e.$_css})));const so=e=>e||0===e?Math.floor(e/1e3):null,oo=(e,{noSpace:t}={})=>{if(e<1e6)return t?o.i18n.translate("xpack.synthetics.overview.durationMsFormattingNoSpace",{values:{millis:so(e)},defaultMessage:"{millis}ms"}):o.i18n.translate("xpack.synthetics.overview.durationMsFormatting",{values:{millis:so(e)},defaultMessage:"{millis} ms"});const a=(e/1e6).toFixed(0);return t?o.i18n.translate("xpack.synthetics.overview.durationSecondsFormattingNoSpace",{values:{seconds:a},defaultMessage:"{seconds}s"}):o.i18n.translate("xpack.synthetics.overview.durationSecondsFormatting",{values:{seconds:a},defaultMessage:"{seconds} s"})};function lo({checkGroupId:e,title:t,summaryDocs:a,journeyStarted:r,isCompleted:i,configId:s}){var l,c,u,d,m;const{basePath:p}=at();let f=0;a&&a.length>0&&a.forEach((e=>{var t,a;f+=null!==(t=null===(a=e.monitor.duration)||void 0===a?void 0:a.us)&&void 0!==t?t:0}));const{getLocationByLabel:g}=_e(),h=null==a?void 0:a[0];return n.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},n.createElement(y.EuiFlexItem,{grow:!1},n.createElement(y.EuiTitle,{size:"xs"},n.createElement("h3",null,null!=t?t:uo))),n.createElement(y.EuiFlexItem,{grow:!0},i?n.createElement(y.EuiFlexGroup,{alignItems:"center"},n.createElement(y.EuiFlexItem,{grow:!1},n.createElement(ho,{color:(null==h||null===(l=h.summary)||void 0===l?void 0:l.down)>0?"danger":"success"},(null==h||null===(c=h.summary)||void 0===c?void 0:c.down)>0?po:mo)),n.createElement(y.EuiFlexItem,null,n.createElement(y.EuiText,{size:"xs",color:"subdued"},o.i18n.translate("xpack.synthetics.monitorManagement.timeTaken",{defaultMessage:"Took {timeTaken}",values:{timeTaken:oo(f)}})))):n.createElement(y.EuiFlexGroup,{alignItems:"center"},n.createElement(y.EuiFlexItem,{grow:!1},n.createElement(y.EuiBadge,{style:{width:100},color:r?"primary":"warning"},r?fo:co)),n.createElement(y.EuiFlexItem,null,n.createElement(y.EuiLoadingSpinner,null)))),e&&s&&i&&n.createElement(y.EuiFlexItem,{grow:!1},n.createElement(y.EuiLink,{"data-test-subj":"syntheticsTestResultHeaderLink",href:no({basePath:p,monitorId:s,checkGroup:e,locationId:null===(u=g(null==h||null===(d=h.observer)||void 0===d||null===(m=d.geo)||void 0===m?void 0:m.name))||void 0===u?void 0:u.id})},go)))}const co=o.i18n.translate("xpack.synthetics.monitorManagement.pending",{defaultMessage:"PENDING"}),uo=o.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),mo=o.i18n.translate("xpack.synthetics.monitorManagement.completed",{defaultMessage:"COMPLETED"}),po=o.i18n.translate("xpack.synthetics.monitorManagement.failed",{defaultMessage:"FAILED"}),fo=o.i18n.translate("xpack.synthetics.monitorManagement.inProgress",{defaultMessage:"IN PROGRESS"}),go=o.i18n.translate("xpack.synthetics.monitorManagement.viewTestRunDetails",{defaultMessage:"View test result details"});var ho=G()(y.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-pb4awg-0"})({maxWidth:"max-content"});const bo=({checkGroup:e,timestamp:t,title:a,summaryMessage:n,hideTitle:i=!1,pageSize:s=5})=>{const o=[{field:"@timestamp",name:Eo,sortable:!0,render:e=>Object(y.formatDate)(e,"dateTime")},{field:"synthetics.type",name:vo,sortable:!0},{field:"synthetics.payload.message",name:"Message",render:e=>r.a.createElement(y.EuiHighlight,{search:e.includes("SyntaxError:")?"SyntaxError:":"ReferenceError:"},e)}],{items:l,loading:u}=(({checkGroup:e})=>{var t;const{data:a,loading:n}=Object(f.useEsSearch)(Object(f.createEsParams)({index:e?c.A:"",body:{size:1e3,query:{bool:{filter:[{terms:{"synthetics.type":["stderr","stdout"]}},...e?[{term:{"monitor.check_group":e}}]:[]]}}}}),[],{name:"getStdErrLogs"});return{items:null!==(t=null==a?void 0:a.hits.hits.map((e=>({...e._source,id:e._id}))))&&void 0!==t?t:[],loading:n}})({checkGroup:e}),{discover:d,exploratoryView:m}=Object(p.useKibana)().services,{data:g}=Object(f.useFetcher)((async()=>{var a;const n=await m.getAppDataView("synthetics",c.A);return null===(a=d.locator)||void 0===a?void 0:a.getUrl({query:{language:"kuery",query:`monitor.check_group: ${e}`},indexPatternId:null==n?void 0:n.id,columns:["synthetics.payload.message","error.message"],timeRange:t?{from:$()(t).subtract(10,"minutes").toISOString(),to:$()(t).add(5,"minutes").toISOString()}:void 0})}),[e,t,d,m]);return r.a.createElement(r.a.Fragment,null,!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"s"},r.a.createElement("h3",null,null!=a?a:So))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsStdErrorLogsLink"},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStdErrorLogsButton",href:g,iconType:"discoverApp",isDisabled:!g},xo)))),n&&r.a.createElement(y.EuiCallOut,{title:yo,color:"danger",iconType:"warning"},r.a.createElement("p",null,n))),r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiInMemoryTable,{items:l,rowHeader:"@timestamp",columns:o,tableLayout:"auto",loading:u,search:{box:{incremental:!0}},itemId:"id",executeQueryOptions:{defaultFields:["@timestamp","synthetics.payload.message"]},pagination:{pageSize:s,pageSizeOptions:[2,5,10,20,50]}}))},Eo=o.i18n.translate("xpack.synthetics.monitorList.timestamp",{defaultMessage:"Timestamp"}),vo=o.i18n.translate("xpack.synthetics.monitorList.type",{defaultMessage:"Type"}),yo=o.i18n.translate("xpack.synthetics.monitorList.errorSummary",{defaultMessage:"Error summary"}),xo=o.i18n.translate("xpack.synthetics.monitorList.viewInDiscover",{defaultMessage:"View in discover"}),So=o.i18n.translate("xpack.synthetics.monitorList.testRunLogs",{defaultMessage:"Test run logs"}),ko=({expectPings:e,onDone:t,testRunId:a})=>{const{euiTheme:r}=Object(y.useEuiTheme)(),{retriesExceeded:i,summariesLoading:s,expectedSummariesLoaded:o,stepLoadingInProgress:l,checkGroupResults:c}=Xs({testRunId:a,expectSummaryDocs:e});return Object(n.useEffect)((()=>{o&&t(a)}),[t,o,a]),i?n.createElement(y.EuiCallOut,{title:eo,color:"danger",iconType:"alert"}):n.createElement(n.Fragment,null,c.map((e=>{var t,a,i,o,u;const{checkGroupId:d,journeyStarted:m,summaryDoc:p,stepsLoading:f,steps:g,completedSteps:h}=e,b=!s&&m&&p&&f,E=p&&!s&&!l&&0===g.length,v="down"===(null==p||null===(t=p.monitor)||void 0===t?void 0:t.status);return n.createElement(Mo,{key:"accordion-"+d,id:"accordion-"+d,element:"fieldset",borders:"horizontal",buttonProps:{paddingSize:"m"},buttonContent:wo(e),paddingSize:"s","data-test-subj":"expandResults",initialIsOpen:1===c.length},b&&n.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},n.createElement(y.EuiFlexItem,{grow:!1},n.createElement(y.EuiText,null,Co)),n.createElement(y.EuiFlexItem,null,n.createElement(y.EuiLoadingSpinner,{size:"s"}))),(E||v)&&n.createElement(y.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",style:{marginTop:r.base,marginBottom:r.base,borderRadius:r.border.radius.medium,fontWeight:r.font.weight.semiBold},title:Oo,size:"s",color:"danger",iconType:"warning"},n.createElement(y.EuiText,{color:"danger"},null!==(a=null==p||null===(i=p.error)||void 0===i?void 0:i.message)&&void 0!==a?a:To)),(E||v)&&(null==p||null===(o=p.error)||void 0===o||null===(u=o.message)||void 0===u?void 0:u.includes("journey did not finish executing"))&&n.createElement(bo,{checkGroup:p.monitor.check_group,hideTitle:0===h,pageSize:0===h?5:2}),h>0&&n.createElement(n.Fragment,null,n.createElement(y.EuiTitle,{size:"xxxs"},n.createElement("h3",null,Io)),n.createElement(Ns,{steps:g,loading:Boolean(l),error:void 0,showStepNumber:!0,compressed:!0,testNowMode:!0,showLastSuccessful:!1})))})))},Mo=G()(y.EuiAccordion).withConfig({displayName:"AccordionWrapper",componentId:"sc-2nljrg-0"})([".euiAccordion__buttonContent{width:100%;}"]);function wo({journeyDoc:e,summaryDoc:t,checkGroupId:a,journeyStarted:r,completedSteps:i}){var s,l;return n.createElement("div",null,n.createElement(lo,{title:null==e||null===(s=e.observer)||void 0===s||null===(l=s.geo)||void 0===l?void 0:l.name,summaryDocs:t?[t]:[],checkGroupId:a,journeyStarted:r,isCompleted:Boolean(t),configId:null==e?void 0:e.config_id}),n.createElement(y.EuiText,{size:"s"},n.createElement("p",null,n.createElement(y.EuiText,{color:"subdued"},o.i18n.translate("xpack.synthetics.monitorManagement.stepCompleted",{defaultMessage:"{stepCount, number} {stepCount, plural, one {step} other {steps}}  completed",values:{stepCount:null!=i?i:0}})))))}const To=o.i18n.translate("xpack.synthetics.monitorManagement.failedRun",{defaultMessage:"Failed to run steps"}),Oo=o.i18n.translate("xpack.synthetics.testRun.testErrorLabel",{defaultMessage:"Error running test"}),Co=o.i18n.translate("xpack.synthetics.monitorManagement.loadingSteps",{defaultMessage:"Loading steps..."}),Io=o.i18n.translate("xpack.synthetics.monitorManagement.steps",{defaultMessage:"Steps"}),jo=({expectSummaryDocs:e,testRunId:t})=>{const{refreshTimer:a,lastRefresh:r}=Mr(2e3),[i,s]=Object(n.useState)(0),{data:o,loading:l}=Object(f.useEsSearch)(Object(f.createEsParams)({index:c.A,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[Le.c,{term:{test_run_id:t}}]}}},size:1e3}),[t,r],{name:"TestRunData"}),u=Object(n.useRef)({checksum:"",time:Date.now()});return Object(n.useEffect)((()=>{var e;0===(null!==(e=null==o?void 0:o.hits.hits)&&void 0!==e?e:[]).length&&s((e=>e+1))}),[o]),Object(n.useMemo)((()=>{var t;const n=null!==(t=null==o?void 0:o.hits.hits)&&void 0!==t?t:[],r=n.map((({_id:e})=>e)).reduce(((e,t)=>e+t),"");return r!==u.current.checksum&&(u.current.checksum=r,u.current.time=Date.now()),n.length>0?(n.length>=e&&clearInterval(a),{data:o,loading:l,summaryDocs:n.map((e=>{var t;return{...e._source,timestamp:null===(t=e._source)||void 0===t?void 0:t["@timestamp"],docId:e._id}})),lastUpdated:u.current.time}):{retriesExceeded:i>50,data:o,loading:l,summaryDocs:null,lastUpdated:u.current.time}}),[o,i,l,e,a])},_o=e=>{const[t,a]=Object(n.useState)({}),r=JSON.stringify(Object.keys(t).filter((t=>!e.some((({docId:e})=>e===t)))));return Object(n.useEffect)((()=>{const e=JSON.parse(r);e.length&&(e.forEach((e=>{delete t[e]})),a(t))}),[r,t]),{expandedRows:t,setExpandedRows:a}},Fo=o.i18n.translate("xpack.synthetics.pingList.statusColumnLabel",{defaultMessage:"Status"}),Po=o.i18n.translate("xpack.synthetics.pingList.responseCodeColumnLabel",{defaultMessage:"Response code"}),Lo=(o.i18n.translate("xpack.synthetics.pingList.errorTypeColumnLabel",{defaultMessage:"Error type"}),o.i18n.translate("xpack.synthetics.pingList.errorColumnLabel",{defaultMessage:"Error"})),Ro=o.i18n.translate("xpack.synthetics.pingList.locationNameColumnLabel",{defaultMessage:"Location"}),Do=(o.i18n.translate("xpack.synthetics.pingList.timestampColumnLabel",{defaultMessage:"Timestamp"}),o.i18n.translate("xpack.synthetics.monitorList.table.url.name",{defaultMessage:"Url"}),o.i18n.translate("xpack.synthetics.monitorList.table.tags.name",{defaultMessage:"Tags"}),o.i18n.translate("xpack.synthetics.monitorList.table.project.name",{defaultMessage:"Project ID"}),o.i18n.translate("xpack.synthetics.monitorList.statusColumn.upLabel",{defaultMessage:"Up"})),Ao=o.i18n.translate("xpack.synthetics.monitorList.statusColumn.downLabel",{defaultMessage:"Down"}),No=(o.i18n.translate("xpack.synthetics.monitorList.statusColumn.completeLabel",{defaultMessage:"Complete"}),o.i18n.translate("xpack.synthetics.monitorList.statusColumn.failedLabel",{defaultMessage:"Failed"}),o.i18n.translate("xpack.synthetics.seconds.label",{defaultMessage:"seconds"}),o.i18n.translate("xpack.synthetics.seconds.shortForm.label",{defaultMessage:"sec"}),o.i18n.translate("xpack.synthetics.millisecond.abbreviation.label",{defaultMessage:"ms"}),({pingStatus:e,item:t})=>{const a=$()(t.timestamp);let n="";return n=$()().diff(a,"d")>1?a.format("ll LTS"):a.format("LTS"),r.a.createElement("div",{"data-test-subj":`xpack.synthetics.pingList.ping-${t.docId}`},r.a.createElement(y.EuiBadge,{className:"eui-textCenter",color:e===c.y.UP?"success":"danger"},"up"===e?Do:Ao),r.a.createElement(y.EuiSpacer,{size:"xs"}),r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},o.i18n.translate("xpack.synthetics.pingList.recencyMessage",{values:{fromNow:n},defaultMessage:"Checked {fromNow}",description:"A string used to inform our users how long ago Heartbeat pinged the selected host."})))}),zo=G.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-1v0zj2v-0"})(["display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;"]),Bo=({errorType:e,ping:t})=>{var a;return e?r.a.createElement(zo,null,e,":",null===(a=t.error)||void 0===a?void 0:a.message):r.a.createElement(r.a.Fragment,null,"--")},Ho=G.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-qsuj61-0"})(["margin-right:16px;"]),Go=({statusCode:e})=>r.a.createElement(Ho,null,e?r.a.createElement(y.EuiBadge,{"data-test-subj":"pingResponseCode"},e):"--"),Vo=G()(y.EuiListGroup).withConfig({displayName:"ListGroup",componentId:"sc-1ntex8s-0"})(["&&&{a{padding-left:0;}}"]),$o=({monitorStatus:e,showTitle:t})=>{var a,n,i,s;const l=null==e||null===(a=e.url)||void 0===a?void 0:a.full,c=null==e||null===(n=e.http)||void 0===n||null===(i=n.response)||void 0===i?void 0:i.redirects,u=[{label:l,href:l,iconType:"globe",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s",alwaysShow:!0,"aria-label":o.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."})}}];(null!=c?c:[]).forEach((e=>{u.push({label:e,href:e,iconType:"sortDown",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s","aria-label":o.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."}),alwaysShow:!0}})}));const d=t?y.EuiPanel:"div";return c?r.a.createElement(d,{"data-test-subj":"uptimeMonitorPingListRedirectInfo"},t&&r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.monitorList.redirects.title",{defaultMessage:"Redirects"}))),r.a.createElement(y.EuiSpacer,{size:"xs"}),r.a.createElement(y.EuiText,null,o.i18n.translate("xpack.synthetics.monitorList.redirects.description",{defaultMessage:"Heartbeat followed {number} redirects while executing ping.",values:{number:null!==(s=null==c?void 0:c.length)&&void 0!==s?s:0}})),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(Vo,{gutterSize:"none",listItems:u})):null},Uo=({headers:e})=>{const t=Object.keys(e).sort().map((t=>({title:t,description:e[t]})));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiAccordion,{id:"responseHeaderAccord",buttonContent:r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.pingList.headers.title",{defaultMessage:"Response headers"})))},r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiDescriptionList,{compressed:!0,type:"responsiveColumn",listItems:t})))},qo=({body:e})=>{const t=e.content_bytes||0,a=e.bytes||0,n=[t>0&&t<a?o.i18n.translate("xpack.synthetics.pingList.expandedRow.truncated",{defaultMessage:"Showing first {contentBytes} bytes.",values:{contentBytes:t}}):null,a>0?o.i18n.translate("xpack.synthetics.pingList.expandedRow.bodySize",{defaultMessage:"Body size is {bodyBytes}.",values:{bodyBytes:Object(y.formatNumber)(a,"0b")}}):null].filter((e=>e)).join(" ");return r.a.createElement(y.EuiText,null,n)},Wo=({content:e})=>e?r.a.createElement(y.EuiCodeBlock,{overflowHeight:250},e):null,Ko=({ping:e})=>{var t,a,n,i,s,l,c,u;const d=[];if(e.error&&d.push({title:o.i18n.translate("xpack.synthetics.pingList.expandedRow.error",{defaultMessage:"Error"}),description:r.a.createElement(y.EuiText,null,e.error.message)}),null!==(t=e.http)&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&a.body){const t=e.http.response.body;d.push({title:o.i18n.translate("xpack.synthetics.pingList.expandedRow.response_body",{defaultMessage:"Response Body"}),description:r.a.createElement(r.a.Fragment,null,r.a.createElement(qo,{body:t}),r.a.createElement(y.EuiSpacer,{size:"s"}),t.content?r.a.createElement(Wo,{content:t.content||""}):r.a.createElement(y.EuiText,null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.testResults.expandedRow.response_body.notRecorded",defaultMessage:'Body not recorded. Set index response body option to "On Always" in advanced options of monitor configuration to record body.'})))})}return r.a.createElement(y.EuiFlexGroup,{direction:"column"},(null==e||null===(n=e.http)||void 0===n||null===(i=n.response)||void 0===i?void 0:i.redirects)&&r.a.createElement(y.EuiFlexItem,null,r.a.createElement($o,{monitorStatus:e,showTitle:!0})),(null==e||null===(s=e.http)||void 0===s||null===(l=s.response)||void 0===l?void 0:l.headers)&&r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Uo,{headers:null==e||null===(c=e.http)||void 0===c||null===(u=c.response)||void 0===u?void 0:u.headers})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiCallOut,{color:null!=e&&e.error?"danger":"primary"},r.a.createElement(y.EuiDescriptionList,{listItems:d}))))},Yo=(e,t,a)=>{if(Xo(e))return t[e.docId]?(delete t[e.docId],void a({...t})):void a({...t,[e.docId]:r.a.createElement(Ko,{ping:e})})};function Xo(e){var t,a,n,r,i,s,o,l;const c=!!e.error,u=null!==(t=null===(a=e.http)||void 0===a||null===(n=a.response)||void 0===n||null===(r=n.body)||void 0===r?void 0:r.bytes)&&void 0!==t&&t;return c||u||(null==e||null===(i=e.http)||void 0===i||null===(s=i.response)||void 0===s?void 0:s.headers)||(null==e||null===(o=e.http)||void 0===o||null===(l=o.response)||void 0===l?void 0:l.redirects)}const Jo=({item:e,expandedRows:t,setExpandedRows:a})=>r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"uptimePingListExpandBtn",onClick:n=>{n.stopPropagation(),Yo(e,t,a)},isDisabled:!Xo(e),"aria-label":t[e.docId]?o.i18n.translate("xpack.synthetics.pingList.collapseRow",{defaultMessage:"Collapse"}):o.i18n.translate("xpack.synthetics.pingList.expandRow",{defaultMessage:"Expand"}),iconType:t[e.docId]?"arrowUp":"arrowDown"});function Qo({loading:e,error:t,pings:a,onChange:n}){const{expandedRows:i,setExpandedRows:s}=_o(a),l=a.reduce(((e,t)=>{var a,n;return e||!(null===(a=t.http)||void 0===a||null===(n=a.response)||void 0===n||!n.status_code)}),!1),c=a.reduce(((e,t)=>{var a;return e||!(null===(a=t.error)||void 0===a||!a.type)}),!1),u=[{field:"monitor.status",name:Fo,render:(e,t)=>r.a.createElement(No,{pingStatus:e,item:t})},{align:"left",field:"observer.geo.name",name:Ro},{align:"right",field:"monitor.ip",name:o.i18n.translate("xpack.synthetics.pingList.ipAddressColumnLabel",{defaultMessage:"IP"})},{align:"center",field:"monitor.duration.us",name:o.i18n.translate("xpack.synthetics.pingList.durationMsColumnLabel",{defaultMessage:"Duration"}),render:e=>e?oo(e):r.a.createElement("span",{"data-test-subj":"ping-list-duration-unavailable-tool-tip"},"--")},...c?[{field:"error.type",name:Lo,width:"30%",render:(e,t)=>r.a.createElement(Bo,{ping:t,errorType:e})}]:[],...l?[{field:"http.response.status_code",align:"right",name:r.a.createElement(Zo,null,Po),render:e=>r.a.createElement(Go,{statusCode:e})}]:[],{align:"right",width:"24px",isExpander:!0,render:e=>r.a.createElement(Jo,{item:e,expandedRows:i,setExpandedRows:s})}];return r.a.createElement(y.EuiBasicTable,{loading:e,columns:u,error:null==t?void 0:t.message,items:a,itemId:"docId",itemIdToExpandedRowMap:i,noItemsMessage:e?o.i18n.translate("xpack.synthetics.pingList.pingsLoadingMesssage",{defaultMessage:"Loading history..."}):o.i18n.translate("xpack.synthetics.pingList.pingsUnavailableMessage",{defaultMessage:"No history found"}),tableLayout:"auto",onChange:n})}const Zo=G.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-1mq6i5u-0"})(["margin-right:16px;"]);function el({testRunId:e,expectPings:t,onDone:a}){const[i,s]=Object(n.useState)([]),{summaryDocs:o,loading:l}=jo({testRunId:e,expectSummaryDocs:t});return Object(n.useEffect)((()=>{o&&(s((e=>{const t=e.reduce(((e,t)=>({...e,[t.docId]:t})),{});return o.map((e=>{var a;return{...e,...null!==(a=t[e.docId])&&void 0!==a?a:{}}}))})),o.length>=t&&a(e))}),[e,t,o,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(lo,{summaryDocs:i,isCompleted:Boolean(o&&o.length>=t)}),o&&r.a.createElement(Qo,{pings:i,loading:l}))}function tl({testRun:e,onDone:t,isPushing:a,serviceError:i,errors:s}){var o;const{hasBlockingError:l,blockingErrorTitle:c,blockingErrorMessage:u,expectPings:d}=vr({testRunId:e.id,serviceError:i,errors:null!=s?s:[],locations:null!==(o=e.monitor.locations)&&void 0!==o?o:[]});Object(n.useEffect)((()=>{a||e.id&&!l||t(e.id)}),[e.id,l,a]);const m="browser"===e.monitor.type;return r.a.createElement(y.EuiPanel,{color:"subdued",hasBorder:!0},l&&!a&&r.a.createElement(y.EuiCallOut,{title:c,color:"danger",iconType:"warning"},u)||null,e&&!l&&!a&&r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,{key:e.id},m?r.a.createElement(ko,{expectPings:d,onDone:t,testRunId:e.id}):r.a.createElement(el,{expectPings:d,onDone:t,testRunId:e.id}))),r.a.createElement(y.EuiSpacer,{size:"xs"}))}function al({name:e,testRun:t,onClose:a,onDone:n,inProgress:i,isPushing:s,errors:o,serviceError:l}){const c=r.a.createElement(y.EuiFlyout,{type:"push",size:"m",paddingSize:"m",maxWidth:"44%","aria-labelledby":nl,onClose:a},r.a.createElement(y.EuiFlyoutHeader,null,r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h2",null,e,"-",rl))),r.a.createElement(y.EuiFlyoutBody,null,r.a.createElement(y.EuiErrorBoundary,null,s&&r.a.createElement(y.EuiCallOut,{color:"primary"},sl," ",r.a.createElement(y.EuiLoadingSpinner,null)),t?r.a.createElement(tl,{isPushing:s,errors:o,serviceError:l,testRun:t,onDone:n}):!s&&r.a.createElement(dr,null))),r.a.createElement(y.EuiFlyoutFooter,null,r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsTestNowModeFlyoutButton",iconType:"cross",onClick:a,flush:"left"},il)));return r.a.createElement(r.a.Fragment,null,(t||i)&&r.a.createElement(y.EuiErrorBoundary,null,c))}const nl=o.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),rl=o.i18n.translate("xpack.synthetics.monitorManagement.testResults",{defaultMessage:"Test results"}),il=o.i18n.translate("xpack.synthetics.monitorManagement.closeButtonLabel",{defaultMessage:"Close"}),sl=o.i18n.translate("xpack.synthetics.testRun.pushing.description",{defaultMessage:"Pushing the monitor to service..."});function ol({name:e,testRunId:t,expectPings:a,onDone:i}){const{summaryDocs:s,retriesExceeded:o}=jo({testRunId:t,expectSummaryDocs:a});return Object(n.useEffect)((()=>{if(o){const{core:a,toasts:n}=N.a;n.addDanger({text:eo,title:Object(kr.a)(r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.manualTestRun.failedTest.name",defaultMessage:"Manual test run failed for {name}",values:{name:e}}),a)},{toastLifeTimeMs:1e4}),i(t)}}),[e,i,o,t]),Object(n.useEffect)((()=>{s&&s.length>=a&&i(t)}),[t,a,s,i]),r.a.createElement(r.a.Fragment,null)}function ll({manualTestRun:e,onDone:t}){var a,i;const{expectPings:s}=vr({testRunId:e.testRunId,locations:null!==(a=e.monitor.locations)&&void 0!==a?a:[],errors:null!==(i=e.errors)&&void 0!==i?i:[]});if(!e.testRunId||!e.monitor)return null;const o="browser"===e.monitor.type;return r.a.createElement(n.Fragment,{key:e.testRunId},o?r.a.createElement(Qs,{name:e.monitor.name,expectPings:s,onDone:t,testRunId:e.testRunId,onProgress:()=>{}}):r.a.createElement(ol,{name:e.monitor.name,expectPings:s,onDone:t,testRunId:e.testRunId}))}function cl(){var e;const t=Object(u.useDispatch)(),a=Object(u.useSelector)(Lt.i),{refreshApp:i}=X(),s=Rt(),o=Object(n.useCallback)((e=>{t(Object(Lt.g)({testRunId:e,status:Lt.a.COMPLETED})),i()}),[t,i]),l=Object(n.useCallback)((e=>{t(Object(Lt.g)({testRunId:e,isTestNowFlyoutOpen:!1}))}),[t]),c=Object(n.useMemo)((()=>null!=s&&s.testRunId&&null!=s&&s.monitor?{id:s.testRunId,monitor:s.monitor,name:s.name}:void 0),[s]),d=s&&c?r.a.createElement(al,{testRun:c,name:s.name,inProgress:"in-progress"===s.status||"loading"===s.status,onClose:()=>l(s.testRunId),onDone:o,isPushing:"loading"===s.status,errors:null!==(e=s.errors)&&void 0!==e?e:[]}):null;return r.a.createElement(r.a.Fragment,null,Object.values(a).filter((e=>e.testRunId&&("in-progress"===e.status||"loading"===e.status))).map((e=>r.a.createElement(ll,{key:e.testRunId,manualTestRun:e,onDone:o}))),d)}const ul=Object(n.createContext)({}),dl=({children:e,dataViews:t})=>{const{data:a}=Object(f.useFetcher)((async()=>t.create({title:c.A})),[t]);return r.a.createElement(ul.Provider,{value:a,children:e})},ml={services:{}},pl=Object(n.createContext)(ml);var fl=a(159),gl=a.n(fl);const hl=({children:e,component:t,render:a,...i})=>{const s=Object(n.useMemo)((()=>{if(t)return e=>Object(w.jsx)(r.a.Fragment,null,Object(w.jsx)(bl,null),Object(w.jsx)(t,e))}),[t]);if(s)return Object(w.jsx)(R.Route,b()({},i,{component:s}));if(a||"function"==typeof e){const t="function"==typeof e?e:a;return Object(w.jsx)(R.Route,b()({},i,{render:e=>Object(w.jsx)(r.a.Fragment,null,Object(w.jsx)(bl,null),t(e))}))}return Object(w.jsx)(R.Route,i,Object(w.jsx)(bl,null),e)},bl=()=>{const{executionContext:e}=Object(n.useContext)(pl).services,t=Object(R.useRouteMatch)();return function(e,t){gl()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},El=({legacySwitch:e=!0,children:t})=>{const a=Object(R.useRouteMatch)();return e?Object(w.jsx)(R.Switch,null,t):Object(w.jsx)(D.Routes,null,n.Children.map(t,(e=>{if(r.a.isValidElement(e)&&e.type===hl){var n;const i=Object(ln.replace)(null==e?void 0:e.props.path,a.url+"/",""),s="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(w.jsx)(D.Route,{path:i,element:Object(w.jsx)(r.a.Fragment,null,Object(w.jsx)(bl,null),(null==e||null===(n=e.props)||void 0===n?void 0:n.component)&&Object(w.jsx)(e.props.component,null)||s&&s()||t)})}return e})))};var vl,yl=(vl=function(e,t){return vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])},vl(e,t)},function(e,t){function a(){this.constructor=e}vl(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),xl="html",Sl="svg",kl=function(e,t){var a,n,r,i={};if(e===xl)r=document.createElement("div");else{if(e!==Sl)throw new Error('Invalid element type "'+e+'" for createPortalNode: must be "html" or "svg".');r=document.createElementNS("http://www.w3.org/2000/svg","g")}if(t&&"object"==typeof t)for(var s=0,o=Object.entries(t.attributes);s<o.length;s++){var l=o[s],c=l[0],u=l[1];r.setAttribute(c,u)}var d={element:r,elementType:e,setPortalProps:function(e){i=e},getInitialPortalProps:function(){return i},mount:function(t,r){if(r!==n){if(d.unmount(),t!==a&&!function(e,t){if(t===xl)return e instanceof HTMLElement;if(t===Sl)return e instanceof SVGElement;throw new Error('Unrecognized element type "'+t+'" for validateElementType.')}(t,e))throw new Error('Invalid element type for portal: "'+e+'" portalNodes must be used with '+e+" elements, but OutPortal is within <"+t.tagName+">.");t.replaceChild(d.element,r),a=t,n=r}},unmount:function(e){e&&e!==n||a&&n&&(a.replaceChild(n,d.element),a=void 0,n=void 0)}};return d},Ml=function(e){function t(t){var a=e.call(this,t)||this;return a.addPropsChannel=function(){Object.assign(a.props.node,{setPortalProps:function(e){a.setState({nodeProps:e})}})},a.state={nodeProps:a.props.node.getInitialPortalProps()},a}return yl(t,e),t.prototype.componentDidMount=function(){this.addPropsChannel()},t.prototype.componentDidUpdate=function(){this.addPropsChannel()},t.prototype.render=function(){var e=this,t=this.props,a=t.children,r=t.node;return i.createPortal(n.Children.map(a,(function(t){return n.isValidElement(t)?n.cloneElement(t,e.state.nodeProps):t})),r.element)},t}(n.PureComponent),wl=function(e){function t(t){var a=e.call(this,t)||this;return a.placeholderNode=n.createRef(),a.passPropsThroughPortal(),a}return yl(t,e),t.prototype.passPropsThroughPortal=function(){var e=Object.assign({},this.props,{node:void 0});this.props.node.setPortalProps(e)},t.prototype.componentDidMount=function(){var e=this.props.node;this.currentPortalNode=e;var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentDidUpdate=function(){var e=this.props.node;this.currentPortalNode&&e!==this.currentPortalNode&&(this.currentPortalNode.unmount(this.placeholderNode.current),this.currentPortalNode=e);var t=this.placeholderNode.current,a=t.parentNode;e.mount(a,t),this.passPropsThroughPortal()},t.prototype.componentWillUnmount=function(){this.props.node.unmount(this.placeholderNode.current)},t.prototype.render=function(){return n.createElement("div",{ref:this.placeholderNode})},t}(n.PureComponent),Tl=kl.bind(null,xl);kl.bind(null,Sl);const Ol=o.i18n.translate("sharedUXPackages.prompt.errors.notFound.title",{defaultMessage:"Page not found"}),Cl=o.i18n.translate("sharedUXPackages.prompt.errors.notFound.body",{defaultMessage:"Sorry, the page you're looking for can't be found. It might have been removed or renamed, or maybe it never existed at all."}),Il=o.i18n.translate("sharedUXPackages.prompt.errors.notFound.goBacklabel",{defaultMessage:"Go back"}),jl=({actions:e,title:t,body:r})=>{const{colorMode:i}=Object(y.useEuiTheme)(),[s,o]=Object(n.useState)(),l=Object(n.useCallback)((()=>history.back()),[]),c=Object(n.useMemo)((()=>[Object(w.jsx)(y.EuiButtonEmpty,{iconType:"arrowLeft",flush:"both",onClick:l},Il)]),[l]);Object(n.useEffect)((()=>{(async()=>{if("DARK"===i){const{default:e}=await a.e(7).then(a.t.bind(null,321,7));o(e)}else{const{default:e}=await a.e(8).then(a.t.bind(null,322,7));o(e)}})()}),[i]);const u=s?Object(w.jsx)(y.EuiImage,{src:s,alt:""}):null;return Object(w.jsx)(y.EuiEmptyPrompt,{color:"subdued",titleSize:"m",icon:u,title:"string"!=typeof t&&t?t:Object(w.jsx)("h2",null,null!=t?t:Ol),body:null!=r?r:Cl,actions:null!=e?e:c})};var _l=a(126);const Fl=()=>{const e=Object(u.useSelector)(_l.b);return r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.certificates.heading",defaultMessage:"TLS Certificates ({total})",values:{total:r.a.createElement("span",{"data-test-subj":"uptimeCertTotal"},null!=e?e:0)}})},Pl=o.i18n.translate("xpack.synthetics.certs.ok",{defaultMessage:"OK"}),Ll=o.i18n.translate("xpack.synthetics.certs.expired",{defaultMessage:"Expired"}),Rl=o.i18n.translate("xpack.synthetics.certs.expireSoon",{defaultMessage:"Expires soon"}),Dl=(o.i18n.translate("xpack.synthetics.certs.expires",{defaultMessage:"Expires"}),o.i18n.translate("xpack.synthetics.certs.searchCerts",{defaultMessage:"Search certificates"})),Al=o.i18n.translate("xpack.synthetics.certs.list.status",{defaultMessage:"Status"}),Nl=o.i18n.translate("xpack.synthetics.certs.list.status.old",{defaultMessage:"Too old"}),zl=o.i18n.translate("xpack.synthetics.certs.list.commonName",{defaultMessage:"Common name"}),Bl=o.i18n.translate("xpack.synthetics.certs.list.monitors",{defaultMessage:"Monitors"}),Hl=o.i18n.translate("xpack.synthetics.certs.list.issuedBy",{defaultMessage:"Issued by"}),Gl=o.i18n.translate("xpack.synthetics.certs.list.validUntil",{defaultMessage:"Valid until"}),Vl=o.i18n.translate("xpack.synthetics.certs.list.ageCol",{defaultMessage:"Age"}),$l=o.i18n.translate("xpack.synthetics.certs.list.days",{defaultMessage:"days"}),Ul=o.i18n.translate("xpack.synthetics.certs.list.expirationDate",{defaultMessage:"Fingerprints"}),ql=o.i18n.translate("xpack.synthetics.certs.list.copyFingerprint",{defaultMessage:"Click to copy fingerprint value"}),Wl=o.i18n.translate("xpack.synthetics.certs.list.noCerts",{defaultMessage:"No Certificates found."}),Kl=o.i18n.translate("xpack.synthetics.certificates.loading",{defaultMessage:"Loading certificates ..."}),Yl=o.i18n.translate("xpack.synthetics.certificates.refresh",{defaultMessage:"Refresh"}),Xl=(o.i18n.translate("xpack.synthetics.settingsBreadcrumbText",{defaultMessage:"Settings"}),o.i18n.translate("xpack.synthetics.settings.cannotEditTitle",{defaultMessage:"You do not have permission to edit settings."}),o.i18n.translate("xpack.synthetics.settings.cannotEditText",{defaultMessage:"Your user currently has 'Read' permissions for the Uptime app. Enable a permissions-level of 'All' to edit these settings."}),o.i18n.translate("xpack.synthetics.settings.blankNumberField.error",{defaultMessage:"Must be a number."}),o.i18n.translate("xpack.synthetics.settings.blank.error",{defaultMessage:"May not be blank."}),o.i18n.translate("xpack.synthetics.settings.noSpace.error",{defaultMessage:"Index names must not contain space"}),()=>{const{refreshApp:e}=Object(n.useContext)(K);return r.a.createElement(y.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1,"data-test-subj":"certificatesRefreshButton"},r.a.createElement(y.EuiFlexGroup,{responsive:!1,gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiHideFor,{sizes:["xs"]},r.a.createElement(y.EuiButton,{fill:!0,iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"},Yl)),r.a.createElement(y.EuiShowFor,{sizes:["xs"]},r.a.createElement(y.EuiButtonEmpty,{iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"})))))}),Jl=({unprivilegedIndices:e})=>r.a.createElement(y.EuiEmptyPrompt,{"data-test-subj":"syntheticsUnprivileged",color:"plain",icon:r.a.createElement(y.EuiIcon,{type:"logoObservability",size:"xl"}),title:r.a.createElement("h2",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.noFindingsStates.unprivileged.unprivilegedTitle",defaultMessage:"Privileges required"})),body:r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.noFindingsStates.unprivileged.unprivilegedDescription",defaultMessage:"To view Synthetics monitors data, you must update privileges. For more information, contact your Kibana administrator."})),footer:r.a.createElement(Zl,{children:o.i18n.translate("xpack.synthetics.noFindingsStates.unprivileged.unprivilegedFooterMarkdown",{defaultMessage:"Required Elasticsearch index privilege `read` for the following indices:"})+e.map((e=>`\n- \`${e}\``))})}),Ql=()=>{var e;const t=null===(e=Object(p.useKibana)().services.licenseManagement)||void 0===e?void 0:e.enabled,{basePath:a}=at();return r.a.createElement(y.EuiEmptyPrompt,{"data-test-subj":"syntheticsUnprivileged",iconType:"warning",iconColor:"warning",title:r.a.createElement("h2",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.license.invalidLicenseTitle",defaultMessage:"Invalid License"})),body:r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.license.invalidLicenseDescription",defaultMessage:"The Synthetics UI is not available because your current license has expired or is no longer valid."})),actions:[r.a.createElement(y.EuiButton,{"aria-label":o.i18n.translate("xpack.synthetics.invalidLicense.manageYourLicenseButton",{defaultMessage:"Navigate to license management"}),"data-test-subj":"apmInvalidLicenseNotificationManageYourLicenseButton",isDisabled:!t,href:a+"/app/management/stack/license_management"},o.i18n.translate("xpack.synthetics.invalidLicense.licenseManagementLink",{defaultMessage:"Manage your license"}))]})};var Zl=G()(y.EuiMarkdownFormat).withConfig({displayName:"_StyledEuiMarkdownFormat",componentId:"sc-1kj6zwe-0"})(["text-align:initial;"]);function ec(){const{refreshApp:e}=X();return r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsRefreshButtonButton",iconType:"refresh",onClick:()=>e()},tc)}const tc=o.i18n.translate("xpack.synthetics.overview.refresh",{defaultMessage:"Refresh"});function ac(e,t,a){switch(t){case"monitorTypes":return e.map((({label:e,count:t})=>{var a;return{label:null!==(a=nc[e])&&void 0!==a?a:e,count:t}}));case"schedules":return e.map((({label:e,count:t})=>({label:o.i18n.translate("xpack.synthetics.monitorFilters.frequencyLabel",{defaultMessage:"Every {count} minutes",values:{count:e}}),count:t})));case"locations":return e.map((({label:e,count:t})=>{var n;const r=a.find((({id:t,label:a})=>e===t||e===a));return{label:null!==(n=null==r?void 0:r.label)&&void 0!==n?n:e,count:t}}));default:return e}}const nc={[Ge.q.BROWSER]:"Journey / Page",[Ge.q.HTTP]:"HTTP",[Ge.q.TCP]:"TCP",[Ge.q.ICMP]:"ICMP"},rc=()=>{const e=Object(u.useDispatch)(),t=Object(u.useSelector)(q.K),{lastRefresh:a}=X();return Object(n.useEffect)((()=>{e(q.i.get())}),[a,e]),t};const ic=({filter:e,handleFilterChange:t,loading:a})=>{const{label:i,values:s,field:o}=e,[l,c]=Object(n.useState)(""),u=ac((d=ke()[o],Array.isArray(d)?d.map((e=>({label:e,count:0}))):d?[{label:d,count:0}]:[]),o,[]).map((({label:e})=>e));var d;return r.a.createElement(f.FieldValueSelection,{selectedValue:u,singleSelection:!1,label:i,values:l?s.filter((({label:e})=>e.toLowerCase().includes(l.toLowerCase()))):s,setQuery:c,onChange:e=>t(o,e),allowExclusions:!1,loading:a,asFilterButton:!0})},sc=(e,t)=>{let a=[];if("string"==typeof t&&t)a.push({label:t,count:0});else if(Array.isArray(t)){var n;a=null!==(n=null==t?void 0:t.map((e=>({label:e,count:0}))))&&void 0!==n?n:[]}const r=[...null!=e?e:[]];return a.forEach((e=>{r.find((t=>t.label===e.label))||r.push(e)})),r},oc=({handleFilterChange:e})=>{var t;const a=rc(),{locations:n}=Object(u.useSelector)(q.X),i=ke(),s=[{label:lc,field:"monitorTypes",values:ac(sc(null==a?void 0:a.monitorTypes,i.monitorTypes),"monitorTypes",n)},{label:uc,field:"locations",values:ac(sc(null==a?void 0:a.locations.map((e=>{const t=n.find((t=>t.id===e.label));return{label:t?t.label:e.label,count:e.count}})),i.locations),"locations",n)},{label:dc,field:"tags",values:ac(sc(null==a?void 0:a.tags,i.tags),"tags",n)},{label:mc,field:"schedules",values:ac(sc(null==a?void 0:a.schedules,i.schedules),"schedules",n)}];return((null==a||null===(t=a.projects)||void 0===t?void 0:t.length)||0)>0&&s.push({label:cc,field:"projects",values:ac(sc(null==a?void 0:a.projects,i.projects),"projects",n)}),r.a.createElement(y.EuiFilterGroup,null,s.map(((t,n)=>r.a.createElement(ic,{key:n,filter:t,handleFilterChange:e,loading:!a}))))},lc=o.i18n.translate("xpack.synthetics.monitorManagement.filter.typeLabel",{defaultMessage:"Type"}),cc=o.i18n.translate("xpack.synthetics.monitorManagement.filter.projectLabel",{defaultMessage:"Project"}),uc=o.i18n.translate("xpack.synthetics.monitorManagement.filter.locationLabel",{defaultMessage:"Location"}),dc=o.i18n.translate("xpack.synthetics.monitorManagement.filter.tagsLabel",{defaultMessage:"Tags"}),mc=o.i18n.translate("xpack.synthetics.monitorManagement.filter.frequencyLabel",{defaultMessage:"Frequency"});var pc=a(51),fc=a.n(pc);const gc=()=>{const{monitor:e}=Ts();return null==e?void 0:e[Ge.c.MONITOR_QUERY_ID]},hc=({from:e,to:t})=>{var a,i;const[s,o]=Object(n.useState)(!1),{monitor:l}=Ts(),c=gc(),{alertStatus:u,updateAlertEnabledState:d}=kn(),m=bc({rangeFrom:e,rangeTo:t,monitorId:c});if(!l)return r.a.createElement(y.EuiSkeletonText,{lines:1});const p=null===(a=l.alert)||void 0===a||null===(i=a.status)||void 0===i?void 0:i.enabled,g=u(l[Ge.c.CONFIG_ID])===f.FETCH_STATUS.LOADING;const h=[r.a.createElement(y.EuiContextMenuItem,{key:"edit",icon:p?"bellSlash":"bell",onClick:()=>{d({monitor:{[Ge.c.ALERT_CONFIG]:Object(Sn.c)(l[Ge.c.ALERT_CONFIG])},name:l[Ge.c.NAME],configId:l[Ge.c.CONFIG_ID]})},disabled:g},p?ba:ha," ",g&&r.a.createElement(y.EuiLoadingSpinner,null)),r.a.createElement(y.EuiContextMenuItem,{key:"share",icon:"list",href:m},vc)],b=r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsAlertActionsButton",iconType:"arrowDown",iconSide:"right",onClick:()=>{o(!s)}},Ec);return r.a.createElement(y.EuiPopover,{id:"monitorAlertActionsContext",button:b,isOpen:s,closePopover:()=>o(!1),panelPaddingSize:"none",anchorPosition:"downLeft"},r.a.createElement(y.EuiContextMenuPanel,{size:"s",items:h}))},bc=({rangeFrom:e,rangeTo:t,monitorId:a})=>{const{basePath:n}=at();let r='kibana.alert.rule.category : "Synthetics monitor status" ';return a&&(r+=`AND monitor.id : "${a}"`),`${n}/app/observability/alerts?_a=${fc.a.encode({kuery:r,rangeFrom:e,rangeTo:t})}`},Ec=o.i18n.translate("xpack.synthetics.management.actions",{defaultMessage:"Actions"}),vc=o.i18n.translate("xpack.synthetics.management.actions.viewAlerts",{defaultMessage:"View alerts"}),yc=()=>{const e=bc({rangeFrom:"now-12h/h",rangeTo:"now"});return r.a.createElement(y.EuiToolTip,{content:xc},r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsAlertsLinkButton","aria-label":xc,href:e,iconType:"inspect"}))},xc=o.i18n.translate("xpack.synthetics.monitorSummary.viewAlerts",{defaultMessage:"View alerts"}),Sc=()=>{const{status:e}=Object(u.useSelector)(ze.f),{statusFilter:t}=ke();return Object(n.useMemo)((()=>{var a,n;let r=null!==(a=null==e?void 0:e.enabledMonitorQueryIds)&&void 0!==a?a:[];switch(t){case"up":r=e?Object.entries(e.upConfigs).map((([e,t])=>t.monitorQueryId)):[];break;case"down":r=e?Object.entries(e.downConfigs).map((([e,t])=>t.monitorQueryId)):[];break;case"disabled":r=null!==(n=null==e?void 0:e.disabledMonitorQueryIds)&&void 0!==n?n:[];break;case"pending":r=e?Object.entries(e.pendingConfigs).map((([e,t])=>t.monitorQueryId)):[]}return r.length>0?r:["false-id"]}),[e,t])},kc=()=>{const{from:e,to:t}=Te(12,"hours"),{exploratoryView:{ExploratoryViewEmbeddable:a}}=Object(p.useKibana)().services,n=Object(f.useTheme)(),{status:i}=Object(u.useSelector)(ze.f),{locations:s}=ke(),o=!(null!=i&&i.allIds)||0===(null==i?void 0:i.allIds.length),l=Sc();return r.a.createElement(y.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,wc)),r.a.createElement(y.EuiSpacer,{size:"s"}),o?r.a.createElement(y.EuiSkeletonText,{lines:3}):r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(a,{id:"monitorActiveAlertsCount",dataTestSubj:"monitorActiveAlertsCount",reportType:"single-metric",customHeight:"70px",attributes:[{dataType:"alerts",time:{from:e,to:t},name:Mc,selectedMetricField:B.RECORDS_FIELD,reportDefinitions:{"kibana.alert.rule.category":["Synthetics monitor status"],"monitor.id":l,...null!=s&&s.length?{"observer.geo.name":s}:{}},filters:[{field:"kibana.alert.status",values:["active","recovered"]}],color:n.eui.euiColorVis1}]})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(a,{id:"monitorActiveAlertsOverTime",sparklineMode:!0,customHeight:"70px",reportType:"kpi-over-time",attributes:[{seriesType:"area",time:{from:e,to:t},reportDefinitions:{"kibana.alert.rule.category":["Synthetics monitor status"],"monitor.id":l,...null!=s&&s.length?{"observer.geo.name":s}:{}},dataType:"alerts",selectedMetricField:B.RECORDS_FIELD,name:Mc,filters:[{field:"kibana.alert.status",values:["active","recovered"]}],color:n.eui.euiColorVis1_behindText}]})),r.a.createElement(Tc,{grow:!1},r.a.createElement(yc,null))))},Mc=o.i18n.translate("xpack.synthetics.detailsPanel.alerts",{defaultMessage:"Alerts"}),wc=o.i18n.translate("xpack.synthetics.overview.alerts.headingText",{defaultMessage:"Last 12 hours"});var Tc=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-1kg9uoy-0"})({alignSelf:"center"}),Oc=a(89);function Cc(){var e,t;const a=Object(u.useDispatch)(),r=Object(n.useRef)(!0),{pageState:i,loading:s,loaded:o,error:l,data:c}=Object(u.useSelector)(q.M),d=Object(u.useSelector)(q.G),{handleFilterChange:m}=function(){const[e,t]=Me(),a=e(),r=Object(n.useMemo)((()=>["tags","locations","monitorTypes","projects","schedules","query"]),[]),i=Object(u.useDispatch)(),s=Object(n.useCallback)(((e,t)=>"query"===e?null!=t&&t.length?t.toString():void 0:t&&t.length>0?JSON.stringify(t.map((t=>function(e,t){var a;switch(t){case"monitorTypes":return null!==(a=Object(ln.invert)(nc)[e])&&void 0!==a?a:e;case"schedules":return(null!=e?e:"").replace(/\D/g,"");default:return e}}(t,e)))):void 0),[]),o=Object(n.useCallback)((e=>r.reduce(((t,a)=>({...t,[a]:s(a,e[a])})),{})),[r,s]),l=Object(n.useCallback)(((e,a)=>{t({[e]:s(e,a)})}),[s,t]),c=Object(u.useSelector)(q.L),d=JSON.stringify(o(c)),m=r.reduce(((e,t)=>({...e,[t]:a[t]})),{}),p=JSON.stringify(o(m)),f=Object(n.useRef)(!1);return Object(n.useEffect)((()=>{p!==d&&("{}"!==p||"{}"===d||f.current?(i(Object(q.ob)(m)),i(Object(q.hb)(m))):t(o(c))),f.current=!0}),[p,d]),{handleFilterChange:l,filterState:c}}(),{lastRefresh:p}=X(),f=Object(n.useCallback)((e=>{a(Object(q.ob)(e))}),[a]),g=Object(n.useCallback)((()=>f(i)),[i,f]);return Object(n.useEffect)((()=>{r.current||a(Object(q.x)({...i}))}),[p]),Object(U.useDebounce)((()=>{r.current&&a(o?Object(q.x)(i):q.j.get(i))}),100,[a]),Object(U.useDebounce)((()=>{!r.current&&o?a(q.j.get(i)):r.current=!1}),200,[i]),{loading:s,loaded:o,error:l,pageState:i,syntheticsMonitors:d,total:null!==(e=null==c?void 0:c.total)&&void 0!==e?e:0,loadPage:f,reloadPage:g,absoluteTotal:null!==(t=c.absoluteTotal)&&void 0!==t?t:0,handleFilterChange:m}}const Ic=o.i18n.translate("xpack.synthetics.overviewPage.overviewCrumb",{defaultMessage:"Overview"});var jc=a(134),_c=a.n(jc);const Fc=()=>r.a.createElement(y.EuiPanel,{style:{height:"160px"},hasBorder:!0},r.a.createElement(y.EuiSkeletonText,{lines:2})),Pc=({rows:e})=>{const t=Array(4*(null!=e?e:4)).fill(null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGrid,{gutterSize:"m",columns:4},t.map(((e,t)=>r.a.createElement(y.EuiFlexItem,{key:t},r.a.createElement(Fc,null))))))},Lc={terms:{"synthetics.type":["step/end"]}},Rc=e=>{var t,a,r;const i=Object(u.useDispatch)(),{lastRefresh:s}=X(),{monitor:o}=Ts(),l=Os(),c=null!==(t=null==e?void 0:e.monitorId)&&void 0!==t?t:null==o?void 0:o.id,d=null==l?void 0:l.label,{data:m,loading:p,loaded:f}=Object(u.useSelector)(q.J),g=null==m?void 0:m.monitor.id,h=g===c||g===(null==o?void 0:o[Ge.c.CUSTOM_HEARTBEAT_ID]),b=(null==m||null===(a=m.observer)||void 0===a||null===(r=a.geo)||void 0===r?void 0:r.name)===d,E=h&&b;return Object(n.useEffect)((()=>{c&&d&&i(q.q.get({monitorId:c,locationId:d}))}),[i,c,d,E,s]),c&&d&&m&&h&&b?{loading:p,latestPing:m,loaded:f}:{loading:p,latestPing:void 0,loaded:f}};function Dc(e,t,a){return"down"===(null==a?void 0:a.monitor.status)&&e["@timestamp"]===t["@timestamp"]&&void 0!==typeof t["@timestamp"]}const Ac=({errorStates:e,upStates:t,loading:a})=>{var i,s;const{monitorId:o}=Object(R.useParams)(),l=Object(n.useMemo)((()=>e.map((e=>e.monitor.check_group))),[e]),{failedSteps:u}=function(e){const{lastRefresh:t}=X(),{monitorId:a}=Object(R.useParams)(),{data:r,loading:i}=Object(f.useEsSearch)({index:(null==e?void 0:e.length)>0?c.A:"",body:{size:e.length,query:{bool:{filter:[Lc,{exists:{field:"synthetics.error"}},{terms:{"monitor.check_group":e}}]}},sort:[{"synthetics.step.index":{order:"asc"}},{"@timestamp":{order:"asc"}}],_source:["synthetics.step","synthetics.error","monitor.check_group"]}},[t,a,e],{name:"getMonitorErrorFailedStep"});return Object(n.useMemo)((()=>{var e;return{failedSteps:(null!==(e=null==r?void 0:r.hits.hits)&&void 0!==e?e:[]).map((e=>e._source)),loading:i}}),[r,i])}(l),d="browser"===(null===(i=e[0])||void 0===i?void 0:i.monitor.type),m=Object(R.useHistory)(),p=Ba(),g=Os(),{latestPing:h}=Rc({monitorId:o}),b=null==e||null===(s=e.sort(((e,t)=>$()(t.state.started_at).valueOf()-$()(e.state.started_at).valueOf())))||void 0===s?void 0:s[0],E=Object(y.useIsWithinMinBreakpoint)("s"),v=[{field:"item.state.started_at",name:Vc,sortable:e=>$()(e.state.started_at).valueOf(),render:(e,t)=>{var a;const n=r.a.createElement(Wc,{configId:o,stateId:null===(a=t.state)||void 0===a?void 0:a.id,label:p(t.state.started_at),locationId:null==g?void 0:g.id});return Dc(b,t,h)?r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",alignItems:"center",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!1,className:"eui-textNoWrap"},n),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Uc,{iconType:"clock",iconSide:"right"},$c))):n},mobileOptions:{header:!1}},...d?[{field:"monitor.check_group",name:Gc,truncateText:!0,sortable:e=>{var t,a;const n=u.find((t=>t.monitor.check_group===e.monitor.check_group));return n?null===(t=n.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.name:e.monitor.check_group},render:e=>{var t,a,n,i;const s=u.find((t=>t.monitor.check_group===e));return s?r.a.createElement(y.EuiText,{size:"s"},null===(t=s.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,". ",null===(n=s.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.name):r.a.createElement(r.a.Fragment,null,"--")}}]:[],{field:"error.message",name:Hc},{field:"state.duration_ms",name:Bc,align:"right",sortable:!0,render:(e,a)=>{let n=0;if(a.monitor.timespan){const e=$()(a.monitor.timespan.lt).diff($()(a.monitor.timespan.gte),"millisecond");if(Dc(b,a,h)){const t=$()().diff(a["@timestamp"]);n=t<e?t:e}else{var i;const e=function(e,t){for(const a of t)if($()(a.state.started_at).valueOf()>$()(e["@timestamp"]).valueOf())return a}(a,t);n=null!==(i=$()(null==e?void 0:e.state.started_at).diff(a["@timestamp"]))&&void 0!==i?i:0}}return r.a.createElement(y.EuiText,{size:"s"},js(Number(e)+n,!0))}}];return r.a.createElement("div",null,r.a.createElement(y.EuiSpacer,null),r.a.createElement(qc,{tableLayout:"auto",tableCaption:zc,loading:a,items:e,columns:v,rowProps:e=>{const{state:t}=e;if(null!=t&&t.id)return{"data-test-subj":`row-${t.id}`,onClick:e=>{m.push(`/monitor/${o}/errors/${t.id}?locationId=${null==g?void 0:g.id}`)}}},pagination:{pageSizeOptions:[5,10,20,50,100]},sorting:{sort:{field:"item.state.started_at",direction:"desc"}},$_css:E?"auto":void 0}))},Nc=({basePath:e,configId:t,stateId:a,locationId:n})=>`${e}/app/synthetics/monitor/${t}/errors/${a}?locationId=${n}`,zc=o.i18n.translate("xpack.synthetics.errorsList.label",{defaultMessage:"Errors list"}),Bc=o.i18n.translate("xpack.synthetics.errorDuration.label",{defaultMessage:"Error duration"}),Hc=o.i18n.translate("xpack.synthetics.errorMessage.label",{defaultMessage:"Error message"}),Gc=o.i18n.translate("xpack.synthetics.failedStep.label",{defaultMessage:"Failed step"}),Vc=o.i18n.translate("xpack.synthetics.timestamp.label",{defaultMessage:"@timestamp"}),$c=o.i18n.translate("xpack.synthetics.active.label",{defaultMessage:"Active"});var Uc=G()(y.EuiBadge)({maxWidth:"max-content"}),qc=G()(y.EuiInMemoryTable).withConfig({displayName:"_StyledEuiInMemoryTable",componentId:"sc-p8au50-0"})((e=>({overflowX:e.$_css})));const Wc=({stateId:e,configId:t,label:a,locationId:n})=>{const i=Yc({configId:t,stateId:e,locationId:n});return r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsErrorDetailsLinkLink",href:i},null!=a?a:Xc)},Kc=({stateId:e,configId:t,label:a})=>{const n=Os(),i=Yc({configId:t,stateId:e,locationId:null==n?void 0:n.id});return r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsErrorDetailsButtonButton",flush:"left",iconType:"warning",color:"danger",href:i},null!=a?a:Xc)},Yc=({stateId:e,configId:t,locationId:a})=>{const{basePath:n}=at();return Nc({basePath:n,configId:t,stateId:e,locationId:a})},Xc=o.i18n.translate("xpack.synthetics.monitor.step.viewErrorDetails",{defaultMessage:"View error details"}),Jc=G.a.div.withConfig({displayName:"Container",componentId:"sc-1tsjg82-0"})(["display:inline-block;position:absolute;right:10px;top:10px;z-index:1;"]),Qc=({monitor:e,status:t,ping:a,timestamp:r,configIdByLocation:i})=>{var s;const o=Object(u.useSelector)(Object(Lt.f)(e.configId)),l=Object(u.useSelector)(q.H),c=Object(u.useDispatch)(),d=Object(n.useRef)(null),m=Object(Lt.c)(o),p=Yc({configId:e.configId,stateId:null==a||null===(s=a.state)||void 0===s?void 0:s.id,locationId:e.location.id}),f=Object(y.useEuiShadow)("s"),g=Ba()(r);if(m)return n.createElement(Jc,null,n.createElement(y.EuiToolTip,{position:"top",content:eu},n.createElement(y.EuiLoadingSpinner,null)));const h=()=>{c(Object(q.nb)(null))};var b;return"down"===t?n.createElement(Jc,null,n.createElement(y.EuiPopover,{button:n.createElement(tu,{onMouseEnter:()=>{d.current&&clearTimeout(d.current),d.current=setTimeout((()=>{c(Object(q.nb)(i))}),300)},onMouseLeave:()=>{l||d.current&&clearTimeout(d.current)},boxShadow:f,onClick:()=>{c(i===l?Object(q.nb)(null):Object(q.nb)(i))}},n.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsMetricItemIconButton",iconType:"warning",color:"danger",size:"m","aria-label":Zc})),isOpen:i===l,closePopover:h,anchorPosition:"upCenter",panelStyle:{outline:"none"}},n.createElement(y.EuiPopoverTitle,null,n.createElement(y.EuiFlexGroup,null,n.createElement(y.EuiFlexItem,{grow:!0},g),n.createElement(y.EuiFlexItem,{grow:!1},n.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsMetricItemIconButton",iconType:"cross",onClick:h})))),n.createElement("div",{style:{width:"300px"}},n.createElement(y.EuiCallOut,{title:null==a||null===(b=a.error)||void 0===b?void 0:b.message,color:"danger",iconType:"warning"})),n.createElement(y.EuiPopoverFooter,null,n.createElement(y.EuiButton,{"data-test-subj":"syntheticsMetricItemIconButton",fullWidth:!0,size:"s",href:p},Zc)))):null},Zc=o.i18n.translate("xpack.synthetics.errorDetails.label",{defaultMessage:"Error details"}),eu=o.i18n.translate("xpack.synthetics.inProgress.label",{defaultMessage:"Manual test run is in progress."}),tu=m.euiStyled.div`
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  width: 32px;
  height: 32px;
  background: #ffffff;
  border: 1px solid #d3dae6;
  ${({boxShadow:e})=>e}
  border-radius: 16px;
  flex: none;
  order: 0;
  flex-grow: 0;
`,au=(e,t,a)=>{if(!t)return e.eui.euiColorLightestShade;switch(a){case"down":return e.eui.euiColorVis9_behindText;case"up":default:return e.eui.euiColorVis0_behindText;case"unknown":return e.eui.euiColorGhost}},nu=({monitor:e,medianDuration:t,maxDuration:a,minDuration:i,avgDuration:s,data:l,onClick:c})=>{var d;const[m,p]=Object(n.useState)(!1),g=Object(u.useSelector)(q.H),h=Ae(e),{status:b,timestamp:E,ping:v,configIdByLocation:x}=Be({configId:e.configId,locationId:e.location.id}),S=Object(f.useTheme)(),k=Object(u.useSelector)(Object(Lt.e)(e.configId)),M=Object(u.useDispatch)();return r.a.createElement("div",{"data-test-subj":`${e.name}-metric-item`,style:{height:"160px"}},r.a.createElement(ru,{"data-test-subj":`${e.name}-metric-item-${h}-${b}`,paddingSize:"none",onMouseLeave:()=>{g&&M(Object(q.nb)(null))},title:$()(E).format("LLL")},r.a.createElement(rt.Chart,null,r.a.createElement(rt.Settings,{onElementClick:()=>{k?(M(Object(Lt.j)(e.configId)),M(Object(q.nb)(null))):(M(Object(Lt.b)()),M(Object(q.nb)(null))),!k&&h&&c({configId:e.configId,id:e.id,location:h,locationId:e.location.id})},baseTheme:rt.DARK_THEME,locale:o.i18n.getLocale()}),r.a.createElement(rt.Metric,{id:`${e.configId}-${null===(d=e.location)||void 0===d?void 0:d.id}`,data:[[{title:e.name,subtitle:h,value:t,trendShape:rt.MetricTrendShape.Area,trend:l,extra:r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",justifyContent:"flexEnd",title:"",component:"span"},r.a.createElement(y.EuiFlexItem,{grow:!1,component:"span"},o.i18n.translate("xpack.synthetics.overview.duration.label",{defaultMessage:"Duration"})),r.a.createElement(y.EuiFlexItem,{grow:!1,component:"span"},r.a.createElement(y.EuiIconTip,{title:o.i18n.translate("xpack.synthetics.overview.duration.description",{defaultMessage:"Median duration of last 50 checks"}),content:o.i18n.translate("xpack.synthetics.overview.duration.description.values",{defaultMessage:"Avg: {avg}, Min: {min}, Max: {max}",values:{avg:oo(s,{noSpace:!0}),min:oo(i,{noSpace:!0}),max:oo(a,{noSpace:!0})}}),position:"top"}))),valueFormatter:e=>oo(e),color:au(S,e.isEnabled,b)}]]})),r.a.createElement("div",{className:m?"":"cardItemActions_hover"},r.a.createElement(_n,{monitor:e,isPopoverOpen:m,setIsPopoverOpen:p,position:"relative",locationId:e.location.id})),x&&r.a.createElement(Qc,{monitor:e,status:b,ping:v,timestamp:E,configIdByLocation:x})))};var ru=G()(y.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-14crr3p-0"})(["height:100%;overflow:hidden;position:relative;& .cardItemActions_hover{pointer-events:none;opacity:0;&:focus-within{pointer-events:auto;opacity:1;}}&:hover .cardItemActions_hover{pointer-events:auto;opacity:1;}"]);const iu=({monitor:e,onClick:t})=>{var a;const{timestamp:i}=Be({configId:e.configId,locationId:e.location.id}),{data:s,medianDuration:o,maxDuration:l,avgDuration:d,minDuration:m}=function({monitorId:e,locationId:t,timestamp:a,schedule:r}){const{hits:i,loading:s}=function({monitorId:e,locationId:t,fields:a=["*"],size:r=50,timestamp:i,schedule:s}){var o,l;const{lastRefresh:d}=X(),{locationsLoaded:m,locations:p}=Object(u.useSelector)(q.X),g=Object(f.createEsParams)({index:c.A,body:{size:r,query:{bool:{filter:[Le.c,Le.b,Re(s),{term:{"monitor.id":e}}],...Object(Le.e)({locationId:t,locationName:(null===(o=p.find((e=>e.id===t)))||void 0===o?void 0:o.label)||c.E})}},_source:!1,sort:[{"@timestamp":"desc"}],fields:a}}),{data:h}=Pe(g,[d],{name:`zGetLastXChecks/${e}/${t}`,isRequestReady:m&&Boolean(i)}),b=JSON.stringify(null==h||null===(l=h.hits)||void 0===l?void 0:l.hits);return Object(n.useMemo)((()=>{var e;return{hits:(null==h||null===(e=h.hits)||void 0===e?void 0:e.hits.map((e=>e.fields)))||[],loading:!h}}),[b])}({monitorId:e,locationId:t,fields:De,size:50,timestamp:a,schedule:r}),{data:o,median:l,min:d,max:m,avg:p}=Object(n.useMemo)((()=>{var e,t,a,n,r,o;if(s)return{data:[],median:0,avg:0,min:0,max:0};const l=i.reverse().map(((e,t)=>{var a;const n=null==e||null===(a=e["monitor.duration.us"])||void 0===a?void 0:a[0];return void 0===n?null:{x:t,y:n}})).filter((e=>null!==e)),c=[...i].sort(((e,t)=>{var a,n;return((null==e||null===(a=e["monitor.duration.us"])||void 0===a?void 0:a[0])||0)-((null==t||null===(n=t["monitor.duration.us"])||void 0===n?void 0:n[0])||0)}));return{data:l,median:(null===(e=c[Math.floor(i.length/2)])||void 0===e||null===(t=e["monitor.duration.us"])||void 0===t?void 0:t[0])||0,avg:c.reduce(((e,t)=>{var a;return e+((null==t||null===(a=t["monitor.duration.us"])||void 0===a?void 0:a[0])||0)}),0)/i.length,min:(null===(a=c[0])||void 0===a||null===(n=a["monitor.duration.us"])||void 0===n?void 0:n[0])||0,max:(null===(r=c[c.length-1])||void 0===r||null===(o=r["monitor.duration.us"])||void 0===o?void 0:o[0])||0}}),[i,s]);return Object(n.useMemo)((()=>({data:o,medianDuration:l,avgDuration:p,minDuration:d,maxDuration:m,loading:s})),[o,l,p,d,m,s])}({locationId:null===(a=e.location)||void 0===a?void 0:a.id,monitorId:e.id,timestamp:i,schedule:e.schedule});return r.a.createElement(nu,{data:s,monitor:e,medianDuration:o,maxDuration:l,avgDuration:d,minDuration:m,onClick:t})},su=({loaded:e,groupLabel:t,fullScreenGroup:a,setFullScreenGroup:i,groupMonitors:s,setFlyoutConfigCallback:o})=>{const{status:l}=Object(u.useSelector)(ze.f),c=(({groupMonitors:e})=>{const{status:t}=Object(u.useSelector)(ze.f),{statusFilter:a}=ke(),{locations:n}=Object(u.useSelector)(q.X);return"all"!==a&&a?"disabled"===a?e.filter((e=>!e.isEnabled)):e.filter((e=>{var r,i;const s=null!==(r=null===(i=n.find((t=>t.id===e.location.id)))||void 0===i?void 0:i.label)&&void 0!==r?r:e.location.id,o=He(t,e.id,s);return"up"===a&&"up"===o.status||"down"===a&&"down"===o.status})):e})({groupMonitors:s}),d=c.filter((e=>{const t=null==l?void 0:l.downConfigs;var a,n;if(t)return"down"===(null===(a=t[`${e.configId}-${null===(n=e.location)||void 0===n?void 0:n.label}`])||void 0===a?void 0:a.status)})).length,m=c.length/4,[p,f]=Object(n.useState)(0),[g,h]=Object(n.useState)(2),b=c.slice(p*g*4,(p+1)*g*4),{status:E}=Object(u.useSelector)(ze.f);Object(U.useKey)("Escape",(()=>{a===t&&i("")}));const v=!e||!E;return r.a.createElement(y.EuiAccordion,{initialIsOpen:a===t,isDisabled:a===t||0===c.length,id:"groupAccordion"+t,buttonContent:r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{className:"eui-textNoWrap"},t),d>0&&r.a.createElement(y.EuiFlexItem,{className:"eui-textNoWrap"},r.a.createElement(y.EuiNotificationBadge,{color:"accent"},d))),extraAction:r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsGroupGridItemButton",isDisabled:0===c.length,className:"fullScreenButton",iconType:"fullScreen","aria-label":"Full screen",onClick:()=>{a?(i(""),document.exitFullscreen()):(document.documentElement.requestFullscreen(),i(t))}})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiBadge,{color:"subdued"},c.length," Monitors"))),isLoading:v},r.a.createElement(y.EuiSpacer,{size:"m"}),v?r.a.createElement(Pc,{rows:2}):r.a.createElement(y.EuiFlexGrid,{columns:4,gutterSize:"m","data-test-subj":"syntheticsOverviewGridItemContainer"},b.map((e=>{var t;return r.a.createElement(y.EuiFlexItem,{key:`${e.id}-${null===(t=e.location)||void 0===t?void 0:t.id}`,"data-test-subj":"syntheticsOverviewGridItem"},r.a.createElement(iu,{monitor:e,onClick:o}))}))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiTablePagination,{"aria-label":"Monitor grid pagination",pageCount:Math.ceil(m/g),activePage:p,onChangePage:e=>f(e),itemsPerPage:g,onChangeItemsPerPage:e=>{h(e),f(0)},itemsPerPageOptions:[2,3,4,5,10]}))},ou=({loaded:e,currentMonitors:t,setFlyoutConfigCallback:a})=>{const[i,s]=Object(n.useState)(""),{groupBy:{field:o,order:l}}=Object(u.useSelector)(q.R),{locations:c}=Object(u.useSelector)(q.X),d=rc();if(!d)return r.a.createElement(y.EuiLoadingSpinner,null);const{monitorTypes:m,locations:p,projects:f,tags:g}=d;let h={key:"location",items:p,values:ac(p,"locations",c),otherValues:{label:"Without any location",items:t.filter((e=>0===Object(ln.get)(e,"locations",[]).length))}};switch(o){case Ge.c.MONITOR_TYPE:h={key:Ge.c.MONITOR_TYPE,items:m,values:ac(m,"monitorTypes",c),otherValues:{label:"Invalid monitor type",items:t.filter((e=>!Object(ln.get)(e,Ge.c.MONITOR_TYPE)))}};break;case"locationId":h={key:"location.label",items:p,values:ac(p,"locations",c),otherValues:{label:"Without any location",items:t.filter((e=>!Object(ln.get)(e,"location")))}};break;case Ge.c.TAGS:h={key:Ge.c.TAGS,items:g,values:ac(g,"tags",c),otherValues:{label:"Without any tags",items:t.filter((e=>0===Object(ln.get)(e,"tags",[]).length))}};break;case Ge.c.PROJECT_ID:h={key:"projectId",items:f,values:ac(f,"projects",c),otherValues:{label:"UI Monitors",items:t.filter((e=>!Boolean(e.projectId)))}}}const b=Object(ln.orderBy)(h.values,"label",null!=l?l:"asc");return 0===m.length?r.a.createElement(Pc,null):r.a.createElement(r.a.Fragment,null,b.map((n=>{const o=t.filter((e=>{const t=Object(ln.get)(e,h.key);if(Array.isArray(t))return t.includes(n.label);if(h.key===Ge.c.MONITOR_TYPE){const t=Object(ln.invert)(nc)[n.label];return Object(ln.get)(e,h.key)===t}return Object(ln.get)(e,h.key)===n.label}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(lu,{isFullScreen:i===n.label},r.a.createElement(su,{groupLabel:n.label,groupMonitors:o,loaded:e,setFlyoutConfigCallback:a,setFullScreenGroup:s,fullScreenGroup:i})),r.a.createElement(y.EuiSpacer,{size:"m"}))})),h.otherValues.items.length>0&&r.a.createElement(lu,{isFullScreen:i===h.otherValues.label},r.a.createElement(su,{groupLabel:h.otherValues.label,groupMonitors:h.otherValues.items,loaded:e,setFlyoutConfigCallback:a,setFullScreenGroup:s,fullScreenGroup:i})))},lu=({isFullScreen:e,children:t})=>{const a=Object(n.useRef)(null);return e?r.a.createElement(y.EuiOverlayMask,null,r.a.createElement(y.EuiFocusTrap,{clickOutsideDisables:!0},r.a.createElement("div",{ref:a},r.a.createElement(uu,{hasShadow:!1,hasBorder:!0},t)))):r.a.createElement(cu,{hasShadow:!1,hasBorder:!0},t)},cu=G()(y.EuiPanel).withConfig({displayName:"StyledPanel",componentId:"sc-1j5xx6n-0"})(["&&&{.fullScreenButton{visibility:hidden;}:hover{.fullScreenButton{visibility:visible;}}}"]),uu=G()(y.EuiPanel).withConfig({displayName:"FullScreenPanel",componentId:"sc-1j5xx6n-1"})(["&&&{position:absolute;top:0;left:0;width:100%;height:100%;overflow:auto;}"]),du=({sortOptions:e,orderOptions:t,sortField:a})=>{const[i,s]=Object(n.useState)(!1),o=Object(y.useGeneratedHtmlId)({prefix:"singleContextMenuPopover"}),l=()=>{s(!1)},c=r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsSortMenuButton",size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>{s(!i)}},a),u=[r.a.createElement(y.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"sort_by_title"},r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("h4",null,pu))),...e.map((e=>r.a.createElement(mu,{option:e,onClosePopover:l,key:e.value}))),r.a.createElement(y.EuiHorizontalRule,{key:"hr",margin:"none"}),r.a.createElement(y.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"order_by_title"},r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("h4",null,fu))),...t.map((e=>r.a.createElement(mu,{option:e,onClosePopover:l,key:e.value})))];return r.a.createElement(y.EuiPopover,{id:o,button:c,isOpen:i,closePopover:l,panelPaddingSize:"none",anchorPosition:"downLeft"},r.a.createElement(y.EuiContextMenuPanel,{size:"s",items:u,style:{minWidth:160}}))},mu=({option:e,onClosePopover:t})=>{return r.a.createElement(y.EuiContextMenuItem,{size:"s",key:e.value,icon:(a=e.checked,a?"check":"empty"),onClick:()=>{t(),e.onClick()}},e.label);var a},pu=o.i18n.translate("xpack.synthetics.overview.sortPopover.sortBy.title",{defaultMessage:"Sort by"}),fu=o.i18n.translate("xpack.synthetics.overview.sortPopover.orderBy.title",{defaultMessage:"Order"}),gu=({groupOptions:e,orderByOptions:t,groupField:a})=>{const[i,s]=Object(n.useState)(!1),o=Object(y.useGeneratedHtmlId)({prefix:"singleContextMenuPopover"}),l=()=>{s(!1)},c=r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsGroupMenuButton",size:"xs",iconType:"arrowDown",iconSide:"right",onClick:()=>{s(!i)}},a),u=[r.a.createElement(y.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"group_title_panel"},r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("h4",null,yu))),...e.map((e=>r.a.createElement(hu,{option:e,onClosePopover:l,key:e.value}))),r.a.createElement(y.EuiHorizontalRule,{key:"hr",margin:"none"}),r.a.createElement(y.EuiPanel,{paddingSize:"s",hasShadow:!1,key:"order_by_title"},r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("h4",null,fu))),...t.map((e=>r.a.createElement(hu,{option:e,onClosePopover:l,key:e.value})))];return r.a.createElement(y.EuiPopover,{id:o,button:c,isOpen:i,closePopover:l,panelPaddingSize:"none",anchorPosition:"downLeft"},r.a.createElement(y.EuiContextMenuPanel,{size:"s",items:u,style:{minWidth:160}}))},hu=({option:e,onClosePopover:t})=>{return r.a.createElement(y.EuiContextMenuItem,{size:"s",key:e.value,icon:(a=e.checked,a?"check":"empty"),onClick:()=>{t(),e.onClick()}},e.label);var a};var bu=a(75);const Eu=()=>{const{groupBy:{field:e,order:t}}=Object(u.useSelector)(bu.g),a=Object(u.useDispatch)(),[i,s]=Me(),{groupBy:o,groupOrderBy:l}=i(),c=Object(n.useRef)(!1);Object(n.useEffect)((()=>{o!==e&&(o||"none"===e||c.current?a(Object(bu.i)({field:null!=o?o:"none",order:null!=l?l:"asc"})):s({groupBy:e,groupOrderBy:t})),c.current=!0}),[a,e,t,o,l]);const d=e=>{a(Object(bu.i)(e)),s({groupBy:e.field,groupOrderBy:e.order})},m=[{label:wu,value:"none",checked:"none"===e,defaultSortOrder:"asc",onClick:()=>{d({field:"none",order:t})}},{label:Tu,value:"location.id",checked:"locationId"===e,defaultSortOrder:"asc",onClick:()=>{d({field:"locationId",order:t})}},{label:Ou,value:Ge.c.MONITOR_TYPE,checked:e===Ge.c.MONITOR_TYPE,defaultSortOrder:"desc",onClick:()=>{d({field:Ge.c.MONITOR_TYPE,order:t})}},{label:Cu,value:Ge.c.TAGS,checked:e===Ge.c.TAGS,defaultSortOrder:"desc",onClick:()=>{d({field:Ge.c.TAGS,order:t})}},{label:Iu,value:Ge.c.PROJECT_ID,checked:e===Ge.c.PROJECT_ID,defaultSortOrder:"desc",onClick:()=>{d({field:Ge.c.PROJECT_ID,order:t})}}],{asc:p,desc:f,label:g}=vu(e),h=[{label:p,value:"asc",checked:"asc"===t,onClick:()=>{d({field:e,order:"asc"})}},{label:f,value:"desc",checked:"desc"===t,onClick:()=>{d({field:e,order:"desc"})}}];return r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xxxs"},r.a.createElement("span",null,yu))),r.a.createElement(y.EuiFlexItem,{grow:!1,"data-test-subj":"syntheticsOverviewGroupButton"},r.a.createElement(gu,{groupOptions:m,orderByOptions:h,groupField:g})))))},vu=e=>{switch(e){case"locationId":return{asc:xu,desc:Su,label:Tu};case Ge.c.MONITOR_TYPE:return{asc:xu,desc:Su,label:Ou};case Ge.c.TAGS:return{asc:xu,desc:Su,label:Cu};case Ge.c.PROJECT_ID:return{asc:xu,desc:Su,label:Iu};default:return{asc:ku,desc:Mu,label:wu}}},yu=o.i18n.translate("xpack.synthetics.overview.groupPopover.group.title",{defaultMessage:"Group by"}),xu=o.i18n.translate("xpack.synthetics.overview.groupPopover.alphabetical.asc",{defaultMessage:"A -> Z",description:"Describes ascending alphabetical sort order"}),Su=o.i18n.translate("xpack.synthetics.overview.groupPopover.alphabetical.desc",{defaultMessage:"Z -> A",description:"Describes descending alphabetical sort order"}),ku=o.i18n.translate("xpack.synthetics.overview.groupPopover.ascending.label",{defaultMessage:"Ascending"}),Mu=o.i18n.translate("xpack.synthetics.overview.groupPopover.descending.label",{defaultMessage:"Descending"}),wu=o.i18n.translate("xpack.synthetics.overview.groupPopover.none.label",{defaultMessage:"None"}),Tu=o.i18n.translate("xpack.synthetics.overview.groupPopover.location.label",{defaultMessage:"Location"}),Ou=o.i18n.translate("xpack.synthetics.overview.groupPopover.monitorType.label",{defaultMessage:"Monitor type"}),Cu=o.i18n.translate("xpack.synthetics.overview.groupPopover.tag.label",{defaultMessage:"Tag"}),Iu=o.i18n.translate("xpack.synthetics.overview.groupPopover.project.label",{defaultMessage:"Project"}),ju=({page:e,loading:t,total:a,startRange:n,endRange:i})=>{const{loaded:s}=Object(u.useSelector)(bu.g);return s&&void 0!==a?r.a.createElement(y.EuiText,{size:"xs"},n&&i?r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.overview.pagination.description",defaultMessage:"Showing {currentCount} of {total} {monitors}",values:{currentCount:r.a.createElement("strong",null,`${n}-${i}`),total:a,monitors:r.a.createElement("strong",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.overview.monitors.label",defaultMessage:"Monitors"}))}}):r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordTotal",defaultMessage:"Showing {total} {monitorsLabel}",values:{total:r.a.createElement("strong",null,r.a.createElement(y.EuiI18nNumber,{value:a})),monitorsLabel:r.a.createElement("strong",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordRangeLabel",defaultMessage:"{monitorCount, plural, one {Monitor} other {Monitors}}",values:{monitorCount:a}}))}})):r.a.createElement(y.EuiText,{size:"xs","data-test-subj":"syntheticsOverviewMonitorsLoading"},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiLoadingSpinner,{size:"m"})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.overview.pagination.loading",defaultMessage:"Loading Monitors..."}))))},_u=({onSortChange:e})=>{const{pageState:{sortOrder:t,sortField:a}}=Object(u.useSelector)(bu.g),n=Object(u.useDispatch)(),{asc:i,desc:s,label:o}=Fu(a),l=t=>{e&&e(),n(t)},c=[{label:i,value:"asc",checked:"asc"===t,onClick:()=>{l(Object(bu.j)({sortOrder:"asc"}))}},{label:s,value:"desc",checked:"desc"===t,onClick:()=>{l(Object(bu.j)({sortOrder:"desc"}))}}],d=[{label:Gu,value:"status",checked:"status"===a,defaultSortOrder:"asc",onClick:()=>{l(Object(bu.j)({sortField:"status",sortOrder:"asc"}))}},{label:Vu,value:`${Ge.c.NAME}.keyword`,checked:a===`${Ge.c.NAME}.keyword`,defaultSortOrder:"asc",onClick:()=>{l(Object(bu.j)({sortField:`${Ge.c.NAME}.keyword`,sortOrder:"asc"}))}},{label:$u,value:"updated_at",checked:"updated_at"===a,defaultSortOrder:"desc",onClick:()=>{l(Object(bu.j)({sortField:"updated_at",sortOrder:"desc"}))}}];return r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xxxs"},r.a.createElement("span",null,Pu))),r.a.createElement(y.EuiFlexItem,{grow:!1,"data-test-subj":"syntheticsOverviewSortButton"},r.a.createElement(du,{sortOptions:d,orderOptions:c,sortField:o})))))},Fu=e=>{switch(e){case`${Ge.c.NAME}.keyword`:return{asc:Lu,desc:Ru,label:Vu};case"updated_at":return{asc:Du,desc:Au,label:$u};case"status":return{asc:Nu,desc:zu,label:Gu};default:return{asc:Bu,desc:Hu,label:""}}},Pu=o.i18n.translate("xpack.synthetics.overview.sortPopover.sort.title",{defaultMessage:"Sort by"}),Lu=o.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.asc",{defaultMessage:"A -> Z",description:"Describes ascending alphabetical sort order"}),Ru=o.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.desc",{defaultMessage:"Z -> A",description:"Describes descending alphabetical sort order"}),Du=o.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.asc",{defaultMessage:"Oldest first"}),Au=o.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.desc",{defaultMessage:"Newest first"}),Nu=o.i18n.translate("xpack.synthetics.overview.sortPopover.status.asc",{defaultMessage:"Down first"}),zu=o.i18n.translate("xpack.synthetics.overview.sortPopover.status.desc",{defaultMessage:"Up first"}),Bu=o.i18n.translate("xpack.synthetics.overview.sortPopover.ascending.label",{defaultMessage:"Ascending"}),Hu=o.i18n.translate("xpack.synthetics.overview.sortPopover.descending.label",{defaultMessage:"Descending"}),Gu=o.i18n.translate("xpack.synthetics.overview.sortPopover.status.label",{defaultMessage:"Status"}),Vu=o.i18n.translate("xpack.synthetics.overview.sortPopover.alphabetical.label",{defaultMessage:"Alphabetical"}),$u=o.i18n.translate("xpack.synthetics.overview.sortPopover.lastModified.label",{defaultMessage:"Last modified"});function Uu(){return r.a.createElement(y.EuiEmptyPrompt,{iconType:"search",iconColor:"subdued",title:r.a.createElement("span",null,Wu),titleSize:"s",body:r.a.createElement(y.EuiText,{size:"s"},Ku," ",r.a.createElement(qu,null))})}function qu(){const[e,t]=Me();return r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsClearFiltersLink",onClick:()=>t(null)},Yu)}const Wu=o.i18n.translate("xpack.synthetics.overview.noMonitorsFoundHeading",{defaultMessage:"No monitors found"}),Ku=o.i18n.translate("xpack.synthetics.overview.noMonitorsFoundContent",{defaultMessage:"Try refining your search."}),Yu=o.i18n.translate("xpack.synthetics.overview.overview.clearFilters",{defaultMessage:"Clear filters"}),Xu=Object(n.memo)((()=>{const{status:e}=Object(u.useSelector)(ze.f),{data:{monitors:t},flyoutConfig:a,loaded:i,pageState:s,groupBy:{field:o}}=Object(u.useSelector)(bu.g),{perPage:l}=s,[c,d]=Object(n.useState)(1),m=Object(u.useDispatch)(),p=Object(n.useRef)(null),{monitorsSortedByStatus:f}=function(){const{statusFilter:e}=ke(),{status:t}=Object(u.useSelector)(ze.f),{pageState:{sortOrder:a},data:{monitors:r}}=Object(u.useSelector)(bu.g),i=Object(n.useRef)(null),s=Object(n.useMemo)((()=>{if(!t)return{down:[],up:[],disabled:[],pending:[]};const{downConfigs:e,pendingConfigs:a}=t,n={};Object.values(e).forEach((({locationId:e,configId:t})=>{n[t]?n[t].push(e):n[t]=[e]}));const s=[],o=[],l=[],c=[];return r.forEach((e=>{e.isEnabled?e.configId in n&&n[e.configId].includes(e.location.id)?s.push(e):null!=a&&a[`${e.configId}-${e.location.id}`]?c.push(e):o.push(e):l.push(e)})),i.current=n,{down:s,up:o,disabled:l,pending:c}}),[r,i,t]);return Object(n.useMemo)((()=>{switch(e){case"down":return{monitorsSortedByStatus:s.down,downMonitors:i.current};case"up":return{monitorsSortedByStatus:s.up,downMonitors:i.current};case"disabled":return{monitorsSortedByStatus:s.disabled,downMonitors:i.current};case"pending":return{monitorsSortedByStatus:s.pending,downMonitors:i.current}}return{monitorsSortedByStatus:[..."asc"===a?[...s.down,...s.up]:[...s.up,...s.down],...s.disabled,...s.pending],downMonitors:i.current}}),[i,s,a,e])}(),g=Object(n.useCallback)((e=>m(Object(bu.h)(e))),[m]),h=Object(n.useCallback)((()=>m(Object(bu.h)(null))),[m]),b=Object(n.useCallback)((()=>m(bu.d.get(s))),[m,s]),{currentMonitors:E}=(({intersectionRef:e,monitorsSortedByStatus:t})=>{const[a,r]=Object(n.useState)(1),[i,s]=Object(n.useState)(!1),{statusFilter:o}=ke(),{pageState:{perPage:l,sortField:c},data:{monitors:d}}=Object(u.useSelector)(q.R),m=(({sortField:e,perPage:t,page:a,monitors:n,monitorsSortedByStatus:r,statusFilter:i})=>"status"===e||i?r.slice(0,t*a):n.slice(0,t*a))({monitors:d,monitorsSortedByStatus:t,perPage:l,page:a,sortField:c,statusFilter:o}),p=Ci()(e,{root:null,rootMargin:"640px",threshold:.1}),f=p&&p.intersectionRatio>0;return _c()((()=>{f&&m.length===a*l&&m.length!==d.length?s(!0):s(!1)}),1e3),Object(n.useEffect)((()=>{i&&(r((e=>e+1)),s(!1))}),[i]),{currentMonitors:m}})({intersectionRef:p,monitorsSortedByStatus:f});return e&&!f.length&&i?r.a.createElement(Uu,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline",responsive:!1,wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(ju,{page:c,loading:!i,total:e?f.length:void 0})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(_u,{onSortChange:()=>d(1)})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Eu,null))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(r.a.Fragment,null,"none"===o?i&&E.length?r.a.createElement(y.EuiFlexGrid,{columns:4,gutterSize:"m","data-test-subj":"syntheticsOverviewGridItemContainer"},E.map((e=>{var t;return r.a.createElement(y.EuiFlexItem,{key:`${e.id}-${null===(t=e.location)||void 0===t?void 0:t.id}`,"data-test-subj":"syntheticsOverviewGridItem"},r.a.createElement(iu,{monitor:e,onClick:g}))}))):r.a.createElement(Pc,null):r.a.createElement(ou,{loaded:i,currentMonitors:t,setFlyoutConfigCallback:g}),r.a.createElement(y.EuiSpacer,{size:"m"})),r.a.createElement("div",{ref:p},r.a.createElement(y.EuiSpacer,{size:"l"})),"none"===o&&r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},E.length===t.length&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"xs"},Ju)),E.length===t.length&&E.length>l&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsOverviewGridButton",onClick:()=>window.scrollTo(0,0),iconType:"sortUp",iconSide:"right",size:"xs"},Qu))),(null==a?void 0:a.configId)&&(null==a?void 0:a.location)&&r.a.createElement(mr,{configId:a.configId,id:a.id,location:a.location,locationId:a.locationId,onClose:h,onEnabledChange:b,onLocationChange:g}))})),Ju=o.i18n.translate("xpack.synthetics.overview.grid.showingAllMonitors.label",{defaultMessage:"Showing all monitors"}),Qu=o.i18n.translate("xpack.synthetics.overview.grid.scrollToTop.label",{defaultMessage:"Back to top"});function Zu({scopeStatusByLocation:e}){const t=Object(u.useSelector)(q.Q),{status:a,error:r,loaded:i}=Object(u.useSelector)(ze.f),{lastRefresh:s}=X(),o=Object(u.useDispatch)();return Object(n.useEffect)((()=>{o(i?ze.e.get({pageState:t,scopeStatusByLocation:e}):ze.b.get({pageState:t,scopeStatusByLocation:e}))}),[o,s,t,e]),{status:a,error:r}}function ed(e){return null!=e?e:"-"}function td(){const{statusFilter:e}=ke(),{status:t,error:a}=Zu({scopeStatusByLocation:!0}),i=Object(u.useDispatch)(),[s,o]=Object(n.useState)({up:null==t?void 0:t.up,down:null==t?void 0:t.down,pending:null==t?void 0:t.pending,disabledCount:null==t?void 0:t.disabledCount});return Object(n.useEffect)((()=>{a&&(i(Object(ze.a)()),N.a.toasts.addError(a.body,{title:od,toastLifeTimeMs:5e3}))}),[i,a]),Object(n.useEffect)((()=>{if(e)switch(e){case"up":o({up:(null==t?void 0:t.up)||0,down:0,disabledCount:0,pending:0});break;case"down":o({up:0,down:(null==t?void 0:t.down)||0,disabledCount:0,pending:0});break;case"disabled":o({up:0,down:0,disabledCount:(null==t?void 0:t.disabledCount)||0,pending:0});break;case"pending":o({up:0,down:0,disabledCount:0,pending:(null==t?void 0:t.pending)||0})}else t&&o({up:t.up,down:t.down,disabledCount:t.disabledCount,pending:null==t?void 0:t.pending})}),[t,e]),r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,ad)),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"xl"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.up",description:nd,reverse:!0,title:ed(null==s?void 0:s.up),titleColor:"success",titleSize:"m"})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.down",description:rd,reverse:!0,title:ed(null==s?void 0:s.down),titleColor:"danger",titleSize:"m"})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.disabled",description:sd,reverse:!0,title:ed(null==s?void 0:s.disabledCount),titleColor:"subdued",titleSize:"m"})),((null==s?void 0:s.pending)||0)>0&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiStat,{"data-test-subj":"xpack.uptime.synthetics.overview.status.pending",description:id,reverse:!0,title:ed(null==s?void 0:s.pending),titleColor:"subdued",titleSize:"m"}))))}const ad=o.i18n.translate("xpack.synthetics.overview.status.headingText",{defaultMessage:"Current status"}),nd=o.i18n.translate("xpack.synthetics.overview.status.up.description",{defaultMessage:"Up"}),rd=o.i18n.translate("xpack.synthetics.overview.status.down.description",{defaultMessage:"Down"}),id=o.i18n.translate("xpack.synthetics.overview.status.pending.description",{defaultMessage:"Pending"}),sd=o.i18n.translate("xpack.synthetics.overview.status.disabled.description",{defaultMessage:"Disabled"}),od=o.i18n.translate("xpack.synthetics.overview.status.error.title",{defaultMessage:"Unable to get monitor status metrics"}),ld=()=>{const{statusFilter:e}=ke(),[t,a]=Me(),{status:n}=Zu({scopeStatusByLocation:!0}),i=[{id:"up",label:ud},{id:"down",label:cd},{id:"disabled",label:dd}];return null!=n&&n.pending&&(null==n?void 0:n.pending)>0&&i.push({id:"pending",label:md}),r.a.createElement(y.EuiButtonGroup,{buttonSize:"m",legend:o.i18n.translate("xpack.synthetics.overview.status.filters.legend",{defaultMessage:"Monitor status"}),options:i,idSelected:e,onChange:t=>{a({statusFilter:e!==t?t:void 0})}})},cd=o.i18n.translate("xpack.synthetics.overview.status.filters.down",{defaultMessage:"Down"}),ud=o.i18n.translate("xpack.synthetics.overview.status.filters.up",{defaultMessage:"Up"}),dd=o.i18n.translate("xpack.synthetics.overview.status.filters.disabled",{defaultMessage:"Disabled"}),md=o.i18n.translate("xpack.synthetics.overview.status.filters.pending",{defaultMessage:"Pending"});var pd=a(99),fd=a.n(pd);function gd(){const{query:e}=ke(),[t,a]=Me(),[i,s]=Object(n.useState)("");fd()((()=>{i!==e&&a({query:i})}),300,[i]);const o=Object(n.useRef)(!1);return Object(n.useEffect)((()=>{e===i||o.current||s(e)}),[e]),r.a.createElement(bd,{fullWidth:!0,placeholder:hd,value:i,onChange:e=>{var t;o.current=!0,s(null!==(t=e.target.value)&&void 0!==t?t:"")},isClearable:!0,"aria-label":hd,"data-test-subj":"syntheticsOverviewSearchInput"})}const hd=o.i18n.translate("xpack.synthetics.monitorManagement.filter.placeholder",{defaultMessage:"Search by name, URL, host, tag, project or location"});var bd=G()(y.EuiFieldSearch).withConfig({displayName:"_StyledEuiFieldSearch",componentId:"sc-hu93im-0"})({minWidth:230});const Ed=()=>{const e=Os(),t=gc();return Object(n.useMemo)((()=>t&&e?{queryIdFilter:{"monitor.id":[t]},locationFilter:[{field:"observer.geo.name",values:[e.label,e.id]}]}:{}),[t,e])},vd=({from:e,to:t,id:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:i}}=Object(p.useKibana)().services,{queryIdFilter:s,locationFilter:o}=Ed(),l=Object(n.useMemo)((()=>({from:e,to:t})),[e,t]);return s?r.a.createElement(i,{id:a,align:"left",customHeight:"70px",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:l,reportDefinitions:s,dataType:"synthetics",selectedMetricField:"monitor_errors",name:yd,filters:o}]}):null},yd=o.i18n.translate("xpack.synthetics.monitorDetails.summary.errors",{defaultMessage:"Errors"}),xd=({from:e,to:t,monitorIds:a,locations:i})=>{const{exploratoryView:{ExploratoryViewEmbeddable:s}}=Object(p.useKibana)().services,{euiTheme:o}=Object(y.useEuiTheme)(),l=Object(n.useMemo)((()=>({from:e,to:t})),[e,t]);return r.a.createElement(s,{id:"overviewErrorsSparklines",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{time:l,seriesType:"area",reportDefinitions:{"monitor.id":a.length>0?a:["false-monitor-id"],...null!=i&&i.length?{"observer.geo.name":i}:{}},dataType:"synthetics",selectedMetricField:"monitor_errors",name:yd,color:o.colors.danger,operationType:"unique_count"}]})},Sd=({monitorIds:e,from:t,to:a,locations:i})=>{const{exploratoryView:{ExploratoryViewEmbeddable:s}}=Object(p.useKibana)().services,o=Object(n.useMemo)((()=>({from:t,to:a})),[t,a]);return r.a.createElement(s,{id:"overviewErrorsCount",align:"left",customHeight:"70px",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:o,reportDefinitions:{"monitor.id":e.length>0?e:["false-monitor-id"],...null!=i&&i.length?{"observer.geo.name":i}:{}},dataType:"synthetics",selectedMetricField:"monitor_errors",name:yd}]})};function kd(){const{status:e}=Object(u.useSelector)(ze.f),t=!(null!=e&&e.allIds)||0===(null==e?void 0:e.allIds.length),{from:a,to:n}=Te(6,"hours"),{locations:i}=ke(),s=Sc();return r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,Md)),r.a.createElement(y.EuiSpacer,{size:"s"}),t?r.a.createElement(y.EuiSkeletonText,{lines:3}):r.a.createElement(y.EuiFlexGroup,{gutterSize:"xl"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Sd,{from:a,to:n,monitorIds:s,locations:i})),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(xd,{from:a,to:n,monitorIds:s,locations:i}))))}const Md=o.i18n.translate("xpack.synthetics.overview.errors.headingText",{defaultMessage:"Last 6 hours"});var wd=a(79),Td=a(73);const Od=({isAlertingEnabled:e})=>{var t,a;const i=Object(u.useDispatch)(),s=Object(u.useSelector)(Mt),o=Object(u.useSelector)(Tt),{settings:l}=Object(u.useSelector)(wd.b),c=!l||!Object(ln.isEmpty)(null==l?void 0:l.defaultConnectors),{canSave:d}=at(),{data:{monitors:m},loaded:p}=Object(u.useSelector)(q.M),g=null===(t=ut())||void 0===t||null===(a=t.share)||void 0===a?void 0:a.url.locators,h=null==g?void 0:g.get(Ye.syntheticsSettingsLocatorID),{data:b}=Object(f.useFetcher)((()=>null==h?void 0:h.getUrl({})),[h]),E=null!=e?e:p&&m.some((e=>{var t,a;return null===(t=e[Ge.c.ALERT_CONFIG])||void 0===t||null===(a=t.status)||void 0===a?void 0:a.enabled})),v=!c&&E,x=!(!o||Boolean((null==s?void 0:s.statusRule)&&(null==s?void 0:s.tlsRule))||d);return Object(n.useEffect)((()=>{i(Td.b.get())}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Cd,{url:b,missingConfig:Boolean(v),missingRules:x}),r.a.createElement(y.EuiSpacer,{size:"m"}))},Cd=({url:e,missingRules:t,missingConfig:a})=>{const[n,i]=Object(U.useSessionStorage)("MissingRulesCalloutHidden",!1);if(!a&&!t||n)return null;const s=t===a?"* ":"",o=a?r.a.createElement(y.EuiMarkdownFormat,null,`${s}${Id}`):null,l=t?r.a.createElement(y.EuiMarkdownFormat,null,`${s}${jd}`):null;return r.a.createElement(y.EuiCallOut,{title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.alerting.noConnectorsCallout.header",defaultMessage:"Alerts are not being sent"}),color:"warning",iconType:"warning"},r.a.createElement("p",null,o,l),a&&r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsAlertingCalloutLinkButtonButton",href:e,color:"warning"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.alerting.noConnectorsCallout.button",defaultMessage:"Configure now"})),r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsMissingRulesCalloutRemindMeLaterButton",onClick:()=>{i(!0)}},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.alerting.remindMeLater.button",defaultMessage:"Remind me later"})))},Id=o.i18n.translate("xpack.synthetics.alerting.noConnectorsCallout.content",{defaultMessage:"You have monitors with alerting enabled, but there is no default connector configured to send those alerts."}),jd=o.i18n.translate("xpack.synthetics.alerting.missingRules.content",{defaultMessage:"You have monitors with alerting enabled, but there is no rules configured to send those alerts. Default rules are automatically created when user with write privileges opens Synthetics app."}),_d=()=>{Object(f.useTrackPageview)({app:"synthetics",path:"overview"}),Object(f.useTrackPageview)({app:"synthetics",path:"overview",delay:15e3}),(()=>{var e,t;const a=null!==(e=null===(t=Object(p.useKibana)().services.application)||void 0===t?void 0:t.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==e?e:"";Ie([{text:Ic,href:`${a}`}])})();const e=Object(u.useDispatch)(),{lastRefresh:t}=X(),{search:a}=Object(R.useLocation)(),{loading:i,locationsLoaded:s}=Object(u.useSelector)(q.X);Object(n.useEffect)((()=>{i||s||e(Object(Oc.b)())}),[e,s,i]);const{isEnabled:o,loading:l}=je(),{loaded:d,data:{monitors:m},pageState:g}=Object(u.useSelector)(q.R),{loading:h,loaded:b,handleFilterChange:E,absoluteTotal:v}=Cc();Object(n.useEffect)((()=>{d||e(q.l.get(g))}),[e,g,d]),Object(n.useEffect)((()=>{b&&e(q.y.get(g))}),[e,t]);const x=!a&&!l&&b&&0===v;if(x&&!h&&o)return r.a.createElement(R.Redirect,{to:c.h});if(!o&&x)return r.a.createElement(R.Redirect,{to:c.n});const S=b&&d&&0===(null==m?void 0:m.length);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ta,{total:v}),r.a.createElement(Od,null),r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!0},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(gd,null)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(ld,null)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(oc,{handleFilterChange:E}))),r.a.createElement(y.EuiSpacer,null),S?r.a.createElement(Uu,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(td,null)),r.a.createElement(y.EuiFlexItem,{grow:3,style:{minWidth:300}},r.a.createElement(kd,null)),r.a.createElement(y.EuiFlexItem,{grow:3,style:{minWidth:300}},r.a.createElement(kc,null))),r.a.createElement(y.EuiSpacer,null),r.a.createElement(Xu,null)))},Fd=()=>r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitors.pageHeader.title",defaultMessage:"Monitors"}))),Pd=()=>{const{basePath:e}=Object(n.useContext)(et),{isEnabled:t,isServiceAllowed:a}=je(),i=Gt();return r.a.createElement(ia,{canEditSynthetics:i},r.a.createElement(y.EuiButton,{color:"primary",fill:!0,iconSide:"left",iconType:"plusInCircleFilled",href:`${e}/app/synthetics${c.o}`,isDisabled:!t||!i||!a,"data-test-subj":"syntheticsAddMonitorBtn"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitors.pageHeader.createButton.label",defaultMessage:"Create Monitor"})))},Ld=({title:e,body:t,icon:a})=>r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"65vh"}},r.a.createElement(y.EuiFlexItem,{grow:!1,style:{textAlign:"center"}},r.a.createElement("span",null,a),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiTitle,{size:"m"},e),r.a.createElement(y.EuiSpacer,{size:"m"}),t&&r.a.createElement(y.EuiText,{color:"subdued"},t))),Rd=({loading:e,loadingTitle:t,error:a,errorTitle:n,errorBody:i,children:s})=>r.a.createElement(r.a.Fragment,null,e||a?null:s,a&&!e?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"xxl"}),r.a.createElement(y.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:r.a.createElement("h2",null,n),body:r.a.createElement("p",null,i)})):null,e?r.a.createElement(Ld,{icon:r.a.createElement(y.EuiLoadingSpinner,{size:"xxl"}),title:r.a.createElement("h3",null,t)}):null),Dd=o.i18n.translate("xpack.synthetics.emptyState.enablement.title",{defaultMessage:"Monitor the status of your services and applications with Synthetics"}),Ad=o.i18n.translate("xpack.synthetics.emptyState.enablement.disabledDescription",{defaultMessage:"Run automated checks based on real-browser simulations and lightweight endpoint pings to measure the experience of your users from any location worldwide."}),Nd=o.i18n.translate("xpack.synthetics.emptyState.enablement.contactAdministrator",{defaultMessage:"Only administrators can enable this feature."}),zd=(o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.title",{defaultMessage:"Enable"}),o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.doc",{defaultMessage:"Read the docs"})),Bd=o.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.learnMore",{defaultMessage:"Want to learn more?"}),Hd=()=>{const{isEnabled:e,loading:t}=je();return e||t?null:r.a.createElement(y.EuiEmptyPrompt,{title:r.a.createElement("h2",null,Dd),body:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,Ad),r.a.createElement("p",null,Nd)),footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiTitle,{size:"xxs"},r.a.createElement("h3",null,Bd)),r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsEnablementEmptyStateLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started-ui.html#uptime-set-up-prereq",target:"_blank"},zd))})},Gd=()=>{const[e,t]=Object(n.useState)(!1),{data:{syncErrors:a}}=Object(u.useSelector)(q.M),{locations:i}=Object(u.useSelector)(q.X);return a&&a.length>0&&!e?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.title",defaultMessage:"Some monitors are not running correctly"}),color:"warning",iconType:"warning"},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.content",defaultMessage:"There was a problem running your monitors for one or more locations:"})),r.a.createElement("ul",null,Object.values(null!=a?a:{}).map((e=>{var t,a,n,s,o;return r.a.createElement("li",{key:e.locationId},`${null===(t=i.find((t=>t.id===e.locationId)))||void 0===t?void 0:t.label} - ${$d}: ${null!==(a=null===(n=e.error)||void 0===n?void 0:n.status)&&void 0!==a?a:Ud}; ${Vd}: ${null!==(s=null===(o=e.error)||void 0===o?void 0:o.reason)&&void 0!==s?s:Ud}`)}))),r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsMonitorAsyncErrorButton",onClick:()=>t(!0),color:"warning"},qd)),r.a.createElement(y.EuiSpacer,{size:"m"})):null},Vd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.reasonLabel",{defaultMessage:"Reason"}),$d=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.statusLabel",{defaultMessage:"Status"}),Ud=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.notAvailable",{defaultMessage:"Not available"}),qd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.dismissLabel",{defaultMessage:"Dismiss"}),Wd=function({handleFilterChange:e}){return r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:2},r.a.createElement(gd,null)),r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(oc,{handleFilterChange:e})))},Kd=({name:e,reloadPage:t,configId:a,isProjectMonitor:i,setMonitorPendingDeletion:s})=>{const[l,c]=Object(n.useState)(!1),{status:u}=Object(f.useFetcher)((()=>{if(l)return Object(q.f)({configId:a})}),[a,l]);return Object(n.useEffect)((()=>{const{core:a,toasts:n}=N.a;l&&(u===f.FETCH_STATUS.FAILURE?n.addDanger({title:Object(kr.a)(r.a.createElement("p",{"data-test-subj":"uptimeDeleteMonitorFailure"},xa),a)},{toastLifeTimeMs:3e3}):u===f.FETCH_STATUS.SUCCESS&&(t(),n.addSuccess({title:Object(kr.a)(r.a.createElement("p",{"data-test-subj":"uptimeDeleteMonitorSuccess"},o.i18n.translate("xpack.synthetics.monitorManagement.monitorDeleteSuccessMessage.name",{defaultMessage:'Deleted "{name}"',values:{name:e}})),a)},{toastLifeTimeMs:3e3})),u!==f.FETCH_STATUS.SUCCESS&&u!==f.FETCH_STATUS.FAILURE||(c(!1),s(null)))}),[c,l,t,u,s,e]),r.a.createElement(y.EuiConfirmModal,{title:o.i18n.translate("xpack.synthetics.monitorManagement.deleteMonitorNameLabel",{defaultMessage:'Delete "{name}" monitor?',values:{name:e}}),onCancel:()=>s(null),onConfirm:()=>{c(!0)},cancelButtonText:ya,confirmButtonText:va,buttonColor:"danger",defaultFocusedButton:"confirm",isLoading:l},i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{color:"warning",title:Yd},r.a.createElement("p",null,r.a.createElement(Xd,null))),r.a.createElement(y.EuiSpacer,{size:"m"})))},Yd=o.i18n.translate("xpack.synthetics.monitorManagement.monitorList.disclaimer.title",{defaultMessage:"Deleting this monitor will not remove it from the project source"}),Xd=()=>r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorList.disclaimer.label",defaultMessage:"To delete it completely and stop it from being pushed again in the future, delete it from the project source. {docsLink}.",values:{docsLink:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsProjectMonitorDisclaimerLearnMoreLink",href:"https://elastic.co/guide/en/observability/current/synthetics-manage-monitors.html#manage-monitors-delete",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorManagement.projectDelete.docsLink",{defaultMessage:"Learn more"}))}}),Jd=({monitor:e})=>{var t,a,n;const i=Object(u.useSelector)(q.W),s=null===(t=e[Ge.c.LOCATIONS])||void 0===t?void 0:t.find((e=>e.id===i)),o=null===(a=e[Ge.c.LOCATIONS])||void 0===a||null===(n=a[0])||void 0===n?void 0:n.id,l=i&&s?i:o,c=Ca({configId:e[Ge.c.CONFIG_ID],locationId:l});return r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorDetailsLinkLink",href:c},e.name)},Qd=({locations:e,monitorId:t,overviewStatus:a})=>{const{eui:{euiColorVis9:n,euiColorVis0:i,euiColorDisabled:s}}=Object(f.useTheme)(),o=e.map((e=>{var r;const o=`${t}-${e.id}`;let l="unknown",c=s;return null!=a&&a.downConfigs[o]?(l="down",c=n):null!=a&&a.upConfigs[o]&&(l="up",c=i),{id:e.id,label:null!==(r=e.label)&&void 0!==r?r:e.id,status:l,color:c}}));return r.a.createElement(Ia,{configId:t,locations:o,loading:!1})};const Zd=({pageState:{pageIndex:e,pageSize:t,sortField:a,sortOrder:i},syntheticsMonitors:s,total:l,error:c,loading:u,overviewStatus:d,loadPage:m,reloadPage:g})=>{var h,b;const E=Object(y.useIsWithinMinBreakpoint)("xxl"),[v,x]=Object(n.useState)(null),S=Object(n.useCallback)((({page:e={index:0,size:10},sort:t={field:Ge.c.NAME,direction:"asc"}})=>{const{index:a,size:n}=e,{field:r,direction:i}=t;m({pageIndex:a,pageSize:n,sortField:"enabled"===r?r:`${r}.keyword`,sortOrder:i})}),[m]),k={pageIndex:e,pageSize:t,totalItemCount:l,pageSizeOptions:[5,10,25,50,100]},M={sort:{field:null==a?void 0:a.replace(".keyword",""),direction:i}},w=(({rangeStart:e,rangeEnd:t,total:a})=>{const n=Math.min(t,a);return r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.management.monitorList.recordRange",defaultMessage:"Showing {range} of {total} {monitorsLabel}",values:{range:r.a.createElement("strong",null,r.a.createElement(y.EuiI18nNumber,{value:e}),"-",r.a.createElement(y.EuiI18nNumber,{value:n})),total:r.a.createElement(y.EuiI18nNumber,{value:a}),monitorsLabel:r.a.createElement("strong",null,o.i18n.translate("xpack.synthetics.management.monitorList.configurationRangeLabel",{defaultMessage:"{monitorCount, plural, one {Configuration} other {Configurations}}",values:{monitorCount:a}}))}})})({rangeStart:0===l?0:t*e+1,rangeEnd:t*e+t,total:l}),T=function({loading:e,overviewStatus:t,setMonitorPendingDeletion:a}){var n,i,s,l;const c=Object(R.useHistory)(),{http:u}=Object(p.useKibana)().services,d=Gt(),{isServiceAllowed:m}=je(),{alertStatus:g,updateAlertEnabledState:h}=kn(),b=e=>g(e[Ge.c.CONFIG_ID])===f.FETCH_STATUS.LOADING,E=null===(n=null===(i=Object(p.useKibana)().services)||void 0===i||null===(s=i.application)||void 0===s?void 0:s.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===n||n,v=e=>!e.locations.some((e=>e.isServiceManaged))||Boolean(E),x=[{align:"left",field:Ge.c.NAME,name:o.i18n.translate("xpack.synthetics.management.monitorList.monitorName",{defaultMessage:"Monitor"}),sortable:!0,render:(e,t)=>r.a.createElement(Jd,{monitor:t})},...null!==(l=null==t?void 0:t.projectMonitorsCount)&&void 0!==l&&l?[{align:"left",field:Ge.c.PROJECT_ID,name:o.i18n.translate("xpack.synthetics.management.monitorList.projectId",{defaultMessage:"Project ID"}),sortable:!0}]:[],{align:"left",field:Ge.c.MONITOR_TYPE,name:o.i18n.translate("xpack.synthetics.management.monitorList.monitorType",{defaultMessage:"Type"}),sortable:!0,render:(e,t)=>{return r.a.createElement(Aa,{monitor:t,ariaLabel:(a=t[Ge.c.MONITOR_TYPE],o.i18n.translate("xpack.synthetics.management.filter.clickTypeMessage",{defaultMessage:"Click to filter records for type {typeName}.",values:{typeName:a}})),onClick:()=>{c.push({search:`monitorTypes=${encodeURIComponent(JSON.stringify([t[Ge.c.MONITOR_TYPE]]))}`})}});var a}},{align:"left",field:Ge.c.SCHEDULE,sortable:!0,name:o.i18n.translate("xpack.synthetics.management.monitorList.frequency",{defaultMessage:"Frequency"}),render:e=>(e=>e.unit===Ge.w.SECONDS?r.a.createElement(y.EuiText,{size:"s"},o.i18n.translate("xpack.synthetics.management.monitorList.frequencyInSeconds",{description:"Monitor frequency in seconds",defaultMessage:"{countSeconds, number} {countSeconds, plural, one {second} other {seconds}}",values:{countSeconds:Number(e.number)}})):r.a.createElement(y.EuiText,{size:"s"},o.i18n.translate("xpack.synthetics.management.monitorList.frequencyInMinutes",{description:"Monitor frequency in minutes",defaultMessage:"{countMinutes, number} {countMinutes, plural, one {minute} other {minutes}}",values:{countMinutes:Number(e.number)}})))(e)},{align:"left",field:Ge.c.LOCATIONS,name:o.i18n.translate("xpack.synthetics.management.monitorList.locations",{defaultMessage:"Locations"}),render:(e,a)=>{var n;return e?r.a.createElement(Qd,{monitorId:null!==(n=a[Ge.c.CONFIG_ID])&&void 0!==n?n:a.id,locations:e,overviewStatus:t}):null}},{align:"left",field:Ge.c.TAGS,name:o.i18n.translate("xpack.synthetics.management.monitorList.tags",{defaultMessage:"Tags"}),render:e=>r.a.createElement(At,{tags:e,onClick:e=>{c.push({search:`tags=${encodeURIComponent(JSON.stringify([e]))}`})}})},{align:"left",field:Ge.c.ENABLED,sortable:!0,name:o.i18n.translate("xpack.synthetics.management.monitorList.enabled",{defaultMessage:"Enabled"}),render:(t,a)=>r.a.createElement(Ta,{configId:a[Ge.c.CONFIG_ID],monitor:a,reloadPage:()=>{},isSwitchable:!e})},{align:"right",name:o.i18n.translate("xpack.synthetics.management.monitorList.actions",{defaultMessage:"Actions"}),actions:[{"data-test-subj":"syntheticsMonitorEditAction",isPrimary:!0,name:e=>r.a.createElement(ia,{canEditSynthetics:d,canUsePublicLocations:v(e)},fa),description:fa,icon:"pencil",type:"icon",enabled:e=>d&&!b(e)&&v(e)&&m,href:e=>null==u?void 0:u.basePath.prepend(`edit-monitor/${e[Ge.c.CONFIG_ID]}`)},{"data-test-subj":"syntheticsMonitorCopyAction",isPrimary:!0,name:e=>r.a.createElement(ia,{canEditSynthetics:d,canUsePublicLocations:v(e)},ga),description:ga,icon:"copy",type:"icon",enabled:e=>d&&!b(e)&&v(e)&&m,href:e=>null==u?void 0:u.basePath.prepend(`add-monitor?cloneId=${e[Ge.c.CONFIG_ID]}`)},{"data-test-subj":"syntheticsMonitorDeleteAction",isPrimary:!0,name:e=>r.a.createElement(ia,{canEditSynthetics:d,canUsePublicLocations:v(e)},Ea),description:Ea,icon:"trash",type:"icon",color:"danger",enabled:e=>d&&!b(e)&&v(e),onClick:e=>{a(e)}},{description:ba,name:e=>Object(Sn.b)(e[Ge.c.ALERT_CONFIG])?ba:ha,icon:e=>Object(Sn.b)(e[Ge.c.ALERT_CONFIG])?"bellSlash":"bell",type:"icon",color:"danger",enabled:e=>d&&!b(e)&&v(e)&&m,onClick:e=>{h({monitor:{[Ge.c.ALERT_CONFIG]:Object(Sn.c)(e[Ge.c.ALERT_CONFIG])},name:e[Ge.c.NAME],configId:e[Ge.c.CONFIG_ID]})}}]}];return d||(x[x.length-1]={align:"right",name:o.i18n.translate("xpack.synthetics.management.monitorList.actions",{defaultMessage:"Actions"}),render:()=>r.a.createElement(ia,{canEditSynthetics:d},r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsUseMonitorListColumnsButton",iconType:"boxesHorizontal",isDisabled:!0,"aria-label":ua}))}),x}({loading:u,overviewStatus:d,setMonitorPendingDeletion:x});return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none"},w,r.a.createElement(y.EuiHorizontalRule,{margin:"s"}),r.a.createElement(y.EuiBasicTable,{"aria-label":o.i18n.translate("xpack.synthetics.management.monitorList.title",{defaultMessage:"Synthetics monitors list"}),error:null==c||null===(h=c.body)||void 0===h?void 0:h.message,loading:u,itemId:"monitor_id",items:s,columns:T,tableLayout:E?"auto":"fixed",pagination:k,sorting:M,onChange:S,noItemsMessage:u?ma:pa})),v&&r.a.createElement(Kd,{configId:v[Ge.c.CONFIG_ID],name:null!==(b=v[Ge.c.NAME])&&void 0!==b?b:"",setMonitorPendingDeletion:x,isProjectMonitor:v[Ge.c.MONITOR_SOURCE_TYPE]===Ge.z.PROJECT,reloadPage:g}))},em=({monitorIds:e})=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,a=Object(f.useTheme)(),{from:n,to:i}=Te(30,"days");return r.a.createElement(t,{align:"left",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:{from:n,to:i},reportDefinitions:{"monitor.id":e.length>0?e:["false-monitor-id"]},dataType:"synthetics",selectedMetricField:"monitor_total_runs",filters:[],name:ea,color:a.eui.euiColorVis1}]})},tm=({monitorIds:e})=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,a=Object(f.useTheme)(),{from:i,to:s}=Te(30,"days"),o=Object(n.useMemo)((()=>[{seriesType:"area",time:{from:i,to:s},reportDefinitions:{"monitor.id":e.length>0?e:["false-monitor-id"]},dataType:"synthetics",selectedMetricField:"total_test_runs",filters:[],name:ea,color:a.eui.euiColorVis1,operationType:"count"}]),[i,JSON.stringify({ids:[...e].sort()}),a.eui.euiColorVis1,s]);return r.a.createElement(t,{id:"monitor-test-runs-sparkline",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:o,customHeight:"68px"})},am=({overviewStatus:e})=>{var t,a;const{euiTheme:n}=Object(y.useEuiTheme)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"l"},r.a.createElement(im,{"data-test-subj":"syntheticsManagementSummaryStats",hasBorder:!0,hasShadow:!1,$_css:n.size.l},r.a.createElement(y.EuiText,null,r.a.createElement("h5",null,Jt)),r.a.createElement(sm,{$_css2:n.size.l},r.a.createElement(rm,{description:Qt,value:null==e?void 0:e.allMonitorsCount}),r.a.createElement(rm,{description:Zt,value:null==e?void 0:e.disabledMonitorsCount}))),r.a.createElement(om,{hasBorder:!0,hasShadow:!1,$_css3:n.size.l},r.a.createElement(y.EuiText,null,r.a.createElement("h5",null,o.i18n.translate("xpack.synthetics.monitorManagement.lastXDays",{defaultMessage:"Last {count, number} {count, plural, one {day} other {days}}",values:{count:30}}))),r.a.createElement(lm,{$_css4:n.size.l},r.a.createElement(em,{monitorIds:null!==(t=null==e?void 0:e.allIds)&&void 0!==t?t:[]}),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(tm,{monitorIds:null!==(a=null==e?void 0:e.allIds)&&void 0!==a?a:[]}))))))},nm=Object(m.euiStyled)(y.EuiStat)`
  &&& {
  color: ${({theme:e})=>e.eui.euiTitleColor};
    .euiStat__title {
        color: ${({theme:e})=>e.eui.euiTitleColor};
        font-size: ${({theme:e})=>e.eui.euiFontSizeXL};
    }
  }
`,rm=({description:e,value:t})=>{var a;const{euiTheme:n}=Object(y.useEuiTheme)(),i=null!==(a=t)&&void 0!==a?a:void 0;return r.a.createElement(nm,{description:e,isLoading:isNaN(i),title:r.a.createElement(cm,{value:i,$_css5:n.size.m}),reverse:!0})};var im=G()(y.EuiPanel)((e=>({display:"flex",flexDirection:"column",gap:e.$_css,flexGrow:1}))),sm=G()(y.EuiFlexItem)((e=>({display:"flex",flexDirection:"row",gap:e.$_css2}))),om=G()(y.EuiPanel)((e=>({display:"flex",flexDirection:"column",gap:e.$_css3,flexGrow:12,minWidth:260}))),lm=G()(y.EuiFlexItem)((e=>({display:"flex",flexDirection:"row",gap:e.$_css4,height:"200px"}))),cm=G()(y.EuiI18nNumber).withConfig({displayName:"_StyledEuiI18nNumber",componentId:"sc-uhn8d-0"})((e=>({fontSize:e.$_css5})));const um=({isEnabled:e,monitorListProps:t})=>{const{pageState:a,error:n,loading:i,syntheticsMonitors:s,total:o,absoluteTotal:l,loadPage:c,reloadPage:d,handleFilterChange:m}=t,{status:p}=Object(u.useSelector)(ze.f);return e||0!==l?r.a.createElement(r.a.Fragment,null,r.a.createElement(Od,null),r.a.createElement(Gd,null),r.a.createElement(Wd,{handleFilterChange:m}),r.a.createElement(y.EuiSpacer,null),r.a.createElement(am,{overviewStatus:p}),r.a.createElement(y.EuiSpacer,null),r.a.createElement(Zd,{syntheticsMonitors:s,total:o,pageState:a,error:n,loading:i,loadPage:c,reloadPage:d,overviewStatus:p})):null},dm=e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";Ie([{text:mm,href:`${n}${c.n}`},...null!=e?e:[]])},mm=o.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),pm=()=>{Object(f.useTrackPageview)({app:"synthetics",path:"monitors"}),Object(f.useTrackPageview)({app:"synthetics",path:"monitors",delay:15e3}),dm();const{error:e,isEnabled:t,loading:a}=je();Zu({scopeStatusByLocation:!1});const n=Cc(),{syntheticsMonitors:i,loading:s,absoluteTotal:o,loaded:l}=n,{loading:u}=_e(),d=void 0!==t&&0===i.length;return t&&!s&&0===o&&l?r.a.createElement(R.Redirect,{to:c.h}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Rd,{loading:a||u,error:Boolean(e),loadingTitle:$t,errorTitle:Xt,errorBody:Yt},r.a.createElement(ta,{total:o}),r.a.createElement(um,{isEnabled:t,monitorListProps:n})),d&&r.a.createElement(Hd,null))},fm=(e,t,a,n)=>{const i={pageTitle:r.a.createElement(Fd,null),rightSideItems:[r.a.createElement(ec,null),r.a.createElement(Pd,null)]};return[{title:o.i18n.translate("xpack.synthetics.overviewRoute.title",{defaultMessage:"Synthetics Overview | {baseTitle}",values:{baseTitle:n}}),path:c.v,component:_d,dataTestSubj:"syntheticsOverviewPage",pageHeader:{...i,tabs:gm(a,"overview",t)}},{title:o.i18n.translate("xpack.synthetics.monitorManagementRoute.title",{defaultMessage:"Synthetics Management | {baseTitle}",values:{baseTitle:n}}),path:c.n,component:pm,dataTestSubj:"syntheticsMonitorManagementPage",pageHeader:{...i,tabs:gm(a,"management",t)}}]},gm=(e,t,a)=>[{label:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.overviewTab.title",defaultMessage:"Overview"}),href:`${e}${c.v}${a.search}`,isSelected:"overview"===t,"data-test-subj":"syntheticsMonitorOverviewTab"},{label:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorsTab.title",defaultMessage:"Management"}),href:`${e}${c.n}${a.search}`,isSelected:"management"===t,"data-test-subj":"syntheticsMonitorManagementTab"}],hm=Object(m.euiStyled)((e=>{const{observabilityShared:t}=Object(p.useKibana)().services,a=t.navigation.PageTemplate;return r.a.createElement(a,e)}))`
  &&& {
    .euiPageHeaderContent__top {
      flex-wrap: wrap;
      .euiTitle {
        min-width: 160px;
      }
    }
  }
`,bm=()=>{const{application:e}=Object(p.useKibana)().services,{monitorId:t}=Object(R.useParams)();return r.a.createElement(jl,{title:Em,body:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.prompt.errors.notFound.body",defaultMessage:"Sorry, the monitor with id {monitorId} can't be found. It might have been removed or you don't have permissions to view it.",values:{monitorId:r.a.createElement("strong",null,t)}}),actions:[r.a.createElement(Pd,null),r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsMonitorNotFoundPageGoToHomeButton",iconType:"arrowLeft",flush:"both",onClick:()=>{e.navigateToApp(Ce.a.SYNTHETICS_PLUGIN_ID)}},o.i18n.translate("xpack.synthetics.routes.createNewMonitor",{defaultMessage:"Go to Home"}))]})},Em=o.i18n.translate("xpack.synthetics.prompt.errors.notFound.title",{defaultMessage:"Monitor not found"});var vm=a(133),ym=a.n(vm);const xm=o.i18n.translate("xpack.synthetics.monitorSummary.recentlyViewed",{defaultMessage:"Recently viewed"}),Sm=({search:e=""})=>{const{monitorId:t}=Object(R.useParams)(),[a,r]=Object(n.useState)(e);Object(U.useDebounce)((()=>r(e)),500,[e]);const{loading:i,data:s}=Object(f.useFetcher)((async()=>{var e;const t=await Object(q.k)(Object(q.r)({query:a}));return(null!==(e=null==t?void 0:t.monitors)&&void 0!==e?e:[]).map((e=>({label:e.name,key:e.config_id,locationIds:e.locations.map((e=>e.id))})))}),[a]);return Object(n.useMemo)((()=>{const n=e.replace(/\s/g,"").toLowerCase(),r=Boolean((null!=s?s:[]).some((e=>t!==e.key&&e.label.replace(/\s/g,"").toLowerCase()===n)));return{loading:i||a!==e,nameAlreadyExists:r,values:(null!=s?s:[]).filter((e=>e.key!==t))}}),[i,t,s,e,a])},km=()=>{const{basePath:e}=at();return r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsAddMonitorLinkButton",href:`${e}/app/synthetics/add-monitor`},Mm)},Mm=o.i18n.translate("xpack.synthetics.monitorSummary.createNewMonitor",{defaultMessage:"Create monitor"}),wm=({closePopover:e})=>{const t=Object(R.useHistory)(),{recentMonitorOptions:a,loading:i}=(()=>{const[e,t]=ym()("xpack.synthetics.recentlyViewedMonitors",[]),a=Object(n.useRef)([]),r=gc(),i=JSON.stringify([...a.current.map((({key:e})=>e))].sort()),s=Object(n.useCallback)((()=>{const n=a.current.length?a.current.map((({monitorQueryId:e})=>e)):null!=e?e:[];r&&t([r,...n].filter(((e,t,a)=>a.indexOf(e)===t)).slice(0,5))}),[t,r,i]);Object(n.useEffect)((()=>{s()}),[s,r]);const{loading:o}=Object(f.useFetcher)((async()=>{const t=(null!=e?e:[]).filter((e=>e!==r));if(r&&t.length&&JSON.stringify([...t].sort())!==i){var n;const e=await Object(q.k)(Object(q.r)({pageSize:5,monitorQueryIds:t}));if(null!=e&&null!==(n=e.monitors)&&void 0!==n&&n.length){const n=t.reduce(((e,t,a)=>({...e,[t]:a})),{}),r=[...null==e?void 0:e.monitors].sort(((e,t)=>n[e.id]-n[t.id]));a.current=r.map((e=>{var t;return{key:e.id,monitorQueryId:e.id,label:e.name,locationIds:(null!==(t=e.locations)&&void 0!==t?t:[]).map((({id:e})=>e)),isGroupLabel:!1}})),s()}}}),[r]);return Object(n.useMemo)((()=>({loading:o,recentMonitorOptions:a.current.length?[{key:"recently_viewed",label:xm,isGroupLabel:!0},...a.current]:[]})),[o,i])})(),[s,o]=Object(n.useState)([]),[l,c]=Object(n.useState)(""),u=Os(),{basePath:d}=at(),{values:m,loading:p}=Sm({search:l});Object(n.useEffect)((()=>{const e=[];if(a.length>0&&!l){const t=m.filter((e=>a.every((t=>t.key!==e.key))));t.length>0&&e.push({key:"monitors",label:jm,isGroupLabel:!0,locationIds:[]}),o([...a,...e,...t])}else o(m)}),[a,l,m]);const g=e=>{var t,a,n;return null!==(t=e.locationIds)&&void 0!==t&&t.includes(null!==(a=null==u?void 0:u.id)&&void 0!==a?a:"")?null==u?void 0:u.id:null===(n=e.locationIds)||void 0===n?void 0:n[0]};return r.a.createElement(y.EuiSelectable,{searchable:!0,isLoading:p||i,searchProps:{placeholder:Im,compressed:!0,onChange:e=>c(e),autoFocus:!0},options:s,onChange:a=>{o(a);const n=a.find((e=>"on"===e.checked));n&&t.push(`/monitor/${n.key}?locationId=${g(n)}`),e()},singleSelection:!0,listProps:{showIcons:!1},renderOption:(e,t)=>r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorSearchableListLink",href:`${d}/app/synthetics/monitor/${e.key}?locationId=${g(e)}`},r.a.createElement(y.EuiHighlight,{search:l},e.label)),noMatchesMessage:Cm,emptyMessage:r.a.createElement(km,null),loadingMessage:Tm},((e,t)=>r.a.createElement("div",{style:{width:280}},r.a.createElement(y.EuiPopoverTitle,{paddingSize:"s"},s.length>0||l||p||i?t:r.a.createElement(y.EuiText,{color:"subdued",size:"s",className:"eui-textCenter"},Om)),e)))},Tm=o.i18n.translate("xpack.synthetics.monitorSummary.loadingMonitors",{defaultMessage:"Loading monitors"}),Om=o.i18n.translate("xpack.synthetics.monitorSummary.noOtherMonitors",{defaultMessage:"No other monitors exist."}),Cm=o.i18n.translate("xpack.synthetics.monitorSummary.noResultsFound",{defaultMessage:"No monitors found. Try modifying your query."}),Im=o.i18n.translate("xpack.synthetics.monitorSummary.placeholderSearch",{defaultMessage:"Monitor name or tag"}),jm=o.i18n.translate("xpack.synthetics.monitorSummary.otherMonitors",{defaultMessage:"Other monitors"}),_m=()=>{const[e,t]=Object(n.useState)(!1),a=()=>{t(!1)},i=r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsMonitorSelectorButton",size:"s",iconType:"arrowDown",onClick:()=>{t(!e)},"aria-label":Pm});return r.a.createElement(n.Fragment,null,r.a.createElement(y.EuiPopover,{id:"monitorSelector",panelPaddingSize:"none",button:i,isOpen:e,closePopover:a},r.a.createElement(y.EuiPopoverTitle,{paddingSize:"s"},Fm),r.a.createElement(wm,{closePopover:a})))},Fm=o.i18n.translate("xpack.synthetics.monitorSummary.goToMonitor",{defaultMessage:"Go to monitor"}),Pm=o.i18n.translate("xpack.synthetics.monitorSummary.selectMonitor",{defaultMessage:"Select a different monitor to view its details"}),Lm=()=>{const{monitor:e}=Ts();return r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1,"data-test-subj":"monitorNameTitle"},null==e?void 0:e.name),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(_m,null)))};var Rm=a(71);const Dm=()=>{const e=Object(u.useDispatch)(),{monitor:t}=Ts(),a=Object(u.useSelector)(Object(Lt.e)(null==t?void 0:t.config_id)),n=Vt(null==t?void 0:t[Rm.b.LOCATIONS]),i=n?a?En:vn:da;return r.a.createElement(y.EuiToolTip,{content:i,key:i},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsRunTestManuallyButton",color:"success",iconType:"beaker",isLoading:!Boolean(t)||a,isDisabled:!n,onClick:()=>{t&&e(Lt.d.get({configId:t.config_id,name:t.name}))}},Am))},Am=o.i18n.translate("xpack.synthetics.monitorSummary.runTestManually",{defaultMessage:"Run test manually"}),Nm=()=>{const{latestPing:e,loading:t}=Rc();let a=e?$()(e.timestamp).fromNow():"--";return!e&&t&&(a=r.a.createElement(y.EuiSkeletonText,{lines:1})),r.a.createElement(y.EuiDescriptionList,{listItems:[{title:zm,description:r.a.createElement(y.EuiToolTip,{content:$()(null==e?void 0:e.timestamp).format("LLL"),position:"bottom"},r.a.createElement(r.a.Fragment,null,a))}]})},zm=o.i18n.translate("xpack.synthetics.monitorLastRun.lastRunLabel",{defaultMessage:"Last run"}),Bm=()=>{const{latestPing:e,loading:t}=Rc(),{monitor:a,isMonitorMissing:n}=Ts();return a?r.a.createElement(Kn,{status:null==e?void 0:e.monitor.status,monitor:a,loading:t,compressed:!1}):r.a.createElement(y.EuiDescriptionList,{align:"left",compressed:!1,listItems:[{title:Yn,description:n?r.a.createElement(r.a.Fragment,null):r.a.createElement(y.EuiSkeletonText,{lines:1})}]})},Hm=({isDisabled:e})=>{const{monitor:t}=Ts(),{monitorId:a}=Object(R.useParams)(),{dateRangeStart:i,dateRangeEnd:s}=ke(),o=Os(),{services:l}=Object(p.useKibana)(),u=Object(R.useRouteMatch)(c.q),d=Object(R.useRouteMatch)(c.r),m=`&dateRangeStart=${i}&dateRangeEnd=${s}`;return r.a.createElement(tr,{isDisabled:e,monitorLocations:null==t?void 0:t.locations,configId:a,selectedLocation:o,onChange:Object(n.useCallback)(((e,t)=>{u?l.application.navigateToApp(Ce.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${a}/errors?locationId=${e}${m}`}):d?l.application.navigateToApp(Ce.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${a}/history/?locationId=${e}${m}`}):l.application.navigateToApp(Ce.a.SYNTHETICS_PLUGIN_ID,{path:`/monitor/${a}?locationId=${e}${m}`})}),[u,d,a,m,l.application])})},Gm=()=>{var e;const{monitor:t,isMonitorMissing:a}=Ts(),{monitorId:n}=Object(R.useParams)();return dm(t?[{text:null!==(e=null==t?void 0:t.name)&&void 0!==e?e:""}]:[]),a&&(null==t?void 0:t[Ge.c.CONFIG_ID])!==n?r.a.createElement(R.Redirect,{to:c.s.replace(":monitorId",n)}):null};function Vm(e){const{lastRefresh:t}=X(),{monitorId:a}=Object(R.useParams)(),{dateRangeStart:r,dateRangeEnd:i}=ke(),s=Os(),o=Object(f.useTimeZone)(),{data:l,loading:u}=Pe({index:c.A,body:{size:0,query:{bool:{filter:[Le.d,Le.b,{range:{"@timestamp":{gte:r,lte:i,time_zone:o}}},{term:{config_id:null!=e?e:a}},{term:{"observer.geo.name":null==s?void 0:s.label}}]}},sort:[{"state.started_at":"desc"}],aggs:{states:{terms:{field:"state.id",size:1e4},aggs:{summary:{top_hits:{size:1,_source:["error","state","monitor","@timestamp"],sort:[{"@timestamp":"desc"}]}}}},latest:{top_hits:{size:1,_source:["monitor.status"],sort:[{"@timestamp":"desc"}]}}}}},[t,a,e,r,i,null==s?void 0:s.label],{name:`getMonitorErrors/${r}/${i}`,isRequestReady:Boolean(null==s?void 0:s.label)});return Object(n.useMemo)((()=>{var e,t,a,n,r,i;const s={upStates:[],errorStates:[]},{errorStates:o,upStates:c}=null!==(e=null==l||null===(t=l.aggregations)||void 0===t?void 0:t.states.buckets.reduce(((e,t)=>{var a;const n=null===(a=t.summary.hits.hits)||void 0===a?void 0:a[0]._source;return 0===(null==n?void 0:n.state.up)?e.errorStates.push(n):null!=n&&n.state.up&&n.state.up>=1&&e.upStates.push(n),e}),s))&&void 0!==e?e:s,d=null!==(a=null==l||null===(n=l.aggregations)||void 0===n?void 0:n.latest.hits.hits)&&void 0!==a?a:[],m=1===d.length&&"down"===(null===(r=(null===(i=d[0])||void 0===i?void 0:i._source).monitor)||void 0===r?void 0:r.status)&&!(null==o||!o.length);return{errorStates:o,upStates:c.sort(((e,t)=>Number(new Date(e.state.started_at))-Number(new Date(t.state.started_at)))),loading:u,data:l,hasActiveError:m}}),[l,u])}const $m=({fullWidth:e})=>{const[t,a]=Me(),{commonlyUsedRanges:i}=Object(n.useContext)(et),{refreshApp:s}=Object(n.useContext)(K),{data:o}=Object(n.useContext)(lt),l=null==o?void 0:o.query.timefilter.timefilter.getTime(),{dateRangeStart:u,dateRangeEnd:d}=t();Object(n.useEffect)((()=>{const{from:e,to:t}=null!=l?l:{};e===u&&t===d||null==o||o.query.timefilter.timefilter.setTime({from:u,to:d})}),[]);const m=i?i.map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))):c.c.COMMONLY_USED_DATE_RANGES;return r.a.createElement(y.EuiSuperDatePicker,{width:e?"full":"auto",start:u,end:d,commonlyUsedRanges:m,onTimeChange:({start:e,end:t})=>{var n,r;null!=o&&null!==(n=o.query)&&void 0!==n&&null!==(r=n.timefilter)&&void 0!==r&&r.timefilter&&(null==o||o.query.timefilter.timefilter.setTime({from:e,to:t})),a({dateRangeStart:e,dateRangeEnd:t}),s()},onRefresh:s})},Um=({time:e})=>{const{failedSteps:t,loading:a}=function({to:e,from:t}){const{lastRefresh:a}=X(),{monitorId:r}=Object(R.useParams)(),i=Os(),s={index:c.A,body:{size:0,track_total_hits:!0,query:{bool:{filter:[{range:{"@timestamp":{lte:e,gte:t}}},Lc,{term:{"synthetics.step.status":"failed"}},{term:{"observer.geo.name":null==i?void 0:i.label}},{term:{config_id:r}}]}},aggs:{steps:{terms:{field:"synthetics.step.name.keyword",size:1e3},aggs:{doc:{top_hits:{size:1}}}}}}},{data:o,loading:l}=Pe(s,[a,r],{name:`getFailedTestsByStep/${r}`,isRequestReady:!!i});return Object(n.useMemo)((()=>{var e;const t=null==o?void 0:o.hits.total.value;return{failedSteps:null==o||null===(e=o.aggregations)||void 0===e?void 0:e.steps.buckets.map((({key:e,doc_count:a,doc:n})=>{var r,i,s,o;return{index:null===(r=n.hits.hits)||void 0===r||null===(i=r[0]._source)||void 0===i||null===(s=i.synthetics)||void 0===s||null===(o=s.step)||void 0===o?void 0:o.index,count:a,name:e,percent:a/t*100}})),loading:l}}),[o,l])}(e),{monitor:i}=Ts();return"browser"!==(null==i?void 0:i.type)?null:a&&!t?r.a.createElement(y.EuiSkeletonText,{lines:3}):r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(Bt,{title:qm},r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement("div",null,null==t?void 0:t.map((e=>r.a.createElement(n.Fragment,{key:e.name},r.a.createElement(y.EuiProgress,{valueText:r.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorDetails.summary.failedTests.count",{defaultMessage:"Failed {count}",values:{count:e.count}})),max:100,color:"danger",size:"l",value:e.percent,label:`${e.index}. ${e.name}`}),r.a.createElement(y.EuiSpacer,{size:"s"})))))))},qm=o.i18n.translate("xpack.synthetics.errors.failedTests.byStep",{defaultMessage:"Failed tests by step"}),Wm=({time:e,allowBrushing:t=!0})=>{const{exploratoryView:{ExploratoryViewEmbeddable:a}}=Object(p.useKibana)().services,{queryIdFilter:n,locationFilter:i}=Ed(),{errorStateId:s}=Object(R.useParams)(),[,o]=Me();return n||s?r.a.createElement(r.a.Fragment,null,r.a.createElement(a,{id:"failedTestsLineSeries",customHeight:"120px",reportType:"heatmap",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,attributes:[{time:e,reportDefinitions:{...n,...s?{"state.id":[s]}:{}},filters:i,dataType:"synthetics",selectedMetricField:"failed_tests",name:Km}],onBrushEnd:({range:e})=>{t&&o({dateRangeStart:$()(e[0]).toISOString(),dateRangeEnd:$()(e[1]).toISOString()})}}),r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,{grow:!0,style:{marginLeft:10}},r.a.createElement(y.EuiHealth,{color:"danger"},Km)),t&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{color:"subdued",size:"s"},Ym)))):null},Km=o.i18n.translate("xpack.synthetics.monitorDetails.summary.failedTests",{defaultMessage:"Failed tests"}),Ym=o.i18n.translate("xpack.synthetics.monitorDetails.summary.brushArea",{defaultMessage:"Brush an area for higher fidelity"}),Xm=({from:e,to:t,id:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:n}}=Object(p.useKibana)().services,{queryIdFilter:i,locationFilter:s}=Ed();return i?r.a.createElement(n,{id:a,reportType:"single-metric",attributes:[{time:{from:e,to:t},reportDefinitions:i,filters:s,dataType:"synthetics",selectedMetricField:"monitor_failed_tests",name:Km}]}):null},Jm=({errorStates:e,loading:t,upStates:a})=>{const n=Oe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(tp,{title:Zm,titleLeftAlign:!0},r.a.createElement(y.EuiFlexGroup,{wrap:!0,responsive:!1},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(vd,{from:n.from,to:n.to,id:"monitorsErrorsCountErrors"})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Xm,{from:n.from,to:n.to,id:"failedTestsCountErrors"}))))),r.a.createElement(y.EuiFlexItem,{grow:3},r.a.createElement(Bt,{title:ep},r.a.createElement(Wm,{time:n})))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},r.a.createElement(ap,{grow:2},r.a.createElement(Bt,{title:Qm},r.a.createElement(Ac,{errorStates:e,upStates:a,loading:t}))),r.a.createElement(Um,{time:n})))},Qm=o.i18n.translate("xpack.synthetics.errors.label",{defaultMessage:"Errors"}),Zm=o.i18n.translate("xpack.synthetics.errors.overview",{defaultMessage:"Overview"}),ep=o.i18n.translate("xpack.synthetics.errors.failedTests",{defaultMessage:"Failed tests"});var tp=G()(Bt)({minWidth:260}),ap=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-15w5bw9-0"})({minWidth:260});const np=({children:e})=>{const t=Object(u.useDispatch)(),a=Object(R.useHistory)(),i=Object(R.useLocation)(),s=Object(n.useRef)(i),{monitorId:o}=Object(R.useParams)(),{refreshApp:l}=X(),{latestPing:c,loaded:d}=Rc(),[m,p]=Object(n.useState)(!1),[f,g]=Object(n.useState)(!1),h=Object(n.useMemo)((()=>a.listen((e=>{const a=e.pathname.split("/")[2]||"",n=s.current.search!==e.search,r=a!==o;s.current=e,(n||r)&&(p(!1),g(!1),t(Object(q.z)()),l())}))),[a,o,t,l]);return Object(n.useEffect)((()=>function(){h()}),[h]),Object(n.useEffect)((()=>{d&&p(!0),d&&c&&g(!0)}),[d,c,t,h]),r.a.createElement(r.a.Fragment,null,m?null:r.a.createElement(Ld,{icon:r.a.createElement(y.EuiLoadingSpinner,{size:"xxl"}),title:r.a.createElement("h3",null,op),body:r.a.createElement("p",null,sp)}),m&&!f?r.a.createElement(Ld,{icon:r.a.createElement(y.EuiLoadingChart,{size:"xl",mono:!0}),title:r.a.createElement("h3",null,rp),body:r.a.createElement("p",null,ip)}):null,r.a.createElement("div",{style:m&&f?void 0:{display:"none"},"data-test-subj":"syntheticsPendingWrapperChildren"},e))},rp=o.i18n.translate("xpack.synthetics.monitorDetails.pending.heading",{defaultMessage:"Initial test run pending..."}),ip=o.i18n.translate("xpack.synthetics.monitorDetails.pending.content",{defaultMessage:"This page will refresh when data becomes available."}),sp=o.i18n.translate("xpack.synthetics.monitorDetails.loading.content",{defaultMessage:"This will take just a second."}),op=o.i18n.translate("xpack.synthetics.monitorDetails.loading.heading",{defaultMessage:"Loading monitor details"}),lp=()=>{const{errorStates:e,upStates:t,loading:a,data:n}=Vm(),i=!n,s=!a&&e&&0===(null==e?void 0:e.length);return Gm()||r.a.createElement(np,null,r.a.createElement($m,{fullWidth:!0}),r.a.createElement(y.EuiSpacer,{size:"m"}),i&&r.a.createElement(cp,null),s&&r.a.createElement(up,null),r.a.createElement("div",{style:{visibility:i||s?"collapse":"initial"}},r.a.createElement(Jm,{errorStates:e,upStates:t,loading:a})))},cp=()=>r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"65vh"}},r.a.createElement(y.EuiFlexItem,{grow:!1,style:{textAlign:"center"}},r.a.createElement("span",null,r.a.createElement(y.EuiLoadingSpinner,{size:"xxl"})),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h3",null,fp)),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiText,{color:"subdued"},pp))),up=()=>r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"65vh"}},r.a.createElement(y.EuiFlexItem,{grow:!1,style:{textAlign:"center"}},r.a.createElement("span",null,r.a.createElement(y.EuiIcon,{type:"checkInCircleFilled",color:"success",size:"xl"})),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h3",null,mp)),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiText,{color:"subdued"},dp))),dp=o.i18n.translate("xpack.synthetics.errors.keepCalm",{defaultMessage:"This monitor ran successfully during the selected period. Increase the time range to check for older errors."}),mp=o.i18n.translate("xpack.synthetics.errors.noErrorsFound",{defaultMessage:"No errors found"}),pp=o.i18n.translate("xpack.synthetics.errors.loadingDescription",{defaultMessage:"This will take just a second."}),fp=o.i18n.translate("xpack.synthetics.errors.checkingForErrors",{defaultMessage:"Checking for errors"}),gp=()=>{const{hasActiveError:e}=Vm();return e?r.a.createElement(y.EuiIcon,{type:"warning",color:"danger"}):null},hp=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),{queryIdFilter:a,locationFilter:n}=Ed();return a?r.a.createElement(t,{id:e.id,align:"left",customHeight:"70px",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:e,name:bp,dataType:"synthetics",selectedMetricField:"monitor_availability",reportDefinitions:{...a},filters:n}]}):null},bp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.availability",{defaultMessage:"Availability"}),Ep=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),{queryIdFilter:a,locationFilter:n}=Ed();return a?r.a.createElement(t,{id:e.id,align:"left",customHeight:"70px",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:e,name:vp,dataType:"synthetics",selectedMetricField:"monitor_duration",reportDefinitions:a,filters:n}]}):null},vp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.medianDuration",{defaultMessage:"Median duration"}),yp=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Ed();return a?r.a.createElement(t,{id:"monitorDurationTrend",customHeight:"240px",reportType:"kpi-over-time",attributes:Object.keys(wp).map((t=>({dataType:"synthetics",time:e,name:wp[t],selectedMetricField:"monitor.duration.us",reportDefinitions:a,filters:n,seriesType:"line",operationType:t})))}):null},xp=o.i18n.translate("xpack.synthetics.durationTrend.min",{defaultMessage:"Min"}),Sp=o.i18n.translate("xpack.synthetics.durationTrend.max",{defaultMessage:"Max"}),kp=o.i18n.translate("xpack.synthetics.durationTrend.median",{defaultMessage:"Median"}),Mp=o.i18n.translate("xpack.synthetics.durationTrend.percentile25",{defaultMessage:"25th"}),wp={max:Sp,"75th":o.i18n.translate("xpack.synthetics.durationTrend.percentile75",{defaultMessage:"75th"}),median:kp,"25th":Mp,min:xp};var Tp=a(52);const Op=({ping:e})=>{const[t,a]=Object(n.useState)(!1),i=Object(n.useContext)(ul),s=Ba(),[,o]=Object(Tp.useEsDocSearch)({id:e.docId,index:c.A,dataView:i});return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsViewDocumentButton",iconType:"inspect",title:Ip,onClick:e=>{e.stopPropagation(),a(!0)}}),t&&r.a.createElement(y.EuiFlyout,{onClose:()=>a(!1),ownFocus:!0,onClick:e=>{e.stopPropagation()}},r.a.createElement(y.EuiFlyoutHeader,null,r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h4",null,Cp," ",s(e.timestamp)))),r.a.createElement(y.EuiFlyoutBody,null,null!=i&&i.id&&o?r.a.createElement(Tp.UnifiedDocViewer,{hit:o,dataView:i}):r.a.createElement(dr,null))))},Cp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.indexedAt",{defaultMessage:"Indexed at"}),Ip=o.i18n.translate("xpack.synthetics.monitorDetails.action.inspectDocument",{defaultMessage:"Inspect document"}),jp=({content:e,dataTestSubj:t,isDisabled:a,value:n,withNext:i})=>{const s=Object(u.useSelector)(q.Y),o=Object(u.useDispatch)(),l=s===n;let c="text";return l&&(c="up"===n?"success":"down"===n?"danger":"text"),r.a.createElement(y.EuiFilterButton,{"data-test-subj":t,hasActiveFilters:l,isDisabled:a,onClick:()=>{o(Object(q.kb)(s===n?void 0:n))},withNext:i,color:c},e)},_p=()=>r.a.createElement(y.EuiFilterGroup,{compressed:!0},r.a.createElement(jp,{content:o.i18n.translate("xpack.synthetics.filterBar.filterAllLabel",{defaultMessage:"All"}),dataTestSubj:"xpack.synthetics.filterBar.filterStatusAll",value:void 0,withNext:!0}),r.a.createElement(jp,{content:Do,dataTestSubj:"xpack.synthetics.filterBar.filterStatusUp",value:"up",withNext:!0}),r.a.createElement(jp,{content:Ao,dataTestSubj:"xpack.synthetics.filterBar.filterStatusDown",value:"down",withNext:!1})),Fp=({pings:e,paginable:t,showViewHistoryButton:a=!0})=>{const n=Object(R.useHistory)(),i=ke(),{monitor:s}=Ts();return r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"l",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,t||(null==e?void 0:e.length)<10?Pp:Lp))),r.a.createElement(y.EuiFlexItem,{grow:!0}),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(_p,null)),r.a.createElement(y.EuiFlexItem,{grow:!1},a?r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsTestRunsTableHeaderLink",href:null!=s&&s[Ge.c.CONFIG_ID]?n.createHref({pathname:c.r.replace(":monitorId",s[Ge.c.CONFIG_ID]),search:ye({...i,dateRangeStart:"now-24h",dateRangeEnd:"now"},!0)}):void 0},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"monitorStatusChartViewHistoryButton",size:"xs",iconType:"list"},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewHistory",{defaultMessage:"View History"}))):null))},Pp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.testRuns",{defaultMessage:"Test Runs"}),Lp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTenTestRuns",{defaultMessage:"Last 10 Test Runs"}),Rp=({checkGroupId:e,size:t,timestamp:a})=>{var i,s,o;const{loading:l,stepEnds:c}=Ir(e),u=Object(n.useMemo)((()=>{const e=[...c];return e.sort(((e,t)=>Number(new Date(t["@timestamp"]))-Number(new Date(e["@timestamp"])))),e.find((e=>{var t,a,n;return"skipped"!==hs(null!==(t=null==e||null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.status)&&void 0!==t?t:"skipped")}))}),[c]);return r.a.createElement(ts,{checkGroup:null==u?void 0:u.monitor.check_group,initialStepNumber:null==u||null===(i=u.synthetics)||void 0===i||null===(s=i.step)||void 0===s?void 0:s.index,stepStatus:null==u||null===(o=u.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!l,retryFetchOnRevisit:!1,size:t,timestamp:a})},Dp=({paginable:e=!0,from:t,to:a,showViewHistoryButton:i=!0})=>{var s;const l=Object(R.useHistory)(),{basePath:d}=at(),{monitorId:p}=Object(R.useParams)(),[f,g]=Object(n.useState)({index:0,size:10}),[h,b]=Object(n.useState)("timestamp"),[E,v]=Object(n.useState)("desc"),{lastRefresh:x}=X(),{pings:S,total:k,loading:M}=(e=>{const t=Object(u.useDispatch)(),{monitor:a}=Ts(),r=Os(),i=null==a?void 0:a.id,s=null==r?void 0:r.label,o=Object(u.useSelector)(q.Y);Object(n.useEffect)((()=>{i&&s&&t(q.t.get({monitorId:i,locationId:s,size:null==e?void 0:e.pageSize,pageIndex:null==e?void 0:e.pageIndex,from:null==e?void 0:e.from,to:null==e?void 0:e.to,statusFilter:o}))}),[t,i,s,null==e?void 0:e.lastRefresh,null==e?void 0:e.pageSize,null==e?void 0:e.pageIndex,null==e?void 0:e.from,null==e?void 0:e.to,o]);const{total:l,data:c,loading:d}=Object(u.useSelector)(q.N);return{loading:d,total:l,pings:c}})({from:t,to:a,lastRefresh:x,pageSize:f.size,pageIndex:f.index}),w=Object(n.useMemo)((()=>function(e,t,a){const n=[...e];return n.sort(((e,n)=>{var r,i;let s=null!==(r=Object(ln.get)(e,t))&&void 0!==r?r:null,o=null!==(i=Object(ln.get)(n,t))&&void 0!==i?i:null;return null===s||null===o?0:("timestamp"===t&&(s=new Date(s),o=new Date(o)),"monitor.status"===t&&(s="up"===s?-1:1,o="up"===o?-1:1),"string"==typeof s?"asc"===a?s.localeCompare(o):o.localeCompare(s):"asc"===a?s-o:o-s)})),n}(S,h,E)),[S,h,E]),T=Object(u.useSelector)(q.T),{monitor:O}=Ts(),C=Os(),I=Object(y.useIsWithinMinBreakpoint)("s"),j=(null==O?void 0:O[Ge.c.MONITOR_TYPE])===Ge.q.BROWSER,{expandedRows:_,setExpandedRows:F}=_o(S),P={sort:{field:h,direction:E}},L=[...j?[{align:"left",field:"timestamp",name:zp,render:(e,t)=>r.a.createElement(Rp,{checkGroupId:t.monitor.check_group,size:[100,64],timestamp:e}),mobileOptions:{header:!1,render:e=>r.a.createElement(qp,{alignItems:"center"},r.a.createElement(Rp,{checkGroupId:e.monitor.check_group,size:Fi,timestamp:e.timestamp}))}}]:[],{align:"left",valign:"middle",field:"timestamp",name:"@timestamp",sortable:!0,render:(e,t)=>r.a.createElement(ao,{isBrowserMonitor:j,timestamp:e,ping:t}),mobileOptions:{header:!1,render:e=>r.a.createElement(Ap,{ping:e,isBrowserMonitor:j,basePath:d,locationId:null==C?void 0:C.id})}},{align:"left",valign:"middle",field:"monitor.status",name:Hp,sortable:!0,render:(e,t)=>{var a,n,i,s;const o=null!==(a=null===(n=t.summary)||void 0===n?void 0:n.attempt)&&void 0!==a?a:1;return null!==(i=null===(s=t.summary)||void 0===s?void 0:s.final_attempt)&&void 0!==i&&i&&1!==o?r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(gs,{status:hs(null!=e?e:"skipped")})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiIconTip,{"data-test-subj":"isRetestIcon",type:"refresh",content:Bp}))):r.a.createElement(gs,{status:hs(null!=e?e:"skipped")})},mobileOptions:{show:!1}},...j?[]:[{align:"left",field:"monitor.ip",sortable:!0,name:o.i18n.translate("xpack.synthetics.pingList.ipAddressColumnLabel",{defaultMessage:"IP"})}],{align:"left",field:"error.message",name:Gp,textOnly:!0,css:m.css`
        max-width: 500px;
      `,render:e=>r.a.createElement(y.EuiText,{size:"s"},(null==e?void 0:e.length)>0?e:"-"),mobileOptions:{show:!1}},{align:"right",valign:"middle",field:"monitor.duration.us",name:Vp,sortable:!0,render:e=>r.a.createElement(y.EuiText,{size:"s"},js(e)),mobileOptions:{show:!1}},{align:"right",actions:[{"data-test-subj":"syntheticsViewPingDocument",isPrimary:!0,name:Ip,description:Ip,icon:"inspect",type:"button",render:e=>r.a.createElement(Op,{ping:e})}]},...j?[]:[{align:"right",width:"24px",isExpander:!0,render:e=>r.a.createElement(Jo,{item:e,expandedRows:_,setExpandedRows:F})}]];return r.a.createElement(Wp,{hasShadow:!1,hasBorder:!0},r.a.createElement(Fp,{paginable:e,showViewHistoryButton:i,pings:S}),r.a.createElement(Kp,{itemId:"docId",itemIdToExpandedRowMap:_,loading:M,columns:L,error:null==T||null===(s=T.body)||void 0===s?void 0:s.message,items:w,noItemsMessage:M?$p:Up,tableLayout:"auto",sorting:P,onChange:({page:e,sort:t})=>{void 0!==e&&g(e),void 0!==t&&(b(t.field),v(t.direction))},rowProps:e=>({"data-test-subj":`row-${e.monitor.check_group}`,onClick:t=>{e.monitor.type!==c.u.BROWSER?Yo(e,_,F):l.push(ro({monitorId:p,checkGroup:e.monitor.check_group,locationId:null==C?void 0:C.id}))}}),pagination:e?{pageIndex:f.index,pageSize:f.size,totalItemCount:k,pageSizeOptions:[5,10,20,50]}:void 0,$_css:I?"auto":void 0}))},Ap=({ping:e,isBrowserMonitor:t,basePath:a,locationId:n})=>{var i,s,l,c,u,d,m,p;return r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"m"},r.a.createElement(ao,{isBrowserMonitor:t,timestamp:e.timestamp,ping:e}),r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center",wrap:!1,responsive:!1},r.a.createElement(Yp,null,r.a.createElement(gs,{status:hs(null!==(i=null==e||null===(s=e.monitor)||void 0===s?void 0:s.status)&&void 0!==i?i:"skipped")})),r.a.createElement(Xp,null,null!=e&&null!==(l=e.state)&&void 0!==l&&l.id&&e.config_id&&n&&"failed"===hs(null!==(c=null==e||null===(u=e.monitor)||void 0===u?void 0:u.status)&&void 0!==c?c:"skipped")?r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"monitorTestRunsListViewErrorDetails",color:"danger",href:Nc({basePath:a,configId:e.config_id,locationId:n,stateId:null==e||null===(d=e.state)||void 0===d?void 0:d.id})},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewErrorDetails",{defaultMessage:"View error details"})):null)),r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"s"},[{title:Vp,description:js(null==e||null===(m=e.monitor)||void 0===m||null===(p=m.duration)||void 0===p?void 0:p.us)}].map((({title:e,description:t})=>r.a.createElement(Jp,{key:e,direction:"row",alignItems:"baseline",gutterSize:"xs",responsive:!1,wrap:!0},r.a.createElement(y.EuiText,{size:"xs"},e),t)))))},Np=o.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTenTestRuns",{defaultMessage:"Last 10 Test Runs"}),zp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.screenshot",{defaultMessage:"Screenshot"}),Bp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.finalAttempt",{defaultMessage:"This is a retest since retry on failure is enabled."}),Hp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.result",{defaultMessage:"Result"}),Gp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.message",{defaultMessage:"Message"}),Vp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.duration",{defaultMessage:"Duration"}),$p=o.i18n.translate("xpack.synthetics.monitorDetails.loadingTestRuns",{defaultMessage:"Loading test runs..."}),Up=o.i18n.translate("xpack.synthetics.monitorDetails.noDataFound",{defaultMessage:"No data found"});var qp=G()(y.EuiFlexGroup)({width:"100%",height:"100%"}),Wp=G()(y.EuiPanel)({minHeight:200}),Kp=G()(y.EuiBasicTable)((e=>({overflowX:e.$_css}))),Yp=G()(y.EuiFlexItem)({flexBasis:"fit-content"}),Xp=G()(y.EuiFlexItem)({textAlign:"right"}),Jp=G()(y.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup2",componentId:"sc-17y6i0q-0"})({maxWidth:"fit-content"});const Qp=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Ed();return a?r.a.createElement(t,{id:"monitorSuccessfulCount",align:"left",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:a,filters:n,dataType:"synthetics",selectedMetricField:"monitor_successful",name:Zp}]}):null},Zp=o.i18n.translate("xpack.synthetics.monitorDetails.summary.successful",{defaultMessage:"Successful"}),ef=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Ed();return a?r.a.createElement(t,{id:"monitorTotalRunsCount",align:"left",reportType:B.ReportTypes.SINGLE_METRIC,attributes:[{time:e,reportDefinitions:a,filters:n,dataType:"synthetics",selectedMetricField:"monitor_total_runs",name:tf}]}):null},tf=o.i18n.translate("xpack.synthetics.monitorDetails.summary.totalRuns",{defaultMessage:"Total runs"}),af=({from:e,to:t,id:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:i}}=Object(p.useKibana)().services,{euiTheme:s}=Object(y.useEuiTheme)(),{queryIdFilter:o,locationFilter:l}=Ed(),c=Object(n.useMemo)((()=>({from:e,to:t})),[e,t]);return o?r.a.createElement(i,{id:a,reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{time:c,seriesType:"area",reportDefinitions:o,filters:l,dataType:"synthetics",selectedMetricField:"monitor_errors",name:yd,color:s.colors.danger,operationType:"unique_count"}]}):null},nf=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),{queryIdFilter:a,locationFilter:n}=Ed(),i=Object(f.useTheme)();return a?r.a.createElement(t,{id:e.id,customHeight:"70px",reportType:B.ReportTypes.KPI,axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,name:bp,dataType:"synthetics",selectedMetricField:"monitor_availability",reportDefinitions:a,filters:n,color:i.eui.euiColorVis1}]}):null},rf=e=>{const{services:{exploratoryView:{ExploratoryViewEmbeddable:t}}}=Object(p.useKibana)(),{queryIdFilter:a,locationFilter:n}=Ed(),i=Object(f.useTheme)();return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{id:e.id,reportType:B.ReportTypes.KPI,axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,name:vp,dataType:"synthetics",selectedMetricField:"monitor.duration.us",reportDefinitions:a,filters:n,color:i.eui.euiColorVis1}]})):null},sf=e=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,{queryIdFilter:a,locationFilter:n}=Ed(),{euiTheme:i}=Object(y.useEuiTheme)();return a?r.a.createElement(t,{id:"monitorSuccessfulSparklines",reportType:"kpi-over-time",axisTitlesVisibility:{x:!1,yRight:!1,yLeft:!1},legendIsVisible:!1,hideTicks:!0,attributes:[{seriesType:"area",time:e,reportDefinitions:a,filters:n,dataType:"synthetics",selectedMetricField:"monitor_successful",name:Zp,color:i.colors.success,operationType:"unique_count"}]}):null},of=o.i18n.translate("xpack.synthetics.monitorDetails.availability.label",{defaultMessage:"Availability"}),lf=o.i18n.translate("xpack.synthetics.monitorDetails.complete.label",{defaultMessage:"Complete"}),cf=o.i18n.translate("xpack.synthetics.monitorDetails.failed.label",{defaultMessage:"Failed"}),uf=o.i18n.translate("xpack.synthetics.monitorDetails.skipped.label",{defaultMessage:"Skipped"}),df=(o.i18n.translate("xpack.synthetics.monitorDetails.error.label",{defaultMessage:"Error"}),o.i18n.translate("xpack.synthetics.monitorDetails.status",{defaultMessage:"Status"})),mf=o.i18n.translate("xpack.synthetics.monitorDetails.last24Hours",{defaultMessage:"Last 24 hours"}),pf=o.i18n.translate("xpack.synthetics.monitorDetails.viewHistory",{defaultMessage:"View History"}),ff=o.i18n.translate("xpack.synthetics.monitorDetails.brushArea.message",{defaultMessage:"Brush an area for higher fidelity"}),gf=({from:e,to:t,periodCaption:a,showViewHistoryButton:n})=>{var i;const{basePath:s}=at(),{monitor:o}=Ts(),l=Os(),u=ye({locationId:null==l?void 0:l.id,dateRangeStart:"now-24h",dateRangeEnd:"now"}),d=`${s}/app/synthetics${c.r.replace(":monitorId",null!==(i=null==o?void 0:o[Ge.c.CONFIG_ID])&&void 0!==i?i:"")}${u}`,m=a||("now-24h"===e&&"now"===t?mf:"");return r.a.createElement(hf,{direction:"row",alignItems:"baseline",wrap:!0},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",responsive:!1,wrap:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h4",null,df))),m?r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},m)):null),n?r.a.createElement(bf,{href:d,"data-test-subj":"monitorStatusChartViewHistoryButton",size:"xs",iconType:"list"},pf):null)};var hf=G()(y.EuiFlexGroup)({marginBottom:0}),bf=G()(y.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty",componentId:"sc-1pbciek-0"})({marginLeft:"auto"});const Ef=y.VISUALIZATION_COLORS[0],vf=y.VISUALIZATION_COLORS[y.VISUALIZATION_COLORS.length-1];function yf(e,t){const a=t===y.COLOR_MODES_STANDARD.dark?y.transparentize:y.tint;return[{color:vf,start:-1/0,end:-1},{color:vf,start:-1,end:-.75},{color:a(vf,.25),start:-.75,end:-.5},{color:a(vf,.5),start:-.5,end:-.25},{color:a(vf,.75),start:-.25,end:-1e-9},{color:xf(e),start:-1e-9,end:1e-9},{color:a(Ef,.5),start:1e-9,end:.25},{color:a(Ef,.35),start:.25,end:.5},{color:a(Ef,.2),start:.5,end:.8},{color:Ef,start:.8,end:1},{color:Ef,start:1,end:1/0}]}function xf(e){return e.colors.lightestShade}function Sf(e){if("number"==typeof e)return e;let t=e;return"string"==typeof e&&(t=Q.a.parse(e,{momentInstance:$.a})),$()(t).valueOf()}const kf=({timeBin:e,isLoading:t})=>{if(!e)return r.a.createElement(r.a.Fragment,null,"");const a=$()(e.start),n=$()(e.end),i=a.format("LL"),s=a.format("HH:mm"),o=n.format("HH:mm"),l=`${i} @ ${s} - ${a.dayOfYear()!==n.dayOfYear()?`${n.format("LL")} @ `:""}${o}`,c=e.ups+e.downs>0?`${Math.round(e.ups/(e.ups+e.downs)*100)}%`:"-",u={isVisible:!0,isHighlighted:!1,seriesIdentifier:{specId:"",key:""}},d=t?[]:[{color:"transparent",label:of,value:c,formattedValue:c,...u},{color:Ef,label:lf,value:e.ups,formattedValue:`${e.ups}`,...u},{color:vf,label:cf,value:e.downs,formattedValue:`${e.downs}`,...u}];return r.a.createElement(rt.TooltipContainer,null,r.a.createElement(rt.TooltipHeader,null,l),t&&r.a.createElement(y.EuiProgress,{size:"xs"}),r.a.createElement(rt.TooltipTable,{columns:[{type:"color"},{type:"text",cell:e=>e.label,style:{textAlign:"left"}},{type:"number",cell:e=>e.value,style:{textAlign:"right"}}],items:d}))},Mf=({brushable:e})=>{const{euiTheme:t}=Object(y.useEuiTheme)(),a=Object(n.useMemo)((()=>({color:e,label:t,iconType:a="dot"})=>r.a.createElement(wf,{grow:!1},r.a.createElement(y.EuiIcon,{type:a,color:e}),r.a.createElement(y.EuiText,{size:"xs"},t))),[]);return r.a.createElement(y.EuiFlexGroup,{wrap:!0,responsive:!1},r.a.createElement(a,{color:Ef,label:lf}),r.a.createElement(a,{color:vf,label:cf}),r.a.createElement(a,{color:xf(t),label:uf}),e?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexItem,{"aria-hidden":!0,grow:!0}),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"xs",color:t.colors.subduedText},ff))):null)};var wf=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-160lumb-0"})({display:"flex",flexDirection:"row",gap:2});const Tf=({from:e,to:t})=>{const{lastRefresh:a}=X(),{monitor:r}=Ts(),i=Math.max(3,null!=r&&r.schedule?(s=null==r?void 0:r.schedule,Math.floor(function(e){return parseInt(e.number,10)*function(e){switch(e){case Ge.w.SECONDS:return 1e3;case Ge.w.MINUTES:return 6e4;default:throw new Error(`Unit ${e} is not supported`)}}(e.unit)}(s)/6e4)):3);var s;const o=Sf(e),l=Sf(t),c=Math.ceil(l-o)/6e4,d=(({from:e,to:t,size:a,monitorInterval:r,lastRefresh:i})=>{const{monitor:s}=Ts(),o=Os(),l=Object(n.useCallback)((()=>{var e,t;return Object(q.S)(null!==(e=null==s?void 0:s[Ge.c.CONFIG_ID])&&void 0!==e?e:"",null!==(t=null==o?void 0:o.label)&&void 0!==t?t:"")}),[s,null==o?void 0:o.label]),c=Object(u.useSelector)(q.I),d=Object(u.useSelector)(l()),m=Object(u.useDispatch)(),p=Object(n.useRef)({monitorId:"",locationLabel:"",to:0,from:0,lastRefresh:0}),f=Math.abs(p.current.to-t)/6e4,g=Math.abs(p.current.from-e)/6e4,h=Math.abs(p.current.lastRefresh-i)/6e4,b=f>=r||g>=r||h>=3||(null==s?void 0:s.id)!==p.current.monitorId||(null==o?void 0:o.label)!==p.current.locationLabel;return Object(n.useEffect)((()=>{!c&&b&&null!=s&&s.id&&null!=o&&o.label&&e&&t&&a&&(m(q.s.get({monitorId:s.id,locationId:o.label,from:e,to:t,size:a})),p.current={monitorId:s.id,locationLabel:null==o?void 0:o.label,to:t,from:e,lastRefresh:i})}),[m,null==s?void 0:s.id,null==o?void 0:o.label,e,t,a,b,i]),d.filter((({timestamp:a})=>{const n=Number(new Date(a));return n>=e&&n<=t}))})({from:o,to:l,size:Math.min(1e4,Math.ceil(c/i*2)),monitorInterval:i,lastRefresh:a}),[m,p]=Object(n.useState)(50),f=Math.floor(Math.max(i,c/m)),g=Object(n.useCallback)(Object(ln.throttle)((e=>{p(Math.floor(e.width/17))}),500),[]),{timeBins:h,timeBinsByEndTime:b,xDomain:E}=Object(n.useMemo)((()=>{var e,t,a,n;const r=function(e,t){let a=0;return(null!=e?e:[]).map((e=>{const n={start:e.start,end:e.end,ups:0,downs:0,value:0};for(;a<t.length&&$()(t[a].timestamp).valueOf()<e.end;){var r,i,s,o;n.ups+=null!==(r=null===(i=t[a])||void 0===i?void 0:i.summary.up)&&void 0!==r?r:0,n.downs+=null!==(s=null===(o=t[a])||void 0===o?void 0:o.summary.down)&&void 0!==s?s:0,n.value=(l=n.ups,c=n.downs,l===c?-.1:(l-c)/(l+c)),a++}var l,c;return n}))}(function(e,t,a){const n=function(e,t){const a=Math.floor(e)%60,n=Math.ceil(new Date(t).getUTCMinutes()/a)*a;return $()(t).utc().startOf("hour").add(n,"minute").valueOf()}(e,a),r=[];let i=n,s=5e3;for(;i>=t&&s>0;){const t=i-Math.floor(60*e*1e3);r.unshift({start:t,end:i}),i=t,--s}return r}(f,o,l),d),i=function(e){return e.reduce(((e,t)=>e.set(t.end,t)),new Map)}(r);return{timeBins:r,timeBinsByEndTime:i,xDomain:{min:null!==(e=null==r||null===(t=r[0])||void 0===t?void 0:t.end)&&void 0!==e?e:o,max:null!==(a=null==r||null===(n=r[r.length-1])||void 0===n?void 0:n.end)&&void 0!==a?a:l}}}),[f,d,o,l]);return{intervalByWidth:f,timeBins:h,xDomain:E,handleResize:g,getTimeBinByXValue:e=>void 0===e?void 0:b.get(e)}},Of=({from:e="now-24h",to:t="now",brushable:a=!0,periodCaption:i,showViewHistoryButton:s=!1,onBrushed:l})=>{const{euiTheme:c,colorMode:d}=Object(y.useEuiTheme)(),{timeBins:m,handleResize:p,getTimeBinByXValue:f,xDomain:g,intervalByWidth:h}=Tf({from:e,to:t}),b=Object(u.useSelector)(q.I),E=Object(n.useMemo)((()=>function(e,t){return{grid:{stroke:{width:0,color:"transparent"}},cell:{maxWidth:"fill",maxHeight:3,label:{visible:!1},border:{stroke:"transparent",strokeWidth:.5}},xAxisLabel:{visible:!0,fontSize:10,fontFamily:e.font.family,fontWeight:e.font.weight.light,textColor:e.colors.subduedText},yAxisLabel:{visible:!1},brushTool:{visible:t,fill:e.colors.darkShade}}}(c,a)),[c,a]);return r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(gf,{from:e,to:t,brushable:a,periodCaption:i,showViewHistoryButton:s,onBrushed:l}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiResizeObserver,{onResize:p},(e=>{return r.a.createElement("div",{ref:e},r.a.createElement(rt.Chart,{size:{height:60}},r.a.createElement(rt.Tooltip,{customTooltip:({values:e})=>{var t,a;return r.a.createElement(kf,{timeBin:f(null==e||null===(t=e[0])||void 0===t||null===(a=t.datum)||void 0===a?void 0:a.x),isLoading:b})}}),r.a.createElement(rt.Settings,{showLegend:!1,xDomain:g,theme:{heatmap:E},baseTheme:rt.LEGACY_LIGHT_THEME,onBrushEnd:e=>{null==l||l(function(e){var t,a;const[n,r]=[Number(null===(t=e.x)||void 0===t?void 0:t[0]),Number(null===(a=e.x)||void 0===a?void 0:a[1])],[i,s]=[$()(n).format(),$()(r).format()];return{from:n,to:r,fromUtc:i,toUtc:s}}(e))},locale:o.i18n.getLocale()}),r.a.createElement(rt.Heatmap,{id:"monitor-details-monitor-status-chart",colorScale:{type:"bands",bands:yf(c,d)},data:m,xAccessor:e=>e.end,yAccessor:()=>"T",valueAccessor:e=>e.value,valueFormatter:e=>e.toFixed(2),xAxisLabelFormatter:(t=h,e=>{const a=$()(e),[n,r]=[a.hours(),a.minutes()],i=0===n&&r<=36,s=t>=1440;return $()(e).format(i||s?"l":"HH:mm")}),timeZone:"UTC",xScale:{type:rt.ScaleType.Time,interval:{type:"calendar",unit:"m",value:h}}})));var t})),r.a.createElement(Mf,{brushable:a}))},Cf=()=>{const[,e]=Me(),{from:t,to:a}=Oe(),{elementRef:i,width:s}=Ue(),o=s&&s<360?1:2,l=Object(n.useCallback)((({fromUtc:t,toUtc:a})=>{e({dateRangeStart:t,dateRangeEnd:a})}),[e]);return Gm()||r.a.createElement(np,null,r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"m"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement($m,{fullWidth:!0})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},r.a.createElement(_f,null,r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0,panelRef:i},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,If)),r.a.createElement(y.EuiFlexGrid,{columns:o,gutterSize:"s",responsive:!1},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Qp,{from:t,to:a})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(sf,{from:t,to:a})))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(hp,{from:t,to:a,id:"availabilityPercentageHistory"})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(nf,{from:t,to:a,id:"availabilitySparklineHistory"})))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(vd,{from:t,to:a,id:"monitorErrorsCountHistory"})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(af,{from:t,to:a,id:"monitorErrorsSparklineHistory"})))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Ep,{from:t,to:a,id:"durationAvgValueHistory"})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(rf,{from:t,to:a,id:"durationAvgSparklineHistory"})))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(ef,{from:t,to:a}))))),r.a.createElement(Ff,null,r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,jf)),r.a.createElement(yp,{from:t,to:a}))))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Of,{from:t,to:a,showViewHistoryButton:!1,periodCaption:"",brushable:!0,onBrushed:l})),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(Dp,{from:t,to:a,showViewHistoryButton:!1}))))},If=o.i18n.translate("xpack.synthetics.historyPanel.stats",{defaultMessage:"Stats"}),jf=o.i18n.translate("xpack.synthetics.historyPanel.durationTrends",{defaultMessage:"Duration trends"});var _f=G()(y.EuiFlexItem)({flexBasis:"36%"}),Ff=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-z1l2w6-0"})({flexBasis:"60%",minWidth:260});const Pf={"kibana.alert.rule.category":["Synthetics monitor status"]},Lf=({to:e,from:t,dateLabel:a})=>{const{exploratoryView:{ExploratoryViewEmbeddable:n}}=Object(p.useKibana)().services,i=Object(f.useTheme)(),{queryIdFilter:s,locationFilter:o}=Ed();return Os()&&s?r.a.createElement(y.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"m",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,Rf," (",r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(n,{noLabel:!0,fontSize:16,lineHeight:27,withActions:!1,customHeight:"27px",reportType:"single-metric",attributes:[{dataType:"alerts",time:{from:t,to:e},name:"All",selectedMetricField:B.RECORDS_FIELD,reportDefinitions:{...Pf,...s},filters:null!=o?o:[]}]})),")"))),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiText,{color:"subdued",size:"s"},a)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(hc,{from:t,to:e}))),r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs",wrap:!0},r.a.createElement(y.EuiFlexItem,{style:{width:80},grow:!1},r.a.createElement(n,{dataTestSubj:"monitorActiveAlertsCount",customHeight:"120px",reportType:"single-metric",attributes:[{dataType:"alerts",time:{from:t,to:e},name:Df,selectedMetricField:B.RECORDS_FIELD,reportDefinitions:{...Pf,...s},filters:[{field:"kibana.alert.status",values:["active"]},...null!=o?o:[]]}]})),r.a.createElement(Nf,null,r.a.createElement(n,{sparklineMode:!0,customHeight:"100px",reportType:"kpi-over-time",attributes:[{seriesType:"area",time:{from:t,to:e},reportDefinitions:{...Pf,...s},dataType:"alerts",selectedMetricField:B.RECORDS_FIELD,name:Df,filters:[{field:"kibana.alert.status",values:["active"]},...null!=o?o:[]],color:i.eui.euiColorVis7_behindText}]})),r.a.createElement(y.EuiFlexItem,{grow:!1,style:{width:85,marginLeft:40}},r.a.createElement(n,{customHeight:"120px",reportType:"single-metric",attributes:[{dataType:"alerts",time:{from:t,to:e},name:Af,selectedMetricField:B.RECORDS_FIELD,reportDefinitions:{...Pf,...s},filters:[{field:"kibana.alert.status",values:["recovered"]},...null!=o?o:[]]}]})),r.a.createElement(zf,null,r.a.createElement(n,{sparklineMode:!0,customHeight:"100px",reportType:"kpi-over-time",attributes:[{seriesType:"area",time:{from:t,to:e},reportDefinitions:{...Pf,...s},dataType:"alerts",selectedMetricField:"recovered_alerts",name:Af,filters:[{field:"kibana.alert.status",values:["recovered"]},...null!=o?o:[]],color:i.eui.euiColorVis0_behindText}]})))):r.a.createElement(y.EuiSkeletonText,null)},Rf=o.i18n.translate("xpack.synthetics.detailsPanel.alerts",{defaultMessage:"Alerts"}),Df=o.i18n.translate("xpack.synthetics.detailsPanel.alerts.active",{defaultMessage:"Active"}),Af=o.i18n.translate("xpack.synthetics.detailsPanel.alerts.recovered",{defaultMessage:"Recovered"});var Nf=G()(y.EuiFlexItem)({minWidth:80}),zf=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-18zaxwx-0"})({minWidth:80});const Bf=({legendPosition:e,doBreakdown:t=!0})=>{const{exploratoryView:{ExploratoryViewEmbeddable:a}}=Object(p.useKibana)().services,n=we({from:"now-24h/h",to:"now"}),{monitor:i}=Ts(),{queryIdFilter:s,locationFilter:o}=Ed(),l="browser"===(null==i?void 0:i.type);if(!s)return null;const c=t?l?Hf:Gf:Vf;return r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,c))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,{size:"s",color:"subdued"},$f))),r.a.createElement(a,{id:"stepDurationLines",axisTitlesVisibility:{yLeft:!1,yRight:!1,x:!1},customHeight:"300px",reportType:B.ReportTypes.KPI,legendPosition:e,legendIsVisible:t,attributes:[{time:n,name:c,reportDefinitions:s,filters:o,selectedMetricField:l&&t?"synthetics.step.duration.us":"monitor.duration.us",dataType:"synthetics",operationType:t?"last_value":"average",seriesType:"area_stacked",...t?{breakdown:l?"synthetics.step.name.keyword":"observer.geo.name"}:{}}]}))},Hf=o.i18n.translate("xpack.synthetics.detailsPanel.durationByStep",{defaultMessage:"Duration by step"}),Gf=o.i18n.translate("xpack.synthetics.detailsPanel.durationByLocation",{defaultMessage:"Duration by location"}),Vf=o.i18n.translate("xpack.synthetics.detailsPanel.monitorDuration",{defaultMessage:"Monitor duration"}),$f=o.i18n.translate("xpack.synthetics.detailsPanel.last24Hours",{defaultMessage:"Last 24 hours"}),Uf=e=>{var t;const{latestPing:a}=Rc(),{monitorId:n}=Object(R.useParams)(),{monitor:i,loading:s}=Ts(),o=(null==a?void 0:a.config_id)===(null==i?void 0:i[Ge.c.CONFIG_ID])||(null==a||null===(t=a.monitor)||void 0===t?void 0:t.id)===(null==i?void 0:i[Ge.c.MONITOR_QUERY_ID]);return i&&o?r.a.createElement(Ha,b()({latestPing:a,monitor:i,loading:s,configId:n},e)):r.a.createElement(y.EuiSkeletonText,{lines:6})},qf=({ping:e,loading:t})=>{var a,n,i,s,o,l,c,u,d,m;const p=t||null==e||null===(a=e.resolve)||void 0===a?void 0:a.ip,f=t?NaN:null!==(n=null==e||null===(i=e.monitor)||void 0===i||null===(s=i.duration)||void 0===s?void 0:s.us)&&void 0!==n?n:NaN,g=t?NaN:null!==(o=null==e||null===(l=e.resolve)||void 0===l||null===(c=l.rtt)||void 0===c?void 0:c.us)&&void 0!==o?o:NaN,h=t||null==e||null===(u=e.url)||void 0===u?void 0:u.full,b=t||null==e||null===(d=e.http)||void 0===d||null===(m=d.response)||void 0===m?void 0:m.status_code;return r.a.createElement(y.EuiDescriptionList,{type:"column",compressed:!0},r.a.createElement(y.EuiDescriptionListTitle,null,"IP"),r.a.createElement(y.EuiDescriptionListDescription,null,p),r.a.createElement(y.EuiDescriptionListTitle,null,Wf),r.a.createElement(y.EuiDescriptionListDescription,null,isNaN(f)?"":js(f)),r.a.createElement(y.EuiDescriptionListTitle,null,"rtt"),r.a.createElement(y.EuiDescriptionListDescription,null,isNaN(g)?"":js(g)),r.a.createElement(y.EuiDescriptionListTitle,null,"URL"),r.a.createElement(y.EuiDescriptionListDescription,null,h),b?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiDescriptionListTitle,null,"Response status"),r.a.createElement(y.EuiDescriptionListDescription,null,r.a.createElement(y.EuiBadge,null,b))):null)},Wf=o.i18n.translate("xpack.synthetics.monitor.duration.label",{defaultMessage:"Duration"}),Kf=()=>{var e;const{latestPing:t,loading:a}=Rc(),{lastRefresh:n}=X(),{data:i,loading:s}=Ir(null==t||null===(e=t.monitor)||void 0===e?void 0:e.check_group,n),o=s||a;return r.a.createElement(Yf,{stepsData:i,latestPing:t,loading:o,stepsLoading:s,isErrorDetails:!1})},Yf=({latestPing:e,loading:t,stepsData:a,stepsLoading:n,isErrorDetails:i=!1})=>{var s,l;const{monitor:c}=Ts(),{euiTheme:u}=Object(y.useEuiTheme)(),d=Os(),{basePath:m}=at();return r.a.createElement(Qf,{hasShadow:!1,hasBorder:!0},r.a.createElement(Xf,{monitor:c,latestPing:e,loading:t}),t&&!e||null==e||!e.error?null:r.a.createElement(y.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",style:{marginTop:u.base,borderRadius:u.border.radius.medium,fontWeight:u.font.weight.semiBold},title:null==e?void 0:e.error.message,size:"s",color:"danger",iconType:"warning"},i?null:r.a.createElement(y.EuiButton,{"data-test-subj":"monitorTestRunViewErrorDetails",color:"danger",href:Nc({basePath:m,configId:null==c?void 0:c[Ge.c.CONFIG_ID],locationId:d.id,stateId:null===(s=e.state)||void 0===s?void 0:s.id})},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewErrorDetails",{defaultMessage:"View error details"}))),r.a.createElement(y.EuiSpacer,{size:"m"}),(null==c?void 0:c.type)===Ge.q.BROWSER?r.a.createElement(Ns,{steps:null!==(l=null==a?void 0:a.steps)&&void 0!==l?l:[],loading:n,showStepNumber:!0,showExpand:i}):r.a.createElement(qf,{ping:e,loading:t}))},Xf=({monitor:e,latestPing:t,loading:a})=>{var n;const{euiTheme:i}=Object(y.useEuiTheme)(),{basePath:s}=at(),l=Os(),{monitorId:c}=Object(R.useParams)(),u=Ba()(null==t?void 0:t.timestamp),d=(null==e?void 0:e[Ge.c.MONITOR_TYPE])===Ge.q.BROWSER,m=r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,Jf));return a&&!t?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1},m),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiSkeletonRectangle,{width:"52px",height:"20px"})),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiSkeletonText,{lines:1})),r.a.createElement(y.EuiFlexItem,null,d?r.a.createElement(y.EuiSkeletonText,{lines:1}):null))):t?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1,wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!1},m),r.a.createElement(Zf,{grow:!1},r.a.createElement(gs,{status:hs((null==t||null===(n=t.summary)||void 0===n?void 0:n.down)>0?"fail":"success")})),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(eg,{size:"xs",color:i.colors.darkShade},u)),d?r.a.createElement(tg,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"monitorSummaryViewLastTestRun",size:"xs",iconType:"inspect",iconSide:"left",href:no({basePath:s,monitorId:c,checkGroup:null==t?void 0:t.monitor.check_group,locationId:null==l?void 0:l.id})},o.i18n.translate("xpack.synthetics.monitorDetails.summary.viewTestRun",{defaultMessage:"View test run"}))):null)):r.a.createElement(r.a.Fragment,null,m)},Jf=o.i18n.translate("xpack.synthetics.monitorDetails.summary.lastTestRunTitle",{defaultMessage:"Last test run"});var Qf=G()(y.EuiPanel)({minHeight:356}),Zf=G()(y.EuiFlexItem)({flexBasis:"fit-content"}),eg=G()(y.EuiText)({whiteSpace:"nowrap"}),tg=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-r2eknp-0"})({marginLeft:"auto"});const ag=()=>{const{from:e,to:t}=(()=>{const{monitor:e,loading:t}=Ts(),{from:a,to:r}=Te(30,"days");return Object(n.useMemo)((()=>{if(null!=e&&e.created_at){const a=$()().diff(e.created_at,"days");if(((null==e?void 0:e[Rm.b.MONITOR_SOURCE_TYPE])!==Ge.z.PROJECT||a>3)&&a<30)return{to:r,from:e.created_at,loading:t}}return{to:r,from:a,loading:t}}),[e,r,a,t])})(),a=!!Rt(),i="now-30d/d"===e?sg:rg;return Gm()||r.a.createElement(np,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0,responsive:!1},r.a.createElement(og,{grow:1},r.a.createElement(Uf,null)),r.a.createElement(lg,{grow:1},r.a.createElement(y.EuiPanel,{hasShadow:!1,grow:!1,hasBorder:!0,paddingSize:"m"},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,ng))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,{color:"subdued",size:"s"},i))),r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!0},r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!1,responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(hp,{from:e,to:t,id:"availabilityPercentageSummary"})),r.a.createElement(cg,null,r.a.createElement(nf,{from:e,to:t,id:"availabilitySparklineSummary"}))),r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!1,responsive:!1},r.a.createElement(ug,{grow:!1},r.a.createElement(Ep,{from:e,to:t,id:"durationAvgValueSummary"})),r.a.createElement(dg,null,r.a.createElement(rf,{from:e,to:t,id:"durationAvgSparklineSummary"}))),r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!1,responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(vd,{from:e,to:t,id:"monitorErrorsCountSummary"})),r.a.createElement(mg,null,r.a.createElement(af,{from:e,to:t,id:"monitorErrorsSparklineSummary"}))))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiPanel,{hasShadow:!1,paddingSize:"m",hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,ig))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,{color:"subdued",size:"s"},i))),r.a.createElement(yp,{from:e,to:t})))))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Of,{from:"now-24h",to:"now",brushable:!1,showViewHistoryButton:!0}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},r.a.createElement(pg,{$_css:a?{minWidth:260}:void 0},r.a.createElement(Kf,null)),r.a.createElement(fg,null,r.a.createElement(Lf,{dateLabel:i,from:e,to:t}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Bf,null))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(f.LoadWhenInView,{placeholderTitle:Np},r.a.createElement(Dp,{paginable:!1,from:e,to:t})))},ng=o.i18n.translate("xpack.synthetics.detailsPanel.summary",{defaultMessage:"Summary"}),rg=o.i18n.translate("xpack.synthetics.detailsPanel.toDate",{defaultMessage:"To date"}),ig=o.i18n.translate("xpack.synthetics.detailsPanel.durationTrends",{defaultMessage:"Duration trends"}),sg=o.i18n.translate("xpack.synthetics.detailsPanel.last30Days",{defaultMessage:"Last 30 days"});var og=G()(y.EuiFlexItem)({flexBasis:"36%",minWidth:260}),lg=G()(y.EuiFlexItem)({flexBasis:"60%"}),cg=G()(y.EuiFlexItem)({minWidth:100}),ug=G()(y.EuiFlexItem)({minWidth:86}),dg=G()(y.EuiFlexItem)({minWidth:100}),mg=G()(y.EuiFlexItem)({minWidth:100}),pg=G()(y.EuiFlexItem)`${e=>e.$_css}`,fg=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem8",componentId:"sc-178i4k5-0"})({minWidth:260});const gg=()=>{const{basePath:e}=at(),{monitorId:t}=Object(R.useParams)(),a=Gt(),n=a?{href:`${e}/app/synthetics/edit-monitor/${t}`}:{disabled:!0};return r.a.createElement(ia,{canEditSynthetics:a},r.a.createElement(y.EuiButton,b()({"data-test-subj":"syntheticsEditMonitorLinkButton",fill:!0,iconType:"pencil",iconSide:"left"},n),hg))},hg=o.i18n.translate("xpack.synthetics.monitorSummary.editMonitor",{defaultMessage:"Edit monitor"}),bg=(e,t,a)=>[{title:o.i18n.translate("xpack.synthetics.monitorDetails.title",{defaultMessage:"Synthetics Monitor Details | {baseTitle}",values:{baseTitle:a}}),path:c.t,component:ag,dataTestSubj:"syntheticsMonitorDetailsPage",pageHeader:vg(e,t,"overview")},{title:o.i18n.translate("xpack.synthetics.monitorHistory.title",{defaultMessage:"Synthetics Monitor History | {baseTitle}",values:{baseTitle:a}}),path:c.r,component:Cf,dataTestSubj:"syntheticsMonitorHistoryPage",pageHeader:vg(e,t,"history")},{title:o.i18n.translate("xpack.synthetics.monitorErrors.title",{defaultMessage:"Synthetics Monitor Errors | {baseTitle}",values:{baseTitle:a}}),path:c.q,component:lp,dataTestSubj:"syntheticsMonitorHistoryPage",pageHeader:vg(e,t,"errors")},{title:o.i18n.translate("xpack.synthetics.monitorNotFound.title",{defaultMessage:"Synthetics Monitor Not Found | {baseTitle}",values:{baseTitle:a}}),path:c.s,component:bm,dataTestSubj:"syntheticsMonitorNotFoundPage",pageHeader:{breadcrumbs:[Eg(t)]}}],Eg=e=>({text:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiIcon,{size:"s",type:"arrowLeft"})," ",r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorSummaryRoute.monitorBreadcrumb",defaultMessage:"Monitors"})),color:"primary","aria-current":!1,href:`${e}${c.n}`}),vg=(e,t,a)=>{const n=Object(R.useRouteMatch)(c.t);if(!n)return{};const i=e.location.search,s=n.params.monitorId;return{pageTitle:r.a.createElement(Lm,null),breadcrumbs:[Eg(t)],rightSideItems:[r.a.createElement(ec,null),r.a.createElement(gg,null),r.a.createElement(Dm,null),r.a.createElement(Nm,null),r.a.createElement(Bm,null),r.a.createElement(Hm,null)],tabs:[{label:o.i18n.translate("xpack.synthetics.monitorOverviewTab.title",{defaultMessage:"Overview"}),isSelected:"overview"===a,href:`${t}${c.t.replace(":monitorId?",s)}${i}`,"data-test-subj":"syntheticsMonitorOverviewTab"},{label:o.i18n.translate("xpack.synthetics.monitorHistoryTab.title",{defaultMessage:"History"}),isSelected:"history"===a,href:`${t}${c.r.replace(":monitorId",s)}${i}`,"data-test-subj":"syntheticsMonitorHistoryTab"},{label:o.i18n.translate("xpack.synthetics.monitorErrorsTab.title",{defaultMessage:"Errors"}),prepend:r.a.createElement(gp,null),isSelected:"errors"===a,href:`${t}${c.q.replace(":monitorId",s)}${i}`,"data-test-subj":"syntheticsMonitorErrorsTab"}]}},yg=({checkGroupId:e,stepIndex:t})=>{const{basePath:a}=at(),{monitorId:n}=Object(R.useParams)(),r=Os();return e?xg({basePath:a,stepIndex:t,monitorId:n,checkGroupId:e,locationId:null==r?void 0:r.id}):""},xg=({checkGroupId:e,stepIndex:t,basePath:a,monitorId:n,locationId:r})=>`${a}/app/synthetics/monitor/${n}/test-run/${e}/step/${t}?locationId=${r}`,Sg=()=>r.a.createElement(y.EuiDescriptionList,{listItems:[{title:kg,description:r.a.createElement(Mg,null)}]}),kg=o.i18n.translate("xpack.synthetics.testDetails.date",{defaultMessage:"Date"}),Mg=({testRunPage:e})=>{var t,a,i,s,o;const[l,c]=Object(n.useState)(!1),{data:u}=Ir(),d=Ba(),{basePath:m}=at(),p=Os(),f=d(null==u||null===(t=u.details)||void 0===t?void 0:t.timestamp),{stepIndex:g,monitorId:h}=Object(R.useParams)();let b=yg({stepIndex:g,checkGroupId:null==u||null===(a=u.details)||void 0===a||null===(i=a.previous)||void 0===i?void 0:i.checkGroup}),E=yg({stepIndex:g,checkGroupId:null==u||null===(s=u.details)||void 0===s||null===(o=s.next)||void 0===o?void 0:o.checkGroup});var v,x,S,k,M,w,T,O;e&&(null!=u&&null!==(v=u.details)&&void 0!==v&&null!==(x=v.previous)&&void 0!==x&&x.checkGroup&&(b=no({basePath:m,monitorId:h,locationId:null==p?void 0:p.id,checkGroup:null==u||null===(M=u.details)||void 0===M||null===(w=M.previous)||void 0===w?void 0:w.checkGroup})),null!=u&&null!==(S=u.details)&&void 0!==S&&null!==(k=S.next)&&void 0!==k&&k.checkGroup&&(E=no({basePath:m,monitorId:h,locationId:null==p?void 0:p.id,checkGroup:null==u||null===(T=u.details)||void 0===T||null===(O=T.next)||void 0===O?void 0:O.checkGroup})));const C=f||r.a.createElement(y.EuiSkeletonText,{lines:1});return r.a.createElement(y.EuiPopover,{closePopover:()=>c(!1),isOpen:l,button:r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStepPageNavigationButton",style:{height:20},onClick:()=>c((e=>!e)),iconType:"arrowDown",iconSide:"right",flush:"left"},C)},r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStepPageNavigationButton",href:b,disabled:!b,iconType:"arrowLeft","aria-label":wg},wg)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"s",className:"eui-textNoWrap","aria-label":Og(f)},C)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStepPageNavigationButton",href:E,disabled:!E,iconType:"arrowRight",iconSide:"right","aria-label":Tg},Tg))))},wg=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousCheckButtonText",{defaultMessage:"Previous check"}),Tg=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextCheckButtonText",{defaultMessage:"Next check"}),Og=e=>o.i18n.translate("xpack.synthetics.synthetics.stepDetail.currentCheckAriaLabel",{defaultMessage:"Current check: {timestamp}",values:{timestamp:e}}),Cg=({stepIndex:e,totalSteps:t,handleStepHref:a})=>{const[i,s]=Object(n.useState)(!1),o=()=>{s(!1)},l=t>1,c=r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStepNavStepStepIndexOfTotalStepsButton",size:"s",flush:"left",iconType:l?"arrowDown":void 0,iconSide:"right",onClick:()=>{s(!i)},style:{height:20},disabled:!l},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:e,totalSteps:t}})),u=Object(ln.times)(t).map((e=>r.a.createElement(y.EuiContextMenuItem,{key:e,href:a(e+1),onClick:o},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.stepNumber",defaultMessage:"Step {stepIndex}",values:{stepIndex:e+1}}))));return r.a.createElement(y.EuiPopover,{id:"stepDetailsStepNav",button:c,isOpen:i,closePopover:o,panelPaddingSize:"none",anchorPosition:"downLeft"},r.a.createElement(y.EuiContextMenuPanel,{size:"s",items:u}))},Ig=()=>{const{activeStep:e,journey:t,stepIndex:a,handleStepHref:i,stepEnds:s}=(()=>{const{checkGroupId:e,monitorId:t,stepIndex:a}=Object(R.useParams)(),r=Number(a),i=Os(),{data:s,stepEnds:o}=Ir(e),l=Object(n.useMemo)((()=>{var e;return{activeStep:null==s||null===(e=s.steps)||void 0===e?void 0:e.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===r}))}}),[s,r]),{basePath:c}=at();return{checkGroupId:e,journey:s,stepIndex:r,stepEnds:o,...l,handleStepHref:a=>xg({basePath:c,monitorId:t,checkGroupId:e,stepIndex:a,locationId:null==i?void 0:i.id})}})();return t&&e?r.a.createElement(y.EuiDescriptionList,{listItems:[{title:jg,description:r.a.createElement(Cg,{stepIndex:a,totalSteps:s.length,handleStepHref:i})}]}):null},jg=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.stepLabel",{defaultMessage:"Step"}),_g=()=>{var e;const{currentStep:t}=Ir();let a=r.a.createElement(y.EuiSkeletonText,{lines:1});var n;return null!=t&&null!==(e=t.synthetics.step)&&void 0!==e&&e.status&&(a=r.a.createElement(gs,{status:hs(null===(n=t.synthetics.step)||void 0===n?void 0:n.status)})),r.a.createElement(y.EuiDescriptionList,{align:"left",compressed:!1,listItems:[{title:Yn,description:a}]})},Fg=({step:e})=>{var t,a,n;if(!e||"failed"!==(null===(t=e.synthetics.step)||void 0===t?void 0:t.status))return null;const i=null!==(a=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==a?a:"";return i?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{title:i,color:"danger",iconType:"warning"}),r.a.createElement(y.EuiSpacer,null)):null};var Pg=a(3);const Lg=e=>{var t,a,n,r,i;const s=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",{monitor:o}=Ts(),l=Os();Ie([{text:Rg,href:`${s}${c.n}`},...o?[{text:null!==(n=null==o?void 0:o.name)&&void 0!==n?n:"",href:`${s}${c.t.replace(":monitorId",null!==(r=null==o?void 0:o[Ge.c.CONFIG_ID])&&void 0!==r?r:"")}?locationId=${null!==(i=null==l?void 0:l.id)&&void 0!==i?i:""}`}]:[],...null!=e?e:[]])},Rg=o.i18n.translate("xpack.synthetics.monitorsPage.monitorsMCrumb",{defaultMessage:"Monitors"}),Dg=Object(m.euiStyled)(y.EuiText)`
  width: 100%;
`;class waterfall_flyout_table_TableWithoutHeader extends y.EuiBasicTable{renderTableHead(){return r.a.createElement(r.a.Fragment,null)}}const Ag=e=>{const{rows:t,title:a}=e,i=Object(n.useMemo)((()=>[{field:"name",name:"",sortable:!1,render:(e,t)=>r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("strong",null,t.name))},{field:"value",name:"",sortable:!1,render:(e,t)=>{var a;return r.a.createElement(Dg,{size:"xs",textAlign:"right"},null!==(a=t.value)&&void 0!==a?a:"--")}}]),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,null,r.a.createElement("h4",null,a)),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(waterfall_flyout_table_TableWithoutHeader,{tableLayout:"fixed",compressed:!0,responsiveBreakpoint:!1,columns:i,items:t}))},Ng=Object(n.createContext)({}),zg=({children:e,data:t,markerItems:a,onElementClick:n,onProjectionClick:i,onSidebarClick:s,showOnlyHighlightedNetworkRequests:o,showCustomMarks:l,sidebarItems:c,metadata:u,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:f,activeStep:g,activeFilters:h,setActiveFilters:b,setOnlyHighlighted:E,setShowCustomMarks:v,query:y,setQuery:x})=>r.a.createElement(Ng.Provider,{value:{data:t,activeStep:g,markerItems:a,showOnlyHighlightedNetworkRequests:o,showCustomMarks:l,sidebarItems:c,metadata:u,onElementClick:n,onProjectionClick:i,onSidebarClick:s,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:f,activeFilters:h,setActiveFilters:b,setOnlyHighlighted:E,setShowCustomMarks:v,query:y,setQuery:x}},e),Bg=()=>Object(n.useContext)(Ng),Hg=Object(m.euiStyled)(y.EuiText)`
  font-weight: bold;
`,Gg=Object(m.euiStyled)(y.EuiHorizontalRule)`
  background-color: ${e=>e.theme.eui.euiColorDarkShade};
`,Vg=({text:e,url:t})=>{const{data:a,renderTooltipItem:n,sidebarItems:i}=Bg(),s=a.filter((e=>{var a;return e.x===(null==i||null===(a=i.find((e=>e.url===t)))||void 0===a?void 0:a.index)&&e.config.tooltipProps&&e.config.showTooltip}));return r.a.createElement("div",{style:{maxWidth:500,height:"100%"}},r.a.createElement(Hg,{size:"xs"},e),r.a.createElement(Gg,{margin:"none"}),r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"none"},s.map(((e,t)=>r.a.createElement(y.EuiFlexItem,{key:t},n(e.config.tooltipProps))))))};var $g=a(309);const Ug=24,qg=m.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object($g.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,Wg=Object(m.euiStyled)(qg)`
  height: auto;
  overflow: hidden;
  z-index: 50;
`,Kg=Object(m.euiStyled)(qg)`
  position: sticky;
  top: 96px;
  z-index: ${e=>e.theme.eui.euiZLevel5+10};
  overflow: visible;
  min-height: ${146}px;
  border-color: ${e=>e.theme.eui.euiColorLightShade};
  border-top: ${e=>e.theme.eui.euiBorderThin};
  border-bottom: ${e=>e.theme.eui.euiBorderThin};
  padding: ${e=>e.theme.eui.euiSizeL};
  padding-bottom: ${e=>e.theme.eui.euiSizeXL};
  padding-left: ${e=>e.theme.eui.euiSizeM};
`,Yg=Object(m.euiStyled)(qg)`
  position: sticky;
  bottom: 0px;
  z-index: ${e=>e.theme.eui.euiZLevel5};
  overflow: visible;
  border-color: ${e=>e.theme.eui.euiColorLightShade};
  border-top: ${e=>e.theme.eui.euiBorderThin};
  border-bottom: ${e=>e.theme.eui.euiBorderThin};
  padding: ${e=>e.theme.eui.euiSizeM};
`,Xg=Object(m.euiStyled)(qg)`
  z-index: ${e=>e.theme.eui.euiZLevel6};
  overflow: hidden;
  position: absolute;
  left: 0;
  bottom: -10px;
  width: 100%;
  height: auto;
  border: none;
  background: transparent;
`,Jg=m.euiStyled.div`
  z-index: ${e=>e.theme.eui.euiZLevel4};
  height: 100%;
  &&& {
    .echAnnotation__icon {
      top: 8px;
    }
  }
`,Qg=Object(m.euiStyled)(y.EuiFlexItem)`
  z-index: ${e=>e.theme.eui.euiZLevel4};
  min-width: 0;
`,Zg=Object(m.euiStyled)(y.EuiFlexItem)`
  height: 100%;
  .euiButtonEmpty {
    height: ${Ug}px;
    font-size:${({theme:e})=>e.eui.euiFontSizeM};
  }
`,eh=m.euiStyled.div`
  width: 100%;
  height: ${e=>`${e.height+Ug+4}px`};
  margin-top: -${28}px;
  z-index: ${e=>Math.round(e.theme.eui.euiZLevel3/(e.chartIndex+1))};
  background-color: ${e=>e.theme.eui.euiColorEmptyShade};

  &&& {
    .echCanvasRenderer {
      height: calc(100% + 0px) !important;
      }
  }
`,th=m.euiStyled.div`
  max-width: 90vw;
`,ah=Object(m.euiStyled)(th)`
  background-color: ${({theme:{eui:e,darkMode:t}})=>t?e.euiColorDarkestShade:e.euiColorEmptyShade};
  border-radius: ${e=>e.theme.eui.euiBorderRadius};
  color: ${({theme:{eui:e,darkMode:t}})=>t?e.euiColorLightestShade:e.euiColorDarkestShade};
  padding: ${e=>e.theme.eui.euiSizeS};
  .euiToolTip__arrow {
    background-color: ${({theme:{eui:e,darkMode:t}})=>t?e.euiColorDarkestShade:e.euiColorEmptyShade};
  }
`,nh=m.euiStyled.span`
  position: relative;
  display: inline-flex;
  align-items: center;
  .euiToolTipAnchor {
    min-width: 0;
  }
`,rh=m.euiStyled.span`
  overflow: hidden;
  display: flex;
  align-items: center;
`,ih=Object(m.euiStyled)(y.EuiText)`
  font-family: ${e=>e.theme.eui.euiCodeFontFamily};
  margin-right: ${e=>e.theme.eui.euiSizeS};
  line-height: ${Ug}px;
  text-align: right;
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  text-align: center;
  color: ${e=>e.theme.eui.euiColorDarkShade};
`;var sh=G()(ih).withConfig({displayName:"_StyledIndexNumber",componentId:"sc-121ihsm-0"})((e=>({minWidth:e.$_css})));const oh=m.euiStyled.span`
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  line-height: ${Ug}px;
  font-size: ${14}px;
  text-align: left;
`,lh=m.euiStyled.span`
  flex-shrink: 0;
  line-height: ${Ug}px;
  font-size: ${14}px;
  text-align: left;
`,ch=Object(m.euiStyled)(y.EuiButtonEmpty)`
  &&& {
    border: none;

    .euiButtonContent {
      display: inline-block;
      padding: 0;
    }
  }
`,uh=Object(m.euiStyled)(y.EuiIcon)`
  margin-right: ${e=>e.theme.eui.euiSizeXS};
`,dh=({index:e,ariaLabel:t,text:a,onClick:i,setButtonRef:s,url:l,highestIndex:c})=>{const u=a.startsWith("https://"),d=a.replace(/https:\/\/www.|http:\/\/www.|http:\/\/|https:\/\//,""),m=Object(n.useMemo)((()=>((e="")=>{const t=e.split(""),a=t.length-12>0?t.length-12:null,n=a?t.splice(a):[];return{first:t.join(""),last:n.join("")}})(d)),[d]);return r.a.createElement(nh,{"aria-label":t,"data-test-subj":"middleTruncatedTextContainer"},r.a.createElement(y.EuiScreenReaderOnly,null,r.a.createElement("span",{"data-test-subj":"middleTruncatedTextSROnly"},a)),r.a.createElement(ah,{as:y.EuiToolTip,content:r.a.createElement(Vg,{text:ps(e,a),url:l}),"data-test-subj":"middleTruncatedTextToolTip",delay:"long",position:"top"},r.a.createElement(r.a.Fragment,null,i?r.a.createElement(ch,{onClick:i,"data-test-subj":`middleTruncatedTextButton${e}`,buttonRef:s,flush:"left"},r.a.createElement(rh,null,r.a.createElement(sh,{color:"subdued",size:"s",$_css:`${String(c).length+3}ch`},e),u&&r.a.createElement(uh,{type:"lock",size:"s",color:"success","aria-label":o.i18n.translate("xpack.synthetics.waterfallChart.sidebar.url.https",{defaultMessage:"https"})}),r.a.createElement(oh,null,m.first),r.a.createElement(lh,null,m.last))):r.a.createElement(rh,{"aria-hidden":!0},r.a.createElement(oh,null,e,". ",m.first),r.a.createElement(lh,null,m.last)))),r.a.createElement("span",null,r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMiddleTruncatedTextLink",href:l,external:!0,target:"_blank"},r.a.createElement(y.EuiScreenReaderOnly,null,r.a.createElement("span",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.resource.externalLink",defaultMessage:"Open resource in new tab"}))))))},mh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.details",{defaultMessage:"Details"}),ph=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.certificates",{defaultMessage:"Certificate headers"}),fh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.requestHeaders",{defaultMessage:"Request headers"}),gh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.responseHeaders",{defaultMessage:"Response headers"}),hh=Object(m.euiStyled)(y.EuiFlyout)`
  z-index: ${e=>e.theme.eui.euiZLevel5};
`,bh=({flyoutData:e,isFlyoutVisible:t,onFlyoutClose:a})=>{const i=Object(n.useRef)(null),s=Object(f.useUiTracker)({app:"uptime"});if(Object(n.useEffect)((()=>{var a;t&&e&&i.current&&(null===(a=i.current)||void 0===a||a.focus())}),[e,t,i]),!e||!t)return null;const{x:o,url:l,details:c,certificates:u,requestHeaders:d,responseHeaders:m}=e;return s({metric:"waterfall_flyout",metricType:f.METRIC_TYPE.CLICK}),r.a.createElement("div",{tabIndex:-1,ref:i,"data-test-subj":"waterfallFlyout","aria-labelledby":"flyoutTitle"},r.a.createElement(hh,{size:"s",onClose:a},r.a.createElement(y.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"s"},r.a.createElement("h2",{id:"flyoutTitle"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(dh,{index:o+1,text:l,url:l,ariaLabel:l,highestIndex:o+1}))))),r.a.createElement(y.EuiFlyoutBody,null,r.a.createElement(Ag,{rows:c,title:mh}),!!d&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Ag,{rows:d,title:fh})),!!m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Ag,{rows:m,title:gh})),!!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Ag,{rows:u,title:ph})))))},Eh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.placeholder",{defaultMessage:"Filter network requests"}),vh=o.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.searchLabel",{defaultMessage:"Search"}),yh=(o.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.filterScreenreaderLabel",{defaultMessage:"Filter by"}),o.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.removeFilterScreenReaderLabel",{defaultMessage:"Remove filter by"}),o.i18n.translate("xpack.synthetics.synthetics.waterfall.sidebar.filterMatchesScreenReaderLabel",{defaultMessage:"Resource matches filter"})),xh=r.a.memo((function({item:e,highestIndex:t,renderFilterScreenReaderText:a,onClick:i}){const[s,o]=Object(n.useState)(),{status:l,offsetIndex:c,index:u,isHighlighted:d,url:m}=e,p=Object(n.useMemo)((()=>{if(i)return()=>i({buttonRef:s,networkItemIndex:u})}),[s,u,i]),f=Object(n.useCallback)((e=>o(e)),[o]),g=e.url,h=`${d&&a?`${yh} `:""}${g}`;return r.a.createElement(Sh,{"data-test-subj":d?"sideBarHighlightedItem":"sideBarDimmedItem",$_css:d?"1":"0.4"},l&&((b=l)>=400&&b<=499||b>=500&&b<=599||301===b||307===b||308===b)?r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1,style:{minWidth:0}},r.a.createElement(dh,{index:c,text:g,url:m,ariaLabel:h,onClick:p,setButtonRef:f,highestIndex:t})),r.a.createElement(y.EuiFlexItem,{component:"span",grow:!1},r.a.createElement(y.EuiBadge,{color:"danger"},l))):r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,{grow:!1,style:{minWidth:0}},r.a.createElement(dh,{index:c,text:g,url:m,ariaLabel:h,onClick:p,setButtonRef:f,highestIndex:t}))));var b}));var Sh=G()(Zg).withConfig({displayName:"_StyledSideBarItemHighlighter",componentId:"sc-1w91okq-0"})((e=>({opacity:e.$_css})));const kh=({totalNetworkRequests:e,fetchedNetworkRequests:t,highlightedNetworkRequests:a})=>r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.waterfall.networkRequests.count",defaultMessage:"Showing {countShown} of {total} {networkRequestsLabel}",values:{countShown:r.a.createElement("strong",{"data-test-subj":"syntheticsWaterfallChartCountShown"},r.a.createElement(y.EuiI18nNumber,{value:a})),total:r.a.createElement(y.EuiI18nNumber,{value:e}),networkRequestsLabel:r.a.createElement("strong",null,o.i18n.translate("xpack.synthetics.waterfall.networkRequests.pluralizedCount",{defaultMessage:"{total, plural, one {network request} other {network requests}}",values:{total:e}}))}}),e>t&&r.a.createElement(y.EuiIconTip,{type:"iInCircle",color:"warning",content:o.i18n.translate("xpack.synthetics.synthetics.waterfall.requestsTotalMessage.info",{defaultMessage:"Waterfall view only shows up to 1000 requests"})}))),Mh=({query:e,setQuery:t,totalNetworkRequests:a,highlightedNetworkRequests:i,fetchedNetworkRequests:s})=>{const o=Object(f.useUiTracker)({app:"uptime"}),[l,c]=Object(n.useState)(e),{euiTheme:u}=Object(y.useEuiTheme)();return fd()((()=>{t(l)}),300,[l]),Object(n.useEffect)((()=>{e&&o({metric:"waterfall_filter_input_changed",metricType:f.METRIC_TYPE.CLICK})}),[e,o]),r.a.createElement(y.EuiFlexGroup,{direction:"column",justifyContent:"spaceBetween",gutterSize:"s",style:{marginRight:u.size.l}},r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("h3",null,wh)),r.a.createElement(y.EuiFieldSearch,{"data-test-subj":"syntheticsWaterfallSearchFieldSearch",fullWidth:!0,"aria-label":Eh,placeholder:vh,onChange:e=>{c(e.target.value)},value:l}),r.a.createElement(kh,{totalNetworkRequests:a,highlightedNetworkRequests:i,fetchedNetworkRequests:s}))},wh=o.i18n.translate("xpack.synthetics.waterfall.networkRequests.heading",{defaultMessage:"Network Requests"});function Th({id:e,color:t,label:a,boxSize:i=12,isClickable:s=!1,isActive:o=!1,onClick:l}){const[c,u]=Object(n.useState)(!1),d=Object(n.useCallback)((e=>{u("mouseenter"===(null==e?void 0:e.type))}),[]),m=!s||o||c,p=s?Ch:void 0,f=`${a}${s?` - ${p}`:""}`;return r.a.createElement(Ih,{component:Oh,role:s?"checkbox":"listitem",title:p,"aria-label":f,"aria-checked":s?o:void 0,alignItems:"center",gutterSize:"s",onMouseEnter:d,onMouseLeave:d,onClick:()=>{null==l||l(e)},$_css:s?"pointer":void 0},r.a.createElement(y.EuiIcon,{color:t,size:"m",type:m?"stopFilled":"stopSlash"}),r.a.createElement(y.EuiText,{size:"xs"},a))}const Oh=m.euiStyled.div`
  flex-grow: 0;
  flex-shrink: 0;
  &:active {
    ${({role:e})=>"checkbox"===e?"text-decoration: underline;":""}
  }
`,Ch=o.i18n.translate("xpack.synthetics.waterfall.applyFilters.message",{defaultMessage:"Click to add or remove filter"});var Ih=G()(y.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-16yhs03-0"})((e=>({height:16,cursor:e.$_css})));const jh=({activeFilters:e,setActiveFilters:t,showCustomMarks:a,setShowCustomMarks:i})=>{const{euiTheme:s}=Object(y.useEuiTheme)(),o=Object(n.useCallback)((e=>{t((t=>{const a=t.includes(e)?t.filter((t=>t!==e)):[...t,e];return a.length===Nr.length?[]:a}))}),[t]),l=Object(n.useCallback)((()=>{t([])}),[t]),c=e.length>0;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{direction:"column",alignItems:"flexStart",gutterSize:"none"},r.a.createElement(Lh,{$_css:s.size.s},c?null:r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},_h)),r.a.createElement(Rh,{wrap:!0,$_css2:`min(3%, ${s.size.l})`,$_css3:s.size.s},Nr.map((t=>r.a.createElement(Th,{key:t.mimeType,id:t.mimeType,color:ms[t.mimeType],label:t.label,isClickable:!0,isActive:!e.length||e.includes(t.mimeType),onClick:o})))),r.a.createElement(Dh,{justifyContent:"spaceBetween"},r.a.createElement(Ah,null,c?r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsWaterfallLegendButton",size:"xs",onClick:l},Fh):null),r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsWaterfallCustomMarksButton",size:"xs",iconType:a?"eye":"eyeClosed",iconSize:"s",onClick:()=>{i(!a)}},Ph))))},_h=o.i18n.translate("xpack.synthetics.waterfall.applyFilters.label",{defaultMessage:"Select an item to apply filter"}),Fh=o.i18n.translate("xpack.synthetics.waterfall.clearFilters.label",{defaultMessage:"Clear filters"}),Ph=o.i18n.translate("xpack.synthetics.waterfall.customMarks.label",{defaultMessage:"Custom marks"});var Lh=G()(y.EuiFlexItem)((e=>({height:20,marginTop:6,marginLeft:e.$_css}))),Rh=G()(y.EuiFlexGroup)((e=>({gap:e.$_css2,width:"100%",padding:e.$_css3}))),Dh=G()(y.EuiFlexGroup)({height:24,width:"100%"}),Ah=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-11b3yil-0"})({maxWidth:"fit-content"});const Nh=()=>{const{euiTheme:e}=Object(y.useEuiTheme)();return r.a.createElement(zh,{wrap:!0,$_css:`min(3%, ${e.size.l})`},Object.values(jr).filter((e=>e!==jr.Receive)).map((e=>r.a.createElement(Th,{key:e,id:e,color:ms[e],label:Fr[e]}))))};var zh=G()(y.EuiFlexGroup).withConfig({displayName:"_StyledEuiFlexGroup",componentId:"sc-mzf8u1-0"})((e=>({gap:e.$_css})));const Bh=()=>{const e=Object(p.useDarkMode)(!1);return Object(n.useMemo)((()=>e?rt.DARK_THEME:rt.LIGHT_THEME),[e])},Hh=e=>{const t=e["@timestamp"],{lt:a,gte:n}=e.monitor.timespan,r=48*$()(a).diff($()(n),"millisecond");return{to:t,from:$()(t).subtract(r,"millisecond").toISOString()}};function Gh({title:e,field:t,step:a}){var n,i,s,o;const{exploratoryView:l}=ut(),u=l.ExploratoryViewEmbeddable,d=null===(n=Object(p.useKibana)().services.http)||void 0===n||null===(i=n.basePath)||void 0===i?void 0:i.get(),m=[{name:`${e}(${null===(s=a.synthetics.step)||void 0===s?void 0:s.name})`,selectedMetricField:t,time:Hh(a),seriesType:"area",dataType:"synthetics",reportDefinitions:{"monitor.name":[a.monitor.name],"synthetics.step.name.keyword":[null===(o=a.synthetics.step)||void 0===o?void 0:o.name]},operationType:"last_value"}],f=Object(B.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:m},d);return r.a.createElement($h,null,r.a.createElement(u,{title:e,appendTitle:r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsStepFieldTrendButton",iconType:"visArea",href:f,target:"_blank",size:"s"},Vh),reportType:"kpi-over-time",attributes:m,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},legendIsVisible:!1,dataTypesIndexPatterns:{synthetics:c.A},withActions:!1}))}const Vh=o.i18n.translate("xpack.synthetics.synthetics.markers.explore",{defaultMessage:"Explore"}),$h=m.euiStyled.div`
  height: 200px;
  width: 400px;
  &&& {
    .expExpressionRenderer__expression {
      padding-bottom: 0 !important;
    }
  }
`;function Uh({title:e,field:t}){const{activeStep:a}=Bg();return a?r.a.createElement(Gh,{field:t,title:e,step:a}):null}function qh({field:e,label:t}){const[a,i]=Object(n.useState)(!1),{euiTheme:s}=Object(y.useEuiTheme)();return e?r.a.createElement(Wh,{isOpen:a,closePopover:()=>i(!1),anchorPosition:"downLeft",panelStyle:{paddingBottom:0,paddingLeft:4},zIndex:100,button:r.a.createElement(Kh,{"data-test-subj":"syntheticsWaterfallMarkerIconButton","aria-label":o.i18n.translate("xpack.synthetics.synthetics.markers.openEmbeddableButton.label",{defaultMessage:"Use this icon button to show metrics for this annotation marker."}),iconType:"dot",iconSize:"m",onClick:()=>i((e=>!e)),$_css:s.colors.mediumShade})},r.a.createElement(Uh,{title:t,field:e})):r.a.createElement(y.EuiIcon,{"aria-label":o.i18n.translate("xpack.synthetics.synthetics.markers.noFieldIcon.label",{defaultMessage:"An icon indicating that this marker has no field associated with it"}),type:"dot",size:"m"})}var Wh=G()(y.EuiPopover)({top:4}),Kh=G()(y.EuiButtonIcon).withConfig({displayName:"_StyledEuiButtonIcon",componentId:"sc-14avvnl-0"})((e=>({color:e.$_css})));const Yh="browser.experience.lcp.us",Xh="browser.experience.fcp.us",Jh="browser.experience.load.us",Qh="browser.experience.dcl.us",Zh="layoutShift";function eb(){const e=Object(f.useTheme)(),{markerItems:t,showCustomMarks:a}=Bg(),i=Object(n.useMemo)((()=>(null!=t?t:[]).reduce(((e,t)=>{var a;return e.set(t.offset,[...null!==(a=e.get(t.offset))&&void 0!==a?a:[],t]),e}),new Map)),[t]),s=Object(n.useMemo)((()=>{let t;const n=Array.from(i.entries()).reduce(((n,[r,i])=>{const s=a?i:i.filter((({id:t})=>void 0!==tb(t,e))),o=s.some((({id:e})=>e!==Zh)),l=t&&Math.abs(r-t)<100,c=o||l?s.filter((({id:e})=>e!==Zh)):s;return c.length&&n.set(r,c),t=r,n}),new Map);return Array.from(n.entries()).map((([t,a])=>{var n,r,i;const s=(null!=a?a:[]).map((({id:e})=>e)).filter(((e,t,a)=>a.indexOf(e)===t)),o=s.map((t=>{var a,n;return null!==(a=null===(n=tb(t,e))||void 0===n?void 0:n.label)&&void 0!==a?a:t})).join(" / "),l=s[0],c=tb(l,e);return{id:l,offset:t,label:o,field:null!==(n=null==c?void 0:c.field)&&void 0!==n?n:"",color:null!==(r=null==c?void 0:c.color)&&void 0!==r?r:e.eui.euiColorMediumShade,strokeWidth:null!==(i=null==c?void 0:c.strokeWidth)&&void 0!==i?i:1,dash:null==c?void 0:c.dash}}))}),[i,a,e]);return t?r.a.createElement(ab,null,s.map((({id:t,offset:a,label:n,field:i,color:s,strokeWidth:o,dash:l})=>{const c=`${t}-${a}`;return r.a.createElement(rt.LineAnnotation,{key:c,id:c,domainType:rt.AnnotationDomainType.YDomain,dataValues:[{dataValue:a,details:n,header:fs(a,{maxMillis:4e3})}],marker:r.a.createElement(qh,{field:i,label:n}),style:{line:{strokeWidth:o,stroke:s,opacity:1,dash:l}},zIndex:e.eui.euiZLevel0})}))):null}function tb(e,t){switch(e){case"domContentLoaded":return{label:ob,color:t.eui.euiColorMediumShade,field:Qh,strokeWidth:1,dash:void 0};case"firstContentfulPaint":return{label:nb,color:t.eui.euiColorMediumShade,field:Xh,strokeWidth:1,dash:void 0};case"largestContentfulPaint":return{label:rb,color:t.eui.euiColorMediumShade,field:Yh,strokeWidth:1,dash:void 0};case"layoutShift":return{label:ib,color:t.eui.euiColorMediumShade,field:"",strokeWidth:1,dash:[5,5]};case"loadEvent":return{label:sb,color:t.eui.euiColorMediumShade,field:Jh,strokeWidth:1,dash:void 0}}}const ab=m.euiStyled.span`
  &&& {
    > .echAnnotation__icon {
      top: 8px;
    }
  }
`,nb=o.i18n.translate("xpack.synthetics.synthetics.waterfall.fcpLabel",{defaultMessage:"First contentful paint"}),rb=o.i18n.translate("xpack.synthetics.synthetics.waterfall.lcpLabel",{defaultMessage:"Largest contentful paint"}),ib=o.i18n.translate("xpack.synthetics.synthetics.waterfall.layoutShiftLabel",{defaultMessage:"Layout shift"}),sb=o.i18n.translate("xpack.synthetics.synthetics.waterfall.loadEventLabel",{defaultMessage:"Load event"}),ob=o.i18n.translate("xpack.synthetics.synthetics.waterfall.domContentLabel",{defaultMessage:"DOM Content Loaded"}),lb=({tickFormat:e,domain:t,barStyleAccessor:a})=>{const n=Bh(),{euiTheme:i}=Object(y.useEuiTheme)();return r.a.createElement(Jg,null,r.a.createElement(rt.Chart,{className:"axis-only-chart","data-test-subj":"axisOnlyChart"},r.a.createElement(rt.Tooltip,{type:rt.TooltipType.None}),r.a.createElement(rt.Settings,{showLegend:!1,rotation:90,theme:[{background:{color:"transparent"}}],baseTheme:n,locale:o.i18n.getLocale()}),r.a.createElement(rt.Axis,{id:"time",position:rt.Position.Top,tickFormat:e,style:{tickLabel:{fontSize:12,fill:i.colors.darkestShade}},domain:t,gridLine:{visible:!0}}),r.a.createElement(rt.BarSeries,{"aria-hidden":!0,id:"waterfallItems",xScaleType:rt.ScaleType.Ordinal,yScaleType:rt.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:a,data:[{x:0,y0:0,y1:1},{x:1,y0:0,y1:1}]}),r.a.createElement(eb,null)))},cb=({showOnlyHighlightedNetworkRequests:e,setOnlyHighlighted:t,highlightedNetworkRequests:a,fetchedNetworkRequests:n,shouldRenderSidebar:i,barStyleAccessor:s,domain:o,tickFormat:l})=>{const{euiTheme:c}=Object(y.useEuiTheme)();return r.a.createElement(Xg,null,r.a.createElement(y.EuiFlexGroup,{gutterSize:"none",direction:"column"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiFlexGroup,{gutterSize:"none",responsive:!1},i&&r.a.createElement(Qg,{grow:3},a<n?r.a.createElement(r.a.Fragment,null,r.a.createElement(db,{role:"button",gutterSize:"s",alignItems:"center","data-test-subj":"syntheticsWaterfallHideNonMatching","aria-pressed":e,title:ub,"aria-label":ub,onClick:()=>{t(!e)},$_css:c.size.s,$_css2:c.size.m,$_css3:c.size.s,$_css4:c.colors.primaryText},r.a.createElement(y.EuiIcon,{type:e?"eyeClosed":"eye",size:"s"}),r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.waterfall.networkRequests.filteredOut",defaultMessage:"Filtered out"})))):null),r.a.createElement(mb,{grow:!i||8,"data-test-subj":"axisOnlyWrapper"},r.a.createElement(lb,{domain:o,barStyleAccessor:s,tickFormat:l}))))))},ub=o.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.collapseRequestsLabel",{defaultMessage:"Collapse to only show matching requests"});var db=G()(y.EuiFlexGroup)((e=>({marginTop:e.$_css,marginLeft:e.$_css2,marginBottom:e.$_css3,whiteSpace:"nowrap",cursor:"pointer",color:e.$_css4}))),mb=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-5yo0el-0"})({outline:0,marginLeft:"-16px",height:40});const pb=({items:e,render:t})=>{const{euiTheme:a}=Object(y.useEuiTheme)(),{onSidebarClick:i}=Bg(),s=Object(n.useMemo)((()=>i),[i]);return r.a.createElement(Qg,{grow:3},r.a.createElement("div",{style:{height:e.length*Ug,overflow:"hidden"},"data-test-subj":"wfSidebarContainer"},r.a.createElement(fb,{hasBorder:!1,hasShadow:!1,paddingSize:"none"},r.a.createElement(gb,{direction:"column",gutterSize:"none",responsive:!1},e.map(((e,n)=>r.a.createElement(hb,{key:n,$_css:a.size.s},t(e,n,s))))))))};var fb=G()(y.EuiPanel)({height:"100%"}),gb=G()(y.EuiFlexGroup)({height:"100%",paddingTop:1.5}),hb=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-9uum3m-0"})((e=>({outline:0,minWidth:0,justifyContent:"space-around",paddingRight:e.$_css})));const bb=e=>{var t;const{data:a,sidebarItems:i}=Bg();return Object(n.useMemo)((()=>{const t=null==i?void 0:i.find((t=>{var a;return t.index===(null===(a=e.header)||void 0===a?void 0:a.value)}));return a.filter((t=>{var a;return t.x===(null===(a=e.header)||void 0===a?void 0:a.value)&&t.config.showTooltip&&t.config.tooltipProps})).length?r.a.createElement(rt.TooltipContainer,null,r.a.createElement(ah,null,t&&r.a.createElement(Vg,{text:ps(t.index+1,t.url),url:t.url}))):null}),[a,i,null===(t=e.header)||void 0===t?void 0:t.value])},Eb=({chartData:e,tickFormat:t,domain:a,barStyleAccessor:i,index:s})=>{var l;const c=Bh(),{euiTheme:u}=Object(y.useEuiTheme)(),{onElementClick:d,onProjectionClick:m}=Bg(),p=Object(n.useMemo)((()=>d),[d]),f=Object(n.useMemo)((()=>m),[m]),g=Object(n.useCallback)(t,[t]);return r.a.createElement(eh,{height:(h=e,24*new Set(h.map((e=>e.x))).size),chartIndex:s,"data-test-subj":"wfDataOnlyBarChart"},r.a.createElement(rt.Chart,{className:"data-chart"},r.a.createElement(rt.Tooltip,{boundary:null!==(l=document.getElementById("app-fixed-viewport"))&&void 0!==l?l:void 0,customTooltip:bb}),r.a.createElement(rt.Settings,{showLegend:!1,rotation:90,theme:{tooltip:{maxWidth:500}},baseTheme:c,onProjectionClick:f,onElementClick:p,locale:o.i18n.getLocale()}),r.a.createElement(rt.Axis,{"aria-hidden":!0,id:"time",position:rt.Position.Top,tickFormat:g,domain:a,gridLine:{visible:!0},style:{axisLine:{visible:!1},tickLabel:{fontSize:12,fill:u.colors.darkestShade}}}),r.a.createElement(rt.BarSeries,{id:"waterfallItems",xScaleType:rt.ScaleType.Ordinal,yScaleType:rt.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:i,data:e}),r.a.createElement(eb,null)));var h},vb=({tickFormat:e,domain:t,barStyleAccessor:a,renderSidebarItem:i,renderFlyout:s})=>{const{euiTheme:o}=Object(y.useEuiTheme)(),{data:l,query:c,setQuery:u,sidebarItems:d,activeFilters:m,setActiveFilters:p,showOnlyHighlightedNetworkRequests:f,setOnlyHighlighted:g,showCustomMarks:h,setShowCustomMarks:b,totalNetworkRequests:E,highlightedNetworkRequests:v,fetchedNetworkRequests:x}=Bg(),S=!(!d||!i),k=(({data:e})=>{const[t,a]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t=[];if((null==e?void 0:e.length)>0){let a=0;const n=new Set;let r;e.filter((e=>!0)).forEach((e=>{150===n.size&&e.x>r&&(a++,n.clear()),n.add(e.x),r=e.x,t[a]?t[a].push(e):t.push([e])}))}a(t)}),[e]),t})({data:l}),M={marginLeft:`-${o.size.l}`,marginRight:`-${o.size.l}`};return r.a.createElement("div",{style:{position:"relative",...M}},r.a.createElement(Kg,{"data-test-sub":"syntheticsWaterfallChartStickyHeaderContainer",style:{background:o.colors.body}},r.a.createElement(y.EuiFlexGroup,{style:{height:"100%"},gutterSize:"s",alignItems:"stretch",responsive:!1},S&&r.a.createElement(Qg,{grow:3},r.a.createElement(Mh,{query:c,setQuery:u,totalNetworkRequests:E,highlightedNetworkRequests:v,fetchedNetworkRequests:x})),r.a.createElement(y.EuiFlexItem,{grow:!S||8},r.a.createElement(jh,{activeFilters:m,setActiveFilters:p,showCustomMarks:h,setShowCustomMarks:b}))),r.a.createElement(cb,{showOnlyHighlightedNetworkRequests:f,setOnlyHighlighted:g,highlightedNetworkRequests:v,fetchedNetworkRequests:x,shouldRenderSidebar:S,domain:t,tickFormat:e,barStyleAccessor:a})),r.a.createElement(Wg,{"data-test-subj":"syntheticsWaterfallChartOuterContainer"},r.a.createElement(y.EuiFlexGroup,{gutterSize:"none",responsive:!1},S?r.a.createElement(pb,{items:d,render:i}):null,r.a.createElement(y.EuiFlexItem,{style:{marginLeft:"-16px"},grow:!S||8,"data-test-subj":"dataOnlyWrapper"},k.map(((n,i)=>r.a.createElement(Eb,{index:i,key:i,chartData:n,domain:t,barStyleAccessor:a,tickFormat:e})))))),r.a.createElement(Yg,{"data-test-sub":"syntheticsWaterfallChartStickyFooterContainer",style:{background:o.colors.body}},r.a.createElement(Nh,null)),s&&s())},yb=e=>r.a.createElement(y.EuiHealth,{color:e.color,className:"eui-textNoWrap"},e.name),xb=({data:e,total:t,markerItems:a,activeStep:i})=>{const[s,o]=Object(n.useState)(""),[l,c]=Object(n.useState)([]),[u,d]=ym()("xpack.synthetics.waterfallChart.showOnlyHighlighted",!1),[m,p]=ym()("xpack.synthetics.waterfallChart.showCustomMarks",!1),[f]=Object(n.useState)(e),g=l.length>0,h=Ba(),{series:b,domain:E,metadata:v,totalHighlightedRequests:x}=Object(n.useMemo)((()=>((e,t=!1,a,n,r,i)=>{const s=e=>e.requestSentTime;let o=1/0;e.forEach((e=>o=Math.min(o,s(e))));const l=[],c=[];let u=0;const d=os(n),m=ls(r);e.forEach(((e,t)=>{const n=(e=>{const t=e&&Ar[e]?Ar[e]:Rr.Other;return ms[t]})(e.mimeType);let r=s(e)-o;c.push(us({item:e,index:t,requestStart:r,dateFormatter:a}));const i=rs(e,d,m);if(i&&u++,!e.timings)return void l.push({x:t,y0:0,y:0,config:{isHighlighted:i,showTooltip:!1}});let p=!1;if(Lr.forEach((a=>{const s=((e,t)=>{if(e)return t===jr.Connect?ss(e.connect,e.ssl):e[t]})(e.timings,a);if(s&&s>=0){p=!0;const o=a===jr.Receive?n:ms[a],c=r+s;l.push({x:t,y0:r,y:c,config:{id:t,colour:o,isHighlighted:i,showTooltip:!0,tooltipProps:{value:ns({value:c-r,timing:a,mimeType:e.mimeType}),colour:o}}}),r=c}})),!p){const a=e.timings.total,s=-1!==a;l.push({x:t,y0:s?r:0,y:s?r+e.timings.total:0,config:{isHighlighted:i,colour:s?n:"",showTooltip:s,tooltipProps:s?{value:ns({value:a,timing:jr.Receive,mimeType:e.mimeType}),colour:n}:void 0}})}}));const p=l.map((e=>e.y)),f={min:0,max:Math.max(...p)};let g=l;if(t&&(g=l.filter((e=>e.config.isHighlighted))),i&&i.length>0){const e=Math.max(...i.map((e=>e.offset)));f.max=Math.max(f.max,e)}return{series:g,domain:f,metadata:c,totalHighlightedRequests:u}})(f,u,h,s,l,a)),[f,h,s,l,u,a]),S=Object(n.useMemo)((()=>((e,t,a,n)=>{const r=os(a),i=ls(n),s=e.map(((e,t)=>{const a=rs(e,r,i),n=t+1,{url:s,status:o,method:l}=e;return{url:s,status:o,method:l,isHighlighted:a,offsetIndex:n,index:t}}));return t?s.filter((e=>e.isHighlighted)):s})(f,null!=u&&u,s,l)),[f,s,l,u]),{flyoutData:k,onBarClick:M,onProjectionClick:w,onSidebarClick:T,isFlyoutVisible:O,onFlyoutClose:C}=(e=>{const[t,a]=Object(n.useState)(!1),[r,i]=Object(n.useState)(void 0),[s,o]=Object(n.useState)(),l=Object(n.useCallback)((e=>{i(e),a(!0)}),[a,i]),c=Object(n.useCallback)((()=>{var e;a(!1),null==s||null===(e=s.current)||void 0===e||e.focus()}),[s,a]);return{flyoutData:r,onBarClick:Object(n.useCallback)((([t])=>{a(!1);const{datum:n}=t[0],r=e[n.config.id];l(r)}),[e,l]),onProjectionClick:Object(n.useCallback)((t=>{a(!1);const{x:n}=t;if("number"==typeof n&&n>=0){const t=e[n];l(t)}}),[e,l]),onSidebarClick:Object(n.useCallback)((({buttonRef:n,networkItemIndex:r})=>{if(t&&n===s)a(!1);else{const t=e[r];o(n),l(t)}}),[s,l,t,e,a]),isFlyoutVisible:t,onFlyoutClose:c}})(v),I=Object(n.useCallback)((()=>r.a.createElement(bh,{flyoutData:k,onFlyoutClose:C,isFlyoutVisible:O})),[k,O,C]),j=Math.max(...b.map((e=>e.x))),_=Object(n.useCallback)((e=>r.a.createElement(xh,{item:e,renderFilterScreenReaderText:g&&!u,onClick:T,highestIndex:j})),[g,u,T,j]);return r.a.createElement(zg,{activeStep:i,markerItems:a,totalNetworkRequests:t,fetchedNetworkRequests:f.length,highlightedNetworkRequests:x,data:b,onElementClick:Object(n.useCallback)(M,[M]),onProjectionClick:Object(n.useCallback)(w,[w]),onSidebarClick:T,showOnlyHighlightedNetworkRequests:null!=u&&u,showCustomMarks:null!=m&&m,sidebarItems:S,metadata:v,activeFilters:l,setActiveFilters:c,setOnlyHighlighted:d,setShowCustomMarks:p,query:s,setQuery:o,renderTooltipItem:Object(n.useCallback)((e=>r.a.createElement(y.EuiHealth,{color:String(null==e?void 0:e.colour)},null==e?void 0:e.value)),[])},r.a.createElement(vb,{tickFormat:Object(n.useCallback)((e=>`${Number(e).toFixed(0)} ms`),[]),domain:E,barStyleAccessor:Object(n.useCallback)((({datum:e})=>{var t,a;return null!==(t=e.config)&&void 0!==t&&t.isHighlighted?e.config.colour:{rect:{fill:null===(a=e.config)||void 0===a?void 0:a.colour,opacity:"0.1"}}}),[]),renderSidebarItem:_,renderLegendItem:yb,renderFlyout:I}))},Sb="browser.relative_trace.type",kb="browser.relative_trace.name",Mb="browser.relative_trace.start.us",wb="navigationStart",Tb=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfallNoData",{defaultMessage:"No waterfall data could be found for this step"}),Ob=({checkGroup:e,stepIndex:t,activeStep:a})=>{var i,s;const l=null===(i=Object(u.useSelector)(zr)[null!=e?e:""])||void 0===i?void 0:i[t],d=(null==l||null===(s=l.events)||void 0===s?void 0:s.length)>0,m=l&&!l.loading,p=null==l?void 0:l.isWaterfallSupported,{metrics:g}=(({checkGroup:e,hasNavigationRequest:t,stepIndex:a})=>{const{data:n,loading:r}=Object(f.useEsSearch)(t?Object(f.createEsParams)({index:c.A,body:{query:{bool:{filter:[{term:{"synthetics.step.index":a}},{term:{"monitor.check_group":e}},{term:{"synthetics.type":"step/metrics"}}]}},fields:["browser.*"],size:1e3,_source:!1}}):{},[e,t],{name:"getWaterfallStepMetrics"});if(!t)return{metrics:[],loading:!1};const i=[];if(n&&t){const e=n.hits.hits;let t=0,a=!1;e.forEach((({fields:e})=>{var n;if("mark"===(null===(n=e[Sb])||void 0===n?void 0:n[0])){const{[kb]:n,[Mb]:r}=e;(null==n?void 0:n[0])===wb&&(t=null==r?void 0:r[0],a=!0)}})),a&&e.forEach((({fields:e})=>{var a;if("mark"===(null===(a=e[Sb])||void 0===a?void 0:a[0])){const{[kb]:a,[Mb]:n}=e;(null==a?void 0:a[0])!==wb&&i.push({id:null==a?void 0:a[0],offset:((null==n?void 0:n[0])-t)/1e3})}}))}return{metrics:i,loading:r}})({checkGroup:e,stepIndex:t,hasNavigationRequest:null==l?void 0:l.hasNavigationRequest}),h=Object(n.useMemo)((()=>{var e;return(e=>[...e].sort(((e,t)=>e.requestSentTime-t.requestSentTime)))(null!==(e=null==l?void 0:l.events)&&void 0!==e?e:[])}),[null==l?void 0:l.events]);return r.a.createElement(r.a.Fragment,null,!m&&r.a.createElement(y.EuiFlexGroup,{justifyContent:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiLoadingChart,{size:"xl","aria-label":o.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfall.loading",{defaultMessage:"Waterfall chart loading"})}))),m&&!d&&r.a.createElement(y.EuiFlexGroup,{justifyContent:"center"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,{textAlign:"center"},r.a.createElement("p",null,Tb)))),m&&d&&p&&r.a.createElement(xb,{data:h,markerItems:g,total:l.total,activeStep:a}),m&&d&&!p&&r.a.createElement(y.EuiCallOut,{title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.title",defaultMessage:"Waterfall chart unavailable"}),color:"warning",iconType:"help"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.description",defaultMessage:"The waterfall chart cannot be shown. You may be using an older version of the Synthetic Agent. Please check the version and consider upgrading."})))},Cb={chartMargins:{top:0,bottom:0,left:0,right:0},partition:{linkLabel:{maximumSection:1/0,maxCount:0},idealFontSizeJump:1.1,outerSizeRatio:.9,emptySizeRatio:.6,circlePadding:5}},Ib=()=>{const e=ii(),t=Object(f.useTheme)();return e?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,jb))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiIconTip,{content:_b,position:"right"}))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(rt.Chart,{size:{height:240}},r.a.createElement(rt.Settings,{theme:[Cb],baseTheme:rt.LEGACY_LIGHT_THEME,showLegend:!1,locale:o.i18n.getLocale()}),r.a.createElement(rt.Partition,{id:"spec_1",data:e.timingsWithLabels,layout:rt.PartitionLayout.sunburst,valueAccessor:e=>null==e?void 0:e.value,valueFormatter:e=>fs(e,{}),layers:[{groupByRollup:e=>e.label,nodeLabel:e=>e,shape:{fillColor:(e,a)=>t.eui[`euiColorVis${a+1}`]}}]}))):r.a.createElement(y.EuiLoadingSpinner,{size:"xl"})},jb=o.i18n.translate("xpack.synthetics.stepDetailsRoute.timingsBreakdown",{defaultMessage:"Timing breakdown"}),_b=o.i18n.translate("xpack.synthetics.stepDetailsRoute.timingsBreakdown.info",{defaultMessage:"Sum of all network request timings"});var Fb=a(124);const Pb=({label:e,mimeType:t,percent:a,value:n,loading:i,delta:s,hasAnyThresholdBreach:l,labelWidth:c=40,valueWidth:u=65})=>{const d=()=>Math.abs(s)<5?"default":s>5?"danger":"success",m=Math.abs(s)>0;return r.a.createElement(y.EuiFlexGroup,{gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1,style:{width:c}},r.a.createElement(y.EuiText,{size:"s"},e)),r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(Lb,{mimeType:t,percent:isNaN(a)?0:a,loading:i})),r.a.createElement(y.EuiFlexItem,{grow:!1,style:{width:u,justifySelf:"flex-end"}},r.a.createElement(y.EuiText,{size:"s",style:{fontWeight:"bold",whiteSpace:"nowrap"},className:"eui-textRight",color:d()},n)),l&&r.a.createElement(y.EuiFlexItem,{grow:!1,style:{width:40}},r.a.createElement(y.EuiToolTip,{content:o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip.label",{defaultMessage:"Value is {deltaLabel} compared to steps in previous 24 hours.",values:{deltaLabel:0===Math.abs(s)?o.i18n.translate("xpack.synthetics.stepDetails.palette.tooltip.noChange",{defaultMessage:"same"}):s>0?o.i18n.translate("xpack.synthetics.stepDetails.palette.increased",{defaultMessage:"{delta}% higher",values:{delta:s}}):o.i18n.translate("xpack.synthetics.stepDetails.palette.decreased",{defaultMessage:"{delta}% lower",values:{delta:s}})}})},m?r.a.createElement(y.EuiIcon,{type:s>0?"sortUp":"sortDown",size:"m",color:d()}):r.a.createElement(y.EuiIcon,{type:"minus",size:"m",color:"subdued"}))))},Lb=({mimeType:e,percent:t,loading:a})=>{const{eui:i}=Object(f.useTheme)(),[s,o]=Object(n.useState)(0);return Object(n.useEffect)((()=>{setTimeout((()=>{s<t&&o(s+1)}),10)}),[t,s]),Object(n.useEffect)((()=>{a||o(0)}),[a]),a?r.a.createElement(y.EuiSkeletonRectangle,{height:"20px",width:"100%"}):r.a.createElement(y.EuiFlexGroup,{gutterSize:"none",style:{borderRadius:8,overflow:"hidden"}},r.a.createElement(y.EuiFlexItem,{grow:!0,style:{backgroundColor:i.euiColorLightShade}},r.a.createElement("span",{style:{backgroundColor:ms[e],height:20,width:`${s}%`}})))},Rb=()=>{const e=Br(),t=e.items.some((({weightDelta:e})=>Math.abs(Number(e))>5));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,Db))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"s"},Ab,":"," ",r.a.createElement("span",{style:{fontWeight:"bold"}},e.totalObjectsWeight)))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement("div",null,e.items.map((({label:a,mimeType:i,weightPercent:s,weight:o,weightDelta:l})=>r.a.createElement(n.Fragment,{key:i},r.a.createElement(Pb,{hasAnyThresholdBreach:t,label:a,mimeType:i,percent:s,value:o,loading:e.loading,delta:Number(l)}),r.a.createElement(y.EuiSpacer,{size:"m"})," ")))))},Db=o.i18n.translate("xpack.synthetics.stepDetails.objectWeight",{defaultMessage:"Object weight"}),Ab=o.i18n.translate("xpack.synthetics.stepDetails.totalSize",{defaultMessage:"Total size"}),Nb=()=>{const e=Br(),t=e.items.some((({countDelta:e})=>Math.abs(Number(e))>5));return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,zb))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,null,Bb,": ",r.a.createElement("span",{style:{fontWeight:"bold"}}," ",e.totalObjects)))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement("div",null,e.items.map((({label:a,mimeType:i,percent:s,count:o,countDelta:l})=>r.a.createElement(n.Fragment,{key:i},r.a.createElement(Pb,{hasAnyThresholdBreach:t,label:a,mimeType:i,percent:s,value:String(o),valueWidth:30,loading:e.loading,delta:Number(l)}),r.a.createElement(y.EuiSpacer,{size:"m"}))))))},zb=o.i18n.translate("xpack.synthetics.stepDetails.objectCount",{defaultMessage:"Object count"}),Bb=o.i18n.translate("xpack.synthetics.stepDetails.total",{defaultMessage:"Total"}),Hb=Tl(),Gb=Tl(),Vb=Tl(),$b=({name:e,configId:t,locationId:a,updateUrl:n})=>r.a.createElement(Ml,{node:Vb},r.a.createElement(Ub,{name:e,configId:t,locationId:a,updateUrl:n})),Ub=({name:e,configId:t,locationId:a,updateUrl:n})=>{const i=Os(n);let s=a;null!=i&&i.id&&!a&&(s=i.id);const o=Object(R.useHistory)().createHref({pathname:s?`monitor/${t}?locationId=${s}`:`monitor/${t}`});return r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorDetailsLinkLink",href:o},r.a.createElement(y.EuiIcon,{type:"arrowLeft"})," ",e)},qb=({step:e,ping:t,isFailed:a})=>{var i,s,o,l,c;const{euiTheme:u}=Object(y.useEuiTheme)(),d=[{id:"received",label:Yb},{id:"expected",label:Kb}],[m,p]=Object(n.useState)("received");return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,Wb)),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Xb,{color:"subdued"},"received"===m?r.a.createElement(ts,{checkGroup:null==e?void 0:e.monitor.check_group,initialStepNumber:null==e||null===(i=e.synthetics)||void 0===i||null===(s=i.step)||void 0===s?void 0:s.index,stepStatus:null==e||null===(o=e.synthetics.payload)||void 0===o?void 0:o.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,size:[260,160],borderRadius:u.border.radius.small,timestamp:null==e?void 0:e["@timestamp"]}):r.a.createElement(Fs,{step:t,stepIndex:null==e||null===(l=e.synthetics)||void 0===l||null===(c=l.step)||void 0===c?void 0:c.index,size:[260,160],borderRadius:u.border.radius.small})),r.a.createElement(y.EuiSpacer,{size:"m"}),a&&r.a.createElement(y.EuiButtonGroup,{legend:"",options:d,idSelected:m,onChange:e=>{p(e)},buttonSize:"s",isFullWidth:!0}))},Wb=o.i18n.translate("xpack.synthetics.stepDetails.screenshot",{defaultMessage:"Screenshot"}),Kb=o.i18n.translate("xpack.synthetics.stepDetails.expected",{defaultMessage:"Expected"}),Yb=o.i18n.translate("xpack.synthetics.stepDetails.received",{defaultMessage:"Received"});var Xb=G()(y.EuiPanel).withConfig({displayName:"_StyledEuiPanel",componentId:"sc-15yhq7f-0"})({outline:0,height:"192px",borderRadius:0,display:"flex",justifyContent:"center"});const Jb=()=>{const e=ii(),{timingsWithLabels:t,loading:a}=fi(),n=Object(f.useTheme)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"xxl"}),r.a.createElement(y.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.timingsWithLabels.map((({label:e,value:i},s)=>{const o=null==t?void 0:t.find((t=>t.label===e)),l=null==o?void 0:o.value;return r.a.createElement(y.EuiFlexGroup,{key:s,gutterSize:"s",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiHealth,{color:n.eui[`euiColorVis${s+1}`]},e)),r.a.createElement(y.EuiFlexItem,{grow:!1,style:{minWidth:50}},r.a.createElement($r,{loading:a,currentFormatted:fs(i,{}),current:i,previous:l||null,previousFormatted:fs(null!=l?l:0,{})})))}))))},Qb=({monitorQueryId:e})=>{const{exploratoryView:{ExploratoryViewEmbeddable:t}}=Object(p.useKibana)().services,{stepIndex:a}=Object(R.useParams)(),{locationFilter:n}=Ed();return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,Zb)),r.a.createElement(y.EuiSpacer,{size:"xs"}),r.a.createElement(t,{customHeight:"250px",reportType:B.ReportTypes.KPI,legendIsVisible:!1,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},attributes:[{operationType:"last_value",seriesType:"area_stacked",dataType:"synthetics",name:"Network timings",selectedMetricField:"network_timings",reportDefinitions:{"monitor.id":[e]},time:{from:"now-24h/h",to:"now"},filters:[{field:"synthetics.step.index",values:[a]},...n]}]})):r.a.createElement(dr,null)},Zb=o.i18n.translate("xpack.synthetics.stepDetailsRoute.last24Hours",{defaultMessage:"Last 24 hours"}),eE=()=>{var e,t,a,i,s;const{checkGroupId:o,stepIndex:l}=Object(R.useParams)();Object(f.useTrackPageview)({app:"synthetics",path:"stepDetail"}),Object(f.useTrackPageview)({app:"synthetics",path:"stepDetail",delay:15e3});const{data:c,isFailedStep:d,currentStep:m}=Ir();(e=>{var t,a,n,r,i,s,o;const{data:l,currentStep:c}=Ir(),u=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",d=Object(R.useParams)(),m=Os();Lg([{text:l?$()(null===(n=l.details)||void 0===n?void 0:n.timestamp).format("LLL"):"",href:`${u}/${Object(R.generatePath)(Pg.x,d)}?locationId=${null!==(r=null==m?void 0:m.id)&&void 0!==r?r:""}`},{text:null!==(i=`${null==c||null===(s=c.synthetics.step)||void 0===s?void 0:s.index}. ${null==c||null===(o=c.synthetics.step)||void 0===o?void 0:o.name}`)&&void 0!==i?i:""}])})();const g=Object(u.useDispatch)();return Object(n.useEffect)((()=>{g(Fb.a.get({checkGroup:o,stepIndex:Number(l)}))}),[g,l,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Fg,{step:m}),(null==c||null===(e=c.details)||void 0===e||null===(t=e.journey)||void 0===t?void 0:t.config_id)&&r.a.createElement($b,{configId:c.details.journey.config_id,name:c.details.journey.monitor.name}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m"},r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},(null==c||null===(a=c.details)||void 0===a?void 0:a.journey)&&m&&r.a.createElement(qb,{ping:null==c||null===(i=c.details)||void 0===i?void 0:i.journey,step:m,isFailed:d}))),r.a.createElement(y.EuiFlexItem,{grow:2},r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:1,style:{minWidth:150}},r.a.createElement(Ib,null)),r.a.createElement(y.EuiFlexItem,{grow:1,style:{minWidth:200}},r.a.createElement(Jb,null)),r.a.createElement(y.EuiFlexItem,{grow:2,style:{minWidth:200}},r.a.createElement(Qb,{monitorQueryId:null==c||null===(s=c.details)||void 0===s?void 0:s.journey.monitor.id})))))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m"},r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(Ei,null))),r.a.createElement(y.EuiFlexItem,{grow:2},r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{gutterSize:"xl"},r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(Rb,null)),r.a.createElement(y.EuiFlexItem,{grow:1},r.a.createElement(Nb,null)))))),r.a.createElement(y.EuiSpacer,{size:"l"}),c&&r.a.createElement(Ob,{checkGroup:o,stepIndex:Number(l),activeStep:m}))},tE=()=>{var e,t,a,n;const{checkGroupId:i,stepIndex:s}=Object(R.useParams)(),{data:o}=Ir(i),l=null==o?void 0:o.steps.find((e=>{var t;return(null===(t=e.synthetics.step)||void 0===t?void 0:t.index)===Number(s)}));return l?r.a.createElement(r.a.Fragment,null,`${null==l||null===(e=l.synthetics)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.index}. ${null==l||null===(a=l.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.name}`):r.a.createElement(y.EuiSkeletonRectangle,{height:"45px",width:"100%"})},aE=(e,t,a)=>({title:o.i18n.translate("xpack.synthetics.stepDetailsRoute.title",{defaultMessage:"Step details | {baseTitle}",values:{baseTitle:a}}),path:c.C,component:eE,dataTestSubj:"syntheticsMonitorEditPage",pageHeader:{pageTitle:r.a.createElement(tE,null),rightSideItems:[r.a.createElement(Sg,null),r.a.createElement(Hm,{isDisabled:!0}),r.a.createElement(_g,null),r.a.createElement(Ig,null)],breadcrumbs:[{text:r.a.createElement(wl,{node:Vb})}]}}),nE=()=>{var e;const{monitor:t,isMonitorMissing:a}=Ts(),{data:n,loading:i}=Ir();return t?r.a.createElement(Kn,{status:null==n||null===(e=n.details)||void 0===e?void 0:e.journey.monitor.status,monitor:t,loading:i,compressed:!1}):r.a.createElement(y.EuiDescriptionList,{align:"left",compressed:!1,listItems:[{title:Yn,description:a&&null!=n&&n.details?r.a.createElement(Wn,{status:n.details.journey.monitor.status,isBrowserType:"browser"===n.details.journey.monitor.type}):r.a.createElement(y.EuiSkeletonText,{lines:1})}]})},rE=()=>r.a.createElement(y.EuiDescriptionList,{listItems:[{title:iE,description:r.a.createElement(Mg,{testRunPage:!0})}]}),iE=o.i18n.translate("xpack.synthetics.testDetails.date",{defaultMessage:"Date"}),sE=({journeyDetails:e,hasNoSteps:t,showErrorTitle:a=!0,showErrorLogs:r=!1})=>{var i,s,o,l,c;const u="down"===(null==e||null===(i=e.journey)||void 0===i||null===(s=i.monitor)||void 0===s?void 0:s.status),d=null==e||null===(o=e.journey)||void 0===o||null===(l=o.error)||void 0===l?void 0:l.message;return n.createElement(n.Fragment,null,(t||u)&&a&&n.createElement(y.EuiCallOut,{"data-test-subj":"monitorTestRunErrorCallout",title:Oo,color:"danger",iconType:"warning"},n.createElement(y.EuiText,{color:"danger"},null!=d?d:To)),n.createElement(y.EuiSpacer,{size:"m"}),(r||t)&&n.createElement(bo,{checkGroup:null==e||null===(c=e.journey)||void 0===c?void 0:c.monitor.check_group,hideTitle:!1,pageSize:10}))},oE=({stepIndex:e,totalSteps:t,handleNextStep:a,handlePreviousStep:n})=>{const i=e>1,s=e<t;return r.a.createElement(y.EuiFlexGroup,{alignItems:"center",responsive:!1},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center",responsive:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStepNumberNavButton",onClick:n,disabled:!i,iconType:"arrowLeft"},lE)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"s"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetails.stepNav",defaultMessage:"{stepIndex} / {totalSteps}",values:{stepIndex:e,totalSteps:t}}))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsStepNumberNavButton",onClick:a,disabled:!s,iconType:"arrowRight",iconSide:"right"},cE)))))},lE=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousStepButtonText",{defaultMessage:"Previous"}),cE=o.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextStepButtonText",{defaultMessage:"Next"}),uE=({step:e,stepIndex:t,stateId:a})=>{var n,i,s,o;const{checkGroupId:l,monitorId:c}=Object(R.useParams)();if(!e)return r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiSkeletonText,{lines:4}));const u="failed"===(null===(n=e.synthetics.step)||void 0===n?void 0:n.status);return r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xxs"},r.a.createElement("h3",null,dE)),r.a.createElement(y.EuiText,{size:"m"},null==e||null===(i=e.synthetics.step)||void 0===i?void 0:i.name),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",alignItems:"center",wrap:!1},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(gs,{status:hs(null==e||null===(s=e.synthetics.step)||void 0===s?void 0:s.status)})),r.a.createElement(y.EuiFlexItem,{grow:!0},mE,js(null==e||null===(o=e.synthetics.step)||void 0===o?void 0:o.duration.us))),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},u&&a&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Kc,{configId:c,stateId:a})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Cs,{asButton:!0,checkGroup:null!=l?l:e.monitor.check_group,configId:c,stepIndex:t,label:pE}))))},dE=o.i18n.translate("xpack.synthetics.testDetails.stepName",{defaultMessage:"Step name"}),mE=o.i18n.translate("xpack.synthetics.testDetails.after",{defaultMessage:"After "}),pE=o.i18n.translate("xpack.synthetics.monitor.step.viewPerformanceBreakdown",{defaultMessage:"View performance breakdown"}),fE=({stepIndex:e,step:t,stateId:a})=>{var n,i;const{checkGroupId:s}=Object(R.useParams)();return r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!1,color:"subdued"},r.a.createElement(y.EuiFlexGroup,{wrap:!0},r.a.createElement(gE,{grow:!1},t?r.a.createElement(ts,{key:e,checkGroup:null!==(n=null==t?void 0:t.monitor.check_group)&&void 0!==n?n:s,initialStepNumber:e,stepStatus:null==t||null===(i=t.synthetics.payload)||void 0===i?void 0:i.status,allStepsLoaded:!0,retryFetchOnRevisit:!1,size:[180,112],timestamp:null==t?void 0:t["@timestamp"]}):null),r.a.createElement(uE,{step:t,stepIndex:e,stateId:a})))};var gE=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-60t4a0-0"})({margin:"0 auto"});const hE=({isLoading:e,steps:t})=>{const a=t.filter(Rs).reduce(((e,t)=>{var a,n,r;return e+(null!==(a=null===(n=t.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.duration.us)&&void 0!==a?a:0)}),0);return r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h2",null,bE))),r.a.createElement(y.EuiFlexItem,{grow:!1},EE,js(a))),r.a.createElement(Ns,{steps:t,loading:e,showStepNumber:!0,compressed:!1}))},bE=o.i18n.translate("xpack.synthetics.testDetails.stepExecuted",{defaultMessage:"Steps executed"}),EE=o.i18n.translate("xpack.synthetics.testDetails.totalDuration",{defaultMessage:"Total duration: "}),vE=()=>{var e,t,a,n,i,s,o;const[l,c]=r.a.useState(1),{data:u,loading:d,stepEnds:m}=Ir();Lg([{text:u?$()(null===(e=u.details)||void 0===e?void 0:e.timestamp).format("LLL"):""}]);const p=m.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===l})),f=d?1:m.length,{monitorId:g}=Object(R.useParams)(),h=Os(),b=null==u||null===(t=u.details)||void 0===t||null===(a=t.summary)||void 0===a||null===(n=a.state)||void 0===n?void 0:n.id,E=0===(null==u?void 0:u.steps.length)&&!d;return r.a.createElement(r.a.Fragment,null,r.a.createElement(sE,{journeyDetails:null==u?void 0:u.details,hasNoSteps:E}),!E&&r.a.createElement(y.EuiFlexGroup,{gutterSize:"m",wrap:!0},r.a.createElement(yE,null,r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:l,totalSteps:f}})))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(oE,{stepIndex:l,totalSteps:f,handleNextStep:()=>{c(l+1)},handlePreviousStep:()=>{c(l-1)}}))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(fE,{stepIndex:l,step:p,stateId:b}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(wr,{stepsList:null==u?void 0:u.steps,step:p,loading:d})),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(hE,{isLoading:d,steps:null!==(i=null==u?void 0:u.steps)&&void 0!==i?i:[]}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(sE,{journeyDetails:null==u?void 0:u.details,showErrorTitle:!1,showErrorLogs:!0}))),r.a.createElement(xE,null,r.a.createElement(Bf,{legendPosition:"bottom"}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Uf,{hideEnabled:!0,hideLocations:!0}))),r.a.createElement($b,{configId:g,name:null!==(s=null==u||null===(o=u.details)||void 0===o?void 0:o.journey.monitor.name)&&void 0!==s?s:"",locationId:null==h?void 0:h.id}))};var yE=G()(y.EuiFlexItem)({flexBasis:"60%",minWidth:260}),xE=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem2",componentId:"sc-8lj2qt-0"})({flexBasis:"36%",minWidth:"min-content"});const SE=(e,t,a)=>({title:o.i18n.translate("xpack.synthetics.testRunDetailsRoute.title",{defaultMessage:"Test run details | {baseTitle}",values:{baseTitle:a}}),path:c.D,component:vE,dataTestSubj:"syntheticsMonitorTestRunDetailsPage",pageHeader:{breadcrumbs:[{text:r.a.createElement(wl,{node:Vb})}],pageTitle:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.testRunDetailsRoute.page.title",defaultMessage:"Test run details"}),rightSideItems:[r.a.createElement(rE,null),r.a.createElement(nE,null),r.a.createElement(Hm,null)]}}),kE=o.i18n.translate("xpack.synthetics.settings.alertDefaultForm.requiredEmail",{defaultMessage:"To: Email is required for selected email connector"}),ME=e=>{if(!e)return;const t=e.find((e=>!e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)));return t?o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.invalidEmail",{defaultMessage:"{val} is not a valid email.",values:{val:t}}):void 0},wE=(e,t,a)=>{if(!e||0===e.length||!1===a)return{};if(!t||!t.to)return{to:kE};const n=0===t.to.length?kE:ME(t.to),r=ME(t.cc),i=ME(t.bcc);return n||r||i?{to:null!=n?n:"",cc:null!=r?r:"",bcc:null!=i?i:""}:{}};function TE({loading:e,onChange:t,value:a,isDisabled:i,selectedConnectors:s}){const{actionTypeRegistry:o}=Object(p.useKibana)().services.triggersActionsUi,l=o.get(".email").actionParamsFields,[c,u]=Object(n.useState)(!1),d=wE(s,a,c);return r.a.createElement(y.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertConnectors.defaultEmail",defaultMessage:"Default email"})),description:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors.description.defaultEmail",defaultMessage:"Email settings required for selected email alert connectors."})},r.a.createElement(l,{isLoading:e,actionParams:null!=a?a:{},errors:d,editAction:(e,n,r)=>{"message"!==e&&t({...null!=a?a:{},[e]:n})},showEmailSubjectAndMessage:!1,index:1,isDisabled:i,onBlur:()=>u(!0)}))}var OE=a(109),CE=a(123);const IE=()=>{const{data:e}=Object(f.useFetcher)((()=>Object(CE.a)()),[]),{connectors:t,connectorsLoading:a,loading:i,settings:s}=Object(u.useSelector)(OE.a),{defaultConnectors:o}=s||{},{actionTypeRegistry:l}=Object(p.useKibana)().services.triggersActionsUi,c=Object(u.useDispatch)();return Object(n.useEffect)((()=>{c(Td.a.get())}),[c]),{options:(null!=t?t:[]).filter((t=>(null!=e?e:[]).find((e=>e.id===t.actionTypeId)))).map((e=>({value:e.id,label:e.name,"data-test-subj":e.name,prepend:r.a.createElement(y.EuiIcon,{type:l.get(e.actionTypeId).iconClass,size:"s"})}))),actionTypes:e,connectors:t,connectorsLoading:a,settingsLoading:i,defaultConnectors:o}},jE={inputPlaceHolder:o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.selectConnector",{defaultMessage:"Select one or more connectors"}),emailPlaceHolder:o.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.emailConnectorPlaceHolder",{defaultMessage:"To: Email for email connector"})},_E=({focusInput:e,isDisabled:t})=>{const[a,i]=Object(n.useState)(!1),{services:{application:s,triggersActionsUi:{getAddConnectorFlyout:o}}}=Object(p.useKibana)(),l=!(null==s||!s.capabilities.actions.save),c=Object(u.useDispatch)(),d=Object(n.useMemo)((()=>o({onClose:()=>{c(Td.a.get()),i(!1),e()},featureId:"uptime"})),[c,e,o]);return r.a.createElement(r.a.Fragment,null,a?d:null,r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"createConnectorButton",onClick:()=>i(!0),size:"s",isDisabled:t||!l},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.alerts.settings.addConnector",defaultMessage:"Add connector"})))};function FE({isLoading:e,isDisabled:t,onChange:a,selectedConnectors:i}){const{options:s}=IE(),o=Object(n.useRef)(null),{focusConnectorField:l}=ke(),c=Me()[1],[u,d]=Object(n.useState)(void 0);return Object(n.useEffect)((()=>{l&&o.current&&!e&&o.current.focus()}),[l,o,e]),r.a.createElement(PE,{describedByIds:["defaultConnectors"],error:u,fullWidth:!0,label:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors",defaultMessage:"Default connectors"}),labelAppend:r.a.createElement(_E,{isDisabled:t,focusInput:Object(n.useCallback)((()=>{o.current&&o.current.focus()}),[])})},r.a.createElement(y.EuiComboBox,{inputRef:e=>{o.current=e},placeholder:jE.inputPlaceHolder,options:s,selectedOptions:s.filter((e=>null==i?void 0:i.includes(e.value))),onBlur:()=>{if(o.current){const{value:e}=o.current;d(0===e.length?void 0:`"${e}" is not a valid option`)}o.current&&!e&&l&&c({focusConnectorField:void 0})},isDisabled:t,"data-test-subj":"default-connectors-input-"+(e?"loading":"loaded"),fullWidth:!0,"aria-label":LE,isLoading:e,onChange:e=>{a(e.map((e=>e.value)))},onSearchChange:(e,t)=>{d(0===e.length||t?void 0:`"${e}" is not a valid option`)}}))}const PE=G()(y.EuiFormRow).withConfig({displayName:"RowWrapper",componentId:"sc-2ds1j6-0"})(["&&& > .euiFormRow__labelWrapper{align-items:baseline;}"]),LE=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.tagsLabel",{defaultMessage:"Tags"}),RE=()=>{var e,t;const a=Object(u.useDispatch)(),{settings:i,loading:s}=Object(u.useSelector)(OE.a),[o,l]=Object(n.useState)(c.f),d=!(null!==(e=Object(p.useKibana)().services)&&void 0!==e&&null!==(t=e.application)&&void 0!==t&&t.capabilities.uptime.configureSettings);Object(n.useEffect)((()=>{i&&l(i)}),[i]),Object(n.useEffect)((()=>{a(Td.b.get())}),[a]);const{connectors:m}=IE(),f=null==m?void 0:m.find((e=>{var t;return(null===(t=o.defaultConnectors)||void 0===t?void 0:t.includes(e.id))&&".email"===e.actionTypeId})),g=!Object(ln.isEqual)(o,i);return r.a.createElement(y.EuiForm,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiDescribedFormGroup,{title:r.a.createElement("h4",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.settings.defaultConnectors",defaultMessage:"Default Connectors"})),description:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.settings.defaultConnectors.description",defaultMessage:"Select one or more connectors to be used for alerts. These settings apply to all synthetics-based alerts."})},r.a.createElement(FE,{isDisabled:d,isLoading:s,selectedConnectors:o.defaultConnectors,onChange:e=>l({...o,defaultConnectors:e})})),f&&r.a.createElement(TE,{loading:s,isDisabled:d,value:o.defaultEmail,selectedConnectors:o.defaultConnectors,onChange:e=>l((t=>({...t,defaultEmail:e})))}),r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiFlexGroup,{justifyContent:"flexEnd"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsAlertDefaultsFormButton",iconType:"cross",onClick:()=>{l(null!=i?i:c.f)},flush:"left",isDisabled:!g,isLoading:s},DE)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsAlertDefaultsFormButton",onClick:e=>{e.preventDefault(),a(Td.d.get(o))},fill:!0,isLoading:s,isDisabled:!g||d||!(!f||Object(ln.isEmpty)(wE(null==o?void 0:o.defaultConnectors,null==o?void 0:o.defaultEmail)))},AE))))},DE=o.i18n.translate("xpack.synthetics.settings.discardChanges",{defaultMessage:"Discard changes"}),AE=o.i18n.translate("xpack.synthetics.settings.applyChanges",{defaultMessage:"Apply changes"}),NE=({apiKey:e})=>r.a.createElement("div",{className:"text-left"},r.a.createElement(y.EuiCallOut,{title:GE,iconType:"iInCircle",size:"s"}),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiText,{size:"s"},r.a.createElement("strong",null,zE)),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m",whiteSpace:"pre"},e),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiText,{size:"s"},r.a.createElement("strong",null,BE)),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m"},"export SYNTHETICS_API_KEY=",e),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiText,{size:"s"},r.a.createElement("strong",null,HE)),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m"},"SYNTHETICS_API_KEY=",e," npm run push")),zE=o.i18n.translate("xpack.synthetics.monitorManagement.apiKey.label",{defaultMessage:"API key"}),BE=o.i18n.translate("xpack.synthetics.monitorManagement.useEnv.label",{defaultMessage:"Use as environment variable"}),HE=o.i18n.translate("xpack.synthetics.monitorManagement.projectPush.label",{defaultMessage:"Project push command"}),GE=o.i18n.translate("xpack.synthetics.monitorManagement.apiKeyWarning.label",{defaultMessage:"This API key will only be shown once. Please keep a copy for your own records."});var VE=a(66);const $E=async({id:e})=>VE.a.get(c.z.GET_SYNTHETICS_MONITOR.replace("{monitorId}",e),{decrypted:!0,version:c.i},Ge.B),UE=({isDisabled:e,apiKey:t,loading:a,setLoadAPIKey:n})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiButton,{fill:!0,isDisabled:e,fullWidth:!0,isLoading:a,color:"primary",onClick:()=>{n(!0)},"data-test-subj":"uptimeMonitorManagementApiKeyGenerate"},a?WE:qE),r.a.createElement(y.EuiSpacer,{size:"s"}))),qE=o.i18n.translate("xpack.synthetics.monitorManagement.getProjectApiKey.label",{defaultMessage:"Generate Project API key"}),WE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.loading",{defaultMessage:"Generating API key"}),KE="https://www.elastic.co/guide/en/observability/current/synthetic-run-tests.html",YE=()=>{var e,t,a,i,s,l,u;const{loading:d,canManageApiKeys:m}=je(),[g,h]=Object(n.useState)(void 0),[b,E]=Object(n.useState)(!1),[v,x]=Object(n.useState)(!0),S=Object(p.useKibana)().services,k=!(null==S||null===(e=S.fleet)||void 0===e||!e.authz.integrations.writeIntegrationPolicies),M=null===(t=null===(a=Object(p.useKibana)().services)||void 0===a||null===(i=a.application)||void 0===i?void 0:i.capabilities.uptime.elasticManagedLocationsEnabled)||void 0===t||t,{data:w,loading:T,error:O}=Object(f.useFetcher)((async()=>b?(async e=>await VE.a.get(c.z.SYNTHETICS_PROJECT_APIKEY,{accessToElasticManagedLocations:e}))(v&&Boolean(M)):null),[b,M]);Object(n.useEffect)((()=>{null!=w&&w.apiKey&&h(null==w?void 0:w.apiKey.encoded),E(!1)}),[w]),Object(n.useEffect)((()=>{if(O){var e,t;const a=O;null==S||null===(e=S.notifications)||void 0===e||e.toasts.addError(O,{title:o.i18n.translate("xpack.synthetics.createApiKey.error",{defaultMessage:"Error"}),toastMessage:null==a||null===(t=a.body)||void 0===t?void 0:t.message})}}),[O,null==S||null===(s=S.notifications)||void 0===s?void 0:s.toasts]);const C=!(null===(l=Object(p.useKibana)().services)||void 0===l||null===(u=l.application)||void 0===u||!u.capabilities.uptime.save);return d?r.a.createElement(dr,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiEmptyPrompt,{style:{maxWidth:"50%"},title:r.a.createElement("h2",null,JE),body:C&&m?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,null,QE," ",k?"":`${ZE} `,r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsProjectAPIKeysLink",href:KE,external:!0,target:"_blank"},XE)),r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiSwitch,{label:o.i18n.translate("xpack.synthetics.features.elasticManagedLocations",{defaultMessage:"Elastic managed locations enabled"}),checked:v&&Boolean(M),onChange:()=>{x(!v)},disabled:!M})):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,null,ev," ",r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsProjectAPIKeysLink",href:KE,external:!0,target:"_blank"},XE))),actions:r.a.createElement(UE,{loading:T,setLoadAPIKey:E,apiKey:g,isDisabled:!C||!m})}),g&&r.a.createElement(NE,{apiKey:g}))},XE=o.i18n.translate("xpack.synthetics.monitorManagement.learnMore.label",{defaultMessage:"Learn more"}),JE=o.i18n.translate("xpack.synthetics.monitorManagement.getProjectAPIKeyLabel.generate",{defaultMessage:"Generate Project API Key"}),QE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline."}),ZE=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.disclaimer",{defaultMessage:"Please note: In order to use push monitors using private testing locations, you must generate this API key with a user who has Fleet and Integrations write permissions."}),ev=o.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyReducedPermissions.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline. To generate an API key, you must have permissions to manage API keys and Uptime write access. Please contact your administrator."}),tv=({pageIndex:e,pageSize:t,total:a,label:n})=>{const i=Math.min(e*t+1,a),s=Math.min(i+t-1,a);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.tableTitle.showing",defaultMessage:"Showing {count} of {total} {label}",values:{count:r.a.createElement("strong",null,i,"-",s),total:a,label:r.a.createElement("strong",null,n)}})),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiHorizontalRule,{margin:"none",style:{height:2}}))},av=({text:e})=>{const[t,a]=Object(n.useState)(!1);return r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",justifyContent:"flexStart"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsParamsTextButton",iconType:t?"eyeClosed":"eye","aria-label":o.i18n.translate("xpack.synthetics.settingsRoute.viewParam",{defaultMessage:"View parameter value"}),onClick:()=>a((e=>!e)),disabled:!e})),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:t?"s":"m"}," ",t?e:"".repeat(10))))};var nv=a(102),rv=a(41);function iv(e){const{register:t,trigger:a,...r}=Object(sn.useForm)(e),[i,s]=Object(n.useState)(!1);fd()((async()=>{i&&await(null==a?void 0:a())}),500,[i]);const o=Object(n.useCallback)((e=>async t=>{s(!1);const a=await e(t);return s(!0),a}),[s]);return{register:Object(n.useCallback)(((e,...a)=>{const{ref:n,onChange:r,...i}=t(e,...a);return{inputRef:n,ref:n,onChange:o(r),...i}}),[t,o]),trigger:a,...r}}const sv=({items:e,isEditingItem:t})=>{var a,n;const{register:i,control:s}=Object(sn.useFormContext)(),{errors:o}=Object(sn.useFormState)(),l=e.reduce(((e,t)=>{const a=t.tags||[];return new Set([...e,...a])}),new Set);return r.a.createElement(y.EuiForm,{component:"form",noValidate:!0},r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:ov,isInvalid:Boolean(null==o?void 0:o.key),error:null==o||null===(a=o.key)||void 0===a?void 0:a.message},r.a.createElement(y.EuiFieldText,b()({"data-test-subj":"syntheticsAddParamFormFieldText",fullWidth:!0,"aria-label":ov},i("key",{required:{value:!0,message:pv},validate:a=>e.filter((e=>!t||e.id!==t.id)).some((e=>e.key===a))?fv:void 0})))),r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:mv,isInvalid:Boolean(null==o?void 0:o.value),error:null==o||null===(n=o.value)||void 0===n?void 0:n.message},r.a.createElement(y.EuiTextArea,b()({"data-test-subj":"syntheticsAddParamFormTextArea",fullWidth:!0,"aria-label":mv},i("value",{required:{value:!0,message:gv}})))),r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:lv},r.a.createElement(sn.Controller,{control:s,name:"tags",render:({field:e})=>{var t,a;return r.a.createElement(y.EuiComboBox,b()({fullWidth:!0,"aria-label":lv,placeholder:lv,isInvalid:!(null==o||!o.tags),selectedOptions:null!==(t=null===(a=e.value)||void 0===a?void 0:a.map((e=>({label:e,value:e}))))&&void 0!==t?t:[],options:[...l].map((e=>({label:e,value:e}))),onCreateOption:t=>{var a;e.onChange([...null!==(a=e.value)&&void 0!==a?a:[],t])}},e,{onChange:t=>{e.onChange(t.map((e=>e.value)))}}))}})),r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:cv},r.a.createElement(y.EuiFieldText,b()({"data-test-subj":"syntheticsAddParamFormFieldText",fullWidth:!0,"aria-label":cv},i("description",{})))),r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:dv},r.a.createElement(sn.Controller,{name:"namespaces",render:({field:e})=>{var a,n;return r.a.createElement(y.EuiCheckbox,{id:"isShared",label:uv,"aria-label":dv,onChange:t=>{t.target.checked?e.onChange([rv.ALL_SPACES_ID]):e.onChange([])},checked:(null!==(a=e.value)&&void 0!==a?a:[]).length>0&&"*"===(null!==(n=e.value)&&void 0!==n?n:[])[0],disabled:Boolean(t)})}})))},ov=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.keyLabel",{defaultMessage:"Key"}),lv=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.tagsLabel",{defaultMessage:"Tags"}),cv=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.descriptionLabel",{defaultMessage:"Description"}),uv=o.i18n.translate("xpack.synthetics.paramForm.sharedAcrossSpacesLabel",{defaultMessage:"Share across spaces"}),dv=o.i18n.translate("xpack.synthetics.paramForm.namespaces",{defaultMessage:"Namespaces"}),mv=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.paramLabel",{defaultMessage:"Value"}),pv=o.i18n.translate("xpack.synthetics.monitorManagement.param.keyRequired",{defaultMessage:"Key is required"}),fv=o.i18n.translate("xpack.synthetics.monitorManagement.param.keyExists",{defaultMessage:"Key already exists"}),gv=o.i18n.translate("xpack.synthetics.monitorManagement.value.required",{defaultMessage:"Value is required"}),hv=({items:e,isEditingItem:t,setIsEditingItem:a})=>{var i;const[s,o]=Object(n.useState)(!1),{id:l,...c}=null!=t?t:{},d=iv({mode:"onSubmit",reValidateMode:"onChange",shouldFocusError:!0,defaultValues:null!=c?c:{key:"",tags:[],description:"",value:""}}),m=Object(n.useCallback)((()=>{o(!1),a(null),d.reset({key:"",tags:[],description:"",value:""})}),[a]),{application:f}=Object(p.useKibana)().services,g=null!==(i=null==f?void 0:f.capabilities.uptime.save)&&void 0!==i&&i,h=Object(u.useDispatch)(),{isSaving:b,savedData:E}=Object(u.useSelector)(nv.i);Object(n.useEffect)((()=>{E&&!b&&(m(),h(nv.f.get()),h(wd.e.get()))}),[E,b,m,h]),Object(n.useEffect)((()=>{if(t){const{id:e,...a}=t;o(!0),d.reset(a)}}),[t]);const{handleSubmit:v}=d;let x;return s&&(x=r.a.createElement(sn.FormProvider,d,r.a.createElement(y.EuiFlyout,{ownFocus:!0,onClose:m,size:"m",style:{minWidth:500}},r.a.createElement(y.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h2",null,t?vv:Ev))),r.a.createElement(y.EuiFlyoutBody,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(sv,{items:e,isEditingItem:t})),r.a.createElement(y.EuiFlyoutFooter,null,r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsAddParamFlyoutButton",iconType:"cross",onClick:m,flush:"left"},bv)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsAddParamFlyoutButton",onClick:v((e=>{const{namespaces:a,...n}=e,r=null==a?void 0:a.includes(rv.ALL_SPACES_ID);h(t&&l?nv.d.get({id:l,paramRequest:{...n,share_across_spaces:r}}):nv.b.get({...n,share_across_spaces:r}))})),fill:!0,isLoading:b},yv))))))),r.a.createElement("div",null,r.a.createElement(ia,{canEditSynthetics:g},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsAddParamFlyoutButton",fill:!0,iconType:"plusInCircleFilled",iconSide:"left",onClick:()=>o(!0),isDisabled:!g},Ev)),x)},bv=o.i18n.translate("xpack.synthetics.settingsRoute.cancel",{defaultMessage:"Close"}),Ev=o.i18n.translate("xpack.synthetics.settingsRoute.createParam",{defaultMessage:"Create Parameter"}),vv=o.i18n.translate("xpack.synthetics.settingsRoute.params.editLabel",{defaultMessage:"Edit Parameter"}),yv=o.i18n.translate("xpack.synthetics.settingsRoute.save",{defaultMessage:"Save"}),xv=({items:e,setIsDeleteModalVisible:t})=>{const[a,i]=Object(n.useState)(!1),s=Object(u.useDispatch)(),{status:l}=Object(f.useFetcher)((()=>{if(a)return Object(nv.c)(e.map((({id:e})=>e)))}),[e,a]),c=e.map((({key:e})=>e)).join(", ").slice(0,50);return Object(n.useEffect)((()=>{if(!a)return;const{core:e,toasts:n}=N.a;l===f.FETCH_STATUS.FAILURE?n.addDanger({title:Object(kr.a)(r.a.createElement("p",{"data-test-subj":"uptimeDeleteParamFailure"}," ",o.i18n.translate("xpack.synthetics.paramManagement.paramDeleteFailuresMessage.name",{defaultMessage:"Param {name} failed to delete.",values:{name:c}})),e)},{toastLifeTimeMs:3e3}):l===f.FETCH_STATUS.SUCCESS&&(n.addSuccess({title:Object(kr.a)(r.a.createElement("p",{"data-test-subj":"uptimeDeleteParamSuccess"},o.i18n.translate("xpack.synthetics.paramManagement.paramDeleteSuccessMessage.name",{defaultMessage:"Param {name} deleted successfully.",values:{name:c}})),e)},{toastLifeTimeMs:3e3}),s(wd.e.get())),l!==f.FETCH_STATUS.SUCCESS&&l!==f.FETCH_STATUS.FAILURE||(i(!1),t(!1),s(nv.f.get()),s(wd.e.get()))}),[i,a,l,t,c,s]),r.a.createElement(y.EuiConfirmModal,{title:o.i18n.translate("xpack.synthetics.paramManagement.deleteParamNameLabel",{defaultMessage:'Delete "{name}" param?',values:{name:c}}),onCancel:()=>t(!1),onConfirm:()=>{i(!0)},cancelButtonText:ya,confirmButtonText:va,buttonColor:"danger",defaultFocusedButton:"confirm",isLoading:a})},Sv=()=>{var e;const[t,a]=Object(n.useState)(0),[i,s]=Object(n.useState)(10),{items:l,isLoading:c}=(()=>{const{isLoading:e,listOfParams:t}=Object(u.useSelector)(nv.i),a=Object(u.useDispatch)();return Object(n.useEffect)((()=>{a(nv.f.get())}),[a]),Object(n.useMemo)((()=>({items:null!=t?t:[],isLoading:e})),[t,e])})(),[d,m]=Object(n.useState)(null),[f,g]=Object(n.useState)([]),[h,b]=Object(n.useState)(!1),[E,v]=Object(n.useState)([]),{application:x}=Object(p.useKibana)().services,S=null!==(e=null==x?void 0:x.capabilities.uptime.save)&&void 0!==e&&e,k=[{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.key",{defaultMessage:"Key"}),sortable:!0,field:"key"},{align:"left",width:"20%",name:o.i18n.translate("xpack.synthetics.settingsRoute.params.value",{defaultMessage:"Value"}),render:e=>{var t;return r.a.createElement(av,{text:null!==(t=e.value)&&void 0!==t?t:""})}},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.description",{defaultMessage:"Description"}),field:"description",sortable:!0,render:e=>r.a.createElement(y.EuiText,{size:"s"},null!=e?e:"--")},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.tags",{defaultMessage:"Tags"}),field:"tags",sortable:!0,render:e=>{const t=null!=e?e:[];return 0===t.length?r.a.createElement(y.EuiText,null,"--"):r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs",wrap:!0},t.map((e=>r.a.createElement(y.EuiFlexItem,{grow:!1,key:e},r.a.createElement(y.EuiBadge,null,e)))))}},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.namespaces",{defaultMessage:"Namespaces"}),field:"namespaces",sortable:!0,render:e=>{const t=null!=e?e:[];return 0===t.length?r.a.createElement(y.EuiText,null,"--"):r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs",wrap:!0},t.map((e=>r.a.createElement(y.EuiFlexItem,{grow:!1,key:e},r.a.createElement(y.EuiBadge,null,"*"===e?"ALL":e)))))}},{name:o.i18n.translate("xpack.synthetics.settingsRoute.params.actions",{defaultMessage:"Actions"}),actions:[{name:Cv,description:Cv,icon:"trash",color:"danger",type:"icon",onClick:e=>{v([e]),b(!0)},"data-test-subj":"action-delete",enabled:()=>S},{name:Tv,description:Tv,icon:"pencil",type:"icon",onClick:e=>{m(e)},"data-test-subj":"action-edit",enabled:()=>S}]}],M=l.reduce(((e,t)=>{const a=t.tags||[];return new Set([...e,...a])}),new Set),[w,T]=Object(n.useState)(""),[O,C]=Object(n.useState)("");Object(U.useDebounce)((()=>{C(w)}),200,[w]);const[I,j]=Object(n.useState)(l);return Object(n.useEffect)((()=>{if(O){const e=y.EuiSearchBar.Query.execute(O,l,{defaultFields:["key","description","tags"]});j(e)}else j(l)}),[O,l]),r.a.createElement("div",null,r.a.createElement(y.EuiText,null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.params.description",defaultMessage:"Define variables and parameters that you can use in the configuration of browser and lightweight monitors, such as credentials or URLs. {learnMore}",values:{learnMore:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsParamsListLink",href:"https://www.elastic.co/guide/en/observability/master/synthetics-params-secrets.html",target:"_blank"},wv)}})),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiInMemoryTable,{itemId:"id",loading:c,tableCaption:kv,items:I,columns:k,tableLayout:"auto",pagination:!0,sorting:{sort:{field:"key",direction:"asc"}},childrenBetween:r.a.createElement(tv,{pageIndex:t,pageSize:i,total:I.length,label:Mv}),onTableChange:({page:e})=>{var t,n;a(null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0),s(null!==(n=null==e?void 0:e.size)&&void 0!==n?n:10)},selection:{selectable:()=>S,onSelectionChange:e=>{g(e)},initialSelected:f},search:{onChange:({query:e})=>{var t;return T(null!==(t=null==e?void 0:e.text)&&void 0!==t?t:"")},toolsLeft:(()=>{if(0!==f.length)return r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsRenderToolsLeftParamsButton",color:"danger",onClick:()=>{v(f),b(!0)}},o.i18n.translate("xpack.synthetics.settingsRoute.params.deleteCount",{defaultMessage:"Delete {count} params",values:{count:f.length}}))})(),toolsRight:[r.a.createElement(hv,{isEditingItem:d,setIsEditingItem:m,items:l})],box:{incremental:!0},filters:[{type:"field_value_selection",field:"tags",name:"Tags",multiSelect:!0,options:[...M].map((e=>({value:e,name:e,view:e})))}]},message:c?Ov:void 0}),h&&E&&r.a.createElement(xv,{items:E,setIsDeleteModalVisible:b}))},kv=o.i18n.translate("xpack.synthetics.settingsRoute.params.tableCaption",{defaultMessage:"Synthetics Global Parameters"}),Mv=o.i18n.translate("xpack.synthetics.settingsRoute.params.label",{defaultMessage:"Parameters"}),wv=o.i18n.translate("xpack.synthetics.settingsRoute.params.learnMore",{defaultMessage:"Learn more."}),Tv=o.i18n.translate("xpack.synthetics.settingsRoute.params.editLabel",{defaultMessage:"Edit Parameter"}),Ov=o.i18n.translate("xpack.synthetics.settingsRoute.params.loading",{defaultMessage:"Loading..."}),Cv=o.i18n.translate("xpack.synthetics.settingsRoute.params.addLabel",{defaultMessage:"Delete Parameter"}),Iv=async()=>VE.a.get("/api/index_management/data_streams",{includeStats:!0},void 0,void 0,{"X-Elastic-Internal-Origin":"Kibana"}),jv=e=>{if(!e)return"--";const[t]=e.split("d");return o.i18n.translate("xpack.synthetics.settingsRoute.table.retentionPeriodValue",{defaultMessage:"{value} {value, plural, one {day} other {days}} + rollover",values:{value:t}})},_v=[{name:"synthetics",label:o.i18n.translate("xpack.synthetics.settingsRoute.allChecks",{defaultMessage:"All Checks"}),indexTemplate:"synthetics"},{name:"synthetics-synthetics.browser-default_policy",label:o.i18n.translate("xpack.synthetics.settingsRoute.browserChecks",{defaultMessage:"Browser Checks"}),indexTemplate:"synthetics-browser"},{name:"synthetics-synthetics.browser_network-default_policy",label:o.i18n.translate("xpack.synthetics.settingsRoute.browserNetworkRequests",{defaultMessage:"Browser Network Requests"}),indexTemplate:"synthetics-browser.network"},{name:"synthetics-synthetics.browser_screenshot-default_policy",label:"Browser Screenshots",indexTemplate:"synthetics-browser.screenshot"},{name:"synthetics-synthetics.http-default_policy",label:"HTTP Pings",indexTemplate:"synthetics-http"},{name:"synthetics-synthetics.icmp-default_policy",label:"ICMP Pings",indexTemplate:"synthetics-icmp"},{name:"synthetics-synthetics.tcp-default_policy",label:"TCP Pings",indexTemplate:"synthetics-tcp"}];function Fv({label:e,indexTemplate:t}){return{isEmpty:!0,name:e,indices:[],indexTemplateName:t,storageSize:Vr(0),storageSizeBytes:0,lifecycle:{enabled:!1,data_retention:"synthetics"===t?"--":""},timeStampField:{name:"@timestamp"},generation:0,health:"green",privileges:{delete_index:!0,manage_data_stream_lifecycle:!0},hidden:!1,nextGenerationManagedBy:"Data stream lifecycle"}}function Pv({name:e,lifecycle:t,indexTemplateName:a,storageSizeBytes:n,...r}){var i;const s=_v.find((({indexTemplate:e})=>e===a));return{...r,name:null!==(i=null==s?void 0:s.label)&&void 0!==i?i:e,dataStreamName:e,indexTemplateName:a,storageSize:void 0!==n?Vr(n):"",storageSizeBytes:n,lifecycle:{...t,data_retention:void 0!==(null==t?void 0:t.data_retention)?jv(String(null==t?void 0:t.data_retention)):""}}}const Lv=({hideIlmMessage:e=!1})=>{const{services:{docLinks:t}}=Object(p.useKibana)();return r.a.createElement(y.EuiEmptyPrompt,{"data-test-subj":"syntheticsUnprivileged",color:"plain",icon:r.a.createElement(y.EuiIcon,{type:"logoObservability",size:"xl"}),title:r.a.createElement("h2",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.dataRetention.unprivileged.unprivilegedTitle",defaultMessage:"Missing privileges"})),body:r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.params.unprivileged.unprivilegedDescription",defaultMessage:"You need additional privileges to view Synthetics app data usage and retention settings. {docsLink}",values:{docsLink:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsUnprivilegedLearnMoreLink",href:null==t?void 0:t.links.synthetics.featureRoles,target:"_blank"},o.i18n.translate("xpack.synthetics.monitorManagement.projectDelete.docsLink",{defaultMessage:"Learn more"}))}})),footer:r.a.createElement(Av,{children:`\n- ${Rv} ${e?"":` \n- ${Dv}`}`})})},Rv=o.i18n.translate("xpack.synthetics.dataRetention.unprivileged.index",{defaultMessage:"`read`, `monitor` on the following Elasticsearch indices: `synthetics-*`"}),Dv=o.i18n.translate("xpack.synthetics.dataRetention.unprivileged.cluster",{defaultMessage:"`read_ilm`, `monitor` to view and `manage_ilm` to manage ILM policies on the Elasticsearch cluster."});var Av=G()(y.EuiMarkdownFormat).withConfig({displayName:"_StyledEuiMarkdownFormat",componentId:"sc-gfa8rz-0"})(["text-align:initial;"]);function Nv(e){var t,a;const[r,i]=Object(n.useState)(null),{basePath:s}=at(),{share:o,application:l}=Object(p.useKibana)().services,c=!(null===(t=l.capabilities.management)||void 0===t||null===(a=t.data)||void 0===a||!a.index_management);return Object(n.useEffect)((()=>{if(!c)return;const t=o.url.locators.get("MANAGEMENT_APP_LOCATOR");null==t||t.getLocation({sectionId:"data",appId:"index_management"}).then((({app:t,path:a})=>i(`${s}/app/${t}${a}${e}`)))}),[o.url.locators,s,i,c,e]),r}const zv=()=>{var e;const{dataStreamStatuses:t=[],loading:a,error:i}=function(){const{lastRefresh:e}=Object(n.useContext)(K),{data:t,error:a,loading:r}=Object(f.useFetcher)(Iv,[e]);if(!Array.isArray(t)||a)return{dataStreamStatuses:void 0,error:a,loading:r};const i=Object(ln.keyBy)(t,"indexTemplateName"),s=[];let o=0,l=null;for(const{indexTemplate:e,label:t}of _v){const a=i[e];if(a){var c;s.push(Pv(a)),o+=null!==(c=a.storageSizeBytes)&&void 0!==c?c:0}else{const a=Fv({indexTemplate:e,label:t});s.push(a),"synthetics"===e&&(l=a)}}return null!==l&&(l.storageSize=Vr(o)),s.sort((({indexTemplateName:e},{indexTemplateName:t})=>e.localeCompare(t))),{dataStreamStatuses:s,error:a,loading:r}}();return i&&403===(null===(e=i.body)||void 0===e?void 0:e.statusCode)?r.a.createElement(Lv,{hideIlmMessage:!0}):!1===a&&0===t.length?r.a.createElement(Vv,{error:null==i?void 0:i.message}):r.a.createElement(y.EuiBasicTable,{items:t,loading:!0===a,columns:Bv,tableLayout:"auto"})},Bv=[{field:"name",name:o.i18n.translate("xpack.synthetics.dslRetention.columns.name",{defaultMessage:"Dataset"}),render:(e,{dataStreamName:t})=>t?r.a.createElement(Hv,{dataStream:t,name:e}):e},{field:"storageSize",name:o.i18n.translate("xpack.synthetics.dslRetention.columns.currentSize",{defaultMessage:"Current size"})},{field:"lifecycle.data_retention",name:o.i18n.translate("xpack.synthetics.dslRetention.columns.retentionPeriod",{defaultMessage:"Retention period"})},{field:"indexTemplateName",name:o.i18n.translate("xpack.synthetics.dslRetention.columns.indexTemplateName",{defaultMessage:"Index template"}),render:e=>r.a.createElement(Gv,{indexTemplateName:e})}];function Hv({dataStream:e,name:t}){const a=Nv(`/data_streams/${e}`);return null===a?r.a.createElement(r.a.Fragment,null,t):r.a.createElement(y.EuiLink,{href:a,target:"_blank","data-test-subj":`xpack.synthetics.dslRetention.indexTemplateLink.${t}`},t)}function Gv({indexTemplateName:e}){const t=Nv(`/templates/${e}`);return null===t?r.a.createElement(r.a.Fragment,null,e):r.a.createElement(y.EuiLink,{href:t,target:"_blank","data-test-subj":`xpack.synthetics.dslRetention.indexTemplateLink.${e}`},e)}const Vv=({error:e})=>r.a.createElement(y.EuiEmptyPrompt,{iconType:"error",body:null!=e?e:r.a.createElement(z.FormattedMessage,{tagName:"p",id:"xpack.synthetics.dslRetention.emptyErrorPrompt",defaultMessage:"No further error information available"}),color:"danger",title:r.a.createElement(z.FormattedMessage,{tagName:"h2",id:"xpack.synthetics.dslRetention.noData.heading",defaultMessage:"No data retention information found"})});var $v=a(53);const Uv=({name:e})=>{var t,a;const{share:n,application:i}=Object(p.useKibana)().services,s=null===(t=i.capabilities.management)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.index_lifecycle_management,l=n.url.locators.get($v.ILM_LOCATOR_ID),{basePath:c}=at(),{data:u}=Object(f.useFetcher)((async()=>null==l?void 0:l.getLocation({page:"policy_edit",policyName:e})),[e]);return u?e?s?r.a.createElement(y.EuiLink,{href:`${c}/app/${u.app}${u.path}`,target:"_blank","data-test-subj":e+"PolicyLink"},e):r.a.createElement(y.EuiToolTip,{content:Kv},r.a.createElement(y.EuiText,{size:"m"},e)):r.a.createElement(r.a.Fragment,null,o.i18n.translate("xpack.synthetics.policyLink.Label",{defaultMessage:"--"})):r.a.createElement(y.EuiSkeletonText,{lines:1})},qv=()=>{var e,t;const{application:a}=Object(p.useKibana)().services;return(null===(e=a.capabilities.management)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.index_lifecycle_management)?r.a.createElement(r.a.Fragment,null,Wv):r.a.createElement(r.a.Fragment,null,Wv," ",r.a.createElement(y.EuiIconTip,{content:Kv,position:"right"}))},Wv=o.i18n.translate("xpack.synthetics.settingsRoute.table.policy",{defaultMessage:"Policy"}),Kv=o.i18n.translate("xpack.synthetics.settingsRoute.policy.manageILM",{defaultMessage:'You need the "manage_ilm" cluster permission to manage ILM policies.'}),Yv=()=>{var e;const{data:t,loading:a,error:n}=(()=>{var e;const{data:t,error:a,loading:n}=Object(f.useFetcher)((async()=>(async()=>await VE.a.get("/api/index_lifecycle_management/policies"))()),[]),{data:r,loading:i}=Object(f.useFetcher)((async()=>(async()=>await VE.a.get(c.z.INDEX_SIZE))()),[]),s=null!==(e=null==t?void 0:t.filter((({indexTemplates:e})=>null==e?void 0:e.some((e=>e.includes("synthetics"))))))&&void 0!==e?e:[];return{data:_v.map((({name:e,label:t,indexTemplate:a})=>{var n,i,o;const l=s.find((e=>{var t;return null===(t=e.indexTemplates)||void 0===t?void 0:t.some((e=>e.includes(a)))})),c=null==r||null===(n=r.data)||void 0===n?void 0:n.filter((e=>{var t;return null==l||null===(t=l.indices)||void 0===t?void 0:t.includes(e.index)}));let u=null!==(i=null==c?void 0:c.reduce(((e,t)=>{var a;return null!==(a=e+Number(null==t?void 0:t["store.size"]))&&void 0!==a?a:0}),0))&&void 0!==i?i:0;const d=(null!==(o=null==l?void 0:l.policy.phases)&&void 0!==o?o:{}).delete;var m,p;return"synthetics"===e&&(u=null!==(m=null==r||null===(p=r.data)||void 0===p?void 0:p.reduce(((e,t)=>{var a;return null!==(a=e+Number(null==t?void 0:t["store.size"]))&&void 0!==a?a:0}),0))&&void 0!==m?m:0),{name:e,label:t,policy:l,retentionPeriod:jv(null==d?void 0:d.min_age),currentSize:Vr(u)}})),error:a,loading:n||i}})();if(n&&403===(null===(e=n.body)||void 0===e?void 0:e.statusCode))return r.a.createElement(Lv,null);const i=[{field:"label",name:o.i18n.translate("xpack.synthetics.settingsRoute.table.dataset",{defaultMessage:"Dataset"})},{field:"currentSize",name:o.i18n.translate("xpack.synthetics.settingsRoute.table.currentSize",{defaultMessage:"Current size"})},{field:"retentionPeriod",name:o.i18n.translate("xpack.synthetics.settingsRoute.table.retentionPeriod",{defaultMessage:"Retention period"})},{field:"policy.name",name:r.a.createElement(qv,null),render:(e,t)=>r.a.createElement(Uv,{name:e})}];return r.a.createElement("div",null,r.a.createElement(y.EuiCallOut,{title:Xv,iconType:"iInCircle"},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.settingsRoute.retentionCalloutDescription",defaultMessage:"To change your data retention settings, we recommend creating your own index lifecycle policy and attaching it to the relevant custom Component Template in {stackManagement}. For more information, {docsLink}.",values:{stackManagement:r.a.createElement("strong",null,Jv),docsLink:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsDataRetentionTabLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-manage-retention.html"},Qv)}}))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiBasicTable,{loading:a,tableCaption:Zv,items:t,columns:i,tableLayout:"auto"}))},Xv=o.i18n.translate("xpack.synthetics.settingsRoute.retentionCalloutTitle",{defaultMessage:"Synthetics data is configured by managed index lifecycle policies"}),Jv=o.i18n.translate("xpack.synthetics.stackManagement",{defaultMessage:"Stack Management"}),Qv=o.i18n.translate("xpack.synthetics.settingsRoute.readDocs",{defaultMessage:"read our documentation"}),Zv=o.i18n.translate("xpack.synthetics.settingsRoute.tableCaption",{defaultMessage:"Synthetics data retention policies"}),ey=()=>{const{isServerless:e}=Object(n.useContext)(et);return e?r.a.createElement(zv,null):r.a.createElement(Yv,null)},ty=o.i18n.translate("xpack.synthetics.settings.title",{defaultMessage:"Settings"}),ay=({text:e})=>r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,null,e)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiCopy,{textToCopy:e},(e=>r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsCopyNameButton",color:"text",iconType:"copy",onClick:e,"aria-label":o.i18n.translate("xpack.synthetics.copyName.copyNameButtonIconLabel",{defaultMessage:"Copy name"})}))))),ny=({count:e,locationName:t})=>{const[a,i]=Object(n.useState)(!1),s=r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsViewLocationMonitorsButton",onClick:()=>i((e=>!e))},e),o=Object(R.useHistory)(),{formattedLocationName:l,href:c,viewMonitorsMessage:u}=Object(n.useMemo)((()=>({formattedLocationName:r.a.createElement("strong",null,t),href:e>0?o.createHref({pathname:"/monitors",search:`?locations=${JSON.stringify([t])}`}):o.createHref({pathname:"/add-monitor"}),viewMonitorsMessage:e>0?iy:sy})),[e,o,t]);return r.a.createElement(y.EuiPopover,{button:s,isOpen:a,closePopover:()=>i(!1)},e>0?r.a.createElement(oy,{count:e,name:l}):r.a.createElement(ly,{name:l}),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(ry,{href:c},u))},ry=({href:e,children:t})=>r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsViewLocationMonitorsButton",href:e},t),iy=o.i18n.translate("xpack.synthetics.monitorManagement.viewLocationMonitors",{defaultMessage:"View monitors"}),sy=o.i18n.translate("xpack.synthetics.monitorManagement.createLocationMonitors",{defaultMessage:"Create monitor"}),oy=({count:e,name:t})=>r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.viewMonitors",defaultMessage:"{name} is used in {count, number} {count, plural,one {monitor} other {monitors}}.",values:{count:e,name:t}}),ly=({name:e})=>r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.viewZeroMonitors",defaultMessage:"{name} isn't used in any monitors yet.",values:{name:e}});function cy({tagsList:e,control:t,errors:a}){return r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:uy},r.a.createElement(sn.Controller,{name:"tags",control:t,render:({field:t})=>{var n,i;return r.a.createElement(y.EuiComboBox,b()({fullWidth:!0,"aria-label":uy,placeholder:uy,isInvalid:!(null==a||!a.tags),selectedOptions:null!==(n=null===(i=t.value)||void 0===i?void 0:i.map((e=>({label:e,value:e}))))&&void 0!==n?n:[],options:e.map((e=>({label:e,value:e}))),onCreateOption:e=>{var a;t.onChange([...null!==(a=t.value)&&void 0!==a?a:[],e])}},t,{onChange:e=>{t.onChange(e.map((e=>e.value)))}}))}}))}const uy=o.i18n.translate("xpack.synthetics.monitorManagement.paramForm.tagsLabel",{defaultMessage:"Tags"});var dy=a(72);const my=({inFlyout:e=!0,setIsAddingNew:t,redirectToSettings:a})=>{const n=Object(u.useDispatch)(),i=Object(R.useHistory)(),{canSave:s}=at();return r.a.createElement(y.EuiEmptyPrompt,{hasBorder:!0,title:r.a.createElement("h2",null,gy),titleSize:"s",body:r.a.createElement(y.EuiText,{size:"s"},e?"":fy," ",hy),actions:r.a.createElement(ia,{canEditSynthetics:s},a?r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsEmptyLocationsButton",iconType:"plusInCircle",color:"primary",fill:!0,isDisabled:!s,href:i.createHref({pathname:c.w})},by):r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsEmptyLocationsButton",iconType:"plusInCircle",isDisabled:!s,color:"primary",fill:!0,onClick:()=>{null==t||t(!0),n(Object(dy.k)(!0)),n(Object(dy.j)(!0))}},by)),footer:r.a.createElement(y.EuiText,{size:"s"},vy," ",r.a.createElement(py,null))})},py=({label:e})=>r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsPrivateLocationDocsLinkLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-private-location.html",target:"_blank"},null!=e?e:Ey),fy=o.i18n.translate("xpack.synthetics.monitorManagement.firstLocationMonitor",{defaultMessage:"In order to create a monitor, you will need to add a location first."}),gy=o.i18n.translate("xpack.synthetics.monitorManagement.createFirstLocation",{defaultMessage:"Create your first private location"}),hy=o.i18n.translate("xpack.synthetics.monitorManagement.startAddingLocationsDescription",{defaultMessage:"Private locations allow you to run monitors from your own premises. They require an Elastic agent and Agent policy which you can control and maintain via Fleet."}),by=o.i18n.translate("xpack.synthetics.monitorManagement.createLocation",{defaultMessage:"Create location"}),Ey=o.i18n.translate("xpack.synthetics.monitorManagement.readDocs",{defaultMessage:"read the docs"}),vy=o.i18n.translate("xpack.synthetics.monitorManagement.learnMore",{defaultMessage:"For more information,"}),yy=({loading:e,id:t,label:a,locationMonitors:i,onDelete:s})=>{var l,c;const u=null!==(l=null==i||null===(c=i.find((e=>e.id===t)))||void 0===c?void 0:c.count)&&void 0!==l?l:0,d=0===u,{canSave:m}=at(),[p,f]=Object(n.useState)(!1),g=o.i18n.translate("xpack.synthetics.monitorManagement.cannotDelete.description",{defaultMessage:"You can't delete this location because it is used in {monCount, number} {monCount, plural,one {monitor} other {monitors}}.\n                Remove all monitors from this location first.",values:{monCount:u}}),h=r.a.createElement(y.EuiConfirmModal,{title:o.i18n.translate("xpack.synthetics.monitorManagement.deleteLocationName",{defaultMessage:'Delete "{location}"',values:{location:a}}),onCancel:()=>f(!1),onConfirm:()=>s(t),cancelButtonText:ky,confirmButtonText:Sy,buttonColor:"danger",defaultFocusedButton:"confirm",isLoading:e},r.a.createElement("p",null,My));return r.a.createElement(r.a.Fragment,null,p&&h,r.a.createElement(y.EuiToolTip,{content:d?xy:g},r.a.createElement(y.EuiButtonIcon,{"data-test-subj":`deleteLocation-${t}`,isLoading:e,iconType:"trash",color:"danger","aria-label":xy,onClick:()=>{f(!0)},isDisabled:!d||!m})))},xy=o.i18n.translate("xpack.synthetics.monitorManagement.deleteLocation",{defaultMessage:"Delete location"}),Sy=o.i18n.translate("xpack.synthetics.monitorManagement.deleteLocationLabel",{defaultMessage:"Delete location"}),ky=o.i18n.translate("xpack.synthetics.monitorManagement.cancelLabel",{defaultMessage:"Cancel"}),My=o.i18n.translate("xpack.synthetics.monitorManagement.areYouSure",{defaultMessage:"Are you sure you want to delete this location?"}),wy=({agentPolicyId:e})=>{const{canReadAgentPolicies:t}=qe(),{basePath:a}=at(),{data:n,loading:i}=Object(u.useSelector)(dy.g),s=null==n?void 0:n.find((t=>t.id===e));return i?r.a.createElement(y.EuiLoadingSpinner,{size:"s"}):r.a.createElement(y.EuiText,{size:"s"},t?r.a.createElement(y.EuiTextColor,{color:"subdued"},s?r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsPolicyNameLink",href:`${a}/app/fleet/policies/${e}`},null==s?void 0:s.name):r.a.createElement(y.EuiText,{color:"danger",size:"s",className:"eui-displayInline"},Ty)):e,t&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement(y.EuiBadge,{color:0===(null==s?void 0:s.agents)?"warning":"hollow"},Oy,null==s?void 0:s.agents)))},Ty=o.i18n.translate("xpack.synthetics.monitorManagement.deletedPolicy",{defaultMessage:"Policy is deleted"}),Oy=o.i18n.translate("xpack.synthetics.monitorManagement.agents",{defaultMessage:"Agents: "}),Cy=()=>{const{basePath:e,canSave:t}=at(),{canCreateAgentPolicies:a}=qe();return r.a.createElement(r.a.Fragment,null,!a&&r.a.createElement(ra,null),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiEmptyPrompt,{hasBorder:!0,title:r.a.createElement("h2",null,jy),body:r.a.createElement("p",null,_y),actions:r.a.createElement(ia,{canEditSynthetics:t},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsAgentPolicyNeededButton",fill:!0,href:`${e}/app/fleet/policies?create`,color:"primary",isDisabled:!t||!a},Iy)),footer:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiTitle,{size:"xxs"},r.a.createElement("h3",null,vy)),r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsAgentPolicyNeededLink",target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations"},Ey))}))},Iy=o.i18n.translate("xpack.synthetics.monitorManagement.createAgentPolicy",{defaultMessage:"Create agent policy"}),jy=o.i18n.translate("xpack.synthetics.monitorManagement.agentPolicyNeeded",{defaultMessage:"No agent policies found"}),_y=o.i18n.translate("xpack.synthetics.monitorManagement.addAgentPolicyDesc",{defaultMessage:"Private locations require an Agent policy. In order to add a private location, first you must create an Agent policy in Fleet."}),Fy="agentPolicyId",Py=({privateLocations:e})=>{const{data:t}=Object(u.useSelector)(dy.g),{control:a,formState:{isSubmitted:n},trigger:i}=Object(sn.useFormContext)(),{isTouched:s,error:l}=a.getFieldState(Fy),c=(n||s)&&!!l,d=null==t?void 0:t.map((t=>{const a=e.find((e=>e.agentPolicyId===t.id));return{disabled:Boolean(a),value:t.id,inputDisplay:r.a.createElement(y.EuiHealth,{color:"active"===t.status?"success":"warning",style:{lineHeight:"inherit"}},t.name),"data-test-subj":t.name,dropdownDisplay:r.a.createElement(y.EuiToolTip,{content:null!=a&&a.label?o.i18n.translate("xpack.synthetics.monitorManagement.anotherPrivateLocation",{defaultMessage:"This agent policy is already attached to location: {locationName}.",values:{locationName:null==a?void 0:a.label}}):void 0},r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiHealth,{color:"active"===t.status?"success":"warning",style:{lineHeight:"inherit"}},r.a.createElement("strong",null,t.name)),r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,{size:"s",color:"subdued",className:"eui-textNoWrap"},r.a.createElement("p",null,Ly," ",t.agents))),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,{size:"s",color:"subdued"},r.a.createElement("p",null,t.description))))))}}));return r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:Ay,helpText:c?Dy:void 0,isInvalid:c,error:c?Ry:void 0},r.a.createElement(sn.Controller,{name:Fy,control:a,rules:{required:!0},render:({field:e})=>r.a.createElement(Ny,b()({fullWidth:!0,"aria-label":Ry,placeholder:Ry,valueOfSelected:e.value,itemLayoutAlign:"top",popoverProps:{repositionOnScroll:!0},hasDividers:!0,isInvalid:c,options:null!=d?d:[]},e,{onBlur:async()=>{await i()}}))}))},Ly=o.i18n.translate("xpack.synthetics.monitorManagement.agentsLabel",{defaultMessage:"Agents: "}),Ry=o.i18n.translate("xpack.synthetics.monitorManagement.selectPolicyHost",{defaultMessage:"Select agent policy"}),Dy=o.i18n.translate("xpack.synthetics.monitorManagement.selectPolicyHost.helpText",{defaultMessage:"We recommend using a single Elastic agent per agent policy."}),Ay=o.i18n.translate("xpack.synthetics.monitorManagement.policyHost",{defaultMessage:"Agent policy"}),Ny=r.a.forwardRef(((e,t)=>r.a.createElement("span",{ref:t,tabIndex:-1},r.a.createElement(y.EuiSuperSelect,b()({"data-test-subj":"syntheticsAgentPolicySelect"},e))))),zy=({privateLocations:e})=>{var t;const{data:a}=Object(u.useSelector)(dy.g),{control:n,register:i,getValues:s}=Object(sn.useFormContext)(),{errors:o}=Object(sn.useFormState)(),l=s(Fy),c=null==a?void 0:a.find((e=>e.id===l)),d=e.reduce(((e,t)=>[...e,...t.tags||[]]),[]);return r.a.createElement(r.a.Fragment,null,0===(null==a?void 0:a.length)&&r.a.createElement(Cy,null),r.a.createElement(y.EuiForm,{component:"form",noValidate:!0},r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:Vy,isInvalid:Boolean(null==o?void 0:o.label),error:null==o||null===(t=o.label)||void 0===t?void 0:t.message},r.a.createElement(By,b()({"data-test-subj":"syntheticsLocationFormFieldText",fullWidth:!0,"aria-label":Vy},i("label",{required:{value:!0,message:Uy},validate:t=>e.some((e=>e.label===t))?$y:void 0})))),r.a.createElement(y.EuiSpacer,null),r.a.createElement(Py,{privateLocations:e}),r.a.createElement(y.EuiSpacer,null),r.a.createElement(cy,{tagsList:d,control:n,errors:o}),r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiCallOut,{title:Hy,size:"s",style:{textAlign:"left"}},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.content",defaultMessage:'To run "Browser" monitors on this private location, make sure that you\'re using the {code} Docker container, which contains the dependencies necessary to run these monitors. For more information, {link}.',values:{code:r.a.createElement(y.EuiCode,null,"elastic-agent-complete"),link:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsLocationFormReadTheDocsLink",target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations",external:!0},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.link",defaultMessage:"read the docs"}))}}))),r.a.createElement(y.EuiSpacer,null),0===(null==c?void 0:c.agents)&&r.a.createElement(y.EuiCallOut,{title:Gy,size:"s",style:{textAlign:"left"},color:"warning"},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentMissingCallout.content",defaultMessage:"You have selected an agent policy that has no agent attached. Make sure that you have at least one agent enrolled in this policy. You can add an agent before or after creating a location. For more information, {link}.",values:{link:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsLocationFormReadTheDocsLink",target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/synthetics-private-location.html#synthetics-private-location-fleet-agent",external:!0},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.link",defaultMessage:"read the docs"}))}})))))},By=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiFieldText,b()({"data-test-subj":"syntheticsFieldTextFieldText"},e,{inputRef:t})))),Hy=o.i18n.translate("xpack.synthetics.monitorManagement.agentCallout.title",{defaultMessage:"Requirement"}),Gy=o.i18n.translate("xpack.synthetics.monitorManagement.agentMissingCallout.title",{defaultMessage:"Selected agent policy has no agents"}),Vy=o.i18n.translate("xpack.synthetics.monitorManagement.locationName",{defaultMessage:"Location name"}),$y=o.i18n.translate("xpack.synthetics.monitorManagement.alreadyExists",{defaultMessage:"Location name already exists."}),Uy=o.i18n.translate("xpack.synthetics.monitorManagement.nameRequired",{defaultMessage:"Location name is required"}),qy=({deleteLoading:e,onDelete:t,privateLocations:a})=>{const i=Object(u.useDispatch)(),[s,o]=Object(n.useState)(0),[l,c]=Object(n.useState)(10),{locationMonitors:d,loading:m}=(()=>{const e=Object(u.useDispatch)();return Object(n.useEffect)((()=>{e(Td.c.get())}),[e]),Object(u.useSelector)(wd.c)})(),{canSave:p}=at(),f=a.reduce(((e,t)=>{const a=t.tags||[];return new Set([...e,...a])}),new Set),g=[{field:"label",name:Vy,render:e=>r.a.createElement(ay,{text:e})},{field:"monitors",name:Yy,render:(e,t)=>r.a.createElement(ny,{count:e,locationName:t.label})},{field:"agentPolicyId",name:Xy,render:e=>r.a.createElement(wy,{agentPolicyId:e})},{name:uy,field:"tags",sortable:!0,render:e=>{const t=null!=e?e:[];return 0===t.length?"--":r.a.createElement(y.EuiFlexGroup,{gutterSize:"xs",wrap:!0},t.map((e=>r.a.createElement(y.EuiFlexItem,{grow:!1,key:e},r.a.createElement(y.EuiBadge,null,e)))))}},{name:Ky,actions:[{name:Jy,description:Jy,render:a=>r.a.createElement(yy,{id:a.id,label:a.label,locationMonitors:d,onDelete:t,loading:e}),isPrimary:!0,"data-test-subj":"action-delete"}]}],h=a.map((e=>{var t,a;return{...e,monitors:null!==(t=null==d||null===(a=d.find((t=>t.id===e.id)))||void 0===a?void 0:a.count)&&void 0!==t?t:0}}));return r.a.createElement("div",null,r.a.createElement(y.EuiText,null,hy," ",r.a.createElement(py,{label:Zy})),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiInMemoryTable,{itemId:"id",tableLayout:"auto",tableCaption:Wy,items:h,columns:g,childrenBetween:r.a.createElement(tv,{total:h.length,label:Wy,pageIndex:s,pageSize:l}),pagination:{pageSize:l,pageIndex:s},onTableChange:({page:e})=>{var t,a;o(null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0),c(null!==(a=null==e?void 0:e.size)&&void 0!==a?a:10)},search:{toolsRight:[r.a.createElement(ia,{canEditSynthetics:p},r.a.createElement(y.EuiButton,{key:"addPrivateLocationButton",fill:!0,"data-test-subj":"addPrivateLocationButton",isLoading:m,disabled:!p,onClick:()=>i(Object(dy.j)(true)),iconType:"plusInCircle"},Qy))],box:{incremental:!0},filters:[{type:"field_value_selection",field:"tags",name:uy,multiSelect:!0,options:[...f].map((e=>({value:e,name:e,view:e})))}]}}))},Wy=o.i18n.translate("xpack.synthetics.monitorManagement.privateLocations",{defaultMessage:"Private locations"}),Ky=o.i18n.translate("xpack.synthetics.monitorManagement.actions",{defaultMessage:"Actions"}),Yy=o.i18n.translate("xpack.synthetics.monitorManagement.monitors",{defaultMessage:"Monitors"}),Xy=o.i18n.translate("xpack.synthetics.monitorManagement.agentPolicy",{defaultMessage:"Agent Policy"}),Jy=o.i18n.translate("xpack.synthetics.settingsRoute.privateLocations.deleteLabel",{defaultMessage:"Delete private location"}),Qy=o.i18n.translate("xpack.synthetics.monitorManagement.createLocation",{defaultMessage:"Create location"}),Zy=o.i18n.translate("xpack.synthetics.privateLocations.learnMore.label",{defaultMessage:"Learn more."}),ex=({children:e,privateLocations:t,setIsAddingNew:a,showNeedAgentPolicy:n=!0,showEmptyLocations:i=!0})=>{const{data:s}=Object(u.useSelector)(dy.g);return 0===(null==s?void 0:s.length)&&n?r.a.createElement(Cy,null):0===t.length&&i?r.a.createElement(my,{setIsAddingNew:a}):r.a.createElement(r.a.Fragment,null,e)},tx=({onSubmit:e,setIsOpen:t,privateLocations:a,isLoading:n})=>{const i=iv({mode:"onSubmit",reValidateMode:"onChange",shouldFocusError:!0,defaultValues:{label:"",agentPolicyId:"",geo:{lat:0,lon:0}}}),{canSave:s}=at(),{handleSubmit:o}=i,l=()=>{t(!1)};return r.a.createElement(sn.FormProvider,i,r.a.createElement(y.EuiFlyout,{onClose:l,style:{width:540}},r.a.createElement(y.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h2",null,ax))),r.a.createElement(y.EuiFlyoutBody,null,r.a.createElement(ex,{privateLocations:a,showEmptyLocations:!1},r.a.createElement(zy,{privateLocations:a}))),r.a.createElement(y.EuiFlyoutFooter,null,r.a.createElement(y.EuiFlexGroup,{justifyContent:"spaceBetween"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsAddLocationFlyoutButton",iconType:"cross",onClick:l,flush:"left",isLoading:n},nx)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(ia,{canEditSynthetics:s},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsAddLocationFlyoutButton",fill:!0,onClick:o(e),isLoading:n,isDisabled:!s},rx)))))))},ax=o.i18n.translate("xpack.synthetics.monitorManagement.createPrivateLocations",{defaultMessage:"Create private location"}),nx=o.i18n.translate("xpack.synthetics.monitorManagement.cancelLabel",{defaultMessage:"Cancel"}),rx=o.i18n.translate("xpack.synthetics.monitorManagement.saveLabel",{defaultMessage:"Save"});var ix=a(143);const sx=()=>{const[e,t]=Object(n.useState)(),[a,r]=Object(n.useState)(),i=Object(u.useDispatch)(),s=Object(u.useSelector)(dy.h),o=Object(u.useSelector)(dy.i);Object(n.useEffect)((()=>{i(dy.e.get())}),[i]);const{loading:l}=Object(f.useFetcher)((async()=>{if(e){const a=await Object(ix.a)(e);return t(void 0),i(Object(dy.j)(false)),i(Object(Oc.b)()),i(dy.e.get()),a}}),[e]),{loading:c}=Object(f.useFetcher)((async()=>{if(a){const e=await Object(ix.b)(a);return r(void 0),i(Object(Oc.b)()),i(dy.e.get()),e}}),[a]);return{formData:e,onSubmit:e=>{t(e)},onDelete:e=>{r(e)},deleteLoading:Boolean(c),loading:Boolean(o||l),privateLocations:s}},ox=()=>{const e=Object(u.useDispatch)(),t=Object(u.useSelector)(dy.f),a=Object(n.useCallback)((t=>e(Object(dy.j)(t))),[e]),{onSubmit:i,loading:s,privateLocations:o,onDelete:l,deleteLoading:c}=sx();return Object(n.useEffect)((()=>{a(!1)}),[a]),Object(n.useEffect)((()=>{e(dy.d.get()),e(Object(q.u)())}),[e]),r.a.createElement(r.a.Fragment,null,s?r.a.createElement(dr,null):r.a.createElement(ex,{privateLocations:o,setIsAddingNew:a},r.a.createElement(qy,{privateLocations:o,onDelete:l,deleteLoading:c})),t?r.a.createElement(tx,{setIsOpen:a,onSubmit:e=>{i(e)},privateLocations:o,isLoading:s}):null)},lx=()=>{(e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"";Ie([{text:ty,href:`${n}${c.B.replace(":tabId","alerting")}`}])})();const{tabId:e}=Object(R.useParams)();return r.a.createElement("div",null,(()=>{switch(e){case"api-keys":return r.a.createElement(YE,null);case"private-locations":return r.a.createElement(ox,null);case"data-retention":return r.a.createElement(ey,null);case"params":return r.a.createElement(Sv,null);case"alerting":return r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(RE,null));default:return r.a.createElement(R.Redirect,{to:"/settings/alerting"})}})())},cx=(e,t)=>{const a=Object(R.useRouteMatch)(c.B);if(!a)return{};const{tabId:n}=a.params,r=e=>`${t}${c.B.replace(":tabId",e)}`;return{pageTitle:o.i18n.translate("xpack.synthetics.settingsRoute.pageHeaderTitle",{defaultMessage:"Settings"}),rightSideItems:[],tabs:[{label:o.i18n.translate("xpack.synthetics.settingsTabs.alerting",{defaultMessage:"Alerting"}),isSelected:"alerting"===n,href:r("alerting")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.privateLocations",{defaultMessage:"Private Locations"}),isSelected:"private-locations"===n,href:r("private-locations")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.params",{defaultMessage:"Global Parameters"}),isSelected:"params"===n||!n,href:r("params")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.dataRetention",{defaultMessage:"Data Retention"}),isSelected:"data-retention"===n,href:r("data-retention")},{label:o.i18n.translate("xpack.synthetics.settingsTabs.apiKeys",{defaultMessage:"Project API Keys"}),isSelected:"api-keys"===n,href:r("api-keys")}]}},ux=(e,t,a)=>{const n={title:o.i18n.translate("xpack.synthetics.settingsRoute.title",{defaultMessage:"Settings | {baseTitle}",values:{baseTitle:a}}),component:lx,pageHeader:cx(0,t),dataTestSubj:"syntheticsSettingsPage",pageSectionProps:{paddingSize:"m"}};return[{...n,path:c.x},{...n,path:c.B}]},dx=({canUsePublicLocations:e})=>e?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{color:"warning",title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.publicLocations.readOnly.callout.title",defaultMessage:"You do not have permission to use Elastic managed locations"}),iconType:"alert"},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.publicLocations.readOnly.callout.content",defaultMessage:"This monitor contains a Elastic managed location. To edit this monitor, you need to have permission to use Elastic managed locations."}))),r.a.createElement(y.EuiSpacer,{size:"m"})),mx=()=>{const e=Object(R.useRouteMatch)({path:c.p});return(null==e?void 0:e.isExact)||!1};var px=a(54);const fx=()=>{const{services:e}=Object(p.useKibana)(),{data:t,loading:a,error:n}=Object(f.useFetcher)((()=>{var t,a;return null!==(t=null===(a=e.spaces)||void 0===a?void 0:a.getActiveSpace())&&void 0!==t?t:Promise.resolve({id:px.DEFAULT_SPACE_ID})}),[e.spaces]);return{space:t,loading:a,error:n}},gx=e=>{const{services:{uiSettings:t}}=Object(p.useKibana)(),{isDev:a}=at(),n=null==t?void 0:t.get(Ye.enableInspectEsQueries);return a||n?r.a.createElement(hx,e):null},hx=({isValid:e,monitorFields:t})=>{const{isDev:a}=at(),[i,s]=Object(n.useState)((()=>!a)),[o,l]=Object(n.useState)(!1),u=()=>{l(!1),m(!1)},[d,m]=Object(n.useState)(!1),{data:p,loading:g,error:h}=Object(f.useFetcher)((()=>{if(d)return(async({monitor:e,hideParams:t})=>await VE.a.post(c.z.SYNTHETICS_MONITOR_INSPECT,e,void 0,{hideParams:t}))({hideParams:i,monitor:t})}),[d,i]);let b;return o&&(b=r.a.createElement(y.EuiFlyout,{ownFocus:!0,onClose:u,"aria-labelledby":"flyoutTitle"},r.a.createElement(y.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("h2",{id:"flyoutTitle"},vx))),r.a.createElement(y.EuiFlyoutBody,null,r.a.createElement(y.EuiSwitch,{label:wx,checked:i,onChange:e=>s(e.target.checked)}),r.a.createElement(y.EuiSpacer,{size:"m"}),!g&&p?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCodeBlock,{language:"json",fontSize:"m",paddingSize:"m",lineNumbers:!0,isCopyable:!0},Ex(p.result)),p.decodedCode&&r.a.createElement(bx,{code:p.decodedCode})):g&&!h?r.a.createElement(dr,null):r.a.createElement("p",null,null==h?void 0:h.message)),r.a.createElement(y.EuiFlyoutFooter,null,r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsMonitorInspectCloseButton",onClick:u,fill:!0},Sx)))),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiToolTip,{content:e?xx:yx},r.a.createElement(y.EuiButton,{disabled:!e,"data-test-subj":"syntheticsMonitorInspectShowFlyoutExampleButton",onClick:()=>{m((()=>!d)),l((()=>!o))},iconType:"inspect",iconSide:"left"},Mx)),b)},bx=({code:e})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiHorizontalRule,null),r.a.createElement(y.EuiTitle,{size:"s"},r.a.createElement("h2",{id:"flyoutTitle"},kx)),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiCodeBlock,{language:"javascript",fontSize:"m",paddingSize:"m",lineNumbers:!0,isCopyable:!0},e)),Ex=e=>{var t,a,n,r,i;const s=null===(t=e.publicConfigs)||void 0===t||null===(a=t[0])||void 0===a||null===(n=a.monitors)||void 0===n?void 0:n[0],o=null===(r=e.privateConfig)||void 0===r?void 0:r.inputs.find((e=>e.enabled)),l=null==o||null===(i=o.streams.find((e=>Object.values(Ge.q).includes(e.data_stream.dataset))))||void 0===i?void 0:i.compiled_stream;return JSON.stringify({publicConfig:null!=s?s:{},privateConfig:null!=l?l:{}},null,2)},vx=o.i18n.translate("xpack.synthetics.monitorInspect.configLabel",{defaultMessage:"Configuration"}),yx=o.i18n.translate("xpack.synthetics.monitorInspect.formattedConfigLabel.valid",{defaultMessage:"Only valid form configurations can be inspected."}),xx=o.i18n.translate("xpack.synthetics.monitorInspect.formattedConfigLabel.description",{defaultMessage:"View formatted configuration for this monitor."}),Sx=o.i18n.translate("xpack.synthetics.monitorInspect.closeLabel",{defaultMessage:"Close"}),kx=o.i18n.translate("xpack.synthetics.monitorInspect.sourceCodeLabel",{defaultMessage:"Source code"}),Mx=o.i18n.translate("xpack.synthetics.monitorInspect.inspectLabel",{defaultMessage:"Inspect configuration"}),wx=o.i18n.translate("xpack.synthetics.monitorInspect.hideParams",{defaultMessage:"Hide parameter values"}),Tx=({isValid:e,monitorFields:t})=>r.a.createElement(Ml,{node:Gb},r.a.createElement(gx,{isValid:e,monitorFields:t}));var Ox=a(36),Cx=a(93);const Ix=({throttling:e,id:t})=>{if(t===Cx.g.NO_THROTTLING)return r.a.createElement(y.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile.disabled.label",defaultMessage:"No throttling"}))));if(e&&e.value){const{label:t,value:a}=e;return r.a.createElement(y.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,null,t)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile",defaultMessage:"({download} Mbps, {upload} Mbps, {latency} ms)",values:{download:a.download,upload:a.upload,latency:a.latency}}))))}return r.a.createElement(y.EuiFlexGroup,{alignItems:"baseline",gutterSize:"xs"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile.custom.label",defaultMessage:"Custom"}))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorAddEdit.throttling.connectionProfile.custom",defaultMessage:"(X Mbps, Y Mbps, Z ms)"}))))},jx=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiCallOut,{title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.automatic_node_cap.title",defaultMessage:"Automatic cap"}),color:"warning",iconType:"warning"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.automatic_node_cap.message",defaultMessage:"When disabling throttling, your monitor will still have its bandwidth capped by the configurations of the Synthetics Nodes in which it's running."}))),_x=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiCallOut,{title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.exceeded_throttling.title",defaultMessage:"You've exceeded the Synthetics Node bandwidth limits"}),color:"warning",iconType:"warning"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.exceeded_throttling.message",defaultMessage:"When using throttling values larger than a Synthetics Node bandwidth limit, your monitor will still have its bandwidth capped."}))),Fx=({throttlingField:e,limit:t})=>r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.throttling_exceeded.message",defaultMessage:"You have exceeded the { throttlingField } limit for Synthetic Nodes. The { throttlingField } value can't be larger than { limit }Mbps.",values:{throttlingField:e,limit:t}}),Px=()=>r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.inputVarFieldOptionalLabel",defaultMessage:"Optional"})),Lx=({readOnly:e,onFieldBlur:t,throttling:a,validate:n,handleInputChange:i,throttlingValue:s})=>{var o;const l=Number(Ge.e[Ge.b.UPLOAD]),c=Number(s.upload)>l;return r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:Rx,labelAppend:r.a.createElement(Px,null),isInvalid:!!n&&!(null==n||null===(o=n[Ge.c.THROTTLING_CONFIG])||void 0===o||!o.call(n,a))||c,error:c?r.a.createElement(Fx,{throttlingField:"upload",limit:l}):Dx},r.a.createElement(y.EuiFieldNumber,{fullWidth:!0,min:0,step:.001,value:s.upload,onChange:e=>i(e.target.value),onBlur:()=>null==t?void 0:t("upload"),"data-test-subj":"syntheticsBrowserUploadSpeed",append:r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("strong",null,"Mbps")),readOnly:e}))},Rx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.upload.label",{defaultMessage:"Upload Speed"}),Dx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.upload.error",{defaultMessage:"Upload speed must be greater than zero."}),Ax=({handleInputChange:e,readOnly:t,onFieldBlur:a,validate:n,throttling:i,throttlingValue:s})=>{var o;const l=Number(Ge.e[Ge.b.DOWNLOAD]),c=Number(s.download)>l;return r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:Nx,labelAppend:r.a.createElement(Px,null),isInvalid:!!n&&!(null==n||null===(o=n[Ge.c.THROTTLING_CONFIG])||void 0===o||!o.call(n,i))||c,error:c?r.a.createElement(Fx,{throttlingField:"download",limit:l}):zx},r.a.createElement(y.EuiFieldNumber,{fullWidth:!0,min:0,step:.001,value:s.download,onChange:t=>{e(t.target.value)},onBlur:()=>null==a?void 0:a("download"),"data-test-subj":"syntheticsBrowserDownloadSpeed",append:r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("strong",null,"Mbps")),readOnly:t}))},Nx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.download.label",{defaultMessage:"Download Speed"}),zx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.download.error",{defaultMessage:"Download speed must be greater than zero."}),Bx=({throttling:e,readOnly:t,onFieldBlur:a,validate:n,handleInputChange:i,throttlingValue:s})=>{var o;return r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:Hx,labelAppend:r.a.createElement(Px,null),isInvalid:!!n&&!(null==n||null===(o=n[Ge.c.THROTTLING_CONFIG])||void 0===o||!o.call(n,e)),error:Gx},r.a.createElement(y.EuiFieldNumber,{fullWidth:!0,min:0,value:s.latency,onChange:e=>i(e.target.value),onBlur:()=>null==a?void 0:a("latency"),"data-test-subj":"syntheticsBrowserLatency",append:r.a.createElement(y.EuiText,{size:"xs"},r.a.createElement("strong",null,"ms")),readOnly:t}))},Hx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.latency.label",{defaultMessage:"Latency"}),Gx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.browserAdvancedSettings.throttling.latency.error",{defaultMessage:"Latency must not be negative."}),Vx=Object(n.memo)((({validate:e,onFieldBlur:t,setValue:a,readOnly:i=!1,throttling:s})=>{var o,l;const c=Ge.e[Ge.b.DOWNLOAD],u=Ge.e[Ge.b.UPLOAD],d=Object(n.useCallback)((({value:e,configKey:t})=>{a({...s,value:{...s.value,[t]:e},label:un.d,id:un.h.CUSTOM})}),[a,s]),m=Number(null===(o=s.value)||void 0===o?void 0:o.download)>c,p=Number(null===(l=s.value)||void 0===l?void 0:l.upload)>u,f=s.id!==un.h.NO_THROTTLING,g=f&&(m||p);return f&&s.value?r.a.createElement("div",null,g&&r.a.createElement(_x,null),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Ax,{validate:e,onFieldBlur:t,throttling:s,throttlingValue:s.value,handleInputChange:e=>{d({value:e,configKey:"download"})},readOnly:i}),r.a.createElement(Lx,{throttlingValue:s.value,validate:e,onFieldBlur:t,throttling:s,handleInputChange:e=>{d({value:e,configKey:"upload"})},readOnly:i}),r.a.createElement(Bx,{throttlingValue:s.value,validate:e,onFieldBlur:t,throttling:s,handleInputChange:e=>{d({value:e,configKey:"latency"})},readOnly:i})):r.a.createElement(jx,null)})),$x=e=>{const{value:t,initialValue:a}=e,i=void 0===un.f[null==t?void 0:t.id],s=(null==t?void 0:t.id)===un.h.NO_THROTTLING,o=(e=>Object(n.useMemo)((()=>[...Ux,{value:Cx.g.CUSTOM,inputDisplay:r.a.createElement(Ix,{id:"custom",throttling:(null==e?void 0:e.id)===Cx.g.CUSTOM?e:void 0}),"data-test-subj":"syntheticsThrottlingSelectCustom"}]),[e]))(a),l=Object(p.useUiSetting)(bt.syntheticsThrottlingEnabled),c=e.readOnly||!l;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSuperSelect,{"data-test-subj":"syntheticsThrottlingSelect",options:o,onChange:t=>{t===un.h.CUSTOM?e.onChange({...un.f[un.h.DEFAULT],id:un.h.CUSTOM,label:un.d}):e.onChange({...un.f[un.h.DEFAULT],...un.f[t]})},defaultValue:un.h.DEFAULT,valueOfSelected:null==t?void 0:t.id,fullWidth:e.fullWidth,readOnly:c}),s&&r.a.createElement(jx,null),i&&r.a.createElement(Vx,{throttling:null==e?void 0:e.value,setValue:e.onChange,readOnly:c}))},Ux=un.g.map((({id:e})=>({value:e,inputDisplay:r.a.createElement(Ix,{throttling:un.f[e],id:e}),"data-test-subj":`syntheticsThrottlingSelect-${e}`})));var qx=a(55);const Wx=G()(y.EuiPanel).withConfig({displayName:"CodeEditorContainer",componentId:"sc-i83fkl-0"})(["padding:0;"]),Kx=({ariaLabel:e,id:t,languageId:a,onChange:n,value:i,placeholder:s,height:o="250px",readOnly:l})=>{const{elementRef:c,width:u}=Ue(),d=_c()(u,500);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wx,{panelRef:c,borderRadius:"none",hasShadow:!1,hasBorder:!0},r.a.createElement(Yx,{id:`${t}-editor`,"aria-label":e,"data-test-subj":"codeEditorContainer"},r.a.createElement(qx.CodeEditor,{languageId:a,width:null!=d?d:"100%",height:o,value:i,onChange:n,options:{renderValidationDecorations:i?"on":"off",readOnly:l},isCopyable:!0,allowFullScreen:!0,placeholder:s}))))},Yx=m.euiStyled.div`
  & > .kibanaCodeEditor {
    z-index: 0;
  }
`,Xx=e=>r.a.createElement(Kx,b()({languageId:cn.g.JSON},e));function Jx({onUpload:e}){const t=Object(n.useRef)(null),[a,i]=Object(n.useState)(null),s=Object(n.useRef)(null);return r.a.createElement(y.EuiFormRow,{isInvalid:Boolean(a),error:a,"aria-label":Qx,fullWidth:!0},r.a.createElement(y.EuiFilePicker,{id:"syntheticsFleetScriptRecorderUploader","data-test-subj":"syntheticsFleetScriptRecorderUploader",ref:s,initialPromptText:Zx,onChange:a=>{if(a&&a.length){var n;if(a.length&&!a[0].type.includes("javascript"))return i(eS),void(null===(n=s.current)||void 0===n||n.removeFiles());t.current=new FileReader,t.current.onloadend=()=>(a=>{var n;const r=null==t||null===(n=t.current)||void 0===n?void 0:n.result;var o;if("step"!==(null==r?void 0:r.trim().slice(0,4)))return i(tS),void(null===(o=s.current)||void 0===o||o.removeFiles());e({scriptText:r,fileName:a}),i(null)})(a[0].name),t.current.readAsText(a[0])}else e({scriptText:"",fileName:""})},display:"large",fullWidth:!0}))}const Qx=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.fieldLabel",{defaultMessage:"Testing script"}),Zx=o.i18n.translate("xpack.synthetics.monitorConfig.uploader.label",{defaultMessage:"Select or drag and drop a .js file"}),eS=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.invalidFileError",{defaultMessage:"Invalid file type. Please upload a .js file generated by the Elastic Synthetics Recorder."}),tS=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.uploader.parsingError",{defaultMessage:"Error uploading file. Please upload a .js file generated by the Elastic Synthetics Recorder in inline script format."});function aS({onChange:e,script:t,fileName:a,isEditable:i}){const[s,o]=Object(n.useState)(!1),l=Object(n.useCallback)((({scriptText:t,fileName:a})=>{e({scriptText:t,fileName:a})}),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),i&&t?r.a.createElement(y.EuiFormRow,{"aria-label":"Testing script",fullWidth:!0},r.a.createElement(y.EuiText,{size:"s"},r.a.createElement("strong",null,a))):r.a.createElement(Jx,{onUpload:l}),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"s"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsScriptRecorderFieldsShowScriptButton",onClick:()=>o(!0),iconType:"editorCodeBlock",iconSide:"right"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.recorder.showScriptLabel",defaultMessage:"Show script"}))),r.a.createElement(y.EuiFlexItem,{grow:!1},i&&r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsScriptRecorderFieldsRemoveScriptButton",onClick:()=>e({scriptText:"",fileName:""}),iconType:"trash",iconSide:"right",color:"danger"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.recorder.removeScriptLabel",defaultMessage:"Remove script"}))))),s&&r.a.createElement(y.EuiFlyout,{ownFocus:!0,onClose:()=>o(!1),"aria-labelledby":"syntheticsBrowserScriptBlockHeader",closeButtonProps:{"aria-label":rS}},r.a.createElement(y.EuiFlyoutHeader,{hasBorder:!0},r.a.createElement(y.EuiTitle,{size:"m"},r.a.createElement("span",{id:"syntheticsBrowserScriptBlockHeader"},a||nS))),r.a.createElement("div",{style:{height:"100%"}},r.a.createElement(y.EuiCodeBlock,{language:"js",overflowHeight:"100%",fontSize:"m",isCopyable:!0},t))))}const nS=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.scriptRecorder.mockFileName",{defaultMessage:"test_script.js"}),rS=o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.browser.scriptRecorder.closeButtonLabel",{defaultMessage:"Close script flyout"});var iS=function(e){return e.INLINE="syntheticsBrowserInlineConfig",e.SCRIPT_RECORDER="syntheticsBrowserScriptRecorderConfig",e.ZIP="syntheticsBrowserZipURLConfig",e}(iS||{});const sS=({onChange:e,onBlur:t,value:a,isEditFlow:i=!1})=>{const[s,l]=Object(n.useState)("inline"===a.type?iS.INLINE:iS.SCRIPT_RECORDER),[c,u]=Object(n.useState)(a);Object(n.useEffect)((()=>{e(c)}),[c,e]);const d=[{id:"syntheticsBrowserScriptRecorderConfig",name:i?r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.scriptRecorderEdit.label",defaultMessage:"Upload new script"}):r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.scriptRecorder.label",defaultMessage:"Upload script"}),"data-test-subj":"syntheticsSourceTab__scriptRecorder",content:r.a.createElement(aS,{onChange:({scriptText:e,fileName:t})=>{u((a=>({...a,script:e,type:"recorder",fileName:t})))},script:c.script,isEditable:i,fileName:c.fileName})},{id:"syntheticsBrowserInlineConfig",name:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.addEditMonitor.scriptEditor.label",defaultMessage:"Script editor"}),"data-test-subj":"syntheticsSourceTab__inline",content:r.a.createElement(y.EuiFormRow,{helpText:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.addEditMonitor.scriptEditor.helpText",defaultMessage:"Runs Synthetic test scripts that are defined inline."}),fullWidth:!0},r.a.createElement(Kx,{ariaLabel:o.i18n.translate("xpack.synthetics.addEditMonitor.scriptEditor.ariaLabel",{defaultMessage:"JavaScript code editor"}),id:"javascript",languageId:cn.g.JAVASCRIPT,onChange:e=>{u((t=>({...t,script:e}))),t(cn.b.SOURCE_INLINE)},value:c.script,placeholder:o.i18n.translate("xpack.synthetics.addEditMonitor.scriptEditor.placeholder",{defaultMessage:"// Paste your Playwright script here..."})}))}];return i&&d.reverse(),r.a.createElement(y.EuiTabbedContent,{tabs:d,initialSelectedTab:i?d.find((e=>e.id===iS.INLINE)):d.find((e=>e.id===s)),autoFocus:"selected",onTabClick:e=>{e.id!==s&&u({script:"",type:e.id===iS.INLINE?"inline":"recorder",fileName:""}),l(e.id)}})},oS=({onChange:e,onBlur:t,selectedOptions:a,...i})=>{const[s,o]=Object(n.useState)(a.map((e=>({label:e,key:e})))),[l,c]=Object(n.useState)(!1),u=Object(n.useCallback)((t=>{o(t);const a=t.map((e=>e.label));e(a),c(!1)}),[e,o,c]),d=Object(n.useCallback)((t=>{const n=t.trim(),r={label:n};e([...a,n]),o([...s,r])}),[e,s,a,o]),m=Object(n.useCallback)((e=>{c(!!e&&!lS(e))}),[c]);return r.a.createElement(y.EuiComboBox,b()({"data-test-subj":"syntheticsFleetComboBox",noSuggestions:!0,selectedOptions:s,onCreateOption:d,onChange:u,onBlur:()=>null==t?void 0:t(),onSearchChange:m,isInvalid:l},i))},lS=e=>null!==e.match(/\S+/),cS=({id:e,value:t,label:a,icon:n,onChange:i,name:s,isSelected:o,"data-test-subj":l})=>r.a.createElement(y.EuiKeyPadMenuItem,{checkable:"single",label:a,id:e,value:t,onChange:i,name:s,isSelected:o,"data-test-subj":l},r.a.createElement(y.EuiIcon,{type:n})),uS=({options:e,value:t,name:a,onChange:n,ariaLegend:i,...s})=>{const l=e.find((e=>e.value===t));return r.a.createElement(r.a.Fragment,null,r.a.createElement(dS,{checkable:{ariaLegend:i}},e.map((e=>r.a.createElement(cS,b()({},s,e,{name:a,onChange:n,isSelected:e.value===t,"data-test-subj":e["data-test-subj"],key:e.value}))))),r.a.createElement(y.EuiSpacer,null),l&&r.a.createElement(y.EuiPanel,{color:"primary"},r.a.createElement(y.EuiText,{size:"s"},r.a.createElement("h4",null,l.descriptionTitle)),r.a.createElement(y.EuiText,{size:"s",color:"subdued"},r.a.createElement("span",null,`${l.description} `),r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorTypeRadioGroupLearnMoreLink",href:l.link,target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.learnMoreLink",{defaultMessage:"Learn more"}))),r.a.createElement(y.EuiSpacer,{size:"xs"})))};var dS=G()(y.EuiKeyPadMenu).withConfig({displayName:"_StyledEuiKeyPadMenu",componentId:"sc-1h7ik7m-0"})({width:"100%"});const mS=G()(y.EuiFormFieldset).withConfig({displayName:"StyledFieldset",componentId:"sc-jhsqf9-0"})(["&&&{legend{width:calc(100% - 52px);margin-right:40px;}.euiFlexGroup{margin-left:0;}.euiFlexItem{margin-left:0;padding-left:12px;}}"]),pS=G()(y.EuiFieldText).withConfig({displayName:"StyledField",componentId:"sc-jhsqf9-1"})(["text-align:left;"]),fS=({addPairControlLabel:e,defaultPairs:t,onChange:a,onBlur:i,"data-test-subj":s,readOnly:l,keyLabel:c,valueLabel:u})=>{const[d,m]=Object(n.useState)(t),p=Object(n.useCallback)(((e,t,a)=>{const n=e.target.value;m((e=>{const r=[...e],[i,s]=e[t];return r[t]=a?[n,s]:[i,n],r}))}),[m]),f=Object(n.useCallback)((()=>{m((e=>[["",""],...e]))}),[m]),g=Object(n.useCallback)((e=>{m((t=>{const a=[...t];return a.splice(e,1),[...a]}))}),[m]);return Object(n.useEffect)((()=>{a(d)}),[a,d]),r.a.createElement("div",{"data-test-subj":s},r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(y.EuiFlexGroup,{justifyContent:"flexEnd"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButton,{iconType:"plus",onClick:f,"data-test-subj":`${s}__button`,isDisabled:l},e))),r.a.createElement(y.EuiSpacer,{size:"s"}),r.a.createElement(mS,{legend:d.length?{children:r.a.createElement(y.EuiFlexGroup,{responsive:!1},r.a.createElement(y.EuiFlexItem,null,c||r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.keyValuePairsField.key.label",defaultMessage:"Key"})),r.a.createElement(y.EuiFlexItem,null,u||r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.keyValuePairsField.value.label",defaultMessage:"Value"})))}:void 0},d.map(((e,t)=>{const[a,s]=e;return r.a.createElement(n.Fragment,{key:t},r.a.createElement(y.EuiSpacer,{size:"xs"}),r.a.createElement(y.EuiFormControlLayoutDelimited,{fullWidth:!0,append:r.a.createElement(y.EuiFormLabel,null,r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsKeyValuePairsFieldButton",iconType:"trash","aria-label":o.i18n.translate("xpack.synthetics.keyValuePairsField.deleteItem.label",{defaultMessage:"Delete item number {index}, {key}:{value}",values:{index:t+1,key:a,value:s}}),onClick:()=>g(t),isDisabled:l})),startControl:r.a.createElement(pS,{"aria-label":o.i18n.translate("xpack.synthetics.keyValuePairsField.key.ariaLabel",{defaultMessage:"Key"}),"data-test-subj":`keyValuePairsKey${t}`,value:a,onChange:e=>p(e,t,!0),onBlur:()=>null==i?void 0:i(),readOnly:l}),endControl:r.a.createElement(pS,{"aria-label":o.i18n.translate("xpack.synthetics.keyValuePairsField.value.ariaLabel",{defaultMessage:"Value"}),"data-test-subj":`keyValuePairsValue${t}`,value:s,onChange:e=>p(e,t,!1),onBlur:()=>null==i?void 0:i(),readOnly:l}),delimiter:":"}),r.a.createElement(y.EuiSpacer,{size:"xs"}))}))))},gS=({contentMode:e,defaultValue:t,onChange:a,onBlur:i,"data-test-subj":s,readOnly:o})=>{const l=[...Object.keys(t).filter(hS(t,bS,e)).map((e=>[e||"",t[e]||""]))],[c,u]=Object(n.useState)(l);return Object(n.useEffect)((()=>{const t=c.reduce(((e,t)=>{const[a,n]=t;return a?{...e,[a]:n}:e}),{});a(e?{"Content-Type":bS[e],...t}:t)}),[e,c,a]),r.a.createElement(fS,{addPairControlLabel:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.headerField.addHeader.label",defaultMessage:"Add header"}),defaultPairs:c,onChange:u,onBlur:()=>null==i?void 0:i(),"data-test-subj":s,readOnly:o})},hS=(e,t,a)=>n=>"Content-Type"!==n||"Content-Type"===n&&a&&e[n]!==t[a],bS={[cn.a.JSON]:cn.c.JSON,[cn.a.PLAINTEXT]:cn.c.TEXT,[cn.a.XML]:cn.c.XML,[cn.a.FORM]:cn.c.FORM};var ES=function(e){return e.CODE="code",e.FORM="form",e}(ES||{});const vS=({onChange:e,onBlur:t,value:{type:a,value:i},readOnly:s})=>{const[l,c]=Object(n.useState)({[ES.FORM]:a===cn.a.FORM?i:"",[ES.CODE]:a!==cn.a.FORM?i:""});Object(n.useEffect)((()=>{e({type:a,value:a===cn.a.FORM?l[ES.FORM]:l[ES.CODE]})}),[e,a,l]);const u=Object(n.useCallback)((t=>{e({type:t,value:t===cn.a.FORM?l[ES.FORM]:l[ES.CODE]})}),[e,l]),d=Object(n.useCallback)((e=>{const t=e.reduce(((e,t)=>{const[a,n]=t;return a?{...e,[a]:n}:e}),{});return c((e=>({...e,[cn.a.FORM]:Object(Z.stringify)(t)})))}),[c]),m=Object(n.useMemo)((()=>{const e=Object(Z.parse)(l[cn.a.FORM]);return Object.keys(e).map((t=>[t,`${e[t]}`]))}),[l]),p=[{id:cn.a.PLAINTEXT,name:yS[cn.a.PLAINTEXT],"data-test-subj":`syntheticsRequestBodyTab__${cn.a.PLAINTEXT}`,content:r.a.createElement(Kx,{ariaLabel:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.text.ariaLabel",{defaultMessage:"Text code editor"}),id:cn.a.PLAINTEXT,languageId:cn.g.PLAINTEXT,onChange:e=>{c((t=>({...t,[ES.CODE]:e}))),null==t||t()},value:l[ES.CODE],readOnly:s})},{id:cn.a.JSON,name:yS[cn.a.JSON],"data-test-subj":`syntheticsRequestBodyTab__${cn.a.JSON}`,content:r.a.createElement(Kx,{ariaLabel:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.json.ariaLabel",{defaultMessage:"JSON code editor"}),id:cn.a.JSON,languageId:cn.g.JSON,onChange:e=>{c((t=>({...t,[ES.CODE]:e}))),null==t||t()},value:l[ES.CODE],readOnly:s})},{id:cn.a.XML,name:yS[cn.a.XML],"data-test-subj":`syntheticsRequestBodyTab__${cn.a.XML}`,content:r.a.createElement(Kx,{ariaLabel:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.xml.ariaLabel",{defaultMessage:"XML code editor"}),id:cn.a.XML,languageId:cn.g.XML,onChange:e=>{c((t=>({...t,[ES.CODE]:e}))),null==t||t()},value:l[ES.CODE],readOnly:s})},{id:cn.a.FORM,name:yS[cn.a.FORM],"data-test-subj":`syntheticsRequestBodyTab__${cn.a.FORM}`,content:r.a.createElement(fS,{addPairControlLabel:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.formField.addFormField.label",defaultMessage:"Add form field"}),"data-test-subj":"syntheticsFormField",defaultPairs:m,onChange:d,onBlur:()=>null==t?void 0:t(),readOnly:s})}];return r.a.createElement(xS,{$_css:s?{cursor:"not-allowed"}:void 0},r.a.createElement(SS,{tabs:p,initialSelectedTab:p.find((e=>e.id===a)),autoFocus:"selected",onTabClick:e=>{u(e.id)},$_css2:s?{pointerEvents:"none"}:void 0}))},yS={[cn.a.FORM]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.form",{defaultMessage:"Form"}),[cn.a.PLAINTEXT]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.text",{defaultMessage:"Text"}),[cn.a.JSON]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.JSON",{defaultMessage:"JSON"}),[cn.a.XML]:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBodyType.XML",{defaultMessage:"XML"})};var xS=G()("div")`${e=>e.$_css}`,SS=G()(y.EuiTabbedContent).withConfig({displayName:"_StyledEuiTabbedContent",componentId:"sc-ri7mnw-0"})(["",""],(e=>e.$_css2));const kS=({defaultValue:e,onChange:t,onBlur:a,readOnly:i})=>{const[s,l]=Object(n.useState)(e),[c,u]=Object(n.useState)(e!==cn.i.NEVER);return Object(n.useEffect)((()=>{if(c){const e=s===cn.i.NEVER?cn.i.ON_ERROR:s;l(e),t(e)}else t(cn.i.NEVER)}),[c,s,l,t]),Object(n.useEffect)((()=>{t(s)}),[t,s]),r.a.createElement(y.EuiFlexGroup,null,r.a.createElement(y.EuiFlexItem,{"data-test-subj":"syntheticsIndexResponseBody"},r.a.createElement(y.EuiCheckbox,{id:"uptimeFleetIndexResponseBody",checked:c,label:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseBody.label",defaultMessage:"Index response body"}),onChange:e=>{const t=e.target.checked;u(t)},onBlur:()=>null==a?void 0:a(),disabled:i})),c&&r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiSelect,{"aria-label":o.i18n.translate("xpack.synthetics.monitorConfig.indexResponseBodyPolicy.label",{defaultMessage:"Response body index policy"}),"data-test-subj":"indexResponseBodyFieldSelect",options:MS,value:s,onChange:e=>{l(e.target.value)},onBlur:()=>null==a?void 0:a(),disabled:i})))},MS=[{value:cn.i.ON_ERROR,text:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.responseBodyIndex.onError",{defaultMessage:"On error"})},{value:cn.i.ALWAYS,text:o.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.responseBodyIndex.always",{defaultMessage:"Always"})}],wS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiFieldText,b()({"data-test-subj":"syntheticsFieldTextFieldText"},Object(ln.omit)(e,["defaultValue","selectedOptions"]),{inputRef:t})))),TS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiTextArea,b()({"data-test-subj":"syntheticsTextAreaTextArea"},e,{inputRef:t})))),OS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiFieldNumber,b()({"data-test-subj":"syntheticsFieldNumberFieldNumber"},e,{inputRef:t})))),CS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiFieldPassword,b()({},e,{inputRef:t})))),IS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiCheckbox,Object(ln.omit)(e,["defaultValue","fullWidth","isInvalid"])))),jS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiSelect,b()({"data-test-subj":"syntheticsSelectSelect"},e,{inputRef:t})))),_S=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiSwitch,Object(ln.omit)(e,["fullWidth","isInvalid"])))),FS=r.a.forwardRef(((e,t)=>r.a.createElement(sS,e))),PS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiButtonGroup,Object(ln.omit)(e,["isInvalid","fullWidth"])))),LS=r.a.forwardRef(((e,t)=>r.a.createElement(oS,e))),RS=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiComboBox,Object(ln.omit)(e,["isServiceManaged"])))),DS=r.a.forwardRef(((e,t)=>r.a.createElement(Xx,e))),AS=r.a.forwardRef(((e,t)=>r.a.createElement(uS,e))),NS=r.a.forwardRef(((e,t)=>r.a.createElement(gS,e))),zS=r.a.forwardRef(((e,t)=>r.a.createElement(fS,e))),BS=r.a.forwardRef(((e,t)=>r.a.createElement(vS,e))),HS=r.a.forwardRef(((e,t)=>r.a.createElement(kS,e))),GS=r.a.forwardRef(((e,t)=>r.a.createElement($x,e)));var VS=a(9);const $S=(e="default")=>{const t=(e=>{const t=new RegExp(Ox.INVALID_NAMESPACE_CHARACTERS,"g");return e.replace(t,"_")})(e);return{[cn.d.MULTISTEP]:{...un.e[cn.h.BROWSER],"source.inline":{type:"recorder",script:"",fileName:""},[cn.b.FORM_MONITOR_TYPE]:cn.d.MULTISTEP,[cn.b.NAMESPACE]:t},[cn.d.SINGLE]:{...un.e[cn.h.BROWSER],[cn.b.FORM_MONITOR_TYPE]:cn.d.SINGLE,[cn.b.NAMESPACE]:t},[cn.d.HTTP]:{...un.e[cn.h.HTTP],isTLSEnabled:!1,[cn.b.FORM_MONITOR_TYPE]:cn.d.HTTP,[cn.b.NAMESPACE]:t},[cn.d.TCP]:{...un.e[cn.h.TCP],isTLSEnabled:!1,[cn.b.FORM_MONITOR_TYPE]:cn.d.TCP,[cn.b.NAMESPACE]:t},[cn.d.ICMP]:{...un.e[cn.h.ICMP],[cn.b.FORM_MONITOR_TYPE]:cn.d.ICMP,[cn.b.NAMESPACE]:t}}},US=e=>{var t,a,n,r;if(!e)return;let i=e[cn.b.FORM_MONITOR_TYPE];const s=e[cn.b.MONITOR_TYPE],o={...e},l=e[cn.b.SCHEDULE];switch("s"===(null==l?void 0:l.unit)&&(l.number=`${l.number}s`),i||(i=s===cn.h.BROWSER?cn.d.MULTISTEP:s,o[cn.b.FORM_MONITOR_TYPE]=i),i){case cn.d.MULTISTEP:const i=e;return{...o,"source.inline":{type:null!==(t=i[cn.b.METADATA])&&void 0!==t&&null!==(a=t.script_source)&&void 0!==a&&a.is_generated_script?"recorder":"inline",script:i[cn.b.SOURCE_INLINE],fileName:null===(n=i[cn.b.METADATA])||void 0===n||null===(r=n.script_source)||void 0===r?void 0:r.file_name}};case cn.d.SINGLE:case cn.d.ICMP:return{...o};case cn.d.HTTP:case cn.d.TCP:return{...o,isTLSEnabled:e[cn.b.METADATA].is_tls_enabled}}},qS=/^[0-9]*$/g,WS=/[^\:]+:[0-9]{1,5}$/g,KS=/^[0-9]+(.?[0]+)?$/,YS=/^[0-9]+(.?[0-9]+)?$/;function XS(e){return Object.keys(e).some((e=>!!e&&/[\s]/g.test(e)))}const JS=e=>{let t;try{if(t=JSON.parse(e),!t||"object"!=typeof t)return!1}catch(e){return!1}return!0},QS={[cn.b.SCHEDULE]:({[cn.b.SCHEDULE]:e})=>{const{number:t,unit:a}=e,n=parseFloat(t);return!n||!a||n<1},[cn.b.TIMEOUT]:({[cn.b.MONITOR_TYPE]:e,[cn.b.TIMEOUT]:t,[cn.b.SCHEDULE]:a})=>{const{number:n,unit:r}=a;return e!==cn.h.BROWSER&&(!t||parseFloat(String(t))<0||(({scheduleNumber:e,scheduleUnit:t,timeout:a})=>{let n;switch(t){case cn.j.SECONDS:n=parseFloat(e);break;case cn.j.MINUTES:n=60*parseFloat(e);break;default:n=parseFloat(e)}return parseFloat(String(a))>n})({timeout:t,scheduleNumber:n,scheduleUnit:r}))}},ZS={[cn.b.RESPONSE_STATUS_CHECK]:({[cn.b.RESPONSE_STATUS_CHECK]:e})=>{const t=e;return!!t.length&&t.some((e=>!`${e}`.match(qS)))},[cn.b.RESPONSE_HEADERS_CHECK]:({[cn.b.RESPONSE_HEADERS_CHECK]:e})=>XS(e),[cn.b.REQUEST_HEADERS_CHECK]:({[cn.b.REQUEST_HEADERS_CHECK]:e})=>XS(e),[cn.b.MAX_REDIRECTS]:({[cn.b.MAX_REDIRECTS]:e})=>!!e&&!`${e}`.match(qS)||parseFloat(e)<0,[cn.b.URLS]:({[cn.b.URLS]:e})=>!e,...QS},ek={[cn.b.HOSTS]:({[cn.b.HOSTS]:e})=>!e||!`${e}`.match(WS),...QS},tk={[cn.b.HOSTS]:({[cn.b.HOSTS]:e})=>!e,[cn.b.WAIT]:({[cn.b.WAIT]:e})=>!!e&&!qS.test(`${e}`)&&parseFloat(e)<0,...QS},ak=(e,t)=>{if(void 0===e||""===e)return!1;const a=parseFloat(e);return isNaN(a)||(t?a<0:a<=0)},nk={...QS,[cn.b.SOURCE_INLINE]:({[cn.b.SOURCE_INLINE]:e})=>!e,[cn.b.THROTTLING_CONFIG]:({throttling:e})=>{if(!e||null===e.value)return!0;const{download:t,upload:a,latency:n}=e.value;return ak(String(t))||ak(String(a))||ak(String(n),!0)},[cn.b.PLAYWRIGHT_OPTIONS]:({[cn.b.PLAYWRIGHT_OPTIONS]:e})=>!!e&&!JS(e),[cn.b.PARAMS]:({[cn.b.PARAMS]:e})=>!!e&&!JS(e)},rk={[cn.h.HTTP]:ZS,[cn.h.TCP]:ek,[cn.h.ICMP]:tk,[cn.h.BROWSER]:nk},ik=(e,t)=>t?o.i18n.translate("xpack.synthetics.monitorConfig.schedule.seconds.label",{defaultMessage:"Every {value, number} {value, plural, one {second} other {seconds}}",values:{value:e}}):e>60?o.i18n.translate("xpack.synthetics.monitorConfig.schedule.label",{defaultMessage:"Every {value, number} {value, plural, one {hour} other {hours}}",values:{value:e/60}}):o.i18n.translate("xpack.synthetics.monitorConfig.schedule.minutes.label",{defaultMessage:"Every {value, number} {value, plural, one {minute} other {minutes}}",values:{value:e}}),sk=e=>{const t=un.a.map((e=>({value:e,text:ik(parseInt(e,10))})));return e===cn.h.HTTP||e===cn.h.TCP||e===cn.h.ICMP?[...un.b.map((e=>({value:e,text:ik(parseInt(e,10),!0)}))),...t]:t},ok={[cn.d.MULTISTEP]:{id:"syntheticsMonitorTypeMultistep","data-test-subj":"syntheticsMonitorTypeMultistep",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.label",{defaultMessage:"Multistep"}),value:cn.d.MULTISTEP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.title",{defaultMessage:"Multistep Browser Journey"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.multiStep.description",{defaultMessage:"Navigate through multiple steps or pages to test key user flows from a real browser."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-journeys.html",icon:"videoPlayer",beta:!1},[cn.d.SINGLE]:{id:"syntheticsMonitorTypeSingle","data-test-subj":"syntheticsMonitorTypeSingle",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.label",{defaultMessage:"Single Page"}),value:cn.d.SINGLE,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.title",{defaultMessage:"Single Page Browser Test"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.singlePage.description",{defaultMessage:"Test a single page load including all objects on the page from a real web browser."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-journeys.html",icon:"videoPlayer",beta:!1},[cn.d.HTTP]:{id:"syntheticsMonitorTypeHTTP","data-test-subj":"syntheticsMonitorTypeHTTP",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.label",{defaultMessage:"HTTP Ping"}),value:cn.d.HTTP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.title",{defaultMessage:"HTTP Ping"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.http.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"https://elastic.co/guide/en/observability/current/synthetics-lightweight.html",icon:"online",beta:!1},[cn.d.TCP]:{id:"syntheticsMonitorTypeTCP","data-test-subj":"syntheticsMonitorTypeTCP",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.label",{defaultMessage:"TCP Ping"}),value:cn.d.TCP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.title",{defaultMessage:"TCP Ping"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.tcp.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-lightweight.html",icon:"online",beta:!1},[cn.d.ICMP]:{id:"syntheticsMonitorTypeICMP","data-test-subj":"syntheticsMonitorTypeICMP",label:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.label",{defaultMessage:"ICMP Ping"}),value:cn.d.ICMP,descriptionTitle:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.title",{defaultMessage:"ICMP Ping"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.icmp.description",{defaultMessage:"A lightweight API check to validate the availability of a web service or endpoint."}),link:"https://www.elastic.co/guide/en/observability/current/synthetics-lightweight.html",icon:"online",beta:!1}},lk=e=>{var t,a,n;return{[cn.b.FORM_MONITOR_TYPE]:{fieldKey:cn.b.FORM_MONITOR_TYPE,required:!0,component:AS,ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.label",{defaultMessage:"Monitor type"}),controlled:!0,props:({field:e,reset:t,space:a})=>({onChange:(e,n)=>{const r=$S(a)[n];t(r)},selectedOption:null==e?void 0:e.value,options:Object.values(ok)}),validation:()=>({required:!0})},urls__single:{fieldKey:cn.b.URLS,required:!0,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.urlsSingle.label",{defaultMessage:"Website URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.urlsSingle.helpText",{defaultMessage:"For example, https://www.elastic.co."}),controlled:!0,dependencies:[cn.b.NAME],props:({setValue:t,dependenciesFieldMeta:a,isEdit:n,trigger:r})=>({"data-test-subj":"syntheticsMonitorConfigURL",onChange:async e=>{t(cn.b.URLS,e.target.value,{shouldTouch:!0}),a[cn.b.NAME].isDirty||n||t(cn.b.NAME,e.target.value,{shouldTouch:!0}),await r()},readOnly:e})},urls__http:{fieldKey:cn.b.URLS,required:!0,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.urls.label",{defaultMessage:"URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.urls.helpText",{defaultMessage:"For example, your service endpoint."}),controlled:!0,dependencies:[cn.b.NAME],props:({setValue:t,trigger:a,dependenciesFieldMeta:n,isEdit:r})=>({onChange:async e=>{t(cn.b.URLS,e.target.value,{shouldTouch:!0}),n[cn.b.NAME].isDirty||r||(t(cn.b.NAME,e.target.value,{shouldTouch:!0}),await a())},"data-test-subj":"syntheticsMonitorConfigURL",readOnly:e})},hosts__tcp:{fieldKey:cn.b.HOSTS,required:!0,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.hostsTCP.label",{defaultMessage:"Host:Port"}),controlled:!0,dependencies:[cn.b.NAME],props:({setValue:t,trigger:a,dependenciesFieldMeta:n,isEdit:r})=>({onChange:async e=>{t(cn.b.HOSTS,e.target.value,{shouldTouch:!0}),n[cn.b.NAME].isDirty||r||t(cn.b.NAME,e.target.value,{shouldTouch:!0}),await a()},"data-test-subj":"syntheticsMonitorConfigHost",readOnly:e})},hosts__icmp:{fieldKey:cn.b.HOSTS,required:!0,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.hostsICMP.label",{defaultMessage:"Host"}),controlled:!0,dependencies:[cn.b.NAME],props:({setValue:t,trigger:a,dependenciesFieldMeta:n,isEdit:r})=>({onChange:async e=>{t(cn.b.HOSTS,e.target.value,{shouldTouch:!0}),n[cn.b.NAME].isDirty||r||t(cn.b.NAME,e.target.value,{shouldTouch:!0}),await a()},"data-test-subj":"syntheticsMonitorConfigHost",readOnly:e})},[cn.b.NAME]:{fieldKey:cn.b.NAME,required:!0,component:wS,controlled:!0,label:o.i18n.translate("xpack.synthetics.monitorConfig.name.label",{defaultMessage:"Monitor name"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.name.helpText",{defaultMessage:"Choose a name to help identify this monitor in the future."}),dependencies:[cn.b.URLS,cn.b.HOSTS],customHook:e=>({fieldKey:"nameAlreadyExists",func:Sm,params:{search:e},error:o.i18n.translate("xpack.synthetics.monitorConfig.name.existsError",{defaultMessage:"Monitor name already exists"})}),validation:()=>({validate:{notEmpty:e=>!!Boolean(e.trim())||o.i18n.translate("xpack.synthetics.monitorConfig.name.error",{defaultMessage:"Monitor name is required"})}}),error:o.i18n.translate("xpack.synthetics.monitorConfig.name.error",{defaultMessage:"Monitor name is required"}),props:()=>({"data-test-subj":"syntheticsMonitorConfigName",readOnly:e})},"schedule.number":{fieldKey:"schedule.number",required:!0,component:jS,label:o.i18n.translate("xpack.synthetics.monitorConfig.frequency.label",{defaultMessage:"Frequency"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.frequency.helpText",{defaultMessage:"How often do you want to run this test? Higher frequencies will increase your total cost."}),props:({formState:t})=>{var a;return{"data-test-subj":"syntheticsMonitorConfigSchedule",options:sk(null===(a=t.defaultValues)||void 0===a?void 0:a[cn.b.MONITOR_TYPE]),disabled:e}}},[cn.b.LOCATIONS]:{fieldKey:cn.b.LOCATIONS,required:!0,controlled:!0,component:RS,label:o.i18n.translate("xpack.synthetics.monitorConfig.locations.label",{defaultMessage:"Locations"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.locations.helpText",{defaultMessage:"Where do you want to run this test from? Additional locations will increase your total cost."}),props:({field:t,setValue:a,locations:n,trigger:i})=>({options:Object.values(n).map((e=>({label:e.label,id:e.id,isServiceManaged:e.isServiceManaged||!1,isInvalid:e.isInvalid,disabled:e.isInvalid}))),selectedOptions:Object.values((null==t?void 0:t.value)||{}).map((e=>{var t,a;return{color:e.isInvalid||!n.some((t=>t.id===e.id))?"danger":e.isServiceManaged?"default":"primary",label:null!==(t=e.label||(null==n||null===(a=n.find((t=>e.id===t.id)))||void 0===a?void 0:a.label))&&void 0!==t?t:e.id,id:e.id||"",isServiceManaged:e.isServiceManaged||!1}})),"data-test-subj":"syntheticsMonitorConfigLocations",onChange:async e=>{const t=e.map((({id:e,label:t,isServiceManaged:a})=>({id:e,label:t,isServiceManaged:a})));a(cn.b.LOCATIONS,t),await i(cn.b.LOCATIONS)},isDisabled:e,renderOption:(e,t)=>r.a.createElement(y.EuiToolTip,{anchorProps:{style:{width:"100%"}},content:e.isInvalid?o.i18n.translate("xpack.synthetics.monitorConfig.locations.attachedPolicy",{defaultMessage:"The attached agent policy for this location has been deleted."}):""},r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiHighlight,{search:t},e.label)),e.isInvalid&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiBadge,{color:"danger"},o.i18n.translate("xpack.synthetics.monitorConfig.locations.invalid",{defaultMessage:"Invalid"}))),!e.isServiceManaged&&r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiBadge,{color:"primary"},o.i18n.translate("xpack.synthetics.monitorConfig.locations.private",{defaultMessage:"Private"})))))})},[cn.b.ENABLED]:{fieldKey:cn.b.ENABLED,component:_S,controlled:!0,helpText:o.i18n.translate("xpack.synthetics.monitorConfig.edit.enabled.label",{defaultMessage:"When disabled, the monitor doesn't run any tests. You can enable it at any time."}),props:({setValue:t,field:a,trigger:n,formState:r})=>{var i;const s=(null===(i=r.defaultValues)||void 0===i?void 0:i[cn.b.MONITOR_SOURCE_TYPE])===cn.l.PROJECT;return{id:"syntheticsMontiorConfigIsEnabled",label:o.i18n.translate("xpack.synthetics.monitorConfig.enabled.label",{defaultMessage:"Enable Monitor"}),checked:(null==a?void 0:a.value)||!1,onChange:async e=>{t(cn.b.ENABLED,!!e.target.checked),await n(cn.b.ENABLED)},"data-test-subj":"syntheticsEnableSwitch",disabled:!s&&e}}},[un.c.STATUS_ENABLED]:{fieldKey:un.c.STATUS_ENABLED,component:_S,controlled:!0,props:({setValue:t,field:a,trigger:n,formState:r})=>{var i;const s=(null===(i=r.defaultValues)||void 0===i?void 0:i[cn.b.MONITOR_SOURCE_TYPE])===cn.l.PROJECT;return{id:"syntheticsMonitorConfigIsAlertEnabled",label:o.i18n.translate("xpack.synthetics.monitorConfig.disabledAlerting.label",{defaultMessage:"Enable status alerts on this monitor"}),checked:(null==a?void 0:a.value)||!1,onChange:async e=>{t(un.c.STATUS_ENABLED,!!e.target.checked),await n(un.c.STATUS_ENABLED)},"data-test-subj":"syntheticsAlertStatusSwitch",disabled:!s&&e}}},[un.c.TLS_ENABLED]:{fieldKey:un.c.TLS_ENABLED,component:_S,controlled:!0,props:({setValue:t,field:a,trigger:n,formState:r})=>{var i;const s=(null===(i=r.defaultValues)||void 0===i?void 0:i[cn.b.MONITOR_SOURCE_TYPE])===cn.l.PROJECT;return{id:"syntheticsMonitorConfigIsTlsAlertEnabled",label:o.i18n.translate("xpack.synthetics.monitorConfig.create.alertTlsEnabled.label",{defaultMessage:"Enable TLS alerts on this monitor."}),checked:(null==a?void 0:a.value)||!1,onChange:async e=>{t(un.c.TLS_ENABLED,!!e.target.checked),await n(un.c.TLS_ENABLED)},"data-test-subj":"syntheticsAlertStatusSwitch",disabled:!s&&e}}},[cn.b.TAGS]:{fieldKey:cn.b.TAGS,component:LS,label:o.i18n.translate("xpack.synthetics.monitorConfig.tags.label",{defaultMessage:"Tags"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.tags.helpText",{defaultMessage:"A list of tags that will be sent with each monitor event. Useful for searching and segmenting data."}),controlled:!0,props:({field:t})=>({selectedOptions:(null==t?void 0:t.value)||[],isDisabled:e})},[cn.b.TIMEOUT]:{fieldKey:cn.b.TIMEOUT,component:OS,label:o.i18n.translate("xpack.synthetics.monitorConfig.timeout.label",{defaultMessage:"Timeout in seconds"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.timeout.helpText",{defaultMessage:"The total time allowed for testing the connection and exchanging data."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigTimeout",min:1,step:"any",readOnly:e}),dependencies:[cn.b.SCHEDULE],validation:([e])=>({validate:{validTimeout:t=>{switch(!0){case t<0:return o.i18n.translate("xpack.synthetics.monitorConfig.timeout.greaterThan0Error",{defaultMessage:"Timeout must be greater than or equal to 0."});case t>60*parseFloat(e.number):return o.i18n.translate("xpack.synthetics.monitorConfig.timeout.scheduleError",{defaultMessage:"Timeout must be less than the monitor frequency."});case!Boolean(`${t}`.match(YS)):return o.i18n.translate("xpack.synthetics.monitorConfig.timeout.formatError",{defaultMessage:"Timeout is invalid."});default:return!0}}}})},[cn.b.APM_SERVICE_NAME]:{fieldKey:cn.b.APM_SERVICE_NAME,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.apmServiceName.label",{defaultMessage:"APM service name"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.apmServiceName.helpText",{defaultMessage:"Corresponds to the service.name ECS field from APM. Set this to enable integrations between APM and Synthetics data."}),controlled:!0,props:()=>({"data-test-subj":"syntheticsMonitorConfigAPMServiceName",readOnly:e})},[cn.b.NAMESPACE]:{fieldKey:cn.b.NAMESPACE,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.namespace.label",{defaultMessage:"Data stream namespace"}),helpText:r.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.namespace.helpText",{defaultMessage:"Change the default namespace. This setting changes the name of the monitor's data stream. "}),r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsFIELDLearnMoreLink",href:"https://www.elastic.co/guide/en/fleet/current/data-streams.html",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.namespace.learnMore",{defaultMessage:"Learn more"}))),controlled:!0,props:()=>({readOnly:e}),validation:()=>({validate:{validNamespace:e=>Object(Ox.isValidNamespace)(e).error}})},[cn.b.MAX_REDIRECTS]:{fieldKey:cn.b.MAX_REDIRECTS,component:OS,label:o.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.label",{defaultMessage:"Max redirects"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.helpText",{defaultMessage:"The total number of redirects to follow."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigMaxRedirects",min:0,max:10,step:1,readOnly:e}),validation:()=>({min:0,max:10,pattern:KS}),error:o.i18n.translate("xpack.synthetics.monitorConfig.maxRedirects.error",{defaultMessage:"Max redirects is invalid."})},[cn.b.WAIT]:{fieldKey:cn.b.WAIT,component:OS,label:o.i18n.translate("xpack.synthetics.monitorConfig.wait.label",{defaultMessage:"Wait"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.wait.helpText",{defaultMessage:"The duration to wait before emitting another ICMP Echo Request if no response is received."}),props:()=>({"data-test-subj":"syntheticsMonitorConfigWait",min:1,step:1,readOnly:e}),validation:()=>({min:1,pattern:KS}),error:o.i18n.translate("xpack.synthetics.monitorConfig.wait.error",{defaultMessage:"Wait duration is invalid."})},[cn.b.USERNAME]:{fieldKey:cn.b.USERNAME,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.username.label",{defaultMessage:"Username"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.username.helpText",{defaultMessage:"Username for authenticating with the server."}),props:()=>({readOnly:e})},[cn.b.PASSWORD]:{fieldKey:cn.b.PASSWORD,component:CS,label:o.i18n.translate("xpack.synthetics.monitorConfig.password.label",{defaultMessage:"Password"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.password.helpText",{defaultMessage:"Password for authenticating with the server."}),props:()=>({readOnly:e})},[cn.b.PROXY_URL]:{fieldKey:cn.b.PROXY_URL,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.proxyUrl.label",{defaultMessage:"Proxy URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.proxyUrl.helpText",{defaultMessage:"HTTP proxy URL"}),props:()=>({readOnly:e})},[cn.b.REQUEST_METHOD_CHECK]:{fieldKey:cn.b.REQUEST_METHOD_CHECK,component:jS,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestMethod.label",{defaultMessage:"Request method"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestMethod.helpText",{defaultMessage:"The HTTP method to use."}),props:()=>({options:Object.keys(cn.e).map((e=>({value:e,text:e}))),disabled:e})},[cn.b.REQUEST_HEADERS_CHECK]:{fieldKey:cn.b.REQUEST_HEADERS_CHECK,component:NS,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.label",{defaultMessage:"Request headers"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.helpText",{defaultMessage:"A dictionary of additional HTTP headers to send. By default the client will set the User-Agent header to identify itself."}),controlled:!0,validation:()=>({validate:{validHeaders:e=>!XS(e)||o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.error",{defaultMessage:"Header key must be a valid HTTP token."})}}),dependencies:[cn.b.REQUEST_BODY_CHECK],error:o.i18n.translate("xpack.synthetics.monitorConfig.requestHeaders.error",{defaultMessage:"Header key must be a valid HTTP token."}),props:({dependencies:t})=>{const[a]=t;return{"data-test-subj":"syntheticsHeaderFieldRequestHeaders",readOnly:e,contentMode:null!=a&&a.value?a.type:void 0}}},[cn.b.REQUEST_BODY_CHECK]:{fieldKey:cn.b.REQUEST_BODY_CHECK,component:BS,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestBody.label",{defaultMessage:"Request body"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestBody.helpText",{defaultMessage:"Request body content."}),controlled:!0,props:()=>({readOnly:e})},[cn.b.RESPONSE_HEADERS_INDEX]:{fieldKey:cn.b.RESPONSE_HEADERS_INDEX,component:IS,helpText:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseHeaders.helpText",defaultMessage:"Controls the indexing of the HTTP response headers to "}),r.a.createElement(y.EuiCode,null,"http.response.body.headers")),props:()=>({label:o.i18n.translate("xpack.synthetics.monitorConfig.indexResponseHeaders.label",{defaultMessage:"Index response headers"}),id:"syntheticsMonitorConfigResponseHeadersIndex",disabled:e}),controlled:!0},[cn.b.RESPONSE_BODY_INDEX]:{fieldKey:cn.b.RESPONSE_BODY_INDEX,component:HS,helpText:r.a.createElement(r.a.Fragment,null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.indexResponseBody.helpText",defaultMessage:"Controls the indexing of the HTTP response body contents to"}),r.a.createElement(y.EuiCode,null,"http.response.body.contents")),props:()=>({readOnly:e}),controlled:!0},[cn.b.RESPONSE_STATUS_CHECK]:{fieldKey:cn.b.RESPONSE_STATUS_CHECK,component:LS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.label",{defaultMessage:"Response status equals"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.helpText",{defaultMessage:"A list of expected status codes. Press enter to add a new code. 4xx and 5xx codes are considered down by default. Other codes are considered up."}),controlled:!0,props:({field:t})=>({selectedOptions:null==t?void 0:t.value,isDisabled:e}),validation:()=>({validate:{validResponseStatusCheck:e=>{const t=rk[cn.h.HTTP][cn.b.RESPONSE_STATUS_CHECK];if(t)return!t({[cn.b.RESPONSE_STATUS_CHECK]:e})}}}),error:o.i18n.translate("xpack.synthetics.monitorConfig.responseStatusCheck.error",{defaultMessage:"Status code must contain digits only."})},[cn.b.RESPONSE_HEADERS_CHECK]:{fieldKey:cn.b.RESPONSE_HEADERS_CHECK,component:NS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.label",{defaultMessage:"Response headers contain"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.helpText",{defaultMessage:"A list of expected response headers."}),controlled:!0,validation:()=>({validate:{validHeaders:e=>!XS(e)||o.i18n.translate("xpack.synthetics.monitorConfig.responseHeadersCheck.error",{defaultMessage:"Header key must be a valid HTTP token."})}}),props:()=>({"data-test-subj":"syntheticsHeaderFieldResponseHeaders",readOnly:e})},[cn.b.RESPONSE_BODY_CHECK_POSITIVE]:{fieldKey:cn.b.RESPONSE_BODY_CHECK_POSITIVE,component:LS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheck.label",{defaultMessage:"Response body contains"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheck.helpText",{defaultMessage:"A list of regular expressions to match the body output. Press enter to add a new expression. Only a single expression needs to match."}),controlled:!0,props:({field:t})=>({selectedOptions:null==t?void 0:t.value,isDisabled:e})},[cn.b.RESPONSE_BODY_CHECK_NEGATIVE]:{fieldKey:cn.b.RESPONSE_BODY_CHECK_NEGATIVE,component:LS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheckNegative.label",{defaultMessage:"Response body does not contain"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyCheckNegative.helpText",{defaultMessage:"A list of regular expressions to match the the body output negatively. Press enter to add a new expression. Return match failed if single expression matches."}),controlled:!0,props:({field:t})=>({selectedOptions:null==t?void 0:t.value,isDisabled:e})},[cn.b.RESPONSE_RECEIVE_CHECK]:{fieldKey:cn.b.RESPONSE_RECEIVE_CHECK,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseReceiveCheck.label",{defaultMessage:"Response contains"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseReceiveCheck.helpText",{defaultMessage:"The expected remote host response."}),props:()=>({readOnly:e})},proxy_url__tcp:{fieldKey:cn.b.PROXY_URL,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.proxyURLTCP.label",{defaultMessage:"Proxy URL"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.proxyURLTCP.helpText",{defaultMessage:"The URL of the SOCKS5 proxy to use when connecting to the server. The value must be a URL with a scheme of socks5://."}),props:()=>({readOnly:e})},[cn.b.REQUEST_SEND_CHECK]:{fieldKey:cn.b.REQUEST_SEND_CHECK,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.requestSendCheck.label",{defaultMessage:"Request payload"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.requestSendCheck.helpText",{defaultMessage:"A payload string to send to the remote host."}),props:()=>({readOnly:e})},"source.inline":{fieldKey:"source.inline",required:!0,component:FS,ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.label",{defaultMessage:"Monitor script"}),controlled:!0,props:({isEdit:e})=>({isEditFlow:e}),validation:()=>({validate:{validScript:e=>{var t,a,n,r;return e.script?null!==(t=e.script)&&void 0!==t&&t.includes("import ")||null!==(a=e.script)&&void 0!==a&&a.includes("require(")||null!==(n=e.script)&&void 0!==n&&n.includes("journey(")?o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.invalid",{defaultMessage:"Monitor script is invalid. Inline scripts cannot be full journey scripts, they may only contain step definitions."}):!(e.script&&(null===(r=e.script)||void 0===r||!r.includes("step(")))||o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.invalid.oneStep",{defaultMessage:"Monitor script is invalid. Inline scripts must contain at least one step definition."}):o.i18n.translate("xpack.synthetics.monitorConfig.monitorScript.error",{defaultMessage:"Monitor script is required"})}}})},[cn.b.PARAMS]:{fieldKey:cn.b.PARAMS,label:o.i18n.translate("xpack.synthetics.monitorConfig.params.label",{defaultMessage:"Parameters"}),controlled:!0,component:DS,props:()=>({id:"syntheticsMonitorConfigParams",height:"100px",ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.paramsAria.label",{defaultMessage:"Monitor params code editor"}),readOnly:e}),helpText:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.params.helpText",defaultMessage:"Use JSON to define parameters that can be referenced in your script with {paramsValue}",values:{paramsValue:r.a.createElement(y.EuiCode,null,"params.value")}}),validation:()=>({validate:{validParams:e=>{const t=rk[cn.h.BROWSER][cn.b.PARAMS];return!t||!t({[cn.b.PARAMS]:e})||o.i18n.translate("xpack.synthetics.monitorConfig.params.error",{defaultMessage:"Invalid JSON format"})}}})},isTLSEnabled:{fieldKey:"isTLSEnabled",component:_S,controlled:!0,props:({setValue:t,field:a})=>({id:"syntheticsMontiorConfigIsTLSEnabledSwitch",label:o.i18n.translate("xpack.synthetics.monitorConfig.customTLS.label",{defaultMessage:"Use custom TLS configuration"}),checked:(null==a?void 0:a.value)||!1,onChange:e=>{t("isTLSEnabled",e.target.checked)},disabled:e})},[cn.b.TLS_VERIFICATION_MODE]:{fieldKey:cn.b.TLS_VERIFICATION_MODE,component:jS,label:o.i18n.translate("xpack.synthetics.monitorConfig.verificationMode.label",{defaultMessage:"Verification mode"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.verificationMode.helpText",{defaultMessage:"Verifies that the provided certificate is signed by a trusted authority (CA) and also verifies that the servers hostname (or IP address) matches the names identified within the certificate. If the Subject Alternative Name is empty, it returns an error."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({options:Object.values(cn.n).map((e=>({value:e,text:e.toUpperCase()}))),disabled:e})},[cn.b.TLS_VERSION]:{fieldKey:cn.b.TLS_VERSION,component:RS,label:o.i18n.translate("xpack.synthetics.monitorConfig.tlsVersion.label",{defaultMessage:"Supported TLS protocols"}),controlled:!0,hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:({field:t,setValue:a,trigger:n})=>({options:Object.values(cn.m).map((e=>({label:e}))),selectedOptions:Object.values((null==t?void 0:t.value)||[]).map((e=>({label:e}))),onChange:async e=>{a(cn.b.TLS_VERSION,e.map((e=>e.label))),await n(cn.b.TLS_VERSION)},isDisabled:e})},[cn.b.TLS_CERTIFICATE_AUTHORITIES]:{fieldKey:cn.b.TLS_CERTIFICATE_AUTHORITIES,component:TS,label:o.i18n.translate("xpack.synthetics.monitorConfig.certificateAuthorities.label",{defaultMessage:"Certificate authorities"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.certificateAuthorities.helpText",{defaultMessage:"PEM-formatted custom certificate authorities."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[cn.b.TLS_CERTIFICATE]:{fieldKey:cn.b.TLS_CERTIFICATE,component:TS,label:o.i18n.translate("xpack.synthetics.monitorConfig.clientCertificate.label",{defaultMessage:"Client certificate"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.clientCertificate.helpText",{defaultMessage:"PEM-formatted certificate for TLS client authentication."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[cn.b.TLS_KEY]:{fieldKey:cn.b.TLS_KEY,component:TS,label:o.i18n.translate("xpack.synthetics.monitorConfig.clientKey.label",{defaultMessage:"Client key"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.clientKey.helpText",{defaultMessage:"PEM-formatted certificate key for TLS client authentication."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[cn.b.TLS_KEY_PASSPHRASE]:{fieldKey:cn.b.TLS_KEY_PASSPHRASE,component:CS,label:o.i18n.translate("xpack.synthetics.monitorConfig.clientKeyPassphrase.label",{defaultMessage:"Client key passphrase"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.clientKeyPassphrase.helpText",{defaultMessage:"Certificate key passphrase for TLS client authentication."}),hidden:e=>{const[t]=e;return!Boolean(t)},dependencies:["isTLSEnabled"],props:()=>({readOnly:e})},[cn.b.SCREENSHOTS]:{fieldKey:cn.b.SCREENSHOTS,component:PS,label:o.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.label",{defaultMessage:"Screenshot options"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.helpText",{defaultMessage:"Set this option to manage the screenshots captured by the synthetics agent."}),controlled:!0,props:({field:t,setValue:a})=>({idSelected:null==t?void 0:t.value,onChange:e=>a(cn.b.SCREENSHOTS,e),options:Object.values(cn.k).map((e=>({id:e,label:e.replace(/-/g," ")}))),legend:o.i18n.translate("xpack.synthetics.monitorConfig.screenshotOptions.label",{defaultMessage:"Screenshot options"}),css:{textTransform:"capitalize"},isDisabled:e})},[cn.b.TEXT_ASSERTION]:{fieldKey:cn.b.TEXT_ASSERTION,component:wS,label:o.i18n.translate("xpack.synthetics.monitorConfig.textAssertion.label",{defaultMessage:"Text assertion"}),required:!1,helpText:o.i18n.translate("xpack.synthetics.monitorConfig.textAssertion.helpText",{defaultMessage:"Consider the page loaded when the specified text is rendered."}),validation:()=>({required:!1}),props:()=>({readOnly:e})},[cn.b.THROTTLING_CONFIG]:{fieldKey:cn.b.THROTTLING_CONFIG,component:GS,label:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.throttlingDisabled.label",defaultMessage:"Connection profile ( {icon} Important information about throttling: {link})",values:{icon:r.a.createElement(y.EuiIcon,{type:"alert",color:"warning",size:"s"}),link:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsFIELDNoticeLink",href:"https://github.com/elastic/synthetics/blob/main/docs/throttling.md",target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.throttlingDisabled.link",{defaultMessage:"notice"}))}}),required:!0,controlled:!0,helpText:o.i18n.translate("xpack.synthetics.monitorConfig.throttling.helpText",{defaultMessage:"Simulate network throttling (download, upload, latency)."}),props:({formState:t})=>{var a;return{options:Ux,readOnly:e,disabled:!1,initialValue:null===(a=t.defaultValues)||void 0===a?void 0:a[cn.b.THROTTLING_CONFIG]}},validation:()=>({required:!0})},[cn.b.PLAYWRIGHT_OPTIONS]:{fieldKey:cn.b.PLAYWRIGHT_OPTIONS,component:DS,label:o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.label",{defaultMessage:"Playwright options"}),helpText:r.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.helpText",{defaultMessage:"Configure Playwright agent with custom options. "}),r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsFIELDLearnMoreLink",href:null===(t=Object(VS.a)())||void 0===t||null===(a=t.links)||void 0===a||null===(n=a.observability)||void 0===n?void 0:n.syntheticsCommandReference,target:"_blank"},o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.learnMore",{defaultMessage:"Learn more"}))),ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.codeEditor.json.ariaLabel",{defaultMessage:"Playwright options JSON code editor"}),controlled:!0,required:!1,props:()=>({ariaLabel:o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.codeEditor.json.ariaLabel",{defaultMessage:"Playwright options JSON code editor"}),readOnly:e,id:"syntheticsPlaywrightOptionsJSONCodeEditor"}),validation:()=>({validate:{validPlaywrightOptions:e=>{const t=rk[cn.h.BROWSER][cn.b.PLAYWRIGHT_OPTIONS];return!t||!t({[cn.b.PLAYWRIGHT_OPTIONS]:e})||o.i18n.translate("xpack.synthetics.monitorConfig.playwrightOptions.error",{defaultMessage:"Invalid JSON format"})}}})},[cn.b.IGNORE_HTTPS_ERRORS]:{fieldKey:cn.b.IGNORE_HTTPS_ERRORS,component:_S,controlled:!0,helpText:r.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.ignoreHttpsErrors.helpText",{defaultMessage:"Turns off TLS/SSL validation in the synthetics browser. This is useful for testing sites that use self-signed certificates."})),props:({setValue:t})=>({id:"syntheticsMontiorConfigIgnoreHttpsErrors",label:o.i18n.translate("xpack.synthetics.monitorConfig.ignoreHttpsErrors.label",{defaultMessage:"Ignore HTTPS errors"}),onChange:e=>{t(cn.b.IGNORE_HTTPS_ERRORS,!!e.target.checked)},disabled:e})},[cn.b.SYNTHETICS_ARGS]:{fieldKey:cn.b.SYNTHETICS_ARGS,component:RS,controlled:!0,label:o.i18n.translate("xpack.synthetics.monitorConfig.syntheticsArgs.label",{defaultMessage:"Synthetics args"}),helpText:r.a.createElement("span",null,o.i18n.translate("xpack.synthetics.monitorConfig.syntheticsArgs.helpText",{defaultMessage:"Extra arguments to pass to the synthetics agent package. Takes a list of strings. This is useful in rare scenarios, and should not ordinarily need to be set."})),props:({setValue:t,field:a,trigger:n})=>({id:"syntheticsMontiorConfigSyntheticsArgs",selectedOptions:Object.values((null==a?void 0:a.value)||[]).map((e=>({label:e}))),onChange:async e=>{t(cn.b.SYNTHETICS_ARGS,e.map((e=>e.label))),await n(cn.b.SYNTHETICS_ARGS)},onCreateOption:e=>{t(cn.b.SYNTHETICS_ARGS,[...(null==a?void 0:a.value)||[],e])},isDisabled:e})},[cn.b.MODE]:{fieldKey:cn.b.MODE,component:jS,label:o.i18n.translate("xpack.synthetics.monitorConfig.mode.label",{defaultMessage:"Mode"}),helpText:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.syntheticsArgs.mode.helpText",defaultMessage:"If {any}, the monitor pings only one IP address for a hostname. If {all}, the monitor pings all resolvable IPs for a hostname. {all} is useful if you are using a DNS-load balancer and want to ping every IP address for the specified hostname.",values:{all:r.a.createElement(y.EuiCode,null,"all"),any:r.a.createElement(y.EuiCode,null,"any")}}),props:()=>({options:Object.values(cn.f).map((e=>({value:e,text:e}))),disabled:e})},[cn.b.RESPONSE_BODY_MAX_BYTES]:{fieldKey:cn.b.RESPONSE_BODY_MAX_BYTES,component:OS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyMaxBytes.label",{defaultMessage:"Response body max bytes"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseBodyMaxBytes.helpText",{defaultMessage:"Controls the maximum size of the stored body contents."}),hidden:e=>{const[t]=e||[];return t===cn.i.NEVER},props:()=>({"data-test-subj":"syntheticsMonitorConfigMaxBytes",min:1,step:"any",readOnly:e}),dependencies:[cn.b.RESPONSE_BODY_INDEX]},[cn.b.IPV4]:{fieldKey:cn.b.IPV4,component:RS,label:o.i18n.translate("xpack.synthetics.monitorConfig.ipv4.label",{defaultMessage:"IP protocols"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.ipv4.helpText",{defaultMessage:"IP protocols to use when pinging the remote host."}),controlled:!0,dependencies:[cn.b.IPV6],props:({field:t,setValue:a,trigger:n,dependencies:r})=>{const[i]=r,s=[];return(null==t?void 0:t.value)&&s.push("IPv4"),i&&s.push("IPv6"),{options:[{label:"IPv4"},{label:"IPv6"}],selectedOptions:s.map((e=>({label:e}))),onChange:async e=>{a(cn.b.IPV4,e.some((e=>"IPv4"===e.label))),a(cn.b.IPV6,e.some((e=>"IPv6"===e.label))),await n([cn.b.IPV4,cn.b.IPV4])},isDisabled:e}}},[cn.b.PROXY_HEADERS]:{fieldKey:cn.b.PROXY_HEADERS,component:NS,label:o.i18n.translate("xpack.synthetics.monitorConfig.proxyHeaders.label",{defaultMessage:"Proxy headers"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.proxyHeaders.helpText",{defaultMessage:"Additional headers to send to proxies for CONNECT requests."}),controlled:!0,validation:()=>({validate:{validHeaders:e=>!XS(e)||o.i18n.translate("xpack.synthetics.monitorConfig.proxyHeaders.error",{defaultMessage:"The header key must be a valid HTTP token."})}}),props:()=>({"data-test-subj":"syntheticsHeaderFieldProxyHeaders",readOnly:e})},"check.response.json":{fieldKey:cn.b.RESPONSE_JSON_CHECK,component:zS,label:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.label",{defaultMessage:"Response body contains JSON"}),helpText:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.helpText",{defaultMessage:"A list of expressions executed against the body when parsed as JSON. The body size must be less than or equal to 100 MiB."}),controlled:!0,props:({field:t,setValue:a,trigger:n})=>({readOnly:e,keyLabel:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.key.label",{defaultMessage:"Description"}),valueLabel:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.value.label",{defaultMessage:"Expression"}),addPairControlLabel:o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.addPair.label",{defaultMessage:"Add expression"}),onChange:async e=>{const r=e.map((e=>{const[t,a]=e;return{description:t,expression:a}})).filter((e=>e.description||e.expression));Object(ln.isEqual)(r,null==t?void 0:t.value)||(a(cn.b.RESPONSE_JSON_CHECK,r),await n(cn.b.RESPONSE_JSON_CHECK))},defaultPairs:(null==t?void 0:t.value.map((e=>[e.description,e.expression])))||[]}),validation:()=>({validate:{validBodyJSON:e=>!e.some((e=>!e.expression||!e.description))||o.i18n.translate("xpack.synthetics.monitorConfig.responseJSON.error",{defaultMessage:"This JSON expression isn't valid. Make sure that both the label and expression are defined."})}})},[cn.b.MAX_ATTEMPTS]:{fieldKey:cn.b.MAX_ATTEMPTS,component:_S,controlled:!0,props:({setValue:t,field:a,trigger:n})=>({disabled:e,id:"syntheticsMonitorConfigMaxAttempts",label:o.i18n.translate("xpack.synthetics.monitorConfig.retest.label",{defaultMessage:"Enable retest on failure"}),checked:2===(null==a?void 0:a.value),onChange:async e=>{const a=!!e.target.checked;t(cn.b.MAX_ATTEMPTS,a?2:1),await n(cn.b.MAX_ATTEMPTS)},"data-test-subj":"syntheticsEnableAttemptSwitch"})}}},ck=e=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.section.dataOptions.title",{defaultMessage:"Data options"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.dataOptions.description",{defaultMessage:"Configure data options to add context to the data coming from your monitors."}),components:[lk(e)[cn.b.TAGS],lk(e)[cn.b.APM_SERVICE_NAME],lk(e)[cn.b.NAMESPACE]]}),uk=e=>({requestConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfiguration.title",{defaultMessage:"Request configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfiguration.description",{defaultMessage:"Configure an optional request to send to the remote host including method, body, and headers."}),components:[lk(e)[cn.b.USERNAME],lk(e)[cn.b.PASSWORD],lk(e)[cn.b.REQUEST_METHOD_CHECK],lk(e)[cn.b.REQUEST_HEADERS_CHECK],lk(e)[cn.b.REQUEST_BODY_CHECK],lk(e)[cn.b.PROXY_URL],lk(e)[cn.b.PROXY_HEADERS],lk(e)[cn.b.MODE],lk(e)[cn.b.IPV4]]},responseConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseConfiguration.title",{defaultMessage:"Response configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseConfiguration.description",{defaultMessage:"Control the indexing of the HTTP response contents."}),components:[lk(e)[cn.b.RESPONSE_HEADERS_INDEX],lk(e)[cn.b.RESPONSE_BODY_INDEX],lk(e)[cn.b.RESPONSE_BODY_MAX_BYTES]]},responseChecks:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecks.title",{defaultMessage:"Response checks"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecks.description",{defaultMessage:"Configure the expected HTTP response."}),components:[lk(e)[cn.b.RESPONSE_STATUS_CHECK],lk(e)[cn.b.RESPONSE_HEADERS_CHECK],lk(e)[cn.b.RESPONSE_BODY_CHECK_POSITIVE],lk(e)[cn.b.RESPONSE_BODY_CHECK_NEGATIVE],lk(e)[cn.b.RESPONSE_JSON_CHECK]]}}),dk=e=>({requestConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigTCP.title",{defaultMessage:"Request configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigTCP.description",{defaultMessage:"Configure the payload sent to the remote host."}),components:[lk(e)[`${cn.b.PROXY_URL}__tcp`],lk(e)[cn.b.REQUEST_SEND_CHECK],lk(e)[cn.b.MODE],lk(e)[cn.b.IPV4]]},responseChecks:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecksTCP.title",{defaultMessage:"Response checks"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.responseChecksTCP.description",{defaultMessage:"Configure the expected response from the remote host."}),components:[lk(e)[cn.b.RESPONSE_RECEIVE_CHECK]]}}),mk=e=>({requestConfig:{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigICMP.title",{defaultMessage:"Request configuration"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.requestConfigICMP.description",{defaultMessage:"Configure the payload sent to the remote host."}),components:[lk(e)[cn.b.MODE],lk(e)[cn.b.IPV4]]}}),pk=e=>[{title:o.i18n.translate("xpack.synthetics.monitorConfig.section.syntAgentOptions.title",{defaultMessage:"Synthetics agent options"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.syntAgentOptions.description",{defaultMessage:"Provide fine-tuned configuration for the synthetics agent."}),components:[lk(e)[cn.b.THROTTLING_CONFIG],lk(e)[cn.b.IGNORE_HTTPS_ERRORS],lk(e)[cn.b.SYNTHETICS_ARGS],lk(e)[cn.b.PLAYWRIGHT_OPTIONS]]}],fk=e=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.section.tlsOptions.title",{defaultMessage:"TLS options"}),description:o.i18n.translate("xpack.synthetics.monitorConfig.section.tlsOptions.description",{defaultMessage:"Configure TLS options, including verification mode, certificate authorities, and client certificates."}),components:[lk(e).isTLSEnabled,lk(e)[cn.b.TLS_VERIFICATION_MODE],lk(e)[cn.b.TLS_VERSION],lk(e)[cn.b.TLS_CERTIFICATE_AUTHORITIES],lk(e)[cn.b.TLS_CERTIFICATE],lk(e)[cn.b.TLS_KEY],lk(e)[cn.b.TLS_KEY_PASSPHRASE]]}),gk=e=>({[cn.d.HTTP]:{step1:[lk(e)[cn.b.FORM_MONITOR_TYPE]],step2:[lk(e)[`${cn.b.URLS}__http`],lk(e)[cn.b.NAME],lk(e)[cn.b.LOCATIONS],lk(e)[`${cn.b.SCHEDULE}.number`],lk(e)[cn.b.MAX_REDIRECTS],lk(e)[cn.b.TIMEOUT],lk(e)[cn.b.ENABLED],lk(e)[cn.b.MAX_ATTEMPTS],lk(e)[un.c.STATUS_ENABLED],lk(e)[un.c.TLS_ENABLED]],advanced:[ck(e),uk(e).requestConfig,uk(e).responseConfig,uk(e).responseChecks,fk(e)]},[cn.d.TCP]:{step1:[lk(e)[cn.b.FORM_MONITOR_TYPE]],step2:[lk(e)[`${cn.b.HOSTS}__tcp`],lk(e)[cn.b.NAME],lk(e)[cn.b.LOCATIONS],lk(e)[`${cn.b.SCHEDULE}.number`],lk(e)[cn.b.TIMEOUT],lk(e)[cn.b.ENABLED],lk(e)[cn.b.MAX_ATTEMPTS],lk(e)[un.c.STATUS_ENABLED],lk(e)[un.c.TLS_ENABLED]],advanced:[ck(e),dk(e).requestConfig,dk(e).responseChecks,fk(e)]},[cn.d.MULTISTEP]:{step1:[lk(e)[cn.b.FORM_MONITOR_TYPE]],step2:[lk(e)[cn.b.NAME],lk(e)[cn.b.LOCATIONS],lk(e)[`${cn.b.SCHEDULE}.number`],lk(e)[cn.b.ENABLED],lk(e)[cn.b.MAX_ATTEMPTS],lk(e)[un.c.STATUS_ENABLED]],step3:[lk(e)["source.inline"],lk(e)[cn.b.PARAMS]],scriptEdit:[lk(e)["source.inline"],lk(e)[cn.b.PARAMS]],advanced:[{...ck(e),components:[lk(e)[cn.b.TAGS],lk(e)[cn.b.APM_SERVICE_NAME],lk(e)[cn.b.SCREENSHOTS],lk(e)[cn.b.NAMESPACE]]},...pk(e)]},[cn.d.SINGLE]:{step1:[lk(e)[cn.b.FORM_MONITOR_TYPE]],step2:[lk(e)[`${cn.b.URLS}__single`],lk(e)[cn.b.NAME],lk(e)[cn.b.TEXT_ASSERTION],lk(e)[cn.b.LOCATIONS],lk(e)[`${cn.b.SCHEDULE}.number`],lk(e)[cn.b.ENABLED],lk(e)[cn.b.MAX_ATTEMPTS],lk(e)[un.c.STATUS_ENABLED]],advanced:[{...ck(e),components:[lk(e)[cn.b.TAGS],lk(e)[cn.b.APM_SERVICE_NAME],lk(e)[cn.b.SCREENSHOTS],lk(e)[cn.b.NAMESPACE]]},...pk(e)]},[cn.d.ICMP]:{step1:[lk(e)[cn.b.FORM_MONITOR_TYPE]],step2:[lk(e)[`${cn.b.HOSTS}__icmp`],lk(e)[cn.b.NAME],lk(e)[cn.b.LOCATIONS],lk(e)[`${cn.b.SCHEDULE}.number`],lk(e)[cn.b.WAIT],lk(e)[cn.b.TIMEOUT],lk(e)[cn.b.ENABLED],lk(e)[cn.b.MAX_ATTEMPTS],lk(e)[un.c.STATUS_ENABLED]],advanced:[ck(e),mk(e).requestConfig]}}),hk=({component:e,props:t,fieldKey:a,field:i,formRowProps:s,error:o,dependenciesValues:l,dependenciesFieldMeta:c,isInvalid:d})=>{const{setValue:m,getFieldState:p,reset:f,formState:g,trigger:h}=Object(sn.useFormContext)(),{locations:E}=Object(u.useSelector)(q.X),{space:v}=fx(),x=mx(),[S,k]=Object(n.useState)(void 0);Object(U.useDebounce)((async()=>{void 0!==S&&await(null==h?void 0:h())}),500,[S]);const M=Object(n.useCallback)((async(...e)=>{"string"!=typeof(null==e?void 0:e[0])||p(a).isTouched||m(a,e[0],{shouldTouch:!0}),i.onChange(...e),k(e)}),[k]),w=t?t({field:i,setValue:m,trigger:h,reset:f,locations:E.map((e=>({...e,key:e.id}))),dependencies:l,dependenciesFieldMeta:c,space:null==v?void 0:v.id,isEdit:x,formState:g}):{};return r.a.createElement(y.EuiFormRow,b()({},s,{isInvalid:d,error:o}),r.a.createElement(e,b()({},i,{checked:i.value||!1,defaultValue:i.value,onChange:M},w,{isInvalid:d,fullWidth:!0})))},bk=Object(n.memo)((({component:e,helpText:t,label:a,ariaLabel:i,props:s,fieldKey:o,controlled:l,required:c,validation:d,error:m,fieldError:p,dependencies:f,customHook:g,hidden:h})=>{const{register:E,control:v,setValue:x,reset:S,formState:k,trigger:M}=Object(sn.useFormContext)(),{locations:w}=Object(u.useSelector)(q.X),{space:T}=fx(),O=mx(),{dependenciesValues:C,dependenciesFieldMeta:I,error:j,isInvalid:_,rules:F}=function({fieldKey:e,validation:t,validationError:a,required:r,dependencies:i,customHook:s}){var o,l,c,u,d;const{getValues:m,formState:p,getFieldState:f,watch:g}=Object(sn.useFormContext)(),h=f(e,p),b=m(e),E=h.error,v=h.isTouched,y=h.invalid,[x,S]=Object(n.useState)({});let k=[];i&&(k=g(i)),Object(n.useEffect)((()=>{i&&i.forEach((e=>{S((t=>({...t,[e]:f(e)})))}))}),[JSON.stringify(k||[]),i,f]);let M,w=()=>{};s&&(M=s(b),w=M.func);const{[null===(o=M)||void 0===o?void 0:o.fieldKey]:T}=w(null===(l=M)||void 0===l?void 0:l.params)||{},O=null===(c=M)||void 0===c?void 0:c.error,C=T?null===(u=M)||void 0===u?void 0:u.error:void 0,{validate:I,...j}=null!==(d=null==t?void 0:t(k))&&void 0!==d?d:{},_={validHook:()=>!C||O,...null!=I?I:{}},F=y&&(v||p.isSubmitted);return{dependenciesValues:k,dependenciesFieldMeta:x,isInvalid:F,error:F?(null==E?void 0:E.message)||a:void 0,rules:{required:r,...null!=j?j:{},validate:_}}}({fieldKey:o,validation:d,dependencies:f,required:null!=c&&c,customHook:g,validationError:m});if(h&&h(C))return null;const P={label:a,"aria-label":i,helpText:t,fullWidth:!0};return l?r.a.createElement(sn.Controller,{control:v,name:o,rules:F,render:({field:t,fieldState:a})=>r.a.createElement(hk,{field:t,component:e,props:s,fieldKey:o,formRowProps:P,fieldState:a,error:j,isInvalid:_,dependenciesValues:C,dependenciesFieldMeta:I})}):r.a.createElement(y.EuiFormRow,b()({},P,{isInvalid:Boolean(p),error:(null==p?void 0:p.message)||j}),r.a.createElement(e,b()({},E(o,F),s?s({field:void 0,formState:k,setValue:x,trigger:M,reset:S,locations:w.map((e=>({...e,key:e.id}))),dependencies:C,dependenciesFieldMeta:I,space:null==T?void 0:T.id,isEdit:O}):{},{isInvalid:_,fullWidth:!0})))})),Ek=({readOnly:e})=>{var t;const{watch:a}=Object(sn.useFormContext)(),[i]=a([cn.b.FORM_MONITOR_TYPE]),s=Object(n.useMemo)((()=>gk(e)[i]),[e,i]);return null!=s&&s.advanced?r.a.createElement(y.EuiPanel,{hasBorder:!0},r.a.createElement(y.EuiAccordion,{id:"syntheticsAdvancedPanel",buttonContent:o.i18n.translate("xpack.synthetics.monitorConfig.advancedOptions.title",{defaultMessage:"Advanced options"})},r.a.createElement(y.EuiSpacer,null),null===(t=s.advanced)||void 0===t?void 0:t.map((e=>r.a.createElement(vk,{description:e.description,title:r.a.createElement("h4",null,e.title),fullWidth:!0,key:e.title,descriptionFlexItemProps:{style:{minWidth:208}},fieldFlexItemProps:{style:{minWidth:208}},style:{flexWrap:"wrap"}},e.components.map((e=>r.a.createElement(bk,b()({},e,{key:e.fieldKey}))))))))):null},vk=G()(y.EuiDescribedFormGroup).withConfig({displayName:"DescribedFormGroup",componentId:"sc-15wghyu-0"})(["> div.euiFlexGroup{flex-wrap:wrap;}"]),yk=({monitorType:e})=>{const t=ok[e];return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,{color:"subdued",size:"s"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.label",{defaultMessage:"Monitor type"})),r.a.createElement(y.EuiText,{size:"s"},r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement("strong",null,t.descriptionTitle)),r.a.createElement(y.EuiFlexItem,{grow:!1},t.beta&&r.a.createElement(y.EuiBetaBadge,{label:"Beta",tooltipContent:o.i18n.translate("xpack.synthetics.monitorConfig.monitorType.betaLabel",{defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Beta features are not subject to the support service level agreement of official generally available features."})})))))},xk=({monitorType:e})=>r.a.createElement(Ml,{node:Hb},r.a.createElement(yk,{monitorType:e})),Sk=({projectId:e})=>e?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiCallOut,{title:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.project.readOnly.callout.title",defaultMessage:"This configuration is read-only"}),iconType:"document"},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.project.readOnly.callout.content",defaultMessage:"This monitor was added from an external project: {projectId}. From this page, you can only enable and disable the monitor and its alerts, or remove it. To make configuration changes, you have to edit its source file and push it again from that project.",values:{projectId:r.a.createElement("strong",null,e)}}))),r.a.createElement(y.EuiSpacer,{size:"m"})):null,kk=({stepMap:e,projectId:t,isEditFlow:a=!1,readOnly:n=!1})=>{const{watch:i,formState:s}=Object(sn.useFormContext)(),[o]=i([cn.b.FORM_MONITOR_TYPE]),l=e[o];return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(Sk,{projectId:t}),a?l.map((e=>r.a.createElement("div",{key:e.title},r.a.createElement(y.EuiPanel,{hasBorder:!0},r.a.createElement(y.EuiText,{size:"s"},r.a.createElement("h2",null,e.title)),r.a.createElement(y.EuiSpacer,{size:"xs"}),e.children),r.a.createElement(y.EuiSpacer,{size:"m"})))):r.a.createElement(y.EuiSteps,{steps:l,headingElement:"h2"}),r.a.createElement(Ek,{readOnly:n}),r.a.createElement(xk,{monitorType:o}),r.a.createElement(Tx,{isValid:s.isValid,monitorFields:mn(i())}))},Mk=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),wk=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage.subtext",{defaultMessage:"It will next run according to its defined schedule."}),Tk=o.i18n.translate("xpack.synthetics.monitorManagement.monitorEditedSuccessMessage",{defaultMessage:"Monitor updated successfully."}),Ok=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),Ck=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage.subtext",{defaultMessage:"It will next run according to its defined schedule."}),Ik=({readOnly:e=!1,canUsePublicLocations:t=!0})=>{var a;const{monitorId:i}=Object(R.useParams)(),s=Object(R.useHistory)(),{handleSubmit:o,formState:{defaultValues:l,isValid:d}}=Object(sn.useFormContext)(),[m,p]=Object(n.useState)(null),[g,h]=Object(n.useState)(void 0),{status:b,loading:E,isEdit:v}=(({monitorData:e})=>{const t=Object(u.useDispatch)(),{refreshApp:a}=X(),{monitorId:i}=Object(R.useParams)(),s=Object(R.useRouteMatch)({path:c.p}),o=null==s?void 0:s.isExact,{data:l,status:d,loading:m,error:p}=Object(f.useFetcher)((()=>{if(e)return o?(async({monitor:e,id:t})=>await VE.a.put(`${c.z.SYNTHETICS_MONITORS}/${t}`,e,null,{ui:!0,version:c.i}))({id:i,monitor:e}):(async({monitor:e})=>await VE.a.post(c.z.SYNTHETICS_MONITORS,e,null,{version:c.i}))({monitor:e})}),[e]);return Object(n.useEffect)((()=>{const{core:e,toasts:n}=N.a;var s;d===f.FETCH_STATUS.FAILURE&&p?n.addError({...p,message:null!==(s=p.body.message)&&void 0!==s?s:p.message},{title:Ok}):d!==f.FETCH_STATUS.SUCCESS||m||(a(),t(Object(q.a)()),n.addSuccess({title:i?Tk:Mk,text:Object(kr.a)(r.a.createElement("p",{"data-test-subj":"synthetcsMonitorSaveSubtext"},i?Ck:wk),e),toastLifeTimeMs:3e3}))}),[l,d,i,m,a,t,p]),{status:d,loading:m,isEdit:o}})({monitorData:g}),x=Gt(),{isServiceAllowed:S}=je();return b===f.FETCH_STATUS.SUCCESS?r.a.createElement(R.Redirect,{to:c.n}):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiFlexGroup,{alignItems:"center",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!0},v&&l&&r.a.createElement("div",null,r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsActionBarButton",color:"danger",onClick:()=>{p(l)},isDisabled:!x||!t},Fk))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsActionBarLink",href:s.createHref({pathname:c.n})},jk)),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(fn,{canUsePublicLocations:t,isServiceAllowed:S})),r.a.createElement(Lk,{grow:!1},r.a.createElement(ia,{canEditSynthetics:x,canUsePublicLocations:t},r.a.createElement(y.EuiButton,{fill:!0,isLoading:E,onClick:o((t=>{d&&h(mn(t,e))})),"data-test-subj":"syntheticsMonitorConfigSubmitButton",disabled:!x||!t||!S},v?Pk:_k)))),m&&r.a.createElement(Kd,{configId:i,name:null!==(a=null==l?void 0:l[cn.b.NAME])&&void 0!==a?a:"",reloadPage:()=>{s.push(c.n)},setMonitorPendingDeletion:p,isProjectMonitor:(null==l?void 0:l[cn.b.MONITOR_SOURCE_TYPE])===cn.l.PROJECT}))},jk=o.i18n.translate("xpack.synthetics.monitorManagement.discardLabel",{defaultMessage:"Cancel"}),_k=o.i18n.translate("xpack.synthetics.monitorManagement.addEdit.createMonitorLabel",{defaultMessage:"Create monitor"}),Fk=o.i18n.translate("xpack.synthetics.monitorManagement.addEdit.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),Pk=o.i18n.translate("xpack.synthetics.monitorManagement.updateMonitorLabel",{defaultMessage:"Update monitor"});var Lk=G()(y.EuiFlexItem).withConfig({displayName:"_StyledEuiFlexItem",componentId:"sc-10gbwct-0"})({marginLeft:"auto"});const Rk=()=>{const{watch:e}=Object(sn.useFormContext)(),[t]=e([cn.b.LOCATIONS]);return t.find((e=>!0===e.isServiceManaged))?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"l"}),r.a.createElement(y.EuiText,{size:"xs",color:"subdued"},r.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorConfig.locations.disclaimer",{defaultMessage:"You consent to the transfer of testing instructions and the output of such instructions (including any data shown therein) to your selected testing location, on infrastructure provided by a cloud service provider chosen by Elastic."})))):null},Dk=({children:e,defaultValues:t,space:a,readOnly:n=!1,canUsePublicLocations:i})=>{const s=iv({mode:"onSubmit",reValidateMode:"onSubmit",defaultValues:US(t)||$S(a)[cn.d.MULTISTEP],shouldFocusError:!1}),{formState:{isSubmitted:o,errors:l,dirtyFields:c}}=s;return r.a.createElement(sn.FormProvider,s,r.a.createElement(y.EuiForm,{isInvalid:Boolean(o&&Object.keys(l).length),component:"form",noValidate:!0},e,r.a.createElement(y.EuiSpacer,null),r.a.createElement(Ik,{readOnly:n,canUsePublicLocations:i})),r.a.createElement(Rk,null))},Ak=()=>r.a.createElement(y.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:r.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.locations.error.label",{defaultMessage:"Unable to load testing locations"})),body:r.a.createElement("p",null,o.i18n.translate("xpack.synthetics.locations.error.content",{defaultMessage:"There was an error loading testing locations. Please try again later."}))}),Nk=({description:e,children:t})=>r.a.createElement(y.EuiFlexGroup,{gutterSize:"s",wrap:!0},r.a.createElement(y.EuiFlexItem,{style:{minWidth:208}},r.a.createElement(y.EuiText,null,e)),r.a.createElement(y.EuiFlexItem,{style:{minWidth:208}},t)),zk=({description:e,stepKey:t,readOnly:a=!1,descriptionOnly:i=!1})=>{var s;const{watch:o,formState:{errors:l}}=Object(sn.useFormContext)(),[c]=o([cn.b.FORM_MONITOR_TYPE]),u=Object(n.useMemo)((()=>gk(a)[c]),[a,c]);return i?r.a.createElement(y.EuiText,{size:"m"},e):r.a.createElement(Nk,{description:e},null===(s=u[t])||void 0===s?void 0:s.map((e=>r.a.createElement(bk,b()({},e,{key:e.fieldKey,fieldError:l[e.fieldKey]})))))},Bk={title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorTypeStep.title",{defaultMessage:"Select a monitor type"}),children:r.a.createElement(zk,{description:r.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorConfig.monitorTypeStep.description",{defaultMessage:"Choose a monitor that best fits your use case"})),stepKey:"step1"})},Hk=(e=!1)=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorDetailsStep.title",{defaultMessage:"Monitor details"}),children:r.a.createElement(zk,{description:r.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorConfig.monitorDetailsStep.description",{defaultMessage:"Provide some details about how your monitor should run"})),stepKey:"step2",readOnly:e})}),Gk=r.a.createElement(y.EuiFlexGroup,{justifyContent:"flexStart",wrap:!0},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsLaunchSyntheticsRecorderButton",href:"elastic-synthetics-recorder://",iconType:"popout",iconSide:"right"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.scriptRecorder.launch",{defaultMessage:"Launch Synthetics Recorder"}))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsDownloadSyntheticsRecorderButton",href:"https://github.com/elastic/synthetics-recorder/blob/main/docs/DOWNLOAD.md",iconType:"download"},o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.scriptRecorder.download",{defaultMessage:"Download Synthetics Recorder"})))),Vk={title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptStep.title",{defaultMessage:"Add a script"}),children:r.a.createElement(zk,{description:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptStep.description",defaultMessage:"Use Elastic Synthetics Recorder to generate a script and then upload it. Alternatively, you can write your own {playwright} script and paste it in the script editor.",values:{playwright:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsPlaywrightLink",href:"https://playwright.dev/",target:"_blank",external:!0},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptStep.playwrightLink",defaultMessage:"Playwright"}))}})),Gk),stepKey:"step3"})},$k=(e=!1)=>({title:o.i18n.translate("xpack.synthetics.monitorConfig.monitorScriptEditStep.title",{defaultMessage:"Monitor script"}),children:r.a.createElement(zk,{description:r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e?r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStepReadOnly.description",defaultMessage:"You can only view and edit the script in the source file of the monitor."}):r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStep.description",defaultMessage:"Use Elastic Synthetics Recorder to generate and upload a script. Alternatively, you can edit the existing {playwright} script (or paste a new one) in the script editor.",values:{playwright:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMONITOR_SCRIPT_STEP_EDITPlaywrightLink",href:"https://playwright.dev/",target:"_blank",external:!0},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.monitorConfig.monitorScriptEditStep.playwrightLink",defaultMessage:"Playwright"}))}})),e?null:Gk),stepKey:"scriptEdit",readOnly:e,descriptionOnly:e})}),Uk={[cn.d.MULTISTEP]:[Bk,Hk(),Vk],[cn.d.SINGLE]:[Bk,Hk()],[cn.d.HTTP]:[Bk,Hk()],[cn.d.ICMP]:[Bk,Hk()],[cn.d.TCP]:[Bk,Hk()]},qk=e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",r=e?{text:Kk,href:`${n}/${c.p}`}:{text:Wk,href:`${n}/${c.o}`};Ie([r])},Wk=o.i18n.translate("xpack.synthetics.monitorManagement.addMonitorCrumb",{defaultMessage:"Add monitor"}),Kk=o.i18n.translate("xpack.synthetics.monitorManagement.editMonitorCrumb",{defaultMessage:"Edit monitor"}),Yk=()=>{Object(f.useTrackPageview)({app:"synthetics",path:"add-monitor"});const{space:e}=fx();Object(f.useTrackPageview)({app:"synthetics",path:"add-monitor",delay:15e3}),qk(),je();const t=Vt(),{data:a,loading:i}=(()=>{const{cloneId:e}=ke();return Object(f.useFetcher)((()=>e?$E({id:e}):Promise.resolve(void 0)),[e])})(),s=Object(u.useDispatch)();Object(n.useEffect)((()=>{s(Object(q.u)())}),[s]);const{locationsLoaded:o,error:l}=Object(u.useSelector)(q.X);return l?r.a.createElement(Ak,null):!o||i?r.a.createElement(dr,null):r.a.createElement(Dk,{space:null==e?void 0:e.id,defaultValues:a?{...a,name:`${a.name} - copy`}:void 0},r.a.createElement(ta,null),r.a.createElement(dx,{canUsePublicLocations:t}),r.a.createElement(kk,{stepMap:Uk}))},Xk=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(Jk,null),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(bm,null)),Jk=()=>{const{packagePolicyId:e}=ke(),t=Me()[1],[a,i]=Object(n.useState)(!1),{data:s,loading:o}=Object(f.useFetcher)((()=>{if(e&&a)return(async e=>await VE.a.delete(c.z.DELETE_PACKAGE_POLICY.replace("{packagePolicyId}",e)))(e)}),[a,e]);return Object(n.useEffect)((()=>{a&&s&&!o&&(t({packagePolicyId:void 0},!0),i(!1))}),[s,a,o,t]),e?r.a.createElement(y.EuiCallOut,{title:"Leftover integration found",color:"warning",iconType:"help"},r.a.createElement("p",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.leftOver.errors.title",defaultMessage:"Please click on the button below to delete the integration. Normally this should not happen. Since the monitor has been deleted, the integration was supposed to be deleted automatically. If this happens often, report it by "}),r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsLeftoverIntegrationFoundCreatingAnIssueLink",href:"https://github.com/elastic/kibana/issues/new/choose"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.leftOver.errors.createIssue",defaultMessage:"creating an issue."}))),r.a.createElement(y.EuiButton,{"data-test-subj":"syntheticsUseMonitorNotFoundDeleteIntegrationButton",color:"danger",isLoading:o&&a,onClick:()=>{i(!0)}},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.leftOver.errors.delete",defaultMessage:"Delete integration"}))):null},Qk=()=>{var e,t;Object(f.useTrackPageview)({app:"synthetics",path:"edit-monitor"}),Object(f.useTrackPageview)({app:"synthetics",path:"edit-monitor",delay:15e3});const{monitorId:a}=Object(R.useParams)();qk(!0);const i=Object(u.useDispatch)(),{locationsLoaded:s,error:l}=Object(u.useSelector)(q.X);Object(n.useEffect)((()=>{s||i(Object(q.u)())}),[s,i]);const{data:c,loading:d,error:m}=Object(f.useFetcher)((()=>$E({id:a})),[]),p=((e,t)=>{var a;const{packagePolicyId:r}=ke(),i=Me()[1];return Object(n.useEffect)((()=>{t&&r&&!e&&i({packagePolicyId:void 0},!0)}),[e,t,r,i]),e?404===(null===(a=e.body)||void 0===a?void 0:a.statusCode):null})(m,null==c?void 0:c.id),g=Vt(null==c?void 0:c[Ge.c.LOCATIONS]);if(p)return r.a.createElement(Xk,null);const h=(null==c?void 0:c[Ge.c.MONITOR_SOURCE_TYPE])===Ge.z.PROJECT||!g,b=null==c?void 0:c[Ge.c.PROJECT_ID];return l?r.a.createElement(Ak,null):m?r.a.createElement(y.EuiEmptyPrompt,{iconType:"warning",color:"danger",title:r.a.createElement("h3",null,o.i18n.translate("xpack.synthetics.monitorEditPage.error.label",{defaultMessage:"Unable to load monitor configuration"})),body:r.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorEditPage.error.content",{defaultMessage:"There was an error loading your monitor. Please try again later."}))}):c&&s&&!d&&!m?r.a.createElement(r.a.Fragment,null,r.a.createElement(ta,null),r.a.createElement(dx,{canUsePublicLocations:g}),r.a.createElement(Od,{isAlertingEnabled:null===(e=c[Ge.c.ALERT_CONFIG])||void 0===e||null===(t=e.status)||void 0===t?void 0:t.enabled}),r.a.createElement(Dk,{defaultValues:c,readOnly:h,canUsePublicLocations:g},r.a.createElement(kk,{stepMap:(E=h,{[cn.d.MULTISTEP]:[$k(E),Hk(E)],[cn.d.SINGLE]:[Hk(E)],[cn.d.HTTP]:[Hk(E)],[cn.d.ICMP]:[Hk(E)],[cn.d.TCP]:[Hk(E)]}),isEditFlow:!0,readOnly:h,projectId:b}),r.a.createElement($b,{configId:null==c?void 0:c[Ge.c.CONFIG_ID],name:null==c?void 0:c.name,updateUrl:!1}))):r.a.createElement(dr,null);var E},Zk=({control:e,onChange:t})=>{const{locations:a}=Object(u.useSelector)(q.X),n=e.getFieldState(Rm.b.LOCATIONS),i=n.isTouched||e._formState.isSubmitted;return r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:nM,helpText:i&&n.invalid?void 0:aM,isInvalid:i&&n.invalid,error:i?tM:void 0},r.a.createElement(sn.Controller,{name:Rm.b.LOCATIONS,control:e,rules:{validate:{notEmpty:e=>(null==e?void 0:e.length)>0||tM}},render:({field:e})=>r.a.createElement(eM,b()({fullWidth:!0,"aria-label":tM,options:a.map((e=>({...e,"data-test-subj":`syntheticsServiceLocation--${e.id}`}))),selectedOptions:e.value,isClearable:!0,"data-test-subj":"syntheticsServiceLocations"},e,{onChange:async a=>{const n=a.map((e=>{return"agentPolicyId"in(t=e)?{id:t.id,label:t.label,geo:t.geo,isServiceManaged:t.isServiceManaged,agentPolicyId:t.agentPolicyId}:{id:t.id,label:t.label,geo:t.geo,isServiceManaged:t.isServiceManaged};var t}));e.onChange(n),t(n)}}))}))},eM=r.a.forwardRef(((e,t)=>r.a.createElement(y.EuiComboBox,b()({},e,{inputRef:e=>{t&&("function"==typeof t?t(e):t.current=e)}})))),tM=o.i18n.translate("xpack.synthetics.monitorManagement.selectOneOrMoreLocations",{defaultMessage:"Select one or more locations."}),aM=o.i18n.translate("xpack.synthetics.monitorManagement.selectOneOrMoreLocationsDetails",{defaultMessage:"Select locations where monitors will be executed."}),nM=o.i18n.translate("xpack.synthetics.monitorManagement.locationsLabel",{defaultMessage:"Locations"}),rM=["http:","https:"],iM=()=>{const{control:e,register:t,handleSubmit:a,formState:{isValid:i,isSubmitted:s},getFieldState:l,trigger:c}=iv({mode:"onSubmit",reValidateMode:"onSubmit",shouldFocusError:!0,defaultValues:{urls:"",locations:[]}}),[d,m]=Object(n.useState)(),{loading:g,data:h}=(({monitorData:e})=>{const{application:t}=Object(p.useKibana)().services,{locations:a}=Object(u.useSelector)(q.X),i=Object(u.useDispatch)(),{refreshApp:s}=X(),{data:l,loading:c,status:d}=Object(f.useFetcher)((()=>{if(!e)return new Promise((e=>e(void 0)));const{urls:t,locations:a}=e;return Object(q.b)({monitor:{...Cx.d.browser,"source.inline.script":`step('Go to ${t}', async () => {\n  await page.goto('${t}');\n});`,[Rm.b.MONITOR_TYPE]:Ge.q.BROWSER,[Rm.b.NAME]:t,[Rm.b.LOCATIONS]:a,[Rm.b.URLS]:t}})}),[e]);return Object(n.useEffect)((()=>{var e;const{core:n,toasts:u}=N.a,m=l;var p;l&&"attributes"in l&&(null===(e=l.attributes.errors)||void 0===e?void 0:e.length)>0&&!c&&((e,t,a)=>{const{notifications:n,...i}=a;Object.values(e).forEach((e=>{var a;const{status:s,reason:l}=e.error||{};n.toasts.addWarning({title:o.i18n.translate("xpack.synthetics.monitorManagement.service.error.title",{defaultMessage:"Unable to sync monitor config"}),text:Object(kr.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,o.i18n.translate("xpack.synthetics.monitorManagement.service.error.message",{defaultMessage:"Your monitor was saved, but there was a problem syncing the configuration for {location}. We will automatically try again later. If this problem continues, your monitors will stop running in {location}. Please contact Support for assistance.",values:{location:null==t||null===(a=t.find((t=>(null==t?void 0:t.id)===e.locationId)))||void 0===a?void 0:a.label}})),s||l?r.a.createElement("p",null,s?o.i18n.translate("xpack.synthetics.monitorManagement.service.error.status",{defaultMessage:"Status: {status}. ",values:{status:s}}):null,l?o.i18n.translate("xpack.synthetics.monitorManagement.service.error.reason",{defaultMessage:"Reason: {reason}.",values:{reason:l}}):null):null),i),toastLifeTimeMs:3e4})}))})(null!==(p=null==l?void 0:l.attributes.errors)&&void 0!==p?p:[],a,n),c||d!==f.FETCH_STATUS.FAILURE?!c&&null!=m&&m.id&&(u.addSuccess({title:cM,toastLifeTimeMs:3e3}),s(),i(Object(q.a)()),null==t||t.navigateToApp("synthetics",{path:"monitors"})):u.addDanger({title:uM,toastLifeTimeMs:3e3})}),[t,l,d,i,c,s,a]),{data:l,loading:c}})({monitorData:d}),E=Gt(),v=l(Ge.c.URLS),x=s||v.isTouched?v.error:void 0;return r.a.createElement(y.EuiForm,{onSubmit:a((e=>{m(e)})),component:"form",isInvalid:s&&!i&&!g&&!(null!=h&&h.id),noValidate:!0},r.a.createElement(y.EuiFormRow,{fullWidth:!0,label:sM,helpText:x?void 0:oM,isInvalid:!!x,error:null==x?void 0:x.message},r.a.createElement(y.EuiFieldText,b()({fullWidth:!0},t(Ge.c.URLS,{validate:{notEmpty:e=>!!Boolean(e.trim())||dM,notValidUrl:e=>!!(e=>{if(!e)return!1;try{const t=new URL(e);return rM.includes(t.protocol)&&e.startsWith(`${t.protocol}//`)}catch(e){return!1}})(e)||mM}}),{isInvalid:!!x,"data-test-subj":`${Ge.c.URLS}-input`,tabIndex:0}))),r.a.createElement(y.EuiSpacer,null),r.a.createElement(Zk,{control:e,onChange:async e=>{await(null==c?void 0:c())}}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{justifyContent:"flexEnd"},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(ia,{canEditSynthetics:E},r.a.createElement(y.EuiButton,{type:"submit",fill:!0,iconType:"plusInCircleFilled",isLoading:g,"data-test-subj":"syntheticsMonitorConfigSubmitButton",disabled:!E},lM)))))},sM=o.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlLabel",{defaultMessage:"Website URL"}),oM=(o.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlPlaceholder",{defaultMessage:"Enter a website URL"}),o.i18n.translate("xpack.synthetics.monitorManagement.websiteUrlHelpText",{defaultMessage:"For example, your company's homepage or https://elastic.co."})),lM=o.i18n.translate("xpack.synthetics.monitorManagement.createMonitorLabel",{defaultMessage:"Create monitor"}),cM=o.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),uM=o.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),dM=o.i18n.translate("xpack.synthetics.monitorManagement.urlRequiredLabel",{defaultMessage:"URL is required"}),mM=o.i18n.translate("xpack.synthetics.monitorManagement.urlInvalidLabel",{defaultMessage:"URL is not valid"}),pM=()=>{const e=Object(u.useDispatch)(),t=Object(R.useHistory)(),{observabilityAIAssistant:a}=Object(p.useKibana)().services,i=null==a?void 0:a.service.setScreenContext;je(),Object(n.useEffect)((()=>(e(Object(q.u)()),e(q.n.get()),()=>{e(Object(q.a)())})),[e]),Ie([{text:OM}]);const{locations:s,loading:l}=_e(),{loading:c}=Object(u.useSelector)(q.B),d=l||c,m=!l&&0===s.length;return Object(n.useEffect)((()=>null==i?void 0:i({screenDescription:m?"The user has no locations configured.":`The user has ${s.length} locations configured: ${JSON.stringify(s)}`,starterPrompts:[...m?[{title:o.i18n.translate("xpack.synthetics.aiAssistant.starterPrompts.explainNoData.title",{defaultMessage:"Explain"}),prompt:o.i18n.translate("xpack.synthetics.aiAssistant.starterPrompts.explainNoData.prompt",{defaultMessage:"Why don't I see any monitors?"}),icon:"sparkles"}]:[]]})),[i,m,s]),d?r.a.createElement(dr,null):r.a.createElement(hM,null,m?r.a.createElement(fM,null):r.a.createElement(y.EuiEmptyPrompt,{title:r.a.createElement("h2",null,vM),layout:"horizontal",color:"plain",body:r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,{size:"s"},TM," ",r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsGettingStartedPageLink",href:t.createHref({pathname:Pg.j})},wM),o.i18n.translate("xpack.synthetics.gettingStarted.createSingle.description",{defaultMessage:" to get started with Elastic Synthetics Monitoring."})),r.a.createElement(y.EuiSpacer,null),r.a.createElement(iM,null)),footer:r.a.createElement(gM,null)}))},fM=()=>{const e=Object(u.useDispatch)();Ie([{text:OM}]);const t=Object(u.useSelector)(q.A),a=Object(n.useCallback)((t=>e(Object(q.cb)(t))),[e]),{onSubmit:i,privateLocations:s,loading:o}=sx();return Object(n.useEffect)((()=>{a(!1)}),[a]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiEmptyPrompt,{title:r.a.createElement("h2",null,yM),layout:"horizontal",color:"plain",body:r.a.createElement(y.EuiFlexGroup,{direction:"column"},r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiText,null,kM),r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiText,null,MM)),r.a.createElement(y.EuiFlexItem,null,r.a.createElement(y.EuiButton,{fill:!0,iconType:"plusInCircleFilled","data-test-subj":"gettingStartedAddLocationButton",onClick:()=>a(!0)},SM))),footer:r.a.createElement(gM,null)}),t?r.a.createElement(tx,{setIsOpen:a,onSubmit:e=>{i(e)},privateLocations:s,isLoading:o}):null)},gM=()=>r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiText,{size:"s",color:"subdued",className:"eui-displayInlineBlock"},bM)," ",r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsGettingStartedOnPremLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started.html",target:"_blank",className:"eui-displayInline"},EM)),hM=G.a.div.withConfig({displayName:"Wrapper",componentId:"sc-1wd0acw-0"})(["&&&{.euiEmptyPrompt__content{max-width:40em;padding:0;}}"]),bM=o.i18n.translate("xpack.synthetics.gettingStarted.forMoreInfo",{defaultMessage:"For more information, read our"}),EM=o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel",{defaultMessage:"Getting Started Guide"}),vM=o.i18n.translate("xpack.synthetics.gettingStarted.createSinglePageLabel",{defaultMessage:"Create a single page browser monitor"}),yM=o.i18n.translate("xpack.synthetics.gettingStarted.createLocationHeading",{defaultMessage:"Get started with synthetic monitoring"}),xM=o.i18n.translate("xpack.synthetics.gettingStarted.privateLocationLabel",{defaultMessage:"private location"}),SM=o.i18n.translate("xpack.synthetics.gettingStarted.createLocationLabel",{defaultMessage:"Create location"}),kM=r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.gettingStarted.createLocationDescription",defaultMessage:"To start creating monitors, you first need to create a {link}. Private locations allow you to run monitors from your own premises. They require an Elastic agent and Agent policy which you can control and maintain via Fleet.",values:{link:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-private-location.html",target:"_blank"},xM)}}),MM=r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.gettingStarted.publicLocationDescription",defaultMessage:"In {link} you can also use {elasticManagedLink}. With it, you can create and run monitors in multiple locations without having to manage your own infrastructure. Elastic takes care of software updates and capacity planning for you.",values:{elasticManagedLink:r.a.createElement("strong",null,o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.elasticManagedLink",{defaultMessage:"Elastics global managed testing infrastructure"})),link:r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsElasticCloudLink",href:"https://www.elastic.co/cloud/",target:"_blank"},o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.elasticCloudDeployments",{defaultMessage:"Elastic Cloud"}))}}),wM=o.i18n.translate("xpack.synthetics.gettingStarted.gettingStartedLabel.selectDifferentMonitor",{defaultMessage:"select a different monitor type"}),TM=o.i18n.translate("xpack.synthetics.gettingStarted.orLabel",{defaultMessage:"Or"}),OM=o.i18n.translate("xpack.synthetics.overview.heading",{defaultMessage:"Monitors"});function CM(){const{lastRefresh:e}=X(),{errorStateId:t,monitorId:a}=Object(R.useParams)(),{dateRangeStart:r,dateRangeEnd:i}=ke(),{data:s,loading:o}=Pe({index:c.A,body:{runtime_mappings:{"state.ends.id":{type:"keyword"}},size:1,query:{bool:{filter:[Le.c,Le.b,{term:{"state.ends.id":t}},{term:{config_id:a}}]}},sort:[{"@timestamp":"desc"}]}},[e,a,r,i],{name:"getStateWhichEndTheState"});return Object(n.useMemo)((()=>{var e,t;const a=null!==(e=null==s||null===(t=s.hits.hits)||void 0===t?void 0:t.map((e=>{const t=e._source;return{...t,timestamp:t["@timestamp"]}})))&&void 0!==e?e:[];return{loading:o,killerState:null==a?void 0:a[0]}}),[s,o])}const IM=()=>{var e;const{killerState:t}=CM();let a=Ba()(null!==(e=null==t?void 0:t.timestamp)&&void 0!==e?e:"");return a||(a="N/A"),r.a.createElement(y.EuiDescriptionList,{listItems:[{title:jM,description:a}]})},jM=o.i18n.translate("xpack.synthetics.errorDetails.resolvedAt",{defaultMessage:"Resolved at"});function _M(){const{lastRefresh:e}=X(),{errorStateId:t,monitorId:a}=Object(R.useParams)(),{dateRangeStart:r,dateRangeEnd:i}=ke(),{data:s,loading:o}=Pe({index:c.A,body:{size:1e4,query:{bool:{filter:[Le.d,Le.b,{term:{"state.id":t}},{term:{config_id:a}}]}},sort:[{"@timestamp":"desc"}]}},[e,a,r,i],{name:"getMonitorErrorFailedTests"});return Object(n.useMemo)((()=>{var e,t;return{failedTests:null!==(e=null==s||null===(t=s.hits.hits)||void 0===t?void 0:t.map((e=>{const t=e._source;return{...t,timestamp:t["@timestamp"]}})))&&void 0!==e?e:[],loading:o}}),[s,o])}const FM=()=>{var e;const{failedTests:t}=_M(),a=null==t||null===(e=t[0])||void 0===e?void 0:e.state;let n=Ba()(null==a?void 0:a.started_at);return n||(n=r.a.createElement(y.EuiSkeletonText,{lines:1})),r.a.createElement(y.EuiDescriptionList,{listItems:[{title:PM,description:n}]})},PM=o.i18n.translate("xpack.synthetics.errorDetails.startedAt",{defaultMessage:"Started at"}),LM=({step:e,loading:t,stepIndex:a,stepsData:n,totalSteps:i,setStepIndex:s})=>0!==i||t?r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(y.EuiFlexGroup,{alignItems:"center"},r.a.createElement(y.EuiFlexItem,{grow:!0},r.a.createElement(y.EuiTitle,{size:"xs"},r.a.createElement("h3",null,r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.synthetics.testDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:a,totalSteps:i}})))),r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(oE,{stepIndex:a,totalSteps:i,handleNextStep:()=>{s(a+1)},handlePreviousStep:()=>{s(a-1)}}))),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(fE,{stepIndex:a,step:e}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(wr,{stepsList:null==n?void 0:n.steps,step:e,loading:t})):null,RM=({failedTests:e,loading:t})=>{const[a,i]=Object(n.useState)(0),[s,o]=Object(n.useState)(5),[l,c]=Object(n.useState)("@timestamp"),[u,d]=Object(n.useState)("desc"),{monitorId:m}=Object(R.useParams)(),p=e.slice(a*s,a*s+s),{basePath:f}=at(),g=Object(R.useHistory)(),h=Os(),b=Ba(),E=[{field:"@timestamp",name:NM,sortable:!0,render:(e,t)=>r.a.createElement(y.EuiLink,{"data-test-subj":"failed-test-link",href:`${f}/app/synthetics/monitor/${m}/test-run/${t.monitor.check_group}`},b(e))},{field:"monitor.duration.us",name:AM,align:"right",render:e=>r.a.createElement(y.EuiText,null,js(e))}],v={pageIndex:a,pageSize:s,totalItemCount:e.length,pageSizeOptions:[3,5,8]};return r.a.createElement("div",null,r.a.createElement(y.EuiSpacer,null),r.a.createElement(y.EuiBasicTable,{tableCaption:DM,loading:t,items:p,columns:E,pagination:v,sorting:{sort:{field:l,direction:u}},onChange:({page:e={},sort:t={}})=>{const{index:a,size:n}=e,{field:r,direction:s}=t;i(a),o(n),c(r),d(s)},rowProps:e=>{const{state:t}=e;if(null!=t&&t.id)return{"data-test-subj":`row-${t.id}`,onClick:t=>{g.push(ro({monitorId:m,checkGroup:e.monitor.check_group,locationId:null==h?void 0:h.id}))}}}}))},DM=o.i18n.translate("xpack.synthetics.errorsList.label",{defaultMessage:"Errors list"}),AM=o.i18n.translate("xpack.synthetics.testDuration.label",{defaultMessage:"Test duration"}),NM=o.i18n.translate("xpack.synthetics.timestamp.label",{defaultMessage:"@timestamp"}),zM=({lastTestRun:e})=>{var t,a,n;if(!e)return r.a.createElement(y.EuiSkeletonText,{lines:3});const i=$()(null===(t=e.monitor.timespan)||void 0===t?void 0:t.lt).diff($()(null===(a=e.monitor.timespan)||void 0===a?void 0:a.gte),"minutes"),s=null==e||null===(n=e.state)||void 0===n?void 0:n.started_at;return r.a.createElement(Wm,{time:{from:$()(s).subtract(i/2,"minutes").toISOString(),to:$()(e.timestamp).add(i/2,"minutes").toISOString()},allowBrushing:!1})},BM=o.i18n.translate("xpack.synthetics.monitorsPage.errors",{defaultMessage:"Errors"});function HM(){var e,t,a,n,i,s;const{failedTests:o,loading:l}=_M(),c=null!==(e=null==o||null===(t=o[0])||void 0===t?void 0:t.monitor.check_group)&&void 0!==e?e:"",{data:u,isFailedStep:d,failedStep:m,loading:f}=Ir(c),g=null==o?void 0:o[0];(e=>{var t,a;const n=null!==(t=null===(a=Object(p.useKibana)().services.application)||void 0===a?void 0:a.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID))&&void 0!==t?t:"",{monitor:r}=Ts(),i=Os(),s=[{text:BM,href:`${n}/monitor/${null==r?void 0:r[Ge.c.CONFIG_ID]}/errors?locationId=${null==i?void 0:i.id}`},...null!=e?e:[]];Lg(s)})([{text:Ba()(null==g||null===(a=g.state)||void 0===a?void 0:a.started_at)}]);const h=(({checkGroup:e})=>{const[t,a]=r.a.useState(1),{data:n,loading:i,stepEnds:s}=Ir(e),o=s.find((e=>{var a,n;return(null===(a=e.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index)===t})),l=i?1:s.length;return{step:o,stepIndex:t,setStepIndex:a,totalSteps:l,stepsData:n,loading:i}})({checkGroup:null==g?void 0:g.monitor.check_group}),b="browser"===(null==u||null===(n=u.details)||void 0===n?void 0:n.journey.monitor.type);return r.a.createElement("div",null,r.a.createElement(Bt,{title:GM},r.a.createElement(zM,{lastTestRun:g})),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiFlexGroup,{gutterSize:"m"},r.a.createElement(y.EuiFlexItem,{grow:2,style:{minWidth:0}},r.a.createElement(Bt,{title:VM},r.a.createElement(RM,{failedTests:o,loading:l})),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(LM,h)),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Yf,{latestPing:g,loading:l,stepsData:u,stepsLoading:f,isErrorDetails:!0}),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(y.EuiPanel,{hasShadow:!1,hasBorder:!0},r.a.createElement(sE,{journeyDetails:null==u?void 0:u.details,showErrorTitle:!1,showErrorLogs:!0})))),r.a.createElement(y.EuiFlexItem,{grow:1,style:{height:"fit-content"}},(null==u||null===(i=u.details)||void 0===i?void 0:i.journey)&&m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Bt,null,r.a.createElement(qb,{ping:null==u||null===(s=u.details)||void 0===s?void 0:s.journey,step:m,isFailed:d})),r.a.createElement(y.EuiSpacer,{size:"m"})),r.a.createElement(Bf,{doBreakdown:!1}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(Uf,{hideLocations:!0}))))}const GM=o.i18n.translate("xpack.synthetics.errors.timeline.title",{defaultMessage:"Timeline"}),VM=o.i18n.translate("xpack.synthetics.errors.failedTests",{defaultMessage:"Failed tests"}),$M=()=>{var e;const{failedTests:t}=_M(),a=null==t||null===(e=t[0])||void 0===e?void 0:e.state,{killerState:n}=CM(),i=null!=n&&n.timestamp?$()(null==n?void 0:n.timestamp):$()(),s=$()(null==a?void 0:a.started_at),o=a?qM(s,i):0;return r.a.createElement(y.EuiDescriptionList,{listItems:[{title:UM,description:o}]})},UM=o.i18n.translate("xpack.synthetics.errorDetails.errorDuration",{defaultMessage:"Error duration"}),qM=(e,t)=>{const a=t.diff(e,"days");if(a>1)return o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.days",{defaultMessage:"{value} days",values:{value:a}});const n=t.diff(e,"hours");if(n>1)return o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.hours",{defaultMessage:"{value} hours",values:{value:n}});const r=t.diff(e,"minutes");return o.i18n.translate("xpack.synthetics.errorDetails.errorDuration.mins",{defaultMessage:"{value} mins",values:{value:r}})},WM=G()("div").withConfig({displayName:"WrapFieldSearch",componentId:"sc-rl9jlc-0"})(["max-width:700px;"]),KM=({setSearch:e})=>{const[t,a]=Object(n.useState)("");return fd()((()=>{e(t)}),350,[t]),r.a.createElement(WM,null,r.a.createElement(y.EuiFieldSearch,{"data-test-subj":"uptimeCertSearch",placeholder:Dl,onChange:e=>{a(e.target.value)},isClearable:!0,"aria-label":Dl,fullWidth:!0}))};var YM=a(136);const XM=G()(y.EuiText).withConfig({displayName:"DateText",componentId:"sc-1ap557y-0"})(["display:inline-block;margin-left:5px;"]),JM=({cert:e})=>{const t=((e,t)=>{const a=c.f.certExpirationThreshold,n=c.f.certAgeThreshold,r=new Date(null!=e?e:"");if(isNaN(r.valueOf()))return!1;const i=$()(r).diff($()(),"days")<a,s=$()().diff($()(t),"days")>n;return $()(r)<$()()?c.b.EXPIRED:i?c.b.EXPIRING_SOON:s?c.b.TOO_OLD:c.b.OK})(null==e?void 0:e.not_after,null==e?void 0:e.not_before),a=$()(null==e?void 0:e.not_after).fromNow();if(t===c.b.EXPIRING_SOON)return r.a.createElement(y.EuiHealth,{color:"warning"},r.a.createElement("span",null,Rl,"  ",r.a.createElement(XM,{color:"subdued",size:"xs"},a)));if(t===c.b.EXPIRED)return r.a.createElement(y.EuiHealth,{color:"danger"},r.a.createElement("span",null,Ll,"  ",r.a.createElement(XM,{color:"subdued",size:"xs"},a)));if(t===c.b.TOO_OLD){const t=c.f.certAgeThreshold,a=$()(null==e?void 0:e.not_before).add(t,"days").fromNow();return r.a.createElement(y.EuiHealth,{color:"danger"},r.a.createElement("span",null,Nl,r.a.createElement(XM,{color:"subdued",size:"xs"},a)))}const n=$()(null==e?void 0:e.not_after).fromNow(!0);return r.a.createElement(y.EuiHealth,{color:"success"},r.a.createElement("span",null,Pl,"  ",r.a.createElement(XM,{color:"subdued",size:"xs"},r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.certs.status.ok.label",defaultMessage:" for {okRelativeDate}",description:'Denotes an amount of time for which a cert is valid. Example: "OK for 2 days"',values:{okRelativeDate:n}}))))},QM=({children:e,configId:t})=>{var a;const n=null===(a=Object(p.useKibana)().services.http)||void 0===a?void 0:a.basePath.get();return r.a.createElement(y.EuiLink,{"data-test-subj":"syntheticsMonitorPageLinkLink",href:`${n}/app/synthetics/monitor/${t}`},e)},ZM=({monitors:e})=>r.a.createElement("span",null,e.map(((e,t)=>r.a.createElement("span",{key:e.id},t>0&&", ",r.a.createElement(y.EuiToolTip,{content:e.url},r.a.createElement(QM,{configId:e.configId},e.name||e.id)))))),ew=G.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-f5bsws-0"})(["margin-right:8px;"]),tw=({cert:e})=>{var t,a,n,i;const s=({text:e,val:t})=>r.a.createElement(ew,{"data-test-subj":t,className:"eui-textNoWrap"},r.a.createElement(y.EuiToolTip,{content:t},r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsShaComponentButton",flush:"right"},e," ")),r.a.createElement(y.EuiCopy,{textToCopy:null!=t?t:""},(e=>r.a.createElement(y.EuiButtonIcon,{"data-test-subj":"syntheticsShaComponentButton","aria-label":ql,onClick:e,iconType:"copy",title:ql}))));return r.a.createElement("span",null,r.a.createElement(s,{text:"SHA 1",val:null!==(t=null==e||null===(a=e.sha1)||void 0===a?void 0:a.toUpperCase())&&void 0!==t?t:""}),r.a.createElement(s,{text:"SHA 256",val:null!==(n=null==e||null===(i=e.sha256)||void 0===i?void 0:i.toUpperCase())&&void 0!==n?n:""}))},aw=({page:e,certificates:t,sort:a,onChange:n})=>{var i,s;const o=Ba(),l={pageIndex:e.index,pageSize:e.size,totalItemCount:null!==(i=null==t?void 0:t.total)&&void 0!==i?i:0,pageSizeOptions:[10,25,50,100],showPerPageOptions:!0},c=[{field:"not_after",name:Al,sortable:!0,render:(e,t)=>r.a.createElement(JM,{cert:t})},{name:zl,field:"common_name",sortable:!0},{name:Bl,field:"monitors",render:e=>r.a.createElement(ZM,{monitors:e})},{name:Hl,field:"issuer",sortable:!0},{name:Gl,field:"not_after",sortable:!0,render:o},{name:Vl,field:"not_before",sortable:!0,render:e=>$()().diff($()(e),"days")+" "+$l},{name:Ul,field:"sha256",render:(e,t)=>r.a.createElement(tw,{cert:t})}];return r.a.createElement(y.EuiBasicTable,{loading:t.isLoading,columns:c,items:null!==(s=null==t?void 0:t.certs)&&void 0!==s?s:[],pagination:l,onChange:e=>{n(e.page,e.sort)},sorting:{sort:{field:a.field,direction:a.direction}},noItemsMessage:t.isLoading?Kl:r.a.createElement("span",{"data-test-subj":"uptimeCertsEmptyMessage"},Wl)})},nw="xpack.uptime.certList.pageSize",rw=()=>{var e;const t=parseInt(null!==(e=localStorage.getItem(nw))&&void 0!==e?e:"",10);return isNaN(t)?10:t},iw=()=>{Object(f.useTrackPageview)({app:"synthetics",path:"certificates"}),Object(f.useTrackPageview)({app:"synthetics",path:"certificates",delay:15e3}),Ie([{text:"Certificates"}]);const[e,t]=Object(n.useState)({index:0,size:rw()}),[a,i]=Object(n.useState)({field:"not_after",direction:"asc"}),[s,o]=Object(n.useState)(""),l=Object(u.useDispatch)(),c=(({pageIndex:e,size:t=20,search:a,sortBy:r="not_after",direction:i="asc"})=>{const{lastRefresh:s}=Object(n.useContext)(K),o=Object(u.useDispatch)();Object(n.useEffect)((()=>{o(YM.b.get({pageIndex:e,size:t,search:a,sortBy:r,direction:i}))}),[i,o,s,e,a,t,r]);const{data:l,isLoading:c}=Object(u.useSelector)(YM.d);return{...null!=l?l:{certs:[],total:0},isLoading:c}})({search:s,size:e.size,pageIndex:e.index,sortBy:a.field,direction:a.direction});return Object(n.useEffect)((()=>{l(Object(_l.c)({total:c.total}))}),[c.total,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(KM,{setSearch:o}),r.a.createElement(y.EuiSpacer,{size:"m"}),r.a.createElement(aw,{page:e,onChange:(e,a)=>{t(e),i(a),localStorage.setItem(nw,e.size.toString())},sort:a,certificates:c}))},sw=o.i18n.translate("xpack.synthetics.routes.baseTitle",{defaultMessage:"Synthetics - Kibana"}),ow=({path:e,title:t})=>(Object(n.useEffect)((()=>{document.title=t}),[e,t]),null),lw=()=>{const{application:e}=Object(p.useKibana)().services,{addInspectorRequest:t}=Object(f.useInspectorContext)(),{euiTheme:a}=Object(y.useEuiTheme)(),n=((e,t,a,n)=>{return[...ux(0,n,sw),(i=sw,{title:o.i18n.translate("xpack.synthetics.errorDetailsRoute.title",{defaultMessage:"Error details | {baseTitle}",values:{baseTitle:i}}),path:c.g,component:HM,dataTestSubj:"syntheticsMonitorEditPage",pageHeader:{pageTitle:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.editMonitor.errorDetailsRoute.title",defaultMessage:"Error details"}),rightSideItems:[r.a.createElement($M,null),r.a.createElement(Hm,{isDisabled:!0}),r.a.createElement(IM,null),r.a.createElement(FM,null)]}}),SE(0,0,sw),aE(0,0,sw),...bg(t,n,sw),...fm(0,a,n,sw),{title:o.i18n.translate("xpack.synthetics.gettingStartedRoute.title",{defaultMessage:"Synthetics Getting Started | {baseTitle}",values:{baseTitle:sw}}),path:c.h,component:pM,dataTestSubj:"syntheticsGettingStartedPage",pageSectionProps:{alignment:"center",paddingSize:"none"}},{title:o.i18n.translate("xpack.synthetics.createMonitorRoute.title",{defaultMessage:"Create Monitor | {baseTitle}",values:{baseTitle:sw}}),path:c.o,component:Yk,dataTestSubj:"syntheticsMonitorAddPage",restrictWidth:!0,pageHeader:{pageTitle:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.createMonitor.pageHeader.title",defaultMessage:"Create Monitor"}),rightSideItems:[r.a.createElement(wl,{node:Gb})]}},{title:o.i18n.translate("xpack.synthetics.editMonitorRoute.title",{defaultMessage:"Edit Monitor | {baseTitle}",values:{baseTitle:sw}}),path:c.p,component:Qk,dataTestSubj:"syntheticsMonitorEditPage",restrictWidth:!0,pageHeader:{pageTitle:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.editMonitor.pageHeader.title",defaultMessage:"Edit Monitor"}),rightSideItems:[r.a.createElement(wl,{node:Hb}),r.a.createElement(wl,{node:Gb})],breadcrumbs:[{text:r.a.createElement(wl,{node:Vb})}]}},{title:o.i18n.translate("xpack.synthetics.testRunDetailsRoute.title",{defaultMessage:"Test run details | {baseTitle}",values:{baseTitle:sw}}),path:c.D,component:vE,dataTestSubj:"syntheticsMonitorTestRunDetailsPage",pageHeader:{pageTitle:r.a.createElement(z.FormattedMessage,{id:"xpack.synthetics.testRunDetailsRoute.page.title",defaultMessage:"Test run details"})}},{title:o.i18n.translate("xpack.synthetics.certificatesRoute.title",{defaultMessage:"Certificates | {baseTitle}",values:{baseTitle:sw}}),path:c.a,component:iw,dataTestSubj:"uptimeCertificatesPage",pageHeader:{pageTitle:r.a.createElement(Fl,null),rightSideItems:[r.a.createElement(Xl,null)]}}];var i})(0,Object(R.useHistory)(),Object(R.useLocation)(),e.getUrlForApp(Ce.a.SYNTHETICS_PLUGIN_ID));VE.a.addInspectorRequest=t;const i=(()=>{var e,t;const{canRead:a,loading:n}=(()=>{const{services:{data:e}}=Object(p.useKibana)(),{data:t,loading:a,status:n}=Object(f.useFetcher)((()=>new Promise((t=>{e.search.search({terminate_after:1,params:{index:c.A,size:0}},{legacyHitsTotal:!1}).subscribe({next:e=>{t({canRead:!0,error:void 0})},error:e=>{var a,n;(null===(a=e.err)||void 0===a?void 0:a.statusCode)>=400&&(null===(n=e.err)||void 0===n?void 0:n.statusCode)<500?t({canRead:!1,error:e}):t({canRead:!0,error:e})}})}))),[e.search]);return{canRead:null==t?void 0:t.canRead,error:null==t?void 0:t.error,loading:a,status:n}})(),{error:i}=Object(u.useSelector)(ze.f);return n||a?null!=i&&null!==(e=i.body)&&void 0!==e&&e.message&&[c.l,c.k,c.m].includes(null==i||null===(t=i.body)||void 0===t?void 0:t.message)?r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"calc(100vh - 150px)"}},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Ql,null))):void 0:r.a.createElement(y.EuiFlexGroup,{alignItems:"center",justifyContent:"center",style:{height:"calc(100vh - 150px)"}},r.a.createElement(y.EuiFlexItem,{grow:!1},r.a.createElement(Jl,{unprivilegedIndices:[c.A]})))})();return r.a.createElement(El,null,n.map((({title:e,path:t,component:a,dataTestSubj:n,pageHeader:s,...o})=>r.a.createElement(hl,{path:t,key:n,exact:!0},r.a.createElement("div",{className:d.APP_WRAPPER_CLASS,"data-test-subj":n},r.a.createElement(ow,{title:e,path:t}),r.a.createElement(hm,b()({pageHeader:i?void 0:s,"data-test-subj":"synthetics-page-template",isPageDataLoaded:!0},o),i||r.a.createElement(a,null)))))),r.a.createElement(hl,{component:()=>r.a.createElement(hm,null,r.a.createElement(jl,{actions:[r.a.createElement(y.EuiButtonEmpty,{"data-test-subj":"syntheticsPageRouterGoToSyntheticsHomePageButton",iconType:"arrowLeft",flush:"both",onClick:()=>{e.navigateToApp(Ce.a.SYNTHETICS_PLUGIN_ID)}},o.i18n.translate("xpack.synthetics.routes.goToSynthetics",{defaultMessage:"Go to Synthetics Home Page"}))]}))}))},cw=e=>{const{basePath:t,canSave:a,core:i,darkMode:s,plugins:l,renderGlobalHelpControls:c,setBadge:h,startPlugins:b,appMountParameters:E}=e;return Object(n.useEffect)((()=>{c(),h(a?void 0:{text:o.i18n.translate("xpack.synthetics.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:o.i18n.translate("xpack.synthetics.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"})}),[a,c,h]),N.a.core=i,N.a.startPlugins=b,N.a.theme=e.appMountParameters.theme$,q.mb.dispatch(Object(q.eb)(t)),r.a.createElement(g.a,i,r.a.createElement(O,{theme:i.theme,modify:{breakpoint:{xxl:1600,xxxl:2e3}}},r.a.createElement(u.Provider,{store:q.mb},r.a.createElement(p.KibanaContextProvider,{services:{...i,...l,storage:q.lb,data:b.data,inspector:b.inspector,triggersActionsUi:b.triggersActionsUi,observability:b.observability,observabilityShared:b.observabilityShared,observabilityAIAssistant:b.observabilityAIAssistant,exploratoryView:b.exploratoryView,cases:b.cases,spaces:b.spaces,fleet:b.fleet,unifiedSearch:b.unifiedSearch}},r.a.createElement(dl,{dataViews:b.dataViews},r.a.createElement(A,{history:E.history},r.a.createElement(m.EuiThemeProvider,{darkMode:s},r.a.createElement(Y,null,r.a.createElement(tt,e,r.a.createElement(ot,{darkMode:s},r.a.createElement(ct,b,r.a.createElement("div",{className:d.APP_WRAPPER_CLASS,"data-test-subj":"syntheticsApp"},r.a.createElement(L,{coreStart:{application:i.application}},r.a.createElement(f.InspectorContextProvider,null,r.a.createElement(lw,null),r.a.createElement(Pt,{appMountParameters:E}),r.a.createElement(cl,null)))))))))))))))},uw=e=>r.a.createElement(cw,e);function dw(e,t,a,n,i,u){var d,m,p;const{application:{capabilities:f},chrome:{setBadge:g,setHelpExtension:h},docLinks:b,http:{basePath:E},i18n:v,theme:y}=e,{apm:x,infrastructure:S,logs:k}=l(f,c.j),M=null!==(d=f.uptime.save)&&void 0!==d&&d,w=y.getTheme().darkMode,T={isDev:i,plugins:t,canSave:M,core:e,i18n:v,startPlugins:a,basePath:E.get(),darkMode:w,commonlyUsedRanges:e.uiSettings.get(c.e),isApmAvailable:x,isInfraAvailable:S,isLogsAvailable:k,renderGlobalHelpControls:()=>h({appName:o.i18n.translate("xpack.synthetics.header.appName",{defaultMessage:"Synthetics"}),links:[{linkType:"documentation",href:`${b.links.observability.monitorUptimeSynthetics}`},{linkType:"discuss",href:"https://discuss.elastic.co/c/uptime"}]}),setBadge:g,appMountParameters:n,isServerless:u,setBreadcrumbs:null!==(m=null===(p=a.serverless)||void 0===p?void 0:p.setBreadcrumbs)&&void 0!==m?m:e.chrome.setBreadcrumbs};return s.a.render(r.a.createElement(uw,T),n.element),()=>{a.data.search.session.clear(),s.a.unmountComponentAtNode(n.element)}}}])]);