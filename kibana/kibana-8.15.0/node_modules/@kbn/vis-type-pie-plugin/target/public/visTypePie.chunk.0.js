(window.visTypePie_bundle_jsonpfunction=window.visTypePie_bundle_jsonpfunction||[]).push([[0],{23:function(e,n,l){"use strict";l.r(n),l.d(n,"convertToLens",(function(){return p}));var a=l(3),s=l(17),t=l(19),i=l(11),o=l(6),d=l(0);const u=(e,n,l,a)=>{var t,i,u,r,p,g,m,v,c,y,f,b;const D=n.uiState.get("vis.legendOpen"),L=void 0!==D?D?d.LegendDisplay.SHOW:d.LegendDisplay.HIDE:void 0,C=null!==(t=n.params.labels.values)&&void 0!==t?t:n.params.legendStats?(null===(i=n.params.legendStats)||void 0===i?void 0:i[0])===o.LegendValue.Value:n.type.visConfig.defaults.showValuesInLegend;return[{layerId:e,layerType:"data",primaryGroups:a,secondaryGroups:[],metrics:l.length?[l[0]]:[],numberDisplay:!1===C?s.NumberDisplayTypes.HIDDEN:null!==(u=n.params.labels.valuesFormat)&&void 0!==u?u:n.type.visConfig.defaults.labels.valuesFormat,categoryDisplay:n.params.labels.show?null!==(r=n.params.labels.position)&&void 0!==r?r:n.type.visConfig.defaults.labels.position:s.CategoryDisplayTypes.HIDE,legendDisplay:null!==(p=null!=L?L:n.params.legendDisplay)&&void 0!==p?p:n.type.visConfig.defaults.legendDisplay,legendPosition:null!==(g=n.params.legendPosition)&&void 0!==g?g:n.type.visConfig.defaults.legendPosition,legendStats:C?[o.LegendValue.Value]:void 0,nestedLegend:null!==(m=n.params.nestedLegend)&&void 0!==m?m:n.type.visConfig.defaults.nestedLegend,percentDecimals:null!==(v=n.params.labels.percentDecimals)&&void 0!==v?v:n.type.visConfig.defaults.labels.percentDecimals,emptySizeRatio:null!==(c=n.params.emptySizeRatio)&&void 0!==c?c:n.type.visConfig.defaults.emptySizeRatio,legendMaxLines:null!==(y=n.params.maxLegendLines)&&void 0!==y?y:n.type.visConfig.defaults.maxLegendLines,legendSize:null!==(f=n.params.legendSize)&&void 0!==f?f:n.type.visConfig.defaults.legendSize,truncateLegend:null!==(b=n.params.truncateLegend)&&void 0!==b?b:n.type.visConfig.defaults.truncateLegend}]},r=(e,n,{metrics:l,buckets:a})=>({shape:n.params.isDonut?"donut":"pie",layers:u(e,n,l,a.all),palette:n.params.palette}),p=async(e,n)=>{var l;if(!n)return null;const o=Object(i.a)(),d=await Object(a.getDataViewByIndexPatternId)(null===(l=e.data.indexPattern)||void 0===l?void 0:l.id,o);if(!d)return null;const{getColumnsFromVis:u}=await a.convertToLensModule,p=u(e,n,d,{buckets:[],splits:["segment"],unsupported:["split_row","split_column"]});if(null===p)return null;const[g]=p;if(g.buckets.all.length>3||!g.buckets.all.length)return null;const m=Object(t.v4)(),v=d.id;return{type:"lnsPie",layers:[{indexPatternId:v,layerId:m,columns:g.columns.map(s.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:r(m,e,g),indexPatternIds:[v]}}}}]);