/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.cloudChat_bundle_jsonpfunction=window.cloudChat_bundle_jsonpfunction||[]).push([[2],{26:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(1),a=n(12),o=n.n(a),s=n(11);const r=({onReady:e=(()=>{}),onResize:t=(()=>{}),onPlaybookFired:n=(()=>{}),controlled:a=!0})=>{const r=Object(i.useRef)(null),d=Object(s.b)(),[c,u]=Object(i.useState)({height:0,width:0}),[l,h]=Object(i.useState)(!1),[b,f]=Object(i.useState)(!1),m=Object(i.useRef)(!1),[g,p]=o()("cloudChatPlaybookFiredOnce",!1);return Object(i.useEffect)((()=>{const i=i=>{const{current:o}=r;if(!d||null==o||!o.contentWindow||i.source!==(null==o?void 0:o.contentWindow))return;const s=(()=>{const{location:e,navigator:t,innerHeight:n,innerWidth:i}=window,{hash:a,host:o,hostname:s,href:r,origin:d,pathname:c,port:u,protocol:l,search:h}=e,{language:b,userAgent:f}=t,{title:m,referrer:g}=document;return{window:{location:{hash:a,host:o,hostname:s,href:r,origin:d,pathname:c,port:u,protocol:l,search:h},navigator:{language:b,userAgent:f},innerHeight:n,innerWidth:i},document:{title:m,referrer:g}}})(),{data:l}=i,{user:j,chatVariant:w}=d,{id:y,email:v,jwt:k,trialEndDate:O,kbnVersion:C,kbnBuildNum:R}=j,S={show:()=>{var e,t,n,i;null===(e=r.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"driftShow"},"*"),null===(n=r.current)||void 0===n||null===(i=n.contentWindow)||void 0===i||i.postMessage({type:"driftOpenChat"},"*"),m.current=!0},hide:()=>{var e,t;null===(e=r.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"driftHide"},"*"),m.current=!1},toggle:()=>{m.current?S.hide():S.show()}};switch(l.type){case"driftIframeReady":{const e={id:y,attributes:{email:v,trial_end_date:O,kbn_version:C,kbn_build_num:R,kbn_chat_variant:w},jwt:k};o.contentWindow.postMessage({type:"driftSetContext",data:{context:s,user:e}},"*");break}case"driftIframeResize":{const e=l.data.styles||{},n=e=>e.replace(/-./g,(e=>e[1].toUpperCase())),i=Object.keys(e).reduce(((t,i)=>(t[n(i)]=e[i],t)),{});u({...c,...i}),b||f(!0),t();break}case"driftWidgetReady":a&&S.hide(),h(!0),e(S),g&&n();break;case"driftChatClosed":a&&S.hide();break;case"driftPlaybookFired":n(),p(!0)}};return window.addEventListener("message",i),()=>window.removeEventListener("message",i)}),[d,c,e,t,l,b,a,g,n,p]),d?{enabled:!0,src:d.chatURL,ref:r,style:c,isReady:l,isResized:b}:{enabled:!1}}},27:function(e,t,n){"use strict";n.r(t),n.d(t,"Chat",(function(){return c}));var i=n(1),a=n(0),o=n(6),s=n(25),r=n(2),d=n(26);const c=({onHide:e=(()=>{}),onReady:t,onResize:n,onPlaybookFired:c})=>{const u=Object(d.a)({onReady:t,onResize:n,onPlaybookFired:c,controlled:!1}),l=Object(i.useRef)(null),[h,b]=Object(i.useState)(!1);if(!u.enabled||h)return null;const{isReady:f,isResized:m,style:g}=u,{right:p}=g,j=Object(a.css)("bottom:",s.euiThemeVars.euiSizeXS,";position:fixed;right:calc(",p," + ",s.euiThemeVars.euiSizeXS,");visibility:",f&&m?"visible":"hidden",";",""),w=Object(a.jsx)(r.EuiButtonEmpty,{css:j,"data-test-subj":"cloud-chat-hide",name:"cloudChatHide",onClick:()=>{e(),b(!0)},size:"xs"},o.i18n.translate("xpack.cloudChat.hideChatButtonLabel",{defaultMessage:"Hide chat"})),y=Object(a.css)("bottom:",s.euiThemeVars.euiSizeXL,";position:fixed;right:",s.euiThemeVars.euiSizeXL,";z-index:",s.euiThemeVars.euiZMaskBelowHeader-1,";&:focus [name='cloudChatHide'],&:hover [name='cloudChatHide']{visibility:visible;}","");return Object(a.jsx)("div",{css:y,ref:l,"data-test-subj":"cloud-chat"},w,Object(a.jsx)("iframe",{"data-test-subj":"cloud-chat-frame",title:o.i18n.translate("xpack.cloudChat.chatFrameTitle",{defaultMessage:"Chat"}),src:u.src,ref:u.ref,style:{...u.style,colorScheme:"light"}}))}}}]);