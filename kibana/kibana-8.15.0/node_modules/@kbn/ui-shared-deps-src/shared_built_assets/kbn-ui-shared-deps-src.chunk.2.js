(window.webpackJsonp_kbnSharedDeps_=window.webpackJsonp_kbnSharedDeps_||[]).push([[2],{389:function(e,t,n){"use strict";n.r(t),n.d(t,"CodeEditor",(function(){return M}));var o=n(45),r=n.n(o),i=n(149);function a(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function l(){}var s=function(){return s=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};function u(e){var t=e.width,n=e.height,r=e.value,l=e.defaultValue,u=e.language,c=e.theme,d=e.options,f=e.overrideServices,g=e.editorWillMount,b=e.editorDidMount,p=e.editorWillUnmount,h=e.onChange,j=e.className,O=e.original,m=e.originalUri,v=e.modifiedUri,E=Object(o.useRef)(null),y=Object(o.useRef)(null),C=Object(o.useRef)(null),M=Object(o.useRef)(null),x=a(t),k=a(n),w=Object(o.useMemo)((function(){return{width:x,height:k}}),[x,k]);return Object(o.useEffect)((function(){var e,t,n,o,a;E.current&&(g(i),y.current=i.editor.createDiffEditor(E.current,s(s(s({},j?{extraEditorClassName:j}:{}),d),c?{theme:c}:{}),f),e=null!=r?r:l,t=null==m?void 0:m(i),n=null==v?void 0:v(i),o=t&&i.editor.getModel(t),a=n&&i.editor.getModel(n),o?(o.setValue(O),i.editor.setModelLanguage(o,u)):o=i.editor.createModel(e,u,t),a?(o.setValue(e),i.editor.setModelLanguage(a,u)):a=i.editor.createModel(e,u,n),y.current.setModel({original:o,modified:a}),function(){b(y.current,i);var e=y.current.getModel().modified;C.current=e.onDidChangeContent((function(t){M.current||h(e.getValue(),t)}))}())}),[]),Object(o.useEffect)((function(){y.current&&y.current.updateOptions(s(s({},j?{extraEditorClassName:j}:{}),d))}),[j,d]),Object(o.useEffect)((function(){y.current&&y.current.layout()}),[t,n]),Object(o.useEffect)((function(){if(y.current){var e=y.current.getModel(),t=e.original,n=e.modified;i.editor.setModelLanguage(t,u),i.editor.setModelLanguage(n,u)}}),[u]),Object(o.useEffect)((function(){if(y.current){var e=y.current.getModel().modified;M.current=!0,y.current.getModifiedEditor().pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:r}]),y.current.getModifiedEditor().pushUndoStop(),M.current=!1}}),[r]),Object(o.useEffect)((function(){i.editor.setTheme(c)}),[c]),Object(o.useEffect)((function(){if(y.current){var e=y.current.getModel().original;O!==e.getValue()&&e.setValue(O)}}),[O]),Object(o.useEffect)((function(){return function(){if(y.current){p(y.current,i),y.current.dispose();var e=y.current.getModel(),t=e.original,n=e.modified;t&&t.dispose(),n&&n.dispose()}C.current&&C.current.dispose()}}),[]),o.createElement("div",{ref:E,style:w,className:"react-monaco-editor-container"})}u.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:l,editorDidMount:l,editorWillUnmount:l,onChange:l,className:null},u.displayName="MonacoDiffEditor";var c=function(){return c=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)};function d(e){var t=e.width,n=e.height,r=e.value,l=e.defaultValue,s=e.language,u=e.theme,d=e.options,f=e.overrideServices,g=e.editorWillMount,b=e.editorDidMount,p=e.editorWillUnmount,h=e.onChange,j=e.className,O=e.uri,m=Object(o.useRef)(null),v=Object(o.useRef)(null),E=Object(o.useRef)(null),y=Object(o.useRef)(null),C=a(t),M=a(n),x=Object(o.useMemo)((function(){return{width:C,height:M}}),[C,M]);return Object(o.useEffect)((function(){var e=null!==r?r:l;if(m.current){var t=c(c({},d),g(i)||{}),n=null==O?void 0:O(i),o=n&&i.editor.getModel(n);o?(o.setValue(e),i.editor.setModelLanguage(o,s)):o=i.editor.createModel(e,s,n),v.current=i.editor.create(m.current,c(c(c({model:o},j?{extraEditorClassName:j}:{}),t),u?{theme:u}:{}),f),b(v.current,i),E.current=v.current.onDidChangeModelContent((function(e){y.current||h(v.current.getValue(),e)}))}}),[]),Object(o.useEffect)((function(){if(v.current){if(r===v.current.getValue())return;var e=v.current.getModel();y.current=!0,v.current.pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:r}],void 0),v.current.pushUndoStop(),y.current=!1}}),[r]),Object(o.useEffect)((function(){if(v.current){var e=v.current.getModel();i.editor.setModelLanguage(e,s)}}),[s]),Object(o.useEffect)((function(){if(v.current){d.model;var e=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}(d,["model"]);v.current.updateOptions(c(c({},j?{extraEditorClassName:j}:{}),e))}}),[j,d]),Object(o.useEffect)((function(){v.current&&v.current.layout()}),[t,n]),Object(o.useEffect)((function(){i.editor.setTheme(u)}),[u]),Object(o.useEffect)((function(){return function(){if(v.current){p(v.current,i),v.current.dispose();var e=v.current.getModel();e&&e.dispose()}E.current&&E.current.dispose()}}),[]),o.createElement("div",{ref:m,style:x,className:"react-monaco-editor-container"})}d.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:l,editorDidMount:l,editorWillUnmount:l,onChange:l,className:null},d.displayName="MonacoEditor";var f=d,g=n(55),b=n(242),p=n(8),h=n(262),j=n(35),O=n(6),m=n.n(O),v=n(384);class E{constructor(e,t,n){m()(this,"domNode",void 0),this.placeholderText=e,this.euiTheme=t,this.editor=n,n.addContentWidget(this)}getId(){return"KBN_CODE_EDITOR_PLACEHOLDER_WIDGET_ID"}getDomNode(){if(!this.domNode){const e=document.createElement("div");e.innerText=this.placeholderText,e.className=Object(v.css)("color:",this.euiTheme.colors.subduedText,";width:max-content;pointer-events:none;",""),this.editor.applyFontInfo(e),this.domNode=e}return this.domNode}getPosition(){return{position:{column:1,lineNumber:1},preference:[b.monaco.editor.ContentWidgetPositionPreference.EXACT]}}dispose(){this.editor.removeContentWidget(this)}}const y={container:{name:"1wv4onu",styles:"position:relative;height:100%"},fullscreenContainer:{name:"1m19vma",styles:"position:absolute;left:0;top:0"},keyboardHint:e=>Object(j.css)("position:absolute;top:0;bottom:0;right:0;left:0;&:focus{z-index:",e.levels.mask,";}",""),controls:{base:e=>Object(j.css)("position:absolute;top:",e.size.xs,";right:",e.size.base,";z-index:",e.levels.menu,";",""),fullscreen:e=>Object(j.css)("top:",e.size.l,";right:",e.size.l,";","")}};var C={name:"eivff4",styles:"display:none"};const M=({languageId:e,value:t,onChange:n,width:i,height:a,options:l,overrideEditorWillMount:s,editorDidMount:u,editorWillMount:c,editorWillUnmount:d,useDarkTheme:O,transparentBackground:m,suggestionProvider:v,signatureProvider:M,hoverProvider:T,placeholder:P,languageConfiguration:R,codeActions:I,"aria-label":F=p.i18n.translate("sharedUXPackages.codeEditor.ariaLabel",{defaultMessage:"Code Editor"}),isCopyable:N=!1,allowFullScreen:_=!1,readOnlyMessage:L=p.i18n.translate("sharedUXPackages.codeEditor.readOnlyMessage",{defaultMessage:"Cannot edit in read-only editor"}),fitToContent:U,accessibilityOverlayEnabled:W=!0,dataTestSubj:B})=>{var H,A;const{colorMode:z,euiTheme:K}=Object(g.useEuiTheme)(),V=null!=O?O:"DARK"===z,X=Object(o.useMemo)((()=>"function"==typeof f&&"JestMockEditor"===f.name?f():f),[]),{FullScreenDisplay:G,FullScreenButton:J,isFullScreen:$,setIsFullScreen:q,onKeyDown:Q}=x({allowFullScreen:_}),Y=null!==(H=null==l?void 0:l.readOnly)&&void 0!==H&&H,[Z,ee]=Object(o.useState)(null),te=Object(o.useRef)(null),ne=Object(o.useRef)(!1),oe=Object(o.useRef)(null),re=Object(o.useRef)(null),[ie,ae]=Object(o.useState)(!0),le=D(n),se=Object(o.useCallback)((()=>{ae(!1),null==Z||Z.focus()}),[Z]),ue=Object(o.useCallback)((()=>{ae(!0)}),[]),ce=Object(o.useCallback)((e=>{e.key===g.keys.ENTER&&(e.preventDefault(),se())}),[se]),de=Object(o.useCallback)((e=>{var t;e.keyCode===b.monaco.KeyCode.Escape&&(ne.current||(e.preventDefault(),e.stopPropagation(),ue(),null===(t=oe.current)||void 0===t||t.focus()),q(!1))}),[ue,q]),fe=Object(o.useCallback)((()=>{ue()}),[ue]),ge=Object(o.useCallback)((()=>{const e=Object(j.jsx)("strong",null,p.i18n.translate("sharedUXPackages.codeEditor.enterKeyLabel",{defaultMessage:"Enter",description:"The name used for the Enter key on keyword. Will be {key} in sharedUXPackages.codeEditor.startEditing(ReadOnly)."})),t=Object(j.jsx)("strong",null,p.i18n.translate("sharedUXPackages.codeEditor.escapeKeyLabel",{defaultMessage:"Esc",description:"The label of the Escape key as printed on the keyboard. Will be {key} inside sharedUXPackages.codeEditor.stopEditing(ReadOnly)."}));return Object(j.jsx)(g.EuiToolTip,{"data-test-subj":"codeEditorAccessibilityOverlay",display:"block",content:Object(j.jsx)(r.a.Fragment,null,Object(j.jsx)("p",null,Y?Object(j.jsx)(h.FormattedMessage,{id:"sharedUXPackages.codeEditor.startEditingReadOnly",defaultMessage:"Press {key} to start interacting with the code.",values:{key:e}}):Object(j.jsx)(h.FormattedMessage,{id:"sharedUXPackages.codeEditor.startEditing",defaultMessage:"Press {key} to start editing.",values:{key:e}})),Object(j.jsx)("p",null,Y?Object(j.jsx)(h.FormattedMessage,{id:"sharedUXPackages.codeEditor.stopEditingReadOnly",defaultMessage:"Press {key} to stop interacting with the code.",values:{key:t}}):Object(j.jsx)(h.FormattedMessage,{id:"sharedUXPackages.codeEditor.stopEditing",defaultMessage:"Press {key} to stop editing.",values:{key:t}})))},Object(j.jsx)("div",{css:[y.keyboardHint(K),!ie&&C,"",""],id:Object(g.htmlIdGenerator)("codeEditor")(),ref:oe,tabIndex:0,role:"button",onClick:se,onKeyDown:ce,"aria-label":F,"data-test-subj":"codeEditorHint codeEditorHint--"+(ie?"active":"inactive")}))}),[ie,Y,K,se,ce,F]),be=Object(o.useCallback)((t=>{if(t!==b.monaco)throw new Error("react-monaco-editor is using a different version of monaco");s?s():(null==c||c(),b.monaco.languages.onLanguage(e,(()=>{v&&b.monaco.languages.registerCompletionItemProvider(e,v),M&&b.monaco.languages.registerSignatureHelpProvider(e,M),T&&b.monaco.languages.registerHoverProvider(e,T),R&&b.monaco.languages.setLanguageConfiguration(e,R),I&&b.monaco.languages.registerCodeActionProvider(e,I)})))}),[s,c,e,v,M,T,I,R]),pe=Object(o.useCallback)(((e,t)=>{var n,o,r;if(t!==b.monaco)throw new Error("react-monaco-editor is using a different version of monaco");"fonts"in window.document&&"ready"in window.document.fonts&&window.document.fonts.ready.then((()=>{b.monaco.editor.remeasureFonts()})).catch((e=>{console.warn("Failed to remeasureFonts in <CodeEditor/>"),console.warn(e)}));const i=null===(n=e.getDomNode())||void 0===n?void 0:n.getElementsByTagName("textarea")[0];i&&(i.tabIndex=-1,re.current=new MutationObserver((function(){i.tabIndex>=0&&(i.tabIndex=-1)})),re.current.observe(i,{attributes:!0})),e.onKeyDown(de),e.onDidBlurEditorText(fe);const a=e.getContribution("editor.contrib.messageController");e.onDidAttemptReadOnlyEdit((()=>{null==a||a.showMessage(L,e.getPosition())}));const l=null===(o=e.getContribution("editor.contrib.suggestController"))||void 0===o||null===(r=o.widget)||void 0===r?void 0:r.value;l&&l.onDidShow&&l.onDidHide&&(l.onDidShow((()=>{ne.current=!0})),l.onDidHide((()=>{ne.current=!1}))),null==u||u(e),ee(e)}),[u,fe,de,L]),he=Object(o.useCallback)((e=>{null==d||d();const t=e.getModel();null==t||t.dispose()}),[d]);Object(o.useEffect)((()=>()=>{var e;null===(e=re.current)||void 0===e||e.disconnect()}),[]),Object(o.useEffect)((()=>(P&&!t&&Z&&(te.current=new E(P,K,Z)),()=>{var e;null===(e=te.current)||void 0===e||e.dispose(),te.current=null})),[P,t,K,Z]),w({editor:Z,fitToContent:U,isFullScreen:$});const{CopyButton:je}=k({isCopyable:N,value:t}),Oe=null!==(A=null==l?void 0:l.theme)&&void 0!==A?A:m?V?b.CODE_EDITOR_DARK_THEME_TRANSPARENT_ID:b.CODE_EDITOR_LIGHT_THEME_TRANSPARENT_ID:V?b.CODE_EDITOR_DARK_THEME_ID:b.CODE_EDITOR_LIGHT_THEME_ID;return Object(j.jsx)("div",{css:y.container,onKeyDown:Q,"data-test-subj":null!=B?B:"kibanaCodeEditor",className:"kibanaCodeEditor"},W&&ge(),Object(j.jsx)(G,null,_||N?Object(j.jsx)("div",{css:$?[y.controls.base(K),y.controls.fullscreen(K)]:y.controls.base(K)},Object(j.jsx)(g.EuiFlexGroup,{gutterSize:"xs"},Object(j.jsx)(g.EuiFlexItem,null,Object(j.jsx)(je,null)),Object(j.jsx)(g.EuiFlexItem,null,Object(j.jsx)(J,null)))):null,Object(j.jsx)(S,null,Object(j.jsx)(X,{theme:Oe,language:e,value:t,onChange:le,width:$?"100vw":i,height:$?"100vh":U?void 0:a,editorWillMount:be,editorDidMount:pe,editorWillUnmount:he,options:{padding:_||N?{top:24}:{},renderLineHighlight:"none",scrollBeyondLastLine:!1,minimap:{enabled:!1},scrollbar:{useShadows:!1,alwaysConsumeMouseWheel:!1},wordBasedSuggestions:!1,wordWrap:"on",wrappingIndent:"indent",matchBrackets:"never",fontFamily:"Roboto Mono",fontSize:$?16:12,lineHeight:$?24:21,"bracketPairColorization.enabled":!1,...l}}))))},x=({allowFullScreen:e})=>{const[t,n]=Object(o.useState)(!1),i=()=>{n(!t)},a=Object(o.useCallback)((e=>{e.key===g.keys.ESCAPE&&(e.preventDefault(),e.stopPropagation(),n(!1))}),[]);return{FullScreenButton:()=>e?Object(j.jsx)(g.EuiI18n,{tokens:["euiCodeBlock.fullscreenCollapse","euiCodeBlock.fullscreenExpand"],defaults:["Collapse","Expand"]},(([e,n])=>Object(j.jsx)(g.EuiButtonIcon,{onClick:i,iconType:t?"fullScreenExit":"fullScreen",color:"text","aria-label":t?e:n,size:"xs"}))):null,FullScreenDisplay:Object(o.useMemo)((()=>({children:e})=>t?Object(j.jsx)(g.EuiOverlayMask,null,Object(j.jsx)(g.EuiFocusTrap,{clickOutsideDisables:!0},Object(j.jsx)("div",{css:y.fullscreenContainer},e))):Object(j.jsx)(r.a.Fragment,null,e)),[t]),onKeyDown:a,isFullScreen:t,setIsFullScreen:n}},k=({isCopyable:e,value:t})=>{const n=e&&t;return{showCopyButton:n,CopyButton:()=>n?Object(j.jsx)("div",{className:"euiCodeBlock__copyButton"},Object(j.jsx)(g.EuiI18n,{token:"euiCodeBlock.copyButton",default:"Copy"},(e=>Object(j.jsx)(g.EuiCopy,{textToCopy:t},(t=>Object(j.jsx)(g.EuiButtonIcon,{onClick:t,iconType:"copyClipboard",color:"text","aria-label":e,size:"xs"})))))):null}},w=({editor:e,fitToContent:t,isFullScreen:n})=>{const r=!!t,i=null==t?void 0:t.minLines,a=null==t?void 0:t.maxLines;Object(o.useEffect)((()=>{if(!e)return;if(n)return;if(!r)return;const t=()=>{const t=e.getContentHeight(),n=e.getOption(b.monaco.editor.EditorOption.lineHeight),o=(null!=i?i:1)*n;let r=a?a*n:t;r=Math.max(o,r),e.layout({height:Math.min(r,Math.max(o,t)),width:e.getLayoutInfo().width})};t();const o=e.onDidContentSizeChange(t);return()=>{o.dispose(),e.layout()}}),[e,r,i,a,n])},D=e=>{const t=Object(o.useRef)(e);return Object(o.useEffect)((()=>{t.current=e}),[e]),Object(o.useCallback)(((e,n)=>{t.current&&t.current(e,n)}),[])},S=({children:e})=>{const[t,n]=r.a.useState(null);return Object(o.useEffect)((()=>{const e=e=>{null!=t&&t.contains(e.target)&&e.defaultPrevented&&t.dispatchEvent(new MouseEvent(e.type,e))};if(t)return t.addEventListener("mousedown",e),()=>t.removeEventListener("mousedown",e)}),[t]),Object(j.jsx)("div",{ref:n,style:{display:"contents"}},e)}}}]);