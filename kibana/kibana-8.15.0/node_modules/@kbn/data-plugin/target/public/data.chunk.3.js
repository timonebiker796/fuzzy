(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[3],{130:function(e,t,a){"use strict";a.r(t);var s=a(2),o=a.n(s),i=a(9),l=a.n(i),r=a(71),n=a(18),d=a(7),c=a(0),p={name:"1au312t",styles:".euiTableHeaderCell{min-width:100px;}>div:last-child{position:sticky;left:0;}"};class data_table_DataTableFormat extends i.Component{constructor(...e){super(...e),o()(this,"csvSeparator",this.props.uiSettings.get("csv:separator",",")),o()(this,"quoteValues",this.props.uiSettings.get("csv:quoteValues",!0)),o()(this,"state",{})}static renderCell({table:e,columnIndex:t,rowIndex:a,formattedValue:s,uiActions:o,isFilterable:i}){const l=e.columns[t];return Object(d.jsx)(n.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(d.jsx)(n.EuiFlexItem,{grow:!1},s),Object(d.jsx)(n.EuiFlexItem,{grow:!1},Object(d.jsx)(n.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center"},i&&Object(d.jsx)(n.EuiToolTip,{position:"bottom",content:Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.filterForValueButtonTooltip",defaultMessage:"Filter for value"})},Object(d.jsx)(n.EuiButtonIcon,{iconType:"plusInCircle",color:"text","aria-label":c.i18n.translate("data.inspector.table.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":"filterForInspectorCellValue",className:"insDataTableFormat__filter",onClick:()=>{const s=e.rows[a][l.id],i={table:e,column:t,row:a,value:s};o.executeTriggerActions("VALUE_CLICK_TRIGGER",{data:{data:[i]}})}})),i&&Object(d.jsx)(n.EuiFlexItem,{grow:!1},Object(d.jsx)(n.EuiToolTip,{position:"bottom",content:Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.filterOutValueButtonTooltip",defaultMessage:"Filter out value"})},Object(d.jsx)(n.EuiButtonIcon,{iconType:"minusInCircle",color:"text","aria-label":c.i18n.translate("data.inspector.table.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":"filterOutInspectorCellValue",className:"insDataTableFormat__filter",onClick:()=>{const s=e.rows[a][l.id],i={table:e,column:t,row:a,value:s};o.executeTriggerActions("VALUE_CLICK_TRIGGER",{data:{data:[i],negate:!0}})}}))))))}static getDerivedStateFromProps({data:e,uiActions:t,fieldFormats:a,isFilterable:s}){return e?{columns:e.columns.map(((o,i)=>{const l={id:"string",...o.meta.params},r=a.deserialize(l),n=s(o);return{name:o.name,field:o.id,sortable:!0,render:a=>{const s=r.convert(a),l=e.rows.findIndex((e=>e[o.id]===a))||0;return data_table_DataTableFormat.renderCell({table:e,columnIndex:i,rowIndex:l,formattedValue:s,uiActions:t,isFilterable:n})}}})),rows:e.rows}:{columns:null,rows:null}}render(){const{columns:e,rows:t}=this.state;return Object(d.jsx)(n.EuiInMemoryTable,{tableLayout:"auto",className:"insDataTableFormat__table eui-xScroll","data-test-subj":"inspectorTable",columns:e,items:t,sorting:!0,pagination:{pageSizeOptions:[10,20,50],initialPageSize:20},css:p})}}class data_table_selector_TableSelector extends i.Component{constructor(...e){super(...e),o()(this,"state",{isPopoverOpen:!1}),o()(this,"togglePopover",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),o()(this,"closePopover",(()=>{this.setState({isPopoverOpen:!1})})),o()(this,"renderTableDropdownItem",((e,t)=>Object(d.jsx)(n.EuiContextMenuItem,{key:t,icon:e===this.props.selectedTable?"check":"empty",onClick:()=>{this.props.onTableChanged(e),this.closePopover()},"data-test-subj":`inspectorTableChooser${t}`},Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.tableLabel",defaultMessage:"Table {index}",values:{index:t+1}}))))}render(){const e=this.props.tables.findIndex((e=>e===this.props.selectedTable));return Object(d.jsx)(n.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(d.jsx)(n.EuiFlexItem,{grow:!1},Object(d.jsx)("strong",null,Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.tableSelectorLabel",defaultMessage:"Selected:"}))),Object(d.jsx)(n.EuiFlexItem,{grow:!0},Object(d.jsx)(n.EuiPopover,{id:"inspectorTableChooser",button:Object(d.jsx)(n.EuiButtonEmpty,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.togglePopover,"data-test-subj":"inspectorTableChooser"},Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.inspectorTableChooserButton",defaultMessage:"Table {index}",values:{index:e+1}})),isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft",repositionOnScroll:!0},Object(d.jsx)(n.EuiContextMenuPanel,{items:this.props.tables.map(this.renderTableDropdownItem),"data-test-subj":"inspectorTableChooserMenuPanel"}))))}}var u=a(1),b=a(106),j=a(3);const m=Object(u.memoize)((e=>e.some((({columns:e,rows:t})=>Object(j.tableHasFormulas)(e,t)))));class download_options_DataDownloadOptions extends i.Component{constructor(...e){super(...e),o()(this,"state",{isPopoverOpen:!1}),o()(this,"onTogglePopover",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),o()(this,"closePopover",(()=>{this.setState({isPopoverOpen:!1})})),o()(this,"exportCsv",((e=!0)=>{let t=this.props.title;t&&0!==t.length||(t=c.i18n.translate("data.inspector.table.downloadOptionsUnsavedFilename",{defaultMessage:"unsaved"}));const a=this.props.datatables.reduce(((a,s,o)=>{if(s){const i=this.props.datatables.length>1?`-${o+1}`:"";a[`${t}${i}.csv`]={content:Object(j.datatableToCSV)(s,{csvSeparator:this.props.uiSettings.get("csv:separator",","),quoteValues:this.props.uiSettings.get("csv:quoteValues",!0),raw:!e,formatFactory:this.props.fieldFormats.deserialize,escapeFormulaValues:!1}),type:j.CSV_MIME_TYPE}}return a}),{});a&&Object(b.downloadMultipleAs)(a)})),o()(this,"exportFormattedCsv",(()=>{this.exportCsv(!0)})),o()(this,"exportFormattedAsRawCsv",(()=>{this.exportCsv(!1)}))}renderFormattedDownloads(){const e=m(this.props.datatables),t=Object(d.jsx)(n.EuiButton,{iconType:"arrowDown",iconSide:"right",size:"s",onClick:this.onTogglePopover},Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.downloadCSVToggleButtonLabel",defaultMessage:"Download CSV"})),a=e?Object(d.jsx)(n.EuiToolTip,{position:"top",content:c.i18n.translate("data.inspector.table.exportButtonFormulasWarning",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})},t):t,s=[Object(d.jsx)(n.EuiContextMenuItem,{key:"csv",onClick:this.exportFormattedCsv,toolTipContent:Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.formattedCSVButtonTooltip",defaultMessage:"Download the data in table format"}),toolTipProps:{position:"left"}},Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.formattedCSVButtonLabel",defaultMessage:"Formatted CSV"})),Object(d.jsx)(n.EuiContextMenuItem,{key:"rawCsv",onClick:this.exportFormattedAsRawCsv,toolTipContent:Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.rawCSVButtonTooltip",defaultMessage:"Download the data as provided, for example, dates as timestamps"}),toolTipProps:{position:"left"}},Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.rawCSVButtonLabel",defaultMessage:"Raw CSV"}))];return Object(d.jsx)(n.EuiPopover,{id:"inspectorDownloadData",button:a,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",repositionOnScroll:!0},Object(d.jsx)(n.EuiContextMenuPanel,{className:"eui-textNoWrap",items:s}))}render(){return this.renderFormattedDownloads()}}class data_view_DataViewComponent extends i.Component{constructor(...e){super(...e),o()(this,"state",{}),o()(this,"onUpdateData",(e=>{const t=Object.keys(e),a=t.length?e[t[0]]:void 0;a&&this.setState({datatable:a})})),o()(this,"selectTable",(e=>{e!==this.state.datatable&&this.setState({datatable:e})}))}static getDerivedStateFromProps(e,t){if(t&&e.adapters===t.adapters)return null;const{tables:a}=e.adapters.tables,s=Object.keys(a),o=s.length?a[s[0]]:void 0;return{adapters:e.adapters,datatable:o}}componentDidMount(){this.props.adapters.tables.on("change",this.onUpdateData)}componentWillUnmount(){this.props.adapters.tables.removeListener("change",this.onUpdateData)}static renderNoData(){return Object(d.jsx)(n.EuiEmptyPrompt,{title:Object(d.jsx)("h2",null,Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.noDataAvailableTitle",defaultMessage:"No data available"})),body:Object(d.jsx)(l.a.Fragment,null,Object(d.jsx)("p",null,Object(d.jsx)(r.FormattedMessage,{id:"data.inspector.table.noDataAvailableDescription",defaultMessage:"The element did not provide any data."})))})}render(){var e;if(!this.state.datatable)return data_view_DataViewComponent.renderNoData();const t=Object.values(this.state.adapters.tables.tables);return Object(d.jsx)(l.a.Fragment,null,Object(d.jsx)(n.EuiFlexGroup,null,Object(d.jsx)(n.EuiFlexItem,{grow:!0},t.length>1?Object(d.jsx)(l.a.Fragment,null,Object(d.jsx)(n.EuiText,{size:"xs"},Object(d.jsx)("p",{role:"status","aria-live":"polite","aria-atomic":"true"},Object(d.jsx)(r.FormattedMessage,{"data-test-subj":"inspectorDataViewSelectorLabel",id:"data.inspector.table.tablesDescription",defaultMessage:"There are {tablesCount, plural, one {# table} other {# tables} } in total",values:{tablesCount:t.length}}))),Object(d.jsx)(n.EuiSpacer,{size:"xs"}),Object(d.jsx)(data_table_selector_TableSelector,{tables:t,selectedTable:this.state.datatable,onTableChanged:this.selectTable})):null),Object(d.jsx)(n.EuiFlexItem,{grow:!1},Object(d.jsx)(download_options_DataDownloadOptions,{title:(null===(e=this.props.options)||void 0===e?void 0:e.fileName)||this.props.title,uiSettings:this.props.uiSettings,datatables:t,fieldFormats:this.props.fieldFormats}))),Object(d.jsx)(n.EuiSpacer,{size:"s"}),Object(d.jsx)(data_table_DataTableFormat,{data:this.state.datatable,uiSettings:this.props.uiSettings,fieldFormats:this.props.fieldFormats,uiActions:this.props.uiActions,isFilterable:this.props.isFilterable}))}}t.default=data_view_DataViewComponent}}]);