(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[2],{124:function(e,a,t){switch(window.__kbnThemeTag__){case"v8dark":return t(125);case"v8light":return t(127)}},125:function(e,a,t){var s=t(72),n=t(126);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},126:function(e,a,t){(a=t(73)(!1)).push([e.i,".searchSessionIndicator{padding:0 4px}.searchSessionIndicator__panel{width:288px}",""]),e.exports=a},127:function(e,a,t){var s=t(72),n=t(128);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.i,n,""]]);s(n,{insert:"head",singleton:!1}),e.exports=n.locals||{}},128:function(e,a,t){(a=t(73)(!1)).push([e.i,".searchSessionIndicator{padding:0 4px}.searchSessionIndicator__panel{width:288px}",""]),e.exports=a},129:function(e,a,t){"use strict";t.r(a),t.d(a,"SearchSessionIndicator",(function(){return T}));var s=t(32),n=t.n(s),o=t(9),i=t.n(o),r=t(18),c=t(6),d=t.n(c),l=t(71),u=t(0),p=t(7);t(124);const h=({name:e,editName:a})=>{const[t,s]=i.a.useState(!1),[n,c]=i.a.useState(e),[d,h]=i.a.useState(!1),x=!!n;return Object(o.useEffect)((()=>{t||c(e)}),[t,e]),t?Object(p.jsx)(r.EuiFieldText,{autoFocus:!0,compressed:!0,placeholder:u.i18n.translate("data.searchSessionName.placeholderText",{defaultMessage:"Enter a name for the search session"}),value:n,onChange:e=>{c(e.target.value)},"aria-label":u.i18n.translate("data.searchSessionName.ariaLabelText",{defaultMessage:"Search session name"}),"data-test-subj":"searchSessionNameInput",append:Object(p.jsx)(r.EuiButtonEmpty,{size:"xs",color:"text",onClick:async()=>{if(x){if(n!==e&&a){h(!0);try{await a(n)}catch(e){}}h(!1),s(!1)}},disabled:!x,isLoading:d,"data-test-subj":"searchSessionNameSave"},Object(p.jsx)(l.FormattedMessage,{id:"data.searchSessionName.saveButtonText",defaultMessage:"Save"}))}):Object(p.jsx)(r.EuiFlexGroup,{wrap:!1,responsive:!1,alignItems:"center",justifyContent:"spaceBetween",gutterSize:"none",style:{paddingTop:4,paddingBottom:4}},Object(p.jsx)(r.EuiText,{size:"s",className:"eui-textTruncate"},Object(p.jsx)("h4",{className:"eui-textTruncate"},e)),Object(p.jsx)(r.EuiButtonIcon,{autoFocus:!0,iconType:"pencil",color:"text","aria-label":u.i18n.translate("data.searchSessionName.editAriaLabelText",{defaultMessage:"Edit search session name"}),"data-test-subj":"searchSessionNameEdit",onClick:()=>s(!0)}))};var x=t(22);const g=({onCancel:e=(()=>{}),buttonProps:a={}})=>Object(p.jsx)(r.EuiButtonEmpty,n()({onClick:e,"data-test-subj":"searchSessionIndicatorCancelBtn",color:"danger"},a),Object(p.jsx)(l.FormattedMessage,{id:"data.searchSessionIndicator.cancelButtonText",defaultMessage:"Stop session"})),S=({viewSearchSessionsLink:e="management/kibana/search_sessions",onViewSearchSessions:a=(()=>{}),buttonProps:t={},managementDisabled:s,managementDisabledReasonText:o})=>Object(p.jsx)(r.EuiToolTip,{content:o},Object(p.jsx)(r.EuiButtonEmpty,n()({href:e,onClick:a,"data-test-subj":"searchSessionIndicatorViewSearchSessionsLink",isDisabled:s},t),Object(p.jsx)(l.FormattedMessage,{id:"data.searchSessionIndicator.viewSearchSessionsLinkText",defaultMessage:"Manage sessions"}))),b={[x.a.None]:null,[x.a.Loading]:{button:{color:"text",iconType:({title:e,titleId:a,...t})=>Object(p.jsx)("svg",n()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:16,height:16,"aria-labelledby":a},t),e?Object(p.jsx)("title",{id:a},e):null,Object(p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.5 13c3.033 0 5.5-2.467 5.5-5.5S10.533 2 7.5 2c-.27614 0-.5-.22386-.5-.5s.22386-.5.5-.5C11.09 1 14 3.91 14 7.5S11.09 14 7.5 14 1 11.09 1 7.5c0-.27614.22386-.5.5-.5s.5.22386.5.5C2 10.533 4.467 13 7.5 13zM4.6724 1.96808c0 .27614.22386.5.5.5s.5-.22386.5-.5-.22386-.5-.5-.5-.5.22386-.5.5zM2.8627 3.15836c0 .27614.22386.5.5.5s.5-.22386.5-.5c0-.27615-.22386-.5-.5-.5s-.5.22385-.5.5zm-.82355 2.33755c-.27615 0-.5-.22386-.5-.5s.22385-.5.5-.5c.27614 0 .5.22386.5.5s-.22386.5-.5.5zM10.5 7H8V3.5c0-.276-.224-.5-.5-.5s-.5.224-.5.5v4c0 .276.224.5.5.5h3c.276 0 .5-.224.5-.5s-.224-.5-.5-.5z"})),"aria-label":u.i18n.translate("data.searchSessionIndicator.loadingResultsIconAriaLabel",{defaultMessage:"Search session loading"}),tooltipText:u.i18n.translate("data.searchSessionIndicator.loadingResultsIconTooltipText",{defaultMessage:"Search session loading"})},popover:{title:u.i18n.translate("data.searchSessionIndicator.loadingResultsTitle",{defaultMessage:"Your search is taking a while..."}),description:u.i18n.translate("data.searchSessionIndicator.loadingResultsDescription",{defaultMessage:"Save your session, continue your work, and return to completed results"}),whenText:e=>u.i18n.translate("data.searchSessionIndicator.loadingResultsWhenText",{defaultMessage:"Started {when}",values:{when:e.startedTime?d()(e.startedTime).format("L @ LTS"):""}}),primaryAction:g,secondaryAction:({onContinueInBackground:e=(()=>{}),buttonProps:a={},saveDisabled:t=!1,saveDisabledReasonText:s})=>Object(p.jsx)(r.EuiToolTip,{content:s},Object(p.jsx)(r.EuiButtonEmpty,n()({onClick:e,"data-test-subj":"searchSessionIndicatorSaveBtn",isDisabled:t},a),Object(p.jsx)(l.FormattedMessage,{id:"data.searchSessionIndicator.continueInBackgroundButtonText",defaultMessage:"Save session"})))}},[x.a.Completed]:{button:{color:"text",iconType:"check","aria-label":u.i18n.translate("data.searchSessionIndicator.resultsLoadedIconAriaLabel",{defaultMessage:"Search session complete"}),tooltipText:u.i18n.translate("data.searchSessionIndicator.resultsLoadedIconTooltipText",{defaultMessage:"Search session complete"})},popover:{title:u.i18n.translate("data.searchSessionIndicator.resultsLoadedText",{defaultMessage:"Search session complete"}),description:u.i18n.translate("data.searchSessionIndicator.resultsLoadedDescriptionText",{defaultMessage:"Save your session and return to it later"}),whenText:e=>u.i18n.translate("data.searchSessionIndicator.resultsLoadedWhenText",{defaultMessage:"Completed {when}",values:{when:e.completedTime?d()(e.completedTime).format("L @ LTS"):""}}),primaryAction:({onSaveResults:e=(()=>{}),buttonProps:a={},saveDisabled:t=!1,saveDisabledReasonText:s})=>Object(p.jsx)(r.EuiToolTip,{content:s},Object(p.jsx)(r.EuiButtonEmpty,n()({onClick:e,"data-test-subj":"searchSessionIndicatorSaveBtn",isDisabled:t},a),Object(p.jsx)(l.FormattedMessage,{id:"data.searchSessionIndicator.saveButtonText",defaultMessage:"Save session"}))),secondaryAction:S}},[x.a.BackgroundLoading]:{button:{iconType:r.EuiLoadingSpinner,"aria-label":u.i18n.translate("data.searchSessionIndicator.loadingInTheBackgroundIconAriaLabel",{defaultMessage:"Saved session in progress"}),tooltipText:u.i18n.translate("data.searchSessionIndicator.loadingInTheBackgroundIconTooltipText",{defaultMessage:"Saved session in progress"})},popover:{title:u.i18n.translate("data.searchSessionIndicator.loadingInTheBackgroundTitleText",{defaultMessage:"Saved session in progress"}),description:u.i18n.translate("data.searchSessionIndicator.loadingInTheBackgroundDescriptionText",{defaultMessage:"You can return to completed results from Management"}),whenText:e=>u.i18n.translate("data.searchSessionIndicator.loadingInTheBackgroundWhenText",{defaultMessage:"Started {when}",values:{when:e.startedTime?d()(e.startedTime).format("L @ LTS"):""}}),primaryAction:g,secondaryAction:S}},[x.a.BackgroundCompleted]:{button:{color:"success",iconType:"checkInCircleFilled","aria-label":u.i18n.translate("data.searchSessionIndicator.resultLoadedInTheBackgroundIconAriaLabel",{defaultMessage:"Saved session complete"}),tooltipText:u.i18n.translate("data.searchSessionIndicator.resultLoadedInTheBackgroundIconTooltipText",{defaultMessage:"Saved session complete"})},popover:{title:u.i18n.translate("data.searchSessionIndicator.resultLoadedInTheBackgroundTitleText",{defaultMessage:"Search session saved"}),description:u.i18n.translate("data.searchSessionIndicator.resultLoadedInTheBackgroundDescriptionText",{defaultMessage:"You can return to these results from Management"}),whenText:e=>u.i18n.translate("data.searchSessionIndicator.resultLoadedInTheBackgroundWhenText",{defaultMessage:"Completed {when}",values:{when:e.completedTime?d()(e.completedTime).format("L @ LTS"):""}}),secondaryAction:S}},[x.a.Restored]:{button:{color:"success",iconType:({title:e,titleId:a,...t})=>Object(p.jsx)("svg",n()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:16,height:16,"aria-labelledby":a},t),e?Object(p.jsx)("title",{id:a},e):null,Object(p.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 8c0 3.866-3.134 7-7 7-3.86599 0-7-3.134-7-7 0-3.86599 3.13401-7 7-7 3.866 0 7 3.13401 7 7zm1 0c0 4.4183-3.5817 8-8 8-4.41828 0-8-3.5817-8-8 0-4.41828 3.58172-8 8-8 4.4183 0 8 3.58172 8 8zm-9.14533 2.6459c.098.097.226.146.354.146.128 0 .256-.049.354-.146l4.79173-4.79165c.195-.196.195-.512 0-.708-.196-.195-.512-.195-.708 0L7.20867 9.58486 4.85424 7.2295c-.196-.195-.512-.195-.708 0-.195.196-.195.512 0 .708l2.70843 2.7084z"})),"aria-label":u.i18n.translate("data.searchSessionIndicator.restoredResultsIconAriaLabel",{defaultMessage:"Saved session restored"}),tooltipText:u.i18n.translate("data.searchSessionIndicator.restoredResultsTooltipText",{defaultMessage:"Search session restored"})},popover:{title:u.i18n.translate("data.searchSessionIndicator.restoredTitleText",{defaultMessage:"Search session restored"}),description:u.i18n.translate("data.searchSessionIndicator.restoredDescriptionText",{defaultMessage:"You are viewing cached data from a specific time range. Changing the time range or filters will re-run the session"}),whenText:e=>u.i18n.translate("data.searchSessionIndicator.restoredWhenText",{defaultMessage:"Completed {when}",values:{when:e.completedTime?d()(e.completedTime).format("L @ LTS"):""}}),secondaryAction:S}},[x.a.Canceled]:{button:{color:"danger",iconType:"error","aria-label":u.i18n.translate("data.searchSessionIndicator.canceledIconAriaLabel",{defaultMessage:"Search session stopped"}),tooltipText:u.i18n.translate("data.searchSessionIndicator.canceledTooltipText",{defaultMessage:"Search session stopped"})},popover:{title:u.i18n.translate("data.searchSessionIndicator.canceledTitleText",{defaultMessage:"Search session stopped"}),description:u.i18n.translate("data.searchSessionIndicator.canceledDescriptionText",{defaultMessage:"You are viewing incomplete data"}),whenText:e=>u.i18n.translate("data.searchSessionIndicator.canceledWhenText",{defaultMessage:"Stopped {when}",values:{when:e.canceledTime?d()(e.canceledTime).format("L @ LTS"):""}}),secondaryAction:S}}},T=i.a.forwardRef(((e,a)=>{var t,s;const[c,d]=i.a.useState(!1),l=Object(o.useCallback)((()=>d(!1)),[]),u=e.onOpened,x=Object(o.useCallback)((()=>{d(!0),u&&u(e.state)}),[u,e.state]),g=Object(o.useCallback)((()=>{c?l():x()}),[c,x,l]);if(Object(o.useImperativeHandle)(a,(()=>({openPopover:()=>{x()},closePopover:()=>{l()}})),[x,l]),!b[e.state])return null;const{button:S,popover:T}=b[e.state];return Object(p.jsx)(r.EuiPopover,{ownFocus:!0,isOpen:c,closePopover:l,anchorPosition:"downLeft",panelPaddingSize:"m",className:"searchSessionIndicator","data-test-subj":"searchSessionIndicator","data-state":e.state,"data-save-disabled":null!==(t=e.saveDisabled)&&void 0!==t&&t,panelClassName:"searchSessionIndicator__panel",repositionOnScroll:!0,button:Object(p.jsx)(r.EuiToolTip,{content:S.tooltipText,delay:"long"},Object(p.jsx)(r.EuiButtonIcon,{color:S.color,"aria-label":S["aria-label"],iconType:S.iconType,onClick:g}))},Object(p.jsx)("div",{"data-test-subj":"searchSessionIndicatorPopoverContainer"},e.searchSessionName&&e.saveSearchSessionNameFn?Object(p.jsx)(h,{name:e.searchSessionName,editName:e.saveSearchSessionNameFn}):Object(p.jsx)(r.EuiText,{size:"s"},Object(p.jsx)("p",null,T.title)),Object(p.jsx)(r.EuiSpacer,{size:"xs"}),null!==(s=T.whenText)&&void 0!==s&&s.call(T,e)?Object(p.jsx)(i.a.Fragment,null,Object(p.jsx)(r.EuiText,{size:"xs",color:"subdued"},Object(p.jsx)("p",null,T.whenText(e))),Object(p.jsx)(r.EuiSpacer,{size:"xs"})):null,Object(p.jsx)(r.EuiText,{size:"xs",color:"subdued"},Object(p.jsx)("p",null,T.description)),Object(p.jsx)(r.EuiSpacer,{size:"m"}),Object(p.jsx)(r.EuiFlexGroup,{wrap:!0,responsive:!1,alignItems:"center",justifyContent:"flexEnd",gutterSize:"s"},T.primaryAction&&Object(p.jsx)(r.EuiFlexItem,{grow:!1},Object(p.jsx)(T.primaryAction,n()({},e,{buttonProps:{size:"xs"}}))),T.secondaryAction&&Object(p.jsx)(r.EuiFlexItem,{grow:!1},Object(p.jsx)(T.secondaryAction,n()({},e,{buttonProps:{size:"xs",flush:"right"}}))))))}));a.default=T}}]);