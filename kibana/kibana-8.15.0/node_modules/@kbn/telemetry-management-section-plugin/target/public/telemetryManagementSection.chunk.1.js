(window.telemetryManagementSection_bundle_jsonpfunction=window.telemetryManagementSection_bundle_jsonpfunction||[]).push([[1,2],[,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"j",(function(){return l})),a.d(t,"l",(function(){return u})),a.d(t,"n",(function(){return o})),a.d(t,"p",(function(){return d})),a.d(t,"r",(function(){return c})),a.d(t,"t",(function(){return g})),a.d(t,"a",(function(){return b})),a.d(t,"c",(function(){return j})),a.d(t,"e",(function(){return f})),a.d(t,"g",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"k",(function(){return v})),a.d(t,"m",(function(){return y})),a.d(t,"o",(function(){return h})),a.d(t,"q",(function(){return O})),a.d(t,"s",(function(){return x}));const n=e=>!e||void 0===e.type||"array"===e.type,s=e=>!e||void 0===e.type||"boolean"===e.type,i=e=>!e||void 0===e.type||"color"===e.type,r=e=>!e||void 0===e.type||"image"===e.type,l=e=>!e||void 0===e.type||"json"===e.type,u=e=>!e||void 0===e.type||"markdown"===e.type,o=e=>!e||void 0===e.type||"number"===e.type,d=e=>!e||void 0===e.type||"select"===e.type,c=e=>!e||void 0===e.type||"string"===e.type,g=e=>!e||void 0===e.type||"undefined"===e.type,b=e=>"array"===e.type,j=e=>"boolean"===e.type,f=e=>"color"===e.type,p=e=>"image"===e.type,m=e=>"json"===e.type,v=e=>"markdown"===e.type,y=e=>"number"===e.type,h=e=>"select"===e.type,O=e=>"string"===e.type,x=e=>"undefined"===e.type},function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return o}));var n=a(19),s=a.n(n);const i=(e,t=e.userValue)=>{const{value:a}=e;return null==t||s()(a,t)},r=(e,t)=>{if(!t)return!1;const{unsavedValue:a}=t,{savedValue:n,defaultValue:i}=e,r=null!=n;return!s()(a,r?n:i)};function l(e,t){const a=r(e,t);return[a?null==t?void 0:t.unsavedValue:void 0!==e.savedValue&&null!==e.savedValue?e.savedValue:e.defaultValue,a]}function u(e,t){const{defaultValue:a}=e,n=r(e,t)?null==t?void 0:t.unsavedValue:void 0!==e.savedValue&&null!==e.savedValue?e.savedValue:e.defaultValue;return s()(n,a)}const o=e=>{const{onInputChange:t,field:a}=e;return e=>{r(a,e)?t(e):t()}};var d=a(2);d.i18n.translate("management.settings.categoryNames.generalLabel",{defaultMessage:"General"}),d.i18n.translate("management.settings.categoryNames.machineLearningLabel",{defaultMessage:"Machine Learning"}),d.i18n.translate("management.settings.categoryNames.observabilityLabel",{defaultMessage:"Observability"}),d.i18n.translate("management.settings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),d.i18n.translate("management.settings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),d.i18n.translate("management.settings.categoryNames.visualizationsLabel",{defaultMessage:"Visualization"}),d.i18n.translate("management.settings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),d.i18n.translate("management.settings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),d.i18n.translate("management.settings.categoryNames.searchLabel",{defaultMessage:"Search"}),d.i18n.translate("management.settings.categoryNames.securitySolutionLabel",{defaultMessage:"Security Solution"}),d.i18n.translate("management.settings.categoryNames.enterpriseSearchLabel",{defaultMessage:"Enterprise Search"}),d.i18n.translate("management.settings.categoryNames.presentationLabLabel",{defaultMessage:"Presentation Labs"}),d.i18n.translate("management.settings.categoryNames.accessibilityLabel",{defaultMessage:"Accessibility"}),d.i18n.translate("management.settings.categoryNames.autocompleteLabel",{defaultMessage:"Autocomplete"}),d.i18n.translate("management.settings.categoryNames.bannerLabel",{defaultMessage:"Banner"}),d.i18n.translate("management.settings.categoryNames.rollupsLabel",{defaultMessage:"Rollups"}),d.i18n.translate("management.settings.categoryNames.devToolsLabel",{defaultMessage:"Developer Tools"})},function(e,t,a){e.exports=a(5)(2)},function(e,t,a){"use strict";a.d(t,"b",(function(){return n.a})),a.d(t,"c",(function(){return n.c})),a.d(t,"d",(function(){return n.e})),a.d(t,"e",(function(){return n.g})),a.d(t,"f",(function(){return n.i})),a.d(t,"g",(function(){return n.k})),a.d(t,"h",(function(){return n.m})),a.d(t,"i",(function(){return n.o})),a.d(t,"j",(function(){return n.q})),a.d(t,"k",(function(){return n.s})),a.d(t,"a",(function(){return c}));var n=a(15),s=a(21),i=a.n(s),r=a(3),l=a(16);const u="category",o=e=>i()(null!=e?e:"").map((e=>e.toLowerCase())).join(" "),d=(e="")=>{if(!e)return"";const t=r.Query.parse(e);if(t.hasOrFieldClause(u)){const e=t.getOrFieldClause(u),a=o(t.removeOrFieldClauses(u).text);if(!e||!Array.isArray(e.value))return a;let n=r.Query.parse("");return e.value.forEach((e=>{n=n.addOrFieldValue(u,e)})),`${a} ${n.text}`}return o(e)},c=e=>{const{id:t,setting:a,params:n={isCustom:!1,isOverridden:!1}}=e,{category:s,deprecation:i,description:r,metric:u,name:o,optionLabels:c,options:g,order:b,readonly:j,requiresPageReload:f,type:p,userValue:m,value:v}=a,{isCustom:y,isOverridden:h}=n,O=s&&s.length?[s[0]]:["general"],x={values:g||[],labels:c||{}},C=null==v||""===v?"null":String(v);return{ariaAttributes:{ariaLabel:o||d(o)},categories:O,defaultValue:v,defaultValueDisplay:C,deprecation:i,description:r,displayName:o||t,groupId:`${o||t}-group`,id:t,isCustom:y||!1,isDefaultValue:Object(l.d)(a),isOverridden:h||!1,isReadOnly:!!j,metric:u,name:o||t,options:x,order:b,requiresPageReload:!!f,savedValue:m,type:p,unsavedFieldId:`${t}-unsaved`}}},function(e,t,a){e.exports=a(5)(625)},function(e,t,a){"use strict";a.r(t),a.d(t,"OptInExampleFlyout",(function(){return opt_in_example_flyout_OptInExampleFlyout}));var n=a(17),s=a.n(n),i=a(0),r=a(3),l=a(9),u=a(1);const o=Object(u.jsx)(r.EuiFlexGroup,{justifyContent:"spaceAround"},Object(u.jsx)(r.EuiFlexItem,{grow:!1},Object(u.jsx)(r.EuiLoadingSpinner,{size:"xl"})));class opt_in_example_flyout_OptInExampleFlyout extends i.PureComponent{constructor(...e){super(...e),s()(this,"_isMounted",!1),s()(this,"state",{data:null,isLoading:!0,hasPrivilegeToRead:!1})}async componentDidMount(){this._isMounted=!0;try{const{fetchExample:e}=this.props,t=await e();this._isMounted&&this.setState({data:Array.isArray(t)?t:null,isLoading:!1,hasPrivilegeToRead:!0})}catch(e){this.setState({isLoading:!1,hasPrivilegeToRead:403!==e.status})}}componentWillUnmount(){this._isMounted=!1}renderBody({data:e,isLoading:t,hasPrivilegeToRead:a}){return t?o:a?null===e?Object(u.jsx)(r.EuiCallOut,{title:Object(u.jsx)(l.FormattedMessage,{id:"telemetry.callout.errorLoadingClusterStatisticsTitle",defaultMessage:"Error loading cluster statistics"}),color:"danger",iconType:"cross"},Object(u.jsx)(l.FormattedMessage,{id:"telemetry.callout.errorLoadingClusterStatisticsDescription",defaultMessage:"An unexpected error occurred while attempting to fetch the cluster statistics. This can occur because Elasticsearch failed, Kibana failed, or there is a network error. Check Kibana, then reload the page and try again."})):Object(u.jsx)(r.EuiCodeBlock,{language:"json",isCopyable:!0},JSON.stringify(e,null,2)):Object(u.jsx)(r.EuiCallOut,{title:Object(u.jsx)(l.FormattedMessage,{id:"telemetry.callout.errorUnprivilegedUserTitle",defaultMessage:"Error displaying cluster statistics"}),color:"danger",iconType:"cross"},Object(u.jsx)(l.FormattedMessage,{id:"telemetry.callout.errorUnprivilegedUserDescription",defaultMessage:"You do not have access to see unencrypted cluster statistics."}))}render(){return Object(u.jsx)(r.EuiPortal,null,Object(u.jsx)(r.EuiFlyout,{ownFocus:!0,onClose:this.props.onClose,maxWidth:!0},Object(u.jsx)(r.EuiFlyoutHeader,null,Object(u.jsx)(r.EuiTitle,null,Object(u.jsx)("h2",null,Object(u.jsx)(l.FormattedMessage,{id:"telemetry.callout.clusterStatisticsTitle",defaultMessage:"Cluster statistics"}))),Object(u.jsx)(r.EuiTextColor,{color:"subdued"},Object(u.jsx)(r.EuiText,null,Object(u.jsx)(l.FormattedMessage,{id:"telemetry.callout.clusterStatisticsDescription",defaultMessage:"This is an example of the basic cluster statistics that we'll collect. It includes the number of indices, shards, and nodes. It also includes high-level usage statistics, such as whether monitoring is turned on."})))),Object(u.jsx)(r.EuiFlyoutBody,null,this.renderBody(this.state))))}}},function(e,t,a){var n=a(22),s=a(23),i=a(24),r=a(25);e.exports=function(e,t,a){return e=i(e),void 0===(t=a?void 0:t)?s(e)?r(e):n(e):e.match(t)||[]}},function(e,t){var a=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;e.exports=function(e){return e.match(a)||[]}},function(e,t){var a=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;e.exports=function(e){return a.test(e)}},function(e,t,a){e.exports=a(5)(1614)},function(e,t){var a="\\ud800-\\udfff",n="\\u2700-\\u27bf",s="a-z\\xdf-\\xf6\\xf8-\\xff",i="A-Z\\xc0-\\xd6\\xd8-\\xde",r="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",l="["+r+"]",u="\\d+",o="["+n+"]",d="["+s+"]",c="[^"+a+r+u+n+s+i+"]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",j="["+i+"]",f="(?:"+d+"|"+c+")",p="(?:"+j+"|"+c+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",y="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",h="[\\ufe0e\\ufe0f]?",O=h+y+"(?:\\u200d(?:"+["[^"+a+"]",g,b].join("|")+")"+h+y+")*",x="(?:"+[o,g,b].join("|")+")"+O,C=RegExp([j+"?"+d+"+"+m+"(?="+[l,j,"$"].join("|")+")",p+"+"+v+"(?="+[l,j+f,"$"].join("|")+")",j+"?"+f+"+"+m,j+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",u,x].join("|"),"g");e.exports=function(e){return e.match(C)||[]}},function(e,t,a){"use strict";a.r(t),a.d(t,"FieldRow",(function(){return J})),a.d(t,"FieldRowProvider",(function(){return _})),a.d(t,"FieldRowKibanaProvider",(function(){return P}));var n=a(0),s=a.n(n),i=a(3),r=a(2),l=a(18),u=a(4),o=a.n(u),d=a(15),c=a(16),g=a(10),b=a(1);const j=s.a.createContext(null),f=({children:e,...t})=>{const{showDanger:a,validateChange:n}=t;return Object(b.jsx)(j.Provider,{value:{showDanger:a,validateChange:n}},e)},p=({children:e,notifications:{toasts:t},settings:{client:a}})=>Object(b.jsx)(j.Provider,{value:{showDanger:e=>t.addDanger(e),validateChange:async(e,t)=>await a.validateValue(e,t)}},e),m=()=>{const e=Object(n.useContext)(j);if(!e)throw new Error("FieldInputContext is missing.  Ensure your component or React root is wrapped with FieldInputProvider.");return e},v=/,\s+/g,y=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:s})=>{const[r]=Object(c.a)(e,t)||[],[l,u]=Object(n.useState)(null==r?void 0:r.join(", ")),{validateChange:o}=m(),d=Object(c.e)({onInputChange:s,field:e}),j=Object(n.useCallback)((async(t,a)=>{const n=t.replace(v,",").split(",").filter((e=>""!==e)),s=await o(e.id,n);s.successfulValidation&&!s.valid?a({type:e.type,unsavedValue:n,isInvalid:!s.valid,error:s.errorMessage}):a({type:e.type,unsavedValue:n})}),[o,e.id,e.type]),f=Object(n.useMemo)((()=>Object(g.debounce)(j,1e3)),[j]);Object(n.useEffect)((()=>{u(null==r?void 0:r.join(", "))}),[r]);const{id:p,name:y,ariaAttributes:h}=e,{ariaLabel:O,ariaDescribedBy:x}=h;return Object(b.jsx)(i.EuiFieldText,{fullWidth:!0,"data-test-subj":`${T}-${p}`,disabled:!a,"aria-label":O,"aria-describedby":x,name:y,onChange:async e=>{const t=e.target.value;u(t),await f(t,d)},value:l})};var h=a(12),O=a(13);const x=({onChange:e,type:t,isReadOnly:a,name:s,...i})=>{const r=Object(n.useCallback)((e=>{var t;const a=e.getDomNode();if(!a)return;const n=e.getOption(h.monaco.editor.EditorOption.lineHeight);let i=(null===(t=e.getModel())||void 0===t?void 0:t.getLineCount())||6;i<6?i=6:i>30&&(i=30);const r=n*i;a.id=s,a.style.height=`${r}px`,e.layout()}),[s]),l=Object(n.useCallback)((e=>{const t=e.getModel();if(!t)return;const a=t.getValue().trim();t.setValue(a)}),[]),u=Object(n.useCallback)((e=>{r(e),e.onDidChangeModelContent((()=>{r(e)})),e.onDidBlurEditorWidget((()=>{l(e)}))}),[r,l]),d={readOnly:a,lineNumbers:"off",scrollBeyondLastLine:!1,automaticLayout:!0,folding:!1,tabSize:2,scrollbar:{alwaysConsumeMouseWheel:!1},wordWrap:"on",wrappingIndent:"indent"};return Object(b.jsx)(O.CodeEditor,o()({onChange:e,editorDidMount:u,options:d},i,{languageId:"json"===t?h.XJsonLang.ID:O.MarkdownLang,width:"100%"}))},C=({field:e,unsavedChange:t,type:a,isSavingEnabled:s,defaultValue:i,onInputChange:l})=>{const[u]=Object(c.a)(e,t),[o,d]=Object(n.useState)(u),{validateChange:j}=m(),f=Object(c.e)({onInputChange:l,field:e}),p=Object(n.useCallback)((async(t,a)=>{let n;if("json"===e.type)try{const e=Array.isArray(JSON.parse(i||"null"));n=t||(e?"[]":"{}"),JSON.parse(n)}catch(n){return void a({type:e.type,unsavedValue:t,isInvalid:!0,error:r.i18n.translate("management.settings.field.codeEditorSyntaxErrorMessage",{defaultMessage:"Invalid JSON syntax"})})}const s=await j(e.id,n);s.successfulValidation&&!s.valid?a({type:e.type,unsavedValue:t,isInvalid:!s.valid,error:s.errorMessage}):a({type:e.type,unsavedValue:t})}),[j,e.id,e.type,i]),v=Object(n.useMemo)((()=>Object(g.debounce)(p,500)),[p]);Object(n.useEffect)((()=>{d(u)}),[u]);const{id:y,ariaAttributes:h}=e,{ariaLabel:O,ariaDescribedBy:C}=h;return Object(b.jsx)("div",null,Object(b.jsx)(x,{"aria-describedby":C,"aria-label":O,"data-test-subj":`${T}-${y}`,isReadOnly:!s,name:`${T}-${y}-editor`,onChange:async e=>{e!==o&&(d(e),await v(e,f))},type:a,value:o}))};var E=a(9);const w=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:n})=>{const s=Object(c.e)({onInputChange:n,field:e}),{id:r,name:l,ariaAttributes:u}=e,{ariaLabel:o,ariaDescribedBy:d}=u,[g]=Object(c.a)(e,t);return Object(b.jsx)(i.EuiSwitch,{label:g?Object(b.jsx)(E.FormattedMessage,{id:"management.settings.onLabel",defaultMessage:"On"}):Object(b.jsx)(E.FormattedMessage,{id:"management.settings.offLabel",defaultMessage:"Off"}),"aria-label":o,"aria-describedby":d,checked:!!g,"data-test-subj":`${T}-${r}`,disabled:!a,name:l,onChange:t=>{const a=t.target.checked;s({type:e.type,unsavedValue:a})}})},M=r.i18n.translate("management.settings.fieldInput.color.invalidMessage",{defaultMessage:"Provide a valid color value"}),S=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:n})=>{const s=Object(c.e)({onInputChange:n,field:e}),{id:r,name:l,ariaAttributes:u}=e,{ariaLabel:o,ariaDescribedBy:d}=u,[g]=Object(c.a)(e,t);return Object(b.jsx)(i.EuiColorPicker,{"aria-describedby":d,"aria-label":o,"data-test-subj":`${T}-${r}`,disabled:!a,format:"hex",isInvalid:null==t?void 0:t.isInvalid,name:l,color:g,onChange:(t,{isValid:a})=>{const n={type:e.type,unsavedValue:t};s(a?n:{...n,isInvalid:!0,error:M})}})},L=r.i18n.translate("management.settings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"}),I=s.a.forwardRef((({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:s},r)=>{const l=Object(n.useRef)(null);Object(n.useImperativeHandle)(r,(()=>({reset:()=>{var e;return null===(e=l.current)||void 0===e?void 0:e.removeFiles()}})));const{showDanger:u}=m(),d=Object(c.e)({onInputChange:s,field:e}),{id:g,name:j,ariaAttributes:f}=e,{ariaLabel:p,ariaDescribedBy:v}=f,[y]=Object(c.a)(e,t),h={"aria-label":p,"aria-describedby":v};return y?Object(b.jsx)(i.EuiImage,o()({allowFullScreen:!0,url:y,alt:j},h)):Object(b.jsx)(i.EuiFilePicker,o()({accept:".jpg,.jpeg,.png","data-test-subj":`${T}-${g}`,disabled:!a,ref:l,fullWidth:!0,onChange:async t=>{if(null===t||!t.length)return d(),null;const a=t[0];try{let t="";a instanceof File&&(t=String(await(async e=>{const t=new FileReader;return t.readAsDataURL(e),new Promise(((e,a)=>{t.onload=()=>{e(t.result)},t.onerror=e=>{a(e)}}))})(a))),d({type:e.type,unsavedValue:t})}catch(t){u(L),d({type:e.type,unsavedValue:"",error:L,isInvalid:!0})}}},h))})),F=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:s})=>{const[r]=Object(c.a)(e,t)||void 0,[l,u]=Object(n.useState)(r),{validateChange:o}=m(),d=Object(c.e)({onInputChange:s,field:e}),j=Object(n.useCallback)((async(t,a)=>{const n=await o(e.id,t);n.successfulValidation&&!n.valid?a({type:e.type,unsavedValue:t,isInvalid:!n.valid,error:n.errorMessage}):a({type:e.type,unsavedValue:t})}),[o,e.id,e.type]),f=Object(n.useMemo)((()=>Object(g.debounce)(j,500)),[j]);Object(n.useEffect)((()=>{u(r)}),[r]);const{id:p,name:v,ariaAttributes:y}=e,{ariaLabel:h,ariaDescribedBy:O}=y;return Object(b.jsx)(i.EuiFieldNumber,{"aria-describedby":O,"aria-label":h,"data-test-subj":`${T}-${p}`,fullWidth:!0,disabled:!a,name:v,value:l,onChange:async e=>{const t=Number(e.target.value);u(t),await f(t,d)}})},V=({field:e,unsavedChange:t,onInputChange:a,optionLabels:s={},optionValues:r,isSavingEnabled:l})=>{if(0===r.length)throw new Error("non-empty `optionValues` are required for `SelectInput`.");const u=Object(n.useMemo)((()=>null==r?void 0:r.map((e=>({text:s.hasOwnProperty(e)?s[e]:e,value:e})))),[r,s]),o=Object(c.e)({onInputChange:a,field:e}),{id:d,ariaAttributes:g}=e,{ariaLabel:j,ariaDescribedBy:f}=g,[p]=Object(c.a)(e,t);return Object(b.jsx)(i.EuiSelect,{"aria-describedby":f,"aria-label":j,"data-test-subj":`${T}-${d}`,disabled:!l,fullWidth:!0,onChange:t=>{const a=t.target.value;o({type:e.type,unsavedValue:a})},options:u,value:p})},k=({field:e,unsavedChange:t,isSavingEnabled:a,onInputChange:n})=>{const s=Object(c.e)({onInputChange:n,field:e}),{id:r,name:l,ariaAttributes:u}=e,{ariaLabel:o,ariaDescribedBy:d}=u,[g]=Object(c.a)(e,t);return Object(b.jsx)(i.EuiFieldText,{fullWidth:!0,"data-test-subj":`${T}-${r}`,disabled:!a,"aria-label":o,"aria-describedby":d,name:l,onChange:t=>{const a=t.target.value;s({type:e.type,unsavedValue:a})},value:g})},T="management-settings-editField",D=(e,t)=>new Error(`Unsaved change for ${e} mismatch: ${t}`),R=s.a.forwardRef(((e,t)=>{const{field:a,unsavedChange:s,onInputChange:i,isSavingEnabled:r}=e,u=Object(n.useRef)(null);Object(n.useImperativeHandle)(t,(()=>({reset:()=>{u.current&&u.current.reset()}})));const c={isSavingEnabled:r,onInputChange:i};if(Object(l.b)(a)){if(!Object(d.b)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(y,o()({field:a,unsavedChange:s},c))}if(Object(l.c)(a)){if(!Object(d.d)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(w,o()({field:a,unsavedChange:s},c))}if(Object(l.d)(a)){if(!Object(d.f)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(S,o()({field:a,unsavedChange:s},c))}if(Object(l.e)(a)){if(!Object(d.h)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(I,o()({field:a,unsavedChange:s},c,{ref:u}))}if(Object(l.f)(a)){if(!Object(d.j)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(C,o()({field:a,unsavedChange:s},c,{type:"json",defaultValue:a.savedValue||""}))}if(Object(l.g)(a)){if(!Object(d.l)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(C,o()({field:a,unsavedChange:s},c,{type:"markdown",defaultValue:a.savedValue||""}))}if(Object(l.h)(a)){if(!Object(d.n)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(F,o()({field:a,unsavedChange:s},c))}if(Object(l.i)(a)){if(!Object(d.p)(s))throw D(a.type,null==s?void 0:s.type);const{options:{values:e,labels:t}}=a;return Object(b.jsx)(V,o()({field:a,unsavedChange:s,optionLabels:t,optionValues:e},c))}if(Object(l.j)(a)){if(!Object(d.r)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(k,o()({field:a,unsavedChange:s},c))}if(Object(l.k)(a)){if(!Object(d.t)(s))throw D(a.type,null==s?void 0:s.type);return Object(b.jsx)(k,o()({field:a,unsavedChange:s},c))}throw new Error(`Unknown or incompatible field type: ${a.type}`)})),A=({field:e,unsavedChange:t})=>{const{euiTheme:{size:a,colors:n}}=Object(i.useEuiTheme)(),s=Object(c.b)(e,t),r=null==t?void 0:t.error;return{cssFieldFormGroup:Object(b.css)("+*{margin-top:",a.base,";}",""),cssFieldTitle:Object(b.css)("font-weight:bold;padding-left:",a.s,";margin-left:-",a.s,";",s?`box-shadow: -${a.xs} 0 ${n.warning};`:""," ",r?`box-shadow: -${a.xs} 0 ${n.danger};`:"",";",""),cssDescription:Object(b.css)("&>div{margin-bottom:",a.s,";}","")}},$=s.a.createContext(null),_=({children:e,...t})=>{const{links:a,showDanger:n,validateChange:s}=t;return Object(b.jsx)($.Provider,{value:{links:a}},Object(b.jsx)(f,{showDanger:n,validateChange:s},e))},P=({children:e,docLinks:t,notifications:a,settings:n})=>Object(b.jsx)($.Provider,{value:{links:t.links.management}},Object(b.jsx)(p,{notifications:a,settings:n},e)),N=({field:e})=>{const{links:t}=(()=>{const e=Object(n.useContext)($);if(!e)throw new Error("FieldRowContext is missing.  Ensure your component or React root is wrapped with FieldRowProvider.");return e})(),{deprecation:a,name:s,id:l}=e;return a?Object(b.jsx)("div",{"data-test-subj":`description-block-deprecation-${l}`},Object(b.jsx)(i.EuiToolTip,{content:a.message},Object(b.jsx)(i.EuiBadge,{color:"warning",onClick:()=>{window.open(t[a.docLinksKey],"_blank")},onClickAriaLabel:r.i18n.translate("management.settings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {name}.",values:{name:s}})},"Deprecated"))):null},z=({field:e,unsavedChange:t})=>{if(e.isDefaultValue)return null;if(t&&(t.unsavedValue===e.defaultValue||void 0===t.unsavedValue))return null;const{defaultValueDisplay:a,id:n}=e;let s=Object(b.jsx)(i.EuiCode,null,a);return(Object(l.f)(e)||Object(l.g)(e))&&(s=Object(b.jsx)(i.EuiCodeBlock,{"data-test-subj":`default-display-block-${n}`,language:e.type,paddingSize:"s",overflowHeight:a.length>=500?300:void 0},a)),Object(b.jsx)(i.EuiText,{size:"xs"},Object(b.jsx)(E.FormattedMessage,{id:"management.settings.defaultValueText",defaultMessage:"Default: {value}",values:{value:s}}))},B=({field:e,unsavedChange:t})=>{const{cssDescription:a}=A({field:e,unsavedChange:t}),{description:n,name:r}=e;let l=n;return s.a.isValidElement(l)||(l=Object(b.jsx)("div",{dangerouslySetInnerHTML:{__html:l||""}})),l&&(l=Object(b.jsx)(i.EuiText,{size:"s","data-test-subj":`settings-description-${r}`},l)),Object(b.jsx)("div",{css:a},Object(b.jsx)(N,{field:e}),l,Object(b.jsx)(z,{field:e,unsavedChange:t}))},U=({field:e})=>e.isCustom?Object(b.jsx)(i.EuiIconTip,{type:"asterisk",color:"primary","aria-label":r.i18n.translate("management.settings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:Object(b.jsx)(E.FormattedMessage,{id:"management.settings.customSettingTooltip",defaultMessage:"Custom setting"})}):null,W=({field:e,unsavedChange:t})=>{if(!t||!Object(c.b)(e,t))return null;const{isInvalid:a}=t,n=r.i18n.translate("management.settings.field.invalidIconLabel",{defaultMessage:"Invalid"}),s=r.i18n.translate("management.settings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}),l=t.isInvalid?n:s;return Object(b.jsx)(i.EuiIconTip,{type:a?"warning":"dot",color:a?"danger":"warning","aria-label":l,content:l})},K=({field:e,unsavedChange:t,...a})=>{const{cssFieldTitle:n}=A({field:e,unsavedChange:t});return Object(b.jsx)(i.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},Object(b.jsx)(i.EuiFlexItem,{grow:!1,css:n},Object(b.jsx)("h3",a,e.displayName)),Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(U,{field:e})),Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(W,{field:e,unsavedChange:t})))},G=({onReset:e,field:t,unsavedChange:a})=>{if(Object(c.c)(t,a)||t.isOverridden)return null;const{id:n,ariaAttributes:{ariaLabel:s}}=t;return Object(b.jsx)(i.EuiLink,{"aria-label":r.i18n.translate("management.settings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaLabel} to default",values:{ariaLabel:s}}),onClick:e,"data-test-subj":`management-settings-resetField-${n}`},Object(b.jsx)(E.FormattedMessage,{id:"management.settings.resetToDefaultLinkText",defaultMessage:"Reset to default"}))},H=({field:e,onClear:t,unsavedChange:a})=>{if("image"!==e.type)return null;const{ariaAttributes:{ariaLabel:n},isOverridden:s,savedValue:l}=e;return s||!l&&!Object(c.b)(e,a)||l&&a&&void 0===a.unsavedValue?null:Object(b.jsx)("span",null,Object(b.jsx)(i.EuiLink,{"aria-label":r.i18n.translate("management.settings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaLabel}",values:{ariaLabel:n}}),onClick:()=>t(),"data-test-subj":`management-settings-change-image-${e.id}`},Object(b.jsx)(E.FormattedMessage,{id:"management.settings.changeImageLinkText",defaultMessage:"Change image"})))},Z=({field:e})=>e.isOverridden?Object(b.jsx)(i.EuiText,{size:"xs","data-test-subj":`field-row-input-overridden-message-${e.id}`},Object(b.jsx)(E.FormattedMessage,{id:"management.settings.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."})):null,q=({field:e,isSavingEnabled:t,onClear:a,onReset:n,unsavedChange:s})=>{const{footerCSS:r}=(()=>{const{euiTheme:{size:e}}=Object(i.useEuiTheme)();return{footerCSS:Object(b.css)("margin-top:",e.s,";>*{margin-right:",e.s,";}","")}})();return e.isOverridden?Object(b.jsx)(Z,{field:e}):t?Object(b.jsx)("span",{css:r,"data-test-subj":`field-row-input-footer-${e.id}`},Object(b.jsx)(G,{field:e,onReset:n,unsavedChange:s}),Object(b.jsx)(H,{field:e,unsavedChange:s,onClear:a})):null},J=e=>{const{isSavingEnabled:t,onFieldChange:a,field:u,unsavedChange:o}=e,{id:d,groupId:g,isOverridden:j,unsavedFieldId:f}=u,{cssFieldFormGroup:p}=A({field:u,unsavedChange:o}),m=Object(n.useRef)(null),v=e=>{a(d,e)},y=Object(b.jsx)(K,{field:u,unsavedChange:o}),h=Object(b.jsx)(B,{field:u,unsavedChange:o}),O=null==o?void 0:o.error,x=null==o?void 0:o.isInvalid;let C=null;return o&&(C=Object(b.jsx)(i.EuiScreenReaderOnly,null,Object(b.jsx)("p",{id:`${f}`,"data-test-subj":`fieldRowScreenReaderMessage-${d}`},O||r.i18n.translate("management.settings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."})))),Object(b.jsx)(i.EuiErrorBoundary,null,Object(b.jsx)(i.EuiDescribedFormGroup,{css:p,fullWidth:!0,id:g,title:y,description:h},Object(b.jsx)(i.EuiFormRow,{fullWidth:!0,hasChildLabel:!Object(l.e)(u),label:d,helpText:Object(b.jsx)(q,{field:u,isSavingEnabled:t,onClear:()=>{m.current&&m.current.reset(),void 0!==u.savedValue&&null!==u.savedValue?v({type:u.type,unsavedValue:void 0}):v()},onReset:()=>{var e;null===(e=m.current)||void 0===e||e.reset();const t={type:u.type,unsavedValue:u.defaultValue};Object(c.b)(u,t)?v(t):v()},unsavedChange:o}),isInvalid:x,error:O},Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(R,{isSavingEnabled:t&&!j,isInvalid:null==o?void 0:o.isInvalid,field:u,unsavedChange:o,ref:m,onInputChange:v}),C))))}},,function(e,t,a){"use strict";a.r(t),a.d(t,"TelemetryManagementSection",(function(){return telemetry_management_section_TelemetryManagementSection}));var n=a(17),s=a.n(n),i=a(0),r=a.n(i),l=a(3),u=a(9),o=a(2),d=a(4),c=a.n(d),g=a(14),b=a(1),j={name:"1azakc",styles:"text-align:center"};const f=()=>{const e=j;return Object(b.jsx)("div",{css:e},Object(b.jsx)(l.EuiLoadingSpinner,null))};var p=a(11),m=a(18),v=a(26),y=a(20);const h=((e,t=Object(b.jsx)(f,null))=>r.a.forwardRef(((a,n)=>Object(b.jsx)(g.KibanaErrorBoundaryProvider,{analytics:a.analytics},Object(b.jsx)(g.KibanaErrorBoundary,null,Object(b.jsx)(i.Suspense,{fallback:t},Object(b.jsx)(e,c()({},a,{ref:n}))))))))(r.a.lazy((async()=>({default:(await Promise.resolve().then(a.bind(null,26))).FieldRow}))));class telemetry_management_section_TelemetryManagementSection extends i.Component{constructor(e){super(e),s()(this,"maybeGetAppliesSettingMessage",(()=>this.props.showAppliesSettingMessage?Object(b.jsx)(l.EuiCallOut,{color:"primary",iconType:"spacesApp",title:Object(b.jsx)(u.FormattedMessage,{id:"telemetry.callout.appliesSettingTitle",defaultMessage:"Changes to this setting apply to {allOfKibanaText} and are saved automatically.",values:{allOfKibanaText:Object(b.jsx)("strong",null,Object(b.jsx)(u.FormattedMessage,{id:"telemetry.callout.appliesSettingTitle.allOfKibanaText",defaultMessage:"all of Kibana"}))}})}):null)),s()(this,"renderDescription",(()=>{const{docLinks:e}=this.props,t=Object(b.jsx)(l.EuiLink,{onClick:this.toggleExample,"data-test-id":"cluster_data_example"},Object(b.jsx)(u.FormattedMessage,{id:"telemetry.clusterData",defaultMessage:"cluster data"})),a=Object(b.jsx)(l.EuiLink,{href:"https://www.elastic.co/guide/en/security/current/advanced-settings.html#telemetry-settings","data-test-id":"endpoint_security_example",target:"_blank"},Object(b.jsx)(u.FormattedMessage,{id:"telemetry.securityData",defaultMessage:"security data"}));return Object(b.jsx)(i.Fragment,null,Object(b.jsx)("p",null,Object(b.jsx)(u.FormattedMessage,{id:"telemetry.telemetryConfigAndLinkDescription",defaultMessage:"Enabling usage collection allows us to learn what our users are most interested in, so we can improve our products and services. Refer to our {privacyStatementLink}.",values:{privacyStatementLink:Object(b.jsx)(l.EuiLink,{href:e.legal.privacyStatement,target:"_blank"},Object(b.jsx)(u.FormattedMessage,{id:"telemetry.readOurUsageDataPrivacyStatementLinkText",defaultMessage:"Privacy Statement"}))}})),Object(b.jsx)("p",null,Object(b.jsx)(u.FormattedMessage,{id:"telemetry.seeExampleOfClusterDataAndEndpointSecuity",defaultMessage:"See examples of the {clusterData} and {securityData} that we collect.",values:{clusterData:t,securityData:a}})))})),s()(this,"toggleOptIn",(async()=>{const{telemetryService:e,toasts:t}=this.props,a=!this.state.enabled;return new Promise(((n,s)=>{this.setState({processing:!0,enabled:a},(async()=>{try{await e.setOptIn(a),this.setState({processing:!1}),t.addSuccess(a?o.i18n.translate("telemetry.optInSuccessOn",{defaultMessage:"Sharing usage with Elastic is enabled."}):o.i18n.translate("telemetry.optInSuccessOff",{defaultMessage:"No longer sharing usage with Elastic."})),n(!0)}catch(e){this.setState({processing:!1}),s(e)}}))}))})),s()(this,"toggleExample",(()=>{this.setState({showExample:!this.state.showExample})})),this.state={processing:!1,showExample:!1,showSecurityExample:!1,enabled:this.props.telemetryService.getIsOptedIn()||!1}}render(){const{telemetryService:e}=this.props,{showExample:t,enabled:a,processing:n}=this.state;if(!e.getCanChangeOptInStatus())return null;const s={type:"boolean",value:!0,userValue:a,name:o.i18n.translate("telemetry.provideUsageDataTitle",{defaultMessage:"Share usage with Elastic"}),description:this.renderDescription(),requiresPageReload:!1},d={successfulValidation:!0,valid:!0};return Object(b.jsx)(i.Fragment,null,t&&Object(b.jsx)(p.TrackApplicationView,{viewId:"optInExampleFlyout"},Object(b.jsx)(r.a.Suspense,{fallback:Object(b.jsx)(l.EuiLoadingSpinner,null)},Object(b.jsx)(y.OptInExampleFlyout,{fetchExample:e.fetchExample,onClose:this.toggleExample}))),Object(b.jsx)(l.EuiSplitPanel.Outer,{hasBorder:!0},Object(b.jsx)(l.EuiForm,null,Object(b.jsx)(l.EuiSplitPanel.Inner,{color:"subdued"},Object(b.jsx)(l.EuiTitle,null,Object(b.jsx)("h2",null,Object(b.jsx)(u.FormattedMessage,{id:"telemetry.usageDataTitle",defaultMessage:"Usage collection"})))),Object(b.jsx)(l.EuiSplitPanel.Inner,null,this.maybeGetAppliesSettingMessage(),Object(b.jsx)(l.EuiSpacer,{size:"s"}),Object(b.jsx)(v.FieldRowProvider,{links:this.props.docLinks.management,showDanger:e=>this.props.toasts.addDanger(e),validateChange:async()=>d},Object(b.jsx)(h,{field:Object(m.a)({id:"Usage collection",setting:s,params:{isOverridden:!1,isCustom:!0}}),isSavingEnabled:this.props.enableSaving&&!n,onFieldChange:this.toggleOptIn}))))))}}t.default=telemetry_management_section_TelemetryManagementSection}]]);