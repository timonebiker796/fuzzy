/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(t){function e(e){for(var n,o,i=e[0],u=e[1],a=0,c=[];a<i.length;a++)o=i[a],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&c.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(s&&s(e);c.length;)c.shift()()}var n={},r={0:0};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=i);var u,a=document.createElement("script");a.charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.src=function(t){return o.p+"rollup.chunk."+t+".js"}(t);var s=new Error;u=function(e){a.onerror=a.onload=null,clearTimeout(c);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,n[1](s)}r[t]=void 0}};var c=setTimeout((function(){u({type:"timeout",target:a})}),12e4);a.onerror=a.onload=u,document.head.appendChild(a)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t};var i=window.rollup_bundle_jsonpfunction=window.rollup_bundle_jsonpfunction||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var a=0;a<i.length;a++)e(i[a]);var s=u;o(o.s=12)}([function(t,e){t.exports=__kbnSharedDeps__.KbnI18n},function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"f",(function(){return p}));var r=n(9);let o=null,i=null;function u(){if(!o)throw new Error("Rollup notifications is not defined");return o}function a(t){o=t}function s(){if(!i)throw new Error("Rollup fatalErrors is not defined");return i}function c(t){i=t}const[l,d]=Object(r.createGetterSetter)("uiMetric");function p(t,e,n){l()(t,e,n)}d((()=>{}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"h",(function(){return i})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return a})),n.d(e,"k",(function(){return s})),n.d(e,"l",(function(){return c})),n.d(e,"m",(function(){return l})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return p})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return _})),n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return m})),n.d(e,"d",(function(){return g}));const r="rollup_jobs",o="app_load",i="job_create",u="job_delete",a="job_delete_many",s="job_start",c="job_start_many",l="job_stop",d="job_stop_many",p="show_details_click",f="detail_panel_summary_tab_click",_="detail_panel_terms_tab_click",b="detail_panel_histogram_tab_click",m="detail_panel_metrics_tab_click",g="detail_panel_json_tab_click"},function(t,e,n){"use strict";n.d(e,"c",(function(){return b})),n.d(e,"e",(function(){return _})),n.d(e,"p",(function(){return d})),n.d(e,"y",(function(){return p})),n.d(e,"z",(function(){return f})),n.d(e,"A",(function(){return m})),n.d(e,"v",(function(){return y})),n.d(e,"w",(function(){return h})),n.d(e,"o",(function(){return j})),n.d(e,"b",(function(){return v})),n.d(e,"h",(function(){return k})),n.d(e,"i",(function(){return O})),n.d(e,"j",(function(){return S})),n.d(e,"t",(function(){return i})),n.d(e,"s",(function(){return w})),n.d(e,"f",(function(){return D})),n.d(e,"g",(function(){return P})),n.d(e,"d",(function(){return R})),n.d(e,"u",(function(){return T})),n.d(e,"m",(function(){return C})),n.d(e,"q",(function(){return L})),n.d(e,"k",(function(){return $})),n.d(e,"l",(function(){return H})),n.d(e,"x",(function(){return z})),n.d(e,"r",(function(){return N})),n.d(e,"a",(function(){return a.METRIC_TYPE})),n.d(e,"n",(function(){return U.b}));var r=n(2);let o=null;function i(t){o=t}function u(){if(!o)throw new Error("Rollup http is not defined");return o}var a=n(4),s=n(1);function c(t,e){return t.then((t=>(Object(s.f)(a.METRIC_TYPE.LOADED,e),t)))}const l="/api/rollup";async function d({asSystemRequest:t}={}){const e={asSystemRequest:t},{jobs:n}=await u().get(`${l}/jobs`,e);return n}async function p(t){const e={jobIds:t},n=u().post(`${l}/start`,{body:JSON.stringify(e)}),o=t.length>1?r.l:r.k;return await c(n,o)}async function f(t){const e={jobIds:t},n=u().post(`${l}/stop`,{body:JSON.stringify(e)}),o=t.length>1?r.n:r.m;return await c(n,o)}async function _(t){const e={jobIds:t},n=u().post(`${l}/delete`,{body:JSON.stringify(e)}),o=t.length>1?r.j:r.i;return await c(n,o)}async function b(t){const e={job:t},n=u().put(`${l}/create`,{body:JSON.stringify(e)});return await c(n,r.h)}async function m(t){return await u().get(`${l}/index_pattern_validity/${t}`)}function g(t,e){if(t&&t.body){const{error:n,statusCode:r,message:o}=t.body;return{title:e,text:`${r}: ${n}. ${o}`}}}function h(t,e){const n=g(t,e);return n?Object(s.b)().toasts.addWarning(n):Object(s.a)().add(t,e)}function y(t,e){const n=g(t,e);if(n)return Object(s.b)().toasts.addDanger(n);Object(s.a)().add(t,e)}var x=n(0);const j={text:x.i18n.translate("xpack.rollupJobs.listBreadcrumbTitle",{defaultMessage:"Rollups Jobs"}),href:"/"},v={text:x.i18n.translate("xpack.rollupJobs.createBreadcrumbTitle",{defaultMessage:"Create"})},k=(t,e="",n=[])=>{const r=e.toLowerCase();return n.filter((e=>-1!==(t||Object.keys(e)).findIndex((t=>String(e[t]).toLowerCase().includes(r)))))},O=(t,e=[])=>(e.push(t),t.items&&t.items.forEach((t=>{t.panel&&(O(t.panel,e),t.panel=t.panel.id)})),e);function S(t,e){return t.map((t=>({name:t,type:e})))}function w(t){const{id:e,indexPattern:n,rollupIndex:r,rollupCron:o,dateHistogramInterval:i,rollupDelay:u,rollupPageSize:a,dateHistogramTimeZone:s,dateHistogramField:c,metrics:l,terms:d,histogram:p,histogramInterval:f}=t,_={id:e,index_pattern:n,rollup_index:r,cron:o,page_size:a,groups:{date_histogram:(b={interval:i,delay:u,time_zone:s,field:c},Object.keys(b).forEach((t=>{null!=b[t]&&""!==b[t].trim()||delete b[t]})),b)}};var b;return d.length&&(_.groups.terms={fields:d.map((({name:t})=>t))}),p.length&&(_.groups.histogram={interval:f,fields:p.map((({name:t})=>t))}),l.length&&(_.metrics=[],l.forEach((({name:t,types:e})=>{e.length&&_.metrics.push({field:t,metrics:e})}))),_}function D(t){const{config:{id:e,index_pattern:n,rollup_index:r,cron:o,metrics:i,groups:{date_histogram:{interval:u,fixed_interval:a,calendar_interval:s,delay:c,time_zone:l,field:d},terms:p,histogram:f}},status:{job_state:_},stats:{documents_processed:b,pages_processed:m,rollups_indexed:g,trigger_count:h}}=t,y={id:e,indexPattern:n,rollupIndex:r,rollupCron:o,dateHistogramInterval:u||a||s,rollupDelay:c,dateHistogramTimeZone:l,dateHistogramField:d,status:_,metrics:[],terms:[],histogram:[],documentsProcessed:b,pagesProcessed:m,rollupsIndexed:g,triggerCount:h,json:t};return i&&i.forEach((({field:t,metrics:e})=>{y.metrics.push({name:t,types:e})})),p&&(y.terms=p.fields.map((t=>({name:t})))),f&&(y.histogram=f.fields.map((t=>({name:t}))),y.histogramInterval=f.interval),y}function P(t=[]){return t.map(D)}function R(t){const e=new Promise((t=>setTimeout((()=>{t()}),300)));return Promise.all([t,e])}var E=n(10);let I=!1;function T(t){I=t}function C(){return I}const M=t=>!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey),B=t=>0===t.button;let J;function L(t){J=t}function $(){return J}function H(t){const e="string"==typeof t?Object(E.createLocation)(t,null,null,J.history.location):t;return{href:J.history.createHref(e),onClick:t=>{t.defaultPrevented||t.target.getAttribute("target")||!M(t)&&B(t)&&(t.preventDefault(),J.history.push(e))}}}var A=n(8);const K={},z=(t=[],e,n)=>{const r=K[e]||(o=e,t=>t[o]);var o;const i=Object(A.sortBy)(t,r);return n?i:i.reverse()};function N({metrics:t,typeMaps:e}){return t.map((t=>{const{name:n}=t,{type:r}=e.find((t=>t.fields.some((t=>t.name===n))));return{...t,type:r}}))}var U=n(7)},function(t,e){t.exports=__kbnSharedDeps__.KbnAnalytics},function(t,e){t.exports=__kbnSharedDeps__.EmotionReact},function(t,e){t.exports=__kbnSharedDeps__.ElasticEui},function(t,e,n){"use strict";let r;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));const o=t=>{r=t.links}},function(t,e){t.exports=__kbnSharedDeps__.Lodash},function(t,e,n){n.r(e);var r=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))},function(t,e){t.exports=__kbnSharedDeps__.History},function(t,e){t.exports=__kbnSharedDeps__.React},function(t,e,n){n(13),__kbnBundles__.define("plugin/rollup/public",n,14)},function(t,e,n){n.p=window.__kbnPublicPath__.rollup},function(t,e,n){"use strict";n.r(e),n.d(e,"plugin",(function(){return l}));var r=n(0);const o=r.i18n.translate("xpack.rollupJobs.rollupDeprecationLabel",{defaultMessage:"Rollup (deprecated)"});n(11),n(6),n(5);const i={matchIndex:t=>Boolean(t.isRollupIndex),label:r.i18n.translate("xpack.rollupJobs.indexMgmtToggle.toggleLabel",{defaultMessage:"Include rollup indices"}),name:"rollupToggle"},u={matchIndex:t=>Boolean(t.isRollupIndex),label:o,color:"warning",filterExpression:"isRollupIndex:true"};var a=n(2),s=n(3),c=n(1);class plugin_RollupPlugin{constructor(t){this.ctx=t}setup(t,{home:e,management:o,indexManagement:s,usageCollection:l,dataViews:d}){const{ui:{enabled:p}}=this.ctx.config.get();if(Object(c.c)(t.fatalErrors),l&&Object(c.e)(l.reportUiCounter.bind(l,a.b)),p){s&&(s.extensionsService.addBadge(u),s.extensionsService.addToggle(i)),e&&e.featureCatalogue.register({id:"rollup_jobs",title:"Rollups",description:r.i18n.translate("xpack.rollupJobs.featureCatalogueDescription",{defaultMessage:"Summarize and store historical data in a smaller index for future analysis."}),icon:"indexRollupApp",path:"/app/management/data/rollup_jobs/job_list",showOnHomePage:!1,category:"admin"}),d.enableRollups();const a=r.i18n.translate("xpack.rollupJobs.appTitle",{defaultMessage:"Rollup Jobs"});o.sections.section.data.registerApp({id:"rollup_jobs",title:a,order:4,async mount(e){const[r]=await t.getStartServices(),{chrome:{docTitle:o}}=r;o.change(a),e.setBreadcrumbs([{text:a}]);const{renderApp:i}=await n.e(1).then(n.bind(null,50)),u=await i(t,e);return()=>{o.reset(),u()}}})}}start(t){Object(s.t)(t.http),Object(c.d)(t.notifications),Object(s.n)(t.docLinks)}}const l=t=>new plugin_RollupPlugin(t)},function(t,e){t.exports=__kbnSharedDeps__.KbnI18nReact},function(t,e){t.exports=__kbnSharedDeps__.ReactRedux},function(t,e,n){n.r(e);var r=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))},function(t,e,n){n.r(e);var r=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))},function(t,e,n){n.r(e);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))},function(t,e){t.exports=__kbnSharedDeps__.ReactRouterDom},function(t,e){t.exports=__kbnSharedDeps__.TsLib},function(t,e){t.exports=__kbnSharedDeps_npm__},function(t,e){t.exports=__kbnSharedDeps__.Redux},function(t,e){t.exports=__kbnSharedDeps__.ReactRouterDomV5Compat},function(t,e){t.exports=__kbnSharedDeps__.ReactDom},function(t,e){t.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(t,e){t.exports=__kbnSharedDeps__.EmotionCache},function(t,e){t.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(t,e){t.exports=__kbnSharedDeps__.Reselect},function(t,e){t.exports=__kbnSharedDeps__.MomentTimezone}]);