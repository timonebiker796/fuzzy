/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.rollup_bundle_jsonpfunction=window.rollup_bundle_jsonpfunction||[]).push([[1],Array(31).concat([function(e,t,s){e.exports=s(22)(2)},function(e,t,s){e.exports=s(22)(4)},function(e,t,s){"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),a=[];function i(e){for(var t=-1,s=0;s<a.length;s++)if(a[s].identifier===e){t=s;break}return t}function n(e,t){for(var s={},r=[],o=0;o<e.length;o++){var n=e[o],l=t.base?n[0]+t.base:n[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=i(u),p={css:n[1],media:n[2],sourceMap:n[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:u,updater:g(p,t),references:1}),r.push(u)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=s.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,s,r){var o=s?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}function p(e,t,s){var r=s.css,o=s.media,a=s.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var b=null,j=0;function g(e,t){var s,r,o;if(t.singleton){var a=j++;s=b||(b=l(t)),r=d.bind(null,s,a,!1),o=d.bind(null,s,a,!0)}else s=l(t),r=p.bind(null,s,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var s=n(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<s.length;r++){var o=i(s[r]);a[o].references--}for(var l=n(e,t),c=0;c<s.length;c++){var u=i(s[c]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}s=l}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,r,o,a=e[1]||"",i=e[3];if(!i)return a;if(t&&"function"==typeof btoa){var n=(s=i,r=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),l=i.sources.map((function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}));return[a].concat(l).concat([n]).join("\n")}return[a].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var n=0;n<e.length;n++){var l=[].concat(e[n]);r&&o[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(21),o=s(11),a=r.__importDefault(s(36));t.default=function(e,t){var s=o.useState(t),r=s[0],i=s[1];return a.default((function(){var t=e.subscribe(i);return function(){return t.unsubscribe()}}),[e]),r}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(11),o="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var r=void 0;t.setEuiDevProviderWarning=function(e){return r=e},t.getEuiDevProviderWarning=function(){return r},t.emitEuiProviderWarning=function(e){if("function"==typeof r)return r(e);switch(r){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,s){"use strict";function r(e){return function(t){var s=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(s,r,e):t(o)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r();o.withExtraArgument=r;var a=o;t.default=a},function(e,t,s){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function s(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=4)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(1),o=s(2),a=function(){function e(t,s){this.expression=t,this.options=s,this.expressionParts=new Array(5),e.locales[s.locale]?this.i18n=e.locales[s.locale]:(console.warn("Locale '"+s.locale+"' could not be found; falling back to 'en'."),this.i18n=e.locales.en),void 0===s.use24HourTimeFormat&&(s.use24HourTimeFormat=this.i18n.use24HourTimeFormatByDefault())}return e.toString=function(t,s){var r=void 0===s?{}:s,o=r.throwExceptionOnParseError,a=void 0===o||o,i=r.verbose,n=void 0!==i&&i,l=r.dayOfWeekStartIndexZero,c=void 0===l||l,u=r.use24HourTimeFormat,d=r.locale;return new e(t,{throwExceptionOnParseError:a,verbose:n,dayOfWeekStartIndexZero:c,use24HourTimeFormat:u,locale:void 0===d?"en":d}).getFullDescription()},e.initialize=function(t){e.specialCharacters=["/","-",",","*"],t.load(e.locales)},e.prototype.getFullDescription=function(){var e="";try{var t=new o.CronParser(this.expression,this.options.dayOfWeekStartIndexZero);this.expressionParts=t.parse();var s=this.getTimeOfDayDescription(),r=this.getDayOfMonthDescription(),a=this.getMonthDescription();e+=s+r+this.getDayOfWeekDescription()+a+this.getYearDescription(),e=(e=this.transformVerbosity(e,this.options.verbose)).charAt(0).toLocaleUpperCase()+e.substr(1)}catch(t){if(this.options.throwExceptionOnParseError)throw""+t;e=this.i18n.anErrorOccuredWhenGeneratingTheExpressionD()}return e},e.prototype.getTimeOfDayDescription=function(){var t=this.expressionParts[0],s=this.expressionParts[1],o=this.expressionParts[2],a="";if(r.StringUtilities.containsAny(s,e.specialCharacters)||r.StringUtilities.containsAny(o,e.specialCharacters)||r.StringUtilities.containsAny(t,e.specialCharacters))if(t||!(s.indexOf("-")>-1)||s.indexOf(",")>-1||r.StringUtilities.containsAny(o,e.specialCharacters))if(!t&&o.indexOf(",")>-1&&-1==o.indexOf("-")&&-1==o.indexOf("/")&&!r.StringUtilities.containsAny(s,e.specialCharacters)){var i=o.split(",");a+=this.i18n.at();for(var n=0;n<i.length;n++)a+=" ",a+=this.formatTime(i[n],s,""),n<i.length-2&&(a+=","),n==i.length-2&&(a+=this.i18n.spaceAnd())}else{var l=this.getSecondsDescription(),c=this.getMinutesDescription(),u=this.getHoursDescription();(a+=l).length>0&&(a+=", "),(a+=c).length>0&&(a+=", "),a+=u}else{var d=s.split("-");a+=r.StringUtilities.format(this.i18n.everyMinuteBetweenX0AndX1(),this.formatTime(o,d[0],""),this.formatTime(o,d[1],""))}else a+=this.i18n.atSpace()+this.formatTime(o,s,t);return a},e.prototype.getSecondsDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[0],this.i18n.everySecond(),(function(e){return e}),(function(t){return r.StringUtilities.format(e.i18n.everyX0Seconds(),t)}),(function(t){return e.i18n.secondsX0ThroughX1PastTheMinute()}),(function(t){return"0"==t?"":parseInt(t)<20?e.i18n.atX0SecondsPastTheMinute():e.i18n.atX0SecondsPastTheMinuteGt20()||e.i18n.atX0SecondsPastTheMinute()}))},e.prototype.getMinutesDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[1],this.i18n.everyMinute(),(function(e){return e}),(function(t){return r.StringUtilities.format(e.i18n.everyX0Minutes(),t)}),(function(t){return e.i18n.minutesX0ThroughX1PastTheHour()}),(function(t){try{return"0"==t?"":parseInt(t)<20?e.i18n.atX0MinutesPastTheHour():e.i18n.atX0MinutesPastTheHourGt20()||e.i18n.atX0MinutesPastTheHour()}catch(t){return e.i18n.atX0MinutesPastTheHour()}}))},e.prototype.getHoursDescription=function(){var e=this,t=this.expressionParts[2];return this.getSegmentDescription(t,this.i18n.everyHour(),(function(t){return e.formatTime(t,"0","")}),(function(t){return r.StringUtilities.format(e.i18n.everyX0Hours(),t)}),(function(t){return e.i18n.betweenX0AndX1()}),(function(t){return e.i18n.atX0()}))},e.prototype.getDayOfWeekDescription=function(){var e=this,t=this.i18n.daysOfTheWeek();return"*"==this.expressionParts[5]?"":this.getSegmentDescription(this.expressionParts[5],this.i18n.commaEveryDay(),(function(e){var s=e;return e.indexOf("#")>-1?s=e.substr(0,e.indexOf("#")):e.indexOf("L")>-1&&(s=s.replace("L","")),t[parseInt(s)]}),(function(t){return r.StringUtilities.format(e.i18n.commaEveryX0DaysOfTheWeek(),t)}),(function(t){return e.i18n.commaX0ThroughX1()}),(function(t){var s=null;if(t.indexOf("#")>-1){var r=null;switch(t.substring(t.indexOf("#")+1)){case"1":r=e.i18n.first();break;case"2":r=e.i18n.second();break;case"3":r=e.i18n.third();break;case"4":r=e.i18n.fourth();break;case"5":r=e.i18n.fifth()}s=e.i18n.commaOnThe()+r+e.i18n.spaceX0OfTheMonth()}else s=t.indexOf("L")>-1?e.i18n.commaOnTheLastX0OfTheMonth():"*"!=e.expressionParts[3]?e.i18n.commaAndOnX0():e.i18n.commaOnlyOnX0();return s}))},e.prototype.getMonthDescription=function(){var e=this,t=this.i18n.monthsOfTheYear();return this.getSegmentDescription(this.expressionParts[4],"",(function(e){return t[parseInt(e)-1]}),(function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Months(),t)}),(function(t){return e.i18n.commaMonthX0ThroughMonthX1()||e.i18n.commaX0ThroughX1()}),(function(t){return e.i18n.commaOnlyInX0()}))},e.prototype.getDayOfMonthDescription=function(){var e=this,t=null,s=this.expressionParts[3];switch(s){case"L":t=this.i18n.commaOnTheLastDayOfTheMonth();break;case"WL":case"LW":t=this.i18n.commaOnTheLastWeekdayOfTheMonth();break;default:var o=s.match(/(\d{1,2}W)|(W\d{1,2})/);if(o){var a=parseInt(o[0].replace("W","")),i=1==a?this.i18n.firstWeekday():r.StringUtilities.format(this.i18n.weekdayNearestDayX0(),a.toString());t=r.StringUtilities.format(this.i18n.commaOnTheX0OfTheMonth(),i);break}var n=s.match(/L-(\d{1,2})/);if(n){var l=n[1];t=r.StringUtilities.format(this.i18n.commaDaysBeforeTheLastDayOfTheMonth(),l);break}t=this.getSegmentDescription(s,this.i18n.commaEveryDay(),(function(t){return"L"==t?e.i18n.lastDay():t}),(function(t){return"1"==t?e.i18n.commaEveryDay():e.i18n.commaEveryX0Days()}),(function(t){return e.i18n.commaBetweenDayX0AndX1OfTheMonth()}),(function(t){return e.i18n.commaOnDayX0OfTheMonth()}))}return t},e.prototype.getYearDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[6],"",(function(e){return/^\d+$/.test(e)?new Date(parseInt(e),1).getFullYear().toString():e}),(function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Years(),t)}),(function(t){return e.i18n.commaYearX0ThroughYearX1()||e.i18n.commaX0ThroughX1()}),(function(t){return e.i18n.commaOnlyInX0()}))},e.prototype.getSegmentDescription=function(e,t,s,o,a,i){var n=this,l=null;if(e)if("*"===e)l=t;else if(r.StringUtilities.containsAny(e,["/","-",","]))if(e.indexOf("/")>-1){var c=e.split("/");if(l=r.StringUtilities.format(o(c[1]),s(c[1])),c[0].indexOf("-")>-1)0!=(b=this.generateBetweenSegmentDescription(c[0],a,s)).indexOf(", ")&&(l+=", "),l+=b;else if(!r.StringUtilities.containsAny(c[0],["*",","])){var u=r.StringUtilities.format(i(c[0]),s(c[0]));u=u.replace(", ",""),l+=r.StringUtilities.format(this.i18n.commaStartingX0(),u)}}else if(e.indexOf(",")>-1){c=e.split(",");for(var d="",p=0;p<c.length;p++){var b;p>0&&c.length>2&&(d+=",",p<c.length-1&&(d+=" ")),p>0&&c.length>1&&(p==c.length-1||2==c.length)&&(d+=this.i18n.spaceAnd()+" "),c[p].indexOf("-")>-1?d+=b=(b=this.generateBetweenSegmentDescription(c[p],(function(e){return n.i18n.commaX0ThroughX1()}),s)).replace(", ",""):d+=s(c[p])}l=r.StringUtilities.format(i(e),d)}else e.indexOf("-")>-1&&(l=this.generateBetweenSegmentDescription(e,a,s));else l=r.StringUtilities.format(i(e),s(e));else l="";return l},e.prototype.generateBetweenSegmentDescription=function(e,t,s){var o=e.split("-"),a=s(o[0]),i=s(o[1]);i=i.replace(":00",":59");var n=t(e);return""+r.StringUtilities.format(n,a,i)},e.prototype.formatTime=function(e,t,s){var r=parseInt(e),o="";this.options.use24HourTimeFormat||(o=r>=12?" PM":" AM",r>12&&(r-=12),0===r&&(r=12));var a=t,i="";return s&&(i=":"+("00"+s).substring(s.length)),("00"+r.toString()).substring(r.toString().length)+":"+("00"+a.toString()).substring(a.toString().length)+i+o},e.prototype.transformVerbosity=function(e,t){return t||(e=(e=(e=e.replace(new RegExp(this.i18n.commaEveryMinute(),"g"),"")).replace(new RegExp(this.i18n.commaEveryHour(),"g"),"")).replace(new RegExp(this.i18n.commaEveryDay(),"g"),"")),e},e.locales={},e}();t.ExpressionDescriptor=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.format=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.replace(/%s/g,(function(){return t.shift()}))},e.containsAny=function(e,t){return t.some((function(t){return e.indexOf(t)>-1}))},e}();t.StringUtilities=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t=!0),this.expression=e,this.dayOfWeekStartIndexZero=t}return e.prototype.parse=function(){var e=this.extractParts(this.expression);return this.normalize(e),this.validate(e),e},e.prototype.extractParts=function(e){if(!this.expression)throw new Error("Expression is empty");var t=e.trim().split(" ");if(t.length<5)throw new Error("Expression has only "+t.length+" part"+(1==t.length?"":"s")+". At least 5 parts are required.");if(5==t.length)t.unshift(""),t.push("");else if(6==t.length)/\d{4}$/.test(t[5])?t.unshift(""):t.push("");else if(t.length>7)throw new Error("Expression has "+t.length+" parts; too many!");return t},e.prototype.normalize=function(e){var t=this;if(e[3]=e[3].replace("?","*"),e[5]=e[5].replace("?","*"),0==e[0].indexOf("0/")&&(e[0]=e[0].replace("0/","*/")),0==e[1].indexOf("0/")&&(e[1]=e[1].replace("0/","*/")),0==e[2].indexOf("0/")&&(e[2]=e[2].replace("0/","*/")),0==e[3].indexOf("1/")&&(e[3]=e[3].replace("1/","*/")),0==e[4].indexOf("1/")&&(e[4]=e[4].replace("1/","*/")),0==e[5].indexOf("1/")&&(e[5]=e[5].replace("1/","*/")),0==e[6].indexOf("1/")&&(e[6]=e[6].replace("1/","*/")),e[5]=e[5].replace(/(^\d)|([^#/\s]\d)/g,(function(e){var s=e.replace(/\D/,""),r=s;return t.dayOfWeekStartIndexZero?"7"==s&&(r="0"):r=(parseInt(s)-1).toString(),e.replace(s,r)})),"L"==e[5]&&(e[5]="6"),"?"==e[3]&&(e[3]="*"),e[3].indexOf("W")>-1&&(e[3].indexOf(",")>-1||e[3].indexOf("-")>-1))throw new Error("The 'W' character can be specified only when the day-of-month is a single day, not a range or list of days.");var s={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};for(var r in s)e[5]=e[5].replace(new RegExp(r,"gi"),s[r].toString());var o={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12};for(var a in o)e[4]=e[4].replace(new RegExp(a,"gi"),o[a].toString());"0"==e[0]&&(e[0]="");for(var i=0;i<e.length;i++)if("*/1"==e[i]&&(e[i]="*"),e[i].indexOf("/")>-1&&!/^\*|\-|\,/.test(e[i])){var n=null;switch(i){case 4:n="12";break;case 5:n="6";break;case 6:n="9999";break;default:n=null}if(null!=n){var l=e[i].split("/");e[i]=l[0]+"-"+n+"/"+l[1]}}},e.prototype.validate=function(e){this.assertNoInvalidCharacters("DOW",e[5]),this.assertNoInvalidCharacters("DOM",e[3])},e.prototype.assertNoInvalidCharacters=function(e,t){var s=t.match(/[A-KM-VX-Z]+/gi);if(s&&s.length)throw new Error(e+" part contains invalid values: '"+s.toString()+"'")},e}();t.CronParser=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.atX0SecondsPastTheMinuteGt20=function(){return null},e.prototype.atX0MinutesPastTheHourGt20=function(){return null},e.prototype.commaMonthX0ThroughMonthX1=function(){return null},e.prototype.commaYearX0ThroughYearX1=function(){return null},e.prototype.use24HourTimeFormatByDefault=function(){return!1},e.prototype.anErrorOccuredWhenGeneratingTheExpressionD=function(){return"An error occured when generating the expression description.  Check the cron expression syntax."},e.prototype.everyMinute=function(){return"every minute"},e.prototype.everyHour=function(){return"every hour"},e.prototype.atSpace=function(){return"At "},e.prototype.everyMinuteBetweenX0AndX1=function(){return"Every minute between %s and %s"},e.prototype.at=function(){return"At"},e.prototype.spaceAnd=function(){return" and"},e.prototype.everySecond=function(){return"every second"},e.prototype.everyX0Seconds=function(){return"every %s seconds"},e.prototype.secondsX0ThroughX1PastTheMinute=function(){return"seconds %s through %s past the minute"},e.prototype.atX0SecondsPastTheMinute=function(){return"at %s seconds past the minute"},e.prototype.everyX0Minutes=function(){return"every %s minutes"},e.prototype.minutesX0ThroughX1PastTheHour=function(){return"minutes %s through %s past the hour"},e.prototype.atX0MinutesPastTheHour=function(){return"at %s minutes past the hour"},e.prototype.everyX0Hours=function(){return"every %s hours"},e.prototype.betweenX0AndX1=function(){return"between %s and %s"},e.prototype.atX0=function(){return"at %s"},e.prototype.commaEveryDay=function(){return", every day"},e.prototype.commaEveryX0DaysOfTheWeek=function(){return", every %s days of the week"},e.prototype.commaX0ThroughX1=function(){return", %s through %s"},e.prototype.first=function(){return"first"},e.prototype.second=function(){return"second"},e.prototype.third=function(){return"third"},e.prototype.fourth=function(){return"fourth"},e.prototype.fifth=function(){return"fifth"},e.prototype.commaOnThe=function(){return", on the "},e.prototype.spaceX0OfTheMonth=function(){return" %s of the month"},e.prototype.lastDay=function(){return"the last day"},e.prototype.commaOnTheLastX0OfTheMonth=function(){return", on the last %s of the month"},e.prototype.commaOnlyOnX0=function(){return", only on %s"},e.prototype.commaAndOnX0=function(){return", and on %s"},e.prototype.commaEveryX0Months=function(){return", every %s months"},e.prototype.commaOnlyInX0=function(){return", only in %s"},e.prototype.commaOnTheLastDayOfTheMonth=function(){return", on the last day of the month"},e.prototype.commaOnTheLastWeekdayOfTheMonth=function(){return", on the last weekday of the month"},e.prototype.commaDaysBeforeTheLastDayOfTheMonth=function(){return", %s days before the last day of the month"},e.prototype.firstWeekday=function(){return"first weekday"},e.prototype.weekdayNearestDayX0=function(){return"weekday nearest day %s"},e.prototype.commaOnTheX0OfTheMonth=function(){return", on the %s of the month"},e.prototype.commaEveryX0Days=function(){return", every %s days"},e.prototype.commaBetweenDayX0AndX1OfTheMonth=function(){return", between day %s and %s of the month"},e.prototype.commaOnDayX0OfTheMonth=function(){return", on day %s of the month"},e.prototype.commaEveryMinute=function(){return", every minute"},e.prototype.commaEveryHour=function(){return", every hour"},e.prototype.commaEveryX0Years=function(){return", every %s years"},e.prototype.commaStartingX0=function(){return", starting %s"},e.prototype.daysOfTheWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e.prototype.monthsOfTheYear=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},e}();t.en=r},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(0),o=s(5);r.ExpressionDescriptor.initialize(new o.enLocaleLoader),t.default=r.ExpressionDescriptor;var a=r.ExpressionDescriptor.toString;t.toString=a},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(3),o=function(){function e(){}return e.prototype.load=function(e){e.en=new r.en},e}();t.enLocaleLoader=o}])},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(21),o=s(41),a=r.__importDefault(s(43));t.default=function(e,t){a.default(e,t,o.isDeepEqual)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var r=s(21).__importDefault(s(42));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.removeEventListener.apply(e,t)},t.isDeepEqual=r.default},function(e,t,s){"use strict";e.exports=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=s.length)return!1;for(o=r;0!=o--;)if(!e(t[o],s[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(s,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!("_owner"===i&&t.$$typeof||e(t[i],s[i])))return!1}return!0}return t!=t&&s!=s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(11);t.default=function(e,t,s){var o=r.useRef(void 0);o.current&&s(t,o.current)||(o.current=t),r.useEffect(e,o.current)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(45);case"v8light":return s(47)}},function(e,t,s){var r=s(33),o=s(46);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".rollupJobWizardStepActions{align-items:flex-end}",""]),e.exports=t},function(e,t,s){var r=s(33),o=s(48);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},function(e,t,s){(t=s(34)(!1)).push([e.i,".rollupJobWizardStepActions{align-items:flex-end}",""]),e.exports=t},,function(e,t,s){"use strict";s.r(t),s.d(t,"renderApp",(function(){return Es}));var r=s(11),o=s.n(r),a=s(25),i=s(16),n=s(17),l=s(18),c=s(32),u=s.n(c),d=s(26),p=s(37),b=s(35),j=s.n(b),g=s(27),x=s.n(g),m=s(6);const h="eui-global",f="eui-utilities",O={darkMode:!1};var y=s(5);const S=[m.euiStylisPrefixer],M=x()({key:"css",stylisPlugins:S,container:document.querySelector('meta[name="emotion"]')}),v=x()({key:h,stylisPlugins:S,container:document.querySelector(`meta[name="${h}"]`)}),E=x()({key:f,stylisPlugins:S,container:document.querySelector(`meta[name="${f}"]`)});M.compat=!0,v.compat=!0,E.compat=!0;const T={default:M,global:v,utility:E},F=({theme:{theme$:e},globalStyles:t,colorMode:s,modify:o,children:a})=>{const i=j()(e,O),n=Object(r.useMemo)((()=>(e=>e.darkMode?m.COLOR_MODES_STANDARD.dark:m.COLOR_MODES_STANDARD.light)(i)),[i]),l=s||n,c=!1!==t&&void 0;return Object(y.jsx)(m.EuiProvider,{cache:T,modify:o,colorMode:l,globalStyles:c,utilityClasses:c},a)},C=({children:e,i18n:t,...s})=>Object(d.useIsNestedEuiProvider)()?(Object(p.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(y.jsx)(t.Context,null,e)):Object(y.jsx)(F,s,Object(y.jsx)(t.Context,null,e));var D=s(28);const k=({children:e,...t})=>Object(y.jsx)(C,u()({globalStyles:!1},t),Object(y.jsx)(D.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(y.jsx)(D.KibanaErrorBoundary,null,e)));var J=s(23),I=s(38),P=s.n(I);const L="OPEN_DETAIL_PANEL",w="CLOSE_DETAIL_PANEL",_="LOAD_JOBS_START",A="LOAD_JOBS_SUCCESS",R="LOAD_JOBS_FAILURE",H="REFRESH_JOBS_SUCCESS",B="CLONE_JOB_START",z="CLONE_JOB_CLEAR",N="CREATE_JOB_START",X="CREATE_JOB_SUCCESS",W="CREATE_JOB_FAILURE",U="CLEAR_CREATE_JOB_ERRORS",V="UPDATE_JOB_START",G="UPDATE_JOB_SUCCESS",q="UPDATE_JOB_FAILURE",$="FILTER_CHANGED",Z="PAGE_CHANGED",Y="PAGE_SIZE_CHANGED",K="SORT_CHANGED",Q={isLoading:!1,byId:{},allIds:[]};function ee(e){const t={};return e.forEach((e=>{t[e.id]=e})),t}function te(e){return e.map((e=>e.id))}const se={filter:"",pageSize:20,currentPage:0,sortField:"job.id",isSortAscending:!0},re={isOpen:!1,panelType:void 0,jobId:void 0},oe={job:void 0},ae={isSaving:!1,error:void 0},ie={isUpdating:!1,error:void 0},ne=Object(J.combineReducers)({jobs:function(e=Q,t){const{type:s,payload:r}=t;switch(s){case _:return{...e,isLoading:!0};case A:return{byId:ee(r.jobs),allIds:te(r.jobs),isLoading:!1};case H:return{byId:ee(r.jobs),allIds:te(r.jobs)};case R:return{...e,isLoading:!1,jobLoadError:r.error};case X:const{job:t}=r;return{byId:{...e.byId,[t.id]:t},allIds:e.allIds.concat(t.id)};default:return e}},cloneJob:function(e=oe,t){const{type:s,payload:r}=t;return s===B?{job:r}:s===z?{...oe}:e},tableState:function(e=se,t){const{type:s,payload:r}=t;switch(s){case $:const{filter:t}=r;return{...e,filter:t,currentPage:0};case K:const{sortField:s,isSortAscending:o}=r;return{...e,sortField:s,isSortAscending:o};case Z:const{pageNumber:a}=r;return{...e,currentPage:a};case Y:const{pageSize:i}=r;return{...e,pageSize:i};default:return e}},detailPanel:function(e=re,t){const{type:s,payload:r}=t;switch(s){case L:const{panelType:t,jobId:s}=r;return{panelType:t||e.panelType,jobId:s,isOpen:!0};case w:return{panelType:void 0,jobId:void 0,isOpen:!1};default:return e}},createJob:function(e=ae,t){const{type:s,payload:r}=t;switch(s){case N:return{isSaving:!0,error:void 0};case X:return{...e,isSaving:!1};case W:return{...e,error:r.error,isSaving:!1};case U:return{...e,error:void 0};default:return e}},updateJob:function(e=ie,t){const{type:s}=t;switch(s){case V:return{isUpdating:!0};case G:case q:return{isUpdating:!1};default:return e}}});var le=s(3);const ce=()=>e=>t=>{const{type:s}=t;return s===B&&(Object(le.m)()||Object(le.k)().history.push({pathname:"/create"})),e(t)},ue=()=>e=>t=>{const{type:s}=t;if(s===w&&!Object(le.m)()){const{history:e}=Object(le.k)();e.replace({search:""})}return e(t)},de=function(e={}){const t=[Object(J.applyMiddleware)(P.a,ue,ce)];return window.__REDUX_DEVTOOLS_EXTENSION__&&t.push(window.__REDUX_DEVTOOLS_EXTENSION__()),Object(J.createStore)(ne,e,Object(J.compose)(...t))}();var pe=s(20),be=s(24);const je=({children:e,...t})=>Object(y.jsx)(pe.Router,t,Object(y.jsx)(be.CompatRouter,null,e));var ge=s(8);const xe={services:{}},me=Object(r.createContext)(xe);var he=s(40),fe=s.n(he);const Oe=({children:e,component:t,render:s,...a})=>{const i=Object(r.useMemo)((()=>{if(t)return e=>Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(ye,null),Object(y.jsx)(t,e))}),[t]);if(i)return Object(y.jsx)(pe.Route,u()({},a,{component:i}));if(s||"function"==typeof e){const t="function"==typeof e?e:s;return Object(y.jsx)(pe.Route,u()({},a,{render:e=>Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(ye,null),t(e))}))}return Object(y.jsx)(pe.Route,a,Object(y.jsx)(ye,null),e)},ye=()=>{const{executionContext:e}=Object(r.useContext)(me).services,t=Object(pe.useRouteMatch)();return function(e,t){fe()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},Se=({legacySwitch:e=!0,children:t})=>{const s=Object(pe.useRouteMatch)();return e?Object(y.jsx)(pe.Switch,null,t):Object(y.jsx)(be.Routes,null,r.Children.map(t,(e=>{if(o.a.isValidElement(e)&&e.type===Oe){var r;const a=Object(ge.replace)(null==e?void 0:e.props.path,s.url+"/",""),i="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(y.jsx)(be.Route,{path:a,element:Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(ye,null),(null==e||null===(r=e.props)||void 0===r?void 0:r.component)&&Object(y.jsx)(e.props.component,null)||i&&i()||t)})}return e})))};var Me=s(2),ve=s(1),Ee=s(29);const Te=e=>e.jobs.byId,Fe=e=>e.jobs.allIds,Ce=e=>e.tableState,De=e=>e.detailPanel.panelType,ke=e=>e.detailPanel.isOpen,Je=e=>((e,t)=>Te(e)[t])(e,e.detailPanel.jobId),Ie=e=>e.detailPanel.jobId,Pe=e=>e.jobs.isLoading,Le=e=>e.jobs.jobLoadError,we=e=>e.createJob.isSaving,_e=e=>e.createJob.error,Ae=e=>e.updateJob.isUpdating,Re=e=>e.cloneJob.job,He=Object(Ee.createSelector)(Te,Ce,((e,t)=>{const s=Object.keys(e).map((t=>e[t]));return Object(le.h)(["id","indexPattern","rollupIndex"],t.filter,s)})),Be=Object(Ee.createSelector)(He,(e=>Object.keys(e).length)),ze=Object(Ee.createSelector)(Ce,Be,(({currentPage:e,pageSize:t},s)=>new m.Pager(s,t,e))),Ne=Object(Ee.createSelector)(He,Ce,ze,((e,t,s)=>{const r=Object(le.x)(e,t.sortField,t.isSortAscending),{firstItemIndex:o,lastItemIndex:a}=s;return r.slice(o,a+1)})),Xe=(Object(Ee.createSelector)(ze,(e=>e.hasNextPage)),Object(Ee.createSelector)(ze,(e=>e.hasPreviousPage)),Object(Ee.createSelector)(ze,(e=>e.currentPage)),Object(Ee.createSelector)(Ce,(({filter:e})=>e))),We=Object(Ee.createSelector)(Ce,(({isSortAscending:e})=>e)),Ue=Object(Ee.createSelector)(Ce,(({sortField:e})=>e));var Ve=s(0);const Ge=e=>async t=>{let s;try{s=await Object(le.p)(e)}catch(e){return Object(le.w)(e,Ve.i18n.translate("xpack.rollupJobs.refreshAction.errorTitle",{defaultMessage:"Error refreshing rollup jobs"}))}t({type:H,payload:{jobs:Object(le.g)(s)}})},qe=e=>async t=>{t({type:V});try{await Object(le.d)(Object(le.y)(e))}catch(e){return t({type:q}),Object(le.v)(e,Ve.i18n.translate("xpack.rollupJobs.startJobsAction.errorTitle",{defaultMessage:"Error starting rollup jobs"}))}t({type:G}),t(Ge())},$e=e=>t=>{t({type:B,payload:e})},Ze=({panelType:e,jobId:t})=>s=>{const{history:r}=Object(le.k)(),o=r.location.search,{job:a}=Object(n.extractQueryParams)(o);a!==t&&r.replace({search:`?job=${t}`}),s({type:L,payload:{panelType:e,jobId:t}})},Ye=()=>e=>{e({type:w})};var Ke=s(15),Qe=s(7),et=s(31),tt=s.n(et);const st=({columns:e,fields:t,onRemoveField:s,addButton:r,emptyMessage:o,dataTestSubj:a})=>{let i,n;t.length||(i=Object(y.jsx)(m.EuiEmptyPrompt,{title:o,titleSize:"xs"})),n=s?e.concat({name:"Remove",width:"80px",actions:[{name:"Remove",isPrimary:!0,description:"Remove this field",icon:"trash",type:"icon",color:"danger",onClick:e=>s(e)}]}):e;const l={toolsRight:r||void 0,box:{incremental:!0,placeholder:"Search"}};return Object(y.jsx)(m.EuiInMemoryTable,{items:t,itemId:"name",columns:n,search:l,pagination:{initialPageSize:200,pageSizeOptions:[20,100,200]},sorting:!0,message:i,"data-test-subj":a})};class confirm_delete_modal_ConfirmDeleteModal extends r.Component{renderJobs(){const{jobs:e}=this.props,t=e.map((({id:e,status:t})=>{const s=Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.startedMessage",{defaultMessage:"started"}),r="started"===t?` (${s})`:null;return Object(y.jsx)("li",{key:e},e,r)}));return Object(y.jsx)("ul",null,t)}render(){const{isSingleSelection:e,jobs:t,onCancel:s,onConfirm:o}=this.props;let a,i;if(e){const{id:e,status:s}=t[0];a=Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.deleteSingleJobTitle",{defaultMessage:"Delete rollup job ''{id}''?",values:{id:e}}),"started"===s&&(i=Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.deleteSingleJobDescription",defaultMessage:"This job has been started."})))}else a=Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.multipleDeletionTitle",{defaultMessage:"Delete {count} rollup jobs?",values:{count:t.length}}),i=Object(y.jsx)(r.Fragment,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.multipleDeletionDescription",defaultMessage:"You are about to delete {isSingleSelection, plural, one {this job} other {these jobs}}",values:{isSingleSelection:e?1:0}})),this.renderJobs());return Object(y.jsx)(m.EuiConfirmModal,{title:a,onCancel:s,onConfirm:o,cancelButtonText:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.cancelButtonText",{defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJob.confirmModal.confirmButtonText",{defaultMessage:"Delete"})},i)}}class job_action_menu_JobActionMenuUi extends r.Component{constructor(e){super(e),tt()(this,"onButtonClick",(()=>{this.setState((e=>({isPopoverOpen:!e.isPopoverOpen})))})),tt()(this,"closePopover",(()=>{this.setState({isPopoverOpen:!1})})),tt()(this,"closeDeleteConfirmationModal",(()=>{this.setState({showDeleteConfirmation:!1})})),tt()(this,"openDeleteConfirmationModal",(()=>{this.setState({showDeleteConfirmation:!0})})),tt()(this,"confirmDeleteModal",(()=>{const{showDeleteConfirmation:e}=this.state;if(!e)return null;const{deleteJobs:t,jobs:s}=this.props,r=this.isSingleSelection();return Object(y.jsx)(confirm_delete_modal_ConfirmDeleteModal,{isSingleSelection:r,jobs:s,onConfirm:()=>{this.closePopover(),t()},onCancel:this.closeDeleteConfirmationModal})})),tt()(this,"isSingleSelection",(()=>1===this.props.jobs.length)),this.state={isPopoverOpen:!1,showDeleteConfirmation:!1}}panels(){const{startJobs:e,stopJobs:t,cloneJob:s}=this.props,r=this.isSingleSelection()?1:0,o=[];this.canStartJobs()&&o.push({name:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.startJobLabel",{defaultMessage:"Start {isSingleSelection, plural, one {job} other {jobs}}",values:{isSingleSelection:r}}),icon:Object(y.jsx)(m.EuiIcon,{type:"play"}),onClick:()=>{this.closePopover(),e()}}),this.canStopJobs()&&o.push({name:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.stopJobLabel",{defaultMessage:"Stop {isSingleSelection, plural, one {job} other {jobs}}",values:{isSingleSelection:r}}),icon:Object(y.jsx)(m.EuiIcon,{type:"stop"}),onClick:()=>{this.closePopover(),t()}}),this.canCloneJob()&&o.push({name:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.cloneJobLabel",{defaultMessage:"Clone job"}),icon:Object(y.jsx)(m.EuiIcon,{"data-test-subj":"jobCloneActionContextMenu",type:"copy"}),onClick:()=>{this.closePopover();const{jobs:e}=this.props;s(e[0])}}),this.canDeleteJobs()&&o.push({name:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.deleteJobLabel",{defaultMessage:"Delete {isSingleSelection, plural, one {job} other {jobs}}",values:{isSingleSelection:r}}),icon:Object(y.jsx)(m.EuiIcon,{type:"trash"}),onClick:()=>{this.closePopover(),this.openDeleteConfirmationModal()}});const a={id:0,title:Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.panelTitle",{defaultMessage:"Job options"}),items:o};return Object(le.i)(a)}canStartJobs(){const{jobs:e}=this.props;return e.some((e=>"stopped"===e.status))}canStopJobs(){const{jobs:e}=this.props;return e.some((e=>"started"===e.status))}canCloneJob(){const{jobs:e}=this.props;return Boolean(e&&1===e.length)}canDeleteJobs(){const{jobs:e}=this.props;return-1===e.findIndex((e=>"started"===e.status))}render(){const{isUpdating:e}=this.props;if(e)return Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiLoadingSpinner,{size:"l"})),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiText,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobActionMenu.updatingText",defaultMessage:"Updating"}))));const t=this.props.jobs.length,{iconSide:s,anchorPosition:r,iconType:o,label:a=Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.buttonLabel",{defaultMessage:"Manage {jobCount, plural, one {job} other {jobs}}",values:{jobCount:t}})}=this.props,i=this.panels(),n=Ve.i18n.translate("xpack.rollupJobs.jobActionMenu.jobActionMenuButtonAriaLabel",{defaultMessage:"Job options"}),l=Object(y.jsx)(m.EuiButton,{"data-test-subj":"jobActionMenuButton",iconSide:s,"aria-label":n,onClick:this.onButtonClick,iconType:o,fill:!0},a);return Object(y.jsx)("div",null,this.confirmDeleteModal(),Object(y.jsx)(m.EuiPopover,{button:l,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:r,repositionOnScroll:!0},Object(y.jsx)(m.EuiContextMenu,{"data-test-subj":"jobActionContextMenu",initialPanelId:0,panels:i})))}}tt()(job_action_menu_JobActionMenuUi,"defaultProps",{iconSide:"right",anchorPosition:"rightUp",iconType:"arrowDown",jobs:[]});const rt=job_action_menu_JobActionMenuUi,ot=Object(i.connect)((e=>({isUpdating:Ae(e)})),((e,{jobs:t})=>{const s=t.map((e=>e.id));return{startJobs:()=>{e(qe(s))},stopJobs:()=>{e((e=>async t=>{t({type:V});try{await Object(le.d)(Object(le.z)(e))}catch(e){return t({type:q}),Object(le.v)(e,Ve.i18n.translate("xpack.rollupJobs.stopJobsAction.errorTitle",{defaultMessage:"Error stopping rollup jobs"}))}t({type:G}),t(Ge())})(s))},deleteJobs:()=>{e((e=>async(t,s)=>{t({type:V});try{await Object(le.d)(Object(le.e)(e))}catch(e){return t({type:q}),Object(le.v)(e,Ve.i18n.translate("xpack.rollupJobs.deleteAction.errorTitle",{defaultMessage:"Error deleting rollup jobs"}))}1===e.length?Object(ve.b)().toasts.addSuccess(Ve.i18n.translate("xpack.rollupJobs.deleteAction.successSingleNotificationTitle",{defaultMessage:"Rollup job ''{jobId}'' was deleted",values:{jobId:e[0]}})):Object(ve.b)().toasts.addSuccess(Ve.i18n.translate("xpack.rollupJobs.deleteAction.successMultipleNotificationTitle",{defaultMessage:"{count} rollup jobs were deleted",values:{count:e.length}}));const r=Je(s());r&&e.includes(r.id)&&t(Ye()),t({type:G}),t(Ge())})(s))},cloneJob:t=>{e($e(t))}}}))(rt),at={stopped:Object(y.jsx)(m.EuiHealth,{color:"subdued"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.stoppedLabel",defaultMessage:"Stopped"})),stopping:Object(y.jsx)(m.EuiHealth,{color:"warning"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.stoppingLabel",defaultMessage:"Stopping"})),started:Object(y.jsx)(m.EuiHealth,{color:"success"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.startedLabel",defaultMessage:"Started"})),indexing:Object(y.jsx)(m.EuiHealth,{color:"warning"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.indexingLabel",defaultMessage:"Indexing"})),abort:Object(y.jsx)(m.EuiHealth,{color:"danger"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.abortingLabel",defaultMessage:"Aborting"}))},it=Object(y.jsx)(m.EuiHealth,{color:"subdued"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobStatus.unknownLabel",defaultMessage:"Unknown"})),nt=({status:e})=>at[e]||it;class tab_summary_TabSummary extends r.Component{renderStats(){const{stats:e}=this.props;if(!e)return null;const{documentsProcessed:t,pagesProcessed:s,rollupsIndexed:r,triggerCount:o,status:a}=e;return Object(y.jsx)("section",{"aria-labelledby":"rollupJobDetailStatsTitle","data-test-subj":"rollupJobDetailSummaryStatsSection"},Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",{id:"rollupJobDetailStatsTitle","data-test-subj":"rollupJobDetailStatsTitle"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.sectionStatsTitle",defaultMessage:"Stats"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(nt,{status:a}),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiFlexGroup,null,Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemDocumentsProcessedLabel","data-test-subj":"rollupJobDetailStatsDocumentsProcessedTitle",defaultMessage:"Documents processed"})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsDocumentsProcessedDescription"},t),Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemRollupsIndexedLabel","data-test-subj":"rollupJobDetailStatsRollupsIndexedTitle",defaultMessage:"Rollups indexed"})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsRollupsIndexedDescription"},r))),Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemPagesProcessedLabel","data-test-subj":"rollupJobDetailStatsPagesProcessedTitle",defaultMessage:"Pages processed"})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsPagesProcessedDescription"},s),Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemTriggerCountLabel","data-test-subj":"rollupJobDetailStatsTriggerCountTitle",defaultMessage:"Trigger count"})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailStatsTriggerCountDescription"},o)))))}render(){const{job:e}=this.props,{indexPattern:t,rollupIndex:s,rollupCron:o,rollupDelay:a,dateHistogramInterval:i,dateHistogramTimeZone:n,dateHistogramField:l}=e;return Object(y.jsx)(r.Fragment,null,Object(y.jsx)("section",{"aria-labelledby":"rollupJobDetailLogisticsTitle","data-test-subj":"rollupJobDetailSummaryLogisticsSection"},Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",{id:"rollupJobDetailLogisticsTitle","data-test-subj":"rollupJobDetailLogisticsTitle"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.sectionLogisticsLabel",defaultMessage:"Logistics"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiFlexGroup,null,Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemIndexPatternLabel","data-test-subj":"rollupJobDetailLogisticsIndexPatternTitle",defaultMessage:"Index pattern"})),Object(y.jsx)(m.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"rollupJobDetailLogisticsIndexPatternDescription"},t),Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemCronLabel","data-test-subj":"rollupJobDetailLogisticsCronTitle",defaultMessage:"Cron"})," ",Object(y.jsx)(m.EuiIconTip,{content:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemCronTip",defaultMessage:"The frequency with which data is rolled up"})})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailLogisticsCronDescription"},o))),Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemRollupIndexLabel","data-test-subj":"rollupJobDetailLogisticsRollupIndexTitle",defaultMessage:"Rollup index"})),Object(y.jsx)(m.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"rollupJobDetailLogisticsRollupIndexDescription"},s),Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemDelayLabel","data-test-subj":"rollupJobDetailLogisticsDelayTitle",defaultMessage:"Delay"})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailLogisticsDelayDescription"},a||Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemDelay.none",defaultMessage:"None"}))))),Object(y.jsx)(m.EuiSpacer,{size:"l"})),Object(y.jsx)("section",{"aria-labelledby":"rollupJobDetailDateHistogramTitle","data-test-subj":"rollupJobDetailSummaryDateHistogramSection"},Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",{id:"rollupJobDetailDateHistogramTitle","data-test-subj":"rollupJobDetailDateHistogramTitle"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.sectionDateHistogramLabel",defaultMessage:"Date histogram"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiFlexGroup,null,Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemTimeFieldLabel","data-test-subj":"rollupJobDetailDateHistogramTimeFieldTitle",defaultMessage:"Time field"})),Object(y.jsx)(m.EuiDescriptionListDescription,{className:"eui-textBreakWord","data-test-subj":"rollupJobDetailDateHistogramTimeFieldDescription"},l),Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemIntervalLabel","data-test-subj":"rollupJobDetailDateHistogramIntervalTitle",defaultMessage:"Interval"})," ",Object(y.jsx)(m.EuiIconTip,{content:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemIntervalTip",defaultMessage:"The time bucket interval into which data is rolled up"})})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailDateHistogramIntervalDescription"},i))),Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabSummary.itemTimezoneLabel","data-test-subj":"rollupJobDetailDateHistogramTimezoneTitle",defaultMessage:"Timezone"})),Object(y.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"rollupJobDetailDateHistogramTimezoneDescription"},n))))),this.renderStats())}}const lt=[{field:"name",name:"Field",sortable:!0}],ct=({terms:e})=>Object(y.jsx)(st,{columns:lt,fields:e,dataTestSubj:"detailPanelTermsTabTable"}),ut=[{field:"name",name:Ve.i18n.translate("xpack.rollupJobs.jobDetails.tabHistogram.nameColumnLabel",{defaultMessage:"Field"}),sortable:!0}],dt=({histogram:e,histogramInterval:t})=>Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiDescriptionList,{textStyle:"reverse"},Object(y.jsx)(m.EuiDescriptionListTitle,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabHistogram.intervalLabel",defaultMessage:"Histogram interval"})),Object(y.jsx)(m.EuiDescriptionListDescription,null,t)),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(st,{columns:ut,fields:e,dataTestSubj:"detailPanelHistogramTabTable"})),pt=[{field:"name",name:Ve.i18n.translate("xpack.rollupJobs.jobDetails.tabMetrics.nameColumnLabel",{defaultMessage:"Field"}),sortable:!0},{name:Ve.i18n.translate("xpack.rollupJobs.jobDetails.tabMetrics.typesColumnLabel",{defaultMessage:"Types"}),render:({types:e})=>e.sort().join(", ")}],bt=({metrics:e})=>Object(y.jsx)(st,{columns:pt,fields:e,dataTestSubj:"detailPanelMetricsTabTable"}),jt=({json:e})=>{const t=JSON.stringify(e,null,2);return Object(y.jsx)(m.EuiCodeBlock,{"data-test-subj":"jsonCodeBlock",paddingSize:"m",language:"json",isCopyable:!0},t)},gt=({json:e,endpoint:t})=>{const s=`${t}\n${JSON.stringify(e,null,2)}`;return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobDetails.tabRequest.descriptionText",defaultMessage:"This Elasticsearch request will create this rollup job."}))),Object(y.jsx)(m.EuiSpacer,{size:"m"}),Object(y.jsx)(m.EuiCodeBlock,{language:"json",isCopyable:!0},s))},xt="JOB_DETAILS_TAB_SUMMARY",mt="JOB_DETAILS_TAB_TERMS",ht="JOB_DETAILS_TAB_HISTOGRAM",ft="JOB_DETAILS_TAB_METRICS",Ot="JOB_DETAILS_TAB_JSON",yt="JOB_DETAILS_TAB_REQUEST",St={[xt]:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabSummaryLabel",defaultMessage:"Summary"}),[mt]:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabTermsLabel",defaultMessage:"Terms"}),[ht]:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabHistogramLabel",defaultMessage:"Histogram"}),[ft]:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabMetricsLabel",defaultMessage:"Metrics"}),[Ot]:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabJsonLabel",defaultMessage:"JSON"}),[yt]:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.jobDetails.tabRequestLabel",defaultMessage:"Request"})},Mt=({tab:e,job:t,stats:s,json:r,endpoint:o})=>{const{metrics:a,terms:i,histogram:n,histogramInterval:l}=t;return{[xt]:Object(y.jsx)(tab_summary_TabSummary,{job:t,stats:s}),[mt]:Object(y.jsx)(ct,{terms:i}),[ht]:Object(y.jsx)(dt,{histogram:n,histogramInterval:l}),[ft]:Object(y.jsx)(bt,{metrics:a}),[Ot]:Object(y.jsx)(jt,{json:r}),[yt]:Object(y.jsx)(gt,{json:r,endpoint:o})}[e]},vt=({linksTestSubjPrefix:e})=>Object(y.jsx)(m.EuiCallOut,{title:"Deprecated in 8.11.0",color:"warning",iconType:"warning","data-test-subj":"rollupDeprecationCallout"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.deprecationCalloutMessage",defaultMessage:"Rollups are deprecated and will be removed in a future version. Check our {migrationGuideLink} and use {downsamplingLink} instead.",values:{migrationGuideLink:Object(y.jsx)(m.EuiLink,{href:Qe.a.elasticsearch.rollupMigratingToDownsampling,target:"_blank","data-test-subj":`${e}-rollupDeprecationCalloutMigrationGuideLink`},Ve.i18n.translate("xpack.rollupJobs.deprecationCallout.migrationGuideLink",{defaultMessage:"migration guide"})),downsamplingLink:Object(y.jsx)(m.EuiLink,{href:Qe.a.fleet.datastreamsDownsampling,target:"_blank","data-test-subj":`${e}-rollupDeprecationCalloutDownsamplingDocLink`},Ve.i18n.translate("xpack.rollupJobs.deprecationCallout.downsamplingLink",{defaultMessage:"downsampling"}))}})),Et=[{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.nameHeader",{defaultMessage:"ID"}),fieldName:"id",isSortable:!0},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.statusHeader",{defaultMessage:"Status"}),fieldName:"status",isSortable:!0,render:({status:e,rollupCron:t})=>Object(y.jsx)(m.EuiToolTip,{placement:"top",content:`Cron: ${t}`},Object(y.jsx)(nt,{status:e}))},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.indexPatternHeader",{defaultMessage:"Index pattern"}),truncateText:!0,fieldName:"indexPattern",isSortable:!0},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.rollupIndexHeader",{defaultMessage:"Rollup index"}),truncateText:!0,fieldName:"rollupIndex",isSortable:!0},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.delayHeader",{defaultMessage:"Delay"}),fieldName:"rollupDelay",isSortable:!0,render:({rollupDelay:e})=>e||"None"},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.intervalHeader",{defaultMessage:"Interval"}),fieldName:"dateHistogramInterval",isSortable:!0},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.groupsHeader",{defaultMessage:"Groups"}),fieldName:"groups",isSortable:!1,truncateText:!0,render:e=>["histogram","terms"].reduce(((t,s)=>e[s].length?t?`${t}, ${s}`:s.replace(/^\w/,(e=>e.toUpperCase())):t),"")},{name:Ve.i18n.translate("xpack.rollupJobs.jobTable.headers.metricsHeader",{defaultMessage:"Metrics"}),fieldName:"metrics",isSortable:!1,truncateText:!0,render:e=>{const{metrics:t}=e;return t.length?t.map((e=>e.name)).join(", "):""}}];class job_table_JobTable extends r.Component{static getDerivedStateFromProps(e,t){const{idToSelectedJobMap:s}=t,r=e.jobs.map((e=>e.id)),o=Object.keys(s).filter((e=>!r.includes(e)));if(o.length){const e={...s};return o.forEach((t=>delete e[t])),{idToSelectedJobMap:e}}return null}constructor(e){super(e),tt()(this,"toggleAll",(()=>{if(this.areAllItemsSelected())return this.setState({idToSelectedJobMap:{}});const{jobs:e}=this.props,t={};e.forEach((({id:e})=>{t[e]=!0})),this.setState({idToSelectedJobMap:t})})),tt()(this,"toggleItem",(e=>{this.setState((({idToSelectedJobMap:t})=>{const s={...t};return s[e]?delete s[e]:s[e]=!0,{idToSelectedJobMap:s}}))})),tt()(this,"resetSelection",(()=>{this.setState({idToSelectedJobMap:{}})})),tt()(this,"deselectItems",(e=>{this.setState((({idToSelectedJobMap:t})=>{const s={...t};return e.forEach((e=>delete s[e])),{idToSelectedJobMap:s}}))})),tt()(this,"areAllItemsSelected",(()=>{const{jobs:e}=this.props;return-1===e.findIndex((e=>!this.isItemSelected(e.id)))})),tt()(this,"isItemSelected",(e=>!!this.state.idToSelectedJobMap[e])),tt()(this,"onSort",(e=>{const{sortField:t,isSortAscending:s,sortChanged:r}=this.props;r(e,t!==e||!s)})),this.state={idToSelectedJobMap:{}}}getSelectedJobs(){const{jobs:e}=this.props,{idToSelectedJobMap:t}=this.state;return Object.keys(t).map((t=>e.find((e=>e.id===t))))}buildHeader(){const{sortField:e,isSortAscending:t}=this.props;return Et.map((({name:s,fieldName:r,isSortable:o})=>{const a=e===r;return Object(y.jsx)(m.EuiTableHeaderCell,{key:s,onSort:o?()=>this.onSort(r):void 0,isSorted:a,isSortAscending:t,"data-test-subj":`jobTableHeaderCell-${r}`},s)}))}buildRowCells(e){const{openDetailPanel:t}=this.props;return Et.map((({name:s,fieldName:r,render:o,truncateText:a})=>{const i=o?o(e):e[r];let n;return n="id"===r?Object(y.jsx)(m.EuiLink,{onClick:()=>{Object(ve.f)(le.a.CLICK,Me.o),t(encodeURIComponent(e.id))}},i):Object(y.jsx)("span",null,i),Object(y.jsx)(m.EuiTableRowCell,{key:`${e.id}-${s}`,"data-test-subj":`jobTableCell-${r}`,truncateText:a},a?Object(y.jsx)(m.EuiToolTip,{anchorClassName:"eui-textTruncate",content:i},n):n)}))}buildRows(){const{jobs:e}=this.props;return e.map((e=>{const{id:t}=e;return Object(y.jsx)(m.EuiTableRow,{key:`${t}-row`,"data-test-subj":"jobTableRow"},Object(y.jsx)(m.EuiTableRowCellCheckbox,{key:`checkbox-${t}`},Object(y.jsx)(m.EuiCheckbox,{id:`checkboxSelectIndex-${t}`,checked:this.isItemSelected(t),onChange:()=>{this.toggleItem(t)},"data-test-subj":`indexTableRowCheckbox-${t}`,"aria-label":Ve.i18n.translate("xpack.rollupJobs.jobTable.selectRow",{defaultMessage:"Select this row {id}",values:{id:t}})})),this.buildRowCells(e))}))}renderPager(){const{pager:e,pageChanged:t,pageSizeChanged:s}=this.props;return Object(y.jsx)(m.EuiTablePagination,{activePage:e.getCurrentPageIndex(),itemsPerPage:e.itemsPerPage,itemsPerPageOptions:[20,50,100],pageCount:e.getTotalPages(),onChangeItemsPerPage:s,onChangePage:t})}render(){const{filterChanged:e,filter:t,jobs:s,closeDetailPanel:r}=this.props,{idToSelectedJobMap:o}=this.state,a=Object.keys(o).length>0;return Object(y.jsx)("div",null,Object(y.jsx)(m.EuiFlexGroup,null,a&&Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(ot,{jobs:this.getSelectedJobs(),closeDetailPanel:r,resetSelection:this.resetSelection,deselectJobs:this.deselectItems})),Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(m.EuiFieldSearch,{fullWidth:!0,value:t,onChange:t=>{e(t.target.value)},"data-test-subj":"jobTableFilterInput",placeholder:Ve.i18n.translate("xpack.rollupJobs.jobTable.searchInputPlaceholder",{defaultMessage:"Search"}),"aria-label":"Search jobs"})),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButton,u()({fill:!0},Object(le.l)("/create")),Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobList.createButtonLabel",defaultMessage:"Create rollup job"})))),Object(y.jsx)(m.EuiSpacer,{size:"m"}),s.length>0?Object(y.jsx)(m.EuiTable,{"data-test-subj":"rollupJobsListTable"},Object(y.jsx)(m.EuiTableHeader,null,Object(y.jsx)(m.EuiTableHeaderCellCheckbox,null,Object(y.jsx)(m.EuiCheckbox,{id:"selectAllJobsCheckbox",checked:this.areAllItemsSelected(),onChange:this.toggleAll,"aria-label":Ve.i18n.translate("xpack.rollupJobs.jobTable.selectAllRows",{defaultMessage:"Select all rows"})})),this.buildHeader()),Object(y.jsx)(m.EuiTableBody,null,this.buildRows())):Object(y.jsx)(m.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobTable.noJobsMatchSearchMessage",defaultMessage:"No rollup jobs match your search"}))),Object(y.jsx)(m.EuiSpacer,{size:"m"}),s.length>0?this.renderPager():null)}}tt()(job_table_JobTable,"defaultProps",{jobs:[]});const Tt=Object(i.connect)((e=>({jobs:Ne(e),pager:ze(e),filter:Xe(e),sortField:Ue(e),isSortAscending:We(e)})),(e=>({closeDetailPanel:()=>{e(Ye())},filterChanged:t=>{e((({filter:e})=>t=>{t({type:$,payload:{filter:e}})})({filter:t}))},pageChanged:t=>{e((({pageNumber:e})=>t=>{t({type:Z,payload:{pageNumber:e}})})({pageNumber:t}))},pageSizeChanged:t=>{e((({pageSize:e})=>t=>{t({type:Y,payload:{pageSize:e}})})({pageSize:t}))},sortChanged:(t,s)=>{e((({sortField:e,isSortAscending:t})=>s=>{s({type:K,payload:{sortField:e,isSortAscending:t}})})({sortField:t,isSortAscending:s}))},openDetailPanel:t=>{e(Ze({jobId:t}))}})))(job_table_JobTable),Ft=[xt,mt,ht,ft,Ot],Ct={[xt]:Me.f,[mt]:Me.g,[ht]:Me.c,[ft]:Me.e,[Ot]:Me.d};class detail_panel_DetailPanel extends r.Component{constructor(e){super(e)}renderTabs(){const{panelType:e,job:t,openDetailPanel:s}=this.props;if(!t)return;const{id:o,terms:a,histogram:i,metrics:n}=t,l=[];return Ft.map(((t,r)=>{if(t===mt&&!a.length)return;if(t===ht&&!i.length)return;if(t===ft&&!n.length)return;const c=t===e;l.push(Object(y.jsx)(m.EuiTab,{onClick:()=>{Object(ve.f)(le.a.CLICK,Ct[t]),s({panelType:t,jobId:o})},isSelected:c,"data-test-subj":"detailPanelTab"+(c?"Selected":""),key:r},St[t]))})),Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiTabs,null,l))}renderJob(){const{panelType:e,job:t}=this.props,{status:s,documentsProcessed:o,pagesProcessed:a,rollupsIndexed:i,triggerCount:n,json:l}=t,c={status:s,documentsProcessed:o,pagesProcessed:a,rollupsIndexed:i,triggerCount:n};return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFlyoutBody,{"data-test-subj":"rollupJobDetailTabContent"},Object(y.jsx)(m.EuiErrorBoundary,null,Object(y.jsx)(Mt,{tab:e,job:t,stats:c,json:l}))),Object(y.jsx)(m.EuiFlyoutFooter,null,Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexEnd"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(ot,{iconSide:"left",jobs:[t],anchorPosition:"upRight",detailPanel:!0,iconType:"arrowUp",label:Ve.i18n.translate("xpack.rollupJobs.detailPanel.jobActionMenu.buttonLabel",{defaultMessage:"Manage"})})))))}render(){const{isOpen:e,isLoading:t,closeDetailPanel:s,job:r,jobId:o}=this.props;if(!e)return null;let a;return a=t?Object(y.jsx)(m.EuiFlyoutBody,{"data-test-subj":"rollupJobDetailLoading"},Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiLoadingSpinner,{size:"m"})),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiText,null,Object(y.jsx)(m.EuiTextColor,{color:"subdued"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.detailPanel.loadingLabel",defaultMessage:"Loading rollup job…"})))))):r?this.renderJob():Object(y.jsx)(m.EuiFlyoutBody,{"data-test-subj":"rollupJobDetailJobNotFound"},Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexStart",alignItems:"center",gutterSize:"s"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiIcon,{size:"m",type:"warning",color:"danger"})),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiText,null,Object(y.jsx)(m.EuiTextColor,{color:"subdued"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.detailPanel.notFoundLabel",defaultMessage:"Rollup job not found"})))))),Object(y.jsx)(m.EuiFlyout,{"data-test-subj":"rollupJobDetailFlyout",onClose:s,"aria-labelledby":"rollupJobDetailsFlyoutTitle",size:"m",maxWidth:550},Object(y.jsx)(m.EuiFlyoutHeader,null,Object(y.jsx)(m.EuiTitle,{size:"m",id:"rollupJobDetailsFlyoutTitle","data-test-subj":"rollupJobDetailsFlyoutTitle"},Object(y.jsx)("h2",null,o)),this.renderTabs()),a)}}tt()(detail_panel_DetailPanel,"defaultProps",{panelType:Ft[0]});const Dt=Object(i.connect)((e=>({isOpen:ke(e),isLoading:Pe(e),job:Je(e),jobId:Ie(e),panelType:De(e)})),(e=>({closeDetailPanel:()=>{e(Ye())},openDetailPanel:({panelType:t,jobId:s})=>{e(Ze({panelType:t,jobId:s}))}})))(detail_panel_DetailPanel),kt=()=>Object(y.jsx)(m.EuiPageSection,{alignment:"center",grow:!0},Object(y.jsx)(m.EuiEmptyPrompt,{color:"primary","data-test-subj":"jobListDeprecatedPrompt",iconType:"iInCircle",title:Object(y.jsx)("h1",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.deprecatedPromptTitle",defaultMessage:"Deprecated in 8.11.0"})),body:Object(y.jsx)(r.Fragment,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.deprecatedPromptDescription",defaultMessage:"Rollups are deprecated and will be removed in a future version. Use downsampling instead."}))),actions:Object(y.jsx)(m.EuiButton,{href:Qe.a.fleet.datastreamsDownsampling,target:"_blank",fill:!0,iconType:"help","data-test-subj":"rollupDeprecatedPromptDocsLink"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.deprecatedPrompt.downsamplingDocsButtonLabel",defaultMessage:"Downsampling docs"}))}));class job_list_JobListUi extends r.Component{static getDerivedStateFromProps(e){const{openDetailPanel:t,history:{location:{search:s}}}=e,{job:r}=Object(n.extractQueryParams)(s);return null!=r&&t(r),null}constructor(e){super(e),e.loadJobs(),e.kibana.services.setBreadcrumbs([le.o]),this.state={}}componentDidMount(){this.interval=setInterval((()=>this.props.refreshJobs({asSystemRequest:!0})),3e4)}componentWillUnmount(){clearInterval(this.interval),this.props.closeDetailPanel()}renderNoPermission(){const e=Ve.i18n.translate("xpack.rollupJobs.jobList.noPermissionTitle",{defaultMessage:"Permission error"});return Object(y.jsx)(m.EuiPageSection,{alignment:"center",grow:!0},Object(y.jsx)(m.EuiEmptyPrompt,{color:"danger","data-test-subj":"jobListNoPermission",iconType:"warning",title:Object(y.jsx)("h1",null,e),body:Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobList.noPermissionText",defaultMessage:"You do not have permission to view or add rollup jobs."}))}))}renderError(e){const{statusCode:t,error:s}=e.body,r=Ve.i18n.translate("xpack.rollupJobs.jobList.loadingErrorTitle",{defaultMessage:"Error loading rollup jobs"});return Object(y.jsx)(m.EuiPageSection,{alignment:"center",grow:!0},Object(y.jsx)(m.EuiEmptyPrompt,{color:"danger","data-test-subj":"jobListError",iconType:"warning",title:Object(y.jsx)("h1",null,r),body:Object(y.jsx)("p",null,t," ",s)}))}renderLoading(){return Object(y.jsx)(m.EuiPageSection,{alignment:"center",grow:!0},Object(y.jsx)(n.SectionLoading,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobList.loadingTitle",defaultMessage:"Loading rollup jobs…"})))}renderList(){return Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(m.EuiPageHeader,{bottomBorder:!0,pageTitle:Object(y.jsx)("span",{"data-test-subj":"jobListPageHeader"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.jobListTitle",defaultMessage:"Rollup Jobs"})),rightSideItems:[Object(y.jsx)(m.EuiButtonEmpty,{href:Qe.a.rollupJobs,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.rollupJobsDocsLinkText",defaultMessage:"Rollup Jobs docs"}))]}),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(vt,{linksTestSubjPrefix:"listView"}),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(Tt,null),Object(y.jsx)(Dt,null))}render(){const{isLoading:e,hasJobs:t,jobLoadError:s}=this.props;let r;return r=s?403===s.status?this.renderNoPermission():this.renderError(s):e||t?e?this.renderLoading():this.renderList():Object(y.jsx)(kt,null),r}}const Jt=Object(l.withKibana)(job_list_JobListUi),It=Object(i.connect)((e=>({hasJobs:Boolean(Fe(e).length),isLoading:Pe(e),jobLoadError:Le(e)})),(e=>({loadJobs:()=>{e((async e=>{let t;e({type:_});try{t=await Object(le.p)()}catch(t){return e({type:R,payload:{error:t}})}e({type:A,payload:{jobs:Object(le.g)(t)}})}))},refreshJobs:t=>{e(Ge(t))},openDetailPanel:t=>{e(Ze({jobId:t}))},closeDetailPanel:()=>{e(Ye())},cloneJob:t=>{e($e(t))}})))(Jt),Pt=({isSaving:e,hasNextStep:t,hasPreviousStep:s,goToNextStep:o,goToPreviousStep:a,save:i,canGoToNextStep:n,onClickToggleStart:l,startJobAfterCreation:c})=>{if(e)return Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiLoadingSpinner,{size:"l"})),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiText,null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.navigation.savingText",defaultMessage:"Saving"}))));const u=Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButtonEmpty,{iconType:"arrowLeft",onClick:a,"data-test-subj":"rollupJobBackButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.backButton.label",defaultMessage:"Back"}))),d=Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButton,{iconType:"arrowRight",iconSide:"right",onClick:o,disabled:!n,fill:!0,"data-test-subj":"rollupJobNextButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.nextButton.label",defaultMessage:"Next"}))),p=Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButton,{color:"success",iconType:"check",onClick:i,fill:!0,"data-test-subj":"rollupJobSaveButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.saveButton.label",defaultMessage:"Save"}))),b=Object(y.jsx)(m.EuiFlexItem,{grow:!1,style:{alignSelf:"center"}},Object(y.jsx)(m.EuiCheckbox,{id:"rollupJobToggleJobStartAfterCreation","data-test-subj":"rollupJobToggleJobStartAfterCreation",checked:c,label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.startJobLabel",defaultMessage:"Start job now"}),onChange:l}));return Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"flexStart",gutterSize:"m"},s&&u,t&&d,!t&&Object(y.jsx)(r.Fragment,null,p,b))};var Lt=s(19);class field_chooser_FieldChooser extends r.Component{constructor(e){super(e),tt()(this,"onSearch",(e=>{this.setState({searchValue:e.target.value})})),tt()(this,"onButtonClick",(()=>{this.setState((e=>({isOpen:!e.isOpen})))})),tt()(this,"close",(()=>{this.setState({isOpen:!1})})),this.state={isOpen:!1,searchValue:""}}render(){const{buttonLabel:e,columns:t,fields:s,selectedFields:o,prompt:a,onSelectField:i,dataTestSubj:n}=this.props,{isOpen:l,searchValue:c}=this.state,u=e=>({onClick:()=>{i(e)}});return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiButton,{onClick:this.onButtonClick,"data-test-subj":"rollupJobShowFieldChooserButton"},e),l?(()=>{const r=o.map((({name:e})=>e)),i=s.filter((({name:e})=>!r.includes(e))),l=c?i.filter((e=>{const t=c.trim().toLowerCase();return e.name.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)})):i;return Object(y.jsx)(m.EuiFlyout,{onClose:this.close,"aria-labelledby":"fieldChooserFlyoutTitle",size:"m",maxWidth:400,"data-test-subj":n},Object(y.jsx)(m.EuiFlyoutHeader,null,Object(y.jsx)(m.EuiTitle,{size:"m",id:"fieldChooserFlyoutTitle","data-test-subj":"rollupJobCreateFlyoutTitle"},Object(y.jsx)("h2",null,e)),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiFieldSearch,{placeholder:a,value:c,onChange:this.onSearch,"aria-label":a,fullWidth:!0})),Object(y.jsx)(m.EuiFlyoutBody,null,Object(y.jsx)(m.EuiBasicTable,{items:l,columns:t,rowProps:u,responsive:!1,"data-test-subj":`${n}-table`})))})():null)}}function wt({title:e=Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepErrorTitle",defaultMessage:"Fix errors before continuing."})}){return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiSpacer,{size:"m"}),Object(y.jsx)(m.EuiCallOut,{title:e,color:"danger",iconType:"cross","data-test-subj":"rollupJobCreateStepError"}))}tt()(field_chooser_FieldChooser,"defaultProps",{prompt:"Search",dataTestSubj:"rollupJobFieldChooser"});const _t=Lt.indexPatterns.ILLEGAL_CHARACTERS_VISIBLE.join(" "),At=n.indices.INDEX_ILLEGAL_CHARACTERS_VISIBLE.join(" ");class step_logistics_StepLogistics extends r.Component{constructor(...e){super(...e),tt()(this,"state",{cronFocus:!1}),tt()(this,"showAdvancedCron",(()=>{this.setState({cronFocus:!0});const{onFieldsChange:e}=this.props;e({isAdvancedCronVisible:!0})})),tt()(this,"hideAdvancedCron",(()=>{this.setState({cronFocus:!0});const{onFieldsChange:e,fields:t}=this.props,{simpleRollupCron:s}=t;e({isAdvancedCronVisible:!1,rollupCron:s})})),tt()(this,"renderErrors",(()=>{const{areStepErrorsVisible:e,hasErrors:t}=this.props;return e&&t?Object(y.jsx)(wt,null):null}))}renderIndexPatternHelpText(){const{isValidatingIndexPattern:e,hasMatchingIndices:t}=this.props;if(!e&&t)return Object(y.jsx)(m.EuiTextColor,{color:"success","data-test-subj":"fieldIndexPatternSuccessMessage"},Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpHasMatchesLabel",defaultMessage:"Success! Index pattern has matching indices."})));let s;return s=e?Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpSearchingLabel",defaultMessage:"Looking for matching indices..."})):Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpMustMatchLabel",defaultMessage:"Index pattern must match at least one index that is not a rollup."})),Object(y.jsx)(r.Fragment,null,s,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpAllowLabel",defaultMessage:"Use a wildcard ({asterisk}) to match multiple indices.",values:{asterisk:Object(y.jsx)("strong",null,"*")}})),Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPattern.helpDisallowLabel",defaultMessage:"Spaces and the characters {characterList} are not allowed.",values:{characterList:Object(y.jsx)("strong",null,_t)}})))}renderCronEditor(){const{fields:e,onFieldsChange:t,areStepErrorsVisible:s,fieldErrors:o}=this.props,{rollupCron:a,cronFrequency:i,isAdvancedCronVisible:l,fieldToPreferredValueMap:c}=e,{rollupCron:u}=o;return l?Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldCronLabel",defaultMessage:"Cron expression"}),error:u,isInvalid:Boolean(s&&u),helpText:Object(y.jsx)("p",null,Object(y.jsx)(m.EuiLink,{href:Qe.a.apis.cronExpressions,target:"_blank"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldCron.helpReferenceLinkLabel",defaultMessage:"Learn more about cron expressions"}))),fullWidth:!0},Object(y.jsx)(m.EuiFieldText,{autoFocus:this.state.cronFocus,value:a,onChange:e=>t({rollupCron:e.target.value}),isInvalid:Boolean(s&&u),fullWidth:!0,"data-test-subj":"rollupAdvancedCron"})),Object(y.jsx)(m.EuiSpacer,{size:"m"}),Object(y.jsx)(m.EuiText,{size:"s"},Object(y.jsx)(m.EuiLink,{onClick:this.hideAdvancedCron},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionSchedule.buttonBasicLabel",defaultMessage:"Create basic interval"})))):Object(y.jsx)(r.Fragment,null,Object(y.jsx)(n.CronEditor,{autoFocus:this.state.cronFocus,fieldToPreferredValueMap:c,cronExpression:a,frequency:i,onChange:({cronExpression:e,frequency:s,fieldToPreferredValueMap:r})=>t({rollupCron:e,simpleRollupCron:e,cronFrequency:s,fieldToPreferredValueMap:r})}),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiText,{size:"s"},Object(y.jsx)(m.EuiLink,{onClick:this.showAdvancedCron,"data-test-subj":"rollupShowAdvancedCronLink"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionSchedule.buttonAdvancedLabel",defaultMessage:"Create cron expression"}))))}render(){const{fields:e,onFieldsChange:t,areStepErrorsVisible:s,fieldErrors:o,isValidatingIndexPattern:a,indexPatternAsyncErrors:i}=this.props,{id:n,indexPattern:l,rollupIndex:c,rollupPageSize:u,rollupDelay:d}=e,{id:p,indexPattern:b,rollupIndex:j,rollupPageSize:g,rollupDelay:x}=o;return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiTitle,{"data-test-subj":"rollupJobCreateLogisticsTitle"},Object(y.jsx)("h2",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogisticsTitle",defaultMessage:"Logistics"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.logisticsDescription",defaultMessage:"Define how to run the rollup job and when to index the documents."})))),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButtonEmpty,{size:"s",flush:"right",href:Qe.a.apis.createRollupJobsRequest,target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateLogisticsDocsButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.readDocsButtonLabel",defaultMessage:"Logistics docs"})))),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(m.EuiForm,null,Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionIdTitle",defaultMessage:"Name"}))),description:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionIdDescription",defaultMessage:"This name will be used as a unique identifier for this rollup job."}),fullWidth:!0},Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIdLabel",defaultMessage:"Name"}),error:p,isInvalid:Boolean(s&&p),fullWidth:!0},Object(y.jsx)(m.EuiFieldText,{isInvalid:Boolean(s&&p),value:n,onChange:e=>t({id:e.target.value}),fullWidth:!0,"data-test-subj":"rollupJobName"}))),Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDataFlowTitle",defaultMessage:"Data flow"}))),description:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDataFlowDescription",defaultMessage:"Which indices do you want to roll up and where do you want to store the data?"}),fullWidth:!0},Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldIndexPatternLabel",defaultMessage:"Index pattern"}),error:a?void 0:b||i,isInvalid:Boolean(s&&b)||Boolean(i),helpText:this.renderIndexPatternHelpText(),fullWidth:!0},Object(y.jsx)(m.EuiFieldText,{value:l,onChange:e=>t({indexPattern:e.target.value}),isInvalid:Boolean(s&&b)||Boolean(i),isLoading:a,fullWidth:!0,"data-test-subj":"rollupIndexPattern"})),Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldRollupIndexLabel",defaultMessage:"Rollup index name"}),error:j,isInvalid:Boolean(s&&j),helpText:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldRollupIndex.helpDisallowLabel",defaultMessage:"Spaces, commas, and the characters {characterList} are not allowed.",values:{characterList:Object(y.jsx)("strong",null,At)}}),fullWidth:!0},Object(y.jsx)(m.EuiFieldText,{value:c,onChange:e=>t({rollupIndex:e.target.value}),isInvalid:Boolean(s&&j),fullWidth:!0,"data-test-subj":"rollupIndexName"}))),Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionScheduleTitle",defaultMessage:"Schedule"}))),description:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionScheduleDescription",defaultMessage:"How often do you want to roll up the data?"}),fullWidth:!0},this.renderCronEditor()),Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)(m.EuiTitle,{size:"xs"},Object(y.jsx)("h4",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionPageSizeTitle",defaultMessage:"How many documents do you want to roll up at a time?"}))),description:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionPageSizeDescription",defaultMessage:"A larger page size will roll up data quicker, but requires more memory."}),fullWidth:!0},Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.fieldPageSizeLabel",defaultMessage:"Page size"}),error:g,isInvalid:Boolean(s&&g),fullWidth:!0},Object(y.jsx)(m.EuiFieldNumber,{value:u?Number(u):"",onChange:e=>t({rollupPageSize:e.target.value}),isInvalid:Boolean(s&&g),fullWidth:!0,min:0,"data-test-subj":"rollupPageSize"}))),Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)(m.EuiTitle,{size:"xs"},Object(y.jsx)("h4",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDelayTitle",defaultMessage:"How long should the rollup job wait before rolling up new data?"}))),description:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepLogistics.sectionDelayDescription",defaultMessage:"A latency buffer will delay rolling up data. This will yield a higher-fidelity rollup by allowing for variable ingest latency. By default, the rollup job attempts to roll up all data that is available."}),fullWidth:!0},Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldDelayLabel",defaultMessage:"Latency buffer (optional)"}),error:x,isInvalid:Boolean(s&&x),helpText:Object(y.jsx)(r.Fragment,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldDelay.helpExampleLabel",defaultMessage:"Example values: 30s, 20m, 24h, 2d, 1w, 1M"}))),fullWidth:!0},Object(y.jsx)(m.EuiFieldText,{value:d||"",onChange:e=>t({rollupDelay:e.target.value}),isInvalid:Boolean(s&&x),fullWidth:!0,"data-test-subj":"rollupDelay"})))),this.renderErrors())}}var Rt=s(30),Ht=s.n(Rt);const{parseEsInterval:Bt}=Lt.search.aggs,zt=Ht.a.tz.names().map((e=>({value:e,text:e})));class step_date_histogram_StepDateHistogram extends r.Component{static getDerivedStateFromProps(e){const{dateFields:t}=e;return{dateHistogramFieldOptions:t.map((e=>({value:e,text:e})))}}constructor(e){super(e),tt()(this,"renderErrors",(()=>{const{areStepErrorsVisible:e,hasErrors:t}=this.props;return e&&t?Object(y.jsx)(wt,null):null})),this.state={dateHistogramFieldOptions:[]}}renderIntervalHelpText(){const{fields:e}=this.props,{dateHistogramInterval:t}=e;let s;try{const{value:e,unit:r}=Bt(t);if(1===e)switch(r){case"d":s=Object(y.jsx)(m.EuiTextColor,{color:"warning"},Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningDayLabel",defaultMessage:"Consider using 24h instead of 1d. This allows for more flexible queries."})));break;case"h":s=Object(y.jsx)(m.EuiTextColor,{color:"warning"},Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningHourLabel",defaultMessage:"Consider using 60m instead of 1h. This allows for more flexible queries."})))}switch(r){case"y":s=Object(y.jsx)(m.EuiTextColor,{color:"warning"},Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningYearLabel",defaultMessage:"Consider using the d unit instead of y. This allows for more flexible queries."})));break;case"M":s=Object(y.jsx)(m.EuiTextColor,{color:"warning"},Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningMonthLabel",defaultMessage:"Consider using the d unit instead of M. This allows for more flexible queries."})));break;case"w":s=Object(y.jsx)(m.EuiTextColor,{color:"warning"},Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.preferFixedWarningWeekLabel",defaultMessage:"Consider using the d unit instead of w. This allows for more flexible queries."})))}}catch(e){}return Object(y.jsx)(r.Fragment,null,s,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldInterval.helpExampleLabel",defaultMessage:"Example sizes: 1000ms, 30s, 20m, 24h, 2d, 1w, 1M, 1y"})))}render(){const{fields:e,onFieldsChange:t,areStepErrorsVisible:s,fieldErrors:o}=this.props,{dateHistogramInterval:a,dateHistogramField:i,dateHistogramTimeZone:n}=e,{dateHistogramInterval:l,dateHistogramField:c,dateHistogramTimeZone:u}=o,{dateHistogramFieldOptions:d}=this.state;return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiTitle,{"data-test-subj":"rollupJobCreateDateHistogramTitle"},Object(y.jsx)("h2",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogramTitle",defaultMessage:"Date histogram"})))),Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiButtonEmpty,{size:"s",flush:"right",href:Qe.a.apis.createRollupJobsRequest,target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateDateHistogramDocsButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.readDocsButtonLabel",defaultMessage:"Date histogram docs"})))),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(m.EuiForm,null,Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)("div",null),description:Object(y.jsx)(r.Fragment,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogramDescription",defaultMessage:"Define how {link} will operate on your rollup data.",values:{link:Object(y.jsx)(m.EuiLink,{href:Qe.a.aggs.date_histogram,target:"_blank"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogramDescription.aggregationsLinkLabel",defaultMessage:"date histogram aggregations"}))}})),Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.sectionDataSourceDescription",defaultMessage:"Note that smaller time buckets take up proportionally more space."}))),fullWidth:!0},Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldDateFieldLabel",defaultMessage:"Date field"}),error:c,isInvalid:Boolean(s&&c),fullWidth:!0},Object(y.jsx)(m.EuiSelect,{isInvalid:Boolean(s&&c),options:d,value:i,onChange:e=>t({dateHistogramField:e.target.value}),fullWidth:!0,"data-test-subj":"rollupJobCreateDateFieldSelect"})),Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldIntervalLabel",defaultMessage:"Time bucket size"}),error:l,isInvalid:Boolean(s&&l),helpText:this.renderIntervalHelpText(),fullWidth:!0},Object(y.jsx)(m.EuiFieldText,{value:a||"",onChange:e=>t({dateHistogramInterval:e.target.value}),isInvalid:Boolean(s&&l),fullWidth:!0,"data-test-subj":"rollupJobInterval"})),Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepDateHistogram.fieldTimeZoneLabel",defaultMessage:"Time zone"}),error:u||"",isInvalid:Boolean(s&&u),fullWidth:!0},Object(y.jsx)(m.EuiSelect,{options:zt,value:n,onChange:e=>t({dateHistogramTimeZone:e.target.value}),fullWidth:!0,"data-test-subj":"rollupJobCreateTimeZoneSelect"})))),this.renderErrors())}}class step_terms_StepTerms extends r.Component{constructor(...e){super(...e),tt()(this,"onSelectField",(e=>{const{fields:{terms:t},onFieldsChange:s}=this.props;s({terms:t.concat(e)})})),tt()(this,"onRemoveField",(e=>{const{fields:{terms:t},onFieldsChange:s}=this.props;s({terms:t.filter((t=>t!==e))})}))}render(){const{fields:e,termsFields:t}=this.props,{terms:s}=e,o=[{field:"name",name:"Field",sortable:!0},{field:"type",name:"Type",truncateText:!0,sortable:!0,width:"180px"}];return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiTitle,{"data-test-subj":"rollupJobCreateTermsTitle"},Object(y.jsx)("h2",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepTermsTitle",defaultMessage:"Terms (optional)"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepTermsDescription",defaultMessage:"Select the fields you want to bucket using terms aggregations. This can be costly for high-cardinality fields such as IP addresses, if the time bucket is sparse."})))),Object(y.jsx)(m.EuiFlexItem,{grow:!1,className:"rollupJobWizardStepActions"},Object(y.jsx)(m.EuiButtonEmpty,{size:"s",flush:"right",href:Qe.a.apis.createRollupJobsRequest,target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateTermsDocsButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepTerms.readDocsButtonLabel",defaultMessage:"Terms docs"})))),Object(y.jsx)(m.EuiSpacer,null),Object(y.jsx)(st,{columns:o,fields:s,onRemoveField:this.onRemoveField,emptyMessage:Object(y.jsx)("p",null,"No terms fields added"),addButton:Object(y.jsx)(field_chooser_FieldChooser,{buttonLabel:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepTerms.fieldsChooserLabel",defaultMessage:"Add terms fields"}),columns:o,fields:t,selectedFields:s,onSelectField:this.onSelectField,dataTestSubj:"rollupJobTermsFieldChooser"}),dataTestSubj:"rollupJobTermsFieldList"}))}}class step_histogram_StepHistogram extends r.Component{constructor(...e){super(...e),tt()(this,"onSelectField",(e=>{const{fields:{histogram:t},onFieldsChange:s}=this.props;s({histogram:t.concat(e)})})),tt()(this,"onRemoveField",(e=>{const{fields:{histogram:t},onFieldsChange:s}=this.props;s({histogram:t.filter((t=>t!==e))})})),tt()(this,"renderErrors",(()=>{const{areStepErrorsVisible:e,hasErrors:t}=this.props;return e&&t?Object(y.jsx)(wt,null):null}))}render(){const{fields:e,histogramFields:t}=this.props,{histogram:s}=e,o=[{field:"name",name:"Field",sortable:!0}];return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiTitle,{"data-test-subj":"rollupJobCreateHistogramTitle"},Object(y.jsx)("h2",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogramTitle",defaultMessage:"Histogram (optional)"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.histogramDescription",defaultMessage:"Select the fields you want to bucket using numeric intervals."})))),Object(y.jsx)(m.EuiFlexItem,{grow:!1,className:"rollupJobWizardStepActions"},Object(y.jsx)(m.EuiButtonEmpty,{size:"s",flush:"right",href:Qe.a.apis.createRollupJobsRequest,target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateHistogramDocsButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.readDocsButtonLabel",defaultMessage:"Histogram docs"})))),Object(y.jsx)(m.EuiSpacer,null),Object(y.jsx)(st,{columns:o,fields:s,onRemoveField:this.onRemoveField,emptyMessage:Object(y.jsx)("p",null,"No histogram fields added"),addButton:Object(y.jsx)(field_chooser_FieldChooser,{buttonLabel:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.fieldsChooserLabel",defaultMessage:"Add histogram fields"}),columns:o,fields:t,selectedFields:s,onSelectField:this.onSelectField,dataTestSubj:"rollupJobHistogramFieldChooser"}),dataTestSubj:"rollupJobHistogramFieldList"}),this.renderInterval(),this.renderErrors())}renderInterval(){const{fields:e,onFieldsChange:t,areStepErrorsVisible:s,fieldErrors:o}=this.props,{histogram:a,histogramInterval:i}=e,{histogramInterval:n}=o;return a.length?Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiSpacer,{size:"xl"}),Object(y.jsx)(m.EuiDescribedFormGroup,{title:Object(y.jsx)(m.EuiTitle,{size:"s"},Object(y.jsx)("h3",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.sectionHistogramIntervalTitle",defaultMessage:"Histogram interval"}))),description:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.sectionHistogramIntervalDescription",defaultMessage:"This is the interval of histogram buckets to be generated when rolling up, e.g. 5 will create buckets that are five units wide (0-5, 5-10, etc). Note that only one interval can be specified in the histogram group, meaning that all fields being grouped via the histogram must share the same interval."}),fullWidth:!0},Object(y.jsx)(m.EuiFormRow,{label:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepHistogram.fieldHistogramIntervalLabel",defaultMessage:"Interval"}),error:n,isInvalid:Boolean(s&&n),fullWidth:!0},Object(y.jsx)(m.EuiFieldNumber,{value:i||0===i?Number(i):"",onChange:e=>t({histogramInterval:e.target.value}),isInvalid:Boolean(s&&n),fullWidth:!0,"data-test-subj":"rollupJobCreateHistogramInterval"})))):null}}const Nt=[{type:"avg",label:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxAverageLabel",{defaultMessage:"Average"})},{type:"max",label:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxMaxLabel",{defaultMessage:"Maximum"})},{type:"min",label:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxMinLabel",{defaultMessage:"Minimum"})},{type:"sum",label:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxSumLabel",{defaultMessage:"Sum"})},{type:"value_count",label:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.checkboxValueCountLabel",{defaultMessage:"Value count"})}],Xt={numeric:{avg:!0,max:!0,min:!0,sum:!0,value_count:!0},date:{max:!0,min:!0,value_count:!0}},Wt=(e,t)=>!!Object(ge.get)(Xt,[e,t]),Ut=Nt.map((e=>{const t={};for(const[s,r]of Object.entries(Xt))t[s]=!!r[e.type];return{...e,fieldTypes:t}}));class step_metrics_StepMetrics extends r.Component{constructor(e){super(e),tt()(this,"openMetricsPopover",(()=>{this.setState({metricsPopoverOpen:!0})})),tt()(this,"closeMetricsPopover",(()=>{this.setState({metricsPopoverOpen:!1})})),tt()(this,"onSelectField",(e=>{const{fields:{metrics:t},onFieldsChange:s}=this.props;s({metrics:t.concat({...e,types:[]})})})),tt()(this,"onRemoveField",(e=>{const{fields:{metrics:t},onFieldsChange:s}=this.props;s({metrics:t.filter((({name:t})=>t!==e.name))})})),tt()(this,"setMetric",((e,t,s)=>{const{fields:{metrics:r}}=this.props,o=[...r],a=o.find((({name:t})=>t===e));return s?-1===a.types.indexOf(t)&&a.types.push(t):a.types.splice(a.types.indexOf(t),1),o})),tt()(this,"renderErrors",(()=>{const{areStepErrorsVisible:e,fieldErrors:t}=this.props,{metrics:s}=t;return e&&s?Object(y.jsx)(wt,{title:s}):null})),this.state={metricsPopoverOpen:!1,listColumns:[],selectedMetricsMap:[]}}renderMetricsSelectAllCheckboxes(){const{fields:{metrics:e},onFieldsChange:t}=this.props;let s=0;const r=[{label:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.allCheckbox",{defaultMessage:"All"}),type:"all"}].concat(Ut).map((({label:r,type:o,fieldTypes:a},i)=>{const n="all"===o,l=n?e:e.filter((({type:e})=>a[e]));let c=0,u=!1,d=!1;return n?(l.forEach((({types:e,type:t})=>{Object.keys(Xt[t]).every((t=>e.some((e=>e===t))))&&++c})),d=0===e.length):(l.forEach((({types:e})=>{e.some((e=>e===o))&&++c})),d=!e.some((({type:e})=>Wt(e,o)))),u=c===l.length,d&&++s,Object(y.jsx)(m.EuiCheckbox,{id:`${i}-select-all-checkbox`,"data-test-subj":`rollupJobMetricsSelectAllCheckbox-${o}`,disabled:d,label:r,checked:!d&&u,onChange:()=>{if(n){const e=Ut.reduce(((e,{type:t})=>this.setMetrics(t,!u)),null);t({metrics:e})}else t({metrics:this.setMetrics(o,!u)})}})}));return{checkboxElements:r,allCheckboxesDisabled:r.length===s}}getMetricsSelectAllMenu(){const{checkboxElements:e,allCheckboxesDisabled:t}=this.renderMetricsSelectAllCheckboxes();return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiPopover,{ownFocus:!0,isOpen:this.state.metricsPopoverOpen,closePopover:this.closeMetricsPopover,button:Object(y.jsx)(m.EuiButton,{disabled:t,onClick:this.openMetricsPopover,"data-test-subj":"rollupJobSelectAllMetricsPopoverButton"},Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.selectAllPopoverButtonLabel",{defaultMessage:"Select metrics"}))},Object(y.jsx)(m.EuiFlexGroup,{alignItems:"flexStart",direction:"column"},e.map(((e,t)=>Object(y.jsx)(m.EuiFlexItem,{key:t},e))))))}renderRowSelectAll({fieldName:e,fieldType:t,types:s}){const{onFieldsChange:r}=this.props,o=Boolean(s.length),a=Object.keys(Xt[t]).length,i=a===s.length,n=Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.selectAllRowLabel",{defaultMessage:"All"});return Object(y.jsx)(m.EuiCheckbox,{id:`${e}-selectAll-checkbox`,"data-test-subj":"rollupJobMetricsCheckbox-selectAll",label:n,checked:i,onChange:()=>{const i=!o||s.length!==a,n=Ut.filter((e=>e.fieldTypes[t])).reduce(((t,{type:s})=>this.setMetric(e,s,i)),null);r({metric:n})}})}getListColumns(){return step_metrics_StepMetrics.chooserColumns.concat({type:"metrics",name:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.metricsColumnHeader",{defaultMessage:"Metrics"}),render:({name:e,type:t,types:s})=>{const{onFieldsChange:r}=this.props,o=Ut.map((({type:o,label:a})=>{if(!Wt(t,o))return;const i=s.includes(o);return Object(y.jsx)(m.EuiFlexItem,{grow:!1,key:`${e}-${o}-checkbox`},Object(y.jsx)(m.EuiCheckbox,{id:`${e}-${o}-checkbox`,"data-test-subj":`rollupJobMetricsCheckbox-${o}`,label:a,checked:i,onChange:()=>r({metrics:this.setMetric(e,o,!i)})}))})).filter((e=>void 0!==e));return Object(y.jsx)(m.EuiFlexGroup,{wrap:!0,gutterSize:"m"},Object(y.jsx)(m.EuiFlexItem,{grow:!1,key:`${e}-selectAll-checkbox`},this.renderRowSelectAll({fieldName:e,fieldType:t,types:s})),o)}})}setMetrics(e,t){const{fields:{metrics:s}}=this.props;return s.filter((t=>Wt(t.type,e))).reduce(((s,r)=>this.setMetric(r.name,e,t)),[])}render(){const{fields:e,metricsFields:t}=this.props,{metrics:s}=e;return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(y.jsx)(m.EuiFlexItem,{grow:!1},Object(y.jsx)(m.EuiTitle,{"data-test-subj":"rollupJobCreateMetricsTitle"},Object(y.jsx)("h2",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetricsTitle",defaultMessage:"Metrics (optional)"}))),Object(y.jsx)(m.EuiSpacer,{size:"s"}),Object(y.jsx)(m.EuiText,null,Object(y.jsx)("p",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetricsDescription",defaultMessage:"Select the metrics to collect while rolling up data. By default, only doc_counts are collected for each group."})))),Object(y.jsx)(m.EuiFlexItem,{grow:!1,className:"rollupJobWizardStepActions"},Object(y.jsx)(m.EuiButtonEmpty,{size:"s",flush:"right",href:Qe.a.apis.createRollupJobsRequest,target:"_blank",iconType:"help","data-test-subj":"rollupJobCreateMetricsDocsButton"},Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetrics.readDocsButtonLabel",defaultMessage:"Metrics docs"})))),Object(y.jsx)(m.EuiSpacer,null),Object(y.jsx)(st,{columns:this.getListColumns(),fields:s,onRemoveField:this.onRemoveField,emptyMessage:Object(y.jsx)("p",null,Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.emptyListLabel",{defaultMessage:"No metrics fields added"})),addButton:Object(y.jsx)(m.EuiFlexGroup,{justifyContent:"spaceEvenly",alignItems:"center",gutterSize:"s"},Object(y.jsx)(m.EuiFlexItem,null,Object(y.jsx)(field_chooser_FieldChooser,{key:"stepMetricsFieldChooser",buttonLabel:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepMetrics.fieldsChooserLabel",defaultMessage:"Add metrics fields"}),columns:step_metrics_StepMetrics.chooserColumns,fields:t,selectedFields:s,onSelectField:this.onSelectField,dataTestSubj:"rollupJobMetricsFieldChooser"})),Object(y.jsx)(m.EuiFlexItem,null,this.getMetricsSelectAllMenu())),dataTestSubj:"rollupJobMetricsFieldList"}),this.renderErrors())}}tt()(step_metrics_StepMetrics,"chooserColumns",[{field:"name",name:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.fieldColumnLabel",{defaultMessage:"Field"}),sortable:!0,width:"240px"},{field:"type",name:Ve.i18n.translate("xpack.rollupJobs.create.stepMetrics.typeColumnLabel",{defaultMessage:"Type"}),truncateText:!0,sortable:!0,width:"100px"}]);const Vt=[xt,mt,ht,ft,yt];class step_review_StepReview extends r.Component{constructor(e){super(e),tt()(this,"selectTab",(e=>{this.setState({selectedTab:e})})),this.state={selectedTab:Vt[0]}}renderTabs(){const{selectedTab:e}=this.state,{job:t}=this.props,s=[];return Vt.forEach(((r,o)=>{if(r===mt&&!t.terms.length)return;if(r===ht&&!t.histogram.length)return;if(r===ft&&!t.metrics.length)return;const a=r===e;s.push(Object(y.jsx)(m.EuiTab,{onClick:()=>this.selectTab(r),isSelected:a,"data-test-subj":"stepReviewTab",key:o},St[r]))})),1===!s.length?null:Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiTabs,null,s),Object(y.jsx)(m.EuiSpacer,{size:"m"}))}render(){const{job:e}=this.props,{selectedTab:t}=this.state,s=Object(le.s)(e),o=`PUT _rollup/job/${e.id}`;return Object(y.jsx)(r.Fragment,null,Object(y.jsx)(m.EuiTitle,{"data-test-subj":"rollupJobCreateReviewTitle"},Object(y.jsx)("h2",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.stepReviewTitle",defaultMessage:"Review details for ''{jobId}''",values:{jobId:e.id}}))),this.renderTabs(),Object(y.jsx)(m.EuiErrorBoundary,null,Object(y.jsx)(Mt,{job:e,json:s,endpoint:o,tab:t})))}}function Gt(e,t){return t&&e===t?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.idSameAsCloned",defaultMessage:'Name cannot be the same as cloned name: "{clonedId}".',values:{clonedId:t}})]:e&&e.trim()?void 0:[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.idMissing",defaultMessage:"Name is required."})]}function qt(e,t){if(!e||!e.trim())return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternMissing",defaultMessage:"Index pattern is required."})];if(e===t)return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternSameAsRollupIndex",defaultMessage:"Index pattern cannot have the same as the rollup index."})];const s=Lt.indexPatterns.ILLEGAL_CHARACTERS_VISIBLE.reduce(((t,s)=>(e.includes(s)&&t.push(s),t)),[]);return s.length?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternIllegalCharacters",defaultMessage:"Remove the characters {characterList} from your index pattern.",values:{characterList:Object(y.jsx)("strong",null,s.join(" "))}})]:e.includes(" ")?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternSpaces",defaultMessage:"Remove the spaces from your index pattern."})]:void 0}function $t(e,t){if(!e||!e.trim())return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexMissing",defaultMessage:"Rollup index is required."})];if(e===t)return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexSameAsIndexPattern",defaultMessage:"Rollup index cannot have the same as the index pattern."})];const s=n.indices.findIllegalCharactersInIndexName(e);return s.length?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexIllegalCharacters",defaultMessage:"Remove the characters {characterList} from your rollup index name.",values:{characterList:Object(y.jsx)("strong",null,s.join(" "))}})]:e.includes(",")?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexCommas",defaultMessage:"Remove the commas from your rollup index name."})]:e.includes(" ")?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexSpaces",defaultMessage:"Remove the spaces from your rollup index name."})]:"."===e[0]?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupIndexBeginningPeriod",defaultMessage:"Index names cannot begin with periods."})]:void 0}var Zt=s(39),Yt=s.n(Zt);function Kt(e){if(!e||!e.trim())return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupCronMissing",defaultMessage:"Cron pattern or basic interval is required."})];try{Yt.a.toString(e)}catch(e){const t="Error: ",s=e.indexOf(t);return e.substring(s+t.length)}}function Qt(e){return e&&e.toString().trim()?e<=0?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupPageSizeGreaterThanZero",defaultMessage:"Page size must be greater than zero."})]:void 0:[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupPageSizeMissing",defaultMessage:"Page size is required."})]}const{InvalidEsIntervalFormatError:es,InvalidEsCalendarIntervalError:ts,parseEsInterval:ss}=Lt.search.aggs;function rs(e){if(e&&e.trim())try{ss(e)}catch(e){if(e instanceof es)return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupDelayInvalidFormat",defaultMessage:"Invalid delay format."})];if(e instanceof ts){const{unit:t}=e;return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupDelayInvalidCalendarInterval",defaultMessage:"The ''{unit}'' unit only allows values of 1. Try {suggestion}.",values:{unit:t,suggestion:Object(y.jsx)("strong",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.rollupDelayInvalidCalendarIntervalSuggestion",defaultMessage:"1{unit}",values:{unit:t}}))}})]}throw e}}function os(e){if(!e||!e.trim())return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramFieldMissing",defaultMessage:"Date field is required."})]}const{InvalidEsIntervalFormatError:as,InvalidEsCalendarIntervalError:is,parseEsInterval:ns}=Lt.search.aggs;function ls(e){if(!e||!e.trim())return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalMissing",defaultMessage:"Interval is required."})];try{ns(e)}catch(e){if(e instanceof as)return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalInvalidFormat",defaultMessage:"Invalid interval format."})];if(e instanceof is){const{unit:t}=e;return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalInvalidCalendarInterval",defaultMessage:"The ''{unit}'' unit only allows values of 1. Try {suggestion}.",values:{unit:t,suggestion:Object(y.jsx)("strong",null,Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.dateHistogramIntervalInvalidCalendarIntervalSuggestion",defaultMessage:"1{unit}",values:{unit:t}}))}})]}throw e}}function cs(e,t){if(e.length)return t<=0?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.histogramIntervalZero",defaultMessage:"Interval must be greater than zero."})]:Math.round(t)!==Number(t)?[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.histogramIntervalWholeNumber",defaultMessage:"Interval must be a whole number."})]:t?void 0:[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.histogramIntervalMissing",defaultMessage:"An interval is required to roll up these histogram fields."})]}function us(e){const t=e.reduce(((e,{name:t,types:s})=>(s.length||e.push(t),e)),[]);if(t.length){const e=t.join(", ");return[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.metricsTypesMissing",key:"xpack.rollupJobs.create.errors.metricsTypesMissing",defaultMessage:"Select metrics types for these fields or remove them: {allMissingTypes}.",values:{allMissingTypes:e}})]}}const ds="STEP_LOGISTICS",ps="STEP_DATE_HISTOGRAM",bs="STEP_TERMS",js="STEP_HISTOGRAM",gs="STEP_METRICS",xs="STEP_REVIEW",ms=[ds,ps,bs,js,gs,xs],hs={[ds]:{getDefaultFields:(e={})=>{const t=!!e.rollupCron,s=Object(ge.get)(e,["json","config","page_size"],1e3),r=e.id||void 0,o=e.id?`${e.id}-copy`:"",a={indexPattern:"",rollupIndex:"",rollupCron:"0 0 0 ? * 7",simpleRollupCron:"0 0 0 ? * 7",rollupPageSize:s,rollupDelay:"1d",cronFrequency:"WEEK",fieldToPreferredValueMap:{}};return{...a,...Object(ge.pick)(e,Object.keys(a)),id:o,isAdvancedCronVisible:t,rollupPageSize:s,clonedRollupId:r}},fieldsValidator:e=>{const{id:t,indexPattern:s,rollupIndex:r,rollupCron:o,rollupPageSize:a,rollupDelay:i,clonedRollupId:n}=e;return{id:Gt(t,n),indexPattern:qt(s,r),rollupIndex:$t(r,s),rollupCron:Kt(o),rollupPageSize:Qt(a),rollupDelay:rs(i)}}},[ps]:{getDefaultFields:(e={})=>{const t={dateHistogramField:null,dateHistogramInterval:null,dateHistogramTimeZone:"UTC"};return{...t,...Object(ge.pick)(e,Object.keys(t))}},fieldsValidator:e=>{const{dateHistogramField:t,dateHistogramInterval:s}=e;return{dateHistogramField:os(t),dateHistogramInterval:ls(s)}}},[bs]:{getDefaultFields:(e={})=>({terms:[],...Object(ge.pick)(e,["terms"])})},[js]:{getDefaultFields:e=>({histogram:[],histogramInterval:void 0,...Object(ge.pick)(e,["histogram","histogramInterval"])}),fieldsValidator:e=>{const{histogram:t,histogramInterval:s}=e;return{histogramInterval:cs(t,s)}}},[gs]:{getDefaultFields:(e={})=>({metrics:[],...Object(ge.pick)(e,["metrics"])}),fieldsValidator:e=>{const{metrics:t}=e;return{metrics:us(t)}}},[xs]:{getDefaultFields:()=>({})}};function fs(e){return Object.values(e).some((e=>void 0!==e))}const Os={[ds]:Ve.i18n.translate("xpack.rollupJobs.create.steps.stepLogisticsTitle",{defaultMessage:"Logistics"}),[ps]:Ve.i18n.translate("xpack.rollupJobs.create.steps.stepDateHistogramTitle",{defaultMessage:"Date histogram"}),[bs]:Ve.i18n.translate("xpack.rollupJobs.create.steps.stepTermsTitle",{defaultMessage:"Terms"}),[js]:Ve.i18n.translate("xpack.rollupJobs.create.steps.stepHistogramTitle",{defaultMessage:"Histogram"}),[gs]:Ve.i18n.translate("xpack.rollupJobs.create.steps.stepMetricsTitle",{defaultMessage:"Metrics"}),[xs]:Ve.i18n.translate("xpack.rollupJobs.create.steps.stepReviewTitle",{defaultMessage:"Review and save"})};class job_create_JobCreateUi extends r.Component{constructor(e){super(e),tt()(this,"requestIndexPatternValidation",Object(ge.debounce)(((e=!0)=>{const t=this.getIndexPattern(),s=++this.lastIndexPatternValidationIdx;Object(le.A)(t).then((t=>{if(!this._isMounted)return;if(s!==this.lastIndexPatternValidationIdx)return;const{doesMatchIndices:r,doesMatchRollupIndices:o,dateFields:a,numericFields:i,keywordFields:n}=t;let l;o?l=[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternMatchesRollupIndices",defaultMessage:"Index pattern must not match rollup indices."})]:r?a.length||(l=[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternNoTimeFields",defaultMessage:"Index pattern must match indices that contain time fields."})]):l=[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternNoMatchingIndices",defaultMessage:"Index pattern doesn't match any indices."})];const c=Ve.i18n.translate("xpack.rollupJobs.create.numericTypeField",{defaultMessage:"numeric"}),u=Ve.i18n.translate("xpack.rollupJobs.create.keywordTypeField",{defaultMessage:"keyword"}),d=Ve.i18n.translate("xpack.rollupJobs.create.dateTypeField",{defaultMessage:"date"}),p=Object(le.j)(i,c),b=Object(le.j)(n,u),j=Object(le.j)(a,d),{jobToClone:g,stepsFields:x}=this.state,{[gs]:{metrics:m}}=x;if(g&&m&&m.length&&!Object(ge.first)(m).type){const e=[{fields:p,type:c},{fields:b,type:u},{fields:j,type:d}],t=Object(le.r)({metrics:m,typeMaps:e});this.onFieldsChange({metrics:t},gs)}function h(e,t){const s=e.name.toUpperCase(),r=t.name.toUpperCase();return s<r?-1:s>r?1:0}const f=[...p,...b].sort(h),O=[...p].sort(h),S=[...p,...j].sort(h);a.sort(),e&&this.onFieldsChange({dateHistogramField:a.length?a[0]:void 0},ps),this.setState({indexPatternAsyncErrors:l,indexPatternDateFields:a,indexPatternTermsFields:f,indexPatternHistogramFields:O,indexPatternMetricsFields:S,isValidatingIndexPattern:!1})})).catch((e=>{if(this._isMounted&&s===this.lastIndexPatternValidationIdx)if(e&&e.body){const{error:t,statusCode:s}=e.body,r=[Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.create.errors.indexPatternValidationError",defaultMessage:"There was a problem validating this index pattern: {statusCode} {error}",values:{error:t,statusCode:s}})];this.setState({indexPatternAsyncErrors:r,indexPatternDateFields:[],indexPatternTermsFields:[],indexPatternHistogramFields:[],indexPatternMetricsFields:[],isValidatingIndexPattern:!1})}else Object(ve.a)().add(e,Ve.i18n.translate("xpack.rollupJobs.create.errors.indexPatternValidationFatalErrorTitle",{defaultMessage:"Rollup Job Wizard index pattern validation"}))}))}),300)),tt()(this,"goToNextStep",(()=>{this.goToStep(this.state.nextStepId)})),tt()(this,"goToPreviousStep",(()=>{this.goToStep(this.state.previousStepId)})),tt()(this,"onFieldsChange",((e,t=this.state.currentStepId)=>{const{stepsFields:s}=this.state,r=s[t],o=function(e,t){const{indexPattern:s}=e,r=Object(ge.cloneDeep)(t);return s&&(r[ps].dateHistogramField=void 0,r[bs].terms=[],r[js].histogram=[],r[gs].metrics=[]),r}(e,s),a={...r,...e},i={...o,[t]:a};this.setState({stepsFields:i,stepsFieldErrors:this.getStepsFieldsErrors(i)})})),tt()(this,"save",(()=>{const{createJob:e}=this.props;e(this.getAllFields())})),tt()(this,"onToggleStartAfterCreate",(e=>{this.setState({startJobAfterCreation:e.target.checked})})),e.kibana.services.setBreadcrumbs([le.o,le.b]);const{jobToClone:t}=e,s=Object(ge.mapValues)(hs,(e=>Object(ge.cloneDeep)(e.getDefaultFields(t))));this.state={jobToClone:t||null,checkpointStepId:ms[0],currentStepId:ms[0],nextStepId:ms[1],previousStepId:void 0,stepsFieldErrors:this.getStepsFieldsErrors(s),areStepErrorsVisible:!!t,stepsFields:s,isValidatingIndexPattern:!1,indexPatternAsyncErrors:void 0,indexPatternDateFields:[],indexPatternTermsFields:[],indexPatternHistogramFields:[],indexPatternMetricsFields:[],startJobAfterCreation:!1},this.lastIndexPatternValidationIdx=0}componentDidMount(){this._isMounted=!0;const{clearCloneJob:e,jobToClone:t}=this.props;t&&(e(),this.requestIndexPatternValidation(!1))}componentDidUpdate(e,t){const s=this.getIndexPattern();if(s!==this.getIndexPattern(t)){if(!s||!s.trim())return void this.setState({indexPatternAsyncErrors:void 0,indexPatternDateFields:[],isValidatingIndexPattern:!1});this.setState({isValidatingIndexPattern:!0}),this.requestIndexPatternValidation()}}componentWillUnmount(){this._isMounted=!1,this.props.clearCreateJobErrors()}getSteps(){const{currentStepId:e,checkpointStepId:t}=this.state,s=ms.indexOf(e),r=(e,t)=>e===t?"selected":e<t?"complete":"incomplete";return ms.map(((e,o)=>({title:Os[e],status:r(o,s),onClick:()=>this.goToStep(e),disabled:!this.canGoToStep(e)||ms.indexOf(e)>ms.indexOf(t),"data-test-subj":o===s?`createRollupStep${o+1}--active`:`createRollupStep${o+1}`})))}goToStep(e){if(!this.canGoToStep(e))return void this.setState({areStepErrorsVisible:!0});const t=ms.indexOf(e);this.setState({currentStepId:e,nextStepId:ms[t+1],previousStepId:ms[t-1],areStepErrorsVisible:!1,isSaving:!1}),ms.indexOf(e)>ms.indexOf(this.state.checkpointStepId)&&this.setState({checkpointStepId:e})}canGoToStep(e){const t=ms.indexOf(e);return ms.slice(0,t).every((e=>!this.hasStepErrors(e)))}hasStepErrors(e){const{indexPatternAsyncErrors:t,stepsFieldErrors:s}=this.state;if(e===ds&&Boolean(t))return!0;const r=s[e];return Object.values(r).some((e=>null!=e))}getStepsFieldsErrors(e){return Object.keys(e).reduce(((t,s)=>{const r=e[s],o=hs[s].fieldsValidator;return t[s]="function"==typeof o?o(r):{},t}),{})}getAllFields(){const{stepsFields:{[ds]:{id:e,indexPattern:t,rollupIndex:s,rollupCron:r,rollupDelay:o,rollupPageSize:a},[ps]:{dateHistogramInterval:i,dateHistogramTimeZone:n,dateHistogramField:l},[bs]:{terms:c},[js]:{histogram:u,histogramInterval:d},[gs]:{metrics:p},[xs]:{}},startJobAfterCreation:b}=this.state;return{id:e,indexPattern:t,rollupIndex:s,rollupCron:r,rollupPageSize:a,rollupDelay:o,dateHistogramInterval:i,dateHistogramTimeZone:n,dateHistogramField:l,terms:c,histogram:u,histogramInterval:d,metrics:p,startJobAfterCreation:b}}getIndexPattern(e=this.state){return e.stepsFields[ds].indexPattern}render(){const{isSaving:e,saveError:t}=this.props;let s,r;if(e&&(s=Object(y.jsx)(m.EuiOverlayMask,null,Object(y.jsx)(m.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}))),t){const{message:e,cause:s}=t;let a;s&&(a=1===s.length?Object(y.jsx)("p",null,s[0]):Object(y.jsx)("ul",null,s.map((e=>Object(y.jsx)("li",{key:e},e))))),r=Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(m.EuiSpacer,null),Object(y.jsx)(m.EuiCallOut,{title:e,icon:"cross",color:"danger"},a),Object(y.jsx)(m.EuiSpacer,null))}return Object(y.jsx)(m.EuiPageSection,{restrictWidth:!0},Object(y.jsx)(m.EuiPageHeader,{bottomBorder:!0,pageTitle:Object(y.jsx)(Ke.FormattedMessage,{id:"xpack.rollupJobs.createTitle",defaultMessage:"Create rollup job"})}),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(vt,{linksTestSubjPrefix:"createForm"}),Object(y.jsx)(m.EuiSpacer,{size:"l"}),Object(y.jsx)(m.EuiStepsHorizontal,{steps:this.getSteps()}),r,Object(y.jsx)(m.EuiSpacer,null),this.renderCurrentStep(),Object(y.jsx)(m.EuiSpacer,{size:"l"}),this.renderNavigation(),s)}renderCurrentStep(){const{currentStepId:e,stepsFields:t,stepsFieldErrors:s,areStepErrorsVisible:r,isValidatingIndexPattern:o,indexPatternDateFields:a,indexPatternAsyncErrors:i,indexPatternTermsFields:n,indexPatternHistogramFields:l,indexPatternMetricsFields:c}=this.state,u=t[e],d=s[e];switch(e){case ds:return Object(y.jsx)(step_logistics_StepLogistics,{fields:u,onFieldsChange:this.onFieldsChange,fieldErrors:d,hasErrors:fs(d),areStepErrorsVisible:r,isValidatingIndexPattern:o,indexPatternAsyncErrors:i,hasMatchingIndices:Boolean(a.length)});case ps:return Object(y.jsx)(step_date_histogram_StepDateHistogram,{indexPattern:this.getIndexPattern(),fields:u,onFieldsChange:this.onFieldsChange,fieldErrors:d,hasErrors:fs(d),areStepErrorsVisible:r,dateFields:a});case bs:return Object(y.jsx)(step_terms_StepTerms,{fields:u,onFieldsChange:this.onFieldsChange,termsFields:n});case js:return Object(y.jsx)(step_histogram_StepHistogram,{fields:u,onFieldsChange:this.onFieldsChange,fieldErrors:d,hasErrors:fs(d),areStepErrorsVisible:r,histogramFields:l});case gs:return Object(y.jsx)(step_metrics_StepMetrics,{fields:u,onFieldsChange:this.onFieldsChange,fieldErrors:d,areStepErrorsVisible:r,metricsFields:c});case xs:return Object(y.jsx)(step_review_StepReview,{job:this.getAllFields()});default:return null}}renderNavigation(){const{isValidatingIndexPattern:e,nextStepId:t,previousStepId:s,areStepErrorsVisible:r,startJobAfterCreation:o}=this.state,{isSaving:a}=this.props,i=null!=t,n=!e&&i&&(!r||this.canGoToStep(t));return Object(y.jsx)(Pt,{isSaving:a,hasNextStep:i,hasPreviousStep:null!=s,goToNextStep:this.goToNextStep,goToPreviousStep:this.goToPreviousStep,canGoToNextStep:n,save:this.save,onClickToggleStart:this.onToggleStartAfterCreate,startJobAfterCreation:o})}}const ys=Object(l.withKibana)(job_create_JobCreateUi),Ss=Object(i.connect)((e=>({isSaving:we(e),saveError:_e(e),jobToClone:Re(e)})),(e=>({createJob:t=>{e((e=>async t=>{let s;t({type:N});try{[s]=await Promise.all([Object(le.c)(Object(le.s)(e)),new Promise((e=>setTimeout(e,500)))])}catch(s){if(s){const{body:r}=s,o=s.statusCode||r&&r.statusCode;if(r)return t(409===o?{type:W,payload:{error:{message:Ve.i18n.translate("xpack.rollupJobs.createAction.jobIdAlreadyExistsErrorMessage",{defaultMessage:"A job with ID ''{jobConfigId}'' already exists.",values:{jobConfigId:e.id}})}}}:{type:W,payload:{error:{message:Ve.i18n.translate("xpack.rollupJobs.createAction.failedDefaultErrorMessage",{defaultMessage:"Request failed with a {statusCode} error. {message}",values:{statusCode:o,message:r.message}}),cause:r.cause}}})}return Object(ve.a)().add(s,Ve.i18n.translate("xpack.rollupJobs.createAction.errorTitle",{defaultMessage:"Error creating rollup job"}))}const r=Object(le.f)(s);t({type:X,payload:{job:r}}),e.startJobAfterCreation&&t(qe([e.id])),Object(le.k)().history.push({pathname:"/job_list",search:`?job=${encodeURIComponent(e.id)}`})})(t))},clearCreateJobErrors:()=>{e((e=>{e({type:U})}))},clearCloneJob:()=>{e((e=>{e({type:z})}))}})))(ys);class app_ShareRouterComponent extends r.Component{constructor(...e){super(...e),this.registerRouter()}registerRouter(){const{history:e}=this.props;Object(le.q)({history:e})}render(){return this.props.children}}const Ms=Object(pe.withRouter)(app_ShareRouterComponent);class app_App extends r.Component{componentDidMount(){Object(ve.f)(le.a.LOADED,Me.a)}componentWillUnmount(){Object(le.u)(!0)}render(){return Object(y.jsx)(je,{history:this.props.history},Object(y.jsx)(Ms,null,Object(y.jsx)(Se,null,Object(y.jsx)(pe.Redirect,{exact:!0,from:"/",to:"/job_list"}),Object(y.jsx)(Oe,{exact:!0,path:"/job_list",component:It}),Object(y.jsx)(Oe,{exact:!0,path:"/create",component:Ss}))))}}s(44);const vs=({history:e,executionContext:t})=>(Object(l.useExecutionContext)(t,{type:"application",page:"rollup"}),Object(y.jsx)(app_App,{history:e})),Es=async(e,{history:t,element:s,setBreadcrumbs:r})=>{const[o]=await e.getStartServices(),n={history:t,setBreadcrumbs:r};return Object(a.render)(Object(y.jsx)(k,o,Object(y.jsx)(l.KibanaContextProvider,{services:n},Object(y.jsx)(i.Provider,{store:de},Object(y.jsx)(vs,{executionContext:e.executionContext,history:t})))),s),()=>{Object(a.unmountComponentAtNode)(s)}}}])]);