(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[15],{179:function(e,t,r){"use strict";r.r(t),r.d(t,"convertToLens",(function(){return g}));var o=r(11),n=r(34),c=r(35),l=r(5),i=r(0),s=r(75),a=r(65),u=r(91),d=r(57),p=r(63),f=r(80);const m=()=>new Error("Invalid model"),g=async({params:e},t)=>{const r=Object(i.d)();try{var g;const i=e.series[0];if(i.offset_time&&"invalid"===Object(n.parseTimeShift)(i.offset_time))throw m();if(!Object(d.i)(i.metrics,l.e.GAUGE,i.time_range_mode))throw m();if(i.metrics[i.metrics.length-1].type===l.i.STATIC)throw m();const v=Object(d.g)(e,i,t),b=await Object(s.a)(e.index_pattern,e.time_field,Boolean(i.override_index_pattern),i.series_index_pattern,i.series_time_field,r);if(!b)throw m();const{indexPatternId:h,indexPattern:y}=b,j=Object(a.b)(i,y,e.series.length,{reducedTimeRange:v});if(null===j)throw m();const O=Object(a.a)(e,i,j,y,!1);if(null===O)throw m();const[x]=O,_={indexPatternId:h,ignoreGlobalFilters:Boolean(e.ignore_global_filter||i.ignore_global_filter),layerId:Object(o.v4)(),columns:[...j,...x?[x]:[]],columnOrder:[]},w=e.series[0],I=Object(f.c)(w);if(!I||!I.metric)throw m();const T=Object(f.b)(I.metric,_.columns);if(!T)throw m();let A=Object(p.r)(((e,t)=>{var r;const o="overall_max";return t&&"formula"===t.operationType?`${o}(${t.params.formula})`:`${o}(${Object(d.e)(d.a[e.type])}(${null!==(r=e.field)&&void 0!==r?r:""}))`})(I.metric,T));void 0!==e.gauge_max&&""!==e.gauge_max&&(A=Object(p.s)(e.gauge_max));const M={..._,columns:[..._.columns,A]},B=Object(u.a)(e,M,x,null!==(g=A)&&void 0!==g?g:void 0);if(!B)throw m();const S=Object.values(Object(f.a)({0:M}));return{type:"lnsMetric",layers:S,configuration:B,indexPatternIds:Object(c.getIndexPatternIds)(S)}}catch(e){return null}}},79:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var o=r(54),n=r.n(o),c=r(10);const l="lte",i=e=>{var t;return(e=>{var t;const r=e;return!!(null!==(t=r.background_color)&&void 0!==t?t:r.color)})(e)?null!==(t=e.background_color)&&void 0!==t?t:e.color:(e=>Boolean(e.gauge))(e)?e.gauge:e.text},s=e=>({name:"custom",params:{continuity:"all",maxSteps:5,name:"custom",progression:"fixed",rangeMax:1/0,rangeMin:-1/0,rangeType:"number",reverse:!1,...e},type:"palette"}),a=(e,t)=>{const r=e.filter((e=>(e=>{var t,r;const{background_color:o,color:n}=e,{gauge:c}=e,{text:l}=e;return Boolean(e.operator&&(null!==(t=null!==(r=null!=o?o:n)&&void 0!==r?r:c)&&void 0!==t?t:l)&&void 0!==e.value)})(e)));if(r.sort(((e,t)=>e.value-t.value)),!Object(c.uniqBy)(r,"operator").length)return;if(1===r.length)return r[0].operator===l?s((e=>{const t={color:n()(i(e)).hex(),stop:e.value};return{rangeMin:-1/0,rangeMax:e.value,colorStops:[t],stops:[t],steps:1,continuity:"below"}})(r[0])):"gte"===r[0].operator?s(((e,t)=>{const r={color:n()(i(e)).hex(),stop:e.value};return{colorStops:[...t?[{color:t,stop:-1/0}]:[],r],continuity:t?"all":"above",rangeMax:1/0,rangeMin:t?-1/0:r.stop,steps:2,stops:[...t?[{color:t,stop:r.stop}]:[],{color:r.color,stop:1/0}]}})(r[0],t)):void 0;const o=r.slice(0,-1),a=r[r.length-1],u=Object(c.uniqBy)(o,"operator");if(u.length>1||u[0].operator!==a.operator&&a.operator!==l)return;const[d]=u;if(d.operator!==l){if("lt"===d.operator){if(a.operator!==l)return;return s((e=>{const t=e[e.length-1],r=e.reduce(((e,t,r,o)=>{if(0===r)return[{color:n()(i(t)).hex(),stop:-1/0}];const c=i(t);return[...e,{color:n()(c).hex(),stop:o[r-1].value}]}),[]),o=r.reduce(((e,r,o,n)=>o===n.length-1?[...e,{color:r.color,stop:t.value}]:[...e,{color:r.color,stop:n[o+1].stop}]),[]);return{rangeMin:-1/0,rangeMax:t.value,colorStops:r,stops:o,steps:r.length+1,continuity:"below"}})(r))}return"gte"===d.operator?s(((e,t,r)=>{const o=e[e.length-1],c=i(o),s=r?[{stop:-1/0,color:r}]:[],a=e.reduce(((e,r,o,s)=>{const a=i(r);return o===s.length-1&&t===l?e:o===s.length-2&&t===l?[...e,{color:n()(c).hex(),stop:r.value}]:[...e,{color:n()(a).hex(),stop:r.value}]}),s),u=a.reduce(((e,r,n,c)=>n===c.length-1?[...e,{color:r.color,stop:t===l?o.value:r.stop+1}]:[...e,{color:r.color,stop:c[n+1].stop}]),[]),[d]=e;return{rangeMin:r?-1/0:d.value,rangeMax:t===l?o.value:1/0,colorStops:a,stops:u,steps:a.length,continuity:t===l?r?"below":"none":r?"all":"above"}})(r,a.operator,t)):void 0}}},80:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return p})),r.d(t,"b",(function(){return f}));var o=r(10),n=r(92),c=r.n(n),l=r(35),i=r(63),s=r(65);const a=e=>{const t={};return Object.entries(e).forEach((([e,r])=>{const o=r.columns.map(i.t);t[e]={...r,columns:o}})),t},u=e=>{const{columnId:t,...r}=e;if(e.operationType===l.Operations.TERMS){const{orderBy:t,orderAgg:o,...n}=e.params;let c=t;if("columnId"in t){const{columnId:e,...r}=t;c=r}let l=o;if(o){const{columnId:e,...t}=o;l=t}return{...r,params:{...n,orderBy:c,orderAgg:l}}}return r},d=e=>Object(o.uniqWith)(e,((e,t)=>{if(e.operationType!==t.operationType)return!1;const r=u(e),o=u(t);return c()(r,o)})),p=e=>{if(!e)return;const{metrics:t,seriesAgg:r}=Object(s.c)(e.metrics);return{metric:t[t.length-1],collapseFn:r}},f=(e,t)=>{if(e)return t.find((t=>"meta"in t&&t.meta.metricId===e.id))}},91:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return s}));var o=r(54),n=r.n(o),c=r(79),l=r(80);const i=(e,t,r)=>{var o,n;const[i,s]=e.series.filter((({hidden:e})=>!e)),a=Object(l.c)(i);if(!a||!a.metric)return null;const u=Object(l.c)(s),d=Object(l.b)(a.metric,t.columns),p=Object(l.b)(null==u?void 0:u.metric,t.columns);if(a.collapseFn&&null!=u&&u.collapseFn)return null;const f=Object(c.a)(null!==(o=e.background_color_rules)&&void 0!==o?o:[]);return null===f?null:{layerId:t.layerId,layerType:"data",metricAccessor:null==d?void 0:d.columnId,secondaryMetricAccessor:null==p?void 0:p.columnId,breakdownByAccessor:null==r?void 0:r.columnId,palette:f,collapseFn:null!==(n=a.collapseFn)&&void 0!==n?n:null==u?void 0:u.collapseFn}},s=(e,t,r,o)=>{var i;const s=e.series[0],a=Object(l.c)(s);if(!a||!a.metric)return null;const u=Object(l.b)(a.metric,t.columns),d=s.color?n()(s.color).hex():void 0,p=Object(c.a)(null!==(i=e.gauge_color_rules)&&void 0!==i?i:[],d);return null===p?null:{layerId:t.layerId,layerType:"data",metricAccessor:null==u?void 0:u.columnId,breakdownByAccessor:null==r?void 0:r.columnId,maxAccessor:null==o?void 0:o.columnId,showBar:Boolean(o),palette:p,collapseFn:a.collapseFn,...p?{}:{color:d}}}},92:function(e,t,r){"use strict";var o=Array.isArray,n=Object.keys,c=Object.prototype.hasOwnProperty,l="undefined"!=typeof Element;function i(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,s,a,u=o(e),d=o(t);if(u&&d){if((s=e.length)!=t.length)return!1;for(r=s;0!=r--;)if(!i(e[r],t[r]))return!1;return!0}if(u!=d)return!1;var p=e instanceof Date,f=t instanceof Date;if(p!=f)return!1;if(p&&f)return e.getTime()==t.getTime();var m=e instanceof RegExp,g=t instanceof RegExp;if(m!=g)return!1;if(m&&g)return e.toString()==t.toString();var v=n(e);if((s=v.length)!==n(t).length)return!1;for(r=s;0!=r--;)if(!c.call(t,v[r]))return!1;if(l&&e instanceof Element&&t instanceof Element)return e===t;for(r=s;0!=r--;)if(!("_owner"===(a=v[r])&&e.$$typeof||i(e[a],t[a])))return!1;return!0}return e!=e&&t!=t}e.exports=function(e,t){try{return i(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}}}}]);