(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[12],{176:function(e,t,n){"use strict";n.r(t),n.d(t,"convertToLens",(function(){return g}));var i=n(34),r=n(35),o=n(11),s=n(5),a=n(0),l=n(75),c=n(65),u=n(99),d=n(63),f=n(57);const p=()=>new Error("Invalid model"),g=async({params:e})=>{const t=Object(a.d)();try{const n={},a=e.series.filter((e=>!e.hidden)).length;for(const[r,u]of e.series.entries()){if(u.hidden)continue;if(u.offset_time&&"invalid"===Object(i.parseTimeShift)(u.offset_time))throw p();if(!Object(f.i)(u.metrics,s.e.TIMESERIES))throw p();const g=await Object(l.a)(e.index_pattern,e.time_field,Boolean(u.override_index_pattern),u.series_index_pattern,u.series_time_field,t);if(!g)throw p();const{indexPatternId:_,indexPattern:m,timeField:b}=g;if(!b)throw p();const y=Object(d.i)(e,u,m,{fieldName:b,isSplit:!1});if(null===y)throw p();const h=Object(c.b)(u,m,a,{isStaticValueColumnSupported:!0});if(null===h)throw p();const x=Object(c.a)(e,u,h,m,!0);if(null===x)throw p();const v=1===h.length&&"static_value"===h[0].operationType;if(v&&x.length)throw p();const C=Object(o.v4)();n[r]={ignoreGlobalFilters:Boolean(e.ignore_global_filter||u.ignore_global_filter),indexPatternId:_,layerId:C,columns:v?[...h]:[...h,y,...x],columnOrder:[]}}const g=await Object(u.c)(n,e,t);if(null===g)throw p();const _=Object(u.a)(e,g),m=Object.values((e=>{const t={};return Object.entries(e).forEach((([e,n])=>{const i=n.columns.map(d.t);t[e]={...n,columns:i}})),t})(n)),b=_.layers.reduce(((e,t)=>Object(r.isAnnotationsLayer)(t)?[...e,t.indexPatternId]:e),[]);return{type:"lnsXY",layers:m,configuration:_,indexPatternIds:[...Object(r.getIndexPatternIds)(m),...b]}}catch(e){return null}}},53:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(33),r=n(0);function o(){return Object(r.f)().get(i.UI_SETTINGS.SEARCH_QUERY_LANGUAGE)}},56:function(e,t,n){"use strict";var i=n(58);n.d(t,"a",(function(){return i.b})),n.d(t,"c",(function(){return i.c})),n.d(t,"d",(function(){return i.d})),n.d(t,"e",(function(){return i.e})),n.d(t,"f",(function(){return i.f})),n.d(t,"g",(function(){return i.g}));var r=n(60);n.d(t,"b",(function(){return r.a}))},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return c}));const i={LINE_COLOR:"rgba(105,112,125,0.2)",TEXT_COLOR:"rgba(0,0,0,0.4)",TEXT_COLOR_REVERSED:"rgba(255,255,255,0.5)",VALUE_COLOR:"rgba(0,0,0,0.7)",VALUE_COLOR_REVERSED:"rgba(255,255,255,0.8)"},r={stroke:"rgba(125,125,125,0.1)"},o=0,s=[0],a=[1],l=[2],c={NONE:"none",PERCENT:"percent",STACKED:"stacked",STACKED_WITHIN_SERIES:"stacked_within_series"}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n(3);var i=n(1);const r="fa-asterisk",o="fa-bell",s="fa-bolt",a="fa-bomb",l="fa-bug",c="fa-comment",u="fa-exclamation-triangle",d="fa-fire",f="fa-flag",p="fa-heart",g="fa-map-marker",_="fa-map-pin",m="fa-star",b="fa-tag",y={[r]:"asterisk",[o]:"bell",[s]:"bolt",[a]:()=>Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(i.jsx)("path",{d:"M3.92176768,4.53361616 L3.46466635,5.59664282 L2.65302767,4.14840719 L0.999875397,3.99598886 L2.12641918,2.77654518 L1.76052549,1.15720408 L3.26840652,1.85178207 L4.69542405,1.00339256 L4.500802,2.65210905 L5.74864103,3.7471166 L4.73514583,3.9490388 L5.61669633,5.03766301 C6.0459022,4.69009896 6.67559863,4.75628272 7.02316269,5.18548858 L7.15815921,5.3521954 C7.8837785,5.06498672 8.68754455,4.943927 9.51742529,5.03115098 C12.2637217,5.31979836 14.2560398,7.78010639 13.9673924,10.5264028 C13.6787451,13.2726992 11.218437,15.2650173 8.47214065,14.9763699 C5.72584427,14.6877226 3.73352611,12.2274145 4.02217349,9.48111814 C4.10939747,8.6512374 4.39492411,7.8902053 4.82672133,7.24015658 L4.6917248,7.07344975 C4.34416075,6.64424389 4.41034451,6.01454746 4.83955037,5.6669834 L3.92176768,4.53361616 Z M5.46887076,6.44412936 L6.12580983,7.24015658 C6.03489722,7.30663504 5.87952666,7.491071 5.65969815,7.79346445 C5.30650784,8.32517447 5.08508565,8.93495668 5.01669539,9.5856466 C4.78577748,11.7826837 6.37963201,13.7509301 8.57666912,13.981848 C10.7737062,14.2127659 12.7419526,12.6189114 12.9728706,10.4218743 C13.2037885,8.2248372 11.6099339,6.25659078 9.41289682,6.02567287 C8.7622069,5.95728261 8.11971364,6.04708534 7.52619036,6.28200886 C7.24048061,6.40187373 7.0242157,6.5121707 6.87739563,6.61289978 L6.24601673,5.81480897 L5.46887076,6.44412936 Z M3.34009664,3.61834468 C3.6160708,3.60870745 3.83197954,3.37717367 3.82234231,3.10119951 C3.81270508,2.82522536 3.5811713,2.60931662 3.30519715,2.61895385 C3.02922299,2.62859108 2.81331425,2.86012485 2.82295148,3.13609901 C2.83258871,3.41207317 3.06412249,3.62798191 3.34009664,3.61834468 Z M9.2038399,8.01471666 C8.92921026,7.98585193 8.72997844,7.73982112 8.75884318,7.46519148 C8.78770792,7.19056185 9.03373872,6.99133003 9.30836836,7.02019477 C10.7411945,7.17079087 11.8319627,8.30660625 11.9782919,9.68376241 C11.9842403,9.72621687 11.9855849,9.77015886 11.9808868,9.81485847 C11.9520221,10.0894881 11.7059913,10.2887199 11.4313616,10.2598552 C11.1835304,10.2338071 10.9971003,10.0309074 10.9842889,9.78973323 C10.8859009,8.87197536 10.1588372,8.11509093 9.2038399,8.01471666 Z"})),[l]:"bug",[c]:"editorComment",[u]:"warning",[d]:()=>Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(i.jsx)("path",{d:"M10.4285489,13.2131862 C11.3850613,12.5116211 12,11.4062861 12,10.1681623 C12,8.88948911 11.7647926,7.64522527 11.315853,6.48027409 L10.7184365,8.07936372 L9.62838732,6.51595716 C8.65161637,5.11502026 7.41222171,3.90368767 5.9820674,2.94508952 C5.99399825,3.12925457 6,3.31436795 6,3.50022638 C6,5.08794888 5.48443413,6.95085436 4.74437685,7.94154468 C4.26219055,8.5870316 4,9.35779518 4,10.1681623 C4,11.4427639 4.65170744,12.5766371 5.65687647,13.2741368 C5.73557697,13.041105 5.84196228,12.8229717 5.97161458,12.624616 C6.26836682,12.1706132 6.5,11.2280234 6.5,10.4287008 C6.5,9.92871906 6.42479348,9.44813694 6.28619258,9 C7.47628141,9.64169048 8.4897566,10.6210605 9.22434324,11.8251557 C9.23213615,11.8013168 9.2406884,11.7775998 9.25,11.7540048 C9.39656041,11.3826304 9.5,11.0805724 9.5,10.6495848 C9.5,10.6240812 9.49971537,10.5986511 9.49914944,10.5732981 C9.96875289,11.3529062 10.2928315,12.2486386 10.4285489,13.2131862 Z M10.4486865,5.94402249 C10.4642723,5.90230435 10.4813768,5.86079967 10.5,5.81950846 C10.7931208,5.16960326 11,4.64100165 11,3.88677339 C11,3.84214218 10.9994307,3.79763944 10.9982989,3.7532716 C12.2630338,5.59045545 13,7.7961396 13,10.1681623 C13,12.8367126 10.7614237,15 8,15 C5.23857625,15 3,12.8367126 3,10.1681623 C3,9.11340491 3.34972471,8.13758287 3.94322917,7.34307798 C4.53673363,6.54857309 5,4.8990409 5,3.50022638 C5,2.62525836 4.84958695,1.78423964 4.57238517,1 C6.95256283,2.12295834 8.97951321,3.83685594 10.4486865,5.94402249 Z"})),[f]:"flag",[p]:"heart",[g]:"mapMarker",[_]:"pinFilled",[m]:"starFilled",[b]:"tag"}},99:function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return T}));var i=n(35),r=n(11),o=n(6),s=n(54),a=n.n(s),l=n(45),c=n(10),u=n(53),d=n(56),f=n(57),p=n(65),g=n(63),_=n(5),m=n(75);function b(e,t){return e.separate_axis?e.axis_position:t.axis_position}function y(e,t,n,i){if(Object(g.u)(e)&&!i){var r,o;const[n,i]=e.meta.reference.split(".");return null===(r=t.percentiles)||void 0===r||null===(o=r[parseInt(i,10)])||void 0===o?void 0:o.color}if(Object(g.v)(e)&&!i){var s;const[n,i]=e.meta.reference.split(".");return null===(s=t.colors)||void 0===s?void 0:s[parseInt(i,10)]}return n}function h(e){return null!=e}const x=async(e,t,n,o=!1)=>{const s=Object.keys(e).map((n=>{var r;const s=t.series[parseInt(n,10)],{metrics:a,seriesAgg:l}=Object(p.c)(s.metrics),c=e[parseInt(n,10)],u=c.columns.find((e=>(e=>Boolean(e.references))(e))),d=null==u?void 0:u.references[0],g=c.columns.filter((e=>!e.isBucketed&&e.columnId!==d)),m=1===g.length&&"static_value"===g[0].operationType,h=null===(r=c.columns.find((e=>e.isBucketed&&e.isSplit)))||void 0===r?void 0:r.columnId,x=((e,t)=>{let n=i.SeriesTypes.LINE;switch(e.chart_type){case i.SeriesTypes.LINE:n=Number(e.fill)>0?i.SeriesTypes.AREA:i.SeriesTypes.LINE;break;case i.SeriesTypes.AREA:n=i.SeriesTypes.AREA;break;case i.SeriesTypes.BAR:n=i.SeriesTypes.BAR}return t===_.e.TOP_N?i.SeriesTypes.BAR_HORIZONTAL:"none"!==e.stacked&&"percent"!==e.stacked?n!==i.SeriesTypes.LINE?`${n}_stacked`:i.SeriesTypes.LINE:"percent"===e.stacked?n!==i.SeriesTypes.LINE?`${n}_percentage_stacked`:i.SeriesTypes.LINE:n})(s,t.type),v={layerId:c.layerId,accessors:g.map((e=>e.columnId)),yConfig:g.map((e=>{const n=a.find((t=>{var n;return(null===(n=f.a[t.type])||void 0===n?void 0:n.name)===e.operationType}));return{forAccessor:e.columnId,color:y(e,n,s.color,h),axisMode:m?t.series.some((e=>e.id!==s.id&&"right"===b(e,t)))?"right":"left":o?"left":b(s,t),...m&&{fill:x.includes("area")?i.FillTypes.BELOW:i.FillTypes.NONE,lineWidth:s.line_width}}}))};return m?{layerType:"referenceLine",...v}:{seriesType:x,layerType:"data",...v,xAccessor:null===(C=c.columns.find((e=>e.isBucketed&&!e.isSplit)))||void 0===C?void 0:C.columnId,splitAccessor:h,collapseFn:l,palette:(w=s.palette,w&&"gradient"!==w.name&&"rainbow"!==w.name?w:{name:"default",type:"palette"})};var C,w}));if(!t.annotations||!t.annotations.length)return s;const a=Object(c.groupBy)(t.annotations,(e=>{var t;return`${"object"==typeof e.index_pattern&&"id"in e.index_pattern?e.index_pattern.id:e.index_pattern}-${null!==(t=e.time_field)&&void 0!==t?t:""}-${Boolean(e.ignore_global_filters)}`}));try{const e=await Promise.all(Object.values(a).map((async e=>{const[t]=e,i=[],o=await Object(m.a)(t.index_pattern,t.time_field,!1,void 0,void 0,n);if(!o)throw new Error("Invalid annotation datasource");const{indexPattern:s}=o;if(s)return e.forEach((e=>{const t=v(e,s);t&&i.push(t)})),{layerId:Object(r.v4)(),layerType:"annotations",ignoreGlobalFilters:Boolean(t.ignore_global_filters),annotations:i,indexPatternId:s.id}})));return s.concat(...e.filter(h))}catch(e){return null}},v=(e,t)=>{var n,i,r;const s=null===(n=e.fields)||void 0===n?void 0:n.replace(/\s/g,"").split(",").map((e=>{const n=t.getFieldByName(e);return n&&n.aggregatable?e:void 0})).filter(h);return{type:"query",id:e.id,label:"Event",key:{type:"point_in_time"},color:new a.a(Object(o.transparentize)(e.color||l.euiLightVars.euiColorAccent,1)).hex(),timeField:e.time_field||t.timeFieldName,icon:e.icon&&d.b[e.icon]&&"string"==typeof d.b[e.icon]?d.b[e.icon]:"triangle",filter:{type:"kibana_query",query:(null===(i=e.query_string)||void 0===i?void 0:i.query)||"*",language:(null===(r=e.query_string)||void 0===r?void 0:r.language)||Object(u.a)()},extraFields:s,isHidden:e.hidden}},C=(e,t,n)=>(t?Number(e.axis_min)<t&&(t=Number(e.axis_min)):t=Number(e.axis_min),n?Number(e.axis_max)>n&&(n=Number(e.axis_max)):n=Number(e.axis_max),{lowerBound:t,upperBound:n}),w=(e,t,n)=>{return i=e,r=t,n&&i&&i>0||r&&r<0?0:e;var i,r};var L=n(36),E=n(9);const O=(e,t)=>{var n,i,r;const o=(e=>{let t=null,n=null,i=null,r=null,o=!1,s=!1,a=!1,l=!1;e.series.forEach((e=>{if("left"===e.axis_position&&(("line"!==e.chart_type||"line"===e.chart_type&&Number(e.fill)>0)&&(a=!0),e.separate_axis)){o=!0;const{lowerBound:i,upperBound:r}=C(e,t,n);t=i,n=r}if("right"===e.axis_position&&e.separate_axis&&(("line"!==e.chart_type||"line"===e.chart_type&&Number(e.fill)>0)&&(l=!0),e.separate_axis)){s=!0;const{lowerBound:t,upperBound:n}=C(e,i,r);i=t,r=n}}));const c=o?w(t,n,a):"left"===e.axis_position?w(Number(e.axis_min),Number(e.axis_max),a):null,u=o?n:"left"===e.axis_position?e.axis_max:null,d=s?w(i,r,l):"right"===e.axis_position?e.axis_min:null,f=s?r:"right"===e.axis_position?w(Number(e.axis_min),Number(e.axis_max),l):null;return{yLeftExtent:{...c&&{lowerBound:Number(c)},...u&&{upperBound:Number(u)},mode:c||u?"custom":"full"},yRightExtent:{...d&&{lowerBound:Number(f)},...f&&{upperBound:Number(f)},mode:d||f?"custom":"full"}}})(e);return{layers:t,curveType:1===e.series[0].steps?E.XYCurveTypes.CURVE_STEP_AFTER:void 0,fillOpacity:null!==(n=Number(e.series[0].fill))&&void 0!==n?n:.3,legend:{isVisible:Boolean(e.show_legend),showSingleSeries:Boolean(e.show_legend),position:null!==(i=e.legend_position)&&void 0!==i?i:L.Position.Right,shouldTruncate:Boolean(e.truncate_legend),maxLines:null!==(r=e.max_lines_legend)&&void 0!==r?r:1},gridlinesVisibilitySettings:{x:Boolean(e.show_grid),yLeft:Boolean(e.show_grid),yRight:Boolean(e.show_grid)},yLeftExtent:o.yLeftExtent,yRightExtent:o.yRightExtent,yLeftScale:"log"===e.axis_scale?"log":"linear",yRightScale:"log"===e.axis_scale?"log":"linear"}},T=(e,t)=>{var n,i,r;return{layers:t,fillOpacity:null!==(n=Number(e.series[0].fill))&&void 0!==n?n:.3,legend:{isVisible:Boolean(e.show_legend),showSingleSeries:Boolean(e.show_legend),position:null!==(i=e.legend_position)&&void 0!==i?i:L.Position.Right,shouldTruncate:Boolean(e.truncate_legend),maxLines:null!==(r=e.max_lines_legend)&&void 0!==r?r:1},gridlinesVisibilitySettings:{x:!1,yLeft:!1,yRight:!1},tickLabelsVisibilitySettings:{x:!0,yLeft:!1,yRight:!1},axisTitlesVisibilitySettings:{x:!1,yLeft:!1,yRight:!1},valueLabels:"show"}}}}]);