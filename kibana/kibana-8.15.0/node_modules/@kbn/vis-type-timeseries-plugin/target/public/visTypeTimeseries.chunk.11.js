(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[11],{186:function(e,t,r){switch(window.__kbnThemeTag__){case"v8dark":return r(187);case"v8light":return r(189)}},187:function(e,t,r){var o=r(51),i=r(188);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);o(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},188:function(e,t,r){(t=r(52)(!1)).push([e.i,".tvbVisTopN{display:flex;flex-direction:column;overflow:auto;position:relative}.tvbVisTopN tr:hover td{background-color:#ffffff1a}.tvbVisTopN__value{color:#ffffffb3;line-height:0;padding:4px 4px 0;text-align:right;vertical-align:middle;white-space:nowrap}.tvbVisTopN__label{color:#fff9;overflow:hidden;padding:4px 0;text-overflow:ellipsis;white-space:nowrap}.tvbVisTopN__bar{padding:4px 12px;vertical-align:middle}.tvbVisTopN__innerBar{position:relative}.tvbVisTopN__innerBar>div{min-height:16px;width:100%}.tvbVisTopN--reversed tr:hover td{background-color:#1d1e241a}.tvbVisTopN--reversed .tvbVisTopN__label{color:#1d1e2499}.tvbVisTopN--reversed .tvbVisTopN__value{color:#1d1e24cc}",""]),e.exports=t},189:function(e,t,r){var o=r(51),i=r(190);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);o(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},190:function(e,t,r){(t=r(52)(!1)).push([e.i,".tvbVisTopN{display:flex;flex-direction:column;overflow:auto;position:relative}.tvbVisTopN tr:hover td{background-color:#0000001a}.tvbVisTopN__value{color:#000000b3;line-height:0;padding:4px 4px 0;text-align:right;vertical-align:middle;white-space:nowrap}.tvbVisTopN__label{color:#0009;overflow:hidden;padding:4px 0;text-overflow:ellipsis;white-space:nowrap}.tvbVisTopN__bar{padding:4px 12px;vertical-align:middle}.tvbVisTopN__innerBar{position:relative}.tvbVisTopN__innerBar>div{min-height:16px;width:100%}.tvbVisTopN--reversed tr:hover td{background-color:#ffffff1a}.tvbVisTopN--reversed .tvbVisTopN__label{color:#fff9}.tvbVisTopN--reversed .tvbVisTopN__value{color:#fffc}",""]),e.exports=t},224:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return w}));var o=r(18),i=r.n(o),n=r(0),s=r(70),a=r(66),l=r(71),c=r(17),d=r.n(c),p=r(3),u=r.n(p),b=r(62),v=r(59),f=r(73),h=(r(186),r(1));const _="negative",m="mixed";class top_n_TopN extends p.Component{constructor(e){super(e),this.tableRef=u.a.createRef(),this.state={labelMaxWidth:150}}get labelMaxWidth(){return.35*this.tableRef.current.offsetWidth}componentDidMount(){this.setState({labelMaxWidth:this.labelMaxWidth})}componentDidUpdate(e,t){t.labelMaxWidth!==this.labelMaxWidth&&this.setState({labelMaxWidth:this.labelMaxWidth})}handleClick(e){return()=>{this.props.onClick&&this.props.onClick(e)}}renderRow({min:e,max:t}){return r=>{const o=top_n_TopN.getRenderMode(e,t),i=`${r.id||r.label}`,n=Object(b.b)(r.data),s=Object(b.c)(n)?0:n,a=r.tickFormatter||this.props.tickFormatter,l=s>=0,c=top_n_TopN.calcDomain(o,e,t),d=Math.abs(s)/c*100||0,p=Object(b.c)(n)?"1px":`${d}%`,u=r.label;return Object(h.jsx)("tr",{key:i,onClick:this.handleClick({lastValue:n,...r}),style:"function"==typeof this.props.onClick?{cursor:"pointer"}:{}},Object(h.jsx)("td",{title:r.label,className:"tvbVisTopN__label",style:{maxWidth:`${this.state.labelMaxWidth}px`}},Object(v.b)(u)),Object(h.jsx)("td",{width:"100%",className:"tvbVisTopN__bar"},Object(h.jsx)("div",{className:"tvbVisTopN__innerBar",style:top_n_TopN.calcInnerBarStyles(o,l)},Object(h.jsx)("div",{style:top_n_TopN.calcInnerBarDivStyles(r,p,l),"data-test-subj":"topNInnerBar"}))),Object(h.jsx)("td",{className:"tvbVisTopN__value","data-test-subj":"tsvbTopNValue"},Object(h.jsx)("span",{dangerouslySetInnerHTML:{__html:a(n)}})))}}render(){if(!this.props.series)return null;const e=this.props.series.reduce(((e,t,r)=>{var o;const i=null!==(o=Object(b.b)(t.data))&&void 0!==o?o:0;return{min:!r||i<e.min?i:e.min,max:!r||i>e.max?i:e.max}}),{min:void 0,max:void 0}),t=this.props.series.map(this.renderRow(e));let r="tvbVisTopN";return this.props.reversed&&(r+=" tvbVisTopN--reversed"),Object(h.jsx)(f.a,{initialRender:this.props.initialRender},Object(h.jsx)("div",{className:r},Object(h.jsx)("table",{className:"tvbVisTopN__table","data-test-subj":"tvbVisTopNTable",ref:this.tableRef},Object(h.jsx)("tbody",null,t))))}}d()(top_n_TopN,"getRenderMode",((e,t)=>e>=0?"positive":t<0?_:m)),d()(top_n_TopN,"calcInnerBarStyles",((e,t)=>e===m?{[t?"marginLeft":"marginRight"]:"50%"}:{})),d()(top_n_TopN,"calcInnerBarDivStyles",((e,t,r)=>({backgroundColor:e.color,width:t,float:r?"left":"right"}))),d()(top_n_TopN,"calcDomain",((e,t,r)=>e===m?Math.max(r,Math.abs(t)):e===_?Math.abs(t):r)),top_n_TopN.defaultProps={tickFormatter:e=>e,direction:"desc"};var j=r(74),x=r(72),g=r(10),T=r(5),N=r(69),O=r(98),y=r(7);function w(e){const[t,r]=Object(p.useState)(null),o=Object(n.b)(),{backgroundColor:c,model:d,visData:u,fieldFormatMap:v,getConfig:f}=e,_=function(e,t){const r=Object(g.get)(e,`${t.id}.series`,[]);return t.series.reduce(((e,t)=>{const o=r.filter((e=>Object(g.first)(e.id.split(y.c))===t.id)),i=t.terms_direction||"desc";return"_key"===t.terms_order_by?e.concat(o):e.concat(function(e,t,r){return"desc"===t?Object(g.sortBy)(e,r).reverse():Object(g.sortBy)(e,r)}(o,i,(e=>Object(b.b)(e.data))))}),[])}(u,d).map((e=>{const t=Object(g.first)(e.id.split(y.c)),r=d.series.find((e=>e.id===t));if(r){const t=r.formatter===T.b.DEFAULT?Object(l.a)(Object(s.a)(r.metrics),v,"html"):Object(a.a)(r.formatter,r.value_template,f),o=Object(b.b)(e.data);let i=e.color||r.color;return d.bar_color_rules&&d.bar_color_rules.forEach((e=>{Object(N.c)(e,o)&&e.operator&&e.bar_color&&Object(N.b)(e.operator)(o,e.value)&&(i=e.bar_color)})),{...e,color:i,tickFormatter:t}}return e})),m=d.background_color||c,w={backgroundColor:m},k={series:_,reversed:Object(j.b)(m)};d.drilldown_url&&(k.onClick=e=>{const t=Object(x.a)(d.drilldown_url,{},{key:e.label},{noEscape:!0});o.http.externalUrl.validateUrl(t)?(r(null),o.application.navigateToUrl(t)):r(t)});const V=Object(p.useCallback)((()=>r(null)),[]);return Object(h.jsx)("div",{className:"tvbVis",style:w},Object(h.jsx)(top_n_TopN,i()({},k,{initialRender:e.initialRender})),t&&Object(h.jsx)(O.a,{url:t,handleClose:V}))}},69:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l}));var o=r(10);let i=function(e){return e.Gte="gte",e.Lte="lte",e.Gt="gt",e.Lt="lt",e.Empty="empty",e}({});const n={[i.Gte]:o.gte,[i.Lte]:o.lte,[i.Gt]:o.gt,[i.Lt]:o.lt,[i.Empty]:o.isNull},s={[i.Empty]:!0},a=e=>n[e],l=(e,t)=>Object(o.isNull)(e.value)&&s[e.operator]||!Object(o.isNull)(e.value)&&!Object(o.isNull)(t)},72:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var o=r(38),i=r(82),n=r(2),s=r(59);const a=i.b.create();var l,c;function d(e,t={},r={},o={}){try{return a[i.a](e.split(s.a).join(`[${s.a}]`),{strict:!0,knownHelpersOnly:!0,knownHelpers:{rison:!0,encodeURIComponent:!0},...o})({...r,args:t})}catch(t){if(-1!==t.toString().indexOf("Parse error"))return e;if(-1!==t.message.indexOf("not defined in")){const e=t.message.split(/"/)[1];t.error={caused_by:{reason:n.i18n.translate("visTypeTimeseries.replaceVars.errors.unknownVarDescription",{defaultMessage:"{badVar} is an unknown variable",values:{badVar:"{{"+e+"}}"}}),title:n.i18n.translate("visTypeTimeseries.replaceVars.errors.unknownVarTitle",{defaultMessage:"Error processing your markdown"})}}}else t.error={caused_by:{reason:n.i18n.translate("visTypeTimeseries.replaceVars.errors.markdownErrorDescription",{defaultMessage:"Please verify you are only using markdown, known variables, and built-in Handlebars expressions"}),title:n.i18n.translate("visTypeTimeseries.replaceVars.errors.markdownErrorTitle",{defaultMessage:"Error processing your markdown"})}};return t}}a.registerHelper("rison",(l="rison",c=e=>Object(o.encode)(e),(...e)=>{const{hash:t}=e.slice(-1)[0],r=Object.keys(t).length>0,o=e.length>1;if(r&&o)throw new Error(`[${l}]: both value list and hash are not supported`);if(r){if(Object.values(t).some((e=>void 0===e)))throw new Error(`[${l}]: unknown variable`);return c(t)}{const t=e.slice(0,-1);if(t.some((e=>void 0===e)))throw new Error(`[${l}]: unknown variable`);if(0===t.length)throw new Error(`[${l}]: unknown variable`);return 1===t.length?c(t[0]):c(t)}})),a.registerHelper("encodeURIComponent",(e=>{const t=String(e);return encodeURIComponent(t)}))},73:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var o=r(3);const i=({initialRender:e,children:t,postponeExecution:r=!1})=>(Object(o.useLayoutEffect)((()=>{r||null==e||e()}),[e,r]),null!=t?t:null)},74:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return c}));var o=r(54),i=r.n(o),n=r(0);const s=e=>i()(e).luminosity()<.45,a=e=>{let t=e||Object(n.b)().theme.getTheme().darkMode;return"string"==typeof e&&(t=s(e)),t},l=(e,t)=>{const r=a(t);return e&&"inherit"!==e?s(e):r},c=(e,t)=>l(e,t)!==a(t)},98:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r(3);var o=r(32),i=r(6),n=r(1);const s=({url:e,handleClose:t})=>Object(n.jsx)(i.EuiModal,{onClose:t},Object(n.jsx)(i.EuiModalHeader,null,Object(n.jsx)(i.EuiModalHeaderTitle,null,Object(n.jsx)(o.FormattedMessage,{id:"visTypeTimeseries.externalUrlErrorModal.headerTitle",defaultMessage:"Access to this external URL is not yet enabled"}))),Object(n.jsx)(i.EuiModalBody,null,Object(n.jsx)(o.FormattedMessage,{id:"visTypeTimeseries.externalUrlErrorModal.bodyMessage",defaultMessage:"Configure {externalUrlPolicy} in your {kibanaConfigFileName} to allow access to {url}.",values:{url:Object(n.jsx)(i.EuiTextColor,{color:"warning",component:"span"},e),externalUrlPolicy:"externalUrl.policy",kibanaConfigFileName:"kibana.yml"}})),Object(n.jsx)(i.EuiModalFooter,null,Object(n.jsx)(i.EuiButton,{onClick:t,fill:!0},Object(n.jsx)(o.FormattedMessage,{id:"visTypeTimeseries.externalUrlErrorModal.closeButtonLabel",defaultMessage:"Close"}))))}}]);