(window.visTypeTimeseries_bundle_jsonpfunction=window.visTypeTimeseries_bundle_jsonpfunction||[]).push([[5],{107:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(108);case"v8light":return s(110)}},108:function(e,t,s){var i=s(51),a=s(109);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},109:function(e,t,s){(t=s(52)(!1)).push([e.i,'.tvbEditorVisualization{background-color:#1d1e24;display:flex;flex:1 0 auto;flex-direction:column;height:240px;line-height:normal;overflow:auto;position:relative;width:100%}.tvbEditorVisualization__apply{padding:8px}.tvbEditorVisualization__draghandle{align-items:center;background-color:#141519;display:flex;flex:0 0 14px;height:14px;justify-content:center;margin:0;position:relative;-webkit-user-select:none;user-select:none;width:100%}.tvbEditorVisualization__draghandle:hover{background-color:#164160}.tvbEditorVisualization__draghandle.active,.tvbEditorVisualization__draghandle:focus{background-color:#36a2ef;color:#1d1e24}.tvbEditorVisualization__draghandle:after{content:"";cursor:ns-resize;height:100%;left:0;position:absolute;top:0;width:100%}',""]),e.exports=t},110:function(e,t,s){var i=s(51),a=s(111);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},111:function(e,t,s){(t=s(52)(!1)).push([e.i,'.tvbEditorVisualization{background-color:#fff;display:flex;flex:1 0 auto;flex-direction:column;height:240px;line-height:normal;overflow:auto;position:relative;width:100%}.tvbEditorVisualization__apply{padding:8px}.tvbEditorVisualization__draghandle{align-items:center;background-color:#fafbfd;display:flex;flex:0 0 14px;height:14px;justify-content:center;margin:0;position:relative;-webkit-user-select:none;user-select:none;width:100%}.tvbEditorVisualization__draghandle:hover{background-color:#cce4f5}.tvbEditorVisualization__draghandle.active,.tvbEditorVisualization__draghandle:focus{background-color:#07c;color:#fff}.tvbEditorVisualization__draghandle:after{content:"";cursor:ns-resize;height:100%;left:0;position:absolute;top:0;width:100%}',""]),e.exports=t},112:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(113);case"v8light":return s(115)}},113:function(e,t,s){var i=s(51),a=s(114);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},114:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbLastValueModePopover{height:auto}.tvbLastValueModePopoverBody{width:360px}",""]),e.exports=t},115:function(e,t,s){var i=s(51),a=s(116);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},116:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbLastValueModePopover{height:auto}.tvbLastValueModePopoverBody{width:360px}",""]),e.exports=t},122:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(123);case"v8light":return s(125)}},123:function(e,t,s){var i=s(51),a=s(124);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},124:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbSeriesEditor__container{padding:16px}.tvbSeriesEditor{flex-grow:1}.tvbSeriesEditor.tvbSeriesEditor--flexGrowZero{flex-grow:0}.tvbSeriesEditor.tvbSeriesEditor--hasShadow{box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a}.tvbSeriesEditor.tvbSeriesEditor--hasBorder{border:1px solid #343741;box-shadow:none}.tvbSeriesEditor.tvbSeriesEditor--isClickable{transition:all .15s cubic-bezier(.694,.0482,.335,1)}.tvbSeriesEditor.tvbSeriesEditor--isClickable:enabled{display:block;text-align:left;width:100%}.tvbSeriesEditor.tvbSeriesEditor--isClickable:focus,.tvbSeriesEditor.tvbSeriesEditor--isClickable:hover{box-shadow:0 1px 5px #00000040,0 3.6px 13px rgba(0,0,0,.175),0 8.4px 23px #00000026,0 23px 35px rgba(0,0,0,.125);cursor:pointer;transform:translateY(-2px)}.tvbSeriesEditor.tvbSeriesEditor--borderRadiusNone{border-radius:0}.tvbSeriesEditor.tvbSeriesEditor--borderRadiusMedium{border-radius:6px}.tvbSeriesEditor.tvbSeriesEditor--transparent{background-color:#0000}.tvbSeriesEditor.tvbSeriesEditor--plain{background-color:#1d1e24}.tvbSeriesEditor.tvbSeriesEditor--subdued{background-color:#141519}.tvbSeriesEditor.tvbSeriesEditor--accent{background-color:#4a2b39}.tvbSeriesEditor.tvbSeriesEditor--primary{background-color:#103148}.tvbSeriesEditor.tvbSeriesEditor--success{background-color:#264341}.tvbSeriesEditor.tvbSeriesEditor--warning{background-color:#493f22}.tvbSeriesEditor.tvbSeriesEditor--danger{background-color:#4a201e}.tvbSeriesEditor{margin-bottom:16px;padding:8px}.tvbSeries__body{margin-left:32px;margin-top:8px}",""]),e.exports=t},125:function(e,t,s){var i=s(51),a=s(126);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},126:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbSeriesEditor__container{padding:16px}.tvbSeriesEditor{flex-grow:1}.tvbSeriesEditor.tvbSeriesEditor--flexGrowZero{flex-grow:0}.tvbSeriesEditor.tvbSeriesEditor--hasShadow{box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a}.tvbSeriesEditor.tvbSeriesEditor--hasBorder{border:1px solid #d3dae6;box-shadow:none}.tvbSeriesEditor.tvbSeriesEditor--isClickable{transition:all .15s cubic-bezier(.694,.0482,.335,1)}.tvbSeriesEditor.tvbSeriesEditor--isClickable:enabled{display:block;text-align:left;width:100%}.tvbSeriesEditor.tvbSeriesEditor--isClickable:focus,.tvbSeriesEditor.tvbSeriesEditor--isClickable:hover{box-shadow:0 1px 5px #0000001a,0 3.6px 13px #00000012,0 8.4px 23px #0000000f,0 23px 35px #0000000d;cursor:pointer;transform:translateY(-2px)}.tvbSeriesEditor.tvbSeriesEditor--borderRadiusNone{border-radius:0}.tvbSeriesEditor.tvbSeriesEditor--borderRadiusMedium{border-radius:6px}.tvbSeriesEditor.tvbSeriesEditor--transparent{background-color:#0000}.tvbSeriesEditor.tvbSeriesEditor--plain{background-color:#fff}.tvbSeriesEditor.tvbSeriesEditor--subdued{background-color:#fafbfd}.tvbSeriesEditor.tvbSeriesEditor--accent{background-color:#feedf5}.tvbSeriesEditor.tvbSeriesEditor--primary{background-color:#e6f1fa}.tvbSeriesEditor.tvbSeriesEditor--success{background-color:#e6f9f7}.tvbSeriesEditor.tvbSeriesEditor--warning{background-color:#fff9e8}.tvbSeriesEditor.tvbSeriesEditor--danger{background-color:#f8e9e9}.tvbSeriesEditor{margin-bottom:16px;padding:8px}.tvbSeries__body{margin-left:32px;margin-top:8px}",""]),e.exports=t},127:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(128);case"v8light":return s(130)}},128:function(e,t,s){var i=s(51),a=s(129);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},129:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbAnnotationsEditor__container{background-color:#25262e;padding:16px}.tvbAnnotationsEditor{flex-grow:1}.tvbAnnotationsEditor.tvbAnnotationsEditor--flexGrowZero{flex-grow:0}.tvbAnnotationsEditor.tvbAnnotationsEditor--hasShadow{box-shadow:0 .9px 4px -1px #0003,0 2.6px 8px -1px #00000026,0 5.7px 12px -1px rgba(0,0,0,.125),0 15px 15px -1px #0000001a}.tvbAnnotationsEditor.tvbAnnotationsEditor--hasBorder{border:1px solid #343741;box-shadow:none}.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable{transition:all .15s cubic-bezier(.694,.0482,.335,1)}.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable:enabled{display:block;text-align:left;width:100%}.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable:focus,.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable:hover{box-shadow:0 1px 5px #00000040,0 3.6px 13px rgba(0,0,0,.175),0 8.4px 23px #00000026,0 23px 35px rgba(0,0,0,.125);cursor:pointer;transform:translateY(-2px)}.tvbAnnotationsEditor.tvbAnnotationsEditor--borderRadiusNone{border-radius:0}.tvbAnnotationsEditor.tvbAnnotationsEditor--borderRadiusMedium{border-radius:6px}.tvbAnnotationsEditor.tvbAnnotationsEditor--transparent{background-color:#0000}.tvbAnnotationsEditor.tvbAnnotationsEditor--plain{background-color:#1d1e24}.tvbAnnotationsEditor.tvbAnnotationsEditor--subdued{background-color:#141519}.tvbAnnotationsEditor.tvbAnnotationsEditor--accent{background-color:#4a2b39}.tvbAnnotationsEditor.tvbAnnotationsEditor--primary{background-color:#103148}.tvbAnnotationsEditor.tvbAnnotationsEditor--success{background-color:#264341}.tvbAnnotationsEditor.tvbAnnotationsEditor--warning{background-color:#493f22}.tvbAnnotationsEditor.tvbAnnotationsEditor--danger{background-color:#4a201e}.tvbAnnotationsEditor{margin-bottom:16px;padding:8px}",""]),e.exports=t},130:function(e,t,s){var i=s(51),a=s(131);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},131:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbAnnotationsEditor__container{background-color:#f5f7fa;padding:16px}.tvbAnnotationsEditor{flex-grow:1}.tvbAnnotationsEditor.tvbAnnotationsEditor--flexGrowZero{flex-grow:0}.tvbAnnotationsEditor.tvbAnnotationsEditor--hasShadow{box-shadow:0 .9px 4px -1px #00000014,0 2.6px 8px -1px #0000000f,0 5.7px 12px -1px #0000000d,0 15px 15px -1px #0000000a}.tvbAnnotationsEditor.tvbAnnotationsEditor--hasBorder{border:1px solid #d3dae6;box-shadow:none}.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable{transition:all .15s cubic-bezier(.694,.0482,.335,1)}.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable:enabled{display:block;text-align:left;width:100%}.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable:focus,.tvbAnnotationsEditor.tvbAnnotationsEditor--isClickable:hover{box-shadow:0 1px 5px #0000001a,0 3.6px 13px #00000012,0 8.4px 23px #0000000f,0 23px 35px #0000000d;cursor:pointer;transform:translateY(-2px)}.tvbAnnotationsEditor.tvbAnnotationsEditor--borderRadiusNone{border-radius:0}.tvbAnnotationsEditor.tvbAnnotationsEditor--borderRadiusMedium{border-radius:6px}.tvbAnnotationsEditor.tvbAnnotationsEditor--transparent{background-color:#0000}.tvbAnnotationsEditor.tvbAnnotationsEditor--plain{background-color:#fff}.tvbAnnotationsEditor.tvbAnnotationsEditor--subdued{background-color:#fafbfd}.tvbAnnotationsEditor.tvbAnnotationsEditor--accent{background-color:#feedf5}.tvbAnnotationsEditor.tvbAnnotationsEditor--primary{background-color:#e6f1fa}.tvbAnnotationsEditor.tvbAnnotationsEditor--success{background-color:#e6f9f7}.tvbAnnotationsEditor.tvbAnnotationsEditor--warning{background-color:#fff9e8}.tvbAnnotationsEditor.tvbAnnotationsEditor--danger{background-color:#f8e9e9}.tvbAnnotationsEditor{margin-bottom:16px;padding:8px}",""]),e.exports=t},153:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(154);case"v8light":return s(156)}},154:function(e,t,s){var i=s(51),a=s(155);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},155:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbMarkdownEditor{background-color:#1d1e24;display:flex;height:500px}.tvbMarkdownEditor__editor,.tvbMarkdownEditor__variables{flex:1 0 auto;width:50%}.tvbMarkdownEditor__editor{border-right:2px solid #25262e}.tvbMarkdownEditor__variables{overflow:auto;padding:8px}.tvbMarkdownEditor__noVariables{border-bottom:1px solid #343741;display:block;padding-bottom:40px;padding-top:16px;text-align:center}",""]),e.exports=t},156:function(e,t,s){var i=s(51),a=s(157);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},157:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbMarkdownEditor{background-color:#fff;display:flex;height:500px}.tvbMarkdownEditor__editor,.tvbMarkdownEditor__variables{flex:1 0 auto;width:50%}.tvbMarkdownEditor__editor{border-right:2px solid #f5f7fa}.tvbMarkdownEditor__variables{overflow:auto;padding:8px}.tvbMarkdownEditor__noVariables{border-bottom:1px solid #d3dae6;display:block;padding-bottom:40px;padding-top:16px;text-align:center}",""]),e.exports=t},158:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(159);case"v8light":return s(161)}},159:function(e,t,s){var i=s(51),a=s(160);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},160:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbPanelConfig__container{padding:16px}",""]),e.exports=t},161:function(e,t,s){var i=s(51),a=s(162);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);i(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},162:function(e,t,s){(t=s(52)(!1)).push([e.i,".tvbPanelConfig__container{padding:16px}",""]),e.exports=t},163:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s(3),a=s(164),l=function(){};t.default=function(e,t,s){if(!a.isClient)return[t,l,l];if(!e)throw new Error("useLocalStorage key may not be falsy");var n=s?s.raw?function(e){return e}:s.deserializer:JSON.parse,o=i.useState((function(){try{var i=s?s.raw?String:s.serializer:JSON.stringify,a=localStorage.getItem(e);return null!==a?n(a):(t&&localStorage.setItem(e,i(t)),t)}catch(e){return t}})),r=o[0],d=o[1],u=i.useCallback((function(t){try{var i="function"==typeof t?t(r):t;if(void 0===i)return;var a;a=s?s.raw?"string"==typeof i?i:JSON.stringify(i):s.serializer?s.serializer(i):JSON.stringify(i):JSON.stringify(i),localStorage.setItem(e,a),d(n(a))}catch(e){}}),[e,d]),c=i.useCallback((function(){try{localStorage.removeItem(e),d(void 0)}catch(e){}}),[e,d]);return[r,u,c]}},164:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var i=s(27).__importDefault(s(165));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.removeEventListener.apply(e,t)},t.isDeepEqual=i.default},165:function(e,t,s){"use strict";e.exports=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var i,a,l;if(Array.isArray(t)){if((i=t.length)!=s.length)return!1;for(a=i;0!=a--;)if(!e(t[a],s[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((i=(l=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(a=i;0!=a--;)if(!Object.prototype.hasOwnProperty.call(s,l[a]))return!1;for(a=i;0!=a--;){var n=l[a];if(!("_owner"===n&&t.$$typeof||e(t[n],s[n])))return!1}return!0}return t!=t&&s!=s}},218:function(e,t,s){"use strict";s.r(t),s.d(t,"VisEditor",(function(){return vis_editor_VisEditor})),s.d(t,"default",(function(){return vis_editor_VisEditor}));var i=s(17),a=s.n(i),l=s(3),n=s.n(l),o=s(39),r=s(10),d=s.n(r),u=s(1),c=s(40),b=s(4),g=s(6),p=s(32);s(107);class vis_editor_visualization_VisEditorVisualizationUI extends l.Component{constructor(e){super(e),a()(this,"handleMouseDown",(()=>{window.addEventListener("mouseup",this.handleMouseUp),this.setState({dragging:!0})})),a()(this,"handleMouseUp",(()=>{window.removeEventListener("mouseup",this.handleMouseUp),this.setState({dragging:!1})})),a()(this,"handleMouseMove",(e=>{this.state.dragging&&this.setState((t=>({height:Math.max(300,t.height+e.movementY)})))})),a()(this,"onSizeHandleKeyDown",(e=>{const{key:t}=e;t!==g.keys.ARROW_UP&&t!==g.keys.ARROW_DOWN||(e.preventDefault(),this.setState((e=>{const s=e.height+(t===g.keys.ARROW_UP?-15:15);return{height:Math.max(300,s)}})))})),this.state={height:300,dragging:!1},this._visEl=n.a.createRef(),this._subscription=null}async _loadVisualization(){if(!this._visEl.current)return;const{onDataChange:e,embeddableHandler:t,timeRange:s,filters:i,query:a}=this.props;this._handler=t,this._handler.updateInput({timeRange:s,filters:i,query:a}),await this._handler.render(this._visEl.current),this.props.eventEmitter.emit("embeddableRendered"),this._subscription=this._handler.handler.data$.pipe(Object(o.pluck)("result")).subscribe((t=>e(t.value)))}componentWillUnmount(){window.removeEventListener("mousemove",this.handleMouseMove),window.removeEventListener("mouseup",this.handleMouseUp),this._handler&&this._handler.destroy(),this._subscription&&this._subscription.unsubscribe()}componentDidMount(){window.addEventListener("mousemove",this.handleMouseMove),this._loadVisualization()}componentDidUpdate(){if(this._handler){const{timeRange:e,filters:t,query:s}=this.props;this._handler.updateInput({timeRange:e,filters:t,query:s})}}render(){const{dirty:e,autoApply:t,title:s,description:i,onToggleAutoApply:a,onCommit:l}=this.props,n={height:this.state.height};this.state.dragging&&(n.userSelect="none");let o=Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.changesSuccessfullyAppliedMessage",defaultMessage:"The latest changes have been applied."});e&&(o=Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.changesHaveNotBeenAppliedMessage",defaultMessage:"The changes to this visualization have not been applied."})),t&&(o=Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.changesWillBeAutomaticallyAppliedMessage",defaultMessage:"The changes will be automatically applied."}));const r=Object(u.jsx)(g.EuiFlexGroup,{className:"tvbEditorVisualization__apply",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiSwitch,{id:"tsvbAutoApplyInput",label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.autoApplyLabel",defaultMessage:"Auto apply"}),checked:t,onChange:a})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiText,{color:e?"default":"subdued",size:"xs"},Object(u.jsx)("p",null,o))),!t&&Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButton,{iconType:"play",fill:!0,size:"s",onClick:l,disabled:!e,"data-test-subj":"applyBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.applyChangesLabel",defaultMessage:"Apply changes"}))));return Object(u.jsx)("div",null,Object(u.jsx)("div",{style:n,className:"tvbEditorVisualization","data-shared-items-container":!0,"data-title":s,"data-description":i,ref:this._visEl}),Object(u.jsx)("div",{className:"tvbEditor--hideForReporting"},r,Object(u.jsx)("button",{className:"tvbEditorVisualization__draghandle",onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onKeyDown:this.onSizeHandleKeyDown,"aria-label":this.props.intl.formatMessage({id:"visTypeTimeseries.colorRules.adjustChartSizeAriaLabel",defaultMessage:"Press up/down to adjust the chart size"})},Object(u.jsx)(g.EuiIcon,{type:"grab"}))))}}const j=Object(p.injectI18n)(vis_editor_visualization_VisEditorVisualizationUI),m=n.a.createContext({}),x=n.a.createContext({}),v=n.a.createContext(null);var h=s(2),O=s(11);const f=/[^0-9,]/g;var T={name:"1dbubah",styles:"display:flex;align-items:center;position:relative"};function E({name:e,value:t,disableTrash:s=!1,onChange:i}){const a=null!=t&&t.includes("rgba")?t.replace(f,""):t,[n,o]=Object(l.useState)(a||""),{euiTheme:r}=Object(g.useEuiTheme)(),d=t?h.i18n.translate("visTypeTimeseries.colorPicker.notAccessibleWithValueAriaLabel",{defaultMessage:"Color picker ({value}), not accessible",values:{value:t}}):h.i18n.translate("visTypeTimeseries.colorPicker.notAccessibleAriaLabel",{defaultMessage:"Color picker, not accessible"}),c=T,b=Object(u.css)("margin-left:",r.size.xs,";","");return Object(u.jsx)("div",{css:c,"data-test-subj":"tvbColorPicker"},Object(u.jsx)(g.EuiColorPicker,{onChange:(t,{rgba:s,hex:a})=>{o(t),i({[e]:a?`rgba(${s.join(",")})`:""})},color:n,secondaryInputDisplay:"top",showAlpha:!0,button:Object(u.jsx)(g.EuiColorPickerSwatch,{color:n,"aria-label":d})}),!s&&Object(u.jsx)("div",{css:b,onClick:()=>{o(""),i({[e]:null})},"data-test-subj":"tvbColorPickerClear"},Object(u.jsx)(g.EuiIconTip,{size:"s",type:"cross",color:"danger",content:h.i18n.translate("visTypeTimeseries.colorPicker.clearIconLabel",{defaultMessage:"Clear"})})))}function y(e){const{testSubj:t}=e,s=e.disableDelete?null:Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiToolTip,{content:e.deleteTooltip},Object(u.jsx)(g.EuiButtonIcon,{"data-test-subj":`${t}DeleteBtn`,"aria-label":e.deleteTooltip,color:"danger",iconType:"trash",onClick:e.onDelete}))),i=e.disableAdd?null:Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiToolTip,{content:e.addTooltip},Object(u.jsx)(g.EuiButtonIcon,{"data-test-subj":`${t}AddBtn`,"aria-label":e.addTooltip,iconType:"plusInCircle",onClick:e.onAdd}))),a=(()=>{let s=null;return e.onClone&&!e.disableAdd&&(s=Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiToolTip,{content:e.cloneTooltip},Object(u.jsx)(g.EuiButtonIcon,{"data-test-subj":`${t}CloneBtn`,"aria-label":e.cloneTooltip,iconType:"copy",onClick:e.onClone})))),s})(),l=(()=>{let s=null;if(Object(r.isBoolean)(e.isPanelActive)){const i=e.isPanelActive?e.deactivatePanelTooltip:e.activatePanelTooltip,a=e.isPanelActive?"eye":"eyeClosed";s=Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiToolTip,{content:i},Object(u.jsx)(g.EuiButtonIcon,{"data-test-subj":`${t}ActivatePanelBtn`,"aria-label":i,iconType:a,onClick:e.togglePanelActivation})))}return s})();return Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s",responsive:e.responsive,justifyContent:"flexEnd"},l,a,i,s)}y.defaultProps={testSubj:"Add",activeTooltip:h.i18n.translate("visTypeTimeseries.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),addTooltip:h.i18n.translate("visTypeTimeseries.addDeleteButtons.addButtonDefaultTooltip",{defaultMessage:"Add"}),deleteTooltip:h.i18n.translate("visTypeTimeseries.addDeleteButtons.deleteButtonDefaultTooltip",{defaultMessage:"Delete"}),cloneTooltip:h.i18n.translate("visTypeTimeseries.addDeleteButtons.cloneButtonDefaultTooltip",{defaultMessage:"Clone"}),activatePanelTooltip:h.i18n.translate("visTypeTimeseries.addDeleteButtons.reEnableTooltip",{defaultMessage:"Re-enable"}),deactivatePanelTooltip:h.i18n.translate("visTypeTimeseries.addDeleteButtons.temporarilyDisableTooltip",{defaultMessage:"Temporarily Disable"})};class series_drag_handler_SeriesDragHandler extends l.PureComponent{render(){const{dragHandleProps:e,hideDragHandler:t}=this.props;return Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)("div",e,!t&&Object(u.jsx)(g.EuiToolTip,{content:h.i18n.translate("visTypeTimeseries.sort.dragToSortTooltip",{defaultMessage:"Drag to sort"})},Object(u.jsx)(g.EuiIcon,{className:"tvbSeries__sortHandle","aria-label":h.i18n.translate("visTypeTimeseries.sort.dragToSortAriaLabel",{defaultMessage:"Drag to sort"}),type:"grab"}))))}}a()(series_drag_handler_SeriesDragHandler,"defaultProps",{hideDragHandler:!0});const M=e=>Object(u.css)("background-color:",e.colors.lightestShade,";padding:",e.size.s,";margin-bottom:",e.size.s,";",""),F=e=>Object(u.css)("padding-top:calc(",e.size.s," - 2px);",""),_=e=>Object(u.css)("margin-top:-",e.size.xs,";",""),C=e=>Object(u.css)("padding-left:",e.size.xl,";","");function S(e){let t="eyeClosed",s="subdued";const i=Object(r.last)(e.siblings),{euiTheme:a}=Object(g.useEuiTheme)();return i.id===e.model.id&&(t="eye",s="text"),Object(u.jsx)("div",{css:M(a)},Object(u.jsx)(g.EuiFlexGroup,{"data-test-subj":"aggRow",gutterSize:"s",alignItems:"flexStart",responsive:!1},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiIcon,{type:t,color:s,style:{marginTop:a.size.xs}})),Object(u.jsx)(g.EuiFlexItem,{css:F(a)},e.children),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:e.disableDelete}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{testSubj:"addMetric",addTooltip:h.i18n.translate("visTypeTimeseries.aggRow.addMetricButtonTooltip",{defaultMessage:"Add Metric"}),deleteTooltip:h.i18n.translate("visTypeTimeseries.aggRow.deleteMetricButtonTooltip",{defaultMessage:"Delete Metric"}),onAdd:e.onAdd,onDelete:e.onDelete,disableDelete:e.disableDelete}))))}var w=s(18),I=s.n(w),L=s(5);let A=function(e){return e.WHITE_LISTED_GROUP_BY_FIELDS="whiteListedGroupByFields",e.WHITE_LISTED_METRICS="whiteListedMetrics",e.WHITE_LISTED_TIMERANGE_MODES="whiteListedTimerangeModes",e.WHITE_LISTED_CONFIGURATION_FEATURES="whiteListedConfigurationFeatures",e}({});const P={"*":!0},D={[L.e.GAUGE]:1,[L.e.METRIC]:2},k=(e,t,s=P)=>Object(r.get)(s,`${t}.*`,!0)||Boolean(Object(r.get)(s,[t,e],!1)),R=(e,t)=>k(e,A.WHITE_LISTED_METRICS,t),N=(e,t)=>k(e,A.WHITE_LISTED_GROUP_BY_FIELDS,t),B=(e,t)=>k(e,A.WHITE_LISTED_TIMERANGE_MODES,t);var z=s(77);const G=({id:e,meta:t})=>({value:e,label:t.label}),{metric:H,parent_pipeline:V,sibling_pipeline:W,special:U}=Object(z.d)(G),q=[...H,...V,...W,...U];function $(e){var t;const{siblings:s,panelType:i,value:a,onChange:n,...o}=e,{uiRestrictions:r}=null!==(t=Object(l.useContext)(x))&&void 0!==t?t:{},d=q.filter((e=>a===e.value&&R(e.value,r)));let c,b=s.some((e=>!!H.find((t=>t.value===e.type))));if(s.length<=1&&(b=!1),"metrics"===i)c=H;else if("filter_ratio"===i)c=Object(z.c)({meta:{isFilterRatioSupported:!0}}).map(G);else if("histogram"===i)c=Object(z.c)({meta:{isHistogramSupported:!0}}).map(G);else{const e=e=>({...e,disabled:!b||!R(e.value,r)});c=[{label:h.i18n.translate("visTypeTimeseries.aggSelect.aggGroups.metricAggLabel",{defaultMessage:"Metric Aggregations"}),options:H.map((e=>({...e,disabled:!R(e.value,r)})))},{label:h.i18n.translate("visTypeTimeseries.aggSelect.aggGroups.parentPipelineAggLabel",{defaultMessage:"Parent Pipeline Aggregations"}),options:V.map(e)},{label:h.i18n.translate("visTypeTimeseries.aggSelect.aggGroups.siblingPipelineAggLabel",{defaultMessage:"Sibling Pipeline Aggregations"}),options:W.map(e)},{label:h.i18n.translate("visTypeTimeseries.aggSelect.aggGroups.specialAggLabel",{defaultMessage:"Special Aggregations"}),options:U.map(e)}]}return Object(u.jsx)("div",{"data-test-subj":"aggSelector"},Object(u.jsx)(g.EuiComboBox,I()({isClearable:!1,placeholder:h.i18n.translate("visTypeTimeseries.aggSelect.selectAggPlaceholder",{defaultMessage:"Select aggregation"}),options:c,selectedOptions:d,onChange:e=>{!e||e.length<=0||n(e)},singleSelection:{asPlainText:!0}},o)))}var K=s(34),Y=s(64);const Q=["cumulative_sum","derivative","moving_average","avg_bucket","sum_bucket","min_bucket","max_bucket","std_deviation_bucket","variance_bucket","sum_of_squares_bucket","serial_diff","positive_only"],X=(e,t=[],s=[],i=!0)=>{if(!e)return h.i18n.translate("visTypeTimeseries.calculateLabel.unknownLabel",{defaultMessage:"Unknown"});if(e.alias)return e.alias;switch(e.type){case K.METRIC_TYPES.COUNT:return h.i18n.translate("visTypeTimeseries.calculateLabel.countLabel",{defaultMessage:"Count"});case L.i.CALCULATION:return h.i18n.translate("visTypeTimeseries.calculateLabel.bucketScriptsLabel",{defaultMessage:"Bucket Script"});case L.i.MATH:return h.i18n.translate("visTypeTimeseries.calculateLabel.mathLabel",{defaultMessage:"Math"});case L.i.SERIES_AGG:return h.i18n.translate("visTypeTimeseries.calculateLabel.seriesAggLabel",{defaultMessage:"Series Agg ({metricFunction})",values:{metricFunction:e.function}});case L.i.FILTER_RATIO:return h.i18n.translate("visTypeTimeseries.calculateLabel.filterRatioLabel",{defaultMessage:"Filter Ratio"});case L.i.POSITIVE_RATE:return h.i18n.translate("visTypeTimeseries.calculateLabel.positiveRateLabel",{defaultMessage:"Counter Rate of {field}",values:{field:Object(Y.c)(s,e.field,i)}});case L.i.STATIC:return h.i18n.translate("visTypeTimeseries.calculateLabel.staticValueLabel",{defaultMessage:"Static Value of {metricValue}",values:{metricValue:e.value}})}const a=Object(z.e)(e.type);if(Object(r.includes)(Q,e.type)){const l=t.find((t=>Object(r.startsWith)(e.field,t.id))),n=X(l,t,s,i);if(l&&"percentile"===l.type){const t=/\[([0-9\.]+)\]$/,s=e.field.match(t);if(s)return h.i18n.translate("visTypeTimeseries.calculateLabel.metricTypeOfTargetWithAdditionalLabel",{defaultMessage:"{metricTypeLabel} of {targetLabel} ({additionalLabel})",values:{metricTypeLabel:a,targetLabel:n,additionalLabel:s[1]}})}return h.i18n.translate("visTypeTimeseries.calculateLabel.metricTypeOfTargetLabel",{defaultMessage:"{metricTypeLabel} of {targetLabel}",values:{metricTypeLabel:a,targetLabel:n}})}return h.i18n.translate("visTypeTimeseries.calculateLabel.metricTypeOfMetricFieldRankLabel",{defaultMessage:"{metricTypeLabel} of {metricField}",values:{metricTypeLabel:a,metricField:Object(Y.c)(s,e.field,i)}})};var Z=s(84);const J=/\d+\.\d+/,ee=e=>J.test(`${e}`)?e:`${e}.0`;function te(e){const{additionalOptions:t,restrict:s,metric:i,fields:a,metrics:l,onChange:n,value:o,exclude:r,includeSiblings:c,clearable:b,...p}=e,j=l.filter(function(e,t=[]){return s=>!t.includes(s.type)&&("basic"!==e||Z.a.includes(s.type))}(s,r)),m=((e,t)=>{const s=function(e,t){const s=t.id&&[t.id]||[];return e.forEach((e=>{d.a.includes(s,e.field)&&s.push(e.id)})),s}(e,t);return e.filter((e=>!d.a.includes(s,e.id)))})(j,i),x=m.filter((e=>/^percentile/.test(e.type))).reduce(((e,t)=>{const s=X(t,j,a,!1);switch(t.type){case L.i.PERCENTILE_RANK:(t.values||[]).forEach((i=>{const a=ee(i);e.push({value:`${t.id}[${a}]`,label:`${s} (${a})`})}));case L.i.PERCENTILE:(t.percentiles||[]).forEach((i=>{if(i.value){const a=ee(i.value);e.push({value:`${t.id}[${a}]`,label:`${s} (${a})`})}}))}return e}),[]),v=m.filter(function(e){return t=>e?!/^series/.test(t.type)&&!/^percentile/.test(t.type)&&"math"!==t.type:!/_bucket$/.test(t.type)&&!/^series/.test(t.type)&&!/^percentile/.test(t.type)&&"math"!==t.type}(c)).map((e=>{const t=X(e,j,a,!1);return{value:e.id,label:t}})),O=[...v,...t,...x],f=O.find((e=>o===e.value)),T=f?[f]:[];return Object(u.jsx)(g.EuiComboBox,I()({placeholder:h.i18n.translate("visTypeTimeseries.metricSelect.selectMetricPlaceholder",{defaultMessage:"Select metricâ€¦"}),options:O,selectedOptions:T,onChange:n,singleSelection:{asPlainText:!0},isClearable:b},p))}te.defaultProps={additionalOptions:[],exclude:[],metric:{},restrict:"none",includeSiblings:!1};const se=(e,t)=>s=>{const i=d.a.assign({},t,s);e(i)},ie=e=>t=>(s=[])=>{var i,a;return null==e?void 0:e({[t]:null!==(i=null===(a=s[0])||void 0===a?void 0:a.value)&&void 0!==i?i:null})},ae=e=>(t,s)=>i=>{var a;return null==e?void 0:e({[t]:null!=s&&s.isClearable&&!i.target.value?void 0:Number(null!==(a=i.target.value)&&void 0!==a?a:null==s?void 0:s.defaultValue)})};var le=s(13);const ne={model_type:L.c.UNWEIGHTED,alpha:.3,beta:.1,gamma:.3,period:1,multiplicative:!0,window:5},oe=({model_type:e,window:t,period:s})=>e===L.c.WEIGHTED_EXPONENTIAL_TRIPLE&&2*s>t,re=e=>(t,s)=>i=>{var a;return e({[t]:null!==(a=i.target.value)&&void 0!==a?a:s})},de=()=>({id:Object(O.v4)()});function ue(e,t){const{model:s,name:i}=e,a=s[i]||[],l={[i]:a.map((e=>e.id===t.id?t:e))};e.onChange({...s,...l})}function ce(e,t){var s;const{model:i,name:a}=e,l=i[a]||[],n={[a]:l.filter((e=>e.id!==t.id))};null===(s=e.onChange)||void 0===s||s.call(e,{...i,...n})}function be(e,t=de){var s;const{model:i,name:a}=e,l=i[a]||[],n={[a]:l.concat([t()])};null===(s=e.onChange)||void 0===s||s.call(e,{...i,...n})}const ge={handleAdd:be,handleDelete:ce,handleChange:ue},pe=e=>({id:Object(O.v4)(),name:"",field:"",...e});class vars_CalculationVars extends l.Component{constructor(e){super(e),this.renderRow=this.renderRow.bind(this)}handleChange(e,t){return s=>{const i=ge.handleChange.bind(null,this.props),a={};a[t]=d.a.get(s,"[0].value",d.a.get(s,"target.value")),i(d.a.assign({},e,a))}}renderRow(e,t,s){const i=ge.handleAdd.bind(null,this.props,pe),a=ge.handleDelete.bind(null,this.props,e);return Object(u.jsx)(g.EuiFlexItem,{key:e.id,"data-test-subj":"varRow"},Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{className:"tvbAggs__varName","data-test-subj":"tvbAggsVarNameInput","aria-label":h.i18n.translate("visTypeTimeseries.vars.variableNameAriaLabel",{defaultMessage:"Variable name"}),placeholder:h.i18n.translate("visTypeTimeseries.vars.variableNamePlaceholder",{defaultMessage:"Variable name"}),onChange:this.handleChange(e,"name"),value:e.name})),Object(u.jsx)(g.EuiFlexItem,{className:"tvbAggs__varMetricWrapper","data-test-subj":"tvbAggsVarMetricWrapper"},Object(u.jsx)(te,{onChange:this.handleChange(e,"field"),metrics:this.props.metrics,metric:this.props.model,value:e.field,fields:this.props.fields[Object(le.c)(this.props.indexPattern)],includeSiblings:this.props.includeSiblings,exclude:this.props.exclude})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(y,{onAdd:i,onDelete:a,disableDelete:s.length<2,responsive:!1}))))}render(){const{model:e,name:t}=this.props;if(!e[t])return Object(u.jsx)("div",null);const s=e[t].map(this.renderRow);return Object(u.jsx)(g.EuiFlexGroup,{direction:"column",gutterSize:"s"},s)}}vars_CalculationVars.defaultProps={name:"variables",includeSiblings:!1};const je="INVALID_FIELD",me=4,xe=(e,t,s=[],i,a=[])=>{const l=(e,t)=>{const s=e=>(e.label||"").toLowerCase();return s(e).localeCompare(s(t))},n=Object.values(s.reduce(((s,l)=>{if(r=l.type,(!a.length||a.includes(r))&&((e,t,s)=>!!R(t,s)&&k(e,t,null==s?void 0:s[A.WHITE_LISTED_METRICS]))(l.name,e,i)){var n,o;const e={value:l.name,label:null!==(n=l.label)&&void 0!==n?n:l.name,disabled:t.includes(l.name)},i=null===(o=s[l.type])||void 0===o?void 0:o.options;i?i.push(e):s[l.type]={options:[e],label:l.type}}var r;return s}),{}));return n.sort(l),n.forEach((e=>{Array.isArray(e.options)&&e.options.sort(l)})),n},ve=(e,t)=>(e||[]).map((e=>e.options)).flat().find((e=>(null==e?void 0:e.value)===t)),he=(e,t=null,s=0)=>{const i=[...e];return i[s]=t,i},Oe=(e,t=0)=>{const s=[...e];return s.splice(t+1,0,null),s},fe=(e,t=0)=>e.filter(((e,s)=>s!==t)),Te=(e,t=0,s=0)=>{const i=[...e];return i.splice(s,0,i.splice(t,1)[0]),i},Ee=h.i18n.translate("visTypeTimeseries.fieldSelect.selectFieldPlaceholder",{defaultMessage:"Select field..."});function ye({options:e,selectedOptions:t,placeholder:s=Ee,disabled:i,disableAdd:a,disableDelete:l,onChange:n,onDeleteItem:o,onNewItemAdd:r}){const d=Boolean(null==t?void 0:t.find((e=>e.id===je)));return Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiComboBox,{placeholder:s,isDisabled:i,options:e,selectedOptions:t,onChange:n,singleSelection:{asPlainText:!0},isInvalid:d,fullWidth:!0,"data-test-subj":"fieldSelectItem"})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{onAdd:r,onDelete:o,disableDelete:l,disableAdd:a,responsive:!1,testSubj:"fieldSelectItem"})))}const Me="onDragEnd",Fe=h.i18n.translate("visTypeTimeseries.fieldSelect.dragAriaLabel",{defaultMessage:"Drag field"});function _e(e){return Object(u.jsx)(g.EuiDragDropContext,{onDragEnd:e.onDragEnd},Object(u.jsx)(g.EuiDroppable,{droppableId:Me,spacing:"none"},e.values.map(((t,s)=>Object(u.jsx)(g.EuiDraggable,{spacing:"m",key:s,index:s,draggableId:`${s}`,customDragHandle:!0},(i=>Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiPanel,I()({color:"transparent",paddingSize:"s"},i.dragHandleProps,{"aria-label":Fe}),Object(u.jsx)(g.EuiIcon,{type:"grab"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(e.WrappedComponent,{value:t,index:s})))))))))}const Ce=(e,t)=>{var s;if(e)return(null===(s=ve(t,e))||void 0===s?void 0:s.label)||e};function Se({label:e,fullWidth:t,type:s,value:i,fields:a,indexPattern:n,uiRestrictions:o,restrict:r,onChange:d,disabled:c,placeholder:b,allowMultiSelect:p=!1,"data-test-subj":j}){const m=Object(g.htmlIdGenerator)(),x=Object(le.c)(n),v=Object(l.useMemo)((()=>[null!=i?i:null].flat()),[i]),O=Object(l.useMemo)((()=>xe(s,v,a[x],o,r)),[a,x,r,v,s,o]),f=Object(l.useMemo)((()=>{const e=new Map;if(v){const t=t=>{const s=ve(O,t);s?e.set(t,[s]):e.set(t,[{label:t,id:je}])};v.forEach((e=>e&&t(e)))}return e}),[O,v]),T=Object(l.useMemo)((()=>[...f.values()].flat().filter((e=>(null==e?void 0:e.label)&&(null==e?void 0:e.id)===je)).map((e=>e.label))),[f]),E=Object(l.useCallback)(((e=0,[t])=>{d(he(v,null==t?void 0:t.value,e))}),[v,d]),y=Object(l.useCallback)((e=>d(Oe(v,e))),[v,d]),M=Object(l.useCallback)((e=>d(fe(v,e))),[d,v]),F=Object(l.useCallback)((({source:e,destination:t})=>{t&&e.index!==(null==t?void 0:t.index)&&d(Te(v,e.index,t.index))}),[d,v]),_=Object(l.useMemo)((()=>e=>{var t;return Object(u.jsx)(ye,{options:O,selectedOptions:null!==(t=e.value?f.get(e.value):void 0)&&void 0!==t?t:[],disabled:c,onNewItemAdd:y.bind(void 0,e.index),onDeleteItem:M.bind(void 0,e.index),onChange:E.bind(void 0,e.index),placeholder:Ce(b,O),disableAdd:!p||(null==v?void 0:v.length)>=me,disableDelete:!p||(null==v?void 0:v.length)<=1})}),[O,f,c,y,M,E,b,p,null==v?void 0:v.length]);return Object(u.jsx)(g.EuiFormRow,{id:m("fieldSelect"),label:e,error:h.i18n.translate("visTypeTimeseries.fieldSelect.fieldIsNotValid",{defaultMessage:'The "{fieldParameter}" selection is not valid for use with the current index.',values:{fieldParameter:T.join(", ")}}),fullWidth:t,isInvalid:Boolean(T.length),"data-test-subj":null!=j?j:"metricsIndexPatternFieldsSelect"},(null==v?void 0:v.length)>1?Object(u.jsx)(_e,{values:v,onDragEnd:F,WrappedComponent:_}):Object(u.jsx)(_,{value:null==v?void 0:v[0]}))}var we=s(33);function Ie(e){switch(e){case K.METRIC_TYPES.CARDINALITY:return Object.values(we.KBN_FIELD_TYPES).filter((e=>e!==we.KBN_FIELD_TYPES.HISTOGRAM));case K.METRIC_TYPES.VALUE_COUNT:return Object.values(we.KBN_FIELD_TYPES);case K.METRIC_TYPES.AVG:case K.METRIC_TYPES.SUM:case K.METRIC_TYPES.MIN:case K.METRIC_TYPES.MAX:return[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.HISTOGRAM];default:return[we.KBN_FIELD_TYPES.NUMBER]}}function Le(e){const{model:t,panel:s,series:i,fields:a,uiRestrictions:l}=e,n=se(e.onChange,t),o=ie(n),r=Ie(t.type),d=i.override_index_pattern?i.series_index_pattern:s.index_pattern,c=Object(g.htmlIdGenerator)();return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:c("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdAgg.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:c("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:t.type,onChange:o("type"),fullWidth:!0})),"count"!==t.type?Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdAgg.fieldLabel",defaultMessage:"Field"}),fields:a,type:t.type,restrict:r,indexPattern:d,value:t.field,onChange:e=>n({field:null==e?void 0:e[0]}),uiRestrictions:l,fullWidth:!0})):null))}var Ae=s(7);const Pe=e=>d.a.assign({id:Object(O.v4)(),mode:"line",shade:.2,color:Ae.d},e);class percentile_ui_Percentiles extends l.Component{constructor(...e){super(...e),a()(this,"renderRow",((e,t,s)=>{const i={value:"",percentile:"",shade:"",color:Ae.d,...e},{panel:a,seriesId:l}=this.props,n={minWidth:100},o=a.series.find((e=>e.id===l))||a.series[0],r=a.series.length>0&&"everything"!==o.split_mode,d=Object(u.jsx)(g.EuiFlexItem,{style:n},Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.percentile",defaultMessage:"Percentile"})},Object(u.jsx)(g.EuiFieldNumber,{"aria-label":h.i18n.translate("visTypeTimeseries.percentile.percentileAriaLabel",{defaultMessage:"Percentile"}),placeholder:0,max:100,min:0,step:1,onChange:this.handleTextChange(i,"value"),value:""===i.value?"":Number(i.value)})));if("table"===a.type)return d;const c=ge.handleAdd.bind(null,this.props,Pe),b=ge.handleDelete.bind(null,this.props,i),j=[{label:h.i18n.translate("visTypeTimeseries.percentile.modeOptions.lineLabel",{defaultMessage:"Line"}),value:"line"},{label:h.i18n.translate("visTypeTimeseries.percentile.modeOptions.bandLabel",{defaultMessage:"Band"}),value:"band"}],m={...n};"line"===i.mode&&(m.display="none");const x=Object(g.htmlIdGenerator)(i.id),v=j.find((e=>i.mode===e.value));return Object(u.jsx)(g.EuiFlexItem,{key:i.id},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiFlexGroup,{key:i.id,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFlexGrid,{columns:3},!r&&!["table","metric","markdown"].includes(a.type)&&Object(u.jsx)(g.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},Object(u.jsx)(E,{disableTrash:!0,onChange:this.handleColorChange(i),value:i.color,name:"color"})),d,Object(u.jsx)(g.EuiFlexItem,{style:n},Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.modeLabel",defaultMessage:"Mode:"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,id:x("mode"),options:j,selectedOptions:v?[v]:[],onChange:this.handleTextChange(i,"mode"),singleSelection:{asPlainText:!0}}))),Object(u.jsx)(g.EuiFlexItem,{style:m},Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.fillToLabel",defaultMessage:"Fill to:"})},Object(u.jsx)(g.EuiFieldNumber,{id:x("fillTo"),min:0,max:100,step:1,onChange:this.handleTextChange(i,"percentile"),value:Number(i.percentile)}))),Object(u.jsx)(g.EuiFlexItem,{style:m},Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.shadeLabel",defaultMessage:"Shade (0 to 1):"})},Object(u.jsx)(g.EuiFieldNumber,{id:x("shade"),step:.1,onChange:this.handleTextChange(i,"shade"),value:Number(i.shade)}))))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{onAdd:c,onDelete:b,disableDelete:s.length<2,responsive:!1})))))}))}handleTextChange(e,t){return s=>{const i=ge.handleChange.bind(null,this.props),a={};a[t]=d.a.get(s,"[0].value",d.a.get(s,"target.value")),i(d.a.assign({},e,a))}}handleColorChange(e){return t=>{ge.handleChange.bind(null,this.props)(d.a.assign({},e,t))}}render(){const{model:e,name:t,panel:s}=this.props;if(!e[t])return Object(u.jsx)("div",null);let i;return i="table"===s.type?this.renderRow(d.a.last(e[t])):e[t].map(this.renderRow),Object(u.jsx)(g.EuiFlexGroup,{direction:"column",gutterSize:"s"},i)}}percentile_ui_Percentiles.defaultProps={name:"percentile"};const De=({value:e,onChange:t})=>Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentileHdr.numberOfSignificantValueDigits",defaultMessage:"Number of significant value digits (HDR histogram)"})," ",Object(u.jsx)(g.EuiIconTip,{position:"right",content:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentileHdr.numberOfSignificantValueDigits.hint",defaultMessage:"HDR Histogram (High Dynamic Range Histogram) is an alternative implementation that can be useful when calculating percentile ranks for latency measurements as it can be faster than the t-digest implementation with the trade-off of a larger memory footprint. Number of significant value digits parameter specifies the resolution of values for the histogram in number of significant digits"}),type:"questionInCircle"}))},Object(u.jsx)(g.EuiFieldNumber,{min:1,value:e||"",onChange:t})),ke=[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.HISTOGRAM],Re=we.KBN_FIELD_TYPES.NUMBER,Ne=Object(p.injectI18n)((e=>{const{series:t,panel:s,fields:i,intl:a}=e,l={sigma:"",...e.model},n=[{label:a.formatMessage({id:"visTypeTimeseries.stdDeviation.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:a.formatMessage({id:"visTypeTimeseries.stdDeviation.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:a.formatMessage({id:"visTypeTimeseries.stdDeviation.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"}];"table"!==s.type&&n.push({label:a.formatMessage({id:"visTypeTimeseries.stdDeviation.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"});const o=se(e.onChange,l),r=ie(o),d=re(o),c=t.override_index_pattern?t.series_index_pattern:s.index_pattern,b=Object(g.htmlIdGenerator)(),j=n.find((e=>l.mode===e.value));return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:b("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdDeviation.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:b("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:l.type,onChange:r("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdDeviation.fieldLabel",defaultMessage:"Field"}),fields:i,type:l.type,restrict:Re,indexPattern:c,value:l.field,onChange:e=>o({field:null==e?void 0:e[0]})})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:b("sigma"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdDeviation.sigmaLabel",defaultMessage:"Sigma"})},Object(u.jsx)(g.EuiFieldText,{value:l.sigma,onChange:d("sigma")}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("mode"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdDeviation.modeLabel",defaultMessage:"Mode"})},Object(u.jsx)(g.EuiComboBox,{options:n,selectedOptions:j?[j]:[],onChange:r("mode"),singleSelection:{asPlainText:!0}})))))})),Be=Object(p.injectI18n)((e=>{const{siblings:t,intl:s,fields:i,indexPattern:a}=e,l={sigma:"",...e.model},n=Object(g.htmlIdGenerator)(),o=se(e.onChange,l),r=ie(o),d=re(o),c={};if("std_deviation_bucket"===l.type){c.sigma=Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:n("sigma"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdSibling.sigmaLabel",defaultMessage:"Sigma"})},Object(u.jsx)(g.EuiFieldText,{value:l.sigma,onChange:d("sigma")})));const e=[{label:s.formatMessage({id:"visTypeTimeseries.stdSibling.modeOptions.rawLabel",defaultMessage:"Raw"}),value:"raw"},{label:s.formatMessage({id:"visTypeTimeseries.stdSibling.modeOptions.upperBoundLabel",defaultMessage:"Upper Bound"}),value:"upper"},{label:s.formatMessage({id:"visTypeTimeseries.stdSibling.modeOptions.lowerBoundLabel",defaultMessage:"Lower Bound"}),value:"lower"},{label:s.formatMessage({id:"visTypeTimeseries.stdSibling.modeOptions.boundsBandLabel",defaultMessage:"Bounds Band"}),value:"band"}],t=e.find((e=>l.mode===e.value));c.mode=Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:n("mode"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdSibling.modeLabel",defaultMessage:"Mode"})},Object(u.jsx)(g.EuiComboBox,{options:e,selectedOptions:t?[t]:[],onChange:r("mode"),singleSelection:{asPlainText:!0}})))}return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:n("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdSibling.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:n("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:l.type,onChange:r("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:n("metric"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.stdSibling.metricLabel",defaultMessage:"Metric"})},Object(u.jsx)(te,{onChange:r("field"),exclude:[L.i.PERCENTILE,L.i.TOP_HIT],metrics:t,fields:i[Object(le.c)(a)],metric:l,value:l.field}))),c.sigma,c.mode))})),ze=Object(p.injectI18n)((function(e){const{panel:t,model:s,intl:i}=e,a=se(e.onChange,s),l=ie(a),n=Object(g.htmlIdGenerator)(),{euiTheme:o}=Object(g.useEuiTheme)(),r=[{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.sumLabel",defaultMessage:"Sum"}),value:"sum"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.maxLabel",defaultMessage:"Max"}),value:"max"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.minLabel",defaultMessage:"Min"}),value:"min"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.avgLabel",defaultMessage:"Avg"}),value:"mean"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.countLabel",defaultMessage:"Series count"}),value:"count"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.overallSumLabel",defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.overallMaxLabel",defaultMessage:"Overall Max"}),value:"overall_max"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.overallMinLabel",defaultMessage:"Overall Min"}),value:"overall_min"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.overallAvgLabel",defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:i.formatMessage({id:"visTypeTimeseries.seriesAgg.functionOptions.cumulativeSumLabel",defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}],d=r.find((e=>s.function===e.value));return"table"===t.type?Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiTitle,{size:"xxxs",css:_(o)},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesAgg.seriesAggIsNotCompatibleLabel",defaultMessage:"Series Agg is not compatible with the table visualization."})))):Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:n("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesAgg.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:n("aggregation"),panelType:t.type,siblings:e.siblings,value:s.type,onChange:l("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:n("function"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesAgg.functionLabel",defaultMessage:"Function"})},Object(u.jsx)(g.EuiComboBox,{options:r,selectedOptions:d?[d]:[],onChange:l("function"),singleSelection:{asPlainText:!0}})))))}));var Ge=s(0),He=s(47);function Ve({query:e,onChange:t,isInvalid:s,indexPatterns:i,"data-test-subj":a}){const n=Object(Ge.d)(),[o,r]=Object(l.useState)([]),d=Object(c.useKibana)(),{appName:b,unifiedSearch:g,storage:p,data:j,notifications:m,http:x,docLinks:v,uiSettings:h,usageCollection:O}=d.services;return Object(l.useEffect)((()=>{!async function(){const e=[];for(const t of null!=i?i:[])if(t){if(Object(le.e)(t))e.push(t);else if(null!=t&&t.id){const{indexPattern:s}=await Object(le.b)(t,n);s&&e.push(s)}}else{const t=await n.getDefault();t&&e.push(t)}r(e)}()}),[i,n]),Object(u.jsx)(He.QueryStringInput,{appName:b,deps:{unifiedSearch:g,notifications:m,http:x,docLinks:v,uiSettings:h,data:j,dataViews:n,storage:p,usageCollection:O},query:e,onChange:t,isInvalid:s,indexPatterns:o,dataTestSubj:a})}const We=(e,t,s)=>{const i=e[Object(le.c)(t)];if(!i)return!1;const a=i.find((e=>e.name===s));return!!a&&a.type===we.KBN_FIELD_TYPES.HISTOGRAM},Ue=({model:e,onChange:t,onDelete:s,onAdd:i,disableAdd:a,disableDelete:l,enableColorPicker:n})=>Object(u.jsx)(g.EuiPanel,{paddingSize:"s",className:"tvbAggRow__multiValueRow"},Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},n&&Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{disableTrash:!0,onChange:s=>t({...e,color:(null==s?void 0:s.color)||Ae.d}),value:e.color,name:"color"})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldNumber,{value:""===e.value?"":Number(e.value),placeholder:"0",onChange:s=>t({...e,value:Object(r.get)(s,"target.value")})})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{onAdd:i,onDelete:()=>s(e),disableDelete:l,disableAdd:a,responsive:!1}))));Ue.defaultProps={model:{id:null,value:""}};const qe=e=>{const t=e.values||[],s=e.colors||[],{onChange:i,disableAdd:a,disableDelete:l,showOnlyLastRow:n,enableColorPicker:o}=e,d=({value:e,id:a,color:l})=>{t[a]=e,s[a]=l,i(t,s)},c=({id:e})=>i(t.filter(((t,s)=>e!==s)),s.filter(((t,s)=>e!==s))),b=()=>i([...t,""],[...s,Ae.d]),p=({rowModel:e,disableDeleteRow:t,disableAddRow:s})=>Object(u.jsx)(g.EuiFlexItem,{key:`percentileRankValue__item${e.id}`},Object(u.jsx)(Ue,{onAdd:b,onChange:d,onDelete:c,disableDelete:t,disableAdd:s,model:e,enableColorPicker:o}));return Object(u.jsx)(g.EuiFlexGroup,{direction:"column",gutterSize:"s"},n&&p({rowModel:{id:t.length-1,value:Object(r.last)(t)||"",color:Object(r.last)(s)||Ae.d},disableAddRow:!0,disableDeleteRow:!0}),!n&&t.map(((e,t,i)=>p({rowModel:{id:t,value:e||"",color:s[t]||Ae.d},disableAddRow:a,disableDeleteRow:l||i.length<2}))))},$e=[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.HISTOGRAM],Ke="agg_with",Ye=[we.KBN_FIELD_TYPES.DATE],Qe=Object(p.injectI18n)((e=>{var t;const{fields:s,series:i,panel:a}=e,n=Object(l.useMemo)((()=>({order:"desc",[Ke]:"noop",...e.model})),[e.model]),o=i.override_index_pattern?i.series_index_pattern:a.index_pattern,r=[L.e.TABLE,L.e.METRIC,L.e.MARKDOWN].includes(a.type)?[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.STRING,we.KBN_FIELD_TYPES.DATE]:[we.KBN_FIELD_TYPES.NUMBER],d=se(e.onChange,n),c=ie(d),b=ae(d),j=Object(le.c)(o),m=((e={},t)=>{if(s=t,i=e.type,!s.length||s.includes(i))switch(e.type){case we.KBN_FIELD_TYPES.NUMBER:return[{label:h.i18n.translate("visTypeTimeseries.topHit.aggWithOptions.averageLabel",{defaultMessage:"Avg"}),value:"avg"},{label:h.i18n.translate("visTypeTimeseries.topHit.aggWithOptions.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:h.i18n.translate("visTypeTimeseries.topHit.aggWithOptions.minLabel",{defaultMessage:"Min"}),value:"min"},{label:h.i18n.translate("visTypeTimeseries.topHit.aggWithOptions.sumLabel",{defaultMessage:"Sum"}),value:"sum"}];case we.KBN_FIELD_TYPES.STRING:case we.KBN_FIELD_TYPES.DATE:return[{label:h.i18n.translate("visTypeTimeseries.topHit.aggWithOptions.concatenate",{defaultMessage:"Concatenate"}),value:"concat"}]}var s,i;return[]})(null==s||null===(t=s[j])||void 0===t?void 0:t.find((e=>e.name===n.field)),r),x=[{label:h.i18n.translate("visTypeTimeseries.topHit.orderOptions.ascLabel",{defaultMessage:"Asc"}),value:"asc"},{label:h.i18n.translate("visTypeTimeseries.topHit.orderOptions.descLabel",{defaultMessage:"Desc"}),value:"desc"}],v=Object(g.htmlIdGenerator)(),O=m.find((e=>n[Ke]===e.value)),f=x.find((e=>n.order===e.value));return Object(l.useEffect)((()=>{var e;const t=null==m||null===(e=m[0])||void 0===e?void 0:e.value,s=n[Ke];s&&t&&s!==t&&!O&&d({[Ke]:t})}),[n,O,m,d]),Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:v("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topHit.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:v("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:n.type,onChange:c("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topHit.fieldLabel",defaultMessage:"Field"}),fields:s,type:n.type,restrict:r,indexPattern:o,value:n.field,onChange:e=>d({field:null==e?void 0:e[0]})}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:v("size"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topHit.sizeLabel",defaultMessage:"Size"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:b("size",{isClearable:!0}),value:n.size,placeholder:"1"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:v(Ke),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topHit.aggregateWithLabel",defaultMessage:"Aggregate with"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,placeholder:h.i18n.translate("visTypeTimeseries.topHit.aggregateWith.selectPlaceholder",{defaultMessage:"Select..."}),options:m,selectedOptions:O?[O]:[],onChange:c(Ke),singleSelection:{asPlainText:!0},"data-test-subj":"topHitAggregateWithComboBox"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topHit.orderByLabel",defaultMessage:"Order by"}),restrict:Ye,value:n.order_by,onChange:e=>d({order_by:null==e?void 0:e[0]}),indexPattern:o,fields:s,"data-test-subj":"topHitOrderByFieldSelect"})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:v("order"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topHit.orderLabel",defaultMessage:"Order"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,placeholder:h.i18n.translate("visTypeTimeseries.topHit.order.selectPlaceholder",{defaultMessage:"Select..."}),options:x,selectedOptions:f?[f]:[],onChange:c("order"),singleSelection:{asPlainText:!0}})))))})),Xe=[{label:h.i18n.translate("visTypeTimeseries.units.auto",{defaultMessage:"auto"}),value:""},{label:h.i18n.translate("visTypeTimeseries.units.perMillisecond",{defaultMessage:"per millisecond"}),value:"1ms"},{label:h.i18n.translate("visTypeTimeseries.units.perSecond",{defaultMessage:"per second"}),value:"1s"},{label:h.i18n.translate("visTypeTimeseries.units.perMinute",{defaultMessage:"per minute"}),value:"1m"},{label:h.i18n.translate("visTypeTimeseries.units.perHour",{defaultMessage:"per hour"}),value:"1h"},{label:h.i18n.translate("visTypeTimeseries.units.perDay",{defaultMessage:"per day"}),value:"1d"}],Ze={count:Le,avg:Le,max:Le,min:Le,sum:Le,std_deviation:Ne,sum_of_squares:Le,variance:Le,avg_bucket:Be,max_bucket:Be,min_bucket:Be,sum_bucket:Be,variance_bucket:Be,sum_of_squares_bucket:Be,std_deviation_bucket:Be,percentile:function(e){const{series:t,model:s,panel:i,fields:a}=e,n=Object(g.htmlIdGenerator)(),o=se(e.onChange,s),r=ie(o),d=ae(o),c=t.override_index_pattern?t.series_index_pattern:i.index_pattern;return Object(l.useEffect)((()=>{(e=>Array.isArray(e.percentiles))(s)||o({percentiles:[Pe({value:50})]})}),[o,s]),Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGrid,{gutterSize:"s",columns:2},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:n("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:n("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:s.type,onChange:r("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.fieldLabel",defaultMessage:"Field"}),fields:a,type:s.type,restrict:ke,indexPattern:c,value:s.field,onChange:e=>o({field:null==e?void 0:e[0]})})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentile.percents",defaultMessage:"Percents"})},Object(u.jsx)(percentile_ui_Percentiles,{onChange:o,name:"percentiles",model:s,panel:i,seriesId:t.id}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(De,{value:s.numberOfSignificantValueDigits,onChange:d("numberOfSignificantValueDigits")}))))},percentile_rank:e=>{var t;const{panel:s,fields:i,indexPattern:a}=e,l={values:[""],colors:[Ae.d],...e.model},n=Object(g.htmlIdGenerator)(),o="table"===s.type,r=se(e.onChange,l),d=ie(r),c=ae(r),b=s.series.find((t=>t.id===e.series.id))||s.series[0],j=!(s.series.length>0&&"everything"!==b.split_mode||["table","metric","markdown"].includes(s.type));return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGrid,{gutterSize:"s",columns:2},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:n("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentileRank.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:n("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:l.type,onChange:d("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentileRank.fieldLabel",defaultMessage:"Field"}),fields:i,type:l.type,restrict:$e,indexPattern:a,value:null!==(t=l.field)&&void 0!==t?t:"",onChange:e=>r({field:null==e?void 0:e[0]})})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.percentileRank.values",defaultMessage:"Values"})},Object(u.jsx)(qe,{disableAdd:o,disableDelete:o,showOnlyLastRow:o,values:l.values,colors:l.colors,onChange:(e,t)=>{r({...l,values:e,colors:t})},enableColorPicker:j}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(De,{value:l.numberOfSignificantValueDigits,onChange:c("numberOfSignificantValueDigits")}))))},cardinality:Le,value_count:Le,calculation:function(e){const t=Object(g.htmlIdGenerator)(),{siblings:s,model:i,indexPattern:a,fields:n}=e,o=se(e.onChange,i),r=ie(o),d=re(o);return Object(l.useEffect)((()=>{(e=>Array.isArray(e.variables)&&void 0!==e.script)(i)||o({variables:[pe()],script:""})}),[o,i]),Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{direction:"column",gutterSize:"l"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:t("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.calculation.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:t("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:i.type,onChange:r("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:t("variables")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.calculation.variablesLabel",defaultMessage:"Variables"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)(vars_CalculationVars,{id:t("variables"),metrics:s,indexPattern:a,fields:n,onChange:o,name:"variables",model:i,exclude:[L.i.TOP_HIT]})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:t("painless"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.calculation.painlessScriptLabel",defaultMessage:"Painless Script"}),fullWidth:!0,helpText:Object(u.jsx)("div",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.calculation.painlessScriptDescription",defaultMessage:"Variables are keys on the {params} object, i.e. {paramsName}. To access the bucket interval (in milliseconds) use {paramsInterval}.",values:{params:Object(u.jsx)(g.EuiCode,null,"params"),paramsName:Object(u.jsx)(g.EuiCode,null,"params.<name>"),paramsInterval:Object(u.jsx)(g.EuiCode,null,"params._interval")}}))},Object(u.jsx)(g.EuiTextArea,{onChange:d("script"),value:i.script,fullWidth:!0})))))},cumulative_sum:function(e){const{model:t,siblings:s,fields:i,indexPattern:a}=e,l=Object(g.htmlIdGenerator)(),n=se(e.onChange,t),o=ie(n);return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:l("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.cumulativeSum.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:l("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:t.type,onChange:o("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("metric"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.cumulativeSum.metricLabel",defaultMessage:"Metric"})},Object(u.jsx)(te,{onChange:o("field"),metrics:s,metric:t,fields:i[Object(le.c)(a)],value:t.field,exclude:[L.i.TOP_HIT]})))))},moving_average:e=>{const{siblings:t,fields:s,indexPattern:i}=e,[a,n]=Object(l.useState)({...ne,...e.model}),o=Object(l.useCallback)((t=>{e.onChange(t),n(t)}),[e]),r=[{label:h.i18n.translate("visTypeTimeseries.movingAverage.modelOptions.simpleLabel",{defaultMessage:"Simple"}),value:L.c.UNWEIGHTED},{label:h.i18n.translate("visTypeTimeseries.movingAverage.modelOptions.linearLabel",{defaultMessage:"Linear"}),value:L.c.WEIGHTED_LINEAR},{label:h.i18n.translate("visTypeTimeseries.movingAverage.modelOptions.exponentiallyWeightedLabel",{defaultMessage:"Exponentially Weighted"}),value:L.c.WEIGHTED_EXPONENTIAL},{label:h.i18n.translate("visTypeTimeseries.movingAverage.modelOptions.holtLinearLabel",{defaultMessage:"Holt-Linear"}),value:L.c.WEIGHTED_EXPONENTIAL_DOUBLE},{label:h.i18n.translate("visTypeTimeseries.movingAverage.modelOptions.holtWintersLabel",{defaultMessage:"Holt-Winters"}),value:L.c.WEIGHTED_EXPONENTIAL_TRIPLE}],d=se(o,a),c=ie(d),b=ae(d),p=Object(g.htmlIdGenerator)(),j=r.find((({value:e})=>a.model_type===e)),m=[{label:h.i18n.translate("visTypeTimeseries.movingAverage.multiplicativeOptions.true",{defaultMessage:"True"}),value:!0},{label:h.i18n.translate("visTypeTimeseries.movingAverage.multiplicativeOptions.false",{defaultMessage:"False"}),value:!1}],x=m.find((({value:e})=>a.multiplicative===e));return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:p("aggregation")},h.i18n.translate("visTypeTimeseries.movingAverage.aggregationLabel",{defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:p("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:a.type,onChange:c("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("metric"),label:h.i18n.translate("visTypeTimeseries.movingAverage.metricLabel",{defaultMessage:"Metric"})},Object(u.jsx)(te,{onChange:c("field"),metrics:t,metric:a,fields:s[Object(le.c)(i)],value:a.field,exclude:[L.i.TOP_HIT]})))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("model_type"),label:h.i18n.translate("visTypeTimeseries.movingAverage.modelLabel",{defaultMessage:"Model"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,placeholder:h.i18n.translate("visTypeTimeseries.movingAverage.model.selectPlaceholder",{defaultMessage:"Select"}),options:r,selectedOptions:j?[j]:[],onChange:c("model_type"),singleSelection:{asPlainText:!0}}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("windowSize"),label:h.i18n.translate("visTypeTimeseries.movingAverage.windowSizeLabel",{defaultMessage:"Window Size"}),helpText:oe(a)&&h.i18n.translate("visTypeTimeseries.movingAverage.windowSizeHint",{defaultMessage:"Window must always be at least twice the size of your period"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:b("window",{isClearable:!0}),value:a.window,min:1,isInvalid:!a.window})))),(a.model_type===L.c.WEIGHTED_EXPONENTIAL||a.model_type===L.c.WEIGHTED_EXPONENTIAL_DOUBLE||a.model_type===L.c.WEIGHTED_EXPONENTIAL_TRIPLE)&&Object(u.jsx)(l.Fragment,null,Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("alpha"),label:h.i18n.translate("visTypeTimeseries.movingAverage.alpha",{defaultMessage:"Alpha"})},Object(u.jsx)(g.EuiFieldNumber,{step:.1,onChange:b("alpha"),value:a.alpha}))),(a.model_type===L.c.WEIGHTED_EXPONENTIAL_DOUBLE||a.model_type===L.c.WEIGHTED_EXPONENTIAL_TRIPLE)&&Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("beta"),label:h.i18n.translate("visTypeTimeseries.movingAverage.beta",{defaultMessage:"Beta"})},Object(u.jsx)(g.EuiFieldNumber,{step:.1,onChange:b("beta"),value:a.beta}))),a.model_type===L.c.WEIGHTED_EXPONENTIAL_TRIPLE&&Object(u.jsx)(l.Fragment,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("gamma"),label:h.i18n.translate("visTypeTimeseries.movingAverage.gamma",{defaultMessage:"Gamma"})},Object(u.jsx)(g.EuiFieldNumber,{step:.1,onChange:b("gamma"),value:a.gamma}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("period"),label:h.i18n.translate("visTypeTimeseries.movingAverage.period",{defaultMessage:"Period"})},Object(u.jsx)(g.EuiFieldNumber,{step:1,onChange:b("period"),value:a.period}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:p("multiplicative"),label:h.i18n.translate("visTypeTimeseries.movingAverage.multiplicative",{defaultMessage:"Multiplicative"})},Object(u.jsx)(g.EuiComboBox,{placeholder:h.i18n.translate("visTypeTimeseries.movingAverage.multiplicative.selectPlaceholder",{defaultMessage:"Select"}),options:m,selectedOptions:x?[x]:[],onChange:c("multiplicative"),singleSelection:{asPlainText:!0}})))))))},derivative:e=>{const{siblings:t,fields:s,indexPattern:i}=e,a={unit:"",...e.model},l=se(e.onChange,a),n=ie(l),o=re(l),r=Object(g.htmlIdGenerator)();return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:r("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.derivative.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:r("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:a.type,onChange:n("type"),fullWidth:!0})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:r("metric"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.derivative.metricLabel",defaultMessage:"Metric"}),fullWidth:!0},Object(u.jsx)(te,{onChange:n("field"),metrics:t,metric:a,fields:s[Object(le.c)(i)],value:a.field,exclude:[L.i.TOP_HIT],fullWidth:!0}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:r("units"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.derivative.unitsLabel",defaultMessage:"Units (1s, 1m, etc)",description:"1s and 1m are required values and must not be translated."}),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{onChange:o("unit"),value:a.unit,fullWidth:!0})))))},series_agg:ze,serial_diff:e=>{const{siblings:t,fields:s,indexPattern:i,model:a}=e,l=se(e.onChange,a),o=ie(l),r=ae(l),d=Object(g.htmlIdGenerator)();return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:d("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.serialDiff.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:d("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:a.type,onChange:o("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:d("metric"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.serialDiff.metricLabel",defaultMessage:"Metric"})},Object(u.jsx)(te,{onChange:o("field"),metrics:t,metric:a,fields:s[Object(le.c)(i)],value:a.field,exclude:[L.i.TOP_HIT]}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:d("lag"),label:Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.serialDiff.lagLabel",defaultMessage:"Lag",description:"'Lag' refers to the parameter name of the serial diff translation https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-pipeline-serialdiff-aggregation.html. This should only be translated if there is a reasaonable word explaining what that parameter does."})," ",Object(u.jsx)(g.EuiIconTip,{position:"right",content:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.serialDiff.lagLabel.hint",defaultMessage:"The historical bucket to subtract from the current value. Must be a positive, non-zero integer"}),type:"questionInCircle"}))},Object(u.jsx)(g.EuiFieldNumber,{placeholder:1,onChange:r("lag",{isClearable:!0}),value:a.lag,min:1})))))},filter_ratio:e=>{const{series:t,fields:s,panel:i}=e,a=Object(l.useMemo)((()=>se(e.onChange,e.model)),[e.model,e.onChange]),n=ie(a),o=Object(l.useCallback)((e=>a({numerator:e})),[a]),r=Object(l.useCallback)((e=>a({denominator:e})),[a]),d=t.override_index_pattern?t.series_index_pattern:i.index_pattern,c={numerator:Object(Ge.c)().query.queryString.getDefaultQuery(),denominator:Object(Ge.c)().query.queryString.getDefaultQuery(),metric_agg:"count",...e.model},b=Object(g.htmlIdGenerator)();return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:b("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.filterRatio.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:b("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:c.type,onChange:n("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("numerator"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.filterRatio.numeratorLabel",defaultMessage:"Numerator"})},Object(u.jsx)(Ve,{query:c.numerator,onChange:o,indexPatterns:[d],"data-test-subj":"filterRatioNumeratorInput"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("denominator"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.filterRatio.denominatorLabel",defaultMessage:"Denominator"})},Object(u.jsx)(Ve,{query:c.denominator,onChange:r,indexPatterns:[d],"data-test-subj":"filterRatioDenominatorInput"})))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:b("metric")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.filterRatio.metricAggregationLabel",defaultMessage:"Metric Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:b("metric"),siblings:e.siblings,panelType:We(s,d,c.field)?"histogram":"filter_ratio",value:c.metric_agg,onChange:n("metric_agg")})),"count"!==c.metric_agg?Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.filterRatio.fieldLabel",defaultMessage:"Field"}),fields:s,type:c.metric_agg,restrict:Ie(c.metric_agg),indexPattern:d,value:c.field,onChange:e=>a({field:null==e?void 0:e[0]})})):null))},positive_only:e=>{const{siblings:t,fields:s,indexPattern:i}=e,a={unit:"",...e.model},l=Object(g.htmlIdGenerator)(),n=se(e.onChange,a),o=ie(n);return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:l("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.positiveOnly.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:l("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:a.type,onChange:o("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("metric"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.positiveOnly.metricLabel",defaultMessage:"Metric"})},Object(u.jsx)(te,{onChange:o("field"),metrics:t,metric:a,fields:s[Object(le.c)(i)],value:a.field,exclude:[L.i.TOP_HIT]})))))},static:e=>{const t=se(e.onChange,e.model),s=ie(t),i=re(t),a={numerator:"*",denominator:"*",metric_agg:"count",value:"",...e.model},l=Object(g.htmlIdGenerator)();return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:l("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.static.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:l("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:a.type,onChange:s("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("staticValue"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.static.staticValuesLabel",defaultMessage:"Static Value"})},Object(u.jsx)(g.EuiFieldNumber,{"data-test-subj":"staticValue",onChange:i("value"),value:""===a.value?"":Number(a.value),step:.1})))))},math:function(e){const{siblings:t,model:s,fields:i,indexPattern:a}=e,n=Object(g.htmlIdGenerator)(),o=se(e.onChange,s),r=ie(o),d=re(o);return Object(l.useEffect)((()=>{(e=>Array.isArray(e.variables)&&void 0!==e.script)(s)||o({variables:[pe()],script:""})}),[o,s]),Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{direction:"column",gutterSize:"l"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:n("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.math.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:n("aggregation"),siblings:e.siblings,value:s.type,panelType:e.panel.type,onChange:r("type")})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:n("variables")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.math.variablesLabel",defaultMessage:"Variables"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)(vars_CalculationVars,{id:n("variables"),metrics:t,fields:i,indexPattern:a,onChange:o,name:"variables",model:s,includeSiblings:!0})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:"mathExpressionInput",label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.math.expressionLabel",defaultMessage:"Expression"}),fullWidth:!0,helpText:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.math.expressionDescription",defaultMessage:"This field uses basic math expressions (see {link}) - Variables are keys on the {params} object, i.e. {paramsName} To access all the data use {paramsValues} for an array of the values and {paramsTimestamps} for an array of the timestamps. {paramsTimestamp} is available for the current bucket's timestamp, {paramsIndex} is available for the current bucket's index, and {paramsInterval}s available for the interval in milliseconds.",values:{link:Object(u.jsx)(g.EuiLink,{href:"https://github.com/elastic/kibana/blob/main/packages/kbn-tinymath/docs/functions.md",target:"_blank"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.math.expressionDescription.tinyMathLinkText",defaultMessage:"TinyMath"})),params:Object(u.jsx)(g.EuiCode,null,"params"),paramsName:Object(u.jsx)(g.EuiCode,null,"params.<name>"),paramsValues:Object(u.jsx)(g.EuiCode,null,"params._all.<name>.values"),paramsTimestamps:Object(u.jsx)(g.EuiCode,null,"params._all.<name>.timestamps"),paramsTimestamp:Object(u.jsx)(g.EuiCode,null,"params._timestamp"),paramsIndex:Object(u.jsx)(g.EuiCode,null,"params._index"),paramsInterval:Object(u.jsx)(g.EuiCode,null,"params._interval")}})},Object(u.jsx)(g.EuiTextArea,{"data-test-subj":"mathExpression",onChange:d("script"),fullWidth:!0,value:s.script})))))},top_hit:Qe,positive_rate:e=>{const t={unit:"",...e.model},s=se(e.onChange,t),i=ie(s),a=Object(g.htmlIdGenerator)(),l=e.series.override_index_pattern?e.series.series_index_pattern:e.panel.index_pattern,n=Xe.filter((e=>e.value===t.unit));return Object(u.jsx)(S,{disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onDelete:e.onDelete,siblings:e.siblings,dragHandleProps:e.dragHandleProps},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormLabel,{htmlFor:a("aggregation")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.positiveRate.aggregationLabel",defaultMessage:"Aggregation"})),Object(u.jsx)(g.EuiSpacer,{size:"xs"}),Object(u.jsx)($,{id:a("aggregation"),panelType:e.panel.type,siblings:e.siblings,value:t.type,onChange:i("type"),fullWidth:!0})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.postiveRate.fieldLabel",defaultMessage:"Field"}),fields:e.fields,type:t.type,restrict:[we.KBN_FIELD_TYPES.NUMBER],indexPattern:l,value:t.field,onChange:e=>s({field:null==e?void 0:e[0]}),uiRestrictions:e.uiRestrictions,fullWidth:!0})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:a("units"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.positiveRate.unitsLabel",defaultMessage:"Scale"}),fullWidth:!0},Object(u.jsx)(g.EuiComboBox,{placeholder:h.i18n.translate("visTypeTimeseries.positiveRate.unitSelectPlaceholder",{defaultMessage:"Select scale..."}),options:Xe,onChange:i("unit"),singleSelection:{asPlainText:!0},selectedOptions:n})))),Object(u.jsx)(g.EuiSpacer,{size:"s"}),Object(u.jsx)(g.EuiText,{size:"xs",color:"subdued"},Object(u.jsx)("p",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.positiveRate.helpText",defaultMessage:"This aggregation should only be applied to {link}, it is a shortcut for applying max, derivative and positive only to a field.",values:{link:Object(u.jsx)(g.EuiLink,{href:"https://en.wikipedia.org/wiki/Monotonic_function",target:"_BLANK"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.positiveRate.helpTextLink",defaultMessage:"monotonically increasing numbers"}))}}))))}},Je=e=>t=>{const{euiTheme:s}=Object(g.useEuiTheme)();return Object(u.jsx)(S,{disableDelete:t.disableDelete,model:t.model,onAdd:t.onAdd,onDelete:t.onDelete,siblings:t.siblings,dragHandleProps:t.dragHandleProps},Object(u.jsx)(g.EuiTitle,{css:_(s),size:"xxxs","data-test-subj":"invalid_agg"},Object(u.jsx)("span",null,e)))},et=()=>({id:Object(O.v4)(),type:K.METRIC_TYPES.COUNT}),tt=(e,t,s)=>{if((null==e?void 0:e.type)===L.i.TOP_HIT){var i;const a=null===(i=t[Object(le.c)(s)])||void 0===i?void 0:i.find((({name:t})=>t===(null==e?void 0:e.field)));return(null==a?void 0:a.type)===we.KBN_FIELD_TYPES.NUMBER}return!0};var st=s(78);const it=e=>[L.b.NUMBER,L.b.BYTES,L.b.PERCENT,L.b.DEFAULT].includes(e)?e:e&&Object(st.e)(e)?L.b.DURATION:L.b.CUSTOM;function at(e){const{model:t,uiRestrictions:s,series:i,name:a,onModelChange:n,fields:o,siblings:r}=e,d=t.type;let c=Ze[d];c?R(t.type,s)||(c=Je(Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.agg.aggIsUnsupportedForPanelConfigDescription",defaultMessage:"The {modelType} aggregation is not supported for existing panel configuration.",values:{modelType:Object(u.jsx)(g.EuiCode,null,e.model.type)}}))):c=Je(Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.agg.aggIsNotSupportedDescription",defaultMessage:"The {modelType} aggregation is no longer supported.",values:{modelType:Object(u.jsx)(g.EuiCode,null,e.model.type)}}));const b={cursor:"default",...e.style},j=e.series.override_index_pattern?e.series.series_index_pattern:e.panel.index_pattern,m=e.panel.use_kibana_indexes||""===j,x=Object(l.useMemo)((()=>((e,t)=>s=>{1!==t.length||Object(z.f)(s)?ue.call(null,e,s):be.call(null,e,(()=>{const e=et();return e.type=s.type,["calculation","series_agg"].includes(s.type)||(e.field=s.id),e}))})({name:a,model:i,onChange:n},r)),[a,n,r,i]);return Object(l.useEffect)((()=>{var e;if((null===(e=r[r.length-1])||void 0===e?void 0:e.id)===t.id){const e=it(i.formatter),s=tt(t,o,j);![L.b.DEFAULT,L.b.CUSTOM].includes(e)&&!s&&n({formatter:L.b.DEFAULT}),e!==L.b.DEFAULT||m||n({formatter:s?L.b.NUMBER:""})}}),[j,t,n,o,i.formatter,m,r]),Object(u.jsx)("div",{className:e.className,style:b},Object(u.jsx)(c,{fields:e.fields,disableDelete:e.disableDelete,model:e.model,onAdd:e.onAdd,onChange:x,onDelete:e.onDelete,panel:e.panel,series:e.series,siblings:e.siblings,indexPattern:j,uiRestrictions:e.uiRestrictions,dragHandleProps:e.dragHandleProps}))}const lt="aggs_dnd";class aggs_Aggs extends l.PureComponent{render(){const{panel:e,model:t,fields:s,name:i,uiRestrictions:a,onChange:l}=this.props,n=t.metrics;return Object(u.jsx)(g.EuiDroppable,{droppableId:`${lt}:${t.id}`,type:"MICRO",spacing:"s"},n.map(((o,r)=>Object(u.jsx)(g.EuiDraggable,{spacing:"s",key:o.id,index:r,customDragHandle:!0,draggableId:`${lt}:${t.id}:${o.id}`},(r=>Object(u.jsx)(at,{key:o.id,disableDelete:n.length<2,fields:s,name:i,model:o,onAdd:()=>be(this.props,et),onModelChange:l,onDelete:()=>ce(this.props,o),panel:e,series:t,siblings:n,uiRestrictions:a,dragHandleProps:r.dragHandleProps}))))))}}const nt="2",ot="0,0.[000]",rt=h.i18n.translate("visTypeTimeseries.dataFormatPicker.defaultLabel",{defaultMessage:"Default"}),dt=Object(g.htmlIdGenerator)(),ut=({formatterValue:e,changeModelFormatter:t,shouldIncludeDefaultOption:s,shouldIncludeNumberOptions:i})=>{const a=Object(l.useMemo)((()=>((e,t)=>{const s=[];return e&&s.push({value:L.b.DEFAULT,inputDisplay:rt,dropdownDisplay:Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)("span",null,rt),Object(u.jsx)(g.EuiText,{size:"s",color:"subdued"},Object(u.jsx)("p",null,h.i18n.translate("visTypeTimeseries.dataFormatPicker.defaultLabelDescription",{defaultMessage:"Applies common formatting"})))),"data-test-subj":`tsvbDataFormatPicker-${L.b.DEFAULT}`}),t&&s.push({value:L.b.NUMBER,inputDisplay:h.i18n.translate("visTypeTimeseries.dataFormatPicker.numberLabel",{defaultMessage:"Number"}),"data-test-subj":`tsvbDataFormatPicker-${L.b.NUMBER}`},{value:L.b.BYTES,inputDisplay:h.i18n.translate("visTypeTimeseries.dataFormatPicker.bytesLabel",{defaultMessage:"Bytes"}),"data-test-subj":`tsvbDataFormatPicker-${L.b.BYTES}`},{value:L.b.PERCENT,inputDisplay:h.i18n.translate("visTypeTimeseries.dataFormatPicker.percentLabel",{defaultMessage:"Percent"}),"data-test-subj":`tsvbDataFormatPicker-${L.b.PERCENT}`},{value:L.b.DURATION,inputDisplay:h.i18n.translate("visTypeTimeseries.dataFormatPicker.durationLabel",{defaultMessage:"Duration"}),"data-test-subj":`tsvbDataFormatPicker-${L.b.DURATION}`}),[...s,{value:L.b.CUSTOM,inputDisplay:h.i18n.translate("visTypeTimeseries.dataFormatPicker.customLabel",{defaultMessage:"Custom"}),"data-test-subj":`tsvbDataFormatPicker-${L.b.CUSTOM}`}]})(s,i)),[s,i]),[o,r]=Object(l.useState)(it(e)),[d,c]=Object(l.useState)(o===L.b.CUSTOM?e:""),[b,j]=Object(l.useState)(Object(st.c)(o===L.b.DURATION?e:"ms,ms,"));Object(l.useEffect)((()=>{if(!a.find((({value:e})=>e===o))){const[{value:e}]=a;r(e),t(e)}}),[a,o,t]);const m=Object(l.useCallback)((e=>{if(r(e),e===L.b.DURATION){const{from:e,to:s,decimals:i}=b;t(`${e},${s},${i}`)}else e===L.b.CUSTOM?t(d):t(e)}),[t,d,b]),x=Object(l.useCallback)((e=>{const s=e.target.value;t(s),c(s)}),[t]),v=Object(l.useCallback)(((e,s)=>{const i={...b,[e]:s};j(i);const{from:a,to:l,decimals:n}=i;t(`${a},${l},${n}`)}),[t,b]),O=Object(l.useCallback)((e=>([{value:t}])=>v(e,t)),[v]),f=Object(l.useCallback)((e=>v("decimals",e.target.value)),[v]);let T,E;if(o===L.b.DURATION){const{from:e,to:t,decimals:s=nt}=b,i=st.a.find((({value:t})=>t===e)),a=st.b.find((({value:e})=>e===t));T=Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:dt("from"),label:h.i18n.translate("visTypeTimeseries.dataFormatPicker.fromLabel",{defaultMessage:"From"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:st.a,selectedOptions:i?[i]:[],onChange:O("from"),singleSelection:{asPlainText:!0},"data-test-subj":"dataFormatPickerDurationFrom"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:dt("to"),label:h.i18n.translate("visTypeTimeseries.dataFormatPicker.toLabel",{defaultMessage:"To"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:st.b,selectedOptions:a?[a]:[],onChange:O("to"),singleSelection:{asPlainText:!0},"data-test-subj":"dataFormatPickerDurationTo"}))),"humanize"!==(null==a?void 0:a.value)&&Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:dt("decimal"),label:h.i18n.translate("visTypeTimeseries.dataFormatPicker.decimalPlacesLabel",{defaultMessage:"Decimal places"})},Object(u.jsx)(g.EuiFieldText,{defaultValue:s,placeholder:nt,onChange:f,"data-test-subj":"dataFormatPickerDurationDecimal"}))))}return o===L.b.CUSTOM&&i&&(E=Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.dataFormatPicker.formatPatternLabel",defaultMessage:"Numeral.js format pattern (Default: {defaultPattern})",values:{defaultPattern:Object(u.jsx)(g.EuiCode,null,ot)}}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(g.EuiLink,{target:"_blank",href:"http://numeraljs.com/#format"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.dataFormatPicker.formatPatternHelpText",defaultMessage:"Documentation"})))},Object(u.jsx)(g.EuiFieldText,{placeholder:ot,value:d,onChange:x})))),Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.defaultDataFormatterLabel",{defaultMessage:"Data formatter"}),fullWidth:!0},Object(u.jsx)(g.EuiSuperSelect,{options:a,valueOfSelected:o,onChange:m,"data-test-subj":"tsvbDataFormatPicker",fullWidth:!0,hasDividers:!0}))),o===L.b.DURATION&&T,o===L.b.CUSTOM&&E)};function ct({name:e,value:t,disabled:s,"data-test-subj":i=e,onChange:a}){const n=Object(l.useCallback)((t=>()=>a({[e]:t})),[a,e]),o=Object(g.htmlIdGenerator)(),r=o(e);return Object(u.jsx)("div",null,Object(u.jsx)(g.EuiRadio,{id:o("yes"),"data-test-subj":`${i}-yes`,label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.yesButtonLabel",defaultMessage:"Yes",description:"The 'yes' in a yes/no answer choice."}),className:"eui-displayInlineBlock",name:r,checked:Boolean(t),value:"yes",onChange:n(1),disabled:s}),"â€ƒ",Object(u.jsx)(g.EuiRadio,{id:o("no"),"data-test-subj":`${i}-no`,label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.noButtonLabel",defaultMessage:"No",description:"The 'no' in a yes/no answer choice."}),className:"eui-displayInlineBlock",name:r,checked:!Boolean(t),value:"no",onChange:n(0),disabled:s}))}const bt=h.i18n.translate("visTypeTimeseries.indexPatternSelect.switchModePopover.allowStringIndices",{defaultMessage:"Allow string indices in TSVB"}),gt=({onModeChange:e,useKibanaIndices:t})=>{const[s,i]=Object(l.useState)(!1),a=Object(l.useCallback)((()=>i(!1)),[]),n=Object(l.useCallback)((()=>i((e=>!e))),[]),o=Object(l.useCallback)((()=>{e(!t)}),[e,t]),{application:r}=Object(Ge.b)(),d=r.capabilities.advancedSettings.save,c=Object(l.useCallback)((()=>r.navigateToApp("management",{path:`/kibana/settings?query=${Ae.e.ALLOW_STRING_INDICES}`})),[r]),b=Object(Ge.f)().get(Ae.e.ALLOW_STRING_INDICES),j=t&&!b;let m;return b||(m=Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPatternSelect.switchModePopover.enableAllowStringIndices",defaultMessage:"To query Elasticsearch indices, you must enable the {allowStringIndices} setting.",values:{allowStringIndices:d?Object(u.jsx)(g.EuiLink,{color:"accent",onClick:c},bt):Object(u.jsx)("strong",null,bt)}})),Object(u.jsx)(g.EuiPopover,{button:Object(u.jsx)(g.EuiButtonIcon,{iconType:"gear","aria-label":h.i18n.translate("visTypeTimeseries.indexPatternSelect.switchModePopover.areaLabel",{defaultMessage:"Configure data view selection mode"}),onClick:n,"data-test-subj":"switchIndexPatternSelectionModePopoverButton"}),isOpen:s,closePopover:a,style:{height:"auto"}},Object(u.jsx)("div",{style:{width:"360px"},"data-test-subj":"switchIndexPatternSelectionModePopoverContent"},Object(u.jsx)(g.EuiPopoverTitle,null,h.i18n.translate("visTypeTimeseries.indexPatternSelect.switchModePopover.title",{defaultMessage:"Data view mode"})),Object(u.jsx)(g.EuiText,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPatternSelect.switchModePopover.text",defaultMessage:"A data view groups and retrieves data from Elasticsearch. Disable this mode to directly query Elasticsearch indices instead. {allowStringIndicesLabel}",values:{allowStringIndicesLabel:m}})),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiSwitch,{checked:t,label:h.i18n.translate("visTypeTimeseries.indexPatternSelect.switchModePopover.useKibanaIndices",{defaultMessage:"Use Kibana data views"}),onChange:o,disabled:j,"data-test-subj":"switchIndexPatternSelectionMode"})))},pt=h.i18n.translate("visTypeTimeseries.indexPatternSelect.updateIndex",{defaultMessage:"Update visualization with entered data view"}),jt=({fetchedIndex:e,onIndexChange:t,disabled:s,placeholder:i,onModeChange:a,allowSwitchMode:n,"data-test-subj":o})=>{const[r,d]=Object(l.useState)(),{indexPatternString:c}=e,b=Object(l.useCallback)((e=>{d(e.target.value)}),[]);Object(l.useEffect)((()=>{void 0===r&&d(null!=c?c:"")}),[c,r]);const p=Object(l.useCallback)((()=>{(null!=r?r:"")!==(null!=c?c:"")&&t(r)}),[t,r,c]),j=[Object(u.jsx)(g.EuiButtonIcon,{"aria-label":pt,iconType:"play",onClick:p,disabled:r===c})];return n&&j.push(Object(u.jsx)(gt,{onModeChange:a,fetchedIndex:e,useKibanaIndices:!1})),Object(u.jsx)(g.EuiFieldText,{disabled:s,onChange:b,value:null!=r?r:"",placeholder:i,"data-test-subj":o,append:j})},mt=({fetchedIndex:e,onIndexChange:t,onModeChange:s,disabled:i,placeholder:a,allowSwitchMode:n,"data-test-subj":o})=>{const[r,d]=Object(l.useState)([]),[c,b]=Object(l.useState)([]),p=Object(l.useCallback)((([e])=>{t(e?{id:e.id}:"")}),[t]);Object(l.useEffect)((()=>{let t=[];const{indexPattern:s,indexPatternString:i}=e;(s||i)&&(t=s?[{id:s.id,label:s.getName()}]:[{label:null!=i?i:""}]),b(t)}),[e]),Object(l.useEffect)((()=>{!async function(){d(await Object(Ge.d)().getIdsWithTitle())}()}),[]);const j=Boolean(e.missedIndex);return Object(u.jsx)(g.EuiComboBox,I()({singleSelection:{asPlainText:!0},isInvalid:j,onChange:p,options:(m=r,m.map((({name:e,title:t,id:s})=>({label:e||t,id:s})))),selectedOptions:c,isDisabled:i,placeholder:j?h.i18n.translate("visTypeTimeseries.indexPatternSelect.noDataView",{defaultMessage:"Data view not found"}):a,"data-test-subj":o},n&&{append:Object(u.jsx)(gt,{onModeChange:s,fetchedIndex:e,useKibanaIndices:!0})}));var m};var xt=s(19);const vt=Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPatternSelect.queryAllIndicesText",defaultMessage:"To query all indices, use {asterisk}.",values:{asterisk:Object(u.jsx)("strong",null,"*")}}),ht=e=>Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPatternSelect.defaultDataViewText",defaultMessage:"Using the default data view. {queryAllIndicesHelpText}",values:{queryAllIndicesHelpText:e?"":vt}}),Ot=h.i18n.translate("visTypeTimeseries.indexPatternSelect.label",{defaultMessage:"Data view"}),ft=({indexPatternName:e,onChange:t,disabled:s,fetchedIndex:i,allowIndexSwitchingMode:a})=>{var n,o;const r=Object(g.htmlIdGenerator)(),d=Object(l.useContext)(v),c=Boolean(null==d?void 0:d[Ae.f]),b=c?mt:jt,j=Object(l.useCallback)((s=>{t({[e]:s})}),[e,t]),m=Object(l.useCallback)(((s,i)=>{var a;t({[Ae.f]:s,[e]:null!=i&&null!==(a=i.indexPattern)&&void 0!==a&&a.id?{id:i.indexPattern.id}:""})}),[t,e]),x=Object(l.useCallback)((()=>{var e;Object(Ge.b)().application.navigateToApp("management",{path:`/kibana/indexPatterns/create?name=${null!==(e=i.indexPatternString)&&void 0!==e?e:""}`})}),[i]);return i?Object(u.jsx)(g.EuiFormRow,{id:r("indexPattern"),label:Ot,helpText:i.defaultIndex&&ht(c),isInvalid:(h=i,!(h&&!h.missedIndex)),error:i.missedIndex?Object(xt.d)(i.missedIndex):void 0,labelAppend:c||!i.indexPatternString||i.indexPattern?null:Object(u.jsx)(g.EuiLink,{onClick:x},Object(u.jsx)(g.EuiText,{size:"xs"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPatternSelect.createDataViewText",defaultMessage:"Create data view"})))},Object(u.jsx)(b,{fetchedIndex:i,disabled:s,allowSwitchMode:a,onIndexChange:j,onModeChange:m,placeholder:null!==(n=null===(o=i.defaultIndex)||void 0===o?void 0:o.getName())&&void 0!==n?n:"","data-test-subj":"metricsIndexPatternInput"})):null;var h};s(112);const Tt=({isIndicatorDisplayed:e,toggleIndicatorDisplay:t})=>{const[s,i]=Object(l.useState)(!1),a=Object(l.useCallback)((()=>i((e=>!e))),[]),n=Object(l.useCallback)((()=>i(!1)),[]);return Object(u.jsx)(g.EuiPopover,{className:"tvbLastValueModePopover",button:Object(u.jsx)(g.EuiButtonIcon,{iconType:"gear",onClick:a,"aria-label":h.i18n.translate("visTypeTimeseries.lastValueModePopover.gearButton",{defaultMessage:"Change last value indicator display option"})}),isOpen:s,closePopover:n},Object(u.jsx)("div",{className:"tvbLastValueModePopoverBody"},Object(u.jsx)(g.EuiPopoverTitle,null,h.i18n.translate("visTypeTimeseries.lastValueModePopover.title",{defaultMessage:"Last value options"})),Object(u.jsx)(g.EuiSwitch,{checked:e,label:h.i18n.translate("visTypeTimeseries.lastValueModePopover.switch",{defaultMessage:"Show label when using Last value mode"}),onChange:t})))};var Et=s(76);const yt=[we.KBN_FIELD_TYPES.DATE],Mt="hide_last_value_indicator",Ft=Object(g.htmlIdGenerator)(),_t=(e,t)=>!t&&e[L.g]===L.f.ENTIRE_TIME_RANGE,Ct=({fields:e,prefix:t,onChange:s,disabled:i,model:a,allowLevelOfDetail:o,allowIndexSwitchingMode:d,baseIndexPattern:c})=>{var b,j,O;const f=Object(Ge.f)(),T=`${t}time_field`,E=`${t}index_pattern`,y=`${t}interval`,M=`${t}max_bars`,F=`${t}drop_last_bucket`,_=Object(l.useContext)(m),C=Object(l.useContext)(v),S=Object(r.get)(Object(l.useContext)(x),"uiRestrictions"),w=f.get(K.UI_SETTINGS.HISTOGRAM_MAX_BARS),[A,P]=Object(l.useState)(null),D=C.type===L.e.TIMESERIES,k=Object(l.useCallback)((({target:e})=>{s({[M]:Math.max(1,e.value)})}),[s,M]),R=ie(s),N=re(s),z=[{label:h.i18n.translate("visTypeTimeseries.indexPattern.timeRange.entireTimeRange",{defaultMessage:"Entire time range"}),value:L.f.ENTIRE_TIME_RANGE,disabled:!B(L.f.ENTIRE_TIME_RANGE,S)},{label:h.i18n.translate("visTypeTimeseries.indexPattern.timeRange.lastValue",{defaultMessage:"Last value"}),value:L.f.LAST_VALUE,disabled:!B(L.f.LAST_VALUE,S)}],G={[E]:"",[y]:Ae.a,[F]:0,[M]:f.get(K.UI_SETTINGS.HISTOGRAM_BAR_TARGET),[L.g]:z[0].value,...a},H=G[E],V=(W=G[y],Object(Et.d)(W)||Object(Et.c)(W)?{isValid:!0}:Object(Et.e)(W));var W;const U=z.find((({value:e})=>G[L.g]===e)),q=!i&&U&&!B(U.value,S);Object(l.useEffect)((()=>{_(y,V.isValid)}),[y,V.isValid,_]),Object(l.useEffect)((()=>{!async function(){const e=Object(Ge.d)();let t={indexPattern:void 0,indexPatternString:void 0};const s=H||c;try{t=s?await Object(le.b)(s,e,{fetchKibanaIndexForStringIndexes:!0}):{...t,defaultIndex:await e.getDefault()}}catch{Object(le.d)(H)&&(t.missedIndex=H.id)}P(t)}()}),[H,c]);const $=Object(l.useCallback)((()=>s({[Mt]:!G.hide_last_value_indicator})),[G.hide_last_value_indicator,s]);return Object(u.jsx)("div",{className:"index-pattern"},!D&&Object(u.jsx)(g.EuiFlexGroup,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:Ft("timeRange"),label:Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPattern.timeRange.label",defaultMessage:"Data timerange mode"})," ",Object(u.jsx)(g.EuiIconTip,{position:"right",content:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPattern.timeRange.hint",defaultMessage:'This setting controls the timespan used for matching documents. "Entire timerange" will match all the documents selected in the timepicker. "Last value" will match only the documents for the specified interval from the end of the timerange.'}),type:"questionInCircle"})),isInvalid:q,error:h.i18n.translate("visTypeTimeseries.indexPattern.timeRange.error",{defaultMessage:'You cannot use "{mode}" with the current index type.',values:{mode:null==U?void 0:U.label}})},Object(u.jsx)(g.EuiComboBox,I()({"data-test-subj":"dataTimeRangeMode",isClearable:!1,isInvalid:q,placeholder:h.i18n.translate("visTypeTimeseries.indexPattern.timeRange.selectTimeRange",{defaultMessage:"Select"}),options:z,error:h.i18n.translate("visTypeTimeseries.indexPattern.timeRange.entireTimeRange",{defaultMessage:"Entire time range"}),selectedOptions:U?[U]:[],onChange:R(L.g),singleSelection:{asPlainText:!0},isDisabled:i},!_t(G,D)&&{append:Object(u.jsx)(Tt,{isIndicatorDisplayed:!G.hide_last_value_indicator,toggleIndicatorDisplay:$})}))))),Object(u.jsx)(g.EuiFlexGroup,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(ft,{fetchedIndex:A,indexPatternName:E,onChange:s,disabled:i,allowIndexSwitchingMode:d})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:h.i18n.translate("visTypeTimeseries.indexPattern.timeFieldLabel",{defaultMessage:"Time field"}),restrict:yt,value:G[T],disabled:i,onChange:e=>s({[T]:null==e?void 0:e[0]}),indexPattern:G[E],fields:e,placeholder:null!==(b=null==A||null===(j=A.indexPattern)||void 0===j?void 0:j.timeFieldName)&&void 0!==b?b:null==A||null===(O=A.defaultIndex)||void 0===O?void 0:O.timeFieldName})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{isInvalid:!V.isValid,error:V.errorMessage,id:Ft("interval"),label:h.i18n.translate("visTypeTimeseries.indexPattern.intervalLabel",{defaultMessage:"Interval"}),helpText:h.i18n.translate("visTypeTimeseries.indexPattern.intervalHelpText",{defaultMessage:"Examples: auto, 1m, 1d, 7d, 1y, >=1m",description:"auto, 1m, 1d, 7d, 1y, >=1m are required values and must not be translated."})},Object(u.jsx)(g.EuiFieldText,{"data-test-subj":"metricsIndexPatternInterval",isInvalid:!V.isValid,disabled:i||_t(G,D),onChange:N(y,Ae.a),value:G[y],placeholder:Ae.a}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:Ft("dropLastBucket"),label:h.i18n.translate("visTypeTimeseries.indexPattern.dropLastBucketLabel",{defaultMessage:"Drop last bucket?"})},Object(u.jsx)(ct,{"data-test-subj":"metricsDropLastBucket",value:G[F],name:F,onChange:s,disabled:i||_t(G,D)})))),o&&Object(u.jsx)(g.EuiFlexGroup,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:Ft("detailLevel"),label:Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPattern.detailLevel",defaultMessage:"Level of detail"})," ",Object(u.jsx)(g.EuiIconTip,{position:"right",content:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPattern.detailLevelHelpText",defaultMessage:"Controls the auto and gte intervals based on the time range. The default interval is affected by the advanced settings {histogramTargetBars} and {histogramMaxBars}.",values:{histogramTargetBars:K.UI_SETTINGS.HISTOGRAM_MAX_BARS,histogramMaxBars:K.UI_SETTINGS.HISTOGRAM_BAR_TARGET}}),type:"questionInCircle"}))},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPattern.Ñoarse",defaultMessage:"Coarse"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiRange,{id:Object(g.htmlIdGenerator)()(),value:G[M],onChange:k,disabled:i||_t(G,D)||!(Object(Et.c)(G[y])||Object(Et.d)(G[y])),min:0,max:w,step:w/10,"aria-label":h.i18n.translate("visTypeTimeseries.indexPattern.detailLevelAriaLabel",{defaultMessage:"Level of detail"})})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.indexPattern.finest",defaultMessage:"Finest"}))))))))};Ct.defaultProps={prefix:"",disabled:!1};var St=s(53);function wt({panel:e,model:t,onChange:s,indexPatternForQuery:i}){const a=Object(g.htmlIdGenerator)(),l=Object(u.jsx)(ct,{disabled:e.ignore_global_filter,value:t.ignore_global_filter,name:"ignore_global_filter",onChange:s});return Object(u.jsx)(g.EuiFlexGroup,{margin:"s"},Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiFormRow,{id:a("filterInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.filterLabel",defaultMessage:"Filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:t.filter&&t.filter.language?t.filter.language:Object(St.a)(),query:t.filter&&t.filter.query?t.filter.query:""},onChange:e=>s({filter:e}),indexPatterns:[i],"data-test-subj":"seriesConfigQueryBar"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:a("seriesIgnoreGlobalFilter"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.ignoreGlobalFilterLabel",defaultMessage:"Ignore global filter?"}),fullWidth:!0},e.ignore_global_filter?Object(u.jsx)(g.EuiToolTip,{content:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.ignoreGlobalFilterDisabledTooltip",defaultMessage:"This is disabled because the global filters are being ignored in the panel options."})},l):l)))}var It=s(67),Lt=s(68);function At({activePalette:e,palettes:t,setPalette:s,color:i}){const a=Object(Lt.a)(i),l=function(e){let t=e||"default";return"complimentary"===t&&(t="complementary"),t}(null==e?void 0:e.name);return Object(u.jsx)(g.EuiColorPalettePicker,{fullWidth:!0,"data-test-subj":"visEditorPalettePicker",compressed:!0,palettes:[...t.getAll().filter((({internal:e})=>!e)).map((({id:e,title:t,getCategoricalColors:s})=>({value:e,title:t,type:"fixed",palette:s(10)}))),{value:L.d.GRADIENT,title:h.i18n.translate("visTypeTimeseries.timeSeries.gradientLabel",{defaultMessage:"Gradient"}),type:"fixed",palette:t.get("custom").getCategoricalColors(10,{colors:[i,a],gradient:!0})},{value:L.d.RAINBOW,title:h.i18n.translate("visTypeTimeseries.timeSeries.rainbowLabel",{defaultMessage:"Rainbow"}),type:"fixed",palette:t.get("custom").getCategoricalColors(10,{colors:It.a.slice(0,10),gradient:!1})}],onChange:e=>{e===L.d.RAINBOW?s({type:"palette",name:L.d.RAINBOW,params:{colors:It.a,gradient:!1}}):e===L.d.GRADIENT?s({type:"palette",name:L.d.GRADIENT,params:{colors:[i,a],gradient:!0}}):s({type:"palette",name:e})},valueOfSelected:l,selectionDisplay:"palette"})}const Pt=e=>e<2;var Dt=s(58);const kt=Object(p.injectI18n)((function(e){var t;const s=ie(e.onChange),i=re(e.onChange),a=ae(e.onChange),n={value_template:"{{value}}",offset_time:"",axis_min:void 0,axis_max:void 0,stacked:Dt.c.NONE,steps:0,...e.model},o=Object(g.htmlIdGenerator)(),{euiTheme:d}=Object(g.useEuiTheme)(),{intl:c}=e,b=[{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.noneLabel",defaultMessage:"None"}),value:Dt.c.NONE},{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.stackedLabel",defaultMessage:"Stacked"}),value:Dt.c.STACKED},{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.stackedWithinSeriesLabel",defaultMessage:"Stacked within series"}),value:Dt.c.STACKED_WITHIN_SERIES},{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.percentLabel",defaultMessage:"Percent"}),value:Dt.c.PERCENT,disabled:Pt(e.seriesQuantity[n.id])}],j=b.find((e=>n.stacked===e.value)),m=[{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.rightLabel",defaultMessage:"Right"}),value:"right"},{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.leftLabel",defaultMessage:"Left"}),value:"left"}],x=m.find((e=>n.axis_position===e.value)),v=[{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.barLabel",defaultMessage:"Bar"}),value:"bar"},{label:c.formatMessage({id:"visTypeTimeseries.timeSeries.lineLabel",defaultMessage:"Line"}),value:"line"}],O=v.find((e=>n.chart_type===e.value)),{palettes:f}=Object(Ge.a)(),[T,E]=Object(l.useState)(null);let y;Object(l.useEffect)((()=>{(async()=>{const e=await f.getPalettes();E(e)})()}),[f]),"line"===n.chart_type&&(y=Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s",responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("chartType"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartLine.chartTypeLabel",defaultMessage:"Chart type"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:v,selectedOptions:O?[O]:[],onChange:s("chart_type"),singleSelection:{asPlainText:!0},"data-test-subj":"seriesChartTypeComboBox"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("stacked"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartLine.stackedLabel",defaultMessage:"Stacked"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:b,selectedOptions:j?[j]:[],onChange:s("stacked"),singleSelection:{asPlainText:!0},"data-test-subj":"seriesStackedComboBox"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("fill"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartLine.fillLabel",defaultMessage:"Fill (0 to 1)"})},Object(u.jsx)(g.EuiFieldNumber,{step:.1,onChange:i("fill"),value:Number(n.fill)}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("lineWidth"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartLine.lineWidthLabel",defaultMessage:"Line width"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:i("line_width"),value:Number(n.line_width)}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("pointSize"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartLine.pointSizeLabel",defaultMessage:"Point size"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:i("point_size"),value:Number(n.point_size)}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.timeSeries.chartLine.stepsLabel",{defaultMessage:"Steps"})},Object(u.jsx)(ct,{value:n.steps,name:"steps",onChange:e.onChange}))))),"bar"===n.chart_type&&(y=Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s",responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("chartType"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartBar.chartTypeLabel",defaultMessage:"Chart type"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:v,selectedOptions:O?[O]:[],onChange:s("chart_type"),singleSelection:{asPlainText:!0},"data-test-subj":"seriesChartTypeComboBox"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("stacked"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartBar.stackedLabel",defaultMessage:"Stacked"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:b,selectedOptions:j?[j]:[],onChange:s("stacked"),singleSelection:{asPlainText:!0},"data-test-subj":"seriesStackedComboBox"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("fill"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartBar.fillLabel",defaultMessage:"Fill (0 to 1)"})},Object(u.jsx)(g.EuiFieldNumber,{step:.1,onChange:i("fill"),value:Number(n.fill)}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("lineWidth"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.chartBar.lineWidthLabel",defaultMessage:"Line width"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:i("line_width"),value:Number(n.line_width)})))));const F=!n.separate_axis,_=e.model.override_index_pattern?e.model.series_index_pattern:e.indexPatternForQuery,C=Object(l.useCallback)((t=>e.onChange({formatter:t})),[e]),S=Object(l.useMemo)((()=>tt(Object(r.last)(n.metrics),e.fields,_)),[n.metrics,e.fields,_]),w=e.panel.use_kibana_indexes||""===_,{indexPatternForQuery:A,onChange:P}=e,D=Object(l.useCallback)((e=>{const t={...e};e.override_index_pattern&&!n.series_index_pattern&&(t.series_index_pattern=A),P(t)}),[n.series_index_pattern,A,P]),k=null!==(t=n.palette)&&void 0!==t?t:{type:"palette",name:"default"},R={...k,name:"kibana"===n.split_color_mode?"kibana_palette":n.split_color_mode||k.name};return Object(u.jsx)("div",{css:M(d)},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(ut,{formatterValue:n.formatter,changeModelFormatter:C,shouldIncludeDefaultOption:w,shouldIncludeNumberOptions:S}),Object(u.jsx)(g.EuiFlexItem,{grow:3},Object(u.jsx)(g.EuiFormRow,{id:o("template"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.templateLabel",defaultMessage:"Template"}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:Object(u.jsx)(g.EuiCode,null,"{{value}}/s")}})),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{onChange:i("value_template"),value:n.value_template,disabled:n.formatter===L.b.DEFAULT,fullWidth:!0,"data-test-subj":"tsvb_series_value"})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(wt,{model:n,onChange:e.onChange,panel:e.panel,indexPatternForQuery:_}),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),y,Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiFormRow,{id:o("offset"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w, 1d are required values and must not be translated."})},Object(u.jsx)(g.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:i("offset_time"),value:n.offset_time}))),Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.timeSeries.hideInLegendLabel",{defaultMessage:"Hide in legend"})},Object(u.jsx)(ct,{value:n.hide_in_legend,name:"hide_in_legend",onChange:e.onChange}))),T&&Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiFormRow,{id:o("splitColor"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.splitColorThemeLabel",defaultMessage:"Split color theme"})},Object(u.jsx)(At,{palettes:T,activePalette:R,setPalette:t=>{e.onChange({split_color_mode:null,palette:t})},color:n.color})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.timeSeries.separateAxisLabel",{defaultMessage:"Separate axis?"})},Object(u.jsx)(ct,{value:n.separate_axis,name:"separate_axis",onChange:e.onChange}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("axisMin"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.axisMinLabel",defaultMessage:"Axis min"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:a("axis_min",{isClearable:!0}),value:n.axis_min,disabled:F}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("axisMax"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.axisMaxLabel",defaultMessage:"Axis max"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:a("axis_max",{isClearable:!0}),value:n.axis_max,disabled:F}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("axisPos"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.axisPositionLabel",defaultMessage:"Axis position"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,isDisabled:F,options:m,selectedOptions:x?[x]:[],onChange:s("axis_position"),singleSelection:{asPlainText:!0}})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s",responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.timeSeries.overrideDataViewLabel",{defaultMessage:"Override data view?"})},Object(u.jsx)(ct,{value:n.override_index_pattern,name:"override_index_pattern",onChange:D,"data-test-subj":"seriesOverrideIndexPattern"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Ct,I()({},e,{prefix:"series_",disabled:!n.override_index_pattern,allowLevelOfDetail:!0,baseIndexPattern:A})))))})),Rt=({id:e,onChange:t,value:s="everything",uiRestrictions:i})=>{const a=[{label:h.i18n.translate("visTypeTimeseries.splits.groupBySelect.modeOptions.everythingLabel",{defaultMessage:"Everything"}),value:"everything"},{label:h.i18n.translate("visTypeTimeseries.splits.groupBySelect.modeOptions.filterLabel",{defaultMessage:"Filter"}),value:"filter"},{label:h.i18n.translate("visTypeTimeseries.splits.groupBySelect.modeOptions.filtersLabel",{defaultMessage:"Filters"}),value:"filters"},{label:h.i18n.translate("visTypeTimeseries.splits.groupBySelect.modeOptions.termsLabel",{defaultMessage:"Terms"}),value:"terms"}].map((e=>({...e,disabled:!N(e.value,i)}))),l=a.find((e=>s===e.value));return Object(u.jsx)(g.EuiComboBox,{id:e,isClearable:!1,options:a,selectedOptions:l?[l]:void 0,onChange:t,singleSelection:{asPlainText:!0},"data-test-subj":"groupBySelect"})};var Nt=s(56);const Bt={terms_direction:"desc",terms_size:10,terms_order_by:"_count"},zt={terms_field:void 0,terms_include:void 0,terms_exclude:void 0,terms_direction:void 0,terms_size:void 0,terms_order_by:void 0},Gt=Object(p.injectI18n)((({onChange:e,indexPattern:t,intl:s,model:i,fields:a,uiRestrictions:n,seriesQuantity:o})=>{var d,c;const b=Object(g.htmlIdGenerator)(),j=re(e),m=ie(e),x={...Bt,...i},{metrics:v}=x,h={value:"_count",label:s.formatMessage({id:"visTypeTimeseries.splits.terms.defaultCountLabel",defaultMessage:"Doc Count (default)"})},O={value:"_key",label:s.formatMessage({id:"visTypeTimeseries.splits.terms.termsLabel",defaultMessage:"Terms"})},f=[{value:"desc",label:s.formatMessage({id:"visTypeTimeseries.splits.terms.dirOptions.descendingLabel",defaultMessage:"Descending"})},{value:"asc",label:s.formatMessage({id:"visTypeTimeseries.splits.terms.dirOptions.ascendingLabel",defaultMessage:"Ascending"})}],T=Object(le.c)(t),E=f.find((e=>x.terms_direction===e.value)),y=Object(r.find)(a[T],(({name:e})=>e===x.terms_field)),M=Object(r.get)(y,"type"),F=Object(l.useCallback)((t=>{e({terms_field:1===t.length?t[0]:t,terms_include:void 0,terms_exclude:void 0})}),[e]);return o&&x.stacked===Nt.c.PERCENT&&Pt(o[x.id])&&e({stacked:Nt.c.NONE}),Object(u.jsx)("div",null,Object(u.jsx)(g.EuiFlexGroup,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("group"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.groupByLabel",defaultMessage:"Group by"})},Object(u.jsx)(Rt,{value:x.split_mode,onChange:([{value:t=null}])=>{e({split_mode:t,...zt})},uiRestrictions:n}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.byLabel",defaultMessage:"By",description:"This labels a field selector allowing the user to chose 'by' which field to group."}),restrict:[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.BOOLEAN,we.KBN_FIELD_TYPES.DATE,we.KBN_FIELD_TYPES.IP,we.KBN_FIELD_TYPES.STRING],"data-test-subj":"groupByField",indexPattern:t,onChange:F,value:x.terms_field,fields:a,uiRestrictions:n,type:"terms",allowMultiSelect:!0}))),M===we.KBN_FIELD_TYPES.STRING&&Object(u.jsx)(g.EuiFlexGroup,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("include"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.includeLabel",defaultMessage:"Include"})},Object(u.jsx)(g.EuiFieldText,{value:null!==(d=x.terms_include)&&void 0!==d?d:"",onChange:j("terms_include"),"data-test-subj":"groupByInclude"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("exclude"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.excludeLabel",defaultMessage:"Exclude"})},Object(u.jsx)(g.EuiFieldText,{value:null!==(c=x.terms_exclude)&&void 0!==c?c:"",onChange:j("terms_exclude"),"data-test-subj":"groupByExclude"})))),Object(u.jsx)(g.EuiFlexGroup,null,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("top"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.topLabel",defaultMessage:"Top"})},Object(u.jsx)(g.EuiFieldNumber,{placeholder:s.formatMessage({id:"visTypeTimeseries.splits.terms.sizePlaceholder",defaultMessage:"Size"}),value:Number(x.terms_size),onChange:j("terms_size")}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("order"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.orderByLabel",defaultMessage:"Order by"})},Object(u.jsx)(te,{metrics:v,clearable:!1,additionalOptions:[h,O],fields:a[T],onChange:m("terms_order_by"),restrict:"basic",value:x.terms_order_by}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:b("direction"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.terms.directionLabel",defaultMessage:"Direction"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:f,selectedOptions:E?[E]:[],onChange:m("terms_direction"),singleSelection:{asPlainText:!0}})))))})),Ht={filter:void 0},Vt=e=>{const{onChange:t,uiRestrictions:s,indexPattern:i}=e,a={filter:{language:Object(St.a)(),query:""},...e.model},l=Object(g.htmlIdGenerator)();return Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("group"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.filter.groupByLabel",defaultMessage:"Group by"})},Object(u.jsx)(Rt,{value:a.split_mode,onChange:([{value:e=null}])=>{t({split_mode:e,...Ht})},uiRestrictions:s}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("query"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.filter.queryStringLabel",defaultMessage:"Query string"})},Object(u.jsx)(Ve,{query:{language:a.filter.language||Object(St.a)(),query:a.filter.query||""},onChange:e=>t({filter:e}),indexPatterns:[i]}))))};class filter_items_FilterItemsUi extends l.Component{constructor(e){super(e),a()(this,"handleQueryChange",((e,t)=>{const s={filter:t};ge.handleChange(this.props,d.a.assign({},e,s))})),this.renderRow=this.renderRow.bind(this)}handleChange(e,t){return s=>{ge.handleChange.bind(null,this.props)(d.a.assign({},e,{[t]:d.a.get(s,"value",d.a.get(s,"target.value"))}))}}renderRow(e,t,s){const i=this.props.indexPatterns,a={filter:"",label:"",...e},l=ge.handleAdd.bind(null,this.props,(()=>({color:this.props.model.color,id:Object(O.v4)(),filter:{language:a.filter.language||Object(St.a)(),query:""}}))),n=ge.handleDelete.bind(null,this.props,a),{intl:o,theme:r}=this.props;return Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s",css:M(r.euiTheme),alignItems:"center",key:a.id},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{disableTrash:!0,onChange:e=>{ge.handleChange.bind(null,this.props)(d.a.assign({},a,e))},name:"color",value:a.color})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Ve,{query:{language:a.filter.language||Object(St.a)(),query:a.filter.query||""},onChange:e=>this.handleQueryChange(a,e),indexPatterns:[i],"data-test-subj":"filterItemsQueryBar"})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{placeholder:o.formatMessage({id:"visTypeTimeseries.splits.filterItems.labelPlaceholder",defaultMessage:"Label"}),"aria-label":o.formatMessage({id:"visTypeTimeseries.splits.filterItems.labelAriaLabel",defaultMessage:"Label"}),onChange:this.handleChange(a,"label"),value:a.label,fullWidth:!0,"data-test-subj":"filterItemsLabel"})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{onAdd:l,onDelete:n,disableDelete:s.length<2,responsive:!1,testSubj:"filterRow"})))}render(){const{model:e,name:t}=this.props;if(!e[t])return Object(u.jsx)("div",null);const s=e[t].map(this.renderRow);return Object(u.jsx)("div",null,s)}}const Wt=Object(p.injectI18n)(Object(g.withEuiTheme)(filter_items_FilterItemsUi)),Ut={split_filters:void 0},qt=e=>{const{onChange:t,model:s,uiRestrictions:i,indexPattern:a}=e,l=Object(g.htmlIdGenerator)();return Object(u.jsx)("div",null,Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("group"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.filters.groupByLabel",defaultMessage:"Group by"})},Object(u.jsx)(Rt,{value:s.split_mode,onChange:([{value:e=null}])=>{t({split_mode:e,...Ut})},uiRestrictions:i})))),Object(u.jsx)(Wt,{name:"split_filters",model:s,onChange:t,indexPatterns:a}))},$t=e=>{const{onChange:t,model:s,uiRestrictions:i}=e,a=Object(g.htmlIdGenerator)(),l=ie(t);return Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:a("group"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.everything.groupByLabel",defaultMessage:"Group by"})},Object(u.jsx)(Rt,{value:s.split_mode,onChange:l("split_mode"),uiRestrictions:i}))))},Kt=e=>{const{onChange:t,model:s,uiRestrictions:i}=e,a=Object(g.htmlIdGenerator)(),l=ie(t),{euiTheme:n}=Object(g.useEuiTheme)();return Object(u.jsx)(g.EuiFlexGroup,{alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:a("group"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.splits.everything.groupByLabel",defaultMessage:"Group by"})},Object(u.jsx)(Rt,{value:s.split_mode,onChange:l("split_mode"),uiRestrictions:i}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiTitle,{size:"xxxs",css:_(n)},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.unsupportedSplit.splitIsUnsupportedDescription",defaultMessage:"Split by {modelType} is unsupported.",values:{modelType:Object(u.jsx)(g.EuiCode,null,s.split_mode)}})))))};class split_Split extends l.Component{UNSAFE_componentWillReceiveProps(e){const{model:t}=e;"filters"!==t.split_mode||t.split_filters||this.props.onChange({split_filters:[{color:t.color,id:Object(O.v4)(),filter:{query:"",language:Object(St.a)()}}]})}getComponent(e,t){if(!N(e,t))return Kt;switch(e){case"terms":return Gt;case"filter":return Vt;case"filters":return qt;default:return $t}}render(){const{model:e,panel:t,uiRestrictions:s,seriesQuantity:i}=this.props,a=e.override_index_pattern?e.series_index_pattern:t.index_pattern,l=Object(r.get)(this.props,"model.split_mode","everything"),n=this.getComponent(l,s);return Object(u.jsx)(n,{model:e,indexPattern:a,fields:this.props.fields,onChange:this.props.onChange,uiRestrictions:s,seriesQuantity:i})}}const Yt=Object(p.injectI18n)((function(e){const{panel:t,fields:s,onAdd:i,onDelete:a,disableDelete:l,disableAdd:n,selectedTab:o,onChange:r,visible:d,intl:c,name:b,uiRestrictions:j,seriesQuantity:m}=e,{euiTheme:x}=Object(g.useEuiTheme)(),v={label:"",...e.model},h=re(r);let O="arrowDown";d||(O="arrowRight");let f=null;if(d){let i;i="metrics"===o?Object(u.jsx)("div",null,Object(u.jsx)(aggs_Aggs,{onChange:e.onChange,fields:s,panel:t,model:v,name:b,uiRestrictions:j,dragHandleProps:e.dragHandleProps}),Object(u.jsx)("div",{css:[M(x),C(x),"",""]},Object(u.jsx)(split_Split,{onChange:e.onChange,fields:s,panel:t,model:v,uiRestrictions:j,seriesQuantity:m}))):Object(u.jsx)(kt,{fields:e.fields,panel:t,model:v,onChange:e.onChange,indexPatternForQuery:e.indexPatternForQuery,seriesQuantity:m}),f=Object(u.jsx)("div",{className:"tvbSeries__body"},Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:"metrics"===o,onClick:()=>e.switchTab("metrics")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.tab.metricsLabel",defaultMessage:"Metrics"})),Object(u.jsx)(g.EuiTab,{"data-test-subj":"seriesOptions",isSelected:"options"===o,onClick:()=>e.switchTab("options")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeSeries.tab.optionsLabel",defaultMessage:"Options"}))),i)}const T=Object(u.jsx)(E,{disableTrash:!0,onChange:e.onChange,name:"color",value:v.color});return Object(u.jsx)("div",{className:`${e.className}`,style:e.style},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButtonIcon,{iconType:O,color:"text",onClick:e.toggleVisible,"aria-label":c.formatMessage({id:"visTypeTimeseries.timeSeries.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":e.visible})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},T),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,onChange:h("label"),placeholder:c.formatMessage({id:"visTypeTimeseries.timeSeries.labelPlaceholder",defaultMessage:"Label"}),value:v.label})),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:e.disableDelete}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{addTooltip:c.formatMessage({id:"visTypeTimeseries.timeSeries.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:c.formatMessage({id:"visTypeTimeseries.timeSeries.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:c.formatMessage({id:"visTypeTimeseries.timeSeries.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:a,onClone:e.onClone,togglePanelActivation:e.togglePanelActivation,isPanelActive:!v.hidden,onAdd:i,disableDelete:l,disableAdd:n,responsive:!1}))),f)})),Qt=Object(p.injectI18n)(Yt),Xt=e=>{const t={offset_time:"",value_template:"{{value}}",...e.model},s=re(e.onChange),i=Object(g.htmlIdGenerator)(),a=e.model.override_index_pattern?e.model.series_index_pattern:e.indexPatternForQuery,n=Object(l.useCallback)((t=>e.onChange({formatter:t})),[e]),o=Object(l.useMemo)((()=>tt(Object(r.last)(t.metrics),e.fields,a)),[t.metrics,e.fields,a]),d=e.panel.use_kibana_indexes||""===a,{indexPatternForQuery:c,onChange:b}=e,j=Object(l.useCallback)((e=>{const s={...e};e.override_index_pattern&&!t.series_index_pattern&&(s.series_index_pattern=c),b(s)}),[t.series_index_pattern,c,b]),{euiTheme:m}=Object(g.useEuiTheme)();return Object(u.jsx)("div",{css:M(m)},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(ut,{formatterValue:t.formatter,changeModelFormatter:n,shouldIncludeDefaultOption:d,shouldIncludeNumberOptions:o}),Object(u.jsx)(g.EuiFlexItem,{grow:3},Object(u.jsx)(g.EuiFormRow,{id:i("template"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.templateLabel",defaultMessage:"Template"}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.templateHelpText",defaultMessage:"eg. {templateExample}",values:{templateExample:Object(u.jsx)(g.EuiCode,null,"{{value}}/s")}})),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{onChange:s("value_template"),value:t.value_template,disabled:t.formatter===L.b.DEFAULT,fullWidth:!0})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(wt,{model:t,onChange:e.onChange,panel:e.panel,indexPatternForQuery:a}),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("offsetSeries"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.offsetSeriesTimeLabel",defaultMessage:"Offset series time by (1m, 1h, 1w, 1d)",description:"1m, 1h, 1w and 1d are required values and must not be translated."})},Object(u.jsx)(g.EuiFieldText,{"data-test-subj":"offsetTimeSeries",onChange:s("offset_time"),value:t.offset_time})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s",responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.seriesConfig.overrideDataViewLabel",{defaultMessage:"Override data view?"})},Object(u.jsx)(ct,{value:t.override_index_pattern,name:"override_index_pattern",onChange:j}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Ct,{baseIndexPattern:c,onChange:e.onChange,model:e.model,fields:e.fields,prefix:"series_",disabled:!t.override_index_pattern}))))},Zt=Object(p.injectI18n)((function(e){const{panel:t,fields:s,name:i,onAdd:a,onChange:l,onDelete:n,disableDelete:o,disableAdd:r,selectedTab:d,visible:c,intl:b,uiRestrictions:j}=e,{euiTheme:m}=Object(g.useEuiTheme)(),x={label:"",...e.model},v=re(l);let h="arrowDown";c||(h="arrowRight");let O,f=null;if(c){let a;a="metrics"===d?Object(u.jsx)("div",null,Object(u.jsx)(aggs_Aggs,{onChange:e.onChange,fields:s,panel:t,model:x,name:i,uiRestrictions:j,dragHandleProps:e.dragHandleProps}),Object(u.jsx)("div",{css:[M(m),C(m),"",""]},Object(u.jsx)(split_Split,{onChange:e.onChange,fields:s,panel:t,model:x,uiRestrictions:j}))):Object(u.jsx)(Xt,{panel:t,fields:e.fields,model:e.model,onChange:e.onChange,indexPatternForQuery:e.indexPatternForQuery}),f=Object(u.jsx)("div",{className:"tvbSeries__body"},Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:"metrics"===d,onClick:()=>e.switchTab("metrics")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),Object(u.jsx)(g.EuiTab,{"data-test-subj":"seriesOptions",isSelected:"options"===d,onClick:()=>e.switchTab("options")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),a)}return e.colorPicker&&(O=Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{disableTrash:!0,onChange:e.onChange,name:"color",value:x.color}))),Object(u.jsx)("div",{className:`${e.className}`,style:e.style},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButtonIcon,{iconType:h,color:"text",onClick:e.toggleVisible,"aria-label":b.formatMessage({id:"visTypeTimeseries.metric.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":e.visible})),O,Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,onChange:v("label"),placeholder:b.formatMessage({id:"visTypeTimeseries.metric.editor.labelPlaceholder",defaultMessage:"Label"}),value:x.label})),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:e.disableDelete}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{addTooltip:b.formatMessage({id:"visTypeTimeseries.metric.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:b.formatMessage({id:"visTypeTimeseries.metric.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:b.formatMessage({id:"visTypeTimeseries.metric.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:n,onClone:e.onClone,onAdd:a,togglePanelActivation:e.togglePanelActivation,isPanelActive:!x.hidden,disableDelete:o,disableAdd:r,responsive:!1}))),f)})),Jt=Object(p.injectI18n)((function(e){const{panel:t,model:s,name:i,fields:a,onAdd:l,onChange:n,onDelete:o,disableDelete:r,disableAdd:d,selectedTab:c,visible:b,intl:j,uiRestrictions:m}=e,{euiTheme:x}=Object(g.useEuiTheme)(),v=re(n);let h="arrowDown";b||(h="arrowRight");let O=null;if(b){let l;l="metrics"===c?Object(u.jsx)("div",null,Object(u.jsx)(aggs_Aggs,{onChange:e.onChange,fields:a,panel:t,model:s,name:i,uiRestrictions:m,dragHandleProps:e.dragHandleProps}),Object(u.jsx)("div",{css:[M(x),C(x),"",""]},Object(u.jsx)(split_Split,{onChange:e.onChange,fields:a,panel:t,model:s,uiRestrictions:m}))):Object(u.jsx)(Xt,{fields:e.fields,panel:e.panel,model:e.model,onChange:e.onChange,indexPatternForQuery:e.indexPatternForQuery}),O=Object(u.jsx)("div",{className:"tvbSeries__body"},Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:"metrics"===c,onClick:()=>e.switchTab("metrics")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.tab.metricsLabel",defaultMessage:"Metrics"})),Object(u.jsx)(g.EuiTab,{"data-test-subj":"seriesOptions",isSelected:"options"===c,onClick:()=>e.switchTab("options")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.tab.optionsLabel",defaultMessage:"Options"}))),l)}const f=Object(u.jsx)(E,{disableTrash:!0,onChange:e.onChange,name:"color",value:s.color});return Object(u.jsx)("div",{className:`${e.className}`,style:e.style},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButtonIcon,{iconType:h,color:"text",onClick:e.toggleVisible,"aria-label":j.formatMessage({id:"visTypeTimeseries.topN.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":e.visible})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},f),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,onChange:v("label"),placeholder:j.formatMessage({id:"visTypeTimeseries.topN.labelPlaceholder",defaultMessage:"Label"}),value:s.label})),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:e.disableDelete}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{addTooltip:j.formatMessage({id:"visTypeTimeseries.topN.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:j.formatMessage({id:"visTypeTimeseries.topN.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:j.formatMessage({id:"visTypeTimeseries.topN.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:o,onClone:e.onClone,onAdd:l,togglePanelActivation:e.togglePanelActivation,isPanelActive:!s.hidden,disableDelete:r,disableAdd:d,responsive:!1}))),O)}));var es=s(69);const ts=h.i18n.translate("visTypeTimeseries.colorRules.defaultSecondaryNameLabel",{defaultMessage:"text"}),ss=h.i18n.translate("visTypeTimeseries.colorRules.defaultPrimaryNameLabel",{defaultMessage:"background"}),is=[{label:h.i18n.translate("visTypeTimeseries.colorRules.greaterThanLabel",{defaultMessage:"> greater than"}),method:es.a.Gt},{label:h.i18n.translate("visTypeTimeseries.colorRules.greaterThanOrEqualLabel",{defaultMessage:">= greater than or equal"}),method:es.a.Gte},{label:h.i18n.translate("visTypeTimeseries.colorRules.lessThanLabel",{defaultMessage:"< less than"}),method:es.a.Lt},{label:h.i18n.translate("visTypeTimeseries.colorRules.lessThanOrEqualLabel",{defaultMessage:"<= less than or equal"}),method:es.a.Lte},{label:h.i18n.translate("visTypeTimeseries.colorRules.emptyLabel",{defaultMessage:"empty"}),method:es.a.Empty,hideValueSelector:!0}],as=is.map((e=>({label:e.label,value:e.method})));class color_rules_ColorRulesUI extends l.Component{constructor(e){super(e),a()(this,"handleOperatorChange",(e=>t=>{var s,i;const a=is.find((e=>{var s;return(null===(s=t[0])||void 0===s?void 0:s.value)===e.method})),l=null!==(s=null==a?void 0:a.value)&&void 0!==s?s:null;ge.handleChange(this.props,{...e,operator:null===(i=t[0])||void 0===i?void 0:i.value,value:l})})),this.renderRow=this.renderRow.bind(this)}handleValueChange(e){return t=>{let s=Number(t.target.value);isNaN(s)&&(s=void 0),ge.handleChange(this.props,{...e,value:s})}}renderRow(e,t,s){var i,a,n,o,r;const d={value:0,...e},c=e=>{ge.handleChange(this.props,{...d,...e})},b=Object(g.htmlIdGenerator)(d.id),j=as.find((e=>d.operator===e.value)),m=is.find((e=>d.operator===e.method)),x=null!==(i=null==m?void 0:m.hideValueSelector)&&void 0!==i&&i,v={marginBottom:0};let O;if(!this.props.hideSecondary){var f,T;const e=null!==(f=this.props.secondaryVarName)&&void 0!==f?f:"color";O=Object(u.jsx)(l.Fragment,null,Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,{style:v},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.colorRules.setSecondaryColorLabel",defaultMessage:"and {secondaryName} to",values:{secondaryName:null!==(T=this.props.secondaryName)&&void 0!==T?T:ts},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{onChange:c,name:e,value:d[e]})))}return Object(u.jsx)(g.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s",key:d.id,alignItems:"center",css:M(this.props.theme.euiTheme)},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,{style:v},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.colorRules.setPrimaryColorLabel",defaultMessage:"Set {primaryName} to",values:{primaryName:null!==(a=this.props.primaryName)&&void 0!==a?a:ss},description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{onChange:c,name:null!==(n=this.props.primaryVarName)&&void 0!==n?n:"background_color",value:d[null!==(o=this.props.primaryVarName)&&void 0!==o?o:"background_color"]})),O,Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,{style:v,htmlFor:b("ifMetricIs")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.colorRules.ifMetricIsLabel",defaultMessage:"if metric is",description:"Part of a larger string: Set {primaryName} to {color} and {secondaryName} to {color} if metric is {greaterOrLessThan} {value}."}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiComboBox,{id:b("ifMetricIs"),options:as,selectedOptions:j?[j]:[],onChange:this.handleOperatorChange(d),singleSelection:{asPlainText:!0},"data-test-subj":"colorRuleOperator",fullWidth:!0})),!x&&Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldNumber,{"aria-label":h.i18n.translate("visTypeTimeseries.colorRules.valueAriaLabel",{defaultMessage:"Value"}),value:null!==(r=d.value)&&void 0!==r?r:"",onChange:this.handleValueChange(d),"data-test-subj":"colorRuleValue",fullWidth:!0})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{onAdd:()=>ge.handleAdd(this.props),onDelete:()=>ge.handleDelete(this.props,d),disableDelete:s.length<2,responsive:!1})))}render(){const{model:e,name:t}=this.props;return e[t]?Object(u.jsx)("div",null,e[t].map(this.renderRow)):Object(u.jsx)("div",null)}}const ls=Object(g.withEuiTheme)(color_rules_ColorRulesUI);class config_TableSeriesConfigUi extends l.Component{constructor(...e){super(...e),a()(this,"handleAggregateByChange",(e=>{this.props.onChange({aggregate_by:null==e?void 0:e[0]})})),a()(this,"handleSelectChange",ie(this.props.onChange)),a()(this,"handleTextChange",re(this.props.onChange)),a()(this,"changeModelFormatter",(e=>this.props.onChange({formatter:e})))}UNSAFE_componentWillMount(){const{model:e}=this.props;(!e.color_rules||e.color_rules&&0===e.color_rules.length)&&this.props.onChange({color_rules:[{id:Object(O.v4)()}]})}render(){var e,t,s;const i={offset_time:"",value_template:"{{value}}",...this.props.model},a=Object(g.htmlIdGenerator)(),l=[{label:h.i18n.translate("visTypeTimeseries.table.sumLabel",{defaultMessage:"Sum"}),value:"sum"},{label:h.i18n.translate("visTypeTimeseries.table.maxLabel",{defaultMessage:"Max"}),value:"max"},{label:h.i18n.translate("visTypeTimeseries.table.minLabel",{defaultMessage:"Min"}),value:"min"},{label:h.i18n.translate("visTypeTimeseries.table.avgLabel",{defaultMessage:"Avg"}),value:"mean"},{label:h.i18n.translate("visTypeTimeseries.table.overallSumLabel",{defaultMessage:"Overall Sum"}),value:"overall_sum"},{label:h.i18n.translate("visTypeTimeseries.table.overallMaxLabel",{defaultMessage:"Overall Max"}),value:"overall_max"},{label:h.i18n.translate("visTypeTimeseries.table.overallMinLabel",{defaultMessage:"Overall Min"}),value:"overall_min"},{label:h.i18n.translate("visTypeTimeseries.table.overallAvgLabel",{defaultMessage:"Overall Avg"}),value:"overall_avg"},{label:h.i18n.translate("visTypeTimeseries.table.cumulativeSumLabel",{defaultMessage:"Cumulative Sum"}),value:"cumulative_sum"}],n=l.find((e=>i.aggregate_function===e.value)),o=tt(Object(r.last)(i.metrics),this.props.fields,this.props.indexPatternForQuery),d=this.props.panel.use_kibana_indexes||""===this.props.indexPatternForQuery,c=(null===(e=i.filter)||void 0===e?void 0:e.query)&&(b=this.props.uiRestrictions,!k("filter",A.WHITE_LISTED_CONFIGURATION_FEATURES,b));var b;return Object(u.jsx)("div",{css:M(this.props.theme.euiTheme)},Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"s"},Object(u.jsx)(ut,{formatterValue:i.formatter,changeModelFormatter:this.changeModelFormatter,shouldIncludeDefaultOption:d,shouldIncludeNumberOptions:o}),Object(u.jsx)(g.EuiFlexItem,{grow:3},Object(u.jsx)(g.EuiFormRow,{id:a("template"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.templateLabel",defaultMessage:"Template"}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.templateHelpText",defaultMessage:"eg.{templateExample}",values:{templateExample:Object(u.jsx)(g.EuiCode,null,"{{value}}/s")}})),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{onChange:this.handleTextChange("value_template"),value:i.value_template,disabled:i.formatter===L.b.DEFAULT,fullWidth:!0})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiFormRow,{id:a("filterInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.filterLabel",defaultMessage:"Filter"}),isInvalid:c,error:xt.c,fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null==i||null===(t=i.filter)||void 0===t?void 0:t.language)||Object(St.a)(),query:(null==i||null===(s=i.filter)||void 0===s?void 0:s.query)||""},isInvalid:c,onChange:e=>this.props.onChange({filter:e}),indexPatterns:[this.props.indexPatternForQuery]}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.table.showTrendArrowsLabel",{defaultMessage:"Show trend arrows?"})},Object(u.jsx)(ct,{value:i.trend_arrows,name:"trend_arrows",onChange:this.props.onChange})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{grow:!0,"data-test-subj":"tsvbAggregateBySelect"},Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.fieldLabel",defaultMessage:"Field"}),fields:this.props.fields,indexPattern:this.props.panel.index_pattern,value:i.aggregate_by,onChange:this.handleAggregateByChange,fullWidth:!0,restrict:[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.BOOLEAN,we.KBN_FIELD_TYPES.DATE,we.KBN_FIELD_TYPES.IP,we.KBN_FIELD_TYPES.STRING],uiRestrictions:this.props.uiRestrictions,type:L.a.TERMS})),Object(u.jsx)(g.EuiFlexItem,{grow:!0},Object(u.jsx)(g.EuiFormRow,{id:a("aggregateFunctionInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.aggregateFunctionLabel",defaultMessage:"Aggregate function"}),fullWidth:!0},Object(u.jsx)(g.EuiComboBox,{"data-test-subj":"tsvbAggregateFunctionCombobox",options:l,selectedOptions:n?[n]:[],onChange:this.handleSelectChange("aggregate_function"),singleSelection:{asPlainText:!0},fullWidth:!0})))),Object(u.jsx)(g.EuiHorizontalRule,{margin:"s"}),Object(u.jsx)(g.EuiTitle,{size:"xxs"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.colorRulesLabel",defaultMessage:"Color rules"}))),Object(u.jsx)(g.EuiSpacer,{size:"s"}),Object(u.jsx)(ls,{primaryName:"text",primaryVarName:"text",hideSecondary:!0,model:i,onChange:this.props.onChange,name:"color_rules"}))}}const ns=Object(g.withEuiTheme)(config_TableSeriesConfigUi),os={top_n:Jt,table:Object(p.injectI18n)((function(e){const{model:t,onAdd:s,name:i,fields:a,panel:l,onChange:n,onDelete:o,disableDelete:r,disableAdd:d,selectedTab:c,visible:b,intl:j,uiRestrictions:m}=e,x=re(n);let v="arrowDown";b||(v="arrowRight");let h=null;if(b){let s;s="metrics"===c?Object(u.jsx)("div",null,Object(u.jsx)(aggs_Aggs,{onChange:e.onChange,fields:a,panel:l,model:t,name:i,uiRestrictions:m,dragHandleProps:e.dragHandleProps})):Object(u.jsx)(ns,{panel:e.panel,fields:e.fields,model:e.model,onChange:e.onChange,indexPatternForQuery:e.indexPatternForQuery,uiRestrictions:e.uiRestrictions}),h=Object(u.jsx)("div",{className:"tvbSeries__body"},Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:"metrics"===c,onClick:()=>e.switchTab("metrics")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.tab.metricsLabel",defaultMessage:"Metrics"})),Object(u.jsx)(g.EuiTab,{"data-test-subj":"seriesOptions",isSelected:"options"===c,onClick:()=>e.switchTab("options")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.tab.optionsLabel",defaultMessage:"Options"}))),s)}return Object(u.jsx)("div",{className:`${e.className}`,style:e.style},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButtonIcon,{iconType:v,color:"text",onClick:e.toggleVisible,"aria-label":j.formatMessage({id:"visTypeTimeseries.table.toggleSeriesEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":e.visible})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,"aria-label":j.formatMessage({id:"visTypeTimeseries.table.labelAriaLabel",defaultMessage:"Label"}),onChange:x("label"),placeholder:j.formatMessage({id:"visTypeTimeseries.table.labelPlaceholder",defaultMessage:"Label"}),value:t.label})),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:e.disableDelete}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{addTooltip:j.formatMessage({id:"visTypeTimeseries.table.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:j.formatMessage({id:"visTypeTimeseries.table.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:j.formatMessage({id:"visTypeTimeseries.table.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:o,onClone:e.onClone,onAdd:s,togglePanelActivation:e.togglePanelActivation,isPanelActive:!t.hidden,disableDelete:r,disableAdd:d,responsive:!1}))),h)})),metric:Zt,timeseries:Qt,gauge:Object(p.injectI18n)((function(e){const{panel:t,fields:s,onAdd:i,name:a,onChange:l,onDelete:n,disableDelete:o,disableAdd:r,selectedTab:d,visible:c,intl:b,uiRestrictions:j}=e,{euiTheme:m}=Object(g.useEuiTheme)(),x={label:"",...e.model},v=re(l);let h="arrowDown";c||(h="arrowRight");let O=null;if(c){let i;i="metrics"===d?Object(u.jsx)("div",null,Object(u.jsx)(aggs_Aggs,{onChange:e.onChange,fields:s,panel:t,model:x,name:a,uiRestrictions:j,dragHandleProps:e.dragHandleProps}),Object(u.jsx)("div",{css:[M(m),C(m),"",""]},Object(u.jsx)(split_Split,{onChange:e.onChange,fields:s,panel:t,model:x,uiRestrictions:j}))):Object(u.jsx)(Xt,{fields:e.fields,panel:t,model:e.model,onChange:e.onChange,indexPatternForQuery:e.indexPatternForQuery}),O=Object(u.jsx)("div",{className:"tvbSeries__body"},Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:"metrics"===d,onClick:()=>e.switchTab("metrics")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),Object(u.jsx)(g.EuiTab,{"data-test-subj":"seriesOptions",isSelected:"options"===d,onClick:()=>e.switchTab("options")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),i)}const f=Object(u.jsx)(E,{disableTrash:!0,onChange:e.onChange,name:"color",value:x.color});return Object(u.jsx)("div",{className:`${e.className}`,style:e.style},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButtonIcon,{iconType:h,color:"text",onClick:e.toggleVisible,"aria-label":b.formatMessage({id:"visTypeTimeseries.gauge.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":e.visible})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},f),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,onChange:v("label"),placeholder:b.formatMessage({id:"visTypeTimeseries.gauge.editor.labelPlaceholder",defaultMessage:"Label"}),value:x.label})),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:e.disableDelete}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{addTooltip:b.formatMessage({id:"visTypeTimeseries.gauge.editor.addSeriesTooltip",defaultMessage:"Add Series"}),deleteTooltip:b.formatMessage({id:"visTypeTimeseries.gauge.editor.deleteSeriesTooltip",defaultMessage:"Delete Series"}),cloneTooltip:b.formatMessage({id:"visTypeTimeseries.gauge.editor.cloneSeriesTooltip",defaultMessage:"Clone Series"}),onDelete:n,onClone:e.onClone,onAdd:i,disableDelete:o,disableAdd:r,responsive:!1}))),O)})),markdown:Object(p.injectI18n)((function(e){const{panel:t,fields:s,onAdd:i,onChange:a,onDelete:l,disableDelete:n,disableAdd:o,selectedTab:r,visible:d,intl:c,name:b,uiRestrictions:j}=e,{euiTheme:m}=Object(g.useEuiTheme)(),x={label:"",var_name:"",...e.model},v=re(a);let h="arrowDown";d||(h="arrowRight");let O=null;if(d){let i;i="metrics"===r?Object(u.jsx)("div",null,Object(u.jsx)(aggs_Aggs,{onChange:e.onChange,fields:s,panel:t,model:x,name:b,uiRestrictions:j,dragHandleProps:e.dragHandleProps}),Object(u.jsx)("div",{css:[M(m),C(m),"",""]},Object(u.jsx)(split_Split,{onChange:e.onChange,fields:s,panel:t,model:x,uiRestrictions:j}))):Object(u.jsx)(Xt,{fields:e.fields,panel:t,model:e.model,onChange:e.onChange,indexPatternForQuery:e.indexPatternForQuery}),O=Object(u.jsx)("div",{className:"tvbSeries__body"},Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:"metrics"===r,onClick:()=>e.switchTab("metrics")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.dataTab.metricsButtonLabel",defaultMessage:"Metrics"})),Object(u.jsx)(g.EuiTab,{"data-test-subj":"seriesOptions",isSelected:"options"===r,onClick:()=>e.switchTab("options")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.optionsButtonLabel",defaultMessage:"Options"}))),i)}return Object(u.jsx)("div",{className:`${e.className}`,style:e.style},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,gutterSize:"s",alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiButtonIcon,{iconType:h,color:"text",onClick:e.toggleVisible,"aria-label":c.formatMessage({id:"visTypeTimeseries.markdown.editor.toggleEditorAriaLabel",defaultMessage:"Toggle series editor"}),"aria-expanded":e.visible})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,onChange:v("label"),placeholder:c.formatMessage({id:"visTypeTimeseries.markdown.editor.labelPlaceholder",defaultMessage:"Label"}),value:x.label})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFieldText,{fullWidth:!0,onChange:v("var_name"),placeholder:c.formatMessage({id:"visTypeTimeseries.markdown.editor.variableNamePlaceholder",defaultMessage:"Variable name"}),value:x.var_name})),Object(u.jsx)(series_drag_handler_SeriesDragHandler,{dragHandleProps:e.dragHandleProps,hideDragHandler:!0}),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{addTooltip:c.formatMessage({id:"visTypeTimeseries.markdown.editor.addSeriesTooltip",defaultMessage:"Add series"}),deleteTooltip:c.formatMessage({id:"visTypeTimeseries.markdown.editor.deleteSeriesTooltip",defaultMessage:"Delete series"}),cloneTooltip:c.formatMessage({id:"visTypeTimeseries.markdown.editor.cloneSeriesTooltip",defaultMessage:"Clone series"}),onDelete:l,onClone:e.onClone,onAdd:i,disableDelete:n,disableAdd:o,responsive:!1}))),O)}))};class series_Series extends l.Component{constructor(...e){super(...e),a()(this,"state",{visible:!0,selectedTab:"metrics"}),a()(this,"switchTab",(e=>{this.setState({selectedTab:e})})),a()(this,"handleChange",(e=>{if(this.props.onChange){const{model:t}=this.props,s=Object(r.assign)({},t,e);this.props.onChange(s)}})),a()(this,"togglePanelActivation",(()=>{const{model:e}=this.props;this.handleChange({hidden:!e.hidden})})),a()(this,"toggleVisible",(e=>{e.preventDefault(),this.setState({visible:!this.state.visible})}))}render(){const{panel:e}=this.props,t=os[e.type];return Boolean(t)?Object(u.jsx)(x.Consumer,null,(s=>{const i=Object(r.get)(s,`${e.id}.series`,[]),a={},l=i.reduce(((e,t)=>(a[t.seriesId]=a[t.seriesId]+1||1,e[t.seriesId]=a[t.seriesId],e)),{});return Object(u.jsx)(t,{className:this.props.className,disableAdd:this.props.disableAdd,uiRestrictions:s.uiRestrictions,seriesQuantity:l,disableDelete:this.props.disableDelete,fields:this.props.fields,name:this.props.name,onAdd:this.props.onAdd,onChange:this.handleChange,onClone:this.props.onClone,onDelete:this.props.onDelete,model:this.props.model,panel:this.props.panel,selectedTab:this.state.selectedTab,style:this.props.style,switchTab:this.switchTab,toggleVisible:this.toggleVisible,togglePanelActivation:this.togglePanelActivation,visible:this.state.visible,dragHandleProps:this.props.dragHandleProps,indexPatternForQuery:e.index_pattern})})):Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.seriesConfig.missingSeriesComponentDescription",defaultMessage:"Missing Series component for panel type: {panelType}",values:{panelType:e.type}})}}series_Series.defaultProps={name:"metrics"};const rs=(e={})=>d.a.assign({id:Object(O.v4)(),color:"#68BC00",split_mode:"everything",palette:{type:"palette",name:"default"},metrics:[et()],separate_axis:0,axis_position:"right",formatter:"default",chart_type:"line",line_width:1,point_size:1,fill:.5,stacked:Nt.c.NONE,override_index_pattern:0,series_drop_last_bucket:0},e),ds=(e,t,s)=>{const i=Array.from(e),[a]=i.splice(t,1);return i.splice(s,0,a),i};s(122);const us="series_editor_dnd";class series_editor_SeriesEditor extends l.Component{constructor(...e){super(...e),a()(this,"handleClone",(e=>{const t=(e=>{const t=d.a.cloneDeep(e);return t.id=Object(O.v4)(),t.metrics.forEach((e=>{const s=Object(O.v4)(),i=e.id;e.id=s,t.terms_order_by===i&&(t.terms_order_by=s),t.metrics.filter((e=>e.field===i)).forEach((e=>e.field=s)),t.metrics.filter((e=>"calculation"===e.type&&e.variables.some((e=>e.field===i)))).forEach((e=>{e.variables.filter((e=>e.field===i)).forEach((e=>{e.id=Object(O.v4)(),e.field=s}))}))})),t})(e);be.call(null,this.props,(()=>t))})),a()(this,"sortHandler",(({destination:e,source:t})=>{e&&t&&this.getSortFunction({destination:e,source:t})({destination:e,source:t})})),a()(this,"getSortFunction",(({destination:e,source:t})=>e.droppableId===t.droppableId&&t.droppableId===us?this.sortSeries:this.sortAggregations)),a()(this,"sortSeries",(({destination:e,source:t})=>{this.props.onChange({series:ds([...this.props.model.series],t.index,e.index)})})),a()(this,"sortAggregations",(({destination:e,source:t})=>{const s=({droppableId:e})=>e.split(":")[1],i=s(t);if(i===s(e)){const s=[...this.props.model.series],a=Object(r.find)(s,{id:i});a.metrics=ds([...a.metrics],t.index,e.index),this.props.onChange({series:s})}})),a()(this,"handleSeriesChange",(e=>{ue(this.props,e)}))}render(){const{limit:e,model:t,name:s,fields:i,colorPicker:a}=this.props,l=t[s].filter(((t,s)=>s<(e||1/0)));return Object(u.jsx)(g.EuiDragDropContext,{onDragEnd:this.sortHandler},Object(u.jsx)(g.EuiDroppable,{droppableId:us,spacing:"l",type:"MACRO"},l.map(((l,n)=>Object(u.jsx)(g.EuiDraggable,{spacing:"m",key:l.id,index:n,customDragHandle:!0,draggableId:`${us}:${l.id}`,disableInteractiveElementBlocking:!0},(n=>Object(u.jsx)(series_Series,{className:"tvbSeriesEditor",colorPicker:a,disableAdd:t[s].length>=e,disableDelete:t[s].length<2,fields:i,onAdd:()=>be(this.props,rs),onChange:this.handleSeriesChange,onClone:()=>this.handleClone(l),onDelete:()=>ce(this.props,l),model:l,panel:t,dragHandleProps:n.dragHandleProps})))))))}}series_editor_SeriesEditor.defaultProps={name:"series",limit:1/0,colorPicker:!0};var cs=s(60);const bs=[{value:"fa-asterisk",label:h.i18n.translate("visTypeTimeseries.iconSelect.asteriskLabel",{defaultMessage:"Asterisk"})},{value:"fa-bell",label:h.i18n.translate("visTypeTimeseries.iconSelect.bellLabel",{defaultMessage:"Bell"})},{value:"fa-bolt",label:h.i18n.translate("visTypeTimeseries.iconSelect.boltLabel",{defaultMessage:"Bolt"})},{value:"fa-comment",label:h.i18n.translate("visTypeTimeseries.iconSelect.commentLabel",{defaultMessage:"Comment"})},{value:"fa-map-marker",label:h.i18n.translate("visTypeTimeseries.iconSelect.mapMarkerLabel",{defaultMessage:"Map Marker"})},{value:"fa-map-pin",label:h.i18n.translate("visTypeTimeseries.iconSelect.mapPinLabel",{defaultMessage:"Map Pin"})},{value:"fa-star",label:h.i18n.translate("visTypeTimeseries.iconSelect.starLabel",{defaultMessage:"Star"})},{value:"fa-tag",label:h.i18n.translate("visTypeTimeseries.iconSelect.tagLabel",{defaultMessage:"Tag"})},{value:"fa-bomb",label:h.i18n.translate("visTypeTimeseries.iconSelect.bombLabel",{defaultMessage:"Bomb"})},{value:"fa-bug",label:h.i18n.translate("visTypeTimeseries.iconSelect.bugLabel",{defaultMessage:"Bug"})},{value:"fa-exclamation-triangle",label:h.i18n.translate("visTypeTimeseries.iconSelect.exclamationTriangleLabel",{defaultMessage:"Exclamation Triangle"})},{value:"fa-fire",label:h.i18n.translate("visTypeTimeseries.iconSelect.fireLabel",{defaultMessage:"Fire"})},{value:"fa-flag",label:h.i18n.translate("visTypeTimeseries.iconSelect.flagLabel",{defaultMessage:"Flag"})},{value:"fa-heart",label:h.i18n.translate("visTypeTimeseries.iconSelect.heartLabel",{defaultMessage:"Heart"})}];function gs({value:e,label:t}){return Object(u.jsx)("span",null,Object(u.jsx)(g.EuiIcon,{type:cs.a[e]}),` ${t}`)}function ps({value:e,onChange:t}){const s=bs.find((t=>e===t.value))||bs[0];return Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:bs,selectedOptions:[s],onChange:t,singleSelection:{asPlainText:!0},renderOption:gs})}const js=[we.KBN_FIELD_TYPES.DATE],ms="time_field",xs=({annotation:e,fields:t,onChange:s,handleAdd:i,handleDelete:a})=>{var n,o,r;const d=Object(l.useMemo)((()=>({fields:"",template:"",index_pattern:"",query_string:{query:"",language:Object(St.a)()},...e})),[e]),c=Object(g.htmlIdGenerator)(d.id),[b,j]=Object(l.useState)(null),{euiTheme:m}=Object(g.useEuiTheme)();Object(l.useEffect)((()=>{(async e=>{const t=Object(Ge.d)();let s={indexPattern:void 0,indexPatternString:void 0};try{s=e?await Object(le.b)(e,t,{fetchKibanaIndexForStringIndexes:!0}):{...s,defaultIndex:await t.getDefault()}}catch{Object(le.d)(e)&&(s.missedIndex=e.id)}j(s)})(d.index_pattern)}),[d.index_pattern]);const x=Object(l.useCallback)((()=>s({hidden:!d.hidden})),[d.hidden,s]),v=Object(l.useCallback)((e=>t=>{var i;return s({[e]:Array.isArray(t)?null==t||null===(i=t[0])||void 0===i?void 0:i.value:t.target.value})}),[s]),O=Object(l.useCallback)((e=>s({query_string:e})),[s]);return Object(u.jsx)("div",{className:"tvbAnnotationsEditor",key:d.id},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{disableTrash:!0,onChange:s,name:"color",value:d.color})),Object(u.jsx)(g.EuiFlexItem,{css:F(m)},Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,gutterSize:"m"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(ft,{indexPatternName:"index_pattern",onChange:s,fetchedIndex:b})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(Se,{type:ms,label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.timeFieldLabel",defaultMessage:"Time field"}),restrict:js,value:d[ms],onChange:e=>{var t;return s({[ms]:null!==(t=null==e?void 0:e[0])&&void 0!==t?t:void 0})},indexPattern:d.index_pattern,placeholder:null!==(n=null==b||null===(o=b.indexPattern)||void 0===o?void 0:o.timeFieldName)&&void 0!==n?n:null==b||null===(r=b.defaultIndex)||void 0===r?void 0:r.timeFieldName,fields:t}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,gutterSize:"m"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:c("queryString"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.queryStringLabel",defaultMessage:"Query string"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:d.query_string.language||Object(St.a)(),query:d.query_string.query||""},onChange:O,indexPatterns:[d.index_pattern],"data-test-subj":"annotationQueryBar"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.annotationsEditor.ignoreGlobalFiltersLabel",{defaultMessage:"Ignore global filters?"})},Object(u.jsx)(ct,{value:d.ignore_global_filters,name:"ignore_global_filters",onChange:s}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.annotationsEditor.ignorePanelFiltersLabel",{defaultMessage:"Ignore panel filters?"})},Object(u.jsx)(ct,{value:d.ignore_panel_filters,name:"ignore_panel_filters",onChange:s})))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,gutterSize:"m"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:c("icon"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.iconLabel",defaultMessage:"Icon (required)"})},Object(u.jsx)(ps,{value:d.icon,onChange:v("icon")}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:c("fields"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.fieldsLabel",defaultMessage:"Fields (required - comma separated paths)"}),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{onChange:v("fields"),value:d.fields,fullWidth:!0,"data-test-subj":"annotationFieldsInput"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:c("rowTemplate"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.rowTemplateLabel",defaultMessage:"Row template (required)"}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.rowTemplateHelpText",defaultMessage:"eg.{rowTemplateExample}",values:{rowTemplateExample:Object(u.jsx)(g.EuiCode,null,"{{field}}")}})),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{onChange:v("template"),value:d.template,fullWidth:!0,"data-test-subj":"annotationRowTemplateInput"}))))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(y,{onAdd:i,onDelete:a,togglePanelActivation:x,isPanelActive:!d.hidden}))))};s(127);const vs=({handleAdd:e})=>Object(u.jsx)(g.EuiText,{textAlign:"center"},Object(u.jsx)("p",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.howToCreateAnnotationDataSourceDescription",defaultMessage:"Click the button below to create an annotation data source."})),Object(u.jsx)(g.EuiButton,{fill:!0,onClick:e,"data-test-subj":"addDataSourceButton"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.addDataSourceButtonLabel",defaultMessage:"Add data source"}))),hs=e=>({name:"annotations",...e}),Os=e=>{const{annotations:t}=e.model,s=Object(l.useCallback)((()=>{return ge.handleAdd(hs(e),(t=e.defaultIndexPattern,()=>({id:Object(O.v4)(),color:"#F00",index_pattern:t&&t.id?{id:t.id}:"",time_field:"",icon:"fa-tag",ignore_global_filters:1,ignore_panel_filters:1})));var t}),[e]),i=Object(l.useCallback)((t=>()=>ge.handleDelete(hs(e),t)),[e]),a=Object(l.useCallback)((t=>s=>ge.handleChange(hs(e),{...t,...s})),[e]);return Object(u.jsx)("div",{className:"tvbAnnotationsEditor__container"},null!=t&&t.length?Object(u.jsx)("div",null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.annotationsEditor.dataSourcesLabel",defaultMessage:"Data sources"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),t.map((t=>Object(u.jsx)(xs,{key:t.id,annotation:t,fields:e.fields,onChange:a(t),handleAdd:s,handleDelete:i(t)})))):Object(u.jsx)(vs,{handleAdd:s}))};let fs=function(e){return e.DATA="data",e.OPTIONS="options",e.ANNOTATIONS="annotations",e.MARKDOWN="markdown",e}({});const Ts=[{label:h.i18n.translate("visTypeTimeseries.timeseries.positionOptions.rightLabel",{defaultMessage:"Right"}),value:"right"},{label:h.i18n.translate("visTypeTimeseries.timeseries.positionOptions.leftLabel",{defaultMessage:"Left"}),value:"left"}],Es=[{label:h.i18n.translate("visTypeTimeseries.timeseries.tooltipOptions.showAll",{defaultMessage:"Show all values"}),value:"show_all"},{label:h.i18n.translate("visTypeTimeseries.timeseries.tooltipOptions.showFocused",{defaultMessage:"Show focused values"}),value:"show_focused"}],ys=[{label:h.i18n.translate("visTypeTimeseries.timeseries.scaleOptions.normalLabel",{defaultMessage:"Normal"}),value:"normal"},{label:h.i18n.translate("visTypeTimeseries.timeseries.scaleOptions.logLabel",{defaultMessage:"Log"}),value:"log"}],Ms=[{label:h.i18n.translate("visTypeTimeseries.timeseries.legendPositionOptions.rightLabel",{defaultMessage:"Right"}),value:"right"},{label:h.i18n.translate("visTypeTimeseries.timeseries.legendPositionOptions.leftLabel",{defaultMessage:"Left"}),value:"left"},{label:h.i18n.translate("visTypeTimeseries.timeseries.legendPositionOptions.bottomLabel",{defaultMessage:"Bottom"}),value:"bottom"}];class timeseries_TimeseriesPanelConfig extends l.Component{constructor(e){super(e),a()(this,"handleTextChange",(e=>t=>this.props.onChange({[e]:t.target.value}))),this.state={selectedTab:fs.DATA}}switchTab(e){this.setState({selectedTab:e})}render(){const e={filter:{query:"",language:Object(St.a)()},axis_max:"",axis_min:"",legend_position:"right",show_grid:1,tooltip_mode:L.h.SHOW_ALL,ignore_daylight_time:!1,...this.props.model},{selectedTab:t}=this.state,s=ie(this.props.onChange),i=Object(g.htmlIdGenerator)(),a=Ts.find((t=>e.axis_position===t.value)),l=ys.find((t=>e.axis_scale===t.value)),o=Ms.find((t=>e.legend_position===t.value)),r=Es.find((t=>e.tooltip_mode===t.value));let d;if(t===fs.DATA)d=Object(u.jsx)(series_editor_SeriesEditor,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange});else if(t===fs.ANNOTATIONS)d=Object(u.jsx)(Os,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,defaultIndexPattern:this.props.defaultIndexPattern});else{var c,b,j,m;d=Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.dataLabel",defaultMessage:"Data"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(Ct,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,allowLevelOfDetail:!0,allowIndexSwitchingMode:!0}),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("panelFilter"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null===(c=e.filter)||void 0===c?void 0:c.language)||Object(St.a)(),query:(null===(b=e.filter)||void 0===b?void 0:b.query)||""},onChange:e=>{this.props.onChange({filter:e})},indexPatterns:[e.index_pattern],"data-test-subj":"panelFilterQueryBar"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.timeseries.optionsTab.ignoreGlobalFilterLabel",{defaultMessage:"Ignore global filter?"})},Object(u.jsx)(ct,{value:e.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.timeseries.optionsTab.ignoreDaylightTimeLabel",{defaultMessage:"Ignore daylight time?"})},Object(u.jsx)(ct,{value:e.ignore_daylight_time,name:"ignore_daylight_time",onChange:this.props.onChange}))))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.styleLabel",defaultMessage:"Style"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("axisMin"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.axisMinLabel",defaultMessage:"Axis min"})},Object(u.jsx)(g.EuiFieldText,{onChange:this.handleTextChange("axis_min"),value:null!==(j=e.axis_min)&&void 0!==j?j:""}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("axisMax"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.axisMaxLabel",defaultMessage:"Axis max"})},Object(u.jsx)(g.EuiFieldText,{onChange:this.handleTextChange("axis_max"),value:null!==(m=e.axis_max)&&void 0!==m?m:""}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("axisPos"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.axisPositionLabel",defaultMessage:"Axis position"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:Ts,selectedOptions:a?[a]:[],onChange:s("axis_position"),singleSelection:{asPlainText:!0}}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("axisScale"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.axisScaleLabel",defaultMessage:"Axis scale"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:ys,selectedOptions:l?[l]:[],onChange:s("axis_scale"),singleSelection:{asPlainText:!0}})))),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{onChange:this.props.onChange,name:"background_color",value:e.background_color})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.displayGridLabel",defaultMessage:"Display grid"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(ct,{value:e.show_grid,name:"show_grid",onChange:this.props.onChange})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.tooltipMode",defaultMessage:"Tooltip"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,id:i("tooltipMode"),options:Es,selectedOptions:r?[r]:[],onChange:s("tooltip_mode"),singleSelection:{asPlainText:!0}}))),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.showLegendLabel",defaultMessage:"Show legend?"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(ct,{value:e.show_legend,name:"show_legend",onChange:this.props.onChange})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.truncateLegendLabel",defaultMessage:"Truncate legend?"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(ct,{value:e.truncate_legend,name:"truncate_legend",onChange:this.props.onChange,"data-test-subj":"timeSeriesEditorDataTruncateLegendSwitch"})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.maxLinesLabel",defaultMessage:"Maximum legend lines"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFieldNumber,{"data-test-subj":"timeSeriesEditorDataMaxLegendLines",value:e.max_lines_legend,min:1,max:5,compressed:!0,disabled:!Boolean(e.truncate_legend),onChange:e=>{const t=Number(e.target.value);this.props.onChange({max_lines_legend:Math.min(5,Math.max(t,1))})}})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,{htmlFor:i("legendPos")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.legendPositionLabel",defaultMessage:"Legend position"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,id:i("legendPos"),options:Ms,selectedOptions:o?[o]:[],onChange:s("legend_position"),singleSelection:{asPlainText:!0}})))))}return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:t===fs.DATA,onClick:()=>this.switchTab(fs.DATA),"data-test-subj":"timeSeriesEditorDataBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.dataTab.dataButtonLabel",defaultMessage:"Data"})),Object(u.jsx)(g.EuiTab,{isSelected:t===fs.OPTIONS,onClick:()=>this.switchTab(fs.OPTIONS),"data-test-subj":"timeSeriesEditorPanelOptionsBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"})),Object(u.jsx)(g.EuiTab,{isSelected:t===fs.ANNOTATIONS,onClick:()=>this.switchTab(fs.ANNOTATIONS),"data-test-subj":"timeSeriesEditorAnnotationsBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.timeseries.annotationsTab.annotationsButtonLabel",defaultMessage:"Annotations"}))),d)}}class metric_MetricPanelConfig extends l.Component{constructor(e){super(e),this.state={selectedTab:fs.DATA}}UNSAFE_componentWillMount(){const{model:e}=this.props;(!e.background_color_rules||e.background_color_rules&&0===e.background_color_rules.length)&&this.props.onChange({background_color_rules:[{id:Object(O.v4)()}]})}switchTab(e){this.setState({selectedTab:e})}render(){var e,t;const{selectedTab:s}=this.state,i={filter:{query:"",language:Object(St.a)()},...this.props.model},a=Object(g.htmlIdGenerator)(),l=s===fs.DATA?Object(u.jsx)(series_editor_SeriesEditor,{colorPicker:!1,fields:this.props.fields,limit:D[L.e.METRIC],model:this.props.model,onChange:this.props.onChange}):Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.optionsTab.dataLabel",defaultMessage:"Data"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(Ct,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,allowIndexSwitchingMode:!0}),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:a("panelFilter"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null===(e=i.filter)||void 0===e?void 0:e.language)||Object(St.a)(),query:(null===(t=i.filter)||void 0===t?void 0:t.query)||""},onChange:e=>{this.props.onChange({filter:e})},indexPatterns:[i.index_pattern]}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.metric.optionsTab.ignoreGlobalFilterLabel",{defaultMessage:"Ignore global filter?"})},Object(u.jsx)(ct,{value:i.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange}))))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(ls,{model:i,onChange:this.props.onChange,name:"background_color_rules"})));return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:s===fs.DATA,onClick:()=>this.switchTab(fs.DATA),"data-test-subj":"metricEditorDataBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.dataTab.dataButtonLabel",defaultMessage:"Data"})),Object(u.jsx)(g.EuiTab,{isSelected:s===fs.OPTIONS,onClick:()=>this.switchTab(fs.OPTIONS),"data-test-subj":"metricEditorPanelOptionsBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.metric.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),l)}}class top_n_TopNPanelConfig extends l.Component{constructor(e){super(e),a()(this,"handleTextChange",(e=>t=>this.props.onChange({[e]:t.target.value}))),this.state={selectedTab:fs.DATA}}UNSAFE_componentWillMount(){const{model:e}=this.props;e.bar_color_rules&&e.bar_color_rules.length||this.props.onChange({bar_color_rules:[{id:Object(O.v4)()}]})}switchTab(e){this.setState({selectedTab:e})}render(){var e,t,s;const{selectedTab:i}=this.state,a={drilldown_url:"",filter:{query:"",language:Object(St.a)()},...this.props.model},l=Object(g.htmlIdGenerator)(),o=i===fs.DATA?Object(u.jsx)(series_editor_SeriesEditor,{colorPicker:!1,fields:this.props.fields,model:this.props.model,onChange:this.props.onChange}):Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.dataLabel",defaultMessage:"Data"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFormRow,{id:l("itemUrl"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.itemUrlDescription",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:Object(u.jsx)(g.EuiCode,null,"{{key}}")}}))},Object(u.jsx)(g.EuiFieldText,{onChange:this.handleTextChange("drilldown_url"),value:null!==(e=a.drilldown_url)&&void 0!==e?e:""})),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(Ct,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,allowIndexSwitchingMode:!0}),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:l("panelFilter"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null===(t=a.filter)||void 0===t?void 0:t.language)||Object(St.a)(),query:(null===(s=a.filter)||void 0===s?void 0:s.query)||""},onChange:e=>{this.props.onChange({filter:e})},indexPatterns:[a.index_pattern]}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.topN.optionsTab.ignoreGlobalFilterLabel",{defaultMessage:"Ignore global filter?"})},Object(u.jsx)(ct,{value:a.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange}))))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.styleLabel",defaultMessage:"Style"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{onChange:this.props.onChange,name:"background_color",value:a.background_color}))),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiTitle,{size:"xxs"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),Object(u.jsx)(g.EuiSpacer,{size:"s"}),Object(u.jsx)(ls,{model:a,primaryVarName:"bar_color",primaryName:"bar",hideSecondary:!0,onChange:this.props.onChange,name:"bar_color_rules"})));return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:i===fs.DATA,onClick:()=>this.switchTab(fs.DATA),"data-test-subj":"topNEditorDataBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.dataTab.dataButtonLabel",defaultMessage:"Data"})),Object(u.jsx)(g.EuiTab,{isSelected:i===fs.OPTIONS,onClick:()=>this.switchTab(fs.OPTIONS),"data-test-subj":"topNEditorPanelOptionsBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.topN.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),o)}}class table_TablePanelConfig extends l.Component{constructor(e){super(e),a()(this,"handlePivotChange",(e=>{const{fields:t,model:s}=this.props,i=e=>{const i=t[Object(le.c)(s.index_pattern)].find((t=>t.name===e));return Object(r.get)(i,"type",null)};this.props.onChange(1===e.length?{pivot_id:e[0]||void 0,pivot_type:i(e[0])||void 0}:{pivot_id:e,pivot_type:e.map((e=>i(e)))})})),a()(this,"handleTextChange",(e=>t=>this.props.onChange({[e]:t.target.value}))),a()(this,"handleNumberChange",(e=>t=>this.props.onChange({[e]:t.target.value?Number(t.target.value):void 0}))),this.state={selectedTab:fs.DATA}}UNSAFE_componentWillMount(){const{model:e}=this.props;e.bar_color_rules&&e.bar_color_rules.length||this.props.onChange({bar_color_rules:[{id:Object(O.v4)()}]})}switchTab(e){this.setState({selectedTab:e})}render(){var e,t,s,i;const{selectedTab:a}=this.state,l={drilldown_url:"",filter:{query:"",language:Object(St.a)()},pivot_label:"",pivot_type:"",...this.props.model},o=Object(g.htmlIdGenerator)(),r=a===fs.DATA?Object(u.jsx)("div",null,Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiText,null,Object(u.jsx)("p",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.dataTab.defineFieldDescription",defaultMessage:"For the table visualization you need to define a field to group by using a terms aggregation."}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,{"data-test-subj":"groupByField"},Object(u.jsx)(Se,{label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.dataTab.groupByFieldLabel",defaultMessage:"Group by field"}),restrict:[we.KBN_FIELD_TYPES.NUMBER,we.KBN_FIELD_TYPES.BOOLEAN,we.KBN_FIELD_TYPES.DATE,we.KBN_FIELD_TYPES.IP,we.KBN_FIELD_TYPES.STRING],fields:this.props.fields,value:l.pivot_id,indexPattern:l.index_pattern,onChange:this.handlePivotChange,uiRestrictions:this.context.uiRestrictions,type:L.a.TERMS,allowMultiSelect:!0,fullWidth:!0})),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("pivotLabelInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.dataTab.columnLabel",defaultMessage:"Column label"}),fullWidth:!0},Object(u.jsx)(g.EuiFieldText,{"data-test-subj":"columnLabelName",onChange:this.handleTextChange("pivot_label"),value:null!==(e=l.pivot_label)&&void 0!==e?e:"",fullWidth:!0}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{id:o("pivotRowsInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.dataTab.rowsLabel",defaultMessage:"Rows"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:this.handleNumberChange("pivot_rows"),value:void 0!==l.pivot_rows?Number(l.pivot_rows):"",placeholder:"10"})))))),Object(u.jsx)(series_editor_SeriesEditor,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange})):Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.optionsTab.dataLabel",defaultMessage:"Data"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFormRow,{id:o("drilldownInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.optionsTab.itemUrlLabel",defaultMessage:"Item url"}),helpText:Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.optionsTab.itemUrlHelpText",defaultMessage:"This supports mustache templating. {key} is set to the term.",values:{key:Object(u.jsx)(g.EuiCode,null,"{{key}}")}}))},Object(u.jsx)(g.EuiFieldText,{onChange:this.handleTextChange("drilldown_url"),value:null!==(t=l.drilldown_url)&&void 0!==t?t:"","data-test-subj":"drilldownUrl"})),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(Ct,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,allowIndexSwitchingMode:!0}),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("panelFilterInput"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null===(s=l.filter)||void 0===s?void 0:s.language)||Object(St.a)(),query:(null===(i=l.filter)||void 0===i?void 0:i.query)||""},onChange:e=>{this.props.onChange({filter:e})},indexPatterns:[l.index_pattern]}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.table.optionsTab.ignoreGlobalFilterLabel",{defaultMessage:"Ignore global filter?"})},Object(u.jsx)(ct,{value:l.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange}))))));return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:a===fs.DATA,onClick:()=>this.switchTab(fs.DATA),"data-test-subj":"tableEditorDataBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.dataTab.columnsButtonLabel",defaultMessage:"Columns"})),Object(u.jsx)(g.EuiTab,{isSelected:a===fs.OPTIONS,onClick:()=>this.switchTab(fs.OPTIONS),"data-test-subj":"tableEditorPanelOptionsBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.table.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),r)}}a()(table_TablePanelConfig,"contextType",x);class gauge_GaugePanelConfig extends l.Component{constructor(e){super(e),a()(this,"handleTextChange",(e=>t=>this.props.onChange({[e]:t.target.value}))),this.state={selectedTab:fs.DATA}}UNSAFE_componentWillMount(){const{model:e}=this.props,t={};e.gauge_color_rules&&e.gauge_color_rules.length||(t.gauge_color_rules=[{id:Object(O.v4)()}]),null==e.gauge_width&&(t.gauge_width=10),null==e.gauge_inner_width&&(t.gauge_inner_width=10),null==e.gauge_style&&(t.gauge_style="half"),this.props.onChange(t)}switchTab(e){this.setState({selectedTab:e})}render(){var e,t;const{selectedTab:s}=this.state,i={gauge_max:"",filter:{query:"",language:Object(St.a)()},gauge_style:"circle",gauge_inner_width:"",gauge_width:"",...this.props.model},a=ie(this.props.onChange),l=[{label:h.i18n.translate("visTypeTimeseries.gauge.styleOptions.circleLabel",{defaultMessage:"Circle"}),value:"circle"},{label:h.i18n.translate("visTypeTimeseries.gauge.styleOptions.halfCircleLabel",{defaultMessage:"Half Circle"}),value:"half"}],o=Object(g.htmlIdGenerator)(),r=l.find((e=>i.gauge_style===e.value)),d=s===fs.DATA?Object(u.jsx)(series_editor_SeriesEditor,{colorPicker:!0,fields:this.props.fields,limit:D[L.e.GAUGE],model:this.props.model,onChange:this.props.onChange}):Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.dataLabel",defaultMessage:"Data"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(Ct,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,allowIndexSwitchingMode:!0}),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("panelFilter"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null===(e=i.filter)||void 0===e?void 0:e.language)||Object(St.a)(),query:(null===(t=i.filter)||void 0===t?void 0:t.query)||""},onChange:e=>{this.props.onChange({filter:e})},indexPatterns:[i.index_pattern]}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.gauge.optionsTab.ignoreGlobalFilterLabel",{defaultMessage:"Ignore global filter?"})},Object(u.jsx)(ct,{value:i.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange}))))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.styleLabel",defaultMessage:"Style"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("gaugeMax"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.gaugeMaxLabel",defaultMessage:"Gauge max (empty for auto)"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:this.handleTextChange("gauge_max"),value:i.gauge_max}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("gaugeStyle"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.gaugeStyleLabel",defaultMessage:"Gauge style"})},Object(u.jsx)(g.EuiComboBox,{isClearable:!1,options:l,selectedOptions:r?[r]:[],onChange:a("gauge_style"),singleSelection:{asPlainText:!0}}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("innerLine"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.innerLineWidthLabel",defaultMessage:"Inner line width"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:this.handleTextChange("gauge_inner_width"),value:Number(i.gauge_inner_width)}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:o("gaugeLine"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.gaugeLineWidthLabel",defaultMessage:"Gauge line width"})},Object(u.jsx)(g.EuiFieldNumber,{onChange:this.handleTextChange("gauge_width"),value:Number(i.gauge_width)})))),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{onChange:this.props.onChange,name:"background_color",value:i.background_color})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.innerColorLabel",defaultMessage:"Inner color:"}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(E,{onChange:this.props.onChange,name:"gauge_inner_color",value:i.gauge_inner_color}))),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiTitle,{size:"xxs"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.colorRulesLabel",defaultMessage:"Color rules"}))),Object(u.jsx)(g.EuiSpacer,{size:"s"}),Object(u.jsx)(ls,{primaryName:"gauge color",primaryVarName:"gauge",secondaryName:"text color",secondaryVarName:"text",model:i,onChange:this.props.onChange,name:"gauge_color_rules"})));return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:s===fs.DATA,onClick:()=>this.switchTab(fs.DATA),"data-test-subj":"gaugeEditorDataBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.dataTab.dataButtonLabel",defaultMessage:"Data"})),Object(u.jsx)(g.EuiTab,{isSelected:s===fs.OPTIONS,onClick:()=>this.switchTab(fs.OPTIONS),"data-test-subj":"gaugeEditorPanelOptionsBtn"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.gauge.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),d)}}var Fs=s(42),_s=s(66),Cs=s(90);s(153);class markdown_editor_MarkdownEditor extends l.Component{constructor(e){super(e),a()(this,"handleChange",(e=>{this.props.onChange({markdown:e})})),a()(this,"handleOnLoad",(e=>{this.editor=e})),a()(this,"handleVarClick",(e=>()=>{if(this.editor){const t=this.editor.getSelection();this.editor.executeEdits("",[{range:t,text:e}])}})),this.state={fieldFormatMap:void 0}}async componentDidMount(){const e=Object(Ge.d)(),{indexPattern:t}=await Object(le.b)(this.props.model.index_pattern,e);this.setState({fieldFormatMap:null==t?void 0:t.fieldFormatMap,indexPattern:t})}render(){const{visData:e,model:t,getConfig:s}=this.props;if(!e)return null;const i=d.a.get(e,`${t.id}.series`,[]),a=Object(Cs.a)(i,t,s,this.state.fieldFormatMap,this.state.indexPattern),l=[],n=Object(_s.a)("0.[0000]",null,s),o=e=>{const t=`{{ ${e} }}`;let s=d.a.get(a,e);/raw$/.test(e)&&(s=n(s)),l.push(Object(u.jsx)("tr",{key:e},Object(u.jsx)("td",null,Object(u.jsx)("a",{onClick:this.handleVarClick(t)},t)),Object(u.jsx)("td",null,Object(u.jsx)("code",null,"â€œ",s,"â€"))))},r=e=>{const t=`{{# ${e} }}{{/ ${e} }}`,s=d.a.get(a,`${e}[0][0]`);let i=d.a.get(a,`${e}[0][1]`);/raw$/.test(e)&&(i=n(i)),l.push(Object(u.jsx)("tr",{key:e},Object(u.jsx)("td",null,Object(u.jsx)("a",{onClick:this.handleVarClick(t)},`{{ ${e} }}`)),Object(u.jsx)("td",null,Object(u.jsx)("code",null,"[ [ â€œ",s,"â€, â€œ",i,"â€ ], ... ]"))))};return function e(t,s=[]){for(const i in t)Array.isArray(t[i])?r(s.concat(i).join(".")):d.a.isObject(t[i])?e(t[i],s.concat(i)):o(s.concat(i).join("."))}(a),Object(u.jsx)("div",{className:"tvbMarkdownEditor"},Object(u.jsx)("div",{className:"tvbMarkdownEditor__editor"},Object(u.jsx)(Fs.CodeEditor,{editorDidMount:this.handleOnLoad,languageId:Fs.MarkdownLang,options:{fontSize:"14px",wordWrap:"on"},value:t.markdown,onChange:this.handleChange})),Object(u.jsx)("div",{className:"tvbMarkdownEditor__variables"},Object(u.jsx)(g.EuiText,null,Object(u.jsx)("p",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdownEditor.howToUseVariablesInMarkdownDescription",defaultMessage:"The following variables can be used in the Markdown by using the Handlebar (mustache) syntax. {handlebarLink} on the available expressions.",values:{handlebarLink:Object(u.jsx)("a",{href:"https://ela.st/handlebars-docs",target:"_BLANK",rel:"noreferrer noopener"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdownEditor.howUseVariablesInMarkdownDescription.documentationLinkText",defaultMessage:"Click here for documentation"}))}}))),Object(u.jsx)("table",{className:"table","data-test-subj":"tsvbMarkdownVariablesTable"},Object(u.jsx)("thead",null,Object(u.jsx)("tr",null,Object(u.jsx)("th",{scope:"col"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdownEditor.nameLabel",defaultMessage:"Name"})),Object(u.jsx)("th",{scope:"col"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdownEditor.valueLabel",defaultMessage:"Value"})))),Object(u.jsx)("tbody",null,l)),0===l.length&&Object(u.jsx)(g.EuiTitle,{size:"xxs",className:"tsvbMarkdownVariablesTable__noVariables","data-test-subj":"tvbMarkdownEditor__noVariables"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdownEditor.noVariablesAvailableDescription",defaultMessage:"No variables available for the selected data metrics."}))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiText,null,Object(u.jsx)("p",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdownEditor.howToAccessEntireTreeDescription",defaultMessage:"There is also a special variable named {all} which you can use to access the entire tree. This is useful for creating lists with data from a group by:",values:{all:Object(u.jsx)("code",null,"_all")}}))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiCodeBlock,null,"# All servers:\n\n    {{#each _all}}\n    - {{ label }} {{ last.formatted }}\n    {{/each}}")))}}class markdown_MarkdownPanelConfig extends l.Component{constructor(e){super(e),this.state={selectedTab:fs.MARKDOWN},this.handleCSSChange=this.handleCSSChange.bind(this)}switchTab(e){this.setState({selectedTab:e})}handleCSSChange(e){this.props.onChange({markdown_css:e})}render(){const e={filter:{query:"",language:Object(St.a)()},...this.props.model},{selectedTab:t}=this.state,s=ie(this.props.onChange),i=Object(g.htmlIdGenerator)(),a=[{label:h.i18n.translate("visTypeTimeseries.markdown.alignOptions.topLabel",{defaultMessage:"Top"}),value:"top"},{label:h.i18n.translate("visTypeTimeseries.markdown.alignOptions.middleLabel",{defaultMessage:"Middle"}),value:"middle"},{label:h.i18n.translate("visTypeTimeseries.markdown.alignOptions.bottomLabel",{defaultMessage:"Bottom"}),value:"bottom"}],l=a.find((t=>e.markdown_vertical_align===t.value));let o;if(t===fs.MARKDOWN)o=Object(u.jsx)(x.Consumer,null,(e=>Object(u.jsx)(markdown_editor_MarkdownEditor,I()({visData:e},this.props))));else if(t===fs.DATA)o=Object(u.jsx)(series_editor_SeriesEditor,{colorPicker:!1,fields:this.props.fields,model:this.props.model,onChange:this.props.onChange});else{var r,d,c;o=Object(u.jsx)("div",{className:"tvbPanelConfig__container"},Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.dataLabel",defaultMessage:"Data"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(Ct,{fields:this.props.fields,model:this.props.model,onChange:this.props.onChange,allowIndexSwitchingMode:!0}),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0},Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiFormRow,{id:i("panelFilter"),label:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.panelFilterLabel",defaultMessage:"Panel filter"}),fullWidth:!0},Object(u.jsx)(Ve,{query:{language:(null===(r=e.filter)||void 0===r?void 0:r.language)||Object(St.a)(),query:(null===(d=e.filter)||void 0===d?void 0:d.query)||""},onChange:e=>{this.props.onChange({filter:e})},indexPatterns:[e.index_pattern]}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.markdown.optionsTab.ignoreGlobalFilterLabel",{defaultMessage:"Ignore global filter?"})},Object(u.jsx)(ct,{value:e.ignore_global_filter,name:"ignore_global_filter",onChange:this.props.onChange}))))),Object(u.jsx)(g.EuiSpacer,null),Object(u.jsx)(g.EuiPanel,null,Object(u.jsx)(g.EuiTitle,{size:"s"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.styleLabel",defaultMessage:"Style"}))),Object(u.jsx)(g.EuiSpacer,{size:"m"}),Object(u.jsx)(g.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center"},Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.backgroundColorLabel",defaultMessage:"Background color:"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(E,{onChange:this.props.onChange,name:"background_color",value:e.background_color})),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.markdown.optionsTab.showScrollbarsLabel",{defaultMessage:"Show scrollbars?"})},Object(u.jsx)(ct,{value:e.markdown_scrollbars,name:"markdown_scrollbars",onChange:this.props.onChange}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormRow,{label:h.i18n.translate("visTypeTimeseries.markdown.optionsTab.openLinksInNewTab",{defaultMessage:"Open links in new tab?"})},Object(u.jsx)(ct,{value:e.markdown_openLinksInNewTab,name:"markdown_openLinksInNewTab",onChange:this.props.onChange}))),Object(u.jsx)(g.EuiFlexItem,{grow:!1},Object(u.jsx)(g.EuiFormLabel,{htmlFor:i("valign")},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.verticalAlignmentLabel",defaultMessage:"Vertical alignment:"}))),Object(u.jsx)(g.EuiFlexItem,null,Object(u.jsx)(g.EuiComboBox,{id:i("valign"),isClearable:!1,options:a,selectedOptions:l?[l]:[],onChange:s("markdown_vertical_align"),singleSelection:{asPlainText:!0}}))),Object(u.jsx)(g.EuiHorizontalRule,null),Object(u.jsx)(g.EuiTitle,{size:"xxs"},Object(u.jsx)("span",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.customCSSLabel",defaultMessage:"Custom CSS",description:"CSS is name of technology and should not be translated."}))),Object(u.jsx)(g.EuiSpacer,{size:"s"}),Object(u.jsx)(Fs.CodeEditor,{height:"500px",languageId:Fs.CssLang,options:{fontSize:14},value:null!==(c=e.markdown_css)&&void 0!==c?c:"",onChange:this.handleCSSChange})))}return Object(u.jsx)(n.a.Fragment,null,Object(u.jsx)(g.EuiTabs,{size:"s"},Object(u.jsx)(g.EuiTab,{isSelected:t===fs.MARKDOWN,onClick:()=>this.switchTab(fs.MARKDOWN),"data-test-subj":"markdown-subtab"},"Markdown"),Object(u.jsx)(g.EuiTab,{"data-test-subj":"data-subtab",isSelected:t===fs.DATA,onClick:()=>this.switchTab(fs.DATA)},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.dataTab.dataButtonLabel",defaultMessage:"Data"})),Object(u.jsx)(g.EuiTab,{isSelected:t===fs.OPTIONS,onClick:()=>this.switchTab(fs.OPTIONS),"data-test-subj":"options-subtab"},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.markdown.optionsTab.panelOptionsButtonLabel",defaultMessage:"Panel options"}))),o)}}s(158);const Ss={timeseries:timeseries_TimeseriesPanelConfig,table:table_TablePanelConfig,metric:metric_MetricPanelConfig,top_n:top_n_TopNPanelConfig,gauge:gauge_GaugePanelConfig,markdown:markdown_MarkdownPanelConfig};function ws(e){const{model:t,onChange:s}=e,i=Ss[t.type],a=Object(l.useRef)({}),[n,o]=Object(l.useState)({});Object(l.useEffect)((()=>{const t=e.visData$.subscribe(((e={})=>o(e)));return()=>t.unsubscribe()}),[t.id,e.visData$]);const r=Object(l.useCallback)(((e,t)=>{var i;a.current[e]=t,s({isModelInvalid:(i=a.current,!Object.values(i).every((e=>e)))})}),[s]);return i?Object(u.jsx)(m.Provider,{value:r},Object(u.jsx)(v.Provider,{value:t},Object(u.jsx)(x.Provider,{value:n},Object(u.jsx)("div",{"data-test-subj":`tvbPanelConfig__${t.type}`},Object(u.jsx)(i,e))))):Object(u.jsx)("div",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.missingPanelConfigDescription",defaultMessage:"Missing panel config for â€œ{modelType}â€",values:{modelType:t.type}}))}const Is=[{type:L.e.TIMESERIES,label:h.i18n.translate("visTypeTimeseries.visPicker.timeSeriesLabel",{defaultMessage:"Time Series"})},{type:L.e.METRIC,label:h.i18n.translate("visTypeTimeseries.visPicker.metricLabel",{defaultMessage:"Metric"})},{type:L.e.TOP_N,label:h.i18n.translate("visTypeTimeseries.visPicker.topNLabel",{defaultMessage:"Top N"})},{type:L.e.GAUGE,label:h.i18n.translate("visTypeTimeseries.visPicker.gaugeLabel",{defaultMessage:"Gauge"})},{type:L.e.MARKDOWN,label:"Markdown"},{type:L.e.TABLE,label:h.i18n.translate("visTypeTimeseries.visPicker.tableLabel",{defaultMessage:"Table"})}],Ls=({onChange:e,currentVisType:t})=>Object(u.jsx)(g.EuiTabs,{size:"l"},Is.map((({label:s,type:i})=>Object(u.jsx)(g.EuiTab,{key:i,isSelected:i===t,onClick:()=>e({type:i}),"data-test-subj":`${i}TsvbTypeBtn`},s))));async function As(e=[],t){const s=Array.isArray(e)?e:[e],i=Object(Ge.b)(),a=i.uiSettings.get("defaultIndex");try{const e=await Promise.all(s.map((async e=>{try{return"string"!=typeof e&&null!=e&&e.id?Object(Y.f)((await Object(Ge.d)().get(e.id)).getNonScriptedFields()):i.http.get(Ae.b.FIELDS,{query:{index:`${null!=e?e:""}`},signal:t})}catch(e){return[]}})));return s.reduce(((t,s,i)=>{const l=Object(le.c)(s);return{...t,[l]:e[i],...l===a?{"":e[i]}:{}}}),{})}catch(e){"AbortError"!==e.name&&Object(Ge.b)().notifications.toasts.addDanger({title:h.i18n.translate("visTypeTimeseries.fetchFields.loadIndexPatternFieldsErrorMessage",{defaultMessage:"Unable to load index_pattern fields"}),text:e.message})}return{}}var Ps=s(163),Ds=s.n(Ps);const ks=()=>{const[e,t]=Ds()("TSVB_INDEX_PATTERN_CALLOUT_HIDDEN",!1),s=Object(l.useMemo)((()=>Object(Ge.b)().docLinks.links.visualize.tsvbIndexPatternMode),[]),i=Object(l.useCallback)((()=>{t(!0)}),[t]);return e?null:Object(u.jsx)(g.EuiCallOut,{title:Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.dataViewMode.notificationTitle",defaultMessage:"TSVB supports data views"}),iconType:"cheer",size:"s"},Object(u.jsx)("p",null,Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.dataViewMode.notificationMessage",defaultMessage:"Great news! You can visualize the data from Kibana data views (recommended) or Elasticsearch indices. {indexPatternModeLink}.",values:{indexPatternModeLink:Object(u.jsx)(g.EuiLink,{href:s,target:"_blank",external:!0},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.dataViewMode.link",defaultMessage:"Check it out."}))}})),Object(u.jsx)(g.EuiFlexGroup,{gutterSize:"none"},Object(u.jsx)(g.EuiButton,{size:"s",onClick:i},Object(u.jsx)(p.FormattedMessage,{id:"visTypeTimeseries.visEditorVisualization.dataViewMode.dismissNoticeButtonText",defaultMessage:"Dismiss"}))))};var Rs={name:"6aekzq",styles:"overflow-y:auto;overflow-x:hidden;flex:1"};class vis_editor_VisEditor extends l.Component{constructor(e){super(e),a()(this,"abortControllerFetchFields",void 0),a()(this,"localStorage",void 0),a()(this,"visDataSubject",void 0),a()(this,"visData$",void 0),a()(this,"getConfig",(e=>this.props.config.get(e))),a()(this,"updateVisState",Object(r.debounce)((()=>{this.props.vis.params=this.state.model,this.props.embeddableHandler.reload(),this.props.eventEmitter.emit("dirtyStateChange",{isDirty:!1})}),200)),a()(this,"abortableFetchFields",(e=>{var t;return null===(t=this.abortControllerFetchFields)||void 0===t||t.abort(),this.abortControllerFetchFields=new AbortController,As(e,this.abortControllerFetchFields.signal)})),a()(this,"handleChange",(e=>{if(Object(r.isEmpty)(e))return;const t=e.type&&this.state.model.type!==e.type;let s=!0;(this.state.autoApply||t)&&(this.updateVisState(),s=!1);const i={...this.state.model,...e},a=Object(le.a)(i,this.getDefaultIndex());Object(r.isEqual)(this.state.extractedIndexPatterns,a)||this.abortableFetchFields(a).then((e=>{this.setState({visFields:e,extractedIndexPatterns:a})})),this.setState({dirty:s,model:i})})),a()(this,"updateModel",(()=>{const{params:e}=this.props.vis.clone();this.setState({model:e})})),a()(this,"handleCommit",(()=>{this.updateVisState(),this.setState({dirty:!1})})),a()(this,"handleAutoApplyToggle",(e=>{this.setState({autoApply:e.target.checked})})),a()(this,"onDataChange",(e=>{this.visDataSubject.next(null==e?void 0:e.visData)})),this.localStorage=new b.Storage(window.localStorage),this.state={autoApply:!0,dirty:!1,model:{[L.g]:this.props.vis.title&&"timeseries"!==this.props.vis.params.type?L.f.LAST_VALUE:L.f.ENTIRE_TIME_RANGE,...this.props.vis.params,series:this.props.vis.params.series.map((e=>({[L.g]:this.props.vis.title&&"timeseries"!==this.props.vis.params.type&&e.override_index_pattern?L.f.LAST_VALUE:L.f.ENTIRE_TIME_RANGE,...e})))},extractedIndexPatterns:[""]},this.visDataSubject=new o.BehaviorSubject(void 0),this.visData$=this.visDataSubject.asObservable().pipe(Object(o.share)())}render(){const{model:e,visFields:t}=this.state;if(!t)return null;const s=Rs;return Object(u.jsx)(c.KibanaContextProvider,{services:{appName:"VisEditor",storage:this.localStorage,unifiedSearch:Object(Ge.g)(),data:Object(Ge.c)(),...Object(Ge.b)()}},Object(u.jsx)("div",{css:s,"data-test-subj":"tvbVisEditor"},!this.props.vis.params.use_kibana_indexes&&Object(u.jsx)(ks,null),Object(u.jsx)("div",{className:"tvbEditor--hideForReporting"},Object(u.jsx)(Ls,{currentVisType:e.type,onChange:this.handleChange})),Object(u.jsx)(j,{dirty:this.state.dirty,autoApply:this.state.autoApply,model:e,embeddableHandler:this.props.embeddableHandler,eventEmitter:this.props.eventEmitter,vis:this.props.vis,timeRange:this.props.timeRange,filters:this.props.filters,query:this.props.query,uiState:this.props.uiState,onCommit:this.handleCommit,onToggleAutoApply:this.handleAutoApplyToggle,title:this.props.vis.title,description:this.props.vis.description,onDataChange:this.onDataChange}),Object(u.jsx)("div",{className:"tvbEditor--hideForReporting"},Object(u.jsx)(ws,{fields:t,model:e,visData$:this.visData$,onChange:this.handleChange,getConfig:this.getConfig,defaultIndexPattern:this.props.defaultIndexPattern}))))}async componentDidMount(){const e=Object(le.a)(this.props.vis.params,this.getDefaultIndex()),t=await As(e);this.setState({visFields:t}),this.props.eventEmitter.on("updateEditor",this.updateModel)}componentWillUnmount(){var e;this.updateVisState.cancel(),null===(e=this.abortControllerFetchFields)||void 0===e||e.abort(),this.props.eventEmitter.off("updateEditor",this.updateModel)}getDefaultIndex(){var e;return null!==(e=this.props.config.get("defaultIndex"))&&void 0!==e?e:""}}},51:function(e,t,s){"use strict";var i,a=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),l=[];function n(e){for(var t=-1,s=0;s<l.length;s++)if(l[s].identifier===e){t=s;break}return t}function o(e,t){for(var s={},i=[],a=0;a<e.length;a++){var o=e[a],r=t.base?o[0]+t.base:o[0],d=s[r]||0,u="".concat(r," ").concat(d);s[r]=d+1;var c=n(u),b={css:o[1],media:o[2],sourceMap:o[3]};-1!==c?(l[c].references++,l[c].updater(b)):l.push({identifier:u,updater:j(b,t),references:1}),i.push(u)}return i}function r(e){var t=document.createElement("style"),i=e.attributes||{};if(void 0===i.nonce){var l=s.nc;l&&(i.nonce=l)}if(Object.keys(i).forEach((function(e){t.setAttribute(e,i[e])})),"function"==typeof e.insert)e.insert(t);else{var n=a(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var d,u=(d=[],function(e,t){return d[e]=t,d.filter(Boolean).join("\n")});function c(e,t,s,i){var a=s?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(e.styleSheet)e.styleSheet.cssText=u(t,a);else{var l=document.createTextNode(a),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(l,n[t]):e.appendChild(l)}}function b(e,t,s){var i=s.css,a=s.media,l=s.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),l&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var g=null,p=0;function j(e,t){var s,i,a;if(t.singleton){var l=p++;s=g||(g=r(t)),i=c.bind(null,s,l,!1),a=c.bind(null,s,l,!0)}else s=r(t),i=b.bind(null,s,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var s=o(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var i=0;i<s.length;i++){var a=n(s[i]);l[a].references--}for(var r=o(e,t),d=0;d<s.length;d++){var u=n(s[d]);0===l[u].references&&(l[u].updater(),l.splice(u,1))}s=r}}}},52:function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,i,a,l=e[1]||"",n=e[3];if(!n)return l;if(t&&"function"==typeof btoa){var o=(s=n,i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(a," */")),r=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[l].concat(r).concat([o]).join("\n")}return[l].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,i){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(i)for(var l=0;l<this.length;l++){var n=this[l][0];null!=n&&(a[n]=!0)}for(var o=0;o<e.length;o++){var r=[].concat(e[o]);i&&a[r[0]]||(s&&(r[2]?r[2]="".concat(s," and ").concat(r[2]):r[2]=s),t.push(r))}},t}},53:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s(33),a=s(0);function l(){return Object(a.f)().get(i.UI_SETTINGS.SEARCH_QUERY_LANGUAGE)}},56:function(e,t,s){"use strict";var i=s(58);s.d(t,"a",(function(){return i.b})),s.d(t,"c",(function(){return i.c})),s.d(t,"d",(function(){return i.d})),s.d(t,"e",(function(){return i.e})),s.d(t,"f",(function(){return i.f})),s.d(t,"g",(function(){return i.g}));var a=s(60);s.d(t,"b",(function(){return a.a}))},58:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return l})),s.d(t,"d",(function(){return n})),s.d(t,"g",(function(){return o})),s.d(t,"f",(function(){return r})),s.d(t,"c",(function(){return d}));const i={LINE_COLOR:"rgba(105,112,125,0.2)",TEXT_COLOR:"rgba(0,0,0,0.4)",TEXT_COLOR_REVERSED:"rgba(255,255,255,0.5)",VALUE_COLOR:"rgba(0,0,0,0.7)",VALUE_COLOR_REVERSED:"rgba(255,255,255,0.8)"},a={stroke:"rgba(125,125,125,0.1)"},l=0,n=[0],o=[1],r=[2],d={NONE:"none",PERCENT:"percent",STACKED:"stacked",STACKED_WITHIN_SERIES:"stacked_within_series"}},60:function(e,t,s){"use strict";s.d(t,"a",(function(){return v})),s(3);var i=s(1);const a="fa-asterisk",l="fa-bell",n="fa-bolt",o="fa-bomb",r="fa-bug",d="fa-comment",u="fa-exclamation-triangle",c="fa-fire",b="fa-flag",g="fa-heart",p="fa-map-marker",j="fa-map-pin",m="fa-star",x="fa-tag",v={[a]:"asterisk",[l]:"bell",[n]:"bolt",[o]:()=>Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(i.jsx)("path",{d:"M3.92176768,4.53361616 L3.46466635,5.59664282 L2.65302767,4.14840719 L0.999875397,3.99598886 L2.12641918,2.77654518 L1.76052549,1.15720408 L3.26840652,1.85178207 L4.69542405,1.00339256 L4.500802,2.65210905 L5.74864103,3.7471166 L4.73514583,3.9490388 L5.61669633,5.03766301 C6.0459022,4.69009896 6.67559863,4.75628272 7.02316269,5.18548858 L7.15815921,5.3521954 C7.8837785,5.06498672 8.68754455,4.943927 9.51742529,5.03115098 C12.2637217,5.31979836 14.2560398,7.78010639 13.9673924,10.5264028 C13.6787451,13.2726992 11.218437,15.2650173 8.47214065,14.9763699 C5.72584427,14.6877226 3.73352611,12.2274145 4.02217349,9.48111814 C4.10939747,8.6512374 4.39492411,7.8902053 4.82672133,7.24015658 L4.6917248,7.07344975 C4.34416075,6.64424389 4.41034451,6.01454746 4.83955037,5.6669834 L3.92176768,4.53361616 Z M5.46887076,6.44412936 L6.12580983,7.24015658 C6.03489722,7.30663504 5.87952666,7.491071 5.65969815,7.79346445 C5.30650784,8.32517447 5.08508565,8.93495668 5.01669539,9.5856466 C4.78577748,11.7826837 6.37963201,13.7509301 8.57666912,13.981848 C10.7737062,14.2127659 12.7419526,12.6189114 12.9728706,10.4218743 C13.2037885,8.2248372 11.6099339,6.25659078 9.41289682,6.02567287 C8.7622069,5.95728261 8.11971364,6.04708534 7.52619036,6.28200886 C7.24048061,6.40187373 7.0242157,6.5121707 6.87739563,6.61289978 L6.24601673,5.81480897 L5.46887076,6.44412936 Z M3.34009664,3.61834468 C3.6160708,3.60870745 3.83197954,3.37717367 3.82234231,3.10119951 C3.81270508,2.82522536 3.5811713,2.60931662 3.30519715,2.61895385 C3.02922299,2.62859108 2.81331425,2.86012485 2.82295148,3.13609901 C2.83258871,3.41207317 3.06412249,3.62798191 3.34009664,3.61834468 Z M9.2038399,8.01471666 C8.92921026,7.98585193 8.72997844,7.73982112 8.75884318,7.46519148 C8.78770792,7.19056185 9.03373872,6.99133003 9.30836836,7.02019477 C10.7411945,7.17079087 11.8319627,8.30660625 11.9782919,9.68376241 C11.9842403,9.72621687 11.9855849,9.77015886 11.9808868,9.81485847 C11.9520221,10.0894881 11.7059913,10.2887199 11.4313616,10.2598552 C11.1835304,10.2338071 10.9971003,10.0309074 10.9842889,9.78973323 C10.8859009,8.87197536 10.1588372,8.11509093 9.2038399,8.01471666 Z"})),[r]:"bug",[d]:"editorComment",[u]:"warning",[c]:()=>Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},Object(i.jsx)("path",{d:"M10.4285489,13.2131862 C11.3850613,12.5116211 12,11.4062861 12,10.1681623 C12,8.88948911 11.7647926,7.64522527 11.315853,6.48027409 L10.7184365,8.07936372 L9.62838732,6.51595716 C8.65161637,5.11502026 7.41222171,3.90368767 5.9820674,2.94508952 C5.99399825,3.12925457 6,3.31436795 6,3.50022638 C6,5.08794888 5.48443413,6.95085436 4.74437685,7.94154468 C4.26219055,8.5870316 4,9.35779518 4,10.1681623 C4,11.4427639 4.65170744,12.5766371 5.65687647,13.2741368 C5.73557697,13.041105 5.84196228,12.8229717 5.97161458,12.624616 C6.26836682,12.1706132 6.5,11.2280234 6.5,10.4287008 C6.5,9.92871906 6.42479348,9.44813694 6.28619258,9 C7.47628141,9.64169048 8.4897566,10.6210605 9.22434324,11.8251557 C9.23213615,11.8013168 9.2406884,11.7775998 9.25,11.7540048 C9.39656041,11.3826304 9.5,11.0805724 9.5,10.6495848 C9.5,10.6240812 9.49971537,10.5986511 9.49914944,10.5732981 C9.96875289,11.3529062 10.2928315,12.2486386 10.4285489,13.2131862 Z M10.4486865,5.94402249 C10.4642723,5.90230435 10.4813768,5.86079967 10.5,5.81950846 C10.7931208,5.16960326 11,4.64100165 11,3.88677339 C11,3.84214218 10.9994307,3.79763944 10.9982989,3.7532716 C12.2630338,5.59045545 13,7.7961396 13,10.1681623 C13,12.8367126 10.7614237,15 8,15 C5.23857625,15 3,12.8367126 3,10.1681623 C3,9.11340491 3.34972471,8.13758287 3.94322917,7.34307798 C4.53673363,6.54857309 5,4.8990409 5,3.50022638 C5,2.62525836 4.84958695,1.78423964 4.57238517,1 C6.95256283,2.12295834 8.97951321,3.83685594 10.4486865,5.94402249 Z"})),[b]:"flag",[g]:"heart",[p]:"mapMarker",[j]:"pinFilled",[m]:"starFilled",[x]:"tag"}},64:function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return d})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return c}));var i=s(2),a=s(34),l=s(19);const n=(e,t,s=!0)=>{if(e.length&&t){const i=e.find((e=>e.name===t));if(i)return i.label||i.name;if(s)throw new l.b(t)}return t},o=e=>e.filter((e=>e.aggregatable&&!Object(a.isNestedField)(e))).map((e=>{var t;return{name:e.name,label:null!==(t=e.customLabel)&&void 0!==t?t:e.name,type:e.type}})),r=e=>e?[e].flat().filter(Boolean):[],d=(e,t)=>{const s=t?n(t,e[0]):e[0];return e.length>1?i.i18n.translate("visTypeTimeseries.fieldUtils.multiFieldLabel",{defaultMessage:"{firstFieldLabel} + {count} {count, plural, one {other} other {others}}",values:{firstFieldLabel:s,count:e.length-1}}):null!=s?s:""},u=(e,t,s,i,a=[])=>{const l=new Map;return(n,o,r="text")=>{var d,u;const c=l.get(n),b=e=>e.convert(o,r,i?{timezone:i.timezone}:void 0);if(c)return b(c);const g=null==e||null===(d=e.fieldFormatMap)||void 0===d||null===(u=d[n])||void 0===u?void 0:u.id;if(e&&!a.includes(g)){const t=e.fields.getByName(n);if(t){const s=e.getFormatterForField(t);if(s)return l.set(n,s),b(s)}}else if(s&&t){const e=t.find((e=>e.name===n));if(e){const t=s.getDefaultInstance(e.type);if(t)return l.set(n,t),b(t)}}}},c=" â€º "},67:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i=["#68BC00","#009CE0","#B0BC00","#16A5A5","#D33115","#E27300","#FCC400","#7B64FF","#FA28FF","#333333","#808080","#194D33","#0062B1","#808900","#0C797D","#9F0500","#C45100","#FB9E00","#653294","#AB149E","#0F1419","#666666"]},68:function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s(54),a=s.n(i);const l=e=>{let t=new a.a(e);const s=t.hsl().object();return s.l-=100*t.luminosity(),t=a.a.hsl(s),t.rgb().toString()}},69:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return r}));var i=s(10);let a=function(e){return e.Gte="gte",e.Lte="lte",e.Gt="gt",e.Lt="lt",e.Empty="empty",e}({});const l={[a.Gte]:i.gte,[a.Lte]:i.lte,[a.Gt]:i.gt,[a.Lt]:i.lt,[a.Empty]:i.isNull},n={[a.Empty]:!0},o=e=>l[e],r=(e,t)=>Object(i.isNull)(e.value)&&n[e.operator]||!Object(i.isNull)(e.value)&&!Object(i.isNull)(t)},76:function(e,t,s){"use strict";s.d(t,"a",(function(){return j})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return x})),s.d(t,"e",(function(){return v})),s.d(t,"b",(function(){return h}));var i=s(14),a=s.n(i),l=s(2),n=s(10),o=s(33),r=s(41),d=s.n(r);const u=new RegExp(`^>=([\\d\\.]+\\s*(${d.a.units.join("|")}))$`);new RegExp(`^([\\d\\.]+)\\s*(${d.a.units.join("|")})$`);var c=s(7),b=s(21);const{parseEsInterval:g}=o.search.aggs,p={s:l.i18n.translate("visTypeTimeseries.getInterval.secondsLabel",{defaultMessage:"seconds"}),m:l.i18n.translate("visTypeTimeseries.getInterval.minutesLabel",{defaultMessage:"minutes"}),h:l.i18n.translate("visTypeTimeseries.getInterval.hoursLabel",{defaultMessage:"hours"}),d:l.i18n.translate("visTypeTimeseries.getInterval.daysLabel",{defaultMessage:"days"}),w:l.i18n.translate("visTypeTimeseries.getInterval.weeksLabel",{defaultMessage:"weeks"}),M:l.i18n.translate("visTypeTimeseries.getInterval.monthsLabel",{defaultMessage:"months"}),y:l.i18n.translate("visTypeTimeseries.getInterval.yearsLabel",{defaultMessage:"years"})},j=(e,t=!0)=>{const s=Object.keys(p).reverse(),i=a.a.duration(e,"ms");for(let e=0;e<s.length;e++){const a=i.as(s[e]);if(Math.abs(a)>1)return{unitValue:Math.round(Math.abs(a)),unitString:t?p[s[e]]:s[e]}}},m=e=>u.test(e),x=e=>!e||e===c.a,v=e=>{const t={};try{g(e)}catch({message:e}){t.errorMessage=e}finally{t.isValid=!t.errorMessage}return t},h=(e,t)=>Object(n.get)(e,Object(b.a)(e)?"series[0].series":`${t.id}.series`,[]).reduce(((e,t)=>{if(t.data.length>1&&"number"==typeof t.data[1][0]&&"number"==typeof t.data[0][0]){const s=t.data[1][0]-t.data[0][0];if(!e||s<e)return s}return e}),0)},84:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));const i=["count","avg","max","min","sum","std_deviation","variance","sum_of_squares","value_count","cardinality"]},90:function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var i=s(43),a=s(10),l=s(5),n=s(62),o=s(59),r=s(66),d=s(70),u=s(71),c=s(14),b=s.n(c),g=s(64);const p=(e,t,s=null,c,p)=>{var j;const m={},x=null!==(j=null==s?void 0:s("dateFormat"))&&void 0!==j?j:"lll";return t.series.forEach((t=>{e.filter((e=>Object(a.startsWith)(e.id,t.id))).forEach((e=>{let j=Object(o.b)(e.label);j!==o.a&&(j=Object(a.snakeCase)(j));const v=[`[${j}]`,Object(a.snakeCase)(t.var_name)].filter((e=>e)).join("."),h=t.formatter===l.b.DEFAULT?Object(u.a)(Object(d.a)(t.metrics),c):Object(r.a)(t.formatter,t.value_template,s),O=Object(n.b)(e.data),f={last:{raw:O,formatted:h(O)},data:{raw:e.data,formatted:e.data.map((e=>[b()(e[0]).format(x),h(e[1])]))}};let T=e.label;if(t.split_mode===l.a.TERMS){const s=Object(g.d)(t.terms_field);1===s.length&&(T=Object(u.a)(s[0],c,void 0,!1,p)(e.label))}Object(i.set)(m,v,f),Object(i.set)(m,`[${j}].label`,T),Object(i.set)(m,`[${j}].formatted`,T)}))})),m}}}]);