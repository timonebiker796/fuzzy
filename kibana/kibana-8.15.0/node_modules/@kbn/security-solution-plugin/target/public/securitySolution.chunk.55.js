/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[55],{1962:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=i(1594),r=function(){function e(e,t){this._disable=t,this.serviceFactory=e,this._initialized=!1}var t=e.prototype;return t.isEnabled=function(){return!this._disable},t.isActive=function(){var e=this.serviceFactory.getService(n.CONFIG_SERVICE);return this.isEnabled()&&this._initialized&&e.get("active")},t.init=function(e){var t=this;if(this.isEnabled()&&!this._initialized){this._initialized=!0;var i=this.serviceFactory.getService([n.CONFIG_SERVICE,n.LOGGING_SERVICE,n.TRANSACTION_SERVICE]),r=i[0],s=i[1],a=i[2];r.setVersion("5.16.1"),this.config(e);var o=r.get("logLevel");if(s.setLevel(o),r.get("active")){this.serviceFactory.init();var c=(0,n.getInstrumentationFlags)(r.get("instrument"),r.get("disableInstrumentations"));if(this.serviceFactory.getService(n.PERFORMANCE_MONITORING).init(c),c[n.ERROR]&&this.serviceFactory.getService(n.ERROR_LOGGING).registerListeners(),r.get("session")){var v=r.getLocalConfig();v&&v.session&&r.setConfig({session:v.session})}var l=function(){return c[n.PAGE_LOAD]&&t._sendPageLoadMetrics()};r.get("centralConfig")?this.fetchCentralConfig().then(l):l(),(0,n.observePageVisibility)(r,a),c[n.EVENT_TARGET]&&c[n.CLICK]&&(0,n.observePageClicks)(a),(0,n.observeUserInteractions)()}else this._disable=!0,s.warn("RUM agent is inactive")}return this},t.fetchCentralConfig=function(){var e=this.serviceFactory.getService([n.APM_SERVER,n.LOGGING_SERVICE,n.CONFIG_SERVICE]),t=e[0],i=e[1],r=e[2];return t.fetchConfig(r.get("serviceName"),r.get("environment")).then((function(e){var t=e.transaction_sample_rate;if(t){var n={transactionSampleRate:t=Number(t)},s=r.validate(n).invalid;if(0===s.length)r.setConfig(n);else{var a=s[0],o=a.key,c=a.value,v=a.allowed;i.warn('invalid value "'+c+'" for '+o+". Allowed: "+v+".")}}return e})).catch((function(e){i.warn("failed fetching config:",e)}))},t._sendPageLoadMetrics=function(){var e=this.startTransaction(void 0,n.PAGE_LOAD,{managed:!0,canReuse:!0});if(e){e.addTask(n.PAGE_LOAD);var t=function(){setTimeout((function(){return e.removeTask(n.PAGE_LOAD)}),n.PAGE_LOAD_DELAY)};"complete"===document.readyState?t():window.addEventListener("load",t)}},t.observe=function(e,t){this.serviceFactory.getService(n.CONFIG_SERVICE).events.observe(e,t)},t.config=function(e){var t=this.serviceFactory.getService([n.CONFIG_SERVICE,n.LOGGING_SERVICE]),i=t[0],r=t[1],s=i.validate(e),a=s.missing,o=s.invalid,c=s.unknown;if(c.length>0){var v="Unknown config options are specified for RUM agent: "+c.join(", ");r.warn(v)}if(0===a.length&&0===o.length)i.setConfig(e);else{var l=", ",u="RUM agent isn't correctly configured. ";a.length>0&&(u+=a.join(l)+" is missing",o.length>0&&(u+=l)),o.forEach((function(e,t){var i=e.key,n=e.value,r=e.allowed;u+=i+' "'+n+'" contains invalid characters! (allowed: '+r+")"+(t!==o.length-1?l:"")})),r.error(u),i.setConfig({active:!1})}},t.setUserContext=function(e){this.serviceFactory.getService(n.CONFIG_SERVICE).setUserContext(e)},t.setCustomContext=function(e){this.serviceFactory.getService(n.CONFIG_SERVICE).setCustomContext(e)},t.addLabels=function(e){this.serviceFactory.getService(n.CONFIG_SERVICE).addLabels(e)},t.setInitialPageLoadName=function(e){this.serviceFactory.getService(n.CONFIG_SERVICE).setConfig({pageLoadTransactionName:e})},t.startTransaction=function(e,t,i){if(this.isEnabled())return this.serviceFactory.getService(n.TRANSACTION_SERVICE).startTransaction(e,t,i)},t.startSpan=function(e,t,i){if(this.isEnabled())return this.serviceFactory.getService(n.TRANSACTION_SERVICE).startSpan(e,t,i)},t.getCurrentTransaction=function(){if(this.isEnabled())return this.serviceFactory.getService(n.TRANSACTION_SERVICE).getCurrentTransaction()},t.captureError=function(e){if(this.isEnabled())return this.serviceFactory.getService(n.ERROR_LOGGING).logError(e)},t.addFilter=function(e){this.serviceFactory.getService(n.CONFIG_SERVICE).addFilter(e)},e}();t.default=r},2090:function(e,t,i){"use strict";t.__esModule=!0,t.apm=t.apmBase=t.init=t.default=void 0;var n,r=i(1594),s=(n=i(1962))&&n.__esModule?n:{default:n};t.ApmBase=s.default;var a=function(){if(r.isBrowser&&window.elasticApm)return window.elasticApm;var e=(0,r.bootstrap)(),t=(0,r.createServiceFactory)(),i=new s.default(t,!e);return r.isBrowser&&(window.elasticApm=i),i}();t.apm=t.apmBase=a;var o=a.init.bind(a);t.init=o;var c=o;t.default=c},892:function(e,t,i){e.exports=i(35)(675)}}]);