/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.securitySolution_bundle_jsonpfunction=window.securitySolution_bundle_jsonpfunction||[]).push([[66],{1329:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var n=a(19),l=a(2),o=a.n(l),s=a(41),i=a.n(s),c=a(45),u=a(260),r=a(118),d=a(634),m=a(430),p=a(300);const b=i()(n.EuiFlexItem).withConfig({displayName:"NewNoteTabs",componentId:"sc-uq31qy-0"})(["width:100%;"]);b.displayName="NewNoteTabs";const E=o.a.memo((({note:e,noteInputHeight:t,updateNewNote:a,autoFocusDisabled:n=!1,setIsMarkdownInvalid:l})=>o.a.createElement(b,{"data-test-subj":"new-note-tabs"},o.a.createElement(p.a,{ariaLabel:m.d,onChange:a,value:e,dataTestSubj:"add-a-note",height:t,autoFocusDisabled:n,setIsMarkdownInvalid:l}))));E.displayName="NewNote";const N=i.a.div.withConfig({displayName:"AddNotesContainer",componentId:"sc-1065h8-0"})(["margin-bottom:5px;user-select:none;"]);N.displayName="AddNotesContainer";const w=i()(n.EuiFlexGroup).withConfig({displayName:"ButtonsContainer",componentId:"sc-1065h8-1"})(["margin-top:",";"],(({theme:e})=>e.eui.euiSizeS));w.displayName="ButtonsContainer";const g=o.a.memo((({onCancelAddNote:e})=>o.a.createElement(n.EuiButtonEmpty,{"data-test-subj":"cancel",onClick:e},m.b)));g.displayName="CancelButton";const j=o.a.memo((({associateNote:e,newNote:t,onCancelAddNote:a,updateNewNote:s,autoFocusDisabled:i=!1})=>{const p=Object(c.useDispatch)(),b=Object(r.f)(),[j,y]=Object(l.useState)(!1),O=Object(l.useCallback)((e=>p(u.a.updateNote({note:e}))),[p]),h=Object(l.useCallback)((()=>{const a=null==b?void 0:b.username;a&&Object(d.b)({associateNote:e,newNote:t,updateNewNote:s,updateNote:O,user:a})}),[e,t,s,O,b]),I=Object(l.useCallback)((e=>{e.stopPropagation(),"Escape"===e.key&&null!=a&&a()}),[a]),C=Object(l.useMemo)((()=>0===t.trim().length||j),[t,j]);return o.a.createElement(N,{onKeyDown:I,role:"dialog"},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(n.EuiScreenReaderOnly,{"data-test-subj":"screenReaderOnly"},o.a.createElement("p",null,m.g)),o.a.createElement(E,{note:t,noteInputHeight:200,updateNewNote:s,autoFocusDisabled:i,setIsMarkdownInvalid:y}),o.a.createElement(w,{gutterSize:"none"},null!=a?o.a.createElement(n.EuiFlexItem,{grow:!1},o.a.createElement(g,{onCancelAddNote:a})):null,o.a.createElement(n.EuiFlexItem,{grow:!1},o.a.createElement(n.EuiButton,{"data-test-subj":"add-note",isDisabled:C,fill:!0,onClick:h},m.a)))))}));j.displayName="AddNote"},2139:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return T}));var n=a(44),l=a(19),o=a(2),s=a.n(o),i=a(45),c=a(41),u=a.n(c),r=a(132),d=a(127),m=a(129),p=a(124),b=a(146),E=a(121),N=a(260),w=a(1329),g=a(430),j=a(443),y=a(742),O=a(909),h=a(738),I=a(914),C=a(140),S=a(1242);const v=u.a.div.withConfig({displayName:"ScrollableDiv",componentId:"sc-r9slcw-0"})(["overflow-x:hidden;overflow-y:auto;padding-inline:",";padding-block:",";"],(({theme:e})=>e.eui.euiSizeM),(({theme:e})=>e.eui.euiSizeS)),f=u()(l.EuiPanel).withConfig({displayName:"StyledPanel",componentId:"sc-r9slcw-1"})(["border:0;box-shadow:none;"]),F=u()(l.EuiFlexGroup).withConfig({displayName:"StyledEuiFlexGroup",componentId:"sc-r9slcw-2"})(["flex:0;"]),x=u()(l.EuiText).withConfig({displayName:"Username",componentId:"sc-r9slcw-3"})(["font-weight:bold;"]),M=({username:e})=>s.a.createElement(F,{gutterSize:"s",responsive:!1,alignItems:"center"},s.a.createElement(l.EuiFlexItem,{grow:!1},s.a.createElement(l.EuiAvatar,{"data-test-subj":"avatar",name:e,size:"l"})),s.a.createElement(l.EuiFlexItem,null,s.a.createElement(x,null,e))),k=s.a.memo(M),z=({users:e})=>{const t=Object(o.useMemo)((()=>e.map((e=>s.a.createElement(o.Fragment,{key:null===e.updatedBy?void 0:e.updatedBy},s.a.createElement(k,{key:null===e.updatedBy?void 0:e.updatedBy,username:String(e.updatedBy)}),s.a.createElement(l.EuiSpacer,{size:"s"}))))),[e]);return e.length?s.a.createElement(s.a.Fragment,null,s.a.createElement(l.EuiTitle,{size:"xs"},s.a.createElement("h4",null,j.d)),s.a.createElement(l.EuiHorizontalRule,{margin:"s"}),t):null};z.displayName="ParticipantsComponent";const B=s.a.memo(z),D=({timelineId:e})=>{const t=Object(i.useDispatch)(),{kibanaSecuritySolutionsPrivileges:a}=Object(C.a)(),c=Object(o.useMemo)((()=>Object(I.f)()),[]),u=Object(p.b)((t=>c(t,e)));((e,t=!0)=>{Object(o.useEffect)((()=>{const a=e?document.querySelector(e):window;t&&a&&(a.scroll?a.scroll(0,0):a.scrollTo(0,0))}))})("#scrollableNotes",!!u);const j=Object(o.useMemo)((()=>Object(O.a)()),[]),{createdBy:F,expandedDetail:x,eventIdToNoteIds:M,noteIds:z,status:D}=Object(p.a)((t=>j(t,e))),{browserFields:T,runtimeMappings:A}=Object(r.a)(d.SourcererScopeName.timeline),P=Object(o.useMemo)((()=>N.c.selectNotesAsCommentsListSelector()),[]),[q,H]=Object(o.useState)(""),R=D===E.l.immutable,_=Object(p.a)(P),G=Object(o.useMemo)((()=>{const e=Object.values(M).reduce(((e,t)=>[...e,...t]),[]);return[...z,...e]}),[z,M]),L=Object(o.useMemo)((()=>_.filter((e=>{var t;return G.includes(null!==(t=null==e?void 0:e.noteId)&&void 0!==t?t:"-1")}))),[_,G]),K=Object(o.useMemo)((()=>Object(n.uniqBy)("updatedBy",Object(n.filter)("savedObjectId",L))),[L]),U=Object(o.useCallback)((a=>t(m.a.addNote({id:e,noteId:a}))),[t,e]),V=Object(o.useCallback)((()=>{t(m.a.toggleDetailPanel({tabType:b.d.notes,id:e}))}),[t,e]),J=Object(o.useMemo)((()=>{var t;return null!==(t=x[b.d.notes])&&void 0!==t&&t.panelView?s.a.createElement(h.a,{browserFields:T,handleOnPanelClosed:V,runtimeMappings:A,tabType:b.d.notes,scopeId:e}):null}),[T,x,V,A,e]),Q=Object(o.useMemo)((()=>s.a.createElement(s.a.Fragment,null,F&&s.a.createElement(s.a.Fragment,null,s.a.createElement(l.EuiTitle,{size:"xs"},s.a.createElement("h4",null,g.c)),s.a.createElement(l.EuiHorizontalRule,{margin:"s"}),s.a.createElement(k,{username:F}),s.a.createElement(l.EuiSpacer,{size:"xxl"})),s.a.createElement(B,{users:K}))),[F,K]);return s.a.createElement(S.b,{gutterSize:"none"},s.a.createElement(l.EuiFlexItem,{component:v,grow:2,id:"scrollableNotes"},s.a.createElement(f,{paddingSize:"none"},s.a.createElement(l.EuiTitle,null,s.a.createElement("h3",null,g.e)),s.a.createElement(y.a,{notes:L,timelineId:e,showTimelineDescription:!0}),s.a.createElement(l.EuiSpacer,{size:"s"}),!R&&!0===a.crud&&s.a.createElement(w.a,{associateNote:U,newNote:q,updateNewNote:H,autoFocusDisabled:!!u}))),s.a.createElement(S.h,null),s.a.createElement(l.EuiFlexItem,{component:v,grow:1},null!=J?J:Q))};D.displayName="NotesTabContentComponent";const T=s.a.memo(D)}}]);