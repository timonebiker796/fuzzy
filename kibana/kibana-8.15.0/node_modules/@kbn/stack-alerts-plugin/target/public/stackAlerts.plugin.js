/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function r(r){for(var t,i,n=r[0],s=r[1],o=0,l=[];o<n.length;o++)i=n[o],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t]);for(u&&u(r);l.length;)l.shift()()}var t={},a={0:0};function i(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var r=[],t=a[e];if(0!==t)if(t)r.push(t[2]);else{var n=new Promise((function(r,i){t=a[e]=[r,i]}));r.push(t[2]=n);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.src=function(e){return i.p+"stackAlerts.chunk."+e+".js"}(e);var u=new Error;s=function(r){o.onerror=o.onload=null,clearTimeout(l);var t=a[e];if(0!==t){if(t){var i=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+n+")",u.name="ChunkLoadError",u.type=i,u.request=n,t[1](u)}a[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(r)},i.m=e,i.c=t,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)i.d(t,a,function(r){return e[r]}.bind(null,a));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="",i.oe=function(e){throw console.error(e),e};var n=window.stackAlerts_bundle_jsonpfunction=window.stackAlerts_bundle_jsonpfunction||[],s=n.push.bind(n);n.push=r,n=n.slice();for(var o=0;o<n.length;o++)r(n[o]);var u=s;i(i.s=19)}([function(e,r){e.exports=__kbnSharedDeps__.KbnI18n},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/triggersActionsUi/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r){e.exports=__kbnSharedDeps__.React},function(e,r){e.exports=__kbnSharedDeps__.EmotionReact},function(e,r){e.exports=__kbnSharedDeps__.ElasticEui},function(e,r,t){"use strict";t.d(r,"c",(function(){return a})),t.d(r,"d",(function(){return i})),t.d(r,"e",(function(){return n})),t.d(r,"a",(function(){return s})),t.d(r,"b",(function(){return o}));const a=4,i=5,n=["host.name","host.hostname","host.id","container.id","kubernetes.pod.uid"],s=1e4,o=100},function(e,r,t){"use strict";t.d(r,"d",(function(){return n})),t.d(r,"c",(function(){return s})),t.d(r,"a",(function(){return o})),t.d(r,"b",(function(){return u})),t.d(r,"e",(function(){return l}));var a=t(1),i=t(12);const n=e=>"searchSource"===e.searchType,s=e=>"esqlQuery"===e.searchType,o=e=>(null!=e?e:[]).filter((e=>e.isMapped||e.runtimeField)).map((e=>{const r={name:e.name,searchable:e.searchable,aggregatable:e.aggregatable,type:e.type,normalizedType:e.type};if("string"===e.type){const t=e.esTypes&&e.esTypes.length>0?e.esTypes[0]:e.type;r.type=t,r.normalizedType=t}else if("number"===e.type){const t=e.esTypes&&e.esTypes.length>0?e.esTypes[0]:e.type;r.type=t}return r})),u=e=>{const r=[];let t;try{t=Object.keys(e)}catch(e){return r}for(const a of t){const t=e[a].type,n=i.NORMALIZED_FIELD_TYPES[t]||t,s="lookup"!==t,o=s,u=s;t&&r.push({name:a,type:t,normalizedType:n,aggregatable:o,searchable:u})}return r},l=()=>Object(a.useKibana)().services},function(e,r){e.exports=__kbnSharedDeps__.Lodash},function(e,r,t){"use strict";t.d(r,"c",(function(){return a})),t.d(r,"g",(function(){return i})),t.d(r,"b",(function(){return n})),t.d(r,"f",(function(){return s})),t.d(r,"e",(function(){return o})),t.d(r,"d",(function(){return u})),t.d(r,"a",(function(){return d}));const a={THRESHOLD_COMPARATOR:t(9).a.GREATER_THAN,QUERY:'{\n    "query":{\n      "match_all" : {}\n    }\n  }',SIZE:100,TIME_WINDOW_SIZE:5,TIME_WINDOW_UNIT:"m",THRESHOLD:[1e3],AGGREGATION_TYPE:"count",TERM_SIZE:5,GROUP_BY:"all",EXCLUDE_PREVIOUS_HITS:!1,CAN_SELECT_MULTI_TERMS:!0},i={SIZE:10},n={searchType:new Array,threshold0:new Array,threshold1:new Array,timeWindowSize:new Array,size:new Array,aggField:new Array,aggType:new Array,groupBy:new Array,termSize:new Array,termField:new Array,sourceFields:new Array},s={searchConfiguration:new Array,timeField:new Array},o={index:new Array,esQuery:new Array,timeField:new Array},u={esqlQuery:new Array,timeField:new Array,thresholdComparator:new Array,threshold0:new Array},l={...n,...s,...o},d=Object.keys(l)},function(e,r,t){"use strict";t.d(r,"a",(function(){return a}));let a=function(e){return e.GREATER_THAN=">",e.GREATER_THAN_OR_EQUALS=">=",e.BETWEEN="between",e.LESS_THAN="<",e.LESS_THAN_OR_EQUALS="<=",e.NOT_BETWEEN="notBetween",e}({})},function(e,r){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,r){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/triggersActionsUi/public/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r,t){"use strict";t.d(r,"b",(function(){return p})),t.d(r,"a",(function(){return h}));var a=t(7),i=t(0),n=t(1),s=t(9),o=t(5),u=t(6),l=t(8);const d=e=>{const r=Object(a.defaultsDeep)({},l.f);return e.searchConfiguration?e.searchConfiguration.index?(e.timeField||r.timeField.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredDataViewTimeFieldText",{defaultMessage:"Data view should have a time field."})),r):(r.searchConfiguration.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredDataViewText",{defaultMessage:"Data view is required."})),r):(r.searchConfiguration.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSearchConfiguration",{defaultMessage:"Search source configuration is required."})),r)},c=e=>{const r=Object(a.defaultsDeep)({},l.d);return e.esqlQuery||r.esqlQuery.push(i.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredQueryText",{defaultMessage:"ES|QL query is required."})),e.timeField||r.timeField.push(i.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),e.thresholdComparator!==s.a.GREATER_THAN&&r.thresholdComparator.push(i.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredThresholdComparatorText",{defaultMessage:"Threshold comparator is required to be greater than."})),e.threshold&&0!==e.threshold[0]&&r.threshold0.push(i.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold is required to be 0."})),r},p=(e,r)=>{const t={errors:{}},s=((e,r)=>{const{size:t,threshold:s,timeWindowSize:u,thresholdComparator:d,aggType:c,aggField:p,groupBy:h,termSize:g,termField:y,sourceFields:f}=e,m=Object(a.defaultsDeep)({},l.b);if(!("index"in e)&&!e.searchType)return m.searchType.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSearchType",{defaultMessage:"Query type is required."})),m;c&&n.builtInAggregationTypes[c].fieldRequired&&!p&&m.aggField.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredAggFieldText",{defaultMessage:"Aggregation field is required."})),h&&n.builtInGroupByTypes[h]&&n.builtInGroupByTypes[h].sizeRequired&&!g&&m.termSize.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTermSizedText",{defaultMessage:"Term size is required."})),h&&n.builtInGroupByTypes[h].validNormalizedTypes&&n.builtInGroupByTypes[h].validNormalizedTypes.length>0&&(!y||y.length<=0)&&m.termField.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTermFieldText",{defaultMessage:"Term field is required."})),h&&n.builtInGroupByTypes[h].validNormalizedTypes&&n.builtInGroupByTypes[h].validNormalizedTypes.length>0&&y&&Array.isArray(y)&&y.length>o.c&&m.termField.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.overNumberedTermFieldText",{defaultMessage:"Cannot select more than {max} terms",values:{max:o.c}})),s&&0!==s.length&&void 0!==s[0]||m.threshold0.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold 0 is required."})),d&&n.builtInComparators[d].requiredValues>1&&(!s||void 0===s[1]||s&&s.length<n.builtInComparators[d].requiredValues)&&m.threshold1.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredThreshold1Text",{defaultMessage:"Threshold 1 is required."})),s&&2===s.length&&s[0]>s[1]&&m.threshold1.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.greaterThenThreshold0Text",{defaultMessage:"Threshold 1 must be > Threshold 0."})),u||m.timeWindowSize.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTimeWindowSizeText",{defaultMessage:"Time window size is required."})),Object(a.isNil)(t)&&m.size.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSizeText",{defaultMessage:"Size is required."}));const b=r?o.b:o.a;return(t&&t<0||t>b)&&m.size.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.invalidSizeRangeText",{defaultMessage:"Size must be between 0 and {max, number}.",values:{max:b}})),f&&Array.isArray(f)&&f.length>o.d&&m.sourceFields.push(i.i18n.translate("xpack.stackAlerts.esqlQuery.ui.validation.error.sourceFields",{defaultMessage:"Cannot select more than {max} fields",values:{max:o.d}})),m})(e,r);if(t.errors=s,Object(u.d)(e))return t.errors={...t.errors,...d(e)},t;if(Object(u.c)(e))return t.errors={...t.errors,...c(e)},t;const p=(e=>{const r=Object(a.defaultsDeep)({},l.e);if(e.index&&0!==e.index.length||r.index.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredIndexText",{defaultMessage:"Index is required."})),e.timeField||r.timeField.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),e.esQuery)try{JSON.parse(e.esQuery).query||r.esQuery.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredEsQueryText",{defaultMessage:"Query field is required."}))}catch(e){r.esQuery.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.jsonQueryText",{defaultMessage:"Query must be valid JSON."}))}else r.esQuery.push(i.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredQueryText",{defaultMessage:"Elasticsearch query is required."}));return r})(e);return t.errors={...t.errors,...p},t},h=(e,r)=>{const{errors:t}=p(e,r);return Object.keys(t).some((e=>t[e]&&t[e].length))}},function(e,r,t){"use strict";t.d(r,"a",(function(){return d}));var a=t(2),i=t(0),n=t(11),s=t(4),o=t(16),u=t(3);const l=e=>({id:e.id,title:e.title,name:e.name,type:e.type,isAdhoc:!e.isPersisted()}),d=({dependencies:{dataViews:e,dataViewEditor:r},metadata:t={adHocDataViewList:[],isManagementPage:!0},dataView:d,onSelectDataView:c,onChangeMetaData:p})=>{var h;const[g,y]=Object(a.useState)([]),[f,m]=Object(a.useState)(!1),b=Object(a.useRef)(),T=Object(a.useMemo)((()=>[...g,...t.adHocDataViewList.map(l)]),[g,t.adHocDataViewList]),_=Object(a.useCallback)((()=>m(!1)),[]),x=Object(a.useCallback)((async r=>{const t=await e.get(r);c(t),_()}),[_,e,c]),v=Object(a.useCallback)((async()=>{const r=await e.getIds(),t=await Promise.all(r.map((r=>e.get(r))));y(t.map(l))}),[e]),k=Object(a.useCallback)((e=>{p({...t,adHocDataViewList:[...t.adHocDataViewList,e]})}),[t,p]),w=Object(a.useMemo)((()=>r.userPermissions.editDataView()?()=>{b.current=r.openEditor({onSave:async e=>{e.id&&(e.isPersisted()||k(e),await v(),await x(e.id))},allowAdHocDataView:!0})}:void 0),[r,v,x,k]);Object(a.useEffect)((()=>()=>{b.current&&b.current()}),[]),Object(a.useEffect)((()=>{v()}),[v]);const A=Object(s.useEuiPaddingCSS)("left"),E=Object(a.useCallback)((async r=>{var t;const a=await e.create(r);"date"===(null===(t=a.fields.getByName("@timestamp"))||void 0===t?void 0:t.type)&&(a.timeFieldName="@timestamp"),k(a),x(a.id)}),[e,k,x]);return T?Object(u.jsx)(s.EuiPopover,{id:"dataViewPopover",button:Object(u.jsx)(s.EuiExpression,{display:"columns","data-test-subj":"selectDataViewExpression",description:i.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewLabel",{defaultMessage:"data view"}),value:null!==(h=null==d?void 0:d.getName())&&void 0!==h?h:i.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewPlaceholder",{defaultMessage:"Select a data view"}),isActive:f,onClick:()=>{m(!0)},isInvalid:!(null!=d&&d.id)}),isOpen:f,closePopover:_,ownFocus:!0,anchorPosition:"downLeft",display:"block"},Object(u.jsx)("div",{style:{width:"450px"},"data-test-subj":"chooseDataViewPopoverContent"},Object(u.jsx)(s.EuiPopoverTitle,null,Object(u.jsx)(s.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(u.jsx)(s.EuiFlexItem,null,i.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewPopoverTitle",{defaultMessage:"Data view"})),Object(u.jsx)(s.EuiFlexItem,{grow:!1},Object(u.jsx)(s.EuiButtonIcon,{"data-test-subj":"closeDataViewPopover",iconType:"cross",color:"danger","aria-label":i.i18n.translate("xpack.stackAlerts.components.ui.alertParams.closeDataViewPopoverLabel",{defaultMessage:"Close"}),onClick:_})))),Object(u.jsx)(o.DataViewSelector,{currentDataViewId:null==d?void 0:d.id,dataViewsList:T,setPopoverIsOpen:m,onChangeDataView:x,onCreateDefaultAdHocDataView:E,isTextBasedLangSelected:!1}),w?Object(u.jsx)(s.EuiPopoverFooter,{paddingSize:"none"},Object(u.jsx)(s.EuiButtonEmpty,{css:A.s,iconType:"plusInCircleFilled","data-test-subj":"chooseDataViewPopover.createDataViewButton",onClick:()=>{_(),w()}},i.i18n.translate("xpack.stackAlerts.components.ui.alertParams.dataViewPopover.createDataViewButton",{defaultMessage:"Create a data view"}))):Object(u.jsx)(s.EuiPopoverFooter,null,Object(u.jsx)(s.EuiText,{color:"subdued",size:"xs"},Object(u.jsx)(n.FormattedMessage,{id:"xpack.stackAlerts.components.ui.alertParams.dataViewPopover.createDataViewButton.noPermissionDescription",defaultMessage:"You need additional privileges to create data views. Contact your administrator."}))))):null}},function(e,r,t){e.exports=t(18)(2)},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r,t){"use strict";t.r(r),t.d(r,"ComparatorFns",(function(){return n})),t.d(r,"getComparatorScript",(function(){return s})),t.d(r,"ComparatorFnNames",(function(){return o})),t.d(r,"getHumanReadableComparator",(function(){return u})),t.d(r,"rowToDocument",(function(){return l})),t.d(r,"transformDatatableToEsqlTable",(function(){return c})),t.d(r,"toEsQueryHits",(function(){return d})),t.d(r,"ES_QUERY_MAX_HITS_PER_EXECUTION",(function(){return p.a})),t.d(r,"ES_QUERY_MAX_HITS_PER_EXECUTION_SERVERLESS",(function(){return p.b}));let a=function(e){return e.GT=">",e.LT="<",e.GT_OR_EQ=">=",e.LT_OR_EQ="<=",e.BETWEEN="between",e.NOT_BETWEEN="notBetween",e}({});const i=new Map([[a.LT,"less than"],[a.LT_OR_EQ,"less than or equal to"],[a.GT_OR_EQ,"greater than or equal to"],[a.GT,"greater than"],[a.BETWEEN,"between"],[a.NOT_BETWEEN,"not between"]]),n=new Map([[a.LT,(e,r)=>e<r[0]],[a.LT_OR_EQ,(e,r)=>e<=r[0]],[a.GT_OR_EQ,(e,r)=>e>=r[0]],[a.GT,(e,r)=>e>r[0]],[a.BETWEEN,(e,r)=>e>=r[0]&&e<=r[1]],[a.NOT_BETWEEN,(e,r)=>e<r[0]||e>r[1]]]),s=(e,r,t)=>{if(0===r.length)throw new Error("Threshold value required");function i(e){return Number.isInteger(e)?`${e}L`:`${e}`}switch(e){case a.LT:return`${t} < ${i(r[0])}`;case a.LT_OR_EQ:return`${t} <= ${i(r[0])}`;case a.GT:return`${t} > ${i(r[0])}`;case a.GT_OR_EQ:return`${t} >= ${i(r[0])}`;case a.BETWEEN:if(r.length<2)throw new Error("Threshold values required");return`${t} >= ${i(r[0])} && ${t} <= ${i(r[1])}`;case a.NOT_BETWEEN:if(r.length<2)throw new Error("Threshold values required");return`${t} < ${i(r[0])} || ${t} > ${i(r[1])}`}},o=new Set(n.keys());function u(e){return i.has(e)?i.get(e):e}const l=(e,r)=>e.reduce(((e,t,a)=>(e[t.name]=r[a],e)),{}),d=e=>{const r=e.values.map((r=>({_id:"esql_query_document",_index:"",_source:l(e.columns,r)})));return{hits:r,total:r.length}},c=e=>({columns:e.columns.map((e=>({name:e.id,type:e.meta.type}))),values:e.rows.map((e=>Object.values(e)))});var p=t(5)},function(e,r){e.exports=__kbnSharedDeps_npm__},function(e,r,t){t(20),__kbnBundles__.define("plugin/stackAlerts/public",t,21),__kbnBundles__.define("plugin/stackAlerts/common",t,17)},function(e,r,t){t.p=window.__kbnPublicPath__.stackAlerts},function(e,r,t){"use strict";t.r(r),t.d(r,"DataViewSelectPopover",(function(){return f.a})),t.d(r,"plugin",(function(){return m}));var a=t(15),i=t.n(a),n=t(2),s=t(0);const o=e=>{const{index:r,geoField:t,entity:a,dateField:i,boundaryType:n,boundaryIndexTitle:o,boundaryGeoField:u}=e,l={errors:{}},d={index:new Array,indexId:new Array,geoField:new Array,entity:new Array,dateField:new Array,boundaryType:new Array,boundaryIndexTitle:new Array,boundaryIndexId:new Array,boundaryGeoField:new Array};return l.errors=d,r||d.index.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredIndexTitleText",{defaultMessage:"Data view is required."})),t||d.geoField.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredGeoFieldText",{defaultMessage:"Geo field is required."})),a||d.entity.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredEntityText",{defaultMessage:"Entity is required."})),i||d.dateField.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredDateFieldText",{defaultMessage:"Date field is required."})),n||d.boundaryType.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryTypeText",{defaultMessage:"Boundary type is required."})),o||d.boundaryIndexTitle.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryIndexTitleText",{defaultMessage:"Boundary data view is required."})),u||d.boundaryGeoField.push(s.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryGeoFieldText",{defaultMessage:"Boundary geo field is required."})),l};var u=t(10),l=t(1);const d=e=>{const{index:r,timeField:t,aggType:a,aggField:i,groupBy:n,termSize:o,termField:d,threshold:c,timeWindowSize:p,thresholdComparator:h,filterKuery:g}=e,y={errors:{}},f={aggField:new Array,termSize:new Array,termField:new Array,timeWindowSize:new Array,threshold0:new Array,threshold1:new Array,index:new Array,timeField:new Array,filterKuery:new Array};if(y.errors=f,g)try{Object(u.toElasticsearchQuery)(Object(u.fromKueryExpression)(g))}catch(e){f.filterKuery.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.invalidKql",{defaultMessage:"Filter query is invalid."}))}return r&&0!==r.length||f.index.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredIndexText",{defaultMessage:"Index is required."})),t||f.timeField.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),a&&l.builtInAggregationTypes[a].fieldRequired&&!i&&f.aggField.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredAggFieldText",{defaultMessage:"Aggregation field is required."})),n&&l.builtInGroupByTypes[n]&&l.builtInGroupByTypes[n].sizeRequired&&!o&&f.termSize.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTermSizedText",{defaultMessage:"Term size is required."})),n&&l.builtInGroupByTypes[n].validNormalizedTypes&&l.builtInGroupByTypes[n].validNormalizedTypes.length>0&&!d&&f.termField.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTermFieldText",{defaultMessage:"Term field is required."})),p||f.timeWindowSize.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTimeWindowSizeText",{defaultMessage:"Time window size is required."})),c&&0!==c.length&&void 0!==c[0]||f.threshold0.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold0 is required."})),h&&l.builtInComparators[h].requiredValues>1&&(!c||void 0===c[1]||c&&c.length<l.builtInComparators[h].requiredValues)&&f.threshold1.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredThreshold1Text",{defaultMessage:"Threshold1 is required."})),c&&2===c.length&&c[0]>c[1]&&f.threshold1.push(s.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.greaterThenThreshold0Text",{defaultMessage:"Threshold1 should be > Threshold0."})),y};var c=t(37),p=t(13),h=t(6);const g="discover";function y({ruleTypeRegistry:e,alerting:r},a){a||e.register({id:".geo-containment",description:s.i18n.translate("xpack.stackAlerts.geoContainment.descriptionText",{defaultMessage:"Alert when an entity is contained or no longer contained within a boundary."}),iconClass:"globe",documentationUrl:null,ruleParamsExpression:Object(n.lazy)((()=>t.e(3).then(t.bind(null,59)))),validate:o,requiresAppContext:!1}),e.register({id:".index-threshold",description:s.i18n.translate("xpack.stackAlerts.threshold.ui.alertType.descriptionText",{defaultMessage:"Alert when an aggregated query meets the threshold."}),iconClass:"alert",documentationUrl:e=>e.links.alerting.indexThreshold,ruleParamsExpression:Object(n.lazy)((()=>t.e(2).then(t.bind(null,60)))),validate:d,defaultActionMessage:s.i18n.translate("xpack.stackAlerts.threshold.ui.alertType.defaultActionMessage",{defaultMessage:"Rule '{{rule.name}}' is active for group '{{context.group}}':\n\n- Value: '{{context.value}}'\n- Conditions Met: '{{context.conditions}}' over '{{rule.params.timeWindowSize}}{{rule.params.timeWindowUnit}}'\n- Timestamp: '{{context.date}}'"}),requiresAppContext:!1}),e.register(function(e){return function(e){e.registerNavigation(g,c.a,(e=>`/app/discover#/viewAlert/${e.id}`)),e.registerNavigation(c.b,c.a,(e=>{if(Object(h.d)(e.params))return`/app/discover#/viewAlert/${e.id}`})),e.registerNavigation("logs",c.a,(e=>{if(Object(h.d)(e.params))return`/app/discover#/viewAlert/${e.id}`})),e.registerNavigation("infrastructure",c.a,(e=>{if(Object(h.d)(e.params))return`/app/discover#/viewAlert/${e.id}`})),e.registerNavigation("observability",c.a,(e=>{if(Object(h.d)(e.params))return`/app/discover#/viewAlert/${e.id}`}))}(e),{id:c.a,description:s.i18n.translate("xpack.stackAlerts.esQuery.ui.alertType.descriptionText",{defaultMessage:"Alert when matches are found during the latest query run."}),iconClass:"logoElastic",documentationUrl:e=>e.links.alerting.esQuery,ruleParamsExpression:Object(n.lazy)((()=>t.e(1).then(t.bind(null,58)))),validate:p.b,defaultActionMessage:s.i18n.translate("xpack.stackAlerts.esQuery.ui.alertType.defaultActionMessage",{defaultMessage:"Elasticsearch query rule '{{rule.name}}' is active:\n\n- Value: '{{context.value}}'\n- Conditions Met: '{{context.conditions}}' over '{{rule.params.timeWindowSize}}''{{rule.params.timeWindowUnit}}'\n- Timestamp: '{{context.date}}'\n- Link: '{{context.link}}'"}),requiresAppContext:!1}}(r))}class plugin_StackAlertsPublicPlugin{constructor(e){i()(this,"isServerless",void 0),this.isServerless="serverless"===e.env.packageInfo.buildFlavor}setup(e,{triggersActionsUi:r,alerting:t}){y({ruleTypeRegistry:r.ruleTypeRegistry,alerting:t},this.isServerless)}start(){}stop(){}}var f=t(14);const m=e=>new plugin_StackAlertsPublicPlugin(e)},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r){e.exports=__kbnSharedDeps__.Rxjs},,function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/alerting/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r){e.exports=__kbnSharedDeps__.Classnames},function(e,r){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,r){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/alerting/common/parse_duration");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/data/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r){e.exports=__kbnSharedDeps__.KbnCodeEditor},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/textBasedLanguages/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/dataViews/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r,t){t.r(r);var a=__kbnBundles__.get("plugin/data/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(a))},function(e,r){e.exports=__kbnSharedDeps__.KbnEsqlAst},function(e,r,t){"use strict";t.d(r,"b",(function(){return a})),t.d(r,"a",(function(){return i}));const a="stackAlerts",i=".es-query"}]);