(window.visTypeHeatmap_bundle_jsonpfunction=window.visTypeHeatmap_bundle_jsonpfunction||[]).push([[0],{25:function(e,t,n){"use strict";n.r(t),n.d(t,"convertToLens",(function(){return a}));var l=n(3),o=n(23),s=n(24),i=n(13),r=n(6);const a=async(e,t)=>{var n;if(!t)return null;const a=Object(i.a)(),c=await Object(l.getDataViewByIndexPatternId)(null===(n=e.data.indexPattern)||void 0===n?void 0:n.id,a);if(!c)return null;const{getColumnsFromVis:u,convertToFiltersColumn:d}=await l.convertToLensModule,p=u(e,t,c,{buckets:["segment"],splits:["group"],unsupported:["split_row","split_column"]});if(null===p)return null;const[m]=p,g=m.columns.find((({isBucketed:e,isSplit:t})=>e&&!t)),v=null!=g?g:d(Object(s.v4)(),{filters:[{input:{language:"lucene",query:"*"}}]});(null==g?void 0:g.columnId)!==(null==v?void 0:v.columnId)&&(m.buckets.all.push(v.columnId),m.columns.push(v));const b=m.columns.find((({isBucketed:e,isSplit:t})=>e&&t));if(!m.buckets.all.length||m.metrics.length>1)return null;const f=Object(s.v4)(),y=c.id,h=await(async(e,t,{metrics:n,buckets:o})=>{var s,i,a;const[c]=n,[u,d]=o,{params:p,uiState:m}=t,g=null!==(s=m.get("vis",{}))&&void 0!==s?s:{},v=await(async e=>{const{getPalette:t,getPaletteFromStopsWithColors:n,getPercentageModeConfig:o}=await l.convertToLensModule;if((e=>Boolean(e.setColorRange&&e.colorsRange&&e.colorsRange.length))(e))return t(e,o(e,!1),e.percentageMode);const{color:s,stop:i=[]}=Object(r.a)(e.colorsNumber,e.colorSchema,e.invertColors,!0),a=[{from:i[0],to:i[i.length-1],type:"range"}],{colorSchema:c,invertColors:u}=e;return n({color:s,stop:null!=i?i:[]},o({colorsRange:a,colorSchema:c,invertColors:u,percentageMode:!0},!1),!0)})(p);return{layerId:e,layerType:"data",shape:"heatmap",legend:{type:"heatmap_legend",isVisible:g.legendOpen,position:p.legendPosition},gridConfig:{type:"heatmap_grid",isCellLabelVisible:null!==(i=null===(a=p.valueAxes)||void 0===a?void 0:a[0].labels.show)&&void 0!==i&&i,isXAxisLabelVisible:!0,isYAxisLabelVisible:!0,isYAxisTitleVisible:!0,isXAxisTitleVisible:!0},valueAccessor:c,xAccessor:u,yAccessor:d,palette:v?{...v,accessor:c}:void 0}})(f,e,{metrics:m.metrics,buckets:[v.columnId,null==b?void 0:b.columnId].filter((e=>Boolean(e)))});return{type:"lnsHeatmap",layers:[{indexPatternId:y,layerId:f,columns:m.columns.map(o.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:h,indexPatternIds:[y]}}}}]);