!function(e){function t(t){for(var n,a,i=t[0],s=t[1],o=0,c=[];o<i.length;o++)a=i[o],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&c.push(r[a][0]),r[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(l&&l(t);c.length;)c.shift()()}var n={},r={1:0};function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=i);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.src=function(e){return a.p+"visTypeHeatmap.chunk."+e+".js"}(e);var l=new Error;s=function(t){o.onerror=o.onload=null,clearTimeout(c);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,n[1](l)}r[e]=void 0}};var c=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(t)},a.m=e,a.c=n,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var i=window.visTypeHeatmap_bundle_jsonpfunction=window.visTypeHeatmap_bundle_jsonpfunction||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var l=s;a(a.s=17)}([function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){"use strict";n.r(t),n.d(t,"LEGACY_HEATMAP_CHARTS_LIBRARY",(function(){return r}));const r="visualization:visualize:legacyHeatmapChartsLibrary"},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));let r=function(e){return e.Linear="linear",e.Log="log",e.SquareRoot="square root",e}({}),a=function(e){return e.Category="category",e.Value="value",e}({})},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return o}));var r=n(15);const a="rgba(0, 0, 0, 0)",i=(e,t,n,a=!1)=>{const i=a?1-e/t:e/t;return Object(r.getHeatmapColors)(i,n)},s=(e,t,n=!1,r=!1)=>{const s=[],o=[];if(!e)return{color:[]};r&&(s.push(a),o.push(0));const l=100/e;for(let r=0;r<e;r++)s.push(i(r,e,t,n)),o.push(l+r*l);return{color:null!=s?s:[],stop:null!=o?o:[]}},o=(e,t,n=!1)=>e.reduce(((e,r,s,o)=>(s&&r.from!==o[s-1].to&&(e.color.push(a),e.stop.push(r.from)),e.color.push(i(s,o.length,t,n)),e.stop.push(r.to),e)),{color:[],stop:[]})},function(e,t){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(10)(4)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var r=n(16);const[a,i]=Object(r.createGetterSetter)("dataViews")},function(e,t,n){e.exports=n(10)(2)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/charts/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n(18),__kbnBundles__.define("plugin/visTypeHeatmap/public",n,19),__kbnBundles__.define("plugin/visTypeHeatmap/common",n,4)},function(e,t,n){n.p=window.__kbnPublicPath__.visTypeHeatmap},function(e,t,n){"use strict";n.r(t),n.d(t,"heatmapVisType",(function(){return T})),n.d(t,"plugin",(function(){return A}));var r=n(14),a=n.n(r),i=n(4),s=n(1),o=n(7),l=n(2),c=n(11),u=n(3),p=n(5),g=n(0),d=n(6);const m=e=>{var t,n;const r=Object(g.buildExpressionFunction)("heatmap_legend",{isVisible:e.addLegend,position:e.legendPosition,shouldTruncate:null===(t=e.truncateLegend)||void 0===t||t,maxLines:null!==(n=e.maxLegendLines)&&void 0!==n?n:1,legendSize:e.legendSize});return Object(g.buildExpression)([r])},f=e=>{const t=Object(g.buildExpressionFunction)("visdimension",{accessor:e.accessor});return e.format&&(t.addArgument("format",e.format.id),t.addArgument("formatParams",JSON.stringify(e.format.params))),Object(g.buildExpression)([t])},_=e=>{var t,n;const r=Object(g.buildExpressionFunction)("heatmap_grid",{isCellLabelVisible:null!==(t=null===(n=e.valueAxes)||void 0===n?void 0:n[0].labels.show)&&void 0!==t&&t,isXAxisLabelVisible:!0,isYAxisLabelVisible:!0,isYAxisTitleVisible:!0,isXAxisTitleVisible:!0});return Object(g.buildExpression)([r])},b=async(e,t)=>{var n;const r=Object(u.getVisSchemas)(e,t);!0===e.params.percentageMode&&r.metric.forEach((t=>{var n;t.format={id:"percent",params:{pattern:null!==(n=e.params.percentageFormatPattern)&&void 0!==n?n:`0,0.[${"0".repeat(2)}]%`}}}));const a={showTooltip:e.params.addTooltip,highlightInHover:e.params.enableHover,lastRangeIsRightOpen:null!==(n=e.params.lastRangeIsRightOpen)&&void 0!==n&&n,percentageMode:e.params.percentageMode,legend:m(e.params),gridConfig:_(e.params)},i=Object(g.buildExpressionFunction)("heatmap",a);let s;if(r.metric.length&&i.addArgument("valueAccessor",f(r.metric[0])),r.segment&&r.segment.length&&i.addArgument("xAccessor",f(r.segment[0])),r.group&&r.group.length&&i.addArgument("yAccessor",f(r.group[0])),r.split_row&&r.split_row.length&&i.addArgument("splitRowAccessor",f(r.split_row[0])),r.split_column&&r.split_column.length&&i.addArgument("splitColumnAccessor",f(r.split_column[0])),e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length){var o;const t=Object(d.b)(e.params.colorsRange,e.params.colorSchema,e.params.invertColors);s=Object(g.buildExpressionFunction)("palette",{...t,range:"number",continuity:"none",rangeMin:e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length?e.params.colorsRange[0].from:void 0,rangeMax:e.params.setColorRange&&e.params.colorsRange&&e.params.colorsRange.length?e.params.colorsRange[(null===(o=e.params)||void 0===o?void 0:o.colorsRange.length)-1].to:void 0})}else{const t=Object(d.a)(e.params.colorsNumber,e.params.colorSchema,e.params.invertColors);s=Object(g.buildExpressionFunction)("palette",{...t,range:"percent",continuity:"none",rangeMin:0,rangeMax:100})}return i.addArgument("palette",Object(g.buildExpression)([s])),Object(g.buildExpression)([i]).toAst()};var h=n(12),v=n.n(h),O=n(8),y=n(9);const x=Object(O.lazy)((()=>n.e(2).then(n.bind(null,26)))),j=({showElasticChartsOptions:e,palettes:t})=>n=>Object(y.jsx)(x,v()({},n,{palettes:t,showElasticChartsOptions:e})),T=e=>(({showElasticChartsOptions:e=!1,palettes:t})=>({name:"heatmap",title:s.i18n.translate("visTypeHeatmap.heatmap.heatmapTitle",{defaultMessage:"Heat map"}),icon:"heatmap",description:s.i18n.translate("visTypeHeatmap.heatmap.heatmapDescription",{defaultMessage:"Display values as colors in a matrix."}),fetchDatatable:!0,toExpressionAst:b,getSupportedTriggers:()=>[u.VIS_EVENT_TO_TRIGGER.filter],visConfig:{defaults:{type:"heatmap",addTooltip:!0,addLegend:!0,enableHover:!1,legendPosition:o.Position.Right,colorsNumber:4,colorSchema:c.ColorSchemas.GreenToRed,setColorRange:!1,colorsRange:[],invertColors:!1,percentageMode:!1,valueAxes:[{show:!1,id:"ValueAxis-1",type:p.a.Value,scale:{type:p.b.Linear,defaultYExtents:!1},labels:{show:!1,rotate:0,overwriteColor:!1,color:"black"}}]}},editorConfig:{enableDataViewChange:!0,optionsTemplate:j({showElasticChartsOptions:e,palettes:t}),schemas:[{group:l.AggGroupNames.Metrics,name:"metric",title:s.i18n.translate("visTypeHeatmap.heatmap.metricTitle",{defaultMessage:"Value"}),min:1,max:1,aggFilter:["count","avg","median","sum","min","max","cardinality","std_dev","top_hits","!filtered_metric","!single_percentile","!single_percentile_rank"],defaults:[{schema:"metric",type:"count"}]},{group:l.AggGroupNames.Buckets,name:"segment",title:s.i18n.translate("visTypeHeatmap.heatmap.segmentTitle",{defaultMessage:"X-axis"}),min:0,max:1,aggFilter:["!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:l.AggGroupNames.Buckets,name:"group",title:s.i18n.translate("visTypeHeatmap.heatmap.groupTitle",{defaultMessage:"Y-axis"}),min:0,max:1,aggFilter:["!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]},{group:l.AggGroupNames.Buckets,name:"split",title:s.i18n.translate("visTypeHeatmap.heatmap.splitTitle",{defaultMessage:"Split chart"}),min:0,max:1,aggFilter:["!geotile_grid","!filter","!sampler","!diversified_sampler","!rare_terms","!multi_terms","!significant_text"]}]},requiresSearch:!0,navigateToLens:async(e,t)=>{const{convertToLens:r}=await n.e(0).then(n.bind(null,25));return e?r(e,t):null},getExpressionVariables:async(e,t)=>{const{convertToLens:r}=await n.e(0).then(n.bind(null,25));return{canNavigateToLens:Boolean(null!=e&&e.params?await r(e,t):null)}}}))(e);var w=n(13);class plugin_VisTypeHeatmapPlugin{constructor(e){a()(this,"initializerContext",void 0),this.initializerContext=e}setup(e,{visualizations:t,charts:n,usageCollection:r}){if(!e.uiSettings.get(i.LEGACY_HEATMAP_CHARTS_LIBRARY)){const{readOnly:e}=this.initializerContext.config.get();t.createBaseVisualization({...T({showElasticChartsOptions:!0,palettes:n.palettes}),disableCreate:Boolean(e),disableEdit:Boolean(e)})}return{}}start(e,{dataViews:t}){Object(w.b)(t)}}const A=e=>new plugin_VisTypeHeatmapPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visDefaultEditor/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/common/convert_to_lens");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.Uuid}]);