/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function t(t){for(var n,i,s=t[0],r=t[1],o=0,l=[];o<s.length;o++)i=s[o],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);for(c&&c(t);l.length;)l.shift()()}var n={},a={0:0};function i(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,i){n=a[e]=[t,i]}));t.push(n[2]=s);var r,o=document.createElement("script");o.charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.src=function(e){return i.p+"savedObjectsTagging.chunk."+e+".js"}(e);var c=new Error;r=function(t){o.onerror=o.onload=null,clearTimeout(l);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",c.name="ChunkLoadError",c.type=i,c.request=s,n[1](c)}a[e]=void 0}};var l=setTimeout((function(){r({type:"timeout",target:o})}),12e4);o.onerror=o.onload=r,document.head.appendChild(o)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.savedObjectsTagging_bundle_jsonpfunction=window.savedObjectsTagging_bundle_jsonpfunction||[],r=s.push.bind(s);s.push=t,s=s.slice();for(var o=0;o<s.length;o++)t(s[o]);var c=r;i(i.s=30)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t,n){e.exports=n(20)(2)},function(e,t,n){"use strict";n.d(t,"h",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return g})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return h}));var a=n(16),i=(n(17),n(6));const s=e=>({type:i.c,id:e,name:`tag-ref-${e}`}),r=(e,t)=>[...e.filter((({type:e})=>e!==i.c)),...t.map(s)],o=(e,t)=>c(e.references,t),c=(e,t)=>{const n=e.filter((e=>e.type===a.d)),i=[],s=[];return n.forEach((e=>{const n=t.find((t=>t.id===e.id));n?i.push(n):s.push(e)})),{tags:i,missingRefs:s}},l=(e,t)=>{const n=t.find((t=>t.name===e));return null==n?void 0:n.id},u=(e,t)=>e.name.localeCompare(t.name),g=(e,t)=>t.find((({id:t})=>t===e)),d=e=>e.replace(" ","_"),h=e=>e.filter((e=>e.type===a.d)).map((({id:e})=>e))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s}));const a="savedObjectsTagging",i="tag",s="tags"},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,n){e.exports=n(20)(4)},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return m}));var a=n(8),i=n.n(a),s=n(1),r=n(2),o=n(5),c=n(0);const l=({tag:e,onClick:t})=>{const n=t?{onClick:()=>{t(e)},onClickAriaLabel:o.i18n.translate("xpack.savedObjectsTagging.tagList.tagBadge.buttonLabel",{defaultMessage:"{tagName} tag button.",values:{tagName:e.name}}),iconOnClick:()=>{},iconOnClickAriaLabel:""}:{};return Object(c.jsx)(r.EuiBadge,i()({color:e.color,title:e.description},n),e.name)},u=({tags:e,onClick:t,tagRender:n})=>Object(c.jsx)(r.EuiBadgeGroup,null,e.map((e=>n?Object(c.jsx)("span",{key:e.name},n(e)):Object(c.jsx)(l,{key:e.name,tag:e,onClick:t}))));var g=n(11),d=n(4);const h={type:"__create_option__"};function p(e){const t=e.value;return void 0!==t.name&&void 0!==t.color&&void 0!==t.id}function f(e){return"__create_option__"===e.value.type}const b=(e,t,n)=>f(e)?Object(c.jsx)(r.EuiFlexGroup,{"data-test-subj":"tagSelectorOption-action__create",gutterSize:"xs",alignItems:"center",responsive:!1},Object(c.jsx)(r.EuiFlexItem,{grow:!1},Object(c.jsx)(r.EuiIcon,{type:"tag"})),Object(c.jsx)(r.EuiFlexItem,{grow:!1},Object(c.jsx)("span",null,Object(c.jsx)(g.FormattedMessage,{id:"xpack.savedObjectsTagging.components.tagSelector.createTagOptionLabel",defaultMessage:"Create tag"})))):p(e)?((e,t,n)=>{var a;const{name:i,color:s}=null!==(a=e.value)&&void 0!==a?a:{name:""};return Object(c.jsx)(r.EuiHealth,{color:s,"data-test-subj":`tagSelectorOption-${Object(d.g)(i)}`},Object(c.jsx)("span",{className:n},Object(c.jsx)(r.EuiHighlight,{search:t},i)))})(e,t,n):void 0,v=({tags:e,selected:t,onTagsSelected:n,allowCreate:a,openCreateModal:o,fullWidth:l=!0,...u})=>{const[g,d]=Object(s.useState)(""),v=Object(s.useMemo)((()=>({label:`${g} `,color:"#FFFFFF",value:h})),[g]),m=Object(s.useMemo)((()=>[...e.filter((e=>!e.managed)).map((e=>({label:e.name,color:e.color,value:e}))),...a?[v]:[]]),[a,e,v]),j=Object(s.useMemo)((()=>m.filter((e=>p(e)&&t.includes(e.value.id)))),[t,m]),_=Object(s.useCallback)((e=>{const a=e.filter(p).map((e=>e.value.id));n(a),e.find(f)&&o({defaultValues:{name:g},onCreate:e=>{n([...t,e.id])}})}),[t,n,o,g]);return Object(c.jsx)(r.EuiComboBox,i()({placeholder:"",options:m,selectedOptions:j,onSearchChange:d,onChange:_,renderOption:b,fullWidth:l},u))},m=({tag:e})=>{const{name:t,color:n}=e;return Object(c.jsx)(r.EuiHealth,{color:n,"data-test-subj":`tag-searchbar-option-${Object(d.g)(t)}`},Object(c.jsx)("span",null,Object(c.jsx)(r.EuiText,null,t)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(29),i=n(1),s=a.__importDefault(n(32));t.default=function(e,t){var n=i.useState(t),a=n[0],r=n[1];return s.default((function(){var t=e.subscribe(r);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){"use strict";n.d(t,"b",(function(){return tags_client_TagsClient})),n.d(t,"a",(function(){return tags_cache_TagsCache})),n.d(t,"c",(function(){return c}));var a=n(3),i=n.n(a);n(1),n(0);n(22),n(23);function s(e,t){e.reportEvent("performance_metric",t)}const r=e=>{try{e()}catch(e){}};class tags_client_TagsClient{constructor({analytics:e,http:t,changeListener:n}){i()(this,"analytics",void 0),i()(this,"http",void 0),i()(this,"changeListener",void 0),this.analytics=e,this.http=t,this.changeListener=n}async create(e){const t=window.performance.now(),{tag:n}=await this.http.post("/api/saved_objects_tagging/tags/create",{body:JSON.stringify(e)}),a=window.performance.now()-t;return s(this.analytics,{eventName:"createTag",duration:a}),r((()=>{this.changeListener&&this.changeListener.onCreate(n)})),n}async update(e,t){const n=window.performance.now(),{tag:a}=await this.http.post(`/api/saved_objects_tagging/tags/${e}`,{body:JSON.stringify(t)}),i=window.performance.now()-n;return s(this.analytics,{eventName:"updateTag",duration:i}),r((()=>{if(this.changeListener){const{id:e,...t}=a;this.changeListener.onUpdate(e,t)}})),a}async get(e){const{tag:t}=await this.http.get(`/api/saved_objects_tagging/tags/${e}`);return t}async getAll({asSystemRequest:e}={}){const t=window.performance.now(),n={asSystemRequest:e},{tags:a}=await this.http.get("/api/saved_objects_tagging/tags",n),i=window.performance.now()-t;return s(this.analytics,{eventName:"getAllTag",duration:i}),r((()=>{this.changeListener&&this.changeListener.onGetAll(a)})),a}async delete(e){const t=window.performance.now();await this.http.delete(`/api/saved_objects_tagging/tags/${e}`);const n=window.performance.now()-t;s(this.analytics,{eventName:"deleteTag",duration:n}),r((()=>{this.changeListener&&this.changeListener.onDelete(e)}))}async find({page:e,perPage:t,search:n}){const a=window.performance.now(),i=await this.http.get("/internal/saved_objects_tagging/tags/_find",{query:{page:e,perPage:t,search:n}}),r=window.performance.now()-a;return s(this.analytics,{eventName:"findTag",duration:r}),i}async findByName(e,{exact:t}={exact:!1}){const{tags:n=[]}=await this.find({page:1,perPage:1e4,search:e});if(t){const t=n.find((t=>t.name.toLocaleLowerCase()===e.toLocaleLowerCase()));return null!=t?t:null}return n.length>0?n[0]:null}async bulkDelete(e){const t=window.performance.now();await this.http.post("/internal/saved_objects_tagging/tags/_bulk_delete",{body:JSON.stringify({ids:e})});const n=window.performance.now()-t;s(this.analytics,{eventName:"bulkDeleteTag",duration:n}),r((()=>{this.changeListener&&e.forEach((e=>{this.changeListener.onDelete(e)}))}))}}var o=n(7);class tags_cache_TagsCache{constructor({refreshHandler:e,refreshInterval:t}){i()(this,"refreshInterval",void 0),i()(this,"refreshHandler",void 0),i()(this,"intervalId",void 0),i()(this,"internal$",void 0),i()(this,"public$",void 0),i()(this,"stop$",void 0),i()(this,"isInitialized$",void 0),this.refreshHandler=e,this.refreshInterval=t,this.stop$=new o.Subject,this.internal$=new o.BehaviorSubject([]),this.public$=this.internal$.pipe(Object(o.takeUntil)(this.stop$)),this.isInitialized$=new o.BehaviorSubject(!1)}async initialize(){await this.refresh(),this.isInitialized$.next(!0),this.refreshInterval&&(this.intervalId=window.setInterval((()=>{this.refresh()}),this.refreshInterval.asMilliseconds()))}async refresh(){try{const e=await this.refreshHandler();this.internal$.next(e)}catch(e){}}getState(){return this.internal$.getValue()}getState$({waitForInitialization:e=!1}={}){return e?this.isInitialized$.pipe(Object(o.first)((e=>e)),Object(o.mergeMap)((()=>this.public$))):this.public$}onDelete(e){this.internal$.next(this.internal$.value.filter((t=>t.id!==e)))}onCreate(e){this.internal$.next([...this.internal$.value.filter((t=>t.id!==e.id)),e])}onUpdate(e,t){this.internal$.next(this.internal$.value.map((n=>n.id===e?{...n,...t}:n)))}onGetAll(e){this.internal$.next(e)}stop(){this.intervalId&&window.clearInterval(this.intervalId),this.stop$.next()}}const c=e=>{var t;return e&&400===e.statusCode&&"boolean"==typeof(null===(t=e.attributes)||void 0===t?void 0:t.valid)&&"object"==typeof e.attributes.errors}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(6);const i=e=>{var t,n,i,s,r,o,c;const l=e[a.a];return{view:null!==(t=null==l?void 0:l.view)&&void 0!==t&&t,create:null!==(n=null==l?void 0:l.create)&&void 0!==n&&n,edit:null!==(i=null==l?void 0:l.edit)&&void 0!==i&&i,delete:null!==(s=null==l?void 0:l.delete)&&void 0!==s&&s,assign:null!==(r=null==l?void 0:l.assign)&&void 0!==r&&r,viewConnections:null!==(o=null===(c=e.savedObjectsManagement)||void 0===c?void 0:c.read)&&void 0!==o&&o}}},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"d",(function(){return i.c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));var a=n(14),i=n(6),s=n(5);const r=50,o=100,c=/^#[0-9A-F]{6}$/i,l=e=>{if(!(e=>c.test(e))(e))return s.i18n.translate("xpack.savedObjectsTagging.validation.color.errorInvalid",{defaultMessage:"Tag color must be a valid hex color"})},u=e=>e.length<2?s.i18n.translate("xpack.savedObjectsTagging.validation.name.errorTooShort",{defaultMessage:"Tag name must be at least {length} characters",values:{length:2}}):e.length>r?s.i18n.translate("xpack.savedObjectsTagging.validation.name.errorTooLong",{defaultMessage:"Tag name may not exceed {length} characters",values:{length:r}}):void 0,g=e=>{if(e.length>o)return s.i18n.translate("xpack.savedObjectsTagging.validation.description.errorTooLong",{defaultMessage:"Tag description may not exceed {length} characters",values:{length:o}})}},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),i=n(12),s=n.n(i),r=n(25),o=n(0);const c=(e,t)=>n=>(s.a.render(Object(o.jsx)(r.a,t,e),n),()=>s.a.unmountComponentAtNode(n));n(3),n(5),a.Component},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){"use strict";var a=n(9);n.d(t,"a",(function(){return a.a})),n.d(t,"b",(function(){return a.c}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1);const i=Object(a.createContext)(void 0)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={startPageChange:"start::pageChange",endPageReady:"end::pageReady"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return d}));var a=n(1),i=n.n(a),s=n(2),r=n(18),o=n(0);const c=()=>Object(o.jsx)(s.EuiDelayRender,null,Object(o.jsx)(s.EuiLoadingSpinner,null)),l=i.a.lazy((()=>n.e(4).then(n.bind(null,123)).then((({CreateTagModal:e})=>({default:e}))))),u=i.a.lazy((()=>n.e(5).then(n.bind(null,124)).then((({EditTagModal:e})=>({default:e}))))),g=({overlays:e,tagClient:t,notifications:n,...a})=>async({onCreate:s,defaultValues:u})=>{const g=e.openModal(Object(r.a)(Object(o.jsx)(i.a.Suspense,{fallback:Object(o.jsx)(c,null)},Object(o.jsx)(l,{defaultValues:u,onClose:()=>{g.close()},onSave:e=>{g.close(),s(e)},tagClient:t,notifications:n})),a));return g},d=({overlays:e,tagClient:t,notifications:n,...a})=>async({tagId:s,onUpdate:l})=>{const g=await t.get(s),d=e.openModal(Object(r.a)(Object(o.jsx)(i.a.Suspense,{fallback:Object(o.jsx)(c,null)},Object(o.jsx)(u,{tag:g,onClose:()=>{d.close()},onSave:e=>{d.close(),l(e)},tagClient:t,notifications:n})),a));return d}},function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(8),i=n.n(a),s=n(1),r=n(26),o=n(27),c=n(10),l=n.n(c),u=n(15),g=n.n(u),d=n(2);const h="eui-global",p="eui-utilities",f={darkMode:!1};var b=n(0);const v=[d.euiStylisPrefixer],m=g()({key:"css",stylisPlugins:v,container:document.querySelector('meta[name="emotion"]')}),j=g()({key:h,stylisPlugins:v,container:document.querySelector(`meta[name="${h}"]`)}),_=g()({key:p,stylisPlugins:v,container:document.querySelector(`meta[name="${p}"]`)});m.compat=!0,j.compat=!0,_.compat=!0;const y={default:m,global:j,utility:_},O=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:a,children:i})=>{const r=l()(e,f),o=Object(s.useMemo)((()=>(e=>e.darkMode?d.COLOR_MODES_STANDARD.dark:d.COLOR_MODES_STANDARD.light)(r)),[r]),c=n||o,u=!1!==t&&void 0;return Object(b.jsx)(d.EuiProvider,{cache:y,modify:a,colorMode:c,globalStyles:u,utilityClasses:u},i)},x=({children:e,i18n:t,...n})=>Object(r.useIsNestedEuiProvider)()?(Object(o.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(b.jsx)(t.Context,null,e)):Object(b.jsx)(O,n,Object(b.jsx)(t.Context,null,e));var w=n(19);const T=({children:e,...t})=>Object(b.jsx)(x,i()({globalStyles:!1},t),Object(b.jsx)(w.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(b.jsx)(w.KibanaErrorBoundary,null,e)))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var a=void 0;t.setEuiDevProviderWarning=function(e){return a=e},t.getEuiDevProviderWarning=function(){return a},t.emitEuiProviderWarning=function(e){if("function"==typeof a)return a(e);switch(a){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){n(31),__kbnBundles__.define("plugin/savedObjectsTagging/public",n,33)},function(e,t,n){n.p=window.__kbnPublicPath__.savedObjectsTagging},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),i="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=i},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return $}));var a=n(3),i=n.n(a),s=n(5),r=n(6),o=n(14),c=n(13);class assignment_service_TagAssignmentService{constructor({http:e}){i()(this,"http",void 0),this.http=e}async findAssignableObjects({search:e,types:t,maxResults:n}){const{objects:a}=await this.http.get("/internal/saved_objects_tagging/assignments/_find_assignable_objects",{query:{search:e,types:t,max_results:n}});return a}async updateTagAssignments({tags:e,assign:t,unassign:n}){await this.http.post("/api/saved_objects_tagging/assignments/update_by_tags",{body:JSON.stringify({tags:e,assign:t,unassign:n})})}async getAssignableTypes(){const{types:e}=await this.http.get("/internal/saved_objects_tagging/assignments/_assignable_types");return e}}var l=n(4),u=n(8),g=n.n(u),d=n(1),h=n(10),p=n.n(h),f=n(9),b=n(0);const v=({object:e,tags:t,onClick:n,tagRender:a})=>{const i=Object(d.useMemo)((()=>{const{tags:n}=Object(l.c)(e,t);return n.sort(l.a),n}),[e,t]);return Object(b.jsx)(f.b,{tags:i,onClick:n,tagRender:a})},m=({cache:e})=>t=>{const n=p()(e.getState$(),e.getState());return Object(b.jsx)(v,g()({},t,{tags:n}))},j=({cache:e,capabilities:t,openCreateModal:n})=>a=>{const i=p()(e.getState$(),e.getState());return Object(b.jsx)(f.d,g()({},a,{tags:i,allowCreate:t.create,openCreateModal:n}))};var _=n(2),y=n(11);const O=({cache:e,capabilities:t,openCreateModal:n})=>({initialSelection:a,onTagsSelected:i,markOptional:s,...r})=>{const o=p()(e.getState$(),e.getState()),[c,l]=Object(d.useState)(a),u=Object(d.useCallback)((e=>{l(e),i(e)}),[i]);return Object(b.jsx)(_.EuiFormRow,{fullWidth:!0,label:Object(b.jsx)(y.FormattedMessage,{id:"xpack.savedObjectsTagging.uiApi.saveModal.label",defaultMessage:"Tags"}),labelAppend:s&&Object(b.jsx)(_.EuiText,{color:"subdued",size:"xs"},Object(b.jsx)(y.FormattedMessage,{id:"xpack.savedObjectsTagging.uiApi.saveModal.optional",defaultMessage:"Optional"}))},Object(b.jsx)(f.d,g()({selected:c,onTagsSelected:u,tags:o,"data-test-subj":"savedObjectTagSelector",allowCreate:t.create,openCreateModal:n},r)))};var x=n(24);const w=({components:e,cache:t})=>({serverPaging:n=!1}={})=>({field:"references",name:s.i18n.translate("xpack.savedObjectsTagging.uiApi.table.columnTagsName",{defaultMessage:"Tags"}),description:s.i18n.translate("xpack.savedObjectsTagging.uiApi.table.columnTagsDescription",{defaultMessage:"Tags associated with this saved object"}),sortable:!n&&(e=>{const{tags:n}=Object(l.f)(e.references,t.getState());return n.sort(l.a),n.length?n[0].name:void 0}),render:(t,n)=>Object(b.jsx)(e.TagList,{object:n}),"data-test-subj":"listingTableRowTags"});var T=n(21);const S=({getTagList:e})=>({useName:t=!0,tagField:n="tag"}={})=>({type:"field_value_selection",field:n,name:s.i18n.translate("xpack.savedObjectsTagging.uiApi.searchBar.filterButtonLabel",{defaultMessage:"Tags"}),multiSelect:"or",options:()=>Promise.resolve(e().map((e=>({value:t?e.name:e.id,name:e.name,view:Object(b.jsx)(T.b,{tag:e})}))))});var C=n(7);const k=({cache:e})=>async(t,{tagField:n="tag",useName:a=!0}={})=>{let i;try{i=_.Query.parse(t)}catch(e){return{searchTerm:t,tagReferences:[],tagReferencesToExclude:[],valid:!1}}if(!t)return{searchTerm:"",tagReferences:[],tagReferencesToExclude:[],valid:!0};let s="";i.ast.getTermClauses().length&&(s=i.ast.getTermClauses().map((e=>e.value)).join(" "));let r=[],o=[];if(i.ast.getFieldClauses(n)){const{selectedTags:t,excludedTags:s}=i.ast.getFieldClauses(n).reduce(((e,t)=>("must"===t.match?e.selectedTags=t.value:"must_not"===t.match&&(e.excludedTags=t.value),e)),{selectedTags:[],excludedTags:[]}),c=await Object(C.lastValueFrom)(e.getState$({waitForInitialization:!0}).pipe(Object(C.first)())),l=e=>{if(a){const t=[];return e.forEach((e=>{const n=c.find((t=>t.name===e));n&&t.push({type:"tag",id:n.id})})),t}return e.map((e=>({type:"tag",id:e})))};r=l(t),o=l(s)}return{searchTerm:s,tagReferences:r,tagReferencesToExclude:o,valid:!0}},E=({cache:e})=>t=>{const n=Object(l.b)(t,e.getState());return n?{type:"tag",id:n}:void 0},M=e=>"getTags"in e&&"setTags"in e,P=({cache:e,capabilities:t,client:n,...a})=>{const i=(({capabilities:e,cache:t,tagClient:n,...a})=>{const i=Object(x.a)({...a,tagClient:n});return{TagList:m({cache:t}),TagSelector:j({cache:t,capabilities:e,openCreateModal:i}),SavedObjectSaveModalTagSelector:O({cache:t,capabilities:e,openCreateModal:i})}})({...a,cache:e,capabilities:t,tagClient:n}),s=(e=>()=>e.getState().sort(l.a))(e);return{components:i,getTableColumnDefinition:w({components:i,cache:e}),getSearchBarFilter:S({getTagList:s}),parseSearchQuery:k({cache:e}),convertNameToReference:E({cache:e}),hasTagDecoration:M,getTagIdsFromReferences:l.e,getTagIdFromName:t=>Object(l.b)(t,e.getState()),updateTagsReferences:l.h,getTag:t=>Object(l.d)(t,e.getState()),getTagList:s}};var L=n(28),R=n.n(L);class config_SavedObjectsTaggingClientConfig{constructor(e){i()(this,"cacheRefreshInterval",void 0),this.cacheRefreshInterval=R.a.duration(e.cache_refresh_interval)}}class plugin_SavedObjectTaggingPlugin{constructor(e){i()(this,"tagClient",void 0),i()(this,"tagCache",void 0),i()(this,"assignmentService",void 0),i()(this,"config",void 0),this.config=new config_SavedObjectsTaggingClientConfig(e.config.get())}setup(e,{management:t,savedObjectsTaggingOss:a}){const i=t.sections.section.kibana,o=s.i18n.translate("xpack.savedObjectsTagging.management.sectionLabel",{defaultMessage:"Tags"});return i.registerApp({id:r.b,title:o,order:1.5,mount:async t=>{const{mountSection:a}=await n.e(2).then(n.bind(null,125));return a({tagClient:this.tagClient,tagCache:this.tagCache,assignmentService:this.assignmentService,core:e,mountParams:t,title:o})}}),a.registerTaggingApi(e.getStartServices().then((([e,t,n])=>n))),{}}start({http:e,application:t,analytics:n,...a}){return this.tagCache=new c.a({refreshHandler:()=>this.tagClient.getAll({asSystemRequest:!0}),refreshInterval:this.config.cacheRefreshInterval}),this.tagClient=new c.b({analytics:n,http:e,changeListener:this.tagCache}),this.assignmentService=new assignment_service_TagAssignmentService({http:e}),e.anonymousPaths.isAnonymous(window.location.pathname)||this.tagCache.initialize().catch((()=>{})),{client:this.tagClient,cache:this.tagCache,ui:P({...a,analytics:n,cache:this.tagCache,client:this.tagClient,capabilities:Object(o.a)(t.capabilities)})}}stop(){this.tagCache&&this.tagCache.stop()}}const $=e=>new plugin_SavedObjectTaggingPlugin(e)},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom}]);