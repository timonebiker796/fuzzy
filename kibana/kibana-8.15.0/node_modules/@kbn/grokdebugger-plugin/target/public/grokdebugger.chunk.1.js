/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.grokdebugger_bundle_jsonpfunction=window.grokdebugger_bundle_jsonpfunction||[]).push([[1],Array(19).concat([function(e,t,r){e.exports=r(7)(4)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),s=r(6),a=n.__importDefault(r(21));t.default=function(e,t){var r=s.useState(t),n=r[0],i=r[1];return a.default((function(){var t=e.subscribe(i);return function(){return t.unsubscribe()}}),[e]),n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),s="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var n=void 0;t.setEuiDevProviderWarning=function(e){return n=e},t.getEuiDevProviderWarning=function(){return n},t.emitEuiProviderWarning=function(e){if("function"==typeof n)return n(e);switch(n){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,r){e.exports=r(7)(2)},function(e,t,r){var n=r(25),s=r(26),a=r(27),i=r(28),o=r(29),u=r(30),c=r(31),g=r(32),l=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(o(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||g(e)||a(e)))return!e.length;var t=s(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(l.call(e,r))return!1;return!0}},function(e,t,r){e.exports=r(7)(3488)},function(e,t,r){e.exports=r(7)(836)},function(e,t,r){e.exports=r(7)(1608)},function(e,t,r){e.exports=r(7)(296)},function(e,t,r){e.exports=r(7)(1196)},function(e,t,r){e.exports=r(7)(1192)},function(e,t,r){e.exports=r(7)(1195)},function(e,t,r){e.exports=r(7)(1610)},function(e,t,r){"use strict";r.r(t),r.d(t,"renderApp",(function(){return J}));var n=r(6),s=r.n(n),a=r(14),i=r(11),o=r(19),u=r.n(o),c=r(15),g=r(22),l=r(20),d=r.n(l),b=r(16),j=r.n(b),p=r(9);const m="eui-global",h="eui-utilities",k={darkMode:!1};var x=r(8);const f=[p.euiStylisPrefixer],O=j()({key:"css",stylisPlugins:f,container:document.querySelector('meta[name="emotion"]')}),v=j()({key:m,stylisPlugins:f,container:document.querySelector(`meta[name="${m}"]`)}),E=j()({key:h,stylisPlugins:f,container:document.querySelector(`meta[name="${h}"]`)});O.compat=!0,v.compat=!0,E.compat=!0;const y={default:O,global:v,utility:E},C=({theme:{theme$:e},globalStyles:t,colorMode:r,modify:s,children:a})=>{const i=d()(e,k),o=Object(n.useMemo)((()=>(e=>e.darkMode?p.COLOR_MODES_STANDARD.dark:p.COLOR_MODES_STANDARD.light)(i)),[i]),u=r||o,c=!1!==t&&void 0;return Object(x.jsx)(p.EuiProvider,{cache:y,modify:s,colorMode:u,globalStyles:c,utilityClasses:c},a)},P=({children:e,i18n:t,...r})=>Object(c.useIsNestedEuiProvider)()?(Object(g.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(x.jsx)(t.Context,null,e)):Object(x.jsx)(C,r,Object(x.jsx)(t.Context,null,e));var S=r(18);const D=({children:e,...t})=>Object(x.jsx)(P,u()({globalStyles:!1},t),Object(x.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(x.jsx)(S.KibanaErrorBoundary,null,e)));var w=r(23),M=r.n(w),_=r(0),L=r(24),R=r.n(L),T=r(10),G=r(12);function F({value:e,onChange:t}){return Object(x.jsx)(p.EuiFormRow,{label:Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.sampleDataLabel",defaultMessage:"Sample Data"}),fullWidth:!0,"data-test-subj":"eventInput"},Object(x.jsx)(G.CodeEditor,{languageId:"plaintext",value:e,height:200,options:{tabSize:2,automaticLayout:!0},"aria-label":_.i18n.translate("xpack.grokDebugger.eventInputEditor",{defaultMessage:"Code editor for event inputs"}),onChange:t}))}function q({value:e,onChange:t}){return Object(x.jsx)(p.EuiFormRow,{label:Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.grokPatternLabel",defaultMessage:"Grok Pattern"}),fullWidth:!0,"data-test-subj":"patternInput"},Object(x.jsx)(G.CodeEditor,{languageId:G.GrokLang,value:e,height:200,options:{tabSize:2,automaticLayout:!0},"aria-label":_.i18n.translate("xpack.grokDebugger.grokPatternAriaLabel",{defaultMessage:"Code editor for inputting the grok pattern"}),onChange:t}))}function A({value:e,onChange:t}){return Object(x.jsx)(p.EuiAccordion,{id:"customPatternsInput",buttonContent:Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.customPatternsButtonLabel",defaultMessage:"Custom Patterns"}),"data-test-subj":"btnToggleCustomPatternsInput"},Object(x.jsx)(p.EuiSpacer,{size:"m"}),Object(x.jsx)(p.EuiCallOut,{title:Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.customPatterns.callOutTitle",defaultMessage:"Enter one custom pattern per line. For example:"})},Object(x.jsx)(p.EuiCodeBlock,null,"POSTFIX_QUEUEID [0-9A-F]{10,11}\nMSG message-id=<%{GREEDYDATA}>")),Object(x.jsx)(p.EuiSpacer,{size:"m"}),Object(x.jsx)(p.EuiFormRow,{fullWidth:!0,"data-test-subj":"aceCustomPatternsInput"},Object(x.jsx)(G.CodeEditor,{languageId:"plaintext",value:e,height:200,options:{tabSize:2,automaticLayout:!0},"aria-label":_.i18n.translate("xpack.grokDebugger.customPatternsInput",{defaultMessage:"Code editor for inputting custom patterns"}),onChange:t})))}function I({value:e}){return Object(x.jsx)(p.EuiFormRow,{label:Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.structuredDataLabel",defaultMessage:"Structured Data"}),fullWidth:!0},Object(x.jsx)(p.EuiCodeBlock,{paddingSize:"m",language:"json",isCopyable:!0,"data-test-subj":"eventOutputCodeBlock"},JSON.stringify(e,null,2)))}var B=r(13);class grokdebugger_request_GrokdebuggerRequest{constructor(e={}){this.rawEvent=Object(B.get)(e,"rawEvent",""),this.pattern=Object(B.get)(e,"pattern",""),this.customPatterns=Object(B.get)(e,"customPatterns",{})}get upstreamJSON(){return Object(B.pick)(this,["rawEvent","pattern","customPatterns"])}}const N={simulate:{errorTitle:_.i18n.translate("xpack.grokDebugger.simulate.errorTitle",{defaultMessage:"Simulate error"}),unknownErrorTitle:_.i18n.translate("xpack.grokDebugger.unknownErrorTitle",{defaultMessage:"Something went wrong"})}};class grok_debugger_GrokDebuggerComponent extends s.a.Component{constructor(e){super(e),M()(this,"onRawEventChange",(e=>{this.setState({rawEvent:e}),this.grokdebuggerRequest.rawEvent=e.trimEnd()})),M()(this,"onPatternChange",(e=>{this.setState({pattern:e}),this.grokdebuggerRequest.pattern=e.trimEnd()})),M()(this,"onCustomPatternsChange",(e=>{this.setState({customPatterns:e}),e=e.trim();const t={};e?(e.split("\n").forEach((e=>{const[,r,n]=e.match(/(\S+)\s+(.+)/)||[];r&&n&&(t[r]=n)})),this.grokdebuggerRequest.customPatterns=t):this.grokdebuggerRequest.customPatterns=t})),M()(this,"simulateGrok",(async()=>{const e=this.props.kibana.services.notifications;try{const t=await this.props.grokdebuggerService.simulate(this.grokdebuggerRequest);this.setState({structuredEvent:t.structuredEvent}),R()(t.error)||e.toasts.addDanger({title:N.simulate.errorTitle,text:t.error})}catch(t){e.toasts.addError(t,{title:N.simulate.unknownErrorTitle})}})),M()(this,"onSimulateClick",(()=>{this.setState({structuredEvent:{}},this.simulateGrok)})),M()(this,"isSimulateDisabled",(()=>""===this.state.rawEvent.trim()||""===this.state.pattern.trim())),this.state={rawEvent:"",pattern:"",customPatterns:"",structuredEvent:{}},this.grokdebuggerRequest=new grokdebugger_request_GrokdebuggerRequest}render(){return Object(x.jsx)(p.EuiPage,null,Object(x.jsx)(p.EuiPageBody,null,Object(x.jsx)(p.EuiPageSection,{grow:!0,color:"plain"},Object(x.jsx)(p.EuiForm,{className:"grokdebugger-container","data-test-subj":"grokDebuggerContainer"},Object(x.jsx)(F,{value:this.state.rawEvent,onChange:this.onRawEventChange}),Object(x.jsx)(q,{value:this.state.pattern,onChange:this.onPatternChange}),Object(x.jsx)(p.EuiSpacer,null),Object(x.jsx)(A,{value:this.state.customPatterns,onChange:this.onCustomPatternsChange}),Object(x.jsx)(p.EuiSpacer,null),Object(x.jsx)(p.EuiButton,{fill:!0,onClick:this.onSimulateClick,isDisabled:this.isSimulateDisabled(),"data-test-subj":"btnSimulate"},Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.simulateButtonLabel",defaultMessage:"Simulate"})),Object(x.jsx)(p.EuiSpacer,null),Object(x.jsx)(I,{value:this.state.structuredEvent})))))}}const W=Object(i.withKibana)(grok_debugger_GrokDebuggerComponent);var z=r(1);class grokdebugger_response_GrokdebuggerResponse{constructor(e){this.structuredEvent=Object(B.get)(e,"structuredEvent",{}),this.error=Object(B.get)(e,"error",{})}static fromUpstreamJSON(e){return new grokdebugger_response_GrokdebuggerResponse(e)}}class grokdebugger_service_GrokdebuggerService{constructor(e){this.http=e}simulate(e){return this.http.post(`${z.b.API_ROOT}/simulate`,{body:JSON.stringify(e.upstreamJSON)}).then((e=>grokdebugger_response_GrokdebuggerResponse.fromUpstreamJSON(e))).catch((e=>{throw new Error(e.body.message)}))}}const K=()=>{const e=_.i18n.translate("xpack.grokDebugger.registerLicenseLinkLabel",{defaultMessage:"register a license"}),t=_.i18n.translate("xpack.grokDebugger.trialLicenseTitle",{defaultMessage:"Trial"}),r=_.i18n.translate("xpack.grokDebugger.basicLicenseTitle",{defaultMessage:"Basic"}),n=_.i18n.translate("xpack.grokDebugger.goldLicenseTitle",{defaultMessage:"Gold"}),a=_.i18n.translate("xpack.grokDebugger.platinumLicenseTitle",{defaultMessage:"Platinum"});return Object(x.jsx)(p.EuiPage,null,Object(x.jsx)(p.EuiPageBody,{component:"div"},Object(x.jsx)(p.EuiPageSection,{alignment:"center",grow:!0,color:"plain"},Object(x.jsx)(p.EuiCallOut,{title:_.i18n.translate("xpack.grokDebugger.licenseErrorMessageTitle",{defaultMessage:"License error"}),color:"danger",iconType:"warning",style:{padding:"16px"}},Object(x.jsx)(p.EuiText,{size:"s"},Object(x.jsx)("p",null,Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.licenseErrorMessageDescription",defaultMessage:"The Grok Debugger requires an active license ({licenseTypeList} or {platinumLicenseType}), but none were found in your cluster.",values:{licenseTypeList:Object(x.jsx)(s.a.Fragment,null,Object(x.jsx)(p.EuiCode,null,t),", ",Object(x.jsx)(p.EuiCode,null,r),","," ",Object(x.jsx)(p.EuiCode,null,n)),platinumLicenseType:Object(x.jsx)(p.EuiCode,null,a)}})),Object(x.jsx)("p",null,Object(x.jsx)(T.FormattedMessage,{id:"xpack.grokDebugger.registerLicenseDescription",defaultMessage:"Please {registerLicenseLink} to continue using the Grok Debugger",values:{registerLicenseLink:Object(x.jsx)(p.EuiLink,{href:"https://www.elastic.co/subscriptions",rel:"noopener"},e)}})))))))};function J(e,t,r,n){const s=e.isActive?Object(x.jsx)(D,r,Object(x.jsx)(i.KibanaContextProvider,{services:{...r}},Object(x.jsx)(W,{grokdebuggerService:new grokdebugger_service_GrokdebuggerService(r.http)}))):Object(x.jsx)(D,{theme$:n},Object(x.jsx)(K,{license:e}));return Object(a.render)(s,t),()=>Object(a.unmountComponentAtNode)(t)}}])]);