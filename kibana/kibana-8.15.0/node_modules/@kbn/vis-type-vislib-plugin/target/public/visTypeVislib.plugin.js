!function(e){function t(t){for(var n,i,s=t[0],o=t[1],a=0,l=[];a<s.length;a++)i=s[a],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);for(c&&c(t);l.length;)l.shift()()}var n={},r={0:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=s);var o,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"visTypeVislib.chunk."+e+".js"}(e);var c=new Error;o=function(t){a.onerror=a.onload=null,clearTimeout(l);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",c.name="ChunkLoadError",c.type=i,c.request=s,n[1](c)}r[e]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:a})}),12e4);a.onerror=a.onload=o,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var s=window.visTypeVislib_bundle_jsonpfunction=window.visTypeVislib_bundle_jsonpfunction||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var a=0;a<s.length;a++)t(s[a]);var c=o;i(i.s=24)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return o})),n.d(t,"i",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"j",(function(){return p})),n.d(t,"e",(function(){return d})),n.d(t,"k",(function(){return f})),n.d(t,"f",(function(){return b})),n.d(t,"l",(function(){return m}));var r=n(3);const[i,s]=Object(r.createGetterSetter)("vislib data.actions"),[o,a]=Object(r.createGetterSetter)("FieldFormats"),[c,l]=Object(r.createGetterSetter)("vislib theme service"),[u,p]=Object(r.createGetterSetter)("vislib theme service"),[d,f]=Object(r.createGetterSetter)("vislib theme service"),[b,m]=Object(r.createGetterSetter)("UsageCollection",!1)},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visualizations/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){e.exports=n(23)(4)},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeGauge/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/expressions/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.KbnSharedUxErrorBoundary},function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(9),i=n.n(r),s=n(2),o=n(20),a=n(22),c=n(21),l=n.n(c),u=n(11),p=n.n(u),d=n(4);const f="eui-global",b="eui-utilities",m={darkMode:!1};var _=n(0);const v=[d.euiStylisPrefixer],g=p()({key:"css",stylisPlugins:v,container:document.querySelector('meta[name="emotion"]')}),y=p()({key:f,stylisPlugins:v,container:document.querySelector(`meta[name="${f}"]`)}),h=p()({key:b,stylisPlugins:v,container:document.querySelector(`meta[name="${b}"]`)});g.compat=!0,y.compat=!0,h.compat=!0;const O={default:g,global:y,utility:h},j=({theme:{theme$:e},globalStyles:t,colorMode:n,modify:r,children:i})=>{const o=l()(e,m),a=Object(s.useMemo)((()=>(e=>e.darkMode?d.COLOR_MODES_STANDARD.dark:d.COLOR_MODES_STANDARD.light)(o)),[o]),c=n||a,u=!1!==t&&void 0;return Object(_.jsx)(d.EuiProvider,{cache:O,modify:r,colorMode:c,globalStyles:u,utilityClasses:u},i)},x=({children:e,i18n:t,...n})=>Object(o.useIsNestedEuiProvider)()?(Object(a.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(_.jsx)(t.Context,null,e)):Object(_.jsx)(j,n,Object(_.jsx)(t.Context,null,e));var S=n(15);const w=({children:e,...t})=>Object(_.jsx)(x,i()({globalStyles:!1},t),Object(_.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(_.jsx)(S.KibanaErrorBoundary,null,e)))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeHeatmap/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeGauge/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/visTypeHeatmap/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ElasticEuiLibComponentsUseIsNestedEuiProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),i=n(2),s=r.__importDefault(n(27));t.default=function(e,t){var n=i.useState(t),r=n[0],o=n[1];return s.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var r=void 0;t.setEuiDevProviderWarning=function(e){return r=e},t.getEuiDevProviderWarning=function(){return r},t.emitEuiProviderWarning=function(e){if("function"==typeof r)return r(e);switch(r){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,n){n(25),__kbnBundles__.define("plugin/visTypeVislib/public",n,28)},function(e,t,n){n.p=window.__kbnPublicPath__.visTypeVislib},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;t.default=i},function(e,t,n){"use strict";n.r(t),n.d(t,"plugin",(function(){return R}));var r=n(17),i=n(18),s=n(1),o=n(19),a=n(6),c=n.n(a),l=n(8),u=n(13),p=n(14),d=n(7),f=n(5);function b(e,t,n,r,i,o,a){const c=-1===t.accessor?"_all":r[t.accessor],l=r[o.accessor],u=a&&r[a.accessor],p={x:c,y:l,z:u,extraMetrics:[],seriesRaw:n&&{table:e,column:n[0].column,row:i,value:r[n[0].accessor]},xRaw:{table:e,column:t.column,row:i,value:c},yRaw:{table:e,column:o.column,row:i,value:l},zRaw:a&&{table:e,column:a.column,row:i,value:u},tableRaw:e.$parent&&{table:e.$parent.table,column:e.$parent.column,row:e.$parent.row,value:e.$parent.formattedKey,title:e.$parent.name},parent:n?n[0]:null};if("NaN"!==p.y)return n?p.series=n.map((e=>Object(s.c)().deserialize(e.format).convert(r[e.accessor]))).join(" - "):o&&(p.series=o.title),p}function m(e,t,n,r,i,s,o){var a,c;n=null==n?"":n+"",e.has(n)?e.get(n).values.push(t):e.set(n,{id:(a=n,null!==(c=(null!=a?a:"").split("-").pop())&&void 0!==c?c:""),rawId:n,label:null==r?n:r,count:0,values:[t],format:i,zLabel:o,zFormat:s})}function _(e,t){const n={};return Object.keys(t).forEach((r=>{const i=t[r];(Array.isArray(i)?i:[i]).forEach((t=>{if(!t)return;const i=e.columns[t.accessor];i&&(n[r]||(n[r]=[]),n[r].push({accessor:i.id,column:t.accessor,title:i.name,format:t.format,params:t.params}))}))})),n.x||(n.x=[{accessor:-1,title:d.i18n.translate("visTypeVislib.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"},format:{}}]),n}function v(e,t){const n=e.tables;if(!n||!n.length)return;const r=n[0];if(r.columns){const n=t(r);return e.$parent&&(n.label=e.title),n}const i={};let s;return n.forEach((function(n){if(!s){const t="row"===e.direction?"rows":"columns";s=i[t]=[]}let r;(r=v(n,t))&&s.push(r)})),i}const g=(y=(e,t)=>{const n={aspects:_(e,t)};return function(e,t){const{format:n,title:r,params:i,accessor:s}=e.aspects.x[0];if(e.xAxisOrderedValues=-1===s&&"defaultValue"in i?[i.defaultValue]:Object(f.uniq)(t.rows.map((e=>e[s]))),e.xAxisFormat=n,e.xAxisLabel=r,"interval"in i)if("date"in i){const{intervalESUnit:t,intervalESValue:n}=i;e.ordered={interval:c.a.duration(n,t),intervalESUnit:t,intervalESValue:n}}else e.ordered={interval:i.interval}}(n,e),function(e){const t=e.aspects.y;Array.isArray(t)&&(e.yAxisFormat=t[0].format,e.yAxisLabel=t.length>1?"":t[0].title);const n=e.aspects.series;n&&(e.zAxisFormat=n[0].format,e.zAxisLabel="")}(n),"date"in n.aspects.x[0].params&&function(e){const t=e.aspects.x[0],n="bounds"in t.params?t.params.bounds:void 0;e.ordered.date=!0,n?(e.ordered.min="string"==typeof n.min?Date.parse(n.min):n.min,e.ordered.max="string"==typeof n.max?Date.parse(n.max):n.max):e.ordered.endzones=!1}(n),n.series=function(e,t){const n=t.aspects,r=n.x[0],i=n.y[0],s=n.z&&n.z[0],o=Array.isArray(n.y)&&n.y.length>1,a=Object(f.partial)(b,e,r,n.series),c=new Map;return e.rows.forEach(((e,t)=>{if(o)n.y.forEach((function(r){const i=a(e,t,r,s);if(!i)return;let o=r.accessor,l=r.title;if(n.series){const e=i.series?i.series+": ":"";o=e+o,l=e+l}i.seriesId=o,m(c,i,o,l,r.format,s&&s.format,s&&s.title)}));else{const n=a(e,t,i,s);if(n){const e=`${n.series}-${i.accessor}`;n.seriesId=e,m(c,n,e,n.series,i.format,s&&s.format,s&&s.title)}}})),[...c.values()]}(e,n),delete n.aspects,n},function(e,t){const n=function(e,t){const n={tables:[]},r=t.splitColumn||t.splitRow;if(r){n.direction=t.splitRow?"row":"column";const i=r[0].accessor,o=Object(s.c)().deserialize(r[0].format),a=e.columns[i],c={};let l=0;e.rows.forEach(((t,r)=>{const s=t[a.id],u=o.convert(s);if(!c.hasOwnProperty(s)){c[s]=l++;const t={$parent:n,title:`${u}: ${a.name}`,name:a.name,key:s,formattedKey:u,column:i,row:r,table:e,tables:[]};t.tables.push({$parent:t,columns:e.columns,rows:[]}),n.tables.push(t)}const p=c[s];n.tables[p].tables[0].rows.push(t)}))}else n.tables.push({columns:e.columns,rows:e.rows});return n}(e,t);let r=v(n,(e=>y(e,t)));return r||(r={rows:[]}),r.hits=e.rows.length,r});var y;const h="vislib_vis",O=async(e,t)=>{var n,r;const i=Object(l.getVisSchemas)(e,t),s={x:i.segment?i.segment[0]:null,y:i.metric,z:i.radius,width:i.width,series:i.group,splitRow:i.split_row,splitColumn:i.split_column},o=null!==(n=null===(r=e.data.aggs)||void 0===r?void 0:r.getResponseAggs())&&void 0!==n?n:[];if(s.x){const n=o[s.x.accessor];if(n.type.name===p.BUCKET_TYPES.DATE_HISTOGRAM){s.x.params.date=!0;const{esUnit:e,esValue:t}=n.buckets.getInterval();s.x.params.intervalESUnit=e,s.x.params.intervalESValue=t,s.x.params.interval=c.a.duration(t,e).asMilliseconds(),s.x.params.format=n.buckets.getScaledDateFormat(),s.x.params.bounds=n.buckets.getBounds()}else if(n.type.name===p.BUCKET_TYPES.HISTOGRAM){const r=n.type.paramByName("interval"),i={params:{}};await r.modifyAggConfigOnSearchRequestStart(n,e.data.searchSource,{abortSignal:t.abortSignal}),r.write(n,i),s.x.params.interval=i.params.interval}}const a={...e.params};(s.y||[]).forEach((e=>{var t;const n=o.filter((({enabled:e})=>e))[e.accessor],r=(a.seriesParams||[]).find((e=>e.data.id===n.id));if(r){const t=(a.valueAxes||[]).find((e=>e.id===r.valueAxis));"percentage"===(null==t?void 0:t.scale.mode)&&(e.format={id:"percent"})}var i;!0===(null==a||null===(t=a.gauge)||void 0===t?void 0:t.percentageMode)&&(e.format={id:"percent",params:{pattern:null==a||null===(i=a.gauge)||void 0===i?void 0:i.percentageFormatPattern}})}));const d=Object(u.buildExpressionFunction)(h,{type:e.type.name,visConfig:JSON.stringify({...a,dimensions:s})});return Object(u.buildExpression)([d]).toAst()},j={...Object(o.heatmapVisType)({}),toExpressionAst:O};var x=n(9),S=n.n(x),w=n(2),P=n(12),E=n(16),D=n(0);const k=Object(w.lazy)((()=>n.e(2).then(n.bind(null,63))));var A=n(10);const T={...Object(A.gaugeVisType)({}),toExpressionAst:O},C={...Object(A.goalVisType)({}),toExpressionAst:O};class plugin_VisTypeVislibPlugin{constructor(e){this.initializerContext=e}setup(e,{expressions:t,visualizations:n,charts:s}){t.registerRenderer(((e,t)=>({name:h,displayName:"Vislib visualization",reuseDomNode:!0,render:async(n,r,i)=>{const[s]=await e.getStartServices(),o=function(e,t){if(["goal","gauge"].includes(t))return!1;const n=null==e?void 0:e.rows,r=0===(null==e?void 0:e.hits)||n&&!n.length;return Boolean(r)}(r.visData,r.visType);i.onDestroy((()=>Object(P.unmountComponentAtNode)(n))),Object(P.render)(Object(D.jsx)(E.a,s,Object(D.jsx)(l.VisualizationContainer,{handlers:i,showNoResult:o},Object(D.jsx)(k,S()({},r,{core:e,charts:t,handlers:i})))),n)}}))(e,s)),t.registerFunction({name:h,type:"render",inputTypes:["datatable"],help:d.i18n.translate("visTypeVislib.functions.vislib.help",{defaultMessage:"Vislib visualization"}),args:{type:{types:["string"],default:'""',help:"vislib vis type"},visConfig:{types:["string"],default:'"{}"',help:"vislib vis config"}},fn(e,t,n){var r;const i=t.type,s=JSON.parse(t.visConfig),o=g(e,s.dimensions);return null!=n&&null!==(r=n.inspectorAdapters)&&void 0!==r&&r.tables&&n.inspectorAdapters.tables.logDatatable("default",e),{type:"render",as:h,value:{visData:o,visConfig:s,visType:i}}}});const{readOnly:o}=this.initializerContext.config.get();e.uiSettings.get(r.LEGACY_HEATMAP_CHARTS_LIBRARY)&&n.createBaseVisualization({...j,disableCreate:Boolean(o),disableEdit:Boolean(o)}),e.uiSettings.get(i.LEGACY_GAUGE_CHARTS_LIBRARY)&&(n.createBaseVisualization({...T,disableCreate:Boolean(o),disableEdit:Boolean(o)}),n.createBaseVisualization({...C,disableCreate:Boolean(o),disableEdit:Boolean(o)}))}start(e,{data:t,usageCollection:n,fieldFormats:r}){Object(s.i)(r),Object(s.h)(t.actions),Object(s.g)(e.analytics),Object(s.j)(e.i18n),Object(s.k)(e.theme),n&&Object(s.l)(n)}}function R(e){return new plugin_VisTypeVislibPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.Jquery},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/charts/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.SaferLodashSet},function(e,t,n){n.r(t);var r=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(r))},function(e,t){e.exports=__kbnSharedDeps__.ReactDomServer},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.KbnStd},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath}]);