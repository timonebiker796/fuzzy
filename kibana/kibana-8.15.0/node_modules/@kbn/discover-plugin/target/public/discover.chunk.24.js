(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[24],{423:function(e,t,o){"use strict";o.r(t),o.d(t,"FLYOUT_WIDTH_KEY",(function(){return m})),o.d(t,"DiscoverGridFlyout",(function(){return p}));var i=o(1),n=o(10),s=o(71),l=o(14),c=o(4),u=o(175);const a=({actions:e,...t})=>{var o,i,n;const{dataView:s}=t,{singleDocHref:l,contextViewHref:a,onOpenSingleDoc:r,onOpenContextView:d}=Object(u.a)(t),{viewSingleDocument:b={disabled:!1},viewSurroundingDocument:j={disabled:!1}}=null!==(o=null==e?void 0:e.defaultActions)&&void 0!==o?o:{},f=[...null!==(i=null==e||null===(n=e.getActionItems)||void 0===n?void 0:n.call(e))&&void 0!==i?i:[]];return{flyoutActions:[{id:"singleDocument",enabled:!b.disabled,dataTestSubj:"docTableRowAction",iconType:"document",href:l,onClick:r,label:c.i18n.translate("discover.grid.tableRow.viewSingleDocumentLinkLabel",{defaultMessage:"View single document"})},{id:"surroundingDocument",enabled:Boolean(!j.disabled&&s.isTimeBased()&&s.id),dataTestSubj:"docTableRowAction",iconType:"documents",href:a,onClick:d,label:c.i18n.translate("discover.grid.tableRow.viewSurroundingDocumentsLinkLabel",{defaultMessage:"View surrounding documents"}),helpText:c.i18n.translate("discover.grid.tableRow.viewSurroundingDocumentsHover",{defaultMessage:"Inspect documents that occurred before and after this document. Only pinned filters remain active in the Surrounding documents view."})},...f].filter((e=>e.enabled))}};var r=o(15),d=o(5),b=o(3),j=o(22);const f=3;function g({flyoutActions:e}){const{euiTheme:t}=Object(j.useEuiTheme)(),[o,n]=Object(i.useState)(null),s=Object(j.useResizeObserver)(o),l=Object(j.useIsWithinBreakpoints)(["xs","s"]),c=!(null==s||!s.width)&&s.width>30*t.base;return Object(b.jsx)("div",{ref:n},Object(b.jsx)(y,{flyoutActions:e,isMobileScreen:l,isLargeFlyout:c}))}function y({flyoutActions:e,isMobileScreen:t,isLargeFlyout:o}){const{euiTheme:n}=Object(j.useEuiTheme)(),[s,l]=Object(i.useState)(!1);if(t)return Object(b.jsx)(w,{flyoutActions:e,button:Object(b.jsx)(j.EuiButtonEmpty,{size:"s",iconSize:"s",iconType:"arrowDown",iconSide:"right",flush:"left","data-test-subj":"docViewerMobileActionsButton",onClick:()=>l(!s)},c.i18n.translate("discover.grid.tableRow.mobileFlyoutActionsButton",{defaultMessage:"Actions"})),isOpen:s,closePopover:()=>l(!1)});const u=Object(d.slice)(e,0,f),a=Object(d.slice)(e,f,e.length),r=a.length>0||!o&&u.length>1;return Object(b.jsx)(j.EuiFlexGroup,{responsive:!1,wrap:!0,alignItems:"center",gutterSize:"none","data-test-subj":"docViewerFlyoutActions",css:r?void 0:Object(b.css)("gap:",n.base/4*3,"px;","")},Object(b.jsx)(j.EuiFlexItem,{grow:!1},Object(b.jsx)(j.EuiText,{size:"s"},c.i18n.translate("discover.grid.tableRow.actionsLabel",{defaultMessage:"Actions"}),":")),u.map((e=>Object(b.jsx)(j.EuiFlexItem,{key:e.id,grow:!1},r?Object(b.jsx)(j.EuiToolTip,{content:e.helpText?`${e.label} - ${e.helpText}`:e.label},Object(b.jsx)(j.EuiButtonIcon,{size:"s",iconType:e.iconType,"data-test-subj":e.dataTestSubj,"aria-label":e.label,href:e.href,onClick:e.onClick})):Object(b.jsx)(j.EuiToolTip,{content:e.helpText,delay:"long"},Object(b.jsx)(j.EuiButtonEmpty,{size:"s",iconSize:"s",flush:"both",iconType:e.iconType,"data-test-subj":e.dataTestSubj,href:e.href,onClick:e.onClick},e.label))))),a.length>0&&Object(b.jsx)(j.EuiFlexItem,{grow:!1},Object(b.jsx)(w,{flyoutActions:a,button:Object(b.jsx)(j.EuiToolTip,{content:c.i18n.translate("discover.grid.tableRow.moreFlyoutActionsButton",{defaultMessage:"More actions"})},Object(b.jsx)(j.EuiButtonIcon,{size:"s",iconType:"boxesVertical","data-test-subj":"docViewerMoreFlyoutActionsButton","aria-label":c.i18n.translate("discover.grid.tableRow.moreFlyoutActionsButton",{defaultMessage:"More actions"}),onClick:()=>l(!s)})),isOpen:s,closePopover:()=>l(!1)})))}function w({flyoutActions:e,button:t,isOpen:o,closePopover:i}){return Object(b.jsx)(j.EuiPopover,{id:"docViewerMoreFlyoutActions",button:t,isOpen:o,closePopover:i,panelPaddingSize:"none",anchorPosition:"downLeft"},Object(b.jsx)(j.EuiContextMenuPanel,{size:"s",items:e.map((e=>Object(b.jsx)(j.EuiContextMenuItem,{key:e.id,icon:e.iconType,"data-test-subj":e.dataTestSubj,href:e.href,onClick:e.onClick},e.label)))}))}var v=o(8);const m="discover:flyoutWidth";function p({hit:e,hits:t,dataView:o,columns:c,columnsMeta:u,savedSearchId:d,filters:j,query:f,onFilter:y,onClose:w,onRemoveColumn:p,onAddColumn:O,setExpandedDoc:h}){const x=Object(l.a)(),T=Object(r.c)("flyout"),A=Object(n.isOfAggregateQueryType)(f),S=Object(i.useMemo)((()=>(null==t?void 0:t.find((({id:t})=>t===(null==e?void 0:e.id))))||e),[e,t]),{flyoutActions:E}=a({actions:null==T?void 0:T.actions,dataView:o,rowIndex:S.raw._index,rowId:S.raw._id,columns:c,filters:j,savedSearchId:d}),C=Object(v.e)("getDocViewer",{record:S}),M=Object(i.useMemo)((()=>C((()=>({title:null==T?void 0:T.title,docViewsRegistry:e=>"function"==typeof(null==T?void 0:T.docViewsRegistry)?T.docViewsRegistry(e):e})))({record:S})),[T,C,S]);return Object(b.jsx)(s.UnifiedDocViewerFlyout,{flyoutTitle:M.title,flyoutDefaultWidth:null==T?void 0:T.size,flyoutActions:!A&&E.length>0?Object(b.jsx)(g,{flyoutActions:E}):null,flyoutWidthLocalStorageKey:m,FlyoutCustomBody:null==T?void 0:T.Content,services:x,docViewsRegistry:M.docViewsRegistry,isEsqlQuery:A,hit:e,hits:t,dataView:o,columns:c,columnsMeta:u,onAddColumn:O,onRemoveColumn:p,onClose:w,onFilter:y,setExpandedDoc:h})}t.default=p}}]);