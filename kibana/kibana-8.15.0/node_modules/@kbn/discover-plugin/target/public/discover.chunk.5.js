(window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[]).push([[5],{119:function(e,i,t){"use strict";function n(e,i){return i?a(e):e.aggregatable&&l(e,i)||(!e.aggregatable||"geo_point"===e.type||"geo_shape"===e.type)&&o(e,i)}function l(e,i){return!i&&!("document"===e.type||e.type.includes("range")||"geo_point"===e.type||"geo_shape"===e.type||"murmur3"===e.type||"attachment"===e.type)}function d(e,i){return!i&&"counter"===e.timeSeriesMetric}function o(e,i){return i?"string"===e.type&&!s(e)||["geo_point","geo_shape"].includes(e.type):"_score"!==e.name&&["string","text","keyword","version","ip","number","geo_point","geo_shape"].includes(e.type)}function s(e){var i;if("_id"===e.name)return!1;const t=null===(i=e.esTypes)||void 0===i?void 0:i[0];return Boolean("string"===e.type&&t&&["keyword","version"].includes(t))||["keyword","version","ip","number","boolean"].includes(e.type)}function a(e){return s(e)||o(e,!0)}t.d(i,"d",(function(){return n})),t.d(i,"a",(function(){return l})),t.d(i,"c",(function(){return d})),t.d(i,"b",(function(){return o})),t.d(i,"f",(function(){return s})),t.d(i,"e",(function(){return a}))},205:function(e,i,t){"use strict";t.d(i,"a",(function(){return n}));const n={META_FIELDS:"metaFields",DOC_HIGHLIGHT:"doc_table:highlight",QUERY_STRING_OPTIONS:"query:queryString:options",QUERY_ALLOW_LEADING_WILDCARDS:"query:allowLeadingWildcards",SEARCH_QUERY_LANGUAGE:"search:queryLanguage",SORT_OPTIONS:"sort:options",COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX:"courier:ignoreFilterIfFieldNotInIndex",COURIER_SET_REQUEST_PREFERENCE:"courier:setRequestPreference",COURIER_CUSTOM_REQUEST_PREFERENCE:"courier:customRequestPreference",COURIER_MAX_CONCURRENT_SHARD_REQUESTS:"courier:maxConcurrentShardRequests",SEARCH_INCLUDE_FROZEN:"search:includeFrozen",SEARCH_TIMEOUT:"search:timeout",HISTOGRAM_BAR_TARGET:"histogram:barTarget",HISTOGRAM_MAX_BARS:"histogram:maxBars",HISTORY_LIMIT:"history:limit",TIMEPICKER_REFRESH_INTERVAL_DEFAULTS:"timepicker:refreshIntervalDefaults",TIMEPICKER_QUICK_RANGES:"timepicker:quickRanges",TIMEPICKER_TIME_DEFAULTS:"timepicker:timeDefaults",FILTERS_PINNED_BY_DEFAULT:"filters:pinnedByDefault",FILTERS_EDITOR_SUGGEST_VALUES:"filterEditor:suggestValues",AUTOCOMPLETE_USE_TIMERANGE:"autocomplete:useTimeRange",AUTOCOMPLETE_VALUE_SUGGESTION_METHOD:"autocomplete:valueSuggestionMethod",DATE_FORMAT:"dateFormat",DATEFORMAT_TZ:"dateFormat:tz"}},363:function(e,i,t){switch(window.__kbnThemeTag__){case"v8dark":return t(364);case"v8light":return t(366)}},364:function(e,i,t){var n=t(96),l=t(365);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},365:function(e,i,t){(i=t(97)(!1)).push([e.i,".unifiedFieldListSidebar{flex-grow:1;height:100%;margin:0!important;overflow:hidden;padding:0}.unifiedFieldListSidebar--collapsed{padding:8px 8px 0;width:auto}.unifiedFieldListSidebar.unifiedFieldListSidebar--fullWidth{min-width:0!important}.unifiedFieldListSidebar:not(.unifiedFieldListSidebar--fullWidth){width:304px}@media only screen and (max-width:574px){.unifiedFieldListSidebar{background-color:#141519;padding:16px;width:100%}}@media only screen and (min-width:575px)and (max-width:767px){.unifiedFieldListSidebar{background-color:#141519;padding:16px;width:100%}}.unifiedFieldListSidebar__list{padding:8px 4px 0}.unifiedFieldListSidebar__list .euiAccordion__children,.unifiedFieldListSidebar__list .euiAccordion__triggerWrapper,.unifiedFieldListSidebar__list .unifiedFieldListItemButton,.unifiedFieldListSidebar__list>*{padding-left:4px;padding-right:4px}.unifiedFieldListSidebar__list .unifiedFieldListSidebar__accordionContainer{padding-left:0;padding-right:0}@media only screen and (max-width:574px){.unifiedFieldListSidebar__list{padding:8px 0 0}.unifiedFieldListSidebar__list .euiAccordion__triggerWrapper,.unifiedFieldListSidebar__list .unifiedFieldListItemButton,.unifiedFieldListSidebar__list .unifiedFieldListSidebar__accordionContainer,.unifiedFieldListSidebar__list>*{padding-left:0;padding-right:0}}@media only screen and (min-width:575px)and (max-width:767px){.unifiedFieldListSidebar__list{padding:8px 0 0}.unifiedFieldListSidebar__list .euiAccordion__triggerWrapper,.unifiedFieldListSidebar__list .unifiedFieldListItemButton,.unifiedFieldListSidebar__list .unifiedFieldListSidebar__accordionContainer,.unifiedFieldListSidebar__list>*{padding-left:0;padding-right:0}}.unifiedFieldListSidebar__group{height:100%}.unifiedFieldListSidebar__mobile{padding:8px 8px 0;width:100%}.unifiedFieldListSidebar__mobile .unifiedFieldListSidebar__mobileBadge{margin-left:8px;vertical-align:text-bottom}.unifiedFieldListSidebar__flyoutHeader{align-items:center}.unifiedFieldListSidebar .unifiedFieldListItemButton.kbnFieldButton{background:none;box-shadow:none;margin-bottom:2px}.unifiedFieldListItemButton__dragging{background:#1d1e24}",""]),e.exports=i},366:function(e,i,t){var n=t(96),l=t(367);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},367:function(e,i,t){(i=t(97)(!1)).push([e.i,".unifiedFieldListSidebar{flex-grow:1;height:100%;margin:0!important;overflow:hidden;padding:0}.unifiedFieldListSidebar--collapsed{padding:8px 8px 0;width:auto}.unifiedFieldListSidebar.unifiedFieldListSidebar--fullWidth{min-width:0!important}.unifiedFieldListSidebar:not(.unifiedFieldListSidebar--fullWidth){width:304px}@media only screen and (max-width:574px){.unifiedFieldListSidebar{background-color:#fafbfd;padding:16px;width:100%}}@media only screen and (min-width:575px)and (max-width:767px){.unifiedFieldListSidebar{background-color:#fafbfd;padding:16px;width:100%}}.unifiedFieldListSidebar__list{padding:8px 4px 0}.unifiedFieldListSidebar__list .euiAccordion__children,.unifiedFieldListSidebar__list .euiAccordion__triggerWrapper,.unifiedFieldListSidebar__list .unifiedFieldListItemButton,.unifiedFieldListSidebar__list>*{padding-left:4px;padding-right:4px}.unifiedFieldListSidebar__list .unifiedFieldListSidebar__accordionContainer{padding-left:0;padding-right:0}@media only screen and (max-width:574px){.unifiedFieldListSidebar__list{padding:8px 0 0}.unifiedFieldListSidebar__list .euiAccordion__triggerWrapper,.unifiedFieldListSidebar__list .unifiedFieldListItemButton,.unifiedFieldListSidebar__list .unifiedFieldListSidebar__accordionContainer,.unifiedFieldListSidebar__list>*{padding-left:0;padding-right:0}}@media only screen and (min-width:575px)and (max-width:767px){.unifiedFieldListSidebar__list{padding:8px 0 0}.unifiedFieldListSidebar__list .euiAccordion__triggerWrapper,.unifiedFieldListSidebar__list .unifiedFieldListItemButton,.unifiedFieldListSidebar__list .unifiedFieldListSidebar__accordionContainer,.unifiedFieldListSidebar__list>*{padding-left:0;padding-right:0}}.unifiedFieldListSidebar__group{height:100%}.unifiedFieldListSidebar__mobile{padding:8px 8px 0;width:100%}.unifiedFieldListSidebar__mobile .unifiedFieldListSidebar__mobileBadge{margin-left:8px;vertical-align:text-bottom}.unifiedFieldListSidebar__flyoutHeader{align-items:center}.unifiedFieldListSidebar .unifiedFieldListItemButton.kbnFieldButton{background:none;box-shadow:none;margin-bottom:2px}.unifiedFieldListItemButton__dragging{background:#fff}",""]),e.exports=i},368:function(e,i,t){switch(window.__kbnThemeTag__){case"v8dark":return t(369);case"v8light":return t(371)}},369:function(e,i,t){var n=t(96),l=t(370);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},370:function(e,i,t){(i=t(97)(!1)).push([e.i,".unifiedFieldListItemButton__action{opacity:0}.unifiedFieldListItemButton__action--always,.unifiedFieldListItemButton__action:focus{opacity:1}.unifiedFieldListItemButton{background:#1d1e24;border-radius:6px;box-shadow:0 .8px .8px #0000001a,0 2.3px 2px rgba(0,0,0,.075);width:100%}.unifiedFieldListItemButton.kbnFieldButton-isActive,.unifiedFieldListItemButton.kbnFieldButton:focus-within{outline:none}.unifiedFieldListItemButton.kbnFieldButton-isActive:focus-visible,.unifiedFieldListItemButton.kbnFieldButton:focus-within:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus{outline:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus .kbnFieldButton__nameInner{outline:2px solid currentColor}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible .kbnFieldButton__nameInner{outline-style:auto}.unifiedFieldListItemButton .kbnFieldButton__button:focus:not(:focus-visible) .kbnFieldButton__nameInner{outline:none}.unifiedFieldListItemButton button .kbnFieldButton__nameInner:hover{text-decoration:underline}.unifiedFieldListItemButton:hover .unifiedFieldListItemButton__action,.unifiedFieldListItemButton[class*=-isActive] .unifiedFieldListItemButton__action{opacity:1}.unifiedFieldList__fieldPopover__fieldPopoverPanel .unifiedFieldListItemButton{background:none;box-shadow:none}.unifiedFieldListItemButton--missing{background:#1d1e24;color:#98a2b3}.unifiedFieldListItemButton__fieldIconContainer{position:relative}.unifiedFieldListItemButton__fieldIcon{transition:opacity .25s ease-in-out}.unifiedFieldListItemButton__fieldIconDrag{left:0;position:absolute;top:0;transition:opacity .25s ease-in-out;visibility:hidden}.unifiedFieldListItemButton--withDragIcon .unifiedFieldListItemButton__fieldIconDrag{opacity:0;visibility:visible}.domDraggable__keyboardHandler:focus+.unifiedFieldListItemButton--withDragIcon .unifiedFieldListItemButton__fieldIcon,.unifiedFieldListItemButton--withDragIcon:hover .unifiedFieldListItemButton__fieldIcon,.unifiedFieldListItemButton--withDragIcon[class*=-isActive] .unifiedFieldListItemButton__fieldIcon{opacity:0}.domDraggable__keyboardHandler:focus+.unifiedFieldListItemButton--withDragIcon .unifiedFieldListItemButton__fieldIconDrag,.unifiedFieldListItemButton--withDragIcon:hover .unifiedFieldListItemButton__fieldIconDrag,.unifiedFieldListItemButton--withDragIcon[class*=-isActive] .unifiedFieldListItemButton__fieldIconDrag{opacity:1}",""]),e.exports=i},371:function(e,i,t){var n=t(96),l=t(372);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},372:function(e,i,t){(i=t(97)(!1)).push([e.i,".unifiedFieldListItemButton__action{opacity:0}.unifiedFieldListItemButton__action--always,.unifiedFieldListItemButton__action:focus{opacity:1}.unifiedFieldListItemButton{background:#fff;border-radius:6px;box-shadow:0 .8px .8px #0000000a,0 2.3px 2px #00000008;width:100%}.unifiedFieldListItemButton.kbnFieldButton-isActive,.unifiedFieldListItemButton.kbnFieldButton:focus-within{outline:none}.unifiedFieldListItemButton.kbnFieldButton-isActive:focus-visible,.unifiedFieldListItemButton.kbnFieldButton:focus-within:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus{outline:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible{outline-style:none}.unifiedFieldListItemButton .kbnFieldButton__button:focus .kbnFieldButton__nameInner{outline:2px solid currentColor}.unifiedFieldListItemButton .kbnFieldButton__button:focus:focus-visible .kbnFieldButton__nameInner{outline-style:auto}.unifiedFieldListItemButton .kbnFieldButton__button:focus:not(:focus-visible) .kbnFieldButton__nameInner{outline:none}.unifiedFieldListItemButton button .kbnFieldButton__nameInner:hover{text-decoration:underline}.unifiedFieldListItemButton:hover .unifiedFieldListItemButton__action,.unifiedFieldListItemButton[class*=-isActive] .unifiedFieldListItemButton__action{opacity:1}.unifiedFieldList__fieldPopover__fieldPopoverPanel .unifiedFieldListItemButton{background:none;box-shadow:none}.unifiedFieldListItemButton--missing{background:#98a2b31a;color:#69707d}.unifiedFieldListItemButton__fieldIconContainer{position:relative}.unifiedFieldListItemButton__fieldIcon{transition:opacity .25s ease-in-out}.unifiedFieldListItemButton__fieldIconDrag{left:0;position:absolute;top:0;transition:opacity .25s ease-in-out;visibility:hidden}.unifiedFieldListItemButton--withDragIcon .unifiedFieldListItemButton__fieldIconDrag{opacity:0;visibility:visible}.domDraggable__keyboardHandler:focus+.unifiedFieldListItemButton--withDragIcon .unifiedFieldListItemButton__fieldIcon,.unifiedFieldListItemButton--withDragIcon:hover .unifiedFieldListItemButton__fieldIcon,.unifiedFieldListItemButton--withDragIcon[class*=-isActive] .unifiedFieldListItemButton__fieldIcon{opacity:0}.domDraggable__keyboardHandler:focus+.unifiedFieldListItemButton--withDragIcon .unifiedFieldListItemButton__fieldIconDrag,.unifiedFieldListItemButton--withDragIcon:hover .unifiedFieldListItemButton__fieldIconDrag,.unifiedFieldListItemButton--withDragIcon[class*=-isActive] .unifiedFieldListItemButton__fieldIconDrag{opacity:1}",""]),e.exports=i},373:function(e,i,t){switch(window.__kbnThemeTag__){case"v8dark":return t(374);case"v8light":return t(376)}},374:function(e,i,t){var n=t(96),l=t(375);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},375:function(e,i,t){(i=t(97)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.7142857143rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=i},376:function(e,i,t){var n=t(96),l=t(377);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},377:function(e,i,t){(i=t(97)(!1)).push([e.i,".kbnFieldButton{align-items:flex-start;border-radius:6px;display:flex;font-size:14px;font-size:1rem;line-height:1.7142857143rem;margin-bottom:4px;padding:0 8px;transition:box-shadow .15s cubic-bezier(.694,.0482,.335,1),background-color .15s cubic-bezier(.694,.0482,.335,1)}.kbnFieldButton-isActive,.kbnFieldButton:focus-within{outline:2px solid currentColor}.kbnFieldButton-isActive:focus-visible,.kbnFieldButton:focus-within:focus-visible{outline-style:auto}.kbnFieldButton-isActive:not(:focus-visible),.kbnFieldButton:focus-within:not(:focus-visible){outline:none}.kbnFieldButton__button{align-items:flex-start;display:flex;flex-grow:1;line-height:normal;padding:8px 0;text-align:left}.kbnFieldButton__fieldIcon{flex-shrink:0;line-height:0}.kbnFieldButton__name{flex-grow:1;padding:0 8px}.kbnFieldButton__infoIcon{align-items:center;display:flex;flex-shrink:0;justify-content:center;line-height:0;min-height:16px}.kbnFieldButton__fieldAction{margin-left:8px}.kbnFieldButton__dragHandle{margin-right:8px}.kbnFieldButton__dragHandle,.kbnFieldButton__fieldAction{line-height:32px}.kbnFieldButton--xs{font-size:12px}.kbnFieldButton--xs .kbnFieldButton__button{padding:4px 0}.kbnFieldButton--xs .kbnFieldButton__fieldAction{margin-left:4px}.kbnFieldButton--xs .kbnFieldButton__dragHandle,.kbnFieldButton--xs .kbnFieldButton__fieldAction{line-height:24px}.kbnFieldButton--flushBoth{padding-left:0;padding-right:0}",""]),e.exports=i},378:function(e,i,t){switch(window.__kbnThemeTag__){case"v8dark":return t(379);case"v8light":return t(381)}},379:function(e,i,t){var n=t(96),l=t(380);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},380:function(e,i,t){(i=t(97)(!1)).push([e.i,".unifiedFieldList__fieldPopover__fieldPopoverPanel{max-width:400px!important;min-width:260px!important}",""]),e.exports=i},381:function(e,i,t){var n=t(96),l=t(382);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},382:function(e,i,t){(i=t(97)(!1)).push([e.i,".unifiedFieldList__fieldPopover__fieldPopoverPanel{max-width:400px!important;min-width:260px!important}",""]),e.exports=i},383:function(e,i,t){switch(window.__kbnThemeTag__){case"v8dark":return t(384);case"v8light":return t(386)}},384:function(e,i,t){var n=t(96),l=t(385);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},385:function(e,i,t){(i=t(97)(!1)).push([e.i,".domDraggable{border-radius:6px;cursor:grab;transition:.15s ease-in-out;transition-property:background-color,border-color,opacity;z-index:1}.domDraggable:hover{transform:translateX(4px);transition:transform .35s ease-out}.domDraggable .euiLink,.domDraggable .kbnFieldButton__button{cursor:grab}.domDraggable:focus{outline:2px solid currentColor}.domDraggable:focus:focus-visible{outline-style:auto}.domDraggable:focus:not(:focus-visible){outline:none}.domDraggable--reorderable{position:relative;transform:translateY(0);transition:transform .15s ease-in-out;z-index:1}.domDraggable__keyboardHandler{border-radius:6px;height:100%;position:absolute;top:0;width:100%}.domDraggable__keyboardHandler:focus,.domDraggable__keyboardHandler:focus-within{outline:2px solid currentColor;pointer-events:none;z-index:2}.domDraggable__keyboardHandler:focus-within:focus-visible,.domDraggable__keyboardHandler:focus:focus-visible{outline-style:auto}.domDraggable__keyboardHandler:focus-within:not(:focus-visible),.domDraggable__keyboardHandler:focus:not(:focus-visible){outline:none}.domDraggable_active--move,.domDraggable_dragover_keyboard--move{opacity:0}",""]),e.exports=i},386:function(e,i,t){var n=t(96),l=t(387);"string"==typeof(l=l.__esModule?l.default:l)&&(l=[[e.i,l,""]]);n(l,{insert:"head",singleton:!1}),e.exports=l.locals||{}},387:function(e,i,t){(i=t(97)(!1)).push([e.i,".domDraggable{border-radius:6px;cursor:grab;transition:.15s ease-in-out;transition-property:background-color,border-color,opacity;z-index:1}.domDraggable:hover{transform:translateX(4px);transition:transform .35s ease-out}.domDraggable .euiLink,.domDraggable .kbnFieldButton__button{cursor:grab}.domDraggable:focus{outline:2px solid currentColor}.domDraggable:focus:focus-visible{outline-style:auto}.domDraggable:focus:not(:focus-visible){outline:none}.domDraggable--reorderable{position:relative;transform:translateY(0);transition:transform .15s ease-in-out;z-index:1}.domDraggable__keyboardHandler{border-radius:6px;height:100%;position:absolute;top:0;width:100%}.domDraggable__keyboardHandler:focus,.domDraggable__keyboardHandler:focus-within{outline:2px solid currentColor;pointer-events:none;z-index:2}.domDraggable__keyboardHandler:focus-within:focus-visible,.domDraggable__keyboardHandler:focus:focus-visible{outline-style:auto}.domDraggable__keyboardHandler:focus-within:not(:focus-visible),.domDraggable__keyboardHandler:focus:not(:focus-visible){outline:none}.domDraggable_active--move,.domDraggable_dragover_keyboard--move{opacity:0}",""]),e.exports=i},459:function(e,i,t){"use strict";t.d(i,"a",(function(){return l}));var n=t(205);function l(e){return{allowLeadingWildcards:e.get(n.a.QUERY_ALLOW_LEADING_WILDCARDS),queryStringOptions:e.get(n.a.QUERY_STRING_OPTIONS),ignoreFilterIfFieldNotInIndex:e.get(n.a.COURIER_IGNORE_FILTER_IF_FIELD_NOT_IN_INDEX),dateFormatTZ:e.get("dateFormat:tz")}}},460:function(e,i,t){"use strict";t.d(i,"a",(function(){return ErrorBoundary}));var n=t(1),l=t.n(n);class ErrorBoundary extends l.a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?null:this.props.children}}},464:function(e,i,t){"use strict";t.r(i);var n=t(13),l=t.n(n),d=t(1),o=t.n(d),s=t(4),a=t(57),r=t(24),u=t.n(r),c=t(22),f=t(0),b=t(459),p=t(120),g=t(130);const m=Object(c.htmlIdGenerator)(),F=[],_={fetchStatus:g.a.unknown,existingFieldsByFieldNameMap:{},numberOfFetches:0},h=new f.BehaviorSubject({});let j="";async function x(e,i,n,l){const d=await(async()=>(await Promise.resolve().then(t.t.bind(null,10,7))).buildEsQuery)();try{return d(e,i,n,l)}catch(e){return{bool:{must_not:{match_all:{}}}}}}var v=t(121);t(363);var y=t(3),O=t(58),I=t.n(O);const L=e=>({bold:e.font.weight.bold,normal:e.font.weight.regular}),S=(e,{type:i,isDisabled:t,groupPosition:n})=>{const l=(({euiTheme:e})=>({default:{borderStyle:"solid",border:e.border.thin,borderColor:e.border.color},emptyButton:{backgroundColor:e.colors.emptyShade,border:`${e.border.thin}`,color:`${e.colors.text}`},buttonPositions:{left:{borderTopRightRadius:0,borderBottomRightRadius:0},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:"none"},center:{borderRadius:0,borderLeft:"none"}}}))(e),d=n&&"none"!==n?l.buttonPositions[n]:{},o={...l.default,...d};return t?o:{...o,..."primary"===i?{}:l.emptyButton}},B=({hasArrow:e=!0,fontWeight:i="normal",type:t,label:n,iconSide:d,iconType:o,fullWidth:s,isDisabled:a,groupPosition:r,...u})=>{const f=Object(c.useEuiTheme)(),b={...S(f,{type:t,isDisabled:a,groupPosition:r}),fontWeight:L(f.euiTheme)[i]},p=a?{}:"primary"===t?{color:"primary",fill:!0}:{color:"text"},g=null!=o?o:e?"arrowDown":"";return Object(y.jsx)(c.EuiButton,l()({size:u.size,isDisabled:a,css:b,iconType:g,iconSide:o?d:"right",fullWidth:s,contentProps:s?{style:{justifyContent:"space-between"}}:{}},p,u),n)},k=({size:e,type:i,label:t,isDisabled:n,groupPosition:d,...o})=>{const s=Object(c.useEuiTheme)(),a=S(s,{type:i,isDisabled:n,groupPosition:d});return Object(y.jsx)(c.EuiButtonIcon,l()({},o,{disabled:n,"aria-label":null!=t?t:o["aria-label"],size:e,iconSize:e,css:a,display:"primary"===i?"fill":"base",color:"primary"===i?"primary":"text"}))};function w(e){const{type:i="empty",size:t="m"}=e;return(e=>"iconButton"===e.as)(e)?Object(y.jsx)(k,l()({},e,{size:t,type:i})):Object(y.jsx)(B,l()({},e,{size:t,type:i}))}var D=t(77);t(90);var E=t(40);const T={name:"zxsb69",styles:"position:relative;width:100%;height:100%"},A=({"data-test-subj":e="fieldList",isProcessing:i,prepend:t,append:n,className:l,children:d})=>Object(y.jsx)(c.EuiFlexGroup,{gutterSize:"none",direction:"column",responsive:!1,"data-test-subj":e,css:T,className:l},i&&Object(y.jsx)(c.EuiProgress,{size:"xs",color:"accent",position:"absolute","data-test-subj":`${e}Loading`}),!!t&&Object(y.jsx)(c.EuiFlexItem,{grow:!1},t),Object(y.jsx)(c.EuiFlexItem,{className:"unifiedFieldListSidebar__accordionContainer",grow:!0},d),!!n&&Object(y.jsx)(c.EuiFlexItem,{grow:!1},n)),M=()=>Object(y.jsx)(d.Fragment,null),C=o.a.lazy((()=>t.e(17).then(t.bind(null,471)))),N=function(e){return Object(y.jsx)(o.a.Suspense,{fallback:Object(y.jsx)(M,null)},Object(y.jsx)(C,e))},P=()=>Object(y.jsx)(d.Fragment,null),R=o.a.lazy((()=>t.e(9).then(t.bind(null,473)))),z=function(e){return Object(y.jsx)(o.a.Suspense,{fallback:Object(y.jsx)(P,null)},Object(y.jsx)(R,e))};var H=t(5);const G=Object(H.memoize)((function(e){const i=e.trim();let t=i.split(/[* ]+/).map(H.escapeRegExp).join(".*");return i.includes(" ")&&(t=".*"+t+".*"),new RegExp(t.includes("*")?`^${t}$`:t,"i")})),V=(e,i)=>{if(null==i||!i.trim())return!1;const t=G(i);return!!e.displayName&&t.test(e.displayName)||t.test(e.name)};function W(e,i){const t=(i||"").trim();return(t.includes("*")||t.includes(" "))&&V({name:e},t)?e:t}var U=t(208);const $=Object(c.htmlIdGenerator)("fieldList");const K=new Intl.Collator(void 0,{sensitivity:"base"});function q(e,i){return K.compare(e.displayName||e.name,i.displayName||i.name)}function Y(){return!0}var Q=t(477),X=t(454),Z=t(154);t(383);const J=Z.c/2,ee=({reorderableGroup:e,...i})=>{const[{dragging:t,dropTargetsByOrder:n,hoveredDropTarget:d,keyboardMode:o,dataTestSubjPrefix:s},a]=Object(Q.c)();if(i.isDisabled)return i.children;const r=i.value.id===(null==t?void 0:t.id),u={...i,draggedItemProps:r?{keyboardMode:o,hoveredDropTarget:d,dropTargetsByOrder:n}:void 0,dataTestSubjPrefix:s,dndDispatch:a};return e&&e.length>1?Object(y.jsx)(ne,l()({},u,{reorderableGroup:e})):Object(y.jsx)(te,u)},ie=()=>{const e=window.getSelection();e&&e.removeAllRanges()},te=Object(d.memo)((function({dataTestSubj:e,className:i,dragClassName:t,value:n,children:l,dndDispatch:o,order:s,draggedItemProps:a,dataTestSubjPrefix:r,dragType:u,onDragStart:f,onDragEnd:b,extraKeyboardHandler:p,ariaDescribedBy:g}){const{keyboardMode:m,hoveredDropTarget:F,dropTargetsByOrder:_}=a||{},h=Object(d.useCallback)((e=>{o(e?{type:"selectDropTarget",payload:{dropTarget:e,dragging:n}}:{type:"leaveDropTarget"})}),[o,n]),j=Object(d.useCallback)(((e,i)=>{const t=_&&Object.values(_).filter((i=>(null==i?void 0:i.id)===e));h(null==t?void 0:t[i])}),[_,h]),x=Object(d.useMemo)((()=>({onKeyDown:e=>{if(e.preventDefault(),"Alt"===e.key&&null!=F&&F.id)j(F.id,1);else if("Shift"===e.key&&null!=F&&F.id)j(F.id,2);else if("Control"===e.key&&null!=F&&F.id){const e=Number(F.humanData.canSwap)+Number(F.humanData.canDuplicate);j(F.id,e+1)}},onKeyUp:e=>{if(e.preventDefault(),null!=F&&F.id&&["Shift","Alt","Control"].includes(e.key))if(e.altKey)j(F.id,1);else if(e.shiftKey)j(F.id,2);else if(e.ctrlKey){const e=Number(F.humanData.canSwap)+Number(F.humanData.canDuplicate);j(F.id,e+1)}else j(F.id,0)}})),[F,j]),v=Object(d.useCallback)(((e,i)=>{if(e&&"dataTransfer"in e&&e.dataTransfer.getData("text"))return;e&&"dataTransfer"in e&&e.dataTransfer.setData("text",n.humanData.label);const d=null==e?void 0:e.currentTarget;null==f||f(null==e?void 0:e.currentTarget);const s=e.currentTarget;t&&!s.classList.contains(t)&&(s.classList.add(t),requestAnimationFrame((()=>{s.classList.remove(t)}))),setTimeout((()=>{o({type:"startDragging",payload:{...i?{keyboardMode:!0}:{},dragging:{...n,ghost:i?{children:l,className:I()(t),style:{width:d.offsetWidth,minHeight:null==d?void 0:d.offsetHeight,zIndex:1e3}}:void 0}}})}))}),[o,n,f]),O=Object(d.useCallback)((e=>{null==e||e.stopPropagation(),o({type:"endDragging",payload:{dragging:n}}),null==b||b()}),[o,n,b]),L="move"===u&&m&&F&&"reorder"!==F.dropType;return Object(y.jsx)("div",{className:I()(i,"domDraggable",{"domDraggable_active--move":a&&"move"===u&&!m,"domDraggable_dragover_keyboard--move":L,"domDraggable_active--copy":a&&"copy"===u&&!m,"domDraggable_dragover_keyboard--copy":m&&a&&F}),"data-test-subj":e||`${r}_domDraggable_${n.humanData.label}`,draggable:!0,onDragEnd:O,onDragStart:v,onMouseDown:ie},Object(y.jsx)(c.EuiScreenReaderOnly,{showOnFocus:!0},Object(y.jsx)("button",{"aria-label":n.humanData.label,"aria-describedby":g||`${r}-keyboardInstructions`,className:"domDraggable__keyboardHandler","data-test-subj":`${r}-keyboardHandler`,onBlur:e=>{a&&O()},onKeyDown:e=>{const{key:i}=e;i===c.keys.ENTER||i===c.keys.SPACE?(F&&(()=>{if(F){const{dropType:e,onDrop:i}=F;setTimeout((()=>{o({type:"dropToTarget",payload:{dragging:n,dropTarget:F}})})),i(n,e)}})(),a?O():v(e,!0)):i===c.keys.ESCAPE&&a&&(e.stopPropagation(),e.preventDefault(),O()),p&&p(e),m&&(c.keys.ARROW_LEFT!==i&&c.keys.ARROW_RIGHT!==i||((e,i=!1)=>{const t=Object(Q.b)(_,F,[s.join(",")],(e=>"reorder"!==(null==e?void 0:e.dropType)),i);"string"==typeof t||void 0===t?h(void 0):e.altKey?j(t.id,1):e.shiftKey?j(t.id,2):e.ctrlKey?j(t.id,3):h(t)})(e,!(c.keys.ARROW_LEFT!==i)),x.onKeyDown(e))},onKeyUp:x.onKeyUp})),l)})),ne=Object(d.memo)((function(e){const[{isReorderOn:i,reorderedItems:t,direction:n},o]=Object(d.useContext)(X.a),{value:s,draggedItemProps:a,reorderableGroup:r,dndDispatch:u,dataTestSubjPrefix:f}=e,{keyboardMode:b,hoveredDropTarget:p,dropTargetsByOrder:g}=a||{},m=!!a,F=b?m&&(!p||r.some((e=>e.id===(null==p?void 0:p.id)))):m;Object(d.useEffect)((()=>()=>o({type:"dragEnd"})),[o]),Object(d.useEffect)((()=>{o({type:"setIsReorderOn",payload:F})}),[o,F]);const _=e=>{if(!e)return o({type:"reset"}),void u({type:"leaveDropTarget"});const i=r.findIndex((i=>i.id===e.id)),t=r.findIndex((e=>e.id===(null==s?void 0:s.id)));-1!==t&&(u({type:"selectDropTarget",payload:{dropTarget:e,dragging:s}}),o({type:"setReorderedItems",payload:{draggingIndex:t,droppingIndex:i,items:r}}))},h=b&&m&&t.length;return Object(y.jsx)("div",{"data-test-subj":`${f}-reorderableDrag`,className:I()({"domDraggable--reorderable":m,"domDraggable_active_keyboard--reorderable":b&&m}),style:h?{transform:`translateY(${"+"===n?"-":"+"}${t.reduce(((e,i)=>{var t;return e+(null!==(t=i.height)&&void 0!==t?t:0)+J}),0)}px)`}:void 0},Object(y.jsx)(te,l()({},e,{ariaDescribedBy:`${f}-keyboardInstructionsWithReorder`,extraKeyboardHandler:t=>{if(i&&b){t.stopPropagation(),t.preventDefault();let i=r.findIndex((e=>e.id===s.id));if(p){const e=r.findIndex((e=>e.id===(null==p?void 0:p.id)));-1!==e&&(i=e)}if(t.key===c.keys.ARROW_LEFT||t.key===c.keys.ARROW_RIGHT)o({type:"reset"});else if(c.keys.ARROW_DOWN===t.key){if(i<r.length-1){const i=Object(Q.b)(g,p,[e.order.join(",")],(e=>"reorder"===(null==e?void 0:e.dropType)));_(i)}}else if(c.keys.ARROW_UP===t.key&&i>0){const i=Object(Q.b)(g,p,[e.order.join(",")],(e=>"reorder"===(null==e?void 0:e.dropType)),!0);_(i)}}},onDragStart:e=>{e&&setTimeout((()=>{o({type:"registerDraggingItemHeight",payload:e.clientHeight+J})}))},onDragEnd:()=>{o({type:"dragEnd"})}})))}));t(373);const le={xs:"kbnFieldButton--xs",s:"kbnFieldButton--s"};function de({size:e,isActive:i=!1,fieldIcon:t,fieldName:n,fieldInfoIcon:d,fieldAction:s,flush:a,className:r,dragHandle:u,onClick:c,dataTestSubj:f,buttonProps:b,...p}){const g=I()("kbnFieldButton",e?le[e]:null,{"kbnFieldButton-isActive":i,"kbnFieldButton--flushBoth":"both"===a},r),m=I()("kbn-resetFocusState","kbnFieldButton__button"),F=Object(y.jsx)(o.a.Fragment,null,t&&Object(y.jsx)("span",{className:"kbnFieldButton__fieldIcon"},t),n&&Object(y.jsx)("span",{className:"kbnFieldButton__name eui-textBreakAll"},Object(y.jsx)("span",{className:"kbnFieldButton__nameInner"},n)),d&&Object(y.jsx)("div",{className:"kbnFieldButton__infoIcon"},d));return Object(y.jsx)("div",l()({className:g},p),u&&Object(y.jsx)("div",{className:"kbnFieldButton__dragHandle"},u),c?Object(y.jsx)("button",l()({onClick:e=>{"click"===e.type&&e.currentTarget.focus(),c()},"data-test-subj":f,className:m},b),F):Object(y.jsx)("div",{className:m,"data-test-subj":f},F),s&&Object(y.jsx)("div",{className:"kbnFieldButton__fieldAction"},s))}Object.keys(le);var oe=t(172),se=t(448);t(368);const ae=Object(y.jsx)(c.EuiIcon,{type:"grabOmnidirectional",size:"m"});function re({field:e,fieldSearchHighlight:i,isSelected:t,isActive:n,isEmpty:d,infoIcon:o,className:a,getCustomFieldType:r,dataTestSubj:u,size:f,withDragIcon:b,onClick:p,shouldAlwaysShowAction:g,buttonAddFieldToWorkspaceProps:m,buttonRemoveFieldFromWorkspaceProps:F,onAddFieldToWorkspace:_,onRemoveFieldFromWorkspace:h,...j}){var x,v;const O=e.displayName||e.name,L=O!==e.name&&"___records___"!==e.name?s.i18n.translate("unifiedFieldList.fieldItemButton.fieldTitle",{defaultMessage:"{fieldDisplayName} ({fieldName})",values:{fieldName:e.name,fieldDisplayName:O}}):O,S=r?{type:r(e)}:Object(oe.a)(e),B=S.type,k=I()("unifiedFieldListItemButton",{[`unifiedFieldListItemButton--${B}`]:B,"unifiedFieldListItemButton--exists":!d,"unifiedFieldListItemButton--missing":d,"unifiedFieldListItemButton--withDragIcon":Boolean(b)},a),w=null!==(x=null==m?void 0:m["aria-label"])&&void 0!==x?x:s.i18n.translate("unifiedFieldList.fieldItemButton.addFieldToWorkspaceLabel",{defaultMessage:'Add "{field}" field',values:{field:e.displayName}}),D=null!==(v=null==F?void 0:F["aria-label"])&&void 0!==v?v:s.i18n.translate("unifiedFieldList.fieldItemButton.removeFieldToWorkspaceLabel",{defaultMessage:'Remove "{field}" field',values:{field:e.displayName}}),E=I()("unifiedFieldListItemButton__action",{"unifiedFieldListItemButton__action--always":g}),T=t?h&&Object(y.jsx)(c.EuiToolTip,{key:`selected-to-remove-${e.name}-${D}`,content:D},Object(y.jsx)(c.EuiButtonIcon,l()({"data-test-subj":`fieldToggle-${e.name}`,"aria-label":D},F||{},{className:I()(E,null==F?void 0:F.className),color:"danger",iconType:"cross",onClick:i=>{i.preventDefault(),i.stopPropagation(),h(e)}}))):_&&Object(y.jsx)(c.EuiToolTip,{key:`deselected-to-add-${e.name}-${w}`,content:w},Object(y.jsx)(c.EuiButtonIcon,l()({"data-test-subj":`fieldToggle-${e.name}`,"aria-label":w},m||{},{className:I()(E,null==m?void 0:m.className),color:"text",iconType:"plusInCircle",onClick:i=>{i.preventDefault(),i.stopPropagation(),_(e)}}))),A="conflict"===e.type?Object(y.jsx)(ue,{conflictDescriptions:e.conflictDescriptions}):null;return Object(y.jsx)(de,l()({key:`field-item-button-${e.name}`,dataTestSubj:u||`field-${e.name}-showDetails`,size:f||"s",className:k,isActive:n,buttonProps:{"aria-label":s.i18n.translate("unifiedFieldList.fieldItemButton.ariaLabel",{defaultMessage:"Preview {fieldDisplayName}: {fieldType}",values:{fieldDisplayName:O,fieldType:r?r(e):e.type}})},fieldIcon:Object(y.jsx)("div",{className:"unifiedFieldListItemButton__fieldIconContainer"},Object(y.jsx)("div",{className:"unifiedFieldListItemButton__fieldIcon"},Object(y.jsx)(se.a,S)),b&&Object(y.jsx)("div",{className:"unifiedFieldListItemButton__fieldIconDrag"},ae)),fieldName:Object(y.jsx)(c.EuiHighlight,{search:W(O,i),title:L,"data-test-subj":`field-${e.name}`},O),fieldAction:T,fieldInfoIcon:A||o,onClick:p},j))}function ue({conflictDescriptions:e}){const i=e?Object.keys(e):[];return Object(y.jsx)(c.EuiToolTip,{position:"bottom",title:s.i18n.translate("unifiedFieldList.fieldItemButton.mappingConflictTitle",{defaultMessage:"Mapping Conflict"}),content:i.length?s.i18n.translate("unifiedFieldList.fieldItemButton.mappingConflictWithTypesDescription",{defaultMessage:"This field is defined as several types ({types}) across the indices that match this pattern. You may still be able to use this conflicting field, but it will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data.",values:{types:i.join(", ")}}):s.i18n.translate("unifiedFieldList.fieldItemButton.mappingConflictDescription",{defaultMessage:"This field is defined as several types (string, integer, etc) across the indices that match this pattern.You may still be able to use this conflicting field, but it will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data."})},Object(y.jsx)(c.EuiIcon,{tabIndex:0,type:"warning",size:"s"}))}var ce=t(63);const fe=({field:e,visualizeInfo:i,handleVisualizeLinkClick:t,buttonProps:n})=>Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiButton,l()({fullWidth:!0,size:"s","data-test-subj":`fieldVisualize-${e.name}`},n||{},{href:i.href,onClick:t}),Object(y.jsx)(a.FormattedMessage,{id:"unifiedFieldList.fieldVisualizeButton.label",defaultMessage:"Visualize"}))),be=(s.i18n.translate("uiActions.triggers.rowClickTitle",{defaultMessage:"Table row click"}),s.i18n.translate("uiActions.triggers.rowClickkDescription",{defaultMessage:"A click on a table row"}),"VISUALIZE_FIELD_TRIGGER"),pe={id:be,title:"Visualize field",description:"Triggered when user wants to visualize a field."},ge="VISUALIZE_GEO_FIELD_TRIGGER",me={id:ge,title:"Visualize Geo field",description:"Triggered when user wants to visualize a geo field."};s.i18n.translate("uiActions.triggers.dashboard.addPanelMenu.title",{defaultMessage:"Add panel menu"}),s.i18n.translate("uiActions.triggers.dashboard.addPanelMenu.description",{defaultMessage:"A new action will appear to the dashboard's add panel menu"});var Fe=t(105);function _e(e){return e===Fe.b.GEO_POINT||e===Fe.b.GEO_SHAPE?ge:be}async function he(e,i,t,n=[],l){return await e.getTriggerCompatibleActions(l,{dataViewSpec:t.toSpec(!1),fieldName:i,contextualFields:n})}const je=o.a.memo((({field:e,dataView:i,contextualFields:t,trackUiMetric:n,multiFields:l,originatingApp:d,uiActions:o,buttonProps:s,visualizeInfo:a})=>a?Object(y.jsx)(fe,{field:e,visualizeInfo:a,handleVisualizeLinkClick:async e=>{var l;e.preventDefault(),l=i,null==n||n(ce.METRIC_TYPE.CLICK,"visualize_link_click"),function(e,i,t=[],n,l){if(!l)return;const d=_e(i.type),o={dataViewSpec:l.toSpec(!1),fieldName:i.name,contextualFields:t,originatingApp:n};e.getTrigger(d).exec(o)}(o,a.field,t,d,l)},buttonProps:s}):null));var xe=t(460);const ve=e=>{const[i,t]=Object(d.useState)(null);return Object(d.useEffect)((()=>{(async function(e){const i=await async function(e,i,t,n=[],l=[]){var d;if("_id"!==i.name&&null!=t&&t.id)for(const a of[i,...l]){if(!a.visualizable)continue;const i=await he(e,a.name,t,n,_e(a.type));if(i.length>0){var o,s;const e={dataViewSpec:null==t?void 0:t.toSpec(!1),fieldName:a.name,contextualFields:n,trigger:(d=a.type,d===Fe.b.GEO_POINT||d===Fe.b.GEO_SHAPE?me:pe)};return{field:a,href:await(null===(o=(s=i[0]).getHref)||void 0===o?void 0:o.call(s,e))}}}}(e.uiActions,e.field,e.dataView,e.contextualFields,e.multiFields);return i?Object(y.jsx)(je,l()({},e,{visualizeInfo:i})):null})(e).then(t).catch((e=>{console.error(e)}))}),[e]),i?Object(y.jsx)(c.EuiPopoverFooter,null,i):null},ye=e=>Object(y.jsx)(xe.a,null,Object(y.jsx)(ve,e));t(378);const Oe=({isOpen:e,closePopover:i,renderHeader:t,renderContent:n,...d})=>{let s=null,a=null;if(e){try{s=(null==t?void 0:t())||null}catch(e){console.error(e)}try{a=(null==n?void 0:n())||null}catch(e){console.error(e)}}return Object(y.jsx)(c.EuiPopover,l()({ownFocus:!0,isOpen:e,closePopover:i,display:"block",anchorPosition:"rightUp","data-test-subj":"fieldPopover",panelClassName:"unifiedFieldList__fieldPopover__fieldPopoverPanel"},d),e&&Object(y.jsx)(o.a.Fragment,null,a&&s?Object(y.jsx)(c.EuiPopoverTitle,null,s):s,a))},Ie=({field:e,color:i,truncate:t=!0})=>{const{euiTheme:n}=Object(c.useEuiTheme)(),l=((null==e?void 0:e.customDescription)||"").trim(),a=Boolean(t&&l.length>110),[r,u]=Object(d.useState)(a);return l?Object(y.jsx)("div",{"data-test-subj":`fieldDescription-${e.name}`},r?Object(y.jsx)(c.EuiText,{color:i,size:"xs",className:"eui-textBreakWord eui-textLeft"},Object(y.jsx)("button",{"data-test-subj":`toggleFieldDescription-${e.name}`,title:s.i18n.translate("fieldUtils.fieldDescription.viewMoreButton",{defaultMessage:"View full field description"}),className:"eui-textBreakWord eui-textLeft",onClick:()=>u(!1),css:Object(y.css)("padding:0;margin:0;color:","subdued"===i?n.colors.subduedText:n.colors.text,";line-height:inherit;font-size:inherit;&:hover,&:active,&:focus{color:",n.colors.link,";}","")},Object(y.jsx)(c.EuiTextBlockTruncate,{lines:2},l))):Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiText,{color:i,size:"xs",className:"eui-textBreakWord eui-textLeft"},l),a&&Object(y.jsx)(c.EuiButtonEmpty,{size:"xs",flush:"both","data-test-subj":`toggleFieldDescription-${e.name}`,onClick:()=>u(!0)},s.i18n.translate("fieldUtils.fieldDescription.viewLessButton",{defaultMessage:"View less"})))):null},Le=({field:e,closePopover:i,buttonAddFieldToWorkspaceProps:t,buttonAddFilterProps:n,buttonEditFieldProps:d,buttonDeleteFieldProps:a,onAddFieldToWorkspace:r,onAddFilter:u,onEditField:f,onDeleteField:b})=>{var p,g,m,F;if(!e)return null;const _=s.i18n.translate("unifiedFieldList.fieldPopover.addFieldToWorkspaceLabel",{defaultMessage:'Add "{field}" field',values:{field:e.displayName}}),h=s.i18n.translate("unifiedFieldList.fieldPopover.addExistsFilterLabel",{defaultMessage:"Filter for field present"}),j=s.i18n.translate("unifiedFieldList.fieldPopover.editFieldLabel",{defaultMessage:"Edit data view field"}),x=s.i18n.translate("unifiedFieldList.fieldPopover.deleteFieldLabel",{defaultMessage:"Delete data view field"});return Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},Object(y.jsx)(c.EuiFlexItem,{grow:!0},Object(y.jsx)(c.EuiTitle,{size:"xxs","data-test-subj":"fieldPopoverHeader_fieldDisplayName"},Object(y.jsx)("h5",{className:"eui-textBreakWord"},e.displayName))),r&&Object(y.jsx)(c.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_addField"},Object(y.jsx)(c.EuiToolTip,{content:null!==(p=null==t?void 0:t["aria-label"])&&void 0!==p?p:_},Object(y.jsx)(c.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_addField-${e.name}`,"aria-label":_},t||{},{iconType:"plusInCircle",onClick:()=>{i(),r(e)}})))),u&&e.filterable&&!e.scripted&&Object(y.jsx)(c.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_addExistsFilter"},Object(y.jsx)(c.EuiToolTip,{content:null!==(g=null==n?void 0:n["aria-label"])&&void 0!==g?g:h},Object(y.jsx)(c.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_addExistsFilter-${e.name}`,"aria-label":h},n||{},{iconType:"filter",onClick:()=>{i(),u("_exists_",e.name,"+")}})))),f&&(e.isRuntimeField||!["unknown","unknown_selected"].includes(e.type))&&Object(y.jsx)(c.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_editField"},Object(y.jsx)(c.EuiToolTip,{content:null!==(m=null==d?void 0:d["aria-label"])&&void 0!==m?m:j},Object(y.jsx)(c.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_editField-${e.name}`,"aria-label":j},d||{},{iconType:"pencil",onClick:()=>{i(),f(e.name)}})))),b&&e.isRuntimeField&&Object(y.jsx)(c.EuiFlexItem,{grow:!1,"data-test-subj":"fieldPopoverHeader_deleteField"},Object(y.jsx)(c.EuiToolTip,{content:null!==(F=null==a?void 0:a["aria-label"])&&void 0!==F?F:x},Object(y.jsx)(c.EuiButtonIcon,l()({"data-test-subj":`fieldPopoverHeader_deleteField-${e.name}`,"aria-label":x},a||{},{color:"danger",iconType:"trash",onClick:()=>{i(),b(e.name)}}))))),e.customDescription?Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiSpacer,{size:"xs"}),Object(y.jsx)(Ie,{field:e})):null)},Se=()=>Object(y.jsx)(d.Fragment,null),Be=o.a.lazy((()=>Promise.all([t.e(2),t.e(15)]).then(t.bind(null,468)))),ke=e=>Object(y.jsx)(o.a.Suspense,{fallback:Object(y.jsx)(Se,null)},Object(y.jsx)(Be,e)),we=o.a.memo((({stateService:e,services:i,field:t,dataView:n,multiFields:l,onAddFilter:o})=>{var s;const a=Object(v.b)({data:i.data,timeRangeUpdatesType:e.creationOptions.timeRangeUpdatesType}),r=Object(d.useMemo)((()=>{var e;return(null==l?void 0:l.length)&&(null===(e=l.find((e=>e.field.aggregatable)))||void 0===e?void 0:e.field)||t}),[t,l]),u=Object(d.useMemo)((()=>({data:i.data,dataViews:i.dataViews,fieldFormats:i.fieldFormats,charts:i.charts,uiSettings:i.core.uiSettings})),[i]);return Object(v.a)(a)?Object(y.jsx)(ke,{services:u,query:a.query,filters:a.filters,fromDate:a.fromDate,toDate:a.toDate,dataViewOrDataViewId:n,field:r,"data-test-subj":null===(s=e.creationOptions.dataTestSubj)||void 0===s?void 0:s.fieldListItemStatsDataTestSubj,onAddFilter:o}):null}));var De=t(119);function Ee({stateService:e,field:i,size:t,isSelected:n,toggleDisplay:l}){const d="_source"===i.name?void 0:e=>l(e,n);return{field:i,size:t,isSelected:n,buttonAddFieldToWorkspaceProps:e.creationOptions.buttonAddFieldToWorkspaceProps,buttonRemoveFieldFromWorkspaceProps:e.creationOptions.buttonRemoveFieldFromWorkspaceProps,onAddFieldToWorkspace:d,onRemoveFieldFromWorkspace:d}}const Te=Object(d.memo)((({stateService:e,multiFields:i,toggleDisplay:t,alwaysShowActionButton:n,size:d})=>Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiTitle,{size:"xxxs"},Object(y.jsx)("h5",null,s.i18n.translate("unifiedFieldList.fieldListItem.multiFields",{defaultMessage:"Multi fields"}))),Object(y.jsx)(c.EuiSpacer,{size:"xs"}),i.map((i=>Object(y.jsx)(re,l()({key:i.field.name,flush:"both",isEmpty:!1,isActive:!1,shouldAlwaysShowAction:n,onClick:void 0},Ee({stateService:e,field:i.field,isSelected:i.isSelected,toggleDisplay:t,size:d}))))))));function Ae({stateService:e,services:i,searchMode:t,alwaysShowActionButton:n=!1,field:s,highlight:a,dataView:r,onAddFieldToWorkspace:u,onRemoveFieldFromWorkspace:f,onAddFilter:b,isEmpty:p,isSelected:g,trackUiMetric:m,multiFields:F,onEditField:_,onDeleteField:h,workspaceSelectedFieldNames:j,groupIndex:x,itemIndex:v,size:O}){var I,L,S;const[B,k]=Object(d.useState)(!1),w=Object(d.useMemo)((()=>b?(...e)=>{k(!1),null==b||b(...e)}:void 0),[k,b]),D=Object(d.useCallback)((()=>{k((e=>!e))}),[k]),E=Object(d.useCallback)((()=>{k(!1)}),[k]),T=Object(d.useCallback)(((e,i)=>{E(),i?f(e):u(e)}),[u,f,E]),A=Object(d.useMemo)((()=>null==F?void 0:F.map((e=>e.field))),[F]),M=Object(d.useMemo)((()=>{var i;const t=null===(i=e.creationOptions.dataTestSubj)||void 0===i?void 0:i.fieldListItemPopoverHeaderDataTestSubjPrefix;return{buttonAddFieldToWorkspaceProps:e.creationOptions.buttonAddFieldToWorkspaceProps,...t&&{buttonAddFilterProps:{"data-test-subj":`${t}AddExistFilter-${s.name}`},buttonEditFieldProps:{"data-test-subj":`${t}Edit-${s.name}`},buttonDeleteFieldProps:{"data-test-subj":`${t}Delete-${s.name}`}}}}),[s.name,e.creationOptions]),C=Object(d.useMemo)((()=>({id:s.name,humanData:{label:s.displayName,position:v+1}})),[s,v]),N=Object(d.useMemo)((()=>[0,x,v]),[x,v]),P=n||e.creationOptions.disableFieldListItemDragAndDrop;return Object(y.jsx)(Oe,{isOpen:B,button:Object(y.jsx)(ee,{dragType:"copy",dragClassName:"unifiedFieldListItemButton__dragging",order:N,value:C,onDragStart:E,isDisabled:P,dataTestSubj:`${null!==(I=null===(L=e.creationOptions.dataTestSubj)||void 0===L?void 0:L.fieldListItemDndDataTestSubjPrefix)&&void 0!==I?I:"unifiedFieldListItemDnD"}-${s.name}`},Object(y.jsx)(re,l()({fieldSearchHighlight:a,isEmpty:p,isActive:B,withDragIcon:!P,flush:n?"both":void 0,shouldAlwaysShowAction:n,onClick:"_source"!==s.type?D:void 0},Ee({stateService:e,field:s,isSelected:g,toggleDisplay:T,size:O})))),closePopover:E,"data-test-subj":null===(S=e.creationOptions.dataTestSubj)||void 0===S?void 0:S.fieldListItemPopoverDataTestSubj,renderHeader:()=>Object(y.jsx)(Le,l()({field:s,closePopover:E,onAddFieldToWorkspace:g?void 0:T,onAddFilter:b,onEditField:_,onDeleteField:h},M)),renderContent:"text-based"===t&&Object(De.e)(s)||"documents"===t?()=>Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(we,{stateService:e,services:i,field:s,multiFields:F,dataView:r,onAddFilter:w}),"documents"===t&&F&&Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiSpacer,{size:"m"}),Object(y.jsx)(Te,{stateService:e,multiFields:F,alwaysShowActionButton:n,toggleDisplay:T,size:O})),"documents"===t&&!!i.uiActions&&Object(y.jsx)(ye,{field:s,dataView:r,multiFields:A,trackUiMetric:m,contextualFields:j,originatingApp:e.creationOptions.originatingApp,uiActions:i.uiActions})):void 0})}const Me=Object(d.memo)(Ae);var Ce=t(478);const Ne=({"data-test-subj":e="unifiedFieldListSidebar__toggle",isSidebarCollapsed:i,panelId:t,buttonSize:n,onChange:l})=>Object(y.jsx)("div",{"data-test-subj":e},Object(y.jsx)(Ce.a,{legend:s.i18n.translate("unifiedFieldList.fieldListSidebar.toggleSidebarLegend",{defaultMessage:"Toggle sidebar"}),buttonSize:n,buttons:[...i?[{label:s.i18n.translate("unifiedFieldList.fieldListSidebar.expandSidebarButton",{defaultMessage:"Show sidebar"}),iconType:"transitionLeftIn","data-test-subj":`${e}-expand`,"aria-expanded":!1,"aria-controls":t,onClick:()=>l(!1)}]:[{label:s.i18n.translate("unifiedFieldList.fieldListSidebar.collapseSidebarButton",{defaultMessage:"Hide sidebar"}),iconType:"transitionLeftOut","data-test-subj":`${e}-collapse`,"aria-expanded":!0,"aria-controls":t,onClick:()=>l(!0)}]]}));var Pe=t(62);const Re={selectedFields:[],selectedFieldsMap:{}},ze=({stateService:e,searchMode:i,services:t,workspaceSelectedFieldNames:n,isProcessing:o,alwaysShowActionButton:a,buttonAddFieldVariant:r,isSidebarCollapsed:u,allFields:f,dataView:b,trackUiMetric:p,showFieldList:m=!0,compressed:j=!0,fullWidth:x,isAffectedByGlobalFilter:v,prepend:O,onAddFieldToWorkspace:L,onRemoveFieldFromWorkspace:S,onAddFilter:B,onSelectedFieldFilter:k,onEditField:D,onDeleteField:T,onToggleSidebar:M,additionalFieldGroups:C})=>{var P,R,G,W,K,Q,X;const{dataViews:Z,core:J}=t,ee=Object(d.useMemo)((()=>!J.uiSettings.get(E.o)),[J.uiSettings]),[ie,te]=Object(d.useState)(Re),[ne,le]=Object(d.useState)(void 0);Object(d.useEffect)((()=>{const e=function({dataView:e,workspaceSelectedFieldNames:i,allFields:t,searchMode:n}){const l={selectedFields:[],selectedFieldsMap:{}};if(!(i&&Array.isArray(i)&&i.length&&t))return Re;for(const o of i){var d;const i="documents"===n&&(null==e||null===(d=e.getFieldByName)||void 0===d?void 0:d.call(e,o))||t.find((e=>e.name===o))||{name:o,displayName:o,type:"unknown_selected"};l.selectedFields.push(i),l.selectedFieldsMap[i.name]=!0}return l.selectedFields=Object(H.uniqBy)(l.selectedFields,"name"),1===l.selectedFields.length&&"_source"===l.selectedFields[0].name?Re:l}({dataView:b,workspaceSelectedFieldNames:k?[]:n,allFields:f,searchMode:i});te(e)}),[b,n,te,f,i,k]);const de=Object(d.useMemo)((()=>J.uiSettings.get(E.g)),[J.uiSettings]),oe=Object(d.useCallback)((t=>function(e,i,t){return!(null==e||!e.type||"_source"===e.type||"text-based"!==i&&!t&&Object(Pe.getFieldSubtypeMulti)(null==e?void 0:e.spec))}(t,i,e.creationOptions.disableMultiFieldsGroupingByParent)),[i,e.creationOptions.disableMultiFieldsGroupingByParent]),{fieldListFiltersProps:se,fieldListGroupedProps:ae,allFieldsModified:re}=function({dataViewId:e,allFields:i,services:t,isAffectedByGlobalFilter:n=!1,popularFieldsLimit:l,sortedSelectedFields:o,getCustomFieldType:a,onOverrideFieldGroupDetails:r,onSupportedFieldFilter:u,onSelectedFieldFilter:c,getNewFieldsBySpec:f,additionalFieldGroups:b}){const p=(()=>{const e=Object(d.useRef)(!0),[i,t]=Object(d.useState)(h.getValue());Object(d.useEffect)((()=>{const i=h.subscribe((i=>{e.current&&Object.keys(i).length>0&&t((e=>({...e,...i})))}));return()=>{i.unsubscribe()}}),[t,e]);const n=Object(d.useCallback)(((e,t)=>{const n=i[e];return(null==n?void 0:n.fetchStatus)!==g.a.succeeded||(null==n?void 0:n.hasDataViewRestrictions)||Boolean(null==n?void 0:n.existingFieldsByFieldNameMap[t])}),[i]),l=Object(d.useCallback)((e=>{const t=i[e];var n;return(null==t?void 0:t.fetchStatus)===g.a.succeeded&&null!==(n=null==t?void 0:t.newFields)&&void 0!==n?n:F}),[i]),o=Object(d.useCallback)((e=>e?i[e]:_),[i]),s=Object(d.useCallback)((e=>{var i;return(null===(i=o(e))||void 0===i?void 0:i.fetchStatus)||g.a.unknown}),[o]),a=Object(d.useCallback)((e=>{const i=o(e);return Boolean((null==i?void 0:i.fetchStatus)===g.a.failed||(null==i?void 0:i.hasDataViewRestrictions))}),[o]);return Object(d.useEffect)((()=>()=>{e.current=!1}),[e]),Object(d.useMemo)((()=>({hasFieldData:n,getFieldsExistenceStatus:s,isFieldsExistenceInfoUnavailable:a,getNewFields:l})),[n,s,a,l])})(),m=function({allFields:e,getCustomFieldType:i,onSupportedFieldFilter:t,services:n}){const[l,o]=Object(d.useState)([]),[s,a]=Object(d.useState)(""),r=Object(d.useMemo)((()=>$()),[]),u=n.core.docLinks;return Object(d.useMemo)((()=>{const n=s.trim().toLowerCase();return{fieldSearchHighlight:n,fieldListFiltersProps:{docLinks:u,selectedFieldTypes:l,allFields:e,getCustomFieldType:i,onSupportedFieldFilter:t,onChangeFieldTypes:o,nameFilter:s,onChangeNameFilter:a,screenReaderDescriptionId:r},onFilterField:null!=n&&n.length||l.length>0?e=>!(n&&!V(e,n))&&(!(l.length>0)||l.includes(Object(U.a)(e,i))):void 0}}),[u,l,e,i,t,o,s,a,r])}({allFields:i,services:t,getCustomFieldType:a,onSupportedFieldFilter:u}),j=m.onFilterField,[x,v]=Object(d.useState)(null),y=Boolean(null==x?void 0:x.timeFieldName),O=!e||p.isFieldsExistenceInfoUnavailable(e),I=e?p.hasFieldData:Y;Object(d.useEffect)((()=>{(async()=>{if(e){let i=null;try{i=await t.dataViews.get(e,!1)}catch(e){}v(i||null)}else v(null)})()}),[e,t.dataViews,v,I]);const{allFieldsModified:L,hasNewFields:S}=function({dataView:e,allFields:i,getNewFieldsBySpec:t,fieldsExistenceReader:n}){const l=null==e?void 0:e.id,o=Object(d.useMemo)((()=>{const l=i&&null!=e&&e.id&&t?t(n.getNewFields(null==e?void 0:e.id),e):null;return null!=l&&l.length?l:null}),[i,e,n,t]),s=Boolean(i&&o&&o.length>0);return{allFieldsModified:Object(d.useMemo)((()=>i&&null!=o&&o.length&&l?[...i.filter((e=>!o.some((i=>i.name===e.name)))),...o]:i),[o,i,l]),hasNewFields:s}}({dataView:x,allFields:i,getNewFieldsBySpec:f,fieldsExistenceReader:p});Object(d.useEffect)((()=>{x&&!e&&v(null)}),[x,v,e]);const B=Object(d.useMemo)((()=>Date.now()),[e,j]),k=Object(d.useMemo)((()=>{const i=o||[],t=[...L||[]].sort(q),d={specialFields:[],availableFields:[],emptyFields:[],metaFields:[],unmappedFields:[],skippedFields:[],...Object(H.groupBy)(t,(t=>{var n;return!o&&c&&c(t)&&i.push(t),u&&!u(t)?"skippedFields":"document"===t.type?"specialFields":null!=x&&null!==(n=x.metaFields)&&void 0!==n&&n.includes(t.name)?"metaFields":"nested"===t.type?"availableFields":null!=t&&t.isNull?"emptyFields":null!=x&&x.getFieldByName&&!x.getFieldByName(t.name)?"unmappedFields":(i=>!e||I(e,i.name))(t)||O?"availableFields":"emptyFields"}))},a=l?t.filter((e=>e.count&&"_source"!==e.type&&(!u||u(e)))).sort(((e,i)=>(i.count||0)-(e.count||0))).slice(0,l):[],f=(null==b?void 0:b.smartFields)||[];let p={SpecialFields:{fields:d.specialFields,fieldCount:d.specialFields.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!1,showInAccordion:!1,title:"",hideDetails:!0},SelectedFields:{fields:i,fieldCount:i.length,isInitiallyOpen:!0,showInAccordion:!0,title:s.i18n.translate("unifiedFieldList.useGroupedFields.selectedFieldsLabel",{defaultMessage:"Selected fields"}),isAffectedByGlobalFilter:n,isAffectedByTimeFilter:y,hideDetails:!1,hideIfEmpty:!0},PopularFields:{fields:a,fieldCount:a.length,isInitiallyOpen:!0,showInAccordion:!0,title:s.i18n.translate("unifiedFieldList.useGroupedFields.popularFieldsLabel",{defaultMessage:"Popular fields"}),helpText:s.i18n.translate("unifiedFieldList.useGroupedFields.popularFieldsLabelHelp",{defaultMessage:"Fields that your organization frequently uses, from most to least popular."}),isAffectedByGlobalFilter:n,isAffectedByTimeFilter:y,hideDetails:!1,hideIfEmpty:!0},AvailableFields:{fields:d.availableFields,fieldCount:d.availableFields.length,isInitiallyOpen:!0,showInAccordion:!0,title:e&&O?s.i18n.translate("unifiedFieldList.useGroupedFields.allFieldsLabel",{defaultMessage:"All fields"}):s.i18n.translate("unifiedFieldList.useGroupedFields.availableFieldsLabel",{defaultMessage:"Available fields"}),isAffectedByGlobalFilter:n,isAffectedByTimeFilter:y,hideDetails:O,defaultNoFieldsMessage:s.i18n.translate("unifiedFieldList.useGroupedFields.noAvailableDataLabel",{defaultMessage:"There are no available fields that contain data."})},UnmappedFields:{fields:d.unmappedFields,fieldCount:d.unmappedFields.length,isAffectedByGlobalFilter:n,isAffectedByTimeFilter:y,isInitiallyOpen:!1,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!0,title:s.i18n.translate("unifiedFieldList.useGroupedFields.unmappedFieldsLabel",{defaultMessage:"Unmapped fields"}),helpText:s.i18n.translate("unifiedFieldList.useGroupedFields.unmappedFieldsLabelHelp",{defaultMessage:"Fields that aren't explicitly mapped to a field data type."})},EmptyFields:{fields:d.emptyFields,fieldCount:d.emptyFields.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!1,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!0,title:s.i18n.translate("unifiedFieldList.useGroupedFields.emptyFieldsLabel",{defaultMessage:"Empty fields"}),helpText:s.i18n.translate("unifiedFieldList.useGroupedFields.emptyFieldsLabelHelp",{defaultMessage:"Fields that don't have any values based on your filters."}),defaultNoFieldsMessage:s.i18n.translate("unifiedFieldList.useGroupedFields.noEmptyDataLabel",{defaultMessage:"There are no empty fields."})},MetaFields:{fields:d.metaFields,fieldCount:d.metaFields.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!1,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!e,title:s.i18n.translate("unifiedFieldList.useGroupedFields.metaFieldsLabel",{defaultMessage:"Meta fields"}),defaultNoFieldsMessage:s.i18n.translate("unifiedFieldList.useGroupedFields.noMetaDataLabel",{defaultMessage:"There are no meta fields."})},SmartFields:{fields:f,fieldCount:f.length,isAffectedByGlobalFilter:!1,isAffectedByTimeFilter:!1,isInitiallyOpen:!0,showInAccordion:!0,hideDetails:!1,hideIfEmpty:!0,title:s.i18n.translate("unifiedFieldList.useGroupedFields.smartFieldsLabel",{defaultMessage:"Smart fields"})}};const g=e&&O,m=!e&&!d.emptyFields.length;return(g||m)&&delete p.EmptyFields,r&&(p=Object.keys(p).reduce(((e,i)=>{const t=i,n=p[t];return n&&(e[t]={...n,...r(t)||{}}),e}),{})),p}),[L,u,c,r,x,e,I,O,n,y,l,o,b]),w=Object(d.useMemo)((()=>j?Object.fromEntries(Object.entries(k).map((([e,i])=>[e,{...i,fieldSearchHighlight:m.fieldSearchHighlight,fields:i.fields.filter(j)}]))):k),[k,j,m.fieldSearchHighlight]),D=Boolean(i),E=null==i?void 0:i.length,T=Object(d.useMemo)((()=>!e||Boolean(E)),[e,E]),A=Object(d.useMemo)((()=>D?e&&p?p.getFieldsExistenceStatus(e):g.a.succeeded:g.a.unknown),[e,D,p]),M=m.fieldListFiltersProps.screenReaderDescriptionId;return{fieldListGroupedProps:Object(d.useMemo)((()=>({fieldGroups:w,scrollToTopResetCounter:B,fieldsExistInIndex:T,fieldsExistenceStatus:A,screenReaderDescriptionId:M})),[w,B,T,A,M]),fieldListFiltersProps:m.fieldListFiltersProps,allFieldsModified:L,hasNewFields:S}}({dataViewId:"documents"===i&&(null==b?void 0:b.id)||null,allFields:f,popularFieldsLimit:"documents"!==i||e.creationOptions.disablePopularFields?0:de,isAffectedByGlobalFilter:v,services:{dataViews:Z,core:J},sortedSelectedFields:k?void 0:ie.selectedFields,onSelectedFieldFilter:k,onSupportedFieldFilter:null!==(P=e.creationOptions.onSupportedFieldFilter)&&void 0!==P?P:oe,onOverrideFieldGroupDetails:e.creationOptions.onOverrideFieldGroupDetails,getNewFieldsBySpec:Ge,additionalFieldGroups:C});Object(d.useEffect)((()=>{"documents"!==i||!ee||e.creationOptions.disableMultiFieldsGroupingByParent?le(void 0):le(function(e,i){if(!e)return;const t=new Map;return e.forEach((e=>{var n;const l=function(e){return function(e){var i;const t=null==e?void 0:e.subType;return!(null==t||null===(i=t.multi)||void 0===i||!i.parent)}(e)?e.subType:void 0}(e),d=null==l?void 0:l.multi.parent;if(!d)return;const o={field:e,isSelected:Boolean(null==i?void 0:i[e.name])},s=null!==(n=t.get(d))&&void 0!==n?n:[];s.push(o),t.set(d,s)})),t}(re,ie.selectedFieldsMap))}),[e.creationOptions.disableMultiFieldsGroupingByParent,ie.selectedFieldsMap,re,ee,le,i]);const ue=Object(d.useCallback)((({field:l,groupName:d,groupIndex:o,itemIndex:s,fieldSearchHighlight:r})=>Object(y.jsx)("li",{key:`field${l.name}`,"data-attr-field":l.name},Object(y.jsx)(Me,{stateService:e,searchMode:i,services:t,alwaysShowActionButton:a,field:l,size:j?"xs":"s",highlight:r,dataView:b,onAddFieldToWorkspace:L,onRemoveFieldFromWorkspace:S,onAddFilter:B,trackUiMetric:p,multiFields:null==ne?void 0:ne.get(l.name),onEditField:D,onDeleteField:T,workspaceSelectedFieldNames:n,groupIndex:o,itemIndex:s,isEmpty:d===g.b.EmptyFields,isSelected:d===g.b.SelectedFields||Boolean(ie.selectedFieldsMap[l.name])}))),[e,i,t,a,j,b,L,S,B,p,ne,D,T,n,ie.selectedFieldsMap]),{euiTheme:ce}=Object(c.useEuiTheme)();if(!b)return null;const fe={className:I()("unifiedFieldListSidebar",{"unifiedFieldListSidebar--collapsed":u,"unifiedFieldListSidebar--fullWidth":x}),"aria-label":s.i18n.translate("unifiedFieldList.fieldListSidebar.fieldsSidebarAriaLabel",{defaultMessage:"Fields"}),id:null!==(R=null===(G=e.creationOptions.dataTestSubj)||void 0===G?void 0:G.fieldListSidebarDataTestSubj)&&void 0!==R?R:"unifiedFieldListSidebarId","data-test-subj":null!==(W=null===(K=e.creationOptions.dataTestSubj)||void 0===K?void 0:K.fieldListSidebarDataTestSubj)&&void 0!==W?W:"unifiedFieldListSidebarId"},be="boolean"==typeof u&&M?Object(y.jsx)(Ne,{buttonSize:j?"s":"m",isSidebarCollapsed:u,panelId:fe.id,onChange:M}):null;if(u&&be)return Object(y.jsx)(c.EuiHideFor,{sizes:["xs","s"]},Object(y.jsx)("div",fe,be));const pe="toolbar"===r,ge={size:"s",iconType:"indexOpen","data-test-subj":null!==(Q=null===(X=e.creationOptions.dataTestSubj)||void 0===X?void 0:X.fieldListAddFieldButtonTestSubj)&&void 0!==Q?Q:"unifiedFieldListAddField",className:"unifiedFieldListSidebar__addBtn"},me=s.i18n.translate("unifiedFieldList.fieldListSidebar.addFieldButtonLabel",{defaultMessage:"Add a field"});return Object(y.jsx)(c.EuiPageSidebar,fe,Object(y.jsx)(c.EuiFlexGroup,{className:"unifiedFieldListSidebar__group",direction:"column",alignItems:"stretch",gutterSize:"none",responsive:!1},Boolean(O)&&Object(y.jsx)(c.EuiFlexItem,{grow:!1,css:Object(y.css)("margin-bottom:",ce.size.s,";","")},O),Object(y.jsx)(c.EuiFlexItem,null,Object(y.jsx)(A,{isProcessing:o,prepend:Object(y.jsx)(c.EuiFlexGroup,{direction:"row",gutterSize:"s",responsive:!1},be&&Object(y.jsx)(c.EuiFlexItem,{grow:!1},be),Object(y.jsx)(c.EuiFlexItem,null,Object(y.jsx)(N,l()({},se,{compressed:j})))),className:"unifiedFieldListSidebar__list"},m?Object(y.jsx)(z,l()({},ae,{renderFieldItem:ue,localStorageKeyPrefix:e.creationOptions.localStorageKeyPrefix})):Object(y.jsx)(c.EuiFlexItem,{grow:!0}))),!!D&&Object(y.jsx)(c.EuiFlexItem,{grow:!1,css:pe?Object(y.css)("padding:",ce.size.s,";border-top:",ce.border.thin,";",""):void 0},pe?Object(y.jsx)(w,l()({},ge,{label:me,onClick:()=>D()})):Object(y.jsx)(c.EuiButton,l()({},ge,{onClick:()=>D()}),me))))},He=Object(d.memo)(ze);function Ge(e){return e.map((e=>new D.DataViewField(e)))}const Ve=Object(d.memo)(Object(d.forwardRef)((function(e,i){var n,r,F;const{getCreationOptions:O,services:I,dataView:L,workspaceSelectedFieldNames:S,prependInFlyout:B,variant:k="responsive",onFieldEdited:w}=e,[D]=Object(d.useState)((({options:e})=>({creationOptions:e}))({options:O()})),{data:E,dataViewFieldEditor:T}=I,[A,M]=Object(d.useState)(!1),[C]=Object(d.useState)((()=>(({localStorageKey:e})=>{const i=new f.BehaviorSubject(!!e&&function(e){let i=!1;try{var t;i="true"===(null===(t=localStorage)||void 0===t?void 0:t.getItem(e))}catch{}return i}(e));return{isCollapsed$:i,toggle:t=>{i.next(t),e&&function(e,i){try{var t;null===(t=localStorage)||void 0===t||t.setItem(e,String(i))}catch{}}(e,t)}}})({localStorageKey:D.creationOptions.localStorageKeyPrefix?`${D.creationOptions.localStorageKeyPrefix}:sidebarClosed`:void 0}))),N=u()(C.isCollapsed$,!1),P=Boolean(null==T?void 0:T.userPermissions.editIndexPattern())||Boolean(L&&!L.isPersisted()),R=Object(d.useRef)(),z=Object(d.useCallback)((e=>{R.current=e}),[]),H=Object(d.useCallback)((()=>{M(!1)}),[]),G=Object(v.b)({data:E,timeRangeUpdatesType:D.creationOptions.timeRangeUpdatesType}),V=G.searchMode,W=Boolean(null===(n=G.filters)||void 0===n?void 0:n.length),{isProcessing:U,refetchFieldsExistenceInfo:$}=(e=>{const i=Object(d.useRef)(!0),[n,l]=Object(d.useState)(0),o=n>0,s=Object(d.useCallback)((async({dataViewId:e,query:n,filters:d,fromDate:o,toDate:s,services:{dataViews:a,data:r,core:u},onNoData:c,fetchId:f})=>{var p,m,F,v,y;if(!(e&&n&&o&&s))return;const O=null===(p=h.getValue())||void 0===p?void 0:p[e];if(!i.current)return;const I=(null!==(m=null==O?void 0:O.numberOfFetches)&&void 0!==m?m:0)+1;let L=null;try{L=await a.get(e,!1)}catch(e){}if(null===(F=L)||void 0===F||!F.title)return;l((e=>e+1));const S=Boolean(null===(v=(y=L).getAggregationRestrictions)||void 0===v?void 0:v.call(y)),B={..._,numberOfFetches:I};if(S)B.fetchStatus=g.a.succeeded,B.hasDataViewRestrictions=!0;else try{const i=await(async e=>{const{loadFieldExisting:i}=await t.e(21).then(t.bind(null,475));return await i(e)})({dslQuery:await x(L,n,d||[],Object(b.a)(u.uiSettings)),fromDate:o,toDate:s,timeFieldName:L.timeFieldName,data:r,uiSettingsClient:u.uiSettings,dataViewsService:a,dataView:L}),l=(null==i?void 0:i.existingFieldNames)||[];c&&1===I&&!l.filter((e=>{var i,t;return!(null!==(i=L)&&void 0!==i&&null!==(t=i.metaFields)&&void 0!==t&&t.includes(e))})).length&&c(e),B.existingFieldsByFieldNameMap=l.reduce(((e,i)=>(e[i]=!0,e)),{}),B.newFields=i.newFields,B.fetchStatus=g.a.succeeded}catch(e){B.fetchStatus=g.a.failed}i.current&&f===j&&h.next({...h.getValue(),[e]:B}),l((e=>e-1))}),[i,l]),a=e.dataViews.map((e=>{var i,t;return`${e.id}:${e.title}:${e.timeFieldName||"no-timefield"}:${null!==(i=null===(t=e.fields)||void 0===t?void 0:t.length)&&void 0!==i?i:0}`})).join(","),r=Object(d.useCallback)((async i=>{const t=window.performance.now(),n="fetchFieldsExistenceInfo",l=m();j=l;const d={fetchId:l,dataViewId:i,...e};if(i)return await s({...d,dataViewId:i}),void Object(p.a)(e.services.core.analytics,{eventName:n,duration:window.performance.now()-t,meta:{dataViewsCount:1}});await Promise.all(e.dataViews.map((e=>s({...d,dataViewId:e.id})))),Object(p.a)(e.services.core.analytics,{eventName:n,duration:window.performance.now()-t,meta:{dataViewsCount:e.dataViews.length}})}),[s,a,e.query,e.filters,e.fromDate,e.toDate,e.services.core]);return Object(d.useEffect)((()=>{e.disableAutoFetching||r()}),[r,e.disableAutoFetching]),Object(d.useEffect)((()=>()=>{i.current=!1,h.next({})}),[i]),Object(d.useMemo)((()=>({refetchFieldsExistenceInfo:r,isProcessing:o})),[r,o])})({disableAutoFetching:D.creationOptions.disableFieldsExistenceAutoFetching,dataViews:"documents"===V&&L?[L]:[],query:G.query,filters:G.filters,fromDate:G.fromDate,toDate:G.toDate,services:I}),K=Object(d.useMemo)((()=>L&&T&&"documents"===V&&P?async e=>{const i=await T.openEditor({ctx:{dataView:L},fieldName:e,onSave:async()=>{w&&await w({editedFieldName:e})}});z(i),H()}:void 0),[V,P,T,L,z,H,w]),q=Object(d.useMemo)((()=>L&&T&&K?e=>{const i=T.openDeleteModal({ctx:{dataView:L},fieldName:e,onDelete:async()=>{w&&await w({removedFieldName:e})}});z(i),H()}:void 0),[L,z,K,H,T,w]);if(Object(d.useEffect)((()=>()=>{null!=R&&R.current&&(null==R||R.current())}),[]),Object(d.useImperativeHandle)(i,(()=>({sidebarVisibility:C,refetchFieldsExistenceInfo:$,closeFieldListFlyout:H,createField:K,editField:K,deleteField:q})),[C,$,H,K,q]),!L)return null;const Y={...e,searchMode:V,stateService:D,isProcessing:U,isAffectedByGlobalFilter:W,onEditField:K,onDeleteField:q,compressed:null!==(r=D.creationOptions.compressed)&&void 0!==r&&r,buttonAddFieldVariant:null!==(F=D.creationOptions.buttonAddFieldVariant)&&void 0!==F?F:"primary"};D.creationOptions.showSidebarToggleButton&&(Y.isSidebarCollapsed=N,Y.onToggleSidebar=C.toggle);const Q=D.creationOptions.buttonPropsToTriggerFlyout,X=()=>Object(y.jsx)(He,Y),Z=()=>Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)("div",{className:"unifiedFieldListSidebar__mobile"},Object(y.jsx)(c.EuiButton,l()({},Q,{contentProps:{...null==Q?void 0:Q.contentProps,className:"unifiedFieldListSidebar__mobileButton"},fullWidth:!0,onClick:()=>M(!0)}),Object(y.jsx)(a.FormattedMessage,{id:"unifiedFieldList.fieldListSidebar.fieldsMobileButtonLabel",defaultMessage:"Fields"}),Object(y.jsx)(c.EuiBadge,{className:"unifiedFieldListSidebar__mobileBadge",color:"_source"===(null==S?void 0:S[0])?"default":"accent"},null!=S&&S.length&&"_source"!==S[0]?S.length:0))),A&&Object(y.jsx)(c.EuiPortal,null,Object(y.jsx)(c.EuiFlyout,{size:"s",onClose:()=>M(!1),"aria-labelledby":"flyoutTitle",ownFocus:!0},Object(y.jsx)(c.EuiFlyoutHeader,{hasBorder:!0},Object(y.jsx)(c.EuiTitle,{size:"s"},Object(y.jsx)("h2",{id:"flyoutTitle"},Object(y.jsx)(c.EuiLink,{color:"text",onClick:()=>M(!1)},Object(y.jsx)(c.EuiIcon,{className:"eui-alignBaseline","aria-label":s.i18n.translate("unifiedFieldList.fieldListSidebar.flyoutBackIcon",{defaultMessage:"Back"}),type:"arrowLeft"})," ",Object(y.jsx)("strong",null,s.i18n.translate("unifiedFieldList.fieldListSidebar.flyoutHeading",{defaultMessage:"Field list"})))))),Object(y.jsx)(He,l()({},Y,{alwaysShowActionButton:!0,buttonAddFieldVariant:"primary",isSidebarCollapsed:void 0,prepend:null==B?void 0:B()})))));return"button-and-flyout-always"===k?Z():"list-always"===k?X():Object(y.jsx)(o.a.Fragment,null,Object(y.jsx)(c.EuiHideFor,{sizes:["xs","s"]},X()),Object(y.jsx)(c.EuiShowFor,{sizes:["xs","s"]},Z()))})));i.default=Ve}}]);