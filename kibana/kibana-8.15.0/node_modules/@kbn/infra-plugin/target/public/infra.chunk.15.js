/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.infra_bundle_jsonpfunction=window.infra_bundle_jsonpfunction||[]).push([[15],{115:function(e,t,n){e.exports=n(64)(4)},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}));var a=n(3),r=n.n(a);const i=r.a.createContext({triggersActionsUI:null}),l=e=>r.a.createElement(i.Provider,{value:{triggersActionsUI:e.triggersActionsUI}},e.children)},648:function(e,t,n){"use strict";n.r(t),n.d(t,"AlertDropdown",(function(){return w}));var a=n(115),r=n.n(a),i=n(3),l=n.n(i),s=n(1),o=n(40),c=n(73),u=n(78),d=n(162),g=n(11);const p=e=>{const{visible:t,setVisible:n}=e,{triggersActionsUI:a}=Object(i.useContext)(d.a),r=Object(i.useCallback)((()=>n(!1)),[n]),s=Object(i.useMemo)((()=>a&&a.getAddRuleFlyout({consumer:"logs",onClose:r,canChangeTrigger:!1,ruleTypeId:g.d,metadata:{isInternal:!0}})),[a,r]);return l.a.createElement(l.a.Fragment,null,t&&s)};var b=n(30);const m=s.i18n.translate("xpack.infra.logs.alertDropdown.readOnlyCreateAlertContent",{defaultMessage:"Creating alerts requires more permissions in this application."}),f=s.i18n.translate("xpack.infra.logs.alertDropdown.readOnlyCreateAlertTitle",{defaultMessage:"Read only"}),C=s.i18n.translate("xpack.infra.logs.alertDropdown.inlineLogViewCreateAlertTitle",{defaultMessage:"Inline Log View"}),k=s.i18n.translate("xpack.infra.logs.alertDropdown.inlineLogViewCreateAlertContent",{defaultMessage:"Creating alerts is not supported with inline Log Views"}),w=()=>{var e,t;const{services:{application:{capabilities:n},observability:a}}=Object(b.c)(),{isPersistedLogView:s}=Object(u.useLogViewContext)(),d=!(null!=n&&null!==(e=n.logs)&&void 0!==e&&e.save),g=null!==(t=!d&&s)&&void 0!==t&&t,[w,v]=Object(i.useState)(!1),[E,M]=Object(i.useState)(!1),O=a.useRulesLink({hrefOnly:!0}),x=Object(i.useCallback)((()=>{v(!1)}),[v]),j=Object(i.useCallback)((()=>{v(!0)}),[v]),A=Object(i.useCallback)((()=>{M(!0),x()}),[M,x]),y=Object(i.useMemo)((()=>[l.a.createElement(o.EuiContextMenuItem,{disabled:!g,icon:"bell",key:"createLink",onClick:A,toolTipContent:g?void 0:d?m:k,toolTipProps:{title:g?void 0:d?f:C}},l.a.createElement(c.FormattedMessage,{id:"xpack.infra.alerting.logs.createAlertButton",defaultMessage:"Create rule"})),l.a.createElement(o.EuiContextMenuItem,r()({icon:"tableOfContents",key:"manageLink"},O),l.a.createElement(c.FormattedMessage,{id:"xpack.infra.alerting.logs.manageAlerts",defaultMessage:"Manage rules"}))]),[g,A,d,O]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(o.EuiPopover,{panelPaddingSize:"none",button:l.a.createElement(o.EuiHeaderLink,{color:"text",iconSide:"right",iconType:"arrowDown",onClick:j},l.a.createElement(c.FormattedMessage,{id:"xpack.infra.alerting.logs.alertsButton",defaultMessage:"Alerts and rules"})),isOpen:w,closePopover:x},l.a.createElement(o.EuiContextMenuPanel,{items:y})),l.a.createElement(p,{setVisible:M,visible:E}))};t.default=w}}]);