/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.monitoring_bundle_jsonpfunction=window.monitoring_bundle_jsonpfunction||[]).push([[2],Array(41).concat([function(e,t,s){"use strict";var a,i=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}(),n=[];function o(e){for(var t=-1,s=0;s<n.length;s++)if(n[s].identifier===e){t=s;break}return t}function r(e,t){for(var s={},a=[],i=0;i<e.length;i++){var r=e[i],l=t.base?r[0]+t.base:r[0],c=s[l]||0,u="".concat(l," ").concat(c);s[l]=c+1;var d=o(u),p={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(n[d].references++,n[d].updater(p)):n.push({identifier:u,updater:b(p,t),references:1}),a.push(u)}return a}function l(e){var t=document.createElement("style"),a=e.attributes||{};if(void 0===a.nonce){var n=s.nc;n&&(a.nonce=n)}if(Object.keys(a).forEach((function(e){t.setAttribute(e,a[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,s,a){var i=s?"":a.media?"@media ".concat(a.media," {").concat(a.css,"}"):a.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var n=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(n,o[t]):e.appendChild(n)}}function p(e,t,s){var a=s.css,i=s.media,n=s.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}var g=null,m=0;function b(e,t){var s,a,i;if(t.singleton){var n=m++;s=g||(g=l(t)),a=d.bind(null,s,n,!1),i=d.bind(null,s,n,!0)}else s=l(t),a=p.bind(null,s,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return a(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;a(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===a&&(a=Boolean(window&&document&&document.all&&!window.atob)),a));var s=r(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var a=0;a<s.length;a++){var i=o(s[a]);n[i].references--}for(var l=r(e,t),c=0;c<s.length;c++){var u=o(s[c]);0===n[u].references&&(n[u].updater(),n.splice(u,1))}s=l}}}},function(e,t,s){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s=function(e,t){var s,a,i,n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(s=o,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(i," */")),l=o.sources.map((function(e){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(e," */")}));return[n].concat(l).concat([r]).join("\n")}return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(s,"}"):s})).join("")},t.i=function(e,s,a){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(a)for(var n=0;n<this.length;n++){var o=this[n][0];null!=o&&(i[o]=!0)}for(var r=0;r<e.length;r++){var l=[].concat(e[r]);a&&i[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),t.push(l))}},t}},,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),i=s(5),n=a.__importDefault(s(54));t.default=function(e,t){var s=i.useState(t),a=s[0],o=s[1];return n.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),a}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i={};t.default=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];var o=[],r=[],l=function(e){var t=a.createContext(i);o.push(t),r.push(function(e){return function(){var t=a.useContext(e);return t}}(t))};s.length?s.forEach((function(e){return l(e.name)})):l(e.name);var c=function(t){for(var i=t.children,n=function(e,t){if(null==e)return{};var s,a,i={},n=Object.keys(e);for(a=0;a<n.length;a++)s=n[a],t.indexOf(s)>=0||(i[s]=e[s]);return i}(t,["children"]),r=e(n),l=i,c=0;c<o.length;c+=1){var u=o[c],d=s[c]||function(e){return e};l=a.createElement(u.Provider,{value:d(r)},l)}return l};return[c].concat(r)}},function(e,t,s){var a,i,n,o,r;
/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */o=this,r=function(e){var t=!1,s=!1,a=!1,i=!1,n="escape years months weeks days hours minutes seconds milliseconds general".split(" "),o=[{type:"seconds",targets:[{type:"minutes",value:60},{type:"hours",value:3600},{type:"days",value:86400},{type:"weeks",value:604800},{type:"months",value:2678400},{type:"years",value:31536e3}]},{type:"minutes",targets:[{type:"hours",value:60},{type:"days",value:1440},{type:"weeks",value:10080},{type:"months",value:44640},{type:"years",value:525600}]},{type:"hours",targets:[{type:"days",value:24},{type:"weeks",value:168},{type:"months",value:744},{type:"years",value:8760}]},{type:"days",targets:[{type:"weeks",value:7},{type:"months",value:31},{type:"years",value:365}]},{type:"months",targets:[{type:"years",value:12}]}];function r(e,t){return!(t.length>e.length)&&-1!==e.indexOf(t)}function l(e){for(var t="";e;)t+="0",e-=1;return t}function c(e,t){var s=e+"+"+j(M(t).sort(),(function(e){return e+":"+t[e]})).join(",");return c.cache[s]||(c.cache[s]=Intl.NumberFormat(e,t)),c.cache[s]}function u(e,t,n){var o,r,d,p=t.useToLocaleString,g=t.useGrouping,m=g&&t.grouping.slice(),b=t.maximumSignificantDigits,h=t.minimumIntegerDigits||1,j=t.fractionDigits||0,x=t.groupingSeparator,f=t.decimalSeparator;if(p&&n){var O,v={minimumIntegerDigits:h,useGrouping:g};return j&&(v.maximumFractionDigits=j,v.minimumFractionDigits=j),b&&e>0&&(v.maximumSignificantDigits=b),a?(i||((O=k({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),c(n,v).format(e)):(s||((O=k({},t)).useGrouping=!1,O.decimalSeparator=".",e=parseFloat(u(e,O),10)),e.toLocaleString(n,v))}var y=(b?e.toPrecision(b+1):e.toFixed(j+1)).split("e");d=y[1]||"",r=(y=y[0].split("."))[1]||"";var M=(o=y[0]||"").length,E=r.length,S=M+E,w=o+r;(b&&S===b+1||!b&&E===j+1)&&((w=function(e){for(var t=e.split("").reverse(),s=0,a=!0;a&&s<t.length;)s?"9"===t[s]?t[s]="0":(t[s]=(parseInt(t[s],10)+1).toString(),a=!1):(parseInt(t[s],10)<5&&(a=!1),t[s]="0"),s+=1;return a&&t.push("1"),t.reverse().join("")}(w)).length===S+1&&(M+=1),E&&(w=w.slice(0,-1)),o=w.slice(0,M),r=w.slice(M)),b&&(r=r.replace(/0*$/,""));var T=parseInt(d,10);T>0?r.length<=T?(o+=r+=l(T-r.length),r=""):(o+=r.slice(0,T),r=r.slice(T)):T<0&&(r=l(Math.abs(T)-o.length)+o+r,o="0"),b||((r=r.slice(0,j)).length<j&&(r+=l(j-r.length)),o.length<h&&(o=l(h-o.length)+o));var _,C="";if(g)for(y=o;y.length;)m.length&&(_=m.shift()),C&&(C=x+C),C=y.slice(-_)+C,y=y.slice(0,-_);else C=o;return r&&(C=C+f+r),C}function d(e,t){return e.label.length>t.label.length?-1:e.label.length<t.label.length?1:0}c.cache={};var p={durationLabelsStandard:{S:"millisecond",SS:"milliseconds",s:"second",ss:"seconds",m:"minute",mm:"minutes",h:"hour",hh:"hours",d:"day",dd:"days",w:"week",ww:"weeks",M:"month",MM:"months",y:"year",yy:"years"},durationLabelsShort:{S:"msec",SS:"msecs",s:"sec",ss:"secs",m:"min",mm:"mins",h:"hr",hh:"hrs",d:"dy",dd:"dys",w:"wk",ww:"wks",M:"mo",MM:"mos",y:"yr",yy:"yrs"},durationTimeTemplates:{HMS:"h:mm:ss",HM:"h:mm",MS:"m:ss"},durationLabelTypes:[{type:"standard",string:"__"},{type:"short",string:"_"}],durationPluralKey:function(e,t,s){return 1===t&&null===s?e:e+e}};function g(e){return"[object Array]"===Object.prototype.toString.call(e)}function m(e){return"[object Object]"===Object.prototype.toString.call(e)}function b(e,t){var s,a=0,i=e&&e.length||0;for("function"!=typeof t&&(s=t,t=function(e){return e===s});a<i;){if(t(e[a]))return e[a];a+=1}}function h(e,t){var s=0,a=e.length;if(e&&a)for(;s<a;){if(!1===t(e[s],s))return;s+=1}}function j(e,t){var s=0,a=e.length,i=[];if(!e||!a)return i;for(;s<a;)i[s]=t(e[s],s),s+=1;return i}function x(e,t){return j(e,(function(e){return e[t]}))}function f(e){var t=[];return h(e,(function(e){e&&t.push(e)})),t}function O(e){var t=[];return h(e,(function(e){b(t,e)||t.push(e)})),t}function v(e,t){var s=[];return h(e,(function(e){h(t,(function(t){e===t&&s.push(e)}))})),O(s)}function y(e,t){var s=[];return h(e,(function(a,i){if(!t(a))return s=e.slice(i),!1})),s}function k(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}function M(e){var t=[];for(var s in e)e.hasOwnProperty(s)&&t.push(s);return t}function E(e,t){var s=0,a=e.length;if(!e||!a)return!1;for(;s<a;){if(!0===t(e[s],s))return!0;s+=1}return!1}function S(e){return"3.6"===e(3.55,"en",{useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:1,maximumFractionDigits:1})}function w(e){var t=!0;return!!((t=(t=(t=t&&"1"===e(1,"en",{minimumIntegerDigits:1}))&&"01"===e(1,"en",{minimumIntegerDigits:2}))&&"001"===e(1,"en",{minimumIntegerDigits:3}))&&(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumFractionDigits:0,minimumFractionDigits:0}))&&"100.0"===e(99.99,"en",{maximumFractionDigits:1,minimumFractionDigits:1}))&&"99.99"===e(99.99,"en",{maximumFractionDigits:2,minimumFractionDigits:2}))&&"99.990"===e(99.99,"en",{maximumFractionDigits:3,minimumFractionDigits:3}))&&(t=(t=(t=(t=(t=t&&"100"===e(99.99,"en",{maximumSignificantDigits:1}))&&"100"===e(99.99,"en",{maximumSignificantDigits:2}))&&"100"===e(99.99,"en",{maximumSignificantDigits:3}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:4}))&&"99.99"===e(99.99,"en",{maximumSignificantDigits:5}))&&(t=(t=t&&"1,000"===e(1e3,"en",{useGrouping:!0}))&&"1000"===e(1e3,"en",{useGrouping:!1})))}function T(){var e,t=[].slice.call(arguments),s={};if(h(t,(function(t,a){if(!a){if(!g(t))throw"Expected array as the first argument to durationsFormat.";e=t}"string"!=typeof t&&"function"!=typeof t?"number"!=typeof t?m(t)&&k(s,t):s.precision=t:s.template=t})),!e||!e.length)return[];s.returnMomentTypes=!0;var a,i=j(e,(function(e){return e.format(s)})),o=v(n,O(x((a=[],h(i,(function(e){a=a.concat(e)})),a),"type"))),r=s.largest;return r&&(o=o.slice(0,r)),s.returnMomentTypes=!1,s.outputTypes=o,j(e,(function(e){return e.format(s)}))}function _(){var s=[].slice.call(arguments),i=k({},this.format.defaults),l=this.asMilliseconds(),c=this.asMonths();"function"==typeof this.isValid&&!1===this.isValid()&&(l=0,c=0);var S=l<0,w=e.duration(Math.abs(l),"milliseconds"),T=e.duration(Math.abs(c),"months");h(s,(function(e){"string"!=typeof e&&"function"!=typeof e?"number"!=typeof e?m(e)&&k(i,e):i.precision=e:i.template=e}));var _={years:"y",months:"M",weeks:"w",days:"d",hours:"h",minutes:"m",seconds:"s",milliseconds:"S"},C={escape:/\[(.+?)\]/,years:/\*?[Yy]+/,months:/\*?M+/,weeks:/\*?[Ww]+/,days:/\*?[Dd]+/,hours:/\*?[Hh]+/,minutes:/\*?m+/,seconds:/\*?s+/,milliseconds:/\*?S+/,general:/.+?/};i.types=n;var I=function(e){return b(n,(function(t){return C[t].test(e)}))},L=new RegExp(j(n,(function(e){return C[e].source})).join("|"),"g");i.duration=this;var P="function"==typeof i.template?i.template.apply(i):i.template,F=i.outputTypes,N=i.returnMomentTypes,D=i.largest,z=[];F||(g(i.stopTrim)&&(i.stopTrim=i.stopTrim.join("")),i.stopTrim&&h(i.stopTrim.match(L),(function(e){var t=I(e);"escape"!==t&&"general"!==t&&z.push(t)})));var R=e.localeData();R||(R={}),h(M(p),(function(e){"function"!=typeof p[e]?R["_"+e]||(R["_"+e]=p[e]):R[e]||(R[e]=p[e])})),h(M(R._durationTimeTemplates),(function(e){P=P.replace("_"+e+"_",R._durationTimeTemplates[e])}));var A=i.userLocale||e.locale(),B=i.useLeftUnits,V=i.usePlural,U=i.precision,$=i.forceLength,H=i.useGrouping,W=i.trunc,q=i.useSignificantDigits&&U>0,G=q?i.precision:0,K=G,J=i.minValue,Y=!1,Q=i.maxValue,X=!1,Z=i.useToLocaleString,ee=i.groupingSeparator,te=i.decimalSeparator,se=i.grouping;Z=Z&&(t||a);var ae=i.trim;g(ae)&&(ae=ae.join(" ")),null===ae&&(D||Q||q)&&(ae="all"),null!==ae&&!0!==ae&&"left"!==ae&&"right"!==ae||(ae="large"),!1===ae&&(ae="");var ie=function(e){return e.test(ae)},ne=/both/,oe=/^all|[^sm]all/,re=D>0||E([/large/,ne,oe],ie),le=E([/small/,ne,oe],ie),ce=E([/mid/,oe],ie),ue=E([/final/,oe],ie),de=j(P.match(L),(function(e,t){var s=I(e);return"*"===e.slice(0,1)&&(e=e.slice(1),"escape"!==s&&"general"!==s&&z.push(s)),{index:t,length:e.length,text:"",token:"escape"===s?e.replace(C.escape,"$1"):e,type:"escape"===s||"general"===s?null:s}})),pe={index:0,length:0,token:"",text:"",type:null},ge=[];B&&de.reverse(),h(de,(function(e){if(e.type)return(pe.type||pe.text)&&ge.push(pe),void(pe=e);B?pe.text=e.token+pe.text:pe.text+=e.token})),(pe.type||pe.text)&&ge.push(pe),B&&ge.reverse();var me=v(n,O(f(x(ge,"type"))));if(!me.length)return x(ge,"text").join("");me=j(me,(function(e,t){var s,a=t+1===me.length,n=!t;s="years"===e||"months"===e?T.as(e):w.as(e);var o=Math.floor(s),r=s-o,l=b(ge,(function(t){return e===t.type}));return n&&Q&&s>Q&&(X=!0),a&&J&&Math.abs(i.duration.as(e))<J&&(Y=!0),n&&null===$&&l.length>1&&($=!0),w.subtract(o,e),T.subtract(o,e),{rawValue:s,wholeValue:o,decimalValue:a?r:0,isSmallest:a,isLargest:n,type:e,tokenLength:l.length}}));var be,he=W?Math.floor:Math.round,je=function(e,t){var s=Math.pow(10,t);return he(e*s)/s},xe=!1,fe=!1,Oe=function(e,t){var s={useGrouping:H,groupingSeparator:ee,decimalSeparator:te,grouping:se,useToLocaleString:Z};return q&&(G<=0?(e.rawValue=0,e.wholeValue=0,e.decimalValue=0):(s.maximumSignificantDigits=G,e.significantDigits=G)),X&&!fe&&(e.isLargest?(e.wholeValue=Q,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),Y&&!fe&&(e.isSmallest?(e.wholeValue=J,e.decimalValue=0):(e.wholeValue=0,e.decimalValue=0)),e.isSmallest||e.significantDigits&&e.significantDigits-e.wholeValue.toString().length<=0?U<0?e.value=je(e.wholeValue,U):0===U?e.value=he(e.wholeValue+e.decimalValue):q?(e.value=W?je(e.rawValue,G-e.wholeValue.toString().length):e.rawValue,e.wholeValue&&(G-=e.wholeValue.toString().length)):(s.fractionDigits=U,e.value=W?e.wholeValue+je(e.decimalValue,U):e.wholeValue+e.decimalValue):q&&e.wholeValue?(e.value=Math.round(je(e.wholeValue,e.significantDigits-e.wholeValue.toString().length)),G-=e.wholeValue.toString().length):e.value=e.wholeValue,e.tokenLength>1&&($||xe)&&(s.minimumIntegerDigits=e.tokenLength,fe&&s.maximumSignificantDigits<e.tokenLength&&delete s.maximumSignificantDigits),!xe&&(e.value>0||""===ae||b(z,e.type)||b(F,e.type))&&(xe=!0),e.formattedValue=u(e.value,s,A),s.useGrouping=!1,s.decimalSeparator=".",e.formattedValueEn=u(e.value,s,"en"),2===e.tokenLength&&"milliseconds"===e.type&&(e.formattedValueMS=u(e.value,{minimumIntegerDigits:3,useGrouping:!1},"en").slice(0,2)),e};if((me=f(me=j(me,Oe))).length>1){var ve=function(e){return b(me,(function(t){return t.type===e}))};h(o,(function(e){var t=ve(e.type);t&&h(e.targets,(function(e){var s=ve(e.type);s&&parseInt(t.formattedValueEn,10)===e.value&&(t.rawValue=0,t.wholeValue=0,t.decimalValue=0,s.rawValue+=1,s.wholeValue+=1,s.decimalValue=0,s.formattedValueEn=s.wholeValue.toString(),fe=!0)}))}))}return fe&&(xe=!1,G=K,me=f(me=j(me,Oe))),!F||X&&!i.trim?(re&&(me=y(me,(function(e){return!e.isSmallest&&!e.wholeValue&&!b(z,e.type)}))),D&&me.length&&(me=me.slice(0,D)),le&&me.length>1&&(be=function(e){return!e.wholeValue&&!b(z,e.type)&&!e.isLargest},me=y(me.slice().reverse(),be).reverse()),ce&&(me=f(me=j(me,(function(e,t){return t>0&&t<me.length-1&&!e.wholeValue?null:e})))),!ue||1!==me.length||me[0].wholeValue||!W&&me[0].isSmallest&&me[0].rawValue<J||(me=[])):me=f(me=j(me,(function(e){return b(F,(function(t){return e.type===t}))?e:null}))),N?me:(h(ge,(function(e){var t=_[e.type],s=b(me,(function(t){return t.type===e.type}));if(t&&s){var a=s.formattedValueEn.split(".");a[0]=parseInt(a[0],10),a[1]?a[1]=parseFloat("0."+a[1],10):a[1]=null;var i=R.durationPluralKey(t,a[0],a[1]),n=function(e,t){var s=[];return h(M(t),(function(a){if("_durationLabels"===a.slice(0,15)){var i=a.slice(15).toLowerCase();h(M(t[a]),(function(n){n.slice(0,1)===e&&s.push({type:i,key:n,label:t[a][n]})}))}})),s}(t,R),o=!1,l={};h(R._durationLabelTypes,(function(t){var s=b(n,(function(e){return e.type===t.type&&e.key===i}));s&&(l[s.type]=s.label,r(e.text,t.string)&&(e.text=e.text.replace(t.string,s.label),o=!0))})),V&&!o&&(n.sort(d),h(n,(function(t){return l[t.type]===t.label?!r(e.text,t.label)&&void 0:r(e.text,t.label)?(e.text=e.text.replace(t.label,l[t.type]),!1):void 0})))}})),(ge=j(ge,(function(e){if(!e.type)return e.text;var t=b(me,(function(t){return t.type===e.type}));if(!t)return"";var s="";return B&&(s+=e.text),(S&&X||!S&&Y)&&(s+="< ",X=!1,Y=!1),(S&&Y||!S&&X)&&(s+="> ",X=!1,Y=!1),S&&(t.value>0||""===ae||b(z,t.type)||b(F,t.type))&&(s+="-",S=!1),"milliseconds"===e.type&&t.formattedValueMS?s+=t.formattedValueMS:s+=t.formattedValue,B||(s+=e.text),s}))).join("").replace(/(,| |:|\.)*$/,"").replace(/^(,| |:|\.)*/,""))}function C(){var e=this.duration,t=function(t){return e._data[t]},s=b(this.types,t),a=function(e,t){for(var s=e.length;s-=1;)if(t(e[s]))return e[s]}(this.types,t);switch(s){case"milliseconds":return"S __";case"seconds":case"minutes":return"*_MS_";case"hours":return"_HMS_";case"days":if(s===a)return"d __";case"weeks":return s===a?"w __":(null===this.trim&&(this.trim="both"),"w __, d __, h __");case"months":if(s===a)return"M __";case"years":return s===a?"y __":(null===this.trim&&(this.trim="both"),"y __, M __, d __");default:return null===this.trim&&(this.trim="both"),"y __, d __, h __, m __, s __"}}function I(e){if(!e)throw"Moment Duration Format init cannot find moment instance.";e.duration.format=T,e.duration.fn.format=_,e.duration.fn.format.defaults={trim:null,stopTrim:null,largest:null,maxValue:null,minValue:null,precision:0,trunc:!1,forceLength:null,userLocale:null,usePlural:!0,useLeftUnits:!1,useGrouping:!0,useSignificantDigits:!1,template:C,useToLocaleString:!0,groupingSeparator:",",decimalSeparator:".",grouping:[3]},e.updateLocale("en",p)}var L=function(e,t,s){return e.toLocaleString(t,s)};t=function(){try{(0).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()&&w(L),s=t&&S(L);var P=function(e,t,s){if("undefined"!=typeof window&&window&&window.Intl&&window.Intl.NumberFormat)return window.Intl.NumberFormat(t,s).format(e)};return a=w(P),i=a&&S(P),I(e),I},i=[s(19)],void 0===(n="function"==typeof(a=r)?a.apply(t,i):a)||(e.exports=n),o&&(o.momentDurationFormatSetup=o.moment?r(o.moment):r)},function(e,t,s){(function(t){const s="object"==typeof t&&Object({IS_KIBANA_DISTRIBUTABLE:"true"})&&Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG&&/\bsemver\b/i.test(Object({IS_KIBANA_DISTRIBUTABLE:"true"}).NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=s}).call(this,s(116))},function(e,t){const s=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},,,,,function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5),i="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setEuiDevProviderWarning=t.getEuiDevProviderWarning=t.emitEuiProviderWarning=void 0;var a=void 0;t.setEuiDevProviderWarning=function(e){return a=e},t.getEuiDevProviderWarning=function(){return a},t.emitEuiProviderWarning=function(e){if("function"==typeof a)return a(e);switch(a){case"log":console.log(e);break;case"warn":console.warn(e);break;case"error":throw new Error(e)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),i=s(5),n=a.__importDefault(s(57));t.default=function(e){var t=i.useRef(e);t.current=e,n.default((function(){return function(){return t.current()}}))}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e){a.useEffect(e,[])}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t){var s=a.useRef((function(){}));a.useEffect((function(){s.current=e})),a.useEffect((function(){if(null!==t){var e=setInterval((function(){return s.current()}),t||0);return function(){return clearInterval(e)}}}),[t])}},function(e,t){!function(e){e.color={},e.color.make=function(t,s,a,i){var n={};return n.r=t||0,n.g=s||0,n.b=a||0,n.a=null!=i?i:1,n.add=function(e,t){for(var s=0;s<e.length;++s)n[e.charAt(s)]+=t;return n.normalize()},n.scale=function(e,t){for(var s=0;s<e.length;++s)n[e.charAt(s)]*=t;return n.normalize()},n.toString=function(){return n.a>=1?"rgb("+[n.r,n.g,n.b].join(",")+")":"rgba("+[n.r,n.g,n.b,n.a].join(",")+")"},n.normalize=function(){function e(e,t,s){return t<e?e:t>s?s:t}return n.r=e(0,parseInt(n.r),255),n.g=e(0,parseInt(n.g),255),n.b=e(0,parseInt(n.b),255),n.a=e(0,n.a,1),n},n.clone=function(){return e.color.make(n.r,n.b,n.g,n.a)},n.normalize()},e.color.extract=function(t,s){var a;do{if(""!=(a=t.css(s).toLowerCase())&&"transparent"!=a)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==a&&(a="transparent"),e.color.parse(a)},e.color.parse=function(s){var a,i=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(s))return i(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(s))return i(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(s))return i(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(s))return i(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(s))return i(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(s))return i(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));var n=e.trim(s).toLowerCase();return"transparent"==n?i(255,255,255,0):i((a=t[n]||[0,0,0])[0],a[1],a[2])};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){var t=Object.prototype.hasOwnProperty;function s(t,s){var a=s.children("."+t)[0];if(null==a&&((a=document.createElement("canvas")).className=t,e(a).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!a.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");a=window.G_vmlCanvasManager.initElement(a)}this.element=a;var i=this.context=a.getContext("2d"),n=window.devicePixelRatio||1,o=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;this.pixelRatio=n/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={}}function a(t,a,i,n){var o=[],r={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},l=null,c=null,u=null,d=null,p=null,g=[],m=[],b={left:0,right:0,top:0,bottom:0},h=0,j=0,x={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},f=this;function O(e,t){t=[f].concat(t);for(var s=0;s<e.length;++s)e[s].apply(this,t)}function v(t){o=function(t){for(var s=[],a=0;a<t.length;++a){var i=e.extend(!0,{},r.series);null!=t[a].data?(i.data=t[a].data,delete t[a].data,e.extend(!0,i,t[a]),t[a].data=i.data):i.data=t[a],s.push(i)}return s}(t),function(){var t,s=o.length,a=-1;for(t=0;t<o.length;++t){var i=o[t].color;null!=i&&(s--,"number"==typeof i&&i>a&&(a=i))}s<=a&&(s=a+1);var n,l=[],c=r.colors,u=c.length,d=0;for(t=0;t<s;t++)n=e.color.parse(c[t%u]||"#666"),t%u==0&&t&&(d=d>=0?d<.5?-d-.2:0:-d),l[t]=n.scale("rgb",1+d);var p,b=0;for(t=0;t<o.length;++t){if(null==(p=o[t]).color?(p.color=l[b].toString(),++b):"number"==typeof p.color&&(p.color=l[p.color].toString()),null==p.lines.show){var h,j=!0;for(h in p)if(p[h]&&p[h].show){j=!1;break}j&&(p.lines.show=!0)}null==p.lines.zero&&(p.lines.zero=!!p.lines.fill),p.xaxis=E(g,y(p,"x")),p.yaxis=E(m,y(p,"y"))}}(),function(){var t,s,a,i,n,r,l,c,u,d,p,g,m=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,h=Number.MAX_VALUE;function j(e,t,s){t<e.datamin&&t!=-h&&(e.datamin=t),s>e.datamax&&s!=h&&(e.datamax=s)}for(e.each(k(),(function(e,t){t.datamin=m,t.datamax=b,t.used=!1})),t=0;t<o.length;++t)(n=o[t]).datapoints={points:[]},O(x.processRawData,[n,n.data,n.datapoints]);for(t=0;t<o.length;++t){if(p=(n=o[t]).data,!(g=n.datapoints.format)){if((g=[]).push({x:!0,number:!0,required:!0}),g.push({y:!0,number:!0,required:!0}),n.bars.show||n.lines.show&&n.lines.fill){var f=!!(n.bars.show&&n.bars.zero||n.lines.show&&n.lines.zero);g.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:f}),n.bars.horizontal&&(delete g[g.length-1].y,g[g.length-1].x=!0)}n.datapoints.format=g}if(null==n.datapoints.pointsize){n.datapoints.pointsize=g.length,l=n.datapoints.pointsize,r=n.datapoints.points;var v=n.lines.show&&n.lines.steps;for(n.xaxis.used=n.yaxis.used=!0,s=a=0;s<p.length;++s,a+=l){var y=null==(d=p[s]);if(!y)for(i=0;i<l;++i)c=d[i],(u=g[i])&&(u.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=h:c==-1/0&&(c=-h)),null==c&&(u.required&&(y=!0),null!=u.defaultValue&&(c=u.defaultValue))),r[a+i]=c;if(y)for(i=0;i<l;++i)null!=(c=r[a+i])&&!1!==(u=g[i]).autoscale&&(u.x&&j(n.xaxis,c,c),u.y&&j(n.yaxis,c,c)),r[a+i]=null;else if(v&&a>0&&null!=r[a-l]&&r[a-l]!=r[a]&&r[a-l+1]!=r[a+1]){for(i=0;i<l;++i)r[a+l+i]=r[a+i];r[a+1]=r[a-l+1],a+=l}}}}for(t=0;t<o.length;++t)n=o[t],O(x.processDatapoints,[n,n.datapoints]);for(t=0;t<o.length;++t){r=(n=o[t]).datapoints.points,l=n.datapoints.pointsize,g=n.datapoints.format;var M=m,E=m,S=b,w=b;for(s=0;s<r.length;s+=l)if(null!=r[s])for(i=0;i<l;++i)c=r[s+i],(u=g[i])&&!1!==u.autoscale&&c!=h&&c!=-h&&(u.x&&(c<M&&(M=c),c>S&&(S=c)),u.y&&(c<E&&(E=c),c>w&&(w=c)));if(n.bars.show){var T;switch(n.bars.align){case"left":T=0;break;case"right":T=-n.bars.barWidth;break;default:T=-n.bars.barWidth/2}n.bars.horizontal?(E+=T,w+=T+n.bars.barWidth):(M+=T,S+=T+n.bars.barWidth)}j(n.xaxis,M,S),j(n.yaxis,E,w)}e.each(k(),(function(e,t){t.datamin==m&&(t.datamin=null),t.datamax==b&&(t.datamax=null)}))}()}function y(e,t){var s=e[t+"axis"];return"object"==typeof s&&(s=s.n),"number"!=typeof s&&(s=1),s}function k(){return e.grep(g.concat(m),(function(e){return e}))}function M(e){var t,s,a={};for(t=0;t<g.length;++t)(s=g[t])&&s.used&&(a["x"+s.n]=s.c2p(e.left));for(t=0;t<m.length;++t)(s=m[t])&&s.used&&(a["y"+s.n]=s.c2p(e.top));return void 0!==a.x1&&(a.x=a.x1),void 0!==a.y1&&(a.y=a.y1),a}function E(t,s){return t[s-1]||(t[s-1]={n:s,direction:t==g?"x":"y",options:e.extend(!0,{},t==g?r.xaxis:r.yaxis)}),t[s-1]}function S(){D&&clearTimeout(D),u.unbind("mousemove",z),u.unbind("mouseleave",R),u.unbind("click",A),O(x.shutdown,[u])}function w(t){var s=t.labelWidth,a=t.labelHeight,i=t.options.position,n="x"===t.direction,o=t.options.tickLength,c=r.grid.axisMargin,u=r.grid.labelMargin,d=!0,p=!0,h=!0,j=!1;e.each(n?g:m,(function(e,s){s&&(s.show||s.reserveSpace)&&(s===t?j=!0:s.options.position===i&&(j?p=!1:d=!1),j||(h=!1))})),p&&(c=0),null==o&&(o=h?"full":5),isNaN(+o)||(u+=+o),n?(a+=u,"bottom"==i?(b.bottom+=a+c,t.box={top:l.height-b.bottom,height:a}):(t.box={top:b.top+c,height:a},b.top+=a+c)):(s+=u,"left"==i?(t.box={left:b.left+c,width:s},b.left+=s+c):(b.right+=s+c,t.box={left:l.width-b.right,width:s})),t.position=i,t.tickLength=o,t.box.padding=u,t.innermost=d}function T(){var s,a=k(),i=r.grid.show;for(var n in b){var c=r.grid.margin||0;b[n]="number"==typeof c?c:c[n]||0}for(var n in O(x.processOffset,[b]),b)"object"==typeof r.grid.borderWidth?b[n]+=i?r.grid.borderWidth[n]:0:b[n]+=i?r.grid.borderWidth:0;if(e.each(a,(function(e,t){var s=t.options;t.show=null==s.show?t.used:s.show,t.reserveSpace=null==s.reserveSpace?t.show:s.reserveSpace,function(e){var t=e.options,s=+(null!=t.min?t.min:e.datamin),a=+(null!=t.max?t.max:e.datamax),i=a-s;if(0==i){var n=0==a?1:.01;null==t.min&&(s-=n),null!=t.max&&null==t.min||(a+=n)}else{var o=t.autoscaleMargin;null!=o&&(null==t.min&&(s-=i*o)<0&&null!=e.datamin&&e.datamin>=0&&(s=0),null==t.max&&(a+=i*o)>0&&null!=e.datamax&&e.datamax<=0&&(a=0))}e.min=s,e.max=a}(t)})),i){var u=e.grep(a,(function(e){return e.show||e.reserveSpace}));for(e.each(u,(function(t,s){!function(t){var s,a=t.options;s="number"==typeof a.ticks&&a.ticks>0?a.ticks:.3*Math.sqrt("x"==t.direction?l.width:l.height);var i=(t.max-t.min)/s,n=-Math.floor(Math.log(i)/Math.LN10),o=a.tickDecimals;null!=o&&n>o&&(n=o);var r,c=Math.pow(10,-n),u=i/c;if(u<1.5?r=1:u<3?(r=2,u>2.25&&(null==o||n+1<=o)&&(r=2.5,++n)):r=u<7.5?5:10,r*=c,null!=a.minTickSize&&r<a.minTickSize&&(r=a.minTickSize),t.delta=i,t.tickDecimals=Math.max(0,null!=o?o:n),t.tickSize=a.tickSize||r,"time"==a.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,s,a,i=[],n=(s=e.min,(a=e.tickSize)*Math.floor(s/a)),o=0,r=Number.NaN;do{t=r,r=n+o*e.tickSize,i.push(r),++o}while(r<e.max&&r!=t);return i},t.tickFormatter=function(e,t){var s=t.tickDecimals?Math.pow(10,t.tickDecimals):1,a=""+Math.round(e*s)/s;if(null!=t.tickDecimals){var i=a.indexOf("."),n=-1==i?0:a.length-i-1;if(n<t.tickDecimals)return(n?a:a+".")+(""+s).substr(1,t.tickDecimals-n)}return a}),e.isFunction(a.tickFormatter)&&(t.tickFormatter=function(e,t){return""+a.tickFormatter(e,t)}),null!=a.alignTicksWithAxis){var d=("x"==t.direction?g:m)[a.alignTicksWithAxis-1];if(d&&d.used&&d!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==a.min&&(t.min=Math.min(t.min,p[0])),null==a.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,s,a=[];for(s=0;s<d.ticks.length;++s)t=(d.ticks[s].v-d.min)/(d.max-d.min),t=e.min+t*(e.max-e.min),a.push(t);return a},!t.mode&&null==a.tickDecimals){var b=Math.max(0,1-Math.floor(Math.log(t.delta)/Math.LN10)),h=t.tickGenerator(t);h.length>1&&/\..*0$/.test((h[1]-h[0]).toFixed(b))||(t.tickDecimals=b)}}}}(s),function(t){var s,a,i=t.options.ticks,n=[];for(null==i||"number"==typeof i&&i>0?n=t.tickGenerator(t):i&&(n=e.isFunction(i)?i(t):i),t.ticks=[],s=0;s<n.length;++s){var o=null,r=n[s];"object"==typeof r?(a=+r[0],r.length>1&&(o=r[1])):a=+r,null==o&&(o=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:o})}}(s),function(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}(s,s.ticks),function(e){for(var t=e.options,s=e.ticks||[],a=t.labelWidth||0,i=t.labelHeight||0,n=a||("x"==e.direction?Math.floor(l.width/(s.length||1)):null),o=e.direction+"Axis "+e.direction+e.n+"Axis",r="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+o,c=t.font||"flot-tick-label tickLabel",u=0;u<s.length;++u){var d=s[u];if(d.label){var p=l.getTextInfo(r,d.label,c,null,n);a=Math.max(a,p.width),i=Math.max(i,p.height)}}e.labelWidth=t.labelWidth||a,e.labelHeight=t.labelHeight||i}(s)})),s=u.length-1;s>=0;--s)w(u[s]);!function(){var t,s=r.grid.minBorderMargin;if(null==s)for(s=0,t=0;t<o.length;++t)s=Math.max(s,2*(o[t].points.radius+o[t].points.lineWidth/2));var a={left:s,right:s,top:s,bottom:s};e.each(k(),(function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(a.left=Math.max(a.left,t.labelWidth/2),a.right=Math.max(a.right,t.labelWidth/2)):(a.bottom=Math.max(a.bottom,t.labelHeight/2),a.top=Math.max(a.top,t.labelHeight/2)))})),b.left=Math.ceil(Math.max(a.left,b.left)),b.right=Math.ceil(Math.max(a.right,b.right)),b.top=Math.ceil(Math.max(a.top,b.top)),b.bottom=Math.ceil(Math.max(a.bottom,b.bottom))}(),e.each(u,(function(e,t){!function(e){"x"==e.direction?(e.box.left=b.left-e.labelWidth/2,e.box.width=l.width-b.left-b.right+e.labelWidth):(e.box.top=b.top-e.labelHeight/2,e.box.height=l.height-b.bottom-b.top+e.labelHeight)}(t)}))}h=l.width-b.left-b.right,j=l.height-b.bottom-b.top,e.each(a,(function(e,t){!function(e){function t(e){return e}var s,a,i=e.options.transform||t,n=e.options.inverseTransform;"x"==e.direction?(s=e.scale=h/Math.abs(i(e.max)-i(e.min)),a=Math.min(i(e.max),i(e.min))):(s=-(s=e.scale=j/Math.abs(i(e.max)-i(e.min))),a=Math.max(i(e.max),i(e.min))),e.p2c=i==t?function(e){return(e-a)*s}:function(e){return(i(e)-a)*s},e.c2p=n?function(e){return n(a+e/s)}:function(e){return a+e/s}}(t)})),i&&e.each(k(),(function(e,t){var s,a,i,n,o,r=t.box,c=t.direction+"Axis "+t.direction+t.n+"Axis",u="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+c,d=t.options.font||"flot-tick-label tickLabel";if(l.removeText(u),t.show&&0!=t.ticks.length)for(var p=0;p<t.ticks.length;++p)!(s=t.ticks[p]).label||s.v<t.min||s.v>t.max||("x"==t.direction?(n="center",a=b.left+t.p2c(s.v),"bottom"==t.position?i=r.top+r.padding:(i=r.top+r.height-r.padding,o="bottom")):(o="middle",i=b.top+t.p2c(s.v),"left"==t.position?(a=r.left+r.width-r.padding,n="right"):a=r.left+r.padding),l.addText(u,a,i,s.label,d,null,null,n,o))})),function(){if(null!=r.legend.container?e(r.legend.container).html(""):t.find(".legend").remove(),r.legend.show){for(var s,a,i=[],n=[],l=!1,c=r.legend.labelFormatter,u=0;u<o.length;++u)(s=o[u]).label&&(a=c?c(s.label,s):s.label)&&n.push({label:a,color:s.color});if(r.legend.sorted)if(e.isFunction(r.legend.sorted))n.sort(r.legend.sorted);else if("reverse"==r.legend.sorted)n.reverse();else{var d="descending"!=r.legend.sorted;n.sort((function(e,t){return e.label==t.label?0:e.label<t.label!=d?1:-1}))}for(u=0;u<n.length;++u){var p=n[u];u%r.legend.noColumns==0&&(l&&i.push("</tr>"),i.push("<tr>"),l=!0),i.push('<td class="legendColorBox"><div style="border:1px solid '+r.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+p.color+';overflow:hidden"></div></div></td><td class="legendLabel" data-test-subj="flotLegendLabel">'+p.label+"</td>")}if(l&&i.push("</tr>"),0!=i.length){var g='<table style="font-size:smaller;color:'+r.grid.color+'">'+i.join("")+"</table>";if(null!=r.legend.container)e(r.legend.container).html(g);else{var m="",h=r.legend.position,j=r.legend.margin;null==j[0]&&(j=[j,j]),"n"==h.charAt(0)?m+="top:"+(j[1]+b.top)+"px;":"s"==h.charAt(0)&&(m+="bottom:"+(j[1]+b.bottom)+"px;"),"e"==h.charAt(1)?m+="right:"+(j[0]+b.right)+"px;":"w"==h.charAt(1)&&(m+="left:"+(j[0]+b.left)+"px;");var x=e('<div class="legend">'+g.replace('style="','style="position:absolute;'+m+";")+"</div>").appendTo(t);if(0!=r.legend.backgroundOpacity){var f=r.legend.backgroundColor;null==f&&((f=(f=r.grid.backgroundColor)&&"string"==typeof f?e.color.parse(f):e.color.extract(x,"background-color")).a=1,f=f.toString());var O=x.children();e('<div style="position:absolute;width:'+O.width()+"px;height:"+O.height()+"px;"+m+"background-color:"+f+';"> </div>').prependTo(x).css("opacity",r.legend.backgroundOpacity)}}}}}()}function _(){l.clear(),O(x.drawBackground,[d]);var e=r.grid;e.show&&e.backgroundColor&&(d.save(),d.translate(b.left,b.top),d.fillStyle=K(r.grid.backgroundColor,j,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,h,j),d.restore()),e.show&&!e.aboveData&&I();for(var t=0;t<o.length;++t)O(x.drawSeries,[d,o[t]]),L(o[t]);O(x.draw,[d]),e.show&&e.aboveData&&I(),l.render(),V()}function C(e,t){for(var s,a,i,n,o=k(),r=0;r<o.length;++r)if((s=o[r]).direction==t&&(e[n=t+s.n+"axis"]||1!=s.n||(n=t+"axis"),e[n])){a=e[n].from,i=e[n].to;break}if(e[n]||(s="x"==t?g[0]:m[0],a=e[t+"1"],i=e[t+"2"]),null!=a&&null!=i&&a>i){var l=a;a=i,i=l}return{from:a,to:i,axis:s}}function I(){var t,s,a,i;d.save(),d.translate(b.left,b.top);var n=r.grid.markings;if(n)for(e.isFunction(n)&&((s=f.getAxes()).xmin=s.xaxis.min,s.xmax=s.xaxis.max,s.ymin=s.yaxis.min,s.ymax=s.yaxis.max,n=n(s)),t=0;t<n.length;++t){var o=n[t],l=C(o,"x"),c=C(o,"y");if(null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),null==c.from&&(c.from=c.axis.min),null==c.to&&(c.to=c.axis.max),!(l.to<l.axis.min||l.from>l.axis.max||c.to<c.axis.min||c.from>c.axis.max)){l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max);var u=l.from===l.to,p=c.from===c.to;if(!u||!p)if(l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c.from=Math.floor(c.axis.p2c(c.from)),c.to=Math.floor(c.axis.p2c(c.to)),u||p){var g=o.lineWidth||r.grid.markingsLineWidth,m=g%2?.5:0;d.beginPath(),d.strokeStyle=o.color||r.grid.markingsColor,d.lineWidth=g,u?(d.moveTo(l.to+m,c.from),d.lineTo(l.to+m,c.to)):(d.moveTo(l.from,c.to+m),d.lineTo(l.to,c.to+m)),d.stroke()}else d.fillStyle=o.color||r.grid.markingsColor,d.fillRect(l.from,c.to,l.to-l.from,c.from-c.to)}}s=k(),a=r.grid.borderWidth;for(var x=0;x<s.length;++x){var O,v,y,M,E=s[x],S=E.box,w=E.tickLength;if(E.show&&0!=E.ticks.length){for(d.lineWidth=1,"x"==E.direction?(O=0,v="full"==w?"top"==E.position?0:j:S.top-b.top+("top"==E.position?S.height:0)):(v=0,O="full"==w?"left"==E.position?0:h:S.left-b.left+("left"==E.position?S.width:0)),E.innermost||(d.strokeStyle=E.options.color,d.beginPath(),y=M=0,"x"==E.direction?y=h+1:M=j+1,1==d.lineWidth&&("x"==E.direction?v=Math.floor(v)+.5:O=Math.floor(O)+.5),d.moveTo(O,v),d.lineTo(O+y,v+M),d.stroke()),d.strokeStyle=E.options.tickColor,d.beginPath(),t=0;t<E.ticks.length;++t){var T=E.ticks[t].v;y=M=0,isNaN(T)||T<E.min||T>E.max||"full"==w&&("object"==typeof a&&a[E.position]>0||a>0)&&(T==E.min||T==E.max)||("x"==E.direction?(O=E.p2c(T),M="full"==w?-j:w,"top"==E.position&&(M=-M)):(v=E.p2c(T),y="full"==w?-h:w,"left"==E.position&&(y=-y)),1==d.lineWidth&&("x"==E.direction?O=Math.floor(O)+.5:v=Math.floor(v)+.5),d.moveTo(O,v),d.lineTo(O+y,v+M))}d.stroke()}}a&&(i=r.grid.borderColor,"object"==typeof a||"object"==typeof i?("object"!=typeof a&&(a={top:a,right:a,bottom:a,left:a}),"object"!=typeof i&&(i={top:i,right:i,bottom:i,left:i}),a.top>0&&(d.strokeStyle=i.top,d.lineWidth=a.top,d.beginPath(),d.moveTo(0-a.left,0-a.top/2),d.lineTo(h,0-a.top/2),d.stroke()),a.right>0&&(d.strokeStyle=i.right,d.lineWidth=a.right,d.beginPath(),d.moveTo(h+a.right/2,0-a.top),d.lineTo(h+a.right/2,j),d.stroke()),a.bottom>0&&(d.strokeStyle=i.bottom,d.lineWidth=a.bottom,d.beginPath(),d.moveTo(h+a.right,j+a.bottom/2),d.lineTo(0,j+a.bottom/2),d.stroke()),a.left>0&&(d.strokeStyle=i.left,d.lineWidth=a.left,d.beginPath(),d.moveTo(0-a.left/2,j+a.bottom),d.lineTo(0-a.left/2,0),d.stroke())):(d.lineWidth=a,d.strokeStyle=r.grid.borderColor,d.strokeRect(-a/2,-a/2,h+a,j+a))),d.restore()}function L(e){e.lines.show&&function(e){function t(e,t,s,a,i){var n=e.points,o=e.pointsize,r=null,l=null;d.beginPath();for(var c=o;c<n.length;c+=o){var u=n[c-o],p=n[c-o+1],g=n[c],m=n[c+1];if(null!=u&&null!=g){if(p<=m&&p<i.min){if(m<i.min)continue;u=(i.min-p)/(m-p)*(g-u)+u,p=i.min}else if(m<=p&&m<i.min){if(p<i.min)continue;g=(i.min-p)/(m-p)*(g-u)+u,m=i.min}if(p>=m&&p>i.max){if(m>i.max)continue;u=(i.max-p)/(m-p)*(g-u)+u,p=i.max}else if(m>=p&&m>i.max){if(p>i.max)continue;g=(i.max-p)/(m-p)*(g-u)+u,m=i.max}if(u<=g&&u<a.min){if(g<a.min)continue;p=(a.min-u)/(g-u)*(m-p)+p,u=a.min}else if(g<=u&&g<a.min){if(u<a.min)continue;m=(a.min-u)/(g-u)*(m-p)+p,g=a.min}if(u>=g&&u>a.max){if(g>a.max)continue;p=(a.max-u)/(g-u)*(m-p)+p,u=a.max}else if(g>=u&&g>a.max){if(u>a.max)continue;m=(a.max-u)/(g-u)*(m-p)+p,g=a.max}u==r&&p==l||d.moveTo(a.p2c(u)+t,i.p2c(p)+s),r=g,l=m,d.lineTo(a.p2c(g)+t,i.p2c(m)+s)}}d.stroke()}d.save(),d.translate(b.left,b.top),d.lineJoin="round";var s=e.lines.lineWidth,a=e.shadowSize;if(s>0&&a>0){d.lineWidth=a,d.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;t(e.datapoints,Math.sin(i)*(s/2+a/2),Math.cos(i)*(s/2+a/2),e.xaxis,e.yaxis),d.lineWidth=a/2,t(e.datapoints,Math.sin(i)*(s/2+a/4),Math.cos(i)*(s/2+a/4),e.xaxis,e.yaxis)}d.lineWidth=s,d.strokeStyle=e.color;var n=F(e.lines,e.color,0,j);n&&(d.fillStyle=n,function(e,t,s){for(var a=e.points,i=e.pointsize,n=Math.min(Math.max(0,s.min),s.max),o=0,r=!1,l=1,c=0,u=0;!(i>0&&o>a.length+i);){var p=a[(o+=i)-i],g=a[o-i+l],m=a[o],b=a[o+l];if(r){if(i>0&&null!=p&&null==m){u=o,i=-i,l=2;continue}if(i<0&&o==c+i){d.fill(),r=!1,l=1,o=c=u+(i=-i);continue}}if(null!=p&&null!=m){if(p<=m&&p<t.min){if(m<t.min)continue;g=(t.min-p)/(m-p)*(b-g)+g,p=t.min}else if(m<=p&&m<t.min){if(p<t.min)continue;b=(t.min-p)/(m-p)*(b-g)+g,m=t.min}if(p>=m&&p>t.max){if(m>t.max)continue;g=(t.max-p)/(m-p)*(b-g)+g,p=t.max}else if(m>=p&&m>t.max){if(p>t.max)continue;b=(t.max-p)/(m-p)*(b-g)+g,m=t.max}if(r||(d.beginPath(),d.moveTo(t.p2c(p),s.p2c(n)),r=!0),g>=s.max&&b>=s.max)d.lineTo(t.p2c(p),s.p2c(s.max)),d.lineTo(t.p2c(m),s.p2c(s.max));else if(g<=s.min&&b<=s.min)d.lineTo(t.p2c(p),s.p2c(s.min)),d.lineTo(t.p2c(m),s.p2c(s.min));else{var h=p,j=m;g<=b&&g<s.min&&b>=s.min?(p=(s.min-g)/(b-g)*(m-p)+p,g=s.min):b<=g&&b<s.min&&g>=s.min&&(m=(s.min-g)/(b-g)*(m-p)+p,b=s.min),g>=b&&g>s.max&&b<=s.max?(p=(s.max-g)/(b-g)*(m-p)+p,g=s.max):b>=g&&b>s.max&&g<=s.max&&(m=(s.max-g)/(b-g)*(m-p)+p,b=s.max),p!=h&&d.lineTo(t.p2c(h),s.p2c(g)),d.lineTo(t.p2c(p),s.p2c(g)),d.lineTo(t.p2c(m),s.p2c(b)),m!=j&&(d.lineTo(t.p2c(m),s.p2c(b)),d.lineTo(t.p2c(j),s.p2c(b)))}}}}(e.datapoints,e.xaxis,e.yaxis)),s>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis),d.restore()}(e),e.bars.show&&function(e){var t;switch(d.save(),d.translate(b.left,b.top),d.lineWidth=e.bars.lineWidth,d.strokeStyle=e.color,e.bars.align){case"left":t=0;break;case"right":t=-e.bars.barWidth;break;default:t=-e.bars.barWidth/2}var s=e.bars.fill?function(t,s){return F(e.bars,e.color,t,s)}:null;(function(t,s,a,i,n,o){for(var r=t.points,l=t.pointsize,c=0;c<r.length;c+=l)null!=r[c]&&P(r[c],r[c+1],r[c+2],s,a,i,n,o,d,e.bars.horizontal,e.bars.lineWidth)})(e.datapoints,t,t+e.bars.barWidth,s,e.xaxis,e.yaxis),d.restore()}(e),e.points.show&&function(e){function t(e,t,s,a,i,n,o,r){for(var l=e.points,c=e.pointsize,u=0;u<l.length;u+=c){var p=l[u],g=l[u+1];null==p||p<n.min||p>n.max||g<o.min||g>o.max||(d.beginPath(),p=n.p2c(p),g=o.p2c(g)+a,"circle"==r?d.arc(p,g,t,0,i?Math.PI:2*Math.PI,!1):r(d,p,g,t,i),d.closePath(),s&&(d.fillStyle=s,d.fill()),d.stroke())}}d.save(),d.translate(b.left,b.top);var s=e.points.lineWidth,a=e.shadowSize,i=e.points.radius,n=e.points.symbol;if(0==s&&(s=1e-4),s>0&&a>0){var o=a/2;d.lineWidth=o,d.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,i,null,o+o/2,!0,e.xaxis,e.yaxis,n),d.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,i,null,o/2,!0,e.xaxis,e.yaxis,n)}d.lineWidth=s,d.strokeStyle=e.color,t(e.datapoints,i,F(e.points,e.color),0,!1,e.xaxis,e.yaxis,n),d.restore()}(e)}function P(e,t,s,a,i,n,o,r,l,c,u){var d,p,g,m,b,h,j,x,f;c?(x=h=j=!0,b=!1,m=t+a,g=t+i,(p=e)<(d=s)&&(f=p,p=d,d=f,b=!0,h=!1)):(b=h=j=!0,x=!1,d=e+a,p=e+i,(m=t)<(g=s)&&(f=m,m=g,g=f,x=!0,j=!1)),p<o.min||d>o.max||m<r.min||g>r.max||(d<o.min&&(d=o.min,b=!1),p>o.max&&(p=o.max,h=!1),g<r.min&&(g=r.min,x=!1),m>r.max&&(m=r.max,j=!1),d=o.p2c(d),g=r.p2c(g),p=o.p2c(p),m=r.p2c(m),n&&(l.fillStyle=n(g,m),l.fillRect(d,m,p-d,g-m)),u>0&&(b||h||j||x)&&(l.beginPath(),l.moveTo(d,g),b?l.lineTo(d,m):l.moveTo(d,m),j?l.lineTo(p,m):l.moveTo(p,m),h?l.lineTo(p,g):l.moveTo(p,g),x?l.lineTo(d,g):l.moveTo(d,g),l.stroke()))}function F(t,s,a,i){var n=t.fill;if(!n)return null;if(t.fillColor)return K(t.fillColor,a,i,s);var o=e.color.parse(s);return o.a="number"==typeof n?n:.4,o.normalize(),o.toString()}f.setData=v,f.setupGrid=T,f.draw=_,f.getPlaceholder=function(){return t},f.getCanvas=function(){return l.element},f.getPlotOffset=function(){return b},f.width=function(){return h},f.height=function(){return j},f.offset=function(){var e=u.offset();return e.left+=b.left,e.top+=b.top,e},f.getData=function(){return o},f.getAxes=function(){var t={};return e.each(g.concat(m),(function(e,s){s&&(t[s.direction+(1!=s.n?s.n:"")+"axis"]=s)})),t},f.getXAxes=function(){return g},f.getYAxes=function(){return m},f.c2p=M,f.p2c=function(e){var t,s,a,i={};for(t=0;t<g.length;++t)if((s=g[t])&&s.used&&(null==e[a="x"+s.n]&&1==s.n&&(a="x"),null!=e[a])){i.left=s.p2c(e[a]);break}for(t=0;t<m.length;++t)if((s=m[t])&&s.used&&(null==e[a="y"+s.n]&&1==s.n&&(a="y"),null!=e[a])){i.top=s.p2c(e[a]);break}return i},f.getOptions=function(){return r},f.highlight=$,f.unhighlight=H,f.triggerRedrawOverlay=V,f.pointOffset=function(e){return{left:parseInt(g[y(e,"x")-1].p2c(+e.x)+b.left,10),top:parseInt(m[y(e,"y")-1].p2c(+e.y)+b.top,10)}},f.shutdown=S,f.destroy=function(){S(),t.removeData("plot").empty(),o=[],r=null,l=null,c=null,u=null,d=null,p=null,g=[],m=[],x=null,N=[],f=null},f.resize=function(){var e=t.width(),s=t.height();l.resize(e,s),c.resize(e,s)},f.hooks=x,function(){for(var t={Canvas:s},a=0;a<n.length;++a){var i=n[a];i.init(f,t),i.options&&e.extend(!0,r,i.options)}}(),function(s){e.extend(!0,r,s),s&&s.colors&&(r.colors=s.colors),null==r.xaxis.color&&(r.xaxis.color=e.color.parse(r.grid.color).scale("a",.22).toString()),null==r.yaxis.color&&(r.yaxis.color=e.color.parse(r.grid.color).scale("a",.22).toString()),null==r.xaxis.tickColor&&(r.xaxis.tickColor=r.grid.tickColor||r.xaxis.color),null==r.yaxis.tickColor&&(r.yaxis.tickColor=r.grid.tickColor||r.yaxis.color),null==r.grid.borderColor&&(r.grid.borderColor=r.grid.color),null==r.grid.tickColor&&(r.grid.tickColor=e.color.parse(r.grid.color).scale("a",.22).toString());var a,i,n,o=t.css("font-size"),l=o?+o.replace("px",""):13,c={style:t.css("font-style"),size:Math.round(.8*l),variant:t.css("font-variant"),weight:t.css("font-weight"),family:t.css("font-family")};for(n=r.xaxes.length||1,a=0;a<n;++a)(i=r.xaxes[a])&&!i.tickColor&&(i.tickColor=i.color),i=e.extend(!0,{},r.xaxis,i),r.xaxes[a]=i,i.font&&(i.font=e.extend({},c,i.font),i.font.color||(i.font.color=i.color),i.font.lineHeight||(i.font.lineHeight=Math.round(1.15*i.font.size)));for(n=r.yaxes.length||1,a=0;a<n;++a)(i=r.yaxes[a])&&!i.tickColor&&(i.tickColor=i.color),i=e.extend(!0,{},r.yaxis,i),r.yaxes[a]=i,i.font&&(i.font=e.extend({},c,i.font),i.font.color||(i.font.color=i.color),i.font.lineHeight||(i.font.lineHeight=Math.round(1.15*i.font.size)));for(r.xaxis.noTicks&&null==r.xaxis.ticks&&(r.xaxis.ticks=r.xaxis.noTicks),r.yaxis.noTicks&&null==r.yaxis.ticks&&(r.yaxis.ticks=r.yaxis.noTicks),r.x2axis&&(r.xaxes[1]=e.extend(!0,{},r.xaxis,r.x2axis),r.xaxes[1].position="top",null==r.x2axis.min&&(r.xaxes[1].min=null),null==r.x2axis.max&&(r.xaxes[1].max=null)),r.y2axis&&(r.yaxes[1]=e.extend(!0,{},r.yaxis,r.y2axis),r.yaxes[1].position="right",null==r.y2axis.min&&(r.yaxes[1].min=null),null==r.y2axis.max&&(r.yaxes[1].max=null)),r.grid.coloredAreas&&(r.grid.markings=r.grid.coloredAreas),r.grid.coloredAreasColor&&(r.grid.markingsColor=r.grid.coloredAreasColor),r.lines&&e.extend(!0,r.series.lines,r.lines),r.points&&e.extend(!0,r.series.points,r.points),r.bars&&e.extend(!0,r.series.bars,r.bars),null!=r.shadowSize&&(r.series.shadowSize=r.shadowSize),null!=r.highlightColor&&(r.series.highlightColor=r.highlightColor),a=0;a<r.xaxes.length;++a)E(g,a+1).options=r.xaxes[a];for(a=0;a<r.yaxes.length;++a)E(m,a+1).options=r.yaxes[a];for(var u in x)r.hooks[u]&&r.hooks[u].length&&(x[u]=x[u].concat(r.hooks[u]));O(x.processOptions,[r])}(i),function(){t.css("padding",0).children().filter((function(){return!e(this).hasClass("flot-overlay")&&!e(this).hasClass("flot-base")})).remove(),"static"==t.css("position")&&t.css("position","relative"),l=new s("flot-base",t),c=new s("flot-overlay",t),d=l.context,p=c.context,u=e(c.element).unbind();var a=t.data("plot");a&&(a.shutdown(),c.clear()),t.data("plot",f)}(),v(a),T(),_(),r.grid.hoverable&&(u.mousemove(z),u.bind("mouseleave",R)),r.grid.clickable&&u.click(A),O(x.bindEvents,[u]);var N=[],D=null;function z(e){r.grid.hoverable&&B("plothover",e,(function(e){return 0!=e.hoverable}))}function R(e){r.grid.hoverable&&B("plothover",e,(function(e){return!1}))}function A(e){B("plotclick",e,(function(e){return 0!=e.clickable}))}function B(e,s,a){var i=u.offset(),n=s.pageX-i.left-b.left,l=s.pageY-i.top-b.top,c=M({left:n,top:l});c.pageX=s.pageX,c.pageY=s.pageY;var d=function(e,t,s){var a,i,n,l=r.grid.mouseActiveRadius,c=l*l+1,u=null;for(a=o.length-1;a>=0;--a)if(s(o[a])){var d=o[a],p=d.xaxis,g=d.yaxis,m=d.datapoints.points,b=p.c2p(e),h=g.c2p(t),j=l/p.scale,x=l/g.scale;if(n=d.datapoints.pointsize,p.options.inverseTransform&&(j=Number.MAX_VALUE),g.options.inverseTransform&&(x=Number.MAX_VALUE),d.lines.show||d.points.show)for(i=0;i<m.length;i+=n){var f=m[i],O=m[i+1];if(null!=f&&!(f-b>j||f-b<-j||O-h>x||O-h<-x)){var v=Math.abs(p.p2c(f)-e),y=Math.abs(g.p2c(O)-t),k=v*v+y*y;k<c&&(c=k,u=[a,i/n])}}if(d.bars.show&&!u){var M,E;switch(d.bars.align){case"left":M=0;break;case"right":M=-d.bars.barWidth;break;default:M=-d.bars.barWidth/2}for(E=M+d.bars.barWidth,i=0;i<m.length;i+=n){f=m[i],O=m[i+1];var S=m[i+2];null!=f&&(o[a].bars.horizontal?b<=Math.max(S,f)&&b>=Math.min(S,f)&&h>=O+M&&h<=O+E:b>=f+M&&b<=f+E&&h>=Math.min(S,O)&&h<=Math.max(S,O))&&(u=[a,i/n])}}}return u?(a=u[0],i=u[1],n=o[a].datapoints.pointsize,{datapoint:o[a].datapoints.points.slice(i*n,(i+1)*n),dataIndex:i,series:o[a],seriesIndex:a}):null}(n,l,a);if(d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+i.left+b.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+i.top+b.top,10)),r.grid.autoHighlight){for(var p=0;p<N.length;++p){var g=N[p];g.auto!=e||d&&g.series==d.series&&g.point[0]==d.datapoint[0]&&g.point[1]==d.datapoint[1]||H(g.series,g.point)}d&&$(d.series,d.datapoint,e)}t.trigger(e,[c,d])}function V(){var e=r.interaction.redrawOverlayInterval;-1!=e?D||(D=setTimeout(U,e)):U()}function U(){var e,t;for(D=null,p.save(),c.clear(),p.translate(b.left,b.top),e=0;e<N.length;++e)(t=N[e]).series.bars.show?G(t.series,t.point):q(t.series,t.point);p.restore(),O(x.drawOverlay,[p])}function $(e,t,s){if("number"==typeof e&&(e=o[e]),"number"==typeof t){var a=e.datapoints.pointsize;t=e.datapoints.points.slice(a*t,a*(t+1))}var i=W(e,t);-1==i?(N.push({series:e,point:t,auto:s}),V()):s||(N[i].auto=!1)}function H(e,t){if(null==e&&null==t)return N=[],void V();if("number"==typeof e&&(e=o[e]),"number"==typeof t){var s=e.datapoints.pointsize;t=e.datapoints.points.slice(s*t,s*(t+1))}var a=W(e,t);-1!=a&&(N.splice(a,1),V())}function W(e,t){for(var s=0;s<N.length;++s){var a=N[s];if(a.series==e&&a.point[0]==t[0]&&a.point[1]==t[1])return s}return-1}function q(t,s){var a=s[0],i=s[1],n=t.xaxis,o=t.yaxis,r="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(a<n.min||a>n.max||i<o.min||i>o.max)){var l=t.points.radius+t.points.lineWidth/2;p.lineWidth=l,p.strokeStyle=r;var c=1.5*l;a=n.p2c(a),i=o.p2c(i),p.beginPath(),"circle"==t.points.symbol?p.arc(a,i,c,0,2*Math.PI,!1):t.points.symbol(p,a,i,c,!1),p.closePath(),p.stroke()}}function G(t,s){var a,i="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),n=i;switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth,p.strokeStyle=i,P(s[0],s[1],s[2]||0,a,a+t.bars.barWidth,(function(){return n}),t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function K(t,s,a,i){if("string"==typeof t)return t;for(var n=d.createLinearGradient(0,a,0,s),o=0,r=t.colors.length;o<r;++o){var l=t.colors[o];if("string"!=typeof l){var c=e.color.parse(i);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}n.addColorStop(o/(r-1),l)}return n}}e.fn.detach||(e.fn.detach=function(){return this.each((function(){this.parentNode&&this.parentNode.removeChild(this)}))}),s.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var s=this.element,a=this.context,i=this.pixelRatio;this.width!=e&&(s.width=e*i,s.style.width=e+"px",this.width=e),this.height!=t&&(s.height=t*i,s.style.height=t+"px",this.height=t),a.restore(),a.save(),a.scale(i,i)},s.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},s.prototype.render=function(){var e=this._textCache;for(var s in e)if(t.call(e,s)){var a=this.getTextLayer(s),i=e[s];for(var n in a.hide(),i)if(t.call(i,n)){var o=i[n];for(var r in o)if(t.call(o,r)){for(var l,c=o[r].positions,u=0;l=c[u];u++)l.active?l.rendered||(a.append(l.element),l.rendered=!0):(c.splice(u--,1),l.rendered&&l.element.detach());0==c.length&&delete o[r]}}a.show()}},s.prototype.getTextLayer=function(t){var s=this.text[t];return null==s&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},s.prototype.getTextInfo=function(t,s,a,i,n){var o,r,l,c;if(s=""+s,o="object"==typeof a?a.style+" "+a.variant+" "+a.weight+" "+a.size+"px/"+a.lineHeight+"px "+a.family:a,null==(r=this._textCache[t])&&(r=this._textCache[t]={}),null==(l=r[o])&&(l=r[o]={}),null==(c=l[s])){var u=e("<div></div>").text(s).css({position:"absolute","max-width":n,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof a?u.css({font:o,color:a.color}):"string"==typeof a&&u.addClass(a),c=l[s]={width:u.outerWidth(!0),height:u.outerHeight(!0),element:u,positions:[]},u.detach()}return c},s.prototype.addText=function(e,t,s,a,i,n,o,r,l){var c=this.getTextInfo(e,a,i,n,o),u=c.positions;"center"==r?t-=c.width/2:"right"==r&&(t-=c.width),"middle"==l?s-=c.height/2:"bottom"==l&&(s-=c.height);for(var d,p=0;d=u[p];p++)if(d.x==t&&d.y==s)return void(d.active=!0);d={active:!0,rendered:!1,element:u.length?c.element.clone():c.element,x:t,y:s},u.push(d),d.element.css({top:Math.round(s),left:Math.round(t),"text-align":r})},s.prototype.removeText=function(e,s,a,i,n,o){if(null==i){var r=this._textCache[e];if(null!=r)for(var l in r)if(t.call(r,l)){var c=r[l];for(var u in c)if(t.call(c,u))for(var d=c[u].positions,p=0;g=d[p];p++)g.active=!1}}else{var g;for(d=this.getTextInfo(e,i,n,o).positions,p=0;g=d[p];p++)g.x==s&&g.y==a&&(g.active=!1)}},e.plot=function(t,s,i){return new a(e(t),s,i,e.plot.plugins)},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,s){return this.each((function(){e.plot(this,t,s)}))}}(jQuery)},function(e,t){var s,a,i,n,o;s=jQuery,o=Object.prototype.hasOwnProperty,s.plot.plugins.push({init:function(e,t){var r=t.Canvas;null==a&&(i=r.prototype.getTextInfo,n=r.prototype.addText,a=r.prototype.render),r.prototype.render=function(){if(!e.getOptions().canvas)return a.call(this);var t=this.context,s=this._textCache;for(var i in t.save(),t.textBaseline="middle",s)if(o.call(s,i)){var n=s[i];for(var r in n)if(o.call(n,r)){var l=n[r],c=!0;for(var u in l)if(o.call(l,u)){var d=l[u],p=d.positions,g=d.lines;c&&(t.fillStyle=d.font.color,t.font=d.font.definition,c=!1);for(var m,b=0;m=p[b];b++)if(m.active)for(var h,j=0;h=m.lines[j];j++)t.fillText(g[j].text,h[0],h[1]);else p.splice(b--,1);0==p.length&&delete l[u]}}}t.restore()},r.prototype.getTextInfo=function(t,a,n,o,r){if(!e.getOptions().canvas)return i.call(this,t,a,n,o,r);var l,c,u,d;if(a=""+a,l="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px "+n.family:n,null==(c=this._textCache[t])&&(c=this._textCache[t]={}),null==(u=c[l])&&(u=c[l]={}),null==(d=u[a])){var p=this.context;if("object"!=typeof n){var g=s("<div>&nbsp;</div>").css("position","absolute").addClass("string"==typeof n?n:null).appendTo(this.getTextLayer(t));(n={lineHeight:g.height(),style:g.css("font-style"),variant:g.css("font-variant"),weight:g.css("font-weight"),family:g.css("font-family"),color:g.css("color")}).size=g.css("line-height",1).height(),g.remove()}l=n.style+" "+n.variant+" "+n.weight+" "+n.size+"px "+n.family,d=u[a]={width:0,height:0,positions:[],lines:[],font:{definition:l,color:n.color}},p.save(),p.font=l;for(var m=(a+"").replace(/<br ?\/?>|\r\n|\r/g,"\n").split("\n"),b=0;b<m.length;++b){var h=m[b],j=p.measureText(h);d.width=Math.max(j.width,d.width),d.height+=n.lineHeight,d.lines.push({text:h,width:j.width,height:n.lineHeight})}p.restore()}return d},r.prototype.addText=function(t,s,a,i,o,r,l,c,u){if(!e.getOptions().canvas)return n.call(this,t,s,a,i,o,r,l,c,u);var d,p=this.getTextInfo(t,i,o,r,l),g=p.positions,m=p.lines;a+=p.height/m.length/2,a="middle"==u?Math.round(a-p.height/2):"bottom"==u?Math.round(a-p.height):Math.round(a),window.opera&&window.opera.version().split(".")[0]<12&&(a-=2);for(var b,h=0;b=g[h];h++)if(b.x==s&&b.y==a)return void(b.active=!0);for(b={active:!0,lines:[],x:s,y:a},g.push(b),h=0;d=m[h];h++)"center"==c?b.lines.push([Math.round(s-d.width/2),a]):"right"==c?b.lines.push([Math.round(s-d.width),a]):b.lines.push([Math.round(s),a]),a+=d.height}},options:{canvas:!0},name:"canvas",version:"1.0"})},function(e,t){!function(e){function t(e,t,s){var a={square:function(e,t,s,a,i){var n=a*Math.sqrt(Math.PI)/2;e.rect(t-n,s-n,n+n,n+n)},diamond:function(e,t,s,a,i){var n=a*Math.sqrt(Math.PI/2);e.moveTo(t-n,s),e.lineTo(t,s-n),e.lineTo(t+n,s),e.lineTo(t,s+n),e.lineTo(t-n,s)},triangle:function(e,t,s,a,i){var n=a*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3)),o=n*Math.sin(Math.PI/3);e.moveTo(t-n/2,s+o/2),e.lineTo(t+n/2,s+o/2),i||(e.lineTo(t,s-o/2),e.lineTo(t-n/2,s+o/2))},cross:function(e,t,s,a,i){var n=a*Math.sqrt(Math.PI)/2;e.moveTo(t-n,s-n),e.lineTo(t+n,s+n),e.moveTo(t-n,s+n),e.lineTo(t+n,s-n)}},i=t.points.symbol;a[i]&&(t.points.symbol=a[i])}jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push(t)},name:"symbols",version:"1.0"})}()},function(e,t){jQuery.plot.plugins.push({init:function(e){var t={x:-1,y:-1,locked:!1};function s(s){t.locked||-1!=t.x&&(t.x=-1,e.triggerRedrawOverlay())}function a(s){if(!t.locked)if(e.getSelection&&e.getSelection())t.x=-1;else{var a=e.offset();t.x=Math.max(0,Math.min(s.pageX-a.left,e.width())),t.y=Math.max(0,Math.min(s.pageY-a.top,e.height())),e.triggerRedrawOverlay()}}e.setCrosshair=function(s){if(s){var a=e.p2c(s);t.x=Math.max(0,Math.min(a.left,e.width())),t.y=Math.max(0,Math.min(a.top,e.height()))}else t.x=-1;e.triggerRedrawOverlay()},e.clearCrosshair=e.setCrosshair,e.lockCrosshair=function(s){s&&e.setCrosshair(s),t.locked=!0},e.unlockCrosshair=function(){t.locked=!1},e.hooks.bindEvents.push((function(e,t){e.getOptions().crosshair.mode&&(t.mouseout(s),t.mousemove(a))})),e.hooks.drawOverlay.push((function(e,s){var a=e.getOptions().crosshair;if(a.mode){var i=e.getPlotOffset();if(s.save(),s.translate(i.left,i.top),-1!=t.x){var n=e.getOptions().crosshair.lineWidth%2?.5:0;if(s.strokeStyle=a.color,s.lineWidth=a.lineWidth,s.lineJoin="round",s.beginPath(),-1!=a.mode.indexOf("x")){var o=Math.floor(t.x)+n;s.moveTo(o,0),s.lineTo(o,e.height())}if(-1!=a.mode.indexOf("y")){var r=Math.floor(t.y)+n;s.moveTo(0,r),s.lineTo(e.width(),r)}s.stroke()}s.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mouseout",s),t.unbind("mousemove",a)}))},options:{crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}},name:"crosshair",version:"1.0"})},function(e,t){var s;(s=jQuery).plot.plugins.push({init:function(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},a={},i=null;function n(s){t.active&&(d(s),e.getPlaceholder().trigger("plotselecting",[r()]))}function o(n){1==n.which&&(document.body.focus(),void 0!==document.onselectstart&&null==a.onselectstart&&(a.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==a.ondrag&&(a.ondrag=document.ondrag,document.ondrag=function(){return!1}),u(t.first,n),t.active=!0,i=function(s){!function(s){i=null,void 0!==document.onselectstart&&(document.onselectstart=a.onselectstart),void 0!==document.ondrag&&(document.ondrag=a.ondrag),t.active=!1,d(s),m()?l():(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null]))}(s)},s(document).one("mouseup",i))}function r(){if(!m())return null;if(!t.show)return null;var a={},i=t.first,n=t.second;return s.each(e.getAxes(),(function(e,t){if(t.used){var s=t.c2p(i[t.direction]),o=t.c2p(n[t.direction]);a[e]={from:Math.min(s,o),to:Math.max(s,o)}}})),a}function l(){var t=r();e.getPlaceholder().trigger("plotselected",[t]),t.xaxis&&t.yaxis&&e.getPlaceholder().trigger("selected",[{x1:t.xaxis.from,y1:t.yaxis.from,x2:t.xaxis.to,y2:t.yaxis.to}])}function c(e,t,s){return t<e?e:t>s?s:t}function u(s,a){var i=e.getOptions(),n=e.getPlaceholder().offset(),o=e.getPlotOffset();s.x=c(0,a.pageX-n.left-o.left,e.width()),s.y=c(0,a.pageY-n.top-o.top,e.height()),"y"==i.selection.mode&&(s.x=s==t.first?0:e.width()),"x"==i.selection.mode&&(s.y=s==t.first?0:e.height())}function d(s){null!=s.pageX&&(u(t.second,s),m()?(t.show=!0,e.triggerRedrawOverlay()):p(!0))}function p(s){t.show&&(t.show=!1,e.triggerRedrawOverlay(),s||e.getPlaceholder().trigger("plotunselected",[]))}function g(t,s){var a,i,n,o,r=e.getAxes();for(var l in r)if((a=r[l]).direction==s&&(t[o=s+a.n+"axis"]||1!=a.n||(o=s+"axis"),t[o])){i=t[o].from,n=t[o].to;break}if(t[o]||(a="x"==s?e.getXAxes()[0]:e.getYAxes()[0],i=t[s+"1"],n=t[s+"2"]),null!=i&&null!=n&&i>n){var c=i;i=n,n=c}return{from:i,to:n,axis:a}}function m(){var s=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=s&&Math.abs(t.second.y-t.first.y)>=s}e.clearSelection=p,e.setSelection=function(s,a){var i,n=e.getOptions();"y"==n.selection.mode?(t.first.x=0,t.second.x=e.width()):(i=g(s,"x"),t.first.x=i.axis.p2c(i.from),t.second.x=i.axis.p2c(i.to)),"x"==n.selection.mode?(t.first.y=0,t.second.y=e.height()):(i=g(s,"y"),t.first.y=i.axis.p2c(i.from),t.second.y=i.axis.p2c(i.to)),t.show=!0,e.triggerRedrawOverlay(),!a&&m()&&l()},e.getSelection=r,e.hooks.bindEvents.push((function(e,t){null!=e.getOptions().selection.mode&&(t.mousemove(n),t.mousedown(o))})),e.hooks.drawOverlay.push((function(e,a){if(t.show&&m()){var i=e.getPlotOffset(),n=e.getOptions();a.save(),a.translate(i.left,i.top);var o=s.color.parse(n.selection.color);a.strokeStyle=o.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=n.selection.shape,a.fillStyle=o.scale("a",.4).toString();var r=Math.min(t.first.x,t.second.x)+.5,l=Math.min(t.first.y,t.second.y)+.5,c=Math.abs(t.second.x-t.first.x)-1,u=Math.abs(t.second.y-t.first.y)-1;a.fillRect(r,l,c,u),a.strokeRect(r,l,c,u),a.restore()}})),e.hooks.shutdown.push((function(e,t){t.unbind("mousemove",n),t.unbind("mousedown",o),i&&s(document).unbind("mouseup",i)}))},options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})},function(e,t){jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,s){if(null!=t.stack&&!1!==t.stack){var a=function(e,t){for(var s=null,a=0;a<t.length&&e!=t[a];++a)t[a].stack==e.stack&&(s=t[a]);return s}(t,e.getData());if(a){for(var i,n,o,r,l,c,u,d,p=s.pointsize,g=s.points,m=a.datapoints.pointsize,b=a.datapoints.points,h=[],j=t.lines.show,x=t.bars.horizontal,f=p>2&&(x?s.format[2].x:s.format[2].y),O=j&&t.lines.steps,v=!0,y=x?1:0,k=x?0:1,M=0,E=0;!(M>=g.length);){if(u=h.length,null==g[M]){for(d=0;d<p;++d)h.push(g[M+d]);M+=p}else if(E>=b.length){if(!j)for(d=0;d<p;++d)h.push(g[M+d]);M+=p}else if(null==b[E]){for(d=0;d<p;++d)h.push(null);v=!0,E+=m}else{if(i=g[M+y],n=g[M+k],r=b[E+y],l=b[E+k],c=0,i==r){for(d=0;d<p;++d)h.push(g[M+d]);h[u+k]+=l,c=l,M+=p,E+=m}else if(i>r){if(j&&M>0&&null!=g[M-p]){for(o=n+(g[M-p+k]-n)*(r-i)/(g[M-p+y]-i),h.push(r),h.push(o+l),d=2;d<p;++d)h.push(g[M+d]);c=l}E+=m}else{if(v&&j){M+=p;continue}for(d=0;d<p;++d)h.push(g[M+d]);j&&E>0&&null!=b[E-m]&&(c=l+(b[E-m+k]-l)*(i-r)/(b[E-m+y]-r)),h[u+k]+=c,M+=p}v=!1,u!=h.length&&f&&(h[u+2]+=c)}if(O&&u!=h.length&&u>0&&null!=h[u]&&h[u]!=h[u-p]&&h[u+1]!=h[u-p+1]){for(d=0;d<p;++d)h[u+p+d]=h[u+d];h[u+1]=h[u-p+1]}}s.points=h}}}))},options:{series:{stack:null}},name:"stack",version:"1.2"})},function(e,t){var s;(s=jQuery).plot.plugins.push({init:function(e){function t(e,t,a,i,n){var o,r,l,c,u,d=a.pointsize,p=s.extend({},t);p.datapoints={points:[],pointsize:d,format:a.format},p.label=null,p.color=n,p.threshold=null,p.originSeries=t,p.data=[];var g,m=a.points,b=t.lines.show,h=[],j=[];for(o=0;o<m.length;o+=d){if(r=m[o],u=c,c=(l=m[o+1])<i?h:j,b&&u!=c&&null!=r&&o>0&&null!=m[o-d]){var x=r+(i-l)*(r-m[o-d])/(l-m[o-d+1]);for(u.push(x),u.push(i),g=2;g<d;++g)u.push(m[o+g]);for(c.push(null),c.push(null),g=2;g<d;++g)c.push(m[o+g]);for(c.push(x),c.push(i),g=2;g<d;++g)c.push(m[o+g])}for(c.push(r),c.push(l),g=2;g<d;++g)c.push(m[o+g])}if(a.points=j,p.datapoints.points=h,p.datapoints.points.length>0){var f=s.inArray(t,e.getData());e.getData().splice(f+1,0,p)}}e.hooks.processDatapoints.push((function(e,a,i){a.threshold&&(a.threshold instanceof Array?(a.threshold.sort((function(e,t){return e.below-t.below})),s(a.threshold).each((function(s,n){t(e,a,i,n.below,n.color)}))):t(e,a,i,a.threshold.below,a.threshold.color))}))},options:{series:{threshold:null}},name:"threshold",version:"1.2"})},function(e,t){jQuery.plot.plugins.push({init:function(e){e.hooks.processDatapoints.push((function(e,t,s){if(null!=t.fillBetween){var a=function(e,t){var s;for(s=0;s<t.length;++s)if(t[s].id===e.fillBetween)return t[s];return"number"==typeof e.fillBetween?e.fillBetween<0||e.fillBetween>=t.length?null:t[e.fillBetween]:null}(t,e.getData());if(a){for(var i,n,o,r,l,c,u,d,p=s.pointsize,g=s.points,m=a.datapoints.pointsize,b=a.datapoints.points,h=[],j=t.lines.show,x=p>2&&s.format[2].y,f=j&&t.lines.steps,O=!0,v=0,y=0;!(v>=g.length);){if(u=h.length,null==g[v]){for(d=0;d<p;++d)h.push(g[v+d]);v+=p}else if(y>=b.length){if(!j)for(d=0;d<p;++d)h.push(g[v+d]);v+=p}else if(null==b[y]){for(d=0;d<p;++d)h.push(null);O=!0,y+=m}else{if(i=g[v],n=g[v+1],r=b[y],l=b[y+1],c=0,i===r){for(d=0;d<p;++d)h.push(g[v+d]);c=l,v+=p,y+=m}else if(i>r){if(j&&v>0&&null!=g[v-p]){for(o=n+(g[v-p+1]-n)*(r-i)/(g[v-p]-i),h.push(r),h.push(o),d=2;d<p;++d)h.push(g[v+d]);c=l}y+=m}else{if(O&&j){v+=p;continue}for(d=0;d<p;++d)h.push(g[v+d]);j&&y>0&&null!=b[y-m]&&(c=l+(b[y-m+1]-l)*(i-r)/(b[y-m]-r)),v+=p}O=!1,u!==h.length&&x&&(h[u+2]=c)}if(f&&u!==h.length&&u>0&&null!==h[u]&&h[u]!==h[u-p]&&h[u+1]!==h[u-p+1]){for(d=0;d<p;++d)h[u+p+d]=h[u+d];h[u+1]=h[u-p+1]}}s.points=h}}}))},options:{series:{fillBetween:null}},name:"fillbetween",version:"1.0"})},function(e,t){!function(e){function t(e){return Math.log(e)/Math.LN10}e.plot.plugins.push({init:function(s){s.hooks.processOptions.push((function(s){e.each(s.getAxes(),(function(e,s){"log"===s.options.mode&&(s.tickGenerator=function(e){var s,a,i,n=[],o=(s=e.max,Math.ceil(t(s))),r=function(e){return Math.floor(t(e))}(e.min),l=Number.NaN,c=0;if((null===e.min||e.min<=0)&&(r=0,e.min=.6),o<=r)n=[1e-6,1e-5,1e-4,.001,.01,.1,1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];else if(t(e.max)-t(e.datamin)<1){var u;a=e.min,r=(i=e.tickSize)*Math.floor(a/i);do{u=l,l=r+c*e.tickSize,n.push(l),++c}while(l<e.max&&l!==u)}else{for(;c<=o-r;c++)l=Math.pow(10,r+c),n.push(l);var d=n.length;if(o-r<6)for(var p=1;p<2*d-1;p+=2)l=5*n[p-1],n.splice(p,0,l)}return n},s.tickFormatter=function(e,s){var a;if(t(s.max)-t(s.datamin)<1){var i=s.tickDecimals?Math.pow(10,s.tickDecimals):1;if(a=""+Math.round(e*i)/i,null!==s.tickDecimals){var n=a.indexOf("."),o=-1===n?0:a.length-n-1;if(o<s.tickDecimals)return(o?a:a+".")+(""+i).substr(1,s.tickDecimals-o)}}else{var r="",l=parseFloat(e).toExponential(0),c=function(e){for(var t=["","","","","","","","","",""],s="",a=""+e,i=0;i<a.length;i++)"+"===a[i]||(s+="-"===a[i]?"":t[a[i]]);return s}(l.slice(2));"1"!==l[0]&&(r=l[0]+"x"),a=r+"10"+c}return a})}))}))},name:"log",version:"0.9"})}(jQuery)},function(e,t){!function(e){function t(){var e=document.createElement("div");return void 0!==e.style.MozTransition||void 0!==e.style.OTransition||void 0!==e.style.webkitTransition||void 0!==e.style.transition}function s(e,t,s,a,i){this.axisName=e,this.position=t,this.padding=s,this.plot=a,this.opts=i,this.width=0,this.height=0}function a(e,t,a,i,n){s.prototype.constructor.call(this,e,t,a,i,n)}function i(e,t,a,i,n){s.prototype.constructor.call(this,e,t,a,i,n),this.elem=null}function n(e,t,s,a,n){i.prototype.constructor.call(this,e,t,s,a,n)}function o(e,t,s,a,i){n.prototype.constructor.call(this,e,t,s,a,i),this.requiresResize=!1}s.prototype.cleanup=function(){},a.prototype=new s,a.prototype.constructor=a,a.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif"),this.opts.axisLabelFontSizePixels,this.padding,this.opts.axisLabelFontSizePixels,this.padding,"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},a.prototype.draw=function(e){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var t=this.plot.getCanvas().getContext("2d");t.save(),t.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,t.fillStyle=this.opts.axisLabelColour;var s,a,i=t.measureText(this.opts.axisLabel).width,n=this.opts.axisLabelFontSizePixels,o=0;"top"==this.position?(s=e.left+e.width/2-i/2,a=e.top+.72*n):"bottom"==this.position?(s=e.left+e.width/2-i/2,a=e.top+e.height-.72*n):"left"==this.position?(s=e.left+.72*n,a=e.height/2+e.top+i/2,o=-Math.PI/2):"right"==this.position&&(s=e.left+e.width-.72*n,a=e.height/2+e.top-i/2,o=Math.PI/2),t.translate(s,a),t.rotate(o),t.fillText(this.opts.axisLabel,0,0),t.restore()},i.prototype=new s,i.prototype.constructor=i,i.prototype.calculateSize=function(){var t=e('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(t),this.labelWidth=t.outerWidth(!0),this.labelHeight=t.outerHeight(!0),t.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},i.prototype.cleanup=function(){this.elem&&this.elem.remove()},i.prototype.draw=function(t){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=e('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",t.left+t.width/2-this.labelWidth/2+"px"),this.elem.css("top",t.top+"px")):"bottom"==this.position?(this.elem.css("left",t.left+t.width/2-this.labelWidth/2+"px"),this.elem.css("top",t.top+t.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",t.top+t.height/2-this.labelHeight/2+"px"),this.elem.css("left",t.left+"px")):"right"==this.position&&(this.elem.css("top",t.top+t.height/2-this.labelHeight/2+"px"),this.elem.css("left",t.left+t.width-this.labelWidth+"px"))},n.prototype=new i,n.prototype.constructor=n,n.prototype.calculateSize=function(){i.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},n.prototype.transforms=function(e,t,s){var a={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=t||0!=s){var i=" translate("+t+"px, "+s+"px)";a["-moz-transform"]+=i,a["-webkit-transform"]+=i,a["-o-transform"]+=i,a["-ms-transform"]+=i}if(0!=e){var n=" rotate("+e+"deg)";a["-moz-transform"]+=n,a["-webkit-transform"]+=n,a["-o-transform"]+=n,a["-ms-transform"]+=n}var o="top: 0; left: 0; ";for(var r in a)a[r]&&(o+=r+":"+a[r]+";");return o+";"},n.prototype.calculateOffsets=function(e){var t={x:0,y:0,degrees:0};return"bottom"==this.position?(t.x=e.left+e.width/2-this.labelWidth/2,t.y=e.top+e.height-this.labelHeight):"top"==this.position?(t.x=e.left+e.width/2-this.labelWidth/2,t.y=e.top):"left"==this.position?(t.degrees=-90,t.x=e.left-this.labelWidth/2+this.labelHeight/2,t.y=e.height/2+e.top):"right"==this.position&&(t.degrees=90,t.x=e.left+e.width-this.labelWidth/2-this.labelHeight/2,t.y=e.height/2+e.top),t.x=Math.round(t.x),t.y=Math.round(t.y),t},n.prototype.draw=function(t){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var s=this.calculateOffsets(t);this.elem=e('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(s.degrees,s.x,s.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},o.prototype=new n,o.prototype.constructor=o,o.prototype.transforms=function(e,t,s){var a="";if(0!=e){for(var i=e/90;i<0;)i+=4;a+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+i+"); ",this.requiresResize="right"==this.position}return 0!=t&&(a+="left: "+t+"px; "),0!=s&&(a+="top: "+s+"px; "),a},o.prototype.calculateOffsets=function(e){var t=n.prototype.calculateOffsets.call(this,e);return"top"==this.position?t.y=e.top+1:"left"==this.position?(t.x=e.left,t.y=e.height/2+e.top-this.labelWidth/2):"right"==this.position&&(t.x=e.left+e.width-this.labelHeight,t.y=e.height/2+e.top-this.labelWidth/2),t},o.prototype.draw=function(e){n.prototype.draw.call(this,e),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},e.plot.plugins.push({init:function(s){s.hooks.processOptions.push((function(s,r){if(r.axisLabels.show){var l=!1,c={};s.hooks.draw.push((function(s,r){var u=!1;l?(l=!1,e.each(s.getAxes(),(function(e,t){var a=t.options||s.getOptions()[e];a&&a.axisLabel&&t.show&&c[e].draw(t.box)}))):(e.each(s.getAxes(),(function(e,r){var l=r.options||s.getOptions()[e];if(e in c&&(r.labelHeight=r.labelHeight-c[e].height,r.labelWidth=r.labelWidth-c[e].width,l.labelHeight=r.labelHeight,l.labelWidth=r.labelWidth,c[e].cleanup(),delete c[e]),l&&l.axisLabel&&r.show){u=!0;var d=null;if(l.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)d=!l.axisLabelUseHtml&&(t()||document.createElement("canvas").getContext&&"function"==typeof document.createElement("canvas").getContext("2d").fillText||l.axisLabelUseCanvas)?l.axisLabelUseCanvas||!t()?a:n:i;else{var p=navigator.userAgent;null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(p)&&(rv=parseFloat(RegExp.$1)),d=rv>=9&&!l.axisLabelUseCanvas&&!l.axisLabelUseHtml?n:l.axisLabelUseCanvas||l.axisLabelUseHtml?l.axisLabelUseCanvas?a:i:o}var g=void 0===l.axisLabelPadding?2:l.axisLabelPadding;c[e]=new d(e,r.position,g,s,l),c[e].calculateSize(),l.labelHeight=r.labelHeight+c[e].height,l.labelWidth=r.labelWidth+c[e].width}})),u&&(l=!0,s.setupGrid(),s.draw()))}))}}))},options:{axisLabels:{show:!0}},name:"axisLabels",version:"2.0"})}(jQuery)},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(70);case"v8light":return s(72)}},function(e,t,s){var a=s(41),i=s(71);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(73);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monSummaryStatusNoWrap{margin-left:12px;margin-right:12px}.monSummaryStatusNoWrap .monSummaryStatusNoWrap__stat p{max-width:100%;overflow:hidden!important;text-overflow:ellipsis!important;white-space:nowrap!important}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(75);case"v8light":return s(77)}},function(e,t,s){var a=s(41),i=s(76);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monRhythmChart__legendItem{align-items:center;color:#dfe5ef;cursor:pointer;display:flex;flex-direction:row;font-size:12px}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{align-items:center;display:flex;flex-direction:row;overflow:hidden;white-space:nowrap}.monRhythmChart__legendValue{margin-left:4px;overflow:hidden;white-space:nowrap}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(78);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monRhythmChart__legendItem{align-items:center;color:#343741;cursor:pointer;display:flex;flex-direction:row;font-size:12px}.monRhythmChart__legendItem-isDisabled{opacity:.5}.monRhythmChart__legendHorizontal{margin-top:4px}.monRhythmChart__legendLabel{align-items:center;display:flex;flex-direction:row;overflow:hidden;white-space:nowrap}.monRhythmChart__legendValue{margin-left:4px;overflow:hidden;white-space:nowrap}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(80);case"v8light":return s(82)}},function(e,t,s){var a=s(41),i=s(81);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monRhythmChart{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__content{bottom:0;display:flex;flex:1 0 auto;left:0;position:absolute;right:0;top:0}.monRhythmChart__visualization{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__visualization>div{height:100%;min-width:1px;width:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(83);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monRhythmChart{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__content{bottom:0;display:flex;flex:1 0 auto;left:0;position:absolute;right:0;top:0}.monRhythmChart__visualization{display:flex;flex:1 0 auto;flex-direction:column;position:relative}.monRhythmChart__visualization>div{height:100%;min-width:1px;width:100%}.monRhythmChart__visualization div{-webkit-user-select:none;user-select:none}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(85);case"v8light":return s(87)}},function(e,t,s){var a=s(41),i=s(86);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{word-wrap:break-word;font-size:12px;padding:4px;text-align:left;white-space:normal}.monChart__tooltipLabel{font-weight:700}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(88);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monChart__tooltipLabel,.monChart__tooltipValue{word-wrap:break-word;font-size:12px;padding:4px;text-align:left;white-space:normal}.monChart__tooltipLabel{font-weight:700}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(90);case"v8light":return s(92)}},function(e,t,s){var a=s(41),i=s(91);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{padding-right:12px;visibility:hidden}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(93);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monRhythmChart__wrapper .monRhythmChart__zoom{padding-right:12px;visibility:hidden}.monRhythmChart__wrapper:hover .monRhythmChart__zoom{visibility:visible}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(95);case"v8light":return s(97)}},function(e,t,s){var a=s(41),i=s(96);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monAssigned__children,.monCluster .monUnassigned__children{padding-top:24px}.monCluster .monChild{align-self:center;background-color:#25262e;border:1px solid #535966;border-radius:4px;float:left;margin:8px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #7dded8}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #f86b63}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #f3d371}.monCluster .monChild .monChild__title{align-items:center;color:#fff;display:flex;flex-direction:row;font-size:12px;padding:4px 8px;text-align:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;display:inline-block;font-size:12px;padding:4px 8px;position:relative}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(98);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monClusterTitle{font-size:22px;margin:0}.monCluster .monUnassigned{vertical-align:middle;width:160px}.monCluster .monAssigned__children,.monCluster .monUnassigned__children{padding-top:24px}.monCluster .monChild{align-self:center;background-color:#f5f7fa;border:1px solid #98a2b3;border-radius:4px;float:left;margin:8px;padding:2px 0}.monCluster .monChild.monChild--index{border-left:4px solid #00bfb3}.monCluster .monChild.monChild--index.monChild--danger{border-left:4px solid #bd271e}.monCluster .monChild.monChild--index.monChild--warning{border-left:4px solid #fec514}.monCluster .monChild .monChild__title{align-items:center;color:#fff;display:flex;flex-direction:row;font-size:12px;padding:4px 8px;text-align:center}.monCluster .monChild.monClusterUnassigned .title{display:none}.monCluster th{text-align:left}.monCluster td:first-child{width:200px}.monCluster .monShard{align-self:center;display:inline-block;font-size:12px;padding:4px 8px;position:relative}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(100);case"v8light":return s(102)}},function(e,t,s){var a=s(41),i=s(101);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monElasticsearchIndicesTable__status{align-items:center;display:flex}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(103);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monElasticsearchIndicesTable__status{align-items:center;display:flex}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(105);case"v8light":return s(107)}},function(e,t,s){var a=s(41),i=s(106);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(108);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monitoringElasticsearchCcrListingTable .euiTableRow-isExpandedRow>.euiTableRowCell>.euiTableCellContent{padding:0}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(110);case"v8light":return s(112)}},function(e,t,s){var a=s(41),i=s(111);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#dfe5ef}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#98a2b3}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.1428571429rem;line-height:1.7142857143rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{color:#98a2b3;font-size:14px;font-size:1rem;line-height:1.7142857143rem}.monTableCell__number{font-size:22px;font-size:1.5714285714rem;line-height:2.2857142857rem}.monTableCell__splitNumber{font-size:16px;font-size:1.1428571429rem;line-height:1.7142857143rem}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(113);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monTableCell__clusterCellExpired,.monTableCell__offline{color:#343741}.monTableCell__clusterCellLicense{font-size:14px}.monTableCell__clusterCellExpiration{color:#69707d}.monTableCell__name,.monTableCell__status{font-size:16px;font-size:1.1428571429rem;line-height:1.7142857143rem}.monTableCell__status{overflow-x:hidden;white-space:nowrap}.monTableCell__transportAddress{color:#69707d;font-size:14px;font-size:1rem;line-height:1.7142857143rem}.monTableCell__number{font-size:22px;font-size:1.5714285714rem;line-height:2.2857142857rem}.monTableCell__splitNumber{font-size:16px;font-size:1.1428571429rem;line-height:1.7142857143rem}",""]),e.exports=t},function(e,t,s){const a=s(115);e.exports=(e,t)=>new a(e,t).major},function(e,t,s){const a=s(48),{MAX_LENGTH:i,MAX_SAFE_INTEGER:n}=s(49),{safeRe:o,t:r}=s(117),l=s(118),{compareIdentifiers:c}=s(119);class SemVer{constructor(e,t){if(t=l(t),e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const s=e.trim().match(t.loose?o[r.LOOSE]:o[r.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof SemVer)){if("string"==typeof e&&e===this.version)return 0;e=new SemVer(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof SemVer||(e=new SemVer(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof SemVer||(e=new SemVer(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const s=this.prerelease[t],i=e.prerelease[t];if(a("prerelease compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}compareBuild(e){e instanceof SemVer||(e=new SemVer(e,this.options));let t=0;do{const s=this.build[t],i=e.build[t];if(a("build compare",t,s,i),void 0===s&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===s)return-1;if(s!==i)return c(s,i)}while(++t)}inc(e,t,s){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(s)?1:0;if(!t&&!1===s)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let a=this.prerelease.length;for(;--a>=0;)"number"==typeof this.prerelease[a]&&(this.prerelease[a]++,a=-2);if(-1===a){if(t===this.prerelease.join(".")&&!1===s)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let a=[t,e];!1===s&&(a=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=SemVer},function(e,t,s){e.exports=s(10)(675)},function(e,t,s){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=s(49),o=s(48),r=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const p="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",n],[p,i]],m=(e,t,s)=>{const a=(e=>{for(const[t,s]of g)e=e.split(`${t}*`).join(`${t}{0,${s}}`).split(`${t}+`).join(`${t}{1,${s}}`);return e})(t),i=d++;o(e,i,t),u[e]=i,c[i]=t,r[i]=new RegExp(t,s?"g":void 0),l[i]=new RegExp(a,s?"g":void 0)};m("NUMERICIDENTIFIER","0|[1-9]\\d*"),m("NUMERICIDENTIFIERLOOSE","\\d+"),m("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),m("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),m("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),m("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),m("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),m("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),m("BUILDIDENTIFIER",`${p}+`),m("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),m("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),m("FULL",`^${c[u.FULLPLAIN]}$`),m("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),m("LOOSE",`^${c[u.LOOSEPLAIN]}$`),m("GTLT","((?:<|>)?=?)"),m("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),m("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),m("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),m("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),m("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),m("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),m("COERCEPLAIN",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?`),m("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),m("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?`+`(?:${c[u.BUILD]})?(?:$|[^\\d])`),m("COERCERTL",c[u.COERCE],!0),m("COERCERTLFULL",c[u.COERCEFULL],!0),m("LONETILDE","(?:~>?)"),m("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",m("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),m("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),m("LONECARET","(?:\\^)"),m("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",m("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),m("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),m("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),m("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),m("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",m("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),m("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),m("STAR","(<|>)?=?\\s*\\*"),m("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),m("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},function(e,t){const s=Object.freeze({loose:!0}),a=Object.freeze({});e.exports=e=>e?"object"!=typeof e?s:e:a},function(e,t){const s=/^[0-9]+$/,a=(e,t)=>{const a=s.test(e),i=s.test(t);return a&&i&&(e=+e,t=+t),e===t?0:a&&!i?-1:i&&!a?1:e<t?-1:1};e.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(121);case"v8light":return s(123)}},function(e,t,s){var a=s(41),i=s(122);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{background:#d4dae5b3;border-radius:6px;font-size:12px;font-weight:400;padding:4px;pointer-events:none}.monSparklineTooltip__xValue{color:#ffffffb3}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{color:#d4dae5b3;display:none;font-size:22px}.monSparklineTooltip__container{align-items:center;display:flex;flex-direction:row;justify-content:center;position:fixed;z-index:2000}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(124);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monSparkline{height:2em}.monSparklineTooltip{background:#343741b3;border-radius:6px;font-size:12px;font-weight:400;padding:4px;pointer-events:none}.monSparklineTooltip__xValue{color:#ffffffb3}.monSparklineTooltip__yValue{color:#fff}.monSparklineTooltip__caret{color:#343741b3;display:none;font-size:22px}.monSparklineTooltip__container{align-items:center;display:flex;flex-direction:row;justify-content:center;position:fixed;z-index:2000}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(126);case"v8light":return s(128)}},function(e,t,s){var a=s(41),i=s(127);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(129);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".lspvDetailDrawerSparklineContainer{width:7vw}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(131);case"v8light":return s(133)}},function(e,t,s){var a=s(41),i=s(132);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__queueMessage{color:#98a2b3;margin-left:24px}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(134);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__queueMessage{color:#69707d;margin-left:24px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(136);case"v8light":return s(138)}},function(e,t,s){var a=s(41),i=s(137);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(139);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__collapsibleStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(141);case"v8light":return s(143)}},function(e,t,s){var a=s(41),i=s(142);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width:768px)and (max-width:991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px!important}.monPipelineViewer__metric{padding-left:32px;text-align:left}}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(144);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__metric{text-align:right}.monPipelineViewer__metric--cpuTime{width:40px}.monPipelineViewer__metric--events,.monPipelineViewer__metric--eventsEmitted{width:160px}.monPipelineViewer__metric--eventMillis{width:80px}@media only screen and (min-width:768px)and (max-width:991px){.monPipelineViewer__metricFlexItem{margin-bottom:4px!important}.monPipelineViewer__metric{padding-left:32px;text-align:left}}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(146);case"v8light":return s(148)}},function(e,t,s){var a=s(41),i=s(147);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(149);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__plugin{margin-left:4px}.monPipelineViewer__pluginStatement{padding-left:12px}",""]),e.exports=t},function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(151);case"v8light":return s(153)}},function(e,t,s){var a=s(41),i=s(152);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__spaceContainer{align-self:stretch;background-color:#1d1e24;border-bottom:2px solid #1d1e24;display:flex}.monPipelineViewer__spacer{align-self:stretch;border-left:1px dashed #343741;margin-left:12px;width:12px}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{align-items:center;display:flex;min-height:32px;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(odd){background:#24252d}.monPipelineViewer__conditional{font-weight:700}@media only screen and (min-width:768px)and (max-width:991px){.monPipelineViewer__spacer{border:none}}",""]),e.exports=t},function(e,t,s){var a=s(41),i=s(154);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);a(i,{insert:"head",singleton:!1}),e.exports=i.locals||{}},function(e,t,s){(t=s(42)(!1)).push([e.i,".monPipelineViewer__spaceContainer{align-self:stretch;background-color:#fff;border-bottom:2px solid #fff;display:flex}.monPipelineViewer__spacer{align-self:stretch;border-left:1px dashed #d3dae6;margin-left:12px;width:12px}.monPipelineViewer__spacer:last-child{width:0}.monPipelineViewer__spacer:first-child{margin-left:23px}.monPipelineViewer__list .monPipelineViewer__listItem{align-items:center;display:flex;min-height:32px;padding-right:12px}.monPipelineViewer__list .monPipelineViewer__listItem:nth-child(odd){background:#f5f7fa}.monPipelineViewer__conditional{font-weight:700}@media only screen and (min-width:768px)and (max-width:991px){.monPipelineViewer__spacer{border:none}}",""]),e.exports=t},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(21),i=s(156),n=a.__importDefault(s(158));t.default=function(e,t){n.default(e,t,i.isDeepEqual)}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDeepEqual=t.off=t.on=t.isClient=void 0;var a=s(21).__importDefault(s(157));t.isClient="object"==typeof window,t.on=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.addEventListener.apply(e,t)},t.off=function(e){for(var t=[],s=1;s<arguments.length;s++)t[s-1]=arguments[s];return e.removeEventListener.apply(e,t)},t.isDeepEqual=a.default},function(e,t,s){"use strict";e.exports=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var a,i,n;if(Array.isArray(t)){if((a=t.length)!=s.length)return!1;for(i=a;0!=i--;)if(!e(t[i],s[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((a=(n=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(i=a;0!=i--;)if(!Object.prototype.hasOwnProperty.call(s,n[i]))return!1;for(i=a;0!=i--;){var o=n[i];if(!("_owner"===o&&t.$$typeof||e(t[o],s[o])))return!1}return!0}return t!=t&&s!=s}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(5);t.default=function(e,t,s){var i=a.useRef(void 0);i.current&&s(t,i.current)||(i.current=t),a.useEffect(e,i.current)}},,,,,,,,,,function(e,t,s){"use strict";s.r(t),s.d(t,"renderApp",(function(){return mr}));var a=s(17),i=s(3),n=s.n(i),o=s(5),r=s.n(o),l=s(32),c=s(55),u=s(45),d=s.n(u),p=s(33),g=s.n(p),m=s(7);const b="eui-global",h="eui-utilities",j={darkMode:!1};var x=s(2);const f=[m.euiStylisPrefixer],O=g()({key:"css",stylisPlugins:f,container:document.querySelector('meta[name="emotion"]')}),v=g()({key:b,stylisPlugins:f,container:document.querySelector(`meta[name="${b}"]`)}),y=g()({key:h,stylisPlugins:f,container:document.querySelector(`meta[name="${h}"]`)});O.compat=!0,v.compat=!0,y.compat=!0;const k={default:O,global:v,utility:y},M=({theme:{theme$:e},globalStyles:t,colorMode:s,modify:a,children:i})=>{const n=d()(e,j),r=Object(o.useMemo)((()=>(e=>e.darkMode?m.COLOR_MODES_STANDARD.dark:m.COLOR_MODES_STANDARD.light)(n)),[n]),l=s||r,c=!1!==t&&void 0;return Object(x.jsx)(m.EuiProvider,{cache:k,modify:a,colorMode:l,globalStyles:c,utilityClasses:c},i)},E=({children:e,i18n:t,...s})=>Object(l.useIsNestedEuiProvider)()?(Object(c.emitEuiProviderWarning)("KibanaRootContextProvider has likely been nested in this React tree, either by direct reference or by KibanaRenderContextProvider.  The result of this nesting is a nesting of EuiProvider, which has negative effects.  Check your React tree for nested Kibana context providers."),Object(x.jsx)(t.Context,null,e)):Object(x.jsx)(M,s,Object(x.jsx)(t.Context,null,e));var S=s(34);const w=({children:e,...t})=>Object(x.jsx)(E,n()({globalStyles:!1},t),Object(x.jsx)(S.KibanaErrorBoundaryProvider,{analytics:t.analytics},Object(x.jsx)(S.KibanaErrorBoundary,null,e)));var T=s(22),_=s.n(T),C=s(18),I=s(29);const L=({children:e,...t})=>Object(x.jsx)(C.Router,t,Object(x.jsx)(I.CompatRouter,null,e));var P=s(15),F=s.n(P);const N={services:{}},D=Object(o.createContext)(N);var z=s(155),R=s.n(z);const A=({children:e,component:t,render:s,...a})=>{const i=Object(o.useMemo)((()=>{if(t)return e=>Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(B,null),Object(x.jsx)(t,e))}),[t]);if(i)return Object(x.jsx)(C.Route,n()({},a,{component:i}));if(s||"function"==typeof e){const t="function"==typeof e?e:s;return Object(x.jsx)(C.Route,n()({},a,{render:e=>Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(B,null),t(e))}))}return Object(x.jsx)(C.Route,a,Object(x.jsx)(B,null),e)},B=()=>{const{executionContext:e}=Object(o.useContext)(D).services,t=Object(C.useRouteMatch)();return function(e,t){R()((()=>(null==e||e.set(t),()=>{null==e||e.clear()})),[t])}(e,{type:"application",page:t.path,id:Object.keys(t.params).length>0?JSON.stringify(t.params):void 0}),null},V=({legacySwitch:e=!0,children:t})=>{const s=Object(C.useRouteMatch)();return e?Object(x.jsx)(C.Switch,null,t):Object(x.jsx)(I.Routes,null,o.Children.map(t,(e=>{if(r.a.isValidElement(e)&&e.type===A){var a;const i=Object(P.replace)(null==e?void 0:e.props.path,s.url+"/",""),n="function"==typeof(null==e?void 0:e.props.children)?null==e?void 0:e.props.children:null==e?void 0:e.props.render;return Object(x.jsx)(I.Route,{path:i,element:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(B,null),(null==e||null===(a=e.props)||void 0===a?void 0:a.component)&&Object(x.jsx)(e.props.component,null)||n&&n()||t)})}return e})))};var U=s(1);const $=Object(o.createContext)({});var H=s(56),W=s.n(H),q=s(9),G=s.n(q),K=s(27),J=s(28),Y=s(23),Q=s(8);class url_state_GlobalState{constructor(e,t,s){G()(this,"stateSyncRef",void 0),G()(this,"stateContainer",void 0),G()(this,"stateStorage",void 0),G()(this,"stateContainerChangeSub",void 0),G()(this,"syncQueryStateWithUrlManager",void 0),G()(this,"timefilterRef",void 0),G()(this,"lastAssignedState",{}),this.timefilterRef=e.timefilter.timefilter;const a=Object(K.createHashHistory)();this.stateStorage=Object(Y.createKbnUrlStateStorage)({useHash:!1,history:a,...Object(Y.withNotifyOnErrors)(t)});const i=this.stateStorage.get("_g");this.stateContainer=Object(Y.createStateContainer)(i,{set:e=>(t,s)=>({...e,[t]:s})}),this.stateSyncRef=Object(Y.syncState)({storageKey:"_g",stateContainer:this.stateContainer,stateStorage:this.stateStorage}),this.stateContainerChangeSub=this.stateContainer.state$.subscribe((()=>{this.lastAssignedState=this.getState(),Q.a.isInitializated()&&Q.a.shims.breadcrumbs.update(),this.syncExternalState(s)})),this.syncQueryStateWithUrlManager=Object(J.syncQueryStateWithUrl)(e,this.stateStorage),this.stateSyncRef.start(),this.lastAssignedState=this.getState()}syncExternalState(e){const t=this.stateContainer.get();for(const s in t)({save:1,time:1,refreshInterval:1,filters:1})[s]||t[s]!==e[s]&&(e[s]=t[s])}setState(e){const t=this.getState(),s={...t,...e};if(e&&(a=s,i=t,JSON.stringify(a)===JSON.stringify(i)))return;var a,i;const n={...s,refreshInterval:this.timefilterRef.getRefreshInterval(),time:this.timefilterRef.getTime()};this.lastAssignedState=n,this.stateContainer.set(n)}getState(){const e={...this.lastAssignedState,...this.stateContainer.get()};delete e.filters;const{refreshInterval:t,time:s,...a}=e;return a||{}}destroy(){this.syncQueryStateWithUrlManager.stop(),this.stateContainerChangeSub.unsubscribe(),this.stateSyncRef.stop()}}const X=Object(o.createContext)({}),Z={pause:!1,value:1e4},ee=({uiSettings:e,query:t,toasts:s,children:a})=>{const i={},[n]=Object(o.useState)((()=>new url_state_GlobalState(t,s,i))),r=n.getState();for(const e in r)r.hasOwnProperty(e)&&(i[e]=r[e]);return i.save=()=>{const e={...i};delete e.save,n.setState(e)},((e,t)=>{if(t.isRefreshIntervalTouched()||!e.isDefault(J.UI_SETTINGS.TIMEPICKER_REFRESH_INTERVAL_DEFAULTS))return!1;const s=t.getRefreshInterval();return s.pause||0===s.value})(e,Q.a.shims.timefilter)&&(i.refreshInterval=Z,Q.a.shims.timefilter.setRefreshInterval(i.refreshInterval),i.save()),W()((()=>{n.destroy()})),Object(x.jsx)(X.Provider,{value:i},a)},te=r.a.createContext({});var se=s(0),ae=s(46),ie=s.n(ae);const ne=(e,t,s,a=!1)=>{const i={url:e,label:t,ignoreGlobalState:a};return s&&(i.testSubj=s),i};const[oe,re]=ie()((({history:e})=>{const t=Object(a.useKibana)().services.chrome,[s,i]=Object(o.useState)([]),n=Object(o.useCallback)((e=>{var s,a;if(!t)return;if(!e){var i;const s=null===(i=t.getBreadcrumbs$())||void 0===i?void 0:i.source;s&&s.value&&(e=s.value)}const n=location.hash.split("?")[1];null!==(s=e)&&void 0!==s&&s.length&&0===(null==n?void 0:n.indexOf("_g"))&&(null===(a=e[0].href)||void 0===a?void 0:a.split("?")[1])!==n&&(e.forEach((e=>{var t;const s=null===(t=e.href)||void 0===t?void 0:t.split("?")[0];s&&!e.ignoreGlobalState&&(e.href=`${s}?${n}`),delete e.ignoreGlobalState})),t.setBreadcrumbs(e.slice(0)))}),[t]),r=Object(o.useCallback)(((e,t)=>{const s=function(e,t){const s=se.i18n.translate("xpack.monitoring.breadcrumbs.clustersLabel",{defaultMessage:"Clusters"});let a=[ne("#/home",s,"breadcrumbClusters",!0)];return null!=t&&t.inOverview||!e||a.push(ne("#/overview",e)),null!=t&&t.inElasticsearch&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(ne("#/elasticsearch","Elasticsearch")),"indices"===e.name?t.push(ne("#/elasticsearch/indices",se.i18n.translate("xpack.monitoring.breadcrumbs.es.indicesLabel",{defaultMessage:"Indices"}),"breadcrumbEsIndices")):"nodes"===e.name?t.push(ne("#/elasticsearch/nodes",se.i18n.translate("xpack.monitoring.breadcrumbs.es.nodesLabel",{defaultMessage:"Nodes"}),"breadcrumbEsNodes")):"ml"===e.name?t.push(ne("#/elasticsearch/ml_jobs",se.i18n.translate("xpack.monitoring.breadcrumbs.es.jobsLabel",{defaultMessage:"Machine learning jobs"}))):"ccr_shard"===e.name&&t.push(ne("#/elasticsearch/ccr",se.i18n.translate("xpack.monitoring.breadcrumbs.es.ccrLabel",{defaultMessage:"CCR"}))),t.push(ne(null,e.instance))):t.push(ne(null,"Elasticsearch")),t}(t))),null!=t&&t.inKibana&&(a=a.concat(function(e){const t=[];return e.instance?(t.push(ne("#/kibana","Kibana")),t.push(ne("#/kibana/instances",se.i18n.translate("xpack.monitoring.breadcrumbs.kibana.instancesLabel",{defaultMessage:"Instances"}))),t.push(ne(null,e.instance))):t.push(ne(null,"Kibana")),t}(t))),null!=t&&t.inLogstash&&(a=a.concat(function(e){const t=se.i18n.translate("xpack.monitoring.breadcrumbs.logstashLabel",{defaultMessage:"Logstash"}),s=[];return e.instance?(s.push(ne("#/logstash",t)),"nodes"===e.name&&s.push(ne("#/logstash/nodes",se.i18n.translate("xpack.monitoring.breadcrumbs.logstash.nodesLabel",{defaultMessage:"Nodes"}))),s.push(ne(null,e.instance))):"pipeline"===e.page?(s.push(ne("#/logstash",t)),s.push(ne("#/logstash/pipelines",se.i18n.translate("xpack.monitoring.breadcrumbs.logstash.pipelinesLabel",{defaultMessage:"Pipelines"})))):s.push(ne(null,t)),s}(t))),null!=t&&t.inBeats&&(a=a.concat(function(e){const t=se.i18n.translate("xpack.monitoring.breadcrumbs.beatsLabel",{defaultMessage:"Beats"}),s=[];return e.instance?(s.push(ne("#/beats",t)),s.push(ne("#/beats/beats",se.i18n.translate("xpack.monitoring.breadcrumbs.beats.instancesLabel",{defaultMessage:"Instances"}))),s.push(ne(null,e.instance))):s.push(ne(null,t)),s}(t))),null!=t&&t.inApm&&(a=a.concat(function(e){const t=se.i18n.translate("xpack.monitoring.breadcrumbs.apmLabel",{defaultMessage:"APM server"}),s=[];return e.instance?(s.push(ne("#/apm",t)),s.push(ne("#/apm/instances",se.i18n.translate("xpack.monitoring.breadcrumbs.apm.instancesLabel",{defaultMessage:"Instances"}))),s.push(ne(null,e.instance))):s.push(ne(null,t)),s}(t))),null!=t&&t.inEnterpriseSearch&&(a=a.concat(function(e){const t=se.i18n.translate("xpack.monitoring.breadcrumbs.entSearchLabel",{defaultMessage:"Enterprise Search"}),s=[];return s.push(ne("#/enterprise_search",t)),s}())),a}(e,t);i(s),n(s.map((e=>({text:e.label,href:e.url?e.url:void 0,"data-test-subj":e.testSubj,ignoreGlobalState:e.ignoreGlobalState}))))}),[i,n]);return Object(o.useEffect)((()=>{e.listen(((e,t)=>{n()}))}),[e,n]),{generate:r,update:n,breadcrumbs:s}})),le={from:"now-1h",to:"now",interval:">=10s"},[ce,ue]=ie()((()=>{var e,t;const{services:s}=Object(a.useKibana)(),i=Object(o.useContext)(X),n={...le,...null===(e=s.data)||void 0===e?void 0:e.query.timefilter.timefilter.getTime()},{value:r,pause:l}=null===(t=s.data)||void 0===t?void 0:t.query.timefilter.timefilter.getRefreshInterval(),[c,u]=Object(o.useState)(r),[d,p]=Object(o.useState)(l),[g,m]=Object(o.useState)(n),[b,h]=Object(o.useState)(!1),j=Object(o.useCallback)(((e,t)=>{var s;m({...g,from:e,to:t}),i.time={from:e,to:t},Q.a.shims.timefilter.setTime(i.time),null===(s=i.save)||void 0===s||s.call(i)}),[g,m,i]);return Object(o.useEffect)((()=>{const e=Q.a.shims.timefilter.getTimeUpdate$().subscribe((function(){var e;const t=Q.a.shims.timefilter.getTime();m({...g,...t}),i.time={...t},null===(e=i.save)||void 0===e||e.call(i)}));return()=>e.unsubscribe()}),[]),{currentTimerange:g,setTimeRange:m,handleTimeChange:j,setRefreshInterval:u,refreshInterval:c,setIsPaused:p,isPaused:d,setIsDisabled:h,isDisabled:b}}));var de=s(16),pe=s(58),ge=s.n(pe);const me=()=>{const{isCcsEnabled:e}=Object(o.useContext)($),{services:t}=Object(a.useKibana)(),[s,i]=Object(o.useState)(!1);ge()((()=>{!async function(){var e;if(null!==(e=t.http)&&void 0!==e&&e.fetch)try{var s;const e=await(null===(s=t.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/check_access"));i(e.has_access)}catch(e){i(!1)}}()}),5e3);const n=se.i18n.translate("xpack.monitoring.accessDeniedTitle",{defaultMessage:"Access Denied"});return s?Object(x.jsx)(C.Redirect,{to:"/home"}):Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiCallOut,{title:n,color:"danger",iconType:"warning","data-test-subj":"accessDeniedTitle"},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.accessDenied.notAuthorizedDescription",defaultMessage:"You are not authorized to access Monitoring. To use Monitoring, you need the privileges granted by both the `{kibanaAdmin}` and `{monitoringUser}` roles.",values:{kibanaAdmin:"kibana_admin",monitoringUser:"monitoring_user "}})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.accessDenied.clusterNotConfiguredDescription",defaultMessage:"If you are attempting to access a dedicated monitoring cluster, this might be because you are logged in as a user that is not configured on the monitoring cluster."})),e&&Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.accessDenied.noRemoteClusterClientDescription",defaultMessage:"Since Cross Cluster Search is enabled (`monitoring.ui.ccs.enabled` is set to `true`), make sure your cluster has the `remote_cluster_client` role on at least one node."})),Object(x.jsx)("p",null,Object(x.jsx)(m.EuiButton,{href:"../app/home"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.accessDenied.backToKibanaButtonLabel",defaultMessage:"Back to Kibana"})))))};var be=s(24),he=s(35);const je=({pageTitle:e,onRefresh:t})=>{const{services:s}=Object(a.useKibana)(),i=s.uiSettings.get(he.UI_SETTINGS.TIMEPICKER_QUICK_RANGES),n=Object(o.useMemo)((()=>i.map((({from:e,to:t,display:s})=>({start:e,end:t,label:s})))),[i]),{currentTimerange:r,handleTimeChange:l,setRefreshInterval:c,refreshInterval:u,setIsPaused:d,isPaused:p,isDisabled:g}=ue(),b=Object(o.useContext)(X),h=Object(o.useCallback)((e=>{e.isInvalid||l(e.start,e.end)}),[l]),j=Object(o.useCallback)((({refreshInterval:e,isPaused:t})=>{var s;c(e),d(t),b.refreshInterval={pause:t,value:e},Q.a.shims.timefilter.setRefreshInterval(b.refreshInterval),null===(s=b.save)||void 0===s||s.call(b)}),[c,d,b]);return Object(x.jsx)(m.EuiPageHeader,{pageTitle:e,rightSideItems:[Object(x.jsx)(m.EuiSuperDatePicker,{isDisabled:g,start:r.from,end:r.to,onTimeChange:h,onRefresh:t,isPaused:p,refreshInterval:u,onRefreshChange:j,commonlyUsedRanges:n})]})};s(59),s(60),function(e){function t(e,t){return t*Math.floor(e/t)}function s(e,t,s,a){if("function"==typeof e.strftime)return e.strftime(t);var i,n=function(e,t){return t=""+(null==t?"0":t),1==(e=""+e).length?t+e:e},o=[],r=!1,l=e.getHours(),c=l<12;null==s&&(s=[se.i18n.translate("flot.time.janLabel",{defaultMessage:"Jan"}),se.i18n.translate("flot.time.febLabel",{defaultMessage:"Feb"}),se.i18n.translate("flot.time.marLabel",{defaultMessage:"Mar"}),se.i18n.translate("flot.time.aprLabel",{defaultMessage:"Apr"}),se.i18n.translate("flot.time.mayLabel",{defaultMessage:"May"}),se.i18n.translate("flot.time.junLabel",{defaultMessage:"Jun"}),se.i18n.translate("flot.time.julLabel",{defaultMessage:"Jul"}),se.i18n.translate("flot.time.augLabel",{defaultMessage:"Aug"}),se.i18n.translate("flot.time.sepLabel",{defaultMessage:"Sep"}),se.i18n.translate("flot.time.octLabel",{defaultMessage:"Oct"}),se.i18n.translate("flot.time.novLabel",{defaultMessage:"Nov"}),se.i18n.translate("flot.time.decLabel",{defaultMessage:"Dec"})]),null==a&&(a=[se.i18n.translate("flot.time.sunLabel",{defaultMessage:"Sun"}),se.i18n.translate("flot.time.monLabel",{defaultMessage:"Mon"}),se.i18n.translate("flot.time.tueLabel",{defaultMessage:"Tue"}),se.i18n.translate("flot.time.wedLabel",{defaultMessage:"Wed"}),se.i18n.translate("flot.time.thuLabel",{defaultMessage:"Thu"}),se.i18n.translate("flot.time.friLabel",{defaultMessage:"Fri"}),se.i18n.translate("flot.time.satLabel",{defaultMessage:"Sat"})]),i=l>12?l-12:0==l?12:l;for(var u=0;u<t.length;++u){var d=t.charAt(u);if(r){switch(d){case"a":d=""+a[e.getDay()];break;case"b":d=""+s[e.getMonth()];break;case"d":d=n(e.getDate());break;case"e":d=n(e.getDate()," ");break;case"h":case"H":d=n(l);break;case"I":d=n(i);break;case"l":d=n(i," ");break;case"m":d=n(e.getMonth()+1);break;case"M":d=n(e.getMinutes());break;case"q":d=""+(Math.floor(e.getMonth()/3)+1);break;case"S":d=n(e.getSeconds());break;case"y":d=n(e.getFullYear()%100);break;case"Y":d=""+e.getFullYear();break;case"p":d=c?"am":"pm";break;case"P":d=c?"AM":"PM";break;case"w":d=""+e.getDay()}o.push(d),r=!1}else"%"==d?r=!0:o.push(d)}return o.join("")}function a(e){function t(e,t,s,a){e[t]=function(){return s[a].apply(s,arguments)}}var s={date:e};null!=e.strftime&&t(s,"strftime",e,"strftime"),t(s,"getTime",e,"getTime"),t(s,"setTime",e,"setTime");for(var a=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],i=0;i<a.length;i++)t(s,"get"+a[i],e,"getUTC"+a[i]),t(s,"set"+a[i],e,"setUTC"+a[i]);return s}function i(e,t){if("browser"==t.timezone)return new Date(e);if(t.timezone&&"utc"!=t.timezone){if("undefined"!=typeof timezoneJS&&void 0!==timezoneJS.Date){var s=new timezoneJS.Date;return s.setTimezone(t.timezone),s.setTime(e),s}return a(new Date(e))}return a(new Date(e))}var n={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],r=o.concat([[3,"month"],[6,"month"],[1,"year"]]),l=o.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);e.plot.plugins.push({init:function(a){a.hooks.processOptions.push((function(a,o){e.each(a.getAxes(),(function(e,a){var o=a.options;"time"==o.mode&&(a.tickGenerator=function(e){var s=[],a=i(e.min,o),c=0,u=o.tickSize&&"quarter"===o.tickSize[1]||o.minTickSize&&"quarter"===o.minTickSize[1]?l:r;null!=o.minTickSize&&(c="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*n[o.minTickSize[1]]);for(var d=0;d<u.length-1&&!(e.delta<(u[d][0]*n[u[d][1]]+u[d+1][0]*n[u[d+1][1]])/2&&u[d][0]*n[u[d][1]]>=c);++d);var p=u[d][0],g=u[d][1];if("year"==g){if(null!=o.minTickSize&&"year"==o.minTickSize[1])p=Math.floor(o.minTickSize[0]);else{var m=Math.pow(10,Math.floor(Math.log(e.delta/n.year)/Math.LN10)),b=e.delta/n.year/m;p=b<1.5?1:b<3?2:b<7.5?5:10,p*=m}p<1&&(p=1)}e.tickSize=o.tickSize||[p,g];var h=e.tickSize[0];g=e.tickSize[1];var j=h*n[g];"second"==g?a.setSeconds(t(a.getSeconds(),h)):"minute"==g?a.setMinutes(t(a.getMinutes(),h)):"hour"==g?a.setHours(t(a.getHours(),h)):"month"==g?a.setMonth(t(a.getMonth(),h)):"quarter"==g?a.setMonth(3*t(a.getMonth()/3,h)):"year"==g&&a.setFullYear(t(a.getFullYear(),h)),a.setMilliseconds(0),j>=n.minute&&a.setSeconds(0),j>=n.hour&&a.setMinutes(0),j>=n.day&&a.setHours(0),j>=4*n.day&&a.setDate(1),j>=2*n.month&&a.setMonth(t(a.getMonth(),3)),j>=2*n.quarter&&a.setMonth(t(a.getMonth(),6)),j>=n.year&&a.setMonth(0);var x,f=0,O=Number.NaN;do{if(x=O,O=a.getTime(),s.push(O),"month"==g||"quarter"==g)if(h<1){a.setDate(1);var v=a.getTime();a.setMonth(a.getMonth()+("quarter"==g?3:1));var y=a.getTime();a.setTime(O+f*n.hour+(y-v)*h),f=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+h*("quarter"==g?3:1));else"year"==g?a.setFullYear(a.getFullYear()+h):a.setTime(O+j)}while(O<e.max&&O!=x);return s},a.tickFormatter=function(e,t){var a=i(e,t.options);if(null!=o.timeformat)return s(a,o.timeformat,o.monthNames,o.dayNames);var r=t.options.tickSize&&"quarter"==t.options.tickSize[1]||t.options.minTickSize&&"quarter"==t.options.minTickSize[1],l=t.tickSize[0]*n[t.tickSize[1]],c=t.max-t.min,u=o.twelveHourClock?" %p":"",d=o.twelveHourClock?"%I":"%H";return s(a,l<n.minute?d+":%M:%S"+u:l<n.day?c<2*n.day?d+":%M"+u:"%b %d "+d+":%M"+u:l<n.month?"%b %d":r&&l<n.quarter||!r&&l<n.year?c<n.year?"%b":"%b %Y":r&&l<n.year?c<n.year?"Q%q":"Q%q %Y":"%Y",o.monthNames,o.dayNames)})}))}))},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"}),e.plot.formatDate=s,e.plot.dateGenerator=i}(jQuery),s(61),s(62),s(63),function(e){const t={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(e,t){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+t.color+";'>"+e+"<br/>"+Math.round(t.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};e.plot.plugins.push({init:function(t){let s=null,a=null,i=null,n=null,o=null,r=null,l=!1,c=null,u=[];function d(e){if(i.series.pie.innerRadius>0){e.save();const t=i.series.pie.innerRadius>1?i.series.pie.innerRadius:n*i.series.pie.innerRadius;e.globalCompositeOperation="destination-out",e.beginPath(),e.fillStyle=i.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.fill(),e.closePath(),e.restore(),i.series.pie.stroke.width>0&&(e.save(),e.beginPath(),e.strokeStyle=i.series.pie.stroke.color,e.arc(0,0,t,0,2*Math.PI,!1),e.stroke(),e.closePath(),e.restore())}}function p(e,t){let s=!1;const a=e.length;let i=a-1;for(let n=-1;++n<a;i=n)(e[n][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[n][1])&&t[0]<(e[i][0]-e[n][0])*(t[1]-e[n][1])/(e[i][1]-e[n][1])+e[n][0]&&(s=!s);return s}function g(e){b("plothover",e)}function m(e){b("plotclick",e)}function b(e,s){const l=t.offset(),d=function(e,s){const a=t.getData(),i=t.getOptions(),l=i.series.pie.radius>1?i.series.pie.radius:n*i.series.pie.radius;let u,d;for(let t=0;t<a.length;++t){const i=a[t];if(i.pie.show){if(c.save(),c.beginPath(),c.moveTo(0,0),c.arc(0,0,l,i.startAngle,i.startAngle+i.angle/2,!1),c.arc(0,0,l,i.startAngle+i.angle/2,i.startAngle+i.angle,!1),c.closePath(),u=e-o,d=s-r,c.isPointInPath){if(c.isPointInPath(e-o,s-r))return c.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:t}}else if(p([[0,0],[l*Math.cos(i.startAngle),l*Math.sin(i.startAngle)],[l*Math.cos(i.startAngle+i.angle/4),l*Math.sin(i.startAngle+i.angle/4)],[l*Math.cos(i.startAngle+i.angle/2),l*Math.sin(i.startAngle+i.angle/2)],[l*Math.cos(i.startAngle+i.angle/1.5),l*Math.sin(i.startAngle+i.angle/1.5)],[l*Math.cos(i.startAngle+i.angle),l*Math.sin(i.startAngle+i.angle)]],[u,d]))return c.restore(),{datapoint:[i.percent,i.data],dataIndex:0,series:i,seriesIndex:t};c.restore()}}return null}(parseInt(s.pageX-l.left,10),parseInt(s.pageY-l.top,10));if(i.grid.autoHighlight)for(let t=0;t<u.length;++t){const s=u[t];s.auto!==e||d&&s.series===d.series||h(s.series)}d&&function(e,s){const a=j(e);-1===a?(u.push({series:e,auto:s}),t.triggerRedrawOverlay()):s||(u[a].auto=!1)}(d.series,e);const g={pageX:s.pageX,pageY:s.pageY};a.trigger(e,[g,d])}function h(e){null==e&&(u=[],t.triggerRedrawOverlay());const s=j(e);-1!==s&&(u.splice(s,1),t.triggerRedrawOverlay())}function j(e){for(let t=0;t<u.length;++t)if(u[t].series===e)return t;return-1}t.hooks.processOptions.push((function(e,t){t.series.pie.show&&(t.grid.show=!1,"auto"===t.series.pie.label.show&&(t.legend.show?t.series.pie.label.show=!1:t.series.pie.label.show=!0),"auto"===t.series.pie.radius&&(t.series.pie.label.show?t.series.pie.radius=3/4:t.series.pie.radius=1),t.series.pie.tilt>1?t.series.pie.tilt=1:t.series.pie.tilt<0&&(t.series.pie.tilt=0))})),t.hooks.bindEvents.push((function(e,t){const s=e.getOptions();s.series.pie.show&&(s.grid.hoverable&&t.unbind("mousemove").mousemove(g),s.grid.clickable&&t.unbind("click").click(m))})),t.hooks.processDatapoints.push((function(t,n,o,r){t.getOptions().series.pie.show&&function(t){l||(l=!0,s=t.getCanvas(),a=e(s).parent(),i=t.getOptions(),t.setData(function(t){let s=0,a=0,n=0,o=i.series.pie.combine.color;const r=[];for(let e=0;e<t.length;++e){let s=t[e].data;Array.isArray(s)&&1===s.length&&(s=s[0]),Array.isArray(s)?!isNaN(parseFloat(s[1]))&&isFinite(s[1])?s[1]=+s[1]:s[1]=0:s=!isNaN(parseFloat(s))&&isFinite(s)?[1,+s]:[1,0],t[e].data=[s]}for(let e=0;e<t.length;++e)s+=t[e].data[0][1];for(let e=0;e<t.length;++e){const r=t[e].data[0][1];r/s<=i.series.pie.combine.threshold&&(a+=r,n++,o||(o=t[e].color))}for(let a=0;a<t.length;++a){const o=t[a].data[0][1];(n<2||o/s>i.series.pie.combine.threshold)&&r.push(e.extend(t[a],{data:[[1,o]],color:t[a].color,label:t[a].label,angle:o*Math.PI*2/s,percent:o/(s/100)}))}return n>1&&r.push({data:[[1,a]],color:o,label:i.series.pie.combine.label,angle:a*Math.PI*2/s,percent:a/(s/100)}),r}(t.getData())))}(t)})),t.hooks.drawOverlay.push((function(e,t){e.getOptions().series.pie.show&&function(e,t){const s=e.getOptions(),a=s.series.pie.radius>1?s.series.pie.radius:n*s.series.pie.radius;t.save(),t.translate(o,r),t.scale(1,s.series.pie.tilt);for(let e=0;e<u.length;++e)(i=u[e].series).angle<=0||isNaN(i.angle)||(t.fillStyle="rgba(255, 255, 255, "+s.series.pie.highlight.opacity+")",t.beginPath(),Math.abs(i.angle-2*Math.PI)>1e-9&&t.moveTo(0,0),t.arc(0,0,a,i.startAngle,i.startAngle+i.angle/2,!1),t.arc(0,0,a,i.startAngle+i.angle/2,i.startAngle+i.angle,!1),t.closePath(),t.fill());var i;d(t),t.restore()}(e,t)})),t.hooks.draw.push((function(t,s){t.getOptions().series.pie.show&&function(t,s){if(!a)return;const u=t.getPlaceholder().width(),p=t.getPlaceholder().height(),g=a.children().filter(".legend").children().width()||0;c=s,l=!1,n=Math.min(u,p/i.series.pie.tilt)/2,r=p/2+i.series.pie.offset.top,o=u/2,"auto"===i.series.pie.offset.left?(i.legend.position.match("w")?o+=g/2:o-=g/2,o<n?o=n:o>u-n&&(o=u-n)):o+=i.series.pie.offset.left;const m=t.getData();let b=0;do{b>0&&(n*=.95),b+=1,h(),i.series.pie.tilt<=.8&&j()}while(!x()&&b<10);if(b>=10){h();const e=se.i18n.translate("flot.pie.unableToDrawLabelsInsideCanvasErrorMessage",{defaultMessage:"Could not draw pie with labels contained inside canvas"});a.prepend(`<div class='error'>${e}</div>`)}function h(){c.clearRect(0,0,u,p),a.children().filter(".pieLabel, .pieLabelBackground").remove()}function j(){const e=i.series.pie.shadow.left,t=i.series.pie.shadow.top,s=i.series.pie.shadow.alpha;let a=i.series.pie.radius>1?i.series.pie.radius:n*i.series.pie.radius;if(!(a>=u/2-e||a*i.series.pie.tilt>=p/2-t||a<=10)){c.save(),c.translate(e,t),c.globalAlpha=s,c.fillStyle="#000",c.translate(o,r),c.scale(1,i.series.pie.tilt);for(let e=1;e<=10;e++)c.beginPath(),c.arc(0,0,a,0,2*Math.PI,!1),c.fill(),a-=e;c.restore()}}function x(){const t=Math.PI*i.series.pie.startAngle,s=i.series.pie.radius>1?i.series.pie.radius:n*i.series.pie.radius;c.save(),c.translate(o,r),c.scale(1,i.series.pie.tilt),c.save();let l=t;for(let e=0;e<m.length;++e)m[e].startAngle=l,g(m[e].angle,m[e].color,!0);if(c.restore(),i.series.pie.stroke.width>0){c.save(),c.lineWidth=i.series.pie.stroke.width,l=t;for(let e=0;e<m.length;++e)g(m[e].angle,i.series.pie.stroke.color,!1);c.restore()}return d(c),c.restore(),!i.series.pie.label.show||function(){let s=t;const l=i.series.pie.label.radius>1?i.series.pie.label.radius:n*i.series.pie.label.radius;for(let e=0;e<m.length;++e){if(m[e].percent>=100*i.series.pie.label.threshold&&!c(m[e],s,e))return!1;s+=m[e].angle}return!0;function c(t,s,n){if(0===t.data[0][1])return!0;const c=i.legend.labelFormatter;let d;const g=i.series.pie.label.formatter;d=c?c(t.label,t):t.label,g&&(d=g(d,t));const m=(s+t.angle+s)/2,b=o+Math.round(Math.cos(m)*l),h=r+Math.round(Math.sin(m)*l)*i.series.pie.tilt,j="<span class='pieLabel' id='pieLabel"+n+"' style='position:absolute;top:"+h+"px;left:"+b+"px;'>"+d+"</span>";a.append(j);const x=a.children("#pieLabel"+n),f=h-x.height()/2,O=b-x.width()/2;if(x.css("top",f),x.css("left",O),0-f>0||0-O>0||p-(f+x.height())<0||u-(O+x.width())<0)return!1;if(0!==i.series.pie.label.background.opacity){let s=i.series.pie.label.background.color;null==s&&(s=t.color);const a="top:"+f+"px;left:"+O+"px;";e("<div class='pieLabelBackground' style='position:absolute;width:"+x.width()+"px;height:"+x.height()+"px;"+a+"background-color:"+s+";'></div>").css("opacity",i.series.pie.label.background.opacity).insertBefore(x)}return!0}}();function g(e,t,a){e<=0||isNaN(e)||(a?c.fillStyle=t:(c.strokeStyle=t,c.lineJoin="round"),c.beginPath(),Math.abs(e-2*Math.PI)>1e-9&&c.moveTo(0,0),c.arc(0,0,s,l,l+e/2,!1),c.arc(0,0,s,l+e/2,l+e,!1),c.closePath(),l+=e,a?c.fill():c.stroke())}}t.setSeries&&t.insertLegend&&(t.setSeries(m),t.insertLegend())}(t,s)}))},options:t,name:"pie",version:"1.1"})}(jQuery),s(64),s(65),s(66),s(67),s(68);var xe=s(4);let fe,Oe,ve;const ye={supported:!1,enabled:!1,data:null,callback:null,hideBottomBar:!1},ke=()=>ye,Me=()=>ye.callback&&ye.callback(),Ee=async(e,t=!1)=>{const s=await(async(e,t=!1)=>{const s=fe.cluster_uuid,a=fe.ccs;let i="../api/monitoring/v1/setup/collection";i+=e?`/node/${e}`:!t&&s?`/cluster/${s}`:"/cluster";try{return await Oe.post(i,{body:JSON.stringify({ccs:a})})}catch(e){throw ve(e),e}})(e,t);ye.data=s;const a=Object(P.get)(s,"_meta.hasPermissions",!1);if(!a){let e="";return a||(e=se.i18n.translate("xpack.monitoring.setupMode.notAvailablePermissions",{defaultMessage:"You do not have the necessary permissions to do this."})),Q.a.shims.toastNotifications.addDanger({title:se.i18n.translate("xpack.monitoring.setupMode.notAvailableTitle",{defaultMessage:"Setup mode is not available"}),text:e}),Se(!1)}if(Me(),!fe.cluster_uuid){const e=Object(P.get)(s,"_meta.liveClusterUuid"),t=Object.values(Object(P.get)(s,"elasticsearch.byUuid",{})).filter((e=>e.isPartiallyMigrated||e.isFullyMigrated));e&&t.length>0&&(i=e,fe.cluster_uuid=i,null===(n=(o=fe).save)||void 0===n||n.call(o))}var i,n,o},Se=e=>{var t,s;ye.enabled=e,fe.inSetupMode=e,null===(t=(s=fe).save)||void 0===t||t.call(s),Me(),e&&Ee()},we=async(e,t,s,a)=>{fe=e,Oe=t,ve=s,a&&(ye.callback=a),fe.inSetupMode&&Se(!0)},Te=(e,t=fe)=>!1!==(null==e?void 0:e.setupModeSupported)&&(!!ye.enabled||t.inSetupMode),_e=e=>!(!ye.enabled||e===xe.d.MetricbeatMigration&&Q.a.shims.isCloud),Ce=()=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiTitle,{size:"l"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataTitle",defaultMessage:"We're looking for your monitoring data"}))),Object(x.jsx)(m.EuiTextColor,{color:"subdued"},Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.lookingForMonitoringDataDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),Ie=()=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiTitle,{size:"l"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffTitle",defaultMessage:"Monitoring is currently off"}))),Object(x.jsx)(m.EuiTextColor,{color:"subdued"},Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.monitoringIsOffDescription",defaultMessage:"Monitoring provides insight to your hardware performance and load."}))))),Le=()=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiTitle,{size:"l"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededTitle",defaultMessage:"You need to make some adjustments"}))),Object(x.jsx)(m.EuiTextColor,{color:"subdued"},Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.changesNeededDescription",defaultMessage:"To run monitoring please perform the following steps"}))))),Pe=()=>{const{ELASTIC_WEBSITE_URL:e}=Q.a.shims.docLinks;return Object(x.jsx)(m.EuiTextColor,{color:"subdued"},Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription",defaultMessage:"Configure monitoring through "}),Object(x.jsx)(m.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Elasticsearch Service Console")," ",Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription2",defaultMessage:"Go to "}),Object(x.jsx)(m.EuiLink,{href:"https://cloud.elastic.co/deployments",target:"_blank"},"Logs and metrics")," ",Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.blurbs.cloudDeploymentDescription3",defaultMessage:"section for a deployment to configure monitoring. For more information visit "}),Object(x.jsx)(m.EuiLink,{href:`${e}guide/en/cloud/current/ec-enable-logging-and-monitoring.html`,target:"_blank"},"the documentation page."))))};function Fe({checkMessage:e}){const t=e||Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.defaultLoadingMessage",defaultMessage:"Loading, please wait..."});return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Ce,null),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",gutterSize:"s",justifyContent:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiLoadingSpinner,{size:"m"})),Object(x.jsx)(m.EuiFlexItem,{grow:!1},t)))}class collection_enabled_ExplainCollectionEnabled extends r.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.waitedTooLongTimer=null,this.state={waitedTooLong:!1}}componentWillUnmount(){clearInterval(this.waitedTooLongTimer)}handleClick(){const{enabler:e}=this.props;e.enableCollectionEnabled(),this.waitedTooLongTimer=setTimeout((()=>{this.setState({waitedTooLong:!0})}),22e3)}render(){const{reason:e,isCollectionEnabledUpdated:t,isCollectionEnabledUpdating:s}=this.props,{property:a,data:i,context:n}=e,r=this.state.waitedTooLong?Object(x.jsx)("p",null,Object(x.jsx)("a",{href:"#/"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.stillWaitingLinkText",defaultMessage:"Still waiting?"}))):null;return Object(x.jsx)(o.Fragment,null,t?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiTitle,{size:"l","data-test-subj":"monitoringCollectionEnabledMessage"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnTitle",defaultMessage:"Success! Getting your monitoring data."}))),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.monitoringTurnedOnDescription",defaultMessage:"When the data is in your cluster, your monitoring dashboard will show up here. This might take a few seconds."}))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiLoadingSpinner,{size:"l"}),Object(x.jsx)(m.EuiSpacer,null),r):(()=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Ie,null),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:n,property:Object(x.jsx)(m.EuiCode,null,a),data:Object(x.jsx)(m.EuiCode,null,i)}})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnItOnDescription",defaultMessage:"Would you like to turn it on?"}))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionEnabled",isLoading:s},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionEnabled.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}class collection_interval_ExplainCollectionInterval extends r.a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(){const{enabler:e}=this.props;e.enableCollectionInterval()}render(){const{reason:e,isCollectionIntervalUpdated:t,isCollectionIntervalUpdating:s}=this.props,{context:a,property:i,data:n}=e;return Object(x.jsx)(o.Fragment,null,t?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiTitle,{size:"l"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnTitle",defaultMessage:"Success! Wait a moment please."}))),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.monitoringTurnedOnDescription",defaultMessage:"As soon as monitoring data appears in your cluster the page will automatically refresh with your monitoring dashboard. This only takes only a few seconds."}))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiLoadingSpinner,{size:"l"})):(()=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Ie,null),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionIntervalDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data}.",values:{context:a,property:Object(x.jsx)(m.EuiCode,null,i),data:Object(x.jsx)(m.EuiCode,null,n)}})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.wrongIntervalValueDescription",defaultMessage:"The collection interval setting needs to be a positive integer (10s is recommended) in order for the collection agents to be active."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.changeIntervalDescription",defaultMessage:"Would you like us to change it and enable monitoring?"}))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiButton,{fill:!0,onClick:this.handleClick,type:"button","data-test-subj":"enableCollectionInterval",isLoading:s},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Turn on monitoring"}))))))())}}function Ne({reason:e}){const{context:t,property:s,data:a}=e;return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Le,null),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.pluginEnabledDescription",defaultMessage:"We checked the {context} settings and found that {property} is set to {data} set, which disables monitoring. Removing the {monitoringEnableFalse} setting from your configuration will put the default into effect and enable Monitoring.",values:{context:t,property:Object(x.jsx)(m.EuiCode,null,s),data:Object(x.jsx)(m.EuiCode,null,a),monitoringEnableFalse:Object(x.jsx)(m.EuiCode,null,"xpack.monitoring.enabled: false")}}))))}function De({reason:e}){const{context:t,property:s,data:a}=e;return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Le,null),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,{className:"eui-textLeft"},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersDescription",defaultMessage:"We checked the {context} settings for {property}, and found the reason: {data}.",values:{context:Object(x.jsx)(m.EuiCode,null,t),property:Object(x.jsx)(m.EuiCode,null,s),data:Object(x.jsx)(m.EuiCode,null,a)}})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.problemWithConfigDescription",defaultMessage:"Using monitoring exporters to ship the monitoring data to a remote monitoring cluster is highly recommended as it keeps the integrity of the monitoring data safe no matter what the state of the production cluster. However, as this instance of Kibana could not find any monitoring data, there seems to be a problem with the {property} configuration, or the {monitoringEs} settings in {kibanaConfig}.",values:{property:Object(x.jsx)(m.EuiCode,null,s),monitoringEs:Object(x.jsx)(m.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(x.jsx)(m.EuiCode,null,"kibana.yml")}})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exporters.checkConfigDescription",defaultMessage:"Check that the intended exporters are enabled for sending statistics to the monitoring cluster, and that the monitoring cluster host matches the {monitoringEs} setting in {kibanaConfig} to see monitoring data in this instance of Kibana.",values:{monitoringEs:Object(x.jsx)(m.EuiCode,null,"xpack.monitoring.elasticsearch"),kibanaConfig:Object(x.jsx)(m.EuiCode,null,"kibana.yml")}}))))}function ze(){return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Pe,null),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,{className:"eui-textLeft"},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.explanations.exportersCloudDescription",defaultMessage:"In Elastic Cloud, your monitoring data is stored in your dedicated monitoring cluster."}))))}const Re=e=>{const{reason:t}=e,{property:s,data:a,context:i}=t;switch(s){case"xpack.monitoring.collection.enabled":return Object(x.jsx)(collection_enabled_ExplainCollectionEnabled,e);case"xpack.monitoring.collection.interval":return Object(x.jsx)(collection_interval_ExplainCollectionInterval,e);case"xpack.monitoring.exporters":return Object(x.jsx)(De,e);case"xpack.monitoring.exporters.cloud_enabled":return Object(x.jsx)(ze,null);case"xpack.monitoring.enabled":return Object(x.jsx)(Ne,e);case"custom":return Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,t.message));default:return Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.reasons.explainWhyNoDataDescription",defaultMessage:"There is a {context} setting that has {property} set to {data}.",values:{context:Object(x.jsx)(m.EuiCode,null,i),property:Object(x.jsx)(m.EuiCode,null,s),data:Object(x.jsx)(m.EuiCode,null,a)}})))}};function Ae(e){return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Re,e))}function Be(){return Object(x.jsx)("div",{"data-test-subj":"weTriedContainer"},Object(x.jsx)(m.EuiTitle,{size:"l"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.reasons.couldNotActivateMonitoringTitle",defaultMessage:"We couldn't activate monitoring"}))),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiText,{className:"eui-textLeft"},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.reasons.noMonitoringDataFoundDescription",defaultMessage:'No monitoring data found. Try setting the time filter to "Last 1 hour" or check if data is available for a different time period.'})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.reasons.ifDataInClusterDescription",defaultMessage:"If data is in your cluster, your monitoring dashboards will show up here."}))))}const Ve=({errors:e})=>{const t={};return e.filter((e=>{const{statusCode:s,error:a,message:i}=e,n=`${s}${a}${i}`;if(!t[n])return t[n]=!0,!0})).map(((e,t)=>{const{message:s,statusCode:a,error:i}=e;return Object(x.jsx)(o.Fragment,{key:`checker-error-${t}`},Object(x.jsx)(m.EuiDescriptionListTitle,null,a," ",i),Object(x.jsx)(m.EuiDescriptionListDescription,null,s))}))};function Ue(e){return void 0===e.errors||0===e.errors.length?null:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiCallOut,{title:"Errors found",color:"danger",className:"eui-textLeft"},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.checkerErrors.checkEsSettingsErrorMessage",defaultMessage:"There were some errors encountered in trying to check Elasticsearch settings. You need administrator rights to check the settings and, if needed, to enable the monitoring collection setting."})),Object(x.jsx)(m.EuiDescriptionList,null,Object(x.jsx)(Ve,e))))}function $e(e,t={},s=window.location){let a=s.hash?s.hash.split("?")[1]:"";const i=/_g=\((.+)\)$/.exec(a);if(!i||!i.length)return a?`${e.split("?")[0]}?${a}`:e;let n=i[1];return Object.keys(t).forEach((e=>{let s=t[e];"cluster_uuid"===e&&(s=`'${s}'`);const a=new RegExp(`${e}:([^,]+)`).exec(n);a&&a.length?n=n.replace(a[0],`${e}:${s}`):n+=`,${e}:${s}`})),a=a.replace(i[0],`_g=(${n})`),`${e.split("?")[0]}?${a}`}function He(e){const{isLoading:t,reason:s,checkMessage:a,isCollectionEnabledUpdated:i}=e;return i&&!s||t?Object(x.jsx)(Fe,{checkMessage:a}):s?Object(x.jsx)(Ae,e):Object(x.jsx)(Be,null)}function We(e){const[t,s]=Object(o.useState)(!1),[a,i]=Object(o.useState)(!1),n=({children:e})=>Object(x.jsx)(m.EuiPage,{"data-test-subj":"noDataContainer"},e);return e.isCloudEnabled?Object(x.jsx)(n,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.cloud.heading",defaultMessage:"No monitoring data found."}))),Object(x.jsx)(m.EuiPageBody,{restrictWidth:600},Object(x.jsx)(m.EuiPageTemplate.EmptyPrompt,{icon:Object(x.jsx)(m.EuiIcon,{type:"monitoringApp",size:"xxl"}),title:Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.cloud.title",defaultMessage:"Monitoring data not available"})),body:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiTextColor,{color:"subdued"},Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.cloud.description",defaultMessage:"Monitoring provides insight to your hardware performance and load."})))),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(Pe,null))}))):a?Object(x.jsx)(n,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.no_data.internal_collection.heading",defaultMessage:"No monitoring data found."}))),Object(x.jsx)(m.EuiPageBody,{restrictWidth:600},Object(x.jsx)(m.EuiPageTemplate.EmptyPrompt,{icon:Object(x.jsx)(m.EuiIcon,{type:"monitoringApp",size:"xxl"}),body:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(He,e),Object(x.jsx)(Ue,{errors:e.errors})),actions:e.isCloudEnabled?null:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiButtonEmpty,{isDisabled:e.isCollectionEnabledUpdated,onClick:()=>i(!1)},Object(x.jsx)(m.EuiTextColor,{color:"default"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.setupMetricbeatInstead",defaultMessage:"Or, set up with Metricbeat (recommended)"}))))}))):Object(x.jsx)(n,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.no_data.heading",defaultMessage:"No monitoring data found."}))),Object(x.jsx)(m.EuiPageBody,{restrictWidth:600},Object(x.jsx)(m.EuiPageTemplate.EmptyPrompt,{icon:Object(x.jsx)(m.EuiIcon,{type:"monitoringApp",size:"xxl"}),title:Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDetected",defaultMessage:"No monitoring data found"})),body:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.noMonitoringDataFound",defaultMessage:"Have you set up monitoring yet? If so, make sure that the selected time period in the upper right includes monitoring data."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.remoteCollectionNotice",defaultMessage:"If you have configured monitoring data to be sent to a dedicated monitoring cluster you should access that data with the Kibana instance attached to the monitoring cluster."}))),actions:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceAround",gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiButton,{fill:!0,onClick:async function(){s(!0),await Se(!0),window.location.hash=$e("#/elasticsearch/nodes")},type:"button","data-test-subj":"enableCollectionInterval",isLoading:t},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.collectionInterval.turnOnMonitoringButtonLabel",defaultMessage:"Set up monitoring with Metricbeat"})))),Object(x.jsx)(m.EuiHorizontalRule,{size:"half"}),Object(x.jsx)(m.EuiButtonEmpty,{onClick:()=>i(!0),"data-test-subj":"useInternalCollection"},Object(x.jsx)(m.EuiTextColor,{color:"subdued"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.noData.setupInternalInstead",defaultMessage:"Or, set up with self monitoring"}))))})))}const qe=({uploadPath:e})=>Object(x.jsx)(m.EuiCard,{title:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.updateLicenseTitle",defaultMessage:"Update your license"}),description:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.useAvailableLicenseDescription",defaultMessage:"If you already have a new license, upload it now."}),footer:Object(x.jsx)(m.EuiButton,{"data-test-subj":"updateLicenseButton",href:e},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.updateLicenseButtonLabel",defaultMessage:"Update license"}))});class license_LicenseStatus extends r.a.PureComponent{render(){const{isExpired:e,status:t,type:s,expiryDate:a}=this.props,i=s.charAt(0).toUpperCase()+s.substr(1).toLowerCase();let n,r,l;return e?(n=Object(x.jsx)(m.EuiIcon,{color:"danger",type:"warning"}),l=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusDescription",defaultMessage:"Your license expired on {expiryDate}",values:{expiryDate:Object(x.jsx)("strong",null,a)}})),r=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.expiredLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license has expired",values:{typeTitleCase:i}})):(n=Object(x.jsx)(m.EuiIcon,{color:"success",type:"checkInCircleFilled",size:"l"}),l=a?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusDescription",defaultMessage:"Your license will expire on {expiryDate}",values:{expiryDate:Object(x.jsx)("strong",null,a)}})):Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.permanentActiveLicenseStatusDescription",defaultMessage:"Your license will never expire."})),r=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.activeLicenseStatusTitle",defaultMessage:"Your {typeTitleCase} license is {status}",values:{typeTitleCase:i,status:t.toLowerCase()}})),Object(x.jsx)(m.EuiTextAlign,{textAlign:"center"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},n),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"m"},Object(x.jsx)("h1",{"data-test-subj":"licenseText"},r)))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiText,{"data-test-subj":"licenseSubText"},l))}}const Ge=({isPrimaryCluster:e,uploadLicensePath:t})=>e?Object(x.jsx)(qe,{uploadPath:t}):null,Ke=({isPrimaryCluster:e})=>e?null:Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.license.howToUpdateLicenseDescription",defaultMessage:"To update the license for this cluster, provide the license file through the Elasticsearch {apiText}:",values:{apiText:"API"}})),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiCodeBlock,null,"curl -XPUT -u <user> 'https://<host>:<port>/_license' -H 'Content-Type: application/json' -d @license.json")),Je=e=>{const{status:t,type:s,isExpired:a,expiryDate:i}=e,n=`${Q.a.shims.getBasePath()}/app/management/stack/license_management`;return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.license.heading",defaultMessage:"License"}))),Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(license_LicenseStatus,{isExpired:a,status:t,type:s,expiryDate:i}),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Ge,e),Object(x.jsx)(Ke,e))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiText,{size:"s",textAlign:"center"},Object(x.jsx)("p",null,"For more license options please visit",Object(x.jsx)(m.EuiLink,{href:n},"License Management"),"."))))};function Ye(){return Object(x.jsx)(m.EuiPage,{style:{height:"calc(100vh - 50px)"}},Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPageTemplate.EmptyPrompt,{icon:Object(x.jsx)(m.EuiLoadingSpinner,{size:"xl"}),body:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.pageLoadingTitle",defaultMessage:"Loading"})})))}const Qe=({pageViewTitle:e})=>{const t=e.toLowerCase().replace(/-/g,"").replace(/\s+/g,"_");return Object(be.useTrackPageview)({app:"stack_monitoring",path:t}),Object(be.useTrackPageview)({app:"stack_monitoring",path:t,delay:15e3}),Object(x.jsx)(Ye,null)},Xe=({pageViewTitle:e})=>e?Object(x.jsx)(Qe,{pageViewTitle:e}):Object(x.jsx)(Ye,null),Ze={RED:"RED",YELLOW:"YELLOW",GREEN:"GREEN",GRAY:"GRAY"},et={[Ze.RED]:"danger",[Ze.YELLOW]:"warning",[Ze.GREEN]:"success",[Ze.GRAY]:"subdued"},tt=({type:e,label:t})=>{const s=et[e];return Object(x.jsx)(m.EuiIcon,{alt:t,size:"l","data-test-subj":"statusIcon",type:"dot",color:s})},st=r.a.createContext({setupModeSupported:!1});var at=s(19),it=s.n(at);function nt(e,t,s){let a,i;if(s=s||it()(),t===U.c)a=it.a.duration(s-it()(e));else{if(t!==U.d)throw new Error('[formatTimestampToDuration] requires a [calculationFlag] parameter to specify format as "since" or "until" the given time.');a=it.a.duration(it()(e)-s)}return i=Math.abs(s.diff(e,"months"))>=1?it.a.duration(a).format(U.t):Math.abs(s.diff(e,"minutes"))>=1?it.a.duration(a).format(U.u):it.a.duration(a).format(U.v),i.replace(/ -?0 mins$/,"").replace(/ -?0 hrs$/,"").replace(/ -?0 days$/,"")}function ot(e){if(!e)return null;let t=e.text;if(!e.tokens||!e.tokens.length)return t;const s=e.tokens.filter((e=>e.type===xe.a.Time)),a=e.tokens.filter((e=>e.type===xe.a.Link)),i=e.tokens.filter((e=>e.type===xe.a.DocLink));for(const e of s){const s=e;t=t.replace(s.startToken,s.isRelative?nt(s.timestamp,U.d):it.a.tz(s.timestamp,it.a.tz.guess()).format("LLL z"))}let n=Object(x.jsx)(o.Fragment,null,t);for(const e of a){const s=e,a=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!a||a.length<2)continue;const i=t.indexOf(a[0]),r=t.substring(0,i),l=t.substring(i+a[0].length),c=$e(`#/${s.url}`);n=Object(x.jsx)(o.Fragment,null,r,Object(x.jsx)(m.EuiLink,{href:c},a[1]),l)}for(const e of i){const s=e,a=new RegExp(`${s.startToken}(.+?)${s.endToken}`).exec(t);if(!a||a.length<2)continue;const i=s.partialUrl.replace("{basePath}",Q.a.shims.getBasePath()).replace("{elasticWebsiteUrl}",Q.a.shims.docLinks.ELASTIC_WEBSITE_URL).replace("{docLinkVersion}",Q.a.shims.docLinks.DOC_LINK_VERSION),r=t.indexOf(a[0]),l=t.substring(0,r),c=t.substring(r+a[0].length);n=Object(x.jsx)(o.Fragment,null,l,Object(x.jsx)(m.EuiLink,{href:i,target:"_blank",external:!0},a[1]),c)}return n}s(47);var rt=s(36);const lt=e=>{const{alert:t,compressed:s}=e,[a,i]=r.a.useState(!1),[n,l]=r.a.useState(t.enabled),[c,u]=r.a.useState(t.muteAll),[d,p]=r.a.useState(!1),g=Object(o.useMemo)((()=>a&&Q.a.shims.triggersActionsUi.getEditRuleFlyout({initialRule:{...t,ruleTypeId:t.alertTypeId},onClose:()=>{i(!1),ye.hideBottomBar=!1,Me()}})),[a]);return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiFlexGroup,{justifyContent:s?"flexStart":"spaceBetween",gutterSize:s?"m":"xs",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiButton,{size:s?"s":"m",onClick:()=>{i(!0),ye.hideBottomBar=!0,Me()}},se.i18n.translate("xpack.monitoring.alerts.panel.editAlert",{defaultMessage:"Edit rule"}))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiSwitch,{name:"disable",disabled:d,checked:!n,onChange:async()=>{n?(l(!1),await async function(){p(!0);try{await Q.a.shims.http.post(`${rt.BASE_ALERTING_API_PATH}/rule/${t.id}/_disable`)}catch(e){Q.a.shims.toastNotifications.addDanger({title:se.i18n.translate("xpack.monitoring.alerts.panel.disableAlert.errorTitle",{defaultMessage:"Unable to disable rule"}),text:e.message})}p(!1)}()):(l(!0),await async function(){p(!0);try{await Q.a.shims.http.post(`${rt.BASE_ALERTING_API_PATH}/rule/${t.id}/_enable`)}catch(e){Q.a.shims.toastNotifications.addDanger({title:se.i18n.translate("xpack.monitoring.alerts.panel.enableAlert.errorTitle",{defaultMessage:"Unable to enable rule"}),text:e.message})}p(!1)}())},label:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.panel.disableTitle",defaultMessage:"Disable"})})),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiSwitch,{name:"mute",disabled:d,checked:c,"data-test-subj":"muteSwitch",onChange:async()=>{c?(u(!1),await async function(){p(!0);try{await Q.a.shims.http.post(`${rt.BASE_ALERTING_API_PATH}/rule/${t.id}/_unmute_all`)}catch(e){Q.a.shims.toastNotifications.addDanger({title:se.i18n.translate("xpack.monitoring.alerts.panel.ummuteAlert.errorTitle",{defaultMessage:"Unable to unmute rule"}),text:e.message})}p(!1)}()):(u(!0),await async function(){p(!0);try{await Q.a.shims.http.post(`${rt.BASE_ALERTING_API_PATH}/rule/${t.id}/_mute_all`)}catch(e){Q.a.shims.toastNotifications.addDanger({title:se.i18n.translate("xpack.monitoring.alerts.panel.muteAlert.errorTitle",{defaultMessage:"Unable to mute rule"}),text:e.message})}p(!1)}())},label:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.panel.muteTitle",defaultMessage:"Mute"})}))),g)},ct=e=>{const{alert:t,alertState:s}=e,a=Te(r.a.useContext(st));if(!t)return null;if(a||!s)return Object(x.jsx)("div",{style:{padding:"1rem"}},Object(x.jsx)(lt,{alert:t}));const i=s.state.ui.message.nextSteps&&s.state.ui.message.nextSteps.length?Object(x.jsx)(m.EuiListGroup,null,s.state.ui.message.nextSteps.map(((e,t)=>Object(x.jsx)(m.EuiListGroupItem,{size:"s",key:t,label:ot(e)})))):null,{code:n}=s.state.ui.message;return Object(x.jsx)(o.Fragment,null,Object(x.jsx)("div",{style:{padding:"1rem"}},Object(x.jsx)(m.EuiTitle,{size:"xs"},Object(x.jsx)("h5",null,ot(s.state.ui.message))),null!=n&&n.length?Object(x.jsx)(m.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:150},n):null,i?Object(x.jsx)(m.EuiSpacer,{size:"s"}):null,i),Object(x.jsx)(m.EuiHorizontalRule,{margin:"s"}),Object(x.jsx)("div",{style:{padding:"0 1rem 1rem 1rem"}},Object(x.jsx)(lt,{alert:t})))};var ut=s(25),dt=s.n(ut);const pt="0,0.[00]",gt="0,0.0 b",mt="0,0.[0]a";function bt(e,t=!1,s=null){return t?dt.a.utc(e).format("LL LTS"):dt.a.tz(e,s||dt.a.tz.guess()).format("LL LTS")}function ht(e,t){return dt()(e).tz("Browser"===t?dt.a.tz.guess():t).fromNow()}function jt(e,t){return dt()(e).tz("Browser"===t?dt.a.tz.guess():t).calendar()}function xt(e,t){return e.state.ui.triggeredMS===t.state.ui.triggeredMS?0:e.state.ui.triggeredMS<t.state.ui.triggeredMS?1:-1}const ft=e=>`${e} alert${e>1?"s":""}`,Ot=e=>`${e} rule${e>1?"s":""}`,vt=se.i18n.translate("xpack.monitoring.alerts.badge.panelTitle",{defaultMessage:"Alerts"}),yt=se.i18n.translate("xpack.monitoring.rules.badge.panelTitle",{defaultMessage:"Rules"}),kt=se.i18n.translate("xpack.monitoring.alerts.badge.groupByNode",{defaultMessage:"Group by node"}),Mt=se.i18n.translate("xpack.monitoring.alerts.badge.groupByType",{defaultMessage:"Group by alert type"}),Et=e=>{const{stateFilter:t=(()=>!0)}=e,s=Object.values(e.alerts).flat().filter((e=>Boolean(null==e?void 0:e.sanitizedRule))),[a,i]=r.a.useState(null),n=Te(r.a.useContext(st)),l=n?s.length:s.reduce(((e,{states:s})=>e+s.filter((({state:e})=>t(e))).length),0),[c,u]=r.a.useState(!n&&l>8),d=n?yt:vt;if(r.a.useEffect((()=>{n&&c&&u(!1)}),[n,c]),0===l)return null;const p=kt,g=c?function(e,t,s){const a={},i={};for(const{states:e,sanitizedRule:n}of t){const{id:t}=n;for(const o of e.filter((({state:e})=>s(e)))){const{state:e}=o;i[e.nodeId]=i[e.nodeId]||[],i[e.nodeId].push(o),a[e.nodeId]=a[e.nodeId]||{},a[e.nodeId][t]=a[o.state.nodeId][t]||{alert:n,states:[],count:0},a[e.nodeId][t].count++,a[e.nodeId][t].states.push(o)}}for(const e of Object.values(a))for(const{states:t}of Object.values(e))t.sort(xt);const n=Object.keys(i).length;let r=n,l=n;return[{id:0,title:e,items:[...Object.keys(i).map(((e,t)=>{const a=i[e].filter((({state:e})=>s(e))),{nodeName:n,itemLabel:o}=a[0].state;return{name:Object(x.jsx)(m.EuiText,null,n||o," (",a.length,")"),panel:t+1}}))]},...Object.keys(i).reduce(((e,t,s)=>{const i=Object.values(a[t]),n=[];let l="";for(const{alert:e,states:t}of i)for(const s of t){const{nodeName:t,itemLabel:a}=s.state;l=t||a,n.push({name:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiToolTip,{position:"top",content:jt(s.state.ui.triggeredMS,Q.a.shims.uiSettings.get("dateFormat:tz"))},Object(x.jsx)(m.EuiText,{size:"s"},ht(s.state.ui.triggeredMS,Q.a.shims.uiSettings.get("dateFormat:tz")))),Object(x.jsx)(m.EuiText,{size:"s"},e.name)),panel:++r})}return e.push({id:s+1,title:l,items:n}),e}),[]),...Object.keys(i).reduce(((e,t,s)=>{const i=Object.values(a[t]);for(const{alert:t,states:s}of i)for(const a of s)e.push({id:++l,title:t.name,width:400,content:Object(x.jsx)(ct,{alert:t,alertState:a})});return e}),[])]}(d,s,t):function(e,t,s,a){const i=t?U.U.reduce(((e,t)=>{const a=t.rules.filter((e=>s.find((({sanitizedRule:t})=>t.alertTypeId===e.ruleName))));return a.length>0&&e.push({...t,alerts:a.map((({ruleName:e})=>s.filter((({sanitizedRule:t})=>t.alertTypeId===e)).map((t=>({alert:t.sanitizedRule,states:[],ruleName:e}))))).flat(),alertCount:0}),e}),[]):U.U.reduce(((e,t)=>{const i=[];let n=0;for(const{ruleName:e}of t.rules){const t=s.filter((({sanitizedRule:t,states:s})=>e===t.alertTypeId&&s.length>0));t.length>0&&t.forEach((t=>{const s=t.states.filter((({state:e})=>a(e)));s.length>0&&(i.push({alert:t.sanitizedRule,states:s,ruleName:e}),n+=s.length)}))}return i.length>0&&e.push({...t,alertCount:n,alerts:i}),e}),[]);for(const e of i)for(const t of e.alerts)t.states.sort(xt);const n=[{id:0,title:e,items:[...i.map(((e,s)=>({name:t?Object(x.jsx)(m.EuiText,null,e.label):Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,e.label," (",e.alertCount,")")),panel:s+1})))]}];if(t){let e=i.length,t=i.length,s=0;for(const t of i)n.push({id:s+1,title:`${t.label}`,items:t.alerts.map((t=>({name:Object(x.jsx)(m.EuiText,null,t.alert.name),panel:++e}))).flat()}),s++;for(const e of i)for(const{alert:s}of e.alerts)n.push({id:++t,title:`${s.name}`,width:400,content:Object(x.jsx)(ct,{alert:s})})}else{let e=i.length,s=0;for(const o of i)n.push({id:s+1,title:`${o.label}`,items:o.alerts.map((({alert:s,ruleName:i,states:n})=>{const o=n.filter((({state:e})=>a(e)));return{name:t?Object(x.jsx)(m.EuiText,null,s.name):Object(x.jsx)(m.EuiText,null,s.name," (",o.length,")"),panel:++e}}))}),s++;let r=i.length,l=i.reduce(((e,t)=>e+t.alerts.length),i.length);for(const e of i)for(const{alert:t,states:s}of e.alerts){const e=[];for(const t of s.filter((({state:e})=>a(e)))){const{nodeName:s,itemLabel:a}=t.state;e.push({name:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiToolTip,{position:"top",content:jt(t.state.ui.triggeredMS,Q.a.shims.uiSettings.get("dateFormat:tz"))},Object(x.jsx)(m.EuiText,{size:"s"},ht(t.state.ui.triggeredMS,Q.a.shims.uiSettings.get("dateFormat:tz")))),Object(x.jsx)(m.EuiText,{size:"s"},s||a)),panel:++l}),e.push({isSeparator:!0})}n.push({id:++r,title:`${t.name}`,items:e})}let c=i.reduce(((e,t)=>e+t.alerts.length),i.length);for(const e of i)for(const{alert:t,states:s}of e.alerts)for(const e of s.filter((({state:e})=>a(e))))n.push({id:++c,title:`${t.name}`,width:400,content:Object(x.jsx)(ct,{alert:t,alertState:e})})}return n}(d,!!n,s,t);g.length&&!n&&g[0].items&&g[0].items.push({isSeparator:!0},{name:Object(x.jsx)(m.EuiSwitch,{checked:!1,onChange:()=>u(!c),label:c?Mt:p})});const b=Object(x.jsx)(m.EuiBadge,{iconType:"bell",color:n?"default":"danger","data-test-subj":"alertsBadge",onClickAriaLabel:n?Ot(l):ft(l),onClick:()=>i(!0)},n?Ot(l):ft(l));return Object(x.jsx)(m.EuiPopover,{id:"monitoringAlertMenu",button:b,isOpen:!0===a,closePopover:()=>i(null),panelPaddingSize:"none",anchorPosition:"downLeft"},Object(x.jsx)(m.EuiContextMenu,{key:`${c?"byNode":"byType"}_${g.length}`,initialPanelId:0,panels:g}))},St=e=>{const{alerts:t,showBadge:s=!1,showOnlyCount:a=!1,stateFilter:i=(()=>!0)}=e,n=Te(r.a.useContext(st));if(!t)return null;let o=!1;const l=Object.values(t).flat().reduce(((e,t)=>{const s=t.states.filter((e=>e.firing));if(e+=s.filter((e=>i(e.state))).length,s.length&&!o)for(const e of t.states)if(i(e.state)&&e.state.ui.severity===xe.c.Danger){o=!0;break}return e}),0);if(0===l&&(!n||a))return Object(x.jsx)(m.EuiToolTip,{content:se.i18n.translate("xpack.monitoring.alerts.status.clearToolip",{defaultMessage:"No alerts firing"}),position:"bottom"},Object(x.jsx)(m.EuiHealth,{color:"success","data-test-subj":"alertIcon"},a?l:Object(x.jsx)("span",{"data-test-subj":"alertStatusText"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.status.clearText",defaultMessage:"Clear"}))));if(s||n)return Object(x.jsx)(Et,{alerts:t,stateFilter:i});const c=o?xe.c.Danger:xe.c.Warning,u=(()=>{switch(c){case xe.c.Danger:return se.i18n.translate("xpack.monitoring.alerts.status.highSeverityTooltip",{defaultMessage:"There are some critical issues that require your immediate attention!"});case xe.c.Warning:return se.i18n.translate("xpack.monitoring.alerts.status.mediumSeverityTooltip",{defaultMessage:"There are some issues that might have impact on the stack."});default:return se.i18n.translate("xpack.monitoring.alerts.status.lowSeverityTooltip",{defaultMessage:"There are some low-severity issues."})}})();return Object(x.jsx)(m.EuiToolTip,{content:u,position:"bottom"},Object(x.jsx)(m.EuiHealth,{color:c,"data-test-subj":"alertIcon"},a?l:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.status.alertsTooltip",defaultMessage:"Alerts"})))};s(69);const wt=({label:e,value:t,...s},a)=>Object(x.jsx)(m.EuiFlexItem,n()({style:{maxWidth:200},key:`summary-status-item-${a}`,grow:!1},s),Object(x.jsx)(m.EuiStat,{title:t,className:"monSummaryStatusNoWrap__stat",titleSize:"xxxs",textAlign:"left",description:e?`${e}`:""})),Tt=({status:e})=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.summaryStatus.statusIconTitle",defaultMessage:"Status: {statusIcon}",values:{statusIcon:Object(x.jsx)(tt,{type:e.toUpperCase(),label:se.i18n.translate("xpack.monitoring.summaryStatus.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:e}})})}})),_t=({status:e,IconComponent:t,isOnline:s=!1})=>null!=e&&e.length?Object(x.jsx)(m.EuiStat,{"data-test-subj":"status",title:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(t,{status:e,isOnline:s}),"",Object(P.capitalize)(e)),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:se.i18n.translate("xpack.monitoring.summaryStatus.statusDescription",{defaultMessage:"Status"})}):null;function Ct({metrics:e,alerts:t,status:s,isOnline:a=!1,IconComponent:i=Tt,StatusIndicator:o=_t,...r}){return Object(x.jsx)("div",n()({},r,{className:"monSummaryStatusNoWrap"}),Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"m",alignItems:"center",justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{className:"eui-textTruncate",style:{maxWidth:200},key:"summary-status-item-status",grow:!1},Object(x.jsx)(o,{status:s,isOnline:a,IconComponent:i})),t?Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiStat,{title:Object(x.jsx)(St,{showOnlyCount:!0,alerts:t}),titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat",description:se.i18n.translate("xpack.monitoring.summaryStatus.alertsDescription",{defaultMessage:"Alerts"})})):null,e.map(wt)))}function It({status:e}){const t=(()=>{const t=e.toUpperCase();return Ze[t]||Ze.GRAY})();return Object(x.jsx)(tt,{type:t,label:se.i18n.translate("xpack.monitoring.elasticsearch.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}var Lt=s(20),Pt=s.n(Lt);function Ft(e,t){return Dt(e,"byte")+" / "+Dt(t,"byte")}function Nt(e,t){return Dt(e/t,"0.00%")}function Dt(e,t){const s=Number.isNaN(e);let a="0,0.0";if("number"!=typeof e||s){if(void 0!==e&&!s)return e;e=0,a="0"}let i="";switch(t){case"time_since":return it()(it()()-e).from(it()(),!0);case"time":return it()(e).format("H:mm:ss");case"int_commas":a="0,0";break;case"byte":case"bytes":a+=" b";break;case"ms":i="ms";break;default:t&&(a=t)}return Pt()(e).format(a)+i}function zt(e,t,s,a={}){const{prependSpace:i=!0}=a;if(Boolean(e)||0===e){let a="";return void 0!==s&&(a=i?` ${s}`:s),Dt(e,t)+a}return se.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"})}function Rt({stats:e,alerts:t}){const{dataSize:s,nodesCount:a,indicesCount:i,memUsed:n,memMax:o,totalShards:r,unassignedShards:l,documentCount:c,status:u}=e,d=[{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:a,"data-test-subj":"nodesCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.indicesLabel",{defaultMessage:"Indices"}),value:i,"data-test-subj":"indicesCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.memoryLabel",{defaultMessage:"JVM Heap"}),value:zt(n,"byte")+" / "+zt(o,"byte"),"data-test-subj":"memory"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.totalShardsLabel",{defaultMessage:"Total shards"}),value:r,"data-test-subj":"totalShards"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.unassignedShardsLabel",{defaultMessage:"Unassigned shards"}),value:l,"data-test-subj":"unassignedShards"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.documentsLabel",{defaultMessage:"Documents"}),value:zt(c,"int_commas"),"data-test-subj":"documentCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.clusterStatus.dataLabel",{defaultMessage:"Data"}),value:zt(s,"byte"),"data-test-subj":"dataSize"}];return Object(x.jsx)(Ct,{metrics:d,status:u,alerts:t,IconComponent:({status:e})=>Object(x.jsx)(It,{status:e}),"data-test-subj":"elasticsearchClusterStatus"})}const At=se.i18n.translate("xpack.monitoring.setupMode.node",{defaultMessage:"node"}),Bt=se.i18n.translate("xpack.monitoring.setupMode.nodes",{defaultMessage:"nodes"}),Vt=se.i18n.translate("xpack.monitoring.setupMode.instance",{defaultMessage:"instance"}),Ut=se.i18n.translate("xpack.monitoring.setupMode.instances",{defaultMessage:"instances"}),$t=se.i18n.translate("xpack.monitoring.setupMode.server",{defaultMessage:"server"}),Ht=se.i18n.translate("xpack.monitoring.setupMode.servers",{defaultMessage:"servers"});function Wt(e){return e===U.a?e.toUpperCase():Object(P.capitalize)(e)}const qt=[U.F,U.r],Gt=[U.B,U.b];function Kt(e,t=!1){return Gt.includes(e)?t?Ut:Vt:qt.includes(e)?t?Bt:At:e===U.a?t?Ht:$t:e}const Jt=({rows:e,search:t={},columns:s,setupMode:a,productName:i,...l})=>{const[c,u]=r.a.useState(e.length>0);if(t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar"),t.box&&!t.box.schema&&(t.box.schema=!0),t){const s=t.onChange;t.onChange=t=>{const a=m.EuiSearchBar.Query.execute(t.query,e,l.executeQueryOptions);return u(a.length>0),s&&s(t),!0}}const d=s.map((e=>("sortable"in e||(e.sortable=!0),e)));let p=null;return a&&_e(xe.d.MetricbeatMigration)&&(p=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiButton,{iconType:"flag",onClick:()=>a.openFlyout({},!0)},se.i18n.translate("xpack.monitoring.euiTable.setupNewButtonLabel",{defaultMessage:"Monitor another {identifier} with Metricbeat",values:{identifier:Kt(i)}})))),Object(x.jsx)("div",{"data-test-subj":`${l.className}Container`},Object(x.jsx)(m.EuiInMemoryTable,n()({"data-test-subj":e.length&&!0===c?"monitoringTableHasData":"monitoringTableNoData",items:e,search:t,columns:d},l)),p)};function Yt({rows:e,search:t={},pagination:s,columns:a,onTableChange:i,setupMode:l,productName:c,...u}){const[d,p]=r.a.useState(""),[g,b]=r.a.useState(!1),[h,j]=r.a.useState({index:s.pageIndex,size:s.pageSize});s.totalItemCount||(s.totalItemCount=e&&e.length||0);const[f,O]=r.a.useState(u.sorting);t.box&&!t.box["data-test-subj"]&&(t.box["data-test-subj"]="monitoringTableToolBar");const v=a.map((e=>("sortable"in e||(e.sortable=!0),e)));let y=null;return l&&l.enabled&&_e(xe.d.MetricbeatMigration)&&(y=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiButton,{iconType:"flag",onClick:()=>l.openFlyout({},!0)},se.i18n.translate("xpack.monitoring.euiSSPTable.setupNewButtonLabel",{defaultMessage:"Set up monitoring for new {identifier}",values:{identifier:Kt(c)}})))),Object(x.jsx)("div",{"data-test-subj":`${u.className}Container`},Object(x.jsx)(m.EuiSearchBar,n()({},t,{onChange:async({queryText:e})=>{const t={...h,index:0};j(t),p(e),u.fetchMoreData?(b(!0),await u.fetchMoreData({page:t,sort:f,queryText:e}),b(!1)):i({page:h,sort:f.sort,queryText:e})}})),Object(x.jsx)(m.EuiSpacer,{size:"l"}),Object(x.jsx)(m.EuiBasicTable,n()({},u,{"data-test-subj":e.length?"monitoringTableHasData":"monitoringTableNoData",items:e,pagination:s,onChange:async({page:e,sort:t})=>{j(e),O({sort:t}),u.fetchMoreData?(b(!0),await u.fetchMoreData({page:e,sort:{sort:t},queryText:d}),b(!1),i({page:e,sort:t})):i({page:e,sort:t,queryText:d})},columns:v,loading:u.isLoading||g})),y)}var Qt=s(37);const Xt=({isSnapshot:e,repo:t,snapshot:s})=>e?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.snapshotTitle",defaultMessage:"Repo: {repo} / Snapshot: {snapshot}",values:{repo:t,snapshot:s}})):null,Zt=e=>{const{name:t,shard:s,relocationType:a}=e;return Object(x.jsx)("div",null,Object(x.jsx)(m.EuiLink,{href:$e(`#/elasticsearch/indices/${t}`)},t),Object(x.jsx)("br",null),Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.shardDescription",defaultMessage:"Shard: {shard}",values:{shard:s}}),Object(x.jsx)("br",null),Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.recoveryIndex.recoveryTypeDescription",defaultMessage:"Recovery type: {relocationType}",values:{relocationType:a}}),Object(x.jsx)("div",null,Object(x.jsx)(Xt,e)))},es=({startTime:e,totalTime:t})=>Object(x.jsx)(m.EuiToolTip,{content:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.totalTimeTooltip",defaultMessage:"Started: {startTime}",values:{startTime:e}}),position:"bottom"},Object(x.jsx)(m.EuiLink,null,t)),ts=({isCopiedFromPrimary:e,sourceTransportAddress:t,children:s})=>{if(!t)return s;const a=Object(x.jsx)(o.Fragment,null,t,Object(x.jsx)("br",null),Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip",defaultMessage:"Copied from {copiedFrom} shard",values:{copiedFrom:e?Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.primarySourceText",defaultMessage:"primary"}):Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.sourceTooltip.replicaSourceText",defaultMessage:"replica"})}}));return Object(x.jsx)(m.EuiToolTip,{content:a,position:"bottom"},Object(x.jsx)(m.EuiLink,null,s))},ss=e=>{const{sourceName:t,targetName:s,targetTransportAddress:a}=e,i=a||se.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.unknownTargetAddressContent",{defaultMessage:"Unknown"});return Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center",wrap:!0},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(ts,e,t)),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiIcon,{type:"arrowRight",size:"s"})),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiToolTip,{content:i,position:"bottom"},Object(x.jsx)(m.EuiLink,null,s))))},as=({filesPercent:e,filesDone:t,filesTotal:s})=>Object(x.jsx)(o.Fragment,null,e,Object(x.jsx)("br",null),t," / ",s),is=({bytesPercent:e,bytesDone:t,bytesTotal:s})=>Object(x.jsx)(o.Fragment,null,e,Object(x.jsx)("br",null),t," / ",s),ns=({hasTranslog:e,translogPercent:t,translogDone:s,translogTotal:a})=>e?Object(x.jsx)(o.Fragment,null,t,Object(x.jsx)("br",null),s," / ",a):Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.progress.noTranslogProgressLabel",defaultMessage:"n/a"}),os=e=>{if(void 0!==e){const t=e.match(/([\d\.:]+)\]$/);if(t)return t[1]}return e},rs=e=>Object(P.capitalize)(e.toLowerCase()),ls=[{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.indexTitle",{defaultMessage:"Index"}),field:"name",render:(e,t)=>Object(x.jsx)(Zt,t)},{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.stageTitle",{defaultMessage:"Stage"}),field:"stage"},{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.totalTimeTitle",{defaultMessage:"Total Time"}),field:null,render:e=>Object(x.jsx)(es,e)},{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.sourceDestinationTitle",{defaultMessage:"Source / Destination"}),field:null,render:e=>Object(x.jsx)(ss,e)},{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.filesTitle",{defaultMessage:"Files"}),field:null,render:e=>Object(x.jsx)(as,e)},{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.bytesTitle",{defaultMessage:"Bytes"}),field:null,render:e=>Object(x.jsx)(is,e)},{name:se.i18n.translate("xpack.monitoring.kibana.shardActivity.translogTitle",{defaultMessage:"Translog"}),field:null,render:e=>Object(x.jsx)(ns,e)}],cs=e=>{var t;const{data:s,sorting:i,pagination:n,onTableChange:r,toggleShardActivityHistory:l,showShardActivityHistory:c}=e,{services:u}=Object(a.useKibana)(),d=null===(t=u.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),p=s.map((e=>(e=>{const{id:t,stage:s,index:a,index_name:i,name:n,primary:o,start_time_in_millis:r,total_time_in_millis:l,start_time:c,total_time:u,source:d={},target:p={},translog:g,type:m,timezone:b}=e,{files:h,size:j}=a;return{name:i||n,shard:`${t} / ${o?"Primary":"Replica"}`,relocationType:"PRIMARY_RELOCATION"===m?"Primary Relocation":rs(m),stage:rs(s),startTime:bt(r||(null==c?void 0:c.ms),b),totalTime:zt(Math.floor((l||(null==u?void 0:u.ms))/1e3),"00:00:00"),isCopiedFromPrimary:!o||"PRIMARY_RELOCATION"===m,sourceName:void 0===d.name?"n/a":d.name,targetName:p.name,sourceTransportAddress:os(d.transport_address),targetTransportAddress:os(p.transport_address),isSnapshot:"SNAPSHOT"===m,repo:d.repository,snapshot:d.snapshot,filesPercent:h.percent,filesDone:h.reused?h.reused:h.recovered,filesTotal:h.total,bytesPercent:j.percent,bytesDone:zt(j.recovered_in_bytes+j.reused_in_bytes,"byte"),bytesTotal:zt(j.total_in_bytes,"byte"),hasTranslog:g.total>0,translogPercent:g.percent,translogDone:g.total,translogTotal:g.total_on_start}})({...e,timezone:d})));return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivityTitle",defaultMessage:"Shard Activity"})))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiSwitch,{id:"monitoring_completed_recoveries",label:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.completedRecoveriesLabel",defaultMessage:"Completed recoveries"}),onChange:l,checked:c}),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(Jt,{className:"esShardActivityTable",rows:p,columns:ls,message:c?se.i18n.translate("xpack.monitoring.elasticsearch.shardActivity.noDataMessage",{defaultMessage:"There are no historical shard activity records for the selected time range."}):Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextProblem",defaultMessage:"There are no active shard recoveries for this cluster."}),Object(x.jsx)("br",null),Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkTextSolution",defaultMessage:"Try viewing {shardActivityHistoryLink}.",values:{shardActivityHistoryLink:Object(x.jsx)(m.EuiLink,{onClick:l},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardActivity.noActiveShardRecoveriesMessage.completedRecoveriesLinkText",defaultMessage:"completed recoveries"}))}})),sorting:i,search:!1,pagination:n,onTableChange:r,executeQueryOptions:{defaultFields:["name"]}}))};function us(e,t){let s;return s="elasticsearch"===e?["#3ebeb0","#3b73ac","#f08656","#6c478f"]:"apm"===e?Object(m.euiPaletteColorBlind)():["#e8488b","#3b73ac","#3cab63","#6c478f"],s[t]?s[t]:"#000"}var ds=s(26),ps=s.n(ds);const gs=ps()({});class chart_target_ChartTarget extends r.a.Component{shouldComponentUpdate(){return!this.plot}shutdownChart(){if(!this.plot)return;const{target:e}=this.refs;ps()(e).off("plothover"),ps()(e).off("mouseleave"),ps()(e).off("plotselected"),ps()(e).off("plotselecting"),this.plot.shutdown(),gs.off("thorPlotHover"),gs.off("thorPlotLeave"),gs.off("thorPlotSelecting"),gs.off("thorPlotBrush")}componentWillUnmount(){this.shutdownChart(),window.removeEventListener("resize",this._handleResize),this.componentUnmounted=!0}filterByShow(e){return e?t=>e.some((e=>e.toLowerCase()===t.id.toLowerCase())):()=>!0}UNSAFE_componentWillReceiveProps(e){if(this.plot&&!Object(P.isEqual)(e,this.props)){const{series:t,timeRange:s}=e,a=this.plot.getAxes().xaxis.options;a.min=Object(P.get)(s,"min"),a.max=Object(P.get)(s,"max"),this.plot.setData(this.filterData(t,e.seriesToShow)),this.plot.setupGrid(),this.plot.draw()}}componentDidMount(){this.renderChart()}componentDidUpdate(){this.shutdownChart(),this.renderChart()}filterData(e,t){return Object(P.filter)(e,this.filterByShow(t))}async getOptions(){return{...await async function(e){var t;const s=null===(t=Q.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),a={legend:{show:!1},xaxis:{color:U.f,timezone:"Browser"===s?"browser":"utc",mode:"time",font:{color:U.g}},yaxis:{color:U.f,font:{color:U.g}},series:{points:{show:!0,radius:1},lines:{show:!0,lineWidth:2},shadowSize:0},grid:{margin:0,borderWidth:1,borderColor:U.f,hoverable:!0},crosshair:{mode:"x",color:"#c66",lineWidth:2},selection:{mode:"x",color:U.g}};return Object(P.merge)(a,e)}({yaxis:{tickFormatter:this.props.tickFormatter},xaxis:this.props.timeRange}),...this.props.options}}async renderChart(){const{target:e}=this.refs,{series:t}=this.props,s=this.filterData(t,this.props.seriesToShow);this.plot=ps.a.plot(e,s,await this.getOptions()),!this.componentUnmounted&&this.plot&&(this._handleResize=()=>{if(this.plot)try{this.plot.resize(),this.plot.setupGrid(),this.plot.draw()}catch(e){}},window.addEventListener("resize",this._handleResize,!1),this.handleMouseLeave=()=>{gs.trigger("thorPlotLeave",[])},this.handlePlotHover=(e,t,s)=>{gs.trigger("thorPlotHover",[t,s,this.plot])},this.handleThorPlotHover=(e,t,s,a)=>{this.plot!==a&&this.plot.setCrosshair({x:Object(P.get)(t,"x")}),this.props.updateLegend(t,s)},this.handleThorPlotLeave=()=>{this.plot.clearCrosshair(),this.props.updateLegend()},this.handleThorPlotSelecting=(e,t,s)=>{if(this.plot!==s){const e=!0;this.plot.setSelection({xaxis:t},e)}},this.handleThorPlotBrush=()=>{this.plot.clearSelection()},this.selectingChart=(e,t)=>{if(t){const e=t.xaxis;gs.trigger("thorPlotSelecting",[e,this.plot])}},this.brushChart=(e,t)=>{this.props.onBrush(t),gs.trigger("thorPlotBrush")},ps()(e).on("plothover",this.handlePlotHover),ps()(e).on("mouseleave",this.handleMouseLeave),ps()(e).on("plotselected",this.brushChart),ps()(e).on("plotselecting",this.selectingChart),gs.on("thorPlotHover",this.handleThorPlotHover),gs.on("thorPlotLeave",this.handleThorPlotLeave),gs.on("thorPlotSelecting",this.handleThorPlotSelecting),gs.on("thorPlotBrush",this.handleThorPlotBrush))}render(){return Object(x.jsx)("div",{ref:"target",style:{position:"relative",display:"flex",rowDirection:"column",flex:"1 0 auto"}})}}function ms(e){return Object(x.jsx)("div",{style:{display:"flex",rowDirection:"column",flex:"1 0 auto",position:"relative"}},Object(x.jsx)(chart_target_ChartTarget,e))}s(74);class horizontal_legend_HorizontalLegend extends r.a.Component{constructor(){super(),this.formatter=this.formatter.bind(this),this.createSeries=this.createSeries.bind(this)}displayValue(e){return Object(x.jsx)("span",{className:"monRhythmChart__legendValue"},e)}validValue(e){return null!=e&&("string"==typeof e||!isNaN(e))}formatter(e,t){if(!this.validValue(e))return Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.chart.horizontalLegend.notAvailableLabel",defaultMessage:"N/A"});if(t&&t.tickFormatter)return this.displayValue(t.tickFormatter(e));const s=this.props.legendFormatter||this.props.tickFormatter;return Object(P.isFunction)(s)?this.displayValue(s(e)):this.displayValue(e)}createSeries(e,t){const s=["monRhythmChart__legendItem"];return Object(P.includes)(this.props.seriesFilter,e.id)||s.push("monRhythmChart__legendItem-isDisabled"),e.label&&!1!==e.legend?Object(x.jsx)(m.EuiFlexItem,{grow:!1,key:t},Object(x.jsx)("button",{className:s.join(" "),onClick:t=>this.props.onToggle(t,e.id)},Object(x.jsx)("span",{className:"monRhythmChart__legendLabel"},Object(x.jsx)(m.EuiIcon,{className:"monRhythmChart__legendIndicator","aria-label":se.i18n.translate("xpack.monitoring.chart.horizontalLegend.toggleButtonAriaLabel",{defaultMessage:"toggle button"}),size:"l",type:"dot",color:e.color})," "+e.label+" "),this.formatter(this.props.seriesValues[e.id],e))):Object(x.jsx)("div",{key:t,style:{display:"none"}})}render(){const e=this.props.series.map(this.createSeries);return Object(x.jsx)("div",{className:"monRhythmChart__legendHorizontal"},Object(x.jsx)(m.EuiFlexGroup,{wrap:!0,gutterSize:"s",className:"monRhythmChart__legendSeries"},e))}}function bs(e,t,s){for(let a=0;a<e.length;a++){const i=e[a],n=i.data;let o=null;n.length>t&&n[t]&&(o=n[t][1]),s(i.id,o)}}function hs(e,t){const s=e.length;if(1===s)return 0;if(0!==s){let a=null;e[0]&&(a=0);for(let i=1;i<s;++i)if(e[i]){if(e[i][0]>t){const s=e[i][0]-t;return null!==a&&s>Math.abs(t-e[a][0])?a:i}a=i}}return s-1}s(79);class timeseries_visualization_TimeseriesVisualization extends r.a.Component{constructor(e){super(e),this.debouncedUpdateLegend=Object(P.debounce)(this.updateLegend,U.q),this.debouncedUpdateLegend=this.debouncedUpdateLegend.bind(this),this.toggleFilter=this.toggleFilter.bind(this);const t=this.getLastValues(e);this.state={values:{},seriesToShow:Object(P.keys)(t),ignoreVisibilityUpdates:!1}}filterLegend(e){if(!Object(P.has)(this.state.values,e))return[];const t=Object(P.keys)(this.state.values).length!==this.state.seriesToShow.length,s=Object(P.includes)(this.state.seriesToShow,e),a=[];return t&&s?this.setState({ignoreVisibilityUpdates:!1,seriesToShow:Object.keys(this.state.values)}):(a.push(e),this.setState({ignoreVisibilityUpdates:!0,seriesToShow:[e]})),a}toggleFilter(e,t){const s=this.filterLegend(t);Object(P.isFunction)(this.props.onFilter)&&this.props.onFilter(s)}getLastValues(e){e=e||this.props;const t={};return e.series.forEach((e=>{e.id||(e.id=e.label),t[e.id]=function(e){if(Object(P.isNumber)(e))return e;if(!Array.isArray(e))return null;const t=Object(P.get)(Object(P.last)(e),"[1]");return Object(P.isNumber)(t)?t:null}(e.data)})),t}updateLegend(e,t){const s={};if(e){const a=(e,t)=>{s[e]=t};t?bs(this.props.series,t.dataIndex,a):function(e,t,s){for(let a=0;a<e.length;a++){const i=hs(e[a].data,t);if(-1!==i){bs(e,i,s);break}}}(this.props.series,e.x,a)}else Object(P.assign)(s,this.getLastValues());this.setState({values:s})}UNSAFE_componentWillReceiveProps(e){const t=this.getLastValues(e),s=Object(P.keys)(this.state.values),a=Object(P.keys)(t),i={values:t};Object(P.difference)(a,s).length&&!this.state.ignoreVisibilityUpdates&&(i.seriesToShow=a),this.setState(i)}render(){const e=this.props.hasLegend?Object(x.jsx)(horizontal_legend_HorizontalLegend,n()({seriesFilter:this.state.seriesToShow,seriesValues:this.state.values,onToggle:this.toggleFilter},this.props)):null;return Object(x.jsx)("div",{className:"monRhythmChart"},Object(x.jsx)("div",{style:{flexDirection:"column"},className:"monRhythmChart__content"},Object(x.jsx)("div",{className:"monRhythmChart__visualization"},Object(x.jsx)(ms,n()({seriesToShow:this.state.seriesToShow,updateLegend:this.debouncedUpdateLegend},this.props))),e))}}function js(e,t="metric.format"){const s=Object(P.get)(e,t,"0,0.0"),a=Object(P.get)(e,"metric.units","");return function(e){let t=Pt()(e).format(s);return"B"!==a&&""!==a&&(t+=" "+a),t}}function xs({series:e,onBrush:t}){const s=e.map(((e,t)=>({color:us(e.metric.app,t),data:e.data,label:e.metric.label}))),a=Object(P.first)(e),i=Object(P.get)(a,"timeRange"),n=js(a),o=a.metric.legendFormat&&js(a,"metric.legendFormat");return Object(x.jsx)(timeseries_visualization_TimeseriesVisualization,{series:s,timeRange:i,tickFormatter:n,legendFormatter:o,onBrush:t})}function fs({series:e,bucketSize:t}){const s=e.map(((e,t)=>Object(x.jsx)("tr",{key:`chart-tooltip-${t}`,"data-debug-metric-agg":e.metric.metricAgg,"data-debug-metric-field":e.metric.field,"data-debug-metric-is-derivative":e.metric.isDerivative,"data-debug-metric-has-calculation":e.metric.hasCalculation},Object(x.jsx)("td",{className:"monChart__tooltipLabel"},e.metric.label),Object(x.jsx)("td",{className:"monChart__tooltipValue"},e.metric.description))));return Object(x.jsx)("table",null,Object(x.jsx)("tbody",null,Object(x.jsx)("tr",null,Object(x.jsx)("td",{className:"monChart__tooltipLabel"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.chart.infoTooltip.intervalLabel",defaultMessage:"Interval"})),Object(x.jsx)("td",{className:"monChart__tooltipValue"},t)),s))}function Os(e=[]){return Object(P.chain)(e.map((e=>e.metric.title||e.metric.label))).first().value()}timeseries_visualization_TimeseriesVisualization.defaultProps={hasLegend:!0},s(84),s(89);const vs=e=>void 0!==e.alerts,ys=e=>e&&e.showZoomOutBtn()?Object(x.jsx)(m.EuiFlexItem,{className:"monRhythmChart__zoom"},Object(x.jsx)(m.EuiTextAlign,{textAlign:"right"},Object(x.jsx)(m.EuiButtonEmpty,{color:"primary",size:"s",iconType:"magnifyWithMinus",onClick:e.zoomOutHandler},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.zoomOut",defaultMessage:"Zoom out"})))):null,ks=e=>e?Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiBadge,{color:"hollow",iconType:"cheer"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.chart.timeSeries.technicalPreview",defaultMessage:"Technical Preview"}))):null;function Ms({series:e,onBrush:t,zoomInfo:s}){if(void 0===e)return null;const a=vs(e)?[]:e,i=Os(a),n=function(e=[]){return Object(P.chain)(e.map((e=>Boolean(e.metric.technicalPreview)))).first().value()}(a),r=i.replace(/\s+/,"--"),l=function(e){let t=Object(P.get)(e,"[0].metric.units");if("B"===t){let s=0;Object(P.forEach)(e,(e=>{const t=Object(P.last)(e.data)||[null,0];s=Math.max(s,t[1])})),t=Pt()(s).byteUnits()}return t}(a),c=Object(P.get)(Object(P.first)(a),"bucket_size"),u=[se.i18n.translate("xpack.monitoring.chart.seriesScreenReaderListDescription",{defaultMessage:"Interval: {bucketSize}",values:{bucketSize:c}})].concat(a.map((e=>`${e.metric.label}: ${e.metric.description}`)));let d=null;const p=vs(e)?e:void 0;return null!=p&&p.alerts&&(d=Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Et,{alerts:p.alerts}))),Object(x.jsx)(m.EuiFlexGroup,{direction:"column",gutterSize:"s",className:"monRhythmChart__wrapper"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,Os(a),l?` (${l})`:"",Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("span",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.chart.screenReaderUnaccessibleTitle",defaultMessage:"This chart is not screen reader accessible"})))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiIconTip,{anchorClassName:"eui-textRight eui-alignMiddle monChart__tooltipTrigger",type:"iInCircle",position:"right",content:Object(x.jsx)(fs,{series:a,bucketSize:c})}),Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("span",{id:`monitoringChart${r}`},u.join(". "))))),ks(n),ys(s))),d)),Object(x.jsx)(m.EuiFlexItem,{style:{minHeight:"200px"}},Object(x.jsx)(xs,{series:a,onBrush:t})))}const Es=r.a.createContext(null),Ss=({children:e,...t})=>{const{navigateToUrl:s,currentAppId:a}=t;return Object(x.jsx)(Es.Provider,{value:{navigateToUrl:s,currentAppId:a}},e)},ws=({children:e,coreStart:t})=>{const{navigateToUrl:s,currentAppId$:a}=t.application,i=d()(a,void 0);return Object(x.jsx)(Es.Provider,{value:{navigateToUrl:s,currentAppId:i}},e)},Ts={name:"h42ud6",styles:"display:inherit;height:inherit;width:inherit;flex:1;flex-flow:column nowrap"},_s=({children:e,navigateToUrl:t,currentAppId:s,...a})=>{const i=Object(o.useRef)(null),r=Object(o.useCallback)((e=>(({event:e,container:t,navigateToUrl:s,currentAppId:a})=>{if(!t||!a)return;const i=((e,t)=>{let s=e;do{var a,i;if("a"===(null===(a=s)||void 0===a?void 0:a.tagName.toLowerCase()))return s;const e=null===(i=s)||void 0===i?void 0:i.parentElement;if(!e||e===document.body||e===t)break;s=e}while(parent||parent!==document.body||parent!==t)})(e.target,t);if(!i)return;const n=i.href,o=""===i.target||"_self"===i.target,r=0===e.button;n&&o&&r&&!e.defaultPrevented&&!(e=>e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)(e)&&(e.preventDefault(),s(i.href))})({event:e,currentAppId:s,navigateToUrl:t,container:i.current})),[s,t]);return Object(x.jsx)("div",n()({onClick:r,ref:i,css:Ts,"data-test-subj":"kbnRedirectAppLink"},a),e)},Cs=({children:e,...t})=>Object(x.jsx)(_s,n()({},function(){const e=Object(o.useContext)(Es);if(!e)throw new Error("RedirectAppLinksContext is missing.  Ensure your component or React root is wrapped with RedirectAppLinksProvider.");return e}(),t),e),Is=({children:e,...t})=>{if(void 0!==t.coreStart){const{coreStart:s,...a}=t,i=Object(x.jsx)(Cs,a,e);return Object(x.jsx)(ws,{coreStart:s},i)}const{navigateToUrl:s,currentAppId:a,...i}=t,n=Object(x.jsx)(Cs,i,e);return Object(x.jsx)(Ss,{currentAppId:a,navigateToUrl:s},n)},Ls=({children:e})=>Object(x.jsx)("span",{style:{fontFamily:"monospace"}},e),Ps=({reason:e})=>{const t=Q.a.shims.docLinks.links.filebeat.installation,s=Q.a.shims.docLinks.links.filebeat.elasticsearchModule,a=Q.a.shims.docLinks.links.monitoring.troubleshootKibana;let i=se.i18n.translate("xpack.monitoring.logs.reason.defaultTitle",{defaultMessage:"No log data found"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessage",defaultMessage:"We did not find any log data and we are unable to diagnose why. {link}",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:t},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.defaultMessageLink",defaultMessage:"Please verify your setup is correct."}))}});return!1===e.indexPatternExists?(i=se.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternTitle",{defaultMessage:"No log data found"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternMessage",defaultMessage:"Set up {link}, then configure your Elasticsearch output to your monitoring cluster.",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:t},se.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternLink",{defaultMessage:"Filebeat"}))}})):!1===e.indexPatternInTimeRangeExists||!1===e.typeExists&&e.typeExistsAtAnyTime?(i=se.i18n.translate("xpack.monitoring.logs.reason.noIndexPatternInTimePeriodTitle",{defaultMessage:"No logs for the selected time"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexPatternInTimePeriodMessage",defaultMessage:"Use the time filter to adjust your timeframe."})):!1===e.typeExists?(i=se.i18n.translate("xpack.monitoring.logs.reason.noTypeTitle",{defaultMessage:"No logs for Elasticsearch"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.noTypeMessage",defaultMessage:"Follow {link} to set up Elasticsearch.",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:s},se.i18n.translate("xpack.monitoring.logs.reason.noTypeLink",{defaultMessage:"these directions"}))}})):!1===e.usingStructuredLogs?(i=se.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsTitle",{defaultMessage:"No structured logs found"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.notUsingStructuredLogsMessage",defaultMessage:"Check if the {varPaths} setting {link}.",values:{varPaths:Object(x.jsx)(Ls,null,"var.paths"),link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:s},se.i18n.translate("xpack.monitoring.logs.reason.notUsingStructuredLogsLink",{defaultMessage:"points to JSON logs"}))}})):!1===e.clusterExists?(i=se.i18n.translate("xpack.monitoring.logs.reason.noClusterTitle",{defaultMessage:"No logs for this cluster"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.noClusterMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:s},se.i18n.translate("xpack.monitoring.logs.reason.noClusterLink",{defaultMessage:"setup"}))}})):!1===e.nodeExists?(i=se.i18n.translate("xpack.monitoring.logs.reason.noNodeTitle",{defaultMessage:"No logs for this Elasticsearch node"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.noNodeMessage",defaultMessage:"Check that your {link} is correct.",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:s},se.i18n.translate("xpack.monitoring.logs.reason.noNodeLink",{defaultMessage:"setup"}))}})):!1===e.indexExists?(i=se.i18n.translate("xpack.monitoring.logs.reason.noIndexTitle",{defaultMessage:"No logs for this index"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.noIndexMessage",defaultMessage:"We found logs, but none for this index. If this problem continues, check that your {link} is correct.",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:s},se.i18n.translate("xpack.monitoring.logs.reason.noIndexLink",{defaultMessage:"setup"}))}})):!1===e.correctIndexName&&(i=se.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameTitle",{defaultMessage:"Corrupted filebeat index"}),n=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.reason.correctIndexNameMessage",defaultMessage:"There is an issue reading from your filebeat indices.  {link}.",values:{link:Object(x.jsx)(m.EuiLink,{target:"_blank",href:a},se.i18n.translate("xpack.monitoring.logs.reason.correctIndexNameLink",{defaultMessage:"Click here for more information"}))}})),Object(x.jsx)(m.EuiCallOut,{title:i,color:"warning",iconType:"help"},Object(x.jsx)("p",null,n))},Fs=e=>{var t;return bt(e,null===(t=Q.a.shims.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"))},Ns=se.i18n.translate("xpack.monitoring.logs.listing.timestampTitle",{defaultMessage:"Timestamp"}),Ds=se.i18n.translate("xpack.monitoring.logs.listing.levelTitle",{defaultMessage:"Level"}),zs=se.i18n.translate("xpack.monitoring.logs.listing.typeTitle",{defaultMessage:"Type"}),Rs=se.i18n.translate("xpack.monitoring.logs.listing.messageTitle",{defaultMessage:"Message"}),As=se.i18n.translate("xpack.monitoring.logs.listing.componentTitle",{defaultMessage:"Component"}),Bs=se.i18n.translate("xpack.monitoring.logs.listing.nodeTitle",{defaultMessage:"Node"}),Vs=[{field:"timestamp",name:Ns,width:"12%",render:e=>Fs(e)},{field:"level",name:Ds,width:"5%"},{field:"type",name:zs,width:"10%",render:e=>Object(P.upperFirst)(e)},{field:"message",name:Rs,width:"55%"},{field:"component",name:As,width:"18%"}],Us=[{field:"timestamp",name:Ns,width:"12%",render:e=>Fs(e)},{field:"level",name:Ds,width:"5%"},{field:"type",name:zs,width:"10%",render:e=>Object(P.upperFirst)(e)},{field:"message",name:Rs,width:"45%"},{field:"component",name:As,width:"15%"},{field:"node",name:Bs,width:"13%"}];function $s(e,t,s){const a=[];return e&&a.push(`elasticsearch.cluster.uuid:${e}`),t&&a.push(`elasticsearch.node.id:${t}`),s&&a.push(`elasticsearch.index.name:${s}`),Q.a.shims.infra.locators.logsLocator.getRedirectUrl({logView:{logViewId:U.A,type:"log-view-reference"},...a.length?{filter:a.join(" and ")}:{}})}class logs_Logs extends o.PureComponent{renderLogs(){const{logs:{enabled:e,logs:t},nodeId:s,indexUuid:a}=this.props;return e?Object(x.jsx)(m.EuiBasicTable,{items:t||[],columns:s||a?Vs:Us}):null}renderNoLogs(){const{logs:{enabled:e,reason:t}}=this.props;return e?null:Object(x.jsx)(Ps,{reason:t})}renderCallout(){const{capabilities:e,infra:t,kibanaServices:s}=Q.a.shims,a=e.logs&&e.logs.show,{logs:{enabled:i},nodeId:n,clusterUuid:o,indexUuid:r}=this.props;return i&&a&&t?Object(x.jsx)(m.EuiCallOut,{size:"m",title:se.i18n.translate("xpack.monitoring.logs.listing.calloutTitle",{defaultMessage:"Want to see more log entries?"}),iconType:"logsApp"},Object(x.jsx)(Is,{coreStart:s},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logs.listing.linkText",defaultMessage:"Visit {link} to dive deeper.",values:{link:Object(x.jsx)(m.EuiLink,{href:$s(o,n,r)},se.i18n.translate("xpack.monitoring.logs.listing.calloutLinkText",{defaultMessage:"Logs"}))}}))):null}render(){const{nodeId:e,indexUuid:t,logs:{limit:s}}=this.props;let a;return a=e?se.i18n.translate("xpack.monitoring.logs.listing.nodePageDescription",{defaultMessage:"Showing the most recent log entries for this node, up to {limit} total log entries.",values:{limit:s}}):t?se.i18n.translate("xpack.monitoring.logs.listing.indexPageDescription",{defaultMessage:"Showing the most recent log entries for this index, up to {limit} total log entries.",values:{limit:s}}):se.i18n.translate("xpack.monitoring.logs.listing.clusterPageDescription",{defaultMessage:"Showing the most recent log entries for this cluster, up to {limit} total log entries.",values:{limit:s}}),Object(x.jsx)("div",null,Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h1",null,se.i18n.translate("xpack.monitoring.logs.listing.pageTitle",{defaultMessage:"Recent Log Entries"}))),Object(x.jsx)(m.EuiText,{size:"s"},Object(x.jsx)("p",null,a)),Object(x.jsx)(m.EuiSpacer,{size:"m"}),this.renderLogs(),this.renderNoLogs(),Object(x.jsx)(m.EuiSpacer,{size:"m"}),this.renderCallout())}}function Hs({clusterStatus:e,metrics:t,logs:s,cluster:a,shardActivity:i,...o}){const r=[t.cluster_search_request_rate,t.cluster_query_latency,t.cluster_index_request_rate,t.cluster_index_latency];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Rt,{stats:e})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},o)),Object(x.jsx)(m.EuiSpacer,null)))))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(logs_Logs,{logs:s,clusterUuid:a.cluster_uuid})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(cs,n()({data:i},o)))))}const Ws=se.i18n.translate("xpack.monitoring.setupMode.clickToMonitorWithMetricbeat",{defaultMessage:"Monitor with Metricbeat"}),qs=se.i18n.translate("xpack.monitoring.setupMode.clickToDisableInternalCollection",{defaultMessage:"Disable self monitoring"}),Gs=se.i18n.translate("xpack.monitoring.setupMode.usingMetricbeatCollection",{defaultMessage:"Monitored with Metricbeat"}),Ks=se.i18n.translate("xpack.monitoring.setupMode.unknown",{defaultMessage:"N/A"});function Js({setupMode:e,productName:t,status:s,instance:a,clusterUuid:i}){let r=null,l=null;const c=e.data||{},u=e.meta||{},d=c.totalUniquePartiallyMigratedCount===c.totalUniqueInstanceCount;if(s.isPartiallyMigrated&&t===U.r){if(!d)return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiIcon,{type:"flag"}),"",Object(x.jsx)(m.EuiTextColor,{color:"warning"},se.i18n.translate("xpack.monitoring.setupMode.monitorAllNodes",{defaultMessage:"Some nodes use only self monitoring"})));l=qs,u.liveClusterUuid===i&&(r=e.shortcutToFinishMigration)}const p={};(s.isInternalCollector||s.isPartiallyMigrated||s.isNetNewUser)&&(p.onClick=r||(()=>e.openFlyout(a)));let g=null;return s.isInternalCollector?(p.onClick&&(p.onClickAriaLabel=l||Ws),g=Object(x.jsx)(m.EuiBadge,n()({color:"danger",iconType:"flag"},p),l||Ws)):s.isPartiallyMigrated?(p.onClick&&(p.onClickAriaLabel=l||qs),g=Object(x.jsx)(m.EuiBadge,n()({color:"warning",iconType:"flag"},p),l||qs)):s.isFullyMigrated?(p.onClick&&(p.onClickAriaLabel=l||Gs),g=Object(x.jsx)(m.EuiBadge,n()({color:"primary",iconType:"flag"},p),l||Gs)):s.isNetNewUser?(p.onClick&&(p.onClickAriaLabel=l||Ws),g=Object(x.jsx)(m.EuiBadge,n()({color:"danger",iconType:"flag"},p),l||Ws)):(p.onClick&&(p.onClickAriaLabel=l||Ks),g=Object(x.jsx)(m.EuiBadge,n()({color:"danger",iconType:"flag"},p),l||Ks)),g}const Ys=se.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeat",{defaultMessage:"Monitor with Metricbeat"});function Qs({setupModeData:e,productName:t,customRenderer:s}){if(s){const{shouldRender:e,componentToRender:t}=s();if(e)return t}const a=Object(P.get)(e,"detected.mightExist");return e.totalUniqueInstanceCount>0?e.totalUniqueFullyMigratedCount===e.totalUniqueInstanceCount?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.setupMode.metricbeatAllNodes",{defaultMessage:"Metricbeat is monitoring all {identifier}.",values:{identifier:Kt(t,!0)}}),color:"success",iconType:"flag"}),Object(x.jsx)(m.EuiSpacer,{size:"m"})):e.totalUniquePartiallyMigratedCount===e.totalUniqueInstanceCount?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring"}),color:"warning",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.setupMode.disableInternalCollectionDescription",{defaultMessage:"Metricbeat is now monitoring your {product} {identifier}. Disable self monitoring to finish the migration.",values:{product:Wt(t),identifier:Kt(t,!0)}}))),Object(x.jsx)(m.EuiSpacer,{size:"m"})):e.totalUniqueInstanceCount>0?0===e.totalUniqueFullyMigratedCount&&0===e.totalUniquePartiallyMigratedCount?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:Ys,color:"danger",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.setupMode.migrateToMetricbeatDescription",{defaultMessage:"These {product} {identifier} are self monitored.\n                Click 'Monitor with Metricbeat' to migrate.",values:{product:Wt(t),identifier:Kt(t,!0)}}))),Object(x.jsx)(m.EuiSpacer,{size:"m"})):Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:Ys,color:"danger",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.setupMode.migrateSomeToMetricbeatDescription",{defaultMessage:"Some {product} {identifier} are monitored through self monitoring. Migrate to monitor with Metricbeat.",values:{product:Wt(t),identifier:Kt(t,!0)}}))),Object(x.jsx)(m.EuiSpacer,{size:"m"})):null:a?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.setupMode.detectedNodeTitle",{defaultMessage:"{product} {identifier} detected",values:{product:Wt(t),identifier:Kt(t)}}),color:"warning",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.setupMode.detectedNodeDescription",{defaultMessage:"Click 'Set up monitoring' below to start monitoring this {identifier}.",values:{identifier:Kt(t)}}))),Object(x.jsx)(m.EuiSpacer,{size:"m"})):Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.setupMode.noMonitoringDataFound",{defaultMessage:"No {product} {identifier} detected",values:{product:Wt(t),identifier:Kt(t,!0)}}),iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.setupMode.netNewUserDescription",{defaultMessage:"Click 'Set up monitoring' to start monitoring with Metricbeat."}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}))}const Xs=se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingDownText",{defaultMessage:"down"}),Zs=se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.trendingUpText",{defaultMessage:"up"});function ea(){return Object(x.jsx)("div",{className:"monTableCell__offline"},"N/A")}const ta=e=>e||0===e?e>0?Zs:Xs:null,sa=e=>e||0===e?e>0?"sortUp":"sortDown":null,aa=(e,t,s,a)=>s?zt(e,t,"%",{prependSpace:!1}):zt(e,t,a);function ia({isOnline:e,metric:t={},isPercent:s,...a}){const[i,n]=Object(o.useState)(!1);if(!e)return Object(x.jsx)(ea,null);const{lastVal:r,maxVal:l,minVal:c,slope:u}=Object(P.get)(t,"summary",{}),d=Object(P.get)(t,"metric.format"),p=Object(P.get)(t,"metric.units"),g=[{title:se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.trending",{defaultMessage:"Trending"}),description:ta(u)},{title:se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.max",{defaultMessage:"Max value"}),description:aa(l,d,s,p)},{title:se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.min",{defaultMessage:"Min value"}),description:aa(c,d,s,p)}],b=se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.iconLabel",{defaultMessage:"More information about this metric"}),h=Object(x.jsx)(m.EuiButtonIcon,{color:"text",onClick:()=>n((e=>!e)),iconType:sa(u),"data-test-subj":`monitoringCellIcon-${a["data-test-subj"]}`,title:b,"aria-label":b});return Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1}),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{"data-test-subj":a["data-test-subj"],gutterSize:"xs"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiPopover,{ownFocus:!0,button:h,isOpen:i,closePopover:()=>n(!1)},Object(x.jsx)("div",{"data-test-subj":`monitoringCellPopover-${a["data-test-subj"]}`},Object(x.jsx)(m.EuiDescriptionList,{type:"column",compressed:!0,listItems:g,style:{maxWidth:"150px"}}),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,{size:"xs"},se.i18n.translate("xpack.monitoring.elasticsearch.node.cells.tooltip.preface",{defaultMessage:"Applies to current time period"}))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiText,null,aa(r,d,s))))))}const na=e=>t=>Object(P.get)(t,[e,"summary","lastVal"]);function oa({clusterStatus:e,showCgroupMetricsElasticsearch:t,...s}){const{sorting:a,pagination:i,onTableChange:l,clusterUuid:c,setupMode:u,alerts:d}=s,p=((e,t,s,a)=>{const i=[],n=se.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuUsageColumnTitle",{defaultMessage:"CPU Usage"});return i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.nameColumnTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(e,a)=>{let i=Object(x.jsx)(m.EuiLink,{href:$e(`#/elasticsearch/nodes/${a.resolver}`),"data-test-subj":`nodeLink-${a.resolver}`},e),n=null;if(_e(xe.d.MetricbeatMigration)){const o=Object(P.get)(t,"data.byUuid",{})[a.resolver]||{},r={uuid:a.resolver,name:a.name};n=Object(x.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(x.jsx)(Js,{setupMode:t,status:o,instance:r,productName:U.r,clusterUuid:s})),o.isNetNewUser&&(i=e)}return Object(x.jsx)("div",null,Object(x.jsx)("div",{className:"monTableCell__name"},Object(x.jsx)(m.EuiText,{size:"m"},(e=>{const{nodeTypeLabel:t,nodeTypeClass:s}=e,a=t||se.i18n.translate("xpack.monitoring.elasticsearch.nodes.unknownNodeTypeLabel",{defaultMessage:"Unknown"}),i=s||"empty";return t?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiToolTip,{position:"bottom",content:a},Object(x.jsx)(m.EuiIcon,{type:i}))," ",""):null})(a),Object(x.jsx)("span",{"data-test-subj":"name"},i))),Object(x.jsx)("div",{className:"monTableCell__transportAddress"},function(e){if("string"!=typeof e)return null;const t=e.match(/inet\[[^\/]*\/([^\/\]]+)\]/);return t?t[1]:e}(a.transport_address)),n)}}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(e,t)=>Object(x.jsx)(St,{showBadge:!0,alerts:a,stateFilter:e=>(e.nodeId||e.nodeUuid)===t.resolver})}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumnTitle",{defaultMessage:"Status"}),dataType:"boolean",field:"isOnline",sortable:!0,render:e=>{const t=e?se.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.onlineLabel",{defaultMessage:"Online"}):se.i18n.translate("xpack.monitoring.elasticsearch.nodes.statusColumn.offlineLabel",{defaultMessage:"Offline"});return Object(x.jsx)(m.EuiToolTip,{content:t,position:"bottom",trigger:"hover"},Object(x.jsx)(m.EuiHealth,{color:e?"success":"subdued","data-test-subj":"statusIcon",alt:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.healthAltIcon",{defaultMessage:"Status: {status}",values:{status:t}})},t))}}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.rolesColumnTitle",{defaultMessage:"Roles"}),field:"roles",render:e=>{if(!e)return se.i18n.translate("xpack.monitoring.formatNumbers.notAvailableLabel",{defaultMessage:"N/A"});if(0===e.length)return Object(x.jsx)(m.EuiBadge,null,se.i18n.translate("xpack.monitoring.elasticsearch.nodes.coordinatingNodeLabel",{defaultMessage:"coordinating only"}));const t=e.slice(0,5),s=e.slice(5),a=s.length>0;return Object(x.jsx)(m.EuiBadgeGroup,{gutterSize:"xs"},t.map((e=>Object(x.jsx)(m.EuiBadge,{color:"master"===e?"hollow":"default"},e))),a&&Object(x.jsx)(m.EuiToolTip,{anchorProps:{style:{lineHeight:"1"}},position:"bottom",content:s.join(", ")},Object(x.jsx)(m.EuiBadge,null,"+",s.length)))}}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.shardsColumnTitle",{defaultMessage:"Shards"}),dataType:"number",field:"shardCount",sortable:!0,render:(e,t)=>t.isOnline?Object(x.jsx)("span",{"data-test-subj":"shards"},e):Object(x.jsx)(ea,null)}),e?(i.push({name:n,dataType:"number",field:"node_cgroup_quota",sortable:na("node_cgroup_quota"),render:(e,t)=>Object(x.jsx)(ia,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuQuota"})}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.cpuThrottlingColumnTitle",{defaultMessage:"CPU Throttling"}),dataType:"number",field:"node_cgroup_throttled",sortable:na("node_cgroup_throttled"),render:(e,t)=>Object(x.jsx)(ia,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"cpuThrottled"})})):(i.push({name:n,dataType:"number",field:"node_cpu_utilization",sortable:na("node_cpu_utilization"),render:(e,t)=>Object(x.jsx)(ia,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"cpuUsage"})}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.loadAverageColumnTitle",{defaultMessage:"Load Average"}),dataType:"number",field:"node_load_average",sortable:na("node_load_average"),render:(e,t)=>Object(x.jsx)(ia,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"loadAverage"})})),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.jvmMemoryColumnTitle",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),dataType:"number",field:"node_jvm_mem_percent",sortable:na("node_jvm_mem_percent"),render:(e,t)=>Object(x.jsx)(ia,{isOnline:t.isOnline,metric:e,isPercent:!0,"data-test-subj":"jvmMemory"})}),i.push({name:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.diskFreeSpaceColumnTitle",{defaultMessage:"Disk Free Space"}),dataType:"number",field:"node_free_space",sortable:na("node_free_space"),render:(e,t)=>Object(x.jsx)(ia,{isOnline:t.isOnline,metric:e,isPercent:!1,"data-test-subj":"diskFreeSpace"})}),i})(t,u,c,d),g=s.nodes||[];if(u&&u.enabled&&_e(xe.d.MetricbeatMigration)){const e=g.reduce(((e,t)=>({...e,[t.id||t.resolver]:t})),{});g.push(...Object.entries(u.data.byUuid).reduce(((t,[s,a])=>(!e[s]&&a.node&&t.push(a.node),t)),[]))}let b=null;return _e(xe.d.MetricbeatMigration)&&(b=Object(x.jsx)(Qs,{setupModeData:u.data,useNodeIdentifier:!0,productName:U.r,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null},t=0===u.data.totalUniqueInstanceCount,s=0===u.data.totalUniqueInternallyCollectedCount&&0===u.data.totalUniqueFullyMigratedCount&&0===u.data.totalUniquePartiallyMigratedCount;if(t||s)e.shouldRender=!0,e.componentToRender=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Elasticsearch node detected"}),color:u.data.totalUniqueInstanceCount>0?"danger":"warning",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following nodes are not monitored. Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}));else if(u.data.totalUniquePartiallyMigratedCount===u.data.totalUniqueInstanceCount){const t=Object(P.get)(u.meta,"liveClusterUuid")===c?u.shortcutToFinishMigration:u.openFlyout;e.shouldRender=!0,e.componentToRender=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionTitle",{defaultMessage:"Metricbeat is now monitoring your Elasticsearch nodes"}),color:"warning",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionDescription",{defaultMessage:"Disable self monitoring to finish the migration."})),Object(x.jsx)(m.EuiButton,{onClick:t,size:"s",color:"warning",fill:!0},se.i18n.translate("xpack.monitoring.elasticsearch.nodes.metricbeatMigration.disableInternalCollectionMigrationButtonLabel",{defaultMessage:"Disable self monitoring"}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}))}return e}})),Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.heading",defaultMessage:"Elasticsearch nodes"}))),e?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Rt,{stats:e,alerts:d})),Object(x.jsx)(m.EuiSpacer,{size:"m"})):null,b,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Yt,n()({className:"elasticsearchNodesTable",rows:g,columns:p,sorting:a,pagination:i,setupMode:u,productName:U.r,search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.elasticsearch.nodes.monitoringTablePlaceholder",{defaultMessage:"Filter Nodes"})}},onTableChange:l},s)))))}function ra({isOnline:e,status:t}){const s=e?Ze.GREEN:Ze.GRAY;return Object(x.jsx)(tt,{type:s,label:se.i18n.translate("xpack.monitoring.elasticsearch.node.statusIconLabel",{defaultMessage:"Status: {status}",values:{status:t}})})}function la({stats:e,alerts:t={}}){const{transport_address:s,usedHeap:a,freeSpace:i,totalSpace:n,documents:r,dataSize:l,indexCount:c,totalShards:u,nodeTypeLabel:d,status:p,isOnline:g}=e,m=i/n*100,b=[{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(x.jsx)(St,{alerts:t,showOnlyCount:!0})},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.transportAddress",{defaultMessage:"Transport Address"}),value:s,"data-test-subj":"transportAddress"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.jvmHeapLabel",{defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}}),value:zt(a,"0,0.[00]","%",{prependSpace:!1}),"data-test-subj":"jvmHeap"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.freeDiskSpaceLabel",{defaultMessage:"Free Disk Space"}),value:zt(i,"0.0 b")+" ("+zt(m,"0,0.[00]","%",{prependSpace:!1})+")","data-test-subj":"freeDiskSpace"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.documentsLabel",{defaultMessage:"Documents"}),value:zt(r,"0.[0]a"),"data-test-subj":"documentCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.dataLabel",{defaultMessage:"Data"}),value:zt(l,"0.0 b"),"data-test-subj":"dataSize"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.indicesLabel",{defaultMessage:"Indices"}),value:zt(c,"int_commas"),"data-test-subj":"indicesCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.shardsLabel",{defaultMessage:"Shards"}),value:zt(u,"int_commas"),"data-test-subj":"shardsCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.nodeDetailStatus.typeLabel",{defaultMessage:"Type"}),value:d,"data-test-subj":"nodeType"}];return Object(x.jsx)(Ct,{metrics:b,status:p,isOnline:g,IconComponent:({status:e,isOnline:t})=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(ra,{status:e,isOnline:t})),"data-test-subj":"elasticsearchNodeDetailStatus"})}const ca=e=>{const{alerts:t}=e;if(Te(r.a.useContext(st)))return null;const s=Object.values(t).flat().map((e=>e.states.map((t=>({alert:e,state:t}))))).flat();if(0===s.length)return null;const a=s.map(((e,t)=>{const a=Object(x.jsx)("div",null,Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center",responsive:!1},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiIcon,{type:"warning",size:"m",color:"danger"})),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiTextColor,{color:"danger"},ot(e.state.state.ui.message))))),{code:i}=e.state.state.ui.message,n=Object(x.jsx)(m.EuiAccordion,{id:`monitoringAlertCallout_${t}`,buttonContent:a,paddingSize:"s"},null!=i&&i.length?Object(x.jsx)(m.EuiCodeBlock,{fontSize:"s",paddingSize:"s",language:"json",isCopyable:!0,overflowHeight:300},i):null,Object(x.jsx)(m.EuiListGroup,{flush:!0,bordered:!0,gutterSize:"m",size:"xs",style:{marginTop:"0.5rem",paddingTop:"0.5rem",paddingBottom:"0.5rem",paddingLeft:"0.5rem"}},(e.state.state.ui.message.nextSteps||[]).map(((e,s)=>Object(x.jsx)(m.EuiListGroupItem,{onClick:()=>{},label:ot(e),key:t+s}))),Object(x.jsx)(m.EuiListGroupItem,{label:Object(x.jsx)(lt,{alert:e.alert.sanitizedRule,key:t,compressed:!0})}))),o=t!==s.length-1?Object(x.jsx)(m.EuiSpacer,null):null;return Object(x.jsx)("div",{key:t},n,o)}));return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiPanel,null,a),Object(x.jsx)(m.EuiSpacer,null))};s(94);class table_head_IndexLabel extends r.a.Component{constructor(e){super(e),this.state={showSystemIndices:e.showSystemIndices},this.toggleShowSystemIndicesState=this.toggleShowSystemIndicesState.bind(this)}toggleShowSystemIndicesState(e){const t=e.target.checked;this.setState({showSystemIndices:t}),this.props.toggleShowSystemIndices(t)}render(){return Object(x.jsx)(m.EuiFlexGroup,null,Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableHead.indicesLabel",defaultMessage:"Indices"})),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiSwitch,{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableHead.filterSystemIndices",{defaultMessage:"Filter for system indices"}),onChange:this.toggleShowSystemIndicesState,checked:this.state.showSystemIndices,"data-test-subj":"shardShowSystemIndices"})))}}class table_head_TableHead extends r.a.Component{constructor(e){super(e)}createColumn({key:e,content:t}){return Object(x.jsx)("th",{scope:"col",key:e,colSpan:1},t)}render(){const e=(this.props.labels||[]).map((e=>{const t={key:e.content.toLowerCase()};return e.showToggleSystemIndicesComponent?t.content=Object(x.jsx)(table_head_IndexLabel,{toggleShowSystemIndices:this.props.toggleShowSystemIndices,showSystemIndices:this.props.showSystemIndices}):t.content=e.content,t})).map(this.createColumn);return Object(x.jsx)("thead",null,Object(x.jsx)("tr",null,e))}}function ua(e,t){const s=[e.type];return t&&s.push(t),"shard"===e.type&&(s.push("monShard"),Object(P.get)(e,"shard.primary",e.primary)?s.push("primary"):s.push("replica"),s.push(Object(P.get)(e,"shard.state",e.state).toLowerCase()),"UNASSIGNED"===Object(P.get)(e,"shard.state",e.state)&&Object(P.get)(e,"shard.primary",e.primary)&&s.push("emergency")),e.master&&s.push("master"),s.join(" ")}const da={};class shard_Shard extends r.a.Component{constructor(...e){super(...e),G()(this,"state",{tooltipVisible:!1}),G()(this,"generateKey",(e=>{const t=this.props.shard,s=Object(P.get)(t,"shard.primary",t.primary)?"primary":"replica",a="UNASSIGNED"===Object(P.get)(t,"shard.state",t.state)?Math.random():"",i=e?Object(P.get)(t,"relocation_node.uuid",t.relocating_node):Object(P.get)(t,"shard.name",t.node);return t.index+"."+i+"."+s+"."+t.shard+a})),G()(this,"toggle",(e=>{if(this.props.shard.tooltip_message){const t="mouseenter"===e.type?"show":"hide",s=this.generateKey(!0);this.setState({tooltipVisible:"show"===t}),function(){const e=Array.prototype.slice.call(arguments),t=e.shift();da[t]&&Object(P.each)(da[t],(function(t){t.apply(null,e)}))}(s,t)}}))}componentDidMount(){let e;const t=this.props.shard,s=this;var a,i;t.tooltip_message&&(e=this.generateKey(),a=e,i=function(e){s.setState({tooltipVisible:"show"===e})},Object(P.isArray)(da[a])||(da[a]=[]),da[a].push(i))}componentWillUnmount(){let e;this.props.shard.tooltip_message&&(e=this.generateKey(),delete da[e])}render(){const e=this.props.shard,t=ua(e),s=function(e){const t=e.split(" ");return t.includes("emergency")?"danger":t.includes("unassigned")?t.includes("replica")?"warning":"danger":t.includes("relocating")?"accent":t.includes("initializing")?"default":t.includes("primary")?"primary":t.includes("replica")?"success":void 0}(t),a=t+" "+Object(P.get)(e,"shard.number",e.shard);let i=Object(x.jsx)(m.EuiBadge,{color:s},Object(P.get)(e,"shard.number",e.shard));const n=e.tooltip_message||se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"});return this.state.tooltipVisible&&(i=Object(x.jsx)(m.EuiToolTip,{content:n,position:"bottom","data-test-subj":"shardTooltip"},Object(x.jsx)("p",null,i))),Object(x.jsx)("div",{onMouseEnter:this.toggle,onMouseLeave:this.toggle,className:t,"data-shard-tooltip":n,"data-shard-classification":a,"data-test-subj":"shardIcon"},i)}}G()(shard_Shard,"displayName",se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.shardDisplayName",{defaultMessage:"Shard"}));class unassigned_Unassigned extends r.a.Component{constructor(...e){super(...e),G()(this,"createShard",(e=>{const t=e.primary?"primary":"replica",s="UNASSIGNED"===e.state?Math.random():"",a=e.index+"."+e.node+"."+t+"."+e.state+"."+e.shard+s;return Object(x.jsx)(shard_Shard,{shard:e,key:a})}))}render(){const e=Object(P.sortBy)(this.props.shards,"shard").map(this.createShard);return Object(x.jsx)("td",{className:"monUnassigned","data-test-subj":"clusterView-Unassigned"},Object(x.jsx)(m.EuiFlexGroup,{wrap:!0,className:"monUnassigned__children"},e))}}G()(unassigned_Unassigned,"displayName",se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedDisplayName",{defaultMessage:"Unassigned"}));const pa=e=>{let t="indices",s=e.name;return"node"===e.type&&(t="nodes",s=e.id),$e(`#/elasticsearch/${t}/${s}`)};function ga(e){return"node"===e.type?[!e.master,e.name]:[e.name]}class assigned_Assigned extends r.a.Component{constructor(...e){super(...e),G()(this,"createShard",(e=>{const t=Object(P.get)(e,"shard.primary",e.primary)?"primary":"replica",s=`${Object(P.get)(e,"index.name",e.index)}.${Object(P.get)(e,"node.name",e.node)}.${t}.${Object(P.get)(e,"shard.state",e.state)}.${Object(P.get)(e,"shard.number",e.shard)}`;return Object(x.jsx)(shard_Shard,{shard:e,key:s})})),G()(this,"createChild",(e=>{const t=e.id,s=["monChild"];"index"===e.type&&s.push("monChild--index");const a=Object(P.get)(this.props.shardStats.indices,t);if(a)switch(a.status){case"red":s.push("monChild--danger");break;case"yellow":s.push("monChild--warning")}const i=Object(x.jsx)(m.EuiLink,{href:pa(e)},e.name),n="master"===e.node_type?Object(x.jsx)(m.EuiIcon,{type:"starFilledSpace",color:"primary"}):null,o=Object(P.sortBy)(e.children,"shard").map(this.createShard);return Object(x.jsx)(m.EuiFlexItem,{grow:!1,className:ua(e,s.join(" ")),key:t,"data-test-subj":`clusterView-Assigned-${t}`,"data-status":a&&a.status},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"xs"},Object(x.jsx)(m.EuiFlexItem,{grow:!1,className:"monChild__title eui-textNoWrap"},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"xs"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},i),Object(x.jsx)(m.EuiFlexItem,{grow:!1},n))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s"},o))))}))}render(){const e=Object(P.sortBy)(this.props.data,ga).map(this.createChild);return Object(x.jsx)("td",{className:"monAssigned"},Object(x.jsx)(m.EuiFlexGroup,{wrap:!0,className:"monAssigned__children"},e))}}const ma=e=>{let t;return e.data.unassigned&&e.data.unassigned.length?t=Object(x.jsx)(unassigned_Unassigned,{shards:e.data.unassigned}):3===e.cols&&(t=Object(x.jsx)("td",null)),Object(x.jsx)("tr",null,t,Object(x.jsx)(assigned_Assigned,{shardStats:e.shardStats,data:e.data.children}))};class table_body_TableBody extends r.a.Component{constructor(...e){super(...e),G()(this,"createRow",((e,t)=>Object(x.jsx)(ma,n()({key:`shardRow-${t}`,data:e},this.props))))}render(){return 0===this.props.totalCount?Object(x.jsx)("tbody",null,Object(x.jsx)("tr",null,Object(x.jsx)("td",{colSpan:this.props.cols},Object(x.jsx)("div",null,Object(x.jsx)("p",{style:{margin:"10px 0"},className:"text-center lead"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.tableBody.noShardsAllocatedDescription",defaultMessage:"There are no shards allocated."})))))):this.props.shardStats&&this.props.rows.length?Object(x.jsx)("tbody",null,this.props.rows.map(this.createRow)):Object(x.jsx)("tbody",null,Object(x.jsx)("tr",null,Object(x.jsx)("td",{colSpan:this.props.cols})))}}G()(table_body_TableBody,"displayName",se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.tableBodyDisplayName",{defaultMessage:"TableBody"}));const ba=e=>Object(x.jsx)("table",{cellPadding:"0",cellSpacing:"0",className:"table"},Object(x.jsx)(table_head_TableHead,{labels:e.labels,toggleShowSystemIndices:e.toggleShowSystemIndices,showSystemIndices:e.showSystemIndices}),Object(x.jsx)(table_body_TableBody,{filter:e.filter,totalCount:e.totalCount,rows:e.nodesByIndices,cols:e.labels.length,shardStats:e.shardStats})),ha=e=>{const t=[{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.primaryLabel",{defaultMessage:"Primary"}),color:"primary"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.replicaLabel",{defaultMessage:"Replica"}),color:"success"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.relocatingLabel",{defaultMessage:"Relocating"}),color:"accent"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.initializingLabel",{defaultMessage:"Initializing"}),color:"default"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedPrimaryLabel",{defaultMessage:"Unassigned Primary"}),color:"danger"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.unassignedReplicaLabel",{defaultMessage:"Unassigned Replica"}),color:"warning"}];return Object(x.jsx)("div",{className:"monCluster"},Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.shardAllocation.shardLegendTitle",defaultMessage:"Shard Legend"}))),Object(x.jsx)(m.EuiSpacer,{size:"xs"}),Object(x.jsx)(m.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"s"},t.map((e=>Object(x.jsx)(m.EuiFlexItem,{grow:!1,key:e.label},Object(x.jsx)(m.EuiBadge,{color:e.color},e.label))))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(ba,e))},ja=({nodeSummary:e,metrics:t,logs:s,alerts:a,nodeId:i,clusterUuid:o,...r})=>{const l=[t.node_jvm_mem,t.node_total_io,t.node_cpu_metric,t.node_load_average,t.node_latency,t.node_segment_count];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.node.heading",defaultMessage:"Elasticsearch node"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(la,{stats:e,alerts:a})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:a}),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},l.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},r)),Object(x.jsx)(m.EuiSpacer,null)))))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(logs_Logs,{logs:s,nodeId:i,clusterUuid:o})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(ha,r))))};s(99);const xa=e=>[{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.nameTitle",{defaultMessage:"Name"}),field:"name",width:"350px",sortable:!0,render:e=>Object(x.jsx)("div",{"data-test-subj":"name"},Object(x.jsx)(m.EuiLink,{href:$e(`#/elasticsearch/indices/${e}`),"data-test-subj":`indexLink-${e}`},e))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts",sortable:!0,render:(t,s)=>Object(x.jsx)(St,{showBadge:!0,alerts:e,stateFilter:e=>e.meta.shardIndex===s.name})},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.statusTitle",{defaultMessage:"Status"}),field:"status",sortable:!0,render:e=>Object(x.jsx)("div",{className:"monElasticsearchIndicesTable__status",title:`Index status: ${e}`},Object(x.jsx)(It,{status:e}),"",Object(P.capitalize)(e))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.documentCountTitle",{defaultMessage:"Document Count"}),field:"doc_count",sortable:!0,render:e=>Object(x.jsx)("div",{"data-test-subj":"documentCount"},zt(e,mt))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.dataTitle",{defaultMessage:"Data"}),field:"data_size",sortable:!0,render:e=>Object(x.jsx)("div",{"data-test-subj":"dataSize"},zt(e,gt))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.indexRateTitle",{defaultMessage:"Index Rate"}),field:"index_rate",sortable:!0,render:e=>Object(x.jsx)("div",{"data-test-subj":"indexRate"},zt(e,pt,"/s"))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.searchRateTitle",{defaultMessage:"Search Rate"}),field:"search_rate",sortable:!0,render:e=>Object(x.jsx)("div",{"data-test-subj":"searchRate"},zt(e,pt,"/s"))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.indices.unassignedShardsTitle",{defaultMessage:"Unassigned Shards"}),field:"unassigned_shards",sortable:!0,render:e=>Object(x.jsx)("div",{"data-test-subj":"unassignedShards"},zt(e,"0"))}],fa=({clusterStatus:e,indices:t,sorting:s,pagination:a,onTableChange:i,toggleShowSystemIndices:n,showSystemIndices:o,alerts:r})=>Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.heading",defaultMessage:"Elasticsearch indices"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Rt,{stats:e,alerts:r})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiSwitch,{label:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.systemIndicesLabel",defaultMessage:"Filter for system indices"}),checked:o,onChange:e=>n(e.target.checked)}),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(Jt,{className:"elasticsearchIndicesTable",rows:t,columns:xa(r),sorting:s,pagination:a,message:Object(x.jsx)("div",null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.noIndicesMatchYourSelectionDescription",defaultMessage:"There are no indices that match your selections. Try changing the time range selection."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indices.howToShowSystemIndicesDescription",defaultMessage:"If you are looking for system indices (e.g., .kibana), try checking Show system indices."}))),search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.elasticsearch.indices.monitoringTablePlaceholder",{defaultMessage:"Filter Indices"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))));function Oa({status:e}){const t=(()=>{const t=e.toUpperCase();return"OPENED"===t?Ze.GREEN:"CLOSED"===t?Ze.GRAY:"FAILED"===t?Ze.RED:Ze.YELLOW})();return Object(x.jsx)(tt,{type:t,label:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.statusIconLabel",{defaultMessage:"Job Status: {status}",values:{status:e}})})}const va=({clusterStatus:e,jobs:t,sorting:s,pagination:a,onTableChange:i})=>Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Rt,{stats:e})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Jt,{className:"mlJobsTable",rows:t,columns:ya,sorting:{...s,sort:{...s.sort,field:"job_id"}},pagination:a,message:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.noJobsDescription",{defaultMessage:"There are no Machine Learning Jobs that match your query. Try changing the time range selection."}),search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.filterJobsPlaceholder",{defaultMessage:"Filter Jobs"})}},onTableChange:i,executeQueryOptions:{defaultFields:["job_id"]}})))),ya=[{name:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.jobIdTitle",{defaultMessage:"Job ID"}),field:"job_id",sortable:!0},{name:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.stateTitle",{defaultMessage:"State"}),field:"state",sortable:!0,render:e=>Object(x.jsx)("div",null,Object(x.jsx)(Oa,{status:e}),"",Object(P.capitalize)(e))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.processedRecordsTitle",{defaultMessage:"Processed Records"}),field:"data_counts.processed_record_count",sortable:!0,render:e=>Object(x.jsx)("span",null,Pt()(e).format(mt))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.modelSizeTitle",{defaultMessage:"Model Size"}),field:"model_size_stats.model_bytes",sortable:!0,render:e=>Object(x.jsx)("span",null,Pt()(e).format(gt))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.forecastsTitle",{defaultMessage:"Forecasts"}),field:"forecasts_stats.total",sortable:!0,render:e=>Object(x.jsx)("span",null,Pt()(e).format(mt))},{name:se.i18n.translate("xpack.monitoring.elasticsearch.mlJobListing.nodeTitle",{defaultMessage:"Node"}),field:"node.name",sortable:!0,render:(e,t)=>t.node?"id"in t.node?Object(x.jsx)(m.EuiLink,{href:$e(`#/elasticsearch/nodes/${t.node.id}`)},e):Object(x.jsx)("span",null,e):Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.mlJobListing.noDataLabel",defaultMessage:"N/A"})}],ka=(e,t)=>s=>(_.a.render(Object(x.jsx)(w,t,e),s),()=>_.a.unmountComponentAtNode(s));o.Component;const Ma=F.a.has,Ea=e=>{const t=(e=>F.a.get(e,"resp.error.root_cause"))(e);if(Array.isArray(t))return t.map((e=>e.reason)).join("\n")};function Sa(e,t=""){let s="";t&&(s+=t+": ");const a=Ea(e);return"string"==typeof e?s+=e:a?s+=a:e instanceof Error?s+=Sa.describeError(e):Ma(e,"status")&&Ma(e,"data")&&(-1===e.status?s+=se.i18n.translate("xpack.monitoring.formatMsg.toaster.unavailableServerErrorMessage",{defaultMessage:"An HTTP request has failed to connect. Please check if the Kibana server is running and that your browser has a working connection, or contact your system administrator."}):s+=se.i18n.translate("xpack.monitoring.formatMsg.toaster.errorStatusMessage",{defaultMessage:"Error {errStatus} {errStatusText}: {errMessage}",values:{errStatus:e.status,errStatusText:e.statusText,errMessage:e.data.message}})),s}function wa(e){var t,s,a,i;return null!==(t=e.response)&&void 0!==t&&t.status&&-1!==(null===(s=e.response)||void 0===s?void 0:s.status)?Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,null===(a=e.body)||void 0===a?void 0:a.message),Object(x.jsx)(m.EuiText,{size:"xs"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.httpErrorMessage",defaultMessage:"HTTP {errStatus}",values:{errStatus:null===(i=e.response)||void 0===i?void 0:i.status}}))):Sa(e)}Sa.describeError=function(e){if(e)return e.shortMessage?e.shortMessage:e.body&&e.body.message?e.body.message:e.message?e.message:""+e};const Ta=()=>{const{services:e}=Object(a.useKibana)(),t=Object(C.useHistory)();return Object(o.useCallback)((s=>{var a,i;if(403===(null===(a=s.response)||void 0===a?void 0:a.status))t.push("/access-denied");else if(404!==(null===(i=s.response)||void 0===i?void 0:i.status)||Object(P.includes)(window.location.hash,"no-data")){var n;null===(n=e.notifications)||void 0===n||n.toasts.addDanger({title:se.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestErrorNotificationTitle",{defaultMessage:"Monitoring Request Error"}),text:ka(wa(s),e)})}else{var o;const t=wa(s);null===(o=e.notifications)||void 0===o||o.toasts.addDanger({title:se.i18n.translate("xpack.monitoring.ajaxErrorHandler.requestFailedNotificationTitle",{defaultMessage:"Monitoring Request Failed"}),text:ka(Object(x.jsx)("div",null,t,Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiButton,{size:"s",color:"danger",onClick:()=>window.location.reload()},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.ajaxErrorHandler.requestFailedNotification.retryButtonLabel",defaultMessage:"Retry"}))),e)})}}),[t,e])},_a=()=>{const{services:e}=Object(a.useKibana)(),t=Ta();return{shouldShowAlertsModal:function(e){const t="true"===window.sessionStorage.getItem("ALERTS_MODAL_HAS_BEEN_SHOWN"),s="true"===window.localStorage.getItem("ALERTS_MODAL_DECISION_MADE");return Object.keys(e).length>0?(window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),!1):!t&&!s},enableAlerts:async function(){try{var s;if(null===(s=e.http)||void 0===s||!s.post)throw new Error("HTTP service is unavailable");const t=await e.http.post("../api/monitoring/v1/alerts/enable",{});window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true"),((e,t)=>{const{isSufficientlySecure:s,hasPermanentEncryptionKey:a}=e;!1===s||!1===a?(e=>{const t=Q.a.shims.docLinks.links.alerting.generalSettings;Q.a.shims.toastNotifications.addWarning({title:se.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionErrorTitle",{defaultMessage:"Additional setup required"}),text:ka(Object(x.jsx)("div",null,Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.healthCheck.tlsAndEncryptionError",{defaultMessage:"Stack Monitoring rules require API keys to be enabled and an encryption key to be configured."})),Object(x.jsx)(m.EuiSpacer,{size:"xs"}),Object(x.jsx)(m.EuiLink,{href:t,external:!0,target:"_blank"},se.i18n.translate("xpack.monitoring.healthCheck.encryptionErrorAction",{defaultMessage:"Learn how."}))),e)})})(t):Q.a.shims.toastNotifications.addWarning({title:se.i18n.translate("xpack.monitoring.healthCheck.alertsCreatedConfirmation.title",{defaultMessage:"New alerts created"}),text:se.i18n.translate("xpack.monitoring.healthCheck.alertsCreatedConfirmation.text",{defaultMessage:"Review the alert definition using Setup mode and configure additional action connectors to get notified via your favorite method."}),"data-test-subj":"alertsCreatedToast"})})(t,e)}catch(e){t(e)}},notAskAgain:function(){window.localStorage.setItem("ALERTS_MODAL_DECISION_MADE","true")},hideModalForSession:function(){window.sessionStorage.setItem("ALERTS_MODAL_HAS_BEEN_SHOWN","true")}}},Ca=({alerts:e})=>{const[t,s]=Object(o.useState)(!1),[a,i]=Object(o.useState)(!1),n=_a();Object(o.useEffect)((()=>{n.shouldShowAlertsModal(e)&&s(!0)}),[n,e]);const r=()=>{s(!1),n.hideModalForSession()};return t?a?Object(x.jsx)(La,{closeModal:r,createButtonClick:()=>{n.enableAlerts(),r()}}):Object(x.jsx)(Ia,{closeModal:r,remindLaterClick:()=>{n.hideModalForSession(),r()},continueButtonClick:e=>{"create-alerts"===e?i(!0):(n.notAskAgain(),r())}}):null};function Ia({closeModal:e,remindLaterClick:t,continueButtonClick:s}){const[a,i]=Object(o.useState)("create-alerts"),n=[{id:"create-alerts",label:se.i18n.translate("xpack.monitoring.alerts.modal.yesOption",{defaultMessage:"Yes (Recommended)"})},{id:"not-create-alerts",label:se.i18n.translate("xpack.monitoring.alerts.modal.noOption",{defaultMessage:"No"})}];return Object(x.jsx)(m.EuiModal,{onClose:e},Object(x.jsx)(m.EuiModalHeader,null,Object(x.jsx)(m.EuiModalHeaderTitle,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.title",defaultMessage:"Create rules"}))),Object(x.jsx)(m.EuiModalBody,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description",defaultMessage:"Stack monitoring comes with many out-of-the box rules to notify you about issues around cluster health, resource utilization and errors. {learnMoreLink}",values:{learnMoreLink:Object(x.jsx)(m.EuiLink,{href:Q.a.shims.docLinks.links.monitoring.alertsKibana,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.description.link",defaultMessage:"Learn more"}))}})),Object(x.jsx)("div",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.createDescription",defaultMessage:"Create these out-of-the box rules in this Kibana space?"}),Object(x.jsx)(m.EuiSpacer,{size:"xs"}),Object(x.jsx)(m.EuiRadioGroup,{options:n,idSelected:a,onChange:e=>{i(e)},name:"radio group"})))),Object(x.jsx)(m.EuiModalFooter,null,Object(x.jsx)(m.EuiButtonEmpty,{onClick:t,"data-test-subj":"alerts-modal-remind-later-button"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.remindLater",defaultMessage:"Remind me later"})),Object(x.jsx)(m.EuiButton,{onClick:()=>s(a),fill:!0,"data-test-subj":"alerts-modal-button"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.confirm",defaultMessage:"Continue"}))))}function La({closeModal:e,createButtonClick:t}){return Object(x.jsx)(m.EuiModal,{onClose:e},Object(x.jsx)(m.EuiModalHeader,null,Object(x.jsx)(m.EuiModalHeaderTitle,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.title",defaultMessage:"Migrate Elasticsearch Watches before continuing"}))),Object(x.jsx)(m.EuiModalBody,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.one",defaultMessage:"If you've used Internal Collection in the past, you'll have a few Elasticsearch Watches configured for your monitoring data."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.two",defaultMessage:"To avoid duplication of work, it will be best to disable those before you create the Kibana rules."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.three",defaultMessage:"To disable the Watches, you'll need to invoke the below API on each cluster where Internal Collection has been enabled in the past."})),Object(x.jsx)("p",null,Object(x.jsx)(m.EuiCode,null,"POST /_monitoring/migrate/alerts")),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.description.four",defaultMessage:"Once all monitoring Watches have been disabled, click Create to create the Kibana rules."})))),Object(x.jsx)(m.EuiModalFooter,null,Object(x.jsx)(m.EuiButtonEmpty,{onClick:e,"data-test-subj":"alerts-modal-cancel-button"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.cancelButton.label",defaultMessage:"Cancel"})),Object(x.jsx)(m.EuiButton,{onClick:t,fill:!0,"data-test-subj":"alerts-modal-create-button"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.modal.migration.confirmButton.label",defaultMessage:"Create"}))))}const Pa=()=>{const[e,t]=Object(o.useState)(!1),s=_a(),{navigateToApp:i}=Object(a.useKibana)().services.application,[n,l]=Object(o.useState)(!1),c=()=>{l(!1)},u=()=>{t(!1),c()},d=Object(x.jsx)(m.EuiButtonEmpty,{iconSide:"right",iconType:"arrowDown",onClick:()=>{l(!n)}},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.alerts.dropdown.button",defaultMessage:"Alerts and rules"})),p=[{name:se.i18n.translate("xpack.monitoring.alerts.dropdown.createAlerts",{defaultMessage:"Create default rules"}),onClick:()=>{t(!0)}},{name:se.i18n.translate("xpack.monitoring.alerts.dropdown.manageRules",{defaultMessage:"Manage rules"}),icon:"tableOfContents",onClick:()=>i("management",{path:"/insightsAndAlerting/triggersActions/rules"})}],g=[{id:0,title:se.i18n.translate("xpack.monitoring.alerts.dropdown.title",{defaultMessage:"Alerts and rules"}),items:p}];return Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiPopover,{panelPaddingSize:"none",anchorPosition:"downLeft",button:d,isOpen:n,closePopover:c},Object(x.jsx)(m.EuiContextMenu,{initialPanelId:0,panels:g})),e?Object(x.jsx)(La,{closeModal:u,createButtonClick:()=>{s.enableAlerts(),u()}}):null)};function Fa({exitSetupMode:e}){return Object(x.jsx)(m.EuiButton,{color:"danger",fill:!0,iconType:"flag",iconSide:"right",size:"s",onClick:e,"data-test-subj":"exitSetupModeBtn"},se.i18n.translate("xpack.monitoring.setupMode.exit",{defaultMessage:"Exit setup mode"}))}const Na=e=>{const[t,s]=r.a.useState(!1),a=Object(be.useUiTracker)({app:"stack_monitoring"});function i(t,i){s(!0),e.toggleSetupMode(t),a({metric:`${U.ab}setupmode_${i}`,metricType:be.METRIC_TYPE.CLICK}),s(!1)}return e.enabled?Object(x.jsx)(Fa,{exitSetupMode:()=>i(!1,"exit")}):Object(x.jsx)(m.EuiButton,{onClick:()=>i(!0,"enter"),iconType:"flag",size:"s",iconSide:"right",isLoading:t,"data-test-subj":"monitoringSetupModeBtn"},se.i18n.translate("xpack.monitoring.setupMode.enter",{defaultMessage:"Enter setup mode"}))},Da=({title:e,pageTitle:t,tabs:s,getPageData:i,product:n,children:r})=>{!function(e,t){var s;const{services:i}=Object(a.useKibana)();let n=Object(P.get)("","cluster_name");n=n?`- ${n}`:"",t=t?`- ${t}`:"",null===(s=i.chrome)||void 0===s||s.docTitle.change(se.i18n.translate("xpack.monitoring.stackMonitoringDocTitle",{defaultMessage:"Stack Monitoring {clusterName} {suffix}",values:{clusterName:n,suffix:t}}))}(0,e);const{currentTimerange:l}=ue(),[c,u]=Object(o.useState)(!1),[d,p]=Object(o.useState)(!1),g=Object(C.useHistory)(),[b,h]=Object(o.useState)(!1),j=Ta(),{setHeaderActionMenu:f,theme$:O}=Object(o.useContext)(te),v=Object(o.useCallback)((e=>(h(!1),e)),[h]);Object(o.useEffect)((()=>{p(!0),null==i||i().then(v).catch((e=>{j(e),h(!0)})).finally((()=>{u(!0),p(!1)}))}),[i,l,v,j]);const y=e=>g.location.pathname===e,{supported:k,enabled:M}=ke();return Object(x.jsx)(m.EuiPageTemplate,{offset:0,restrictWidth:!1,grow:!1,"data-test-subj":"monitoringAppContainer"},Object(x.jsx)(m.EuiPageTemplate.Section,null,f&&O&&Object(x.jsx)(be.HeaderMenuPortal,{setHeaderActionMenu:f,theme$:O},k&&Object(x.jsx)(Na,{enabled:M,toggleSetupMode:Se}),Object(x.jsx)(Pa,null)),Object(x.jsx)(je,{pageTitle:t,onRefresh:()=>{d||(p(!0),null==i||i().then(v).catch(j).finally((()=>{p(!1)})),_e(xe.d.MetricbeatMigration)&&Ee())}}),Object(x.jsx)(m.EuiSpacer,{size:"m"}),s&&Object(x.jsx)(m.EuiTabs,{size:"l"},s.map(((e,t)=>{return Object(x.jsx)(m.EuiTab,{key:t,disabled:za(n),title:e.label,"data-test-subj":e.testSubj,href:e.route?(s=e.route,g.createHref({pathname:s})):void 0,isSelected:e.route?y(e.route):void 0,onClick:e.onClick,prepend:e.prepend},e.label);var s}))),Object(x.jsx)(m.EuiPage,{paddingSize:"m"},Object(x.jsx)(m.EuiPageBody,null,b?null:i&&!c?Object(x.jsx)(Xe,null):r))))};function za(e){const t=ke();if(!_e(xe.d.MetricbeatMigration))return!1;if(!t.data)return!1;if(!e)return!1;const s=t.data[e]||{};return 0===s.totalUniqueInstanceCount||0===s.totalUniqueInternallyCollectedCount&&0===s.totalUniqueFullyMigratedCount&&0===s.totalUniquePartiallyMigratedCount}const Ra=({...e})=>{const t=[{id:"overview",label:se.i18n.translate("xpack.monitoring.apmNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/apm"},{id:"instances",label:se.i18n.translate("xpack.monitoring.apmNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/apm/instances"}];return Object(x.jsx)(Da,n()({},e,{tabs:t,product:"apm"}))};function Aa(){const{services:e}=Object(a.useKibana)(),t=Object(C.useHistory)(),{handleTimeChange:s}=ue(),[i,n]=Object(o.useState)(0),[r,l]=Object(o.useState)(!1),c=Object(o.useRef)(r),u=e=>{c.current=e,l(e)};return Object(o.useEffect)((()=>{const e=()=>{c.current?u(!1):n((e=>e>0?e-1:0))};return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),{onBrush:({xaxis:t})=>{var a;const{to:o,from:r}=t,l=null===(a=e.uiSettings)||void 0===a?void 0:a.get("dateFormat:tz"),c=Ba(l),d=it()(r-c),p=it()(o-c);s(d.toISOString(),p.toISOString()),u(!0),n(i+1)},zoomInfo:{zoomOutHandler:()=>t.goBack(),showZoomOutBtn:()=>i>0}}}const Ba=e=>"Browser"===e?0:1*it.a.tz(e).utcOffset()*60*1e3,Va=e=>{if(!Q.a.shims.isCloud||!e)return!1;let t=!1;return e.forEach((e=>{const[s,a]=e.split("."),i=Number(s);(i>7||7===i&&Number(a)>=13)&&(t=!0)})),t},Ua=(e,t)=>e.map(((e,s)=>Object(x.jsx)(m.EuiFlexItem,{style:{minWidth:"45%"},key:s},Object(x.jsx)(Ms,n()({},t,{series:e}))))),$a=({stats:e,metrics:t,seriesToShow:s,title:a,summary:i,StatusComponent:n,...o})=>{if(!t)return null;const r=null!=i&&i.version?[null==i?void 0:i.version]:e.versions,l=(e=>{const t={};return e?(t.title=se.i18n.translate("xpack.monitoring.apm.metrics.topCharts.agentTitle",{defaultMessage:"Integrations Server - Resource Usage"}),t.heading=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.apm.metrics.agentHeading",defaultMessage:"Integrations Server"}),t):(t.title=se.i18n.translate("xpack.monitoring.apm.metrics.topCharts.title",{defaultMessage:"APM Server - Resource Usage"}),t.heading=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.apm.metrics.heading",defaultMessage:"APM server"}),t)})(Va(r)),c=[t.apm_cpu,t.apm_os_load],{config:u}=i||e;return c.push(u.container?t.apm_memory_cgroup:t.apm_memory),Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,l.heading)),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(n,{stats:e})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h3",null,l.title)),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiFlexGroup,{wrap:!0},Ua(c,o))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h3",null,a)),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiFlexGroup,{wrap:!0},Ua(s,o)))))};function Ha({status:e,availability:t=!0}){const s=(()=>{if(!t)return Ze.GRAY;const s=e.toUpperCase();return Ze[s]||Ze.YELLOW})();return Object(x.jsx)(tt,{type:s,label:se.i18n.translate("xpack.monitoring.apm.healthStatusLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function Wa({alerts:e,stats:t}){const{apms:{total:s},totalEvents:a,timeOfLastEvent:i}=t,n=[{label:se.i18n.translate("xpack.monitoring.apm.instances.status.serversLabel",{defaultMessage:"Servers"}),value:s,"data-test-subj":"total"},{label:se.i18n.translate("xpack.monitoring.apm.instances.status.totalEventsLabel",{defaultMessage:"Total Events"}),value:zt(a,"0.[0]a"),"data-test-subj":"totalEvents"},{label:se.i18n.translate("xpack.monitoring.apm.instances.status.lastEventLabel",{defaultMessage:"Last Event"}),value:se.i18n.translate("xpack.monitoring.apm.instances.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:nt(+it()(i),U.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(x.jsx)(Ct,{metrics:n,alerts:e,IconComponent:({status:e})=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.apm.instances.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(x.jsx)(Ha,{status:e})}})),"data-test-subj":"apmDetailStatus"})}function qa({stats:e}){return Object(x.jsx)(Wa,{stats:e})}const Ga=se.i18n.translate("xpack.monitoring.apm.overview.panels.title",{defaultMessage:"APM Server - Metrics"});function Ka(e){const{metrics:t}=e,s=[t.apm_responses_valid,t.apm_responses_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_requests,t.apm_transformations],a={...e,title:Ga,seriesToShow:s};return Object(x.jsx)($a,n()({},a,{StatusComponent:qa}))}const Ja=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{zoomInfo:i,onBrush:r}=Aa(),{services:l}=Object(a.useKibana)(),c=s.cluster_uuid,u=s.ccs,{generate:d}=re(),p=Object(P.find)(e,{cluster_uuid:c}),[g,m]=Object(o.useState)(null),b=se.i18n.translate("xpack.monitoring.apm.overview.routeTitle",{defaultMessage:"APM server"}),h=se.i18n.translate("xpack.monitoring.apm.overview.pageTitle",{defaultMessage:"APM server overview"});Object(o.useEffect)((()=>{p&&d(p.cluster_name,{inApm:!0})}),[p,d]);const j=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=l.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/apm`,i=await(null===(t=l.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(i)}),[u,c,null===(t=l.data)||void 0===t?void 0:t.query.timefilter.timefilter,l.http]);return Object(x.jsx)(Ra,{title:b,pageTitle:h,getPageData:j,"data-test-subj":"apmOverviewPage"},g&&Object(x.jsx)(Ka,n()({},g,{onBrush:r,zoomInfo:i})))},Ya=[5,10,20,50],Qa={pageSize:20,initialPageSize:20,pageIndex:0,initialPageIndex:0,pageSizeOptions:Ya,totalItemCount:0};function Xa(e){const t=new Y.Storage(window.localStorage),s=(a=e,e=>{const t=e.get(U.Z)||{},s=Object(P.get)(t,[a,"sort"]);return{page:Object(P.get)(t,[a,"page"]),sort:s}});var a;const i=(e=>(t,{sort:s,page:a})=>{const i=t.get(U.Z)||{};return Object(Qt.set)(i,[e,"sort"],s||void 0),Object(Qt.set)(i,[e,"page"],a||void 0),t.set(U.Z,i),i})(e),n=s(t),[r,l]=Object(o.useState)((e=>{const t=Qa;return e&&(t.initialPageSize=e.size,t.pageSize=e.size,t.initialPageIndex=e.index,t.pageIndex=e.index),{...t,pageSizeOptions:Ya}})(n.page)),c=Object(o.useCallback)((e=>{e!==r.totalItemCount&&l({...r,totalItemCount:e})}),[l,r]),[u,d]=Object(o.useState)(n.sort||{sort:{field:"name",direction:U.s}}),[p,g]=Object(o.useState)(""),m=({page:e,sort:s,queryText:a})=>{l({...r,initialPageSize:e.size,pageSize:e.size,initialPageIndex:e.index,pageIndex:e.index,pageSizeOptions:Ya}),d({sort:s}),i(t,{page:e,sort:{sort:s}}),g(a)};return{getPaginationRouteOptions:Object(o.useCallback)((()=>r&&u?{pagination:{size:r.pageSize,index:r.pageIndex},...u,queryText:p}:{}),[r,p,u]),getPaginationTableProps:()=>({sorting:u,pagination:r,onTableChange:m}),updateTotalItemCount:c}}function Za(e,t){const s=t?{name:se.i18n.translate("xpack.monitoring.apm.instances.cgroupMemoryUsageTitle",{defaultMessage:"Memory Usage (cgroup)"}),field:"cgroup_memory",render:e=>zt(e,"byte")}:{name:se.i18n.translate("xpack.monitoring.apm.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>zt(e,"byte")};return[{name:se.i18n.translate("xpack.monitoring.apm.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(_e(xe.d.MetricbeatMigration)){const t=Object(P.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(x.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(x.jsx)(Js,{setupMode:e,status:t,instance:i,productName:U.a}))}return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiLink,{href:$e(`#/apm/instances/${s.uuid}`),"data-test-subj":`apmLink-${t}`},t),a)}},{name:se.i18n.translate("xpack.monitoring.apm.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:se.i18n.translate("xpack.monitoring.apm.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>zt(e,"","/s")},{name:se.i18n.translate("xpack.monitoring.apm.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>zt(e,"byte","/s")},{name:se.i18n.translate("xpack.monitoring.apm.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>zt(e,"0")},{name:se.i18n.translate("xpack.monitoring.apm.instances.lastEventTitle",{defaultMessage:"Last Event"}),field:"time_of_last_event",render:e=>se.i18n.translate("xpack.monitoring.apm.instances.lastEventValue",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:nt(+it()(e),"since")}})},s,{name:se.i18n.translate("xpack.monitoring.apm.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}function ei({apms:e,setupMode:t,alerts:s}){const{pagination:a,sorting:i,onTableChange:n,data:o}=e;let r=null;_e(xe.d.MetricbeatMigration)&&(r=Object(x.jsx)(Qs,{setupModeData:t.data,productName:U.a}));const l=Object(P.uniq)(o.apms.map((e=>e.version))).map((e=>({value:e})));return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.apm.instances.heading",defaultMessage:"APM Instances"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Wa,{stats:o.stats,alerts:s})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,r,Object(x.jsx)(Jt,{className:"apmInstancesTable",rows:o.apms,columns:Za(t,o.cgroup),sorting:i,pagination:a,setupMode:t,productName:U.a,search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.apm.instances.filterInstancesPlaceholder",{defaultMessage:"Filter Instances"})},filters:[{type:"field_value_selection",field:"version",name:se.i18n.translate("xpack.monitoring.apm.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:n,executeQueryOptions:{defaultFields:["name"]}}))))}const ti=se.i18n.translate("xpack.monitoring.metricbeatMigration.migrationStatus",{defaultMessage:"Migration status"}),si=se.i18n.translate("xpack.monitoring.metricbeatMigration.monitoringStatus",{defaultMessage:"Monitoring status"});function ai(e){return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiCallOut,{color:"warning",iconType:"help",title:Object(x.jsx)(m.EuiText,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetup",defaultMessage:"If security is enabled, {link} might be required.",values:{link:Object(x.jsx)(o.Fragment,null," ",Object(x.jsx)(m.EuiLink,{href:e,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.securitySetupLinkText",defaultMessage:"additional setup"})))}}))}))}function ii(e){return e.isInternalCollector||e.isNetNewUser?{title:e.isNetNewUser?si:ti,status:"incomplete",children:Object(x.jsx)(m.EuiCallOut,{size:"s",color:"warning",title:se.i18n.translate("xpack.monitoring.metricbeatMigration.isInternalCollectorStatusTitle",{defaultMessage:"No monitoring data detected, but well continue checking."})})}:e.isPartiallyMigrated||e.isFullyMigrated?{title:ti,status:"complete",children:Object(x.jsx)(m.EuiCallOut,{size:"s",color:"success",title:se.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.metricbeatMigration.fullyMigratedStatusDescription",{defaultMessage:"Metricbeat is shipping monitoring data."})))}:null}function ni(e,t){if(!e||!e.isFullyMigrated){let s="";if(e){const t=nt(e.lastInternallyCollectedTimestamp||e.lastTimestamp,U.c);s=se.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.partiallyMigratedStatusDescription",{defaultMessage:"Last self monitoring was {secondsSinceLastInternalCollectionLabel} ago.",values:{secondsSinceLastInternalCollectionLabel:t}})}return{title:ti,status:"incomplete",children:Object(x.jsx)(m.EuiCallOut,{size:"s",color:"warning",title:se.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusTitle",{defaultMessage:"Data is still coming from self monitoring"})},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.metricbeatMigration.partiallyMigratedStatusDescription",{defaultMessage:"It can take up to {secondsAgo} seconds to detect data.",values:{secondsAgo:t.secondsAgo}})),Object(x.jsx)("p",null,s))}}return{title:ti,status:"complete",children:Object(x.jsx)(m.EuiCallOut,{size:"s",color:"success",title:se.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusTitle",{defaultMessage:"Congratulations!"})},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.metricbeatMigration.disableInternalCollection.fullyMigratedStatusDescription",{defaultMessage:"We are not seeing any documents from self monitoring. Migration complete!"})))}}const oi="beat",ri="setMonitoringUrl",li="enableMetricbeat",ci="disableInternal";const ui=new Y.Storage(window.localStorage),di=`${U.Z}.mb_migration.esMonitoringUrl`;class flyout_Flyout extends o.Component{constructor(e){super(e),G()(this,"setEsMonitoringUrl",(e=>{ui.set(di,e),this.setState({esMonitoringUrl:e})}));let t=ui.get(di);t||(t=e.monitoringHosts?e.monitoringHosts[0]:"http://localhost:9200"),this.checkInterval=null;let s=ri;e.product&&e.product.isPartiallyMigrated&&(s=ci),this.state={activeStep:s,esMonitoringUrl:t,checkedStatusByStep:{[li]:!1,[ci]:!1,userAcknowledgedNoClusterUuidPrompt:!1}}}finishedFlyout(){const{onClose:e}=this.props;e()}renderActiveStep(){const{product:e,productName:t,onClose:s,meta:a}=this.props,{activeStep:i,esMonitoringUrl:n,checkedStatusByStep:r}=this.state;switch(i){case ri:return Object(x.jsx)(m.EuiForm,null,Object(x.jsx)(m.EuiFormRow,{fullWidth:!0,label:se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlLabel",{defaultMessage:"URL of monitoring cluster"}),helpText:se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.step1.monitoringUrlHelpText",{defaultMessage:"Typically a single URL. If multiple URLs, separate with a comma.\n                The running Metricbeat instance must be able to communicate with these Elasticsearch servers."})},Object(x.jsx)(m.EuiFieldText,{fullWidth:!0,value:n,onChange:e=>this.setEsMonitoringUrl(e.target.value)})));case li:case ci:const l=function(e,t,s,a,i){switch(e){case U.B:if(s===li)return function(e,t,{esMonitoringUrl:s}){const a=Q.a.shims.docLinks.links.monitoring.monitorKibana,i=Q.a.shims.docLinks.links.metricbeat.install,n=Q.a.shims.docLinks.links.metricbeat.start,r=ai(a);return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Kibana"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:i,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Kibana x-pack module in Metricbeat"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable kibana-xpack"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Kibana monitoring metrics from http://localhost:5601. If the local Kibana instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(x.jsx)(Ls,null,"hosts"),file:Object(x.jsx)(Ls,null,"modules.d/kibana-xpack.yml")}}))),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(x.jsx)(Ls,null,"metricbeat.yml")}})),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:n,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},ii(e)]}(t,0,i);if(s===ci)return function(e,t){let s=null;return e.isPrimary&&(s=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartWarningTitle",{defaultMessage:"This step requires you to restart the Kibana server"}),color:"warning",iconType:"help"},Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.restartNote",defaultMessage:"Expect errors until the server is running again."})))))),[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Kibana monitoring metrics"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.description",defaultMessage:"Add this setting to {file}.",values:{file:Object(x.jsx)(Ls,null,"kibana.yml")}}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.kibana.collection.enabled: false"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.kibanaInstructions.disableInternalCollection.note",defaultMessage:"For {config}, leave the default value of ({defaultValue}).",values:{config:Object(x.jsx)(Ls,null,"monitoring.enabled"),defaultValue:Object(x.jsx)(Ls,null,"true")}}))),s)},ni(e,t)]}(t,a);case U.r:if(s===li)return function(e,t,{esMonitoringUrl:s}){const a=Q.a.shims.docLinks.links.monitoring.monitorElasticsearch,i=Q.a.shims.docLinks.links.metricbeat.install,n=Q.a.shims.docLinks.links.metricbeat.start,r=ai(a);return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Elasticsearch"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:i,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.installMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Elasticsearch x-pack module in Metricbeat"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleInstallDirectory",{defaultMessage:"From the installation directory, run:"}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable elasticsearch-xpack"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module collects Elasticsearch metrics from {url}. If the local server has a different address, add it to the hosts setting in {module}.",values:{module:Object(x.jsx)(Ls,null,"modules.d/elasticsearch-xpack.yml"),url:Object(x.jsx)(Ls,null,"http://localhost:9200")}}))),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send data to the monitoring cluster"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.configureMetricbeatDescription",defaultMessage:"Modify {file} to set the connection information.",values:{file:Object(x.jsx)(Ls,null,"metricbeat.yml")}})),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:n,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.startMetricbeatLinkText",defaultMessage:"Follow these instructions."}))))},ii(e)]}(t,0,i);if(s===ci)return function(e,t){return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionTitle",{defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.elasticsearchInstructions.disableInternalCollectionDescription",defaultMessage:"Disable self monitoring of Elasticsearch monitoring metrics. Set {monospace} to false on each server in the production cluster.",values:{monospace:Object(x.jsx)(Ls,null,"xpack.monitoring.elasticsearch.collection.enabled")}}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"curl"},'PUT _cluster/settings\n{\n  "persistent": {\n    "xpack.monitoring.elasticsearch.collection.enabled": false\n  }\n}\n          '))},ni(e,t)]}(t,a);case U.F:if(s===li)return function(e,t,{esMonitoringUrl:s}){const a=Q.a.shims.docLinks.links.monitoring.monitorLogstash,i=Q.a.shims.docLinks.links.metricbeat.install,n=Q.a.shims.docLinks.links.metricbeat.start,r=ai(a);return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as Logstash"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:i,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Logstash x-pack module in Metricbeat"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable logstash-xpack"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect Logstash monitoring metrics from http://localhost:9600. If the local Logstash instance has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(x.jsx)(Ls,null,"hosts"),file:Object(x.jsx)(Ls,null,"modules.d/logstash-xpack.yml")}}))),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(x.jsx)(Ls,null,"metricbeat.yml")}})),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:n,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},ii(e)]}(t,0,i);if(s===ci)return function(e,t){return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of Logstash monitoring metrics"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the Logstash configuration file ({file}):",values:{file:Object(x.jsx)(Ls,null,"logstash.yml")}}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"xpack.monitoring.enabled: false"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.logstashInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart Logstash after making this change."}))))},ni(e,t)]}(t,a);case U.b:if(s===li)return function(e,t,{esMonitoringUrl:s}){const a=Q.a.shims.docLinks.links.metricbeat.configure,i=Q.a.shims.docLinks.links.metricbeat.install,n=Q.a.shims.docLinks.links.metricbeat.start,r=Q.a.shims.docLinks.links.metricbeat.httpEndpoint,l=e.beatType,c=ai(a);return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as this {beatType}",values:{beatType:l||oi}}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:i,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect {beatType} monitoring metrics from http://localhost:5066. If the {beatType} instance being monitored has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(x.jsx)(Ls,null,"hosts"),file:Object(x.jsx)(Ls,null,"modules.d/beat-xpack.yml"),beatType:l||oi}}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiCallOut,{color:"warning",iconType:"help",title:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirections",defaultMessage:"In order for Metricbeat to collect metrics from the running {beatType}, you need to {link}.",values:{link:Object(x.jsx)(m.EuiLink,{href:r,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.enableMetricbeatModuleHttpEnabledDirectionsLinkText",defaultMessage:"enable an HTTP endpoint for the {beatType} instance being monitored",values:{beatType:l}})),beatType:l||oi}})))}),c)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(x.jsx)(Ls,null,"metricbeat.yml")}})),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),c)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:n,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},ii(e)]}(t,0,i);if(s===ci)return function(e,t){const s=e.beatType;return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of {beatType}'s monitoring metrics",values:{beatType:s||oi}}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in {beatType}'s configuration file ({file}):",values:{beatType:s||oi,file:Object(x.jsx)(Ls,null,s,".yml")}}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.beatsInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart {beatType} after making this change.",values:{beatType:s||oi}}))))},ni(e,t)]}(t,a);case U.a:if(s===li)return function(e,t,{esMonitoringUrl:s}){const a=Q.a.shims.docLinks.links.metricbeat.configure,i=Q.a.shims.docLinks.links.metricbeat.install,n=Q.a.shims.docLinks.links.metricbeat.start,r=ai(a);return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatTitle",{defaultMessage:"Install Metricbeat on the same server as the APM server"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:i,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.installMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleTitle",{defaultMessage:"Enable and configure the Beat x-pack module in Metricbeat"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"metricbeat modules enable beat-xpack"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.enableMetricbeatModuleDescription",defaultMessage:"By default the module will collect APM server monitoring metrics from http://localhost:5066. If the local APM server has a different address, you must specify it via the {hosts} setting in the {file} file.",values:{hosts:Object(x.jsx)(Ls,null,"hosts"),file:Object(x.jsx)(Ls,null,"modules.d/beat-xpack.yml")}}))),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatTitle",{defaultMessage:"Configure Metricbeat to send to the monitoring cluster"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.configureMetricbeatDescription",defaultMessage:"Make these changes in your {file}.",values:{file:Object(x.jsx)(Ls,null,"metricbeat.yml")}})),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0},`output.elasticsearch:\n  hosts: [${s}] ## Monitoring cluster\n\n  # Optional protocol and basic auth credentials.\n  #protocol: "https"\n  #username: "elastic"\n  #password: "changeme"\n`),r)},{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatTitle",{defaultMessage:"Start Metricbeat"}),children:Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{href:n,target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.startMetricbeatLinkText",defaultMessage:"Follow the instructions here."}))))},ii(e)]}(t,0,i);if(s===ci)return function(e,t){return[{title:se.i18n.translate("xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.title",{defaultMessage:"Disable self monitoring of the APM server's monitoring metrics"}),children:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.description",defaultMessage:"Add the following setting in the APM server's configuration file ({file}):",values:{file:Object(x.jsx)(Ls,null,"apm-server.yml")}}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCodeBlock,{isCopyable:!0,language:"bash"},"monitoring.enabled: false"),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.apmInstructions.disableInternalCollection.note",defaultMessage:"You'll need to restart the APM server after making this change."}))))},ni(e,t)]}(t,a)}return[]}(t,e,i,a,{doneWithMigration:s,esMonitoringUrl:n.split(",").map((e=>`"${e}"`)),hasCheckedStatus:r[i]});return Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSteps,{steps:l}))}return null}renderActiveStepNextButton(){const{product:e,productName:t}=this.props,{activeStep:s,esMonitoringUrl:a,userAcknowledgedNoClusterUuidPrompt:i}=this.state;if(!e)return null;let n=!e.isFullyMigrated,o=s!==ci;if(s===li&&(t===U.r?(o=!1,n=!e.isPartiallyMigrated&&!e.isFullyMigrated):(o=!e.isFullyMigrated,n=!e.isFullyMigrated)),e.isFullyMigrated&&null===e.clusterUuid&&(i||(n=!0)),o){let t=!1,i=null;return s===ri?(t=!a||0===a.length,i=e.isPartiallyMigrated||e.isFullyMigrated?ci:li):s===li&&(t=!e.isPartiallyMigrated&&!e.isFullyMigrated,i=ci),Object(x.jsx)(m.EuiButton,{type:"submit",fill:!0,iconType:"sortRight",iconSide:"right",isDisabled:t,onClick:()=>this.setState({activeStep:i})},se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.nextButtonLabel",{defaultMessage:"Next"}))}return Object(x.jsx)(m.EuiButton,{type:"submit",fill:!0,isDisabled:n,onClick:()=>this.finishedFlyout()},se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.doneButtonLabel",{defaultMessage:"Done"}))}getDocumentationTitle(){const{productName:e}=this.props;let t=null;return e===U.B?t=Q.a.shims.docLinks.links.monitoring.monitorKibana:e===U.r&&(t=Q.a.shims.docLinks.links.monitoring.monitorElasticsearch),t?Object(x.jsx)(m.EuiText,{size:"s"},Object(x.jsx)(m.EuiLink,{href:t,target:"_blank"},se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.learnMore",{defaultMessage:"Learn about why."}))):null}render(){const{onClose:e,instance:t,productName:s,product:a}=this.props,i=Kt(s),n=t&&t.name||Wt(s);let r=se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitle",{defaultMessage:"Monitor `{instanceName}` {instanceIdentifier} with Metricbeat",values:{instanceName:n,instanceIdentifier:i}});a.isNetNewUser&&(r=se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.flyoutTitleNewUser",{defaultMessage:"Monitor {instanceName} {instanceIdentifier} with Metricbeat",values:{instanceIdentifier:i,instanceName:n}}));let l=null;return a.isFullyMigrated&&null===a.clusterUuid&&(l=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{color:"warning",iconType:"help",title:se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidTitle",{defaultMessage:"No cluster detected"})},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.metricbeatMigration.flyout.noClusterUuidDescription",defaultMessage:"This {productName} {instanceIdentifier} is not connected to an Elasticsearch cluster so once fully migrated, this {productName} {instanceIdentifier} will appear in the Standalone cluster instead of this one. {link}",values:{productName:s,instanceIdentifier:i,link:Object(x.jsx)(m.EuiLink,{href:"#/overview?_g=(cluster_uuid:__standalone_cluster__)",target:"_blank"},"Click here to view the Standalone cluster.")}})),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiCheckbox,{id:"monitoringFlyoutNoClusterUuidCheckbox",label:se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.noClusterUuidCheckboxLabel",{defaultMessage:"Yes, I understand that I will need to look in the Standalone cluster for\n                  this {productName} {instanceIdentifier}.",values:{productName:s,instanceIdentifier:i}}),checked:this.state.userAcknowledgedNoClusterUuidPrompt,onChange:e=>this.setState({userAcknowledgedNoClusterUuidPrompt:e.target.checked})})),Object(x.jsx)(m.EuiSpacer,{size:"s"}))),Object(x.jsx)(m.EuiFlyout,{onClose:e,"aria-labelledby":"flyoutTitle"},Object(x.jsx)(m.EuiFlyoutHeader,{hasBorder:!0},Object(x.jsx)(m.EuiTitle,{size:"m"},Object(x.jsx)("h2",{id:"flyoutTitle"},r))),Object(x.jsx)(m.EuiFlyoutBody,null,this.renderActiveStep(),l),Object(x.jsx)(m.EuiFlyoutFooter,{style:{marginBottom:"64px"}},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiButtonEmpty,{iconType:"cross",onClick:e,flush:"left"},se.i18n.translate("xpack.monitoring.metricbeatMigration.flyout.closeButtonLabel",{defaultMessage:"Close"}))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},this.renderActiveStepNextButton()))))}}class setup_mode_WrappedSetupModeRenderer extends r.a.Component{constructor(...e){super(...e),G()(this,"globalState",void 0),G()(this,"state",{renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}UNSAFE_componentWillMount(){this.globalState=this.context;const{kibana:e,onHttpError:t}=this.props;ye.supported=!0,we(this.globalState,e.services.http,t,(e=>{const t={renderState:!0},{productName:s}=this.props;if(!s)return void this.setState(t);const a=ke();if(!a.enabled||!a.data)return void this.setState(t);const i=a.data[s],n=e?e[s]:null;if(i&&n){const e=function(e,t){for(const s of t)if(-1===e.indexOf(s))return s}(Object.keys(n.byUuid),Object.keys(i.byUuid));e&&(t.newProduct=i.byUuid[e])}this.setState(t)}))}componentWillUnmount(){ye.supported=!1}reset(){this.setState({renderState:!1,isFlyoutOpen:!1,instance:null,newProduct:null,isSettingUpNew:!1})}getFlyout(e,t){const{productName:s}=this.props,{isFlyoutOpen:a,instance:i,isSettingUpNew:n,newProduct:o}=this.state;if(!e||!a)return null;let r=null;if(o?r=o:i&&Object.keys(i).length&&(r=e.byUuid[i.uuid]),!r){const t=Object.values(e.byUuid);r=t.length&&!n?t[0]:{isNetNewUser:!0}}return Object(x.jsx)(flyout_Flyout,{onClose:()=>this.reset(),productName:s,product:r,meta:t,instance:i,updateProduct:Ee,isSettingUpNew:n})}getBottomBar(e){return!e.enabled||e.hideBottomBar?null:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiSpacer,{size:"xxl"}),Object(x.jsx)(m.EuiBottomBar,null,Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center","data-test-subj":"monitoringSetupModeBottomBar"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.setupMode.description",defaultMessage:"You are in setup mode. The ({flagIcon}) icon indicates configuration options.",values:{flagIcon:Object(x.jsx)(m.EuiIcon,{type:"flag"})}})))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Fa,{exitSetupMode:()=>Se(!1)})))))))}async shortcutToFinishMigration(){await(async()=>{const e=`../api/monitoring/v1/setup/collection/${fe.cluster_uuid}/disable_internal_collection`;try{return await Oe.post(e)}catch(e){throw ve(e),e}})(),await Ee()}render(){const{render:e,productName:t}=this.props,s=ke();let a={byUuid:{}};s.data&&(t&&s.data[t]?a=s.data[t]:s.data&&(a=s.data));const i=s.data?s.data._meta:null;return e({setupMode:{data:a,meta:i,enabled:s.enabled,productName:t,updateSetupModeData:Ee,shortcutToFinishMigration:()=>this.shortcutToFinishMigration(),openFlyout:(e,t)=>this.setState({isFlyoutOpen:!0,instance:e,isSettingUpNew:t}),closeFlyout:()=>this.setState({isFlyoutOpen:!1})},flyoutComponent:this.getFlyout(a,i),bottomBarComponent:this.getBottomBar(s)})}}setup_mode_WrappedSetupModeRenderer.contextType=X;const pi=Object(a.withKibana)((gi=setup_mode_WrappedSetupModeRenderer,function(e){const t=Ta();return Object(x.jsx)(gi,n()({},e,{onHttpError:t}))}));var gi;const mi=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{services:i}=Object(a.useKibana)(),{generate:n}=re(),{updateTotalItemCount:r,getPaginationTableProps:l}=Xa("apm.instances"),c=s.cluster_uuid,u=s.ccs,d=Object(P.find)(e,{cluster_uuid:c}),[p,g]=Object(o.useState)({}),m=se.i18n.translate("xpack.monitoring.apm.instances.routeTitle",{defaultMessage:"{apm} - Instances",values:{apm:"APM server"}}),b=se.i18n.translate("xpack.monitoring.apm.instances.pageTitle",{defaultMessage:"APM server instances"});Object(o.useEffect)((()=>{d&&n(d.cluster_name,{inApm:!0})}),[d,n]);const h=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/apm/instances`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(n),r(null==n?void 0:n.stats.total)}),[u,c,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,r]),{pagination:j,sorting:f,onTableChange:O}=l();return Object(x.jsx)(Ra,{title:m,pageTitle:b,getPageData:h,"data-test-subj":"apmInstancesPage"},Object(x.jsx)(pi,{productName:U.a,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(ei,{setupMode:e,apms:{pagination:j,sorting:f,onTableChange:O,data:p}}),s)}))};function bi({alerts:e=null,stats:t}){const{name:s,output:a,version:i,uptime:n,timeOfLastEvent:r}=t,l=[{label:se.i18n.translate("xpack.monitoring.apm.instance.status.nameLabel",{defaultMessage:"Name"}),value:s,"data-test-subj":"name"},{label:se.i18n.translate("xpack.monitoring.apm.instance.status.outputLabel",{defaultMessage:"Output"}),value:a,"data-test-subj":"output"},{label:se.i18n.translate("xpack.monitoring.apm.instance.status.versionLabel",{defaultMessage:"Version"}),value:i,"data-test-subj":"version"},{label:se.i18n.translate("xpack.monitoring.apm.instance.status.uptimeLabel",{defaultMessage:"Uptime"}),value:zt(n,"time_since"),"data-test-subj":"uptime"},{label:se.i18n.translate("xpack.monitoring.apm.instance.status.lastEventLabel",{defaultMessage:"Last Event"}),value:se.i18n.translate("xpack.monitoring.apm.instance.status.lastEventDescription",{defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:nt(+it()(r),U.c)}}),"data-test-subj":"timeOfLastEvent"}];return Object(x.jsx)(Ct,{metrics:l,alerts:e,IconComponent:({status:e})=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.apm.instance.statusDescription",defaultMessage:"Status: {apmStatusIcon}",values:{apmStatusIcon:Object(x.jsx)(Ha,{status:e})}})),"data-test-subj":"apmDetailStatus"})}const hi=se.i18n.translate("xpack.monitoring.apm.instance.panels.title",{defaultMessage:"APM Server - Metrics"});function ji(e){const{metrics:t}=e,s=[t.apm_requests,t.apm_responses_valid,t.apm_responses_errors,t.apm_acm_request_count,t.apm_acm_response,t.apm_acm_response_errors,t.apm_output_events_rate_success,t.apm_output_events_rate_failure,t.apm_transformations],a=e.summary,i={...e,title:hi,seriesToShow:s,stats:a};return Object(x.jsx)($a,n()({},i,{StatusComponent:bi}))}const xi=({clusters:e})=>{var t;const{instance:s}=Object(C.useParams)(),i=Object(o.useContext)(X),{services:n}=Object(a.useKibana)(),{generate:r}=re(),{zoomInfo:l,onBrush:c}=Aa(),u=i.cluster_uuid,d=i.ccs,p=Object(P.find)(e,{cluster_uuid:u}),[g,m]=Object(o.useState)({}),[b,h]=Object(o.useState)(""),j=se.i18n.translate("xpack.monitoring.apm.instance.routeTitle",{defaultMessage:"{apm} - Instance",values:{apm:"APM server"}}),f=se.i18n.translate("xpack.monitoring.apm.instance.pageTitle",{defaultMessage:"APM server instance: {instanceName}",values:{instanceName:b}});Object(o.useEffect)((()=>{p&&r(p.cluster_name,{inApm:!0,instance:b})}),[p,b,r]);const O=Object(o.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${u}/apm/${s}`,o=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));m(o),h((null==o?void 0:o.apmSummary.name)||"")}),[d,u,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(x.jsx)(Da,{title:j,pageTitle:f,getPageData:O,"data-test-subj":"apmInstancePage"},Object(x.jsx)(ji,{summary:g.apmSummary||{},metrics:g.metrics||{},onBrush:c,zoomInfo:l}))};function fi({summary:e,metrics:t,...s}){const a=[t.beat_event_rates,t.beat_fail_rates,t.beat_throughput_rates,t.beat_output_errors,t.beat_memory,t.beat_cpu_utilization,t.beat_os_load,t.beat_handles],i=[{label:se.i18n.translate("xpack.monitoring.beats.instance.nameLabel",{defaultMessage:"Name"}),value:e.name,"data-test-subj":"name"},{label:se.i18n.translate("xpack.monitoring.beats.instance.hostLabel",{defaultMessage:"Host"}),value:e.transportAddress,"data-test-subj":"host"},{label:se.i18n.translate("xpack.monitoring.beats.instance.versionLabel",{defaultMessage:"Version"}),value:e.version,"data-test-subj":"version"},{label:se.i18n.translate("xpack.monitoring.beats.instance.typeLabel",{defaultMessage:"Type"}),value:e.type,"data-test-subj":"type"},{label:se.i18n.translate("xpack.monitoring.beats.instance.outputLabel",{defaultMessage:"Output"}),value:e.output,"data-test-subj":"output"},{label:se.i18n.translate("xpack.monitoring.beats.instance.configReloadsLabel",{defaultMessage:"Config reloads"}),value:zt(e.configReloads,"int_commas"),"data-test-subj":"configReloads"},{label:se.i18n.translate("xpack.monitoring.beats.instance.uptimeLabel",{defaultMessage:"Uptime"}),value:zt(e.uptime,"time_since"),"data-test-subj":"uptime"}],o=[{label:se.i18n.translate("xpack.monitoring.beats.instance.eventsTotalLabel",{defaultMessage:"Events total"}),value:zt(e.eventsTotal,"int_commas"),"data-test-subj":"eventsTotal"},{label:se.i18n.translate("xpack.monitoring.beats.instance.eventsEmittedLabel",{defaultMessage:"Events emitted"}),value:zt(e.eventsEmitted,"int_commas"),"data-test-subj":"eventsEmitted"},{label:se.i18n.translate("xpack.monitoring.beats.instance.eventsDroppedLabel",{defaultMessage:"Events dropped"}),value:zt(e.eventsDropped,"int_commas"),"data-test-subj":"eventsDropped"},{label:se.i18n.translate("xpack.monitoring.beats.instance.bytesSentLabel",{defaultMessage:"Bytes sent"}),value:zt(e.bytesWritten,"byte"),"data-test-subj":"bytesWritten"},{label:se.i18n.translate("xpack.monitoring.beats.instance.handlesLimitSoftLabel",{defaultMessage:"Handles limit (soft)"}),value:zt(e.handlesSoftLimit,"int_commas"),"data-test-subj":"handlesLimitSoft"},{label:se.i18n.translate("xpack.monitoring.beats.instance.handlesLimitHardLabel",{defaultMessage:"Handles limit (hard)"}),value:zt(e.handlesHardLimit,"int_commas"),"data-test-subj":"handlesLimitHard"}];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Ct,{metrics:i,"data-test-subj":"beatSummaryStatus01"})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Ct,{metrics:o,"data-test-subj":"beatSummaryStatus02"})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.beats.beat.heading",defaultMessage:"Beat"}))),Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},s)),Object(x.jsx)(m.EuiSpacer,null))))))))}const Oi=({instance:e,...t})=>{const s=[];return e?s.push({id:"overview",label:se.i18n.translate("xpack.monitoring.beatsNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/beats/beat/${e}`}):(s.push({id:"overview",label:se.i18n.translate("xpack.monitoring.beatsNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/beats",testSubj:"beatsOverviewPage"}),s.push({id:"instances",label:se.i18n.translate("xpack.monitoring.beatsNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/beats/beats",testSubj:"beatsListingPage"})),Object(x.jsx)(Da,n()({},t,{tabs:s,product:"beats"}))},vi=({clusters:e})=>{var t;const{instance:s}=Object(C.useParams)(),i=Object(o.useContext)(X),{services:n}=Object(a.useKibana)(),{generate:r}=re(),{zoomInfo:l,onBrush:c}=Aa(),u=i.cluster_uuid,d=i.ccs,p=Object(P.find)(e,{cluster_uuid:u}),[g,m]=Object(o.useState)({}),[b,h]=Object(o.useState)(""),j=se.i18n.translate("xpack.monitoring.beats.instance.routeTitle",{defaultMessage:"Beats - {instanceName} - Overview",values:{instanceName:b}}),f=se.i18n.translate("xpack.monitoring.beats.instance.pageTitle",{defaultMessage:"Beat instance: {beatName}",values:{beatName:b}});Object(o.useEffect)((()=>{p&&r(p.cluster_name,{inBeats:!0,instance:b})}),[p,b,r]);const O=Object(o.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${u}/beats/beat/${s}`,o=await(null===(t=n.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));m(o),h((null==o?void 0:o.summary.name)||"")}),[d,u,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(x.jsx)(Oi,{title:j,pageTitle:f,getPageData:O,instance:s,"data-test-subj":"beatDetailPage"},Object(x.jsx)("div",{"data-test-subj":"monitoringBeatsInstanceApp"},Object(x.jsx)(fi,{summary:g.summary,metrics:g.metrics,onBrush:c,zoomInfo:l})))};function yi({stats:e,alerts:t}){const{total:s,types:a,stats:{bytesSent:i,totalEvents:n}}=e,o=[{label:se.i18n.translate("xpack.monitoring.beats.overview.totalBeatsLabel",{defaultMessage:"Total Beats"}),value:zt(s,"int_commas"),"data-test-subj":"totalBeats"}];return o.push(...a.map((({type:e,count:t})=>({label:e,value:zt(t,"int_commas"),"data-test-subj":"typeCount","data-test-type-count":`${e}:${t}`})))),o.push({label:se.i18n.translate("xpack.monitoring.beats.overview.totalEventsLabel",{defaultMessage:"Total Events"}),value:zt(n,"0.[0]a"),"data-test-subj":"totalEvents"}),o.push({label:se.i18n.translate("xpack.monitoring.beats.overview.bytesSentLabel",{defaultMessage:"Bytes Sent"}),value:zt(i,"byte"),"data-test-subj":"bytesSent"}),Object(x.jsx)(Ct,{metrics:o,alerts:t,"data-test-subj":"beatsSummaryStatus"})}class listing_Listing extends o.PureComponent{getColumns(){const e=this.props.setupMode;return[{name:se.i18n.translate("xpack.monitoring.beats.instances.nameTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(_e(xe.d.MetricbeatMigration)){const t=Object(P.get)(e,"data.byUuid",{})[s.uuid]||{},i={uuid:s.uuid,name:s.name};a=Object(x.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(x.jsx)(Js,{setupMode:e,status:t,instance:i,productName:U.b}))}return Object(x.jsx)("div",null,Object(x.jsx)(m.EuiLink,{href:$e(`#/beats/beat/${s.uuid}`),"data-test-subj":`beatLink-${t}`},t),a)}},{name:se.i18n.translate("xpack.monitoring.beats.instances.typeTitle",{defaultMessage:"Type"}),field:"type"},{name:se.i18n.translate("xpack.monitoring.beats.instances.outputEnabledTitle",{defaultMessage:"Output Enabled"}),field:"output"},{name:se.i18n.translate("xpack.monitoring.beats.instances.totalEventsRateTitle",{defaultMessage:"Total Events Rate"}),field:"total_events_rate",render:e=>zt(e,"","/s")},{name:se.i18n.translate("xpack.monitoring.beats.instances.bytesSentRateTitle",{defaultMessage:"Bytes Sent Rate"}),field:"bytes_sent_rate",render:e=>zt(e,"byte","/s")},{name:se.i18n.translate("xpack.monitoring.beats.instances.outputErrorsTitle",{defaultMessage:"Output Errors"}),field:"errors",render:e=>zt(e,"0")},{name:se.i18n.translate("xpack.monitoring.beats.instances.allocatedMemoryTitle",{defaultMessage:"Allocated Memory"}),field:"memory",render:e=>zt(e,"byte")},{name:se.i18n.translate("xpack.monitoring.beats.instances.versionTitle",{defaultMessage:"Version"}),field:"version"}]}render(){const{stats:e,data:t,sorting:s,pagination:a,onTableChange:i,setupMode:n}=this.props;let o=null;_e(xe.d.MetricbeatMigration)&&(o=Object(x.jsx)(Qs,{setupModeData:n.data,useNodeIdentifier:!1,productName:U.b}));const r=Object(P.uniq)(t.map((e=>e.type))).map((e=>({value:e}))),l=Object(P.uniq)(t.map((e=>e.version))).map((e=>({value:e})));return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.beats.listing.heading",defaultMessage:"Beats listing"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(yi,{stats:e})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,o,Object(x.jsx)(Jt,{className:"beatsTable",rows:t,setupMode:n,productName:U.b,columns:this.getColumns(),sorting:s,pagination:a,search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.beats.filterBeatsPlaceholder",{defaultMessage:"Filter Beats..."})},filters:[{type:"field_value_selection",field:"type",name:se.i18n.translate("xpack.monitoring.beats.instances.typeFilter",{defaultMessage:"Type"}),options:r,multiSelect:"or"},{type:"field_value_selection",field:"version",name:se.i18n.translate("xpack.monitoring.beats.instances.versionFilter",{defaultMessage:"Version"}),options:l,multiSelect:"or"}]},onTableChange:i,executeQueryOptions:{defaultFields:["name","type"]}}))))}}const ki=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{services:i}=Object(a.useKibana)(),{generate:r}=re(),{updateTotalItemCount:l,getPaginationTableProps:c}=Xa("beats.instances"),u=s.cluster_uuid,d=s.ccs,p=Object(P.find)(e,{cluster_uuid:u}),[g,m]=Object(o.useState)({}),b=se.i18n.translate("xpack.monitoring.beats.routeTitle",{defaultMessage:"Beats"}),h=se.i18n.translate("xpack.monitoring.beats.listing.pageTitle",{defaultMessage:"Beats listing"});Object(o.useEffect)((()=>{p&&r(p.cluster_name,{inBeats:!0})}),[p,r]);const j=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/beats/beats`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(n),l(null==n?void 0:n.stats.total)}),[d,u,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,l]);return Object(x.jsx)(Oi,{title:b,pageTitle:h,getPageData:j},Object(x.jsx)("div",{"data-test-subj":"monitoringBeatsInstancesApp"},Object(x.jsx)(pi,{productName:U.b,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(listing_Listing,n()({stats:g.stats,data:g.listing,setupMode:e},c())),s)})))};function Mi({latestActive:e}){const t={last1m:se.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1MinuteLabel",{defaultMessage:"Last 1 minute"}),last5m:se.i18n.translate("xpack.monitoring.beats.overview.latestActive.last5MinutesLabel",{defaultMessage:"Last 5 minutes"}),last20m:se.i18n.translate("xpack.monitoring.beats.overview.latestActive.last20MinutesLabel",{defaultMessage:"Last 20 minutes"}),last1h:se.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1HourLabel",{defaultMessage:"Last 1 hour"}),last1d:se.i18n.translate("xpack.monitoring.beats.overview.latestActive.last1DayLabel",{defaultMessage:"Last 1 day"})},s=e.map((({range:e,count:s})=>({range:t[e],count:s})));return Object(x.jsx)(m.EuiBasicTable,{items:s,columns:[{field:"range",name:""},{field:"count",dataType:"number",name:""}]})}function Ei({latestVersions:e}){return Object(x.jsx)(m.EuiBasicTable,{items:e,columns:[{field:"version",name:""},{field:"count",dataType:"number",name:""}]})}function Si({latestTypes:e}){return Object(x.jsx)(m.EuiBasicTable,{items:e,columns:[{field:"type",name:""},{field:"count",dataType:"number",name:""}]})}function wi({latestActive:e,latestTypes:t,latestVersions:s,stats:a,metrics:i,alerts:o,...r}){const l=[i.beat_event_rates,i.beat_fail_rates,i.beat_throughput_rates,i.beat_output_errors].map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Ms,n()({series:e},r))))));return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.beats.overview.heading",defaultMessage:"Beats Overview"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(yi,{stats:a,alerts:o})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,function(e,t,s){if(t&&t.length>0)return Object(x.jsx)(m.EuiFlexGroup,{wrap:!0},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.beats.overview.activeBeatsInLastDayTitle",defaultMessage:"Active Beats in last day"}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(Mi,{latestActive:e})),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5BeatTypesInLastDayTitle",defaultMessage:"Top 5 Beat Types in last day"}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(Si,{latestTypes:t})),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.beats.overview.top5VersionsInLastDayTitle",defaultMessage:"Top 5 Versions in last day"}))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(Ei,{latestVersions:s})));const a=se.i18n.translate("xpack.monitoring.beats.overview.noActivityDescription",{defaultMessage:"Hi there! This area is where your latest Beats activity would show up, but you don't seem to have any activity within the last day."});return Object(x.jsx)(m.EuiCallOut,{title:a,iconType:"gear","data-test-subj":"noRecentActivityMessage"})}(e,t,s)),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGroup,{wrap:!0},l))))}const Ti=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{zoomInfo:i,onBrush:r}=Aa(),{services:l}=Object(a.useKibana)(),c=s.cluster_uuid,u=s.ccs,{generate:d}=re(),p=Object(P.find)(e,{cluster_uuid:c}),[g,m]=Object(o.useState)(null),b=se.i18n.translate("xpack.monitoring.beats.overview.routeTitle",{defaultMessage:"Beats - Overview"}),h=se.i18n.translate("xpack.monitoring.beats.overview.pageTitle",{defaultMessage:"Beats overview"});Object(o.useEffect)((()=>{p&&d(p.cluster_name,{inBeats:!0})}),[p,d]);const j=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=l.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/beats`,i=await(null===(t=l.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(i)}),[u,c,null===(t=l.data)||void 0===t?void 0:t.query.timefilter.timefilter,l.http]);return Object(x.jsx)(Oi,{title:b,pageTitle:h,getPageData:j},Object(x.jsx)("div",null,null===(f=g)?null:Object(x.jsx)(wi,n()({},f,{onBrush:r,zoomInfo:i}))));var f};function _i(e){if("green"===e.status)return se.i18n.translate("xpack.monitoring.cluster.health.healthy",{defaultMessage:"Healthy"});const{product:t,status:s}=e;if("es"===t){if("yellow"===e.status)return se.i18n.translate("xpack.monitoring.cluster.health.replicaShards",{defaultMessage:"Missing replica shards"});if("red"===e.status)return se.i18n.translate("xpack.monitoring.cluster.health.primaryShards",{defaultMessage:"Missing primary shards"})}return"kb"!==t||"yellow"!==s&&"red"!==s?"N/A":Object(x.jsx)(m.EuiText,null,se.i18n.translate("xpack.monitoring.cluster.health.pluginIssues",{defaultMessage:"Some plugins may be experiencing issues. Please check "}),Object(x.jsx)(m.EuiLink,{href:`${Q.a.shims.getBasePath()}/status`},"the Kibana status page"),".")}function Ci(e){const t={green:"success",yellow:"warning",red:"danger"}[e.status]||"n/a";return Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiHealth,{color:t,"data-test-subj":"status"},Object(x.jsx)(_i,e))))}const Ii=({extras:e})=>void 0===e?null:Object(x.jsx)(m.EuiFlexItem,{grow:!1},e);function Li(e){const t={elasticsearch:"logoElasticsearch",kibana:"logoKibana",logstash:"logoLogstash",beats:"logoBeats",apm:"apmApp",enterprise_search:"logoEnterpriseSearch"}[e.url];return Object(x.jsx)("div",{"data-test-subj":`clusterItemContainer${e.title}`},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"m",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiIcon,{type:t,size:"l"})),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h2",null,e.title))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},e.statusIndicator),Object(x.jsx)(Ii,{extras:e.extras})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),e.children,Object(x.jsx)(m.EuiSpacer,{size:"xxl"}))}function Pi({usedBytes:e,maxBytes:t}){return e&&t?Object(x.jsx)("span",null,Object(x.jsx)(m.EuiText,null,Ft(e,t))):e?Object(x.jsx)("span",null,Object(x.jsx)(m.EuiText,null,Dt(e,"byte"))):null}function Fi({usedBytes:e,maxBytes:t}){return e&&t?Object(x.jsx)("span",null,Object(x.jsx)(m.EuiText,null,Nt(e,t)),Object(x.jsx)(m.EuiText,{color:"subdued",size:"s"},Ft(e,t))):Object(x.jsx)(m.EuiText,null,"0")}function Ni({setupModeEnabled:e,setupModeData:t,children:s,...a}){return e&&0===Object(P.get)(t,"totalUniqueInstanceCount",0)?s:Object(x.jsx)(m.EuiLink,a,s)}function Di({setupModeData:e,badgeClickLink:t,productName:s}){if(!e)return null;const{totalUniqueInstanceCount:a,totalUniqueFullyMigratedCount:i,totalUniquePartiallyMigratedCount:n}=e,o=a>0&&(i===a||n===a),r=n>0,l=Object(P.get)(e,"detected.mightExist")||Object(P.get)(e,"detected.doesExist");let c=null;if(0===a)if(l){const e=se.i18n.translate("xpack.monitoring.setupMode.tooltip.detected",{defaultMessage:"No monitoring"});c=Object(x.jsx)(m.EuiToolTip,{position:"top",content:se.i18n.translate("xpack.monitoring.setupMode.tooltip.mightExist",{defaultMessage:"We detected usage of this product. Click to start monitoring."})},Object(x.jsx)(m.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=se.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsage",{defaultMessage:"No usage"});c=Object(x.jsx)(m.EuiToolTip,{position:"top",content:se.i18n.translate("xpack.monitoring.setupMode.tooltip.noUsageDetected",{defaultMessage:"We did not detect any usage. Click to view {identifier}.",values:{identifier:Kt(s,!0)}})},Object(x.jsx)(m.EuiBadge,{color:"hollow",iconType:"flag",href:t,onClickAriaLabel:e},e))}else if(o)if(r){const e=se.i18n.translate("xpack.monitoring.euiTable.isPartiallyMigratedLabel",{defaultMessage:"Self monitoring is on"});c=Object(x.jsx)(m.EuiToolTip,{position:"top",content:se.i18n.translate("xpack.monitoring.setupMode.tooltip.disableInternal",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}. Click to view {identifierPlural} and disable self monitoring.",values:{identifierPlural:Kt(s,!0)}})},Object(x.jsx)(m.EuiBadge,{color:"warning",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=se.i18n.translate("xpack.monitoring.euiTable.isFullyMigratedLabel",{defaultMessage:"Metricbeat monitoring"});c=Object(x.jsx)(m.EuiToolTip,{position:"top",content:se.i18n.translate("xpack.monitoring.setupMode.tooltip.allSet",{defaultMessage:"Metricbeat is monitoring all {identifierPlural}.",values:{identifierPlural:Kt(s,!0)}})},Object(x.jsx)(m.EuiBadge,{color:"success",iconType:"flag",href:t,onClickAriaLabel:e},e))}else{const e=se.i18n.translate("xpack.monitoring.euiTable.isInternalCollectorLabel",{defaultMessage:"Self monitoring"});c=Object(x.jsx)(m.EuiToolTip,{position:"top",content:se.i18n.translate("xpack.monitoring.setupMode.tooltip.oneInternal",{defaultMessage:"At least one {identifier} isnt monitored using Metricbeat. Click to view status.",values:{identifier:Kt(s)}})},Object(x.jsx)(m.EuiBadge,{color:"danger",iconType:"flag",href:t,onClickAriaLabel:e},e))}return Object(x.jsx)(m.EuiFlexItem,{grow:!1,"data-test-subj":"monitoringSetupModeMetricbeatMigrationTooltip"},c)}function zi(e,t,s){if(!e)return!1;const a=Te(s),i=t.find((t=>e[t]&&e[t].find((e=>e.states.length>0))));return a||i}const Ri=e=>{const t=Object(P.get)(e,"total",0);let s=Object(P.get)(e,"primaries","N/A"),a="N/A";return"N/A"!==s&&(a=Dt(t-s,"int_commas"),s=Dt(s,"int_commas")),{primaries:s,replicas:a}},Ai=e=>dt.a.tz(e,dt.a.tz.guess()).format("LL");function Bi(e){switch(e){case"warn":return"warning";case"debug":return"hollow";case"info":return"default";case"error":return"danger"}}const Vi={info:se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.infoLogsTooltipText",{defaultMessage:"The number of information logs"}),warn:se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.warnLogsTooltipText",{defaultMessage:"The number of warning logs"}),debug:se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.debugLogsTooltipText",{defaultMessage:"The number of debug logs"}),error:se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.errorLogsTooltipText",{defaultMessage:"The number of error logs"}),fatal:se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.fatalLogsTooltipText",{defaultMessage:"The number of fatal logs"}),unknown:se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.unknownLogsTooltipText",{defaultMessage:"Unknown"})},Ui=[U.I,U.P,U.H],$i=[U.J,U.L,U.W,U.X,U.R,U.T,U.M,U.S],Hi=[U.O];function Wi(e){const t=e.cluster_stats||{},s=t.nodes,a=t.indices,i=e.setupMode,l=e.alerts,c=r.a.useContext(st),u=()=>$e("#/elasticsearch"),d=()=>$e("#/elasticsearch/nodes"),{primaries:p,replicas:g}=Ri(Object(P.get)(e,"cluster_stats.indices.shards",{})),b=Object(P.get)(i.data,"elasticsearch"),h=_e(xe.d.MetricbeatMigration)?Object(x.jsx)(Di,{setupModeData:b,productName:U.r,badgeClickLink:d()}):null;let j=null;if(zi(l,$i,c)){const e=$i.map((e=>l[e]));j=Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Et,{alerts:e}))}let f=null;if(zi(l,Ui,c)){const e=Ui.map((e=>l[e]));f=Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Et,{alerts:e}))}let O=null;if(zi(l,Hi,c)){const e=Hi.map((e=>l[e]));O=Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Et,{alerts:e}))}return Object(x.jsx)(Li,n()({},e,{url:"elasticsearch",title:"Elasticsearch"}),Object(x.jsx)(m.EuiFlexGrid,{columns:4},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:i.enabled,setupModeData:b,href:u(),"aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.overviewLinkAriaLabel",{defaultMessage:"Elasticsearch Overview"}),"data-test-subj":"esOverview"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.overviewLinkLabel",defaultMessage:"Overview"}))))),f),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.healthLabel",defaultMessage:"Health"})),Object(x.jsx)(m.EuiDescriptionListDescription,null,Object(x.jsx)(m.EuiHealth,{color:{green:"success",yellow:"warning",red:"danger"}[t.status],"data-test-subj":"statusIcon"},Object(x.jsx)(_i,{status:t.status,product:"es"}))),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.versionLabel",defaultMessage:"Version"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esVersion"},e.version||se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esUptime"},Dt(Object(P.get)(s,"jvm.max_uptime_in_millis"),"time_since")),(()=>{if(e.ml){const t=$e("#/elasticsearch/ml_jobs");return Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(Ni,{setupModeEnabled:i.enabled,setupModeData:b,href:t},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jobsLabel",defaultMessage:"Machine learning jobs"}))),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esMlJobs"},Object(x.jsx)(Ni,{setupModeEnabled:i.enabled,setupModeData:b,href:t},e.ml.jobs)))}return null})(),e.showLicenseExpiration?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.licenseLabel",defaultMessage:"License"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esLicenseType"},Object(x.jsx)(m.EuiFlexGroup,{direction:"column",gutterSize:"xs"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiLink,{href:$e("#/license")},Object(P.capitalize)(e.license.type))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiText,{size:"s"},void 0===e.license.expiry_date_in_millis?"":Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.expireDateText",defaultMessage:"expires on {expiryDate}",values:{expiryDate:Ai(e.license.expiry_date_in_millis)}})))))):null))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(m.EuiLink,{"data-test-subj":"esNumberOfNodes",href:d()},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:Dt(Object(P.get)(s,"count.total"),"int_commas")}}))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},h,j))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskAvailableLabel",defaultMessage:"Disk Available"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esDiskAvailable"},Object(x.jsx)(Fi,{usedBytes:Object(P.get)(s,"fs.available.bytes",Object(P.get)(s,"fs.available_in_bytes")),maxBytes:Object(P.get)(s,"fs.total.bytes",Object(P.get)(s,"fs.total_in_bytes"))})),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esJvmHeap"},Object(x.jsx)(Fi,{usedBytes:Object(P.get)(s,"jvm.mem.heap.used.bytes",Object(P.get)(s,"jvm.mem.heap_used_in_bytes")),maxBytes:Object(P.get)(s,"jvm.mem.heap.max.bytes",Object(P.get)(s,"jvm.mem.heap_max_in_bytes"))}))))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:i.enabled,setupModeData:b,href:$e("#/elasticsearch/indices"),"data-test-subj":"esNumberOfIndices","aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.indicesCountLinkAriaLabel",{defaultMessage:"Elasticsearch Indices: {indicesCount}",values:{indicesCount:Dt(Object(P.get)(a,"count"),"int_commas")}})},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.indicesCountLinkLabel",defaultMessage:"Indices: {indicesCount}",values:{indicesCount:Dt(Object(P.get)(a,"count"),"int_commas")}}))))),O),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.documentsLabel",defaultMessage:"Documents"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esDocumentsCount",className:"eui-textBreakWord"},Dt(Object(P.get)(a,"docs.total",Object(P.get)(a,"docs.count")),"int_commas")),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.diskUsageLabel",defaultMessage:"Disk Usage"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esDiskUsage"},Dt(Object(P.get)(a,"store.size.bytes",Object(P.get)(a,"store.size_in_bytes")),"byte")),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.primaryShardsLabel",defaultMessage:"Primary Shards"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esPrimaryShards"},p),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.replicaShardsLabel",defaultMessage:"Replica Shards"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"esReplicaShards"},g)))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:i.enabled,setupModeData:b,href:u(),"aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.esPanel.logsLinkAriaLabel",{defaultMessage:"Elasticsearch Logs"}),"data-test-subj":"esLogs"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.esPanel.logsLinkLabel",defaultMessage:"Logs"})))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),function(e){return e.logs.enabled?Object(x.jsx)(m.EuiDescriptionList,{type:"column"},e.logs.types.map(((e,t)=>Object(x.jsx)(o.Fragment,{key:t},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.logTypeTitle",defaultMessage:"{type}",values:{type:Object(P.capitalize)(e.type)}})),Object(x.jsx)(m.EuiDescriptionListDescription,null,function(e){return Object(x.jsx)(m.EuiFlexGroup,{wrap:!0,responsive:!1,gutterSize:"xs"},e.levels.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{grow:!1,key:t},Object(x.jsx)(m.EuiToolTip,{position:"top",content:Vi[e.level]||Vi.unknown},Object(x.jsx)(m.EuiBadge,{color:Bi(e.level)},Dt(e.count,"int_commas")))))))}(e))))),0===e.logs.types.length?Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logsPanel.noLogsFound",defaultMessage:"No logs found."}):null):Object(x.jsx)(m.EuiDescriptionList,null,Object(x.jsx)(Ps,{reason:e.logs.reason}))}(e)))))}const qi=[U.N];function Gi(e){const t=e.setupMode,s=e.alerts,a=r.a.useContext(st),{staleStatusThresholdSeconds:i}=r.a.useContext($),o=t.enabled&&Object(P.get)(t.data,"kibana.detected.doesExist",!1);if(!e.count&&!o)return null;const l=()=>$e("#/kibana/instances"),c=Object(P.get)(t.data,"kibana"),u=_e(xe.d.MetricbeatMigration)?Object(x.jsx)(Di,{setupModeData:c,productName:U.B,badgeClickLink:l()}):null;let d=null;if(zi(s,qi,a)){const e=qi.map((e=>s[e]));d=Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Et,{alerts:e}))}return Object(x.jsx)(Li,n()({},e,{statusIndicator:Ki(e.status,e.some_status_is_stale,l(),i),url:"kibana",title:se.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.kibanaTitle",{defaultMessage:"Kibana"})}),Object(x.jsx)(m.EuiFlexGrid,{columns:4},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:t.enabled,setupModeData:c,href:$e("#/kibana"),"aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkAriaLabel",{defaultMessage:"Kibana Overview"}),"data-test-subj":"kbnOverview"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column","data-test-subj":"kibana_overview","data-overview-status":e.status},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.requestsLabel",defaultMessage:"Requests"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"kbnRequests"},e.requests_total),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeLabel",defaultMessage:"Max. Response Time"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"kbnMaxResponseTime"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.maxResponseTimeDescription",defaultMessage:"{maxTime} ms",values:{maxTime:e.response_time_max}})),e.rules.instance&&e.rules.cluster&&Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.ruleFailuresLabel",defaultMessage:"Rule Success Ratio"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"kbnRuleFailures"},Nt(e.rules.instance.executions-e.rules.instance.failures,e.rules.instance.executions)),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.queuedRulesCountLabel",defaultMessage:"Queued Rules"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"kbnQueuedRules"},e.rules.cluster.overdue.count))))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(m.EuiLink,{href:l(),"data-test-subj":"kbnInstances","aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkAriaLabel",{defaultMessage:"Kibana Instances: {instancesCount}",values:{instancesCount:e.count}})},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.instancesCountLinkLabel",defaultMessage:"Instances: {instancesCount}",values:{instancesCount:Object(x.jsx)("span",{"data-test-subj":"number_of_kibana_instances"},e.count)}}))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},u,d))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.connectionsLabel",defaultMessage:"Connections"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"kbnConnections"},Dt(e.concurrent_connections,"int_commas")),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.kibanaPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"kbnMemoryUsage"},Object(x.jsx)(Fi,{usedBytes:e.memory_size,maxBytes:e.memory_limit})))))))}function Ki(e,t,s,a){if(!t)return Object(x.jsx)(Ci,{status:e,product:"kb"});const i=se.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from some instances.",values:{staleStatusThresholdSeconds:a}});return Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)("div",{style:{marginBottom:"8px"}},Object(x.jsx)(m.EuiToolTip,{position:"top",content:i},Object(x.jsx)(m.EuiBadge,{iconType:"warning",color:"warning","data-test-subj":"status"},se.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusLabel",{defaultMessage:"Stale"})))),Object(x.jsx)(m.EuiLink,{href:s},se.i18n.translate("xpack.monitoring.cluster.overview.kibanaPanel.staleStatusLinkToInstancesLabel",{defaultMessage:"View all instances"})))}const Ji=[U.Q];function Yi(e){const{setupMode:t}=e,s=e.node_count||0,a=e.queue_types||{},i=e.alerts,o=r.a.useContext(st);if(!s&&!t.enabled)return null;const l=()=>$e("#/logstash/nodes"),c=Object(P.get)(t.data,"logstash"),u=_e(xe.d.MetricbeatMigration)?Object(x.jsx)(Di,{setupModeData:c,productName:U.F,badgeClickLink:l()}):null;let d=null;if(zi(i,Ji,o)){const e=Ji.map((e=>i[e]));d=Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(Et,{alerts:e}))}return Object(x.jsx)(Li,n()({},e,{url:"logstash",title:se.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.logstashTitle",{defaultMessage:"Logstash"})}),Object(x.jsx)(m.EuiFlexGrid,{columns:4},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:t.enabled,setupModeData:c,href:$e("#/logstash"),"data-test-subj":"lsOverview","aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.overviewLinkAriaLabel",{defaultMessage:"Logstash Overview"})},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column","data-test-subj":"logstash_overview"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"lsEventsReceived"},Dt(e.events_in_total,"0.[0]a")),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"lsEventsEmitted"},Dt(e.events_out_total,"0.[0]a"))))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween",gutterSize:"s",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(m.EuiLink,{href:l(),"data-test-subj":"lsNodes","aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkAriaLabel",{defaultMessage:"Logstash Nodes: {nodesCount}",values:{nodesCount:s}})},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.nodesCountLinkLabel",defaultMessage:"Nodes: {nodesCount}",values:{nodesCount:Object(x.jsx)("span",{"data-test-subj":"number_of_logstash_instances"},s)}}))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},u,d))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"lsUptime"},e.max_uptime?Dt(e.max_uptime,"time_since"):0),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.jvmHeapLabel",defaultMessage:"{javaVirtualMachine} Heap",values:{javaVirtualMachine:"JVM"}})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"lsJvmHeap"},Object(x.jsx)(Fi,{usedBytes:e.avg_memory_used,maxBytes:e.avg_memory}))))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",gutterSize:"m"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:t.enabled,setupModeData:c,href:$e("#/logstash/pipelines"),"data-test-subj":"lsPipelines","aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.logstashPanel.pipelineCountLinkAriaLabel",{defaultMessage:"Logstash Pipelines: {pipelineCount}",values:{pipelineCount:e.pipeline_count}})},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.pipelinesCountLinkLabel",defaultMessage:"Pipelines: {pipelineCount}",values:{pipelineCount:Object(x.jsx)("span",{"data-test-subj":"number_of_logstash_pipelines"},e.pipeline_count)}})))))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withMemoryQueuesLabel",defaultMessage:"With Memory Queues"})),Object(x.jsx)(m.EuiDescriptionListDescription,null,a[U.E.QUEUE_TYPES.MEMORY]||0),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.logstashPanel.withPersistentQueuesLabel",defaultMessage:"With Persistent Queues"})),Object(x.jsx)(m.EuiDescriptionListDescription,null,a[U.E.QUEUE_TYPES.PERSISTED]||0))))))}function Qi(e){const{setupMode:t}=e,s=Object(P.get)(e,"beats.total")||0;if(0===s&&!t.enabled)return null;const a=Object(P.get)(t.data,"beats"),i=_e(xe.d.MetricbeatMigration)?Object(x.jsx)(Di,{setupModeData:a,productName:U.b,badgeClickLink:$e("#/beats/beats")}):null,o=Object(P.get)(e,"beats.types",[]).map(((e,t)=>[Object(x.jsx)(m.EuiDescriptionListTitle,{key:`beat-types-type-${t}`,"data-test-subj":"beatTypeCount","data-test-beat-type-count":e.type+":"+e.count},e.type),Object(x.jsx)(m.EuiDescriptionListDescription,{key:`beat-types-count-${t}`},e.count)]));return Object(x.jsx)(Li,n()({},e,{url:"beats",title:se.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.beatsTitle",{defaultMessage:"Beats"})}),Object(x.jsx)(m.EuiFlexGrid,{columns:4},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:t.enabled,setupModeData:a,href:$e("#/beats"),"aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.overviewLinkAriaLabel",{defaultMessage:"Beats Overview"}),"data-test-subj":"beatsOverview"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.totalEventsLabel",defaultMessage:"Total Events"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"beatsTotalEvents"},zt(e.totalEvents,"0.[0]a")),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.bytesSentLabel",defaultMessage:"Bytes Sent"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"beatsBytesSent"},zt(e.bytesSent,"byte"))))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(m.EuiLink,{href:$e("#/beats/beats"),"aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.beatsPanel.instancesTotalLinkAriaLabel",{defaultMessage:"Beats Instances: {beatsTotal}",values:{beatsTotal:s}}),"data-test-subj":"beatsListing"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.beatsPanel.beatsTotalLinkLabel",defaultMessage:"Beats: {beatsTotal}",values:{beatsTotal:Object(x.jsx)("span",{"data-test-subj":"beatsTotal"},s)}}))))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},o)))))}const Xi=(e,t)=>{const s=Object(x.jsx)("span",{"data-test-subj":"apmsTotal"},t),a={};return e?(a.link=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.agentServersTotalLinkLabel",defaultMessage:"Integrations Servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=se.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesAndFleetsTotalLinkAriaLabel",{defaultMessage:"Integrations server instances: {apmsTotal}",values:{apmsTotal:s}}),a):(a.link=Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.serversTotalLinkLabel",defaultMessage:"APM servers: {apmsTotal}",values:{apmsTotal:s}}),a.aria=se.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.instancesTotalLinkAriaLabel",{defaultMessage:"APM server instances: {apmsTotal}",values:{apmsTotal:s}}),a)},Zi=e=>e?se.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewFleetLinkLabel",{defaultMessage:"Integrations server overview"}):se.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.overviewLinkLabel",{defaultMessage:"APM server overview"}),en=e=>e?se.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmFleetTitle",{defaultMessage:"Integrations server"}):se.i18n.translate("xpack.monitoring.cluster.overview.apmPanel.apmTitle",{defaultMessage:"APM server"});function tn(e){const{setupMode:t,versions:s}=e,a=Object(P.get)(e,"apms.total")||0;if(0===a&&!t.enabled)return null;const i=Va(s),{link:o,aria:r}=Xi(i,a),l=Zi(i),c=()=>$e("#/apm/instances"),u=Object(P.get)(t.data,"apm"),d=_e(xe.d.MetricbeatMigration)?Object(x.jsx)(Di,{setupModeData:u,badgeClickLink:c(),productName:U.a}):null;return Object(x.jsx)(Li,n()({},e,{url:"apm",title:en(i)}),Object(x.jsx)(m.EuiFlexGrid,{columns:4},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:t.enabled,setupModeData:u,href:$e("#/apm"),"aria-label":l,"data-test-subj":"apmOverview"},l))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.processedEventsLabel",defaultMessage:"Processed Events"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"apmsTotalEvents"},zt(e.totalEvents,"0.[0]a")),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventLabel",defaultMessage:"Last Event"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"apmsBytesSent"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.lastEventDescription",defaultMessage:"{timeOfLastEvent} ago",values:{timeOfLastEvent:nt(+it()(e.timeOfLastEvent),U.c)}}))))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(m.EuiLink,{href:c(),"aria-label":r,"data-test-subj":"apmListing"},o)))),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},d))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.apmPanel.memoryUsageLabel",defaultMessage:"Memory Usage (delta)"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"apmMemoryUsage"},Object(x.jsx)(Pi,{usedBytes:e.memRss})))))))}function sn(e){const{setupMode:t}=e,s=Object(P.get)(t.data,"enterprise_search"),a=e.stats.totalInstances||0;return a||t.enabled?Object(x.jsx)(Li,n()({},e,{url:"enterprise_search",title:se.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.entSearchTitle",{defaultMessage:"Enterprise Search"})}),Object(x.jsx)(m.EuiFlexGrid,{columns:4},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",null,Object(x.jsx)(Ni,{setupModeEnabled:t.enabled,setupModeData:s,href:$e("#/enterprise_search"),"aria-label":se.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkAriaLabel",{defaultMessage:"Enterprise Search Overview"}),"data-test-subj":"entSearchOverview"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.overviewLinkLabel",defaultMessage:"Overview"})))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.versionLabel",defaultMessage:"Version"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"entSearchVersion"},e.stats.versions[0]||se.i18n.translate("xpack.monitoring.cluster.overview.entSearchPanel.versionNotAvailableDescription",{defaultMessage:"N/A"})),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.appSearchEngines",defaultMessage:"Engines"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"appSearchEngines"},e.stats.appSearchEngines),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchOrgSources",defaultMessage:"Org Sources"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchOrgSources"},e.stats.workplaceSearchOrgSources),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.workplaceSearchPrivateSources",defaultMessage:"Private Sources"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"workplaceSearchPrivateSources"},e.stats.workplaceSearchPrivateSources)))),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiPanel,{paddingSize:"m"},Object(x.jsx)(m.EuiFlexGroup,{justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h3",{"data-test-subj":"entSearchTotalNodes"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.nodesTotalLinkLabel",defaultMessage:"Nodes: {nodesTotal}",values:{nodesTotal:Dt(a,"int_commas")}}))))),Object(x.jsx)(m.EuiHorizontalRule,{margin:"m"}),Object(x.jsx)(m.EuiDescriptionList,{type:"column"},Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.memoryUsageLabel",defaultMessage:"Memory Usage"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"entSearchMemoryUsage"},Object(x.jsx)(Fi,{usedBytes:e.stats.memUsed,maxBytes:e.stats.memTotal})),Object(x.jsx)(m.EuiDescriptionListTitle,{className:"eui-textBreakWord"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.overview.entSearchPanel.uptimeLabel",defaultMessage:"Uptime"})),Object(x.jsx)(m.EuiDescriptionListDescription,{"data-test-subj":"entSearchUptime"},Dt(e.stats.uptime,"time_since"))))))):null}function an(e){const t=e.cluster.cluster_uuid===U.Y;return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.overview.heading",defaultMessage:"Stack Monitoring Overview"}))),t?null:Object(x.jsx)(o.Fragment,null,Object(x.jsx)(Wi,n()({},e.cluster.elasticsearch,{version:e.cluster.version,ml:e.cluster.ml,license:e.cluster.license,setupMode:e.setupMode,showLicenseExpiration:e.showLicenseExpiration,alerts:e.alerts})),Object(x.jsx)(Gi,n()({},e.cluster.kibana,{setupMode:e.setupMode,alerts:e.alerts}))),Object(x.jsx)(Yi,n()({},e.cluster.logstash,{setupMode:e.setupMode,alerts:e.alerts})),Object(x.jsx)(Qi,n()({},e.cluster.beats,{setupMode:e.setupMode,alerts:e.alerts})),Object(x.jsx)(tn,n()({},e.cluster.apm,{setupMode:e.setupMode,alerts:e.alerts})),Object(x.jsx)(sn,n()({},e.cluster.enterpriseSearch,{setupMode:e.setupMode,alerts:e.alerts}))))}function nn(e){return e.cluster_uuid===U.Y&&(e.cluster_name="Standalone Cluster"),e}const on=async({clusterUuid:e,timeRange:t,fetch:s,ccs:a,codePaths:i})=>{let n="../api/monitoring/v1/clusters";e&&(n+=`/${e}`);return(await s(n,{method:"POST",body:JSON.stringify({ccs:a,timeRange:t,codePaths:i})})).map(nn)},rn=async({alertTypeIds:e,filters:t,timeRange:s,clusterUuid:a,fetch:i})=>{const n=`../api/monitoring/v1/alert/${a}/status`;return await i(n,{method:"POST",body:JSON.stringify({alertTypeIds:e,filters:t,timeRange:s})})},ln=[U.h],cn=()=>{var e;const t=Object(o.useContext)(X),s=Object(o.useContext)($),{services:i}=Object(a.useKibana)(),n=t.cluster_uuid,r=t.ccs,[l,c]=Object(o.useState)([]),[u,d]=Object(o.useState)({}),[p,g]=Object(o.useState)(!1),{generate:m}=re();let b=[];const h=se.i18n.translate("xpack.monitoring.cluster.overviewTitle",{defaultMessage:"Overview"}),j=se.i18n.translate("xpack.monitoring.cluster.overview.pageTitle",{defaultMessage:"Cluster overview"});p&&(b=[{id:"clusterName",label:l[0].cluster_name,testSubj:"overviewTabsclusterName",route:"/overview"}]);const f=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=i.http)&&void 0!==t&&t.fetch&&n){const e=await on({fetch:i.http.fetch,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},ccs:r,clusterUuid:n,codePaths:ln});c(e);const t=await rn({fetch:i.http.fetch,clusterUuid:n,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});d(t),g(!0)}}),[r,n,null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter,i.http]);return Object(o.useEffect)((()=>{l&&l.length&&m(l[0].cluster_name)}),[l,m]),Object(x.jsx)(Da,{title:h,pageTitle:j,tabs:b,getPageData:f},Object(x.jsx)(pi,{render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(an,{cluster:l[0],alerts:u,setupMode:e,showLicenseExpiration:s.showLicenseExpiration}),a)}),Object(x.jsx)(Ca,{alerts:u}))},un="elasticsearch-metrics-ingest-pipelines",dn=({canInstallPackages:e,closeModal:t,installPackage:s,navigateToDashboard:a})=>{const[i,n]=Object(o.useState)(!1),[l,c]=Object(o.useState)();return e?Object(x.jsx)(m.EuiConfirmModal,{title:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.installPromptTitle",{defaultMessage:"Install Elasticsearch integration?"}),confirmButtonText:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.installButtonText",{defaultMessage:"Install"}),cancelButtonText:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.cancelButtonText",{defaultMessage:"Cancel"}),confirmButtonDisabled:i,onCancel:t,onConfirm:async()=>{n(!0);try{await s(),t(),a()}catch(t){var e;c((null===(e=t.body)||void 0===e?void 0:e.error)||t.message),n(!1)}}},l&&Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.esNavigation.ingestPipelineModal.errorCalloutText",defaultMessage:"Could not install the package due to an error: {error}",values:{error:l}}),color:"danger",iconType:"warning"}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.esNavigation.ingestPipelineModal.installPromptDescriptionText",defaultMessage:"Viewing Ingest pipeline metrics requires installing the Elasticsearch integration. Do you want to install it now?"}))):Object(x.jsx)(m.EuiConfirmModal,{title:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.noPermissionToInstallPackage.packageRequiredTitle",{defaultMessage:"Elasticsearch integration is required"}),confirmButtonText:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelineModal.noPermissionToInstallPackage.confirmButtonText",{defaultMessage:"OK"}),onCancel:t,onConfirm:t},Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.esNavigation.ingestPipelineModal.noPermissionToInstallPackage.descriptionText",defaultMessage:"Viewing Ingest pipeline metrics requires installing the Elasticsearch integration. You must ask your administrator to install it."})))},pn=({cluster:e,...t})=>{const{services:s}=Object(a.useKibana)(),i=[{id:"overview",label:se.i18n.translate("xpack.monitoring.esNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/elasticsearch"},{id:"nodes",label:se.i18n.translate("xpack.monitoring.esNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/elasticsearch/nodes"},{id:"indices",label:se.i18n.translate("xpack.monitoring.esNavigation.indicesLinkText",{defaultMessage:"Indices"}),route:"/elasticsearch/indices"}];return s.dashboard&&i.push({id:"ingest_pipeines",label:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelinesLinkText",{defaultMessage:"Ingest Pipelines"}),prepend:Object(x.jsx)(m.EuiToolTip,{content:se.i18n.translate("xpack.monitoring.esNavigation.ingestPipelinesBetaTooltip",{defaultMessage:"Ingest Pipeline monitoring is a beta feature"})},Object(x.jsx)(m.EuiIcon,{type:"beaker"})),onClick:()=>(async e=>{var t,s,a;const i=await(null===(t=e.fleet)||void 0===t?void 0:t.hooks.epm.getBulkAssets({assetIds:[{id:un,type:"dashboard"}]})),n=()=>e.dashboard.locator.navigate({dashboardId:un});if((null==i||null===(s=i.data)||void 0===s||null===(a=s.items)||void 0===a?void 0:a.length)&&i.data.items.some((e=>e.id===un)))return n();{var o;const t=()=>e.http.post("/api/fleet/epm/packages/elasticsearch",{headers:{"Elastic-Api-Version":"2023-10-31"}}),s=e.overlays.openModal(ka(Object(x.jsx)(dn,{installPackage:t,navigateToDashboard:n,canInstallPackages:!(null===(o=e.fleet)||void 0===o||!o.authz.integrations.installPackages),closeModal:()=>s.close()}),e));return await s.onClose}})(s)}),e&&gn(e.license)&&i.push({id:"ml",label:se.i18n.translate("xpack.monitoring.esNavigation.jobsLinkText",{defaultMessage:"Machine learning jobs"}),route:"/elasticsearch/ml_jobs"}),null!=e&&e.isCcrEnabled&&i.push({id:"ccr",label:se.i18n.translate("xpack.monitoring.esNavigation.ccrLinkText",{defaultMessage:"CCR"}),route:"/elasticsearch/ccr"}),Object(x.jsx)(Da,n()({},t,{tabs:i,product:"elasticsearch"}))},gn=e=>Object(P.includes)(U.G,e.type);function mn(e){return Math.floor(e/1e3)+"s"}s(104);const bn=e=>{const[t,s]=Object(o.useState)({});return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.heading",defaultMessage:"CCR"}))),Object(x.jsx)(m.EuiPanel,null,(()=>{const{data:a,alerts:i}=e,n=a;let r={initialPageSize:5,pageSizeOptions:[5,10,20]};return n.length<=r.initialPageSize&&(r=!1),Object(x.jsx)(m.EuiInMemoryTable,{className:"monitoringElasticsearchCcrListingTable",columns:[{field:"index",name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.indexColumnTitle",{defaultMessage:"Index"}),sortable:!0,render:(a,{shards:i})=>{const n=!!t[a];return Object(x.jsx)(m.EuiLink,{onClick:()=>((a,i)=>{const n={...t};if(n[a])delete n[a];else{let t={initialPageSize:5,pageSizeOptions:[5,10,20]};i.length<=t.initialPageSize&&(t=!1),n[a]=Object(x.jsx)(m.EuiInMemoryTable,{items:i,columns:[{field:"shardId",name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.shardColumnTitle",{defaultMessage:"Shard"}),render:e=>Object(x.jsx)(m.EuiLink,{href:$e(`#/elasticsearch/ccr/${a}/shard/${e}`)},e)},{render:()=>null},{field:"alerts",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(t,s)=>Object(x.jsx)(St,{showBadge:!0,alerts:e.alerts,stateFilter:e=>e.meta.shardId===s.shardId})},{field:"syncLagOps",name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"}),render:(e,t)=>Object(x.jsx)("span",null,e,"",Object(x.jsx)(m.EuiIconTip,{size:"m",type:"iInCircle",content:Object(x.jsx)(o.Fragment,null,Object(x.jsx)("span",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.leaderLagTooltip",defaultMessage:"Leader lag: {syncLagOpsLeader}",values:{syncLagOpsLeader:t.syncLagOpsLeader}})),Object(x.jsx)("br",null),Object(x.jsx)("span",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccr.shardsTable.syncLagOpsColumn.followerLagTooltip",defaultMessage:"Follower lag: {syncLagOpsFollower}",values:{syncLagOpsFollower:t.syncLagOpsFollower}}))),position:"right"}))},{field:"syncLagTime",name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(x.jsx)("span",null,mn(e))},{field:"opsSynced",name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shardsTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(x.jsx)(m.EuiTextColor,{color:"danger"},e)}],executeQueryOptions:{defaultFields:["shardId"]},sorting:!0,pagination:t})}s(n)})(a,i)},a,"",n?Object(x.jsx)(m.EuiIcon,{type:"arrowUp"}):Object(x.jsx)(m.EuiIcon,{type:"arrowDown"}))}},{field:"follows",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.followsColumnTitle",{defaultMessage:"Follows"})},{field:"alerts",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.alertsColumnTitle",{defaultMessage:"Alerts"}),render:(e,t)=>Object(x.jsx)(St,{showBadge:!0,alerts:i,stateFilter:e=>e.meta.followerIndex===t.index})},{field:"syncLagOps",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.syncLagOpsColumnTitle",{defaultMessage:"Sync Lag (ops)"})},{field:"syncLagTime",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.lastFetchTimeColumnTitle",{defaultMessage:"Last fetch time"}),render:e=>Object(x.jsx)("span",null,mn(e))},{field:"opsSynced",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.opsSyncedColumnTitle",{defaultMessage:"Ops synced"})},{field:"error",sortable:!0,name:se.i18n.translate("xpack.monitoring.elasticsearch.ccr.ccrListingTable.errorColumnTitle",{defaultMessage:"Error"}),render:e=>Object(x.jsx)(m.EuiTextColor,{color:"danger"},e)}],items:n,pagination:r,executeQueryOptions:{defaultFields:["index","follows"]},sorting:{sort:{field:"index",direction:"asc"}},itemId:"id",itemIdToExpandedRowMap:t})})())))},hn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{generate:i}=re(),{services:n}=Object(a.useKibana)(),r=s.cluster_uuid,l=Object(P.find)(e,{cluster_uuid:r}),c=s.ccs,[u,d]=Object(o.useState)({}),[p,g]=Object(o.useState)({});Object(o.useEffect)((()=>{l&&i(l.cluster_name,{inElasticsearch:!0})}),[l,i]);const m=se.i18n.translate("xpack.monitoring.elasticsearch.ccr.title",{defaultMessage:"Elasticsearch - Ccr"}),b=se.i18n.translate("xpack.monitoring.elasticsearch.ccr.pageTitle",{defaultMessage:"Elasticsearch Ccr"}),h=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/elasticsearch/ccr`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&r){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));d(e);const t=await rn({fetch:n.http.fetch,alertTypeIds:[U.H],clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});g(t)}}),[c,r,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(x.jsx)(pn,{title:m,pageTitle:b,getPageData:h,"data-test-subj":"elasticsearchCcrPage",cluster:l},Object(x.jsx)(pi,{productName:U.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},e,Object(x.jsx)(bn,{data:u,alerts:p}),t)}))};function jn({stat:e,formattedLeader:t,oldestStat:s,alerts:a={}}){const i=e.follower_index||Object(P.get)(e,"follower.index"),n="number"==typeof e.shard_id?e.shard_id:Object(P.get)(e,"follower.shard.number"),o=e.operations_written||Object(P.get)(e,"follower.operations_written"),r=e.failed_read_requests||Object(P.get)(e,"requests.failed.read.count"),l=s.operations_written||Object(P.get)(s,"follower.operations_written"),c=s.failed_read_requests||Object(P.get)(s,"requests.failed.read.count"),u=[{label:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.alerts",{defaultMessage:"Alerts"}),value:Object(x.jsx)(St,{alerts:a,showOnlyCount:!0})},{label:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.followerIndexLabel",{defaultMessage:"Follower Index"}),value:i,"data-test-subj":"followerIndex"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.shardIdLabel",{defaultMessage:"Shard Id"}),value:n,"data-test-subj":"shardId"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.leaderIndexLabel",{defaultMessage:"Leader Index"}),value:t,"data-test-subj":"leaderIndex"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.opsSyncedLabel",{defaultMessage:"Ops Synced"}),value:zt(o-l,"int_commas"),"data-test-subj":"operationsReceived"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.status.failedFetchesLabel",{defaultMessage:"Failed Fetches"}),value:zt(r-c,"int_commas"),"data-test-subj":"failedFetches"}];return Object(x.jsx)(Ct,{metrics:u,"data-test-subj":"ccrDetailStatus"})}function xn(e){var t;const{services:s}=Object(a.useKibana)(),i=null===(t=s.uiSettings)||void 0===t?void 0:t.get("dateFormat:tz"),{metrics:n,stat:r,timestamp:l,oldestStat:c,formattedLeader:u,alerts:d}=e;return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(jn,{stat:r,formattedLeader:u,oldestStat:c,alerts:d})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:d}),Object(x.jsx)(m.EuiSpacer,{size:"m"}),r.read_exceptions&&r.read_exceptions.length>0?Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiTitle,{size:"s",color:"danger"},Object(x.jsx)("h3",null,Object(x.jsx)(m.EuiTextColor,{color:"danger"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.errorsTableTitle",defaultMessage:"Errors"})))),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiBasicTable,{items:r.read_exceptions,columns:[{name:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.typeColumnTitle",{defaultMessage:"Type"}),field:"exception.type"},{name:se.i18n.translate("xpack.monitoring.elasticsearch.ccrShard.errorsTable.reasonColumnTitle",{defaultMessage:"Reason"}),field:"exception.reason",width:"75%"}]})),Object(x.jsx)(m.EuiHorizontalRule,null)):null,Object(x.jsx)(m.EuiFlexGroup,{wrap:!0},(()=>{const e=[n.ccr_sync_lag_ops,n.ccr_sync_lag_time].map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{style:{minWidth:"45%"},key:t},Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Ms,{series:e})))));return Object(x.jsx)(o.Fragment,null,e)})()),Object(x.jsx)(m.EuiHorizontalRule,null),Object(x.jsx)(m.EuiAccordion,{id:"ccrLatestStat",buttonContent:Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h2",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.ccrShard.latestStateAdvancedButtonLabel",defaultMessage:"Advanced"}))),paddingSize:"l"},Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,bt(l,i))),Object(x.jsx)(m.EuiHorizontalRule,null),Object(x.jsx)(m.EuiCodeBlock,{language:"json"},JSON.stringify(r,null,2))))))}const fn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{services:i}=Object(a.useKibana)(),[r,l]=Object(o.useState)({}),{index:c,shardId:u}=Object(C.useParams)(),{generate:d}=re(),p=s.cluster_uuid,g=Object(P.find)(e,{cluster_uuid:p});Object(o.useEffect)((()=>{g&&d(g.cluster_name,{inElasticsearch:!0,name:"ccr",instance:`Index: ${c} Shard: ${u}`})}),[g,d,c,u]);const m=s.ccs,[b,h]=Object(o.useState)({}),j=se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.title",{defaultMessage:"Elasticsearch - Ccr - Shard"}),f=se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.pageTitle",{defaultMessage:"Elasticsearch Ccr Shard - Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(P.get)(r,"stat.follower.index",Object(P.get)(r,"stat.follower_index")),shardId:Object(P.get)(r,"stat.follower.shard.number",Object(P.get)(r,"stat.shard_id"))}}),O=se.i18n.translate("xpack.monitoring.elasticsearch.ccr.shard.instanceTitle",{defaultMessage:"Index: {followerIndex} Shard: {shardId}",values:{followerIndex:Object(P.get)(r,"stat.follower_index"),shardId:Object(P.get)(r,"stat.shard_id")}}),v=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${p}/elasticsearch/ccr/${c}/shard/${u}`;if(null!==(t=i.http)&&void 0!==t&&t.fetch&&p){var n;const e=await(null===(n=i.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:m,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));l(e);const t=await rn({fetch:i.http.fetch,alertTypeIds:[U.H],clusterUuid:p,filters:[{shardId:u}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});h(t)}}),[m,p,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http,c,u]);return Object(x.jsx)(Da,{title:j,pageTitle:f,getPageData:v,"data-test-subj":"elasticsearchCcrShardPage"},Object(x.jsx)(pi,{productName:U.r,instance:O,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},e,Object(x.jsx)(xn,n()({},r,{alerts:b})),t)}))},On=e=>{const{pageType:t,id:s,...a}=e,i=[{id:"overview",label:se.i18n.translate("xpack.monitoring.esItemNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:`/elasticsearch/${t}/${s}`},{id:"advanced",testSubj:"esItemDetailAdvancedLink",label:se.i18n.translate("xpack.monitoring.esItemNavigation.advancedLinkText",{defaultMessage:"Advanced"}),route:`/elasticsearch/${t}/${s}/advanced`}];return Object(x.jsx)(Da,n()({},a,{tabs:i,product:"elasticsearch"}))};function vn({stats:e,alerts:t={}}){const{dataSize:s,documents:a,totalShards:i,unassignedShards:n,status:r}=e,l=[{label:se.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.alerts",{defaultMessage:"Alerts"}),value:Object(x.jsx)(St,{alerts:t,showOnlyCount:!0})},{label:se.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalTitle",{defaultMessage:"Total"}),value:zt(s.total,"0.0 b"),"data-test-subj":"dataSize"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.primariesTitle",{defaultMessage:"Primaries"}),value:zt(s.primaries,"0.0 b"),"data-test-subj":"dataSizePrimaries"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.documentsTitle",{defaultMessage:"Documents"}),value:zt(a,"0.[0]a"),"data-test-subj":"documentCount"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.totalShardsTitle",{defaultMessage:"Total shards"}),value:zt(i,"int_commas"),"data-test-subj":"totalShards"},{label:se.i18n.translate("xpack.monitoring.elasticsearch.indexDetailStatus.unassignedShardsTitle",{defaultMessage:"Unassigned shards"}),value:zt(n,"int_commas"),"data-test-subj":"unassignedShards"}];return Object(x.jsx)(Ct,{metrics:l,status:r,IconComponent:({status:e})=>Object(x.jsx)(o.Fragment,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.indexDetailStatus.iconStatusLabel",defaultMessage:"Health: {elasticsearchStatusIcon}",values:{elasticsearchStatusIcon:Object(x.jsx)(It,{status:e})}})),"data-test-subj":"elasticsearchIndexDetailStatus"})}const yn=({indexSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.index_3,t.index_4,t.index_total,t.index_time,t.index_refresh,t.index_throttling,t.index_disk,t.index_segment_count,t.index_latency];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.index.advanced.heading",defaultMessage:"Elasticsearch index advanced view"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(vn,{stats:e,alerts:s})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:s}),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},a)),Object(x.jsx)(m.EuiSpacer,null))))))))},kn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{generate:i}=re(),{services:n}=Object(a.useKibana)(),{index:r}=Object(C.useParams)(),{zoomInfo:l,onBrush:c}=Aa(),u=s.cluster_uuid,d=s.ccs,[p,g]=Object(o.useState)({}),[m,b]=Object(o.useState)({}),h=Object(P.find)(e,{cluster_uuid:u});Object(o.useEffect)((()=>{h&&i(h.cluster_name,{inElasticsearch:!0,name:"indices",instance:r})}),[h,i,r]);const j=se.i18n.translate("xpack.monitoring.elasticsearch.index.advanced.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Advanced",values:{indexName:r}}),f=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${u}/elasticsearch/indices/${r}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&u){var i;const e=await(null===(i=n.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));g(e);const t=await rn({fetch:n.http.fetch,alertTypeIds:[U.O],filters:[{shardIndex:r}],clusterUuid:u,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});b(t)}}),[null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http,u,r,d]);return Object(x.jsx)(On,{title:j,getPageData:f,id:r,pageType:"indices",pageTitle:r},Object(x.jsx)(pi,{productName:U.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(yn,{setupMode:e,alerts:m,indexSummary:p.indexSummary,metrics:p.metrics,onBrush:c,zoomInfo:l}),s)}))},Mn=({indexSummary:e,metrics:t,clusterUuid:s,indexUuid:a,logs:i,alerts:o,...r})=>{const l=[t.index_size,t.index_search_request_rate,t.index_request_rate,t.index_segment_count,t.index_document_count];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(vn,{stats:e,alerts:o})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:o}),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},l.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},r)),Object(x.jsx)(m.EuiSpacer,null))))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(logs_Logs,{logs:i,indexUuid:a,clusterUuid:s})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ha,r))))};function En(e,t){return e.map((e=>{const s=t[e.node];return e.nodeName=s&&s.name||null,e.type="shard",e.tooltip_message=function(e){const s=Object(P.get)(Object(P.find)(t,(t=>{return s=t,Object(P.includes)(s.node_ids,e.relocating_node);var s})),"name");if(s){if("INITIALIZING"===e.state)return se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingFromTextMessage",{defaultMessage:"Relocating from {nodeName}",values:{nodeName:s}});if("RELOCATING"===e.state)return se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.decorateShards.relocatingToTextMessage",{defaultMessage:"Relocating to {nodeName}",values:{nodeName:s}})}const a=Object(P.get)(e,"state",Object(P.get)(e,"shard.state"));return Object(P.upperFirst)(a.toLowerCase())}(e),e}))}const Sn={index:[{content:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.nodesLabel",{defaultMessage:"Nodes"})}],indexWithUnassigned:[{content:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedLabel",{defaultMessage:"Unassigned"})},{content:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.unassignedNodesLabel",{defaultMessage:"Nodes"})}],node:[{content:se.i18n.translate("xpack.monitoring.elasticsearch.shardAllocation.labels.indicesLabel",{defaultMessage:"Indices"}),showToggleSystemIndicesComponent:!0}]},wn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{generate:i}=re(),{services:r}=Object(a.useKibana)(),{index:l}=Object(C.useParams)(),{zoomInfo:c,onBrush:u}=Aa(),d=s.cluster_uuid,p=s.ccs,[g,m]=Object(o.useState)({}),[b,h]=Object(o.useState)(Sn.index),[j,f]=Object(o.useState)([]),[O,v]=Object(o.useState)({}),y=Object(P.find)(e,{cluster_uuid:d});Object(o.useEffect)((()=>{y&&i(y.cluster_name,{inElasticsearch:!0,name:"indices",instance:l})}),[y,i,l]);const k=se.i18n.translate("xpack.monitoring.elasticsearch.index.overview.title",{defaultMessage:"Elasticsearch - Indices - {indexName} - Overview",values:{indexName:l}}),M=se.i18n.translate("xpack.monitoring.elasticsearch.index.overview.pageTitle",{defaultMessage:"Index: {indexName}",values:{indexName:l}}),E=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${d}/elasticsearch/indices/${l}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&d){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:p,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));m(e);const t=function(e,t){const s=Object(P.reduce)(En(e,t),(function(e,s){return e=function(e,t){const s=t.index;return e[s]||(e[s]={id:s,name:s,children:[],unassigned:[],unassignedPrimaries:!1,type:"index"}),e}(e,s),e=function(e,s){const{node:a,index:i}=s;if(!s.node||null===s.node)return e[i].unassigned.push(s),s.primary&&(e[i].unassignedPrimaries=!0),e;let n=Object(P.find)(e[i].children,{id:a});return n||(n={id:a,type:"node",name:t[a].name,node_type:t[a].type,ip_port:t[a].transport_address,children:[]},e[i].children.push(n)),n.children.push(s),e}(e,s),e}),{}),a=Object(P.values)(s);return Object(P.sortBy)(a,(e=>[!e.unassignedPrimaries,/^\./.test(e.name),e.name]))};f(t(e.shards,e.nodes)),e.shards.some((e=>"UNASSIGNED"===e.state))&&h(Sn.indexWithUnassigned);const n=await rn({fetch:r.http.fetch,alertTypeIds:[U.O],filters:[{shardIndex:l}],clusterUuid:d,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});v(n)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,d,l,p]);return Object(x.jsx)(On,{title:k,pageTitle:M,getPageData:E,id:l,pageType:"indices"},Object(x.jsx)(pi,{productName:U.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(Mn,n()({setupMode:e,labels:b,alerts:O,onBrush:u,indexUuid:l,clusterUuid:d,zoomInfo:c,nodesByIndices:j},g)),s)}))},Tn=(e,t)=>{const s="xpack.monitoring.data",a=()=>{const e=window.localStorage.getItem(s);let t={};try{t=e&&JSON.parse(e)||{}}catch(e){throw new Error("Monitoring UI: error parsing locally stored monitoring data")}return t},i=t=>{const i=a();i[e]=t,window.localStorage.setItem(s,JSON.stringify(i))},n=(()=>{const t=a();if(Object(P.has)(t,e))return t[e]})();n||i(t);const r=n||t,[l,c]=Object(o.useState)(r);return[l,e=>{i(e),c(e)}]},_n=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{generate:i}=re(),{services:r}=Object(a.useKibana)(),{getPaginationTableProps:l}=Xa("elasticsearch.indices"),c=s.cluster_uuid,u=s.ccs,d=Object(P.find)(e,{cluster_uuid:c}),[p,g]=Object(o.useState)({}),[m,b]=Tn("showSystemIndices",!1),[h,j]=Object(o.useState)({});Object(o.useEffect)((()=>{d&&i(d.cluster_name,{inElasticsearch:!0})}),[d,i]);const f=se.i18n.translate("xpack.monitoring.elasticsearch.indices.routeTitle",{defaultMessage:"Elasticsearch - Indices"}),O=se.i18n.translate("xpack.monitoring.elasticsearch.indices.pageTitle",{defaultMessage:"Elasticsearch indices"}),v=Object(o.useCallback)((()=>b(!m)),[m,b]),y=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/elasticsearch/indices`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&c){var i;const e=await(null===(i=r.http)||void 0===i?void 0:i.fetch(a,{method:"POST",query:{show_system_indices:m},body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(e);const t=await rn({fetch:r.http.fetch,clusterUuid:c,alertTypeIds:[U.O],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});j(t)}}),[null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,c,m,u]);return Object(x.jsx)(pn,{title:f,pageTitle:O,getPageData:y,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(x.jsx)("div",{"data-test-subj":"elasticsearchIndicesListingPage"},Object(x.jsx)(pi,{productName:U.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},e,Object(x.jsx)(fa,n()({clusterStatus:p.clusterStatus,indices:p.indices,alerts:h,showSystemIndices:m,toggleShowSystemIndices:v},l())),t)})))},Cn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{generate:i}=re(),{services:r}=Object(a.useKibana)(),{getPaginationTableProps:l}=Xa("elasticsearch.mlJobs"),c=s.cluster_uuid,u=s.ccs,d=Object(P.find)(e,{cluster_uuid:c});Object(o.useEffect)((()=>{d&&i(d.cluster_name,{inElasticsearch:!0})}),[d,i]);const[p,g]=Object(o.useState)({}),m=se.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.routeTitle",{defaultMessage:"Elasticsearch - Machine Learning Jobs"}),b=se.i18n.translate("xpack.monitoring.elasticsearch.mlJobs.pageTitle",{defaultMessage:"Elasticsearch machine learning jobs"}),h=Object(o.useCallback)((async()=>{var e,t,s;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${c}/elasticsearch/ml_jobs`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(i,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));g({clusterStatus:null==n?void 0:n.clusterStatus,jobs:null==n||null===(s=n.rows)||void 0===s?void 0:s.map((e=>{var t;return"ml"in e&&null!==(t=e.ml)&&void 0!==t&&t.job?{...e.ml.job,node:e.node,job_id:e.ml.job.id}:e}))})}),[u,c,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(x.jsx)(pn,{title:m,pageTitle:b,getPageData:h,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(x.jsx)("div",{"data-test-subj":"elasticsearchMLJobsListingPage"},Object(x.jsx)(pi,{productName:U.r,render:({flyoutComponent:e,bottomBarComponent:t})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},e,Object(x.jsx)(va,n()({clusterStatus:p.clusterStatus,jobs:p.jobs},l())),t)})))},In=["master","voting_only","data","data_content","data_hot","data_warm","data_cold","data_frozen","ingest","transform","ml","remote_cluster_client"],Ln=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{showCgroupMetricsElasticsearch:i}=Object(o.useContext)($),{services:l}=Object(a.useKibana)(),[c,u]=r.a.useState(!1),{generate:d}=re(),{getPaginationRouteOptions:p,updateTotalItemCount:g,getPaginationTableProps:m}=Xa("elasticsearch.nodes"),b=s.cluster_uuid,h=s.ccs,j=Object(P.find)(e,{cluster_uuid:b}),[f,O]=Object(o.useState)({}),[v,y]=Object(o.useState)({}),k=se.i18n.translate("xpack.monitoring.elasticsearch.nodes.routeTitle",{defaultMessage:"Elasticsearch - Nodes"}),M=se.i18n.translate("xpack.monitoring.elasticsearch.nodes.pageTitle",{defaultMessage:"Elasticsearch nodes"});Object(o.useEffect)((()=>{j&&d(j.cluster_name,{inElasticsearch:!0})}),[j,d]);const E=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=l.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${b}/elasticsearch/nodes`;if(null!==(t=l.http)&&void 0!==t&&t.fetch&&b){var i;u(!0);const e=await(null===(i=l.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:h,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...p()})}));u(!1);const{nodes:t}=e,n=t.map((e=>{const t=function(e){if(!e)return;const t=Array.isArray(e)?e:[e];if(0===t.length)return[];const s=new Set(t);return In.filter((e=>s.has(e)))}(e.roles);return{...e,roles:t}}));O({...e,nodes:n}),g(e.totalNodeCount);const o=await rn({fetch:l.http.fetch,clusterUuid:b,alertTypeIds:[U.J,U.L,U.W,U.X,U.R,U.S],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});y(o)}}),[null===(t=l.data)||void 0===t?void 0:t.query.timefilter.timefilter,l.http,b,h,p,g]);return Object(x.jsx)(pn,{title:k,pageTitle:M,getPageData:E,"data-test-subj":"elasticsearchOverviewPage",cluster:j},Object(x.jsx)("div",{"data-test-subj":"elasticsearchNodesListingPage"},Object(x.jsx)(pi,{productName:U.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:a})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(oa,n()({clusterStatus:f.clusterStatus,clusterUuid:s.cluster_uuid,setupMode:e,nodes:f.nodes,alerts:v,isLoading:c,showCgroupMetricsElasticsearch:i},m())),a)})))},Pn=({nodeSummary:e,metrics:t,alerts:s,...a})=>{const i=[t.node_gc,t.node_gc_time,t.node_jvm_mem,t.node_cpu_utilization,t.node_index_3,t.node_index_4,t.node_index_time,t.node_request_total,t.node_index_threads,t.node_read_threads,t.node_cgroup_cpu,t.node_cgroup_stats,t.node_latency];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.elasticsearch.nodes.advanced.heading",defaultMessage:"Elasticsearch node advanced"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(la,{stats:e,alerts:s})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:s}),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},a)),Object(x.jsx)(m.EuiSpacer,null))))))))},Fn=({clusters:e})=>{var t,s,i,n;const r=Object(o.useContext)(X),{generate:l}=re(),{zoomInfo:c,onBrush:u}=Aa(),[d,p]=Object(o.useState)({}),{node:g}=Object(C.useParams)(),{services:m}=Object(a.useKibana)(),b=r.cluster_uuid,h=r.ccs,[j,f]=Object(o.useState)({}),O=Object(P.find)(e,{cluster_uuid:b});Object(o.useEffect)((()=>{var e;O&&l(O.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==d||null===(e=d.nodeSummary)||void 0===e?void 0:e.name})}),[O,l,null==d||null===(t=d.nodeSummary)||void 0===t?void 0:t.name]);const v=se.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Advanced",values:{nodeName:null==d||null===(s=d.nodeSummary)||void 0===s?void 0:s.name}}),y=se.i18n.translate("xpack.monitoring.elasticsearch.node.advanced.pageTitle",{defaultMessage:"Elasticsearch node: {nodeName}",values:{nodeName:null==d||null===(i=d.nodeSummary)||void 0===i?void 0:i.name}}),k=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=m.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${b}/elasticsearch/nodes/${g}`;if(null!==(t=m.http)&&void 0!==t&&t.fetch&&b){var i;const e=await(null===(i=m.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({ccs:h,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));p(e);const t=await rn({fetch:m.http.fetch,clusterUuid:b,alertTypeIds:[U.J,U.W,U.X,U.S,U.L,U.R],filters:[{nodeUuid:g}],timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});f(t)}}),[h,b,null===(n=m.data)||void 0===n?void 0:n.query.timefilter.timefilter,m.http,g]);return Object(x.jsx)(On,{title:v,pageTitle:y,getPageData:k,id:g,pageType:"nodes"},Object(x.jsx)(Pn,{nodeSummary:d.nodeSummary,alerts:j,metrics:d.metrics,onBrush:u,zoomInfo:c}))};function Nn(e){return Object(P.some)(e.children,{primary:!0})}const Dn=({clusters:e})=>{var t,s,i,r;const l=Object(o.useContext)(X),{generate:c}=re(),{zoomInfo:u,onBrush:d}=Aa(),[p,g]=Tn("showSystemIndices",!1),[m,b]=Object(o.useState)({}),{node:h}=Object(C.useParams)(),{services:j}=Object(a.useKibana)(),[f,O]=Object(o.useState)({}),v=l.cluster_uuid,y=Object(P.find)(e,{cluster_uuid:v});Object(o.useEffect)((()=>{var e;y&&c(y.cluster_name,{inElasticsearch:!0,name:"nodes",instance:null==f||null===(e=f.nodeSummary)||void 0===e?void 0:e.name})}),[y,c,null==f||null===(t=f.nodeSummary)||void 0===t?void 0:t.name]);const k=l.ccs,[M,E]=Object(o.useState)([]),S=se.i18n.translate("xpack.monitoring.elasticsearch.node.overview.title",{defaultMessage:"Elasticsearch - Nodes - {nodeName} - Overview",values:{nodeName:null==f||null===(s=f.nodeSummary)||void 0===s?void 0:s.name}}),w=se.i18n.translate("xpack.monitoring.elasticsearch.node.overview.pageTitle",{defaultMessage:"Elasticsearch node: {node}",values:{node:null==f||null===(i=f.nodeSummary)||void 0===i?void 0:i.name}}),T=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=j.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${v}/elasticsearch/nodes/${h}`;if(null!==(t=j.http)&&void 0!==t&&t.fetch&&v){var i;const e=await(null===(i=j.http)||void 0===i?void 0:i.fetch(a,{method:"POST",body:JSON.stringify({showSystemIndices:p,ccs:k,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!1})}));O(e);const t=function(e,t){let s={};Object(P.some)(e,(function(e){return"UNASSIGNED"===e.state}))&&(s.unassigned={name:"Unassigned",master:!1,type:"node",children:[]}),s=Object(P.reduce)(En(e,t),(function(e,s){const a=Object(P.get)(s,"node.name",s.node||"unassigned"),i=Object(P.get)(s,"index.name",s.index);e[a]||function(e,t,s){t.type="node",t.children=[];const a=function(e){return"true"===(e.attributes||{}).master?"master":"normal"}(t);"normal"!==a&&"data"!==a||(e[s]=t)}(e,t[a],a);let n=Object(P.find)(e[a].children,{id:i});return n||(n={id:i,name:i,type:"index",children:[]},e[a].children.push(n)),n.children.push(s),e}),s);const a=Object(P.values)(s);return Object(P.sortBy)(a,(function(e){return["Unassigned"!==e.name,!e.master,e.name]})).map((function(e){return"Unassigned"===e.name&&(e.unassignedPrimaries=e.children.some(Nn)),e}))};E(t(e.shards,e.nodes));const n=await rn({fetch:j.http.fetch,alertTypeIds:[U.J,U.W,U.X,U.S,U.L,U.R],filters:[{nodeUuid:h}],clusterUuid:v,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});b(n)}}),[null===(r=j.data)||void 0===r?void 0:r.query.timefilter.timefilter,j.http,v,h,p,k]),_=Object(o.useCallback)((()=>{g(!p)}),[p,g]);return Object(x.jsx)(On,{title:S,pageTitle:w,getPageData:T,id:h,pageType:"nodes"},Object(x.jsx)(pi,{productName:U.r,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(ja,n()({alerts:m,labels:Sn.node,nodeId:h,clusterUuid:v,onBrush:d,zoomInfo:u,toggleShowSystemIndices:_,showSystemIndices:p,nodesByIndices:M},f)),s)}))},zn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{zoomInfo:i,onBrush:n}=Aa(),{services:r}=Object(a.useKibana)(),{generate:l}=re(),c=s.cluster_uuid,u=s.ccs,d=Object(P.find)(e,{cluster_uuid:c}),[p,g]=Object(o.useState)(null),[m,b]=Object(o.useState)(!1),h=()=>{b(!m)},j=se.i18n.translate("xpack.monitoring.elasticsearch.overview.title",{defaultMessage:"Elasticsearch"}),f=se.i18n.translate("xpack.monitoring.elasticsearch.overview.pageTitle",{defaultMessage:"Elasticsearch overview"});Object(o.useEffect)((()=>{d&&l(d.cluster_name,{inElasticsearch:!0})}),[d,l]);const O=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/elasticsearch`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[u,c,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(x.jsx)(pn,{title:j,pageTitle:f,getPageData:O,"data-test-subj":"elasticsearchOverviewPage",cluster:d},Object(x.jsx)("div",{"data-test-subj":"elasticsearchOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,shardActivity:a,logs:o}=e||{},r=a&&(e=>e.filter((e=>m||"DONE"!==e.stage)))(a);return Object(x.jsx)(Hs,{clusterStatus:t,metrics:s,logs:o,cluster:d,shardActivity:r,onBrush:n,showShardActivityHistory:m,toggleShardActivityHistory:h,zoomInfo:i,"data-test-subj":"elasticsearchOverviewPage"})})(p)))},Rn=e=>Object(x.jsx)(Da,n()({},e,{product:"enterprise_search"}));function An({stats:e}){const t=[{label:se.i18n.translate("xpack.monitoring.entSearch.overview.instances",{defaultMessage:"Instances"}),value:zt(e.totalInstances,"int_commas"),"data-test-subj":"totalInstances"},{label:se.i18n.translate("xpack.monitoring.entSearch.overview.appSearchEngines",{defaultMessage:"App Search Engines"}),value:zt(e.appSearchEngines,"int_commas"),"data-test-subj":"appSearchEngines"},{label:se.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchOrgSources",{defaultMessage:"Org Content Sources"}),value:zt(e.workplaceSearchOrgSources,"int_commas"),"data-test-subj":"workplaceSearchOrgSources"},{label:se.i18n.translate("xpack.monitoring.entSearch.overview.workplaceSearchPrivateSources",{defaultMessage:"Private Content Sources"}),value:zt(e.workplaceSearchPrivateSources,"int_commas"),"data-test-subj":"workplaceSearchPrivateSources"}];return Object(x.jsx)(Ct,{metrics:t,"data-test-subj":"entSearchSummaryStatus"})}const Bn=({metrics:e,stats:t,...s})=>{const a=[e.enterprise_search_heap,e.enterprise_search_jvm_finalizer_queue,e.enterprise_search_gc_time,e.enterprise_search_gc_rate,e.enterprise_search_threads,e.enterprise_search_threads_rate],i=[e.enterprise_search_http_traffic,e.enterprise_search_http_responses,e.enterprise_search_http_connections_current,e.enterprise_search_http_connections_rate],o=[e.app_search_total_engines,e.crawler_workers],r=[e.workplace_search_total_sources];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.heading",defaultMessage:"Enterprise Search Overview"}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(An,{stats:t})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.networkingSummary",defaultMessage:"Network Traffic Summary"}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},i.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},s)),Object(x.jsx)(m.EuiSpacer,null)))))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.lowLevelSummary",defaultMessage:"Low Level Resource Usage Summary"}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},s)),Object(x.jsx)(m.EuiSpacer,null)))))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.appSearchSummary",defaultMessage:"App Search Summary"}))),Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},o.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},s)),Object(x.jsx)(m.EuiSpacer,null)))))),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.entSearch.overview.workplaceSearchSummary",defaultMessage:"Workplace Search Summary"}))),Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},r.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},s)),Object(x.jsx)(m.EuiSpacer,null))))))))},Vn=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{zoomInfo:i,onBrush:r}=Aa(),{services:l}=Object(a.useKibana)(),c=s.cluster_uuid,u=s.ccs,{generate:d}=re(),p=Object(P.find)(e,{cluster_uuid:c}),[g,m]=Object(o.useState)(null),b=se.i18n.translate("xpack.monitoring.entSearch.overview.routeTitle",{defaultMessage:"Enterprise Search - Overview"}),h=se.i18n.translate("xpack.monitoring.entSearch.overview.pageTitle",{defaultMessage:"Enterprise Search Overview"});Object(o.useEffect)((()=>{p&&d(p.cluster_name,{inEnterpriseSearch:!0})}),[p,d]);const j=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=l.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/enterprise_search`,i=await(null===(t=l.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));m(i)}),[u,c,null===(t=l.data)||void 0===t?void 0:t.query.timefilter.timefilter,l.http]);return Object(x.jsx)(Rn,{title:b,pageTitle:h,getPageData:j,"data-test-subj":"entSearchOverviewPage"},Object(x.jsx)("div",{"data-test-subj":"entSearchOverviewPage"},g&&Object(x.jsx)(Bn,n()({},g,{onBrush:r,zoomInfo:i}))))};s(109);const Un=({isSupported:e,children:t})=>e?t:"-",$n=e=>{const{alertsMeta:t={enabled:!0}}=e.cluster.alerts;if(t.enabled)return Object(x.jsx)("span",null,e.children);const s=se.i18n.translate("xpack.monitoring.cluster.listing.unknownHealthMessage",{defaultMessage:"Unknown"});return Object(x.jsx)(m.EuiToolTip,{content:s,position:"bottom"},Object(x.jsx)(m.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))},Hn="viewedStandaloneCluster",Wn=(e,t,s,a)=>[{name:se.i18n.translate("xpack.monitoring.cluster.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"cluster_name",sortable:!0,render:(e,t)=>t.isSupported?Object(x.jsx)(m.EuiLink,{href:$e("#/overview",{cluster_uuid:t.cluster_uuid}),"data-test-subj":"clusterLink"},e):t.license?Object(x.jsx)(m.EuiLink,{onClick:()=>s(t.cluster_name),"data-test-subj":"clusterLink"},e):Object(x.jsx)(m.EuiLink,{onClick:()=>a(t.cluster_name),"data-test-subj":"clusterLink"},e)},{name:se.i18n.translate("xpack.monitoring.cluster.listing.statusColumnTitle",{defaultMessage:"Alerts Status"}),field:"status","data-test-subj":"alertsStatus",sortable:!0,render:(e,t)=>Object(x.jsx)(Un,t,Object(x.jsx)($n,{cluster:t},Object(x.jsx)(St,{alerts:t.alerts.list,showBadge:!1})))},{name:se.i18n.translate("xpack.monitoring.cluster.listing.nodesColumnTitle",{defaultMessage:"Nodes"}),field:"elasticsearch.cluster_stats.nodes.count.total","data-test-subj":"nodesCount",sortable:!0,render:(e,t)=>Object(x.jsx)(Un,t,"number"==typeof e?Pt()(e).format("0,0"):0)},{name:se.i18n.translate("xpack.monitoring.cluster.listing.indicesColumnTitle",{defaultMessage:"Indices"}),field:"elasticsearch.cluster_stats.indices.count","data-test-subj":"indicesCount",sortable:!0,render:(e,t)=>Object(x.jsx)(Un,t,Pt()(e).format("0,0"))},{name:se.i18n.translate("xpack.monitoring.cluster.listing.dataColumnTitle",{defaultMessage:"Data"}),field:"elasticsearch.cluster_stats.indices.store.size_in_bytes","data-test-subj":"dataSize",sortable:!0,render:(e,t)=>Object(x.jsx)(Un,t,Pt()(e).format("0,0[.]0 b"))},{name:se.i18n.translate("xpack.monitoring.cluster.listing.logstashColumnTitle",{defaultMessage:"Logstash"}),field:"logstash.node_count","data-test-subj":"logstashCount",sortable:!0,render:(e,t)=>Object(x.jsx)(Un,t,Pt()(e).format("0,0"))},{name:se.i18n.translate("xpack.monitoring.cluster.listing.kibanaColumnTitle",{defaultMessage:"Kibana"}),field:"kibana.count","data-test-subj":"kibanaCount",sortable:!0,render:(e,t)=>Object(x.jsx)(Un,t,Pt()(e).format("0,0"))},{name:se.i18n.translate("xpack.monitoring.cluster.listing.licenseColumnTitle",{defaultMessage:"License"}),field:"license.type","data-test-subj":"clusterLicense",sortable:!0,render:(t,s)=>{const i=s.license;if(!t)return Object(x.jsx)("div",null,Object(x.jsx)("div",{className:"monTableCell__clusterCellLicense"},"N/A"));if(i){const s=()=>i.expiry_date_in_millis<it()().valueOf()?Object(x.jsx)("span",{className:"monTableCell__clusterCellExpired"},"Expired"):Object(x.jsx)("span",null,"Expires ",it()(i.expiry_date_in_millis).format("D MMM YY"));return Object(x.jsx)("div",null,Object(x.jsx)("div",{className:"monTableCell__clusterCellLicense"},Object(P.capitalize)(t)),Object(x.jsx)("div",{className:"monTableCell__clusterCellExpiration"},e?s():null))}return Object(x.jsx)(m.EuiLink,{onClick:()=>a(s.cluster_name)},Object(x.jsx)(m.EuiHealth,{color:"subdued","data-test-subj":"alertIcon"},"N/A"))}},{name:se.i18n.translate("xpack.monitoring.cluster.listing.versionColumnTitle",{defaultMessage:"Version"}),field:"version","data-test-subj":"clusterVersion",sortable:!0}],qn=(e,t,s,a)=>{e.$evalAsync((()=>{t.cluster_uuid=s,t.ccs=a,t.save(),window.history.replaceState(null,null,"#/overview")}))},Gn=(e,{title:t,text:s})=>{e.$evalAsync((()=>{Q.a.shims.toastNotifications.addWarning({title:t,text:s,"data-test-subj":"monitoringLicenseWarning"})}))},Kn=(e,t,s)=>{Gn(e,{title:se.i18n.translate("xpack.monitoring.cluster.listing.incompatibleLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:ka(Object(x.jsx)(o.Fragment,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.noMultiClusterSupportMessage",defaultMessage:"The Basic license does not support multi-cluster monitoring."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.infoMessage",defaultMessage:"Need to monitor multiple clusters? {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getLicenseInfoLink:Object(x.jsx)(m.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.incompatibleLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),t)})},Jn=(e,t,s)=>{const a=`${Q.a.shims.getBasePath()}/app/management/stack/license_management/home`;Gn(e,{title:se.i18n.translate("xpack.monitoring.cluster.listing.invalidLicense.warningMessageTitle",{defaultMessage:"You can't view the {clusterName} cluster",values:{clusterName:'"'+s+'"'}}),text:ka(Object(x.jsx)(o.Fragment,null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.invalidInfoMessage",defaultMessage:"The license information is invalid."})),Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.infoMessage",defaultMessage:"Need a license? {getBasicLicenseLink} or {getLicenseInfoLink} to enjoy multi-cluster monitoring.",values:{getBasicLicenseLink:Object(x.jsx)(m.EuiLink,{href:a},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getBasicLicenseLinkLabel",defaultMessage:"Get a free Basic license"})),getLicenseInfoLink:Object(x.jsx)(m.EuiLink,{href:"https://www.elastic.co/subscriptions",target:"_blank"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.invalidLicense.getLicenseLinkLabel",defaultMessage:"Get a license with full functionality"}))}}))),t)})},Yn=({changeCluster:e,storage:t})=>t.get(Hn)?null:Object(x.jsx)("div",null,Object(x.jsx)(m.EuiCallOut,{color:"warning",title:se.i18n.translate("xpack.monitoring.cluster.listing.standaloneClusterCallOutTitle",{defaultMessage:"It looks like you have instances that aren't connected to an Elasticsearch cluster."}),iconType:"link"},Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{onClick:()=>e(U.Y),"data-test-subj":"standaloneClusterLink"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutLink",defaultMessage:"View these instances."})),"",Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutText",defaultMessage:"Or, click Standalone Cluster in the table below"})),Object(x.jsx)("p",null,Object(x.jsx)(m.EuiLink,{onClick:()=>{t.set(Hn,!0)}},Object(x.jsx)(m.EuiIcon,{type:"cross"}),"",Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.cluster.listing.standaloneClusterCallOutDismiss",defaultMessage:"Dismiss"})))),Object(x.jsx)(m.EuiSpacer,null)),Qn=({angular:e,clusters:t,sorting:s,pagination:i,onTableChange:n})=>{const{scope:o,globalState:r,storage:l,showLicenseExpiration:c}=e,{sort:{direction:u,field:d}}=s,{services:p}=Object(a.useKibana)(),g=Object(P.partial)(qn,o,r),b=Object(P.partial)(Kn,o,p),h=Object(P.partial)(Jn,o,p),j=!!t.find((e=>e.cluster_uuid===U.Y));return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,j?Object(x.jsx)(Yn,{changeCluster:g,storage:l}):null,Object(x.jsx)(Jt,{className:"clusterTable",rows:t,columns:Wn(c,0,b,h),rowProps:e=>({"data-test-subj":`clusterRow_${e.cluster_uuid}`}),sorting:{sort:{direction:u,field:d||"cluster_name"}},pagination:i,search:{box:{incremental:!0,placeholder:o.filterText}},onTableChange:n,executeQueryOptions:{defaultFields:["cluster_name"]}}))))},Xn=se.i18n.translate("xpack.monitoring.cluster.listing.pageTitle",{defaultMessage:"Cluster listing"}),Zn=se.i18n.translate("xpack.monitoring.cluster.listing.tabTitle",{defaultMessage:"Clusters"}),eo=e=>e.reduce(((e,t)=>({...e,...t.alerts&&t.alerts.list||{}})),{}),to=()=>{var e;const t=Object(o.useContext)(X),s=Object(o.useContext)($),{services:i}=Object(a.useKibana)(),[n,r]=Object(o.useState)([]),{update:l}=re(),{getPaginationTableProps:c}=Xa("clusters"),{sorting:u,pagination:d,onTableChange:p}=c();Object(o.useEffect)((()=>{l([{"data-test-subj":"clusterListingBreadcrumb",text:Zn}])}),[l]);const g=[{id:"clusters",label:Zn,testSubj:"clusterListingTab",route:"/home"}],m=Object(o.useCallback)((async()=>{var e,s;const a=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(s=i.http)&&void 0!==s&&s.fetch){const e=await on({fetch:i.http.fetch,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()},ccs:t.ccs,codePaths:["all"]});r(e)}}),[t.ccs,null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter,i.http]);return t.save&&1===n.length&&(t.cluster_uuid=n[0].cluster_uuid,t.save()),Object(x.jsx)(Da,{tabs:g,title:Xn,pageTitle:Xn,getPageData:m},1===n.length&&Object(x.jsx)(C.Redirect,{to:{pathname:"/overview"}}),Object(x.jsx)(Qn,{clusters:n,angular:{scope:{$evalAsync:e=>e(),filterQuery:""},globalState:t,storage:{get:e=>window.localStorage.getItem(e),set:(e,t)=>window.localStorage.setItem(e,t)},showLicenseExpiration:s.showLicenseExpiration},sorting:u,pagination:d,onTableChange:p}),Object(x.jsx)(Ca,{alerts:eo(n)}))};function so(e,t){const s=it()(e),a=s.format(t),i=Object(P.capitalize)(s.fromNow());return{shouldShowRelativeTime:!it()().subtract(6,"hours").isAfter(s),formattedTimestamp:a,relativeTime:i}}function ao({status:e,availability:t=!0}){const s=(()=>{if(!t)return Ze.GRAY;const s=e.toUpperCase();return Ze[s]||Ze.YELLOW})();return Object(x.jsx)(tt,{type:s,label:se.i18n.translate("xpack.monitoring.kibana.statusIconLabel",{defaultMessage:"Health: {status}",values:{status:e}})})}function io({stats:e}){const{transport_address:t,os_memory_free:s,version:i,uptime:n,status:o,statusIsStale:l,lastSeenTimestamp:c}=e,{staleStatusThresholdSeconds:u}=r.a.useContext($),d=Object(a.useUiSetting)("dateFormat"),p=[{label:se.i18n.translate("xpack.monitoring.kibana.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"transportAddress"},{label:se.i18n.translate("xpack.monitoring.kibana.detailStatus.osFreeMemoryLabel",{defaultMessage:"OS Free Memory"}),value:zt(s,"byte"),"data-test-subj":"osFreeMemory"},{label:se.i18n.translate("xpack.monitoring.kibana.detailStatus.versionLabel",{defaultMessage:"Version"}),value:i,"data-test-subj":"version"},{label:se.i18n.translate("xpack.monitoring.kibana.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:zt(n,"time_since"),"data-test-subj":"uptime"}];return Object(x.jsx)(Ct,{StatusIndicator:()=>{if(!l)return Object(x.jsx)(_t,{status:o,isOnline:!0,IconComponent:ao});const{description:e,title:t}=function(e,t,s,a){const{shouldShowRelativeTime:i,relativeTime:n,formattedTimestamp:o}=so(t,a),l=se.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from this instance. Last seen: {lastSeenTimestamp}",values:{staleStatusThresholdSeconds:s,lastSeenTimestamp:i?n:o}});return{description:se.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusMetricDescription",{defaultMessage:"Last Reported Status"}),title:Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(ao,{status:e}),"",Object(P.capitalize)(e),Object(x.jsx)("span",{style:{marginLeft:"8px"}},Object(x.jsx)(m.EuiToolTip,{position:"top",content:l},Object(x.jsx)(m.EuiBadge,{iconType:"warning",color:"warning"},se.i18n.translate("xpack.monitoring.kibana.detailStatus.staleStatusLabel",{defaultMessage:"Stale"})))))}}(o,c,u,d);return Object(x.jsx)(m.EuiStat,{"data-test-subj":"status",description:e,title:t,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})},metrics:p,"data-test-subj":"kibanaDetailStatus"})}const no=({data:e,alerts:t})=>{const{zoomInfo:s,onBrush:a}=Aa(),i=e.metrics.kibana_instance_rule_executions&&e.metrics.kibana_instance_rule_executions.length&&e.metrics.kibana_instance_rule_executions[0].indices_found.ecs;return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(io,{stats:e.kibanaSummary})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:t}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_requests,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_response_times,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_memory,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_average_concurrent_connections,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_os_load,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_process_delay,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),i&&Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_instance_rule_executions,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_instance_rule_failures,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_instance_action_executions,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_instance_action_failures,onBrush:a,zoomInfo:s}),Object(x.jsx)(m.EuiSpacer,null)))))))},oo=({clusters:e})=>{var t;const{instance:s}=Object(C.useParams)(),i=Object(o.useContext)(X),{services:n}=Object(a.useKibana)(),{generate:r}=re(),l=i.cluster_uuid,c=i.ccs,u=Object(P.find)(e,{cluster_uuid:l}),[d,p]=Object(o.useState)({}),[g,m]=Object(o.useState)(""),[b,h]=Object(o.useState)({}),j=`Kibana - ${g}`,f=se.i18n.translate("xpack.monitoring.kibana.instance.pageTitle",{defaultMessage:"Kibana instance: {instance}",values:{instance:g}});Object(o.useEffect)((()=>{u&&r(u.cluster_name,{inKibana:!0,instance:g})}),[u,g,r]);const O=Object(o.useCallback)((async()=>{var e,t;const a=null===(e=n.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),i=`../api/monitoring/v1/clusters/${l}/kibana/${s}`;if(null!==(t=n.http)&&void 0!==t&&t.fetch&&l){var o;const e=await(null===(o=n.http)||void 0===o?void 0:o.fetch(i,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));p(e),m(e.kibanaSummary.name);const t=await rn({fetch:n.http.fetch,alertTypeIds:[U.N],clusterUuid:l,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});h(t)}}),[c,l,s,null===(t=n.data)||void 0===t?void 0:t.query.timefilter.timefilter,n.http]);return Object(x.jsx)(Da,{title:j,pageTitle:f,getPageData:O},Object(x.jsx)("div",{"data-test-subj":"kibanaInstancePage"},Object(x.jsx)(no,{data:d,alerts:b})))},ro=({...e})=>{const t=[{id:"overview",label:se.i18n.translate("xpack.monitoring.kibanaNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/kibana",testSubj:"kibanaOverviewPage"},{id:"instances",label:se.i18n.translate("xpack.monitoring.kibanaNavigation.instancesLinkText",{defaultMessage:"Instances"}),route:"/kibana/instances",testSubj:"kibanaInstancesPage"}];return Object(x.jsx)(Da,n()({},e,{tabs:t,product:"kibana"}))};function lo({stats:e,alerts:t}){const{concurrent_connections:s,count:a,memory_limit:i,memory_size:n,requests_total:o,response_time_max:l,status:c,some_status_is_stale:u}=e,{staleStatusThresholdSeconds:d}=r.a.useContext($),p=Object(C.useLocation)(),g=[{label:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.instancesLabel",{defaultMessage:"Instances"}),value:a,"data-test-subj":"instances"},{label:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:zt(n,"byte")+" / "+zt(i,"byte"),"data-test-subj":"memory"},{label:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.requestsLabel",{defaultMessage:"Requests"}),value:o,"data-test-subj":"requests"},{label:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.connectionsLabel",{defaultMessage:"Connections"}),value:s,"data-test-subj":"connections"},{label:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.maxResponseTimeLabel",{defaultMessage:"Max. Response Time"}),value:zt(l,"0","ms"),"data-test-subj":"maxResponseTime"}];return Object(x.jsx)(Ct,{StatusIndicator:()=>{if(!u)return Object(x.jsx)(_t,{status:c,isOnline:!0,IconComponent:ao});const e=se.i18n.translate("xpack.monitoring.kibana.clusterStatus.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from some instances.",values:{staleStatusThresholdSeconds:d}});return"/kibana"===p.pathname?Object(x.jsx)(co,{staleMessage:e}):Object(x.jsx)(uo,{staleMessage:e})},alerts:t,metrics:g,"data-test-subj":"kibanaClusterStatus"})}function co({staleMessage:e}){const t=$e("#/kibana/instances"),s=Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)("div",{style:{marginBottom:"8px"}},Object(x.jsx)(m.EuiToolTip,{position:"top",content:e},Object(x.jsx)(m.EuiBadge,{iconType:"warning",color:"warning"},se.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.staleStatusInstancesLabel",{defaultMessage:"Stale"})))),Object(x.jsx)(m.EuiLink,{href:t},se.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.staleStatusLinkToInstancesLabel",{defaultMessage:"View all instances"})));return Object(x.jsx)(m.EuiStat,{"data-test-subj":"status",description:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.overview.statusLabel",{defaultMessage:"Status"}),title:s,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})}function uo({staleMessage:e}){const t=Object(x.jsx)(m.EuiToolTip,{position:"top",content:e},Object(x.jsx)(m.EuiBadge,{iconType:"warning",color:"warning"},se.i18n.translate("xpack.monitoring.kibana.clusterStatus.instances.staleStatusInstancesLabel",{defaultMessage:"Stale"})));return Object(x.jsx)(m.EuiStat,{"data-test-subj":"status",description:se.i18n.translate("xpack.monitoring.kibana.clusterStatus.instances.statusLabel",{defaultMessage:"Status"}),title:t,titleSize:"xxxs",textAlign:"left",className:"monSummaryStatusNoWrap__stat"})}const po=(e,t,s,a)=>{const i=[{name:se.i18n.translate("xpack.monitoring.kibana.listing.nameColumnTitle",{defaultMessage:"Name"}),field:"name",render:(t,s)=>{let a=null;if(_e(xe.d.MetricbeatMigration)){const i=Object(P.get)(e,"data.byUuid",{}),n=Object(P.get)(s,"kibana.uuid"),o=i[n]||{},r={uuid:n,name:s.name};if(a=Object(x.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(x.jsx)(Js,{setupMode:e,status:o,instance:r,productName:U.B})),o.isNetNewUser)return Object(x.jsx)("div",null,t,a)}return Object(x.jsx)("div",null,Object(x.jsx)(m.EuiLink,{href:$e(`#/kibana/instances/${s.kibana.uuid}`),"data-test-subj":`kibanaLink-${t}`},t),a)}},{name:se.i18n.translate("xpack.monitoring.kibana.listing.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"alerts_column",width:"175px",sortable:!0,render:()=>Object(x.jsx)(St,{showBadge:!0,alerts:t})},{name:se.i18n.translate("xpack.monitoring.kibana.listing.lastReportedStatusColumnTitle",{defaultMessage:"Last Reported Status"}),field:"status",render:e=>Object(x.jsx)(m.EuiHealth,{color:mo(e),"data-test-subj":"status"},Object(P.capitalize)(e))},{name:se.i18n.translate("xpack.monitoring.kibana.listing.lastSeenColumnTitle",{defaultMessage:"Last Seen"}),field:"lastSeenTimestamp",render:(e,t)=>{const i=function(e,t){const{shouldShowRelativeTime:s,formattedTimestamp:a,relativeTime:i}=so(e,t);return s?Object(x.jsx)(m.EuiToolTip,{position:"top",content:a},Object(x.jsx)("span",null,i)):a}(e,s),n=se.i18n.translate("xpack.monitoring.kibana.listing.staleStatusTooltip",{defaultMessage:"It's been more than {staleStatusThresholdSeconds} seconds since we have heard from this instance.",values:{staleStatusThresholdSeconds:a}});return Object(x.jsx)("span",{"data-test-subj":"lastSeen"},i,t.statusIsStale&&Object(x.jsx)(r.a.Fragment,null,"",Object(x.jsx)(m.EuiIconTip,{"aria-label":n,content:n,size:"l",type:"warning",color:"warning"})))}},{name:se.i18n.translate("xpack.monitoring.kibana.listing.loadAverageColumnTitle",{defaultMessage:"Load Average"}),field:"os.load.1m",render:e=>Object(x.jsx)("span",null,zt(e,"0.00"))},{name:se.i18n.translate("xpack.monitoring.kibana.listing.memorySizeColumnTitle",{defaultMessage:"Memory Size"}),field:"process.memory.resident_set_size_in_bytes",render:e=>Object(x.jsx)("span",null,Dt(e,"byte"))},{name:se.i18n.translate("xpack.monitoring.kibana.listing.requestsColumnTitle",{defaultMessage:"Requests"}),field:"requests.total",render:e=>Object(x.jsx)("span",null,Dt(e,"int_commas"))},{name:se.i18n.translate("xpack.monitoring.kibana.listing.responseTimeColumnTitle",{defaultMessage:"Response Times"}),field:"response_times.average",render:(e,t)=>{var s;return e?Object(x.jsx)("div",null,Object(x.jsx)("div",{className:"monTableCell__splitNumber"},Dt(e,"int_commas")+" ms avg"),Object(x.jsx)("div",{className:"monTableCell__splitNumber"},Dt(null==t||null===(s=t.response_times)||void 0===s?void 0:s.max,"int_commas")," ms max")):null}}];return i},go=e=>{const{clusterStatus:t,alerts:s,setupMode:i,sorting:n,pagination:l,onTableChange:c}=e,{staleStatusThresholdSeconds:u}=r.a.useContext($),d=Object(a.useUiSetting)("dateFormat");let p=null;const g=e.instances||[];if(_e(xe.d.MetricbeatMigration)){const e=g.reduce(((e,t)=>{var s,a;return{...e,[null!==(s=null===(a=t.kibana)||void 0===a?void 0:a.uuid)&&void 0!==s?s:""]:t}}),{});g.push(...Object.entries(i.data.byUuid).reduce(((t,[s,a])=>(e[s]||t.push({kibana:{...a.instance.kibana,status:Ze.GRAY}}),t)),[])),p=Object(x.jsx)(Qs,{setupModeData:i.data,productName:U.B,customRenderer:()=>{const e={shouldRender:!1,componentToRender:null};return i.data.totalUniqueInstanceCount>0||(e.shouldRender=!0,e.componentToRender=Object(x.jsx)(o.Fragment,null,Object(x.jsx)(m.EuiCallOut,{title:se.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeTitle",{defaultMessage:"Kibana instance detected"}),color:"warning",iconType:"flag"},Object(x.jsx)("p",null,se.i18n.translate("xpack.monitoring.kibana.instances.metricbeatMigration.detectedNodeDescription",{defaultMessage:"The following instances are not monitored.\n                        Click 'Monitor with Metricbeat' below to start monitoring."}))),Object(x.jsx)(m.EuiSpacer,{size:"m"}))),e}})}const b=g.map((e=>{var t,s;return{...e,name:null===(t=e.kibana)||void 0===t?void 0:t.name,status:null===(s=e.kibana)||void 0===s?void 0:s.status}}));return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.kibana.instances.heading",defaultMessage:"Kibana instances"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(lo,{stats:t,alerts:s})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),p,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Jt,{className:"kibanaInstancesTable",rows:b,columns:po(i,s,d,u),sorting:n,pagination:l,setupMode:i,productName:U.B,search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.kibana.listing.filterInstancesPlaceholder",{defaultMessage:"Filter Instances"})}},onTableChange:c,executeQueryOptions:{defaultFields:["name"]}}))))};function mo(e){switch(e){case"red":return"danger";case"yellow":return"warning";case"green":return"success";default:return"subdued"}}const bo=({clusters:e})=>{var t;const{cluster_uuid:s,ccs:i}=Object(o.useContext)(X),{services:r}=Object(a.useKibana)(),{generate:l}=re(),{updateTotalItemCount:c,getPaginationTableProps:u}=Xa("kibana.instances"),d=Object(P.find)(e,{cluster_uuid:s}),[p,g]=Object(o.useState)({}),[m,b]=Object(o.useState)({}),h=se.i18n.translate("xpack.monitoring.kibana.instances.routeTitle",{defaultMessage:"Kibana - Instances"}),j=se.i18n.translate("xpack.monitoring.kibana.instances.pageTitle",{defaultMessage:"Kibana instances"});Object(o.useEffect)((()=>{d&&l(d.cluster_name,{inKibana:!0})}),[d,l]);const f=Object(o.useCallback)((async()=>{var e,t;const a=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),n=`../api/monitoring/v1/clusters/${s}/kibana/instances`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&s){var o;const e=await(null===(o=r.http)||void 0===o?void 0:o.fetch(n,{method:"POST",body:JSON.stringify({ccs:i,timeRange:{min:a.min.toISOString(),max:a.max.toISOString()}})}));g(e),c(e.kibanas.length);const t=await rn({fetch:r.http.fetch,alertTypeIds:[U.N],clusterUuid:s,timeRange:{min:a.min.valueOf(),max:a.max.valueOf()}});b(t)}}),[i,s,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,c]);return Object(x.jsx)(ro,{title:h,pageTitle:j,getPageData:f},Object(x.jsx)("div",{"data-test-subj":"monitoringKibanaInstancesApp"},Object(x.jsx)(pi,{productName:U.B,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(go,n()({alerts:m,instances:p.kibanas,setupMode:e,clusterStatus:p.clusterStatus},u())),s)})))},ho=({data:e})=>{const{zoomInfo:t,onBrush:s}=Aa();if(!e)return null;const a=e.metrics.kibana_cluster_rule_overdue_count&&e.metrics.kibana_cluster_rule_overdue_count.length&&e.metrics.kibana_cluster_rule_overdue_count[0].indices_found.ecs;return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(lo,{stats:e.clusterStatus})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGroup,null,Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_cluster_requests,onBrush:s,zoomInfo:t})),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_cluster_response_times,onBrush:s,zoomInfo:t}))),a&&Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(m.EuiFlexGroup,null,Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_cluster_rule_overdue_count,onBrush:s,zoomInfo:t})),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_cluster_rule_overdue_duration,onBrush:s,zoomInfo:t}))),Object(x.jsx)(m.EuiFlexGroup,null,Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_cluster_action_overdue_count,onBrush:s,zoomInfo:t})),Object(x.jsx)(m.EuiFlexItem,{grow:!0},Object(x.jsx)(Ms,{series:e.metrics.kibana_cluster_action_overdue_duration,onBrush:s,zoomInfo:t})))))))},jo=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{services:i}=Object(a.useKibana)(),{generate:n}=re(),[r,l]=Object(o.useState)(),c=s.cluster_uuid,u=Object(P.find)(e,{cluster_uuid:c}),d=s.ccs,p=se.i18n.translate("xpack.monitoring.kibana.overview.title",{defaultMessage:"Kibana"}),g=se.i18n.translate("xpack.monitoring.kibana.overview.pageTitle",{defaultMessage:"Kibana overview"});Object(o.useEffect)((()=>{u&&n(u.cluster_name,{inKibana:!0})}),[u,n]);const m=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/kibana`,n=await(null===(t=i.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));l(n)}),[d,c,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http]);return Object(x.jsx)(ro,{getPageData:m,title:p,pageTitle:g},Object(x.jsx)(ho,{data:r}))},xo=[U.n],fo=()=>{var e,t,s;const i=se.i18n.translate("xpack.monitoring.license.licenseRouteTitle",{defaultMessage:"License"}),{setIsDisabled:n}=ue();Object(o.useEffect)((()=>(n(!0),()=>{n(!1)})),[n]);const r=Object(o.useContext)(X),l=r.cluster_uuid,c=r.ccs,[u,d]=Object(o.useState)([]),{services:p}=Object(a.useKibana)(),g=null===(e=p.uiSettings)||void 0===e?void 0:e.get("dateFormat:tz"),m=null===(t=p.application)||void 0===t?void 0:t.getUrlForApp("management",{path:"stack/license_management/upload_license"}),b=Object(o.useCallback)((async()=>{var e;const t=null===(e=p.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();let s="../api/monitoring/v1/clusters";l&&(s+=`/${l}`);try{var a;const e=await(null===(a=p.http)||void 0===a?void 0:a.fetch(s,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:t.min.toISOString(),max:t.max.toISOString()},codePaths:xo})}));d(function(e){return e.map(Oo)}(e))}catch(e){}}),[c,l,null===(s=p.data)||void 0===s?void 0:s.query.timefilter.timefilter,p.http]);return Object(x.jsx)(Da,{title:i,pageTitle:"",getPageData:b},function(e,t,s){if(e.length){const a=e[0],i=a.isPrimary,n=a.license;let o=null==n?void 0:n.expiry_date_in_millis;void 0!==o&&(o=function(e,t){return dt.a.tz(e,t||dt.a.tz.guess()).format("LL LTS")}(o,t));const r=Date.now()>o;return Object(x.jsx)(Je,{isPrimaryCluster:i,status:n.status,type:n.type,isExpired:r,expiryDate:o,uploadLicensePath:s})}return null}(u,g,m))};function Oo(e){return e.cluster_uuid===U.Y&&(e.cluster_name="Standalone Cluster"),e}function vo(e,t,s){var i;const{services:n}=Object(a.useKibana)(),r=null===(i=n.data)||void 0===i?void 0:i.query.timefilter.timefilter.getBounds(),[l]=Object(o.useState)(r.min.toISOString()),[c]=Object(o.useState)(r.max.toISOString()),[u,d]=Object(o.useState)([]),[p,g]=Object(o.useState)(!1),m=Ta();return Object(o.useEffect)((()=>{!async function(){try{var t;if(null!==(t=n.http)&&void 0!==t&&t.fetch){const t=await on({timeRange:{min:l,max:c},fetch:n.http.fetch,clusterUuid:e,codePaths:s});d(t)}}catch(e){m(e)}finally{g(!0)}}()}),[m,e,t,n.http,s,l,c]),{clusters:u,loaded:p}}const yo=[U.k],ko=({staticLoadingState:e})=>{const{clusters:t,loaded:s}=vo(null,void 0,yo),a=se.i18n.translate("xpack.monitoring.loading.pageTitle",{defaultMessage:"Loading"});return e?Object(x.jsx)(Da,{title:a},Object(x.jsx)(Xe,null)):Object(x.jsx)(Da,{title:a},!1===s?Object(x.jsx)(Xe,null):Mo(t))},Mo=e=>e&&e.length?1===e.length?Object(x.jsx)(C.Redirect,{to:"/overview"}):Object(x.jsx)(C.Redirect,{to:"/home"}):Object(x.jsx)(C.Redirect,{to:"/no-data"}),Eo=({cluster:e,instance:t,pipelineId:s,pipelineVersions:a,tabsDisabled:i,...o})=>{const r=[];if(!i)if(t||s){if(t){var l,c,u;r.push({id:"overview",label:se.i18n.translate("xpack.monitoring.logstashNavigation.instance.overviewLinkText",{defaultMessage:"Overview"}),route:`/logstash/node/${null===(l=t.nodeSummary)||void 0===l?void 0:l.uuid}`}),r.push({id:"pipeline",label:se.i18n.translate("xpack.monitoring.logstashNavigation.instance.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:`/logstash/node/${null===(c=t.nodeSummary)||void 0===c?void 0:c.uuid}/pipelines`,testSubj:"logstashNodeDetailPipelinesLink"}),r.push({id:"advanced",label:se.i18n.translate("xpack.monitoring.logstashNavigation.instance.advancedLinkText",{defaultMessage:"Advanced"}),route:`/logstash/node/${null===(u=t.nodeSummary)||void 0===u?void 0:u.uuid}/advanced`,testSubj:"logstashNodeDetailAdvancedLink"})}}else r.push({id:"overview",label:se.i18n.translate("xpack.monitoring.logstashNavigation.overviewLinkText",{defaultMessage:"Overview"}),route:"/logstash"}),r.push({id:"nodes",label:se.i18n.translate("xpack.monitoring.logstashNavigation.nodesLinkText",{defaultMessage:"Nodes"}),route:"/logstash/nodes"}),r.push({id:"pipelines",label:se.i18n.translate("xpack.monitoring.logstashNavigation.pipelinesLinkText",{defaultMessage:"Pipelines"}),route:"/logstash/pipelines"});return a&&a.length,Object(x.jsx)(Da,n()({},o,{tabs:r,product:"logstash"}))};function So({stats:e}){const{http_address:t,events:s,reloads:a,pipeline:i,queue_type:n,version:o,uptime:r}=e,l=[{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.transportAddressLabel",{defaultMessage:"Transport Address"}),value:t,"data-test-subj":"httpAddress"},{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:zt(s.in,"0.[0]a"),"data-test-subj":"eventsIn"},{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:zt(s.out,"0.[0]a"),"data-test-subj":"eventsOut"},{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.configReloadsLabel",{defaultMessage:"Config Reloads"}),value:a.successes,"data-test-subj":"numReloads"},{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.pipelineWorkersLabel",{defaultMessage:"Pipeline Workers"}),value:i.workers,"data-test-subj":"pipelineWorkers"},{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.batchSizeLabel",{defaultMessage:"Batch Size"}),value:i.batch_size,"data-test-subj":"pipelineBatchSize"}],c=[{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.versionLabel",{defaultMessage:"Version"}),value:o,"data-test-subj":"version"},{label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.uptimeLabel",{defaultMessage:"Uptime"}),value:zt(r,"time_since"),"data-test-subj":"uptime"}],u=[...l];return n&&u.push({label:se.i18n.translate("xpack.monitoring.logstash.detailStatus.queueTypeLabel",{defaultMessage:"Queue Type"}),value:n,"data-test-subj":"queueType"}),u.push(...c),Object(x.jsx)(Ct,{metrics:u,"data-test-subj":"logstashDetailStatus"})}const wo=({clusters:e})=>{var t;const s=Object(o.useContext)(X),i=Object(C.useRouteMatch)(),{services:r}=Object(a.useKibana)(),l=s.cluster_uuid,{zoomInfo:c,onBrush:u}=Aa(),d=s.ccs,p=Object(P.find)(e,{cluster_uuid:l}),{generate:g}=re(),[b,h]=Object(o.useState)({}),[j,f]=Object(o.useState)({}),O=se.i18n.translate("xpack.monitoring.logstash.node.advanced.routeTitle",{defaultMessage:"Logstash - {nodeName} - Advanced",values:{nodeName:b.nodeSummary?b.nodeSummary.name:""}}),v=se.i18n.translate("xpack.monitoring.logstash.node.advanced.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:b.nodeSummary?b.nodeSummary.name:""}}),y=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash/node/${i.params.uuid}`;if(null!==(t=r.http)&&void 0!==t&&t.fetch&&l){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:d,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},is_advanced:!0})}));h(e);const t=await rn({fetch:r.http.fetch,alertTypeIds:[U.Q],clusterUuid:l,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});f(t)}}),[d,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,i.params.uuid]),k=Object(o.useMemo)((()=>b.metrics?[b.metrics.logstash_node_cpu_utilization,b.metrics.logstash_queue_events_count,b.metrics.logstash_node_cgroup_cpu,b.metrics.logstash_pipeline_queue_size,b.metrics.logstash_node_cgroup_stats]:[]),[b.metrics]);return Object(o.useEffect)((()=>{p&&b.nodeSummary&&g(p.cluster_name,{inLogstash:!0,instance:b.nodeSummary.host,name:"nodes"})}),[p,b,g]),Object(x.jsx)(Eo,{instance:b,title:O,pageTitle:v,getPageData:y,cluster:p},Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,b.nodeSummary&&Object(x.jsx)(So,{stats:b.nodeSummary})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:j}),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},k.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e,onBrush:u,zoomInfo:c},b)),Object(x.jsx)(m.EuiSpacer,null)))))))))},To=({clusters:e})=>{var t;const s=Object(C.useRouteMatch)(),i=Object(o.useContext)(X),{services:r}=Object(a.useKibana)(),{generate:l}=re(),c=i.cluster_uuid,u=i.ccs,d=Object(P.find)(e,{cluster_uuid:c}),[p,g]=Object(o.useState)({}),[b,h]=Object(o.useState)({}),{zoomInfo:j,onBrush:f}=Aa(),O=se.i18n.translate("xpack.monitoring.logstash.node.routeTitle",{defaultMessage:"Logstash - {nodeName}",values:{nodeName:p.nodeSummary?p.nodeSummary.name:""}}),v=se.i18n.translate("xpack.monitoring.logstash.node.pageTitle",{defaultMessage:"Logstash node: {nodeName}",values:{nodeName:p.nodeSummary?p.nodeSummary.name:""}});Object(o.useEffect)((()=>{d&&p.nodeSummary&&l(d.cluster_name,{inLogstash:!0,instance:p.nodeSummary.host,name:"nodes"})}),[d,p,l]);const y=Object(o.useCallback)((async()=>{var e,t;const a=`../api/monitoring/v1/clusters/${c}/logstash/node/${s.params.uuid}`,i=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds();if(null!==(t=r.http)&&void 0!==t&&t.fetch&&c){var n;const e=await(null===(n=r.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:i.min.toISOString(),max:i.max.toISOString()},is_advanced:!1})}));g(e);const t=await rn({fetch:r.http.fetch,alertTypeIds:[U.Q],clusterUuid:c,timeRange:{min:i.min.valueOf(),max:i.max.valueOf()}});h(t)}}),[u,c,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,s.params]),k=Object(o.useMemo)((()=>p.metrics?[p.metrics.logstash_events_input_rate,p.metrics.logstash_jvm_usage,p.metrics.logstash_events_output_rate,p.metrics.logstash_node_cpu_metric,p.metrics.logstash_events_latency,p.metrics.logstash_os_load]:[]),[p.metrics]);return Object(x.jsx)(Eo,{instance:p,title:O,pageTitle:v,getPageData:y,cluster:d},Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiPanel,null,p.nodeSummary&&Object(x.jsx)(So,{stats:p.nodeSummary})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(ca,{alerts:b}),Object(x.jsx)(m.EuiPageSection,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},k.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e,onBrush:f,zoomInfo:j},p)),Object(x.jsx)(m.EuiSpacer,null)))))))))};function _o({stats:e,alerts:t}){const{node_count:s,avg_memory_used:a,avg_memory:i,events_in_total:n,events_out_total:o}=e,r=[{label:se.i18n.translate("xpack.monitoring.logstash.clusterStatus.nodesLabel",{defaultMessage:"Nodes"}),value:s,"data-test-subj":"node_count"},{label:se.i18n.translate("xpack.monitoring.logstash.clusterStatus.memoryLabel",{defaultMessage:"Memory"}),value:zt(a,"byte")+" / "+zt(i,"byte"),"data-test-subj":"memory_used"},{label:se.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsReceivedLabel",{defaultMessage:"Events Received"}),value:zt(n,"0.[0]a"),"data-test-subj":"events_in_total"},{label:se.i18n.translate("xpack.monitoring.logstash.clusterStatus.eventsEmittedLabel",{defaultMessage:"Events Emitted"}),value:zt(o,"0.[0]a"),"data-test-subj":"events_out_total"}];return Object(x.jsx)(Ct,{metrics:r,alerts:t,"data-test-subj":"logstashClusterStatus"})}class logstash_listing_listing_Listing extends o.PureComponent{getColumns(){const e=this.props.setupMode,t=this.props.alerts;return[{name:se.i18n.translate("xpack.monitoring.logstash.nodes.nameTitle",{defaultMessage:"Name"}),field:"name",sortable:!0,render:(t,s)=>{let a=null;if(_e(xe.d.MetricbeatMigration)){const t=Object(P.get)(e,"data.byUuid",{}),i=Object(P.get)(s,"logstash.uuid"),n=t[i]||{},o={uuid:i,name:s.name};a=Object(x.jsx)("div",{className:"monTableCell__setupModeStatus"},Object(x.jsx)(Js,{setupMode:e,status:n,instance:o,productName:U.F}))}return Object(x.jsx)("div",null,Object(x.jsx)("div",{"data-test-subj":"name"},Object(x.jsx)(m.EuiLink,{href:$e(`#/logstash/node/${s.logstash.uuid}`),"data-test-subj":`nodeLink-${s.logstash.uuid}`},t)),Object(x.jsx)("div",{"data-test-subj":"httpAddress"},s.logstash.http_address),a)}},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.alertsColumnTitle",{defaultMessage:"Alerts"}),field:"isOnline",width:"175px",sortable:!0,render:()=>Object(x.jsx)(St,{showBadge:!0,alerts:t})},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.cpuUsageTitle",{defaultMessage:"CPU Usage"}),field:"cpu_usage",sortable:!0,render:e=>Object(x.jsx)("span",{"data-test-subj":"cpuUsage"},Nt(e,100))},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.loadAverageTitle",{defaultMessage:"Load Average"}),field:"load_average",sortable:!0,render:e=>Object(x.jsx)("span",{"data-test-subj":"loadAverage"},Dt(e,"0.00"))},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.jvmHeapUsedTitle",{defaultMessage:"{javaVirtualMachine} Heap Used",values:{javaVirtualMachine:"JVM"}}),field:"jvm_heap_used",sortable:!0,render:e=>Object(x.jsx)("span",{"data-test-subj":"jvmHeapUsed"},Nt(e,100))},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.eventsIngestedTitle",{defaultMessage:"Events Ingested"}),field:"events_out",sortable:!0,render:e=>Object(x.jsx)("span",{"data-test-subj":"eventsOut"},Dt(e,"0.[0]a"))},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.configReloadsTitle",{defaultMessage:"Config Reloads"}),sortable:!0,render:e=>Object(x.jsx)("div",null,Object(x.jsx)("div",{"data-test-subj":"configReloadsSuccess"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsSuccessCountLabel",defaultMessage:"{reloadsSuccesses} successes",values:{reloadsSuccesses:e.reloads.successes}})),Object(x.jsx)("div",{"data-test-subj":"configReloadsFailure"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.nodes.configReloadsFailuresCountLabel",defaultMessage:"{reloadsFailures} failures",values:{reloadsFailures:e.reloads.failures}})))},{name:se.i18n.translate("xpack.monitoring.logstash.nodes.versionTitle",{defaultMessage:"Version"}),field:"version",sortable:!0,render:e=>Object(x.jsx)("span",{"data-test-subj":"version"},Dt(e))}]}render(){const{stats:e,alerts:t,sorting:s,pagination:a,onTableChange:i,data:n,setupMode:o}=this.props,r=this.getColumns(),l=n.map((e=>({...e,name:Object(P.get)(e,"logstash.name","N/A"),cpu_usage:Object(P.get)(e,"process.cpu.percent","N/A"),load_average:Object(P.get)(e,"os.cpu.load_average.1m","N/A"),jvm_heap_used:Object(P.get)(e,"jvm.mem.heap_used_percent","N/A"),events_out:Object(P.get)(e,"events.out","N/A"),version:Object(P.get)(e,"logstash.version","N/A")})));let c=null;return _e(xe.d.MetricbeatMigration)&&(c=Object(x.jsx)(Qs,{setupModeData:o.data,useNodeIdentifier:!0,productName:U.F})),Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.instances.heading",defaultMessage:"Logstash instances"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(_o,{stats:e,alerts:t})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),c,Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Jt,{className:"logstashNodesTable",rows:l,setupMode:o,productName:U.F,columns:r,sorting:{...s,sort:{...s.sort,field:"name"}},pagination:a,search:{box:{incremental:!0,placeholder:se.i18n.translate("xpack.monitoring.logstash.filterNodesPlaceholder",{defaultMessage:"Filter Nodes"})}},onTableChange:i,executeQueryOptions:{defaultFields:["name"]}}))))}}const Co=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{services:i}=Object(a.useKibana)(),r=s.cluster_uuid,l=s.ccs,{generate:c}=re(),u=Object(P.find)(e,{cluster_uuid:r}),[d,p]=Object(o.useState)({}),[g,m]=Object(o.useState)({}),{getPaginationTableProps:b}=Xa("logstash.nodes"),h=se.i18n.translate("xpack.monitoring.logstash.nodes.routeTitle",{defaultMessage:"Logstash - Nodes"}),j=se.i18n.translate("xpack.monitoring.logstash.nodes.pageTitle",{defaultMessage:"Logstash nodes"}),f=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=i.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${r}/logstash/nodes`;if(null!==(t=i.http)&&void 0!==t&&t.fetch&&r){var n;const e=await(null===(n=i.http)||void 0===n?void 0:n.fetch(a,{method:"POST",body:JSON.stringify({ccs:l,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));p(e);const t=await rn({fetch:i.http.fetch,alertTypeIds:[U.Q],clusterUuid:r,timeRange:{min:s.min.valueOf(),max:s.max.valueOf()}});m(t)}}),[l,r,null===(t=i.data)||void 0===t?void 0:t.query.timefilter.timefilter,i.http]);return Object(o.useEffect)((()=>{u&&c(u.cluster_name,{inLogstash:!0})}),[u,c]),Object(x.jsx)(Eo,{title:h,pageTitle:j,getPageData:f,cluster:u},Object(x.jsx)("div",{"data-test-subj":"logstashNodesPage"},Object(x.jsx)(pi,{productName:U.F,render:({setupMode:e,flyoutComponent:t,bottomBarComponent:s})=>Object(x.jsx)(st.Provider,{value:{setupModeSupported:!0}},t,Object(x.jsx)(logstash_listing_listing_Listing,n()({stats:d.clusterStatus,metrics:d.metrics,data:d.nodes,setupMode:e,alerts:g},b())),s)})))};var Io=s(114),Lo=s.n(Io);function Po(e){return Lo()(e)>=U.E.MAJOR_VER_REQD_FOR_PIPELINES}const Fo={grid:{show:!1,margin:4,hoverable:!0},colors:["#3b73ac"],series:{shadowSize:0,lines:{lineWidth:2},highlightColor:"#3b73ac",points:{radius:2}}};function No(e=[]){const t=[];return t.push(e),t.push({data:[Object(P.last)(e)],points:{show:!0,radius:2,fill:1,fillColor:!1}}),t}class sparkline_flot_chart_SparklineFlotChart{constructor(e,t,s,a,i){G()(this,"render",(()=>{this.flotChart=ps.a.plot(this.containerElem,this.data,this.options)})),G()(this,"setupBrushHandling",(e=>{this.options.selection={mode:"x",color:"#9c9c9c"},ps()(this.containerElem).off("plotselected"),ps()(this.containerElem).on("plotselected",((t,s)=>{e(s),this.flotChart.clearSelection()}))})),G()(this,"setupHoverHandling",(e=>{const t=ps()(this.containerElem),s=Object(P.debounce)(((s,a,i)=>{if(null===i)return e();e({xValue:i.datapoint[0],yValue:i.datapoint[1],xPosition:i.pageX-window.pageXOffset,yPosition:i.pageY-window.pageYOffset,plotTop:t.offset().top,plotLeft:t.offset().left,plotHeight:t.height(),plotWidth:t.width()})}),U.p,{leading:!0});t.off("plothover"),t.on("plothover",s)})),this.containerElem=e,this.data=No(t),this.options={...Fo,...i},Object(P.isFunction)(s)&&this.setupBrushHandling(s),Object(P.isFunction)(a)&&this.setupHoverHandling(a),this.render(),window.addEventListener("resize",this.render)}update(e){this.flotChart.setData(No(e)),this.flotChart.setupGrid(),this.flotChart.draw()}shutdown(){this.flotChart.shutdown();const e=ps()(this.containerElem);e.off("plotselected"),e.off("plothover"),window.removeEventListener("resize",this.render)}}s(120);class sparkline_Sparkline extends r.a.Component{constructor(e){super(e),this.makeSparklineFlotChart=this.makeSparklineFlotChart.bind(this),this.onHover=this.onHover.bind(this),this.renderTooltip=this.renderTooltip.bind(this),this.handleSparklineRef=this.handleSparklineRef.bind(this),this.state={tooltip:void 0}}UNSAFE_componentWillReceiveProps({series:e,options:t}){Object(P.isEqual)(t,this.props.options)||(this.sparklineFlotChart.shutdown(),this.makeSparklineFlotChart(t)),Object(P.isEqual)(e,this.props.series)||this.sparklineFlotChart.update(e)}makeSparklineFlotChart(e){this.sparklineFlotChart=new sparkline_flot_chart_SparklineFlotChart(this.chartElem,this.props.series,this.props.onBrush,this.onHover,e)}onHover(e){this.setState({tooltip:e})}renderTooltip(){if(!1===this.props.tooltip.enabled)return;if(!this.state.tooltip)return;const e={tooltipContainer:{top:this.state.tooltip.yPosition-28},tooltip:{height:56,width:220},leftCaret:{width:6},rightCaret:{width:6}},t=this.state.tooltip.plotLeft+this.state.tooltip.plotWidth/2;return this.state.tooltip.xPosition>t?(e.rightCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition-226-10):(e.leftCaret.display="block",e.tooltipContainer.left=this.state.tooltip.xPosition+10),Object(x.jsx)("div",{className:"monSparklineTooltip__container",style:e.tooltipContainer},Object(x.jsx)("i",{className:"fa fa-caret-left monSparklineTooltip__caret",style:e.leftCaret}),Object(x.jsx)("div",{className:"monSparklineTooltip",style:e.tooltip},Object(x.jsx)("div",{className:"monSparklineTooltip__yValue"},this.props.tooltip.yValueFormatter(this.state.tooltip.yValue)),Object(x.jsx)("div",{className:"monSparklineTooltip__xValue"},this.props.tooltip.xValueFormatter(this.state.tooltip.xValue))),Object(x.jsx)("i",{className:"fa fa-caret-right monSparklineTooltip__caret",style:e.rightCaret}))}handleSparklineRef(e){this.chartElem=e,this.chartElem?this.makeSparklineFlotChart(this.props.options):this.sparklineFlotChart&&this.sparklineFlotChart.shutdown()}render(){return Object(x.jsx)("div",null,Object(x.jsx)("div",{className:"monSparkline",ref:this.handleSparklineRef}),this.renderTooltip())}}class pipeline_listing_PipelineListing extends o.Component{tooltipXValueFormatter(e,t){return it()(e).format(t)}tooltipYValueFormatter(e,t,s){return zt(e,t,s)}getColumns(){const{onBrush:e,dateFormat:t}=this.props;return[{name:se.i18n.translate("xpack.monitoring.logstash.pipelines.idTitle",{defaultMessage:"ID"}),field:"id",sortable:!0,render:e=>Object(x.jsx)(m.EuiLink,{"data-test-subj":"id",href:$e(`#/logstash/pipelines/${e}`)},e)},{name:se.i18n.translate("xpack.monitoring.logstash.pipelines.eventsEmittedRateTitle",{defaultMessage:"Events Emitted Rate"}),field:"latestThroughput",sortable:!0,render:(s,a)=>{const i=a.metrics.throughput;return Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(P.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(x.jsx)(m.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"eventsEmittedRate"},zt(s,"0.[0]a",i.metric.units)))}},{name:se.i18n.translate("xpack.monitoring.logstash.pipelines.numberOfNodesTitle",{defaultMessage:"Number of Nodes"}),field:"latestNodesCount",sortable:!0,render:(s,a)=>{const i=a.metrics.nodesCount;return Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"none",alignItems:"center"},Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(sparkline_Sparkline,{series:i.data,onBrush:e,tooltip:{xValueFormatter:e=>this.tooltipXValueFormatter(e,t),yValueFormatter:Object(P.partialRight)(this.tooltipYValueFormatter,i.metric.format,i.metric.units)},options:{xaxis:i.timeRange}})),Object(x.jsx)(m.EuiFlexItem,{className:"monTableCell__number","data-test-subj":"nodeCount"},zt(s,"0a")))}}]}renderStats(){if(this.props.statusComponent){const e=this.props.statusComponent;return Object(x.jsx)(e,{stats:this.props.stats})}return Object(x.jsx)(_o,{stats:this.props.stats})}render(){const{data:e,sorting:t,pagination:s,onTableChange:a,upgradeMessage:i,className:o,...r}=this.props,l=t||{field:"id",direction:"asc"};"name"===l.field&&(l.field="id");const c=this.getColumns();return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipline_listing.heading",defaultMessage:"Logstash pipelines"}))),Object(x.jsx)(m.EuiPanel,null,this.renderStats()),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(Yt,n()({className:o||"logstashNodesTable",rows:e,columns:c,sorting:l,message:i,pagination:s,search:{box:{placeholder:se.i18n.translate("xpack.monitoring.logstash.filterPipelinesPlaceholder",{defaultMessage:"Filter Pipelines"})}},onTableChange:a},r)))))}}const Do=({clusters:e})=>{var t;const s=Object(o.useContext)(X),i=Object(C.useRouteMatch)(),{services:r}=Object(a.useKibana)(),l=s.cluster_uuid,c=s.ccs,{onBrush:u,zoomInfo:d}=Aa(),p=Object(P.find)(e,{cluster_uuid:l}),{generate:g}=re(),{getPaginationTableProps:m,getPaginationRouteOptions:b,updateTotalItemCount:h}=Xa("logstash.pipelines"),[j,f]=Object(o.useState)({}),O=se.i18n.translate("xpack.monitoring.logstash.node.pipelines.routeTitle",{defaultMessage:"Logstash - {nodeName} - Pipelines",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),v=se.i18n.translate("xpack.monitoring.logstash.node.pipelines.pageTitle",{defaultMessage:"Logstash node pipelines: {nodeName}",values:{nodeName:j.nodeSummary?j.nodeSummary.name:""}}),y=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash/node/${i.params.uuid}/pipelines`,n=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...b()})}));f(n),h(n.totalPipelineCount)}),[c,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,b,h,i.params.uuid]);return Object(o.useEffect)((()=>{p&&j.nodeSummary&&g(p.cluster_name,{inLogstash:!0,instance:j.nodeSummary.host,name:"nodes"})}),[p,j,g]),Object(x.jsx)(Eo,{instance:j,title:O,pageTitle:v,getPageData:y,cluster:p},j.pipelines&&Object(x.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},Object(x.jsx)(pipeline_listing_PipelineListing,n()({className:"monitoringLogstashPipelinesTable",onBrush:u,zoomInfo:d,stats:j.nodeSummary,data:j.pipelines,statusComponent:So},m(),{upgradeMessage:(k=j.nodeSummary.version,!Array.isArray(k)||0===k.length||k.some(Po)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher.")}))));var k};class overview_overview_Overview extends o.PureComponent{render(){const{stats:e,metrics:t,...s}=this.props,a=[t.logstash_cluster_events_input_rate,t.logstash_cluster_events_output_rate,t.logstash_cluster_events_latency];return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.overview.heading",defaultMessage:"Logstash Overview"}))),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(_o,{stats:e})),Object(x.jsx)(m.EuiSpacer,{size:"m"}),Object(x.jsx)(m.EuiPanel,null,Object(x.jsx)(m.EuiFlexGrid,{columns:2,gutterSize:"s"},a.map(((e,t)=>Object(x.jsx)(m.EuiFlexItem,{key:t},Object(x.jsx)(Ms,n()({series:e},s)),Object(x.jsx)(m.EuiSpacer,null))))))))}}const zo=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{zoomInfo:i,onBrush:n}=Aa(),{services:r}=Object(a.useKibana)(),l=s.cluster_uuid,c=s.ccs,u=Object(P.find)(e,{cluster_uuid:l}),{generate:d}=re(),[p,g]=Object(o.useState)(null),m=se.i18n.translate("xpack.monitoring.logstash.overview.title",{defaultMessage:"Logstash"}),b=se.i18n.translate("xpack.monitoring.logstash.overview.pageTitle",{defaultMessage:"Logstash overview"}),h=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${l}/logstash`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:c,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})}));g(i)}),[c,l,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http]);return Object(o.useEffect)((()=>{u&&d(u.cluster_name,{inLogstash:!0})}),[u,p,d]),Object(x.jsx)(Eo,{title:m,pageTitle:b,getPageData:h,cluster:u},Object(x.jsx)("div",{"data-test-subj":"logstashOverviewPage"},(e=>{if(null===e)return null;const{clusterStatus:t,metrics:s,logs:a}=e||{};return Object(x.jsx)(overview_overview_Overview,{stats:t,metrics:s,logs:a,onBrush:n,zoomInfo:i})})(p)))};function Ro(e,t=0,s=null){const a=[];return e.forEach((e=>{a.push(...e.toList(t,s))})),a}class list_List{constructor(e,t,s,a){this.inputs=e,this.filters=t,this.outputs=s,this.queue=a}static fromPipeline(e){const{inputStatements:t,filterStatements:s,outputStatements:a,queue:i}=e;return new list_List(Ro(t),Ro(s),Ro(a),i)}}function Ao({vertex:e,onHide:t,timeseriesTooltipXValueFormatter:s}){return Object(x.jsx)(m.EuiFlyout,{size:"s",onClose:t},Object(x.jsx)(m.EuiFlyoutHeader,null,Object(x.jsx)(m.EuiFlexGroup,{alignItems:"baseline",gutterSize:"s"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},function(e){return Object(x.jsx)(m.EuiIcon,{type:e.iconType,className:"lspvDetailDrawerIcon"})}(e)),Object(x.jsx)(m.EuiFlexItem,null,Object(x.jsx)(m.EuiTitle,null,Object(x.jsx)("h2",null,function(e){switch(e.typeString){case"plugin":return`${e.title} ${e.pluginType}`;case"if":case"queue":return e.title}}(e)))))),Object(x.jsx)(m.EuiFlyoutBody,null,Object(x.jsx)(m.EuiText,null,function(e){switch(e.typeString){case"plugin":return function(e){return e.hasExplicitId?Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.vertexIdDescription",defaultMessage:"This {vertexType}'s ID is {vertexId}.",values:{vertexType:e.typeString,vertexId:Object(x.jsx)(m.EuiBadge,null,e.id)}})):Object(x.jsx)("div",null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.specifyVertexIdDescription",defaultMessage:"This {vertexType} does not have an ID explicitly specified. Specifying an ID allows you to track differences across pipeline changes. You can explicitly specify an ID for this plugin like so:",values:{vertexType:e.typeString}})),Object(x.jsx)(m.EuiCodeBlock,null,e.name," ",'{\n  id => "mySpecialId"\n}'),Object(x.jsx)(m.EuiSpacer,null))}(e);case"if":return function(e){const t=`if (${e.subtitle}) {\n  ...\n}`;return Object(x.jsx)("div",null,Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.conditionalStatementDescription",defaultMessage:"This is a conditional statement in your pipeline."})),Object(x.jsx)(m.EuiCodeBlock,null,t),Object(x.jsx)(m.EuiSpacer,null))}(e);case"queue":return Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.structureDescription",defaultMessage:"This is an internal structure used by Logstash to buffer events between inputs and the rest of the pipeline."}))}}(e),function(e,t){switch(e.typeString){case"plugin":return function(e,t){const s=e=>zt(e,"0.[00]a","ms/e"),a=Array.isArray(e.stats.millis_per_event.data)&&e.stats.millis_per_event.data.length>0?Object(P.last)(e.stats.millis_per_event.data)[1]:null,i="input"===e.pluginType?null:Object(x.jsx)(m.EuiTableRow,{key:"events_latency"},Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsLatencyLabel",defaultMessage:"Events Latency"})),Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(x.jsx)(sparkline_Sparkline,{series:e.stats.millis_per_event.data,options:{xaxis:e.stats.millis_per_event.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:s}}))),Object(x.jsx)(m.EuiTableRowCell,null,s(a))),n=e=>zt(e,"0.[0]a","e/s"),o=Object(x.jsx)(m.EuiTableRow,{key:"events_out_rate"},Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedRateLabel",defaultMessage:"Events Emitted Rate"})),Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(x.jsx)(sparkline_Sparkline,{series:e.eventsPerSecond.data,options:{xaxis:e.eventsPerSecond.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:n}}))),Object(x.jsx)(m.EuiTableRowCell,null,n(e.latestEventsPerSecond))),r=e=>zt(e,"0a","events"),l=Array.isArray(e.stats.events_in.data)&&e.stats.events_in.data.length>0?Object(P.last)(e.stats.events_in.data)[1]:null,c="input"===e.pluginType?null:Object(x.jsx)(m.EuiTableRow,{key:"events_in"},Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsReceivedLabel",defaultMessage:"Events Received"})),Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(x.jsx)(sparkline_Sparkline,{series:e.stats.events_in.data,options:{xaxis:e.stats.events_in.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:r}}))),Object(x.jsx)(m.EuiTableRowCell,null,r(l))),u=r,d=Array.isArray(e.stats.events_out.data)&&e.stats.events_out.data.length>0?Object(P.last)(e.stats.events_out.data)[1]:null,p=Object(x.jsx)(m.EuiTableRow,{key:"events_out"},Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.eventsEmittedLabel",defaultMessage:"Events Emitted"})),Object(x.jsx)(m.EuiTableRowCell,null,Object(x.jsx)("div",{className:"lspvDetailDrawerSparklineContainer"},Object(x.jsx)(sparkline_Sparkline,{series:e.stats.events_out.data,options:{xaxis:e.stats.events_out.timeRange},tooltip:{enabled:!0,xValueFormatter:t,yValueFormatter:u}}))),Object(x.jsx)(m.EuiTableRowCell,null,u(d)));return Object(x.jsx)(m.EuiTable,null,Object(x.jsx)(m.EuiTableBody,null,i,o,c,p))}(e,t);case"if":return Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForIfDescription",defaultMessage:"There are currently no metrics to show for this if condition."}));case"queue":return Object(x.jsx)("p",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.detailDrawer.noMetricsForQueueDescription",defaultMessage:"There are currently no metrics to show for the queue."}))}}(e,s))))}function Bo({iconType:e,title:t}){return Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s",responsive:!1,alignItems:"baseline"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiIcon,{type:e})),Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiTitle,{size:"s"},Object(x.jsx)("h2",null,t))))}function Vo(){return Object(x.jsx)("div",null,Object(x.jsx)(Bo,{iconType:"logstashQueue",title:"Queue"}),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(m.EuiText,{className:"monPipelineViewer__queueMessage"},Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline.queue.noMetricsDescription",defaultMessage:"Queue metrics not available"})))}s(125),s(130);class Statement{constructor(e){const{id:t,hasExplicitId:s,stats:a,meta:i}=e;this.id=t,this.hasExplicitId=s,this.stats=a,this.meta=i,this.vertex=e}}class Element{constructor(e,t,s,a){this.id=e,this.statement=t,this.depth=s,this.parentId=a}}class plugin_element_PluginElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}class plugin_statement_PluginStatement extends Statement{constructor(e){super(e);const{pluginType:t,name:s}=e;this.pluginType=t,this.name=s}toList(e,t){return[new plugin_element_PluginElement(this,e,t)]}static fromPipelineGraphVertex(e){return new plugin_statement_PluginStatement(e)}}function Uo(e){return e?"arrowRight":"arrowDown"}function $o(e){const{collapse:t,expand:s,id:a,isCollapsed:i}=e;return Object(x.jsx)(m.EuiFlexGroup,{responsive:!1,gutterSize:"none",alignItems:"center",className:"monPipelineViewer__collapsibleStatement"},Object(x.jsx)(m.EuiFlexItem,{key:a,grow:!1},Object(x.jsx)(m.EuiButtonIcon,{"aria-label":"collapse",color:"text",iconType:Uo(i),onClick:()=>{i?s(a):t(a)},size:"s"})),e.children)}s(135);class if_element_IfElement extends Element{constructor(e,t,s){const{id:a}=e;super(a,e,t,s)}}var Ho=s(38),Wo=s.n(Ho);function qo({className:e,warning:t,value:s}){const a=Wo()("monPipelineViewer__metric",e);let i;return i=t?Object(x.jsx)(m.EuiBadge,{color:"warning",className:e},s):Object(x.jsx)(m.EuiText,{size:"s",color:"subdued",className:a},Object(x.jsx)("span",null,s)),Object(x.jsx)(m.EuiFlexItem,{className:"monPipelineViewer__metricFlexItem",grow:!1},i)}function Go({statement:{hasExplicitId:e,id:t,name:s,pluginType:a,vertex:i},onShowVertexDetails:n}){const o=function(e,t){return"input"===e?function({latestEventsPerSecond:e}){return[Object(x.jsx)(qo,{key:"eventsEmitted",className:"monPipelineViewer__metric--eventsEmitted",value:zt(e,"0.[00]a","e/s emitted")})]}(t):function(e){const{latestMillisPerEvent:t,latestEventsPerSecond:s,percentOfTotalProcessorTime:a}=e;return[Object(x.jsx)(qo,{key:"cpuMetric",className:"monPipelineViewer__metric--cpuTime",warning:e.isTimeConsuming(),value:zt(Math.round(a||0),"0","%",{prependSpace:!1})}),Object(x.jsx)(qo,{key:"eventMillis",className:"monPipelineViewer__metric--eventMillis",warning:e.isSlow(),value:zt(t,"0.[00]a","ms/e")}),Object(x.jsx)(qo,{key:"eventsReceived",className:"monPipelineViewer__metric--events",value:zt(s,"0.[00]a","e/s received")})]}(t)}(a,i),r=()=>{n(i)};return Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",className:"monPipelineViewer__pluginStatement",gutterSize:"none",justifyContent:"spaceBetween"},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiButtonEmpty,{"aria-label":s,className:"monPipelineViewer__plugin",color:"primary",flush:"left",iconType:"dot",onClick:r,size:"xs"},Object(x.jsx)("span",null,s))),e&&Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiBadge,{onClick:r,onClickAriaLabel:se.i18n.translate("xpack.monitoring.logstash.pipelineStatement.viewDetailsAriaLabel",{defaultMessage:"View details"})},t)))),o&&Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiFlexGroup,{gutterSize:"s"},o)))}function Ko(e,t){return Object(x.jsx)(m.EuiFlexItem,{grow:!1,key:"statementName"},Object(x.jsx)(m.EuiButtonEmpty,{"aria-label":e,color:"text",size:"xs",onClick:t,flush:"left"},Object(x.jsx)("span",{className:"monPipelineViewer__conditional"},e)))}function Jo(e){const{depth:t}=e.element;return Object(x.jsx)("li",{className:"monPipelineViewer__listItem"},Object(x.jsx)("div",{className:"monPipelineViewer__spaceContainer"},function(e){const t=[];for(let s=0;s<e;s+=1)t.push(Object(x.jsx)("div",{key:`spacer_${s}`,className:"monPipelineViewer__spacer"}));return t}(t)),function({collapse:e,element:t,element:{id:s,statement:a,statement:{vertex:i}},expand:n,isCollapsed:o,onShowVertexDetails:r}){if(a instanceof plugin_statement_PluginStatement)return Object(x.jsx)(Go,{statement:a,onShowVertexDetails:r});const l=function(e,t,s,a){const i=()=>{a(s)};return e?function({condition:e},t){return[Ko("if",t),Object(x.jsx)(m.EuiFlexItem,{key:"ifContent",grow:!1},Object(x.jsx)(m.EuiCodeBlock,{fontSize:"s",paddingSize:"none",transparentBackground:!0},e))]}(t,i):Ko("else",i)}(t instanceof if_element_IfElement,a,i,r);return Object(x.jsx)($o,{expand:n,collapse:e,isCollapsed:o,id:s},l)}(e))}s(140),s(145),s(150);class statement_list_StatementList extends r.a.PureComponent{constructor(e){super(e),G()(this,"expand",(e=>{const t=new Set(this.state.collapsedIds);t.delete(e),this.updateCollapsedElement(t)})),G()(this,"collapse",(e=>{const t=new Set(this.state.collapsedIds);t.add(e),this.updateCollapsedElement(t)})),G()(this,"updateCollapsedElement",(e=>{const{elements:t}=this.props,s=function(e,t){const s=new Set;return e.forEach((({id:e,parentId:a})=>{(t.has(a)||s.has(a))&&s.add(e)})),s}(t,e);this.setState({collapsedIds:e,collapsedChildIds:s})})),G()(this,"elementIsCollapsed",(e=>this.state.collapsedIds.has(e))),G()(this,"renderStatement",(e=>{const{id:t,parentId:s}=e,{onShowVertexDetails:a}=this.props;return this.state.collapsedIds.has(s)||this.state.collapsedChildIds.has(s)?null:Object(x.jsx)(Jo,{key:t,element:e,collapse:this.collapse,expand:this.expand,isCollapsed:this.elementIsCollapsed(t),onShowVertexDetails:a})})),this.state={collapsedIds:new Set,collapsedChildIds:new Set}}render(){const{elements:e}=this.props;return Object(x.jsx)("ul",{className:"monPipelineViewer__list"},e.map(this.renderStatement))}}function Yo({iconType:e,headingText:t,elements:s,onShowVertexDetails:a}){return s.length?Object(x.jsx)("div",{"data-test-subj":`pipelineViewerSection_${t}`},Object(x.jsx)(Bo,{iconType:e,title:t}),Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(statement_list_StatementList,{elements:s,onShowVertexDetails:a})):null}class pipeline_viewer_PipelineViewer extends r.a.Component{constructor(){super(),G()(this,"renderDetailDrawer",(()=>this.props.detailVertex?Object(x.jsx)(Ao,{vertex:this.props.detailVertex,onHide:()=>this.props.setDetailVertexId(void 0),timeseriesTooltipXValueFormatter:this.props.timeseriesTooltipXValueFormatter}):null)),this.state={detailDrawer:{vertex:null}}}render(){const{inputs:e,filters:t,outputs:s,queue:a}=this.props.pipeline;return Object(x.jsx)(m.EuiPage,null,Object(x.jsx)(m.EuiPageBody,null,Object(x.jsx)(m.EuiScreenReaderOnly,null,Object(x.jsx)("h1",null,Object(x.jsx)(de.FormattedMessage,{id:"xpack.monitoring.logstash.pipeline_viewer.heading",defaultMessage:"Logstash pipelines"}))),Object(x.jsx)(m.EuiPageSection,{alignment:"center",className:"monPipelineViewer"},Object(x.jsx)(Yo,{iconType:"logstashInput",headingText:se.i18n.translate("xpack.monitoring.logstash.pipelineViewer.inputsTitle",{defaultMessage:"Inputs"}),elements:e,onShowVertexDetails:this.props.setDetailVertexId}),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(Vo,{queue:a}),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(Yo,{iconType:"logstashFilter",headingText:se.i18n.translate("xpack.monitoring.logstash.pipelineViewer.filtersTitle",{defaultMessage:"Filters"}),elements:t,onShowVertexDetails:this.props.setDetailVertexId}),Object(x.jsx)(m.EuiSpacer,null),Object(x.jsx)(Yo,{iconType:"logstashOutput",headingText:se.i18n.translate("xpack.monitoring.logstash.pipelineViewer.outputsTitle",{defaultMessage:"Outputs"}),elements:s,onShowVertexDetails:this.props.setDetailVertexId}),this.renderDetailDrawer())))}}function Qo(e,t){return e&&e.pipelineStage===t}class else_element_ElseElement extends Element{constructor(e,t,s){const{id:a}=e;super(`${a}_else`,e,t,s)}}function Xo(e,t,s,a){e.forEach((e=>{let i=e;for(;Qo(i,a)&&i!==s;)t.push(er(i,a)),i=i.next}))}function Zo(e,t,s,a){t.forEach((t=>{e.push(...t.toList(s,a))}))}class if_statement_IfStatement extends Statement{constructor(e,t,s){super(e);const{name:a}=e;this.condition=a,this.trueStatements=t,this.elseStatements=s}toList(e,t){const s=[],a=new if_element_IfElement(this,e,t);s.push(a);const i=e+1;if(Zo(s,this.trueStatements,i,a.id),this.elseStatements.length){const a=new else_element_ElseElement(this,e,t);s.push(a),Zo(s,this.elseStatements,i,a.id)}return s}static fromPipelineGraphVertex(e,t){const s=[],a=[],{trueOutgoingVertices:i,falseOutgoingVertices:n}=e,o=e.next;return Xo(i,s,o,t),Xo(n,a,o,t),new if_statement_IfStatement(e,s,a)}}class pipeline_queue_Queue extends Statement{static fromPipelineGraphVertex(e){return new pipeline_queue_Queue(e)}}function er(e,t){switch(e.typeString){case"plugin":return plugin_statement_PluginStatement.fromPipelineGraphVertex(e,t);case"if":return if_statement_IfStatement.fromPipelineGraphVertex(e,t);case"queue":return pipeline_queue_Queue.fromPipelineGraphVertex(e,t);default:throw new Error(`Unknown vertex class: ${e.typeString}`)}}class Vertex{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get name(){return this.json.config_name}get id(){return this.json.id}get subtitle(){return this.id}get incomingEdges(){return this.graph.edgesByTo[this.json.id]||[]}get incomingVertices(){return this.incomingEdges.map((e=>e.from))}get outgoingEdges(){return this.graph.edgesByFrom[this.json.id]||[]}get outgoingVertices(){return this.outgoingEdges.map((e=>e.to))}get meta(){return this.json.meta}get stats(){return this.json.stats||{}}descendants(){const e=[],t=[],s=[this],a={};for(;s.length>0;)s.pop().outgoingEdges.forEach((i=>{t.push(i);const n=i.to;!0!==a[n.id]&&(e.push(n),a[n.id]=!0,s.push(n))}));return{vertices:e,edges:t}}get hasExplicitId(){return Boolean(this.json.explicit_id)}}class queue_vertex_QueueVertex extends Vertex{get typeString(){return"queue"}get title(){return"queue"}get iconType(){return"logstashQueue"}get next(){return this.outgoingVertices}}class Pipeline{constructor(e,t,s,a){this.inputStatements=e,this.filterStatements=t,this.outputStatements=s,this.queue=a}static fromPipelineGraph(e){const t=function(e){return e.getVertices().filter((e=>"input"===e.pipelineStage)).map(er)}(e),s=function(e){const t=e.getVertices().filter((e=>"filter"===e.pipelineStage)),s=e.hasQueueVertex?t.find((e=>e.incomingVertices.every((e=>e instanceof queue_vertex_QueueVertex)))):t.find((e=>0===e.incomingVertices.length));if(!s)return[];const a=[];let i=s;for(;Qo(i,"filter");)a.push(er(i,"filter")),i=i.next;return a}(e),a=function(e){return e.getVertices().filter((e=>"output"===e.pipelineStage&&!e.incomingVertices.some((e=>"output"===e.pipelineStage)))).map((e=>er(e,"output")))}(e),i=function(e){return e.hasQueueVertex?er(e.queueVertex):null}(e);return new Pipeline(t,s,a,i)}}class plugin_vertex_PluginVertex extends Vertex{get typeString(){return"plugin"}get name(){return this.json.config_name}get title(){return this.name}get pluginType(){return this.json.plugin_type}get isInput(){return"input"===this.pluginType}get isFilter(){return"filter"===this.pluginType}get isOutput(){return"output"===this.pluginType}get isProcessor(){return this.isFilter||this.isOutput}get latestMillisPerEvent(){return Object(P.get)(this.stats,"millis_per_event")}get percentOfTotalProcessorTime(){return Object(P.get)(this.stats,"percent_of_total_processor_duration")}get eventsPerMillisecond(){return this.isInput?this.stats.events_out_per_millisecond:this.stats.events_in_per_millisecond}get eventsPerSecond(){if(!this.eventsPerMillisecond.hasOwnProperty("data"))return 1e3*this.eventsPerMillisecond;const e={...this.eventsPerMillisecond};return e.data=this.eventsPerMillisecond.data.map((([e,t])=>[e,1e3*t])),e}get latestEventsPerSecond(){if(!this.eventsPerSecond.hasOwnProperty("data"))return this.eventsPerSecond;const e=this.eventsPerSecond.data.length;return this.eventsPerSecond.data[e-1][1]}isTimeConsuming(){const e=1/this.graph.processorVertices.length*2;return this.percentOfTotalProcessorTime>e}isSlow(){const e=this.graph.processorVertices.length;if(0===e)return 0;const t=this.graph.processorVertices.reduce(((e,t)=>e+t.latestMillisPerEvent||0),0)/e,s=this.graph.processorVertices.reduce(((e,s)=>{const a=(s.latestMillisPerEvent||0)-t;return e+a*a}),0)/e,a=Math.sqrt(s);return(this.latestMillisPerEvent-t)/a>2}get iconType(){switch(this.pluginType){case"input":return"logstashInput";case"filter":return"logstashFilter";case"output":return"logstashOutput";default:throw new Error(`Unknown plugin type ${this.pluginType}! This shouldn't happen!`)}}get next(){return(this.outgoingEdges[0]||{}).to}}class if_vertex_IfVertex extends Vertex{get typeString(){return"if"}get name(){return this.json.condition}get iconType(){return"logstashIf"}get title(){return"if"}get subtitle(){return this.name}get trueEdge(){return this.outgoingEdges.find((e=>!0===e.when))}get trueEdges(){return this.outgoingEdges.filter((e=>!0===e.when))}get falseEdge(){return this.outgoingEdges.find((e=>!1===e.when))}get falseEdges(){return this.outgoingEdges.filter((e=>!1===e.when))}get trueOutgoingVertex(){return this.trueEdge?this.trueEdge.to:null}get trueOutgoingVertices(){return this.trueEdges.map((e=>e.to))}get falseOutgoingVertex(){return this.falseEdge?this.falseEdge.to:null}get falseOutgoingVertices(){return this.falseEdges.map((e=>e.to))}get next(){const e=this.trueOutgoingVertex?this.trueOutgoingVertex.descendants().vertices:[],t=this.falseOutgoingVertex?this.falseOutgoingVertex.descendants().vertices:[];return e.unshift(this.trueOutgoingVertex),t.unshift(this.falseOutgoingVertex),Object(P.intersection)(e,t)[0]}}function tr(e,t){const s=t.type;switch(s){case"plugin":return new plugin_vertex_PluginVertex(e,t);case"if":return new if_vertex_IfVertex(e,t);case"queue":return new queue_vertex_QueueVertex(e,t);default:throw new Error(`Unknown vertex type ${s}! This shouldn't happen!`)}}class Edge{constructor(e,t){this.graph=e,this.update(t)}update(e){this.json=e}get id(){return this.json.id}get from(){return this.graph.verticesById[this.fromId]}get fromId(){return this.json.from}get to(){return this.graph.verticesById[this.toId]}get toId(){return this.json.to}}class boolean_edge_BooleanEdge extends Edge{get when(){return this.json.when}get isTrue(){return!0===this.when}get isFalse(){return!1===this.when}}class graph_Graph{constructor(){this.json=null,this.verticesById={},this.edgesById={},this.edgesByFrom={},this.edgesByTo={}}getVertexById(e){return this.verticesById[e]}getVertices(){return void 0===this.vertexCache&&(this.vertexCache=Object.values(this.verticesById)),this.vertexCache}get queueVertex(){return this.getVertices().find((e=>e instanceof queue_vertex_QueueVertex))}get processorVertices(){return this.getVertices().filter((e=>e.isProcessor))}get edges(){return Object.values(this.edgesById)}update(e){this.json=e,e.vertices.forEach((e=>{const t=this.verticesById[e.id];if(void 0!==t)t.update(e);else{const t=tr(this,e);this.verticesById[e.id]=t}})),e.edges.forEach((e=>{const t=this.edgesById[e.id];if(void 0!==t)t.update(e);else{const t=function(e,t){const s=t.type;switch(s){case"plain":return new Edge(e,t);case"boolean":return new boolean_edge_BooleanEdge(e,t);default:throw new Error(`Unknown edge type ${s}! This shouldn't happen!`)}}(this,e);this.edgesById[e.id]=t,void 0===this.edgesByFrom[t.from.json.id]&&(this.edgesByFrom[t.from.json.id]=[]),this.edgesByFrom[t.from.json.id].push(t),void 0===this.edgesByTo[t.to.json.id]&&(this.edgesByTo[t.to.json.id]=[]),this.edgesByTo[t.to.json.id].push(t)}})),this.annotateVerticesWithStages()}get startVertices(){return this.getVertices().filter((e=>0===e.incomingEdges.length))}get endVertices(){return this.getVertices().filter((e=>0===e.outgoingEdges.length))}get hasQueueVertex(){return!!this.queueVertex}annotateVerticesWithStages(){this.annotateInputStageVertices(),this.annotateOutputStageVertices(),this.annotateFilterStageVertices()}annotateInputStageVertices(){this.hasQueueVertex&&this.startVertices.forEach((e=>e.pipelineStage="input"))}annotateOutputStageVertices(){if(1===this.endVertices.length&&this.endVertices[0]instanceof queue_vertex_QueueVertex)return;if(this.endVertices.every((e=>"filter"===e.pluginType)))return;const e=[...this.endVertices];for(;e.length>0;){const t=e.shift(),s=t.incomingVertices,a=s.some((e=>e instanceof plugin_vertex_PluginVertex&&"filter"===e.pluginType)),i=s.some((e=>e instanceof queue_vertex_QueueVertex)),n=0===s.length;a||i||n?(t.pipelineStage="output",t.descendants().vertices.forEach((e=>e.pipelineStage="output"))):e.push(...s)}}annotateFilterStageVertices(){const e=[];for(this.hasQueueVertex?e.push(...this.queueVertex.outgoingVertices):e.push(...this.startVertices);e.length>0;){const t=e.shift();t.pipelineStage||(t.pipelineStage="filter",e.push(...t.outgoingVertices))}}}class config_Config{constructor(){this.graph=new graph_Graph}update(e){this.json=e,this.graph.update(e.graph)}}class pipeline_state_PipelineState{constructor(e){this.config=new config_Config,this.update(e)}update(e){this.config.update(e.representation)}}const sr=e=>{const{pipelineHash:t,pipelineVersions:s,onChangePipelineHash:a}=e;return Object(x.jsx)(m.EuiFlexGroup,null,Object(x.jsx)(m.EuiFlexItem,{grow:!1},Object(x.jsx)(m.EuiSelect,{value:t,options:s.map((e=>({text:se.i18n.translate("xpack.monitoring.logstashNavigation.pipelineVersionDescription",{defaultMessage:"Version active {relativeLastSeen} and first seen {relativeFirstSeen}",values:{relativeLastSeen:e.relativeLastSeen,relativeFirstSeen:e.relativeFirstSeen}}),value:e.hash}))),onChange:({target:e})=>a(e.value)})))},ar=({clusters:e})=>{var t;const s=Object(C.useRouteMatch)(),{hash:i,id:n}=s.params,r=Object(o.useContext)(X),{services:l}=Object(a.useKibana)(),c=r.cluster_uuid,{minIntervalSeconds:u}=Object(o.useContext)($),d=Object(a.useUiSetting)("dateFormat"),[p,g]=Object(o.useState)(null),b=r.ccs,h=Object(P.find)(e,{cluster_uuid:c}),[j,f]=Object(o.useState)({}),[O,v]=Object(o.useState)(void 0),{updateTotalItemCount:y}=Xa("logstash.pipelines"),k=se.i18n.translate("xpack.monitoring.logstash.pipeline.routeTitle",{defaultMessage:"Logstash - Pipeline"}),M=se.i18n.translate("xpack.monitoring.logstash.pipeline.pageTitle",{defaultMessage:"Logstash pipeline: {pipeline}",values:{pipeline:j.pipeline?j.pipeline.id:""}}),E=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=l.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=i?`../api/monitoring/v1/clusters/${c}/logstash/pipeline/${n}/${i}`:`../api/monitoring/v1/clusters/${c}/logstash/pipeline/${n}`,o=await(null===(t=l.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:b,detailVertexId:O||void 0,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()}})})),r=o;r.versions=r.versions.map((e=>{const t=nt(e.firstSeen,U.c),s=nt(e.lastSeen,U.c),a=2*u,i=Date.now()-e.lastSeen<=1e3*a;return{...e,relativeFirstSeen:se.i18n.translate("xpack.monitoring.logstash.pipeline.relativeFirstSeenAgoLabel",{defaultMessage:"{relativeFirstSeen} ago",values:{relativeFirstSeen:t}}),relativeLastSeen:i?se.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenNowLabel",{defaultMessage:"now"}):se.i18n.translate("xpack.monitoring.logstash.pipeline.relativeLastSeenAgoLabel",{defaultMessage:"until {relativeLastSeen} ago",values:{relativeLastSeen:s}})}})),f(r),y(o.totalNodeCount)}),[b,c,l.http,y,O,u,i,n,null===(t=l.data)||void 0===t?void 0:t.query.timefilter.timefilter]);Object(o.useEffect)((()=>{j.pipeline&&g(new pipeline_state_PipelineState(j.pipeline))}),[j]);const{generate:S}=re(),w=Object(o.useCallback)((e=>{v(e?e.id:null)}),[]);Object(o.useEffect)((()=>{void 0!==O&&E()}),[O,E]);const T=Object(o.useCallback)((e=>{window.location.hash=$e(`#/logstash/pipelines/${n}/${e}`)}),[n]);return Object(o.useEffect)((()=>{h&&S(h.cluster_name,{inLogstash:!0,page:"pipeline"})}),[h,j,S]),Object(x.jsx)(Eo,{tabsDisabled:!0,title:k,pageTitle:M,getPageData:E,cluster:h},Object(x.jsx)("div",null,Object(x.jsx)(sr,{pipelineVersions:j.versions,onChangePipelineHash:T,pipelineHash:i})),p&&Object(x.jsx)("div",null,Object(x.jsx)(m.EuiSpacer,{size:"s"}),Object(x.jsx)(pipeline_viewer_PipelineViewer,{pipeline:list_List.fromPipeline(Pipeline.fromPipelineGraph(p.config.graph)),timeseriesTooltipXValueFormatter:e=>it()(e).format(d),setDetailVertexId:w,detailVertex:j.vertex?tr(null,j.vertex):null})))},ir=({clusters:e})=>{var t;const s=Object(o.useContext)(X),{onBrush:i}=Aa(),{services:r}=Object(a.useKibana)(),l=Object(a.useUiSetting)("dateFormat"),c=s.cluster_uuid,u=s.ccs,d=Object(P.find)(e,{cluster_uuid:c}),[p,g]=Object(o.useState)(null),{getPaginationTableProps:m,getPaginationRouteOptions:b,updateTotalItemCount:h}=Xa("logstash.pipelines"),j=se.i18n.translate("xpack.monitoring.logstash.pipelines.routeTitle",{defaultMessage:"Logstash Pipelines"}),f=se.i18n.translate("xpack.monitoring.logstash.pipelines.pageTitle",{defaultMessage:"Logstash pipelines"}),{generate:O}=re(),v=Object(o.useCallback)((async()=>{var e,t;const s=null===(e=r.data)||void 0===e?void 0:e.query.timefilter.timefilter.getBounds(),a=`../api/monitoring/v1/clusters/${c}/logstash/pipelines`,i=await(null===(t=r.http)||void 0===t?void 0:t.fetch(a,{method:"POST",body:JSON.stringify({ccs:u,timeRange:{min:s.min.toISOString(),max:s.max.toISOString()},...b()})}));g(i),h(i.totalPipelineCount)}),[u,c,null===(t=r.data)||void 0===t?void 0:t.query.timefilter.timefilter,r.http,b,h]);return Object(o.useEffect)((()=>{d&&O(d.cluster_name,{inLogstash:!0})}),[d,p,O]),Object(x.jsx)(Eo,{title:j,pageTitle:f,getPageData:v,cluster:d},Object(x.jsx)("div",{"data-test-subj":"logstashPipelinesListing"},(e=>{if(null===e)return null;const{clusterStatus:t,pipelines:s}=e||{},a=e?(o=t.versions,!Array.isArray(o)||0===o.length||o.some(Po)?null:"Pipeline monitoring is only available in Logstash version 6.0.0 or higher."):null;var o;return Object(x.jsx)(pipeline_listing_PipelineListing,n()({className:"monitoringLogstashPipelinesTable",onBrush:e=>i({xaxis:e}),stats:t,data:s},m(),{upgradeMessage:a,dateFormat:l}))})(p)))};class enabler_Enabler{constructor(e,t){G()(this,"http",void 0),G()(this,"updateModel",void 0),this.http=e,this.updateModel=t}async enableCollectionInterval(){try{this.updateModel({isCollectionIntervalUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_interval",{method:"PUT"}),this.updateModel({isCollectionIntervalUpdated:!0,isCollectionIntervalUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionIntervalUpdated:!1,isCollectionIntervalUpdating:!1})}}async enableCollectionEnabled(){try{this.updateModel({isCollectionEnabledUpdating:!0}),await this.http.fetch("../api/monitoring/v1/elasticsearch_settings/set/collection_enabled",{method:"PUT"}),this.updateModel({isCollectionEnabledUpdated:!0,isCollectionEnabledUpdating:!1})}catch(e){this.updateModel({errors:e.data,isCollectionEnabledUpdated:!1,isCollectionEnabledUpdating:!1})}}}const nr=[U.n],or=[{message:se.i18n.translate("xpack.monitoring.noData.checker.clusterSettings",{defaultMessage:"Checking cluster settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/cluster"},{message:se.i18n.translate("xpack.monitoring.noData.checker.nodesSettings",{defaultMessage:"Checking nodes settings API on production cluster"}),api:"../api/monitoring/v1/elasticsearch_settings/check/nodes"}],rr=()=>{const e=se.i18n.translate("xpack.monitoring.noData.routeTitle",{defaultMessage:"Setup Monitoring"}),{services:t}=Object(a.useKibana)(),[s,i]=Object(o.useState)(!1),[r,l]=Object(o.useState)({errors:[],checkMessage:null,isLoading:!0,isCollectionEnabledUpdating:!1,isCollectionEnabledUpdated:!1,isCollectionIntervalUpdating:!1,isCollectionIntervalUpdated:!1}),{update:c}=re();c([{"data-test-subj":"breadcrumbClusters",text:"Clusters",href:"#/home",ignoreGlobalState:!0}]);const u=Object(o.useContext)(X),d=Ta();we(u,t.http,d);const p=Object(o.useCallback)((e=>{l((t=>{const s={...t};return Object.keys(e).forEach((t=>{Array.isArray(s[t])?s[t].push(e[t]):s[t]=e[t]})),s}))}),[l]),g=Object(o.useCallback)((async()=>{let e;try{const e=await async function(e){var t,s;const a=null===(t=e.data)||void 0===t?void 0:t.query.timefilter.timefilter.getBounds(),i=a.min.toISOString(),n=a.max.toISOString();return function(e){return e.map(cr)}(await(null===(s=e.http)||void 0===s?void 0:s.fetch("../api/monitoring/v1/clusters",{method:"POST",body:JSON.stringify({css:void 0,timeRange:{min:i,max:n},codePaths:nr})})))}(t);if(e&&e.length)return void i(!0)}catch(t){t&&503===t.status&&(e={property:"custom",message:t.data.message})}e?p({reason:e}):await function(e,t,s){const a=async e=>{s({checkMessage:e.message});const{found:i,reason:n,error:o,errorReason:r}=await async function(e,t){try{const s=await t.fetch(e.api,{method:"GET"}),{found:a,reason:i}=s;return{found:a,reason:i}}catch(e){return{error:!0,found:!1,errorReason:e.body}}}(e,t);if(o){if(s({errors:r}),e.next)return a(e.next)}else{if(i)return s({reason:n,isLoading:!1,checkMessage:null});if(e.next)return a(e.next)}s({reason:null,isLoading:!1,checkMessage:null})},i=lr(e);return a(i[0])}(or,t.http,p)}),[t,p]),m=new enabler_Enabler(t.http,p);return Object(x.jsx)(Da,{title:e,getPageData:g},s?Object(x.jsx)(C.Redirect,{to:"/home"}):Object(x.jsx)(We,n()({},r,{enabler:m,isCloudEnabled:Q.a.shims.isCloud})))},lr=e=>e.map(((t,s)=>{const a=e[s+1];return void 0!==a&&(t.next=a),t}));function cr(e){return e.cluster_uuid===U.Y&&(e.cluster_name="Standalone Cluster"),e}function ur(e,t){return t.search=e.location.search,t}function dr(e,t){return"string"==typeof e?{pathname:e,state:t}:e}const pr=({path:e,component:t,codePaths:s,fetchAllClusters:a,unsetGlobalState:i=!1})=>{const n=Object(o.useContext)(X),r=a?null:n.cluster_uuid,l=Object(C.useLocation)(),{clusters:c,loaded:u}=vo(r,void 0,s),d=Te(void 0,n),p=function(e,t,s=!1){const a=(()=>{const s=Object(P.find)(e,{cluster_uuid:t.cluster_uuid});if(s)return s;const a=Object(P.first)(e);return a&&a.cluster_uuid?a:null})();return a&&a.license?(t.cluster_uuid=s?void 0:a.cluster_uuid,t.ccs=s?void 0:a.ccs,t.save&&t.save(),a):null}(c,n,i);if(u&&!p&&!d)return Object(x.jsx)(C.Redirect,{to:"/no-data"});if(u&&p){if("license"!==l.pathname&&"home"!==l.pathname&&gr(p.license))return Object(x.jsx)(C.Redirect,{to:"/license"});const e=p.isSupported||1===c.length;if("/home"!==l.pathname&&!e)return Object(x.jsx)(C.Redirect,{to:"/home"})}const g=t;return u?Object(x.jsx)(A,{path:e},Object(x.jsx)(g,{clusters:c})):Object(x.jsx)(ko,{staticLoadingState:!0})},gr=e=>{const{expiry_date_in_millis:t}=e;return void 0!==t&&(new Date).getTime()>=t},mr=(e,t,{element:s,history:a,setHeaderActionMenu:i,theme$:n},o)=>{const r=a.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))}));return _.a.render(Object(x.jsx)(br,{core:e,plugins:t,externalConfig:o,setHeaderActionMenu:i,theme$:n}),s),()=>{_.a.unmountComponentAtNode(s),r()}},br=({core:e,plugins:t,externalConfig:s,setHeaderActionMenu:i,theme$:n})=>{const o=function(){const e=Object(K.createHashHistory)({hashType:"slash"}),t=e.push,s=e.replace;return e.push=(s,a)=>t.apply(e,[ur(e,dr(s,a))]),e.replace=(t,a)=>s.apply(e,[ur(e,dr(t,a))]),e}(),r={...e,...t};return Object(x.jsx)(w,e,Object(x.jsx)(a.KibanaContextProvider,{services:r},Object(x.jsx)($.Provider,{value:s},Object(x.jsx)(ee,{query:t.data.query,toasts:e.notifications.toasts,uiSettings:e.uiSettings},Object(x.jsx)(te.Provider,{value:{setHeaderActionMenu:i,theme$:n}},Object(x.jsx)(ce,null,Object(x.jsx)(oe,{history:o},Object(x.jsx)(L,{history:o},Object(x.jsx)(V,null,Object(x.jsx)(A,{path:"/access-denied",component:me}),Object(x.jsx)(A,{path:"/no-data",component:rr}),Object(x.jsx)(A,{path:"/loading",component:ko}),Object(x.jsx)(pr,{path:"/license",component:fo,codePaths:["all"],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/home",component:to,codePaths:["all"],fetchAllClusters:!0,unsetGlobalState:!0}),Object(x.jsx)(pr,{path:"/overview",component:cn,codePaths:["all"],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/ml_jobs",component:Cn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/ccr/:index/shard/:shardId",component:fn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/ccr",component:hn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/indices/:index/advanced",component:kn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/indices/:index",component:wn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/indices",component:_n,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/nodes/:node/advanced",component:Fn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/nodes/:node",component:Dn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch/nodes",component:Ln,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/elasticsearch",component:zn,codePaths:[U.k],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/kibana/instances/:instance",component:oo,codePaths:[U.m],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/kibana/instances",component:bo,codePaths:[U.m],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/kibana",component:jo,codePaths:[U.m],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/beats/beat/:instance",component:vi,codePaths:[U.j],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/beats/beats",component:ki,codePaths:[U.j],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/beats",component:Ti,codePaths:[U.j],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash/nodes",component:Co,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash/node/:uuid/advanced",component:wo,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash/node/:uuid/pipelines",component:Do,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash/node/:uuid",component:To,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash/pipelines/:id/:hash?",component:ar,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash/pipelines",component:ir,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/logstash",component:zo,codePaths:[U.o],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/apm/instances/:instance",component:xi,codePaths:[U.i],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/apm/instances",component:mi,codePaths:[U.i],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/apm",component:Ja,codePaths:[U.i],fetchAllClusters:!1}),Object(x.jsx)(pr,{path:"/enterprise_search",component:Vn,codePaths:[U.l],fetchAllClusters:!1}),Object(x.jsx)(C.Redirect,{to:{pathname:"/loading",search:o.location.search}}))))))))))}}])]);