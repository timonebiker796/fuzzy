/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observabilityShared_bundle_jsonpfunction=window.observabilityShared_bundle_jsonpfunction||[]).push([[5],{68:function(e,l,t){"use strict";t.r(l),t.d(l,"FieldValueSelection",(function(){return p}));var a=t(8),i=t.n(a),n=t(0),o=t.n(n),s=t(2),c=t(1),u=t(12);const r=t(57).euiStyled.div`
  border-radius: ${({theme:e})=>e.eui.euiBorderRadius};
  background: ${({theme:e})=>e.eui.euiColorLightShade};
  padding: 0 ${({theme:e})=>e.eui.euiSizeXS};
`,d=(e,l,t,a)=>{const i={};return null==e||e.forEach((({label:e,count:l})=>{i[e]=l})),Object.entries(i).map((([e,i])=>({label:e,append:a?o.a.createElement(r,null,o.a.createElement(s.EuiText,{size:"xs"},i)):null,...null!=l&&l.includes(e)?{checked:"on"}:{},...null!=t&&t.includes(e)?{checked:"off"}:{}})))};function p({fullWidth:e,label:l,loading:t,query:a,setQuery:i,button:r,width:p,forceOpen:g,setForceOpen:m,anchorPosition:S,singleSelection:E,asFilterButton:v,showCount:y=!0,values:w=[],selectedValue:j,excludedValue:x,allowExclusions:k=!0,compressed:O=!0,useLogicalAND:C,showLogicalConditionSwitch:F=!1,onChange:z}){const{euiTheme:V}=Object(s.useEuiTheme)(),[B,_]=Object(n.useState)((()=>d(w,j,x,y))),[P,A]=Object(n.useState)(!1),[N,T]=Object(n.useState)(C);Object(n.useEffect)((()=>{T(C)}),[C]),Object(n.useEffect)((()=>{_(d(w,j,x,y))}),[JSON.stringify(w),JSON.stringify(j),y,x]);const D=()=>{A(!P)},L=o.a.createElement(s.EuiButton,{style:p?{width:p}:{},size:"m",color:"text",iconType:"arrowDown",iconSide:"right",onClick:D,"data-test-subj":"fieldValueSelectionBtn",fullWidth:e},l),$=(j||[]).length+(x||[]).length,M=o.a.createElement(s.EuiFilterButton,{"aria-label":c.i18n.translate("xpack.observabilityShared.fieldValueSelection.label",{defaultMessage:"expands filter group for {label} filter",values:{label:l}}),hasActiveFilters:$>0,iconType:"arrowDown",numActiveFilters:$,numFilters:B.length,onClick:D},l),I=()=>{const e=(null!=B?B:[]).filter((e=>"on"===(null==e?void 0:e.checked))).map((({label:e})=>e)),l=(null!=B?B:[]).filter((e=>"off"===(null==e?void 0:e.checked))).map((({label:e})=>e)),t=(null!=j?j:[]).length>0||(null!=x?x:[]).length>0;return Object(u.isEqual)(null!=j?j:[],e)&&Object(u.isEqual)(null!=x?x:[],l)&&!(N!==C&&t)};return o.a.createElement(b,null,o.a.createElement(s.EuiPopover,{id:"popover",panelPaddingSize:"none",button:r||(v?M:L),isOpen:P||g,closePopover:()=>{A(!1),null==m||m(!1)},anchorPosition:S,display:"block"},o.a.createElement(s.EuiSelectable,{searchable:!0,singleSelection:E,searchProps:{placeholder:c.i18n.translate("xpack.observabilityShared.fieldValueSelection.placeholder",{defaultMessage:"Filter {label}",values:{label:l}}),compressed:O,onInput:e=>{i(e.target.value)},"data-test-subj":"suggestionInputField"},listProps:{onFocusBadge:!1},options:B,onChange:e=>{_(e)},allowExclusions:k,isLoading:t&&!a&&0===B.length},((e,i)=>o.a.createElement("div",{style:{width:240}},o.a.createElement(s.EuiPopoverTitle,{paddingSize:"s"},i),e,t&&a&&o.a.createElement(s.EuiText,{className:"eui-textCenter",color:"subdued"},c.i18n.translate("xpack.observabilityShared.fieldValueSelection.loading",{defaultMessage:"Loading"})," ",o.a.createElement(s.EuiLoadingSpinner,{size:"m"})),o.a.createElement(s.EuiPopoverFooter,{paddingSize:"s"},F&&o.a.createElement(o.a.Fragment,null,o.a.createElement(s.EuiSpacer,{size:"xs"}),o.a.createElement(f,null,o.a.createElement(h,{label:c.i18n.translate("xpack.observabilityShared.fieldValueSelection.logicalAnd",{defaultMessage:"Use logical AND"}),"data-test-subj":"tagsLogicalOperatorSwitch",checked:Boolean(N),compressed:!0,onChange:e=>{T(e.target.checked)},$_css:V.size.s,$_css2:V.colors.subduedText})),o.a.createElement(s.EuiSpacer,{size:"m"})),o.a.createElement(s.EuiButton,{"data-test-subj":"o11yFieldValueSelectionApplyButton","aria-label":c.i18n.translate("xpack.observabilityShared.fieldValueSelection.apply.label",{defaultMessage:"Apply the selected filters for {label}",values:{label:l}}),fill:!0,fullWidth:!0,size:"s",isDisabled:I(),onClick:()=>{const e=B.filter((e=>"on"===(null==e?void 0:e.checked))),l=B.filter((e=>"off"===(null==e?void 0:e.checked)));F?z(Object(u.map)(e,"label"),Object(u.map)(l,"label"),N):z(Object(u.map)(e,"label"),Object(u.map)(l,"label")),A(!1),null==m||m(!1)}},c.i18n.translate("xpack.observabilityShared.fieldValueSelection.apply",{defaultMessage:"Apply"}))))))))}l.default=p;const b=i.a.div.withConfig({displayName:"Wrapper",componentId:"sc-f2g2fd-0"})(["&&&{.euiButton{width:100%;}}"]);var f=i()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-f2g2fd-1"})({display:"flex",justifyContent:"flex-end"}),h=i()(s.EuiSwitch).withConfig({displayName:"_StyledEuiSwitch",componentId:"sc-f2g2fd-2"})((e=>({flexDirection:"row-reverse",gap:e.$_css,color:e.$_css2})))}}]);