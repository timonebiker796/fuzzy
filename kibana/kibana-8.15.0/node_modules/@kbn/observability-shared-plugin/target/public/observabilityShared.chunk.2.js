/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observabilityShared_bundle_jsonpfunction=window.observabilityShared_bundle_jsonpfunction||[]).push([[2,5],{109:function(e,l,t){"use strict";t.r(l),t.d(l,"FieldValueSuggestions",(function(){return h}));var a=t(0),i=t.n(a),n=t(26),o=t(68),s=t(12),u=t(2),c=t(1),r=t(8);const d=(e,l)=>{const t=Array.from(new Set(l&&(null!=e?e:[]).length>0?["ALL_VALUES",...null!=e?e:[]]:e));return(null!=t?t:[]).map((e=>({label:e})))};function p({label:e,selectedValue:l,loading:t,values:n,setQuery:o,usePrependLabel:r=!0,compressed:p=!0,required:h=!0,singleSelection:f=!1,allowAllValuesSelection:m,onChange:g}){const[S,E]=Object(a.useState)((()=>{var e;return d(Object(s.union)(null!==(e=null==n?void 0:n.map((({label:e})=>e)))&&void 0!==e?e:[],null!=l?l:[]),m)}));Object(a.useEffect)((()=>{var e;E(d(Object(s.union)(null!==(e=null==n?void 0:n.map((({label:e})=>e)))&&void 0!==e?e:[],null!=l?l:[]),m))}),[m,l,n]);const v=i.a.createElement(u.EuiComboBox,{fullWidth:!0,singleSelection:!!f&&{asPlainText:!0},compressed:p,placeholder:c.i18n.translate("xpack.observabilityShared.fieldValueSelection.placeholder.search",{defaultMessage:"Search {label}",values:{label:e}}),isLoading:t,onSearchChange:e=>{o(e)},options:S,selectedOptions:S.filter((e=>null==l?void 0:l.includes(e.label))),onChange:e=>{g(e.map((({label:e})=>e)))},isInvalid:h&&Object(s.isEmpty)(l)});return r?i.a.createElement(b,null,i.a.createElement(u.EuiFormControlLayout,{fullWidth:!0,prepend:e,compressed:!0},v)):i.a.createElement(u.EuiFormRow,{label:e,display:"center",fullWidth:!0},v)}const b=t.n(r).a.div.withConfig({displayName:"ComboWrapper",componentId:"sc-1o1n5t7-0"})(["&&&{.euiFormControlLayout{height:auto;.euiFormControlLayout__prepend{margin:auto;}.euiComboBoxPill{max-width:250px;}.euiComboBox__inputWrap{border-radius:0;}}}"]);function h({fullWidth:e,sourceField:l,label:t,dataViewTitle:s,selectedValue:u,excludedValue:c,filters:r,button:d,time:b,width:h,forceOpen:f,setForceOpen:m,anchorPosition:g,singleSelection:S,compressed:E,asFilterButton:v,usePrependLabel:y,allowAllValuesSelection:w,required:x,allowExclusions:O=!0,cardinalityField:C,inspector:j,asCombobox:F=!0,keepHistory:V=!0,showLogicalConditionSwitch:k,useLogicalAND:L,onChange:A}){const[P,B]=Object(a.useState)(""),{values:_,loading:z}=Object(n.a)({dataViewTitle:s,query:P,sourceField:l,filters:r,time:b,inspector:j,cardinalityField:C,keepHistory:V,label:t}),N=F?p:o.FieldValueSelection;return i.a.createElement(N,{fullWidth:e,singleSelection:S,values:_,label:t,onChange:A,query:P,setQuery:B,loading:z,selectedValue:u,excludedValue:c,button:d,forceOpen:f,setForceOpen:m,anchorPosition:g,width:h,compressed:E,asFilterButton:v,usePrependLabel:y,allowExclusions:O,allowAllValuesSelection:!S&&w,required:x,showLogicalConditionSwitch:k,useLogicalAND:L})}l.default=h},68:function(e,l,t){"use strict";t.r(l),t.d(l,"FieldValueSelection",(function(){return p}));var a=t(8),i=t.n(a),n=t(0),o=t.n(n),s=t(2),u=t(1),c=t(12);const r=t(57).euiStyled.div`
  border-radius: ${({theme:e})=>e.eui.euiBorderRadius};
  background: ${({theme:e})=>e.eui.euiColorLightShade};
  padding: 0 ${({theme:e})=>e.eui.euiSizeXS};
`,d=(e,l,t,a)=>{const i={};return null==e||e.forEach((({label:e,count:l})=>{i[e]=l})),Object.entries(i).map((([e,i])=>({label:e,append:a?o.a.createElement(r,null,o.a.createElement(s.EuiText,{size:"xs"},i)):null,...null!=l&&l.includes(e)?{checked:"on"}:{},...null!=t&&t.includes(e)?{checked:"off"}:{}})))};function p({fullWidth:e,label:l,loading:t,query:a,setQuery:i,button:r,width:p,forceOpen:m,setForceOpen:g,anchorPosition:S,singleSelection:E,asFilterButton:v,showCount:y=!0,values:w=[],selectedValue:x,excludedValue:O,allowExclusions:C=!0,compressed:j=!0,useLogicalAND:F,showLogicalConditionSwitch:V=!1,onChange:k}){const{euiTheme:L}=Object(s.useEuiTheme)(),[A,P]=Object(n.useState)((()=>d(w,x,O,y))),[B,_]=Object(n.useState)(!1),[z,N]=Object(n.useState)(F);Object(n.useEffect)((()=>{N(F)}),[F]),Object(n.useEffect)((()=>{P(d(w,x,O,y))}),[JSON.stringify(w),JSON.stringify(x),y,O]);const T=()=>{_(!B)},W=o.a.createElement(s.EuiButton,{style:p?{width:p}:{},size:"m",color:"text",iconType:"arrowDown",iconSide:"right",onClick:T,"data-test-subj":"fieldValueSelectionBtn",fullWidth:e},l),D=(x||[]).length+(O||[]).length,q=o.a.createElement(s.EuiFilterButton,{"aria-label":u.i18n.translate("xpack.observabilityShared.fieldValueSelection.label",{defaultMessage:"expands filter group for {label} filter",values:{label:l}}),hasActiveFilters:D>0,iconType:"arrowDown",numActiveFilters:D,numFilters:A.length,onClick:T},l),I=()=>{const e=(null!=A?A:[]).filter((e=>"on"===(null==e?void 0:e.checked))).map((({label:e})=>e)),l=(null!=A?A:[]).filter((e=>"off"===(null==e?void 0:e.checked))).map((({label:e})=>e)),t=(null!=x?x:[]).length>0||(null!=O?O:[]).length>0;return Object(c.isEqual)(null!=x?x:[],e)&&Object(c.isEqual)(null!=O?O:[],l)&&!(z!==F&&t)};return o.a.createElement(b,null,o.a.createElement(s.EuiPopover,{id:"popover",panelPaddingSize:"none",button:r||(v?q:W),isOpen:B||m,closePopover:()=>{_(!1),null==g||g(!1)},anchorPosition:S,display:"block"},o.a.createElement(s.EuiSelectable,{searchable:!0,singleSelection:E,searchProps:{placeholder:u.i18n.translate("xpack.observabilityShared.fieldValueSelection.placeholder",{defaultMessage:"Filter {label}",values:{label:l}}),compressed:j,onInput:e=>{i(e.target.value)},"data-test-subj":"suggestionInputField"},listProps:{onFocusBadge:!1},options:A,onChange:e=>{P(e)},allowExclusions:C,isLoading:t&&!a&&0===A.length},((e,i)=>o.a.createElement("div",{style:{width:240}},o.a.createElement(s.EuiPopoverTitle,{paddingSize:"s"},i),e,t&&a&&o.a.createElement(s.EuiText,{className:"eui-textCenter",color:"subdued"},u.i18n.translate("xpack.observabilityShared.fieldValueSelection.loading",{defaultMessage:"Loading"})," ",o.a.createElement(s.EuiLoadingSpinner,{size:"m"})),o.a.createElement(s.EuiPopoverFooter,{paddingSize:"s"},V&&o.a.createElement(o.a.Fragment,null,o.a.createElement(s.EuiSpacer,{size:"xs"}),o.a.createElement(h,null,o.a.createElement(f,{label:u.i18n.translate("xpack.observabilityShared.fieldValueSelection.logicalAnd",{defaultMessage:"Use logical AND"}),"data-test-subj":"tagsLogicalOperatorSwitch",checked:Boolean(z),compressed:!0,onChange:e=>{N(e.target.checked)},$_css:L.size.s,$_css2:L.colors.subduedText})),o.a.createElement(s.EuiSpacer,{size:"m"})),o.a.createElement(s.EuiButton,{"data-test-subj":"o11yFieldValueSelectionApplyButton","aria-label":u.i18n.translate("xpack.observabilityShared.fieldValueSelection.apply.label",{defaultMessage:"Apply the selected filters for {label}",values:{label:l}}),fill:!0,fullWidth:!0,size:"s",isDisabled:I(),onClick:()=>{const e=A.filter((e=>"on"===(null==e?void 0:e.checked))),l=A.filter((e=>"off"===(null==e?void 0:e.checked)));V?k(Object(c.map)(e,"label"),Object(c.map)(l,"label"),z):k(Object(c.map)(e,"label"),Object(c.map)(l,"label")),_(!1),null==g||g(!1)}},u.i18n.translate("xpack.observabilityShared.fieldValueSelection.apply",{defaultMessage:"Apply"}))))))))}l.default=p;const b=i.a.div.withConfig({displayName:"Wrapper",componentId:"sc-f2g2fd-0"})(["&&&{.euiButton{width:100%;}}"]);var h=i()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-f2g2fd-1"})({display:"flex",justifyContent:"flex-end"}),f=i()(s.EuiSwitch).withConfig({displayName:"_StyledEuiSwitch",componentId:"sc-f2g2fd-2"})((e=>({flexDirection:"row-reverse",gap:e.$_css,color:e.$_css2})))}}]);