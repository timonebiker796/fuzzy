(window.visTypeMetric_bundle_jsonpfunction=window.visTypeMetric_bundle_jsonpfunction||[]).push([[0],{22:function(e,t,n){"use strict";n.r(t),n.d(t,"convertToLens",(function(){return s}));var r=n(20),o=n(9),i=n(21),l=n(10);const c=(e,t,n,{metrics:r,buckets:o,columnsWithoutReferenced:i,bucketCollapseFn:l})=>{const[c]=r,[s]=o.all,a=l?Object.keys(l).find((e=>l[e].includes(s))):void 0;return{layerId:e,layerType:"data",palette:"None"!==t.metric.metricColorMode?n:void 0,metricAccessor:c,breakdownByAccessor:s,collapseFn:a}},s=async(e,t)=>{var n;if(!t)return null;const s=Object(l.a)(),a=await Object(o.getDataViewByIndexPatternId)(null===(n=e.data.indexPattern)||void 0===n?void 0:n.id,s);if(!a)return null;const{getColumnsFromVis:u,getPalette:d,getPercentageModeConfig:m}=await o.convertToLensModule,p=m(e.params.metric),f=u(e,t,a,{splits:["group"]},{dropEmptyRowsInDateHistogram:!0,...p});if(null===f)return null;const[y]=f;if(y.metrics.length>1||y.buckets.all.length>1)return null;if(y.metrics[0]){const e=y.columns.find((({columnId:e})=>e===y.metrics[0]));if("number"!==(null==e?void 0:e.dataType))return null}const b=Object(r.v4)(),g=a.id;return{type:"lnsMetric",layers:[{indexPatternId:g,layerId:b,columns:y.columns.map(i.excludeMetaFromColumn),columnOrder:[],ignoreGlobalFilters:!1}],configuration:c(b,e.params,d(e.params.metric,p),y),indexPatternIds:[g]}}}}]);